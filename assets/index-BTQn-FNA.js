(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const v of d.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function a(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(u){if(u.ep)return;u.ep=!0;const d=a(u);fetch(u.href,d)}})();var dv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iy(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var wp={exports:{}},yf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function ay(){if(Pg)return yf;Pg=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,u,d){var v=null;if(d!==void 0&&(v=""+d),u.key!==void 0&&(v=""+u.key),"key"in u){d={};for(var g in u)g!=="key"&&(d[g]=u[g])}else d=u;return u=d.ref,{$$typeof:o,type:s,key:v,ref:u!==void 0?u:null,props:d}}return yf.Fragment=n,yf.jsx=a,yf.jsxs=a,yf}var Rg;function oy(){return Rg||(Rg=1,wp.exports=ay()),wp.exports}var i=oy(),Sp={exports:{}},ni={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function ry(){if(Dg)return ni;Dg=1;var o=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),v=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),q=Symbol.iterator;function T(U){return U===null||typeof U!="object"?null:(U=q&&U[q]||U["@@iterator"],typeof U=="function"?U:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,L={};function D(U,A,E){this.props=U,this.context=A,this.refs=L,this.updater=E||V}D.prototype.isReactComponent={},D.prototype.setState=function(U,A){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,A,"setState")},D.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function ve(){}ve.prototype=D.prototype;function se(U,A,E){this.props=U,this.context=A,this.refs=L,this.updater=E||V}var ee=se.prototype=new ve;ee.constructor=se,X(ee,D.prototype),ee.isPureReactComponent=!0;var J=Array.isArray;function $(){}var I={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function O(U,A,E){var W=E.ref;return{$$typeof:o,type:U,key:A,ref:W!==void 0?W:null,props:E}}function he(U,A){return O(U.type,A,U.props)}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===o}function C(U){var A={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(E){return A[E]})}var re=/\/+/g;function ie(U,A){return typeof U=="object"&&U!==null&&U.key!=null?C(""+U.key):A.toString(36)}function fe(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then($,$):(U.status="pending",U.then(function(A){U.status==="pending"&&(U.status="fulfilled",U.value=A)},function(A){U.status==="pending"&&(U.status="rejected",U.reason=A)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function te(U,A,E,W,xe){var Ce=typeof U;(Ce==="undefined"||Ce==="boolean")&&(U=null);var Te=!1;if(U===null)Te=!0;else switch(Ce){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(U.$$typeof){case o:case n:Te=!0;break;case S:return Te=U._init,te(Te(U._payload),A,E,W,xe)}}if(Te)return xe=xe(U),Te=W===""?"."+ie(U,0):W,J(xe)?(E="",Te!=null&&(E=Te.replace(re,"$&/")+"/"),te(xe,A,E,"",function(De){return De})):xe!=null&&(N(xe)&&(xe=he(xe,E+(xe.key==null||U&&U.key===xe.key?"":(""+xe.key).replace(re,"$&/")+"/")+Te)),A.push(xe)),1;Te=0;var Le=W===""?".":W+":";if(J(U))for(var Ae=0;Ae<U.length;Ae++)W=U[Ae],Ce=Le+ie(W,Ae),Te+=te(W,A,E,Ce,xe);else if(Ae=T(U),typeof Ae=="function")for(U=Ae.call(U),Ae=0;!(W=U.next()).done;)W=W.value,Ce=Le+ie(W,Ae++),Te+=te(W,A,E,Ce,xe);else if(Ce==="object"){if(typeof U.then=="function")return te(fe(U),A,E,W,xe);throw A=String(U),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return Te}function ne(U,A,E){if(U==null)return U;var W=[],xe=0;return te(U,W,"","",function(Ce){return A.call(E,Ce,xe++)}),W}function pe(U){if(U._status===-1){var A=U._result;A=A(),A.then(function(E){(U._status===0||U._status===-1)&&(U._status=1,U._result=E)},function(E){(U._status===0||U._status===-1)&&(U._status=2,U._result=E)}),U._status===-1&&(U._status=0,U._result=A)}if(U._status===1)return U._result.default;throw U._result}var Ne=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},me={map:ne,forEach:function(U,A,E){ne(U,function(){A.apply(this,arguments)},E)},count:function(U){var A=0;return ne(U,function(){A++}),A},toArray:function(U){return ne(U,function(A){return A})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ni.Activity=R,ni.Children=me,ni.Component=D,ni.Fragment=a,ni.Profiler=u,ni.PureComponent=se,ni.StrictMode=s,ni.Suspense=f,ni.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ni.__COMPILER_RUNTIME={__proto__:null,c:function(U){return I.H.useMemoCache(U)}},ni.cache=function(U){return function(){return U.apply(null,arguments)}},ni.cacheSignal=function(){return null},ni.cloneElement=function(U,A,E){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var W=X({},U.props),xe=U.key;if(A!=null)for(Ce in A.key!==void 0&&(xe=""+A.key),A)!F.call(A,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&A.ref===void 0||(W[Ce]=A[Ce]);var Ce=arguments.length-2;if(Ce===1)W.children=E;else if(1<Ce){for(var Te=Array(Ce),Le=0;Le<Ce;Le++)Te[Le]=arguments[Le+2];W.children=Te}return O(U.type,xe,W)},ni.createContext=function(U){return U={$$typeof:v,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:d,_context:U},U},ni.createElement=function(U,A,E){var W,xe={},Ce=null;if(A!=null)for(W in A.key!==void 0&&(Ce=""+A.key),A)F.call(A,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(xe[W]=A[W]);var Te=arguments.length-2;if(Te===1)xe.children=E;else if(1<Te){for(var Le=Array(Te),Ae=0;Ae<Te;Ae++)Le[Ae]=arguments[Ae+2];xe.children=Le}if(U&&U.defaultProps)for(W in Te=U.defaultProps,Te)xe[W]===void 0&&(xe[W]=Te[W]);return O(U,Ce,xe)},ni.createRef=function(){return{current:null}},ni.forwardRef=function(U){return{$$typeof:g,render:U}},ni.isValidElement=N,ni.lazy=function(U){return{$$typeof:S,_payload:{_status:-1,_result:U},_init:pe}},ni.memo=function(U,A){return{$$typeof:b,type:U,compare:A===void 0?null:A}},ni.startTransition=function(U){var A=I.T,E={};I.T=E;try{var W=U(),xe=I.S;xe!==null&&xe(E,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then($,Ne)}catch(Ce){Ne(Ce)}finally{A!==null&&E.types!==null&&(A.types=E.types),I.T=A}},ni.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ni.use=function(U){return I.H.use(U)},ni.useActionState=function(U,A,E){return I.H.useActionState(U,A,E)},ni.useCallback=function(U,A){return I.H.useCallback(U,A)},ni.useContext=function(U){return I.H.useContext(U)},ni.useDebugValue=function(){},ni.useDeferredValue=function(U,A){return I.H.useDeferredValue(U,A)},ni.useEffect=function(U,A){return I.H.useEffect(U,A)},ni.useEffectEvent=function(U){return I.H.useEffectEvent(U)},ni.useId=function(){return I.H.useId()},ni.useImperativeHandle=function(U,A,E){return I.H.useImperativeHandle(U,A,E)},ni.useInsertionEffect=function(U,A){return I.H.useInsertionEffect(U,A)},ni.useLayoutEffect=function(U,A){return I.H.useLayoutEffect(U,A)},ni.useMemo=function(U,A){return I.H.useMemo(U,A)},ni.useOptimistic=function(U,A){return I.H.useOptimistic(U,A)},ni.useReducer=function(U,A,E){return I.H.useReducer(U,A,E)},ni.useRef=function(U){return I.H.useRef(U)},ni.useState=function(U){return I.H.useState(U)},ni.useSyncExternalStore=function(U,A,E){return I.H.useSyncExternalStore(U,A,E)},ni.useTransition=function(){return I.H.useTransition()},ni.version="19.2.0",ni}var Mg;function g0(){return Mg||(Mg=1,Sp.exports=ry()),Sp.exports}var H=g0();const At=iy(H);var jp={exports:{}},mf={},Tp={exports:{}},Cp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function sy(){return Bg||(Bg=1,(function(o){function n(te,ne){var pe=te.length;te.push(ne);e:for(;0<pe;){var Ne=pe-1>>>1,me=te[Ne];if(0<u(me,ne))te[Ne]=ne,te[pe]=me,pe=Ne;else break e}}function a(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var ne=te[0],pe=te.pop();if(pe!==ne){te[0]=pe;e:for(var Ne=0,me=te.length,U=me>>>1;Ne<U;){var A=2*(Ne+1)-1,E=te[A],W=A+1,xe=te[W];if(0>u(E,pe))W<me&&0>u(xe,E)?(te[Ne]=xe,te[W]=pe,Ne=W):(te[Ne]=E,te[A]=pe,Ne=A);else if(W<me&&0>u(xe,pe))te[Ne]=xe,te[W]=pe,Ne=W;else break e}}return ne}function u(te,ne){var pe=te.sortIndex-ne.sortIndex;return pe!==0?pe:te.id-ne.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var v=Date,g=v.now();o.unstable_now=function(){return v.now()-g}}var f=[],b=[],S=1,R=null,q=3,T=!1,V=!1,X=!1,L=!1,D=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function ee(te){for(var ne=a(b);ne!==null;){if(ne.callback===null)s(b);else if(ne.startTime<=te)s(b),ne.sortIndex=ne.expirationTime,n(f,ne);else break;ne=a(b)}}function J(te){if(X=!1,ee(te),!V)if(a(f)!==null)V=!0,$||($=!0,C());else{var ne=a(b);ne!==null&&fe(J,ne.startTime-te)}}var $=!1,I=-1,F=5,O=-1;function he(){return L?!0:!(o.unstable_now()-O<F)}function N(){if(L=!1,$){var te=o.unstable_now();O=te;var ne=!0;try{e:{V=!1,X&&(X=!1,ve(I),I=-1),T=!0;var pe=q;try{t:{for(ee(te),R=a(f);R!==null&&!(R.expirationTime>te&&he());){var Ne=R.callback;if(typeof Ne=="function"){R.callback=null,q=R.priorityLevel;var me=Ne(R.expirationTime<=te);if(te=o.unstable_now(),typeof me=="function"){R.callback=me,ee(te),ne=!0;break t}R===a(f)&&s(f),ee(te)}else s(f);R=a(f)}if(R!==null)ne=!0;else{var U=a(b);U!==null&&fe(J,U.startTime-te),ne=!1}}break e}finally{R=null,q=pe,T=!1}ne=void 0}}finally{ne?C():$=!1}}}var C;if(typeof se=="function")C=function(){se(N)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ie=re.port2;re.port1.onmessage=N,C=function(){ie.postMessage(null)}}else C=function(){D(N,0)};function fe(te,ne){I=D(function(){te(o.unstable_now())},ne)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(te){te.callback=null},o.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<te?Math.floor(1e3/te):5},o.unstable_getCurrentPriorityLevel=function(){return q},o.unstable_next=function(te){switch(q){case 1:case 2:case 3:var ne=3;break;default:ne=q}var pe=q;q=ne;try{return te()}finally{q=pe}},o.unstable_requestPaint=function(){L=!0},o.unstable_runWithPriority=function(te,ne){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var pe=q;q=te;try{return ne()}finally{q=pe}},o.unstable_scheduleCallback=function(te,ne,pe){var Ne=o.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ne+pe:Ne):pe=Ne,te){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=pe+me,te={id:S++,callback:ne,priorityLevel:te,startTime:pe,expirationTime:me,sortIndex:-1},pe>Ne?(te.sortIndex=pe,n(b,te),a(f)===null&&te===a(b)&&(X?(ve(I),I=-1):X=!0,fe(J,pe-Ne))):(te.sortIndex=me,n(f,te),V||T||(V=!0,$||($=!0,C()))),te},o.unstable_shouldYield=he,o.unstable_wrapCallback=function(te){var ne=q;return function(){var pe=q;q=ne;try{return te.apply(this,arguments)}finally{q=pe}}}})(Cp)),Cp}var Eg;function ly(){return Eg||(Eg=1,Tp.exports=sy()),Tp.exports}var Ap={exports:{}},ps={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function cy(){if(Og)return ps;Og=1;var o=g0();function n(f){var b="https://react.dev/errors/"+f;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+f+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(f,b,S){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:f,containerInfo:b,implementation:S}}var v=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(f,b){if(f==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return ps.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ps.createPortal=function(f,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return d(f,b,null,S)},ps.flushSync=function(f){var b=v.T,S=s.p;try{if(v.T=null,s.p=2,f)return f()}finally{v.T=b,s.p=S,s.d.f()}},ps.preconnect=function(f,b){typeof f=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(f,b))},ps.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},ps.preinit=function(f,b){if(typeof f=="string"&&b&&typeof b.as=="string"){var S=b.as,R=g(S,b.crossOrigin),q=typeof b.integrity=="string"?b.integrity:void 0,T=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?s.d.S(f,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:R,integrity:q,fetchPriority:T}):S==="script"&&s.d.X(f,{crossOrigin:R,integrity:q,fetchPriority:T,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},ps.preinitModule=function(f,b){if(typeof f=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=g(b.as,b.crossOrigin);s.d.M(f,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(f)},ps.preload=function(f,b){if(typeof f=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,R=g(S,b.crossOrigin);s.d.L(f,S,{crossOrigin:R,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},ps.preloadModule=function(f,b){if(typeof f=="string")if(b){var S=g(b.as,b.crossOrigin);s.d.m(f,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(f)},ps.requestFormReset=function(f){s.d.r(f)},ps.unstable_batchedUpdates=function(f,b){return f(b)},ps.useFormState=function(f,b,S){return v.H.useFormState(f,b,S)},ps.useFormStatus=function(){return v.H.useHostTransitionStatus()},ps.version="19.2.0",ps}var Ig;function uy(){if(Ig)return Ap.exports;Ig=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Ap.exports=cy(),Ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function dy(){if(Ug)return mf;Ug=1;var o=ly(),n=g0(),a=uy();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function v(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function f(e){if(d(e)!==e)throw Error(s(188))}function b(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,l=t;;){var p=r.return;if(p===null)break;var m=p.alternate;if(m===null){if(l=p.return,l!==null){r=l;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===r)return f(p),e;if(m===l)return f(p),t;m=m.sibling}throw Error(s(188))}if(r.return!==l.return)r=p,l=m;else{for(var P=!1,oe=p.child;oe;){if(oe===r){P=!0,r=p,l=m;break}if(oe===l){P=!0,l=p,r=m;break}oe=oe.sibling}if(!P){for(oe=m.child;oe;){if(oe===r){P=!0,r=m,l=p;break}if(oe===l){P=!0,l=m,r=p;break}oe=oe.sibling}if(!P)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var R=Object.assign,q=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),ve=Symbol.for("react.consumer"),se=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function C(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var re=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case D:return"Profiler";case L:return"StrictMode";case J:return"Suspense";case $:return"SuspenseList";case O:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case se:return e.displayName||"Context";case ve:return(e._context.displayName||"Context")+".Consumer";case ee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return t=e.displayName||null,t!==null?t:ie(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}var fe=Array.isArray,te=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ne=[],me=-1;function U(e){return{current:e}}function A(e){0>me||(e.current=Ne[me],Ne[me]=null,me--)}function E(e,t){me++,Ne[me]=e.current,e.current=t}var W=U(null),xe=U(null),Ce=U(null),Te=U(null);function Le(e,t){switch(E(Ce,t),E(xe,e),E(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?tg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=tg(t),e=ng(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(W),E(W,e)}function Ae(){A(W),A(xe),A(Ce)}function De(e){e.memoizedState!==null&&E(Te,e);var t=W.current,r=ng(t,e.type);t!==r&&(E(xe,e),E(W,r))}function Ye(e){xe.current===e&&(A(W),A(xe)),Te.current===e&&(A(Te),hf._currentValue=pe)}var pt,mt;function _t(e){if(pt===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);pt=t&&t[1]||"",mt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+e+mt}var de=!1;function vt(e,t){if(!e||de)return"";de=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(et){var Je=et}Reflect.construct(e,[],yt)}else{try{yt.call()}catch(et){Je=et}e.call(yt.prototype)}}else{try{throw Error()}catch(et){Je=et}(yt=e())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(et){if(et&&Je&&typeof et.stack=="string")return[et.stack,Je.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),P=m[0],oe=m[1];if(P&&oe){var ze=P.split(`
`),Ke=oe.split(`
`);for(p=l=0;l<ze.length&&!ze[l].includes("DetermineComponentFrameRoot");)l++;for(;p<Ke.length&&!Ke[p].includes("DetermineComponentFrameRoot");)p++;if(l===ze.length||p===Ke.length)for(l=ze.length-1,p=Ke.length-1;1<=l&&0<=p&&ze[l]!==Ke[p];)p--;for(;1<=l&&0<=p;l--,p--)if(ze[l]!==Ke[p]){if(l!==1||p!==1)do if(l--,p--,0>p||ze[l]!==Ke[p]){var ut=`
`+ze[l].replace(" at new "," at ");return e.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",e.displayName)),ut}while(1<=l&&0<=p);break}}}finally{de=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?_t(r):""}function zt(e,t){switch(e.tag){case 26:case 27:case 5:return _t(e.type);case 16:return _t("Lazy");case 13:return e.child!==t&&t!==null?_t("Suspense Fallback"):_t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return vt(e.type,!1);case 11:return vt(e.type.render,!1);case 1:return vt(e.type,!0);case 31:return _t("Activity");default:return""}}function kt(e){try{var t="",r=null;do t+=zt(e,r),r=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ot=Object.prototype.hasOwnProperty,sn=o.unstable_scheduleCallback,Ut=o.unstable_cancelCallback,xn=o.unstable_shouldYield,nn=o.unstable_requestPaint,Un=o.unstable_now,Ct=o.unstable_getCurrentPriorityLevel,Mt=o.unstable_ImmediatePriority,ri=o.unstable_UserBlockingPriority,ht=o.unstable_NormalPriority,St=o.unstable_LowPriority,Rn=o.unstable_IdlePriority,Zt=o.log,_n=o.unstable_setDisableYieldValue,Tn=null,ln=null;function yn(e){if(typeof Zt=="function"&&_n(e),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(Tn,e)}catch{}}var nt=Math.clz32?Math.clz32:Vt,Qt=Math.log,Wt=Math.LN2;function Vt(e){return e>>>=0,e===0?32:31-(Qt(e)/Wt|0)|0}var bn=256,Fi=262144,Mn=4194304;function fn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $t(e,t,r){var l=e.pendingLanes;if(l===0)return 0;var p=0,m=e.suspendedLanes,P=e.pingedLanes;e=e.warmLanes;var oe=l&134217727;return oe!==0?(l=oe&~m,l!==0?p=fn(l):(P&=oe,P!==0?p=fn(P):r||(r=oe&~e,r!==0&&(p=fn(r))))):(oe=l&~m,oe!==0?p=fn(oe):P!==0?p=fn(P):r||(r=l&~e,r!==0&&(p=fn(r)))),p===0?0:t!==0&&t!==p&&(t&m)===0&&(m=p&-p,r=t&-t,m>=r||m===32&&(r&4194048)!==0)?t:p}function To(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function eo(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xo(){var e=Mn;return Mn<<=1,(Mn&62914560)===0&&(Mn=4194304),e}function Co(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Kt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ao(e,t,r,l,p,m){var P=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var oe=e.entanglements,ze=e.expirationTimes,Ke=e.hiddenUpdates;for(r=P&~r;0<r;){var ut=31-nt(r),yt=1<<ut;oe[ut]=0,ze[ut]=-1;var Je=Ke[ut];if(Je!==null)for(Ke[ut]=null,ut=0;ut<Je.length;ut++){var et=Je[ut];et!==null&&(et.lane&=-536870913)}r&=~yt}l!==0&&rr(e,l,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(P&~t))}function rr(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-nt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function Go(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var l=31-nt(r),p=1<<l;p&t|e[l]&t&&(e[l]|=t),r&=~p}}function jt(e,t){var r=t&-t;return r=(r&42)!==0?1:si(r),(r&(e.suspendedLanes|t))!==0?0:r}function si(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function li(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function zi(){var e=ne.p;return e!==0?e:(e=window.event,e===void 0?32:Cg(e.type))}function bs(e,t){var r=ne.p;try{return ne.p=e,t()}finally{ne.p=r}}var ko=Math.random().toString(36).slice(2),Hi="__reactFiber$"+ko,la="__reactProps$"+ko,ba="__reactContainer$"+ko,No="__reactEvents$"+ko,Bn="__reactListeners$"+ko,kr="__reactHandles$"+ko,hi="__reactResources$"+ko,sr="__reactMarker$"+ko;function mi(e){delete e[Hi],delete e[la],delete e[No],delete e[Bn],delete e[kr]}function lr(e){var t=e[Hi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ba]||r[Hi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=cg(e);e!==null;){if(r=e[Hi])return r;e=cg(e)}return t}e=r,r=e.parentNode}return null}function _i(e){if(e=e[Hi]||e[ba]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function vs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function cr(e){var t=e[hi];return t||(t=e[hi]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xa(e){e[sr]=!0}var ws=new Set,yo={};function Ir(e,t){ca(e,t),ca(e+"Capture",t)}function ca(e,t){for(yo[e]=t,e=0;e<t.length;e++)ws.add(t[e])}var Hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gn={},va={};function Es(e){return ot.call(va,e)?!0:ot.call(Gn,e)?!1:Hl.test(e)?va[e]=!0:(Gn[e]=!0,!1)}function Xo(e,t,r){if(Es(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function ur(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function Nr(e,t,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+l)}}function Vn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Io(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ur(e,t,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return p.call(this)},set:function(P){r=""+P,m.call(this,P)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(P){r=""+P},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zo(e){if(!e._valueTracker){var t=Io(e)?"checked":"value";e._valueTracker=Ur(e,t,""+e[t])}}function ol(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),l="";return e&&(l=Io(e)?e.checked?"true":"false":e.value),e=l,e!==r?(t.setValue(e),!0):!1}function ua(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ci=/[\n"\\]/g;function Gi(e){return e.replace(ci,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function wa(e,t,r,l,p,m,P,oe){e.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?e.type=P:e.removeAttribute("type"),t!=null?P==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Vn(t)):e.value!==""+Vn(t)&&(e.value=""+Vn(t)):P!=="submit"&&P!=="reset"||e.removeAttribute("value"),t!=null?ql(e,P,Vn(t)):r!=null?ql(e,P,Vn(r)):l!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?e.name=""+Vn(oe):e.removeAttribute("name")}function Da(e,t,r,l,p,m,P,oe){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),t!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||t!=null)){zo(e);return}r=r!=null?""+Vn(r):"",t=t!=null?""+Vn(t):r,oe||t===e.value||(e.value=t),e.defaultValue=t}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=oe?e.checked:!!l,e.defaultChecked=!!l,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(e.name=P),zo(e)}function ql(e,t,r){t==="number"&&ua(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Sa(e,t,r,l){if(e=e.options,t){t={};for(var p=0;p<r.length;p++)t["$"+r[p]]=!0;for(r=0;r<e.length;r++)p=t.hasOwnProperty("$"+e[r].value),e[r].selected!==p&&(e[r].selected=p),p&&l&&(e[r].defaultSelected=!0)}else{for(r=""+Vn(r),t=null,p=0;p<e.length;p++){if(e[p].value===r){e[p].selected=!0,l&&(e[p].defaultSelected=!0);return}t!==null||e[p].disabled||(t=e[p])}t!==null&&(t.selected=!0)}}function dr(e,t,r){if(t!=null&&(t=""+Vn(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+Vn(r):""}function rl(e,t,r,l){if(t==null){if(l!=null){if(r!=null)throw Error(s(92));if(fe(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),t=r}r=Vn(t),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),zo(e)}function fr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ss=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function da(e,t,r){var l=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,r):typeof r!="number"||r===0||Ss.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Qn(e,t,r){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var p in t)l=t[p],t.hasOwnProperty(p)&&r[p]!==l&&da(e,p,l)}else for(var m in t)t.hasOwnProperty(m)&&da(e,m,t[m])}function Fr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ze(e){return Fn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function vi(){}var Zo=null;function Cn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jt=null,Rt=null;function Sn(e){var t=_i(e);if(t&&(e=t.stateNode)){var r=e[la]||null;e:switch(e=t.stateNode,t.type){case"input":if(wa(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Gi(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var l=r[t];if(l!==e&&l.form===e.form){var p=l[la]||null;if(!p)throw Error(s(90));wa(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(t=0;t<r.length;t++)l=r[t],l.form===e.form&&ol(l)}break e;case"textarea":dr(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&Sa(e,!!r.multiple,t,!1)}}}var ui=!1;function An(e,t,r){if(ui)return e(t,r);ui=!0;try{var l=e(t);return l}finally{if(ui=!1,(Jt!==null||Rt!==null)&&(Yf(),Jt&&(t=Jt,e=Rt,Rt=Jt=null,Sn(t),e)))for(t=0;t<e.length;t++)Sn(e[t])}}function Hr(e,t){var r=e.stateNode;if(r===null)return null;var l=r[la]||null;if(l===null)return null;r=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(Ft)try{var cn={};Object.defineProperty(cn,"passive",{get:function(){wi=!0}}),window.addEventListener("test",cn,cn),window.removeEventListener("test",cn,cn)}catch{wi=!1}var Xn=null,ns=null,is=null;function Uo(){if(is)return is;var e,t=ns,r=t.length,l,p="value"in Xn?Xn.value:Xn.textContent,m=p.length;for(e=0;e<r&&t[e]===p[e];e++);var P=r-e;for(l=1;l<=P&&t[r-l]===p[m-l];l++);return is=p.slice(e,1<l?1-l:void 0)}function Fo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zr(){return!0}function js(){return!1}function lo(e){function t(r,l,p,m,P){this._reactName=r,this._targetInst=p,this.type=l,this.nativeEvent=m,this.target=P,this.currentTarget=null;for(var oe in e)e.hasOwnProperty(oe)&&(r=e[oe],this[oe]=r?r(m):m[oe]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?zr:js,this.isPropagationStopped=js,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zr)},persist:function(){},isPersistent:zr}),t}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=lo(Ts),Os=R({},Ts,{view:0,detail:0}),Vl=lo(Os),$l,hn,Ho,Si=R({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ho&&(Ho&&e.type==="mousemove"?($l=e.screenX-Ho.screenX,hn=e.screenY-Ho.screenY):hn=$l=0,Ho=e),$l)},movementY:function(e){return"movementY"in e?e.movementY:hn}}),Cs=lo(Si),Ma=R({},Si,{dataTransfer:0}),qi=lo(Ma),_o=R({},Os,{relatedTarget:0}),Xi=lo(_o),Jo=R({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),w=lo(Jo),G=R({},Ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ye=lo(G),_e=R({},Ts,{data:0}),Ie=lo(_e),dt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ft={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ot(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yt[e])?!!t[e]:!1}function jn(){return Ot}var vn=R({},Os,{key:function(e){if(e.key){var t=dt[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ft[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return e.type==="keypress"?Fo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pi=lo(vn),Mi=R({},Si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ba=lo(Mi),Zn=R({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn}),Na=lo(Zn),ji=R({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),Va=lo(ji),$a=R({},Si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qo=lo($a),Bi=R({},Ts,{newState:0,oldState:0}),Is=lo(Bi),hc=[9,13,27,32],Us=Ft&&"CompositionEvent"in window,hr=null;Ft&&"documentMode"in document&&(hr=document.documentMode);var Fs=Ft&&"TextEvent"in window&&!hr,as=Ft&&(!Us||hr&&8<hr&&11>=hr),co=" ",pr=!1;function As(e,t){switch(e){case"keyup":return hc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function er(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gr=!1;function to(e,t){switch(e){case"compositionend":return er(t);case"keypress":return t.which!==32?null:(pr=!0,co);case"textInput":return e=t.data,e===co&&pr?null:e;default:return null}}function ks(e,t){if(gr)return e==="compositionend"||!Us&&As(e,t)?(e=Uo(),is=ns=Xn=null,gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return as&&t.locale!=="ko"?null:t.data;default:return null}}var Ns={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ns[e.type]:t==="textarea"}function mo(e,t,r,l){Jt?Rt?Rt.push(l):Rt=[l]:Jt=l,t=eh(t,"onChange"),0<t.length&&(r=new Ko("onChange","change",null,r,l),e.push({event:r,listeners:t}))}var qr=null,_r=null;function Li(e){X0(e,0)}function qo(e){var t=vs(e);if(ol(t))return e}function Ei(e,t){if(e==="change")return t}var uo=!1;if(Ft){var Wo;if(Ft){var xr="oninput"in document;if(!xr){var Hs=document.createElement("div");Hs.setAttribute("oninput","return;"),xr=typeof Hs.oninput=="function"}Wo=xr}else Wo=!1;uo=Wo&&(!document.documentMode||9<document.documentMode)}function zs(){qr&&(qr.detachEvent("onpropertychange",pc),_r=qr=null)}function pc(e){if(e.propertyName==="value"&&qo(_r)){var t=[];mo(t,_r,e,Cn(e)),An(Li,t)}}function gc(e,t,r){e==="focusin"?(zs(),qr=t,_r=r,qr.attachEvent("onpropertychange",pc)):e==="focusout"&&zs()}function na(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qo(_r)}function xc(e,t){if(e==="click")return qo(t)}function Wr(e,t){if(e==="input"||e==="change")return qo(t)}function os(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ya=typeof Object.is=="function"?Object.is:os;function rs(e,t){if(Ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var p=r[l];if(!ot.call(t,p)||!Ya(e[p],t[p]))return!1}return!0}function qs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sl(e,t){var r=qs(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=t&&l>=t)return{node:r,offset:t-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qs(r)}}function Vr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vr(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _s(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ua(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ua(e.document)}return t}function $r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ll=Ft&&"documentMode"in document&&11>=document.documentMode,tr=null,Ea=null,fa=null,bo=!1;function ei(e,t,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bo||tr==null||tr!==ua(l)||(l=tr,"selectionStart"in l&&$r(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),fa&&rs(fa,l)||(fa=l,l=eh(Ea,"onSelect"),0<l.length&&(t=new Ko("onSelect","select",null,t,r),e.push({event:t,listeners:l}),t.target=tr)))}function ti(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ti={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionrun:ti("Transition","TransitionRun"),transitionstart:ti("Transition","TransitionStart"),transitioncancel:ti("Transition","TransitionCancel"),transitionend:ti("Transition","TransitionEnd")},ia={},fo={};Ft&&(fo=document.createElement("div").style,"AnimationEvent"in window||(delete Ti.animationend.animation,delete Ti.animationiteration.animation,delete Ti.animationstart.animation),"TransitionEvent"in window||delete Ti.transitionend.transition);function Lr(e){if(ia[e])return ia[e];if(!Ti[e])return e;var t=Ti[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in fo)return ia[e]=t[r];return e}var Ga=Lr("animationend"),Oi=Lr("animationiteration"),ss=Lr("animationstart"),vo=Lr("transitionrun"),ls=Lr("transitionstart"),Xu=Lr("transitioncancel"),cl=Lr("transitionend"),Zc=new Map,Ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ws.push("scrollEnd");function oi(e,t){Zc.set(e,t),Ir(t,[e])}var Lo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},yr=[],Tl=0,Dc=0;function Gl(){for(var e=Tl,t=Dc=Tl=0;t<e;){var r=yr[t];yr[t++]=null;var l=yr[t];yr[t++]=null;var p=yr[t];yr[t++]=null;var m=yr[t];if(yr[t++]=null,l!==null&&p!==null){var P=l.pending;P===null?p.next=p:(p.next=P.next,P.next=p),l.pending=p}m!==0&&yc(r,p,m)}}function Cl(e,t,r,l){yr[Tl++]=e,yr[Tl++]=t,yr[Tl++]=r,yr[Tl++]=l,Dc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Xl(e,t,r,l){return Cl(e,t,r,l),Xa(e)}function Yr(e,t){return Cl(e,null,null,t),Xa(e)}function yc(e,t,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var p=!1,m=e.return;m!==null;)m.childLanes|=r,l=m.alternate,l!==null&&(l.childLanes|=r),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&t!==null&&(p=31-nt(r),e=m.hiddenUpdates,l=e[p],l===null?e[p]=[t]:l.push(t),t.lane=r|536870912),m):null}function Xa(e){if(50<rf)throw rf=0,Vh=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var no={};function Vs(e,t,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(e,t,r,l){return new Vs(e,t,r,l)}function Zl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mr(e,t){var r=e.alternate;return r===null?(r=io(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function $s(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ys(e,t,r,l,p,m){var P=0;if(l=e,typeof e=="function")Zl(e)&&(P=1);else if(typeof e=="string")P=Vx(e,r,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case O:return e=io(31,r,t,p),e.elementType=O,e.lanes=m,e;case X:return ul(r.children,p,m,t);case L:P=8,p|=24;break;case D:return e=io(12,r,t,p|2),e.elementType=D,e.lanes=m,e;case J:return e=io(13,r,t,p),e.elementType=J,e.lanes=m,e;case $:return e=io(19,r,t,p),e.elementType=$,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case se:P=10;break e;case ve:P=9;break e;case ee:P=11;break e;case I:P=14;break e;case F:P=16,l=null;break e}P=29,r=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=io(P,r,t,p),t.elementType=e,t.type=l,t.lanes=m,t}function ul(e,t,r,l){return e=io(7,e,l,t),e.lanes=r,e}function Pr(e,t,r){return e=io(6,e,null,t),e.lanes=r,e}function Po(e){var t=io(18,null,null,0);return t.stateNode=e,t}function dl(e,t,r){return t=io(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Mc=new WeakMap;function nr(e,t){if(typeof e=="object"&&e!==null){var r=Mc.get(e);return r!==void 0?r:(t={value:e,source:t,stack:kt(t)},Mc.set(e,t),t)}return{value:e,source:t,stack:kt(t)}}var cs=[],Gs=0,fl=null,Xs=0,us=[],Gr=0,hl=null,ds=1,br="";function vr(e,t){cs[Gs++]=Xs,cs[Gs++]=fl,fl=e,Xs=t}function Su(e,t,r){us[Gr++]=ds,us[Gr++]=br,us[Gr++]=hl,hl=e;var l=ds;e=br;var p=32-nt(l)-1;l&=~(1<<p),r+=1;var m=32-nt(t)+p;if(30<m){var P=p-p%5;m=(l&(1<<P)-1).toString(32),l>>=P,p-=P,ds=1<<32-nt(t)+p|r<<p|l,br=m+e}else ds=1<<m|r<<p|l,br=e}function Kc(e){e.return!==null&&(vr(e,1),Su(e,1,0))}function Bc(e){for(;e===fl;)fl=cs[--Gs],cs[Gs]=null,Xs=cs[--Gs],cs[Gs]=null;for(;e===hl;)hl=us[--Gr],us[Gr]=null,br=us[--Gr],us[Gr]=null,ds=us[--Gr],us[Gr]=null}function Kl(e,t){us[Gr++]=ds,us[Gr++]=br,us[Gr++]=hl,ds=t.id,br=t.overflow,hl=e}var ya=null,Wi=null,Hn=!1,Vi=null,Zi=!1,za=Error(s(519));function wr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xr(nr(t,e)),za}function ir(e){var t=e.stateNode,r=e.type,l=e.memoizedProps;switch(t[Hi]=e,t[la]=l,r){case"dialog":Ni("cancel",t),Ni("close",t);break;case"iframe":case"object":case"embed":Ni("load",t);break;case"video":case"audio":for(r=0;r<lf.length;r++)Ni(lf[r],t);break;case"source":Ni("error",t);break;case"img":case"image":case"link":Ni("error",t),Ni("load",t);break;case"details":Ni("toggle",t);break;case"input":Ni("invalid",t),Da(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ni("invalid",t);break;case"textarea":Ni("invalid",t),rl(t,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||l.suppressHydrationWarning===!0||Q0(t.textContent,r)?(l.popover!=null&&(Ni("beforetoggle",t),Ni("toggle",t)),l.onScroll!=null&&Ni("scroll",t),l.onScrollEnd!=null&&Ni("scrollend",t),l.onClick!=null&&(t.onclick=vi),t=!0):t=!1,t||wr(e,!0)}function ar(e){for(ya=e.return;ya;)switch(ya.tag){case 5:case 31:case 13:Zi=!1;return;case 27:case 3:Zi=!0;return;default:ya=ya.return}}function Ki(e){if(e!==ya)return!1;if(!Hn)return ar(e),Hn=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||rp(e.type,e.memoizedProps)),r=!r),r&&Wi&&wr(e),ar(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Wi=lg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Wi=lg(e)}else t===27?(t=Wi,fu(e.type)?(e=dp,dp=null,Wi=e):Wi=t):Wi=ya?El(e.stateNode.nextSibling):null;return!0}function Rr(){Wi=ya=null,Hn=!1}function Sr(){var e=Vi;return e!==null&&(nl===null?nl=e:nl.push.apply(nl,e),Vi=null),e}function Xr(e){Vi===null?Vi=[e]:Vi.push(e)}var Zr=U(null),Kr=null,wo=null;function Jr(e,t,r){E(Zr,t._currentValue),t._currentValue=r}function Oa(e){e._currentValue=Zr.current,A(Zr)}function Dr(e,t,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===r)break;e=e.return}}function Ro(e,t,r,l){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var P=p.child;m=m.firstContext;e:for(;m!==null;){var oe=m;m=p;for(var ze=0;ze<t.length;ze++)if(oe.context===t[ze]){m.lanes|=r,oe=m.alternate,oe!==null&&(oe.lanes|=r),Dr(m.return,r,e),l||(P=null);break e}m=oe.next}}else if(p.tag===18){if(P=p.return,P===null)throw Error(s(341));P.lanes|=r,m=P.alternate,m!==null&&(m.lanes|=r),Dr(P,r,e),P=null}else P=p.child;if(P!==null)P.return=p;else for(P=p;P!==null;){if(P===e){P=null;break}if(p=P.sibling,p!==null){p.return=P.return,P=p;break}P=P.return}p=P}}function or(e,t,r,l){e=null;for(var p=t,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var P=p.alternate;if(P===null)throw Error(s(387));if(P=P.memoizedProps,P!==null){var oe=p.type;Ya(p.pendingProps.value,P.value)||(e!==null?e.push(oe):e=[oe])}}else if(p===Te.current){if(P=p.alternate,P===null)throw Error(s(387));P.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(hf):e=[hf])}p=p.return}e!==null&&Ro(t,e,r,l),t.flags|=262144}function Qr(e){for(e=e.firstContext;e!==null;){if(!Ya(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function jr(e){Kr=e,wo=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function en(e){return Zu(Kr,e)}function Ln(e,t){return Kr===null&&jr(e),Zu(e,t)}function Zu(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},wo===null){if(e===null)throw Error(s(308));wo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wo=wo.next=t;return r}var Ec=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},Md=o.unstable_scheduleCallback,Bd=o.unstable_NormalPriority,Ia={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jl(){return{controller:new Ec,data:new Map,refCount:0}}function Ls(e){e.refCount--,e.refCount===0&&Md(Bd,function(){e.controller.abort()})}var Ql=null,Jc=0,h=0,x=null;function j(e,t){if(Ql===null){var r=Ql=[];Jc=0,h=Kh(),x={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Jc++,t.then(z,z),t}function z(){if(--Jc===0&&Ql!==null){x!==null&&(x.status="fulfilled");var e=Ql;Ql=null,h=0,x=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Y(e,t){var r=[],l={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var p=0;p<r.length;p++)(0,r[p])(t)},function(p){for(l.status="rejected",l.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),l}var Q=te.S;te.S=function(e,t){j0=Un(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&j(e,t),Q!==null&&Q(e,t)};var K=U(null);function le(){var e=K.current;return e!==null?e:qa.pooledCache}function ce(e,t){t===null?E(K,K.current):E(K,t.pool)}function be(){var e=le();return e===null?null:{parent:Ia._currentValue,pool:e}}var Pe=Error(s(460)),Ge=Error(s(474)),ge=Error(s(542)),Re={then:function(){}};function Fe(e){return e=e.status,e==="fulfilled"||e==="rejected"}function it(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(vi,vi),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Tt(e),e;default:if(typeof t.status=="string")t.then(vi,vi);else{if(e=qa,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var p=t;p.status="fulfilled",p.value=l}},function(l){if(t.status==="pending"){var p=t;p.status="rejected",p.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Tt(e),e}throw tt=t,Pe}}function $e(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(tt=r,Pe):r}}var tt=null;function st(){if(tt===null)throw Error(s(459));var e=tt;return tt=null,e}function Tt(e){if(e===Pe||e===ge)throw Error(s(483))}var xt=null,Gt=0;function Et(e){var t=Gt;return Gt+=1,xt===null&&(xt=[]),it(xt,e,t)}function kn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function qt(e,t){throw t.$$typeof===q?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function $n(e){function t(qe,Be){if(e){var Xe=qe.deletions;Xe===null?(qe.deletions=[Be],qe.flags|=16):Xe.push(Be)}}function r(qe,Be){if(!e)return null;for(;Be!==null;)t(qe,Be),Be=Be.sibling;return null}function l(qe){for(var Be=new Map;qe!==null;)qe.key!==null?Be.set(qe.key,qe):Be.set(qe.index,qe),qe=qe.sibling;return Be}function p(qe,Be){return qe=mr(qe,Be),qe.index=0,qe.sibling=null,qe}function m(qe,Be,Xe){return qe.index=Xe,e?(Xe=qe.alternate,Xe!==null?(Xe=Xe.index,Xe<Be?(qe.flags|=67108866,Be):Xe):(qe.flags|=67108866,Be)):(qe.flags|=1048576,Be)}function P(qe){return e&&qe.alternate===null&&(qe.flags|=67108866),qe}function oe(qe,Be,Xe,gt){return Be===null||Be.tag!==6?(Be=Pr(Xe,qe.mode,gt),Be.return=qe,Be):(Be=p(Be,Xe),Be.return=qe,Be)}function ze(qe,Be,Xe,gt){var zn=Xe.type;return zn===X?ut(qe,Be,Xe.props.children,gt,Xe.key):Be!==null&&(Be.elementType===zn||typeof zn=="object"&&zn!==null&&zn.$$typeof===F&&$e(zn)===Be.type)?(Be=p(Be,Xe.props),kn(Be,Xe),Be.return=qe,Be):(Be=Ys(Xe.type,Xe.key,Xe.props,null,qe.mode,gt),kn(Be,Xe),Be.return=qe,Be)}function Ke(qe,Be,Xe,gt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Xe.containerInfo||Be.stateNode.implementation!==Xe.implementation?(Be=dl(Xe,qe.mode,gt),Be.return=qe,Be):(Be=p(Be,Xe.children||[]),Be.return=qe,Be)}function ut(qe,Be,Xe,gt,zn){return Be===null||Be.tag!==7?(Be=ul(Xe,qe.mode,gt,zn),Be.return=qe,Be):(Be=p(Be,Xe),Be.return=qe,Be)}function yt(qe,Be,Xe){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Be=Pr(""+Be,qe.mode,Xe),Be.return=qe,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case T:return Xe=Ys(Be.type,Be.key,Be.props,null,qe.mode,Xe),kn(Xe,Be),Xe.return=qe,Xe;case V:return Be=dl(Be,qe.mode,Xe),Be.return=qe,Be;case F:return Be=$e(Be),yt(qe,Be,Xe)}if(fe(Be)||C(Be))return Be=ul(Be,qe.mode,Xe,null),Be.return=qe,Be;if(typeof Be.then=="function")return yt(qe,Et(Be),Xe);if(Be.$$typeof===se)return yt(qe,Ln(qe,Be),Xe);qt(qe,Be)}return null}function Je(qe,Be,Xe,gt){var zn=Be!==null?Be.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return zn!==null?null:oe(qe,Be,""+Xe,gt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case T:return Xe.key===zn?ze(qe,Be,Xe,gt):null;case V:return Xe.key===zn?Ke(qe,Be,Xe,gt):null;case F:return Xe=$e(Xe),Je(qe,Be,Xe,gt)}if(fe(Xe)||C(Xe))return zn!==null?null:ut(qe,Be,Xe,gt,null);if(typeof Xe.then=="function")return Je(qe,Be,Et(Xe),gt);if(Xe.$$typeof===se)return Je(qe,Be,Ln(qe,Xe),gt);qt(qe,Xe)}return null}function et(qe,Be,Xe,gt,zn){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return qe=qe.get(Xe)||null,oe(Be,qe,""+gt,zn);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case T:return qe=qe.get(gt.key===null?Xe:gt.key)||null,ze(Be,qe,gt,zn);case V:return qe=qe.get(gt.key===null?Xe:gt.key)||null,Ke(Be,qe,gt,zn);case F:return gt=$e(gt),et(qe,Be,Xe,gt,zn)}if(fe(gt)||C(gt))return qe=qe.get(Xe)||null,ut(Be,qe,gt,zn,null);if(typeof gt.then=="function")return et(qe,Be,Xe,Et(gt),zn);if(gt.$$typeof===se)return et(qe,Be,Xe,Ln(Be,gt),zn);qt(Be,gt)}return null}function un(qe,Be,Xe,gt){for(var zn=null,ra=null,gn=Be,yi=Be=0,Ri=null;gn!==null&&yi<Xe.length;yi++){gn.index>yi?(Ri=gn,gn=null):Ri=gn.sibling;var sa=Je(qe,gn,Xe[yi],gt);if(sa===null){gn===null&&(gn=Ri);break}e&&gn&&sa.alternate===null&&t(qe,gn),Be=m(sa,Be,yi),ra===null?zn=sa:ra.sibling=sa,ra=sa,gn=Ri}if(yi===Xe.length)return r(qe,gn),Hn&&vr(qe,yi),zn;if(gn===null){for(;yi<Xe.length;yi++)gn=yt(qe,Xe[yi],gt),gn!==null&&(Be=m(gn,Be,yi),ra===null?zn=gn:ra.sibling=gn,ra=gn);return Hn&&vr(qe,yi),zn}for(gn=l(gn);yi<Xe.length;yi++)Ri=et(gn,qe,yi,Xe[yi],gt),Ri!==null&&(e&&Ri.alternate!==null&&gn.delete(Ri.key===null?yi:Ri.key),Be=m(Ri,Be,yi),ra===null?zn=Ri:ra.sibling=Ri,ra=Ri);return e&&gn.forEach(function(yu){return t(qe,yu)}),Hn&&vr(qe,yi),zn}function En(qe,Be,Xe,gt){if(Xe==null)throw Error(s(151));for(var zn=null,ra=null,gn=Be,yi=Be=0,Ri=null,sa=Xe.next();gn!==null&&!sa.done;yi++,sa=Xe.next()){gn.index>yi?(Ri=gn,gn=null):Ri=gn.sibling;var yu=Je(qe,gn,sa.value,gt);if(yu===null){gn===null&&(gn=Ri);break}e&&gn&&yu.alternate===null&&t(qe,gn),Be=m(yu,Be,yi),ra===null?zn=yu:ra.sibling=yu,ra=yu,gn=Ri}if(sa.done)return r(qe,gn),Hn&&vr(qe,yi),zn;if(gn===null){for(;!sa.done;yi++,sa=Xe.next())sa=yt(qe,sa.value,gt),sa!==null&&(Be=m(sa,Be,yi),ra===null?zn=sa:ra.sibling=sa,ra=sa);return Hn&&vr(qe,yi),zn}for(gn=l(gn);!sa.done;yi++,sa=Xe.next())sa=et(gn,qe,yi,sa.value,gt),sa!==null&&(e&&sa.alternate!==null&&gn.delete(sa.key===null?yi:sa.key),Be=m(sa,Be,yi),ra===null?zn=sa:ra.sibling=sa,ra=sa);return e&&gn.forEach(function(ny){return t(qe,ny)}),Hn&&vr(qe,yi),zn}function Ra(qe,Be,Xe,gt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===X&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case T:e:{for(var zn=Xe.key;Be!==null;){if(Be.key===zn){if(zn=Xe.type,zn===X){if(Be.tag===7){r(qe,Be.sibling),gt=p(Be,Xe.props.children),gt.return=qe,qe=gt;break e}}else if(Be.elementType===zn||typeof zn=="object"&&zn!==null&&zn.$$typeof===F&&$e(zn)===Be.type){r(qe,Be.sibling),gt=p(Be,Xe.props),kn(gt,Xe),gt.return=qe,qe=gt;break e}r(qe,Be);break}else t(qe,Be);Be=Be.sibling}Xe.type===X?(gt=ul(Xe.props.children,qe.mode,gt,Xe.key),gt.return=qe,qe=gt):(gt=Ys(Xe.type,Xe.key,Xe.props,null,qe.mode,gt),kn(gt,Xe),gt.return=qe,qe=gt)}return P(qe);case V:e:{for(zn=Xe.key;Be!==null;){if(Be.key===zn)if(Be.tag===4&&Be.stateNode.containerInfo===Xe.containerInfo&&Be.stateNode.implementation===Xe.implementation){r(qe,Be.sibling),gt=p(Be,Xe.children||[]),gt.return=qe,qe=gt;break e}else{r(qe,Be);break}else t(qe,Be);Be=Be.sibling}gt=dl(Xe,qe.mode,gt),gt.return=qe,qe=gt}return P(qe);case F:return Xe=$e(Xe),Ra(qe,Be,Xe,gt)}if(fe(Xe))return un(qe,Be,Xe,gt);if(C(Xe)){if(zn=C(Xe),typeof zn!="function")throw Error(s(150));return Xe=zn.call(Xe),En(qe,Be,Xe,gt)}if(typeof Xe.then=="function")return Ra(qe,Be,Et(Xe),gt);if(Xe.$$typeof===se)return Ra(qe,Be,Ln(qe,Xe),gt);qt(qe,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint"?(Xe=""+Xe,Be!==null&&Be.tag===6?(r(qe,Be.sibling),gt=p(Be,Xe),gt.return=qe,qe=gt):(r(qe,Be),gt=Pr(Xe,qe.mode,gt),gt.return=qe,qe=gt),P(qe)):r(qe,Be)}return function(qe,Be,Xe,gt){try{Gt=0;var zn=Ra(qe,Be,Xe,gt);return xt=null,zn}catch(gn){if(gn===Pe||gn===ge)throw gn;var ra=io(29,gn,null,qe.mode);return ra.lanes=gt,ra.return=qe,ra}finally{}}}var Ji=$n(!0),qn=$n(!1),Bt=!1;function Pt(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ja(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Nn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wn(e,t,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ga&2)!==0){var p=l.pending;return p===null?t.next=t:(t.next=p.next,p.next=t),l.pending=t,t=Xa(e),yc(e,null,r),t}return Cl(e,l,t,r),Xa(e)}function $i(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,Go(e,r)}}function ao(e,t){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var p=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var P={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?p=m=P:m=m.next=P,r=r.next}while(r!==null);m===null?p=m=t:m=m.next=t}else p=m=t;r={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var _a=!1;function Ii(){if(_a){var e=x;if(e!==null)throw e}}function Ua(e,t,r,l){_a=!1;var p=e.updateQueue;Bt=!1;var m=p.firstBaseUpdate,P=p.lastBaseUpdate,oe=p.shared.pending;if(oe!==null){p.shared.pending=null;var ze=oe,Ke=ze.next;ze.next=null,P===null?m=Ke:P.next=Ke,P=ze;var ut=e.alternate;ut!==null&&(ut=ut.updateQueue,oe=ut.lastBaseUpdate,oe!==P&&(oe===null?ut.firstBaseUpdate=Ke:oe.next=Ke,ut.lastBaseUpdate=ze))}if(m!==null){var yt=p.baseState;P=0,ut=Ke=ze=null,oe=m;do{var Je=oe.lane&-536870913,et=Je!==oe.lane;if(et?(Pi&Je)===Je:(l&Je)===Je){Je!==0&&Je===h&&(_a=!0),ut!==null&&(ut=ut.next={lane:0,tag:oe.tag,payload:oe.payload,callback:null,next:null});e:{var un=e,En=oe;Je=t;var Ra=r;switch(En.tag){case 1:if(un=En.payload,typeof un=="function"){yt=un.call(Ra,yt,Je);break e}yt=un;break e;case 3:un.flags=un.flags&-65537|128;case 0:if(un=En.payload,Je=typeof un=="function"?un.call(Ra,yt,Je):un,Je==null)break e;yt=R({},yt,Je);break e;case 2:Bt=!0}}Je=oe.callback,Je!==null&&(e.flags|=64,et&&(e.flags|=8192),et=p.callbacks,et===null?p.callbacks=[Je]:et.push(Je))}else et={lane:Je,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},ut===null?(Ke=ut=et,ze=yt):ut=ut.next=et,P|=Je;if(oe=oe.next,oe===null){if(oe=p.shared.pending,oe===null)break;et=oe,oe=et.next,et.next=null,p.lastBaseUpdate=et,p.shared.pending=null}}while(!0);ut===null&&(ze=yt),p.baseState=ze,p.firstBaseUpdate=Ke,p.lastBaseUpdate=ut,m===null&&(p.shared.lanes=0),su|=P,e.lanes=P,e.memoizedState=yt}}function Do(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function oo(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Do(r[e],t)}var Kn=U(null),Ci=U(0);function ha(e,t){e=Wc,E(Ci,e),E(Kn,t),Wc=e|t.baseLanes}function bi(){E(Ci,Wc),E(Kn,Kn.current)}function ro(){Wc=Ci.current,A(Kn),A(Ci)}var ma=U(null),gi=null;function Ta(e){var t=e.alternate;E(Ai,Ai.current&1),E(ma,e),gi===null&&(t===null||Kn.current!==null||t.memoizedState!==null)&&(gi=e)}function Ui(e){E(Ai,Ai.current),E(ma,e),gi===null&&(gi=e)}function Za(e){e.tag===22?(E(Ai,Ai.current),E(ma,e),gi===null&&(gi=e)):Fa()}function Fa(){E(Ai,Ai.current),E(ma,ma.current)}function Qi(e){A(ma),gi===e&&(gi=null),A(Ai)}var Ai=U(0);function Mo(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||cp(r)||up(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ka=0,pn=null,an=null,Jn=null,Ja=!1,fs=!1,Tr=!1,ho=0,Al=0,kl=null,Qc=0;function ea(){throw Error(s(321))}function ju(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ya(e[r],t[r]))return!1;return!0}function Tu(e,t,r,l,p,m){return Ka=m,pn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,te.H=e===null||e.memoizedState===null?Rl:Ac,Tr=!1,m=r(l,p),Tr=!1,fs&&(m=pl(t,r,l,p)),Ps(e),m}function Ps(e){te.H=Cc;var t=an!==null&&an.next!==null;if(Ka=0,Jn=an=pn=null,Ja=!1,Al=0,kl=null,t)throw Error(s(300));e===null||So||(e=e.dependencies,e!==null&&Qr(e)&&(So=!0))}function pl(e,t,r,l){pn=e;var p=0;do{if(fs&&(kl=null),Al=0,fs=!1,25<=p)throw Error(s(301));if(p+=1,Jn=an=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}te.H=id,m=t(r,l)}while(fs);return m}function Ed(){var e=te.H,t=e.useState()[0];return t=typeof t.then=="function"?Nl(t):t,e=e.useState()[0],(an!==null?an.memoizedState:null)!==e&&(pn.flags|=1024),t}function Cu(){var e=ho!==0;return ho=0,e}function Au(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function eu(e){if(Ja){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ja=!1}Ka=0,Jn=an=pn=null,fs=!1,Al=ho=0,kl=null}function Bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?pn.memoizedState=Jn=e:Jn=Jn.next=e,Jn}function Qa(){if(an===null){var e=pn.alternate;e=e!==null?e.memoizedState:null}else e=an.next;var t=Jn===null?pn.memoizedState:Jn.next;if(t!==null)Jn=t,an=e;else{if(e===null)throw pn.alternate===null?Error(s(467)):Error(s(310));an=e,e={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Jn===null?pn.memoizedState=Jn=e:Jn=Jn.next=e}return Jn}function Oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(e){var t=Al;return Al+=1,kl===null&&(kl=[]),e=it(kl,e,t),t=pn,(Jn===null?t.memoizedState:Jn.next)===null&&(t=t.alternate,te.H=t===null||t.memoizedState===null?Rl:Ac),e}function mc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Nl(e);if(e.$$typeof===se)return en(e)}throw Error(s(438,String(e)))}function ec(e){var t=null,r=pn.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var l=pn.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(p){return p.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=Oc(),pn.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),l=0;l<e;l++)r[l]=he;return t.index++,r}function Mr(e,t){return typeof t=="function"?t(e):t}function Zs(e){var t=Qa();return Rs(t,an,e)}function Rs(e,t,r){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var p=e.baseQueue,m=l.pending;if(m!==null){if(p!==null){var P=p.next;p.next=m.next,m.next=P}t.baseQueue=p=m,l.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{t=p.next;var oe=P=null,ze=null,Ke=t,ut=!1;do{var yt=Ke.lane&-536870913;if(yt!==Ke.lane?(Pi&yt)===yt:(Ka&yt)===yt){var Je=Ke.revertLane;if(Je===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),yt===h&&(ut=!0);else if((Ka&Je)===Je){Ke=Ke.next,Je===h&&(ut=!0);continue}else yt={lane:0,revertLane:Ke.revertLane,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},ze===null?(oe=ze=yt,P=m):ze=ze.next=yt,pn.lanes|=Je,su|=Je;yt=Ke.action,Tr&&r(m,yt),m=Ke.hasEagerState?Ke.eagerState:r(m,yt)}else Je={lane:yt,revertLane:Ke.revertLane,gesture:Ke.gesture,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},ze===null?(oe=ze=Je,P=m):ze=ze.next=Je,pn.lanes|=yt,su|=yt;Ke=Ke.next}while(Ke!==null&&Ke!==t);if(ze===null?P=m:ze.next=oe,!Ya(m,e.memoizedState)&&(So=!0,ut&&(r=x,r!==null)))throw r;e.memoizedState=m,e.baseState=P,e.baseQueue=ze,l.lastRenderedState=m}return p===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function tc(e){var t=Qa(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var l=r.dispatch,p=r.pending,m=t.memoizedState;if(p!==null){r.pending=null;var P=p=p.next;do m=e(m,P.action),P=P.next;while(P!==p);Ya(m,t.memoizedState)||(So=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),r.lastRenderedState=m}return[m,l]}function gl(e,t,r){var l=pn,p=Qa(),m=Hn;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=t();var P=!Ya((an||p).memoizedState,r);if(P&&(p.memoizedState=r,So=!0),p=p.queue,Ku(nc.bind(null,l,p,e),[e]),p.getSnapshot!==t||P||Jn!==null&&Jn.memoizedState.tag&1){if(l.flags|=2048,tl(9,{destroy:void 0},zl.bind(null,l,p,r,t),null),qa===null)throw Error(s(349));m||(Ka&127)!==0||Ds(l,t,r)}return r}function Ds(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pn.updateQueue,t===null?(t=Oc(),pn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function zl(e,t,r,l){t.value=r,t.getSnapshot=l,bc(t)&&vc(e)}function nc(e,t,r){return r(function(){bc(t)&&vc(e)})}function bc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ya(e,r)}catch{return!0}}function vc(e){var t=Yr(e,2);t!==null&&il(t,e,2)}function Ms(e){var t=Bo();if(typeof e=="function"){var r=e;if(e=r(),Tr){yn(!0);try{r()}finally{yn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:e},t}function Ic(e,t,r,l){return e.baseState=r,Rs(e,an,typeof l=="function"?l:Mr)}function Ks(e,t,r,l,p){if(jc(e))throw Error(s(485));if(e=t.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){m.listeners.push(P)}};te.T!==null?r(!0):m.isTransition=!1,l(m),r=t.pending,r===null?(m.next=t.pending=m,wc(t,m)):(m.next=r.next,t.pending=r.next=m)}}function wc(e,t){var r=t.action,l=t.payload,p=e.state;if(t.isTransition){var m=te.T,P={};te.T=P;try{var oe=r(p,l),ze=te.S;ze!==null&&ze(P,oe),xl(e,t,oe)}catch(Ke){Js(e,t,Ke)}finally{m!==null&&P.types!==null&&(m.types=P.types),te.T=m}}else try{m=r(p,l),xl(e,t,m)}catch(Ke){Js(e,t,Ke)}}function xl(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){es(e,t,l)},function(l){return Js(e,t,l)}):es(e,t,r)}function es(e,t,r){t.status="fulfilled",t.value=r,Sc(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,wc(e,r)))}function Js(e,t,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=r,Sc(t),t=t.next;while(t!==l)}e.action=null}function Sc(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Uc(e,t){return t}function Qs(e,t){if(Hn){var r=qa.formState;if(r!==null){e:{var l=pn;if(Hn){if(Wi){t:{for(var p=Wi,m=Zi;p.nodeType!==8;){if(!m){p=null;break t}if(p=El(p.nextSibling),p===null){p=null;break t}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){Wi=El(p.nextSibling),l=p.data==="F!";break e}}wr(l)}l=!1}l&&(t=r[0])}}return r=Bo(),r.memoizedState=r.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uc,lastRenderedState:t},r.queue=l,r=Bf.bind(null,pn,l),l.dispatch=r,l=Ms(!1),m=td.bind(null,pn,!1,l.queue),l=Bo(),p={state:t,dispatch:null,action:e,pending:null},l.queue=p,r=Ks.bind(null,pn,p,m,r),p.dispatch=r,l.memoizedState=e,[t,r,!1]}function el(e){var t=Qa();return Cr(t,an,e)}function Cr(e,t,r){if(t=Rs(e,t,Uc)[0],e=Zs(Mr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Nl(t)}catch(P){throw P===Pe?ge:P}else l=t;t=Qa();var p=t.queue,m=p.dispatch;return r!==t.memoizedState&&(pn.flags|=2048,tl(9,{destroy:void 0},ic.bind(null,p,r),null)),[l,m,e]}function ic(e,t){e.action=t}function ac(e){var t=Qa(),r=an;if(r!==null)return Cr(t,r,e);Qa(),t=t.memoizedState,r=Qa();var l=r.queue.dispatch;return r.memoizedState=e,[t,l,!1]}function tl(e,t,r,l){return e={tag:e,create:r,deps:l,inst:t,next:null},t=pn.updateQueue,t===null&&(t=Oc(),pn.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,t.lastEffect=e),e}function tu(){return Qa().memoizedState}function _l(e,t,r,l){var p=Bo();pn.flags|=e,p.memoizedState=tl(1|t,{destroy:void 0},r,l===void 0?null:l)}function Ll(e,t,r,l){var p=Qa();l=l===void 0?null:l;var m=p.memoizedState.inst;an!==null&&l!==null&&ju(l,an.memoizedState.deps)?p.memoizedState=tl(t,m,r,l):(pn.flags|=e,p.memoizedState=tl(1|t,m,r,l))}function Pf(e,t){_l(8390656,8,e,t)}function Ku(e,t){Ll(2048,8,e,t)}function Pl(e){pn.flags|=4;var t=pn.updateQueue;if(t===null)t=Oc(),pn.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function Od(e){var t=Qa().memoizedState;return Pl({ref:t,nextImpl:e}),function(){if((ga&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Fc(e,t){return Ll(4,2,e,t)}function Id(e,t){return Ll(4,4,e,t)}function oc(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ju(e,t,r){r=r!=null?r.concat([e]):null,Ll(4,4,oc.bind(null,t,e),r)}function Qu(){}function Ud(e,t){var r=Qa();t=t===void 0?null:t;var l=r.memoizedState;return t!==null&&ju(t,l[1])?l[0]:(r.memoizedState=[e,t],e)}function Rf(e,t){var r=Qa();t=t===void 0?null:t;var l=r.memoizedState;if(t!==null&&ju(t,l[1]))return l[0];if(l=e(),Tr){yn(!0);try{e()}finally{yn(!1)}}return r.memoizedState=[l,t],l}function Fd(e,t,r){return r===void 0||(Ka&1073741824)!==0&&(Pi&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=C0(),pn.lanes|=e,su|=e,r)}function Df(e,t,r,l){return Ya(r,t)?r:Kn.current!==null?(e=Fd(e,r,l),Ya(e,t)||(So=!0),e):(Ka&42)===0||(Ka&1073741824)!==0&&(Pi&261930)===0?(So=!0,e.memoizedState=r):(e=C0(),pn.lanes|=e,su|=e,t)}function ku(e,t,r,l,p){var m=ne.p;ne.p=m!==0&&8>m?m:8;var P=te.T,oe={};te.T=oe,td(e,!1,t,r);try{var ze=p(),Ke=te.S;if(Ke!==null&&Ke(oe,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var ut=Y(ze,l);Nu(e,t,ut,wl(e))}else Nu(e,t,l,wl(e))}catch(yt){Nu(e,t,{then:function(){},status:"rejected",reason:yt},wl())}finally{ne.p=m,P!==null&&oe.types!==null&&(P.types=oe.types),te.T=P}}function Mf(){}function Hd(e,t,r,l){if(e.tag!==5)throw Error(s(476));var p=qd(e).queue;ku(e,p,t,pe,r===null?Mf:function(){return nu(e),r(l)})}function qd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:pe},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function nu(e){var t=qd(e);t.next===null&&(t=e.alternate.memoizedState),Nu(e,t.next.queue,{},wl())}function Wd(){return en(hf)}function ed(){return Qa().memoizedState}function Vd(){return Qa().memoizedState}function $d(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=wl();e=Nn(r);var l=Wn(t,e,r);l!==null&&(il(l,t,r),$i(l,t,r)),t={cache:Jl()},e.payload=t;return}t=t.return}}function Yd(e,t,r){var l=wl();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},jc(e)?nd(t,r):(r=Xl(e,t,r,l),r!==null&&(il(r,e,l),Tc(r,t,l)))}function Bf(e,t,r){var l=wl();Nu(e,t,r,l)}function Nu(e,t,r,l){var p={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(jc(e))nd(t,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var P=t.lastRenderedState,oe=m(P,r);if(p.hasEagerState=!0,p.eagerState=oe,Ya(oe,P))return Cl(e,t,p,0),qa===null&&Gl(),!1}catch{}finally{}if(r=Xl(e,t,p,l),r!==null)return il(r,e,l),Tc(r,t,l),!0}return!1}function td(e,t,r,l){if(l={lane:2,revertLane:Kh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},jc(e)){if(t)throw Error(s(479))}else t=Xl(e,r,l,2),t!==null&&il(t,e,2)}function jc(e){var t=e.alternate;return e===pn||t!==null&&t===pn}function nd(e,t){fs=Ja=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Tc(e,t,r){if((r&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,Go(e,r)}}var Cc={readContext:en,use:mc,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useLayoutEffect:ea,useInsertionEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useSyncExternalStore:ea,useId:ea,useHostTransitionStatus:ea,useFormState:ea,useActionState:ea,useOptimistic:ea,useMemoCache:ea,useCacheRefresh:ea};Cc.useEffectEvent=ea;var Rl={readContext:en,use:mc,useCallback:function(e,t){return Bo().memoizedState=[e,t===void 0?null:t],e},useContext:en,useEffect:Pf,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,_l(4194308,4,oc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _l(4194308,4,e,t)},useInsertionEffect:function(e,t){_l(4,2,e,t)},useMemo:function(e,t){var r=Bo();t=t===void 0?null:t;var l=e();if(Tr){yn(!0);try{e()}finally{yn(!1)}}return r.memoizedState=[l,t],l},useReducer:function(e,t,r){var l=Bo();if(r!==void 0){var p=r(t);if(Tr){yn(!0);try{r(t)}finally{yn(!1)}}}else p=t;return l.memoizedState=l.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},l.queue=e,e=e.dispatch=Yd.bind(null,pn,e),[l.memoizedState,e]},useRef:function(e){var t=Bo();return e={current:e},t.memoizedState=e},useState:function(e){e=Ms(e);var t=e.queue,r=Bf.bind(null,pn,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Qu,useDeferredValue:function(e,t){var r=Bo();return Fd(r,e,t)},useTransition:function(){var e=Ms(!1);return e=ku.bind(null,pn,e.queue,!0,!1),Bo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var l=pn,p=Bo();if(Hn){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),qa===null)throw Error(s(349));(Pi&127)!==0||Ds(l,t,r)}p.memoizedState=r;var m={value:r,getSnapshot:t};return p.queue=m,Pf(nc.bind(null,l,m,e),[e]),l.flags|=2048,tl(9,{destroy:void 0},zl.bind(null,l,m,r,t),null),r},useId:function(){var e=Bo(),t=qa.identifierPrefix;if(Hn){var r=br,l=ds;r=(l&~(1<<32-nt(l)-1)).toString(32)+r,t="_"+t+"R_"+r,r=ho++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=Qc++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Wd,useFormState:Qs,useActionState:Qs,useOptimistic:function(e){var t=Bo();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=td.bind(null,pn,!0,r),r.dispatch=t,[e,t]},useMemoCache:ec,useCacheRefresh:function(){return Bo().memoizedState=$d.bind(null,pn)},useEffectEvent:function(e){var t=Bo(),r={impl:e};return t.memoizedState=r,function(){if((ga&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Ac={readContext:en,use:mc,useCallback:Ud,useContext:en,useEffect:Ku,useImperativeHandle:Ju,useInsertionEffect:Fc,useLayoutEffect:Id,useMemo:Rf,useReducer:Zs,useRef:tu,useState:function(){return Zs(Mr)},useDebugValue:Qu,useDeferredValue:function(e,t){var r=Qa();return Df(r,an.memoizedState,e,t)},useTransition:function(){var e=Zs(Mr)[0],t=Qa().memoizedState;return[typeof e=="boolean"?e:Nl(e),t]},useSyncExternalStore:gl,useId:ed,useHostTransitionStatus:Wd,useFormState:el,useActionState:el,useOptimistic:function(e,t){var r=Qa();return Ic(r,an,e,t)},useMemoCache:ec,useCacheRefresh:Vd};Ac.useEffectEvent=Od;var id={readContext:en,use:mc,useCallback:Ud,useContext:en,useEffect:Ku,useImperativeHandle:Ju,useInsertionEffect:Fc,useLayoutEffect:Id,useMemo:Rf,useReducer:tc,useRef:tu,useState:function(){return tc(Mr)},useDebugValue:Qu,useDeferredValue:function(e,t){var r=Qa();return an===null?Fd(r,e,t):Df(r,an.memoizedState,e,t)},useTransition:function(){var e=tc(Mr)[0],t=Qa().memoizedState;return[typeof e=="boolean"?e:Nl(e),t]},useSyncExternalStore:gl,useId:ed,useHostTransitionStatus:Wd,useFormState:ac,useActionState:ac,useOptimistic:function(e,t){var r=Qa();return an!==null?Ic(r,an,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:ec,useCacheRefresh:Vd};id.useEffectEvent=Od;function zu(e,t,r,l){t=e.memoizedState,r=r(l,t),r=r==null?t:R({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _u={enqueueSetState:function(e,t,r){e=e._reactInternals;var l=wl(),p=Nn(l);p.payload=t,r!=null&&(p.callback=r),t=Wn(e,p,l),t!==null&&(il(t,e,l),$i(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var l=wl(),p=Nn(l);p.tag=1,p.payload=t,r!=null&&(p.callback=r),t=Wn(e,p,l),t!==null&&(il(t,e,l),$i(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=wl(),l=Nn(r);l.tag=2,t!=null&&(l.callback=t),t=Wn(e,l,r),t!==null&&(il(t,e,r),$i(t,e,r))}};function Br(e,t,r,l,p,m,P){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,P):t.prototype&&t.prototype.isPureReactComponent?!rs(r,l)||!rs(p,m):!0}function Gd(e,t,r,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,l),t.state!==e&&_u.enqueueReplaceState(t,t.state,null)}function Hc(e,t){var r=t;if("ref"in t){r={};for(var l in t)l!=="ref"&&(r[l]=t[l])}if(e=e.defaultProps){r===t&&(r=R({},r));for(var p in e)r[p]===void 0&&(r[p]=e[p])}return r}function Xd(e){Lo(e)}function Ef(e){console.error(e)}function Zd(e){Lo(e)}function Lu(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Pu(e,t,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function yl(e,t,r){return r=Nn(r),r.tag=3,r.payload={element:null},r.callback=function(){Lu(e,t)},r}function Kd(e){return e=Nn(e),e.tag=3,e}function rc(e,t,r,l){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var m=l.value;e.payload=function(){return p(m)},e.callback=function(){Pu(t,r,l)}}var P=r.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(e.callback=function(){Pu(t,r,l),typeof p!="function"&&(lu===null?lu=new Set([this]):lu.add(this));var oe=l.stack;this.componentDidCatch(l.value,{componentStack:oe!==null?oe:""})})}function Dl(e,t,r,l,p){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=r.alternate,t!==null&&or(t,r,p,!0),r=ma.current,r!==null){switch(r.tag){case 31:case 13:return gi===null?Gf():r.alternate===null&&Eo===0&&(Eo=3),r.flags&=-257,r.flags|=65536,r.lanes=p,l===Re?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([l]):t.add(l),Gh(e,l,p)),!1;case 22:return r.flags|=65536,l===Re?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([l]):r.add(l)),Gh(e,l,p)),!1}throw Error(s(435,r.tag))}return Gh(e,l,p),Gf(),!1}if(Hn)return t=ma.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=p,l!==za&&(e=Error(s(422),{cause:l}),Xr(nr(e,r)))):(l!==za&&(t=Error(s(423),{cause:l}),Xr(nr(t,r))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,l=nr(l,r),p=yl(e.stateNode,l,p),ao(e,p),Eo!==4&&(Eo=2)),!1;var m=Error(s(520),{cause:l});if(m=nr(m,r),of===null?of=[m]:of.push(m),Eo!==4&&(Eo=2),t===null)return!0;l=nr(l,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=p&-p,r.lanes|=e,e=yl(r.stateNode,l,e),ao(r,e),!1;case 1:if(t=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(lu===null||!lu.has(m))))return r.flags|=65536,p&=-p,r.lanes|=p,p=Kd(p),rc(p,e,r,l),ao(r,p),!1}r=r.return}while(r!==null);return!1}var ad=Error(s(461)),So=!1;function aa(e,t,r,l){t.child=e===null?qn(t,null,r,l):Ji(t,e.child,r,l)}function qc(e,t,r,l,p){r=r.render;var m=t.ref;if("ref"in l){var P={};for(var oe in l)oe!=="ref"&&(P[oe]=l[oe])}else P=l;return jr(t),l=Tu(e,t,r,P,m,p),oe=Cu(),e!==null&&!So?(Au(e,t,p),hs(e,t,p)):(Hn&&oe&&Kc(t),t.flags|=1,aa(e,t,l,p),t.child)}function kc(e,t,r,l,p){if(e===null){var m=r.type;return typeof m=="function"&&!Zl(m)&&m.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=m,Ru(e,t,m,l,p)):(e=Ys(r.type,null,l,t,t.mode,p),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!ou(e,p)){var P=m.memoizedProps;if(r=r.compare,r=r!==null?r:rs,r(P,l)&&e.ref===t.ref)return hs(e,t,p)}return t.flags|=1,e=mr(m,l),e.ref=t.ref,e.return=t,t.child=e}function Ru(e,t,r,l,p){if(e!==null){var m=e.memoizedProps;if(rs(m,l)&&e.ref===t.ref)if(So=!1,t.pendingProps=l=m,ou(e,p))(e.flags&131072)!==0&&(So=!0);else return t.lanes=e.lanes,hs(e,t,p)}return Qd(e,t,r,l,p)}function od(e,t,r,l){var p=l.children,m=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,e!==null){for(l=t.child=e.child,p=0;l!==null;)p=p|l.lanes|l.childLanes,l=l.sibling;l=p&~m}else l=0,t.child=null;return Jd(e,t,m,r,l)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ce(t,m!==null?m.cachePool:null),m!==null?ha(t,m):bi(),Za(t);else return l=t.lanes=536870912,Jd(e,t,m!==null?m.baseLanes|r:r,r,l)}else m!==null?(ce(t,m.cachePool),ha(t,m),Fa(),t.memoizedState=null):(e!==null&&ce(t,null),bi(),Fa());return aa(e,t,p,r),t.child}function sc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Jd(e,t,r,l,p){var m=le();return m=m===null?null:{parent:Ia._currentValue,pool:m},t.memoizedState={baseLanes:r,cachePool:m},e!==null&&ce(t,null),bi(),Za(t),e!==null&&or(e,t,l,!0),t.childLanes=p,null}function rd(e,t){return t=au({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Du(e,t,r){return Ji(t,e.child,null,r),e=rd(t,t.pendingProps),e.flags|=2,Qi(t),t.memoizedState=null,e}function sd(e,t,r){var l=t.pendingProps,p=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Hn){if(l.mode==="hidden")return e=rd(t,l),t.lanes=536870912,sc(null,e);if(Ui(t),(e=Wi)?(e=sg(e,Zi),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:hl!==null?{id:ds,overflow:br}:null,retryLane:536870912,hydrationErrors:null},r=Po(e),r.return=t,t.child=r,ya=t,Wi=null)):e=null,e===null)throw wr(t);return t.lanes=536870912,null}return rd(t,l)}var m=e.memoizedState;if(m!==null){var P=m.dehydrated;if(Ui(t),p)if(t.flags&256)t.flags&=-257,t=Du(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(So||or(e,t,r,!1),p=(r&e.childLanes)!==0,So||p){if(l=qa,l!==null&&(P=jt(l,r),P!==0&&P!==m.retryLane))throw m.retryLane=P,Yr(e,P),il(l,e,P),ad;Gf(),t=Du(e,t,r)}else e=m.treeContext,Wi=El(P.nextSibling),ya=t,Hn=!0,Vi=null,Zi=!1,e!==null&&Kl(t,e),t=rd(t,l),t.flags|=4096;return t}return e=mr(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ld(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Qd(e,t,r,l,p){return jr(t),r=Tu(e,t,r,l,void 0,p),l=Cu(),e!==null&&!So?(Au(e,t,p),hs(e,t,p)):(Hn&&l&&Kc(t),t.flags|=1,aa(e,t,r,p),t.child)}function cd(e,t,r,l,p,m){return jr(t),t.updateQueue=null,r=pl(t,l,r,p),Ps(e),l=Cu(),e!==null&&!So?(Au(e,t,m),hs(e,t,m)):(Hn&&l&&Kc(t),t.flags|=1,aa(e,t,r,m),t.child)}function iu(e,t,r,l,p){if(jr(t),t.stateNode===null){var m=no,P=r.contextType;typeof P=="object"&&P!==null&&(m=en(P)),m=new r(l,m),t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=_u,t.stateNode=m,m._reactInternals=t,m=t.stateNode,m.props=l,m.state=t.memoizedState,m.refs={},Pt(t),P=r.contextType,m.context=typeof P=="object"&&P!==null?en(P):no,m.state=t.memoizedState,P=r.getDerivedStateFromProps,typeof P=="function"&&(zu(t,r,P,l),m.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(P=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),P!==m.state&&_u.enqueueReplaceState(m,m.state,null),Ua(t,l,m,p),Ii(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){m=t.stateNode;var oe=t.memoizedProps,ze=Hc(r,oe);m.props=ze;var Ke=m.context,ut=r.contextType;P=no,typeof ut=="object"&&ut!==null&&(P=en(ut));var yt=r.getDerivedStateFromProps;ut=typeof yt=="function"||typeof m.getSnapshotBeforeUpdate=="function",oe=t.pendingProps!==oe,ut||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(oe||Ke!==P)&&Gd(t,m,l,P),Bt=!1;var Je=t.memoizedState;m.state=Je,Ua(t,l,m,p),Ii(),Ke=t.memoizedState,oe||Je!==Ke||Bt?(typeof yt=="function"&&(zu(t,r,yt,l),Ke=t.memoizedState),(ze=Bt||Br(t,r,ze,l,Je,Ke,P))?(ut||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Ke),m.props=l,m.state=Ke,m.context=P,l=ze):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{m=t.stateNode,ja(e,t),P=t.memoizedProps,ut=Hc(r,P),m.props=ut,yt=t.pendingProps,Je=m.context,Ke=r.contextType,ze=no,typeof Ke=="object"&&Ke!==null&&(ze=en(Ke)),oe=r.getDerivedStateFromProps,(Ke=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(P!==yt||Je!==ze)&&Gd(t,m,l,ze),Bt=!1,Je=t.memoizedState,m.state=Je,Ua(t,l,m,p),Ii();var et=t.memoizedState;P!==yt||Je!==et||Bt||e!==null&&e.dependencies!==null&&Qr(e.dependencies)?(typeof oe=="function"&&(zu(t,r,oe,l),et=t.memoizedState),(ut=Bt||Br(t,r,ut,l,Je,et,ze)||e!==null&&e.dependencies!==null&&Qr(e.dependencies))?(Ke||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,et,ze),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,et,ze)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||P===e.memoizedProps&&Je===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||P===e.memoizedProps&&Je===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=et),m.props=l,m.state=et,m.context=ze,l=ut):(typeof m.componentDidUpdate!="function"||P===e.memoizedProps&&Je===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||P===e.memoizedProps&&Je===e.memoizedState||(t.flags|=1024),l=!1)}return m=l,ld(e,t),l=(t.flags&128)!==0,m||l?(m=t.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:m.render(),t.flags|=1,e!==null&&l?(t.child=Ji(t,e.child,null,p),t.child=Ji(t,null,r,p)):aa(e,t,r,p),t.memoizedState=m.state,e=t.child):e=hs(e,t,p),e}function Of(e,t,r,l){return Rr(),t.flags|=256,aa(e,t,r,l),t.child}var ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mu(e){return{baseLanes:e,cachePool:be()}}function ef(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=vl),e}function If(e,t,r){var l=t.pendingProps,p=!1,m=(t.flags&128)!==0,P;if((P=m)||(P=e!==null&&e.memoizedState===null?!1:(Ai.current&2)!==0),P&&(p=!0,t.flags&=-129),P=(t.flags&32)!==0,t.flags&=-33,e===null){if(Hn){if(p?Ta(t):Fa(),(e=Wi)?(e=sg(e,Zi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:hl!==null?{id:ds,overflow:br}:null,retryLane:536870912,hydrationErrors:null},r=Po(e),r.return=t,t.child=r,ya=t,Wi=null)):e=null,e===null)throw wr(t);return up(e)?t.lanes=32:t.lanes=536870912,null}var oe=l.children;return l=l.fallback,p?(Fa(),p=t.mode,oe=au({mode:"hidden",children:oe},p),l=ul(l,p,r,null),oe.return=t,l.return=t,oe.sibling=l,t.child=oe,l=t.child,l.memoizedState=Mu(r),l.childLanes=ef(e,P,r),t.memoizedState=ud,sc(null,l)):(Ta(t),dd(t,oe))}var ze=e.memoizedState;if(ze!==null&&(oe=ze.dehydrated,oe!==null)){if(m)t.flags&256?(Ta(t),t.flags&=-257,t=Bu(e,t,r)):t.memoizedState!==null?(Fa(),t.child=e.child,t.flags|=128,t=null):(Fa(),oe=l.fallback,p=t.mode,l=au({mode:"visible",children:l.children},p),oe=ul(oe,p,r,null),oe.flags|=2,l.return=t,oe.return=t,l.sibling=oe,t.child=l,Ji(t,e.child,null,r),l=t.child,l.memoizedState=Mu(r),l.childLanes=ef(e,P,r),t.memoizedState=ud,t=sc(null,l));else if(Ta(t),up(oe)){if(P=oe.nextSibling&&oe.nextSibling.dataset,P)var Ke=P.dgst;P=Ke,l=Error(s(419)),l.stack="",l.digest=P,Xr({value:l,source:null,stack:null}),t=Bu(e,t,r)}else if(So||or(e,t,r,!1),P=(r&e.childLanes)!==0,So||P){if(P=qa,P!==null&&(l=jt(P,r),l!==0&&l!==ze.retryLane))throw ze.retryLane=l,Yr(e,l),il(P,e,l),ad;cp(oe)||Gf(),t=Bu(e,t,r)}else cp(oe)?(t.flags|=192,t.child=e.child,t=null):(e=ze.treeContext,Wi=El(oe.nextSibling),ya=t,Hn=!0,Vi=null,Zi=!1,e!==null&&Kl(t,e),t=dd(t,l.children),t.flags|=4096);return t}return p?(Fa(),oe=l.fallback,p=t.mode,ze=e.child,Ke=ze.sibling,l=mr(ze,{mode:"hidden",children:l.children}),l.subtreeFlags=ze.subtreeFlags&65011712,Ke!==null?oe=mr(Ke,oe):(oe=ul(oe,p,r,null),oe.flags|=2),oe.return=t,l.return=t,l.sibling=oe,t.child=l,sc(null,l),l=t.child,oe=e.child.memoizedState,oe===null?oe=Mu(r):(p=oe.cachePool,p!==null?(ze=Ia._currentValue,p=p.parent!==ze?{parent:ze,pool:ze}:p):p=be(),oe={baseLanes:oe.baseLanes|r,cachePool:p}),l.memoizedState=oe,l.childLanes=ef(e,P,r),t.memoizedState=ud,sc(e.child,l)):(Ta(t),r=e.child,e=r.sibling,r=mr(r,{mode:"visible",children:l.children}),r.return=t,r.sibling=null,e!==null&&(P=t.deletions,P===null?(t.deletions=[e],t.flags|=16):P.push(e)),t.child=r,t.memoizedState=null,r)}function dd(e,t){return t=au({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function au(e,t){return e=io(22,e,null,t),e.lanes=0,e}function Bu(e,t,r){return Ji(t,e.child,null,r),e=dd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Uf(e,t,r){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Dr(e.return,t,r)}function tf(e,t,r,l,p,m){var P=e.memoizedState;P===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:p,treeForkCount:m}:(P.isBackwards=t,P.rendering=null,P.renderingStartTime=0,P.last=l,P.tail=r,P.tailMode=p,P.treeForkCount=m)}function Nc(e,t,r){var l=t.pendingProps,p=l.revealOrder,m=l.tail;l=l.children;var P=Ai.current,oe=(P&2)!==0;if(oe?(P=P&1|2,t.flags|=128):P&=1,E(Ai,P),aa(e,t,l,r),l=Hn?Xs:0,!oe&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uf(e,r,t);else if(e.tag===19)Uf(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(r=t.child,p=null;r!==null;)e=r.alternate,e!==null&&Mo(e)===null&&(p=r),r=r.sibling;r=p,r===null?(p=t.child,t.child=null):(p=r.sibling,r.sibling=null),tf(t,!1,p,r,m,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=t.child,t.child=null;p!==null;){if(e=p.alternate,e!==null&&Mo(e)===null){t.child=p;break}e=p.sibling,p.sibling=r,r=p,p=e}tf(t,!0,r,null,m,l);break;case"together":tf(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function hs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),su|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(or(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=mr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=mr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ou(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Qr(e)))}function Oh(e,t,r){switch(t.tag){case 3:Le(t,t.stateNode.containerInfo),Jr(t,Ia,e.memoizedState.cache),Rr();break;case 27:case 5:De(t);break;case 4:Le(t,t.stateNode.containerInfo);break;case 10:Jr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Ui(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Ta(t),t.flags|=128,null):(r&t.child.childLanes)!==0?If(e,t,r):(Ta(t),e=hs(e,t,r),e!==null?e.sibling:null);Ta(t);break;case 19:var p=(e.flags&128)!==0;if(l=(r&t.childLanes)!==0,l||(or(e,t,r,!1),l=(r&t.childLanes)!==0),p){if(l)return Nc(e,t,r);t.flags|=128}if(p=t.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),E(Ai,Ai.current),l)break;return null;case 22:return t.lanes=0,od(e,t,r,t.pendingProps);case 24:Jr(t,Ia,e.memoizedState.cache)}return hs(e,t,r)}function Ff(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)So=!0;else{if(!ou(e,r)&&(t.flags&128)===0)return So=!1,Oh(e,t,r);So=(e.flags&131072)!==0}else So=!1,Hn&&(t.flags&1048576)!==0&&Su(t,Xs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=$e(t.elementType),t.type=e,typeof e=="function")Zl(e)?(l=Hc(e,l),t.tag=1,t=iu(null,t,e,l,r)):(t.tag=0,t=Qd(null,t,e,l,r));else{if(e!=null){var p=e.$$typeof;if(p===ee){t.tag=11,t=qc(null,t,e,l,r);break e}else if(p===I){t.tag=14,t=kc(null,t,e,l,r);break e}}throw t=ie(e)||e,Error(s(306,t,""))}}return t;case 0:return Qd(e,t,t.type,t.pendingProps,r);case 1:return l=t.type,p=Hc(l,t.pendingProps),iu(e,t,l,p,r);case 3:e:{if(Le(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var m=t.memoizedState;p=m.element,ja(e,t),Ua(t,l,null,r);var P=t.memoizedState;if(l=P.cache,Jr(t,Ia,l),l!==m.cache&&Ro(t,[Ia],r,!0),Ii(),l=P.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:P.cache},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){t=Of(e,t,l,r);break e}else if(l!==p){p=nr(Error(s(424)),t),Xr(p),t=Of(e,t,l,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Wi=El(e.firstChild),ya=t,Hn=!0,Vi=null,Zi=!0,r=qn(t,null,l,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Rr(),l===p){t=hs(e,t,r);break e}aa(e,t,l,r)}t=t.child}return t;case 26:return ld(e,t),e===null?(r=hg(t.type,null,t.pendingProps,null))?t.memoizedState=r:Hn||(r=t.type,e=t.pendingProps,l=th(Ce.current).createElement(r),l[Hi]=t,l[la]=e,ts(l,r,e),xa(l),t.stateNode=l):t.memoizedState=hg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return De(t),e===null&&Hn&&(l=t.stateNode=ug(t.type,t.pendingProps,Ce.current),ya=t,Zi=!0,p=Wi,fu(t.type)?(dp=p,Wi=El(l.firstChild)):Wi=p),aa(e,t,t.pendingProps.children,r),ld(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Hn&&((p=l=Wi)&&(l=Px(l,t.type,t.pendingProps,Zi),l!==null?(t.stateNode=l,ya=t,Wi=El(l.firstChild),Zi=!1,p=!0):p=!1),p||wr(t)),De(t),p=t.type,m=t.pendingProps,P=e!==null?e.memoizedProps:null,l=m.children,rp(p,m)?l=null:P!==null&&rp(p,P)&&(t.flags|=32),t.memoizedState!==null&&(p=Tu(e,t,Ed,null,null,r),hf._currentValue=p),ld(e,t),aa(e,t,l,r),t.child;case 6:return e===null&&Hn&&((e=r=Wi)&&(r=Rx(r,t.pendingProps,Zi),r!==null?(t.stateNode=r,ya=t,Wi=null,e=!0):e=!1),e||wr(t)),null;case 13:return If(e,t,r);case 4:return Le(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ji(t,null,l,r):aa(e,t,l,r),t.child;case 11:return qc(e,t,t.type,t.pendingProps,r);case 7:return aa(e,t,t.pendingProps,r),t.child;case 8:return aa(e,t,t.pendingProps.children,r),t.child;case 12:return aa(e,t,t.pendingProps.children,r),t.child;case 10:return l=t.pendingProps,Jr(t,t.type,l.value),aa(e,t,l.children,r),t.child;case 9:return p=t.type._context,l=t.pendingProps.children,jr(t),p=en(p),l=l(p),t.flags|=1,aa(e,t,l,r),t.child;case 14:return kc(e,t,t.type,t.pendingProps,r);case 15:return Ru(e,t,t.type,t.pendingProps,r);case 19:return Nc(e,t,r);case 31:return sd(e,t,r);case 22:return od(e,t,r,t.pendingProps);case 24:return jr(t),l=en(Ia),e===null?(p=le(),p===null&&(p=qa,m=Jl(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=r),p=m),t.memoizedState={parent:l,cache:p},Pt(t),Jr(t,Ia,p)):((e.lanes&r)!==0&&(ja(e,t),Ua(t,null,null,r),Ii()),p=e.memoizedState,m=t.memoizedState,p.parent!==l?(p={parent:l,cache:l},t.memoizedState=p,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=p),Jr(t,Ia,l)):(l=m.cache,Jr(t,Ia,l),l!==p.cache&&Ro(t,[Ia],r,!0))),aa(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function ml(e){e.flags|=4}function Eu(e,t,r,l,p){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(z0())e.flags|=8192;else throw tt=Re,Ge}else e.flags&=-16777217}function nf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!mg(t))if(z0())e.flags|=8192;else throw tt=Re,Ge}function Ou(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?xo():536870912,e.lanes|=t,hd|=t)}function tn(e,t){if(!Hn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function oa(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(t)for(var p=e.child;p!==null;)r|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)r|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=l,e.childLanes=r,t}function af(e,t,r){var l=t.pendingProps;switch(Bc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oa(t),null;case 1:return oa(t),null;case 3:return r=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Oa(Ia),Ae(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ki(t)?ml(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Sr())),oa(t),null;case 26:var p=t.type,m=t.memoizedState;return e===null?(ml(t),m!==null?(oa(t),nf(t,m)):(oa(t),Eu(t,p,null,l,r))):m?m!==e.memoizedState?(ml(t),oa(t),nf(t,m)):(oa(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ml(t),oa(t),Eu(t,p,e,l,r)),null;case 27:if(Ye(t),r=Ce.current,p=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ml(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return oa(t),null}e=W.current,Ki(t)?ir(t):(e=ug(p,l,r),t.stateNode=e,ml(t))}return oa(t),null;case 5:if(Ye(t),p=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ml(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return oa(t),null}if(m=W.current,Ki(t))ir(t);else{var P=th(Ce.current);switch(m){case 1:m=P.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=P.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=P.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=P.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=P.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?P.createElement("select",{is:l.is}):P.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?P.createElement(p,{is:l.is}):P.createElement(p)}}m[Hi]=t,m[la]=l;e:for(P=t.child;P!==null;){if(P.tag===5||P.tag===6)m.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===t)break e;for(;P.sibling===null;){if(P.return===null||P.return===t)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}t.stateNode=m;e:switch(ts(m,p,l),p){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ml(t)}}return oa(t),Eu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ml(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=Ce.current,Ki(t)){if(e=t.stateNode,r=t.memoizedProps,l=null,p=ya,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}e[Hi]=t,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Q0(e.nodeValue,r)),e||wr(t,!0)}else e=th(e).createTextNode(l),e[Hi]=t,t.stateNode=e}return oa(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ki(t),r!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Hi]=t}else Rr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;oa(t),e=!1}else r=Sr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(Qi(t),t):(Qi(t),null);if((t.flags&128)!==0)throw Error(s(558))}return oa(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Ki(t),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Hi]=t}else Rr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;oa(t),p=!1}else p=Sr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return t.flags&256?(Qi(t),t):(Qi(t),null)}return Qi(t),(t.flags&128)!==0?(t.lanes=r,t):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=t.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==p&&(l.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),Ou(t,t.updateQueue),oa(t),null);case 4:return Ae(),e===null&&tp(t.stateNode.containerInfo),oa(t),null;case 10:return Oa(t.type),oa(t),null;case 19:if(A(Ai),l=t.memoizedState,l===null)return oa(t),null;if(p=(t.flags&128)!==0,m=l.rendering,m===null)if(p)tn(l,!1);else{if(Eo!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Mo(e),m!==null){for(t.flags|=128,tn(l,!1),e=m.updateQueue,t.updateQueue=e,Ou(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)$s(r,e),r=r.sibling;return E(Ai,Ai.current&1|2),Hn&&vr(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Un()>Vf&&(t.flags|=128,p=!0,tn(l,!1),t.lanes=4194304)}else{if(!p)if(e=Mo(m),e!==null){if(t.flags|=128,p=!0,e=e.updateQueue,t.updateQueue=e,Ou(t,e),tn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Hn)return oa(t),null}else 2*Un()-l.renderingStartTime>Vf&&r!==536870912&&(t.flags|=128,p=!0,tn(l,!1),t.lanes=4194304);l.isBackwards?(m.sibling=t.child,t.child=m):(e=l.last,e!==null?e.sibling=m:t.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Un(),e.sibling=null,r=Ai.current,E(Ai,p?r&1|2:r&1),Hn&&vr(t,l.treeForkCount),e):(oa(t),null);case 22:case 23:return Qi(t),ro(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(r&536870912)!==0&&(t.flags&128)===0&&(oa(t),t.subtreeFlags&6&&(t.flags|=8192)):oa(t),r=t.updateQueue,r!==null&&Ou(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==r&&(t.flags|=2048),e!==null&&A(K),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Oa(Ia),oa(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Ih(e,t){switch(Bc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oa(Ia),Ae(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ye(t),null;case 31:if(t.memoizedState!==null){if(Qi(t),t.alternate===null)throw Error(s(340));Rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(Ai),null;case 4:return Ae(),null;case 10:return Oa(t.type),null;case 22:case 23:return Qi(t),ro(),e!==null&&A(K),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Oa(Ia),null;case 25:return null;default:return null}}function Hf(e,t){switch(Bc(t),t.tag){case 3:Oa(Ia),Ae();break;case 26:case 27:case 5:Ye(t);break;case 4:Ae();break;case 31:t.memoizedState!==null&&Qi(t);break;case 13:Qi(t);break;case 19:A(Ai);break;case 10:Oa(t.type);break;case 22:case 23:Qi(t),ro(),e!==null&&A(K);break;case 24:Oa(Ia)}}function Iu(e,t){try{var r=t.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var p=l.next;r=p;do{if((r.tag&e)===e){l=void 0;var m=r.create,P=r.inst;l=m(),P.destroy=l}r=r.next}while(r!==p)}}catch(oe){Aa(t,t.return,oe)}}function c(e,t,r){try{var l=t.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var m=p.next;l=m;do{if((l.tag&e)===e){var P=l.inst,oe=P.destroy;if(oe!==void 0){P.destroy=void 0,p=t;var ze=r,Ke=oe;try{Ke()}catch(ut){Aa(p,ze,ut)}}}l=l.next}while(l!==m)}}catch(ut){Aa(t,t.return,ut)}}function y(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{oo(t,r)}catch(l){Aa(e,e.return,l)}}}function k(e,t,r){r.props=Hc(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){Aa(e,t,l)}}function B(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(p){Aa(e,t,p)}}function _(e,t){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(p){Aa(e,t,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Aa(e,t,p)}else r.current=null}function Z(e){var t=e.type,r=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(p){Aa(e,e.return,p)}}function M(e,t,r){try{var l=e.stateNode;Ax(l,e.type,r,t),l[la]=t}catch(p){Aa(e,e.return,p)}}function ae(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fu(e.type)||e.tag===4}function ue(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ae(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fu(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Se(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=vi));else if(l!==4&&(l===27&&fu(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(Se(e,t,r),e=e.sibling;e!==null;)Se(e,t,r),e=e.sibling}function we(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(l!==4&&(l===27&&fu(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(we(e,t,r),e=e.sibling;e!==null;)we(e,t,r),e=e.sibling}function je(e){var t=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,p=t.attributes;p.length;)t.removeAttributeNode(p[0]);ts(t,l,r),t[Hi]=e,t[la]=r}catch(m){Aa(e,e.return,m)}}var Oe=!1,Me=!1,Ve=!1,We=typeof WeakSet=="function"?WeakSet:Set,He=null;function Ue(e,t){if(e=e.containerInfo,ap=lh,e=_s(e),$r(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var p=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var P=0,oe=-1,ze=-1,Ke=0,ut=0,yt=e,Je=null;t:for(;;){for(var et;yt!==r||p!==0&&yt.nodeType!==3||(oe=P+p),yt!==m||l!==0&&yt.nodeType!==3||(ze=P+l),yt.nodeType===3&&(P+=yt.nodeValue.length),(et=yt.firstChild)!==null;)Je=yt,yt=et;for(;;){if(yt===e)break t;if(Je===r&&++Ke===p&&(oe=P),Je===m&&++ut===l&&(ze=P),(et=yt.nextSibling)!==null)break;yt=Je,Je=yt.parentNode}yt=et}r=oe===-1||ze===-1?null:{start:oe,end:ze}}else r=null}r=r||{start:0,end:0}}else r=null;for(op={focusedElem:e,selectionRange:r},lh=!1,He=t;He!==null;)if(t=He,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,He=e;else for(;He!==null;){switch(t=He,m=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)p=e[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,r=t,p=m.memoizedProps,m=m.memoizedState,l=r.stateNode;try{var un=Hc(r.type,p);e=l.getSnapshotBeforeUpdate(un,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(En){Aa(r,r.return,En)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)lp(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":lp(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,He=e;break}He=t.return}}function ct(e,t,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:on(e,r),l&4&&Iu(5,r);break;case 1:if(on(e,r),l&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(P){Aa(r,r.return,P)}else{var p=Hc(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(p,t,e.__reactInternalSnapshotBeforeUpdate)}catch(P){Aa(r,r.return,P)}}l&64&&y(r),l&512&&B(r,r.return);break;case 3:if(on(e,r),l&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{oo(e,t)}catch(P){Aa(r,r.return,P)}}break;case 27:t===null&&l&4&&je(r);case 26:case 5:on(e,r),t===null&&l&4&&Z(r),l&512&&B(r,r.return);break;case 12:on(e,r);break;case 31:on(e,r),l&4&&Ee(e,r);break;case 13:on(e,r),l&4&&ke(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=px.bind(null,r),Dx(e,r))));break;case 22:if(l=r.memoizedState!==null||Oe,!l){t=t!==null&&t.memoizedState!==null||Me,p=Oe;var m=Me;Oe=l,(Me=t)&&!m?rn(e,r,(r.subtreeFlags&8772)!==0):on(e,r),Oe=p,Me=m}break;case 30:break;default:on(e,r)}}function wt(e){var t=e.alternate;t!==null&&(e.alternate=null,wt(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&mi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,lt=!1;function Dt(e,t,r){for(r=r.child;r!==null;)Ht(e,t,r),r=r.sibling}function Ht(e,t,r){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Tn,r)}catch{}switch(r.tag){case 26:Me||_(r,t),Dt(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Me||_(r,t);var l=at,p=lt;fu(r.type)&&(at=r.stateNode,lt=!1),Dt(e,t,r),uf(r.stateNode),at=l,lt=p;break;case 5:Me||_(r,t);case 6:if(l=at,p=lt,at=null,Dt(e,t,r),at=l,lt=p,at!==null)if(lt)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(r.stateNode)}catch(m){Aa(r,t,m)}else try{at.removeChild(r.stateNode)}catch(m){Aa(r,t,m)}break;case 18:at!==null&&(lt?(e=at,og(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),wd(e)):og(at,r.stateNode));break;case 4:l=at,p=lt,at=r.stateNode.containerInfo,lt=!0,Dt(e,t,r),at=l,lt=p;break;case 0:case 11:case 14:case 15:c(2,r,t),Me||c(4,r,t),Dt(e,t,r);break;case 1:Me||(_(r,t),l=r.stateNode,typeof l.componentWillUnmount=="function"&&k(r,t,l)),Dt(e,t,r);break;case 21:Dt(e,t,r);break;case 22:Me=(l=Me)||r.memoizedState!==null,Dt(e,t,r),Me=l;break;default:Dt(e,t,r)}}function Ee(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{wd(e)}catch(r){Aa(t,t.return,r)}}}function ke(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wd(e)}catch(r){Aa(t,t.return,r)}}function rt(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new We),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new We),t;default:throw Error(s(435,e.tag))}}function Qe(e,t){var r=rt(e);t.forEach(function(l){if(!r.has(l)){r.add(l);var p=gx.bind(null,e,l);l.then(p,p)}})}function bt(e,t){var r=t.deletions;if(r!==null)for(var l=0;l<r.length;l++){var p=r[l],m=e,P=t,oe=P;e:for(;oe!==null;){switch(oe.tag){case 27:if(fu(oe.type)){at=oe.stateNode,lt=!1;break e}break;case 5:at=oe.stateNode,lt=!1;break e;case 3:case 4:at=oe.stateNode.containerInfo,lt=!0;break e}oe=oe.return}if(at===null)throw Error(s(160));Ht(m,P,p),at=null,lt=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)mn(t,e),t=t.sibling}var Lt=null;function mn(e,t){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:bt(t,e),It(e),l&4&&(c(3,e,e.return),Iu(3,e),c(5,e,e.return));break;case 1:bt(t,e),It(e),l&512&&(Me||r===null||_(r,r.return)),l&64&&Oe&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var p=Lt;if(bt(t,e),It(e),l&512&&(Me||r===null||_(r,r.return)),l&4){var m=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){e:{l=e.type,r=e.memoizedProps,p=p.ownerDocument||p;t:switch(l){case"title":m=p.getElementsByTagName("title")[0],(!m||m[sr]||m[Hi]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(l),p.head.insertBefore(m,p.querySelector("head > title"))),ts(m,l,r),m[Hi]=e,xa(m),l=m;break e;case"link":var P=xg("link","href",p).get(l+(r.href||""));if(P){for(var oe=0;oe<P.length;oe++)if(m=P[oe],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){P.splice(oe,1);break t}}m=p.createElement(l),ts(m,l,r),p.head.appendChild(m);break;case"meta":if(P=xg("meta","content",p).get(l+(r.content||""))){for(oe=0;oe<P.length;oe++)if(m=P[oe],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){P.splice(oe,1);break t}}m=p.createElement(l),ts(m,l,r),p.head.appendChild(m);break;default:throw Error(s(468,l))}m[Hi]=e,xa(m),l=m}e.stateNode=l}else yg(p,e.type,e.stateNode);else e.stateNode=gg(p,l,e.memoizedProps);else m!==l?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,l===null?yg(p,e.type,e.stateNode):gg(p,l,e.memoizedProps)):l===null&&e.stateNode!==null&&M(e,e.memoizedProps,r.memoizedProps)}break;case 27:bt(t,e),It(e),l&512&&(Me||r===null||_(r,r.return)),r!==null&&l&4&&M(e,e.memoizedProps,r.memoizedProps);break;case 5:if(bt(t,e),It(e),l&512&&(Me||r===null||_(r,r.return)),e.flags&32){p=e.stateNode;try{fr(p,"")}catch(un){Aa(e,e.return,un)}}l&4&&e.stateNode!=null&&(p=e.memoizedProps,M(e,p,r!==null?r.memoizedProps:p)),l&1024&&(Ve=!0);break;case 6:if(bt(t,e),It(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(un){Aa(e,e.return,un)}}break;case 3:if(ah=null,p=Lt,Lt=nh(t.containerInfo),bt(t,e),Lt=p,It(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{wd(t.containerInfo)}catch(un){Aa(e,e.return,un)}Ve&&(Ve=!1,Dn(e));break;case 4:l=Lt,Lt=nh(e.stateNode.containerInfo),bt(t,e),It(e),Lt=l;break;case 12:bt(t,e),It(e);break;case 31:bt(t,e),It(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Qe(e,l)));break;case 13:bt(t,e),It(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Wf=Un()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Qe(e,l)));break;case 22:p=e.memoizedState!==null;var ze=r!==null&&r.memoizedState!==null,Ke=Oe,ut=Me;if(Oe=Ke||p,Me=ut||ze,bt(t,e),Me=ut,Oe=Ke,It(e),l&8192)e:for(t=e.stateNode,t._visibility=p?t._visibility&-2:t._visibility|1,p&&(r===null||ze||Oe||Me||On(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){ze=r=t;try{if(m=ze.stateNode,p)P=m.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{oe=ze.stateNode;var yt=ze.memoizedProps.style,Je=yt!=null&&yt.hasOwnProperty("display")?yt.display:null;oe.style.display=Je==null||typeof Je=="boolean"?"":(""+Je).trim()}}catch(un){Aa(ze,ze.return,un)}}}else if(t.tag===6){if(r===null){ze=t;try{ze.stateNode.nodeValue=p?"":ze.memoizedProps}catch(un){Aa(ze,ze.return,un)}}}else if(t.tag===18){if(r===null){ze=t;try{var et=ze.stateNode;p?rg(et,!0):rg(ze.stateNode,!1)}catch(un){Aa(ze,ze.return,un)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Qe(e,r))));break;case 19:bt(t,e),It(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Qe(e,l)));break;case 30:break;case 21:break;default:bt(t,e),It(e)}}function It(e){var t=e.flags;if(t&2){try{for(var r,l=e.return;l!==null;){if(ae(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,m=ue(e);we(e,m,p);break;case 5:var P=r.stateNode;r.flags&32&&(fr(P,""),r.flags&=-33);var oe=ue(e);we(e,oe,P);break;case 3:case 4:var ze=r.stateNode.containerInfo,Ke=ue(e);Se(e,Ke,ze);break;default:throw Error(s(161))}}catch(ut){Aa(e,e.return,ut)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dn(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Dn(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function on(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ct(e,t.alternate,t),t=t.sibling}function On(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:c(4,t,t.return),On(t);break;case 1:_(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&k(t,t.return,r),On(t);break;case 27:uf(t.stateNode);case 26:case 5:_(t,t.return),On(t);break;case 22:t.memoizedState===null&&On(t);break;case 30:On(t);break;default:On(t)}e=e.sibling}}function rn(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,p=e,m=t,P=m.flags;switch(m.tag){case 0:case 11:case 15:rn(p,m,r),Iu(4,m);break;case 1:if(rn(p,m,r),l=m,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Ke){Aa(l,l.return,Ke)}if(l=m,p=l.updateQueue,p!==null){var oe=l.stateNode;try{var ze=p.shared.hiddenCallbacks;if(ze!==null)for(p.shared.hiddenCallbacks=null,p=0;p<ze.length;p++)Do(ze[p],oe)}catch(Ke){Aa(l,l.return,Ke)}}r&&P&64&&y(m),B(m,m.return);break;case 27:je(m);case 26:case 5:rn(p,m,r),r&&l===null&&P&4&&Z(m),B(m,m.return);break;case 12:rn(p,m,r);break;case 31:rn(p,m,r),r&&P&4&&Ee(p,m);break;case 13:rn(p,m,r),r&&P&4&&ke(p,m);break;case 22:m.memoizedState===null&&rn(p,m,r),B(m,m.return);break;case 30:break;default:rn(p,m,r)}t=t.sibling}}function Nt(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ls(r))}function Pn(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ls(e))}function xi(e,t,r,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)pa(e,t,r,l),t=t.sibling}function pa(e,t,r,l){var p=t.flags;switch(t.tag){case 0:case 11:case 15:xi(e,t,r,l),p&2048&&Iu(9,t);break;case 1:xi(e,t,r,l);break;case 3:xi(e,t,r,l),p&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ls(e)));break;case 12:if(p&2048){xi(e,t,r,l),e=t.stateNode;try{var m=t.memoizedProps,P=m.id,oe=m.onPostCommit;typeof oe=="function"&&oe(P,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ze){Aa(t,t.return,ze)}}else xi(e,t,r,l);break;case 31:xi(e,t,r,l);break;case 13:xi(e,t,r,l);break;case 23:break;case 22:m=t.stateNode,P=t.alternate,t.memoizedState!==null?m._visibility&2?xi(e,t,r,l):Ha(e,t):m._visibility&2?xi(e,t,r,l):(m._visibility|=2,ta(e,t,r,l,(t.subtreeFlags&10256)!==0||!1)),p&2048&&Nt(P,t);break;case 24:xi(e,t,r,l),p&2048&&Pn(t.alternate,t);break;default:xi(e,t,r,l)}}function ta(e,t,r,l,p){for(p=p&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var m=e,P=t,oe=r,ze=l,Ke=P.flags;switch(P.tag){case 0:case 11:case 15:ta(m,P,oe,ze,p),Iu(8,P);break;case 23:break;case 22:var ut=P.stateNode;P.memoizedState!==null?ut._visibility&2?ta(m,P,oe,ze,p):Ha(m,P):(ut._visibility|=2,ta(m,P,oe,ze,p)),p&&Ke&2048&&Nt(P.alternate,P);break;case 24:ta(m,P,oe,ze,p),p&&Ke&2048&&Pn(P.alternate,P);break;default:ta(m,P,oe,ze,p)}t=t.sibling}}function Ha(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,l=t,p=l.flags;switch(l.tag){case 22:Ha(r,l),p&2048&&Nt(l.alternate,l);break;case 24:Ha(r,l),p&2048&&Pn(l.alternate,l);break;default:Ha(r,l)}t=t.sibling}}var La=8192;function In(e,t,r){if(e.subtreeFlags&La)for(e=e.child;e!==null;)Ml(e,t,r),e=e.sibling}function Ml(e,t,r){switch(e.tag){case 26:In(e,t,r),e.flags&La&&e.memoizedState!==null&&$x(r,Lt,e.memoizedState,e.memoizedProps);break;case 5:In(e,t,r);break;case 3:case 4:var l=Lt;Lt=nh(e.stateNode.containerInfo),In(e,t,r),Lt=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=La,La=16777216,In(e,t,r),La=l):In(e,t,r));break;default:In(e,t,r)}}function Bl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Er(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];He=l,S0(l,e)}Bl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)w0(e),e=e.sibling}function w0(e){switch(e.tag){case 0:case 11:case 15:Er(e),e.flags&2048&&c(9,e,e.return);break;case 3:Er(e);break;case 12:Er(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,qf(e)):Er(e);break;default:Er(e)}}function qf(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];He=l,S0(l,e)}Bl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:c(8,t,t.return),qf(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,qf(t));break;default:qf(t)}e=e.sibling}}function S0(e,t){for(;He!==null;){var r=He;switch(r.tag){case 0:case 11:case 15:c(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ls(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,He=l;else e:for(r=e;He!==null;){l=He;var p=l.sibling,m=l.return;if(wt(l),l===r){He=null;break e}if(p!==null){p.return=m,He=p;break e}He=m}}}var sx={getCacheForType:function(e){var t=en(Ia),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return en(Ia).controller.signal}},lx=typeof WeakMap=="function"?WeakMap:Map,ga=0,qa=null,ki=null,Pi=0,Ca=0,bl=null,ru=!1,fd=!1,Uh=!1,Wc=0,Eo=0,su=0,Uu=0,Fh=0,vl=0,hd=0,of=null,nl=null,Hh=!1,Wf=0,j0=0,Vf=1/0,$f=null,lu=null,Ar=0,cu=null,pd=null,Vc=0,qh=0,Wh=null,T0=null,rf=0,Vh=null;function wl(){return(ga&2)!==0&&Pi!==0?Pi&-Pi:te.T!==null?Kh():zi()}function C0(){if(vl===0)if((Pi&536870912)===0||Hn){var e=Fi;Fi<<=1,(Fi&3932160)===0&&(Fi=262144),vl=e}else vl=536870912;return e=ma.current,e!==null&&(e.flags|=32),vl}function il(e,t,r){(e===qa&&(Ca===2||Ca===9)||e.cancelPendingCommit!==null)&&(gd(e,0),uu(e,Pi,vl,!1)),Kt(e,r),((ga&2)===0||e!==qa)&&(e===qa&&((ga&2)===0&&(Uu|=r),Eo===4&&uu(e,Pi,vl,!1)),zc(e))}function A0(e,t,r){if((ga&6)!==0)throw Error(s(327));var l=!r&&(t&127)===0&&(t&e.expiredLanes)===0||To(e,t),p=l?dx(e,t):Yh(e,t,!0),m=l;do{if(p===0){fd&&!l&&uu(e,t,0,!1);break}else{if(r=e.current.alternate,m&&!cx(r)){p=Yh(e,t,!1),m=!1;continue}if(p===2){if(m=t,e.errorRecoveryDisabledLanes&m)var P=0;else P=e.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){t=P;e:{var oe=e;p=of;var ze=oe.current.memoizedState.isDehydrated;if(ze&&(gd(oe,P).flags|=256),P=Yh(oe,P,!1),P!==2){if(Uh&&!ze){oe.errorRecoveryDisabledLanes|=m,Uu|=m,p=4;break e}m=nl,nl=p,m!==null&&(nl===null?nl=m:nl.push.apply(nl,m))}p=P}if(m=!1,p!==2)continue}}if(p===1){gd(e,0),uu(e,t,0,!0);break}e:{switch(l=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:uu(l,t,vl,!ru);break e;case 2:nl=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(p=Wf+300-Un(),10<p)){if(uu(l,t,vl,!ru),$t(l,0,!0)!==0)break e;Vc=t,l.timeoutHandle=ig(k0.bind(null,l,r,nl,$f,Hh,t,vl,Uu,hd,ru,m,"Throttled",-0,0),p);break e}k0(l,r,nl,$f,Hh,t,vl,Uu,hd,ru,m,null,-0,0)}}break}while(!0);zc(e)}function k0(e,t,r,l,p,m,P,oe,ze,Ke,ut,yt,Je,et){if(e.timeoutHandle=-1,yt=t.subtreeFlags,yt&8192||(yt&16785408)===16785408){yt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},Ml(t,m,yt);var un=(m&62914560)===m?Wf-Un():(m&4194048)===m?j0-Un():0;if(un=Yx(yt,un),un!==null){Vc=m,e.cancelPendingCommit=un(M0.bind(null,e,t,m,r,l,p,P,oe,ze,ut,yt,null,Je,et)),uu(e,m,P,!Ke);return}}M0(e,t,m,r,l,p,P,oe,ze)}function cx(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var p=r[l],m=p.getSnapshot;p=p.value;try{if(!Ya(m(),p))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function uu(e,t,r,l){t&=~Fh,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var p=t;0<p;){var m=31-nt(p),P=1<<m;l[m]=-1,p&=~P}r!==0&&rr(e,r,t)}function Yf(){return(ga&6)===0?(sf(0),!1):!0}function $h(){if(ki!==null){if(Ca===0)var e=ki.return;else e=ki,wo=Kr=null,eu(e),xt=null,Gt=0,e=ki;for(;e!==null;)Hf(e.alternate,e),e=e.return;ki=null}}function gd(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,zx(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Vc=0,$h(),qa=e,ki=r=mr(e.current,null),Pi=t,Ca=0,bl=null,ru=!1,fd=To(e,t),Uh=!1,hd=vl=Fh=Uu=su=Eo=0,nl=of=null,Hh=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var p=31-nt(l),m=1<<p;t|=e[p],l&=~m}return Wc=t,Gl(),r}function N0(e,t){pn=null,te.H=Cc,t===Pe||t===ge?(t=st(),Ca=3):t===Ge?(t=st(),Ca=4):Ca=t===ad?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,bl=t,ki===null&&(Eo=1,Lu(e,nr(t,e.current)))}function z0(){var e=ma.current;return e===null?!0:(Pi&4194048)===Pi?gi===null:(Pi&62914560)===Pi||(Pi&536870912)!==0?e===gi:!1}function _0(){var e=te.H;return te.H=Cc,e===null?Cc:e}function L0(){var e=te.A;return te.A=sx,e}function Gf(){Eo=4,ru||(Pi&4194048)!==Pi&&ma.current!==null||(fd=!0),(su&134217727)===0&&(Uu&134217727)===0||qa===null||uu(qa,Pi,vl,!1)}function Yh(e,t,r){var l=ga;ga|=2;var p=_0(),m=L0();(qa!==e||Pi!==t)&&($f=null,gd(e,t)),t=!1;var P=Eo;e:do try{if(Ca!==0&&ki!==null){var oe=ki,ze=bl;switch(Ca){case 8:$h(),P=6;break e;case 3:case 2:case 9:case 6:ma.current===null&&(t=!0);var Ke=Ca;if(Ca=0,bl=null,xd(e,oe,ze,Ke),r&&fd){P=0;break e}break;default:Ke=Ca,Ca=0,bl=null,xd(e,oe,ze,Ke)}}ux(),P=Eo;break}catch(ut){N0(e,ut)}while(!0);return t&&e.shellSuspendCounter++,wo=Kr=null,ga=l,te.H=p,te.A=m,ki===null&&(qa=null,Pi=0,Gl()),P}function ux(){for(;ki!==null;)P0(ki)}function dx(e,t){var r=ga;ga|=2;var l=_0(),p=L0();qa!==e||Pi!==t?($f=null,Vf=Un()+500,gd(e,t)):fd=To(e,t);e:do try{if(Ca!==0&&ki!==null){t=ki;var m=bl;t:switch(Ca){case 1:Ca=0,bl=null,xd(e,t,m,1);break;case 2:case 9:if(Fe(m)){Ca=0,bl=null,R0(t);break}t=function(){Ca!==2&&Ca!==9||qa!==e||(Ca=7),zc(e)},m.then(t,t);break e;case 3:Ca=7;break e;case 4:Ca=5;break e;case 7:Fe(m)?(Ca=0,bl=null,R0(t)):(Ca=0,bl=null,xd(e,t,m,7));break;case 5:var P=null;switch(ki.tag){case 26:P=ki.memoizedState;case 5:case 27:var oe=ki;if(P?mg(P):oe.stateNode.complete){Ca=0,bl=null;var ze=oe.sibling;if(ze!==null)ki=ze;else{var Ke=oe.return;Ke!==null?(ki=Ke,Xf(Ke)):ki=null}break t}}Ca=0,bl=null,xd(e,t,m,5);break;case 6:Ca=0,bl=null,xd(e,t,m,6);break;case 8:$h(),Eo=6;break e;default:throw Error(s(462))}}fx();break}catch(ut){N0(e,ut)}while(!0);return wo=Kr=null,te.H=l,te.A=p,ga=r,ki!==null?0:(qa=null,Pi=0,Gl(),Eo)}function fx(){for(;ki!==null&&!xn();)P0(ki)}function P0(e){var t=Ff(e.alternate,e,Wc);e.memoizedProps=e.pendingProps,t===null?Xf(e):ki=t}function R0(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=cd(r,t,t.pendingProps,t.type,void 0,Pi);break;case 11:t=cd(r,t,t.pendingProps,t.type.render,t.ref,Pi);break;case 5:eu(t);default:Hf(r,t),t=ki=$s(t,Wc),t=Ff(r,t,Wc)}e.memoizedProps=e.pendingProps,t===null?Xf(e):ki=t}function xd(e,t,r,l){wo=Kr=null,eu(t),xt=null,Gt=0;var p=t.return;try{if(Dl(e,p,t,r,Pi)){Eo=1,Lu(e,nr(r,e.current)),ki=null;return}}catch(m){if(p!==null)throw ki=p,m;Eo=1,Lu(e,nr(r,e.current)),ki=null;return}t.flags&32768?(Hn||l===1?e=!0:fd||(Pi&536870912)!==0?e=!1:(ru=e=!0,(l===2||l===9||l===3||l===6)&&(l=ma.current,l!==null&&l.tag===13&&(l.flags|=16384))),D0(t,e)):Xf(t)}function Xf(e){var t=e;do{if((t.flags&32768)!==0){D0(t,ru);return}e=t.return;var r=af(t.alternate,t,Wc);if(r!==null){ki=r;return}if(t=t.sibling,t!==null){ki=t;return}ki=t=e}while(t!==null);Eo===0&&(Eo=5)}function D0(e,t){do{var r=Ih(e.alternate,e);if(r!==null){r.flags&=32767,ki=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){ki=e;return}ki=e=r}while(e!==null);Eo=6,ki=null}function M0(e,t,r,l,p,m,P,oe,ze){e.cancelPendingCommit=null;do Zf();while(Ar!==0);if((ga&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(m=t.lanes|t.childLanes,m|=Dc,Ao(e,r,m,P,oe,ze),e===qa&&(ki=qa=null,Pi=0),pd=t,cu=e,Vc=r,qh=m,Wh=p,T0=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,xx(ht,function(){return U0(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=te.T,te.T=null,p=ne.p,ne.p=2,P=ga,ga|=4;try{Ue(e,t,r)}finally{ga=P,ne.p=p,te.T=l}}Ar=1,B0(),E0(),O0()}}function B0(){if(Ar===1){Ar=0;var e=cu,t=pd,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=te.T,te.T=null;var l=ne.p;ne.p=2;var p=ga;ga|=4;try{mn(t,e);var m=op,P=_s(e.containerInfo),oe=m.focusedElem,ze=m.selectionRange;if(P!==oe&&oe&&oe.ownerDocument&&Vr(oe.ownerDocument.documentElement,oe)){if(ze!==null&&$r(oe)){var Ke=ze.start,ut=ze.end;if(ut===void 0&&(ut=Ke),"selectionStart"in oe)oe.selectionStart=Ke,oe.selectionEnd=Math.min(ut,oe.value.length);else{var yt=oe.ownerDocument||document,Je=yt&&yt.defaultView||window;if(Je.getSelection){var et=Je.getSelection(),un=oe.textContent.length,En=Math.min(ze.start,un),Ra=ze.end===void 0?En:Math.min(ze.end,un);!et.extend&&En>Ra&&(P=Ra,Ra=En,En=P);var qe=sl(oe,En),Be=sl(oe,Ra);if(qe&&Be&&(et.rangeCount!==1||et.anchorNode!==qe.node||et.anchorOffset!==qe.offset||et.focusNode!==Be.node||et.focusOffset!==Be.offset)){var Xe=yt.createRange();Xe.setStart(qe.node,qe.offset),et.removeAllRanges(),En>Ra?(et.addRange(Xe),et.extend(Be.node,Be.offset)):(Xe.setEnd(Be.node,Be.offset),et.addRange(Xe))}}}}for(yt=[],et=oe;et=et.parentNode;)et.nodeType===1&&yt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<yt.length;oe++){var gt=yt[oe];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}lh=!!ap,op=ap=null}finally{ga=p,ne.p=l,te.T=r}}e.current=t,Ar=2}}function E0(){if(Ar===2){Ar=0;var e=cu,t=pd,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=te.T,te.T=null;var l=ne.p;ne.p=2;var p=ga;ga|=4;try{ct(e,t.alternate,t)}finally{ga=p,ne.p=l,te.T=r}}Ar=3}}function O0(){if(Ar===4||Ar===3){Ar=0,nn();var e=cu,t=pd,r=Vc,l=T0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ar=5:(Ar=0,pd=cu=null,I0(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(lu=null),li(r),t=t.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Tn,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=te.T,p=ne.p,ne.p=2,te.T=null;try{for(var m=e.onRecoverableError,P=0;P<l.length;P++){var oe=l[P];m(oe.value,{componentStack:oe.stack})}}finally{te.T=t,ne.p=p}}(Vc&3)!==0&&Zf(),zc(e),p=e.pendingLanes,(r&261930)!==0&&(p&42)!==0?e===Vh?rf++:(rf=0,Vh=e):rf=0,sf(0)}}function I0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ls(t)))}function Zf(){return B0(),E0(),O0(),U0()}function U0(){if(Ar!==5)return!1;var e=cu,t=qh;qh=0;var r=li(Vc),l=te.T,p=ne.p;try{ne.p=32>r?32:r,te.T=null,r=Wh,Wh=null;var m=cu,P=Vc;if(Ar=0,pd=cu=null,Vc=0,(ga&6)!==0)throw Error(s(331));var oe=ga;if(ga|=4,w0(m.current),pa(m,m.current,P,r),ga=oe,sf(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Tn,m)}catch{}return!0}finally{ne.p=p,te.T=l,I0(e,t)}}function F0(e,t,r){t=nr(r,t),t=yl(e.stateNode,t,2),e=Wn(e,t,2),e!==null&&(Kt(e,2),zc(e))}function Aa(e,t,r){if(e.tag===3)F0(e,e,r);else for(;t!==null;){if(t.tag===3){F0(t,e,r);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(lu===null||!lu.has(l))){e=nr(r,e),r=Kd(2),l=Wn(t,r,2),l!==null&&(rc(r,l,t,e),Kt(l,2),zc(l));break}}t=t.return}}function Gh(e,t,r){var l=e.pingCache;if(l===null){l=e.pingCache=new lx;var p=new Set;l.set(t,p)}else p=l.get(t),p===void 0&&(p=new Set,l.set(t,p));p.has(r)||(Uh=!0,p.add(r),e=hx.bind(null,e,t,r),t.then(e,e))}function hx(e,t,r){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,qa===e&&(Pi&r)===r&&(Eo===4||Eo===3&&(Pi&62914560)===Pi&&300>Un()-Wf?(ga&2)===0&&gd(e,0):Fh|=r,hd===Pi&&(hd=0)),zc(e)}function H0(e,t){t===0&&(t=xo()),e=Yr(e,t),e!==null&&(Kt(e,t),zc(e))}function px(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),H0(e,r)}function gx(e,t){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,p=e.memoizedState;p!==null&&(r=p.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),H0(e,r)}function xx(e,t){return sn(e,t)}var Kf=null,yd=null,Xh=!1,Jf=!1,Zh=!1,du=0;function zc(e){e!==yd&&e.next===null&&(yd===null?Kf=yd=e:yd=yd.next=e),Jf=!0,Xh||(Xh=!0,mx())}function sf(e,t){if(!Zh&&Jf){Zh=!0;do for(var r=!1,l=Kf;l!==null;){if(e!==0){var p=l.pendingLanes;if(p===0)var m=0;else{var P=l.suspendedLanes,oe=l.pingedLanes;m=(1<<31-nt(42|e)+1)-1,m&=p&~(P&~oe),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,$0(l,m))}else m=Pi,m=$t(l,l===qa?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||To(l,m)||(r=!0,$0(l,m));l=l.next}while(r);Zh=!1}}function yx(){q0()}function q0(){Jf=Xh=!1;var e=0;du!==0&&Nx()&&(e=du);for(var t=Un(),r=null,l=Kf;l!==null;){var p=l.next,m=W0(l,t);m===0?(l.next=null,r===null?Kf=p:r.next=p,p===null&&(yd=r)):(r=l,(e!==0||(m&3)!==0)&&(Jf=!0)),l=p}Ar!==0&&Ar!==5||sf(e),du!==0&&(du=0)}function W0(e,t){for(var r=e.suspendedLanes,l=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var P=31-nt(m),oe=1<<P,ze=p[P];ze===-1?((oe&r)===0||(oe&l)!==0)&&(p[P]=eo(oe,t)):ze<=t&&(e.expiredLanes|=oe),m&=~oe}if(t=qa,r=Pi,r=$t(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===t&&(Ca===2||Ca===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ut(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||To(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(l!==null&&Ut(l),li(r)){case 2:case 8:r=ri;break;case 32:r=ht;break;case 268435456:r=Rn;break;default:r=ht}return l=V0.bind(null,e),r=sn(r,l),e.callbackPriority=t,e.callbackNode=r,t}return l!==null&&l!==null&&Ut(l),e.callbackPriority=2,e.callbackNode=null,2}function V0(e,t){if(Ar!==0&&Ar!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Zf()&&e.callbackNode!==r)return null;var l=Pi;return l=$t(e,e===qa?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(A0(e,l,t),W0(e,Un()),e.callbackNode!=null&&e.callbackNode===r?V0.bind(null,e):null)}function $0(e,t){if(Zf())return null;A0(e,t,!0)}function mx(){_x(function(){(ga&6)!==0?sn(Mt,yx):q0()})}function Kh(){if(du===0){var e=h;e===0&&(e=bn,bn<<=1,(bn&261888)===0&&(bn=256)),du=e}return du}function Y0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ze(""+e)}function G0(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function bx(e,t,r,l,p){if(t==="submit"&&r&&r.stateNode===p){var m=Y0((p[la]||null).action),P=l.submitter;P&&(t=(t=P[la]||null)?Y0(t.formAction):P.getAttribute("formAction"),t!==null&&(m=t,P=null));var oe=new Ko("action","action",null,l,p);e.push({event:oe,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(du!==0){var ze=P?G0(p,P):new FormData(p);Hd(r,{pending:!0,data:ze,method:p.method,action:m},null,ze)}}else typeof m=="function"&&(oe.preventDefault(),ze=P?G0(p,P):new FormData(p),Hd(r,{pending:!0,data:ze,method:p.method,action:m},m,ze))},currentTarget:p}]})}}for(var Jh=0;Jh<Ws.length;Jh++){var Qh=Ws[Jh],vx=Qh.toLowerCase(),wx=Qh[0].toUpperCase()+Qh.slice(1);oi(vx,"on"+wx)}oi(Ga,"onAnimationEnd"),oi(Oi,"onAnimationIteration"),oi(ss,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(vo,"onTransitionRun"),oi(ls,"onTransitionStart"),oi(Xu,"onTransitionCancel"),oi(cl,"onTransitionEnd"),ca("onMouseEnter",["mouseout","mouseover"]),ca("onMouseLeave",["mouseout","mouseover"]),ca("onPointerEnter",["pointerout","pointerover"]),ca("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lf));function X0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],p=l.event;l=l.listeners;e:{var m=void 0;if(t)for(var P=l.length-1;0<=P;P--){var oe=l[P],ze=oe.instance,Ke=oe.currentTarget;if(oe=oe.listener,ze!==m&&p.isPropagationStopped())break e;m=oe,p.currentTarget=Ke;try{m(p)}catch(ut){Lo(ut)}p.currentTarget=null,m=ze}else for(P=0;P<l.length;P++){if(oe=l[P],ze=oe.instance,Ke=oe.currentTarget,oe=oe.listener,ze!==m&&p.isPropagationStopped())break e;m=oe,p.currentTarget=Ke;try{m(p)}catch(ut){Lo(ut)}p.currentTarget=null,m=ze}}}}function Ni(e,t){var r=t[No];r===void 0&&(r=t[No]=new Set);var l=e+"__bubble";r.has(l)||(Z0(t,e,2,!1),r.add(l))}function ep(e,t,r){var l=0;t&&(l|=4),Z0(r,e,l,t)}var Qf="_reactListening"+Math.random().toString(36).slice(2);function tp(e){if(!e[Qf]){e[Qf]=!0,ws.forEach(function(r){r!=="selectionchange"&&(Sx.has(r)||ep(r,!1,e),ep(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qf]||(t[Qf]=!0,ep("selectionchange",!1,t))}}function Z0(e,t,r,l){switch(Cg(t)){case 2:var p=Zx;break;case 8:p=Kx;break;default:p=xp}r=p.bind(null,t,r,e),p=void 0,!wi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(p=!0),l?p!==void 0?e.addEventListener(t,r,{capture:!0,passive:p}):e.addEventListener(t,r,!0):p!==void 0?e.addEventListener(t,r,{passive:p}):e.addEventListener(t,r,!1)}function np(e,t,r,l,p){var m=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var P=l.tag;if(P===3||P===4){var oe=l.stateNode.containerInfo;if(oe===p)break;if(P===4)for(P=l.return;P!==null;){var ze=P.tag;if((ze===3||ze===4)&&P.stateNode.containerInfo===p)return;P=P.return}for(;oe!==null;){if(P=lr(oe),P===null)return;if(ze=P.tag,ze===5||ze===6||ze===26||ze===27){l=m=P;continue e}oe=oe.parentNode}}l=l.return}An(function(){var Ke=m,ut=Cn(r),yt=[];e:{var Je=Zc.get(e);if(Je!==void 0){var et=Ko,un=e;switch(e){case"keypress":if(Fo(r)===0)break e;case"keydown":case"keyup":et=pi;break;case"focusin":un="focus",et=Xi;break;case"focusout":un="blur",et=Xi;break;case"beforeblur":case"afterblur":et=Xi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Cs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=qi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=Na;break;case Ga:case Oi:case ss:et=w;break;case cl:et=Va;break;case"scroll":case"scrollend":et=Vl;break;case"wheel":et=Qo;break;case"copy":case"cut":case"paste":et=ye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Ba;break;case"toggle":case"beforetoggle":et=Is}var En=(t&4)!==0,Ra=!En&&(e==="scroll"||e==="scrollend"),qe=En?Je!==null?Je+"Capture":null:Je;En=[];for(var Be=Ke,Xe;Be!==null;){var gt=Be;if(Xe=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||Xe===null||qe===null||(gt=Hr(Be,qe),gt!=null&&En.push(cf(Be,gt,Xe))),Ra)break;Be=Be.return}0<En.length&&(Je=new et(Je,un,null,r,ut),yt.push({event:Je,listeners:En}))}}if((t&7)===0){e:{if(Je=e==="mouseover"||e==="pointerover",et=e==="mouseout"||e==="pointerout",Je&&r!==Zo&&(un=r.relatedTarget||r.fromElement)&&(lr(un)||un[ba]))break e;if((et||Je)&&(Je=ut.window===ut?ut:(Je=ut.ownerDocument)?Je.defaultView||Je.parentWindow:window,et?(un=r.relatedTarget||r.toElement,et=Ke,un=un?lr(un):null,un!==null&&(Ra=d(un),En=un.tag,un!==Ra||En!==5&&En!==27&&En!==6)&&(un=null)):(et=null,un=Ke),et!==un)){if(En=Cs,gt="onMouseLeave",qe="onMouseEnter",Be="mouse",(e==="pointerout"||e==="pointerover")&&(En=Ba,gt="onPointerLeave",qe="onPointerEnter",Be="pointer"),Ra=et==null?Je:vs(et),Xe=un==null?Je:vs(un),Je=new En(gt,Be+"leave",et,r,ut),Je.target=Ra,Je.relatedTarget=Xe,gt=null,lr(ut)===Ke&&(En=new En(qe,Be+"enter",un,r,ut),En.target=Xe,En.relatedTarget=Ra,gt=En),Ra=gt,et&&un)t:{for(En=jx,qe=et,Be=un,Xe=0,gt=qe;gt;gt=En(gt))Xe++;gt=0;for(var zn=Be;zn;zn=En(zn))gt++;for(;0<Xe-gt;)qe=En(qe),Xe--;for(;0<gt-Xe;)Be=En(Be),gt--;for(;Xe--;){if(qe===Be||Be!==null&&qe===Be.alternate){En=qe;break t}qe=En(qe),Be=En(Be)}En=null}else En=null;et!==null&&K0(yt,Je,et,En,!1),un!==null&&Ra!==null&&K0(yt,Ra,un,En,!0)}}e:{if(Je=Ke?vs(Ke):window,et=Je.nodeName&&Je.nodeName.toLowerCase(),et==="select"||et==="input"&&Je.type==="file")var ra=Ei;else if(Yl(Je))if(uo)ra=Wr;else{ra=na;var gn=gc}else et=Je.nodeName,!et||et.toLowerCase()!=="input"||Je.type!=="checkbox"&&Je.type!=="radio"?Ke&&Fr(Ke.elementType)&&(ra=Ei):ra=xc;if(ra&&(ra=ra(e,Ke))){mo(yt,ra,r,ut);break e}gn&&gn(e,Je,Ke),e==="focusout"&&Ke&&Je.type==="number"&&Ke.memoizedProps.value!=null&&ql(Je,"number",Je.value)}switch(gn=Ke?vs(Ke):window,e){case"focusin":(Yl(gn)||gn.contentEditable==="true")&&(tr=gn,Ea=Ke,fa=null);break;case"focusout":fa=Ea=tr=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,ei(yt,r,ut);break;case"selectionchange":if(ll)break;case"keydown":case"keyup":ei(yt,r,ut)}var yi;if(Us)e:{switch(e){case"compositionstart":var Ri="onCompositionStart";break e;case"compositionend":Ri="onCompositionEnd";break e;case"compositionupdate":Ri="onCompositionUpdate";break e}Ri=void 0}else gr?As(e,r)&&(Ri="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ri="onCompositionStart");Ri&&(as&&r.locale!=="ko"&&(gr||Ri!=="onCompositionStart"?Ri==="onCompositionEnd"&&gr&&(yi=Uo()):(Xn=ut,ns="value"in Xn?Xn.value:Xn.textContent,gr=!0)),gn=eh(Ke,Ri),0<gn.length&&(Ri=new Ie(Ri,e,null,r,ut),yt.push({event:Ri,listeners:gn}),yi?Ri.data=yi:(yi=er(r),yi!==null&&(Ri.data=yi)))),(yi=Fs?to(e,r):ks(e,r))&&(Ri=eh(Ke,"onBeforeInput"),0<Ri.length&&(gn=new Ie("onBeforeInput","beforeinput",null,r,ut),yt.push({event:gn,listeners:Ri}),gn.data=yi)),bx(yt,e,Ke,r,ut)}X0(yt,t)})}function cf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function eh(e,t){for(var r=t+"Capture",l=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Hr(e,r),p!=null&&l.unshift(cf(e,p,m)),p=Hr(e,t),p!=null&&l.push(cf(e,p,m))),e.tag===3)return l;e=e.return}return[]}function jx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function K0(e,t,r,l,p){for(var m=t._reactName,P=[];r!==null&&r!==l;){var oe=r,ze=oe.alternate,Ke=oe.stateNode;if(oe=oe.tag,ze!==null&&ze===l)break;oe!==5&&oe!==26&&oe!==27||Ke===null||(ze=Ke,p?(Ke=Hr(r,m),Ke!=null&&P.unshift(cf(r,Ke,ze))):p||(Ke=Hr(r,m),Ke!=null&&P.push(cf(r,Ke,ze)))),r=r.return}P.length!==0&&e.push({event:t,listeners:P})}var Tx=/\r\n?/g,Cx=/\u0000|\uFFFD/g;function J0(e){return(typeof e=="string"?e:""+e).replace(Tx,`
`).replace(Cx,"")}function Q0(e,t){return t=J0(t),J0(e)===t}function Pa(e,t,r,l,p,m){switch(r){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||fr(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&fr(e,""+l);break;case"className":ur(e,"class",l);break;case"tabIndex":ur(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(e,r,l);break;case"style":Qn(e,l,m);break;case"data":if(t!=="object"){ur(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Ze(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(t!=="input"&&Pa(e,t,"name",p.name,p,null),Pa(e,t,"formEncType",p.formEncType,p,null),Pa(e,t,"formMethod",p.formMethod,p,null),Pa(e,t,"formTarget",p.formTarget,p,null)):(Pa(e,t,"encType",p.encType,p,null),Pa(e,t,"method",p.method,p,null),Pa(e,t,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=Ze(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=vi);break;case"onScroll":l!=null&&Ni("scroll",e);break;case"onScrollEnd":l!=null&&Ni("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=Ze(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":Ni("beforetoggle",e),Ni("toggle",e),Xo(e,"popover",l);break;case"xlinkActuate":Nr(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Nr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Nr(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Nr(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Nr(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Nr(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Nr(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Nr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Nr(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xo(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Wl.get(r)||r,Xo(e,r,l))}}function ip(e,t,r,l,p,m){switch(r){case"style":Qn(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof l=="string"?fr(e,l):(typeof l=="number"||typeof l=="bigint")&&fr(e,""+l);break;case"onScroll":l!=null&&Ni("scroll",e);break;case"onScrollEnd":l!=null&&Ni("scrollend",e);break;case"onClick":l!=null&&(e.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),t=r.slice(2,p?r.length-7:void 0),m=e[la]||null,m=m!=null?m[r]:null,typeof m=="function"&&e.removeEventListener(t,m,p),typeof l=="function")){typeof m!="function"&&m!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,l,p);break e}r in e?e[r]=l:l===!0?e.setAttribute(r,""):Xo(e,r,l)}}}function ts(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ni("error",e),Ni("load",e);var l=!1,p=!1,m;for(m in r)if(r.hasOwnProperty(m)){var P=r[m];if(P!=null)switch(m){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Pa(e,t,m,P,r,null)}}p&&Pa(e,t,"srcSet",r.srcSet,r,null),l&&Pa(e,t,"src",r.src,r,null);return;case"input":Ni("invalid",e);var oe=m=P=p=null,ze=null,Ke=null;for(l in r)if(r.hasOwnProperty(l)){var ut=r[l];if(ut!=null)switch(l){case"name":p=ut;break;case"type":P=ut;break;case"checked":ze=ut;break;case"defaultChecked":Ke=ut;break;case"value":m=ut;break;case"defaultValue":oe=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(s(137,t));break;default:Pa(e,t,l,ut,r,null)}}Da(e,m,oe,ze,Ke,P,p,!1);return;case"select":Ni("invalid",e),l=P=m=null;for(p in r)if(r.hasOwnProperty(p)&&(oe=r[p],oe!=null))switch(p){case"value":m=oe;break;case"defaultValue":P=oe;break;case"multiple":l=oe;default:Pa(e,t,p,oe,r,null)}t=m,r=P,e.multiple=!!l,t!=null?Sa(e,!!l,t,!1):r!=null&&Sa(e,!!l,r,!0);return;case"textarea":Ni("invalid",e),m=p=l=null;for(P in r)if(r.hasOwnProperty(P)&&(oe=r[P],oe!=null))switch(P){case"value":l=oe;break;case"defaultValue":p=oe;break;case"children":m=oe;break;case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(91));break;default:Pa(e,t,P,oe,r,null)}rl(e,l,p,m);return;case"option":for(ze in r)if(r.hasOwnProperty(ze)&&(l=r[ze],l!=null))switch(ze){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Pa(e,t,ze,l,r,null)}return;case"dialog":Ni("beforetoggle",e),Ni("toggle",e),Ni("cancel",e),Ni("close",e);break;case"iframe":case"object":Ni("load",e);break;case"video":case"audio":for(l=0;l<lf.length;l++)Ni(lf[l],e);break;case"image":Ni("error",e),Ni("load",e);break;case"details":Ni("toggle",e);break;case"embed":case"source":case"link":Ni("error",e),Ni("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ke in r)if(r.hasOwnProperty(Ke)&&(l=r[Ke],l!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Pa(e,t,Ke,l,r,null)}return;default:if(Fr(t)){for(ut in r)r.hasOwnProperty(ut)&&(l=r[ut],l!==void 0&&ip(e,t,ut,l,r,void 0));return}}for(oe in r)r.hasOwnProperty(oe)&&(l=r[oe],l!=null&&Pa(e,t,oe,l,r,null))}function Ax(e,t,r,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,P=null,oe=null,ze=null,Ke=null,ut=null;for(et in r){var yt=r[et];if(r.hasOwnProperty(et)&&yt!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":ze=yt;default:l.hasOwnProperty(et)||Pa(e,t,et,null,l,yt)}}for(var Je in l){var et=l[Je];if(yt=r[Je],l.hasOwnProperty(Je)&&(et!=null||yt!=null))switch(Je){case"type":m=et;break;case"name":p=et;break;case"checked":Ke=et;break;case"defaultChecked":ut=et;break;case"value":P=et;break;case"defaultValue":oe=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,t));break;default:et!==yt&&Pa(e,t,Je,et,l,yt)}}wa(e,P,oe,ze,Ke,ut,m,p);return;case"select":et=P=oe=Je=null;for(m in r)if(ze=r[m],r.hasOwnProperty(m)&&ze!=null)switch(m){case"value":break;case"multiple":et=ze;default:l.hasOwnProperty(m)||Pa(e,t,m,null,l,ze)}for(p in l)if(m=l[p],ze=r[p],l.hasOwnProperty(p)&&(m!=null||ze!=null))switch(p){case"value":Je=m;break;case"defaultValue":oe=m;break;case"multiple":P=m;default:m!==ze&&Pa(e,t,p,m,l,ze)}t=oe,r=P,l=et,Je!=null?Sa(e,!!r,Je,!1):!!l!=!!r&&(t!=null?Sa(e,!!r,t,!0):Sa(e,!!r,r?[]:"",!1));return;case"textarea":et=Je=null;for(oe in r)if(p=r[oe],r.hasOwnProperty(oe)&&p!=null&&!l.hasOwnProperty(oe))switch(oe){case"value":break;case"children":break;default:Pa(e,t,oe,null,l,p)}for(P in l)if(p=l[P],m=r[P],l.hasOwnProperty(P)&&(p!=null||m!=null))switch(P){case"value":Je=p;break;case"defaultValue":et=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&Pa(e,t,P,p,l,m)}dr(e,Je,et);return;case"option":for(var un in r)if(Je=r[un],r.hasOwnProperty(un)&&Je!=null&&!l.hasOwnProperty(un))switch(un){case"selected":e.selected=!1;break;default:Pa(e,t,un,null,l,Je)}for(ze in l)if(Je=l[ze],et=r[ze],l.hasOwnProperty(ze)&&Je!==et&&(Je!=null||et!=null))switch(ze){case"selected":e.selected=Je&&typeof Je!="function"&&typeof Je!="symbol";break;default:Pa(e,t,ze,Je,l,et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var En in r)Je=r[En],r.hasOwnProperty(En)&&Je!=null&&!l.hasOwnProperty(En)&&Pa(e,t,En,null,l,Je);for(Ke in l)if(Je=l[Ke],et=r[Ke],l.hasOwnProperty(Ke)&&Je!==et&&(Je!=null||et!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(s(137,t));break;default:Pa(e,t,Ke,Je,l,et)}return;default:if(Fr(t)){for(var Ra in r)Je=r[Ra],r.hasOwnProperty(Ra)&&Je!==void 0&&!l.hasOwnProperty(Ra)&&ip(e,t,Ra,void 0,l,Je);for(ut in l)Je=l[ut],et=r[ut],!l.hasOwnProperty(ut)||Je===et||Je===void 0&&et===void 0||ip(e,t,ut,Je,l,et);return}}for(var qe in r)Je=r[qe],r.hasOwnProperty(qe)&&Je!=null&&!l.hasOwnProperty(qe)&&Pa(e,t,qe,null,l,Je);for(yt in l)Je=l[yt],et=r[yt],!l.hasOwnProperty(yt)||Je===et||Je==null&&et==null||Pa(e,t,yt,Je,l,et)}function eg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var p=r[l],m=p.transferSize,P=p.initiatorType,oe=p.duration;if(m&&oe&&eg(P)){for(P=0,oe=p.responseEnd,l+=1;l<r.length;l++){var ze=r[l],Ke=ze.startTime;if(Ke>oe)break;var ut=ze.transferSize,yt=ze.initiatorType;ut&&eg(yt)&&(ze=ze.responseEnd,P+=ut*(ze<oe?1:(oe-Ke)/(ze-Ke)))}if(--l,t+=8*(m+P)/(p.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ap=null,op=null;function th(e){return e.nodeType===9?e:e.ownerDocument}function tg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ng(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function rp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sp=null;function Nx(){var e=window.event;return e&&e.type==="popstate"?e===sp?!1:(sp=e,!0):(sp=null,!1)}var ig=typeof setTimeout=="function"?setTimeout:void 0,zx=typeof clearTimeout=="function"?clearTimeout:void 0,ag=typeof Promise=="function"?Promise:void 0,_x=typeof queueMicrotask=="function"?queueMicrotask:typeof ag<"u"?function(e){return ag.resolve(null).then(e).catch(Lx)}:ig;function Lx(e){setTimeout(function(){throw e})}function fu(e){return e==="head"}function og(e,t){var r=t,l=0;do{var p=r.nextSibling;if(e.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(p),wd(t);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")uf(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,uf(r);for(var m=r.firstChild;m;){var P=m.nextSibling,oe=m.nodeName;m[sr]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=P}}else r==="body"&&uf(e.ownerDocument.body);r=p}while(r);wd(t)}function rg(e,t){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function lp(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":lp(r),mi(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Px(e,t,r,l){for(;e.nodeType===1;){var p=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[sr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=El(e.nextSibling),e===null)break}return null}function Rx(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=El(e.nextSibling),e===null))return null;return e}function sg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=El(e.nextSibling),e===null))return null;return e}function cp(e){return e.data==="$?"||e.data==="$~"}function up(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Dx(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var l=function(){t(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function El(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var dp=null;function lg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return El(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function cg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function ug(e,t,r){switch(t=th(r),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function uf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);mi(e)}var Ol=new Map,dg=new Set;function nh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $c=ne.d;ne.d={f:Mx,r:Bx,D:Ex,C:Ox,L:Ix,m:Ux,X:Hx,S:Fx,M:qx};function Mx(){var e=$c.f(),t=Yf();return e||t}function Bx(e){var t=_i(e);t!==null&&t.tag===5&&t.type==="form"?nu(t):$c.r(e)}var md=typeof document>"u"?null:document;function fg(e,t,r){var l=md;if(l&&typeof t=="string"&&t){var p=Gi(t);p='link[rel="'+e+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),dg.has(p)||(dg.add(p),e={rel:e,crossOrigin:r,href:t},l.querySelector(p)===null&&(t=l.createElement("link"),ts(t,"link",e),xa(t),l.head.appendChild(t)))}}function Ex(e){$c.D(e),fg("dns-prefetch",e,null)}function Ox(e,t){$c.C(e,t),fg("preconnect",e,t)}function Ix(e,t,r){$c.L(e,t,r);var l=md;if(l&&e&&t){var p='link[rel="preload"][as="'+Gi(t)+'"]';t==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+Gi(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+Gi(r.imageSizes)+'"]')):p+='[href="'+Gi(e)+'"]';var m=p;switch(t){case"style":m=bd(e);break;case"script":m=vd(e)}Ol.has(m)||(e=R({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Ol.set(m,e),l.querySelector(p)!==null||t==="style"&&l.querySelector(df(m))||t==="script"&&l.querySelector(ff(m))||(t=l.createElement("link"),ts(t,"link",e),xa(t),l.head.appendChild(t)))}}function Ux(e,t){$c.m(e,t);var r=md;if(r&&e){var l=t&&typeof t.as=="string"?t.as:"script",p='link[rel="modulepreload"][as="'+Gi(l)+'"][href="'+Gi(e)+'"]',m=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=vd(e)}if(!Ol.has(m)&&(e=R({rel:"modulepreload",href:e},t),Ol.set(m,e),r.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ff(m)))return}l=r.createElement("link"),ts(l,"link",e),xa(l),r.head.appendChild(l)}}}function Fx(e,t,r){$c.S(e,t,r);var l=md;if(l&&e){var p=cr(l).hoistableStyles,m=bd(e);t=t||"default";var P=p.get(m);if(!P){var oe={loading:0,preload:null};if(P=l.querySelector(df(m)))oe.loading=5;else{e=R({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Ol.get(m))&&fp(e,r);var ze=P=l.createElement("link");xa(ze),ts(ze,"link",e),ze._p=new Promise(function(Ke,ut){ze.onload=Ke,ze.onerror=ut}),ze.addEventListener("load",function(){oe.loading|=1}),ze.addEventListener("error",function(){oe.loading|=2}),oe.loading|=4,ih(P,t,l)}P={type:"stylesheet",instance:P,count:1,state:oe},p.set(m,P)}}}function Hx(e,t){$c.X(e,t);var r=md;if(r&&e){var l=cr(r).hoistableScripts,p=vd(e),m=l.get(p);m||(m=r.querySelector(ff(p)),m||(e=R({src:e,async:!0},t),(t=Ol.get(p))&&hp(e,t),m=r.createElement("script"),xa(m),ts(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function qx(e,t){$c.M(e,t);var r=md;if(r&&e){var l=cr(r).hoistableScripts,p=vd(e),m=l.get(p);m||(m=r.querySelector(ff(p)),m||(e=R({src:e,async:!0,type:"module"},t),(t=Ol.get(p))&&hp(e,t),m=r.createElement("script"),xa(m),ts(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function hg(e,t,r,l){var p=(p=Ce.current)?nh(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=bd(r.href),r=cr(p).hoistableStyles,l=r.get(t),l||(l={type:"style",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=bd(r.href);var m=cr(p).hoistableStyles,P=m.get(e);if(P||(p=p.ownerDocument||p,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,P),(m=p.querySelector(df(e)))&&!m._p&&(P.instance=m,P.state.loading=5),Ol.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ol.set(e,r),m||Wx(p,e,r,P.state))),t&&l===null)throw Error(s(528,""));return P}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=vd(r),r=cr(p).hoistableScripts,l=r.get(t),l||(l={type:"script",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function bd(e){return'href="'+Gi(e)+'"'}function df(e){return'link[rel="stylesheet"]['+e+"]"}function pg(e){return R({},e,{"data-precedence":e.precedence,precedence:null})}function Wx(e,t,r,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ts(t,"link",r),xa(t),e.head.appendChild(t))}function vd(e){return'[src="'+Gi(e)+'"]'}function ff(e){return"script[async]"+e}function gg(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Gi(r.href)+'"]');if(l)return t.instance=l,xa(l),l;var p=R({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),xa(l),ts(l,"style",p),ih(l,r.precedence,e),t.instance=l;case"stylesheet":p=bd(r.href);var m=e.querySelector(df(p));if(m)return t.state.loading|=4,t.instance=m,xa(m),m;l=pg(r),(p=Ol.get(p))&&fp(l,p),m=(e.ownerDocument||e).createElement("link"),xa(m);var P=m;return P._p=new Promise(function(oe,ze){P.onload=oe,P.onerror=ze}),ts(m,"link",l),t.state.loading|=4,ih(m,r.precedence,e),t.instance=m;case"script":return m=vd(r.src),(p=e.querySelector(ff(m)))?(t.instance=p,xa(p),p):(l=r,(p=Ol.get(m))&&(l=R({},r),hp(l,p)),e=e.ownerDocument||e,p=e.createElement("script"),xa(p),ts(p,"link",l),e.head.appendChild(p),t.instance=p);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ih(l,r.precedence,e));return t.instance}function ih(e,t,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,m=p,P=0;P<l.length;P++){var oe=l[P];if(oe.dataset.precedence===t)m=oe;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function fp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function hp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ah=null;function xg(e,t,r){if(ah===null){var l=new Map,p=ah=new Map;p.set(r,l)}else p=ah,l=p.get(r),l||(l=new Map,p.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),p=0;p<r.length;p++){var m=r[p];if(!(m[sr]||m[Hi]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var P=m.getAttribute(t)||"";P=e+P;var oe=l.get(P);oe?oe.push(m):l.set(P,[m])}}return l}function yg(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function Vx(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function mg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function $x(e,t,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=bd(l.href),m=t.querySelector(df(p));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=oh.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=m,xa(m);return}m=t.ownerDocument||t,l=pg(l),(p=Ol.get(p))&&fp(l,p),m=m.createElement("link"),xa(m);var P=m;P._p=new Promise(function(oe,ze){P.onload=oe,P.onerror=ze}),ts(m,"link",l),r.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=oh.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var pp=0;function Yx(e,t){return e.stylesheets&&e.count===0&&sh(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+t);0<e.imgBytes&&pp===0&&(pp=62500*kx());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>pp?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(p)}}:null}function oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rh=null;function sh(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rh=new Map,t.forEach(Gx,e),rh=null,oh.call(e))}function Gx(e,t){if(!(t.state.loading&4)){var r=rh.get(e);if(r)var l=r.get(null);else{r=new Map,rh.set(e,r);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var P=p[m];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(r.set(P.dataset.precedence,P),l=P)}l&&r.set(null,l)}p=t.instance,P=p.getAttribute("data-precedence"),m=r.get(P)||l,m===l&&r.set(null,p),r.set(P,p),this.count++,l=oh.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),t.state.loading|=4}}var hf={$$typeof:se,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Xx(e,t,r,l,p,m,P,oe,ze){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Co(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Co(0),this.hiddenUpdates=Co(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function bg(e,t,r,l,p,m,P,oe,ze,Ke,ut,yt){return e=new Xx(e,t,r,P,ze,Ke,ut,yt,oe),t=1,m===!0&&(t|=24),m=io(3,null,null,t),e.current=m,m.stateNode=e,t=Jl(),t.refCount++,e.pooledCache=t,t.refCount++,m.memoizedState={element:l,isDehydrated:r,cache:t},Pt(m),e}function vg(e){return e?(e=no,e):no}function wg(e,t,r,l,p,m){p=vg(p),l.context===null?l.context=p:l.pendingContext=p,l=Nn(t),l.payload={element:r},m=m===void 0?null:m,m!==null&&(l.callback=m),r=Wn(e,l,t),r!==null&&(il(r,e,t),$i(r,e,t))}function Sg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gp(e,t){Sg(e,t),(e=e.alternate)&&Sg(e,t)}function jg(e){if(e.tag===13||e.tag===31){var t=Yr(e,67108864);t!==null&&il(t,e,67108864),gp(e,67108864)}}function Tg(e){if(e.tag===13||e.tag===31){var t=wl();t=si(t);var r=Yr(e,t);r!==null&&il(r,e,t),gp(e,t)}}var lh=!0;function Zx(e,t,r,l){var p=te.T;te.T=null;var m=ne.p;try{ne.p=2,xp(e,t,r,l)}finally{ne.p=m,te.T=p}}function Kx(e,t,r,l){var p=te.T;te.T=null;var m=ne.p;try{ne.p=8,xp(e,t,r,l)}finally{ne.p=m,te.T=p}}function xp(e,t,r,l){if(lh){var p=yp(l);if(p===null)np(e,t,l,ch,r),Ag(e,l);else if(Qx(p,e,t,r,l))l.stopPropagation();else if(Ag(e,l),t&4&&-1<Jx.indexOf(e)){for(;p!==null;){var m=_i(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var P=fn(m.pendingLanes);if(P!==0){var oe=m;for(oe.pendingLanes|=2,oe.entangledLanes|=2;P;){var ze=1<<31-nt(P);oe.entanglements[1]|=ze,P&=~ze}zc(m),(ga&6)===0&&(Vf=Un()+500,sf(0))}}break;case 31:case 13:oe=Yr(m,2),oe!==null&&il(oe,m,2),Yf(),gp(m,2)}if(m=yp(l),m===null&&np(e,t,l,ch,r),m===p)break;p=m}p!==null&&l.stopPropagation()}else np(e,t,l,null,r)}}function yp(e){return e=Cn(e),mp(e)}var ch=null;function mp(e){if(ch=null,e=lr(e),e!==null){var t=d(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=v(t),e!==null)return e;e=null}else if(r===31){if(e=g(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ch=e,null}function Cg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ct()){case Mt:return 2;case ri:return 8;case ht:case St:return 32;case Rn:return 268435456;default:return 32}default:return 32}}var bp=!1,hu=null,pu=null,gu=null,pf=new Map,gf=new Map,xu=[],Jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ag(e,t){switch(e){case"focusin":case"focusout":hu=null;break;case"dragenter":case"dragleave":pu=null;break;case"mouseover":case"mouseout":gu=null;break;case"pointerover":case"pointerout":pf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gf.delete(t.pointerId)}}function xf(e,t,r,l,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:r,eventSystemFlags:l,nativeEvent:m,targetContainers:[p]},t!==null&&(t=_i(t),t!==null&&jg(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,p!==null&&t.indexOf(p)===-1&&t.push(p),e)}function Qx(e,t,r,l,p){switch(t){case"focusin":return hu=xf(hu,e,t,r,l,p),!0;case"dragenter":return pu=xf(pu,e,t,r,l,p),!0;case"mouseover":return gu=xf(gu,e,t,r,l,p),!0;case"pointerover":var m=p.pointerId;return pf.set(m,xf(pf.get(m)||null,e,t,r,l,p)),!0;case"gotpointercapture":return m=p.pointerId,gf.set(m,xf(gf.get(m)||null,e,t,r,l,p)),!0}return!1}function kg(e){var t=lr(e.target);if(t!==null){var r=d(t);if(r!==null){if(t=r.tag,t===13){if(t=v(r),t!==null){e.blockedOn=t,bs(e.priority,function(){Tg(r)});return}}else if(t===31){if(t=g(r),t!==null){e.blockedOn=t,bs(e.priority,function(){Tg(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=yp(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);Zo=l,r.target.dispatchEvent(l),Zo=null}else return t=_i(r),t!==null&&jg(t),e.blockedOn=r,!1;t.shift()}return!0}function Ng(e,t,r){uh(e)&&r.delete(t)}function ey(){bp=!1,hu!==null&&uh(hu)&&(hu=null),pu!==null&&uh(pu)&&(pu=null),gu!==null&&uh(gu)&&(gu=null),pf.forEach(Ng),gf.forEach(Ng)}function dh(e,t){e.blockedOn===t&&(e.blockedOn=null,bp||(bp=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,ey)))}var fh=null;function zg(e){fh!==e&&(fh=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){fh===e&&(fh=null);for(var t=0;t<e.length;t+=3){var r=e[t],l=e[t+1],p=e[t+2];if(typeof l!="function"){if(mp(l||r)===null)continue;break}var m=_i(r);m!==null&&(e.splice(t,3),t-=3,Hd(m,{pending:!0,data:p,method:r.method,action:l},l,p))}}))}function wd(e){function t(ze){return dh(ze,e)}hu!==null&&dh(hu,e),pu!==null&&dh(pu,e),gu!==null&&dh(gu,e),pf.forEach(t),gf.forEach(t);for(var r=0;r<xu.length;r++){var l=xu[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<xu.length&&(r=xu[0],r.blockedOn===null);)kg(r),r.blockedOn===null&&xu.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var p=r[l],m=r[l+1],P=p[la]||null;if(typeof m=="function")P||zg(r);else if(P){var oe=null;if(m&&m.hasAttribute("formAction")){if(p=m,P=m[la]||null)oe=P.formAction;else if(mp(p)!==null)continue}else oe=P.action;typeof oe=="function"?r[l+1]=oe:(r.splice(l,3),l-=3),zg(r)}}}function _g(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(P){return p=P})},focusReset:"manual",scroll:"manual"})}function t(){p!==null&&(p(),p=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),p!==null&&(p(),p=null)}}}function vp(e){this._internalRoot=e}hh.prototype.render=vp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var r=t.current,l=wl();wg(r,l,e,t,null,null)},hh.prototype.unmount=vp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wg(e.current,2,null,e,null,null),Yf(),t[ba]=null}};function hh(e){this._internalRoot=e}hh.prototype.unstable_scheduleHydration=function(e){if(e){var t=zi();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xu.length&&t!==0&&t<xu[r].priority;r++);xu.splice(r,0,e),r===0&&kg(e)}};var Lg=n.version;if(Lg!=="19.2.0")throw Error(s(527,Lg,"19.2.0"));ne.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=b(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var ty={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{Tn=ph.inject(ty),ln=ph}catch{}}return mf.createRoot=function(e,t){if(!u(e))throw Error(s(299));var r=!1,l="",p=Xd,m=Ef,P=Zd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(p=t.onUncaughtError),t.onCaughtError!==void 0&&(m=t.onCaughtError),t.onRecoverableError!==void 0&&(P=t.onRecoverableError)),t=bg(e,1,!1,null,null,r,l,null,p,m,P,_g),e[ba]=t.current,tp(e),new vp(t)},mf.hydrateRoot=function(e,t,r){if(!u(e))throw Error(s(299));var l=!1,p="",m=Xd,P=Ef,oe=Zd,ze=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(P=r.onCaughtError),r.onRecoverableError!==void 0&&(oe=r.onRecoverableError),r.formState!==void 0&&(ze=r.formState)),t=bg(e,1,!0,t,r??null,l,p,ze,m,P,oe,_g),t.context=vg(null),r=t.current,l=wl(),l=si(l),p=Nn(l),p.callback=null,Wn(r,p,l),r=l,t.current.lanes=r,Kt(t,r),zc(t),e[ba]=t.current,tp(e),new hh(t)},mf.version="19.2.0",mf}var Fg;function fy(){if(Fg)return jp.exports;Fg=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),jp.exports=dy(),jp.exports}var hy=fy();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gy=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,a,s)=>s?s.toUpperCase():a.toLowerCase()),Hg=o=>{const n=gy(o);return n.charAt(0).toUpperCase()+n.slice(1)},d2=(...o)=>o.filter((n,a,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===a).join(" ").trim(),xy=o=>{for(const n in o)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=H.forwardRef(({color:o="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:u="",children:d,iconNode:v,...g},f)=>H.createElement("svg",{ref:f,...yy,width:n,height:n,stroke:o,strokeWidth:s?Number(a)*24/Number(n):a,className:d2("lucide",u),...!d&&!xy(g)&&{"aria-hidden":"true"},...g},[...v.map(([b,S])=>H.createElement(b,S)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=(o,n)=>{const a=H.forwardRef(({className:s,...u},d)=>H.createElement(my,{ref:d,iconNode:n,className:d2(`lucide-${py(Hg(o))}`,`lucide-${o}`,s),...u}));return a.displayName=Hg(o),a};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],vy=f2("mouse-pointer",by);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Sy=f2("pen-line",wy),kp="#2CA02C",jy="#F0E442",Ty="#00BFC4",Np="#000000",Cy="#00008b",zp="#FF0000",h2={DEFAULT_SIZE:18},_f={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},"Film Capacitor":{prefix:["C","CF"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},Ay={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Film:["Film Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},_p={DEFAULT_SIZE:18},p2={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function Yi(o){return p2[o]?.validUnits||[]}function Xt(o){return p2[o]?.defaultUnit||""}function Wu(o){return o.includes(" ")?o:o.replace(/([a-z])([A-Z])/g,"$1 $2")}let Bs=1;const Ul=new Set;function lc(){const o=Bs;if(Bs++,Ul.has(o)){for(console.error(`CRITICAL ERROR: Duplicate Node ID ${o} would be allocated!`),console.error(`Current counter: ${Bs}, Allocated IDs count: ${Ul.size}`);Ul.has(Bs);)Bs++;const n=Bs;return Bs++,Ul.add(n),console.error(`Recovered by allocating ID ${n} instead`),n}return Ul.add(o),o}function Lp(o){o<1&&(console.warn(`setPointIdCounter called with invalid value ${o}, using 1`),o=1),Bs=o,Ul.clear()}function qg(){return Bs}function Wg(){Bs=1,Ul.clear()}function Pp(o){o>0&&(Ul.add(o),o>=Bs&&(Bs=o+1))}function gh(o){if(o>0&&Ul.has(o))if(Ul.delete(o),Ul.size>0){const n=Math.max(...Array.from(Ul));n<Bs&&(Bs=Math.max(1,n+1))}else Bs=1}function ky(o="id"){return`${o}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function Vg(o){return Math.round(o*1e4)/1e4}function Di(o){return{x:Vg(o.x),y:Vg(o.y)}}function Ny(o){return _f[o]?.defaultPins||2}function n0(o){return(_f[o]?.prefix||["?"])[0]}function zy(o,n,a,s,u,d=h2.DEFAULT_SIZE,v=[],g=Cf(),f=!0){let b="";if(f){const q=n0(o),T=Ly(q,v,g);b=`${q}${T}`}const S={id:ky("comp"),componentType:o,designator:b,layer:n,x:a,y:s,color:u,size:d,pinCount:Ny(o),pinConnections:[],orientation:0};switch(S.pinConnections=new Array(S.pinCount).fill(""),(o==="Electrolytic Capacitor"||o==="Diode"||o==="Battery"||o==="ZenerDiode")&&(S.pinPolarities=new Array(S.pinCount).fill("")),o){case"Battery":return{...S,componentType:"Battery"};case"Capacitor":return{...S,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...S,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Film Capacitor":return{...S,componentType:"Film Capacitor",filmType:"Polyester"};case"Diode":return{...S,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...S,componentType:"Fuse"};case"FerriteBead":return{...S,componentType:"FerriteBead"};case"Connector":return{...S,componentType:"Connector",gender:"N/A"};case"Jumper":return{...S,componentType:"Jumper"};case"Relay":return{...S,componentType:"Relay"};case"Inductor":return{...S,componentType:"Inductor"};case"Speaker":return{...S,componentType:"Speaker"};case"Motor":return{...S,componentType:"Motor"};case"PowerSupply":return{...S,componentType:"PowerSupply"};case"Transistor":return{...S,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...S,componentType:"Resistor"};case"ResistorNetwork":return{...S,componentType:"ResistorNetwork"};case"Thermistor":return{...S,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...S,componentType:"Switch"};case"Transformer":return{...S,componentType:"Transformer"};case"TestPoint":return{...S,componentType:"TestPoint"};case"IntegratedCircuit":return{...S,componentType:"IntegratedCircuit"};case"VacuumTube":return{...S,componentType:"VacuumTube"};case"VariableResistor":return{...S,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...S,componentType:"Crystal"};case"ZenerDiode":return{...S,componentType:"ZenerDiode"};default:return{...S,componentType:"Resistor"}}}function i0(o,n,a){const s=o.componentType==="Electrolytic Capacitor"||o.componentType==="Diode"||o.componentType==="Battery"||o.componentType==="ZenerDiode",u=o.componentType==="Capacitor"&&"dielectric"in o&&o.dielectric==="Tantalum";if(!(s||u)||o.pinCount!==2||!(n.length===2&&n[0]&&n[0].trim()!==""&&n[1]&&n[1].trim()!==""))return null;const v=q=>{const T=parseInt(q,10);if(isNaN(T))return null;for(const V of a)if((V.type==="via"||V.type==="pad")&&V.points.length>0){const X=V.points[0];if(X.id===T)return{x:X.x,y:X.y}}return null},g=v(n[0]),f=v(n[1]);if(!g||!f)return null;const b=Math.hypot(o.x-g.x,o.y-g.y),S=Math.hypot(o.x-f.x,o.y-f.y),R=["",""];return b<S?(R[0]="-",R[1]="+"):(R[0]="+",R[1]="-"),R}function Cf(){return{}}function _y(o){}function Ly(o,n,a){let s=0;for(const d of n)if(d.designator){const v=d.designator.match(new RegExp(`^${o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(v){const g=parseInt(v[1],10);g>s&&(s=g)}}const u=a[o]||0;return Math.max(s,u)+1}function Py(o,n,a){const s={...a};return s[o]=Math.max(s[o]||0,n),s}function Ry(){const o=document.createElement("canvas"),n=24;o.width=n,o.height=n;const a=o.getContext("2d");a.strokeStyle="#000",a.lineWidth=3,a.lineCap="round";const s=n/2,u=8;return a.beginPath(),a.moveTo(s,s-u),a.lineTo(s,s-2),a.moveTo(s,s+2),a.lineTo(s,s+u),a.moveTo(s-u,s),a.lineTo(s-2,s),a.moveTo(s+2,s),a.lineTo(s+u,s),a.stroke(),`url(${o.toDataURL()}) ${s} ${s}, crosshair`}function Dy(o){const n=document.createElement("canvas"),a=Math.max(12,Math.min(o,32)),u=a+4*2;n.width=u,n.height=u;const d=n.getContext("2d"),v=u/2,g=u/2,f=a/2;return d.fillStyle="#FFFF00",d.strokeStyle="#000000",d.lineWidth=2,d.beginPath(),d.moveTo(v,g-f),d.lineTo(v+f,g),d.lineTo(v,g+f),d.lineTo(v-f,g),d.closePath(),d.fill(),d.stroke(),`url(${n.toDataURL()}) ${v} ${g}, crosshair`}function $g(){const o=new Date,n=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),s=String(o.getDate()).padStart(2,"0"),u=String(o.getHours()).padStart(2,"0"),d=String(o.getMinutes()).padStart(2,"0"),v=String(o.getSeconds()).padStart(2,"0");return`${n}_${a}_${s}-${u}-${d}-${v}`}function Sd(o){let n=o.replace(/\.json$/i,""),a="";for(;a!==n;)a=n,n=n.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),n=n.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return n}function di(o,n,a,s){if(n==="power"){const d=o[n]||"";return typeof d=="string"&&d.trim()!==""?{value:d.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(o[n]!==void 0||o[a]!==void 0)return{value:o[n]||"",unit:o[a]||s};const u=o[n]||"";return typeof u=="string"&&u.trim()!==""?g2(u):{value:"",unit:s}}function g2(o){if(!o||o.trim()==="")return{value:"",unit:""};const n=o.trim(),a=n.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(a)return{value:a[1],unit:a[2]||""};const s=n.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return s?{value:s[1],unit:s[2]||""}:{value:n,unit:""}}function bf(o,n){return!o||o.trim()===""?"":!n||n.trim()===""?o.trim():`${o.trim()}${n.trim()}`}function My(){const[o,n]=H.useState([]),[a,s]=H.useState([]),[u,d]=H.useState(null),[v,g]=H.useState(null),[f,b]=H.useState(null),[S,R]=H.useState(!1),[q,T]=H.useState(null),V=H.useCallback((se,ee)=>{ee==="top"?n(J=>[...J,se]):s(J=>[...J,se])},[]),X=H.useCallback((se,ee,J)=>{J==="top"?n($=>$.map(I=>I.id===se?{...I,...ee}:I)):s($=>$.map(I=>I.id===se?{...I,...ee}:I))},[]),L=H.useCallback((se,ee)=>{ee==="top"?n(J=>J.filter($=>$.id!==se)):s(J=>J.filter($=>$.id!==se))},[]),D=H.useCallback((se,ee)=>{const J=se.designator||"",$=se.abbreviation||(J.length>0?J.charAt(0).toUpperCase():""),I={visible:!0,layer:ee,id:se.id,designator:J,abbreviation:$,manufacturer:"manufacturer"in se&&se.manufacturer||"",partNumber:"partNumber"in se&&se.partNumber||"",pinCount:se.pinCount,x:se.x,y:se.y,orientation:se.orientation??0,description:se.description||""};if(se.componentType==="Resistor"){const F=se,O=di(F,"resistance","resistanceUnit",Xt("resistance"));I.resistance=O.value,I.resistanceUnit=O.unit;const he=di(F,"power","powerUnit","W");I.power=he.value||"1/4",I.tolerance=F.tolerance||"5%"}else if(se.componentType==="Capacitor"){const F=se,O=di(F,"capacitance","capacitanceUnit",Xt("capacitance"));I.capacitance=O.value,I.capacitanceUnit=O.unit;const he=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=he.value,I.voltageUnit=he.unit,I.tolerance=F.tolerance||"10%",I.dielectric=F.dielectric||"Ceramic"}else if(se.componentType==="Electrolytic Capacitor"){const F=se,O=di(F,"capacitance","capacitanceUnit",Xt("capacitance"));I.capacitance=O.value,I.capacitanceUnit=O.unit;const he=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=he.value,I.voltageUnit=he.unit,I.tolerance=F.tolerance||"20%",I.polarityCapacitor=F.polarity||"Positive";const N=di(F,"esr","esrUnit",Xt("esr"));I.esr=N.value,I.esrUnit=N.unit,I.temperature=F.temperature||""}else if(se.componentType==="Film Capacitor"){const F=se,O=di(F,"capacitance","capacitanceUnit",Xt("capacitance"));I.capacitance=O.value,I.capacitanceUnit=O.unit;const he=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=he.value,I.voltageUnit=he.unit,I.tolerance=F.tolerance||"10%",I.filmType=F.filmType||"Polyester"}else if(se.componentType==="Diode"){const F=se;I.diodeType=F.diodeType||"Standard";const O=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=O.value,I.voltageUnit=O.unit;const he=di(F,"current","currentUnit",Xt("current"));I.current=he.value,I.currentUnit=he.unit,I.ledColor=F.ledColor||""}else if(se.componentType==="Battery"){const F=se,O=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=O.value,I.voltageUnit=O.unit;const he=di(F,"capacity","capacityUnit",Xt("capacity"));I.capacity=he.value,I.capacityUnit=he.unit,I.chemistry=F.chemistry||"Li-ion"}else if(se.componentType==="Fuse"){const F=se,O=di(F,"current","currentUnit",Xt("current"));I.current=O.value,I.currentUnit=O.unit;const he=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=he.value,I.voltageUnit=he.unit,I.fuseType=F.fuseType||"Fast-blow"}else if(se.componentType==="FerriteBead"){const F=se,O=di(F,"impedance","impedanceUnit",Xt("impedance"));I.impedance=O.value,I.impedanceUnit=O.unit;const he=di(F,"current","currentUnit",Xt("current"));I.current=he.value,I.currentUnit=he.unit}else if(se.componentType==="Connector"){const F=se;I.connectorType=F.connectorType||"",I.gender=F.gender||"N/A"}else if(se.componentType==="Jumper"){const F=se;I.positions=F.positions||3}else if(se.componentType==="Relay"){const F=se,O=di(F,"coilVoltage","coilVoltageUnit",Xt("coilVoltage"));I.coilVoltage=O.value,I.coilVoltageUnit=O.unit,I.contactType=F.contactType||"SPST";const he=di(F,"current","currentUnit",Xt("current"));I.current=he.value,I.currentUnit=he.unit}else if(se.componentType==="Inductor"){const F=se,O=di(F,"inductance","inductanceUnit",Xt("inductance"));I.inductance=O.value,I.inductanceUnit=O.unit;const he=di(F,"current","currentUnit",Xt("current"));I.current=he.value,I.currentUnit=he.unit;const N=di(F,"resistance","resistanceUnit",Xt("resistance"));I.resistance=N.value,I.resistanceUnit=N.unit}else if(se.componentType==="Speaker"){const F=se,O=di(F,"impedance","impedanceUnit",Xt("impedance"));I.impedance=O.value,I.impedanceUnit=O.unit;const he=di(F,"power","powerUnit","W");I.power=he.value||"1"}else if(se.componentType==="Motor"){const F=se;I.motorType=F.motorType||"DC";const O=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=O.value,I.voltageUnit=O.unit;const he=di(F,"current","currentUnit",Xt("current"));I.current=he.value,I.currentUnit=he.unit}else if(se.componentType==="PowerSupply"){const F=se,O=di(F,"inputVoltage","inputVoltageUnit",Xt("inputVoltage"));I.inputVoltage=O.value,I.inputVoltageUnit=O.unit;const he=di(F,"outputVoltage","outputVoltageUnit",Xt("outputVoltage"));I.outputVoltage=he.value,I.outputVoltageUnit=he.unit;const N=di(F,"current","currentUnit",Xt("current"));I.current=N.value,I.currentUnit=N.unit}else if(se.componentType==="Transistor"){const F=se;I.transistorType=F.transistorType||"BJT",I.polarity=F.polarity||"NPN";const O=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=O.value,I.voltageUnit=O.unit;const he=di(F,"current","currentUnit",Xt("current"));I.current=he.value,I.currentUnit=he.unit}else if(se.componentType==="ResistorNetwork"){const F=se,O=di(F,"resistance","resistanceUnit",Xt("resistance"));I.resistance=O.value,I.resistanceUnit=O.unit,I.configuration=F.configuration||""}else if(se.componentType==="Thermistor"){const F=se,O=di(F,"resistance","resistanceUnit",Xt("resistance"));I.resistance=O.value,I.resistanceUnit=O.unit,I.thermistorType=F.thermistorType||"NTC",I.beta=F.beta||""}else if(se.componentType==="Switch"){const F=se;I.switchType=F.switchType||"Toggle";const O=di(F,"current","currentUnit",Xt("current"));I.current=O.value,I.currentUnit=O.unit;const he=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=he.value,I.voltageUnit=he.unit}else if(se.componentType==="Transformer"){const F=se,O=di(F,"primaryVoltage","primaryVoltageUnit",Xt("primaryVoltage"));I.primaryVoltage=O.value,I.primaryVoltageUnit=O.unit;const he=di(F,"secondaryVoltage","secondaryVoltageUnit",Xt("secondaryVoltage"));I.secondaryVoltage=he.value,I.secondaryVoltageUnit=he.unit;const N=di(F,"power","powerUnit",Xt("power"));I.power=N.value||"1",I.turns=F.turns||""}else if(se.componentType==="TestPoint"){const F=se;I.signal=F.signal||""}else if(se.componentType==="IntegratedCircuit"){const F=se;I.description=F.description||se.designator||"",I.datasheet=F.datasheet||"",I.icType=F.icType||"Op-Amp"}else if(se.componentType==="VacuumTube"){const F=se;I.tubeType=F.tubeType||""}else if(se.componentType==="VariableResistor"){const F=se;I.vrType=F.vrType||"Potentiometer";const O=di(F,"resistance","resistanceUnit",Xt("resistance"));I.resistance=O.value,I.resistanceUnit=O.unit;const he=di(F,"power","powerUnit",Xt("power"));I.power=he.value||"1/4",I.taper=F.taper||""}else if(se.componentType==="Crystal"){const F=se;I.frequency=F.frequency||"",I.loadCapacitance=F.loadCapacitance||"",I.tolerance=F.tolerance||""}else if(se.componentType==="ZenerDiode"){const F=se,O=di(F,"voltage","voltageUnit",Xt("voltage"));I.voltage=O.value,I.voltageUnit=O.unit;const he=di(F,"power","powerUnit",Xt("power"));I.power=he.value||"1/4",I.tolerance=F.tolerance||"5%"}d(I)},[]),ve=H.useCallback(()=>{d(null),g(null)},[]);return{componentsTop:o,setComponentsTop:n,componentsBottom:a,setComponentsBottom:s,componentEditor:u,setComponentEditor:d,connectingPin:v,setConnectingPin:g,componentDialogPosition:f,setComponentDialogPosition:b,isDraggingDialog:S,setIsDraggingDialog:R,dialogDragOffset:q,setDialogDragOffset:T,addComponent:V,updateComponent:X,removeComponent:L,openComponentEditor:D,closeComponentEditor:ve}}function vf(o){return{resistance:"",capacitance:"F",inductance:"H",voltage:"V",current:"A",power:"W",impedance:"",capacity:"mAh",esr:"",coilVoltage:"V",inputVoltage:"V",outputVoltage:"V"}[o]||""}function wf(o,n,a,s){if(n==="power"){const d=o[n]||"";return typeof d=="string"&&d.trim()!==""?{value:d.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(o[n]!==void 0||o[a]!==void 0)return{value:o[n]||"",unit:o[a]||s};const u=o[n]||"";return typeof u=="string"&&u.trim()!==""?g2(u):{value:"",unit:s}}function By(o){if(o.componentType==="Resistor"&&"resistance"in o){const{value:s,unit:u}=wf(o,"resistance","resistanceUnit",vf("resistance"));if(s&&s.trim()!=="")return bf(s,u)}if(o.componentType==="Capacitor"&&"capacitance"in o){const{value:s,unit:u}=wf(o,"capacitance","capacitanceUnit",vf("capacitance"));if(s&&s.trim()!=="")return bf(s,u)}if(o.componentType==="Electrolytic Capacitor"&&"capacitance"in o){const{value:s,unit:u}=wf(o,"capacitance","capacitanceUnit",vf("capacitance"));if(s&&s.trim()!=="")return bf(s,u)}if(o.componentType==="Film Capacitor"&&"capacitance"in o){const{value:s,unit:u}=wf(o,"capacitance","capacitanceUnit",vf("capacitance"));if(s&&s.trim()!=="")return bf(s,u)}if(o.componentType==="Inductor"&&"inductance"in o){const{value:s,unit:u}=wf(o,"inductance","inductanceUnit",vf("inductance"));if(s&&s.trim()!=="")return bf(s,u)}const n=o.partName?.trim();if(n&&n!=="")return n;const a=o.partNumber?.trim();return a&&a!==""?a:Wu(o.componentType)}function Ey(o,n,a){const s=[...o,...n],u=s.length,d=new Map;for(const g of s){const f=Wu(g.componentType),b=By(g),S=`${f}|${b}`;if(!d.has(S)){const q=o.some(X=>X.id===g.id),T=n.some(X=>X.id===g.id),V=q&&T?"both":q?"top":"bottom";d.set(S,{componentType:f,value:b,quantity:0,designators:[],packageType:g.packageType,manufacturer:g.manufacturer,partNumber:g.partNumber,description:g.description,notes:g.notes,layer:V})}const R=d.get(S);R.quantity++,g.designator&&g.designator.trim()!==""&&R.designators.push(g.designator.trim())}const v=Array.from(d.values()).sort((g,f)=>g.componentType!==f.componentType?g.componentType.localeCompare(f.componentType):g.value.localeCompare(f.value));return{version:"1.0",exportedAt:new Date().toISOString(),projectName:a,totalComponents:u,uniqueComponents:v.length,items:v}}const Oy="modulepreload",Iy=function(o){return"/PCB_Reverse_Engineering_Tool/"+o},Yg={},Rp=function(n,a,s){let u=Promise.resolve();if(a&&a.length>0){let f=function(b){return Promise.all(b.map(S=>Promise.resolve(S).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),g=v?.nonce||v?.getAttribute("nonce");u=f(a.map(b=>{if(b=Iy(b),b in Yg)return;Yg[b]=!0;const S=b.endsWith(".css"),R=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${R}`))return;const q=document.createElement("link");if(q.rel=S?"stylesheet":Oy,S||(q.as="script"),q.crossOrigin="",q.href=b,g&&q.setAttribute("nonce",g),document.head.appendChild(q),S)return new Promise((T,V)=>{q.addEventListener("load",T),q.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(v){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=v,window.dispatchEvent(g),!g.defaultPrevented)throw v}return u.then(v=>{for(const g of v||[])g.status==="rejected"&&d(g.reason);return n().catch(d)})};function ka(o){"@babel/helpers - typeof";return ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ka(o)}var uc=Uint8Array,jl=Uint16Array,x0=Int32Array,y0=new uc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),m0=new uc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gg=new uc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),x2=function(o,n){for(var a=new jl(31),s=0;s<31;++s)a[s]=n+=1<<o[s-1];for(var u=new x0(a[30]),s=1;s<30;++s)for(var d=a[s];d<a[s+1];++d)u[d]=d-a[s]<<5|s;return{b:a,r:u}},y2=x2(y0,2),Uy=y2.b,a0=y2.r;Uy[28]=258,a0[258]=28;var Fy=x2(m0,0),Xg=Fy.r,o0=new jl(32768);for(var so=0;so<32768;++so){var mu=(so&43690)>>1|(so&21845)<<1;mu=(mu&52428)>>2|(mu&13107)<<2,mu=(mu&61680)>>4|(mu&3855)<<4,o0[so]=((mu&65280)>>8|(mu&255)<<8)>>1}var Af=(function(o,n,a){for(var s=o.length,u=0,d=new jl(n);u<s;++u)o[u]&&++d[o[u]-1];var v=new jl(n);for(u=1;u<n;++u)v[u]=v[u-1]+d[u-1]<<1;var g;if(a){g=new jl(1<<n);var f=15-n;for(u=0;u<s;++u)if(o[u])for(var b=u<<4|o[u],S=n-o[u],R=v[o[u]-1]++<<S,q=R|(1<<S)-1;R<=q;++R)g[o0[R]>>f]=b}else for(g=new jl(s),u=0;u<s;++u)o[u]&&(g[u]=o0[v[o[u]-1]++]>>15-o[u]);return g}),Vu=new uc(288);for(var so=0;so<144;++so)Vu[so]=8;for(var so=144;so<256;++so)Vu[so]=9;for(var so=256;so<280;++so)Vu[so]=7;for(var so=280;so<288;++so)Vu[so]=8;var Ph=new uc(32);for(var so=0;so<32;++so)Ph[so]=5;var Hy=Af(Vu,9,0),qy=Af(Ph,5,0),m2=function(o){return(o+7)/8|0},Wy=function(o,n,a){return(a==null||a>o.length)&&(a=o.length),new uc(o.subarray(n,a))},Yc=function(o,n,a){a<<=n&7;var s=n/8|0;o[s]|=a,o[s+1]|=a>>8},Sf=function(o,n,a){a<<=n&7;var s=n/8|0;o[s]|=a,o[s+1]|=a>>8,o[s+2]|=a>>16},Dp=function(o,n){for(var a=[],s=0;s<o.length;++s)o[s]&&a.push({s,f:o[s]});var u=a.length,d=a.slice();if(!u)return{t:v2,l:0};if(u==1){var v=new uc(a[0].s+1);return v[a[0].s]=1,{t:v,l:1}}a.sort(function(J,$){return J.f-$.f}),a.push({s:-1,f:25001});var g=a[0],f=a[1],b=0,S=1,R=2;for(a[0]={s:-1,f:g.f+f.f,l:g,r:f};S!=u-1;)g=a[a[b].f<a[R].f?b++:R++],f=a[b!=S&&a[b].f<a[R].f?b++:R++],a[S++]={s:-1,f:g.f+f.f,l:g,r:f};for(var q=d[0].s,s=1;s<u;++s)d[s].s>q&&(q=d[s].s);var T=new jl(q+1),V=r0(a[S-1],T,0);if(V>n){var s=0,X=0,L=V-n,D=1<<L;for(d.sort(function($,I){return T[I.s]-T[$.s]||$.f-I.f});s<u;++s){var ve=d[s].s;if(T[ve]>n)X+=D-(1<<V-T[ve]),T[ve]=n;else break}for(X>>=L;X>0;){var se=d[s].s;T[se]<n?X-=1<<n-T[se]++-1:++s}for(;s>=0&&X;--s){var ee=d[s].s;T[ee]==n&&(--T[ee],++X)}V=n}return{t:new uc(T),l:V}},r0=function(o,n,a){return o.s==-1?Math.max(r0(o.l,n,a+1),r0(o.r,n,a+1)):n[o.s]=a},Zg=function(o){for(var n=o.length;n&&!o[--n];);for(var a=new jl(++n),s=0,u=o[0],d=1,v=function(f){a[s++]=f},g=1;g<=n;++g)if(o[g]==u&&g!=n)++d;else{if(!u&&d>2){for(;d>138;d-=138)v(32754);d>2&&(v(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(v(u),--d;d>6;d-=6)v(8304);d>2&&(v(d-3<<5|8208),d=0)}for(;d--;)v(u);d=1,u=o[g]}return{c:a.subarray(0,s),n}},jf=function(o,n){for(var a=0,s=0;s<n.length;++s)a+=o[s]*n[s];return a},b2=function(o,n,a){var s=a.length,u=m2(n+2);o[u]=s&255,o[u+1]=s>>8,o[u+2]=o[u]^255,o[u+3]=o[u+1]^255;for(var d=0;d<s;++d)o[u+d+4]=a[d];return(u+4+s)*8},Kg=function(o,n,a,s,u,d,v,g,f,b,S){Yc(n,S++,a),++u[256];for(var R=Dp(u,15),q=R.t,T=R.l,V=Dp(d,15),X=V.t,L=V.l,D=Zg(q),ve=D.c,se=D.n,ee=Zg(X),J=ee.c,$=ee.n,I=new jl(19),F=0;F<ve.length;++F)++I[ve[F]&31];for(var F=0;F<J.length;++F)++I[J[F]&31];for(var O=Dp(I,7),he=O.t,N=O.l,C=19;C>4&&!he[Gg[C-1]];--C);var re=b+5<<3,ie=jf(u,Vu)+jf(d,Ph)+v,fe=jf(u,q)+jf(d,X)+v+14+3*C+jf(I,he)+2*I[16]+3*I[17]+7*I[18];if(f>=0&&re<=ie&&re<=fe)return b2(n,S,o.subarray(f,f+b));var te,ne,pe,Ne;if(Yc(n,S,1+(fe<ie)),S+=2,fe<ie){te=Af(q,T,0),ne=q,pe=Af(X,L,0),Ne=X;var me=Af(he,N,0);Yc(n,S,se-257),Yc(n,S+5,$-1),Yc(n,S+10,C-4),S+=14;for(var F=0;F<C;++F)Yc(n,S+3*F,he[Gg[F]]);S+=3*C;for(var U=[ve,J],A=0;A<2;++A)for(var E=U[A],F=0;F<E.length;++F){var W=E[F]&31;Yc(n,S,me[W]),S+=he[W],W>15&&(Yc(n,S,E[F]>>5&127),S+=E[F]>>12)}}else te=Hy,ne=Vu,pe=qy,Ne=Ph;for(var F=0;F<g;++F){var xe=s[F];if(xe>255){var W=xe>>18&31;Sf(n,S,te[W+257]),S+=ne[W+257],W>7&&(Yc(n,S,xe>>23&31),S+=y0[W]);var Ce=xe&31;Sf(n,S,pe[Ce]),S+=Ne[Ce],Ce>3&&(Sf(n,S,xe>>5&8191),S+=m0[Ce])}else Sf(n,S,te[xe]),S+=ne[xe]}return Sf(n,S,te[256]),S+ne[256]},Vy=new x0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),v2=new uc(0),$y=function(o,n,a,s,u,d){var v=d.z||o.length,g=new uc(s+v+5*(1+Math.ceil(v/7e3))+u),f=g.subarray(s,g.length-u),b=d.l,S=(d.r||0)&7;if(n){S&&(f[0]=d.r>>3);for(var R=Vy[n-1],q=R>>13,T=R&8191,V=(1<<a)-1,X=d.p||new jl(32768),L=d.h||new jl(V+1),D=Math.ceil(a/3),ve=2*D,se=function(_t){return(o[_t]^o[_t+1]<<D^o[_t+2]<<ve)&V},ee=new x0(25e3),J=new jl(288),$=new jl(32),I=0,F=0,O=d.i||0,he=0,N=d.w||0,C=0;O+2<v;++O){var re=se(O),ie=O&32767,fe=L[re];if(X[ie]=fe,L[re]=ie,N<=O){var te=v-O;if((I>7e3||he>24576)&&(te>423||!b)){S=Kg(o,f,0,ee,J,$,F,he,C,O-C,S),he=I=F=0,C=O;for(var ne=0;ne<286;++ne)J[ne]=0;for(var ne=0;ne<30;++ne)$[ne]=0}var pe=2,Ne=0,me=T,U=ie-fe&32767;if(te>2&&re==se(O-U))for(var A=Math.min(q,te)-1,E=Math.min(32767,O),W=Math.min(258,te);U<=E&&--me&&ie!=fe;){if(o[O+pe]==o[O+pe-U]){for(var xe=0;xe<W&&o[O+xe]==o[O+xe-U];++xe);if(xe>pe){if(pe=xe,Ne=U,xe>A)break;for(var Ce=Math.min(U,xe-2),Te=0,ne=0;ne<Ce;++ne){var Le=O-U+ne&32767,Ae=X[Le],De=Le-Ae&32767;De>Te&&(Te=De,fe=Le)}}}ie=fe,fe=X[ie],U+=ie-fe&32767}if(Ne){ee[he++]=268435456|a0[pe]<<18|Xg[Ne];var Ye=a0[pe]&31,pt=Xg[Ne]&31;F+=y0[Ye]+m0[pt],++J[257+Ye],++$[pt],N=O+pe,++I}else ee[he++]=o[O],++J[o[O]]}}for(O=Math.max(O,N);O<v;++O)ee[he++]=o[O],++J[o[O]];S=Kg(o,f,b,ee,J,$,F,he,C,O-C,S),b||(d.r=S&7|f[S/8|0]<<3,S-=7,d.h=L,d.p=X,d.i=O,d.w=N)}else{for(var O=d.w||0;O<v+b;O+=65535){var mt=O+65535;mt>=v&&(f[S/8|0]=b,mt=v),S=b2(f,S+1,o.subarray(O,mt))}d.i=v}return Wy(g,0,s+m2(S)+u)},w2=function(){var o=1,n=0;return{p:function(a){for(var s=o,u=n,d=a.length|0,v=0;v!=d;){for(var g=Math.min(v+2655,d);v<g;++v)u+=s+=a[v];s=(s&65535)+15*(s>>16),u=(u&65535)+15*(u>>16)}o=s,n=u},d:function(){return o%=65521,n%=65521,(o&255)<<24|(o&65280)<<8|(n&255)<<8|n>>8}}},Yy=function(o,n,a,s,u){if(!u&&(u={l:1},n.dictionary)){var d=n.dictionary.subarray(-32768),v=new uc(d.length+o.length);v.set(d),v.set(o,d.length),o=v,u.w=d.length}return $y(o,n.level==null?6:n.level,n.mem==null?u.l?Math.ceil(Math.max(8,Math.min(13,Math.log(o.length)))*1.5):20:12+n.mem,a,s,u)},S2=function(o,n,a){for(;a;++n)o[n]=a,a>>>=8},Gy=function(o,n){var a=n.level,s=a==0?0:a<6?1:a==9?3:2;if(o[0]=120,o[1]=s<<6|(n.dictionary&&32),o[1]|=31-(o[0]<<8|o[1])%31,n.dictionary){var u=w2();u.p(n.dictionary),S2(o,2,u.d())}};function s0(o,n){n||(n={});var a=w2();a.p(o);var s=Yy(o,n,n.dictionary?6:2,4);return Gy(s,n),S2(s,s.length-4,a.d()),s}var Xy=typeof TextDecoder<"u"&&new TextDecoder,Zy=0;try{Xy.decode(v2,{stream:!0}),Zy=1}catch{}function Ky(o){if(Array.isArray(o))return o}function Jy(o,n){var a=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(a!=null){var s,u,d,v,g=[],f=!0,b=!1;try{if(d=(a=a.call(o)).next,n!==0)for(;!(f=(s=d.call(a)).done)&&(g.push(s.value),g.length!==n);f=!0);}catch(S){b=!0,u=S}finally{try{if(!f&&a.return!=null&&(v=a.return(),Object(v)!==v))return}finally{if(b)throw u}}return g}}function Jg(o,n){(n==null||n>o.length)&&(n=o.length);for(var a=0,s=Array(n);a<n;a++)s[a]=o[a];return s}function Qy(o,n){if(o){if(typeof o=="string")return Jg(o,n);var a={}.toString.call(o).slice(8,-1);return a==="Object"&&o.constructor&&(a=o.constructor.name),a==="Map"||a==="Set"?Array.from(o):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Jg(o,n):void 0}}function e5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qg(o,n){return Ky(o)||Jy(o,n)||Qy(o,n)||e5()}function e1(o,n="utf8"){return new TextDecoder(n).decode(o)}const t5=new TextEncoder;function n5(o){return t5.encode(o)}const i5=1024*8,a5=(()=>{const o=new Uint8Array(4),n=new Uint32Array(o.buffer);return!((n[0]=1)&o[0])})(),Mp={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class b0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=i5,a={}){let s=!1;typeof n=="number"?n=new ArrayBuffer(n):(s=!0,this.lastWrittenByte=n.byteLength);const u=a.offset?a.offset>>>0:0,d=n.byteLength-u;let v=u;(ArrayBuffer.isView(n)||n instanceof b0)&&(n.byteLength!==n.buffer.byteLength&&(v=n.byteOffset+u),n=n.buffer),s?this.lastWrittenByte=d:this.lastWrittenByte=0,this.buffer=n,this.length=d,this.byteLength=d,this.byteOffset=v,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,v,d),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const s=(this.offset+n)*2,u=new Uint8Array(s);u.set(new Uint8Array(this.buffer)),this.buffer=u.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,a){const s=Mp[a].BYTES_PER_ELEMENT*n,u=this.byteOffset+this.offset,d=this.buffer.slice(u,u+s);if(this.littleEndian===a5&&a!=="uint8"&&a!=="int8"){const g=new Uint8Array(this.buffer.slice(u,u+s));g.reverse();const f=new Mp[a](g.buffer);return this.offset+=s,f.reverse(),f}const v=new Mp[a](d);return this.offset+=s,v}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let a="";for(let s=0;s<n;s++)a+=this.readChar();return a}readUtf8(n=1){return e1(this.readBytes(n))}decodeText(n=1,a="utf8"){return e1(this.readBytes(n),a)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let a=0;a<n.length;a++)this._data.setUint8(this.offset++,n[a]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let a=0;a<n.length;a++)this.writeUint8(n.charCodeAt(a));return this}writeUtf8(n){return this.writeBytes(n5(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Dd(o){let n=o.length;for(;--n>=0;)o[n]=0}const o5=3,r5=258,j2=29,s5=256,l5=s5+1+j2,T2=30,c5=512,u5=new Array((l5+2)*2);Dd(u5);const d5=new Array(T2*2);Dd(d5);const f5=new Array(c5);Dd(f5);const h5=new Array(r5-o5+1);Dd(h5);const p5=new Array(j2);Dd(p5);const g5=new Array(T2);Dd(g5);const x5=(o,n,a,s)=>{let u=o&65535|0,d=o>>>16&65535|0,v=0;for(;a!==0;){v=a>2e3?2e3:a,a-=v;do u=u+n[s++]|0,d=d+u|0;while(--v);u%=65521,d%=65521}return u|d<<16|0};var l0=x5;const y5=()=>{let o,n=[];for(var a=0;a<256;a++){o=a;for(var s=0;s<8;s++)o=o&1?3988292384^o>>>1:o>>>1;n[a]=o}return n},m5=new Uint32Array(y5()),b5=(o,n,a,s)=>{const u=m5,d=s+a;o^=-1;for(let v=s;v<d;v++)o=o>>>8^u[(o^n[v])&255];return o^-1};var _c=b5,c0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},C2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const v5=(o,n)=>Object.prototype.hasOwnProperty.call(o,n);var w5=function(o){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const a=n.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const s in a)v5(a,s)&&(o[s]=a[s])}}return o},S5=o=>{let n=0;for(let s=0,u=o.length;s<u;s++)n+=o[s].length;const a=new Uint8Array(n);for(let s=0,u=0,d=o.length;s<d;s++){let v=o[s];a.set(v,u),u+=v.length}return a},A2={assign:w5,flattenChunks:S5};let k2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{k2=!1}const Nf=new Uint8Array(256);for(let o=0;o<256;o++)Nf[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;Nf[254]=Nf[254]=1;var j5=o=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(o);let n,a,s,u,d,v=o.length,g=0;for(u=0;u<v;u++)a=o.charCodeAt(u),(a&64512)===55296&&u+1<v&&(s=o.charCodeAt(u+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),u++)),g+=a<128?1:a<2048?2:a<65536?3:4;for(n=new Uint8Array(g),d=0,u=0;d<g;u++)a=o.charCodeAt(u),(a&64512)===55296&&u+1<v&&(s=o.charCodeAt(u+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),u++)),a<128?n[d++]=a:a<2048?(n[d++]=192|a>>>6,n[d++]=128|a&63):a<65536?(n[d++]=224|a>>>12,n[d++]=128|a>>>6&63,n[d++]=128|a&63):(n[d++]=240|a>>>18,n[d++]=128|a>>>12&63,n[d++]=128|a>>>6&63,n[d++]=128|a&63);return n};const T5=(o,n)=>{if(n<65534&&o.subarray&&k2)return String.fromCharCode.apply(null,o.length===n?o:o.subarray(0,n));let a="";for(let s=0;s<n;s++)a+=String.fromCharCode(o[s]);return a};var C5=(o,n)=>{const a=n||o.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(o.subarray(0,n));let s,u;const d=new Array(a*2);for(u=0,s=0;s<a;){let v=o[s++];if(v<128){d[u++]=v;continue}let g=Nf[v];if(g>4){d[u++]=65533,s+=g-1;continue}for(v&=g===2?31:g===3?15:7;g>1&&s<a;)v=v<<6|o[s++]&63,g--;if(g>1){d[u++]=65533;continue}v<65536?d[u++]=v:(v-=65536,d[u++]=55296|v>>10&1023,d[u++]=56320|v&1023)}return T5(d,u)},A5=(o,n)=>{n=n||o.length,n>o.length&&(n=o.length);let a=n-1;for(;a>=0&&(o[a]&192)===128;)a--;return a<0||a===0?n:a+Nf[o[a]]>n?a:n},u0={string2buf:j5,buf2string:C5,utf8border:A5};function k5(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var N5=k5;const xh=16209,z5=16191;var _5=function(n,a){let s,u,d,v,g,f,b,S,R,q,T,V,X,L,D,ve,se,ee,J,$,I,F,O,he;const N=n.state;s=n.next_in,O=n.input,u=s+(n.avail_in-5),d=n.next_out,he=n.output,v=d-(a-n.avail_out),g=d+(n.avail_out-257),f=N.dmax,b=N.wsize,S=N.whave,R=N.wnext,q=N.window,T=N.hold,V=N.bits,X=N.lencode,L=N.distcode,D=(1<<N.lenbits)-1,ve=(1<<N.distbits)-1;e:do{V<15&&(T+=O[s++]<<V,V+=8,T+=O[s++]<<V,V+=8),se=X[T&D];t:for(;;){if(ee=se>>>24,T>>>=ee,V-=ee,ee=se>>>16&255,ee===0)he[d++]=se&65535;else if(ee&16){J=se&65535,ee&=15,ee&&(V<ee&&(T+=O[s++]<<V,V+=8),J+=T&(1<<ee)-1,T>>>=ee,V-=ee),V<15&&(T+=O[s++]<<V,V+=8,T+=O[s++]<<V,V+=8),se=L[T&ve];n:for(;;){if(ee=se>>>24,T>>>=ee,V-=ee,ee=se>>>16&255,ee&16){if($=se&65535,ee&=15,V<ee&&(T+=O[s++]<<V,V+=8,V<ee&&(T+=O[s++]<<V,V+=8)),$+=T&(1<<ee)-1,$>f){n.msg="invalid distance too far back",N.mode=xh;break e}if(T>>>=ee,V-=ee,ee=d-v,$>ee){if(ee=$-ee,ee>S&&N.sane){n.msg="invalid distance too far back",N.mode=xh;break e}if(I=0,F=q,R===0){if(I+=b-ee,ee<J){J-=ee;do he[d++]=q[I++];while(--ee);I=d-$,F=he}}else if(R<ee){if(I+=b+R-ee,ee-=R,ee<J){J-=ee;do he[d++]=q[I++];while(--ee);if(I=0,R<J){ee=R,J-=ee;do he[d++]=q[I++];while(--ee);I=d-$,F=he}}}else if(I+=R-ee,ee<J){J-=ee;do he[d++]=q[I++];while(--ee);I=d-$,F=he}for(;J>2;)he[d++]=F[I++],he[d++]=F[I++],he[d++]=F[I++],J-=3;J&&(he[d++]=F[I++],J>1&&(he[d++]=F[I++]))}else{I=d-$;do he[d++]=he[I++],he[d++]=he[I++],he[d++]=he[I++],J-=3;while(J>2);J&&(he[d++]=he[I++],J>1&&(he[d++]=he[I++]))}}else if((ee&64)===0){se=L[(se&65535)+(T&(1<<ee)-1)];continue n}else{n.msg="invalid distance code",N.mode=xh;break e}break}}else if((ee&64)===0){se=X[(se&65535)+(T&(1<<ee)-1)];continue t}else if(ee&32){N.mode=z5;break e}else{n.msg="invalid literal/length code",N.mode=xh;break e}break}}while(s<u&&d<g);J=V>>3,s-=J,V-=J<<3,T&=(1<<V)-1,n.next_in=s,n.next_out=d,n.avail_in=s<u?5+(u-s):5-(s-u),n.avail_out=d<g?257+(g-d):257-(d-g),N.hold=T,N.bits=V};const jd=15,t1=852,n1=592,i1=0,Bp=1,a1=2,L5=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),P5=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),R5=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),D5=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),M5=(o,n,a,s,u,d,v,g)=>{const f=g.bits;let b=0,S=0,R=0,q=0,T=0,V=0,X=0,L=0,D=0,ve=0,se,ee,J,$,I,F=null,O;const he=new Uint16Array(jd+1),N=new Uint16Array(jd+1);let C=null,re,ie,fe;for(b=0;b<=jd;b++)he[b]=0;for(S=0;S<s;S++)he[n[a+S]]++;for(T=f,q=jd;q>=1&&he[q]===0;q--);if(T>q&&(T=q),q===0)return u[d++]=1<<24|64<<16|0,u[d++]=1<<24|64<<16|0,g.bits=1,0;for(R=1;R<q&&he[R]===0;R++);for(T<R&&(T=R),L=1,b=1;b<=jd;b++)if(L<<=1,L-=he[b],L<0)return-1;if(L>0&&(o===i1||q!==1))return-1;for(N[1]=0,b=1;b<jd;b++)N[b+1]=N[b]+he[b];for(S=0;S<s;S++)n[a+S]!==0&&(v[N[n[a+S]]++]=S);if(o===i1?(F=C=v,O=20):o===Bp?(F=L5,C=P5,O=257):(F=R5,C=D5,O=0),ve=0,S=0,b=R,I=d,V=T,X=0,J=-1,D=1<<T,$=D-1,o===Bp&&D>t1||o===a1&&D>n1)return 1;for(;;){re=b-X,v[S]+1<O?(ie=0,fe=v[S]):v[S]>=O?(ie=C[v[S]-O],fe=F[v[S]-O]):(ie=96,fe=0),se=1<<b-X,ee=1<<V,R=ee;do ee-=se,u[I+(ve>>X)+ee]=re<<24|ie<<16|fe|0;while(ee!==0);for(se=1<<b-1;ve&se;)se>>=1;if(se!==0?(ve&=se-1,ve+=se):ve=0,S++,--he[b]===0){if(b===q)break;b=n[a+v[S]]}if(b>T&&(ve&$)!==J){for(X===0&&(X=T),I+=R,V=b-X,L=1<<V;V+X<q&&(L-=he[V+X],!(L<=0));)V++,L<<=1;if(D+=1<<V,o===Bp&&D>t1||o===a1&&D>n1)return 1;J=ve&$,u[J]=T<<24|V<<16|I-d|0}}return ve!==0&&(u[I+ve]=b-X<<24|64<<16|0),g.bits=T,0};var kf=M5;const B5=0,N2=1,z2=2,{Z_FINISH:o1,Z_BLOCK:E5,Z_TREES:yh,Z_OK:$u,Z_STREAM_END:O5,Z_NEED_DICT:I5,Z_STREAM_ERROR:Fl,Z_DATA_ERROR:_2,Z_MEM_ERROR:L2,Z_BUF_ERROR:U5,Z_DEFLATED:r1}=C2,Bh=16180,s1=16181,l1=16182,c1=16183,u1=16184,d1=16185,f1=16186,h1=16187,p1=16188,g1=16189,Rh=16190,Gc=16191,Ep=16192,x1=16193,Op=16194,y1=16195,m1=16196,b1=16197,v1=16198,mh=16199,bh=16200,w1=16201,S1=16202,j1=16203,T1=16204,C1=16205,Ip=16206,A1=16207,k1=16208,po=16209,P2=16210,R2=16211,F5=852,H5=592,q5=15,W5=q5,N1=o=>(o>>>24&255)+(o>>>8&65280)+((o&65280)<<8)+((o&255)<<24);function V5(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Yu=o=>{if(!o)return 1;const n=o.state;return!n||n.strm!==o||n.mode<Bh||n.mode>R2?1:0},D2=o=>{if(Yu(o))return Fl;const n=o.state;return o.total_in=o.total_out=n.total=0,o.msg="",n.wrap&&(o.adler=n.wrap&1),n.mode=Bh,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(F5),n.distcode=n.distdyn=new Int32Array(H5),n.sane=1,n.back=-1,$u},M2=o=>{if(Yu(o))return Fl;const n=o.state;return n.wsize=0,n.whave=0,n.wnext=0,D2(o)},B2=(o,n)=>{let a;if(Yu(o))return Fl;const s=o.state;return n<0?(a=0,n=-n):(a=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Fl:(s.window!==null&&s.wbits!==n&&(s.window=null),s.wrap=a,s.wbits=n,M2(o))},E2=(o,n)=>{if(!o)return Fl;const a=new V5;o.state=a,a.strm=o,a.window=null,a.mode=Bh;const s=B2(o,n);return s!==$u&&(o.state=null),s},$5=o=>E2(o,W5);let z1=!0,Up,Fp;const Y5=o=>{if(z1){Up=new Int32Array(512),Fp=new Int32Array(32);let n=0;for(;n<144;)o.lens[n++]=8;for(;n<256;)o.lens[n++]=9;for(;n<280;)o.lens[n++]=7;for(;n<288;)o.lens[n++]=8;for(kf(N2,o.lens,0,288,Up,0,o.work,{bits:9}),n=0;n<32;)o.lens[n++]=5;kf(z2,o.lens,0,32,Fp,0,o.work,{bits:5}),z1=!1}o.lencode=Up,o.lenbits=9,o.distcode=Fp,o.distbits=5},O2=(o,n,a,s)=>{let u;const d=o.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new Uint8Array(d.wsize)),s>=d.wsize?(d.window.set(n.subarray(a-d.wsize,a),0),d.wnext=0,d.whave=d.wsize):(u=d.wsize-d.wnext,u>s&&(u=s),d.window.set(n.subarray(a-s,a-s+u),d.wnext),s-=u,s?(d.window.set(n.subarray(a-s,a),0),d.wnext=s,d.whave=d.wsize):(d.wnext+=u,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=u))),0},G5=(o,n)=>{let a,s,u,d,v,g,f,b,S,R,q,T,V,X,L=0,D,ve,se,ee,J,$,I,F;const O=new Uint8Array(4);let he,N;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Yu(o)||!o.output||!o.input&&o.avail_in!==0)return Fl;a=o.state,a.mode===Gc&&(a.mode=Ep),v=o.next_out,u=o.output,f=o.avail_out,d=o.next_in,s=o.input,g=o.avail_in,b=a.hold,S=a.bits,R=g,q=f,F=$u;e:for(;;)switch(a.mode){case Bh:if(a.wrap===0){a.mode=Ep;break}for(;S<16;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if(a.wrap&2&&b===35615){a.wbits===0&&(a.wbits=15),a.check=0,O[0]=b&255,O[1]=b>>>8&255,a.check=_c(a.check,O,2,0),b=0,S=0,a.mode=s1;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((b&255)<<8)+(b>>8))%31){o.msg="incorrect header check",a.mode=po;break}if((b&15)!==r1){o.msg="unknown compression method",a.mode=po;break}if(b>>>=4,S-=4,I=(b&15)+8,a.wbits===0&&(a.wbits=I),I>15||I>a.wbits){o.msg="invalid window size",a.mode=po;break}a.dmax=1<<a.wbits,a.flags=0,o.adler=a.check=1,a.mode=b&512?g1:Gc,b=0,S=0;break;case s1:for(;S<16;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if(a.flags=b,(a.flags&255)!==r1){o.msg="unknown compression method",a.mode=po;break}if(a.flags&57344){o.msg="unknown header flags set",a.mode=po;break}a.head&&(a.head.text=b>>8&1),a.flags&512&&a.wrap&4&&(O[0]=b&255,O[1]=b>>>8&255,a.check=_c(a.check,O,2,0)),b=0,S=0,a.mode=l1;case l1:for(;S<32;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}a.head&&(a.head.time=b),a.flags&512&&a.wrap&4&&(O[0]=b&255,O[1]=b>>>8&255,O[2]=b>>>16&255,O[3]=b>>>24&255,a.check=_c(a.check,O,4,0)),b=0,S=0,a.mode=c1;case c1:for(;S<16;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}a.head&&(a.head.xflags=b&255,a.head.os=b>>8),a.flags&512&&a.wrap&4&&(O[0]=b&255,O[1]=b>>>8&255,a.check=_c(a.check,O,2,0)),b=0,S=0,a.mode=u1;case u1:if(a.flags&1024){for(;S<16;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}a.length=b,a.head&&(a.head.extra_len=b),a.flags&512&&a.wrap&4&&(O[0]=b&255,O[1]=b>>>8&255,a.check=_c(a.check,O,2,0)),b=0,S=0}else a.head&&(a.head.extra=null);a.mode=d1;case d1:if(a.flags&1024&&(T=a.length,T>g&&(T=g),T&&(a.head&&(I=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(s.subarray(d,d+T),I)),a.flags&512&&a.wrap&4&&(a.check=_c(a.check,s,T,d)),g-=T,d+=T,a.length-=T),a.length))break e;a.length=0,a.mode=f1;case f1:if(a.flags&2048){if(g===0)break e;T=0;do I=s[d+T++],a.head&&I&&a.length<65536&&(a.head.name+=String.fromCharCode(I));while(I&&T<g);if(a.flags&512&&a.wrap&4&&(a.check=_c(a.check,s,T,d)),g-=T,d+=T,I)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=h1;case h1:if(a.flags&4096){if(g===0)break e;T=0;do I=s[d+T++],a.head&&I&&a.length<65536&&(a.head.comment+=String.fromCharCode(I));while(I&&T<g);if(a.flags&512&&a.wrap&4&&(a.check=_c(a.check,s,T,d)),g-=T,d+=T,I)break e}else a.head&&(a.head.comment=null);a.mode=p1;case p1:if(a.flags&512){for(;S<16;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if(a.wrap&4&&b!==(a.check&65535)){o.msg="header crc mismatch",a.mode=po;break}b=0,S=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),o.adler=a.check=0,a.mode=Gc;break;case g1:for(;S<32;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}o.adler=a.check=N1(b),b=0,S=0,a.mode=Rh;case Rh:if(a.havedict===0)return o.next_out=v,o.avail_out=f,o.next_in=d,o.avail_in=g,a.hold=b,a.bits=S,I5;o.adler=a.check=1,a.mode=Gc;case Gc:if(n===E5||n===yh)break e;case Ep:if(a.last){b>>>=S&7,S-=S&7,a.mode=Ip;break}for(;S<3;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}switch(a.last=b&1,b>>>=1,S-=1,b&3){case 0:a.mode=x1;break;case 1:if(Y5(a),a.mode=mh,n===yh){b>>>=2,S-=2;break e}break;case 2:a.mode=m1;break;case 3:o.msg="invalid block type",a.mode=po}b>>>=2,S-=2;break;case x1:for(b>>>=S&7,S-=S&7;S<32;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if((b&65535)!==(b>>>16^65535)){o.msg="invalid stored block lengths",a.mode=po;break}if(a.length=b&65535,b=0,S=0,a.mode=Op,n===yh)break e;case Op:a.mode=y1;case y1:if(T=a.length,T){if(T>g&&(T=g),T>f&&(T=f),T===0)break e;u.set(s.subarray(d,d+T),v),g-=T,d+=T,f-=T,v+=T,a.length-=T;break}a.mode=Gc;break;case m1:for(;S<14;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if(a.nlen=(b&31)+257,b>>>=5,S-=5,a.ndist=(b&31)+1,b>>>=5,S-=5,a.ncode=(b&15)+4,b>>>=4,S-=4,a.nlen>286||a.ndist>30){o.msg="too many length or distance symbols",a.mode=po;break}a.have=0,a.mode=b1;case b1:for(;a.have<a.ncode;){for(;S<3;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}a.lens[C[a.have++]]=b&7,b>>>=3,S-=3}for(;a.have<19;)a.lens[C[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,he={bits:a.lenbits},F=kf(B5,a.lens,0,19,a.lencode,0,a.work,he),a.lenbits=he.bits,F){o.msg="invalid code lengths set",a.mode=po;break}a.have=0,a.mode=v1;case v1:for(;a.have<a.nlen+a.ndist;){for(;L=a.lencode[b&(1<<a.lenbits)-1],D=L>>>24,ve=L>>>16&255,se=L&65535,!(D<=S);){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if(se<16)b>>>=D,S-=D,a.lens[a.have++]=se;else{if(se===16){for(N=D+2;S<N;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if(b>>>=D,S-=D,a.have===0){o.msg="invalid bit length repeat",a.mode=po;break}I=a.lens[a.have-1],T=3+(b&3),b>>>=2,S-=2}else if(se===17){for(N=D+3;S<N;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}b>>>=D,S-=D,I=0,T=3+(b&7),b>>>=3,S-=3}else{for(N=D+7;S<N;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}b>>>=D,S-=D,I=0,T=11+(b&127),b>>>=7,S-=7}if(a.have+T>a.nlen+a.ndist){o.msg="invalid bit length repeat",a.mode=po;break}for(;T--;)a.lens[a.have++]=I}}if(a.mode===po)break;if(a.lens[256]===0){o.msg="invalid code -- missing end-of-block",a.mode=po;break}if(a.lenbits=9,he={bits:a.lenbits},F=kf(N2,a.lens,0,a.nlen,a.lencode,0,a.work,he),a.lenbits=he.bits,F){o.msg="invalid literal/lengths set",a.mode=po;break}if(a.distbits=6,a.distcode=a.distdyn,he={bits:a.distbits},F=kf(z2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,he),a.distbits=he.bits,F){o.msg="invalid distances set",a.mode=po;break}if(a.mode=mh,n===yh)break e;case mh:a.mode=bh;case bh:if(g>=6&&f>=258){o.next_out=v,o.avail_out=f,o.next_in=d,o.avail_in=g,a.hold=b,a.bits=S,_5(o,q),v=o.next_out,u=o.output,f=o.avail_out,d=o.next_in,s=o.input,g=o.avail_in,b=a.hold,S=a.bits,a.mode===Gc&&(a.back=-1);break}for(a.back=0;L=a.lencode[b&(1<<a.lenbits)-1],D=L>>>24,ve=L>>>16&255,se=L&65535,!(D<=S);){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if(ve&&(ve&240)===0){for(ee=D,J=ve,$=se;L=a.lencode[$+((b&(1<<ee+J)-1)>>ee)],D=L>>>24,ve=L>>>16&255,se=L&65535,!(ee+D<=S);){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}b>>>=ee,S-=ee,a.back+=ee}if(b>>>=D,S-=D,a.back+=D,a.length=se,ve===0){a.mode=C1;break}if(ve&32){a.back=-1,a.mode=Gc;break}if(ve&64){o.msg="invalid literal/length code",a.mode=po;break}a.extra=ve&15,a.mode=w1;case w1:if(a.extra){for(N=a.extra;S<N;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}a.length+=b&(1<<a.extra)-1,b>>>=a.extra,S-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=S1;case S1:for(;L=a.distcode[b&(1<<a.distbits)-1],D=L>>>24,ve=L>>>16&255,se=L&65535,!(D<=S);){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if((ve&240)===0){for(ee=D,J=ve,$=se;L=a.distcode[$+((b&(1<<ee+J)-1)>>ee)],D=L>>>24,ve=L>>>16&255,se=L&65535,!(ee+D<=S);){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}b>>>=ee,S-=ee,a.back+=ee}if(b>>>=D,S-=D,a.back+=D,ve&64){o.msg="invalid distance code",a.mode=po;break}a.offset=se,a.extra=ve&15,a.mode=j1;case j1:if(a.extra){for(N=a.extra;S<N;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}a.offset+=b&(1<<a.extra)-1,b>>>=a.extra,S-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){o.msg="invalid distance too far back",a.mode=po;break}a.mode=T1;case T1:if(f===0)break e;if(T=q-f,a.offset>T){if(T=a.offset-T,T>a.whave&&a.sane){o.msg="invalid distance too far back",a.mode=po;break}T>a.wnext?(T-=a.wnext,V=a.wsize-T):V=a.wnext-T,T>a.length&&(T=a.length),X=a.window}else X=u,V=v-a.offset,T=a.length;T>f&&(T=f),f-=T,a.length-=T;do u[v++]=X[V++];while(--T);a.length===0&&(a.mode=bh);break;case C1:if(f===0)break e;u[v++]=a.length,f--,a.mode=bh;break;case Ip:if(a.wrap){for(;S<32;){if(g===0)break e;g--,b|=s[d++]<<S,S+=8}if(q-=f,o.total_out+=q,a.total+=q,a.wrap&4&&q&&(o.adler=a.check=a.flags?_c(a.check,u,q,v-q):l0(a.check,u,q,v-q)),q=f,a.wrap&4&&(a.flags?b:N1(b))!==a.check){o.msg="incorrect data check",a.mode=po;break}b=0,S=0}a.mode=A1;case A1:if(a.wrap&&a.flags){for(;S<32;){if(g===0)break e;g--,b+=s[d++]<<S,S+=8}if(a.wrap&4&&b!==(a.total&4294967295)){o.msg="incorrect length check",a.mode=po;break}b=0,S=0}a.mode=k1;case k1:F=O5;break e;case po:F=_2;break e;case P2:return L2;case R2:default:return Fl}return o.next_out=v,o.avail_out=f,o.next_in=d,o.avail_in=g,a.hold=b,a.bits=S,(a.wsize||q!==o.avail_out&&a.mode<po&&(a.mode<Ip||n!==o1))&&O2(o,o.output,o.next_out,q-o.avail_out),R-=o.avail_in,q-=o.avail_out,o.total_in+=R,o.total_out+=q,a.total+=q,a.wrap&4&&q&&(o.adler=a.check=a.flags?_c(a.check,u,q,o.next_out-q):l0(a.check,u,q,o.next_out-q)),o.data_type=a.bits+(a.last?64:0)+(a.mode===Gc?128:0)+(a.mode===mh||a.mode===Op?256:0),(R===0&&q===0||n===o1)&&F===$u&&(F=U5),F},X5=o=>{if(Yu(o))return Fl;let n=o.state;return n.window&&(n.window=null),o.state=null,$u},Z5=(o,n)=>{if(Yu(o))return Fl;const a=o.state;return(a.wrap&2)===0?Fl:(a.head=n,n.done=!1,$u)},K5=(o,n)=>{const a=n.length;let s,u,d;return Yu(o)||(s=o.state,s.wrap!==0&&s.mode!==Rh)?Fl:s.mode===Rh&&(u=1,u=l0(u,n,a,0),u!==s.check)?_2:(d=O2(o,n,a,a),d?(s.mode=P2,L2):(s.havedict=1,$u))};var J5=M2,Q5=B2,em=D2,tm=$5,nm=E2,im=G5,am=X5,om=Z5,rm=K5,sm="pako inflate (from Nodeca project)",Xc={inflateReset:J5,inflateReset2:Q5,inflateResetKeep:em,inflateInit:tm,inflateInit2:nm,inflate:im,inflateEnd:am,inflateGetHeader:om,inflateSetDictionary:rm,inflateInfo:sm};function lm(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var cm=lm;const I2=Object.prototype.toString,{Z_NO_FLUSH:um,Z_FINISH:dm,Z_OK:zf,Z_STREAM_END:Hp,Z_NEED_DICT:qp,Z_STREAM_ERROR:fm,Z_DATA_ERROR:_1,Z_MEM_ERROR:hm}=C2;function Lf(o){this.options=A2.assign({chunkSize:1024*64,windowBits:15,to:""},o||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(o&&o.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new N5,this.strm.avail_out=0;let a=Xc.inflateInit2(this.strm,n.windowBits);if(a!==zf)throw new Error(c0[a]);if(this.header=new cm,Xc.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=u0.string2buf(n.dictionary):I2.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(a=Xc.inflateSetDictionary(this.strm,n.dictionary),a!==zf)))throw new Error(c0[a])}Lf.prototype.push=function(o,n){const a=this.strm,s=this.options.chunkSize,u=this.options.dictionary;let d,v,g;if(this.ended)return!1;for(n===~~n?v=n:v=n===!0?dm:um,I2.call(o)==="[object ArrayBuffer]"?a.input=new Uint8Array(o):a.input=o,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),d=Xc.inflate(a,v),d===qp&&u&&(d=Xc.inflateSetDictionary(a,u),d===zf?d=Xc.inflate(a,v):d===_1&&(d=qp));a.avail_in>0&&d===Hp&&a.state.wrap>0&&o[a.next_in]!==0;)Xc.inflateReset(a),d=Xc.inflate(a,v);switch(d){case fm:case _1:case qp:case hm:return this.onEnd(d),this.ended=!0,!1}if(g=a.avail_out,a.next_out&&(a.avail_out===0||d===Hp))if(this.options.to==="string"){let f=u0.utf8border(a.output,a.next_out),b=a.next_out-f,S=u0.buf2string(a.output,f);a.next_out=b,a.avail_out=s-b,b&&a.output.set(a.output.subarray(f,f+b),0),this.onData(S)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(d===zf&&g===0)){if(d===Hp)return d=Xc.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};Lf.prototype.onData=function(o){this.chunks.push(o)};Lf.prototype.onEnd=function(o){o===zf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=A2.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function pm(o,n){const a=new Lf(n);if(a.push(o),a.err)throw a.msg||c0[a.err];return a.result}var gm=Lf,xm=pm,ym={Inflate:gm,inflate:xm};const{Inflate:mm,inflate:bm}=ym;var L1=mm,vm=bm;const U2=[];for(let o=0;o<256;o++){let n=o;for(let a=0;a<8;a++)n&1?n=3988292384^n>>>1:n=n>>>1;U2[o]=n}const P1=4294967295;function wm(o,n,a){let s=o;for(let u=0;u<a;u++)s=U2[(s^n[u])&255]^s>>>8;return s}function Sm(o,n){return(wm(P1,o,n)^P1)>>>0}function R1(o,n,a){const s=o.readUint32(),u=Sm(new Uint8Array(o.buffer,o.byteOffset+o.offset-n-4,n),n);if(u!==s)throw new Error(`CRC mismatch for chunk ${a}. Expected ${s}, found ${u}`)}function F2(o,n,a){for(let s=0;s<a;s++)n[s]=o[s]}function H2(o,n,a,s){let u=0;for(;u<s;u++)n[u]=o[u];for(;u<a;u++)n[u]=o[u]+n[u-s]&255}function q2(o,n,a,s){let u=0;if(a.length===0)for(;u<s;u++)n[u]=o[u];else for(;u<s;u++)n[u]=o[u]+a[u]&255}function W2(o,n,a,s,u){let d=0;if(a.length===0){for(;d<u;d++)n[d]=o[d];for(;d<s;d++)n[d]=o[d]+(n[d-u]>>1)&255}else{for(;d<u;d++)n[d]=o[d]+(a[d]>>1)&255;for(;d<s;d++)n[d]=o[d]+(n[d-u]+a[d]>>1)&255}}function V2(o,n,a,s,u){let d=0;if(a.length===0){for(;d<u;d++)n[d]=o[d];for(;d<s;d++)n[d]=o[d]+n[d-u]&255}else{for(;d<u;d++)n[d]=o[d]+a[d]&255;for(;d<s;d++)n[d]=o[d]+jm(n[d-u],a[d],a[d-u])&255}}function jm(o,n,a){const s=o+n-a,u=Math.abs(s-o),d=Math.abs(s-n),v=Math.abs(s-a);return u<=d&&u<=v?o:d<=v?n:a}function Tm(o,n,a,s,u,d){switch(o){case 0:F2(n,a,u);break;case 1:H2(n,a,u,d);break;case 2:q2(n,a,s,u);break;case 3:W2(n,a,s,u,d);break;case 4:V2(n,a,s,u,d);break;default:throw new Error(`Unsupported filter: ${o}`)}}const Cm=new Uint16Array([255]),Am=new Uint8Array(Cm.buffer),km=Am[0]===255;function Nm(o){const{data:n,width:a,height:s,channels:u,depth:d}=o,v=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],g=Math.ceil(d/8)*u,f=new Uint8Array(s*a*g);let b=0;for(let S=0;S<7;S++){const R=v[S],q=Math.ceil((a-R.x)/R.xStep),T=Math.ceil((s-R.y)/R.yStep);if(q<=0||T<=0)continue;const V=q*g,X=new Uint8Array(V);for(let L=0;L<T;L++){const D=n[b++],ve=n.subarray(b,b+V);b+=V;const se=new Uint8Array(V);Tm(D,ve,se,X,V,g),X.set(se);for(let ee=0;ee<q;ee++){const J=R.x+ee*R.xStep,$=R.y+L*R.yStep;if(!(J>=a||$>=s))for(let I=0;I<g;I++)f[($*a+J)*g+I]=se[ee*g+I]}}}if(d===16){const S=new Uint16Array(f.buffer);if(km)for(let R=0;R<S.length;R++)S[R]=zm(S[R]);return S}else return f}function zm(o){return(o&255)<<8|o>>8&255}const _m=new Uint16Array([255]),Lm=new Uint8Array(_m.buffer),Pm=Lm[0]===255,Rm=new Uint8Array(0);function D1(o){const{data:n,width:a,height:s,channels:u,depth:d}=o,v=Math.ceil(d/8)*u,g=Math.ceil(d/8*u*a),f=new Uint8Array(s*g);let b=Rm,S=0,R,q;for(let T=0;T<s;T++){switch(R=n.subarray(S+1,S+1+g),q=f.subarray(T*g,(T+1)*g),n[S]){case 0:F2(R,q,g);break;case 1:H2(R,q,g,v);break;case 2:q2(R,q,b,g);break;case 3:W2(R,q,b,g,v);break;case 4:V2(R,q,b,g,v);break;default:throw new Error(`Unsupported filter: ${n[S]}`)}b=q,S+=g+1}if(d===16){const T=new Uint16Array(f.buffer);if(Pm)for(let V=0;V<T.length;V++)T[V]=Dm(T[V]);return T}else return f}function Dm(o){return(o&255)<<8|o>>8&255}const Ah=Uint8Array.of(137,80,78,71,13,10,26,10);function M1(o){if(!Mm(o.readBytes(Ah.length)))throw new Error("wrong PNG signature")}function Mm(o){if(o.length<Ah.length)return!1;for(let n=0;n<Ah.length;n++)if(o[n]!==Ah[n])return!1;return!0}const Bm="tEXt",Em=0,$2=new TextDecoder("latin1");function Om(o){if(Um(o),o.length===0||o.length>79)throw new Error("keyword length must be between 1 and 79")}const Im=/^[\u0000-\u00FF]*$/;function Um(o){if(!Im.test(o))throw new Error("invalid latin1 text")}function Fm(o,n,a){const s=Y2(n);o[s]=Hm(n,a-s.length-1)}function Y2(o){for(o.mark();o.readByte()!==Em;);const n=o.offset;o.reset();const a=$2.decode(o.readBytes(n-o.offset-1));return o.skip(1),Om(a),a}function Hm(o,n){return $2.decode(o.readBytes(n))}const Sl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Wp={UNKNOWN:-1,DEFLATE:0},B1={UNKNOWN:-1,ADAPTIVE:0},Vp={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},vh={NONE:0,BACKGROUND:1,PREVIOUS:2},$p={SOURCE:0,OVER:1};class qm extends b0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(n,a={}){super(n);const{checkCrc:s=!1}=a;this._checkCrc=s,this._inflator=new L1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Wp.UNKNOWN,this._filterMethod=B1.UNKNOWN,this._interlaceMethod=Vp.UNKNOWN,this._colorType=Sl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(M1(this);!this._end;){const n=this.readUint32(),a=this.readChars(4);this.decodeChunk(n,a)}return this.decodeImage(),this._png}decodeApng(){for(M1(this);!this._end;){const n=this.readUint32(),a=this.readChars(4);this.decodeApngChunk(n,a)}return this.decodeApngImage(),this._apng}decodeChunk(n,a){const s=this.offset;switch(a){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case Bm:Fm(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?R1(this,n+4,a):this.skip(4)}decodeApngChunk(n,a){const s=this.offset;switch(a!=="fdAT"&&a!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),a){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,a),this.offset=s+n;break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?R1(this,n+4,a):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=Wm(this.readUint8());const a=this.readUint8();this._colorType=a;let s;switch(a){case Sl.GREYSCALE:s=1;break;case Sl.TRUECOLOUR:s=3;break;case Sl.INDEXED_COLOUR:s=1;break;case Sl.GREYSCALE_ALPHA:s=2;break;case Sl.TRUECOLOUR_ALPHA:s=4;break;case Sl.UNKNOWN:default:throw new Error(`Unknown color type: ${a}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Wp.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const a=n/3;this._hasPalette=!0;const s=[];this._palette=s;for(let u=0;u<a;u++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const a=n,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let a=n,s=this.offset+this.byteOffset;if(s+=4,a-=4,this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Sl.GREYSCALE:case Sl.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let a=0;a<n/2;a++)this._transparency[a]=this.readUint16();break}case Sl.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let a=0;for(;a<n;a++){const s=this.readByte();this._palette[a].push(s)}for(;a<this._palette.length;a++)this._palette[a].push(255);break}case Sl.UNKNOWN:case Sl.GREYSCALE_ALPHA:case Sl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const a=Y2(this),s=this.readUint8();if(s!==Wp.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const u=this.readBytes(n-a.length-2);this._png.iccEmbeddedProfile={name:a,profile:vm(u)}}decodepHYs(){const n=this.readUint32(),a=this.readUint32(),s=this.readByte();this._png.resolution={x:n,y:a,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const a={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(n);if(s){if(s.data=D1({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)a.data=s.data;else{const u=this._apng.frames.at(n-1);this.disposeFrame(s,u,a),this.addFrameDataToCanvas(a,s)}this._apng.frames.push(a)}}return this._apng}disposeFrame(n,a,s){switch(n.disposeOp){case vh.NONE:break;case vh.BACKGROUND:for(let u=0;u<this._png.height;u++)for(let d=0;d<this._png.width;d++){const v=(u*n.width+d)*this._png.channels;for(let g=0;g<this._png.channels;g++)s.data[v+g]=0}break;case vh.PREVIOUS:s.data.set(a.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,a){const s=1<<this._png.depth,u=(d,v)=>{const g=((d+a.yOffset)*this._png.width+a.xOffset+v)*this._png.channels,f=(d*a.width+v)*this._png.channels;return{index:g,frameIndex:f}};switch(a.blendOp){case $p.SOURCE:for(let d=0;d<a.height;d++)for(let v=0;v<a.width;v++){const{index:g,frameIndex:f}=u(d,v);for(let b=0;b<this._png.channels;b++)n.data[g+b]=a.data[f+b]}break;case $p.OVER:for(let d=0;d<a.height;d++)for(let v=0;v<a.width;v++){const{index:g,frameIndex:f}=u(d,v);for(let b=0;b<this._png.channels;b++){const S=a.data[f+this._png.channels-1]/s,R=b%(this._png.channels-1)===0?1:a.data[f+b],q=Math.floor(S*R+(1-S)*n.data[g+b]);n.data[g+b]+=q}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==B1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Vp.NO_INTERLACE)this._png.data=D1({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Vp.ADAM7)this._png.data=Nm({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,a=this._frames.at(-1);a?a.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:vh.NONE,blendOp:$p.SOURCE,data:n}),this._inflator=new L1,this._writingDataChunks=!1}}function Wm(o){if(o!==1&&o!==2&&o!==4&&o!==8&&o!==16)throw new Error(`invalid bit depth: ${o}`);return o}var E1;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.METRE=1]="METRE"})(E1||(E1={}));function Vm(o,n){return new qm(o,n).decode()}var Yn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Yp(){Yn.console&&typeof Yn.console.log=="function"&&Yn.console.log.apply(Yn.console,arguments)}var Wa={log:Yp,warn:function(o){Yn.console&&(typeof Yn.console.warn=="function"?Yn.console.warn.apply(Yn.console,arguments):Yp.call(null,arguments))},error:function(o){Yn.console&&(typeof Yn.console.error=="function"?Yn.console.error.apply(Yn.console,arguments):Yp(o))}};function Gp(o,n,a){var s=new XMLHttpRequest;s.open("GET",o),s.responseType="blob",s.onload=function(){Fu(s.response,n,a)},s.onerror=function(){Wa.error("could not download file")},s.send()}function O1(o){var n=new XMLHttpRequest;n.open("HEAD",o,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function wh(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(n)}}var Fu=Yn.saveAs||((typeof window>"u"?"undefined":ka(window))!=="object"||window!==Yn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(o,n,a){var s=Yn.URL||Yn.webkitURL,u=document.createElement("a");n=n||o.name||"download",u.download=n,u.rel="noopener",typeof o=="string"?(u.href=o,u.origin!==location.origin?O1(u.href)?Gp(o,n,a):wh(u,u.target="_blank"):wh(u)):(u.href=s.createObjectURL(o),setTimeout(function(){s.revokeObjectURL(u.href)},4e4),setTimeout(function(){wh(u)},0))}:"msSaveOrOpenBlob"in navigator?function(o,n,a){if(n=n||o.name||"download",typeof o=="string")if(O1(o))Gp(o,n,a);else{var s=document.createElement("a");s.href=o,s.target="_blank",setTimeout(function(){wh(s)})}else navigator.msSaveOrOpenBlob((function(u,d){return d===void 0?d={autoBom:!1}:ka(d)!=="object"&&(Wa.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u})(o,a),n)}:function(o,n,a,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof o=="string")return Gp(o,n,a);var u=o.type==="application/octet-stream",d=/constructor/i.test(Yn.HTMLElement)||Yn.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||u&&d)&&(typeof FileReader>"u"?"undefined":ka(FileReader))==="object"){var g=new FileReader;g.onloadend=function(){var S=g.result;S=v?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=S:location=S,s=null},g.readAsDataURL(o)}else{var f=Yn.URL||Yn.webkitURL,b=f.createObjectURL(o);s?s.location=b:location.href=b,s=null,setTimeout(function(){f.revokeObjectURL(b)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function G2(o){var n;o=o||"",this.ok=!1,o.charAt(0)=="#"&&(o=o.substr(1,6)),o={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[o=(o=o.replace(/ /g,"")).toLowerCase()]||o;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(g){return[parseInt(g[1]),parseInt(g[2]),parseInt(g[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(g){return[parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(g){return[parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16)]}}],s=0;s<a.length;s++){var u=a[s].re,d=a[s].process,v=u.exec(o);v&&(n=d(v),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var g=this.r.toString(16),f=this.g.toString(16),b=this.b.toString(16);return g.length==1&&(g="0"+g),f.length==1&&(f="0"+f),b.length==1&&(b="0"+b),"#"+g+f+b}}var kh=Yn.atob.bind(Yn),I1=Yn.btoa.bind(Yn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Xp(o,n){var a=o[0],s=o[1],u=o[2],d=o[3];a=gs(a,s,u,d,n[0],7,-680876936),d=gs(d,a,s,u,n[1],12,-389564586),u=gs(u,d,a,s,n[2],17,606105819),s=gs(s,u,d,a,n[3],22,-1044525330),a=gs(a,s,u,d,n[4],7,-176418897),d=gs(d,a,s,u,n[5],12,1200080426),u=gs(u,d,a,s,n[6],17,-1473231341),s=gs(s,u,d,a,n[7],22,-45705983),a=gs(a,s,u,d,n[8],7,1770035416),d=gs(d,a,s,u,n[9],12,-1958414417),u=gs(u,d,a,s,n[10],17,-42063),s=gs(s,u,d,a,n[11],22,-1990404162),a=gs(a,s,u,d,n[12],7,1804603682),d=gs(d,a,s,u,n[13],12,-40341101),u=gs(u,d,a,s,n[14],17,-1502002290),a=xs(a,s=gs(s,u,d,a,n[15],22,1236535329),u,d,n[1],5,-165796510),d=xs(d,a,s,u,n[6],9,-1069501632),u=xs(u,d,a,s,n[11],14,643717713),s=xs(s,u,d,a,n[0],20,-373897302),a=xs(a,s,u,d,n[5],5,-701558691),d=xs(d,a,s,u,n[10],9,38016083),u=xs(u,d,a,s,n[15],14,-660478335),s=xs(s,u,d,a,n[4],20,-405537848),a=xs(a,s,u,d,n[9],5,568446438),d=xs(d,a,s,u,n[14],9,-1019803690),u=xs(u,d,a,s,n[3],14,-187363961),s=xs(s,u,d,a,n[8],20,1163531501),a=xs(a,s,u,d,n[13],5,-1444681467),d=xs(d,a,s,u,n[2],9,-51403784),u=xs(u,d,a,s,n[7],14,1735328473),a=ys(a,s=xs(s,u,d,a,n[12],20,-1926607734),u,d,n[5],4,-378558),d=ys(d,a,s,u,n[8],11,-2022574463),u=ys(u,d,a,s,n[11],16,1839030562),s=ys(s,u,d,a,n[14],23,-35309556),a=ys(a,s,u,d,n[1],4,-1530992060),d=ys(d,a,s,u,n[4],11,1272893353),u=ys(u,d,a,s,n[7],16,-155497632),s=ys(s,u,d,a,n[10],23,-1094730640),a=ys(a,s,u,d,n[13],4,681279174),d=ys(d,a,s,u,n[0],11,-358537222),u=ys(u,d,a,s,n[3],16,-722521979),s=ys(s,u,d,a,n[6],23,76029189),a=ys(a,s,u,d,n[9],4,-640364487),d=ys(d,a,s,u,n[12],11,-421815835),u=ys(u,d,a,s,n[15],16,530742520),a=ms(a,s=ys(s,u,d,a,n[2],23,-995338651),u,d,n[0],6,-198630844),d=ms(d,a,s,u,n[7],10,1126891415),u=ms(u,d,a,s,n[14],15,-1416354905),s=ms(s,u,d,a,n[5],21,-57434055),a=ms(a,s,u,d,n[12],6,1700485571),d=ms(d,a,s,u,n[3],10,-1894986606),u=ms(u,d,a,s,n[10],15,-1051523),s=ms(s,u,d,a,n[1],21,-2054922799),a=ms(a,s,u,d,n[8],6,1873313359),d=ms(d,a,s,u,n[15],10,-30611744),u=ms(u,d,a,s,n[6],15,-1560198380),s=ms(s,u,d,a,n[13],21,1309151649),a=ms(a,s,u,d,n[4],6,-145523070),d=ms(d,a,s,u,n[11],10,-1120210379),u=ms(u,d,a,s,n[2],15,718787259),s=ms(s,u,d,a,n[9],21,-343485551),o[0]=vu(a,o[0]),o[1]=vu(s,o[1]),o[2]=vu(u,o[2]),o[3]=vu(d,o[3])}function Eh(o,n,a,s,u,d){return n=vu(vu(n,o),vu(s,d)),vu(n<<u|n>>>32-u,a)}function gs(o,n,a,s,u,d,v){return Eh(n&a|~n&s,o,n,u,d,v)}function xs(o,n,a,s,u,d,v){return Eh(n&s|a&~s,o,n,u,d,v)}function ys(o,n,a,s,u,d,v){return Eh(n^a^s,o,n,u,d,v)}function ms(o,n,a,s,u,d,v){return Eh(a^(n|~s),o,n,u,d,v)}function X2(o){var n,a=o.length,s=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=o.length;n+=64)Xp(s,$m(o.substring(n-64,n)));o=o.substring(n-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<o.length;n++)u[n>>2]|=o.charCodeAt(n)<<(n%4<<3);if(u[n>>2]|=128<<(n%4<<3),n>55)for(Xp(s,u),n=0;n<16;n++)u[n]=0;return u[14]=8*a,Xp(s,u),s}function $m(o){var n,a=[];for(n=0;n<64;n+=4)a[n>>2]=o.charCodeAt(n)+(o.charCodeAt(n+1)<<8)+(o.charCodeAt(n+2)<<16)+(o.charCodeAt(n+3)<<24);return a}var U1="0123456789abcdef".split("");function Ym(o){for(var n="",a=0;a<4;a++)n+=U1[o>>8*a+4&15]+U1[o>>8*a&15];return n}function Gm(o){return String.fromCharCode(255&o,(65280&o)>>8,(16711680&o)>>16,(4278190080&o)>>24)}function d0(o){return X2(o).map(Gm).join("")}var Xm=(function(o){for(var n=0;n<o.length;n++)o[n]=Ym(o[n]);return o.join("")})(X2("hello"))!="5d41402abc4b2a76b9719d911017c592";function vu(o,n){if(Xm){var a=(65535&o)+(65535&n);return(o>>16)+(n>>16)+(a>>16)<<16|65535&a}return o+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function f0(o,n){var a,s,u,d;if(o!==a){for(var v=(u=o,d=1+(256/o.length|0),new Array(d+1).join(u)),g=[],f=0;f<256;f++)g[f]=f;var b=0;for(f=0;f<256;f++){var S=g[f];b=(b+S+v.charCodeAt(f))%256,g[f]=g[b],g[b]=S}a=o,s=g}else g=s;var R=n.length,q=0,T=0,V="";for(f=0;f<R;f++)T=(T+(S=g[q=(q+1)%256]))%256,g[q]=g[T],g[T]=S,v=g[(g[q]+g[T])%256],V+=String.fromCharCode(n.charCodeAt(f)^v);return V}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F1={print:4,modify:8,copy:16,"annot-forms":32};function kd(o,n,a,s){this.v=1,this.r=2;var u=192;o.forEach(function(g){if(F1.perm!==void 0)throw new Error("Invalid permission: "+g);u+=F1[g]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var d=(n+this.padding).substr(0,32),v=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(d,v),this.P=-(1+(255^u)),this.encryptionKey=d0(d+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=f0(this.encryptionKey,this.padding)}function Nd(o){if(/[^\u0000-\u00ff]/.test(o))throw new Error("Invalid PDF Name Object: "+o+", Only accept ASCII characters.");for(var n="",a=o.length,s=0;s<a;s++){var u=o.charCodeAt(s);n+=u<33||u===35||u===37||u===40||u===41||u===47||u===60||u===62||u===91||u===93||u===123||u===125||u>126?"#"+("0"+u.toString(16)).slice(-2):o[s]}return n}function H1(o){if(ka(o)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(a,s,u){if(u=u||!1,typeof a!="string"||typeof s!="function"||typeof u!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(a)||(n[a]={});var d=Math.random().toString(35);return n[a][d]=[s,!!u],d},this.unsubscribe=function(a){for(var s in n)if(n[s][a])return delete n[s][a],Object.keys(n[s]).length===0&&delete n[s],!0;return!1},this.publish=function(a){if(n.hasOwnProperty(a)){var s=Array.prototype.slice.call(arguments,1),u=[];for(var d in n[a]){var v=n[a][d];try{v[0].apply(o,s)}catch(g){Yn.console&&Wa.error("jsPDF PubSub Error",g.message,g)}v[1]&&u.push(d)}u.length&&u.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function Dh(o){if(!(this instanceof Dh))return new Dh(o);var n="opacity,stroke-opacity".split(",");for(var a in o)o.hasOwnProperty(a)&&n.indexOf(a)>=0&&(this[a]=o[a]);this.id="",this.objectNumber=-1}function Z2(o,n){this.gState=o,this.matrix=n,this.id="",this.objectNumber=-1}function Hu(o,n,a,s,u){if(!(this instanceof Hu))return new Hu(o,n,a,s,u);this.type=o==="axial"?2:3,this.coords=n,this.colors=a,Z2.call(this,s,u)}function zd(o,n,a,s,u){if(!(this instanceof zd))return new zd(o,n,a,s,u);this.boundingBox=o,this.xStep=n,this.yStep=a,this.stream="",this.cloneIndex=0,Z2.call(this,s,u)}function wn(o){var n,a=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],u=arguments[2],d=arguments[3],v=[],g=1,f=16,b="S",S=null;ka(o=o||{})==="object"&&(a=o.orientation,s=o.unit||s,u=o.format||u,d=o.compress||o.compressPdf||d,(S=o.encryption||null)!==null&&(S.userPassword=S.userPassword||"",S.ownerPassword=S.ownerPassword||"",S.userPermissions=S.userPermissions||[]),g=typeof o.userUnit=="number"?Math.abs(o.userUnit):1,o.precision!==void 0&&(n=o.precision),o.floatPrecision!==void 0&&(f=o.floatPrecision),b=o.defaultPathOperation||"S"),v=o.filters||(d===!0?["FlateEncode"]:v),s=s||"mm",a=(""+(a||"P")).toLowerCase();var R=o.putOnlyUsedFonts||!1,q={},T={internal:{},__private__:{}};T.__private__.PubSub=H1;var V="1.3",X=T.__private__.getPdfVersion=function(){return V};T.__private__.setPdfVersion=function(w){V=w};var L={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};T.__private__.getPageFormats=function(){return L};var D=T.__private__.getPageFormat=function(w){return L[w]};u=u||"a4";var ve="compat",se="advanced",ee=ve;function J(){this.saveGraphicsState(),de(new Kt(Rn,0,0,-Rn,0,Xi()*Rn).toString()+" cm"),this.setFontSize(this.getFontSize()/Rn),b="n",ee=se}function $(){this.restoreGraphicsState(),b="S",ee=ve}var I=T.__private__.combineFontStyleAndFontWeight=function(w,G){if(w=="bold"&&G=="normal"||w=="bold"&&G==400||w=="normal"&&G=="italic"||w=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(w=G==400||G==="normal"?w==="italic"?"italic":"normal":G!=700&&G!=="bold"||w!=="normal"?(G==700?"bold":G)+""+w:"bold"),w};T.advancedAPI=function(w){var G=ee===ve;return G&&J.call(this),typeof w!="function"||(w(this),G&&$.call(this)),this},T.compatAPI=function(w){var G=ee===se;return G&&$.call(this),typeof w!="function"||(w(this),G&&J.call(this)),this},T.isAdvancedAPI=function(){return ee===se};var F,O=function(w){if(ee!==se)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},he=T.roundToPrecision=T.__private__.roundToPrecision=function(w,G){var ye=n||G;if(isNaN(w)||isNaN(ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(ye).replace(/0+$/,"")};F=T.hpf=T.__private__.hpf=typeof f=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return he(w,f)}:f==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return he(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return he(w,16)};var N=T.f2=T.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return he(w,2)},C=T.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return he(w,3)},re=T.scale=T.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return ee===ve?w*Rn:ee===se?w:void 0},ie=function(w){return re((function(G){return ee===ve?Xi()-G:ee===se?G:void 0})(w))};T.__private__.setPrecision=T.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(n=parseInt(w,10))};var fe,te="00000000000000000000000000000000",ne=T.__private__.getFileId=function(){return te},pe=T.__private__.setFileId=function(w){return te=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),S!==null&&(ci=new kd(S.userPermissions,S.userPassword,S.ownerPassword,te)),te};T.setFileId=function(w){return pe(w),this},T.getFileId=function(){return ne()};var Ne=T.__private__.convertDateToPDFDate=function(w){var G=w.getTimezoneOffset(),ye=G<0?"+":"-",_e=Math.floor(Math.abs(G/60)),Ie=Math.abs(G%60),dt=[ye,W(_e),"'",W(Ie),"'"].join("");return["D:",w.getFullYear(),W(w.getMonth()+1),W(w.getDate()),W(w.getHours()),W(w.getMinutes()),W(w.getSeconds()),dt].join("")},me=T.__private__.convertPDFDateToDate=function(w){var G=parseInt(w.substr(2,4),10),ye=parseInt(w.substr(6,2),10)-1,_e=parseInt(w.substr(8,2),10),Ie=parseInt(w.substr(10,2),10),dt=parseInt(w.substr(12,2),10),ft=parseInt(w.substr(14,2),10);return new Date(G,ye,_e,Ie,dt,ft,0)},U=T.__private__.setCreationDate=function(w){var G;if(w===void 0&&(w=new Date),w instanceof Date)G=Ne(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=w}return fe=G},A=T.__private__.getCreationDate=function(w){var G=fe;return w==="jsDate"&&(G=me(fe)),G};T.setCreationDate=function(w){return U(w),this},T.getCreationDate=function(w){return A(w)};var E,W=T.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},xe=T.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},Ce=0,Te=[],Le=[],Ae=0,De=[],Ye=[],pt=!1,mt=Le;T.__private__.setCustomOutputDestination=function(w){pt=!0,mt=w};var _t=function(w){pt||(mt=w)};T.__private__.resetCustomOutputDestination=function(){pt=!1,mt=Le};var de=T.__private__.out=function(w){return w=w.toString(),Ae+=w.length+1,mt.push(w),mt},vt=T.__private__.write=function(w){return de(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},zt=T.__private__.getArrayBuffer=function(w){for(var G=w.length,ye=new ArrayBuffer(G),_e=new Uint8Array(ye);G--;)_e[G]=w.charCodeAt(G);return ye},kt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];T.__private__.getStandardFonts=function(){return kt};var ot=o.fontSize||16;T.__private__.setFontSize=T.setFontSize=function(w){return ot=ee===se?w/Rn:w,this};var sn,Ut=T.__private__.getFontSize=T.getFontSize=function(){return ee===ve?ot:ot*Rn},xn=o.R2L||!1;T.__private__.setR2L=T.setR2L=function(w){return xn=w,this},T.__private__.getR2L=T.getR2L=function(){return xn};var nn,Un=T.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))sn=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');sn=w}else sn=parseInt(w,10)};T.__private__.getZoomMode=function(){return sn};var Ct,Mt=T.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');nn=w};T.__private__.getPageMode=function(){return nn};var ri=T.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Ct=w};T.__private__.getLayoutMode=function(){return Ct},T.__private__.setDisplayMode=T.setDisplayMode=function(w,G,ye){return Un(w),ri(G),Mt(ye),this};var ht={title:"",subject:"",author:"",keywords:"",creator:""};T.__private__.getDocumentProperty=function(w){if(Object.keys(ht).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ht[w]},T.__private__.getDocumentProperties=function(){return ht},T.__private__.setDocumentProperties=T.setProperties=T.setDocumentProperties=function(w){for(var G in ht)ht.hasOwnProperty(G)&&w[G]&&(ht[G]=w[G]);return this},T.__private__.setDocumentProperty=function(w,G){if(Object.keys(ht).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ht[w]=G};var St,Rn,Zt,_n,Tn,ln={},yn={},nt=[],Qt={},Wt={},Vt={},bn={},Fi=null,Mn=0,fn=[],$t=new H1(T),To=o.hotfixes||[],eo={},xo={},Co=[],Kt=function w(G,ye,_e,Ie,dt,ft){if(!(this instanceof w))return new w(G,ye,_e,Ie,dt,ft);isNaN(G)&&(G=1),isNaN(ye)&&(ye=0),isNaN(_e)&&(_e=0),isNaN(Ie)&&(Ie=1),isNaN(dt)&&(dt=0),isNaN(ft)&&(ft=0),this._matrix=[G,ye,_e,Ie,dt,ft]};Object.defineProperty(Kt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Kt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Kt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Kt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Kt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Kt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Kt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Kt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Kt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Kt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Kt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Kt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Kt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Kt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Kt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Kt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Kt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(w)},Kt.prototype.multiply=function(w){var G=w.sx*this.sx+w.shy*this.shx,ye=w.sx*this.shy+w.shy*this.sy,_e=w.shx*this.sx+w.sy*this.shx,Ie=w.shx*this.shy+w.sy*this.sy,dt=w.tx*this.sx+w.ty*this.shx+this.tx,ft=w.tx*this.shy+w.ty*this.sy+this.ty;return new Kt(G,ye,_e,Ie,dt,ft)},Kt.prototype.decompose=function(){var w=this.sx,G=this.shy,ye=this.shx,_e=this.sy,Ie=this.tx,dt=this.ty,ft=Math.sqrt(w*w+G*G),Yt=(w/=ft)*ye+(G/=ft)*_e;ye-=w*Yt,_e-=G*Yt;var Ot=Math.sqrt(ye*ye+_e*_e);return Yt/=Ot,w*(_e/=Ot)<G*(ye/=Ot)&&(w=-w,G=-G,Yt=-Yt,ft=-ft),{scale:new Kt(ft,0,0,Ot,0,0),translate:new Kt(1,0,0,1,Ie,dt),rotate:new Kt(w,G,-G,w,0,0),skew:new Kt(1,0,Yt,1,0,0)}},Kt.prototype.toString=function(w){return this.join(" ")},Kt.prototype.inversed=function(){var w=this.sx,G=this.shy,ye=this.shx,_e=this.sy,Ie=this.tx,dt=this.ty,ft=1/(w*_e-G*ye),Yt=_e*ft,Ot=-G*ft,jn=-ye*ft,vn=w*ft;return new Kt(Yt,Ot,jn,vn,-Yt*Ie-jn*dt,-Ot*Ie-vn*dt)},Kt.prototype.applyToPoint=function(w){var G=w.x*this.sx+w.y*this.shx+this.tx,ye=w.x*this.shy+w.y*this.sy+this.ty;return new Ko(G,ye)},Kt.prototype.applyToRectangle=function(w){var G=this.applyToPoint(w),ye=this.applyToPoint(new Ko(w.x+w.w,w.y+w.h));return new Os(G.x,G.y,ye.x-G.x,ye.y-G.y)},Kt.prototype.clone=function(){var w=this.sx,G=this.shy,ye=this.shx,_e=this.sy,Ie=this.tx,dt=this.ty;return new Kt(w,G,ye,_e,Ie,dt)},T.Matrix=Kt;var Ao=T.matrixMult=function(w,G){return G.multiply(w)},rr=new Kt(1,0,0,1,0,0);T.unitMatrix=T.identityMatrix=rr;var Go=function(w,G){if(!Wt[w]){var ye=(G instanceof Hu?"Sh":"P")+(Object.keys(Qt).length+1).toString(10);G.id=ye,Wt[w]=ye,Qt[ye]=G,$t.publish("addPattern",G)}};T.ShadingPattern=Hu,T.TilingPattern=zd,T.addShadingPattern=function(w,G){return O("addShadingPattern()"),Go(w,G),this},T.beginTilingPattern=function(w){O("beginTilingPattern()"),$l(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},T.endTilingPattern=function(w,G){O("endTilingPattern()"),G.stream=Ye[E].join(`
`),Go(w,G),$t.publish("endTilingPattern",G),Co.pop().restore()};var jt,si=T.__private__.newObject=function(){var w=li();return zi(w,!0),w},li=T.__private__.newObjectDeferred=function(){return Ce++,Te[Ce]=function(){return Ae},Ce},zi=function(w,G){return G=typeof G=="boolean"&&G,Te[w]=Ae,G&&de(w+" 0 obj"),w},bs=T.__private__.newAdditionalObject=function(){var w={objId:li(),content:""};return De.push(w),w},ko=li(),Hi=li(),la=T.__private__.decodeColorString=function(w){var G=w.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length!==5||G[4]!=="k"&&G[4]!=="K"||(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var ye=parseFloat(G[0]);G=[ye,ye,ye,"r"]}for(var _e="#",Ie=0;Ie<3;Ie++)_e+=("0"+Math.floor(255*parseFloat(G[Ie])).toString(16)).slice(-2);return _e},ba=T.__private__.encodeColorString=function(w){var G;typeof w=="string"&&(w={ch1:w});var ye=w.ch1,_e=w.ch2,Ie=w.ch3,dt=w.ch4,ft=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ye=="string"&&ye.charAt(0)!=="#"){var Yt=new G2(ye);if(Yt.ok)ye=Yt.toHex();else if(!/^\d*\.?\d*$/.test(ye))throw new Error('Invalid color "'+ye+'" passed to jsPDF.encodeColorString.')}if(typeof ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ye)&&(ye="#"+ye[1]+ye[1]+ye[2]+ye[2]+ye[3]+ye[3]),typeof ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ye)){var Ot=parseInt(ye.substr(1),16);ye=Ot>>16&255,_e=Ot>>8&255,Ie=255&Ot}if(_e===void 0||dt===void 0&&ye===_e&&_e===Ie)G=typeof ye=="string"?ye+" "+ft[0]:w.precision===2?N(ye/255)+" "+ft[0]:C(ye/255)+" "+ft[0];else if(dt===void 0||ka(dt)==="object"){if(dt&&!isNaN(dt.a)&&dt.a===0)return["1.","1.","1.",ft[1]].join(" ");G=typeof ye=="string"?[ye,_e,Ie,ft[1]].join(" "):w.precision===2?[N(ye/255),N(_e/255),N(Ie/255),ft[1]].join(" "):[C(ye/255),C(_e/255),C(Ie/255),ft[1]].join(" ")}else G=typeof ye=="string"?[ye,_e,Ie,dt,ft[2]].join(" "):w.precision===2?[N(ye),N(_e),N(Ie),N(dt),ft[2]].join(" "):[C(ye),C(_e),C(Ie),C(dt),ft[2]].join(" ");return G},No=T.__private__.getFilters=function(){return v},Bn=T.__private__.putStream=function(w){var G=(w=w||{}).data||"",ye=w.filters||No(),_e=w.alreadyAppliedFilters||[],Ie=w.addLength1||!1,dt=G.length,ft=w.objectId,Yt=function(Na){return Na};if(S!==null&&ft===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");S!==null&&(Yt=ci.encryptor(ft,0));var Ot={};ye===!0&&(ye=["FlateEncode"]);var jn=w.additionalKeyValues||[],vn=(Ot=wn.API.processDataByFilters!==void 0?wn.API.processDataByFilters(G,ye):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(_e)?_e.join(" "):_e.toString());if(Ot.data.length!==0&&(jn.push({key:"Length",value:Ot.data.length}),Ie===!0&&jn.push({key:"Length1",value:dt})),vn.length!=0)if(vn.split("/").length-1==1)jn.push({key:"Filter",value:vn});else{jn.push({key:"Filter",value:"["+vn+"]"});for(var pi=0;pi<jn.length;pi+=1)if(jn[pi].key==="DecodeParms"){for(var Mi=[],Ba=0;Ba<Ot.reverseChain.split("/").length-1;Ba+=1)Mi.push("null");Mi.push(jn[pi].value),jn[pi].value="["+Mi.join(" ")+"]"}}de("<<");for(var Zn=0;Zn<jn.length;Zn++)de("/"+jn[Zn].key+" "+jn[Zn].value);de(">>"),Ot.data.length!==0&&(de("stream"),de(Yt(Ot.data)),de("endstream"))},kr=T.__private__.putPage=function(w){var G=w.number,ye=w.data,_e=w.objId,Ie=w.contentsObjId;zi(_e,!0),de("<</Type /Page"),de("/Parent "+w.rootDictionaryObjId+" 0 R"),de("/Resources "+w.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(F(w.mediaBox.bottomLeftX))+" "+parseFloat(F(w.mediaBox.bottomLeftY))+" "+F(w.mediaBox.topRightX)+" "+F(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&de("/CropBox ["+F(w.cropBox.bottomLeftX)+" "+F(w.cropBox.bottomLeftY)+" "+F(w.cropBox.topRightX)+" "+F(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&de("/BleedBox ["+F(w.bleedBox.bottomLeftX)+" "+F(w.bleedBox.bottomLeftY)+" "+F(w.bleedBox.topRightX)+" "+F(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&de("/TrimBox ["+F(w.trimBox.bottomLeftX)+" "+F(w.trimBox.bottomLeftY)+" "+F(w.trimBox.topRightX)+" "+F(w.trimBox.topRightY)+"]"),w.artBox!==null&&de("/ArtBox ["+F(w.artBox.bottomLeftX)+" "+F(w.artBox.bottomLeftY)+" "+F(w.artBox.topRightX)+" "+F(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&de("/UserUnit "+w.userUnit),$t.publish("putPage",{objId:_e,pageContext:fn[G],pageNumber:G,page:ye}),de("/Contents "+Ie+" 0 R"),de(">>"),de("endobj");var dt=ye.join(`
`);return ee===se&&(dt+=`
Q`),zi(Ie,!0),Bn({data:dt,filters:No(),objectId:Ie}),de("endobj"),_e},hi=T.__private__.putPages=function(){var w,G,ye=[];for(w=1;w<=Mn;w++)fn[w].objId=li(),fn[w].contentsObjId=li();for(w=1;w<=Mn;w++)ye.push(kr({number:w,data:Ye[w],objId:fn[w].objId,contentsObjId:fn[w].contentsObjId,mediaBox:fn[w].mediaBox,cropBox:fn[w].cropBox,bleedBox:fn[w].bleedBox,trimBox:fn[w].trimBox,artBox:fn[w].artBox,userUnit:fn[w].userUnit,rootDictionaryObjId:ko,resourceDictionaryObjId:Hi}));zi(ko,!0),de("<</Type /Pages");var _e="/Kids [";for(G=0;G<Mn;G++)_e+=ye[G]+" 0 R ";de(_e+"]"),de("/Count "+Mn),de(">>"),de("endobj"),$t.publish("postPutPages")},sr=function(w){$t.publish("putFont",{font:w,out:de,newObject:si,putStream:Bn}),w.isAlreadyPutted!==!0&&(w.objectNumber=si(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Nd(w.postScriptName)),de("/Subtype /Type1"),typeof w.encoding=="string"&&de("/Encoding /"+w.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},mi=function(w){w.objectNumber=si();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[F(w.x),F(w.y),F(w.x+w.width),F(w.y+w.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var ye=w.pages[1].join(`
`);Bn({data:ye,additionalKeyValues:G,objectId:w.objectNumber}),de("endobj")},lr=function(w,G){G||(G=21);var ye=si(),_e=(function(ft,Yt){var Ot,jn=[],vn=1/(Yt-1);for(Ot=0;Ot<1;Ot+=vn)jn.push(Ot);if(jn.push(1),ft[0].offset!=0){var pi={offset:0,color:ft[0].color};ft.unshift(pi)}if(ft[ft.length-1].offset!=1){var Mi={offset:1,color:ft[ft.length-1].color};ft.push(Mi)}for(var Ba="",Zn=0,Na=0;Na<jn.length;Na++){for(Ot=jn[Na];Ot>ft[Zn+1].offset;)Zn++;var ji=ft[Zn].offset,Va=(Ot-ji)/(ft[Zn+1].offset-ji),$a=ft[Zn].color,Qo=ft[Zn+1].color;Ba+=xe(Math.round((1-Va)*$a[0]+Va*Qo[0]).toString(16))+xe(Math.round((1-Va)*$a[1]+Va*Qo[1]).toString(16))+xe(Math.round((1-Va)*$a[2]+Va*Qo[2]).toString(16))}return Ba.trim()})(w.colors,G),Ie=[];Ie.push({key:"FunctionType",value:"0"}),Ie.push({key:"Domain",value:"[0.0 1.0]"}),Ie.push({key:"Size",value:"["+G+"]"}),Ie.push({key:"BitsPerSample",value:"8"}),Ie.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ie.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Bn({data:_e,additionalKeyValues:Ie,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ye}),de("endobj"),w.objectNumber=si(),de("<< /ShadingType "+w.type),de("/ColorSpace /DeviceRGB");var dt="/Coords ["+F(parseFloat(w.coords[0]))+" "+F(parseFloat(w.coords[1]))+" ";w.type===2?dt+=F(parseFloat(w.coords[2]))+" "+F(parseFloat(w.coords[3])):dt+=F(parseFloat(w.coords[2]))+" "+F(parseFloat(w.coords[3]))+" "+F(parseFloat(w.coords[4]))+" "+F(parseFloat(w.coords[5])),de(dt+="]"),w.matrix&&de("/Matrix ["+w.matrix.toString()+"]"),de("/Function "+ye+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},_i=function(w,G){var ye=li(),_e=si();G.push({resourcesOid:ye,objectOid:_e}),w.objectNumber=_e;var Ie=[];Ie.push({key:"Type",value:"/Pattern"}),Ie.push({key:"PatternType",value:"1"}),Ie.push({key:"PaintType",value:"1"}),Ie.push({key:"TilingType",value:"1"}),Ie.push({key:"BBox",value:"["+w.boundingBox.map(F).join(" ")+"]"}),Ie.push({key:"XStep",value:F(w.xStep)}),Ie.push({key:"YStep",value:F(w.yStep)}),Ie.push({key:"Resources",value:ye+" 0 R"}),w.matrix&&Ie.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Bn({data:w.stream,additionalKeyValues:Ie,objectId:w.objectNumber}),de("endobj")},vs=function(w){for(var G in w.objectNumber=si(),de("<<"),w)switch(G){case"opacity":de("/ca "+N(w[G]));break;case"stroke-opacity":de("/CA "+N(w[G]))}de(">>"),de("endobj")},cr=function(w){zi(w.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var G in de("/Font <<"),ln)ln.hasOwnProperty(G)&&(R===!1||R===!0&&q.hasOwnProperty(G))&&de("/"+G+" "+ln[G].objectNumber+" 0 R");de(">>")})(),(function(){if(Object.keys(Qt).length>0){for(var G in de("/Shading <<"),Qt)Qt.hasOwnProperty(G)&&Qt[G]instanceof Hu&&Qt[G].objectNumber>=0&&de("/"+G+" "+Qt[G].objectNumber+" 0 R");$t.publish("putShadingPatternDict"),de(">>")}})(),(function(G){if(Object.keys(Qt).length>0){for(var ye in de("/Pattern <<"),Qt)Qt.hasOwnProperty(ye)&&Qt[ye]instanceof T.TilingPattern&&Qt[ye].objectNumber>=0&&Qt[ye].objectNumber<G&&de("/"+ye+" "+Qt[ye].objectNumber+" 0 R");$t.publish("putTilingPatternDict"),de(">>")}})(w.objectOid),(function(){if(Object.keys(Vt).length>0){var G;for(G in de("/ExtGState <<"),Vt)Vt.hasOwnProperty(G)&&Vt[G].objectNumber>=0&&de("/"+G+" "+Vt[G].objectNumber+" 0 R");$t.publish("putGStateDict"),de(">>")}})(),(function(){for(var G in de("/XObject <<"),eo)eo.hasOwnProperty(G)&&eo[G].objectNumber>=0&&de("/"+G+" "+eo[G].objectNumber+" 0 R");$t.publish("putXobjectDict"),de(">>")})(),de(">>"),de("endobj")},xa=function(w){yn[w.fontName]=yn[w.fontName]||{},yn[w.fontName][w.fontStyle]=w.id},ws=function(w,G,ye,_e,Ie){var dt={id:"F"+(Object.keys(ln).length+1).toString(10),postScriptName:w,fontName:G,fontStyle:ye,encoding:_e,isStandardFont:Ie||!1,metadata:{}};return $t.publish("addFont",{font:dt,instance:this}),ln[dt.id]=dt,xa(dt),dt.id},yo=T.__private__.pdfEscape=T.pdfEscape=function(w,G){return(function(ye,_e){var Ie,dt,ft,Yt,Ot,jn,vn,pi,Mi;if(ft=(_e=_e||{}).sourceEncoding||"Unicode",Ot=_e.outputEncoding,(_e.autoencode||Ot)&&ln[St].metadata&&ln[St].metadata[ft]&&ln[St].metadata[ft].encoding&&(Yt=ln[St].metadata[ft].encoding,!Ot&&ln[St].encoding&&(Ot=ln[St].encoding),!Ot&&Yt.codePages&&(Ot=Yt.codePages[0]),typeof Ot=="string"&&(Ot=Yt[Ot]),Ot)){for(vn=!1,jn=[],Ie=0,dt=ye.length;Ie<dt;Ie++)(pi=Ot[ye.charCodeAt(Ie)])?jn.push(String.fromCharCode(pi)):jn.push(ye[Ie]),jn[Ie].charCodeAt(0)>>8&&(vn=!0);ye=jn.join("")}for(Ie=ye.length;vn===void 0&&Ie!==0;)ye.charCodeAt(Ie-1)>>8&&(vn=!0),Ie--;if(!vn)return ye;for(jn=_e.noBOM?[]:[254,255],Ie=0,dt=ye.length;Ie<dt;Ie++){if((Mi=(pi=ye.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+ye+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jn.push(Mi),jn.push(pi-(Mi<<8))}return String.fromCharCode.apply(void 0,jn)})(w,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ir=T.__private__.beginPage=function(w){Ye[++Mn]=[],fn[Mn]={objId:0,contentsObjId:0,userUnit:Number(g),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},Gn(Mn),_t(Ye[E])},ca=function(w,G){var ye,_e,Ie;switch(a=G||a,typeof w=="string"&&(ye=D(w.toLowerCase()),Array.isArray(ye)&&(_e=ye[0],Ie=ye[1])),Array.isArray(w)&&(_e=w[0]*Rn,Ie=w[1]*Rn),isNaN(_e)&&(_e=u[0],Ie=u[1]),(_e>14400||Ie>14400)&&(Wa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),_e=Math.min(14400,_e),Ie=Math.min(14400,Ie)),u=[_e,Ie],a.substr(0,1)){case"l":Ie>_e&&(u=[Ie,_e]);break;case"p":_e>Ie&&(u=[Ie,_e])}Ir(u),Rt(Cn),de(Xn),js!==0&&de(js+" J"),lo!==0&&de(lo+" j"),$t.publish("addPage",{pageNumber:Mn})},Hl=function(w){w>0&&w<=Mn&&(Ye.splice(w,1),fn.splice(w,1),Mn--,E>Mn&&(E=Mn),this.setPage(E))},Gn=function(w){w>0&&w<=Mn&&(E=w)},va=T.__private__.getNumberOfPages=T.getNumberOfPages=function(){return Ye.length-1},Es=function(w,G,ye){var _e,Ie=void 0;return ye=ye||{},w=w!==void 0?w:ln[St].fontName,G=G!==void 0?G:ln[St].fontStyle,_e=w.toLowerCase(),yn[_e]!==void 0&&yn[_e][G]!==void 0?Ie=yn[_e][G]:yn[w]!==void 0&&yn[w][G]!==void 0?Ie=yn[w][G]:ye.disableWarning===!1&&Wa.warn("Unable to look up font label for font '"+w+"', '"+G+"'. Refer to getFontList() for available fonts."),Ie||ye.noFallback||(Ie=yn.times[G])==null&&(Ie=yn.times.normal),Ie},Xo=T.__private__.putInfo=function(){var w=si(),G=function(_e){return _e};for(var ye in S!==null&&(G=ci.encryptor(w,0)),de("<<"),de("/Producer ("+yo(G("jsPDF "+wn.version))+")"),ht)ht.hasOwnProperty(ye)&&ht[ye]&&de("/"+ye.substr(0,1).toUpperCase()+ye.substr(1)+" ("+yo(G(ht[ye]))+")");de("/CreationDate ("+yo(G(fe))+")"),de(">>"),de("endobj")},ur=T.__private__.putCatalog=function(w){var G=(w=w||{}).rootDictionaryObjId||ko;switch(si(),de("<<"),de("/Type /Catalog"),de("/Pages "+G+" 0 R"),sn||(sn="fullwidth"),sn){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ye=""+sn;ye.substr(ye.length-1)==="%"&&(sn=parseInt(sn)/100),typeof sn=="number"&&de("/OpenAction [3 0 R /XYZ null null "+N(sn)+"]")}switch(Ct||(Ct="continuous"),Ct){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}nn&&de("/PageMode /"+nn),$t.publish("putCatalog"),de(">>"),de("endobj")},Nr=T.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(Ce+1)),de("/Root "+Ce+" 0 R"),de("/Info "+(Ce-1)+" 0 R"),S!==null&&de("/Encrypt "+ci.oid+" 0 R"),de("/ID [ <"+te+"> <"+te+"> ]"),de(">>")},Vn=T.__private__.putHeader=function(){de("%PDF-"+V),de("%")},Io=T.__private__.putXRef=function(){var w="0000000000";de("xref"),de("0 "+(Ce+1)),de("0000000000 65535 f ");for(var G=1;G<=Ce;G++)typeof Te[G]=="function"?de((w+Te[G]()).slice(-10)+" 00000 n "):Te[G]!==void 0?de((w+Te[G]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},Ur=T.__private__.buildDocument=function(){var w;Ce=0,Ae=0,Le=[],Te=[],De=[],ko=li(),Hi=li(),_t(Le),$t.publish("buildDocument"),Vn(),hi(),(function(){$t.publish("putAdditionalObjects");for(var ye=0;ye<De.length;ye++){var _e=De[ye];zi(_e.objId,!0),de(_e.content),de("endobj")}$t.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var ye in ln)ln.hasOwnProperty(ye)&&(R===!1||R===!0&&q.hasOwnProperty(ye))&&sr(ln[ye])})(),(function(){var ye;for(ye in Vt)Vt.hasOwnProperty(ye)&&vs(Vt[ye])})(),(function(){for(var ye in eo)eo.hasOwnProperty(ye)&&mi(eo[ye])})(),(function(ye){var _e;for(_e in Qt)Qt.hasOwnProperty(_e)&&(Qt[_e]instanceof Hu?lr(Qt[_e]):Qt[_e]instanceof zd&&_i(Qt[_e],ye))})(w),$t.publish("putResources"),w.forEach(cr),cr({resourcesOid:Hi,objectOid:Number.MAX_SAFE_INTEGER}),$t.publish("postPutResources"),S!==null&&(ci.oid=si(),de("<<"),de("/Filter /Standard"),de("/V "+ci.v),de("/R "+ci.r),de("/U <"+ci.toHexString(ci.U)+">"),de("/O <"+ci.toHexString(ci.O)+">"),de("/P "+ci.P),de(">>"),de("endobj")),Xo(),ur();var G=Ae;return Io(),Nr(),de("startxref"),de(""+G),de("%%EOF"),_t(Ye[E]),Le.join(`
`)},zo=T.__private__.getBlob=function(w){return new Blob([zt(w)],{type:"application/pdf"})},ol=T.output=T.__private__.output=(jt=function(w,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",w){case void 0:return Ur();case"save":T.save(G.filename);break;case"arraybuffer":return zt(Ur());case"blob":return zo(Ur());case"bloburi":case"bloburl":if(Yn.URL!==void 0&&typeof Yn.URL.createObjectURL=="function")return Yn.URL&&Yn.URL.createObjectURL(zo(Ur()))||void 0;Wa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ye="",_e=Ur();try{ye=I1(_e)}catch{ye=I1(unescape(encodeURIComponent(_e)))}return"data:application/pdf;filename="+G.filename+";base64,"+ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yn)==="[object Window]"){var Ie="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",dt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(Ie=G.pdfObjectUrl,dt="");var ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ie+'"'+dt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",Yt=Yn.open();return Yt!==null&&Yt.document.write(ft),Yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yn)==="[object Window]"){var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',jn=Yn.open();if(jn!==null){jn.document.write(Ot);var vn=this;jn.document.documentElement.querySelector("#pdfViewer").onload=function(){jn.document.title=G.filename,jn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vn.output("bloburl"))}}return jn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',Mi=Yn.open();if(Mi!==null&&(Mi.document.write(pi),Mi.document.title=G.filename),Mi||typeof safari>"u")return Mi;break;case"datauri":case"dataurl":return Yn.document.location.href=this.output("datauristring",G);default:return null}},jt.foo=function(){try{return jt.apply(this,arguments)}catch(ye){var w=ye.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var G="Error in function "+w.split(`
`)[0].split("<")[0]+": "+ye.message;if(!Yn.console)throw new Error(G);Yn.console.error(G,ye),Yn.alert&&alert(G)}},jt.foo.bar=jt,jt.foo),ua=function(w){return Array.isArray(To)===!0&&To.indexOf(w)>-1};switch(s){case"pt":Rn=1;break;case"mm":Rn=72/25.4;break;case"cm":Rn=72/2.54;break;case"in":Rn=72;break;case"px":Rn=ua("px_scaling")==1?.75:96/72;break;case"pc":case"em":Rn=12;break;case"ex":Rn=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Rn=s}var ci=null;U(),pe();var Gi=T.__private__.getPageInfo=T.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:fn[w].objId,pageNumber:w,pageContext:fn[w]}},wa=T.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in fn)if(fn[G].objId===w)break;return Gi(G)},Da=T.__private__.getCurrentPageInfo=T.getCurrentPageInfo=function(){return{objId:fn[E].objId,pageNumber:E,pageContext:fn[E]}};T.addPage=function(){return ca.apply(this,arguments),this},T.setPage=function(){return Gn.apply(this,arguments),_t.call(this,Ye[E]),this},T.insertPage=function(w){return this.addPage(),this.movePage(E,w),this},T.movePage=function(w,G){var ye,_e;if(w>G){ye=Ye[w],_e=fn[w];for(var Ie=w;Ie>G;Ie--)Ye[Ie]=Ye[Ie-1],fn[Ie]=fn[Ie-1];Ye[G]=ye,fn[G]=_e,this.setPage(G)}else if(w<G){ye=Ye[w],_e=fn[w];for(var dt=w;dt<G;dt++)Ye[dt]=Ye[dt+1],fn[dt]=fn[dt+1];Ye[G]=ye,fn[G]=_e,this.setPage(G)}return this},T.deletePage=function(){return Hl.apply(this,arguments),this},T.__private__.text=T.text=function(w,G,ye,_e,Ie){var dt,ft,Yt,Ot,jn,vn,pi,Mi,Ba,Zn=(_e=_e||{}).scope||this;if(typeof w=="number"&&typeof G=="number"&&(typeof ye=="string"||Array.isArray(ye))){var Na=ye;ye=G,G=w,w=Na}if(arguments[3]instanceof Kt==0?(Yt=arguments[4],Ot=arguments[5],ka(pi=arguments[3])==="object"&&pi!==null||(typeof Yt=="string"&&(Ot=Yt,Yt=null),typeof pi=="string"&&(Ot=pi,pi=null),typeof pi=="number"&&(Yt=pi,pi=null),_e={flags:pi,angle:Yt,align:Ot})):(O("The transform parameter of text() with a Matrix value"),Ba=Ie),isNaN(G)||isNaN(ye)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Zn;var ji,Va="",$a=typeof _e.lineHeightFactor=="number"?_e.lineHeightFactor:Zo,Qo=Zn.internal.scaleFactor;function Bi(ei){return ei=ei.split("	").join(Array(_e.TabLen||9).join(" ")),yo(ei,pi)}function Is(ei){for(var ti,Ti=ei.concat(),ia=[],fo=Ti.length;fo--;)typeof(ti=Ti.shift())=="string"?ia.push(ti):Array.isArray(ei)&&(ti.length===1||ti[1]===void 0&&ti[2]===void 0)?ia.push(ti[0]):ia.push([ti[0],ti[1],ti[2]]);return ia}function hc(ei,ti){var Ti;if(typeof ei=="string")Ti=ti(ei)[0];else if(Array.isArray(ei)){for(var ia,fo,Lr=ei.concat(),Ga=[],Oi=Lr.length;Oi--;)typeof(ia=Lr.shift())=="string"?Ga.push(ti(ia)[0]):Array.isArray(ia)&&typeof ia[0]=="string"&&(fo=ti(ia[0],ia[1],ia[2]),Ga.push([fo[0],fo[1],fo[2]]));Ti=Ga}return Ti}var Us=!1,hr=!0;if(typeof w=="string")Us=!0;else if(Array.isArray(w)){var Fs=w.concat();ft=[];for(var as,co=Fs.length;co--;)(typeof(as=Fs.shift())!="string"||Array.isArray(as)&&typeof as[0]!="string")&&(hr=!1);Us=hr}if(Us===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var pr=ot/Zn.internal.scaleFactor,As=pr*($a-1);switch(_e.baseline){case"bottom":ye-=As;break;case"top":ye+=pr-As;break;case"hanging":ye+=pr-2*As;break;case"middle":ye+=pr/2-As}if((vn=_e.maxWidth||0)>0&&(typeof w=="string"?w=Zn.splitTextToSize(w,vn):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(ei,ti){return ei.concat(Zn.splitTextToSize(ti,vn))},[]))),dt={text:w,x:G,y:ye,options:_e,mutex:{pdfEscape:yo,activeFontKey:St,fonts:ln,activeFontSize:ot}},$t.publish("preProcessText",dt),w=dt.text,Yt=(_e=dt.options).angle,Ba instanceof Kt==0&&Yt&&typeof Yt=="number"){Yt*=Math.PI/180,_e.rotationDirection===0&&(Yt=-Yt),ee===se&&(Yt=-Yt);var er=Math.cos(Yt),gr=Math.sin(Yt);Ba=new Kt(er,gr,-gr,er,0,0)}else Yt&&Yt instanceof Kt&&(Ba=Yt);ee!==se||Ba||(Ba=rr),(jn=_e.charSpace||Fo)!==void 0&&(Va+=F(re(jn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Mi=_e.horizontalScale)!==void 0&&(Va+=F(100*Mi)+` Tz
`),_e.lang;var to=-1,ks=_e.renderingMode!==void 0?_e.renderingMode:_e.stroke,Ns=Zn.internal.getCurrentPageInfo().pageContext;switch(ks){case 0:case!1:case"fill":to=0;break;case 1:case!0:case"stroke":to=1;break;case 2:case"fillThenStroke":to=2;break;case 3:case"invisible":to=3;break;case 4:case"fillAndAddForClipping":to=4;break;case 5:case"strokeAndAddPathForClipping":to=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":to=6;break;case 7:case"addToPathForClipping":to=7}var Yl=Ns.usedRenderingMode!==void 0?Ns.usedRenderingMode:-1;to!==-1?Va+=to+` Tr
`:Yl!==-1&&(Va+=`0 Tr
`),to!==-1&&(Ns.usedRenderingMode=to),Ot=_e.align||"left";var mo,qr=ot*$a,_r=Zn.internal.pageSize.getWidth(),Li=ln[St];jn=_e.charSpace||Fo,vn=_e.maxWidth||0,pi=Object.assign({autoencode:!0,noBOM:!0},_e.flags);var qo=[],Ei=function(ei){return Zn.getStringUnitWidth(ei,{font:Li,charSpace:jn,fontSize:ot,doKerning:!1})*ot/Qo};if(Object.prototype.toString.call(w)==="[object Array]"){var uo;ft=Is(w),Ot!=="left"&&(mo=ft.map(Ei));var Wo,xr=0;if(Ot==="right"){G-=mo[0],w=[],co=ft.length;for(var Hs=0;Hs<co;Hs++)Hs===0?(Wo=Hr(G),uo=Ft(ye)):(Wo=re(xr-mo[Hs]),uo=-qr),w.push([ft[Hs],Wo,uo]),xr=mo[Hs]}else if(Ot==="center"){G-=mo[0]/2,w=[],co=ft.length;for(var zs=0;zs<co;zs++)zs===0?(Wo=Hr(G),uo=Ft(ye)):(Wo=re((xr-mo[zs])/2),uo=-qr),w.push([ft[zs],Wo,uo]),xr=mo[zs]}else if(Ot==="left"){w=[],co=ft.length;for(var pc=0;pc<co;pc++)w.push(ft[pc])}else if(Ot==="justify"&&Li.encoding==="Identity-H"){w=[],co=ft.length,vn=vn!==0?vn:_r;for(var gc=0,na=0;na<co;na++)if(uo=na===0?Ft(ye):-qr,Wo=na===0?Hr(G):gc,na<co-1){var xc=re((vn-mo[na])/(ft[na].split(" ").length-1)),Wr=ft[na].split(" ");w.push([Wr[0]+" ",Wo,uo]),gc=0;for(var os=1;os<Wr.length;os++){var Ya=(Ei(Wr[os-1]+" "+Wr[os])-Ei(Wr[os]))*Qo+xc;os==Wr.length-1?w.push([Wr[os],Ya,0]):w.push([Wr[os]+" ",Ya,0]),gc-=Ya}}else w.push([ft[na],Wo,uo]);w.push(["",gc,0])}else{if(Ot!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],co=ft.length,vn=vn!==0?vn:_r,na=0;na<co;na++){uo=na===0?Ft(ye):-qr,Wo=na===0?Hr(G):0;var rs=ft[na].split(" ").length-1,qs=rs>0?(vn-mo[na])/rs:0;na<co-1?qo.push(F(re(qs))):qo.push(0),w.push([ft[na],Wo,uo])}}}(typeof _e.R2L=="boolean"?_e.R2L:xn)===!0&&(w=hc(w,function(ei,ti,Ti){return[ei.split("").reverse().join(""),ti,Ti]})),dt={text:w,x:G,y:ye,options:_e,mutex:{pdfEscape:yo,activeFontKey:St,fonts:ln,activeFontSize:ot}},$t.publish("postProcessText",dt),w=dt.text,ji=dt.mutex.isHex||!1;var sl=ln[St].encoding;sl!=="WinAnsiEncoding"&&sl!=="StandardEncoding"||(w=hc(w,function(ei,ti,Ti){return[Bi(ei),ti,Ti]})),ft=Is(w),w=[];for(var Vr,_s,$r,ll=Array.isArray(ft[0])?1:0,tr="",Ea=function(ei,ti,Ti){var ia="";return Ti instanceof Kt?(Ti=typeof _e.angle=="number"?Ao(Ti,new Kt(1,0,0,1,ei,ti)):Ao(new Kt(1,0,0,1,ei,ti),Ti),ee===se&&(Ti=Ao(new Kt(1,0,0,-1,0,0),Ti)),ia=Ti.join(" ")+` Tm
`):ia=F(ei)+" "+F(ti)+` Td
`,ia},fa=0;fa<ft.length;fa++){switch(tr="",ll){case 1:$r=(ji?"<":"(")+ft[fa][0]+(ji?">":")"),Vr=parseFloat(ft[fa][1]),_s=parseFloat(ft[fa][2]);break;case 0:$r=(ji?"<":"(")+ft[fa]+(ji?">":")"),Vr=Hr(G),_s=Ft(ye)}qo!==void 0&&qo[fa]!==void 0&&(tr=qo[fa]+` Tw
`),fa===0?w.push(tr+Ea(Vr,_s,Ba)+$r):ll===0?w.push(tr+$r):ll===1&&w.push(tr+Ea(Vr,_s,Ba)+$r)}w=ll===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var bo=`BT
/`;return bo+=St+" "+ot+` Tf
`,bo+=F(ot*$a)+` TL
`,bo+=is+`
`,bo+=Va,bo+=w,de(bo+="ET"),q[St]=!0,Zn};var ql=T.__private__.clip=T.clip=function(w){return de(w==="evenodd"?"W*":"W"),this};T.clipEvenOdd=function(){return ql("evenodd")},T.__private__.discardPath=T.discardPath=function(){return de("n"),this};var Sa=T.__private__.isValidStyle=function(w){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(G=!0),G};T.__private__.setDefaultPathOperation=T.setDefaultPathOperation=function(w){return Sa(w)&&(b=w),this};var dr=T.__private__.getStyle=T.getStyle=function(w){var G=b;switch(w){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=w}return G},rl=T.close=function(){return de("h"),this};T.stroke=function(){return de("S"),this},T.fill=function(w){return fr("f",w),this},T.fillEvenOdd=function(w){return fr("f*",w),this},T.fillStroke=function(w){return fr("B",w),this},T.fillStrokeEvenOdd=function(w){return fr("B*",w),this};var fr=function(w,G){ka(G)==="object"?Qn(G,w):de(w)},Ss=function(w){w===null||ee===se&&w===void 0||(w=dr(w),de(w))};function da(w,G,ye,_e,Ie){var dt=new zd(G||this.boundingBox,ye||this.xStep,_e||this.yStep,this.gState,Ie||this.matrix);dt.stream=this.stream;var ft=w+"$$"+this.cloneIndex+++"$$";return Go(ft,dt),dt}var Qn=function(w,G){var ye=Wt[w.key],_e=Qt[ye];if(_e instanceof Hu)de("q"),de(Fr(G)),_e.gState&&T.setGState(_e.gState),de(w.matrix.toString()+" cm"),de("/"+ye+" sh"),de("Q");else if(_e instanceof zd){var Ie=new Kt(1,0,0,-1,0,Xi());w.matrix&&(Ie=Ie.multiply(w.matrix||rr),ye=da.call(_e,w.key,w.boundingBox,w.xStep,w.yStep,Ie).id),de("q"),de("/Pattern cs"),de("/"+ye+" scn"),_e.gState&&T.setGState(_e.gState),de(G),de("Q")}},Fr=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Wl=T.moveTo=function(w,G){return de(F(re(w))+" "+F(ie(G))+" m"),this},Fn=T.lineTo=function(w,G){return de(F(re(w))+" "+F(ie(G))+" l"),this},Ze=T.curveTo=function(w,G,ye,_e,Ie,dt){return de([F(re(w)),F(ie(G)),F(re(ye)),F(ie(_e)),F(re(Ie)),F(ie(dt)),"c"].join(" ")),this};T.__private__.line=T.line=function(w,G,ye,_e,Ie){if(isNaN(w)||isNaN(G)||isNaN(ye)||isNaN(_e)||!Sa(Ie))throw new Error("Invalid arguments passed to jsPDF.line");return ee===ve?this.lines([[ye-w,_e-G]],w,G,[1,1],Ie||"S"):this.lines([[ye-w,_e-G]],w,G,[1,1]).stroke()},T.__private__.lines=T.lines=function(w,G,ye,_e,Ie,dt){var ft,Yt,Ot,jn,vn,pi,Mi,Ba,Zn,Na,ji,Va;if(typeof w=="number"&&(Va=ye,ye=G,G=w,w=Va),_e=_e||[1,1],dt=dt||!1,isNaN(G)||isNaN(ye)||!Array.isArray(w)||!Array.isArray(_e)||!Sa(Ie)||typeof dt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Wl(G,ye),ft=_e[0],Yt=_e[1],jn=w.length,Na=G,ji=ye,Ot=0;Ot<jn;Ot++)(vn=w[Ot]).length===2?(Na=vn[0]*ft+Na,ji=vn[1]*Yt+ji,Fn(Na,ji)):(pi=vn[0]*ft+Na,Mi=vn[1]*Yt+ji,Ba=vn[2]*ft+Na,Zn=vn[3]*Yt+ji,Na=vn[4]*ft+Na,ji=vn[5]*Yt+ji,Ze(pi,Mi,Ba,Zn,Na,ji));return dt&&rl(),Ss(Ie),this},T.path=function(w){for(var G=0;G<w.length;G++){var ye=w[G],_e=ye.c;switch(ye.op){case"m":Wl(_e[0],_e[1]);break;case"l":Fn(_e[0],_e[1]);break;case"c":Ze.apply(this,_e);break;case"h":rl()}}return this},T.__private__.rect=T.rect=function(w,G,ye,_e,Ie){if(isNaN(w)||isNaN(G)||isNaN(ye)||isNaN(_e)||!Sa(Ie))throw new Error("Invalid arguments passed to jsPDF.rect");return ee===ve&&(_e=-_e),de([F(re(w)),F(ie(G)),F(re(ye)),F(re(_e)),"re"].join(" ")),Ss(Ie),this},T.__private__.triangle=T.triangle=function(w,G,ye,_e,Ie,dt,ft){if(isNaN(w)||isNaN(G)||isNaN(ye)||isNaN(_e)||isNaN(Ie)||isNaN(dt)||!Sa(ft))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ye-w,_e-G],[Ie-ye,dt-_e],[w-Ie,G-dt]],w,G,[1,1],ft,!0),this},T.__private__.roundedRect=T.roundedRect=function(w,G,ye,_e,Ie,dt,ft){if(isNaN(w)||isNaN(G)||isNaN(ye)||isNaN(_e)||isNaN(Ie)||isNaN(dt)||!Sa(ft))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Yt=4/3*(Math.SQRT2-1);return Ie=Math.min(Ie,.5*ye),dt=Math.min(dt,.5*_e),this.lines([[ye-2*Ie,0],[Ie*Yt,0,Ie,dt-dt*Yt,Ie,dt],[0,_e-2*dt],[0,dt*Yt,-Ie*Yt,dt,-Ie,dt],[2*Ie-ye,0],[-Ie*Yt,0,-Ie,-dt*Yt,-Ie,-dt],[0,2*dt-_e],[0,-dt*Yt,Ie*Yt,-dt,Ie,-dt]],w+Ie,G,[1,1],ft,!0),this},T.__private__.ellipse=T.ellipse=function(w,G,ye,_e,Ie){if(isNaN(w)||isNaN(G)||isNaN(ye)||isNaN(_e)||!Sa(Ie))throw new Error("Invalid arguments passed to jsPDF.ellipse");var dt=4/3*(Math.SQRT2-1)*ye,ft=4/3*(Math.SQRT2-1)*_e;return Wl(w+ye,G),Ze(w+ye,G-ft,w+dt,G-_e,w,G-_e),Ze(w-dt,G-_e,w-ye,G-ft,w-ye,G),Ze(w-ye,G+ft,w-dt,G+_e,w,G+_e),Ze(w+dt,G+_e,w+ye,G+ft,w+ye,G),Ss(Ie),this},T.__private__.circle=T.circle=function(w,G,ye,_e){if(isNaN(w)||isNaN(G)||isNaN(ye)||!Sa(_e))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,G,ye,ye,_e)},T.setFont=function(w,G,ye){return ye&&(G=I(G,ye)),St=Es(w,G,{disableWarning:!1}),this};var vi=T.__private__.getFont=T.getFont=function(){return ln[Es.apply(T,arguments)]};T.__private__.getFontList=T.getFontList=function(){var w,G,ye={};for(w in yn)if(yn.hasOwnProperty(w))for(G in ye[w]=[],yn[w])yn[w].hasOwnProperty(G)&&ye[w].push(G);return ye},T.addFont=function(w,G,ye,_e,Ie){var dt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&dt.indexOf(arguments[3])!==-1?Ie=arguments[3]:arguments[3]&&dt.indexOf(arguments[3])==-1&&(ye=I(ye,_e)),ws.call(this,w,G,ye,Ie=Ie||"Identity-H")};var Zo,Cn=o.lineWidth||.200025,Jt=T.__private__.getLineWidth=T.getLineWidth=function(){return Cn},Rt=T.__private__.setLineWidth=T.setLineWidth=function(w){return Cn=w,de(F(re(w))+" w"),this};T.__private__.setLineDash=wn.API.setLineDash=wn.API.setLineDashPattern=function(w,G){if(w=w||[],G=G||0,isNaN(G)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(ye){return F(re(ye))}).join(" "),G=F(re(G)),de("["+w+"] "+G+" d"),this};var Sn=T.__private__.getLineHeight=T.getLineHeight=function(){return ot*Zo};T.__private__.getLineHeight=T.getLineHeight=function(){return ot*Zo};var ui=T.__private__.setLineHeightFactor=T.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Zo=w),this},An=T.__private__.getLineHeightFactor=T.getLineHeightFactor=function(){return Zo};ui(o.lineHeight);var Hr=T.__private__.getHorizontalCoordinate=function(w){return re(w)},Ft=T.__private__.getVerticalCoordinate=function(w){return ee===se?w:fn[E].mediaBox.topRightY-fn[E].mediaBox.bottomLeftY-re(w)},wi=T.__private__.getHorizontalCoordinateString=T.getHorizontalCoordinateString=function(w){return F(Hr(w))},cn=T.__private__.getVerticalCoordinateString=T.getVerticalCoordinateString=function(w){return F(Ft(w))},Xn=o.strokeColor||"0 G";T.__private__.getStrokeColor=T.getDrawColor=function(){return la(Xn)},T.__private__.setStrokeColor=T.setDrawColor=function(w,G,ye,_e){return Xn=ba({ch1:w,ch2:G,ch3:ye,ch4:_e,pdfColorType:"draw",precision:2}),de(Xn),this};var ns=o.fillColor||"0 g";T.__private__.getFillColor=T.getFillColor=function(){return la(ns)},T.__private__.setFillColor=T.setFillColor=function(w,G,ye,_e){return ns=ba({ch1:w,ch2:G,ch3:ye,ch4:_e,pdfColorType:"fill",precision:2}),de(ns),this};var is=o.textColor||"0 g",Uo=T.__private__.getTextColor=T.getTextColor=function(){return la(is)};T.__private__.setTextColor=T.setTextColor=function(w,G,ye,_e){return is=ba({ch1:w,ch2:G,ch3:ye,ch4:_e,pdfColorType:"text",precision:3}),this};var Fo=o.charSpace,zr=T.__private__.getCharSpace=T.getCharSpace=function(){return parseFloat(Fo||0)};T.__private__.setCharSpace=T.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fo=w,this};var js=0;T.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},T.__private__.setLineCap=T.setLineCap=function(w){var G=T.CapJoinStyles[w];if(G===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return js=G,de(G+" J"),this};var lo=0;T.__private__.setLineJoin=T.setLineJoin=function(w){var G=T.CapJoinStyles[w];if(G===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lo=G,de(G+" j"),this},T.__private__.setLineMiterLimit=T.__private__.setMiterLimit=T.setLineMiterLimit=T.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(F(re(w))+" M"),this},T.GState=Dh,T.setGState=function(w){(w=typeof w=="string"?Vt[bn[w]]:Ts(null,w)).equals(Fi)||(de("/"+w.id+" gs"),Fi=w)};var Ts=function(w,G){if(!w||!bn[w]){var ye=!1;for(var _e in Vt)if(Vt.hasOwnProperty(_e)&&Vt[_e].equals(G)){ye=!0;break}if(ye)G=Vt[_e];else{var Ie="GS"+(Object.keys(Vt).length+1).toString(10);Vt[Ie]=G,G.id=Ie}return w&&(bn[w]=G.id),$t.publish("addGState",G),G}};T.addGState=function(w,G){return Ts(w,G),this},T.saveGraphicsState=function(){return de("q"),nt.push({key:St,size:ot,color:is}),this},T.restoreGraphicsState=function(){de("Q");var w=nt.pop();return St=w.key,ot=w.size,is=w.color,Fi=null,this},T.setCurrentTransformationMatrix=function(w){return de(w.toString()+" cm"),this},T.comment=function(w){return de("#"+w),this};var Ko=function(w,G){var ye=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ye},set:function(dt){isNaN(dt)||(ye=parseFloat(dt))}});var _e=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _e},set:function(dt){isNaN(dt)||(_e=parseFloat(dt))}});var Ie="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ie},set:function(dt){Ie=dt.toString()}}),this},Os=function(w,G,ye,_e){Ko.call(this,w,G),this.type="rect";var Ie=ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ie},set:function(ft){isNaN(ft)||(Ie=parseFloat(ft))}});var dt=_e||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return dt},set:function(ft){isNaN(ft)||(dt=parseFloat(ft))}}),this},Vl=function(){this.page=Mn,this.currentPage=E,this.pages=Ye.slice(0),this.pagesContext=fn.slice(0),this.x=Zt,this.y=_n,this.matrix=Tn,this.width=Ho(E),this.height=Cs(E),this.outputDestination=mt,this.id="",this.objectNumber=-1};Vl.prototype.restore=function(){Mn=this.page,E=this.currentPage,fn=this.pagesContext,Ye=this.pages,Zt=this.x,_n=this.y,Tn=this.matrix,Si(E,this.width),Ma(E,this.height),mt=this.outputDestination};var $l=function(w,G,ye,_e,Ie){Co.push(new Vl),Mn=E=0,Ye=[],Zt=w,_n=G,Tn=Ie,Ir([ye,_e])};for(var hn in T.beginFormObject=function(w,G,ye,_e,Ie){return $l(w,G,ye,_e,Ie),this},T.endFormObject=function(w){return(function(G){if(xo[G])Co.pop().restore();else{var ye=new Vl,_e="Xo"+(Object.keys(eo).length+1).toString(10);ye.id=_e,xo[G]=_e,eo[_e]=ye,$t.publish("addFormObject",ye),Co.pop().restore()}})(w),this},T.doFormObject=function(w,G){var ye=eo[xo[w]];return de("q"),de(G.toString()+" cm"),de("/"+ye.id+" Do"),de("Q"),this},T.getFormObject=function(w){var G=eo[xo[w]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},T.save=function(w,G){return w=w||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?(Fu(zo(Ur()),w),typeof Fu.unload=="function"&&Yn.setTimeout&&setTimeout(Fu.unload,911),this):new Promise(function(ye,_e){try{var Ie=Fu(zo(Ur()),w);typeof Fu.unload=="function"&&Yn.setTimeout&&setTimeout(Fu.unload,911),ye(Ie)}catch(dt){_e(dt.message)}})},wn.API)wn.API.hasOwnProperty(hn)&&(hn==="events"&&wn.API.events.length?(function(w,G){var ye,_e,Ie;for(Ie=G.length-1;Ie!==-1;Ie--)ye=G[Ie][0],_e=G[Ie][1],w.subscribe.apply(w,[ye].concat(typeof _e=="function"?[_e]:_e))})($t,wn.API.events):T[hn]=wn.API[hn]);function Ho(w){return fn[w].mediaBox.topRightX-fn[w].mediaBox.bottomLeftX}function Si(w,G){fn[w].mediaBox.topRightX=G+fn[w].mediaBox.bottomLeftX}function Cs(w){return fn[w].mediaBox.topRightY-fn[w].mediaBox.bottomLeftY}function Ma(w,G){fn[w].mediaBox.topRightY=G+fn[w].mediaBox.bottomLeftY}var qi=T.getPageWidth=function(w){return Ho(w=w||E)/Rn},_o=T.setPageWidth=function(w,G){Si(w,G*Rn)},Xi=T.getPageHeight=function(w){return Cs(w=w||E)/Rn},Jo=T.setPageHeight=function(w,G){Ma(w,G*Rn)};return T.internal={pdfEscape:yo,getStyle:dr,getFont:vi,getFontSize:Ut,getCharSpace:zr,getTextColor:Uo,getLineHeight:Sn,getLineHeightFactor:An,getLineWidth:Jt,write:vt,getHorizontalCoordinate:Hr,getVerticalCoordinate:Ft,getCoordinateString:wi,getVerticalCoordinateString:cn,collections:{},newObject:si,newAdditionalObject:bs,newObjectDeferred:li,newObjectDeferredBegin:zi,getFilters:No,putStream:Bn,events:$t,scaleFactor:Rn,pageSize:{getWidth:function(){return qi(E)},setWidth:function(w){_o(E,w)},getHeight:function(){return Xi(E)},setHeight:function(w){Jo(E,w)}},encryptionOptions:S,encryption:ci,getEncryptor:function(w){return S!==null?ci.encryptor(w,0):function(G){return G}},output:ol,getNumberOfPages:va,get pages(){return Ye},out:de,f2:N,f3:C,getPageInfo:Gi,getPageInfoByObjId:wa,getCurrentPageInfo:Da,getPDFVersion:X,Point:Ko,Rectangle:Os,Matrix:Kt,hasHotfix:ua},Object.defineProperty(T.internal.pageSize,"width",{get:function(){return qi(E)},set:function(w){_o(E,w)},enumerable:!0,configurable:!0}),Object.defineProperty(T.internal.pageSize,"height",{get:function(){return Xi(E)},set:function(w){Jo(E,w)},enumerable:!0,configurable:!0}),(function(w){for(var G=0,ye=kt.length;G<ye;G++){var _e=ws.call(this,w[G][0],w[G][1],w[G][2],kt[G][3],!0);R===!1&&(q[_e]=!0);var Ie=w[G][0].split("-");xa({id:_e,fontName:Ie[0],fontStyle:Ie[1]||""})}$t.publish("addFonts",{fonts:ln,dictionary:yn})}).call(T,kt),St="F1",ca(u,a),$t.publish("initialized"),T}kd.prototype.lsbFirstWord=function(o){return String.fromCharCode(255&o,o>>8&255,o>>16&255,o>>24&255)},kd.prototype.toHexString=function(o){return o.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},kd.prototype.hexToBytes=function(o){for(var n=[],a=0;a<o.length;a+=2)n.push(String.fromCharCode(parseInt(o.substr(a,2),16)));return n.join("")},kd.prototype.processOwnerPassword=function(o,n){return f0(d0(n).substr(0,5),o)},kd.prototype.encryptor=function(o,n){var a=d0(this.encryptionKey+String.fromCharCode(255&o,o>>8&255,o>>16&255,255&n,n>>8&255)).substr(0,10);return function(s){return f0(a,s)}},Dh.prototype.equals=function(o){var n,a="id,objectNumber,equals";if(!o||ka(o)!==ka(this))return!1;var s=0;for(n in this)if(!(a.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!o.hasOwnProperty(n)||this[n]!==o[n])return!1;s++}for(n in o)o.hasOwnProperty(n)&&a.indexOf(n)<0&&s--;return s===0},wn.API={events:[]},wn.version="3.0.4";var Oo=wn.API,v0=1,Gu=function(o){return o.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Td=function(o){return o.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ii=function(o){return o.toFixed(2)},bu=function(o){return o.toFixed(5)};Oo.__acroform__={};var al=function(o,n){o.prototype=Object.create(n.prototype),o.prototype.constructor=o},q1=function(o){return o*v0},Lc=function(o){var n=new J2,a=dn.internal.getHeight(o)||0,s=dn.internal.getWidth(o)||0;return n.BBox=[0,0,Number(ii(s)),Number(ii(a))],n},Zm=Oo.__acroform__.setBit=function(o,n){if(o=o||0,n=n||0,isNaN(o)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return o|1<<n},Km=Oo.__acroform__.clearBit=function(o,n){if(o=o||0,n=n||0,isNaN(o)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return o&~(1<<n)},Jm=Oo.__acroform__.getBit=function(o,n){if(isNaN(o)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return o&1<<n?1:0},Vo=Oo.__acroform__.getBitForPdf=function(o,n){if(isNaN(o)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Jm(o,n-1)},$o=Oo.__acroform__.setBitForPdf=function(o,n){if(isNaN(o)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Zm(o,n-1)},Yo=Oo.__acroform__.clearBitForPdf=function(o,n){if(isNaN(o)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Km(o,n-1)},Qm=Oo.__acroform__.calculateCoordinates=function(o,n){var a=n.internal.getHorizontalCoordinate,s=n.internal.getVerticalCoordinate,u=o[0],d=o[1],v=o[2],g=o[3],f={};return f.lowerLeft_X=a(u)||0,f.lowerLeft_Y=s(d+g)||0,f.upperRight_X=a(u+v)||0,f.upperRight_Y=s(d)||0,[Number(ii(f.lowerLeft_X)),Number(ii(f.lowerLeft_Y)),Number(ii(f.upperRight_X)),Number(ii(f.upperRight_Y))]},eb=function(o){if(o.appearanceStreamContent)return o.appearanceStreamContent;if(o.V||o.DV){var n=[],a=o._V||o.DV,s=h0(o,a),u=o.scope.internal.getFont(o.fontName,o.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(o.scope.__private__.encodeColorString(o.color)),n.push("/"+u+" "+ii(s.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC");var d=Lc(o);return d.scope=o.scope,d.stream=n.join(`
`),d}},h0=function(o,n){var a=o.fontSize===0?o.maxFontSize:o.fontSize,s={text:"",fontSize:""},u=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");u=o.multiline?u.map(function(N){return N.split(`
`)}):u.map(function(N){return[N]});var d=a,v=dn.internal.getHeight(o)||0;v=v<0?-v:v;var g=dn.internal.getWidth(o)||0;g=g<0?-g:g;var f=function(N,C,re){if(N+1<u.length){var ie=C+" "+u[N+1][0];return Sh(ie,o,re).width<=g-4}return!1};d++;e:for(;d>0;){n="",d--;var b,S,R=Sh("3",o,d).height,q=o.multiline?v-d:(v-R)/2,T=q+=2,V=0,X=0,L=0;if(d<=0){n=`(...) Tj
`,n+="% Width of Text: "+Sh(n,o,d=12).width+", FieldWidth:"+g+`
`;break}for(var D="",ve=0,se=0;se<u.length;se++)if(u.hasOwnProperty(se)){var ee=!1;if(u[se].length!==1&&L!==u[se].length-1){if((R+2)*(ve+2)+2>v)continue e;D+=u[se][L],ee=!0,X=se,se--}else{D=(D+=u[se][L]+" ").substr(D.length-1)==" "?D.substr(0,D.length-1):D;var J=parseInt(se),$=f(J,D,d),I=se>=u.length-1;if($&&!I){D+=" ",L=0;continue}if($||I){if(I)X=J;else if(o.multiline&&(R+2)*(ve+2)+2>v)continue e}else{if(!o.multiline||(R+2)*(ve+2)+2>v)continue e;X=J}}for(var F="",O=V;O<=X;O++){var he=u[O];if(o.multiline){if(O===X){F+=he[L]+" ",L=(L+1)%he.length;continue}if(O===V){F+=he[he.length-1]+" ";continue}}F+=he[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,S=Sh(F,o,d).width,o.textAlign){case"right":b=g-S-2;break;case"center":b=(g-S)/2;break;default:b=2}n+=ii(b)+" "+ii(T)+` Td
`,n+="("+Gu(F)+`) Tj
`,n+=-ii(b)+` 0 Td
`,T=-(d+2),S=0,V=ee?X:X+1,ve++,D=""}break}return s.text=n,s.fontSize=d,s},Sh=function(o,n,a){var s=n.scope.internal.getFont(n.fontName,n.fontStyle),u=n.scope.getStringUnitWidth(o,{font:s,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:n.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:u}},tb={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nb=function(o,n){var a={type:"reference",object:o};n.internal.getPageInfo(o.page).pageContext.annotations.find(function(s){return s.type===a.type&&s.object===a.object})===void 0&&n.internal.getPageInfo(o.page).pageContext.annotations.push(a)},ib=function(o,n){if(n.scope=o,o.internal!==void 0&&(o.internal.acroformPlugin===void 0||o.internal.acroformPlugin.isInitialized===!1)){if(dc.FieldNum=0,o.internal.acroformPlugin=JSON.parse(JSON.stringify(tb)),o.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");v0=o.internal.scaleFactor,o.internal.acroformPlugin.acroFormDictionaryRoot=new Q2,o.internal.acroformPlugin.acroFormDictionaryRoot.scope=o,o.internal.acroformPlugin.acroFormDictionaryRoot._eventID=o.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(o)}),o.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var u in s)if(s.hasOwnProperty(u)){var d=s[u];d.objId=void 0,d.hasAnnotation&&nb(d,a)}})(o)}),o.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(o)}),o.internal.events.subscribe("postPutPages",function(a){(function(s,u){var d=!s;for(var v in s||(u.internal.newObjectDeferredBegin(u.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),u.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||u.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(v)){var g=s[v],f=[],b=g.Rect;if(g.Rect&&(g.Rect=Qm(g.Rect,u)),u.internal.newObjectDeferredBegin(g.objId,!0),g.DA=dn.createDefaultAppearanceStream(g),ka(g)==="object"&&typeof g.getKeyValueListForStream=="function"&&(f=g.getKeyValueListForStream()),g.Rect=b,g.hasAppearanceStream&&!g.appearanceStreamContent){var S=eb(g);f.push({key:"AP",value:"<</N "+S+">>"}),u.internal.acroformPlugin.xForms.push(S)}if(g.appearanceStreamContent){var R="";for(var q in g.appearanceStreamContent)if(g.appearanceStreamContent.hasOwnProperty(q)){var T=g.appearanceStreamContent[q];if(R+="/"+q+" ",R+="<<",Object.keys(T).length>=1||Array.isArray(T)){for(var v in T)if(T.hasOwnProperty(v)){var V=T[v];typeof V=="function"&&(V=V.call(u,g)),R+="/"+v+" "+V+" ",u.internal.acroformPlugin.xForms.indexOf(V)>=0||u.internal.acroformPlugin.xForms.push(V)}}else typeof(V=T)=="function"&&(V=V.call(u,g)),R+="/"+v+" "+V,u.internal.acroformPlugin.xForms.indexOf(V)>=0||u.internal.acroformPlugin.xForms.push(V);R+=">>"}f.push({key:"AP",value:`<<
`+R+">>"})}u.internal.putStream({additionalKeyValues:f,objectId:g.objId}),u.internal.out("endobj")}d&&(function(X,L){for(var D in X)if(X.hasOwnProperty(D)){var ve=D,se=X[D];L.internal.newObjectDeferredBegin(se.objId,!0),ka(se)==="object"&&typeof se.putStream=="function"&&se.putStream(),delete X[ve]}})(u.internal.acroformPlugin.xForms,u)})(a,o)}),o.internal.acroformPlugin.isInitialized=!0}},K2=Oo.__acroform__.arrayToPdfArray=function(o,n,a){var s=function(v){return v};if(Array.isArray(o)){for(var u="[",d=0;d<o.length;d++)switch(d!==0&&(u+=" "),ka(o[d])){case"boolean":case"number":case"object":u+=o[d].toString();break;case"string":o[d].substr(0,1)!=="/"?(n!==void 0&&a&&(s=a.internal.getEncryptor(n)),u+="("+Gu(s(o[d].toString()))+")"):u+=o[d].toString()}return u+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Zp=function(o,n,a){var s=function(u){return u};return n!==void 0&&a&&(s=a.internal.getEncryptor(n)),(o=o||"").toString(),"("+Gu(s(o))+")"},Pc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(o){this._objId=o}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Pc.prototype.toString=function(){return this.objId+" 0 R"},Pc.prototype.putStream=function(){var o=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:o,objectId:this.objId}),this.scope.internal.out("endobj")},Pc.prototype.getKeyValueListForStream=function(){var o=[],n=Object.getOwnPropertyNames(this).filter(function(d){return d!="content"&&d!="appearanceStreamContent"&&d!="scope"&&d!="objId"&&d.substring(0,1)!="_"});for(var a in n)if(Object.getOwnPropertyDescriptor(this,n[a]).configurable===!1){var s=n[a],u=this[s];u&&(Array.isArray(u)?o.push({key:s,value:K2(u,this.objId,this.scope)}):u instanceof Pc?(u.scope=this.scope,o.push({key:s,value:u.objId+" 0 R"})):typeof u!="function"&&o.push({key:s,value:u}))}return o};var J2=function(){Pc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var o,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){o=a.trim()},get:function(){return o||null}})};al(J2,Pc);var Q2=function(){Pc.call(this);var o,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(o){var a=function(s){return s};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+Gu(a(o))+")"}},set:function(a){o=a}})};al(Q2,Pc);var dc=function o(){Pc.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute F supplied.');n=D}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Vo(n,3)},set:function(D){D?this.F=$o(n,3):this.F=Yo(n,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute Ff supplied.');a=D}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(D){s=D!==void 0?D:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(D){s[0]=D}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(D){s[1]=D}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(D){s[2]=D}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(D){s[3]=D}});var u="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return u},set:function(D){switch(D){case"/Btn":case"/Tx":case"/Ch":case"/Sig":u=D;break;default:throw new Error('Invalid value "'+D+'" for attribute FT supplied.')}}});var d=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!d||d.length<1){if(this instanceof Mh)return;d="FieldObject"+o.FieldNum++}var D=function(ve){return ve};return this.scope&&(D=this.scope.internal.getEncryptor(this.objId)),"("+Gu(D(d))+")"},set:function(D){d=D.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return d},set:function(D){d=D}});var v="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return v},set:function(D){v=D}});var g="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return g},set:function(D){g=D}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(D){f=D}});var b=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return b===void 0?50/v0:b},set:function(D){b=D}});var S="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return S},set:function(D){S=D}});var R="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!R||this instanceof Mh||this instanceof qu))return Zp(R,this.objId,this.scope)},set:function(D){D=D.toString(),R=D}});var q=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(q)return this instanceof Or==0?Zp(q,this.objId,this.scope):q},set:function(D){D=D.toString(),q=this instanceof Or==0?D.substr(0,1)==="("?Td(D.substr(1,D.length-2)):Td(D):D}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Or==1?Td(q.substr(1,q.length-1)):q},set:function(D){D=D.toString(),q=this instanceof Or==1?"/"+D:D}});var T=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(T)return T},set:function(D){this.V=D}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof Or==0?Zp(T,this.objId,this.scope):T},set:function(D){D=D.toString(),T=this instanceof Or==0?D.substr(0,1)==="("?Td(D.substr(1,D.length-2)):Td(D):D}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Or==1?Td(T.substr(1,T.length-1)):T},set:function(D){D=D.toString(),T=this instanceof Or==1?"/"+D:D}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var V,X=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return X},set:function(D){D=!!D,X=D}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(V)return V},set:function(D){V=D}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,1)},set:function(D){D?this.Ff=$o(this.Ff,1):this.Ff=Yo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,2)},set:function(D){D?this.Ff=$o(this.Ff,2):this.Ff=Yo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,3)},set:function(D){D?this.Ff=$o(this.Ff,3):this.Ff=Yo(this.Ff,3)}});var L=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(L!==null)return L},set:function(D){if([0,1,2].indexOf(D)===-1)throw new Error('Invalid value "'+D+'" for attribute Q supplied.');L=D}}),Object.defineProperty(this,"textAlign",{get:function(){var D;switch(L){case 0:default:D="left";break;case 1:D="center";break;case 2:D="right"}return D},configurable:!0,enumerable:!0,set:function(D){switch(D){case"right":case 2:L=2;break;case"center":case 1:L=1;break;default:L=0}}})};al(dc,Pc);var _d=function(){dc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var o=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return o},set:function(a){o=a}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return K2(n,this.objId,this.scope)},set:function(a){var s,u;u=[],typeof(s=a)=="string"&&(u=(function(d,v,g){g||(g=1);for(var f,b=[];f=v.exec(d);)b.push(f[g]);return b})(s,/\((.*?)\)/g)),n=u}}),this.getOptions=function(){return n},this.setOptions=function(a){n=a,this.sort&&n.sort()},this.addOption=function(a){a=(a=a||"").toString(),n.push(a),this.sort&&n.sort()},this.removeOption=function(a,s){for(s=s||!1,a=(a=a||"").toString();n.indexOf(a)!==-1&&(n.splice(n.indexOf(a),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,18)},set:function(a){a?this.Ff=$o(this.Ff,18):this.Ff=Yo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=$o(this.Ff,19):this.Ff=Yo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,20)},set:function(a){a?(this.Ff=$o(this.Ff,20),n.sort()):this.Ff=Yo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,22)},set:function(a){a?this.Ff=$o(this.Ff,22):this.Ff=Yo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,23)},set:function(a){a?this.Ff=$o(this.Ff,23):this.Ff=Yo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,27)},set:function(a){a?this.Ff=$o(this.Ff,27):this.Ff=Yo(this.Ff,27)}}),this.hasAppearanceStream=!1};al(_d,dc);var Ld=function(){_d.call(this),this.fontName="helvetica",this.combo=!1};al(Ld,_d);var Pd=function(){Ld.call(this),this.combo=!0};al(Pd,Ld);var Nh=function(){Pd.call(this),this.edit=!0};al(Nh,Pd);var Or=function(){dc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,15)},set:function(a){a?this.Ff=$o(this.Ff,15):this.Ff=Yo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,16)},set:function(a){a?this.Ff=$o(this.Ff,16):this.Ff=Yo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,17)},set:function(a){a?this.Ff=$o(this.Ff,17):this.Ff=Yo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,26)},set:function(a){a?this.Ff=$o(this.Ff,26):this.Ff=Yo(this.Ff,26)}});var o,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var s,u=[];for(s in u.push("<<"),n)u.push("/"+s+" ("+Gu(a(n[s]))+")");return u.push(">>"),u.join(`
`)}},set:function(a){ka(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return o.substr(1,o.length-1)},set:function(a){o="/"+a}})};al(Or,dc);var zh=function(){Or.call(this),this.pushButton=!0};al(zh,Or);var Rd=function(){Or.call(this),this.radio=!0,this.pushButton=!1;var o=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return o},set:function(n){o=n!==void 0?n:[]}})};al(Rd,Or);var Mh=function(){var o,n;dc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(u){n=u}});var a,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var u=function(g){return g};this.scope&&(u=this.scope.internal.getEncryptor(this.objId));var d,v=[];for(d in v.push("<<"),s)v.push("/"+d+" ("+Gu(u(s[d]))+")");return v.push(">>"),v.join(`
`)},set:function(u){ka(u)==="object"&&(s=u)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(u){typeof u=="string"&&(s.CA=u)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(u){a=u}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(u){a="/"+u}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=dn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};al(Mh,dc),Rd.prototype.setAppearance=function(o){if(!("createAppearanceStream"in o)||!("getCA"in o))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var a=this.Kids[n];a.appearanceStreamContent=o.createAppearanceStream(a.optionName),a.caption=o.getCA()}},Rd.prototype.createOption=function(o){var n=new Mh;return n.Parent=this,n.optionName=o,this.Kids.push(n),ab.call(this.scope,n),n};var _h=function(){Or.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=dn.CheckBox.createAppearanceStream()};al(_h,Or);var qu=function(){dc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,13)},set:function(n){n?this.Ff=$o(this.Ff,13):this.Ff=Yo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,21)},set:function(n){n?this.Ff=$o(this.Ff,21):this.Ff=Yo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,23)},set:function(n){n?this.Ff=$o(this.Ff,23):this.Ff=Yo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,24)},set:function(n){n?this.Ff=$o(this.Ff,24):this.Ff=Yo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,25)},set:function(n){n?this.Ff=$o(this.Ff,25):this.Ff=Yo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,26)},set:function(n){n?this.Ff=$o(this.Ff,26):this.Ff=Yo(this.Ff,26)}});var o=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return o},set:function(n){o=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return o},set:function(n){Number.isInteger(n)&&(o=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};al(qu,dc);var Lh=function(){qu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,14)},set:function(o){o?this.Ff=$o(this.Ff,14):this.Ff=Yo(this.Ff,14)}}),this.password=!0};al(Lh,qu);var dn={CheckBox:{createAppearanceStream:function(){return{N:{On:dn.CheckBox.YesNormal},D:{On:dn.CheckBox.YesPushDown,Off:dn.CheckBox.OffPushDown}}},YesPushDown:function(o){var n=Lc(o);n.scope=o.scope;var a=[],s=o.scope.internal.getFont(o.fontName,o.fontStyle).id,u=o.scope.__private__.encodeColorString(o.color),d=h0(o,o.caption);return a.push("0.749023 g"),a.push("0 0 "+ii(dn.internal.getWidth(o))+" "+ii(dn.internal.getHeight(o))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+s+" "+ii(d.fontSize)+" Tf "+u),a.push("BT"),a.push(d.text),a.push("ET"),a.push("Q"),a.push("EMC"),n.stream=a.join(`
`),n},YesNormal:function(o){var n=Lc(o);n.scope=o.scope;var a=o.scope.internal.getFont(o.fontName,o.fontStyle).id,s=o.scope.__private__.encodeColorString(o.color),u=[],d=dn.internal.getHeight(o),v=dn.internal.getWidth(o),g=h0(o,o.caption);return u.push("1 g"),u.push("0 0 "+ii(v)+" "+ii(d)+" re"),u.push("f"),u.push("q"),u.push("0 0 1 rg"),u.push("0 0 "+ii(v-1)+" "+ii(d-1)+" re"),u.push("W"),u.push("n"),u.push("0 g"),u.push("BT"),u.push("/"+a+" "+ii(g.fontSize)+" Tf "+s),u.push(g.text),u.push("ET"),u.push("Q"),n.stream=u.join(`
`),n},OffPushDown:function(o){var n=Lc(o);n.scope=o.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+ii(dn.internal.getWidth(o))+" "+ii(dn.internal.getHeight(o))+" re"),a.push("f"),n.stream=a.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(o){var n={D:{Off:dn.RadioButton.Circle.OffPushDown},N:{}};return n.N[o]=dn.RadioButton.Circle.YesNormal,n.D[o]=dn.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(o){var n=Lc(o);n.scope=o.scope;var a=[],s=dn.internal.getWidth(o)<=dn.internal.getHeight(o)?dn.internal.getWidth(o)/4:dn.internal.getHeight(o)/4;s=Number((.9*s).toFixed(5));var u=dn.internal.Bezier_C,d=Number((s*u).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+bu(dn.internal.getWidth(o)/2)+" "+bu(dn.internal.getHeight(o)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+d+" "+d+" "+s+" 0 "+s+" c"),a.push("-"+d+" "+s+" -"+s+" "+d+" -"+s+" 0 c"),a.push("-"+s+" -"+d+" -"+d+" -"+s+" 0 -"+s+" c"),a.push(d+" -"+s+" "+s+" -"+d+" "+s+" 0 c"),a.push("f"),a.push("Q"),n.stream=a.join(`
`),n},YesPushDown:function(o){var n=Lc(o);n.scope=o.scope;var a=[],s=dn.internal.getWidth(o)<=dn.internal.getHeight(o)?dn.internal.getWidth(o)/4:dn.internal.getHeight(o)/4;s=Number((.9*s).toFixed(5));var u=Number((2*s).toFixed(5)),d=Number((u*dn.internal.Bezier_C).toFixed(5)),v=Number((s*dn.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+bu(dn.internal.getWidth(o)/2)+" "+bu(dn.internal.getHeight(o)/2)+" cm"),a.push(u+" 0 m"),a.push(u+" "+d+" "+d+" "+u+" 0 "+u+" c"),a.push("-"+d+" "+u+" -"+u+" "+d+" -"+u+" 0 c"),a.push("-"+u+" -"+d+" -"+d+" -"+u+" 0 -"+u+" c"),a.push(d+" -"+u+" "+u+" -"+d+" "+u+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+bu(dn.internal.getWidth(o)/2)+" "+bu(dn.internal.getHeight(o)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+v+" "+v+" "+s+" 0 "+s+" c"),a.push("-"+v+" "+s+" -"+s+" "+v+" -"+s+" 0 c"),a.push("-"+s+" -"+v+" -"+v+" -"+s+" 0 -"+s+" c"),a.push(v+" -"+s+" "+s+" -"+v+" "+s+" 0 c"),a.push("f"),a.push("Q"),n.stream=a.join(`
`),n},OffPushDown:function(o){var n=Lc(o);n.scope=o.scope;var a=[],s=dn.internal.getWidth(o)<=dn.internal.getHeight(o)?dn.internal.getWidth(o)/4:dn.internal.getHeight(o)/4;s=Number((.9*s).toFixed(5));var u=Number((2*s).toFixed(5)),d=Number((u*dn.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+bu(dn.internal.getWidth(o)/2)+" "+bu(dn.internal.getHeight(o)/2)+" cm"),a.push(u+" 0 m"),a.push(u+" "+d+" "+d+" "+u+" 0 "+u+" c"),a.push("-"+d+" "+u+" -"+u+" "+d+" -"+u+" 0 c"),a.push("-"+u+" -"+d+" -"+d+" -"+u+" 0 -"+u+" c"),a.push(d+" -"+u+" "+u+" -"+d+" "+u+" 0 c"),a.push("f"),a.push("Q"),n.stream=a.join(`
`),n}},Cross:{createAppearanceStream:function(o){var n={D:{Off:dn.RadioButton.Cross.OffPushDown},N:{}};return n.N[o]=dn.RadioButton.Cross.YesNormal,n.D[o]=dn.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(o){var n=Lc(o);n.scope=o.scope;var a=[],s=dn.internal.calculateCross(o);return a.push("q"),a.push("1 1 "+ii(dn.internal.getWidth(o)-2)+" "+ii(dn.internal.getHeight(o)-2)+" re"),a.push("W"),a.push("n"),a.push(ii(s.x1.x)+" "+ii(s.x1.y)+" m"),a.push(ii(s.x2.x)+" "+ii(s.x2.y)+" l"),a.push(ii(s.x4.x)+" "+ii(s.x4.y)+" m"),a.push(ii(s.x3.x)+" "+ii(s.x3.y)+" l"),a.push("s"),a.push("Q"),n.stream=a.join(`
`),n},YesPushDown:function(o){var n=Lc(o);n.scope=o.scope;var a=dn.internal.calculateCross(o),s=[];return s.push("0.749023 g"),s.push("0 0 "+ii(dn.internal.getWidth(o))+" "+ii(dn.internal.getHeight(o))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+ii(dn.internal.getWidth(o)-2)+" "+ii(dn.internal.getHeight(o)-2)+" re"),s.push("W"),s.push("n"),s.push(ii(a.x1.x)+" "+ii(a.x1.y)+" m"),s.push(ii(a.x2.x)+" "+ii(a.x2.y)+" l"),s.push(ii(a.x4.x)+" "+ii(a.x4.y)+" m"),s.push(ii(a.x3.x)+" "+ii(a.x3.y)+" l"),s.push("s"),s.push("Q"),n.stream=s.join(`
`),n},OffPushDown:function(o){var n=Lc(o);n.scope=o.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+ii(dn.internal.getWidth(o))+" "+ii(dn.internal.getHeight(o))+" re"),a.push("f"),n.stream=a.join(`
`),n}}},createDefaultAppearanceStream:function(o){var n=o.scope.internal.getFont(o.fontName,o.fontStyle).id,a=o.scope.__private__.encodeColorString(o.color);return"/"+n+" "+o.fontSize+" Tf "+a}};dn.internal={Bezier_C:.551915024494,calculateCross:function(o){var n=dn.internal.getWidth(o),a=dn.internal.getHeight(o),s=Math.min(n,a);return{x1:{x:(n-s)/2,y:(a-s)/2+s},x2:{x:(n-s)/2+s,y:(a-s)/2},x3:{x:(n-s)/2,y:(a-s)/2},x4:{x:(n-s)/2+s,y:(a-s)/2+s}}}},dn.internal.getWidth=function(o){var n=0;return ka(o)==="object"&&(n=q1(o.Rect[2])),n},dn.internal.getHeight=function(o){var n=0;return ka(o)==="object"&&(n=q1(o.Rect[3])),n};var ab=Oo.addField=function(o){if(ib(this,o),!(o instanceof dc))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=o).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),o.page=o.scope.internal.getCurrentPageInfo().pageNumber,this};Oo.AcroFormChoiceField=_d,Oo.AcroFormListBox=Ld,Oo.AcroFormComboBox=Pd,Oo.AcroFormEditBox=Nh,Oo.AcroFormButton=Or,Oo.AcroFormPushButton=zh,Oo.AcroFormRadioButton=Rd,Oo.AcroFormCheckBox=_h,Oo.AcroFormTextField=qu,Oo.AcroFormPasswordField=Lh,Oo.AcroFormAppearance=dn,Oo.AcroForm={ChoiceField:_d,ListBox:Ld,ComboBox:Pd,EditBox:Nh,Button:Or,PushButton:zh,RadioButton:Rd,CheckBox:_h,TextField:qu,PasswordField:Lh,Appearance:dn},wn.AcroForm={ChoiceField:_d,ListBox:Ld,ComboBox:Pd,EditBox:Nh,Button:Or,PushButton:zh,RadioButton:Rd,CheckBox:_h,TextField:qu,PasswordField:Lh,Appearance:dn};wn.AcroForm;function ex(o){return o.reduce(function(n,a,s){return n[a]=s,n},{})}(function(o){var n="addImage_";o.__addimage__={};var a="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},u=o.__addimage__.getImageFileTypeByImageData=function(N,C){var re,ie,fe,te,ne,pe=a;if((C=C||a)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if($(N))for(ne in s)for(fe=s[ne],re=0;re<fe.length;re+=1){for(te=!0,ie=0;ie<fe[re].length;ie+=1)if(fe[re][ie]!==void 0&&fe[re][ie]!==N[ie]){te=!1;break}if(te===!0){pe=ne;break}}else for(ne in s)for(fe=s[ne],re=0;re<fe.length;re+=1){for(te=!0,ie=0;ie<fe[re].length;ie+=1)if(fe[re][ie]!==void 0&&fe[re][ie]!==N.charCodeAt(ie)){te=!1;break}if(te===!0){pe=ne;break}}return pe===a&&C!==a&&(pe=C),pe},d=function N(C){for(var re=this.internal.write,ie=this.internal.putStream,fe=(0,this.internal.getFilters)();fe.indexOf("FlateEncode")!==-1;)fe.splice(fe.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var te=[];if(te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Image"}),te.push({key:"Width",value:C.width}),te.push({key:"Height",value:C.height}),C.colorSpace===D.INDEXED?te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(te.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===D.DEVICE_CMYK&&te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),te.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&te.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)&&C.transparency.length>0){for(var ne="",pe=0,Ne=C.transparency.length;pe<Ne;pe++)ne+=C.transparency[pe]+" "+C.transparency[pe]+" ";te.push({key:"Mask",value:"["+ne+"]"})}C.sMask!==void 0&&te.push({key:"SMask",value:C.objectId+1+" 0 R"});var me=C.filter!==void 0?["/"+C.filter]:void 0;if(ie({data:C.data,additionalKeyValues:te,alreadyAppliedFilters:me,objectId:C.objectId}),re("endobj"),"sMask"in C&&C.sMask!==void 0){var U,A=(U=C.sMaskBitsPerComponent)!==null&&U!==void 0?U:C.bitsPerComponent,E={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:A,data:C.sMask};"filter"in C&&(E.decodeParameters="/Predictor ".concat(C.predictor," /Colors 1 /BitsPerComponent ").concat(A," /Columns ").concat(C.width),E.filter=C.filter),N.call(this,E)}if(C.colorSpace===D.INDEXED){var W=this.internal.newObject();ie({data:F(new Uint8Array(C.palette)),objectId:W}),re("endobj")}},v=function(){var N=this.internal.collections[n+"images"];for(var C in N)d.call(this,N[C])},g=function(){var N,C=this.internal.collections[n+"images"],re=this.internal.write;for(var ie in C)re("/I"+(N=C[ie]).index,N.objectId,"0","R")},f=function(){this.internal.collections[n+"images"]||(this.internal.collections[n+"images"]={},this.internal.events.subscribe("putResources",v),this.internal.events.subscribe("putXobjectDict",g))},b=function(){var N=this.internal.collections[n+"images"];return f.call(this),N},S=function(){return Object.keys(this.internal.collections[n+"images"]).length},R=function(N){return typeof o["process"+N.toUpperCase()]=="function"},q=function(N){return ka(N)==="object"&&N.nodeType===1},T=function(N,C){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var re=""+N.getAttribute("src");if(re.indexOf("data:image/")===0)return kh(unescape(re).split("base64,").pop());var ie=o.loadFile(re,!0);if(ie!==void 0)return ie}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var fe;switch(C){case"PNG":fe="image/png";break;case"WEBP":fe="image/webp";break;default:fe="image/jpeg"}return kh(N.toDataURL(fe,1).split("base64,").pop())}},V=function(N){var C=this.internal.collections[n+"images"];if(C){for(var re in C)if(N===C[re].alias)return C[re]}},X=function(N,C,re){return N||C||(N=-96,C=-96),N<0&&(N=-1*re.width*72/N/this.internal.scaleFactor),C<0&&(C=-1*re.height*72/C/this.internal.scaleFactor),N===0&&(N=C*re.width/re.height),C===0&&(C=N*re.height/re.width),[N,C]},L=function(N,C,re,ie,fe,te){var ne=X.call(this,re,ie,fe),pe=this.internal.getCoordinateString,Ne=this.internal.getVerticalCoordinateString,me=b.call(this);if(re=ne[0],ie=ne[1],me[fe.index]=fe,te){te*=Math.PI/180;var U=Math.cos(te),A=Math.sin(te),E=function(xe){return xe.toFixed(4)},W=[E(U),E(A),E(-1*A),E(U),0,0,"cm"]}this.internal.write("q"),te?(this.internal.write([1,"0","0",1,pe(N),Ne(C+ie),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([pe(re),"0","0",pe(ie),"0","0","cm"].join(" "))):this.internal.write([pe(re),"0","0",pe(ie),pe(N),Ne(C+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+fe.index+" Do"),this.internal.write("Q")},D=o.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};o.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ve=o.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},se=o.__addimage__.sHashCode=function(N){var C,re,ie=0;if(typeof N=="string")for(re=N.length,C=0;C<re;C++)ie=(ie<<5)-ie+N.charCodeAt(C),ie|=0;else if($(N))for(re=N.byteLength/2,C=0;C<re;C++)ie=(ie<<5)-ie+N[C],ie|=0;return ie},ee=o.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var C=!0;return N.length===0&&(C=!1),N.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(C=!1),C},J=o.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var C=N.indexOf(",");return C<0?null:N.substring(0,C).trim().endsWith("base64")?N.substring(C+1):null};o.__addimage__.isArrayBuffer=function(N){return N instanceof ArrayBuffer};var $=o.__addimage__.isArrayBufferView=function(N){return N instanceof Int8Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array},I=o.__addimage__.binaryStringToUint8Array=function(N){for(var C=N.length,re=new Uint8Array(C),ie=0;ie<C;ie++)re[ie]=N.charCodeAt(ie);return re},F=o.__addimage__.arrayBufferToBinaryString=function(N){for(var C="",re=$(N)?N:new Uint8Array(N),ie=0;ie<re.length;ie+=8192)C+=String.fromCharCode.apply(null,re.subarray(ie,ie+8192));return C};o.addImage=function(){var N,C,re,ie,fe,te,ne,pe,Ne;if(typeof arguments[1]=="number"?(C=a,re=arguments[1],ie=arguments[2],fe=arguments[3],te=arguments[4],ne=arguments[5],pe=arguments[6],Ne=arguments[7]):(C=arguments[1],re=arguments[2],ie=arguments[3],fe=arguments[4],te=arguments[5],ne=arguments[6],pe=arguments[7],Ne=arguments[8]),ka(N=arguments[0])==="object"&&!q(N)&&"imageData"in N){var me=N;N=me.imageData,C=me.format||C||a,re=me.x||re||0,ie=me.y||ie||0,fe=me.w||me.width||fe,te=me.h||me.height||te,ne=me.alias||ne,pe=me.compression||pe,Ne=me.rotation||me.angle||Ne}var U=this.internal.getFilters();if(pe===void 0&&U.indexOf("FlateEncode")!==-1&&(pe="SLOW"),isNaN(re)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var A=O.call(this,N,C,ne,pe);return L.call(this,re,ie,fe,te,A,Ne),this};var O=function(N,C,re,ie){var fe,te,ne;if(typeof N=="string"&&u(N)===a){N=unescape(N);var pe=he(N,!1);(pe!==""||(pe=o.loadFile(N,!0))!==void 0)&&(N=pe)}if(q(N)&&(N=T(N,C)),C=u(N,C),!R(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((ne=re)==null||ne.length===0)&&(re=(function(Ne){return typeof Ne=="string"||$(Ne)?se(Ne):$(Ne.data)?se(Ne.data):null})(N)),(fe=V.call(this,re))||(N instanceof Uint8Array||C==="RGBA"||(te=N,N=I(N)),fe=this["process"+C.toUpperCase()](N,S.call(this),re,(function(Ne){return Ne&&typeof Ne=="string"&&(Ne=Ne.toUpperCase()),Ne in o.image_compression?Ne:ve.NONE})(ie),te)),!fe)throw new Error("An unknown error occurred whilst processing the image.");return fe},he=o.__addimage__.convertBase64ToBinaryString=function(N,C){C=typeof C!="boolean"||C;var re,ie="";if(typeof N=="string"){var fe;re=(fe=J(N))!==null&&fe!==void 0?fe:N;try{ie=kh(re)}catch(te){if(C)throw ee(re)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};o.getImageProperties=function(N){var C,re,ie="";if(q(N)&&(N=T(N)),typeof N=="string"&&u(N)===a&&((ie=he(N,!1))===""&&(ie=o.loadFile(N)||""),N=ie),re=u(N),!R(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(N instanceof Uint8Array||(N=I(N)),!(C=this["process"+re.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=re,C}})(wn.API),(function(o){var n=function(a){if(a!==void 0&&a!="")return!0};wn.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),o.events.push(["putPage",function(a){for(var s,u,d,v=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(a.objId),b=a.pageContext.annotations,S=!1,R=0;R<b.length&&!S;R++)switch((s=b[R]).type){case"link":(n(s.options.url)||n(s.options.pageNumber))&&(S=!0);break;case"reference":case"text":case"freetext":S=!0}if(S!=0){this.internal.write("/Annots [");for(var q=0;q<b.length;q++){s=b[q];var T=this.internal.pdfEscape,V=this.internal.getEncryptor(a.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var X=this.internal.newAdditionalObject(),L=this.internal.newAdditionalObject(),D=this.internal.getEncryptor(X.objId),ve=s.title||"Note";d="<</Type /Annot /Subtype /Text "+(u="/Rect ["+v(s.bounds.x)+" "+g(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w)+" "+g(s.bounds.y)+"] ")+"/Contents ("+T(D(s.contents))+")",d+=" /Popup "+L.objId+" 0 R",d+=" /P "+f.objId+" 0 R",d+=" /T ("+T(D(ve))+") >>",X.content=d;var se=X.objId+" 0 R";d="<</Type /Annot /Subtype /Popup "+(u="/Rect ["+v(s.bounds.x+30)+" "+g(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w+30)+" "+g(s.bounds.y)+"] ")+" /Parent "+se,s.open&&(d+=" /Open true"),d+=" >>",L.content=d,this.internal.write(X.objId,"0 R",L.objId,"0 R");break;case"freetext":u="/Rect ["+v(s.bounds.x)+" "+g(s.bounds.y)+" "+v(s.bounds.x+s.bounds.w)+" "+g(s.bounds.y+s.bounds.h)+"] ";var ee=s.color||"#000000";d="<</Type /Annot /Subtype /FreeText "+u+"/Contents ("+T(V(s.contents))+")",d+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ee+")",d+=" /Border [0 0 0]",d+=" >>",this.internal.write(d);break;case"link":if(s.options.name){var J=this.annotations._nameMap[s.options.name];s.options.pageNumber=J.page,s.options.top=J.y}else s.options.top||(s.options.top=0);if(u="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",d="",s.options.url)d="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /A <</S /URI /URI ("+T(V(s.options.url))+") >>";else if(s.options.pageNumber)switch(d="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":d+=" /Fit]";break;case"FitH":d+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,d+=" /FitV "+s.options.left+"]";break;default:var $=g(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),d+=" /XYZ "+s.options.left+" "+$+" "+s.options.zoom+"]"}d!=""&&(d+=" >>",this.internal.write(d))}}this.internal.write("]")}}]),o.createAnnotation=function(a){var s=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":s.pageContext.annotations.push(a)}},o.link=function(a,s,u,d,v){var g=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,b=this.internal.getVerticalCoordinateString;g.pageContext.annotations.push({finalBounds:{x:f(a),y:b(s),w:f(a+u),h:b(s+d)},options:v,type:"link"})},o.textWithLink=function(a,s,u,d){var v,g,f=this.getTextWidth(a),b=this.internal.getLineHeight()/this.internal.scaleFactor;if(d.maxWidth!==void 0){g=d.maxWidth;var S=this.splitTextToSize(a,g).length;v=Math.ceil(b*S)}else g=f,v=b;return this.text(a,s,u,d),u+=.2*b,d.align==="center"&&(s-=f/2),d.align==="right"&&(s-=f),this.link(s,u-b,g,v,d),f},o.getTextWidth=function(a){var s=this.internal.getFontSize();return this.getStringUnitWidth(a)*s/this.internal.scaleFactor}})(wn.API),(function(o){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},u=[1570,1571,1573,1575];o.__arabicParser__={};var d=o.__arabicParser__.isInArabicSubstitutionA=function(X){return n[X.charCodeAt(0)]!==void 0},v=o.__arabicParser__.isArabicLetter=function(X){return typeof X=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(X)},g=o.__arabicParser__.isArabicEndLetter=function(X){return v(X)&&d(X)&&n[X.charCodeAt(0)].length<=2},f=o.__arabicParser__.isArabicAlfLetter=function(X){return v(X)&&u.indexOf(X.charCodeAt(0))>=0};o.__arabicParser__.arabicLetterHasIsolatedForm=function(X){return v(X)&&d(X)&&n[X.charCodeAt(0)].length>=1};var b=o.__arabicParser__.arabicLetterHasFinalForm=function(X){return v(X)&&d(X)&&n[X.charCodeAt(0)].length>=2};o.__arabicParser__.arabicLetterHasInitialForm=function(X){return v(X)&&d(X)&&n[X.charCodeAt(0)].length>=3};var S=o.__arabicParser__.arabicLetterHasMedialForm=function(X){return v(X)&&d(X)&&n[X.charCodeAt(0)].length==4},R=o.__arabicParser__.resolveLigatures=function(X){var L=0,D=a,ve="",se=0;for(L=0;L<X.length;L+=1)D[X.charCodeAt(L)]!==void 0?(se++,typeof(D=D[X.charCodeAt(L)])=="number"&&(ve+=String.fromCharCode(D),D=a,se=0),L===X.length-1&&(D=a,ve+=X.charAt(L-(se-1)),L-=se-1,se=0)):(D=a,ve+=X.charAt(L-se),L-=se,se=0);return ve};o.__arabicParser__.isArabicDiacritic=function(X){return X!==void 0&&s[X.charCodeAt(0)]!==void 0};var q=o.__arabicParser__.getCorrectForm=function(X,L,D){return v(X)?d(X)===!1?-1:!b(X)||!v(L)&&!v(D)||!v(D)&&g(L)||g(X)&&!v(L)||g(X)&&f(L)||g(X)&&g(L)?0:S(X)&&v(L)&&!g(L)&&v(D)&&b(D)?3:g(X)||!v(D)?1:2:-1},T=function(X){var L=0,D=0,ve=0,se="",ee="",J="",$=(X=X||"").split("\\s+"),I=[];for(L=0;L<$.length;L+=1){for(I.push(""),D=0;D<$[L].length;D+=1)se=$[L][D],ee=$[L][D-1],J=$[L][D+1],v(se)?(ve=q(se,ee,J),I[L]+=ve!==-1?String.fromCharCode(n[se.charCodeAt(0)][ve]):se):I[L]+=se;I[L]=R(I[L])}return I.join(" ")},V=o.__arabicParser__.processArabic=o.processArabic=function(){var X,L=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,D=[];if(Array.isArray(L)){var ve=0;for(D=[],ve=0;ve<L.length;ve+=1)Array.isArray(L[ve])?D.push([T(L[ve][0]),L[ve][1],L[ve][2]]):D.push([T(L[ve])]);X=D}else X=T(L);return typeof arguments[0]=="string"?X:(arguments[0].text=X,arguments[0])};o.events.push(["preProcessText",V])})(wn.API),wn.API.autoPrint=function(o){var n;return(o=o||{}).variant=o.variant||"non-conform",o.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})),this},(function(o){var n=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(g){a=g}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(g){s=isNaN(g)||Number.isInteger(g)===!1||g<0?150:g,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var u=300;Object.defineProperty(this,"height",{get:function(){return u},set:function(g){u=isNaN(g)||Number.isInteger(g)===!1||g<0?300:g,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=u+1)}});var d=[];Object.defineProperty(this,"childNodes",{get:function(){return d},set:function(g){d=g}});var v={};Object.defineProperty(this,"style",{get:function(){return v},set:function(g){v=g}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(a,s){var u;if((a=a||"2d")!=="2d")return null;for(u in s)this.pdf.context2d.hasOwnProperty(u)&&(this.pdf.context2d[u]=s[u]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},o.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])})(wn.API),(function(o){var n={left:0,top:0,bottom:0,right:0},a=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),u.call(this))},u=function(){this.internal.__cell__.lastCell=new d,this.internal.__cell__.pages=1},d=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(X){f=X}});var b=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return b},set:function(X){b=X}});var S=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return S},set:function(X){S=X}});var R=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return R},set:function(X){R=X}});var q=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return q},set:function(X){q=X}});var T=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return T},set:function(X){T=X}});var V=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return V},set:function(X){V=X}}),this};d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},d.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},o.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},o.getTextDimensions=function(f,b){s.call(this);var S=(b=b||{}).fontSize||this.getFontSize(),R=b.font||this.getFont(),q=b.scaleFactor||this.internal.scaleFactor,T=0,V=0,X=0,L=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var D=b.maxWidth;D>0?typeof f=="string"?f=this.splitTextToSize(f,D):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(se,ee){return se.concat(L.splitTextToSize(ee,D))},[])):f=Array.isArray(f)?f:[f];for(var ve=0;ve<f.length;ve++)T<(X=this.getStringUnitWidth(f[ve],{font:R})*S)&&(T=X);return T!==0&&(V=f.length),{w:T/=q,h:Math.max((V*S*this.getLineHeightFactor()-S*(this.getLineHeightFactor()-1))/q,0)}},o.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new d(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var v=o.cell=function(){var f;f=arguments[0]instanceof d?arguments[0]:new d(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var b=this.internal.__cell__.lastCell,S=this.internal.__cell__.padding,R=this.internal.__cell__.margins||n,q=this.internal.__cell__.tableHeaderRow,T=this.internal.__cell__.printHeaders;return b.lineNumber!==void 0&&(b.lineNumber===f.lineNumber?(f.x=(b.x||0)+(b.width||0),f.y=b.y||0):b.y+b.height+f.height+R.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=R.top,T&&q&&(this.printHeaderRow(f.lineNumber,!0),f.y+=q[0].height)):f.y=b.y+b.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,a===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-S,f.y+S,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+S,{align:"center",baseline:"top",maxWidth:f.width-S-S}):this.text(f.text,f.x+S,f.y+S,{align:"left",baseline:"top",maxWidth:f.width-S-S})),this.internal.__cell__.lastCell=f,this};o.table=function(f,b,S,R,q){if(s.call(this),!S)throw new Error("No data for PDF table.");var T,V,X,L,D=[],ve=[],se=[],ee={},J={},$=[],I=[],F=(q=q||{}).autoSize||!1,O=q.printHeaders!==!1,he=q.css&&q.css["font-size"]!==void 0?16*q.css["font-size"]:q.fontSize||12,N=q.margins||Object.assign({width:this.getPageWidth()},n),C=typeof q.padding=="number"?q.padding:3,re=q.headerBackgroundColor||"#c8c8c8",ie=q.headerTextColor||"#000";if(u.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=he,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=re,this.internal.__cell__.headerTextColor=ie,this.setFontSize(he),R==null)ve=D=Object.keys(S[0]),se=D.map(function(){return"left"});else if(Array.isArray(R)&&ka(R[0])==="object")for(D=R.map(function(me){return me.name}),ve=R.map(function(me){return me.prompt||me.name||""}),se=R.map(function(me){return me.align||"left"}),T=0;T<R.length;T+=1)J[R[T].name]=.7499990551181103*R[T].width;else Array.isArray(R)&&typeof R[0]=="string"&&(ve=D=R,se=D.map(function(){return"left"}));if(F||Array.isArray(R)&&typeof R[0]=="string")for(T=0;T<D.length;T+=1){for(ee[L=D[T]]=S.map(function(me){return me[L]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(ve[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),V=ee[L],this.setFont(void 0,"normal"),X=0;X<V.length;X+=1)$.push(this.getTextDimensions(V[X],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[L]=Math.max.apply(null,$)+C+C,$=[]}if(O){var fe={};for(T=0;T<D.length;T+=1)fe[D[T]]={},fe[D[T]].text=ve[T],fe[D[T]].align=se[T];var te=g.call(this,fe,J);I=D.map(function(me){return new d(f,b,J[me],te,fe[me].text,void 0,fe[me].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var ne=R.reduce(function(me,U){return me[U.name]=U.align,me},{});for(T=0;T<S.length;T+=1){"rowStart"in q&&q.rowStart instanceof Function&&q.rowStart({row:T,data:S[T]},this);var pe=g.call(this,S[T],J);for(X=0;X<D.length;X+=1){var Ne=S[T][D[X]];"cellStart"in q&&q.cellStart instanceof Function&&q.cellStart({row:T,col:X,data:Ne},this),v.call(this,new d(f,b,J[D[X]],pe,Ne,T+2,ne[D[X]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=b,this};var g=function(f,b){var S=this.internal.__cell__.padding,R=this.internal.__cell__.table_font_size,q=this.internal.scaleFactor;return Object.keys(f).map(function(T){var V=f[T];return this.splitTextToSize(V.hasOwnProperty("text")?V.text:V,b[T]-S-S)},this).map(function(T){return this.getLineHeightFactor()*T.length*R/q+S+S},this).reduce(function(T,V){return Math.max(T,V)},0)};o.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},o.printHeaderRow=function(f,b){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var S;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var R=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new d(R[0],R[1],R[2],R[3],void 0,-1)}this.setFont(void 0,"bold");for(var q=[],T=0;T<this.internal.__cell__.tableHeaderRow.length;T+=1){S=this.internal.__cell__.tableHeaderRow[T].clone(),b&&(S.y=this.internal.__cell__.margins.top||0,q.push(S)),S.lineNumber=f;var V=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),v.call(this,S),this.setTextColor(V)}q.length>0&&this.setTableHeaderRow(q),this.setFont(void 0,"normal"),a=!1}})(wn.API);var tx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],p0=ex(nx),ix=[100,200,300,400,500,600,700,800,900],ob=ex(ix);function Kp(o){var n=o.family.replace(/"|'/g,"").toLowerCase(),a=(function(d){return tx[d=d||"normal"]?d:"normal"})(o.style),s=(function(d){return d?typeof d=="number"?d>=100&&d<=900&&d%100==0?d:400:/^\d00$/.test(d)?parseInt(d):d==="bold"?700:400:400})(o.weight),u=(function(d){return typeof p0[d=d||"normal"]=="number"?d:"normal"})(o.stretch);return{family:n,style:a,weight:s,stretch:u,src:o.src||[],ref:o.ref||{name:n,style:[u,a,s].join(" ")}}}function W1(o,n,a,s){var u;for(u=a;u>=0&&u<n.length;u+=s)if(o[n[u]])return o[n[u]];for(u=a;u>=0&&u<n.length;u-=s)if(o[n[u]])return o[n[u]]}var rb={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},V1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $1(o){return[o.stretch,o.style,o.weight,o.family].join(" ")}function Y1(o){return o.trimLeft()}function sb(o,n){for(var a=0;a<o.length;){if(o.charAt(a)===n)return[o.substring(0,a),o.substring(a+1)];a+=1}return null}function lb(o){var n=o.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],o.substring(n[0].length)]}var jh,G1,X1,Cd,Th,Z1,K1,J1,Jp=["times"];function Q1(o,n,a,s,u){var d=4,v=t2;switch(u){case wn.API.image_compression.FAST:d=1,v=e2;break;case wn.API.image_compression.MEDIUM:d=6,v=n2;break;case wn.API.image_compression.SLOW:d=9,v=i2}o=(function(f,b,S,R){for(var q,T=f.length/b,V=new Uint8Array(f.length+T),X=[cb,e2,t2,n2,i2],L=0;L<T;L+=1){var D=L*b,ve=f.subarray(D,D+b);if(R)V.set(R(ve,S,q),D+L);else{for(var se=X.length,ee=[],J=0;J<se;J+=1)ee[J]=X[J](ve,S,q);var $=db(ee.concat());V.set(ee[$],D+L)}q=ve}return V})(o,n,Math.ceil(a*s/8),v);var g=s0(o,{level:d});return wn.API.__addimage__.arrayBufferToBinaryString(g)}function cb(o){var n=Array.apply([],o);return n.unshift(0),n}function e2(o,n){var a=o.length,s=[];s[0]=1;for(var u=0;u<a;u+=1){var d=o[u-n]||0;s[u+1]=o[u]-d+256&255}return s}function t2(o,n,a){var s=o.length,u=[];u[0]=2;for(var d=0;d<s;d+=1){var v=a&&a[d]||0;u[d+1]=o[d]-v+256&255}return u}function n2(o,n,a){var s=o.length,u=[];u[0]=3;for(var d=0;d<s;d+=1){var v=o[d-n]||0,g=a&&a[d]||0;u[d+1]=o[d]+256-(v+g>>>1)&255}return u}function i2(o,n,a){var s=o.length,u=[];u[0]=4;for(var d=0;d<s;d+=1){var v=ub(o[d-n]||0,a&&a[d]||0,a&&a[d-n]||0);u[d+1]=o[d]-v+256&255}return u}function ub(o,n,a){if(o===n&&n===a)return o;var s=Math.abs(n-a),u=Math.abs(o-a),d=Math.abs(o+n-a-a);return s<=u&&s<=d?o:u<=d?n:a}function db(o){var n=o.map(function(a){return a.reduce(function(s,u){return s+Math.abs(u)},0)});return n.indexOf(Math.min.apply(null,n))}function Qp(o,n,a){var s=n*a,u=Math.floor(s/8),d=16-(s-8*u+a),v=(1<<a)-1;return ax(o,u)>>d&v}function a2(o,n,a,s){var u=a*s,d=Math.floor(u/8),v=16-(u-8*d+s),g=(1<<s)-1,f=(n&g)<<v;(function(b,S,R){if(S+1<b.byteLength)b.setUint16(S,R,!1);else{var q=R>>8&255;b.setUint8(S,q)}})(o,d,ax(o,d)&~(g<<v)&65535|f)}function ax(o,n){return n+1<o.byteLength?o.getUint16(n,!1):o.getUint8(n)<<8}function fb(o){var n=0;if(o[n++]!==71||o[n++]!==73||o[n++]!==70||o[n++]!==56||(o[n++]+1&253)!=56||o[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=o[n++]|o[n++]<<8,s=o[n++]|o[n++]<<8,u=o[n++],d=u>>7,v=1<<1+(7&u);o[n++],o[n++];var g=null,f=null;d&&(g=n,f=v,n+=3*v);var b=!0,S=[],R=0,q=null,T=0,V=null;for(this.width=a,this.height=s;b&&n<o.length;)switch(o[n++]){case 33:switch(o[n++]){case 255:if(o[n]!==11||o[n+1]==78&&o[n+2]==69&&o[n+3]==84&&o[n+4]==83&&o[n+5]==67&&o[n+6]==65&&o[n+7]==80&&o[n+8]==69&&o[n+9]==50&&o[n+10]==46&&o[n+11]==48&&o[n+12]==3&&o[n+13]==1&&o[n+16]==0)n+=14,V=o[n++]|o[n++]<<8,n++;else for(n+=12;;){if(!((N=o[n++])>=0))throw Error("Invalid block size");if(N===0)break;n+=N}break;case 249:if(o[n++]!==4||o[n+4]!==0)throw new Error("Invalid graphics extension block.");var X=o[n++];R=o[n++]|o[n++]<<8,q=o[n++],1&X||(q=null),T=X>>2&7,n++;break;case 254:for(;;){if(!((N=o[n++])>=0))throw Error("Invalid block size");if(N===0)break;n+=N}break;default:throw new Error("Unknown graphic control label: 0x"+o[n-1].toString(16))}break;case 44:var L=o[n++]|o[n++]<<8,D=o[n++]|o[n++]<<8,ve=o[n++]|o[n++]<<8,se=o[n++]|o[n++]<<8,ee=o[n++],J=ee>>6&1,$=1<<1+(7&ee),I=g,F=f,O=!1;ee>>7&&(O=!0,I=n,F=$,n+=3*$);var he=n;for(n++;;){var N;if(!((N=o[n++])>=0))throw Error("Invalid block size");if(N===0)break;n+=N}S.push({x:L,y:D,width:ve,height:se,has_local_palette:O,palette_offset:I,palette_size:F,data_offset:he,data_length:n-he,transparent_index:q,interlaced:!!J,delay:R,disposal:T});break;case 59:b=!1;break;default:throw new Error("Unknown gif block: 0x"+o[n-1].toString(16))}this.numFrames=function(){return S.length},this.loopCount=function(){return V},this.frameInfo=function(C){if(C<0||C>=S.length)throw new Error("Frame index out of range.");return S[C]},this.decodeAndBlitFrameBGRA=function(C,re){var ie=this.frameInfo(C),fe=ie.width*ie.height,te=new Uint8Array(fe);o2(o,ie.data_offset,te,fe);var ne=ie.palette_offset,pe=ie.transparent_index;pe===null&&(pe=256);var Ne=ie.width,me=a-Ne,U=Ne,A=4*(ie.y*a+ie.x),E=4*((ie.y+ie.height)*a+ie.x),W=A,xe=4*me;ie.interlaced===!0&&(xe+=4*a*7);for(var Ce=8,Te=0,Le=te.length;Te<Le;++Te){var Ae=te[Te];if(U===0&&(U=Ne,(W+=xe)>=E&&(xe=4*me+4*a*(Ce-1),W=A+(Ne+me)*(Ce<<1),Ce>>=1)),Ae===pe)W+=4;else{var De=o[ne+3*Ae],Ye=o[ne+3*Ae+1],pt=o[ne+3*Ae+2];re[W++]=pt,re[W++]=Ye,re[W++]=De,re[W++]=255}--U}},this.decodeAndBlitFrameRGBA=function(C,re){var ie=this.frameInfo(C),fe=ie.width*ie.height,te=new Uint8Array(fe);o2(o,ie.data_offset,te,fe);var ne=ie.palette_offset,pe=ie.transparent_index;pe===null&&(pe=256);var Ne=ie.width,me=a-Ne,U=Ne,A=4*(ie.y*a+ie.x),E=4*((ie.y+ie.height)*a+ie.x),W=A,xe=4*me;ie.interlaced===!0&&(xe+=4*a*7);for(var Ce=8,Te=0,Le=te.length;Te<Le;++Te){var Ae=te[Te];if(U===0&&(U=Ne,(W+=xe)>=E&&(xe=4*me+4*a*(Ce-1),W=A+(Ne+me)*(Ce<<1),Ce>>=1)),Ae===pe)W+=4;else{var De=o[ne+3*Ae],Ye=o[ne+3*Ae+1],pt=o[ne+3*Ae+2];re[W++]=De,re[W++]=Ye,re[W++]=pt,re[W++]=255}--U}}}function o2(o,n,a,s){for(var u=o[n++],d=1<<u,v=d+1,g=v+1,f=u+1,b=(1<<f)-1,S=0,R=0,q=0,T=o[n++],V=new Int32Array(4096),X=null;;){for(;S<16&&T!==0;)R|=o[n++]<<S,S+=8,T===1?T=o[n++]:--T;if(S<f)break;var L=R&b;if(R>>=f,S-=f,L!==d){if(L===v)break;for(var D=L<g?L:X,ve=0,se=D;se>d;)se=V[se]>>8,++ve;var ee=se;if(q+ve+(D!==L?1:0)>s)return void Wa.log("Warning, gif stream longer than expected.");a[q++]=ee;var J=q+=ve;for(D!==L&&(a[q++]=ee),se=D;ve--;)se=V[se],a[--J]=255&se,se>>=8;X!==null&&g<4096&&(V[g++]=X<<8|ee,g>=b+1&&f<12&&(++f,b=b<<1|1)),X=L}else g=v+1,b=(1<<(f=u+1))-1,X=null}return q!==s&&Wa.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function e0(o){var n,a,s,u,d,v=Math.floor,g=new Array(64),f=new Array(64),b=new Array(64),S=new Array(64),R=new Array(65535),q=new Array(65535),T=new Array(64),V=new Array(64),X=[],L=0,D=7,ve=new Array(64),se=new Array(64),ee=new Array(64),J=new Array(256),$=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(A,E){for(var W=0,xe=0,Ce=new Array,Te=1;Te<=16;Te++){for(var Le=1;Le<=A[Te];Le++)Ce[E[xe]]=[],Ce[E[xe]][0]=W,Ce[E[xe]][1]=Te,xe++,W++;W*=2}return Ce}function ne(A){for(var E=A[0],W=A[1]-1;W>=0;)E&1<<W&&(L|=1<<D),W--,--D<0&&(L==255?(pe(255),pe(0)):pe(L),D=7,L=0)}function pe(A){X.push(A)}function Ne(A){pe(A>>8&255),pe(255&A)}function me(A,E,W,xe,Ce){for(var Te,Le=Ce[0],Ae=Ce[240],De=(function(ot,sn){var Ut,xn,nn,Un,Ct,Mt,ri,ht,St,Rn,Zt=0;for(St=0;St<8;++St){Ut=ot[Zt],xn=ot[Zt+1],nn=ot[Zt+2],Un=ot[Zt+3],Ct=ot[Zt+4],Mt=ot[Zt+5],ri=ot[Zt+6];var _n=Ut+(ht=ot[Zt+7]),Tn=Ut-ht,ln=xn+ri,yn=xn-ri,nt=nn+Mt,Qt=nn-Mt,Wt=Un+Ct,Vt=Un-Ct,bn=_n+Wt,Fi=_n-Wt,Mn=ln+nt,fn=ln-nt;ot[Zt]=bn+Mn,ot[Zt+4]=bn-Mn;var $t=.707106781*(fn+Fi);ot[Zt+2]=Fi+$t,ot[Zt+6]=Fi-$t;var To=.382683433*((bn=Vt+Qt)-(fn=yn+Tn)),eo=.5411961*bn+To,xo=1.306562965*fn+To,Co=.707106781*(Mn=Qt+yn),Kt=Tn+Co,Ao=Tn-Co;ot[Zt+5]=Ao+eo,ot[Zt+3]=Ao-eo,ot[Zt+1]=Kt+xo,ot[Zt+7]=Kt-xo,Zt+=8}for(Zt=0,St=0;St<8;++St){Ut=ot[Zt],xn=ot[Zt+8],nn=ot[Zt+16],Un=ot[Zt+24],Ct=ot[Zt+32],Mt=ot[Zt+40],ri=ot[Zt+48];var rr=Ut+(ht=ot[Zt+56]),Go=Ut-ht,jt=xn+ri,si=xn-ri,li=nn+Mt,zi=nn-Mt,bs=Un+Ct,ko=Un-Ct,Hi=rr+bs,la=rr-bs,ba=jt+li,No=jt-li;ot[Zt]=Hi+ba,ot[Zt+32]=Hi-ba;var Bn=.707106781*(No+la);ot[Zt+16]=la+Bn,ot[Zt+48]=la-Bn;var kr=.382683433*((Hi=ko+zi)-(No=si+Go)),hi=.5411961*Hi+kr,sr=1.306562965*No+kr,mi=.707106781*(ba=zi+si),lr=Go+mi,_i=Go-mi;ot[Zt+40]=_i+hi,ot[Zt+24]=_i-hi,ot[Zt+8]=lr+sr,ot[Zt+56]=lr-sr,Zt++}for(St=0;St<64;++St)Rn=ot[St]*sn[St],T[St]=Rn>0?Rn+.5|0:Rn-.5|0;return T})(A,E),Ye=0;Ye<64;++Ye)V[I[Ye]]=De[Ye];var pt=V[0]-W;W=V[0],pt==0?ne(xe[0]):(ne(xe[q[Te=32767+pt]]),ne(R[Te]));for(var mt=63;mt>0&&V[mt]==0;)mt--;if(mt==0)return ne(Le),W;for(var _t,de=1;de<=mt;){for(var vt=de;V[de]==0&&de<=mt;)++de;var zt=de-vt;if(zt>=16){_t=zt>>4;for(var kt=1;kt<=_t;++kt)ne(Ae);zt&=15}Te=32767+V[de],ne(Ce[(zt<<4)+q[Te]]),ne(R[Te]),de++}return mt!=63&&ne(Le),W}function U(A){A=Math.min(Math.max(A,1),100),d!=A&&((function(E){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],xe=0;xe<64;xe++){var Ce=v((W[xe]*E+50)/100);Ce=Math.min(Math.max(Ce,1),255),g[I[xe]]=Ce}for(var Te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var Ae=v((Te[Le]*E+50)/100);Ae=Math.min(Math.max(Ae,1),255),f[I[Le]]=Ae}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ye=0,pt=0;pt<8;pt++)for(var mt=0;mt<8;mt++)b[Ye]=1/(g[I[Ye]]*De[pt]*De[mt]*8),S[Ye]=1/(f[I[Ye]]*De[pt]*De[mt]*8),Ye++})(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),d=A)}this.encode=function(A,E){E&&U(E),X=new Array,L=0,D=7,Ne(65496),Ne(65504),Ne(16),pe(74),pe(70),pe(73),pe(70),pe(0),pe(1),pe(1),pe(0),Ne(1),Ne(1),pe(0),pe(0),(function(){Ne(65499),Ne(132),pe(0);for(var xn=0;xn<64;xn++)pe(g[xn]);pe(1);for(var nn=0;nn<64;nn++)pe(f[nn])})(),(function(xn,nn){Ne(65472),Ne(17),pe(8),Ne(nn),Ne(xn),pe(3),pe(1),pe(17),pe(0),pe(2),pe(17),pe(1),pe(3),pe(17),pe(1)})(A.width,A.height),(function(){Ne(65476),Ne(418),pe(0);for(var xn=0;xn<16;xn++)pe(F[xn+1]);for(var nn=0;nn<=11;nn++)pe(O[nn]);pe(16);for(var Un=0;Un<16;Un++)pe(he[Un+1]);for(var Ct=0;Ct<=161;Ct++)pe(N[Ct]);pe(1);for(var Mt=0;Mt<16;Mt++)pe(C[Mt+1]);for(var ri=0;ri<=11;ri++)pe(re[ri]);pe(17);for(var ht=0;ht<16;ht++)pe(ie[ht+1]);for(var St=0;St<=161;St++)pe(fe[St])})(),Ne(65498),Ne(12),pe(3),pe(1),pe(0),pe(2),pe(17),pe(3),pe(17),pe(0),pe(63),pe(0);var W=0,xe=0,Ce=0;L=0,D=7,this.encode.displayName="_encode_";for(var Te,Le,Ae,De,Ye,pt,mt,_t,de,vt=A.data,zt=A.width,kt=A.height,ot=4*zt,sn=0;sn<kt;){for(Te=0;Te<ot;){for(Ye=ot*sn+Te,mt=-1,_t=0,de=0;de<64;de++)pt=Ye+(_t=de>>3)*ot+(mt=4*(7&de)),sn+_t>=kt&&(pt-=ot*(sn+1+_t-kt)),Te+mt>=ot&&(pt-=Te+mt-ot+4),Le=vt[pt++],Ae=vt[pt++],De=vt[pt++],ve[de]=($[Le]+$[Ae+256|0]+$[De+512|0]>>16)-128,se[de]=($[Le+768|0]+$[Ae+1024|0]+$[De+1280|0]>>16)-128,ee[de]=($[Le+1280|0]+$[Ae+1536|0]+$[De+1792|0]>>16)-128;W=me(ve,b,W,n,s),xe=me(se,S,xe,a,u),Ce=me(ee,S,Ce,a,u),Te+=32}sn+=8}if(D>=0){var Ut=[];Ut[1]=D+1,Ut[0]=(1<<D+1)-1,ne(Ut)}return Ne(65497),new Uint8Array(X)},o=o||50,(function(){for(var A=String.fromCharCode,E=0;E<256;E++)J[E]=A(E)})(),n=te(F,O),a=te(C,re),s=te(he,N),u=te(ie,fe),(function(){for(var A=1,E=2,W=1;W<=15;W++){for(var xe=A;xe<E;xe++)q[32767+xe]=W,R[32767+xe]=[],R[32767+xe][1]=W,R[32767+xe][0]=xe;for(var Ce=-(E-1);Ce<=-A;Ce++)q[32767+Ce]=W,R[32767+Ce]=[],R[32767+Ce][1]=W,R[32767+Ce][0]=E-1+Ce;A<<=1,E<<=1}})(),(function(){for(var A=0;A<256;A++)$[A]=19595*A,$[A+256|0]=38470*A,$[A+512|0]=7471*A+32768,$[A+768|0]=-11059*A,$[A+1024|0]=-21709*A,$[A+1280|0]=32768*A+8421375,$[A+1536|0]=-27439*A,$[A+1792|0]=-5329*A})(),U(o)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function cc(o,n){if(this.pos=0,this.buffer=o,this.datav=new DataView(o.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function r2(o){function n(O){if(!O)throw Error("assert :P")}function a(O,he,N){for(var C=0;4>C;C++)if(O[he+C]!=N.charCodeAt(C))return!0;return!1}function s(O,he,N,C,re){for(var ie=0;ie<re;ie++)O[he+ie]=N[C+ie]}function u(O,he,N,C){for(var re=0;re<C;re++)O[he+re]=N}function d(O){return new Int32Array(O)}function v(O,he){for(var N=[],C=0;C<O;C++)N.push(new he);return N}function g(O,he){var N=[];return(function C(re,ie,fe){for(var te=fe[ie],ne=0;ne<te&&(re.push(fe.length>ie+1?[]:new he),!(fe.length<ie+1));ne++)C(re[ne],ie+1,fe)})(N,0,O),N}var f=function(){var O=this;function he(h,x){for(var j=1<<x-1>>>0;h&j;)j>>>=1;return j?(h&j-1)+j:h}function N(h,x,j,z,Y){n(!(z%j));do h[x+(z-=j)]=Y;while(0<z)}function C(h,x,j,z,Y){if(n(2328>=Y),512>=Y)var Q=d(512);else if((Q=d(Y))==null)return 0;return(function(K,le,ce,be,Pe,Ge){var ge,Re,Fe=le,it=1<<ce,$e=d(16),tt=d(16);for(n(Pe!=0),n(be!=null),n(K!=null),n(0<ce),Re=0;Re<Pe;++Re){if(15<be[Re])return 0;++$e[be[Re]]}if($e[0]==Pe)return 0;for(tt[1]=0,ge=1;15>ge;++ge){if($e[ge]>1<<ge)return 0;tt[ge+1]=tt[ge]+$e[ge]}for(Re=0;Re<Pe;++Re)ge=be[Re],0<be[Re]&&(Ge[tt[ge]++]=Re);if(tt[15]==1)return(be=new re).g=0,be.value=Ge[0],N(K,Fe,1,it,be),it;var st,Tt=-1,xt=it-1,Gt=0,Et=1,kn=1,qt=1<<ce;for(Re=0,ge=1,Pe=2;ge<=ce;++ge,Pe<<=1){if(Et+=kn<<=1,0>(kn-=$e[ge]))return 0;for(;0<$e[ge];--$e[ge])(be=new re).g=ge,be.value=Ge[Re++],N(K,Fe+Gt,Pe,qt,be),Gt=he(Gt,ge)}for(ge=ce+1,Pe=2;15>=ge;++ge,Pe<<=1){if(Et+=kn<<=1,0>(kn-=$e[ge]))return 0;for(;0<$e[ge];--$e[ge]){if(be=new re,(Gt&xt)!=Tt){for(Fe+=qt,st=1<<(Tt=ge)-ce;15>Tt&&!(0>=(st-=$e[Tt]));)++Tt,st<<=1;it+=qt=1<<(st=Tt-ce),K[le+(Tt=Gt&xt)].g=st+ce,K[le+Tt].value=Fe-le-Tt}be.g=ge-ce,be.value=Ge[Re++],N(K,Fe+(Gt>>ce),Pe,qt,be),Gt=he(Gt,ge)}}return Et!=2*tt[15]-1?0:it})(h,x,j,z,Y,Q)}function re(){this.value=this.g=0}function ie(){this.value=this.g=0}function fe(){this.G=v(5,re),this.H=d(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=v(Ei,ie)}function te(h,x,j,z){n(h!=null),n(x!=null),n(2147483648>z),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=x,h.pa=j,h.Jd=x,h.Yc=j+z,h.Zc=4<=z?j+z-4+1:j,Le(h)}function ne(h,x){for(var j=0;0<x--;)j|=De(h,128)<<x;return j}function pe(h,x){var j=ne(h,x);return Ae(h)?-j:j}function Ne(h,x,j,z){var Y,Q=0;for(n(h!=null),n(x!=null),n(4294967288>z),h.Sb=z,h.Ra=0,h.u=0,h.h=0,4<z&&(z=4),Y=0;Y<z;++Y)Q+=x[j+Y]<<8*Y;h.Ra=Q,h.bb=z,h.oa=x,h.pa=j}function me(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<xr-8>>>0,++h.bb,h.u-=8;xe(h)&&(h.h=1,h.u=0)}function U(h,x){if(n(0<=x),!h.h&&x<=Wo){var j=W(h)&uo[x];return h.u+=x,me(h),j}return h.h=1,h.u=0}function A(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(h){return h.Ra>>>(h.u&xr-1)>>>0}function xe(h){return n(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>xr}function Ce(h,x){h.u=x,h.h=xe(h)}function Te(h){h.u>=Hs&&(n(h.u>=Hs),me(h))}function Le(h){n(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(n(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ae(h){return ne(h,1)}function De(h,x){var j=h.Ca;0>h.b&&Le(h);var z=h.b,Y=j*x>>>8,Q=(h.I>>>z>Y)+0;for(Q?(j-=Y,h.I-=Y+1<<z>>>0):j=Y+1,z=j,Y=0;256<=z;)Y+=8,z>>=8;return z=7^Y+zs[z],h.b-=z,h.Ca=(j<<z)-1,Q}function Ye(h,x,j){h[x+0]=j>>24&255,h[x+1]=j>>16&255,h[x+2]=j>>8&255,h[x+3]=255&j}function pt(h,x){return h[x+0]|h[x+1]<<8}function mt(h,x){return pt(h,x)|h[x+2]<<16}function _t(h,x){return pt(h,x)|pt(h,x+2)<<16}function de(h,x){var j=1<<x;return n(h!=null),n(0<x),h.X=d(j),h.X==null?0:(h.Mb=32-x,h.Xa=x,1)}function vt(h,x){n(h!=null),n(x!=null),n(h.Xa==x.Xa),s(x.X,0,h.X,0,1<<x.Xa)}function zt(){this.X=[],this.Xa=this.Mb=0}function kt(h,x,j,z){n(j!=null),n(z!=null);var Y=j[0],Q=z[0];return Y==0&&(Y=(h*Q+x/2)/x),Q==0&&(Q=(x*Y+h/2)/h),0>=Y||0>=Q?0:(j[0]=Y,z[0]=Q,1)}function ot(h,x){return h+(1<<x)-1>>>x}function sn(h,x){return((4278255360&h)+(4278255360&x)>>>0&4278255360)+((16711935&h)+(16711935&x)>>>0&16711935)>>>0}function Ut(h,x){O[x]=function(j,z,Y,Q,K,le,ce){var be;for(be=0;be<K;++be){var Pe=O[h](le[ce+be-1],Y,Q+be);le[ce+be]=sn(j[z+be],Pe)}}}function xn(){this.ud=this.hd=this.jd=0}function nn(h,x){return((4278124286&(h^x))>>>1)+(h&x)>>>0}function Un(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ct(h,x){return Un(h+(h-x+.5>>1))}function Mt(h,x,j){return Math.abs(x-j)-Math.abs(h-j)}function ri(h,x,j,z,Y,Q,K){for(z=Q[K-1],j=0;j<Y;++j)Q[K+j]=z=sn(h[x+j],z)}function ht(h,x,j,z,Y){var Q;for(Q=0;Q<j;++Q){var K=h[x+Q],le=K>>8&255,ce=16711935&(ce=(ce=16711935&K)+((le<<16)+le));z[Y+Q]=(4278255360&K)+ce>>>0}}function St(h,x){x.jd=255&h,x.hd=h>>8&255,x.ud=h>>16&255}function Rn(h,x,j,z,Y,Q){var K;for(K=0;K<z;++K){var le=x[j+K],ce=le>>>8,be=le,Pe=255&(Pe=(Pe=le>>>16)+((h.jd<<24>>24)*(ce<<24>>24)>>>5));be=255&(be=(be+=(h.hd<<24>>24)*(ce<<24>>24)>>>5)+((h.ud<<24>>24)*(Pe<<24>>24)>>>5)),Y[Q+K]=(4278255360&le)+(Pe<<16)+be}}function Zt(h,x,j,z,Y){O[x]=function(Q,K,le,ce,be,Pe,Ge,ge,Re){for(ce=Ge;ce<ge;++ce)for(Ge=0;Ge<Re;++Ge)be[Pe++]=Y(le[z(Q[K++])])},O[h]=function(Q,K,le,ce,be,Pe,Ge){var ge=8>>Q.b,Re=Q.Ea,Fe=Q.K[0],it=Q.w;if(8>ge)for(Q=(1<<Q.b)-1,it=(1<<ge)-1;K<le;++K){var $e,tt=0;for($e=0;$e<Re;++$e)$e&Q||(tt=z(ce[be++])),Pe[Ge++]=Y(Fe[tt&it]),tt>>=ge}else O["VP8LMapColor"+j](ce,be,Fe,it,Pe,Ge,K,le,Re)}}function _n(h,x,j,z,Y){for(j=x+j;x<j;){var Q=h[x++];z[Y++]=Q>>16&255,z[Y++]=Q>>8&255,z[Y++]=255&Q}}function Tn(h,x,j,z,Y){for(j=x+j;x<j;){var Q=h[x++];z[Y++]=Q>>16&255,z[Y++]=Q>>8&255,z[Y++]=255&Q,z[Y++]=Q>>24&255}}function ln(h,x,j,z,Y){for(j=x+j;x<j;){var Q=(K=h[x++])>>16&240|K>>12&15,K=240&K|K>>28&15;z[Y++]=Q,z[Y++]=K}}function yn(h,x,j,z,Y){for(j=x+j;x<j;){var Q=(K=h[x++])>>16&248|K>>13&7,K=K>>5&224|K>>3&31;z[Y++]=Q,z[Y++]=K}}function nt(h,x,j,z,Y){for(j=x+j;x<j;){var Q=h[x++];z[Y++]=255&Q,z[Y++]=Q>>8&255,z[Y++]=Q>>16&255}}function Qt(h,x,j,z,Y,Q){if(Q==0)for(j=x+j;x<j;)Ye(z,((Q=h[x++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),Y+=32;else s(z,Y,h,x,j)}function Wt(h,x){O[x][0]=O[h+"0"],O[x][1]=O[h+"1"],O[x][2]=O[h+"2"],O[x][3]=O[h+"3"],O[x][4]=O[h+"4"],O[x][5]=O[h+"5"],O[x][6]=O[h+"6"],O[x][7]=O[h+"7"],O[x][8]=O[h+"8"],O[x][9]=O[h+"9"],O[x][10]=O[h+"10"],O[x][11]=O[h+"11"],O[x][12]=O[h+"12"],O[x][13]=O[h+"13"],O[x][14]=O[h+"0"],O[x][15]=O[h+"0"]}function Vt(h){return h==Pr||h==Po||h==dl||h==Mc}function bn(){this.eb=[],this.size=this.A=this.fb=0}function Fi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Mn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new bn,this.f.kb=new Fi,this.sd=null}function fn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function $t(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function To(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function eo(h,x){var j=h.T,z=x.ba.f.RGBA,Y=z.eb,Q=z.fb+h.ka*z.A,K=Ki[x.ba.S],le=h.y,ce=h.O,be=h.f,Pe=h.N,Ge=h.ea,ge=h.W,Re=x.cc,Fe=x.dc,it=x.Mc,$e=x.Nc,tt=h.ka,st=h.ka+h.T,Tt=h.U,xt=Tt+1>>1;for(tt==0?K(le,ce,null,null,be,Pe,Ge,ge,be,Pe,Ge,ge,Y,Q,null,null,Tt):(K(x.ec,x.fc,le,ce,Re,Fe,it,$e,be,Pe,Ge,ge,Y,Q-z.A,Y,Q,Tt),++j);tt+2<st;tt+=2)Re=be,Fe=Pe,it=Ge,$e=ge,Pe+=h.Rc,ge+=h.Rc,Q+=2*z.A,K(le,(ce+=2*h.fa)-h.fa,le,ce,Re,Fe,it,$e,be,Pe,Ge,ge,Y,Q-z.A,Y,Q,Tt);return ce+=h.fa,h.j+st<h.o?(s(x.ec,x.fc,le,ce,Tt),s(x.cc,x.dc,be,Pe,xt),s(x.Mc,x.Nc,Ge,ge,xt),j--):1&st||K(le,ce,null,null,be,Pe,Ge,ge,be,Pe,Ge,ge,Y,Q+z.A,null,null,Tt),j}function xo(h,x,j){var z=h.F,Y=[h.J];if(z!=null){var Q=h.U,K=x.ba.S,le=K==$s||K==dl;x=x.ba.f.RGBA;var ce=[0],be=h.ka;ce[0]=h.T,h.Kb&&(be==0?--ce[0]:(--be,Y[0]-=h.width),h.j+h.ka+h.T==h.o&&(ce[0]=h.o-h.j-be));var Pe=x.eb;be=x.fb+be*x.A,h=Lo(z,Y[0],h.width,Q,ce,Pe,be+(le?0:3),x.A),n(j==ce),h&&Vt(K)&&Ws(Pe,be,le,Q,ce,x.A)}return 0}function Co(h){var x=h.ma,j=x.ba.S,z=11>j,Y=j==io||j==mr||j==$s||j==Ys||j==12||Vt(j);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!_r(x.Oa,h,Y?11:12))return 0;if(Y&&Vt(j)&&Is(),h.da)alert("todo:use_scaling");else{if(z){if(x.Ib=To,h.Kb){if(j=h.U+1>>1,x.memory=d(h.U+2*j),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+h.U,x.Mc=x.cc,x.Nc=x.dc+j,x.Ib=eo,Is()}}else alert("todo:EmitYUV");Y&&(x.Jb=xo,z&&Qo())}if(z&&!jr){for(h=0;256>h;++h)en[h]=89858*(h-128)+Dr>>Oa,Ec[h]=-22014*(h-128)+Dr,Zu[h]=-45773*(h-128),Ln[h]=113618*(h-128)+Dr>>Oa;for(h=Ro;h<or;++h)x=76283*(h-16)+Dr>>Oa,Md[h-Ro]=Xo(x,255),Bd[h-Ro]=Xo(x+8>>4,15);jr=1}return 1}function Kt(h){var x=h.ma,j=h.U,z=h.T;return n(!(1&h.ka)),0>=j||0>=z?0:(j=x.Ib(h,x),x.Jb!=null&&x.Jb(h,x,j),x.Dc+=j,1)}function Ao(h){h.ma.memory=null}function rr(h,x,j,z){return U(h,8)!=47?0:(x[0]=U(h,14)+1,j[0]=U(h,14)+1,z[0]=U(h,1),U(h,3)!=0?0:!h.h)}function Go(h,x){if(4>h)return h+1;var j=h-2>>1;return(2+(1&h)<<j)+U(x,j)+1}function jt(h,x){return 120<x?x-120:1<=(j=((j=us[x-1])>>4)*h+(8-(15&j)))?j:1;var j}function si(h,x,j){var z=W(j),Y=h[x+=255&z].g-8;return 0<Y&&(Ce(j,j.u+8),z=W(j),x+=h[x].value,x+=z&(1<<Y)-1),Ce(j,j.u+h[x].g),h[x].value}function li(h,x,j){return j.g+=h.g,j.value+=h.value<<x>>>0,n(8>=j.g),h.g}function zi(h,x,j){var z=h.xc;return n((x=z==0?0:h.vc[h.md*(j>>z)+(x>>z)])<h.Wb),h.Ya[x]}function bs(h,x,j,z){var Y=h.ab,Q=h.c*x,K=h.C;x=K+x;var le=j,ce=z;for(z=h.Ta,j=h.Ua;0<Y--;){var be=h.gc[Y],Pe=K,Ge=x,ge=le,Re=ce,Fe=(ce=z,le=j,be.Ea);switch(n(Pe<Ge),n(Ge<=be.nc),be.hc){case 2:na(ge,Re,(Ge-Pe)*Fe,ce,le);break;case 0:var it=Pe,$e=Ge,tt=ce,st=le,Tt=(qt=be).Ea;it==0&&(pc(ge,Re,null,null,1,tt,st),ri(ge,Re+1,0,0,Tt-1,tt,st+1),Re+=Tt,st+=Tt,++it);for(var xt=1<<qt.b,Gt=xt-1,Et=ot(Tt,qt.b),kn=qt.K,qt=qt.w+(it>>qt.b)*Et;it<$e;){var $n=kn,Ji=qt,qn=1;for(gc(ge,Re,tt,st-Tt,1,tt,st);qn<Tt;){var Bt=(qn&~Gt)+xt;Bt>Tt&&(Bt=Tt),(0,rs[$n[Ji++]>>8&15])(ge,Re+ +qn,tt,st+qn-Tt,Bt-qn,tt,st+qn),qn=Bt}Re+=Tt,st+=Tt,++it&Gt||(qt+=Et)}Ge!=be.nc&&s(ce,le-Fe,ce,le+(Ge-Pe-1)*Fe,Fe);break;case 1:for(Fe=ge,$e=Re,Tt=(ge=be.Ea)-(st=ge&~(tt=(Re=1<<be.b)-1)),it=ot(ge,be.b),xt=be.K,be=be.w+(Pe>>be.b)*it;Pe<Ge;){for(Gt=xt,Et=be,kn=new xn,qt=$e+st,$n=$e+ge;$e<qt;)St(Gt[Et++],kn),qs(kn,Fe,$e,Re,ce,le),$e+=Re,le+=Re;$e<$n&&(St(Gt[Et++],kn),qs(kn,Fe,$e,Tt,ce,le),$e+=Tt,le+=Tt),++Pe&tt||(be+=it)}break;case 3:if(ge==ce&&Re==le&&0<be.b){for($e=ce,ge=Fe=le+(Ge-Pe)*Fe-(st=(Ge-Pe)*ot(be.Ea,be.b)),Re=ce,tt=le,it=[],st=(Tt=st)-1;0<=st;--st)it[st]=Re[tt+st];for(st=Tt-1;0<=st;--st)$e[ge+st]=it[st];xc(be,Pe,Ge,ce,Fe,ce,le)}else xc(be,Pe,Ge,ge,Re,ce,le)}le=z,ce=j}ce!=j&&s(z,j,le,ce,Q)}function ko(h,x){var j=h.V,z=h.Ba+h.c*h.C,Y=x-h.C;if(n(x<=h.l.o),n(16>=Y),0<Y){var Q=h.l,K=h.Ta,le=h.Ua,ce=Q.width;if(bs(h,Y,j,z),Y=le=[le],n((j=h.C)<(z=x)),n(Q.v<Q.va),z>Q.o&&(z=Q.o),j<Q.j){var be=Q.j-j;j=Q.j,Y[0]+=be*ce}if(j>=z?j=0:(Y[0]+=4*Q.v,Q.ka=j-Q.j,Q.U=Q.va-Q.v,Q.T=z-j,j=1),j){if(le=le[0],11>(j=h.ca).S){var Pe=j.f.RGBA,Ge=(z=j.S,Y=Q.U,Q=Q.T,be=Pe.eb,Pe.A),ge=Q;for(Pe=Pe.fb+h.Ma*Pe.A;0<ge--;){var Re=K,Fe=le,it=Y,$e=be,tt=Pe;switch(z){case Vs:sl(Re,Fe,it,$e,tt);break;case io:Vr(Re,Fe,it,$e,tt);break;case Pr:Vr(Re,Fe,it,$e,tt),Ws($e,tt,0,it,1,0);break;case Zl:ll(Re,Fe,it,$e,tt);break;case mr:Qt(Re,Fe,it,$e,tt,1);break;case Po:Qt(Re,Fe,it,$e,tt,1),Ws($e,tt,0,it,1,0);break;case $s:Qt(Re,Fe,it,$e,tt,0);break;case dl:Qt(Re,Fe,it,$e,tt,0),Ws($e,tt,1,it,1,0);break;case Ys:_s(Re,Fe,it,$e,tt);break;case Mc:_s(Re,Fe,it,$e,tt),oi($e,tt,it,1,0);break;case ul:$r(Re,Fe,it,$e,tt);break;default:n(0)}le+=ce,Pe+=Ge}h.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");n(h.Ma<=j.height)}}h.C=x,n(h.C<=h.i)}function Hi(h){var x;if(0<h.ua)return 0;for(x=0;x<h.Wb;++x){var j=h.Ya[x].G,z=h.Ya[x].H;if(0<j[1][z[1]+0].g||0<j[2][z[2]+0].g||0<j[3][z[3]+0].g)return 0}return 1}function la(h,x,j,z,Y,Q){if(h.Z!=0){var K=h.qd,le=h.rd;for(n(ar[h.Z]!=null);x<j;++x)ar[h.Z](K,le,z,Y,z,Y,Q),K=z,le=Y,Y+=Q;h.qd=K,h.rd=le}}function ba(h,x){var j=h.l.ma,z=j.Z==0||j.Z==1?h.l.j:h.C;if(z=h.C<z?z:h.C,n(x<=h.l.o),x>z){var Y=h.l.width,Q=j.ca,K=j.tb+Y*z,le=h.V,ce=h.Ba+h.c*z,be=h.gc;n(h.ab==1),n(be[0].hc==3),os(be[0],z,x,le,ce,Q,K),la(j,z,x,Q,K,Y)}h.C=h.Ma=x}function No(h,x,j,z,Y,Q,K){var le=h.$/z,ce=h.$%z,be=h.m,Pe=h.s,Ge=j+h.$,ge=Ge;Y=j+z*Y;var Re=j+z*Q,Fe=280+Pe.ua,it=h.Pb?le:16777216,$e=0<Pe.ua?Pe.Wa:null,tt=Pe.wc,st=Ge<Re?zi(Pe,ce,le):null;n(h.C<Q),n(Re<=Y);var Tt=!1;e:for(;;){for(;Tt||Ge<Re;){var xt=0;if(le>=it){var Gt=Ge-j;n((it=h).Pb),it.wd=it.m,it.xd=Gt,0<it.s.ua&&vt(it.s.Wa,it.s.vb),it=le+hl}if(ce&tt||(st=zi(Pe,ce,le)),n(st!=null),st.Qb&&(x[Ge]=st.qb,Tt=!0),!Tt)if(Te(be),st.jc){xt=be,Gt=x;var Et=Ge,kn=st.pd[W(xt)&Ei-1];n(st.jc),256>kn.g?(Ce(xt,xt.u+kn.g),Gt[Et]=kn.value,xt=0):(Ce(xt,xt.u+kn.g-256),n(256<=kn.value),xt=kn.value),xt==0&&(Tt=!0)}else xt=si(st.G[0],st.H[0],be);if(be.h)break;if(Tt||256>xt){if(!Tt)if(st.nd)x[Ge]=(st.qb|xt<<8)>>>0;else{if(Te(be),Tt=si(st.G[1],st.H[1],be),Te(be),Gt=si(st.G[2],st.H[2],be),Et=si(st.G[3],st.H[3],be),be.h)break;x[Ge]=(Et<<24|Tt<<16|xt<<8|Gt)>>>0}if(Tt=!1,++Ge,++ce>=z&&(ce=0,++le,K!=null&&le<=Q&&!(le%16)&&K(h,le),$e!=null))for(;ge<Ge;)xt=x[ge++],$e.X[(506832829*xt&4294967295)>>>$e.Mb]=xt}else if(280>xt){if(xt=Go(xt-256,be),Gt=si(st.G[4],st.H[4],be),Te(be),Gt=jt(z,Gt=Go(Gt,be)),be.h)break;if(Ge-j<Gt||Y-Ge<xt)break e;for(Et=0;Et<xt;++Et)x[Ge+Et]=x[Ge+Et-Gt];for(Ge+=xt,ce+=xt;ce>=z;)ce-=z,++le,K!=null&&le<=Q&&!(le%16)&&K(h,le);if(n(Ge<=Y),ce&tt&&(st=zi(Pe,ce,le)),$e!=null)for(;ge<Ge;)xt=x[ge++],$e.X[(506832829*xt&4294967295)>>>$e.Mb]=xt}else{if(!(xt<Fe))break e;for(Tt=xt-280,n($e!=null);ge<Ge;)xt=x[ge++],$e.X[(506832829*xt&4294967295)>>>$e.Mb]=xt;xt=Ge,n(!(Tt>>>(Gt=$e).Xa)),x[xt]=Gt.X[Tt],Tt=!0}Tt||n(be.h==xe(be))}if(h.Pb&&be.h&&Ge<Y)n(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&vt(h.s.vb,h.s.Wa);else{if(be.h)break e;K?.(h,le>Q?Q:le),h.a=0,h.$=Ge-j}return 1}return h.a=3,0}function Bn(h){n(h!=null),h.vc=null,h.yc=null,h.Ya=null;var x=h.Wa;x!=null&&(x.X=null),h.vb=null,n(h!=null)}function kr(){var h=new jn;return h==null?null:(h.a=0,h.xb=ir,Wt("Predictor","VP8LPredictors"),Wt("Predictor","VP8LPredictors_C"),Wt("PredictorAdd","VP8LPredictorsAdd"),Wt("PredictorAdd","VP8LPredictorsAdd_C"),na=ht,qs=Rn,sl=_n,Vr=Tn,_s=ln,$r=yn,ll=nt,O.VP8LMapColor32b=Wr,O.VP8LMapColor8b=Ya,h)}function hi(h,x,j,z,Y){var Q=1,K=[h],le=[x],ce=z.m,be=z.s,Pe=null,Ge=0;e:for(;;){if(j)for(;Q&&U(ce,1);){var ge=K,Re=le,Fe=z,it=1,$e=Fe.m,tt=Fe.gc[Fe.ab],st=U($e,2);if(Fe.Oc&1<<st)Q=0;else{switch(Fe.Oc|=1<<st,tt.hc=st,tt.Ea=ge[0],tt.nc=Re[0],tt.K=[null],++Fe.ab,n(4>=Fe.ab),st){case 0:case 1:tt.b=U($e,3)+2,it=hi(ot(tt.Ea,tt.b),ot(tt.nc,tt.b),0,Fe,tt.K),tt.K=tt.K[0];break;case 3:var Tt,xt=U($e,8)+1,Gt=16<xt?0:4<xt?1:2<xt?2:3;if(ge[0]=ot(tt.Ea,Gt),tt.b=Gt,Tt=it=hi(xt,1,0,Fe,tt.K)){var Et,kn=xt,qt=tt,$n=1<<(8>>qt.b),Ji=d($n);if(Ji==null)Tt=0;else{var qn=qt.K[0],Bt=qt.w;for(Ji[0]=qt.K[0][0],Et=1;Et<1*kn;++Et)Ji[Et]=sn(qn[Bt+Et],Ji[Et-1]);for(;Et<4*$n;++Et)Ji[Et]=0;qt.K[0]=null,qt.K[0]=Ji,Tt=1}}it=Tt;break;case 2:break;default:n(0)}Q=it}}if(K=K[0],le=le[0],Q&&U(ce,1)&&!(Q=1<=(Ge=U(ce,4))&&11>=Ge)){z.a=3;break e}var Pt;if(Pt=Q)t:{var ja,Nn,Wn,$i=z,ao=K,_a=le,Ii=Ge,Ua=j,Do=$i.m,oo=$i.s,Kn=[null],Ci=1,ha=0,bi=Gr[Ii];n:for(;;){if(Ua&&U(Do,1)){var ro=U(Do,3)+2,ma=ot(ao,ro),gi=ot(_a,ro),Ta=ma*gi;if(!hi(ma,gi,0,$i,Kn))break n;for(Kn=Kn[0],oo.xc=ro,ja=0;ja<Ta;++ja){var Ui=Kn[ja]>>8&65535;Kn[ja]=Ui,Ui>=Ci&&(Ci=Ui+1)}}if(Do.h)break n;for(Nn=0;5>Nn;++Nn){var Za=Gs[Nn];!Nn&&0<Ii&&(Za+=1<<Ii),ha<Za&&(ha=Za)}var Fa=v(Ci*bi,re),Qi=Ci,Ai=v(Qi,fe);if(Ai==null)var Mo=null;else n(65536>=Qi),Mo=Ai;var Ka=d(ha);if(Mo==null||Ka==null||Fa==null){$i.a=1;break n}var pn=Fa;for(ja=Wn=0;ja<Ci;++ja){var an=Mo[ja],Jn=an.G,Ja=an.H,fs=0,Tr=1,ho=0;for(Nn=0;5>Nn;++Nn){Za=Gs[Nn],Jn[Nn]=pn,Ja[Nn]=Wn,!Nn&&0<Ii&&(Za+=1<<Ii);a:{var Al,kl=Za,Qc=$i,ea=Ka,ju=pn,Tu=Wn,Ps=0,pl=Qc.m,Ed=U(pl,1);if(u(ea,0,0,kl),Ed){var Cu=U(pl,1)+1,Au=U(pl,1),eu=U(pl,Au==0?1:8);ea[eu]=1,Cu==2&&(ea[eu=U(pl,8)]=1);var Bo=1}else{var Qa=d(19),Oc=U(pl,4)+4;if(19<Oc){Qc.a=3;var Nl=0;break a}for(Al=0;Al<Oc;++Al)Qa[Xs[Al]]=U(pl,3);var mc=void 0,ec=void 0,Mr=Qc,Zs=Qa,Rs=kl,tc=ea,gl=0,Ds=Mr.m,zl=8,nc=v(128,re);i:for(;C(nc,0,7,Zs,19);){if(U(Ds,1)){var bc=2+2*U(Ds,3);if((mc=2+U(Ds,bc))>Rs)break i}else mc=Rs;for(ec=0;ec<Rs&&mc--;){Te(Ds);var vc=nc[0+(127&W(Ds))];Ce(Ds,Ds.u+vc.g);var Ms=vc.value;if(16>Ms)tc[ec++]=Ms,Ms!=0&&(zl=Ms);else{var Ic=Ms==16,Ks=Ms-16,wc=cs[Ks],xl=U(Ds,nr[Ks])+wc;if(ec+xl>Rs)break i;for(var es=Ic?zl:0;0<xl--;)tc[ec++]=es}}gl=1;break i}gl||(Mr.a=3),Bo=gl}(Bo=Bo&&!pl.h)&&(Ps=C(ju,Tu,8,ea,kl)),Bo&&Ps!=0?Nl=Ps:(Qc.a=3,Nl=0)}if(Nl==0)break n;if(Tr&&fl[Nn]==1&&(Tr=pn[Wn].g==0),fs+=pn[Wn].g,Wn+=Nl,3>=Nn){var Js,Sc=Ka[0];for(Js=1;Js<Za;++Js)Ka[Js]>Sc&&(Sc=Ka[Js]);ho+=Sc}}if(an.nd=Tr,an.Qb=0,Tr&&(an.qb=(Jn[3][Ja[3]+0].value<<24|Jn[1][Ja[1]+0].value<<16|Jn[2][Ja[2]+0].value)>>>0,fs==0&&256>Jn[0][Ja[0]+0].value&&(an.Qb=1,an.qb+=Jn[0][Ja[0]+0].value<<8)),an.jc=!an.Qb&&6>ho,an.jc){var Uc,Qs=an;for(Uc=0;Uc<Ei;++Uc){var el=Uc,Cr=Qs.pd[el],ic=Qs.G[0][Qs.H[0]+el];256<=ic.value?(Cr.g=ic.g+256,Cr.value=ic.value):(Cr.g=0,Cr.value=0,el>>=li(ic,8,Cr),el>>=li(Qs.G[1][Qs.H[1]+el],16,Cr),el>>=li(Qs.G[2][Qs.H[2]+el],0,Cr),li(Qs.G[3][Qs.H[3]+el],24,Cr))}}}oo.vc=Kn,oo.Wb=Ci,oo.Ya=Mo,oo.yc=Fa,Pt=1;break t}Pt=0}if(!(Q=Pt)){z.a=3;break e}if(0<Ge){if(be.ua=1<<Ge,!de(be.Wa,Ge)){z.a=1,Q=0;break e}}else be.ua=0;var ac=z,tl=K,tu=le,_l=ac.s,Ll=_l.xc;if(ac.c=tl,ac.i=tu,_l.md=ot(tl,Ll),_l.wc=Ll==0?-1:(1<<Ll)-1,j){z.xb=wr;break e}if((Pe=d(K*le))==null){z.a=1,Q=0;break e}Q=(Q=No(z,Pe,0,K,le,le,null))&&!ce.h;break e}return Q?(Y!=null?Y[0]=Pe:(n(Pe==null),n(j)),z.$=0,j||Bn(be)):Bn(be),Q}function sr(h,x){var j=h.c*h.i,z=j+x+16*x;return n(h.c<=x),h.V=d(z),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+j+x,1)}function mi(h,x){var j=h.C,z=x-j,Y=h.V,Q=h.Ba+h.c*j;for(n(x<=h.l.o);0<z;){var K=16<z?16:z,le=h.l.ma,ce=h.l.width,be=ce*K,Pe=le.ca,Ge=le.tb+ce*j,ge=h.Ta,Re=h.Ua;bs(h,K,Y,Q),yr(ge,Re,Pe,Ge,be),la(le,j,j+K,Pe,Ge,ce),z-=K,Y+=K*h.c,j+=K}n(j==x),h.C=h.Ma=x}function lr(){this.ub=this.yd=this.td=this.Rb=0}function _i(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function vs(){this.Fb=this.Bb=this.Cb=0,this.Zb=d(4),this.Lb=d(4)}function cr(){this.Yb=(function(){var h=[];return(function x(j,z,Y){for(var Q=Y[z],K=0;K<Q&&(j.push(Y.length>z+1?[]:0),!(Y.length<z+1));K++)x(j[K],z+1,Y)})(h,0,[3,11]),h})()}function xa(){this.jb=d(3),this.Wc=g([4,8],cr),this.Xc=g([4,17],cr)}function ws(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new d(4),this.od=new d(4)}function yo(){this.ld=this.La=this.dd=this.tc=0}function Ir(){this.Na=this.la=0}function ca(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hl(){this.ad=d(384),this.Za=0,this.Ob=d(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Gn(){this.uc=this.M=this.Nb=0,this.wa=Array(new yo),this.Y=0,this.ya=Array(new Hl),this.aa=0,this.l=new ur}function va(){this.y=d(16),this.f=d(8),this.ea=d(8)}function Es(){this.cb=this.a=0,this.sc="",this.m=new A,this.Od=new lr,this.Kc=new _i,this.ed=new ws,this.Qa=new vs,this.Ic=this.$c=this.Aa=0,this.D=new Gn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=v(8,A),this.ia=0,this.pb=v(4,ca),this.Pa=new xa,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new va),this.Hd=0,this.rb=Array(new Ir),this.sb=0,this.wa=Array(new yo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hl),this.L=this.aa=0,this.gd=g([4,2],yo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xo(h,x){return 0>h?0:h>x?x:h}function ur(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Nr(){var h=new Es;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,vr||(vr=zo)),h}function Vn(h,x,j){return h.a==0&&(h.a=x,h.sc=j,h.cb=0),0}function Io(h,x,j){return 3<=j&&h[x+0]==157&&h[x+1]==1&&h[x+2]==42}function Ur(h,x){if(h==null)return 0;if(h.a=0,h.sc="OK",x==null)return Vn(h,2,"null VP8Io passed to VP8GetHeaders()");var j=x.data,z=x.w,Y=x.ha;if(4>Y)return Vn(h,7,"Truncated header.");var Q=j[z+0]|j[z+1]<<8|j[z+2]<<16,K=h.Od;if(K.Rb=!(1&Q),K.td=Q>>1&7,K.yd=Q>>4&1,K.ub=Q>>5,3<K.td)return Vn(h,3,"Incorrect keyframe parameters.");if(!K.yd)return Vn(h,4,"Frame not displayable.");z+=3,Y-=3;var le=h.Kc;if(K.Rb){if(7>Y)return Vn(h,7,"cannot parse picture header");if(!Io(j,z,Y))return Vn(h,3,"Bad code word");le.c=16383&(j[z+4]<<8|j[z+3]),le.Td=j[z+4]>>6,le.i=16383&(j[z+6]<<8|j[z+5]),le.Ud=j[z+6]>>6,z+=7,Y-=7,h.za=le.c+15>>4,h.Ub=le.i+15>>4,x.width=le.c,x.height=le.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,u((Q=h.Pa).jb,0,255,Q.jb.length),n((Q=h.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,u(Q.Zb,0,0,Q.Zb.length),u(Q.Lb,0,0,Q.Lb)}if(K.ub>Y)return Vn(h,7,"bad partition length");te(Q=h.m,j,z,K.ub),z+=K.ub,Y-=K.ub,K.Rb&&(le.Ld=Ae(Q),le.Kd=Ae(Q)),le=h.Qa;var ce,be=h.Pa;if(n(Q!=null),n(le!=null),le.Cb=Ae(Q),le.Cb){if(le.Bb=Ae(Q),Ae(Q)){for(le.Fb=Ae(Q),ce=0;4>ce;++ce)le.Zb[ce]=Ae(Q)?pe(Q,7):0;for(ce=0;4>ce;++ce)le.Lb[ce]=Ae(Q)?pe(Q,6):0}if(le.Bb)for(ce=0;3>ce;++ce)be.jb[ce]=Ae(Q)?ne(Q,8):255}else le.Bb=0;if(Q.Ka)return Vn(h,3,"cannot parse segment header");if((le=h.ed).zd=Ae(Q),le.Tb=ne(Q,6),le.wb=ne(Q,3),le.Pc=Ae(Q),le.Pc&&Ae(Q)){for(be=0;4>be;++be)Ae(Q)&&(le.vd[be]=pe(Q,6));for(be=0;4>be;++be)Ae(Q)&&(le.od[be]=pe(Q,6))}if(h.L=le.Tb==0?0:le.zd?1:2,Q.Ka)return Vn(h,3,"cannot parse filter header");var Pe=Y;if(Y=ce=z,z=ce+Pe,le=Pe,h.Xb=(1<<ne(h.m,2))-1,Pe<3*(be=h.Xb))j=7;else{for(ce+=3*be,le-=3*be,Pe=0;Pe<be;++Pe){var Ge=j[Y+0]|j[Y+1]<<8|j[Y+2]<<16;Ge>le&&(Ge=le),te(h.Jc[+Pe],j,ce,Ge),ce+=Ge,le-=Ge,Y+=3}te(h.Jc[+be],j,ce,le),j=ce<z?0:5}if(j!=0)return Vn(h,j,"cannot parse partitions");for(j=ne(ce=h.m,7),Y=Ae(ce)?pe(ce,4):0,z=Ae(ce)?pe(ce,4):0,le=Ae(ce)?pe(ce,4):0,be=Ae(ce)?pe(ce,4):0,ce=Ae(ce)?pe(ce,4):0,Pe=h.Qa,Ge=0;4>Ge;++Ge){if(Pe.Cb){var ge=Pe.Zb[Ge];Pe.Fb||(ge+=j)}else{if(0<Ge){h.pb[Ge]=h.pb[0];continue}ge=j}var Re=h.pb[Ge];Re.Sc[0]=ds[Xo(ge+Y,127)],Re.Sc[1]=br[Xo(ge+0,127)],Re.Eb[0]=2*ds[Xo(ge+z,127)],Re.Eb[1]=101581*br[Xo(ge+le,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=ds[Xo(ge+be,117)],Re.Qc[1]=br[Xo(ge+ce,127)],Re.lc=ge+ce}if(!K.Rb)return Vn(h,4,"Not a key frame.");for(Ae(Q),K=h.Pa,j=0;4>j;++j){for(Y=0;8>Y;++Y)for(z=0;3>z;++z)for(le=0;11>le;++le)be=De(Q,Wi[j][Y][z][le])?ne(Q,8):Kl[j][Y][z][le],K.Wc[j][Y].Yb[z][le]=be;for(Y=0;17>Y;++Y)K.Xc[j][Y]=K.Wc[j][Hn[Y]]}return h.kc=Ae(Q),h.kc&&(h.Bd=ne(Q,8)),h.cb=1}function zo(h,x,j,z,Y,Q,K){var le=x[Y].Yb[j];for(j=0;16>Y;++Y){if(!De(h,le[j+0]))return Y;for(;!De(h,le[j+1]);)if(le=x[++Y].Yb[0],j=0,Y==16)return 16;var ce=x[Y+1].Yb;if(De(h,le[j+2])){var be=h,Pe=0;if(De(be,(ge=le)[(Ge=j)+3]))if(De(be,ge[Ge+6])){for(le=0,Ge=2*(Pe=De(be,ge[Ge+8]))+(ge=De(be,ge[Ge+9+Pe])),Pe=0,ge=Su[Ge];ge[le];++le)Pe+=Pe+De(be,ge[le]);Pe+=3+(8<<Ge)}else De(be,ge[Ge+7])?(Pe=7+2*De(be,165),Pe+=De(be,145)):Pe=5+De(be,159);else Pe=De(be,ge[Ge+4])?3+De(be,ge[Ge+5]):2;le=ce[2]}else Pe=1,le=ce[1];ce=K+Kc[Y],0>(be=h).b&&Le(be);var Ge,ge=be.b,Re=(Ge=be.Ca>>1)-(be.I>>ge)>>31;--be.b,be.Ca+=Re,be.Ca|=1,be.I-=(Ge+1&Re)<<ge,Q[ce]=((Pe^Re)-Re)*z[(0<Y)+0]}return 16}function ol(h){var x=h.rb[h.sb-1];x.la=0,x.Na=0,u(h.zc,0,0,h.zc.length),h.ja=0}function ua(h,x,j,z,Y){Y=h[x+j+32*z]+(Y>>3),h[x+j+32*z]=-256&Y?0>Y?0:255:Y}function ci(h,x,j,z,Y,Q){ua(h,x,0,j,z+Y),ua(h,x,1,j,z+Q),ua(h,x,2,j,z-Q),ua(h,x,3,j,z-Y)}function Gi(h){return(20091*h>>16)+h}function wa(h,x,j,z){var Y,Q=0,K=d(16);for(Y=0;4>Y;++Y){var le=h[x+0]+h[x+8],ce=h[x+0]-h[x+8],be=(35468*h[x+4]>>16)-Gi(h[x+12]),Pe=Gi(h[x+4])+(35468*h[x+12]>>16);K[Q+0]=le+Pe,K[Q+1]=ce+be,K[Q+2]=ce-be,K[Q+3]=le-Pe,Q+=4,x++}for(Y=Q=0;4>Y;++Y)le=(h=K[Q+0]+4)+K[Q+8],ce=h-K[Q+8],be=(35468*K[Q+4]>>16)-Gi(K[Q+12]),ua(j,z,0,0,le+(Pe=Gi(K[Q+4])+(35468*K[Q+12]>>16))),ua(j,z,1,0,ce+be),ua(j,z,2,0,ce-be),ua(j,z,3,0,le-Pe),Q++,z+=32}function Da(h,x,j,z){var Y=h[x+0]+4,Q=35468*h[x+4]>>16,K=Gi(h[x+4]),le=35468*h[x+1]>>16;ci(j,z,0,Y+K,h=Gi(h[x+1]),le),ci(j,z,1,Y+Q,h,le),ci(j,z,2,Y-Q,h,le),ci(j,z,3,Y-K,h,le)}function ql(h,x,j,z,Y){wa(h,x,j,z),Y&&wa(h,x+16,j,z+4)}function Sa(h,x,j,z){Ea(h,x+0,j,z,1),Ea(h,x+32,j,z+128,1)}function dr(h,x,j,z){var Y;for(h=h[x+0]+4,Y=0;4>Y;++Y)for(x=0;4>x;++x)ua(j,z,x,Y,h)}function rl(h,x,j,z){h[x+0]&&ei(h,x+0,j,z),h[x+16]&&ei(h,x+16,j,z+4),h[x+32]&&ei(h,x+32,j,z+128),h[x+48]&&ei(h,x+48,j,z+128+4)}function fr(h,x,j,z){var Y,Q=d(16);for(Y=0;4>Y;++Y){var K=h[x+0+Y]+h[x+12+Y],le=h[x+4+Y]+h[x+8+Y],ce=h[x+4+Y]-h[x+8+Y],be=h[x+0+Y]-h[x+12+Y];Q[0+Y]=K+le,Q[8+Y]=K-le,Q[4+Y]=be+ce,Q[12+Y]=be-ce}for(Y=0;4>Y;++Y)K=(h=Q[0+4*Y]+3)+Q[3+4*Y],le=Q[1+4*Y]+Q[2+4*Y],ce=Q[1+4*Y]-Q[2+4*Y],be=h-Q[3+4*Y],j[z+0]=K+le>>3,j[z+16]=be+ce>>3,j[z+32]=K-le>>3,j[z+48]=be-ce>>3,z+=64}function Ss(h,x,j){var z,Y=x-32,Q=Xa,K=255-h[Y-1];for(z=0;z<j;++z){var le,ce=Q,be=K+h[x-1];for(le=0;le<j;++le)h[x+le]=ce[be+h[Y+le]];x+=32}}function da(h,x){Ss(h,x,4)}function Qn(h,x){Ss(h,x,8)}function Fr(h,x){Ss(h,x,16)}function Wl(h,x){var j;for(j=0;16>j;++j)s(h,x+32*j,h,x-32,16)}function Fn(h,x){var j;for(j=16;0<j;--j)u(h,x,h[x-1],16),x+=32}function Ze(h,x,j){var z;for(z=0;16>z;++z)u(x,j+32*z,h,16)}function vi(h,x){var j,z=16;for(j=0;16>j;++j)z+=h[x-1+32*j]+h[x+j-32];Ze(z>>5,h,x)}function Zo(h,x){var j,z=8;for(j=0;16>j;++j)z+=h[x-1+32*j];Ze(z>>4,h,x)}function Cn(h,x){var j,z=8;for(j=0;16>j;++j)z+=h[x+j-32];Ze(z>>4,h,x)}function Jt(h,x){Ze(128,h,x)}function Rt(h,x,j){return h+2*x+j+2>>2}function Sn(h,x){var j,z=x-32;for(z=new Uint8Array([Rt(h[z-1],h[z+0],h[z+1]),Rt(h[z+0],h[z+1],h[z+2]),Rt(h[z+1],h[z+2],h[z+3]),Rt(h[z+2],h[z+3],h[z+4])]),j=0;4>j;++j)s(h,x+32*j,z,0,z.length)}function ui(h,x){var j=h[x-1],z=h[x-1+32],Y=h[x-1+64],Q=h[x-1+96];Ye(h,x+0,16843009*Rt(h[x-1-32],j,z)),Ye(h,x+32,16843009*Rt(j,z,Y)),Ye(h,x+64,16843009*Rt(z,Y,Q)),Ye(h,x+96,16843009*Rt(Y,Q,Q))}function An(h,x){var j,z=4;for(j=0;4>j;++j)z+=h[x+j-32]+h[x-1+32*j];for(z>>=3,j=0;4>j;++j)u(h,x+32*j,z,4)}function Hr(h,x){var j=h[x-1+0],z=h[x-1+32],Y=h[x-1+64],Q=h[x-1-32],K=h[x+0-32],le=h[x+1-32],ce=h[x+2-32],be=h[x+3-32];h[x+0+96]=Rt(z,Y,h[x-1+96]),h[x+1+96]=h[x+0+64]=Rt(j,z,Y),h[x+2+96]=h[x+1+64]=h[x+0+32]=Rt(Q,j,z),h[x+3+96]=h[x+2+64]=h[x+1+32]=h[x+0+0]=Rt(K,Q,j),h[x+3+64]=h[x+2+32]=h[x+1+0]=Rt(le,K,Q),h[x+3+32]=h[x+2+0]=Rt(ce,le,K),h[x+3+0]=Rt(be,ce,le)}function Ft(h,x){var j=h[x+1-32],z=h[x+2-32],Y=h[x+3-32],Q=h[x+4-32],K=h[x+5-32],le=h[x+6-32],ce=h[x+7-32];h[x+0+0]=Rt(h[x+0-32],j,z),h[x+1+0]=h[x+0+32]=Rt(j,z,Y),h[x+2+0]=h[x+1+32]=h[x+0+64]=Rt(z,Y,Q),h[x+3+0]=h[x+2+32]=h[x+1+64]=h[x+0+96]=Rt(Y,Q,K),h[x+3+32]=h[x+2+64]=h[x+1+96]=Rt(Q,K,le),h[x+3+64]=h[x+2+96]=Rt(K,le,ce),h[x+3+96]=Rt(le,ce,ce)}function wi(h,x){var j=h[x-1+0],z=h[x-1+32],Y=h[x-1+64],Q=h[x-1-32],K=h[x+0-32],le=h[x+1-32],ce=h[x+2-32],be=h[x+3-32];h[x+0+0]=h[x+1+64]=Q+K+1>>1,h[x+1+0]=h[x+2+64]=K+le+1>>1,h[x+2+0]=h[x+3+64]=le+ce+1>>1,h[x+3+0]=ce+be+1>>1,h[x+0+96]=Rt(Y,z,j),h[x+0+64]=Rt(z,j,Q),h[x+0+32]=h[x+1+96]=Rt(j,Q,K),h[x+1+32]=h[x+2+96]=Rt(Q,K,le),h[x+2+32]=h[x+3+96]=Rt(K,le,ce),h[x+3+32]=Rt(le,ce,be)}function cn(h,x){var j=h[x+0-32],z=h[x+1-32],Y=h[x+2-32],Q=h[x+3-32],K=h[x+4-32],le=h[x+5-32],ce=h[x+6-32],be=h[x+7-32];h[x+0+0]=j+z+1>>1,h[x+1+0]=h[x+0+64]=z+Y+1>>1,h[x+2+0]=h[x+1+64]=Y+Q+1>>1,h[x+3+0]=h[x+2+64]=Q+K+1>>1,h[x+0+32]=Rt(j,z,Y),h[x+1+32]=h[x+0+96]=Rt(z,Y,Q),h[x+2+32]=h[x+1+96]=Rt(Y,Q,K),h[x+3+32]=h[x+2+96]=Rt(Q,K,le),h[x+3+64]=Rt(K,le,ce),h[x+3+96]=Rt(le,ce,be)}function Xn(h,x){var j=h[x-1+0],z=h[x-1+32],Y=h[x-1+64],Q=h[x-1+96];h[x+0+0]=j+z+1>>1,h[x+2+0]=h[x+0+32]=z+Y+1>>1,h[x+2+32]=h[x+0+64]=Y+Q+1>>1,h[x+1+0]=Rt(j,z,Y),h[x+3+0]=h[x+1+32]=Rt(z,Y,Q),h[x+3+32]=h[x+1+64]=Rt(Y,Q,Q),h[x+3+64]=h[x+2+64]=h[x+0+96]=h[x+1+96]=h[x+2+96]=h[x+3+96]=Q}function ns(h,x){var j=h[x-1+0],z=h[x-1+32],Y=h[x-1+64],Q=h[x-1+96],K=h[x-1-32],le=h[x+0-32],ce=h[x+1-32],be=h[x+2-32];h[x+0+0]=h[x+2+32]=j+K+1>>1,h[x+0+32]=h[x+2+64]=z+j+1>>1,h[x+0+64]=h[x+2+96]=Y+z+1>>1,h[x+0+96]=Q+Y+1>>1,h[x+3+0]=Rt(le,ce,be),h[x+2+0]=Rt(K,le,ce),h[x+1+0]=h[x+3+32]=Rt(j,K,le),h[x+1+32]=h[x+3+64]=Rt(z,j,K),h[x+1+64]=h[x+3+96]=Rt(Y,z,j),h[x+1+96]=Rt(Q,Y,z)}function is(h,x){var j;for(j=0;8>j;++j)s(h,x+32*j,h,x-32,8)}function Uo(h,x){var j;for(j=0;8>j;++j)u(h,x,h[x-1],8),x+=32}function Fo(h,x,j){var z;for(z=0;8>z;++z)u(x,j+32*z,h,8)}function zr(h,x){var j,z=8;for(j=0;8>j;++j)z+=h[x+j-32]+h[x-1+32*j];Fo(z>>4,h,x)}function js(h,x){var j,z=4;for(j=0;8>j;++j)z+=h[x+j-32];Fo(z>>3,h,x)}function lo(h,x){var j,z=4;for(j=0;8>j;++j)z+=h[x-1+32*j];Fo(z>>3,h,x)}function Ts(h,x){Fo(128,h,x)}function Ko(h,x,j){var z=h[x-j],Y=h[x+0],Q=3*(Y-z)+Yr[1020+h[x-2*j]-h[x+j]],K=yc[112+(Q+4>>3)];h[x-j]=Xa[255+z+yc[112+(Q+3>>3)]],h[x+0]=Xa[255+Y-K]}function Os(h,x,j,z){var Y=h[x+0],Q=h[x+j];return no[255+h[x-2*j]-h[x-j]]>z||no[255+Q-Y]>z}function Vl(h,x,j,z){return 4*no[255+h[x-j]-h[x+0]]+no[255+h[x-2*j]-h[x+j]]<=z}function $l(h,x,j,z,Y){var Q=h[x-3*j],K=h[x-2*j],le=h[x-j],ce=h[x+0],be=h[x+j],Pe=h[x+2*j],Ge=h[x+3*j];return 4*no[255+le-ce]+no[255+K-be]>z?0:no[255+h[x-4*j]-Q]<=Y&&no[255+Q-K]<=Y&&no[255+K-le]<=Y&&no[255+Ge-Pe]<=Y&&no[255+Pe-be]<=Y&&no[255+be-ce]<=Y}function hn(h,x,j,z){var Y=2*z+1;for(z=0;16>z;++z)Vl(h,x+z,j,Y)&&Ko(h,x+z,j)}function Ho(h,x,j,z){var Y=2*z+1;for(z=0;16>z;++z)Vl(h,x+z*j,1,Y)&&Ko(h,x+z*j,1)}function Si(h,x,j,z){var Y;for(Y=3;0<Y;--Y)hn(h,x+=4*j,j,z)}function Cs(h,x,j,z){var Y;for(Y=3;0<Y;--Y)Ho(h,x+=4,j,z)}function Ma(h,x,j,z,Y,Q,K,le){for(Q=2*Q+1;0<Y--;){if($l(h,x,j,Q,K))if(Os(h,x,j,le))Ko(h,x,j);else{var ce=h,be=x,Pe=j,Ge=ce[be-2*Pe],ge=ce[be-Pe],Re=ce[be+0],Fe=ce[be+Pe],it=ce[be+2*Pe],$e=27*(st=Yr[1020+3*(Re-ge)+Yr[1020+Ge-Fe]])+63>>7,tt=18*st+63>>7,st=9*st+63>>7;ce[be-3*Pe]=Xa[255+ce[be-3*Pe]+st],ce[be-2*Pe]=Xa[255+Ge+tt],ce[be-Pe]=Xa[255+ge+$e],ce[be+0]=Xa[255+Re-$e],ce[be+Pe]=Xa[255+Fe-tt],ce[be+2*Pe]=Xa[255+it-st]}x+=z}}function qi(h,x,j,z,Y,Q,K,le){for(Q=2*Q+1;0<Y--;){if($l(h,x,j,Q,K))if(Os(h,x,j,le))Ko(h,x,j);else{var ce=h,be=x,Pe=j,Ge=ce[be-Pe],ge=ce[be+0],Re=ce[be+Pe],Fe=yc[112+(4+(it=3*(ge-Ge))>>3)],it=yc[112+(it+3>>3)],$e=Fe+1>>1;ce[be-2*Pe]=Xa[255+ce[be-2*Pe]+$e],ce[be-Pe]=Xa[255+Ge+it],ce[be+0]=Xa[255+ge-Fe],ce[be+Pe]=Xa[255+Re-$e]}x+=z}}function _o(h,x,j,z,Y,Q){Ma(h,x,j,1,16,z,Y,Q)}function Xi(h,x,j,z,Y,Q){Ma(h,x,1,j,16,z,Y,Q)}function Jo(h,x,j,z,Y,Q){var K;for(K=3;0<K;--K)qi(h,x+=4*j,j,1,16,z,Y,Q)}function w(h,x,j,z,Y,Q){var K;for(K=3;0<K;--K)qi(h,x+=4,1,j,16,z,Y,Q)}function G(h,x,j,z,Y,Q,K,le){Ma(h,x,Y,1,8,Q,K,le),Ma(j,z,Y,1,8,Q,K,le)}function ye(h,x,j,z,Y,Q,K,le){Ma(h,x,1,Y,8,Q,K,le),Ma(j,z,1,Y,8,Q,K,le)}function _e(h,x,j,z,Y,Q,K,le){qi(h,x+4*Y,Y,1,8,Q,K,le),qi(j,z+4*Y,Y,1,8,Q,K,le)}function Ie(h,x,j,z,Y,Q,K,le){qi(h,x+4,1,Y,8,Q,K,le),qi(j,z+4,1,Y,8,Q,K,le)}function dt(){this.ba=new Mn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new $t,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ft(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Yt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ot(){this.ua=0,this.Wa=new zt,this.vb=new zt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new fe,this.yc=new re}function jn(){this.xb=this.a=0,this.l=new ur,this.ca=new Mn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ot,this.ab=0,this.gc=v(4,Yt),this.Oc=0}function vn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ur,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pi(h,x,j,z,Y,Q,K){for(h=h==null?0:h[x+0],x=0;x<K;++x)Y[Q+x]=h+j[z+x]&255,h=Y[Q+x]}function Mi(h,x,j,z,Y,Q,K){var le;if(h==null)pi(null,null,j,z,Y,Q,K);else for(le=0;le<K;++le)Y[Q+le]=h[x+le]+j[z+le]&255}function Ba(h,x,j,z,Y,Q,K){if(h==null)pi(null,null,j,z,Y,Q,K);else{var le,ce=h[x+0],be=ce,Pe=ce;for(le=0;le<K;++le)be=Pe+(ce=h[x+le])-be,Pe=j[z+le]+(-256&be?0>be?0:255:be)&255,be=ce,Y[Q+le]=Pe}}function Zn(h,x,j,z){var Y=x.width,Q=x.o;if(n(h!=null&&x!=null),0>j||0>=z||j+z>Q)return null;if(!h.Cc){if(h.ga==null){var K;if(h.ga=new vn,(K=h.ga==null)||(K=x.width*x.o,n(h.Gb.length==0),h.Gb=d(K),h.Uc=0,h.Gb==null?K=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,K=1),K=!K),!K){K=h.ga;var le=h.Fa,ce=h.P,be=h.qc,Pe=h.mb,Ge=h.nb,ge=ce+1,Re=be-1,Fe=K.l;if(n(le!=null&&Pe!=null&&x!=null),ar[0]=null,ar[1]=pi,ar[2]=Mi,ar[3]=Ba,K.ca=Pe,K.tb=Ge,K.c=x.width,K.i=x.height,n(0<K.c&&0<K.i),1>=be)x=0;else if(K.$a=3&le[ce+0],K.Z=le[ce+0]>>2&3,K.Lc=le[ce+0]>>4&3,ce=le[ce+0]>>6&3,0>K.$a||1<K.$a||4<=K.Z||1<K.Lc||ce)x=0;else if(Fe.put=Kt,Fe.ac=Co,Fe.bc=Ao,Fe.ma=K,Fe.width=x.width,Fe.height=x.height,Fe.Da=x.Da,Fe.v=x.v,Fe.va=x.va,Fe.j=x.j,Fe.o=x.o,K.$a)e:{n(K.$a==1),x=kr();t:for(;;){if(x==null){x=0;break e}if(n(K!=null),K.mc=x,x.c=K.c,x.i=K.i,x.l=K.l,x.l.ma=K,x.l.width=K.c,x.l.height=K.i,x.a=0,Ne(x.m,le,ge,Re),!hi(K.c,K.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Hi(x.s)?(K.ic=1,le=x.c*x.i,x.Ta=null,x.Ua=0,x.V=d(le),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(K.ic=0,x=sr(x,K.c)),!x))break t;x=1;break e}K.mc=null,x=0}else x=Re>=K.c*K.i;K=!x}if(K)return null;h.ga.Lc!=1?h.Ga=0:z=Q-j}n(h.ga!=null),n(j+z<=Q);e:{if(x=(le=h.ga).c,Q=le.l.o,le.$a==0){if(ge=h.rc,Re=h.Vc,Fe=h.Fa,ce=h.P+1+j*x,be=h.mb,Pe=h.nb+j*x,n(ce<=h.P+h.qc),le.Z!=0)for(n(ar[le.Z]!=null),K=0;K<z;++K)ar[le.Z](ge,Re,Fe,ce,be,Pe,x),ge=be,Re=Pe,Pe+=x,ce+=x;else for(K=0;K<z;++K)s(be,Pe,Fe,ce,x),ge=be,Re=Pe,Pe+=x,ce+=x;h.rc=ge,h.Vc=Re}else{if(n(le.mc!=null),x=j+z,n((K=le.mc)!=null),n(x<=K.i),K.C>=x)x=1;else if(le.ic||Qo(),le.ic){le=K.V,ge=K.Ba,Re=K.c;var it=K.i,$e=(Fe=1,ce=K.$/Re,be=K.$%Re,Pe=K.m,Ge=K.s,K.$),tt=Re*it,st=Re*x,Tt=Ge.wc,xt=$e<st?zi(Ge,be,ce):null;n($e<=tt),n(x<=it),n(Hi(Ge));t:for(;;){for(;!Pe.h&&$e<st;){if(be&Tt||(xt=zi(Ge,be,ce)),n(xt!=null),Te(Pe),256>(it=si(xt.G[0],xt.H[0],Pe)))le[ge+$e]=it,++$e,++be>=Re&&(be=0,++ce<=x&&!(ce%16)&&ba(K,ce));else{if(!(280>it)){Fe=0;break t}it=Go(it-256,Pe);var Gt,Et=si(xt.G[4],xt.H[4],Pe);if(Te(Pe),!($e>=(Et=jt(Re,Et=Go(Et,Pe)))&&tt-$e>=it)){Fe=0;break t}for(Gt=0;Gt<it;++Gt)le[ge+$e+Gt]=le[ge+$e+Gt-Et];for($e+=it,be+=it;be>=Re;)be-=Re,++ce<=x&&!(ce%16)&&ba(K,ce);$e<st&&be&Tt&&(xt=zi(Ge,be,ce))}n(Pe.h==xe(Pe))}ba(K,ce>x?x:ce);break t}!Fe||Pe.h&&$e<tt?(Fe=0,K.a=Pe.h?5:3):K.$=$e,x=Fe}else x=No(K,K.V,K.Ba,K.c,K.i,x,mi);if(!x){z=0;break e}}j+z>=Q&&(h.Cc=1),z=1}if(!z)return null;if(h.Cc&&((z=h.ga)!=null&&(z.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+j*Y}function Na(h,x,j,z,Y,Q){for(;0<Y--;){var K,le=h,ce=x+(j?1:0),be=h,Pe=x+(j?0:3);for(K=0;K<z;++K){var Ge=be[Pe+4*K];Ge!=255&&(Ge*=32897,le[ce+4*K+0]=le[ce+4*K+0]*Ge>>23,le[ce+4*K+1]=le[ce+4*K+1]*Ge>>23,le[ce+4*K+2]=le[ce+4*K+2]*Ge>>23)}x+=Q}}function ji(h,x,j,z,Y){for(;0<z--;){var Q;for(Q=0;Q<j;++Q){var K=h[x+2*Q+0],le=15&(be=h[x+2*Q+1]),ce=4369*le,be=(240&be|be>>4)*ce>>16;h[x+2*Q+0]=(240&K|K>>4)*ce>>16&240|(15&K|K<<4)*ce>>16>>4&15,h[x+2*Q+1]=240&be|le}x+=Y}}function Va(h,x,j,z,Y,Q,K,le){var ce,be,Pe=255;for(be=0;be<Y;++be){for(ce=0;ce<z;++ce){var Ge=h[x+ce];Q[K+4*ce]=Ge,Pe&=Ge}x+=j,K+=le}return Pe!=255}function $a(h,x,j,z,Y){var Q;for(Q=0;Q<Y;++Q)j[z+Q]=h[x+Q]>>8}function Qo(){Ws=Na,oi=ji,Lo=Va,yr=$a}function Bi(h,x,j){O[h]=function(z,Y,Q,K,le,ce,be,Pe,Ge,ge,Re,Fe,it,$e,tt,st,Tt){var xt,Gt=Tt-1>>1,Et=le[ce+0]|be[Pe+0]<<16,kn=Ge[ge+0]|Re[Fe+0]<<16;n(z!=null);var qt=3*Et+kn+131074>>2;for(x(z[Y+0],255&qt,qt>>16,it,$e),Q!=null&&(qt=3*kn+Et+131074>>2,x(Q[K+0],255&qt,qt>>16,tt,st)),xt=1;xt<=Gt;++xt){var $n=le[ce+xt]|be[Pe+xt]<<16,Ji=Ge[ge+xt]|Re[Fe+xt]<<16,qn=Et+$n+kn+Ji+524296,Bt=qn+2*($n+kn)>>3;qt=Bt+Et>>1,Et=(qn=qn+2*(Et+Ji)>>3)+$n>>1,x(z[Y+2*xt-1],255&qt,qt>>16,it,$e+(2*xt-1)*j),x(z[Y+2*xt-0],255&Et,Et>>16,it,$e+(2*xt-0)*j),Q!=null&&(qt=qn+kn>>1,Et=Bt+Ji>>1,x(Q[K+2*xt-1],255&qt,qt>>16,tt,st+(2*xt-1)*j),x(Q[K+2*xt+0],255&Et,Et>>16,tt,st+(2*xt+0)*j)),Et=$n,kn=Ji}1&Tt||(qt=3*Et+kn+131074>>2,x(z[Y+Tt-1],255&qt,qt>>16,it,$e+(Tt-1)*j),Q!=null&&(qt=3*kn+Et+131074>>2,x(Q[K+Tt-1],255&qt,qt>>16,tt,st+(Tt-1)*j)))}}function Is(){Ki[Vs]=Rr,Ki[io]=Xr,Ki[Zl]=Sr,Ki[mr]=Zr,Ki[$s]=Kr,Ki[Ys]=wo,Ki[ul]=Jr,Ki[Pr]=Xr,Ki[Po]=Zr,Ki[dl]=Kr,Ki[Mc]=wo}function hc(h){return h&-16384?0>h?0:255:h>>Qr}function Us(h,x){return hc((19077*h>>8)+(26149*x>>8)-14234)}function hr(h,x,j){return hc((19077*h>>8)-(6419*x>>8)-(13320*j>>8)+8708)}function Fs(h,x){return hc((19077*h>>8)+(33050*x>>8)-17685)}function as(h,x,j,z,Y){z[Y+0]=Us(h,j),z[Y+1]=hr(h,x,j),z[Y+2]=Fs(h,x)}function co(h,x,j,z,Y){z[Y+0]=Fs(h,x),z[Y+1]=hr(h,x,j),z[Y+2]=Us(h,j)}function pr(h,x,j,z,Y){var Q=hr(h,x,j);x=Q<<3&224|Fs(h,x)>>3,z[Y+0]=248&Us(h,j)|Q>>5,z[Y+1]=x}function As(h,x,j,z,Y){var Q=240&Fs(h,x)|15;z[Y+0]=240&Us(h,j)|hr(h,x,j)>>4,z[Y+1]=Q}function er(h,x,j,z,Y){z[Y+0]=255,as(h,x,j,z,Y+1)}function gr(h,x,j,z,Y){co(h,x,j,z,Y),z[Y+3]=255}function to(h,x,j,z,Y){as(h,x,j,z,Y),z[Y+3]=255}function ks(h,x,j){O[h]=function(z,Y,Q,K,le,ce,be,Pe,Ge){for(var ge=Pe+(-2&Ge)*j;Pe!=ge;)x(z[Y+0],Q[K+0],le[ce+0],be,Pe),x(z[Y+1],Q[K+0],le[ce+0],be,Pe+j),Y+=2,++K,++ce,Pe+=2*j;1&Ge&&x(z[Y+0],Q[K+0],le[ce+0],be,Pe)}}function Ns(h,x,j){return j==0?h==0?x==0?6:5:x==0?4:0:j}function Yl(h,x,j,z,Y){switch(h>>>30){case 3:Ea(x,j,z,Y,0);break;case 2:fa(x,j,z,Y);break;case 1:ei(x,j,z,Y)}}function mo(h,x){var j,z,Y=x.M,Q=x.Nb,K=h.oc,le=h.pc+40,ce=h.oc,be=h.pc+584,Pe=h.oc,Ge=h.pc+600;for(j=0;16>j;++j)K[le+32*j-1]=129;for(j=0;8>j;++j)ce[be+32*j-1]=129,Pe[Ge+32*j-1]=129;for(0<Y?K[le-1-32]=ce[be-1-32]=Pe[Ge-1-32]=129:(u(K,le-32-1,127,21),u(ce,be-32-1,127,9),u(Pe,Ge-32-1,127,9)),z=0;z<h.za;++z){var ge=x.ya[x.aa+z];if(0<z){for(j=-1;16>j;++j)s(K,le+32*j-4,K,le+32*j+12,4);for(j=-1;8>j;++j)s(ce,be+32*j-4,ce,be+32*j+4,4),s(Pe,Ge+32*j-4,Pe,Ge+32*j+4,4)}var Re=h.Gd,Fe=h.Hd+z,it=ge.ad,$e=ge.Hc;if(0<Y&&(s(K,le-32,Re[Fe].y,0,16),s(ce,be-32,Re[Fe].f,0,8),s(Pe,Ge-32,Re[Fe].ea,0,8)),ge.Za){var tt=K,st=le-32+16;for(0<Y&&(z>=h.za-1?u(tt,st,Re[Fe].y[15],4):s(tt,st,Re[Fe+1].y,0,4)),j=0;4>j;j++)tt[st+128+j]=tt[st+256+j]=tt[st+384+j]=tt[st+0+j];for(j=0;16>j;++j,$e<<=2)tt=K,st=le+Ia[j],Zi[ge.Ob[j]](tt,st),Yl($e,it,16*+j,tt,st)}else if(tt=Ns(z,Y,ge.Ob[0]),Vi[tt](K,le),$e!=0)for(j=0;16>j;++j,$e<<=2)Yl($e,it,16*+j,K,le+Ia[j]);for(j=ge.Gc,tt=Ns(z,Y,ge.Dd),za[tt](ce,be),za[tt](Pe,Ge),$e=it,tt=ce,st=be,255&(ge=0|j)&&(170&ge?bo($e,256,tt,st):ti($e,256,tt,st)),ge=Pe,$e=Ge,255&(j>>=8)&&(170&j?bo(it,320,ge,$e):ti(it,320,ge,$e)),Y<h.Ub-1&&(s(Re[Fe].y,0,K,le+480,16),s(Re[Fe].f,0,ce,be+224,8),s(Re[Fe].ea,0,Pe,Ge+224,8)),j=8*Q*h.B,Re=h.sa,Fe=h.ta+16*z+16*Q*h.R,it=h.qa,ge=h.ra+8*z+j,$e=h.Ha,tt=h.Ia+8*z+j,j=0;16>j;++j)s(Re,Fe+j*h.R,K,le+32*j,16);for(j=0;8>j;++j)s(it,ge+j*h.B,ce,be+32*j,8),s($e,tt+j*h.B,Pe,Ge+32*j,8)}}function qr(h,x,j,z,Y,Q,K,le,ce){var be=[0],Pe=[0],Ge=0,ge=ce!=null?ce.kd:0,Re=ce??new ft;if(h==null||12>j)return 7;Re.data=h,Re.w=x,Re.ha=j,x=[x],j=[j],Re.gb=[Re.gb];e:{var Fe=x,it=j,$e=Re.gb;if(n(h!=null),n(it!=null),n($e!=null),$e[0]=0,12<=it[0]&&!a(h,Fe[0],"RIFF")){if(a(h,Fe[0]+8,"WEBP")){$e=3;break e}var tt=_t(h,Fe[0]+4);if(12>tt||4294967286<tt){$e=3;break e}if(ge&&tt>it[0]-8){$e=7;break e}$e[0]=tt,Fe[0]+=12,it[0]-=12}$e=0}if($e!=0)return $e;for(tt=0<Re.gb[0],j=j[0];;){e:{var st=h;it=x,$e=j;var Tt=be,xt=Pe,Gt=Fe=[0];if((qt=Ge=[Ge])[0]=0,8>$e[0])$e=7;else{if(!a(st,it[0],"VP8X")){if(_t(st,it[0]+4)!=10){$e=3;break e}if(18>$e[0]){$e=7;break e}var Et=_t(st,it[0]+8),kn=1+mt(st,it[0]+12);if(2147483648<=kn*(st=1+mt(st,it[0]+15))){$e=3;break e}Gt!=null&&(Gt[0]=Et),Tt!=null&&(Tt[0]=kn),xt!=null&&(xt[0]=st),it[0]+=18,$e[0]-=18,qt[0]=1}$e=0}}if(Ge=Ge[0],Fe=Fe[0],$e!=0)return $e;if(it=!!(2&Fe),!tt&&Ge)return 3;if(Q!=null&&(Q[0]=!!(16&Fe)),K!=null&&(K[0]=it),le!=null&&(le[0]=0),K=be[0],Fe=Pe[0],Ge&&it&&ce==null){$e=0;break}if(4>j){$e=7;break}if(tt&&Ge||!tt&&!Ge&&!a(h,x[0],"ALPH")){j=[j],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{Et=h,$e=x,tt=j;var qt=Re.gb;Tt=Re.na,xt=Re.P,Gt=Re.Sa,kn=22,n(Et!=null),n(tt!=null),st=$e[0];var $n=tt[0];for(n(Tt!=null),n(Gt!=null),Tt[0]=null,xt[0]=null,Gt[0]=0;;){if($e[0]=st,tt[0]=$n,8>$n){$e=7;break e}var Ji=_t(Et,st+4);if(4294967286<Ji){$e=3;break e}var qn=8+Ji+1&-2;if(kn+=qn,0<qt&&kn>qt){$e=3;break e}if(!a(Et,st,"VP8 ")||!a(Et,st,"VP8L")){$e=0;break e}if($n[0]<qn){$e=7;break e}a(Et,st,"ALPH")||(Tt[0]=Et,xt[0]=st+8,Gt[0]=Ji),st+=qn,$n-=qn}}if(j=j[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],$e!=0)break}j=[j],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(qt=h,$e=x,tt=j,Tt=Re.gb[0],xt=Re.Ja,Gt=Re.xa,Et=$e[0],st=!a(qt,Et,"VP8 "),kn=!a(qt,Et,"VP8L"),n(qt!=null),n(tt!=null),n(xt!=null),n(Gt!=null),8>tt[0])$e=7;else{if(st||kn){if(qt=_t(qt,Et+4),12<=Tt&&qt>Tt-12){$e=3;break e}if(ge&&qt>tt[0]-8){$e=7;break e}xt[0]=qt,$e[0]+=8,tt[0]-=8,Gt[0]=kn}else Gt[0]=5<=tt[0]&&qt[Et+0]==47&&!(qt[Et+4]>>5),xt[0]=tt[0];$e=0}if(j=j[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],x=x[0],$e!=0)break;if(4294967286<Re.Ja)return 3;if(le==null||it||(le[0]=Re.xa?2:1),K=[K],Fe=[Fe],Re.xa){if(5>j){$e=7;break}le=K,ge=Fe,it=Q,h==null||5>j?h=0:5<=j&&h[x+0]==47&&!(h[x+4]>>5)?(tt=[0],qt=[0],Tt=[0],Ne(xt=new E,h,x,j),rr(xt,tt,qt,Tt)?(le!=null&&(le[0]=tt[0]),ge!=null&&(ge[0]=qt[0]),it!=null&&(it[0]=Tt[0]),h=1):h=0):h=0}else{if(10>j){$e=7;break}le=Fe,h==null||10>j||!Io(h,x+3,j-3)?h=0:(ge=h[x+0]|h[x+1]<<8|h[x+2]<<16,it=16383&(h[x+7]<<8|h[x+6]),h=16383&(h[x+9]<<8|h[x+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=Re.Ja||!it||!h?h=0:(K&&(K[0]=it),le&&(le[0]=h),h=1))}if(!h||(K=K[0],Fe=Fe[0],Ge&&(be[0]!=K||Pe[0]!=Fe)))return 3;ce!=null&&(ce[0]=Re,ce.offset=x-ce.w,n(4294967286>x-ce.w),n(ce.offset==ce.ha-j));break}return $e==0||$e==7&&Ge&&ce==null?(Q!=null&&(Q[0]|=Re.na!=null&&0<Re.na.length),z!=null&&(z[0]=K),Y!=null&&(Y[0]=Fe),0):$e}function _r(h,x,j){var z=x.width,Y=x.height,Q=0,K=0,le=z,ce=Y;if(x.Da=h!=null&&0<h.Da,x.Da&&(le=h.cd,ce=h.bd,Q=h.v,K=h.j,11>j||(Q&=-2,K&=-2),0>Q||0>K||0>=le||0>=ce||Q+le>z||K+ce>Y))return 0;if(x.v=Q,x.j=K,x.va=Q+le,x.o=K+ce,x.U=le,x.T=ce,x.da=h!=null&&0<h.da,x.da){if(!kt(le,ce,j=[h.ib],Q=[h.hb]))return 0;x.ib=j[0],x.hb=Q[0]}return x.ob=h!=null&&h.ob,x.Kb=h==null||!h.Sd,x.da&&(x.ob=x.ib<3*z/4&&x.hb<3*Y/4,x.Kb=0),1}function Li(h){if(h==null)return 2;if(11>h.S){var x=h.f.RGBA;x.fb+=(h.height-1)*x.A,x.A=-x.A}else x=h.f.kb,h=h.height,x.O+=(h-1)*x.fa,x.fa=-x.fa,x.N+=(h-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(h-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(h-1)*x.lb,x.lb=-x.lb);return 0}function qo(h,x,j,z){if(z==null||0>=h||0>=x)return 2;if(j!=null){if(j.Da){var Y=j.cd,Q=j.bd,K=-2&j.v,le=-2&j.j;if(0>K||0>le||0>=Y||0>=Q||K+Y>h||le+Q>x)return 2;h=Y,x=Q}if(j.da){if(!kt(h,x,Y=[j.ib],Q=[j.hb]))return 2;h=Y[0],x=Q[0]}}z.width=h,z.height=x;e:{var ce=z.width,be=z.height;if(h=z.S,0>=ce||0>=be||!(h>=Vs&&13>h))h=2;else{if(0>=z.Rd&&z.sd==null){K=Q=Y=x=0;var Pe=(le=ce*Jc[h])*be;if(11>h||(Q=(be+1)/2*(x=(ce+1)/2),h==12&&(K=(Y=ce)*be)),(be=d(Pe+2*Q+K))==null){h=1;break e}z.sd=be,11>h?((ce=z.f.RGBA).eb=be,ce.fb=0,ce.A=le,ce.size=Pe):((ce=z.f.kb).y=be,ce.O=0,ce.fa=le,ce.Fd=Pe,ce.f=be,ce.N=0+Pe,ce.Ab=x,ce.Cd=Q,ce.ea=be,ce.W=0+Pe+Q,ce.Db=x,ce.Ed=Q,h==12&&(ce.F=be,ce.J=0+Pe+2*Q),ce.Tc=K,ce.lb=Y)}if(x=1,Y=z.S,Q=z.width,K=z.height,Y>=Vs&&13>Y)if(11>Y)h=z.f.RGBA,x&=(le=Math.abs(h.A))*(K-1)+Q<=h.size,x&=le>=Q*Jc[Y],x&=h.eb!=null;else{h=z.f.kb,le=(Q+1)/2,Pe=(K+1)/2,ce=Math.abs(h.fa),be=Math.abs(h.Ab);var Ge=Math.abs(h.Db),ge=Math.abs(h.lb),Re=ge*(K-1)+Q;x&=ce*(K-1)+Q<=h.Fd,x&=be*(Pe-1)+le<=h.Cd,x=(x&=Ge*(Pe-1)+le<=h.Ed)&ce>=Q&be>=le&Ge>=le,x&=h.y!=null,x&=h.f!=null,x&=h.ea!=null,Y==12&&(x&=ge>=Q,x&=Re<=h.Tc,x&=h.F!=null)}else x=0;h=x?0:2}}return h!=0||j!=null&&j.fd&&(h=Li(z)),h}var Ei=64,uo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wo=24,xr=32,Hs=8,zs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ut("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(h){return h},O.Predictor2=function(h,x,j){return x[j+0]},O.Predictor3=function(h,x,j){return x[j+1]},O.Predictor4=function(h,x,j){return x[j-1]},O.Predictor5=function(h,x,j){return nn(nn(h,x[j+1]),x[j+0])},O.Predictor6=function(h,x,j){return nn(h,x[j-1])},O.Predictor7=function(h,x,j){return nn(h,x[j+0])},O.Predictor8=function(h,x,j){return nn(x[j-1],x[j+0])},O.Predictor9=function(h,x,j){return nn(x[j+0],x[j+1])},O.Predictor10=function(h,x,j){return nn(nn(h,x[j-1]),nn(x[j+0],x[j+1]))},O.Predictor11=function(h,x,j){var z=x[j+0];return 0>=Mt(z>>24&255,h>>24&255,(x=x[j-1])>>24&255)+Mt(z>>16&255,h>>16&255,x>>16&255)+Mt(z>>8&255,h>>8&255,x>>8&255)+Mt(255&z,255&h,255&x)?z:h},O.Predictor12=function(h,x,j){var z=x[j+0];return(Un((h>>24&255)+(z>>24&255)-((x=x[j-1])>>24&255))<<24|Un((h>>16&255)+(z>>16&255)-(x>>16&255))<<16|Un((h>>8&255)+(z>>8&255)-(x>>8&255))<<8|Un((255&h)+(255&z)-(255&x)))>>>0},O.Predictor13=function(h,x,j){var z=x[j-1];return(Ct((h=nn(h,x[j+0]))>>24&255,z>>24&255)<<24|Ct(h>>16&255,z>>16&255)<<16|Ct(h>>8&255,z>>8&255)<<8|Ct(255&h,255&z))>>>0};var pc=O.PredictorAdd0;O.PredictorAdd1=ri,Ut("Predictor2","PredictorAdd2"),Ut("Predictor3","PredictorAdd3"),Ut("Predictor4","PredictorAdd4"),Ut("Predictor5","PredictorAdd5"),Ut("Predictor6","PredictorAdd6"),Ut("Predictor7","PredictorAdd7"),Ut("Predictor8","PredictorAdd8"),Ut("Predictor9","PredictorAdd9"),Ut("Predictor10","PredictorAdd10"),Ut("Predictor11","PredictorAdd11"),Ut("Predictor12","PredictorAdd12"),Ut("Predictor13","PredictorAdd13");var gc=O.PredictorAdd2;Zt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Zt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var na,xc=O.ColorIndexInverseTransform,Wr=O.MapARGB,os=O.VP8LColorIndexInverseTransformAlpha,Ya=O.MapAlpha,rs=O.VP8LPredictorsAdd=[];rs.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var qs,sl,Vr,_s,$r,ll,tr,Ea,fa,bo,ei,ti,Ti,ia,fo,Lr,Ga,Oi,ss,vo,ls,Xu,cl,Zc,Ws,oi,Lo,yr,Tl=d(511),Dc=d(2041),Gl=d(225),Cl=d(767),Xl=0,Yr=Dc,yc=Gl,Xa=Cl,no=Tl,Vs=0,io=1,Zl=2,mr=3,$s=4,Ys=5,ul=6,Pr=7,Po=8,dl=9,Mc=10,nr=[2,3,7],cs=[3,3,11],Gs=[280,256,256,256,40],fl=[0,1,1,1,0],Xs=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],us=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Gr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],hl=8,ds=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],br=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vr=null,Su=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Kc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Kl=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ya=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Wi=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Hn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Vi=[],Zi=[],za=[],wr=1,ir=2,ar=[],Ki=[];Bi("UpsampleRgbLinePair",as,3),Bi("UpsampleBgrLinePair",co,3),Bi("UpsampleRgbaLinePair",to,4),Bi("UpsampleBgraLinePair",gr,4),Bi("UpsampleArgbLinePair",er,4),Bi("UpsampleRgba4444LinePair",As,2),Bi("UpsampleRgb565LinePair",pr,2);var Rr=O.UpsampleRgbLinePair,Sr=O.UpsampleBgrLinePair,Xr=O.UpsampleRgbaLinePair,Zr=O.UpsampleBgraLinePair,Kr=O.UpsampleArgbLinePair,wo=O.UpsampleRgba4444LinePair,Jr=O.UpsampleRgb565LinePair,Oa=16,Dr=1<<Oa-1,Ro=-227,or=482,Qr=6,jr=0,en=d(256),Ln=d(256),Zu=d(256),Ec=d(256),Md=d(or-Ro),Bd=d(or-Ro);ks("YuvToRgbRow",as,3),ks("YuvToBgrRow",co,3),ks("YuvToRgbaRow",to,4),ks("YuvToBgraRow",gr,4),ks("YuvToArgbRow",er,4),ks("YuvToRgba4444Row",As,2),ks("YuvToRgb565Row",pr,2);var Ia=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Jl=[0,2,8],Ls=[8,7,6,4,4,2,2,2,1,1,1,1],Ql=1;this.WebPDecodeRGBA=function(h,x,j,z,Y){var Q=io,K=new dt,le=new Mn;K.ba=le,le.S=Q,le.width=[le.width],le.height=[le.height];var ce=le.width,be=le.height,Pe=new fn;if(Pe==null||h==null)var Ge=2;else n(Pe!=null),Ge=qr(h,x,j,Pe.width,Pe.height,Pe.Pd,Pe.Qd,Pe.format,null);if(Ge!=0?ce=0:(ce!=null&&(ce[0]=Pe.width[0]),be!=null&&(be[0]=Pe.height[0]),ce=1),ce){le.width=le.width[0],le.height=le.height[0],z!=null&&(z[0]=le.width),Y!=null&&(Y[0]=le.height);e:{if(z=new ur,(Y=new ft).data=h,Y.w=x,Y.ha=j,Y.kd=1,x=[0],n(Y!=null),((h=qr(Y.data,Y.w,Y.ha,null,null,null,x,null,Y))==0||h==7)&&x[0]&&(h=4),(x=h)==0){if(n(K!=null),z.data=Y.data,z.w=Y.w+Y.offset,z.ha=Y.ha-Y.offset,z.put=Kt,z.ac=Co,z.bc=Ao,z.ma=K,Y.xa){if((h=kr())==null){K=1;break e}if((function(ge,Re){var Fe=[0],it=[0],$e=[0];t:for(;;){if(ge==null)return 0;if(Re==null)return ge.a=2,0;if(ge.l=Re,ge.a=0,Ne(ge.m,Re.data,Re.w,Re.ha),!rr(ge.m,Fe,it,$e)){ge.a=3;break t}if(ge.xb=ir,Re.width=Fe[0],Re.height=it[0],!hi(Fe[0],it[0],1,ge,null))break t;return 1}return n(ge.a!=0),0})(h,z)){if(z=(x=qo(z.width,z.height,K.Oa,K.ba))==0){t:{z=h;n:for(;;){if(z==null){z=0;break t}if(n(z.s.yc!=null),n(z.s.Ya!=null),n(0<z.s.Wb),n((j=z.l)!=null),n((Y=j.ma)!=null),z.xb!=0){if(z.ca=Y.ba,z.tb=Y.tb,n(z.ca!=null),!_r(Y.Oa,j,mr)){z.a=2;break n}if(!sr(z,j.width)||j.da)break n;if((j.da||Vt(z.ca.S))&&Qo(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&Qo()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!de(z.s.vb,z.s.Wa.Xa)){z.a=1;break n}z.xb=0}if(!No(z,z.V,z.Ba,z.c,z.i,j.o,ko))break n;Y.Dc=z.Ma,z=1;break t}n(z.a!=0),z=0}z=!z}z&&(x=h.a)}else x=h.a}else{if((h=new Nr)==null){K=1;break e}if(h.Fa=Y.na,h.P=Y.P,h.qc=Y.Sa,Ur(h,z)){if((x=qo(z.width,z.height,K.Oa,K.ba))==0){if(h.Aa=0,j=K.Oa,n((Y=h)!=null),j!=null){if(0<(ce=0>(ce=j.Md)?0:100<ce?255:255*ce/100)){for(be=Pe=0;4>be;++be)12>(Ge=Y.pb[be]).lc&&(Ge.ia=ce*Ls[0>Ge.lc?0:Ge.lc]>>3),Pe|=Ge.ia;Pe&&(alert("todo:VP8InitRandom"),Y.ia=1)}Y.Ga=j.Id,100<Y.Ga?Y.Ga=100:0>Y.Ga&&(Y.Ga=0)}(function(ge,Re){if(ge==null)return 0;if(Re==null)return Vn(ge,2,"NULL VP8Io parameter in VP8Decode().");if(!ge.cb&&!Ur(ge,Re))return 0;if(n(ge.cb),Re.ac==null||Re.ac(Re)){Re.ob&&(ge.L=0);var Fe=Jl[ge.L];if(ge.L==2?(ge.yb=0,ge.zb=0):(ge.yb=Re.v-Fe>>4,ge.zb=Re.j-Fe>>4,0>ge.yb&&(ge.yb=0),0>ge.zb&&(ge.zb=0)),ge.Va=Re.o+15+Fe>>4,ge.Hb=Re.va+15+Fe>>4,ge.Hb>ge.za&&(ge.Hb=ge.za),ge.Va>ge.Ub&&(ge.Va=ge.Ub),0<ge.L){var it=ge.ed;for(Fe=0;4>Fe;++Fe){var $e;if(ge.Qa.Cb){var tt=ge.Qa.Lb[Fe];ge.Qa.Fb||(tt+=it.Tb)}else tt=it.Tb;for($e=0;1>=$e;++$e){var st=ge.gd[Fe][$e],Tt=tt;if(it.Pc&&(Tt+=it.vd[0],$e&&(Tt+=it.od[0])),0<(Tt=0>Tt?0:63<Tt?63:Tt)){var xt=Tt;0<it.wb&&(xt=4<it.wb?xt>>2:xt>>1)>9-it.wb&&(xt=9-it.wb),1>xt&&(xt=1),st.dd=xt,st.tc=2*Tt+xt,st.ld=40<=Tt?2:15<=Tt?1:0}else st.tc=0;st.La=$e}}}Fe=0}else Vn(ge,6,"Frame setup failed"),Fe=ge.a;if(Fe=Fe==0){if(Fe){ge.$c=0,0<ge.Aa||(ge.Ic=Ql);t:{Fe=ge.Ic,it=4*(xt=ge.za);var Gt=32*xt,Et=xt+1,kn=0<ge.L?xt*(0<ge.Aa?2:1):0,qt=(ge.Aa==2?2:1)*xt;if((st=it+832+($e=3*(16*Fe+Jl[ge.L])/2*Gt)+(tt=ge.Fa!=null&&0<ge.Fa.length?ge.Kc.c*ge.Kc.i:0))!=st)Fe=0;else{if(st>ge.Vb){if(ge.Vb=0,ge.Ec=d(st),ge.Fc=0,ge.Ec==null){Fe=Vn(ge,1,"no memory during frame initialization.");break t}ge.Vb=st}st=ge.Ec,Tt=ge.Fc,ge.Ac=st,ge.Bc=Tt,Tt+=it,ge.Gd=v(Gt,va),ge.Hd=0,ge.rb=v(Et+1,Ir),ge.sb=1,ge.wa=kn?v(kn,yo):null,ge.Y=0,ge.D.Nb=0,ge.D.wa=ge.wa,ge.D.Y=ge.Y,0<ge.Aa&&(ge.D.Y+=xt),n(!0),ge.oc=st,ge.pc=Tt,Tt+=832,ge.ya=v(qt,Hl),ge.aa=0,ge.D.ya=ge.ya,ge.D.aa=ge.aa,ge.Aa==2&&(ge.D.aa+=xt),ge.R=16*xt,ge.B=8*xt,xt=(Gt=Jl[ge.L])*ge.R,Gt=Gt/2*ge.B,ge.sa=st,ge.ta=Tt+xt,ge.qa=ge.sa,ge.ra=ge.ta+16*Fe*ge.R+Gt,ge.Ha=ge.qa,ge.Ia=ge.ra+8*Fe*ge.B+Gt,ge.$c=0,Tt+=$e,ge.mb=tt?st:null,ge.nb=tt?Tt:null,n(Tt+tt<=ge.Fc+ge.Vb),ol(ge),u(ge.Ac,ge.Bc,0,it),Fe=1}}if(Fe){if(Re.ka=0,Re.y=ge.sa,Re.O=ge.ta,Re.f=ge.qa,Re.N=ge.ra,Re.ea=ge.Ha,Re.Vd=ge.Ia,Re.fa=ge.R,Re.Rc=ge.B,Re.F=null,Re.J=0,!Xl){for(Fe=-255;255>=Fe;++Fe)Tl[255+Fe]=0>Fe?-Fe:Fe;for(Fe=-1020;1020>=Fe;++Fe)Dc[1020+Fe]=-128>Fe?-128:127<Fe?127:Fe;for(Fe=-112;112>=Fe;++Fe)Gl[112+Fe]=-16>Fe?-16:15<Fe?15:Fe;for(Fe=-255;510>=Fe;++Fe)Cl[255+Fe]=0>Fe?0:255<Fe?255:Fe;Xl=1}tr=fr,Ea=ql,bo=Sa,ei=dr,ti=rl,fa=Da,Ti=_o,ia=Xi,fo=G,Lr=ye,Ga=Jo,Oi=w,ss=_e,vo=Ie,ls=hn,Xu=Ho,cl=Si,Zc=Cs,Zi[0]=An,Zi[1]=da,Zi[2]=Sn,Zi[3]=ui,Zi[4]=Hr,Zi[5]=wi,Zi[6]=Ft,Zi[7]=cn,Zi[8]=ns,Zi[9]=Xn,Vi[0]=vi,Vi[1]=Fr,Vi[2]=Wl,Vi[3]=Fn,Vi[4]=Zo,Vi[5]=Cn,Vi[6]=Jt,za[0]=zr,za[1]=Qn,za[2]=is,za[3]=Uo,za[4]=lo,za[5]=js,za[6]=Ts,Fe=1}else Fe=0}Fe&&(Fe=(function($n,Ji){for($n.M=0;$n.M<$n.Va;++$n.M){var qn,Bt=$n.Jc[$n.M&$n.Xb],Pt=$n.m,ja=$n;for(qn=0;qn<ja.za;++qn){var Nn=Pt,Wn=ja,$i=Wn.Ac,ao=Wn.Bc+4*qn,_a=Wn.zc,Ii=Wn.ya[Wn.aa+qn];if(Wn.Qa.Bb?Ii.$b=De(Nn,Wn.Pa.jb[0])?2+De(Nn,Wn.Pa.jb[2]):De(Nn,Wn.Pa.jb[1]):Ii.$b=0,Wn.kc&&(Ii.Ad=De(Nn,Wn.Bd)),Ii.Za=!De(Nn,145)+0,Ii.Za){var Ua=Ii.Ob,Do=0;for(Wn=0;4>Wn;++Wn){var oo,Kn=_a[0+Wn];for(oo=0;4>oo;++oo){Kn=ya[$i[ao+oo]][Kn];for(var Ci=Bc[De(Nn,Kn[0])];0<Ci;)Ci=Bc[2*Ci+De(Nn,Kn[Ci])];Kn=-Ci,$i[ao+oo]=Kn}s(Ua,Do,$i,ao,4),Do+=4,_a[0+Wn]=Kn}}else Kn=De(Nn,156)?De(Nn,128)?1:3:De(Nn,163)?2:0,Ii.Ob[0]=Kn,u($i,ao,Kn,4),u(_a,0,Kn,4);Ii.Dd=De(Nn,142)?De(Nn,114)?De(Nn,183)?1:3:2:0}if(ja.m.Ka)return Vn($n,7,"Premature end-of-partition0 encountered.");for(;$n.ja<$n.za;++$n.ja){if(ja=Bt,Nn=(Pt=$n).rb[Pt.sb-1],$i=Pt.rb[Pt.sb+Pt.ja],qn=Pt.ya[Pt.aa+Pt.ja],ao=Pt.kc?qn.Ad:0)Nn.la=$i.la=0,qn.Za||(Nn.Na=$i.Na=0),qn.Hc=0,qn.Gc=0,qn.ia=0;else{var ha,bi;if(Nn=$i,$i=ja,ao=Pt.Pa.Xc,_a=Pt.ya[Pt.aa+Pt.ja],Ii=Pt.pb[_a.$b],Wn=_a.ad,Ua=0,Do=Pt.rb[Pt.sb-1],Kn=oo=0,u(Wn,Ua,0,384),_a.Za)var ro=0,ma=ao[3];else{Ci=d(16);var gi=Nn.Na+Do.Na;if(gi=vr($i,ao[1],gi,Ii.Eb,0,Ci,0),Nn.Na=Do.Na=(0<gi)+0,1<gi)tr(Ci,0,Wn,Ua);else{var Ta=Ci[0]+3>>3;for(Ci=0;256>Ci;Ci+=16)Wn[Ua+Ci]=Ta}ro=1,ma=ao[0]}var Ui=15&Nn.la,Za=15&Do.la;for(Ci=0;4>Ci;++Ci){var Fa=1&Za;for(Ta=bi=0;4>Ta;++Ta)Ui=Ui>>1|(Fa=(gi=vr($i,ma,gi=Fa+(1&Ui),Ii.Sc,ro,Wn,Ua))>ro)<<7,bi=bi<<2|(3<gi?3:1<gi?2:Wn[Ua+0]!=0),Ua+=16;Ui>>=4,Za=Za>>1|Fa<<7,oo=(oo<<8|bi)>>>0}for(ma=Ui,ro=Za>>4,ha=0;4>ha;ha+=2){for(bi=0,Ui=Nn.la>>4+ha,Za=Do.la>>4+ha,Ci=0;2>Ci;++Ci){for(Fa=1&Za,Ta=0;2>Ta;++Ta)gi=Fa+(1&Ui),Ui=Ui>>1|(Fa=0<(gi=vr($i,ao[2],gi,Ii.Qc,0,Wn,Ua)))<<3,bi=bi<<2|(3<gi?3:1<gi?2:Wn[Ua+0]!=0),Ua+=16;Ui>>=2,Za=Za>>1|Fa<<5}Kn|=bi<<4*ha,ma|=Ui<<4<<ha,ro|=(240&Za)<<ha}Nn.la=ma,Do.la=ro,_a.Hc=oo,_a.Gc=Kn,_a.ia=43690&Kn?0:Ii.ia,ao=!(oo|Kn)}if(0<Pt.L&&(Pt.wa[Pt.Y+Pt.ja]=Pt.gd[qn.$b][qn.Za],Pt.wa[Pt.Y+Pt.ja].La|=!ao),ja.Ka)return Vn($n,7,"Premature end-of-file encountered.")}if(ol($n),Pt=Ji,ja=1,qn=(Bt=$n).D,Nn=0<Bt.L&&Bt.M>=Bt.zb&&Bt.M<=Bt.Va,Bt.Aa==0)t:{if(qn.M=Bt.M,qn.uc=Nn,mo(Bt,qn),ja=1,qn=(bi=Bt.D).Nb,Nn=(Kn=Jl[Bt.L])*Bt.R,$i=Kn/2*Bt.B,Ci=16*qn*Bt.R,Ta=8*qn*Bt.B,ao=Bt.sa,_a=Bt.ta-Nn+Ci,Ii=Bt.qa,Wn=Bt.ra-$i+Ta,Ua=Bt.Ha,Do=Bt.Ia-$i+Ta,Za=(Ui=bi.M)==0,oo=Ui>=Bt.Va-1,Bt.Aa==2&&mo(Bt,bi),bi.uc)for(Fa=(gi=Bt).D.M,n(gi.D.uc),bi=gi.yb;bi<gi.Hb;++bi){ro=bi,ma=Fa;var Qi=(Ai=(ho=gi).D).Nb;ha=ho.R;var Ai=Ai.wa[Ai.Y+ro],Mo=ho.sa,Ka=ho.ta+16*Qi*ha+16*ro,pn=Ai.dd,an=Ai.tc;if(an!=0)if(n(3<=an),ho.L==1)0<ro&&Xu(Mo,Ka,ha,an+4),Ai.La&&Zc(Mo,Ka,ha,an),0<ma&&ls(Mo,Ka,ha,an+4),Ai.La&&cl(Mo,Ka,ha,an);else{var Jn=ho.B,Ja=ho.qa,fs=ho.ra+8*Qi*Jn+8*ro,Tr=ho.Ha,ho=ho.Ia+8*Qi*Jn+8*ro;Qi=Ai.ld,0<ro&&(ia(Mo,Ka,ha,an+4,pn,Qi),Lr(Ja,fs,Tr,ho,Jn,an+4,pn,Qi)),Ai.La&&(Oi(Mo,Ka,ha,an,pn,Qi),vo(Ja,fs,Tr,ho,Jn,an,pn,Qi)),0<ma&&(Ti(Mo,Ka,ha,an+4,pn,Qi),fo(Ja,fs,Tr,ho,Jn,an+4,pn,Qi)),Ai.La&&(Ga(Mo,Ka,ha,an,pn,Qi),ss(Ja,fs,Tr,ho,Jn,an,pn,Qi))}}if(Bt.ia&&alert("todo:DitherRow"),Pt.put!=null){if(bi=16*Ui,Ui=16*(Ui+1),Za?(Pt.y=Bt.sa,Pt.O=Bt.ta+Ci,Pt.f=Bt.qa,Pt.N=Bt.ra+Ta,Pt.ea=Bt.Ha,Pt.W=Bt.Ia+Ta):(bi-=Kn,Pt.y=ao,Pt.O=_a,Pt.f=Ii,Pt.N=Wn,Pt.ea=Ua,Pt.W=Do),oo||(Ui-=Kn),Ui>Pt.o&&(Ui=Pt.o),Pt.F=null,Pt.J=null,Bt.Fa!=null&&0<Bt.Fa.length&&bi<Ui&&(Pt.J=Zn(Bt,Pt,bi,Ui-bi),Pt.F=Bt.mb,Pt.F==null&&Pt.F.length==0)){ja=Vn(Bt,3,"Could not decode alpha data.");break t}bi<Pt.j&&(Kn=Pt.j-bi,bi=Pt.j,n(!(1&Kn)),Pt.O+=Bt.R*Kn,Pt.N+=Bt.B*(Kn>>1),Pt.W+=Bt.B*(Kn>>1),Pt.F!=null&&(Pt.J+=Pt.width*Kn)),bi<Ui&&(Pt.O+=Pt.v,Pt.N+=Pt.v>>1,Pt.W+=Pt.v>>1,Pt.F!=null&&(Pt.J+=Pt.v),Pt.ka=bi-Pt.j,Pt.U=Pt.va-Pt.v,Pt.T=Ui-bi,ja=Pt.put(Pt))}qn+1!=Bt.Ic||oo||(s(Bt.sa,Bt.ta-Nn,ao,_a+16*Bt.R,Nn),s(Bt.qa,Bt.ra-$i,Ii,Wn+8*Bt.B,$i),s(Bt.Ha,Bt.Ia-$i,Ua,Do+8*Bt.B,$i))}if(!ja)return Vn($n,6,"Output aborted.")}return 1})(ge,Re)),Re.bc!=null&&Re.bc(Re),Fe&=1}return Fe?(ge.cb=0,Fe):0})(h,z)||(x=h.a)}}else x=h.a}x==0&&K.Oa!=null&&K.Oa.fd&&(x=Li(K.ba))}K=x}Q=K!=0?null:11>Q?le.f.RGBA.eb:le.f.kb.y}else Q=null;return Q};var Jc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function b(O,he){for(var N="",C=0;C<4;C++)N+=String.fromCharCode(O[he++]);return N}function S(O,he){return O[he+0]|O[he+1]<<8}function R(O,he){return(O[he+0]|O[he+1]<<8|O[he+2]<<16)>>>0}function q(O,he){return(O[he+0]|O[he+1]<<8|O[he+2]<<16|O[he+3]<<24)>>>0}new f;var T=[0],V=[0],X=[],L=new f,D=o,ve=(function(O,he){var N={},C=0,re=!1,ie=0,fe=0;if(N.frames=[],!(function(A,E){for(var W=0;W<4;W++)if(A[E+W]!="RIFF".charCodeAt(W))return!0;return!1})(O,he)){for(q(O,he+=4),he+=8;he<O.length;){var te=b(O,he),ne=q(O,he+=4);he+=4;var pe=ne+(1&ne);switch(te){case"VP8 ":case"VP8L":N.frames[C]===void 0&&(N.frames[C]={}),(U=N.frames[C]).src_off=re?fe:he-8,U.src_size=ie+ne+8,C++,re&&(re=!1,ie=0,fe=0);break;case"VP8X":(U=N.header={}).feature_flags=O[he];var Ne=he+4;U.canvas_width=1+R(O,Ne),Ne+=3,U.canvas_height=1+R(O,Ne),Ne+=3;break;case"ALPH":re=!0,ie=pe+8,fe=he-8;break;case"ANIM":(U=N.header).bgcolor=q(O,he),Ne=he+4,U.loop_count=S(O,Ne),Ne+=2;break;case"ANMF":var me,U;(U=N.frames[C]={}).offset_x=2*R(O,he),he+=3,U.offset_y=2*R(O,he),he+=3,U.width=1+R(O,he),he+=3,U.height=1+R(O,he),he+=3,U.duration=R(O,he),he+=3,me=O[he++],U.dispose=1&me,U.blend=me>>1&1}te!="ANMF"&&(he+=pe)}return N}})(D,0);ve.response=D,ve.rgbaoutput=!0,ve.dataurl=!1;var se=ve.header?ve.header:null,ee=ve.frames?ve.frames:null;if(se){se.loop_counter=se.loop_count,T=[se.canvas_height],V=[se.canvas_width];for(var J=0;J<ee.length&&ee[J].blend!=0;J++);}var $=ee[0],I=L.WebPDecodeRGBA(D,$.src_off,$.src_size,V,T);$.rgba=I,$.imgwidth=V[0],$.imgheight=T[0];for(var F=0;F<V[0]*T[0]*4;F++)X[F]=I[F];return this.width=V,this.height=T,this.data=X,this}(function(o){var n,a,s,u,d,v,g,f,b,S=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new f,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new v,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new v,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};o.events.push(["initialized",function(){this.context2d=new R(this),n=this.internal.f2,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,u=this.internal.getHorizontalCoordinate,d=this.internal.getVerticalCoordinate,v=this.internal.Point,g=this.internal.Rectangle,f=this.internal.Matrix,b=new S}]);var R=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var E=A;Object.defineProperty(this,"pdf",{get:function(){return E}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(de){W=!!de}});var xe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return xe},set:function(de){xe=!!de}});var Ce=0;Object.defineProperty(this,"posX",{get:function(){return Ce},set:function(de){isNaN(de)||(Ce=de)}});var Te=0;Object.defineProperty(this,"posY",{get:function(){return Te},set:function(de){isNaN(de)||(Te=de)}}),Object.defineProperty(this,"margin",{get:function(){return b.margin},set:function(de){var vt;typeof de=="number"?vt=[de,de,de,de]:((vt=new Array(4))[0]=de[0],vt[1]=de.length>=2?de[1]:vt[0],vt[2]=de.length>=3?de[2]:vt[0],vt[3]=de.length>=4?de[3]:vt[1]),b.margin=vt}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(de){Le=de}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(de){Ae=de}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(de){De=de}}),Object.defineProperty(this,"ctx",{get:function(){return b},set:function(de){de instanceof S&&(b=de)}}),Object.defineProperty(this,"path",{get:function(){return b.path},set:function(de){b.path=de}});var Ye=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ye},set:function(de){Ye=de}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(de){var vt;vt=q(de),this.ctx.fillStyle=vt.style,this.ctx.isFillTransparent=vt.a===0,this.ctx.fillOpacity=vt.a,this.pdf.setFillColor(vt.r,vt.g,vt.b,{a:vt.a}),this.pdf.setTextColor(vt.r,vt.g,vt.b,{a:vt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(de){var vt=q(de);this.ctx.strokeStyle=vt.style,this.ctx.isStrokeTransparent=vt.a===0,this.ctx.strokeOpacity=vt.a,vt.a===0?this.pdf.setDrawColor(255,255,255):(vt.a,this.pdf.setDrawColor(vt.r,vt.g,vt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(de){["butt","round","square"].indexOf(de)!==-1&&(this.ctx.lineCap=de,this.pdf.setLineCap(de))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(de){isNaN(de)||(this.ctx.lineWidth=de,this.pdf.setLineWidth(de))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(de){["bevel","round","miter"].indexOf(de)!==-1&&(this.ctx.lineJoin=de,this.pdf.setLineJoin(de))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(de){isNaN(de)||(this.ctx.miterLimit=de,this.pdf.setMiterLimit(de))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(de){this.ctx.textBaseline=de}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(de){["right","end","center","left","start"].indexOf(de)!==-1&&(this.ctx.textAlign=de)}});var pt=null,mt=null,_t=null;Object.defineProperty(this,"fontFaces",{get:function(){return _t},set:function(de){pt=null,mt=null,_t=de}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(de){var vt;if(this.ctx.font=de,(vt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(de))!==null){var zt=vt[1];vt[2];var kt=vt[3],ot=vt[4];vt[5];var sn=vt[6],Ut=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ot)[2];ot=Math.floor(Ut==="px"?parseFloat(ot)*this.pdf.internal.scaleFactor:Ut==="em"?parseFloat(ot)*this.pdf.getFontSize():parseFloat(ot)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ot);var xn=(function(Zt){var _n,Tn,ln=[],yn=Zt.trim();if(yn==="")return Jp;if(yn in V1)return[V1[yn]];for(;yn!=="";){switch(Tn=null,_n=(yn=Y1(yn)).charAt(0)){case'"':case"'":Tn=sb(yn.substring(1),_n);break;default:Tn=lb(yn)}if(Tn===null||(ln.push(Tn[0]),(yn=Y1(Tn[1]))!==""&&yn.charAt(0)!==","))return Jp;yn=yn.replace(/^,/,"")}return ln})(sn);if(this.fontFaces){var nn=(function(Zt,_n){var Tn=Zt.getFontList(),ln=JSON.stringify(Tn);if(pt===null||mt!==ln){var yn=(function(nt){var Qt=[];return Object.keys(nt).forEach(function(Wt){nt[Wt].forEach(function(Vt){var bn=null;switch(Vt){case"bold":bn={family:Wt,weight:"bold"};break;case"italic":bn={family:Wt,style:"italic"};break;case"bolditalic":bn={family:Wt,weight:"bold",style:"italic"};break;case"":case"normal":bn={family:Wt}}bn!==null&&(bn.ref={name:Wt,style:Vt},Qt.push(bn))})}),Qt})(Tn);pt=(function(nt){for(var Qt={},Wt=0;Wt<nt.length;++Wt){var Vt=Kp(nt[Wt]),bn=Vt.family,Fi=Vt.stretch,Mn=Vt.style,fn=Vt.weight;Qt[bn]=Qt[bn]||{},Qt[bn][Fi]=Qt[bn][Fi]||{},Qt[bn][Fi][Mn]=Qt[bn][Fi][Mn]||{},Qt[bn][Fi][Mn][fn]=Vt}return Qt})(yn.concat(_n)),mt=ln}return pt})(this.pdf,this.fontFaces),Un=xn.map(function(Zt){return{family:Zt,stretch:"normal",weight:kt,style:zt}}),Ct=(function(Zt,_n,Tn){for(var ln=(Tn=Tn||{}).defaultFontFamily||"times",yn=Object.assign({},rb,Tn.genericFontFamilies||{}),nt=null,Qt=null,Wt=0;Wt<_n.length;++Wt)if(yn[(nt=Kp(_n[Wt])).family]&&(nt.family=yn[nt.family]),Zt.hasOwnProperty(nt.family)){Qt=Zt[nt.family];break}if(!(Qt=Qt||Zt[ln]))throw new Error("Could not find a font-family for the rule '"+$1(nt)+"' and default family '"+ln+"'.");if(Qt=(function(Vt,bn){if(bn[Vt])return bn[Vt];var Fi=p0[Vt],Mn=Fi<=p0.normal?-1:1,fn=W1(bn,nx,Fi,Mn);if(!fn)throw new Error("Could not find a matching font-stretch value for "+Vt);return fn})(nt.stretch,Qt),Qt=(function(Vt,bn){if(bn[Vt])return bn[Vt];for(var Fi=tx[Vt],Mn=0;Mn<Fi.length;++Mn)if(bn[Fi[Mn]])return bn[Fi[Mn]];throw new Error("Could not find a matching font-style for "+Vt)})(nt.style,Qt),!(Qt=(function(Vt,bn){if(bn[Vt])return bn[Vt];if(Vt===400&&bn[500])return bn[500];if(Vt===500&&bn[400])return bn[400];var Fi=ob[Vt],Mn=W1(bn,ix,Fi,Vt<400?-1:1);if(!Mn)throw new Error("Could not find a matching font-weight for value "+Vt);return Mn})(nt.weight,Qt)))throw new Error("Failed to resolve a font for the rule '"+$1(nt)+"'.");return Qt})(nn,Un);this.pdf.setFont(Ct.ref.name,Ct.ref.style)}else{var Mt="";(kt==="bold"||parseInt(kt,10)>=700||zt==="bold")&&(Mt="bold"),zt==="italic"&&(Mt+="italic"),Mt.length===0&&(Mt="normal");for(var ri="",ht={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},St=0;St<xn.length;St++){if(this.pdf.internal.getFont(xn[St],Mt,{noFallback:!0,disableWarning:!0})!==void 0){ri=xn[St];break}if(Mt==="bolditalic"&&this.pdf.internal.getFont(xn[St],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ri=xn[St],Mt="bold";else if(this.pdf.internal.getFont(xn[St],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ri=xn[St],Mt="normal";break}}if(ri===""){for(var Rn=0;Rn<xn.length;Rn++)if(ht[xn[Rn]]){ri=ht[xn[Rn]];break}}ri=ri===""?"Times":ri,this.pdf.setFont(ri,Mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(de){this.ctx.globalCompositeOperation=de}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(de){this.ctx.globalAlpha=de}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(de){this.ctx.lineDashOffset=de,U.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(de){this.ctx.lineDash=de,U.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(de){this.ctx.ignoreClearRect=!!de}})};R.prototype.setLineDash=function(A){this.lineDash=A},R.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},R.prototype.fill=function(){ee.call(this,"fill",!1)},R.prototype.stroke=function(){ee.call(this,"stroke",!1)},R.prototype.beginPath=function(){this.path=[{type:"begin"}]},R.prototype.moveTo=function(A,E){if(isNaN(A)||isNaN(E))throw Wa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new v(A,E));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new v(A,E)},R.prototype.closePath=function(){var A=new v(0,0),E=0;for(E=this.path.length-1;E!==-1;E--)if(this.path[E].type==="begin"&&ka(this.path[E+1])==="object"&&typeof this.path[E+1].x=="number"){A=new v(this.path[E+1].x,this.path[E+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new v(A.x,A.y)},R.prototype.lineTo=function(A,E){if(isNaN(A)||isNaN(E))throw Wa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new v(A,E));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new v(W.x,W.y)},R.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ee.call(this,null,!0)},R.prototype.quadraticCurveTo=function(A,E,W,xe){if(isNaN(W)||isNaN(xe)||isNaN(A)||isNaN(E))throw Wa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ce=this.ctx.transform.applyToPoint(new v(W,xe)),Te=this.ctx.transform.applyToPoint(new v(A,E));this.path.push({type:"qct",x1:Te.x,y1:Te.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new v(Ce.x,Ce.y)},R.prototype.bezierCurveTo=function(A,E,W,xe,Ce,Te){if(isNaN(Ce)||isNaN(Te)||isNaN(A)||isNaN(E)||isNaN(W)||isNaN(xe))throw Wa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new v(Ce,Te)),Ae=this.ctx.transform.applyToPoint(new v(A,E)),De=this.ctx.transform.applyToPoint(new v(W,xe));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:De.x,y2:De.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new v(Le.x,Le.y)},R.prototype.arc=function(A,E,W,xe,Ce,Te){if(isNaN(A)||isNaN(E)||isNaN(W)||isNaN(xe)||isNaN(Ce))throw Wa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Te=!!Te,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new v(A,E));A=Le.x,E=Le.y;var Ae=this.ctx.transform.applyToPoint(new v(0,W)),De=this.ctx.transform.applyToPoint(new v(0,0));W=Math.sqrt(Math.pow(Ae.x-De.x,2)+Math.pow(Ae.y-De.y,2))}Math.abs(Ce-xe)>=2*Math.PI&&(xe=0,Ce=2*Math.PI),this.path.push({type:"arc",x:A,y:E,radius:W,startAngle:xe,endAngle:Ce,counterclockwise:Te})},R.prototype.arcTo=function(A,E,W,xe,Ce){throw new Error("arcTo not implemented.")},R.prototype.rect=function(A,E,W,xe){if(isNaN(A)||isNaN(E)||isNaN(W)||isNaN(xe))throw Wa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,E),this.lineTo(A+W,E),this.lineTo(A+W,E+xe),this.lineTo(A,E+xe),this.lineTo(A,E),this.lineTo(A+W,E),this.lineTo(A,E)},R.prototype.fillRect=function(A,E,W,xe){if(isNaN(A)||isNaN(E)||isNaN(W)||isNaN(xe))throw Wa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!T.call(this)){var Ce={};this.lineCap!=="butt"&&(Ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,E,W,xe),this.fill(),Ce.hasOwnProperty("lineCap")&&(this.lineCap=Ce.lineCap),Ce.hasOwnProperty("lineJoin")&&(this.lineJoin=Ce.lineJoin)}},R.prototype.strokeRect=function(A,E,W,xe){if(isNaN(A)||isNaN(E)||isNaN(W)||isNaN(xe))throw Wa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");V.call(this)||(this.beginPath(),this.rect(A,E,W,xe),this.stroke())},R.prototype.clearRect=function(A,E,W,xe){if(isNaN(A)||isNaN(E)||isNaN(W)||isNaN(xe))throw Wa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,E,W,xe))},R.prototype.save=function(A){A=typeof A!="boolean"||A;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(E),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var xe=new S(this.ctx);this.ctxStack.push(this.ctx),this.ctx=xe}},R.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(E),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},R.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var q=function(A){var E,W,xe,Ce;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))E=0,W=0,xe=0,Ce=0;else{var Te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(Te!==null)E=parseInt(Te[1]),W=parseInt(Te[2]),xe=parseInt(Te[3]),Ce=1;else if((Te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)E=parseInt(Te[1]),W=parseInt(Te[2]),xe=parseInt(Te[3]),Ce=parseFloat(Te[4]);else{if(Ce=1,typeof A=="string"&&A.charAt(0)!=="#"){var Le=new G2(A);A=Le.ok?Le.toHex():"#000000"}A.length===4?(E=A.substring(1,2),E+=E,W=A.substring(2,3),W+=W,xe=A.substring(3,4),xe+=xe):(E=A.substring(1,3),W=A.substring(3,5),xe=A.substring(5,7)),E=parseInt(E,16),W=parseInt(W,16),xe=parseInt(xe,16)}}return{r:E,g:W,b:xe,a:Ce,style:A}},T=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},V=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};R.prototype.fillText=function(A,E,W,xe){if(isNaN(E)||isNaN(W)||typeof A!="string")throw Wa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(xe=isNaN(xe)?void 0:xe,!T.call(this)){var Ce=pe(this.ctx.transform.rotation),Te=this.ctx.transform.scaleX;C.call(this,{text:A,x:E,y:W,scale:Te,angle:Ce,align:this.textAlign,maxWidth:xe})}},R.prototype.strokeText=function(A,E,W,xe){if(isNaN(E)||isNaN(W)||typeof A!="string")throw Wa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!V.call(this)){xe=isNaN(xe)?void 0:xe;var Ce=pe(this.ctx.transform.rotation),Te=this.ctx.transform.scaleX;C.call(this,{text:A,x:E,y:W,scale:Te,renderingMode:"stroke",angle:Ce,align:this.textAlign,maxWidth:xe})}},R.prototype.measureText=function(A){if(typeof A!="string")throw Wa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var E=this.pdf,W=this.pdf.internal.scaleFactor,xe=E.internal.getFontSize(),Ce=E.getStringUnitWidth(A)*xe/E.internal.scaleFactor;return new function(Te){var Le=(Te=Te||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Le}}),this}({width:Ce*=Math.round(96*W/72*1e4)/1e4})},R.prototype.scale=function(A,E){if(isNaN(A)||isNaN(E))throw Wa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new f(A,0,0,E,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},R.prototype.rotate=function(A){if(isNaN(A))throw Wa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var E=new f(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(E)},R.prototype.translate=function(A,E){if(isNaN(A)||isNaN(E))throw Wa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new f(1,0,0,1,A,E);this.ctx.transform=this.ctx.transform.multiply(W)},R.prototype.transform=function(A,E,W,xe,Ce,Te){if(isNaN(A)||isNaN(E)||isNaN(W)||isNaN(xe)||isNaN(Ce)||isNaN(Te))throw Wa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new f(A,E,W,xe,Ce,Te);this.ctx.transform=this.ctx.transform.multiply(Le)},R.prototype.setTransform=function(A,E,W,xe,Ce,Te){A=isNaN(A)?1:A,E=isNaN(E)?0:E,W=isNaN(W)?0:W,xe=isNaN(xe)?1:xe,Ce=isNaN(Ce)?0:Ce,Te=isNaN(Te)?0:Te,this.ctx.transform=new f(A,E,W,xe,Ce,Te)};var X=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};R.prototype.drawImage=function(A,E,W,xe,Ce,Te,Le,Ae,De){var Ye=this.pdf.getImageProperties(A),pt=1,mt=1,_t=1,de=1;xe!==void 0&&Ae!==void 0&&(_t=Ae/xe,de=De/Ce,pt=Ye.width/xe*Ae/xe,mt=Ye.height/Ce*De/Ce),Te===void 0&&(Te=E,Le=W,E=0,W=0),xe!==void 0&&Ae===void 0&&(Ae=xe,De=Ce),xe===void 0&&Ae===void 0&&(Ae=Ye.width,De=Ye.height);var vt=this.ctx.transform.decompose(),zt=pe(vt.rotate.shx),kt=new f,ot=(kt=(kt=(kt=kt.multiply(vt.translate)).multiply(vt.skew)).multiply(vt.scale)).applyToRectangle(new g(Te-E*_t,Le-W*de,xe*pt,Ce*mt));if(this.autoPaging){for(var sn,Ut=L.call(this,ot),xn=[],nn=0;nn<Ut.length;nn+=1)xn.indexOf(Ut[nn])===-1&&xn.push(Ut[nn]);se(xn);for(var Un=xn[0],Ct=xn[xn.length-1],Mt=Un;Mt<Ct+1;Mt++){this.pdf.setPage(Mt);var ri=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=Mt===1?this.posY+this.margin[0]:this.margin[0],St=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Zt=Mt===1?0:St+(Mt-2)*Rn;if(this.ctx.clip_path.length!==0){var _n=this.path;sn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ve(sn,this.posX+this.margin[3],-Zt+ht+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=_n}var Tn=JSON.parse(JSON.stringify(ot));Tn=ve([Tn],this.posX+this.margin[3],-Zt+ht+this.ctx.prevPageLastElemOffset)[0];var ln=(Mt>Un||Mt<Ct)&&X.call(this);ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ri,Rn,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",Tn.x,Tn.y,Tn.w,Tn.h,null,null,zt),ln&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(A,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,zt)};var L=function(A,E,W){var xe=[];E=E||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ce=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":xe.push(Math.floor((A.y+Ce)/W)+1);break;case"arc":xe.push(Math.floor((A.y+Ce-A.radius)/W)+1),xe.push(Math.floor((A.y+Ce+A.radius)/W)+1);break;case"qct":var Te=Ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);xe.push(Math.floor((Te.y+Ce)/W)+1),xe.push(Math.floor((Te.y+Te.h+Ce)/W)+1);break;case"bct":var Le=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);xe.push(Math.floor((Le.y+Ce)/W)+1),xe.push(Math.floor((Le.y+Le.h+Ce)/W)+1);break;case"rect":xe.push(Math.floor((A.y+Ce)/W)+1),xe.push(Math.floor((A.y+A.h+Ce)/W)+1)}for(var Ae=0;Ae<xe.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<xe[Ae];)D.call(this);return xe},D=function(){var A=this.fillStyle,E=this.strokeStyle,W=this.font,xe=this.lineCap,Ce=this.lineWidth,Te=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=E,this.font=W,this.lineCap=xe,this.lineWidth=Ce,this.lineJoin=Te},ve=function(A,E,W){for(var xe=0;xe<A.length;xe++)switch(A[xe].type){case"bct":A[xe].x2+=E,A[xe].y2+=W;case"qct":A[xe].x1+=E,A[xe].y1+=W;default:A[xe].x+=E,A[xe].y+=W}return A},se=function(A){return A.sort(function(E,W){return E-W})},ee=function(A,E){var W=this.fillStyle,xe=this.strokeStyle,Ce=this.lineCap,Te=this.lineWidth,Le=Math.abs(Te*this.ctx.transform.scaleX),Ae=this.lineJoin;if(this.autoPaging){for(var De,Ye,pt=JSON.parse(JSON.stringify(this.path)),mt=JSON.parse(JSON.stringify(this.path)),_t=[],de=0;de<mt.length;de++)if(mt[de].x!==void 0)for(var vt=L.call(this,mt[de]),zt=0;zt<vt.length;zt+=1)_t.indexOf(vt[zt])===-1&&_t.push(vt[zt]);for(var kt=0;kt<_t.length;kt++)for(;this.pdf.internal.getNumberOfPages()<_t[kt];)D.call(this);se(_t);for(var ot=_t[0],sn=_t[_t.length-1],Ut=ot;Ut<sn+1;Ut++){this.pdf.setPage(Ut),this.fillStyle=W,this.strokeStyle=xe,this.lineCap=Ce,this.lineWidth=Le,this.lineJoin=Ae;var xn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nn=Ut===1?this.posY+this.margin[0]:this.margin[0],Un=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mt=Ut===1?0:Un+(Ut-2)*Ct;if(this.ctx.clip_path.length!==0){var ri=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ve(De,this.posX+this.margin[3],-Mt+nn+this.ctx.prevPageLastElemOffset),J.call(this,A,!0),this.path=ri}if(Ye=JSON.parse(JSON.stringify(pt)),this.path=ve(Ye,this.posX+this.margin[3],-Mt+nn+this.ctx.prevPageLastElemOffset),E===!1||Ut===0){var ht=(Ut>ot||Ut<sn)&&X.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xn,Ct,null).clip().discardPath()),J.call(this,A,E),ht&&this.pdf.restoreGraphicsState()}this.lineWidth=Te}this.path=pt}else this.lineWidth=Le,J.call(this,A,E),this.lineWidth=Te},J=function(A,E){if((A!=="stroke"||E||!V.call(this))&&(A==="stroke"||E||!T.call(this))){for(var W,xe,Ce=[],Te=this.path,Le=0;Le<Te.length;Le++){var Ae=Te[Le];switch(Ae.type){case"begin":Ce.push({begin:!0});break;case"close":Ce.push({close:!0});break;case"mt":Ce.push({start:Ae,deltas:[],abs:[]});break;case"lt":var De=Ce.length;if(Te[Le-1]&&!isNaN(Te[Le-1].x)&&(W=[Ae.x-Te[Le-1].x,Ae.y-Te[Le-1].y],De>0)){for(;De>=0;De--)if(Ce[De-1].close!==!0&&Ce[De-1].begin!==!0){Ce[De-1].deltas.push(W),Ce[De-1].abs.push(Ae);break}}break;case"bct":W=[Ae.x1-Te[Le-1].x,Ae.y1-Te[Le-1].y,Ae.x2-Te[Le-1].x,Ae.y2-Te[Le-1].y,Ae.x-Te[Le-1].x,Ae.y-Te[Le-1].y],Ce[Ce.length-1].deltas.push(W);break;case"qct":var Ye=Te[Le-1].x+2/3*(Ae.x1-Te[Le-1].x),pt=Te[Le-1].y+2/3*(Ae.y1-Te[Le-1].y),mt=Ae.x+2/3*(Ae.x1-Ae.x),_t=Ae.y+2/3*(Ae.y1-Ae.y),de=Ae.x,vt=Ae.y;W=[Ye-Te[Le-1].x,pt-Te[Le-1].y,mt-Te[Le-1].x,_t-Te[Le-1].y,de-Te[Le-1].x,vt-Te[Le-1].y],Ce[Ce.length-1].deltas.push(W);break;case"arc":Ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ce[Ce.length-1].abs)&&Ce[Ce.length-1].abs.push(Ae)}}xe=E?null:A==="stroke"?"stroke":"fill";for(var zt=!1,kt=0;kt<Ce.length;kt++)if(Ce[kt].arc)for(var ot=Ce[kt].abs,sn=0;sn<ot.length;sn++){var Ut=ot[sn];Ut.type==="arc"?F.call(this,Ut.x,Ut.y,Ut.radius,Ut.startAngle,Ut.endAngle,Ut.counterclockwise,void 0,E,!zt):re.call(this,Ut.x,Ut.y),zt=!0}else if(Ce[kt].close===!0)this.pdf.internal.out("h"),zt=!1;else if(Ce[kt].begin!==!0){var xn=Ce[kt].start.x,nn=Ce[kt].start.y;ie.call(this,Ce[kt].deltas,xn,nn),zt=!0}xe&&O.call(this,xe),E&&he.call(this)}},$=function(A){var E=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=E*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-W;case"top":return A+E-W;case"hanging":return A+E-2*W;case"middle":return A+E/2-W;default:return A}},I=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};R.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(E,W){this.colorStops.push([E,W])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},R.prototype.createPattern=function(){return this.createLinearGradient()},R.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(A,E,W,xe,Ce,Te,Le,Ae,De){for(var Ye=te.call(this,W,xe,Ce,Te),pt=0;pt<Ye.length;pt++){var mt=Ye[pt];pt===0&&(De?N.call(this,mt.x1+A,mt.y1+E):re.call(this,mt.x1+A,mt.y1+E)),fe.call(this,A,E,mt.x2,mt.y2,mt.x3,mt.y3,mt.x4,mt.y4)}Ae?he.call(this):O.call(this,Le)},O=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},he=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(A,E){this.pdf.internal.out(a(A)+" "+s(E)+" m")},C=function(A){var E;switch(A.align){case"right":case"end":E="right";break;case"center":E="center";break;default:E="left"}var W,xe,Ce,Te=this.pdf.getTextDimensions(A.text),Le=$.call(this,A.y),Ae=I.call(this,Le)-Te.h,De=this.ctx.transform.applyToPoint(new v(A.x,Le));if(this.autoPaging){var Ye=this.ctx.transform.decompose(),pt=new f;pt=(pt=(pt=pt.multiply(Ye.translate)).multiply(Ye.skew)).multiply(Ye.scale);for(var mt=this.ctx.transform.applyToRectangle(new g(A.x,Le,Te.w,Te.h)),_t=pt.applyToRectangle(new g(A.x,Ae,Te.w,Te.h)),de=L.call(this,_t),vt=[],zt=0;zt<de.length;zt+=1)vt.indexOf(de[zt])===-1&&vt.push(de[zt]);se(vt);for(var kt=vt[0],ot=vt[vt.length-1],sn=kt;sn<ot+1;sn++){this.pdf.setPage(sn);var Ut=sn===1?this.posY+this.margin[0]:this.margin[0],xn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nn=this.pdf.internal.pageSize.height-this.margin[2],Un=nn-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],Mt=Ct-this.margin[3],ri=sn===1?0:xn+(sn-2)*Un;if(this.ctx.clip_path.length!==0){var ht=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ve(W,this.posX+this.margin[3],-1*ri+Ut),J.call(this,"fill",!0),this.path=ht}var St=ve([JSON.parse(JSON.stringify(_t))],this.posX+this.margin[3],-ri+Ut+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*A.scale),Ce=this.lineWidth,this.lineWidth=Ce*A.scale);var Rn=this.autoPaging!=="text";if(Rn||St.y+St.h<=nn){if(Rn||St.y>=Ut&&St.x<=Ct){var Zt=Rn?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||Ct-St.x)[0],_n=ve([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-ri+Ut+this.ctx.prevPageLastElemOffset)[0],Tn=Rn&&(sn>kt||sn<ot)&&X.call(this);Tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,Un,null).clip().discardPath()),this.pdf.text(Zt,_n.x,_n.y,{angle:A.angle,align:E,renderingMode:A.renderingMode}),Tn&&this.pdf.restoreGraphicsState()}}else St.y<nn&&(this.ctx.prevPageLastElemOffset+=nn-St.y);A.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Ce)}}else A.scale>=.01&&(xe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(xe*A.scale),Ce=this.lineWidth,this.lineWidth=Ce*A.scale),this.pdf.text(A.text,De.x+this.posX,De.y+this.posY,{angle:A.angle,align:E,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(xe),this.lineWidth=Ce)},re=function(A,E,W,xe){W=W||0,xe=xe||0,this.pdf.internal.out(a(A+W)+" "+s(E+xe)+" l")},ie=function(A,E,W){return this.pdf.lines(A,E,W,null,null)},fe=function(A,E,W,xe,Ce,Te,Le,Ae){this.pdf.internal.out([n(u(W+A)),n(d(xe+E)),n(u(Ce+A)),n(d(Te+E)),n(u(Le+A)),n(d(Ae+E)),"c"].join(" "))},te=function(A,E,W,xe){for(var Ce=2*Math.PI,Te=Math.PI/2;E>W;)E-=Ce;var Le=Math.abs(W-E);Le<Ce&&xe&&(Le=Ce-Le);for(var Ae=[],De=xe?-1:1,Ye=E;Le>1e-5;){var pt=Ye+De*Math.min(Le,Te);Ae.push(ne.call(this,A,Ye,pt)),Le-=Math.abs(pt-Ye),Ye=pt}return Ae},ne=function(A,E,W){var xe=(W-E)/2,Ce=A*Math.cos(xe),Te=A*Math.sin(xe),Le=Ce,Ae=-Te,De=Le*Le+Ae*Ae,Ye=De+Le*Ce+Ae*Te,pt=4/3*(Math.sqrt(2*De*Ye)-Ye)/(Le*Te-Ae*Ce),mt=Le-pt*Ae,_t=Ae+pt*Le,de=mt,vt=-_t,zt=xe+E,kt=Math.cos(zt),ot=Math.sin(zt);return{x1:A*Math.cos(E),y1:A*Math.sin(E),x2:mt*kt-_t*ot,y2:mt*ot+_t*kt,x3:de*kt-vt*ot,y3:de*ot+vt*kt,x4:A*Math.cos(W),y4:A*Math.sin(W)}},pe=function(A){return 180*A/Math.PI},Ne=function(A,E,W,xe,Ce,Te){var Le=A+.5*(W-A),Ae=E+.5*(xe-E),De=Ce+.5*(W-Ce),Ye=Te+.5*(xe-Te),pt=Math.min(A,Ce,Le,De),mt=Math.max(A,Ce,Le,De),_t=Math.min(E,Te,Ae,Ye),de=Math.max(E,Te,Ae,Ye);return new g(pt,_t,mt-pt,de-_t)},me=function(A,E,W,xe,Ce,Te,Le,Ae){var De,Ye,pt,mt,_t,de,vt,zt,kt,ot,sn,Ut,xn,nn,Un=W-A,Ct=xe-E,Mt=Ce-W,ri=Te-xe,ht=Le-Ce,St=Ae-Te;for(Ye=0;Ye<41;Ye++)kt=(vt=(pt=A+(De=Ye/40)*Un)+De*((_t=W+De*Mt)-pt))+De*(_t+De*(Ce+De*ht-_t)-vt),ot=(zt=(mt=E+De*Ct)+De*((de=xe+De*ri)-mt))+De*(de+De*(Te+De*St-de)-zt),Ye==0?(sn=kt,Ut=ot,xn=kt,nn=ot):(sn=Math.min(sn,kt),Ut=Math.min(Ut,ot),xn=Math.max(xn,kt),nn=Math.max(nn,ot));return new g(Math.round(sn),Math.round(Ut),Math.round(xn-sn),Math.round(nn-Ut))},U=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,E,W=(A=this.ctx.lineDash,E=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:E}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(wn.API),(function(o){var n=function(v){var g,f,b,S,R,q,T,V,X,L;for(f=[],b=0,S=(v+=g="\0\0\0\0".slice(v.length%4||4)).length;S>b;b+=4)(R=(v.charCodeAt(b)<<24)+(v.charCodeAt(b+1)<<16)+(v.charCodeAt(b+2)<<8)+v.charCodeAt(b+3))!==0?(q=(R=((R=((R=((R=(R-(L=R%85))/85)-(X=R%85))/85)-(V=R%85))/85)-(T=R%85))/85)%85,f.push(q+33,T+33,V+33,X+33,L+33)):f.push(122);return(function(D,ve){for(var se=ve;se>0;se--)D.pop()})(f,g.length),String.fromCharCode.apply(String,f)+"~>"},a=function(v){var g,f,b,S,R,q=String,T="length",V=255,X="charCodeAt",L="slice",D="replace";for(v[L](-2),v=v[L](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),b=[],S=0,R=(v+=g="uuuuu"[L](v[T]%5||5))[T];R>S;S+=5)f=52200625*(v[X](S)-33)+614125*(v[X](S+1)-33)+7225*(v[X](S+2)-33)+85*(v[X](S+3)-33)+(v[X](S+4)-33),b.push(V&f>>24,V&f>>16,V&f>>8,V&f);return(function(ve,se){for(var ee=se;ee>0;ee--)ve.pop()})(b,g[T]),q.fromCharCode.apply(q,b)},s=function(v){return v.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">"},u=function(v){var g=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((v=v.replace(/\s/g,"")).indexOf(">")!==-1&&(v=v.substr(0,v.indexOf(">"))),v.length%2&&(v+="0"),g.test(v)===!1)return"";for(var f="",b=0;b<v.length;b+=2)f+=String.fromCharCode("0x"+(v[b]+v[b+1]));return f},d=function(v){for(var g=new Uint8Array(v.length),f=v.length;f--;)g[f]=v.charCodeAt(f);return(g=s0(g)).reduce(function(b,S){return b+String.fromCharCode(S)},"")};o.processDataByFilters=function(v,g){var f=0,b=v||"",S=[];for(typeof(g=g||[])=="string"&&(g=[g]),f=0;f<g.length;f+=1)switch(g[f]){case"ASCII85Decode":case"/ASCII85Decode":b=a(b),S.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":b=n(b),S.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":b=u(b),S.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":b=s(b),S.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":b=d(b),S.push("/FlateDecode");break;default:throw new Error('The filter: "'+g[f]+'" is not implemented')}return{data:b,reverseChain:S.reverse().join(" ")}}})(wn.API),(function(o){o.loadFile=function(n,a,s){return(function(u,d,v){d=d!==!1,v=typeof v=="function"?v:function(){};var g=void 0;try{g=(function(f,b,S){var R=new XMLHttpRequest,q=0,T=function(V){var X=V.length,L=[],D=String.fromCharCode;for(q=0;q<X;q+=1)L.push(D(255&V.charCodeAt(q)));return L.join("")};if(R.open("GET",f,!b),R.overrideMimeType("text/plain; charset=x-user-defined"),b===!1&&(R.onload=function(){R.status===200?S(T(this.responseText)):S(void 0)}),R.send(null),b&&R.status===200)return T(R.responseText)})(u,d,v)}catch{}return g})(n,a,s)},o.loadImageFile=o.loadFile})(wn.API),(function(o){function n(){return(Yn.html2canvas?Promise.resolve(Yn.html2canvas):Rp(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load html2canvas: "+g))}).then(function(g){return g.default?g.default:g})}function a(){return(Yn.DOMPurify?Promise.resolve(Yn.DOMPurify):Rp(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(g){return Promise.reject(new Error("Could not load dompurify: "+g))}).then(function(g){return g.default?g.default:g})}var s=function(g){var f=ka(g);return f==="undefined"?"undefined":f==="string"||g instanceof String?"string":f==="number"||g instanceof Number?"number":f==="function"||g instanceof Function?"function":g&&g.constructor===Array?"array":g&&g.nodeType===1?"element":f==="object"?"object":"unknown"},u=function(g,f){var b=document.createElement(g);for(var S in f.className&&(b.className=f.className),f.innerHTML&&f.dompurify&&(b.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)b.style[S]=f.style[S];return b},d=function g(f,b){for(var S=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),R=f.firstChild;R;R=R.nextSibling)b!==!0&&R.nodeType===1&&R.nodeName==="SCRIPT"||S.appendChild(g(R,b));return f.nodeType===1&&(f.nodeName==="CANVAS"?(S.width=f.width,S.height=f.height,S.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(S.value=f.value),S.addEventListener("load",function(){S.scrollTop=f.scrollTop,S.scrollLeft=f.scrollLeft},!0)),S},v=function g(f){var b=Object.assign(g.convert(Promise.resolve()),JSON.parse(JSON.stringify(g.template))),S=g.convert(Promise.resolve(),b);return(S=S.setProgress(1,g,1,[g])).set(f)};(v.prototype=Object.create(Promise.prototype)).constructor=v,v.convert=function(g,f){return g.__proto__=f||v.prototype,g},v.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},v.prototype.from=function(g,f){return this.then(function(){switch(f=f||(function(b){switch(s(b)){case"string":return"string";case"element":return b.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(g),f){case"string":return this.then(a).then(function(b){return this.set({src:u("div",{innerHTML:g,dompurify:b})})});case"element":return this.set({src:g});case"canvas":return this.set({canvas:g});case"img":return this.set({img:g});default:return this.error("Unknown source type.")}})},v.prototype.to=function(g){switch(g){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},v.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var g={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=d(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(g.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=u("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=u("div",{className:"html2pdf__container",style:g}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(u("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},v.prototype.toCanvas=function(){var g=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(g).then(n).then(function(f){var b=Object.assign({},this.opt.html2canvas);return delete b.onrendered,f(this.prop.container,b)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},v.prototype.toContext2d=function(){var g=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(g).then(n).then(function(f){var b=this.opt.jsPDF,S=this.opt.fontFaces,R=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,q=Object.assign({async:!0,allowTaint:!0,scale:R,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete q.onrendered,b.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,b.context2d.posX=this.opt.x,b.context2d.posY=this.opt.y,b.context2d.margin=this.opt.margin,b.context2d.fontFaces=S,S)for(var T=0;T<S.length;++T){var V=S[T],X=V.src.find(function(L){return L.format==="truetype"});X&&b.addFont(X.url,V.ref.name,V.ref.style)}return q.windowHeight=q.windowHeight||0,q.windowHeight=q.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):q.windowHeight,b.context2d.save(!0),f(this.prop.container,q)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},v.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var g=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=g})},v.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},v.prototype.output=function(g,f,b){return(b=b||"pdf").toLowerCase()==="img"||b.toLowerCase()==="image"?this.outputImg(g,f):this.outputPdf(g,f)},v.prototype.outputPdf=function(g,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(g,f)})},v.prototype.outputImg=function(g){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(g){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+g+'" is not supported.'}})},v.prototype.save=function(g){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(g?{filename:g}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},v.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},v.prototype.set=function(g){if(s(g)!=="object")return this;var f=Object.keys(g||{}).map(function(b){if(b in v.template.prop)return function(){this.prop[b]=g[b]};switch(b){case"margin":return this.setMargin.bind(this,g.margin);case"jsPDF":return function(){return this.opt.jsPDF=g.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,g.pageSize);default:return function(){this.opt[b]=g[b]}}},this);return this.then(function(){return this.thenList(f)})},v.prototype.get=function(g,f){return this.then(function(){var b=g in v.template.prop?this.prop[g]:this.opt[g];return f?f(b):b})},v.prototype.setMargin=function(g){return this.then(function(){switch(s(g)){case"number":g=[g,g,g,g];case"array":if(g.length===2&&(g=[g[0],g[1],g[0],g[1]]),g.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=g}).then(this.setPageSize)},v.prototype.setPageSize=function(g){function f(b,S){return Math.floor(b*S/72*96)}return this.then(function(){(g=g||wn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(g.inner={width:g.width-this.opt.margin[1]-this.opt.margin[3],height:g.height-this.opt.margin[0]-this.opt.margin[2]},g.inner.px={width:f(g.inner.width,g.k),height:f(g.inner.height,g.k)},g.inner.ratio=g.inner.height/g.inner.width),this.prop.pageSize=g})},v.prototype.setProgress=function(g,f,b,S){return g!=null&&(this.progress.val=g),f!=null&&(this.progress.state=f),b!=null&&(this.progress.n=b),S!=null&&(this.progress.stack=S),this.progress.ratio=this.progress.val/this.progress.state,this},v.prototype.updateProgress=function(g,f,b,S){return this.setProgress(g?this.progress.val+g:null,f||null,b?this.progress.n+b:null,S?this.progress.stack.concat(S):null)},v.prototype.then=function(g,f){var b=this;return this.thenCore(g,f,function(S,R){return b.updateProgress(null,null,1,[S]),Promise.prototype.then.call(this,function(q){return b.updateProgress(null,S),q}).then(S,R).then(function(q){return b.updateProgress(1),q})})},v.prototype.thenCore=function(g,f,b){b=b||Promise.prototype.then;var S=this;g&&(g=g.bind(S)),f&&(f=f.bind(S));var R=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?S:v.convert(Object.assign({},S),Promise.prototype),q=b.call(R,g,f);return v.convert(q,S.__proto__)},v.prototype.thenExternal=function(g,f){return Promise.prototype.then.call(this,g,f)},v.prototype.thenList=function(g){var f=this;return g.forEach(function(b){f=f.thenCore(b)}),f},v.prototype.catch=function(g){g&&(g=g.bind(this));var f=Promise.prototype.catch.call(this,g);return v.convert(f,this)},v.prototype.catchExternal=function(g){return Promise.prototype.catch.call(this,g)},v.prototype.error=function(g){return this.then(function(){throw new Error(g)})},v.prototype.using=v.prototype.set,v.prototype.saveAs=v.prototype.save,v.prototype.export=v.prototype.output,v.prototype.run=v.prototype.then,wn.getPageSize=function(g,f,b){if(ka(g)==="object"){var S=g;g=S.orientation,f=S.unit||f,b=S.format||b}f=f||"mm",b=b||"a4",g=(""+(g||"P")).toLowerCase();var R,q=(""+b).toLowerCase(),T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":R=1;break;case"mm":R=72/25.4;break;case"cm":R=72/2.54;break;case"in":R=72;break;case"px":R=.75;break;case"pc":case"em":R=12;break;case"ex":R=6;break;default:throw"Invalid unit: "+f}var V,X=0,L=0;if(T.hasOwnProperty(q))X=T[q][1]/R,L=T[q][0]/R;else try{X=b[1],L=b[0]}catch{throw new Error("Invalid format: "+b)}if(g==="p"||g==="portrait")g="p",L>X&&(V=L,L=X,X=V);else{if(g!=="l"&&g!=="landscape")throw"Invalid orientation: "+g;g="l",X>L&&(V=L,L=X,X=V)}return{width:L,height:X,unit:f,k:R,orientation:g}},o.html=function(g,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Kp):null;var b=new v(f);return f.worker?b:b.from(g).doCallback()}})(wn.API),wn.API.addJS=function(o){return X1=o,this.internal.events.subscribe("postPutResources",function(){jh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(jh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),G1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+X1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){jh!==void 0&&G1!==void 0&&this.internal.out("/Names <</JavaScript "+jh+" 0 R>>")}),this},(function(o){var n;o.events.push(["postPutResources",function(){var a=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var u=a.outline.render().split(/\r\n/),d=0;d<u.length;d++){var v=u[d],g=s.exec(v);if(g!=null){var f=g[1];a.internal.newObjectDeferredBegin(f,!1)}a.internal.write(v)}if(this.outline.createNamedDestinations){var b=this.internal.pages.length,S=[];for(d=0;d<b;d++){var R=a.internal.newObject();S.push(R);var q=a.internal.getPageInfo(d+1);a.internal.write("<< /D["+q.objId+" 0 R /XYZ null null null]>> endobj")}var T=a.internal.newObject();for(a.internal.write("<< /Names [ "),d=0;d<S.length;d++)a.internal.write("(page_"+(d+1)+")"+S[d]+" 0 R");a.internal.write(" ] >>","endobj"),n=a.internal.newObject(),a.internal.write("<< /Dests "+T+" 0 R"),a.internal.write(">>","endobj")}}]),o.events.push(["putCatalog",function(){var a=this;a.outline.root.children.length>0&&(a.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&a.internal.write("/Names "+n+" 0 R"))}]),o.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(s,u,d){var v={title:u,options:d,children:[]};return s==null&&(s=this.root),s.children.push(v),v},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(s){s.id=a.internal.newObjectDeferred();for(var u=0;u<s.children.length;u++)this.genIds_r(s.children[u])},a.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},a.outline.renderItems=function(s){for(var u=this.ctx.pdf.internal.getVerticalCoordinateString,d=0;d<s.children.length;d++){var v=s.children[d];this.objStart(v),this.line("/Title "+this.makeString(v.title)),this.line("/Parent "+this.makeRef(s)),d>0&&this.line("/Prev "+this.makeRef(s.children[d-1])),d<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[d+1])),v.children.length>0&&(this.line("/First "+this.makeRef(v.children[0])),this.line("/Last "+this.makeRef(v.children[v.children.length-1])));var g=this.count=this.count_r({count:0},v);if(g>0&&this.line("/Count "+g),v.options&&v.options.pageNumber){var f=a.internal.getPageInfo(v.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+u(0)+" 0]")}this.objEnd()}for(var b=0;b<s.children.length;b++)this.renderItems(s.children[b])},a.outline.line=function(s){this.ctx.val+=s+`\r
`},a.outline.makeRef=function(s){return s.id+" 0 R"},a.outline.makeString=function(s){return"("+a.internal.pdfEscape(s)+")"},a.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(s,u){for(var d=0;d<u.children.length;d++)s.count++,this.count_r(s,u.children[d]);return s.count}}])})(wn.API),(function(o){var n=[192,193,194,195,196,197,198,199];o.processJPEG=function(a,s,u,d,v,g){var f,b=this.decode.DCT_DECODE,S=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=v||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,f=(function(R){for(var q,T=256*R.charCodeAt(4)+R.charCodeAt(5),V=R.length,X={width:0,height:0,numcomponents:1},L=4;L<V;L+=2){if(L+=T,n.indexOf(R.charCodeAt(L+1))!==-1){q=256*R.charCodeAt(L+5)+R.charCodeAt(L+6),X={width:256*R.charCodeAt(L+7)+R.charCodeAt(L+8),height:q,numcomponents:R.charCodeAt(L+9)};break}T=256*R.charCodeAt(L+2)+R.charCodeAt(L+3)}return X})(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a),f.numcomponents){case 1:g=this.color_spaces.DEVICE_GRAY;break;case 4:g=this.color_spaces.DEVICE_CMYK;break;case 3:g=this.color_spaces.DEVICE_RGB}S={data:a,width:f.width,height:f.height,colorSpace:g,bitsPerComponent:8,filter:b,index:s,alias:u}}return S}})(wn.API),wn.API.processPNG=function(o,n,a,s){if(this.__addimage__.isArrayBuffer(o)&&(o=new Uint8Array(o)),this.__addimage__.isArrayBufferView(o)){var u,d=Vm(o,{checkCrc:!0}),v=d.width,g=d.height,f=d.channels,b=d.palette,S=d.depth;u=b&&f===1?(function(F){for(var O=F.width,he=F.height,N=F.data,C=F.palette,re=F.depth,ie=!1,fe=[],te=[],ne=void 0,pe=!1,Ne=0,me=0;me<C.length;me++){var U=Qg(C[me],4),A=U[0],E=U[1],W=U[2],xe=U[3];fe.push(A,E,W),xe!=null&&(xe===0?(Ne++,te.length<1&&te.push(me)):xe<255&&(pe=!0))}if(pe||Ne>1){ie=!0,te=void 0;var Ce=O*he;ne=new Uint8Array(Ce);for(var Te=new DataView(N.buffer),Le=0;Le<Ce;Le++){var Ae=Qp(Te,Le,re),De=Qg(C[Ae],4)[3];ne[Le]=De}}else Ne===0&&(te=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ie?8:void 0,colorBytes:N,alphaBytes:ne,needSMask:ie,palette:fe,mask:te}})(d):f===2||f===4?(function(F){for(var O=F.data,he=F.width,N=F.height,C=F.channels,re=F.depth,ie=C===2?"DeviceGray":"DeviceRGB",fe=C-1,te=he*N,ne=fe,pe=te*ne,Ne=1*te,me=Math.ceil(pe*re/8),U=Math.ceil(Ne*re/8),A=new Uint8Array(me),E=new Uint8Array(U),W=new DataView(O.buffer),xe=new DataView(A.buffer),Ce=new DataView(E.buffer),Te=!1,Le=0;Le<te;Le++){for(var Ae=Le*C,De=0;De<ne;De++)a2(xe,Qp(W,Ae+De,re),Le*ne+De,re);var Ye=Qp(W,Ae+ne,re);Ye<(1<<re)-1&&(Te=!0),a2(Ce,Ye,1*Le,re)}return{colorSpace:ie,colorsPerPixel:fe,sMaskBitsPerComponent:Te?re:void 0,colorBytes:A,alphaBytes:E,needSMask:Te}})(d):(function(F){var O=F.data,he=F.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:he,colorsPerPixel:he==="DeviceGray"?1:3,colorBytes:O instanceof Uint16Array?(function(N){for(var C=N.length,re=new Uint8Array(2*C),ie=new DataView(re.buffer,re.byteOffset,re.byteLength),fe=0;fe<C;fe++)ie.setUint16(2*fe,N[fe],!1);return re})(O):O,needSMask:!1}})(d);var R,q,T,V=u,X=V.colorSpace,L=V.colorsPerPixel,D=V.sMaskBitsPerComponent,ve=V.colorBytes,se=V.alphaBytes,ee=V.needSMask,J=V.palette,$=V.mask,I=null;return s!==wn.API.image_compression.NONE&&typeof s0=="function"?(I=(function(F){var O;switch(F){case wn.API.image_compression.FAST:O=11;break;case wn.API.image_compression.MEDIUM:O=13;break;case wn.API.image_compression.SLOW:O=14;break;default:O=12}return O})(s),R=this.decode.FLATE_DECODE,q="/Predictor ".concat(I," /Colors ").concat(L," /BitsPerComponent ").concat(S," /Columns ").concat(v),o=Q1(ve,Math.ceil(v*L*S/8),L,S,s),ee&&(T=Q1(se,Math.ceil(v*D/8),1,D,s))):(R=void 0,q=void 0,o=ve,ee&&(T=se)),(this.__addimage__.isArrayBuffer(o)||this.__addimage__.isArrayBufferView(o))&&(o=this.__addimage__.arrayBufferToBinaryString(o)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:a,data:o,index:n,filter:R,decodeParameters:q,transparency:$,palette:J,sMask:T,predictor:I,width:v,height:g,bitsPerComponent:S,sMaskBitsPerComponent:D,colorSpace:X}}},(function(o){o.processGIF89A=function(n,a,s,u){var d=new fb(n),v=d.width,g=d.height,f=[];d.decodeAndBlitFrameRGBA(0,f);var b={data:f,width:v,height:g},S=new e0(100).encode(b,100);return o.processJPEG.call(this,S,a,s,u)},o.processGIF87A=o.processGIF89A})(wn.API),cc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var o=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(o);for(var n=0;n<o;n++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:u,green:s,blue:a,quad:d}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cc.prototype.parseBGR=function(){this.pos=this.offset;try{var o="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[o]()}catch(a){Wa.log("bit decode error:"+a)}},cc.prototype.bit1=function(){var o,n=Math.ceil(this.width/8),a=n%4;for(o=this.height-1;o>=0;o--){for(var s=this.bottom_up?o:this.height-1-o,u=0;u<n;u++)for(var d=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+8*u*4,g=0;g<8&&8*u+g<this.width;g++){var f=this.palette[d>>7-g&1];this.data[v+4*g]=f.blue,this.data[v+4*g+1]=f.green,this.data[v+4*g+2]=f.red,this.data[v+4*g+3]=255}a!==0&&(this.pos+=4-a)}},cc.prototype.bit4=function(){for(var o=Math.ceil(this.width/2),n=o%4,a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,u=0;u<o;u++){var d=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+2*u*4,g=d>>4,f=15&d,b=this.palette[g];if(this.data[v]=b.blue,this.data[v+1]=b.green,this.data[v+2]=b.red,this.data[v+3]=255,2*u+1>=this.width)break;b=this.palette[f],this.data[v+4]=b.blue,this.data[v+4+1]=b.green,this.data[v+4+2]=b.red,this.data[v+4+3]=255}n!==0&&(this.pos+=4-n)}},cc.prototype.bit8=function(){for(var o=this.width%4,n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var u=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+4*s;if(u<this.palette.length){var v=this.palette[u];this.data[d]=v.red,this.data[d+1]=v.green,this.data[d+2]=v.blue,this.data[d+3]=255}else this.data[d]=255,this.data[d+1]=255,this.data[d+2]=255,this.data[d+3]=255}o!==0&&(this.pos+=4-o)}},cc.prototype.bit15=function(){for(var o=this.width%3,n=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,u=0;u<this.width;u++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var v=(d&n)/n*255|0,g=(d>>5&n)/n*255|0,f=(d>>10&n)/n*255|0,b=d>>15?255:0,S=s*this.width*4+4*u;this.data[S]=f,this.data[S+1]=g,this.data[S+2]=v,this.data[S+3]=b}this.pos+=o}},cc.prototype.bit16=function(){for(var o=this.width%3,n=parseInt("11111",2),a=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var u=this.bottom_up?s:this.height-1-s,d=0;d<this.width;d++){var v=this.datav.getUint16(this.pos,!0);this.pos+=2;var g=(v&n)/n*255|0,f=(v>>5&a)/a*255|0,b=(v>>11)/n*255|0,S=u*this.width*4+4*d;this.data[S]=b,this.data[S+1]=f,this.data[S+2]=g,this.data[S+3]=255}this.pos+=o}},cc.prototype.bit24=function(){for(var o=this.height-1;o>=0;o--){for(var n=this.bottom_up?o:this.height-1-o,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),v=n*this.width*4+4*a;this.data[v]=d,this.data[v+1]=u,this.data[v+2]=s,this.data[v+3]=255}this.pos+=this.width%4}},cc.prototype.bit32=function(){for(var o=this.height-1;o>=0;o--)for(var n=this.bottom_up?o:this.height-1-o,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),v=this.datav.getUint8(this.pos++,!0),g=n*this.width*4+4*a;this.data[g]=d,this.data[g+1]=u,this.data[g+2]=s,this.data[g+3]=v}},cc.prototype.getData=function(){return this.data},(function(o){o.processBMP=function(n,a,s,u){var d=new cc(n,!1),v=d.width,g=d.height,f={data:d.getData(),width:v,height:g},b=new e0(100).encode(f,100);return o.processJPEG.call(this,b,a,s,u)}})(wn.API),r2.prototype.getData=function(){return this.data},(function(o){o.processWEBP=function(n,a,s,u){var d=new r2(n),v=d.width,g=d.height,f={data:d.getData(),width:v,height:g},b=new e0(100).encode(f,100);return o.processJPEG.call(this,b,a,s,u)}})(wn.API),wn.API.processRGBA=function(o,n,a){for(var s=o.data,u=s.length,d=new Uint8Array(u/4*3),v=new Uint8Array(u/4),g=0,f=0,b=0;b<u;b+=4){var S=s[b],R=s[b+1],q=s[b+2],T=s[b+3];d[g++]=S,d[g++]=R,d[g++]=q,v[f++]=T}var V=this.__addimage__.arrayBufferToBinaryString(d);return{alpha:this.__addimage__.arrayBufferToBinaryString(v),data:V,index:n,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:o.width,height:o.height}},wn.API.setLanguage=function(o){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[o]!==void 0&&(this.internal.languageSettings.languageCode=o,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cd=wn.API,Th=Cd.getCharWidthsArray=function(o,n){var a,s,u=(n=n||{}).font||this.internal.getFont(),d=n.fontSize||this.internal.getFontSize(),v=n.charSpace||this.internal.getCharSpace(),g=n.widths?n.widths:u.metadata.Unicode.widths,f=g.fof?g.fof:1,b=n.kerning?n.kerning:u.metadata.Unicode.kerning,S=b.fof?b.fof:1,R=n.doKerning!==!1,q=0,T=o.length,V=0,X=g[0]||f,L=[];for(a=0;a<T;a++)s=o.charCodeAt(a),typeof u.metadata.widthOfString=="function"?L.push((u.metadata.widthOfGlyph(u.metadata.characterToGlyph(s))+v*(1e3/d)||0)/1e3):(q=R&&ka(b[s])==="object"&&!isNaN(parseInt(b[s][V],10))?b[s][V]/S:0,L.push((g[s]||X)/f+q)),V=s;return L},Z1=Cd.getStringUnitWidth=function(o,n){var a=(n=n||{}).fontSize||this.internal.getFontSize(),s=n.font||this.internal.getFont(),u=n.charSpace||this.internal.getCharSpace();return Cd.processArabic&&(o=Cd.processArabic(o)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(o,a,u)/a:Th.apply(this,arguments).reduce(function(d,v){return d+v},0)},K1=function(o,n,a,s){for(var u=[],d=0,v=o.length,g=0;d!==v&&g+n[d]<a;)g+=n[d],d++;u.push(o.slice(0,d));var f=d;for(g=0;d!==v;)g+n[d]>s&&(u.push(o.slice(f,d)),g=0,f=d),g+=n[d],d++;return f!==d&&u.push(o.slice(f,d)),u},J1=function(o,n,a){a||(a={});var s,u,d,v,g,f,b,S=[],R=[S],q=a.textIndent||0,T=0,V=0,X=o.split(" "),L=Th.apply(this,[" ",a])[0];if(f=a.lineIndent===-1?X[0].length+2:a.lineIndent||0){var D=Array(f).join(" "),ve=[];X.map(function(ee){(ee=ee.split(/\s*\n/)).length>1?ve=ve.concat(ee.map(function(J,$){return($&&J.length?`
`:"")+J})):ve.push(ee[0])}),X=ve,f=Z1.apply(this,[D,a])}for(d=0,v=X.length;d<v;d++){var se=0;if(s=X[d],f&&s[0]==`
`&&(s=s.substr(1),se=1),q+T+(V=(u=Th.apply(this,[s,a])).reduce(function(ee,J){return ee+J},0))>n||se){if(V>n){for(g=K1.apply(this,[s,u,n-(q+T),n]),S.push(g.shift()),S=[g.pop()];g.length;)R.push([g.shift()]);V=u.slice(s.length-(S[0]?S[0].length:0)).reduce(function(ee,J){return ee+J},0)}else S=[s];R.push(S),q=V+f,T=L}else S.push(s),q+=T+V,T=L}return b=f?function(ee,J){return(J?D:"")+ee.join(" ")}:function(ee){return ee.join(" ")},R.map(b)},Cd.splitTextToSize=function(o,n,a){var s,u=(a=a||{}).fontSize||this.internal.getFontSize(),d=(function(S){if(S.widths&&S.kerning)return{widths:S.widths,kerning:S.kerning};var R=this.internal.getFont(S.fontName,S.fontStyle),q="Unicode";return R.metadata[q]?{widths:R.metadata[q].widths||{0:1},kerning:R.metadata[q].kerning||{}}:{font:R.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);s=Array.isArray(o)?o:String(o).split(/\r?\n/);var v=1*this.internal.scaleFactor*n/u;d.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/u:0,d.lineIndent=a.lineIndent;var g,f,b=[];for(g=0,f=s.length;g<f;g++)b=b.concat(J1.apply(this,[s[g],v,d]));return b},(function(o){o.__fontmetrics__=o.__fontmetrics__||{};for(var n="0123456789abcdef",a="klmnopqrstuvwxyz",s={},u={},d=0;d<16;d++)s[a[d]]=n[d],u[n[d]]=a[d];var v=function(q){return"0x"+parseInt(q,10).toString(16)},g=o.__fontmetrics__.compress=function(q){var T,V,X,L,D=["{"];for(var ve in q){if(T=q[ve],isNaN(parseInt(ve,10))?V="'"+ve+"'":(ve=parseInt(ve,10),V=(V=v(ve).slice(2)).slice(0,-1)+u[V.slice(-1)]),typeof T=="number")T<0?(X=v(T).slice(3),L="-"):(X=v(T).slice(2),L=""),X=L+X.slice(0,-1)+u[X.slice(-1)];else{if(ka(T)!=="object")throw new Error("Don't know what to do with value type "+ka(T)+".");X=g(T)}D.push(V+X)}return D.push("}"),D.join("")},f=o.__fontmetrics__.uncompress=function(q){if(typeof q!="string")throw new Error("Invalid argument passed to uncompress.");for(var T,V,X,L,D={},ve=1,se=D,ee=[],J="",$="",I=q.length-1,F=1;F<I;F+=1)(L=q[F])=="'"?T?(X=T.join(""),T=void 0):T=[]:T?T.push(L):L=="{"?(ee.push([se,X]),se={},X=void 0):L=="}"?((V=ee.pop())[0][V[1]]=se,X=void 0,se=V[0]):L=="-"?ve=-1:X===void 0?s.hasOwnProperty(L)?(J+=s[L],X=parseInt(J,16)*ve,ve=1,J=""):J+=L:s.hasOwnProperty(L)?($+=s[L],se[X]=parseInt($,16)*ve,ve=1,X=void 0,$=""):$+=L;return D},b={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},S={Unicode:{Courier:b,"Courier-Bold":b,"Courier-BoldOblique":b,"Courier-Oblique":b,Helvetica:b,"Helvetica-Bold":b,"Helvetica-BoldOblique":b,"Helvetica-Oblique":b,"Times-Roman":b,"Times-Bold":b,"Times-BoldItalic":b,"Times-Italic":b}},R={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};o.events.push(["addFont",function(q){var T=q.font,V=R.Unicode[T.postScriptName];V&&(T.metadata.Unicode={},T.metadata.Unicode.widths=V.widths,T.metadata.Unicode.kerning=V.kerning);var X=S.Unicode[T.postScriptName];X&&(T.metadata.Unicode.encoding=X,T.encoding=X.codePages[0])}])})(wn.API),(function(o){var n=function(a){for(var s=a.length,u=new Uint8Array(s),d=0;d<s;d++)u[d]=a.charCodeAt(d);return u};o.API.events.push(["addFont",function(a){var s=void 0,u=a.font,d=a.instance;if(!u.isStandardFont){if(d===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");if(typeof(s=d.existsFileInVFS(u.postScriptName)===!1?d.loadFile(u.postScriptName):d.getFileFromVFS(u.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");(function(v,g){g=/^\x00\x01\x00\x00/.test(g)?n(g):n(kh(g)),v.metadata=o.API.TTFFont.open(g),v.metadata.Unicode=v.metadata.Unicode||{encoding:{},kerning:{},widths:[]},v.metadata.glyIdsUsed=[0]})(u,s)}}])})(wn),wn.API.addSvgAsImage=function(o,n,a,s,u,d,v,g){if(isNaN(n)||isNaN(a))throw Wa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(u))throw Wa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=u;var b=f.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,f.width,f.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},R=this;return(Yn.canvg?Promise.resolve(Yn.canvg):Rp(()=>import("./index.es-BehoLfgU.js"),[])).catch(function(q){return Promise.reject(new Error("Could not load canvg: "+q))}).then(function(q){return q.default?q.default:q}).then(function(q){return q.fromString(b,o,S)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(q){return q.render(S)}).then(function(){R.addImage(f.toDataURL("image/jpeg",1),n,a,s,u,v,g)})},wn.API.putTotalPages=function(o){var n,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(o,"g"),a=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(o,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var u=0;u<this.internal.pages[s].length;u++)this.internal.pages[s][u]=this.internal.pages[s][u].replace(n,a);return this},wn.API.viewerPreferences=function(o,n){var a;o=o||{},n=n||!1;var s,u,d,v={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},g=Object.keys(v),f=[],b=0,S=0,R=0;function q(V,X){var L,D=!1;for(L=0;L<V.length;L+=1)V[L]===X&&(D=!0);return D}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(v)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,o==="reset"||n===!0){var T=g.length;for(R=0;R<T;R+=1)a[g[R]].value=a[g[R]].defaultValue,a[g[R]].explicitSet=!1}if(ka(o)==="object"){for(u in o)if(d=o[u],q(g,u)&&d!==void 0){if(a[u].type==="boolean"&&typeof d=="boolean")a[u].value=d;else if(a[u].type==="name"&&q(a[u].valueSet,d))a[u].value=d;else if(a[u].type==="integer"&&Number.isInteger(d))a[u].value=d;else if(a[u].type==="array"){for(b=0;b<d.length;b+=1)if(s=!0,d[b].length===1&&typeof d[b][0]=="number")f.push(String(d[b]-1));else if(d[b].length>1){for(S=0;S<d[b].length;S+=1)typeof d[b][S]!="number"&&(s=!1);s===!0&&f.push([d[b][0]-1,d[b][1]-1].join(" "))}a[u].value="["+f.join(" ")+"]"}else a[u].value=a[u].defaultValue;a[u].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var V,X=[];for(V in a)a[V].explicitSet===!0&&(a[V].type==="name"?X.push("/"+V+" /"+a[V].value):X.push("/"+V+" "+a[V].value));X.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+X.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},(function(o){var n=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',u=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),d=unescape(encodeURIComponent(s)),v=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),g=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),b=d.length+v.length+g.length+u.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+b+" >>"),this.internal.write("stream"),this.internal.write(u+d+v+g+f),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};o.addMetadata=function(s,u){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:u||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",n)),this}})(wn.API),(function(o){var n=o.API,a=n.pdfEscape16=function(d,v){for(var g,f=v.metadata.Unicode.widths,b=["","0","00","000","0000"],S=[""],R=0,q=d.length;R<q;++R){if(g=v.metadata.characterToGlyph(d.charCodeAt(R)),v.metadata.glyIdsUsed.push(g),v.metadata.toUnicode[g]=d.charCodeAt(R),f.indexOf(g)==-1&&(f.push(g),f.push([parseInt(v.metadata.widthOfGlyph(g),10)])),g=="0")return S.join("");g=g.toString(16),S.push(b[4-g.length],g)}return S.join("")},s=function(d){var v,g,f,b,S,R,q;for(S=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],R=0,q=(g=Object.keys(d).sort(function(T,V){return T-V})).length;R<q;R++)v=g[R],f.length>=100&&(S+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),d[v]!==void 0&&d[v]!==null&&typeof d[v].toString=="function"&&(b=("0000"+d[v].toString(16)).slice(-4),v=("0000"+(+v).toString(16)).slice(-4),f.push("<"+v+"><"+b+">"));return f.length&&(S+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),S+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(d){(function(v){var g=v.font,f=v.out,b=v.newObject,S=v.putStream;if(g.metadata instanceof o.API.TTFFont&&g.encoding==="Identity-H"){for(var R=g.metadata.Unicode.widths,q=g.metadata.subset.encode(g.metadata.glyIdsUsed,1),T="",V=0;V<q.length;V++)T+=String.fromCharCode(q[V]);var X=b();S({data:T,addLength1:!0,objectId:X}),f("endobj");var L=b();S({data:s(g.metadata.toUnicode),addLength1:!0,objectId:L}),f("endobj");var D=b();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Nd(g.fontName)),f("/FontFile2 "+X+" 0 R"),f("/FontBBox "+o.API.PDFObject.convert(g.metadata.bbox)),f("/Flags "+g.metadata.flags),f("/StemV "+g.metadata.stemV),f("/ItalicAngle "+g.metadata.italicAngle),f("/Ascent "+g.metadata.ascender),f("/Descent "+g.metadata.decender),f("/CapHeight "+g.metadata.capHeight),f(">>"),f("endobj");var ve=b();f("<<"),f("/Type /Font"),f("/BaseFont /"+Nd(g.fontName)),f("/FontDescriptor "+D+" 0 R"),f("/W "+o.API.PDFObject.convert(R)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+g.encoding+")"),f(">>"),f(">>"),f("endobj"),g.objectNumber=b(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+L+" 0 R"),f("/BaseFont /"+Nd(g.fontName)),f("/Encoding /"+g.encoding),f("/DescendantFonts ["+ve+" 0 R]"),f(">>"),f("endobj"),g.isAlreadyPutted=!0}})(d)}]),n.events.push(["putFont",function(d){(function(v){var g=v.font,f=v.out,b=v.newObject,S=v.putStream;if(g.metadata instanceof o.API.TTFFont&&g.encoding==="WinAnsiEncoding"){for(var R=g.metadata.rawData,q="",T=0;T<R.length;T++)q+=String.fromCharCode(R[T]);var V=b();S({data:q,addLength1:!0,objectId:V}),f("endobj");var X=b();S({data:s(g.metadata.toUnicode),addLength1:!0,objectId:X}),f("endobj");var L=b();f("<<"),f("/Descent "+g.metadata.decender),f("/CapHeight "+g.metadata.capHeight),f("/StemV "+g.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+V+" 0 R"),f("/Flags 96"),f("/FontBBox "+o.API.PDFObject.convert(g.metadata.bbox)),f("/FontName /"+Nd(g.fontName)),f("/ItalicAngle "+g.metadata.italicAngle),f("/Ascent "+g.metadata.ascender),f(">>"),f("endobj"),g.objectNumber=b();for(var D=0;D<g.metadata.hmtx.widths.length;D++)g.metadata.hmtx.widths[D]=parseInt(g.metadata.hmtx.widths[D]*(1e3/g.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+X+" 0 R/BaseFont/"+Nd(g.fontName)+"/FontDescriptor "+L+" 0 R/Encoding/"+g.encoding+" /FirstChar 29 /LastChar 255 /Widths "+o.API.PDFObject.convert(g.metadata.hmtx.widths)+">>"),f("endobj"),g.isAlreadyPutted=!0}})(d)}]);var u=function(d){var v,g=d.text||"",f=d.x,b=d.y,S=d.options||{},R=d.mutex||{},q=R.pdfEscape,T=R.activeFontKey,V=R.fonts,X=T,L="",D=0,ve="",se=V[X].encoding;if(V[X].encoding!=="Identity-H")return{text:g,x:f,y:b,options:S,mutex:R};for(ve=g,X=T,Array.isArray(g)&&(ve=g[0]),D=0;D<ve.length;D+=1)V[X].metadata.hasOwnProperty("cmap")&&(v=V[X].metadata.cmap.unicode.codeMap[ve[D].charCodeAt(0)]),v||ve[D].charCodeAt(0)<256&&V[X].metadata.hasOwnProperty("Unicode")?L+=ve[D]:L+="";var ee="";return parseInt(X.slice(1))<14||se==="WinAnsiEncoding"?ee=q(L,X).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):se==="Identity-H"&&(ee=a(L,V[X])),R.isHex=!0,{text:ee,x:f,y:b,options:S,mutex:R}};n.events.push(["postProcessText",function(d){var v=d.text||"",g=[],f={text:v,x:d.x,y:d.y,options:d.options,mutex:d.mutex};if(Array.isArray(v)){var b=0;for(b=0;b<v.length;b+=1)Array.isArray(v[b])&&v[b].length===3?g.push([u(Object.assign({},f,{text:v[b][0]})).text,v[b][1],v[b][2]]):g.push(u(Object.assign({},f,{text:v[b]})).text);d.text=g}else d.text=u(Object.assign({},f,{text:v})).text}])})(wn),(function(o){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};o.existsFileInVFS=function(a){return n.call(this),this.internal.vFS[a]!==void 0},o.addFileToVFS=function(a,s){return n.call(this),this.internal.vFS[a]=s,this},o.getFileFromVFS=function(a){return n.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}})(wn.API),(function(o){o.__bidiEngine__=o.prototype.__bidiEngine__=function(s){var u,d,v,g,f,b,S,R=n,q=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],T=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],V={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},X={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},L=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],D=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ve=!1,se=0;this.__bidiEngine__={};var ee=function(N){var C=N.charCodeAt(),re=C>>8,ie=X[re];return ie!==void 0?R[256*ie+(255&C)]:re===252||re===253?"AL":D.test(re)?"L":re===8?"R":"N"},J=function(N){for(var C,re=0;re<N.length;re++){if((C=ee(N.charAt(re)))==="L")return!1;if(C==="R")return!0}return!1},$=function(N,C,re,ie){var fe,te,ne,pe,Ne=C[ie];switch(Ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ve=!1;break;case"N":case"AN":break;case"EN":ve&&(Ne="AN");break;case"AL":ve=!0,Ne="R";break;case"WS":case"BN":Ne="N";break;case"CS":ie<1||ie+1>=C.length||(fe=re[ie-1])!=="EN"&&fe!=="AN"||(te=C[ie+1])!=="EN"&&te!=="AN"?Ne="N":ve&&(te="AN"),Ne=te===fe?te:"N";break;case"ES":Ne=(fe=ie>0?re[ie-1]:"B")==="EN"&&ie+1<C.length&&C[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&re[ie-1]==="EN"){Ne="EN";break}if(ve){Ne="N";break}for(ne=ie+1,pe=C.length;ne<pe&&C[ne]==="ET";)ne++;Ne=ne<pe&&C[ne]==="EN"?"EN":"N";break;case"NSM":if(v&&!g){for(pe=C.length,ne=ie+1;ne<pe&&C[ne]==="NSM";)ne++;if(ne<pe){var me=N[ie],U=me>=1425&&me<=2303||me===64286;if(fe=C[ne],U&&(fe==="R"||fe==="AL")){Ne="R";break}}}Ne=ie<1||(fe=C[ie-1])==="B"?"N":re[ie-1];break;case"B":ve=!1,u=!0,Ne=se;break;case"S":d=!0,Ne="N"}return Ne},I=function(N,C,re){var ie=N.split("");return re&&F(ie,re,{hiLevel:se}),ie.reverse(),C&&C.reverse(),ie.join("")},F=function(N,C,re){var ie,fe,te,ne,pe,Ne=-1,me=N.length,U=0,A=[],E=se?T:q,W=[];for(ve=!1,u=!1,d=!1,fe=0;fe<me;fe++)W[fe]=ee(N[fe]);for(te=0;te<me;te++){if(pe=U,A[te]=$(N,W,A,te),ie=240&(U=E[pe][V[A[te]]]),U&=15,C[te]=ne=E[U][5],ie>0)if(ie===16){for(fe=Ne;fe<te;fe++)C[fe]=1;Ne=-1}else Ne=-1;if(E[U][6])Ne===-1&&(Ne=te);else if(Ne>-1){for(fe=Ne;fe<te;fe++)C[fe]=ne;Ne=-1}W[te]==="B"&&(C[te]=0),re.hiLevel|=ne}d&&(function(xe,Ce,Te){for(var Le=0;Le<Te;Le++)if(xe[Le]==="S"){Ce[Le]=se;for(var Ae=Le-1;Ae>=0&&xe[Ae]==="WS";Ae--)Ce[Ae]=se}})(W,C,me)},O=function(N,C,re,ie,fe){if(!(fe.hiLevel<N)){if(N===1&&se===1&&!u)return C.reverse(),void(re&&re.reverse());for(var te,ne,pe,Ne,me=C.length,U=0;U<me;){if(ie[U]>=N){for(pe=U+1;pe<me&&ie[pe]>=N;)pe++;for(Ne=U,ne=pe-1;Ne<ne;Ne++,ne--)te=C[Ne],C[Ne]=C[ne],C[ne]=te,re&&(te=re[Ne],re[Ne]=re[ne],re[ne]=te);U=pe}U++}}},he=function(N,C,re){var ie=N.split(""),fe={hiLevel:se};return re||(re=[]),F(ie,re,fe),(function(te,ne,pe){if(pe.hiLevel!==0&&S)for(var Ne,me=0;me<te.length;me++)ne[me]===1&&(Ne=L.indexOf(te[me]))>=0&&(te[me]=L[Ne+1])})(ie,re,fe),O(2,ie,C,re,fe),O(1,ie,C,re,fe),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(N,C,re){if((function(fe,te){if(te)for(var ne=0;ne<fe.length;ne++)te[ne]=ne;g===void 0&&(g=J(fe)),b===void 0&&(b=J(fe))})(N,C),v||!f||b)if(v&&f&&g^b)se=g?1:0,N=I(N,C,re);else if(!v&&f&&b)se=g?1:0,N=he(N,C,re),N=I(N,C);else if(!v||g||f||b){if(v&&!f&&g^b)N=I(N,C),g?(se=0,N=he(N,C,re)):(se=1,N=he(N,C,re),N=I(N,C));else if(v&&g&&!f&&b)se=1,N=he(N,C,re),N=I(N,C);else if(!v&&!f&&g^b){var ie=S;g?(se=1,N=he(N,C,re),se=0,S=!1,N=he(N,C,re),S=ie):(se=0,N=he(N,C,re),N=I(N,C),se=1,S=!1,N=he(N,C,re),S=ie,N=I(N,C))}}else se=0,N=he(N,C,re);else se=g?1:0,N=he(N,C,re);return N},this.__bidiEngine__.setOptions=function(N){N&&(v=N.isInputVisual,f=N.isOutputVisual,g=N.isInputRtl,b=N.isOutputRtl,S=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new o.__bidiEngine__({isInputVisual:!0});o.API.events.push(["postProcessText",function(s){var u=s.text;s.x,s.y;var d=s.options||{};s.mutex,d.lang;var v=[];if(d.isInputVisual=typeof d.isInputVisual!="boolean"||d.isInputVisual,a.setOptions(d),Object.prototype.toString.call(u)==="[object Array]"){var g=0;for(v=[],g=0;g<u.length;g+=1)Object.prototype.toString.call(u[g])==="[object Array]"?v.push([a.doBidiReorder(u[g][0]),u[g][1],u[g][2]]):v.push([a.doBidiReorder(u[g])]);s.text=v}else s.text=a.doBidiReorder(u);a.setOptions({isInputVisual:!0})}])})(wn),wn.API.TTFFont=(function(){function o(n){var a;if(this.rawData=n,a=this.contents=new wu(n),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new kb(this),this.registerTTF()}return o.open=function(n){return new o(n)},o.prototype.parse=function(){return this.directory=new hb(this.contents),this.head=new gb(this),this.name=new vb(this),this.cmap=new ox(this),this.toUnicode={},this.hhea=new xb(this),this.maxp=new wb(this),this.hmtx=new Sb(this),this.post=new mb(this),this.os2=new yb(this),this.loca=new Ab(this),this.glyf=new jb(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},o.prototype.registerTTF=function(){var n,a,s,u,d;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var v,g,f,b;for(b=[],v=0,g=(f=this.bbox).length;v<g;v++)n=f[v],b.push(Math.round(n*this.scaleFactor));return b}).call(this),this.stemV=0,this.post.exists?(s=255&(u=this.post.italic_angle),32768&(a=u>>16)&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(d=this.familyClass)===1||d===2||d===3||d===4||d===5||d===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},o.prototype.characterToGlyph=function(n){var a;return((a=this.cmap.unicode)!=null?a.codeMap[n]:void 0)||0},o.prototype.widthOfGlyph=function(n){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*a},o.prototype.widthOfString=function(n,a,s){var u,d,v,g;for(v=0,d=0,g=(n=""+n).length;0<=g?d<g:d>g;d=0<=g?++d:--d)u=n.charCodeAt(d),v+=this.widthOfGlyph(this.characterToGlyph(u))+s*(1e3/a)||0;return v*(a/1e3)},o.prototype.lineHeight=function(n,a){var s;return a==null&&(a=!1),s=a?this.lineGap:0,(this.ascender+s-this.decender)/1e3*n},o})();var fc,wu=(function(){function o(n){this.data=n??[],this.pos=0,this.length=this.data.length}return o.prototype.readByte=function(){return this.data[this.pos++]},o.prototype.writeByte=function(n){return this.data[this.pos++]=n},o.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},o.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},o.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},o.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},o.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},o.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},o.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},o.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},o.prototype.readString=function(n){var a,s;for(s=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)s[a]=String.fromCharCode(this.readByte());return s.join("")},o.prototype.writeString=function(n){var a,s,u;for(u=[],a=0,s=n.length;0<=s?a<s:a>s;a=0<=s?++a:--a)u.push(this.writeByte(n.charCodeAt(a)));return u},o.prototype.readShort=function(){return this.readInt16()},o.prototype.writeShort=function(n){return this.writeInt16(n)},o.prototype.readLongLong=function(){var n,a,s,u,d,v,g,f;return n=this.readByte(),a=this.readByte(),s=this.readByte(),u=this.readByte(),d=this.readByte(),v=this.readByte(),g=this.readByte(),f=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^a)+1099511627776*(255^s)+4294967296*(255^u)+16777216*(255^d)+65536*(255^v)+256*(255^g)+(255^f)+1):72057594037927940*n+281474976710656*a+1099511627776*s+4294967296*u+16777216*d+65536*v+256*g+f},o.prototype.writeLongLong=function(n){var a,s;return a=Math.floor(n/4294967296),s=4294967295&n,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},o.prototype.readInt=function(){return this.readInt32()},o.prototype.writeInt=function(n){return this.writeInt32(n)},o.prototype.read=function(n){var a,s;for(a=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push(this.readByte());return a},o.prototype.write=function(n){var a,s,u,d;for(d=[],s=0,u=n.length;s<u;s++)a=n[s],d.push(this.writeByte(a));return d},o})(),hb=(function(){var o;function n(a){var s,u,d;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},u=0,d=this.tableCount;0<=d?u<d:u>d;u=0<=d?++u:--u)s={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[s.tag]=s}return n.prototype.encode=function(a){var s,u,d,v,g,f,b,S,R,q,T,V,X;for(X in T=Object.keys(a).length,f=Math.log(2),R=16*Math.floor(Math.log(T)/f),v=Math.floor(R/f),S=16*T-R,(u=new wu).writeInt(this.scalarType),u.writeShort(T),u.writeShort(R),u.writeShort(v),u.writeShort(S),d=16*T,b=u.pos+d,g=null,V=[],a)for(q=a[X],u.writeString(X),u.writeInt(o(q)),u.writeInt(b),u.writeInt(q.length),V=V.concat(q),X==="head"&&(g=b),b+=q.length;b%4;)V.push(0),b++;return u.write(V),s=2981146554-o(u.data),u.pos=g+8,u.writeUInt32(s),u.data},o=function(a){var s,u,d,v;for(a=rx.call(a);a.length%4;)a.push(0);for(d=new wu(a),u=0,s=0,v=a.length;s<v;s=s+=4)u+=d.readUInt32();return 4294967295&u},n})(),pb={}.hasOwnProperty,Rc=function(o,n){for(var a in n)pb.call(n,a)&&(o[a]=n[a]);function s(){this.constructor=o}return s.prototype=n.prototype,o.prototype=new s,o.__super__=n.prototype,o};fc=(function(){function o(n){var a;this.file=n,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return o.prototype.parse=function(){},o.prototype.encode=function(){},o.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},o})();var gb=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="head",o.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},o.prototype.encode=function(n){var a;return(a=new wu).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(n),a.writeShort(this.glyphDataFormat),a.data},o})(),s2=(function(){function o(n,a){var s,u,d,v,g,f,b,S,R,q,T,V,X,L,D,ve,se;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=a+n.readInt(),R=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=n.readByte();break;case 4:for(T=n.readUInt16(),q=T/2,n.pos+=6,d=(function(){var ee,J;for(J=[],f=ee=0;0<=q?ee<q:ee>q;f=0<=q?++ee:--ee)J.push(n.readUInt16());return J})(),n.pos+=2,X=(function(){var ee,J;for(J=[],f=ee=0;0<=q?ee<q:ee>q;f=0<=q?++ee:--ee)J.push(n.readUInt16());return J})(),b=(function(){var ee,J;for(J=[],f=ee=0;0<=q?ee<q:ee>q;f=0<=q?++ee:--ee)J.push(n.readUInt16());return J})(),S=(function(){var ee,J;for(J=[],f=ee=0;0<=q?ee<q:ee>q;f=0<=q?++ee:--ee)J.push(n.readUInt16());return J})(),u=(this.length-n.pos+this.offset)/2,g=(function(){var ee,J;for(J=[],f=ee=0;0<=u?ee<u:ee>u;f=0<=u?++ee:--ee)J.push(n.readUInt16());return J})(),f=D=0,se=d.length;D<se;f=++D)for(L=d[f],s=ve=V=X[f];V<=L?ve<=L:ve>=L;s=V<=L?++ve:--ve)S[f]===0?v=s+b[f]:(v=g[S[f]/2+(s-V)-(q-f)]||0)!==0&&(v+=b[f]),this.codeMap[s]=65535&v}n.pos=R}return o.encode=function(n,a){var s,u,d,v,g,f,b,S,R,q,T,V,X,L,D,ve,se,ee,J,$,I,F,O,he,N,C,re,ie,fe,te,ne,pe,Ne,me,U,A,E,W,xe,Ce,Te,Le,Ae,De,Ye,pt;switch(ie=new wu,v=Object.keys(n).sort(function(mt,_t){return mt-_t}),a){case"macroman":for(X=0,L=(function(){var mt=[];for(V=0;V<256;++V)mt.push(0);return mt})(),ve={0:0},d={},fe=0,Ne=v.length;fe<Ne;fe++)ve[Ae=n[u=v[fe]]]==null&&(ve[Ae]=++X),d[u]={old:n[u],new:ve[n[u]]},L[u]=ve[n[u]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(L),{charMap:d,subtable:ie.data,maxGlyphID:X+1};case"unicode":for(C=[],R=[],se=0,ve={},s={},D=b=null,te=0,me=v.length;te<me;te++)ve[J=n[u=v[te]]]==null&&(ve[J]=++se),s[u]={old:J,new:ve[J]},g=ve[J]-u,D!=null&&g===b||(D&&R.push(D),C.push(u),b=g),D=u;for(D&&R.push(D),R.push(65535),C.push(65535),he=2*(O=C.length),F=2*Math.pow(Math.log(O)/Math.LN2,2),q=Math.log(F/2)/Math.LN2,I=2*O-F,f=[],$=[],T=[],V=ne=0,U=C.length;ne<U;V=++ne){if(N=C[V],S=R[V],N===65535){f.push(0),$.push(0);break}if(N-(re=s[N].new)>=32768)for(f.push(0),$.push(2*(T.length+O-V)),u=pe=N;N<=S?pe<=S:pe>=S;u=N<=S?++pe:--pe)T.push(s[u].new);else f.push(re-N),$.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*O+2*T.length),ie.writeUInt16(0),ie.writeUInt16(he),ie.writeUInt16(F),ie.writeUInt16(q),ie.writeUInt16(I),Te=0,A=R.length;Te<A;Te++)u=R[Te],ie.writeUInt16(u);for(ie.writeUInt16(0),Le=0,E=C.length;Le<E;Le++)u=C[Le],ie.writeUInt16(u);for(De=0,W=f.length;De<W;De++)g=f[De],ie.writeUInt16(g);for(Ye=0,xe=$.length;Ye<xe;Ye++)ee=$[Ye],ie.writeUInt16(ee);for(pt=0,Ce=T.length;pt<Ce;pt++)X=T[pt],ie.writeUInt16(X);return{charMap:s,subtable:ie.data,maxGlyphID:se+1}}},o})(),ox=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="cmap",o.prototype.parse=function(n){var a,s,u;for(n.pos=this.offset,this.version=n.readUInt16(),u=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=u?s<u:s>u;s=0<=u?++s:--s)a=new s2(n,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},o.encode=function(n,a){var s,u;return a==null&&(a="macroman"),s=s2.encode(n,a),(u=new wu).writeUInt16(0),u.writeUInt16(1),s.table=u.data.concat(s.subtable),s},o})(),xb=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="hhea",o.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},o})(),yb=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="OS/2",o.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var a,s;for(s=[],a=0;a<10;++a)s.push(n.readByte());return s})(),this.charRange=(function(){var a,s;for(s=[],a=0;a<4;++a)s.push(n.readInt());return s})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(n.readInt());return s})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},o})(),mb=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="post",o.prototype.parse=function(n){var a,s,u;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:case 196608:break;case 131072:var d;for(s=n.readUInt16(),this.glyphNameIndex=[],d=0;0<=s?d<s:d>s;d=0<=s?++d:--d)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],u=[];n.pos<this.offset+this.length;)a=n.readByte(),u.push(this.names.push(n.readString(a)));return u;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 262144:return this.map=(function(){var v,g,f;for(f=[],d=v=0,g=this.file.maxp.numGlyphs;0<=g?v<g:v>g;d=0<=g?++v:--v)f.push(n.readUInt32());return f}).call(this)}},o})(),bb=function(o,n){this.raw=o,this.length=o.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},vb=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="name",o.prototype.parse=function(n){var a,s,u,d,v,g,f,b,S,R,q;for(n.pos=this.offset,n.readShort(),a=n.readShort(),g=n.readShort(),s=[],d=0;0<=a?d<a:d>a;d=0<=a?++d:--d)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+g+n.readShort()});for(f={},d=S=0,R=s.length;S<R;d=++S)u=s[d],n.pos=u.offset,b=n.readString(u.length),v=new bb(b,u),f[q=u.nameID]==null&&(f[q]=[]),f[u.nameID].push(v);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},o})(),wb=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="maxp",o.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},o})(),Sb=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="hmtx",o.prototype.parse=function(n){var a,s,u,d,v,g,f;for(n.pos=this.offset,this.metrics=[],a=0,g=this.file.hhea.numberOfMetrics;0<=g?a<g:a>g;a=0<=g?++a:--a)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var b,S;for(S=[],a=b=0;0<=u?b<u:b>u;a=0<=u?++b:--b)S.push(n.readInt16());return S})(),this.widths=(function(){var b,S,R,q;for(q=[],b=0,S=(R=this.metrics).length;b<S;b++)d=R[b],q.push(d.advance);return q}).call(this),s=this.widths[this.widths.length-1],f=[],a=v=0;0<=u?v<u:v>u;a=0<=u?++v:--v)f.push(this.widths.push(s));return f},o.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},o})(),rx=[].slice,jb=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="glyf",o.prototype.parse=function(){return this.cache={}},o.prototype.glyphFor=function(n){var a,s,u,d,v,g,f,b,S,R;return n in this.cache?this.cache[n]:(d=this.file.loca,a=this.file.contents,s=d.indexOf(n),(u=d.lengthOf(n))===0?this.cache[n]=null:(a.pos=this.offset+s,v=(g=new wu(a.read(u))).readShort(),b=g.readShort(),R=g.readShort(),f=g.readShort(),S=g.readShort(),this.cache[n]=v===-1?new Cb(g,b,R,f,S):new Tb(g,v,b,R,f,S),this.cache[n]))},o.prototype.encode=function(n,a,s){var u,d,v,g,f;for(v=[],d=[],g=0,f=a.length;g<f;g++)u=n[a[g]],d.push(v.length),u&&(v=v.concat(u.encode(s)));return d.push(v.length),{table:v,offsets:d}},o})(),Tb=(function(){function o(n,a,s,u,d,v){this.raw=n,this.numberOfContours=a,this.xMin=s,this.yMin=u,this.xMax=d,this.yMax=v,this.compound=!1}return o.prototype.encode=function(){return this.raw.data},o})(),Cb=(function(){function o(n,a,s,u,d){var v,g;for(this.raw=n,this.xMin=a,this.yMin=s,this.xMax=u,this.yMax=d,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],v=this.raw;g=v.readShort(),this.glyphOffsets.push(v.pos),this.glyphIDs.push(v.readUInt16()),32&g;)v.pos+=1&g?4:2,128&g?v.pos+=8:64&g?v.pos+=4:8&g&&(v.pos+=2)}return o.prototype.encode=function(){var n,a,s;for(a=new wu(rx.call(this.raw.data)),n=0,s=this.glyphIDs.length;n<s;++n)a.pos=this.glyphOffsets[n];return a.data},o})(),Ab=(function(){function o(){return o.__super__.constructor.apply(this,arguments)}return Rc(o,fc),o.prototype.tag="loca",o.prototype.parse=function(n){var a,s;return n.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var u,d;for(d=[],s=0,u=this.length;s<u;s+=2)d.push(2*n.readUInt16());return d}).call(this):(function(){var u,d;for(d=[],s=0,u=this.length;s<u;s+=4)d.push(n.readUInt32());return d}).call(this)},o.prototype.indexOf=function(n){return this.offsets[n]},o.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},o.prototype.encode=function(n,a){for(var s=new Uint32Array(this.offsets.length),u=0,d=0,v=0;v<s.length;++v)if(s[v]=u,d<a.length&&a[d]==v){++d,s[v]=u;var g=this.offsets[v],f=this.offsets[v+1]-g;f>0&&(u+=f)}for(var b=new Array(4*s.length),S=0;S<s.length;++S)b[4*S+3]=255&s[S],b[4*S+2]=(65280&s[S])>>8,b[4*S+1]=(16711680&s[S])>>16,b[4*S]=(4278190080&s[S])>>24;return b},o})(),kb=(function(){function o(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return o.prototype.generateCmap=function(){var n,a,s,u,d;for(a in u=this.font.cmap.tables[0].codeMap,n={},d=this.subset)s=d[a],n[a]=u[s];return n},o.prototype.glyphsFor=function(n){var a,s,u,d,v,g,f;for(u={},v=0,g=n.length;v<g;v++)u[d=n[v]]=this.font.glyf.glyphFor(d);for(d in a=[],u)(s=u[d])!=null&&s.compound&&a.push.apply(a,s.glyphIDs);if(a.length>0)for(d in f=this.glyphsFor(a))s=f[d],u[d]=s;return u},o.prototype.encode=function(n,a){var s,u,d,v,g,f,b,S,R,q,T,V,X,L,D;for(u in s=ox.encode(this.generateCmap(),"unicode"),v=this.glyphsFor(n),T={0:0},D=s.charMap)T[(f=D[u]).old]=f.new;for(V in q=s.maxGlyphID,v)V in T||(T[V]=q++);return S=(function(ve){var se,ee;for(se in ee={},ve)ee[ve[se]]=se;return ee})(T),R=Object.keys(S).sort(function(ve,se){return ve-se}),X=(function(){var ve,se,ee;for(ee=[],ve=0,se=R.length;ve<se;ve++)g=R[ve],ee.push(S[g]);return ee})(),d=this.font.glyf.encode(v,X,T),b=this.font.loca.encode(d.offsets,X),L={cmap:this.font.cmap.raw(),glyf:d.table,loca:b,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(L["OS/2"]=this.font.os2.raw()),this.font.directory.encode(L)},o})();wn.API.PDFObject=(function(){var o;function n(){}return o=function(a,s){return(Array(s+1).join("0")+a).slice(-s)},n.convert=function(a){var s,u,d,v;if(Array.isArray(a))return"["+(function(){var g,f,b;for(b=[],g=0,f=a.length;g<f;g++)s=a[g],b.push(n.convert(s));return b})().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a?.isString)return"("+a+")";if(a instanceof Date)return"(D:"+o(a.getUTCFullYear(),4)+o(a.getUTCMonth(),2)+o(a.getUTCDate(),2)+o(a.getUTCHours(),2)+o(a.getUTCMinutes(),2)+o(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(u in d=["<<"],a)v=a[u],d.push("/"+u+" "+n.convert(v));return d.push(">>"),d.join(`
`)}return""+a},n})();const t0=o=>{const n=_f[o];return!n||!n.prefix||n.prefix.length<1?"?":n.prefix[0].substring(0,1).toUpperCase()},Il=(o,n,a)=>({color:n,size:a}),l2=(o,n,a)=>{},go=(o,n,a,s)=>({color:a,size:s}),Ad=(o,n,a,s)=>{},Nb=()=>{const o=new Map,n={top:"#0072B2",bottom:"#56B4E9"},a={top:18,bottom:18},s={top:"#FFFF00",bottom:"#FFFF00"},u={top:18,bottom:18},d={top:"#AA4499",bottom:"#F781BF"},v={top:6,bottom:6},g={top:"#6A3D9A",bottom:"#9467BD"},f={top:18,bottom:18};return o.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:Il("select","#ff0000",10),layerSettings:new Map([["top",go("select","top","#ff0000",10)],["bottom",go("select","bottom","#ff0000",10)]])}),o.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:Il("via",kp,_p.DEFAULT_SIZE),layerSettings:new Map([["top",go("via","top",kp,_p.DEFAULT_SIZE)],["bottom",go("via","bottom",kp,_p.DEFAULT_SIZE)]]),defaultLayer:"top"}),o.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:Il("pad",Cy,18),layerSettings:new Map([["top",go("pad","top",n.top,a.top)],["bottom",go("pad","bottom",n.bottom,a.bottom)]]),defaultLayer:"top"}),o.set("testPoint",{id:"testPoint",name:"Test Point",toolType:"draw",drawingMode:"testPoint",icon:"",shortcut:"Y",tooltip:"Place test point",colorReflective:!0,settings:Il("testPoint","#FFFF00",18),layerSettings:new Map([["top",go("testPoint","top",s.top,u.top)],["bottom",go("testPoint","bottom",s.bottom,u.bottom)]]),defaultLayer:"top"}),o.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:Il("trace",jy,6),layerSettings:new Map([["top",go("trace","top",d.top,v.top)],["bottom",go("trace","bottom",d.bottom,v.bottom)]]),defaultLayer:"top"}),o.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:Il("component",Ty,h2.DEFAULT_SIZE),layerSettings:new Map([["top",go("component","top",g.top,f.top)],["bottom",go("component","bottom",g.bottom,f.bottom)]]),defaultLayer:"top"}),o.set("componentConnection",{id:"componentConnection",name:"Component Connections",toolType:"componentConnection",icon:"",shortcut:"",tooltip:"Component connection lines",colorReflective:!1,settings:Il("componentConnection","#E69F00",3),layerSettings:new Map([["top",go("componentConnection","top","#E69F00",3)],["bottom",go("componentConnection","bottom","#E69F00",3)]])}),o.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:Il("power",zp,18),layerSettings:new Map([["top",go("power","top",zp,18)],["bottom",go("power","bottom",zp,18)]]),defaultLayer:"top"}),o.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:Il("ground",Np,18),layerSettings:new Map([["top",go("ground","top",Np,18)],["bottom",go("ground","bottom",Np,18)]]),defaultLayer:"top"}),o.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:Il("erase","#f5a3b3",18),layerSettings:new Map([["top",go("erase","top","#f5a3b3",18)],["bottom",go("erase","bottom","#f5a3b3",18)]])}),o.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:Il("pan","#ff0000",10),layerSettings:new Map([["top",go("pan","top","#ff0000",10)],["bottom",go("pan","bottom","#ff0000",10)]])}),o.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"M",tooltip:"Magnify",colorReflective:!1,settings:Il("magnify","#ff0000",10),layerSettings:new Map([["top",go("magnify","top","#ff0000",10)],["bottom",go("magnify","bottom","#ff0000",10)]])}),o},c2={via:{color:"#2CA02C",size:18},padTop:{color:"#0072B2",size:18},padBottom:{color:"#56B4E9",size:18},testPointTop:{color:"#FFFF00",size:18},testPointBottom:{color:"#FFFF00",size:18},traceTop:{color:"#AA4499",size:6},traceBottom:{color:"#F781BF",size:6},componentTop:{color:"#6A3D9A",size:18},componentBottom:{color:"#9467BD",size:18},power:{color:"#ff0000",size:18},ground:{color:"#000000",size:18}},Tf={via:"Via",padTop:"Pad (Top)",padBottom:"Pad (Bottom)",testPointTop:"Test Point (Top)",testPointBottom:"Test Point (Bottom)",traceTop:"Trace (Top)",traceBottom:"Trace (Bottom)",componentTop:"Component (Top)",componentBottom:"Component (Bottom)",power:"Power",ground:"Ground"};class zb{instances=new Map;listeners=new Map;initialize(){for(const n of Object.keys(c2)){const a=c2[n];this.instances.set(n,{id:n,name:Tf[n],color:a.color,size:a.size}),this.listeners.set(n,new Set)}}initializeFromProject(n){if(this.initialize(),n?.toolInstances)for(const[a,s]of Object.entries(n.toolInstances))this.instances.has(a)&&this.instances.set(a,s)}get(n){const a=this.instances.get(n);if(!a)throw new Error(`Tool instance ${n} not found`);return a}getColor(n){const a=this.instances.get(n);if(!a)throw new Error(`Tool instance ${n} not found`);const s=Tf[n];return console.log(`${s}, returning color value=${a.color}`),a.color}getSize(n){const a=this.instances.get(n);if(!a)throw new Error(`Tool instance ${n} not found`);const s=Tf[n];return console.log(`${s}, returning size value=${a.size}`),a.size}setColor(n,a){const s=this.instances.get(n);if(s){const u=Tf[n];console.log(`${u}, setting color value=${a}`),s.color=a,this.notifyListeners(n)}}setSize(n,a){const s=this.instances.get(n);if(s){const u=Tf[n];console.log(`${u}, setting size value=${a}`),s.size=a,this.notifyListeners(n)}}getAll(){const n={};for(const[a,s]of this.instances.entries())n[a]=s;return n}subscribe(n,a){const s=this.listeners.get(n);return s?(s.add(a),()=>{s.delete(a)}):()=>{}}notifyListeners(n){const a=this.listeners.get(n);a&&a.forEach(s=>s())}}const ai=new zb;ai.initialize();function Ch(o,n){switch(o){case"via":return"via";case"pad":return n==="bottom"?"padBottom":"padTop";case"testPoint":return n==="bottom"?"testPointBottom":"testPointTop";case"trace":return n==="bottom"?"traceBottom":"traceTop";case"component":return n==="bottom"?"componentBottom":"componentTop";case"power":return"power";case"ground":return"ground";default:throw new Error(`Unknown tool: ${o}`)}}const _b=({visible:o,toolRegistry:n,currentTool:a,drawingMode:s,traceToolLayer:u,padToolLayer:d,testPointToolLayer:v,componentToolLayer:g,updateToolSettings:f,updateToolLayerSettings:b,setBrushSize:S,saveToolSettings:R,saveToolLayerSettings:q,setTopTraceSize:T,setBottomTraceSize:V,setTopPadSize:X,setBottomPadSize:L,setTopTestPointSize:D,setBottomTestPointSize:ve,setTopComponentSize:se,setBottomComponentSize:ee,setComponentConnectionSize:J,saveDefaultSize:$,onClose:I})=>{const[F,O]=H.useState({}),he=[{id:"via",name:"Via",instanceId:"via"},{id:"pad",name:"Pad",layer:"top",instanceId:"padTop"},{id:"pad",name:"Pad",layer:"bottom",instanceId:"padBottom"},{id:"testPoint",name:"Test Point",layer:"top",instanceId:"testPointTop"},{id:"testPoint",name:"Test Point",layer:"bottom",instanceId:"testPointBottom"},{id:"trace",name:"Trace",layer:"top",instanceId:"traceTop"},{id:"trace",name:"Trace",layer:"bottom",instanceId:"traceBottom"},{id:"component",name:"Component",layer:"top",instanceId:"componentTop"},{id:"component",name:"Component",layer:"bottom",instanceId:"componentBottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power",instanceId:"power"},{id:"ground",name:"Ground",instanceId:"ground"},{id:"erase",name:"Erase"}];H.useEffect(()=>{if(o){const re={};for(const ie of he){const fe=ie.instanceId||ie.id;if(ie.instanceId)try{const te=ai.get(ie.instanceId);re[fe]=te.size}catch{const te=n.get(ie.id);te&&(re[fe]=ie.layer?te.layerSettings.get(ie.layer)?.size??te.settings.size??10:te.settings.size??10)}else{const te=n.get(ie.id);te&&(re[fe]=te.settings.size??10)}}O(re)}},[o]);const N=H.useCallback((re,ie,fe,te)=>{if(!n.get(re)&&re!=="componentConnection")return;const pe=te||re;O(me=>({...me,[pe]:ie})),["trace","pad","testPoint","component"].includes(re)&&fe&&te?(ai.setSize(te,ie),(re==="trace"&&a==="draw"&&s==="trace"||re==="pad"&&a==="draw"&&s==="pad"||re==="testPoint"&&a==="draw"&&s==="testPoint"||re==="component"&&a==="component")&&((re==="trace"?u:re==="pad"?d:re==="testPoint"?v:g)||"top")===fe&&S(ie)):te?(ai.setSize(te,ie),(re==="via"&&a==="draw"&&s==="via"||re==="power"&&a==="power"||re==="ground"&&a==="ground")&&S(ie)):(re==="componentConnection"&&(J(ie),$("componentConnection",ie)),re==="erase"&&a==="erase"&&S(ie))},[n,a,s,u,d,v,g,S,J,$]);if(!o)return null;const C=Array.from({length:50},(re,ie)=>ie+1);return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:re=>{re.target===re.currentTarget&&I()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",maxWidth:"400px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:re=>re.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Size"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:he.map((re,ie)=>{if(!n.get(re.id)&&re.id!=="componentConnection")return null;const te=re.layer?`${re.name} (${re.layer==="top"?"Top":"Bottom"})`:re.name,ne=re.instanceId||re.id,pe=F[ne]??10;return i.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[i.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[te,":"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("select",{value:pe,onChange:Ne=>{const me=parseInt(Ne.target.value,10);N(re.id,me,re.layer,re.instanceId)},style:{width:"50px",padding:"4px 6px",background:"#2b2b31",border:"1px solid #3a3a44",borderRadius:4,color:"#f2f2f2",fontSize:"12px",cursor:"pointer"},children:C.map(Ne=>i.jsx("option",{value:Ne,style:{background:"#2b2b31",color:"#f2f2f2"},children:Ne},Ne))}),i.jsx("span",{style:{color:"#f2f2f2",fontSize:"12px"},children:"px"})]})]},`${re.id}-${re.layer||"default"}-${ie}`)})}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:I,style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},Lb=({visible:o,toolRegistry:n,currentTool:a,drawingMode:s,traceToolLayer:u,padToolLayer:d,testPointToolLayer:v,componentToolLayer:g,updateToolSettings:f,updateToolLayerSettings:b,saveToolSettings:S,saveToolLayerSettings:R,setBrushColor:q,setTopTraceColor:T,setBottomTraceColor:V,setTopPadColor:X,setBottomPadColor:L,setTopTestPointColor:D,setBottomTestPointColor:ve,setTopComponentColor:se,setBottomComponentColor:ee,setComponentConnectionColor:J,saveDefaultColor:$,colorPalette:I,onClose:F})=>{const[O,he]=At.useState(null),[N,C]=At.useState(0);if(At.useEffect(()=>{const ne=[];return[{id:"via"},{id:"pad",layer:"top"},{id:"pad",layer:"bottom"},{id:"testPoint",layer:"top"},{id:"testPoint",layer:"bottom"},{id:"trace",layer:"top"},{id:"trace",layer:"bottom"},{id:"component",layer:"top"},{id:"component",layer:"bottom"},{id:"power"},{id:"ground"}].forEach(({id:Ne,layer:me})=>{try{const U=Ch(Ne,me),A=ai.subscribe(U,()=>{C(E=>E+1)});ne.push(A)}catch{}}),()=>{ne.forEach(Ne=>Ne())}},[]),!o)return null;const re=["pad","testPoint","trace","component"],ie=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],fe=(ne,pe,Ne)=>{if(ne==="componentConnection"){J(pe),$("componentConnection",pe),he(null);return}if(ne==="erase"){const me=n.get(ne);me&&(f(ne,{...me.settings,color:pe}),S(ne,pe,me.settings.size)),he(null);return}try{let me;Ne&&re.includes(ne)?me=Ch(ne,Ne):me=Ch(ne),ai.setColor(me,pe),(ne==="via"&&a==="draw"&&s==="via"||ne==="trace"&&a==="draw"&&s==="trace"||ne==="pad"&&a==="draw"&&s==="pad"||ne==="testPoint"&&a==="draw"&&s==="testPoint"||ne==="component"&&a==="component"||ne==="power"&&a==="power"||ne==="ground"&&a==="ground")&&(Ne&&re.includes(ne)?((ne==="trace"?u:ne==="pad"?d:ne==="testPoint"?v:g)||"top")===Ne&&q(pe):q(pe))}catch(me){console.error(`Error updating color for tool ${ne}:`,me);const U=n.get(ne);U&&(Ne&&re.includes(ne)?(b(ne,Ne,{...U.layerSettings.get(Ne),color:pe}),R(ne,Ne,pe,U.layerSettings.get(Ne)?.size||U.settings.size)):(f(ne,{...U.settings,color:pe}),S(ne,pe,U.settings.size)))}he(null)},te=(ne,pe)=>{let Ne;try{const A=Ch(ne,pe);Ne=ai.get(A).color}catch{const A=n.get(ne);if(!A)return null;Ne=A.settings.color??"#000000"}const me=pe?`${ne}-${pe}`:ne,U=O?.toolId===ne&&O?.layer===pe;return i.jsxs("div",{style:{position:"relative",display:"inline-block",zIndex:10005},children:[i.jsx("button",{className:"color-swatch-button",onClick:A=>{A.stopPropagation(),he(U?null:{toolId:ne,layer:pe})},style:{width:"40px",height:"24px",background:Ne,backgroundColor:Ne,backgroundImage:"none",border:"1px solid #3a3a44",borderRadius:3,cursor:"pointer",padding:0,margin:0,display:"block","--swatch-color":Ne},title:Ne},`${me}-button-${Ne}-${N}`),U&&i.jsx("div",{onClick:A=>{A.stopPropagation()},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:100},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:I.map(A=>i.jsx("div",{onClick:()=>fe(ne,A,pe),title:A,style:{width:22,height:22,backgroundColor:A,border:A===Ne?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},A))})})]},`${me}-${Ne}-${N}`)};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:ne=>{ne.target===ne.currentTarget&&(F(),he(null))},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",minWidth:"450px",maxWidth:"600px",maxHeight:"85vh",overflowY:"auto",overflowX:"visible",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:ne=>ne.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Color"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ie.map((ne,pe)=>{if(!n.get(ne.id))return null;const me=ne.layer?`${ne.name} (${ne.layer==="top"?"Top":"Bottom"})`:ne.name;return i.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[i.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[me,":"]}),te(ne.id,ne.layer)]},`${ne.id}-${ne.layer||"default"}-${pe}`)})}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:()=>{F(),he(null)},style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},Pb=({openMenu:o,setOpenMenu:n,isReadOnlyMode:a,currentProjectFilePath:s,isProjectActive:u,autoSaveEnabled:d,autoSaveInterval:v,hasUnsavedChangesState:g,onNewProject:f,onOpenProject:b,onSaveProject:S,onSaveAs:R,onPrint:q,onExportBOM:T,hasUnsavedChanges:V,bomExportFormat:X,setBomExportFormat:L,setNewProjectDialog:D,setAutoSaveDialog:ve,topImage:se,bottomImage:ee,setCurrentTool:J,resetImageTransform:$,areImagesLocked:I,setAreImagesLocked:F,onEnterBoardDimensions:O,fileInputTopRef:he,fileInputBottomRef:N,openProjectRef:C,increaseSize:re,decreaseSize:ie,brushSize:fe,drawingStrokes:te,selectedIds:ne,selectedComponentIds:pe,selectedPowerIds:Ne,selectedGroundIds:me,componentsTop:U,componentsBottom:A,powers:E,grounds:W,powerNodeNames:xe,groundNodeNames:Ce,setSetSizeDialog:Te,areViasLocked:Le,setAreViasLocked:Ae,arePadsLocked:De,setArePadsLocked:Ye,areTestPointsLocked:pt,setAreTestPointsLocked:mt,areTracesLocked:_t,setAreTracesLocked:de,areComponentsLocked:vt,setAreComponentsLocked:zt,areGroundNodesLocked:kt,setAreGroundNodesLocked:ot,arePowerNodesLocked:sn,setArePowerNodesLocked:Ut,showTraceCornerDots:xn,setShowTraceCornerDots:nn,setSelectedIds:Un,setSelectedComponentIds:Ct,setSelectedPowerIds:Mt,setSelectedGroundIds:ri,selectAllVias:ht,selectAllTraces:St,selectAllPads:Rn,selectAllComponents:Zt,selectDisconnectedComponents:_n,selectAllComponentConnections:Tn,selectAllPowerNodes:ln,selectAllGroundNodes:yn,selectPowerNodesByName:nt,selectGroundNodesByName:Qt,setShowPowerBusManager:Wt,setShowGroundBusManager:Vt,setShowDesignatorManager:bn,setShowPastMachine:Fi,toolRegistry:Mn,updateToolSettings:fn,updateToolLayerSettings:$t,setBrushSize:To,setBrushColor:eo,saveToolSettings:xo,saveToolLayerSettings:Co,colorPalette:Kt,currentTool:Ao,drawingMode:rr,traceToolLayer:Go,padToolLayer:jt,testPointToolLayer:si,componentToolLayer:li,setTopTraceSize:zi,setBottomTraceSize:bs,setTopPadSize:ko,setBottomPadSize:Hi,setTopTestPointSize:la,setBottomTestPointSize:ba,setTopComponentSize:No,setBottomComponentSize:Bn,setComponentConnectionSize:kr,topTraceColor:hi,bottomTraceColor:sr,topPadColor:mi,bottomPadColor:lr,topTestPointColor:_i,bottomTestPointColor:vs,topComponentColor:cr,bottomComponentColor:xa,setTopTraceColor:ws,setBottomTraceColor:yo,setTopPadColor:Ir,setBottomPadColor:ca,setTopTestPointColor:Hl,setBottomTestPointColor:Gn,setTopComponentColor:va,setBottomComponentColor:Es,setComponentConnectionColor:Xo,saveDefaultSize:ur,saveDefaultColor:Nr,menuBarRef:Vn,onOpenProjectNotes:Io,onOpenTransformImages:Ur,onOpenTransformAll:zo})=>{const[ol,ua]=At.useState(null),ci=At.useRef(null),[Gi,wa]=At.useState(null),Da=At.useRef(null),[ql,Sa]=At.useState(!1),dr=At.useRef(null),[rl,fr]=At.useState(!1),[Ss,da]=At.useState(!1),Qn=Ze=>{if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),n(null);return}const vi=Ze();vi instanceof Promise&&vi.catch(Zo=>{console.error("Error in requireProject action:",Zo)})},Fr=Ze=>{const vi=Ze==="power"?xe:Ce,Zo=vi.length>0,Cn=Ze==="power"?"Select Power Nodes":"Select Ground Nodes";return i.jsxs("div",{onMouseEnter:()=>{ci.current&&(clearTimeout(ci.current),ci.current=null),ua(Ze)},onMouseLeave:()=>{ci.current=window.setTimeout(()=>{ua(Jt=>Jt===Ze?null:Jt)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[Cn," by Name"]}),i.jsxs("button",{onClick:()=>{Ze==="power"?ln():yn(),ua(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",Ze==="power"?"Power Nodes":"Ground Nodes"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),Zo?vi.map(Jt=>i.jsx("button",{onClick:()=>{Ze==="power"?nt(Jt):Qt(Jt),ua(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:Jt},Jt)):i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",Ze==="power"?"power":"ground"," nodes available."]})]})},Wl=()=>i.jsxs("div",{onMouseEnter:()=>{Da.current&&(clearTimeout(Da.current),Da.current=null),wa("lock")},onMouseLeave:()=>{Da.current=window.setTimeout(()=>{wa(Ze=>Ze==="lock"?null:Ze)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Le,onChange:()=>{Ae(Ze=>!Ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Vias"})]}),i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:De,onChange:()=>{Ye(Ze=>!Ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Pads"})]}),i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:pt,onChange:()=>{mt(Ze=>!Ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Test Points"})]}),i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:_t,onChange:()=>{de(Ze=>!Ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Traces"})]}),i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:vt,onChange:()=>{zt(Ze=>!Ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Components"})]}),i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:kt,onChange:()=>{ot(Ze=>!Ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Ground Node"})]}),i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:sn,onChange:()=>{Ut(Ze=>!Ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Power Nodes"})]})]}),Fn=()=>i.jsxs("div",{onMouseEnter:()=>{Da.current&&(clearTimeout(Da.current),Da.current=null),wa("select")},onMouseLeave:()=>{Da.current=window.setTimeout(()=>{wa(Ze=>Ze==="select"?null:Ze)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{ht(),wa(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Vias"}),i.jsx("button",{onClick:()=>{St(),wa(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Traces"}),i.jsx("button",{onClick:()=>{Rn(),wa(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Pads"}),i.jsx("button",{onClick:()=>{const Ze=new Set(te.filter(vi=>vi.type==="testPoint").map(vi=>vi.id));Un(Ze),Ct(new Set),Mt(new Set),ri(new Set),wa(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Test Points"}),i.jsx("button",{onClick:()=>{Zt(),wa(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Components"}),i.jsx("button",{onClick:()=>{Tn(),wa(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Component Connections"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{ci.current&&(clearTimeout(ci.current),ci.current=null),ua("power")},onMouseLeave:()=>{ci.current=window.setTimeout(()=>{ua(Ze=>Ze==="power"?null:Ze)},200)},onClick:()=>{ua(Ze=>Ze==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Power Nodes "}),ol==="power"&&Fr("power")]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{ci.current&&(clearTimeout(ci.current),ci.current=null),ua("ground")},onMouseLeave:()=>{ci.current=window.setTimeout(()=>{ua(Ze=>Ze==="ground"?null:Ze)},200)},onClick:()=>{ua(Ze=>Ze==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Ground Nodes "}),ol==="ground"&&Fr("ground")]}),i.jsx("button",{onClick:()=>{_n(),wa(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Disconnected Components"})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{ref:Vn,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),n(vi=>vi==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:o==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),o==="file"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{a||(n(null),V()?D({visible:!0}):f())},disabled:a,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a?"not-allowed":"pointer"},children:"New Project"}),i.jsx("button",{onClick:async()=>{await b(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{a||Qn(()=>{S(),n(null)})},disabled:a||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||!u?"not-allowed":"pointer"},children:"Save Project"}),i.jsx("button",{onClick:()=>{a||Qn(()=>{R(),n(null)})},disabled:a||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||!u?"not-allowed":"pointer"},children:"Save As"}),i.jsx("button",{onClick:()=>{a||Qn(()=>{ve({visible:!0,interval:5}),n(null)})},disabled:a||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||!u?"not-allowed":"pointer"},children:"Auto Save"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Fi(!0),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Restore from History"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{dr.current&&(clearTimeout(dr.current),dr.current=null),Sa(!0)},onMouseLeave:()=>{dr.current=window.setTimeout(()=>{Sa(!1)},200)},onClick:Ze=>{Ze.stopPropagation(),Sa(!ql)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Settings "}),ql&&i.jsxs("div",{onMouseEnter:()=>{dr.current&&(clearTimeout(dr.current),dr.current=null),Sa(!0)},onMouseLeave:()=>{dr.current=window.setTimeout(()=>{Sa(!1)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("div",{style:{padding:"4px 8px",color:"#aaa",fontSize:"11px",fontWeight:600,textTransform:"uppercase",marginBottom:"4px"},children:"BOM Export Format"}),i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation(),L("pdf")},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",background:"transparent",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"radio",name:"bomFormat",checked:X==="pdf",onChange:()=>L("pdf"),style:{marginRight:"8px",cursor:"pointer",accentColor:"#4a9eff"}}),i.jsx("span",{children:"PDF"})]}),i.jsxs("label",{onClick:Ze=>{Ze.stopPropagation(),L("json")},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",background:"transparent",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"radio",name:"bomFormat",checked:X==="json",onChange:()=>L("json"),style:{marginRight:"8px",cursor:"pointer",accentColor:"#4a9eff"}}),i.jsx("span",{children:"JSON"})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"8px 0"}}),i.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),fr(!0),n(null),Sa(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Sizes"}),i.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),da(!0),n(null),Sa(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Colors"})]})]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:async()=>{if(!a){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),n(null);return}try{await T(),n(null)}catch(Ze){console.error("Error exporting BOM:",Ze)}}},disabled:a||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||!u?"not-allowed":"pointer"},children:"Export BOM"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Qn(()=>{q(),n(null)})},disabled:!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:u?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:u?"pointer":"not-allowed"},children:"Print"}),i.jsx("button",{onClick:()=>{Qn(()=>{q(),n(null)})},disabled:!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:u?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:u?"pointer":"not-allowed"},children:"Printer Settings"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:Ze=>{if(!a){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature.");return}Ze.stopPropagation(),n(vi=>vi==="transform"?null:"transform")}},disabled:a||!u,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:o==="transform"?"#eef3ff":"#fff",fontWeight:600,color:a||!u?"#999":"#222",cursor:a||!u?"not-allowed":"pointer",opacity:a||!u?.5:1},children:"Images "}),o==="transform"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{!a&&!I&&(he.current?.click(),n(null))},disabled:a||I,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||I?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||I?"not-allowed":"pointer"},children:"Load Top PCB"}),i.jsx("button",{onClick:()=>{!a&&!I&&(N.current?.click(),n(null))},disabled:a||I,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||I?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||I?"not-allowed":"pointer"},children:"Load Bottom PCB"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{I||(O(),n(null))},disabled:I,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:I?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:I?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ur(),n(null)},disabled:!se&&!ee||I,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!se&&!ee||I?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!se&&!ee||I?"not-allowed":"pointer"},children:"Transform Images"}),i.jsx("button",{onClick:()=>{I||(J("transform"),$(),n(null))},disabled:I||!se&&!ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:I||!se&&!ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:I||!se&&!ee?"not-allowed":"pointer"},children:"Reset Transform"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{F(Ze=>!Ze),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:I?"Unlock Images ":"Lock Images"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:Ze=>{if(!a){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature.");return}Ze.stopPropagation(),n(vi=>vi==="tools"?null:"tools")}},disabled:a||!u,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:o==="tools"?"#eef3ff":"#fff",fontWeight:600,color:a||!u?"#999":"#222",cursor:a||!u?"not-allowed":"pointer",opacity:a||!u?.5:1},children:"Tools "}),o==="tools"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{zo(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Change Perspective"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{re(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),i.jsx("button",{onClick:()=>{ie(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{Da.current&&(clearTimeout(Da.current),Da.current=null),wa("lock")},onMouseLeave:()=>{Da.current=window.setTimeout(()=>{wa(Ze=>Ze==="lock"?null:Ze)},200)},onClick:()=>{wa(Ze=>Ze==="lock"?null:"lock")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Lock "}),Gi==="lock"&&Wl()]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{Da.current&&(clearTimeout(Da.current),Da.current=null),wa("select")},onMouseLeave:()=>{Da.current=window.setTimeout(()=>{wa(Ze=>Ze==="select"?null:Ze)},200)},onClick:()=>{wa(Ze=>Ze==="select"?null:"select")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select "}),Gi==="select"&&Fn()]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Io(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Open Project Notes"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Wt(!0),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>{Vt(!0),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{bn(!0),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Designators"}),i.jsxs("button",{onClick:()=>{nn(!xn),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:[xn?" ":"   ","Show Trace Corner Dots"]})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),n(vi=>vi==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:o==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),o==="about"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 16px 0",color:"#f2f2f2",fontSize:"20px",fontWeight:700},children:"Worms: An Electronics Toolkit"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"About"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool useful for both reverse engineering and troubleshooting electronics by tracing and documenting circuit connections from PCB images. This application supports typical 2 to 4 layer PCBs and enables comprehensive PCB analysis and documentation."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"This tool can assist in troubleshooting by tracing circuits, holding contextual notes, comparing test results, and documenting findings during the debugging process."})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Technology"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"The application runs entirely client-side in the browser, to provide a responsive, interactive drawing experience with no backend server requirements."})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Features"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Tools & Shortcuts"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#f2f2f2"},children:[i.jsx("div",{children:i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Select"}),"  ",i.jsx("code",{children:"S"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Via"}),"  ",i.jsx("code",{children:"V"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Pad"}),"  ",i.jsx("code",{children:"P"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Test Point"}),"  ",i.jsx("code",{children:"Y"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Trace"}),"  ",i.jsx("code",{children:"T"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component"}),"  ",i.jsx("code",{children:"C"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component Properties"}),"  double-click component"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Resize Icons"}),"  ",i.jsx("code",{children:"+"})," / ",i.jsx("code",{children:"-"})]})]})}),i.jsx("div",{children:i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Power"}),"  ",i.jsx("code",{children:"B"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Ground"}),"  ",i.jsx("code",{children:"G"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Move (Pan)"}),"  ",i.jsx("code",{children:"H"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Magnify"}),"  ",i.jsx("code",{children:"M"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Set View"}),"  ",i.jsx("code",{children:"X"})," then ",i.jsx("code",{children:"0-9"})," to save view"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Recall View"}),"  ",i.jsx("code",{children:"0-9"})," to recall saved view"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Information Dialog"}),"  ",i.jsx("code",{children:"I"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Notes Dialog"}),"  ",i.jsx("code",{children:"N"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Project Notes / TODO"}),"  ",i.jsx("code",{children:"L"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Undo"}),"  ",i.jsx("code",{children:"Ctrl"})," + ",i.jsx("code",{children:"Z"})]})]})})]}),i.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#f2f2f2"},children:[i.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Arrow Keys"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Switch Perspective"}),"  ",i.jsx("code",{children:""})," / ",i.jsx("code",{children:""})," to switch between front/back view (when not in Image Transform mode)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Rotate Perspective"}),"  ",i.jsx("code",{children:""})," (counter-clockwise) / ",i.jsx("code",{children:""})," (clockwise) to rotate in 90 increments (when not in Image Transform mode)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Image Transformations"}),"  Arrow keys for scaling, rotating, and adjusting image transformations (when image is selected for transform)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components"]})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 20px"},children:[i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Image Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Load top and bottom PCB images"}),i.jsx("li",{children:"Image alignment and transformation"}),i.jsx("li",{children:"Transform modes: nudge, scale, rotate, slant, keystone"}),i.jsx("li",{children:"Horizontal and vertical flip controls"}),i.jsx("li",{children:"Brightness and contrast controls"}),i.jsx("li",{children:"Grayscale mode"}),i.jsx("li",{children:"Automated transparency slider"}),i.jsx("li",{children:"Board dimensions configuration"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Drawing Tools"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Draw copper traces (top and bottom layers)"}),i.jsx("li",{children:"Place vias for layer connections"}),i.jsx("li",{children:"Place component pads (SMD and through-hole)"}),i.jsx("li",{children:"Place test points for circuit testing"}),i.jsx("li",{children:"Place and annotate components"}),i.jsx("li",{children:"Place power and ground nodes"}),i.jsx("li",{children:"Erase tool for removing elements"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Layer Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"14 independent layers to manage PCB element types"}),i.jsx("li",{children:"Separate top and bottom layer support"}),i.jsx("li",{children:"Layer-specific color customization"}),i.jsx("li",{children:"Layer-specific size controls"}),i.jsx("li",{children:"Layer visibility toggles"}),i.jsx("li",{children:"Overlay view mode"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Component Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Component placement with pin counts"}),i.jsx("li",{children:"Pin connection tracking"}),i.jsx("li",{children:"Component type classification"}),i.jsx("li",{children:"Designator and value annotation"}),i.jsx("li",{children:"Component editor dialog"}),i.jsx("li",{children:"Find and center component"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Selection & Locking"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Select individual elements or groups"}),i.jsx("li",{children:"Select all vias, traces, pads, or components"}),i.jsx("li",{children:"Select power/ground nodes by name"}),i.jsx("li",{children:"Select disconnected components"}),i.jsx("li",{children:"Lock/unlock elements by type"}),i.jsx("li",{children:"Image locking for protection"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Power & Ground"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Multiple voltage power nodes"}),i.jsx("li",{children:"Power bus management"}),i.jsx("li",{children:"Ground node placement"}),i.jsx("li",{children:"Ground bus management"}),i.jsx("li",{children:"Node naming and organization"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Customization"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Customizable colors per layer"}),i.jsx("li",{children:"Adjustable brush/tool sizes"}),i.jsx("li",{children:"Size presets for common tools"}),i.jsx("li",{children:"Color palette management"}),i.jsx("li",{children:"Tool settings persistence"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Project Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Create, open, and save projects"}),i.jsx("li",{children:"Auto-save with configurable intervals"}),i.jsx("li",{children:"File history automatically saved in history subdirectory when Auto Save is enabled"}),i.jsx("li",{children:"Project Notes / TODO list with spreadsheet-like editing"}),i.jsx("li",{children:"Project file format (JSON)"}),i.jsx("li",{children:"Print functionality"}),i.jsx("li",{children:"Export to KiCad schematic format (future feature, not yet implemented)"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"View Controls"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Zoom in/out with mouse wheel"}),i.jsx("li",{children:"Pan view with hand tool"}),i.jsx("li",{children:"Zoom to fit"}),i.jsx("li",{children:"View mode switching (top/bottom/overlay)"}),i.jsx("li",{children:"Save up to 10 view locations (X + 0-9)"}),i.jsx("li",{children:"Recall saved views instantly (0-9 keys)"}),i.jsx("li",{children:"Change Perspective (Tools menu) - switch between top/bottom view and rotate all elements"}),i.jsx("li",{children:"Detailed information dialog"})]})]})]})]}),i.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:i.jsxs("p",{style:{margin:"0 0 8px 0",color:"#bbb",fontSize:"12px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to manage projects, the ",i.jsx("strong",{children:"Images"})," menu for image loading and transformation, and the ",i.jsx("strong",{children:"Tools"})," menu for selection, locking, and customization options."]})}),i.jsxs("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Future / TODO List"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"A searchable list of common components"}),i.jsx("li",{children:"Output schematics (perhaps as KiCad files)"}),i.jsx("li",{children:"Dynamic layers"}),i.jsx("li",{children:"Create a desktop version of this application using Electron"})]})]})]})})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:Ze=>{Ze.stopPropagation(),n(vi=>vi==="help"?null:"help")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:o==="help"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"Help "}),o==="help"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 16px 0",color:"#f2f2f2",fontSize:"20px",fontWeight:700},children:"Help: Typical Usage Steps"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 1: Create or Open a Project"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"New Project:"})," File  New Project. Choose a project name and location."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Open Project:"})," File  Open Project. Select an existing project file (.json)."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Auto-Save:"})," File  Auto Save  Enable to automatically save your work at regular intervals."]})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 2: Load PCB Images"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Load Top Image:"})," Images  Load Top Image. Select your top-side PCB photo (.png or .jpeg)."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Load Bottom Image:"})," Images  Load Bottom Image. Select your bottom-side PCB photo."]}),i.jsxs("li",{children:["Images are automatically copied to the ",i.jsx("code",{style:{background:"#1f1f24",padding:"2px 4px",borderRadius:3,color:"#fff"},children:"images/"})," subdirectory."]})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 3: Align and Transform Images"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Enter Transform Mode:"})," Images  Transform Images. Select which image (Top or Bottom) to transform."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Transform Operations:"})," Use Move, Nudge, Scale, Rotate, Slant, or Keystone to align images."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Image Adjustments:"})," Adjust brightness, contrast, sharpness, and grayscale as needed."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Flip Images:"})," Use horizontal or vertical flip if your images are mirrored."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Arrow Keys:"})," When transform tool is active, use arrow keys for precise adjustments."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Change Perspective:"})," Tools  Change Perspective (or press ",i.jsx("code",{children:"E"}),") to switch between top/bottom view or rotate all elements (images, components, traces) together by 90, 180, or 270."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Quick Perspective Switch:"})," Press ",i.jsx("code",{children:""})," or ",i.jsx("code",{children:""})," arrow keys (when not in Image Transform mode) to quickly switch between front/back view."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Quick Perspective Rotation:"})," Press ",i.jsx("code",{children:""})," (counter-clockwise) or ",i.jsx("code",{children:""})," (clockwise) arrow keys (when not in Image Transform mode) to rotate perspective in 90 increments."]})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 4: Set Board Dimensions"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Enter Dimensions:"})," Images  Enter Board Dimensions. Specify the actual physical dimensions of your PCB."]}),i.jsx("li",{children:"This helps ensure accurate measurements and scaling for your reverse engineering work."})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 5: Trace Connections"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Place Vias:"})," Click the Via tool (",i.jsx("code",{children:"V"}),") and click on the PCB where vias connect layers."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Place Pads:"})," Click the Pad tool (",i.jsx("code",{children:"P"}),") and mark component pad locations."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Place Test Points:"})," Click the Test Point tool (",i.jsx("code",{children:"Y"}),") to mark test points."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Draw Traces:"})," Click the Trace tool (",i.jsx("code",{children:"T"}),"), select Top or Bottom layer, then click to start a trace. Click again to add segments. Press ",i.jsx("code",{children:"Enter"})," or click outside to finish."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Snapping:"})," Traces automatically snap to nearby vias, pads, power nodes, and ground nodes."]})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 6: Place Components"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Place Component:"})," Click the Component tool (",i.jsx("code",{children:"C"}),"), select component type, then click on the PCB."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Edit Component:"})," Double-click a component to open the Component Editor dialog."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Set Properties:"})," Enter designator (e.g., R1, C2), value, and other component details."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Connect Pins:"})," Click on pads or vias to connect component pins to the circuit."]})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 7: Add Power and Ground Nodes"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Manage Power Buses:"})," Tools  Manage Power Buses to create and configure voltage buses (e.g., +5V, +3.3V)."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Place Power Nodes:"})," Click the Power tool (",i.jsx("code",{children:"B"}),"), select a voltage bus, then click on the PCB."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Manage Ground Buses:"})," Tools  Manage Ground Buses to configure ground connections."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Place Ground Nodes:"})," Click the Ground tool (",i.jsx("code",{children:"G"}),"), select a ground bus, then click on the PCB."]})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 8: Add Notes and Documentation"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Element Notes:"})," Press ",i.jsx("code",{children:"N"})," to open the Notes dialog for selected elements (vias, pads, traces, etc.)."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Project Notes:"})," Press ",i.jsx("code",{children:"L"})," to open Project Notes / TODO list for general project documentation."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Information Dialog:"})," Press ",i.jsx("code",{children:"I"})," to see detailed information about selected elements."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Find Elements:"})," Use the Find button in the Information dialog to center and highlight specific elements."]})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 9: Save Your Work"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Manual Save:"})," File  Save Project to save your work manually."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Auto-Save:"})," If enabled, your project is automatically saved at regular intervals."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"History:"})," Auto-saved versions are stored in the ",i.jsx("code",{style:{background:"#1f1f24",padding:"2px 4px",borderRadius:3,color:"#fff"},children:"history/"})," subdirectory."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Restore from History:"})," File  Restore from History to access previous versions."]})]})]}),i.jsxs("div",{style:{marginBottom:20,paddingTop:16,borderTop:"1px solid #444"},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Keyboard Shortcuts"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#f2f2f2"},children:[i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Drawing Tools"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Select"}),"  ",i.jsx("code",{children:"S"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Via"}),"  ",i.jsx("code",{children:"V"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Pad"}),"  ",i.jsx("code",{children:"P"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Test Point"}),"  ",i.jsx("code",{children:"Y"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Trace"}),"  ",i.jsx("code",{children:"T"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component"}),"  ",i.jsx("code",{children:"C"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Power"}),"  ",i.jsx("code",{children:"B"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Ground"}),"  ",i.jsx("code",{children:"G"})]})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"View & Navigation"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Move (Pan)"}),"  ",i.jsx("code",{children:"H"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Magnify"}),"  ",i.jsx("code",{children:"M"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Set View"}),"  ",i.jsx("code",{children:"X"})," then ",i.jsx("code",{children:"0-9"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Recall View"}),"  ",i.jsx("code",{children:"0-9"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Information"}),"  ",i.jsx("code",{children:"I"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Notes"}),"  ",i.jsx("code",{children:"N"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Project Notes"}),"  ",i.jsx("code",{children:"L"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Undo"}),"  ",i.jsx("code",{children:"Ctrl+Z"})," / ",i.jsx("code",{children:"Cmd+Z"})]})]})]})]}),i.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#f2f2f2"},children:[i.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Arrow Keys"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Switch Perspective"}),"  ",i.jsx("code",{children:""})," / ",i.jsx("code",{children:""})," (when not in Image Transform mode)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Rotate Perspective"}),"  ",i.jsx("code",{children:""})," (counter-clockwise) / ",i.jsx("code",{children:""})," (clockwise) to rotate in 90 increments (when not in Image Transform mode)"]}),i.jsx("li",{children:"Use arrow keys to adjust image transformations (when transform tool is active)"}),i.jsx("li",{children:"Use arrow keys to nudge selected components"}),i.jsx("li",{children:"Click a slider first, then use arrow keys for precise adjustment"})]})]})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Tips & Tricks"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Double-click any slider to reset it to the default value"}),i.jsx("li",{children:"Double-click a component to edit its properties"}),i.jsxs("li",{children:["Hold ",i.jsx("code",{children:"Shift"})," while clicking to add to selection"]}),i.jsxs("li",{children:["Use the Information dialog (",i.jsx("code",{children:"I"}),") to see details about selected elements"]}),i.jsx("li",{children:"Lock layers (Tools  Lock) to prevent accidental modifications"}),i.jsx("li",{children:"Use the Find button in the Information dialog to center elements in view"}),i.jsxs("li",{children:["Save views with ",i.jsx("code",{children:"X"})," + number key for quick navigation"]}),i.jsxs("li",{children:["Use ",i.jsx("code",{children:"+"})," and ",i.jsx("code",{children:"-"})," keys to resize tool icons"]})]})]}),i.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:i.jsxs("p",{style:{margin:"0 0 8px 0",color:"#bbb",fontSize:"12px",lineHeight:"1.5"},children:["For more detailed feature information, see the ",i.jsx("strong",{children:"About"})," menu."]})})]})})]}),s&&i.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:s,children:s}),i.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"1px solid #666",backgroundColor:g?d?"#ffaa00":"#ff0000":"#00ff00",flexShrink:0},title:g?d?`Changes detected  Auto Save: ON  Will be saved automatically every ${v||1} minute${v===1?"":"s"}`:"Changes detected  Auto Save: OFF  You need to save manually (File  Save Project)":"Project saved  No unsaved changes  Auto Save: "+(d?"ON":"OFF")})]})]}),i.jsx(_b,{visible:rl,toolRegistry:Mn,currentTool:Ao,drawingMode:rr,traceToolLayer:Go,padToolLayer:jt,testPointToolLayer:si,componentToolLayer:li,updateToolSettings:fn,updateToolLayerSettings:$t,setBrushSize:To,saveToolSettings:xo,saveToolLayerSettings:Co,setTopTraceSize:zi,setBottomTraceSize:bs,setTopPadSize:ko,setBottomPadSize:Hi,setTopTestPointSize:la,setBottomTestPointSize:ba,setTopComponentSize:No,setBottomComponentSize:Bn,setComponentConnectionSize:kr,saveDefaultSize:ur,onClose:()=>fr(!1)}),i.jsx(Lb,{visible:Ss,toolRegistry:Mn,currentTool:Ao,drawingMode:rr,traceToolLayer:Go,padToolLayer:jt,testPointToolLayer:si,componentToolLayer:li,updateToolSettings:fn,updateToolLayerSettings:$t,saveToolSettings:xo,saveToolLayerSettings:Co,setBrushColor:eo,setTopTraceColor:ws,setBottomTraceColor:yo,setTopPadColor:Ir,setBottomPadColor:ca,setTopTestPointColor:Hl,setBottomTestPointColor:Gn,setTopComponentColor:va,setBottomComponentColor:Es,setComponentConnectionColor:Xo,saveDefaultColor:Nr,colorPalette:Kt,onClose:()=>da(!1)})]})},Rb=({visible:o})=>o?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"1) Use the File menu to start a new project."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"2) Use the Images menu to load PCB photos."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5",textAlign:"left"},children:"3) Use the tools to draw vias, pads, traces, etc."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginTop:"16px",lineHeight:"1.5",textAlign:"left",fontWeight:"bold"},children:"Best viewed in browser's Full Screen Mode"})]}):null,Db=({visible:o,title:n,message:a,onClose:s})=>o?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:u=>{u.target===u.currentTarget&&s()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:u=>u.stopPropagation(),children:[i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),i.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:n})]}),i.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:a}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:i.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,Mb=({visible:o,selectedIds:n,selectedComponentIds:a,selectedPowerIds:s,selectedGroundIds:u,drawingStrokes:d,componentsTop:v,componentsBottom:g,powers:f,grounds:b,powerBuses:S,onClose:R,setComponentsTop:q,setComponentsBottom:T,determineViaType:V,determinePadType:X,determineTestPointType:L,onFindComponent:D,onFindStroke:ve,onFindPower:se,onFindGround:ee,position:J,isDragging:$,onDragStart:I,onOpenNotesDialog:F})=>{if(!o)return null;const O=J?{position:"fixed",left:`${J.x}px`,top:`${J.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:$?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},he={padding:"20px",overflow:"auto",flex:1};return i.jsxs("div",{style:O,children:[i.jsxs("div",{onMouseDown:N=>{const C=N.target;C.tagName==="BUTTON"||C.closest("button")||J&&I(N)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:$?"grabbing":J?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (I)"}),i.jsx("button",{onClick:R,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:he,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const N=d.filter(te=>n.has(te.id)).length,C=[...v,...g].filter(te=>a.has(te.id)).length,re=f.filter(te=>s.has(te.id)).length,ie=b.filter(te=>u.has(te.id)).length,fe=N+C+re+ie;return i.jsx("div",{style:{padding:"12px 16px",backgroundColor:fe>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:fe>0?"#333":"#856404",marginBottom:"8px"},children:fe>0?`${fe} Object${fe!==1?"s":""} Selected`:"Zero Objects Selected"})})(),a.size>0&&(()=>{const N=d.some(C=>n.has(C.id)&&(C.type==="via"||C.type==="pad"));return[...v,...g].filter(C=>a.has(C.id)).map(C=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:Wu(C.componentType)})]}),D&&i.jsx("button",{onClick:()=>{D(C.id,C.x,C.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:re=>{re.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:re=>{re.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Layer: ",C.layer]}),C.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[C.description&&i.jsxs("div",{children:["Description: ",C.description]}),C.icType&&i.jsxs("div",{children:["IC Type: ",C.icType]})]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:C.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("span",{children:["Designator: ",C.designator||"(empty)"]}),N&&i.jsx("button",{onClick:()=>{const re=[...v,...g].filter(U=>a.has(U.id)&&U.componentType===C.componentType),ie=re.length,fe=d.filter(U=>n.has(U.id)&&U.type==="pad"&&U.points.length>0&&U.points[0].id!==void 0).map(U=>{const A=U.points[0].id;if(A===void 0)throw new Error("Unexpected undefined id");return{stroke:U,nodeId:A}}).sort((U,A)=>U.nodeId-A.nodeId),te=fe.length>0?fe:d.filter(U=>n.has(U.id)&&U.type==="via"&&U.points.length>0&&U.points[0].id!==void 0).map(U=>{const A=U.points[0].id;if(A===void 0)throw new Error("Unexpected undefined id");return{stroke:U,nodeId:A}}).sort((U,A)=>U.nodeId-A.nodeId),ne=te.length;if(ne===0){console.warn("No vias or pads with Node IDs found in selection");return}const pe=Math.floor(ne/ie);if(pe===0){console.warn(`Not enough ${fe.length>0?"pads":"vias"} (${ne}) for ${ie} components`);return}[...re].sort((U,A)=>U.id.localeCompare(A.id)).forEach((U,A)=>{const E=A*pe,W=E+pe,Ce=te.slice(E,W).map(Le=>Le.nodeId.toString()),Te=i0(U,Ce,d);U.layer==="top"?q(Le=>Le.map(Ae=>{if(Ae.id===U.id){const De={...Ae,pinCount:pe,pinConnections:Ce};return Te&&(De.pinPolarities=Te),De}return Ae})):T(Le=>Le.map(Ae=>{if(Ae.id===U.id){const De={...Ae,pinCount:pe,pinConnections:Ce};return Te&&(De.pinPolarities=Te),De}return Ae}))});const me=fe.length>0?"pads":"vias";console.log(`Connected ${ie} components of type ${C.componentType} to ${ne} ${me} (${pe} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:re=>{re.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:re=>{re.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),i.jsxs("div",{children:["Abbreviation: ",C.abbreviation||"(empty)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:C.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:C.color})]}),i.jsxs("div",{children:["Size: ",C.size]}),i.jsxs("div",{children:["Pin Count: ",C.pinCount]}),C.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[C.resistance&&i.jsxs("div",{children:["Resistance: ",C.resistance]}),C.power&&i.jsxs("div",{children:["Power: ",C.power]}),C.tolerance&&i.jsxs("div",{children:["Tolerance: ",C.tolerance]})]}),C.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[C.capacitance&&i.jsxs("div",{children:["Capacitance: ",C.capacitance]}),C.voltage&&i.jsxs("div",{children:["Voltage: ",C.voltage]}),C.dielectric&&i.jsxs("div",{children:["Dielectric: ",C.dielectric]}),C.tolerance&&i.jsxs("div",{children:["Tolerance: ",C.tolerance]})]}),C.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[C.capacitance&&i.jsxs("div",{children:["Capacitance: ",C.capacitance]}),C.voltage&&i.jsxs("div",{children:["Voltage: ",C.voltage]}),C.tolerance&&i.jsxs("div",{children:["Tolerance: ",C.tolerance]}),C.polarity&&i.jsxs("div",{children:["Polarity: ",C.polarity]}),C.esr&&i.jsxs("div",{children:["ESR: ",C.esr]}),C.temperature&&i.jsxs("div",{children:["Temperature: ",C.temperature]})]}),C.pinConnections&&C.pinConnections.length>0&&(()=>{const re=C.componentType==="Electrolytic Capacitor"||C.componentType==="Diode"||C.componentType==="Battery"||C.componentType==="ZenerDiode",ie=C.componentType==="Capacitor"&&"dielectric"in C&&C.dielectric==="Tantalum",fe=re||ie;return i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),fe&&i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:C.pinConnections.map((te,ne)=>{const pe=C.pinPolarities&&C.pinPolarities.length>ne?C.pinPolarities[ne]:"";return i.jsxs("tr",{style:{backgroundColor:ne%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ne+1}),fe&&i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:pe==="+"?"#d32f2f":pe==="-"?"#1976d2":"#999"},children:pe||"-"}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:te||"(not connected)"})]},ne)})})]})]})})(),"manufacturer"in C&&C.manufacturer&&i.jsxs("div",{children:["Manufacturer: ",C.manufacturer]}),"partNumber"in C&&C.partNumber&&i.jsxs("div",{children:["Part Number: ",C.partNumber]}),C.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[C.diodeType&&i.jsxs("div",{children:["Type: ",C.diodeType]}),C.voltage&&i.jsxs("div",{children:["Voltage: ",C.voltage]}),C.current&&i.jsxs("div",{children:["Current: ",C.current]}),C.ledColor&&i.jsxs("div",{children:["LED Color: ",C.ledColor]})]}),C.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[C.voltage&&i.jsxs("div",{children:["Voltage: ",C.voltage]}),C.capacity&&i.jsxs("div",{children:["Capacity: ",C.capacity]}),C.chemistry&&i.jsxs("div",{children:["Chemistry: ",C.chemistry]})]}),C.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[C.current&&i.jsxs("div",{children:["Current: ",C.current]}),C.voltage&&i.jsxs("div",{children:["Voltage: ",C.voltage]}),C.fuseType&&i.jsxs("div",{children:["Type: ",C.fuseType]})]}),C.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[C.impedance&&i.jsxs("div",{children:["Impedance: ",C.impedance]}),C.current&&i.jsxs("div",{children:["Current: ",C.current]})]}),C.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[C.connectorType&&i.jsxs("div",{children:["Type: ",C.connectorType]}),C.gender&&i.jsxs("div",{children:["Gender: ",C.gender]})]}),C.componentType==="Jumper"&&i.jsx(i.Fragment,{children:C.positions&&i.jsxs("div",{children:["Positions: ",C.positions]})}),C.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[C.coilVoltage&&i.jsxs("div",{children:["Coil Voltage: ",C.coilVoltage]}),C.contactType&&i.jsxs("div",{children:["Contact Type: ",C.contactType]}),C.current&&i.jsxs("div",{children:["Current: ",C.current]})]}),C.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[C.inductance&&i.jsxs("div",{children:["Inductance: ",C.inductance]}),C.current&&i.jsxs("div",{children:["Current: ",C.current]}),C.resistance&&i.jsxs("div",{children:["DC Resistance: ",C.resistance]})]}),C.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[C.impedance&&i.jsxs("div",{children:["Impedance: ",C.impedance]}),C.power&&i.jsxs("div",{children:["Power: ",C.power]})]}),C.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[C.motorType&&i.jsxs("div",{children:["Type: ",C.motorType]}),C.voltage&&i.jsxs("div",{children:["Voltage: ",C.voltage]}),C.current&&i.jsxs("div",{children:["Current: ",C.current]})]}),C.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[C.inputVoltage&&i.jsxs("div",{children:["Input Voltage: ",C.inputVoltage]}),C.outputVoltage&&i.jsxs("div",{children:["Output Voltage: ",C.outputVoltage]}),C.current&&i.jsxs("div",{children:["Current: ",C.current]})]}),C.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[C.transistorType&&i.jsxs("div",{children:["Type: ",C.transistorType]}),C.polarity&&i.jsxs("div",{children:["Polarity: ",C.polarity]}),C.voltage&&i.jsxs("div",{children:["Voltage: ",C.voltage]}),C.current&&i.jsxs("div",{children:["Current: ",C.current]})]}),C.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[C.resistance&&i.jsxs("div",{children:["Resistance: ",C.resistance]}),C.configuration&&i.jsxs("div",{children:["Configuration: ",C.configuration]})]}),C.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[C.resistance&&i.jsxs("div",{children:["Resistance: ",C.resistance]}),C.thermistorType&&i.jsxs("div",{children:["Type: ",C.thermistorType]}),C.beta&&i.jsxs("div",{children:["Beta: ",C.beta]})]}),C.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[C.switchType&&i.jsxs("div",{children:["Type: ",C.switchType]}),C.current&&i.jsxs("div",{children:["Current: ",C.current]}),C.voltage&&i.jsxs("div",{children:["Voltage: ",C.voltage]})]}),C.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[C.primaryVoltage&&i.jsxs("div",{children:["Primary Voltage: ",C.primaryVoltage]}),C.secondaryVoltage&&i.jsxs("div",{children:["Secondary Voltage: ",C.secondaryVoltage]}),C.power&&i.jsxs("div",{children:["Power: ",C.power]}),C.turns&&i.jsxs("div",{children:["Turns Ratio: ",C.turns]})]}),C.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:C.signal&&i.jsxs("div",{children:["Signal: ",C.signal]})}),C.componentType==="IntegratedCircuit"&&i.jsx(i.Fragment,{children:C.datasheet&&i.jsxs("div",{children:["Datasheet: ",i.jsx("a",{href:C.datasheet,target:"_blank",rel:"noopener noreferrer",children:C.datasheet})]})}),C.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:C.tubeType&&i.jsxs("div",{children:["Type: ",C.tubeType]})}),C.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[C.vrType&&i.jsxs("div",{children:["Type: ",C.vrType]}),C.resistance&&i.jsxs("div",{children:["Resistance: ",C.resistance]}),C.power&&i.jsxs("div",{children:["Power: ",C.power]}),C.taper&&i.jsxs("div",{children:["Taper: ",C.taper]})]}),C.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[C.frequency&&i.jsxs("div",{children:["Frequency: ",C.frequency]}),C.loadCapacitance&&i.jsxs("div",{children:["Load Capacitance: ",C.loadCapacitance]}),C.tolerance&&i.jsxs("div",{children:["Tolerance: ",C.tolerance]})]}),C.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[C.voltage&&i.jsxs("div",{children:["Zener Voltage: ",C.voltage]}),C.power&&i.jsxs("div",{children:["Power: ",C.power]}),C.tolerance&&i.jsxs("div",{children:["Tolerance: ",C.tolerance]})]}),i.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:i.jsxs("div",{children:["Position: x=",C.x.toFixed(2),", y=",C.y.toFixed(2)]})})]})]},C.id))})(),n.size>0&&d.filter(N=>n.has(N.id)&&N.type==="via"&&N.points.length>0).map(N=>{const C=N.points[0],re=N.viaType||(C.id!==void 0?V(C.id,S):"Via");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:re})]}),ve&&i.jsx("button",{onClick:()=>{ve(N.id,C.x,C.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[C.id&&i.jsxs("div",{children:["Node ID: ",C.id]}),i.jsx("div",{children:"Layer: Top and Bottom"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:N.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:N.color})]}),i.jsxs("div",{children:["Size: ",N.size]}),i.jsxs("div",{children:["Position: x=",C.x.toFixed(2),", y=",C.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:N.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},N.id)}),n.size>0&&d.filter(N=>n.has(N.id)&&N.type==="pad"&&N.points.length>0).map(N=>{const C=N.points[0],re=N.padType||(C.id!==void 0?X(C.id,S):"Pad");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:re})]}),ve&&i.jsx("button",{onClick:()=>{ve(N.id,C.x,C.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[C.id&&i.jsxs("div",{children:["Node ID: ",C.id]}),i.jsxs("div",{children:["Layer: ",N.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:N.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:N.color})]}),i.jsxs("div",{children:["Size: ",N.size]}),i.jsxs("div",{children:["Position: x=",C.x.toFixed(2),", y=",C.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:N.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},N.id)}),n.size>0&&d.filter(N=>n.has(N.id)&&N.type==="testPoint"&&N.points.length>0).map(N=>{const C=N.points[0],re=C.id!==void 0?L(C.id,S):"Test Point";return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:re})]}),ve&&i.jsx("button",{onClick:()=>{ve(N.id,C.x,C.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[C.id&&i.jsxs("div",{children:["Node ID: ",C.id]}),i.jsxs("div",{children:["Layer: ",N.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:N.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:N.color})]}),i.jsxs("div",{children:["Size: ",N.size]}),i.jsxs("div",{children:["Position: x=",C.x.toFixed(2),", y=",C.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:N.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},N.id)}),n.size>0&&d.filter(N=>n.has(N.id)&&N.type==="trace").map(N=>{const C=N.points.length>0?N.points.reduce((ie,fe)=>ie+fe.x,0)/N.points.length:0,re=N.points.length>0?N.points.reduce((ie,fe)=>ie+fe.y,0)/N.points.length:0;return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:N.type||"unknown"})]}),ve&&N.points.length>0&&i.jsx("button",{onClick:()=>{ve(N.id,C,re)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[N.points.length>0&&i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",N.points.length]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:N.points.map((ie,fe)=>i.jsxs("tr",{style:{backgroundColor:fe%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:fe}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ie.x.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ie.y.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ie.id||"(none)"})]},fe))})]})]}),i.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",N.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:N.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:N.color})]}),i.jsxs("div",{children:["Size: ",N.size]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:N.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},N.id)}),s.size>0&&f.filter(N=>s.has(N.id)).map(N=>{const C=S.find(re=>re.id===N.powerBusId);return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:N.type||(C?`${C.name} Power Node`:"Power Node")})]}),se&&i.jsx("button",{onClick:()=>{se(N.id,N.x,N.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:re=>{re.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:re=>{re.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",N.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:N.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:N.color})]}),i.jsxs("div",{children:["Size: ",N.size]}),i.jsxs("div",{children:["Layer: ",N.layer]}),i.jsxs("div",{children:["Power Bus: ",C?.name||N.powerBusId||"(unknown)"]}),i.jsxs("div",{children:["Position: x=",N.x.toFixed(2),", y=",N.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:N.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},N.id)}),u.size>0&&b.filter(N=>u.has(N.id)).map(N=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:N.type||"Ground Node"})]}),ee&&i.jsx("button",{onClick:()=>{ee(N.id,N.x,N.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",N.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:N.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:N.color})]}),i.jsxs("div",{children:["Size: ",N.size]}),i.jsxs("div",{children:["Position: x=",N.x.toFixed(2),", y=",N.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:N.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},N.id))]})})]})},jo=200,Bb=({visible:o,selectedIds:n,selectedComponentIds:a,selectedPowerIds:s,selectedGroundIds:u,drawingStrokes:d,componentsTop:v,componentsBottom:g,powers:f,grounds:b,powerBuses:S,onClose:R,setComponentsTop:q,setComponentsBottom:T,setDrawingStrokes:V,setPowerSymbols:X,setGroundSymbols:L,determineViaType:D,determinePadType:ve,determineTestPointType:se,position:ee,isDragging:J,onDragStart:$})=>{const[I,F]=H.useState(new Map),O=H.useRef(""),he=()=>[...Array.from(n).sort(),...Array.from(a).sort(),...Array.from(s).sort(),...Array.from(u).sort()].join(",");if(H.useEffect(()=>{if(!o)return;const me=he();me!==O.current&&(O.current=me,F(U=>{const A=new Map;return[...v,...g].filter(E=>a.has(E.id)).forEach(E=>{const W=U.get(E.id);A.set(E.id,W!==void 0?W:E.notes||"")}),d.filter(E=>n.has(E.id)).forEach(E=>{const W=U.get(E.id);A.set(E.id,W!==void 0?W:E.notes||"")}),f.filter(E=>s.has(E.id)).forEach(E=>{const W=U.get(E.id);A.set(E.id,W!==void 0?W:E.notes||"")}),b.filter(E=>u.has(E.id)).forEach(E=>{const W=U.get(E.id);A.set(E.id,W!==void 0?W:E.notes||"")}),A}))},[o,n,a,s,u,d,v,g,f,b]),!o)return null;const N=ee?{position:"fixed",left:`${ee.x}px`,top:`${ee.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:J?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},C={padding:"20px",overflow:"auto",flex:1},re=d.filter(me=>n.has(me.id)).length,ie=[...v,...g].filter(me=>a.has(me.id)).length,fe=f.filter(me=>s.has(me.id)).length,te=b.filter(me=>u.has(me.id)).length,ne=re+ie+fe+te,pe=(me,U)=>{const A=U.length>jo?U.substring(0,jo):U;F(E=>{const W=new Map(E);return W.set(me,A),W})},Ne=()=>{q(me=>me.map(U=>{if(a.has(U.id)&&I.has(U.id)){const A=I.get(U.id)||"";return{...U,notes:A.trim()===""?null:A.trim()}}return U})),T(me=>me.map(U=>{if(a.has(U.id)&&I.has(U.id)){const A=I.get(U.id)||"";return{...U,notes:A.trim()===""?null:A.trim()}}return U})),V(me=>me.map(U=>{if(n.has(U.id)&&I.has(U.id)){const A=I.get(U.id)||"";return{...U,notes:A.trim()===""?null:A.trim()}}return U})),X(me=>me.map(U=>{if(s.has(U.id)&&I.has(U.id)){const A=I.get(U.id)||"";return{...U,notes:A.trim()===""?null:A.trim()}}return U})),L(me=>me.map(U=>{if(u.has(U.id)&&I.has(U.id)){const A=I.get(U.id)||"";return{...U,notes:A.trim()===""?null:A.trim()}}return U}))};return i.jsxs("div",{style:N,children:[i.jsxs("div",{onMouseDown:me=>{const U=me.target;U.tagName==="BUTTON"||U.closest("button")||ee&&$(me)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:J?"grabbing":ee?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (N)"}),i.jsx("button",{onClick:R,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:C,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[i.jsx("div",{style:{padding:"12px 16px",backgroundColor:ne>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:ne>0?"#333":"#856404",marginBottom:"8px"},children:ne>0?`${ne} Object${ne!==1?"s":""} Selected`:"Zero Objects Selected"}),ne===0?i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):i.jsxs(i.Fragment,{children:[[...v,...g].filter(me=>a.has(me.id)).map(me=>{const U=I.get(me.id)||"",A=U.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsxs("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:[Wu(me.componentType),me.designator&&me.designator.trim()?` (${me.designator.trim()})`:""]})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:U,onChange:E=>pe(me.id,E.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:A>=jo?"#d32f2f":"#666",textAlign:"right"},children:[A," / ",jo]})]})]},me.id)}),d.filter(me=>n.has(me.id)&&me.type==="via"&&me.points.length>0).map(me=>{const U=me.points[0],A=me.viaType||(U.id!==void 0?D(U.id,S):"Via"),E=I.get(me.id)||"",W=E.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:U.id&&i.jsxs("div",{children:["Node ID: ",U.id]})}),i.jsx("textarea",{value:E,onChange:xe=>pe(me.id,xe.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:W>=jo?"#d32f2f":"#666",textAlign:"right"},children:[W," / ",jo]})]})]},me.id)}),d.filter(me=>n.has(me.id)&&me.type==="pad"&&me.points.length>0).map(me=>{const U=me.points[0],A=me.padType||(U.id!==void 0?ve(U.id,S):"Pad"),E=I.get(me.id)||"",W=E.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:U.id&&i.jsxs("div",{children:["Node ID: ",U.id]})}),i.jsx("textarea",{value:E,onChange:xe=>pe(me.id,xe.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:W>=jo?"#d32f2f":"#666",textAlign:"right"},children:[W," / ",jo]})]})]},me.id)}),d.filter(me=>n.has(me.id)&&me.type==="testPoint"&&me.points.length>0).map(me=>{const U=me.points[0],A=U.id!==void 0?se(U.id,S):"Test Point",E=I.get(me.id)||"",W=E.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:U.id&&i.jsxs("div",{children:["Node ID: ",U.id]})}),i.jsx("textarea",{value:E,onChange:xe=>pe(me.id,xe.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:W>=jo?"#d32f2f":"#666",textAlign:"right"},children:[W," / ",jo]})]})]},me.id)}),d.filter(me=>n.has(me.id)&&me.type==="trace").map(me=>{const U=I.get(me.id)||"",A=U.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:me.type||"unknown"})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:U,onChange:E=>pe(me.id,E.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:A>=jo?"#d32f2f":"#666",textAlign:"right"},children:[A," / ",jo]})]})]},me.id)}),f.filter(me=>s.has(me.id)).map(me=>{const U=S.find(xe=>xe.id===me.powerBusId),A=me.type||(U?`${U.name} Power Node`:"Power Node"),E=I.get(me.id)||"",W=E.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",me.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:E,onChange:xe=>pe(me.id,xe.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:W>=jo?"#d32f2f":"#666",textAlign:"right"},children:[W," / ",jo]})]})]},me.id)}),b.filter(me=>u.has(me.id)).map(me=>{const U=me.type||"Ground Node",A=I.get(me.id)||"",E=A.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:U})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",me.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:A,onChange:W=>pe(me.id,W.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:E>=jo?"#d32f2f":"#666",textAlign:"right"},children:[E," / ",jo]})]})]},me.id)}),i.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[i.jsx("button",{onClick:R,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:me=>{me.currentTarget.style.backgroundColor="#616161"},onMouseLeave:me=>{me.currentTarget.style.backgroundColor="#757575"},children:"Close"}),i.jsx("button",{onClick:Ne,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:me=>{me.currentTarget.style.backgroundColor="#1976D2"},onMouseLeave:me=>{me.currentTarget.style.backgroundColor="#2196F3"},children:"Save"})]})]})]})})]})},Eb=({visible:o,projectNotes:n,setProjectNotes:a,onClose:s,position:u,isDragging:d,onDragStart:v})=>{const[g,f]=H.useState([]),[b,S]=H.useState(null),[R,q]=H.useState(null),T=H.useRef(new Map),[V,X]=H.useState({width:Math.min(window.innerWidth*.85,1400),height:window.innerHeight*.7}),[L,D]=H.useState(!1),[ve,se]=H.useState({x:0,y:0,width:0,height:0});H.useEffect(()=>{o&&(f([...n]),S(null),q(null))},[o,n]),H.useEffect(()=>{if(!L)return;const fe=ne=>{const pe=ne.clientX-ve.x,Ne=ne.clientY-ve.y,me=Math.max(400,Math.min(window.innerWidth-20,ve.width+pe)),U=Math.max(300,Math.min(window.innerHeight-20,ve.height+Ne));X({width:me,height:U})},te=()=>{D(!1)};return document.addEventListener("mousemove",fe),document.addEventListener("mouseup",te),()=>{document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",te)}},[L,ve]);const ee=fe=>{fe.preventDefault(),fe.stopPropagation(),D(!0),se({x:fe.clientX,y:fe.clientY,width:V.width,height:V.height})};if(!o)return null;const J=()=>{const fe={name:"",value:"",checked:!1};f([...g,fe]),S(g.length),q("name")},$=fe=>{const te=g.filter((ne,pe)=>pe!==fe);f(te),b===fe?(S(null),q(null)):b!==null&&b>fe&&S(b-1)},I=()=>{const fe=g.filter(te=>te.name.trim()!==""||te.value.trim()!=="");a(fe),s()},F=()=>{f([...n]),S(null),q(null),s()},O=(fe,te,ne)=>{const pe=[...g];pe[fe]={...pe[fe],[te]:ne},f(pe)},he=(fe,te)=>{const ne=[...g];ne[fe]={...ne[fe],checked:te},f(ne)},N=(fe,te,ne)=>{fe.stopPropagation();const pe=fe.currentTarget,Ne=pe.selectionStart,me=pe.value.length,U=pe.selectionStart!==pe.selectionEnd;if(!(fe.key==="Enter"&&fe.altKey)){if(fe.key==="ArrowRight"&&!fe.ctrlKey&&!fe.shiftKey&&!fe.altKey){if(Ne===me&&!U&&ne==="name"){fe.preventDefault();const A=`${te}-value`,E=T.current.get(A);E&&(E.focus(),E.setSelectionRange(0,0))}return}if(fe.key==="ArrowLeft"&&!fe.ctrlKey&&!fe.shiftKey&&!fe.altKey){if(Ne===0&&!U&&ne==="value"){fe.preventDefault();const A=`${te}-name`,E=T.current.get(A);E&&(E.focus(),E.setSelectionRange(E.value.length,E.value.length))}return}if(fe.key==="ArrowDown"&&!fe.ctrlKey&&!fe.shiftKey&&!fe.altKey){if(fe.preventDefault(),te<g.length-1){const A=`${te+1}-${ne}`,E=T.current.get(A);if(E){E.focus();const W=Math.min(Ne,E.value.length);E.setSelectionRange(W,W)}}else{const A=g.length;J(),setTimeout(()=>{const E=`${A}-${ne}`,W=T.current.get(E);W&&(W.focus(),W.setSelectionRange(0,0))},0)}return}if(fe.key==="ArrowUp"&&!fe.ctrlKey&&!fe.shiftKey&&!fe.altKey){if(fe.preventDefault(),te>0){const A=`${te-1}-${ne}`,E=T.current.get(A);if(E){E.focus();const W=Math.min(Ne,E.value.length);E.setSelectionRange(W,W)}}return}if(fe.key==="Enter"&&!fe.altKey&&!fe.shiftKey){if(fe.preventDefault(),ne==="name"){const A=`${te}-value`,E=T.current.get(A);E&&(E.focus(),E.setSelectionRange(0,0))}else if(ne==="value")if(te<g.length-1){const A=`${te+1}-name`,E=T.current.get(A);E&&(E.focus(),E.setSelectionRange(0,0))}else{const A=g.length;J(),setTimeout(()=>{const E=`${A}-name`,W=T.current.get(E);W&&(W.focus(),W.setSelectionRange(0,0))},0)}return}if(fe.key==="Tab"&&!fe.shiftKey){if(fe.preventDefault(),ne==="name"){const A=`${te}-value`,E=T.current.get(A);E&&(E.focus(),E.select())}else if(ne==="value")if(te<g.length-1){const A=`${te+1}-name`,E=T.current.get(A);E&&(E.focus(),E.select())}else{const A=g.length;J(),setTimeout(()=>{const E=`${A}-name`,W=T.current.get(E);W&&W.focus()},0)}return}if(fe.key==="Tab"&&fe.shiftKey){if(fe.preventDefault(),ne==="value"){const A=`${te}-name`,E=T.current.get(A);E&&(E.focus(),E.select())}else if(ne==="name"&&te>0){const A=`${te-1}-value`,E=T.current.get(A);E&&(E.focus(),E.select())}return}}},C=(fe,te)=>{S(fe),q(te)},re=()=>{},ie={position:"fixed",top:u?.y??100,left:u?.x??(window.innerWidth-V.width)/2,width:`${V.width}px`,height:`${V.height}px`,backgroundColor:"#fff",borderRadius:8,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:d?"grabbing":"default",overflow:"hidden"};return i.jsxs("div",{style:ie,children:[i.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e0e0e0",background:"#888",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none"},onMouseDown:v,children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Project Notes / TODO List (L)"}),i.jsx("button",{onClick:F,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),i.jsxs("div",{className:"project-notes-content",style:{padding:0,flex:1,overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",minHeight:0,scrollbarWidth:"thin",scrollbarColor:"#888 #f0f0f0"},children:[i.jsxs("div",{style:{border:"none",borderTop:"1px solid #ccc",borderRadius:0,overflow:"visible",marginBottom:"16px",backgroundColor:"#e0e0e0",flexShrink:0},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",backgroundColor:"#e0e0e0",borderBottom:"1px solid #ccc",position:"sticky",top:0,zIndex:10},children:[i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:i.jsx("label",{className:"radio-label",style:{margin:0,cursor:"default"},children:i.jsx("input",{type:"checkbox",disabled:!0,style:{opacity:.5}})})}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Item"}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Notes"}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",color:"#000"}})]}),i.jsx("div",{children:g.length===0?i.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:'No notes. Click "Add Note" to create one.'}):g.map((fe,te)=>i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",borderBottom:"1px solid #ccc",backgroundColor:"#fff"},children:[i.jsx("div",{style:{padding:"8px 12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("label",{className:"radio-label",style:{margin:0,cursor:"pointer"},children:i.jsx("input",{type:"checkbox",checked:fe.checked||!1,onChange:ne=>he(te,ne.target.checked)})})}),i.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:i.jsx("textarea",{ref:ne=>{ne?T.current.set(`${te}-name`,ne):T.current.delete(`${te}-name`)},value:fe.name,onChange:ne=>O(te,"name",ne.target.value),onFocus:()=>C(te,"name"),onBlur:re,onKeyDown:ne=>N(ne,te,"name"),placeholder:"Item name...",rows:1,style:{width:"100%",padding:"4px 6px",border:b===te&&R==="name"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:ne=>{const pe=ne.target;pe.style.height="auto",pe.style.height=`${pe.scrollHeight}px`}})}),i.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:i.jsx("textarea",{ref:ne=>{ne?T.current.set(`${te}-value`,ne):T.current.delete(`${te}-value`)},value:fe.value,onChange:ne=>O(te,"value",ne.target.value),onFocus:()=>C(te,"value"),onBlur:re,onKeyDown:ne=>N(ne,te,"value"),placeholder:"Notes...",rows:1,style:{width:"100%",padding:"4px 6px",border:b===te&&R==="value"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:ne=>{const pe=ne.target;pe.style.height="auto",pe.style.height=`${pe.scrollHeight}px`}})}),i.jsx("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("button",{onClick:()=>$(te),style:{background:"#f44336",color:"#fff",border:"none",borderRadius:3,padding:"4px 8px",cursor:"pointer",fontSize:"11px"},title:"Delete note",children:"Delete"})})]},te))})]}),i.jsx("div",{style:{padding:"16px",flexShrink:0},children:i.jsx("button",{onClick:J,style:{background:"#888",color:"#fff",border:"none",borderRadius:4,padding:"8px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500,alignSelf:"flex-start"},children:"+ Add Note"})})]}),i.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px",flexShrink:0},children:[i.jsx("button",{onClick:F,style:{background:"#f5f5f5",color:"#000",border:"1px solid #ddd",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),i.jsx("button",{onClick:I,style:{background:"#0b5fff",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500},children:"Save"})]}),i.jsx("div",{onMouseDown:ee,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:10001},title:"Drag to resize"})]})},Ob=({visible:o,dimensions:n,onSave:a,onClose:s})=>{const[u,d]=H.useState(""),[v,g]=H.useState(""),[f,b]=H.useState("inches");H.useEffect(()=>{o&&n?(d(n.width.toString()),g(n.height.toString()),b(n.unit)):o&&(d(""),g(""),b("inches"))},[o,n]);const S=()=>{const q=parseFloat(u),T=parseFloat(v);if(isNaN(q)||q<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(T)||T<=0){alert("Please enter a valid height greater than 0");return}a({width:q,height:T,unit:f}),s()},R=()=>{s()};return o?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:q=>{q.target===q.currentTarget&&R()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:q=>q.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:u,onChange:q=>d(q.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:f,onChange:q=>b(q.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:v,onChange:q=>g(q.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:f,onChange:q=>b(q.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:R,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),i.jsx("button",{onClick:S,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},Ib=({visible:o,onClose:n,topImage:a,bottomImage:s,selectedImageForTransform:u,setSelectedImageForTransform:d,transformMode:v,setTransformMode:g,updateImageTransform:f,resetImageTransform:b,setCurrentTool:S,isGrayscale:R,setIsGrayscale:q,areImagesLocked:T})=>{const[V,X]=H.useState(null),[L,D]=H.useState(!1),ve=H.useRef({x:0,y:0}),se=H.useRef(null);H.useEffect(()=>{o&&V===null&&X({x:window.innerWidth-320-20,y:80})},[o,V]),H.useEffect(()=>{o||X(null)},[o]);const ee=H.useCallback(W=>{if(se.current){const xe=se.current.getBoundingClientRect();ve.current={x:W.clientX-xe.left,y:W.clientY-xe.top},D(!0)}},[]);if(H.useEffect(()=>{if(!L)return;const W=Ce=>{const Te=Ce.clientX-ve.current.x,Le=Ce.clientY-ve.current.y,Ae=se.current?.offsetWidth||320,De=se.current?.offsetHeight||600,Ye=Math.max(0,Math.min(Te,window.innerWidth-Ae)),pt=Math.max(0,Math.min(Le,window.innerHeight-De));X({x:Ye,y:pt})},xe=()=>{D(!1)};return document.addEventListener("mousemove",W),document.addEventListener("mouseup",xe),()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",xe)}},[L]),!o)return null;const J=a!==null,$=s!==null,I=J||$,F=J&&$,O=u||(J?"top":$?"bottom":null),he=()=>O==="top"&&a?a.brightness??100:O==="bottom"&&s?s.brightness??100:O==="both"&&a?a.brightness??100:100,N=()=>O==="top"&&a?a.contrast??100:O==="bottom"&&s?s.contrast??100:O==="both"&&a?a.contrast??100:100,C=he(),re=N(),ie=!I||T,fe=()=>{if(!(!O||ie))if(O==="both"){const W=!a?.flipX;f("both",{flipX:W})}else{const W=O==="top"?a?.flipX||!1:s?.flipX||!1;f(O,{flipX:!W})}},te=()=>{if(!(!O||ie))if(O==="both"){const W=!a?.flipY;f("both",{flipY:W})}else{const W=O==="top"?a?.flipY||!1:s?.flipY||!1;f(O,{flipY:!W})}},ne=W=>{ie||(O&&d(O),g(W),S("transform"))},pe=W=>{!O||ie||f(O,{brightness:W})},Ne=W=>{!O||ie||f(O,{contrast:W})},me=()=>{ie||(O&&d(O),S("transform"),q(!R))},U=()=>{ie||(S("transform"),b())},A=(W,xe=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:W?"#666":"#f2f2f2",background:xe?"#3a3a42":"transparent",border:"none",borderRadius:4,cursor:W?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"}),E=(W,xe)=>({display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",color:W?"#666":"#f2f2f2",cursor:W?"not-allowed":"pointer",fontSize:"13px",background:xe?"#3a3a42":"transparent",borderRadius:4,transition:"background 0.15s"});return i.jsxs("div",{ref:se,style:{position:"fixed",top:V?.y??80,left:V?.x??window.innerWidth-340,backgroundColor:"#2b2b31",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24",zIndex:10001},children:[i.jsxs("div",{onMouseDown:ee,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(to bottom, #3a3a42, #2b2b31)",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottom:"1px solid #1f1f24",cursor:L?"grabbing":"grab",userSelect:"none"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{style:{color:"#888",fontSize:"14px"},children:""}),i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#f2f2f2"},children:"Transform Images"})]}),i.jsx("button",{onClick:n,style:{background:"transparent",border:"none",color:"#888",fontSize:"16px",cursor:"pointer",padding:"2px 6px",lineHeight:1,borderRadius:4},onMouseEnter:W=>{W.currentTarget.style.background="#444",W.currentTarget.style.color="#fff"},onMouseLeave:W=>{W.currentTarget.style.background="transparent",W.currentTarget.style.color="#888"},children:""})]}),i.jsxs("div",{style:{padding:"16px"},children:[i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"Apply to:"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsxs("label",{style:E(!J,O==="top"),children:[i.jsx("input",{type:"radio",name:"imageSelection",checked:O==="top",onChange:()=>d("top"),disabled:!J,style:{accentColor:"#6b9fff"}}),"Top Image",!J&&i.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),i.jsxs("label",{style:E(!$,O==="bottom"),children:[i.jsx("input",{type:"radio",name:"imageSelection",checked:O==="bottom",onChange:()=>d("bottom"),disabled:!$,style:{accentColor:"#6b9fff"}}),"Bottom Image",!$&&i.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),i.jsxs("label",{style:E(!F,O==="both"),children:[i.jsx("input",{type:"radio",name:"imageSelection",checked:O==="both",onChange:()=>d("both"),disabled:!F,style:{accentColor:"#6b9fff"}}),"Both Images",!F&&i.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(need both)"})]})]})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("button",{onClick:fe,disabled:ie,style:A(ie),onMouseEnter:W=>!ie&&(W.currentTarget.style.background="#3a3a42"),onMouseLeave:W=>W.currentTarget.style.background="transparent",children:"Horizontal Flip"}),i.jsx("button",{onClick:te,disabled:ie,style:A(ie),onMouseEnter:W=>!ie&&(W.currentTarget.style.background="#3a3a42"),onMouseLeave:W=>W.currentTarget.style.background="transparent",children:"Vertical Flip"})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsx("div",{style:{marginBottom:"12px"},children:["nudge","scale","rotate","slant","keystone"].map(W=>i.jsxs("button",{onClick:()=>ne(W),disabled:ie,style:A(ie,v===W),onMouseEnter:xe=>!ie&&v!==W&&(xe.currentTarget.style.background="#3a3a42"),onMouseLeave:xe=>v!==W&&(xe.currentTarget.style.background="transparent"),children:[v===W?" ":"","Mode: ",W.charAt(0).toUpperCase()+W.slice(1)]},W))}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[i.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Brightness"}),i.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[C,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:C,onChange:W=>pe(parseInt(W.target.value,10)),disabled:ie,style:{width:"100%",cursor:ie?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[i.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Contrast"}),i.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[re,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:re,onChange:W=>Ne(parseInt(W.target.value,10)),disabled:ie,style:{width:"100%",cursor:ie?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsx("div",{style:{marginBottom:"12px"},children:i.jsxs("button",{onClick:me,disabled:ie,style:A(ie,R),onMouseEnter:W=>!ie&&!R&&(W.currentTarget.style.background="#3a3a42"),onMouseLeave:W=>!R&&(W.currentTarget.style.background="transparent"),children:[R?" ":"","Grayscale Mode"]})}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:[i.jsx("button",{onClick:U,disabled:ie,style:{padding:"8px 16px",background:ie?"#444":"#555",color:ie?"#777":"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:ie?"not-allowed":"pointer",fontSize:"13px",fontWeight:500},children:"Reset Transform"}),i.jsx("button",{onClick:n,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:W=>W.currentTarget.style.background="#3a8ee6",onMouseLeave:W=>W.currentTarget.style.background="#4a9eff",children:"Close"})]}),T&&i.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",background:"#3d2b2b",border:"1px solid #5a3a3a",borderRadius:4,fontSize:"12px",color:"#e88"},children:" Images are locked. Unlock via Images  Lock Images to make changes."})]})]})},Ub=({visible:o,onClose:n,topImage:a,bottomImage:s,setTopImage:u,setBottomImage:d,componentsTop:v,componentsBottom:g,setComponentsTop:f,setComponentsBottom:b,drawingStrokes:S,setDrawingStrokes:R,powerSymbols:q,groundSymbols:T,setPowerSymbols:V,setGroundSymbols:X,canvasRef:L,isBottomView:D,setIsBottomView:ve,originalTopFlipX:se,setOriginalTopFlipX:ee,originalBottomFlipX:J,setOriginalBottomFlipX:$,originalTopFlipY:I,setOriginalTopFlipY:F,originalBottomFlipY:O,setOriginalBottomFlipY:he,cameraWorldCenter:N,setCameraWorldCenter:C,viewScale:re,contentBorder:ie})=>{const[fe,te]=H.useState(null),[ne,pe]=H.useState(!1),Ne=H.useRef({x:0,y:0}),me=H.useRef(null);H.useEffect(()=>{o&&fe===null&&te({x:window.innerWidth-320-20,y:80})},[o,fe]),H.useEffect(()=>{o||te(null)},[o]);const U=H.useCallback(Te=>{if(me.current){const Le=me.current.getBoundingClientRect();Ne.current={x:Te.clientX-Le.left,y:Te.clientY-Le.top},pe(!0)}},[]);H.useEffect(()=>{if(!ne)return;const Te=Ae=>{const De=Ae.clientX-Ne.current.x,Ye=Ae.clientY-Ne.current.y,pt=me.current?.offsetWidth||320,mt=me.current?.offsetHeight||400,_t=Math.max(0,Math.min(De,window.innerWidth-pt)),de=Math.max(0,Math.min(Ye,window.innerHeight-mt));te({x:_t,y:de})},Le=()=>{pe(!1)};return document.addEventListener("mousemove",Te),document.addEventListener("mouseup",Le),()=>{document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",Le)}},[ne]);const A=()=>a?{x:a.x,y:a.y}:s?{x:s.x,y:s.y}:{x:0,y:0},E=H.useCallback(()=>{if(D)return;const Le=A().x,Ae=De=>{if(!De)return null;const Ye=(De.rotation||0)%360,pt=Ye<0?Ye+360:Ye,mt=1;if(pt>=0&&pt<mt||pt>=180-mt&&pt<180+mt||pt>=360-mt)return{...De,flipX:!De.flipX};if(pt>=90-mt&&pt<90+mt||pt>=270-mt&&pt<270+mt)return{...De,flipY:!De.flipY};{const _t=pt*Math.PI/180,de=Math.cos(_t),vt=Math.sin(_t),zt=de,kt=-vt;return Math.abs(zt)>Math.abs(kt)?{...De,flipX:!De.flipX}:{...De,flipY:!De.flipY}}};if(a?(ee(a.flipX||!1),F(a.flipY||!1),u(De=>De?Ae(De):null)):(ee(null),F(null)),s){$(s.flipX||!1),he(s.flipY||!1);const De=Ae(s);De&&d({...De,x:Le-(s.x-Le)})}else $(null),he(null);f(De=>De.map(Ye=>({...Ye,x:Le-(Ye.x-Le),orientation:Ye.orientation?(360-Ye.orientation)%360:0}))),b(De=>De.map(Ye=>({...Ye,x:Le-(Ye.x-Le),orientation:Ye.orientation?(360-Ye.orientation)%360:0}))),R(De=>De.map(Ye=>({...Ye,points:Ye.points.map(pt=>({...pt,x:Le-(pt.x-Le)}))}))),V(De=>De.map(Ye=>({...Ye,x:Le-(Ye.x-Le),flipX:!Ye.flipX}))),X(De=>De.map(Ye=>({...Ye,x:Le-(Ye.x-Le),flipX:!Ye.flipX}))),C(De=>({x:Le-(De.x-Le),y:De.y})),ve(!0)},[D,a,s,u,d,f,b,R,V,X,L,ee,$,F,he,N,C,re,ie]),W=H.useCallback(()=>{if(!D)return;const Le=A().x,Ae=De=>{if(!De)return null;const Ye=(De.rotation||0)%360,pt=Ye<0?Ye+360:Ye,mt=1;if(pt>=0&&pt<mt||pt>=180-mt&&pt<180+mt||pt>=360-mt)return{...De,flipX:!De.flipX};if(pt>=90-mt&&pt<90+mt||pt>=270-mt&&pt<270+mt)return{...De,flipY:!De.flipY};{const _t=pt*Math.PI/180,de=Math.cos(_t),vt=Math.sin(_t),zt=de,kt=-vt;return Math.abs(zt)>Math.abs(kt)?{...De,flipX:!De.flipX}:{...De,flipY:!De.flipY}}};if(a&&u(De=>De?Ae(De):null),s){const De=Ae(s);De&&d({...De,x:Le-(s.x-Le)})}f(De=>De.map(Ye=>({...Ye,x:Le-(Ye.x-Le),orientation:Ye.orientation?(360-Ye.orientation)%360:0}))),b(De=>De.map(Ye=>({...Ye,x:Le-(Ye.x-Le),orientation:Ye.orientation?(360-Ye.orientation)%360:0}))),R(De=>De.map(Ye=>({...Ye,points:Ye.points.map(pt=>({...pt,x:Le-(pt.x-Le)}))}))),V(De=>De.map(Ye=>({...Ye,x:Le-(Ye.x-Le),flipX:!Ye.flipX}))),X(De=>De.map(Ye=>({...Ye,x:Le-(Ye.x-Le),flipX:!Ye.flipX}))),C(De=>({x:Le-(De.x-Le),y:De.y})),ve(!1)},[D,a,s,u,d,f,b,R,V,X,L,se,J,I,O,N,C,re,ie]),xe=H.useCallback(Te=>{const Le=A(),Ae=Le.x,De=Le.y,Ye=Te*Math.PI/180,pt=Math.cos(Ye),mt=Math.sin(Ye),_t=(vt,zt)=>{const kt=vt-Ae,ot=zt-De;return{x:Ae+kt*pt-ot*mt,y:De+kt*mt+ot*pt}};if(a){const vt=_t(a.x,a.y),zt=((a.rotation||0)+Te)%360;u(kt=>kt?{...kt,x:vt.x,y:vt.y,rotation:zt}:null)}if(s){const vt=_t(s.x,s.y),zt=((s.rotation||0)+Te)%360;d(kt=>kt?{...kt,x:vt.x,y:vt.y,rotation:zt}:null)}const de=_t(N.x,N.y);C(de),f(vt=>vt.map(zt=>{const kt=_t(zt.x,zt.y),ot=zt.orientation?(zt.orientation+Te)%360:Te;return{...zt,x:kt.x,y:kt.y,orientation:ot}})),b(vt=>vt.map(zt=>{const kt=_t(zt.x,zt.y),ot=zt.orientation?(zt.orientation+Te)%360:Te;return{...zt,x:kt.x,y:kt.y,orientation:ot}})),R(vt=>vt.map(zt=>({...zt,points:zt.points.map(kt=>{const ot=_t(kt.x,kt.y);return{...kt,x:ot.x,y:ot.y}})}))),V(vt=>vt.map(zt=>{const kt=_t(zt.x,zt.y),ot=((zt.rotation||0)+Te)%360;return{...zt,x:kt.x,y:kt.y,rotation:ot}})),X(vt=>vt.map(zt=>{const kt=_t(zt.x,zt.y),ot=((zt.rotation||0)+Te)%360;return{...zt,x:kt.x,y:kt.y,rotation:ot}}))},[a,s,u,d,f,b,R,V,X,L,N,C,re,ie]);if(!o)return null;const Ce=(Te=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:Te?"#666":"#f2f2f2",background:"transparent",border:"none",borderRadius:4,cursor:Te?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"});return i.jsxs("div",{ref:me,style:{position:"fixed",top:fe?.y??80,left:fe?.x??window.innerWidth-340,backgroundColor:"#2b2b31",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24",zIndex:10001},children:[i.jsxs("div",{onMouseDown:U,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(to bottom, #3a3a42, #2b2b31)",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottom:"1px solid #1f1f24",cursor:ne?"grabbing":"grab",userSelect:"none"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{style:{color:"#888",fontSize:"14px"},children:""}),i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#f2f2f2"},children:"Change Perspective"})]}),i.jsx("button",{onClick:n,style:{background:"transparent",border:"none",color:"#888",fontSize:"16px",cursor:"pointer",padding:"2px 6px",lineHeight:1,borderRadius:4},onMouseEnter:Te=>{Te.currentTarget.style.background="#444",Te.currentTarget.style.color="#fff"},onMouseLeave:Te=>{Te.currentTarget.style.background="transparent",Te.currentTarget.style.color="#888"},children:""})]}),i.jsxs("div",{style:{padding:"16px"},children:[i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"View:"}),i.jsx("button",{onClick:D?W:E,style:Ce(!1),onMouseEnter:Te=>Te.currentTarget.style.background="#3a3a42",onMouseLeave:Te=>Te.currentTarget.style.background="transparent",children:D?"Switch to Top View":"Switch to Bottom View"})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"Rotate (clockwise):"}),i.jsx("button",{onClick:()=>xe(90),style:Ce(),onMouseEnter:Te=>Te.currentTarget.style.background="#3a3a42",onMouseLeave:Te=>Te.currentTarget.style.background="transparent",children:"Rotate 90"}),i.jsx("button",{onClick:()=>xe(180),style:Ce(),onMouseEnter:Te=>Te.currentTarget.style.background="#3a3a42",onMouseLeave:Te=>Te.currentTarget.style.background="transparent",children:"Rotate 180"}),i.jsx("button",{onClick:()=>xe(270),style:Ce(),onMouseEnter:Te=>Te.currentTarget.style.background="#3a3a42",onMouseLeave:Te=>Te.currentTarget.style.background="transparent",children:"Rotate 270"})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:n,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:Te=>Te.currentTarget.style.background="#3a8ee6",onMouseLeave:Te=>Te.currentTarget.style.background="#4a9eff",children:"Close"})})]})]})},Fb=({component:o,componentEditor:n,setComponentEditor:a,areComponentsLocked:s,componentsTop:u,componentsBottom:d,setComponentsTop:v,setComponentsBottom:g})=>i.jsxs(i.Fragment,{children:[o.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${o.id}`,type:"text",value:n.resistance||"",onChange:f=>a({...n,resistance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:n.resistanceUnit||Xt("resistance"),onChange:f=>a({...n,resistanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("resistance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${o.id}`,value:n.power||"1/4",onChange:f=>a({...n,power:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${o.id}`,value:n.tolerance||"5%",onChange:f=>a({...n,tolerance:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.05%",children:"0.05%"}),i.jsx("option",{value:"0.1%",children:"0.1%"}),i.jsx("option",{value:"0.25%",children:"0.25%"}),i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),o.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${o.id}`,type:"text",value:n.capacitance||"",onChange:f=>a({...n,capacitance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:n.capacitanceUnit||Xt("capacitance"),onChange:f=>a({...n,capacitanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("capacitance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:n.voltageUnit||Xt("voltage"),onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-dielectric-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),i.jsxs("select",{id:`component-dielectric-${o.id}`,value:n.dielectric||"Ceramic",onChange:f=>a({...n,dielectric:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Ceramic",children:"Ceramic"}),i.jsx("option",{value:"Tantalum",children:"Tantalum"}),i.jsx("option",{value:"Film",children:"Film"}),i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Mica",children:"Mica"}),i.jsx("option",{value:"Paper",children:"Paper"}),i.jsx("option",{value:"Glass",children:"Glass"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${o.id}`,value:n.tolerance||"10%",onChange:f=>a({...n,tolerance:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),o.componentType==="Film Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${o.id}`,type:"text",value:n.capacitance||"",onChange:f=>a({...n,capacitance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:n.capacitanceUnit||Xt("capacitance"),onChange:f=>a({...n,capacitanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("capacitance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:n.voltageUnit||Xt("voltage"),onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-filmtype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Film Type:"}),i.jsxs("select",{id:`component-filmtype-${o.id}`,value:n.filmType||"Polyester",onChange:f=>a({...n,filmType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Polyethylene",children:"Polyethylene"}),i.jsx("option",{value:"Polystyrene",children:"Polystyrene"}),i.jsx("option",{value:"Polycarbonate",children:"Polycarbonate"}),i.jsx("option",{value:"PTFE",children:"PTFE (Teflon)"}),i.jsx("option",{value:"PPS",children:"PPS (Polyphenylene Sulfide)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${o.id}`,value:n.tolerance||"10%",onChange:f=>a({...n,tolerance:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),o.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${o.id}`,type:"text",value:n.capacitance||"",onChange:f=>a({...n,capacitance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 100"}),i.jsxs("select",{value:n.capacitanceUnit||"F",onChange:f=>a({...n,capacitanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:[i.jsx("option",{value:"pF",children:"pF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"mF",children:"mF"}),i.jsx("option",{value:"F",children:"F"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 25"}),i.jsx("select",{value:n.voltageUnit||Xt("voltage"),onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${o.id}`,value:n.tolerance||"20%",onChange:f=>a({...n,tolerance:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${o.id}`,value:n.polarityCapacitor||o.polarity||"Positive",onChange:f=>a({...n,polarityCapacitor:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Positive",children:"Positive"}),i.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),o.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inductance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),i.jsx("input",{id:`component-inductance-${o.id}`,type:"text",value:n.inductance||"",onChange:f=>a({...n,inductance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:n.inductanceUnit||Xt("inductance"),onChange:f=>a({...n,inductanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("inductance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:n.currentUnit||Xt("current"),onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),i.jsx("input",{id:`component-resistance-${o.id}`,type:"text",value:n.resistance||"",onChange:f=>a({...n,resistance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:n.resistanceUnit||"",onChange:f=>a({...n,resistanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("resistance").map(f=>i.jsx("option",{value:f,children:f},f))})]})]}),o.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-diodetype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),i.jsxs("select",{id:`component-diodetype-${o.id}`,value:n.diodeType||"Standard",onChange:f=>a({...n,diodeType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Standard",children:"Standard"}),i.jsx("option",{value:"Zener",children:"Zener"}),i.jsx("option",{value:"LED",children:"LED"}),i.jsx("option",{value:"Schottky",children:"Schottky"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),n.diodeType==="LED"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ledcolor-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),i.jsxs("select",{id:`component-ledcolor-${o.id}`,value:n.ledColor||"",onChange:f=>a({...n,ledColor:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"Red",children:"Red"}),i.jsx("option",{value:"Green",children:"Green"}),i.jsx("option",{value:"Blue",children:"Blue"}),i.jsx("option",{value:"Yellow",children:"Yellow"}),i.jsx("option",{value:"Orange",children:"Orange"}),i.jsx("option",{value:"White",children:"White"}),i.jsx("option",{value:"RGB",children:"RGB"}),i.jsx("option",{value:"IR",children:"IR (Infrared)"}),i.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:n.voltageUnit||Xt("voltage"),onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:n.currentUnit||Xt("current"),onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]})]}),o.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 3.7"}),i.jsx("select",{value:n.voltageUnit||"V",onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacity-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),i.jsx("input",{id:`component-capacity-${o.id}`,type:"text",value:n.capacity||"",onChange:f=>a({...n,capacity:f.target.value}),disabled:s,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 2000mAh"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-chemistry-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),i.jsxs("select",{id:`component-chemistry-${o.id}`,value:n.chemistry||"Li-ion",onChange:f=>a({...n,chemistry:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Li-ion",children:"Li-ion"}),i.jsx("option",{value:"LiPo",children:"LiPo"}),i.jsx("option",{value:"NiMH",children:"NiMH"}),i.jsx("option",{value:"NiCd",children:"NiCd"}),i.jsx("option",{value:"Alkaline",children:"Alkaline"}),i.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),i.jsx("option",{value:"Lithium",children:"Lithium"}),i.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),o.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:n.currentUnit||"A",onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:n.voltageUnit||"V",onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-fusetype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),i.jsxs("select",{id:`component-fusetype-${o.id}`,value:n.fuseType||"Fast-blow",onChange:f=>a({...n,fuseType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),i.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),i.jsx("option",{value:"Time-delay",children:"Time-delay"}),i.jsx("option",{value:"Resettable",children:"Resettable"}),i.jsx("option",{value:"Cartridge",children:"Cartridge"}),i.jsx("option",{value:"Glass",children:"Glass"}),i.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),o.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-coilvoltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),i.jsx("input",{id:`component-coilvoltage-${o.id}`,type:"text",value:n.coilVoltage||"",onChange:f=>a({...n,coilVoltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:n.coilVoltageUnit||Xt("voltage"),onChange:f=>a({...n,coilVoltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-contacttype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),i.jsxs("select",{id:`component-contacttype-${o.id}`,value:n.contactType||"SPST",onChange:f=>a({...n,contactType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),i.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),i.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),i.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),i.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),i.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:n.currentUnit||Xt("current"),onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]})]}),o.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-motortype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),i.jsxs("select",{id:`component-motortype-${o.id}`,value:n.motorType||"DC",onChange:f=>a({...n,motorType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"DC",children:"DC Motor"}),i.jsx("option",{value:"Stepper",children:"Stepper Motor"}),i.jsx("option",{value:"Servo",children:"Servo Motor"}),i.jsx("option",{value:"Brushless",children:"Brushless DC"}),i.jsx("option",{value:"AC",children:"AC Motor"}),i.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:n.voltageUnit||Xt("voltage"),onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:n.currentUnit||Xt("current"),onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]})]}),o.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-switchtype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),i.jsxs("select",{id:`component-switchtype-${o.id}`,value:n.switchType||"Toggle",onChange:f=>a({...n,switchType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Toggle",children:"Toggle"}),i.jsx("option",{value:"Push-button",children:"Push-button"}),i.jsx("option",{value:"Slide",children:"Slide"}),i.jsx("option",{value:"Rotary",children:"Rotary"}),i.jsx("option",{value:"DIP",children:"DIP Switch"}),i.jsx("option",{value:"Momentary",children:"Momentary"}),i.jsx("option",{value:"Latching",children:"Latching"}),i.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:n.currentUnit||Xt("current"),onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:n.voltageUnit||Xt("voltage"),onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]})]}),o.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${o.id}`,type:"text",value:n.impedance||"",onChange:f=>a({...n,impedance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:n.impedanceUnit||Xt("impedance"),onChange:f=>a({...n,impedanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("impedance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:n.currentUnit||Xt("current"),onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]})]}),o.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-connectortype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),i.jsx("input",{id:`component-connectortype-${o.id}`,type:"text",value:n.connectorType||"",onChange:f=>a({...n,connectorType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-gender-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),i.jsxs("select",{id:`component-gender-${o.id}`,value:n.gender||"N/A",onChange:f=>a({...n,gender:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),o.componentType==="Jumper"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-positions-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),i.jsx("input",{id:`component-positions-${o.id}`,type:"number",min:"2",value:n.positions||3,onChange:f=>a({...n,positions:parseInt(f.target.value)||3}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"}})]})}),o.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${o.id}`,type:"text",value:n.impedance||"",onChange:f=>a({...n,impedance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 8"}),i.jsx("select",{value:n.impedanceUnit||Xt("impedance"),onChange:f=>a({...n,impedanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("impedance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${o.id}`,value:n.power||"1/4",onChange:f=>a({...n,power:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]})]}),o.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inputvoltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),i.jsx("input",{id:`component-inputvoltage-${o.id}`,type:"text",value:n.inputVoltage||"",onChange:f=>a({...n,inputVoltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:n.inputVoltageUnit||Xt("voltage"),onChange:f=>a({...n,inputVoltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-outputvoltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),i.jsx("input",{id:`component-outputvoltage-${o.id}`,type:"text",value:n.outputVoltage||"",onChange:f=>a({...n,outputVoltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:n.outputVoltageUnit||Xt("voltage"),onChange:f=>a({...n,outputVoltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:n.currentUnit||Xt("current"),onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]})]}),o.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-transistortype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),i.jsxs("select",{id:`component-transistortype-${o.id}`,value:n.transistorType||"BJT",onChange:f=>a({...n,transistorType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),i.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),i.jsx("option",{value:"MOSFET",children:"MOSFET"}),i.jsx("option",{value:"IGBT",children:"IGBT"}),i.jsx("option",{value:"JFET",children:"JFET"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${o.id}`,value:n.polarity||"NPN",onChange:f=>a({...n,polarity:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NPN",children:"NPN"}),i.jsx("option",{value:"PNP",children:"PNP"}),i.jsx("option",{value:"N-Channel",children:"N-Channel"}),i.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:n.voltageUnit||Xt("voltage"),onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${o.id}`,type:"text",value:n.current||"",onChange:f=>a({...n,current:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:n.currentUnit||Xt("current"),onChange:f=>a({...n,currentUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("current").map(f=>i.jsx("option",{value:f,children:f},f))})]})]}),o.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${o.id}`,type:"text",value:n.resistance||"",onChange:f=>a({...n,resistance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:n.resistanceUnit||Xt("resistance"),onChange:f=>a({...n,resistanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("resistance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-configuration-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),i.jsx("input",{id:`component-configuration-${o.id}`,type:"text",value:n.configuration||"",onChange:f=>a({...n,configuration:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),o.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${o.id}`,type:"text",value:n.resistance||"",onChange:f=>a({...n,resistance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:n.resistanceUnit||Xt("resistance"),onChange:f=>a({...n,resistanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("resistance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-thermistortype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),i.jsxs("select",{id:`component-thermistortype-${o.id}`,value:n.thermistorType||"NTC",onChange:f=>a({...n,thermistorType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),i.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-beta-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),i.jsx("input",{id:`component-beta-${o.id}`,type:"text",value:n.beta||"",onChange:f=>a({...n,beta:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),o.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-primaryvoltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),i.jsx("input",{id:`component-primaryvoltage-${o.id}`,type:"text",value:n.primaryVoltage||"",onChange:f=>a({...n,primaryVoltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:n.primaryVoltageUnit||Xt("voltage"),onChange:f=>a({...n,primaryVoltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-secondaryvoltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),i.jsx("input",{id:`component-secondaryvoltage-${o.id}`,type:"text",value:n.secondaryVoltage||"",onChange:f=>a({...n,secondaryVoltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:n.secondaryVoltageUnit||Xt("voltage"),onChange:f=>a({...n,secondaryVoltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${o.id}`,value:n.power||"1/4",onChange:f=>a({...n,power:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-turns-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),i.jsx("input",{id:`component-turns-${o.id}`,type:"text",value:n.turns||"",onChange:f=>a({...n,turns:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),o.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-signal-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),i.jsx("input",{id:`component-signal-${o.id}`,type:"text",value:n.signal||"",onChange:f=>a({...n,signal:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),o.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#000"},children:"IC Properties:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ictype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),i.jsxs("select",{id:`component-ictype-${o.id}`,value:n.icType||"Op-Amp",onChange:f=>a({...n,icType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),i.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),i.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),i.jsx("option",{value:"Logic",children:"Logic"}),i.jsx("option",{value:"Memory",children:"Memory"}),i.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),i.jsx("option",{value:"Timer",children:"Timer"}),i.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),i.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),i.jsx("option",{value:"Comparator",children:"Comparator"}),i.jsx("option",{value:"Transceiver",children:"Transceiver"}),i.jsx("option",{value:"Driver",children:"Driver"}),i.jsx("option",{value:"Amplifier",children:"Amplifier"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-datasheet-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1},children:[i.jsx("input",{id:`component-datasheet-${o.id}`,type:"text",value:n.datasheet||"",onChange:f=>a({...n,datasheet:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"URL"}),n.datasheet&&n.datasheet.trim()&&i.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation();const b=n.datasheet.trim(),S=b.match(/^https?:\/\//)?b:`https://${b}`;window.open(S,"_blank","noopener,noreferrer")},style:{background:"transparent",border:"none",cursor:"pointer",padding:"2px",display:"flex",alignItems:"center",justifyContent:"center",opacity:s?.4:1,flexShrink:0},title:"Open URL in new tab",disabled:s,children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#4a9eff"},children:[i.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),i.jsx("polyline",{points:"15 3 21 3 21 9"}),i.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${o.id}`,name:`component-pincount-${o.id}`,type:"number",min:"1",value:n.pinCount,onChange:f=>{const b=Math.max(1,parseInt(f.target.value)||1);a({...n,pinCount:b})},onBlur:f=>{if(s){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const b=Math.max(1,parseInt(f.target.value)||1),R=(n.layer==="top"?u:d).find(q=>q.id===n.id);if(R&&b!==R.pinCount){const q=R.pinConnections||[],T=new Array(b).fill("").map((D,ve)=>ve<q.length?q[ve]:""),V=R.pinPolarities||[],X=R.pinPolarities?new Array(b).fill("").map((D,ve)=>ve<V.length?V[ve]:""):void 0,L={...R,pinCount:b,pinConnections:T,...X!==void 0&&{pinPolarities:X}};n.layer==="top"?v(D=>D.map(ve=>ve.id===n.id?L:ve)):g(D=>D.map(ve=>ve.id===n.id?L:ve)),a({...n,pinCount:b})}},disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"}})]})]}),o.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tubetype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),i.jsx("input",{id:`component-tubetype-${o.id}`,type:"text",value:n.tubeType||"",onChange:f=>a({...n,tubeType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),o.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-vrtype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),i.jsxs("select",{id:`component-vrtype-${o.id}`,value:n.vrType||"Potentiometer",onChange:f=>a({...n,vrType:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),i.jsx("option",{value:"Rheostat",children:"Rheostat"}),i.jsx("option",{value:"Trimmer",children:"Trimmer"}),i.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${o.id}`,type:"text",value:n.resistance||"",onChange:f=>a({...n,resistance:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:n.resistanceUnit||Xt("resistance"),onChange:f=>a({...n,resistanceUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("resistance").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${o.id}`,value:n.power||"1/4",onChange:f=>a({...n,power:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-taper-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),i.jsxs("select",{id:`component-taper-${o.id}`,value:n.taper||"Linear",onChange:f=>a({...n,taper:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Linear",children:"Linear"}),i.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),i.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),o.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-frequency-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),i.jsx("input",{id:`component-frequency-${o.id}`,type:"text",value:n.frequency||"",onChange:f=>a({...n,frequency:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-loadcapacitance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),i.jsx("input",{id:`component-loadcapacitance-${o.id}`,type:"text",value:n.loadCapacitance||"",onChange:f=>a({...n,loadCapacitance:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${o.id}`,value:n.tolerance||"10ppm",onChange:f=>a({...n,tolerance:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"10ppm",children:"10ppm"}),i.jsx("option",{value:"20ppm",children:"20ppm"}),i.jsx("option",{value:"30ppm",children:"30ppm"}),i.jsx("option",{value:"50ppm",children:"50ppm"}),i.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),o.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),i.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:n.voltage||"",onChange:f=>a({...n,voltage:f.target.value}),disabled:s,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1},placeholder:"e.g., 5.1"}),i.jsx("select",{value:n.voltageUnit||Xt("voltage"),onChange:f=>a({...n,voltageUnit:f.target.value}),disabled:s,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,width:"60px",marginRight:"12px"},children:Yi("voltage").map(f=>i.jsx("option",{value:f,children:f},f))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${o.id}`,value:n.power||"1/4",onChange:f=>a({...n,power:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${o.id}`,value:n.tolerance||"5%",onChange:f=>a({...n,tolerance:f.target.value}),disabled:s,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:s?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),Hb=o=>{const n=_f[o];return!n||!n.prefix||n.prefix.length<1?"?":n.prefix[0].substring(0,1).toUpperCase()},qb=({componentEditor:o,setComponentEditor:n,componentsTop:a,componentsBottom:s,setComponentsTop:u,setComponentsBottom:d,connectingPin:v,setConnectingPin:g,componentDialogPosition:f,setComponentDialogPosition:b,isDraggingDialog:S,setIsDraggingDialog:R,dialogDragOffset:q,setDialogDragOffset:T,areComponentsLocked:V,setSelectedComponentIds:X,setNotesDialogVisible:L})=>{if(!o||!o.visible)return null;let D=a.find(J=>J.id===o.id),ve="top";if(D||(D=s.find(J=>J.id===o.id),ve="bottom"),!D)return null;o.layer!==ve&&n({...o,layer:ve});const se=J=>{const $={...J},I=o.designator?.trim()||"";$.designator=I,$.x=o.x,$.y=o.y,$.layer=o.layer,$.orientation=o.orientation??0;const F=I.length>0?I.charAt(0).toUpperCase():Hb(J.componentType);if($.abbreviation=F,"manufacturer"in $&&($.manufacturer=o.manufacturer?.trim()||void 0),"partNumber"in $&&($.partNumber=o.partNumber?.trim()||void 0),o.pinCount!==J.pinCount){$.pinCount=o.pinCount;const O=J.pinConnections||[];if($.pinConnections=new Array(o.pinCount).fill("").map((he,N)=>N<O.length?O[N]:""),J.pinPolarities){const he=J.pinPolarities||[];$.pinPolarities=new Array(o.pinCount).fill("").map((N,C)=>C<he.length?he[C]:"")}}else $.pinConnections=J.pinConnections||[],J.pinPolarities&&($.pinPolarities=J.pinPolarities);return J.componentType==="Resistor"?($.resistance=o.resistance||void 0,$.resistanceUnit=o.resistanceUnit||void 0,$.power=o.power?`${o.power}W`:void 0,$.tolerance=o.tolerance||void 0):J.componentType==="Capacitor"?($.capacitance=o.capacitance||void 0,$.capacitanceUnit=o.capacitanceUnit||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.tolerance=o.tolerance||void 0,$.dielectric=o.dielectric||void 0):J.componentType==="Electrolytic Capacitor"?($.capacitance=o.capacitance||void 0,$.capacitanceUnit=o.capacitanceUnit||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.tolerance=o.tolerance||void 0,$.polarity=o.polarityCapacitor||void 0,$.esr=o.esr||void 0,$.esrUnit=o.esrUnit||void 0,$.temperature=o.temperature||void 0):J.componentType==="Film Capacitor"?($.capacitance=o.capacitance||void 0,$.capacitanceUnit=o.capacitanceUnit||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.tolerance=o.tolerance||void 0,$.filmType=o.filmType||void 0):J.componentType==="Diode"?($.diodeType=o.diodeType||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0,$.ledColor=o.ledColor||void 0):J.componentType==="Battery"?($.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.capacity=o.capacity||void 0,$.capacityUnit=o.capacityUnit||void 0,$.chemistry=o.chemistry||void 0):J.componentType==="Fuse"?($.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.fuseType=o.fuseType||void 0):J.componentType==="FerriteBead"?($.impedance=o.impedance||void 0,$.impedanceUnit=o.impedanceUnit||void 0,$.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0):J.componentType==="Connector"?($.connectorType=o.connectorType||void 0,$.gender=o.gender||void 0):J.componentType==="Jumper"?$.positions=o.positions||void 0:J.componentType==="Relay"?($.coilVoltage=o.coilVoltage||void 0,$.coilVoltageUnit=o.coilVoltageUnit||void 0,$.contactType=o.contactType||void 0,$.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0):J.componentType==="Inductor"?($.inductance=o.inductance||void 0,$.inductanceUnit=o.inductanceUnit||void 0,$.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0,$.resistance=o.resistance||void 0,$.resistanceUnit=o.resistanceUnit||void 0):J.componentType==="Speaker"?($.impedance=o.impedance||void 0,$.impedanceUnit=o.impedanceUnit||void 0,$.power=o.power?`${o.power}W`:void 0):J.componentType==="Motor"?($.motorType=o.motorType||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0):J.componentType==="PowerSupply"?($.inputVoltage=o.inputVoltage||void 0,$.inputVoltageUnit=o.inputVoltageUnit||void 0,$.outputVoltage=o.outputVoltage||void 0,$.outputVoltageUnit=o.outputVoltageUnit||void 0,$.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0):J.componentType==="Transistor"?($.transistorType=o.transistorType||void 0,$.polarity=o.polarity||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0):J.componentType==="ResistorNetwork"?($.resistance=o.resistance||void 0,$.resistanceUnit=o.resistanceUnit||void 0,$.configuration=o.configuration||void 0):J.componentType==="Thermistor"?($.resistance=o.resistance||void 0,$.resistanceUnit=o.resistanceUnit||void 0,$.thermistorType=o.thermistorType||void 0,$.beta=o.beta||void 0):J.componentType==="Switch"?($.switchType=o.switchType||void 0,$.current=o.current||void 0,$.currentUnit=o.currentUnit||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0):J.componentType==="Transformer"?($.primaryVoltage=o.primaryVoltage||void 0,$.primaryVoltageUnit=o.primaryVoltageUnit||void 0,$.secondaryVoltage=o.secondaryVoltage||void 0,$.secondaryVoltageUnit=o.secondaryVoltageUnit||void 0,$.power=o.power?`${o.power}W`:void 0,$.turns=o.turns||void 0):J.componentType==="TestPoint"?$.signal=o.signal||void 0:J.componentType==="Film Capacitor"?($.capacitance=o.capacitance||void 0,$.capacitanceUnit=o.capacitanceUnit||void 0,$.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.tolerance=o.tolerance||void 0,$.filmType=o.filmType||void 0):J.componentType==="IntegratedCircuit"?($.description=o.description?.trim()||void 0,$.datasheet=o.datasheet?.trim()||void 0,$.icType=o.icType||void 0):$.description=o.description?.trim()||void 0,J.componentType==="VacuumTube"?$.tubeType=o.tubeType||void 0:J.componentType==="VariableResistor"?($.vrType=o.vrType||void 0,$.resistance=o.resistance||void 0,$.resistanceUnit=o.resistanceUnit||void 0,$.power=o.power?`${o.power}W`:void 0,$.taper=o.taper||void 0):J.componentType==="Crystal"?($.frequency=o.frequency||void 0,$.loadCapacitance=o.loadCapacitance||void 0,$.tolerance=o.tolerance||void 0):J.componentType==="ZenerDiode"&&($.voltage=o.voltage||void 0,$.voltageUnit=o.voltageUnit||void 0,$.power=o.power?`${o.power}W`:void 0,$.tolerance=o.tolerance||void 0),$},ee=()=>{if(V){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const J=a.find(F=>F.id===o.id),$=s.find(F=>F.id===o.id),I=J||$;if(I){const F=se(I),O=I.layer,he=o.layer;O!==he?O==="top"?(u(N=>N.filter(C=>C.id!==o.id)),d(N=>[...N,F])):(d(N=>N.filter(C=>C.id!==o.id)),u(N=>[...N,F])):he==="top"?u(N=>N.map(C=>C.id===o.id?F:C)):d(N=>N.map(C=>C.id===o.id?F:C))}else if(console.warn(`Component ${o.id} not found in either layer array`),o.layer==="top"){const F=s.find(O=>O.id===o.id);if(F){const O=se(F);d(he=>he.filter(N=>N.id!==o.id)),u(he=>[...he,O])}}else{const F=a.find(O=>O.id===o.id);if(F){const O=se(F);u(he=>he.filter(N=>N.id!==o.id)),d(he=>[...he,O])}}n(null),g(null)};return i.jsxs("div",{"data-component-editor-dialog":!0,onClick:J=>{if(v&&v.componentId===D.id){const $=J.target;($.tagName==="BUTTON"||$.tagName==="INPUT"||$.closest("button")||$.closest("input"))&&J.stopPropagation()}},style:{position:"fixed",top:f?`${f.y}px`:"90px",left:f?`${f.x}px`:`${window.innerWidth-280}px`,transform:"none",background:v&&v.componentId===D.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:S?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:J=>{const $=J.target;$.tagName==="BUTTON"||$.tagName==="INPUT"||$.closest("button")||$.closest("input")||f&&(T({x:J.clientX-f.x,y:J.clientY-f.y}),R(!0),J.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:S?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),i.jsx("button",{onClick:()=>{n(null),g(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),i.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#000"},children:Wu(D.componentType)})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-layer-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),i.jsxs("select",{id:`component-layer-${D.id}`,name:`component-layer-${D.id}`,value:o.layer,onChange:J=>n({...o,layer:J.target.value}),disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-orientation-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),i.jsxs("select",{id:`component-orientation-${D.id}`,name:`component-orientation-${D.id}`,value:o.orientation??0,onChange:J=>{const $=parseInt(J.target.value)||0;if(n({...o,orientation:$}),!V){const F=(o.layer==="top"?a:s).find(O=>O.id===o.id);if(F){const O={...F,orientation:$};o.layer==="top"?u(he=>he.map(N=>N.id===o.id?O:N)):d(he=>he.map(N=>N.id===o.id?O:N))}}},disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0",children:"0"}),i.jsx("option",{value:"90",children:"90"}),i.jsx("option",{value:"180",children:"180"}),i.jsx("option",{value:"270",children:"270"})]})]}),i.jsx(Fb,{component:D,componentEditor:o,setComponentEditor:n,areComponentsLocked:V,componentsTop:a,componentsBottom:s,setComponentsTop:u,setComponentsBottom:d}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{htmlFor:`component-designator-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),i.jsx("input",{id:`component-designator-${D.id}`,name:`component-designator-${D.id}`,type:"text",value:o.designator||"",onChange:J=>{const $=J.target.value,I=$.length>0?$.charAt(0).toUpperCase():o.abbreviation;n({...o,designator:$,abbreviation:I})},disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",fontFamily:"monospace",textTransform:"uppercase",opacity:V?.6:1},placeholder:"e.g., U2, R7, C1"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-description-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),i.jsx("input",{id:`component-description-${D.id}`,name:`component-description-${D.id}`,type:"text",value:o.description||"",onChange:J=>{n({...o,description:J.target.value})},disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1},placeholder:D.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-notes-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Notes:"}),i.jsx("input",{id:`component-notes-${D.id}`,name:`component-notes-${D.id}`,type:"text",readOnly:!0,value:D.notes||"",onClick:()=>{V||(X(new Set([D.id])),L(!0))},disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1,cursor:V?"not-allowed":"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Click to edit notes...",title:D.notes||"Click to edit notes..."})]}),D.componentType!=="IntegratedCircuit"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${D.id}`,name:`component-pincount-${D.id}`,type:"number",min:"1",value:o.pinCount,onChange:J=>{const $=Math.max(1,parseInt(J.target.value)||1);n({...o,pinCount:$})},onBlur:J=>{if(V){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const $=Math.max(1,parseInt(J.target.value)||1),F=(o.layer==="top"?a:s).find(O=>O.id===o.id);if(F&&$!==F.pinCount){const O=F.pinConnections||[],he=new Array($).fill("").map((ie,fe)=>fe<O.length?O[fe]:""),N=F.pinPolarities||[],C=F.pinPolarities?new Array($).fill("").map((ie,fe)=>fe<N.length?N[fe]:""):void 0,re={...F,pinCount:$,pinConnections:he,...C!==void 0&&{pinPolarities:C}};o.layer==="top"?u(ie=>ie.map(fe=>fe.id===o.id?re:fe)):d(ie=>ie.map(fe=>fe.id===o.id?re:fe)),n({...o,pinCount:$})}},disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-x-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),i.jsx("input",{id:`component-x-${D.id}`,name:`component-x-${D.id}`,type:"number",value:o.x.toFixed(2),onChange:J=>{const $=parseFloat(J.target.value)||0;n({...o,x:$})},disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-y-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),i.jsx("input",{id:`component-y-${D.id}`,name:`component-y-${D.id}`,type:"number",value:o.y.toFixed(2),onChange:J=>{const $=parseFloat(J.target.value)||0;n({...o,y:$})},disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-manufacturer-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),i.jsx("input",{id:`component-manufacturer-${D.id}`,name:`component-manufacturer-${D.id}`,type:"text",value:o.manufacturer,onChange:J=>n({...o,manufacturer:J.target.value}),disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-partnumber-${D.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),i.jsx("input",{id:`component-partnumber-${D.id}`,name:`component-partnumber-${D.id}`,type:"text",value:o.partNumber,onChange:J=>n({...o,partNumber:J.target.value}),disabled:V,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:V?.6:1}})]}),i.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),v&&v.componentId===D.id&&i.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",v.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const J=D.componentType==="Electrolytic Capacitor"||D.componentType==="Diode"||D.componentType==="Battery"||D.componentType==="ZenerDiode",$=D.componentType==="Capacitor"&&"dielectric"in D&&D.dielectric==="Tantalum",I=J||$;return i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),I&&i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),i.jsx("tbody",{children:Array.from({length:o.pinCount},(F,O)=>{const N=(o.layer==="top"?a:s).find(fe=>fe.id===o.id),C=N?.pinConnections&&N.pinConnections.length>O?N.pinConnections[O]:"",re=N?.pinPolarities&&N.pinPolarities.length>O&&N.pinPolarities[O]||"",ie=v&&v.componentId===D.id&&v.pinIndex===O;return i.jsxs("tr",{style:{cursor:V?"not-allowed":"pointer",background:ie?"#e6f0ff":C?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:fe=>{if(fe.target.tagName!=="SELECT"){if(V){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}g(ie?null:{componentId:D.id,pinIndex:O})}},title:C?`Connected to: ${C}`:"Select this pin, then click on a via or pad to connect",children:[i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsx("input",{id:`pin-radio-${D.id}-${O}`,name:`pin-radio-${D.id}`,type:"radio",checked:!!ie,onChange:()=>{if(V){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}g(ie?null:{componentId:D.id,pinIndex:O})},disabled:V,style:{margin:0,cursor:V?"not-allowed":"pointer",opacity:V?.6:1,width:"10px",height:"10px"}})}),i.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:ie?600:400,fontFamily:"monospace"},children:O+1}),I&&i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsxs("select",{value:re??"",onChange:fe=>{if(V){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const te=fe.target.value,pe=(o.layer==="top"?a:s).find(Ne=>Ne.id===o.id);if(pe){const me=[...pe.pinPolarities||new Array(pe.pinCount).fill("")];for(;me.length<pe.pinCount;)me.push("");me[O]=te;const U={...pe,pinPolarities:me};o.layer==="top"?u(A=>A.map(E=>E.id===o.id?U:E)):d(A=>A.map(E=>E.id===o.id?U:E))}},disabled:V,onClick:fe=>fe.stopPropagation(),onFocus:fe=>fe.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:V?"not-allowed":"pointer",opacity:V?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[i.jsx("option",{value:"",children:"-"}),i.jsx("option",{value:"+",children:"+"}),i.jsx("option",{value:"-",children:"-"})]},`polarity-${D.id}-${O}-${re}`)}),i.jsx("td",{style:{padding:"2px 4px",color:C?"#28a745":"#999",fontWeight:C?600:400,fontFamily:"monospace"},children:C||"-"})]},O)})})]})})()]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[i.jsx("button",{onClick:()=>{n(null),g(null)},disabled:V,style:{padding:"2px 5px",background:V?"#f5f5f5":"#fff",color:V?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:V?"not-allowed":"pointer",fontSize:"10px",opacity:V?.6:1},children:"Cancel"}),i.jsx("button",{onClick:ee,disabled:V,style:{padding:"2px 5px",background:V?"#f5f5f5":"#0b5fff",color:V?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:V?"not-allowed":"pointer",fontSize:"10px",opacity:V?.6:1},children:"Save"})]})]})},Wb=({visible:o,onClose:n,powerBuses:a,setPowerBuses:s,editingPowerBusId:u,setEditingPowerBusId:d,powers:v})=>{const[g,f]=H.useState(null),[b,S]=H.useState(!1),[R,q]=H.useState(null),T=H.useRef(null);H.useEffect(()=>{o&&!g&&f({x:window.innerWidth/2-140,y:window.innerHeight/2-200})},[o,g]),H.useEffect(()=>{if(!b)return;const ee=$=>{g&&R&&f({x:$.clientX-R.x,y:$.clientY-R.y})},J=()=>{S(!1),q(null)};return window.addEventListener("mousemove",ee),window.addEventListener("mouseup",J),()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",J)}},[b,g,R]);const V=a.filter(ee=>ee.id!==u),X=a.find(ee=>ee.id===u);if(!o)return null;const L=[...V].sort((ee,J)=>{const $=O=>{const he=O.match(/([+-]?)(\d+\.?\d*)/);if(he){const N=he[1]||"+",C=parseFloat(he[2]);return{absValue:Math.abs(C),isNegative:N==="-"}}return{absValue:1/0,isNegative:!1}},I=$(ee.voltage),F=$(J.voltage);return I.absValue!==F.absValue?I.absValue-F.absValue:I.isNegative!==F.isNegative?I.isNegative?-1:1:0}),D=X?[...L,X]:L,ve=()=>{const ee={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};s(J=>[...J,ee]),d(ee.id)},se=ee=>{const J=ee.target;J.tagName==="BUTTON"||J.tagName==="INPUT"||J.closest("button")||J.closest("input")||g&&(q({x:ee.clientX-g.x,y:ee.clientY-g.y}),S(!0),ee.preventDefault())};return i.jsxs("div",{ref:T,style:{position:"fixed",top:g?`${g.y}px`:"50%",left:g?`${g.x}px`:"50%",transform:g?"none":"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",display:"flex",flexDirection:"column",cursor:b?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:se,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:b?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Manage Power Buses"}),i.jsx("button",{onClick:n,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:D.map(ee=>{const J=a.find(O=>O.id===ee.id)||ee,$=a.findIndex(O=>O.id===ee.id),I=a.some(O=>O.name===J.name&&O.id!==ee.id),F=a.some(O=>O.voltage===J.voltage&&O.id!==ee.id);return i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Name:"}),i.jsx("input",{type:"text",value:J.name,onChange:O=>{const he=O.target.value;if(!a.some(C=>C.name===he&&C.id!==ee.id)){const C=[...a];$>=0&&(C[$]={...J,name:he},s(C))}},placeholder:"e.g., +5VDC",style:{flex:1,padding:"2px 3px",border:I?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Value:"}),i.jsx("input",{type:"text",inputMode:"decimal",value:J.voltage,onChange:O=>{const he=O.target.value;if(he===""||/^[+-]?\d*\.?\d*$/.test(he)){const N=[...a];$>=0&&(N[$]={...J,voltage:he},s(N))}},onBlur:O=>{const he=O.target.value.trim();if(he==="")return;const N=parseFloat(he);if(!isNaN(N)){const C=N>=0?"+":"-",re=Math.abs(N),ie=`${C}${re.toFixed(1).replace(/\.?0+$/,"")}`,fe=[...a];$>=0&&(fe[$]={...J,voltage:ie},s(fe))}},placeholder:"e.g., +5.0",style:{flex:1,padding:"2px 3px",border:F?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]})]}),i.jsx("input",{type:"color",value:J.color,onChange:O=>{const he=[...a];$>=0&&(he[$]={...J,color:O.target.value},s(he))},style:{width:"24px",height:"24px",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",flexShrink:0},title:"Color"}),i.jsx("button",{onClick:()=>{const O=v.filter(he=>he.powerBusId===ee.id);if(O.length>0){alert(`Cannot delete: ${O.length} power node(s) are using this bus. Remove or reassign them first.`);return}s(he=>he.filter(N=>N.id!==ee.id))},style:{padding:"2px 6px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"9px",flexShrink:0},children:"Delete"})]})},ee.id)})}),i.jsxs("div",{style:{padding:"6px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"4px",flexShrink:0},children:[i.jsx("button",{onClick:ve,style:{flex:1,padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",fontSize:"10px"},children:"+ Add Power Bus"}),i.jsx("button",{onClick:n,style:{flex:1,padding:"4px 8px",background:"#0b5fff",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",fontSize:"10px",fontWeight:500},children:"Close"})]})]})},Vb=({visible:o,onClose:n,groundBuses:a,setGroundBuses:s,editingGroundBusId:u,setEditingGroundBusId:d,grounds:v})=>{const[g,f]=H.useState(null),[b,S]=H.useState(!1),[R,q]=H.useState(null),T=H.useRef(null);H.useEffect(()=>{o&&!g&&f({x:window.innerWidth/2-140,y:window.innerHeight/2-200})},[o,g]),H.useEffect(()=>{if(!b)return;const ee=$=>{g&&R&&f({x:$.clientX-R.x,y:$.clientY-R.y})},J=()=>{S(!1),q(null)};return window.addEventListener("mousemove",ee),window.addEventListener("mouseup",J),()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",J)}},[b,g,R]);const V=a.filter(ee=>ee.id!==u),X=a.find(ee=>ee.id===u);if(!o)return null;const L=[...V].sort((ee,J)=>ee.name.localeCompare(J.name)),D=X?[...L,X]:L,ve=()=>{const ee={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};s(J=>[...J,ee]),d(ee.id)},se=ee=>{const J=ee.target;J.tagName==="BUTTON"||J.tagName==="INPUT"||J.closest("button")||J.closest("input")||g&&(q({x:ee.clientX-g.x,y:ee.clientY-g.y}),S(!0),ee.preventDefault())};return i.jsxs("div",{ref:T,style:{position:"fixed",top:g?`${g.y}px`:"50%",left:g?`${g.x}px`:"50%",transform:g?"none":"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",display:"flex",flexDirection:"column",cursor:b?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:se,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:b?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Manage Ground Buses"}),i.jsx("button",{onClick:n,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:D.map(ee=>{const J=a.find(F=>F.id===ee.id)||ee,$=a.findIndex(F=>F.id===ee.id),I=a.some(F=>F.name===J.name&&F.id!==ee.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{flex:1,minWidth:0},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Name:"}),i.jsx("input",{type:"text",value:J.name,onChange:F=>{const O=F.target.value;if(!a.some(N=>N.name===O&&N.id!==ee.id)){const N=[...a];$>=0&&(N[$]={...J,name:O},s(N))}},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 3px",border:I?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]})}),i.jsx("input",{type:"color",value:J.color,onChange:F=>{const O=[...a];$>=0&&(O[$]={...J,color:F.target.value},s(O))},style:{width:"24px",height:"24px",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",flexShrink:0},title:"Color"}),i.jsx("button",{onClick:()=>{const F=v.filter(O=>O.groundBusId===ee.id);if(F.length>0){alert(`Cannot delete: ${F.length} ground node(s) are using this bus. Remove or reassign them first.`);return}s(O=>O.filter(he=>he.id!==ee.id))},style:{padding:"2px 6px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"9px",flexShrink:0},children:"Delete"})]},ee.id)})}),i.jsxs("div",{style:{padding:"6px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"4px",flexShrink:0},children:[i.jsx("button",{onClick:ve,style:{flex:1,padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",fontSize:"10px"},children:"+ Add Ground Bus"}),i.jsx("button",{onClick:n,style:{flex:1,padding:"4px 8px",background:"#0b5fff",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",fontSize:"10px",fontWeight:500},children:"Close"})]})]})},$b=({visible:o,onClose:n,autoAssignDesignators:a,setAutoAssignDesignators:s,useGlobalDesignatorCounters:u,setUseGlobalDesignatorCounters:d})=>o?i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"16px",zIndex:1e3,minWidth:"300px",maxWidth:"400px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Designators"}),i.jsx("button",{onClick:n,style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333",marginBottom:"12px"},children:[i.jsx("input",{type:"checkbox",checked:a,onChange:v=>{s(v.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{children:"Automatically assign designators"})]}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4",marginBottom:"12px"},children:a?i.jsx("div",{children:"When enabled, new components automatically receive sequential designators (e.g., C1, C2, C3 for Capacitors; R1, R2, R3 for Resistors)."}):i.jsx("div",{children:"When disabled, you must manually assign designators to each component. The designator field will be empty when components are created."})}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333"},children:[i.jsx("input",{type:"checkbox",checked:u,onChange:v=>{d(v.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{children:"Use global designator counters"})]}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4"},children:u?i.jsx("div",{children:"When ON, designators continue from global counters across all projects. New components start with the next value from the global counter (e.g., if global counter is C10, new capacitor will be C11)."}):i.jsx("div",{children:"When OFF (default), designators start at 1 for each project. Each project maintains its own independent designator sequence (e.g., C1, C2, C3...)."})})]}),i.jsx("button",{onClick:n,style:{width:"100%",padding:"6px 12px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}):null,u2=({visible:o,title:n,message:a,onYes:s,onNo:u,onCancel:d,yesButtonRef:v})=>o?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:g=>{g.target===g.currentTarget&&d()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:g=>g.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:n}),i.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:a}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:d,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),i.jsx("button",{ref:v,onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}):null,Yb=({visible:o,size:n,onSizeChange:a,onApply:s,onCancel:u})=>{const d=H.useRef(null);if(H.useEffect(()=>{o&&d.current&&(d.current.focus(),d.current.select())},[o]),!o)return null;const v=[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32];return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:g=>{g.target===g.currentTarget&&u()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:g=>g.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),i.jsx("input",{ref:d,type:"number",min:"1",max:"99",value:n,onChange:g=>{const f=parseInt(g.target.value)||1,b=Math.max(1,Math.min(99,f));a(b)},onKeyDown:g=>{if(g.key==="Enter"?s():g.key==="Escape"&&u(),g.key.length===1&&/[0-9]/.test(g.key)){const f=n.toString();f.length>=2&&d.current?.selectionStart===d.current?.selectionEnd&&d.current?.selectionStart===f.length&&g.preventDefault()}},onInput:g=>{const f=g.target,b=f.value;if(b.length>2){f.value=b.slice(0,2);const S=parseInt(f.value)||1;a(Math.max(1,Math.min(99,S)))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),i.jsxs("select",{value:v.includes(n)?n:"",onChange:g=>{const f=parseInt(g.target.value);!isNaN(f)&&f>0&&a(f)},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[i.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),v.map(g=>i.jsxs("option",{value:g,style:{background:"#1f1f24",color:"#f2f2f2"},children:[g," pixels"]},g))]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})})},Gb=({visible:o,interval:n,onIntervalChange:a,onApply:s,onCancel:u})=>o?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:d=>{d.target===d.currentTarget&&u()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:d=>d.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:n===null?"disable":(n||5).toString(),onChange:d=>{const v=d.target.value;if(v==="disable")a(null);else{const g=parseFloat(v);!isNaN(g)&&g>0&&a(g)}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),i.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}):null,Xb=({visible:o,interval:n,onIntervalChange:a,onEnable:s,onSkip:u})=>o?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:d=>{d.target===d.currentTarget&&u()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:d=>d.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),i.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:n===null?"disable":(n||5).toString(),onChange:d=>{const v=d.target.value;if(v==="disable")a(null);else{const g=parseFloat(v);!isNaN(g)&&g>0&&a(g)}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),i.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})}):null,Zb=({visible:o,projectDirHandle:n,onClose:a,onRestore:s,position:u,isDragging:d=!1,onDragStart:v})=>{const[g,f]=H.useState([]),[b,S]=H.useState(!1),[R,q]=H.useState(null),[T,V]=H.useState(null),X=H.useRef(null);H.useEffect(()=>{if(!o||!n){f([]),q(null),V(null);return}(async()=>{S(!0),V(null);try{let J;try{J=await n.getDirectoryHandle("history")}catch{f([]),S(!1);return}const $=F=>{const O=F.match(/_(\d{4})_(\d{2})_(\d{2})-(\d{2})-(\d{2})-(\d{2})\.json$/);if(O){const[,N,C,re,ie,fe,te]=O;return new Date(parseInt(N),parseInt(C)-1,parseInt(re),parseInt(ie),parseInt(fe),parseInt(te))}const he=F.match(/_(\d{4})_(\d{2})_(\d{2})_(\d{2})_(\d{2})_(\d{2})\.json$/);if(he){const[,N,C,re,ie,fe,te]=he;return new Date(parseInt(N),parseInt(C)-1,parseInt(re),parseInt(ie),parseInt(fe),parseInt(te))}return null},I=[];for await(const F of J.keys())if(F.endsWith(".json"))try{const he=await(await J.getFileHandle(F)).getFile(),N=$(F);I.push({name:F,lastModified:new Date(he.lastModified),size:he.size,timestamp:N||new Date(he.lastModified)})}catch(O){console.warn(`Failed to read file ${F}:`,O)}I.sort((F,O)=>O.timestamp.getTime()-F.timestamp.getTime()),f(I)}catch(J){console.error("Failed to load history files:",J),V("Failed to load history files. Please try again.")}finally{S(!1)}})()},[o,n]);const L=async()=>{if(R)try{await s(R),a()}catch(ee){console.error("Failed to restore file:",ee),V("Failed to restore file. Please try again.")}},D=ee=>ee.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),ve=ee=>ee<1024?`${ee} B`:ee<1024*1024?`${(ee/1024).toFixed(1)} KB`:`${(ee/(1024*1024)).toFixed(1)} MB`;if(!o)return null;const se=u?{position:"fixed",left:`${u.x}px`,top:`${u.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"500px",maxWidth:"700px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:d?"grabbing":"default"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",borderRadius:8,minWidth:"500px",maxWidth:"700px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column"};return i.jsxs("div",{style:se,children:[i.jsxs("div",{onMouseDown:v,style:{backgroundColor:"#f5f5f5",padding:"12px 16px",borderBottom:"1px solid #ddd",borderRadius:"8px 8px 0 0",cursor:d?"grabbing":"move",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("h2",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#000"},children:"PastTime"}),i.jsx("button",{onClick:a,style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),i.jsxs("div",{style:{padding:"16px",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[T&&i.jsx("div",{style:{padding:"12px",backgroundColor:"#fee",color:"#c00",borderRadius:4,marginBottom:"12px"},children:T}),b?i.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"Loading history files..."}):g.length===0?i.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"No history files found."}):i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginBottom:"12px",color:"#333",fontSize:"14px"},children:"Select a file to restore:"}),i.jsx("div",{ref:X,style:{border:"1px solid #ddd",borderRadius:4,overflowY:"auto",maxHeight:"400px",backgroundColor:"#fafafa"},children:g.map((ee,J)=>i.jsxs("div",{onClick:()=>q(ee.name),style:{padding:"12px 16px",borderBottom:J<g.length-1?"1px solid #eee":"none",backgroundColor:R===ee.name?"#e6f0ff":"transparent",cursor:"pointer",transition:"background-color 0.1s"},onMouseEnter:$=>{R!==ee.name&&($.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:$=>{R!==ee.name&&($.currentTarget.style.backgroundColor="transparent")},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"},children:[i.jsx("div",{style:{fontWeight:600,color:"#000",fontSize:"13px",wordBreak:"break-word",flex:1},children:ee.name}),i.jsx("div",{style:{color:"#666",fontSize:"12px",marginLeft:"12px",whiteSpace:"nowrap"},children:ve(ee.size)})]}),i.jsx("div",{style:{color:"#666",fontSize:"12px"},children:D(ee.lastModified)})]},ee.name))})]})]}),i.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:a,style:{padding:"6px 16px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"13px"},children:"Cancel"}),i.jsx("button",{onClick:L,disabled:!R||b,style:{padding:"6px 16px",background:R&&!b?"#0066cc":"#ccc",border:"none",borderRadius:4,cursor:R&&!b?"pointer":"not-allowed",color:"#fff",fontSize:"13px",fontWeight:500},children:"Restore"})]})]})};function Kb(){const[o,n]=H.useState([]),[a,s]=H.useState(!1),[u,d]=H.useState([]),[v,g]=H.useState(null),[f,b]=H.useState("trace"),[S,R]=H.useState("top"),q=H.useRef([]),T=H.useRef(0),V=H.useRef(!1),X=H.useCallback(()=>{s(!0),d([]),q.current=[]},[]),L=H.useCallback(()=>{s(!1),d([]),q.current=[]},[]),D=H.useCallback(se=>{d(ee=>[...ee,se]),q.current=[...q.current,se]},[]),ve=H.useCallback(se=>{n(ee=>[...ee,se]),d([]),q.current=[]},[]);return{drawingStrokes:o,setDrawingStrokes:n,isDrawing:a,setIsDrawing:s,currentStroke:u,setCurrentStroke:d,tracePreviewMousePos:v,setTracePreviewMousePos:g,drawingMode:f,setDrawingMode:b,selectedDrawingLayer:S,setSelectedDrawingLayer:R,currentStrokeRef:q,lastTraceClickTimeRef:T,isDoubleClickingTraceRef:V,startDrawing:X,stopDrawing:L,addPointToStroke:D,finishStroke:ve}}function Jb(){const[o,n]=H.useState(new Set),[a,s]=H.useState(!1),[u,d]=H.useState(new Set),[v,g]=H.useState(new Set),[f,b]=H.useState(new Set),S=H.useCallback(()=>{n(new Set),d(new Set),g(new Set),b(new Set)},[]),R=H.useCallback((V,X="stroke")=>{X==="stroke"?n(L=>new Set([...L,V])):X==="component"?d(L=>new Set([...L,V])):X==="power"?g(L=>new Set([...L,V])):X==="ground"&&b(L=>new Set([...L,V]))},[]),q=H.useCallback((V,X="stroke")=>{X==="stroke"?n(L=>{const D=new Set(L);return D.delete(V),D}):X==="component"?d(L=>{const D=new Set(L);return D.delete(V),D}):X==="power"?g(L=>{const D=new Set(L);return D.delete(V),D}):X==="ground"&&b(L=>{const D=new Set(L);return D.delete(V),D})},[]),T=H.useCallback((V,X="stroke")=>{X==="stroke"?n(V):X==="component"?d(V):X==="power"?g(V):X==="ground"&&b(V)},[]);return{selectedIds:o,setSelectedIds:n,isSelecting:a,setIsSelecting:s,selectedComponentIds:u,setSelectedComponentIds:d,selectedPowerIds:v,setSelectedPowerIds:g,selectedGroundIds:f,setSelectedGroundIds:b,clearSelection:S,addToSelection:R,removeFromSelection:q,setSelection:T}}function Qb(){const[o,n]=H.useState(null),[a,s]=H.useState(!1),[u,d]=H.useState(null),[v,g]=H.useState("nudge"),f=H.useCallback((S,R)=>{n(S),s(!0),d(R)},[]),b=H.useCallback(()=>{s(!1),n(null),d(null)},[]);return{selectedImageForTransform:o,setSelectedImageForTransform:n,isTransforming:a,setIsTransforming:s,transformStartPos:u,setTransformStartPos:d,transformMode:v,setTransformMode:g,startTransform:f,stopTransform:b}}function ev(){const[o,n]=H.useState(null),[a,s]=H.useState(null),[u,d]=H.useState("overlay"),[v,g]=H.useState(50),[f,b]=H.useState(!1),[S,R]=H.useState(2e3),[q,T]=H.useState(!1),V=H.useCallback(D=>{n(D)},[]),X=H.useCallback(D=>{s(D)},[]),L=H.useCallback(()=>{n(null),s(null)},[]);return{topImage:o,setTopImage:n,bottomImage:a,setBottomImage:s,currentView:u,setCurrentView:d,transparency:v,setTransparency:g,isTransparencyCycling:f,setIsTransparencyCycling:b,transparencyCycleSpeed:S,setTransparencyCycleSpeed:R,isGrayscale:q,setIsGrayscale:T,loadTopImage:V,loadBottomImage:X,clearImages:L}}function tv(){const[o,n]=H.useState(1),[a,s]=H.useState({x:0,y:0}),[u,d]=H.useState(!1),[v,g]=H.useState(!1),f=H.useCallback(()=>{n(1),s({x:0,y:0})},[]),b=H.useCallback((X=1.2)=>{n(L=>L*X)},[]),S=H.useCallback((X=1.2)=>{n(L=>L/X)},[]),R=H.useCallback(X=>{n(X)},[]),q=H.useCallback((X,L,D)=>{const ve=X/D,se=L/D;s(ee=>({x:ee.x-ve,y:ee.y-se}))},[]),T=H.useCallback((X,L)=>{s({x:X,y:L})},[]),V=H.useCallback((X,L)=>({x:X-a.x*o,y:L-a.y*o}),[a,o]);return{viewScale:o,setViewScale:n,cameraWorldCenter:a,setCameraWorldCenter:s,isShiftConstrained:u,setIsShiftConstrained:d,showBothLayers:v,setShowBothLayers:g,resetView:f,zoomIn:b,zoomOut:S,setZoom:R,pan:q,setCameraCenter:T,getViewPan:V}}function nv(){const[o,n]=H.useState(()=>[{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),[a,s]=H.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"}]),[u,d]=H.useState([]),[v,g]=H.useState([]),[f,b]=H.useState(null),[S,R]=H.useState(null),q=H.useCallback($=>{n(I=>[...I,$])},[]),T=H.useCallback(($,I)=>{n(F=>F.map(O=>O.id===$?{...O,...I}:O))},[]),V=H.useCallback($=>{n(I=>I.filter(F=>F.id!==$)),d(I=>I.filter(F=>F.powerBusId!==$))},[]),X=H.useCallback($=>{d(I=>[...I,$])},[]),L=H.useCallback($=>{d(I=>I.filter(F=>F.id!==$))},[]),D=H.useCallback($=>{g(I=>[...I,$])},[]),ve=H.useCallback($=>{g(I=>I.filter(F=>F.id!==$))},[]),se=H.useCallback($=>{s(I=>[...I,$])},[]),ee=H.useCallback(($,I)=>{s(F=>F.map(O=>O.id===$?{...O,...I}:O))},[]),J=H.useCallback($=>{s(I=>I.filter(F=>F.id!==$)),g(I=>I.filter(F=>F.groundBusId===$))},[]);return{powerBuses:o,setPowerBuses:n,groundBuses:a,setGroundBuses:s,powerSymbols:u,setPowerSymbols:d,groundSymbols:v,setGroundSymbols:g,powerEditor:f,setPowerEditor:b,groundEditor:S,setGroundEditor:R,addPowerBus:q,updatePowerBus:T,removePowerBus:V,addPowerSymbol:X,removePowerSymbol:L,addGroundSymbol:D,removeGroundSymbol:ve,addGroundBus:se,updateGroundBus:ee,removeGroundBus:J}}const fi={brushColor:"#008080",brushSize:6,topTraceColor:"#AA4499",bottomTraceColor:"#F781BF",topTraceSize:6,bottomTraceSize:6,viaSize:18,viaColor:"#ff0000",topPadColor:"#0072B2",bottomPadColor:"#56B4E9",topPadSize:18,bottomPadSize:18,topTestPointColor:"#FFFF00",bottomTestPointColor:"#FFFF00",topTestPointSize:18,bottomTestPointSize:18,topComponentColor:"#8C564B",bottomComponentColor:"#9C755F",topComponentSize:18,bottomComponentSize:18,componentConnectionColor:"#E69F00",componentConnectionSize:3};function iv(){const[o,n]=H.useState(fi.brushColor),[a,s]=H.useState(fi.brushSize),[u,d]=H.useState(fi.topTraceColor),[v,g]=H.useState(fi.bottomTraceColor),[f,b]=H.useState(fi.topTraceSize),[S,R]=H.useState(fi.bottomTraceSize),[q,T]=H.useState(fi.topPadColor),[V,X]=H.useState(fi.bottomPadColor),[L,D]=H.useState(fi.topPadSize),[ve,se]=H.useState(fi.bottomPadSize),[ee,J]=H.useState(fi.topTestPointColor),[$,I]=H.useState(fi.bottomTestPointColor),[F,O]=H.useState(fi.topTestPointSize),[he,N]=H.useState(fi.bottomTestPointSize),[C,re]=H.useState(fi.topComponentColor),[ie,fe]=H.useState(fi.bottomComponentColor),[te,ne]=H.useState(fi.topComponentSize),[pe,Ne]=H.useState(fi.bottomComponentSize),[me,U]=H.useState(fi.componentConnectionColor),[A,E]=H.useState(fi.componentConnectionSize),W=H.useCallback(()=>{n(fi.brushColor),s(fi.brushSize),d(fi.topTraceColor),g(fi.bottomTraceColor),b(fi.topTraceSize),R(fi.bottomTraceSize),T(fi.topPadColor),X(fi.bottomPadColor),D(fi.topPadSize),se(fi.bottomPadSize),J(fi.topTestPointColor),I(fi.bottomTestPointColor),O(fi.topTestPointSize),N(fi.bottomTestPointSize),re(fi.topComponentColor),fe(fi.bottomComponentColor),ne(fi.topComponentSize),Ne(fi.bottomComponentSize),U(fi.componentConnectionColor),E(fi.componentConnectionSize)},[]),xe=H.useCallback(Ae=>{Ae.brushColor!==void 0&&n(Ae.brushColor),Ae.brushSize!==void 0&&s(Ae.brushSize),Ae.topTraceColor!==void 0&&d(Ae.topTraceColor),Ae.bottomTraceColor!==void 0&&g(Ae.bottomTraceColor),Ae.topTraceSize!==void 0&&b(Ae.topTraceSize),Ae.bottomTraceSize!==void 0&&R(Ae.bottomTraceSize),Ae.topPadColor!==void 0&&T(Ae.topPadColor),Ae.bottomPadColor!==void 0&&X(Ae.bottomPadColor),Ae.topPadSize!==void 0&&D(Ae.topPadSize),Ae.bottomPadSize!==void 0&&se(Ae.bottomPadSize),Ae.topTestPointColor!==void 0&&J(Ae.topTestPointColor),Ae.bottomTestPointColor!==void 0&&I(Ae.bottomTestPointColor),Ae.topTestPointSize!==void 0&&O(Ae.topTestPointSize),Ae.bottomTestPointSize!==void 0&&N(Ae.bottomTestPointSize),Ae.topComponentColor!==void 0&&re(Ae.topComponentColor),Ae.bottomComponentColor!==void 0&&fe(Ae.bottomComponentColor),Ae.topComponentSize!==void 0&&ne(Ae.topComponentSize),Ae.bottomComponentSize!==void 0&&Ne(Ae.bottomComponentSize),Ae.componentConnectionColor!==void 0&&U(Ae.componentConnectionColor),Ae.componentConnectionSize!==void 0&&E(Ae.componentConnectionSize)},[]),Ce=H.useCallback((Ae,De,Ye)=>{},[]),Te=H.useCallback((Ae,De,Ye)=>{},[]),Le=H.useCallback(()=>({brushColor:o,brushSize:a,topTraceColor:u,bottomTraceColor:v,topTraceSize:f,bottomTraceSize:S,viaSize:fi.viaSize,viaColor:fi.viaColor,topPadColor:q,bottomPadColor:V,topPadSize:L,bottomPadSize:ve,topTestPointColor:ee,bottomTestPointColor:$,topTestPointSize:F,bottomTestPointSize:he,topComponentColor:C,bottomComponentColor:ie,topComponentSize:te,bottomComponentSize:pe,componentConnectionColor:me,componentConnectionSize:A}),[o,a,u,v,f,S,q,V,L,ve,ee,$,F,he,C,ie,te,pe,me,A]);return{brushColor:o,setBrushColor:n,brushSize:a,setBrushSize:s,topTraceColor:u,setTopTraceColor:d,bottomTraceColor:v,setBottomTraceColor:g,topTraceSize:f,setTopTraceSize:b,bottomTraceSize:S,setBottomTraceSize:R,topPadColor:q,setTopPadColor:T,bottomPadColor:V,setBottomPadColor:X,topPadSize:L,setTopPadSize:D,bottomPadSize:ve,setBottomPadSize:se,topTestPointColor:ee,setTopTestPointColor:J,bottomTestPointColor:$,setBottomTestPointColor:I,topTestPointSize:F,setTopTestPointSize:O,bottomTestPointSize:he,setBottomTestPointSize:N,topComponentColor:C,setTopComponentColor:re,bottomComponentColor:ie,setBottomComponentColor:fe,topComponentSize:te,setTopComponentSize:ne,bottomComponentSize:pe,setBottomComponentSize:Ne,componentConnectionColor:me,setComponentConnectionColor:U,componentConnectionSize:A,setComponentConnectionSize:E,resetToDefaults:W,loadFromProject:xe,getCurrentSettings:Le,saveDefaultSize:Ce,saveDefaultColor:Te}}function av(o,n,a,s,u,d,v,g,f,b,S,R,q,T,V,X,L,D,ve,se,ee,J,$,I,F){const[O,he]=H.useState(()=>o()),N=H.useRef(null),C=H.useRef(s),re=H.useRef(u),ie=H.useCallback(ne=>n==="draw"&&a==="trace"?ne.get("trace"):n==="draw"&&a==="via"?ne.get("via"):n==="draw"&&a==="pad"?ne.get("pad"):n==="component"?ne.get("component"):n==="power"?ne.get("power"):n==="ground"?ne.get("ground"):null,[n,a]);H.useEffect(()=>{he(ne=>{const pe=ie(ne),Ne=pe?.id||null,me=N.current,U=new Map(ne);if(me&&me!==Ne){const A=ne.get(me);A&&U.set(me,{...A,settings:{color:C.current,size:re.current}})}if(pe&&Ne!==me)if(n==="draw"&&a==="trace"){const A=J||"top",E=A==="top"?d:v,W=A==="top"?g:f;C.current=E,re.current=W,U.set("trace",{...pe,settings:{color:E,size:W}})}else if(n==="draw"&&a==="pad"){const A=$||"top",E=A==="top"?b:S,W=A==="top"?R:q;C.current=E,re.current=W,U.set("pad",{...pe,settings:{color:E,size:W}})}else if(n==="component"){const A=F||"top",E=A==="top"?D:ve,W=A==="top"?se:ee;C.current=E,re.current=W,U.set("component",{...pe,settings:{color:E,size:W}})}else C.current=pe.settings.color,re.current=pe.settings.size;return N.current=Ne,U})},[n,a,s,u,d,v,g,f,b,S,R,q,D,ve,se,ee,J,$,F,ie]);const fe=H.useCallback((ne,pe)=>{he(Ne=>{const me=new Map(Ne),U=me.get(ne);return U&&me.set(ne,{...U,settings:pe}),me})},[]),te=H.useCallback((ne,pe,Ne)=>{he(me=>{const U=new Map(me),A=U.get(ne);if(A){const E=new Map(A.layerSettings);E.set(pe,Ne),U.set(ne,{...A,layerSettings:E})}return U})},[]);return{toolRegistry:O,setToolRegistry:he,updateToolSettings:fe,updateToolLayerSettings:te,getCurrentToolDef:ie}}function ov(o){const{currentTool:n,drawingMode:a,traceToolLayer:s,padToolLayer:u,testPointToolLayer:d,componentToolLayer:v}=o,[g,f]=H.useState(0),b=H.useCallback(()=>n==="draw"&&a==="via"?"via":n==="draw"&&a==="pad"?u==="bottom"?"padBottom":"padTop":n==="draw"&&a==="testPoint"?d==="bottom"?"testPointBottom":"testPointTop":n==="draw"&&a==="trace"?s==="bottom"?"traceBottom":"traceTop":n==="component"?v==="bottom"?"componentBottom":"componentTop":n==="power"?"power":n==="ground"?"ground":null,[n,a,u,d,s,v]),S=H.useCallback(()=>{const V=b();if(V){const X=ai.get(V);return{currentTool:n,drawingMode:a,layer:n==="draw"&&a==="pad"?u||"top":n==="draw"&&a==="testPoint"?d||"top":n==="draw"&&a==="trace"?s||"top":n==="component"?v||"top":void 0,toolInstanceId:V,color:X.color,size:X.size}}return{currentTool:n,drawingMode:a,layer:void 0,toolInstanceId:null,color:"#000000",size:10}},[n,a,u,d,s,v,b]);H.useEffect(()=>{const V=b();return V?ai.subscribe(V,()=>{f(L=>L+1)}):void 0},[b]);const R=S(),q=H.useCallback(V=>{const X=b();X&&ai.setColor(X,V)},[b]),T=H.useCallback(V=>{const X=b();X&&ai.setSize(X,V)},[b]);return{toolState:R,setColor:q,setSize:T,getCurrentToolInstanceId:b}}function rv(){const[o,n]=H.useState(!1),[a,s]=H.useState(!1),[u,d]=H.useState(!1),[v,g]=H.useState(!1),[f,b]=H.useState(!1),[S,R]=H.useState(!1),[q,T]=H.useState(!1),[V,X]=H.useState(!1),L=H.useCallback(()=>{n(!0),s(!0),d(!0),g(!0),b(!0),R(!0),T(!0),X(!0)},[]),D=H.useCallback(()=>{n(!1),s(!1),d(!1),g(!1),b(!1),R(!1),T(!1),X(!1)},[]);return{areImagesLocked:o,setAreImagesLocked:n,areViasLocked:a,setAreViasLocked:s,arePadsLocked:u,setArePadsLocked:d,areTestPointsLocked:v,setAreTestPointsLocked:g,areTracesLocked:f,setAreTracesLocked:b,areComponentsLocked:S,setAreComponentsLocked:R,areGroundNodesLocked:q,setAreGroundNodesLocked:T,arePowerNodesLocked:V,setArePowerNodesLocked:X,lockAll:L,unlockAll:D}}function sv(){const[o,n]=H.useState(null),[a,s]=H.useState({visible:!1,size:6}),[u,d]=H.useState({visible:!1,interval:5}),[v,g]=H.useState({visible:!1,source:null,interval:5}),[f,b]=H.useState({visible:!1,text:""}),[S,R]=H.useState({visible:!1,title:"",message:""}),[q,T]=H.useState({visible:!1}),[V,X]=H.useState({visible:!1}),[L,D]=H.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[ve,se]=H.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[ee,J]=H.useState(!1),[$,I]=H.useState(!0),[F,O]=H.useState(!1);return{openMenu:o,setOpenMenu:n,setSizeDialog:a,setSetSizeDialog:s,autoSaveDialog:u,setAutoSaveDialog:d,autoSavePromptDialog:v,setAutoSavePromptDialog:g,debugDialog:f,setDebugDialog:b,errorDialog:S,setErrorDialog:R,newProjectDialog:q,setNewProjectDialog:T,openProjectDialog:V,setOpenProjectDialog:X,newProjectSetupDialog:L,setNewProjectSetupDialog:D,saveAsDialog:ve,setSaveAsDialog:se,showColorPicker:ee,setShowColorPicker:J,showWelcomeDialog:$,setShowWelcomeDialog:I,transformImagesDialogVisible:F,setTransformImagesDialogVisible:O}}function lv(){const[o,n]=H.useState(!1),[a,s]=H.useState(1),[u,d]=H.useState(null),[v,g]=H.useState(""),[f,b]=H.useState(""),[S,R]=H.useState(null),[q,T]=H.useState("pcb_project"),[V,X]=H.useState([]),[L,D]=H.useState(-1),ve=H.useRef(null),se=H.useRef(!1),ee=H.useRef(!1);return{autoSaveEnabled:o,setAutoSaveEnabled:n,autoSaveInterval:a,setAutoSaveInterval:s,autoSaveDirHandle:u,setAutoSaveDirHandle:d,autoSaveBaseName:v,setAutoSaveBaseName:g,currentProjectFilePath:f,setCurrentProjectFilePath:b,projectDirHandle:S,setProjectDirHandle:R,projectName:q,setProjectName:T,autoSaveFileHistory:V,setAutoSaveFileHistory:X,currentFileIndex:L,setCurrentFileIndex:D,autoSaveIntervalRef:ve,hasChangesSinceLastAutoSaveRef:se,prevAutoSaveEnabledRef:ee}}function cv(){const[o,n]=H.useState(null),a=H.useRef(!1),s=H.useCallback((g,f,b,S,R)=>{if(a.current)return;const q={drawingStrokes:JSON.parse(JSON.stringify(g)),componentsTop:JSON.parse(JSON.stringify(f)),componentsBottom:JSON.parse(JSON.stringify(b)),powerSymbols:JSON.parse(JSON.stringify(S)),groundSymbols:JSON.parse(JSON.stringify(R))};n(q)},[]),u=H.useCallback(()=>{if(!o)return null;a.current=!0;const g=o;return n(null),setTimeout(()=>{a.current=!1},100),g},[o]),d=o!==null,v=H.useCallback(()=>{n(null)},[]);return{saveSnapshot:s,undo:u,canUndo:d,clearSnapshot:v}}function uv(){const n=ev(),{topImage:a,setTopImage:s,bottomImage:u,setBottomImage:d,currentView:v,setCurrentView:g,transparency:f,setTransparency:b,isTransparencyCycling:S,setIsTransparencyCycling:R,transparencyCycleSpeed:q,setTransparencyCycleSpeed:T,isGrayscale:V,setIsGrayscale:X}=n,[L,D]=H.useState("none"),[ve,se]=H.useState(()=>{const c=localStorage.getItem("bomExportFormat");return c==="json"||c==="pdf"?c:"pdf"});At.useEffect(()=>{localStorage.setItem("bomExportFormat",ve)},[ve]);const ee=iv(),{brushColor:J,setBrushColor:$,brushSize:I,setBrushSize:F,topTraceColor:O,setTopTraceColor:he,bottomTraceColor:N,setBottomTraceColor:C,topTraceSize:re,setTopTraceSize:ie,bottomTraceSize:fe,setBottomTraceSize:te,topPadColor:ne,setTopPadColor:pe,bottomPadColor:Ne,setBottomPadColor:me,topPadSize:U,setTopPadSize:A,bottomPadSize:E,setBottomPadSize:W,topTestPointColor:xe,setTopTestPointColor:Ce,bottomTestPointColor:Te,setBottomTestPointColor:Le,topTestPointSize:Ae,setTopTestPointSize:De,bottomTestPointSize:Ye,setBottomTestPointSize:pt,topComponentColor:mt,setTopComponentColor:_t,bottomComponentColor:de,setBottomComponentColor:vt,topComponentSize:zt,setTopComponentSize:kt,bottomComponentSize:ot,setBottomComponentSize:sn,componentConnectionColor:Ut,setComponentConnectionColor:xn,componentConnectionSize:nn,setComponentConnectionSize:Un,saveDefaultSize:Ct,saveDefaultColor:Mt}=ee,ri=Kb(),{drawingStrokes:ht,setDrawingStrokes:St,isDrawing:Rn,setIsDrawing:Zt,currentStroke:_n,setCurrentStroke:Tn,tracePreviewMousePos:ln,setTracePreviewMousePos:yn,drawingMode:nt,setDrawingMode:Qt,selectedDrawingLayer:Wt,setSelectedDrawingLayer:Vt,currentStrokeRef:bn,lastTraceClickTimeRef:Fi,isDoubleClickingTraceRef:Mn}=ri,fn=Qb(),{selectedImageForTransform:$t,setSelectedImageForTransform:To,isTransforming:eo,setIsTransforming:xo,transformStartPos:Co,setTransformStartPos:Kt,transformMode:Ao,setTransformMode:rr}=fn,Go=tv(),{viewScale:jt,setViewScale:si,cameraWorldCenter:li,setCameraWorldCenter:zi,isShiftConstrained:bs,setIsShiftConstrained:ko,showBothLayers:Hi,setShowBothLayers:la,setCameraCenter:ba,getViewPan:No}=Go,[Bn,kr]=H.useState("top"),[hi,sr]=H.useState("top"),[mi,lr]=H.useState("top"),[_i,vs]=H.useState("top"),cr=At.useRef("top"),xa=At.useRef("top"),ws=At.useRef("top"),yo=At.useRef("top");At.useEffect(()=>{cr.current=Bn},[Bn]),At.useEffect(()=>{xa.current=hi},[hi]),At.useEffect(()=>{ws.current=mi},[mi]),At.useEffect(()=>{yo.current=_i},[_i]);const Ir=ov({currentTool:L,drawingMode:nt,traceToolLayer:Bn,padToolLayer:hi,testPointToolLayer:mi,componentToolLayer:_i}),{toolState:ca}=Ir,Hl=av(Nb,L,nt,J,I,O,N,re,fe,ne,Ne,U,E,xe,Te,Ae,Ye,mt,de,zt,ot,Bn,hi,mi,_i),{toolRegistry:Gn,setToolRegistry:va,getCurrentToolDef:Es,updateToolSettings:Xo,updateToolLayerSettings:ur}=Hl,Nr=At.useRef(null),Vn=At.useRef(J),Io=At.useRef(I);At.useEffect(()=>{va(c=>{const y=Es(c),k=y?.id||null,B=Nr.current,_=new Map(c);if(B&&B!==k){const Z=c.get(B);Z&&_.set(B,{...Z,settings:{color:Vn.current,size:Io.current}})}if(y&&k!==B)if(L==="draw"&&nt==="trace"){const Z=Bn||"top",M=Z==="top"?O:N,ae=Z==="top"?re:fe;$(M),F(ae),Vn.current=M,Io.current=ae;const ue=new Map(y.layerSettings);ue.set("top",{color:O,size:re}),ue.set("bottom",{color:N,size:fe}),_.set("trace",{...y,settings:{color:M,size:ae},layerSettings:ue})}else if(L==="draw"&&nt==="pad"){const Z=hi||"top",M=Z==="top"?ne:Ne,ae=Z==="top"?U:E;$(M),F(ae),Vn.current=M,Io.current=ae;const ue=new Map(y.layerSettings);ue.set("top",{color:ne,size:U}),ue.set("bottom",{color:Ne,size:E}),_.set("pad",{...y,settings:{color:M,size:ae},layerSettings:ue})}else if(L==="draw"&&nt==="testPoint"){const Z=mi||"top",M=Z==="top"?xe:Te,ae=Z==="top"?Ae:Ye;$(M),F(ae),Vn.current=M,Io.current=ae;const ue=new Map(y.layerSettings);ue.set("top",{color:xe,size:Ae}),ue.set("bottom",{color:Te,size:Ye}),_.set("testPoint",{...y,settings:{color:M,size:ae},layerSettings:ue})}else if(L==="component"){const Z=_i||"top",M=Z==="top"?mt:de,ae=Z==="top"?zt:ot;$(M),F(ae),Vn.current=M,Io.current=ae;const ue=new Map(y.layerSettings);ue.set("top",{color:mt,size:zt}),ue.set("bottom",{color:de,size:ot}),_.set("component",{...y,settings:{color:M,size:ae},layerSettings:ue})}else{const Z=y.settings;$(Z.color),F(Z.size),Vn.current=Z.color,Io.current=Z.size}return Nr.current=k,_})},[L,nt,Es,O,N,re,fe,ne,Ne,U,E,xe,Te,Ae,Ye,mi,mt,de,zt,ot]),At.useEffect(()=>{const c=Gn.get("trace");if(c){const _=c.layerSettings.get("top"),Z=c.layerSettings.get("bottom");_&&(he(_.color),ie(_.size)),Z&&(C(Z.color),te(Z.size))}const y=Gn.get("pad");if(y){const _=y.layerSettings.get("top"),Z=y.layerSettings.get("bottom");_&&(pe(_.color),A(_.size)),Z&&(me(Z.color),W(Z.size))}const k=Gn.get("testPoint");if(k){const _=k.layerSettings.get("top"),Z=k.layerSettings.get("bottom");_&&(Ce(_.color),De(_.size)),Z&&(Le(Z.color),pt(Z.size))}const B=Gn.get("component");if(B){const _=B.layerSettings.get("top"),Z=B.layerSettings.get("bottom");_&&(_t(_.color),kt(_.size)),Z&&(vt(Z.color),sn(Z.size))}},[]),At.useEffect(()=>{va(c=>{const y=new Map(c),k=c.get("trace");if(k){const ae=new Map(k.layerSettings);ae.set("top",{color:O,size:re}),ae.set("bottom",{color:N,size:fe}),y.set("trace",{...k,layerSettings:ae})}const B=c.get("pad");if(B){const ae=new Map(B.layerSettings);ae.set("top",{color:ne,size:U}),ae.set("bottom",{color:Ne,size:E}),y.set("pad",{...B,layerSettings:ae})}const _=c.get("testPoint");if(_){const ae=new Map(_.layerSettings);ae.set("top",{color:xe,size:Ae}),ae.set("bottom",{color:Te,size:Ye}),y.set("testPoint",{..._,layerSettings:ae})}const Z=c.get("component");if(Z){const ae=new Map(Z.layerSettings);ae.set("top",{color:mt,size:zt}),ae.set("bottom",{color:de,size:ot}),y.set("component",{...Z,layerSettings:ae})}const M=c.get("componentConnection");return M&&y.set("componentConnection",{...M,settings:{color:Ut,size:nn}}),y})},[O,N,re,fe,ne,Ne,U,E,xe,Te,Ae,Ye,mt,de,zt,ot,Ut,nn,va]),At.useEffect(()=>{va(c=>{const y=Es(c);if(y)if(L==="draw"&&nt==="trace"){const k=Bn||"top";k==="top"?(he(J),ie(I),Mt("trace",J,"top"),Ct("trace",I,"top")):(C(J),te(I),Mt("trace",J,"bottom"),Ct("trace",I,"bottom"));const B=new Map(c),_=new Map(y.layerSettings);return _.set(k,{color:J,size:I}),B.set(y.id,{...y,layerSettings:_,settings:{color:J,size:I}}),Vn.current=J,Io.current=I,B}else if(L==="draw"&&nt==="pad"){const k=hi||"top";k==="top"?(pe(J),A(I),Mt("pad",J,"top"),Ct("pad",I,"top")):(me(J),W(I),Mt("pad",J,"bottom"),Ct("pad",I,"bottom"));const B=new Map(c),_=new Map(y.layerSettings);return _.set(k,{color:J,size:I}),B.set(y.id,{...y,layerSettings:_,settings:{color:J,size:I}}),Vn.current=J,Io.current=I,B}else if(L==="draw"&&nt==="testPoint"){const k=mi||"top";k==="top"?(Ce(J),De(I),Mt("testPoint",J,"top"),Ct("testPoint",I,"top")):(Le(J),pt(I),Mt("testPoint",J,"bottom"),Ct("testPoint",I,"bottom"));const B=new Map(c),_=new Map(y.layerSettings);return _.set(k,{color:J,size:I}),B.set(y.id,{...y,layerSettings:_,settings:{color:J,size:I}}),Vn.current=J,Io.current=I,B}else if(L==="component"){const k=_i||"top";k==="top"?(_t(J),kt(I),Mt("component",J,"top"),Ct("component",I,"top")):(vt(J),sn(I),Mt("component",J,"bottom"),Ct("component",I,"bottom"));const B=new Map(c),_=new Map(y.layerSettings);return _.set(k,{color:J,size:I}),B.set(y.id,{...y,layerSettings:_,settings:{color:J,size:I}}),Vn.current=J,Io.current=I,B}else{const k=new Map(c);return k.set(y.id,{...y,settings:{color:J,size:I}}),Vn.current=J,Io.current=I,k}return c})},[J,I,L,nt,Bn,hi,mi,_i,Es,Mt,Ct,Ad,he,C,ie,te,pe,me,A,W,Ce,Le,De,pt,_t,vt,kt,sn]),At.useEffect(()=>{Zs(L==="draw"&&nt==="trace")},[L,nt]),At.useEffect(()=>{gl(L==="draw"&&nt==="pad")},[L,nt]),At.useEffect(()=>{zl(L==="draw"&&nt==="testPoint")},[L,nt]),At.useEffect(()=>{ca.toolInstanceId&&($(ca.color),F(ca.size))},[ca.toolInstanceId,ca.color,ca.size,$,F,L,nt]);const[Ur,zo]=H.useState(void 0),[,ol]=H.useState([]),[,ua]=H.useState([]),[,ci]=H.useState([]),[,Gi]=H.useState([]),[wa,Da]=H.useState([]),[ql,Sa]=H.useState([]),[dr,rl]=H.useState([]),[fr,Ss]=H.useState([]),da=H.useRef(null),Qn=At.useMemo(()=>{const c=da.current;if(!c)return{x:0,y:0};const y=(c.width-10)/2+5,k=(c.height-10)/2+5;return No(y,k)},[da.current?.width,da.current?.height,li,jt,No]),Fr=At.useCallback(c=>{const y=da.current;if(!y)return;const k=(y.width-10)/2+5,B=(y.height-10)/2+5,_=No(k,B),Z=typeof c=="function"?c(_):c,M=(k-Z.x)/jt,ae=(B-Z.y)/jt;zi({x:M,y:ae})},[No,jt,zi]),Wl=Jb(),{selectedIds:Fn,setSelectedIds:Ze,isSelecting:vi,setIsSelecting:Zo,selectedComponentIds:Cn,setSelectedComponentIds:Jt,selectedPowerIds:Rt,setSelectedPowerIds:Sn,selectedGroundIds:ui,setSelectedGroundIds:An}=Wl,Hr=My(),{componentsTop:Ft,setComponentsTop:wi,componentsBottom:cn,setComponentsBottom:Xn,componentEditor:ns,setComponentEditor:is,connectingPin:Uo,setConnectingPin:Fo,componentDialogPosition:zr,setComponentDialogPosition:js,isDraggingDialog:lo,setIsDraggingDialog:Ts,dialogDragOffset:Ko,setDialogDragOffset:Os,openComponentEditor:Vl}=Hr,$l=nv(),{powerBuses:hn,setPowerBuses:Ho,groundBuses:Si,setGroundBuses:Cs,powerSymbols:Ma,setPowerSymbols:qi,groundSymbols:_o,setGroundSymbols:Xi,powerEditor:Jo,setPowerEditor:w}=$l,G=cv(),{saveSnapshot:ye,undo:_e,clearSnapshot:Ie}=G;At.useEffect(()=>{L==="power"?(ge(!1),hn.length>1?z&&hn.some(y=>y.id===z)?j(!1):(j(!0),z!==null&&Y(null)):hn.length===1?(Y(hn[0].id),j(!1)):(j(!0),Y(null))):j(!1)},[L,hn]),At.useEffect(()=>{L==="ground"?(j(!1),Si.length>1?Re&&Si.some(y=>y.id===Re)?ge(!1):(ge(!0),Re!==null&&Fe(null)):Si.length===1?(Fe(Si[0].id),ge(!1)):(ge(!0),Fe(null))):ge(!1)},[L,Si]),At.useEffect(()=>{L!=="power"&&L!=="ground"&&(j(!1),ge(!1))},[L]);const dt=rv(),{areImagesLocked:ft,setAreImagesLocked:Yt,areViasLocked:Ot,setAreViasLocked:jn,arePadsLocked:vn,setArePadsLocked:pi,areTestPointsLocked:Mi,setAreTestPointsLocked:Ba,areTracesLocked:Zn,setAreTracesLocked:Na,areComponentsLocked:ji,setAreComponentsLocked:Va,areGroundNodesLocked:$a,setAreGroundNodesLocked:Qo,arePowerNodesLocked:Bi,setArePowerNodesLocked:Is}=dt,hc=sv(),{openMenu:Us,setOpenMenu:hr,setSizeDialog:Fs,setSetSizeDialog:as,autoSaveDialog:co,setAutoSaveDialog:pr,autoSavePromptDialog:As,setAutoSavePromptDialog:er,debugDialog:gr,setDebugDialog:to,errorDialog:ks,setErrorDialog:Ns,newProjectDialog:Yl,setNewProjectDialog:mo,openProjectDialog:qr,setOpenProjectDialog:_r,newProjectSetupDialog:Li,setNewProjectSetupDialog:qo,saveAsDialog:Ei,setSaveAsDialog:uo,showColorPicker:Wo,setShowColorPicker:xr,transformImagesDialogVisible:Hs,setTransformImagesDialogVisible:zs}=hc,pc=lv(),[gc,na]=H.useState(!1),[xc,Wr]=H.useState(!1),[os,Ya]=H.useState(!1),[rs,qs]=H.useState(null),[sl,Vr]=H.useState(null),[_s,$r]=H.useState(null),[ll,tr]=H.useState(null),{autoSaveEnabled:Ea,setAutoSaveEnabled:fa,autoSaveInterval:bo,setAutoSaveInterval:ei,autoSaveDirHandle:ti,setAutoSaveDirHandle:Ti,autoSaveBaseName:ia,setAutoSaveBaseName:fo,currentProjectFilePath:Lr,setCurrentProjectFilePath:Ga,projectDirHandle:Oi,setProjectDirHandle:ss,projectName:vo,setProjectName:ls,autoSaveFileHistory:Xu,setAutoSaveFileHistory:cl,currentFileIndex:Zc,setCurrentFileIndex:Ws,autoSaveIntervalRef:oi,hasChangesSinceLastAutoSaveRef:Lo,prevAutoSaveEnabledRef:yr}=pc,Tl=H.useRef(null),Dc=H.useRef(null),Gl=H.useRef(null),Cl=H.useRef(null),Xl=H.useRef(null),Yr=H.useRef(null),yc=H.useRef(null),[Xa,no]=H.useState(!1),Vs=H.useRef(null),io=H.useRef(null),[Zl,mr]=H.useState(!1),[$s,Ys]=H.useState({}),[ul,Pr]=H.useState(!1),Po=H.useRef(null),[dl,Mc]=H.useState(!1),[nr,cs]=H.useState(null),[Gs,fl]=H.useState(null),[Xs,us]=H.useState({width:960,height:600}),Gr=H.useRef(null),hl=H.useRef(null),ds=H.useRef(null),br=H.useRef(null),vr=H.useRef(null),Su=H.useRef(null),Kc=H.useRef(null),Bc=H.useRef(null),[Kl,ya]=H.useState(!0),[Wi,Hn]=H.useState(!0),[Vi,Zi]=H.useState(!0),[za,wr]=H.useState(!0),[ir,ar]=H.useState(!0),[Ki,Rr]=H.useState(!0),[Sr,Xr]=H.useState(!0),[Zr,Kr]=H.useState(!0),[wo,Jr]=H.useState(!0),[Oa,Dr]=H.useState(!0),[Ro,or]=H.useState(!0),[Qr,jr]=H.useState(!0),en=Ma,Ln=_o,[Zu,Ec]=H.useState(!1),[Md,Bd]=H.useState(null),[Ia,Jl]=H.useState(!1),[Ls,Ql]=H.useState(void 0),[Jc,h]=H.useState(!1),[x,j]=H.useState(!1),[z,Y]=H.useState(null),[Q,K]=H.useState(new Set),[le,ce]=H.useState(!1),[be,Pe]=H.useState(null),[Ge,ge]=H.useState(!1),[Re,Fe]=H.useState(null),[it,$e]=H.useState(!0),[tt,st]=H.useState(!1),[Tt,xt]=H.useState(!1),Gt=H.useRef({}),[Et,kn]=H.useState(!0),[qt,$n]=H.useState(!0),[Ji,qn]=H.useState(!0),[Bt,Pt]=H.useState(null),[ja,Nn]=H.useState(!1),[Wn,$i]=H.useState(null),[ao,_a]=H.useState(!1),[Ii,Ua]=H.useState(null),[Do,oo]=H.useState(!1),[Kn,Ci]=H.useState(null),[ha,bi]=H.useState([]),[ro,ma]=H.useState(!1),[gi,Ta]=H.useState(null),[Ui,Za]=H.useState(!1),[Fa,Qi]=H.useState(null),[Ai,Mo]=H.useState(null),[Ka,pn]=H.useState(!1);At.useEffect(()=>{hn.length===0&&Ho([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[hn.length,Ho]);const an=H.useCallback((c,y)=>{const k=en.find(_=>_.pointId===c);if(k){const _=y.find(M=>M.id===k.powerBusId);return`Via (${_?_.voltage:k.type||"Power Node"})`}const B=Ln.find(_=>_.pointId===c);return B?`Via (${B.type||"Ground"})`:"Via"},[en,Ln]),Jn=H.useCallback((c,y)=>{const k=en.find(_=>_.pointId===c);if(k){const _=y.find(M=>M.id===k.powerBusId);return`Pad (${_?_.voltage:k.type||"Power Node"})`}const B=Ln.find(_=>_.pointId===c);return B?`Pad (${B.type||"Ground"})`:"Pad"},[en,Ln]),Ja=H.useCallback((c,y)=>{const k=en.find(_=>_.pointId===c);if(k){const _=y.find(M=>M.id===k.powerBusId);return`Test Point (${_?_.voltage:k.type||"Power Node"})`}const B=Ln.find(_=>_.pointId===c);return B?`Test Point (${B.type||"Ground"})`:"Test Point"},[en,Ln]),fs=H.useCallback(()=>{const c=ht.filter(y=>y.type==="via").map(y=>y.id);Ze(new Set(c)),Jt(new Set),Sn(new Set),An(new Set),K(new Set)},[ht,Ze,Jt,Sn,An]),Tr=H.useCallback(()=>{const c=ht.filter(y=>y.type==="trace").map(y=>y.id);Ze(new Set(c)),Jt(new Set),Sn(new Set),An(new Set),K(new Set)},[ht,Ze,Jt,Sn,An]),ho=H.useCallback(()=>{const c=ht.filter(y=>y.type==="pad").map(y=>y.id);Ze(new Set(c)),Jt(new Set),Sn(new Set),An(new Set),K(new Set)},[ht,Ze,Jt,Sn,An]),Al=H.useCallback(()=>{const c=[...Ft,...cn].map(y=>y.id);Jt(new Set(c)),Ze(new Set),Sn(new Set),An(new Set),K(new Set)},[Ft,cn,Jt,Ze,Sn,An]),kl=H.useCallback(()=>{const c=[...Ft,...cn].filter(y=>{const k=y.pinConnections||[];return!(k.length>0&&k.length===y.pinCount&&k.every(_=>_&&_.trim()!==""))}).map(y=>y.id);Jt(new Set(c)),Ze(new Set),Sn(new Set),An(new Set),K(new Set),to({visible:!0,text:""})},[Ft,cn,Jt,Ze,Sn,An,to]),Qc=H.useCallback(()=>{const c=new Set;let y=0;for(const k of[...Ft,...cn]){const B=k.pinConnections||[];for(const _ of B)if(_&&_.trim()!==""){const Z=parseInt(_.trim(),10);if(!isNaN(Z)&&Z>0){const M=`${k.id}:${Z}`;c.add(M),y++}}}if(console.log(`Component connections: ${y} connection lines found`),c.size===0){console.log("No component connections found - components may not have pins connected"),alert("No component connections found. Please connect component pins to vias or pads first.");return}K(c),Ze(new Set),Jt(new Set),Sn(new Set),An(new Set),console.log(`Selected ${c.size} component connection lines`)},[Ft,cn,Ze,Jt,Sn,An]),ea=H.useCallback(()=>a?{x:a.x,y:a.y}:u?{x:u.x,y:u.y}:{x:0,y:0},[a,u]),ju=H.useCallback(()=>{const y=ea().x,k=B=>{if(!B)return null;const _=(B.rotation||0)%360,Z=_<0?_+360:_,M=1;if(Z>=0&&Z<M||Z>=180-M&&Z<180+M||Z>=360-M)return{...B,flipX:!B.flipX};if(Z>=90-M&&Z<90+M||Z>=270-M&&Z<270+M)return{...B,flipY:!B.flipY};{const ae=Z*Math.PI/180,ue=Math.cos(ae),Se=Math.sin(ae),we=ue,je=-Se;return Math.abs(we)>Math.abs(je)?{...B,flipX:!B.flipX}:{...B,flipY:!B.flipY}}};if(os){if(a&&rs!==null&&s({...a,flipX:rs,flipY:_s||!1}),u&&sl!==null){const B=k(u);B&&d({...B,x:y-(u.x-y),flipX:sl,flipY:ll||!1})}wi(B=>B.map(_=>({..._,x:y-(_.x-y),orientation:_.orientation?(360-_.orientation)%360:0}))),Xn(B=>B.map(_=>({..._,x:y-(_.x-y),orientation:_.orientation?(360-_.orientation)%360:0}))),St(B=>B.map(_=>({..._,points:_.points.map(Z=>({...Z,x:y-(Z.x-y)}))}))),qi(B=>B.map(_=>({..._,x:y-(_.x-y),flipX:!_.flipX}))),Xi(B=>B.map(_=>({..._,x:y-(_.x-y),flipX:!_.flipX}))),zi(B=>({x:y-(B.x-y),y:B.y})),Ya(!1)}else{if(a?(qs(a.flipX||!1),$r(a.flipY||!1),s(k(a))):(qs(null),$r(null)),u){Vr(u.flipX||!1),tr(u.flipY||!1);const B=k(u);B&&d({...B,x:y-(u.x-y)})}else Vr(null),tr(null);wi(B=>B.map(_=>({..._,x:y-(_.x-y),orientation:_.orientation?(360-_.orientation)%360:0}))),Xn(B=>B.map(_=>({..._,x:y-(_.x-y),orientation:_.orientation?(360-_.orientation)%360:0}))),St(B=>B.map(_=>({..._,points:_.points.map(Z=>({...Z,x:y-(Z.x-y)}))}))),qi(B=>B.map(_=>({..._,x:y-(_.x-y),flipX:!_.flipX}))),Xi(B=>B.map(_=>({..._,x:y-(_.x-y),flipX:!_.flipX}))),zi(B=>({x:y-(B.x-y),y:B.y})),Ya(!0)}},[os,a,u,rs,_s,sl,ll,ea,s,d,wi,Xn,St,qi,Xi,qs,$r,Vr,tr,zi,Ya]),Tu=H.useCallback(c=>{const y=ea(),k=y.x,B=y.y,_=c*Math.PI/180,Z=Math.cos(_),M=Math.sin(_),ae=(Se,we)=>{const je=Se-k,Oe=we-B;return{x:k+je*Z-Oe*M,y:B+je*M+Oe*Z}};if(a){const Se=ae(a.x,a.y),we=(((a.rotation||0)+c)%360+360)%360;s(je=>je?{...je,x:Se.x,y:Se.y,rotation:we}:null)}if(u){const Se=ae(u.x,u.y),we=(((u.rotation||0)+c)%360+360)%360;d(je=>je?{...je,x:Se.x,y:Se.y,rotation:we}:null)}const ue=ae(li.x,li.y);zi(ue),wi(Se=>Se.map(we=>{const je=ae(we.x,we.y),Oe=we.orientation?((we.orientation+c)%360+360)%360:(c%360+360)%360;return{...we,x:je.x,y:je.y,orientation:Oe}})),Xn(Se=>Se.map(we=>{const je=ae(we.x,we.y),Oe=we.orientation?((we.orientation+c)%360+360)%360:(c%360+360)%360;return{...we,x:je.x,y:je.y,orientation:Oe}})),St(Se=>Se.map(we=>({...we,points:we.points.map(je=>{const Oe=ae(je.x,je.y);return{...je,x:Oe.x,y:Oe.y}})}))),qi(Se=>Se.map(we=>{const je=ae(we.x,we.y),Oe=(((we.rotation||0)+c)%360+360)%360;return{...we,x:je.x,y:je.y,rotation:Oe}})),Xi(Se=>Se.map(we=>{const je=ae(we.x,we.y),Oe=(((we.rotation||0)+c)%360+360)%360;return{...we,x:je.x,y:je.y,rotation:Oe}}))},[ea,a,u,li,s,d,wi,Xn,St,qi,Xi,zi]),Ps=H.useCallback((c,y)=>{const k=da.current;if(!k)return;const B=k.width-10,_=k.height-10,Z=B/2,M=_/2,ae=Z-c*jt,ue=M-y*jt;Fr({x:ae,y:ue})},[jt,Fr]),pl=H.useCallback((c,y,k)=>{Ps(y,k),Jt(new Set([c])),Ze(new Set),Sn(new Set),An(new Set),K(new Set)},[Ps,Jt,Ze,Sn,An]),Ed=H.useCallback((c,y,k)=>{Ps(y,k),Ze(new Set([c])),Jt(new Set),Sn(new Set),An(new Set),K(new Set)},[Ps,Ze,Jt,Sn,An]),Cu=H.useCallback((c,y,k)=>{Ps(y,k),Sn(new Set([c])),Ze(new Set),Jt(new Set),An(new Set),K(new Set)},[Ps,Sn,Ze,Jt,An]),Au=H.useCallback((c,y,k)=>{Ps(y,k),An(new Set([c])),Ze(new Set),Jt(new Set),Sn(new Set),K(new Set)},[Ps,An,Ze,Jt,Sn]),eu=At.useMemo(()=>{const c=new Set(en.map(k=>k.powerBusId).filter(k=>typeof k=="string"&&k.length>0)),y=hn.filter(k=>c.has(k.id)).map(k=>k.name);return Array.from(new Set(y)).sort()},[en,hn]),Bo=At.useMemo(()=>{const c=new Set(Ln.map(k=>k.groundBusId).filter(k=>typeof k=="string"&&k.length>0)),y=Si.filter(k=>c.has(k.id)).map(k=>k.name);return Array.from(new Set(y)).sort()},[Ln,Si]),Qa=H.useCallback(()=>{const c=en.map(y=>y.id);Sn(new Set(c)),Ze(new Set),Jt(new Set),An(new Set),K(new Set)},[en,Sn,Ze,Jt,An]),Oc=H.useCallback(()=>{const c=Ln.map(y=>y.id);An(new Set(c)),Ze(new Set),Jt(new Set),Sn(new Set),K(new Set)},[Ln,An,Ze,Jt,Sn]),Nl=H.useCallback(c=>{const y=hn.filter(B=>B.name===c).map(B=>B.id);if(y.length===0)return;const k=en.filter(B=>B.powerBusId&&y.includes(B.powerBusId)).map(B=>B.id);Sn(new Set(k)),Ze(new Set),Jt(new Set),An(new Set)},[hn,en,Sn,Ze,Jt,An]),mc=H.useCallback(c=>{const y=Si.filter(B=>B.name===c).map(B=>B.id);if(y.length===0)return;const k=Ln.filter(B=>B.groundBusId&&y.includes(B.groundBusId)).map(B=>B.id);An(new Set(k)),Ze(new Set),Jt(new Set),Sn(new Set)},[Si,Ln,An,Ze,Jt,Sn]);H.useCallback(c=>{switch(c.componentType){case"Resistor":case"ResistorNetwork":case"Thermistor":case"VariableResistor":if("resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit)return`${c.resistance} ${c.resistanceUnit}`;break;case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":if("capacitance"in c&&c.capacitance&&"capacitanceUnit"in c&&c.capacitanceUnit)return`${c.capacitance} ${c.capacitanceUnit}`;break;case"Inductor":if("inductance"in c&&c.inductance&&"inductanceUnit"in c&&c.inductanceUnit)return`${c.inductance} ${c.inductanceUnit}`;break;case"Battery":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"Diode":case"ZenerDiode":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"Fuse":if("current"in c&&c.current&&"currentUnit"in c&&c.currentUnit)return`${c.current} ${c.currentUnit}`;break;case"FerriteBead":if("impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit)return`${c.impedance} ${c.impedanceUnit}`;break;case"Relay":if("coilVoltage"in c&&c.coilVoltage&&"coilVoltageUnit"in c&&c.coilVoltageUnit)return`${c.coilVoltage} ${c.coilVoltageUnit}`;break;case"Speaker":if("impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit)return`${c.impedance} ${c.impedanceUnit}`;break;case"Motor":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"PowerSupply":if("outputVoltage"in c&&c.outputVoltage&&"outputVoltageUnit"in c&&c.outputVoltageUnit)return`${c.outputVoltage} ${c.outputVoltageUnit}`;break;case"Transistor":if("partNumber"in c&&c.partNumber)return c.partNumber;break;case"IntegratedCircuit":if("partNumber"in c&&c.partNumber)return c.partNumber;break}return null},[]);const ec=H.useCallback(c=>{const y=[];switch(c.componentType){case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":"capacitance"in c&&c.capacitance&&"capacitanceUnit"in c&&c.capacitanceUnit&&y.push(`Capacitance: ${c.capacitance} ${c.capacitanceUnit}`),"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"dielectric"in c&&c.dielectric&&y.push(`Dielectric: ${c.dielectric}`);break;case"Resistor":case"ResistorNetwork":case"Thermistor":"resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit&&y.push(`Resistance: ${c.resistance} ${c.resistanceUnit}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"VariableResistor":"resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit&&y.push(`Resistance: ${c.resistance} ${c.resistanceUnit}`),"vrType"in c&&c.vrType&&y.push(`Type: ${c.vrType}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`),"taper"in c&&c.taper&&y.push(`Taper: ${c.taper}`);break;case"Inductor":"inductance"in c&&c.inductance&&"inductanceUnit"in c&&c.inductanceUnit&&y.push(`Inductance: ${c.inductance} ${c.inductanceUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"Battery":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"capacity"in c&&c.capacity&&"capacityUnit"in c&&c.capacityUnit&&y.push(`Capacity: ${c.capacity} ${c.capacityUnit}`);break;case"Diode":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`);break;case"ZenerDiode":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"Fuse":"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`),"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`);break;case"FerriteBead":"impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit&&y.push(`Impedance: ${c.impedance} ${c.impedanceUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`);break;case"Relay":"coilVoltage"in c&&c.coilVoltage&&"coilVoltageUnit"in c&&c.coilVoltageUnit&&y.push(`Coil Voltage: ${c.coilVoltage} ${c.coilVoltageUnit}`),"contactRating"in c&&c.contactRating&&y.push(`Contact Rating: ${c.contactRating}`);break;case"Speaker":"impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit&&y.push(`Impedance: ${c.impedance} ${c.impedanceUnit}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`);break;case"Motor":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"speed"in c&&c.speed&&"speedUnit"in c&&c.speedUnit&&y.push(`Speed: ${c.speed} ${c.speedUnit}`);break;case"PowerSupply":"outputVoltage"in c&&c.outputVoltage&&"outputVoltageUnit"in c&&c.outputVoltageUnit&&y.push(`Output Voltage: ${c.outputVoltage} ${c.outputVoltageUnit}`),"outputCurrent"in c&&c.outputCurrent&&"outputCurrentUnit"in c&&c.outputCurrentUnit&&y.push(`Output Current: ${c.outputCurrent} ${c.outputCurrentUnit}`);break;case"Transistor":"partNumber"in c&&c.partNumber&&y.push(`Part Number: ${c.partNumber}`),"transistorType"in c&&c.transistorType&&y.push(`Type: ${c.transistorType}`);break;case"Crystal":"frequency"in c&&c.frequency&&y.push(`Frequency: ${c.frequency}`),"loadCapacitance"in c&&c.loadCapacitance&&y.push(`Load Capacitance: ${c.loadCapacitance}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"VacuumTube":"tubeType"in c&&c.tubeType&&y.push(`Tube Type: ${c.tubeType}`),"partNumber"in c&&c.partNumber&&y.push(`Part Number: ${c.partNumber}`);break}return y},[]),[Mr,Zs]=H.useState(!1),Rs=H.useRef(null),[tc,gl]=H.useState(!1),[Ds,zl]=H.useState(!1),nc=H.useRef(null),bc=H.useRef(null),vc=H.useRef(null),Ms=H.useRef(null),[Ic,Ks]=H.useState(!1),[wc,xl]=H.useState(!1),[es,Js]=H.useState(null),Sc=At.useRef(null),[Uc,Qs]=H.useState(new Set),el=H.useRef(null),Cr=H.useRef(null),ic=H.useRef(null),ac=H.useRef(null),tl=H.useRef(null),tu=H.useRef(null),_l=H.useRef(null),Ll=H.useRef(null),[Pf,Ku]=H.useState(null),[Pl,Od]=H.useState(!1),[Fc,Id]=H.useState(null),[oc,Ju]=H.useState(null),Qu=H.useCallback(async(c,y)=>{if(!y)throw new Error("No project directory available. Please create or open a project before loading images. The project directory is needed to store image files.");try{let k;try{k=await y.getDirectoryHandle("images",{create:!0})}catch(Z){throw new Error(`Failed to create images directory in project folder. This may be due to insufficient permissions. Please ensure you have write access to the project directory. Error details: ${Z.message}`)}const B=c.name,_=`images/${B}`;try{const M=await(await k.getFileHandle(B,{create:!0})).createWritable();return await M.write(c),await M.close(),console.log(`Image copied to project directory: ${_}`),_}catch(Z){throw new Error(`Failed to copy image file "${B}" to project images directory. The file may be locked by another application, or there may be insufficient disk space. Please try again or check your disk space. Error details: ${Z.message}`)}}catch(k){throw k instanceof Error&&k.message.includes("No project directory")||k instanceof Error&&k.message.includes("Failed to")?k:new Error(`An unexpected error occurred while copying the image to the project directory. This may be due to file system permissions or disk space issues. Please try again. Technical details: ${k.message}`)}},[]),Ud=H.useCallback(async(c,y)=>{try{const k=c.name.toLowerCase(),_=[".png",".jpg",".jpeg"].some(Ve=>k.endsWith(Ve)),M=["image/png","image/jpeg","image/jpg"].includes(c.type);if(!_&&!M){alert(`Error: Unsupported image format.

The software only accepts PNG and JPEG image files.

File selected: ${c.name}
File type: ${c.type||"unknown"}

Please select a .png, .jpg, or .jpeg image file.`);return}let ae;if(Oi)try{ae=await Qu(c,Oi)}catch(Ve){const We=Ve instanceof Error?Ve.message:"Unknown error occurred while copying image to project directory.";alert(`Error: ${We}

The image could not be loaded. Please ensure you have a project open and have write permissions to the project directory.`);return}else{if(!confirm(`Warning: No project directory is currently open. The image will be loaded, but you must create or open a project and save it before the image will be stored in the project directory.

Do you want to continue loading the ${y==="top"?"top":"bottom"} image?`))return;ae=c.name}const ue=await createImageBitmap(c),Se=URL.createObjectURL(c),we=da.current;let je=0,Oe=0;we&&(je=li.x,Oe=li.y);const Me={url:Se,name:c.name,width:ue.width,height:ue.height,filePath:ae,x:je,y:Oe,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:ue};y==="top"?s(Me):d(Me)}catch(k){const B=k instanceof Error?k.message:"Unknown error occurred while loading the image.";alert(`Error: Failed to load image file "${c.name}".

${B}

Please ensure the file is a valid image format (PNG, JPEG, etc.) and is not corrupted.`),console.error("Failed to load image",k)}},[li,jt,Oi,Qu]),Rf=H.useCallback(c=>{c.stopPropagation(),c.preventDefault();const y=da.current;if(!y)return;document.activeElement!==y&&y.focus();const k=y.getBoundingClientRect(),B=y.width/k.width,_=y.height/k.height,Z=c.nativeEvent.offsetX,M=c.nativeEvent.offsetY,ae=typeof Z=="number"?Z:c.clientX-k.left,ue=typeof M=="number"?M:c.clientY-k.top,Se=ae*B,we=ue*_,je=Se-5,Oe=we-5,Me=(je-Qn.x)/jt,Ve=(Oe-Qn.y)/jt;if(L==="center"){Pr(!0),Po.current&&clearTimeout(Po.current),Po.current=setTimeout(()=>{Pr(!1),D("select"),zo(void 0)},2e3);return}if(L==="select"){if(Uo){let ke=1/0,rt=null,Qe=null;const bt=Math.max(6/jt,4),mn=[...Ft,...cn].find(It=>It.id===Uo.componentId)?.layer||"top";for(const It of ht)if((It.type==="via"||It.type==="pad")&&It.points.length>0){if(It.type==="pad"&&(It.layer||"top")!==mn)continue;const Dn=It.points[0],on=Math.max(1,It.size/2),On=Math.hypot(Dn.x-Me,Dn.y-Ve),rn=Math.max(on,bt);On<=rn&&On<ke&&(ke=On,rt=Dn.id??null,Qe=It)}if(Qe?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${Qe.id}`),console.log(`  Point ID: ${rt}`),console.log(`  Point coordinates: x=${Qe.points[0].x.toFixed(2)}, y=${Qe.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${Me.toFixed(2)}, y=${Ve.toFixed(2)}`),console.log(`  Distance: ${ke.toFixed(2)}`),console.log(`  Via size: ${Qe.size}, radius: ${Math.max(1,Qe.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${Me.toFixed(2)}, y=${Ve.toFixed(2)}`),console.log(`  Hit tolerance: ${bt.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${ht.filter(It=>It.type==="via").length}`)),rt!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${rt} (type: ${typeof rt})`);const It=String(rt),Dn=Uo.pinIndex,on=Uo.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${Dn} (Pin ${Dn+1}) of component ${on} to point ID ${It}`);const On=Ft.find(Nt=>Nt.id===on),rn=cn.find(Nt=>Nt.id===on);On?(console.log("Component found in TOP layer"),wi(Nt=>{const Pn=Nt.find(In=>In.id===on);if(!Pn)return console.error(`Component ${on} not found in TOP layer during update!`),Nt;console.log("BEFORE update: pinConnections =",Pn.pinConnections);const xi=Pn.pinConnections||[],pa=xi.length>0?[...xi]:new Array(Pn.pinCount).fill("");let ta;if(pa.length!==Pn.pinCount){ta=new Array(Pn.pinCount).fill("");for(let In=0;In<Math.min(pa.length,Pn.pinCount);In++)ta[In]=pa[In]||""}else ta=[...pa];ta[Dn]=It,console.log(`Updating pin ${Dn} with value: ${It}`),console.log("New pinConnections array:",ta);const Ha=Nt.map(In=>In.id===on?{...In,pinConnections:ta}:In),La=Ha.find(In=>In.id===on);return console.log("AFTER update: pinConnections =",La?.pinConnections),console.log(`Pin ${Dn} value: ${La?.pinConnections[Dn]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),Ha})):rn?(console.log("Component found in BOTTOM layer"),Xn(Nt=>{const Pn=Nt.find(In=>In.id===on);if(!Pn)return console.error(`Component ${on} not found in BOTTOM layer during update!`),Nt;console.log("BEFORE update: pinConnections =",Pn.pinConnections);const xi=Pn.pinConnections||[],pa=xi.length>0?[...xi]:new Array(Pn.pinCount).fill("");let ta;if(pa.length!==Pn.pinCount){ta=new Array(Pn.pinCount).fill("");for(let In=0;In<Math.min(pa.length,Pn.pinCount);In++)ta[In]=pa[In]||""}else ta=[...pa];ta[Dn]=It,console.log(`Updating pin ${Dn} with value: ${It}`),console.log("New pinConnections array:",ta);const Ha=Nt.map(In=>In.id===on?{...In,pinConnections:ta}:In),La=Ha.find(In=>In.id===on);return console.log("AFTER update: pinConnections =",La?.pinConnections),console.log(`Pin ${Dn} value: ${La?.pinConnections[Dn]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),Ha})):(console.error(`Component ${on} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",Ft.map(Nt=>Nt.id)),console.log("Available BOTTOM components:",cn.map(Nt=>Nt.id))),setTimeout(()=>{Fo(null)},0);return}else Fo(null)}const We=10,He=(()=>{for(const ke of Ft)if(Me>=ke.x-We&&Me<=ke.x+We&&Ve>=ke.y-We&&Ve<=ke.y+We)return{layer:"top",comp:ke};for(const ke of cn)if(Me>=ke.x-We&&Me<=ke.x+We&&Ve>=ke.y-We&&Ve<=ke.y+We)return{layer:"bottom",comp:ke};return null})();if(He){const{comp:ke}=He;c.shiftKey?Jt(rt=>{const Qe=new Set(rt);return Qe.has(ke.id)?Qe.delete(ke.id):Qe.add(ke.id),Qe}):(Jt(new Set([ke.id])),Ze(new Set),Sn(new Set),An(new Set));return}const Ue=Math.max(6/jt,4);let ct=null;for(const ke of en){const rt=Math.max(6,ke.size/2),Qe=rt*.8,bt=rt+Qe,Lt=Math.hypot(ke.x-Me,ke.y-Ve),mn=Math.abs(Me-ke.x)<=Ue&&Math.abs(Ve-ke.y)<=bt,It=Math.abs(Ve-ke.y)<=Ue&&Math.abs(Me-ke.x)<=bt;if(Lt<=Math.max(rt,Ue)||mn||It){ct=ke;break}}if(ct){c.shiftKey?Sn(ke=>{const rt=new Set(ke);return rt.has(ct.id)?rt.delete(ct.id):rt.add(ct.id),rt}):(Sn(new Set([ct.id])),Ze(new Set),Jt(new Set),An(new Set));return}let wt=null;for(const ke of Ln){const rt=Math.max(6,(ke.size||18)/2),Qe=rt*.8,bt=rt+Qe,Lt=Math.hypot(ke.x-Me,ke.y-Ve),mn=Math.abs(Me-ke.x)<=Ue&&Math.abs(Ve-ke.y)<=bt,It=Math.abs(Ve-ke.y)<=Ue&&Math.abs(Me-ke.x)<=bt;if(Lt<=Math.max(rt,Ue)||mn||It){wt=ke;break}}if(wt){c.shiftKey?An(ke=>{const rt=new Set(ke);return rt.has(wt.id)?rt.delete(wt.id):rt.add(wt.id),rt}):(An(new Set([wt.id])),Ze(new Set),Jt(new Set),Sn(new Set));return}const lt=Math.max(6/jt,4/jt),Ht=Math.max(lt,.5);let Ee=null;for(const ke of ht)if((ke.type==="via"||ke.type==="pad"||ke.type==="testPoint")&&ke.points.length>0){let rt=!1;if(ke.type==="via"?rt=Vi:ke.type==="pad"?rt=(ke.layer||"top")==="top"?Ki:Sr:ke.type==="testPoint"&&(rt=(ke.layer||"top")==="top"?Zr:wo),!rt)continue;const Qe=ke.points[0],bt=Math.max(1,ke.size/2);if(Math.hypot(Qe.x-Me,Qe.y-Ve)<=Math.max(bt,Ht)){Ee=ke;break}}if(Ee){c.shiftKey?Ze(ke=>{const rt=new Set(ke);return rt.has(Ee.id)?rt.delete(Ee.id):rt.add(Ee.id),rt}):(Ze(new Set([Ee.id])),Jt(new Set),Sn(new Set),An(new Set),K(new Set));return}c.shiftKey||(Ze(new Set),Jt(new Set),Sn(new Set),An(new Set),K(new Set)),Zo(!0),Id({x:Me,y:Ve,shiftKey:c.shiftKey}),Ju({x:Me,y:Ve,width:0,height:0});return}else if(L==="magnify"){const We=c.shiftKey?.5:2,He=Math.max(.25,Math.min(8,jt*We));ba(Me,Ve),si(He);return}else if(L==="pan"){Vs.current={startCX:je,startCY:Oe,panX:Qn.x,panY:Qn.y,cameraCenterX:li.x,cameraCenterY:li.y},io.current={startClientX:c.clientX,startClientY:c.clientY,panX:Qn.x,panY:Qn.y,cameraCenterX:li.x,cameraCenterY:li.y},no(!0);return}else if(L==="draw"){const We=(ct,wt)=>{let at=1/0,lt=null;const Ht=10/jt,Ee=jt>20?Math.max(Ht,1e-4):jt>10?Math.max(Ht,.001):Math.max(Ht,.01);for(const Qe of ht)if(Qe.type==="via"){const bt=Qe.points[0],Lt=Math.hypot(bt.x-ct,bt.y-wt);Lt<=Ee&&Lt<at&&(at=Lt,lt=bt)}else if(Qe.type==="pad"){const bt=Qe.points[0],Lt=Math.hypot(bt.x-ct,bt.y-wt);Lt<=Ee&&Lt<at&&(at=Lt,lt=bt)}for(const Qe of en)if(Qe.pointId!==void 0){const bt=Math.hypot(Qe.x-ct,Qe.y-wt);bt<=Ee&&bt<at&&(at=bt,lt={x:Qe.x,y:Qe.y,id:Qe.pointId})}for(const Qe of Ln)if(Qe.pointId!==void 0){const bt=Math.hypot(Qe.x-ct,Qe.y-wt);bt<=Ee&&bt<at&&(at=bt,lt={x:Qe.x,y:Qe.y,id:Qe.pointId})}const rt=Di(lt??{x:ct,y:wt});return{x:rt.x,y:rt.y,nodeId:lt?.id}};if(nt==="via"){const ct=ai.get("via"),wt=ct.color,at=ct.size,Dt=Pl?{x:Di({x:Me,y:Ve}).x,y:Di({x:Me,y:Ve}).y}:((Qe,bt)=>{let Lt=1/0,mn=null;const Dn=10/jt,on=jt>10?Math.max(Dn,.001):Math.max(Dn,.01);for(const Nt of ht)if(Nt.type==="via"||Nt.type==="pad"){const Pn=Nt.points[0],xi=Math.hypot(Pn.x-Qe,Pn.y-bt);xi<=on&&xi<Lt&&(Lt=xi,mn=Pn)}for(const Nt of en)if(Nt.pointId!==void 0){const Pn=Math.hypot(Nt.x-Qe,Nt.y-bt);Pn<=on&&Pn<Lt&&(Lt=Pn,mn={x:Nt.x,y:Nt.y,id:Nt.pointId})}for(const Nt of Ln)if(Nt.pointId!==void 0){const Pn=Math.hypot(Nt.x-Qe,Nt.y-bt);Pn<=on&&Pn<Lt&&(Lt=Pn,mn={x:Nt.x,y:Nt.y,id:Nt.pointId})}const rn=Di(mn??{x:Qe,y:bt});return{x:rn.x,y:rn.y,nodeId:mn?.id}})(Me,Ve),Ht=Dt.nodeId??lc(),Ee=an(Ht,hn),ke={id:Ht,x:Dt.x,y:Dt.y};ye(ht,Ft,cn,Ma,_o);const rt={id:`${Date.now()}-via`,points:[ke],color:wt,size:at,layer:Wt,type:"via",viaType:Ee};St(Qe=>[...Qe,rt]),Wt==="top"?ol(Qe=>[...Qe,rt.id]):ua(Qe=>[...Qe,rt.id]);return}if(nt==="pad"){if(!hi)return;const wt=Pl?{x:Di({x:Me,y:Ve}).x,y:Di({x:Me,y:Ve}).y}:((rt,Qe)=>{let bt=1/0,Lt=null;const It=10/jt,Dn=jt>10?Math.max(It,.001):Math.max(It,.01);for(const rn of ht)if(rn.type==="via"||rn.type==="pad"||rn.type==="testPoint"){const Nt=rn.points[0],Pn=Math.hypot(Nt.x-rt,Nt.y-Qe);Pn<=Dn&&Pn<bt&&(bt=Pn,Lt=Nt)}for(const rn of en)if(rn.pointId!==void 0){const Nt=Math.hypot(rn.x-rt,rn.y-Qe);Nt<=Dn&&Nt<bt&&(bt=Nt,Lt={x:rn.x,y:rn.y,id:rn.pointId})}for(const rn of Ln)if(rn.pointId!==void 0){const Nt=Math.hypot(rn.x-rt,rn.y-Qe);Nt<=Dn&&Nt<bt&&(bt=Nt,Lt={x:rn.x,y:rn.y,id:rn.pointId})}const On=Di(Lt??{x:rt,y:Qe});return{x:On.x,y:On.y,nodeId:Lt?.id}})(Me,Ve),at=wt.nodeId??lc(),lt=Jn(at,hn),Dt=J||(hi==="top"?ne:Ne),Ht=I||(hi==="top"?U:E),Ee={id:at,x:wt.x,y:wt.y};ye(ht,Ft,cn,Ma,_o);const ke={id:`${Date.now()}-pad`,points:[Ee],color:Dt,size:Ht,layer:hi,type:"pad",padType:lt};St(rt=>[...rt,ke]);return}if(nt==="testPoint"){if(!mi)return;const wt=Pl?{x:Di({x:Me,y:Ve}).x,y:Di({x:Me,y:Ve}).y}:((Qe,bt)=>{let Lt=1/0,mn=null;const It=15;for(const On of ht)if(On.type==="via"||On.type==="pad"||On.type==="testPoint"){const rn=On.points[0],Nt=Math.hypot(rn.x-Qe,rn.y-bt);Nt<=It&&Nt<Lt&&(Lt=Nt,mn=rn)}for(const On of en)if(On.pointId!==void 0){const rn=Math.hypot(On.x-Qe,On.y-bt);rn<=It&&rn<Lt&&(Lt=rn,mn={x:On.x,y:On.y,id:On.pointId})}for(const On of Ln)if(On.pointId!==void 0){const rn=Math.hypot(On.x-Qe,On.y-bt);rn<=It&&rn<Lt&&(Lt=rn,mn={x:On.x,y:On.y,id:On.pointId})}const on=Di(mn??{x:Qe,y:bt});return{x:on.x,y:on.y,nodeId:mn?.id}})(Me,Ve),at=wt.nodeId??lc(),lt=Ja(at,hn),Dt=lt.includes("Power")?"power":lt.includes("Ground")?"ground":lt.includes("Signal")?"signal":"unknown",Ht=Di({x:wt.x,y:wt.y}),Ee=J||(mi==="top"?xe:Te),ke=I||(mi==="top"?Ae:Ye);ye(ht,Ft,cn,Ma,_o);const rt={id:`${Date.now()}-testPoint`,points:[{id:at,x:Ht.x,y:Ht.y}],color:Ee,size:ke,layer:mi,type:"testPoint",testPointType:Dt};St(Qe=>[...Qe,rt]);return}if(Mn.current)return;const He=nt==="trace"&&!Pl?We(Me,Ve):{x:Di({x:Me,y:Ve}).x,y:Di({x:Me,y:Ve}).y},Ue=He.nodeId!==void 0?{id:He.nodeId,x:He.x,y:He.y}:{x:He.x,y:He.y};Tn(ct=>ct.length===0?[Ue]:[...ct,Ue]),Fi.current=Date.now(),yn(null),Zt(!1),ko(!1)}else if(L==="erase"){if(ht.some(He=>He.layer===Wt&&(He.type==="via"&&Ot||He.type==="pad"&&vn||He.type==="testPoint"&&Mi||He.type==="trace"&&Zn))){const He=[];Ot&&ht.some(Ue=>Ue.layer===Wt&&Ue.type==="via")&&He.push("vias"),vn&&ht.some(Ue=>Ue.layer===Wt&&Ue.type==="pad")&&He.push("pads"),Mi&&ht.some(Ue=>Ue.layer===Wt&&Ue.type==="testPoint")&&He.push("test points"),Zn&&ht.some(Ue=>Ue.layer===Wt&&Ue.type==="trace")&&He.push("traces"),He.length>0&&alert(`Cannot erase: ${He.join(", ")} are locked on the ${Wt} layer. Unlock them to erase.`)}Zt(!0),Tn([{id:lc(),x:Me,y:Ve}]),console.log("Starting erase at:",Me,Ve,"selectedDrawingLayer:",Wt,"total strokes:",ht.length)}else if(L==="transform"&&$t){if(ft){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}xo(!0),Kt({x:Me,y:Ve})}else if(L==="component"){if(!es)return;const We=Di({x:Me,y:Ve}),He=J||(_i==="top"?mt:de),Ue=I||(_i==="top"?zt:ot),ct=[...Ft,...cn];let wt;tt?wt=Cf():wt={...Gt.current};const at=zy(es,_i,We.x,We.y,He,Ue,ct,wt,it);if(at.abbreviation=t0(es),it&&at.designator){const lt=n0(es),Dt=at.designator.match(new RegExp(`^${lt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(Dt){const Ht=parseInt(Dt[1],10);if(tt){const Ee=Cf();Py(lt,Ht,Ee)}else Gt.current[lt]=Math.max(Gt.current[lt]||0,Ht)}}ye(ht,Ft,cn,Ma,_o),_i==="top"?(Dr(!0),wi(lt=>[...lt,at])):(or(!0),Xn(lt=>[...lt,at]));return}else if(L==="power"){if(!z)return;const He=Pl?{x:Di({x:Me,y:Ve}).x,y:Di({x:Me,y:Ve}).y}:((ct,wt)=>{let at=1/0,lt=null;const Ht=10/jt,Ee=jt>20?Math.max(Ht,1e-4):jt>10?Math.max(Ht,.001):Math.max(Ht,.01);for(const Qe of ht)if(Qe.type==="via"||Qe.type==="pad"){const bt=Qe.points[0],Lt=Math.hypot(bt.x-ct,bt.y-wt);Lt<=Ee&&Lt<at&&(at=Lt,lt=bt)}else if(Qe.type==="trace")for(const bt of Qe.points){const Lt=Math.hypot(bt.x-ct,bt.y-wt);Lt<=Ee&&Lt<at&&(at=Lt,lt=bt)}const rt=Di(lt??{x:ct,y:wt});return{x:rt.x,y:rt.y,nodeId:lt?.id}})(Me,Ve),Ue=hn.find(ct=>ct.id===z);if(Ue){const ct=He.nodeId??lc(),wt=`${Ue.voltage} Power Node`;if(Ln.find(Dt=>Dt.pointId===ct)){Ns({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${ct}). Power and ground nodes cannot share the same Node ID.`});return}ye(ht,Ft,cn,Ma,_o);const lt={id:`power-${Date.now()}-${Math.random()}`,x:He.x,y:He.y,color:"#ff0000",size:I,powerBusId:Ue.id,layer:Wt,type:wt,pointId:ct};if(qi(Dt=>[...Dt,lt]),He.nodeId!==void 0){const Dt=an(He.nodeId,hn),Ht=Jn(He.nodeId,hn),Ee=Ja(He.nodeId,hn),ke=Ee.includes("Power")?"power":Ee.includes("Ground")?"ground":Ee.includes("Signal")?"signal":"unknown";St(rt=>rt.map(Qe=>Qe.type==="via"&&Qe.points.length>0&&Qe.points[0].id===He.nodeId?{...Qe,viaType:Dt}:Qe.type==="pad"&&Qe.points.length>0&&Qe.points[0].id===He.nodeId?{...Qe,padType:Ht}:Qe.type==="testPoint"&&Qe.points.length>0&&Qe.points[0].id===He.nodeId?{...Qe,testPointType:ke}:Qe))}}return}else if(L==="ground"){if(Re===null){if(Si.length===0){Ns({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}ge(!0);return}const We=Si.find(He=>He.id===Re);if(We){const Ue=Pl?{x:Di({x:Me,y:Ve}).x,y:Di({x:Me,y:Ve}).y}:((Dt,Ht)=>{let Ee=1/0,ke=null;const Qe=10/jt,bt=jt>20?Math.max(Qe,1e-4):jt>10?Math.max(Qe,.001):Math.max(Qe,.01);for(const It of ht)if(It.type==="via"||It.type==="pad"){const Dn=It.points[0],on=Math.hypot(Dn.x-Dt,Dn.y-Ht);on<=bt&&on<Ee&&(Ee=on,ke=Dn)}else if(It.type==="trace")for(const Dn of It.points){const on=Math.hypot(Dn.x-Dt,Dn.y-Ht);on<=bt&&on<Ee&&(Ee=on,ke=Dn)}const mn=Di(ke??{x:Dt,y:Ht});return{x:mn.x,y:mn.y,nodeId:ke?.id}})(Me,Ve),ct=Ue.nodeId??lc(),wt=`${We.name} Ground Node`,at=en.find(Dt=>Dt.pointId===ct);if(at){Ns({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${at.type||"Power Node"}) already exists at this Node ID (${ct}). Power and ground nodes cannot share the same Node ID.`});return}ye(ht,Ft,cn,Ma,_o);const lt={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:Ue.x,y:Ue.y,color:We.color,size:I||Gn.get("ground")?.settings.size||18,groundBusId:We.id,layer:Wt,type:wt,pointId:ct};if(Xi(Dt=>[...Dt,lt]),Ue.nodeId!==void 0){const Dt=an(Ue.nodeId,hn),Ht=Jn(Ue.nodeId,hn);St(Ee=>Ee.map(ke=>ke.type==="via"&&ke.points.length>0&&ke.points[0].id===Ue.nodeId?{...ke,viaType:Dt}:ke.type==="pad"&&ke.points.length>0&&ke.points[0].id===Ue.nodeId?{...ke,padType:Ht}:ke))}}return}},[L,$t,I,J,nt,Wt,ht,jt,Qn.x,Qn.y,Pl,z,Re,hn,Si,es,Gn,hi,Bn,mi,en,Ln,an,Jn,Ja,Vi,Ki,Sr]),Fd=H.useCallback(c=>{if(L!=="magnify")return;c.preventDefault();const y=da.current;if(!y)return;const k=y.getBoundingClientRect(),B=y.width/k.width,_=y.height/k.height,Z=c.nativeEvent.offsetX,M=c.nativeEvent.offsetY,ae=typeof Z=="number"?Z:c.clientX-k.left,ue=typeof M=="number"?M:c.clientY-k.top,Se=ae*B,we=ue*_,je=(Se-5-Qn.x)/jt,Oe=(we-5-Qn.y)/jt,Me=1.2,Ve=1/Me,We=c.deltaY<0?Me:Ve,He=Math.max(.25,Math.min(8,jt*We));ba(je,Oe),si(He)},[L,jt,Qn.x,Qn.y]),Df=H.useCallback(c=>{if(L==="draw"&&nt==="trace"){Mn.current=!0;let Ue=_n;if(Ue.length>1){const ct=[Ue[0]];for(let wt=1;wt<Ue.length;wt++){const at=ct[ct.length-1],lt=Ue[wt];(Math.abs(at.x-lt.x)>.001||Math.abs(at.y-lt.y)>.001)&&ct.push(lt)}Ue=ct}if(Ue.length>=1){ye(ht,Ft,cn,Ma,_o);const ct=Bn||"top",wt=ct==="top"?"traceTop":"traceBottom",at=ai.get(wt),lt={id:`${Date.now()}-trace`,points:Ue,color:at.color,size:at.size,layer:ct,type:"trace"};St(Dt=>[...Dt,lt]),ct==="top"?ci(Dt=>[...Dt,lt.id]):Gi(Dt=>[...Dt,lt.id]),Tn([]),yn(null),setTimeout(()=>{Mn.current=!1},300);return}}const y=da.current;if(!y)return;const k=y.getBoundingClientRect(),B=y.width/k.width,_=y.height/k.height,Z=c.nativeEvent.offsetX,M=c.nativeEvent.offsetY,ae=typeof Z=="number"?Z:c.clientX-k.left,ue=typeof M=="number"?M:c.clientY-k.top,Se=ae*B,we=ue*_,je=Se-5,Oe=we-5,Me=(je-Qn.x)/jt,Ve=(Oe-Qn.y)/jt,We=Math.max(8/jt,4),He=(()=>{for(const Ue of ht)if(Ue.type==="testPoint"&&Ue.points.length>0){const ct=Ue.points[0],wt=Math.hypot(ct.x-Me,ct.y-Ve),at=(Ue.size||18)/2;if(wt<=at+We)return Ue}return null})();if(He){Ze(new Set([He.id])),Jt(new Set),Sn(new Set),An(new Set),_a(!0);return}if(L==="select"||L==="component"){const ct=(()=>{for(const lt of Ft)if(Me>=lt.x-10&&Me<=lt.x+10&&Ve>=lt.y-10&&Ve<=lt.y+10)return{layer:"top",comp:lt};for(const lt of cn)if(Me>=lt.x-10&&Me<=lt.x+10&&Ve>=lt.y-10&&Ve<=lt.y+10)return{layer:"bottom",comp:lt};return null})(),wt=Math.max(6/jt,4);let at=null;for(const lt of en){const Dt=Math.max(6,lt.size/2),Ht=Dt*.8,Ee=Dt+Ht,ke=Math.hypot(lt.x-Me,lt.y-Ve),rt=Math.abs(Me-lt.x)<=wt&&Math.abs(Ve-lt.y)<=Ee,Qe=Math.abs(Ve-lt.y)<=wt&&Math.abs(Me-lt.x)<=Ee;if(ke<=Math.max(Dt,wt)||rt||Qe){at=lt;break}}if(at){Sn(new Set([at.id])),w({visible:!0,id:at.id,layer:at.layer,x:at.x,y:at.y,size:at.size,color:at.color,powerBusId:at.powerBusId});return}if(ct){const{layer:lt,comp:Dt}=ct;Vl(Dt,lt)}}},[L,nt,J,I,Wt,Ft,cn,en,jt,Qn.x,Qn.y,es,Ic,Pl,ht,$t,Xa,Pf,Uo,Gn,_n,Bn,O,N,re,fe,_a,Ze,Jt,Sn,An,Vl]),ku=H.useCallback(()=>{const c=bn.current;if(L==="draw"&&nt==="trace"&&c.length>=2){let y=[c[0]];for(let M=1;M<c.length;M++){const ae=y[y.length-1],ue=c[M];(Math.abs(ae.x-ue.x)>.001||Math.abs(ae.y-ue.y)>.001)&&y.push(ue)}const k=Bn||"top",B=k==="top"?"traceTop":"traceBottom",_=ai.get(B),Z={id:`${Date.now()}-trace`,points:y,color:_.color,size:_.size,layer:k,type:"trace"};ye(ht,Ft,cn,Ma,_o),St(M=>[...M,Z]),k==="top"?ci(M=>[...M,Z.id]):Gi(M=>[...M,Z.id]),Tn([]),yn(null)}else if(L==="draw"&&nt==="trace"&&c.length===1){const y=Bn||"top",k=y==="top"?"traceTop":"traceBottom",B=ai.get(k),_={id:`${Date.now()}-trace-dot`,points:c,color:B.color,size:B.size,layer:y,type:"trace"};St(Z=>[...Z,_]),y==="top"?ci(Z=>[...Z,_.id]):Gi(Z=>[...Z,_.id]),Tn([])}},[L,nt,Bn,O,N,re,fe,St]),Mf=H.useCallback((c,y,k)=>{const B=y-c.x,_=k-c.y;if(B===0&&_===0)return{x:y,y:k};const M=(Math.atan2(_,B)*180/Math.PI%180+180)%180,ae=[0,45,90];let ue=0,Se=1e9;for(const we of ae){const je=Math.abs(M-we);je<Se&&(Se=je,ue=we)}if(ue===0)return{x:y,y:c.y};if(ue===90)return{x:c.x,y:k};{const we=Math.min(Math.abs(B),Math.abs(_)),je=B>=0?1:-1,Oe=_>=0?1:-1;return{x:c.x+je*we,y:c.y+Oe*we}}},[]),Hd=H.useCallback(c=>{const y=da.current?.getBoundingClientRect();if(!y)return;const k=c.clientX-y.left,B=c.clientY-y.top,_=da.current,Z=_.width/y.width,M=_.height/y.height,ae=k*Z,ue=B*M,Se=ae-5,we=ue-5,je=(Se-Qn.x)/jt,Oe=(we-Qn.y)/jt;if(L==="draw"&&nt==="trace"&&_n.length>0){const Ve=Pl?{x:Di({x:je,y:Oe}).x,y:Di({x:je,y:Oe}).y}:((We,He)=>{let Ue=1/0,ct=null;const at=10/jt,lt=jt>20?Math.max(at,1e-4):jt>10?Math.max(at,.001):Math.max(at,.01);for(const Ee of ht)if(Ee.type==="via"){const ke=Ee.points[0],rt=Math.hypot(ke.x-We,ke.y-He);rt<=lt&&rt<Ue&&(Ue=rt,ct=ke)}else if(Ee.type==="pad"){const ke=Ee.points[0],rt=Math.hypot(ke.x-We,ke.y-He);rt<=lt&&rt<Ue&&(Ue=rt,ct=ke)}for(const Ee of en)if(Ee.pointId!==void 0){const ke=Math.hypot(Ee.x-We,Ee.y-He);ke<=lt&&ke<Ue&&(Ue=ke,ct={x:Ee.x,y:Ee.y,id:Ee.pointId})}for(const Ee of Ln)if(Ee.pointId!==void 0){const ke=Math.hypot(Ee.x-We,Ee.y-He);ke<=lt&&ke<Ue&&(Ue=ke,ct={x:Ee.x,y:Ee.y,id:Ee.pointId})}const Ht=Di(ct??{x:We,y:He});return{x:Ht.x,y:Ht.y,nodeId:ct?.id}})(je,Oe);yn({x:Ve.x,y:Ve.y})}else yn(null);if(dl){const Ve=(()=>{for(const We of Ft)if(je>=We.x-10&&je<=We.x+10&&Oe>=We.y-10&&Oe<=We.y+10)return{layer:"top",comp:We};for(const We of cn)if(je>=We.x-10&&je<=We.x+10&&Oe>=We.y-10&&Oe<=We.y+10)return{layer:"bottom",comp:We};return null})();if(Ve)cs({component:Ve.comp,layer:Ve.layer,x:c.clientX,y:c.clientY}),fl(null);else{cs(null);const We=Math.max(8/jt,4),He=(()=>{for(const Ue of ht)if(Ue.type==="testPoint"&&Ue.points.length>0){const ct=Ue.points[0],wt=Math.hypot(ct.x-je,ct.y-Oe),at=(Ue.size||18)/2;if(wt<=at+We)return Ue}return null})();fl(He?{stroke:He,x:c.clientX,y:c.clientY}:null)}}else cs(null),fl(null);if(L==="select"&&vi&&Fc){const Me=Fc.x,Ve=Fc.y;Ju({x:Math.min(Me,je),y:Math.min(Ve,Oe),width:Math.abs(je-Me),height:Math.abs(Oe-Ve)})}else if(L==="pan"&&Xa&&Vs.current){const{startCX:Me,startCY:Ve,cameraCenterX:We,cameraCenterY:He}=Vs.current,Ue=Se-Me,ct=we-Ve,wt=-Ue/jt,at=-ct/jt;ba(We+wt,He+at)}else if(Rn&&_n.length>0){if(L==="draw")if(bs){const Me=_n[0],Ve=Mf(Me,je,Oe),We=Di(Ve),He={id:lc(),x:We.x,y:We.y};Tn([Me,He])}else{const Me=Di({x:je,y:Oe});Tn(Ve=>[...Ve,{id:lc(),x:Me.x,y:Me.y}])}else if(L==="erase"&&(Tn(Me=>[...Me,{id:lc(),x:je,y:Oe}]),St(Me=>{const Ve=Me.filter(He=>{if(He.type==="via"&&Ot||He.type==="pad"&&vn||He.type==="testPoint"&&Mi||He.type==="trace"&&Zn||He.layer!==Wt)return!0;const Ue=I/2,ct=je-Ue,wt=je+Ue,at=Oe-Ue,lt=Oe+Ue,Dt=(ke,rt)=>ke>=ct&&ke<=wt&&rt>=at&&rt<=lt,Ht=(ke,rt,Qe,bt)=>{const On=(Ha,La)=>{let In=0;return Ha<ct?In|=1:Ha>wt&&(In|=2),La<at?In|=4:La>lt&&(In|=8),In};let rn=ke,Nt=rt,Pn=Qe,xi=bt,pa=On(rn,Nt),ta=On(Pn,xi);for(;;){if((pa|ta)===0)return!0;if((pa&ta)!==0)return!1;const Ha=pa!==0?pa:ta;let La=0,In=0;Ha&8?(La=rn+(Pn-rn)*(lt-Nt)/(xi-Nt),In=lt):Ha&4?(La=rn+(Pn-rn)*(at-Nt)/(xi-Nt),In=at):Ha&2?(In=Nt+(xi-Nt)*(wt-rn)/(Pn-rn),La=wt):(In=Nt+(xi-Nt)*(ct-rn)/(Pn-rn),La=ct),Ha===pa?(rn=La,Nt=In,pa=On(rn,Nt)):(Pn=La,xi=In,ta=On(Pn,xi))}};let Ee=!1;if(He.points.length===1){const ke=He.points[0];Ee=Dt(ke.x,ke.y)}else for(let ke=0;ke<He.points.length-1;ke++){const rt=He.points[ke],Qe=He.points[ke+1];if(Ht(rt.x,rt.y,Qe.x,Qe.y)){Ee=!0;break}}return Ee&&console.log("Erasing stroke at position:",je,Oe,"brushSize:",I,"selectedLayer:",Wt),!Ee});console.log("Strokes before:",Me.length,"after:",Ve.length);const We=new Set(Ve.map(He=>He.id));return ol(He=>He.filter(Ue=>We.has(Ue))),ua(He=>He.filter(Ue=>We.has(Ue))),ci(He=>He.filter(Ue=>We.has(Ue))),Gi(He=>He.filter(Ue=>We.has(Ue))),Ve}),Bi||qi(Me=>{const Ve=I/2,We=je-Ve,He=je+Ve,Ue=Oe-Ve,ct=Oe+Ve,wt=at=>{const lt=at.size/2,Dt=at.x-lt,Ht=at.x+lt,Ee=at.y-lt,ke=at.y+lt;return!(He<Dt||We>Ht||ct<Ee||Ue>ke)};return Me.filter(at=>!wt(at))}),$a||Xi(Me=>{const Ve=I/2,We=je-Ve,He=je+Ve,Ue=Oe-Ve,ct=Oe+Ve,wt=lt=>{const Dt=Math.max(6,(lt.size||18)/2),Ht=Dt*.8,Ee=Dt+Ht,ke=lt.x-Ee,rt=lt.x+Ee,Qe=lt.y-Ee,bt=lt.y+Ee;return!(He<ke||We>rt||ct<Qe||Ue>bt)};return Me.filter(lt=>!wt(lt))}),!ji)){const Me=I/2,Ve=je-Me,We=je+Me,He=Oe-Me,Ue=Oe+Me,ct=wt=>{const lt=(wt.size||18)/2,Dt=wt.x-lt,Ht=wt.x+lt,Ee=wt.y-lt,ke=wt.y+lt;return!(We<Dt||Ve>Ht||Ue<Ee||He>ke)};ye(ht,Ft,cn,Ma,_o),wi(wt=>wt.filter(at=>!ct(at))),Xn(wt=>wt.filter(at=>!ct(at)))}}else if(eo&&Co&&$t){if(ft){xo(!1),Kt(null);return}const Me=je-Co.x,Ve=Oe-Co.y;if($t==="top"){a&&s(We=>We?{...We,x:We.x+Me,y:We.y+Ve}:null),Kt({x:je,y:Oe});return}if($t==="bottom"){u&&d(We=>We?{...We,x:We.x+Me,y:We.y+Ve}:null),Kt({x:je,y:Oe});return}if($t==="both"){a&&s(We=>We?{...We,x:We.x+Me,y:We.y+Ve}:null),u&&d(We=>We?{...We,x:We.x+Me,y:We.y+Ve}:null),Kt({x:je,y:Oe});return}}},[Rn,_n,L,I,eo,Co,$t,a,u,bs,Mf,Wt,St,jt,Qn.x,Qn.y,vi,Fc,ft,Ot,vn,Zn,Bi,$a,Ft,cn,wi,Xn,dl,cs,Pl,ht,en,Ln,_n,nt,ln,yn,Xa,Vs,Fr,5,Qn,lc,Di,D,Pr,ye,Ma,_o]),qd=H.useCallback(()=>{if(L==="select"&&vi){const c=oc,y=Fc;if(Zo(!1),Id(null),Ju(null),c&&y){const _=Math.max(3,5/jt),Z=c.width<_&&c.height<_,M=(Ee,ke)=>{const rt=c.x,Qe=c.y,bt=c.x+c.width,Lt=c.y+c.height;return Ee>=rt&&Ee<=bt&&ke>=Qe&&ke<=Lt},ae=(Ee,ke,rt,Qe,bt,Lt,mn,It)=>{const Pn=(Ml,Bl)=>{let Er=0;return Ml<bt?Er|=1:Ml>mn&&(Er|=2),Bl<Lt?Er|=4:Bl>It&&(Er|=8),Er};let xi=Ee,pa=ke,ta=rt,Ha=Qe,La=Pn(xi,pa),In=Pn(ta,Ha);for(;;){if((La|In)===0)return!0;if((La&In)!==0)return!1;const Ml=La!==0?La:In;let Bl=0,Er=0;Ml&8?(Bl=xi+(ta-xi)*(It-pa)/(Ha-pa),Er=It):Ml&4?(Bl=xi+(ta-xi)*(Lt-pa)/(Ha-pa),Er=Lt):Ml&2?(Er=pa+(Ha-pa)*(mn-xi)/(ta-xi),Bl=mn):(Er=pa+(Ha-pa)*(bt-xi)/(ta-xi),Bl=bt),Ml===La?(xi=Bl,pa=Er,La=Pn(xi,pa)):(ta=Bl,Ha=Er,In=Pn(ta,Ha))}},ue=c.x,Se=c.y,we=c.x+c.width,je=c.y+c.height,Me=Math.max(6/jt,4/jt,.5),Ve=(Ee,ke,rt,Qe,bt,Lt)=>{const mn=bt-rt,It=Lt-Qe;if(mn===0&&It===0)return Math.hypot(Ee-rt,ke-Qe);const Dn=Math.max(0,Math.min(1,((Ee-rt)*mn+(ke-Qe)*It)/(mn*mn+It*It))),on=rt+Dn*mn,On=Qe+Dn*It;return Math.hypot(Ee-on,ke-On)},We=y?.shiftKey===!0,He=new Set(We?Array.from(Fn):[]),Ue=new Set(We?Array.from(Cn):[]),ct=new Set(We?Array.from(Rt):[]),wt=new Set(We?Array.from(ui):[]),at=y?.hitStrokeId;if(at){const Ee=ht.find(ke=>ke.id===at);if(Ee){let ke=!1;if(Ee.type==="via"||Ee.type==="pad"?ke=Vi:ke=Ee.layer==="top"?za:ir,ke){We?Ze(rt=>{const Qe=new Set(rt);return Qe.has(at)?Qe.delete(at):Qe.add(at),Qe}):(Ze(new Set([at])),Jt(new Set),Sn(new Set),An(new Set));return}}}if(Z){let Ee=null;for(const ke of ht){let rt=!1;if(ke.type==="via"?rt=Vi:ke.type==="pad"?rt=(ke.layer||"top")==="top"?Ki:Sr:ke.type==="testPoint"?rt=(ke.layer||"top")==="top"?Zr:wo:ke.type==="trace"?rt=ke.layer==="top"?za:ir:rt=!1,!rt)continue;let Qe=1/0;if(ke.type==="via"||ke.type==="pad"||ke.type==="testPoint"){const bt=ke.points[0],Lt=Math.max(1,ke.size/2);Qe=Math.hypot(bt.x-y.x,bt.y-y.y);const It=Math.max(6/jt,4/jt,.5);Qe<=Math.max(Lt,It)&&(!Ee||Qe<Ee.dist)&&(Ee={id:ke.id,dist:Qe})}else for(let bt=0;bt<ke.points.length-1;bt++){const Lt=ke.points[bt],mn=ke.points[bt+1],It=Ve(y.x,y.y,Lt.x,Lt.y,mn.x,mn.y);if(It<=Math.max(Me,ke.size/2)){(!Ee||It<Ee.dist)&&(Ee={id:ke.id,dist:It});break}}}Ee&&(We&&He.has(Ee.id)?He.delete(Ee.id):He.add(Ee.id))}else for(const Ee of ht){let ke=!1;if(Ee.type==="via"?ke=Vi:Ee.type==="pad"?ke=(Ee.layer||"top")==="top"?Ki:Sr:Ee.type==="testPoint"?ke=(Ee.layer||"top")==="top"?Zr:wo:Ee.type==="trace"?ke=Ee.layer==="top"?za:ir:ke=!1,!ke)continue;let rt=!1;if(Ee.type==="via"||Ee.type==="pad"||Ee.type==="testPoint"){const Qe=Ee.points[0];rt=M(Qe.x,Qe.y)}else for(let Qe=0;Qe<Ee.points.length-1;Qe++){const bt=Ee.points[Qe],Lt=Ee.points[Qe+1];if(ae(bt.x,bt.y,Lt.x,Lt.y,ue,Se,we,je)||M(bt.x,bt.y)&&M(Lt.x,Lt.y)){rt=!0;break}}rt&&(We&&He.has(Ee.id)?He.delete(Ee.id):He.add(Ee.id))}const lt=Ee=>{const rt=Math.max(10,Ee.size||18)/2;return Ee.x-rt<=we&&Ee.x+rt>=ue&&Ee.y-rt<=je&&Ee.y+rt>=Se};if(Z){const Ee=ke=>{const Qe=Math.max(10,ke.size||18)/2;return y.x>=ke.x-Qe&&y.x<=ke.x+Qe&&y.y>=ke.y-Qe&&y.y<=ke.y+Qe};Oa&&Ft.forEach(ke=>{Ee(ke)&&(We&&Ue.has(ke.id)?Ue.delete(ke.id):Ue.add(ke.id))}),Ro&&cn.forEach(ke=>{Ee(ke)&&(We&&Ue.has(ke.id)?Ue.delete(ke.id):Ue.add(ke.id))})}else Oa&&Ft.forEach(Ee=>{lt(Ee)&&(We&&Ue.has(Ee.id)?Ue.delete(Ee.id):Ue.add(Ee.id))}),Ro&&cn.forEach(Ee=>{lt(Ee)&&(We&&Ue.has(Ee.id)?Ue.delete(Ee.id):Ue.add(Ee.id))});const Dt=Ee=>{const ke=Math.max(6,Ee.size/2),rt=ke*.8,Qe=ke+rt;return Ee.x-Qe<=we&&Ee.x+Qe>=ue&&Ee.y-Qe<=je&&Ee.y+Qe>=Se};if(Qr)if(Z){let Ee=null;for(const ke of en){const rt=Math.max(6,ke.size/2),Qe=rt*.8,bt=rt+Qe,Lt=Math.hypot(ke.x-y.x,ke.y-y.y),mn=Math.abs(y.x-ke.x)<=Me&&Math.abs(y.y-ke.y)<=bt,It=Math.abs(y.y-ke.y)<=Me&&Math.abs(y.x-ke.x)<=bt;if(Lt<=Math.max(rt,Me)||mn||It){const on=Math.min(Lt,Math.abs(y.x-ke.x)+Math.abs(y.y-ke.y));(!Ee||on<Ee.dist)&&(Ee={id:ke.id,dist:on})}}Ee&&(We&&ct.has(Ee.id)?ct.delete(Ee.id):ct.add(Ee.id))}else en.forEach(Ee=>{Dt(Ee)&&(We&&ct.has(Ee.id)?ct.delete(Ee.id):ct.add(Ee.id))});const Ht=Ee=>{const ke=Math.max(6,(Ee.size||18)/2),rt=ke*.8,Qe=ke+rt;return Ee.x-Qe<=we&&Ee.x+Qe>=ue&&Ee.y-Qe<=je&&Ee.y+Qe>=Se};if(Et)if(Z){let Ee=null;for(const ke of Ln){const rt=Math.max(6,(ke.size||18)/2),Qe=rt*.8,bt=rt+Qe,Lt=Math.hypot(ke.x-y.x,ke.y-y.y),mn=Math.abs(y.x-ke.x)<=Me&&Math.abs(y.y-ke.y)<=bt,It=Math.abs(y.y-ke.y)<=Me&&Math.abs(y.x-ke.x)<=bt;if(Lt<=Math.max(rt,Me)||mn||It){const on=Math.min(Lt,Math.abs(y.x-ke.x)+Math.abs(y.y-ke.y));(!Ee||on<Ee.dist)&&(Ee={id:ke.id,dist:on})}}Ee&&(We&&wt.has(Ee.id)?wt.delete(Ee.id):wt.add(Ee.id))}else Ln.forEach(Ee=>{Ht(Ee)&&(We&&wt.has(Ee.id)?wt.delete(Ee.id):wt.add(Ee.id))});Ze(He),Jt(Ue),Sn(ct),An(wt)}}if(Rn&&_n.length>0){if(L==="draw"&&nt!=="trace"){const c={id:Date.now().toString(),points:_n,color:J,size:I,layer:Wt,type:"trace"};St(y=>[...y,c]),Wt==="top"?ci(y=>[...y,c.id]):Gi(y=>[...y,c.id])}Tn([])}Xa&&(no(!1),Vs.current=null,io.current=null),Zt(!1),xo(!1),Kt(null),ko(!1)},[Rn,_n,L,J,I,Wt,oc,Fc,vi,ht,jt,Zl,Fn,en,Ln,Ft,cn,Cn,Rt,ui,Vi,za,ir,Oa,Ro,Qr,Et]);At.useEffect(()=>{if(!(L==="pan"&&Xa&&io.current))return;const c=k=>{const B=da.current;if(!B)return;const _=B.getBoundingClientRect(),Z=B.width/_.width,M=B.height/_.height,{startClientX:ae,startClientY:ue,cameraCenterX:Se,cameraCenterY:we}=io.current,je=(k.clientX-ae)*Z,Oe=(k.clientY-ue)*M,Me=-je/jt,Ve=-Oe/jt;ba(Se+Me,we+Ve)},y=()=>{no(!1),Vs.current=null,io.current=null,window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",y,!0)};return window.addEventListener("mousemove",c,!0),window.addEventListener("mouseup",y,!0),()=>{window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",y,!0)}},[L,Xa]);const nu=H.useCallback(()=>{const c=da.current;if(!c)return;const y=c.getContext("2d");if(!y)return;y.clearRect(0,0,c.width,c.height),y.fillStyle="#000000",y.fillRect(0,0,c.width,c.height),y.fillStyle="#ffffff",y.fillRect(5,5,c.width-10,c.height-10),y.save(),y.beginPath(),y.rect(5,5,c.width-10,c.height-10),y.clip(),y.translate(5,5);const k=(_,Z,M,ae,ue,Se,we,je)=>{const Oe=document.createElement("canvas");Oe.width=M,Oe.height=ae;const Me=Oe.getContext("2d",{willReadFrequently:!0});Me.clearRect(0,0,M,ae),Me.drawImage(Z,0,0,M,ae);let Ve=Oe;if(Math.abs(ue)>1e-6){const We=Math.tan(ue),He=Math.max(.2,1-We),Ue=Math.max(.2,1+We),ct=Math.max(He,Ue),wt=Math.max(1,Math.ceil(M*ct)),at=document.createElement("canvas");at.width=wt,at.height=ae;const lt=at.getContext("2d",{willReadFrequently:!0});lt.clearRect(0,0,wt,ae);for(let Dt=0;Dt<ae;Dt++){const Ht=ae<=1?0:Dt/(ae-1),Ee=He*(1-Ht)+Ue*Ht,ke=Math.max(1,M*Ee),rt=(wt-ke)/2;lt.drawImage(Ve,0,Dt,M,1,rt,Dt,ke,1)}Ve=at}if(Math.abs(Se)>1e-6){const We=Math.tan(Se),He=Math.max(.2,1-We),Ue=Math.max(.2,1+We),ct=Math.max(He,Ue),wt=Math.max(1,Math.ceil(ae*ct)),at=document.createElement("canvas");at.width=Ve.width,at.height=wt;const lt=at.getContext("2d",{willReadFrequently:!0});lt.clearRect(0,0,at.width,wt);for(let Dt=0;Dt<Ve.width;Dt++){const Ht=Ve.width<=1?0:Dt/(Ve.width-1),Ee=He*(1-Ht)+Ue*Ht,ke=Math.max(1,ae*Ee),rt=(wt-ke)/2;lt.drawImage(Ve,Dt,0,1,Ve.height,Dt,rt,1,ke)}Ve=at}_.drawImage(Ve,-we/2,-je/2,we,je)};y.translate(Qn.x,Qn.y),y.scale(jt,jt);{const _=Kl&&Wi;if(a&&a.bitmap&&Kl){const Z=a.bitmap;y.save(),y.globalAlpha=1;const M=[];if(a.brightness!==void 0&&a.brightness!==100&&M.push(`brightness(${a.brightness}%)`),a.contrast!==void 0&&a.contrast!==100&&M.push(`contrast(${a.contrast}%)`),V&&M.push("grayscale(100%)"),y.filter=M.length>0?M.join(" "):"none",y.translate(a.x,a.y),y.rotate(a.rotation*Math.PI/180),a.skewX||a.skewY){const we=Math.tan(a.skewX||0),je=Math.tan(a.skewY||0);y.transform(1,je,we,1,0,0)}y.scale(a.scale*(a.flipX?-1:1),a.scale*(a.flipY?-1:1));const ae=Z.width*1,ue=Z.height*1,Se=Z;a.keystoneV&&Math.abs(a.keystoneV)>1e-6||a.keystoneH&&Math.abs(a.keystoneH)>1e-6?k(y,Se,Z.width,Z.height,a.keystoneV||0,a.keystoneH||0,ae,ue):y.drawImage(Se,-ae/2,-ue/2,ae,ue),y.restore()}if(u&&u.bitmap&&Wi){const Z=u.bitmap;y.save(),y.globalAlpha=_?f/100:1;const M=[];if(u.brightness!==void 0&&u.brightness!==100&&M.push(`brightness(${u.brightness}%)`),u.contrast!==void 0&&u.contrast!==100&&M.push(`contrast(${u.contrast}%)`),V&&M.push("grayscale(100%)"),y.filter=M.length>0?M.join(" "):"none",y.translate(u.x,u.y),y.rotate(u.rotation*Math.PI/180),u.skewX||u.skewY){const we=Math.tan(u.skewX||0),je=Math.tan(u.skewY||0);y.transform(1,je,we,1,0,0)}y.scale(u.scale*(u.flipX?-1:1),u.scale*(u.flipY?-1:1));const ae=Z.width*1,ue=Z.height*1,Se=Z;u.keystoneV&&Math.abs(u.keystoneV)>1e-6||u.keystoneH&&Math.abs(u.keystoneH)>1e-6?k(y,Se,Z.width,Z.height,u.keystoneV||0,u.keystoneH||0,ae,ue):y.drawImage(Se,-ae/2,-ue/2,ae,ue),y.restore()}}if(Wd(y),Qr&&en.length>0){const _=Z=>{y.save(),y.translate(Z.x,Z.y),Z.rotation!==void 0&&Z.rotation!==0&&y.rotate(Z.rotation*Math.PI/180),Z.flipX&&y.scale(-1,1);const M=hn.find(je=>je.id===Z.powerBusId),ae=Rt.has(Z.id),ue=M?.color||"#ff0000";y.strokeStyle=ue,y.lineWidth=Math.max(1,(ae?3:2)/Math.max(jt,.001)),y.lineCap="round";const Se=Math.max(6,Z.size/2),we=Se*.8;if(ae&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(jt,.001)),y.beginPath(),y.arc(0,0,Se+we+3,0,Math.PI*2),y.stroke()),y.strokeStyle=ue,y.lineWidth=Math.max(1,(ae?3:2)/Math.max(jt,.001)),y.beginPath(),y.arc(0,0,Se,0,Math.PI*2),y.stroke(),y.beginPath(),y.moveTo(0,-Se-we),y.lineTo(0,Se+we),y.stroke(),y.beginPath(),y.moveTo(-Se-we,0),y.lineTo(Se+we,0),y.stroke(),M){y.fillStyle=ue;const je=Math.max(10,Se*.8);y.font=`${je}px sans-serif`,y.textAlign="center",y.textBaseline="top",y.fillText(M.name,0,Se+we+8)}y.restore()};en.forEach(_)}if(Et&&Ln.length>0){const _=Z=>{y.save(),y.translate(Z.x,Z.y),Z.rotation!==void 0&&Z.rotation!==0&&y.rotate(Z.rotation*Math.PI/180),Z.flipX&&y.scale(-1,1);const M=ui.has(Z.id),ae=Si.find(je=>je.id===Z.groundBusId),ue=ae?.color||Z.color||"#000000",Se=Z.groundBusId==="groundbus-earth";let we;if(Se){const je=Math.max(6,Z.size||18),Oe=je*.9,Me=je*.24,Ve=je*1.6;y.strokeStyle=ue,y.lineWidth=Math.max(1,(M?3:2)/Math.max(jt,.001)),y.lineCap="round",M&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(jt,.001)),y.setLineDash([5,5]),y.strokeRect(-Ve/2-3,-3,Ve+6,Oe+Me*2+6),y.setLineDash([])),y.strokeStyle=ue,y.lineWidth=Math.max(1,(M?3:2)/Math.max(jt,.001)),y.beginPath(),y.moveTo(0,0),y.lineTo(0,Oe),y.stroke();for(let We=0;We<3;We++){const He=Oe+We*Me,Ue=Ve*(1-We*.25);y.beginPath(),y.moveTo(-Ue/2,He),y.lineTo(Ue/2,He),y.stroke()}we=Oe+Me*2}else{const je=Math.max(6,(Z.size||18)/2),Oe=je*.8;M&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(jt,.001)),y.beginPath(),y.arc(0,0,je+Oe+3,0,Math.PI*2),y.stroke()),y.strokeStyle=ue,y.lineWidth=Math.max(1,(M?3:2)/Math.max(jt,.001)),y.beginPath(),y.arc(0,0,je,0,Math.PI*2),y.stroke(),y.beginPath(),y.moveTo(0,-je-Oe),y.lineTo(0,je+Oe),y.stroke(),y.beginPath(),y.moveTo(-je-Oe,0),y.lineTo(je+Oe,0),y.stroke(),we=je+Oe}if(ae){y.fillStyle=ue;const je=Math.max(10,(Z.size||18)*.5);y.font=`${je}px sans-serif`,y.textAlign="center",y.textBaseline="top",y.fillText(ae.name,0,we+8)}y.restore()};Ln.forEach(_)}const B=_=>{const Z=Math.max(10,_.size||18),M=Z/2;y.save(),y.strokeStyle=_.color||"#111",y.lineWidth=Math.max(1,2/Math.max(jt,.001));const ae=_.pinConnections||[],ue=ae.length>0&&ae.length===_.pinCount&&ae.every(je=>je&&je.trim()!=="");y.fillStyle=ue?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",y.beginPath(),y.rect(_.x-M,_.y-M,Z,Z),y.fill(),y.stroke();const Se=_.designator?.trim()||"";if(Se){y.fillStyle=_.color||"#111";const je=Math.max(6,Z*.35),Oe=Z*.9;let Me=je;y.font=`bold ${Me}px sans-serif`;const Ve=y.measureText(Se);Ve.width>Oe&&(Me=Oe/Ve.width*Me,Me=Math.max(6,Me),y.font=`bold ${Me}px sans-serif`),y.textAlign="center",y.textBaseline="middle",y.fillText(Se,_.x,_.y)}Cn.has(_.id)&&(y.setLineDash([4,3]),y.strokeStyle="#00bfff",y.lineWidth=1.5,y.strokeRect(_.x-M-3,_.y-M-3,Z+6,Z+6),y.setLineDash([])),y.restore()};if(qt){const _=M=>{const ae=parseInt(M,10);if(isNaN(ae))return null;for(const ue of ht)if((ue.type==="via"||ue.type==="pad"||ue.type==="testPoint")&&ue.points.length>0){const Se=ue.points[0];if(Se.id===ae)return{x:Se.x,y:Se.y}}for(const ue of ht)if(ue.type==="trace"){for(const Se of ue.points)if(Se.id===ae)return{x:Se.x,y:Se.y}}for(const ue of en)if(ue.pointId===ae)return{x:ue.x,y:ue.y};for(const ue of Ln)if(ue.pointId===ae)return{x:ue.x,y:ue.y};return null},Z=M=>{const ae=M.pinConnections||[],ue=M.componentType==="Electrolytic Capacitor"||M.componentType==="Diode"||M.componentType==="Battery"||M.componentType==="ZenerDiode",Se=M.componentType==="Capacitor"&&"dielectric"in M&&M.dielectric==="Tantalum",we=(ue||Se)&&M.pinPolarities,je=new Map;for(let Oe=0;Oe<ae.length;Oe++){const Me=ae[Oe];if(Me&&Me.trim()!==""){const Ve=Me.trim(),We=!!(we&&M.pinPolarities&&Oe<M.pinPolarities.length&&M.pinPolarities[Oe]==="-"),He=je.get(Ve);He!==void 0?je.set(Ve,He||We):je.set(Ve,We)}}for(const[Oe,Me]of je){const Ve=_(Oe);if(Ve){const We={x:M.x,y:M.y},He=parseInt(Oe,10),Ue=`${M.id}:${He}`,ct=Q.has(Ue);y.save(),ct?(y.strokeStyle="#00bfff",y.lineWidth=Math.max(2,nn*1.5/Math.max(jt,.001)),y.setLineDash([4,3])):(y.strokeStyle=Me?"rgba(0, 0, 0, 0.8)":Ut,y.lineWidth=Math.max(1,nn/Math.max(jt,.001))),y.beginPath(),y.moveTo(We.x,We.y),y.lineTo(Ve.x,Ve.y),y.stroke(),y.setLineDash([]),y.restore()}}};Oa&&Ft.forEach(Z),Ro&&cn.forEach(Z)}if(Oa&&Ft.forEach(B),Ro&&cn.forEach(B),L==="select"&&oc){y.save();const _=Math.max(2,6/Math.max(1e-4,jt));y.strokeStyle="#00bfff",y.fillStyle="rgba(0, 191, 255, 0.15)",y.lineWidth=Math.max(1,1.5/Math.max(1e-4,jt)),y.setLineDash([_,_]),y.beginPath(),y.rect(oc.x,oc.y,oc.width,oc.height),y.fill(),y.stroke(),y.setLineDash([]),y.restore()}y.restore()},[a,u,f,ht,_n,Rn,L,J,I,V,$t,Wt,jt,Qn.x,Qn.y,Kl,Wi,Vi,za,ir,Ki,Sr,Zr,wo,Oa,Ro,Ft,cn,Qr,en,Et,Ln,qt,oc,Fn,Cn,Rt,ui,Q,Bn,O,N,re,fe,nt,ln,ft,Ut,nn,Ji]);At.useEffect(()=>{const c=()=>{const y=Xl.current;if(!y)return;const k=1.6,B=244,_=12,Z=6,M=12,ae=y.clientWidth-B-_,ue=y.getBoundingClientRect(),Se=window.innerHeight,we=ue.top,Oe=Se-we-Z-10,Me=Math.min(y.clientHeight-M,Oe),Ve=Math.floor(Me*k),We=Math.floor(ae/k);let He,Ue;Ve<=ae?(He=Ve,Ue=Me):(He=ae,Ue=We),He=Math.max(600,He),Ue=Math.max(375,Ue),Ue=Math.max(355,Ue-20),us(ct=>{if(ct.width!==He||ct.height!==Ue){const wt=ct.width-10,at=ct.height-10,lt=He-10,Dt=Ue-10,Ht=wt>0?lt/wt:1,Ee=at>0?Dt/at:1;Fr(ke=>({x:ke.x*Ht,y:ke.y*Ee}))}return ct.width===He&&ct.height===Ue?ct:{width:He,height:Ue}})};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[Fr]),At.useEffect(()=>{ft&&(eo&&(xo(!1),Kt(null)),To(null))},[ft,eo,xo,Kt,To]);const Wd=H.useCallback(c=>{if(ht.forEach(y=>{if(y.type==="via"||y.type==="pad"||y.type==="testPoint"||y.testPointType!==void 0||y.type!=="trace")return;let k=!1;if(y.layer==="top"?k=za:y.layer==="bottom"&&(k=ir),!!k){if(y.points.length===1){const B=y.points[0],_=Math.max(.5,y.size/2);Fn.has(y.id)&&(c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.arc(B.x,B.y,_+3,0,Math.PI*2),c.stroke(),c.setLineDash([])),c.fillStyle=y.color,c.beginPath(),c.arc(B.x,B.y,_,0,Math.PI*2),c.fill()}else if(Fn.has(y.id)&&(c.strokeStyle="#00bfff",c.lineWidth=y.size+4,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.6,c.beginPath(),y.points.forEach((B,_)=>{_===0?c.moveTo(B.x,B.y):c.lineTo(B.x,B.y)}),c.stroke(),c.globalAlpha=1),c.strokeStyle=y.color,c.lineWidth=y.size,c.lineCap="round",c.lineJoin="round",c.globalAlpha=1,c.beginPath(),y.points.forEach((B,_)=>{_===0?c.moveTo(B.x,B.y):c.lineTo(B.x,B.y)}),c.stroke(),Ji){c.fillStyle="#000000";for(const B of y.points)c.beginPath(),c.arc(B.x,B.y,y.size/2,0,Math.PI*2),c.fill()}}}),ht.forEach(y=>{if(y.type==="via"){if(!Vi)return}else if(y.type==="pad"){const B=y.layer||"top";if(B==="top"&&!Ki||B==="bottom"&&!Sr)return}else if(y.type==="testPoint"){const B=y.layer||"top";if(B==="top"&&!Zr||B==="bottom"&&!wo)return}else return;const k=y.points[0];if(Fn.has(y.id)){if(y.type==="via"){const B=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.arc(k.x,k.y,B,0,Math.PI*2),c.stroke(),c.setLineDash([])}else if(y.type==="pad"){const B=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.strokeRect(k.x-B,k.y-B,y.size+6,y.size+6),c.setLineDash([])}else if(y.type==="testPoint"){const B=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.moveTo(k.x,k.y-B),c.lineTo(k.x+B,k.y),c.lineTo(k.x,k.y+B),c.lineTo(k.x-B,k.y),c.closePath(),c.stroke(),c.setLineDash([])}}if(y.type==="via"){const B=Math.max(.5,y.size/2),_=B*.5,Z=B*.7;c.fillStyle=y.color,c.beginPath(),c.arc(k.x,k.y,B,0,Math.PI*2),c.arc(k.x,k.y,_,0,Math.PI*2),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(k.x-Z,k.y),c.lineTo(k.x+Z,k.y),c.stroke(),c.beginPath(),c.moveTo(k.x,k.y-Z),c.lineTo(k.x,k.y+Z),c.stroke()}else if(y.type==="pad"){const B=Math.max(.5,y.size/2),_=y.size,Z=_*.5,M=B*.7;c.fillStyle=y.color,c.beginPath(),c.rect(k.x-B,k.y-B,_,_),c.rect(k.x-Z/2,k.y-Z/2,Z,Z),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(k.x-M,k.y),c.lineTo(k.x+M,k.y),c.stroke(),c.beginPath(),c.moveTo(k.x,k.y-M),c.lineTo(k.x,k.y+M),c.stroke()}else if(y.type==="testPoint"){const B=Math.max(.5,y.size/2),_=B*.7;c.fillStyle=y.color||"#FFFF00",c.strokeStyle="#000000",c.lineWidth=2,c.beginPath(),c.moveTo(k.x,k.y-B),c.lineTo(k.x+B,k.y),c.lineTo(k.x,k.y+B),c.lineTo(k.x-B,k.y),c.closePath(),c.fill(),c.stroke(),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(k.x-_,k.y),c.lineTo(k.x+_,k.y),c.stroke(),c.beginPath(),c.moveTo(k.x,k.y-_),c.lineTo(k.x,k.y+_),c.stroke()}}),_n.length>0){const y=Wt;let k=!0;if(L==="draw"&&(nt==="via"?k=Vi:k=y==="top"?za:ir),k)if(L==="draw")if(nt==="via"){const B=_n[_n.length-1],_=Math.max(.5,I/2),Z=_*.5,M=_*.7;c.fillStyle=J,c.beginPath(),c.arc(B.x,B.y,_,0,Math.PI*2),c.arc(B.x,B.y,Z,0,Math.PI*2),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(B.x-M,B.y),c.lineTo(B.x+M,B.y),c.stroke(),c.beginPath(),c.moveTo(B.x,B.y-M),c.lineTo(B.x,B.y+M),c.stroke()}else if(nt==="pad"){const B=_n[_n.length-1],_=Math.max(.5,I/2),Z=I,M=Z*.5,ae=_*.7;c.fillStyle=J,c.beginPath(),c.rect(B.x-_,B.y-_,Z,Z),c.rect(B.x-M/2,B.y-M/2,M,M),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(B.x-ae,B.y),c.lineTo(B.x+ae,B.y),c.stroke(),c.beginPath(),c.moveTo(B.x,B.y-ae),c.lineTo(B.x,B.y+ae),c.stroke()}else if(nt==="testPoint"){const B=_n[_n.length-1],_=Math.max(.5,I/2),Z=_*.7;c.fillStyle=J,c.beginPath(),c.moveTo(B.x,B.y-_),c.lineTo(B.x+_,B.y),c.lineTo(B.x,B.y+_),c.lineTo(B.x-_,B.y),c.closePath(),c.fill(),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(B.x-Z,B.y),c.lineTo(B.x+Z,B.y),c.stroke(),c.beginPath(),c.moveTo(B.x,B.y-Z),c.lineTo(B.x,B.y+Z),c.stroke()}else{const B=Bn||"top",_=B==="top"?O:N,Z=B==="top"?re:fe;if(_n.length===1){const M=_n[0],ae=Math.max(.5,Z/2);c.fillStyle=_,c.beginPath(),c.arc(M.x,M.y,ae,0,Math.PI*2),c.fill(),ln&&(c.strokeStyle=_,c.lineWidth=Z,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.6,c.beginPath(),c.moveTo(M.x,M.y),c.lineTo(ln.x,ln.y),c.stroke(),c.globalAlpha=1)}else if(c.strokeStyle=_,c.lineWidth=Z,c.lineCap="round",c.lineJoin="round",c.globalAlpha=1,c.beginPath(),_n.forEach((M,ae)=>{ae===0?c.moveTo(M.x,M.y):c.lineTo(M.x,M.y)}),c.stroke(),ln&&_n.length>0){const M=_n[_n.length-1];c.globalAlpha=.6,c.beginPath(),c.moveTo(M.x,M.y),c.lineTo(ln.x,ln.y),c.stroke(),c.globalAlpha=1}}else L==="erase"&&(c.strokeStyle="rgba(255, 0, 0, 0.5)",c.lineWidth=I,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.5,c.beginPath(),_n.forEach((B,_)=>{_===0?c.moveTo(B.x,B.y):c.lineTo(B.x,B.y)}),c.stroke())}},[ht,Fn,za,ir,Vi,Ki,Sr,Zr,wo,_n,L,nt,J,I,Wt,Bn,O,N,re,fe,ln,Ji]),ed=H.useCallback((c,y)=>{if(ft){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}c==="top"&&a?s(k=>k?{...k,...y}:null):c==="bottom"&&u?d(k=>k?{...k,...y}:null):c==="both"&&(a&&s(k=>k?{...k,...y}:null),u&&d(k=>k?{...k,...y}:null))},[a,u,ft]),Vd=H.useCallback(()=>{$t&&(ed($t,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,brightness:100,contrast:100}),X(!1))},[ed,$t]),$d=H.useCallback(()=>{if(Fn.size>0||Cn.size>0||Rt.size>0||ui.size>0){if(Fn.size>0){const c=ht.filter(_=>Fn.has(_.id)),y=Ot&&c.some(_=>_.type==="via"),k=Zn&&c.some(_=>_.type==="trace"),B=vn&&c.some(_=>_.type==="pad");if(y){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(k){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(B){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(Cn.size>0&&ji){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(Rt.size>0&&Bi){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(ui.size>0&&$a){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(St(c=>c.map(y=>{if(Fn.has(y.id)){const k=y.size+1;return y.type==="via"?Ct("via",k):y.type==="pad"?Ct("pad",k):y.type==="trace"&&Ct("trace",k,y.layer),{...y,size:k}}return y})),Cn.size>0){const c=(Cn.size>0&&Ft.find(y=>Cn.has(y.id))?.size||18)+1;Ct("component",c),wi(y=>y.map(k=>Cn.has(k.id)?{...k,size:(k.size||18)+1}:k)),Xn(y=>y.map(k=>Cn.has(k.id)?{...k,size:(k.size||18)+1}:k))}if(Rt.size>0){const c=(en.find(y=>Rt.has(y.id))?.size||18)+1;Ct("power",c),qi(y=>y.map(k=>Rt.has(k.id)?{...k,size:k.size+1}:k))}if(ui.size>0){const c=(Ln.find(y=>ui.has(y.id))?.size||18)+1;Ct("ground",c),Xi(y=>y.map(k=>ui.has(k.id)?{...k,size:(k.size||18)+1}:k))}}else{let c=null;if(L==="draw"&&nt==="via"?c="via":L==="draw"&&nt==="pad"?c=xa.current==="bottom"?"padBottom":"padTop":L==="draw"&&nt==="testPoint"?c=ws.current==="bottom"?"testPointBottom":"testPointTop":L==="draw"&&nt==="trace"?c=cr.current==="bottom"?"traceBottom":"traceTop":L==="component"?c=yo.current==="bottom"?"componentBottom":"componentTop":L==="power"?c="power":L==="ground"&&(c="ground"),c){const y=ai.get(c),k=Math.min(40,y.size+1);ai.setSize(c,k)}}},[Fn,Cn,Rt,ui,ht,Ot,Zn,vn,Mi,ji,Bi,$a,L,nt,Ct]),Yd=H.useCallback(()=>{if(Fn.size>0||Cn.size>0||Rt.size>0||ui.size>0){if(Fn.size>0){const c=ht.filter(Z=>Fn.has(Z.id)),y=Ot&&c.some(Z=>Z.type==="via"),k=Zn&&c.some(Z=>Z.type==="trace"),B=vn&&c.some(Z=>Z.type==="pad"),_=Mi&&c.some(Z=>Z.type==="testPoint");if(y){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(k){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(B){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}if(_){alert("Cannot change size: Test Points are locked. Unlock test points to change their size.");return}}if(Cn.size>0&&ji){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(Rt.size>0&&Bi){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(ui.size>0&&$a){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(St(c=>c.map(y=>{if(Fn.has(y.id)){const k=Math.max(1,y.size-1);return y.type==="via"?Ct("via",k):y.type==="pad"?Ct("pad",k,y.layer):y.type==="testPoint"?Ct("testPoint",k,y.layer):y.type==="trace"&&Ct("trace",k,y.layer),{...y,size:k}}return y})),Cn.size>0){const c=Math.max(1,(Ft.find(y=>Cn.has(y.id))?.size||18)-1);Ct("component",c),wi(y=>y.map(k=>Cn.has(k.id)?{...k,size:Math.max(1,(k.size||18)-1)}:k)),Xn(y=>y.map(k=>Cn.has(k.id)?{...k,size:Math.max(1,(k.size||18)-1)}:k))}if(Rt.size>0){const c=Math.max(1,(en.find(y=>Rt.has(y.id))?.size||18)-1);Ct("power",c),qi(y=>y.map(k=>Rt.has(k.id)?{...k,size:Math.max(1,k.size-1)}:k))}if(ui.size>0){const c=Math.max(1,(Ln.find(y=>ui.has(y.id))?.size||18)-1);Ct("ground",c),Xi(y=>y.map(k=>ui.has(k.id)?{...k,size:Math.max(1,(k.size||18)-1)}:k))}}else{let c=null;if(L==="draw"&&nt==="via"?c="via":L==="draw"&&nt==="pad"?c=(Wt||hi||"top")==="bottom"?"padBottom":"padTop":L==="draw"&&nt==="testPoint"?c=(Wt||mi||"top")==="bottom"?"testPointBottom":"testPointTop":L==="draw"&&nt==="trace"?c=(Wt||Bn||"top")==="bottom"?"traceBottom":"traceTop":L==="component"?c=(Wt||_i||"top")==="bottom"?"componentBottom":"componentTop":L==="power"?c="power":L==="ground"&&(c="ground"),c){const y=ai.get(c),k=Math.max(1,y.size-1);ai.setSize(c,k)}}},[Fn,Cn,Rt,ui,ht,Ot,Zn,vn,Mi,ji,Bi,$a,L,nt,Wt,hi,mi,Bn,_i,Ct]),Bf=H.useCallback(()=>{const c=Fs.size;if(Fn.size>0||Cn.size>0||Rt.size>0||ui.size>0){if(Fn.size>0){const y=ht.filter(M=>Fn.has(M.id)),k=Ot&&y.some(M=>M.type==="via"),B=vn&&y.some(M=>M.type==="pad"),_=Zn&&y.some(M=>M.type==="trace"),Z=Mi&&y.some(M=>M.type==="testPoint");if(k||B||_||Z){alert("Cannot change size: selected items are locked.");return}}if(Cn.size>0&&ji){alert("Cannot change size: selected components are locked.");return}if(Rt.size>0&&Bi){alert("Cannot change size: selected power nodes are locked.");return}if(ui.size>0&&$a){alert("Cannot change size: selected ground nodes are locked.");return}St(y=>y.map(k=>Fn.has(k.id)?(k.type==="via"?(Ct("via",c),va(B=>{const _=new Map(B),Z=_.get("via");return Z&&_.set("via",{...Z,settings:{...Z.settings,size:c}}),_})):k.type==="pad"?(Ct("pad",c,k.layer),va(B=>{const _=new Map(B),Z=_.get("pad");if(Z){const M=new Map(Z.layerSettings);M.set(k.layer,{...M.get(k.layer)||{color:Z.settings.color,size:c},size:c}),_.set("pad",{...Z,layerSettings:M})}return _})):k.type==="testPoint"?(Ct("testPoint",c,k.layer),va(B=>{const _=new Map(B),Z=_.get("testPoint");if(Z){const M=new Map(Z.layerSettings);M.set(k.layer,{...M.get(k.layer)||{color:Z.settings.color,size:c},size:c}),_.set("testPoint",{...Z,layerSettings:M})}return _})):k.type==="trace"&&Ct("trace",c,k.layer),{...k,size:c}):k)),Cn.size>0&&(Ct("component",c),wi(y=>y.map(k=>Cn.has(k.id)?{...k,size:c}:k)),Xn(y=>y.map(k=>Cn.has(k.id)?{...k,size:c}:k))),Rt.size>0&&(Ct("power",c),qi(y=>y.map(k=>Rt.has(k.id)?{...k,size:c}:k))),ui.size>0&&(Ct("ground",c),Xi(y=>y.map(k=>ui.has(k.id)?{...k,size:c}:k)))}else F(c),L==="draw"&&nt==="trace"?Wt==="top"?(ie(c),Ct("trace",c,"top")):(te(c),Ct("trace",c,"bottom")):L==="draw"&&nt==="via"?Ct("via",c):L==="draw"&&nt==="pad"?Ct("pad",c,Wt):L==="draw"&&nt==="testPoint"?Ct("testPoint",c,Wt):Ct(L==="component"?"component":L==="power"?"power":L==="ground"?"ground":"brush",c);as({visible:!1,size:6})},[Fs.size,Fn,Cn,Rt,ui,ht,Ot,Zn,ji,Bi,$a,L,nt,Wt,Ct,Gn,va]),Nu=H.useCallback(()=>{er({visible:!1,source:null,interval:5})},[]),td=H.useCallback(async(c,y=!1)=>{if(c===null){fa(!1),ei(null),oi.current&&(clearInterval(oi.current),oi.current=null),pr({visible:!1,interval:5}),y&&er({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!vo){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let k=Oi;if(!k){const M=window;if(typeof M.showDirectoryPicker=="function")try{k=await M.showDirectoryPicker(),ss(k)}catch(ae){ae?.name!=="AbortError"&&(console.error("Failed to get directory:",ae),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}Ti(k);const B=vo.replace(/\.json$/i,""),Z=Sd(B).replace(/[^a-zA-Z0-9_-]/g,"_");fo(Z),rc.current=k,Dl.current=Z,ei(c),fa(!0),Lo.current=!0,pr({visible:!1,interval:5}),y&&er({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${c} minutes`),Gl.current&&Gl.current()},200)},[vo,Oi,fa,ei,Ti,fo,pr,er,ss]),jc=H.useCallback(()=>{D("select"),Ze(new Set),Jt(new Set),Sn(new Set),An(new Set)},[Ze,Jt,Sn,An]),nd=H.useCallback(c=>{if(c.key==="Escape"){const _=document.activeElement;if(_&&(_.tagName==="INPUT"&&_.type==="checkbox"||_.tagName==="INPUT"&&_.type==="radio")){_.blur(),c.preventDefault(),c.stopPropagation();return}}const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)||qc.current>0&&c.key!=="m"&&c.key!=="M")return;const B=parseInt(c.key);if(!isNaN(B)&&B>=0&&B<=9){if(c.preventDefault(),c.stopPropagation(),L==="center"&&ul){if(Po.current&&(clearTimeout(Po.current),Po.current=null),da.current){const M=li.x,ae=li.y;Ys(ue=>({...ue,[B]:{x:M,y:ae,zoom:jt,showTopImage:Kl,showBottomImage:Wi,showViasLayer:Vi,showTopTracesLayer:za,showBottomTracesLayer:ir,showTopPadsLayer:Ki,showBottomPadsLayer:Sr,showTopTestPointsLayer:Zr,showBottomTestPointsLayer:wo,showTopComponents:Oa,showBottomComponents:Ro,showPowerLayer:Qr,showGroundLayer:Et,showConnectionsLayer:qt}}))}Pr(!1),D("select"),zo(void 0);return}const _=$s[B];_&&(si(_.zoom),zi({x:_.x,y:_.y}),ya(_.showTopImage),Hn(_.showBottomImage),Zi(_.showViasLayer),wr(_.showTopTracesLayer),ar(_.showBottomTracesLayer),Rr(_.showTopPadsLayer),Xr(_.showBottomPadsLayer),Kr(_.showTopTestPointsLayer),Jr(_.showBottomTestPointsLayer),Dr(_.showTopComponents),or(_.showBottomComponents),jr(_.showPowerLayer),kn(_.showGroundLayer),$n(_.showConnectionsLayer));return}if(c.key==="+"||c.key==="="){c.preventDefault(),c.stopPropagation(),$d();return}if(c.key==="-"||c.key==="_"){c.preventDefault(),c.stopPropagation(),Yd();return}if(L==="transform"&&$t){if((c.key==="ArrowUp"||c.key==="ArrowDown"||c.key==="ArrowLeft"||c.key==="ArrowRight")&&Cn.size>0){c.preventDefault(),c.stopPropagation();const _=c.shiftKey?10:1;let Z=0,M=0;c.key==="ArrowUp"?M=-_:c.key==="ArrowDown"?M=_:c.key==="ArrowLeft"?Z=-_:c.key==="ArrowRight"&&(Z=_);for(const ae of Cn){const ue=Ft.find(Se=>Se.id===ae);if(ue){const Se=ue.x+Z,we=ue.y+M,je=Di({x:Se,y:we});wi(Oe=>Oe.map(Me=>Me.id===ae?{...Me,x:je.x,y:je.y}:Me))}else{const Se=cn.find(we=>we.id===ae);if(Se){const we=Se.x+Z,je=Se.y+M,Oe=Di({x:we,y:je});Xn(Me=>Me.map(Ve=>Ve.id===ae?{...Ve,x:Oe.x,y:Oe.y}:Ve))}}}return}}else if(c.key==="ArrowUp"||c.key==="ArrowDown"){c.preventDefault(),c.stopPropagation();const _=c.key==="ArrowUp"?-90:90;Tu(_);return}else if(c.key==="ArrowLeft"||c.key==="ArrowRight")if(Cn.size>0){c.preventDefault(),c.stopPropagation();const _=c.shiftKey?10:1,Z=c.key==="ArrowLeft"?-_:_;for(const M of Cn){const ae=Ft.find(ue=>ue.id===M);if(ae){const ue=ae.x+Z,Se=Di({x:ue,y:ae.y});wi(we=>we.map(je=>je.id===M?{...je,x:Se.x}:je))}else{const ue=cn.find(Se=>Se.id===M);if(ue){const Se=ue.x+Z,we=Di({x:Se,y:ue.y});Xn(je=>je.map(Oe=>Oe.id===M?{...Oe,x:we.x}:Oe))}}}return}else{c.preventDefault(),c.stopPropagation(),ju();return}if((c.key==="I"||c.key==="i")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const _=document.activeElement;if(!!_&&(_.tagName==="INPUT"&&_.type!=="range"&&_.type!=="checkbox"&&_.type!=="radio"||_.tagName==="TEXTAREA"||_.isContentEditable))return;c.preventDefault(),c.stopPropagation();const M=[];Fn.size>0,Fn.size===0&&Cn.size===0&&Rt.size===0&&ui.size===0&&M.push(`
No objects selected.`);const ae=M.join(`
`);console.log(ae),to({visible:!0,text:ae});return}if((c.key==="N"||c.key==="n")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const _=document.activeElement;if(!!_&&(_.tagName==="INPUT"&&_.type!=="range"&&_.type!=="checkbox"&&_.type!=="radio"||_.tagName==="TEXTAREA"||_.isContentEditable))return;c.preventDefault(),c.stopPropagation(),_a(!0);return}if((c.key==="L"||c.key==="l")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const _=document.activeElement;if(!!_&&(_.tagName==="INPUT"&&_.type!=="range"&&_.type!=="checkbox"&&_.type!=="radio"||_.tagName==="TEXTAREA"||_.isContentEditable))return;c.preventDefault(),c.stopPropagation(),Gd();return}if((c.key==="E"||c.key==="e")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const _=document.activeElement;if(!!_&&(_.tagName==="INPUT"&&_.type!=="range"&&_.type!=="checkbox"&&_.type!=="radio"||_.tagName==="TEXTAREA"||_.isContentEditable))return;c.preventDefault(),c.stopPropagation(),tn||Wr(!0);return}if(c.key==="O"||c.key==="o"){const _=document.activeElement;if(!!_&&(_.tagName==="INPUT"&&_.type!=="range"&&_.type!=="checkbox"&&_.type!=="radio"||_.tagName==="TEXTAREA"||_.isContentEditable))return;c.preventDefault(),c.stopPropagation();const M=$s[0];M?(si(M.zoom),zi({x:M.x,y:M.y}),ya(M.showTopImage),Hn(M.showBottomImage),Zi(M.showViasLayer),wr(M.showTopTracesLayer),ar(M.showBottomTracesLayer),Rr(M.showTopPadsLayer),Xr(M.showBottomPadsLayer),Kr(M.showTopTestPointsLayer),Jr(M.showBottomTestPointsLayer),Dr(M.showTopComponents),or(M.showBottomComponents),jr(M.showPowerLayer),kn(M.showGroundLayer),$n(M.showConnectionsLayer)):(si(1),ba(0,0),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1")),g("overlay"),Ze(new Set),Jt(new Set),Sn(new Set),An(new Set),D("select");return}if((c.key==="Alt"||c.altKey)&&(Od(!0),Mc(!0)),c.key==="Escape"){c.preventDefault(),c.stopPropagation(),jc(),Zs(!1),gl(!1),zl(!1),xl(!1),Ks(!1),j(!1),xr(!1),Ku(null);return}if(c.key==="Enter"&&L==="draw"&&nt==="trace"){ku();return}if((c.key==="Delete"||c.key==="Backspace")&&(Fn.size>0||Cn.size>0||Rt.size>0||ui.size>0)){if(c.preventDefault(),c.stopPropagation(),ye(ht,Ft,cn,Ma,_o),Fn.size>0){const _=ht.filter(Se=>Fn.has(Se.id)),Z=Ot&&_.some(Se=>Se.type==="via"),M=Zn&&_.some(Se=>Se.type==="trace"),ae=vn&&_.some(Se=>Se.type==="pad"),ue=Mi&&_.some(Se=>Se.type==="testPoint");Z?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):M?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):ae?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):ue?alert("Cannot delete: Test points are locked. Unlock test points to delete them."):(St(Se=>Se.filter(we=>!Fn.has(we.id))),Ze(new Set))}Cn.size>0&&(ji?alert("Cannot delete: Components are locked. Unlock components to delete them."):(wi(_=>_.filter(Z=>!Cn.has(Z.id))),Xn(_=>_.filter(Z=>!Cn.has(Z.id))),Jt(new Set))),Rt.size>0&&(Bi?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(qi(_=>_.filter(Z=>!Rt.has(Z.id))),Sn(new Set))),ui.size>0&&($a?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(Xi(_=>_.filter(Z=>!ui.has(Z.id))),An(new Set)));return}if((c.key==="z"||c.key==="Z")&&(c.ctrlKey||c.metaKey)&&!c.shiftKey&&!c.altKey){const _=document.activeElement;if(!!_&&(_.tagName==="INPUT"&&_.type!=="range"&&_.type!=="checkbox"&&_.type!=="radio"||_.tagName==="TEXTAREA"||_.isContentEditable))return;c.preventDefault(),c.stopPropagation();const M=_e();if(M){const ae=new Set(M.drawingStrokes.map(je=>je.id));for(const je of ht)if(!ae.has(je.id))for(const Oe of je.points)Oe.id&&typeof Oe.id=="number"&&gh(Oe.id);const ue=new Set([...M.componentsTop.map(je=>je.id),...M.componentsBottom.map(je=>je.id)]);for(const je of[...Ft,...cn])if(!ue.has(je.id)){for(const Oe of je.pinConnections)if(Oe&&Oe.trim()!==""){const Me=parseInt(Oe,10);!isNaN(Me)&&Me>0&&gh(Me)}}const Se=new Set(M.powerSymbols.map(je=>je.id));for(const je of Ma)!Se.has(je.id)&&je.pointId&&typeof je.pointId=="number"&&gh(je.pointId);const we=new Set(M.groundSymbols.map(je=>je.id));for(const je of _o)!we.has(je.id)&&je.pointId&&typeof je.pointId=="number"&&gh(je.pointId);St(M.drawingStrokes),wi(M.componentsTop),Xn(M.componentsBottom),qi(M.powerSymbols),Xi(M.groundSymbols),Tn([])}return}if(!c.ctrlKey&&!c.altKey){const _=document.activeElement;if(!(!!_&&(_.tagName==="INPUT"&&_.type!=="range"&&_.type!=="checkbox"&&_.type!=="radio"||_.tagName==="TEXTAREA"||_.isContentEditable)))switch(c.key){case"s":case"S":c.preventDefault(),jc();return;case"b":case"B":c.preventDefault(),hn.length===1?(Y(hn[0].id),D("power"),j(!1)):hn.length>1?j(!0):(j(!0),D("power"));return;case"g":case"G":c.preventDefault(),Si.length===1?(Fe(Si[0].id),D("ground"),ge(!1)):Si.length>1?ge(!0):(ge(!0),D("ground"));return;case"v":case"V":c.preventDefault(),Qt("via"),D("draw");return;case"p":case"P":c.preventDefault(),Qt("pad"),D("draw"),Vt(hi||"top");return;case"y":case"Y":c.preventDefault(),Qt("testPoint"),D("draw"),Vt(mi||"top");return;case"t":case"T":c.preventDefault(),Qt("trace"),D("draw"),Vt(Bn||"top");return;case"c":case"C":c.preventDefault(),D("component"),Sc.current?(Js(Sc.current),xl(!1),Ks(!1)):(xl(!0),Ks(!1),Js(null));return;case"e":case"E":c.preventDefault(),D("erase");return;case"h":case"H":c.preventDefault(),D("pan");return;case"x":case"X":c.preventDefault(),D("center"),Pr(!0),Po.current&&clearTimeout(Po.current),Po.current=setTimeout(()=>{Pr(!1),D("select"),zo(void 0)},2e3);return;case"m":case"M":if(!c.ctrlKey){c.preventDefault(),mr(!1),D("magnify");return}break}}if(L==="transform"&&$t){if(!(c.key==="ArrowLeft"||c.key==="ArrowRight"||c.key==="ArrowUp"||c.key==="ArrowDown"))return;c.preventDefault(),c.stopPropagation();const Z=document.activeElement;if(Z&&Z.tagName==="INPUT"){const M=Z;M.type==="radio"&&M.blur()}if(ft)return;if(Ao==="nudge"){let M=0,ae=0;switch(c.key){case"ArrowLeft":M=-1;break;case"ArrowRight":M=1;break;case"ArrowUp":ae=-1;break;case"ArrowDown":ae=1;break;default:return}$t==="top"&&a?s(ue=>ue?{...ue,x:ue.x+M,y:ue.y+ae}:null):$t==="bottom"&&u?d(ue=>ue?{...ue,x:ue.x+M,y:ue.y+ae}:null):$t==="both"&&(a&&s(ue=>ue?{...ue,x:ue.x+M,y:ue.y+ae}:null),u&&d(ue=>ue?{...ue,x:ue.x+M,y:ue.y+ae}:null))}else if(Ao==="scale"){let M=0;switch(c.key){case"ArrowUp":M=.01;break;case"ArrowDown":M=-.01;break;case"ArrowRight":M=.001;break;case"ArrowLeft":M=-.001;break;default:return}if($t==="top"){a&&s(ae=>ae?{...ae,scale:Math.max(.1,Math.min(3,ae.scale+M))}:null);return}if($t==="bottom"){u&&d(ae=>ae?{...ae,scale:Math.max(.1,Math.min(3,ae.scale+M))}:null);return}if($t==="both"){a&&s(ae=>ae?{...ae,scale:Math.max(.1,Math.min(3,ae.scale+M))}:null),u&&d(ae=>ae?{...ae,scale:Math.max(.1,Math.min(3,ae.scale+M))}:null);return}}else if(Ao==="rotate"){let M=0;switch(c.key){case"ArrowUp":M=1;break;case"ArrowDown":M=-1;break;case"ArrowRight":M=.1;break;case"ArrowLeft":M=-.1;break;default:return}if($t==="top"){a&&s(ae=>ae?{...ae,rotation:ae.rotation+M}:null);return}if($t==="bottom"){u&&d(ae=>ae?{...ae,rotation:ae.rotation+M}:null);return}if($t==="both"){a&&s(ae=>ae?{...ae,rotation:ae.rotation+M}:null),u&&d(ae=>ae?{...ae,rotation:ae.rotation+M}:null);return}}else if(Ao==="slant"){let M=0,ae=0;switch(c.key){case"ArrowUp":ae=-.5;break;case"ArrowDown":ae=.5;break;case"ArrowLeft":M=-.5;break;case"ArrowRight":M=.5;break}if(M!==0||ae!==0){const ue=we=>we*Math.PI/180,Se=we=>Math.max(-.7,Math.min(.7,we));if($t==="top"){a&&s(we=>we?{...we,skewX:Se((we.skewX||0)+ue(M)),skewY:Se((we.skewY||0)+ue(ae))}:null);return}if($t==="bottom"){u&&d(we=>we?{...we,skewX:Se((we.skewX||0)+ue(M)),skewY:Se((we.skewY||0)+ue(ae))}:null);return}if($t==="both"){a&&s(we=>we?{...we,skewX:Se((we.skewX||0)+ue(M)),skewY:Se((we.skewY||0)+ue(ae))}:null),u&&d(we=>we?{...we,skewX:Se((we.skewX||0)+ue(M)),skewY:Se((we.skewY||0)+ue(ae))}:null);return}}}else if(Ao==="keystone"){let M=0,ae=0;switch(c.key){case"ArrowUp":ae=-.5;break;case"ArrowDown":ae=.5;break;case"ArrowLeft":M=-.5;break;case"ArrowRight":M=.5;break}if(M!==0||ae!==0){const ue=we=>we*Math.PI/180,Se=we=>Math.max(-.35,Math.min(.35,we));if($t==="top"){a&&s(we=>we?{...we,keystoneH:Se((we.keystoneH||0)+ue(M)),keystoneV:Se((we.keystoneV||0)+ue(ae))}:null);return}if($t==="bottom"){u&&d(we=>we?{...we,keystoneH:Se((we.keystoneH||0)+ue(M)),keystoneV:Se((we.keystoneV||0)+ue(ae))}:null);return}if($t==="both"){a&&s(we=>we?{...we,keystoneH:Se((we.keystoneH||0)+ue(M)),keystoneV:Se((we.keystoneV||0)+ue(ae))}:null),u&&d(we=>we?{...we,keystoneH:Se((we.keystoneH||0)+ue(M)),keystoneV:Se((we.keystoneV||0)+ue(ae))}:null);return}}}}else{const _=c.target;if(_.tagName==="INPUT"&&_.type==="range"){const Z=_,M=Number(Z.value),ae=Number(Z.min),ue=Number(Z.max),Se=Number(Z.step)||1;switch(c.key){case"ArrowLeft":c.preventDefault();const we=Math.max(ae,M-Se);Z.value=we.toString(),Z.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":c.preventDefault();const je=Math.min(ue,M+Se);Z.value=je.toString(),Z.dispatchEvent(new Event("input",{bubbles:!0}));break}}}},[L,$t,Ao,a,u,Fn,Cn,Rt,ui,ht,Ft,cn,en,Ln,hn,nt,ku,Bn,O,N,re,fe,jc,wi,Xn,_e,St,qi,Xi,Ma,_o]);At.useEffect(()=>{L!=="transform"&&To(null)},[L]),At.useEffect(()=>{window.addEventListener("keydown",nd,!0);const c=y=>{y.key==="Alt"&&(Od(!1),Mc(!1),cs(null))};return window.addEventListener("keyup",c,!0),()=>{window.removeEventListener("keydown",nd,!0),window.removeEventListener("keyup",c,!0)}},[nd,Rt,ui,Bi,Bi,en,Ln,$d,Yd,jc,Cn,Ft,cn,wi,Xn,$s,ul,L]);const Tc=H.useCallback(()=>{Gt.current={},he("#AA4499"),C("#F781BF"),ie(6),te(6),Mt("trace","#AA4499","top"),Mt("trace","#F781BF","bottom"),Ct("trace",6,"top"),Ct("trace",6,"bottom"),pe("#0072B2"),me("#56B4E9"),A(18),W(18),Mt("pad","#0072B2","top"),Mt("pad","#56B4E9","bottom"),Ct("pad",18,"top"),Ct("pad",18,"bottom"),_t("#6A3D9A"),vt("#9467BD"),kt(18),sn(18),Mt("component","#6A3D9A","top"),Mt("component","#9467BD","bottom"),Ct("component",18,"top"),Ct("component",18,"bottom"),kr("top"),$("#AA4499"),F(6),Ho([{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),Cs([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),Ct("power",18),Ct("ground",18),Yt(!1),jn(!1),Na(!1),Va(!1),Qo(!1),Is(!1),Vt("top"),D("select"),b(50),R(!1),g("overlay"),Wg(),Ie()},[Mt,Ct,Ie]),Cc=H.useCallback(()=>{ss(null),Ti(null),kc&&(kc.current=null),rc&&(rc.current=null),Ga(""),ls("pcb_project"),fa(!1),ei(null),fo(""),cl([]),Ws(-1),Dl&&(Dl.current=""),Lo.current=!1,na(!1),Ya(!1),qs(null),Vr(null),oi.current&&(clearInterval(oi.current),oi.current=null),s(null),d(null),Ie(),St([]),Da([]),Sa([]),rl([]),Ss([]),Tn([]),bn.current=[],wi([]),Xn([]),is(null),Fo(null),qi([]),Xi([]),w(null),Ho([{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),Cs([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),Ze(new Set),Jt(new Set),Sn(new Set),An(new Set),Zo(!1),bi([]),g("overlay"),si(1),ba(0,0),la(!0),Vt("top"),Ys({}),Pr(!1),Po.current&&(clearTimeout(Po.current),Po.current=null),To(null),xo(!1),Kt(null),rr("nudge"),X(!1),b(50),R(!1),T(2e3),Yt(!1),jn(!1),pi(!1),Ba(!1),Na(!1),Va(!1),Qo(!1),Is(!1),ya(!0),Hn(!0),Zi(!0),wr(!0),ar(!0),Rr(!0),Xr(!0),Kr(!0),Jr(!0),Dr(!0),or(!0),jr(!0),kn(!0),$n(!0),qn(!0),D("select"),Qt("trace"),kr("top"),sr("top"),lr("top"),vs("top"),cr.current="top",xa.current="top",ws.current="top",yo.current="top",Gt.current={},$e(!0),st(!1),Wg(),hr(null),to({visible:!1,text:""}),Ns({visible:!1,title:"",message:""}),mo({visible:!1}),_r({visible:!1}),qo({visible:!1,projectName:"",locationPath:"",locationHandle:null}),uo({visible:!1,filename:"",locationPath:"",locationHandle:null}),pr({visible:!1,interval:null}),er({visible:!1,source:"new",interval:5}),xr(!1),Ec(!1),ce(!1),xt(!1),pn(!1),_a(!1),ma(!1),zs(!1),Mo(null),cs(null),fl(null),no(!1),Vs.current=null,io.current=null,Zt(!1),yn(null),Fi.current=0,Mn.current=!1,console.log("Project closed: All state cleared and browser permissions released")},[ss,Ti,Ga,ls,fa,ei,fo,cl,Ws,s,d,St,Tn,Da,Sa,rl,Ss,wi,Xn,is,Fo,qi,Xi,w,Ho,Cs,Ze,Jt,Sn,An,Zo,bi,g,si,Fr,la,Vt,Ys,Pr,To,xo,Kt,rr,X,b,R,T,Yt,jn,pi,Ba,Na,Va,Qo,Is,ya,Hn,Zi,wr,ar,Rr,Xr,Kr,Jr,Dr,or,jr,kn,$n,D,Qt,kr,sr,lr,vs,$e,st,hr,to,Ns,mo,qo,uo,pr,er,Ie,xr,Ec,ce,xt,pn,_a,ma,Mo,cs,fl,no,Zt,yn]),Rl=H.useCallback(()=>{Tc(),setTimeout(()=>{si(1);const c=da.current,y=Xl.current;if(c&&y){const k=c.width-10,B=c.height-10,_=k/2,Z=B/2,M=(_-Qn.x)/jt,ae=(Z-Qn.y)/jt;ba(M,ae)}else ba(0,0);document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Ze(new Set),Jt(new Set),Sn(new Set),An(new Set)},100)},[Tc]);At.useEffect(()=>{Rl()},[]),At.useEffect(()=>{if(!gr.visible)return;const c=[];Fn.size>0,Fn.size===0&&Cn.size===0&&Rt.size===0&&ui.size===0&&c.push(`
No objects selected.`);const y=c.join(`
`);to(k=>({...k,text:y}))},[gr.visible,Fn,Cn,Rt,ui,ht,Ft,cn,en,Ln,hn]),At.useEffect(()=>{const c=y=>{const k=da.current;if(k&&!(Cr.current&&Cr.current.contains(y.target))&&!(y.target instanceof Node&&k.contains(y.target))){if(ku(),Mr){const B=Rs.current;(!B||!(y.target instanceof Node)||!B.contains(y.target))&&Zs(!1)}if(wc){const B=Cr.current;(!B||!(y.target instanceof Node)||!B.contains(y.target))&&(xl(!1),D("select"))}if(Ic){const B=el.current;(!B||!(y.target instanceof Node)||!B.contains(y.target))&&(Ks(!1),Ku(null))}if(Wo){const B=Bc.current;!y.target?.closest('button[title="Color Picker"]')&&(!B||!(y.target instanceof Node)||!B.contains(y.target))&&xr(!1)}}};return document.addEventListener("mousedown",c,!0),()=>document.removeEventListener("mousedown",c,!0)},[ku,Mr,tc,wc,Ic,Wo]);const Ac=c=>{if(!c.current)return{top:0,left:0};const y=c.current.getBoundingClientRect(),k=Xl.current?.getBoundingClientRect();return k?{top:y.top-k.top,left:y.left-k.left+y.width+4}:{top:0,left:0}},id=H.useCallback(()=>{Rs.current&&ic.current&&requestAnimationFrame(()=>{if(Rs.current&&ic.current){const c=Ac(ic);Rs.current.style.top=`${c.top}px`,Rs.current.style.left=`${c.left}px`}})},[]),zu=H.useCallback(()=>{nc.current&&ac.current&&requestAnimationFrame(()=>{if(nc.current&&ac.current){const c=Ac(ac);nc.current.style.top=`${c.top}px`,nc.current.style.left=`${c.left}px`}})},[]),_u=H.useCallback(()=>{bc.current&&tl.current&&requestAnimationFrame(()=>{if(bc.current&&tl.current){const c=Ac(tl);bc.current.style.top=`${c.top}px`,bc.current.style.left=`${c.left}px`}})},[]);At.useEffect(()=>{Mr&&id()},[Mr,id]),At.useEffect(()=>{tc&&zu()},[tc,zu]),At.useEffect(()=>{Ds&&_u()},[Ds,_u]),At.useEffect(()=>{if(wc&&Cr.current&&tu.current){const c=Ac(tu);Cr.current.style.top=`${c.top}px`,Cr.current.style.left=`${c.left}px`}},[wc]),At.useEffect(()=>{if(x&&vc.current&&_l.current){const c=Ac(_l);vc.current.style.top=`${c.top}px`,vc.current.style.left=`${c.left}px`}},[x]),At.useEffect(()=>{if(Ge&&Ms.current&&Ll.current){const c=Ac(Ll);Ms.current.style.top=`${c.top}px`,Ms.current.style.left=`${c.left}px`}},[Ge]),At.useEffect(()=>{const c=y=>{if(!Uo)return;const k=document.querySelector("[data-component-editor-dialog]");if(k&&y.target instanceof Node&&k.contains(y.target)){const Ht=y.target;if(Ht.tagName==="BUTTON"||Ht.tagName==="INPUT"||Ht.closest("button")||Ht.closest("input"))return}const B=da.current;if(!B)return;const _=B.getBoundingClientRect(),Z=y.clientX,M=y.clientY;if(Z<_.left||Z>_.right||M<_.top||M>_.bottom)return;const ae=B.width/_.width,ue=B.height/_.height,Se=Z-_.left,we=M-_.top,je=Se*ae,Oe=we*ue,Me=je-5,Ve=Oe-5,We=(Me-Qn.x)/jt,He=(Ve-Qn.y)/jt;let Ue=1/0,ct=null,wt=null;const at=Math.max(6/jt,4),Dt=[...Ft,...cn].find(Ht=>Ht.id===Uo.componentId)?.layer||"top";for(const Ht of ht)if((Ht.type==="via"||Ht.type==="pad")&&Ht.points.length>0){if(Ht.type==="pad"&&(Ht.layer||"top")!==Dt)continue;const Ee=Ht.points[0],ke=Math.max(1,Ht.size/2),rt=Math.hypot(Ee.x-We,Ee.y-He),Qe=Math.max(ke,at);rt<=Qe&&rt<Ue&&(Ue=rt,ct=Ee.id??null,wt=Ht)}if(ct!=null&&wt){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${ct}`),console.log(`  Connecting pin ${Uo.pinIndex+1} of component ${Uo.componentId}`);const Ht=String(ct),Ee=Uo.pinIndex,ke=Uo.componentId,rt=Ft.find(bt=>bt.id===ke),Qe=cn.find(bt=>bt.id===ke);if(rt){const bt=ht;wi(Lt=>{const mn=Lt.find(Nt=>Nt.id===ke);if(!mn)return Lt;const It=mn.pinConnections||[],Dn=It.length>0?[...It]:new Array(mn.pinCount).fill("");let on;if(Dn.length!==mn.pinCount){on=new Array(mn.pinCount).fill("");for(let Nt=0;Nt<Math.min(Dn.length,mn.pinCount);Nt++)on[Nt]=Dn[Nt]||""}else on=[...Dn];on[Ee]=Ht,console.log(`Updated pin ${Ee} with value: ${Ht}`),console.log("New pinConnections:",on);const On=Lt.find(Nt=>Nt.id===ke),rn=On?i0(On,on,bt):null;return Lt.map(Nt=>{if(Nt.id===ke){const Pn={...Nt,pinConnections:on};return rn&&(Pn.pinPolarities=rn),Pn}return Nt})})}else if(Qe){const bt=ht;Xn(Lt=>{const mn=Lt.find(Nt=>Nt.id===ke);if(!mn)return Lt;const It=mn.pinConnections||[],Dn=It.length>0?[...It]:new Array(mn.pinCount).fill("");let on;if(Dn.length!==mn.pinCount){on=new Array(mn.pinCount).fill("");for(let Nt=0;Nt<Math.min(Dn.length,mn.pinCount);Nt++)on[Nt]=Dn[Nt]||""}else on=[...Dn];on[Ee]=Ht,console.log(`Updated pin ${Ee} with value: ${Ht}`),console.log("New pinConnections:",on);const On=Lt.find(Nt=>Nt.id===ke),rn=On?i0(On,on,bt):null;return Lt.map(Nt=>{if(Nt.id===ke){const Pn={...Nt,pinConnections:on};return rn&&(Pn.pinPolarities=rn),Pn}return Nt})})}setTimeout(()=>{Fo(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Uo)return document.addEventListener("mousedown",c,!0),()=>document.removeEventListener("mousedown",c,!0)},[Uo,Ft,cn,ht,jt,Qn.x,Qn.y]);const Br=H.useCallback((c,y,k,B)=>{const _=window.innerWidth,Z=window.innerHeight,M=10;let ae=Math.max(M,Math.min(c,_-k-M)),ue=Math.max(M,Math.min(y,Z-B-M));return{x:ae,y:ue}},[]);At.useEffect(()=>{if(!lo)return;const c=k=>{if(!Ko)return;const B={x:k.clientX-Ko.x,y:k.clientY-Ko.y},_=Br(B.x,B.y,250,window.innerHeight*.4);js(_),localStorage.setItem("componentDialogPosition",JSON.stringify(_))},y=()=>{Ts(!1),Os(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[lo,Ko,Br]),At.useEffect(()=>{if(!ja)return;const c=k=>{if(!Wn)return;const B={x:k.clientX-Wn.x,y:k.clientY-Wn.y},_=Br(B.x,B.y,250,window.innerHeight*.4);Pt(_),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(_))},y=()=>{Nn(!1),$i(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[ja,Wn,Br]),At.useEffect(()=>{if(!Do)return;const c=k=>{if(!Kn)return;const B={x:k.clientX-Kn.x,y:k.clientY-Kn.y};Ua(B),localStorage.setItem("notesDialogPosition",JSON.stringify(B))},y=()=>{oo(!1),Ci(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[Do,Kn]),At.useEffect(()=>{if(ao&&Ii===null){const c=localStorage.getItem("notesDialogPosition");if(c)try{const y=JSON.parse(c);Ua(y)}catch{Ua({x:window.innerWidth-550,y:100})}else Ua({x:window.innerWidth-550,y:100})}},[ao,Ii]),At.useEffect(()=>{if(!Ui)return;const c=k=>{if(!Fa)return;const B={x:k.clientX-Fa.x,y:k.clientY-Fa.y};Ta(B),localStorage.setItem("projectNotesDialogPosition",JSON.stringify(B))},y=()=>{Za(!1),Qi(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[Ui,Fa]),At.useEffect(()=>{if(ro&&gi===null){const c=localStorage.getItem("projectNotesDialogPosition");if(c)try{const y=JSON.parse(c);Ta(y)}catch{Ta({x:100,y:100})}else Ta({x:100,y:100})}},[ro,gi]);const Gd=H.useCallback(()=>{ma(!0)},[]);At.useEffect(()=>{if(ns&&ns.visible&&zr===null){const c=localStorage.getItem("componentDialogPosition");let y;if(c)try{const k=JSON.parse(c);y=Br(k.x,k.y,250,window.innerHeight*.4),js(y)}catch{y=Br(window.innerWidth-280,90,250,window.innerHeight*.4),js(y)}else y=Br(window.innerWidth-280,90,250,window.innerHeight*.4),js(y)}else!ns||ns.visible},[ns,zr,Br]),At.useEffect(()=>{if(gr.visible&&Bt===null){const c=localStorage.getItem("detailedInfoDialogPosition");let y;if(c)try{const k=JSON.parse(c);y=Br(k.x,k.y,400,window.innerHeight*.8),Pt(y)}catch{y=Br(window.innerWidth-450,90,400,window.innerHeight*.8),Pt(y)}else y=Br(window.innerWidth-450,90,400,window.innerHeight*.8),Pt(y)}else gr.visible},[gr.visible,Bt,Br]),At.useEffect(()=>{const c=()=>{if(zr){const y=Br(zr.x,zr.y,250,window.innerHeight*.4);(y.x!==zr.x||y.y!==zr.y)&&(js(y),localStorage.setItem("componentDialogPosition",JSON.stringify(y)))}if(Bt){const y=Br(Bt.x,Bt.y,400,window.innerHeight*.8);(y.x!==Bt.x||y.y!==Bt.y)&&(Pt(y),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(y)))}};return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[zr,Bt,Br]);const Hc=H.useCallback(c=>{switch(c){case"transparency":b(50);break;case"brushSize":F(3);break}},[]),Xd=At.useRef(q);At.useEffect(()=>{Xd.current=q},[q]),At.useEffect(()=>{if(S){yc.current=performance.now(),b(0);const c=y=>{const k=yc.current||y,B=Xd.current,_=(y-k)%B/B,Z=1-Math.abs(1-2*_);b(Math.round(Z*100)),Yr.current=requestAnimationFrame(c)};Yr.current=requestAnimationFrame(c)}return()=>{Yr.current&&(cancelAnimationFrame(Yr.current),Yr.current=null)}},[S]),At.useEffect(()=>{if(L==="center"){zo(Ry());return}const c=L==="erase"?"erase":L==="magnify"?"magnify":L==="ground"?"ground":L==="power"?"power":L==="component"?"component":L==="draw"?nt==="via"?"via":nt==="pad"?"pad":nt==="testPoint"?"testPoint":"trace":"default";if(c==="default"){zo(void 0);return}const y=jt,k=c==="magnify"?18:Math.max(c==="component"?16:c==="power"||c==="ground"?12:6,Math.round(I*y)),_=k+4*2+(c==="magnify"?8:0),Z=document.createElement("canvas");Z.width=_,Z.height=_;const M=Z.getContext("2d");if(!M){zo(void 0);return}const ae=_/2,ue=_/2,Se=k/2;if(M.clearRect(0,0,_,_),c==="via"){const je=Se,Oe=Se*.5,Me=Se*.7,We=ai.get("via").color;M.fillStyle=We,M.beginPath(),M.arc(ae,ue,je,0,Math.PI*2),M.arc(ae,ue,Oe,0,Math.PI*2),M.fill("evenodd"),M.strokeStyle="#808080",M.lineWidth=1,M.beginPath(),M.moveTo(ae-Me,ue),M.lineTo(ae+Me,ue),M.stroke(),M.beginPath(),M.moveTo(ae,ue-Me),M.lineTo(ae,ue+Me),M.stroke()}else if(c==="pad"){const je=hi==="top"?"padTop":"padBottom",Oe=ai.get(je),Me=Oe.color,We=Math.max(6,Math.round(Oe.size*y))/2,He=We*2,Ue=He*.5,ct=We*.7;M.fillStyle=Me,M.beginPath(),M.rect(ae-We,ue-We,He,He),M.rect(ae-Ue/2,ue-Ue/2,Ue,Ue),M.fill("evenodd"),M.strokeStyle="#808080",M.lineWidth=1,M.beginPath(),M.moveTo(ae-ct,ue),M.lineTo(ae+ct,ue),M.stroke(),M.beginPath(),M.moveTo(ae,ue-ct),M.lineTo(ae,ue+ct),M.stroke()}else if(c==="trace"){const je=Bn==="top"?"traceTop":"traceBottom",Me=ai.get(je).color;M.fillStyle=Me,M.beginPath(),M.arc(ae,ue,Se,0,Math.PI*2),M.fill()}else if(c==="testPoint"){const je=mi==="top"?"testPointTop":"testPointBottom",Me=ai.get(je).size*y;zo(Dy(Me));return}else if(c==="erase"){const je=I*y,Oe=Math.max(je*.75,8),Me=Math.max(je*.5,6),Ve=Math.max(je*.2,2);M.save(),M.translate(ae,ue),M.rotate(-35*Math.PI/180),M.fillStyle="#f5a3b3",M.strokeStyle="#111",M.lineWidth=1.5;const We=1.5,He=-Oe/2,Ue=-Me/2;M.beginPath(),M.moveTo(He+We,Ue),M.lineTo(He+Oe-We,Ue),M.quadraticCurveTo(He+Oe,Ue,He+Oe,Ue+We),M.lineTo(He+Oe,Ue+Me-We),M.quadraticCurveTo(He+Oe,Ue+Me,He+Oe-We,Ue+Me),M.lineTo(He+We,Ue+Me),M.quadraticCurveTo(He,Ue+Me,He,Ue+Me-We),M.lineTo(He,Ue+We),M.quadraticCurveTo(He,Ue,He+We,Ue),M.closePath(),M.fill(),M.stroke(),M.fillStyle="#f18ea4",M.beginPath(),M.rect(-Oe/2,Me/2-Ve,Oe,Ve),M.fill(),M.restore()}else if(c==="magnify"){const je=Se;M.strokeStyle="#111",M.lineWidth=2,M.beginPath(),M.arc(ae-2,ue-2,je,0,Math.PI*2),M.stroke();const Oe=ae+je*.6,Me=ue+je*.6,Ve=Oe+6,We=Me+6;M.beginPath(),M.moveTo(Oe,Me),M.lineTo(Ve,We),M.stroke(),M.beginPath(),M.moveTo(ae-6,ue-2),M.lineTo(ae+2,ue-2),M.stroke(),Zl||(M.beginPath(),M.moveTo(ae-2,ue-6),M.lineTo(ae-2,ue+2),M.stroke())}else if(c==="ground"){const Oe=(Re?Si.find(Ve=>Ve.id===Re):null)?.color||"#000000";if(M.strokeStyle=Oe,M.lineWidth=2,M.lineCap="round",Re==="groundbus-earth"){const Ve=Se*1.5,We=Ve*.9,He=Ve*.24,Ue=Ve*1.6;M.beginPath(),M.moveTo(ae,ue-We/2),M.lineTo(ae,ue+We/2),M.stroke();for(let ct=0;ct<3;ct++){const wt=ue+We/2+ct*He,at=Ue*(1-ct*.25);M.beginPath(),M.moveTo(ae-at/2,wt),M.lineTo(ae+at/2,wt),M.stroke()}}else{const Ve=Se*.8;M.beginPath(),M.arc(ae,ue,Se,0,Math.PI*2),M.stroke(),M.beginPath(),M.moveTo(ae,ue-Se-Ve),M.lineTo(ae,ue+Se+Ve),M.stroke(),M.beginPath(),M.moveTo(ae-Se-Ve,ue),M.lineTo(ae+Se+Ve,ue),M.stroke()}}else if(c==="power"){const Oe=(z?hn.find(Ve=>Ve.id===z):null)?.color||"#ff0000";M.strokeStyle=Oe,M.lineWidth=2,M.lineCap="round";const Me=Se*.8;M.beginPath(),M.arc(ae,ue,Se,0,Math.PI*2),M.stroke(),M.beginPath(),M.moveTo(ae,ue-Se-Me),M.lineTo(ae,ue+Se+Me),M.stroke(),M.beginPath(),M.moveTo(ae-Se-Me,ue),M.lineTo(ae+Se+Me,ue),M.stroke()}else if(c==="component"){const Oe=(_i||"top")==="top"?"componentTop":"componentBottom",Ve=ai.get(Oe).color,We=k,He=We/2;M.strokeStyle=Ve,M.lineWidth=2,M.fillStyle="rgba(255,255,255,0.9)",M.beginPath(),M.rect(ae-He,ue-He,We,We),M.fill(),M.stroke();const Ue=es?t0(es):"?";M.fillStyle=Ve,M.font=`bold ${Math.max(8,We*.35)}px sans-serif`,M.textAlign="center",M.textBaseline="middle",M.fillText(Ue,ae,ue)}const we=`url(${Z.toDataURL()}) ${Math.round(ae)} ${Math.round(ue)}, crosshair`;zo(we)},[L,nt,J,I,jt,Zl,es,z,Re,hn,Si,Gn,Bn,hi,mi,_i,ca.toolInstanceId,ca.color,ca.size]),At.useEffect(()=>{nu()},[nu]),At.useEffect(()=>{nu()},[Xs.width,Xs.height]),At.useEffect(()=>{Fn.size===0&&L==="draw"&&nt==="trace"&&I>=1&&(Wt==="top"?ie(I):te(I))},[I,L,nt,Wt,Fn]),At.useEffect(()=>{St(c=>c.map(y=>{if(y.type==="via"&&y.points.length>0&&y.points[0].id!==void 0){const k=y.points[0].id,B=an(k,hn);if(y.viaType!==B)return{...y,viaType:B}}else if(y.type==="pad"&&y.points.length>0&&y.points[0].id!==void 0){const k=y.points[0].id,B=Jn(k,hn);if(y.padType!==B)return{...y,padType:B}}else if(y.type==="testPoint"&&y.points.length>0&&y.points[0].id!==void 0){const k=y.points[0].id,B=Ja(k,hn),_=B.includes("Power")?"power":B.includes("Ground")?"ground":B.includes("Signal")?"signal":"unknown";if(y.testPointType!==_)return{...y,testPointType:_}}return y}))},[en,Ln,hn,an,Jn,Ja]);const Ef=H.useCallback(()=>{const c=da.current;if(!c)return;const y=c.toDataURL("image/png"),k=window.open("","_blank");if(!k){alert("Please allow popups to print the canvas.");return}k.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${y}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),k.document.close()},[]);At.useEffect(()=>{const c=k=>{k.key==="Shift"&&mr(!0)},y=k=>{k.key==="Shift"&&mr(!1)};return window.addEventListener("keydown",c),window.addEventListener("keyup",y),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",y)}},[]);const Zd=H.useCallback(c=>{if(c.size===0)return;const y=Array.from(c).map(k=>String(k));St(k=>k.map(B=>{if(B.type==="trace"){const _=B.points.filter(Z=>Z.id===void 0?!0:!c.has(Z.id));return _.length<2?null:{...B,points:_}}return B}).filter(B=>B!==null)),wi(k=>k.map(B=>{const _=B.pinConnections||[];if(_.some(M=>M&&y.includes(M))){const M=_.map(ae=>ae&&y.includes(ae)?"":ae);return{...B,pinConnections:M}}return B})),Xn(k=>k.map(B=>{const _=B.pinConnections||[];if(_.some(M=>M&&y.includes(M))){const M=_.map(ae=>ae&&y.includes(ae)?"":ae);return{...B,pinConnections:M}}return B}))},[St,wi,Xn]),Lu=H.useRef(new Set);At.useEffect(()=>{const c=new Set;for(const k of ht)if((k.type==="via"||k.type==="pad")&&k.points.length>0){const B=k.points[0].id;B!==void 0&&c.add(B)}const y=new Set;for(const k of Lu.current)c.has(k)||y.add(k);y.size>0&&Zd(y),Lu.current=c},[ht,Zd]),At.useEffect(()=>{St(c=>c.map(y=>{if(y.type==="via"&&y.points.length>0&&y.points[0].id!==void 0){const k=y.points[0].id,B=an(k,hn);if(y.viaType!==B)return{...y,viaType:B}}else if(y.type==="pad"&&y.points.length>0&&y.points[0].id!==void 0){const k=y.points[0].id,B=Jn(k,hn);if(y.padType!==B)return{...y,padType:B}}else if(y.type==="testPoint"&&y.points.length>0&&y.points[0].id!==void 0){const k=y.points[0].id,B=Ja(k,hn),_=B.includes("Power")?"power":B.includes("Ground")?"ground":B.includes("Signal")?"signal":"unknown";if(y.testPointType!==_)return{...y,testPointType:_}}return y}))},[en,Ln,hn,an,Jn,Ja]),At.useEffect(()=>{const c=y=>{vr.current&&(vr.current.contains(y.target)||hr(null))};return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[]),At.useEffect(()=>{const c=(y,k)=>{const B=y.current;if(!B)return;const _=B.getContext("2d");if(!_)return;const Z=B.width,M=B.height;if(_.clearRect(0,0,Z,M),_.fillStyle="#fff",_.fillRect(0,0,Z,M),k?.bitmap){const ae=k.bitmap,ue=Math.min(Z/ae.width,M/ae.height),Se=Math.max(1,Math.floor(ae.width*ue)),we=Math.max(1,Math.floor(ae.height*ue)),je=Math.floor((Z-Se)/2),Oe=Math.floor((M-we)/2);_.drawImage(ae,je,Oe,Se,we)}_.strokeStyle="#ddd",_.lineWidth=1,_.strokeRect(.5,.5,Z-1,M-1)};c(Su,a),c(Kc,u)},[a,u]),At.useEffect(()=>{const c=[],y=[],k=[],B=[];for(const _ of ht)if(_.type==="via"&&_.points.length>=1){const Z=_.points[0],M={id:_.id,pointId:Z.id,x:Z.x,y:Z.y,size:_.size,color:_.color};c.push(M)}else if(_.type==="pad"&&_.points.length>=1){const Z=_.points[0],M={id:_.id,pointId:Z.id,x:Z.x,y:Z.y,size:_.size,color:_.color,layer:_.layer||"top"};y.push(M)}else if(_.type==="trace"&&_.points.length>=2)for(let Z=0;Z<_.points.length-1;Z++){const M=_.points[Z],ae=_.points[Z+1],ue={id:_.id,startPointId:M.id,endPointId:ae.id,x1:M.x,y1:M.y,x2:ae.x,y2:ae.y,size:_.size,color:_.color};_.layer==="top"?k.push(ue):B.push(ue)}Da(c),Sa(y),rl(k),Ss(B)},[ht]);const Pu=H.useRef(ht);Pu.current=ht;const yl=H.useCallback(()=>{const y=new Date().toISOString(),k=$g();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:y,view:{currentView:v,viewScale:jt,cameraWorldCenter:li,showBothLayers:Hi,selectedDrawingLayer:Wt},images:{top:a?{name:a.name,width:a.width,height:a.height,filePath:a.filePath||a.name,x:a.x,y:a.y,scale:a.scale,rotation:a.rotation,flipX:a.flipX,flipY:a.flipY,skewX:a.skewX,skewY:a.skewY,keystoneV:a.keystoneV,keystoneH:a.keystoneH,brightness:a.brightness??100,contrast:a.contrast??100}:null,bottom:u?{name:u.name,width:u.width,height:u.height,filePath:u.filePath||u.name,x:u.x,y:u.y,scale:u.scale,rotation:u.rotation,flipX:u.flipX,flipY:u.flipY,skewX:u.skewX,skewY:u.skewY,keystoneV:u.keystoneV,keystoneH:u.keystoneH,brightness:u.brightness??100,contrast:u.contrast??100}:null},projectDirectoryName:kc.current?kc.current.name||null:Oi&&Oi.name||null,drawing:{drawingStrokes:Pu.current.filter(_=>!(_.type==="trace"&&_.points.length<2)),vias:wa,tracesTop:dr,tracesBottom:fr,componentsTop:Ft,componentsBottom:cn,grounds:Ln,powers:en},powerBuses:hn,groundBuses:Si,pointIdCounter:qg(),designatorCounters:Cf(),autoAssignDesignators:it,useGlobalDesignatorCounters:tt,traceColors:{top:Gn.get("trace")?.layerSettings.get("top")?.color||O,bottom:Gn.get("trace")?.layerSettings.get("bottom")?.color||N},traceSizes:{top:Gn.get("trace")?.layerSettings.get("top")?.size||re,bottom:Gn.get("trace")?.layerSettings.get("bottom")?.size||fe},padColors:{top:Gn.get("pad")?.layerSettings.get("top")?.color||ne,bottom:Gn.get("pad")?.layerSettings.get("bottom")?.color||Ne},padSizes:{top:Gn.get("pad")?.layerSettings.get("top")?.size||U,bottom:Gn.get("pad")?.layerSettings.get("bottom")?.size||E},componentColors:{top:Gn.get("component")?.layerSettings.get("top")?.color||mt,bottom:Gn.get("component")?.layerSettings.get("bottom")?.color||de},componentSizes:{top:Gn.get("component")?.layerSettings.get("top")?.size||zt,bottom:Gn.get("component")?.layerSettings.get("bottom")?.size||ot},testPointColors:{top:Gn.get("testPoint")?.layerSettings.get("top")?.color||xe,bottom:Gn.get("testPoint")?.layerSettings.get("bottom")?.color||Te},testPointSizes:{top:Gn.get("testPoint")?.layerSettings.get("top")?.size||Ae,bottom:Gn.get("testPoint")?.layerSettings.get("bottom")?.size||Ye},componentConnectionColor:Ut,componentConnectionSize:nn,traceToolLayer:Bn,toolSettings:{trace:Gn.get("trace")?.settings||{color:"#ff0000",size:6},via:Gn.get("via")?.settings||{color:"#ff0000",size:18},pad:Gn.get("pad")?.settings||{color:"#ff0000",size:18},component:Gn.get("component")?.settings||{color:"#ff0000",size:18},ground:Gn.get("ground")?.settings||{color:"#000000",size:18},power:Gn.get("power")?.settings||{color:"#ff0000",size:18},erase:Gn.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:ft,areViasLocked:Ot,arePadsLocked:vn,areTracesLocked:Zn,areComponentsLocked:ji,areGroundNodesLocked:$a,arePowerNodesLocked:Bi},visibility:{showViasLayer:Vi,showTopPadsLayer:Ki,showBottomPadsLayer:Sr,showTopTracesLayer:za,showBottomTracesLayer:ir,showTopComponents:Oa,showBottomComponents:Ro,showPowerLayer:Qr,showGroundLayer:Et,showConnectionsLayer:qt,showTraceCornerDots:Ji},autoSave:{enabled:Ea,interval:bo,baseName:ia},projectInfo:{name:vo},projectNotes:ha,homeViews:$s,toolInstances:ai.getAll()},timestamp:k}},[v,jt,li,Hi,Wt,a,u,ht,wa,dr,fr,Ft,cn,Ln,Gn,ft,Ot,vn,Zn,ji,$a,Bi,hn,Si,qg,O,N,re,fe,ne,Ne,U,E,mt,de,zt,ot,Bn,Ea,bo,ia,vo,Vi,Ki,Sr,za,ir,Oa,Ro,Qr,Et,qt,it,tt,ha,$s]),Kd=H.useRef(yl);Kd.current=yl;const rc=H.useRef(ti);rc.current=ti;const Dl=H.useRef(ia);Dl.current=ia;const ad=H.useRef(Ga);ad.current=Ga;const So=H.useRef(Lr);So.current=Lr;const aa=H.useRef([]);aa.current=Xu;const qc=H.useRef(-1);qc.current=Zc;const kc=H.useRef(null),Ru=H.useRef(!1);At.useEffect(()=>{Ru.current||(kc.current=Oi)},[Oi]);const od=H.useCallback(async()=>{console.log("Auto save: performAutoSave called");let c=kc.current,y=Dl.current;if(console.log(`Auto save: projectDirHandle=${c?`set (${c.name})`:"missing"}, baseName=${y||"missing"}`),!c||!y){console.warn(`Auto save: Missing project directory handle (${!c}) or base name (${!y}). Please create a new project or open an existing project first.`),fa(!1),oi.current&&(clearInterval(oi.current),oi.current=null);return}if(!Lo.current){console.log("Auto save: Skipping - no changes since last save");return}const k=Pu.current,B=k.filter(we=>we.type==="trace"&&we.points.length<2);if(B.length>0){console.log(`Auto save: Cleaning up ${B.length} single-point trace(s) before save`),B.forEach(je=>console.log(`  - Removing single-point trace ${je.id}`));const we=k.filter(je=>!(je.type==="trace"&&je.points.length<2));St(we),Pu.current=we}console.log("Auto save: Starting save...");const{project:_,timestamp:Z}=Kd.current(),ae=`${Sd(y)}_${Z}.json`,ue=JSON.stringify(_,null,2),Se=new Blob([ue],{type:"application/json"});try{let we;try{we=await c.getDirectoryHandle("history",{create:!0})}catch(We){console.error("Failed to get/create history directory:",We);return}try{const We=[],He=So.current;for await(const Ue of c.keys())try{if(Ue==="history"||Ue===ae)continue;const wt=await(await c.getFileHandle(Ue)).getFile();if(!Ue.endsWith(".json"))continue;const at=await wt.text();try{const lt=JSON.parse(at);if(lt.version&&(lt.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!lt.fileType)){We.push(Ue);const Dt=lt.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${Ue} (${Dt}${Ue===He?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const Ue of We)try{const at=await(await(await c.getFileHandle(Ue)).getFile()).text(),Dt=await(await we.getFileHandle(Ue,{create:!0})).createWritable();await Dt.write(new Blob([at],{type:"application/json"})),await Dt.close(),await c.removeEntry(Ue),console.log(`Auto save: Moved ${Ue} from root to history/`)}catch(ct){console.warn(`Auto save: Failed to move ${Ue} to history:`,ct)}}catch(We){console.warn("Auto save: Error checking for old files in root:",We)}const Oe=await(await c.getFileHandle(ae,{create:!0})).createWritable();await Oe.write(Se),await Oe.close(),console.log(`Auto save: Successfully saved ${ae} to root directory`),ad.current(ae);const Me=aa.current,Ve=[ae,...Me.filter(We=>We!==ae)].sort((We,He)=>He.localeCompare(We));cl(Ve),aa.current=Ve,Ws(0),qc.current=0,Lo.current=!1,na(!1)}catch(we){console.error("Auto save failed:",we)}},[]);Gl.current=od;const sc=H.useCallback(async()=>{const{project:c}=yl(),y=JSON.stringify(c,null,2),k=new Blob([y],{type:"application/json"});if(Oi&&vo)try{let Se=null;try{Se=await Oi.getDirectoryHandle("history",{create:!0})}catch(He){console.error("Failed to get/create history directory:",He),Se=null}const we=vo.replace(/\.json$/i,""),je=Sd(we),{timestamp:Oe}=yl(),Me=`${je}_${Oe}.json`;if(Se)try{const He=[];for await(const Ue of Oi.keys())try{if(Ue==="history"||Ue===Me)continue;const wt=await(await Oi.getFileHandle(Ue)).getFile();if(!Ue.endsWith(".json"))continue;const at=await wt.text();try{JSON.parse(at).version&&(He.push(Ue),console.log(`Save: Found PCB project file in root: ${Ue}`))}catch{continue}}catch{continue}for(const Ue of He)try{const at=await(await(await Oi.getFileHandle(Ue)).getFile()).text(),Dt=await(await Se.getFileHandle(Ue,{create:!0})).createWritable();await Dt.write(new Blob([at],{type:"application/json"})),await Dt.close(),await Oi.removeEntry(Ue),console.log(`Save: Moved ${Ue} from root to history/`)}catch(ct){console.warn(`Save: Failed to move ${Ue} to history:`,ct)}}catch(He){console.warn("Save: Error checking for old files in root:",He)}const We=await(await Oi.getFileHandle(Me,{create:!0})).createWritable();await We.write(k),await We.close(),Ga(Me),na(!1),Lo.current=!1,console.log(`Project saved: ${vo}/${Me}`);return}catch(Se){console.error("Failed to save to project directory:",Se),ss(null)}if(vo&&!Oi){const Se=window;if(typeof Se.showDirectoryPicker=="function")try{const we=await Se.showDirectoryPicker();ss(we);const je=`${vo}.json`,Me=await(await we.getFileHandle(je,{create:!0})).createWritable();await Me.write(k),await Me.close(),Ga(je),na(!1),Lo.current=!1,console.log(`Project saved: ${je} in selected directory`);return}catch(we){we?.name!=="AbortError"&&console.error("Failed to get directory:",we)}}const B=Se=>String(Se).padStart(2,"0"),_=new Date,M=`pcb_project_${`${_.getFullYear()}_${B(_.getMonth()+1)}_${B(_.getDate())}_${B(_.getHours())}_${B(_.getMinutes())}_${B(_.getSeconds())}`}.json`,ae=window;if(typeof ae.showSaveFilePicker=="function")try{const Se=await ae.showSaveFilePicker({suggestedName:M,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),we=await Se.createWritable();await we.write(k),await we.close();const je=Se.name;try{const Ve=await Se.getFile();Ga(Ve.name)}catch{Ga(je)}const Me=je.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");Me&&ls(Me);try{const Ve=Se.name.replace(/\.json$/i,""),He=Sd(Ve).replace(/[^a-zA-Z0-9_-]/g,"_");fo(He),ti||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(Ve){console.warn("Could not set up auto save for new file:",Ve)}return}catch(Se){if(Se?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",Se)}const ue=document.createElement("a");ue.href=URL.createObjectURL(k),ue.download=M,document.body.appendChild(ue),ue.click(),setTimeout(()=>{URL.revokeObjectURL(ue.href),document.body.removeChild(ue)},0)},[yl]),Jd=H.useCallback(c=>{const y=new wn,k=y.internal.pageSize.getWidth(),B=y.internal.pageSize.getHeight(),_=20;let Z=_;const M=7,ae=60;y.setFontSize(18),y.setFont("helvetica","bold"),y.text("Bill of Materials",k/2,Z,{align:"center"}),Z+=M*2,y.setFontSize(10),y.setFont("helvetica","normal"),c.projectName&&(y.text(`Project: ${c.projectName}`,_,Z),Z+=M),y.text(`Exported: ${new Date(c.exportedAt).toLocaleString()}`,_,Z),Z+=M,y.text(`Total Components: ${c.totalComponents} | Unique Components: ${c.uniqueComponents}`,_,Z),Z=ae,y.setFontSize(9),y.setFont("helvetica","bold");const ue=[15,50,30,20,25,30,20],Se=["Qty","Component Type","Value","Package","Manufacturer","Part Number","Layer"];let we=_;return Se.forEach((Oe,Me)=>{y.text(Oe,we,Z),we+=ue[Me]}),Z+=M,y.setLineWidth(.5),y.line(_,Z,k-_,Z),Z+=M*.5,y.setFont("helvetica","normal"),y.setFontSize(8),c.items.forEach(Oe=>{Z>B-_-M*3&&(y.addPage(),Z=_+M),we=_,[Oe.quantity.toString(),Oe.componentType,Oe.value||"-",Oe.packageType||"-",Oe.manufacturer||"-",Oe.partNumber||"-",Oe.layer].forEach((Ve,We)=>{const He=ue[We]-2,Ue=y.splitTextToSize(Ve,He);y.text(Ue[0]||"-",we,Z),we+=ue[We]}),Z+=M*1.2}),y.output("blob")},[]),rd=H.useCallback(async()=>{if(console.log("handleExportBOM called, format:",ve),!Oi){alert("Please create or open a project before exporting BOM.");return}try{console.log("Generating BOM data...");const c=Ey(Ft,cn,vo);console.log("BOM data generated:",c),console.log("Creating/getting BOM directory...");let y;try{y=await Oi.getDirectoryHandle("BOM",{create:!0}),console.log("BOM directory obtained")}catch(ae){console.error("Failed to get/create BOM directory:",ae),alert("Failed to create BOM directory. See console for details.");return}const k=$g();let B,_;if(ve==="pdf")console.log("Generating PDF..."),B=Jd(c),_=`BOM_${k}.pdf`;else{console.log("Generating JSON...");const ae=JSON.stringify(c,null,2);B=new Blob([ae],{type:"application/json"}),_=`BOM_${k}.json`}console.log("Saving file:",_);const M=await(await y.getFileHandle(_,{create:!0})).createWritable();await M.write(B),await M.close(),console.log("BOM file saved successfully"),alert(`BOM exported successfully to ${_} in BOM directory!`)}catch(c){console.error("Failed to export BOM:",c),alert(`Failed to export BOM: ${c instanceof Error?c.message:String(c)}. See console for details.`)}},[Oi,Ft,cn,vo,ve,Jd]);At.useEffect(()=>{oi.current&&(clearInterval(oi.current),oi.current=null);const c=yr.current;if(yr.current=Ea,Ea&&bo){const y=bo*60*1e3;ti&&ia?(console.log(`Auto save: Setting up interval for ${bo} minute(s) (${y}ms)`),c||(Lo.current=!0,setTimeout(()=>{od()},100)),oi.current&&(clearInterval(oi.current),oi.current=null),oi.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${Lo.current}`),console.log(`  - dirHandle: ${rc.current?"set":"missing"}`),console.log(`  - baseName: ${Dl.current||"missing"}`),od()},y),console.log(`Auto save: Interval set up for ${y}ms (${bo} minutes)`),console.log(`  - Directory handle: ${ti?"set":"missing"}`),console.log(`  - Base name: ${ia||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!ti}) or base name (${!ia}). Disabling auto save.`),fa(!1),oi.current&&(clearInterval(oi.current),oi.current=null))}else Ea||(yr.current=!1);return()=>{oi.current&&(clearInterval(oi.current),oi.current=null)}},[Ea,bo,ti,ia]);const Du=H.useRef(!1),sd=H.useRef(!1),[ld,Qd]=At.useState(0);At.useEffect(()=>{const y=Object.keys(ai.getAll()).map(k=>ai.subscribe(k,()=>{Qd(B=>B+1)}));return()=>y.forEach(k=>k())},[]),At.useEffect(()=>{if(sd.current){console.log("Change tracking: Skipping - project is being loaded");return}if(Ea&&Du.current){Du.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}Lo.current=!0,na(!0),console.log("Change detected, marking as unsaved",{autoSaveEnabled:Ea,topImage:!!a,bottomImage:!!u,drawingStrokesCount:ht.length,componentsTopCount:Ft.length,componentsBottomCount:cn.length,powersCount:en.length,groundsCount:Ln.length,powerBusesCount:hn.length,projectNotesCount:ha.length,areImagesLocked:ft,areViasLocked:Ot,areTracesLocked:Zn,areComponentsLocked:ji,areGroundNodesLocked:$a,arePowerNodesLocked:Bi})},[a,u,ht,Ft,cn,en,Ln,hn,ha,O,N,re,fe,ft,Ot,Zn,ji,$a,Bi,Si,Ea,ne,Ne,U,E,mt,de,zt,ot,xe,Te,Ae,Ye,Ut,nn,Bn,it,tt,$s,Gn,ld]),At.useEffect(()=>{Ea?(Du.current=!0,console.log("Auto save: Enabled, marking first run")):Du.current=!1},[Ea]),At.useEffect(()=>{Ea||(Lo.current=!1)},[Ea]);const cd=H.useCallback(()=>!!(a||u||ht.length>0||Ft.length>0||cn.length>0||en.length>0||Ln.length>0),[a,u,ht,Ft,cn,en,Ln]),iu=H.useCallback(()=>{qo({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Of=H.useCallback(async()=>{const c=window;if(typeof c.showDirectoryPicker=="function")try{const y=await c.showDirectoryPicker({mode:"readwrite"});qo(k=>({...k,locationHandle:y,locationPath:y.name||"Selected folder"}))}catch(y){y?.name!=="AbortError"&&(console.error("Failed to get directory:",y),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),ud=H.useCallback(async()=>{const c=Li.projectName.trim();if(!c){alert("Please enter a project name.");return}const y=c.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!Li.locationHandle){alert("Please select a location for the project.");return}const k=Li.locationHandle;let B,_;if(k.name===y)B=k,_=k;else{_=k;try{B=await _.getDirectoryHandle(y,{create:!0})}catch(Z){console.error("Failed to create project folder:",Z),alert(`Failed to create project folder "${y}". See console for details.`);return}}Cc(),qo({visible:!1,projectName:"",locationPath:"",locationHandle:null}),ls(y),ss(B),Tc();try{const{project:Z,timestamp:M}=yl(),ue=`${Sd(y)}_${M}.json`,Se=JSON.stringify(Z,null,2),we=new Blob([Se],{type:"application/json"}),Oe=await(await B.getFileHandle(ue,{create:!0})).createWritable();await Oe.write(we),await Oe.close(),Ga(ue),console.log(`New project created: ${y}/${ue}`),er({visible:!0,source:"new",interval:5})}catch(Z){console.error("Failed to save new project:",Z),alert("Failed to save new project file. See console for details.")}},[Tc,yl,Li,Cc]),Mu=H.useCallback(()=>{qo({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),ef=H.useCallback(()=>{const c=vo?`${vo}.json`:"";uo({visible:!0,filename:c,locationPath:"",locationHandle:null}),setTimeout(()=>{if(br.current?.focus(),br.current&&c){const y=c.replace(/\.json$/i,"");br.current.setSelectionRange(0,y.length)}},100)},[vo]),If=H.useCallback(async()=>{const c=window;if(typeof c.showDirectoryPicker=="function")try{const y=await c.showDirectoryPicker();uo(k=>({...k,locationHandle:y,locationPath:y.name||"Selected folder"}))}catch(y){y?.name!=="AbortError"&&(console.error("Failed to get directory:",y),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),dd=H.useCallback(async()=>{const c=Ei.filename.trim();if(!c){alert("Please enter a file name.");return}const k=(c.endsWith(".json")?c:`${c}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!Ei.locationHandle){alert("Please select a location for the file.");return}const B=Ei.locationHandle;try{const{project:_}=yl(),Z=JSON.stringify(_,null,2),M=new Blob([Z],{type:"application/json"}),ue=await(await B.getFileHandle(k,{create:!0})).createWritable();await ue.write(M),await ue.close(),Ga(k);const Se=k.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");Se&&ls(Se),ss(B),na(!1),Lo.current=!1,uo({visible:!1,filename:"",locationPath:"",locationHandle:null}),hr(null),console.log(`Project saved as: ${k} in selected directory`)}catch(_){console.error("Failed to save project:",_),alert(`Failed to save project file "${k}". See console for details.`)}},[Ei,yl]),au=H.useCallback(()=>{uo({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),Bu=H.useCallback(async()=>{mo({visible:!1}),await sc(),iu(),Rl()},[sc,iu,Rl]),Uf=H.useCallback(()=>{mo({visible:!1}),iu(),Rl()},[iu,Rl]),tf=H.useCallback(()=>{mo({visible:!1})},[]);At.useEffect(()=>{if(Yl.visible){setTimeout(()=>{Gr.current?.focus()},0);const c=y=>{y.key==="Enter"?(y.preventDefault(),Bu()):y.key==="Escape"&&(y.preventDefault(),mo({visible:!1}))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}}},[Yl.visible,Bu]);const Nc=H.useCallback(async(c,y)=>{sd.current=!0;try{if(Ie(),c.toolInstances?ai.initializeFromProject(c):ai.initialize(),c.projectInfo&&c.projectInfo.name&&ls(c.projectInfo.name),c.view){if(c.view.currentView&&g(c.view.currentView),c.view.viewScale!=null&&si(c.view.viewScale),c.view.cameraWorldCenter)zi(c.view.cameraWorldCenter);else if(c.view.viewPan){const ae=da.current;if(ae){const ue=(ae.width-10)/2+5,Se=(ae.height-10)/2+5,we=c.view.viewScale??1,je=(ue-c.view.viewPan.x)/we,Oe=(Se-c.view.viewPan.y)/we;zi({x:je,y:Oe})}else zi({x:0,y:0})}c.view.showBothLayers!=null&&la(c.view.showBothLayers),c.view.selectedDrawingLayer&&Vt(c.view.selectedDrawingLayer)}if(c.homeViews){const ae={};for(const[ue,Se]of Object.entries(c.homeViews)){const we=parseInt(ue,10),je=Se;je.showTopImage===void 0?ae[we]={x:je.x,y:je.y,zoom:je.zoom,showTopImage:Kl,showBottomImage:Wi,showViasLayer:Vi,showTopTracesLayer:za,showBottomTracesLayer:ir,showTopPadsLayer:Ki,showBottomPadsLayer:Sr,showTopTestPointsLayer:Zr,showBottomTestPointsLayer:wo,showTopComponents:Oa,showBottomComponents:Ro,showPowerLayer:Qr,showGroundLayer:Et,showConnectionsLayer:qt}:ae[we]=je}Ys(ae)}else Ys({});if(c.projectNotes&&Array.isArray(c.projectNotes)?bi(c.projectNotes):bi([]),c.traceColors&&(c.traceColors.top&&(he(c.traceColors.top),Mt("trace",c.traceColors.top,"top")),c.traceColors.bottom&&(C(c.traceColors.bottom),Mt("trace",c.traceColors.bottom,"bottom"))),c.traceSizes){const ae=c.traceSizes.top!=null&&c.traceSizes.top>0?c.traceSizes.top:6;let ue=c.traceSizes.bottom!=null&&c.traceSizes.bottom>0?c.traceSizes.bottom:6;ue<6&&(ue=6),ie(ae),te(ue),Ct("trace",ae,"top"),Ct("trace",ue,"bottom")}else ie(6),te(6);if(c.padColors&&(c.padColors.top&&(pe(c.padColors.top),Mt("pad",c.padColors.top,"top")),c.padColors.bottom&&(me(c.padColors.bottom),Mt("pad",c.padColors.bottom,"bottom"))),c.padSizes){const ae=c.padSizes.top!=null&&c.padSizes.top>0?c.padSizes.top:18,ue=c.padSizes.bottom!=null&&c.padSizes.bottom>0?c.padSizes.bottom:18;A(ae),W(ue),Ct("pad",ae,"top"),Ct("pad",ue,"bottom")}if(c.componentColors&&(c.componentColors.top&&(_t(c.componentColors.top),Mt("component",c.componentColors.top,"top")),c.componentColors.bottom&&(vt(c.componentColors.bottom),Mt("component",c.componentColors.bottom,"bottom"))),c.componentSizes){const ae=c.componentSizes.top!=null&&c.componentSizes.top>0?c.componentSizes.top:18,ue=c.componentSizes.bottom!=null&&c.componentSizes.bottom>0?c.componentSizes.bottom:18;kt(ae),sn(ue),Ct("component",ae,"top"),Ct("component",ue,"bottom")}if(c.traceToolLayer&&(kr(c.traceToolLayer),L==="draw"&&nt==="trace")){const ae=c.traceToolLayer;$(ae==="top"?c.traceColors?.top||O:c.traceColors?.bottom||N);const ue=c.traceSizes?.top!=null&&c.traceSizes.top>0?c.traceSizes.top:6;let Se=c.traceSizes?.bottom!=null&&c.traceSizes.bottom>0?c.traceSizes.bottom:6;Se<6&&(Se=6),F(ae==="top"?ue:Se)}c.toolSettings&&va(ae=>{const ue=new Map(ae);if(c.toolSettings.trace){const we=ue.get("trace");if(we){const je={...we,settings:c.toolSettings.trace},Oe=new Map(we.layerSettings);c.traceSizes&&c.traceColors&&(Oe.set("top",{color:c.traceColors.top||we.layerSettings.get("top")?.color||"#AA4499",size:c.traceSizes.top||we.layerSettings.get("top")?.size||6}),Oe.set("bottom",{color:c.traceColors.bottom||we.layerSettings.get("bottom")?.color||"#F781BF",size:c.traceSizes.bottom||we.layerSettings.get("bottom")?.size||6})),ue.set("trace",{...je,layerSettings:Oe})}}if(c.toolSettings.via){const we=ue.get("via");we&&ue.set("via",{...we,settings:c.toolSettings.via})}if(c.toolSettings.pad){const we=ue.get("pad");if(we){const je={...we,settings:c.toolSettings.pad},Oe=new Map(we.layerSettings);c.padSizes&&c.padColors&&(Oe.set("top",{color:c.padColors.top||we.layerSettings.get("top")?.color||"#0072B2",size:c.padSizes.top||we.layerSettings.get("top")?.size||18}),Oe.set("bottom",{color:c.padColors.bottom||we.layerSettings.get("bottom")?.color||"#56B4E9",size:c.padSizes.bottom||we.layerSettings.get("bottom")?.size||18})),ue.set("pad",{...je,layerSettings:Oe})}}if(c.toolSettings.component){const we=ue.get("component");if(we){const je={...we,settings:c.toolSettings.component},Oe=new Map(we.layerSettings);c.componentSizes&&c.componentColors&&(Oe.set("top",{color:c.componentColors.top||we.layerSettings.get("top")?.color||"#6A3D9A",size:c.componentSizes.top||we.layerSettings.get("top")?.size||18}),Oe.set("bottom",{color:c.componentColors.bottom||we.layerSettings.get("bottom")?.color||"#9467BD",size:c.componentSizes.bottom||we.layerSettings.get("bottom")?.size||18})),ue.set("component",{...je,layerSettings:Oe})}}if(c.testPointSizes&&c.testPointColors){Ce(c.testPointColors.top||xe),Le(c.testPointColors.bottom||Te),De(c.testPointSizes.top||Ae),pt(c.testPointSizes.bottom||Ye);const we=ue.get("testPoint");if(we){const je=new Map(we.layerSettings);je.set("top",{color:c.testPointColors.top||we.layerSettings.get("top")?.color||"#E69F00",size:c.testPointSizes.top||we.layerSettings.get("top")?.size||6}),je.set("bottom",{color:c.testPointColors.bottom||we.layerSettings.get("bottom")?.color||"#F0E442",size:c.testPointSizes.bottom||we.layerSettings.get("bottom")?.size||6}),ue.set("testPoint",{...we,layerSettings:je})}}if(c.componentConnectionColor!==void 0&&xn(c.componentConnectionColor),c.componentConnectionSize!==void 0&&Un(c.componentConnectionSize),c.toolSettings.ground){const we=ue.get("ground");we&&ue.set("ground",{...we,settings:c.toolSettings.ground})}if(c.toolSettings.power){const we=ue.get("power");we&&ue.set("power",{...we,settings:c.toolSettings.power})}if(c.toolSettings.erase){const we=ue.get("erase");we&&ue.set("erase",{...we,settings:c.toolSettings.erase})}const Se=L==="draw"&&nt==="trace"?ue.get("trace"):L==="draw"&&nt==="via"?ue.get("via"):L==="draw"&&nt==="pad"?ue.get("pad"):L==="draw"&&nt==="testPoint"?ue.get("testPoint"):L==="component"?ue.get("component"):L==="power"?ue.get("power"):L==="ground"?ue.get("ground"):null;if(Se)if(L==="draw"&&nt==="trace"){const we=Bn||"top",je=Se.layerSettings.get(we);je?($(je.color),F(je.size),we==="top"?(he(je.color),ie(je.size)):(C(je.color),te(je.size))):($(Se.settings.color),F(Se.settings.size))}else if(L==="draw"&&nt==="pad"){const we=hi||"top",je=Se.layerSettings.get(we);je?($(je.color),F(je.size),we==="top"?(pe(je.color),A(je.size)):(me(je.color),W(je.size))):($(Se.settings.color),F(Se.settings.size))}else if(L==="component"){const we=_i||"top",je=Se.layerSettings.get(we);je?($(je.color),F(je.size),we==="top"?(_t(je.color),kt(je.size)):(vt(je.color),sn(je.size))):($(Se.settings.color),F(Se.settings.size))}else if(L==="draw"&&nt==="testPoint"){const we=mi||"top",je=Se.layerSettings.get(we);je?($(je.color),F(je.size),we==="top"?(Ce(je.color),De(je.size)):(Le(je.color),pt(je.size))):($(Se.settings.color),F(Se.settings.size))}else $(Se.settings.color),F(Se.settings.size);return ue});const k=async(ae,ue)=>{if(!ae)return null;let Se=null,we="",je=ae.filePath||ae.name;if(!ue){const Oe=ae.name||"image";return alert(`Error: Cannot load image "${Oe}" because no project directory is available.

Please ensure you opened the project file from its project directory. The project directory is required to access the image files stored in the images/ subdirectory.`),null}if(je)try{let Oe=je;!je.startsWith("images/")&&!je.startsWith("Images/")?Oe=je:je.startsWith("Images/")?Oe=je.replace("Images/",""):je.startsWith("images/")&&(Oe=je.replace("images/",""));let Me;try{Me=await ue.getDirectoryHandle("images")}catch{try{Me=await ue.getDirectoryHandle("Images")}catch{throw new Error("Neither 'images' nor 'Images' directory found in project folder.")}}const We=await(await Me.getFileHandle(Oe)).getFile();Se=await createImageBitmap(We),we=URL.createObjectURL(We),console.log(`Loaded image from file path: images/${Oe}`),je.startsWith("images/")||(je=`images/${je.replace("Images/","")}`)}catch(Oe){const Me=Oe instanceof Error?Oe.message:"Unknown error",Ve=ae.name||"image",We=je.startsWith("images/")||je.startsWith("Images/")?je.replace("Images/","images/"):`images/${je}`;return alert(`Error: Failed to load image "${Ve}" from project directory.

Expected location: ${We}

This may occur if:
- The image file was moved or deleted
- The project directory structure was modified
- File permissions are insufficient

Please ensure the image file exists in the images/ subdirectory of your project folder.

Technical details: ${Me}`),null}else{const Oe=ae.name||"image";return alert(`Error: Image "${Oe}" has no file path specified in the project file.

The project file is missing the image file path information. This may indicate the project file is corrupted or was created with an older version of the software.`),null}if(!Se){const Oe=ae.name||"image";return alert(`Error: Could not create image bitmap for "${Oe}".

The image file may be corrupted or in an unsupported format. Please ensure the image is a valid PNG, JPEG, or other supported image format.`),null}return{url:we,name:ae.name??"image",width:ae.width??Se.width,height:ae.height??Se.height,filePath:je,x:ae.x??0,y:ae.y??0,scale:ae.scale??1,rotation:ae.rotation??0,flipX:!!ae.flipX,flipY:!!ae.flipY,skewX:ae.skewX??0,skewY:ae.skewY??0,keystoneV:ae.keystoneV??0,keystoneH:ae.keystoneH??0,brightness:ae.brightness??100,contrast:ae.contrast??100,bitmap:Se}},B=y!==void 0?y:Oi,_=await k(c.images?.top,B),Z=await k(c.images?.bottom,B);if(s(_),d(Z),c.pointIdCounter&&typeof c.pointIdCounter=="number"?Lp(c.pointIdCounter):(console.warn("Project file missing pointIdCounter. Starting from 1."),Lp(1)),c.locks&&(typeof c.locks.areImagesLocked=="boolean"&&Yt(c.locks.areImagesLocked),typeof c.locks.areViasLocked=="boolean"&&jn(c.locks.areViasLocked),typeof c.locks.arePadsLocked=="boolean"&&pi(c.locks.arePadsLocked),typeof c.locks.areTracesLocked=="boolean"&&Na(c.locks.areTracesLocked),typeof c.locks.areComponentsLocked=="boolean"&&Va(c.locks.areComponentsLocked),typeof c.locks.areGroundNodesLocked=="boolean"&&Qo(c.locks.areGroundNodesLocked),typeof c.locks.arePowerNodesLocked=="boolean"&&Is(c.locks.arePowerNodesLocked)),c.visibility&&(typeof c.visibility.showViasLayer=="boolean"&&Zi(c.visibility.showViasLayer),typeof c.visibility.showTopPadsLayer=="boolean"&&Rr(c.visibility.showTopPadsLayer),typeof c.visibility.showBottomPadsLayer=="boolean"&&Xr(c.visibility.showBottomPadsLayer),typeof c.visibility.showTopTracesLayer=="boolean"&&wr(c.visibility.showTopTracesLayer),typeof c.visibility.showBottomTracesLayer=="boolean"&&ar(c.visibility.showBottomTracesLayer),typeof c.visibility.showTopComponents=="boolean"&&Dr(c.visibility.showTopComponents),typeof c.visibility.showBottomComponents=="boolean"&&or(c.visibility.showBottomComponents),typeof c.visibility.showPowerLayer=="boolean"&&jr(c.visibility.showPowerLayer),typeof c.visibility.showGroundLayer=="boolean"&&kn(c.visibility.showGroundLayer),typeof c.visibility.showConnectionsLayer=="boolean"&&$n(c.visibility.showConnectionsLayer),typeof c.visibility.showTraceCornerDots=="boolean"&&qn(c.visibility.showTraceCornerDots)),c.autoSave?(typeof c.autoSave.enabled=="boolean"&&fa(c.autoSave.enabled),typeof c.autoSave.interval=="number"&&ei(c.autoSave.interval),typeof c.autoSave.baseName=="string"&&c.autoSave.baseName?(fo(c.autoSave.baseName),Dl.current=c.autoSave.baseName,c.autoSave.enabled&&!ti&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),fa(!1),ei(null))):c.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),fa(!1),ei(null),fo(""),Dl.current="")):(fa(!1),ei(null),Ti(null),fo(""),rc.current=null,Dl.current="",oi.current&&(clearInterval(oi.current),oi.current=null)),c.drawing?.drawingStrokes&&Array.isArray(c.drawing.drawingStrokes)){const ae=c.drawing.drawingStrokes.map(ue=>({...ue,points:ue.points.map(Se=>({...Se,...Di(Se)}))})).filter(ue=>!(ue.type==="trace"&&ue.points.length<2));St(ae);for(const ue of ae)for(const Se of ue.points)Se.id&&typeof Se.id=="number"&&Pp(Se.id)}else console.warn("Project file missing drawingStrokes. Starting with empty strokes."),St([]);if(c.drawing?.componentsTop){const ae=c.drawing.componentsTop.map(ue=>{const Se=Di({x:ue.x,y:ue.y});return{...ue,x:Se.x,y:Se.y,layer:ue.layer||"top",pinConnections:ue.pinConnections||new Array(ue.pinCount||0).fill("")}});wi(ae)}if(c.drawing?.componentsBottom){const ae=c.drawing.componentsBottom.map(ue=>{const Se=Di({x:ue.x,y:ue.y});return{...ue,x:Se.x,y:Se.y,layer:ue.layer||"bottom",pinConnections:ue.pinConnections||new Array(ue.pinCount||0).fill("")}});Xn(ae)}if(c.designatorCounters&&typeof c.designatorCounters=="object"){const ae=c.designatorCounters;}else Gt.current={};if(typeof c.autoAssignDesignators=="boolean"&&$e(c.autoAssignDesignators),typeof c.useGlobalDesignatorCounters=="boolean"?st(c.useGlobalDesignatorCounters):st(!1),Gt.current={},c.drawing?.grounds){const ue=c.drawing.grounds.map(Se=>{Se.pointId||console.warn("Ground symbol missing pointId - this may cause issues");const we=Di({x:Se.x,y:Se.y});return{...Se,x:we.x,y:we.y}}).filter(Se=>{const we=typeof Se.x=="number"&&typeof Se.y=="number"&&!isNaN(Se.x)&&!isNaN(Se.y)&&isFinite(Se.x)&&isFinite(Se.y);return we||console.warn(`Filtered out invalid ground symbol at (${Se.x}, ${Se.y})`),we});Xi(ue);for(const Se of ue)Se.pointId&&typeof Se.pointId=="number"&&Pp(Se.pointId)}else Xi([]);let M;if(c.powerBuses&&Array.isArray(c.powerBuses)&&c.powerBuses.length>0?(M=c.powerBuses,Ho(M)):(M=[{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}],Ho(M)),c.groundBuses&&Array.isArray(c.groundBuses)&&c.groundBuses.length>0?Cs(c.groundBuses):Cs([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),c.drawing?.powers){const ue=c.drawing.powers.map(Se=>{Se.pointId||console.warn("Power symbol missing pointId - this may cause issues");const we=Di({x:Se.x,y:Se.y});return{...Se,x:we.x,y:we.y}}).filter(Se=>{const we=typeof Se.x=="number"&&typeof Se.y=="number"&&!isNaN(Se.x)&&!isNaN(Se.y)&&isFinite(Se.x)&&isFinite(Se.y);return we||console.warn(`Filtered out invalid power node at (${Se.x}, ${Se.y})`),we});qi(ue);for(const Se of ue)Se.pointId&&typeof Se.pointId=="number"&&Pp(Se.pointId)}else qi([]);Lo.current=!1,na(!1),Ya(!1),setTimeout(()=>{sd.current=!1},100)}catch(k){console.error("Failed to open project",k),alert("Failed to open project file. See console for details."),sd.current=!1}},[L,nt,Oi,s,d,Lp,Yt,jn,pi,Na,Va,Qo,Is,Zi,Rr,Xr,wr,ar,Dr,or,jr,kn,$n,fa,ei,Ti,fo,St,wi,Xn,Xi,Ho,Cs,qi,lc,Di,n0,_y,Cf,$e,st,Ie]),hs=H.useCallback(async()=>{},[Lr]),ou=H.useCallback(async c=>{const y=rc.current;if(!y){console.warn("Cannot load file: no directory handle");return}try{const B=await(await y.getFileHandle(c)).getFile();if(B.size===0){console.warn(`File ${c} is empty, skipping`);const Se=aa.current.filter(we=>we!==c);cl(Se),aa.current=Se;return}const _=await B.text();if(!_||_.trim().length===0){console.warn(`File ${c} contains no data, skipping`);const Se=aa.current.filter(we=>we!==c);cl(Se),aa.current=Se;return}let Z;try{Z=JSON.parse(_)}catch(ue){console.error(`Failed to parse JSON from file ${c}:`,ue);const we=aa.current.filter(je=>je!==c);cl(we),aa.current=we,await hs();return}Tc(),si(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Ze(new Set),Jt(new Set),Sn(new Set),An(new Set),Rl(),await Nc(Z),Ga(c);const ae=aa.current.indexOf(c);ae>=0?(Ws(ae),qc.current=ae):await hs(),Lo.current=!1,na(!1)}catch(k){console.error("Failed to load file from history:",k);const B=aa.current;if(B.includes(c)){const _=B.filter(Z=>Z!==c);cl(_),aa.current=_,await hs()}}},[Nc,hs,Rl]),Oh=H.useCallback(async c=>{if(!Oi){console.warn("Cannot restore file: no project directory handle"),alert("No project directory available. Please open or create a project first.");return}try{let y;try{y=await Oi.getDirectoryHandle("history")}catch(M){console.error("History directory not found:",M),alert("History directory not found.");return}const B=await(await y.getFileHandle(c)).getFile();if(B.size===0){alert(`File ${c} is empty.`);return}const _=await B.text();if(!_||_.trim().length===0){alert(`File ${c} contains no data.`);return}let Z;try{Z=JSON.parse(_)}catch(M){console.error(`Failed to parse JSON from file ${c}:`,M),alert(`Failed to parse file ${c}. It may be corrupted.`);return}Tc(),si(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Ze(new Set),Jt(new Set),Sn(new Set),An(new Set),Rl(),await Nc(Z),Ga(c),Lo.current=!1,console.log(`Successfully restored file: ${c}`)}catch(y){console.error("Failed to restore file from history:",y),alert(`Failed to restore file ${c}. Please try again.`)}},[Oi,Nc,Ze,Jt,Sn,An,Ga,si,Tc,Rl]);At.useEffect(()=>{Ia&&!Ls&&Ql({x:window.innerWidth/2-300,y:window.innerHeight/2-250})},[Ia,Ls]);const Ff=H.useCallback(c=>{if(!Ls)return;h(!0);const y=c.clientX-Ls.x,k=c.clientY-Ls.y,B=Z=>{Ql({x:Z.clientX-y,y:Z.clientY-k})},_=()=>{h(!1),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",_)},[Ls]);H.useCallback(async()=>{const c=qc.current,y=aa.current;if(c>=0&&c<y.length-1){const k=c+1,B=y[k];B&&await ou(B)}},[ou]),H.useCallback(async()=>{const c=qc.current,y=aa.current;if(c<=0||c>=y.length||y.length===0){console.warn("Cannot navigate to newer file: index is",c,"history length is",y.length);return}if(c>0&&c<y.length&&y.length>0){const k=c-1;if(k>=0&&k<y.length){const B=y[k];B?await ou(B):(console.warn("No newer file found at index",k),await hs())}else console.warn("Cannot navigate to newer file: prevIndex",k,"is out of bounds")}},[ou,hs]),At.useEffect(()=>{bn.current=_n},[_n]);const ml=At.useRef(nt),Eu=At.useRef(Wt);At.useEffect(()=>{const c=nt!==ml.current;if(L==="draw"&&ml.current==="trace"&&c){if(bn.current.length>=2){ye(ht,Ft,cn,Ma,_o);const y={id:`${Date.now()}-trace-autofinalize`,points:bn.current,color:J,size:I,layer:Eu.current,type:"trace"};St(k=>[...k,y]),Eu.current==="top"?ci(k=>[...k,y.id]):Gi(k=>[...k,y.id])}Tn([]),Zt(!1)}ml.current=nt,Eu.current=Wt},[nt,Wt,L,J,I]);const nf=At.useRef(L);At.useEffect(()=>{if(nf.current==="draw"&&L!=="draw"&&nt==="trace"&&bn.current.length>=2){const c={id:`${Date.now()}-trace-autofinalize`,points:bn.current,color:J,size:I,layer:Wt,type:"trace"};St(y=>[...y,c]),Wt==="top"?ci(y=>[...y,c.id]):Gi(y=>[...y,c.id]),Tn([]),Zt(!1)}nf.current=L},[L,nt,J,I,Wt]);const Ou=At.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);At.useEffect(()=>{nu()},[ht]),At.useEffect(()=>{nu()},[Ft,cn,Ln,Et]);const tn=Zc>0,oa=H.useCallback(async()=>{const c=window;if(typeof c.showOpenFilePicker=="function")try{const[y]=await c.showOpenFilePicker({multiple:!1}),k=await y.getFile();if(!k.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}Ru.current=!0,Cc(),await new Promise(ue=>setTimeout(ue,0)),Ga(k.name);const B=await k.text(),_=JSON.parse(B);Ru.current=!0;let Z=null;try{if(typeof y.getParent=="function")Z=await y.getParent();else{console.warn("getParent() not available. Prompting user for directory access...");const ue=window;if(typeof ue.showDirectoryPicker=="function")Z=await ue.showDirectoryPicker({startIn:y});else throw new Error("Directory picker not available in this browser")}if(Z)try{if((await(await Z.getFileHandle(k.name)).getFile()).name!==k.name)throw new Error("Directory verification failed: file name mismatch")}catch(ue){throw console.error("Directory verification failed:",ue),console.error("The selected directory might not contain the opened file"),new Error("Directory verification failed - selected directory does not contain the opened file")}ss(Z),kc.current=Z}catch(ue){console.error("Failed to get directory handle from file handle:",ue)}finally{setTimeout(()=>{Ru.current=!1},1e3)}const M=_.autoSave?.enabled===!0;await Nc(_,Z);let ae;if(_.projectInfo?.name?ae=_.projectInfo.name:(ae=k.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",ls(ae)),vo||ls(ae),M&&Z){const ue=ae.replace(/\.json$/i,""),we=Sd(ue).replace(/[^a-zA-Z0-9_-]/g,"_");Ti(Z),fo(we),rc.current=Z,Dl.current=we,oi.current&&(clearInterval(oi.current),oi.current=null)}setTimeout(()=>{er({visible:!0,source:"open",interval:5})},100)}catch(y){if(y?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",y),Cl.current?.click()}else Cl.current?.click()},[Nc,vo,Ga,ls,ss,er,Ea,Ti,fo,Cc]),af=H.useCallback(async()=>{_r({visible:!1}),await sc(),await oa()},[sc,oa]),Ih=H.useCallback(async()=>{_r({visible:!1}),await oa()},[oa]),Hf=H.useCallback(()=>{_r({visible:!1})},[]);At.useEffect(()=>{if(qr.visible){setTimeout(()=>{hl.current?.focus()},0);const c=y=>{y.key==="Enter"?(y.preventDefault(),af()):y.key==="Escape"&&(y.preventDefault(),_r({visible:!1}))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}}},[qr.visible,af]);const Iu=H.useCallback(async()=>{cd()?_r({visible:!0}):await oa()},[cd,oa]);return i.jsxs("div",{className:"app",children:[i.jsx("header",{className:"app-header",children:i.jsx("h1",{children:" Worms: An Electronics Toolkit (v2.7)"})}),i.jsx(Pb,{openMenu:Us,setOpenMenu:hr,isReadOnlyMode:tn,currentProjectFilePath:Lr,isProjectActive:!!Oi,autoSaveEnabled:Ea,autoSaveInterval:bo,hasUnsavedChangesState:gc,onNewProject:iu,onOpenProject:Iu,onSaveProject:sc,onSaveAs:ef,onPrint:Ef,onExportBOM:rd,bomExportFormat:ve,setBomExportFormat:se,hasUnsavedChanges:cd,setNewProjectDialog:mo,setAutoSaveDialog:pr,topImage:a,bottomImage:u,setCurrentTool:D,resetImageTransform:Vd,areImagesLocked:ft,setAreImagesLocked:Yt,onEnterBoardDimensions:()=>pn(!0),fileInputTopRef:Tl,fileInputBottomRef:Dc,openProjectRef:Cl,increaseSize:$d,decreaseSize:Yd,brushSize:I,drawingStrokes:ht,selectedIds:Fn,selectedComponentIds:Cn,selectedPowerIds:Rt,selectedGroundIds:ui,componentsTop:Ft,componentsBottom:cn,powers:en,grounds:Ln,powerNodeNames:eu,groundNodeNames:Bo,setSetSizeDialog:as,areViasLocked:Ot,setAreViasLocked:jn,arePadsLocked:vn,setArePadsLocked:pi,areTestPointsLocked:Mi,setAreTestPointsLocked:Ba,areTracesLocked:Zn,setAreTracesLocked:Na,areComponentsLocked:ji,setAreComponentsLocked:Va,areGroundNodesLocked:$a,setAreGroundNodesLocked:Qo,arePowerNodesLocked:Bi,setArePowerNodesLocked:Is,showTraceCornerDots:Ji,setShowTraceCornerDots:qn,setSelectedIds:Ze,setSelectedComponentIds:Jt,setSelectedPowerIds:Sn,setSelectedGroundIds:An,selectAllVias:fs,selectAllTraces:Tr,selectAllPads:ho,selectAllComponents:Al,selectDisconnectedComponents:kl,selectAllComponentConnections:Qc,selectAllPowerNodes:Qa,selectAllGroundNodes:Oc,selectPowerNodesByName:Nl,selectGroundNodesByName:mc,setShowPowerBusManager:Ec,setShowGroundBusManager:ce,setShowDesignatorManager:xt,setShowPastMachine:Jl,toolRegistry:Gn,updateToolSettings:Xo,updateToolLayerSettings:ur,setBrushSize:F,setBrushColor:$,saveToolSettings:l2,saveToolLayerSettings:Ad,colorPalette:Ou,currentTool:L,drawingMode:nt,traceToolLayer:Bn,padToolLayer:hi,testPointToolLayer:mi,componentToolLayer:_i,setTopTraceSize:ie,setBottomTraceSize:te,setTopPadSize:A,setBottomPadSize:W,setTopTestPointSize:De,setBottomTestPointSize:pt,setTopComponentSize:kt,setBottomComponentSize:sn,setComponentConnectionSize:Un,topTraceColor:O,bottomTraceColor:N,topPadColor:ne,bottomPadColor:Ne,topTestPointColor:xe,bottomTestPointColor:Te,topComponentColor:mt,bottomComponentColor:de,setTopTraceColor:he,setBottomTraceColor:C,setTopPadColor:pe,setBottomPadColor:me,setTopTestPointColor:Ce,setBottomTestPointColor:Le,setTopComponentColor:_t,setBottomComponentColor:vt,setComponentConnectionColor:xn,saveDefaultSize:Ct,saveDefaultColor:Mt,menuBarRef:vr,onOpenProjectNotes:Gd,onOpenTransformImages:()=>zs(!0),onOpenTransformAll:()=>Wr(!0)}),i.jsx("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:i.jsxs("div",{ref:Xl,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[i.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[i.jsxs("button",{onClick:()=>{tn||jc()},onMouseDown:c=>c.currentTarget.blur(),disabled:tn,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="select"?"2px solid #000":"1px solid #ddd",background:L==="select"?"#e6f0ff":"#fff",color:tn?"#999":"#222",outline:"none",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsx(vy,{size:14}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{tn||(console.log("Via tool clicked"),Qt("via"),D("draw"))},disabled:tn,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="draw"&&nt==="via"?"2px solid #000":"1px solid #ddd",background:L==="draw"&&nt==="via"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const c=ai.get("via").color;return i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:c,strokeWidth:"3"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:c})]})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:ai.get("via").size})]})]}),i.jsxs("button",{ref:ac,onClick:()=>{tn||(console.log("Pad tool clicked"),Qt("pad"),D("draw"),gl(!0),Vt(hi||"top"),setTimeout(()=>zu(),0))},disabled:tn,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="draw"&&nt==="pad"?"2px solid #000":"1px solid #ddd",background:L==="draw"&&nt==="pad"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const y=(hi||"top")==="top"?"padTop":"padBottom",k=ai.get(y).color,B=14,_=(24-B)/2,Z=(24-B)/2;return i.jsx("rect",{x:_,y:Z,width:B,height:B,fill:k})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(L==="draw"&&nt==="pad"&&ca.toolInstanceId&&(ca.toolInstanceId==="padTop"||ca.toolInstanceId==="padBottom"))return ca.size;const c=hi==="top"?"padTop":"padBottom";return ai.get(c).size})()})]})]}),i.jsxs("button",{ref:tl,onClick:()=>{tn||(console.log("Test Point tool clicked"),Qt("testPoint"),D("draw"),zl(!0),Vt(mi||"top"),setTimeout(()=>_u(),0))},disabled:tn,title:"Draw Test Points (Y)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="draw"&&nt==="testPoint"?"2px solid #000":"1px solid #ddd",background:L==="draw"&&nt==="testPoint"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const y=(mi||"top")==="top"?"testPointTop":"testPointBottom",k=ai.get(y).color,B=14,_=12,Z=12;return i.jsx("path",{d:`M ${_} ${Z-B/2} L ${_+B/2} ${Z} L ${_} ${Z+B/2} L ${_-B/2} ${Z} Z`,fill:k,stroke:"#000",strokeWidth:"1.5"})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Y"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(L==="draw"&&nt==="testPoint"&&ca.toolInstanceId&&(ca.toolInstanceId==="testPointTop"||ca.toolInstanceId==="testPointBottom"))return ca.size;const c=mi==="top"?"testPointTop":"testPointBottom";return ai.get(c).size})()})]})]}),i.jsxs("button",{ref:ic,onClick:()=>{tn||(console.log("Trace tool clicked"),Qt("trace"),D("draw"),Zs(!0),Vt(Bn||"top"),setTimeout(()=>id(),0))},disabled:tn,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="draw"&&nt==="trace"?"2px solid #000":"1px solid #ddd",background:L==="draw"&&nt==="trace"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsx(Sy,{size:14,color:(()=>{const y=(Bn||"top")==="top"?"traceTop":"traceBottom";return ai.get(y).color})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const c=Bn==="top"?"traceTop":"traceBottom";return ai.get(c).size})()})]})]}),i.jsxs("button",{ref:tu,onClick:()=>{tn||(console.log("Component tool clicked"),D("component"),xl(!0),Ks(!1),Js(null))},disabled:tn,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="component"?"2px solid #000":"1px solid #ddd",background:L==="component"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[(()=>{const y=(_i||"top")==="top"?"componentTop":"componentBottom",k=ai.get(y).color;return es?i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:k,strokeWidth:"1.5"}),i.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:k,fontWeight:"bold",fontFamily:"monospace",children:t0(es)})]}):i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:k,stroke:k,strokeWidth:"0.5"}),i.jsxs("g",{stroke:k,fill:"none",strokeWidth:"1.5",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),i.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:k})]})]})})(),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const c=_i==="top"?"componentTop":"componentBottom";return ai.get(c).size})()})]})]}),i.jsxs("button",{ref:_l,onClick:()=>{tn||(console.log("Power tool clicked"),ge(!1),hn.length===1?(Y(hn[0].id),D("power"),j(!1)):hn.length>1?j(!0):(j(!0),D("power")))},disabled:tn,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="power"?"2px solid #000":"1px solid #ddd",background:L==="power"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsx("span",{style:{color:(z?hn.find(c=>c.id===z)?.color:null)||"#ff0000",fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:ai.get("power").size})]})]}),i.jsxs("button",{ref:Ll,onClick:()=>{tn||(console.log("Ground tool clicked"),j(!1),Si.length===1?(Fe(Si[0].id),D("ground"),ge(!1)):Si.length>1?ge(!0):(ge(!0),D("ground")))},disabled:tn,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="ground"?"2px solid #000":"1px solid #ddd",background:L==="ground"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:i.jsxs("g",{stroke:(Re?Si.find(c=>c.id===Re)?.color:null)||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),i.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),i.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),i.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:ai.get("ground").size})]})]}),i.jsx("div",{style:{height:72}}),i.jsxs("button",{onClick:()=>{tn||D(c=>c==="pan"?"draw":"pan")},disabled:tn,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:L==="pan"?"2px solid #000":"1px solid #ddd",background:L==="pan"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),i.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),i.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{mr(!1),D(c=>c==="magnify"?"draw":"magnify")},title:"Magnify (M)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="magnify"?"2px solid #000":"1px solid #ddd",background:L==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),Zl?i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),i.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"M"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{tn||Wr(!0)},disabled:tn,title:"Change Perspective (E) - Open Change Perspective Dialog",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:xc?"2px solid #000":"1px solid #ddd",background:xc?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("ellipse",{cx:"12",cy:"12",rx:"9",ry:"6",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("circle",{cx:"11",cy:"11",r:"1.5",fill:"#111",stroke:"none"})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{tn||(D("center"),Pr(!0),Po.current&&clearTimeout(Po.current),Po.current=setTimeout(()=>{Pr(!1),D("select"),zo(void 0)},2e3))},disabled:tn,title:"Set View (X) - Press 0-9 to Set View",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:L==="center"?"2px solid #000":"1px solid #ddd",background:L==="center"?"#e6f0ff":"#fff",color:tn?"#999":"#222",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"22",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"12",x2:"10",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"14",y1:"12",x2:"22",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"X"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>{tn||xr(c=>!c)},disabled:tn,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:tn?"not-allowed":"pointer",opacity:tn?.5:1},children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[i.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Wo&&i.jsx("div",{ref:Bc,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:Ou.map(c=>i.jsx("div",{onClick:()=>{$(c),xr(!1);try{let k=null;L==="draw"&&nt==="via"?k="via":L==="draw"&&nt==="pad"?k=(hi||"top")==="bottom"?"padBottom":"padTop":L==="draw"&&nt==="testPoint"?k=(mi||"top")==="bottom"?"testPointBottom":"testPointTop":L==="draw"&&nt==="trace"?k=(Bn||"top")==="bottom"?"traceBottom":"traceTop":L==="component"?k=(_i||"top")==="bottom"?"componentBottom":"componentTop":L==="power"?k="power":L==="ground"&&(k="ground"),k&&ai.setColor(k,c)}catch(k){console.error("Error updating tool instance color:",k)}const y=Es(Gn);if(y)if(L==="draw"&&nt==="trace"){const k=Bn||"top",_=y.layerSettings.get(k)?.size||y.settings.size,Z={color:c,size:_};ur(y.id,k,Z),Ad(y.id),k==="top"?(he(c),Mt("trace",c,"top")):(C(c),Mt("trace",c,"bottom"))}else if(L==="draw"&&nt==="pad"){const k=hi||"top",_=y.layerSettings.get(k)?.size||y.settings.size,Z={color:c,size:_};ur(y.id,k,Z),Ad(y.id),k==="top"?(pe(c),Mt("pad",c,"top")):(me(c),Mt("pad",c,"bottom"))}else if(L==="draw"&&nt==="testPoint"){const k=mi||"top",_=y.layerSettings.get(k)?.size||y.settings.size,Z={color:c,size:_};ur(y.id,k,Z),Ad(y.id),k==="top"?(Ce(c),Mt("testPoint",c,"top")):(Le(c),Mt("testPoint",c,"bottom"))}else if(L==="component"){const k=_i||"top",_=y.layerSettings.get(k)?.size||y.settings.size,Z={color:c,size:_};ur(y.id,k,Z),Ad(y.id),k==="top"?(_t(c),Mt("component",c,"top")):(vt(c),Mt("component",c,"bottom"))}else{const k={...y.settings,color:c};Xo(y.id,k),l2(y.id,c,y.settings.size),L==="draw"&&nt==="via"&&Mt("via",c)}Mt("brush",c),Fn.size>0&&St(k=>k.map(B=>Fn.has(B.id)?(B.type==="via"?(Mt("via",c),va(_=>{const Z=new Map(_),M=Z.get("via");return M&&Z.set("via",{...M,settings:{...M.settings,color:c}}),Z})):B.type==="pad"?(Mt("pad",c),va(_=>{const Z=new Map(_),M=Z.get("pad");return M&&Z.set("pad",{...M,settings:{...M.settings,color:c}}),Z})):B.type==="trace"&&Mt("trace",c,B.layer),{...B,color:c}):B)),Cn.size>0&&(Mt("component",c),wi(k=>k.map(B=>Cn.has(B.id)?{...B,color:c}:B)),Xn(k=>k.map(B=>Cn.has(B.id)?{...B,color:c}:B))),Rt.size>0&&qi(k=>k.map(B=>Rt.has(B.id)?{...B,color:c}:B)),ui.size>0&&Xi(k=>k.map(B=>ui.has(B.id)?{...B,color:c}:B))},title:c,style:{width:22,height:22,backgroundColor:c,border:c===J?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},c))})})]})]}),L==="draw"&&nt==="trace"&&Mr&&i.jsxs("div",{ref:Rs,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:Bn==="top",onChange:()=>{console.log("Trace tool Top clicked"),cr.current="top",kr("top"),Vt("top"),$(O),F(re),va(c=>{const y=new Map(c),k=y.get("trace");return k&&y.set("trace",{...k,settings:{color:O,size:re}}),y}),Zs(!1),ya(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:Bn==="bottom",onChange:()=>{console.log("Trace tool Bottom clicked"),cr.current="bottom",kr("bottom"),Vt("bottom"),$(N),F(fe),va(c=>{const y=new Map(c),k=y.get("trace");return k&&y.set("trace",{...k,settings:{color:N,size:fe}}),y}),Zs(!1),Hn(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),L==="draw"&&nt==="pad"&&tc&&i.jsxs("div",{ref:nc,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:hi==="top",onChange:()=>{console.log("Pad tool Top clicked"),xa.current="top",sr("top"),Vt("top");const c=ai.get("padTop");$(c.color),F(c.size),va(y=>{const k=new Map(y),B=k.get("pad");return B&&k.set("pad",{...B,settings:{color:c.color,size:c.size}}),k}),gl(!1),ya(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:hi==="bottom",onChange:()=>{console.log("Pad tool Bottom clicked"),xa.current="bottom",sr("bottom"),Vt("bottom");const c=ai.get("padBottom");$(c.color),F(c.size),va(y=>{const k=new Map(y),B=k.get("pad");return B&&k.set("pad",{...B,settings:{color:c.color,size:c.size}}),k}),gl(!1),Hn(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),L==="draw"&&nt==="testPoint"&&Ds&&i.jsxs("div",{ref:bc,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"testPointToolLayer",checked:mi==="top",onChange:()=>{console.log("Test Point tool Top clicked"),ws.current="top",lr("top"),Vt("top"),$(xe),F(Ae),va(c=>{const y=new Map(c),k=y.get("testPoint");return k&&y.set("testPoint",{...k,settings:{color:xe,size:Ae}}),y}),zl(!1),ya(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"testPointToolLayer",checked:mi==="bottom",onChange:()=>{console.log("Test Point tool Bottom clicked"),ws.current="bottom",lr("bottom"),Vt("bottom"),$(Te),F(Ye),va(c=>{const y=new Map(c),k=y.get("testPoint");return k&&y.set("testPoint",{...k,settings:{color:Te,size:Ye}}),y}),zl(!1),Hn(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),x&&i.jsxs("div",{ref:vc,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),hn.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...hn].sort((c,y)=>{const k=Z=>{const M=Z.match(/([+-]?)(\d+\.?\d*)/);if(M){const ae=M[1]||"+",ue=parseFloat(M[2]);return{absValue:Math.abs(ue),isNegative:ae==="-",original:Z}}return{absValue:1/0,isNegative:!1,original:Z}},B=k(c.voltage),_=k(y.voltage);return B.absValue!==_.absValue?B.absValue-_.absValue:B.isNegative!==_.isNegative?B.isNegative?-1:1:0}).map(c=>i.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),Y(c.id),L!=="power"&&D("power"),j(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:c.color,border:"1px solid #ccc"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:c.name}),i.jsx("div",{style:{fontSize:"11px",color:"#666"},children:c.voltage})]})]})},c.id)),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),j(!1),Ec(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),i.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),j(!1),Y(null),D("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),Ge&&i.jsxs("div",{ref:Ms,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),Si.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...Si].sort((c,y)=>c.name.localeCompare(y.name)).map(c=>{const y=c.id==="groundbus-earth",k=Re===c.id;return i.jsx("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),Fe(c.id),L!=="ground"&&D("ground"),ge(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:k?"#e0e0e0":"#f5f5f5",border:k?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:y?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),i.jsx("div",{children:i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:c.name})})]})},c.id)}),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),ge(!1),ce(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),ge(!1),Fe(null),D("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),L==="component"&&wc&&i.jsxs("div",{ref:Cr,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:Wt==="top",onClick:()=>{console.log("Component tool Top clicked"),yo.current="top",vs("top"),Vt("top"),$(mt),F(zt),va(c=>{const y=new Map(c),k=y.get("component");return k&&y.set("component",{...k,settings:{color:mt,size:zt}}),y}),xl(!1),ya(!0),Ks(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:Wt==="bottom",onClick:()=>{console.log("Component tool Bottom clicked"),yo.current="bottom",vs("bottom"),Vt("bottom"),$(de),F(ot),va(c=>{const y=new Map(c),k=y.get("component");return k&&y.set("component",{...k,settings:{color:de,size:ot}}),y}),xl(!1),Hn(!0),Ks(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),L==="component"&&Ic&&i.jsxs("div",{ref:el,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(Ay).map(([c,y])=>{const k=Uc.has(c);return i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),Qs(_=>{const Z=new Set(_);return Z.has(c)?Z.delete(c):Z.add(c),Z})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:k?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[i.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:k?"":""}),c]}),k&&i.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(y).map(([B,_])=>i.jsxs("div",{style:{marginBottom:"2px"},children:[i.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[B,":"]}),_.map(Z=>{const M=_f[Z];return M?i.jsxs("button",{onClick:ae=>{ae.preventDefault(),ae.stopPropagation();const ue=Z;Js(ue),Sc.current=ue,Ks(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:es===Z?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[M.prefix.join(", ")," - ",Wu(Z)]},Z):null})]},B))})]},c)}),i.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),Ks(!1),D("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),i.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[i.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),i.jsxs("div",{onClick:()=>Vt("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:$t==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:Kl,onChange:c=>ya(c.target.checked)})})]}),i.jsx("canvas",{ref:Su,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsxs("div",{onClick:()=>Vt("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:$t==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:Wi,onChange:c=>Hn(c.target.checked)})})]}),i.jsx("canvas",{ref:Kc,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Vi,onChange:c=>Zi(c.target.checked)}),i.jsx("span",{children:"Vias"})]}),i.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:za,onChange:c=>wr(c.target.checked)}),i.jsx("span",{children:"Traces (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Oa,onChange:c=>Dr(c.target.checked)}),i.jsx("span",{children:"Components (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Ki,onChange:c=>Rr(c.target.checked)}),i.jsx("span",{children:"Pads (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Zr,onChange:c=>Kr(c.target.checked)}),i.jsx("span",{children:"Test Points (Top)"})]}),i.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ir,onChange:c=>ar(c.target.checked)}),i.jsx("span",{children:"Traces (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Ro,onChange:c=>or(c.target.checked)}),i.jsx("span",{children:"Components (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Sr,onChange:c=>Xr(c.target.checked)}),i.jsx("span",{children:"Pads (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:wo,onChange:c=>Jr(c.target.checked)}),i.jsx("span",{children:"Test Points (Bottom)"})]}),i.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Qr,onChange:c=>jr(c.target.checked)}),i.jsx("span",{children:"Power"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Et,onChange:c=>kn(c.target.checked)}),i.jsx("span",{children:"Ground"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:qt,onChange:c=>$n(c.target.checked)}),i.jsx("span",{children:"Connections"})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Vi&&Ki&&Sr&&Zr&&wo&&za&&ir&&Oa&&Ro&&Qr&&Et&&qt,onChange:c=>{const y=c.target.checked;Zi(y),Rr(y),Xr(y),Kr(y),Jr(y),wr(y),ar(y),Dr(y),or(y),jr(y),kn(y),$n(y)}}),i.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",f,"%"]}),i.jsxs("label",{className:"radio-label",style:{margin:0},children:[i.jsx("input",{type:"checkbox",checked:S,onChange:c=>{const y=c.target.checked;y?(ya(!0),Hn(!0)):(b(50),D("select")),R(y)}}),i.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:f,onChange:c=>b(Number(c.target.value)),onDoubleClick:()=>Hc("transparency"),className:"slider",style:{width:"100%",marginTop:3}}),S&&i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Cycle Speed: ",(q/1e3).toFixed(1),"s"]}),i.jsx("input",{type:"range",min:"500",max:"8000",step:"100",value:8500-q,onChange:c=>T(8500-Number(c.target.value)),onDoubleClick:()=>T(2e3),className:"slider",style:{width:"100%",marginTop:3}})]})]})]}),i.jsx(Rb,{visible:!a&&!u}),i.jsx("canvas",{ref:da,width:Xs.width,height:Xs.height,tabIndex:0,onMouseDown:Rf,onMouseMove:Hd,onMouseUp:qd,onMouseLeave:qd,onWheel:Fd,onDoubleClick:Df,className:`pcb-canvas ${L==="transform"?"transform-cursor":L==="draw"?"draw-cursor":L==="erase"?"erase-cursor":"default-cursor"}`,style:{position:"absolute",left:"244px",top:"6px",...Ur?{cursor:Ur}:L==="pan"?{cursor:Xa?"grabbing":"grab"}:{},width:`${Xs.width}px`,height:`${Xs.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),i.jsx(qb,{componentEditor:ns,setComponentEditor:is,componentsTop:Ft,componentsBottom:cn,setComponentsTop:wi,setComponentsBottom:Xn,connectingPin:Uo,setConnectingPin:Fo,componentDialogPosition:zr,setComponentDialogPosition:js,isDraggingDialog:lo,setIsDraggingDialog:Ts,dialogDragOffset:Ko,setDialogDragOffset:Os,areComponentsLocked:ji,setSelectedComponentIds:Jt,setNotesDialogVisible:_a}),nr&&dl&&(()=>{const c=nr.component,y=nr.layer;if(!c)return null;const k=c.componentType||"Component",B=c.componentType==="IntegratedCircuit"&&"icType"in c?c.icType:null,_=ec(c);return i.jsxs("div",{style:{position:"fixed",left:`${nr.x+10}px`,top:`${nr.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:Wu(k)}),i.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["Layer: ",y==="top"?"Top":"Bottom"]}),B&&i.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["IC Type: ",B]}),_.length>0&&i.jsx("div",{style:{marginBottom:"4px"},children:_.map((Z,M)=>i.jsx("div",{style:{color:"#e0e0e0",fontSize:"11px",marginBottom:"2px"},children:Z},M))}),c.description&&i.jsx("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:c.description}),c.notes&&i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c.notes})]})})(),Gs&&dl&&(()=>{const c=Gs.stroke;return c.notes?i.jsxs("div",{style:{position:"fixed",left:`${Gs.x+10}px`,top:`${Gs.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"Test Point"}),i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c.notes})]}):null})(),Jo&&Jo.visible&&(()=>{if(!en.find(k=>k.id===Jo.id))return null;const y=hn.find(k=>k.id===Jo.powerBusId);return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),i.jsx("button",{onClick:()=>w(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:y?`${y.name} (${y.voltage})`:"Unknown"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`power-layer-${Jo.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),i.jsxs("select",{id:`power-layer-${Jo.id}`,name:`power-layer-${Jo.id}`,value:Jo.layer,onChange:k=>w({...Jo,layer:k.target.value}),disabled:Bi,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:Bi?.6:1},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:Jo.x.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:Jo.y.toFixed(2)})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[i.jsx("button",{onClick:()=>w(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),i.jsx("button",{onClick:()=>{Bi||(qi(k=>k.map(B=>B.id===Jo.id?{...B,layer:Jo.layer}:B)),w(null))},disabled:Bi,style:{padding:"2px 5px",background:Bi?"#f5f5f5":"#0b5fff",color:Bi?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Bi?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!a&&!u&&i.jsx("div",{className:"placeholder"})]})}),i.jsx(Wb,{visible:Zu,onClose:()=>Ec(!1),powerBuses:hn,setPowerBuses:Ho,editingPowerBusId:Md,setEditingPowerBusId:Bd,powers:en}),i.jsx(Vb,{visible:le,onClose:()=>ce(!1),groundBuses:Si,setGroundBuses:Cs,editingGroundBusId:be,setEditingGroundBusId:Pe,grounds:Ln}),i.jsx(Zb,{visible:Ia,projectDirHandle:Oi,onClose:()=>{Jl(!1),Ql(void 0)},onRestore:Oh,position:Ls,isDragging:Jc,onDragStart:Ff}),i.jsx($b,{visible:Tt,onClose:()=>xt(!1),autoAssignDesignators:it,setAutoAssignDesignators:$e,useGlobalDesignatorCounters:tt,setUseGlobalDesignatorCounters:st}),i.jsx("input",{ref:Tl,type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",style:{display:"none"},onChange:c=>{const y=c.target.files?.[0];y&&Ud(y,"top"),c.target.value=""}}),i.jsx("input",{ref:Dc,type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",style:{display:"none"},onChange:c=>{const y=c.target.files?.[0];y&&Ud(y,"bottom"),c.target.value=""}}),i.jsx("input",{ref:Cl,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async c=>{const y=c.target.files?.[0];if(y)try{Ga(y.name);const k=await y.text(),B=JSON.parse(k);await Nc(B);let _;B.projectInfo?.name?_=B.projectInfo.name:(_=y.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",ls(_)),vo||ls(_),setTimeout(()=>{er({visible:!0,source:"open",interval:5})},100)}catch(k){console.error("Failed to open project",k),alert("Failed to open project file. See console for details.")}c.target.value=""}}),i.jsx(Mb,{visible:gr.visible,selectedIds:Fn,selectedComponentIds:Cn,selectedPowerIds:Rt,selectedGroundIds:ui,drawingStrokes:ht,componentsTop:Ft,componentsBottom:cn,powers:en,grounds:Ln,powerBuses:hn,onClose:()=>{to({visible:!1,text:""})},setComponentsTop:wi,setComponentsBottom:Xn,determineViaType:an,determinePadType:Jn,determineTestPointType:Ja,onFindComponent:pl,onFindStroke:Ed,onFindPower:Cu,onFindGround:Au,onOpenNotesDialog:()=>_a(!0),position:Bt,isDragging:ja,onDragStart:c=>{Bt&&($i({x:c.clientX-Bt.x,y:c.clientY-Bt.y}),Nn(!0),c.preventDefault())}}),i.jsx(Bb,{visible:ao,selectedIds:Fn,selectedComponentIds:Cn,selectedPowerIds:Rt,selectedGroundIds:ui,drawingStrokes:ht,componentsTop:Ft,componentsBottom:cn,powers:en,grounds:Ln,powerBuses:hn,onClose:()=>{_a(!1)},setComponentsTop:wi,setComponentsBottom:Xn,setDrawingStrokes:St,setPowerSymbols:qi,setGroundSymbols:Xi,determineViaType:an,determinePadType:Jn,determineTestPointType:Ja,position:Ii,isDragging:Do,onDragStart:c=>{Ii&&(Ci({x:c.clientX-Ii.x,y:c.clientY-Ii.y}),oo(!0),c.preventDefault())}}),i.jsx(Eb,{visible:ro,projectNotes:ha,setProjectNotes:bi,onClose:()=>{ma(!1)},position:gi,isDragging:Ui,onDragStart:c=>{gi?(Qi({x:c.clientX-gi.x,y:c.clientY-gi.y}),Za(!0),c.preventDefault()):(Ta({x:c.clientX-300,y:c.clientY-200}),Qi({x:300,y:200}),Za(!0),c.preventDefault())}}),i.jsx(u2,{visible:Yl.visible,title:"New Project",message:"You have unsaved changes. Do you want to save your project before creating a new one?",onYes:Bu,onNo:Uf,onCancel:tf,yesButtonRef:Gr}),i.jsx(u2,{visible:qr.visible,title:"Open Project",message:"You have unsaved changes. Do you want to save your project before opening another one?",onYes:af,onNo:Ih,onCancel:Hf,yesButtonRef:hl}),Li.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:c=>{c.target===c.currentTarget&&Mu()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:c=>c.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),i.jsx("input",{ref:ds,type:"text",value:Li.projectName,onChange:c=>{qo(y=>({...y,projectName:c.target.value}))},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),ud()):c.key==="Escape"&&(c.preventDefault(),Mu())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),Li.projectName&&(()=>{const c=Li.projectName.match(/[^a-zA-Z0-9_-]/g);if(c){const y=[...new Set(c)];return i.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",y.map(k=>`"${k}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:Li.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Li.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Of,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Li.projectName&&Li.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),i.jsx("div",{style:{color:"#4CAF50"},children:(()=>{if(!Li.projectName||!Li.locationPath)return"";const y=Li.projectName.trim().replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",k=`${y}.json`;return Li.locationPath===y?`${Li.locationPath}/${k}`:`${Li.locationPath}/${y}/${k}`})()})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Mu,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:ud,disabled:!Li.projectName.trim()||!Li.locationHandle,style:{padding:"8px 16px",background:!Li.projectName.trim()||!Li.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Li.projectName.trim()||!Li.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Li.projectName.trim()||!Li.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Li.projectName.trim()||!Li.locationHandle?.6:1},children:"Create"})]})]})}),Ei.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:c=>{c.target===c.currentTarget&&au()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:c=>c.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),i.jsx("input",{ref:br,type:"text",value:Ei.filename,onChange:c=>{uo(y=>({...y,filename:c.target.value}))},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),dd()):c.key==="Escape"&&(c.preventDefault(),au())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:Ei.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Ei.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:If,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Ei.filename&&Ei.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[Ei.locationPath,"/",Ei.filename.endsWith(".json")?Ei.filename:`${Ei.filename}.json`]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:au,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:dd,disabled:!Ei.filename.trim()||!Ei.locationHandle,style:{padding:"8px 16px",background:!Ei.filename.trim()||!Ei.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Ei.filename.trim()||!Ei.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Ei.filename.trim()||!Ei.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Ei.filename.trim()||!Ei.locationHandle?.6:1},children:"Save"})]})]})}),i.jsx(Db,{visible:ks.visible,title:ks.title,message:ks.message,onClose:()=>Ns({visible:!1,title:"",message:""})}),i.jsx(Ob,{visible:Ka,dimensions:Ai,onSave:c=>{Mo(c)},onClose:()=>pn(!1)}),i.jsx(Ib,{visible:Hs,onClose:()=>zs(!1),topImage:a,bottomImage:u,selectedImageForTransform:$t,setSelectedImageForTransform:To,transformMode:Ao,setTransformMode:rr,updateImageTransform:ed,resetImageTransform:Vd,setCurrentTool:D,isGrayscale:V,setIsGrayscale:X,areImagesLocked:ft}),i.jsx(Ub,{visible:xc,onClose:()=>Wr(!1),topImage:a,bottomImage:u,setTopImage:s,setBottomImage:d,componentsTop:Ft,componentsBottom:cn,setComponentsTop:wi,setComponentsBottom:Xn,drawingStrokes:ht,setDrawingStrokes:St,powerSymbols:en,groundSymbols:Ln,setPowerSymbols:qi,setGroundSymbols:Xi,canvasRef:da,isBottomView:os,setIsBottomView:Ya,originalTopFlipX:rs,setOriginalTopFlipX:qs,originalBottomFlipX:sl,setOriginalBottomFlipX:Vr,originalTopFlipY:_s,setOriginalTopFlipY:$r,originalBottomFlipY:ll,setOriginalBottomFlipY:tr,cameraWorldCenter:li,setCameraWorldCenter:zi,viewScale:jt,contentBorder:5}),i.jsx(Yb,{visible:Fs.visible,size:Fs.size,onSizeChange:c=>as(y=>({...y,size:c})),onApply:Bf,onCancel:()=>as({visible:!1,size:6})}),i.jsx(Gb,{visible:co.visible,interval:co.interval,onIntervalChange:c=>pr({visible:!0,interval:c}),onApply:()=>td(co.interval,!1),onCancel:()=>pr({visible:!1,interval:5})}),i.jsx(Xb,{visible:As.visible,interval:As.interval,onIntervalChange:c=>er({...As,interval:c}),onEnable:()=>td(As.interval,!0),onSkip:Nu}),i.jsx("div",{style:{position:"fixed",bottom:8,right:8,zIndex:100},children:i.jsxs("button",{onClick:()=>{window.open("https://github.com/sponsors/pgiacalo","_blank","noopener,noreferrer")},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)",border:"1px solid rgba(27, 31, 36, 0.15)",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:500,color:"#24292f",boxShadow:"0 1px 0 rgba(27, 31, 36, 0.04)",transition:"background 0.2s"},onMouseEnter:c=>{c.currentTarget.style.background="linear-gradient(180deg, #f3f4f6 0%, #e5e6e9 100%)"},onMouseLeave:c=>{c.currentTarget.style.background="linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)"},title:"Donate to support this project",children:[i.jsx("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"#bf3989","aria-hidden":"true",children:i.jsx("path",{d:"M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.749.749 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5z"})}),"Donate"]})})]})}hy.createRoot(document.getElementById("root")).render(i.jsx(H.StrictMode,{children:i.jsx(uv,{})}));export{ka as _,dv as c,iy as g};
