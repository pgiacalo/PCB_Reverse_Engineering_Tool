(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))f(d);new MutationObserver(d=>{for(const B of d)if(B.type==="childList")for(const q of B.addedNodes)q.tagName==="LINK"&&q.rel==="modulepreload"&&f(q)}).observe(document,{childList:!0,subtree:!0});function b(d){const B={};return d.integrity&&(B.integrity=d.integrity),d.referrerPolicy&&(B.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?B.credentials="include":d.crossOrigin==="anonymous"?B.credentials="omit":B.credentials="same-origin",B}function f(d){if(d.ep)return;d.ep=!0;const B=b(d);fetch(d.href,B)}})();function kg(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Mu={exports:{}},hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh;function Ng(){if(lh)return hc;lh=1;var c=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function b(f,d,B){var q=null;if(B!==void 0&&(q=""+B),d.key!==void 0&&(q=""+d.key),"key"in d){B={};for(var pe in d)pe!=="key"&&(B[pe]=d[pe])}else B=d;return d=B.ref,{$$typeof:c,type:f,key:q,ref:d!==void 0?d:null,props:B}}return hc.Fragment=u,hc.jsx=b,hc.jsxs=b,hc}var ih;function Mg(){return ih||(ih=1,Mu.exports=Ng()),Mu.exports}var i=Mg(),Uu={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function Ug(){if(ah)return kt;ah=1;var c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),q=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),H=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),ce=Symbol.iterator;function de(D){return D===null||typeof D!="object"?null:(D=ce&&D[ce]||D["@@iterator"],typeof D=="function"?D:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,_e={};function He(D,W,ue){this.props=D,this.context=W,this.refs=_e,this.updater=ue||P}He.prototype.isReactComponent={},He.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},He.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function E(){}E.prototype=He.prototype;function A(D,W,ue){this.props=D,this.context=W,this.refs=_e,this.updater=ue||P}var U=A.prototype=new E;U.constructor=A,Z(U,He.prototype),U.isPureReactComponent=!0;var M=Array.isArray;function T(){}var g={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function ve(D,W,ue){var Ee=ue.ref;return{$$typeof:c,type:D,key:W,ref:Ee!==void 0?Ee:null,props:ue}}function nt(D,W){return ve(D.type,W,D.props)}function Ke(D){return typeof D=="object"&&D!==null&&D.$$typeof===c}function Ae(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ue){return W[ue]})}var Ye=/\/+/g;function Pt(D,W){return typeof D=="object"&&D!==null&&D.key!=null?Ae(""+D.key):W.toString(36)}function st(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(T,T):(D.status="pending",D.then(function(W){D.status==="pending"&&(D.status="fulfilled",D.value=W)},function(W){D.status==="pending"&&(D.status="rejected",D.reason=W)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function _(D,W,ue,Ee,Je){var rt=typeof D;(rt==="undefined"||rt==="boolean")&&(D=null);var pt=!1;if(D===null)pt=!0;else switch(rt){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(D.$$typeof){case c:case u:pt=!0;break;case me:return pt=D._init,_(pt(D._payload),W,ue,Ee,Je)}}if(pt)return Je=Je(D),pt=Ee===""?"."+Pt(D,0):Ee,M(Je)?(ue="",pt!=null&&(ue=pt.replace(Ye,"$&/")+"/"),_(Je,W,ue,"",function(Ol){return Ol})):Je!=null&&(Ke(Je)&&(Je=nt(Je,ue+(Je.key==null||D&&D.key===Je.key?"":(""+Je.key).replace(Ye,"$&/")+"/")+pt)),W.push(Je)),1;pt=0;var gn=Ee===""?".":Ee+":";if(M(D))for(var Ht=0;Ht<D.length;Ht++)Ee=D[Ht],rt=gn+Pt(Ee,Ht),pt+=_(Ee,W,ue,rt,Je);else if(Ht=de(D),typeof Ht=="function")for(D=Ht.call(D),Ht=0;!(Ee=D.next()).done;)Ee=Ee.value,rt=gn+Pt(Ee,Ht++),pt+=_(Ee,W,ue,rt,Je);else if(rt==="object"){if(typeof D.then=="function")return _(st(D),W,ue,Ee,Je);throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return pt}function ne(D,W,ue){if(D==null)return D;var Ee=[],Je=0;return _(D,Ee,"","",function(rt){return W.call(ue,rt,Je++)}),Ee}function Me(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(ue){(D._status===0||D._status===-1)&&(D._status=1,D._result=ue)},function(ue){(D._status===0||D._status===-1)&&(D._status=2,D._result=ue)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var ie=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},m={map:ne,forEach:function(D,W,ue){ne(D,function(){W.apply(this,arguments)},ue)},count:function(D){var W=0;return ne(D,function(){W++}),W},toArray:function(D){return ne(D,function(W){return W})||[]},only:function(D){if(!Ke(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return kt.Activity=I,kt.Children=m,kt.Component=He,kt.Fragment=b,kt.Profiler=d,kt.PureComponent=A,kt.StrictMode=f,kt.Suspense=G,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=g,kt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return g.H.useMemoCache(D)}},kt.cache=function(D){return function(){return D.apply(null,arguments)}},kt.cacheSignal=function(){return null},kt.cloneElement=function(D,W,ue){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Ee=Z({},D.props),Je=D.key;if(W!=null)for(rt in W.key!==void 0&&(Je=""+W.key),W)!Y.call(W,rt)||rt==="key"||rt==="__self"||rt==="__source"||rt==="ref"&&W.ref===void 0||(Ee[rt]=W[rt]);var rt=arguments.length-2;if(rt===1)Ee.children=ue;else if(1<rt){for(var pt=Array(rt),gn=0;gn<rt;gn++)pt[gn]=arguments[gn+2];Ee.children=pt}return ve(D.type,Je,Ee)},kt.createContext=function(D){return D={$$typeof:q,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:B,_context:D},D},kt.createElement=function(D,W,ue){var Ee,Je={},rt=null;if(W!=null)for(Ee in W.key!==void 0&&(rt=""+W.key),W)Y.call(W,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Je[Ee]=W[Ee]);var pt=arguments.length-2;if(pt===1)Je.children=ue;else if(1<pt){for(var gn=Array(pt),Ht=0;Ht<pt;Ht++)gn[Ht]=arguments[Ht+2];Je.children=gn}if(D&&D.defaultProps)for(Ee in pt=D.defaultProps,pt)Je[Ee]===void 0&&(Je[Ee]=pt[Ee]);return ve(D,rt,Je)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(D){return{$$typeof:pe,render:D}},kt.isValidElement=Ke,kt.lazy=function(D){return{$$typeof:me,_payload:{_status:-1,_result:D},_init:Me}},kt.memo=function(D,W){return{$$typeof:H,type:D,compare:W===void 0?null:W}},kt.startTransition=function(D){var W=g.T,ue={};g.T=ue;try{var Ee=D(),Je=g.S;Je!==null&&Je(ue,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(T,ie)}catch(rt){ie(rt)}finally{W!==null&&ue.types!==null&&(W.types=ue.types),g.T=W}},kt.unstable_useCacheRefresh=function(){return g.H.useCacheRefresh()},kt.use=function(D){return g.H.use(D)},kt.useActionState=function(D,W,ue){return g.H.useActionState(D,W,ue)},kt.useCallback=function(D,W){return g.H.useCallback(D,W)},kt.useContext=function(D){return g.H.useContext(D)},kt.useDebugValue=function(){},kt.useDeferredValue=function(D,W){return g.H.useDeferredValue(D,W)},kt.useEffect=function(D,W){return g.H.useEffect(D,W)},kt.useEffectEvent=function(D){return g.H.useEffectEvent(D)},kt.useId=function(){return g.H.useId()},kt.useImperativeHandle=function(D,W,ue){return g.H.useImperativeHandle(D,W,ue)},kt.useInsertionEffect=function(D,W){return g.H.useInsertionEffect(D,W)},kt.useLayoutEffect=function(D,W){return g.H.useLayoutEffect(D,W)},kt.useMemo=function(D,W){return g.H.useMemo(D,W)},kt.useOptimistic=function(D,W){return g.H.useOptimistic(D,W)},kt.useReducer=function(D,W,ue){return g.H.useReducer(D,W,ue)},kt.useRef=function(D){return g.H.useRef(D)},kt.useState=function(D){return g.H.useState(D)},kt.useSyncExternalStore=function(D,W,ue){return g.H.useSyncExternalStore(D,W,ue)},kt.useTransition=function(){return g.H.useTransition()},kt.version="19.2.0",kt}var oh;function Yu(){return oh||(oh=1,Uu.exports=Ug()),Uu.exports}var C=Yu();const ot=kg(C);var Bu={exports:{}},gc={},_u={exports:{}},Ou={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh;function Bg(){return sh||(sh=1,(function(c){function u(_,ne){var Me=_.length;_.push(ne);e:for(;0<Me;){var ie=Me-1>>>1,m=_[ie];if(0<d(m,ne))_[ie]=ne,_[Me]=m,Me=ie;else break e}}function b(_){return _.length===0?null:_[0]}function f(_){if(_.length===0)return null;var ne=_[0],Me=_.pop();if(Me!==ne){_[0]=Me;e:for(var ie=0,m=_.length,D=m>>>1;ie<D;){var W=2*(ie+1)-1,ue=_[W],Ee=W+1,Je=_[Ee];if(0>d(ue,Me))Ee<m&&0>d(Je,ue)?(_[ie]=Je,_[Ee]=Me,ie=Ee):(_[ie]=ue,_[W]=Me,ie=W);else if(Ee<m&&0>d(Je,Me))_[ie]=Je,_[Ee]=Me,ie=Ee;else break e}}return ne}function d(_,ne){var Me=_.sortIndex-ne.sortIndex;return Me!==0?Me:_.id-ne.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var B=performance;c.unstable_now=function(){return B.now()}}else{var q=Date,pe=q.now();c.unstable_now=function(){return q.now()-pe}}var G=[],H=[],me=1,I=null,ce=3,de=!1,P=!1,Z=!1,_e=!1,He=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function U(_){for(var ne=b(H);ne!==null;){if(ne.callback===null)f(H);else if(ne.startTime<=_)f(H),ne.sortIndex=ne.expirationTime,u(G,ne);else break;ne=b(H)}}function M(_){if(Z=!1,U(_),!P)if(b(G)!==null)P=!0,T||(T=!0,Ae());else{var ne=b(H);ne!==null&&st(M,ne.startTime-_)}}var T=!1,g=-1,Y=5,ve=-1;function nt(){return _e?!0:!(c.unstable_now()-ve<Y)}function Ke(){if(_e=!1,T){var _=c.unstable_now();ve=_;var ne=!0;try{e:{P=!1,Z&&(Z=!1,E(g),g=-1),de=!0;var Me=ce;try{t:{for(U(_),I=b(G);I!==null&&!(I.expirationTime>_&&nt());){var ie=I.callback;if(typeof ie=="function"){I.callback=null,ce=I.priorityLevel;var m=ie(I.expirationTime<=_);if(_=c.unstable_now(),typeof m=="function"){I.callback=m,U(_),ne=!0;break t}I===b(G)&&f(G),U(_)}else f(G);I=b(G)}if(I!==null)ne=!0;else{var D=b(H);D!==null&&st(M,D.startTime-_),ne=!1}}break e}finally{I=null,ce=Me,de=!1}ne=void 0}}finally{ne?Ae():T=!1}}}var Ae;if(typeof A=="function")Ae=function(){A(Ke)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Pt=Ye.port2;Ye.port1.onmessage=Ke,Ae=function(){Pt.postMessage(null)}}else Ae=function(){He(Ke,0)};function st(_,ne){g=He(function(){_(c.unstable_now())},ne)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(_){_.callback=null},c.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<_?Math.floor(1e3/_):5},c.unstable_getCurrentPriorityLevel=function(){return ce},c.unstable_next=function(_){switch(ce){case 1:case 2:case 3:var ne=3;break;default:ne=ce}var Me=ce;ce=ne;try{return _()}finally{ce=Me}},c.unstable_requestPaint=function(){_e=!0},c.unstable_runWithPriority=function(_,ne){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var Me=ce;ce=_;try{return ne()}finally{ce=Me}},c.unstable_scheduleCallback=function(_,ne,Me){var ie=c.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?ie+Me:ie):Me=ie,_){case 1:var m=-1;break;case 2:m=250;break;case 5:m=1073741823;break;case 4:m=1e4;break;default:m=5e3}return m=Me+m,_={id:me++,callback:ne,priorityLevel:_,startTime:Me,expirationTime:m,sortIndex:-1},Me>ie?(_.sortIndex=Me,u(H,_),b(G)===null&&_===b(H)&&(Z?(E(g),g=-1):Z=!0,st(M,Me-ie))):(_.sortIndex=m,u(G,_),P||de||(P=!0,T||(T=!0,Ae()))),_},c.unstable_shouldYield=nt,c.unstable_wrapCallback=function(_){var ne=ce;return function(){var Me=ce;ce=ne;try{return _.apply(this,arguments)}finally{ce=Me}}}})(Ou)),Ou}var rh;function _g(){return rh||(rh=1,_u.exports=Bg()),_u.exports}var Hu={exports:{}},Tl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch;function Og(){if(ch)return Tl;ch=1;var c=Yu();function u(G){var H="https://react.dev/errors/"+G;if(1<arguments.length){H+="?args[]="+encodeURIComponent(arguments[1]);for(var me=2;me<arguments.length;me++)H+="&args[]="+encodeURIComponent(arguments[me])}return"Minified React error #"+G+"; visit "+H+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function b(){}var f={d:{f:b,r:function(){throw Error(u(522))},D:b,C:b,L:b,m:b,X:b,S:b,M:b},p:0,findDOMNode:null},d=Symbol.for("react.portal");function B(G,H,me){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:I==null?null:""+I,children:G,containerInfo:H,implementation:me}}var q=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function pe(G,H){if(G==="font")return"";if(typeof H=="string")return H==="use-credentials"?H:""}return Tl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,Tl.createPortal=function(G,H){var me=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H||H.nodeType!==1&&H.nodeType!==9&&H.nodeType!==11)throw Error(u(299));return B(G,H,null,me)},Tl.flushSync=function(G){var H=q.T,me=f.p;try{if(q.T=null,f.p=2,G)return G()}finally{q.T=H,f.p=me,f.d.f()}},Tl.preconnect=function(G,H){typeof G=="string"&&(H?(H=H.crossOrigin,H=typeof H=="string"?H==="use-credentials"?H:"":void 0):H=null,f.d.C(G,H))},Tl.prefetchDNS=function(G){typeof G=="string"&&f.d.D(G)},Tl.preinit=function(G,H){if(typeof G=="string"&&H&&typeof H.as=="string"){var me=H.as,I=pe(me,H.crossOrigin),ce=typeof H.integrity=="string"?H.integrity:void 0,de=typeof H.fetchPriority=="string"?H.fetchPriority:void 0;me==="style"?f.d.S(G,typeof H.precedence=="string"?H.precedence:void 0,{crossOrigin:I,integrity:ce,fetchPriority:de}):me==="script"&&f.d.X(G,{crossOrigin:I,integrity:ce,fetchPriority:de,nonce:typeof H.nonce=="string"?H.nonce:void 0})}},Tl.preinitModule=function(G,H){if(typeof G=="string")if(typeof H=="object"&&H!==null){if(H.as==null||H.as==="script"){var me=pe(H.as,H.crossOrigin);f.d.M(G,{crossOrigin:me,integrity:typeof H.integrity=="string"?H.integrity:void 0,nonce:typeof H.nonce=="string"?H.nonce:void 0})}}else H==null&&f.d.M(G)},Tl.preload=function(G,H){if(typeof G=="string"&&typeof H=="object"&&H!==null&&typeof H.as=="string"){var me=H.as,I=pe(me,H.crossOrigin);f.d.L(G,me,{crossOrigin:I,integrity:typeof H.integrity=="string"?H.integrity:void 0,nonce:typeof H.nonce=="string"?H.nonce:void 0,type:typeof H.type=="string"?H.type:void 0,fetchPriority:typeof H.fetchPriority=="string"?H.fetchPriority:void 0,referrerPolicy:typeof H.referrerPolicy=="string"?H.referrerPolicy:void 0,imageSrcSet:typeof H.imageSrcSet=="string"?H.imageSrcSet:void 0,imageSizes:typeof H.imageSizes=="string"?H.imageSizes:void 0,media:typeof H.media=="string"?H.media:void 0})}},Tl.preloadModule=function(G,H){if(typeof G=="string")if(H){var me=pe(H.as,H.crossOrigin);f.d.m(G,{as:typeof H.as=="string"&&H.as!=="script"?H.as:void 0,crossOrigin:me,integrity:typeof H.integrity=="string"?H.integrity:void 0})}else f.d.m(G)},Tl.requestFormReset=function(G){f.d.r(G)},Tl.unstable_batchedUpdates=function(G,H){return G(H)},Tl.useFormState=function(G,H,me){return q.H.useFormState(G,H,me)},Tl.useFormStatus=function(){return q.H.useHostTransitionStatus()},Tl.version="19.2.0",Tl}var dh;function Hg(){if(dh)return Hu.exports;dh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(u){console.error(u)}}return c(),Hu.exports=Og(),Hu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh;function Eg(){if(uh)return gc;uh=1;var c=_g(),u=Yu(),b=Hg();function f(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function B(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function q(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pe(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function G(e){if(B(e)!==e)throw Error(f(188))}function H(e){var t=e.alternate;if(!t){if(t=B(e),t===null)throw Error(f(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return G(o),e;if(s===l)return G(o),t;s=s.sibling}throw Error(f(188))}if(n.return!==l.return)n=o,l=s;else{for(var h=!1,w=o.child;w;){if(w===n){h=!0,n=o,l=s;break}if(w===l){h=!0,l=o,n=s;break}w=w.sibling}if(!h){for(w=s.child;w;){if(w===n){h=!0,n=s,l=o;break}if(w===l){h=!0,l=s,n=o;break}w=w.sibling}if(!h)throw Error(f(189))}}if(n.alternate!==l)throw Error(f(190))}if(n.tag!==3)throw Error(f(188));return n.stateNode.current===n?e:t}function me(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=me(e),t!==null)return t;e=e.sibling}return null}var I=Object.assign,ce=Symbol.for("react.element"),de=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),He=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),A=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),ve=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),Ke=Symbol.iterator;function Ae(e){return e===null||typeof e!="object"?null:(e=Ke&&e[Ke]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Symbol.for("react.client.reference");function Pt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case He:return"Profiler";case _e:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList";case ve:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case P:return"Portal";case A:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g:return t=e.displayName||null,t!==null?t:Pt(e.type)||"Memo";case Y:t=e._payload,e=e._init;try{return Pt(e(t))}catch{}}return null}var st=Array.isArray,_=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=b.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},ie=[],m=-1;function D(e){return{current:e}}function W(e){0>m||(e.current=ie[m],ie[m]=null,m--)}function ue(e,t){m++,ie[m]=e.current,e.current=t}var Ee=D(null),Je=D(null),rt=D(null),pt=D(null);function gn(e,t){switch(ue(rt,t),ue(Je,e),ue(Ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?zp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=zp(t),e=Rp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(Ee),ue(Ee,e)}function Ht(){W(Ee),W(Je),W(rt)}function Ol(e){e.memoizedState!==null&&ue(pt,e);var t=Ee.current,n=Rp(t,e.type);t!==n&&(ue(Je,e),ue(Ee,n))}function te(e){Je.current===e&&(W(Ee),W(Je)),pt.current===e&&(W(pt),dc._currentValue=Me)}var he,Te;function oe(e){if(he===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);he=t&&t[1]||"",Te=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+e+Te}var Ze=!1;function ge(e,t){if(!e||Ze)return"";Ze=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(se){var le=se}Reflect.construct(e,[],je)}else{try{je.call()}catch(se){le=se}e.call(je.prototype)}}else{try{throw Error()}catch(se){le=se}(je=e())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(se){if(se&&le&&typeof se.stack=="string")return[se.stack,le.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),h=s[0],w=s[1];if(h&&w){var N=h.split(`
`),ee=w.split(`
`);for(o=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;o<ee.length&&!ee[o].includes("DetermineComponentFrameRoot");)o++;if(l===N.length||o===ee.length)for(l=N.length-1,o=ee.length-1;1<=l&&0<=o&&N[l]!==ee[o];)o--;for(;1<=l&&0<=o;l--,o--)if(N[l]!==ee[o]){if(l!==1||o!==1)do if(l--,o--,0>o||N[l]!==ee[o]){var xe=`
`+N[l].replace(" at new "," at ");return e.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",e.displayName)),xe}while(1<=l&&0<=o);break}}}finally{Ze=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?oe(n):""}function Ue(e,t){switch(e.tag){case 26:case 27:case 5:return oe(e.type);case 16:return oe("Lazy");case 13:return e.child!==t&&t!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return ge(e.type,!1);case 11:return ge(e.type.render,!1);case 1:return ge(e.type,!0);case 31:return oe("Activity");default:return""}}function ke(e){try{var t="",n=null;do t+=Ue(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Be=Object.prototype.hasOwnProperty,Oe=c.unstable_scheduleCallback,ft=c.unstable_cancelCallback,Mt=c.unstable_shouldYield,bt=c.unstable_requestPaint,Se=c.unstable_now,qe=c.unstable_getCurrentPriorityLevel,$e=c.unstable_ImmediatePriority,Et=c.unstable_UserBlockingPriority,jt=c.unstable_NormalPriority,Fn=c.unstable_LowPriority,pl=c.unstable_IdlePriority,Wi=c.log,Yt=c.unstable_setDisableYieldValue,hi=null,$n=null;function hl(e){if(typeof Wi=="function"&&Yt(e),$n&&typeof $n.setStrictMode=="function")try{$n.setStrictMode(hi,e)}catch{}}var In=Math.clz32?Math.clz32:qn,gi=Math.log,fn=Math.LN2;function qn(e){return e>>>=0,e===0?32:31-(gi(e)/fn|0)|0}var Xi=256,Pe=262144,We=4194304;function Fe(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zn(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,s=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~s,l!==0?o=Fe(l):(h&=w,h!==0?o=Fe(h):n||(n=w&~e,n!==0&&(o=Fe(n))))):(w=l&~s,w!==0?o=Fe(w):h!==0?o=Fe(h):n||(n=l&~e,n!==0&&(o=Fe(n)))),o===0?0:t!==0&&t!==o&&(t&s)===0&&(s=o&-o,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:o}function ga(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function cr(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ds(){var e=We;return We<<=1,(We&62914560)===0&&(We=4194304),e}function As(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function it(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gl(e,t,n,l,o,s){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var w=e.entanglements,N=e.expirationTimes,ee=e.hiddenUpdates;for(n=h&~n;0<n;){var xe=31-In(n),je=1<<xe;w[xe]=0,N[xe]=-1;var le=ee[xe];if(le!==null)for(ee[xe]=null,xe=0;xe<le.length;xe++){var se=le[xe];se!==null&&(se.lane&=-536870913)}n&=~je}l!==0&&il(e,l,0),s!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=s&~(h&~t))}function il(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-In(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function dr(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-In(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function Cl(e,t){var n=t&-t;return n=(n&42)!==0?1:ks(n),(n&(e.suspendedLanes|t))!==0?0:n}function ks(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ur(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pn(){var e=ne.p;return e!==0?e:(e=window.event,e===void 0?32:Zp(e.type))}function al(e,t){var n=ne.p;try{return ne.p=e,t()}finally{ne.p=n}}var Hl=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Hl,vn="__reactProps$"+Hl,ol="__reactContainer$"+Hl,Ns="__reactEvents$"+Hl,fr="__reactListeners$"+Hl,xc="__reactHandles$"+Hl,pr="__reactResources$"+Hl,xi="__reactMarker$"+Hl;function Gi(e){delete e[Pn],delete e[vn],delete e[Ns],delete e[fr],delete e[xc]}function xa(e){var t=e[Pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ol]||n[Pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bp(e);e!==null;){if(n=e[Pn])return n;e=Bp(e)}return t}e=n,n=e.parentNode}return null}function lo(e){if(e=e[Pn]||e[ol]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ms(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(f(33))}function io(e){var t=e[pr];return t||(t=e[pr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function _n(e){e[xi]=!0}var yc=new Set,hr={};function ya(e,t){Rn(e,t),Rn(e+"Capture",t)}function Rn(e,t){for(hr[e]=t,e=0;e<t.length;e++)yc.add(t[e])}var md=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},qt={};function Us(e){return Be.call(qt,e)?!0:Be.call(Nt,e)?!1:md.test(e)?qt[e]=!0:(Nt[e]=!0,!1)}function Yo(e,t,n){if(Us(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function vt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ut(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vt(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){n=""+h,s.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xt(e){if(!e._valueTracker){var t=Wt(e)?"checked":"value";e._valueTracker=Vt(e,t,""+e[t])}}function bc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Wt(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Dt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Nn=/[\n"\\]/g;function xt(e){return e.replace(Nn,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function wn(e,t,n,l,o,s,h,w){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+mt(t)):e.value!==""+mt(t)&&(e.value=""+mt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?gr(e,h,mt(t)):n!=null?gr(e,h,mt(n)):l!=null&&e.removeAttribute("value"),o==null&&s!=null&&(e.defaultChecked=!!s),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+mt(w):e.removeAttribute("name")}function ba(e,t,n,l,o,s,h,w){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Xt(e);return}n=n!=null?""+mt(n):"",t=t!=null?""+mt(t):n,w||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),Xt(e)}function gr(e,t,n){t==="number"&&Dt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function On(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+mt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Wo(e,t,n){if(t!=null&&(t=""+mt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+mt(n):""}function Bs(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(f(92));if(st(l)){if(1<l.length)throw Error(f(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=mt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),Xt(e)}function yi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yr(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||xr.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function ao(e,t,n){if(t!=null&&typeof t!="object")throw Error(f(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&yr(e,o,l)}else for(var s in t)t.hasOwnProperty(s)&&yr(e,s,t[s])}function _s(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bt(e){return wd.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Hn(){}var zl=null;function Ni(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var oo=null,Zn=null;function vc(e){var t=lo(e);if(t&&(e=t.stateNode)){var n=e[vn]||null;e:switch(e=t.stateNode,t.type){case"input":if(wn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[vn]||null;if(!o)throw Error(f(90));wn(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&bc(l)}break e;case"textarea":Wo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&On(e,!!n.multiple,t,!1)}}}var Rl=!1;function xl(e,t,n){if(Rl)return e(t,n);Rl=!0;try{var l=e(t);return l}finally{if(Rl=!1,(oo!==null||Zn!==null)&&(Wc(),oo&&(t=oo,e=Zn,Zn=oo=null,vc(t),e)))for(t=0;t<e.length;t++)vc(e[t])}}function Mi(e,t){var n=e.stateNode;if(n===null)return null;var l=n[vn]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(f(231,t,typeof n));return n}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),el=!1;if(Ui)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){el=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{el=!1}var mn=null,Xo=null,yl=null;function br(){if(yl)return yl;var e,t=Xo,n=t.length,l,o="value"in mn?mn.value:mn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var h=n-e;for(l=1;l<=h&&t[n-l]===o[s-l];l++);return yl=o.slice(e,1<l?1-l:void 0)}function En(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function so(){return!0}function sl(){return!1}function tl(e){function t(n,l,o,s,h){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=s,this.target=h,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(n=e[w],this[w]=n?n(s):s[w]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?so:sl,this.isPropagationStopped=sl,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=so)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=so)},persist:function(){},isPersistent:so}),t}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=tl(Dn),rn=I({},Dn,{view:0,detail:0}),vr=tl(rn),mr,Sr,ma,bi=I({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ma&&(ma&&e.type==="mousemove"?(mr=e.screenX-ma.screenX,Sr=e.screenY-ma.screenY):Sr=mr=0,ma=e),mr)},movementY:function(e){return"movementY"in e?e.movementY:Sr}}),Bi=tl(bi),Os=I({},bi,{dataTransfer:0}),Fi=tl(Os),ro=I({},rn,{relatedTarget:0}),El=tl(ro),co=I({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Go=tl(co),wr=I({},Dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hs=tl(wr),jr=I({},Dn,{data:0}),uo=tl(jr),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fo(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yn[e])?!!t[e]:!1}function qo(){return Fo}var Es=I({},rn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=En(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(e){return e.type==="keypress"?En(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?En(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jd=tl(Es),Vl=I({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ei=tl(Vl),Sa=I({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),qi=tl(Sa),Zi=I({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vs=tl(Zi),Qi=I({},bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wa=tl(Qi),$s=I({},Dn,{newState:0,oldState:0}),Dl=tl($s),Zo=[9,13,27,32],vi=Ui&&"CompositionEvent"in window,An=null;Ui&&"documentMode"in document&&(An=document.documentMode);var ti=Ui&&"TextEvent"in window&&!An,mc=Ui&&(!vi||An&&8<An&&11>=An),fo=" ",Tr=!1;function Cr(e,t){switch(e){case"keyup":return Zo.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cn(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rl=!1;function zr(e,t){switch(e){case"compositionend":return cn(t);case"keypress":return t.which!==32?null:(Tr=!0,fo);case"textInput":return e=t.data,e===fo&&Tr?null:e;default:return null}}function Rr(e,t){if(rl)return e==="compositionend"||!vi&&Cr(e,t)?(e=br(),yl=Xo=mn=null,rl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mc&&t.locale!=="ko"?null:t.data;default:return null}}var Dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Dr[e.type]:t==="textarea"}function kr(e,t,n,l){oo?Zn?Zn.push(l):Zn=[l]:oo=l,t=Qc(t,"onChange"),0<t.length&&(n=new va("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var po=null,ho=null;function Nr(e){mp(e,0)}function ja(e){var t=Ms(e);if(bc(t))return e}function Ta(e,t){if(e==="change")return t}var go=!1;if(Ui){var Is;if(Ui){var Ki="oninput"in document;if(!Ki){var Qo=document.createElement("div");Qo.setAttribute("oninput","return;"),Ki=typeof Qo.oninput=="function"}Is=Ki}else Is=!1;go=Is&&(!document.documentMode||9<document.documentMode)}function Ko(){po&&(po.detachEvent("onpropertychange",Ca),ho=po=null)}function Ca(e){if(e.propertyName==="value"&&ja(ho)){var t=[];kr(t,ho,e,Ni(e)),xl(Nr,t)}}function Mr(e,t,n){e==="focusin"?(Ko(),po=t,ho=n,po.attachEvent("onpropertychange",Ca)):e==="focusout"&&Ko()}function Jo(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ja(ho)}function es(e,t){if(e==="click")return ja(t)}function ts(e,t){if(e==="input"||e==="change")return ja(t)}function Ps(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mn=typeof Object.is=="function"?Object.is:Ps;function ns(e,t){if(Mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!Be.call(t,o)||!Mn(e[o],t[o]))return!1}return!0}function ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ur(e,t){var n=ls(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ls(n)}}function Sc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function is(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Dt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Dt(e.document)}return t}function as(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wc=Ui&&"documentMode"in document&&11>=document.documentMode,za=null,Ys=null,Ji=null,Ra=!1;function os(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ra||za==null||za!==Dt(l)||(l=za,"selectionStart"in l&&as(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ji&&ns(Ji,l)||(Ji=l,l=Qc(Ys,"onSelect"),0<l.length&&(t=new va("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=za)))}function ni(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vn={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},ss={},Al={};Ui&&(Al=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function _i(e){if(ss[e])return ss[e];if(!Vn[e])return e;var t=Vn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Al)return ss[e]=t[n];return e}var kl=_i("animationend"),Ws=_i("animationiteration"),li=_i("animationstart"),Br=_i("transitionrun"),mi=_i("transitionstart"),_r=_i("transitioncancel"),ii=_i("transitionend"),rs=new Map,$l="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$l.push("scrollEnd");function bl(e,t){rs.set(e,t),ya(t,[e])}var ai=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},vl=[],St=0,At=0;function Xs(){for(var e=St,t=At=St=0;t<e;){var n=vl[t];vl[t++]=null;var l=vl[t];vl[t++]=null;var o=vl[t];vl[t++]=null;var s=vl[t];if(vl[t++]=null,l!==null&&o!==null){var h=l.pending;h===null?o.next=o:(o.next=h.next,h.next=o),l.pending=o}s!==0&&ds(n,o,s)}}function Da(e,t,n,l){vl[St++]=e,vl[St++]=t,vl[St++]=n,vl[St++]=l,At|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function cs(e,t,n,l){return Da(e,t,n,l),Aa(e)}function Il(e,t){return Da(e,null,null,t),Aa(e)}function ds(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,s=e.return;s!==null;)s.childLanes|=n,l=s.alternate,l!==null&&(l.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(o=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,o&&t!==null&&(o=31-In(n),e=s.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),s):null}function Aa(e){if(50<lc)throw lc=0,nu=null,Error(f(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var xo={};function Gs(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cl(e,t,n,l){return new Gs(e,t,n,l)}function ea(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ml(e,t){var n=e.alternate;return n===null?(n=cl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function us(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Pl(e,t,n,l,o,s){var h=0;if(l=e,typeof e=="function")ea(e)&&(h=1);else if(typeof e=="string")h=bg(e,n,Ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ve:return e=cl(31,n,t,o),e.elementType=ve,e.lanes=s,e;case Z:return Oi(n.children,o,s,t);case _e:h=8,o|=24;break;case He:return e=cl(12,n,t,o|2),e.elementType=He,e.lanes=s,e;case M:return e=cl(13,n,t,o),e.elementType=M,e.lanes=s,e;case T:return e=cl(19,n,t,o),e.elementType=T,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:h=10;break e;case E:h=9;break e;case U:h=11;break e;case g:h=14;break e;case Y:h=16,l=null;break e}h=29,n=Error(f(130,e===null?"null":typeof e,"")),l=null}return t=cl(h,n,t,o),t.elementType=e,t.type=l,t.lanes=s,t}function Oi(e,t,n,l){return e=cl(7,e,l,t),e.lanes=n,e}function ta(e,t,n){return e=cl(6,e,null,t),e.lanes=n,e}function Ls(e){var t=cl(18,null,null,0);return t.stateNode=e,t}function na(e,t,n){return t=cl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var fs=new WeakMap;function Sl(e,t){if(typeof e=="object"&&e!==null){var n=fs.get(e);return n!==void 0?n:(t={value:e,source:t,stack:ke(t)},fs.set(e,t),t)}return{value:e,source:t,stack:ke(t)}}var ka=[],Hi=0,ps=null,Na=0,Nl=[],Qn=0,oi=null,Yl=1,si="";function Wl(e,t){ka[Hi++]=Na,ka[Hi++]=ps,ps=e,Na=t}function Or(e,t,n){Nl[Qn++]=Yl,Nl[Qn++]=si,Nl[Qn++]=oi,oi=e;var l=Yl;e=si;var o=32-In(l)-1;l&=~(1<<o),n+=1;var s=32-In(t)+o;if(30<s){var h=o-o%5;s=(l&(1<<h)-1).toString(32),l>>=h,o-=h,Yl=1<<32-In(t)+o|n<<o|l,si=s+e}else Yl=1<<s|n<<o|l,si=e}function Hr(e){e.return!==null&&(Wl(e,1),Or(e,1,0))}function Er(e){for(;e===ps;)ps=ka[--Hi],ka[Hi]=null,Na=ka[--Hi],ka[Hi]=null;for(;e===oi;)oi=Nl[--Qn],Nl[Qn]=null,si=Nl[--Qn],Nl[Qn]=null,Yl=Nl[--Qn],Nl[Qn]=null}function jc(e,t){Nl[Qn++]=Yl,Nl[Qn++]=si,Nl[Qn++]=oi,Yl=t.id,si=t.overflow,oi=e}var Yn=null,Gt=null,Tt=!1,la=null,Xl=!1,Vr=Error(f(519));function ia(e){var t=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Si(Sl(t,e)),Vr}function Tc(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[Pn]=e,t[vn]=l,n){case"dialog":It("cancel",t),It("close",t);break;case"iframe":case"object":case"embed":It("load",t);break;case"video":case"audio":for(n=0;n<ac.length;n++)It(ac[n],t);break;case"source":It("error",t);break;case"img":case"image":case"link":It("error",t),It("load",t);break;case"details":It("toggle",t);break;case"input":It("invalid",t),ba(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":It("invalid",t);break;case"textarea":It("invalid",t),Bs(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Tp(t.textContent,n)?(l.popover!=null&&(It("beforetoggle",t),It("toggle",t)),l.onScroll!=null&&It("scroll",t),l.onScrollEnd!=null&&It("scrollend",t),l.onClick!=null&&(t.onclick=Hn),t=!0):t=!1,t||ia(e,!0)}function Cc(e){for(Yn=e.return;Yn;)switch(Yn.tag){case 5:case 31:case 13:Xl=!1;return;case 27:case 3:Xl=!0;return;default:Yn=Yn.return}}function yo(e){if(e!==Yn)return!1;if(!Tt)return Cc(e),Tt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||yu(e.type,e.memoizedProps)),n=!n),n&&Gt&&ia(e),Cc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Gt=Up(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Gt=Up(e)}else t===27?(t=Gt,Ho(e.type)?(e=wu,wu=null,Gt=e):Gt=t):Gt=Yn?Ai(e.stateNode.nextSibling):null;return!0}function Ma(){Gt=Yn=null,Tt=!1}function Ua(){var e=la;return e!==null&&(Kl===null?Kl=e:Kl.push.apply(Kl,e),la=null),e}function Si(e){la===null?la=[e]:la.push(e)}var Ba=D(null),wi=null,Ml=null;function ri(e,t,n){ue(Ba,t._currentValue),t._currentValue=n}function Gl(e){e._currentValue=Ba.current,W(Ba)}function bo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function vo(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){var h=o.child;s=s.firstContext;e:for(;s!==null;){var w=s;s=o;for(var N=0;N<t.length;N++)if(w.context===t[N]){s.lanes|=n,w=s.alternate,w!==null&&(w.lanes|=n),bo(s.return,n,e),l||(h=null);break e}s=w.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(f(341));h.lanes|=n,s=h.alternate,s!==null&&(s.lanes|=n),bo(h,n,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function Ul(e,t,n,l){e=null;for(var o=t,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(f(387));if(h=h.memoizedProps,h!==null){var w=o.type;Mn(o.pendingProps.value,h.value)||(e!==null?e.push(w):e=[w])}}else if(o===pt.current){if(h=o.alternate,h===null)throw Error(f(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(dc):e=[dc])}o=o.return}e!==null&&vo(t,e,n,l),t.flags|=262144}function aa(e){for(e=e.firstContext;e!==null;){if(!Mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ll(e){wi=e,Ml=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function an(e){return zc(wi,e)}function mo(e,t){return wi===null&&Ll(e),zc(e,t)}function zc(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ml===null){if(e===null)throw Error(f(308));Ml=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ml=Ml.next=t;return n}var Td=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Rc=c.unstable_scheduleCallback,_a=c.unstable_NormalPriority,jn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hs(){return{controller:new Td,data:new Map,refCount:0}}function Oa(e){e.refCount--,e.refCount===0&&Rc(_a,function(){e.controller.abort()})}var Ha=null,gs=0,So=0,Ea=null;function oa(e,t){if(Ha===null){var n=Ha=[];gs=0,So=ru(),Ea={status:"pending",value:void 0,then:function(l){n.push(l)}}}return gs++,t.then($r,$r),t}function $r(){if(--gs===0&&Ha!==null){Ea!==null&&(Ea.status="fulfilled");var e=Ha;Ha=null,So=0,Ea=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function wo(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var Ir=_.S;_.S=function(e,t){Ff=Se(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&oa(e,t),Ir!==null&&Ir(e,t)};var wl=D(null);function xs(){var e=wl.current;return e!==null?e:hn.pooledCache}function ys(e,t){t===null?ue(wl,wl.current):ue(wl,t.pool)}function Dc(){var e=xs();return e===null?null:{parent:jn._currentValue,pool:e}}var jo=Error(f(460)),Pr=Error(f(474)),Va=Error(f(542)),bs={then:function(){}};function Ac(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Yr(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Hn,Hn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,kc(e),e;default:if(typeof t.status=="string")t.then(Hn,Hn);else{if(e=hn,e!==null&&100<e.shellSuspendCounter)throw Error(f(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,kc(e),e}throw $a=t,jo}}function ci(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?($a=n,jo):n}}var $a=null;function Fs(){if($a===null)throw Error(f(459));var e=$a;return $a=null,e}function kc(e){if(e===jo||e===Va)throw Error(f(483))}var sa=null,Ia=0;function vs(e){var t=Ia;return Ia+=1,sa===null&&(sa=[]),Yr(sa,e,t)}function To(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ms(e,t){throw t.$$typeof===ce?Error(f(525)):(e=Object.prototype.toString.call(t),Error(f(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Co(e){function t(V,O){if(e){var J=V.deletions;J===null?(V.deletions=[O],V.flags|=16):J.push(O)}}function n(V,O){if(!e)return null;for(;O!==null;)t(V,O),O=O.sibling;return null}function l(V){for(var O=new Map;V!==null;)V.key!==null?O.set(V.key,V):O.set(V.index,V),V=V.sibling;return O}function o(V,O){return V=ml(V,O),V.index=0,V.sibling=null,V}function s(V,O,J){return V.index=J,e?(J=V.alternate,J!==null?(J=J.index,J<O?(V.flags|=67108866,O):J):(V.flags|=67108866,O)):(V.flags|=1048576,O)}function h(V){return e&&V.alternate===null&&(V.flags|=67108866),V}function w(V,O,J,be){return O===null||O.tag!==6?(O=ta(J,V.mode,be),O.return=V,O):(O=o(O,J),O.return=V,O)}function N(V,O,J,be){var ut=J.type;return ut===Z?xe(V,O,J.props.children,be,J.key):O!==null&&(O.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Y&&ci(ut)===O.type)?(O=o(O,J.props),To(O,J),O.return=V,O):(O=Pl(J.type,J.key,J.props,null,V.mode,be),To(O,J),O.return=V,O)}function ee(V,O,J,be){return O===null||O.tag!==4||O.stateNode.containerInfo!==J.containerInfo||O.stateNode.implementation!==J.implementation?(O=na(J,V.mode,be),O.return=V,O):(O=o(O,J.children||[]),O.return=V,O)}function xe(V,O,J,be,ut){return O===null||O.tag!==7?(O=Oi(J,V.mode,be,ut),O.return=V,O):(O=o(O,J),O.return=V,O)}function je(V,O,J){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ta(""+O,V.mode,J),O.return=V,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case de:return J=Pl(O.type,O.key,O.props,null,V.mode,J),To(J,O),J.return=V,J;case P:return O=na(O,V.mode,J),O.return=V,O;case Y:return O=ci(O),je(V,O,J)}if(st(O)||Ae(O))return O=Oi(O,V.mode,J,null),O.return=V,O;if(typeof O.then=="function")return je(V,vs(O),J);if(O.$$typeof===A)return je(V,mo(V,O),J);ms(V,O)}return null}function le(V,O,J,be){var ut=O!==null?O.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ut!==null?null:w(V,O,""+J,be);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case de:return J.key===ut?N(V,O,J,be):null;case P:return J.key===ut?ee(V,O,J,be):null;case Y:return J=ci(J),le(V,O,J,be)}if(st(J)||Ae(J))return ut!==null?null:xe(V,O,J,be,null);if(typeof J.then=="function")return le(V,O,vs(J),be);if(J.$$typeof===A)return le(V,O,mo(V,J),be);ms(V,J)}return null}function se(V,O,J,be,ut){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return V=V.get(J)||null,w(O,V,""+be,ut);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case de:return V=V.get(be.key===null?J:be.key)||null,N(O,V,be,ut);case P:return V=V.get(be.key===null?J:be.key)||null,ee(O,V,be,ut);case Y:return be=ci(be),se(V,O,J,be,ut)}if(st(be)||Ae(be))return V=V.get(J)||null,xe(O,V,be,ut,null);if(typeof be.then=="function")return se(V,O,J,vs(be),ut);if(be.$$typeof===A)return se(V,O,J,mo(O,be),ut);ms(O,be)}return null}function et(V,O,J,be){for(var ut=null,Kt=null,lt=O,_t=O=0,Ft=null;lt!==null&&_t<J.length;_t++){lt.index>_t?(Ft=lt,lt=null):Ft=lt.sibling;var Jt=le(V,lt,J[_t],be);if(Jt===null){lt===null&&(lt=Ft);break}e&&lt&&Jt.alternate===null&&t(V,lt),O=s(Jt,O,_t),Kt===null?ut=Jt:Kt.sibling=Jt,Kt=Jt,lt=Ft}if(_t===J.length)return n(V,lt),Tt&&Wl(V,_t),ut;if(lt===null){for(;_t<J.length;_t++)lt=je(V,J[_t],be),lt!==null&&(O=s(lt,O,_t),Kt===null?ut=lt:Kt.sibling=lt,Kt=lt);return Tt&&Wl(V,_t),ut}for(lt=l(lt);_t<J.length;_t++)Ft=se(lt,V,_t,J[_t],be),Ft!==null&&(e&&Ft.alternate!==null&&lt.delete(Ft.key===null?_t:Ft.key),O=s(Ft,O,_t),Kt===null?ut=Ft:Kt.sibling=Ft,Kt=Ft);return e&&lt.forEach(function(Po){return t(V,Po)}),Tt&&Wl(V,_t),ut}function gt(V,O,J,be){if(J==null)throw Error(f(151));for(var ut=null,Kt=null,lt=O,_t=O=0,Ft=null,Jt=J.next();lt!==null&&!Jt.done;_t++,Jt=J.next()){lt.index>_t?(Ft=lt,lt=null):Ft=lt.sibling;var Po=le(V,lt,Jt.value,be);if(Po===null){lt===null&&(lt=Ft);break}e&&lt&&Po.alternate===null&&t(V,lt),O=s(Po,O,_t),Kt===null?ut=Po:Kt.sibling=Po,Kt=Po,lt=Ft}if(Jt.done)return n(V,lt),Tt&&Wl(V,_t),ut;if(lt===null){for(;!Jt.done;_t++,Jt=J.next())Jt=je(V,Jt.value,be),Jt!==null&&(O=s(Jt,O,_t),Kt===null?ut=Jt:Kt.sibling=Jt,Kt=Jt);return Tt&&Wl(V,_t),ut}for(lt=l(lt);!Jt.done;_t++,Jt=J.next())Jt=se(lt,V,_t,Jt.value,be),Jt!==null&&(e&&Jt.alternate!==null&&lt.delete(Jt.key===null?_t:Jt.key),O=s(Jt,O,_t),Kt===null?ut=Jt:Kt.sibling=Jt,Kt=Jt);return e&&lt.forEach(function(Ag){return t(V,Ag)}),Tt&&Wl(V,_t),ut}function un(V,O,J,be){if(typeof J=="object"&&J!==null&&J.type===Z&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case de:e:{for(var ut=J.key;O!==null;){if(O.key===ut){if(ut=J.type,ut===Z){if(O.tag===7){n(V,O.sibling),be=o(O,J.props.children),be.return=V,V=be;break e}}else if(O.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===Y&&ci(ut)===O.type){n(V,O.sibling),be=o(O,J.props),To(be,J),be.return=V,V=be;break e}n(V,O);break}else t(V,O);O=O.sibling}J.type===Z?(be=Oi(J.props.children,V.mode,be,J.key),be.return=V,V=be):(be=Pl(J.type,J.key,J.props,null,V.mode,be),To(be,J),be.return=V,V=be)}return h(V);case P:e:{for(ut=J.key;O!==null;){if(O.key===ut)if(O.tag===4&&O.stateNode.containerInfo===J.containerInfo&&O.stateNode.implementation===J.implementation){n(V,O.sibling),be=o(O,J.children||[]),be.return=V,V=be;break e}else{n(V,O);break}else t(V,O);O=O.sibling}be=na(J,V.mode,be),be.return=V,V=be}return h(V);case Y:return J=ci(J),un(V,O,J,be)}if(st(J))return et(V,O,J,be);if(Ae(J)){if(ut=Ae(J),typeof ut!="function")throw Error(f(150));return J=ut.call(J),gt(V,O,J,be)}if(typeof J.then=="function")return un(V,O,vs(J),be);if(J.$$typeof===A)return un(V,O,mo(V,J),be);ms(V,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,O!==null&&O.tag===6?(n(V,O.sibling),be=o(O,J),be.return=V,V=be):(n(V,O),be=ta(J,V.mode,be),be.return=V,V=be),h(V)):n(V,O)}return function(V,O,J,be){try{Ia=0;var ut=un(V,O,J,be);return sa=null,ut}catch(lt){if(lt===jo||lt===Va)throw lt;var Kt=cl(29,lt,null,V.mode);return Kt.lanes=be,Kt.return=V,Kt}finally{}}}var Ei=Co(!0),zo=Co(!1),jl=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ra(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(tn&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=Aa(e),ds(e,null,n),t}return Da(e,l,t,n),Aa(e)}function Ro(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,dr(e,n)}}function Do(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=h:s=s.next=h,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ji=!1;function Ao(){if(ji){var e=Ea;if(e!==null)throw e}}function Ti(e,t,n,l){ji=!1;var o=e.updateQueue;jl=!1;var s=o.firstBaseUpdate,h=o.lastBaseUpdate,w=o.shared.pending;if(w!==null){o.shared.pending=null;var N=w,ee=N.next;N.next=null,h===null?s=ee:h.next=ee,h=N;var xe=e.alternate;xe!==null&&(xe=xe.updateQueue,w=xe.lastBaseUpdate,w!==h&&(w===null?xe.firstBaseUpdate=ee:w.next=ee,xe.lastBaseUpdate=N))}if(s!==null){var je=o.baseState;h=0,xe=ee=N=null,w=s;do{var le=w.lane&-536870913,se=le!==w.lane;if(se?(Lt&le)===le:(l&le)===le){le!==0&&le===So&&(ji=!0),xe!==null&&(xe=xe.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var et=e,gt=w;le=t;var un=n;switch(gt.tag){case 1:if(et=gt.payload,typeof et=="function"){je=et.call(un,je,le);break e}je=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=gt.payload,le=typeof et=="function"?et.call(un,je,le):et,le==null)break e;je=I({},je,le);break e;case 2:jl=!0}}le=w.callback,le!==null&&(e.flags|=64,se&&(e.flags|=8192),se=o.callbacks,se===null?o.callbacks=[le]:se.push(le))}else se={lane:le,tag:w.tag,payload:w.payload,callback:w.callback,next:null},xe===null?(ee=xe=se,N=je):xe=xe.next=se,h|=le;if(w=w.next,w===null){if(w=o.shared.pending,w===null)break;se=w,w=se.next,se.next=null,o.lastBaseUpdate=se,o.shared.pending=null}}while(!0);xe===null&&(N=je),o.baseState=N,o.firstBaseUpdate=ee,o.lastBaseUpdate=xe,s===null&&(o.shared.lanes=0),Mo|=h,e.lanes=h,e.memoizedState=je}}function ca(e,t){if(typeof e!="function")throw Error(f(191,e));e.call(t)}function Xr(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ca(n[e],t)}var Ya=D(null),Kn=D(0);function Wa(e,t){e=eo,ue(Kn,e),ue(Ya,t),eo=e|t.baseLanes}function Ss(){ue(Kn,eo),ue(Ya,Ya.current)}function ws(){eo=Kn.current,W(Ya),W(Kn)}var Bl=D(null),nl=null;function da(e){var t=e.alternate;ue(kn,kn.current&1),ue(Bl,e),nl===null&&(t===null||Ya.current!==null||t.memoizedState!==null)&&(nl=e)}function Xa(e){ue(kn,kn.current),ue(Bl,e),nl===null&&(nl=e)}function Nc(e){e.tag===22?(ue(kn,kn.current),ue(Bl,e),nl===null&&(nl=e)):$i()}function $i(){ue(kn,kn.current),ue(Bl,Bl.current)}function dl(e){W(Bl),nl===e&&(nl=null),W(kn)}var kn=D(0);function qs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||mu(n)||Su(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ci=0,Ct=null,Qt=null,Un=null,js=!1,zi=!1,Fl=!1,Ga=0,La=0,ua=null,Cd=0;function Ge(){throw Error(f(321))}function Gr(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mn(e[n],t[n]))return!1;return!0}function a(e,t,n,l,o,s){return Ci=s,Ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?af:Nd,Fl=!1,s=n(l,o),Fl=!1,zi&&(s=x(t,n,l,o)),r(e),s}function r(e){_.H=Fr;var t=Qt!==null&&Qt.next!==null;if(Ci=0,Un=Qt=Ct=null,js=!1,La=0,ua=null,t)throw Error(f(300));e===null||Wn||(e=e.dependencies,e!==null&&aa(e)&&(Wn=!0))}function x(e,t,n,l){Ct=e;var o=0;do{if(zi&&(ua=null),La=0,zi=!1,25<=o)throw Error(f(301));if(o+=1,Un=Qt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}_.H=of,s=t(n,l)}while(zi);return s}function y(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?L(t):t,e=e.useState()[0],(Qt!==null?Qt.memoizedState:null)!==e&&(Ct.flags|=1024),t}function j(){var e=Ga!==0;return Ga=0,e}function v(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function p(e){if(js){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}js=!1}Ci=0,Un=Qt=Ct=null,zi=!1,La=Ga=0,ua=null}function S(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Ct.memoizedState=Un=e:Un=Un.next=e,Un}function z(){if(Qt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Qt.next;var t=Un===null?Ct.memoizedState:Un.next;if(t!==null)Un=t,Qt=e;else{if(e===null)throw Ct.alternate===null?Error(f(467)):Error(f(310));Qt=e,e={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},Un===null?Ct.memoizedState=Un=e:Un=Un.next=e}return Un}function R(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function L(e){var t=La;return La+=1,ua===null&&(ua=[]),e=Yr(ua,e,t),t=Ct,(Un===null?t.memoizedState:Un.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?af:Nd),e}function X(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return L(e);if(e.$$typeof===A)return an(e)}throw Error(f(438,String(e)))}function fe(e){var t=null,n=Ct.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=Ct.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=R(),Ct.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=nt;return t.index++,n}function K(e,t){return typeof t=="function"?t(e):t}function ae(e){var t=z();return Q(t,Qt,e)}function Q(e,t,n){var l=e.queue;if(l===null)throw Error(f(311));l.lastRenderedReducer=n;var o=e.baseQueue,s=l.pending;if(s!==null){if(o!==null){var h=o.next;o.next=s.next,s.next=h}t.baseQueue=o=s,l.pending=null}if(s=e.baseState,o===null)e.memoizedState=s;else{t=o.next;var w=h=null,N=null,ee=t,xe=!1;do{var je=ee.lane&-536870913;if(je!==ee.lane?(Lt&je)===je:(Ci&je)===je){var le=ee.revertLane;if(le===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),je===So&&(xe=!0);else if((Ci&le)===le){ee=ee.next,le===So&&(xe=!0);continue}else je={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},N===null?(w=N=je,h=s):N=N.next=je,Ct.lanes|=le,Mo|=le;je=ee.action,Fl&&n(s,je),s=ee.hasEagerState?ee.eagerState:n(s,je)}else le={lane:je,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},N===null?(w=N=le,h=s):N=N.next=le,Ct.lanes|=je,Mo|=je;ee=ee.next}while(ee!==null&&ee!==t);if(N===null?h=s:N.next=w,!Mn(s,e.memoizedState)&&(Wn=!0,xe&&(n=Ea,n!==null)))throw n;e.memoizedState=s,e.baseState=h,e.baseQueue=N,l.lastRenderedState=s}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function F(e){var t=z(),n=t.queue;if(n===null)throw Error(f(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do s=e(s,h.action),h=h.next;while(h!==o);Mn(s,t.memoizedState)||(Wn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function we(e,t,n){var l=Ct,o=z(),s=Tt;if(s){if(n===void 0)throw Error(f(407));n=n()}else n=t();var h=!Mn((Qt||o).memoizedState,n);if(h&&(o.memoizedState=n,Wn=!0),o=o.queue,bn(ze.bind(null,l,o,e),[e]),o.getSnapshot!==t||h||Un!==null&&Un.memoizedState.tag&1){if(l.flags|=2048,yt(9,{destroy:void 0},De.bind(null,l,o,n,t),null),hn===null)throw Error(f(349));s||(Ci&127)!==0||Ce(l,t,n)}return n}function Ce(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ct.updateQueue,t===null?(t=R(),Ct.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function De(e,t,n,l){t.value=n,t.getSnapshot=l,Re(t)&&tt(e)}function ze(e,t,n){return n(function(){Re(t)&&tt(e)})}function Re(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mn(e,n)}catch{return!0}}function tt(e){var t=Il(e,2);t!==null&&Jl(t,e,2)}function Ve(e){var t=S();if(typeof e=="function"){var n=e;if(e=n(),Fl){hl(!0);try{n()}finally{hl(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:K,lastRenderedState:e},t}function $(e,t,n,l){return e.baseState=n,Q(e,Qt,typeof l=="function"?l:K)}function k(e,t,n,l,o){if(Mc(e))throw Error(f(485));if(e=t.action,e!==null){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){s.listeners.push(h)}};_.T!==null?n(!0):s.isTransition=!1,l(s),n=t.pending,n===null?(s.next=t.pending=s,re(t,s)):(s.next=n.next,t.pending=n.next=s)}}function re(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var s=_.T,h={};_.T=h;try{var w=n(o,l),N=_.S;N!==null&&N(h,w),ye(e,t,w)}catch(ee){Ie(e,t,ee)}finally{s!==null&&h.types!==null&&(s.types=h.types),_.T=s}}else try{s=n(o,l),ye(e,t,s)}catch(ee){Ie(e,t,ee)}}function ye(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Ne(e,t,l)},function(l){return Ie(e,t,l)}):Ne(e,t,n)}function Ne(e,t,n){t.status="fulfilled",t.value=n,ct(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,re(e,n)))}function Ie(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,ct(t),t=t.next;while(t!==l)}e.action=null}function ct(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xe(e,t){return t}function at(e,t){if(Tt){var n=hn.formState;if(n!==null){e:{var l=Ct;if(Tt){if(Gt){t:{for(var o=Gt,s=Xl;o.nodeType!==8;){if(!s){o=null;break t}if(o=Ai(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){Gt=Ai(o.nextSibling),l=o.data==="F!";break e}}ia(l)}l=!1}l&&(t=n[0])}}return n=S(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xe,lastRenderedState:t},n.queue=l,n=tf.bind(null,Ct,l),l.dispatch=n,l=Ve(!1),s=kd.bind(null,Ct,!1,l.queue),l=S(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=k.bind(null,Ct,o,s,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function dt(e){var t=z();return ln(t,Qt,e)}function ln(e,t,n){if(t=Q(e,t,Xe)[0],e=ae(K)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=L(t)}catch(h){throw h===jo?Va:h}else l=t;t=z();var o=t.queue,s=o.dispatch;return n!==t.memoizedState&&(Ct.flags|=2048,yt(9,{destroy:void 0},ht.bind(null,o,n),null)),[l,s,e]}function ht(e,t){e.action=t}function Le(e){var t=z(),n=Qt;if(n!==null)return ln(t,n,e);z(),t=t.memoizedState,n=z();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function yt(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=Ct.updateQueue,t===null&&(t=R(),Ct.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function wt(){return z().memoizedState}function zt(e,t,n,l){var o=S();Ct.flags|=e,o.memoizedState=yt(1|t,{destroy:void 0},n,l===void 0?null:l)}function Zt(e,t,n,l){var o=z();l=l===void 0?null:l;var s=o.memoizedState.inst;Qt!==null&&l!==null&&Gr(l,Qt.memoizedState.deps)?o.memoizedState=yt(t,s,n,l):(Ct.flags|=e,o.memoizedState=yt(1|t,s,n,l))}function Tn(e,t){zt(8390656,8,e,t)}function bn(e,t){Zt(2048,8,e,t)}function Rt(e){Ct.flags|=4;var t=Ct.updateQueue;if(t===null)t=R(),Ct.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Ri(e){var t=z().memoizedState;return Rt({ref:t,nextImpl:e}),function(){if((tn&2)!==0)throw Error(f(440));return t.impl.apply(void 0,arguments)}}function Di(e,t){return Zt(4,2,e,t)}function _l(e,t){return Zt(4,4,e,t)}function Xu(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gu(e,t,n){n=n!=null?n.concat([e]):null,Zt(4,4,Xu.bind(null,t,e),n)}function zd(){}function Lu(e,t){var n=z();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Gr(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Fu(e,t){var n=z();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Gr(t,l[1]))return l[0];if(l=e(),Fl){hl(!0);try{e()}finally{hl(!1)}}return n.memoizedState=[l,t],l}function Rd(e,t,n){return n===void 0||(Ci&1073741824)!==0&&(Lt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Zf(),Ct.lanes|=e,Mo|=e,n)}function qu(e,t,n,l){return Mn(n,t)?n:Ya.current!==null?(e=Rd(e,n,l),Mn(e,t)||(Wn=!0),e):(Ci&42)===0||(Ci&1073741824)!==0&&(Lt&261930)===0?(Wn=!0,e.memoizedState=n):(e=Zf(),Ct.lanes|=e,Mo|=e,t)}function Zu(e,t,n,l,o){var s=ne.p;ne.p=s!==0&&8>s?s:8;var h=_.T,w={};_.T=w,kd(e,!1,t,n);try{var N=o(),ee=_.S;if(ee!==null&&ee(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var xe=wo(N,l);Lr(e,t,xe,fi(e))}else Lr(e,t,l,fi(e))}catch(je){Lr(e,t,{then:function(){},status:"rejected",reason:je},fi())}finally{ne.p=s,h!==null&&w.types!==null&&(h.types=w.types),_.T=h}}function Th(){}function Dd(e,t,n,l){if(e.tag!==5)throw Error(f(476));var o=Qu(e).queue;Zu(e,o,t,Me,n===null?Th:function(){return Ku(e),n(l)})}function Qu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:K,lastRenderedState:Me},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:K,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ku(e){var t=Qu(e);t.next===null&&(t=e.alternate.memoizedState),Lr(e,t.next.queue,{},fi())}function Ad(){return an(dc)}function Ju(){return z().memoizedState}function ef(){return z().memoizedState}function Ch(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=fi();e=ra(n);var l=Vi(t,e,n);l!==null&&(Jl(l,t,n),Ro(l,t,n)),t={cache:hs()},e.payload=t;return}t=t.return}}function zh(e,t,n){var l=fi();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Mc(e)?nf(t,n):(n=cs(e,t,n,l),n!==null&&(Jl(n,e,l),lf(n,t,l)))}function tf(e,t,n){var l=fi();Lr(e,t,n,l)}function Lr(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mc(e))nf(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var h=t.lastRenderedState,w=s(h,n);if(o.hasEagerState=!0,o.eagerState=w,Mn(w,h))return Da(e,t,o,0),hn===null&&Xs(),!1}catch{}finally{}if(n=cs(e,t,o,l),n!==null)return Jl(n,e,l),lf(n,t,l),!0}return!1}function kd(e,t,n,l){if(l={lane:2,revertLane:ru(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Mc(e)){if(t)throw Error(f(479))}else t=cs(e,n,l,2),t!==null&&Jl(t,e,2)}function Mc(e){var t=e.alternate;return e===Ct||t!==null&&t===Ct}function nf(e,t){zi=js=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,dr(e,n)}}var Fr={readContext:an,use:X,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};Fr.useEffectEvent=Ge;var af={readContext:an,use:X,useCallback:function(e,t){return S().memoizedState=[e,t===void 0?null:t],e},useContext:an,useEffect:Tn,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,zt(4194308,4,Xu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zt(4194308,4,e,t)},useInsertionEffect:function(e,t){zt(4,2,e,t)},useMemo:function(e,t){var n=S();t=t===void 0?null:t;var l=e();if(Fl){hl(!0);try{e()}finally{hl(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=S();if(n!==void 0){var o=n(t);if(Fl){hl(!0);try{n(t)}finally{hl(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=zh.bind(null,Ct,e),[l.memoizedState,e]},useRef:function(e){var t=S();return e={current:e},t.memoizedState=e},useState:function(e){e=Ve(e);var t=e.queue,n=tf.bind(null,Ct,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:zd,useDeferredValue:function(e,t){var n=S();return Rd(n,e,t)},useTransition:function(){var e=Ve(!1);return e=Zu.bind(null,Ct,e.queue,!0,!1),S().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=Ct,o=S();if(Tt){if(n===void 0)throw Error(f(407));n=n()}else{if(n=t(),hn===null)throw Error(f(349));(Lt&127)!==0||Ce(l,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Tn(ze.bind(null,l,s,e),[e]),l.flags|=2048,yt(9,{destroy:void 0},De.bind(null,l,s,n,t),null),n},useId:function(){var e=S(),t=hn.identifierPrefix;if(Tt){var n=si,l=Yl;n=(l&~(1<<32-In(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Ga++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Cd++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ad,useFormState:at,useActionState:at,useOptimistic:function(e){var t=S();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=kd.bind(null,Ct,!0,n),n.dispatch=t,[e,t]},useMemoCache:fe,useCacheRefresh:function(){return S().memoizedState=Ch.bind(null,Ct)},useEffectEvent:function(e){var t=S(),n={impl:e};return t.memoizedState=n,function(){if((tn&2)!==0)throw Error(f(440));return n.impl.apply(void 0,arguments)}}},Nd={readContext:an,use:X,useCallback:Lu,useContext:an,useEffect:bn,useImperativeHandle:Gu,useInsertionEffect:Di,useLayoutEffect:_l,useMemo:Fu,useReducer:ae,useRef:wt,useState:function(){return ae(K)},useDebugValue:zd,useDeferredValue:function(e,t){var n=z();return qu(n,Qt.memoizedState,e,t)},useTransition:function(){var e=ae(K)[0],t=z().memoizedState;return[typeof e=="boolean"?e:L(e),t]},useSyncExternalStore:we,useId:Ju,useHostTransitionStatus:Ad,useFormState:dt,useActionState:dt,useOptimistic:function(e,t){var n=z();return $(n,Qt,e,t)},useMemoCache:fe,useCacheRefresh:ef};Nd.useEffectEvent=Ri;var of={readContext:an,use:X,useCallback:Lu,useContext:an,useEffect:bn,useImperativeHandle:Gu,useInsertionEffect:Di,useLayoutEffect:_l,useMemo:Fu,useReducer:F,useRef:wt,useState:function(){return F(K)},useDebugValue:zd,useDeferredValue:function(e,t){var n=z();return Qt===null?Rd(n,e,t):qu(n,Qt.memoizedState,e,t)},useTransition:function(){var e=F(K)[0],t=z().memoizedState;return[typeof e=="boolean"?e:L(e),t]},useSyncExternalStore:we,useId:Ju,useHostTransitionStatus:Ad,useFormState:Le,useActionState:Le,useOptimistic:function(e,t){var n=z();return Qt!==null?$(n,Qt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:fe,useCacheRefresh:ef};of.useEffectEvent=Ri;function Md(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:I({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ud={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=fi(),o=ra(l);o.payload=t,n!=null&&(o.callback=n),t=Vi(e,o,l),t!==null&&(Jl(t,e,l),Ro(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=fi(),o=ra(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Vi(e,o,l),t!==null&&(Jl(t,e,l),Ro(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fi(),l=ra(n);l.tag=2,t!=null&&(l.callback=t),t=Vi(e,l,n),t!==null&&(Jl(t,e,n),Ro(t,e,n))}};function sf(e,t,n,l,o,s,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,h):t.prototype&&t.prototype.isPureReactComponent?!ns(n,l)||!ns(o,s):!0}function rf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Ud.enqueueReplaceState(t,t.state,null)}function Ts(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=I({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function cf(e){ai(e)}function df(e){console.error(e)}function uf(e){ai(e)}function Uc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function ff(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Bd(e,t,n){return n=ra(n),n.tag=3,n.payload={element:null},n.callback=function(){Uc(e,t)},n}function pf(e){return e=ra(e),e.tag=3,e}function hf(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=l.value;e.payload=function(){return o(s)},e.callback=function(){ff(t,n,l)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){ff(t,n,l),typeof o!="function"&&(Uo===null?Uo=new Set([this]):Uo.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Rh(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Ul(t,n,o,!0),n=Bl.current,n!==null){switch(n.tag){case 31:case 13:return nl===null?Xc():n.alternate===null&&Bn===0&&(Bn=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===bs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),au(e,l,o)),!1;case 22:return n.flags|=65536,l===bs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),au(e,l,o)),!1}throw Error(f(435,n.tag))}return au(e,l,o),Xc(),!1}if(Tt)return t=Bl.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==Vr&&(e=Error(f(422),{cause:l}),Si(Sl(e,n)))):(l!==Vr&&(t=Error(f(423),{cause:l}),Si(Sl(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=Sl(l,n),o=Bd(e.stateNode,l,o),Do(e,o),Bn!==4&&(Bn=2)),!1;var s=Error(f(520),{cause:l});if(s=Sl(s,n),nc===null?nc=[s]:nc.push(s),Bn!==4&&(Bn=2),t===null)return!0;l=Sl(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Bd(n.stateNode,l,e),Do(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Uo===null||!Uo.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=pf(o),hf(o,e,n,l),Do(n,o),!1}n=n.return}while(n!==null);return!1}var _d=Error(f(461)),Wn=!1;function ul(e,t,n,l){t.child=e===null?zo(t,null,n,l):Ei(t,e.child,n,l)}function gf(e,t,n,l,o){n=n.render;var s=t.ref;if("ref"in l){var h={};for(var w in l)w!=="ref"&&(h[w]=l[w])}else h=l;return Ll(t),l=a(e,t,n,h,s,o),w=j(),e!==null&&!Wn?(v(e,t,o),Fa(e,t,o)):(Tt&&w&&Hr(t),t.flags|=1,ul(e,t,l,o),t.child)}function xf(e,t,n,l,o){if(e===null){var s=n.type;return typeof s=="function"&&!ea(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,yf(e,t,s,l,o)):(e=Pl(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Yd(e,o)){var h=s.memoizedProps;if(n=n.compare,n=n!==null?n:ns,n(h,l)&&e.ref===t.ref)return Fa(e,t,o)}return t.flags|=1,e=ml(s,l),e.ref=t.ref,e.return=t,t.child=e}function yf(e,t,n,l,o){if(e!==null){var s=e.memoizedProps;if(ns(s,l)&&e.ref===t.ref)if(Wn=!1,t.pendingProps=l=s,Yd(e,o))(e.flags&131072)!==0&&(Wn=!0);else return t.lanes=e.lanes,Fa(e,t,o)}return Od(e,t,n,l,o)}function bf(e,t,n,l){var o=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~s}else l=0,t.child=null;return vf(e,t,s,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ys(t,s!==null?s.cachePool:null),s!==null?Wa(t,s):Ss(),Nc(t);else return l=t.lanes=536870912,vf(e,t,s!==null?s.baseLanes|n:n,n,l)}else s!==null?(ys(t,s.cachePool),Wa(t,s),$i(),t.memoizedState=null):(e!==null&&ys(t,null),Ss(),$i());return ul(e,t,o,n),t.child}function qr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function vf(e,t,n,l,o){var s=xs();return s=s===null?null:{parent:jn._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&ys(t,null),Ss(),Nc(t),e!==null&&Ul(e,t,l,!0),t.childLanes=o,null}function Bc(e,t){return t=Oc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function mf(e,t,n){return Ei(t,e.child,null,n),e=Bc(t,t.pendingProps),e.flags|=2,dl(t),t.memoizedState=null,e}function Dh(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Tt){if(l.mode==="hidden")return e=Bc(t,l),t.lanes=536870912,qr(null,e);if(Xa(t),(e=Gt)?(e=Mp(e,Xl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:oi!==null?{id:Yl,overflow:si}:null,retryLane:536870912,hydrationErrors:null},n=Ls(e),n.return=t,t.child=n,Yn=t,Gt=null)):e=null,e===null)throw ia(t);return t.lanes=536870912,null}return Bc(t,l)}var s=e.memoizedState;if(s!==null){var h=s.dehydrated;if(Xa(t),o)if(t.flags&256)t.flags&=-257,t=mf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(f(558));else if(Wn||Ul(e,t,n,!1),o=(n&e.childLanes)!==0,Wn||o){if(l=hn,l!==null&&(h=Cl(l,n),h!==0&&h!==s.retryLane))throw s.retryLane=h,Il(e,h),Jl(l,e,h),_d;Xc(),t=mf(e,t,n)}else e=s.treeContext,Gt=Ai(h.nextSibling),Yn=t,Tt=!0,la=null,Xl=!1,e!==null&&jc(t,e),t=Bc(t,l),t.flags|=4096;return t}return e=ml(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function _c(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(f(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Od(e,t,n,l,o){return Ll(t),n=a(e,t,n,l,void 0,o),l=j(),e!==null&&!Wn?(v(e,t,o),Fa(e,t,o)):(Tt&&l&&Hr(t),t.flags|=1,ul(e,t,n,o),t.child)}function Sf(e,t,n,l,o,s){return Ll(t),t.updateQueue=null,n=x(t,l,n,o),r(e),l=j(),e!==null&&!Wn?(v(e,t,s),Fa(e,t,s)):(Tt&&l&&Hr(t),t.flags|=1,ul(e,t,n,s),t.child)}function wf(e,t,n,l,o){if(Ll(t),t.stateNode===null){var s=xo,h=n.contextType;typeof h=="object"&&h!==null&&(s=an(h)),s=new n(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ud,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},Pa(t),h=n.contextType,s.context=typeof h=="object"&&h!==null?an(h):xo,s.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Md(t,n,h,l),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(h=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),h!==s.state&&Ud.enqueueReplaceState(s,s.state,null),Ti(t,l,s,o),Ao(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var w=t.memoizedProps,N=Ts(n,w);s.props=N;var ee=s.context,xe=n.contextType;h=xo,typeof xe=="object"&&xe!==null&&(h=an(xe));var je=n.getDerivedStateFromProps;xe=typeof je=="function"||typeof s.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,xe||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(w||ee!==h)&&rf(t,s,l,h),jl=!1;var le=t.memoizedState;s.state=le,Ti(t,l,s,o),Ao(),ee=t.memoizedState,w||le!==ee||jl?(typeof je=="function"&&(Md(t,n,je,l),ee=t.memoizedState),(N=jl||sf(t,n,N,l,le,ee,h))?(xe||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=ee),s.props=l,s.state=ee,s.context=h,l=N):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,Wr(e,t),h=t.memoizedProps,xe=Ts(n,h),s.props=xe,je=t.pendingProps,le=s.context,ee=n.contextType,N=xo,typeof ee=="object"&&ee!==null&&(N=an(ee)),w=n.getDerivedStateFromProps,(ee=typeof w=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(h!==je||le!==N)&&rf(t,s,l,N),jl=!1,le=t.memoizedState,s.state=le,Ti(t,l,s,o),Ao();var se=t.memoizedState;h!==je||le!==se||jl||e!==null&&e.dependencies!==null&&aa(e.dependencies)?(typeof w=="function"&&(Md(t,n,w,l),se=t.memoizedState),(xe=jl||sf(t,n,xe,l,le,se,N)||e!==null&&e.dependencies!==null&&aa(e.dependencies))?(ee||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,se,N),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,se,N)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=se),s.props=l,s.state=se,s.context=N,l=xe):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,_c(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=Ei(t,e.child,null,o),t.child=Ei(t,null,n,o)):ul(e,t,n,o),t.memoizedState=s.state,e=t.child):e=Fa(e,t,o),e}function jf(e,t,n,l){return Ma(),t.flags|=256,ul(e,t,n,l),t.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ed(e){return{baseLanes:e,cachePool:Dc()}}function Vd(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ui),e}function Tf(e,t,n){var l=t.pendingProps,o=!1,s=(t.flags&128)!==0,h;if((h=s)||(h=e!==null&&e.memoizedState===null?!1:(kn.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Tt){if(o?da(t):$i(),(e=Gt)?(e=Mp(e,Xl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:oi!==null?{id:Yl,overflow:si}:null,retryLane:536870912,hydrationErrors:null},n=Ls(e),n.return=t,t.child=n,Yn=t,Gt=null)):e=null,e===null)throw ia(t);return Su(e)?t.lanes=32:t.lanes=536870912,null}var w=l.children;return l=l.fallback,o?($i(),o=t.mode,w=Oc({mode:"hidden",children:w},o),l=Oi(l,o,n,null),w.return=t,l.return=t,w.sibling=l,t.child=w,l=t.child,l.memoizedState=Ed(n),l.childLanes=Vd(e,h,n),t.memoizedState=Hd,qr(null,l)):(da(t),$d(t,w))}var N=e.memoizedState;if(N!==null&&(w=N.dehydrated,w!==null)){if(s)t.flags&256?(da(t),t.flags&=-257,t=Id(e,t,n)):t.memoizedState!==null?($i(),t.child=e.child,t.flags|=128,t=null):($i(),w=l.fallback,o=t.mode,l=Oc({mode:"visible",children:l.children},o),w=Oi(w,o,n,null),w.flags|=2,l.return=t,w.return=t,l.sibling=w,t.child=l,Ei(t,e.child,null,n),l=t.child,l.memoizedState=Ed(n),l.childLanes=Vd(e,h,n),t.memoizedState=Hd,t=qr(null,l));else if(da(t),Su(w)){if(h=w.nextSibling&&w.nextSibling.dataset,h)var ee=h.dgst;h=ee,l=Error(f(419)),l.stack="",l.digest=h,Si({value:l,source:null,stack:null}),t=Id(e,t,n)}else if(Wn||Ul(e,t,n,!1),h=(n&e.childLanes)!==0,Wn||h){if(h=hn,h!==null&&(l=Cl(h,n),l!==0&&l!==N.retryLane))throw N.retryLane=l,Il(e,l),Jl(h,e,l),_d;mu(w)||Xc(),t=Id(e,t,n)}else mu(w)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Gt=Ai(w.nextSibling),Yn=t,Tt=!0,la=null,Xl=!1,e!==null&&jc(t,e),t=$d(t,l.children),t.flags|=4096);return t}return o?($i(),w=l.fallback,o=t.mode,N=e.child,ee=N.sibling,l=ml(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,ee!==null?w=ml(ee,w):(w=Oi(w,o,n,null),w.flags|=2),w.return=t,l.return=t,l.sibling=w,t.child=l,qr(null,l),l=t.child,w=e.child.memoizedState,w===null?w=Ed(n):(o=w.cachePool,o!==null?(N=jn._currentValue,o=o.parent!==N?{parent:N,pool:N}:o):o=Dc(),w={baseLanes:w.baseLanes|n,cachePool:o}),l.memoizedState=w,l.childLanes=Vd(e,h,n),t.memoizedState=Hd,qr(e.child,l)):(da(t),n=e.child,e=n.sibling,n=ml(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function $d(e,t){return t=Oc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Oc(e,t){return e=cl(22,e,null,t),e.lanes=0,e}function Id(e,t,n){return Ei(t,e.child,null,n),e=$d(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cf(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),bo(e.return,t,n)}function Pd(e,t,n,l,o,s){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:s}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=n,h.tailMode=o,h.treeForkCount=s)}function zf(e,t,n){var l=t.pendingProps,o=l.revealOrder,s=l.tail;l=l.children;var h=kn.current,w=(h&2)!==0;if(w?(h=h&1|2,t.flags|=128):h&=1,ue(kn,h),ul(e,t,l,n),l=Tt?Na:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cf(e,n,t);else if(e.tag===19)Cf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&qs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Pd(t,!1,o,n,s,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&qs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Pd(t,!0,n,null,s,l);break;case"together":Pd(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Fa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mo|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ul(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(f(153));if(t.child!==null){for(e=t.child,n=ml(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ml(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Yd(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&aa(e)))}function Ah(e,t,n){switch(t.tag){case 3:gn(t,t.stateNode.containerInfo),ri(t,jn,e.memoizedState.cache),Ma();break;case 27:case 5:Ol(t);break;case 4:gn(t,t.stateNode.containerInfo);break;case 10:ri(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Xa(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(da(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Tf(e,t,n):(da(t),e=Fa(e,t,n),e!==null?e.sibling:null);da(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Ul(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return zf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ue(kn,kn.current),l)break;return null;case 22:return t.lanes=0,bf(e,t,n,t.pendingProps);case 24:ri(t,jn,e.memoizedState.cache)}return Fa(e,t,n)}function Rf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Wn=!0;else{if(!Yd(e,n)&&(t.flags&128)===0)return Wn=!1,Ah(e,t,n);Wn=(e.flags&131072)!==0}else Wn=!1,Tt&&(t.flags&1048576)!==0&&Or(t,Na,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=ci(t.elementType),t.type=e,typeof e=="function")ea(e)?(l=Ts(e,l),t.tag=1,t=wf(null,t,e,l,n)):(t.tag=0,t=Od(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===U){t.tag=11,t=gf(null,t,e,l,n);break e}else if(o===g){t.tag=14,t=xf(null,t,e,l,n);break e}}throw t=Pt(e)||e,Error(f(306,t,""))}}return t;case 0:return Od(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=Ts(l,t.pendingProps),wf(e,t,l,o,n);case 3:e:{if(gn(t,t.stateNode.containerInfo),e===null)throw Error(f(387));l=t.pendingProps;var s=t.memoizedState;o=s.element,Wr(e,t),Ti(t,l,null,n);var h=t.memoizedState;if(l=h.cache,ri(t,jn,l),l!==s.cache&&vo(t,[jn],n,!0),Ao(),l=h.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=jf(e,t,l,n);break e}else if(l!==o){o=Sl(Error(f(424)),t),Si(o),t=jf(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Gt=Ai(e.firstChild),Yn=t,Tt=!0,la=null,Xl=!0,n=zo(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ma(),l===o){t=Fa(e,t,n);break e}ul(e,t,l,n)}t=t.child}return t;case 26:return _c(e,t),e===null?(n=Ep(t.type,null,t.pendingProps,null))?t.memoizedState=n:Tt||(n=t.type,e=t.pendingProps,l=Kc(rt.current).createElement(n),l[Pn]=t,l[vn]=e,fl(l,n,e),_n(l),t.stateNode=l):t.memoizedState=Ep(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ol(t),e===null&&Tt&&(l=t.stateNode=_p(t.type,t.pendingProps,rt.current),Yn=t,Xl=!0,o=Gt,Ho(t.type)?(wu=o,Gt=Ai(l.firstChild)):Gt=o),ul(e,t,t.pendingProps.children,n),_c(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Tt&&((o=l=Gt)&&(l=ag(l,t.type,t.pendingProps,Xl),l!==null?(t.stateNode=l,Yn=t,Gt=Ai(l.firstChild),Xl=!1,o=!0):o=!1),o||ia(t)),Ol(t),o=t.type,s=t.pendingProps,h=e!==null?e.memoizedProps:null,l=s.children,yu(o,s)?l=null:h!==null&&yu(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=a(e,t,y,null,null,n),dc._currentValue=o),_c(e,t),ul(e,t,l,n),t.child;case 6:return e===null&&Tt&&((e=n=Gt)&&(n=og(n,t.pendingProps,Xl),n!==null?(t.stateNode=n,Yn=t,Gt=null,e=!0):e=!1),e||ia(t)),null;case 13:return Tf(e,t,n);case 4:return gn(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ei(t,null,l,n):ul(e,t,l,n),t.child;case 11:return gf(e,t,t.type,t.pendingProps,n);case 7:return ul(e,t,t.pendingProps,n),t.child;case 8:return ul(e,t,t.pendingProps.children,n),t.child;case 12:return ul(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,ri(t,t.type,l.value),ul(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,Ll(t),o=an(o),l=l(o),t.flags|=1,ul(e,t,l,n),t.child;case 14:return xf(e,t,t.type,t.pendingProps,n);case 15:return yf(e,t,t.type,t.pendingProps,n);case 19:return zf(e,t,n);case 31:return Dh(e,t,n);case 22:return bf(e,t,n,t.pendingProps);case 24:return Ll(t),l=an(jn),e===null?(o=xs(),o===null&&(o=hn,s=hs(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:l,cache:o},Pa(t),ri(t,jn,o)):((e.lanes&n)!==0&&(Wr(e,t),Ti(t,null,null,n),Ao()),o=e.memoizedState,s=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),ri(t,jn,l)):(l=s.cache,ri(t,jn,l),l!==o.cache&&vo(t,[jn],n,!0))),ul(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(f(156,t.tag))}function qa(e){e.flags|=4}function Wd(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(ep())e.flags|=8192;else throw $a=bs,Pr}else e.flags&=-16777217}function Df(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yp(t))if(ep())e.flags|=8192;else throw $a=bs,Pr}function Hc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ds():536870912,e.lanes|=t,Js|=t)}function Zr(e,t){if(!Tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Sn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function kh(e,t,n){var l=t.pendingProps;switch(Er(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(t),null;case 1:return Sn(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Gl(jn),Ht(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(yo(t)?qa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ua())),Sn(t),null;case 26:var o=t.type,s=t.memoizedState;return e===null?(qa(t),s!==null?(Sn(t),Df(t,s)):(Sn(t),Wd(t,o,null,l,n))):s?s!==e.memoizedState?(qa(t),Sn(t),Df(t,s)):(Sn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&qa(t),Sn(t),Wd(t,o,e,l,n)),null;case 27:if(te(t),n=rt.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&qa(t);else{if(!l){if(t.stateNode===null)throw Error(f(166));return Sn(t),null}e=Ee.current,yo(t)?Tc(t):(e=_p(o,l,n),t.stateNode=e,qa(t))}return Sn(t),null;case 5:if(te(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&qa(t);else{if(!l){if(t.stateNode===null)throw Error(f(166));return Sn(t),null}if(s=Ee.current,yo(t))Tc(t);else{var h=Kc(rt.current);switch(s){case 1:s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=h.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?h.createElement(o,{is:l.is}):h.createElement(o)}}s[Pn]=t,s[vn]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=s;e:switch(fl(s,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&qa(t)}}return Sn(t),Wd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&qa(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(f(166));if(e=rt.current,yo(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=Yn,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[Pn]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Tp(e.nodeValue,n)),e||ia(t,!0)}else e=Kc(e).createTextNode(l),e[Pn]=t,t.stateNode=e}return Sn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=yo(t),n!==null){if(e===null){if(!l)throw Error(f(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(557));e[Pn]=t}else Ma(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Sn(t),e=!1}else n=Ua(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(dl(t),t):(dl(t),null);if((t.flags&128)!==0)throw Error(f(558))}return Sn(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=yo(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(f(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(f(317));o[Pn]=t}else Ma(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Sn(t),o=!1}else o=Ua(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(dl(t),t):(dl(t),null)}return dl(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Hc(t,t.updateQueue),Sn(t),null);case 4:return Ht(),e===null&&fu(t.stateNode.containerInfo),Sn(t),null;case 10:return Gl(t.type),Sn(t),null;case 19:if(W(kn),l=t.memoizedState,l===null)return Sn(t),null;if(o=(t.flags&128)!==0,s=l.rendering,s===null)if(o)Zr(l,!1);else{if(Bn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=qs(e),s!==null){for(t.flags|=128,Zr(l,!1),e=s.updateQueue,t.updateQueue=e,Hc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)us(n,e),n=n.sibling;return ue(kn,kn.current&1|2),Tt&&Wl(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Se()>Pc&&(t.flags|=128,o=!0,Zr(l,!1),t.lanes=4194304)}else{if(!o)if(e=qs(s),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Hc(t,e),Zr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!Tt)return Sn(t),null}else 2*Se()-l.renderingStartTime>Pc&&n!==536870912&&(t.flags|=128,o=!0,Zr(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Se(),e.sibling=null,n=kn.current,ue(kn,o?n&1|2:n&1),Tt&&Wl(t,l.treeForkCount),e):(Sn(t),null);case 22:case 23:return dl(t),ws(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(Sn(t),t.subtreeFlags&6&&(t.flags|=8192)):Sn(t),n=t.updateQueue,n!==null&&Hc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&W(wl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Gl(jn),Sn(t),null;case 25:return null;case 30:return null}throw Error(f(156,t.tag))}function Nh(e,t){switch(Er(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gl(jn),Ht(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return te(t),null;case 31:if(t.memoizedState!==null){if(dl(t),t.alternate===null)throw Error(f(340));Ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(dl(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(f(340));Ma()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return W(kn),null;case 4:return Ht(),null;case 10:return Gl(t.type),null;case 22:case 23:return dl(t),ws(),e!==null&&W(wl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Gl(jn),null;case 25:return null;default:return null}}function Af(e,t){switch(Er(t),t.tag){case 3:Gl(jn),Ht();break;case 26:case 27:case 5:te(t);break;case 4:Ht();break;case 31:t.memoizedState!==null&&dl(t);break;case 13:dl(t);break;case 19:W(kn);break;case 10:Gl(t.type);break;case 22:case 23:dl(t),ws(),e!==null&&W(wl);break;case 24:Gl(jn)}}function Qr(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var s=n.create,h=n.inst;l=s(),h.destroy=l}n=n.next}while(n!==o)}}catch(w){sn(t,t.return,w)}}function ko(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var s=o.next;l=s;do{if((l.tag&e)===e){var h=l.inst,w=h.destroy;if(w!==void 0){h.destroy=void 0,o=t;var N=n,ee=w;try{ee()}catch(xe){sn(o,N,xe)}}}l=l.next}while(l!==s)}}catch(xe){sn(t,t.return,xe)}}function kf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Xr(t,n)}catch(l){sn(e,e.return,l)}}}function Nf(e,t,n){n.props=Ts(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){sn(e,t,l)}}function Kr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){sn(e,t,o)}}function fa(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){sn(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){sn(e,t,o)}else n.current=null}function Mf(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){sn(e,e.return,o)}}function Xd(e,t,n){try{var l=e.stateNode;Jh(l,e.type,n,t),l[vn]=t}catch(o){sn(e,e.return,o)}}function Uf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ho(e.type)||e.tag===4}function Gd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ho(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ld(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hn));else if(l!==4&&(l===27&&Ho(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Ld(e,t,n),e=e.sibling;e!==null;)Ld(e,t,n),e=e.sibling}function Ec(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&Ho(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ec(e,t,n),e=e.sibling;e!==null;)Ec(e,t,n),e=e.sibling}function Bf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);fl(t,l,n),t[Pn]=e,t[vn]=n}catch(s){sn(e,e.return,s)}}var Za=!1,Xn=!1,Fd=!1,_f=typeof WeakSet=="function"?WeakSet:Set,ll=null;function Mh(e,t){if(e=e.containerInfo,gu=ad,e=is(e),as(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var h=0,w=-1,N=-1,ee=0,xe=0,je=e,le=null;t:for(;;){for(var se;je!==n||o!==0&&je.nodeType!==3||(w=h+o),je!==s||l!==0&&je.nodeType!==3||(N=h+l),je.nodeType===3&&(h+=je.nodeValue.length),(se=je.firstChild)!==null;)le=je,je=se;for(;;){if(je===e)break t;if(le===n&&++ee===o&&(w=h),le===s&&++xe===l&&(N=h),(se=je.nextSibling)!==null)break;je=le,le=je.parentNode}je=se}n=w===-1||N===-1?null:{start:w,end:N}}else n=null}n=n||{start:0,end:0}}else n=null;for(xu={focusedElem:e,selectionRange:n},ad=!1,ll=t;ll!==null;)if(t=ll,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ll=e;else for(;ll!==null;){switch(t=ll,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,o=s.memoizedProps,s=s.memoizedState,l=n.stateNode;try{var et=Ts(n.type,o);e=l.getSnapshotBeforeUpdate(et,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(gt){sn(n,n.return,gt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)vu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(f(163))}if(e=t.sibling,e!==null){e.return=t.return,ll=e;break}ll=t.return}}function Of(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Ka(e,n),l&4&&Qr(5,n);break;case 1:if(Ka(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){sn(n,n.return,h)}else{var o=Ts(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){sn(n,n.return,h)}}l&64&&kf(n),l&512&&Kr(n,n.return);break;case 3:if(Ka(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Xr(e,t)}catch(h){sn(n,n.return,h)}}break;case 27:t===null&&l&4&&Bf(n);case 26:case 5:Ka(e,n),t===null&&l&4&&Mf(n),l&512&&Kr(n,n.return);break;case 12:Ka(e,n);break;case 31:Ka(e,n),l&4&&Vf(e,n);break;case 13:Ka(e,n),l&4&&$f(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Ih.bind(null,n),sg(e,n))));break;case 22:if(l=n.memoizedState!==null||Za,!l){t=t!==null&&t.memoizedState!==null||Xn,o=Za;var s=Xn;Za=l,(Xn=t)&&!s?Ja(e,n,(n.subtreeFlags&8772)!==0):Ka(e,n),Za=o,Xn=s}break;case 30:break;default:Ka(e,n)}}function Hf(e){var t=e.alternate;t!==null&&(e.alternate=null,Hf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Gi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cn=null,ql=!1;function Qa(e,t,n){for(n=n.child;n!==null;)Ef(e,t,n),n=n.sibling}function Ef(e,t,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(hi,n)}catch{}switch(n.tag){case 26:Xn||fa(n,t),Qa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Xn||fa(n,t);var l=Cn,o=ql;Ho(n.type)&&(Cn=n.stateNode,ql=!1),Qa(e,t,n),sc(n.stateNode),Cn=l,ql=o;break;case 5:Xn||fa(n,t);case 6:if(l=Cn,o=ql,Cn=null,Qa(e,t,n),Cn=l,ql=o,Cn!==null)if(ql)try{(Cn.nodeType===9?Cn.body:Cn.nodeName==="HTML"?Cn.ownerDocument.body:Cn).removeChild(n.stateNode)}catch(s){sn(n,t,s)}else try{Cn.removeChild(n.stateNode)}catch(s){sn(n,t,s)}break;case 18:Cn!==null&&(ql?(e=Cn,kp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),sr(e)):kp(Cn,n.stateNode));break;case 4:l=Cn,o=ql,Cn=n.stateNode.containerInfo,ql=!0,Qa(e,t,n),Cn=l,ql=o;break;case 0:case 11:case 14:case 15:ko(2,n,t),Xn||ko(4,n,t),Qa(e,t,n);break;case 1:Xn||(fa(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Nf(n,t,l)),Qa(e,t,n);break;case 21:Qa(e,t,n);break;case 22:Xn=(l=Xn)||n.memoizedState!==null,Qa(e,t,n),Xn=l;break;default:Qa(e,t,n)}}function Vf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{sr(e)}catch(n){sn(t,t.return,n)}}}function $f(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{sr(e)}catch(n){sn(t,t.return,n)}}function Uh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new _f),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new _f),t;default:throw Error(f(435,e.tag))}}function Vc(e,t){var n=Uh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=Ph.bind(null,e,l);l.then(o,o)}})}function Zl(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],s=e,h=t,w=h;e:for(;w!==null;){switch(w.tag){case 27:if(Ho(w.type)){Cn=w.stateNode,ql=!1;break e}break;case 5:Cn=w.stateNode,ql=!1;break e;case 3:case 4:Cn=w.stateNode.containerInfo,ql=!0;break e}w=w.return}if(Cn===null)throw Error(f(160));Ef(s,h,o),Cn=null,ql=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)If(t,e),t=t.sibling}var Ii=null;function If(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zl(t,e),Ql(e),l&4&&(ko(3,e,e.return),Qr(3,e),ko(5,e,e.return));break;case 1:Zl(t,e),Ql(e),l&512&&(Xn||n===null||fa(n,n.return)),l&64&&Za&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=Ii;if(Zl(t,e),Ql(e),l&512&&(Xn||n===null||fa(n,n.return)),l&4){var s=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":s=o.getElementsByTagName("title")[0],(!s||s[xi]||s[Pn]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(l),o.head.insertBefore(s,o.querySelector("head > title"))),fl(s,l,n),s[Pn]=e,_n(s),l=s;break e;case"link":var h=Ip("link","href",o).get(l+(n.href||""));if(h){for(var w=0;w<h.length;w++)if(s=h[w],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(w,1);break t}}s=o.createElement(l),fl(s,l,n),o.head.appendChild(s);break;case"meta":if(h=Ip("meta","content",o).get(l+(n.content||""))){for(w=0;w<h.length;w++)if(s=h[w],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(w,1);break t}}s=o.createElement(l),fl(s,l,n),o.head.appendChild(s);break;default:throw Error(f(468,l))}s[Pn]=e,_n(s),l=s}e.stateNode=l}else Pp(o,e.type,e.stateNode);else e.stateNode=$p(o,l,e.memoizedProps);else s!==l?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,l===null?Pp(o,e.type,e.stateNode):$p(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Xd(e,e.memoizedProps,n.memoizedProps)}break;case 27:Zl(t,e),Ql(e),l&512&&(Xn||n===null||fa(n,n.return)),n!==null&&l&4&&Xd(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Zl(t,e),Ql(e),l&512&&(Xn||n===null||fa(n,n.return)),e.flags&32){o=e.stateNode;try{yi(o,"")}catch(et){sn(e,e.return,et)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,Xd(e,o,n!==null?n.memoizedProps:o)),l&1024&&(Fd=!0);break;case 6:if(Zl(t,e),Ql(e),l&4){if(e.stateNode===null)throw Error(f(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(et){sn(e,e.return,et)}}break;case 3:if(td=null,o=Ii,Ii=Jc(t.containerInfo),Zl(t,e),Ii=o,Ql(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{sr(t.containerInfo)}catch(et){sn(e,e.return,et)}Fd&&(Fd=!1,Pf(e));break;case 4:l=Ii,Ii=Jc(e.stateNode.containerInfo),Zl(t,e),Ql(e),Ii=l;break;case 12:Zl(t,e),Ql(e);break;case 31:Zl(t,e),Ql(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Vc(e,l)));break;case 13:Zl(t,e),Ql(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ic=Se()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Vc(e,l)));break;case 22:o=e.memoizedState!==null;var N=n!==null&&n.memoizedState!==null,ee=Za,xe=Xn;if(Za=ee||o,Xn=xe||N,Zl(t,e),Xn=xe,Za=ee,Ql(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||N||Za||Xn||Cs(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){N=n=t;try{if(s=N.stateNode,o)h=s.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{w=N.stateNode;var je=N.memoizedProps.style,le=je!=null&&je.hasOwnProperty("display")?je.display:null;w.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(et){sn(N,N.return,et)}}}else if(t.tag===6){if(n===null){N=t;try{N.stateNode.nodeValue=o?"":N.memoizedProps}catch(et){sn(N,N.return,et)}}}else if(t.tag===18){if(n===null){N=t;try{var se=N.stateNode;o?Np(se,!0):Np(N.stateNode,!1)}catch(et){sn(N,N.return,et)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Vc(e,n))));break;case 19:Zl(t,e),Ql(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Vc(e,l)));break;case 30:break;case 21:break;default:Zl(t,e),Ql(e)}}function Ql(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Uf(l)){n=l;break}l=l.return}if(n==null)throw Error(f(160));switch(n.tag){case 27:var o=n.stateNode,s=Gd(e);Ec(e,s,o);break;case 5:var h=n.stateNode;n.flags&32&&(yi(h,""),n.flags&=-33);var w=Gd(e);Ec(e,w,h);break;case 3:case 4:var N=n.stateNode.containerInfo,ee=Gd(e);Ld(e,ee,N);break;default:throw Error(f(161))}}catch(xe){sn(e,e.return,xe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Pf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ka(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Of(e,t.alternate,t),t=t.sibling}function Cs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ko(4,t,t.return),Cs(t);break;case 1:fa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Nf(t,t.return,n),Cs(t);break;case 27:sc(t.stateNode);case 26:case 5:fa(t,t.return),Cs(t);break;case 22:t.memoizedState===null&&Cs(t);break;case 30:Cs(t);break;default:Cs(t)}e=e.sibling}}function Ja(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,s=t,h=s.flags;switch(s.tag){case 0:case 11:case 15:Ja(o,s,n),Qr(4,s);break;case 1:if(Ja(o,s,n),l=s,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(ee){sn(l,l.return,ee)}if(l=s,o=l.updateQueue,o!==null){var w=l.stateNode;try{var N=o.shared.hiddenCallbacks;if(N!==null)for(o.shared.hiddenCallbacks=null,o=0;o<N.length;o++)ca(N[o],w)}catch(ee){sn(l,l.return,ee)}}n&&h&64&&kf(s),Kr(s,s.return);break;case 27:Bf(s);case 26:case 5:Ja(o,s,n),n&&l===null&&h&4&&Mf(s),Kr(s,s.return);break;case 12:Ja(o,s,n);break;case 31:Ja(o,s,n),n&&h&4&&Vf(o,s);break;case 13:Ja(o,s,n),n&&h&4&&$f(o,s);break;case 22:s.memoizedState===null&&Ja(o,s,n),Kr(s,s.return);break;case 30:break;default:Ja(o,s,n)}t=t.sibling}}function qd(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Oa(n))}function Zd(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oa(e))}function Pi(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yf(e,t,n,l),t=t.sibling}function Yf(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Pi(e,t,n,l),o&2048&&Qr(9,t);break;case 1:Pi(e,t,n,l);break;case 3:Pi(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oa(e)));break;case 12:if(o&2048){Pi(e,t,n,l),e=t.stateNode;try{var s=t.memoizedProps,h=s.id,w=s.onPostCommit;typeof w=="function"&&w(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){sn(t,t.return,N)}}else Pi(e,t,n,l);break;case 31:Pi(e,t,n,l);break;case 13:Pi(e,t,n,l);break;case 23:break;case 22:s=t.stateNode,h=t.alternate,t.memoizedState!==null?s._visibility&2?Pi(e,t,n,l):Jr(e,t):s._visibility&2?Pi(e,t,n,l):(s._visibility|=2,Zs(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&qd(h,t);break;case 24:Pi(e,t,n,l),o&2048&&Zd(t.alternate,t);break;default:Pi(e,t,n,l)}}function Zs(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,h=t,w=n,N=l,ee=h.flags;switch(h.tag){case 0:case 11:case 15:Zs(s,h,w,N,o),Qr(8,h);break;case 23:break;case 22:var xe=h.stateNode;h.memoizedState!==null?xe._visibility&2?Zs(s,h,w,N,o):Jr(s,h):(xe._visibility|=2,Zs(s,h,w,N,o)),o&&ee&2048&&qd(h.alternate,h);break;case 24:Zs(s,h,w,N,o),o&&ee&2048&&Zd(h.alternate,h);break;default:Zs(s,h,w,N,o)}t=t.sibling}}function Jr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:Jr(n,l),o&2048&&qd(l.alternate,l);break;case 24:Jr(n,l),o&2048&&Zd(l.alternate,l);break;default:Jr(n,l)}t=t.sibling}}var ec=8192;function Qs(e,t,n){if(e.subtreeFlags&ec)for(e=e.child;e!==null;)Wf(e,t,n),e=e.sibling}function Wf(e,t,n){switch(e.tag){case 26:Qs(e,t,n),e.flags&ec&&e.memoizedState!==null&&vg(n,Ii,e.memoizedState,e.memoizedProps);break;case 5:Qs(e,t,n);break;case 3:case 4:var l=Ii;Ii=Jc(e.stateNode.containerInfo),Qs(e,t,n),Ii=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ec,ec=16777216,Qs(e,t,n),ec=l):Qs(e,t,n));break;default:Qs(e,t,n)}}function Xf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function tc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ll=l,Lf(l,e)}Xf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gf(e),e=e.sibling}function Gf(e){switch(e.tag){case 0:case 11:case 15:tc(e),e.flags&2048&&ko(9,e,e.return);break;case 3:tc(e);break;case 12:tc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,$c(e)):tc(e);break;default:tc(e)}}function $c(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ll=l,Lf(l,e)}Xf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ko(8,t,t.return),$c(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,$c(t));break;default:$c(t)}e=e.sibling}}function Lf(e,t){for(;ll!==null;){var n=ll;switch(n.tag){case 0:case 11:case 15:ko(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Oa(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,ll=l;else e:for(n=e;ll!==null;){l=ll;var o=l.sibling,s=l.return;if(Hf(l),l===n){ll=null;break e}if(o!==null){o.return=s,ll=o;break e}ll=s}}}var Bh={getCacheForType:function(e){var t=an(jn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return an(jn).controller.signal}},_h=typeof WeakMap=="function"?WeakMap:Map,tn=0,hn=null,$t=null,Lt=0,on=0,di=null,No=!1,Ks=!1,Qd=!1,eo=0,Bn=0,Mo=0,zs=0,Kd=0,ui=0,Js=0,nc=null,Kl=null,Jd=!1,Ic=0,Ff=0,Pc=1/0,Yc=null,Uo=null,Jn=0,Bo=null,er=null,to=0,eu=0,tu=null,qf=null,lc=0,nu=null;function fi(){return(tn&2)!==0&&Lt!==0?Lt&-Lt:_.T!==null?ru():pn()}function Zf(){if(ui===0)if((Lt&536870912)===0||Tt){var e=Pe;Pe<<=1,(Pe&3932160)===0&&(Pe=262144),ui=e}else ui=536870912;return e=Bl.current,e!==null&&(e.flags|=32),ui}function Jl(e,t,n){(e===hn&&(on===2||on===9)||e.cancelPendingCommit!==null)&&(tr(e,0),_o(e,Lt,ui,!1)),it(e,n),((tn&2)===0||e!==hn)&&(e===hn&&((tn&2)===0&&(zs|=n),Bn===4&&_o(e,Lt,ui,!1)),pa(e))}function Qf(e,t,n){if((tn&6)!==0)throw Error(f(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ga(e,t),o=l?Eh(e,t):iu(e,t,!0),s=l;do{if(o===0){Ks&&!l&&_o(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Oh(n)){o=iu(e,t,!1),s=!1;continue}if(o===2){if(s=t,e.errorRecoveryDisabledLanes&s)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var w=e;o=nc;var N=w.current.memoizedState.isDehydrated;if(N&&(tr(w,h).flags|=256),h=iu(w,h,!1),h!==2){if(Qd&&!N){w.errorRecoveryDisabledLanes|=s,zs|=s,o=4;break e}s=Kl,Kl=o,s!==null&&(Kl===null?Kl=s:Kl.push.apply(Kl,s))}o=h}if(s=!1,o!==2)continue}}if(o===1){tr(e,0),_o(e,t,0,!0);break}e:{switch(l=e,s=o,s){case 0:case 1:throw Error(f(345));case 4:if((t&4194048)!==t)break;case 6:_o(l,t,ui,!No);break e;case 2:Kl=null;break;case 3:case 5:break;default:throw Error(f(329))}if((t&62914560)===t&&(o=Ic+300-Se(),10<o)){if(_o(l,t,ui,!No),zn(l,0,!0)!==0)break e;to=t,l.timeoutHandle=Dp(Kf.bind(null,l,n,Kl,Yc,Jd,t,ui,zs,Js,No,s,"Throttled",-0,0),o);break e}Kf(l,n,Kl,Yc,Jd,t,ui,zs,Js,No,s,null,-0,0)}}break}while(!0);pa(e)}function Kf(e,t,n,l,o,s,h,w,N,ee,xe,je,le,se){if(e.timeoutHandle=-1,je=t.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hn},Wf(t,s,je);var et=(s&62914560)===s?Ic-Se():(s&4194048)===s?Ff-Se():0;if(et=mg(je,et),et!==null){to=s,e.cancelPendingCommit=et(op.bind(null,e,t,s,n,l,o,h,w,N,xe,je,null,le,se)),_o(e,s,h,!ee);return}}op(e,t,s,n,l,o,h,w,N)}function Oh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],s=o.getSnapshot;o=o.value;try{if(!Mn(s(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _o(e,t,n,l){t&=~Kd,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var s=31-In(o),h=1<<s;l[s]=-1,o&=~h}n!==0&&il(e,n,t)}function Wc(){return(tn&6)===0?(ic(0),!1):!0}function lu(){if($t!==null){if(on===0)var e=$t.return;else e=$t,Ml=wi=null,p(e),sa=null,Ia=0,e=$t;for(;e!==null;)Af(e.alternate,e),e=e.return;$t=null}}function tr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,ng(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),to=0,lu(),hn=e,$t=n=ml(e.current,null),Lt=t,on=0,di=null,No=!1,Ks=ga(e,t),Qd=!1,Js=ui=Kd=zs=Mo=Bn=0,Kl=nc=null,Jd=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-In(l),s=1<<o;t|=e[o],l&=~s}return eo=t,Xs(),n}function Jf(e,t){Ct=null,_.H=Fr,t===jo||t===Va?(t=Fs(),on=3):t===Pr?(t=Fs(),on=4):on=t===_d?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,di=t,$t===null&&(Bn=1,Uc(e,Sl(t,e.current)))}function ep(){var e=Bl.current;return e===null?!0:(Lt&4194048)===Lt?nl===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?e===nl:!1}function tp(){var e=_.H;return _.H=Fr,e===null?Fr:e}function np(){var e=_.A;return _.A=Bh,e}function Xc(){Bn=4,No||(Lt&4194048)!==Lt&&Bl.current!==null||(Ks=!0),(Mo&134217727)===0&&(zs&134217727)===0||hn===null||_o(hn,Lt,ui,!1)}function iu(e,t,n){var l=tn;tn|=2;var o=tp(),s=np();(hn!==e||Lt!==t)&&(Yc=null,tr(e,t)),t=!1;var h=Bn;e:do try{if(on!==0&&$t!==null){var w=$t,N=di;switch(on){case 8:lu(),h=6;break e;case 3:case 2:case 9:case 6:Bl.current===null&&(t=!0);var ee=on;if(on=0,di=null,nr(e,w,N,ee),n&&Ks){h=0;break e}break;default:ee=on,on=0,di=null,nr(e,w,N,ee)}}Hh(),h=Bn;break}catch(xe){Jf(e,xe)}while(!0);return t&&e.shellSuspendCounter++,Ml=wi=null,tn=l,_.H=o,_.A=s,$t===null&&(hn=null,Lt=0,Xs()),h}function Hh(){for(;$t!==null;)lp($t)}function Eh(e,t){var n=tn;tn|=2;var l=tp(),o=np();hn!==e||Lt!==t?(Yc=null,Pc=Se()+500,tr(e,t)):Ks=ga(e,t);e:do try{if(on!==0&&$t!==null){t=$t;var s=di;t:switch(on){case 1:on=0,di=null,nr(e,t,s,1);break;case 2:case 9:if(Ac(s)){on=0,di=null,ip(t);break}t=function(){on!==2&&on!==9||hn!==e||(on=7),pa(e)},s.then(t,t);break e;case 3:on=7;break e;case 4:on=5;break e;case 7:Ac(s)?(on=0,di=null,ip(t)):(on=0,di=null,nr(e,t,s,7));break;case 5:var h=null;switch($t.tag){case 26:h=$t.memoizedState;case 5:case 27:var w=$t;if(h?Yp(h):w.stateNode.complete){on=0,di=null;var N=w.sibling;if(N!==null)$t=N;else{var ee=w.return;ee!==null?($t=ee,Gc(ee)):$t=null}break t}}on=0,di=null,nr(e,t,s,5);break;case 6:on=0,di=null,nr(e,t,s,6);break;case 8:lu(),Bn=6;break e;default:throw Error(f(462))}}Vh();break}catch(xe){Jf(e,xe)}while(!0);return Ml=wi=null,_.H=l,_.A=o,tn=n,$t!==null?0:(hn=null,Lt=0,Xs(),Bn)}function Vh(){for(;$t!==null&&!Mt();)lp($t)}function lp(e){var t=Rf(e.alternate,e,eo);e.memoizedProps=e.pendingProps,t===null?Gc(e):$t=t}function ip(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Sf(n,t,t.pendingProps,t.type,void 0,Lt);break;case 11:t=Sf(n,t,t.pendingProps,t.type.render,t.ref,Lt);break;case 5:p(t);default:Af(n,t),t=$t=us(t,eo),t=Rf(n,t,eo)}e.memoizedProps=e.pendingProps,t===null?Gc(e):$t=t}function nr(e,t,n,l){Ml=wi=null,p(t),sa=null,Ia=0;var o=t.return;try{if(Rh(e,o,t,n,Lt)){Bn=1,Uc(e,Sl(n,e.current)),$t=null;return}}catch(s){if(o!==null)throw $t=o,s;Bn=1,Uc(e,Sl(n,e.current)),$t=null;return}t.flags&32768?(Tt||l===1?e=!0:Ks||(Lt&536870912)!==0?e=!1:(No=e=!0,(l===2||l===9||l===3||l===6)&&(l=Bl.current,l!==null&&l.tag===13&&(l.flags|=16384))),ap(t,e)):Gc(t)}function Gc(e){var t=e;do{if((t.flags&32768)!==0){ap(t,No);return}e=t.return;var n=kh(t.alternate,t,eo);if(n!==null){$t=n;return}if(t=t.sibling,t!==null){$t=t;return}$t=t=e}while(t!==null);Bn===0&&(Bn=5)}function ap(e,t){do{var n=Nh(e.alternate,e);if(n!==null){n.flags&=32767,$t=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){$t=e;return}$t=e=n}while(e!==null);Bn=6,$t=null}function op(e,t,n,l,o,s,h,w,N){e.cancelPendingCommit=null;do Lc();while(Jn!==0);if((tn&6)!==0)throw Error(f(327));if(t!==null){if(t===e.current)throw Error(f(177));if(s=t.lanes|t.childLanes,s|=At,gl(e,n,s,h,w,N),e===hn&&($t=hn=null,Lt=0),er=t,Bo=e,to=n,eu=s,tu=o,qf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Yh(jt,function(){return up(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,o=ne.p,ne.p=2,h=tn,tn|=4;try{Mh(e,t,n)}finally{tn=h,ne.p=o,_.T=l}}Jn=1,sp(),rp(),cp()}}function sp(){if(Jn===1){Jn=0;var e=Bo,t=er,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=_.T,_.T=null;var l=ne.p;ne.p=2;var o=tn;tn|=4;try{If(t,e);var s=xu,h=is(e.containerInfo),w=s.focusedElem,N=s.selectionRange;if(h!==w&&w&&w.ownerDocument&&Sc(w.ownerDocument.documentElement,w)){if(N!==null&&as(w)){var ee=N.start,xe=N.end;if(xe===void 0&&(xe=ee),"selectionStart"in w)w.selectionStart=ee,w.selectionEnd=Math.min(xe,w.value.length);else{var je=w.ownerDocument||document,le=je&&je.defaultView||window;if(le.getSelection){var se=le.getSelection(),et=w.textContent.length,gt=Math.min(N.start,et),un=N.end===void 0?gt:Math.min(N.end,et);!se.extend&&gt>un&&(h=un,un=gt,gt=h);var V=Ur(w,gt),O=Ur(w,un);if(V&&O&&(se.rangeCount!==1||se.anchorNode!==V.node||se.anchorOffset!==V.offset||se.focusNode!==O.node||se.focusOffset!==O.offset)){var J=je.createRange();J.setStart(V.node,V.offset),se.removeAllRanges(),gt>un?(se.addRange(J),se.extend(O.node,O.offset)):(J.setEnd(O.node,O.offset),se.addRange(J))}}}}for(je=[],se=w;se=se.parentNode;)se.nodeType===1&&je.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<je.length;w++){var be=je[w];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}ad=!!gu,xu=gu=null}finally{tn=o,ne.p=l,_.T=n}}e.current=t,Jn=2}}function rp(){if(Jn===2){Jn=0;var e=Bo,t=er,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=_.T,_.T=null;var l=ne.p;ne.p=2;var o=tn;tn|=4;try{Of(e,t.alternate,t)}finally{tn=o,ne.p=l,_.T=n}}Jn=3}}function cp(){if(Jn===4||Jn===3){Jn=0,bt();var e=Bo,t=er,n=to,l=qf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Jn=5:(Jn=0,er=Bo=null,dp(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Uo=null),ur(n),t=t.stateNode,$n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(hi,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=_.T,o=ne.p,ne.p=2,_.T=null;try{for(var s=e.onRecoverableError,h=0;h<l.length;h++){var w=l[h];s(w.value,{componentStack:w.stack})}}finally{_.T=t,ne.p=o}}(to&3)!==0&&Lc(),pa(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===nu?lc++:(lc=0,nu=e):lc=0,ic(0)}}function dp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Oa(t)))}function Lc(){return sp(),rp(),cp(),up()}function up(){if(Jn!==5)return!1;var e=Bo,t=eu;eu=0;var n=ur(to),l=_.T,o=ne.p;try{ne.p=32>n?32:n,_.T=null,n=tu,tu=null;var s=Bo,h=to;if(Jn=0,er=Bo=null,to=0,(tn&6)!==0)throw Error(f(331));var w=tn;if(tn|=4,Gf(s.current),Yf(s,s.current,h,n),tn=w,ic(0,!1),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(hi,s)}catch{}return!0}finally{ne.p=o,_.T=l,dp(e,t)}}function fp(e,t,n){t=Sl(n,t),t=Bd(e.stateNode,t,2),e=Vi(e,t,2),e!==null&&(it(e,2),pa(e))}function sn(e,t,n){if(e.tag===3)fp(e,e,n);else for(;t!==null;){if(t.tag===3){fp(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Uo===null||!Uo.has(l))){e=Sl(n,e),n=pf(2),l=Vi(t,n,2),l!==null&&(hf(n,l,t,e),it(l,2),pa(l));break}}t=t.return}}function au(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new _h;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(Qd=!0,o.add(n),e=$h.bind(null,e,t,n),t.then(e,e))}function $h(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,hn===e&&(Lt&n)===n&&(Bn===4||Bn===3&&(Lt&62914560)===Lt&&300>Se()-Ic?(tn&2)===0&&tr(e,0):Kd|=n,Js===Lt&&(Js=0)),pa(e)}function pp(e,t){t===0&&(t=Ds()),e=Il(e,t),e!==null&&(it(e,t),pa(e))}function Ih(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pp(e,n)}function Ph(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(f(314))}l!==null&&l.delete(t),pp(e,n)}function Yh(e,t){return Oe(e,t)}var Fc=null,lr=null,ou=!1,qc=!1,su=!1,Oo=0;function pa(e){e!==lr&&e.next===null&&(lr===null?Fc=lr=e:lr=lr.next=e),qc=!0,ou||(ou=!0,Xh())}function ic(e,t){if(!su&&qc){su=!0;do for(var n=!1,l=Fc;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var s=0;else{var h=l.suspendedLanes,w=l.pingedLanes;s=(1<<31-In(42|e)+1)-1,s&=o&~(h&~w),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,yp(l,s))}else s=Lt,s=zn(l,l===hn?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||ga(l,s)||(n=!0,yp(l,s));l=l.next}while(n);su=!1}}function Wh(){hp()}function hp(){qc=ou=!1;var e=0;Oo!==0&&tg()&&(e=Oo);for(var t=Se(),n=null,l=Fc;l!==null;){var o=l.next,s=gp(l,t);s===0?(l.next=null,n===null?Fc=o:n.next=o,o===null&&(lr=n)):(n=l,(e!==0||(s&3)!==0)&&(qc=!0)),l=o}Jn!==0&&Jn!==5||ic(e),Oo!==0&&(Oo=0)}function gp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var h=31-In(s),w=1<<h,N=o[h];N===-1?((w&n)===0||(w&l)!==0)&&(o[h]=cr(w,t)):N<=t&&(e.expiredLanes|=w),s&=~w}if(t=hn,n=Lt,n=zn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(on===2||on===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ft(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ga(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&ft(l),ur(n)){case 2:case 8:n=Et;break;case 32:n=jt;break;case 268435456:n=pl;break;default:n=jt}return l=xp.bind(null,e),n=Oe(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&ft(l),e.callbackPriority=2,e.callbackNode=null,2}function xp(e,t){if(Jn!==0&&Jn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Lc()&&e.callbackNode!==n)return null;var l=Lt;return l=zn(e,e===hn?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Qf(e,l,t),gp(e,Se()),e.callbackNode!=null&&e.callbackNode===n?xp.bind(null,e):null)}function yp(e,t){if(Lc())return null;Qf(e,t,!0)}function Xh(){lg(function(){(tn&6)!==0?Oe($e,Wh):hp()})}function ru(){if(Oo===0){var e=So;e===0&&(e=Xi,Xi<<=1,(Xi&261888)===0&&(Xi=256)),Oo=e}return Oo}function bp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Bt(""+e)}function vp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Gh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var s=bp((o[vn]||null).action),h=l.submitter;h&&(t=(t=h[vn]||null)?bp(t.formAction):h.getAttribute("formAction"),t!==null&&(s=t,h=null));var w=new va("action","action",null,l,o);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Oo!==0){var N=h?vp(o,h):new FormData(o);Dd(n,{pending:!0,data:N,method:o.method,action:s},null,N)}}else typeof s=="function"&&(w.preventDefault(),N=h?vp(o,h):new FormData(o),Dd(n,{pending:!0,data:N,method:o.method,action:s},s,N))},currentTarget:o}]})}}for(var cu=0;cu<$l.length;cu++){var du=$l[cu],Lh=du.toLowerCase(),Fh=du[0].toUpperCase()+du.slice(1);bl(Lh,"on"+Fh)}bl(kl,"onAnimationEnd"),bl(Ws,"onAnimationIteration"),bl(li,"onAnimationStart"),bl("dblclick","onDoubleClick"),bl("focusin","onFocus"),bl("focusout","onBlur"),bl(Br,"onTransitionRun"),bl(mi,"onTransitionStart"),bl(_r,"onTransitionCancel"),bl(ii,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function mp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var h=l.length-1;0<=h;h--){var w=l[h],N=w.instance,ee=w.currentTarget;if(w=w.listener,N!==s&&o.isPropagationStopped())break e;s=w,o.currentTarget=ee;try{s(o)}catch(xe){ai(xe)}o.currentTarget=null,s=N}else for(h=0;h<l.length;h++){if(w=l[h],N=w.instance,ee=w.currentTarget,w=w.listener,N!==s&&o.isPropagationStopped())break e;s=w,o.currentTarget=ee;try{s(o)}catch(xe){ai(xe)}o.currentTarget=null,s=N}}}}function It(e,t){var n=t[Ns];n===void 0&&(n=t[Ns]=new Set);var l=e+"__bubble";n.has(l)||(Sp(t,e,2,!1),n.add(l))}function uu(e,t,n){var l=0;t&&(l|=4),Sp(n,e,l,t)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function fu(e){if(!e[Zc]){e[Zc]=!0,yc.forEach(function(n){n!=="selectionchange"&&(qh.has(n)||uu(n,!1,e),uu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zc]||(t[Zc]=!0,uu("selectionchange",!1,t))}}function Sp(e,t,n,l){switch(Zp(t)){case 2:var o=jg;break;case 8:o=Tg;break;default:o=Ru}n=o.bind(null,t,n,e),o=void 0,!el||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function pu(e,t,n,l,o){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var w=l.stateNode.containerInfo;if(w===o)break;if(h===4)for(h=l.return;h!==null;){var N=h.tag;if((N===3||N===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;w!==null;){if(h=xa(w),h===null)return;if(N=h.tag,N===5||N===6||N===26||N===27){l=s=h;continue e}w=w.parentNode}}l=l.return}xl(function(){var ee=s,xe=Ni(n),je=[];e:{var le=rs.get(e);if(le!==void 0){var se=va,et=e;switch(e){case"keypress":if(En(n)===0)break e;case"keydown":case"keyup":se=jd;break;case"focusin":et="focus",se=El;break;case"focusout":et="blur",se=El;break;case"beforeblur":case"afterblur":se=El;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Fi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=qi;break;case kl:case Ws:case li:se=Go;break;case ii:se=Vs;break;case"scroll":case"scrollend":se=vr;break;case"wheel":se=wa;break;case"copy":case"cut":case"paste":se=Hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=ei;break;case"toggle":case"beforetoggle":se=Dl}var gt=(t&4)!==0,un=!gt&&(e==="scroll"||e==="scrollend"),V=gt?le!==null?le+"Capture":null:le;gt=[];for(var O=ee,J;O!==null;){var be=O;if(J=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||J===null||V===null||(be=Mi(O,V),be!=null&&gt.push(oc(O,be,J))),un)break;O=O.return}0<gt.length&&(le=new se(le,et,null,n,xe),je.push({event:le,listeners:gt}))}}if((t&7)===0){e:{if(le=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",le&&n!==zl&&(et=n.relatedTarget||n.fromElement)&&(xa(et)||et[ol]))break e;if((se||le)&&(le=xe.window===xe?xe:(le=xe.ownerDocument)?le.defaultView||le.parentWindow:window,se?(et=n.relatedTarget||n.toElement,se=ee,et=et?xa(et):null,et!==null&&(un=B(et),gt=et.tag,et!==un||gt!==5&&gt!==27&&gt!==6)&&(et=null)):(se=null,et=ee),se!==et)){if(gt=Bi,be="onMouseLeave",V="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(gt=ei,be="onPointerLeave",V="onPointerEnter",O="pointer"),un=se==null?le:Ms(se),J=et==null?le:Ms(et),le=new gt(be,O+"leave",se,n,xe),le.target=un,le.relatedTarget=J,be=null,xa(xe)===ee&&(gt=new gt(V,O+"enter",et,n,xe),gt.target=J,gt.relatedTarget=un,be=gt),un=be,se&&et)t:{for(gt=Zh,V=se,O=et,J=0,be=V;be;be=gt(be))J++;be=0;for(var ut=O;ut;ut=gt(ut))be++;for(;0<J-be;)V=gt(V),J--;for(;0<be-J;)O=gt(O),be--;for(;J--;){if(V===O||O!==null&&V===O.alternate){gt=V;break t}V=gt(V),O=gt(O)}gt=null}else gt=null;se!==null&&wp(je,le,se,gt,!1),et!==null&&un!==null&&wp(je,un,et,gt,!0)}}e:{if(le=ee?Ms(ee):window,se=le.nodeName&&le.nodeName.toLowerCase(),se==="select"||se==="input"&&le.type==="file")var Kt=Ta;else if(Ar(le))if(go)Kt=ts;else{Kt=Jo;var lt=Mr}else se=le.nodeName,!se||se.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?ee&&_s(ee.elementType)&&(Kt=Ta):Kt=es;if(Kt&&(Kt=Kt(e,ee))){kr(je,Kt,n,xe);break e}lt&&lt(e,le,ee),e==="focusout"&&ee&&le.type==="number"&&ee.memoizedProps.value!=null&&gr(le,"number",le.value)}switch(lt=ee?Ms(ee):window,e){case"focusin":(Ar(lt)||lt.contentEditable==="true")&&(za=lt,Ys=ee,Ji=null);break;case"focusout":Ji=Ys=za=null;break;case"mousedown":Ra=!0;break;case"contextmenu":case"mouseup":case"dragend":Ra=!1,os(je,n,xe);break;case"selectionchange":if(wc)break;case"keydown":case"keyup":os(je,n,xe)}var _t;if(vi)e:{switch(e){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else rl?Cr(e,n)&&(Ft="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ft="onCompositionStart");Ft&&(mc&&n.locale!=="ko"&&(rl||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&rl&&(_t=br()):(mn=xe,Xo="value"in mn?mn.value:mn.textContent,rl=!0)),lt=Qc(ee,Ft),0<lt.length&&(Ft=new uo(Ft,e,null,n,xe),je.push({event:Ft,listeners:lt}),_t?Ft.data=_t:(_t=cn(n),_t!==null&&(Ft.data=_t)))),(_t=ti?zr(e,n):Rr(e,n))&&(Ft=Qc(ee,"onBeforeInput"),0<Ft.length&&(lt=new uo("onBeforeInput","beforeinput",null,n,xe),je.push({event:lt,listeners:Ft}),lt.data=_t)),Gh(je,e,ee,n,xe)}mp(je,t)})}function oc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qc(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=Mi(e,n),o!=null&&l.unshift(oc(e,o,s)),o=Mi(e,t),o!=null&&l.push(oc(e,o,s))),e.tag===3)return l;e=e.return}return[]}function Zh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function wp(e,t,n,l,o){for(var s=t._reactName,h=[];n!==null&&n!==l;){var w=n,N=w.alternate,ee=w.stateNode;if(w=w.tag,N!==null&&N===l)break;w!==5&&w!==26&&w!==27||ee===null||(N=ee,o?(ee=Mi(n,s),ee!=null&&h.unshift(oc(n,ee,N))):o||(ee=Mi(n,s),ee!=null&&h.push(oc(n,ee,N)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var Qh=/\r\n?/g,Kh=/\u0000|\uFFFD/g;function jp(e){return(typeof e=="string"?e:""+e).replace(Qh,`
`).replace(Kh,"")}function Tp(e,t){return t=jp(t),jp(e)===t}function dn(e,t,n,l,o,s){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||yi(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&yi(e,""+l);break;case"className":vt(e,"class",l);break;case"tabIndex":vt(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":vt(e,n,l);break;case"style":ao(e,l,s);break;case"data":if(t!=="object"){vt(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Bt(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&dn(e,t,"name",o.name,o,null),dn(e,t,"formEncType",o.formEncType,o,null),dn(e,t,"formMethod",o.formMethod,o,null),dn(e,t,"formTarget",o.formTarget,o,null)):(dn(e,t,"encType",o.encType,o,null),dn(e,t,"method",o.method,o,null),dn(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Bt(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=Hn);break;case"onScroll":l!=null&&It("scroll",e);break;case"onScrollEnd":l!=null&&It("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(f(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(f(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=Bt(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":It("beforetoggle",e),It("toggle",e),Yo(e,"popover",l);break;case"xlinkActuate":Ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ut(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ut(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ut(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ut(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Yo(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Sd.get(n)||n,Yo(e,n,l))}}function hu(e,t,n,l,o,s){switch(n){case"style":ao(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(f(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(f(60));e.innerHTML=n}}break;case"children":typeof l=="string"?yi(e,l):(typeof l=="number"||typeof l=="bigint")&&yi(e,""+l);break;case"onScroll":l!=null&&It("scroll",e);break;case"onScrollEnd":l!=null&&It("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hr.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),s=e[vn]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,o),typeof l=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Yo(e,n,l)}}}function fl(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",e),It("load",e);var l=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,t));default:dn(e,t,s,h,n,null)}}o&&dn(e,t,"srcSet",n.srcSet,n,null),l&&dn(e,t,"src",n.src,n,null);return;case"input":It("invalid",e);var w=s=h=o=null,N=null,ee=null;for(l in n)if(n.hasOwnProperty(l)){var xe=n[l];if(xe!=null)switch(l){case"name":o=xe;break;case"type":h=xe;break;case"checked":N=xe;break;case"defaultChecked":ee=xe;break;case"value":s=xe;break;case"defaultValue":w=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(f(137,t));break;default:dn(e,t,l,xe,n,null)}}ba(e,s,w,N,ee,h,o,!1);return;case"select":It("invalid",e),l=h=s=null;for(o in n)if(n.hasOwnProperty(o)&&(w=n[o],w!=null))switch(o){case"value":s=w;break;case"defaultValue":h=w;break;case"multiple":l=w;default:dn(e,t,o,w,n,null)}t=s,n=h,e.multiple=!!l,t!=null?On(e,!!l,t,!1):n!=null&&On(e,!!l,n,!0);return;case"textarea":It("invalid",e),s=o=l=null;for(h in n)if(n.hasOwnProperty(h)&&(w=n[h],w!=null))switch(h){case"value":l=w;break;case"defaultValue":o=w;break;case"children":s=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(f(91));break;default:dn(e,t,h,w,n,null)}Bs(e,l,o,s);return;case"option":for(N in n)if(n.hasOwnProperty(N)&&(l=n[N],l!=null))switch(N){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:dn(e,t,N,l,n,null)}return;case"dialog":It("beforetoggle",e),It("toggle",e),It("cancel",e),It("close",e);break;case"iframe":case"object":It("load",e);break;case"video":case"audio":for(l=0;l<ac.length;l++)It(ac[l],e);break;case"image":It("error",e),It("load",e);break;case"details":It("toggle",e);break;case"embed":case"source":case"link":It("error",e),It("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in n)if(n.hasOwnProperty(ee)&&(l=n[ee],l!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,t));default:dn(e,t,ee,l,n,null)}return;default:if(_s(t)){for(xe in n)n.hasOwnProperty(xe)&&(l=n[xe],l!==void 0&&hu(e,t,xe,l,n,void 0));return}}for(w in n)n.hasOwnProperty(w)&&(l=n[w],l!=null&&dn(e,t,w,l,n,null))}function Jh(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,h=null,w=null,N=null,ee=null,xe=null;for(se in n){var je=n[se];if(n.hasOwnProperty(se)&&je!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":N=je;default:l.hasOwnProperty(se)||dn(e,t,se,null,l,je)}}for(var le in l){var se=l[le];if(je=n[le],l.hasOwnProperty(le)&&(se!=null||je!=null))switch(le){case"type":s=se;break;case"name":o=se;break;case"checked":ee=se;break;case"defaultChecked":xe=se;break;case"value":h=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(f(137,t));break;default:se!==je&&dn(e,t,le,se,l,je)}}wn(e,h,w,N,ee,xe,s,o);return;case"select":se=h=w=le=null;for(s in n)if(N=n[s],n.hasOwnProperty(s)&&N!=null)switch(s){case"value":break;case"multiple":se=N;default:l.hasOwnProperty(s)||dn(e,t,s,null,l,N)}for(o in l)if(s=l[o],N=n[o],l.hasOwnProperty(o)&&(s!=null||N!=null))switch(o){case"value":le=s;break;case"defaultValue":w=s;break;case"multiple":h=s;default:s!==N&&dn(e,t,o,s,l,N)}t=w,n=h,l=se,le!=null?On(e,!!n,le,!1):!!l!=!!n&&(t!=null?On(e,!!n,t,!0):On(e,!!n,n?[]:"",!1));return;case"textarea":se=le=null;for(w in n)if(o=n[w],n.hasOwnProperty(w)&&o!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:dn(e,t,w,null,l,o)}for(h in l)if(o=l[h],s=n[h],l.hasOwnProperty(h)&&(o!=null||s!=null))switch(h){case"value":le=o;break;case"defaultValue":se=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(f(91));break;default:o!==s&&dn(e,t,h,o,l,s)}Wo(e,le,se);return;case"option":for(var et in n)if(le=n[et],n.hasOwnProperty(et)&&le!=null&&!l.hasOwnProperty(et))switch(et){case"selected":e.selected=!1;break;default:dn(e,t,et,null,l,le)}for(N in l)if(le=l[N],se=n[N],l.hasOwnProperty(N)&&le!==se&&(le!=null||se!=null))switch(N){case"selected":e.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:dn(e,t,N,le,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in n)le=n[gt],n.hasOwnProperty(gt)&&le!=null&&!l.hasOwnProperty(gt)&&dn(e,t,gt,null,l,le);for(ee in l)if(le=l[ee],se=n[ee],l.hasOwnProperty(ee)&&le!==se&&(le!=null||se!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(f(137,t));break;default:dn(e,t,ee,le,l,se)}return;default:if(_s(t)){for(var un in n)le=n[un],n.hasOwnProperty(un)&&le!==void 0&&!l.hasOwnProperty(un)&&hu(e,t,un,void 0,l,le);for(xe in l)le=l[xe],se=n[xe],!l.hasOwnProperty(xe)||le===se||le===void 0&&se===void 0||hu(e,t,xe,le,l,se);return}}for(var V in n)le=n[V],n.hasOwnProperty(V)&&le!=null&&!l.hasOwnProperty(V)&&dn(e,t,V,null,l,le);for(je in l)le=l[je],se=n[je],!l.hasOwnProperty(je)||le===se||le==null&&se==null||dn(e,t,je,le,l,se)}function Cp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function eg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],s=o.transferSize,h=o.initiatorType,w=o.duration;if(s&&w&&Cp(h)){for(h=0,w=o.responseEnd,l+=1;l<n.length;l++){var N=n[l],ee=N.startTime;if(ee>w)break;var xe=N.transferSize,je=N.initiatorType;xe&&Cp(je)&&(N=N.responseEnd,h+=xe*(N<w?1:(w-ee)/(N-ee)))}if(--l,t+=8*(s+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var gu=null,xu=null;function Kc(e){return e.nodeType===9?e:e.ownerDocument}function zp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function yu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bu=null;function tg(){var e=window.event;return e&&e.type==="popstate"?e===bu?!1:(bu=e,!0):(bu=null,!1)}var Dp=typeof setTimeout=="function"?setTimeout:void 0,ng=typeof clearTimeout=="function"?clearTimeout:void 0,Ap=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof Ap<"u"?function(e){return Ap.resolve(null).then(e).catch(ig)}:Dp;function ig(e){setTimeout(function(){throw e})}function Ho(e){return e==="head"}function kp(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),sr(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")sc(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,sc(n);for(var s=n.firstChild;s;){var h=s.nextSibling,w=s.nodeName;s[xi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=h}}else n==="body"&&sc(e.ownerDocument.body);n=o}while(n);sr(t)}function Np(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function vu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":vu(n),Gi(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function ag(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[xi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Ai(e.nextSibling),e===null)break}return null}function og(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ai(e.nextSibling),e===null))return null;return e}function Mp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ai(e.nextSibling),e===null))return null;return e}function mu(e){return e.data==="$?"||e.data==="$~"}function Su(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function sg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Ai(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var wu=null;function Up(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Ai(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Bp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function _p(e,t,n){switch(t=Kc(n),e){case"html":if(e=t.documentElement,!e)throw Error(f(452));return e;case"head":if(e=t.head,!e)throw Error(f(453));return e;case"body":if(e=t.body,!e)throw Error(f(454));return e;default:throw Error(f(451))}}function sc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Gi(e)}var ki=new Map,Op=new Set;function Jc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var no=ne.d;ne.d={f:rg,r:cg,D:dg,C:ug,L:fg,m:pg,X:gg,S:hg,M:xg};function rg(){var e=no.f(),t=Wc();return e||t}function cg(e){var t=lo(e);t!==null&&t.tag===5&&t.type==="form"?Ku(t):no.r(e)}var ir=typeof document>"u"?null:document;function Hp(e,t,n){var l=ir;if(l&&typeof t=="string"&&t){var o=xt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Op.has(o)||(Op.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),fl(t,"link",e),_n(t),l.head.appendChild(t)))}}function dg(e){no.D(e),Hp("dns-prefetch",e,null)}function ug(e,t){no.C(e,t),Hp("preconnect",e,t)}function fg(e,t,n){no.L(e,t,n);var l=ir;if(l&&e&&t){var o='link[rel="preload"][as="'+xt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+xt(n.imageSizes)+'"]')):o+='[href="'+xt(e)+'"]';var s=o;switch(t){case"style":s=ar(e);break;case"script":s=or(e)}ki.has(s)||(e=I({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ki.set(s,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(rc(s))||t==="script"&&l.querySelector(cc(s))||(t=l.createElement("link"),fl(t,"link",e),_n(t),l.head.appendChild(t)))}}function pg(e,t){no.m(e,t);var n=ir;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+xt(l)+'"][href="'+xt(e)+'"]',s=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=or(e)}if(!ki.has(s)&&(e=I({rel:"modulepreload",href:e},t),ki.set(s,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(cc(s)))return}l=n.createElement("link"),fl(l,"link",e),_n(l),n.head.appendChild(l)}}}function hg(e,t,n){no.S(e,t,n);var l=ir;if(l&&e){var o=io(l).hoistableStyles,s=ar(e);t=t||"default";var h=o.get(s);if(!h){var w={loading:0,preload:null};if(h=l.querySelector(rc(s)))w.loading=5;else{e=I({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ki.get(s))&&ju(e,n);var N=h=l.createElement("link");_n(N),fl(N,"link",e),N._p=new Promise(function(ee,xe){N.onload=ee,N.onerror=xe}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ed(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:w},o.set(s,h)}}}function gg(e,t){no.X(e,t);var n=ir;if(n&&e){var l=io(n).hoistableScripts,o=or(e),s=l.get(o);s||(s=n.querySelector(cc(o)),s||(e=I({src:e,async:!0},t),(t=ki.get(o))&&Tu(e,t),s=n.createElement("script"),_n(s),fl(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function xg(e,t){no.M(e,t);var n=ir;if(n&&e){var l=io(n).hoistableScripts,o=or(e),s=l.get(o);s||(s=n.querySelector(cc(o)),s||(e=I({src:e,async:!0,type:"module"},t),(t=ki.get(o))&&Tu(e,t),s=n.createElement("script"),_n(s),fl(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function Ep(e,t,n,l){var o=(o=rt.current)?Jc(o):null;if(!o)throw Error(f(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ar(n.href),n=io(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ar(n.href);var s=io(o).hoistableStyles,h=s.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,h),(s=o.querySelector(rc(e)))&&!s._p&&(h.instance=s,h.state.loading=5),ki.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ki.set(e,n),s||yg(o,e,n,h.state))),t&&l===null)throw Error(f(528,""));return h}if(t&&l!==null)throw Error(f(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=or(n),n=io(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,e))}}function ar(e){return'href="'+xt(e)+'"'}function rc(e){return'link[rel="stylesheet"]['+e+"]"}function Vp(e){return I({},e,{"data-precedence":e.precedence,precedence:null})}function yg(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),fl(t,"link",n),_n(t),e.head.appendChild(t))}function or(e){return'[src="'+xt(e)+'"]'}function cc(e){return"script[async]"+e}function $p(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+xt(n.href)+'"]');if(l)return t.instance=l,_n(l),l;var o=I({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),_n(l),fl(l,"style",o),ed(l,n.precedence,e),t.instance=l;case"stylesheet":o=ar(n.href);var s=e.querySelector(rc(o));if(s)return t.state.loading|=4,t.instance=s,_n(s),s;l=Vp(n),(o=ki.get(o))&&ju(l,o),s=(e.ownerDocument||e).createElement("link"),_n(s);var h=s;return h._p=new Promise(function(w,N){h.onload=w,h.onerror=N}),fl(s,"link",l),t.state.loading|=4,ed(s,n.precedence,e),t.instance=s;case"script":return s=or(n.src),(o=e.querySelector(cc(s)))?(t.instance=o,_n(o),o):(l=n,(o=ki.get(s))&&(l=I({},n),Tu(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),_n(o),fl(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(f(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ed(l,n.precedence,e));return t.instance}function ed(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,s=o,h=0;h<l.length;h++){var w=l[h];if(w.dataset.precedence===t)s=w;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ju(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Tu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var td=null;function Ip(e,t,n){if(td===null){var l=new Map,o=td=new Map;o.set(n,l)}else o=td,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var s=n[o];if(!(s[xi]||s[Pn]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var h=s.getAttribute(t)||"";h=e+h;var w=l.get(h);w?w.push(s):l.set(h,[s])}}return l}function Pp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function bg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Yp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function vg(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=ar(l.href),s=t.querySelector(rc(o));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=nd.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,_n(s);return}s=t.ownerDocument||t,l=Vp(l),(o=ki.get(o))&&ju(l,o),s=s.createElement("link"),_n(s);var h=s;h._p=new Promise(function(w,N){h.onload=w,h.onerror=N}),fl(s,"link",l),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=nd.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Cu=0;function mg(e,t){return e.stylesheets&&e.count===0&&id(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&id(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Cu===0&&(Cu=62500*eg());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&id(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Cu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ld=null;function id(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ld=new Map,t.forEach(Sg,e),ld=null,nd.call(e))}function Sg(e,t){if(!(t.state.loading&4)){var n=ld.get(e);if(n)var l=n.get(null);else{n=new Map,ld.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var h=o[s];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),l=h)}l&&n.set(null,l)}o=t.instance,h=o.getAttribute("data-precedence"),s=n.get(h)||l,s===l&&n.set(null,o),n.set(h,o),this.count++,l=nd.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),s?s.parentNode.insertBefore(o,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var dc={$$typeof:A,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function wg(e,t,n,l,o,s,h,w,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=As(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.hiddenUpdates=As(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Wp(e,t,n,l,o,s,h,w,N,ee,xe,je){return e=new wg(e,t,n,h,N,ee,xe,je,w),t=1,s===!0&&(t|=24),s=cl(3,null,null,t),e.current=s,s.stateNode=e,t=hs(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:n,cache:t},Pa(s),e}function Xp(e){return e?(e=xo,e):xo}function Gp(e,t,n,l,o,s){o=Xp(o),l.context===null?l.context=o:l.pendingContext=o,l=ra(t),l.payload={element:n},s=s===void 0?null:s,s!==null&&(l.callback=s),n=Vi(e,l,t),n!==null&&(Jl(n,e,t),Ro(n,e,t))}function Lp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zu(e,t){Lp(e,t),(e=e.alternate)&&Lp(e,t)}function Fp(e){if(e.tag===13||e.tag===31){var t=Il(e,67108864);t!==null&&Jl(t,e,67108864),zu(e,67108864)}}function qp(e){if(e.tag===13||e.tag===31){var t=fi();t=ks(t);var n=Il(e,t);n!==null&&Jl(n,e,t),zu(e,t)}}var ad=!0;function jg(e,t,n,l){var o=_.T;_.T=null;var s=ne.p;try{ne.p=2,Ru(e,t,n,l)}finally{ne.p=s,_.T=o}}function Tg(e,t,n,l){var o=_.T;_.T=null;var s=ne.p;try{ne.p=8,Ru(e,t,n,l)}finally{ne.p=s,_.T=o}}function Ru(e,t,n,l){if(ad){var o=Du(l);if(o===null)pu(e,t,l,od,n),Qp(e,l);else if(zg(o,e,t,n,l))l.stopPropagation();else if(Qp(e,l),t&4&&-1<Cg.indexOf(e)){for(;o!==null;){var s=lo(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var h=Fe(s.pendingLanes);if(h!==0){var w=s;for(w.pendingLanes|=2,w.entangledLanes|=2;h;){var N=1<<31-In(h);w.entanglements[1]|=N,h&=~N}pa(s),(tn&6)===0&&(Pc=Se()+500,ic(0))}}break;case 31:case 13:w=Il(s,2),w!==null&&Jl(w,s,2),Wc(),zu(s,2)}if(s=Du(l),s===null&&pu(e,t,l,od,n),s===o)break;o=s}o!==null&&l.stopPropagation()}else pu(e,t,l,null,n)}}function Du(e){return e=Ni(e),Au(e)}var od=null;function Au(e){if(od=null,e=xa(e),e!==null){var t=B(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=q(t),e!==null)return e;e=null}else if(n===31){if(e=pe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return od=e,null}function Zp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case $e:return 2;case Et:return 8;case jt:case Fn:return 32;case pl:return 268435456;default:return 32}default:return 32}}var ku=!1,Eo=null,Vo=null,$o=null,uc=new Map,fc=new Map,Io=[],Cg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qp(e,t){switch(e){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":Vo=null;break;case"mouseover":case"mouseout":$o=null;break;case"pointerover":case"pointerout":uc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(t.pointerId)}}function pc(e,t,n,l,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[o]},t!==null&&(t=lo(t),t!==null&&Fp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function zg(e,t,n,l,o){switch(t){case"focusin":return Eo=pc(Eo,e,t,n,l,o),!0;case"dragenter":return Vo=pc(Vo,e,t,n,l,o),!0;case"mouseover":return $o=pc($o,e,t,n,l,o),!0;case"pointerover":var s=o.pointerId;return uc.set(s,pc(uc.get(s)||null,e,t,n,l,o)),!0;case"gotpointercapture":return s=o.pointerId,fc.set(s,pc(fc.get(s)||null,e,t,n,l,o)),!0}return!1}function Kp(e){var t=xa(e.target);if(t!==null){var n=B(t);if(n!==null){if(t=n.tag,t===13){if(t=q(n),t!==null){e.blockedOn=t,al(e.priority,function(){qp(n)});return}}else if(t===31){if(t=pe(n),t!==null){e.blockedOn=t,al(e.priority,function(){qp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Du(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);zl=l,n.target.dispatchEvent(l),zl=null}else return t=lo(n),t!==null&&Fp(t),e.blockedOn=n,!1;t.shift()}return!0}function Jp(e,t,n){sd(e)&&n.delete(t)}function Rg(){ku=!1,Eo!==null&&sd(Eo)&&(Eo=null),Vo!==null&&sd(Vo)&&(Vo=null),$o!==null&&sd($o)&&($o=null),uc.forEach(Jp),fc.forEach(Jp)}function rd(e,t){e.blockedOn===t&&(e.blockedOn=null,ku||(ku=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Rg)))}var cd=null;function eh(e){cd!==e&&(cd=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){cd===e&&(cd=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(Au(l||n)===null)continue;break}var s=lo(n);s!==null&&(e.splice(t,3),t-=3,Dd(s,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function sr(e){function t(N){return rd(N,e)}Eo!==null&&rd(Eo,e),Vo!==null&&rd(Vo,e),$o!==null&&rd($o,e),uc.forEach(t),fc.forEach(t);for(var n=0;n<Io.length;n++){var l=Io[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Io.length&&(n=Io[0],n.blockedOn===null);)Kp(n),n.blockedOn===null&&Io.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],s=n[l+1],h=o[vn]||null;if(typeof s=="function")h||eh(n);else if(h){var w=null;if(s&&s.hasAttribute("formAction")){if(o=s,h=s[vn]||null)w=h.formAction;else if(Au(o)!==null)continue}else w=h.action;typeof w=="function"?n[l+1]=w:(n.splice(l,3),l-=3),eh(n)}}}function th(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Nu(e){this._internalRoot=e}dd.prototype.render=Nu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(f(409));var n=t.current,l=fi();Gp(n,l,e,t,null,null)},dd.prototype.unmount=Nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gp(e.current,2,null,e,null,null),Wc(),t[ol]=null}};function dd(e){this._internalRoot=e}dd.prototype.unstable_scheduleHydration=function(e){if(e){var t=pn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Io.length&&t!==0&&t<Io[n].priority;n++);Io.splice(n,0,e),n===0&&Kp(e)}};var nh=u.version;if(nh!=="19.2.0")throw Error(f(527,nh,"19.2.0"));ne.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(f(188)):(e=Object.keys(e).join(","),Error(f(268,e)));return e=H(t),e=e!==null?me(e):null,e=e===null?null:e.stateNode,e};var Dg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ud.isDisabled&&ud.supportsFiber)try{hi=ud.inject(Dg),$n=ud}catch{}}return gc.createRoot=function(e,t){if(!d(e))throw Error(f(299));var n=!1,l="",o=cf,s=df,h=uf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Wp(e,1,!1,null,null,n,l,null,o,s,h,th),e[ol]=t.current,fu(e),new Nu(t)},gc.hydrateRoot=function(e,t,n){if(!d(e))throw Error(f(299));var l=!1,o="",s=cf,h=df,w=uf,N=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError),n.formState!==void 0&&(N=n.formState)),t=Wp(e,1,!0,t,n??null,l,o,N,s,h,w,th),t.context=Xp(null),n=t.current,l=fi(),l=ks(l),o=ra(l),o.callback=null,Vi(n,o,l),n=l,t.current.lanes=n,it(t,n),pa(t),e[ol]=t.current,fu(e),new dd(t)},gc.version="19.2.0",gc}var fh;function Vg(){if(fh)return Bu.exports;fh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(u){console.error(u)}}return c(),Bu.exports=Eg(),Bu.exports}var $g=Vg();function Ig(c,u){return c?u?{minX:Math.min(c.minX,u.minX),minY:Math.min(c.minY,u.minY),maxX:Math.max(c.maxX,u.maxX),maxY:Math.max(c.maxY,u.maxY)}:c:u}function Pg(c,u,b,f,d,B,q,pe,G){const H=c/2,me=u/2,I=[{x:-H,y:-me},{x:H,y:-me},{x:H,y:me},{x:-H,y:me}],ce=G*Math.PI/180,de=Math.sin(ce),P=Math.cos(ce);let Z=1/0,_e=1/0,He=-1/0,E=-1/0;for(const A of I){const U=A.x*q,M=A.y*pe,T=U*P-M*de,g=U*de+M*P,Y=b+d+T,ve=f+B+g;Y<Z&&(Z=Y),ve<_e&&(_e=ve),Y>He&&(He=Y),ve>E&&(E=ve)}return{minX:Z,minY:_e,maxX:He,maxY:E}}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wg=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,b,f)=>f?f.toUpperCase():b.toLowerCase()),ph=c=>{const u=Wg(c);return u.charAt(0).toUpperCase()+u.slice(1)},xh=(...c)=>c.filter((u,b,f)=>!!u&&u.trim()!==""&&f.indexOf(u)===b).join(" ").trim(),Xg=c=>{for(const u in c)if(u.startsWith("aria-")||u==="role"||u==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=C.forwardRef(({color:c="currentColor",size:u=24,strokeWidth:b=2,absoluteStrokeWidth:f,className:d="",children:B,iconNode:q,...pe},G)=>C.createElement("svg",{ref:G,...Gg,width:u,height:u,stroke:c,strokeWidth:f?Number(b)*24/Number(u):b,className:xh("lucide",d),...!B&&!Xg(pe)&&{"aria-hidden":"true"},...pe},[...q.map(([H,me])=>C.createElement(H,me)),...Array.isArray(B)?B:[B]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=(c,u)=>{const b=C.forwardRef(({className:f,...d},B)=>C.createElement(Lg,{ref:B,iconNode:u,className:xh(`lucide-${Yg(ph(c))}`,`lucide-${c}`,f),...d}));return b.displayName=ph(c),b};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],qg=yh("mouse-pointer",Fg);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Qg=yh("pen-line",Zg),xd="#2CA02C",bh="#F0E442",vh="#00BFC4",Eu="#000000",Kg="#00008b",yd="#FF0000",mh={DEFAULT_SIZE:24},vd={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},Jg={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},Rs={DEFAULT_SIZE:26},Sh={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function en(c){return Sh[c]?.validUnits||[]}function Qe(c){return Sh[c]?.defaultUnit||""}let rr=1,bd=Promise.resolve(0);function pi(){let c;bd=bd.then(b=>(c=b+1,rr=c+1,c));const u=rr;return rr=u+1,u}function Vu(c){bd=bd.then(()=>(rr=c,c-1)),rr=c}function hh(){return rr}function ex(c="id"){return`${c}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function gh(c){return Math.round(c*1e4)/1e4}function nn(c){return{x:gh(c.x),y:gh(c.y)}}function tx(c){return vd[c]?.defaultPins||2}function nx(c,u,b,f,d,B=mh.DEFAULT_SIZE){const q={id:ex("comp"),componentType:c,designator:"",layer:u,x:b,y:f,color:d,size:B,pinCount:tx(c),pinConnections:[],orientation:0};switch(q.pinConnections=new Array(q.pinCount).fill(""),(c==="Electrolytic Capacitor"||c==="Diode"||c==="Battery"||c==="ZenerDiode")&&(q.pinPolarities=new Array(q.pinCount).fill("")),c){case"Battery":return{...q,componentType:"Battery"};case"Capacitor":return{...q,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...q,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Diode":return{...q,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...q,componentType:"Fuse"};case"FerriteBead":return{...q,componentType:"FerriteBead"};case"Connector":return{...q,componentType:"Connector",gender:"N/A"};case"Jumper":return{...q,componentType:"Jumper"};case"Relay":return{...q,componentType:"Relay"};case"Inductor":return{...q,componentType:"Inductor"};case"Speaker":return{...q,componentType:"Speaker"};case"Motor":return{...q,componentType:"Motor"};case"PowerSupply":return{...q,componentType:"PowerSupply"};case"Transistor":return{...q,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...q,componentType:"Resistor"};case"ResistorNetwork":return{...q,componentType:"ResistorNetwork"};case"Thermistor":return{...q,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...q,componentType:"Switch"};case"Transformer":return{...q,componentType:"Transformer"};case"TestPoint":return{...q,componentType:"TestPoint"};case"IntegratedCircuit":return{...q,componentType:"IntegratedCircuit"};case"VacuumTube":return{...q,componentType:"VacuumTube"};case"VariableResistor":return{...q,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...q,componentType:"Crystal"};case"ZenerDiode":return{...q,componentType:"ZenerDiode"};default:return{...q,componentType:"Resistor"}}}function Iu(c,u,b){const f=c.componentType==="Electrolytic Capacitor"||c.componentType==="Diode"||c.componentType==="Battery"||c.componentType==="ZenerDiode",d=c.componentType==="Capacitor"&&"dielectric"in c&&c.dielectric==="Tantalum";if(!(f||d)||c.pinCount!==2||!(u.length===2&&u[0]&&u[0].trim()!==""&&u[1]&&u[1].trim()!==""))return null;const q=ce=>{const de=parseInt(ce,10);if(isNaN(de))return null;for(const P of b)if((P.type==="via"||P.type==="pad")&&P.points.length>0){const Z=P.points[0];if(Z.id===de)return{x:Z.x,y:Z.y}}return null},pe=q(u[0]),G=q(u[1]);if(!pe||!G)return null;const H=Math.hypot(c.x-pe.x,c.y-pe.y),me=Math.hypot(c.x-G.x,c.y-G.y),I=["",""];return H<me?(I[0]="-",I[1]="+"):(I[0]="+",I[1]="-"),I}class lx{parent=new Map;rank=new Map;find(u){return this.parent.has(u)?(this.parent.get(u)!==u&&this.parent.set(u,this.find(this.parent.get(u))),this.parent.get(u)):(this.parent.set(u,u),this.rank.set(u,0),u)}union(u,b){const f=this.find(u),d=this.find(b);if(f===d)return;const B=this.rank.get(f)||0,q=this.rank.get(d)||0;B<q?this.parent.set(f,d):B>q?this.parent.set(d,f):(this.parent.set(d,f),this.rank.set(f,B+1))}getGroups(){const u=new Map;for(const b of this.parent.keys()){const f=this.find(b);u.has(f)||u.set(f,[]),u.get(f).push(b)}return u}}function wh(c){if(!c)return"UNKNOWN";let u=c.trim();u=u.replace(/\s*(VDC|VAC)\s*$/i,""),u=u.replace(/\s*(DC|AC)\s*$/i,""),u=u.replace(/\s*V\s*$/i,"");const b=u.match(/^([+-])?/),f=b&&b[1]||"+",d=u.match(/(\d+\.?\d*)/);if(!d)return c.trim();let B=d[1];if(B.includes(".")){const q=B.split("."),pe=q[0],H=(q[1]||"0").replace(/0+$/,"")||"0";B=`${pe}V${H}`}return`${f}${B}V`}function ix(c,u,b,f,d){const B=new Map;let q=0,pe=0,G=0,H=0;for(const de of c)if((de.type==="via"||de.type==="pad")&&de.points.length>0){const P=de.points[0];if(P.id!==void 0)if(!B.has(P.id))B.set(P.id,{id:P.id,type:de.type==="via"?"via":"pad",x:P.x,y:P.y}),de.type==="via"?q++:pe++;else{const Z=B.get(P.id);Z.type==="trace_point"&&(H++,Z.type=de.type==="via"?"via":"pad")}}else if(de.type==="trace"){for(const P of de.points)if(P.id!==void 0)if(!B.has(P.id))B.set(P.id,{id:P.id,type:"trace_point",x:P.x,y:P.y}),G++;else{const Z=B.get(P.id);(Z.type==="via"||Z.type==="pad")&&H++}}console.log(`[Connectivity] Added ${q} vias, ${pe} pads, ${G} trace points to graph`),H>0&&console.log(`[Connectivity] Found ${H} nodes where vias/pads share Node IDs with trace points (automatic connection)`);for(const de of b)if(de.pointId!==void 0){const P=d.find(Z=>Z.id===de.powerBusId);B.set(de.pointId,{id:de.pointId,type:"power",x:de.x,y:de.y,voltage:P?.voltage||de.type||"UNKNOWN",powerBusId:de.powerBusId})}for(const de of f){const P=de;P.pointId!==void 0&&B.set(P.pointId,{id:P.pointId,type:"ground",x:de.x,y:de.y})}let me=0,I=0,ce=0;for(const de of u){const P=de.abbreviation?.trim()||de.designator?.trim();if(P)for(let Z=0;Z<de.pinCount;Z++){const _e=de.pinConnections?.[Z]||"";if(_e&&_e.trim()!==""){const He=parseInt(_e.trim(),10);if(!isNaN(He)&&He>0)if(me++,!B.has(He))B.set(He,{id:He,type:"component_pin",x:de.x,y:de.y,componentId:de.id,pinIndex:Z}),ce++,console.warn(`[Connectivity] Component ${P} pin ${Z+1}: Node ID ${He} does NOT exist in vias/pads/traces - creating isolated component pin node`);else{const E=B.get(He),A=E.type;E.componentId=de.id,E.pinIndex=Z,E.type="component_pin",I++,console.log(`[Connectivity] Component ${P} pin ${Z+1}: Connected to existing Node ID ${He} (was ${A})`)}}}}return console.log(`[Connectivity] Component pins: ${me} total, ${I} connected to existing nodes, ${ce} isolated (no matching via/pad/trace)`),B}function ax(c,u){const b=new lx;let f=0,d=0;for(const[me,I]of u)c.has(me)&&c.has(I)?(b.union(me,I),f++):(c.has(me)||d++,c.has(I)||d++);console.log(`[Connectivity] Union-find: Processed ${u.length} connections, ${f} valid, ${d} missing nodes`);const B=[];for(const[me,I]of c)I.type==="ground"&&B.push(me);if(B.length>0)if(B.length>1){const me=B[0];for(let I=1;I<B.length;I++)b.union(me,B[I]);console.log(`[Connectivity] Unified ${B.length} ground nodes into a single net (common ground plane)`)}else console.log("[Connectivity] Found 1 ground node (common ground plane)");const q=new Map;for(const[me,I]of c)if(I.type==="power"&&I.voltage){const ce=wh(I.voltage);q.has(ce)||q.set(ce,[]),q.get(ce).push(me)}for(const[me,I]of q)if(I.length>0)if(I.length>1){const ce=I[0];for(let de=1;de<I.length;de++)b.union(ce,I[de]);console.log(`[Connectivity] Unified ${I.length} power nodes with voltage "${me}" into a single net (common power bus)`)}else console.log(`[Connectivity] Found 1 power node with voltage "${me}" (common power bus)`);for(const me of c.keys())b.find(me);const pe=b.getGroups(),G=new Map;console.log(`[Connectivity] Union-find created ${pe.size} net groups`);const H=new Map;for(const[,me]of pe){const I=me.length;H.set(I,(H.get(I)||0)+1)}console.log("[Connectivity] Net size distribution:",Array.from(H.entries()).sort((me,I)=>I[0]-me[0]).slice(0,10));for(const[me,I]of pe){const ce=I.map(de=>c.get(de)).filter(de=>de!==void 0);G.set(me,ce)}return G}function ox(c,u){const b=new Map;let f=1;for(const[d,B]of c){if(B.some(G=>G.type==="ground")){b.set(d,"GND"),console.log(`[NetNames] Net ${d}: Labeled as GND (contains ${B.filter(G=>G.type==="ground").length} ground node(s), ${B.filter(G=>G.type==="via"||G.type==="pad").length} via/pad node(s) sharing same Node ID)`);continue}const pe=B.filter(G=>G.type==="power");if(pe.length>0){const G=pe[0].voltage||"UNKNOWN",H=wh(G);b.set(d,H);const me=B.filter(I=>I.type==="via"||I.type==="pad").length;console.log(`[NetNames] Net ${d}: Labeled as ${H} (contains ${pe.length} power node(s), ${me} via/pad node(s) sharing same Node ID)`);continue}b.set(d,`N$${f++}`)}return b}function Wu(c){if(!c)return"UNKNOWN";let u=c.trim();u=u.replace(/\s*(VDC|VAC)\s*$/i,""),u=u.replace(/\s*(DC|AC)\s*$/i,""),u=u.replace(/\s*V\s*$/i,"");const b=u.match(/^([+-])?/),f=b&&b[1]||"+",d=u.match(/(\d+\.?\d*)/);if(!d)return c.trim();let B=d[1];if(B.includes(".")){const q=B.split("."),pe=q[0],H=(q[1]||"0").replace(/0+$/,"")||"0";B=`${pe}V${H}`}return`${f}${B}V`}function Pu(c){return Wu(c)}function fd(c,u,b,f){if(u==="power"){const B=c[u]||"";return typeof B=="string"&&B.trim()!==""?{value:B.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[u]!==void 0||c[b]!==void 0)return{value:c[u]||"",unit:c[b]||f};const d=c[u]||"";if(typeof d=="string"&&d.trim()!==""){const B=d.trim().match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(B)return{value:B[1],unit:B[2]||""};const q=d.trim().match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return q?{value:q[1],unit:q[2]||""}:{value:d.trim(),unit:""}}return{value:"",unit:f}}function pd(c,u){return!c||c.trim()===""?"":!u||u.trim()===""?c.trim():`${c.trim()}${u.trim()}`}function hd(c){return{resistance:"",capacitance:"F",inductance:"H",voltage:"V",current:"A",power:"W",impedance:"",capacity:"mAh",esr:"",coilVoltage:"V",inputVoltage:"V",outputVoltage:"V"}[c]||""}function sx(c){if(c.componentType==="Resistor"&&"resistance"in c){const{value:f,unit:d}=fd(c,"resistance","resistanceUnit",hd("resistance"));if(f&&f.trim()!=="")return pd(f,d)}if(c.componentType==="Capacitor"&&"capacitance"in c){const{value:f,unit:d}=fd(c,"capacitance","capacitanceUnit",hd("capacitance"));if(f&&f.trim()!=="")return pd(f,d)}if(c.componentType==="Electrolytic Capacitor"&&"capacitance"in c){const{value:f,unit:d}=fd(c,"capacitance","capacitanceUnit",hd("capacitance"));if(f&&f.trim()!=="")return pd(f,d)}if(c.componentType==="Inductor"&&"inductance"in c){const{value:f,unit:d}=fd(c,"inductance","inductanceUnit",hd("inductance"));if(f&&f.trim()!=="")return pd(f,d)}const u=c.partName?.trim();if(u&&u!=="")return u;const b=c.partNumber?.trim();return b&&b!==""?b:c.componentType}function jh(c,u,b,f){const d=new Map;for(const I of u.keys())d.has(I)||d.set(I,new Set);for(const I of b)if(I.type==="trace"&&I.points.length>=2)for(let ce=0;ce<I.points.length-1;ce++){const de=I.points[ce],P=I.points[ce+1];if(de&&P&&de.id!==void 0&&de.id!==null&&P.id!==void 0&&P.id!==null){const Z=de.id,_e=P.id;u.has(Z)&&u.has(_e)&&(d.has(Z)||d.set(Z,new Set),d.has(_e)||d.set(_e,new Set),d.get(Z).add(_e),d.get(_e).add(Z))}}const B=new Set,q=d.get(c);if(q)for(const I of q){const ce=u.get(I);ce&&ce.type!=="trace_point"&&B.add(I)}const pe=[],G=u.get(c);if(G&&G.type==="component_pin"&&G.componentId&&G.pinIndex!==void 0){const I=f.get(G.componentId);I&&pe.push({designator:I,pin:(G.pinIndex||0)+1})}for(const I of B){const ce=u.get(I);if(ce&&ce.type==="component_pin"&&ce.componentId&&ce.pinIndex!==void 0){const de=f.get(ce.componentId);de&&pe.push({designator:de,pin:(ce.pinIndex||0)+1})}}const H=new Map;for(const I of pe){const ce=`${I.designator}:${I.pin}`;H.has(ce)||H.set(ce,I)}const me=Array.from(H.values()).sort((I,ce)=>I.designator!==ce.designator?I.designator.localeCompare(ce.designator):I.pin-ce.pin);return{directNeighborIds:Array.from(B).sort((I,ce)=>I-ce),componentPins:me}}function rx(c,u,b,f){const d=u.get(c);if(!d)return!1;if(d.type==="component_pin")return!0;const{directNeighborIds:B}=jh(c,u,b,f);for(const q of B){const pe=u.get(q);if(pe&&pe.type==="component_pin")return!0}return!1}function cx(c,u,b,f,d){const B=new Map;for(const pe of f){let G=pe.designator?.trim()||pe.abbreviation?.trim();G&&(G==="?"||G==="??"||G==="***"||G==="****"||G==="*")&&(G=""),G&&G.length>0&&B.set(pe.id,G)}const q=[];q.push("Node ID,Node Type,Connected Node IDs,Connected Components,Connected Component Pins");for(const[pe,G]of c){if(G.type==="trace_point"||!rx(pe,c,d,B))continue;let H;for(const[T,g]of u)if(g.some(Y=>Y.id===pe)){H=T;break}const me=H?u.get(H)||[]:[];let I;const ce=me.some(T=>T.type==="ground"),de=me.filter(T=>T.type==="power");if(G.type==="via"||G.type==="pad")if(ce)I="Ground";else if(de.length>0){const T=de[0].voltage||"UNKNOWN";I=`Power ${Pu(T)}`}else I="Signal";else if(I=dx(G),ce)I="Ground";else if(de.length>0&&G.type==="component_pin"){const T=de[0].voltage||"UNKNOWN";I=`Power ${Pu(T)}`}const P=jh(pe,c,d,B),Z=P.directNeighborIds,_e=P.componentPins,He=Array.from(new Set(_e.map(T=>T.designator))).sort(),E=Z.length>0?Z.join(";"):"",A=He.length>0?He.join(";"):"",U=_e.length>0?_e.map(T=>`${T.designator}:${T.pin}`).join(";"):"",M=T=>T.includes(",")||T.includes('"')||T.includes(`
`)||T.includes(";")?`"${T.replace(/"/g,'""')}"`:T;q.push([pe.toString(),M(I),M(E),M(A),M(U)].join(","))}return q.join(`
`)}function dx(c){switch(c.type){case"via":return"via";case"pad":return"pad";case"trace_point":return"trace_point";case"ground":return"GND";case"power":return c.voltage?`Power ${Wu(c.voltage)}`:"Power";case"component_pin":return"component_pin";default:return"unknown"}}function ux(c,u,b,f,d){const B=ix(u,c,b,f,d),q=Array.from(B.values()).filter(te=>te.type==="component_pin");console.log(`[Schematic] Component pin nodes in graph: ${q.length}`),q.length>0&&console.log("[Schematic] Sample component pin nodes:",q.slice(0,5).map(te=>`Node ID ${te.id} (compId: ${te.componentId}, pinIndex: ${te.pinIndex})`));const pe=[];for(const te of u)if(te.type==="trace"&&te.points.length>=2)for(let he=0;he<te.points.length-1;he++){const Te=te.points[he],oe=te.points[he+1];Te&&oe&&Te.id!==void 0&&oe.id!==void 0&&Te.id!==oe.id&&pe.push([Te.id,oe.id])}console.log(`[Schematic] Trace connections: ${pe.length} (connecting nodes with different Node IDs)`);const G=ax(B,pe),H=ox(G);console.log(`[Schematic] Net groups created: ${G.size}`),console.log(`
[Schematic Analysis] ========================================`),console.log("[Schematic Analysis] Starting comprehensive node tree analysis"),console.log("[Schematic Analysis] ========================================");const me=new Map;for(const te of c){let he=te.designator?.trim()||te.abbreviation?.trim();he&&(he==="?"||he==="??"||he==="***"||he==="****"||he==="*")&&(he=""),he&&he.length>0&&me.set(te.id,he)}const I=[],ce=new Map,de=[];for(const[te,he]of G){const Te=H.get(te)||`N$${te}`;if(he.filter(Ue=>Ue.type==="ground").length>0){I.push({netId:te,nodeCount:he.length,nodeIds:he.map(Ue=>Ue.id)});continue}const Ze=he.filter(Ue=>Ue.type==="power");if(Ze.length>0){const Ue=new Map;for(const ke of Ze)if(ke.voltage){const Be=Wu(ke.voltage);Ue.has(Be)||Ue.set(Be,[]),Ue.get(Be).push(ke)}for(const[ke]of Ue)ce.has(ke)||ce.set(ke,[]),ce.get(ke).push({netId:te,nodeCount:he.length,nodeIds:he.map(Be=>Be.id)});continue}const ge=[];for(const Ue of he)if(Ue.type==="component_pin"&&Ue.componentId&&Ue.pinIndex!==void 0){const ke=me.get(Ue.componentId);ke&&ge.push({designator:ke,pin:(Ue.pinIndex||0)+1,nodeId:Ue.id})}(ge.length>0||he.length>0)&&de.push({netId:te,netName:Te,componentPins:ge,nodeCount:he.length})}if(console.log(`
[Schematic Analysis] GROUND ANALYSIS:`),I.length===0)console.log("  No ground nets found");else if(I.length===1)console.log("   Single common ground plane identified"),console.log(`    - Net ID: ${I[0].netId}`),console.log(`    - Total nodes: ${I[0].nodeCount}`),console.log(`    - All ${I[0].nodeCount} ground points are connected`);else{console.log(`   WARNING: Multiple ground nets found (${I.length})`);for(const te of I)console.log(`    - Net ID ${te.netId}: ${te.nodeCount} nodes`);console.log("  Note: All ground points should be in a single net (common ground plane)")}if(console.log(`
[Schematic Analysis] POWER BUS ANALYSIS:`),ce.size===0)console.log("  No power buses found");else{console.log(`   Found ${ce.size} distinct power bus(es) by voltage:`);for(const[te,he]of ce)if(console.log(`
  Power Bus: ${te}`),he.length===1)console.log(`    - Single net (Net ID: ${he[0].netId})`),console.log(`    - Total nodes: ${he[0].nodeCount}`),console.log(`    - All power nodes at ${te} are connected`);else{console.log(`    -  WARNING: ${te} appears in ${he.length} separate nets:`);for(const Te of he)console.log(`      * Net ID ${Te.netId}: ${Te.nodeCount} nodes`);console.log("    - Note: All power nodes with the same voltage should be in a single net")}}console.log(`
[Schematic Analysis] COMPONENT CONNECTIONS:`);const P=new Map;for(const te of de)for(const he of te.componentPins)P.has(he.designator)||P.set(he.designator,[]),P.get(he.designator).push({pin:he.pin,netName:te.netName,nodeId:he.nodeId});if(console.log(`  Total components with connections: ${P.size}`),P.size>0){console.log("  Sample component connections (first 10):");let te=0;for(const[he,Te]of P){if(te++>=10)break;const oe=Te.map(Ze=>`pin${Ze.pin}${Ze.netName}`).join(", ");console.log(`    - ${he}: ${Te.length} pins connected (${oe})`)}}console.log(`
[Schematic Analysis] SIGNAL NET SUMMARY:`);const Z=de.filter(te=>te.componentPins.length>0),_e=de.filter(te=>te.componentPins.length>=2);if(console.log(`  - Total signal nets: ${de.length}`),console.log(`  - Nets with component pins: ${Z.length}`),console.log(`  - Nets with 2+ component pins: ${_e.length}`),console.log(`  - Isolated nets (no component pins): ${de.length-Z.length}`),_e.length>0){console.log(`
  Sample signal nets with 2+ pins (first 5):`);let te=0;for(const he of _e){if(te++>=5)break;const Te=he.componentPins.map(oe=>`${oe.designator}:pin${oe.pin}`).join(", ");console.log(`    - ${he.netName}: ${he.componentPins.length} pins (${Te})`)}}if(console.log(`
[Schematic Analysis] ========================================`),console.log("[Schematic Analysis] Analysis complete"),console.log(`[Schematic Analysis] ========================================
`),q.length>0){const te=[];for(const he of q){let Te=!1;for(const[,oe]of G)if(oe.some(Ze=>Ze.id===he.id)){Te=!0;break}if(!Te){const oe=c.find(ge=>ge.id===he.componentId),Ze=oe&&(oe.abbreviation?.trim()||oe.designator?.trim())||"UNKNOWN";te.push({compId:he.componentId||"unknown",designator:Ze,pinIndex:he.pinIndex||0,nodeId:he.id})}}if(te.length>0){console.warn(`[Schematic] Found ${te.length} isolated component pins (not in any net):`);for(const he of te.slice(0,10))console.warn(`  - ${he.designator} pin ${he.pinIndex+1} at Node ID ${he.nodeId}`)}else console.log("[Schematic] All component pins are in nets")}const He=new Map;for(const te of c){let he=te.designator?.trim()||te.abbreviation?.trim();he&&(he==="?"||he==="??"||he==="***"||he==="****"||he==="*")&&(he=""),he&&he.length>0?(He.set(te.id,he),console.log(`[Schematic] Mapped component ${te.id} to designator "${he}"`)):console.warn(`[Schematic] Component ${te.id} (type: ${te.componentType}) has no valid designator`)}console.log(`[Schematic] Component ID to designator map: ${He.size} components`);const E=[];let A=0,U=0;const M=new Map;for(const[te,he]of G){A++;const Te=[];for(const oe of he)oe.type==="component_pin"&&oe.componentId&&oe.pinIndex!==void 0&&(Te.push(oe),U++);Te.length>0&&M.set(te,Te)}for(const[te,he]of G){const Te=H.get(te)||`N$${te}`,oe=[];let Ze=!1,ge=!1,Ue,ke=0,Be=0;for(const Oe of he)if(Oe.type==="component_pin"&&Oe.componentId&&Oe.pinIndex!==void 0){const ft=He.get(Oe.componentId);if(ft)oe.push({designator:ft,pin:(Oe.pinIndex||0)+1});else{const Mt=c.find(Se=>Se.id===Oe.componentId),bt=Mt?Mt.designator?.trim()||Mt.abbreviation?.trim()||"NONE":"NOT_FOUND";console.warn(`[Schematic] Component pin found but no designator in map for componentId: ${Oe.componentId}, component designator: "${bt}", node: Node ID ${Oe.id}, pinIndex: ${Oe.pinIndex}`)}}else if(Oe.type==="power"){Ze=!0;const ft=Oe.voltage||Ue||"";ft&&(Ue=Pu(ft))}else Oe.type==="ground"?ge=!0:Oe.type==="via"?ke++:Oe.type==="trace_point"&&Be++;E.push({name:Te,componentPins:oe,hasPower:Ze,hasGround:ge,powerVoltage:Ue,viaCount:ke,tracePointCount:Be})}console.log(`[Schematic] Total net groups: ${A}, Component pins found: ${U}`),console.log(`[Schematic] Nets with component pins: ${M.size}`),console.log(`[Schematic] Generated ${E.length} total nets (including power/ground and single-pin connections)`);const T=E.filter(te=>te.componentPins.length>=2).length,g=E.filter(te=>te.hasPower).length,Y=E.filter(te=>te.hasGround).length;if(console.log(`[Schematic] - ${T} nets with 2+ component pins`),console.log(`[Schematic] - ${g} power nets`),console.log(`[Schematic] - ${Y} ground nets`),M.size>0){console.log("[Schematic] Sample nets with component pins:");let te=0;for(const[he,Te]of M){if(te++>=5)break;const oe=H.get(he)||`N$${he}`,Ze=Te.map(ge=>`${He.get(ge.componentId)||"unknown"}:pin${(ge.pinIndex||0)+1}@NodeID${ge.id}`);console.log(`  Net ${oe} (root Node ID ${he}): ${Te.length} pins - ${Ze.join(", ")}`)}}E.length>0?console.log(`[Schematic] First net: ${E[0].name} with ${E[0].componentPins.length} pins:`,E[0].componentPins):(console.warn("[Schematic] No nets with 2+ component pins found! Each component pin is in its own net."),console.warn("[Schematic] This suggests component pins are not connected through traces/vias."));const ve=new Map,nt=c.filter(te=>{let he=te.designator?.trim()||te.abbreviation?.trim();return he&&(he==="?"||he==="??"||he==="***"||he==="****"||he==="*")&&(he=""),!!he&&he.length>0}),Ke=()=>{const te=new Map;for(const he of nt){const Te=he.designator?.trim()||he.abbreviation?.trim();Te&&Te.length>0&&te.set(Te,new Set)}for(const he of E)if(he.componentPins.length>=2){const Te=he.componentPins.map(oe=>oe.designator);for(let oe=0;oe<Te.length;oe++)for(let Ze=oe+1;Ze<Te.length;Ze++){const ge=Te[oe],Ue=Te[Ze];te.has(ge)&&te.has(Ue)&&(te.get(ge).add(Ue),te.get(Ue).add(ge))}}return te},Ae=te=>{const he=new Map,Te=new Set;let oe=0;const Ze=(ge,Ue)=>{if(Te.has(ge))return;Te.add(ge),he.set(ge,Ue);const ke=te.get(ge);if(ke)for(const Be of ke)Te.has(Be)||Ze(Be,Ue)};for(const ge of te.keys())Te.has(ge)||Ze(ge,oe++);return he},Ye=Ke(),Pt=Ae(Ye),st=new Map;for(const te of Pt.values())st.set(te,(st.get(te)||0)+1);console.log(`[Schematic] Component clustering: ${st.size} functional blocks identified`);for(const[te,he]of st)console.log(`  Cluster ${te}: ${he} components`);let _=30,ne=30,Me=0,ie=0;if(nt.length>0){let te=1/0,he=1/0,Te=-1/0,oe=-1/0;for(const qe of nt)te=Math.min(te,qe.x),he=Math.min(he,qe.y),Te=Math.max(Te,qe.x),oe=Math.max(oe,qe.y);const Ze=Te-te,ge=oe-he,Ue=30,ke=297-2*Ue,Be=420-2*Ue,Oe=Ze>0?ke/Ze:.1,ft=ge>0?Be/ge:.1;let Mt=Math.min(Oe,ft);Mt=Math.max(.5,Math.min(Mt,2)),Me=Ze*Mt,ie=ge*Mt,_=Ue+(ke-Me)/2,ne=Ue+(Be-ie)/2;for(const qe of nt){let $e=qe.designator?.trim()||qe.abbreviation?.trim();if($e&&($e==="?"||$e==="??"||$e==="***"||$e==="****"||$e==="*")&&($e=""),$e&&$e.length>0){const Et=(qe.x-te)*Mt+_,jt=(qe.y-he)*Mt+ne;ve.set($e,{comp:qe,designator:$e,x:Et,y:jt})}}console.log(`[Schematic] Component positioning: ${ve.size} components`),console.log(`[Schematic] PCB bounds: ${te.toFixed(1)}, ${he.toFixed(1)} to ${Te.toFixed(1)}, ${oe.toFixed(1)}`),console.log(`[Schematic] PCB size: ${Ze.toFixed(1)} x ${ge.toFixed(1)} pixels`),console.log(`[Schematic] Usable area: ${ke.toFixed(1)} x ${Be.toFixed(1)} mm (A3 paper with ${Ue}mm margins)`),console.log(`[Schematic] Scale factor: ${Mt.toFixed(4)} (${(1/Mt).toFixed(2)} pixels per mm)`),console.log(`[Schematic] Scaled size: ${Me.toFixed(1)} x ${ie.toFixed(1)} mm`),console.log(`[Schematic] Schematic bounds: ${_.toFixed(1)}mm, ${ne.toFixed(1)}mm to ${(_+Me).toFixed(1)}mm, ${(ne+ie).toFixed(1)}mm`)}let m=`(kicad_sch (version 20201015) (generator simple_schematic)
`;m+=`  (paper "A3")
`,m+=`  (title_block
`,m+=`    (title "")
`,m+=`    (date "")
`,m+=`    (rev "")
`,m+=`    (company "")
`,m+=`  )
`,m+=`
`,m+=`  (lib_symbols
`,m+=`    (symbol "simple:Power" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,m+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,m+=`        (effects (font (size 1.27 1.27)) hide)
`,m+=`      )
`,m+=`      (symbol "Power_0_1"
`,m+=`        (polyline (pts (xy 0 0) (xy 0 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 0) (xy 1.27 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -0.635 -1.27) (xy 0.635 -1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -0.3175 -1.905) (xy 0.3175 -1.905)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Ground" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,m+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,m+=`        (effects (font (size 1.27 1.27)) hide)
`,m+=`      )
`,m+=`      (symbol "Ground_0_1"
`,m+=`        (polyline (pts (xy 0 0) (xy 0 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -2.54 -2.54) (xy 2.54 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 -3.81) (xy 1.27 -3.81)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -0.635 -4.445) (xy 0.635 -4.445)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Resistor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "R" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Resistor_0_1"
`,m+=`        (polyline (pts (xy -3.81 0) (xy -2.54 0) (xy -1.27 1.27) (xy 0 -1.27) (xy 1.27 1.27) (xy 2.54 -1.27) (xy 3.81 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -6.35 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 6.35 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Capacitor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "C" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Capacitor_0_1"
`,m+=`        (polyline (pts (xy 0 -2.54) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -2.54 -2.54) (xy -2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 2.54 -2.54) (xy 2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Diode" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "D" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Diode_0_1"
`,m+=`        (polyline (pts (xy -2.54 0) (xy 0 -2.54) (xy 0 2.54) (xy -2.54 0)) (stroke (width 0.254) (type default)) (fill (type background)))
`,m+=`        (polyline (pts (xy 0 -2.54) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Switch" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "SW" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Switch_0_1"
`,m+=`        (polyline (pts (xy -3.81 0) (xy -1.27 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 1.27 0) (xy 3.81 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 -1.27) (xy 1.27 1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Transistor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "Q" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Transistor_0_1"
`,m+=`        (polyline (pts (xy 0 -2.54) (xy 0 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -2.54 0) (xy 0 0) (xy 2.54 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 -1.27) (xy 0 -2.54) (xy 1.27 -1.27)) (stroke (width 0.254) (type default)) (fill (type background)))
`,m+=`        (pin passive line (at 0 -5.08 90) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at -3.81 0 0) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 3.81 0 180) (length 2.54)
`,m+=`          (name "3" (effects (font (size 1.27 1.27))))
`,m+=`          (number "3" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Inductor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "L" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Inductor_0_1"
`,m+=`        (arc (start -2.54 0) (mid -1.27 0) (end 0 0) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (arc (start 0 0) (mid 1.27 0) (end 2.54 0) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Battery" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "B" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Battery_0_1"
`,m+=`        (polyline (pts (xy -3.81 -1.27) (xy -3.81 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 -1.27) (xy -1.27 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 1.27 -1.27) (xy 1.27 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 3.81 -1.27) (xy 3.81 1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`;const D=(te,he,Te=20)=>{const oe=te.includes(":")?te.split(":")[1]:te;m+=`    (symbol "${te}" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "${he}" (id 0) (at 0 2.54 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "${oe}_0_1"
`,m+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,m+=`          (stroke (width 0.254)) (fill (type background))
`,m+=`        )
`,m+=`      )
`;for(let Ze=1;Ze<=Te;Ze++){m+=`      (symbol "${oe}_1_${Ze}"
`;const ge=Math.ceil(Ze/2),Ue=Math.floor(Ze/2);for(let ke=0;ke<ge;ke++){const Be=ke+1,Oe=ge>1?-((ge-1)*2.54/2)+ke*2.54:0;m+=`        (pin passive line (at ${-5.08} ${Oe} 0) (length 2.54)
`,m+=`          (name "${Be}" (effects (font (size 1.27 1.27))))
`,m+=`          (number "${Be}" (effects (font (size 1.27 1.27))))
`,m+=`        )
`}for(let ke=0;ke<Ue;ke++){const Be=ge+ke+1,Oe=Ue>1?-((Ue-1)*2.54/2)+ke*2.54:0;m+=`        (pin passive line (at ${5.08} ${Oe} 180) (length 2.54)
`,m+=`          (name "${Be}" (effects (font (size 1.27 1.27))))
`,m+=`          (number "${Be}" (effects (font (size 1.27 1.27))))
`,m+=`        )
`}m+=`      )
`}m+=`    )
`};D("simple:IC","U",20),D("simple:Generic","REF",20),m+=`  )
`,m+=`
`;let W=1;const ue=()=>`00000000-0000-0000-0000-${String(W++).padStart(12,"0")}`,Ee=te=>{switch(te){case"Resistor":case"ResistorNetwork":case"VariableResistor":case"Thermistor":return"simple:Resistor";case"Capacitor":case"Electrolytic Capacitor":return"simple:Capacitor";case"Diode":case"ZenerDiode":return"simple:Diode";case"Switch":return"simple:Switch";case"Transistor":return"simple:Transistor";case"Inductor":return"simple:Inductor";case"Battery":return"simple:Battery";case"IntegratedCircuit":return"simple:IC";default:return"simple:Generic"}},Je=(te,he)=>{if(!te.pinConnections||te.pinConnections.length===0)return 0;const Te=[];for(let Ze=0;Ze<te.pinConnections.length;Ze++){const ge=te.pinConnections[Ze];if(ge&&ge.trim()!==""){const Ue=parseInt(ge.trim(),10);if(!isNaN(Ue)&&he.has(Ue)){const ke=he.get(Ue);(ke.type==="via"||ke.type==="pad")&&Te.push({pinIndex:Ze,x:ke.x,y:ke.y})}}}if(Te.length<2)return 0;if(te.pinCount===2&&Te.length>=2){const Ze=Te.find(Ue=>Ue.pinIndex===0),ge=Te.find(Ue=>Ue.pinIndex===1);if(Ze&&ge){const Ue=Ze.x-te.x,ke=Ze.y-te.y;return Math.abs(Ue)>Math.abs(ke)?Ue<0?0:180:ke<0?90:270}}const oe=Te.find(Ze=>Ze.pinIndex===0);if(oe){const Ze=oe.x-te.x,ge=oe.y-te.y;return Math.abs(Ze)>Math.abs(ge)?Ze<0?ge<0?0:270:ge<0?90:180:ge<0?Ze<0?0:90:Ze<0?270:180}return 0};for(const[te,he]of ve){const Te=ue(),oe=he.comp,Ze=Ee(oe.componentType);let ge=oe.rotation!==void 0?oe.rotation:Je(oe,B);ge=Math.round(ge/90)*90,ge<0&&(ge+=360),ge>=360&&(ge-=360);const Ue=oe.pinCount||2;let ke=1;(Ze==="simple:IC"||Ze==="simple:Generic")&&(ke=Math.min(Math.max(Ue,1),20)),m+=`  (symbol (lib_id "${Ze}") (at ${he.x} ${he.y} ${ge}) (unit ${ke})
`,m+=`    (in_bom yes) (on_board yes) (dnp no)
`,m+=`    (uuid ${Te})
`,m+=`    (property "Reference" "${te}" (id 0) (at ${he.x} ${he.y+3.81} 0)
`,m+=`      (effects (font (size 1.27 1.27)))
`,m+=`    )
`,m+=`    (property "Value" "${sx(oe)}" (id 1) (at ${he.x} ${he.y-3.81} 0)
`,m+=`      (effects (font (size 1.27 1.27)))
`,m+=`    )
`,m+=`  )
`}m+=`
`;let rt=_+Me+20,pt=ne+ie/2;const gn=15,Ht=new Map;console.log(`[Schematic] Processing ${E.length} nets for wire generation`);for(const te of E){let he=function(ke,Be){if(ke===Be)return!0;if(!Ue.has(ke)||!Ue.has(Be))return!1;const Oe=new Set,ft=[ke];for(Oe.add(ke);ft.length>0;){const Mt=ft.shift();if(Mt===Be)return!0;const bt=Ue.get(Mt);if(bt)for(const Se of bt)Oe.has(Se)||(Oe.add(Se),ft.push(Se))}return!1};if(te.hasPower&&te.powerVoltage){const ke=`PWR_${te.powerVoltage}`;if(!Ht.has(ke)){const Be=ue();Ht.set(ke,{x:rt,y:pt,uuid:Be}),m+=`  (symbol (lib_id "simple:Power") (at ${rt} ${pt} 0) (unit 1)
`,m+=`    (in_bom no) (on_board no) (dnp no)
`,m+=`    (uuid ${Be})
`,m+=`    (property "Reference" "#PWR" (id 0) (at ${rt} ${pt} 0)
`,m+=`      (effects (font (size 1.27 1.27)) hide)
`,m+=`    )
`,m+=`    (property "Value" "${te.powerVoltage}" (id 1) (at ${rt} ${pt-5.08} 0)
`,m+=`      (effects (font (size 1.27 1.27)))
`,m+=`    )
`,m+=`  )
`,rt+=gn}}if(te.hasGround&&!Ht.has("GND")){const Be=ue();Ht.set("GND",{x:rt,y:pt,uuid:Be}),m+=`  (symbol (lib_id "simple:Ground") (at ${rt} ${pt} 0) (unit 1)
`,m+=`    (in_bom no) (on_board no) (dnp no)
`,m+=`    (uuid ${Be})
`,m+=`    (property "Reference" "#PWR" (id 0) (at ${rt} ${pt} 0)
`,m+=`      (effects (font (size 1.27 1.27)) hide)
`,m+=`    )
`,m+=`    (property "Value" "GND" (id 1) (at ${rt} ${pt+5.08} 0)
`,m+=`      (effects (font (size 1.27 1.27)))
`,m+=`    )
`,m+=`  )
`,rt+=gn}if(te.componentPins.length===0)continue;console.log(`[Schematic] Processing net ${te.name} with ${te.componentPins.length} component pins:`,te.componentPins);const Te=[...te.componentPins].sort((ke,Be)=>{const Oe=ke.designator.localeCompare(Be.designator);return Oe!==0?Oe:ke.pin-Be.pin}),oe=[];for(const ke of Te){const Be=ve.get(ke.designator);if(!Be){console.warn(`[Schematic] Component ${ke.designator} not found in componentMap for net ${te.name}`);continue}const Oe=Be.comp,ft=Oe.pinCount||2,Mt=2.54;let bt,Se;if(ft===2){const qe=Ee(Oe.componentType);qe==="simple:Resistor"?ke.pin===1?(bt=Be.x-6.35,Se=Be.y):(bt=Be.x+6.35,Se=Be.y):ke.pin===1?(bt=Be.x-5.08,Se=Be.y):(bt=Be.x+5.08,Se=Be.y)}else if(ft===3&&Ee(Oe.componentType)==="simple:Transistor")ke.pin===1?(bt=Be.x,Se=Be.y-5.08):ke.pin===2?(bt=Be.x-3.81,Se=Be.y):(bt=Be.x+3.81,Se=Be.y);else{const qe=Math.ceil(ft/2),$e=Math.floor(ft/2);if(ke.pin<=qe){bt=Be.x-5.08;const jt=ke.pin-1;Se=Be.y-(qe-1)*Mt/2+jt*Mt}else{bt=Be.x+5.08;const jt=ke.pin-qe-1;Se=Be.y-($e-1)*Mt/2+jt*Mt}}oe.push({x:bt,y:Se,designator:ke.designator,pin:ke.pin})}const Ze=new Map;for(const ke of oe){const Be=`${ke.designator}:${ke.pin}`;Ze.has(Be)||Ze.set(Be,new Set)}const ge=new Map;for(const ke of te.componentPins){const Be=c.find(Oe=>(Oe.abbreviation?.trim()||Oe.designator?.trim())===ke.designator);if(Be&&Be.pinConnections&&Be.pinConnections[ke.pin-1]){const Oe=Be.pinConnections[ke.pin-1],ft=parseInt(Oe.trim(),10);if(!isNaN(ft)){const Mt=`${ke.designator}:${ke.pin}`;ge.set(Mt,ft)}}}const Ue=new Map;for(const ke of B.keys())Ue.has(ke)||Ue.set(ke,new Set);for(const ke of u)if(ke.type==="trace"&&ke.points.length>=2){const Be=ke.points.map(Oe=>Oe.id).filter(Oe=>Oe!==void 0&&B.has(Oe));for(let Oe=0;Oe<Be.length-1;Oe++){const ft=Be[Oe],Mt=Be[Oe+1];ft!==void 0&&Mt!==void 0&&(Ue.has(ft)||Ue.set(ft,new Set),Ue.has(Mt)||Ue.set(Mt,new Set),Ue.get(ft).add(Mt),Ue.get(Mt).add(ft))}}for(const[ke,Be]of ge)for(const[Oe,ft]of ge)ke!==Oe&&(Be===ft||he(Be,ft))&&(Ze.get(ke).add(Oe),Ze.get(Oe).add(ke));if(oe.length>=1){const ke=oe.length>1?oe.reduce((bt,Se)=>bt+Se.x,0)/oe.length:oe[0].x+10,Be=oe.length>1?oe.reduce((bt,Se)=>bt+Se.y,0)/oe.length:oe[0].y;if(te.hasPower&&te.powerVoltage){const bt=`PWR_${te.powerVoltage}`,Se=Ht.get(bt);if(Se){const qe=Se.y-2.54,$e=Se.x,Et=ue();m+=`  (junction (at ${$e} ${qe}) (diameter 0) (color 0 0 0 0) (uuid ${Et}))
`;const jt=oe.length===1?oe[0]:{x:ke,y:Be},Fn=ue();m+=`  (wire (pts (xy ${jt.x} ${jt.y}) (xy ${$e} ${qe})) (stroke (width 0) (type default)) (uuid ${Fn}))
`}}if(te.hasGround){const Se=Ht.get("GND");if(Se){const qe=Se.y-2.54,$e=Se.x,Et=ue();m+=`  (junction (at ${$e} ${qe}) (diameter 0) (color 0 0 0 0) (uuid ${Et}))
`;const jt=oe.length===1?oe[0]:{x:ke,y:Be},Fn=ue();m+=`  (wire (pts (xy ${jt.x} ${jt.y}) (xy ${$e} ${qe})) (stroke (width 0) (type default)) (uuid ${Fn}))
`}}const Oe=new Set;if(oe.length>=2){console.log(`[Schematic] Creating wires for net ${te.name}: ${oe.length} pins`);const bt=new Map;for(const qe of oe){const $e=`${qe.designator}:${qe.pin}`;bt.set($e,{x:qe.x,y:qe.y})}const Se=[];for(const[qe,$e]of Ze)for(const Et of $e)if(bt.has(qe)&&bt.has(Et)){const jt=bt.get(qe),Fn=bt.get(Et),pl=Math.sqrt(Math.pow(Fn.x-jt.x,2)+Math.pow(Fn.y-jt.y,2));Se.push({from:qe,to:Et,distance:pl})}if(Se.length>0){Se.sort((jt,Fn)=>jt.distance-Fn.distance);const qe=new Map,$e=jt=>(qe.has(jt)||qe.set(jt,jt),qe.get(jt)!==jt&&qe.set(jt,$e(qe.get(jt))),qe.get(jt)),Et=(jt,Fn)=>{const pl=$e(jt),Wi=$e(Fn);return pl!==Wi?(qe.set(Wi,pl),!0):!1};for(const jt of Se)if(Et(jt.from,jt.to)){const Fn=bt.get(jt.from),pl=bt.get(jt.to),Wi=ue();m+=`  (wire (pts (xy ${Fn.x} ${Fn.y}) (xy ${pl.x} ${pl.y})) (stroke (width 0) (type default)) (uuid ${Wi}))
`,Oe.add(jt.from),Oe.add(jt.to)}}else if(oe.length===2){const qe=ue();m+=`  (wire (pts (xy ${oe[0].x} ${oe[0].y}) (xy ${oe[1].x} ${oe[1].y})) (stroke (width 0) (type default)) (uuid ${qe}))
`,Oe.add(`${oe[0].designator}:${oe[0].pin}`),Oe.add(`${oe[1].designator}:${oe[1].pin}`)}else{const qe=[...oe].sort(($e,Et)=>Math.abs($e.y-Et.y)<5?$e.x-Et.x:$e.y-Et.y);for(let $e=0;$e<qe.length-1;$e++){const Et=ue();m+=`  (wire (pts (xy ${qe[$e].x} ${qe[$e].y}) (xy ${qe[$e+1].x} ${qe[$e+1].y})) (stroke (width 0) (type default)) (uuid ${Et}))
`,Oe.add(`${qe[$e].designator}:${qe[$e].pin}`),Oe.add(`${qe[$e+1].designator}:${qe[$e+1].pin}`)}}}else if(oe.length===1){console.log(`[Schematic] Creating junction for single-pin net ${te.name} at (${oe[0].x}, ${oe[0].y})`);const bt=ue();m+=`  (junction (at ${oe[0].x} ${oe[0].y}) (diameter 0.508) (color 0 0 0 0) (uuid ${bt}))
`}else console.warn(`[Schematic] Net ${te.name} has ${te.componentPins.length} component pins but 0 valid pin positions!`);const ft=oe.length>=2&&Oe.size===oe.length;if(te.hasPower||te.hasGround||oe.length===1||oe.length>=2&&!ft){const bt=oe.length>1?Be+5.08:oe[0].y+5.08,Se=oe.length>1?ke:oe[0].x,qe=ue(),$e=te.hasPower&&te.powerVoltage?te.powerVoltage:te.hasGround?"GND":te.name;m+=`  (text "${$e}" (at ${Se} ${bt} 0)
`,m+=`    (effects (font (size 1.27 1.27)))
`,m+=`    (uuid ${qe})
`,m+=`  )
`}else console.log(`[Schematic] Net ${te.name}: All ${oe.length} pins connected with wires, skipping label`)}}m+=`)
`;const Ol=cx(B,G,H,c,u);return{schematic:m,nodesCsv:Ol}}function fx(){const c=new Date,u=c.getFullYear(),b=String(c.getMonth()+1).padStart(2,"0"),f=String(c.getDate()).padStart(2,"0"),d=String(c.getHours()).padStart(2,"0"),B=String(c.getMinutes()).padStart(2,"0"),q=String(c.getSeconds()).padStart(2,"0");return`${u}_${b}_${f}-${d}-${B}-${q}`}const px=({openMenu:c,setOpenMenu:u,isReadOnlyMode:b,currentProjectFilePath:f,onNewProject:d,onOpenProject:B,onSaveProject:q,onSaveAs:pe,onExportSchematic:G,onPrint:H,hasUnsavedChanges:me,setNewProjectDialog:I,setAutoSaveDialog:ce,topImage:de,bottomImage:P,selectedImageForTransform:Z,setSelectedImageForTransform:_e,setCurrentTool:He,transformMode:E,setTransformMode:A,updateImageTransform:U,resetImageTransform:M,isGrayscale:T,setIsGrayscale:g,isBlackAndWhiteEdges:Y,setIsBlackAndWhiteEdges:ve,isBlackAndWhiteInverted:nt,setIsBlackAndWhiteInverted:Ke,areImagesLocked:Ae,setAreImagesLocked:Ye,onEnterBoardDimensions:Pt,fileInputTopRef:st,fileInputBottomRef:_,openProjectRef:ne,increaseSize:Me,decreaseSize:ie,brushSize:m,drawingStrokes:D,selectedIds:W,selectedComponentIds:ue,selectedPowerIds:Ee,selectedGroundIds:Je,componentsTop:rt,componentsBottom:pt,powers:gn,grounds:Ht,setSetSizeDialog:Ol,areViasLocked:te,setAreViasLocked:he,arePadsLocked:Te,setArePadsLocked:oe,areTracesLocked:Ze,setAreTracesLocked:ge,areComponentsLocked:Ue,setAreComponentsLocked:ke,areGroundNodesLocked:Be,setAreGroundNodesLocked:Oe,arePowerNodesLocked:ft,setArePowerNodesLocked:Mt,setSelectedIds:bt,setSelectedComponentIds:Se,setSelectedPowerIds:qe,setSelectedGroundIds:$e,selectAllVias:Et,selectAllTraces:jt,selectAllPads:Fn,selectAllComponents:pl,selectDisconnectedComponents:Wi,selectAllPowerNodes:Yt,selectAllGroundNodes:hi,setShowPowerBusManager:$n,setShowGroundBusManager:hl,menuBarRef:In})=>{const[gi,fn]=ot.useState(null),qn=ot.useRef(null),Xi=(We,Fe)=>{const zn=We==="top",it=!(We==="both"?de&&P:(zn?de:We==="bottom"?P:null)!==null)||Ae;return i.jsxs("div",{onMouseEnter:()=>{Fe.current&&(clearTimeout(Fe.current),Fe.current=null),fn(We)},onMouseLeave:()=>{fn(null)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{if(We==="both"){const gl=!de?.flipX;U("both",{flipX:gl})}else{const gl=zn?de?.flipX||!1:P?.flipX||!1;U(We,{flipX:!gl})}fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:"Toggle Horizontal Flip"}),i.jsx("button",{onClick:()=>{if(We==="both"){const gl=!de?.flipY;U("both",{flipY:gl})}else{const gl=zn?de?.flipY||!1:P?.flipY||!1;U(We,{flipY:!gl})}fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:"Toggle Vertical Flip"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{_e(We),A("nudge"),He("transform"),fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:[E==="nudge"&&Z===We?" ":"","Mode: Nudge"]}),i.jsxs("button",{onClick:()=>{_e(We),A("scale"),He("transform"),fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:[E==="scale"&&Z===We?" ":"","Mode: Scale"]}),i.jsxs("button",{onClick:()=>{_e(We),A("rotate"),He("transform"),fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:[E==="rotate"&&Z===We?" ":"","Mode: Rotate"]}),i.jsxs("button",{onClick:()=>{_e(We),A("slant"),He("transform"),fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:[E==="slant"&&Z===We?" ":"","Mode: Slant"]}),i.jsxs("button",{onClick:()=>{_e(We),A("keystone"),He("transform"),fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:[E==="keystone"&&Z===We?" ":"","Mode: Keystone"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{_e(We),He("transform"),T||Y?(g(!1),ve(!1),Ke(!1)):g(!0),fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:T||Y?"Color Mode":"Grayscale Mode"}),i.jsx("button",{onClick:()=>{_e(We),He("transform"),Y?Ke(gl=>!gl):(ve(!0),Ke(!1)),fn(null),u(null)},disabled:it,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:it?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:it?"not-allowed":"pointer"},children:Y?"Invert Edges":"Black & White Edges"})]})},Pe=()=>{if(W.size>0){const We=D.filter(Fe=>W.has(Fe.id));if(We.length>0)return We[0].size}else if(ue.size>0){const We=[...rt,...pt].find(Fe=>ue.has(Fe.id));if(We)return We.size||18}else if(Ee.size>0){const We=gn.find(Fe=>Ee.has(Fe.id));if(We)return We.size}else if(Je.size>0){const We=Ht.find(Fe=>Je.has(Fe.id));if(We)return We.size||18}return m};return i.jsxs("div",{ref:In,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:We=>{We.stopPropagation(),u(Fe=>Fe==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),c==="file"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{b||(u(null),me()?I({visible:!0}):d())},disabled:b,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:b?"not-allowed":"pointer"},children:"New Project"}),i.jsx("button",{onClick:async()=>{await B(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{b||(q(),u(null))},disabled:b,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:b?"not-allowed":"pointer"},children:"Save Project"}),i.jsx("button",{onClick:()=>{b||(pe(),u(null))},disabled:b,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:b?"not-allowed":"pointer"},children:"Save As"}),i.jsx("button",{onClick:()=>{b||(ce({visible:!0,interval:5}),u(null))},disabled:b,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:b?"not-allowed":"pointer"},children:"Auto Save"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{b||(G(),u(null))},disabled:b,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:b?"not-allowed":"pointer"},children:"Export Simple Schematic"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{H(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),i.jsx("button",{onClick:()=>{H(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:We=>{b||(We.stopPropagation(),u(Fe=>Fe==="transform"?null:"transform"))},disabled:b,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="transform"?"#eef3ff":"#fff",fontWeight:600,color:b?"#999":"#222",cursor:b?"not-allowed":"pointer",opacity:b?.5:1},children:"Images "}),c==="transform"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),i.jsx("button",{onClick:()=>{!b&&!Ae&&(st.current?.click(),u(null))},disabled:b||Ae,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b||Ae?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:b||Ae?"not-allowed":"pointer"},children:"Load Top PCB"}),i.jsx("button",{onClick:()=>{!b&&!Ae&&(_.current?.click(),u(null))},disabled:b||Ae,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b||Ae?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:b||Ae?"not-allowed":"pointer"},children:"Load Bottom PCB"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ae||(Pt(),u(null))},disabled:Ae,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ae?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ae?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!de||Ae,onMouseEnter:()=>{Ae||(qn.current&&(clearTimeout(qn.current),qn.current=null),fn("top"))},onMouseLeave:()=>{qn.current=setTimeout(()=>{fn(We=>We==="top"?null:We)},300)},onClick:()=>{Ae||(_e("top"),He("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!de||Ae?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!de||Ae?"not-allowed":"pointer"},children:[Z==="top"?" ":"","Top Image "]}),gi==="top"&&!Ae&&Xi("top",qn)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!P||Ae,onMouseEnter:()=>{Ae||(qn.current&&(clearTimeout(qn.current),qn.current=null),fn("bottom"))},onMouseLeave:()=>{qn.current=setTimeout(()=>{fn(We=>We==="bottom"?null:We)},300)},onClick:()=>{Ae||(_e("bottom"),He("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!P||Ae?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!P||Ae?"not-allowed":"pointer"},children:[Z==="bottom"?" ":"","Bottom Image "]}),gi==="bottom"&&!Ae&&Xi("bottom",qn)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!de||!P||Ae,onMouseEnter:()=>{Ae||(qn.current&&(clearTimeout(qn.current),qn.current=null),fn("both"))},onMouseLeave:()=>{qn.current=setTimeout(()=>{fn(We=>We==="both"?null:We)},300)},onClick:()=>{Ae||(_e("both"),He("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!de||!P||Ae?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!de||!P||Ae?"not-allowed":"pointer"},children:[Z==="both"?" ":"","Both Images "]}),gi==="both"&&!Ae&&Xi("both",qn)]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ae||(He("transform"),M(),u(null))},disabled:Ae,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ae?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ae?"not-allowed":"pointer"},children:"Reset Transform"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ye(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:Ae?"Unlock Images ":"Lock Images"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:We=>{b||(We.stopPropagation(),u(Fe=>Fe==="tools"?null:"tools"))},disabled:b,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="tools"?"#eef3ff":"#fff",fontWeight:600,color:b?"#999":"#222",cursor:b?"not-allowed":"pointer",opacity:b?.5:1},children:"Tools "}),c==="tools"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{Me(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),i.jsx("button",{onClick:()=>{ie(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ol({visible:!0,size:Pe()}),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Set Size"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{he(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Vias ",te?"":""]}),i.jsxs("button",{onClick:()=>{oe(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Pads ",Te?"":""]}),i.jsxs("button",{onClick:()=>{ge(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Traces ",Ze?"":""]}),i.jsxs("button",{onClick:()=>{ke(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Components ",Ue?"":""]}),i.jsxs("button",{onClick:()=>{Oe(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Ground Node ",Be?"":""]}),i.jsxs("button",{onClick:()=>{Mt(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Power Nodes ",ft?"":""]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select All"}),i.jsx("button",{onClick:()=>{Et(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Vias"}),i.jsx("button",{onClick:()=>{jt(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Traces"}),i.jsx("button",{onClick:()=>{Fn(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Pads"}),i.jsx("button",{onClick:()=>{pl(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Components"}),i.jsx("button",{onClick:()=>{Yt(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Power Nodes"}),i.jsx("button",{onClick:()=>{hi(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Ground Nodes"}),i.jsx("button",{onClick:()=>{Wi(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select Disconnected"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{$n(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>{hl(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:We=>{We.stopPropagation(),u(Fe=>Fe==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),c==="about"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:400,maxWidth:600,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:16,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 12px 0",color:"#000",fontSize:"18px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"This application supports typical 4-layer PCBs and allows you to load top and bottom PCB images, trace connections, place components, and export schematics in KiCad format."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:i.jsx("strong",{children:"Key Features:"})}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Load and align top and bottom PCB images"}),i.jsx("li",{children:"Trace connections with automatic node snapping"}),i.jsx("li",{children:"Place and annotate components with pin connections"}),i.jsx("li",{children:"Manage power buses and ground connections"}),i.jsx("li",{children:"Export to KiCad schematic format"}),i.jsx("li",{children:"Auto-save functionality for project management"})]}),i.jsxs("p",{style:{margin:"0 0 0 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to create new projects, save your work, and export schematics. The ",i.jsx("strong",{children:"Images"})," menu provides tools for aligning and transforming PCB images. The ",i.jsx("strong",{children:"Tools"})," menu offers size adjustments and locking controls for different PCB elements."]})]})})]}),f&&i.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:i.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:f,children:f})})]})},hx=({visible:c})=>c?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),i.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to start a new project."]}),i.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"Images"})," menu to load PCB photos."]})]}):null,gx=({visible:c,title:u,message:b,onClose:f})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:d=>{d.target===d.currentTarget&&f()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:d=>d.stopPropagation(),children:[i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),i.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:u})]}),i.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:b}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:i.jsx("button",{onClick:f,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,xx=({visible:c,selectedIds:u,selectedComponentIds:b,selectedPowerIds:f,selectedGroundIds:d,drawingStrokes:B,componentsTop:q,componentsBottom:pe,powers:G,grounds:H,powerBuses:me,onClose:I,setComponentsTop:ce,setComponentsBottom:de,determineViaType:P,determinePadType:Z,onFindComponent:_e,position:He,isDragging:E,onDragStart:A})=>{if(!c)return null;const U=He?{position:"fixed",left:`${He.x}px`,top:`${He.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:E?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},M={padding:"20px",overflow:"auto",flex:1};return i.jsxs("div",{style:U,children:[i.jsxs("div",{onMouseDown:T=>{const g=T.target;g.tagName==="BUTTON"||g.closest("button")||He&&A(T)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:E?"grabbing":He?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (Ctrl+I)"}),i.jsx("button",{onClick:I,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:M,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const T=B.filter(Ke=>u.has(Ke.id)).length,g=[...q,...pe].filter(Ke=>b.has(Ke.id)).length,Y=G.filter(Ke=>f.has(Ke.id)).length,ve=H.filter(Ke=>d.has(Ke.id)).length,nt=T+g+Y+ve;return i.jsx("div",{style:{padding:"12px 16px",backgroundColor:nt>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:nt>0?"#333":"#856404",marginBottom:"8px"},children:nt>0?`${nt} Object${nt!==1?"s":""} Selected`:"Zero Objects Selected"})})(),b.size>0&&(()=>{const T=B.some(g=>u.has(g.id)&&(g.type==="via"||g.type==="pad"));return[...q,...pe].filter(g=>b.has(g.id)).map(g=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:g.componentType})]}),_e&&i.jsx("button",{onClick:()=>{_e(g.id,g.x,g.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Layer: ",g.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("span",{children:["Designator: ",g.designator||"(empty)"]}),T&&i.jsx("button",{onClick:()=>{const Y=[...q,...pe].filter(_=>b.has(_.id)&&_.componentType===g.componentType),ve=Y.length,nt=B.filter(_=>u.has(_.id)&&_.type==="pad"&&_.points.length>0&&_.points[0].id!==void 0).map(_=>{const ne=_.points[0].id;if(ne===void 0)throw new Error("Unexpected undefined id");return{stroke:_,nodeId:ne}}).sort((_,ne)=>_.nodeId-ne.nodeId),Ke=nt.length>0?nt:B.filter(_=>u.has(_.id)&&_.type==="via"&&_.points.length>0&&_.points[0].id!==void 0).map(_=>{const ne=_.points[0].id;if(ne===void 0)throw new Error("Unexpected undefined id");return{stroke:_,nodeId:ne}}).sort((_,ne)=>_.nodeId-ne.nodeId),Ae=Ke.length;if(Ae===0){console.warn("No vias or pads with Node IDs found in selection");return}const Ye=Math.floor(Ae/ve);if(Ye===0){console.warn(`Not enough ${nt.length>0?"pads":"vias"} (${Ae}) for ${ve} components`);return}[...Y].sort((_,ne)=>_.id.localeCompare(ne.id)).forEach((_,ne)=>{const Me=ne*Ye,ie=Me+Ye,D=Ke.slice(Me,ie).map(ue=>ue.nodeId.toString()),W=Iu(_,D,B);_.layer==="top"?ce(ue=>ue.map(Ee=>{if(Ee.id===_.id){const Je={...Ee,pinCount:Ye,pinConnections:D};return W&&(Je.pinPolarities=W),Je}return Ee})):de(ue=>ue.map(Ee=>{if(Ee.id===_.id){const Je={...Ee,pinCount:Ye,pinConnections:D};return W&&(Je.pinPolarities=W),Je}return Ee}))});const st=nt.length>0?"pads":"vias";console.log(`Connected ${ve} components of type ${g.componentType} to ${Ae} ${st} (${Ye} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),i.jsxs("div",{children:["Abbreviation: ",g.abbreviation||"(empty)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:g.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:g.color})]}),i.jsxs("div",{children:["Size: ",g.size]}),i.jsxs("div",{children:["Pin Count: ",g.pinCount]}),g.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[g.capacitance&&i.jsxs("div",{children:["Capacitance: ",g.capacitance]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.dielectric&&i.jsxs("div",{children:["Dielectric: ",g.dielectric]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[g.capacitance&&i.jsxs("div",{children:["Capacitance: ",g.capacitance]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]}),g.polarity&&i.jsxs("div",{children:["Polarity: ",g.polarity]}),g.esr&&i.jsxs("div",{children:["ESR: ",g.esr]}),g.temperature&&i.jsxs("div",{children:["Temperature: ",g.temperature]})]}),g.orientation!==void 0&&g.orientation!==null&&i.jsxs("div",{children:["Orientation: ",g.orientation,""]}),g.pinConnections&&g.pinConnections.length>0&&(()=>{const Y=g.componentType==="Electrolytic Capacitor"||g.componentType==="Diode"||g.componentType==="Battery"||g.componentType==="ZenerDiode",ve=g.componentType==="Capacitor"&&"dielectric"in g&&g.dielectric==="Tantalum",nt=Y||ve;return i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),nt&&i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:g.pinConnections.map((Ke,Ae)=>{const Ye=g.pinPolarities&&g.pinPolarities.length>Ae?g.pinPolarities[Ae]:"";return i.jsxs("tr",{style:{backgroundColor:Ae%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Ae+1}),nt&&i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:Ye==="+"?"#d32f2f":Ye==="-"?"#1976d2":"#999"},children:Ye||"-"}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Ke||"(not connected)"})]},Ae)})})]})]})})(),"manufacturer"in g&&g.manufacturer&&i.jsxs("div",{children:["Manufacturer: ",g.manufacturer]}),"partNumber"in g&&g.partNumber&&i.jsxs("div",{children:["Part Number: ",g.partNumber]}),g.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[g.diodeType&&i.jsxs("div",{children:["Type: ",g.diodeType]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.ledColor&&i.jsxs("div",{children:["LED Color: ",g.ledColor]})]}),g.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.capacity&&i.jsxs("div",{children:["Capacity: ",g.capacity]}),g.chemistry&&i.jsxs("div",{children:["Chemistry: ",g.chemistry]})]}),g.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.fuseType&&i.jsxs("div",{children:["Type: ",g.fuseType]})]}),g.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[g.impedance&&i.jsxs("div",{children:["Impedance: ",g.impedance]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[g.connectorType&&i.jsxs("div",{children:["Type: ",g.connectorType]}),g.gender&&i.jsxs("div",{children:["Gender: ",g.gender]})]}),g.componentType==="Jumper"&&i.jsx(i.Fragment,{children:g.positions&&i.jsxs("div",{children:["Positions: ",g.positions]})}),g.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[g.coilVoltage&&i.jsxs("div",{children:["Coil Voltage: ",g.coilVoltage]}),g.contactType&&i.jsxs("div",{children:["Contact Type: ",g.contactType]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[g.inductance&&i.jsxs("div",{children:["Inductance: ",g.inductance]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.resistance&&i.jsxs("div",{children:["DC Resistance: ",g.resistance]})]}),g.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[g.impedance&&i.jsxs("div",{children:["Impedance: ",g.impedance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]})]}),g.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[g.motorType&&i.jsxs("div",{children:["Type: ",g.motorType]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[g.inputVoltage&&i.jsxs("div",{children:["Input Voltage: ",g.inputVoltage]}),g.outputVoltage&&i.jsxs("div",{children:["Output Voltage: ",g.outputVoltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[g.transistorType&&i.jsxs("div",{children:["Type: ",g.transistorType]}),g.polarity&&i.jsxs("div",{children:["Polarity: ",g.polarity]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.configuration&&i.jsxs("div",{children:["Configuration: ",g.configuration]})]}),g.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.thermistorType&&i.jsxs("div",{children:["Type: ",g.thermistorType]}),g.beta&&i.jsxs("div",{children:["Beta: ",g.beta]})]}),g.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[g.switchType&&i.jsxs("div",{children:["Type: ",g.switchType]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]})]}),g.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[g.primaryVoltage&&i.jsxs("div",{children:["Primary Voltage: ",g.primaryVoltage]}),g.secondaryVoltage&&i.jsxs("div",{children:["Secondary Voltage: ",g.secondaryVoltage]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.turns&&i.jsxs("div",{children:["Turns Ratio: ",g.turns]})]}),g.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:g.signal&&i.jsxs("div",{children:["Signal: ",g.signal]})}),g.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[g.description&&i.jsxs("div",{children:["Description: ",g.description]}),g.icType&&i.jsxs("div",{children:["IC Type: ",g.icType]}),g.datasheet&&i.jsxs("div",{children:["Datasheet: ",i.jsx("a",{href:g.datasheet,target:"_blank",rel:"noopener noreferrer",children:g.datasheet})]})]}),g.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:g.tubeType&&i.jsxs("div",{children:["Type: ",g.tubeType]})}),g.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[g.vrType&&i.jsxs("div",{children:["Type: ",g.vrType]}),g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.taper&&i.jsxs("div",{children:["Taper: ",g.taper]})]}),g.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[g.frequency&&i.jsxs("div",{children:["Frequency: ",g.frequency]}),g.loadCapacitance&&i.jsxs("div",{children:["Load Capacitance: ",g.loadCapacitance]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[g.voltage&&i.jsxs("div",{children:["Zener Voltage: ",g.voltage]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),i.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})})]})]},g.id))})(),u.size>0&&B.filter(T=>u.has(T.id)&&T.type==="via"&&T.points.length>0).map(T=>{const g=T.points[0],Y=T.viaType||(g.id!==void 0?P(g.id,me):"Via (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:Y})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[g.id&&i.jsxs("div",{children:["Node ID: ",g.id]}),i.jsx("div",{children:"Layer: Top and Bottom"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})]})]},T.id)}),u.size>0&&B.filter(T=>u.has(T.id)&&T.type==="pad"&&T.points.length>0).map(T=>{const g=T.points[0],Y=T.padType||(g.id!==void 0?Z(g.id,me):"Pad (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:Y})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[g.id&&i.jsxs("div",{children:["Node ID: ",g.id]}),i.jsxs("div",{children:["Layer: ",T.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})]})]},T.id)}),u.size>0&&B.filter(T=>u.has(T.id)&&T.type==="trace").map(T=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||"unknown"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[T.points.length>0&&i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",T.points.length]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:T.points.map((g,Y)=>i.jsxs("tr",{style:{backgroundColor:Y%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Y}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.x.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.y.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.id||"(none)"})]},Y))})]})]}),i.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",T.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]})]})]},T.id)),f.size>0&&G.filter(T=>f.has(T.id)).map(T=>{const g=me.find(Y=>Y.id===T.powerBusId);return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||(g?`${g.name} Power Node`:"Power Node")})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",T.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Layer: ",T.layer]}),i.jsxs("div",{children:["Power Bus: ",g?.name||T.powerBusId||"(unknown)"]}),i.jsxs("div",{children:["Position: x=",T.x.toFixed(2),", y=",T.y.toFixed(2)]})]})]},T.id)}),d.size>0&&H.filter(T=>d.has(T.id)).map(T=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||"Ground Node"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",T.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",T.x.toFixed(2),", y=",T.y.toFixed(2)]})]})]},T.id))]})})]})},Gn=200,yx=({visible:c,selectedIds:u,selectedComponentIds:b,selectedPowerIds:f,selectedGroundIds:d,drawingStrokes:B,componentsTop:q,componentsBottom:pe,powers:G,grounds:H,powerBuses:me,onClose:I,setComponentsTop:ce,setComponentsBottom:de,setDrawingStrokes:P,setPowerSymbols:Z,setGroundSymbols:_e,determineViaType:He,determinePadType:E,position:A,isDragging:U,onDragStart:M})=>{const[T,g]=C.useState(new Map),Y=C.useRef(""),ve=()=>[...Array.from(u).sort(),...Array.from(b).sort(),...Array.from(f).sort(),...Array.from(d).sort()].join(",");if(C.useEffect(()=>{if(!c)return;const ie=ve();ie!==Y.current&&(Y.current=ie,g(m=>{const D=new Map;return[...q,...pe].filter(W=>b.has(W.id)).forEach(W=>{const ue=m.get(W.id);D.set(W.id,ue!==void 0?ue:W.notes||"")}),B.filter(W=>u.has(W.id)).forEach(W=>{const ue=m.get(W.id);D.set(W.id,ue!==void 0?ue:W.notes||"")}),G.filter(W=>f.has(W.id)).forEach(W=>{const ue=m.get(W.id);D.set(W.id,ue!==void 0?ue:W.notes||"")}),H.filter(W=>d.has(W.id)).forEach(W=>{const ue=m.get(W.id);D.set(W.id,ue!==void 0?ue:W.notes||"")}),D}))},[c,u,b,f,d,B,q,pe,G,H]),!c)return null;const nt=A?{position:"fixed",left:`${A.x}px`,top:`${A.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:U?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},Ke={padding:"20px",overflow:"auto",flex:1},Ae=B.filter(ie=>u.has(ie.id)).length,Ye=[...q,...pe].filter(ie=>b.has(ie.id)).length,Pt=G.filter(ie=>f.has(ie.id)).length,st=H.filter(ie=>d.has(ie.id)).length,_=Ae+Ye+Pt+st,ne=(ie,m)=>{const D=m.length>Gn?m.substring(0,Gn):m;g(W=>{const ue=new Map(W);return ue.set(ie,D),ue})},Me=()=>{ce(ie=>ie.map(m=>{if(b.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m})),de(ie=>ie.map(m=>{if(b.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m})),P(ie=>ie.map(m=>{if(u.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m})),Z(ie=>ie.map(m=>{if(f.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m})),_e(ie=>ie.map(m=>{if(d.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m}))};return i.jsxs("div",{style:nt,children:[i.jsxs("div",{onMouseDown:ie=>{const m=ie.target;m.tagName==="BUTTON"||m.closest("button")||A&&M(ie)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:U?"grabbing":A?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (Ctrl+N)"}),i.jsx("button",{onClick:I,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:Ke,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[i.jsx("div",{style:{padding:"12px 16px",backgroundColor:_>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:_>0?"#333":"#856404",marginBottom:"8px"},children:_>0?`${_} Object${_!==1?"s":""} Selected`:"Zero Objects Selected"}),_===0?i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):i.jsxs(i.Fragment,{children:[[...q,...pe].filter(ie=>b.has(ie.id)).map(ie=>{const m=T.get(ie.id)||"",D=m.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ie.componentType})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:m,onChange:W=>ne(ie.id,W.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Gn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:D>=Gn?"#d32f2f":"#666",textAlign:"right"},children:[D," / ",Gn]})]})]},ie.id)}),B.filter(ie=>u.has(ie.id)&&ie.type==="via"&&ie.points.length>0).map(ie=>{const m=ie.points[0],D=ie.viaType||(m.id!==void 0?He(m.id,me):"Via (Signal)"),W=T.get(ie.id)||"",ue=W.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:D})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:m.id&&i.jsxs("div",{children:["Node ID: ",m.id]})}),i.jsx("textarea",{value:W,onChange:Ee=>ne(ie.id,Ee.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Gn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Gn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Gn]})]})]},ie.id)}),B.filter(ie=>u.has(ie.id)&&ie.type==="pad"&&ie.points.length>0).map(ie=>{const m=ie.points[0],D=ie.padType||(m.id!==void 0?E(m.id,me):"Pad (Signal)"),W=T.get(ie.id)||"",ue=W.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:D})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:m.id&&i.jsxs("div",{children:["Node ID: ",m.id]})}),i.jsx("textarea",{value:W,onChange:Ee=>ne(ie.id,Ee.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Gn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Gn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Gn]})]})]},ie.id)}),B.filter(ie=>u.has(ie.id)&&ie.type==="trace").map(ie=>{const m=T.get(ie.id)||"",D=m.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ie.type||"unknown"})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:m,onChange:W=>ne(ie.id,W.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Gn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:D>=Gn?"#d32f2f":"#666",textAlign:"right"},children:[D," / ",Gn]})]})]},ie.id)}),G.filter(ie=>f.has(ie.id)).map(ie=>{const m=me.find(Ee=>Ee.id===ie.powerBusId),D=ie.type||(m?`${m.name} Power Node`:"Power Node"),W=T.get(ie.id)||"",ue=W.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:D})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",ie.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:W,onChange:Ee=>ne(ie.id,Ee.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Gn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Gn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Gn]})]})]},ie.id)}),H.filter(ie=>d.has(ie.id)).map(ie=>{const m=ie.type||"Ground Node",D=T.get(ie.id)||"",W=D.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:m})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",ie.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:D,onChange:ue=>ne(ie.id,ue.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Gn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:W>=Gn?"#d32f2f":"#666",textAlign:"right"},children:[W," / ",Gn]})]})]},ie.id)}),i.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[i.jsx("button",{onClick:Me,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Save Notes"}),i.jsx("button",{onClick:I,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#616161"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#757575"},children:"Close"})]})]})]})})]})},bx=({visible:c,dimensions:u,onSave:b,onClose:f})=>{const[d,B]=C.useState(""),[q,pe]=C.useState(""),[G,H]=C.useState("inches");C.useEffect(()=>{c&&u?(B(u.width.toString()),pe(u.height.toString()),H(u.unit)):c&&(B(""),pe(""),H("inches"))},[c,u]);const me=()=>{const ce=parseFloat(d),de=parseFloat(q);if(isNaN(ce)||ce<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(de)||de<=0){alert("Please enter a valid height greater than 0");return}b({width:ce,height:de,unit:G}),f()},I=()=>{f()};return c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:ce=>{ce.target===ce.currentTarget&&I()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:ce=>ce.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:d,onChange:ce=>B(ce.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:G,onChange:ce=>H(ce.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:q,onChange:ce=>pe(ce.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:G,onChange:ce=>H(ce.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:I,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),i.jsx("button",{onClick:me,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},vx=({component:c,componentEditor:u,setComponentEditor:b,areComponentsLocked:f})=>i.jsxs(i.Fragment,{children:[c.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>b({...u,resistance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Qe("resistance"),onChange:d=>b({...u,resistanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>b({...u,power:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"5%",onChange:d=>b({...u,tolerance:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.05%",children:"0.05%"}),i.jsx("option",{value:"0.1%",children:"0.1%"}),i.jsx("option",{value:"0.25%",children:"0.25%"}),i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:u.capacitance||"",onChange:d=>b({...u,capacitance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:u.capacitanceUnit||Qe("capacitance"),onChange:d=>b({...u,capacitanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("capacitance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-dielectric-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),i.jsxs("select",{id:`component-dielectric-${c.id}`,value:u.dielectric||"Ceramic",onChange:d=>b({...u,dielectric:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Ceramic",children:"Ceramic"}),i.jsx("option",{value:"Tantalum",children:"Tantalum"}),i.jsx("option",{value:"Film",children:"Film"}),i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Mica",children:"Mica"}),i.jsx("option",{value:"Paper",children:"Paper"}),i.jsx("option",{value:"Glass",children:"Glass"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"10%",onChange:d=>b({...u,tolerance:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:u.capacitance||"",onChange:d=>b({...u,capacitance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),i.jsxs("select",{value:u.capacitanceUnit||"F",onChange:d=>b({...u,capacitanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:[i.jsx("option",{value:"pF",children:"pF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"mF",children:"mF"}),i.jsx("option",{value:"F",children:"F"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 25"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"20%",onChange:d=>b({...u,tolerance:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:u.polarityCapacitor||c.polarity||"Positive",onChange:d=>b({...u,polarityCapacitor:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Positive",children:"Positive"}),i.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),c.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inductance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),i.jsx("input",{id:`component-inductance-${c.id}`,type:"text",value:u.inductance||"",onChange:d=>b({...u,inductance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.inductanceUnit||Qe("inductance"),onChange:d=>b({...u,inductanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("inductance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>b({...u,resistance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.resistanceUnit||"",onChange:d=>b({...u,resistanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-diodetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),i.jsxs("select",{id:`component-diodetype-${c.id}`,value:u.diodeType||"Standard",onChange:d=>b({...u,diodeType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Standard",children:"Standard"}),i.jsx("option",{value:"Zener",children:"Zener"}),i.jsx("option",{value:"LED",children:"LED"}),i.jsx("option",{value:"Schottky",children:"Schottky"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),u.diodeType==="LED"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ledcolor-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),i.jsxs("select",{id:`component-ledcolor-${c.id}`,value:u.ledColor||"",onChange:d=>b({...u,ledColor:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"Red",children:"Red"}),i.jsx("option",{value:"Green",children:"Green"}),i.jsx("option",{value:"Blue",children:"Blue"}),i.jsx("option",{value:"Yellow",children:"Yellow"}),i.jsx("option",{value:"Orange",children:"Orange"}),i.jsx("option",{value:"White",children:"White"}),i.jsx("option",{value:"RGB",children:"RGB"}),i.jsx("option",{value:"IR",children:"IR (Infrared)"}),i.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 3.7"}),i.jsx("select",{value:u.voltageUnit||"V",onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),i.jsx("input",{id:`component-capacity-${c.id}`,type:"text",value:u.capacity||"",onChange:d=>b({...u,capacity:d.target.value}),disabled:f,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 2000mAh"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-chemistry-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),i.jsxs("select",{id:`component-chemistry-${c.id}`,value:u.chemistry||"Li-ion",onChange:d=>b({...u,chemistry:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Li-ion",children:"Li-ion"}),i.jsx("option",{value:"LiPo",children:"LiPo"}),i.jsx("option",{value:"NiMH",children:"NiMH"}),i.jsx("option",{value:"NiCd",children:"NiCd"}),i.jsx("option",{value:"Alkaline",children:"Alkaline"}),i.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),i.jsx("option",{value:"Lithium",children:"Lithium"}),i.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),c.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:u.currentUnit||"A",onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:u.voltageUnit||"V",onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-fusetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),i.jsxs("select",{id:`component-fusetype-${c.id}`,value:u.fuseType||"Fast-blow",onChange:d=>b({...u,fuseType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),i.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),i.jsx("option",{value:"Time-delay",children:"Time-delay"}),i.jsx("option",{value:"Resettable",children:"Resettable"}),i.jsx("option",{value:"Cartridge",children:"Cartridge"}),i.jsx("option",{value:"Glass",children:"Glass"}),i.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),c.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-coilvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),i.jsx("input",{id:`component-coilvoltage-${c.id}`,type:"text",value:u.coilVoltage||"",onChange:d=>b({...u,coilVoltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.coilVoltageUnit||Qe("voltage"),onChange:d=>b({...u,coilVoltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-contacttype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),i.jsxs("select",{id:`component-contacttype-${c.id}`,value:u.contactType||"SPST",onChange:d=>b({...u,contactType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),i.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),i.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),i.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),i.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),i.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-motortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),i.jsxs("select",{id:`component-motortype-${c.id}`,value:u.motorType||"DC",onChange:d=>b({...u,motorType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"DC",children:"DC Motor"}),i.jsx("option",{value:"Stepper",children:"Stepper Motor"}),i.jsx("option",{value:"Servo",children:"Servo Motor"}),i.jsx("option",{value:"Brushless",children:"Brushless DC"}),i.jsx("option",{value:"AC",children:"AC Motor"}),i.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-switchtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),i.jsxs("select",{id:`component-switchtype-${c.id}`,value:u.switchType||"Toggle",onChange:d=>b({...u,switchType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Toggle",children:"Toggle"}),i.jsx("option",{value:"Push-button",children:"Push-button"}),i.jsx("option",{value:"Slide",children:"Slide"}),i.jsx("option",{value:"Rotary",children:"Rotary"}),i.jsx("option",{value:"DIP",children:"DIP Switch"}),i.jsx("option",{value:"Momentary",children:"Momentary"}),i.jsx("option",{value:"Latching",children:"Latching"}),i.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:u.impedance||"",onChange:d=>b({...u,impedance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:u.impedanceUnit||Qe("impedance"),onChange:d=>b({...u,impedanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("impedance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-connectortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),i.jsx("input",{id:`component-connectortype-${c.id}`,type:"text",value:u.connectorType||"",onChange:d=>b({...u,connectorType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-gender-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),i.jsxs("select",{id:`component-gender-${c.id}`,value:u.gender||"N/A",onChange:d=>b({...u,gender:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),c.componentType==="Jumper"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-positions-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),i.jsx("input",{id:`component-positions-${c.id}`,type:"number",min:"2",value:u.positions||3,onChange:d=>b({...u,positions:parseInt(d.target.value)||3}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"}})]})}),c.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:u.impedance||"",onChange:d=>b({...u,impedance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 8"}),i.jsx("select",{value:u.impedanceUnit||Qe("impedance"),onChange:d=>b({...u,impedanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("impedance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>b({...u,power:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]})]}),c.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),i.jsx("input",{id:`component-inputvoltage-${c.id}`,type:"text",value:u.inputVoltage||"",onChange:d=>b({...u,inputVoltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:u.inputVoltageUnit||Qe("voltage"),onChange:d=>b({...u,inputVoltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-outputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),i.jsx("input",{id:`component-outputvoltage-${c.id}`,type:"text",value:u.outputVoltage||"",onChange:d=>b({...u,outputVoltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.outputVoltageUnit||Qe("voltage"),onChange:d=>b({...u,outputVoltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-transistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),i.jsxs("select",{id:`component-transistortype-${c.id}`,value:u.transistorType||"BJT",onChange:d=>b({...u,transistorType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),i.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),i.jsx("option",{value:"MOSFET",children:"MOSFET"}),i.jsx("option",{value:"IGBT",children:"IGBT"}),i.jsx("option",{value:"JFET",children:"JFET"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:u.polarity||"NPN",onChange:d=>b({...u,polarity:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NPN",children:"NPN"}),i.jsx("option",{value:"PNP",children:"PNP"}),i.jsx("option",{value:"N-Channel",children:"N-Channel"}),i.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>b({...u,current:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>b({...u,currentUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>b({...u,resistance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Qe("resistance"),onChange:d=>b({...u,resistanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-configuration-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),i.jsx("input",{id:`component-configuration-${c.id}`,type:"text",value:u.configuration||"",onChange:d=>b({...u,configuration:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),c.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>b({...u,resistance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Qe("resistance"),onChange:d=>b({...u,resistanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-thermistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),i.jsxs("select",{id:`component-thermistortype-${c.id}`,value:u.thermistorType||"NTC",onChange:d=>b({...u,thermistorType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),i.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-beta-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),i.jsx("input",{id:`component-beta-${c.id}`,type:"text",value:u.beta||"",onChange:d=>b({...u,beta:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),c.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-primaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),i.jsx("input",{id:`component-primaryvoltage-${c.id}`,type:"text",value:u.primaryVoltage||"",onChange:d=>b({...u,primaryVoltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:u.primaryVoltageUnit||Qe("voltage"),onChange:d=>b({...u,primaryVoltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-secondaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),i.jsx("input",{id:`component-secondaryvoltage-${c.id}`,type:"text",value:u.secondaryVoltage||"",onChange:d=>b({...u,secondaryVoltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.secondaryVoltageUnit||Qe("voltage"),onChange:d=>b({...u,secondaryVoltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>b({...u,power:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-turns-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),i.jsx("input",{id:`component-turns-${c.id}`,type:"text",value:u.turns||"",onChange:d=>b({...u,turns:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),c.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-signal-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),i.jsx("input",{id:`component-signal-${c.id}`,type:"text",value:u.signal||"",onChange:d=>b({...u,signal:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),c.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ictype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),i.jsxs("select",{id:`component-ictype-${c.id}`,value:u.icType||"Op-Amp",onChange:d=>b({...u,icType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),i.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),i.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),i.jsx("option",{value:"Logic",children:"Logic"}),i.jsx("option",{value:"Memory",children:"Memory"}),i.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),i.jsx("option",{value:"Timer",children:"Timer"}),i.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),i.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),i.jsx("option",{value:"Comparator",children:"Comparator"}),i.jsx("option",{value:"Transceiver",children:"Transceiver"}),i.jsx("option",{value:"Driver",children:"Driver"}),i.jsx("option",{value:"Amplifier",children:"Amplifier"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-datasheet-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),i.jsx("input",{id:`component-datasheet-${c.id}`,type:"text",value:u.datasheet||"",onChange:d=>b({...u,datasheet:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"URL"})]})]}),c.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tubetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),i.jsx("input",{id:`component-tubetype-${c.id}`,type:"text",value:u.tubeType||"",onChange:d=>b({...u,tubeType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),c.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-vrtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),i.jsxs("select",{id:`component-vrtype-${c.id}`,value:u.vrType||"Potentiometer",onChange:d=>b({...u,vrType:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),i.jsx("option",{value:"Rheostat",children:"Rheostat"}),i.jsx("option",{value:"Trimmer",children:"Trimmer"}),i.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>b({...u,resistance:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Qe("resistance"),onChange:d=>b({...u,resistanceUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>b({...u,power:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-taper-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),i.jsxs("select",{id:`component-taper-${c.id}`,value:u.taper||"Linear",onChange:d=>b({...u,taper:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Linear",children:"Linear"}),i.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),i.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),c.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-frequency-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),i.jsx("input",{id:`component-frequency-${c.id}`,type:"text",value:u.frequency||"",onChange:d=>b({...u,frequency:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-loadcapacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),i.jsx("input",{id:`component-loadcapacitance-${c.id}`,type:"text",value:u.loadCapacitance||"",onChange:d=>b({...u,loadCapacitance:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"10ppm",onChange:d=>b({...u,tolerance:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"10ppm",children:"10ppm"}),i.jsx("option",{value:"20ppm",children:"20ppm"}),i.jsx("option",{value:"30ppm",children:"30ppm"}),i.jsx("option",{value:"50ppm",children:"50ppm"}),i.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),c.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>b({...u,voltage:d.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5.1"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>b({...u,voltageUnit:d.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>b({...u,power:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"5%",onChange:d=>b({...u,tolerance:d.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),mx=c=>{const u=vd[c];return!u||!u.prefix||u.prefix.length<1?"?":u.prefix[0].substring(0,1).toUpperCase()},Sx=({componentEditor:c,setComponentEditor:u,componentsTop:b,componentsBottom:f,setComponentsTop:d,setComponentsBottom:B,connectingPin:q,setConnectingPin:pe,componentDialogPosition:G,setComponentDialogPosition:H,isDraggingDialog:me,setIsDraggingDialog:I,dialogDragOffset:ce,setDialogDragOffset:de,areComponentsLocked:P})=>{if(!c||!c.visible)return null;let Z=b.find(A=>A.id===c.id),_e="top";if(Z||(Z=f.find(A=>A.id===c.id),_e="bottom"),!Z)return null;c.layer!==_e&&u({...c,layer:_e});const He=A=>{const U={...A},M=c.abbreviation?.trim()||"",T=c.designator?.trim()||"";if(U.designator=T&&T!=="?"&&T!=="??"&&T!=="***"&&T!=="****"&&T!=="*"?T:M||c.designator||"",U.x=c.x,U.y=c.y,U.layer=c.layer,U.orientation=c.orientation??0,U.abbreviation=c.abbreviation.trim()||mx(A.componentType),"manufacturer"in U&&(U.manufacturer=c.manufacturer),"partNumber"in U&&(U.partNumber=c.partNumber),c.pinCount!==A.pinCount){U.pinCount=c.pinCount;const g=A.pinConnections||[];if(U.pinConnections=new Array(c.pinCount).fill("").map((Y,ve)=>ve<g.length?g[ve]:""),A.pinPolarities){const Y=A.pinPolarities||[];U.pinPolarities=new Array(c.pinCount).fill("").map((ve,nt)=>nt<Y.length?Y[nt]:"")}}else U.pinConnections=A.pinConnections||[],A.pinPolarities&&(U.pinPolarities=A.pinPolarities);return A.componentType==="Resistor"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.tolerance=c.tolerance||void 0):A.componentType==="Capacitor"?(U.capacitance=c.capacitance||void 0,U.capacitanceUnit=c.capacitanceUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.tolerance=c.tolerance||void 0,U.dielectric=c.dielectric||void 0):A.componentType==="Electrolytic Capacitor"?(U.capacitance=c.capacitance||void 0,U.capacitanceUnit=c.capacitanceUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.tolerance=c.tolerance||void 0,U.polarity=c.polarityCapacitor||void 0,U.esr=c.esr||void 0,U.esrUnit=c.esrUnit||void 0,U.temperature=c.temperature||void 0):A.componentType==="Diode"?(U.diodeType=c.diodeType||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.ledColor=c.ledColor||void 0):A.componentType==="Battery"?(U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.capacity=c.capacity||void 0,U.capacityUnit=c.capacityUnit||void 0,U.chemistry=c.chemistry||void 0):A.componentType==="Fuse"?(U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.fuseType=c.fuseType||void 0):A.componentType==="FerriteBead"?(U.impedance=c.impedance||void 0,U.impedanceUnit=c.impedanceUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):A.componentType==="Connector"?(U.connectorType=c.connectorType||void 0,U.gender=c.gender||void 0):A.componentType==="Jumper"?U.positions=c.positions||void 0:A.componentType==="Relay"?(U.coilVoltage=c.coilVoltage||void 0,U.coilVoltageUnit=c.coilVoltageUnit||void 0,U.contactType=c.contactType||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):A.componentType==="Inductor"?(U.inductance=c.inductance||void 0,U.inductanceUnit=c.inductanceUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0):A.componentType==="Speaker"?(U.impedance=c.impedance||void 0,U.impedanceUnit=c.impedanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0):A.componentType==="Motor"?(U.motorType=c.motorType||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):A.componentType==="PowerSupply"?(U.inputVoltage=c.inputVoltage||void 0,U.inputVoltageUnit=c.inputVoltageUnit||void 0,U.outputVoltage=c.outputVoltage||void 0,U.outputVoltageUnit=c.outputVoltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):A.componentType==="Transistor"?(U.transistorType=c.transistorType||void 0,U.polarity=c.polarity||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):A.componentType==="ResistorNetwork"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.configuration=c.configuration||void 0):A.componentType==="Thermistor"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.thermistorType=c.thermistorType||void 0,U.beta=c.beta||void 0):A.componentType==="Switch"?(U.switchType=c.switchType||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0):A.componentType==="Transformer"?(U.primaryVoltage=c.primaryVoltage||void 0,U.primaryVoltageUnit=c.primaryVoltageUnit||void 0,U.secondaryVoltage=c.secondaryVoltage||void 0,U.secondaryVoltageUnit=c.secondaryVoltageUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.turns=c.turns||void 0):A.componentType==="TestPoint"?U.signal=c.signal||void 0:A.componentType==="IntegratedCircuit"?(U.description=c.description||c.designator||void 0,U.datasheet=c.datasheet||void 0,U.icType=c.icType||void 0,c.description&&(U.designator=c.description)):A.componentType==="VacuumTube"?U.tubeType=c.tubeType||void 0:A.componentType==="VariableResistor"?(U.vrType=c.vrType||void 0,U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.taper=c.taper||void 0):A.componentType==="Crystal"?(U.frequency=c.frequency||void 0,U.loadCapacitance=c.loadCapacitance||void 0,U.tolerance=c.tolerance||void 0):A.componentType==="ZenerDiode"&&(U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.tolerance=c.tolerance||void 0),U},E=()=>{if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const A=b.find(T=>T.id===c.id),U=f.find(T=>T.id===c.id),M=A||U;if(M){const T=He(M),g=M.layer,Y=c.layer;g!==Y?g==="top"?(d(ve=>ve.filter(nt=>nt.id!==c.id)),B(ve=>[...ve,T])):(B(ve=>ve.filter(nt=>nt.id!==c.id)),d(ve=>[...ve,T])):Y==="top"?d(ve=>ve.map(nt=>nt.id===c.id?T:nt)):B(ve=>ve.map(nt=>nt.id===c.id?T:nt))}else if(console.warn(`Component ${c.id} not found in either layer array`),c.layer==="top"){const T=f.find(g=>g.id===c.id);if(T){const g=He(T);B(Y=>Y.filter(ve=>ve.id!==c.id)),d(Y=>[...Y,g])}}else{const T=b.find(g=>g.id===c.id);if(T){const g=He(T);d(Y=>Y.filter(ve=>ve.id!==c.id)),B(Y=>[...Y,g])}}u(null),pe(null)};return i.jsxs("div",{"data-component-editor-dialog":!0,onClick:A=>{if(q&&q.componentId===Z.id){const U=A.target;(U.tagName==="BUTTON"||U.tagName==="INPUT"||U.closest("button")||U.closest("input"))&&A.stopPropagation()}},style:{position:"fixed",top:G?`${G.y}px`:"50%",left:G?`${G.x}px`:"50%",transform:"translate(-50%, -50%)",background:q&&q.componentId===Z.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:me?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:A=>{const U=A.target;U.tagName==="BUTTON"||U.tagName==="INPUT"||U.closest("button")||U.closest("input")||G&&(de({x:A.clientX-G.x,y:A.clientY-G.y}),I(!0),A.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:me?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),i.jsx("button",{onClick:()=>{u(null),pe(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),i.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:Z.componentType})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-layer-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),i.jsxs("select",{id:`component-layer-${Z.id}`,name:`component-layer-${Z.id}`,value:c.layer,onChange:A=>u({...c,layer:A.target.value}),disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-orientation-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),i.jsxs("select",{id:`component-orientation-${Z.id}`,name:`component-orientation-${Z.id}`,value:c.orientation??0,onChange:A=>{const U=parseInt(A.target.value)||0;if(u({...c,orientation:U}),!P){const T=(c.layer==="top"?b:f).find(g=>g.id===c.id);if(T){const g={...T,orientation:U};c.layer==="top"?d(Y=>Y.map(ve=>ve.id===c.id?g:ve)):B(Y=>Y.map(ve=>ve.id===c.id?g:ve))}}},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0",children:"0"}),i.jsx("option",{value:"90",children:"90"}),i.jsx("option",{value:"180",children:"180"}),i.jsx("option",{value:"270",children:"270"})]})]}),i.jsx(vx,{component:Z,componentEditor:c,setComponentEditor:u,areComponentsLocked:P}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{htmlFor:`component-abbreviation-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),i.jsx("input",{id:`component-abbreviation-${Z.id}`,name:`component-abbreviation-${Z.id}`,type:"text",maxLength:4,value:c.abbreviation.replace(/\*/g,""),onChange:A=>{const U=A.target.value.substring(0,4).toUpperCase();u({...c,abbreviation:U})},onBlur:A=>{const U=A.target.value.substring(0,4).toUpperCase();u({...c,abbreviation:U})},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:P?.6:1},placeholder:"e.g., U2, R7, C1"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-description-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),i.jsx("input",{id:`component-description-${Z.id}`,name:`component-description-${Z.id}`,type:"text",value:Z.componentType==="IntegratedCircuit"?c.description||c.designator||"":c.designator||"",onChange:A=>{Z.componentType==="IntegratedCircuit"?u({...c,description:A.target.value,designator:A.target.value}):u({...c,designator:A.target.value})},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1},placeholder:Z.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-x-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),i.jsx("input",{id:`component-x-${Z.id}`,name:`component-x-${Z.id}`,type:"number",value:c.x.toFixed(2),onChange:A=>{const U=parseFloat(A.target.value)||0;u({...c,x:U})},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-y-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),i.jsx("input",{id:`component-y-${Z.id}`,name:`component-y-${Z.id}`,type:"number",value:c.y.toFixed(2),onChange:A=>{const U=parseFloat(A.target.value)||0;u({...c,y:U})},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-manufacturer-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),i.jsx("input",{id:`component-manufacturer-${Z.id}`,name:`component-manufacturer-${Z.id}`,type:"text",value:c.manufacturer,onChange:A=>u({...c,manufacturer:A.target.value}),disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-partnumber-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),i.jsx("input",{id:`component-partnumber-${Z.id}`,name:`component-partnumber-${Z.id}`,type:"text",value:c.partNumber,onChange:A=>u({...c,partNumber:A.target.value}),disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${Z.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${Z.id}`,name:`component-pincount-${Z.id}`,type:"number",min:"1",value:c.pinCount,onChange:A=>{const U=Math.max(1,parseInt(A.target.value)||1);u({...c,pinCount:U})},onBlur:A=>{if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const U=Math.max(1,parseInt(A.target.value)||1),T=(c.layer==="top"?b:f).find(g=>g.id===c.id);if(T&&U!==T.pinCount){const g=T.pinConnections||[],Y=new Array(U).fill("").map((Ae,Ye)=>Ye<g.length?g[Ye]:""),ve=T.pinPolarities||[],nt=T.pinPolarities?new Array(U).fill("").map((Ae,Ye)=>Ye<ve.length?ve[Ye]:""):void 0,Ke={...T,pinCount:U,pinConnections:Y,...nt!==void 0&&{pinPolarities:nt}};c.layer==="top"?d(Ae=>Ae.map(Ye=>Ye.id===c.id?Ke:Ye)):B(Ae=>Ae.map(Ye=>Ye.id===c.id?Ke:Ye)),u({...c,pinCount:U})}},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),q&&q.componentId===Z.id&&i.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",q.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const A=Z.componentType==="Electrolytic Capacitor"||Z.componentType==="Diode"||Z.componentType==="Battery"||Z.componentType==="ZenerDiode",U=Z.componentType==="Capacitor"&&"dielectric"in Z&&Z.dielectric==="Tantalum",M=A||U;return i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),M&&i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),i.jsx("tbody",{children:Array.from({length:c.pinCount},(T,g)=>{const ve=(c.layer==="top"?b:f).find(Ye=>Ye.id===c.id),nt=ve?.pinConnections&&ve.pinConnections.length>g?ve.pinConnections[g]:"",Ke=ve?.pinPolarities&&ve.pinPolarities.length>g&&ve.pinPolarities[g]||"",Ae=q&&q.componentId===Z.id&&q.pinIndex===g;return i.jsxs("tr",{style:{cursor:P?"not-allowed":"pointer",background:Ae?"#e6f0ff":nt?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:Ye=>{if(Ye.target.tagName!=="SELECT"){if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}pe(Ae?null:{componentId:Z.id,pinIndex:g})}},title:nt?`Connected to: ${nt}`:"Select this pin, then click on a via or pad to connect",children:[i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsx("input",{id:`pin-radio-${Z.id}-${g}`,name:`pin-radio-${Z.id}`,type:"radio",checked:!!Ae,onChange:()=>{if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}pe(Ae?null:{componentId:Z.id,pinIndex:g})},disabled:P,style:{margin:0,cursor:P?"not-allowed":"pointer",opacity:P?.6:1,width:"10px",height:"10px"}})}),i.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:Ae?600:400,fontFamily:"monospace"},children:g+1}),M&&i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsxs("select",{value:Ke??"",onChange:Ye=>{if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const Pt=Ye.target.value,_=(c.layer==="top"?b:f).find(ne=>ne.id===c.id);if(_){const Me=[..._.pinPolarities||new Array(_.pinCount).fill("")];for(;Me.length<_.pinCount;)Me.push("");Me[g]=Pt;const ie={..._,pinPolarities:Me};c.layer==="top"?d(m=>m.map(D=>D.id===c.id?ie:D)):B(m=>m.map(D=>D.id===c.id?ie:D))}},disabled:P,onClick:Ye=>Ye.stopPropagation(),onFocus:Ye=>Ye.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:P?"not-allowed":"pointer",opacity:P?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[i.jsx("option",{value:"",children:"-"}),i.jsx("option",{value:"+",children:"+"}),i.jsx("option",{value:"-",children:"-"})]},`polarity-${Z.id}-${g}-${Ke}`)}),i.jsx("td",{style:{padding:"2px 4px",color:nt?"#28a745":"#999",fontWeight:nt?600:400,fontFamily:"monospace"},children:nt||"-"})]},g)})})]})})()]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[i.jsx("button",{onClick:()=>{u(null),pe(null)},disabled:P,style:{padding:"2px 5px",background:P?"#f5f5f5":"#fff",color:P?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:P?"not-allowed":"pointer",fontSize:"10px",opacity:P?.6:1},children:"Cancel"}),i.jsx("button",{onClick:E,disabled:P,style:{padding:"2px 5px",background:P?"#f5f5f5":"#0b5fff",color:P?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:P?"not-allowed":"pointer",fontSize:"10px",opacity:P?.6:1},children:"Save"})]})]})};function wx(){const[c,u]=C.useState([]),[b,f]=C.useState(!1),[d,B]=C.useState([]),[q,pe]=C.useState(null),[G,H]=C.useState("trace"),[me,I]=C.useState("top"),ce=C.useRef([]),de=C.useRef(0),P=C.useRef(!1),Z=C.useCallback(()=>{f(!0),B([]),ce.current=[]},[]),_e=C.useCallback(()=>{f(!1),B([]),ce.current=[]},[]),He=C.useCallback(A=>{B(U=>[...U,A]),ce.current=[...ce.current,A]},[]),E=C.useCallback(A=>{u(U=>[...U,A]),B([]),ce.current=[]},[]);return{drawingStrokes:c,setDrawingStrokes:u,isDrawing:b,setIsDrawing:f,currentStroke:d,setCurrentStroke:B,tracePreviewMousePos:q,setTracePreviewMousePos:pe,drawingMode:G,setDrawingMode:H,selectedDrawingLayer:me,setSelectedDrawingLayer:I,currentStrokeRef:ce,lastTraceClickTimeRef:de,isDoubleClickingTraceRef:P,startDrawing:Z,stopDrawing:_e,addPointToStroke:He,finishStroke:E}}function jx(){const[c,u]=C.useState(new Set),[b,f]=C.useState(!1),[d,B]=C.useState(new Set),[q,pe]=C.useState(new Set),[G,H]=C.useState(new Set),me=C.useCallback(()=>{u(new Set),B(new Set),pe(new Set),H(new Set)},[]),I=C.useCallback((P,Z="stroke")=>{Z==="stroke"?u(_e=>new Set([..._e,P])):Z==="component"?B(_e=>new Set([..._e,P])):Z==="power"?pe(_e=>new Set([..._e,P])):Z==="ground"&&H(_e=>new Set([..._e,P]))},[]),ce=C.useCallback((P,Z="stroke")=>{Z==="stroke"?u(_e=>{const He=new Set(_e);return He.delete(P),He}):Z==="component"?B(_e=>{const He=new Set(_e);return He.delete(P),He}):Z==="power"?pe(_e=>{const He=new Set(_e);return He.delete(P),He}):Z==="ground"&&H(_e=>{const He=new Set(_e);return He.delete(P),He})},[]),de=C.useCallback((P,Z="stroke")=>{Z==="stroke"?u(P):Z==="component"?B(P):Z==="power"?pe(P):Z==="ground"&&H(P)},[]);return{selectedIds:c,setSelectedIds:u,isSelecting:b,setIsSelecting:f,selectedComponentIds:d,setSelectedComponentIds:B,selectedPowerIds:q,setSelectedPowerIds:pe,selectedGroundIds:G,setSelectedGroundIds:H,clearSelection:me,addToSelection:I,removeFromSelection:ce,setSelection:de}}function Tx(){const[c,u]=C.useState(null),[b,f]=C.useState(!1),[d,B]=C.useState(null),[q,pe]=C.useState("nudge"),G=C.useCallback((me,I)=>{u(me),f(!0),B(I)},[]),H=C.useCallback(()=>{f(!1),u(null),B(null)},[]);return{selectedImageForTransform:c,setSelectedImageForTransform:u,isTransforming:b,setIsTransforming:f,transformStartPos:d,setTransformStartPos:B,transformMode:q,setTransformMode:pe,startTransform:G,stopTransform:H}}function Cx(){const[c,u]=C.useState(null),[b,f]=C.useState(null),[d,B]=C.useState("overlay"),[q,pe]=C.useState(50),[G,H]=C.useState(!1),[me,I]=C.useState(!1),[ce,de]=C.useState(!1),[P,Z]=C.useState(!1),_e=C.useCallback(A=>{u(A)},[]),He=C.useCallback(A=>{f(A)},[]),E=C.useCallback(()=>{u(null),f(null)},[]);return{topImage:c,setTopImage:u,bottomImage:b,setBottomImage:f,currentView:d,setCurrentView:B,transparency:q,setTransparency:pe,isTransparencyCycling:G,setIsTransparencyCycling:H,isGrayscale:me,setIsGrayscale:I,isBlackAndWhiteEdges:ce,setIsBlackAndWhiteEdges:de,isBlackAndWhiteInverted:P,setIsBlackAndWhiteInverted:Z,loadTopImage:_e,loadBottomImage:He,clearImages:E}}function zx(){const[c,u]=C.useState(1),[b,f]=C.useState({x:0,y:0}),[d,B]=C.useState(!1),[q,pe]=C.useState(!1),G=C.useCallback(()=>{u(1),f({x:0,y:0})},[]),H=C.useCallback((P=1.2)=>{u(Z=>Z*P)},[]),me=C.useCallback((P=1.2)=>{u(Z=>Z/P)},[]),I=C.useCallback(P=>{u(P)},[]),ce=C.useCallback((P,Z)=>{f(_e=>({x:_e.x+P,y:_e.y+Z}))},[]),de=C.useCallback((P,Z)=>{f({x:P,y:Z})},[]);return{viewScale:c,setViewScale:u,viewPan:b,setViewPan:f,isShiftConstrained:d,setIsShiftConstrained:B,showBothLayers:q,setShowBothLayers:pe,resetView:G,zoomIn:H,zoomOut:me,setZoom:I,pan:ce,setPan:de}}function Ot(c,u,b,f){if(u==="power"){const B=c[u]||"";return typeof B=="string"&&B.trim()!==""?{value:B.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[u]!==void 0||c[b]!==void 0)return{value:c[u]||"",unit:c[b]||f};const d=c[u]||"";return typeof d=="string"&&d.trim()!==""?Rx(d):{value:"",unit:f}}function Rx(c){if(!c||c.trim()==="")return{value:"",unit:""};const u=c.trim(),b=u.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(b)return{value:b[1],unit:b[2]||""};const f=u.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return f?{value:f[1],unit:f[2]||""}:{value:u,unit:""}}function Dx(){const[c,u]=C.useState([]),[b,f]=C.useState([]),[d,B]=C.useState(null),[q,pe]=C.useState(null),[G,H]=C.useState(null),[me,I]=C.useState(!1),[ce,de]=C.useState(null),P=C.useCallback((A,U)=>{U==="top"?u(M=>[...M,A]):f(M=>[...M,A])},[]),Z=C.useCallback((A,U,M)=>{M==="top"?u(T=>T.map(g=>g.id===A?{...g,...U}:g)):f(T=>T.map(g=>g.id===A?{...g,...U}:g))},[]),_e=C.useCallback((A,U)=>{U==="top"?u(M=>M.filter(T=>T.id!==A)):f(M=>M.filter(T=>T.id!==A))},[]),He=C.useCallback((A,U)=>{const M={visible:!0,layer:U,id:A.id,designator:A.designator||"",abbreviation:A.abbreviation||"",manufacturer:"manufacturer"in A&&A.manufacturer||"",partNumber:"partNumber"in A&&A.partNumber||"",pinCount:A.pinCount,x:A.x,y:A.y,orientation:A.orientation??0};if(A.componentType==="Resistor"){const T=A,g=Ot(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=g.value,M.resistanceUnit=g.unit;const Y=Ot(T,"power","powerUnit","W");M.power=Y.value||"1/4",M.tolerance=T.tolerance||"5%"}else if(A.componentType==="Capacitor"){const T=A,g=Ot(T,"capacitance","capacitanceUnit",Qe("capacitance"));M.capacitance=g.value,M.capacitanceUnit=g.unit;const Y=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=Y.value,M.voltageUnit=Y.unit,M.tolerance=T.tolerance||"10%",M.dielectric=T.dielectric||"Ceramic"}else if(A.componentType==="Electrolytic Capacitor"){const T=A,g=Ot(T,"capacitance","capacitanceUnit",Qe("capacitance"));M.capacitance=g.value,M.capacitanceUnit=g.unit;const Y=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=Y.value,M.voltageUnit=Y.unit,M.tolerance=T.tolerance||"20%",M.polarityCapacitor=T.polarity||"Positive";const ve=Ot(T,"esr","esrUnit",Qe("esr"));M.esr=ve.value,M.esrUnit=ve.unit,M.temperature=T.temperature||""}else if(A.componentType==="Diode"){const T=A;M.diodeType=T.diodeType||"Standard";const g=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const Y=Ot(T,"current","currentUnit",Qe("current"));M.current=Y.value,M.currentUnit=Y.unit,M.ledColor=T.ledColor||""}else if(A.componentType==="Battery"){const T=A,g=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const Y=Ot(T,"capacity","capacityUnit",Qe("capacity"));M.capacity=Y.value,M.capacityUnit=Y.unit,M.chemistry=T.chemistry||"Li-ion"}else if(A.componentType==="Fuse"){const T=A,g=Ot(T,"current","currentUnit",Qe("current"));M.current=g.value,M.currentUnit=g.unit;const Y=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=Y.value,M.voltageUnit=Y.unit,M.fuseType=T.fuseType||"Fast-blow"}else if(A.componentType==="FerriteBead"){const T=A,g=Ot(T,"impedance","impedanceUnit",Qe("impedance"));M.impedance=g.value,M.impedanceUnit=g.unit;const Y=Ot(T,"current","currentUnit",Qe("current"));M.current=Y.value,M.currentUnit=Y.unit}else if(A.componentType==="Connector"){const T=A;M.connectorType=T.connectorType||"",M.gender=T.gender||"N/A"}else if(A.componentType==="Jumper"){const T=A;M.positions=T.positions||3}else if(A.componentType==="Relay"){const T=A,g=Ot(T,"coilVoltage","coilVoltageUnit",Qe("coilVoltage"));M.coilVoltage=g.value,M.coilVoltageUnit=g.unit,M.contactType=T.contactType||"SPST";const Y=Ot(T,"current","currentUnit",Qe("current"));M.current=Y.value,M.currentUnit=Y.unit}else if(A.componentType==="Inductor"){const T=A,g=Ot(T,"inductance","inductanceUnit",Qe("inductance"));M.inductance=g.value,M.inductanceUnit=g.unit;const Y=Ot(T,"current","currentUnit",Qe("current"));M.current=Y.value,M.currentUnit=Y.unit;const ve=Ot(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=ve.value,M.resistanceUnit=ve.unit}else if(A.componentType==="Speaker"){const T=A,g=Ot(T,"impedance","impedanceUnit",Qe("impedance"));M.impedance=g.value,M.impedanceUnit=g.unit;const Y=Ot(T,"power","powerUnit","W");M.power=Y.value||"1"}else if(A.componentType==="Motor"){const T=A;M.motorType=T.motorType||"DC";const g=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const Y=Ot(T,"current","currentUnit",Qe("current"));M.current=Y.value,M.currentUnit=Y.unit}else if(A.componentType==="PowerSupply"){const T=A,g=Ot(T,"inputVoltage","inputVoltageUnit",Qe("inputVoltage"));M.inputVoltage=g.value,M.inputVoltageUnit=g.unit;const Y=Ot(T,"outputVoltage","outputVoltageUnit",Qe("outputVoltage"));M.outputVoltage=Y.value,M.outputVoltageUnit=Y.unit;const ve=Ot(T,"current","currentUnit",Qe("current"));M.current=ve.value,M.currentUnit=ve.unit}else if(A.componentType==="Transistor"){const T=A;M.transistorType=T.transistorType||"BJT",M.polarity=T.polarity||"NPN";const g=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const Y=Ot(T,"current","currentUnit",Qe("current"));M.current=Y.value,M.currentUnit=Y.unit}else if(A.componentType==="ResistorNetwork"){const T=A,g=Ot(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=g.value,M.resistanceUnit=g.unit,M.configuration=T.configuration||""}else if(A.componentType==="Thermistor"){const T=A,g=Ot(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=g.value,M.resistanceUnit=g.unit,M.thermistorType=T.thermistorType||"NTC",M.beta=T.beta||""}else if(A.componentType==="Switch"){const T=A;M.switchType=T.switchType||"Toggle";const g=Ot(T,"current","currentUnit",Qe("current"));M.current=g.value,M.currentUnit=g.unit;const Y=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=Y.value,M.voltageUnit=Y.unit}else if(A.componentType==="Transformer"){const T=A,g=Ot(T,"primaryVoltage","primaryVoltageUnit",Qe("primaryVoltage"));M.primaryVoltage=g.value,M.primaryVoltageUnit=g.unit;const Y=Ot(T,"secondaryVoltage","secondaryVoltageUnit",Qe("secondaryVoltage"));M.secondaryVoltage=Y.value,M.secondaryVoltageUnit=Y.unit;const ve=Ot(T,"power","powerUnit",Qe("power"));M.power=ve.value||"1",M.turns=T.turns||""}else if(A.componentType==="TestPoint"){const T=A;M.signal=T.signal||""}else if(A.componentType==="IntegratedCircuit"){const T=A;M.description=T.description||"",M.datasheet=T.datasheet||"",M.icType=T.icType||"Op-Amp"}else if(A.componentType==="VacuumTube"){const T=A;M.tubeType=T.tubeType||""}else if(A.componentType==="VariableResistor"){const T=A;M.vrType=T.vrType||"Potentiometer";const g=Ot(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=g.value,M.resistanceUnit=g.unit;const Y=Ot(T,"power","powerUnit",Qe("power"));M.power=Y.value||"1/4",M.taper=T.taper||""}else if(A.componentType==="Crystal"){const T=A;M.frequency=T.frequency||"",M.loadCapacitance=T.loadCapacitance||"",M.tolerance=T.tolerance||""}else if(A.componentType==="ZenerDiode"){const T=A,g=Ot(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const Y=Ot(T,"power","powerUnit",Qe("power"));M.power=Y.value||"1/4",M.tolerance=T.tolerance||"5%"}B(M)},[]),E=C.useCallback(()=>{B(null),pe(null)},[]);return{componentsTop:c,setComponentsTop:u,componentsBottom:b,setComponentsBottom:f,componentEditor:d,setComponentEditor:B,connectingPin:q,setConnectingPin:pe,componentDialogPosition:G,setComponentDialogPosition:H,isDraggingDialog:me,setIsDraggingDialog:I,dialogDragOffset:ce,setDialogDragOffset:de,addComponent:P,updateComponent:Z,removeComponent:_e,openComponentEditor:He,closeComponentEditor:E}}function Ax(){const[c,u]=C.useState([]),[b,f]=C.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),[d,B]=C.useState([]),[q,pe]=C.useState([]),[G,H]=C.useState(null),[me,I]=C.useState(null),ce=C.useCallback(T=>{u(g=>[...g,T])},[]),de=C.useCallback((T,g)=>{u(Y=>Y.map(ve=>ve.id===T?{...ve,...g}:ve))},[]),P=C.useCallback(T=>{u(g=>g.filter(Y=>Y.id!==T)),B(g=>g.filter(Y=>Y.powerBusId!==T))},[]),Z=C.useCallback(T=>{B(g=>[...g,T])},[]),_e=C.useCallback(T=>{B(g=>g.filter(Y=>Y.id!==T))},[]),He=C.useCallback(T=>{pe(g=>[...g,T])},[]),E=C.useCallback(T=>{pe(g=>g.filter(Y=>Y.id!==T))},[]),A=C.useCallback(T=>{f(g=>[...g,T])},[]),U=C.useCallback((T,g)=>{f(Y=>Y.map(ve=>ve.id===T?{...ve,...g}:ve))},[]),M=C.useCallback(T=>{f(g=>g.filter(Y=>Y.id!==T)),pe(g=>g.filter(Y=>Y.groundBusId===T))},[]);return{powerBuses:c,setPowerBuses:u,groundBuses:b,setGroundBuses:f,powerSymbols:d,setPowerSymbols:B,groundSymbols:q,setGroundSymbols:pe,powerEditor:G,setPowerEditor:H,groundEditor:me,setGroundEditor:I,addPowerBus:ce,updatePowerBus:de,removePowerBus:P,addPowerSymbol:Z,removePowerSymbol:_e,addGroundSymbol:He,removeGroundSymbol:E,addGroundBus:A,updateGroundBus:U,removeGroundBus:M}}function kx(){const u=C.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"26",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"26",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"26",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[])(),[b,f]=C.useState(u.brushColor),[d,B]=C.useState(u.brushSize),[q,pe]=C.useState(u.topTraceColor),[G,H]=C.useState(u.bottomTraceColor),[me,I]=C.useState(u.topTraceSize),[ce,de]=C.useState(u.bottomTraceSize),[P,Z]=C.useState(u.topPadColor),[_e,He]=C.useState(u.bottomPadColor),[E,A]=C.useState(u.topPadSize),[U,M]=C.useState(u.bottomPadSize),[T,g]=C.useState(u.topComponentColor),[Y,ve]=C.useState(u.bottomComponentColor),[nt,Ke]=C.useState(u.topComponentSize),[Ae,Ye]=C.useState(u.bottomComponentSize),Pt=C.useCallback((_,ne,Me)=>{_==="trace"&&Me?Me==="top"?localStorage.setItem("defaultTopTraceSize",String(ne)):localStorage.setItem("defaultBottomTraceSize",String(ne)):_==="pad"&&Me?Me==="top"?localStorage.setItem("defaultTopPadSize",String(ne)):localStorage.setItem("defaultBottomPadSize",String(ne)):_==="component"&&Me?Me==="top"?localStorage.setItem("defaultTopComponentSize",String(ne)):localStorage.setItem("defaultBottomComponentSize",String(ne)):_==="via"?localStorage.setItem("defaultViaSize",String(ne)):_==="power"?localStorage.setItem("defaultPowerSize",String(ne)):_==="ground"?localStorage.setItem("defaultGroundSize",String(ne)):_==="brush"&&localStorage.setItem("defaultBrushSize",String(ne))},[]),st=C.useCallback((_,ne,Me)=>{_==="trace"&&Me?Me==="top"?localStorage.setItem("defaultTopTraceColor",ne):localStorage.setItem("defaultBottomTraceColor",ne):_==="pad"&&Me?Me==="top"?localStorage.setItem("defaultTopPadColor",ne):localStorage.setItem("defaultBottomPadColor",ne):_==="component"&&Me?Me==="top"?localStorage.setItem("defaultTopComponentColor",ne):localStorage.setItem("defaultBottomComponentColor",ne):_==="via"?localStorage.setItem("defaultViaColor",ne):_==="brush"&&localStorage.setItem("defaultBrushColor",ne)},[]);return{brushColor:b,setBrushColor:f,brushSize:d,setBrushSize:B,topTraceColor:q,setTopTraceColor:pe,bottomTraceColor:G,setBottomTraceColor:H,topTraceSize:me,setTopTraceSize:I,bottomTraceSize:ce,setBottomTraceSize:de,topPadColor:P,setTopPadColor:Z,bottomPadColor:_e,setBottomPadColor:He,topPadSize:E,setTopPadSize:A,bottomPadSize:U,setBottomPadSize:M,topComponentColor:T,setTopComponentColor:g,bottomComponentColor:Y,setBottomComponentColor:ve,topComponentSize:nt,setTopComponentSize:Ke,bottomComponentSize:Ae,setBottomComponentSize:Ye,saveDefaultSize:Pt,saveDefaultColor:st}}const Nx=(c,u,b)=>{const f=`tool_${c}_color`,d=`tool_${c}_size`;localStorage.setItem(f,u),localStorage.setItem(d,String(b))};function Mx(c,u,b,f,d,B,q,pe,G,H,me,I,ce,de,P,Z,_e,He,E,A){const[U,M]=C.useState(()=>c()),T=C.useRef(null),g=C.useRef(f),Y=C.useRef(d),ve=C.useCallback(Ae=>u==="draw"&&b==="trace"?Ae.get("trace"):u==="draw"&&b==="via"?Ae.get("via"):u==="draw"&&b==="pad"?Ae.get("pad"):u==="component"?Ae.get("component"):u==="power"?Ae.get("power"):u==="ground"?Ae.get("ground"):null,[u,b]);C.useEffect(()=>{M(Ae=>{const Ye=ve(Ae),Pt=Ye?.id||null,st=T.current,_=new Map(Ae);if(st&&st!==Pt){const ne=Ae.get(st);ne&&(Nx(st,g.current,Y.current),_.set(st,{...ne,settings:{color:g.current,size:Y.current}}))}if(Ye&&Pt!==st)if(u==="draw"&&b==="trace"){const ne=He||"top",Me=ne==="top"?B:q,ie=ne==="top"?pe:G;g.current=Me,Y.current=ie,_.set("trace",{...Ye,settings:{color:Me,size:ie}})}else if(u==="draw"&&b==="pad"){const ne=E||"top",Me=ne==="top"?H:me,ie=ne==="top"?I:ce;g.current=Me,Y.current=ie,_.set("pad",{...Ye,settings:{color:Me,size:ie}})}else if(u==="component"){const ne=A||"top",Me=ne==="top"?de:P,ie=ne==="top"?Z:_e;g.current=Me,Y.current=ie,_.set("component",{...Ye,settings:{color:Me,size:ie}})}else g.current=Ye.settings.color,Y.current=Ye.settings.size;return T.current=Pt,_})},[u,b,f,d,B,q,pe,G,H,me,I,ce,de,P,Z,_e,He,E,A,ve]);const nt=C.useCallback((Ae,Ye)=>{M(Pt=>{const st=new Map(Pt),_=st.get(Ae);return _&&st.set(Ae,{..._,settings:Ye}),st})},[]),Ke=C.useCallback((Ae,Ye,Pt)=>{M(st=>{const _=new Map(st),ne=_.get(Ae);if(ne){const Me=new Map(ne.layerSettings);Me.set(Ye,Pt),_.set(Ae,{...ne,layerSettings:Me})}return _})},[]);return{toolRegistry:U,setToolRegistry:M,updateToolSettings:nt,updateToolLayerSettings:Ke,getCurrentToolDef:ve}}function Ux(){const[c,u]=C.useState(!1),[b,f]=C.useState(!1),[d,B]=C.useState(!1),[q,pe]=C.useState(!1),[G,H]=C.useState(!1),[me,I]=C.useState(!1),[ce,de]=C.useState(!1),P=C.useCallback(()=>{u(!0),f(!0),B(!0),pe(!0),H(!0),I(!0),de(!0)},[]),Z=C.useCallback(()=>{u(!1),f(!1),B(!1),pe(!1),H(!1),I(!1),de(!1)},[]);return{areImagesLocked:c,setAreImagesLocked:u,areViasLocked:b,setAreViasLocked:f,arePadsLocked:d,setArePadsLocked:B,areTracesLocked:q,setAreTracesLocked:pe,areComponentsLocked:G,setAreComponentsLocked:H,areGroundNodesLocked:me,setAreGroundNodesLocked:I,arePowerNodesLocked:ce,setArePowerNodesLocked:de,lockAll:P,unlockAll:Z}}function Bx(){const[c,u]=C.useState(null),[b,f]=C.useState({visible:!1,size:6}),[d,B]=C.useState({visible:!1,interval:5}),[q,pe]=C.useState({visible:!1,source:null,interval:5}),[G,H]=C.useState({visible:!1,text:""}),[me,I]=C.useState({visible:!1,title:"",message:""}),[ce,de]=C.useState({visible:!1}),[P,Z]=C.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[_e,He]=C.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[E,A]=C.useState(!1),[U,M]=C.useState(!0);return{openMenu:c,setOpenMenu:u,setSizeDialog:b,setSetSizeDialog:f,autoSaveDialog:d,setAutoSaveDialog:B,autoSavePromptDialog:q,setAutoSavePromptDialog:pe,debugDialog:G,setDebugDialog:H,errorDialog:me,setErrorDialog:I,newProjectDialog:ce,setNewProjectDialog:de,newProjectSetupDialog:P,setNewProjectSetupDialog:Z,saveAsDialog:_e,setSaveAsDialog:He,showColorPicker:E,setShowColorPicker:A,showWelcomeDialog:U,setShowWelcomeDialog:M}}function _x(){const[c,u]=C.useState(!1),[b,f]=C.useState(1),[d,B]=C.useState(null),[q,pe]=C.useState(""),[G,H]=C.useState(""),[me,I]=C.useState(null),[ce,de]=C.useState("pcb_project"),[P,Z]=C.useState([]),[_e,He]=C.useState(-1),E=C.useRef(null),A=C.useRef(!1),U=C.useRef(!1);return{autoSaveEnabled:c,setAutoSaveEnabled:u,autoSaveInterval:b,setAutoSaveInterval:f,autoSaveDirHandle:d,setAutoSaveDirHandle:B,autoSaveBaseName:q,setAutoSaveBaseName:pe,currentProjectFilePath:G,setCurrentProjectFilePath:H,projectDirHandle:me,setProjectDirHandle:I,projectName:ce,setProjectName:de,autoSaveFileHistory:P,setAutoSaveFileHistory:Z,currentFileIndex:_e,setCurrentFileIndex:He,autoSaveIntervalRef:E,hasChangesSinceLastAutoSaveRef:A,prevAutoSaveEnabledRef:U}}const gd=c=>{const u=vd[c];return!u||!u.prefix||u.prefix.length<1?"?":u.prefix[0].substring(0,1).toUpperCase()},ha=(c,u,b)=>{const f=`tool_${c}_color`,d=`tool_${c}_size`,B=localStorage.getItem(f),q=localStorage.getItem(d);return{color:B||u,size:q?parseInt(q,10):b}},$u=(c,u,b)=>{localStorage.setItem(`tool_${c}_color`,u),localStorage.setItem(`tool_${c}_size`,String(b))},Ln=(c,u,b,f)=>{const d=`tool_${c}_${u}_color`,B=`tool_${c}_${u}_size`,q=localStorage.getItem(d),pe=localStorage.getItem(B);return{color:q||b,size:pe?parseInt(pe,10):f}},Yi=(c,u,b,f)=>{localStorage.setItem(`tool_${c}_${u}_color`,b),localStorage.setItem(`tool_${c}_${u}_size`,String(f))},Ox=()=>{const c=new Map,u={top:"#0072B2",bottom:"#56B4E9"},b={top:Rs.DEFAULT_SIZE,bottom:Rs.DEFAULT_SIZE},f={top:"#AA4499",bottom:"#F781BF"},d={top:6,bottom:6},B={top:"#6A3D9A",bottom:"#9467BD"},q={top:18,bottom:18};return c.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:ha("select","#ff0000",10),layerSettings:new Map([["top",Ln("select","top","#ff0000",10)],["bottom",Ln("select","bottom","#ff0000",10)]])}),c.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:ha("via",xd,Rs.DEFAULT_SIZE),layerSettings:new Map([["top",Ln("via","top",xd,Rs.DEFAULT_SIZE)],["bottom",Ln("via","bottom",xd,Rs.DEFAULT_SIZE)]]),defaultLayer:"top"}),c.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:ha("pad",Kg,Rs.DEFAULT_SIZE),layerSettings:new Map([["top",Ln("pad","top",u.top,b.top)],["bottom",Ln("pad","bottom",u.bottom,b.bottom)]]),defaultLayer:"top"}),c.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:ha("trace",bh,2),layerSettings:new Map([["top",Ln("trace","top",f.top,d.top)],["bottom",Ln("trace","bottom",f.bottom,d.bottom)]]),defaultLayer:"top"}),c.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:ha("component",vh,mh.DEFAULT_SIZE),layerSettings:new Map([["top",Ln("component","top",B.top,q.top)],["bottom",Ln("component","bottom",B.bottom,q.bottom)]]),defaultLayer:"top"}),c.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:ha("power",yd,26),layerSettings:new Map([["top",Ln("power","top",yd,26)],["bottom",Ln("power","bottom",yd,26)]]),defaultLayer:"top"}),c.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:ha("ground",Eu,26),layerSettings:new Map([["top",Ln("ground","top",Eu,26)],["bottom",Ln("ground","bottom",Eu,26)]]),defaultLayer:"top"}),c.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:ha("erase","#f5a3b3",5),layerSettings:new Map([["top",Ln("erase","top","#f5a3b3",5)],["bottom",Ln("erase","bottom","#f5a3b3",5)]])}),c.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:ha("pan","#ff0000",10),layerSettings:new Map([["top",Ln("pan","top","#ff0000",10)],["bottom",Ln("pan","bottom","#ff0000",10)]])}),c.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:ha("magnify","#ff0000",10),layerSettings:new Map([["top",Ln("magnify","top","#ff0000",10)],["bottom",Ln("magnify","bottom","#ff0000",10)]])}),c};function Hx(){const u=Cx(),{topImage:b,setTopImage:f,bottomImage:d,setBottomImage:B,currentView:q,setCurrentView:pe,transparency:G,setTransparency:H,isTransparencyCycling:me,setIsTransparencyCycling:I,isGrayscale:ce,setIsGrayscale:de,isBlackAndWhiteEdges:P,setIsBlackAndWhiteEdges:Z,isBlackAndWhiteInverted:_e,setIsBlackAndWhiteInverted:He}=u,[E,A]=C.useState("none"),U=kx(),{brushColor:M,setBrushColor:T,brushSize:g,setBrushSize:Y,topTraceColor:ve,setTopTraceColor:nt,bottomTraceColor:Ke,setBottomTraceColor:Ae,topTraceSize:Ye,setTopTraceSize:Pt,bottomTraceSize:st,setBottomTraceSize:_,topPadColor:ne,setTopPadColor:Me,bottomPadColor:ie,setBottomPadColor:m,topPadSize:D,setTopPadSize:W,bottomPadSize:ue,setBottomPadSize:Ee,topComponentColor:Je,setTopComponentColor:rt,bottomComponentColor:pt,setBottomComponentColor:gn,topComponentSize:Ht,setTopComponentSize:Ol,bottomComponentSize:te,setBottomComponentSize:he,saveDefaultSize:Te,saveDefaultColor:oe}=U,Ze=wx(),{drawingStrokes:ge,setDrawingStrokes:Ue,isDrawing:ke,setIsDrawing:Be,currentStroke:Oe,setCurrentStroke:ft,tracePreviewMousePos:Mt,setTracePreviewMousePos:bt,drawingMode:Se,setDrawingMode:qe,selectedDrawingLayer:$e,setSelectedDrawingLayer:Et,currentStrokeRef:jt,lastTraceClickTimeRef:Fn,isDoubleClickingTraceRef:pl}=Ze,Wi=Tx(),{selectedImageForTransform:Yt,setSelectedImageForTransform:hi,isTransforming:$n,setIsTransforming:hl,transformStartPos:In,setTransformStartPos:gi,transformMode:fn,setTransformMode:qn}=Wi,Xi=zx(),{viewScale:Pe,setViewScale:We,viewPan:Fe,setViewPan:zn,isShiftConstrained:ga,setIsShiftConstrained:cr,showBothLayers:Ds,setShowBothLayers:As}=Xi,[it,gl]=C.useState("top"),[il,dr]=C.useState("top"),[Cl,ks]=C.useState("top"),ur=Mx(Ox,E,Se,M,g,ve,Ke,Ye,st,ne,ie,D,ue,Je,pt,Ht,te,it,il,Cl),{toolRegistry:pn,setToolRegistry:al,getCurrentToolDef:Hl}=ur,Pn=ot.useRef(null),vn=ot.useRef(M),ol=ot.useRef(g);ot.useEffect(()=>{al(a=>{const r=Hl(a),x=r?.id||null,y=Pn.current,j=new Map(a);if(y&&y!==x){const v=a.get(y);v&&($u(y,vn.current,ol.current),j.set(y,{...v,settings:{color:vn.current,size:ol.current}}))}if(r&&x!==y)if(E==="draw"&&Se==="trace"){const v=it||"top",p=v==="top"?ve:Ke,S=v==="top"?Ye:st;T(p),Y(S),vn.current=p,ol.current=S,j.set("trace",{...r,settings:{color:p,size:S}})}else if(E==="draw"&&Se==="pad"){const v=il||"top",p=v==="top"?ne:ie,S=v==="top"?D:ue;T(p),Y(S),vn.current=p,ol.current=S,j.set("pad",{...r,settings:{color:p,size:S}})}else if(E==="component"){const v=Cl||"top",p=v==="top"?Je:pt,S=v==="top"?Ht:te;T(p),Y(S),vn.current=p,ol.current=S,j.set("component",{...r,settings:{color:p,size:S}})}else{const v=r.settings;T(v.color),Y(v.size),vn.current=v.color,ol.current=v.size}return Pn.current=x,j})},[E,Se,Hl,ve,Ke,Ye,st,ne,ie,D,ue,Je,pt,Ht,te]),ot.useEffect(()=>{al(a=>{const r=Hl(a);if(r)if(E==="draw"&&Se==="trace"){const x=it||"top";Yi(r.id,x,M,g),x==="top"?(nt(M),Pt(g),oe("trace",M,"top"),Te("trace",g,"top")):(Ae(M),_(g),oe("trace",M,"bottom"),Te("trace",g,"bottom"));const y=new Map(a),j=new Map(r.layerSettings);return j.set(x,{color:M,size:g}),y.set(r.id,{...r,layerSettings:j,settings:{color:M,size:g}}),vn.current=M,ol.current=g,y}else if(E==="draw"&&Se==="pad"){const x=il||"top";Yi(r.id,x,M,g),x==="top"?(Me(M),W(g),oe("pad",M,"top"),Te("pad",g,"top")):(m(M),Ee(g),oe("pad",M,"bottom"),Te("pad",g,"bottom"));const y=new Map(a),j=new Map(r.layerSettings);return j.set(x,{color:M,size:g}),y.set(r.id,{...r,layerSettings:j,settings:{color:M,size:g}}),vn.current=M,ol.current=g,y}else if(E==="component"){const x=Cl||"top";Yi(r.id,x,M,g),x==="top"?(rt(M),Ol(g),oe("component",M,"top"),Te("component",g,"top")):(gn(M),he(g),oe("component",M,"bottom"),Te("component",g,"bottom"));const y=new Map(a),j=new Map(r.layerSettings);return j.set(x,{color:M,size:g}),y.set(r.id,{...r,layerSettings:j,settings:{color:M,size:g}}),vn.current=M,ol.current=g,y}else{$u(r.id,M,g);const x=new Map(a);return x.set(r.id,{...r,settings:{color:M,size:g}}),vn.current=M,ol.current=g,x}return a})},[M,g,E,Se,it,il,Cl,Hl,oe,Te,Yi,nt,Ae,Pt,_,Me,m,W,Ee,rt,gn,Ol,he]),ot.useEffect(()=>{E==="power"?(Il(!0),Aa(null)):(Il(!1),Aa(null))},[E]),ot.useEffect(()=>{E==="ground"?(ea(!0),us(null)):(ea(!1),us(null))},[E]);const[Ns,fr]=C.useState(void 0),[,xc]=C.useState([]),[,pr]=C.useState([]),[,xi]=C.useState([]),[,Gi]=C.useState([]),[xa,lo]=C.useState([]),[Ms,io]=C.useState([]),[_n,yc]=C.useState([]),[hr,ya]=C.useState([]),Rn=C.useRef(null),md=jx(),{selectedIds:Nt,setSelectedIds:qt,isSelecting:Us,setIsSelecting:Yo,selectedComponentIds:vt,setSelectedComponentIds:Ut,selectedPowerIds:mt,setSelectedPowerIds:Wt,selectedGroundIds:Vt,setSelectedGroundIds:Xt}=md,bc=Dx(),{componentsTop:Dt,setComponentsTop:Nn,componentsBottom:xt,setComponentsBottom:wn,componentEditor:ba,setComponentEditor:gr,connectingPin:On,setConnectingPin:Wo,componentDialogPosition:Bs,setComponentDialogPosition:yi,isDraggingDialog:xr,setIsDraggingDialog:yr,dialogDragOffset:ao,setDialogDragOffset:_s,openComponentEditor:Sd}=bc,wd=Ax(),{powerBuses:Bt,setPowerBuses:Hn,groundBuses:zl,setGroundBuses:Ni,powerSymbols:oo,setPowerSymbols:Zn,groundSymbols:vc,setGroundSymbols:Rl,powerEditor:xl,setPowerEditor:Mi}=wd,Ui=Ux(),{areImagesLocked:el,setAreImagesLocked:Li,areViasLocked:mn,setAreViasLocked:Xo,arePadsLocked:yl,setArePadsLocked:br,areTracesLocked:En,setAreTracesLocked:so,areComponentsLocked:sl,setAreComponentsLocked:tl,areGroundNodesLocked:Dn,setAreGroundNodesLocked:va,arePowerNodesLocked:rn,setArePowerNodesLocked:vr}=Ui,mr=Bx(),{openMenu:Sr,setOpenMenu:ma,setSizeDialog:bi,setSetSizeDialog:Bi,autoSaveDialog:Os,setAutoSaveDialog:Fi,autoSavePromptDialog:ro,setAutoSavePromptDialog:El,debugDialog:co,setDebugDialog:Go,errorDialog:wr,setErrorDialog:Hs,newProjectDialog:jr,setNewProjectDialog:uo,newProjectSetupDialog:xn,setNewProjectSetupDialog:Lo,saveAsDialog:yn,setSaveAsDialog:Fo,showColorPicker:qo,setShowColorPicker:Es}=mr,jd=_x(),{autoSaveEnabled:Vl,setAutoSaveEnabled:ei,autoSaveInterval:Sa,setAutoSaveInterval:qi,autoSaveDirHandle:Zi,setAutoSaveDirHandle:Vs,autoSaveBaseName:Qi,setAutoSaveBaseName:wa,currentProjectFilePath:$s,setCurrentProjectFilePath:Dl,projectDirHandle:Zo,setProjectDirHandle:vi,projectName:An,setProjectName:ti,autoSaveFileHistory:mc,setAutoSaveFileHistory:fo,currentFileIndex:Tr,setCurrentFileIndex:Cr,autoSaveIntervalRef:cn,hasChangesSinceLastAutoSaveRef:rl,prevAutoSaveEnabledRef:zr}=jd,Rr=C.useRef(null),Dr=C.useRef(null),Ar=C.useRef(null),kr=C.useRef(null),po=C.useRef(null),ho=C.useRef(null),Nr=C.useRef(null),ja=C.useRef(null),Ta=C.useRef(null),go=C.useRef(null),Is=C.useRef(null),Ki=C.useRef(!1),Qo=C.useRef(0),Ko=C.useRef(0),[Ca,Mr]=C.useState(!1),Jo=C.useRef(null),es=C.useRef(null),[ts,Ps]=C.useState(!1),[Mn,ns]=C.useState({width:960,height:600}),ls=C.useRef(null),Ur=C.useRef(null),Sc=C.useRef(null),is=C.useRef(null),as=C.useRef(null),wc=C.useRef(null),za=C.useRef(null),Ys=C.useRef(null),[Ji,Ra]=C.useState(!0),[os,ni]=C.useState(!0),[Vn,ss]=C.useState(!0),[Al,_i]=C.useState(!0),[kl,Ws]=C.useState(!0),[li,Br]=C.useState(!0),[mi,_r]=C.useState(!0),[ii,rs]=C.useState(!0),[$l,bl]=C.useState(!0),[ai,vl]=C.useState(!0),St=oo,At=vc,[Xs,Da]=C.useState(!1),[cs,Il]=C.useState(!1),[ds,Aa]=C.useState(null),[xo,Gs]=C.useState(!1),[cl,ea]=C.useState(!1),[ml,us]=C.useState(null),[Pl,Oi]=C.useState(!0),[ta,Ls]=C.useState(!0),[na,fs]=C.useState(null),[Sl,ka]=C.useState(!1),[Hi,ps]=C.useState(null),[Na,Nl]=C.useState(!1),[Qn,oi]=C.useState(null),[Yl,si]=C.useState(!1),[Wl,Or]=C.useState(null),[Hr,Er]=C.useState(()=>{const a=localStorage.getItem("boardDimensions");if(a)try{return JSON.parse(a)}catch{return null}return null}),[jc,Yn]=C.useState(!1);ot.useEffect(()=>{Bt.length===0&&Hn([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[Bt.length,Hn]);const Gt=C.useCallback((a,r)=>{const x=St.find(j=>j.pointId===a);if(x){const j=r.find(p=>p.id===x.powerBusId);return`Via (${j?j.voltage:x.type||"Power Node"})`}const y=At.find(j=>j.pointId===a);return y?`Via (${y.type||"Ground"})`:"Via (Signal)"},[St,At]),Tt=C.useCallback((a,r)=>{const x=St.find(j=>j.pointId===a);if(x){const j=r.find(p=>p.id===x.powerBusId);return`Pad (${j?j.voltage:x.type||"Power Node"})`}const y=At.find(j=>j.pointId===a);return y?`Pad (${y.type||"Ground"})`:"Pad (Signal)"},[St,At]),la=C.useCallback(()=>{const a=ge.filter(r=>r.type==="via").map(r=>r.id);qt(new Set(a)),Ut(new Set),Wt(new Set),Xt(new Set)},[ge,qt,Ut,Wt,Xt]),Xl=C.useCallback(()=>{const a=ge.filter(r=>r.type==="trace").map(r=>r.id);qt(new Set(a)),Ut(new Set),Wt(new Set),Xt(new Set)},[ge,qt,Ut,Wt,Xt]),Vr=C.useCallback(()=>{const a=ge.filter(r=>r.type==="pad").map(r=>r.id);qt(new Set(a)),Ut(new Set),Wt(new Set),Xt(new Set)},[ge,qt,Ut,Wt,Xt]),ia=C.useCallback(()=>{const a=[...Dt,...xt].map(r=>r.id);Ut(new Set(a)),qt(new Set),Wt(new Set),Xt(new Set)},[Dt,xt,Ut,qt,Wt,Xt]),Tc=C.useCallback(()=>{const a=[...Dt,...xt].filter(r=>{const x=r.pinConnections||[];return!(x.length>0&&x.length===r.pinCount&&x.every(j=>j&&j.trim()!==""))}).map(r=>r.id);Ut(new Set(a)),qt(new Set),Wt(new Set),Xt(new Set),Go({visible:!0,text:""})},[Dt,xt,Ut,qt,Wt,Xt,Go]),Cc=C.useCallback((a,r,x)=>{const y=Rn.current;if(!y)return;const j=y.width-80,v=y.height-80,p=j/2,S=v/2,z=p-r*Pe,R=S-x*Pe;zn({x:z,y:R}),Ut(new Set([a])),qt(new Set),Wt(new Set),Xt(new Set)},[Pe,zn,Ut,qt,Wt,Xt]),yo=C.useCallback(()=>{const a=St.map(r=>r.id);Wt(new Set(a)),qt(new Set),Ut(new Set),Xt(new Set)},[St,Wt,qt,Ut,Xt]),Ma=C.useCallback(()=>{const a=At.map(r=>r.id);Xt(new Set(a)),qt(new Set),Ut(new Set),Wt(new Set)},[At,Xt,qt,Ut,Wt]),[Ua,Si]=C.useState(!1),Ba=C.useRef(null),[wi,Ml]=C.useState(!1),ri=C.useRef(null),Gl=C.useRef(null),bo=C.useRef(null),[vo,Ul]=C.useState(!1),[aa,Ll]=C.useState(!1),[an,mo]=C.useState(null),[zc,Td]=C.useState(new Set),Rc=C.useRef(null),_a=C.useRef(null),jn=C.useRef(null),hs=C.useRef(null),Oa=C.useRef(null),Ha=C.useRef(null),gs=C.useRef(null),[So,Ea]=C.useState(null),[oa,$r]=C.useState(!1),[wo,Ir]=C.useState(null),[wl,xs]=C.useState(null),ys=C.useCallback(async(a,r)=>{try{const x=await createImageBitmap(a),y=URL.createObjectURL(a),j=await new Promise((R,L)=>{const X=new FileReader;X.onload=()=>R(X.result),X.onerror=L,X.readAsDataURL(a)}),v=Rn.current;let p=0,S=0;if(v){const R=v.width-80,L=v.height-80,X=R/2,fe=L/2;p=(X-Fe.x)/Pe,S=(fe-Fe.y)/Pe}const z={url:y,name:a.name,width:x.width,height:x.height,dataUrl:j,x:p,y:S,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:x};r==="top"?f(z):B(z)}catch(x){console.error("Failed to load image",x)}},[Fe.x,Fe.y,Pe,b,d]),Dc=C.useCallback(a=>{a.stopPropagation(),a.preventDefault();const r=Rn.current;if(!r)return;document.activeElement!==r&&r.focus();const x=r.getBoundingClientRect(),y=r.width/x.width,j=r.height/x.height,v=a.nativeEvent.offsetX,p=a.nativeEvent.offsetY,S=typeof v=="number"?v:a.clientX-x.left,z=typeof p=="number"?p:a.clientY-x.top,R=S*y,L=z*j,X=R-40,fe=L-40,K=(X-Fe.x)/Pe,ae=(fe-Fe.y)/Pe;if(E==="select"){if(On){let k=1/0,re=null,ye=null;const Ne=Math.max(6/Pe,4),ct=[...Dt,...xt].find(Xe=>Xe.id===On.componentId)?.layer||"top";for(const Xe of ge)if((Xe.type==="via"||Xe.type==="pad")&&Xe.points.length>0){if(Xe.type==="pad"&&(Xe.layer||"top")!==ct)continue;const at=Xe.points[0],dt=Math.max(1,Xe.size/2),ln=Math.hypot(at.x-K,at.y-ae),ht=Math.max(dt,Ne);ln<=ht&&ln<k&&(k=ln,re=at.id??null,ye=Xe)}if(ye?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${ye.id}`),console.log(`  Point ID: ${re}`),console.log(`  Point coordinates: x=${ye.points[0].x.toFixed(2)}, y=${ye.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${K.toFixed(2)}, y=${ae.toFixed(2)}`),console.log(`  Distance: ${k.toFixed(2)}`),console.log(`  Via size: ${ye.size}, radius: ${Math.max(1,ye.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${K.toFixed(2)}, y=${ae.toFixed(2)}`),console.log(`  Hit tolerance: ${Ne.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${ge.filter(Xe=>Xe.type==="via").length}`)),re!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${re} (type: ${typeof re})`);const Xe=String(re),at=On.pinIndex,dt=On.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${at} (Pin ${at+1}) of component ${dt} to point ID ${Xe}`);const ln=Dt.find(Le=>Le.id===dt),ht=xt.find(Le=>Le.id===dt);ln?(console.log("Component found in TOP layer"),Nn(Le=>{const yt=Le.find(Rt=>Rt.id===dt);if(!yt)return console.error(`Component ${dt} not found in TOP layer during update!`),Le;console.log("BEFORE update: pinConnections =",yt.pinConnections);const wt=yt.pinConnections||[],zt=wt.length>0?[...wt]:new Array(yt.pinCount).fill("");let Zt;if(zt.length!==yt.pinCount){Zt=new Array(yt.pinCount).fill("");for(let Rt=0;Rt<Math.min(zt.length,yt.pinCount);Rt++)Zt[Rt]=zt[Rt]||""}else Zt=[...zt];Zt[at]=Xe,console.log(`Updating pin ${at} with value: ${Xe}`),console.log("New pinConnections array:",Zt);const Tn=Le.map(Rt=>Rt.id===dt?{...Rt,pinConnections:Zt}:Rt),bn=Tn.find(Rt=>Rt.id===dt);return console.log("AFTER update: pinConnections =",bn?.pinConnections),console.log(`Pin ${at} value: ${bn?.pinConnections[at]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),Tn})):ht?(console.log("Component found in BOTTOM layer"),wn(Le=>{const yt=Le.find(Rt=>Rt.id===dt);if(!yt)return console.error(`Component ${dt} not found in BOTTOM layer during update!`),Le;console.log("BEFORE update: pinConnections =",yt.pinConnections);const wt=yt.pinConnections||[],zt=wt.length>0?[...wt]:new Array(yt.pinCount).fill("");let Zt;if(zt.length!==yt.pinCount){Zt=new Array(yt.pinCount).fill("");for(let Rt=0;Rt<Math.min(zt.length,yt.pinCount);Rt++)Zt[Rt]=zt[Rt]||""}else Zt=[...zt];Zt[at]=Xe,console.log(`Updating pin ${at} with value: ${Xe}`),console.log("New pinConnections array:",Zt);const Tn=Le.map(Rt=>Rt.id===dt?{...Rt,pinConnections:Zt}:Rt),bn=Tn.find(Rt=>Rt.id===dt);return console.log("AFTER update: pinConnections =",bn?.pinConnections),console.log(`Pin ${at} value: ${bn?.pinConnections[at]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),Tn})):(console.error(`Component ${dt} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",Dt.map(Le=>Le.id)),console.log("Available BOTTOM components:",xt.map(Le=>Le.id))),setTimeout(()=>{Wo(null)},0);return}else Wo(null)}const Q=10,F=(()=>{for(const k of Dt)if(K>=k.x-Q&&K<=k.x+Q&&ae>=k.y-Q&&ae<=k.y+Q)return{layer:"top",comp:k};for(const k of xt)if(K>=k.x-Q&&K<=k.x+Q&&ae>=k.y-Q&&ae<=k.y+Q)return{layer:"bottom",comp:k};return null})();if(F){const{comp:k}=F;let re;if(a.shiftKey){const ye=new Set(vt);ye.has(k.id)?ye.delete(k.id):ye.add(k.id),re=ye,Ut(re)}else re=new Set([k.id]),Ut(re),qt(new Set),Wt(new Set),Xt(new Set);return}const we=Math.max(6/Pe,4);let Ce=null;for(const k of St){const re=Math.max(6,k.size/2),ye=re*.8,Ne=re+ye,Ie=Math.hypot(k.x-K,k.y-ae),ct=Math.abs(K-k.x)<=we&&Math.abs(ae-k.y)<=Ne,Xe=Math.abs(ae-k.y)<=we&&Math.abs(K-k.x)<=Ne;if(Ie<=Math.max(re,we)||ct||Xe){Ce=k;break}}if(Ce){let k;if(a.shiftKey){const re=new Set(mt);re.has(Ce.id)?re.delete(Ce.id):re.add(Ce.id),k=re,Wt(k)}else k=new Set([Ce.id]),Wt(k);qt(new Set),Ut(new Set),Xt(new Set);return}let De=null;for(const k of At){const re=Math.max(6,(k.size||18)/2),ye=re*.8,Ne=re+ye,Ie=Math.hypot(k.x-K,k.y-ae),ct=Math.abs(K-k.x)<=we&&Math.abs(ae-k.y)<=Ne,Xe=Math.abs(ae-k.y)<=we&&Math.abs(K-k.x)<=Ne;if(Ie<=Math.max(re,we)||ct||Xe){De=k;break}}if(De){let k;if(a.shiftKey){const re=new Set(Vt);re.has(De.id)?re.delete(De.id):re.add(De.id),k=re,Xt(k)}else k=new Set([De.id]),Xt(k),qt(new Set),Ut(new Set),Wt(new Set);return}const Re=Math.max(6/Pe,4/Pe),Ve=Math.max(Re,.5);let $=null;for(const k of ge)if((k.type==="via"||k.type==="pad")&&k.points.length>0){let re=!1;if(k.type==="via"?re=Vn:k.type==="pad"&&(re=(k.layer||"top")==="top"?li:mi),!re)continue;const ye=k.points[0],Ne=Math.max(1,k.size/2);if(Math.hypot(ye.x-K,ye.y-ae)<=Math.max(Ne,Ve)){$=k;break}}if($){let k;if(a.shiftKey){const re=new Set(Nt);re.has($.id)?re.delete($.id):re.add($.id),k=re,qt(k)}else k=new Set([$.id]),qt(k),Ut(new Set),Wt(new Set),Xt(new Set);return}a.shiftKey||(qt(new Set),Ut(new Set),Wt(new Set),Xt(new Set)),Yo(!0),Ir({x:K,y:ae,shiftKey:a.shiftKey}),xs({x:K,y:ae,width:0,height:0});return}else if(E==="magnify"){const Q=a.shiftKey?.5:2,F=Math.max(.25,Math.min(8,Pe*Q)),we=X-F*K,Ce=fe-F*ae;We(F),zn({x:we,y:Ce});return}else if(E==="pan"){Jo.current={startCX:X,startCY:fe,panX:Fe.x,panY:Fe.y},es.current={startClientX:a.clientX,startClientY:a.clientY,panX:Fe.x,panY:Fe.y},Mr(!0);return}else if(E==="draw"){const Q=(Ce,De)=>{let ze=1/0,Re=null;const Ve=10/Pe,$=Pe>20?Math.max(Ve,1e-4):Pe>10?Math.max(Ve,.001):Math.max(Ve,.01);for(const ye of ge)if(ye.type==="via"){const Ne=ye.points[0],Ie=Math.hypot(Ne.x-Ce,Ne.y-De);Ie<=$&&Ie<ze&&(ze=Ie,Re=Ne)}else if(ye.type==="pad"){const Ne=ye.points[0],Ie=Math.hypot(Ne.x-Ce,Ne.y-De);Ie<=$&&Ie<ze&&(ze=Ie,Re=Ne)}for(const ye of St)if(ye.pointId!==void 0){const Ne=Math.hypot(ye.x-Ce,ye.y-De);Ne<=$&&Ne<ze&&(ze=Ne,Re={x:ye.x,y:ye.y,id:ye.pointId})}for(const ye of At)if(ye.pointId!==void 0){const Ne=Math.hypot(ye.x-Ce,ye.y-De);Ne<=$&&Ne<ze&&(ze=Ne,Re={x:ye.x,y:ye.y,id:ye.pointId})}const re=nn(Re??{x:Ce,y:De});return{x:re.x,y:re.y,nodeId:Re?.id}};if(Se==="via"){const Ce=pn.get("via"),De=localStorage.getItem("tool_via_color"),ze=localStorage.getItem("tool_via_size"),Re=De||Ce?.settings.color||xd,tt=ze?parseInt(ze,10):Ce?.settings.size||Rs.DEFAULT_SIZE,$=oa?{x:nn({x:K,y:ae}).x,y:nn({x:K,y:ae}).y}:((Ie,ct)=>{let Xe=1/0,at=null;const ln=10/Pe,ht=Pe>10?Math.max(ln,.001):Math.max(ln,.01);for(const wt of ge)if(wt.type==="via"||wt.type==="pad"){const zt=wt.points[0],Zt=Math.hypot(zt.x-Ie,zt.y-ct);Zt<=ht&&Zt<Xe&&(Xe=Zt,at=zt)}for(const wt of St)if(wt.pointId!==void 0){const zt=Math.hypot(wt.x-Ie,wt.y-ct);zt<=ht&&zt<Xe&&(Xe=zt,at={x:wt.x,y:wt.y,id:wt.pointId})}for(const wt of At)if(wt.pointId!==void 0){const zt=Math.hypot(wt.x-Ie,wt.y-ct);zt<=ht&&zt<Xe&&(Xe=zt,at={x:wt.x,y:wt.y,id:wt.pointId})}const yt=nn(at??{x:Ie,y:ct});return{x:yt.x,y:yt.y,nodeId:at?.id}})(K,ae),k=$.nodeId??pi(),re=Gt(k,Bt),ye={id:k,x:$.x,y:$.y},Ne={id:`${Date.now()}-via`,points:[ye],color:Re,size:tt,layer:$e,type:"via",viaType:re};Ue(Ie=>[...Ie,Ne]),$e==="top"?xc(Ie=>[...Ie,Ne.id]):pr(Ie=>[...Ie,Ne.id]);return}if(Se==="pad"){if(!il)return;const De=oa?{x:nn({x:K,y:ae}).x,y:nn({x:K,y:ae}).y}:((re,ye)=>{let Ne=1/0,Ie=null;const Xe=10/Pe,at=Pe>10?Math.max(Xe,.001):Math.max(Xe,.01);for(const ht of ge)if(ht.type==="via"||ht.type==="pad"){const Le=ht.points[0],yt=Math.hypot(Le.x-re,Le.y-ye);yt<=at&&yt<Ne&&(Ne=yt,Ie=Le)}for(const ht of St)if(ht.pointId!==void 0){const Le=Math.hypot(ht.x-re,ht.y-ye);Le<=at&&Le<Ne&&(Ne=Le,Ie={x:ht.x,y:ht.y,id:ht.pointId})}for(const ht of At)if(ht.pointId!==void 0){const Le=Math.hypot(ht.x-re,ht.y-ye);Le<=at&&Le<Ne&&(Ne=Le,Ie={x:ht.x,y:ht.y,id:ht.pointId})}const ln=nn(Ie??{x:re,y:ye});return{x:ln.x,y:ln.y,nodeId:Ie?.id}})(K,ae),ze=De.nodeId??pi(),Re=Tt(ze,Bt),tt=il==="top"?ne:ie,Ve=il==="top"?D:ue,$={id:ze,x:De.x,y:De.y},k={id:`${Date.now()}-pad`,points:[$],color:tt,size:Ve,layer:il,type:"pad",padType:Re};Ue(re=>[...re,k]);return}if(pl.current)return;const F=Se==="trace"&&!oa?Q(K,ae):{x:nn({x:K,y:ae}).x,y:nn({x:K,y:ae}).y},we=F.nodeId!==void 0?{id:F.nodeId,x:F.x,y:F.y}:{x:F.x,y:F.y};ft(Ce=>Ce.length===0?[we]:[...Ce,we]),Fn.current=Date.now(),bt(null),Be(!1),cr(!1)}else if(E==="erase"){if(ge.some(F=>F.layer===$e&&(F.type==="via"&&mn||F.type==="pad"&&yl||F.type==="trace"&&En))){const F=[];mn&&ge.some(we=>we.layer===$e&&we.type==="via")&&F.push("vias"),yl&&ge.some(we=>we.layer===$e&&we.type==="pad")&&F.push("pads"),En&&ge.some(we=>we.layer===$e&&we.type==="trace")&&F.push("traces"),F.length>0&&alert(`Cannot erase: ${F.join(", ")} are locked on the ${$e} layer. Unlock them to erase.`)}Be(!0),ft([{id:pi(),x:K,y:ae}]),console.log("Starting erase at:",K,ae,"selectedDrawingLayer:",$e,"total strokes:",ge.length)}else if(E==="transform"&&Yt){if(el){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}hl(!0),gi({x:K,y:ae})}else if(E==="component"){if(!an)return;const Q=nn({x:K,y:ae}),F=Cl==="top"?Je:pt,we=Cl==="top"?Ht:te,Ce=nx(an,Cl,Q.x,Q.y,F,we);Ce.abbreviation=gd(an),Cl==="top"?(rs(!0),Nn(De=>[...De,Ce])):(bl(!0),wn(De=>[...De,Ce]));return}else if(E==="power"){if(!ds)return;const F=oa?{x:nn({x:K,y:ae}).x,y:nn({x:K,y:ae}).y}:((Ce,De)=>{let ze=1/0,Re=null;const Ve=10/Pe,$=Pe>20?Math.max(Ve,1e-4):Pe>10?Math.max(Ve,.001):Math.max(Ve,.01);for(const ye of ge)if(ye.type==="via"||ye.type==="pad"){const Ne=ye.points[0],Ie=Math.hypot(Ne.x-Ce,Ne.y-De);Ie<=$&&Ie<ze&&(ze=Ie,Re=Ne)}else if(ye.type==="trace")for(const Ne of ye.points){const Ie=Math.hypot(Ne.x-Ce,Ne.y-De);Ie<=$&&Ie<ze&&(ze=Ie,Re=Ne)}const re=nn(Re??{x:Ce,y:De});return{x:re.x,y:re.y,nodeId:Re?.id}})(K,ae),we=Bt.find(Ce=>Ce.id===ds);if(we){const Ce=F.nodeId??pi(),De=`${we.voltage} Power Node`;if(At.find(tt=>tt.pointId===Ce)){Hs({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${Ce}). Power and ground nodes cannot share the same Node ID.`});return}const Re={id:`power-${Date.now()}-${Math.random()}`,x:F.x,y:F.y,color:"#ff0000",size:g,powerBusId:we.id,layer:$e,type:De,pointId:Ce};if(Zn(tt=>[...tt,Re]),F.nodeId!==void 0){const tt=Gt(F.nodeId,Bt),Ve=Tt(F.nodeId,Bt);Ue($=>$.map(k=>k.type==="via"&&k.points.length>0&&k.points[0].id===F.nodeId?{...k,viaType:tt}:k.type==="pad"&&k.points.length>0&&k.points[0].id===F.nodeId?{...k,padType:Ve}:k))}}return}else if(E==="ground"){if(ml===null){if(zl.length===0){Hs({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}ea(!0);return}const Q=zl.find(F=>F.id===ml);if(Q){const we=oa?{x:nn({x:K,y:ae}).x,y:nn({x:K,y:ae}).y}:((tt,Ve)=>{let $=1/0,k=null;const ye=10/Pe,Ne=Pe>20?Math.max(ye,1e-4):Pe>10?Math.max(ye,.001):Math.max(ye,.01);for(const Xe of ge)if(Xe.type==="via"||Xe.type==="pad"){const at=Xe.points[0],dt=Math.hypot(at.x-tt,at.y-Ve);dt<=Ne&&dt<$&&($=dt,k=at)}else if(Xe.type==="trace")for(const at of Xe.points){const dt=Math.hypot(at.x-tt,at.y-Ve);dt<=Ne&&dt<$&&($=dt,k=at)}const ct=nn(k??{x:tt,y:Ve});return{x:ct.x,y:ct.y,nodeId:k?.id}})(K,ae),Ce=we.nodeId??pi(),De=`${Q.name} Ground Node`,ze=St.find(tt=>tt.pointId===Ce);if(ze){Hs({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${ze.type||"Power Node"}) already exists at this Node ID (${Ce}). Power and ground nodes cannot share the same Node ID.`});return}const Re={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:we.x,y:we.y,color:Q.color,size:pn.get("ground")?.settings.size||18,groundBusId:Q.id,layer:$e,type:De,pointId:Ce};if(Rl(tt=>[...tt,Re]),we.nodeId!==void 0){const tt=Gt(we.nodeId,Bt),Ve=Tt(we.nodeId,Bt);Ue($=>$.map(k=>k.type==="via"&&k.points.length>0&&k.points[0].id===we.nodeId?{...k,viaType:tt}:k.type==="pad"&&k.points.length>0&&k.points[0].id===we.nodeId?{...k,padType:Ve}:k))}}return}},[E,Yt,g,M,Se,$e,ge,Pe,Fe.x,Fe.y,oa,ds,ml,Bt,zl,an,pn,il,it,St,At,Gt,Tt,Vn,li,mi]),jo=C.useCallback(a=>{if(E!=="magnify")return;a.preventDefault();const r=Rn.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,j=r.height/x.height,v=a.nativeEvent.offsetX,p=a.nativeEvent.offsetY,S=typeof v=="number"?v:a.clientX-x.left,z=typeof p=="number"?p:a.clientY-x.top,R=S*y,L=z*j,X=(R-40-Fe.x)/Pe,fe=(L-40-Fe.y)/Pe,K=1.2,ae=1/K,Q=a.deltaY<0?K:ae,F=Math.max(.25,Math.min(8,Pe*Q)),we=R-40-F*X,Ce=L-40-F*fe;We(F),zn({x:we,y:Ce})},[E,Pe,Fe.x,Fe.y]),Pr=C.useCallback(a=>{if(E==="draw"&&Se==="trace"){pl.current=!0;let r=Oe;if(r.length>1){const x=[r[0]];for(let y=1;y<r.length;y++){const j=x[x.length-1],v=r[y];(Math.abs(j.x-v.x)>.001||Math.abs(j.y-v.y)>.001)&&x.push(v)}r=x}if(r.length>=1){const x=it||"top",y=x==="top"?ve:Ke,j=x==="top"?Ye:st,v={id:`${Date.now()}-trace`,points:r,color:y,size:j,layer:x,type:"trace"};Ue(p=>[...p,v]),x==="top"?xi(p=>[...p,v.id]):Gi(p=>[...p,v.id]),ft([]),bt(null),setTimeout(()=>{pl.current=!1},300);return}}if(E==="select"||E==="component"){const r=Rn.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,j=r.height/x.height,v=a.nativeEvent.offsetX,p=a.nativeEvent.offsetY,S=typeof v=="number"?v:a.clientX-x.left,z=typeof p=="number"?p:a.clientY-x.top,R=S*y,L=z*j,X=R-40,fe=L-40,K=(X-Fe.x)/Pe,ae=(fe-Fe.y)/Pe,Q=10,F=(()=>{for(const De of Dt)if(K>=De.x-Q&&K<=De.x+Q&&ae>=De.y-Q&&ae<=De.y+Q)return{layer:"top",comp:De};for(const De of xt)if(K>=De.x-Q&&K<=De.x+Q&&ae>=De.y-Q&&ae<=De.y+Q)return{layer:"bottom",comp:De};return null})(),we=Math.max(6/Pe,4);let Ce=null;for(const De of St){const ze=Math.max(6,De.size/2),Re=ze*.8,tt=ze+Re,Ve=Math.hypot(De.x-K,De.y-ae),$=Math.abs(K-De.x)<=we&&Math.abs(ae-De.y)<=tt,k=Math.abs(ae-De.y)<=we&&Math.abs(K-De.x)<=tt;if(Ve<=Math.max(ze,we)||$||k){Ce=De;break}}if(Ce){Wt(new Set([Ce.id])),Mi({visible:!0,id:Ce.id,layer:Ce.layer,x:Ce.x,y:Ce.y,size:Ce.size,color:Ce.color,powerBusId:Ce.powerBusId});return}if(F){const{layer:De,comp:ze}=F;Sd(ze,De)}}},[E,Se,M,g,$e,Dt,xt,St,Pe,Fe.x,Fe.y,an,vo,oa,ge,Yt,Ca,So,On,pn,Oe,it,ve,Ke,Ye,st]),Va=C.useCallback(()=>{const a=jt.current;if(E==="draw"&&Se==="trace"&&a.length>=2){let r=[a[0]];for(let p=1;p<a.length;p++){const S=r[r.length-1],z=a[p];(Math.abs(S.x-z.x)>.001||Math.abs(S.y-z.y)>.001)&&r.push(z)}const x=it||"top",y=x==="top"?ve:Ke,j=x==="top"?Ye:st,v={id:`${Date.now()}-trace`,points:r,color:y,size:j,layer:x,type:"trace"};Ue(p=>[...p,v]),x==="top"?xi(p=>[...p,v.id]):Gi(p=>[...p,v.id]),ft([]),bt(null)}else if(E==="draw"&&Se==="trace"&&a.length===1){const r=it||"top",x=r==="top"?ve:Ke,y=r==="top"?Ye:st,j={id:`${Date.now()}-trace-dot`,points:a,color:x,size:y,layer:r,type:"trace"};Ue(v=>[...v,j]),r==="top"?xi(v=>[...v,j.id]):Gi(v=>[...v,j.id]),ft([])}},[E,Se,it,ve,Ke,Ye,st,Ue]),bs=C.useCallback((a,r,x)=>{const y=r-a.x,j=x-a.y;if(y===0&&j===0)return{x:r,y:x};const p=(Math.atan2(j,y)*180/Math.PI%180+180)%180,S=[0,45,90];let z=0,R=1e9;for(const L of S){const X=Math.abs(p-L);X<R&&(R=X,z=L)}if(z===0)return{x:r,y:a.y};if(z===90)return{x:a.x,y:x};{const L=Math.min(Math.abs(y),Math.abs(j)),X=y>=0?1:-1,fe=j>=0?1:-1;return{x:a.x+X*L,y:a.y+fe*L}}},[]),Ac=C.useCallback(a=>{const r=Rn.current?.getBoundingClientRect();if(!r)return;const x=a.clientX-r.left,y=a.clientY-r.top,j=Rn.current,v=j.width/r.width,p=j.height/r.height,S=x*v,z=y*p,R=S-40,L=z-40,X=(R-Fe.x)/Pe,fe=(L-Fe.y)/Pe;if(E==="draw"&&Se==="trace"&&Oe.length>0){const ae=oa?{x:nn({x:X,y:fe}).x,y:nn({x:X,y:fe}).y}:((Q,F)=>{let we=1/0,Ce=null;const ze=10/Pe,Re=Pe>20?Math.max(ze,1e-4):Pe>10?Math.max(ze,.001):Math.max(ze,.01);for(const $ of ge)if($.type==="via"){const k=$.points[0],re=Math.hypot(k.x-Q,k.y-F);re<=Re&&re<we&&(we=re,Ce=k)}else if($.type==="pad"){const k=$.points[0],re=Math.hypot(k.x-Q,k.y-F);re<=Re&&re<we&&(we=re,Ce=k)}for(const $ of St)if($.pointId!==void 0){const k=Math.hypot($.x-Q,$.y-F);k<=Re&&k<we&&(we=k,Ce={x:$.x,y:$.y,id:$.pointId})}for(const $ of At)if($.pointId!==void 0){const k=Math.hypot($.x-Q,$.y-F);k<=Re&&k<we&&(we=k,Ce={x:$.x,y:$.y,id:$.pointId})}const Ve=nn(Ce??{x:Q,y:F});return{x:Ve.x,y:Ve.y,nodeId:Ce?.id}})(X,fe);bt({x:ae.x,y:ae.y})}else bt(null);if(E==="select"&&Us&&wo){const K=wo.x,ae=wo.y;xs({x:Math.min(K,X),y:Math.min(ae,fe),width:Math.abs(X-K),height:Math.abs(fe-ae)})}else if(E==="pan"&&Ca&&Jo.current){const{startCX:K,startCY:ae,panX:Q,panY:F}=Jo.current,we=R-K,Ce=L-ae;zn({x:Q+we,y:F+Ce})}else if(ke&&Oe.length>0){if(E==="draw")if(ga){const K=Oe[0],ae=bs(K,X,fe),Q=nn(ae),F={id:pi(),x:Q.x,y:Q.y};ft([K,F])}else{const K=nn({x:X,y:fe});ft(ae=>[...ae,{id:pi(),x:K.x,y:K.y}])}else if(E==="erase"&&(ft(K=>[...K,{id:pi(),x:X,y:fe}]),Ue(K=>{const ae=K.filter(F=>{if(F.type==="via"&&mn||F.type==="pad"&&yl||F.type==="trace"&&En||F.layer!==$e)return!0;const we=g/2,Ce=X-we,De=X+we,ze=fe-we,Re=fe+we,tt=(k,re)=>k>=Ce&&k<=De&&re>=ze&&re<=Re,Ve=(k,re,ye,Ne)=>{const ln=(Tn,bn)=>{let Rt=0;return Tn<Ce?Rt|=1:Tn>De&&(Rt|=2),bn<ze?Rt|=4:bn>Re&&(Rt|=8),Rt};let ht=k,Le=re,yt=ye,wt=Ne,zt=ln(ht,Le),Zt=ln(yt,wt);for(;;){if((zt|Zt)===0)return!0;if((zt&Zt)!==0)return!1;const Tn=zt!==0?zt:Zt;let bn=0,Rt=0;Tn&8?(bn=ht+(yt-ht)*(Re-Le)/(wt-Le),Rt=Re):Tn&4?(bn=ht+(yt-ht)*(ze-Le)/(wt-Le),Rt=ze):Tn&2?(Rt=Le+(wt-Le)*(De-ht)/(yt-ht),bn=De):(Rt=Le+(wt-Le)*(Ce-ht)/(yt-ht),bn=Ce),Tn===zt?(ht=bn,Le=Rt,zt=ln(ht,Le)):(yt=bn,wt=Rt,Zt=ln(yt,wt))}};let $=!1;if(F.points.length===1){const k=F.points[0];$=tt(k.x,k.y)}else for(let k=0;k<F.points.length-1;k++){const re=F.points[k],ye=F.points[k+1];if(Ve(re.x,re.y,ye.x,ye.y)){$=!0;break}}return $&&console.log("Erasing stroke at position:",X,fe,"brushSize:",g,"selectedLayer:",$e),!$});console.log("Strokes before:",K.length,"after:",ae.length);const Q=new Set(ae.map(F=>F.id));return xc(F=>F.filter(we=>Q.has(we))),pr(F=>F.filter(we=>Q.has(we))),xi(F=>F.filter(we=>Q.has(we))),Gi(F=>F.filter(we=>Q.has(we))),ae}),rn||Zn(K=>{const ae=g/2,Q=X-ae,F=X+ae,we=fe-ae,Ce=fe+ae,De=ze=>{const Re=ze.size/2,tt=ze.x-Re,Ve=ze.x+Re,$=ze.y-Re,k=ze.y+Re;return!(F<tt||Q>Ve||Ce<$||we>k)};return K.filter(ze=>!De(ze))}),Dn||Rl(K=>{const ae=g/2,Q=X-ae,F=X+ae,we=fe-ae,Ce=fe+ae,De=Re=>{const tt=Math.max(6,(Re.size||18)/2),Ve=tt*.8,$=tt+Ve,k=Re.x-$,re=Re.x+$,ye=Re.y-$,Ne=Re.y+$;return!(F<k||Q>re||Ce<ye||we>Ne)};return K.filter(Re=>!De(Re))}),!sl)){const K=g/2,ae=X-K,Q=X+K,F=fe-K,we=fe+K,Ce=De=>{const Re=(De.size||18)/2,tt=De.x-Re,Ve=De.x+Re,$=De.y-Re,k=De.y+Re;return!(Q<tt||ae>Ve||we<$||F>k)};Nn(De=>De.filter(ze=>!Ce(ze))),wn(De=>De.filter(ze=>!Ce(ze)))}}else if($n&&In&&Yt){if(el){hl(!1),gi(null);return}const K=X-In.x,ae=fe-In.y;Yt==="top"&&b?f(Q=>Q?{...Q,x:Q.x+K,y:Q.y+ae}:null):Yt==="bottom"&&d?B(Q=>Q?{...Q,x:Q.x+K,y:Q.y+ae}:null):Yt==="both"&&(b&&f(Q=>Q?{...Q,x:Q.x+K,y:Q.y+ae}:null),d&&B(Q=>Q?{...Q,x:Q.x+K,y:Q.y+ae}:null)),gi({x:X,y:fe})}},[ke,Oe,E,g,$n,In,Yt,b,d,ga,bs,$e,Ue,Pe,Fe.x,Fe.y,Us,wo,el,mn,yl,En,rn,Dn,Dt,xt,Nn,wn]),Yr=C.useCallback(()=>{if(E==="select"&&Us){const a=wl,r=wo;if(Yo(!1),Ir(null),xs(null),a&&r){const j=Math.max(3,5/Pe),v=a.width<j&&a.height<j,p=($,k)=>{const re=a.x,ye=a.y,Ne=a.x+a.width,Ie=a.y+a.height;return $>=re&&$<=Ne&&k>=ye&&k<=Ie},S=($,k,re,ye,Ne,Ie,ct,Xe)=>{const yt=(Ri,Di)=>{let _l=0;return Ri<Ne?_l|=1:Ri>ct&&(_l|=2),Di<Ie?_l|=4:Di>Xe&&(_l|=8),_l};let wt=$,zt=k,Zt=re,Tn=ye,bn=yt(wt,zt),Rt=yt(Zt,Tn);for(;;){if((bn|Rt)===0)return!0;if((bn&Rt)!==0)return!1;const Ri=bn!==0?bn:Rt;let Di=0,_l=0;Ri&8?(Di=wt+(Zt-wt)*(Xe-zt)/(Tn-zt),_l=Xe):Ri&4?(Di=wt+(Zt-wt)*(Ie-zt)/(Tn-zt),_l=Ie):Ri&2?(_l=zt+(Tn-zt)*(ct-wt)/(Zt-wt),Di=ct):(_l=zt+(Tn-zt)*(Ne-wt)/(Zt-wt),Di=Ne),Ri===bn?(wt=Di,zt=_l,bn=yt(wt,zt)):(Zt=Di,Tn=_l,Rt=yt(Zt,Tn))}},z=a.x,R=a.y,L=a.x+a.width,X=a.y+a.height,K=Math.max(6/Pe,4/Pe,.5),ae=($,k,re,ye,Ne,Ie)=>{const ct=Ne-re,Xe=Ie-ye;if(ct===0&&Xe===0)return Math.hypot($-re,k-ye);const at=Math.max(0,Math.min(1,(($-re)*ct+(k-ye)*Xe)/(ct*ct+Xe*Xe))),dt=re+at*ct,ln=ye+at*Xe;return Math.hypot($-dt,k-ln)},Q=r?.shiftKey===!0,F=new Set(Q?Array.from(Nt):[]),we=new Set(Q?Array.from(vt):[]),Ce=new Set(Q?Array.from(mt):[]),De=new Set(Q?Array.from(Vt):[]),ze=r?.hitStrokeId;if(ze){const $=ge.find(k=>k.id===ze);if($){let k=!1;if($.type==="via"||$.type==="pad"?k=Vn:k=$.layer==="top"?Al:kl,k){Q?F.has(ze)?F.delete(ze):F.add(ze):(F.clear(),F.add(ze)),qt(F),Ut(we),Wt(Ce),Xt(De);return}}}if(v){let $=null;for(const k of ge){let re=!1;if(k.type==="via"||k.type==="pad"?re=Vn:re=k.layer==="top"?Al:kl,!re)continue;let ye=1/0;if(k.type==="via"||k.type==="pad"){const Ne=k.points[0],Ie=Math.max(1,k.size/2);ye=Math.hypot(Ne.x-r.x,Ne.y-r.y);const Xe=Math.max(6/Pe,4/Pe,.5);ye<=Math.max(Ie,Xe)&&(!$||ye<$.dist)&&($={id:k.id,dist:ye})}else for(let Ne=0;Ne<k.points.length-1;Ne++){const Ie=k.points[Ne],ct=k.points[Ne+1],Xe=ae(r.x,r.y,Ie.x,Ie.y,ct.x,ct.y);if(Xe<=Math.max(K,k.size/2)){(!$||Xe<$.dist)&&($={id:k.id,dist:Xe});break}}}$&&F.add($.id)}else for(const $ of ge){let k=!1;if($.type==="via"?k=Vn:$.type==="pad"?k=($.layer||"top")==="top"?li:mi:k=$.layer==="top"?Al:kl,!k)continue;let re=!1;if($.type==="via"||$.type==="pad"){const ye=$.points[0];re=p(ye.x,ye.y)}else for(let ye=0;ye<$.points.length-1;ye++){const Ne=$.points[ye],Ie=$.points[ye+1];if(S(Ne.x,Ne.y,Ie.x,Ie.y,z,R,L,X)||p(Ne.x,Ne.y)&&p(Ie.x,Ie.y)){re=!0;break}}re&&F.add($.id)}const Re=$=>{const re=Math.max(10,$.size||18)/2;return $.x-re<=L&&$.x+re>=z&&$.y-re<=X&&$.y+re>=R};if(v){const $=k=>{const ye=Math.max(10,k.size||18)/2;return r.x>=k.x-ye&&r.x<=k.x+ye&&r.y>=k.y-ye&&r.y<=k.y+ye};ii&&Dt.forEach(k=>{$(k)&&we.add(k.id)}),$l&&xt.forEach(k=>{$(k)&&we.add(k.id)})}else ii&&Dt.forEach($=>{Re($)&&we.add($.id)}),$l&&xt.forEach($=>{Re($)&&we.add($.id)});const tt=$=>{const k=Math.max(6,$.size/2),re=k*.8,ye=k+re;return $.x-ye<=L&&$.x+ye>=z&&$.y-ye<=X&&$.y+ye>=R};if(ai)if(v){let $=null;for(const k of St){const re=Math.max(6,k.size/2),ye=re*.8,Ne=re+ye,Ie=Math.hypot(k.x-r.x,k.y-r.y),ct=Math.abs(r.x-k.x)<=K&&Math.abs(r.y-k.y)<=Ne,Xe=Math.abs(r.y-k.y)<=K&&Math.abs(r.x-k.x)<=Ne;if(Ie<=Math.max(re,K)||ct||Xe){const dt=Math.min(Ie,Math.abs(r.x-k.x)+Math.abs(r.y-k.y));(!$||dt<$.dist)&&($={id:k.id,dist:dt})}}$&&Ce.add($.id)}else St.forEach($=>{tt($)&&Ce.add($.id)});const Ve=$=>{const k=Math.max(6,($.size||18)/2),re=k*.8,ye=k+re;return $.x-ye<=L&&$.x+ye>=z&&$.y-ye<=X&&$.y+ye>=R};if(Pl)if(v){let $=null;for(const k of At){const re=Math.max(6,(k.size||18)/2),ye=re*.8,Ne=re+ye,Ie=Math.hypot(k.x-r.x,k.y-r.y),ct=Math.abs(r.x-k.x)<=K&&Math.abs(r.y-k.y)<=Ne,Xe=Math.abs(r.y-k.y)<=K&&Math.abs(r.x-k.x)<=Ne;if(Ie<=Math.max(re,K)||ct||Xe){const dt=Math.min(Ie,Math.abs(r.x-k.x)+Math.abs(r.y-k.y));(!$||dt<$.dist)&&($={id:k.id,dist:dt})}}$&&De.add($.id)}else At.forEach($=>{Ve($)&&De.add($.id)});qt(F),Ut(we),Wt(Ce),Xt(De)}}if(ke&&Oe.length>0){if(E==="draw"&&Se!=="trace"){const a={id:Date.now().toString(),points:Oe,color:M,size:g,layer:$e,type:"trace"};Ue(r=>[...r,a]),$e==="top"?xi(r=>[...r,a.id]):Gi(r=>[...r,a.id])}ft([])}Ca&&(Mr(!1),Jo.current=null,es.current=null),Be(!1),hl(!1),gi(null),cr(!1)},[ke,Oe,E,M,g,$e,wl,wo,Us,ge,Pe,ts,Nt,St,At,Dt,xt,vt,mt,Vt,Vn,Al,kl,ii,$l,ai,Pl]);ot.useEffect(()=>{if(!(E==="pan"&&Ca&&es.current))return;const a=x=>{const y=Rn.current;if(!y)return;const j=y.getBoundingClientRect(),v=y.width/j.width,p=y.height/j.height,{startClientX:S,startClientY:z,panX:R,panY:L}=es.current,X=(x.clientX-S)*v,fe=(x.clientY-z)*p;zn({x:R+X,y:L+fe})},r=()=>{Mr(!1),Jo.current=null,es.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",r,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)}},[E,Ca]);const ci=C.useCallback(()=>{const a=Rn.current;if(!a)return;const r=a.getContext("2d");if(!r)return;r.clearRect(0,0,a.width,a.height),r.save(),r.beginPath(),r.rect(40,40,a.width-80,a.height-80),r.clip(),r.translate(40,40);const x=(v,p)=>{const S=v.width,z=v.height,R=document.createElement("canvas");R.width=S,R.height=z;const L=R.getContext("2d");if(!L)return R;L.drawImage(v,0,0,S,z);const fe=L.getImageData(0,0,S,z).data,K=new Uint8ClampedArray(S*z);for(let Re=0;Re<S*z;Re++){const tt=fe[Re*4+0],Ve=fe[Re*4+1],$=fe[Re*4+2];K[Re]=Math.round(.299*tt+.587*Ve+.114*$)}const ae=[-1,0,1,-2,0,2,-1,0,1],Q=[-1,-2,-1,0,0,0,1,2,1],F=new Float32Array(S*z);for(let Re=1;Re<z-1;Re++)for(let tt=1;tt<S-1;tt++){let Ve=0,$=0,k=0;for(let ye=-1;ye<=1;ye++)for(let Ne=-1;Ne<=1;Ne++){const Ie=tt+Ne,ct=Re+ye,Xe=K[ct*S+Ie];Ve+=Xe*ae[k],$+=Xe*Q[k],k++}const re=Math.sqrt(Ve*Ve+$*$);F[Re*S+tt]=re}let we=0;for(let Re=0;Re<F.length;Re++)F[Re]>we&&(we=F[Re]);const Ce=L.createImageData(S,z),De=Ce.data,ze=.2;for(let Re=0;Re<S*z;Re++){const Ve=(we>0?F[Re]/we:0)>=ze?255:0,$=p?255-Ve:Ve;De[Re*4+0]=$,De[Re*4+1]=$,De[Re*4+2]=$,De[Re*4+3]=255}return L.putImageData(Ce,0,0),R},y=(v,p,S,z,R,L,X,fe)=>{const K=document.createElement("canvas");K.width=S,K.height=z;const ae=K.getContext("2d",{willReadFrequently:!0});ae.clearRect(0,0,S,z),ae.drawImage(p,0,0,S,z);let Q=K;if(Math.abs(R)>1e-6){const F=Math.tan(R),we=Math.max(.2,1-F),Ce=Math.max(.2,1+F),De=Math.max(we,Ce),ze=Math.max(1,Math.ceil(S*De)),Re=document.createElement("canvas");Re.width=ze,Re.height=z;const tt=Re.getContext("2d",{willReadFrequently:!0});tt.clearRect(0,0,ze,z);for(let Ve=0;Ve<z;Ve++){const $=z<=1?0:Ve/(z-1),k=we*(1-$)+Ce*$,re=Math.max(1,S*k),ye=(ze-re)/2;tt.drawImage(Q,0,Ve,S,1,ye,Ve,re,1)}Q=Re}if(Math.abs(L)>1e-6){const F=Math.tan(L),we=Math.max(.2,1-F),Ce=Math.max(.2,1+F),De=Math.max(we,Ce),ze=Math.max(1,Math.ceil(z*De)),Re=document.createElement("canvas");Re.width=Q.width,Re.height=ze;const tt=Re.getContext("2d",{willReadFrequently:!0});tt.clearRect(0,0,Re.width,ze);for(let Ve=0;Ve<Q.width;Ve++){const $=Q.width<=1?0:Ve/(Q.width-1),k=we*(1-$)+Ce*$,re=Math.max(1,z*k),ye=(ze-re)/2;tt.drawImage(Q,Ve,0,1,Q.height,Ve,ye,1,re)}Q=Re}v.drawImage(Q,-X/2,-fe/2,X,fe)};r.translate(Fe.x,Fe.y),r.scale(Pe,Pe);{const v=Ji&&os;if(b&&b.bitmap&&Ji){const p=b.bitmap;if(r.save(),r.globalAlpha=1,ce&&!P?r.filter="grayscale(100%)":r.filter="none",r.translate(b.x,b.y),r.rotate(b.rotation*Math.PI/180),b.skewX||b.skewY){const L=Math.tan(b.skewX||0),X=Math.tan(b.skewY||0);r.transform(1,X,L,1,0,0)}r.scale(b.scale*(b.flipX?-1:1),b.scale*(b.flipY?-1:1));const S=p.width*1,z=p.height*1,R=P?x(p,_e):p;b.keystoneV&&Math.abs(b.keystoneV)>1e-6||b.keystoneH&&Math.abs(b.keystoneH)>1e-6?y(r,R,p.width,p.height,b.keystoneV||0,b.keystoneH||0,S,z):r.drawImage(R,-S/2,-z/2,S,z),r.restore()}if(d&&d.bitmap&&os){const p=d.bitmap;if(r.save(),r.globalAlpha=v?G/100:1,ce&&!P?r.filter="grayscale(100%)":r.filter="none",r.translate(d.x,d.y),r.rotate(d.rotation*Math.PI/180),d.skewX||d.skewY){const L=Math.tan(d.skewX||0),X=Math.tan(d.skewY||0);r.transform(1,X,L,1,0,0)}r.scale(d.scale*(d.flipX?-1:1),d.scale*(d.flipY?-1:1));const S=p.width*1,z=p.height*1,R=P?x(p,_e):p;d.keystoneV&&Math.abs(d.keystoneV)>1e-6||d.keystoneH&&Math.abs(d.keystoneH)>1e-6?y(r,R,p.width,p.height,d.keystoneV||0,d.keystoneH||0,S,z):r.drawImage(R,-S/2,-z/2,S,z),r.restore()}}if($a(r),ai&&St.length>0){const v=p=>{r.save();const S=Bt.find(fe=>fe.id===p.powerBusId),z=mt.has(p.id),R="#ff0000";r.strokeStyle=R,r.lineWidth=Math.max(1,(z?3:2)/Math.max(Pe,.001)),r.lineCap="round";const L=Math.max(6,p.size/2),X=L*.8;z&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Pe,.001)),r.beginPath(),r.arc(p.x,p.y,L+X+3,0,Math.PI*2),r.stroke()),r.strokeStyle=R,r.lineWidth=Math.max(1,(z?3:2)/Math.max(Pe,.001)),r.beginPath(),r.arc(p.x,p.y,L,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(p.x,p.y-L-X),r.lineTo(p.x,p.y+L+X),r.stroke(),r.beginPath(),r.moveTo(p.x-L-X,p.y),r.lineTo(p.x+L+X,p.y),r.stroke(),S&&(r.fillStyle=R,r.font=`${Math.max(10,L*.8)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(S.voltage,p.x,p.y+L+X+12)),r.restore()};St.forEach(v)}if(Pl&&At.length>0){const v=p=>{r.save();const S=Vt.has(p.id),z=p.color||"#000000";if(p.groundBusId==="groundbus-earth"){const L=Math.max(6,p.size||18),X=L*.9,fe=L*.24,K=L*1.6;r.strokeStyle=z,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Pe,.001)),r.lineCap="round",S&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Pe,.001)),r.setLineDash([5,5]),r.strokeRect(p.x-K/2-3,p.y-3,K+6,X+fe*2+6),r.setLineDash([])),r.strokeStyle=z,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Pe,.001)),r.beginPath(),r.moveTo(p.x,p.y),r.lineTo(p.x,p.y+X),r.stroke();for(let ae=0;ae<3;ae++){const Q=p.y+X+ae*fe,F=K*(1-ae*.25);r.beginPath(),r.moveTo(p.x-F/2,Q),r.lineTo(p.x+F/2,Q),r.stroke()}}else{const L=Math.max(6,(p.size||18)/2),X=L*.8;S&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Pe,.001)),r.beginPath(),r.arc(p.x,p.y,L+X+3,0,Math.PI*2),r.stroke()),r.strokeStyle=z,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Pe,.001)),r.beginPath(),r.arc(p.x,p.y,L,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(p.x,p.y-L-X),r.lineTo(p.x,p.y+L+X),r.stroke(),r.beginPath(),r.moveTo(p.x-L-X,p.y),r.lineTo(p.x+L+X,p.y),r.stroke()}r.restore()};At.forEach(v)}const j=v=>{const p=Math.max(10,v.size||18),S=p/2;r.save(),r.strokeStyle=v.color||"#111",r.lineWidth=Math.max(1,2/Math.max(Pe,.001));const z=v.pinConnections||[],R=z.length>0&&z.length===v.pinCount&&z.every(fe=>fe&&fe.trim()!=="");r.fillStyle=R?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",r.beginPath(),r.rect(v.x-S,v.y-S,p,p),r.fill(),r.stroke();let L="abbreviation"in v&&v.abbreviation?String(v.abbreviation).trim():"";(!L||L===""||L==="****"||L==="*"||L==="?")&&(L=gd(v.componentType)),r.fillStyle=v.color||"#111",r.font=`bold ${Math.max(8,p*.35)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(L,v.x,v.y),vt.has(v.id)&&(r.setLineDash([4,3]),r.strokeStyle="#00bfff",r.lineWidth=1.5,r.strokeRect(v.x-S-3,v.y-S-3,p+6,p+6),r.setLineDash([])),r.restore()};if(ta){const v=S=>{const z=parseInt(S,10);if(isNaN(z))return null;for(const R of ge)if((R.type==="via"||R.type==="pad")&&R.points.length>0){const L=R.points[0];if(L.id===z)return{x:L.x,y:L.y}}for(const R of ge)if(R.type==="trace"){for(const L of R.points)if(L.id===z)return{x:L.x,y:L.y}}for(const R of St)if(R.pointId===z)return{x:R.x,y:R.y};for(const R of At)if(R.pointId===z)return{x:R.x,y:R.y};return null},p=S=>{const z=S.pinConnections||[],R=S.componentType==="Electrolytic Capacitor"||S.componentType==="Diode"||S.componentType==="Battery"||S.componentType==="ZenerDiode",L=S.componentType==="Capacitor"&&"dielectric"in S&&S.dielectric==="Tantalum",X=(R||L)&&S.pinPolarities,fe=new Map;for(let K=0;K<z.length;K++){const ae=z[K];if(ae&&ae.trim()!==""){const Q=ae.trim(),F=!!(X&&S.pinPolarities&&K<S.pinPolarities.length&&S.pinPolarities[K]==="-"),we=fe.get(Q);we!==void 0?fe.set(Q,we||F):fe.set(Q,F)}}for(const[K,ae]of fe){const Q=v(K);if(Q){const F={x:S.x,y:S.y};r.save(),r.strokeStyle=ae?"rgba(0, 0, 0, 0.8)":"rgba(0, 150, 255, 0.6)",r.lineWidth=Math.max(1,3/Math.max(Pe,.001)),r.beginPath(),r.moveTo(F.x,F.y),r.lineTo(Q.x,Q.y),r.stroke(),r.restore()}}};ii&&Dt.forEach(p),$l&&xt.forEach(p)}if(ii&&Dt.forEach(j),$l&&xt.forEach(j),E==="select"&&wl){r.save();const v=Math.max(2,6/Math.max(1e-4,Pe));r.strokeStyle="#00bfff",r.fillStyle="rgba(0, 191, 255, 0.15)",r.lineWidth=Math.max(1,1.5/Math.max(1e-4,Pe)),r.setLineDash([v,v]),r.beginPath(),r.rect(wl.x,wl.y,wl.width,wl.height),r.fill(),r.stroke(),r.setLineDash([]),r.restore()}r.restore()},[b,d,G,ge,Oe,ke,E,M,g,ce,P,_e,Yt,$e,Pe,Fe.x,Fe.y,Ji,os,Vn,Al,kl,li,mi,ii,$l,Dt,xt,ai,St,Pl,At,ta,wl,Nt,vt,mt,Vt,it,ve,Ke,Ye,st,Se,Mt,el]);ot.useEffect(()=>{const a=Rn.current,r=Ta.current,x=Ar.current,y=kr.current;if(!a||!r||!x||!y)return;let j=null;const v=a.width-80,p=a.height-80,S=v/2,z=p/2,R=ze=>{if(!ze||!ze.bitmap)return;const Re=ze.bitmap.width,tt=ze.bitmap.height,Ve=ze.keystoneV?Math.tan(ze.keystoneV):0,$=ze.keystoneH?Math.tan(ze.keystoneH):0,k=Math.max(.2,1-Ve),re=Math.max(.2,1+Ve),ye=Math.max(.2,1-$),Ne=Math.max(.2,1+$),Ie=Math.max(k,re),ct=Math.max(ye,Ne),Xe=Re*Ie,at=tt*ct,dt=ze.skewX?Math.tan(ze.skewX):0,ln=ze.skewY?Math.tan(ze.skewY):0,ht=Math.abs(ze.scale),Le=Math.abs(ht)*Xe+Math.abs(dt)*Math.abs(ht)*at,yt=Math.abs(ln)*Math.abs(ht)*Xe+Math.abs(ht)*at,wt=Pg(Le,yt,S,z,ze.x,ze.y,1,1,ze.rotation);j=Ig(j,wt)};if(R(b),R(d),!j){x.style.width=`${r.clientWidth}px`,y.style.height=`${r.clientHeight}px`;return}const L=j,X=L.maxX-L.minX,fe=L.maxY-L.minY,K=X*Pe,ae=fe*Pe,Q=8,F=Math.max(r.clientWidth,Math.ceil(K)+Q*2),we=Math.max(r.clientHeight,Math.ceil(ae)+Q*2);x.style.width=`${F}px`,y.style.height=`${we}px`,Qo.current=L.minX*Pe-Q,Ko.current=L.minY*Pe-Q;const Ce=Rr.current,De=Dr.current;if(Ki.current=!0,Ce){const ze=Math.max(0,Ce.scrollWidth-Ce.clientWidth),Re=Math.max(0,Math.min(ze,-(Fe.x+Qo.current)));Ce.scrollLeft=Re}if(De){const ze=Math.max(0,De.scrollHeight-De.clientHeight),Re=Math.max(0,Math.min(ze,-(Fe.y+Ko.current)));De.scrollTop=Re}requestAnimationFrame(()=>{Ki.current=!1})},[b,d,Pe,Fe.x,Fe.y,Mn.width,Mn.height]),ot.useEffect(()=>{const a=()=>{const r=Ta.current;if(!r)return;const x=1.6,y=24,j=r.clientWidth-y,v=r.clientHeight-y,p=Math.floor(v*x),S=Math.floor(j/x);let z,R;p<=j?(z=p,R=v):(z=j,R=S),z=Math.max(600,z),R=Math.max(375,R),ns(L=>{if(L.width!==z||L.height!==R){const X=L.width-80,fe=L.height-80,K=z-80,ae=R-80,Q=X>0?K/X:1,F=fe>0?ae/fe:1;zn(we=>({x:we.x*Q,y:we.y*F}))}return L.width===z&&L.height===R?L:{width:z,height:R}})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[zn]),ot.useEffect(()=>{el&&($n&&(hl(!1),gi(null)),hi(null))},[el,$n,hl,gi,hi]);const $a=C.useCallback(a=>{if(ge.forEach(r=>{if(r.type==="via"||r.type==="pad")return;let x=!1;if(r.layer==="top"?x=Al:r.layer==="bottom"&&(x=kl),!!x)if(r.points.length===1){const y=r.points[0],j=Math.max(.5,r.size/2);Nt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(y.x,y.y,j+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=r.color,a.beginPath(),a.arc(y.x,y.y,j,0,Math.PI*2),a.fill()}else{Nt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=r.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),r.points.forEach((y,j)=>{j===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=r.color,a.lineWidth=r.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),r.points.forEach((y,j)=>{j===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke();for(const y of r.points)a.beginPath(),a.arc(y.x,y.y,r.size/2,0,Math.PI*2),a.fill()}}),ge.forEach(r=>{if(r.type==="via"){if(!Vn)return}else if(r.type==="pad"){if(r.layer==="top"&&!li||r.layer==="bottom"&&!mi)return}else return;const x=r.points[0];if(Nt.has(r.id)){if(r.type==="via"){const y=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(x.x,x.y,y,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(r.type==="pad"){const y=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(x.x-y,x.y-y,r.size+6,r.size+6),a.setLineDash([])}}if(r.type==="via"){const y=Math.max(.5,r.size/2),j=y*.5,v=y*.7;a.fillStyle=r.color,a.beginPath(),a.arc(x.x,x.y,y,0,Math.PI*2),a.arc(x.x,x.y,j,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-v,x.y),a.lineTo(x.x+v,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-v),a.lineTo(x.x,x.y+v),a.stroke()}else if(r.type==="pad"){const y=Math.max(.5,r.size/2),j=r.size,v=j*.5,p=y*.7;a.fillStyle=r.color,a.beginPath(),a.rect(x.x-y,x.y-y,j,j),a.rect(x.x-v/2,x.y-v/2,v,v),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-p,x.y),a.lineTo(x.x+p,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-p),a.lineTo(x.x,x.y+p),a.stroke()}}),Oe.length>0){const r=$e;let x=!0;if(E==="draw"&&(Se==="via"?x=Vn:x=r==="top"?Al:kl),x)if(E==="draw")if(Se==="via"){const y=Oe[Oe.length-1],j=Math.max(.5,g/2),v=j*.5,p=j*.7;a.fillStyle=M,a.beginPath(),a.arc(y.x,y.y,j,0,Math.PI*2),a.arc(y.x,y.y,v,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(y.x-p,y.y),a.lineTo(y.x+p,y.y),a.stroke(),a.beginPath(),a.moveTo(y.x,y.y-p),a.lineTo(y.x,y.y+p),a.stroke()}else if(Se==="pad"){const y=Oe[Oe.length-1],j=Math.max(.5,g/2),v=g,p=v*.5,S=j*.7;a.fillStyle=M,a.beginPath(),a.rect(y.x-j,y.y-j,v,v),a.rect(y.x-p/2,y.y-p/2,p,p),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(y.x-S,y.y),a.lineTo(y.x+S,y.y),a.stroke(),a.beginPath(),a.moveTo(y.x,y.y-S),a.lineTo(y.x,y.y+S),a.stroke()}else{const y=it||"top",j=y==="top"?ve:Ke,v=y==="top"?Ye:st;if(Oe.length===1){const p=Oe[0],S=Math.max(.5,v/2);a.fillStyle=j,a.beginPath(),a.arc(p.x,p.y,S,0,Math.PI*2),a.fill(),Mt&&(a.strokeStyle=j,a.lineWidth=v,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(p.x,p.y),a.lineTo(Mt.x,Mt.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=j,a.lineWidth=v,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),Oe.forEach((p,S)=>{S===0?a.moveTo(p.x,p.y):a.lineTo(p.x,p.y)}),a.stroke(),Mt&&Oe.length>0){const p=Oe[Oe.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(p.x,p.y),a.lineTo(Mt.x,Mt.y),a.stroke(),a.globalAlpha=1}}else E==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=g,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),Oe.forEach((y,j)=>{j===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke())}},[ge,Nt,Al,kl,Vn,li,mi,Oe,E,Se,M,g,$e,it,ve,Ke,Ye,st,Mt]),Fs=C.useCallback((a,r)=>{if(el){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&b?f(x=>x?{...x,...r}:null):a==="bottom"&&d?B(x=>x?{...x,...r}:null):a==="both"&&(b&&f(x=>x?{...x,...r}:null),d&&B(x=>x?{...x,...r}:null))},[b,d,el]),kc=C.useCallback(()=>{Yt&&(Fs(Yt,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),de(!1),Z(!1),He(!1))},[Fs,Yt]),sa=C.useCallback(()=>{if(Nt.size>0||vt.size>0||mt.size>0||Vt.size>0){if(Nt.size>0){const a=ge.filter(j=>Nt.has(j.id)),r=mn&&a.some(j=>j.type==="via"),x=En&&a.some(j=>j.type==="trace"),y=yl&&a.some(j=>j.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(x){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(vt.size>0&&sl){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(mt.size>0&&rn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Vt.size>0&&Dn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Ue(a=>a.map(r=>{if(Nt.has(r.id)){const x=r.size+1;return r.type==="via"?Te("via",x):r.type==="pad"?Te("pad",x):r.type==="trace"&&Te("trace",x,r.layer),{...r,size:x}}return r})),vt.size>0){const a=(vt.size>0&&Dt.find(r=>vt.has(r.id))?.size||18)+1;Te("component",a),Nn(r=>r.map(x=>vt.has(x.id)?{...x,size:(x.size||18)+1}:x)),wn(r=>r.map(x=>vt.has(x.id)?{...x,size:(x.size||18)+1}:x))}if(mt.size>0){const a=(St.find(r=>mt.has(r.id))?.size||18)+1;Te("power",a),Zn(r=>r.map(x=>mt.has(x.id)?{...x,size:x.size+1}:x))}if(Vt.size>0){const a=(At.find(r=>Vt.has(r.id))?.size||18)+1;Te("ground",a),Rl(r=>r.map(x=>Vt.has(x.id)?{...x,size:(x.size||18)+1}:x))}}else Y(a=>Math.min(40,a+1))},[Nt,vt,mt,Vt,ge,mn,En,sl,rn,Dn,E,Se,$e,Te]),Ia=C.useCallback(()=>{if(Nt.size>0||vt.size>0||mt.size>0||Vt.size>0){if(Nt.size>0){const a=ge.filter(j=>Nt.has(j.id)),r=mn&&a.some(j=>j.type==="via"),x=En&&a.some(j=>j.type==="trace"),y=yl&&a.some(j=>j.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(x){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(vt.size>0&&sl){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(mt.size>0&&rn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Vt.size>0&&Dn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Ue(a=>a.map(r=>{if(Nt.has(r.id)){const x=Math.max(1,r.size-1);return r.type==="via"?Te("via",x):r.type==="pad"?Te("pad",x):r.type==="trace"&&Te("trace",x,r.layer),{...r,size:x}}return r})),vt.size>0){const a=Math.max(1,(Dt.find(r=>vt.has(r.id))?.size||18)-1);Te("component",a),Nn(r=>r.map(x=>vt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x)),wn(r=>r.map(x=>vt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x))}if(mt.size>0){const a=Math.max(1,(St.find(r=>mt.has(r.id))?.size||18)-1);Te("power",a),Zn(r=>r.map(x=>mt.has(x.id)?{...x,size:Math.max(1,x.size-1)}:x))}if(Vt.size>0){const a=Math.max(1,(At.find(r=>Vt.has(r.id))?.size||18)-1);Te("ground",a),Rl(r=>r.map(x=>Vt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x))}}else Y(a=>Math.max(1,a-1))},[Nt,vt,mt,Vt,ge,mn,En,sl,rn,Dn,E,Se,$e,Te]),vs=C.useCallback(()=>{const a=bi.size;if(Nt.size>0||vt.size>0||mt.size>0||Vt.size>0){if(Nt.size>0){const r=ge.filter(v=>Nt.has(v.id)),x=mn&&r.some(v=>v.type==="via"),y=yl&&r.some(v=>v.type==="pad"),j=En&&r.some(v=>v.type==="trace");if(x||y||j){alert("Cannot change size: selected items are locked.");return}}if(vt.size>0&&sl){alert("Cannot change size: selected components are locked.");return}if(mt.size>0&&rn){alert("Cannot change size: selected power nodes are locked.");return}if(Vt.size>0&&Dn){alert("Cannot change size: selected ground nodes are locked.");return}Ue(r=>r.map(x=>Nt.has(x.id)?(x.type==="via"?(Te("via",a),al(y=>{const j=new Map(y),v=j.get("via");return v&&j.set("via",{...v,settings:{...v.settings,size:a}}),j})):x.type==="pad"?(Te("pad",a),al(y=>{const j=new Map(y),v=j.get("pad");return v&&j.set("pad",{...v,settings:{...v.settings,size:a}}),j})):x.type==="trace"&&Te("trace",a,x.layer),{...x,size:a}):x)),vt.size>0&&(Te("component",a),Nn(r=>r.map(x=>vt.has(x.id)?{...x,size:a}:x)),wn(r=>r.map(x=>vt.has(x.id)?{...x,size:a}:x))),mt.size>0&&(Te("power",a),Zn(r=>r.map(x=>mt.has(x.id)?{...x,size:a}:x))),Vt.size>0&&(Te("ground",a),Rl(r=>r.map(x=>Vt.has(x.id)?{...x,size:a}:x)))}else Y(a),E==="draw"&&Se==="trace"?$e==="top"?(Pt(a),Te("trace",a,"top")):(_(a),Te("trace",a,"bottom")):Te(E==="draw"&&Se==="via"?"via":E==="draw"&&Se==="pad"?"pad":E==="component"?"component":E==="power"?"power":E==="ground"?"ground":"brush",a);Bi({visible:!1,size:6})},[bi.size,Nt,vt,mt,Vt,ge,mn,En,sl,rn,Dn,E,Se,$e,Te,pn,al]),To=C.useCallback(()=>{El({visible:!1,source:null,interval:5})},[]),ms=C.useCallback(async(a,r=!1)=>{if(a===null){ei(!1),qi(null),cn.current&&(clearInterval(cn.current),cn.current=null),Fi({visible:!1,interval:5}),r&&El({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!An){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let x=Zo;if(!x){const j=window;if(typeof j.showDirectoryPicker=="function")try{x=await j.showDirectoryPicker(),vi(x)}catch(v){v?.name!=="AbortError"&&(console.error("Failed to get directory:",v),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}Vs(x);const y=An.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");wa(y),Ti.current=x,ca.current=y,qi(a),ei(!0),rl.current=!0,Fi({visible:!1,interval:5}),r&&El({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),Nr.current&&Nr.current()},200)},[An,Zo,ei,qi,Vs,wa,Fi,El,vi]),Co=C.useCallback(()=>{A("select"),qt(new Set),Ut(new Set),Wt(new Set),Xt(new Set)},[qt,Ut,Wt,Xt]),Ei=C.useCallback(a=>{if(a.key==="Escape"){const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type==="checkbox"||y.tagName==="INPUT"&&y.type==="radio")){y.blur(),a.preventDefault(),a.stopPropagation();return}}const r=document.activeElement;if(!(r&&(r.tagName==="INPUT"&&r.type!=="checkbox"&&r.type!=="radio"||r.tagName==="TEXTAREA"||r.isContentEditable)||Wa.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),sa();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),Ia();return}if((a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="ArrowLeft"||a.key==="ArrowRight")&&vt.size>0){a.preventDefault(),a.stopPropagation();const y=a.shiftKey?10:1;let j=0,v=0;a.key==="ArrowUp"?v=-y:a.key==="ArrowDown"?v=y:a.key==="ArrowLeft"?j=-y:a.key==="ArrowRight"&&(j=y);for(const p of vt){const S=Dt.find(z=>z.id===p);if(S){const z=S.x+j,R=S.y+v,L=nn({x:z,y:R});Nn(X=>X.map(fe=>fe.id===p?{...fe,x:L.x,y:L.y}:fe))}else{const z=xt.find(R=>R.id===p);if(z){const R=z.x+j,L=z.y+v,X=nn({x:R,y:L});wn(fe=>fe.map(K=>K.id===p?{...K,x:X.x,y:X.y}:K))}}}return}if((a.key==="I"||a.key==="i")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation();const y=[];Nt.size>0,Nt.size===0&&vt.size===0&&mt.size===0&&Vt.size===0&&y.push(`
No objects selected.`);const j=y.join(`
`);console.log(j),Go({visible:!0,text:j});return}if((a.key==="N"||a.key==="n")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation(),Nl(!0);return}if(a.key==="O"||a.key==="o"){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;a.preventDefault(),a.stopPropagation(),We(1);const v=Rn.current,p=Ta.current;let S=0,z=0;if(v&&p){const R=v.getBoundingClientRect(),L=p.getBoundingClientRect(),X=v.width-80,fe=v.height-80,Q=60+168+6,F=R.left-L.left,we=Q-F,Ce=R.width-Math.max(0,we),De=we+Ce/2,ze=R.height/2,Re=X/2,tt=fe/2,Ve=R.width/v.width,$=R.height/v.height,k=De/Ve,re=ze/$,ye=k-40,Ne=re-40;S=ye-Re,z=Ne-tt}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),zn({x:S,y:z}),pe("overlay"),qt(new Set),Ut(new Set),Wt(new Set),Xt(new Set),A("select");return}if((a.key==="Alt"||a.altKey)&&$r(!0),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),Co(),Si(!1),Ml(!1),Ll(!1),Ul(!1),Il(!1),Es(!1),Ea(null);return}if(a.key==="Enter"&&E==="draw"&&Se==="trace"){Va();return}if((a.key==="Delete"||a.key==="Backspace")&&(Nt.size>0||vt.size>0||mt.size>0||Vt.size>0)){if(a.preventDefault(),a.stopPropagation(),Nt.size>0){const y=ge.filter(S=>Nt.has(S.id)),j=mn&&y.some(S=>S.type==="via"),v=En&&y.some(S=>S.type==="trace"),p=yl&&y.some(S=>S.type==="pad");j?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):v?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):p?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):(Ue(S=>S.filter(z=>!Nt.has(z.id))),qt(new Set))}vt.size>0&&(sl?alert("Cannot delete: Components are locked. Unlock components to delete them."):(Nn(y=>y.filter(j=>!vt.has(j.id))),wn(y=>y.filter(j=>!vt.has(j.id))),Ut(new Set))),mt.size>0&&(rn?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Zn(y=>y.filter(j=>!mt.has(j.id))),Wt(new Set))),Vt.size>0&&(Dn?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(Rl(y=>y.filter(j=>!Vt.has(j.id))),Xt(new Set)));return}if((E==="draw"||E==="erase"||E==="power"||E==="ground")&&(a.key==="z"||a.key==="Z")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),E==="power"){Zn(y=>y.length===0?y:y.slice(0,-1));return}if(E==="ground"){Rl(y=>y.length===0?y:y.slice(0,-1));return}if(E==="draw"&&Se==="trace"){const y=Oe,j=jt.current,v=y.length>0?y:j;if(v.length>0){v.length>1?ft(p=>p.slice(0,-1)):ft([]);return}Ue(p=>{for(let S=p.length-1;S>=0;S--){const z=p[S];if(z.type==="trace"&&z.layer===$e&&z.points.length>=2)if(z.points.length>2){const R=z.points.slice(0,-1);return ft(R),[...p.slice(0,S),...p.slice(S+1)]}else return[...p.slice(0,S),...p.slice(S+1)]}return p});return}if(ke&&Oe.length>0){ft([]);return}E==="draw"&&(Se==="via"||Se==="pad")&&Ue(y=>{for(let j=y.length-1;j>=0;j--){const v=y[j];if(v.layer===$e&&v.type===Se)return[...y.slice(0,j),...y.slice(j+1)]}return y});return}if(!a.ctrlKey&&!a.altKey){const y=document.activeElement;if(!(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),Co();return;case"b":case"B":a.preventDefault(),A("power");return;case"g":case"G":a.preventDefault(),A("ground");return;case"v":case"V":a.preventDefault(),qe("via"),A("draw");return;case"p":case"P":a.preventDefault(),qe("pad"),A("draw"),Et(il||"top"),Ml(!0);return;case"t":case"T":a.preventDefault(),qe("trace"),A("draw"),Et(it||"top"),Si(!0);return;case"c":case"C":a.preventDefault(),A("component"),Ll(!0),Ul(!1),mo(null);return;case"e":case"E":a.preventDefault(),A("erase");return;case"h":case"H":a.preventDefault(),A("pan");return;case"z":case"Z":if(!a.ctrlKey){a.preventDefault(),Ps(!1),A("magnify");return}break}}if(E==="transform"&&Yt){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const j=document.activeElement;if(j&&j.tagName==="INPUT"){const v=j;v.type==="radio"&&v.blur()}if(el)return;if(fn==="nudge"){let v=0,p=0;switch(a.key){case"ArrowLeft":v=-1;break;case"ArrowRight":v=1;break;case"ArrowUp":p=-1;break;case"ArrowDown":p=1;break;default:return}Yt==="top"&&b?f(S=>S?{...S,x:S.x+v,y:S.y+p}:null):Yt==="bottom"&&d?B(S=>S?{...S,x:S.x+v,y:S.y+p}:null):Yt==="both"&&(b&&f(S=>S?{...S,x:S.x+v,y:S.y+p}:null),d&&B(S=>S?{...S,x:S.x+v,y:S.y+p}:null))}else if(fn==="scale"){let v=0;switch(a.key){case"ArrowUp":v=.01;break;case"ArrowDown":v=-.01;break;case"ArrowRight":v=.001;break;case"ArrowLeft":v=-.001;break;default:return}Yt==="top"&&b?f(p=>p?{...p,scale:Math.max(.1,Math.min(3,p.scale+v))}:null):Yt==="bottom"&&d?B(p=>p?{...p,scale:Math.max(.1,Math.min(3,p.scale+v))}:null):Yt==="both"&&(b&&f(p=>p?{...p,scale:Math.max(.1,Math.min(3,p.scale+v))}:null),d&&B(p=>p?{...p,scale:Math.max(.1,Math.min(3,p.scale+v))}:null))}else if(fn==="rotate"){let v=0;switch(a.key){case"ArrowUp":v=1;break;case"ArrowDown":v=-1;break;case"ArrowRight":v=.1;break;case"ArrowLeft":v=-.1;break;default:return}Yt==="top"&&b?f(p=>p?{...p,rotation:p.rotation+v}:null):Yt==="bottom"&&d?B(p=>p?{...p,rotation:p.rotation+v}:null):Yt==="both"&&(b&&f(p=>p?{...p,rotation:p.rotation+v}:null),d&&B(p=>p?{...p,rotation:p.rotation+v}:null))}else if(fn==="slant"){let v=0,p=0;switch(a.key){case"ArrowUp":p=-.5;break;case"ArrowDown":p=.5;break;case"ArrowLeft":v=-.5;break;case"ArrowRight":v=.5;break}if(v!==0||p!==0){const S=R=>R*Math.PI/180,z=R=>Math.max(-.7,Math.min(.7,R));Yt==="top"&&b?f(R=>R?{...R,skewX:z((R.skewX||0)+S(v)),skewY:z((R.skewY||0)+S(p))}:null):Yt==="bottom"&&d?B(R=>R?{...R,skewX:z((R.skewX||0)+S(v)),skewY:z((R.skewY||0)+S(p))}:null):Yt==="both"&&(b&&f(R=>R?{...R,skewX:z((R.skewX||0)+S(v)),skewY:z((R.skewY||0)+S(p))}:null),d&&B(R=>R?{...R,skewX:z((R.skewX||0)+S(v)),skewY:z((R.skewY||0)+S(p))}:null))}}else if(fn==="keystone"){let v=0,p=0;switch(a.key){case"ArrowUp":p=-.5;break;case"ArrowDown":p=.5;break;case"ArrowLeft":v=-.5;break;case"ArrowRight":v=.5;break}if(v!==0||p!==0){const S=R=>R*Math.PI/180,z=R=>Math.max(-.35,Math.min(.35,R));Yt==="top"&&b?f(R=>R?{...R,keystoneH:z((R.keystoneH||0)+S(v)),keystoneV:z((R.keystoneV||0)+S(p))}:null):Yt==="bottom"&&d?B(R=>R?{...R,keystoneH:z((R.keystoneH||0)+S(v)),keystoneV:z((R.keystoneV||0)+S(p))}:null):Yt==="both"&&(b&&f(R=>R?{...R,keystoneH:z((R.keystoneH||0)+S(v)),keystoneV:z((R.keystoneV||0)+S(p))}:null),d&&B(R=>R?{...R,keystoneH:z((R.keystoneH||0)+S(v)),keystoneV:z((R.keystoneV||0)+S(p))}:null))}}}else{const y=a.target;if(y.tagName==="INPUT"&&y.type==="range"){const j=y,v=Number(j.value),p=Number(j.min),S=Number(j.max),z=Number(j.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const R=Math.max(p,v-z);j.value=R.toString(),j.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const L=Math.min(S,v+z);j.value=L.toString(),j.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[E,Yt,fn,b,d,Nt,vt,mt,Vt,ge,Dt,xt,St,At,Bt,Se,Va,it,ve,Ke,Ye,st,Co,Nn,wn]);ot.useEffect(()=>{E!=="transform"&&hi(null)},[E]),ot.useEffect(()=>{window.addEventListener("keydown",Ei,!0);const a=r=>{r.key==="Alt"&&$r(!1)};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",Ei,!0),window.removeEventListener("keyup",a,!0)}},[Ei,mt,Vt,rn,Dn,St,At,sa,Ia,Co,vt,Dt,xt,Nn,wn]);const zo=C.useCallback(()=>{nt("#AA4499"),Ae("#F781BF"),Pt(6),_(6),oe("trace","#AA4499","top"),oe("trace","#F781BF","bottom"),Te("trace",6,"top"),Te("trace",6,"bottom"),Me("#0072B2"),m("#56B4E9"),W(26),Ee(26),oe("pad","#0072B2","top"),oe("pad","#56B4E9","bottom"),Te("pad",26,"top"),Te("pad",26,"bottom"),rt("#6A3D9A"),gn("#9467BD"),Ol(18),he(18),oe("component","#6A3D9A","top"),oe("component","#9467BD","bottom"),Te("component",18,"top"),Te("component",18,"bottom"),gl("top"),T("#AA4499"),Y(6),Hn([{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}]),Ni([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),Li(!1),Xo(!1),so(!1),tl(!1),va(!1),vr(!1),Et("top"),A("select"),H(50),I(!1),pe("overlay"),Vu(1)},[oe,Te]),jl=C.useCallback(()=>{zo(),setTimeout(()=>{We(1);const a=Rn.current,r=Ta.current;let x=0,y=0;if(a&&r){const j=a.getBoundingClientRect(),v=r.getBoundingClientRect(),p=a.width-80,S=a.height-80,L=60+168+6,X=j.left-v.left,fe=L-X,K=j.width-Math.max(0,fe),ae=fe+K/2,Q=j.height/2,F=p/2,we=S/2,Ce=j.width/a.width,De=j.height/a.height,ze=ae/Ce,Re=Q/De,tt=ze-40,Ve=Re-40;x=tt-F,y=Ve-we}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),zn({x,y}),qt(new Set),Ut(new Set),Wt(new Set),Xt(new Set)},100)},[zo]);ot.useEffect(()=>{jl()},[]),ot.useEffect(()=>{if(!co.visible)return;const a=[];Nt.size>0,Nt.size===0&&vt.size===0&&mt.size===0&&Vt.size===0&&a.push(`
No objects selected.`);const r=a.join(`
`);Go(x=>({...x,text:r}))},[co.visible,Nt,vt,mt,Vt,ge,Dt,xt,St,At,Bt]),ot.useEffect(()=>{const a=r=>{const x=Rn.current;if(x&&!(_a.current&&_a.current.contains(r.target))&&!(r.target instanceof Node&&x.contains(r.target))){if(Va(),Ua){const y=Ba.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&Si(!1)}if(aa){const y=_a.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(Ll(!1),A("select"))}if(vo){const y=Rc.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(Ul(!1),Ea(null))}if(qo){const y=Ys.current;!r.target?.closest('button[title="Color Picker"]')&&(!y||!(r.target instanceof Node)||!y.contains(r.target))&&Es(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[Va,Ua,wi,aa,vo,qo]);const Pa=a=>{if(!a.current)return{top:0,left:0};const r=a.current.getBoundingClientRect(),x=Ta.current?.getBoundingClientRect();return x?{top:r.top-x.top,left:r.left-x.left+r.width+4}:{top:0,left:0}};ot.useEffect(()=>{if(Ua&&Ba.current&&jn.current){const a=Pa(jn);Ba.current.style.top=`${a.top}px`,Ba.current.style.left=`${a.left}px`}},[Ua]),ot.useEffect(()=>{if(wi&&ri.current&&hs.current){const a=Pa(hs);ri.current.style.top=`${a.top}px`,ri.current.style.left=`${a.left}px`}},[wi]),ot.useEffect(()=>{if(aa&&_a.current&&Oa.current){const a=Pa(Oa);_a.current.style.top=`${a.top}px`,_a.current.style.left=`${a.left}px`}},[aa]),ot.useEffect(()=>{if(cs&&Gl.current&&Ha.current){const a=Pa(Ha);Gl.current.style.top=`${a.top}px`,Gl.current.style.left=`${a.left}px`}},[cs]),ot.useEffect(()=>{if(cl&&bo.current&&gs.current){const a=Pa(gs);bo.current.style.top=`${a.top}px`,bo.current.style.left=`${a.left}px`}},[cl]),ot.useEffect(()=>{const a=r=>{if(!On)return;const x=document.querySelector("[data-component-editor-dialog]");if(x&&r.target instanceof Node&&x.contains(r.target)){const Ve=r.target;if(Ve.tagName==="BUTTON"||Ve.tagName==="INPUT"||Ve.closest("button")||Ve.closest("input"))return}const y=Rn.current;if(!y)return;const j=y.getBoundingClientRect(),v=r.clientX,p=r.clientY;if(v<j.left||v>j.right||p<j.top||p>j.bottom)return;const S=y.width/j.width,z=y.height/j.height,R=v-j.left,L=p-j.top,X=R*S,fe=L*z,K=X-40,ae=fe-40,Q=(K-Fe.x)/Pe,F=(ae-Fe.y)/Pe;let we=1/0,Ce=null,De=null;const ze=Math.max(6/Pe,4),tt=[...Dt,...xt].find(Ve=>Ve.id===On.componentId)?.layer||"top";for(const Ve of ge)if((Ve.type==="via"||Ve.type==="pad")&&Ve.points.length>0){if(Ve.type==="pad"&&(Ve.layer||"top")!==tt)continue;const $=Ve.points[0],k=Math.max(1,Ve.size/2),re=Math.hypot($.x-Q,$.y-F),ye=Math.max(k,ze);re<=ye&&re<we&&(we=re,Ce=$.id??null,De=Ve)}if(Ce!=null&&De){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${Ce}`),console.log(`  Connecting pin ${On.pinIndex+1} of component ${On.componentId}`);const Ve=String(Ce),$=On.pinIndex,k=On.componentId,re=Dt.find(Ne=>Ne.id===k),ye=xt.find(Ne=>Ne.id===k);if(re){const Ne=ge;Nn(Ie=>{const ct=Ie.find(Le=>Le.id===k);if(!ct)return Ie;const Xe=ct.pinConnections||[],at=Xe.length>0?[...Xe]:new Array(ct.pinCount).fill("");let dt;if(at.length!==ct.pinCount){dt=new Array(ct.pinCount).fill("");for(let Le=0;Le<Math.min(at.length,ct.pinCount);Le++)dt[Le]=at[Le]||""}else dt=[...at];dt[$]=Ve,console.log(`Updated pin ${$} with value: ${Ve}`),console.log("New pinConnections:",dt);const ln=Ie.find(Le=>Le.id===k),ht=ln?Iu(ln,dt,Ne):null;return Ie.map(Le=>{if(Le.id===k){const yt={...Le,pinConnections:dt};return ht&&(yt.pinPolarities=ht),yt}return Le})})}else if(ye){const Ne=ge;wn(Ie=>{const ct=Ie.find(Le=>Le.id===k);if(!ct)return Ie;const Xe=ct.pinConnections||[],at=Xe.length>0?[...Xe]:new Array(ct.pinCount).fill("");let dt;if(at.length!==ct.pinCount){dt=new Array(ct.pinCount).fill("");for(let Le=0;Le<Math.min(at.length,ct.pinCount);Le++)dt[Le]=at[Le]||""}else dt=[...at];dt[$]=Ve,console.log(`Updated pin ${$} with value: ${Ve}`),console.log("New pinConnections:",dt);const ln=Ie.find(Le=>Le.id===k),ht=ln?Iu(ln,dt,Ne):null;return Ie.map(Le=>{if(Le.id===k){const yt={...Le,pinConnections:dt};return ht&&(yt.pinPolarities=ht),yt}return Le})})}setTimeout(()=>{Wo(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(On)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[On,Dt,xt,ge,Pe,Fe.x,Fe.y]),ot.useEffect(()=>{if(!xr)return;const a=x=>{if(!ao)return;const y={x:x.clientX-ao.x,y:x.clientY-ao.y};yi(y),localStorage.setItem("componentDialogPosition",JSON.stringify(y))},r=()=>{yr(!1),_s(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[xr,ao]),ot.useEffect(()=>{if(!Sl)return;const a=x=>{if(!Hi)return;const y={x:x.clientX-Hi.x,y:x.clientY-Hi.y};fs(y),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(y))},r=()=>{ka(!1),ps(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Sl,Hi]),ot.useEffect(()=>{if(!Yl)return;const a=x=>{if(!Wl)return;const y={x:x.clientX-Wl.x,y:x.clientY-Wl.y};oi(y),localStorage.setItem("notesDialogPosition",JSON.stringify(y))},r=()=>{si(!1),Or(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Yl,Wl]),ot.useEffect(()=>{if(Na&&Qn===null){const a=localStorage.getItem("notesDialogPosition");if(a)try{const r=JSON.parse(a);oi(r)}catch{oi({x:window.innerWidth-550,y:100})}else oi({x:window.innerWidth-550,y:100})}},[Na,Qn]),ot.useEffect(()=>{if(ba&&ba.visible&&Bs===null){const a=localStorage.getItem("componentDialogPosition");if(a)try{const r=JSON.parse(a);yi(r)}catch{yi({x:window.innerWidth/2,y:window.innerHeight/2})}else yi({x:window.innerWidth/2,y:window.innerHeight/2})}else!ba||ba.visible},[ba,Bs]),ot.useEffect(()=>{if(co.visible&&na===null){const a=localStorage.getItem("detailedInfoDialogPosition");if(a)try{const r=JSON.parse(a);fs(r)}catch{fs({x:window.innerWidth-450,y:80})}else fs({x:window.innerWidth-450,y:80})}else co.visible},[co.visible,na]);const Wr=C.useCallback(a=>{switch(a){case"transparency":H(50);break;case"brushSize":Y(3);break}},[]);ot.useEffect(()=>{if(me){Is.current=performance.now(),H(0);const a=r=>{const x=Is.current||r,y=1e3,j=(r-x)%y/y,v=1-Math.abs(1-2*j);H(Math.round(v*100)),go.current=requestAnimationFrame(a)};go.current=requestAnimationFrame(a)}return()=>{go.current&&(cancelAnimationFrame(go.current),go.current=null)}},[me]),ot.useEffect(()=>{const a=E==="erase"?"erase":E==="magnify"?"magnify":E==="ground"?"ground":E==="power"?"power":E==="component"?"component":E==="draw"?Se==="via"?"via":Se==="pad"?"pad":"trace":"default";if(a==="default"){fr(void 0);return}const r=Math.max(1,Pe),x=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(g*r)),j=x+4*2+(a==="magnify"?8:0),v=document.createElement("canvas");v.width=j,v.height=j;const p=v.getContext("2d");if(!p){fr(void 0);return}const S=j/2,z=j/2,R=x/2;if(p.clearRect(0,0,j,j),a==="via"){const X=R,fe=R*.5,K=R*.7,Q=pn.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";p.fillStyle=Q,p.beginPath(),p.arc(S,z,X,0,Math.PI*2),p.arc(S,z,fe,0,Math.PI*2),p.fill("evenodd"),p.strokeStyle="#808080",p.lineWidth=1,p.beginPath(),p.moveTo(S-K,z),p.lineTo(S+K,z),p.stroke(),p.beginPath(),p.moveTo(S,z-K),p.lineTo(S,z+K),p.stroke()}else if(a==="pad"){const fe=pn.get("pad")?.settings.color||ne||M,K=R*2,ae=K*.5,Q=R*.7;p.fillStyle=fe,p.beginPath(),p.rect(S-R,z-R,K,K),p.rect(S-ae/2,z-ae/2,ae,ae),p.fill("evenodd"),p.strokeStyle="#808080",p.lineWidth=1,p.beginPath(),p.moveTo(S-Q,z),p.lineTo(S+Q,z),p.stroke(),p.beginPath(),p.moveTo(S,z-Q),p.lineTo(S,z+Q),p.stroke()}else if(a==="trace"){const fe=pn.get("trace")?.settings.color||(it==="top"?ve:Ke)||M;p.fillStyle=fe,p.beginPath(),p.arc(S,z,R,0,Math.PI*2),p.fill()}else if(a==="erase"){const X=Math.max(g*.75,8),fe=Math.max(g*.5,6),K=Math.max(g*.2,2);p.save(),p.translate(S,z),p.rotate(-35*Math.PI/180),p.fillStyle="#f5a3b3",p.strokeStyle="#111",p.lineWidth=1.5;const ae=1.5,Q=-X/2,F=-fe/2;p.beginPath(),p.moveTo(Q+ae,F),p.lineTo(Q+X-ae,F),p.quadraticCurveTo(Q+X,F,Q+X,F+ae),p.lineTo(Q+X,F+fe-ae),p.quadraticCurveTo(Q+X,F+fe,Q+X-ae,F+fe),p.lineTo(Q+ae,F+fe),p.quadraticCurveTo(Q,F+fe,Q,F+fe-ae),p.lineTo(Q,F+ae),p.quadraticCurveTo(Q,F,Q+ae,F),p.closePath(),p.fill(),p.stroke(),p.fillStyle="#f18ea4",p.beginPath(),p.rect(-X/2,fe/2-K,X,K),p.fill(),p.restore()}else if(a==="magnify"){const X=R;p.strokeStyle="#111",p.lineWidth=2,p.beginPath(),p.arc(S-2,z-2,X,0,Math.PI*2),p.stroke();const fe=S+X*.6,K=z+X*.6,ae=fe+6,Q=K+6;p.beginPath(),p.moveTo(fe,K),p.lineTo(ae,Q),p.stroke(),p.beginPath(),p.moveTo(S-6,z-2),p.lineTo(S+2,z-2),p.stroke(),ts||(p.beginPath(),p.moveTo(S-2,z-6),p.lineTo(S-2,z+2),p.stroke())}else if(a==="ground")if(p.strokeStyle="#000000",p.lineWidth=2,p.lineCap="round",ml==="groundbus-earth"){const fe=R*1.5,K=fe*.9,ae=fe*.24,Q=fe*1.6;p.beginPath(),p.moveTo(S,z-K/2),p.lineTo(S,z+K/2),p.stroke();for(let F=0;F<3;F++){const we=z+K/2+F*ae,Ce=Q*(1-F*.25);p.beginPath(),p.moveTo(S-Ce/2,we),p.lineTo(S+Ce/2,we),p.stroke()}}else{const fe=R*.8;p.beginPath(),p.arc(S,z,R,0,Math.PI*2),p.stroke(),p.beginPath(),p.moveTo(S,z-R-fe),p.lineTo(S,z+R+fe),p.stroke(),p.beginPath(),p.moveTo(S-R-fe,z),p.lineTo(S+R+fe,z),p.stroke()}else if(a==="power"){p.strokeStyle="#ff0000",p.lineWidth=2,p.lineCap="round";const X=R*.8;p.beginPath(),p.arc(S,z,R,0,Math.PI*2),p.stroke(),p.beginPath(),p.moveTo(S,z-R-X),p.lineTo(S,z+R+X),p.stroke(),p.beginPath(),p.moveTo(S-R-X,z),p.lineTo(S+R+X,z),p.stroke()}else if(a==="component"){const X=Cl||"top",fe=pn.get("component"),K=(X==="top"?Je:pt)||fe?.settings.color||M,ae=x,Q=ae/2;p.strokeStyle=K,p.lineWidth=2,p.fillStyle="rgba(255,255,255,0.9)",p.beginPath(),p.rect(S-Q,z-Q,ae,ae),p.fill(),p.stroke();const F=an?gd(an):"?";p.fillStyle=K,p.font=`bold ${Math.max(8,ae*.35)}px sans-serif`,p.textAlign="center",p.textBaseline="middle",p.fillText(F,S,z)}const L=`url(${v.toDataURL()}) ${Math.round(S)} ${Math.round(z)}, crosshair`;fr(L)},[E,Se,M,g,Pe,ts,an,ds,ml,Bt,pn,it,ve,Ke,Cl,Je,pt]),ot.useEffect(()=>{ci()},[ci]),ot.useEffect(()=>{ci()},[Mn.width,Mn.height]),ot.useEffect(()=>{Nt.size===0&&E==="draw"&&Se==="trace"&&g>=1&&($e==="top"?Pt(g):_(g))},[g,E,Se,$e,Nt]),ot.useEffect(()=>{Ue(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Gt(x,Bt);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Tt(x,Bt);if(r.padType!==y)return{...r,padType:y}}return r}))},[St,At,Bt,Gt,Tt]);const ra=C.useCallback(()=>{const a=Rn.current;if(!a)return;const r=a.toDataURL("image/png"),x=window.open("","_blank");if(!x){alert("Please allow popups to print the canvas.");return}x.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${r}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),x.document.close()},[]);ot.useEffect(()=>{const a=x=>{x.key==="Shift"&&Ps(!0)},r=x=>{x.key==="Shift"&&Ps(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}},[]);const Vi=C.useCallback(a=>{if(a.size===0)return;const r=Array.from(a).map(x=>String(x));Ue(x=>x.map(y=>{if(y.type==="trace"){const j=y.points.filter(v=>v.id===void 0?!0:!a.has(v.id));return j.length<2?null:{...y,points:j}}return y}).filter(y=>y!==null)),Nn(x=>x.map(y=>{const j=y.pinConnections||[];if(j.some(p=>p&&r.includes(p))){const p=j.map(S=>S&&r.includes(S)?"":S);return{...y,pinConnections:p}}return y})),wn(x=>x.map(y=>{const j=y.pinConnections||[];if(j.some(p=>p&&r.includes(p))){const p=j.map(S=>S&&r.includes(S)?"":S);return{...y,pinConnections:p}}return y}))},[Ue,Nn,wn]),Ro=C.useRef(new Set);ot.useEffect(()=>{const a=new Set;for(const x of ge)if((x.type==="via"||x.type==="pad")&&x.points.length>0){const y=x.points[0].id;y!==void 0&&a.add(y)}const r=new Set;for(const x of Ro.current)a.has(x)||r.add(x);r.size>0&&Vi(r),Ro.current=a},[ge,Vi]),ot.useEffect(()=>{Ue(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Gt(x,Bt);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Tt(x,Bt);if(r.padType!==y)return{...r,padType:y}}return r}))},[St,At,Bt,Gt,Tt]),ot.useEffect(()=>{const a=r=>{as.current&&(as.current.contains(r.target)||ma(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),ot.useEffect(()=>{const a=(r,x)=>{const y=r.current;if(!y)return;const j=y.getContext("2d");if(!j)return;const v=y.width,p=y.height;if(j.clearRect(0,0,v,p),j.fillStyle="#fff",j.fillRect(0,0,v,p),x?.bitmap){const S=x.bitmap,z=Math.min(v/S.width,p/S.height),R=Math.max(1,Math.floor(S.width*z)),L=Math.max(1,Math.floor(S.height*z)),X=Math.floor((v-R)/2),fe=Math.floor((p-L)/2);j.drawImage(S,X,fe,R,L)}j.strokeStyle="#ddd",j.lineWidth=1,j.strokeRect(.5,.5,v-1,p-1)};a(wc,b),a(za,d)},[b,d]),ot.useEffect(()=>{const a=[],r=[],x=[],y=[];for(const j of ge)if(j.type==="via"&&j.points.length>=1){const v=j.points[0],p={id:j.id,pointId:v.id,x:v.x,y:v.y,size:j.size,color:j.color};a.push(p)}else if(j.type==="pad"&&j.points.length>=1){const v=j.points[0],p={id:j.id,pointId:v.id,x:v.x,y:v.y,size:j.size,color:j.color,layer:j.layer||"top"};r.push(p)}else if(j.type==="trace"&&j.points.length>=2)for(let v=0;v<j.points.length-1;v++){const p=j.points[v],S=j.points[v+1],z={id:j.id,startPointId:p.id,endPointId:S.id,x1:p.x,y1:p.y,x2:S.x,y2:S.y,size:j.size,color:j.color};j.layer==="top"?x.push(z):y.push(z)}lo(a),io(r),yc(x),ya(y)},[ge]);const Do=C.useRef(ge);Do.current=ge;const ji=C.useCallback(()=>{const r=new Date().toISOString(),x=fx();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:r,view:{currentView:q,viewScale:Pe,viewPan:Fe,showBothLayers:Ds,selectedDrawingLayer:$e},images:{top:b?{name:b.name,width:b.width,height:b.height,dataUrl:b.dataUrl??b.url,x:b.x,y:b.y,scale:b.scale,rotation:b.rotation,flipX:b.flipX,flipY:b.flipY,skewX:b.skewX,skewY:b.skewY,keystoneV:b.keystoneV,keystoneH:b.keystoneH}:null,bottom:d?{name:d.name,width:d.width,height:d.height,dataUrl:d.dataUrl??d.url,x:d.x,y:d.y,scale:d.scale,rotation:d.rotation,flipX:d.flipX,flipY:d.flipY,skewX:d.skewX,skewY:d.skewY,keystoneV:d.keystoneV,keystoneH:d.keystoneH}:null},drawing:{drawingStrokes:Do.current.filter(j=>!(j.type==="trace"&&j.points.length<2)),vias:xa,tracesTop:_n,tracesBottom:hr,componentsTop:Dt,componentsBottom:xt,grounds:At,powers:St},powerBuses:Bt,groundBuses:zl,pointIdCounter:hh(),traceColors:{top:ve,bottom:Ke},traceSizes:{top:Ye,bottom:st},padColors:{top:ne,bottom:ie},padSizes:{top:D,bottom:ue},componentColors:{top:Je,bottom:pt},componentSizes:{top:Ht,bottom:te},traceToolLayer:it,toolSettings:{trace:pn.get("trace")?.settings||{color:"#ff0000",size:10},via:pn.get("via")?.settings||{color:"#ff0000",size:26},pad:pn.get("pad")?.settings||{color:"#ff0000",size:26},component:pn.get("component")?.settings||{color:"#ff0000",size:18},ground:pn.get("ground")?.settings||{color:"#000000",size:18},power:pn.get("power")?.settings||{color:"#ff0000",size:18}},locks:{areImagesLocked:el,areViasLocked:mn,arePadsLocked:yl,areTracesLocked:En,areComponentsLocked:sl,areGroundNodesLocked:Dn,arePowerNodesLocked:rn},visibility:{showViasLayer:Vn,showTopPadsLayer:li,showBottomPadsLayer:mi,showTopTracesLayer:Al,showBottomTracesLayer:kl,showTopComponents:ii,showBottomComponents:$l,showPowerLayer:ai,showGroundLayer:Pl,showConnectionsLayer:ta},autoSave:{enabled:Vl,interval:Sa,baseName:Qi},projectInfo:{name:An}},timestamp:x}},[q,Pe,Fe,Ds,$e,b,d,ge,xa,_n,hr,Dt,xt,At,pn,el,mn,yl,En,sl,Dn,rn,Bt,zl,hh,ve,Ke,Ye,st,ne,ie,D,ue,Je,pt,Ht,te,it,Vl,Sa,Qi,An,Vn,li,mi,Al,kl,ii,$l,ai,Pl,ta]),Ao=C.useRef(ji);Ao.current=ji;const Ti=C.useRef(Zi);Ti.current=Zi;const ca=C.useRef(Qi);ca.current=Qi;const Xr=C.useRef(Dl);Xr.current=Dl;const Ya=C.useRef($s);Ya.current=$s;const Kn=C.useRef([]);Kn.current=mc;const Wa=C.useRef(-1);Wa.current=Tr;const Ss=C.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=Ti.current,r=ca.current;console.log(`Auto save: dirHandle=${a?"set":"missing"}, baseName=${r||"missing"}`);const x=Ya.current;if(console.log(`Auto save: currentFilePath=${x||"none"}`),!a||!r){console.warn(`Auto save: Missing directory handle (${!a}) or base name (${!r}). Please use File -> Auto Save -> Enable to set up auto save.`),ei(!1),cn.current&&(clearInterval(cn.current),cn.current=null);return}if(!rl.current){console.log("Auto save: Skipping - no changes since last save");return}const y=Do.current,j=y.filter(L=>L.type==="trace"&&L.points.length<2);if(j.length>0){console.log(`Auto save: Cleaning up ${j.length} single-point trace(s) before save`),j.forEach(X=>console.log(`  - Removing single-point trace ${X.id}`));const L=y.filter(X=>!(X.type==="trace"&&X.points.length<2));Ue(L),Do.current=L}console.log("Auto save: Starting save...");const{project:v,timestamp:p}=Ao.current(),S=`${r}_${p}.json`,z=JSON.stringify(v,null,2),R=new Blob([z],{type:"application/json"});try{let L;try{L=await a.getDirectoryHandle("history",{create:!0})}catch(Q){console.error("Failed to get/create history directory:",Q);return}try{const Q=[];for await(const F of a.keys())try{if(F==="history"||F===S)continue;const Ce=await(await a.getFileHandle(F)).getFile();if(!F.endsWith(".json"))continue;const De=await Ce.text();try{const ze=JSON.parse(De);ze.version&&(ze.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!ze.fileType)&&(Q.push(F),console.log(`Auto save: Found PCB project file in root: ${F} (${ze.fileType?"auto-saved":"manually saved"})`))}catch{continue}}catch{continue}for(const F of Q)try{const De=await(await(await a.getFileHandle(F)).getFile()).text(),Re=await(await L.getFileHandle(F,{create:!0})).createWritable();await Re.write(new Blob([De],{type:"application/json"})),await Re.close(),await a.removeEntry(F),console.log(`Auto save: Moved ${F} from root to history/`)}catch(we){console.warn(`Auto save: Failed to move ${F} to history:`,we)}}catch(Q){console.warn("Auto save: Error checking for old files in root:",Q)}const fe=await(await a.getFileHandle(S,{create:!0})).createWritable();await fe.write(R),await fe.close(),console.log(`Auto save: Successfully saved ${S} to root directory`),Xr.current(S);const K=Kn.current,ae=[S,...K.filter(Q=>Q!==S)].sort((Q,F)=>F.localeCompare(Q));fo(ae),Kn.current=ae,Cr(0),Wa.current=0,rl.current=!1}catch(L){console.error("Auto save failed:",L)}},[]);Nr.current=Ss;const ws=C.useCallback(async()=>{const{project:a}=ji(),r=JSON.stringify(a,null,2),x=new Blob([r],{type:"application/json"});if(Zo&&An)try{const R="project.json",X=await(await Zo.getFileHandle(R,{create:!0})).createWritable();await X.write(x),await X.close(),Dl(R),console.log(`Project saved: ${An}/${R}`);return}catch(R){console.error("Failed to save to project directory:",R),vi(null)}if(An&&!Zo){const R=window;if(typeof R.showDirectoryPicker=="function")try{const L=await R.showDirectoryPicker();vi(L);const X=`${An}.json`,K=await(await L.getFileHandle(X,{create:!0})).createWritable();await K.write(x),await K.close(),Dl(X),console.log(`Project saved: ${X} in selected directory`);return}catch(L){L?.name!=="AbortError"&&console.error("Failed to get directory:",L)}}const y=R=>String(R).padStart(2,"0"),j=new Date,p=`pcb_project_${`${j.getFullYear()}_${y(j.getMonth()+1)}_${y(j.getDate())}_${y(j.getHours())}_${y(j.getMinutes())}_${y(j.getSeconds())}`}.json`,S=window;if(typeof S.showSaveFilePicker=="function")try{const R=await S.showSaveFilePicker({suggestedName:p,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),L=await R.createWritable();await L.write(x),await L.close();const X=R.name;try{const ae=await R.getFile();Dl(ae.name)}catch{Dl(X)}const K=X.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");K&&(ti(K),localStorage.setItem("pcb_project_name",K));try{const ae=R.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");wa(ae),Zi||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(ae){console.warn("Could not set up auto save for new file:",ae)}return}catch(R){if(R?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",R)}const z=document.createElement("a");z.href=URL.createObjectURL(x),z.download=p,document.body.appendChild(z),z.click(),setTimeout(()=>{URL.revokeObjectURL(z.href),document.body.removeChild(z)},0)},[ji]),Bl=C.useCallback(async()=>{const a=[...Dt,...xt],{schematic:r,nodesCsv:x}=ux(a,ge,St,At,Bt),y=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),j=An||"pcb_project",v=new Blob([x],{type:"text/csv"}),p=`${y}_nodes.csv`,S=window;if(typeof S.showSaveFilePicker=="function")try{const X=await S.showSaveFilePicker({suggestedName:p,types:[{description:"CSV Files",accept:{"text/csv":[".csv"]}}]}),fe=await X.createWritable();await fe.write(v),await fe.close(),console.log(`Nodes CSV exported: ${X.name}`)}catch(X){if(X?.name==="AbortError")return;console.warn("showSaveFilePicker failed for CSV, falling back to download",X);const fe=document.createElement("a");fe.href=URL.createObjectURL(v),fe.download=p,document.body.appendChild(fe),fe.click(),setTimeout(()=>{URL.revokeObjectURL(fe.href),document.body.removeChild(fe)},0)}else{const X=document.createElement("a");X.href=URL.createObjectURL(v),X.download=p,document.body.appendChild(X),X.click(),setTimeout(()=>{URL.revokeObjectURL(X.href),document.body.removeChild(X)},0)}const z=new Blob([r],{type:"text/plain"}),R=`${j}.kicad_sch`;if(typeof S.showSaveFilePicker=="function")try{const X=await S.showSaveFilePicker({suggestedName:R,types:[{description:"KiCad Schematic",accept:{"text/plain":["kicad_sch"]}}]}),fe=await X.createWritable();await fe.write(z),await fe.close(),console.log(`Simple schematic exported: ${X.name}`);return}catch(X){if(X?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",X)}const L=document.createElement("a");L.href=URL.createObjectURL(z),L.download=R,document.body.appendChild(L),L.click(),setTimeout(()=>{URL.revokeObjectURL(L.href),document.body.removeChild(L)},0)},[Dt,xt,ge,St,At,Bt,An]);ot.useEffect(()=>{cn.current&&(clearInterval(cn.current),cn.current=null);const a=zr.current;if(zr.current=Vl,Vl&&Sa){const r=Sa*60*1e3;Zi&&Qi?(console.log(`Auto save: Setting up interval for ${Sa} minute(s) (${r}ms)`),a||(rl.current=!0,setTimeout(()=>{Ss()},100)),cn.current&&(clearInterval(cn.current),cn.current=null),cn.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${rl.current}`),console.log(`  - dirHandle: ${Ti.current?"set":"missing"}`),console.log(`  - baseName: ${ca.current||"missing"}`),Ss()},r),console.log(`Auto save: Interval set up for ${r}ms (${Sa} minutes)`),console.log(`  - Directory handle: ${Zi?"set":"missing"}`),console.log(`  - Base name: ${Qi||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!Zi}) or base name (${!Qi}). Disabling auto save.`),ei(!1),cn.current&&(clearInterval(cn.current),cn.current=null))}else Vl||(zr.current=!1);return()=>{cn.current&&(clearInterval(cn.current),cn.current=null)}},[Vl,Sa,Zi,Qi]);const nl=C.useRef(!1);ot.useEffect(()=>{if(!Vl){nl.current=!1;return}if(nl.current){nl.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}rl.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!b,bottomImage:!!d,drawingStrokesCount:ge.length,componentsTopCount:Dt.length,componentsBottomCount:xt.length,powersCount:St.length,groundsCount:At.length,powerBusesCount:Bt.length,areImagesLocked:el,areViasLocked:mn,areTracesLocked:En,areComponentsLocked:sl,areGroundNodesLocked:Dn,arePowerNodesLocked:rn})},[b,d,ge,Dt,xt,St,At,Bt,ve,Ke,Ye,st,el,mn,En,sl,Dn,rn,Vl]),ot.useEffect(()=>{Vl?(nl.current=!0,console.log("Auto save: Enabled, marking first run")):nl.current=!1},[Vl]),ot.useEffect(()=>{Vl||(rl.current=!1)},[Vl]);const da=C.useCallback(()=>!!(b||d||ge.length>0||Dt.length>0||xt.length>0||St.length>0||At.length>0),[b,d,ge,Dt,xt,St,At]);ot.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&ti(a)},[]);const Xa=C.useCallback(()=>{Lo({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Nc=C.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Lo(x=>({...x,locationHandle:r,locationPath:r.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",r.name||"")}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),$i=C.useCallback(async()=>{const a=xn.projectName.trim();if(!a){alert("Please enter a project name.");return}const r=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!xn.locationHandle){alert("Please select a location for the project.");return}const x=xn.locationHandle;let y;try{y=await x.getDirectoryHandle(r,{create:!0})}catch(j){console.error("Failed to create project folder:",j),alert(`Failed to create project folder "${r}". See console for details.`);return}Lo({visible:!1,projectName:"",locationPath:"",locationHandle:null}),ti(r),vi(y),localStorage.setItem("pcb_project_name",r),localStorage.setItem("pcb_project_location_path",x.name||""),f(null),B(null),Ue([]),Nn([]),wn([]),Zn([]),Rl([]),qt(new Set),Ut(new Set),Wt(new Set),Xt(new Set),pe("overlay"),We(1),zn({x:0,y:0}),rl.current=!1,Dl(""),ei(!1),qi(null),Vs(null),wa(""),cn.current&&(clearInterval(cn.current),cn.current=null),zo();try{const{project:j}=ji(),v="project.json",p=JSON.stringify(j,null,2),S=new Blob([p],{type:"application/json"}),R=await(await y.getFileHandle(v,{create:!0})).createWritable();await R.write(S),await R.close(),Dl(v),console.log(`New project created: ${r}/project.json`),El({visible:!0,source:"new",interval:5})}catch(j){console.error("Failed to save new project:",j),alert("Failed to save new project file. See console for details.")}},[zo,ji,xn]),dl=C.useCallback(()=>{Lo({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),kn=C.useCallback(()=>{const a=An?`${An}.json`:"";Fo({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(is.current?.focus(),is.current&&a){const r=a.replace(/\.json$/i,"");is.current.setSelectionRange(0,r.length)}},100)},[An]),qs=C.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Fo(x=>({...x,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Ci=C.useCallback(async()=>{const a=yn.filename.trim();if(!a){alert("Please enter a file name.");return}const x=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!yn.locationHandle){alert("Please select a location for the file.");return}const y=yn.locationHandle;try{const{project:j}=ji(),v=JSON.stringify(j,null,2),p=new Blob([v],{type:"application/json"}),z=await(await y.getFileHandle(x,{create:!0})).createWritable();await z.write(p),await z.close(),Dl(x);const R=x.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");R&&(ti(R),localStorage.setItem("pcb_project_name",R)),vi(y),Fo({visible:!1,filename:"",locationPath:"",locationHandle:null}),ma(null),console.log(`Project saved as: ${x} in selected directory`)}catch(j){console.error("Failed to save project:",j),alert(`Failed to save project file "${x}". See console for details.`)}},[yn,ji]),Ct=C.useCallback(()=>{Fo({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),Qt=C.useCallback(async()=>{uo({visible:!1}),await ws(),Xa(),jl()},[ws,Xa,jl]),Un=C.useCallback(()=>{uo({visible:!1}),Xa(),jl()},[Xa,jl]),js=C.useCallback(()=>{uo({visible:!1})},[]);ot.useEffect(()=>{if(jr.visible){setTimeout(()=>{Ur.current?.focus()},0);const a=r=>{r.key==="Enter"?(r.preventDefault(),Qt()):r.key==="Escape"&&(r.preventDefault(),uo({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[jr.visible,Qt]);const zi=C.useCallback(async a=>{try{if(a.projectInfo)a.projectInfo.name&&(ti(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const v=localStorage.getItem("pcb_project_name");v&&ti(v)}if(a.view&&(a.view.currentView&&pe(a.view.currentView),a.view.viewScale!=null&&We(a.view.viewScale),a.view.viewPan&&zn(a.view.viewPan),a.view.showBothLayers!=null&&As(a.view.showBothLayers),a.view.selectedDrawingLayer&&Et(a.view.selectedDrawingLayer)),a.traceColors&&(a.traceColors.top&&(nt(a.traceColors.top),oe("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(Ae(a.traceColors.bottom),oe("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const v=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let p=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;p<6&&(p=6),Pt(v),_(p),Te("trace",v,"top"),Te("trace",p,"bottom"),Yi("trace","top",a.traceColors?.top||ve,v),Yi("trace","bottom",a.traceColors?.bottom||Ke,p)}else Pt(6),_(6),Yi("trace","top",ve,6),Yi("trace","bottom",Ke,6);if(a.padColors&&(a.padColors.top&&(Me(a.padColors.top),oe("pad",a.padColors.top,"top")),a.padColors.bottom&&(m(a.padColors.bottom),oe("pad",a.padColors.bottom,"bottom"))),a.padSizes){const v=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:26,p=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:26;W(v),Ee(p),Te("pad",v,"top"),Te("pad",p,"bottom")}if(a.componentColors&&(a.componentColors.top&&(rt(a.componentColors.top),oe("component",a.componentColors.top,"top")),a.componentColors.bottom&&(gn(a.componentColors.bottom),oe("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const v=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,p=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;Ol(v),he(p),Te("component",v,"top"),Te("component",p,"bottom")}if(a.traceToolLayer&&(gl(a.traceToolLayer),E==="draw"&&Se==="trace")){const v=a.traceToolLayer;T(v==="top"?a.traceColors?.top||ve:a.traceColors?.bottom||Ke);const p=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let S=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;S<6&&(S=6),Y(v==="top"?p:S)}a.toolSettings&&al(v=>{const p=new Map(v);if(a.toolSettings.trace){const z=p.get("trace");if(z){const R={...z,settings:a.toolSettings.trace},L=new Map(z.layerSettings);a.traceSizes&&a.traceColors&&(L.set("top",{color:a.traceColors.top||z.layerSettings.get("top")?.color||"#AA4499",size:a.traceSizes.top||z.layerSettings.get("top")?.size||6}),L.set("bottom",{color:a.traceColors.bottom||z.layerSettings.get("bottom")?.color||"#F781BF",size:a.traceSizes.bottom||z.layerSettings.get("bottom")?.size||6})),p.set("trace",{...R,layerSettings:L})}}if(a.toolSettings.via){const z=p.get("via");z&&p.set("via",{...z,settings:a.toolSettings.via})}if(a.toolSettings.pad){const z=p.get("pad");z&&p.set("pad",{...z,settings:a.toolSettings.pad})}if(a.toolSettings.component){const z=p.get("component");z&&p.set("component",{...z,settings:a.toolSettings.component})}if(a.toolSettings.ground){const z=p.get("ground");z&&p.set("ground",{...z,settings:a.toolSettings.ground})}if(a.toolSettings.power){const z=p.get("power");z&&p.set("power",{...z,settings:a.toolSettings.power})}const S=E==="draw"&&Se==="trace"?p.get("trace"):E==="draw"&&Se==="via"?p.get("via"):E==="draw"&&Se==="pad"?p.get("pad"):E==="component"?p.get("component"):E==="power"?p.get("power"):E==="ground"?p.get("ground"):null;return S&&(T(S.settings.color),Y(S.settings.size)),p});const r=async v=>{if(!v)return null;let p=null;if(v.dataUrl){const S=await(await fetch(v.dataUrl)).blob();p=await createImageBitmap(S)}return{url:v.dataUrl??"",name:v.name??"image",width:v.width??(p?p.width:0),height:v.height??(p?p.height:0),dataUrl:v.dataUrl,x:v.x??0,y:v.y??0,scale:v.scale??1,rotation:v.rotation??0,flipX:!!v.flipX,flipY:!!v.flipY,skewX:v.skewX??0,skewY:v.skewY??0,keystoneV:v.keystoneV??0,keystoneH:v.keystoneH??0,bitmap:p}},x=await r(a.images?.top),y=await r(a.images?.bottom);if(f(x),B(y),a.pointIdCounter&&typeof a.pointIdCounter=="number")Vu(a.pointIdCounter);else{let v=0;if(a.drawing?.drawingStrokes){for(const S of a.drawing.drawingStrokes)if(S.points)for(const z of S.points)z.id&&typeof z.id=="number"&&z.id>v&&(v=z.id)}const p=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]];for(const S of p)if(S.pinConnections){for(const z of S.pinConnections)if(z){const R=parseInt(z.trim(),10);!isNaN(R)&&R>v&&(v=R)}}if(a.drawing?.powers)for(const S of a.drawing.powers)S.pointId&&typeof S.pointId=="number"&&S.pointId>v&&(v=S.pointId);if(a.drawing?.grounds)for(const S of a.drawing.grounds)S.pointId&&typeof S.pointId=="number"&&S.pointId>v&&(v=S.pointId);Vu(v+1)}if(a.locks&&(typeof a.locks.areImagesLocked=="boolean"?Li(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&Li(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&Xo(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&br(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&so(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&tl(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?va(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&va(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&vr(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&ss(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&Br(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&_r(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&_i(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&Ws(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&rs(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&bl(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&vl(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Oi(a.visibility.showGroundLayer),typeof a.visibility.showConnectionsLayer=="boolean"&&Ls(a.visibility.showConnectionsLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&ei(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&qi(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(wa(a.autoSave.baseName),ca.current=a.autoSave.baseName,a.autoSave.enabled&&!Zi&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),ei(!1),qi(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),ei(!1),qi(null),wa(""),ca.current="")):(ei(!1),qi(null),Vs(null),wa(""),Ti.current=null,ca.current="",cn.current&&(clearInterval(cn.current),cn.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const v=a.drawing.drawingStrokes.map(p=>({...p,points:p.points.map(S=>({...S,...nn(S)}))})).filter(p=>!(p.type==="trace"&&p.points.length<2));Ue(v)}else{const v=[],p=(R,L)=>{const X=nn({x:R.x,y:R.y});v.push({id:R.id||`${Date.now()}-via-${Math.random()}`,points:[{id:R.pointId||pi(),x:X.x,y:X.y}],color:R.color,size:R.size,layer:L,type:"via"})},S=(R,L)=>{const X=nn({x:R.x1,y:R.y1}),fe=nn({x:R.x2,y:R.y2});v.push({id:R.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:R.startPointId||pi(),x:X.x,y:X.y},{id:R.endPointId||pi(),x:fe.x,y:fe.y}],color:R.color,size:R.size,layer:L,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(R=>p(R,"top")):((a.drawing?.viasTop??[]).forEach(R=>p(R,"top")),(a.drawing?.viasBottom??[]).forEach(R=>p(R,"bottom"))),(a.drawing?.tracesTop??[]).forEach(R=>S(R,"top")),(a.drawing?.tracesBottom??[]).forEach(R=>S(R,"bottom"));const z=v.filter(R=>!(R.type==="trace"&&R.points.length<2));Ue(z)}if(a.drawing?.componentsTop){const v=a.drawing.componentsTop.map(p=>{const S=nn({x:p.x,y:p.y});return{...p,x:S.x,y:S.y,layer:p.layer||"top",pinConnections:p.pinConnections||new Array(p.pinCount||0).fill("")}});Nn(v)}if(a.drawing?.componentsBottom){const v=a.drawing.componentsBottom.map(p=>{const S=nn({x:p.x,y:p.y});return{...p,x:S.x,y:S.y,layer:p.layer||"bottom",pinConnections:p.pinConnections||new Array(p.pinCount||0).fill("")}});wn(v)}if(a.drawing?.grounds){const p=a.drawing.grounds.map(S=>{const z=S.pointId||pi(),R=nn({x:S.x,y:S.y});return{...S,pointId:z,x:R.x,y:R.y}}).filter(S=>{const z=S.y>=0&&S.x>=0&&typeof S.x=="number"&&typeof S.y=="number"&&!isNaN(S.x)&&!isNaN(S.y)&&isFinite(S.x)&&isFinite(S.y);return z||console.warn(`Filtered out invalid ground symbol at (${S.x}, ${S.y}) - likely in border area or invalid coordinates`),z});Rl(p)}let j;if(a.powerBuses&&Array.isArray(a.powerBuses)&&a.powerBuses.length>0?(j=a.powerBuses,Hn(j)):(j=[{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}],Hn(j)),a.groundBuses&&Array.isArray(a.groundBuses)&&a.groundBuses.length>0?Ni(a.groundBuses):Ni([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),a.drawing?.powers){const p=a.drawing.powers.map(S=>{const z=S.pointId||pi(),R=nn({x:S.x,y:S.y});return S.powerBusId?{...S,pointId:z,x:R.x,y:R.y,layer:S.layer||"top"}:{...S,pointId:z,x:R.x,y:R.y,powerBusId:j.length>0?j[0].id:"default-5v",layer:S.layer||"top"}}).filter(S=>{const z=S.y>=0&&S.x>=0&&typeof S.x=="number"&&typeof S.y=="number"&&!isNaN(S.x)&&!isNaN(S.y)&&isFinite(S.x)&&isFinite(S.y);return z||console.warn(`Filtered out invalid power node at (${S.x}, ${S.y}) - likely in border area or invalid coordinates`),z});Zn(p)}rl.current=!1}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}},[E,Se]),Fl=C.useCallback(async()=>{},[$s]),Ga=C.useCallback(async a=>{const r=Ti.current;if(!r){console.warn("Cannot load file: no directory handle");return}try{const y=await(await r.getFileHandle(a)).getFile();if(y.size===0){console.warn(`File ${a} is empty, skipping`);const R=Kn.current.filter(L=>L!==a);fo(R),Kn.current=R;return}const j=await y.text();if(!j||j.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const R=Kn.current.filter(L=>L!==a);fo(R),Kn.current=R;return}let v;try{v=JSON.parse(j)}catch(z){console.error(`Failed to parse JSON from file ${a}:`,z);const L=Kn.current.filter(X=>X!==a);fo(L),Kn.current=L,await Fl();return}zo(),We(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),qt(new Set),Ut(new Set),Wt(new Set),Xt(new Set),jl(),await zi(v),Dl(a);const S=Kn.current.indexOf(a);S>=0?(Cr(S),Wa.current=S):await Fl(),rl.current=!1}catch(x){console.error("Failed to load file from history:",x);const y=Kn.current;if(y.includes(a)){const j=y.filter(v=>v!==a);fo(j),Kn.current=j,await Fl()}}},[zi,Fl,jl]);C.useCallback(async()=>{const a=Wa.current,r=Kn.current;if(a>=0&&a<r.length-1){const x=a+1,y=r[x];y&&await Ga(y)}},[Ga]),C.useCallback(async()=>{const a=Wa.current,r=Kn.current;if(a<=0||a>=r.length||r.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",r.length);return}if(a>0&&a<r.length&&r.length>0){const x=a-1;if(x>=0&&x<r.length){const y=r[x];y?await Ga(y):(console.warn("No newer file found at index",x),await Fl())}else console.warn("Cannot navigate to newer file: prevIndex",x,"is out of bounds")}},[Ga,Fl]),ot.useEffect(()=>{jt.current=Oe},[Oe]);const La=ot.useRef(Se),ua=ot.useRef($e);ot.useEffect(()=>{const a=Se!==La.current;if(E==="draw"&&La.current==="trace"&&a){if(jt.current.length>=2){const r={id:`${Date.now()}-trace-autofinalize`,points:jt.current,color:M,size:g,layer:ua.current,type:"trace"};Ue(x=>[...x,r]),ua.current==="top"?xi(x=>[...x,r.id]):Gi(x=>[...x,r.id])}ft([]),Be(!1)}La.current=Se,ua.current=$e},[Se,$e,E,M,g]);const Cd=ot.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);ot.useEffect(()=>{ci()},[ge]),ot.useEffect(()=>{ci()},[Dt,xt,At,Pl]),ot.useEffect(()=>{const a=Rr.current,r=Dr.current;if(Ki.current=!0,a){const x=Math.max(0,a.scrollWidth-a.clientWidth),y=Qo.current,j=Math.max(0,Math.min(x,-(Fe.x+y)));Math.abs(a.scrollLeft-j)>.5&&(a.scrollLeft=j)}if(r){const x=Math.max(0,r.scrollHeight-r.clientHeight),y=Ko.current,j=Math.max(0,Math.min(x,-(Fe.y+y)));Math.abs(r.scrollTop-j)>.5&&(r.scrollTop=j)}requestAnimationFrame(()=>{Ki.current=!1})},[Fe.x,Fe.y]);const Ge=Tr>0,Gr=C.useCallback(async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[r]=await a.showOpenFilePicker({multiple:!1}),x=await r.getFile();if(!x.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}Dl(x.name);const y=await x.text(),j=JSON.parse(y);try{const p=await r.getParent();vi(p)}catch(p){console.warn("Could not get directory handle from file handle:",p)}await zi(j);let v;j.projectInfo?.name?v=j.projectInfo.name:(v=x.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",ti(v),localStorage.setItem("pcb_project_name",v)),An||(ti(v),localStorage.setItem("pcb_project_name",v)),setTimeout(()=>{El({visible:!0,source:"open",interval:5})},100)}catch(r){if(r?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",r),ja.current?.click()}else ja.current?.click()},[zi,An,Dl,ti,vi,El]);return i.jsxs("div",{className:"app",children:[i.jsx("header",{className:"app-header",children:i.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.0)"})}),i.jsx(px,{openMenu:Sr,setOpenMenu:ma,isReadOnlyMode:Ge,currentProjectFilePath:$s,onNewProject:Xa,onOpenProject:Gr,onSaveProject:ws,onSaveAs:kn,onExportSchematic:Bl,onPrint:ra,hasUnsavedChanges:da,setNewProjectDialog:uo,setAutoSaveDialog:Fi,topImage:b,bottomImage:d,selectedImageForTransform:Yt,setSelectedImageForTransform:hi,setCurrentTool:A,transformMode:fn,setTransformMode:qn,updateImageTransform:Fs,resetImageTransform:kc,isGrayscale:ce,setIsGrayscale:de,isBlackAndWhiteEdges:P,setIsBlackAndWhiteEdges:Z,isBlackAndWhiteInverted:_e,setIsBlackAndWhiteInverted:He,areImagesLocked:el,setAreImagesLocked:Li,onEnterBoardDimensions:()=>Yn(!0),fileInputTopRef:po,fileInputBottomRef:ho,openProjectRef:ja,increaseSize:sa,decreaseSize:Ia,brushSize:g,drawingStrokes:ge,selectedIds:Nt,selectedComponentIds:vt,selectedPowerIds:mt,selectedGroundIds:Vt,componentsTop:Dt,componentsBottom:xt,powers:St,grounds:At,setSetSizeDialog:Bi,areViasLocked:mn,setAreViasLocked:Xo,arePadsLocked:yl,setArePadsLocked:br,areTracesLocked:En,setAreTracesLocked:so,areComponentsLocked:sl,setAreComponentsLocked:tl,areGroundNodesLocked:Dn,setAreGroundNodesLocked:va,arePowerNodesLocked:rn,setArePowerNodesLocked:vr,setSelectedIds:qt,setSelectedComponentIds:Ut,setSelectedPowerIds:Wt,setSelectedGroundIds:Xt,selectAllVias:la,selectAllTraces:Xl,selectAllPads:Vr,selectAllComponents:ia,selectDisconnectedComponents:Tc,selectAllPowerNodes:yo,selectAllGroundNodes:Ma,setShowPowerBusManager:Da,setShowGroundBusManager:Gs,menuBarRef:as}),i.jsxs("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:[i.jsxs("div",{ref:Ta,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[i.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:44,display:"flex",flexDirection:"column",gap:8,padding:"6px 6px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[i.jsx("button",{onClick:()=>{Ge||Co()},onMouseDown:a=>a.currentTarget.blur(),disabled:Ge,title:"Select (S)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="select"?"2px solid #000":"1px solid #ddd",background:E==="select"?"#e6f0ff":"#fff",color:Ge?"#999":"#222",outline:"none",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsx(qg,{size:16})}),i.jsx("button",{onClick:()=>{Ge||(qe("via"),A("draw"))},disabled:Ge,title:"Draw Vias (V)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="draw"&&Se==="via"?"2px solid #000":"1px solid #ddd",background:E==="draw"&&Se==="via"?"#e6f0ff":"#fff",color:Ge?"#999":"#222",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const r=pn.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";return i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:r,strokeWidth:"3"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:r})]})})()})}),i.jsx("button",{ref:hs,onClick:()=>{Ge||(qe("pad"),A("draw"),Et(il||"top"),Ml(!0))},disabled:Ge,title:"Draw Pads (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="draw"&&Se==="pad"?"2px solid #000":"1px solid #ddd",background:E==="draw"&&Se==="pad"?"#e6f0ff":"#fff",color:Ge?"#999":"#222",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const a=pn.get("pad"),r=a?.settings.size||D||26,x=a?.settings.color||ne||M,y=Math.min(14,Math.max(4,r/26*14)),j=(24-y)/2,v=(24-y)/2;return i.jsx("rect",{x:j,y:v,width:y,height:y,fill:x})})()})}),i.jsx("button",{ref:jn,onClick:()=>{Ge||(qe("trace"),A("draw"),Et(it||"top"),Si(!0))},disabled:Ge,title:"Draw Traces (T)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="draw"&&Se==="trace"?"2px solid #000":"1px solid #ddd",background:E==="draw"&&Se==="trace"?"#e6f0ff":"#fff",color:Ge?"#999":"#222",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsx(Qg,{size:16,color:pn.get("trace")?.settings.color||(it==="top"?ve:Ke)||bh})}),i.jsx("button",{ref:Oa,onClick:()=>{Ge||(A("component"),Ll(!0),Ul(!1),mo(null))},disabled:Ge,title:"Draw Component (C)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="component"?"2px solid #000":"1px solid #ddd",background:E==="component"?"#e6f0ff":"#fff",color:Ge?"#999":"#222",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:(()=>{const a=Cl||"top",r=pn.get("component"),x=(a==="top"?Je:pt)||r?.settings.color||vh;return an?i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:x,strokeWidth:"1.5"}),i.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:x,fontWeight:"bold",fontFamily:"monospace",children:gd(an)})]}):i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[i.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:x,stroke:x,strokeWidth:"0.5"}),i.jsxs("g",{stroke:x,fill:"none",strokeWidth:"1.5",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),i.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:x})]})]})})()}),i.jsx("button",{ref:Ha,onClick:()=>{Ge||A("power")},disabled:Ge,title:"Draw Power (B)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="power"?"2px solid #000":"1px solid #ddd",background:E==="power"?"#e6f0ff":"#fff",color:Ge?"#999":"#222",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsx("span",{style:{color:pn.get("power")?.settings.color||yd,fontSize:"18px",fontWeight:"bold",lineHeight:1},children:"V"})}),i.jsx("button",{ref:gs,onClick:()=>{Ge||A("ground")},disabled:Ge,title:"Draw Ground (G)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="ground"?"2px solid #000":"1px solid #ddd",background:E==="ground"?"#e6f0ff":"#fff",color:Ge?"#999":"#222",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible"},children:i.jsxs("g",{stroke:pn.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),i.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),i.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),i.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})})}),i.jsx("button",{onClick:()=>{Ge||A("erase")},disabled:Ge,title:"Erase (E)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="erase"?"2px solid #000":"1px solid #ddd",background:E==="erase"?"#ffecec":"#fff",color:Ge?"#999":"#222",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsxs("g",{transform:"rotate(-35 12 12)",children:[i.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),i.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})})}),i.jsx("button",{onClick:()=>{Ge||A(a=>a==="pan"?"draw":"pan")},disabled:Ge,title:"Move (H)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="pan"?"2px solid #000":"1px solid #ddd",background:E==="pan"?"#e6f0ff":"#fff",color:Ge?"#999":"#222",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),i.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),i.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})})}),i.jsx("button",{onClick:()=>{Ps(!1),A(a=>a==="magnify"?"draw":"magnify")},title:`${ts?"Zoom Out":"Zoom In"} (Z)`,style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:E==="magnify"?"2px solid #000":"1px solid #ddd",background:E==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[i.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),ts?i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),i.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]})}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>{Ge||Es(a=>!a)},disabled:Ge,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:Ge?"not-allowed":"pointer",opacity:Ge?.5:1},children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",children:[i.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),qo&&i.jsx("div",{ref:Ys,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:Cd.map(a=>i.jsx("div",{onClick:()=>{T(a),Es(!1);const r=Hl(pn);if(r)if(E==="draw"&&Se==="trace"){const x=it||"top";Yi(r.id,x,a,g),x==="top"?(nt(a),oe("trace",a,"top")):(Ae(a),oe("trace",a,"bottom"))}else if(E==="draw"&&Se==="pad"){const x=il||"top";Yi(r.id,x,a,g),x==="top"?(Me(a),oe("pad",a,"top")):(m(a),oe("pad",a,"bottom"))}else if(E==="component"){const x=Cl||"top";Yi(r.id,x,a,g),x==="top"?(rt(a),oe("component",a,"top")):(gn(a),oe("component",a,"bottom"))}else $u(r.id,a,g),E==="draw"&&Se==="via"&&oe("via",a);oe("brush",a),Nt.size>0&&Ue(x=>x.map(y=>Nt.has(y.id)?(y.type==="via"?(oe("via",a),al(j=>{const v=new Map(j),p=v.get("via");return p&&v.set("via",{...p,settings:{...p.settings,color:a}}),v})):y.type==="pad"?(oe("pad",a),al(j=>{const v=new Map(j),p=v.get("pad");return p&&v.set("pad",{...p,settings:{...p.settings,color:a}}),v})):y.type==="trace"&&oe("trace",a,y.layer),{...y,color:a}):y)),vt.size>0&&(oe("component",a),Nn(x=>x.map(y=>vt.has(y.id)?{...y,color:a}:y)),wn(x=>x.map(y=>vt.has(y.id)?{...y,color:a}:y))),mt.size>0&&Zn(x=>x.map(y=>mt.has(y.id)?{...y,color:a}:y)),Vt.size>0&&Rl(x=>x.map(y=>Vt.has(y.id)?{...y,color:a}:y))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===M?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),E==="draw"&&Se==="trace"&&Ua&&i.jsxs("div",{ref:Ba,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:it==="top",onChange:()=>{gl("top"),Et("top"),T(ve),Y(Ye),al(a=>{const r=new Map(a),x=r.get("trace");return x&&r.set("trace",{...x,settings:{color:ve,size:Ye}}),r}),Si(!1),Ra(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:it==="bottom",onChange:()=>{gl("bottom"),Et("bottom"),T(Ke),Y(st),al(a=>{const r=new Map(a),x=r.get("trace");return x&&r.set("trace",{...x,settings:{color:Ke,size:st}}),r}),Si(!1),ni(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),E==="draw"&&Se==="pad"&&wi&&i.jsxs("div",{ref:ri,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:il==="top",onChange:()=>{dr("top"),Et("top"),T(ne),Y(D),al(a=>{const r=new Map(a),x=r.get("pad");return x&&r.set("pad",{...x,settings:{color:ne,size:D}}),r}),Ml(!1),Ra(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:il==="bottom",onChange:()=>{dr("bottom"),Et("bottom"),T(ie),Y(ue),al(a=>{const r=new Map(a),x=r.get("pad");return x&&r.set("pad",{...x,settings:{color:ie,size:ue}}),r}),Ml(!1),ni(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),cs&&E==="power"&&i.jsxs("div",{ref:Gl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),Bt.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...Bt].sort((a,r)=>{const x=v=>{const p=v.match(/([+-]?)(\d+\.?\d*)/);if(p){const S=p[1]||"+",z=parseFloat(p[2]);return{absValue:Math.abs(z),isNegative:S==="-",original:v}}return{absValue:1/0,isNegative:!1,original:v}},y=x(a.voltage),j=x(r.voltage);return y.absValue!==j.absValue?y.absValue-j.absValue:y.isNegative!==j.isNegative?y.isNegative?-1:1:0}).map(a=>i.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),Aa(a.id),Il(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),i.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Il(!1),Da(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Il(!1),Aa(null),A("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),cl&&E==="ground"&&i.jsxs("div",{ref:bo,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),zl.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...zl].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=a.id==="groundbus-earth",x=ml===a.id;return i.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),us(a.id),ea(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:x?"#e0e0e0":"#f5f5f5",border:x?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),i.jsx("div",{children:i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name})})]})},a.id)}),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),ea(!1),Gs(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),ea(!1),us(null),A("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),E==="component"&&aa&&i.jsxs("div",{ref:_a,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:$e==="top",onClick:()=>{ks("top"),Et("top"),T(Je),Y(Ht),al(a=>{const r=new Map(a),x=r.get("component");return x&&r.set("component",{...x,settings:{color:Je,size:Ht}}),r}),Ll(!1),Ra(!0),Ul(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:$e==="bottom",onClick:()=>{ks("bottom"),Et("bottom"),T(pt),Y(te),al(a=>{const r=new Map(a),x=r.get("component");return x&&r.set("component",{...x,settings:{color:pt,size:te}}),r}),Ll(!1),ni(!0),Ul(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),E==="component"&&vo&&i.jsxs("div",{ref:Rc,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(Jg).map(([a,r])=>{const x=zc.has(a);return i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),Td(j=>{const v=new Set(j);return v.has(a)?v.delete(a):v.add(a),v})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:x?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[i.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:x?"":""}),a]}),x&&i.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(r).map(([y,j])=>i.jsxs("div",{style:{marginBottom:"2px"},children:[i.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[y,":"]}),j.map(v=>{const p=vd[v];return p?i.jsxs("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),mo(v),Ul(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:an===v?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[p.prefix.join(", ")," - ",v," (",p.defaultPins," pins)"]},v):null})]},y))})]},a)}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Ul(!1),A("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),i.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[i.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),i.jsxs("div",{onClick:()=>Et("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Yt==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:Ji,onChange:a=>Ra(a.target.checked)})})]}),i.jsx("canvas",{ref:wc,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsxs("div",{onClick:()=>Et("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Yt==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:os,onChange:a=>ni(a.target.checked)})})]}),i.jsx("canvas",{ref:za,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Vn,onChange:a=>ss(a.target.checked)}),i.jsx("span",{children:"Vias"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:li,onChange:a=>Br(a.target.checked)}),i.jsx("span",{children:"Pads (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Al,onChange:a=>_i(a.target.checked)}),i.jsx("span",{children:"Traces (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ii,onChange:a=>rs(a.target.checked)}),i.jsx("span",{children:"Components (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:mi,onChange:a=>_r(a.target.checked)}),i.jsx("span",{children:"Pads (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:kl,onChange:a=>Ws(a.target.checked)}),i.jsx("span",{children:"Traces (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:$l,onChange:a=>bl(a.target.checked)}),i.jsx("span",{children:"Components (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ai,onChange:a=>vl(a.target.checked)}),i.jsx("span",{children:"Power"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Pl,onChange:a=>Oi(a.target.checked)}),i.jsx("span",{children:"Ground"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ta,onChange:a=>Ls(a.target.checked)}),i.jsx("span",{children:"Connections"})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Vn&&li&&mi&&Al&&kl&&ii&&$l&&ai&&Pl&&ta,onChange:a=>{const r=a.target.checked;ss(r),Br(r),_r(r),_i(r),Ws(r),rs(r),bl(r),vl(r),Oi(r),Ls(r)}}),i.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",G,"%"]}),i.jsxs("label",{className:"radio-label",style:{margin:0},children:[i.jsx("input",{type:"checkbox",checked:me,onChange:a=>{const r=a.target.checked;r?(Ra(!0),ni(!0)):(H(50),A("select")),I(r)}}),i.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:G,onChange:a=>H(Number(a.target.value)),onDoubleClick:()=>Wr("transparency"),className:"slider",style:{width:"100%",marginTop:3}})]})]}),i.jsx(hx,{visible:!b&&!d}),i.jsx("canvas",{ref:Rn,width:Mn.width,height:Mn.height,tabIndex:0,onMouseDown:Dc,onMouseMove:Ac,onMouseUp:Yr,onMouseLeave:Yr,onWheel:jo,onDoubleClick:Pr,className:`pcb-canvas ${E==="transform"?"transform-cursor":E==="draw"?"draw-cursor":E==="erase"?"erase-cursor":"default-cursor"}`,style:{...Ns?{cursor:Ns}:E==="pan"?{cursor:Ca?"grabbing":"grab"}:{},width:`${Mn.width}px`,height:`${Mn.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),i.jsx(Sx,{componentEditor:ba,setComponentEditor:gr,componentsTop:Dt,componentsBottom:xt,setComponentsTop:Nn,setComponentsBottom:wn,connectingPin:On,setConnectingPin:Wo,componentDialogPosition:Bs,setComponentDialogPosition:yi,isDraggingDialog:xr,setIsDraggingDialog:yr,dialogDragOffset:ao,setDialogDragOffset:_s,areComponentsLocked:sl}),xl&&xl.visible&&(()=>{if(!St.find(x=>x.id===xl.id))return null;const r=Bt.find(x=>x.id===xl.powerBusId);return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),i.jsx("button",{onClick:()=>Mi(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:r?`${r.name} (${r.voltage})`:"Unknown"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`power-layer-${xl.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),i.jsxs("select",{id:`power-layer-${xl.id}`,name:`power-layer-${xl.id}`,value:xl.layer,onChange:x=>Mi({...xl,layer:x.target.value}),disabled:rn,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:rn?.6:1},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:xl.x.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:xl.y.toFixed(2)})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[i.jsx("button",{onClick:()=>Mi(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),i.jsx("button",{onClick:()=>{rn||(Zn(x=>x.map(y=>y.id===xl.id?{...y,layer:xl.layer}:y)),Mi(null))},disabled:rn,style:{padding:"2px 5px",background:rn?"#f5f5f5":"#0b5fff",color:rn?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:rn?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!b&&!d&&i.jsx("div",{className:"placeholder"}),i.jsx("div",{ref:Rr,className:"scrollbar-horizontal",onScroll:a=>{if(Ki.current)return;const r=a.currentTarget,x=Qo.current;zn(y=>({x:-r.scrollLeft-x,y:y.y}))},"aria-label":"Horizontal pan",children:i.jsx("div",{className:"scrollbar-horizontal-content",ref:Ar})}),i.jsx("div",{ref:Dr,className:"scrollbar-vertical",onScroll:a=>{if(Ki.current)return;const r=a.currentTarget,x=Ko.current;zn(y=>({x:y.x,y:-r.scrollTop-x}))},"aria-label":"Vertical pan",children:i.jsx("div",{className:"scrollbar-vertical-content",ref:kr})})]}),Xs&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>Da(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:[...Bt].sort((a,r)=>{const x=v=>{const p=v.match(/([+-]?)(\d+\.?\d*)/);if(p){const S=p[1]||"+",z=parseFloat(p[2]);return{absValue:Math.abs(z),isNegative:S==="-",original:v}}return{absValue:1/0,isNegative:!1,original:v}},y=x(a.voltage),j=x(r.voltage);return y.absValue!==j.absValue?y.absValue-j.absValue:y.isNegative!==j.isNegative?y.isNegative?-1:1:0}).map(a=>{const r=Bt.findIndex(x=>x.id===a.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:a.name,onChange:x=>{const y=[...Bt];y[r]={...a,name:x.target.value},Hn(y)},placeholder:"e.g., +3V3, -3V3",style:{flex:1,padding:"2px 4px",border:"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Value"}),i.jsx("input",{type:"text",inputMode:"decimal",value:a.voltage,onChange:x=>{const y=x.target.value;if(y===""||/^[+-]?\d*\.?\d*$/.test(y)){const j=[...Bt];j[r]={...a,voltage:y},Hn(j)}},onBlur:x=>{const y=x.target.value.trim();if(y==="")return;const j=parseFloat(y);if(!isNaN(j)){const v=j>=0?"+":"-",p=Math.abs(j),S=`${v}${p.toFixed(1).replace(/\.?0+$/,"")}`,z=[...Bt];z[r]={...a,voltage:S},Hn(z)}},placeholder:"e.g., +3.3, -3.3",style:{flex:1,padding:"2px 4px",border:"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})]}),i.jsx("input",{type:"color",value:a.color,onChange:x=>{const y=[...Bt];y[r]={...a,color:x.target.value},Hn(y)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const x=St.filter(y=>y.powerBusId===a.id);if(x.length>0){alert(`Cannot delete: ${x.length} power node(s) are using this bus. Remove or reassign them first.`);return}Hn(y=>y.filter(j=>j.id!==a.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},a.id)})}),i.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};Hn(r=>[...r,a])},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Power Bus"}),i.jsx("button",{onClick:()=>Da(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),xo&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:()=>Gs(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:[...zl].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=zl.findIndex(x=>x.id===a.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc",flexShrink:0}}),i.jsx("div",{style:{flex:1,minWidth:0},children:i.jsx("input",{type:"text",value:a.name,onChange:x=>{const y=[...zl];y[r]={...a,name:x.target.value},Ni(y)},placeholder:"Name",style:{width:"100%",padding:"2px 4px",border:"1px solid #ccc",borderRadius:3,fontSize:"11px"}})}),i.jsx("input",{type:"color",value:a.color,onChange:x=>{const y=[...zl];y[r]={...a,color:x.target.value},Ni(y)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const x=At.filter(y=>y.groundBusId===a.id);if(x.length>0){alert(`Cannot delete: ${x.length} ground node(s) are using this bus. Remove or reassign them first.`);return}Ni(y=>y.filter(j=>j.id!==a.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},a.id)})}),i.jsx("button",{onClick:()=>{const a={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};Ni(r=>[...r,a])},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Ground Bus"}),i.jsx("button",{onClick:()=>Gs(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),i.jsx("input",{ref:po,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&ys(r,"top"),a.target.value=""}}),i.jsx("input",{ref:ho,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&ys(r,"bottom"),a.target.value=""}}),i.jsx("input",{ref:ja,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const r=a.target.files?.[0];if(r)try{Dl(r.name);const x=await r.text(),y=JSON.parse(x);await zi(y);let j;y.projectInfo?.name?j=y.projectInfo.name:(j=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",ti(j),localStorage.setItem("pcb_project_name",j)),An||(ti(j),localStorage.setItem("pcb_project_name",j)),setTimeout(()=>{El({visible:!0,source:"open",interval:5})},100)}catch(x){console.error("Failed to open project",x),alert("Failed to open project file. See console for details.")}a.target.value=""}}),i.jsx(xx,{visible:co.visible,selectedIds:Nt,selectedComponentIds:vt,selectedPowerIds:mt,selectedGroundIds:Vt,drawingStrokes:ge,componentsTop:Dt,componentsBottom:xt,powers:St,grounds:At,powerBuses:Bt,onClose:()=>{Go({visible:!1,text:""})},setComponentsTop:Nn,setComponentsBottom:wn,determineViaType:Gt,determinePadType:Tt,onFindComponent:Cc,position:na,isDragging:Sl,onDragStart:a=>{na&&(ps({x:a.clientX-na.x,y:a.clientY-na.y}),ka(!0),a.preventDefault())}}),i.jsx(yx,{visible:Na,selectedIds:Nt,selectedComponentIds:vt,selectedPowerIds:mt,selectedGroundIds:Vt,drawingStrokes:ge,componentsTop:Dt,componentsBottom:xt,powers:St,grounds:At,powerBuses:Bt,onClose:()=>{Nl(!1)},setComponentsTop:Nn,setComponentsBottom:wn,setDrawingStrokes:Ue,setPowerSymbols:Zn,setGroundSymbols:Rl,determineViaType:Gt,determinePadType:Tt,position:Qn,isDragging:Yl,onDragStart:a=>{Qn&&(Or({x:a.clientX-Qn.x,y:a.clientY-Qn.y}),si(!0),a.preventDefault())}}),jr.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&js()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:js,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Un,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),i.jsx("button",{ref:Ur,onClick:Qt,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),xn.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&dl()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),i.jsx("input",{ref:Sc,type:"text",value:xn.projectName,onChange:a=>{Lo(r=>({...r,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),$i()):a.key==="Escape"&&(a.preventDefault(),dl())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),xn.projectName&&(()=>{const a=xn.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const r=[...new Set(a)];return i.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",r.map(x=>`"${x}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:xn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:xn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Nc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),xn.projectName&&xn.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[xn.locationPath,"/",xn.projectName,"/project.json"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:dl,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:$i,disabled:!xn.projectName.trim()||!xn.locationHandle,style:{padding:"8px 16px",background:!xn.projectName.trim()||!xn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!xn.projectName.trim()||!xn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!xn.projectName.trim()||!xn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!xn.projectName.trim()||!xn.locationHandle?.6:1},children:"Create"})]})]})}),yn.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Ct()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),i.jsx("input",{ref:is,type:"text",value:yn.filename,onChange:a=>{Fo(r=>({...r,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Ci()):a.key==="Escape"&&(a.preventDefault(),Ct())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:yn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:yn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:qs,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),yn.filename&&yn.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[yn.locationPath,"/",yn.filename.endsWith(".json")?yn.filename:`${yn.filename}.json`]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Ct,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Ci,disabled:!yn.filename.trim()||!yn.locationHandle,style:{padding:"8px 16px",background:!yn.filename.trim()||!yn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!yn.filename.trim()||!yn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!yn.filename.trim()||!yn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!yn.filename.trim()||!yn.locationHandle?.6:1},children:"Save"})]})]})}),i.jsx(gx,{visible:wr.visible,title:wr.title,message:wr.message,onClose:()=>Hs({visible:!1,title:"",message:""})}),i.jsx(bx,{visible:jc,dimensions:Hr,onSave:a=>{Er(a),localStorage.setItem("boardDimensions",JSON.stringify(a))},onClose:()=>Yn(!1)}),bi.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Bi({visible:!1,size:6})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),i.jsx("input",{ref:ls,type:"number",min:"1",max:"99",value:bi.size,onChange:a=>{const r=parseInt(a.target.value)||1,x=Math.max(1,Math.min(99,r));Bi(y=>({...y,size:x}))},onKeyDown:a=>{if(a.key==="Enter"?vs():a.key==="Escape"&&Bi({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const r=bi.size.toString();r.length>=2&&ls.current?.selectionStart===ls.current?.selectionEnd&&ls.current?.selectionStart===r.length&&a.preventDefault()}},onInput:a=>{const r=a.target,x=r.value;if(x.length>2){r.value=x.slice(0,2);const y=parseInt(r.value)||1;Bi(j=>({...j,size:Math.max(1,Math.min(99,y))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),i.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(bi.size)?bi.size:"",onChange:a=>{const r=parseInt(a.target.value);!isNaN(r)&&r>0&&Bi(x=>({...x,size:r}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[i.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>i.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Bi({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:vs,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Os.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Fi({visible:!1,interval:5})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:Os.interval===null?"disable":(Os.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")Fi({visible:!0,interval:null});else{const x=parseFloat(r);!isNaN(x)&&x>0&&Fi({visible:!0,interval:x})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),i.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Fi({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:()=>ms(Os.interval,!1),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),ro.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&To()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),i.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:ro.interval===null?"disable":(ro.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")El({...ro,interval:null});else{const x=parseFloat(r);!isNaN(x)&&x>0&&El({...ro,interval:x})}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:To,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),i.jsx("button",{onClick:()=>ms(ro.interval,!0),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})})]})]})}$g.createRoot(document.getElementById("root")).render(i.jsx(C.StrictMode,{children:i.jsx(Hx,{})}));
