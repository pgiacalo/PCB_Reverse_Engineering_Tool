(function(){const z=document.createElement("link").relList;if(z&&z.supports&&z.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))S(_);new MutationObserver(_=>{for(const I of _)if(I.type==="childList")for(const de of I.addedNodes)de.tagName==="LINK"&&de.rel==="modulepreload"&&S(de)}).observe(document,{childList:!0,subtree:!0});function T(_){const I={};return _.integrity&&(I.integrity=_.integrity),_.referrerPolicy&&(I.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?I.credentials="include":_.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function S(_){if(_.ep)return;_.ep=!0;const I=T(_);fetch(_.href,I)}})();function yy(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var Zu={exports:{}},mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function gy(){if(Lp)return mc;Lp=1;var A=Symbol.for("react.transitional.element"),z=Symbol.for("react.fragment");function T(S,_,I){var de=null;if(I!==void 0&&(de=""+I),_.key!==void 0&&(de=""+_.key),"key"in _){I={};for(var ze in _)ze!=="key"&&(I[ze]=_[ze])}else I=_;return _=I.ref,{$$typeof:A,type:S,key:de,ref:_!==void 0?_:null,props:I}}return mc.Fragment=z,mc.jsx=T,mc.jsxs=T,mc}var Hp;function my(){return Hp||(Hp=1,Zu.exports=gy()),Zu.exports}var s=my(),Pu={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function xy(){if(Yp)return rt;Yp=1;var A=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),de=Symbol.for("react.context"),ze=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),O=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),ke=Symbol.iterator;function xe(x){return x===null||typeof x!="object"?null:(x=ke&&x[ke]||x["@@iterator"],typeof x=="function"?x:null)}var ye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ve=Object.assign,le={};function m(x,R,ce){this.props=x,this.context=R,this.refs=le,this.updater=ce||ye}m.prototype.isReactComponent={},m.prototype.setState=function(x,R){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,R,"setState")},m.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function k(){}k.prototype=m.prototype;function L(x,R,ce){this.props=x,this.context=R,this.refs=le,this.updater=ce||ye}var He=L.prototype=new k;He.constructor=L,ve(He,m.prototype),He.isPureReactComponent=!0;var q=Array.isArray;function $(){}var fe={H:null,A:null,T:null,S:null},Ge=Object.prototype.hasOwnProperty;function j(x,R,ce){var Ce=ce.ref;return{$$typeof:A,type:x,key:R,ref:Ce!==void 0?Ce:null,props:ce}}function et(x,R){return j(x.type,R,x.props)}function Ne(x){return typeof x=="object"&&x!==null&&x.$$typeof===A}function nt(x){var R={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ce){return R[ce]})}var it=/\/+/g;function gt(x,R){return typeof x=="object"&&x!==null&&x.key!=null?nt(""+x.key):R.toString(36)}function Ye(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then($,$):(x.status="pending",x.then(function(R){x.status==="pending"&&(x.status="fulfilled",x.value=R)},function(R){x.status==="pending"&&(x.status="rejected",x.reason=R)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function H(x,R,ce,Ce,De){var Ve=typeof x;(Ve==="undefined"||Ve==="boolean")&&(x=null);var je=!1;if(x===null)je=!0;else switch(Ve){case"bigint":case"string":case"number":je=!0;break;case"object":switch(x.$$typeof){case A:case z:je=!0;break;case me:return je=x._init,H(je(x._payload),R,ce,Ce,De)}}if(je)return De=De(x),je=Ce===""?"."+gt(x,0):Ce,q(De)?(ce="",je!=null&&(ce=je.replace(it,"$&/")+"/"),H(De,R,ce,"",function(hn){return hn})):De!=null&&(Ne(De)&&(De=et(De,ce+(De.key==null||x&&x.key===De.key?"":(""+De.key).replace(it,"$&/")+"/")+je)),R.push(De)),1;je=0;var Ke=Ce===""?".":Ce+":";if(q(x))for(var lt=0;lt<x.length;lt++)Ce=x[lt],Ve=Ke+gt(Ce,lt),je+=H(Ce,R,ce,Ve,De);else if(lt=xe(x),typeof lt=="function")for(x=lt.call(x),lt=0;!(Ce=x.next()).done;)Ce=Ce.value,Ve=Ke+gt(Ce,lt++),je+=H(Ce,R,ce,Ve,De);else if(Ve==="object"){if(typeof x.then=="function")return H(Ye(x),R,ce,Ce,De);throw R=String(x),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return je}function J(x,R,ce){if(x==null)return x;var Ce=[],De=0;return H(x,Ce,"","",function(Ve){return R.call(ce,Ve,De++)}),Ce}function N(x){if(x._status===-1){var R=x._result;R=R(),R.then(function(ce){(x._status===0||x._status===-1)&&(x._status=1,x._result=ce)},function(ce){(x._status===0||x._status===-1)&&(x._status=2,x._result=ce)}),x._status===-1&&(x._status=0,x._result=R)}if(x._status===1)return x._result.default;throw x._result}var ne=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},we={map:J,forEach:function(x,R,ce){J(x,function(){R.apply(this,arguments)},ce)},count:function(x){var R=0;return J(x,function(){R++}),R},toArray:function(x){return J(x,function(R){return R})||[]},only:function(x){if(!Ne(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return rt.Activity=oe,rt.Children=we,rt.Component=m,rt.Fragment=T,rt.Profiler=_,rt.PureComponent=L,rt.StrictMode=S,rt.Suspense=he,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,rt.__COMPILER_RUNTIME={__proto__:null,c:function(x){return fe.H.useMemoCache(x)}},rt.cache=function(x){return function(){return x.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(x,R,ce){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var Ce=ve({},x.props),De=x.key;if(R!=null)for(Ve in R.key!==void 0&&(De=""+R.key),R)!Ge.call(R,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&R.ref===void 0||(Ce[Ve]=R[Ve]);var Ve=arguments.length-2;if(Ve===1)Ce.children=ce;else if(1<Ve){for(var je=Array(Ve),Ke=0;Ke<Ve;Ke++)je[Ke]=arguments[Ke+2];Ce.children=je}return j(x.type,De,Ce)},rt.createContext=function(x){return x={$$typeof:de,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:I,_context:x},x},rt.createElement=function(x,R,ce){var Ce,De={},Ve=null;if(R!=null)for(Ce in R.key!==void 0&&(Ve=""+R.key),R)Ge.call(R,Ce)&&Ce!=="key"&&Ce!=="__self"&&Ce!=="__source"&&(De[Ce]=R[Ce]);var je=arguments.length-2;if(je===1)De.children=ce;else if(1<je){for(var Ke=Array(je),lt=0;lt<je;lt++)Ke[lt]=arguments[lt+2];De.children=Ke}if(x&&x.defaultProps)for(Ce in je=x.defaultProps,je)De[Ce]===void 0&&(De[Ce]=je[Ce]);return j(x,Ve,De)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(x){return{$$typeof:ze,render:x}},rt.isValidElement=Ne,rt.lazy=function(x){return{$$typeof:me,_payload:{_status:-1,_result:x},_init:N}},rt.memo=function(x,R){return{$$typeof:O,type:x,compare:R===void 0?null:R}},rt.startTransition=function(x){var R=fe.T,ce={};fe.T=ce;try{var Ce=x(),De=fe.S;De!==null&&De(ce,Ce),typeof Ce=="object"&&Ce!==null&&typeof Ce.then=="function"&&Ce.then($,ne)}catch(Ve){ne(Ve)}finally{R!==null&&ce.types!==null&&(R.types=ce.types),fe.T=R}},rt.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},rt.use=function(x){return fe.H.use(x)},rt.useActionState=function(x,R,ce){return fe.H.useActionState(x,R,ce)},rt.useCallback=function(x,R){return fe.H.useCallback(x,R)},rt.useContext=function(x){return fe.H.useContext(x)},rt.useDebugValue=function(){},rt.useDeferredValue=function(x,R){return fe.H.useDeferredValue(x,R)},rt.useEffect=function(x,R){return fe.H.useEffect(x,R)},rt.useEffectEvent=function(x){return fe.H.useEffectEvent(x)},rt.useId=function(){return fe.H.useId()},rt.useImperativeHandle=function(x,R,ce){return fe.H.useImperativeHandle(x,R,ce)},rt.useInsertionEffect=function(x,R){return fe.H.useInsertionEffect(x,R)},rt.useLayoutEffect=function(x,R){return fe.H.useLayoutEffect(x,R)},rt.useMemo=function(x,R){return fe.H.useMemo(x,R)},rt.useOptimistic=function(x,R){return fe.H.useOptimistic(x,R)},rt.useReducer=function(x,R,ce){return fe.H.useReducer(x,R,ce)},rt.useRef=function(x){return fe.H.useRef(x)},rt.useState=function(x){return fe.H.useState(x)},rt.useSyncExternalStore=function(x,R,ce){return fe.H.useSyncExternalStore(x,R,ce)},rt.useTransition=function(){return fe.H.useTransition()},rt.version="19.2.0",rt}var Vp;function ef(){return Vp||(Vp=1,Pu.exports=xy()),Pu.exports}var v=ef();const dt=yy(v);var Qu={exports:{}},xc={},Fu={exports:{}},Ku={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function by(){return Xp||(Xp=1,(function(A){function z(H,J){var N=H.length;H.push(J);e:for(;0<N;){var ne=N-1>>>1,we=H[ne];if(0<_(we,J))H[ne]=J,H[N]=we,N=ne;else break e}}function T(H){return H.length===0?null:H[0]}function S(H){if(H.length===0)return null;var J=H[0],N=H.pop();if(N!==J){H[0]=N;e:for(var ne=0,we=H.length,x=we>>>1;ne<x;){var R=2*(ne+1)-1,ce=H[R],Ce=R+1,De=H[Ce];if(0>_(ce,N))Ce<we&&0>_(De,ce)?(H[ne]=De,H[Ce]=N,ne=Ce):(H[ne]=ce,H[R]=N,ne=R);else if(Ce<we&&0>_(De,N))H[ne]=De,H[Ce]=N,ne=Ce;else break e}}return J}function _(H,J){var N=H.sortIndex-J.sortIndex;return N!==0?N:H.id-J.id}if(A.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var I=performance;A.unstable_now=function(){return I.now()}}else{var de=Date,ze=de.now();A.unstable_now=function(){return de.now()-ze}}var he=[],O=[],me=1,oe=null,ke=3,xe=!1,ye=!1,ve=!1,le=!1,m=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function He(H){for(var J=T(O);J!==null;){if(J.callback===null)S(O);else if(J.startTime<=H)S(O),J.sortIndex=J.expirationTime,z(he,J);else break;J=T(O)}}function q(H){if(ve=!1,He(H),!ye)if(T(he)!==null)ye=!0,$||($=!0,nt());else{var J=T(O);J!==null&&Ye(q,J.startTime-H)}}var $=!1,fe=-1,Ge=5,j=-1;function et(){return le?!0:!(A.unstable_now()-j<Ge)}function Ne(){if(le=!1,$){var H=A.unstable_now();j=H;var J=!0;try{e:{ye=!1,ve&&(ve=!1,k(fe),fe=-1),xe=!0;var N=ke;try{t:{for(He(H),oe=T(he);oe!==null&&!(oe.expirationTime>H&&et());){var ne=oe.callback;if(typeof ne=="function"){oe.callback=null,ke=oe.priorityLevel;var we=ne(oe.expirationTime<=H);if(H=A.unstable_now(),typeof we=="function"){oe.callback=we,He(H),J=!0;break t}oe===T(he)&&S(he),He(H)}else S(he);oe=T(he)}if(oe!==null)J=!0;else{var x=T(O);x!==null&&Ye(q,x.startTime-H),J=!1}}break e}finally{oe=null,ke=N,xe=!1}J=void 0}}finally{J?nt():$=!1}}}var nt;if(typeof L=="function")nt=function(){L(Ne)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,gt=it.port2;it.port1.onmessage=Ne,nt=function(){gt.postMessage(null)}}else nt=function(){m(Ne,0)};function Ye(H,J){fe=m(function(){H(A.unstable_now())},J)}A.unstable_IdlePriority=5,A.unstable_ImmediatePriority=1,A.unstable_LowPriority=4,A.unstable_NormalPriority=3,A.unstable_Profiling=null,A.unstable_UserBlockingPriority=2,A.unstable_cancelCallback=function(H){H.callback=null},A.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ge=0<H?Math.floor(1e3/H):5},A.unstable_getCurrentPriorityLevel=function(){return ke},A.unstable_next=function(H){switch(ke){case 1:case 2:case 3:var J=3;break;default:J=ke}var N=ke;ke=J;try{return H()}finally{ke=N}},A.unstable_requestPaint=function(){le=!0},A.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var N=ke;ke=H;try{return J()}finally{ke=N}},A.unstable_scheduleCallback=function(H,J,N){var ne=A.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?ne+N:ne):N=ne,H){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=N+we,H={id:me++,callback:J,priorityLevel:H,startTime:N,expirationTime:we,sortIndex:-1},N>ne?(H.sortIndex=N,z(O,H),T(he)===null&&H===T(O)&&(ve?(k(fe),fe=-1):ve=!0,Ye(q,N-ne))):(H.sortIndex=we,z(he,H),ye||xe||(ye=!0,$||($=!0,nt()))),H},A.unstable_shouldYield=et,A.unstable_wrapCallback=function(H){var J=ke;return function(){var N=ke;ke=J;try{return H.apply(this,arguments)}finally{ke=N}}}})(Ku)),Ku}var Gp;function vy(){return Gp||(Gp=1,Fu.exports=by()),Fu.exports}var Wu={exports:{}},Kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function Sy(){if(Ip)return Kn;Ip=1;var A=ef();function z(he){var O="https://react.dev/errors/"+he;if(1<arguments.length){O+="?args[]="+encodeURIComponent(arguments[1]);for(var me=2;me<arguments.length;me++)O+="&args[]="+encodeURIComponent(arguments[me])}return"Minified React error #"+he+"; visit "+O+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function T(){}var S={d:{f:T,r:function(){throw Error(z(522))},D:T,C:T,L:T,m:T,X:T,S:T,M:T},p:0,findDOMNode:null},_=Symbol.for("react.portal");function I(he,O,me){var oe=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:oe==null?null:""+oe,children:he,containerInfo:O,implementation:me}}var de=A.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ze(he,O){if(he==="font")return"";if(typeof O=="string")return O==="use-credentials"?O:""}return Kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Kn.createPortal=function(he,O){var me=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O||O.nodeType!==1&&O.nodeType!==9&&O.nodeType!==11)throw Error(z(299));return I(he,O,null,me)},Kn.flushSync=function(he){var O=de.T,me=S.p;try{if(de.T=null,S.p=2,he)return he()}finally{de.T=O,S.p=me,S.d.f()}},Kn.preconnect=function(he,O){typeof he=="string"&&(O?(O=O.crossOrigin,O=typeof O=="string"?O==="use-credentials"?O:"":void 0):O=null,S.d.C(he,O))},Kn.prefetchDNS=function(he){typeof he=="string"&&S.d.D(he)},Kn.preinit=function(he,O){if(typeof he=="string"&&O&&typeof O.as=="string"){var me=O.as,oe=ze(me,O.crossOrigin),ke=typeof O.integrity=="string"?O.integrity:void 0,xe=typeof O.fetchPriority=="string"?O.fetchPriority:void 0;me==="style"?S.d.S(he,typeof O.precedence=="string"?O.precedence:void 0,{crossOrigin:oe,integrity:ke,fetchPriority:xe}):me==="script"&&S.d.X(he,{crossOrigin:oe,integrity:ke,fetchPriority:xe,nonce:typeof O.nonce=="string"?O.nonce:void 0})}},Kn.preinitModule=function(he,O){if(typeof he=="string")if(typeof O=="object"&&O!==null){if(O.as==null||O.as==="script"){var me=ze(O.as,O.crossOrigin);S.d.M(he,{crossOrigin:me,integrity:typeof O.integrity=="string"?O.integrity:void 0,nonce:typeof O.nonce=="string"?O.nonce:void 0})}}else O==null&&S.d.M(he)},Kn.preload=function(he,O){if(typeof he=="string"&&typeof O=="object"&&O!==null&&typeof O.as=="string"){var me=O.as,oe=ze(me,O.crossOrigin);S.d.L(he,me,{crossOrigin:oe,integrity:typeof O.integrity=="string"?O.integrity:void 0,nonce:typeof O.nonce=="string"?O.nonce:void 0,type:typeof O.type=="string"?O.type:void 0,fetchPriority:typeof O.fetchPriority=="string"?O.fetchPriority:void 0,referrerPolicy:typeof O.referrerPolicy=="string"?O.referrerPolicy:void 0,imageSrcSet:typeof O.imageSrcSet=="string"?O.imageSrcSet:void 0,imageSizes:typeof O.imageSizes=="string"?O.imageSizes:void 0,media:typeof O.media=="string"?O.media:void 0})}},Kn.preloadModule=function(he,O){if(typeof he=="string")if(O){var me=ze(O.as,O.crossOrigin);S.d.m(he,{as:typeof O.as=="string"&&O.as!=="script"?O.as:void 0,crossOrigin:me,integrity:typeof O.integrity=="string"?O.integrity:void 0})}else S.d.m(he)},Kn.requestFormReset=function(he){S.d.r(he)},Kn.unstable_batchedUpdates=function(he,O){return he(O)},Kn.useFormState=function(he,O,me){return de.H.useFormState(he,O,me)},Kn.useFormStatus=function(){return de.H.useHostTransitionStatus()},Kn.version="19.2.0",Kn}var qp;function Cy(){if(qp)return Wu.exports;qp=1;function A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A)}catch(z){console.error(z)}}return A(),Wu.exports=Sy(),Wu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function wy(){if($p)return xc;$p=1;var A=vy(),z=ef(),T=Cy();function S(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function I(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function de(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ze(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function he(e){if(I(e)!==e)throw Error(S(188))}function O(e){var t=e.alternate;if(!t){if(t=I(e),t===null)throw Error(S(188));return t!==e?null:e}for(var n=e,l=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(l=a.return,l!==null){n=l;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return he(a),e;if(i===l)return he(a),t;i=i.sibling}throw Error(S(188))}if(n.return!==l.return)n=a,l=i;else{for(var r=!1,h=a.child;h;){if(h===n){r=!0,n=a,l=i;break}if(h===l){r=!0,l=a,n=i;break}h=h.sibling}if(!r){for(h=i.child;h;){if(h===n){r=!0,n=i,l=a;break}if(h===l){r=!0,l=i,n=a;break}h=h.sibling}if(!r)throw Error(S(189))}}if(n.alternate!==l)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?e:t}function me(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=me(e),t!==null)return t;e=e.sibling}return null}var oe=Object.assign,ke=Symbol.for("react.element"),xe=Symbol.for("react.transitional.element"),ye=Symbol.for("react.portal"),ve=Symbol.for("react.fragment"),le=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),L=Symbol.for("react.context"),He=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Ge=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),Ne=Symbol.iterator;function nt(e){return e===null||typeof e!="object"?null:(e=Ne&&e[Ne]||e["@@iterator"],typeof e=="function"?e:null)}var it=Symbol.for("react.client.reference");function gt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===it?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ve:return"Fragment";case m:return"Profiler";case le:return"StrictMode";case q:return"Suspense";case $:return"SuspenseList";case j:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ye:return"Portal";case L:return e.displayName||"Context";case k:return(e._context.displayName||"Context")+".Consumer";case He:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return t=e.displayName||null,t!==null?t:gt(e.type)||"Memo";case Ge:t=e._payload,e=e._init;try{return gt(e(t))}catch{}}return null}var Ye=Array.isArray,H=z.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=T.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},ne=[],we=-1;function x(e){return{current:e}}function R(e){0>we||(e.current=ne[we],ne[we]=null,we--)}function ce(e,t){we++,ne[we]=e.current,e.current=t}var Ce=x(null),De=x(null),Ve=x(null),je=x(null);function Ke(e,t){switch(ce(Ve,t),ce(De,e),ce(Ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=sp(t),e=cp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}R(Ce),ce(Ce,e)}function lt(){R(Ce),R(De),R(Ve)}function hn(e){e.memoizedState!==null&&ce(je,e);var t=Ce.current,n=cp(t,e.type);t!==n&&(ce(De,e),ce(Ce,n))}function Jt(e){De.current===e&&(R(Ce),R(De)),je.current===e&&(R(je),pc._currentValue=N)}var Sl,qe;function mt(e){if(Sl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sl=t&&t[1]||"",qe=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sl+e+qe}var Wo=!1;function Ze(e,t){if(!e||Wo)return"";Wo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(W){var G=W}Reflect.construct(e,[],pe)}else{try{pe.call()}catch(W){G=W}e.call(pe.prototype)}}else{try{throw Error()}catch(W){G=W}(pe=e())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(W){if(W&&G&&typeof W.stack=="string")return[W.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=l.DetermineComponentFrameRoot(),r=i[0],h=i[1];if(r&&h){var C=r.split(`
`),V=h.split(`
`);for(a=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;a<V.length&&!V[a].includes("DetermineComponentFrameRoot");)a++;if(l===C.length||a===V.length)for(l=C.length-1,a=V.length-1;1<=l&&0<=a&&C[l]!==V[a];)a--;for(;1<=l&&0<=a;l--,a--)if(C[l]!==V[a]){if(l!==1||a!==1)do if(l--,a--,0>a||C[l]!==V[a]){var ie=`
`+C[l].replace(" at new "," at ");return e.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",e.displayName)),ie}while(1<=l&&0<=a);break}}}finally{Wo=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?mt(n):""}function Yt(e,t){switch(e.tag){case 26:case 27:case 5:return mt(e.type);case 16:return mt("Lazy");case 13:return e.child!==t&&t!==null?mt("Suspense Fallback"):mt("Suspense");case 19:return mt("SuspenseList");case 0:case 15:return Ze(e.type,!1);case 11:return Ze(e.type.render,!1);case 1:return Ze(e.type,!0);case 31:return mt("Activity");default:return""}}function ql(e){try{var t="",n=null;do t+=Yt(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ma=Object.prototype.hasOwnProperty,Dt=A.unstable_scheduleCallback,yn=A.unstable_cancelCallback,$l=A.unstable_shouldYield,go=A.unstable_requestPaint,Ae=A.unstable_now,La=A.unstable_getCurrentPriorityLevel,pt=A.unstable_ImmediatePriority,jn=A.unstable_UserBlockingPriority,Bl=A.unstable_NormalPriority,tt=A.unstable_LowPriority,an=A.unstable_IdlePriority,wr=A.log,At=A.unstable_setDisableYieldValue,mo=null,Gn=null;function Zl(e){if(typeof wr=="function"&&At(e),Gn&&typeof Gn.setStrictMode=="function")try{Gn.setStrictMode(mo,e)}catch{}}var Rn=Math.clz32?Math.clz32:Tr,hs=Math.log,Ha=Math.LN2;function Tr(e){return e>>>=0,e===0?32:31-(hs(e)/Ha|0)|0}var ki=256,Qe=262144,Ol=4194304;function at(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Wn(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var a=0,i=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var h=l&134217727;return h!==0?(l=h&~i,l!==0?a=at(l):(r&=h,r!==0?a=at(r):n||(n=h&~e,n!==0&&(a=at(n))))):(h=l&~i,h!==0?a=at(h):r!==0?a=at(r):n||(n=l&~e,n!==0&&(a=at(n)))),a===0?0:t!==0&&t!==a&&(t&i)===0&&(i=a&-a,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:a}function xo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function bc(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(){var e=Ol;return Ol<<=1,(Ol&62914560)===0&&(Ol=4194304),e}function gs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ai(e,t,n,l,a,i){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var h=e.entanglements,C=e.expirationTimes,V=e.hiddenUpdates;for(n=r&~n;0<n;){var ie=31-Rn(n),pe=1<<ie;h[ie]=0,C[ie]=-1;var G=V[ie];if(G!==null)for(V[ie]=null,ie=0;ie<G.length;ie++){var W=G[ie];W!==null&&(W.lane&=-536870913)}n&=~pe}l!==0&&Jn(e,l,0),i!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=i&~(r&~t))}function Jn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Rn(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function ms(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Rn(n),a=1<<l;a&t|e[l]&t&&(e[l]|=t),n&=~a}}function Cl(e,t){var n=t&-t;return n=(n&42)!==0?1:Di(n),(n&(e.suspendedLanes|t))!==0?0:n}function Di(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function qt(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:Np(e.type))}function Bn(e,t){var n=J.p;try{return J.p=e,t()}finally{J.p=n}}var rl=Math.random().toString(36).slice(2),gn="__reactFiber$"+rl,on="__reactProps$"+rl,ul="__reactContainer$"+rl,Ni="__reactEvents$"+rl,bs="__reactListeners$"+rl,vc="__reactHandles$"+rl,vs="__reactResources$"+rl,Ul="__reactMarker$"+rl;function xa(e){delete e[gn],delete e[on],delete e[Ni],delete e[bs],delete e[vc]}function Ya(e){var t=e[gn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ul]||n[gn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yp(e);e!==null;){if(n=e[gn])return n;e=yp(e)}return t}e=n,n=e.parentNode}return null}function bo(e){if(e=e[gn]||e[ul]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ri(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(S(33))}function vo(e){var t=e[vs];return t||(t=e[vs]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function un(e){e[Ul]=!0}var Sc=new Set,Ss={};function Va(e,t){fn(e,t),fn(e+"Capture",t)}function fn(e,t){for(Ss[e]=t,e=0;e<t.length;e++)Sc.add(t[e])}var zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ht={},fl={};function Mi(e){return ma.call(fl,e)?!0:ma.call(ht,e)?!1:zr.test(e)?fl[e]=!0:(ht[e]=!0,!1)}function Jo(e,t,n){if(Mi(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ut(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ln(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function In(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kt(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var a=l.get,i=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(r){n=""+r,i.call(this,r)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qn(e){if(!e._valueTracker){var t=In(e)?"checked":"value";e._valueTracker=kt(e,t,""+e[t])}}function Cc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=In(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function bt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var En=/[\n"\\]/g;function st(e){return e.replace(En,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function dn(e,t,n,l,a,i,r,h){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ot(t)):e.value!==""+ot(t)&&(e.value=""+ot(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?Ut(e,r,ot(t)):n!=null?Ut(e,r,ot(n)):l!=null&&e.removeAttribute("value"),a==null&&i!=null&&(e.defaultChecked=!!i),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.name=""+ot(h):e.removeAttribute("name")}function X(e,t,n,l,a,i,r,h){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){qn(e);return}n=n!=null?""+ot(n):"",t=t!=null?""+ot(t):n,h||t===e.value||(e.value=t),e.defaultValue=t}l=l??a,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=h?e.checked:!!l,e.defaultChecked=!!l,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),qn(e)}function Ut(e,t,n){t==="number"&&bt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Rt(e,t,n,l){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&l&&(e[n].defaultSelected=!0)}else{for(n=""+ot(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,l&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Pl(e,t,n){if(t!=null&&(t=""+ot(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ot(n):""}function wl(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(S(92));if(Ye(l)){if(1<l.length)throw Error(S(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=ot(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),qn(e)}function ba(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _i=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cs(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||_i.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function ei(e,t,n){if(t!=null&&typeof t!="object")throw Error(S(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var a in t)l=t[a],t.hasOwnProperty(a)&&n[a]!==l&&Cs(e,a,l)}else for(var i in t)t.hasOwnProperty(i)&&Cs(e,i,t[i])}function Bi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dl(e){return Nt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ql(){}var el=null;function ws(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var On=null,mn=null;function So(e){var t=bo(e);if(t&&(e=t.stateNode)){var n=e[on]||null;e:switch(e=t.stateNode,t.type){case"input":if(dn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+st(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var a=l[on]||null;if(!a)throw Error(S(90));dn(l,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&Cc(l)}break e;case"textarea":Pl(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Rt(e,!!n.multiple,t,!1)}}}var Ts=!1;function Tl(e,t,n){if(Ts)return e(t,n);Ts=!0;try{var l=e(t);return l}finally{if(Ts=!1,(On!==null||mn!==null)&&(Jc(),On&&(t=On,e=mn,mn=On=null,So(t),e)))for(t=0;t<e.length;t++)So(e[t])}}function va(e,t){var n=e.stateNode;if(n===null)return null;var l=n[on]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(S(231,t,typeof n));return n}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ti=!1;if(Ft)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){ti=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{ti=!1}var Fl=null,xn=null,Co=null;function Me(){if(Co)return Co;var e,t=xn,n=t.length,l,a="value"in Fl?Fl.value:Fl.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var r=n-e;for(l=1;l<=r&&t[n-l]===a[i-l];l++);return Co=a.slice(e,1<l?1-l:void 0)}function wo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bn(){return!0}function ni(){return!1}function Ct(e){function t(n,l,a,i,r){this._reactName=n,this._targetInst=a,this.type=l,this.nativeEvent=i,this.target=r,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(i):i[h]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bn:ni,this.isPropagationStopped=ni,this}return oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bn)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bn)},persist:function(){},isPersistent:bn}),t}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Ct(Kl),li=oe({},Kl,{view:0,detail:0}),zs=Ct(li),Wl,Ll,Jl,zl=oe({},li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$n,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jl&&(Jl&&e.type==="mousemove"?(Wl=e.screenX-Jl.screenX,Ll=e.screenY-Jl.screenY):Ll=Wl=0,Jl=e),Wl)},movementY:function(e){return"movementY"in e?e.movementY:Ll}}),wc=Ct(zl),To=oe({},zl,{dataTransfer:0}),js=Ct(To),Es=oe({},li,{relatedTarget:0}),ai=Ct(Es),ks=oe({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),As=Ct(ks),oi=oe({},Kl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kt=Ct(oi),ii=oe({},Kl,{data:0}),$t=Ct(ii),si={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ds={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ui={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Er(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ui[e])?!!t[e]:!1}function $n(){return Er}var ea=oe({},li,{key:function(e){if(e.key){var t=si[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ds[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$n,charCode:function(e){return e.type==="keypress"?wo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xa=Ct(ea),Ga=oe({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ta=Ct(Ga),Ns=oe({},li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$n}),Sa=Ct(Ns),zo=oe({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Li=Ct(zo),tl=oe({},zl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ci=Ct(tl),ri=oe({},Kl,{newState:0,oldState:0}),kn=Ct(ri),jl=[9,13,27,32],Rs=Ft&&"CompositionEvent"in window,na=null;Ft&&"documentMode"in document&&(na=document.documentMode);var Tc=Ft&&"TextEvent"in window&&!na,Ms=Ft&&(!Rs||na&&8<na&&11>=na),Xt=" ",El=!1;function Hi(e,t){switch(e){case"keyup":return jl.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ca=!1;function zc(e,t){switch(e){case"compositionend":return Yi(t);case"keypress":return t.which!==32?null:(El=!0,Xt);case"textInput":return e=t.data,e===Xt&&El?null:e;default:return null}}function jc(e,t){if(Ca)return e==="compositionend"||!Rs&&Hi(e,t)?(e=Me(),Co=xn=Fl=null,Ca=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ms&&t.locale!=="ko"?null:t.data;default:return null}}var Ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _s(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ec[e.type]:t==="textarea"}function ui(e,t,n,l){On?mn?mn.push(l):mn=[l]:On=l,t=ir(t,"onChange"),0<t.length&&(n=new Oi("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var la=null,aa=null;function kc(e){tp(e,0)}function oa(e){var t=Ri(e);if(Cc(t))return e}function fi(e,t){if(e==="change")return t}var di=!1;if(Ft){var wa;if(Ft){var pi="oninput"in document;if(!pi){var jo=document.createElement("div");jo.setAttribute("oninput","return;"),pi=typeof jo.oninput=="function"}wa=pi}else wa=!1;di=wa&&(!document.documentMode||9<document.documentMode)}function Eo(){la&&(la.detachEvent("onpropertychange",ko),aa=la=null)}function ko(e){if(e.propertyName==="value"&&oa(aa)){var t=[];ui(t,aa,e,ws(e)),Tl(kc,t)}}function Vi(e,t,n){e==="focusin"?(Eo(),la=t,aa=n,la.attachEvent("onpropertychange",ko)):e==="focusout"&&Eo()}function Ta(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oa(aa)}function kr(e,t){if(e==="click")return oa(t)}function Xi(e,t){if(e==="input"||e==="change")return oa(t)}function Ac(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nl=typeof Object.is=="function"?Object.is:Ac;function za(e,t){if(nl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var a=n[l];if(!ma.call(t,a)||!nl(e[a],t[a]))return!1}return!0}function Gi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bs(e,t){var n=Gi(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gi(n)}}function Os(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Os(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Us(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bt(e.document)}return t}function Ao(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hi=Ft&&"documentMode"in document&&11>=document.documentMode,ia=null,Ia=null,Mn=null,Ii=!1;function kl(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ii||ia==null||ia!==bt(l)||(l=ia,"selectionStart"in l&&Ao(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Mn&&za(Mn,l)||(Mn=l,l=ir(Ia,"onSelect"),0<l.length&&(t=new Oi("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=ia)))}function ja(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ln={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionrun:ja("Transition","TransitionRun"),transitionstart:ja("Transition","TransitionStart"),transitioncancel:ja("Transition","TransitionCancel"),transitionend:ja("Transition","TransitionEnd")},qi={},qa={};Ft&&(qa=document.createElement("div").style,"AnimationEvent"in window||(delete Ln.animationend.animation,delete Ln.animationiteration.animation,delete Ln.animationstart.animation),"TransitionEvent"in window||delete Ln.transitionend.transition);function Ea(e){if(qi[e])return qi[e];if(!Ln[e])return e;var t=Ln[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qa)return qi[e]=t[n];return e}var $a=Ea("animationend"),Ls=Ea("animationiteration"),sa=Ea("animationstart"),Hs=Ea("transitionrun"),ka=Ea("transitionstart"),Ys=Ea("transitioncancel"),Aa=Ea("transitionend"),Vs=new Map,vt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vt.push("scrollEnd");function ct(e,t){Vs.set(e,t),Va(t,[e])}var $i=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Zn=[],Do=0,Za=0;function Pa(){for(var e=Do,t=Za=Do=0;t<e;){var n=Zn[t];Zn[t++]=null;var l=Zn[t];Zn[t++]=null;var a=Zn[t];Zn[t++]=null;var i=Zn[t];if(Zn[t++]=null,l!==null&&a!==null){var r=l.pending;r===null?a.next=a:(a.next=r.next,r.next=a),l.pending=a}i!==0&&Fa(n,a,i)}}function Qa(e,t,n,l){Zn[Do++]=e,Zn[Do++]=t,Zn[Do++]=n,Zn[Do++]=l,Za|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Hl(e,t,n,l){return Qa(e,t,n,l),ca(e)}function Da(e,t){return Qa(e,null,null,t),ca(e)}function Fa(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var a=!1,i=e.return;i!==null;)i.childLanes|=n,l=i.alternate,l!==null&&(l.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(a=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,a&&t!==null&&(a=31-Rn(n),e=i.hiddenUpdates,l=e[a],l===null?e[a]=[t]:l.push(t),t.lane=n|536870912),i):null}function ca(e){if(50<ic)throw ic=0,mu=null,Error(S(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Na={};function No(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(e,t,n,l){return new No(e,t,n,l)}function Zi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ll(e,t){var n=e.alternate;return n===null?(n=Pn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Dc(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ka(e,t,n,l,a,i){var r=0;if(l=e,typeof e=="function")Zi(e)&&(r=1);else if(typeof e=="string")r=ly(e,n,Ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case j:return e=Pn(31,n,t,a),e.elementType=j,e.lanes=i,e;case ve:return Qn(n.children,a,i,t);case le:r=8,a|=24;break;case m:return e=Pn(12,n,t,a|2),e.elementType=m,e.lanes=i,e;case q:return e=Pn(13,n,t,a),e.elementType=q,e.lanes=i,e;case $:return e=Pn(19,n,t,a),e.elementType=$,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:r=10;break e;case k:r=9;break e;case He:r=11;break e;case fe:r=14;break e;case Ge:r=16,l=null;break e}r=29,n=Error(S(130,e===null?"null":typeof e,"")),l=null}return t=Pn(r,n,t,a),t.elementType=e,t.type=l,t.lanes=i,t}function Qn(e,t,n,l){return e=Pn(7,e,l,t),e.lanes=n,e}function yi(e,t,n){return e=Pn(6,e,null,t),e.lanes=n,e}function Wa(e){var t=Pn(18,null,null,0);return t.stateNode=e,t}function al(e,t,n){return t=Pn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Pi=new WeakMap;function ol(e,t){if(typeof e=="object"&&e!==null){var n=Pi.get(e);return n!==void 0?n:(t={value:e,source:t,stack:ql(t)},Pi.set(e,t),t)}return{value:e,source:t,stack:ql(t)}}var ra=[],Ro=0,gi=null,Yl=0,il=[],An=0,ua=null,Dn=1,pl="";function Vl(e,t){ra[Ro++]=Yl,ra[Ro++]=gi,gi=e,Yl=t}function Nc(e,t,n){il[An++]=Dn,il[An++]=pl,il[An++]=ua,ua=e;var l=Dn;e=pl;var a=32-Rn(l)-1;l&=~(1<<a),n+=1;var i=32-Rn(t)+a;if(30<i){var r=a-a%5;i=(l&(1<<r)-1).toString(32),l>>=r,a-=r,Dn=1<<32-Rn(t)+a|n<<a|l,pl=i+e}else Dn=1<<i|n<<a|l,pl=e}function Xs(e){e.return!==null&&(Vl(e,1),Nc(e,1,0))}function Gs(e){for(;e===gi;)gi=ra[--Ro],ra[Ro]=null,Yl=ra[--Ro],ra[Ro]=null;for(;e===ua;)ua=il[--An],il[An]=null,pl=il[--An],il[An]=null,Dn=il[--An],il[An]=null}function mi(e,t){il[An++]=Dn,il[An++]=pl,il[An++]=ua,Dn=t.id,pl=t.overflow,ua=e}var vn=null,Zt=null,St=!1,hl=null,yl=!1,xi=Error(S(519));function Ra(e){var t=Error(S(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bi(ol(t,e)),xi}function Qi(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[gn]=e,t[on]=l,n){case"dialog":Tt("cancel",t),Tt("close",t);break;case"iframe":case"object":case"embed":Tt("load",t);break;case"video":case"audio":for(n=0;n<cc.length;n++)Tt(cc[n],t);break;case"source":Tt("error",t);break;case"img":case"image":case"link":Tt("error",t),Tt("load",t);break;case"details":Tt("toggle",t);break;case"input":Tt("invalid",t),X(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Tt("invalid",t);break;case"textarea":Tt("invalid",t),wl(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||op(t.textContent,n)?(l.popover!=null&&(Tt("beforetoggle",t),Tt("toggle",t)),l.onScroll!=null&&Tt("scroll",t),l.onScrollEnd!=null&&Tt("scrollend",t),l.onClick!=null&&(t.onclick=Ql),t=!0):t=!1,t||Ra(e,!0)}function Fi(e){for(vn=e.return;vn;)switch(vn.tag){case 5:case 31:case 13:yl=!1;return;case 27:case 3:yl=!0;return;default:vn=vn.return}}function Ja(e){if(e!==vn)return!1;if(!St)return Fi(e),St=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ru(e.type,e.memoizedProps)),n=!n),n&&Zt&&Ra(e),Fi(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(S(317));Zt=hp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(S(317));Zt=hp(e)}else t===27?(t=Zt,$o(e.type)?(e=Uu,Uu=null,Zt=e):Zt=t):Zt=vn?Gl(e.stateNode.nextSibling):null;return!0}function eo(){Zt=vn=null,St=!1}function Ki(){var e=hl;return e!==null&&(bl===null?bl=e:bl.push.apply(bl,e),hl=null),e}function bi(e){hl===null?hl=[e]:hl.push(e)}var vi=x(null),Al=null,Hn=null;function Ma(e,t,n){ce(vi,t._currentValue),t._currentValue=n}function fa(e){e._currentValue=vi.current,R(vi)}function Mo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Xl(e,t,n,l){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var i=a.dependencies;if(i!==null){var r=a.child;i=i.firstContext;e:for(;i!==null;){var h=i;i=a;for(var C=0;C<t.length;C++)if(h.context===t[C]){i.lanes|=n,h=i.alternate,h!==null&&(h.lanes|=n),Mo(i.return,n,e),l||(r=null);break e}i=h.next}}else if(a.tag===18){if(r=a.return,r===null)throw Error(S(341));r.lanes|=n,i=r.alternate,i!==null&&(i.lanes|=n),Mo(r,n,e),r=null}else r=a.child;if(r!==null)r.return=a;else for(r=a;r!==null;){if(r===e){r=null;break}if(a=r.sibling,a!==null){a.return=r.return,r=a;break}r=r.return}a=r}}function to(e,t,n,l){e=null;for(var a=t,i=!1;a!==null;){if(!i){if((a.flags&524288)!==0)i=!0;else if((a.flags&262144)!==0)break}if(a.tag===10){var r=a.alternate;if(r===null)throw Error(S(387));if(r=r.memoizedProps,r!==null){var h=a.type;nl(a.pendingProps.value,r.value)||(e!==null?e.push(h):e=[h])}}else if(a===je.current){if(r=a.alternate,r===null)throw Error(S(387));r.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(pc):e=[pc])}a=a.return}e!==null&&Xl(t,e,n,l),t.flags|=262144}function da(e){for(e=e.firstContext;e!==null;){if(!nl(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function sl(e){Al=e,Hn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Sn(e){return Yn(Al,e)}function Si(e,t){return Al===null&&sl(e),Yn(e,t)}function Yn(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Hn===null){if(e===null)throw Error(S(308));Hn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Hn=Hn.next=t;return n}var _o=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Is=A.unstable_scheduleCallback,qs=A.unstable_NormalPriority,sn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function no(){return{controller:new _o,data:new Map,refCount:0}}function Ci(e){e.refCount--,e.refCount===0&&Is(qs,function(){e.controller.abort()})}var pa=null,$s=0,lo=0,_a=null;function Ar(e,t){if(pa===null){var n=pa=[];$s=0,lo=wu(),_a={status:"pending",value:void 0,then:function(l){n.push(l)}}}return $s++,t.then(Rc,Rc),t}function Rc(){if(--$s===0&&pa!==null){_a!==null&&(_a.status="fulfilled");var e=pa;pa=null,lo=0,_a=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Mc(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(l.status="rejected",l.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),l}var Wi=H.S;H.S=function(e,t){Ad=Ae(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ar(e,t),Wi!==null&&Wi(e,t)};var ha=x(null);function Zs(){var e=ha.current;return e!==null?e:Qt.pooledCache}function wi(e,t){t===null?ce(ha,ha.current):ce(ha,t.pool)}function Bo(){var e=Zs();return e===null?null:{parent:sn._currentValue,pool:e}}var Dl=Error(S(460)),Oo=Error(S(474)),Uo=Error(S(542)),Lo={then:function(){}};function _c(e){return e=e.status,e==="fulfilled"||e==="rejected"}function $e(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ql,Ql),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,f(e),e;default:if(typeof t.status=="string")t.then(Ql,Ql);else{if(e=Qt,e!==null&&100<e.shellSuspendCounter)throw Error(S(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=l}},function(l){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,f(e),e}throw o=t,Dl}}function ao(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(o=n,Dl):n}}var o=null;function c(){if(o===null)throw Error(S(459));var e=o;return o=null,e}function f(e){if(e===Dl||e===Uo)throw Error(S(483))}var p=null,g=0;function y(e){var t=g;return g+=1,p===null&&(p=[]),$e(p,e,t)}function u(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function d(e,t){throw t.$$typeof===ke?Error(S(525)):(e=Object.prototype.toString.call(t),Error(S(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function w(e){function t(M,E){if(e){var Y=M.deletions;Y===null?(M.deletions=[E],M.flags|=16):Y.push(E)}}function n(M,E){if(!e)return null;for(;E!==null;)t(M,E),E=E.sibling;return null}function l(M){for(var E=new Map;M!==null;)M.key!==null?E.set(M.key,M):E.set(M.index,M),M=M.sibling;return E}function a(M,E){return M=ll(M,E),M.index=0,M.sibling=null,M}function i(M,E,Y){return M.index=Y,e?(Y=M.alternate,Y!==null?(Y=Y.index,Y<E?(M.flags|=67108866,E):Y):(M.flags|=67108866,E)):(M.flags|=1048576,E)}function r(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function h(M,E,Y,ue){return E===null||E.tag!==6?(E=yi(Y,M.mode,ue),E.return=M,E):(E=a(E,Y),E.return=M,E)}function C(M,E,Y,ue){var Ie=Y.type;return Ie===ve?ie(M,E,Y.props.children,ue,Y.key):E!==null&&(E.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Ge&&ao(Ie)===E.type)?(E=a(E,Y.props),u(E,Y),E.return=M,E):(E=Ka(Y.type,Y.key,Y.props,null,M.mode,ue),u(E,Y),E.return=M,E)}function V(M,E,Y,ue){return E===null||E.tag!==4||E.stateNode.containerInfo!==Y.containerInfo||E.stateNode.implementation!==Y.implementation?(E=al(Y,M.mode,ue),E.return=M,E):(E=a(E,Y.children||[]),E.return=M,E)}function ie(M,E,Y,ue,Ie){return E===null||E.tag!==7?(E=Qn(Y,M.mode,ue,Ie),E.return=M,E):(E=a(E,Y),E.return=M,E)}function pe(M,E,Y){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=yi(""+E,M.mode,Y),E.return=M,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case xe:return Y=Ka(E.type,E.key,E.props,null,M.mode,Y),u(Y,E),Y.return=M,Y;case ye:return E=al(E,M.mode,Y),E.return=M,E;case Ge:return E=ao(E),pe(M,E,Y)}if(Ye(E)||nt(E))return E=Qn(E,M.mode,Y,null),E.return=M,E;if(typeof E.then=="function")return pe(M,y(E),Y);if(E.$$typeof===L)return pe(M,Si(M,E),Y);d(M,E)}return null}function G(M,E,Y,ue){var Ie=E!==null?E.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ie!==null?null:h(M,E,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case xe:return Y.key===Ie?C(M,E,Y,ue):null;case ye:return Y.key===Ie?V(M,E,Y,ue):null;case Ge:return Y=ao(Y),G(M,E,Y,ue)}if(Ye(Y)||nt(Y))return Ie!==null?null:ie(M,E,Y,ue,null);if(typeof Y.then=="function")return G(M,E,y(Y),ue);if(Y.$$typeof===L)return G(M,E,Si(M,Y),ue);d(M,Y)}return null}function W(M,E,Y,ue,Ie){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return M=M.get(Y)||null,h(E,M,""+ue,Ie);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case xe:return M=M.get(ue.key===null?Y:ue.key)||null,C(E,M,ue,Ie);case ye:return M=M.get(ue.key===null?Y:ue.key)||null,V(E,M,ue,Ie);case Ge:return ue=ao(ue),W(M,E,Y,ue,Ie)}if(Ye(ue)||nt(ue))return M=M.get(Y)||null,ie(E,M,ue,Ie,null);if(typeof ue.then=="function")return W(M,E,Y,y(ue),Ie);if(ue.$$typeof===L)return W(M,E,Y,Si(E,ue),Ie);d(E,ue)}return null}function Re(M,E,Y,ue){for(var Ie=null,_t=null,Le=E,yt=E=0,Et=null;Le!==null&&yt<Y.length;yt++){Le.index>yt?(Et=Le,Le=null):Et=Le.sibling;var Bt=G(M,Le,Y[yt],ue);if(Bt===null){Le===null&&(Le=Et);break}e&&Le&&Bt.alternate===null&&t(M,Le),E=i(Bt,E,yt),_t===null?Ie=Bt:_t.sibling=Bt,_t=Bt,Le=Et}if(yt===Y.length)return n(M,Le),St&&Vl(M,yt),Ie;if(Le===null){for(;yt<Y.length;yt++)Le=pe(M,Y[yt],ue),Le!==null&&(E=i(Le,E,yt),_t===null?Ie=Le:_t.sibling=Le,_t=Le);return St&&Vl(M,yt),Ie}for(Le=l(Le);yt<Y.length;yt++)Et=W(Le,M,yt,Y[yt],ue),Et!==null&&(e&&Et.alternate!==null&&Le.delete(Et.key===null?yt:Et.key),E=i(Et,E,yt),_t===null?Ie=Et:_t.sibling=Et,_t=Et);return e&&Le.forEach(function(Ko){return t(M,Ko)}),St&&Vl(M,yt),Ie}function Fe(M,E,Y,ue){if(Y==null)throw Error(S(151));for(var Ie=null,_t=null,Le=E,yt=E=0,Et=null,Bt=Y.next();Le!==null&&!Bt.done;yt++,Bt=Y.next()){Le.index>yt?(Et=Le,Le=null):Et=Le.sibling;var Ko=G(M,Le,Bt.value,ue);if(Ko===null){Le===null&&(Le=Et);break}e&&Le&&Ko.alternate===null&&t(M,Le),E=i(Ko,E,yt),_t===null?Ie=Ko:_t.sibling=Ko,_t=Ko,Le=Et}if(Bt.done)return n(M,Le),St&&Vl(M,yt),Ie;if(Le===null){for(;!Bt.done;yt++,Bt=Y.next())Bt=pe(M,Bt.value,ue),Bt!==null&&(E=i(Bt,E,yt),_t===null?Ie=Bt:_t.sibling=Bt,_t=Bt);return St&&Vl(M,yt),Ie}for(Le=l(Le);!Bt.done;yt++,Bt=Y.next())Bt=W(Le,M,yt,Bt.value,ue),Bt!==null&&(e&&Bt.alternate!==null&&Le.delete(Bt.key===null?yt:Bt.key),E=i(Bt,E,yt),_t===null?Ie=Bt:_t.sibling=Bt,_t=Bt);return e&&Le.forEach(function(hy){return t(M,hy)}),St&&Vl(M,yt),Ie}function It(M,E,Y,ue){if(typeof Y=="object"&&Y!==null&&Y.type===ve&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case xe:e:{for(var Ie=Y.key;E!==null;){if(E.key===Ie){if(Ie=Y.type,Ie===ve){if(E.tag===7){n(M,E.sibling),ue=a(E,Y.props.children),ue.return=M,M=ue;break e}}else if(E.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Ge&&ao(Ie)===E.type){n(M,E.sibling),ue=a(E,Y.props),u(ue,Y),ue.return=M,M=ue;break e}n(M,E);break}else t(M,E);E=E.sibling}Y.type===ve?(ue=Qn(Y.props.children,M.mode,ue,Y.key),ue.return=M,M=ue):(ue=Ka(Y.type,Y.key,Y.props,null,M.mode,ue),u(ue,Y),ue.return=M,M=ue)}return r(M);case ye:e:{for(Ie=Y.key;E!==null;){if(E.key===Ie)if(E.tag===4&&E.stateNode.containerInfo===Y.containerInfo&&E.stateNode.implementation===Y.implementation){n(M,E.sibling),ue=a(E,Y.children||[]),ue.return=M,M=ue;break e}else{n(M,E);break}else t(M,E);E=E.sibling}ue=al(Y,M.mode,ue),ue.return=M,M=ue}return r(M);case Ge:return Y=ao(Y),It(M,E,Y,ue)}if(Ye(Y))return Re(M,E,Y,ue);if(nt(Y)){if(Ie=nt(Y),typeof Ie!="function")throw Error(S(150));return Y=Ie.call(Y),Fe(M,E,Y,ue)}if(typeof Y.then=="function")return It(M,E,y(Y),ue);if(Y.$$typeof===L)return It(M,E,Si(M,Y),ue);d(M,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,E!==null&&E.tag===6?(n(M,E.sibling),ue=a(E,Y),ue.return=M,M=ue):(n(M,E),ue=yi(Y,M.mode,ue),ue.return=M,M=ue),r(M)):n(M,E)}return function(M,E,Y,ue){try{g=0;var Ie=It(M,E,Y,ue);return p=null,Ie}catch(Le){if(Le===Dl||Le===Uo)throw Le;var _t=Pn(29,Le,null,M.mode);return _t.lanes=ue,_t.return=M,_t}finally{}}}var b=w(!0),te=w(!1),Q=!1;function Se(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ee(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function K(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function F(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ot&2)!==0){var a=l.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),l.pending=t,t=ca(e),Fa(e,null,n),t}return Qa(e,l,t,n),ca(e)}function Z(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ms(e,n)}}function be(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?a=i=r:i=i.next=r,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:l.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ge=!1;function U(){if(ge){var e=_a;if(e!==null)throw e}}function B(e,t,n,l){ge=!1;var a=e.updateQueue;Q=!1;var i=a.firstBaseUpdate,r=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var C=h,V=C.next;C.next=null,r===null?i=V:r.next=V,r=C;var ie=e.alternate;ie!==null&&(ie=ie.updateQueue,h=ie.lastBaseUpdate,h!==r&&(h===null?ie.firstBaseUpdate=V:h.next=V,ie.lastBaseUpdate=C))}if(i!==null){var pe=a.baseState;r=0,ie=V=C=null,h=i;do{var G=h.lane&-536870913,W=G!==h.lane;if(W?(jt&G)===G:(l&G)===G){G!==0&&G===lo&&(ge=!0),ie!==null&&(ie=ie.next={lane:0,tag:h.tag,payload:h.payload,callback:null,next:null});e:{var Re=e,Fe=h;G=t;var It=n;switch(Fe.tag){case 1:if(Re=Fe.payload,typeof Re=="function"){pe=Re.call(It,pe,G);break e}pe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Fe.payload,G=typeof Re=="function"?Re.call(It,pe,G):Re,G==null)break e;pe=oe({},pe,G);break e;case 2:Q=!0}}G=h.callback,G!==null&&(e.flags|=64,W&&(e.flags|=8192),W=a.callbacks,W===null?a.callbacks=[G]:W.push(G))}else W={lane:G,tag:h.tag,payload:h.payload,callback:h.callback,next:null},ie===null?(V=ie=W,C=pe):ie=ie.next=W,r|=G;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;W=h,h=W.next,W.next=null,a.lastBaseUpdate=W,a.shared.pending=null}}while(!0);ie===null&&(C=pe),a.baseState=C,a.firstBaseUpdate=V,a.lastBaseUpdate=ie,i===null&&(a.shared.lanes=0),Vo|=r,e.lanes=r,e.memoizedState=pe}}function se(e,t){if(typeof e!="function")throw Error(S(191,e));e.call(t)}function D(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)se(n[e],t)}var P=x(null),ae=x(0);function re(e,t){e=po,ce(ae,e),ce(P,t),po=e|t.baseLanes}function Te(){ce(ae,po),ce(P,P.current)}function Xe(){po=ae.current,R(P),R(ae)}var Ee=x(null),Be=null;function ft(e){var t=e.alternate;ce(Pe,Pe.current&1),ce(Ee,e),Be===null&&(t===null||P.current!==null||t.memoizedState!==null)&&(Be=e)}function Wt(e){ce(Pe,Pe.current),ce(Ee,e),Be===null&&(Be=e)}function Mt(e){e.tag===22?(ce(Pe,Pe.current),ce(Ee,e),Be===null&&(Be=e)):Oe()}function Oe(){ce(Pe,Pe.current),ce(Ee,Ee.current)}function Je(e){R(Ee),Be===e&&(Be=null),R(Pe)}var Pe=x(0);function zt(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Bu(n)||Ou(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xt=0,_e=null,We=null,Ue=null,Pt=!1,Fn=!1,Cn=!1,Bc=0,Ps=0,Ji=null,ah=0;function cn(){throw Error(S(321))}function Dr(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nl(e[n],t[n]))return!1;return!0}function Nr(e,t,n,l,a,i){return xt=i,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,H.H=e===null||e.memoizedState===null?Yf:$r,Cn=!1,i=n(l,a),Cn=!1,Fn&&(i=af(t,n,l,a)),lf(e),i}function lf(e){H.H=Ks;var t=We!==null&&We.next!==null;if(xt=0,Ue=We=_e=null,Pt=!1,Ps=0,Ji=null,t)throw Error(S(300));e===null||wn||(e=e.dependencies,e!==null&&da(e)&&(wn=!0))}function af(e,t,n,l){_e=e;var a=0;do{if(Fn&&(Ji=null),Ps=0,Fn=!1,25<=a)throw Error(S(301));if(a+=1,Ue=We=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}H.H=Vf,i=t(n,l)}while(Fn);return i}function oh(){var e=H.H,t=e.useState()[0];return t=typeof t.then=="function"?Qs(t):t,e=e.useState()[0],(We!==null?We.memoizedState:null)!==e&&(_e.flags|=1024),t}function Rr(){var e=Bc!==0;return Bc=0,e}function Mr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function _r(e){if(Pt){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Pt=!1}xt=0,Ue=We=_e=null,Fn=!1,Ps=Bc=0,Ji=null}function cl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?_e.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function pn(){if(We===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=Ue===null?_e.memoizedState:Ue.next;if(t!==null)Ue=t,We=e;else{if(e===null)throw _e.alternate===null?Error(S(467)):Error(S(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ue===null?_e.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function Oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qs(e){var t=Ps;return Ps+=1,Ji===null&&(Ji=[]),e=$e(Ji,e,t),t=_e,(Ue===null?t.memoizedState:Ue.next)===null&&(t=t.alternate,H.H=t===null||t.memoizedState===null?Yf:$r),e}function Uc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qs(e);if(e.$$typeof===L)return Sn(e)}throw Error(S(438,String(e)))}function Br(e){var t=null,n=_e.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=_e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Oc(),_e.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=et;return t.index++,n}function oo(e,t){return typeof t=="function"?t(e):t}function Lc(e){var t=pn();return Or(t,We,e)}function Or(e,t,n){var l=e.queue;if(l===null)throw Error(S(311));l.lastRenderedReducer=n;var a=e.baseQueue,i=l.pending;if(i!==null){if(a!==null){var r=a.next;a.next=i.next,i.next=r}t.baseQueue=a=i,l.pending=null}if(i=e.baseState,a===null)e.memoizedState=i;else{t=a.next;var h=r=null,C=null,V=t,ie=!1;do{var pe=V.lane&-536870913;if(pe!==V.lane?(jt&pe)===pe:(xt&pe)===pe){var G=V.revertLane;if(G===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),pe===lo&&(ie=!0);else if((xt&G)===G){V=V.next,G===lo&&(ie=!0);continue}else pe={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},C===null?(h=C=pe,r=i):C=C.next=pe,_e.lanes|=G,Vo|=G;pe=V.action,Cn&&n(i,pe),i=V.hasEagerState?V.eagerState:n(i,pe)}else G={lane:pe,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},C===null?(h=C=G,r=i):C=C.next=G,_e.lanes|=pe,Vo|=pe;V=V.next}while(V!==null&&V!==t);if(C===null?r=i:C.next=h,!nl(i,e.memoizedState)&&(wn=!0,ie&&(n=_a,n!==null)))throw n;e.memoizedState=i,e.baseState=r,e.baseQueue=C,l.lastRenderedState=i}return a===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ur(e){var t=pn(),n=t.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=e;var l=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var r=a=a.next;do i=e(i,r.action),r=r.next;while(r!==a);nl(i,t.memoizedState)||(wn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,l]}function of(e,t,n){var l=_e,a=pn(),i=St;if(i){if(n===void 0)throw Error(S(407));n=n()}else n=t();var r=!nl((We||a).memoizedState,n);if(r&&(a.memoizedState=n,wn=!0),a=a.queue,Yr(rf.bind(null,l,a,e),[e]),a.getSnapshot!==t||r||Ue!==null&&Ue.memoizedState.tag&1){if(l.flags|=2048,es(9,{destroy:void 0},cf.bind(null,l,a,n,t),null),Qt===null)throw Error(S(349));i||(xt&127)!==0||sf(l,t,n)}return n}function sf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t=Oc(),_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cf(e,t,n,l){t.value=n,t.getSnapshot=l,uf(t)&&ff(e)}function rf(e,t,n){return n(function(){uf(t)&&ff(e)})}function uf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nl(e,n)}catch{return!0}}function ff(e){var t=Da(e,2);t!==null&&vl(t,e,2)}function Lr(e){var t=cl();if(typeof e=="function"){var n=e;if(e=n(),Cn){Zl(!0);try{n()}finally{Zl(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e},t}function df(e,t,n,l){return e.baseState=n,Or(e,We,typeof l=="function"?l:oo)}function ih(e,t,n,l,a){if(Vc(e))throw Error(S(485));if(e=t.action,e!==null){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){i.listeners.push(r)}};H.T!==null?n(!0):i.isTransition=!1,l(i),n=t.pending,n===null?(i.next=t.pending=i,pf(t,i)):(i.next=n.next,t.pending=n.next=i)}}function pf(e,t){var n=t.action,l=t.payload,a=e.state;if(t.isTransition){var i=H.T,r={};H.T=r;try{var h=n(a,l),C=H.S;C!==null&&C(r,h),hf(e,t,h)}catch(V){Hr(e,t,V)}finally{i!==null&&r.types!==null&&(i.types=r.types),H.T=i}}else try{i=n(a,l),hf(e,t,i)}catch(V){Hr(e,t,V)}}function hf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){yf(e,t,l)},function(l){return Hr(e,t,l)}):yf(e,t,n)}function yf(e,t,n){t.status="fulfilled",t.value=n,gf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,pf(e,n)))}function Hr(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,gf(t),t=t.next;while(t!==l)}e.action=null}function gf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function mf(e,t){return t}function xf(e,t){if(St){var n=Qt.formState;if(n!==null){e:{var l=_e;if(St){if(Zt){t:{for(var a=Zt,i=yl;a.nodeType!==8;){if(!i){a=null;break t}if(a=Gl(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){Zt=Gl(a.nextSibling),l=a.data==="F!";break e}}Ra(l)}l=!1}l&&(t=n[0])}}return n=cl(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:t},n.queue=l,n=Uf.bind(null,_e,l),l.dispatch=n,l=Lr(!1),i=qr.bind(null,_e,!1,l.queue),l=cl(),a={state:t,dispatch:null,action:e,pending:null},l.queue=a,n=ih.bind(null,_e,a,i,n),a.dispatch=n,l.memoizedState=e,[t,n,!1]}function bf(e){var t=pn();return vf(t,We,e)}function vf(e,t,n){if(t=Or(e,t,mf)[0],e=Lc(oo)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Qs(t)}catch(r){throw r===Dl?Uo:r}else l=t;t=pn();var a=t.queue,i=a.dispatch;return n!==t.memoizedState&&(_e.flags|=2048,es(9,{destroy:void 0},sh.bind(null,a,n),null)),[l,i,e]}function sh(e,t){e.action=t}function Sf(e){var t=pn(),n=We;if(n!==null)return vf(t,n,e);pn(),t=t.memoizedState,n=pn();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function es(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=_e.updateQueue,t===null&&(t=Oc(),_e.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Cf(){return pn().memoizedState}function Hc(e,t,n,l){var a=cl();_e.flags|=e,a.memoizedState=es(1|t,{destroy:void 0},n,l===void 0?null:l)}function Yc(e,t,n,l){var a=pn();l=l===void 0?null:l;var i=a.memoizedState.inst;We!==null&&l!==null&&Dr(l,We.memoizedState.deps)?a.memoizedState=es(t,i,n,l):(_e.flags|=e,a.memoizedState=es(1|t,i,n,l))}function wf(e,t){Hc(8390656,8,e,t)}function Yr(e,t){Yc(2048,8,e,t)}function ch(e){_e.flags|=4;var t=_e.updateQueue;if(t===null)t=Oc(),_e.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Tf(e){var t=pn().memoizedState;return ch({ref:t,nextImpl:e}),function(){if((Ot&2)!==0)throw Error(S(440));return t.impl.apply(void 0,arguments)}}function zf(e,t){return Yc(4,2,e,t)}function jf(e,t){return Yc(4,4,e,t)}function Ef(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kf(e,t,n){n=n!=null?n.concat([e]):null,Yc(4,4,Ef.bind(null,t,e),n)}function Vr(){}function Af(e,t){var n=pn();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Dr(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Df(e,t){var n=pn();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Dr(t,l[1]))return l[0];if(l=e(),Cn){Zl(!0);try{e()}finally{Zl(!1)}}return n.memoizedState=[l,t],l}function Xr(e,t,n){return n===void 0||(xt&1073741824)!==0&&(jt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Nd(),_e.lanes|=e,Vo|=e,n)}function Nf(e,t,n,l){return nl(n,t)?n:P.current!==null?(e=Xr(e,n,l),nl(e,t)||(wn=!0),e):(xt&42)===0||(xt&1073741824)!==0&&(jt&261930)===0?(wn=!0,e.memoizedState=n):(e=Nd(),_e.lanes|=e,Vo|=e,t)}function Rf(e,t,n,l,a){var i=J.p;J.p=i!==0&&8>i?i:8;var r=H.T,h={};H.T=h,qr(e,!1,t,n);try{var C=a(),V=H.S;if(V!==null&&V(h,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var ie=Mc(C,l);Fs(e,t,ie,Ml(e))}else Fs(e,t,l,Ml(e))}catch(pe){Fs(e,t,{then:function(){},status:"rejected",reason:pe},Ml())}finally{J.p=i,r!==null&&h.types!==null&&(r.types=h.types),H.T=r}}function rh(){}function Gr(e,t,n,l){if(e.tag!==5)throw Error(S(476));var a=Mf(e).queue;Rf(e,a,t,N,n===null?rh:function(){return _f(e),n(l)})}function Mf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:N},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function _f(e){var t=Mf(e);t.next===null&&(t=e.alternate.memoizedState),Fs(e,t.next.queue,{},Ml())}function Ir(){return Sn(pc)}function Bf(){return pn().memoizedState}function Of(){return pn().memoizedState}function uh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ml();e=K(n);var l=F(t,e,n);l!==null&&(vl(l,t,n),Z(l,t,n)),t={cache:no()},e.payload=t;return}t=t.return}}function fh(e,t,n){var l=Ml();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Vc(e)?Lf(t,n):(n=Hl(e,t,n,l),n!==null&&(vl(n,e,l),Hf(n,t,l)))}function Uf(e,t,n){var l=Ml();Fs(e,t,n,l)}function Fs(e,t,n,l){var a={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vc(e))Lf(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var r=t.lastRenderedState,h=i(r,n);if(a.hasEagerState=!0,a.eagerState=h,nl(h,r))return Qa(e,t,a,0),Qt===null&&Pa(),!1}catch{}finally{}if(n=Hl(e,t,a,l),n!==null)return vl(n,e,l),Hf(n,t,l),!0}return!1}function qr(e,t,n,l){if(l={lane:2,revertLane:wu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Vc(e)){if(t)throw Error(S(479))}else t=Hl(e,n,l,2),t!==null&&vl(t,e,2)}function Vc(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function Lf(e,t){Fn=Pt=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ms(e,n)}}var Ks={readContext:Sn,use:Uc,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};Ks.useEffectEvent=cn;var Yf={readContext:Sn,use:Uc,useCallback:function(e,t){return cl().memoizedState=[e,t===void 0?null:t],e},useContext:Sn,useEffect:wf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Hc(4194308,4,Ef.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hc(4194308,4,e,t)},useInsertionEffect:function(e,t){Hc(4,2,e,t)},useMemo:function(e,t){var n=cl();t=t===void 0?null:t;var l=e();if(Cn){Zl(!0);try{e()}finally{Zl(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=cl();if(n!==void 0){var a=n(t);if(Cn){Zl(!0);try{n(t)}finally{Zl(!1)}}}else a=t;return l.memoizedState=l.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},l.queue=e,e=e.dispatch=fh.bind(null,_e,e),[l.memoizedState,e]},useRef:function(e){var t=cl();return e={current:e},t.memoizedState=e},useState:function(e){e=Lr(e);var t=e.queue,n=Uf.bind(null,_e,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Vr,useDeferredValue:function(e,t){var n=cl();return Xr(n,e,t)},useTransition:function(){var e=Lr(!1);return e=Rf.bind(null,_e,e.queue,!0,!1),cl().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=_e,a=cl();if(St){if(n===void 0)throw Error(S(407));n=n()}else{if(n=t(),Qt===null)throw Error(S(349));(jt&127)!==0||sf(l,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,wf(rf.bind(null,l,i,e),[e]),l.flags|=2048,es(9,{destroy:void 0},cf.bind(null,l,i,n,t),null),n},useId:function(){var e=cl(),t=Qt.identifierPrefix;if(St){var n=pl,l=Dn;n=(l&~(1<<32-Rn(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Bc++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=ah++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ir,useFormState:xf,useActionState:xf,useOptimistic:function(e){var t=cl();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=qr.bind(null,_e,!0,n),n.dispatch=t,[e,t]},useMemoCache:Br,useCacheRefresh:function(){return cl().memoizedState=uh.bind(null,_e)},useEffectEvent:function(e){var t=cl(),n={impl:e};return t.memoizedState=n,function(){if((Ot&2)!==0)throw Error(S(440));return n.impl.apply(void 0,arguments)}}},$r={readContext:Sn,use:Uc,useCallback:Af,useContext:Sn,useEffect:Yr,useImperativeHandle:kf,useInsertionEffect:zf,useLayoutEffect:jf,useMemo:Df,useReducer:Lc,useRef:Cf,useState:function(){return Lc(oo)},useDebugValue:Vr,useDeferredValue:function(e,t){var n=pn();return Nf(n,We.memoizedState,e,t)},useTransition:function(){var e=Lc(oo)[0],t=pn().memoizedState;return[typeof e=="boolean"?e:Qs(e),t]},useSyncExternalStore:of,useId:Bf,useHostTransitionStatus:Ir,useFormState:bf,useActionState:bf,useOptimistic:function(e,t){var n=pn();return df(n,We,e,t)},useMemoCache:Br,useCacheRefresh:Of};$r.useEffectEvent=Tf;var Vf={readContext:Sn,use:Uc,useCallback:Af,useContext:Sn,useEffect:Yr,useImperativeHandle:kf,useInsertionEffect:zf,useLayoutEffect:jf,useMemo:Df,useReducer:Ur,useRef:Cf,useState:function(){return Ur(oo)},useDebugValue:Vr,useDeferredValue:function(e,t){var n=pn();return We===null?Xr(n,e,t):Nf(n,We.memoizedState,e,t)},useTransition:function(){var e=Ur(oo)[0],t=pn().memoizedState;return[typeof e=="boolean"?e:Qs(e),t]},useSyncExternalStore:of,useId:Bf,useHostTransitionStatus:Ir,useFormState:Sf,useActionState:Sf,useOptimistic:function(e,t){var n=pn();return We!==null?df(n,We,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Br,useCacheRefresh:Of};Vf.useEffectEvent=Tf;function Zr(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Pr={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Ml(),a=K(l);a.payload=t,n!=null&&(a.callback=n),t=F(e,a,l),t!==null&&(vl(t,e,l),Z(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Ml(),a=K(l);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=F(e,a,l),t!==null&&(vl(t,e,l),Z(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ml(),l=K(n);l.tag=2,t!=null&&(l.callback=t),t=F(e,l,n),t!==null&&(vl(t,e,n),Z(t,e,n))}};function Xf(e,t,n,l,a,i,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,i,r):t.prototype&&t.prototype.isPureReactComponent?!za(n,l)||!za(a,i):!0}function Gf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Pr.enqueueReplaceState(t,t.state,null)}function Ti(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=oe({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}function If(e){$i(e)}function qf(e){console.error(e)}function $f(e){$i(e)}function Xc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Zf(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Qr(e,t,n){return n=K(n),n.tag=3,n.payload={element:null},n.callback=function(){Xc(e,t)},n}function Pf(e){return e=K(e),e.tag=3,e}function Qf(e,t,n,l){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var i=l.value;e.payload=function(){return a(i)},e.callback=function(){Zf(t,n,l)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Zf(t,n,l),typeof a!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var h=l.stack;this.componentDidCatch(l.value,{componentStack:h!==null?h:""})})}function dh(e,t,n,l,a){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&to(t,n,a,!0),n=Ee.current,n!==null){switch(n.tag){case 31:case 13:return Be===null?er():n.alternate===null&&rn===0&&(rn=3),n.flags&=-257,n.flags|=65536,n.lanes=a,l===Lo?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),vu(e,l,a)),!1;case 22:return n.flags|=65536,l===Lo?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),vu(e,l,a)),!1}throw Error(S(435,n.tag))}return vu(e,l,a),er(),!1}if(St)return t=Ee.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=a,l!==xi&&(e=Error(S(422),{cause:l}),bi(ol(e,n)))):(l!==xi&&(t=Error(S(423),{cause:l}),bi(ol(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,l=ol(l,n),a=Qr(e.stateNode,l,a),be(e,a),rn!==4&&(rn=2)),!1;var i=Error(S(520),{cause:l});if(i=ol(i,n),oc===null?oc=[i]:oc.push(i),rn!==4&&(rn=2),t===null)return!0;l=ol(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Qr(n.stateNode,l,e),be(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Xo===null||!Xo.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Pf(a),Qf(a,e,n,l),be(n,a),!1}n=n.return}while(n!==null);return!1}var Fr=Error(S(461)),wn=!1;function Vn(e,t,n,l){t.child=e===null?te(t,null,n,l):b(t,e.child,n,l)}function Ff(e,t,n,l,a){n=n.render;var i=t.ref;if("ref"in l){var r={};for(var h in l)h!=="ref"&&(r[h]=l[h])}else r=l;return sl(t),l=Nr(e,t,n,r,i,a),h=Rr(),e!==null&&!wn?(Mr(e,t,a),io(e,t,a)):(St&&h&&Xs(t),t.flags|=1,Vn(e,t,l,a),t.child)}function Kf(e,t,n,l,a){if(e===null){var i=n.type;return typeof i=="function"&&!Zi(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,Wf(e,t,i,l,a)):(e=Ka(n.type,null,l,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!au(e,a)){var r=i.memoizedProps;if(n=n.compare,n=n!==null?n:za,n(r,l)&&e.ref===t.ref)return io(e,t,a)}return t.flags|=1,e=ll(i,l),e.ref=t.ref,e.return=t,t.child=e}function Wf(e,t,n,l,a){if(e!==null){var i=e.memoizedProps;if(za(i,l)&&e.ref===t.ref)if(wn=!1,t.pendingProps=l=i,au(e,a))(e.flags&131072)!==0&&(wn=!0);else return t.lanes=e.lanes,io(e,t,a)}return Kr(e,t,n,l,a)}function Jf(e,t,n,l){var a=l.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(i=i!==null?i.baseLanes|n:n,e!==null){for(l=t.child=e.child,a=0;l!==null;)a=a|l.lanes|l.childLanes,l=l.sibling;l=a&~i}else l=0,t.child=null;return ed(e,t,i,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wi(t,i!==null?i.cachePool:null),i!==null?re(t,i):Te(),Mt(t);else return l=t.lanes=536870912,ed(e,t,i!==null?i.baseLanes|n:n,n,l)}else i!==null?(wi(t,i.cachePool),re(t,i),Oe(),t.memoizedState=null):(e!==null&&wi(t,null),Te(),Oe());return Vn(e,t,a,n),t.child}function Ws(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ed(e,t,n,l,a){var i=Zs();return i=i===null?null:{parent:sn._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&wi(t,null),Te(),Mt(t),e!==null&&to(e,t,l,!0),t.childLanes=a,null}function Gc(e,t){return t=qc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function td(e,t,n){return b(t,e.child,null,n),e=Gc(t,t.pendingProps),e.flags|=2,Je(t),t.memoizedState=null,e}function ph(e,t,n){var l=t.pendingProps,a=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(St){if(l.mode==="hidden")return e=Gc(t,l),t.lanes=536870912,Ws(null,e);if(Wt(t),(e=Zt)?(e=pp(e,yl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ua!==null?{id:Dn,overflow:pl}:null,retryLane:536870912,hydrationErrors:null},n=Wa(e),n.return=t,t.child=n,vn=t,Zt=null)):e=null,e===null)throw Ra(t);return t.lanes=536870912,null}return Gc(t,l)}var i=e.memoizedState;if(i!==null){var r=i.dehydrated;if(Wt(t),a)if(t.flags&256)t.flags&=-257,t=td(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(S(558));else if(wn||to(e,t,n,!1),a=(n&e.childLanes)!==0,wn||a){if(l=Qt,l!==null&&(r=Cl(l,n),r!==0&&r!==i.retryLane))throw i.retryLane=r,Da(e,r),vl(l,e,r),Fr;er(),t=td(e,t,n)}else e=i.treeContext,Zt=Gl(r.nextSibling),vn=t,St=!0,hl=null,yl=!1,e!==null&&mi(t,e),t=Gc(t,l),t.flags|=4096;return t}return e=ll(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ic(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(S(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Kr(e,t,n,l,a){return sl(t),n=Nr(e,t,n,l,void 0,a),l=Rr(),e!==null&&!wn?(Mr(e,t,a),io(e,t,a)):(St&&l&&Xs(t),t.flags|=1,Vn(e,t,n,a),t.child)}function nd(e,t,n,l,a,i){return sl(t),t.updateQueue=null,n=af(t,l,n,a),lf(e),l=Rr(),e!==null&&!wn?(Mr(e,t,i),io(e,t,i)):(St&&l&&Xs(t),t.flags|=1,Vn(e,t,n,i),t.child)}function ld(e,t,n,l,a){if(sl(t),t.stateNode===null){var i=Na,r=n.contextType;typeof r=="object"&&r!==null&&(i=Sn(r)),i=new n(l,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Pr,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=l,i.state=t.memoizedState,i.refs={},Se(t),r=n.contextType,i.context=typeof r=="object"&&r!==null?Sn(r):Na,i.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(Zr(t,n,r,l),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(r=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),r!==i.state&&Pr.enqueueReplaceState(i,i.state,null),B(t,l,i,a),U(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){i=t.stateNode;var h=t.memoizedProps,C=Ti(n,h);i.props=C;var V=i.context,ie=n.contextType;r=Na,typeof ie=="object"&&ie!==null&&(r=Sn(ie));var pe=n.getDerivedStateFromProps;ie=typeof pe=="function"||typeof i.getSnapshotBeforeUpdate=="function",h=t.pendingProps!==h,ie||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(h||V!==r)&&Gf(t,i,l,r),Q=!1;var G=t.memoizedState;i.state=G,B(t,l,i,a),U(),V=t.memoizedState,h||G!==V||Q?(typeof pe=="function"&&(Zr(t,n,pe,l),V=t.memoizedState),(C=Q||Xf(t,n,C,l,G,V,r))?(ie||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=V),i.props=l,i.state=V,i.context=r,l=C):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,ee(e,t),r=t.memoizedProps,ie=Ti(n,r),i.props=ie,pe=t.pendingProps,G=i.context,V=n.contextType,C=Na,typeof V=="object"&&V!==null&&(C=Sn(V)),h=n.getDerivedStateFromProps,(V=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r!==pe||G!==C)&&Gf(t,i,l,C),Q=!1,G=t.memoizedState,i.state=G,B(t,l,i,a),U();var W=t.memoizedState;r!==pe||G!==W||Q||e!==null&&e.dependencies!==null&&da(e.dependencies)?(typeof h=="function"&&(Zr(t,n,h,l),W=t.memoizedState),(ie=Q||Xf(t,n,ie,l,G,W,C)||e!==null&&e.dependencies!==null&&da(e.dependencies))?(V||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,W,C),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,W,C)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=W),i.props=l,i.state=W,i.context=C,l=ie):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),l=!1)}return i=l,Ic(e,t),l=(t.flags&128)!==0,i||l?(i=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&l?(t.child=b(t,e.child,null,a),t.child=b(t,null,n,a)):Vn(e,t,n,a),t.memoizedState=i.state,e=t.child):e=io(e,t,a),e}function ad(e,t,n,l){return eo(),t.flags|=256,Vn(e,t,n,l),t.child}var Wr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jr(e){return{baseLanes:e,cachePool:Bo()}}function eu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Rl),e}function od(e,t,n){var l=t.pendingProps,a=!1,i=(t.flags&128)!==0,r;if((r=i)||(r=e!==null&&e.memoizedState===null?!1:(Pe.current&2)!==0),r&&(a=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(St){if(a?ft(t):Oe(),(e=Zt)?(e=pp(e,yl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ua!==null?{id:Dn,overflow:pl}:null,retryLane:536870912,hydrationErrors:null},n=Wa(e),n.return=t,t.child=n,vn=t,Zt=null)):e=null,e===null)throw Ra(t);return Ou(e)?t.lanes=32:t.lanes=536870912,null}var h=l.children;return l=l.fallback,a?(Oe(),a=t.mode,h=qc({mode:"hidden",children:h},a),l=Qn(l,a,n,null),h.return=t,l.return=t,h.sibling=l,t.child=h,l=t.child,l.memoizedState=Jr(n),l.childLanes=eu(e,r,n),t.memoizedState=Wr,Ws(null,l)):(ft(t),tu(t,h))}var C=e.memoizedState;if(C!==null&&(h=C.dehydrated,h!==null)){if(i)t.flags&256?(ft(t),t.flags&=-257,t=nu(e,t,n)):t.memoizedState!==null?(Oe(),t.child=e.child,t.flags|=128,t=null):(Oe(),h=l.fallback,a=t.mode,l=qc({mode:"visible",children:l.children},a),h=Qn(h,a,n,null),h.flags|=2,l.return=t,h.return=t,l.sibling=h,t.child=l,b(t,e.child,null,n),l=t.child,l.memoizedState=Jr(n),l.childLanes=eu(e,r,n),t.memoizedState=Wr,t=Ws(null,l));else if(ft(t),Ou(h)){if(r=h.nextSibling&&h.nextSibling.dataset,r)var V=r.dgst;r=V,l=Error(S(419)),l.stack="",l.digest=r,bi({value:l,source:null,stack:null}),t=nu(e,t,n)}else if(wn||to(e,t,n,!1),r=(n&e.childLanes)!==0,wn||r){if(r=Qt,r!==null&&(l=Cl(r,n),l!==0&&l!==C.retryLane))throw C.retryLane=l,Da(e,l),vl(r,e,l),Fr;Bu(h)||er(),t=nu(e,t,n)}else Bu(h)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,Zt=Gl(h.nextSibling),vn=t,St=!0,hl=null,yl=!1,e!==null&&mi(t,e),t=tu(t,l.children),t.flags|=4096);return t}return a?(Oe(),h=l.fallback,a=t.mode,C=e.child,V=C.sibling,l=ll(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,V!==null?h=ll(V,h):(h=Qn(h,a,n,null),h.flags|=2),h.return=t,l.return=t,l.sibling=h,t.child=l,Ws(null,l),l=t.child,h=e.child.memoizedState,h===null?h=Jr(n):(a=h.cachePool,a!==null?(C=sn._currentValue,a=a.parent!==C?{parent:C,pool:C}:a):a=Bo(),h={baseLanes:h.baseLanes|n,cachePool:a}),l.memoizedState=h,l.childLanes=eu(e,r,n),t.memoizedState=Wr,Ws(e.child,l)):(ft(t),n=e.child,e=n.sibling,n=ll(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function tu(e,t){return t=qc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function qc(e,t){return e=Pn(22,e,null,t),e.lanes=0,e}function nu(e,t,n){return b(t,e.child,null,n),e=tu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function id(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Mo(e.return,t,n)}function lu(e,t,n,l,a,i){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:a,treeForkCount:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=n,r.tailMode=a,r.treeForkCount=i)}function sd(e,t,n){var l=t.pendingProps,a=l.revealOrder,i=l.tail;l=l.children;var r=Pe.current,h=(r&2)!==0;if(h?(r=r&1|2,t.flags|=128):r&=1,ce(Pe,r),Vn(e,t,l,n),l=St?Yl:0,!h&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&id(e,n,t);else if(e.tag===19)id(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&zt(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),lu(t,!1,a,n,i,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&zt(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}lu(t,!0,n,null,i,l);break;case"together":lu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function io(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vo|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(to(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(S(153));if(t.child!==null){for(e=t.child,n=ll(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ll(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function au(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&da(e)))}function hh(e,t,n){switch(t.tag){case 3:Ke(t,t.stateNode.containerInfo),Ma(t,sn,e.memoizedState.cache),eo();break;case 27:case 5:hn(t);break;case 4:Ke(t,t.stateNode.containerInfo);break;case 10:Ma(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Wt(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(ft(t),t.flags|=128,null):(n&t.child.childLanes)!==0?od(e,t,n):(ft(t),e=io(e,t,n),e!==null?e.sibling:null);ft(t);break;case 19:var a=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(to(e,t,n,!1),l=(n&t.childLanes)!==0),a){if(l)return sd(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ce(Pe,Pe.current),l)break;return null;case 22:return t.lanes=0,Jf(e,t,n,t.pendingProps);case 24:Ma(t,sn,e.memoizedState.cache)}return io(e,t,n)}function cd(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)wn=!0;else{if(!au(e,n)&&(t.flags&128)===0)return wn=!1,hh(e,t,n);wn=(e.flags&131072)!==0}else wn=!1,St&&(t.flags&1048576)!==0&&Nc(t,Yl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=ao(t.elementType),t.type=e,typeof e=="function")Zi(e)?(l=Ti(e,l),t.tag=1,t=ld(null,t,e,l,n)):(t.tag=0,t=Kr(null,t,e,l,n));else{if(e!=null){var a=e.$$typeof;if(a===He){t.tag=11,t=Ff(null,t,e,l,n);break e}else if(a===fe){t.tag=14,t=Kf(null,t,e,l,n);break e}}throw t=gt(e)||e,Error(S(306,t,""))}}return t;case 0:return Kr(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,a=Ti(l,t.pendingProps),ld(e,t,l,a,n);case 3:e:{if(Ke(t,t.stateNode.containerInfo),e===null)throw Error(S(387));l=t.pendingProps;var i=t.memoizedState;a=i.element,ee(e,t),B(t,l,null,n);var r=t.memoizedState;if(l=r.cache,Ma(t,sn,l),l!==i.cache&&Xl(t,[sn],n,!0),U(),l=r.element,i.isDehydrated)if(i={element:l,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=ad(e,t,l,n);break e}else if(l!==a){a=ol(Error(S(424)),t),bi(a),t=ad(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Zt=Gl(e.firstChild),vn=t,St=!0,hl=null,yl=!0,n=te(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(eo(),l===a){t=io(e,t,n);break e}Vn(e,t,l,n)}t=t.child}return t;case 26:return Ic(e,t),e===null?(n=bp(t.type,null,t.pendingProps,null))?t.memoizedState=n:St||(n=t.type,e=t.pendingProps,l=sr(Ve.current).createElement(n),l[gn]=t,l[on]=e,Xn(l,n,e),un(l),t.stateNode=l):t.memoizedState=bp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return hn(t),e===null&&St&&(l=t.stateNode=gp(t.type,t.pendingProps,Ve.current),vn=t,yl=!0,a=Zt,$o(t.type)?(Uu=a,Zt=Gl(l.firstChild)):Zt=a),Vn(e,t,t.pendingProps.children,n),Ic(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&St&&((a=l=Zt)&&(l=Ih(l,t.type,t.pendingProps,yl),l!==null?(t.stateNode=l,vn=t,Zt=Gl(l.firstChild),yl=!1,a=!0):a=!1),a||Ra(t)),hn(t),a=t.type,i=t.pendingProps,r=e!==null?e.memoizedProps:null,l=i.children,Ru(a,i)?l=null:r!==null&&Ru(a,r)&&(t.flags|=32),t.memoizedState!==null&&(a=Nr(e,t,oh,null,null,n),pc._currentValue=a),Ic(e,t),Vn(e,t,l,n),t.child;case 6:return e===null&&St&&((e=n=Zt)&&(n=qh(n,t.pendingProps,yl),n!==null?(t.stateNode=n,vn=t,Zt=null,e=!0):e=!1),e||Ra(t)),null;case 13:return od(e,t,n);case 4:return Ke(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=b(t,null,l,n):Vn(e,t,l,n),t.child;case 11:return Ff(e,t,t.type,t.pendingProps,n);case 7:return Vn(e,t,t.pendingProps,n),t.child;case 8:return Vn(e,t,t.pendingProps.children,n),t.child;case 12:return Vn(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,Ma(t,t.type,l.value),Vn(e,t,l.children,n),t.child;case 9:return a=t.type._context,l=t.pendingProps.children,sl(t),a=Sn(a),l=l(a),t.flags|=1,Vn(e,t,l,n),t.child;case 14:return Kf(e,t,t.type,t.pendingProps,n);case 15:return Wf(e,t,t.type,t.pendingProps,n);case 19:return sd(e,t,n);case 31:return ph(e,t,n);case 22:return Jf(e,t,n,t.pendingProps);case 24:return sl(t),l=Sn(sn),e===null?(a=Zs(),a===null&&(a=Qt,i=no(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:l,cache:a},Se(t),Ma(t,sn,a)):((e.lanes&n)!==0&&(ee(e,t),B(t,null,null,n),U()),a=e.memoizedState,i=t.memoizedState,a.parent!==l?(a={parent:l,cache:l},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ma(t,sn,l)):(l=i.cache,Ma(t,sn,l),l!==a.cache&&Xl(t,[sn],n,!0))),Vn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(S(156,t.tag))}function so(e){e.flags|=4}function ou(e,t,n,l,a){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(a&335544128)===a)if(e.stateNode.complete)e.flags|=8192;else if(Bd())e.flags|=8192;else throw o=Lo,Oo}else e.flags&=-16777217}function rd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tp(t))if(Bd())e.flags|=8192;else throw o=Lo,Oo}function $c(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ys():536870912,e.lanes|=t,as|=t)}function Js(e,t){if(!St)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function en(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,l|=a.subtreeFlags&65011712,l|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,l|=a.subtreeFlags,l|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function yh(e,t,n){var l=t.pendingProps;switch(Gs(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(t),null;case 1:return en(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),fa(sn),lt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ja(t)?so(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ki())),en(t),null;case 26:var a=t.type,i=t.memoizedState;return e===null?(so(t),i!==null?(en(t),rd(t,i)):(en(t),ou(t,a,null,l,n))):i?i!==e.memoizedState?(so(t),en(t),rd(t,i)):(en(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&so(t),en(t),ou(t,a,e,l,n)),null;case 27:if(Jt(t),n=Ve.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&so(t);else{if(!l){if(t.stateNode===null)throw Error(S(166));return en(t),null}e=Ce.current,Ja(t)?Qi(t):(e=gp(a,l,n),t.stateNode=e,so(t))}return en(t),null;case 5:if(Jt(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&so(t);else{if(!l){if(t.stateNode===null)throw Error(S(166));return en(t),null}if(i=Ce.current,Ja(t))Qi(t);else{var r=sr(Ve.current);switch(i){case 1:i=r.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=r.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=r.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof l.is=="string"?r.createElement("select",{is:l.is}):r.createElement("select"),l.multiple?i.multiple=!0:l.size&&(i.size=l.size);break;default:i=typeof l.is=="string"?r.createElement(a,{is:l.is}):r.createElement(a)}}i[gn]=t,i[on]=l;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)i.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=i;e:switch(Xn(i,a,l),a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&so(t)}}return en(t),ou(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&so(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(S(166));if(e=Ve.current,Ja(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,a=vn,a!==null)switch(a.tag){case 27:case 5:l=a.memoizedProps}e[gn]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||op(e.nodeValue,n)),e||Ra(t,!0)}else e=sr(e).createTextNode(l),e[gn]=t,t.stateNode=e}return en(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ja(t),n!==null){if(e===null){if(!l)throw Error(S(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(S(557));e[gn]=t}else eo(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;en(t),e=!1}else n=Ki(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Je(t),t):(Je(t),null);if((t.flags&128)!==0)throw Error(S(558))}return en(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ja(t),l!==null&&l.dehydrated!==null){if(e===null){if(!a)throw Error(S(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(S(317));a[gn]=t}else eo(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;en(t),a=!1}else a=Ki(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(Je(t),t):(Je(t),null)}return Je(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,a=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(a=l.alternate.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==a&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),$c(t,t.updateQueue),en(t),null);case 4:return lt(),e===null&&Eu(t.stateNode.containerInfo),en(t),null;case 10:return fa(t.type),en(t),null;case 19:if(R(Pe),l=t.memoizedState,l===null)return en(t),null;if(a=(t.flags&128)!==0,i=l.rendering,i===null)if(a)Js(l,!1);else{if(rn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=zt(e),i!==null){for(t.flags|=128,Js(l,!1),e=i.updateQueue,t.updateQueue=e,$c(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Dc(n,e),n=n.sibling;return ce(Pe,Pe.current&1|2),St&&Vl(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Ae()>Kc&&(t.flags|=128,a=!0,Js(l,!1),t.lanes=4194304)}else{if(!a)if(e=zt(i),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,$c(t,e),Js(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!St)return en(t),null}else 2*Ae()-l.renderingStartTime>Kc&&n!==536870912&&(t.flags|=128,a=!0,Js(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(e=l.last,e!==null?e.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ae(),e.sibling=null,n=Pe.current,ce(Pe,a?n&1|2:n&1),St&&Vl(t,l.treeForkCount),e):(en(t),null);case 22:case 23:return Je(t),Xe(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(en(t),t.subtreeFlags&6&&(t.flags|=8192)):en(t),n=t.updateQueue,n!==null&&$c(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&R(ha),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),fa(sn),en(t),null;case 25:return null;case 30:return null}throw Error(S(156,t.tag))}function gh(e,t){switch(Gs(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fa(sn),lt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Jt(t),null;case 31:if(t.memoizedState!==null){if(Je(t),t.alternate===null)throw Error(S(340));eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Je(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(S(340));eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return R(Pe),null;case 4:return lt(),null;case 10:return fa(t.type),null;case 22:case 23:return Je(t),Xe(),e!==null&&R(ha),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return fa(sn),null;case 25:return null;default:return null}}function ud(e,t){switch(Gs(t),t.tag){case 3:fa(sn),lt();break;case 26:case 27:case 5:Jt(t);break;case 4:lt();break;case 31:t.memoizedState!==null&&Je(t);break;case 13:Je(t);break;case 19:R(Pe);break;case 10:fa(t.type);break;case 22:case 23:Je(t),Xe(),e!==null&&R(ha);break;case 24:fa(sn)}}function ec(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var a=l.next;n=a;do{if((n.tag&e)===e){l=void 0;var i=n.create,r=n.inst;l=i(),r.destroy=l}n=n.next}while(n!==a)}}catch(h){Ht(t,t.return,h)}}function Ho(e,t,n){try{var l=t.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var i=a.next;l=i;do{if((l.tag&e)===e){var r=l.inst,h=r.destroy;if(h!==void 0){r.destroy=void 0,a=t;var C=n,V=h;try{V()}catch(ie){Ht(a,C,ie)}}}l=l.next}while(l!==i)}}catch(ie){Ht(t,t.return,ie)}}function fd(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{D(t,n)}catch(l){Ht(e,e.return,l)}}}function dd(e,t,n){n.props=Ti(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Ht(e,t,l)}}function tc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(a){Ht(e,t,a)}}function Ba(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(a){Ht(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Ht(e,t,a)}else n.current=null}function pd(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(a){Ht(e,e.return,a)}}function iu(e,t,n){try{var l=e.stateNode;Lh(l,e.type,n,t),l[on]=t}catch(a){Ht(e,e.return,a)}}function hd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$o(e.type)||e.tag===4}function su(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$o(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cu(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ql));else if(l!==4&&(l===27&&$o(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(cu(e,t,n),e=e.sibling;e!==null;)cu(e,t,n),e=e.sibling}function Zc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&$o(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function yd(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Xn(t,l,n),t[gn]=e,t[on]=n}catch(i){Ht(e,e.return,i)}}var co=!1,Tn=!1,ru=!1,gd=typeof WeakSet=="function"?WeakSet:Set,_n=null;function mh(e,t){if(e=e.containerInfo,Du=hr,e=Us(e),Ao(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var a=l.anchorOffset,i=l.focusNode;l=l.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var r=0,h=-1,C=-1,V=0,ie=0,pe=e,G=null;t:for(;;){for(var W;pe!==n||a!==0&&pe.nodeType!==3||(h=r+a),pe!==i||l!==0&&pe.nodeType!==3||(C=r+l),pe.nodeType===3&&(r+=pe.nodeValue.length),(W=pe.firstChild)!==null;)G=pe,pe=W;for(;;){if(pe===e)break t;if(G===n&&++V===a&&(h=r),G===i&&++ie===l&&(C=r),(W=pe.nextSibling)!==null)break;pe=G,G=pe.parentNode}pe=W}n=h===-1||C===-1?null:{start:h,end:C}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nu={focusedElem:e,selectionRange:n},hr=!1,_n=t;_n!==null;)if(t=_n,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_n=e;else for(;_n!==null;){switch(t=_n,i=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,l=n.stateNode;try{var Re=Ti(n.type,a);e=l.getSnapshotBeforeUpdate(Re,i),l.__reactInternalSnapshotBeforeUpdate=e}catch(Fe){Ht(n,n.return,Fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)_u(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_u(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(S(163))}if(e=t.sibling,e!==null){e.return=t.return,_n=e;break}_n=t.return}}function md(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:uo(e,n),l&4&&ec(5,n);break;case 1:if(uo(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){Ht(n,n.return,r)}else{var a=Ti(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Ht(n,n.return,r)}}l&64&&fd(n),l&512&&tc(n,n.return);break;case 3:if(uo(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{D(e,t)}catch(r){Ht(n,n.return,r)}}break;case 27:t===null&&l&4&&yd(n);case 26:case 5:uo(e,n),t===null&&l&4&&pd(n),l&512&&tc(n,n.return);break;case 12:uo(e,n);break;case 31:uo(e,n),l&4&&vd(e,n);break;case 13:uo(e,n),l&4&&Sd(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=jh.bind(null,n),$h(e,n))));break;case 22:if(l=n.memoizedState!==null||co,!l){t=t!==null&&t.memoizedState!==null||Tn,a=co;var i=Tn;co=l,(Tn=t)&&!i?fo(e,n,(n.subtreeFlags&8772)!==0):uo(e,n),co=a,Tn=i}break;case 30:break;default:uo(e,n)}}function xd(e){var t=e.alternate;t!==null&&(e.alternate=null,xd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&xa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nn=null,gl=!1;function ro(e,t,n){for(n=n.child;n!==null;)bd(e,t,n),n=n.sibling}function bd(e,t,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(mo,n)}catch{}switch(n.tag){case 26:Tn||Ba(n,t),ro(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Tn||Ba(n,t);var l=nn,a=gl;$o(n.type)&&(nn=n.stateNode,gl=!1),ro(e,t,n),uc(n.stateNode),nn=l,gl=a;break;case 5:Tn||Ba(n,t);case 6:if(l=nn,a=gl,nn=null,ro(e,t,n),nn=l,gl=a,nn!==null)if(gl)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(n.stateNode)}catch(i){Ht(n,t,i)}else try{nn.removeChild(n.stateNode)}catch(i){Ht(n,t,i)}break;case 18:nn!==null&&(gl?(e=nn,fp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ds(e)):fp(nn,n.stateNode));break;case 4:l=nn,a=gl,nn=n.stateNode.containerInfo,gl=!0,ro(e,t,n),nn=l,gl=a;break;case 0:case 11:case 14:case 15:Ho(2,n,t),Tn||Ho(4,n,t),ro(e,t,n);break;case 1:Tn||(Ba(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&dd(n,t,l)),ro(e,t,n);break;case 21:ro(e,t,n);break;case 22:Tn=(l=Tn)||n.memoizedState!==null,ro(e,t,n),Tn=l;break;default:ro(e,t,n)}}function vd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ds(e)}catch(n){Ht(t,t.return,n)}}}function Sd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ds(e)}catch(n){Ht(t,t.return,n)}}function xh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new gd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new gd),t;default:throw Error(S(435,e.tag))}}function Pc(e,t){var n=xh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var a=Eh.bind(null,e,l);l.then(a,a)}})}function ml(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var a=n[l],i=e,r=t,h=r;e:for(;h!==null;){switch(h.tag){case 27:if($o(h.type)){nn=h.stateNode,gl=!1;break e}break;case 5:nn=h.stateNode,gl=!1;break e;case 3:case 4:nn=h.stateNode.containerInfo,gl=!0;break e}h=h.return}if(nn===null)throw Error(S(160));bd(i,r,a),nn=null,gl=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Cd(t,e),t=t.sibling}var ya=null;function Cd(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ml(t,e),xl(e),l&4&&(Ho(3,e,e.return),ec(3,e),Ho(5,e,e.return));break;case 1:ml(t,e),xl(e),l&512&&(Tn||n===null||Ba(n,n.return)),l&64&&co&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var a=ya;if(ml(t,e),xl(e),l&512&&(Tn||n===null||Ba(n,n.return)),l&4){var i=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(l){case"title":i=a.getElementsByTagName("title")[0],(!i||i[Ul]||i[gn]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(l),a.head.insertBefore(i,a.querySelector("head > title"))),Xn(i,l,n),i[gn]=e,un(i),l=i;break e;case"link":var r=Cp("link","href",a).get(l+(n.href||""));if(r){for(var h=0;h<r.length;h++)if(i=r[h],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(h,1);break t}}i=a.createElement(l),Xn(i,l,n),a.head.appendChild(i);break;case"meta":if(r=Cp("meta","content",a).get(l+(n.content||""))){for(h=0;h<r.length;h++)if(i=r[h],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(h,1);break t}}i=a.createElement(l),Xn(i,l,n),a.head.appendChild(i);break;default:throw Error(S(468,l))}i[gn]=e,un(i),l=i}e.stateNode=l}else wp(a,e.type,e.stateNode);else e.stateNode=Sp(a,l,e.memoizedProps);else i!==l?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,l===null?wp(a,e.type,e.stateNode):Sp(a,l,e.memoizedProps)):l===null&&e.stateNode!==null&&iu(e,e.memoizedProps,n.memoizedProps)}break;case 27:ml(t,e),xl(e),l&512&&(Tn||n===null||Ba(n,n.return)),n!==null&&l&4&&iu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ml(t,e),xl(e),l&512&&(Tn||n===null||Ba(n,n.return)),e.flags&32){a=e.stateNode;try{ba(a,"")}catch(Re){Ht(e,e.return,Re)}}l&4&&e.stateNode!=null&&(a=e.memoizedProps,iu(e,a,n!==null?n.memoizedProps:a)),l&1024&&(ru=!0);break;case 6:if(ml(t,e),xl(e),l&4){if(e.stateNode===null)throw Error(S(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(Re){Ht(e,e.return,Re)}}break;case 3:if(ur=null,a=ya,ya=cr(t.containerInfo),ml(t,e),ya=a,xl(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{ds(t.containerInfo)}catch(Re){Ht(e,e.return,Re)}ru&&(ru=!1,wd(e));break;case 4:l=ya,ya=cr(e.stateNode.containerInfo),ml(t,e),xl(e),ya=l;break;case 12:ml(t,e),xl(e);break;case 31:ml(t,e),xl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pc(e,l)));break;case 13:ml(t,e),xl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Fc=Ae()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pc(e,l)));break;case 22:a=e.memoizedState!==null;var C=n!==null&&n.memoizedState!==null,V=co,ie=Tn;if(co=V||a,Tn=ie||C,ml(t,e),Tn=ie,co=V,xl(e),l&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||C||co||Tn||zi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){C=n=t;try{if(i=C.stateNode,a)r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{h=C.stateNode;var pe=C.memoizedProps.style,G=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;h.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Re){Ht(C,C.return,Re)}}}else if(t.tag===6){if(n===null){C=t;try{C.stateNode.nodeValue=a?"":C.memoizedProps}catch(Re){Ht(C,C.return,Re)}}}else if(t.tag===18){if(n===null){C=t;try{var W=C.stateNode;a?dp(W,!0):dp(C.stateNode,!1)}catch(Re){Ht(C,C.return,Re)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Pc(e,n))));break;case 19:ml(t,e),xl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Pc(e,l)));break;case 30:break;case 21:break;default:ml(t,e),xl(e)}}function xl(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(hd(l)){n=l;break}l=l.return}if(n==null)throw Error(S(160));switch(n.tag){case 27:var a=n.stateNode,i=su(e);Zc(e,i,a);break;case 5:var r=n.stateNode;n.flags&32&&(ba(r,""),n.flags&=-33);var h=su(e);Zc(e,h,r);break;case 3:case 4:var C=n.stateNode.containerInfo,V=su(e);cu(e,V,C);break;default:throw Error(S(161))}}catch(ie){Ht(e,e.return,ie)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;wd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function uo(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)md(e,t.alternate,t),t=t.sibling}function zi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ho(4,t,t.return),zi(t);break;case 1:Ba(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&dd(t,t.return,n),zi(t);break;case 27:uc(t.stateNode);case 26:case 5:Ba(t,t.return),zi(t);break;case 22:t.memoizedState===null&&zi(t);break;case 30:zi(t);break;default:zi(t)}e=e.sibling}}function fo(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,a=e,i=t,r=i.flags;switch(i.tag){case 0:case 11:case 15:fo(a,i,n),ec(4,i);break;case 1:if(fo(a,i,n),l=i,a=l.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(V){Ht(l,l.return,V)}if(l=i,a=l.updateQueue,a!==null){var h=l.stateNode;try{var C=a.shared.hiddenCallbacks;if(C!==null)for(a.shared.hiddenCallbacks=null,a=0;a<C.length;a++)se(C[a],h)}catch(V){Ht(l,l.return,V)}}n&&r&64&&fd(i),tc(i,i.return);break;case 27:yd(i);case 26:case 5:fo(a,i,n),n&&l===null&&r&4&&pd(i),tc(i,i.return);break;case 12:fo(a,i,n);break;case 31:fo(a,i,n),n&&r&4&&vd(a,i);break;case 13:fo(a,i,n),n&&r&4&&Sd(a,i);break;case 22:i.memoizedState===null&&fo(a,i,n),tc(i,i.return);break;case 30:break;default:fo(a,i,n)}t=t.sibling}}function uu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ci(n))}function fu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ci(e))}function ga(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Td(e,t,n,l),t=t.sibling}function Td(e,t,n,l){var a=t.flags;switch(t.tag){case 0:case 11:case 15:ga(e,t,n,l),a&2048&&ec(9,t);break;case 1:ga(e,t,n,l);break;case 3:ga(e,t,n,l),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ci(e)));break;case 12:if(a&2048){ga(e,t,n,l),e=t.stateNode;try{var i=t.memoizedProps,r=i.id,h=i.onPostCommit;typeof h=="function"&&h(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Ht(t,t.return,C)}}else ga(e,t,n,l);break;case 31:ga(e,t,n,l);break;case 13:ga(e,t,n,l);break;case 23:break;case 22:i=t.stateNode,r=t.alternate,t.memoizedState!==null?i._visibility&2?ga(e,t,n,l):nc(e,t):i._visibility&2?ga(e,t,n,l):(i._visibility|=2,ts(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),a&2048&&uu(r,t);break;case 24:ga(e,t,n,l),a&2048&&fu(t.alternate,t);break;default:ga(e,t,n,l)}}function ts(e,t,n,l,a){for(a=a&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,r=t,h=n,C=l,V=r.flags;switch(r.tag){case 0:case 11:case 15:ts(i,r,h,C,a),ec(8,r);break;case 23:break;case 22:var ie=r.stateNode;r.memoizedState!==null?ie._visibility&2?ts(i,r,h,C,a):nc(i,r):(ie._visibility|=2,ts(i,r,h,C,a)),a&&V&2048&&uu(r.alternate,r);break;case 24:ts(i,r,h,C,a),a&&V&2048&&fu(r.alternate,r);break;default:ts(i,r,h,C,a)}t=t.sibling}}function nc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,a=l.flags;switch(l.tag){case 22:nc(n,l),a&2048&&uu(l.alternate,l);break;case 24:nc(n,l),a&2048&&fu(l.alternate,l);break;default:nc(n,l)}t=t.sibling}}var lc=8192;function ns(e,t,n){if(e.subtreeFlags&lc)for(e=e.child;e!==null;)zd(e,t,n),e=e.sibling}function zd(e,t,n){switch(e.tag){case 26:ns(e,t,n),e.flags&lc&&e.memoizedState!==null&&ay(n,ya,e.memoizedState,e.memoizedProps);break;case 5:ns(e,t,n);break;case 3:case 4:var l=ya;ya=cr(e.stateNode.containerInfo),ns(e,t,n),ya=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=lc,lc=16777216,ns(e,t,n),lc=l):ns(e,t,n));break;default:ns(e,t,n)}}function jd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ac(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];_n=l,kd(l,e)}jd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ed(e),e=e.sibling}function Ed(e){switch(e.tag){case 0:case 11:case 15:ac(e),e.flags&2048&&Ho(9,e,e.return);break;case 3:ac(e);break;case 12:ac(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Qc(e)):ac(e);break;default:ac(e)}}function Qc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];_n=l,kd(l,e)}jd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ho(8,t,t.return),Qc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Qc(t));break;default:Qc(t)}e=e.sibling}}function kd(e,t){for(;_n!==null;){var n=_n;switch(n.tag){case 0:case 11:case 15:Ho(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ci(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,_n=l;else e:for(n=e;_n!==null;){l=_n;var a=l.sibling,i=l.return;if(xd(l),l===n){_n=null;break e}if(a!==null){a.return=i,_n=a;break e}_n=i}}}var bh={getCacheForType:function(e){var t=Sn(sn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Sn(sn).controller.signal}},vh=typeof WeakMap=="function"?WeakMap:Map,Ot=0,Qt=null,wt=null,jt=0,Lt=0,Nl=null,Yo=!1,ls=!1,du=!1,po=0,rn=0,Vo=0,ji=0,pu=0,Rl=0,as=0,oc=null,bl=null,hu=!1,Fc=0,Ad=0,Kc=1/0,Wc=null,Xo=null,Nn=0,Go=null,os=null,ho=0,yu=0,gu=null,Dd=null,ic=0,mu=null;function Ml(){return(Ot&2)!==0&&jt!==0?jt&-jt:H.T!==null?wu():qt()}function Nd(){if(Rl===0)if((jt&536870912)===0||St){var e=Qe;Qe<<=1,(Qe&3932160)===0&&(Qe=262144),Rl=e}else Rl=536870912;return e=Ee.current,e!==null&&(e.flags|=32),Rl}function vl(e,t,n){(e===Qt&&(Lt===2||Lt===9)||e.cancelPendingCommit!==null)&&(is(e,0),Io(e,jt,Rl,!1)),Vt(e,n),((Ot&2)===0||e!==Qt)&&(e===Qt&&((Ot&2)===0&&(ji|=n),rn===4&&Io(e,jt,Rl,!1)),Oa(e))}function Rd(e,t,n){if((Ot&6)!==0)throw Error(S(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||xo(e,t),a=l?wh(e,t):bu(e,t,!0),i=l;do{if(a===0){ls&&!l&&Io(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!Sh(n)){a=bu(e,t,!1),i=!1;continue}if(a===2){if(i=t,e.errorRecoveryDisabledLanes&i)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var h=e;a=oc;var C=h.current.memoizedState.isDehydrated;if(C&&(is(h,r).flags|=256),r=bu(h,r,!1),r!==2){if(du&&!C){h.errorRecoveryDisabledLanes|=i,ji|=i,a=4;break e}i=bl,bl=a,i!==null&&(bl===null?bl=i:bl.push.apply(bl,i))}a=r}if(i=!1,a!==2)continue}}if(a===1){is(e,0),Io(e,t,0,!0);break}e:{switch(l=e,i=a,i){case 0:case 1:throw Error(S(345));case 4:if((t&4194048)!==t)break;case 6:Io(l,t,Rl,!Yo);break e;case 2:bl=null;break;case 3:case 5:break;default:throw Error(S(329))}if((t&62914560)===t&&(a=Fc+300-Ae(),10<a)){if(Io(l,t,Rl,!Yo),Wn(l,0,!0)!==0)break e;ho=t,l.timeoutHandle=rp(Md.bind(null,l,n,bl,Wc,hu,t,Rl,ji,as,Yo,i,"Throttled",-0,0),a);break e}Md(l,n,bl,Wc,hu,t,Rl,ji,as,Yo,i,null,-0,0)}}break}while(!0);Oa(e)}function Md(e,t,n,l,a,i,r,h,C,V,ie,pe,G,W){if(e.timeoutHandle=-1,pe=t.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ql},zd(t,i,pe);var Re=(i&62914560)===i?Fc-Ae():(i&4194048)===i?Ad-Ae():0;if(Re=oy(pe,Re),Re!==null){ho=i,e.cancelPendingCommit=Re(Vd.bind(null,e,t,i,n,l,a,r,h,C,ie,pe,null,G,W)),Io(e,i,r,!V);return}}Vd(e,t,i,n,l,a,r,h,C)}function Sh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var a=n[l],i=a.getSnapshot;a=a.value;try{if(!nl(i(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Io(e,t,n,l){t&=~pu,t&=~ji,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var a=t;0<a;){var i=31-Rn(a),r=1<<i;l[i]=-1,a&=~r}n!==0&&Jn(e,n,t)}function Jc(){return(Ot&6)===0?(sc(0),!1):!0}function xu(){if(wt!==null){if(Lt===0)var e=wt.return;else e=wt,Hn=Al=null,_r(e),p=null,g=0,e=wt;for(;e!==null;)ud(e.alternate,e),e=e.return;wt=null}}function is(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Vh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),ho=0,xu(),Qt=e,wt=n=ll(e.current,null),jt=t,Lt=0,Nl=null,Yo=!1,ls=xo(e,t),du=!1,as=Rl=pu=ji=Vo=rn=0,bl=oc=null,hu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var a=31-Rn(l),i=1<<a;t|=e[a],l&=~i}return po=t,Pa(),n}function _d(e,t){_e=null,H.H=Ks,t===Dl||t===Uo?(t=c(),Lt=3):t===Oo?(t=c(),Lt=4):Lt=t===Fr?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Nl=t,wt===null&&(rn=1,Xc(e,ol(t,e.current)))}function Bd(){var e=Ee.current;return e===null?!0:(jt&4194048)===jt?Be===null:(jt&62914560)===jt||(jt&536870912)!==0?e===Be:!1}function Od(){var e=H.H;return H.H=Ks,e===null?Ks:e}function Ud(){var e=H.A;return H.A=bh,e}function er(){rn=4,Yo||(jt&4194048)!==jt&&Ee.current!==null||(ls=!0),(Vo&134217727)===0&&(ji&134217727)===0||Qt===null||Io(Qt,jt,Rl,!1)}function bu(e,t,n){var l=Ot;Ot|=2;var a=Od(),i=Ud();(Qt!==e||jt!==t)&&(Wc=null,is(e,t)),t=!1;var r=rn;e:do try{if(Lt!==0&&wt!==null){var h=wt,C=Nl;switch(Lt){case 8:xu(),r=6;break e;case 3:case 2:case 9:case 6:Ee.current===null&&(t=!0);var V=Lt;if(Lt=0,Nl=null,ss(e,h,C,V),n&&ls){r=0;break e}break;default:V=Lt,Lt=0,Nl=null,ss(e,h,C,V)}}Ch(),r=rn;break}catch(ie){_d(e,ie)}while(!0);return t&&e.shellSuspendCounter++,Hn=Al=null,Ot=l,H.H=a,H.A=i,wt===null&&(Qt=null,jt=0,Pa()),r}function Ch(){for(;wt!==null;)Ld(wt)}function wh(e,t){var n=Ot;Ot|=2;var l=Od(),a=Ud();Qt!==e||jt!==t?(Wc=null,Kc=Ae()+500,is(e,t)):ls=xo(e,t);e:do try{if(Lt!==0&&wt!==null){t=wt;var i=Nl;t:switch(Lt){case 1:Lt=0,Nl=null,ss(e,t,i,1);break;case 2:case 9:if(_c(i)){Lt=0,Nl=null,Hd(t);break}t=function(){Lt!==2&&Lt!==9||Qt!==e||(Lt=7),Oa(e)},i.then(t,t);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:_c(i)?(Lt=0,Nl=null,Hd(t)):(Lt=0,Nl=null,ss(e,t,i,7));break;case 5:var r=null;switch(wt.tag){case 26:r=wt.memoizedState;case 5:case 27:var h=wt;if(r?Tp(r):h.stateNode.complete){Lt=0,Nl=null;var C=h.sibling;if(C!==null)wt=C;else{var V=h.return;V!==null?(wt=V,tr(V)):wt=null}break t}}Lt=0,Nl=null,ss(e,t,i,5);break;case 6:Lt=0,Nl=null,ss(e,t,i,6);break;case 8:xu(),rn=6;break e;default:throw Error(S(462))}}Th();break}catch(ie){_d(e,ie)}while(!0);return Hn=Al=null,H.H=l,H.A=a,Ot=n,wt!==null?0:(Qt=null,jt=0,Pa(),rn)}function Th(){for(;wt!==null&&!$l();)Ld(wt)}function Ld(e){var t=cd(e.alternate,e,po);e.memoizedProps=e.pendingProps,t===null?tr(e):wt=t}function Hd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=nd(n,t,t.pendingProps,t.type,void 0,jt);break;case 11:t=nd(n,t,t.pendingProps,t.type.render,t.ref,jt);break;case 5:_r(t);default:ud(n,t),t=wt=Dc(t,po),t=cd(n,t,po)}e.memoizedProps=e.pendingProps,t===null?tr(e):wt=t}function ss(e,t,n,l){Hn=Al=null,_r(t),p=null,g=0;var a=t.return;try{if(dh(e,a,t,n,jt)){rn=1,Xc(e,ol(n,e.current)),wt=null;return}}catch(i){if(a!==null)throw wt=a,i;rn=1,Xc(e,ol(n,e.current)),wt=null;return}t.flags&32768?(St||l===1?e=!0:ls||(jt&536870912)!==0?e=!1:(Yo=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ee.current,l!==null&&l.tag===13&&(l.flags|=16384))),Yd(t,e)):tr(t)}function tr(e){var t=e;do{if((t.flags&32768)!==0){Yd(t,Yo);return}e=t.return;var n=yh(t.alternate,t,po);if(n!==null){wt=n;return}if(t=t.sibling,t!==null){wt=t;return}wt=t=e}while(t!==null);rn===0&&(rn=5)}function Yd(e,t){do{var n=gh(e.alternate,e);if(n!==null){n.flags&=32767,wt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){wt=e;return}wt=e=n}while(e!==null);rn=6,wt=null}function Vd(e,t,n,l,a,i,r,h,C){e.cancelPendingCommit=null;do nr();while(Nn!==0);if((Ot&6)!==0)throw Error(S(327));if(t!==null){if(t===e.current)throw Error(S(177));if(i=t.lanes|t.childLanes,i|=Za,Ai(e,n,i,r,h,C),e===Qt&&(wt=Qt=null,jt=0),os=t,Go=e,ho=n,yu=i,gu=a,Dd=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,kh(Bl,function(){return $d(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,a=J.p,J.p=2,r=Ot,Ot|=4;try{mh(e,t,n)}finally{Ot=r,J.p=a,H.T=l}}Nn=1,Xd(),Gd(),Id()}}function Xd(){if(Nn===1){Nn=0;var e=Go,t=os,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=H.T,H.T=null;var l=J.p;J.p=2;var a=Ot;Ot|=4;try{Cd(t,e);var i=Nu,r=Us(e.containerInfo),h=i.focusedElem,C=i.selectionRange;if(r!==h&&h&&h.ownerDocument&&Os(h.ownerDocument.documentElement,h)){if(C!==null&&Ao(h)){var V=C.start,ie=C.end;if(ie===void 0&&(ie=V),"selectionStart"in h)h.selectionStart=V,h.selectionEnd=Math.min(ie,h.value.length);else{var pe=h.ownerDocument||document,G=pe&&pe.defaultView||window;if(G.getSelection){var W=G.getSelection(),Re=h.textContent.length,Fe=Math.min(C.start,Re),It=C.end===void 0?Fe:Math.min(C.end,Re);!W.extend&&Fe>It&&(r=It,It=Fe,Fe=r);var M=Bs(h,Fe),E=Bs(h,It);if(M&&E&&(W.rangeCount!==1||W.anchorNode!==M.node||W.anchorOffset!==M.offset||W.focusNode!==E.node||W.focusOffset!==E.offset)){var Y=pe.createRange();Y.setStart(M.node,M.offset),W.removeAllRanges(),Fe>It?(W.addRange(Y),W.extend(E.node,E.offset)):(Y.setEnd(E.node,E.offset),W.addRange(Y))}}}}for(pe=[],W=h;W=W.parentNode;)W.nodeType===1&&pe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<pe.length;h++){var ue=pe[h];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}hr=!!Du,Nu=Du=null}finally{Ot=a,J.p=l,H.T=n}}e.current=t,Nn=2}}function Gd(){if(Nn===2){Nn=0;var e=Go,t=os,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=H.T,H.T=null;var l=J.p;J.p=2;var a=Ot;Ot|=4;try{md(e,t.alternate,t)}finally{Ot=a,J.p=l,H.T=n}}Nn=3}}function Id(){if(Nn===4||Nn===3){Nn=0,go();var e=Go,t=os,n=ho,l=Dd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Nn=5:(Nn=0,os=Go=null,qd(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(Xo=null),xs(n),t=t.stateNode,Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(mo,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=H.T,a=J.p,J.p=2,H.T=null;try{for(var i=e.onRecoverableError,r=0;r<l.length;r++){var h=l[r];i(h.value,{componentStack:h.stack})}}finally{H.T=t,J.p=a}}(ho&3)!==0&&nr(),Oa(e),a=e.pendingLanes,(n&261930)!==0&&(a&42)!==0?e===mu?ic++:(ic=0,mu=e):ic=0,sc(0)}}function qd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ci(t)))}function nr(){return Xd(),Gd(),Id(),$d()}function $d(){if(Nn!==5)return!1;var e=Go,t=yu;yu=0;var n=xs(ho),l=H.T,a=J.p;try{J.p=32>n?32:n,H.T=null,n=gu,gu=null;var i=Go,r=ho;if(Nn=0,os=Go=null,ho=0,(Ot&6)!==0)throw Error(S(331));var h=Ot;if(Ot|=4,Ed(i.current),Td(i,i.current,r,n),Ot=h,sc(0,!1),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(mo,i)}catch{}return!0}finally{J.p=a,H.T=l,qd(e,t)}}function Zd(e,t,n){t=ol(n,t),t=Qr(e.stateNode,t,2),e=F(e,t,2),e!==null&&(Vt(e,2),Oa(e))}function Ht(e,t,n){if(e.tag===3)Zd(e,e,n);else for(;t!==null;){if(t.tag===3){Zd(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xo===null||!Xo.has(l))){e=ol(n,e),n=Pf(2),l=F(t,n,2),l!==null&&(Qf(n,l,t,e),Vt(l,2),Oa(l));break}}t=t.return}}function vu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new vh;var a=new Set;l.set(t,a)}else a=l.get(t),a===void 0&&(a=new Set,l.set(t,a));a.has(n)||(du=!0,a.add(n),e=zh.bind(null,e,t,n),t.then(e,e))}function zh(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Qt===e&&(jt&n)===n&&(rn===4||rn===3&&(jt&62914560)===jt&&300>Ae()-Fc?(Ot&2)===0&&is(e,0):pu|=n,as===jt&&(as=0)),Oa(e)}function Pd(e,t){t===0&&(t=ys()),e=Da(e,t),e!==null&&(Vt(e,t),Oa(e))}function jh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Pd(e,n)}function Eh(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(S(314))}l!==null&&l.delete(t),Pd(e,n)}function kh(e,t){return Dt(e,t)}var lr=null,cs=null,Su=!1,ar=!1,Cu=!1,qo=0;function Oa(e){e!==cs&&e.next===null&&(cs===null?lr=cs=e:cs=cs.next=e),ar=!0,Su||(Su=!0,Dh())}function sc(e,t){if(!Cu&&ar){Cu=!0;do for(var n=!1,l=lr;l!==null;){if(e!==0){var a=l.pendingLanes;if(a===0)var i=0;else{var r=l.suspendedLanes,h=l.pingedLanes;i=(1<<31-Rn(42|e)+1)-1,i&=a&~(r&~h),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,Wd(l,i))}else i=jt,i=Wn(l,l===Qt?i:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(i&3)===0||xo(l,i)||(n=!0,Wd(l,i));l=l.next}while(n);Cu=!1}}function Ah(){Qd()}function Qd(){ar=Su=!1;var e=0;qo!==0&&Yh()&&(e=qo);for(var t=Ae(),n=null,l=lr;l!==null;){var a=l.next,i=Fd(l,t);i===0?(l.next=null,n===null?lr=a:n.next=a,a===null&&(cs=n)):(n=l,(e!==0||(i&3)!==0)&&(ar=!0)),l=a}Nn!==0&&Nn!==5||sc(e),qo!==0&&(qo=0)}function Fd(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var r=31-Rn(i),h=1<<r,C=a[r];C===-1?((h&n)===0||(h&l)!==0)&&(a[r]=bc(h,t)):C<=t&&(e.expiredLanes|=h),i&=~h}if(t=Qt,n=jt,n=Wn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Lt===2||Lt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&yn(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||xo(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&yn(l),xs(n)){case 2:case 8:n=jn;break;case 32:n=Bl;break;case 268435456:n=an;break;default:n=Bl}return l=Kd.bind(null,e),n=Dt(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&yn(l),e.callbackPriority=2,e.callbackNode=null,2}function Kd(e,t){if(Nn!==0&&Nn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(nr()&&e.callbackNode!==n)return null;var l=jt;return l=Wn(e,e===Qt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Rd(e,l,t),Fd(e,Ae()),e.callbackNode!=null&&e.callbackNode===n?Kd.bind(null,e):null)}function Wd(e,t){if(nr())return null;Rd(e,t,!0)}function Dh(){Xh(function(){(Ot&6)!==0?Dt(pt,Ah):Qd()})}function wu(){if(qo===0){var e=lo;e===0&&(e=ki,ki<<=1,(ki&261888)===0&&(ki=256)),qo=e}return qo}function Jd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:dl(""+e)}function ep(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Nh(e,t,n,l,a){if(t==="submit"&&n&&n.stateNode===a){var i=Jd((a[on]||null).action),r=l.submitter;r&&(t=(t=r[on]||null)?Jd(t.formAction):r.getAttribute("formAction"),t!==null&&(i=t,r=null));var h=new Oi("action","action",null,l,a);e.push({event:h,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(qo!==0){var C=r?ep(a,r):new FormData(a);Gr(n,{pending:!0,data:C,method:a.method,action:i},null,C)}}else typeof i=="function"&&(h.preventDefault(),C=r?ep(a,r):new FormData(a),Gr(n,{pending:!0,data:C,method:a.method,action:i},i,C))},currentTarget:a}]})}}for(var Tu=0;Tu<vt.length;Tu++){var zu=vt[Tu],Rh=zu.toLowerCase(),Mh=zu[0].toUpperCase()+zu.slice(1);ct(Rh,"on"+Mh)}ct($a,"onAnimationEnd"),ct(Ls,"onAnimationIteration"),ct(sa,"onAnimationStart"),ct("dblclick","onDoubleClick"),ct("focusin","onFocus"),ct("focusout","onBlur"),ct(Hs,"onTransitionRun"),ct(ka,"onTransitionStart"),ct(Ys,"onTransitionCancel"),ct(Aa,"onTransitionEnd"),fn("onMouseEnter",["mouseout","mouseover"]),fn("onMouseLeave",["mouseout","mouseover"]),fn("onPointerEnter",["pointerout","pointerover"]),fn("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_h=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function tp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],a=l.event;l=l.listeners;e:{var i=void 0;if(t)for(var r=l.length-1;0<=r;r--){var h=l[r],C=h.instance,V=h.currentTarget;if(h=h.listener,C!==i&&a.isPropagationStopped())break e;i=h,a.currentTarget=V;try{i(a)}catch(ie){$i(ie)}a.currentTarget=null,i=C}else for(r=0;r<l.length;r++){if(h=l[r],C=h.instance,V=h.currentTarget,h=h.listener,C!==i&&a.isPropagationStopped())break e;i=h,a.currentTarget=V;try{i(a)}catch(ie){$i(ie)}a.currentTarget=null,i=C}}}}function Tt(e,t){var n=t[Ni];n===void 0&&(n=t[Ni]=new Set);var l=e+"__bubble";n.has(l)||(np(t,e,2,!1),n.add(l))}function ju(e,t,n){var l=0;t&&(l|=4),np(n,e,l,t)}var or="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[or]){e[or]=!0,Sc.forEach(function(n){n!=="selectionchange"&&(_h.has(n)||ju(n,!1,e),ju(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[or]||(t[or]=!0,ju("selectionchange",!1,t))}}function np(e,t,n,l){switch(Np(t)){case 2:var a=cy;break;case 8:a=ry;break;default:a=Xu}n=a.bind(null,t,n,e),a=void 0,!ti||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),l?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ku(e,t,n,l,a){var i=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var r=l.tag;if(r===3||r===4){var h=l.stateNode.containerInfo;if(h===a)break;if(r===4)for(r=l.return;r!==null;){var C=r.tag;if((C===3||C===4)&&r.stateNode.containerInfo===a)return;r=r.return}for(;h!==null;){if(r=Ya(h),r===null)return;if(C=r.tag,C===5||C===6||C===26||C===27){l=i=r;continue e}h=h.parentNode}}l=l.return}Tl(function(){var V=i,ie=ws(n),pe=[];e:{var G=Vs.get(e);if(G!==void 0){var W=Oi,Re=e;switch(e){case"keypress":if(wo(n)===0)break e;case"keydown":case"keyup":W=Xa;break;case"focusin":Re="focus",W=ai;break;case"focusout":Re="blur",W=ai;break;case"beforeblur":case"afterblur":W=ai;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=js;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Sa;break;case $a:case Ls:case sa:W=As;break;case Aa:W=Li;break;case"scroll":case"scrollend":W=zs;break;case"wheel":W=ci;break;case"copy":case"cut":case"paste":W=Kt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ta;break;case"toggle":case"beforetoggle":W=kn}var Fe=(t&4)!==0,It=!Fe&&(e==="scroll"||e==="scrollend"),M=Fe?G!==null?G+"Capture":null:G;Fe=[];for(var E=V,Y;E!==null;){var ue=E;if(Y=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Y===null||M===null||(ue=va(E,M),ue!=null&&Fe.push(rc(E,ue,Y))),It)break;E=E.return}0<Fe.length&&(G=new W(G,Re,null,n,ie),pe.push({event:G,listeners:Fe}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",G&&n!==el&&(Re=n.relatedTarget||n.fromElement)&&(Ya(Re)||Re[ul]))break e;if((W||G)&&(G=ie.window===ie?ie:(G=ie.ownerDocument)?G.defaultView||G.parentWindow:window,W?(Re=n.relatedTarget||n.toElement,W=V,Re=Re?Ya(Re):null,Re!==null&&(It=I(Re),Fe=Re.tag,Re!==It||Fe!==5&&Fe!==27&&Fe!==6)&&(Re=null)):(W=null,Re=V),W!==Re)){if(Fe=wc,ue="onMouseLeave",M="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(Fe=ta,ue="onPointerLeave",M="onPointerEnter",E="pointer"),It=W==null?G:Ri(W),Y=Re==null?G:Ri(Re),G=new Fe(ue,E+"leave",W,n,ie),G.target=It,G.relatedTarget=Y,ue=null,Ya(ie)===V&&(Fe=new Fe(M,E+"enter",Re,n,ie),Fe.target=Y,Fe.relatedTarget=It,ue=Fe),It=ue,W&&Re)t:{for(Fe=Bh,M=W,E=Re,Y=0,ue=M;ue;ue=Fe(ue))Y++;ue=0;for(var Ie=E;Ie;Ie=Fe(Ie))ue++;for(;0<Y-ue;)M=Fe(M),Y--;for(;0<ue-Y;)E=Fe(E),ue--;for(;Y--;){if(M===E||E!==null&&M===E.alternate){Fe=M;break t}M=Fe(M),E=Fe(E)}Fe=null}else Fe=null;W!==null&&lp(pe,G,W,Fe,!1),Re!==null&&It!==null&&lp(pe,It,Re,Fe,!0)}}e:{if(G=V?Ri(V):window,W=G.nodeName&&G.nodeName.toLowerCase(),W==="select"||W==="input"&&G.type==="file")var _t=fi;else if(_s(G))if(di)_t=Xi;else{_t=Ta;var Le=Vi}else W=G.nodeName,!W||W.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?V&&Bi(V.elementType)&&(_t=fi):_t=kr;if(_t&&(_t=_t(e,V))){ui(pe,_t,n,ie);break e}Le&&Le(e,G,V),e==="focusout"&&V&&G.type==="number"&&V.memoizedProps.value!=null&&Ut(G,"number",G.value)}switch(Le=V?Ri(V):window,e){case"focusin":(_s(Le)||Le.contentEditable==="true")&&(ia=Le,Ia=V,Mn=null);break;case"focusout":Mn=Ia=ia=null;break;case"mousedown":Ii=!0;break;case"contextmenu":case"mouseup":case"dragend":Ii=!1,kl(pe,n,ie);break;case"selectionchange":if(hi)break;case"keydown":case"keyup":kl(pe,n,ie)}var yt;if(Rs)e:{switch(e){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else Ca?Hi(e,n)&&(Et="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Et="onCompositionStart");Et&&(Ms&&n.locale!=="ko"&&(Ca||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Ca&&(yt=Me()):(Fl=ie,xn="value"in Fl?Fl.value:Fl.textContent,Ca=!0)),Le=ir(V,Et),0<Le.length&&(Et=new $t(Et,e,null,n,ie),pe.push({event:Et,listeners:Le}),yt?Et.data=yt:(yt=Yi(n),yt!==null&&(Et.data=yt)))),(yt=Tc?zc(e,n):jc(e,n))&&(Et=ir(V,"onBeforeInput"),0<Et.length&&(Le=new $t("onBeforeInput","beforeinput",null,n,ie),pe.push({event:Le,listeners:Et}),Le.data=yt)),Nh(pe,e,V,n,ie)}tp(pe,t)})}function rc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ir(e,t){for(var n=t+"Capture",l=[];e!==null;){var a=e,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=va(e,n),a!=null&&l.unshift(rc(e,a,i)),a=va(e,t),a!=null&&l.push(rc(e,a,i))),e.tag===3)return l;e=e.return}return[]}function Bh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function lp(e,t,n,l,a){for(var i=t._reactName,r=[];n!==null&&n!==l;){var h=n,C=h.alternate,V=h.stateNode;if(h=h.tag,C!==null&&C===l)break;h!==5&&h!==26&&h!==27||V===null||(C=V,a?(V=va(n,i),V!=null&&r.unshift(rc(n,V,C))):a||(V=va(n,i),V!=null&&r.push(rc(n,V,C)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var Oh=/\r\n?/g,Uh=/\u0000|\uFFFD/g;function ap(e){return(typeof e=="string"?e:""+e).replace(Oh,`
`).replace(Uh,"")}function op(e,t){return t=ap(t),ap(e)===t}function Gt(e,t,n,l,a,i){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||ba(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&ba(e,""+l);break;case"className":ut(e,"class",l);break;case"tabIndex":ut(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(e,n,l);break;case"style":ei(e,l,i);break;case"data":if(t!=="object"){ut(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=dl(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Gt(e,t,"name",a.name,a,null),Gt(e,t,"formEncType",a.formEncType,a,null),Gt(e,t,"formMethod",a.formMethod,a,null),Gt(e,t,"formTarget",a.formTarget,a,null)):(Gt(e,t,"encType",a.encType,a,null),Gt(e,t,"method",a.method,a,null),Gt(e,t,"target",a.target,a,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=dl(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=Ql);break;case"onScroll":l!=null&&Tt("scroll",e);break;case"onScrollEnd":l!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(S(61));if(n=l.__html,n!=null){if(a.children!=null)throw Error(S(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=dl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),Jo(e,"popover",l);break;case"xlinkActuate":ln(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ln(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ln(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ln(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ln(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ln(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ln(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ln(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ln(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Jo(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=jr.get(n)||n,Jo(e,n,l))}}function Au(e,t,n,l,a,i){switch(n){case"style":ei(e,l,i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(S(61));if(n=l.__html,n!=null){if(a.children!=null)throw Error(S(60));e.innerHTML=n}}break;case"children":typeof l=="string"?ba(e,l):(typeof l=="number"||typeof l=="bigint")&&ba(e,""+l);break;case"onScroll":l!=null&&Tt("scroll",e);break;case"onScrollEnd":l!=null&&Tt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ql);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ss.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),i=e[on]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,a),typeof l=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,a);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Jo(e,n,l)}}}function Xn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var l=!1,a=!1,i;for(i in n)if(n.hasOwnProperty(i)){var r=n[i];if(r!=null)switch(i){case"src":l=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(S(137,t));default:Gt(e,t,i,r,n,null)}}a&&Gt(e,t,"srcSet",n.srcSet,n,null),l&&Gt(e,t,"src",n.src,n,null);return;case"input":Tt("invalid",e);var h=i=r=a=null,C=null,V=null;for(l in n)if(n.hasOwnProperty(l)){var ie=n[l];if(ie!=null)switch(l){case"name":a=ie;break;case"type":r=ie;break;case"checked":C=ie;break;case"defaultChecked":V=ie;break;case"value":i=ie;break;case"defaultValue":h=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(S(137,t));break;default:Gt(e,t,l,ie,n,null)}}X(e,i,h,C,V,r,a,!1);return;case"select":Tt("invalid",e),l=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(h=n[a],h!=null))switch(a){case"value":i=h;break;case"defaultValue":r=h;break;case"multiple":l=h;default:Gt(e,t,a,h,n,null)}t=i,n=r,e.multiple=!!l,t!=null?Rt(e,!!l,t,!1):n!=null&&Rt(e,!!l,n,!0);return;case"textarea":Tt("invalid",e),i=a=l=null;for(r in n)if(n.hasOwnProperty(r)&&(h=n[r],h!=null))switch(r){case"value":l=h;break;case"defaultValue":a=h;break;case"children":i=h;break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(S(91));break;default:Gt(e,t,r,h,n,null)}wl(e,l,a,i);return;case"option":for(C in n)if(n.hasOwnProperty(C)&&(l=n[C],l!=null))switch(C){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Gt(e,t,C,l,n,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(l=0;l<cc.length;l++)Tt(cc[l],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in n)if(n.hasOwnProperty(V)&&(l=n[V],l!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(S(137,t));default:Gt(e,t,V,l,n,null)}return;default:if(Bi(t)){for(ie in n)n.hasOwnProperty(ie)&&(l=n[ie],l!==void 0&&Au(e,t,ie,l,n,void 0));return}}for(h in n)n.hasOwnProperty(h)&&(l=n[h],l!=null&&Gt(e,t,h,l,n,null))}function Lh(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,r=null,h=null,C=null,V=null,ie=null;for(W in n){var pe=n[W];if(n.hasOwnProperty(W)&&pe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":C=pe;default:l.hasOwnProperty(W)||Gt(e,t,W,null,l,pe)}}for(var G in l){var W=l[G];if(pe=n[G],l.hasOwnProperty(G)&&(W!=null||pe!=null))switch(G){case"type":i=W;break;case"name":a=W;break;case"checked":V=W;break;case"defaultChecked":ie=W;break;case"value":r=W;break;case"defaultValue":h=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(S(137,t));break;default:W!==pe&&Gt(e,t,G,W,l,pe)}}dn(e,r,h,C,V,ie,i,a);return;case"select":W=r=h=G=null;for(i in n)if(C=n[i],n.hasOwnProperty(i)&&C!=null)switch(i){case"value":break;case"multiple":W=C;default:l.hasOwnProperty(i)||Gt(e,t,i,null,l,C)}for(a in l)if(i=l[a],C=n[a],l.hasOwnProperty(a)&&(i!=null||C!=null))switch(a){case"value":G=i;break;case"defaultValue":h=i;break;case"multiple":r=i;default:i!==C&&Gt(e,t,a,i,l,C)}t=h,n=r,l=W,G!=null?Rt(e,!!n,G,!1):!!l!=!!n&&(t!=null?Rt(e,!!n,t,!0):Rt(e,!!n,n?[]:"",!1));return;case"textarea":W=G=null;for(h in n)if(a=n[h],n.hasOwnProperty(h)&&a!=null&&!l.hasOwnProperty(h))switch(h){case"value":break;case"children":break;default:Gt(e,t,h,null,l,a)}for(r in l)if(a=l[r],i=n[r],l.hasOwnProperty(r)&&(a!=null||i!=null))switch(r){case"value":G=a;break;case"defaultValue":W=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(S(91));break;default:a!==i&&Gt(e,t,r,a,l,i)}Pl(e,G,W);return;case"option":for(var Re in n)if(G=n[Re],n.hasOwnProperty(Re)&&G!=null&&!l.hasOwnProperty(Re))switch(Re){case"selected":e.selected=!1;break;default:Gt(e,t,Re,null,l,G)}for(C in l)if(G=l[C],W=n[C],l.hasOwnProperty(C)&&G!==W&&(G!=null||W!=null))switch(C){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Gt(e,t,C,G,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in n)G=n[Fe],n.hasOwnProperty(Fe)&&G!=null&&!l.hasOwnProperty(Fe)&&Gt(e,t,Fe,null,l,G);for(V in l)if(G=l[V],W=n[V],l.hasOwnProperty(V)&&G!==W&&(G!=null||W!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(S(137,t));break;default:Gt(e,t,V,G,l,W)}return;default:if(Bi(t)){for(var It in n)G=n[It],n.hasOwnProperty(It)&&G!==void 0&&!l.hasOwnProperty(It)&&Au(e,t,It,void 0,l,G);for(ie in l)G=l[ie],W=n[ie],!l.hasOwnProperty(ie)||G===W||G===void 0&&W===void 0||Au(e,t,ie,G,l,W);return}}for(var M in n)G=n[M],n.hasOwnProperty(M)&&G!=null&&!l.hasOwnProperty(M)&&Gt(e,t,M,null,l,G);for(pe in l)G=l[pe],W=n[pe],!l.hasOwnProperty(pe)||G===W||G==null&&W==null||Gt(e,t,pe,G,l,W)}function ip(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var a=n[l],i=a.transferSize,r=a.initiatorType,h=a.duration;if(i&&h&&ip(r)){for(r=0,h=a.responseEnd,l+=1;l<n.length;l++){var C=n[l],V=C.startTime;if(V>h)break;var ie=C.transferSize,pe=C.initiatorType;ie&&ip(pe)&&(C=C.responseEnd,r+=ie*(C<h?1:(h-V)/(C-V)))}if(--l,t+=8*(i+r)/(a.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Du=null,Nu=null;function sr(e){return e.nodeType===9?e:e.ownerDocument}function sp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ru(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mu=null;function Yh(){var e=window.event;return e&&e.type==="popstate"?e===Mu?!1:(Mu=e,!0):(Mu=null,!1)}var rp=typeof setTimeout=="function"?setTimeout:void 0,Vh=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,Xh=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(e){return up.resolve(null).then(e).catch(Gh)}:rp;function Gh(e){setTimeout(function(){throw e})}function $o(e){return e==="head"}function fp(e,t){var n=t,l=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(a),ds(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")uc(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,uc(n);for(var i=n.firstChild;i;){var r=i.nextSibling,h=i.nodeName;i[Ul]||h==="SCRIPT"||h==="STYLE"||h==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=r}}else n==="body"&&uc(e.ownerDocument.body);n=a}while(n);ds(t)}function dp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function _u(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":_u(n),xa(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Ih(e,t,n,l){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ul])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Gl(e.nextSibling),e===null)break}return null}function qh(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Gl(e.nextSibling),e===null))return null;return e}function pp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Gl(e.nextSibling),e===null))return null;return e}function Bu(e){return e.data==="$?"||e.data==="$~"}function Ou(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function $h(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Gl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Uu=null;function hp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Gl(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function yp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function gp(e,t,n){switch(t=sr(n),e){case"html":if(e=t.documentElement,!e)throw Error(S(452));return e;case"head":if(e=t.head,!e)throw Error(S(453));return e;case"body":if(e=t.body,!e)throw Error(S(454));return e;default:throw Error(S(451))}}function uc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);xa(e)}var Il=new Map,mp=new Set;function cr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yo=J.d;J.d={f:Zh,r:Ph,D:Qh,C:Fh,L:Kh,m:Wh,X:ey,S:Jh,M:ty};function Zh(){var e=yo.f(),t=Jc();return e||t}function Ph(e){var t=bo(e);t!==null&&t.tag===5&&t.type==="form"?_f(t):yo.r(e)}var rs=typeof document>"u"?null:document;function xp(e,t,n){var l=rs;if(l&&typeof t=="string"&&t){var a=st(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),mp.has(a)||(mp.add(a),e={rel:e,crossOrigin:n,href:t},l.querySelector(a)===null&&(t=l.createElement("link"),Xn(t,"link",e),un(t),l.head.appendChild(t)))}}function Qh(e){yo.D(e),xp("dns-prefetch",e,null)}function Fh(e,t){yo.C(e,t),xp("preconnect",e,t)}function Kh(e,t,n){yo.L(e,t,n);var l=rs;if(l&&e&&t){var a='link[rel="preload"][as="'+st(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+st(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+st(n.imageSizes)+'"]')):a+='[href="'+st(e)+'"]';var i=a;switch(t){case"style":i=us(e);break;case"script":i=fs(e)}Il.has(i)||(e=oe({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Il.set(i,e),l.querySelector(a)!==null||t==="style"&&l.querySelector(fc(i))||t==="script"&&l.querySelector(dc(i))||(t=l.createElement("link"),Xn(t,"link",e),un(t),l.head.appendChild(t)))}}function Wh(e,t){yo.m(e,t);var n=rs;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+st(l)+'"][href="'+st(e)+'"]',i=a;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=fs(e)}if(!Il.has(i)&&(e=oe({rel:"modulepreload",href:e},t),Il.set(i,e),n.querySelector(a)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(dc(i)))return}l=n.createElement("link"),Xn(l,"link",e),un(l),n.head.appendChild(l)}}}function Jh(e,t,n){yo.S(e,t,n);var l=rs;if(l&&e){var a=vo(l).hoistableStyles,i=us(e);t=t||"default";var r=a.get(i);if(!r){var h={loading:0,preload:null};if(r=l.querySelector(fc(i)))h.loading=5;else{e=oe({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Il.get(i))&&Lu(e,n);var C=r=l.createElement("link");un(C),Xn(C,"link",e),C._p=new Promise(function(V,ie){C.onload=V,C.onerror=ie}),C.addEventListener("load",function(){h.loading|=1}),C.addEventListener("error",function(){h.loading|=2}),h.loading|=4,rr(r,t,l)}r={type:"stylesheet",instance:r,count:1,state:h},a.set(i,r)}}}function ey(e,t){yo.X(e,t);var n=rs;if(n&&e){var l=vo(n).hoistableScripts,a=fs(e),i=l.get(a);i||(i=n.querySelector(dc(a)),i||(e=oe({src:e,async:!0},t),(t=Il.get(a))&&Hu(e,t),i=n.createElement("script"),un(i),Xn(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(a,i))}}function ty(e,t){yo.M(e,t);var n=rs;if(n&&e){var l=vo(n).hoistableScripts,a=fs(e),i=l.get(a);i||(i=n.querySelector(dc(a)),i||(e=oe({src:e,async:!0,type:"module"},t),(t=Il.get(a))&&Hu(e,t),i=n.createElement("script"),un(i),Xn(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(a,i))}}function bp(e,t,n,l){var a=(a=Ve.current)?cr(a):null;if(!a)throw Error(S(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=us(n.href),n=vo(a).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=us(n.href);var i=vo(a).hoistableStyles,r=i.get(e);if(r||(a=a.ownerDocument||a,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,r),(i=a.querySelector(fc(e)))&&!i._p&&(r.instance=i,r.state.loading=5),Il.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Il.set(e,n),i||ny(a,e,n,r.state))),t&&l===null)throw Error(S(528,""));return r}if(t&&l!==null)throw Error(S(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=fs(n),n=vo(a).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(S(444,e))}}function us(e){return'href="'+st(e)+'"'}function fc(e){return'link[rel="stylesheet"]['+e+"]"}function vp(e){return oe({},e,{"data-precedence":e.precedence,precedence:null})}function ny(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Xn(t,"link",n),un(t),e.head.appendChild(t))}function fs(e){return'[src="'+st(e)+'"]'}function dc(e){return"script[async]"+e}function Sp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+st(n.href)+'"]');if(l)return t.instance=l,un(l),l;var a=oe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),un(l),Xn(l,"style",a),rr(l,n.precedence,e),t.instance=l;case"stylesheet":a=us(n.href);var i=e.querySelector(fc(a));if(i)return t.state.loading|=4,t.instance=i,un(i),i;l=vp(n),(a=Il.get(a))&&Lu(l,a),i=(e.ownerDocument||e).createElement("link"),un(i);var r=i;return r._p=new Promise(function(h,C){r.onload=h,r.onerror=C}),Xn(i,"link",l),t.state.loading|=4,rr(i,n.precedence,e),t.instance=i;case"script":return i=fs(n.src),(a=e.querySelector(dc(i)))?(t.instance=a,un(a),a):(l=n,(a=Il.get(i))&&(l=oe({},n),Hu(l,a)),e=e.ownerDocument||e,a=e.createElement("script"),un(a),Xn(a,"link",l),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(S(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,rr(l,n.precedence,e));return t.instance}function rr(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=l.length?l[l.length-1]:null,i=a,r=0;r<l.length;r++){var h=l[r];if(h.dataset.precedence===t)i=h;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ur=null;function Cp(e,t,n){if(ur===null){var l=new Map,a=ur=new Map;a.set(n,l)}else a=ur,l=a.get(n),l||(l=new Map,a.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[Ul]||i[gn]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var r=i.getAttribute(t)||"";r=e+r;var h=l.get(r);h?h.push(i):l.set(r,[i])}}return l}function wp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function ly(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Tp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ay(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var a=us(l.href),i=t.querySelector(fc(a));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=fr.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,un(i);return}i=t.ownerDocument||t,l=vp(l),(a=Il.get(a))&&Lu(l,a),i=i.createElement("link"),un(i);var r=i;r._p=new Promise(function(h,C){r.onload=h,r.onerror=C}),Xn(i,"link",l),n.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=fr.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Yu=0;function oy(e,t){return e.stylesheets&&e.count===0&&pr(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&pr(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&Yu===0&&(Yu=62500*Hh());var a=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&pr(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>Yu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(a)}}:null}function fr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var dr=null;function pr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,dr=new Map,t.forEach(iy,e),dr=null,fr.call(e))}function iy(e,t){if(!(t.state.loading&4)){var n=dr.get(e);if(n)var l=n.get(null);else{n=new Map,dr.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var r=a[i];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),l=r)}l&&n.set(null,l)}a=t.instance,r=a.getAttribute("data-precedence"),i=n.get(r)||l,i===l&&n.set(null,a),n.set(r,a),this.count++,l=fr.bind(this),a.addEventListener("load",l),a.addEventListener("error",l),i?i.parentNode.insertBefore(a,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var pc={$$typeof:L,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function sy(e,t,n,l,a,i,r,h,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gs(0),this.hiddenUpdates=gs(null),this.identifierPrefix=l,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function zp(e,t,n,l,a,i,r,h,C,V,ie,pe){return e=new sy(e,t,n,r,C,V,ie,pe,h),t=1,i===!0&&(t|=24),i=Pn(3,null,null,t),e.current=i,i.stateNode=e,t=no(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:l,isDehydrated:n,cache:t},Se(i),e}function jp(e){return e?(e=Na,e):Na}function Ep(e,t,n,l,a,i){a=jp(a),l.context===null?l.context=a:l.pendingContext=a,l=K(t),l.payload={element:n},i=i===void 0?null:i,i!==null&&(l.callback=i),n=F(e,l,t),n!==null&&(vl(n,e,t),Z(n,e,t))}function kp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vu(e,t){kp(e,t),(e=e.alternate)&&kp(e,t)}function Ap(e){if(e.tag===13||e.tag===31){var t=Da(e,67108864);t!==null&&vl(t,e,67108864),Vu(e,67108864)}}function Dp(e){if(e.tag===13||e.tag===31){var t=Ml();t=Di(t);var n=Da(e,t);n!==null&&vl(n,e,t),Vu(e,t)}}var hr=!0;function cy(e,t,n,l){var a=H.T;H.T=null;var i=J.p;try{J.p=2,Xu(e,t,n,l)}finally{J.p=i,H.T=a}}function ry(e,t,n,l){var a=H.T;H.T=null;var i=J.p;try{J.p=8,Xu(e,t,n,l)}finally{J.p=i,H.T=a}}function Xu(e,t,n,l){if(hr){var a=Gu(l);if(a===null)ku(e,t,l,yr,n),Rp(e,l);else if(fy(a,e,t,n,l))l.stopPropagation();else if(Rp(e,l),t&4&&-1<uy.indexOf(e)){for(;a!==null;){var i=bo(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var r=at(i.pendingLanes);if(r!==0){var h=i;for(h.pendingLanes|=2,h.entangledLanes|=2;r;){var C=1<<31-Rn(r);h.entanglements[1]|=C,r&=~C}Oa(i),(Ot&6)===0&&(Kc=Ae()+500,sc(0))}}break;case 31:case 13:h=Da(i,2),h!==null&&vl(h,i,2),Jc(),Vu(i,2)}if(i=Gu(l),i===null&&ku(e,t,l,yr,n),i===a)break;a=i}a!==null&&l.stopPropagation()}else ku(e,t,l,null,n)}}function Gu(e){return e=ws(e),Iu(e)}var yr=null;function Iu(e){if(yr=null,e=Ya(e),e!==null){var t=I(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=de(t),e!==null)return e;e=null}else if(n===31){if(e=ze(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return yr=e,null}function Np(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(La()){case pt:return 2;case jn:return 8;case Bl:case tt:return 32;case an:return 268435456;default:return 32}default:return 32}}var qu=!1,Zo=null,Po=null,Qo=null,hc=new Map,yc=new Map,Fo=[],uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rp(e,t){switch(e){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":hc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(t.pointerId)}}function gc(e,t,n,l,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:i,targetContainers:[a]},t!==null&&(t=bo(t),t!==null&&Ap(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function fy(e,t,n,l,a){switch(t){case"focusin":return Zo=gc(Zo,e,t,n,l,a),!0;case"dragenter":return Po=gc(Po,e,t,n,l,a),!0;case"mouseover":return Qo=gc(Qo,e,t,n,l,a),!0;case"pointerover":var i=a.pointerId;return hc.set(i,gc(hc.get(i)||null,e,t,n,l,a)),!0;case"gotpointercapture":return i=a.pointerId,yc.set(i,gc(yc.get(i)||null,e,t,n,l,a)),!0}return!1}function Mp(e){var t=Ya(e.target);if(t!==null){var n=I(t);if(n!==null){if(t=n.tag,t===13){if(t=de(n),t!==null){e.blockedOn=t,Bn(e.priority,function(){Dp(n)});return}}else if(t===31){if(t=ze(n),t!==null){e.blockedOn=t,Bn(e.priority,function(){Dp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gu(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);el=l,n.target.dispatchEvent(l),el=null}else return t=bo(n),t!==null&&Ap(t),e.blockedOn=n,!1;t.shift()}return!0}function _p(e,t,n){gr(e)&&n.delete(t)}function dy(){qu=!1,Zo!==null&&gr(Zo)&&(Zo=null),Po!==null&&gr(Po)&&(Po=null),Qo!==null&&gr(Qo)&&(Qo=null),hc.forEach(_p),yc.forEach(_p)}function mr(e,t){e.blockedOn===t&&(e.blockedOn=null,qu||(qu=!0,A.unstable_scheduleCallback(A.unstable_NormalPriority,dy)))}var xr=null;function Bp(e){xr!==e&&(xr=e,A.unstable_scheduleCallback(A.unstable_NormalPriority,function(){xr===e&&(xr=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],a=e[t+2];if(typeof l!="function"){if(Iu(l||n)===null)continue;break}var i=bo(n);i!==null&&(e.splice(t,3),t-=3,Gr(i,{pending:!0,data:a,method:n.method,action:l},l,a))}}))}function ds(e){function t(C){return mr(C,e)}Zo!==null&&mr(Zo,e),Po!==null&&mr(Po,e),Qo!==null&&mr(Qo,e),hc.forEach(t),yc.forEach(t);for(var n=0;n<Fo.length;n++){var l=Fo[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Fo.length&&(n=Fo[0],n.blockedOn===null);)Mp(n),n.blockedOn===null&&Fo.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var a=n[l],i=n[l+1],r=a[on]||null;if(typeof i=="function")r||Bp(n);else if(r){var h=null;if(i&&i.hasAttribute("formAction")){if(a=i,r=i[on]||null)h=r.formAction;else if(Iu(a)!==null)continue}else h=r.action;typeof h=="function"?n[l+1]=h:(n.splice(l,3),l-=3),Bp(n)}}}function Op(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(r){return a=r})},focusReset:"manual",scroll:"manual"})}function t(){a!==null&&(a(),a=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),a!==null&&(a(),a=null)}}}function $u(e){this._internalRoot=e}br.prototype.render=$u.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(S(409));var n=t.current,l=Ml();Ep(n,l,e,t,null,null)},br.prototype.unmount=$u.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ep(e.current,2,null,e,null,null),Jc(),t[ul]=null}};function br(e){this._internalRoot=e}br.prototype.unstable_scheduleHydration=function(e){if(e){var t=qt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fo.length&&t!==0&&t<Fo[n].priority;n++);Fo.splice(n,0,e),n===0&&Mp(e)}};var Up=z.version;if(Up!=="19.2.0")throw Error(S(527,Up,"19.2.0"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(S(188)):(e=Object.keys(e).join(","),Error(S(268,e)));return e=O(t),e=e!==null?me(e):null,e=e===null?null:e.stateNode,e};var py={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vr.isDisabled&&vr.supportsFiber)try{mo=vr.inject(py),Gn=vr}catch{}}return xc.createRoot=function(e,t){if(!_(e))throw Error(S(299));var n=!1,l="",a=If,i=qf,r=$f;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=zp(e,1,!1,null,null,n,l,null,a,i,r,Op),e[ul]=t.current,Eu(e),new $u(t)},xc.hydrateRoot=function(e,t,n){if(!_(e))throw Error(S(299));var l=!1,a="",i=If,r=qf,h=$f,C=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(h=n.onRecoverableError),n.formState!==void 0&&(C=n.formState)),t=zp(e,1,!0,t,n??null,l,a,C,i,r,h,Op),t.context=jp(null),n=t.current,l=Ml(),l=Di(l),a=K(l),a.callback=null,F(n,a,l),n=l,t.current.lanes=n,Vt(t,n),Oa(t),e[ul]=t.current,Eu(e),new br(t)},xc.version="19.2.0",xc}var Zp;function Ty(){if(Zp)return Qu.exports;Zp=1;function A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A)}catch(z){console.error(z)}}return A(),Qu.exports=wy(),Qu.exports}var zy=Ty();function jy(A,z){return A?z?{minX:Math.min(A.minX,z.minX),minY:Math.min(A.minY,z.minY),maxX:Math.max(A.maxX,z.maxX),maxY:Math.max(A.maxY,z.maxY)}:A:z}function Ey(A,z,T,S,_,I,de,ze,he){const O=A/2,me=z/2,oe=[{x:-O,y:-me},{x:O,y:-me},{x:O,y:me},{x:-O,y:me}],ke=he*Math.PI/180,xe=Math.sin(ke),ye=Math.cos(ke);let ve=1/0,le=1/0,m=-1/0,k=-1/0;for(const L of oe){const He=L.x*de,q=L.y*ze,$=He*ye-q*xe,fe=He*xe+q*ye,Ge=T+_+$,j=S+I+fe;Ge<ve&&(ve=Ge),j<le&&(le=j),Ge>m&&(m=Ge),j>k&&(k=j)}return{minX:ve,minY:le,maxX:m,maxY:k}}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=A=>A.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ay=A=>A.replace(/^([A-Z])|[\s-_]+(\w)/g,(z,T,S)=>S?S.toUpperCase():T.toLowerCase()),Pp=A=>{const z=Ay(A);return z.charAt(0).toUpperCase()+z.slice(1)},Jp=(...A)=>A.filter((z,T,S)=>!!z&&z.trim()!==""&&S.indexOf(z)===T).join(" ").trim(),Dy=A=>{for(const z in A)if(z.startsWith("aria-")||z==="role"||z==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ny={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=v.forwardRef(({color:A="currentColor",size:z=24,strokeWidth:T=2,absoluteStrokeWidth:S,className:_="",children:I,iconNode:de,...ze},he)=>v.createElement("svg",{ref:he,...Ny,width:z,height:z,stroke:A,strokeWidth:S?Number(T)*24/Number(z):T,className:Jp("lucide",_),...!I&&!Dy(ze)&&{"aria-hidden":"true"},...ze},[...de.map(([O,me])=>v.createElement(O,me)),...Array.isArray(I)?I:[I]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=(A,z)=>{const T=v.forwardRef(({className:S,..._},I)=>v.createElement(Ry,{ref:I,iconNode:z,className:Jp(`lucide-${ky(Pp(A))}`,`lucide-${A}`,S),..._}));return T.displayName=Pp(A),T};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],_y=eh("mouse-pointer",My);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Oy=eh("pen-line",By),Sr="#2CA02C",th="#F0E442",nh="#00BFC4",Ju="#000000",Uy="#00008b",Cr="#FF0000",lh={DEFAULT_SIZE:24},tf={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},Ei={DEFAULT_SIZE:26};let nf=1;function _l(){return nf++}function Qp(A){nf=A}function Fp(){return nf}function Ly(A="id"){return`${A}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function Kp(A){return Math.round(A*1e3)/1e3}function tn(A){return{x:Kp(A.x),y:Kp(A.y)}}function Hy(A){return tf[A]?.defaultPins||2}function Yy(A,z,T,S,_,I=lh.DEFAULT_SIZE){const de={id:Ly("comp"),componentType:A,designator:"",layer:z,x:T,y:S,color:_,size:I,pinCount:Hy(A),pinConnections:[],orientation:0};switch(de.pinConnections=new Array(de.pinCount).fill(""),A){case"Battery":return{...de,componentType:"Battery"};case"Capacitor":return{...de,componentType:"Capacitor"};case"Diode":return{...de,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...de,componentType:"Fuse"};case"FerriteBead":return{...de,componentType:"FerriteBead"};case"Connector":return{...de,componentType:"Connector",gender:"N/A"};case"Jumper":return{...de,componentType:"Jumper"};case"Relay":return{...de,componentType:"Relay"};case"Inductor":return{...de,componentType:"Inductor"};case"Speaker":return{...de,componentType:"Speaker"};case"Motor":return{...de,componentType:"Motor"};case"PowerSupply":return{...de,componentType:"PowerSupply"};case"Transistor":return{...de,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...de,componentType:"Resistor"};case"ResistorNetwork":return{...de,componentType:"ResistorNetwork"};case"Thermistor":return{...de,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...de,componentType:"Switch"};case"Transformer":return{...de,componentType:"Transformer"};case"TestPoint":return{...de,componentType:"TestPoint"};case"IntegratedCircuit":return{...de,componentType:"IntegratedCircuit"};case"VacuumTube":return{...de,componentType:"VacuumTube"};case"VariableResistor":return{...de,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...de,componentType:"Crystal"};case"ZenerDiode":return{...de,componentType:"ZenerDiode"};default:return{...de,componentType:"Resistor"}}}class Vy{parent=new Map;rank=new Map;find(z){return this.parent.has(z)?(this.parent.get(z)!==z&&this.parent.set(z,this.find(this.parent.get(z))),this.parent.get(z)):(this.parent.set(z,z),this.rank.set(z,0),z)}union(z,T){const S=this.find(z),_=this.find(T);if(S===_)return;const I=this.rank.get(S)||0,de=this.rank.get(_)||0;I<de?this.parent.set(S,_):I>de?this.parent.set(_,S):(this.parent.set(_,S),this.rank.set(S,I+1))}getGroups(){const z=new Map;for(const T of this.parent.keys()){const S=this.find(T);z.has(S)||z.set(S,[]),z.get(S).push(T)}return z}}function Xy(A,z,T,S,_){const I=new Map;let de=0,ze=0,he=0,O=0;for(const xe of A)if((xe.type==="via"||xe.type==="pad")&&xe.points.length>0){const ye=xe.points[0];if(ye.id!==void 0)if(!I.has(ye.id))I.set(ye.id,{id:ye.id,type:xe.type==="via"?"via":"pad",x:ye.x,y:ye.y}),xe.type==="via"?de++:ze++;else{const ve=I.get(ye.id);ve.type==="trace_point"&&(O++,ve.type=xe.type==="via"?"via":"pad")}}else if(xe.type==="trace"){for(const ye of xe.points)if(ye.id!==void 0)if(!I.has(ye.id))I.set(ye.id,{id:ye.id,type:"trace_point",x:ye.x,y:ye.y}),he++;else{const ve=I.get(ye.id);(ve.type==="via"||ve.type==="pad")&&O++}}console.log(`[Connectivity] Added ${de} vias, ${ze} pads, ${he} trace points to graph`),O>0&&console.log(`[Connectivity] Found ${O} nodes where vias/pads share Node IDs with trace points (automatic connection)`);for(const xe of T)if(xe.pointId!==void 0){const ye=_.find(ve=>ve.id===xe.powerBusId);I.set(xe.pointId,{id:xe.pointId,type:"power",x:xe.x,y:xe.y,voltage:ye?.voltage||xe.type||"UNKNOWN",powerBusId:xe.powerBusId})}for(const xe of S){const ye=xe;ye.pointId!==void 0&&I.set(ye.pointId,{id:ye.pointId,type:"ground",x:xe.x,y:xe.y})}let me=0,oe=0,ke=0;for(const xe of z){const ye=xe.abbreviation?.trim()||xe.designator?.trim();if(ye)for(let ve=0;ve<xe.pinCount;ve++){const le=xe.pinConnections?.[ve]||"";if(le&&le.trim()!==""){const m=parseInt(le.trim(),10);if(!isNaN(m)&&m>0)if(me++,!I.has(m))I.set(m,{id:m,type:"component_pin",x:xe.x,y:xe.y,componentId:xe.id,pinIndex:ve}),ke++,console.warn(`[Connectivity] Component ${ye} pin ${ve+1}: Node ID ${m} does NOT exist in vias/pads/traces - creating isolated component pin node`);else{const k=I.get(m),L=k.type;k.componentId=xe.id,k.pinIndex=ve,k.type="component_pin",oe++,console.log(`[Connectivity] Component ${ye} pin ${ve+1}: Connected to existing Node ID ${m} (was ${L})`)}}}}return console.log(`[Connectivity] Component pins: ${me} total, ${oe} connected to existing nodes, ${ke} isolated (no matching via/pad/trace)`),I}function Gy(A,z){const T=new Vy;let S=0,_=0;for(const[me,oe]of z)A.has(me)&&A.has(oe)?(T.union(me,oe),S++):(A.has(me)||_++,A.has(oe)||_++);console.log(`[Connectivity] Union-find: Processed ${z.length} connections, ${S} valid, ${_} missing nodes`);const I=[];for(const[me,oe]of A)oe.type==="ground"&&I.push(me);if(I.length>1){const me=I[0];for(let oe=1;oe<I.length;oe++)T.union(me,I[oe]);console.log(`[Connectivity] Unified ${I.length} ground nodes into a single net`)}const de=new Map;for(const[me,oe]of A)if(oe.type==="power"&&oe.voltage){const ke=oe.voltage.trim();de.has(ke)||de.set(ke,[]),de.get(ke).push(me)}for(const[me,oe]of de)if(oe.length>1){const ke=oe[0];for(let xe=1;xe<oe.length;xe++)T.union(ke,oe[xe]);console.log(`[Connectivity] Unified ${oe.length} power nodes with voltage "${me}" into a single net`)}for(const me of A.keys())T.find(me);const ze=T.getGroups(),he=new Map;console.log(`[Connectivity] Union-find created ${ze.size} net groups`);const O=new Map;for(const[,me]of ze){const oe=me.length;O.set(oe,(O.get(oe)||0)+1)}console.log("[Connectivity] Net size distribution:",Array.from(O.entries()).sort((me,oe)=>oe[0]-me[0]).slice(0,10));for(const[me,oe]of ze){const ke=oe.map(xe=>A.get(xe)).filter(xe=>xe!==void 0);he.set(me,ke)}return he}function Iy(A,z){const T=new Map;let S=1;for(const[_,I]of A){if(I.some(he=>he.type==="ground")){T.set(_,"GND");continue}const ze=I.filter(he=>he.type==="power");if(ze.length>0){let O=(ze[0].voltage||"UNKNOWN").trim();O&&!O.startsWith("+")&&!O.startsWith("-")&&!O.startsWith("AC")&&(O="+"+O),T.set(_,O);continue}T.set(_,`N$${S++}`)}return T}function qy(A,z,T,S,_){const I=Xy(z,A,T,S,_),de=Array.from(I.values()).filter(N=>N.type==="component_pin");console.log(`[Schematic] Component pin nodes in graph: ${de.length}`),de.length>0&&console.log("[Schematic] Sample component pin nodes:",de.slice(0,5).map(N=>`Node ID ${N.id} (compId: ${N.componentId}, pinIndex: ${N.pinIndex})`));const ze=[];for(const N of z)if(N.type==="trace"&&N.points.length>=2)for(let ne=0;ne<N.points.length-1;ne++){const we=N.points[ne],x=N.points[ne+1];we&&x&&we.id!==void 0&&x.id!==void 0&&we.id!==x.id&&ze.push([we.id,x.id])}console.log(`[Schematic] Trace connections: ${ze.length} (connecting nodes with different Node IDs)`);const he=Gy(I,ze),O=Iy(he);if(console.log(`[Schematic] Net groups created: ${he.size}`),de.length>0){const N=[];for(const ne of de){let we=!1;for(const[,x]of he)if(x.some(R=>R.id===ne.id)){we=!0;break}if(!we){const x=A.find(ce=>ce.id===ne.componentId),R=x&&(x.abbreviation?.trim()||x.designator?.trim())||"UNKNOWN";N.push({compId:ne.componentId||"unknown",designator:R,pinIndex:ne.pinIndex||0,nodeId:ne.id})}}if(N.length>0){console.warn(`[Schematic] Found ${N.length} isolated component pins (not in any net):`);for(const ne of N.slice(0,10))console.warn(`  - ${ne.designator} pin ${ne.pinIndex+1} at Node ID ${ne.nodeId}`)}else console.log("[Schematic] All component pins are in nets")}const me=new Map;for(const N of A){let ne=N.designator?.trim()||N.abbreviation?.trim();ne&&(ne==="?"||ne==="??"||ne==="***"||ne==="****"||ne==="*")&&(ne=""),ne&&ne.length>0?(me.set(N.id,ne),console.log(`[Schematic] Mapped component ${N.id} to designator "${ne}"`)):console.warn(`[Schematic] Component ${N.id} (type: ${N.componentType}) has no valid designator`)}console.log(`[Schematic] Component ID to designator map: ${me.size} components`);const oe=[];let ke=0,xe=0;const ye=new Map;for(const[N,ne]of he){ke++;const we=[];for(const x of ne)x.type==="component_pin"&&x.componentId&&x.pinIndex!==void 0&&(we.push(x),xe++);we.length>0&&ye.set(N,we)}for(const[N,ne]of he){const we=O.get(N)||`N$${N}`,x=[];let R=!1,ce=!1,Ce,De=0,Ve=0;for(const je of ne)if(je.type==="component_pin"&&je.componentId&&je.pinIndex!==void 0){const Ke=me.get(je.componentId);if(Ke)x.push({designator:Ke,pin:(je.pinIndex||0)+1});else{const lt=A.find(Jt=>Jt.id===je.componentId),hn=lt?lt.designator?.trim()||lt.abbreviation?.trim()||"NONE":"NOT_FOUND";console.warn(`[Schematic] Component pin found but no designator in map for componentId: ${je.componentId}, component designator: "${hn}", node: Node ID ${je.id}, pinIndex: ${je.pinIndex}`)}}else je.type==="power"?(R=!0,Ce=je.voltage||Ce):je.type==="ground"?ce=!0:je.type==="via"?De++:je.type==="trace_point"&&Ve++;oe.push({name:we,componentPins:x,hasPower:R,hasGround:ce,powerVoltage:Ce,viaCount:De,tracePointCount:Ve})}console.log(`[Schematic] Total net groups: ${ke}, Component pins found: ${xe}`),console.log(`[Schematic] Nets with component pins: ${ye.size}`),console.log(`[Schematic] Generated ${oe.length} total nets (including power/ground and single-pin connections)`);const ve=oe.filter(N=>N.componentPins.length>=2).length,le=oe.filter(N=>N.hasPower).length,m=oe.filter(N=>N.hasGround).length;if(console.log(`[Schematic] - ${ve} nets with 2+ component pins`),console.log(`[Schematic] - ${le} power nets`),console.log(`[Schematic] - ${m} ground nets`),ye.size>0){console.log("[Schematic] Sample nets with component pins:");let N=0;for(const[ne,we]of ye){if(N++>=5)break;const x=O.get(ne)||`N$${ne}`,R=we.map(ce=>`${me.get(ce.componentId)||"unknown"}:pin${(ce.pinIndex||0)+1}@NodeID${ce.id}`);console.log(`  Net ${x} (root Node ID ${ne}): ${we.length} pins - ${R.join(", ")}`)}}oe.length>0?console.log(`[Schematic] First net: ${oe[0].name} with ${oe[0].componentPins.length} pins:`,oe[0].componentPins):(console.warn("[Schematic] No nets with 2+ component pins found! Each component pin is in its own net."),console.warn("[Schematic] This suggests component pins are not connected through traces/vias."));const k=new Map,L=A.filter(N=>{let ne=N.designator?.trim()||N.abbreviation?.trim();return ne&&(ne==="?"||ne==="??"||ne==="***"||ne==="****"||ne==="*")&&(ne=""),!!ne&&ne.length>0}),He=50.8,q=Math.ceil(Math.sqrt(L.length));let $=25.4,fe=25.4,Ge=0;for(const N of L){let ne=N.designator?.trim()||N.abbreviation?.trim();ne&&(ne==="?"||ne==="??"||ne==="***"||ne==="****"||ne==="*")&&(ne=""),ne&&ne.length>0&&(k.set(ne,{comp:N,designator:ne,x:$,y:fe}),Ge++,Ge>=q?(Ge=0,$=25.4,fe+=He):$+=He)}let j=`(kicad_sch (version 20201015) (generator simple_schematic)
`;j+=`  (paper "A4")
`,j+=`  (title_block
`,j+=`    (title "")
`,j+=`    (date "")
`,j+=`    (rev "")
`,j+=`    (company "")
`,j+=`  )
`,j+=`
`,j+=`  (lib_symbols
`,j+=`    (symbol "simple:Power" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,j+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,j+=`        (effects (font (size 1.27 1.27)) hide)
`,j+=`      )
`,j+=`      (symbol "Power_0_1"
`,j+=`        (polyline (pts (xy 0 0) (xy 0 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (polyline (pts (xy -1.27 0) (xy 1.27 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (polyline (pts (xy -0.635 -1.27) (xy 0.635 -1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (polyline (pts (xy -0.3175 -1.905) (xy 0.3175 -1.905)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`      )
`,j+=`    )
`,j+=`    (symbol "simple:Ground" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,j+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,j+=`        (effects (font (size 1.27 1.27)) hide)
`,j+=`      )
`,j+=`      (symbol "Ground_0_1"
`,j+=`        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (polyline (pts (xy -2.54 2.54) (xy 2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (polyline (pts (xy -1.27 3.81) (xy 1.27 3.81)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (polyline (pts (xy -0.635 4.445) (xy 0.635 4.445)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`      )
`,j+=`    )
`,j+=`    (symbol "simple:Resistor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,j+=`      (property "Reference" "R" (id 0) (at 0 3.81 0)
`,j+=`        (effects (font (size 1.27 1.27)))
`,j+=`      )
`,j+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,j+=`        (effects (font (size 1.27 1.27)))
`,j+=`      )
`,j+=`      (symbol "Resistor_0_1"
`,j+=`        (polyline (pts (xy -3.81 0) (xy -2.54 0) (xy -1.27 1.27) (xy 0 -1.27) (xy 1.27 1.27) (xy 2.54 -1.27) (xy 3.81 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (pin passive line (at -6.35 0 0) (length 2.54)
`,j+=`          (name "1" (effects (font (size 1.27 1.27))))
`,j+=`          (number "1" (effects (font (size 1.27 1.27))))
`,j+=`        )
`,j+=`        (pin passive line (at 6.35 0 180) (length 2.54)
`,j+=`          (name "2" (effects (font (size 1.27 1.27))))
`,j+=`          (number "2" (effects (font (size 1.27 1.27))))
`,j+=`        )
`,j+=`      )
`,j+=`    )
`,j+=`    (symbol "simple:Capacitor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,j+=`      (property "Reference" "C" (id 0) (at 0 3.81 0)
`,j+=`        (effects (font (size 1.27 1.27)))
`,j+=`      )
`,j+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,j+=`        (effects (font (size 1.27 1.27)))
`,j+=`      )
`,j+=`      (symbol "Capacitor_0_1"
`,j+=`        (polyline (pts (xy 0 -2.54) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (polyline (pts (xy -2.54 -2.54) (xy -2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (polyline (pts (xy 2.54 -2.54) (xy 2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,j+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,j+=`          (name "1" (effects (font (size 1.27 1.27))))
`,j+=`          (number "1" (effects (font (size 1.27 1.27))))
`,j+=`        )
`,j+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,j+=`          (name "2" (effects (font (size 1.27 1.27))))
`,j+=`          (number "2" (effects (font (size 1.27 1.27))))
`,j+=`        )
`,j+=`      )
`,j+=`    )
`,j+=`    (symbol "simple:IC" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,j+=`      (property "Reference" "U" (id 0) (at 0 2.54 0)
`,j+=`        (effects (font (size 1.27 1.27)))
`,j+=`      )
`,j+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,j+=`        (effects (font (size 1.27 1.27)))
`,j+=`      )
`,j+=`      (symbol "IC_0_1"
`,j+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,j+=`          (stroke (width 0.254)) (fill (type background))
`,j+=`        )
`,j+=`      )
`,j+=`      (symbol "IC_1_1"
`;for(let N=0;N<10;N++){const ne=N+1,we=-11.43+N*2.54;j+=`        (pin passive line (at ${-5.08} ${we} 0) (length 2.54)
`,j+=`          (name "${ne}" (effects (font (size 1.27 1.27))))
`,j+=`          (number "${ne}" (effects (font (size 1.27 1.27))))
`,j+=`        )
`}for(let N=0;N<10;N++){const ne=N+11,we=-11.43+N*2.54;j+=`        (pin passive line (at ${5.08} ${we} 180) (length 2.54)
`,j+=`          (name "${ne}" (effects (font (size 1.27 1.27))))
`,j+=`          (number "${ne}" (effects (font (size 1.27 1.27))))
`,j+=`        )
`}j+=`      )
`,j+=`    )
`,j+=`    (symbol "simple:Generic" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,j+=`      (property "Reference" "REF" (id 0) (at 0 2.54 0)
`,j+=`        (effects (font (size 1.27 1.27)))
`,j+=`      )
`,j+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,j+=`        (effects (font (size 1.27 1.27)))
`,j+=`      )
`,j+=`      (symbol "Generic_0_1"
`,j+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,j+=`          (stroke (width 0.254)) (fill (type background))
`,j+=`        )
`,j+=`      )
`,j+=`      (symbol "Generic_1_1"
`;for(let N=0;N<10;N++){const ne=N+1,we=-11.43+N*2.54;j+=`        (pin passive line (at ${-5.08} ${we} 0) (length 2.54)
`,j+=`          (name "${ne}" (effects (font (size 1.27 1.27))))
`,j+=`          (number "${ne}" (effects (font (size 1.27 1.27))))
`,j+=`        )
`}for(let N=0;N<10;N++){const ne=N+11,we=-11.43+N*2.54;j+=`        (pin passive line (at ${5.08} ${we} 180) (length 2.54)
`,j+=`          (name "${ne}" (effects (font (size 1.27 1.27))))
`,j+=`          (number "${ne}" (effects (font (size 1.27 1.27))))
`,j+=`        )
`}j+=`      )
`,j+=`    )
`,j+=`  )
`,j+=`
`;let et=1;const Ne=()=>`00000000-0000-0000-0000-${String(et++).padStart(12,"0")}`,nt=N=>{switch(N){case"Resistor":return"simple:Resistor";case"Capacitor":return"simple:Capacitor";case"IntegratedCircuit":return"simple:IC";default:return"simple:Generic"}},it=(N,ne)=>{if(!N.pinConnections||N.pinConnections.length===0)return 0;const we=[];for(let R=0;R<N.pinConnections.length;R++){const ce=N.pinConnections[R];if(ce&&ce.trim()!==""){const Ce=parseInt(ce.trim(),10);if(!isNaN(Ce)&&ne.has(Ce)){const De=ne.get(Ce);(De.type==="via"||De.type==="pad")&&we.push({pinIndex:R,x:De.x,y:De.y})}}}if(we.length<2)return 0;if(N.pinCount===2&&we.length>=2){const R=we.find(Ce=>Ce.pinIndex===0),ce=we.find(Ce=>Ce.pinIndex===1);if(R&&ce){const Ce=R.x-N.x,De=R.y-N.y;return Math.abs(Ce)>Math.abs(De)?Ce<0?0:180:De<0?90:270}}const x=we.find(R=>R.pinIndex===0);if(x){const R=x.x-N.x,ce=x.y-N.y;return Math.abs(R)>Math.abs(ce)?R<0?ce<0?0:270:ce<0?90:180:ce<0?R<0?0:90:R<0?270:180}return 0};for(const[N,ne]of k){const we=Ne(),x=ne.comp,R=nt(x.componentType);let ce=x.rotation!==void 0?x.rotation:it(x,I);ce=Math.round(ce/90)*90,ce<0&&(ce+=360),ce>=360&&(ce-=360),j+=`  (symbol (lib_id "${R}") (at ${ne.x} ${ne.y} ${ce}) (unit 1)
`,j+=`    (in_bom yes) (on_board yes) (dnp no)
`,j+=`    (uuid ${we})
`,j+=`    (property "Reference" "${N}" (id 0) (at ${ne.x} ${ne.y+3.81} 0)
`,j+=`      (effects (font (size 1.27 1.27)))
`,j+=`    )
`,j+=`    (property "Value" "${x.componentType}" (id 1) (at ${ne.x} ${ne.y-3.81} 0)
`,j+=`      (effects (font (size 1.27 1.27)))
`,j+=`    )
`,j+=`  )
`}j+=`
`;let gt=25.4,Ye=25.4;const H=25.4,J=new Map;console.log(`[Schematic] Processing ${oe.length} nets for wire generation`);for(const N of oe){if(N.hasPower&&N.powerVoltage){const x=`PWR_${N.powerVoltage}`;if(!J.has(x)){const R=Ne();J.set(x,{x:gt,y:Ye,uuid:R}),j+=`  (symbol (lib_id "simple:Power") (at ${gt} ${Ye} 0) (unit 1)
`,j+=`    (in_bom no) (on_board no) (dnp no)
`,j+=`    (uuid ${R})
`,j+=`    (property "Reference" "#PWR" (id 0) (at ${gt} ${Ye} 0)
`,j+=`      (effects (font (size 1.27 1.27)) hide)
`,j+=`    )
`,j+=`    (property "Value" "${N.powerVoltage}" (id 1) (at ${gt} ${Ye-5.08} 0)
`,j+=`      (effects (font (size 1.27 1.27)))
`,j+=`    )
`,j+=`  )
`,gt+=H}}if(N.hasGround&&!J.has("GND")){const R=Ne();J.set("GND",{x:gt,y:Ye,uuid:R}),j+=`  (symbol (lib_id "simple:Ground") (at ${gt} ${Ye} 0) (unit 1)
`,j+=`    (in_bom no) (on_board no) (dnp no)
`,j+=`    (uuid ${R})
`,j+=`    (property "Reference" "#PWR" (id 0) (at ${gt} ${Ye} 0)
`,j+=`      (effects (font (size 1.27 1.27)) hide)
`,j+=`    )
`,j+=`    (property "Value" "GND" (id 1) (at ${gt} ${Ye+5.08} 0)
`,j+=`      (effects (font (size 1.27 1.27)))
`,j+=`    )
`,j+=`  )
`,gt+=H}if(N.componentPins.length===0)continue;console.log(`[Schematic] Processing net ${N.name} with ${N.componentPins.length} component pins:`,N.componentPins);const ne=[...N.componentPins].sort((x,R)=>{const ce=x.designator.localeCompare(R.designator);return ce!==0?ce:x.pin-R.pin}),we=[];for(const x of ne){const R=k.get(x.designator);if(!R){console.warn(`[Schematic] Component ${x.designator} not found in componentMap for net ${N.name}`);continue}const ce=R.comp,Ce=ce.pinCount||2,De=2.54;let Ve,je;if(Ce===2){const Ke=nt(ce.componentType);Ke==="simple:Resistor"?x.pin===1?(Ve=R.x-6.35,je=R.y):(Ve=R.x+6.35,je=R.y):x.pin===1?(Ve=R.x-5.08,je=R.y):(Ve=R.x+5.08,je=R.y)}else{const Ke=Math.ceil(Ce/2),lt=Math.floor(Ce/2);if(x.pin<=Ke){Ve=R.x-5.08;const Jt=x.pin-1;je=R.y-(Ke-1)*De/2+Jt*De}else{Ve=R.x+5.08;const Jt=x.pin-Ke-1;je=R.y-(lt-1)*De/2+Jt*De}}we.push({x:Ve,y:je,designator:x.designator,pin:x.pin})}if(we.length>=1){const x=we.length>1?we.reduce((je,Ke)=>je+Ke.x,0)/we.length:we[0].x+10,R=we.length>1?we.reduce((je,Ke)=>je+Ke.y,0)/we.length:we[0].y;if(N.hasPower&&N.powerVoltage){const je=`PWR_${N.powerVoltage}`,Ke=J.get(je);if(Ke){const lt=Ke.y-2.54,hn=Ke.x,Jt=Ne();j+=`  (junction (at ${hn} ${lt}) (diameter 0) (color 0 0 0 0) (uuid ${Jt}))
`;const Sl=Ne();j+=`  (wire (pts (xy ${x} ${R}) (xy ${hn} ${lt})) (stroke (width 0) (type default)) (uuid ${Sl}))
`}}if(N.hasGround){const Ke=J.get("GND");if(Ke){const lt=Ke.y+2.54,hn=Ke.x,Jt=Ne();j+=`  (junction (at ${hn} ${lt}) (diameter 0) (color 0 0 0 0) (uuid ${Jt}))
`;const Sl=Ne();j+=`  (wire (pts (xy ${x} ${R}) (xy ${hn} ${lt})) (stroke (width 0) (type default)) (uuid ${Sl}))
`}}if(we.length>=2){console.log(`[Schematic] Creating wires for net ${N.name}: ${we.length} pins to center (${x}, ${R})`);const je=Ne();j+=`  (junction (at ${x} ${R}) (diameter 0) (color 0 0 0 0) (uuid ${je}))
`;for(const Ke of we){const lt=Ne();console.log(`[Schematic] Wire from ${Ke.designator}:pin${Ke.pin} (${Ke.x}, ${Ke.y}) to center (${x}, ${R})`),j+=`  (wire (pts (xy ${Ke.x} ${Ke.y}) (xy ${x} ${R})) (stroke (width 0) (type default)) (uuid ${lt}))
`}}else if(we.length===1){console.log(`[Schematic] Creating junction for single-pin net ${N.name} at (${we[0].x}, ${we[0].y})`);const je=Ne();j+=`  (junction (at ${we[0].x} ${we[0].y}) (diameter 0) (color 0 0 0 0) (uuid ${je}))
`}else console.warn(`[Schematic] Net ${N.name} has ${N.componentPins.length} component pins but 0 valid pin positions!`);const ce=we.length>1?R+5.08:we[0].y+5.08,Ce=we.length>1?x:we[0].x,De=Ne(),Ve=N.hasPower&&N.powerVoltage?N.powerVoltage:N.hasGround?"GND":N.name;j+=`  (text "${Ve}" (at ${Ce} ${ce} 0)
`,j+=`    (effects (font (size 1.27 1.27)))
`,j+=`    (uuid ${De})
`,j+=`  )
`}}return j+=`)
`,j}function $y(){const A=new Date,z=A.getFullYear(),T=String(A.getMonth()+1).padStart(2,"0"),S=String(A.getDate()).padStart(2,"0"),_=String(A.getHours()).padStart(2,"0"),I=String(A.getMinutes()).padStart(2,"0"),de=String(A.getSeconds()).padStart(2,"0");return`${z}_${T}_${S}-${_}-${I}-${de}`}const Zy=({openMenu:A,setOpenMenu:z,isReadOnlyMode:T,currentProjectFilePath:S,onNewProject:_,onOpenProject:I,onSaveProject:de,onSaveAs:ze,onExportSchematic:he,onPrint:O,hasUnsavedChanges:me,setNewProjectDialog:oe,setAutoSaveDialog:ke,topImage:xe,bottomImage:ye,selectedImageForTransform:ve,setSelectedImageForTransform:le,setCurrentTool:m,transformMode:k,setTransformMode:L,updateImageTransform:He,resetImageTransform:q,isGrayscale:$,setIsGrayscale:fe,isBlackAndWhiteEdges:Ge,setIsBlackAndWhiteEdges:j,isBlackAndWhiteInverted:et,setIsBlackAndWhiteInverted:Ne,areImagesLocked:nt,setAreImagesLocked:it,fileInputTopRef:gt,fileInputBottomRef:Ye,openProjectRef:H,increaseSize:J,decreaseSize:N,brushSize:ne,drawingStrokes:we,selectedIds:x,selectedComponentIds:R,selectedPowerIds:ce,selectedGroundIds:Ce,componentsTop:De,componentsBottom:Ve,powers:je,grounds:Ke,setSetSizeDialog:lt,areViasLocked:hn,setAreViasLocked:Jt,arePadsLocked:Sl,setArePadsLocked:qe,areTracesLocked:mt,setAreTracesLocked:Wo,areComponentsLocked:Ze,setAreComponentsLocked:Yt,areGroundNodesLocked:ql,setAreGroundNodesLocked:ma,arePowerNodesLocked:Dt,setArePowerNodesLocked:yn,setSelectedIds:$l,setSelectedComponentIds:go,setSelectedPowerIds:Ae,setSelectedGroundIds:La,setShowPowerBusManager:pt,menuBarRef:jn})=>{const Bl=()=>{if(x.size>0){const tt=we.filter(an=>x.has(an.id));if(tt.length>0)return tt[0].size}else if(R.size>0){const tt=[...De,...Ve].find(an=>R.has(an.id));if(tt)return tt.size||18}else if(ce.size>0){const tt=je.find(an=>ce.has(an.id));if(tt)return tt.size}else if(Ce.size>0){const tt=Ke.find(an=>Ce.has(an.id));if(tt)return tt.size||18}return ne};return s.jsxs("div",{ref:jn,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:tt=>{tt.stopPropagation(),z(an=>an==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:A==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),A==="file"&&s.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[s.jsx("button",{onClick:()=>{T||(z(null),me()?oe({visible:!0}):_())},disabled:T,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:T?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:T?"not-allowed":"pointer"},children:"New Project"}),s.jsx("button",{onClick:async()=>{await I(),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsx("button",{onClick:()=>{T||(de(),z(null))},disabled:T,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:T?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:T?"not-allowed":"pointer"},children:"Save Project"}),s.jsx("button",{onClick:()=>{T||(ze(),z(null))},disabled:T,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:T?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:T?"not-allowed":"pointer"},children:"Save As"}),s.jsx("button",{onClick:()=>{T||(ke({visible:!0,interval:5}),z(null))},disabled:T,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:T?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:T?"not-allowed":"pointer"},children:"Auto Save"}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsx("button",{onClick:()=>{T||(he(),z(null))},disabled:T,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:T?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:T?"not-allowed":"pointer"},children:"Export Simple Schematic"}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsx("button",{onClick:()=>{O(),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),s.jsx("button",{onClick:()=>{O(),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:tt=>{T||(tt.stopPropagation(),z(an=>an==="transform"?null:"transform"))},disabled:T,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:A==="transform"?"#eef3ff":"#fff",fontWeight:600,color:T?"#999":"#222",cursor:T?"not-allowed":"pointer",opacity:T?.5:1},children:"Images "}),A==="transform"&&s.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[s.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),s.jsx("button",{onClick:()=>{T||(gt.current?.click(),z(null))},disabled:T,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:T?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:T?"not-allowed":"pointer"},children:"Load Top PCB"}),s.jsx("button",{onClick:()=>{T||(Ye.current?.click(),z(null))},disabled:T,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:T?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:T?"not-allowed":"pointer"},children:"Load Bottom PCB"}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),s.jsxs("button",{disabled:!xe,onClick:()=>{le("top"),m("transform"),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:xe?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[ve==="top"?" ":"","Top Image"]}),s.jsxs("button",{disabled:!ye,onClick:()=>{le("bottom"),m("transform"),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ye?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[ve==="bottom"?" ":"","Bottom Image"]}),s.jsxs("button",{disabled:!xe||!ye,onClick:()=>{le("both"),m("transform"),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:xe&&ye?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[ve==="both"?" ":"","Both Images"]}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsx("button",{onClick:()=>{if(ve)if(ve==="both"){const tt=!xe?.flipX;He("both",{flipX:tt})}else{const tt=ve==="top"?xe?.flipX||!1:ye?.flipX||!1;He(ve,{flipX:!tt})}z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Horizontal Flip"}),s.jsx("button",{onClick:()=>{if(ve)if(ve==="both"){const tt=!xe?.flipY;He("both",{flipY:tt})}else{const tt=ve==="top"?xe?.flipY||!1:ye?.flipY||!1;He(ve,{flipY:!tt})}z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Vertical Flip"}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsxs("button",{onClick:()=>{L("nudge"),m("transform"),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[k==="nudge"?" ":"","Mode: Nudge"]}),s.jsxs("button",{onClick:()=>{L("scale"),m("transform"),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[k==="scale"?" ":"","Mode: Scale"]}),s.jsxs("button",{onClick:()=>{L("rotate"),m("transform"),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[k==="rotate"?" ":"","Mode: Rotate"]}),s.jsxs("button",{onClick:()=>{L("slant"),m("transform"),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[k==="slant"?" ":"","Mode: Slant"]}),s.jsxs("button",{onClick:()=>{L("keystone"),m("transform"),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[k==="keystone"?" ":"","Mode: Keystone"]}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsx("button",{onClick:()=>{m("transform"),$||Ge?(fe(!1),j(!1),Ne(!1)):fe(!0),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:$||Ge?"Color Mode":"Grayscale Mode"}),s.jsx("button",{onClick:()=>{m("transform"),Ge?Ne(tt=>!tt):(j(!0),Ne(!1)),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:Ge?"Invert Edges":"Black & White Edges"}),s.jsx("button",{onClick:()=>{m("transform"),q(),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Reset Transform"}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsxs("button",{onClick:()=>{it(tt=>!tt),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Images ",nt?"":""]})]})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:tt=>{T||(tt.stopPropagation(),z(an=>an==="tools"?null:"tools"))},disabled:T,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:A==="tools"?"#eef3ff":"#fff",fontWeight:600,color:T?"#999":"#222",cursor:T?"not-allowed":"pointer",opacity:T?.5:1},children:"Tools "}),A==="tools"&&s.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[s.jsx("button",{onClick:()=>{J(),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),s.jsx("button",{onClick:()=>{N(),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsx("button",{onClick:()=>{lt({visible:!0,size:Bl()}),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Set Size"}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsxs("button",{onClick:()=>{Jt(tt=>!tt),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Vias ",hn?"":""]}),s.jsxs("button",{onClick:()=>{qe(tt=>!tt),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Pads ",Sl?"":""]}),s.jsxs("button",{onClick:()=>{Wo(tt=>!tt),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Traces ",mt?"":""]}),s.jsxs("button",{onClick:()=>{Yt(tt=>!tt),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Components ",Ze?"":""]}),s.jsxs("button",{onClick:()=>{ma(tt=>!tt),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Ground Node ",ql?"":""]}),s.jsxs("button",{onClick:()=>{yn(tt=>!tt),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Power Nodes ",Dt?"":""]}),s.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),s.jsx("button",{onClick:()=>{pt(!0),z(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"})]})]}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:tt=>{tt.stopPropagation(),z(an=>an==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:A==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),A==="about"&&s.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:400,maxWidth:600,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:16,overflowY:"auto",zIndex:100},children:s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("h2",{style:{margin:"0 0 12px 0",color:"#000",fontSize:"18px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),s.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images."}),s.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"This application supports typical 4-layer PCBs and allows you to load top and bottom PCB images, trace connections, place components, and export schematics in KiCad format."}),s.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:s.jsx("strong",{children:"Key Features:"})}),s.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:[s.jsx("li",{children:"Load and align top and bottom PCB images"}),s.jsx("li",{children:"Trace connections with automatic node snapping"}),s.jsx("li",{children:"Place and annotate components with pin connections"}),s.jsx("li",{children:"Manage power buses and ground connections"}),s.jsx("li",{children:"Export to KiCad schematic format"}),s.jsx("li",{children:"Auto-save functionality for project management"})]}),s.jsxs("p",{style:{margin:"0 0 0 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:["Use the ",s.jsx("strong",{children:"File"})," menu to create new projects, save your work, and export schematics. The ",s.jsx("strong",{children:"Images"})," menu provides tools for aligning and transforming PCB images. The ",s.jsx("strong",{children:"Tools"})," menu offers size adjustments and locking controls for different PCB elements."]})]})})]}),S&&s.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:s.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:S,children:S})})]})},Py=({visible:A})=>A?s.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[s.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),s.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),s.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5"},children:["Use the ",s.jsx("strong",{children:"File"})," menu to start a new project."]}),s.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5"},children:["Use the ",s.jsx("strong",{children:"Images"})," menu to load PCB photos."]})]}):null,Qy=({visible:A,title:z,message:T,onClose:S})=>A?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:_=>{_.target===_.currentTarget&&S()},children:s.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[s.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),s.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:z})]}),s.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:T}),s.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:s.jsx("button",{onClick:S,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,Fy=({visible:A,selectedIds:z,selectedComponentIds:T,selectedPowerIds:S,selectedGroundIds:_,drawingStrokes:I,componentsTop:de,componentsBottom:ze,powers:he,grounds:O,powerBuses:me,onClose:oe,setComponentsTop:ke,setComponentsBottom:xe,determineViaType:ye,determinePadType:ve})=>A?s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"20px",zIndex:1e4,pointerEvents:"none"},children:s.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:8,padding:"20px",minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",position:"relative",pointerEvents:"auto",border:"1px solid #ddd"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[s.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#222"},children:"Detailed Information"}),s.jsx("button",{onClick:oe,style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:0,width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),s.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const le=I.filter(q=>z.has(q.id)).length,m=[...de,...ze].filter(q=>T.has(q.id)).length,k=he.filter(q=>S.has(q.id)).length,L=O.filter(q=>_.has(q.id)).length,He=le+m+k+L;return He>0?s.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#e8e8e8",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:"#333",marginBottom:"8px"},children:[He," Object",He!==1?"s":""," Selected"]}):null})(),T.size>0&&(()=>{const le=I.some(m=>z.has(m.id)&&(m.type==="via"||m.type==="pad"));return[...de,...ze].filter(m=>T.has(m.id)).map(m=>s.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[s.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[s.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),s.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:m.componentType})]}),s.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[s.jsxs("div",{children:["Layer: ",m.layer]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsxs("span",{children:["Designator: ",m.designator||"(empty)"]}),le&&s.jsx("button",{onClick:()=>{const k=[...de,...ze].filter(et=>T.has(et.id)&&et.componentType===m.componentType),L=k.length,He=I.filter(et=>z.has(et.id)&&et.type==="pad"&&et.points.length>0&&et.points[0].id!==void 0).map(et=>{const Ne=et.points[0].id;if(Ne===void 0)throw new Error("Unexpected undefined id");return{stroke:et,nodeId:Ne}}).sort((et,Ne)=>et.nodeId-Ne.nodeId),q=He.length>0?He:I.filter(et=>z.has(et.id)&&et.type==="via"&&et.points.length>0&&et.points[0].id!==void 0).map(et=>{const Ne=et.points[0].id;if(Ne===void 0)throw new Error("Unexpected undefined id");return{stroke:et,nodeId:Ne}}).sort((et,Ne)=>et.nodeId-Ne.nodeId),$=q.length;if($===0){console.warn("No vias or pads with Node IDs found in selection");return}const fe=Math.floor($/L);if(fe===0){console.warn(`Not enough ${He.length>0?"pads":"vias"} (${$}) for ${L} components`);return}[...k].sort((et,Ne)=>et.id.localeCompare(Ne.id)).forEach((et,Ne)=>{const nt=Ne*fe,it=nt+fe,Ye=q.slice(nt,it).map(H=>H.nodeId.toString());et.layer==="top"?ke(H=>H.map(J=>J.id===et.id?{...J,pinCount:fe,pinConnections:Ye}:J)):xe(H=>H.map(J=>J.id===et.id?{...J,pinCount:fe,pinConnections:Ye}:J))});const j=He.length>0?"pads":"vias";console.log(`Connected ${L} components of type ${m.componentType} to ${$} ${j} (${fe} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),s.jsxs("div",{children:["Abbreviation: ",m.abbreviation||"(empty)"]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("span",{children:"Color:"}),s.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:m.color,border:"1px solid #ccc",borderRadius:2}}),s.jsx("span",{children:m.color})]}),s.jsxs("div",{children:["Size: ",m.size]}),s.jsxs("div",{children:["Pin Count: ",m.pinCount]}),m.pinConnections&&m.pinConnections.length>0&&s.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[s.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),s.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),s.jsx("tbody",{children:m.pinConnections.map((k,L)=>s.jsxs("tr",{style:{backgroundColor:L%2===0?"#fff":"#f9f9f9"},children:[s.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:L+1}),s.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:k||"(not connected)"})]},L))})]})]}),"manufacturer"in m&&m.manufacturer&&s.jsxs("div",{children:["Manufacturer: ",m.manufacturer]}),"partNumber"in m&&m.partNumber&&s.jsxs("div",{children:["Part Number: ",m.partNumber]}),m.orientation!==void 0&&m.orientation!==null&&s.jsxs("div",{children:["Orientation: ",m.orientation,""]}),m.componentType==="Resistor"&&s.jsxs(s.Fragment,{children:[m.resistance&&s.jsxs("div",{children:["Resistance: ",m.resistance]}),m.power&&s.jsxs("div",{children:["Power: ",m.power]}),m.tolerance&&s.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),m.componentType==="Capacitor"&&s.jsxs(s.Fragment,{children:[m.capacitance&&s.jsxs("div",{children:["Capacitance: ",m.capacitance]}),m.voltage&&s.jsxs("div",{children:["Voltage: ",m.voltage]}),m.tolerance&&s.jsxs("div",{children:["Tolerance: ",m.tolerance]}),m.dielectric&&s.jsxs("div",{children:["Dielectric: ",m.dielectric]})]}),m.componentType==="Diode"&&s.jsxs(s.Fragment,{children:[m.diodeType&&s.jsxs("div",{children:["Type: ",m.diodeType]}),m.voltage&&s.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&s.jsxs("div",{children:["Current: ",m.current]}),m.ledColor&&s.jsxs("div",{children:["LED Color: ",m.ledColor]})]}),m.componentType==="Battery"&&s.jsxs(s.Fragment,{children:[m.voltage&&s.jsxs("div",{children:["Voltage: ",m.voltage]}),m.capacity&&s.jsxs("div",{children:["Capacity: ",m.capacity]}),m.chemistry&&s.jsxs("div",{children:["Chemistry: ",m.chemistry]})]}),m.componentType==="Fuse"&&s.jsxs(s.Fragment,{children:[m.current&&s.jsxs("div",{children:["Current: ",m.current]}),m.voltage&&s.jsxs("div",{children:["Voltage: ",m.voltage]}),m.fuseType&&s.jsxs("div",{children:["Type: ",m.fuseType]})]}),m.componentType==="FerriteBead"&&s.jsxs(s.Fragment,{children:[m.impedance&&s.jsxs("div",{children:["Impedance: ",m.impedance]}),m.current&&s.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Connector"&&s.jsxs(s.Fragment,{children:[m.connectorType&&s.jsxs("div",{children:["Type: ",m.connectorType]}),m.gender&&s.jsxs("div",{children:["Gender: ",m.gender]})]}),m.componentType==="Jumper"&&s.jsx(s.Fragment,{children:m.positions&&s.jsxs("div",{children:["Positions: ",m.positions]})}),m.componentType==="Relay"&&s.jsxs(s.Fragment,{children:[m.coilVoltage&&s.jsxs("div",{children:["Coil Voltage: ",m.coilVoltage]}),m.contactType&&s.jsxs("div",{children:["Contact Type: ",m.contactType]}),m.current&&s.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Inductor"&&s.jsxs(s.Fragment,{children:[m.inductance&&s.jsxs("div",{children:["Inductance: ",m.inductance]}),m.current&&s.jsxs("div",{children:["Current: ",m.current]}),m.resistance&&s.jsxs("div",{children:["DC Resistance: ",m.resistance]})]}),m.componentType==="Speaker"&&s.jsxs(s.Fragment,{children:[m.impedance&&s.jsxs("div",{children:["Impedance: ",m.impedance]}),m.power&&s.jsxs("div",{children:["Power: ",m.power]})]}),m.componentType==="Motor"&&s.jsxs(s.Fragment,{children:[m.motorType&&s.jsxs("div",{children:["Type: ",m.motorType]}),m.voltage&&s.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&s.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="PowerSupply"&&s.jsxs(s.Fragment,{children:[m.inputVoltage&&s.jsxs("div",{children:["Input Voltage: ",m.inputVoltage]}),m.outputVoltage&&s.jsxs("div",{children:["Output Voltage: ",m.outputVoltage]}),m.current&&s.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Transistor"&&s.jsxs(s.Fragment,{children:[m.transistorType&&s.jsxs("div",{children:["Type: ",m.transistorType]}),m.polarity&&s.jsxs("div",{children:["Polarity: ",m.polarity]}),m.voltage&&s.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&s.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="ResistorNetwork"&&s.jsxs(s.Fragment,{children:[m.resistance&&s.jsxs("div",{children:["Resistance: ",m.resistance]}),m.configuration&&s.jsxs("div",{children:["Configuration: ",m.configuration]})]}),m.componentType==="Thermistor"&&s.jsxs(s.Fragment,{children:[m.resistance&&s.jsxs("div",{children:["Resistance: ",m.resistance]}),m.thermistorType&&s.jsxs("div",{children:["Type: ",m.thermistorType]}),m.beta&&s.jsxs("div",{children:["Beta: ",m.beta]})]}),m.componentType==="Switch"&&s.jsxs(s.Fragment,{children:[m.switchType&&s.jsxs("div",{children:["Type: ",m.switchType]}),m.current&&s.jsxs("div",{children:["Current: ",m.current]}),m.voltage&&s.jsxs("div",{children:["Voltage: ",m.voltage]})]}),m.componentType==="Transformer"&&s.jsxs(s.Fragment,{children:[m.primaryVoltage&&s.jsxs("div",{children:["Primary Voltage: ",m.primaryVoltage]}),m.secondaryVoltage&&s.jsxs("div",{children:["Secondary Voltage: ",m.secondaryVoltage]}),m.power&&s.jsxs("div",{children:["Power: ",m.power]}),m.turns&&s.jsxs("div",{children:["Turns Ratio: ",m.turns]})]}),m.componentType==="TestPoint"&&s.jsx(s.Fragment,{children:m.signal&&s.jsxs("div",{children:["Signal: ",m.signal]})}),m.componentType==="IntegratedCircuit"&&s.jsxs(s.Fragment,{children:[m.description&&s.jsxs("div",{children:["Description: ",m.description]}),m.icType&&s.jsxs("div",{children:["IC Type: ",m.icType]}),m.datasheet&&s.jsxs("div",{children:["Datasheet: ",s.jsx("a",{href:m.datasheet,target:"_blank",rel:"noopener noreferrer",children:m.datasheet})]})]}),m.componentType==="VacuumTube"&&s.jsx(s.Fragment,{children:m.tubeType&&s.jsxs("div",{children:["Type: ",m.tubeType]})}),m.componentType==="VariableResistor"&&s.jsxs(s.Fragment,{children:[m.vrType&&s.jsxs("div",{children:["Type: ",m.vrType]}),m.resistance&&s.jsxs("div",{children:["Resistance: ",m.resistance]}),m.power&&s.jsxs("div",{children:["Power: ",m.power]}),m.taper&&s.jsxs("div",{children:["Taper: ",m.taper]})]}),m.componentType==="Crystal"&&s.jsxs(s.Fragment,{children:[m.frequency&&s.jsxs("div",{children:["Frequency: ",m.frequency]}),m.loadCapacitance&&s.jsxs("div",{children:["Load Capacitance: ",m.loadCapacitance]}),m.tolerance&&s.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),m.componentType==="ZenerDiode"&&s.jsxs(s.Fragment,{children:[m.voltage&&s.jsxs("div",{children:["Zener Voltage: ",m.voltage]}),m.power&&s.jsxs("div",{children:["Power: ",m.power]}),m.tolerance&&s.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),s.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]})]})]},m.id))})(),z.size>0&&I.filter(le=>z.has(le.id)&&le.type==="via"&&le.points.length>0).map(le=>{const m=le.points[0],k=le.viaType||(m.id!==void 0?ye(m.id,me):"Via (Signal)");return s.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[s.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[s.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),s.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k})]}),s.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[m.id&&s.jsxs("div",{children:["Node ID: ",m.id]}),s.jsx("div",{children:"Layer: Top and Bottom"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("span",{children:"Color:"}),s.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:le.color,border:"1px solid #ccc",borderRadius:2}}),s.jsx("span",{children:le.color})]}),s.jsxs("div",{children:["Size: ",le.size]}),s.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]})]})]},le.id)}),z.size>0&&I.filter(le=>z.has(le.id)&&le.type==="pad"&&le.points.length>0).map(le=>{const m=le.points[0],k=le.padType||(m.id!==void 0?ve(m.id,me):"Pad (Signal)");return s.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[s.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[s.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),s.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k})]}),s.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[m.id&&s.jsxs("div",{children:["Node ID: ",m.id]}),s.jsxs("div",{children:["Layer: ",le.layer]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("span",{children:"Color:"}),s.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:le.color,border:"1px solid #ccc",borderRadius:2}}),s.jsx("span",{children:le.color})]}),s.jsxs("div",{children:["Size: ",le.size]}),s.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]})]})]},le.id)}),z.size>0&&I.filter(le=>z.has(le.id)&&le.type==="trace").map(le=>s.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[s.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[s.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),s.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:le.type||"unknown"})]}),s.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[le.points.length>0&&s.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[s.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",le.points.length]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[s.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),s.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),s.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),s.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),s.jsx("tbody",{children:le.points.map((m,k)=>s.jsxs("tr",{style:{backgroundColor:k%2===0?"#fff":"#f9f9f9"},children:[s.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:k}),s.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.x.toFixed(2)}),s.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.y.toFixed(2)}),s.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.id||"(none)"})]},k))})]})]}),s.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",le.layer]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("span",{children:"Color:"}),s.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:le.color,border:"1px solid #ccc",borderRadius:2}}),s.jsx("span",{children:le.color})]}),s.jsxs("div",{children:["Size: ",le.size]})]})]},le.id)),S.size>0&&he.filter(le=>S.has(le.id)).map(le=>{const m=me.find(k=>k.id===le.powerBusId);return s.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[s.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[s.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),s.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:le.type||(m?`${m.name} Power Node`:"Power Node")})]}),s.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[s.jsxs("div",{children:["Node ID: ",le.pointId||"(not assigned)"]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("span",{children:"Color:"}),s.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:le.color,border:"1px solid #ccc",borderRadius:2}}),s.jsx("span",{children:le.color})]}),s.jsxs("div",{children:["Size: ",le.size]}),s.jsxs("div",{children:["Layer: ",le.layer]}),s.jsxs("div",{children:["Power Bus: ",m?.name||le.powerBusId||"(unknown)"]}),s.jsxs("div",{children:["Position: x=",le.x.toFixed(2),", y=",le.y.toFixed(2)]})]})]},le.id)}),_.size>0&&O.filter(le=>_.has(le.id)).map(le=>s.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[s.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[s.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),s.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:le.type||"Ground Node"})]}),s.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[s.jsxs("div",{children:["Node ID: ",le.pointId||"(not assigned)"]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("span",{children:"Color:"}),s.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:le.color,border:"1px solid #ccc",borderRadius:2}}),s.jsx("span",{children:le.color})]}),s.jsxs("div",{children:["Size: ",le.size]}),s.jsxs("div",{children:["Position: x=",le.x.toFixed(2),", y=",le.y.toFixed(2)]})]})]},le.id))]})]})}):null;function Ky(){const[A,z]=v.useState([]),[T,S]=v.useState(!1),[_,I]=v.useState([]),[de,ze]=v.useState(null),[he,O]=v.useState("trace"),[me,oe]=v.useState("top"),ke=v.useRef([]),xe=v.useRef(0),ye=v.useRef(!1),ve=v.useCallback(()=>{S(!0),I([]),ke.current=[]},[]),le=v.useCallback(()=>{S(!1),I([]),ke.current=[]},[]),m=v.useCallback(L=>{I(He=>[...He,L]),ke.current=[...ke.current,L]},[]),k=v.useCallback(L=>{z(He=>[...He,L]),I([]),ke.current=[]},[]);return{drawingStrokes:A,setDrawingStrokes:z,isDrawing:T,setIsDrawing:S,currentStroke:_,setCurrentStroke:I,tracePreviewMousePos:de,setTracePreviewMousePos:ze,drawingMode:he,setDrawingMode:O,selectedDrawingLayer:me,setSelectedDrawingLayer:oe,currentStrokeRef:ke,lastTraceClickTimeRef:xe,isDoubleClickingTraceRef:ye,startDrawing:ve,stopDrawing:le,addPointToStroke:m,finishStroke:k}}function Wy(){const[A,z]=v.useState(new Set),[T,S]=v.useState(!1),[_,I]=v.useState(new Set),[de,ze]=v.useState(new Set),[he,O]=v.useState(new Set),me=v.useCallback(()=>{z(new Set),I(new Set),ze(new Set),O(new Set)},[]),oe=v.useCallback((ye,ve="stroke")=>{ve==="stroke"?z(le=>new Set([...le,ye])):ve==="component"?I(le=>new Set([...le,ye])):ve==="power"?ze(le=>new Set([...le,ye])):ve==="ground"&&O(le=>new Set([...le,ye]))},[]),ke=v.useCallback((ye,ve="stroke")=>{ve==="stroke"?z(le=>{const m=new Set(le);return m.delete(ye),m}):ve==="component"?I(le=>{const m=new Set(le);return m.delete(ye),m}):ve==="power"?ze(le=>{const m=new Set(le);return m.delete(ye),m}):ve==="ground"&&O(le=>{const m=new Set(le);return m.delete(ye),m})},[]),xe=v.useCallback((ye,ve="stroke")=>{ve==="stroke"?z(ye):ve==="component"?I(ye):ve==="power"?ze(ye):ve==="ground"&&O(ye)},[]);return{selectedIds:A,setSelectedIds:z,isSelecting:T,setIsSelecting:S,selectedComponentIds:_,setSelectedComponentIds:I,selectedPowerIds:de,setSelectedPowerIds:ze,selectedGroundIds:he,setSelectedGroundIds:O,clearSelection:me,addToSelection:oe,removeFromSelection:ke,setSelection:xe}}function Jy(){const[A,z]=v.useState(null),[T,S]=v.useState(!1),[_,I]=v.useState(null),[de,ze]=v.useState("nudge"),he=v.useCallback((me,oe)=>{z(me),S(!0),I(oe)},[]),O=v.useCallback(()=>{S(!1),z(null),I(null)},[]);return{selectedImageForTransform:A,setSelectedImageForTransform:z,isTransforming:T,setIsTransforming:S,transformStartPos:_,setTransformStartPos:I,transformMode:de,setTransformMode:ze,startTransform:he,stopTransform:O}}function e0(){const[A,z]=v.useState(null),[T,S]=v.useState(null),[_,I]=v.useState("overlay"),[de,ze]=v.useState(50),[he,O]=v.useState(!1),[me,oe]=v.useState(!1),[ke,xe]=v.useState(!1),[ye,ve]=v.useState(!1),le=v.useCallback(L=>{z(L)},[]),m=v.useCallback(L=>{S(L)},[]),k=v.useCallback(()=>{z(null),S(null)},[]);return{topImage:A,setTopImage:z,bottomImage:T,setBottomImage:S,currentView:_,setCurrentView:I,transparency:de,setTransparency:ze,isTransparencyCycling:he,setIsTransparencyCycling:O,isGrayscale:me,setIsGrayscale:oe,isBlackAndWhiteEdges:ke,setIsBlackAndWhiteEdges:xe,isBlackAndWhiteInverted:ye,setIsBlackAndWhiteInverted:ve,loadTopImage:le,loadBottomImage:m,clearImages:k}}function t0(){const[A,z]=v.useState(1),[T,S]=v.useState({x:0,y:0}),[_,I]=v.useState(!1),[de,ze]=v.useState(!1),he=v.useCallback(()=>{z(1),S({x:0,y:0})},[]),O=v.useCallback((ye=1.2)=>{z(ve=>ve*ye)},[]),me=v.useCallback((ye=1.2)=>{z(ve=>ve/ye)},[]),oe=v.useCallback(ye=>{z(ye)},[]),ke=v.useCallback((ye,ve)=>{S(le=>({x:le.x+ye,y:le.y+ve}))},[]),xe=v.useCallback((ye,ve)=>{S({x:ye,y:ve})},[]);return{viewScale:A,setViewScale:z,viewPan:T,setViewPan:S,isShiftConstrained:_,setIsShiftConstrained:I,showBothLayers:de,setShowBothLayers:ze,resetView:he,zoomIn:O,zoomOut:me,setZoom:oe,pan:ke,setPan:xe}}function n0(){const[A,z]=v.useState([]),[T,S]=v.useState([]),[_,I]=v.useState(null),[de,ze]=v.useState(null),[he,O]=v.useState(null),[me,oe]=v.useState(!1),[ke,xe]=v.useState(null),ye=v.useCallback((L,He)=>{He==="top"?z(q=>[...q,L]):S(q=>[...q,L])},[]),ve=v.useCallback((L,He,q)=>{q==="top"?z($=>$.map(fe=>fe.id===L?{...fe,...He}:fe)):S($=>$.map(fe=>fe.id===L?{...fe,...He}:fe))},[]),le=v.useCallback((L,He)=>{He==="top"?z(q=>q.filter($=>$.id!==L)):S(q=>q.filter($=>$.id!==L))},[]),m=v.useCallback((L,He)=>{const q={visible:!0,layer:He,id:L.id,designator:L.designator||"",abbreviation:L.abbreviation||"",manufacturer:"manufacturer"in L&&L.manufacturer||"",partNumber:"partNumber"in L&&L.partNumber||"",pinCount:L.pinCount,x:L.x,y:L.y,orientation:L.orientation??0};if(L.componentType==="Resistor"){const $=L;q.resistance=$.resistance||"",q.power=$.power||"",q.tolerance=$.tolerance||""}else if(L.componentType==="Capacitor"){const $=L;q.capacitance=$.capacitance||"",q.voltage=$.voltage||"",q.tolerance=$.tolerance||"",q.dielectric=$.dielectric||""}else if(L.componentType==="Diode"){const $=L;q.diodeType=$.diodeType||"Standard",q.voltage=$.voltage||"",q.current=$.current||"",q.ledColor=$.ledColor||""}else if(L.componentType==="Battery"){const $=L;q.voltage=$.voltage||"",q.capacity=$.capacity||"",q.chemistry=$.chemistry||""}else if(L.componentType==="Fuse"){const $=L;q.current=$.current||"",q.voltage=$.voltage||"",q.fuseType=$.fuseType||""}else if(L.componentType==="FerriteBead"){const $=L;q.impedance=$.impedance||"",q.current=$.current||""}else if(L.componentType==="Connector"){const $=L;q.connectorType=$.connectorType||"",q.gender=$.gender||"N/A"}else if(L.componentType==="Jumper"){const $=L;q.positions=$.positions||3}else if(L.componentType==="Relay"){const $=L;q.coilVoltage=$.coilVoltage||"",q.contactType=$.contactType||"",q.current=$.current||""}else if(L.componentType==="Inductor"){const $=L;q.inductance=$.inductance||"",q.current=$.current||"",q.resistance=$.resistance||""}else if(L.componentType==="Speaker"){const $=L;q.impedance=$.impedance||"",q.power=$.power||""}else if(L.componentType==="Motor"){const $=L;q.motorType=$.motorType||"",q.voltage=$.voltage||"",q.current=$.current||""}else if(L.componentType==="PowerSupply"){const $=L;q.inputVoltage=$.inputVoltage||"",q.outputVoltage=$.outputVoltage||"",q.current=$.current||""}else if(L.componentType==="Transistor"){const $=L;q.transistorType=$.transistorType||"BJT",q.polarity=$.polarity||"NPN",q.voltage=$.voltage||"",q.current=$.current||""}else if(L.componentType==="ResistorNetwork"){const $=L;q.resistance=$.resistance||"",q.configuration=$.configuration||""}else if(L.componentType==="Thermistor"){const $=L;q.resistance=$.resistance||"",q.thermistorType=$.thermistorType||"NTC",q.beta=$.beta||""}else if(L.componentType==="Switch"){const $=L;q.switchType=$.switchType||"",q.current=$.current||"",q.voltage=$.voltage||""}else if(L.componentType==="Transformer"){const $=L;q.primaryVoltage=$.primaryVoltage||"",q.secondaryVoltage=$.secondaryVoltage||"",q.power=$.power||"",q.turns=$.turns||""}else if(L.componentType==="TestPoint"){const $=L;q.signal=$.signal||""}else if(L.componentType==="IntegratedCircuit"){const $=L;q.description=$.description||"",q.datasheet=$.datasheet||"",q.icType=$.icType||""}else if(L.componentType==="VacuumTube"){const $=L;q.tubeType=$.tubeType||""}else if(L.componentType==="VariableResistor"){const $=L;q.vrType=$.vrType||"Potentiometer",q.resistance=$.resistance||"",q.power=$.power||"",q.taper=$.taper||""}else if(L.componentType==="Crystal"){const $=L;q.frequency=$.frequency||"",q.loadCapacitance=$.loadCapacitance||"",q.tolerance=$.tolerance||""}else if(L.componentType==="ZenerDiode"){const $=L;q.voltage=$.voltage||"",q.power=$.power||"",q.tolerance=$.tolerance||""}I(q)},[]),k=v.useCallback(()=>{I(null),ze(null)},[]);return{componentsTop:A,setComponentsTop:z,componentsBottom:T,setComponentsBottom:S,componentEditor:_,setComponentEditor:I,connectingPin:de,setConnectingPin:ze,componentDialogPosition:he,setComponentDialogPosition:O,isDraggingDialog:me,setIsDraggingDialog:oe,dialogDragOffset:ke,setDialogDragOffset:xe,addComponent:ye,updateComponent:ve,removeComponent:le,openComponentEditor:m,closeComponentEditor:k}}function l0(){const[A,z]=v.useState([]),[T,S]=v.useState([]),[_,I]=v.useState([]),[de,ze]=v.useState(null),[he,O]=v.useState(null),me=v.useCallback(m=>{z(k=>[...k,m])},[]),oe=v.useCallback((m,k)=>{z(L=>L.map(He=>He.id===m?{...He,...k}:He))},[]),ke=v.useCallback(m=>{z(k=>k.filter(L=>L.id!==m)),S(k=>k.filter(L=>L.powerBusId!==m))},[]),xe=v.useCallback(m=>{S(k=>[...k,m])},[]),ye=v.useCallback(m=>{S(k=>k.filter(L=>L.id!==m))},[]),ve=v.useCallback(m=>{I(k=>[...k,m])},[]),le=v.useCallback(m=>{I(k=>k.filter(L=>L.id!==m))},[]);return{powerBuses:A,setPowerBuses:z,powerSymbols:T,setPowerSymbols:S,groundSymbols:_,setGroundSymbols:I,powerEditor:de,setPowerEditor:ze,groundEditor:he,setGroundEditor:O,addPowerBus:me,updatePowerBus:oe,removePowerBus:ke,addPowerSymbol:xe,removePowerSymbol:ye,addGroundSymbol:ve,removeGroundSymbol:le}}function a0(){const z=v.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"26",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"26",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"26",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[])(),[T,S]=v.useState(z.brushColor),[_,I]=v.useState(z.brushSize),[de,ze]=v.useState(z.topTraceColor),[he,O]=v.useState(z.bottomTraceColor),[me,oe]=v.useState(z.topTraceSize),[ke,xe]=v.useState(z.bottomTraceSize),[ye,ve]=v.useState(z.topPadColor),[le,m]=v.useState(z.bottomPadColor),[k,L]=v.useState(z.topPadSize),[He,q]=v.useState(z.bottomPadSize),[$,fe]=v.useState(z.topComponentColor),[Ge,j]=v.useState(z.bottomComponentColor),[et,Ne]=v.useState(z.topComponentSize),[nt,it]=v.useState(z.bottomComponentSize),gt=v.useCallback((H,J,N)=>{H==="trace"&&N?N==="top"?localStorage.setItem("defaultTopTraceSize",String(J)):localStorage.setItem("defaultBottomTraceSize",String(J)):H==="pad"&&N?N==="top"?localStorage.setItem("defaultTopPadSize",String(J)):localStorage.setItem("defaultBottomPadSize",String(J)):H==="component"&&N?N==="top"?localStorage.setItem("defaultTopComponentSize",String(J)):localStorage.setItem("defaultBottomComponentSize",String(J)):H==="via"?localStorage.setItem("defaultViaSize",String(J)):H==="power"?localStorage.setItem("defaultPowerSize",String(J)):H==="ground"?localStorage.setItem("defaultGroundSize",String(J)):H==="brush"&&localStorage.setItem("defaultBrushSize",String(J))},[]),Ye=v.useCallback((H,J,N)=>{H==="trace"&&N?N==="top"?localStorage.setItem("defaultTopTraceColor",J):localStorage.setItem("defaultBottomTraceColor",J):H==="pad"&&N?N==="top"?localStorage.setItem("defaultTopPadColor",J):localStorage.setItem("defaultBottomPadColor",J):H==="component"&&N?N==="top"?localStorage.setItem("defaultTopComponentColor",J):localStorage.setItem("defaultBottomComponentColor",J):H==="via"?localStorage.setItem("defaultViaColor",J):H==="brush"&&localStorage.setItem("defaultBrushColor",J)},[]);return{brushColor:T,setBrushColor:S,brushSize:_,setBrushSize:I,topTraceColor:de,setTopTraceColor:ze,bottomTraceColor:he,setBottomTraceColor:O,topTraceSize:me,setTopTraceSize:oe,bottomTraceSize:ke,setBottomTraceSize:xe,topPadColor:ye,setTopPadColor:ve,bottomPadColor:le,setBottomPadColor:m,topPadSize:k,setTopPadSize:L,bottomPadSize:He,setBottomPadSize:q,topComponentColor:$,setTopComponentColor:fe,bottomComponentColor:Ge,setBottomComponentColor:j,topComponentSize:et,setTopComponentSize:Ne,bottomComponentSize:nt,setBottomComponentSize:it,saveDefaultSize:gt,saveDefaultColor:Ye}}const o0=(A,z,T)=>{const S=`tool_${A}_color`,_=`tool_${A}_size`;localStorage.setItem(S,z),localStorage.setItem(_,String(T))};function i0(A,z,T,S,_,I,de,ze,he,O,me,oe,ke,xe,ye,ve,le,m,k,L){const[He,q]=v.useState(()=>A()),$=v.useRef(null),fe=v.useRef(S),Ge=v.useRef(_),j=v.useCallback(nt=>z==="draw"&&T==="trace"?nt.get("trace"):z==="draw"&&T==="via"?nt.get("via"):z==="draw"&&T==="pad"?nt.get("pad"):z==="component"?nt.get("component"):z==="power"?nt.get("power"):z==="ground"?nt.get("ground"):null,[z,T]);v.useEffect(()=>{q(nt=>{const it=j(nt),gt=it?.id||null,Ye=$.current,H=new Map(nt);if(Ye&&Ye!==gt){const J=nt.get(Ye);J&&(o0(Ye,fe.current,Ge.current),H.set(Ye,{...J,settings:{color:fe.current,size:Ge.current}}))}if(it&&gt!==Ye)if(z==="draw"&&T==="trace"){const J=m||"top",N=J==="top"?I:de,ne=J==="top"?ze:he;fe.current=N,Ge.current=ne,H.set("trace",{...it,settings:{color:N,size:ne}})}else if(z==="draw"&&T==="pad"){const J=k||"top",N=J==="top"?O:me,ne=J==="top"?oe:ke;fe.current=N,Ge.current=ne,H.set("pad",{...it,settings:{color:N,size:ne}})}else if(z==="component"){const J=L||"top",N=J==="top"?xe:ye,ne=J==="top"?ve:le;fe.current=N,Ge.current=ne,H.set("component",{...it,settings:{color:N,size:ne}})}else fe.current=it.settings.color,Ge.current=it.settings.size;return $.current=gt,H})},[z,T,S,_,I,de,ze,he,O,me,oe,ke,xe,ye,ve,le,m,k,L,j]);const et=v.useCallback((nt,it)=>{q(gt=>{const Ye=new Map(gt),H=Ye.get(nt);return H&&Ye.set(nt,{...H,settings:it}),Ye})},[]),Ne=v.useCallback((nt,it,gt)=>{q(Ye=>{const H=new Map(Ye),J=H.get(nt);if(J){const N=new Map(J.layerSettings);N.set(it,gt),H.set(nt,{...J,layerSettings:N})}return H})},[]);return{toolRegistry:He,setToolRegistry:q,updateToolSettings:et,updateToolLayerSettings:Ne,getCurrentToolDef:j}}function s0(){const[A,z]=v.useState(!1),[T,S]=v.useState(!1),[_,I]=v.useState(!1),[de,ze]=v.useState(!1),[he,O]=v.useState(!1),[me,oe]=v.useState(!1),[ke,xe]=v.useState(!1),ye=v.useCallback(()=>{z(!0),S(!0),I(!0),ze(!0),O(!0),oe(!0),xe(!0)},[]),ve=v.useCallback(()=>{z(!1),S(!1),I(!1),ze(!1),O(!1),oe(!1),xe(!1)},[]);return{areImagesLocked:A,setAreImagesLocked:z,areViasLocked:T,setAreViasLocked:S,arePadsLocked:_,setArePadsLocked:I,areTracesLocked:de,setAreTracesLocked:ze,areComponentsLocked:he,setAreComponentsLocked:O,areGroundNodesLocked:me,setAreGroundNodesLocked:oe,arePowerNodesLocked:ke,setArePowerNodesLocked:xe,lockAll:ye,unlockAll:ve}}function c0(){const[A,z]=v.useState(null),[T,S]=v.useState({visible:!1,size:6}),[_,I]=v.useState({visible:!1,interval:5}),[de,ze]=v.useState({visible:!1,source:null}),[he,O]=v.useState({visible:!1,text:""}),[me,oe]=v.useState({visible:!1,title:"",message:""}),[ke,xe]=v.useState({visible:!1}),[ye,ve]=v.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[le,m]=v.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[k,L]=v.useState(!1),[He,q]=v.useState(!0);return{openMenu:A,setOpenMenu:z,setSizeDialog:T,setSetSizeDialog:S,autoSaveDialog:_,setAutoSaveDialog:I,autoSavePromptDialog:de,setAutoSavePromptDialog:ze,debugDialog:he,setDebugDialog:O,errorDialog:me,setErrorDialog:oe,newProjectDialog:ke,setNewProjectDialog:xe,newProjectSetupDialog:ye,setNewProjectSetupDialog:ve,saveAsDialog:le,setSaveAsDialog:m,showColorPicker:k,setShowColorPicker:L,showWelcomeDialog:He,setShowWelcomeDialog:q}}function r0(){const[A,z]=v.useState(!1),[T,S]=v.useState(1),[_,I]=v.useState(null),[de,ze]=v.useState(""),[he,O]=v.useState(""),[me,oe]=v.useState(null),[ke,xe]=v.useState("pcb_project"),[ye,ve]=v.useState([]),[le,m]=v.useState(-1),k=v.useRef(null),L=v.useRef(!1),He=v.useRef(!1);return{autoSaveEnabled:A,setAutoSaveEnabled:z,autoSaveInterval:T,setAutoSaveInterval:S,autoSaveDirHandle:_,setAutoSaveDirHandle:I,autoSaveBaseName:de,setAutoSaveBaseName:ze,currentProjectFilePath:he,setCurrentProjectFilePath:O,projectDirHandle:me,setProjectDirHandle:oe,projectName:ke,setProjectName:xe,autoSaveFileHistory:ye,setAutoSaveFileHistory:ve,currentFileIndex:le,setCurrentFileIndex:m,autoSaveIntervalRef:k,hasChangesSinceLastAutoSaveRef:L,prevAutoSaveEnabledRef:He}}const ps=A=>{const z=tf[A];return!z||!z.prefix||z.prefix.length<1?"?":z.prefix[0].substring(0,1).toUpperCase()},Ua=(A,z,T)=>{const S=`tool_${A}_color`,_=`tool_${A}_size`,I=localStorage.getItem(S),de=localStorage.getItem(_);return{color:I||z,size:de?parseInt(de,10):T}},Wp=(A,z,T)=>{localStorage.setItem(`tool_${A}_color`,z),localStorage.setItem(`tool_${A}_size`,String(T))},zn=(A,z,T,S)=>{const _=`tool_${A}_${z}_color`,I=`tool_${A}_${z}_size`,de=localStorage.getItem(_),ze=localStorage.getItem(I);return{color:de||T,size:ze?parseInt(ze,10):S}},u0=()=>{const A=new Map,z={top:"#0072B2",bottom:"#56B4E9"},T={top:Ei.DEFAULT_SIZE,bottom:Ei.DEFAULT_SIZE},S={top:"#AA4499",bottom:"#F781BF"},_={top:6,bottom:6},I={top:"#6A3D9A",bottom:"#9467BD"},de={top:18,bottom:18};return A.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:Ua("select","#ff0000",10),layerSettings:new Map([["top",zn("select","top","#ff0000",10)],["bottom",zn("select","bottom","#ff0000",10)]])}),A.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:Ua("via",Sr,Ei.DEFAULT_SIZE),layerSettings:new Map([["top",zn("via","top",Sr,Ei.DEFAULT_SIZE)],["bottom",zn("via","bottom",Sr,Ei.DEFAULT_SIZE)]]),defaultLayer:"top"}),A.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:Ua("pad",Uy,Ei.DEFAULT_SIZE),layerSettings:new Map([["top",zn("pad","top",z.top,T.top)],["bottom",zn("pad","bottom",z.bottom,T.bottom)]]),defaultLayer:"top"}),A.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:Ua("trace",th,2),layerSettings:new Map([["top",zn("trace","top",S.top,_.top)],["bottom",zn("trace","bottom",S.bottom,_.bottom)]]),defaultLayer:"top"}),A.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:Ua("component",nh,lh.DEFAULT_SIZE),layerSettings:new Map([["top",zn("component","top",I.top,de.top)],["bottom",zn("component","bottom",I.bottom,de.bottom)]]),defaultLayer:"top"}),A.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:Ua("power",Cr,26),layerSettings:new Map([["top",zn("power","top",Cr,26)],["bottom",zn("power","bottom",Cr,26)]]),defaultLayer:"top"}),A.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:Ua("ground",Ju,26),layerSettings:new Map([["top",zn("ground","top",Ju,26)],["bottom",zn("ground","bottom",Ju,26)]]),defaultLayer:"top"}),A.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:Ua("erase","#f5a3b3",5),layerSettings:new Map([["top",zn("erase","top","#f5a3b3",5)],["bottom",zn("erase","bottom","#f5a3b3",5)]])}),A.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:Ua("pan","#ff0000",10),layerSettings:new Map([["top",zn("pan","top","#ff0000",10)],["bottom",zn("pan","bottom","#ff0000",10)]])}),A.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:Ua("magnify","#ff0000",10),layerSettings:new Map([["top",zn("magnify","top","#ff0000",10)],["bottom",zn("magnify","bottom","#ff0000",10)]])}),A};function f0(){const z=e0(),{topImage:T,setTopImage:S,bottomImage:_,setBottomImage:I,currentView:de,setCurrentView:ze,transparency:he,setTransparency:O,isTransparencyCycling:me,setIsTransparencyCycling:oe,isGrayscale:ke,setIsGrayscale:xe,isBlackAndWhiteEdges:ye,setIsBlackAndWhiteEdges:ve,isBlackAndWhiteInverted:le,setIsBlackAndWhiteInverted:m}=z,[k,L]=v.useState("none"),He=a0(),{brushColor:q,setBrushColor:$,brushSize:fe,setBrushSize:Ge,topTraceColor:j,setTopTraceColor:et,bottomTraceColor:Ne,setBottomTraceColor:nt,topTraceSize:it,setTopTraceSize:gt,bottomTraceSize:Ye,setBottomTraceSize:H,topPadColor:J,setTopPadColor:N,bottomPadColor:ne,setBottomPadColor:we,topPadSize:x,setTopPadSize:R,bottomPadSize:ce,setBottomPadSize:Ce,topComponentColor:De,setTopComponentColor:Ve,bottomComponentColor:je,setBottomComponentColor:Ke,topComponentSize:lt,setTopComponentSize:hn,bottomComponentSize:Jt,setBottomComponentSize:Sl,saveDefaultSize:qe,saveDefaultColor:mt}=He,Wo=Ky(),{drawingStrokes:Ze,setDrawingStrokes:Yt,isDrawing:ql,setIsDrawing:ma,currentStroke:Dt,setCurrentStroke:yn,tracePreviewMousePos:$l,setTracePreviewMousePos:go,drawingMode:Ae,setDrawingMode:La,selectedDrawingLayer:pt,setSelectedDrawingLayer:jn,currentStrokeRef:Bl,lastTraceClickTimeRef:tt,isDoubleClickingTraceRef:an}=Wo,wr=Jy(),{selectedImageForTransform:At,setSelectedImageForTransform:mo,isTransforming:Gn,setIsTransforming:Zl,transformStartPos:Rn,setTransformStartPos:hs,transformMode:Ha,setTransformMode:Tr}=wr,ki=t0(),{viewScale:Qe,setViewScale:Ol,viewPan:at,setViewPan:Wn,isShiftConstrained:xo,setIsShiftConstrained:bc,showBothLayers:ys,setShowBothLayers:gs}=ki,[Vt,Ai]=v.useState("top"),[Jn,ms]=v.useState("top"),[Cl,Di]=v.useState("top"),xs=i0(u0,k,Ae,q,fe,j,Ne,it,Ye,J,ne,x,ce,De,je,lt,Jt,Vt,Jn,Cl),{toolRegistry:qt,setToolRegistry:Bn,getCurrentToolDef:rl}=xs,gn=dt.useRef(null),on=dt.useRef(q),ul=dt.useRef(fe);dt.useEffect(()=>{Bn(o=>{const c=rl(o),f=c?.id||null,p=gn.current,g=new Map(o);if(p&&p!==f){const y=o.get(p);y&&(Wp(p,on.current,ul.current),g.set(p,{...y,settings:{color:on.current,size:ul.current}}))}if(c&&f!==p)if(k==="draw"&&Ae==="trace"){const y=Vt||"top",u=y==="top"?j:Ne,d=y==="top"?it:Ye;$(u),Ge(d),on.current=u,ul.current=d,g.set("trace",{...c,settings:{color:u,size:d}})}else if(k==="draw"&&Ae==="pad"){const y=Jn||"top",u=y==="top"?J:ne,d=y==="top"?x:ce;$(u),Ge(d),on.current=u,ul.current=d,g.set("pad",{...c,settings:{color:u,size:d}})}else if(k==="component"){const y=Cl||"top",u=y==="top"?De:je,d=y==="top"?lt:Jt;$(u),Ge(d),on.current=u,ul.current=d,g.set("component",{...c,settings:{color:u,size:d}})}else{const y=c.settings;$(y.color),Ge(y.size),on.current=y.color,ul.current=y.size}return gn.current=f,g})},[k,Ae,rl,j,Ne,it,Ye,J,ne,x,ce,De,je,lt,Jt]),dt.useEffect(()=>{Bn(o=>{const c=rl(o);if(c){Wp(c.id,q,fe),k==="draw"&&Ae==="trace"?(Vt||"top")==="top"?(et(q),gt(fe),mt("trace",q,"top"),qe("trace",fe,"top")):(nt(q),H(fe),mt("trace",q,"bottom"),qe("trace",fe,"bottom")):k==="draw"&&Ae==="pad"?(Jn||"top")==="top"?(N(q),R(fe),mt("pad",q,"top"),qe("pad",fe,"top")):(we(q),Ce(fe),mt("pad",q,"bottom"),qe("pad",fe,"bottom")):k==="component"&&((Cl||"top")==="top"?(Ve(q),hn(fe),mt("component",q,"top"),qe("component",fe,"top")):(Ke(q),Sl(fe),mt("component",q,"bottom"),qe("component",fe,"bottom")));const f=new Map(o);return f.set(c.id,{...c,settings:{color:q,size:fe}}),on.current=q,ul.current=fe,f}return o})},[q,fe,k,Ae,rl,mt,qe]),dt.useEffect(()=>{k==="power"?(Za(!0),Qa(null)):(Za(!1),Qa(null))},[k]);const[Ni,bs]=v.useState(void 0),[,vc]=v.useState([]),[,vs]=v.useState([]),[,Ul]=v.useState([]),[,xa]=v.useState([]),[Ya,bo]=v.useState([]),[Ri,vo]=v.useState([]),[un,Sc]=v.useState([]),[Ss,Va]=v.useState([]),fn=v.useRef(null),zr=Wy(),{selectedIds:ht,setSelectedIds:fl,isSelecting:Mi,setIsSelecting:Jo,selectedComponentIds:ut,setSelectedComponentIds:ln,selectedPowerIds:ot,setSelectedPowerIds:In,selectedGroundIds:kt,setSelectedGroundIds:qn}=zr,Cc=n0(),{componentsTop:bt,setComponentsTop:En,componentsBottom:st,setComponentsBottom:dn,componentEditor:X,setComponentEditor:Ut,connectingPin:Rt,setConnectingPin:Pl,componentDialogPosition:wl,setComponentDialogPosition:ba,isDraggingDialog:_i,setIsDraggingDialog:Cs,dialogDragOffset:ei,setDialogDragOffset:Bi}=Cc,jr=l0(),{powerBuses:Nt,setPowerBuses:dl,powerSymbols:Ql,setPowerSymbols:el,groundSymbols:ws,setGroundSymbols:On,powerEditor:mn,setPowerEditor:So}=jr,Ts=s0(),{areImagesLocked:Tl,setAreImagesLocked:va,areViasLocked:Ft,setAreViasLocked:ti,arePadsLocked:Un,setArePadsLocked:Fl,areTracesLocked:xn,setAreTracesLocked:Co,areComponentsLocked:Me,setAreComponentsLocked:wo,areGroundNodesLocked:bn,setAreGroundNodesLocked:ni,arePowerNodesLocked:Ct,setArePowerNodesLocked:Kl}=Ts,Oi=c0(),{openMenu:li,setOpenMenu:zs,setSizeDialog:Wl,setSetSizeDialog:Ll,autoSaveDialog:Jl,setAutoSaveDialog:zl,autoSavePromptDialog:wc,setAutoSavePromptDialog:To,debugDialog:js,setDebugDialog:Es,errorDialog:ai,setErrorDialog:ks,newProjectDialog:As,setNewProjectDialog:oi,newProjectSetupDialog:Kt,setNewProjectSetupDialog:ii,saveAsDialog:$t,setSaveAsDialog:si,showColorPicker:Ds,setShowColorPicker:Ui}=Oi,Er=r0(),{autoSaveEnabled:$n,setAutoSaveEnabled:ea,autoSaveInterval:Xa,setAutoSaveInterval:Ga,autoSaveDirHandle:ta,setAutoSaveDirHandle:Ns,autoSaveBaseName:Sa,setAutoSaveBaseName:zo,currentProjectFilePath:Li,setCurrentProjectFilePath:tl,projectDirHandle:ci,setProjectDirHandle:ri,projectName:kn,setProjectName:jl,autoSaveFileHistory:Rs,setAutoSaveFileHistory:na,currentFileIndex:Tc,setCurrentFileIndex:Ms,autoSaveIntervalRef:Xt,hasChangesSinceLastAutoSaveRef:El,prevAutoSaveEnabledRef:Hi}=Er,Yi=v.useRef(null),Ca=v.useRef(null),zc=v.useRef(null),jc=v.useRef(null),Ec=v.useRef(null),_s=v.useRef(null),ui=v.useRef(null),la=v.useRef(null),aa=v.useRef(null),kc=v.useRef(null),oa=v.useRef(!1),fi=v.useRef(0),di=v.useRef(0),[wa,pi]=v.useState(!1),jo=v.useRef(null),Eo=v.useRef(null),[ko,Vi]=v.useState(!1),[Ta,kr]=v.useState({width:960,height:600}),Xi=v.useRef(null),Ac=v.useRef(null),nl=v.useRef(null),za=v.useRef(null),Gi=v.useRef(null),Bs=v.useRef(null),Os=v.useRef(null),Us=v.useRef(null),[Ao,hi]=v.useState(!0),[ia,Ia]=v.useState(!0),[Mn,Ii]=v.useState(!0),[kl,ja]=v.useState(!0),[Ln,qi]=v.useState(!0),[qa,Ea]=v.useState(!0),[$a,Ls]=v.useState(!0),[sa,Hs]=v.useState(!0),[ka,Ys]=v.useState(!0),[Aa,Vs]=v.useState(!0),vt=Ql,ct=ws,[$i,Zn]=v.useState(!1),[Do,Za]=v.useState(!1),[Pa,Qa]=v.useState(null),[Hl,Da]=v.useState(!0);dt.useEffect(()=>{Nt.length===0&&dl([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[Nt.length,dl]);const Fa=v.useCallback((o,c)=>{const f=vt.find(g=>g.pointId===o);if(f){const g=c.find(u=>u.id===f.powerBusId);return`Via (${g?g.voltage:f.type||"Power Node"})`}const p=ct.find(g=>g.pointId===o);return p?`Via (${p.type||"Ground"})`:"Via (Signal)"},[vt,ct]),ca=v.useCallback((o,c)=>{const f=vt.find(g=>g.pointId===o);if(f){const g=c.find(u=>u.id===f.powerBusId);return`Pad (${g?g.voltage:f.type||"Power Node"})`}const p=ct.find(g=>g.pointId===o);return p?`Pad (${p.type||"Ground"})`:"Pad (Signal)"},[vt,ct]),[Na,No]=v.useState(!1),Pn=v.useRef(null),[Zi,ll]=v.useState(!1),Dc=v.useRef(null),[Ka,Qn]=v.useState(!1),[yi,Wa]=v.useState(!1),[al,Pi]=v.useState(null),ol=v.useRef(null),ra=v.useRef(null),[Ro,gi]=v.useState(null),[Yl,il]=v.useState(!1),[An,ua]=v.useState(null),[Dn,pl]=v.useState(null),Vl=v.useCallback(async(o,c)=>{try{const f=await createImageBitmap(o),p=URL.createObjectURL(o),g=await new Promise((u,d)=>{const w=new FileReader;w.onload=()=>u(w.result),w.onerror=d,w.readAsDataURL(o)}),y={url:p,name:o.name,width:f.width,height:f.height,dataUrl:g,x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:f};c==="top"?S(y):I(y)}catch(f){console.error("Failed to load image",f)}},[]),Nc=v.useCallback(o=>{o.stopPropagation(),o.preventDefault();const c=fn.current;if(!c)return;const f=c.getBoundingClientRect(),p=c.width/f.width,g=c.height/f.height,y=o.nativeEvent.offsetX,u=o.nativeEvent.offsetY,d=typeof y=="number"?y:o.clientX-f.left,w=typeof u=="number"?u:o.clientY-f.top,b=d*p,te=w*g,Q=b-40,Se=te-40,ee=(Q-at.x)/Qe,K=(Se-at.y)/Qe;if(k==="select"){if(Rt){let D=1/0,P=null,ae=null;const re=Math.max(6/Qe,4),Xe=[...bt,...st].find(Ee=>Ee.id===Rt.componentId)?.layer||"top";for(const Ee of Ze)if((Ee.type==="via"||Ee.type==="pad")&&Ee.points.length>0){if(Ee.type==="pad"&&(Ee.layer||"top")!==Xe)continue;const Be=Ee.points[0],ft=Math.max(1,Ee.size/2),Wt=Math.hypot(Be.x-ee,Be.y-K),Mt=Math.max(ft,re);Wt<=Mt&&Wt<D&&(D=Wt,P=Be.id??null,ae=Ee)}if(ae?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${ae.id}`),console.log(`  Point ID: ${P}`),console.log(`  Point coordinates: x=${ae.points[0].x.toFixed(2)}, y=${ae.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${ee.toFixed(2)}, y=${K.toFixed(2)}`),console.log(`  Distance: ${D.toFixed(2)}`),console.log(`  Via size: ${ae.size}, radius: ${Math.max(1,ae.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${ee.toFixed(2)}, y=${K.toFixed(2)}`),console.log(`  Hit tolerance: ${re.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${Ze.filter(Ee=>Ee.type==="via").length}`)),P!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${P} (type: ${typeof P})`);const Ee=String(P),Be=Rt.pinIndex,ft=Rt.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${Be} (Pin ${Be+1}) of component ${ft} to point ID ${Ee}`);const Wt=bt.find(Oe=>Oe.id===ft),Mt=st.find(Oe=>Oe.id===ft);Wt?(console.log("Component found in TOP layer"),En(Oe=>{const Je=Oe.find(Ue=>Ue.id===ft);if(!Je)return console.error(`Component ${ft} not found in TOP layer during update!`),Oe;console.log("BEFORE update: pinConnections =",Je.pinConnections);const Pe=Je.pinConnections||[],zt=Pe.length>0?[...Pe]:new Array(Je.pinCount).fill("");let xt;if(zt.length!==Je.pinCount){xt=new Array(Je.pinCount).fill("");for(let Ue=0;Ue<Math.min(zt.length,Je.pinCount);Ue++)xt[Ue]=zt[Ue]||""}else xt=[...zt];xt[Be]=Ee,console.log(`Updating pin ${Be} with value: ${Ee}`),console.log("New pinConnections array:",xt);const _e=Oe.map(Ue=>Ue.id===ft?{...Ue,pinConnections:xt}:Ue),We=_e.find(Ue=>Ue.id===ft);return console.log("AFTER update: pinConnections =",We?.pinConnections),console.log(`Pin ${Be} value: ${We?.pinConnections[Be]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),_e})):Mt?(console.log("Component found in BOTTOM layer"),dn(Oe=>{const Je=Oe.find(Ue=>Ue.id===ft);if(!Je)return console.error(`Component ${ft} not found in BOTTOM layer during update!`),Oe;console.log("BEFORE update: pinConnections =",Je.pinConnections);const Pe=Je.pinConnections||[],zt=Pe.length>0?[...Pe]:new Array(Je.pinCount).fill("");let xt;if(zt.length!==Je.pinCount){xt=new Array(Je.pinCount).fill("");for(let Ue=0;Ue<Math.min(zt.length,Je.pinCount);Ue++)xt[Ue]=zt[Ue]||""}else xt=[...zt];xt[Be]=Ee,console.log(`Updating pin ${Be} with value: ${Ee}`),console.log("New pinConnections array:",xt);const _e=Oe.map(Ue=>Ue.id===ft?{...Ue,pinConnections:xt}:Ue),We=_e.find(Ue=>Ue.id===ft);return console.log("AFTER update: pinConnections =",We?.pinConnections),console.log(`Pin ${Be} value: ${We?.pinConnections[Be]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),_e})):(console.error(`Component ${ft} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",bt.map(Oe=>Oe.id)),console.log("Available BOTTOM components:",st.map(Oe=>Oe.id))),setTimeout(()=>{Pl(null)},0);return}else Pl(null)}const F=10,Z=(()=>{for(const D of bt)if(ee>=D.x-F&&ee<=D.x+F&&K>=D.y-F&&K<=D.y+F)return{layer:"top",comp:D};for(const D of st)if(ee>=D.x-F&&ee<=D.x+F&&K>=D.y-F&&K<=D.y+F)return{layer:"bottom",comp:D};return null})();if(Z){const{comp:D}=Z;o.shiftKey?ln(P=>{const ae=new Set(P);return ae.has(D.id)?ae.delete(D.id):ae.add(D.id),ae}):(ln(new Set([D.id])),fl(new Set),In(new Set),qn(new Set));return}const be=Math.max(6/Qe,4);let ge=null;for(const D of vt){const P=Math.max(6,D.size/2),ae=P*.8,re=P+ae,Te=Math.hypot(D.x-ee,D.y-K),Xe=Math.abs(ee-D.x)<=be&&Math.abs(K-D.y)<=re,Ee=Math.abs(K-D.y)<=be&&Math.abs(ee-D.x)<=re;if(Te<=Math.max(P,be)||Xe||Ee){ge=D;break}}if(ge){o.shiftKey?In(D=>{const P=new Set(D);return P.has(ge.id)?P.delete(ge.id):P.add(ge.id),P}):In(new Set([ge.id])),fl(new Set),ln(new Set),qn(new Set);return}let U=null;for(const D of ct){const P=Math.max(6,(D.size||18)/2),ae=P*.8,re=P+ae,Te=Math.hypot(D.x-ee,D.y-K),Xe=Math.abs(ee-D.x)<=be&&Math.abs(K-D.y)<=re,Ee=Math.abs(K-D.y)<=be&&Math.abs(ee-D.x)<=re;if(Te<=Math.max(P,be)||Xe||Ee){U=D;break}}if(U){o.shiftKey?qn(D=>{const P=new Set(D);return P.has(U.id)?P.delete(U.id):P.add(U.id),P}):(qn(new Set([U.id])),fl(new Set),ln(new Set),In(new Set));return}const B=Math.max(6/Qe,4);let se=null;for(const D of Ze)if((D.type==="via"||D.type==="pad")&&D.points.length>0){if(!Mn)continue;const P=D.points[0],ae=Math.max(1,D.size/2);if(Math.hypot(P.x-ee,P.y-K)<=Math.max(ae,B)){se=D;break}}se||o.shiftKey||(fl(new Set),ln(new Set),In(new Set),qn(new Set)),Jo(!0),ua({x:ee,y:K,shiftKey:o.shiftKey}),pl({x:ee,y:K,width:0,height:0});return}else if(k==="magnify"){const F=o.shiftKey?.5:2,Z=Math.max(.25,Math.min(8,Qe*F)),be=Q-Z*ee,ge=Se-Z*K;Ol(Z),Wn({x:be,y:ge});return}else if(k==="pan"){jo.current={startCX:Q,startCY:Se,panX:at.x,panY:at.y},Eo.current={startClientX:o.clientX,startClientY:o.clientY,panX:at.x,panY:at.y},pi(!0);return}else if(k==="draw"){const F=(ge,U)=>{let B=1/0,se=null;const D=15;for(const re of Ze)if(re.type==="via"){const Te=re.points[0],Xe=Math.hypot(Te.x-ge,Te.y-U);Xe<=D&&Xe<B&&(B=Xe,se=Te)}else if(re.type==="pad"){const Te=re.points[0],Xe=Math.hypot(Te.x-ge,Te.y-U);Xe<=D&&Xe<B&&(B=Xe,se=Te)}for(const re of vt)if(re.pointId!==void 0){const Te=Math.hypot(re.x-ge,re.y-U);Te<=D&&Te<B&&(B=Te,se={x:re.x,y:re.y,id:re.pointId})}for(const re of ct)if(re.pointId!==void 0){const Te=Math.hypot(re.x-ge,re.y-U);Te<=D&&Te<B&&(B=Te,se={x:re.x,y:re.y,id:re.pointId})}const ae=tn(se??{x:ge,y:U});return{x:ae.x,y:ae.y,nodeId:se?.id}};if(Ae==="via"){const ge=qt.get("via"),U=localStorage.getItem("tool_via_color"),B=localStorage.getItem("tool_via_size"),se=U||ge?.settings.color||Sr,D=B?parseInt(B,10):ge?.settings.size||Ei.DEFAULT_SIZE,P=tn({x:ee,y:K}),ae={id:_l(),x:P.x,y:P.y},re={id:`${Date.now()}-via`,points:[ae],color:se,size:D,layer:pt,type:"via",viaType:"Via (Signal)"};Yt(Te=>[...Te,re]),pt==="top"?vc(Te=>[...Te,re.id]):vs(Te=>[...Te,re.id]);return}if(Ae==="pad"){if(!Jn)return;const ge=Jn==="top"?J:ne,U=Jn==="top"?x:ce,B=tn({x:ee,y:K}),se={id:_l(),x:B.x,y:B.y},D={id:`${Date.now()}-pad`,points:[se],color:ge,size:U,layer:Jn,type:"pad",padType:"Pad (Signal)"};Yt(P=>[...P,D]);return}if(an.current)return;const Z=Ae==="trace"&&!Yl?F(ee,K):{x:tn({x:ee,y:K}).x,y:tn({x:ee,y:K}).y},be=Z.nodeId!==void 0?{id:Z.nodeId,x:Z.x,y:Z.y}:{x:Z.x,y:Z.y};yn(ge=>ge.length===0?[be]:[...ge,be]),tt.current=Date.now(),go(null),ma(!1),bc(!1)}else if(k==="erase"){if(Ze.some(Z=>Z.layer===pt&&(Z.type==="via"&&Ft||Z.type==="pad"&&Un||Z.type==="trace"&&xn))){const Z=[];Ft&&Ze.some(be=>be.layer===pt&&be.type==="via")&&Z.push("vias"),Un&&Ze.some(be=>be.layer===pt&&be.type==="pad")&&Z.push("pads"),xn&&Ze.some(be=>be.layer===pt&&be.type==="trace")&&Z.push("traces"),Z.length>0&&alert(`Cannot erase: ${Z.join(", ")} are locked on the ${pt} layer. Unlock them to erase.`)}ma(!0),yn([{id:_l(),x:ee,y:K}]),console.log("Starting erase at:",ee,K,"selectedDrawingLayer:",pt,"total strokes:",Ze.length)}else if(k==="transform"&&At){if(Tl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}Zl(!0),hs({x:ee,y:K})}else if(k==="component"){if(!al)return;const F=tn({x:ee,y:K}),Z=Cl==="top"?De:je,be=Cl==="top"?lt:Jt,ge=Yy(al,Cl,F.x,F.y,Z,be);ge.abbreviation=ps(al),Cl==="top"?(Hs(!0),En(U=>[...U,ge])):(Ys(!0),dn(U=>[...U,ge]));return}else if(k==="power"){if(!Pa)return;const Z=Yl?{x:tn({x:ee,y:K}).x,y:tn({x:ee,y:K}).y}:((ge,U)=>{let B=1/0,se=null;const D=15;for(const re of Ze)if(re.type==="via"||re.type==="pad"){const Te=re.points[0],Xe=Math.hypot(Te.x-ge,Te.y-U);Xe<=D&&Xe<B&&(B=Xe,se=Te)}else if(re.type==="trace")for(const Te of re.points){const Xe=Math.hypot(Te.x-ge,Te.y-U);Xe<=D&&Xe<B&&(B=Xe,se=Te)}const ae=tn(se??{x:ge,y:U});return{x:ae.x,y:ae.y,nodeId:se?.id}})(ee,K),be=Nt.find(ge=>ge.id===Pa);if(be){const ge=Z.nodeId??_l(),U=`${be.voltage} Power Node`;if(ct.find(D=>D.pointId===ge)){ks({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${ge}). Power and ground nodes cannot share the same Node ID.`});return}const se={id:`power-${Date.now()}-${Math.random()}`,x:Z.x,y:Z.y,color:"#ff0000",size:fe,powerBusId:be.id,layer:pt,type:U,pointId:ge};if(el(D=>[...D,se]),Z.nodeId!==void 0){const D=Fa(Z.nodeId,Nt),P=ca(Z.nodeId,Nt);Yt(ae=>ae.map(re=>re.type==="via"&&re.points.length>0&&re.points[0].id===Z.nodeId?{...re,viaType:D}:re.type==="pad"&&re.points.length>0&&re.points[0].id===Z.nodeId?{...re,padType:P}:re))}}return}else if(k==="ground"){const Z=Yl?{x:tn({x:ee,y:K}).x,y:tn({x:ee,y:K}).y}:((se,D)=>{let P=1/0,ae=null;const re=15;for(const Ee of Ze)if(Ee.type==="via"||Ee.type==="pad"){const Be=Ee.points[0],ft=Math.hypot(Be.x-se,Be.y-D);ft<=re&&ft<P&&(P=ft,ae=Be)}else if(Ee.type==="trace")for(const Be of Ee.points){const ft=Math.hypot(Be.x-se,Be.y-D);ft<=re&&ft<P&&(P=ft,ae=Be)}const Xe=tn(ae??{x:se,y:D});return{x:Xe.x,y:Xe.y,nodeId:ae?.id}})(ee,K),be=Z.nodeId??_l(),ge="Ground",U=vt.find(se=>se.pointId===be);if(U){ks({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${U.type||"Power Node"}) already exists at this Node ID (${be}). Power and ground nodes cannot share the same Node ID.`});return}const B={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:Z.x,y:Z.y,color:"#000000",size:qt.get("ground")?.settings.size||18,type:ge,pointId:be};if(On(se=>[...se,B]),Z.nodeId!==void 0){const se=Fa(Z.nodeId,Nt),D=ca(Z.nodeId,Nt);Yt(P=>P.map(ae=>ae.type==="via"&&ae.points.length>0&&ae.points[0].id===Z.nodeId?{...ae,viaType:se}:ae.type==="pad"&&ae.points.length>0&&ae.points[0].id===Z.nodeId?{...ae,padType:D}:ae))}return}},[k,At,fe,q,Ae,pt,Ze,Qe,at.x,at.y,Yl,Pa,Nt,al,qt,Jn,Vt,vt,ct,Fa,ca,Mn]),Xs=v.useCallback(o=>{if(k!=="magnify")return;o.preventDefault();const c=fn.current;if(!c)return;const f=c.getBoundingClientRect(),p=c.width/f.width,g=c.height/f.height,y=o.nativeEvent.offsetX,u=o.nativeEvent.offsetY,d=typeof y=="number"?y:o.clientX-f.left,w=typeof u=="number"?u:o.clientY-f.top,b=d*p,te=w*g,Q=(b-40-at.x)/Qe,Se=(te-40-at.y)/Qe,ee=1.2,K=1/ee,F=o.deltaY<0?ee:K,Z=Math.max(.25,Math.min(8,Qe*F)),be=b-40-Z*Q,ge=te-40-Z*Se;Ol(Z),Wn({x:be,y:ge})},[k,Qe,at.x,at.y]),Gs=v.useCallback(o=>{if(k==="draw"&&Ae==="trace"){an.current=!0;let c=Dt;if(c.length>1){const f=[c[0]];for(let p=1;p<c.length;p++){const g=f[f.length-1],y=c[p];(Math.abs(g.x-y.x)>.001||Math.abs(g.y-y.y)>.001)&&f.push(y)}c=f}if(c.length>=1){const f=Vt||"top",p=f==="top"?j:Ne,g=f==="top"?it:Ye,y={id:`${Date.now()}-trace`,points:c,color:p,size:g,layer:f,type:"trace"};Yt(u=>[...u,y]),f==="top"?Ul(u=>[...u,y.id]):xa(u=>[...u,y.id]),yn([]),go(null),setTimeout(()=>{an.current=!1},300);return}}if(k==="select"||k==="component"){const c=fn.current;if(!c)return;const f=c.getBoundingClientRect(),p=c.width/f.width,g=c.height/f.height,y=o.nativeEvent.offsetX,u=o.nativeEvent.offsetY,d=typeof y=="number"?y:o.clientX-f.left,w=typeof u=="number"?u:o.clientY-f.top,b=d*p,te=w*g,Q=b-40,Se=te-40,ee=(Q-at.x)/Qe,K=(Se-at.y)/Qe,F=10,Z=(()=>{for(const U of bt)if(ee>=U.x-F&&ee<=U.x+F&&K>=U.y-F&&K<=U.y+F)return{layer:"top",comp:U};for(const U of st)if(ee>=U.x-F&&ee<=U.x+F&&K>=U.y-F&&K<=U.y+F)return{layer:"bottom",comp:U};return null})(),be=Math.max(6/Qe,4);let ge=null;for(const U of vt){const B=Math.max(6,U.size/2),se=B*.8,D=B+se,P=Math.hypot(U.x-ee,U.y-K),ae=Math.abs(ee-U.x)<=be&&Math.abs(K-U.y)<=D,re=Math.abs(K-U.y)<=be&&Math.abs(ee-U.x)<=D;if(P<=Math.max(B,be)||ae||re){ge=U;break}}if(ge){In(new Set([ge.id])),So({visible:!0,id:ge.id,layer:ge.layer,x:ge.x,y:ge.y,size:ge.size,color:ge.color,powerBusId:ge.powerBusId});return}if(Z){const{layer:U,comp:B}=Z;ln(new Set([B.id]));let se="abbreviation"in B&&B.abbreviation?String(B.abbreviation):"";(!se||se.trim()===""||se==="****"||se==="*")&&(se=ps(B.componentType)),Ut({visible:!0,layer:U,id:B.id,designator:B.designator||B.componentType||"",abbreviation:se,manufacturer:"manufacturer"in B&&B.manufacturer||"",partNumber:"partNumber"in B&&B.partNumber||"",pinCount:B.pinCount,x:B.x,y:B.y})}}},[k,Ae,q,fe,pt,bt,st,vt,Qe,at.x,at.y,al,Ka,Yl,Ze,At,wa,Ro,Rt,qt,Dt,Vt,j,Ne,it,Ye]),mi=v.useCallback(()=>{const o=Bl.current;if(k==="draw"&&Ae==="trace"&&o.length>=2){let c=[o[0]];for(let u=1;u<o.length;u++){const d=c[c.length-1],w=o[u];(Math.abs(d.x-w.x)>.001||Math.abs(d.y-w.y)>.001)&&c.push(w)}const f=Vt||"top",p=f==="top"?j:Ne,g=f==="top"?it:Ye,y={id:`${Date.now()}-trace`,points:c,color:p,size:g,layer:f,type:"trace"};Yt(u=>[...u,y]),f==="top"?Ul(u=>[...u,y.id]):xa(u=>[...u,y.id]),yn([]),go(null)}else if(k==="draw"&&Ae==="trace"&&o.length===1){const c=Vt||"top",f=c==="top"?j:Ne,p=c==="top"?it:Ye,g={id:`${Date.now()}-trace-dot`,points:o,color:f,size:p,layer:c,type:"trace"};Yt(y=>[...y,g]),c==="top"?Ul(y=>[...y,g.id]):xa(y=>[...y,g.id]),yn([])}},[k,Ae,Vt,j,Ne,it,Ye,Yt]),vn=v.useCallback((o,c,f)=>{const p=c-o.x,g=f-o.y;if(p===0&&g===0)return{x:c,y:f};const u=(Math.atan2(g,p)*180/Math.PI%180+180)%180,d=[0,45,90];let w=0,b=1e9;for(const te of d){const Q=Math.abs(u-te);Q<b&&(b=Q,w=te)}if(w===0)return{x:c,y:o.y};if(w===90)return{x:o.x,y:f};{const te=Math.min(Math.abs(p),Math.abs(g)),Q=p>=0?1:-1,Se=g>=0?1:-1;return{x:o.x+Q*te,y:o.y+Se*te}}},[]),Zt=v.useCallback(o=>{const c=fn.current?.getBoundingClientRect();if(!c)return;const f=o.clientX-c.left,p=o.clientY-c.top,g=fn.current,y=g.width/c.width,u=g.height/c.height,d=f*y,w=p*u,b=d-40,te=w-40,Q=(b-at.x)/Qe,Se=(te-at.y)/Qe;if(k==="draw"&&Ae==="trace"&&Dt.length>0){const K=Yl?{x:tn({x:Q,y:Se}).x,y:tn({x:Q,y:Se}).y}:((F,Z)=>{let be=1/0,ge=null;const U=15;for(const D of Ze)if(D.type==="via"){const P=D.points[0],ae=Math.hypot(P.x-F,P.y-Z);ae<=U&&ae<be&&(be=ae,ge=P)}else if(D.type==="pad"){const P=D.points[0],ae=Math.hypot(P.x-F,P.y-Z);ae<=U&&ae<be&&(be=ae,ge=P)}for(const D of vt)if(D.pointId!==void 0){const P=Math.hypot(D.x-F,D.y-Z);P<=U&&P<be&&(be=P,ge={x:D.x,y:D.y,id:D.pointId})}for(const D of ct)if(D.pointId!==void 0){const P=Math.hypot(D.x-F,D.y-Z);P<=U&&P<be&&(be=P,ge={x:D.x,y:D.y,id:D.pointId})}const se=tn(ge??{x:F,y:Z});return{x:se.x,y:se.y,nodeId:ge?.id}})(Q,Se);go({x:K.x,y:K.y})}else go(null);if(k==="select"&&Mi&&An){const ee=An.x,K=An.y;pl({x:Math.min(ee,Q),y:Math.min(K,Se),width:Math.abs(Q-ee),height:Math.abs(Se-K)})}else if(k==="pan"&&wa&&jo.current){const{startCX:ee,startCY:K,panX:F,panY:Z}=jo.current,be=b-ee,ge=te-K;Wn({x:F+be,y:Z+ge})}else if(ql&&Dt.length>0)if(k==="draw")if(xo){const ee=Dt[0],K=vn(ee,Q,Se),F=tn(K),Z={id:_l(),x:F.x,y:F.y};yn([ee,Z])}else{const ee=tn({x:Q,y:Se});yn(K=>[...K,{id:_l(),x:ee.x,y:ee.y}])}else k==="erase"&&(yn(ee=>[...ee,{id:_l(),x:Q,y:Se}]),Yt(ee=>{const K=ee.filter(Z=>{if(Z.type==="via"&&Ft||Z.type==="pad"&&Un||Z.type==="trace"&&xn||Z.layer!==pt)return!0;const be=fe/2,ge=Q-be,U=Q+be,B=Se-be,se=Se+be,D=(re,Te)=>re>=ge&&re<=U&&Te>=B&&Te<=se,P=(re,Te,Xe,Ee)=>{const Je=(Pt,Fn)=>{let Cn=0;return Pt<ge?Cn|=1:Pt>U&&(Cn|=2),Fn<B?Cn|=4:Fn>se&&(Cn|=8),Cn};let Pe=re,zt=Te,xt=Xe,_e=Ee,We=Je(Pe,zt),Ue=Je(xt,_e);for(;;){if((We|Ue)===0)return!0;if((We&Ue)!==0)return!1;const Pt=We!==0?We:Ue;let Fn=0,Cn=0;Pt&8?(Fn=Pe+(xt-Pe)*(se-zt)/(_e-zt),Cn=se):Pt&4?(Fn=Pe+(xt-Pe)*(B-zt)/(_e-zt),Cn=B):Pt&2?(Cn=zt+(_e-zt)*(U-Pe)/(xt-Pe),Fn=U):(Cn=zt+(_e-zt)*(ge-Pe)/(xt-Pe),Fn=ge),Pt===We?(Pe=Fn,zt=Cn,We=Je(Pe,zt)):(xt=Fn,_e=Cn,Ue=Je(xt,_e))}};let ae=!1;if(Z.points.length===1){const re=Z.points[0];ae=D(re.x,re.y)}else for(let re=0;re<Z.points.length-1;re++){const Te=Z.points[re],Xe=Z.points[re+1];if(P(Te.x,Te.y,Xe.x,Xe.y)){ae=!0;break}}return ae&&console.log("Erasing stroke at position:",Q,Se,"brushSize:",fe,"selectedLayer:",pt),!ae});console.log("Strokes before:",ee.length,"after:",K.length);const F=new Set(K.map(Z=>Z.id));return vc(Z=>Z.filter(be=>F.has(be))),vs(Z=>Z.filter(be=>F.has(be))),Ul(Z=>Z.filter(be=>F.has(be))),xa(Z=>Z.filter(be=>F.has(be))),K}),Ct||el(ee=>{const K=fe/2,F=Q-K,Z=Q+K,be=Se-K,ge=Se+K,U=B=>{const se=B.size/2,D=B.x-se,P=B.x+se,ae=B.y-se,re=B.y+se;return!(Z<D||F>P||ge<ae||be>re)};return ee.filter(B=>!U(B))}),bn||On(ee=>{const K=fe/2,F=Q-K,Z=Q+K,be=Se-K,ge=Se+K,U=se=>{const D=Math.max(6,(se.size||18)/2),P=D*.8,ae=D+P,re=se.x-ae,Te=se.x+ae,Xe=se.y-ae,Ee=se.y+ae;return!(Z<re||F>Te||ge<Xe||be>Ee)};return ee.filter(se=>!U(se))}));else if(Gn&&Rn&&At){if(Tl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}const ee=Q-Rn.x,K=Se-Rn.y;At==="top"&&T?S(F=>F?{...F,x:F.x+ee,y:F.y+K}:null):At==="bottom"&&_?I(F=>F?{...F,x:F.x+ee,y:F.y+K}:null):At==="both"&&(T&&S(F=>F?{...F,x:F.x+ee,y:F.y+K}:null),_&&I(F=>F?{...F,x:F.x+ee,y:F.y+K}:null)),hs({x:Q,y:Se})}},[ql,Dt,k,fe,Gn,Rn,At,T,_,xo,vn,pt,Yt,Qe,at.x,at.y,Mi,An,Tl,Ft,Un,xn,Ct,bn]),St=v.useCallback(()=>{if(k==="select"&&Mi){const o=Dn,c=An;if(Jo(!1),ua(null),pl(null),o&&c){const f=o.width<3&&o.height<3,p=(U,B)=>{const se=o.x,D=o.y,P=o.x+o.width,ae=o.y+o.height;return U>=se&&U<=P&&B>=D&&B<=ae},g=(U,B,se,D,P,ae,re,Te)=>{const Mt=(We,Ue)=>{let Pt=0;return We<P?Pt|=1:We>re&&(Pt|=2),Ue<ae?Pt|=4:Ue>Te&&(Pt|=8),Pt};let Oe=U,Je=B,Pe=se,zt=D,xt=Mt(Oe,Je),_e=Mt(Pe,zt);for(;;){if((xt|_e)===0)return!0;if((xt&_e)!==0)return!1;const We=xt!==0?xt:_e;let Ue=0,Pt=0;We&8?(Ue=Oe+(Pe-Oe)*(Te-Je)/(zt-Je),Pt=Te):We&4?(Ue=Oe+(Pe-Oe)*(ae-Je)/(zt-Je),Pt=ae):We&2?(Pt=Je+(zt-Je)*(re-Oe)/(Pe-Oe),Ue=re):(Pt=Je+(zt-Je)*(P-Oe)/(Pe-Oe),Ue=P),We===xt?(Oe=Ue,Je=Pt,xt=Mt(Oe,Je)):(Pe=Ue,zt=Pt,_e=Mt(Pe,zt))}},y=o.x,u=o.y,d=o.x+o.width,w=o.y+o.height,b=Math.max(6/Qe,4),te=(U,B,se,D,P,ae)=>{const re=P-se,Te=ae-D;if(re===0&&Te===0)return Math.hypot(U-se,B-D);const Xe=Math.max(0,Math.min(1,((U-se)*re+(B-D)*Te)/(re*re+Te*Te))),Ee=se+Xe*re,Be=D+Xe*Te;return Math.hypot(U-Ee,B-Be)},Q=c?.shiftKey===!0,Se=new Set(Q?Array.from(ht):[]),ee=new Set(Q?Array.from(ut):[]),K=new Set(Q?Array.from(ot):[]),F=new Set(Q?Array.from(kt):[]);if(f){let U=null;for(const B of Ze){let se=!1;if(B.type==="via"||B.type==="pad"?se=Mn:se=B.layer==="top"?kl:Ln,!se)continue;let D=1/0;if(B.type==="via"||B.type==="pad"){const P=B.points[0],ae=Math.max(1,B.size/2);D=Math.hypot(P.x-c.x,P.y-c.y),D<=Math.max(ae,b)&&(!U||D<U.dist)&&(U={id:B.id,dist:D})}else for(let P=0;P<B.points.length-1;P++){const ae=B.points[P],re=B.points[P+1],Te=te(c.x,c.y,ae.x,ae.y,re.x,re.y);if(Te<=Math.max(b,B.size/2)){(!U||Te<U.dist)&&(U={id:B.id,dist:Te});break}}}U&&Se.add(U.id)}else for(const U of Ze){let B=!1;if(U.type==="via"||U.type==="pad"?B=Mn:B=U.layer==="top"?kl:Ln,!B)continue;let se=!1;if(U.type==="via"||U.type==="pad"){const D=U.points[0];se=p(D.x,D.y)}else for(let D=0;D<U.points.length-1;D++){const P=U.points[D],ae=U.points[D+1];if(g(P.x,P.y,ae.x,ae.y,y,u,d,w)||p(P.x,P.y)&&p(ae.x,ae.y)){se=!0;break}}se&&Se.add(U.id)}const Z=U=>{const se=Math.max(10,U.size||18)/2;return U.x-se<=d&&U.x+se>=y&&U.y-se<=w&&U.y+se>=u};if(f){const U=B=>{const D=Math.max(10,B.size||18)/2;return c.x>=B.x-D&&c.x<=B.x+D&&c.y>=B.y-D&&c.y<=B.y+D};sa&&bt.forEach(B=>{U(B)&&ee.add(B.id)}),ka&&st.forEach(B=>{U(B)&&ee.add(B.id)})}else sa&&bt.forEach(U=>{Z(U)&&ee.add(U.id)}),ka&&st.forEach(U=>{Z(U)&&ee.add(U.id)});const be=U=>{const B=Math.max(6,U.size/2),se=B*.8,D=B+se;return U.x-D<=d&&U.x+D>=y&&U.y-D<=w&&U.y+D>=u};if(Aa)if(f){let U=null;for(const B of vt){const se=Math.max(6,B.size/2),D=se*.8,P=se+D,ae=Math.hypot(B.x-c.x,B.y-c.y),re=Math.abs(c.x-B.x)<=b&&Math.abs(c.y-B.y)<=P,Te=Math.abs(c.y-B.y)<=b&&Math.abs(c.x-B.x)<=P;if(ae<=Math.max(se,b)||re||Te){const Ee=Math.min(ae,Math.abs(c.x-B.x)+Math.abs(c.y-B.y));(!U||Ee<U.dist)&&(U={id:B.id,dist:Ee})}}U&&K.add(U.id)}else vt.forEach(U=>{be(U)&&K.add(U.id)});const ge=U=>{const B=Math.max(6,(U.size||18)/2),se=B*.8,D=B+se;return U.x-D<=d&&U.x+D>=y&&U.y-D<=w&&U.y+D>=u};if(Hl)if(f){let U=null;for(const B of ct){const se=Math.max(6,(B.size||18)/2),D=se*.8,P=se+D,ae=Math.hypot(B.x-c.x,B.y-c.y),re=Math.abs(c.x-B.x)<=b&&Math.abs(c.y-B.y)<=P,Te=Math.abs(c.y-B.y)<=b&&Math.abs(c.x-B.x)<=P;if(ae<=Math.max(se,b)||re||Te){const Ee=Math.min(ae,Math.abs(c.x-B.x)+Math.abs(c.y-B.y));(!U||Ee<U.dist)&&(U={id:B.id,dist:Ee})}}U&&F.add(U.id)}else ct.forEach(U=>{ge(U)&&F.add(U.id)});fl(Se),ln(ee),In(K),qn(F)}}if(ql&&Dt.length>0){if(k==="draw"&&Ae!=="trace"){const o={id:Date.now().toString(),points:Dt,color:q,size:fe,layer:pt,type:"trace"};Yt(c=>[...c,o]),pt==="top"?Ul(c=>[...c,o.id]):xa(c=>[...c,o.id])}yn([])}wa&&(pi(!1),jo.current=null,Eo.current=null),ma(!1),Zl(!1),hs(null),bc(!1)},[ql,Dt,k,q,fe,pt,Dn,An,Mi,Ze,Qe,ko,ht,vt,ct,bt,st,ut,ot,kt,Mn,kl,Ln,sa,ka,Aa,Hl]);dt.useEffect(()=>{if(!(k==="pan"&&wa&&Eo.current))return;const o=f=>{const p=fn.current;if(!p)return;const g=p.getBoundingClientRect(),y=p.width/g.width,u=p.height/g.height,{startClientX:d,startClientY:w,panX:b,panY:te}=Eo.current,Q=(f.clientX-d)*y,Se=(f.clientY-w)*u;Wn({x:b+Q,y:te+Se})},c=()=>{pi(!1),jo.current=null,Eo.current=null,window.removeEventListener("mousemove",o,!0),window.removeEventListener("mouseup",c,!0)};return window.addEventListener("mousemove",o,!0),window.addEventListener("mouseup",c,!0),()=>{window.removeEventListener("mousemove",o,!0),window.removeEventListener("mouseup",c,!0)}},[k,wa]);const hl=v.useCallback(()=>{const o=fn.current;if(!o)return;const c=o.getContext("2d");if(!c)return;c.clearRect(0,0,o.width,o.height),c.save(),c.beginPath(),c.rect(40,40,o.width-80,o.height-80),c.clip(),c.translate(40,40),c.translate(at.x,at.y),c.scale(Qe,Qe);const f=(u,d)=>{const w=u.width,b=u.height,te=document.createElement("canvas");te.width=w,te.height=b;const Q=te.getContext("2d");if(!Q)return te;Q.drawImage(u,0,0,w,b);const ee=Q.getImageData(0,0,w,b).data,K=new Uint8ClampedArray(w*b);for(let D=0;D<w*b;D++){const P=ee[D*4+0],ae=ee[D*4+1],re=ee[D*4+2];K[D]=Math.round(.299*P+.587*ae+.114*re)}const F=[-1,0,1,-2,0,2,-1,0,1],Z=[-1,-2,-1,0,0,0,1,2,1],be=new Float32Array(w*b);for(let D=1;D<b-1;D++)for(let P=1;P<w-1;P++){let ae=0,re=0,Te=0;for(let Ee=-1;Ee<=1;Ee++)for(let Be=-1;Be<=1;Be++){const ft=P+Be,Wt=D+Ee,Mt=K[Wt*w+ft];ae+=Mt*F[Te],re+=Mt*Z[Te],Te++}const Xe=Math.sqrt(ae*ae+re*re);be[D*w+P]=Xe}let ge=0;for(let D=0;D<be.length;D++)be[D]>ge&&(ge=be[D]);const U=Q.createImageData(w,b),B=U.data,se=.2;for(let D=0;D<w*b;D++){const ae=(ge>0?be[D]/ge:0)>=se?255:0,re=d?255-ae:ae;B[D*4+0]=re,B[D*4+1]=re,B[D*4+2]=re,B[D*4+3]=255}return Q.putImageData(U,0,0),te},p=(u,d,w,b,te,Q,Se,ee)=>{const K=document.createElement("canvas");K.width=w,K.height=b;const F=K.getContext("2d",{willReadFrequently:!0});F.clearRect(0,0,w,b),F.drawImage(d,0,0,w,b);let Z=K;if(Math.abs(te)>1e-6){const be=Math.tan(te),ge=Math.max(.2,1-be),U=Math.max(.2,1+be),B=Math.max(ge,U),se=Math.max(1,Math.ceil(w*B)),D=document.createElement("canvas");D.width=se,D.height=b;const P=D.getContext("2d",{willReadFrequently:!0});P.clearRect(0,0,se,b);for(let ae=0;ae<b;ae++){const re=b<=1?0:ae/(b-1),Te=ge*(1-re)+U*re,Xe=Math.max(1,w*Te),Ee=(se-Xe)/2;P.drawImage(Z,0,ae,w,1,Ee,ae,Xe,1)}Z=D}if(Math.abs(Q)>1e-6){const be=Math.tan(Q),ge=Math.max(.2,1-be),U=Math.max(.2,1+be),B=Math.max(ge,U),se=Math.max(1,Math.ceil(b*B)),D=document.createElement("canvas");D.width=Z.width,D.height=se;const P=D.getContext("2d",{willReadFrequently:!0});P.clearRect(0,0,D.width,se);for(let ae=0;ae<Z.width;ae++){const re=Z.width<=1?0:ae/(Z.width-1),Te=ge*(1-re)+U*re,Xe=Math.max(1,b*Te),Ee=(se-Xe)/2;P.drawImage(Z,ae,0,1,Z.height,ae,Ee,1,Xe)}Z=D}u.drawImage(Z,-Se/2,-ee/2,Se,ee)},g=Ao&&ia;if(T&&T.bitmap&&Ao){const u=T.bitmap;c.save(),c.globalAlpha=1,ke&&!ye?c.filter="grayscale(100%)":c.filter="none";const d=o.width-80,w=o.height-80,b=d/2,te=w/2;if(c.translate(b+T.x,te+T.y),c.rotate(T.rotation*Math.PI/180),T.skewX||T.skewY){const K=Math.tan(T.skewX||0),F=Math.tan(T.skewY||0);c.transform(1,F,K,1,0,0)}c.scale(T.scale*(T.flipX?-1:1),T.scale*(T.flipY?-1:1));const Q=u.width*1,Se=u.height*1,ee=ye?f(u,le):u;T.keystoneV&&Math.abs(T.keystoneV)>1e-6||T.keystoneH&&Math.abs(T.keystoneH)>1e-6?p(c,ee,u.width,u.height,T.keystoneV||0,T.keystoneH||0,Q,Se):c.drawImage(ee,-Q/2,-Se/2,Q,Se),c.restore()}if(_&&_.bitmap&&ia){const u=_.bitmap;c.save(),c.globalAlpha=g?he/100:1,ke&&!ye?c.filter="grayscale(100%)":c.filter="none";const d=o.width-80,w=o.height-80,b=d/2,te=w/2;if(c.translate(b+_.x,te+_.y),c.rotate(_.rotation*Math.PI/180),_.skewX||_.skewY){const K=Math.tan(_.skewX||0),F=Math.tan(_.skewY||0);c.transform(1,F,K,1,0,0)}c.scale(_.scale*(_.flipX?-1:1),_.scale*(_.flipY?-1:1));const Q=u.width*1,Se=u.height*1,ee=ye?f(u,le):u;_.keystoneV&&Math.abs(_.keystoneV)>1e-6||_.keystoneH&&Math.abs(_.keystoneH)>1e-6?p(c,ee,u.width,u.height,_.keystoneV||0,_.keystoneH||0,Q,Se):c.drawImage(ee,-Q/2,-Se/2,Q,Se),c.restore()}if(yl(c),Aa&&vt.length>0){const u=d=>{c.save();const w=Nt.find(ee=>ee.id===d.powerBusId),b=ot.has(d.id),te="#ff0000";c.strokeStyle=te,c.lineWidth=Math.max(1,(b?3:2)/Math.max(Qe,.001)),c.lineCap="round";const Q=Math.max(6,d.size/2),Se=Q*.8;b&&(c.strokeStyle="#0066ff",c.lineWidth=Math.max(1,4/Math.max(Qe,.001)),c.beginPath(),c.arc(d.x,d.y,Q+Se+3,0,Math.PI*2),c.stroke()),c.strokeStyle=te,c.lineWidth=Math.max(1,(b?3:2)/Math.max(Qe,.001)),c.beginPath(),c.arc(d.x,d.y,Q,0,Math.PI*2),c.stroke(),c.beginPath(),c.moveTo(d.x,d.y-Q-Se),c.lineTo(d.x,d.y+Q+Se),c.stroke(),c.beginPath(),c.moveTo(d.x-Q-Se,d.y),c.lineTo(d.x+Q+Se,d.y),c.stroke(),w&&(c.fillStyle=te,c.font=`${Math.max(10,Q*.8)}px sans-serif`,c.textAlign="center",c.textBaseline="middle",c.fillText(w.voltage,d.x,d.y+Q+Se+12)),c.restore()};vt.forEach(u)}if(Hl&&ct.length>0){const u=d=>{c.save();const w=kt.has(d.id),b="#000000";c.strokeStyle=b,c.lineWidth=Math.max(1,(w?3:2)/Math.max(Qe,.001)),c.lineCap="round";const te=Math.max(6,(d.size||18)/2),Q=te*.8;w&&(c.strokeStyle="#0066ff",c.lineWidth=Math.max(1,4/Math.max(Qe,.001)),c.beginPath(),c.arc(d.x,d.y,te+Q+3,0,Math.PI*2),c.stroke()),c.strokeStyle=b,c.lineWidth=Math.max(1,(w?3:2)/Math.max(Qe,.001)),c.beginPath(),c.arc(d.x,d.y,te,0,Math.PI*2),c.stroke(),c.beginPath(),c.moveTo(d.x,d.y-te-Q),c.lineTo(d.x,d.y+te+Q),c.stroke(),c.beginPath(),c.moveTo(d.x-te-Q,d.y),c.lineTo(d.x+te+Q,d.y),c.stroke(),c.restore()};ct.forEach(u)}const y=u=>{const d=Math.max(10,u.size||18),w=d/2;c.save(),c.strokeStyle=u.color||"#111",c.lineWidth=Math.max(1,2/Math.max(Qe,.001)),c.fillStyle="rgba(255,255,255,0.85)",c.beginPath(),c.rect(u.x-w,u.y-w,d,d),c.fill(),c.stroke();let b="abbreviation"in u&&u.abbreviation?String(u.abbreviation).trim():"";(!b||b===""||b==="****"||b==="*"||b==="?")&&(b=ps(u.componentType)),c.fillStyle=u.color||"#111",c.font=`bold ${Math.max(8,d*.35)}px sans-serif`,c.textAlign="center",c.textBaseline="middle",c.fillText(b,u.x,u.y);const te=u.pinConnections||[];if(te.length>0&&te.length===u.pinCount&&te.every(ee=>ee&&ee.trim()!=="")){const K=c.measureText(b).width,F=u.y+d*.35/2+2;c.strokeStyle=u.color||"#111",c.lineWidth=Math.max(1,2/Math.max(Qe,.001)),c.beginPath(),c.moveTo(u.x-K/2,F),c.lineTo(u.x+K/2,F),c.stroke()}ut.has(u.id)&&(c.setLineDash([4,3]),c.strokeStyle="#00bfff",c.lineWidth=1.5,c.strokeRect(u.x-w-3,u.y-w-3,d+6,d+6),c.setLineDash([])),c.restore()};if(sa&&bt.forEach(y),ka&&st.forEach(y),k==="select"&&Dn){c.save();const u=Math.max(2,6/Math.max(1e-4,Qe));c.strokeStyle="#00bfff",c.fillStyle="rgba(0, 191, 255, 0.15)",c.lineWidth=Math.max(1,1.5/Math.max(1e-4,Qe)),c.setLineDash([u,u]),c.beginPath(),c.rect(Dn.x,Dn.y,Dn.width,Dn.height),c.fill(),c.stroke(),c.setLineDash([]),c.restore()}c.restore()},[T,_,he,Ze,Dt,ql,k,q,fe,ke,ye,le,At,pt,Qe,at.x,at.y,Ao,ia,Mn,kl,Ln,qa,$a,sa,ka,bt,st,Aa,vt,Hl,ct,Dn,ht,ut,ot,kt,Vt,j,Ne,it,Ye,Ae,$l]);dt.useEffect(()=>{const o=fn.current,c=la.current,f=zc.current,p=jc.current;if(!o||!c||!f||!p)return;let g=null;const y=o.width-80,u=o.height-80,d=y/2,w=u/2,b=B=>{if(!B||!B.bitmap)return;const se=B.bitmap.width,D=B.bitmap.height,P=B.keystoneV?Math.tan(B.keystoneV):0,ae=B.keystoneH?Math.tan(B.keystoneH):0,re=Math.max(.2,1-P),Te=Math.max(.2,1+P),Xe=Math.max(.2,1-ae),Ee=Math.max(.2,1+ae),Be=Math.max(re,Te),ft=Math.max(Xe,Ee),Wt=se*Be,Mt=D*ft,Oe=B.skewX?Math.tan(B.skewX):0,Je=B.skewY?Math.tan(B.skewY):0,Pe=Math.abs(B.scale),zt=Math.abs(Pe)*Wt+Math.abs(Oe)*Math.abs(Pe)*Mt,xt=Math.abs(Je)*Math.abs(Pe)*Wt+Math.abs(Pe)*Mt,_e=Ey(zt,xt,d,w,B.x,B.y,1,1,B.rotation);g=jy(g,_e)};if(b(T),b(_),!g){f.style.width=`${c.clientWidth}px`,p.style.height=`${c.clientHeight}px`;return}const te=g,Q=te.maxX-te.minX,Se=te.maxY-te.minY,ee=Q*Qe,K=Se*Qe,F=8,Z=Math.max(c.clientWidth,Math.ceil(ee)+F*2),be=Math.max(c.clientHeight,Math.ceil(K)+F*2);f.style.width=`${Z}px`,p.style.height=`${be}px`,fi.current=te.minX*Qe-F,di.current=te.minY*Qe-F;const ge=Yi.current,U=Ca.current;if(oa.current=!0,ge){const B=Math.max(0,ge.scrollWidth-ge.clientWidth),se=Math.max(0,Math.min(B,-(at.x+fi.current)));ge.scrollLeft=se}if(U){const B=Math.max(0,U.scrollHeight-U.clientHeight),se=Math.max(0,Math.min(B,-(at.y+di.current)));U.scrollTop=se}requestAnimationFrame(()=>{oa.current=!1})},[T,_,Qe,at.x,at.y,Ta.width,Ta.height]),dt.useEffect(()=>{const o=()=>{const c=la.current;if(!c)return;const f=1.6,p=24,g=c.clientWidth-p,y=c.clientHeight-p,u=Math.floor(y*f),d=Math.floor(g/f);let w,b;u<=g?(w=u,b=y):(w=g,b=d),w=Math.max(600,w),b=Math.max(375,b),kr(te=>te.width===w&&te.height===b?te:{width:w,height:b})};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const yl=v.useCallback(o=>{if(Ze.forEach(c=>{if(c.type==="via"||c.type==="pad")return;let f=!1;if(c.layer==="top"?f=kl:c.layer==="bottom"&&(f=Ln),!!f)if(c.points.length===1){const p=c.points[0],g=Math.max(.5,c.size/2);ht.has(c.id)&&(o.strokeStyle="#00bfff",o.lineWidth=2,o.setLineDash([4,3]),o.beginPath(),o.arc(p.x,p.y,g+3,0,Math.PI*2),o.stroke(),o.setLineDash([])),o.fillStyle=c.color,o.beginPath(),o.arc(p.x,p.y,g,0,Math.PI*2),o.fill()}else{ht.has(c.id)&&(o.strokeStyle="#00bfff",o.lineWidth=c.size+4,o.lineCap="round",o.lineJoin="round",o.globalAlpha=.6,o.beginPath(),c.points.forEach((p,g)=>{g===0?o.moveTo(p.x,p.y):o.lineTo(p.x,p.y)}),o.stroke(),o.globalAlpha=1),o.strokeStyle=c.color,o.lineWidth=c.size,o.lineCap="round",o.lineJoin="round",o.globalAlpha=1,o.beginPath(),c.points.forEach((p,g)=>{g===0?o.moveTo(p.x,p.y):o.lineTo(p.x,p.y)}),o.stroke();for(const p of c.points)o.beginPath(),o.arc(p.x,p.y,c.size/2,0,Math.PI*2),o.fill()}}),Ze.forEach(c=>{if(c.type==="via"){if(!Mn)return}else if(c.type==="pad"){if(c.layer==="top"&&!qa||c.layer==="bottom"&&!$a)return}else return;const f=c.points[0];if(ht.has(c.id)){if(c.type==="via"){const p=Math.max(.5,c.size/2)+3;o.strokeStyle="#00bfff",o.lineWidth=2,o.setLineDash([4,3]),o.beginPath(),o.arc(f.x,f.y,p,0,Math.PI*2),o.stroke(),o.setLineDash([])}else if(c.type==="pad"){const p=Math.max(.5,c.size/2)+3;o.strokeStyle="#00bfff",o.lineWidth=2,o.setLineDash([4,3]),o.strokeRect(f.x-p,f.y-p,c.size+6,c.size+6),o.setLineDash([])}}if(c.type==="via"){const p=Math.max(.5,c.size/2),g=p*.5,y=p*.7;o.fillStyle=c.color,o.beginPath(),o.arc(f.x,f.y,p,0,Math.PI*2),o.arc(f.x,f.y,g,0,Math.PI*2),o.fill("evenodd"),o.strokeStyle="#808080",o.lineWidth=1,o.beginPath(),o.moveTo(f.x-y,f.y),o.lineTo(f.x+y,f.y),o.stroke(),o.beginPath(),o.moveTo(f.x,f.y-y),o.lineTo(f.x,f.y+y),o.stroke()}else if(c.type==="pad"){const p=Math.max(.5,c.size/2),g=c.size,y=g*.5,u=p*.7;o.fillStyle=c.color,o.beginPath(),o.rect(f.x-p,f.y-p,g,g),o.rect(f.x-y/2,f.y-y/2,y,y),o.fill("evenodd"),o.strokeStyle="#808080",o.lineWidth=1,o.beginPath(),o.moveTo(f.x-u,f.y),o.lineTo(f.x+u,f.y),o.stroke(),o.beginPath(),o.moveTo(f.x,f.y-u),o.lineTo(f.x,f.y+u),o.stroke()}}),Dt.length>0){const c=pt;let f=!0;if(k==="draw"&&(Ae==="via"?f=Mn:f=c==="top"?kl:Ln),f)if(k==="draw")if(Ae==="via"){const p=Dt[Dt.length-1],g=Math.max(.5,fe/2),y=g*.5,u=g*.7;o.fillStyle=q,o.beginPath(),o.arc(p.x,p.y,g,0,Math.PI*2),o.arc(p.x,p.y,y,0,Math.PI*2),o.fill("evenodd"),o.strokeStyle="#808080",o.lineWidth=1,o.beginPath(),o.moveTo(p.x-u,p.y),o.lineTo(p.x+u,p.y),o.stroke(),o.beginPath(),o.moveTo(p.x,p.y-u),o.lineTo(p.x,p.y+u),o.stroke()}else if(Ae==="pad"){const p=Dt[Dt.length-1],g=Math.max(.5,fe/2),y=fe,u=y*.5,d=g*.7;o.fillStyle=q,o.beginPath(),o.rect(p.x-g,p.y-g,y,y),o.rect(p.x-u/2,p.y-u/2,u,u),o.fill("evenodd"),o.strokeStyle="#808080",o.lineWidth=1,o.beginPath(),o.moveTo(p.x-d,p.y),o.lineTo(p.x+d,p.y),o.stroke(),o.beginPath(),o.moveTo(p.x,p.y-d),o.lineTo(p.x,p.y+d),o.stroke()}else{const p=Vt||"top",g=p==="top"?j:Ne,y=p==="top"?it:Ye;if(Dt.length===1){const u=Dt[0],d=Math.max(.5,y/2);o.fillStyle=g,o.beginPath(),o.arc(u.x,u.y,d,0,Math.PI*2),o.fill(),$l&&(o.strokeStyle=g,o.lineWidth=y,o.lineCap="round",o.lineJoin="round",o.globalAlpha=.6,o.beginPath(),o.moveTo(u.x,u.y),o.lineTo($l.x,$l.y),o.stroke(),o.globalAlpha=1)}else if(o.strokeStyle=g,o.lineWidth=y,o.lineCap="round",o.lineJoin="round",o.globalAlpha=1,o.beginPath(),Dt.forEach((u,d)=>{d===0?o.moveTo(u.x,u.y):o.lineTo(u.x,u.y)}),o.stroke(),$l&&Dt.length>0){const u=Dt[Dt.length-1];o.globalAlpha=.6,o.beginPath(),o.moveTo(u.x,u.y),o.lineTo($l.x,$l.y),o.stroke(),o.globalAlpha=1}}else k==="erase"&&(o.strokeStyle="rgba(255, 0, 0, 0.5)",o.lineWidth=fe,o.lineCap="round",o.lineJoin="round",o.globalAlpha=.5,o.beginPath(),Dt.forEach((p,g)=>{g===0?o.moveTo(p.x,p.y):o.lineTo(p.x,p.y)}),o.stroke())}},[Ze,ht,kl,Ln,Mn,qa,$a,Dt,k,Ae,q,fe,pt,Vt,j,Ne,it,Ye,$l]),xi=v.useCallback((o,c)=>{if(Tl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}o==="top"&&T?S(f=>f?{...f,...c}:null):o==="bottom"&&_?I(f=>f?{...f,...c}:null):o==="both"&&(T&&S(f=>f?{...f,...c}:null),_&&I(f=>f?{...f,...c}:null))},[T,_,Tl]),Ra=v.useCallback(()=>{At&&(xi(At,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),xe(!1),ve(!1),m(!1))},[xi,At]),Qi=v.useCallback(()=>{if(ht.size>0||ut.size>0||ot.size>0||kt.size>0){if(ht.size>0){const o=Ze.filter(g=>ht.has(g.id)),c=Ft&&o.some(g=>g.type==="via"),f=xn&&o.some(g=>g.type==="trace"),p=Un&&o.some(g=>g.type==="pad");if(c){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(f){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(p){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(ut.size>0&&Me){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(ot.size>0&&Ct){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(kt.size>0&&bn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Yt(o=>o.map(c=>{if(ht.has(c.id)){const f=c.size+1;return c.type==="via"?qe("via",f):c.type==="pad"?qe("pad",f):c.type==="trace"&&qe("trace",f,c.layer),{...c,size:f}}return c})),ut.size>0){const o=(ut.size>0&&bt.find(c=>ut.has(c.id))?.size||18)+1;qe("component",o),En(c=>c.map(f=>ut.has(f.id)?{...f,size:(f.size||18)+1}:f)),dn(c=>c.map(f=>ut.has(f.id)?{...f,size:(f.size||18)+1}:f))}if(ot.size>0){const o=(vt.find(c=>ot.has(c.id))?.size||18)+1;qe("power",o),el(c=>c.map(f=>ot.has(f.id)?{...f,size:f.size+1}:f))}if(kt.size>0){const o=(ct.find(c=>kt.has(c.id))?.size||18)+1;qe("ground",o),On(c=>c.map(f=>kt.has(f.id)?{...f,size:(f.size||18)+1}:f))}}else Ge(o=>Math.min(40,o+1))},[ht,ut,ot,kt,Ze,Ft,xn,Me,Ct,bn,k,Ae,pt,qe]),Fi=v.useCallback(()=>{if(ht.size>0||ut.size>0||ot.size>0||kt.size>0){if(ht.size>0){const o=Ze.filter(g=>ht.has(g.id)),c=Ft&&o.some(g=>g.type==="via"),f=xn&&o.some(g=>g.type==="trace"),p=Un&&o.some(g=>g.type==="pad");if(c){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(f){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(p){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(ut.size>0&&Me){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(ot.size>0&&Ct){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(kt.size>0&&bn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Yt(o=>o.map(c=>{if(ht.has(c.id)){const f=Math.max(1,c.size-1);return c.type==="via"?qe("via",f):c.type==="pad"?qe("pad",f):c.type==="trace"&&qe("trace",f,c.layer),{...c,size:f}}return c})),ut.size>0){const o=Math.max(1,(bt.find(c=>ut.has(c.id))?.size||18)-1);qe("component",o),En(c=>c.map(f=>ut.has(f.id)?{...f,size:Math.max(1,(f.size||18)-1)}:f)),dn(c=>c.map(f=>ut.has(f.id)?{...f,size:Math.max(1,(f.size||18)-1)}:f))}if(ot.size>0){const o=Math.max(1,(vt.find(c=>ot.has(c.id))?.size||18)-1);qe("power",o),el(c=>c.map(f=>ot.has(f.id)?{...f,size:Math.max(1,f.size-1)}:f))}if(kt.size>0){const o=Math.max(1,(ct.find(c=>kt.has(c.id))?.size||18)-1);qe("ground",o),On(c=>c.map(f=>kt.has(f.id)?{...f,size:Math.max(1,(f.size||18)-1)}:f))}}else Ge(o=>Math.max(1,o-1))},[ht,ut,ot,kt,Ze,Ft,xn,Me,Ct,bn,k,Ae,pt,qe]),Ja=v.useCallback(()=>{const o=Wl.size;if(ht.size>0||ut.size>0||ot.size>0||kt.size>0){if(ht.size>0){const c=Ze.filter(y=>ht.has(y.id)),f=Ft&&c.some(y=>y.type==="via"),p=Un&&c.some(y=>y.type==="pad"),g=xn&&c.some(y=>y.type==="trace");if(f||p||g){alert("Cannot change size: selected items are locked.");return}}if(ut.size>0&&Me){alert("Cannot change size: selected components are locked.");return}if(ot.size>0&&Ct){alert("Cannot change size: selected power nodes are locked.");return}if(kt.size>0&&bn){alert("Cannot change size: selected ground nodes are locked.");return}Yt(c=>c.map(f=>ht.has(f.id)?(f.type==="via"?(qe("via",o),Bn(p=>{const g=new Map(p),y=g.get("via");return y&&g.set("via",{...y,settings:{...y.settings,size:o}}),g})):f.type==="pad"?(qe("pad",o),Bn(p=>{const g=new Map(p),y=g.get("pad");return y&&g.set("pad",{...y,settings:{...y.settings,size:o}}),g})):f.type==="trace"&&qe("trace",o,f.layer),{...f,size:o}):f)),ut.size>0&&(qe("component",o),En(c=>c.map(f=>ut.has(f.id)?{...f,size:o}:f)),dn(c=>c.map(f=>ut.has(f.id)?{...f,size:o}:f))),ot.size>0&&(qe("power",o),el(c=>c.map(f=>ot.has(f.id)?{...f,size:o}:f))),kt.size>0&&(qe("ground",o),On(c=>c.map(f=>kt.has(f.id)?{...f,size:o}:f)))}else Ge(o),k==="draw"&&Ae==="trace"?pt==="top"?(gt(o),qe("trace",o,"top")):(H(o),qe("trace",o,"bottom")):qe(k==="draw"&&Ae==="via"?"via":k==="draw"&&Ae==="pad"?"pad":k==="component"?"component":k==="power"?"power":k==="ground"?"ground":"brush",o);Ll({visible:!1,size:6})},[Wl.size,ht,ut,ot,kt,Ze,Ft,xn,Me,Ct,bn,k,Ae,pt,qe,qt,Bn]),eo=v.useCallback(()=>{To({visible:!1,source:null}),zl({visible:!0,interval:5})},[]),Ki=v.useCallback(()=>{To({visible:!1,source:null})},[]),bi=v.useCallback(async()=>{const o=Jl.interval;if(o===null){ea(!1),Ga(null),Xt.current&&(clearInterval(Xt.current),Xt.current=null),zl({visible:!1,interval:5}),console.log("Auto save: Disabled");return}if(!kn){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let c=ci;if(!c){const p=window;if(typeof p.showDirectoryPicker=="function")try{c=await p.showDirectoryPicker(),ri(c)}catch(g){g?.name!=="AbortError"&&(console.error("Failed to get directory:",g),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser.");return}}Ns(c);const f=kn.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");zo(f),da.current=c,sl.current=f,Ga(o),ea(!0),El.current=!0,zl({visible:!1,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${o} minutes`),Is()},200)},[Jl.interval,kn,ci]),vi=v.useCallback(o=>{if(o.key==="Escape"){const p=document.activeElement;if(p&&(p.tagName==="INPUT"&&p.type==="checkbox"||p.tagName==="INPUT"&&p.type==="radio")){p.blur(),o.preventDefault(),o.stopPropagation();return}}const c=document.activeElement;if(!(c&&(c.tagName==="INPUT"&&c.type!=="checkbox"&&c.type!=="radio"||c.tagName==="TEXTAREA"||c.isContentEditable)||_o.current>0&&o.key!=="z"&&o.key!=="Z")){if(o.key==="+"||o.key==="="){o.preventDefault(),o.stopPropagation(),Qi();return}if(o.key==="-"||o.key==="_"){o.preventDefault(),o.stopPropagation(),Fi();return}if((o.key==="I"||o.key==="i")&&(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey){o.preventDefault(),o.stopPropagation();const p=[];ht.size>0,ht.size===0&&ut.size===0&&ot.size===0&&kt.size===0&&p.push(`
No objects selected.`);const g=p.join(`
`);console.log(g),Es({visible:!0,text:g});return}if(o.key==="O"||o.key==="o"){const p=document.activeElement;if(!!p&&(p.tagName==="INPUT"&&p.type!=="range"&&p.type!=="checkbox"&&p.type!=="radio"||p.tagName==="TEXTAREA"||p.isContentEditable))return;o.preventDefault(),o.stopPropagation(),Ol(1);const y=fn.current,u=la.current;let d=0,w=0;if(y&&u){const b=y.getBoundingClientRect(),te=u.getBoundingClientRect(),Q=y.width-80,Se=y.height-80,F=56+168+6,Z=b.left-te.left,be=F-Z,ge=b.width-Math.max(0,be),U=be+ge/2,B=b.height/2,se=Q/2,D=Se/2,P=b.width/y.width,ae=b.height/y.height,re=U/P,Te=B/ae,Xe=re-40,Ee=Te-40;d=Xe-se,w=Ee-D}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Wn({x:d,y:w}),ze("overlay"),fl(new Set),ln(new Set),In(new Set),qn(new Set),L("select");return}if((o.key==="Alt"||o.altKey)&&il(!0),o.key==="Escape"){o.preventDefault(),o.stopPropagation(),L("select"),No(!1),ll(!1),Wa(!1),Qn(!1),Za(!1),Ui(!1),gi(null);return}if(o.key==="Enter"&&k==="draw"&&Ae==="trace"){mi();return}if((o.key==="Delete"||o.key==="Backspace")&&(ht.size>0||ut.size>0||ot.size>0||kt.size>0)){if(o.preventDefault(),o.stopPropagation(),ht.size>0){const p=Ze.filter(d=>ht.has(d.id)),g=Ft&&p.some(d=>d.type==="via"),y=xn&&p.some(d=>d.type==="trace"),u=Un&&p.some(d=>d.type==="pad");g?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):y?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):u?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):(Yt(d=>d.filter(w=>!ht.has(w.id))),fl(new Set))}ut.size>0&&(Me?alert("Cannot delete: Components are locked. Unlock components to delete them."):(En(p=>p.filter(g=>!ut.has(g.id))),dn(p=>p.filter(g=>!ut.has(g.id))),ln(new Set))),ot.size>0&&(Ct?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(el(p=>p.filter(g=>!ot.has(g.id))),In(new Set))),kt.size>0&&(bn?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(On(p=>p.filter(g=>!kt.has(g.id))),qn(new Set)));return}if((k==="draw"||k==="erase"||k==="power"||k==="ground")&&(o.key==="z"||o.key==="Z")&&(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey){if(o.preventDefault(),o.stopPropagation(),k==="power"){el(p=>p.length===0?p:p.slice(0,-1));return}if(k==="ground"){On(p=>p.length===0?p:p.slice(0,-1));return}if(k==="draw"&&Ae==="trace"){const p=Dt,g=Bl.current,y=p.length>0?p:g;if(y.length>0){y.length>1?yn(u=>u.slice(0,-1)):yn([]);return}Yt(u=>{for(let d=u.length-1;d>=0;d--){const w=u[d];if(w.type==="trace"&&w.layer===pt&&w.points.length>=2)if(w.points.length>2){const b=w.points.slice(0,-1);return yn(b),[...u.slice(0,d),...u.slice(d+1)]}else return[...u.slice(0,d),...u.slice(d+1)]}return u});return}if(ql&&Dt.length>0){yn([]);return}k==="draw"&&(Ae==="via"||Ae==="pad")&&Yt(p=>{for(let g=p.length-1;g>=0;g--){const y=p[g];if(y.layer===pt&&y.type===Ae)return[...p.slice(0,g),...p.slice(g+1)]}return p});return}if(!o.metaKey&&!o.ctrlKey&&!o.altKey){const p=document.activeElement;if(!(!!p&&(p.tagName==="INPUT"&&p.type!=="range"&&p.type!=="checkbox"&&p.type!=="radio"||p.tagName==="TEXTAREA"||p.isContentEditable)))switch(o.key){case"s":case"S":o.preventDefault(),L("select");return;case"b":case"B":o.preventDefault(),L("power");return;case"g":case"G":o.preventDefault(),L("ground");return;case"v":case"V":o.preventDefault(),La("via"),L("draw");return;case"p":case"P":o.preventDefault(),La("pad"),L("draw"),jn(Jn||"top"),ll(!0);return;case"t":case"T":o.preventDefault(),La("trace"),L("draw"),jn(Vt||"top"),No(!0);return;case"c":case"C":o.preventDefault(),L("component"),Wa(!0),Qn(!1),Pi(null);return;case"e":case"E":o.preventDefault(),L("erase");return;case"h":case"H":o.preventDefault(),L("pan");return;case"z":case"Z":if(!(o.metaKey||o.ctrlKey)){o.preventDefault(),Vi(!1),L("magnify");return}break}}if(k==="transform"&&At){if(!(o.key==="ArrowLeft"||o.key==="ArrowRight"||o.key==="ArrowUp"||o.key==="ArrowDown"))return;o.preventDefault(),o.stopPropagation();const g=document.activeElement;if(g&&g.tagName==="INPUT"){const y=g;y.type==="radio"&&y.blur()}if(Ha==="nudge"){let y=0,u=0;switch(o.key){case"ArrowLeft":y=-1;break;case"ArrowRight":y=1;break;case"ArrowUp":u=-1;break;case"ArrowDown":u=1;break;default:return}At==="top"&&T?S(d=>d?{...d,x:d.x+y,y:d.y+u}:null):At==="bottom"&&_?I(d=>d?{...d,x:d.x+y,y:d.y+u}:null):At==="both"&&(T&&S(d=>d?{...d,x:d.x+y,y:d.y+u}:null),_&&I(d=>d?{...d,x:d.x+y,y:d.y+u}:null))}else if(Ha==="scale"){let y=0;switch(o.key){case"ArrowUp":y=.01;break;case"ArrowDown":y=-.01;break;case"ArrowRight":y=.001;break;case"ArrowLeft":y=-.001;break;default:return}At==="top"&&T?S(u=>u?{...u,scale:Math.max(.1,Math.min(3,u.scale+y))}:null):At==="bottom"&&_?I(u=>u?{...u,scale:Math.max(.1,Math.min(3,u.scale+y))}:null):At==="both"&&(T&&S(u=>u?{...u,scale:Math.max(.1,Math.min(3,u.scale+y))}:null),_&&I(u=>u?{...u,scale:Math.max(.1,Math.min(3,u.scale+y))}:null))}else if(Ha==="rotate"){let y=0;switch(o.key){case"ArrowUp":y=1;break;case"ArrowDown":y=-1;break;case"ArrowRight":y=.1;break;case"ArrowLeft":y=-.1;break;default:return}At==="top"&&T?S(u=>u?{...u,rotation:u.rotation+y}:null):At==="bottom"&&_?I(u=>u?{...u,rotation:u.rotation+y}:null):At==="both"&&(T&&S(u=>u?{...u,rotation:u.rotation+y}:null),_&&I(u=>u?{...u,rotation:u.rotation+y}:null))}else if(Ha==="slant"){let y=0,u=0;switch(o.key){case"ArrowUp":u=-.5;break;case"ArrowDown":u=.5;break;case"ArrowLeft":y=-.5;break;case"ArrowRight":y=.5;break}if(y!==0||u!==0){const d=b=>b*Math.PI/180,w=b=>Math.max(-.7,Math.min(.7,b));At==="top"&&T?S(b=>b?{...b,skewX:w((b.skewX||0)+d(y)),skewY:w((b.skewY||0)+d(u))}:null):At==="bottom"&&_?I(b=>b?{...b,skewX:w((b.skewX||0)+d(y)),skewY:w((b.skewY||0)+d(u))}:null):At==="both"&&(T&&S(b=>b?{...b,skewX:w((b.skewX||0)+d(y)),skewY:w((b.skewY||0)+d(u))}:null),_&&I(b=>b?{...b,skewX:w((b.skewX||0)+d(y)),skewY:w((b.skewY||0)+d(u))}:null))}}else if(Ha==="keystone"){let y=0,u=0;switch(o.key){case"ArrowUp":u=-.5;break;case"ArrowDown":u=.5;break;case"ArrowLeft":y=-.5;break;case"ArrowRight":y=.5;break}if(y!==0||u!==0){const d=b=>b*Math.PI/180,w=b=>Math.max(-.35,Math.min(.35,b));At==="top"&&T?S(b=>b?{...b,keystoneH:w((b.keystoneH||0)+d(y)),keystoneV:w((b.keystoneV||0)+d(u))}:null):At==="bottom"&&_?I(b=>b?{...b,keystoneH:w((b.keystoneH||0)+d(y)),keystoneV:w((b.keystoneV||0)+d(u))}:null):At==="both"&&(T&&S(b=>b?{...b,keystoneH:w((b.keystoneH||0)+d(y)),keystoneV:w((b.keystoneV||0)+d(u))}:null),_&&I(b=>b?{...b,keystoneH:w((b.keystoneH||0)+d(y)),keystoneV:w((b.keystoneV||0)+d(u))}:null))}}}else{const p=o.target;if(p.tagName==="INPUT"&&p.type==="range"){const g=p,y=Number(g.value),u=Number(g.min),d=Number(g.max),w=Number(g.step)||1;switch(o.key){case"ArrowLeft":o.preventDefault();const b=Math.max(u,y-w);g.value=b.toString(),g.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":o.preventDefault();const te=Math.min(d,y+w);g.value=te.toString(),g.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[k,At,Ha,T,_,ht,ut,ot,kt,Ze,bt,st,vt,ct,Nt,Ae,mi,Vt,j,Ne,it,Ye]);dt.useEffect(()=>{k!=="transform"&&mo(null)},[k]),dt.useEffect(()=>{window.addEventListener("keydown",vi,!0);const o=c=>{c.key==="Alt"&&il(!1)};return window.addEventListener("keyup",o,!0),()=>{window.removeEventListener("keydown",vi,!0),window.removeEventListener("keyup",o,!0)}},[vi,ot,kt,Ct,bn,vt,ct,Qi,Fi]);const Al=v.useCallback(()=>{et("#AA4499"),nt("#F781BF"),gt(6),H(6),mt("trace","#AA4499","top"),mt("trace","#F781BF","bottom"),qe("trace",6,"top"),qe("trace",6,"bottom"),N("#0072B2"),we("#56B4E9"),R(26),Ce(26),mt("pad","#0072B2","top"),mt("pad","#56B4E9","bottom"),qe("pad",26,"top"),qe("pad",26,"bottom"),Ve("#6A3D9A"),Ke("#9467BD"),hn(18),Sl(18),mt("component","#6A3D9A","top"),mt("component","#9467BD","bottom"),qe("component",18,"top"),qe("component",18,"bottom"),Ai("top"),$("#AA4499"),Ge(6),dl([{id:"powerbus-1",name:"+3.3VDC",voltage:"+3.3VDC",color:"#ff0000"},{id:"powerbus-2",name:"+5VDC",voltage:"+5VDC",color:"#ff0000"}]),va(!1),ti(!1),Co(!1),wo(!1),ni(!1),Kl(!1),jn("top"),L("select"),O(50),oe(!1),ze("overlay"),Qp(1)},[mt,qe]),Hn=v.useCallback(()=>{Al(),setTimeout(()=>{Ol(1);const o=fn.current,c=la.current;let f=0,p=0;if(o&&c){const g=o.getBoundingClientRect(),y=c.getBoundingClientRect(),u=o.width-80,d=o.height-80,te=56+168+6,Q=g.left-y.left,Se=te-Q,ee=g.width-Math.max(0,Se),K=Se+ee/2,F=g.height/2,Z=u/2,be=d/2,ge=g.width/o.width,U=g.height/o.height,B=K/ge,se=F/U,D=B-40,P=se-40;f=D-Z,p=P-be}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Wn({x:f,y:p}),fl(new Set),ln(new Set),In(new Set),qn(new Set)},100)},[Al]);dt.useEffect(()=>{Hn()},[]),dt.useEffect(()=>{if(!js.visible)return;const o=[];ht.size>0,ht.size===0&&ut.size===0&&ot.size===0&&kt.size===0&&o.push(`
No objects selected.`);const c=o.join(`
`);Es(f=>({...f,text:c}))},[js.visible,ht,ut,ot,kt,Ze,bt,st,vt,ct,Nt]),dt.useEffect(()=>{const o=c=>{const f=fn.current;if(f&&!(ra.current&&ra.current.contains(c.target))&&!(c.target instanceof Node&&f.contains(c.target))){if(mi(),Na){const p=Pn.current;(!p||!(c.target instanceof Node)||!p.contains(c.target))&&No(!1)}if(yi){const p=ra.current;(!p||!(c.target instanceof Node)||!p.contains(c.target))&&(Wa(!1),L("select"))}if(Ka){const p=ol.current;(!p||!(c.target instanceof Node)||!p.contains(c.target))&&(Qn(!1),gi(null))}if(Ds){const p=Us.current;!c.target?.closest('button[title="Color Picker"]')&&(!p||!(c.target instanceof Node)||!p.contains(c.target))&&Ui(!1)}}};return document.addEventListener("mousedown",o,!0),()=>document.removeEventListener("mousedown",o,!0)},[mi,Na,Zi,yi,Ka,Ds]),dt.useEffect(()=>{const o=c=>{if(!Rt)return;const f=document.querySelector("[data-component-editor-dialog]");if(f&&c.target instanceof Node&&f.contains(c.target)){const P=c.target;if(P.tagName==="BUTTON"||P.tagName==="INPUT"||P.closest("button")||P.closest("input"))return}const p=fn.current;if(!p)return;const g=p.getBoundingClientRect(),y=c.clientX,u=c.clientY;if(y<g.left||y>g.right||u<g.top||u>g.bottom)return;const d=p.width/g.width,w=p.height/g.height,b=y-g.left,te=u-g.top,Q=b*d,Se=te*w,ee=Q-40,K=Se-40,F=(ee-at.x)/Qe,Z=(K-at.y)/Qe;let be=1/0,ge=null,U=null;const B=Math.max(6/Qe,4),D=[...bt,...st].find(P=>P.id===Rt.componentId)?.layer||"top";for(const P of Ze)if((P.type==="via"||P.type==="pad")&&P.points.length>0){if(P.type==="pad"&&(P.layer||"top")!==D)continue;const ae=P.points[0],re=Math.max(1,P.size/2),Te=Math.hypot(ae.x-F,ae.y-Z),Xe=Math.max(re,B);Te<=Xe&&Te<be&&(be=Te,ge=ae.id??null,U=P)}if(ge!=null&&U){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${ge}`),console.log(`  Connecting pin ${Rt.pinIndex+1} of component ${Rt.componentId}`);const P=String(ge),ae=Rt.pinIndex,re=Rt.componentId,Te=bt.find(Ee=>Ee.id===re),Xe=st.find(Ee=>Ee.id===re);Te?En(Ee=>{const Be=Ee.find(Oe=>Oe.id===re);if(!Be)return Ee;const ft=Be.pinConnections||[],Wt=ft.length>0?[...ft]:new Array(Be.pinCount).fill("");let Mt;if(Wt.length!==Be.pinCount){Mt=new Array(Be.pinCount).fill("");for(let Oe=0;Oe<Math.min(Wt.length,Be.pinCount);Oe++)Mt[Oe]=Wt[Oe]||""}else Mt=[...Wt];return Mt[ae]=P,console.log(`Updated pin ${ae} with value: ${P}`),console.log("New pinConnections:",Mt),Ee.map(Oe=>Oe.id===re?{...Oe,pinConnections:Mt}:Oe)}):Xe&&dn(Ee=>{const Be=Ee.find(Oe=>Oe.id===re);if(!Be)return Ee;const ft=Be.pinConnections||[],Wt=ft.length>0?[...ft]:new Array(Be.pinCount).fill("");let Mt;if(Wt.length!==Be.pinCount){Mt=new Array(Be.pinCount).fill("");for(let Oe=0;Oe<Math.min(Wt.length,Be.pinCount);Oe++)Mt[Oe]=Wt[Oe]||""}else Mt=[...Wt];return Mt[ae]=P,console.log(`Updated pin ${ae} with value: ${P}`),console.log("New pinConnections:",Mt),Ee.map(Oe=>Oe.id===re?{...Oe,pinConnections:Mt}:Oe)}),setTimeout(()=>{Pl(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Rt)return document.addEventListener("mousedown",o,!0),()=>document.removeEventListener("mousedown",o,!0)},[Rt,bt,st,Ze,Qe,at.x,at.y]),dt.useEffect(()=>{if(!_i)return;const o=f=>{ei&&ba({x:f.clientX-ei.x,y:f.clientY-ei.y})},c=()=>{Cs(!1),Bi(null)};return document.addEventListener("mousemove",o),document.addEventListener("mouseup",c),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",c)}},[_i,ei]),dt.useEffect(()=>{X&&X.visible&&wl===null?ba({x:window.innerWidth/2,y:window.innerHeight/2}):(!X||!X.visible)&&ba(null)},[X,wl]);const Ma=v.useCallback(o=>{switch(o){case"transparency":O(50);break;case"brushSize":Ge(3);break}},[]);dt.useEffect(()=>{if(me){kc.current=performance.now(),O(0);const o=c=>{const f=kc.current||c,p=1e3,g=(c-f)%p/p,y=1-Math.abs(1-2*g);O(Math.round(y*100)),aa.current=requestAnimationFrame(o)};aa.current=requestAnimationFrame(o)}return()=>{aa.current&&(cancelAnimationFrame(aa.current),aa.current=null)}},[me]),dt.useEffect(()=>{const o=k==="erase"?"erase":k==="magnify"?"magnify":k==="ground"?"ground":k==="power"?"power":k==="component"?"component":k==="draw"?Ae==="via"?"via":Ae==="pad"?"pad":"trace":"default";if(o==="default"){bs(void 0);return}const c=Math.max(1,Qe),f=o==="magnify"?18:Math.max(o==="component"?16:o==="power"||o==="ground"?12:6,Math.round(fe*c)),g=f+4*2+(o==="magnify"?8:0),y=document.createElement("canvas");y.width=g,y.height=g;const u=y.getContext("2d");if(!u){bs(void 0);return}const d=g/2,w=g/2,b=f/2;if(u.clearRect(0,0,g,g),o==="via"){const Q=b,Se=b*.5,ee=b*.7,F=qt.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";u.fillStyle=F,u.beginPath(),u.arc(d,w,Q,0,Math.PI*2),u.arc(d,w,Se,0,Math.PI*2),u.fill("evenodd"),u.strokeStyle="#808080",u.lineWidth=1,u.beginPath(),u.moveTo(d-ee,w),u.lineTo(d+ee,w),u.stroke(),u.beginPath(),u.moveTo(d,w-ee),u.lineTo(d,w+ee),u.stroke()}else if(o==="pad"){const Se=qt.get("pad")?.settings.color||J||q,ee=b*2,K=ee*.5,F=b*.7;u.fillStyle=Se,u.beginPath(),u.rect(d-b,w-b,ee,ee),u.rect(d-K/2,w-K/2,K,K),u.fill("evenodd"),u.strokeStyle="#808080",u.lineWidth=1,u.beginPath(),u.moveTo(d-F,w),u.lineTo(d+F,w),u.stroke(),u.beginPath(),u.moveTo(d,w-F),u.lineTo(d,w+F),u.stroke()}else if(o==="trace"){const Se=qt.get("trace")?.settings.color||(Vt==="top"?j:Ne)||q;u.fillStyle=Se,u.beginPath(),u.arc(d,w,b,0,Math.PI*2),u.fill()}else if(o==="erase"){const Q=Math.max(fe*.75,8),Se=Math.max(fe*.5,6),ee=Math.max(fe*.2,2);u.save(),u.translate(d,w),u.rotate(-35*Math.PI/180),u.fillStyle="#f5a3b3",u.strokeStyle="#111",u.lineWidth=1.5;const K=1.5,F=-Q/2,Z=-Se/2;u.beginPath(),u.moveTo(F+K,Z),u.lineTo(F+Q-K,Z),u.quadraticCurveTo(F+Q,Z,F+Q,Z+K),u.lineTo(F+Q,Z+Se-K),u.quadraticCurveTo(F+Q,Z+Se,F+Q-K,Z+Se),u.lineTo(F+K,Z+Se),u.quadraticCurveTo(F,Z+Se,F,Z+Se-K),u.lineTo(F,Z+K),u.quadraticCurveTo(F,Z,F+K,Z),u.closePath(),u.fill(),u.stroke(),u.fillStyle="#f18ea4",u.beginPath(),u.rect(-Q/2,Se/2-ee,Q,ee),u.fill(),u.restore()}else if(o==="magnify"){const Q=b;u.strokeStyle="#111",u.lineWidth=2,u.beginPath(),u.arc(d-2,w-2,Q,0,Math.PI*2),u.stroke();const Se=d+Q*.6,ee=w+Q*.6,K=Se+6,F=ee+6;u.beginPath(),u.moveTo(Se,ee),u.lineTo(K,F),u.stroke(),u.beginPath(),u.moveTo(d-6,w-2),u.lineTo(d+2,w-2),u.stroke(),ko||(u.beginPath(),u.moveTo(d-2,w-6),u.lineTo(d-2,w+2),u.stroke())}else if(o==="ground"){u.strokeStyle="#000000",u.lineWidth=2,u.lineCap="round";const Q=b*.8;u.beginPath(),u.arc(d,w,b,0,Math.PI*2),u.stroke(),u.beginPath(),u.moveTo(d,w-b-Q),u.lineTo(d,w+b+Q),u.stroke(),u.beginPath(),u.moveTo(d-b-Q,w),u.lineTo(d+b+Q,w),u.stroke()}else if(o==="power"){u.strokeStyle="#ff0000",u.lineWidth=2,u.lineCap="round";const Q=b*.8;u.beginPath(),u.arc(d,w,b,0,Math.PI*2),u.stroke(),u.beginPath(),u.moveTo(d,w-b-Q),u.lineTo(d,w+b+Q),u.stroke(),u.beginPath(),u.moveTo(d-b-Q,w),u.lineTo(d+b+Q,w),u.stroke()}else if(o==="component"){const Q=Cl||"top",Se=qt.get("component"),ee=(Q==="top"?De:je)||Se?.settings.color||q,K=f,F=K/2;u.strokeStyle=ee,u.lineWidth=2,u.fillStyle="rgba(255,255,255,0.9)",u.beginPath(),u.rect(d-F,w-F,K,K),u.fill(),u.stroke();const Z=al?ps(al):"?";u.fillStyle=ee,u.font=`bold ${Math.max(8,K*.35)}px sans-serif`,u.textAlign="center",u.textBaseline="middle",u.fillText(Z,d,w)}const te=`url(${y.toDataURL()}) ${Math.round(d)} ${Math.round(w)}, crosshair`;bs(te)},[k,Ae,q,fe,Qe,ko,al,Pa,Nt,qt,Vt,j,Ne,Cl,De,je]),dt.useEffect(()=>{hl()},[hl]),dt.useEffect(()=>{hl()},[Ta.width,Ta.height]),dt.useEffect(()=>{ht.size===0&&k==="draw"&&Ae==="trace"&&fe>=1&&(pt==="top"?gt(fe):H(fe))},[fe,k,Ae,pt,ht]),dt.useEffect(()=>{Yt(o=>o.map(c=>{if(c.type==="via"&&c.points.length>0&&c.points[0].id!==void 0){const f=c.points[0].id,p=Fa(f,Nt);if(c.viaType!==p)return{...c,viaType:p}}else if(c.type==="pad"&&c.points.length>0&&c.points[0].id!==void 0){const f=c.points[0].id,p=ca(f,Nt);if(c.padType!==p)return{...c,padType:p}}return c}))},[vt,ct,Nt,Fa,ca]);const fa=v.useCallback(()=>{const o=fn.current;if(!o)return;const c=o.toDataURL("image/png"),f=window.open("","_blank");if(!f){alert("Please allow popups to print the canvas.");return}f.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${c}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),f.document.close()},[]);dt.useEffect(()=>{const o=f=>{f.key==="Shift"&&Vi(!0)},c=f=>{f.key==="Shift"&&Vi(!1)};return window.addEventListener("keydown",o),window.addEventListener("keyup",c),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",c)}},[]),dt.useEffect(()=>{const o=c=>{Gi.current&&(Gi.current.contains(c.target)||zs(null))};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[]),dt.useEffect(()=>{const o=(c,f)=>{const p=c.current;if(!p)return;const g=p.getContext("2d");if(!g)return;const y=p.width,u=p.height;if(g.clearRect(0,0,y,u),g.fillStyle="#fff",g.fillRect(0,0,y,u),f?.bitmap){const d=f.bitmap,w=Math.min(y/d.width,u/d.height),b=Math.max(1,Math.floor(d.width*w)),te=Math.max(1,Math.floor(d.height*w)),Q=Math.floor((y-b)/2),Se=Math.floor((u-te)/2);g.drawImage(d,Q,Se,b,te)}g.strokeStyle="#ddd",g.lineWidth=1,g.strokeRect(.5,.5,y-1,u-1)};o(Bs,T),o(Os,_)},[T,_]),dt.useEffect(()=>{const o=[],c=[],f=[],p=[];for(const g of Ze)if(g.type==="via"&&g.points.length>=1){const y=g.points[0],u={id:g.id,pointId:y.id,x:y.x,y:y.y,size:g.size,color:g.color};o.push(u)}else if(g.type==="pad"&&g.points.length>=1){const y=g.points[0],u={id:g.id,pointId:y.id,x:y.x,y:y.y,size:g.size,color:g.color,layer:g.layer||"top"};c.push(u)}else if(g.type==="trace"&&g.points.length>=2)for(let y=0;y<g.points.length-1;y++){const u=g.points[y],d=g.points[y+1],w={id:g.id,startPointId:u.id,endPointId:d.id,x1:u.x,y1:u.y,x2:d.x,y2:d.y,size:g.size,color:g.color};g.layer==="top"?f.push(w):p.push(w)}bo(o),vo(c),Sc(f),Va(p)},[Ze]);const Mo=v.useRef(Ze);Mo.current=Ze;const Xl=v.useCallback(()=>{const c=new Date().toISOString(),f=$y();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:c,view:{currentView:de,viewScale:Qe,viewPan:at,showBothLayers:ys,selectedDrawingLayer:pt},images:{top:T?{name:T.name,width:T.width,height:T.height,dataUrl:T.dataUrl??T.url,x:T.x,y:T.y,scale:T.scale,rotation:T.rotation,flipX:T.flipX,flipY:T.flipY,skewX:T.skewX,skewY:T.skewY,keystoneV:T.keystoneV,keystoneH:T.keystoneH}:null,bottom:_?{name:_.name,width:_.width,height:_.height,dataUrl:_.dataUrl??_.url,x:_.x,y:_.y,scale:_.scale,rotation:_.rotation,flipX:_.flipX,flipY:_.flipY,skewX:_.skewX,skewY:_.skewY,keystoneV:_.keystoneV,keystoneH:_.keystoneH}:null},drawing:{drawingStrokes:Mo.current.filter(g=>!(g.type==="trace"&&g.points.length<2)),vias:Ya,tracesTop:un,tracesBottom:Ss,componentsTop:bt,componentsBottom:st,grounds:ct,powers:vt},powerBuses:Nt,pointIdCounter:Fp(),traceColors:{top:j,bottom:Ne},traceSizes:{top:it,bottom:Ye},padColors:{top:J,bottom:ne},padSizes:{top:x,bottom:ce},componentColors:{top:De,bottom:je},componentSizes:{top:lt,bottom:Jt},traceToolLayer:Vt,toolSettings:{trace:qt.get("trace")?.settings||{color:"#ff0000",size:10},via:qt.get("via")?.settings||{color:"#ff0000",size:26},pad:qt.get("pad")?.settings||{color:"#ff0000",size:26},component:qt.get("component")?.settings||{color:"#ff0000",size:18},ground:qt.get("ground")?.settings||{color:"#000000",size:18},power:qt.get("power")?.settings||{color:"#ff0000",size:18}},locks:{areImagesLocked:Tl,areViasLocked:Ft,arePadsLocked:Un,areTracesLocked:xn,areComponentsLocked:Me,areGroundNodesLocked:bn,arePowerNodesLocked:Ct},visibility:{showViasLayer:Mn,showTopPadsLayer:qa,showBottomPadsLayer:$a,showTopTracesLayer:kl,showBottomTracesLayer:Ln,showTopComponents:sa,showBottomComponents:ka,showPowerLayer:Aa,showGroundLayer:Hl},autoSave:{enabled:$n,interval:Xa,baseName:Sa},projectInfo:{name:kn}},timestamp:f}},[de,Qe,at,ys,pt,T,_,Ze,Ya,un,Ss,bt,st,ct,qt,Tl,Ft,Un,xn,Me,bn,Ct,Nt,Fp,j,Ne,it,Ye,J,ne,x,ce,De,je,lt,Jt,Vt,$n,Xa,Sa,kn,Mn,qa,$a,kl,Ln,sa,ka,Aa,Hl]),to=v.useRef(Xl);to.current=Xl;const da=v.useRef(ta);da.current=ta;const sl=v.useRef(Sa);sl.current=Sa;const Sn=v.useRef(tl);Sn.current=tl;const Si=v.useRef(Li);Si.current=Li;const Yn=v.useRef([]);Yn.current=Rs;const _o=v.useRef(-1);_o.current=Tc;const Is=v.useCallback(async()=>{console.log("Auto save: performAutoSave called");let o=da.current,c=sl.current;console.log(`Auto save: dirHandle=${o?"set":"missing"}, baseName=${c||"missing"}`);const f=Si.current;if(console.log(`Auto save: currentFilePath=${f||"none"}`),!o||!c){console.warn(`Auto save: Missing directory handle (${!o}) or base name (${!c}). Please use File -> Auto Save -> Enable to set up auto save.`),ea(!1),Xt.current&&(clearInterval(Xt.current),Xt.current=null);return}if(!El.current){console.log("Auto save: Skipping - no changes since last save");return}const p=Mo.current,g=p.filter(te=>te.type==="trace"&&te.points.length<2);if(g.length>0){console.log(`Auto save: Cleaning up ${g.length} single-point trace(s) before save`),g.forEach(Q=>console.log(`  - Removing single-point trace ${Q.id}`));const te=p.filter(Q=>!(Q.type==="trace"&&Q.points.length<2));Yt(te),Mo.current=te}console.log("Auto save: Starting save...");const{project:y,timestamp:u}=to.current(),d=`${c}_${u}.json`,w=JSON.stringify(y,null,2),b=new Blob([w],{type:"application/json"});try{let te;try{te=await o.getDirectoryHandle("history",{create:!0})}catch(F){console.error("Failed to get/create history directory:",F);return}try{const F=[];for await(const Z of o.keys())try{if(Z==="history"||Z===d)continue;const ge=await(await o.getFileHandle(Z)).getFile();if(!Z.endsWith(".json"))continue;const U=await ge.text();try{const B=JSON.parse(U);B.version&&(B.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!B.fileType)&&(F.push(Z),console.log(`Auto save: Found PCB project file in root: ${Z} (${B.fileType?"auto-saved":"manually saved"})`))}catch{continue}}catch{continue}for(const Z of F)try{const U=await(await(await o.getFileHandle(Z)).getFile()).text(),se=await(await te.getFileHandle(Z,{create:!0})).createWritable();await se.write(new Blob([U],{type:"application/json"})),await se.close(),await o.removeEntry(Z),console.log(`Auto save: Moved ${Z} from root to history/`)}catch(be){console.warn(`Auto save: Failed to move ${Z} to history:`,be)}}catch(F){console.warn("Auto save: Error checking for old files in root:",F)}const Se=await(await o.getFileHandle(d,{create:!0})).createWritable();await Se.write(b),await Se.close(),console.log(`Auto save: Successfully saved ${d} to root directory`),Sn.current(d);const ee=Yn.current,K=[d,...ee.filter(F=>F!==d)].sort((F,Z)=>Z.localeCompare(F));na(K),Yn.current=K,Ms(0),_o.current=0,El.current=!1}catch(te){console.error("Auto save failed:",te)}},[]),qs=v.useCallback(async()=>{const{project:o}=Xl(),c=JSON.stringify(o,null,2),f=new Blob([c],{type:"application/json"});if(ci&&kn)try{const b="project.json",Q=await(await ci.getFileHandle(b,{create:!0})).createWritable();await Q.write(f),await Q.close(),tl(b),console.log(`Project saved: ${kn}/${b}`);return}catch(b){console.error("Failed to save to project directory:",b),ri(null)}if(kn&&!ci){const b=window;if(typeof b.showDirectoryPicker=="function")try{const te=await b.showDirectoryPicker();ri(te);const Q=`${kn}.json`,ee=await(await te.getFileHandle(Q,{create:!0})).createWritable();await ee.write(f),await ee.close(),tl(Q),console.log(`Project saved: ${Q} in selected directory`);return}catch(te){te?.name!=="AbortError"&&console.error("Failed to get directory:",te)}}const p=b=>String(b).padStart(2,"0"),g=new Date,u=`pcb_project_${`${g.getFullYear()}_${p(g.getMonth()+1)}_${p(g.getDate())}_${p(g.getHours())}_${p(g.getMinutes())}_${p(g.getSeconds())}`}.json`,d=window;if(typeof d.showSaveFilePicker=="function")try{const b=await d.showSaveFilePicker({suggestedName:u,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),te=await b.createWritable();await te.write(f),await te.close();const Q=b.name;try{const K=await b.getFile();tl(K.name)}catch{tl(Q)}const ee=Q.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");ee&&(jl(ee),localStorage.setItem("pcb_project_name",ee));try{const K=b.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");zo(K),ta||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(K){console.warn("Could not set up auto save for new file:",K)}return}catch(b){if(b?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",b)}const w=document.createElement("a");w.href=URL.createObjectURL(f),w.download=u,document.body.appendChild(w),w.click(),setTimeout(()=>{URL.revokeObjectURL(w.href),document.body.removeChild(w)},0)},[Xl]),sn=v.useCallback(async()=>{const o=[...bt,...st],c=qy(o,Ze,vt,ct,Nt),f=new Blob([c],{type:"text/plain"}),g=`${kn||"pcb_project"}.kicad_sch`,y=window;if(typeof y.showSaveFilePicker=="function")try{const d=await y.showSaveFilePicker({suggestedName:g,types:[{description:"KiCad Schematic",accept:{"text/plain":["kicad_sch"]}}]}),w=await d.createWritable();await w.write(f),await w.close(),console.log(`Simple schematic exported: ${d.name}`);return}catch(d){if(d?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",d)}const u=document.createElement("a");u.href=URL.createObjectURL(f),u.download=g,document.body.appendChild(u),u.click(),setTimeout(()=>{URL.revokeObjectURL(u.href),document.body.removeChild(u)},0)},[bt,st,Ze,vt,ct,Nt,kn]);dt.useEffect(()=>{Xt.current&&(clearInterval(Xt.current),Xt.current=null);const o=Hi.current;if(Hi.current=$n,$n&&Xa){const c=Xa*60*1e3;ta&&Sa?(console.log(`Auto save: Setting up interval for ${Xa} minute(s) (${c}ms)`),o||(El.current=!0,setTimeout(()=>{Is()},100)),Xt.current&&(clearInterval(Xt.current),Xt.current=null),Xt.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${El.current}`),console.log(`  - dirHandle: ${da.current?"set":"missing"}`),console.log(`  - baseName: ${sl.current||"missing"}`),Is()},c),console.log(`Auto save: Interval set up for ${c}ms (${Xa} minutes)`),console.log(`  - Directory handle: ${ta?"set":"missing"}`),console.log(`  - Base name: ${Sa||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!ta}) or base name (${!Sa}). Disabling auto save.`),ea(!1),Xt.current&&(clearInterval(Xt.current),Xt.current=null))}else $n||(Hi.current=!1);return()=>{Xt.current&&(clearInterval(Xt.current),Xt.current=null)}},[$n,Xa,ta,Sa]);const no=v.useRef(!1);dt.useEffect(()=>{if(!$n){no.current=!1;return}if(no.current){no.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}El.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!T,bottomImage:!!_,drawingStrokesCount:Ze.length,componentsTopCount:bt.length,componentsBottomCount:st.length,powersCount:vt.length,groundsCount:ct.length,powerBusesCount:Nt.length,areImagesLocked:Tl,areViasLocked:Ft,areTracesLocked:xn,areComponentsLocked:Me,areGroundNodesLocked:bn,arePowerNodesLocked:Ct})},[T,_,Ze,bt,st,vt,ct,Nt,j,Ne,it,Ye,Tl,Ft,xn,Me,bn,Ct,$n]),dt.useEffect(()=>{$n?(no.current=!0,console.log("Auto save: Enabled, marking first run")):no.current=!1},[$n]),dt.useEffect(()=>{$n||(El.current=!1)},[$n]);const Ci=v.useCallback(()=>!!(T||_||Ze.length>0||bt.length>0||st.length>0||vt.length>0||ct.length>0),[T,_,Ze,bt,st,vt,ct]);dt.useEffect(()=>{const o=localStorage.getItem("pcb_project_name");o&&jl(o)},[]);const pa=v.useCallback(()=>{ii({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),$s=v.useCallback(async()=>{const o=window;if(typeof o.showDirectoryPicker=="function")try{const c=await o.showDirectoryPicker();ii(f=>({...f,locationHandle:c,locationPath:c.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",c.name||"")}catch(c){c?.name!=="AbortError"&&(console.error("Failed to get directory:",c),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),lo=v.useCallback(async()=>{const o=Kt.projectName.trim();if(!o){alert("Please enter a project name.");return}const c=o.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!Kt.locationHandle){alert("Please select a location for the project.");return}const f=Kt.locationHandle;let p;try{p=await f.getDirectoryHandle(c,{create:!0})}catch(g){console.error("Failed to create project folder:",g),alert(`Failed to create project folder "${c}". See console for details.`);return}ii({visible:!1,projectName:"",locationPath:"",locationHandle:null}),jl(c),ri(p),localStorage.setItem("pcb_project_name",c),localStorage.setItem("pcb_project_location_path",f.name||""),S(null),I(null),Yt([]),En([]),dn([]),el([]),On([]),fl(new Set),ln(new Set),In(new Set),qn(new Set),ze("overlay"),Ol(1),Wn({x:0,y:0}),El.current=!1,tl(""),ea(!1),Ga(null),Ns(null),zo(""),Xt.current&&(clearInterval(Xt.current),Xt.current=null),Al();try{const{project:g}=Xl(),y="project.json",u=JSON.stringify(g,null,2),d=new Blob([u],{type:"application/json"}),b=await(await p.getFileHandle(y,{create:!0})).createWritable();await b.write(d),await b.close(),tl(y),console.log(`New project created: ${c}/project.json`),To({visible:!0,source:"new"})}catch(g){console.error("Failed to save new project:",g),alert("Failed to save new project file. See console for details.")}},[Al,Xl,Kt]),_a=v.useCallback(()=>{ii({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Ar=v.useCallback(()=>{const o=kn?`${kn}.json`:"";si({visible:!0,filename:o,locationPath:"",locationHandle:null}),setTimeout(()=>{if(za.current?.focus(),za.current&&o){const c=o.replace(/\.json$/i,"");za.current.setSelectionRange(0,c.length)}},100)},[kn]),Rc=v.useCallback(async()=>{const o=window;if(typeof o.showDirectoryPicker=="function")try{const c=await o.showDirectoryPicker();si(f=>({...f,locationHandle:c,locationPath:c.name||"Selected folder"}))}catch(c){c?.name!=="AbortError"&&(console.error("Failed to get directory:",c),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Mc=v.useCallback(async()=>{const o=$t.filename.trim();if(!o){alert("Please enter a file name.");return}const f=(o.endsWith(".json")?o:`${o}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!$t.locationHandle){alert("Please select a location for the file.");return}const p=$t.locationHandle;try{const{project:g}=Xl(),y=JSON.stringify(g,null,2),u=new Blob([y],{type:"application/json"}),w=await(await p.getFileHandle(f,{create:!0})).createWritable();await w.write(u),await w.close(),tl(f);const b=f.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");b&&(jl(b),localStorage.setItem("pcb_project_name",b)),ri(p),si({visible:!1,filename:"",locationPath:"",locationHandle:null}),zs(null),console.log(`Project saved as: ${f} in selected directory`)}catch(g){console.error("Failed to save project:",g),alert(`Failed to save project file "${f}". See console for details.`)}},[$t,Xl]),Wi=v.useCallback(()=>{si({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),ha=v.useCallback(async()=>{oi({visible:!1}),await qs(),pa(),Hn()},[qs,pa,Hn]),Zs=v.useCallback(()=>{oi({visible:!1}),pa(),Hn()},[pa,Hn]),wi=v.useCallback(()=>{oi({visible:!1})},[]);dt.useEffect(()=>{if(As.visible){setTimeout(()=>{Ac.current?.focus()},0);const o=c=>{c.key==="Enter"?(c.preventDefault(),ha()):c.key==="Escape"&&(c.preventDefault(),oi({visible:!1}))};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}}},[As.visible,ha]);const Bo=v.useCallback(async o=>{try{if(o.projectInfo)o.projectInfo.name&&(jl(o.projectInfo.name),localStorage.setItem("pcb_project_name",o.projectInfo.name));else{const y=localStorage.getItem("pcb_project_name");y&&jl(y)}if(o.view&&(o.view.currentView&&ze(o.view.currentView),o.view.viewScale!=null&&Ol(o.view.viewScale),o.view.viewPan&&Wn(o.view.viewPan),o.view.showBothLayers!=null&&gs(o.view.showBothLayers),o.view.selectedDrawingLayer&&jn(o.view.selectedDrawingLayer)),o.traceColors&&(o.traceColors.top&&(et(o.traceColors.top),mt("trace",o.traceColors.top,"top")),o.traceColors.bottom&&(nt(o.traceColors.bottom),mt("trace",o.traceColors.bottom,"bottom"))),o.traceSizes){const y=o.traceSizes.top!=null&&o.traceSizes.top>0?o.traceSizes.top:6;let u=o.traceSizes.bottom!=null&&o.traceSizes.bottom>0?o.traceSizes.bottom:6;u<6&&(u=6),gt(y),H(u),qe("trace",y,"top"),qe("trace",u,"bottom")}else gt(6),H(6);if(o.padColors&&(o.padColors.top&&(N(o.padColors.top),mt("pad",o.padColors.top,"top")),o.padColors.bottom&&(we(o.padColors.bottom),mt("pad",o.padColors.bottom,"bottom"))),o.padSizes){const y=o.padSizes.top!=null&&o.padSizes.top>0?o.padSizes.top:26,u=o.padSizes.bottom!=null&&o.padSizes.bottom>0?o.padSizes.bottom:26;R(y),Ce(u),qe("pad",y,"top"),qe("pad",u,"bottom")}if(o.componentColors&&(o.componentColors.top&&(Ve(o.componentColors.top),mt("component",o.componentColors.top,"top")),o.componentColors.bottom&&(Ke(o.componentColors.bottom),mt("component",o.componentColors.bottom,"bottom"))),o.componentSizes){const y=o.componentSizes.top!=null&&o.componentSizes.top>0?o.componentSizes.top:18,u=o.componentSizes.bottom!=null&&o.componentSizes.bottom>0?o.componentSizes.bottom:18;hn(y),Sl(u),qe("component",y,"top"),qe("component",u,"bottom")}if(o.traceToolLayer&&(Ai(o.traceToolLayer),k==="draw"&&Ae==="trace")){const y=o.traceToolLayer;$(y==="top"?o.traceColors?.top||j:o.traceColors?.bottom||Ne);const u=o.traceSizes?.top!=null&&o.traceSizes.top>0?o.traceSizes.top:6;let d=o.traceSizes?.bottom!=null&&o.traceSizes.bottom>0?o.traceSizes.bottom:6;d<6&&(d=6),Ge(y==="top"?u:d)}o.toolSettings&&Bn(y=>{const u=new Map(y);if(o.toolSettings.trace){const w=u.get("trace");w&&u.set("trace",{...w,settings:o.toolSettings.trace})}if(o.toolSettings.via){const w=u.get("via");w&&u.set("via",{...w,settings:o.toolSettings.via})}if(o.toolSettings.pad){const w=u.get("pad");w&&u.set("pad",{...w,settings:o.toolSettings.pad})}if(o.toolSettings.component){const w=u.get("component");w&&u.set("component",{...w,settings:o.toolSettings.component})}if(o.toolSettings.ground){const w=u.get("ground");w&&u.set("ground",{...w,settings:o.toolSettings.ground})}if(o.toolSettings.power){const w=u.get("power");w&&u.set("power",{...w,settings:o.toolSettings.power})}const d=k==="draw"&&Ae==="trace"?u.get("trace"):k==="draw"&&Ae==="via"?u.get("via"):k==="draw"&&Ae==="pad"?u.get("pad"):k==="component"?u.get("component"):k==="power"?u.get("power"):k==="ground"?u.get("ground"):null;return d&&($(d.settings.color),Ge(d.settings.size)),u});const c=async y=>{if(!y)return null;let u=null;if(y.dataUrl){const d=await(await fetch(y.dataUrl)).blob();u=await createImageBitmap(d)}return{url:y.dataUrl??"",name:y.name??"image",width:y.width??(u?u.width:0),height:y.height??(u?u.height:0),dataUrl:y.dataUrl,x:y.x??0,y:y.y??0,scale:y.scale??1,rotation:y.rotation??0,flipX:!!y.flipX,flipY:!!y.flipY,skewX:y.skewX??0,skewY:y.skewY??0,keystoneV:y.keystoneV??0,keystoneH:y.keystoneH??0,bitmap:u}},f=await c(o.images?.top),p=await c(o.images?.bottom);if(S(f),I(p),o.pointIdCounter&&typeof o.pointIdCounter=="number"&&Qp(o.pointIdCounter),o.locks&&(typeof o.locks.areImagesLocked=="boolean"?va(o.locks.areImagesLocked):typeof o.locks.isImagesLocked=="boolean"&&va(o.locks.isImagesLocked),typeof o.locks.areViasLocked=="boolean"&&ti(o.locks.areViasLocked),typeof o.locks.arePadsLocked=="boolean"&&Fl(o.locks.arePadsLocked),typeof o.locks.areTracesLocked=="boolean"&&Co(o.locks.areTracesLocked),typeof o.locks.areComponentsLocked=="boolean"&&wo(o.locks.areComponentsLocked),typeof o.locks.areGroundNodesLocked=="boolean"?ni(o.locks.areGroundNodesLocked):typeof o.locks.isGroundLocked=="boolean"&&ni(o.locks.isGroundLocked),typeof o.locks.arePowerNodesLocked=="boolean"&&Kl(o.locks.arePowerNodesLocked)),o.visibility&&(typeof o.visibility.showViasLayer=="boolean"&&Ii(o.visibility.showViasLayer),typeof o.visibility.showTopPadsLayer=="boolean"&&Ea(o.visibility.showTopPadsLayer),typeof o.visibility.showBottomPadsLayer=="boolean"&&Ls(o.visibility.showBottomPadsLayer),typeof o.visibility.showTopTracesLayer=="boolean"&&ja(o.visibility.showTopTracesLayer),typeof o.visibility.showBottomTracesLayer=="boolean"&&qi(o.visibility.showBottomTracesLayer),typeof o.visibility.showTopComponents=="boolean"&&Hs(o.visibility.showTopComponents),typeof o.visibility.showBottomComponents=="boolean"&&Ys(o.visibility.showBottomComponents),typeof o.visibility.showPowerLayer=="boolean"&&Vs(o.visibility.showPowerLayer),typeof o.visibility.showGroundLayer=="boolean"&&Da(o.visibility.showGroundLayer)),o.autoSave?(typeof o.autoSave.enabled=="boolean"&&ea(o.autoSave.enabled),typeof o.autoSave.interval=="number"&&Ga(o.autoSave.interval),typeof o.autoSave.baseName=="string"&&o.autoSave.baseName?(zo(o.autoSave.baseName),sl.current=o.autoSave.baseName,o.autoSave.enabled&&!ta&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),ea(!1),Ga(null))):o.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),ea(!1),Ga(null),zo(""),sl.current="")):(ea(!1),Ga(null),Ns(null),zo(""),da.current=null,sl.current="",Xt.current&&(clearInterval(Xt.current),Xt.current=null)),o.drawing?.drawingStrokes&&Array.isArray(o.drawing.drawingStrokes)){const y=o.drawing.drawingStrokes.map(u=>({...u,points:u.points.map(d=>({...d,...tn(d)}))})).filter(u=>!(u.type==="trace"&&u.points.length<2));Yt(y)}else{const y=[],u=(b,te)=>{const Q=tn({x:b.x,y:b.y});y.push({id:b.id||`${Date.now()}-via-${Math.random()}`,points:[{id:b.pointId||_l(),x:Q.x,y:Q.y}],color:b.color,size:b.size,layer:te,type:"via"})},d=(b,te)=>{const Q=tn({x:b.x1,y:b.y1}),Se=tn({x:b.x2,y:b.y2});y.push({id:b.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:b.startPointId||_l(),x:Q.x,y:Q.y},{id:b.endPointId||_l(),x:Se.x,y:Se.y}],color:b.color,size:b.size,layer:te,type:"trace"})};o.drawing?.vias?o.drawing.vias.forEach(b=>u(b,"top")):((o.drawing?.viasTop??[]).forEach(b=>u(b,"top")),(o.drawing?.viasBottom??[]).forEach(b=>u(b,"bottom"))),(o.drawing?.tracesTop??[]).forEach(b=>d(b,"top")),(o.drawing?.tracesBottom??[]).forEach(b=>d(b,"bottom"));const w=y.filter(b=>!(b.type==="trace"&&b.points.length<2));Yt(w)}if(o.drawing?.componentsTop){const y=o.drawing.componentsTop.map(u=>{const d=tn({x:u.x,y:u.y});return{...u,x:d.x,y:d.y,layer:u.layer||"top",pinConnections:u.pinConnections||new Array(u.pinCount||0).fill("")}});En(y)}if(o.drawing?.componentsBottom){const y=o.drawing.componentsBottom.map(u=>{const d=tn({x:u.x,y:u.y});return{...u,x:d.x,y:d.y,layer:u.layer||"bottom",pinConnections:u.pinConnections||new Array(u.pinCount||0).fill("")}});dn(y)}if(o.drawing?.grounds){const u=o.drawing.grounds.map(d=>{const w=d.pointId||_l(),b=tn({x:d.x,y:d.y});return{...d,pointId:w,x:b.x,y:b.y}}).filter(d=>{const w=d.y>=0&&d.x>=0&&typeof d.x=="number"&&typeof d.y=="number"&&!isNaN(d.x)&&!isNaN(d.y)&&isFinite(d.x)&&isFinite(d.y);return w||console.warn(`Filtered out invalid ground symbol at (${d.x}, ${d.y}) - likely in border area or invalid coordinates`),w});On(u)}let g=Nt;if(o.powerBuses&&Array.isArray(o.powerBuses)&&(g=o.powerBuses,dl(g)),o.drawing?.powers){const u=o.drawing.powers.map(d=>{const w=d.pointId||_l(),b=tn({x:d.x,y:d.y});return d.powerBusId?{...d,pointId:w,x:b.x,y:b.y,layer:d.layer||"top"}:{...d,pointId:w,x:b.x,y:b.y,powerBusId:g.length>0?g[0].id:"default-5v",layer:d.layer||"top"}}).filter(d=>{const w=d.y>=0&&d.x>=0&&typeof d.x=="number"&&typeof d.y=="number"&&!isNaN(d.x)&&!isNaN(d.y)&&isFinite(d.x)&&isFinite(d.y);return w||console.warn(`Filtered out invalid power node at (${d.x}, ${d.y}) - likely in border area or invalid coordinates`),w});el(u)}El.current=!1}catch(c){console.error("Failed to open project",c),alert("Failed to open project file. See console for details.")}},[k,Ae]),Dl=v.useCallback(async()=>{},[Li]),Oo=v.useCallback(async o=>{const c=da.current;if(!c){console.warn("Cannot load file: no directory handle");return}try{const p=await(await c.getFileHandle(o)).getFile();if(p.size===0){console.warn(`File ${o} is empty, skipping`);const b=Yn.current.filter(te=>te!==o);na(b),Yn.current=b;return}const g=await p.text();if(!g||g.trim().length===0){console.warn(`File ${o} contains no data, skipping`);const b=Yn.current.filter(te=>te!==o);na(b),Yn.current=b;return}let y;try{y=JSON.parse(g)}catch(w){console.error(`Failed to parse JSON from file ${o}:`,w);const te=Yn.current.filter(Q=>Q!==o);na(te),Yn.current=te,await Dl();return}Al(),Ol(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),fl(new Set),ln(new Set),In(new Set),qn(new Set),Hn(),await Bo(y),tl(o);const d=Yn.current.indexOf(o);d>=0?(Ms(d),_o.current=d):await Dl(),El.current=!1}catch(f){console.error("Failed to load file from history:",f);const p=Yn.current;if(p.includes(o)){const g=p.filter(y=>y!==o);na(g),Yn.current=g,await Dl()}}},[Bo,Dl,Hn]);v.useCallback(async()=>{const o=_o.current,c=Yn.current;if(o>=0&&o<c.length-1){const f=o+1,p=c[f];p&&await Oo(p)}},[Oo]),v.useCallback(async()=>{const o=_o.current,c=Yn.current;if(o<=0||o>=c.length||c.length===0){console.warn("Cannot navigate to newer file: index is",o,"history length is",c.length);return}if(o>0&&o<c.length&&c.length>0){const f=o-1;if(f>=0&&f<c.length){const p=c[f];p?await Oo(p):(console.warn("No newer file found at index",f),await Dl())}else console.warn("Cannot navigate to newer file: prevIndex",f,"is out of bounds")}},[Oo,Dl]),dt.useEffect(()=>{Bl.current=Dt},[Dt]);const Uo=dt.useRef(Ae),Lo=dt.useRef(pt);dt.useEffect(()=>{const o=Ae!==Uo.current;if(k==="draw"&&Uo.current==="trace"&&o){if(Bl.current.length>=2){const c={id:`${Date.now()}-trace-autofinalize`,points:Bl.current,color:q,size:fe,layer:Lo.current,type:"trace"};Yt(f=>[...f,c]),Lo.current==="top"?Ul(f=>[...f,c.id]):xa(f=>[...f,c.id])}yn([]),ma(!1)}Uo.current=Ae,Lo.current=pt},[Ae,pt,k,q,fe]);const _c=dt.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);dt.useEffect(()=>{hl()},[Ze]),dt.useEffect(()=>{hl()},[bt,st,ct,Hl]),dt.useEffect(()=>{const o=Yi.current,c=Ca.current;if(oa.current=!0,o){const f=Math.max(0,o.scrollWidth-o.clientWidth),p=fi.current,g=Math.max(0,Math.min(f,-(at.x+p)));Math.abs(o.scrollLeft-g)>.5&&(o.scrollLeft=g)}if(c){const f=Math.max(0,c.scrollHeight-c.clientHeight),p=di.current,g=Math.max(0,Math.min(f,-(at.y+p)));Math.abs(c.scrollTop-g)>.5&&(c.scrollTop=g)}requestAnimationFrame(()=>{oa.current=!1})},[at.x,at.y]);const $e=Tc>0,ao=v.useCallback(async()=>{const o=window;if(typeof o.showOpenFilePicker=="function")try{const[c]=await o.showOpenFilePicker({multiple:!1}),f=await c.getFile();if(!f.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}tl(f.name);const p=await f.text(),g=JSON.parse(p);await Bo(g);let y;g.projectInfo?.name?y=g.projectInfo.name:(y=f.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",jl(y),localStorage.setItem("pcb_project_name",y)),kn||(jl(y),localStorage.setItem("pcb_project_name",y)),setTimeout(()=>{g.autoSave?.enabled===!0||To({visible:!0,source:"open"})},100)}catch(c){if(c?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",c),ui.current?.click()}else ui.current?.click()},[Bo,kn,tl,jl,To]);return s.jsxs("div",{className:"app",children:[s.jsx("header",{className:"app-header",children:s.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.0)"})}),s.jsx(Zy,{openMenu:li,setOpenMenu:zs,isReadOnlyMode:$e,currentProjectFilePath:Li,onNewProject:pa,onOpenProject:ao,onSaveProject:qs,onSaveAs:Ar,onExportSchematic:sn,onPrint:fa,hasUnsavedChanges:Ci,setNewProjectDialog:oi,setAutoSaveDialog:zl,topImage:T,bottomImage:_,selectedImageForTransform:At,setSelectedImageForTransform:mo,setCurrentTool:L,transformMode:Ha,setTransformMode:Tr,updateImageTransform:xi,resetImageTransform:Ra,isGrayscale:ke,setIsGrayscale:xe,isBlackAndWhiteEdges:ye,setIsBlackAndWhiteEdges:ve,isBlackAndWhiteInverted:le,setIsBlackAndWhiteInverted:m,areImagesLocked:Tl,setAreImagesLocked:va,fileInputTopRef:Ec,fileInputBottomRef:_s,openProjectRef:ui,increaseSize:Qi,decreaseSize:Fi,brushSize:fe,drawingStrokes:Ze,selectedIds:ht,selectedComponentIds:ut,selectedPowerIds:ot,selectedGroundIds:kt,componentsTop:bt,componentsBottom:st,powers:vt,grounds:ct,setSetSizeDialog:Ll,areViasLocked:Ft,setAreViasLocked:ti,arePadsLocked:Un,setArePadsLocked:Fl,areTracesLocked:xn,setAreTracesLocked:Co,areComponentsLocked:Me,setAreComponentsLocked:wo,areGroundNodesLocked:bn,setAreGroundNodesLocked:ni,arePowerNodesLocked:Ct,setArePowerNodesLocked:Kl,setSelectedIds:fl,setSelectedComponentIds:ln,setSelectedPowerIds:In,setSelectedGroundIds:qn,setShowPowerBusManager:Zn,menuBarRef:Gi}),s.jsxs("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:[s.jsxs("div",{ref:la,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[s.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:44,display:"flex",flexDirection:"column",gap:8,padding:"6px 6px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[s.jsx("button",{onClick:()=>{$e||L("select")},onMouseDown:o=>o.currentTarget.blur(),disabled:$e,title:"Select (S)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="select"?"2px solid #000":"1px solid #ddd",background:k==="select"?"#e6f0ff":"#fff",color:$e?"#999":"#222",outline:"none",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsx(_y,{size:16})}),s.jsx("button",{onClick:()=>{$e||(La("via"),L("draw"))},disabled:$e,title:"Draw Vias (V)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="draw"&&Ae==="via"?"2px solid #000":"1px solid #ddd",background:k==="draw"&&Ae==="via"?"#e6f0ff":"#fff",color:$e?"#999":"#222",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const c=qt.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";return s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:c,strokeWidth:"3"}),s.jsx("circle",{cx:"12",cy:"12",r:"4",fill:c})]})})()})}),s.jsx("button",{onClick:()=>{$e||(La("pad"),L("draw"),jn(Jn||"top"),ll(!0))},disabled:$e,title:"Draw Pads (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="draw"&&Ae==="pad"?"2px solid #000":"1px solid #ddd",background:k==="draw"&&Ae==="pad"?"#e6f0ff":"#fff",color:$e?"#999":"#222",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const o=qt.get("pad"),c=o?.settings.size||x||26,f=o?.settings.color||J||q,p=Math.min(14,Math.max(4,c/26*14)),g=(24-p)/2,y=(24-p)/2;return s.jsx("rect",{x:g,y,width:p,height:p,fill:f})})()})}),s.jsx("button",{onClick:()=>{$e||(La("trace"),L("draw"),jn(Vt||"top"),No(!0))},disabled:$e,title:"Draw Traces (T)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="draw"&&Ae==="trace"?"2px solid #000":"1px solid #ddd",background:k==="draw"&&Ae==="trace"?"#e6f0ff":"#fff",color:$e?"#999":"#222",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsx(Oy,{size:16,color:qt.get("trace")?.settings.color||(Vt==="top"?j:Ne)||th})}),s.jsx("button",{onClick:()=>{$e||(L("component"),Wa(!0),Qn(!1),Pi(null))},disabled:$e,title:"Draw Component (C)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="component"?"2px solid #000":"1px solid #ddd",background:k==="component"?"#e6f0ff":"#fff",color:$e?"#999":"#222",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:(()=>{const o=Cl||"top",c=qt.get("component"),f=(o==="top"?De:je)||c?.settings.color||nh;return al?s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[s.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:f,strokeWidth:"1.5"}),s.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:f,fontWeight:"bold",fontFamily:"monospace",children:ps(al)})]}):s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[s.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:f,stroke:f,strokeWidth:"0.5"}),s.jsxs("g",{stroke:f,fill:"none",strokeWidth:"1.5",children:[s.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),s.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:f})]})]})})()}),s.jsx("button",{onClick:()=>{$e||L("power")},disabled:$e,title:"Draw Power (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="power"?"2px solid #000":"1px solid #ddd",background:k==="power"?"#e6f0ff":"#fff",color:$e?"#999":"#222",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsx("span",{style:{color:qt.get("power")?.settings.color||Cr,fontSize:"18px",fontWeight:"bold",lineHeight:1},children:"V"})}),s.jsx("button",{onClick:()=>{$e||L("ground")},disabled:$e,title:"Draw Ground (G)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="ground"?"2px solid #000":"1px solid #ddd",background:k==="ground"?"#e6f0ff":"#fff",color:$e?"#999":"#222",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible"},children:s.jsxs("g",{stroke:qt.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[s.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),s.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),s.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),s.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})})}),s.jsx("button",{onClick:()=>{$e||L("erase")},disabled:$e,title:"Erase (E)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="erase"?"2px solid #000":"1px solid #ddd",background:k==="erase"?"#ffecec":"#fff",color:$e?"#999":"#222",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsxs("g",{transform:"rotate(-35 12 12)",children:[s.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),s.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})})}),s.jsx("button",{onClick:()=>{$e||L(o=>o==="pan"?"draw":"pan")},disabled:$e,title:"Move (H)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="pan"?"2px solid #000":"1px solid #ddd",background:k==="pan"?"#e6f0ff":"#fff",color:$e?"#999":"#222",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),s.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),s.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})})}),s.jsx("button",{onClick:()=>{Vi(!1),L(o=>o==="magnify"?"draw":"magnify")},title:`${ko?"Zoom Out":"Zoom In"} (Z)`,style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:k==="magnify"?"2px solid #000":"1px solid #ddd",background:k==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[s.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),s.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),ko?s.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),s.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]})}),s.jsxs("div",{style:{position:"relative"},children:[s.jsx("button",{onClick:()=>{$e||Ui(o=>!o)},disabled:$e,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:$e?"not-allowed":"pointer",opacity:$e?.5:1},children:s.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",children:[s.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),s.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Ds&&s.jsx("div",{ref:Us,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:_c.map(o=>s.jsx("div",{onClick:()=>{$(o),Ui(!1),rl(qt),mt("brush",o),k==="draw"&&Ae==="trace"?pt==="top"?(et(o),mt("trace",o,"top")):(nt(o),mt("trace",o,"bottom")):k==="draw"&&Ae==="via"?mt("via",o):k==="draw"&&Ae==="pad"?mt("pad",o):k==="component"&&mt("component",o),ht.size>0&&Yt(c=>c.map(f=>ht.has(f.id)?(f.type==="via"?(mt("via",o),Bn(p=>{const g=new Map(p),y=g.get("via");return y&&g.set("via",{...y,settings:{...y.settings,color:o}}),g})):f.type==="pad"?(mt("pad",o),Bn(p=>{const g=new Map(p),y=g.get("pad");return y&&g.set("pad",{...y,settings:{...y.settings,color:o}}),g})):f.type==="trace"&&mt("trace",o,f.layer),{...f,color:o}):f)),ut.size>0&&(mt("component",o),En(c=>c.map(f=>ut.has(f.id)?{...f,color:o}:f)),dn(c=>c.map(f=>ut.has(f.id)?{...f,color:o}:f))),ot.size>0&&el(c=>c.map(f=>ot.has(f.id)?{...f,color:o}:f)),kt.size>0&&On(c=>c.map(f=>kt.has(f.id)?{...f,color:o}:f))},title:o,style:{width:22,height:22,backgroundColor:o,border:o===q?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},o))})})]})]}),k==="draw"&&Ae==="trace"&&Na&&s.jsxs("div",{ref:Pn,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[s.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[s.jsx("input",{type:"radio",name:"traceToolLayer",checked:Vt==="top",onChange:()=>{Ai("top"),jn("top"),$(j),Ge(it),Bn(o=>{const c=new Map(o),f=c.get("trace");return f&&c.set("trace",{...f,settings:{color:j,size:it}}),c}),No(!1),hi(!0)}}),s.jsx("span",{children:"Top"})]}),s.jsxs("label",{className:"radio-label",children:[s.jsx("input",{type:"radio",name:"traceToolLayer",checked:Vt==="bottom",onChange:()=>{Ai("bottom"),jn("bottom"),$(Ne),Ge(Ye),Bn(o=>{const c=new Map(o),f=c.get("trace");return f&&c.set("trace",{...f,settings:{color:Ne,size:Ye}}),c}),No(!1),Ia(!0)}}),s.jsx("span",{children:"Bottom"})]})]}),k==="draw"&&Ae==="pad"&&Zi&&s.jsxs("div",{ref:Dc,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[s.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[s.jsx("input",{type:"radio",name:"padToolLayer",checked:Jn==="top",onChange:()=>{ms("top"),jn("top"),$(J),Ge(x),Bn(o=>{const c=new Map(o),f=c.get("pad");return f&&c.set("pad",{...f,settings:{color:J,size:x}}),c}),ll(!1),hi(!0)}}),s.jsx("span",{children:"Top"})]}),s.jsxs("label",{className:"radio-label",children:[s.jsx("input",{type:"radio",name:"padToolLayer",checked:Jn==="bottom",onChange:()=>{ms("bottom"),jn("bottom"),$(ne),Ge(ce),Bn(o=>{const c=new Map(o),f=c.get("pad");return f&&c.set("pad",{...f,settings:{color:ne,size:ce}}),c}),ll(!1),Ia(!0)}}),s.jsx("span",{children:"Bottom"})]})]}),Do&&k==="power"&&s.jsxs("div",{style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,minWidth:"200px"},children:[s.jsx("div",{style:{marginBottom:"6px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),Nt.length===0?s.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...Nt].sort((o,c)=>{const f=y=>{const u=y.match(/([+-]?)(\d+\.?\d*)/);if(u){const d=u[1]||"+",w=parseFloat(u[2]);return{absValue:Math.abs(w),isNegative:d==="-",original:y}}return{absValue:1/0,isNegative:!1,original:y}},p=f(o.voltage),g=f(c.voltage);return p.absValue!==g.absValue?p.absValue-g.absValue:p.isNegative!==g.isNegative?p.isNegative?-1:1:0}).map(o=>s.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),Qa(o.id),Za(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",marginBottom:"4px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:o.color,border:"1px solid #ccc"}}),s.jsxs("div",{children:[s.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:o.name}),s.jsx("div",{style:{fontSize:"11px",color:"#666"},children:o.voltage})]})]})},o.id)),s.jsx("button",{onClick:o=>{o.preventDefault(),o.stopPropagation(),Za(!1),Qa(null),L("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),k==="component"&&yi&&s.jsxs("div",{ref:ra,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[s.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[s.jsx("input",{type:"radio",name:"componentToolLayer",checked:pt==="top",onClick:()=>{Di("top"),jn("top"),$(De),Ge(lt),Bn(o=>{const c=new Map(o),f=c.get("component");return f&&c.set("component",{...f,settings:{color:De,size:lt}}),c}),Wa(!1),hi(!0),Qn(!0)}}),s.jsx("span",{children:"Top"})]}),s.jsxs("label",{className:"radio-label",children:[s.jsx("input",{type:"radio",name:"componentToolLayer",checked:pt==="bottom",onClick:()=>{Di("bottom"),jn("bottom"),$(je),Ge(Jt),Bn(o=>{const c=new Map(o),f=c.get("component");return f&&c.set("component",{...f,settings:{color:je,size:Jt}}),c}),Wa(!1),Ia(!0),Qn(!0)}}),s.jsx("span",{children:"Bottom"})]})]}),k==="component"&&Ka&&s.jsxs("div",{ref:ol,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"400px",overflowY:"auto",minWidth:"200px"},children:[s.jsx("div",{style:{marginBottom:"6px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Component Type:"}),Object.entries(tf).map(([o,c])=>s.jsxs("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),Pi(o),Qn(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px",marginBottom:"2px",background:al===o?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",color:"#333"},children:[c.prefix.join(", ")," - ",o," (",c.defaultPins," pins)"]},o)),s.jsx("button",{onClick:o=>{o.preventDefault(),o.stopPropagation(),Qn(!1),L("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),s.jsxs("div",{style:{position:"absolute",top:6,left:56,bottom:6,width:168,padding:8,display:"flex",flexDirection:"column",gap:4,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[s.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),s.jsxs("div",{onClick:()=>jn("top"),title:"Top layer",style:{cursor:"pointer",padding:4,borderRadius:6,border:At==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[s.jsx("div",{style:{fontSize:12,color:"#444",fontWeight:600},children:"Top Image"}),s.jsx("label",{className:"radio-label",style:{margin:0},children:s.jsx("input",{type:"checkbox",checked:Ao,onChange:o=>hi(o.target.checked)})})]}),s.jsx("canvas",{ref:Bs,width:100,height:64})]}),s.jsxs("div",{onClick:()=>jn("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:4,borderRadius:6,border:At==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[s.jsx("div",{style:{fontSize:12,color:"#444",fontWeight:600},children:"Bottom Image"}),s.jsx("label",{className:"radio-label",style:{margin:0},children:s.jsx("input",{type:"checkbox",checked:ia,onChange:o=>Ia(o.target.checked)})})]}),s.jsx("canvas",{ref:Os,width:100,height:64})]}),s.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"4px 0"}}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:Mn,onChange:o=>Ii(o.target.checked)}),s.jsx("span",{children:"Vias"})]}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:qa,onChange:o=>Ea(o.target.checked)}),s.jsx("span",{children:"Pads (Top)"})]}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:$a,onChange:o=>Ls(o.target.checked)}),s.jsx("span",{children:"Pads (Bottom)"})]}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:kl,onChange:o=>ja(o.target.checked)}),s.jsx("span",{children:"Traces (Top)"})]}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:Ln,onChange:o=>qi(o.target.checked)}),s.jsx("span",{children:"Traces (Bottom)"})]}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:sa,onChange:o=>Hs(o.target.checked)}),s.jsx("span",{children:"Components (Top)"})]}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:ka,onChange:o=>Ys(o.target.checked)}),s.jsx("span",{children:"Components (Bottom)"})]}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:Aa,onChange:o=>Vs(o.target.checked)}),s.jsx("span",{children:"Power"})]}),s.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx("input",{type:"checkbox",checked:Hl,onChange:o=>Da(o.target.checked)}),s.jsx("span",{children:"Ground"})]}),s.jsxs("div",{style:{marginTop:16},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsxs("label",{style:{fontSize:12,color:"#333"},children:["Transparency: ",he,"%"]}),s.jsxs("label",{className:"radio-label",style:{margin:0},children:[s.jsx("input",{type:"checkbox",checked:me,onChange:o=>{const c=o.target.checked;c?(hi(!0),Ia(!0)):(O(50),L("select")),oe(c)}}),s.jsx("span",{style:{marginLeft:6,fontSize:12},children:"Cycle"})]})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:he,onChange:o=>O(Number(o.target.value)),onDoubleClick:()=>Ma("transparency"),className:"slider",style:{width:"100%",marginTop:6}})]})]}),s.jsx(Py,{visible:!T&&!_}),s.jsx("canvas",{ref:fn,width:Ta.width,height:Ta.height,onMouseDown:Nc,onMouseMove:Zt,onMouseUp:St,onMouseLeave:St,onWheel:Xs,onDoubleClick:Gs,className:`pcb-canvas ${k==="transform"?"transform-cursor":k==="draw"?"draw-cursor":k==="erase"?"erase-cursor":"default-cursor"}`,style:{...Ni?{cursor:Ni}:k==="pan"?{cursor:wa?"grabbing":"grab"}:{},width:`${Ta.width}px`,height:`${Ta.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),X&&X.visible&&(()=>{let o=bt.find(f=>f.id===X.id),c="top";return o||(o=st.find(f=>f.id===X.id),c="bottom"),o?(X.layer!==c&&Ut({...X,layer:c}),s.jsxs("div",{"data-component-editor-dialog":!0,onClick:f=>{if(Rt&&Rt.componentId===o.id){const p=f.target;(p.tagName==="BUTTON"||p.tagName==="INPUT"||p.closest("button")||p.closest("input"))&&f.stopPropagation()}},style:{position:"fixed",top:wl?`${wl.y}px`:"50%",left:wl?`${wl.x}px`:"50%",transform:"translate(-50%, -50%)",background:Rt&&Rt.componentId===o.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:_i?"grabbing":"default"},children:[s.jsxs("div",{onMouseDown:f=>{const p=f.target;p.tagName==="BUTTON"||p.tagName==="INPUT"||p.closest("button")||p.closest("input")||wl&&(Bi({x:f.clientX-wl.x,y:f.clientY-wl.y}),Cs(!0),f.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:_i?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[s.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),s.jsx("button",{onClick:()=>{Ut(null),Pl(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px",overflowY:"auto",flex:1,minHeight:0},children:[s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),s.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:o.componentType})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-layer-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),s.jsxs("select",{id:`component-layer-${o.id}`,name:`component-layer-${o.id}`,value:X.layer,onChange:f=>Ut({...X,layer:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},children:[s.jsx("option",{value:"top",children:"Top"}),s.jsx("option",{value:"bottom",children:"Bottom"})]})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-designator-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Name:"}),s.jsx("input",{id:`component-designator-${o.id}`,name:`component-designator-${o.id}`,type:"text",value:X.designator,onChange:f=>Ut({...X,designator:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., Op Amp OP07"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-abbreviation-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),s.jsx("input",{id:`component-abbreviation-${o.id}`,name:`component-abbreviation-${o.id}`,type:"text",maxLength:4,value:X.abbreviation.replace(/\*/g,""),onChange:f=>{const p=f.target.value.substring(0,4).toUpperCase();Ut({...X,abbreviation:p})},onBlur:f=>{const p=f.target.value.substring(0,4).toUpperCase();Ut({...X,abbreviation:p})},disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:Me?.6:1},placeholder:"e.g., U2, R7, C1"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-x-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),s.jsx("input",{id:`component-x-${o.id}`,name:`component-x-${o.id}`,type:"number",value:X.x.toFixed(2),onChange:f=>{const p=parseFloat(f.target.value)||0;Ut({...X,x:p})},disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-y-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),s.jsx("input",{id:`component-y-${o.id}`,name:`component-y-${o.id}`,type:"number",value:X.y.toFixed(2),onChange:f=>{const p=parseFloat(f.target.value)||0;Ut({...X,y:p})},disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-manufacturer-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),s.jsx("input",{id:`component-manufacturer-${o.id}`,name:`component-manufacturer-${o.id}`,type:"text",value:X.manufacturer,onChange:f=>Ut({...X,manufacturer:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-partnumber-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),s.jsx("input",{id:`component-partnumber-${o.id}`,name:`component-partnumber-${o.id}`,type:"text",value:X.partNumber,onChange:f=>Ut({...X,partNumber:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1}})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-pincount-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),s.jsx("input",{id:`component-pincount-${o.id}`,name:`component-pincount-${o.id}`,type:"number",min:"1",value:X.pinCount,onChange:f=>{const p=Math.max(1,parseInt(f.target.value)||1);Ut({...X,pinCount:p})},onBlur:f=>{if(Me){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const p=Math.max(1,parseInt(f.target.value)||1),y=(X.layer==="top"?bt:st).find(u=>u.id===X.id);if(y&&p!==y.pinCount){const u=y.pinConnections||[],d=new Array(p).fill("").map((b,te)=>te<u.length?u[te]:""),w={...y,pinCount:p,pinConnections:d};X.layer==="top"?En(b=>b.map(te=>te.id===X.id?w:te)):dn(b=>b.map(te=>te.id===X.id?w:te)),Ut({...X,pinCount:p})}},disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1}})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),Rt&&Rt.componentId===o.id&&s.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"9px",color:"#856404"},children:["Pin ",Rt.pinIndex+1," selected. Click on a via or pad to connect."]}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px",padding:"1px"},children:Array.from({length:X.pinCount},(f,p)=>{const y=(X.layer==="top"?bt:st).find(w=>w.id===X.id),u=y?.pinConnections&&y.pinConnections.length>p?y.pinConnections[p]:"",d=Rt&&Rt.componentId===o.id&&Rt.pinIndex===p;return Rt&&Rt.componentId===o.id&&console.log(`Component Editor Pin ${p+1}: pinConnection="${u}", comp.pinConnections=`,y?.pinConnections),s.jsxs("label",{htmlFor:`pin-radio-${o.id}-${p}`,style:{display:"flex",alignItems:"center",gap:"4px",padding:"2px 4px",cursor:"pointer",fontSize:"9px",border:d?"1px solid #0b5fff":u?"1px solid #28a745":"1px solid #ddd",borderRadius:2,background:d?"#e6f0ff":u?"#d4edda":"#fff"},title:u?`Connected to: ${u}`:"Select this pin, then click on a via or pad to connect",children:[s.jsx("input",{id:`pin-radio-${o.id}-${p}`,name:`pin-radio-${o.id}`,type:"radio",checked:!!d,onChange:()=>{if(Me){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}Pl(d?null:{componentId:o.id,pinIndex:p})},disabled:Me,style:{margin:0,cursor:Me?"not-allowed":"pointer",opacity:Me?.6:1}}),s.jsxs("span",{style:{color:"#333",fontWeight:d?600:400},children:["Pin ",p+1]}),u&&s.jsx("span",{style:{fontSize:"8px",color:"#28a745",fontWeight:600,marginLeft:"auto"},children:u})]},p)})})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[s.jsx("label",{htmlFor:`component-orientation-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),s.jsxs("select",{id:`component-orientation-${o.id}`,name:`component-orientation-${o.id}`,value:X.orientation??0,onChange:f=>Ut({...X,orientation:parseInt(f.target.value)||0}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},children:[s.jsx("option",{value:"0",children:"0"}),s.jsx("option",{value:"90",children:"90"}),s.jsx("option",{value:"180",children:"180"}),s.jsx("option",{value:"270",children:"270"})]})]}),o.componentType==="Resistor"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"Resistor Properties:"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-resistance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),s.jsx("input",{id:`component-resistance-${o.id}`,type:"text",value:X.resistance||"",onChange:f=>Ut({...X,resistance:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., 10k"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-power-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),s.jsx("input",{id:`component-power-${o.id}`,type:"text",value:X.power||"",onChange:f=>Ut({...X,power:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., 1/4W"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-tolerance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),s.jsx("input",{id:`component-tolerance-${o.id}`,type:"text",value:X.tolerance||"",onChange:f=>Ut({...X,tolerance:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., 5%"})]})]}),o.componentType==="Capacitor"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"Capacitor Properties:"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-capacitance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),s.jsx("input",{id:`component-capacitance-${o.id}`,type:"text",value:X.capacitance||"",onChange:f=>Ut({...X,capacitance:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., 100nF"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-voltage-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),s.jsx("input",{id:`component-voltage-${o.id}`,type:"text",value:X.voltage||"",onChange:f=>Ut({...X,voltage:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., 50V"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-dielectric-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),s.jsx("input",{id:`component-dielectric-${o.id}`,type:"text",value:X.dielectric||"",onChange:f=>Ut({...X,dielectric:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., Ceramic"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-tolerance-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),s.jsx("input",{id:`component-tolerance-${o.id}`,type:"text",value:X.tolerance||"",onChange:f=>Ut({...X,tolerance:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., 10%"})]})]}),o.componentType==="IntegratedCircuit"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-description-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),s.jsx("input",{id:`component-description-${o.id}`,type:"text",value:X.description||"",onChange:f=>Ut({...X,description:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., Dual Op-Amp"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-ictype-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),s.jsx("input",{id:`component-ictype-${o.id}`,type:"text",value:X.icType||"",onChange:f=>Ut({...X,icType:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"e.g., Op-Amp"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[s.jsx("label",{htmlFor:`component-datasheet-${o.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),s.jsx("input",{id:`component-datasheet-${o.id}`,type:"text",value:X.datasheet||"",onChange:f=>Ut({...X,datasheet:f.target.value}),disabled:Me,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Me?.6:1},placeholder:"URL"})]})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[s.jsx("button",{onClick:()=>{Ut(null),Pl(null)},style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),s.jsx("button",{onClick:()=>{if(Me){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const f=u=>{const d={...u};if(d.designator=X.designator,d.x=X.x,d.y=X.y,d.layer=X.layer,d.orientation=X.orientation??0,d.abbreviation=X.abbreviation.trim()||ps(u.componentType),"manufacturer"in d&&(d.manufacturer=X.manufacturer),"partNumber"in d&&(d.partNumber=X.partNumber),X.pinCount!==u.pinCount){d.pinCount=X.pinCount;const w=u.pinConnections||[];d.pinConnections=new Array(X.pinCount).fill("").map((b,te)=>te<w.length?w[te]:"")}else d.pinConnections=u.pinConnections||[];return u.componentType==="Resistor"?(d.resistance=X.resistance||void 0,d.power=X.power||void 0,d.tolerance=X.tolerance||void 0):u.componentType==="Capacitor"?(d.capacitance=X.capacitance||void 0,d.voltage=X.voltage||void 0,d.tolerance=X.tolerance||void 0,d.dielectric=X.dielectric||void 0):u.componentType==="Diode"?(d.diodeType=X.diodeType||void 0,d.voltage=X.voltage||void 0,d.current=X.current||void 0,d.ledColor=X.ledColor||void 0):u.componentType==="Battery"?(d.voltage=X.voltage||void 0,d.capacity=X.capacity||void 0,d.chemistry=X.chemistry||void 0):u.componentType==="Fuse"?(d.current=X.current||void 0,d.voltage=X.voltage||void 0,d.fuseType=X.fuseType||void 0):u.componentType==="FerriteBead"?(d.impedance=X.impedance||void 0,d.current=X.current||void 0):u.componentType==="Connector"?(d.connectorType=X.connectorType||void 0,d.gender=X.gender||void 0):u.componentType==="Jumper"?d.positions=X.positions||void 0:u.componentType==="Relay"?(d.coilVoltage=X.coilVoltage||void 0,d.contactType=X.contactType||void 0,d.current=X.current||void 0):u.componentType==="Inductor"?(d.inductance=X.inductance||void 0,d.current=X.current||void 0,d.resistance=X.resistance||void 0):u.componentType==="Speaker"?(d.impedance=X.impedance||void 0,d.power=X.power||void 0):u.componentType==="Motor"?(d.motorType=X.motorType||void 0,d.voltage=X.voltage||void 0,d.current=X.current||void 0):u.componentType==="PowerSupply"?(d.inputVoltage=X.inputVoltage||void 0,d.outputVoltage=X.outputVoltage||void 0,d.current=X.current||void 0):u.componentType==="Transistor"?(d.transistorType=X.transistorType||void 0,d.polarity=X.polarity||void 0,d.voltage=X.voltage||void 0,d.current=X.current||void 0):u.componentType==="ResistorNetwork"?(d.resistance=X.resistance||void 0,d.configuration=X.configuration||void 0):u.componentType==="Thermistor"?(d.resistance=X.resistance||void 0,d.thermistorType=X.thermistorType||void 0,d.beta=X.beta||void 0):u.componentType==="Switch"?(d.switchType=X.switchType||void 0,d.current=X.current||void 0,d.voltage=X.voltage||void 0):u.componentType==="Transformer"?(d.primaryVoltage=X.primaryVoltage||void 0,d.secondaryVoltage=X.secondaryVoltage||void 0,d.power=X.power||void 0,d.turns=X.turns||void 0):u.componentType==="TestPoint"?d.signal=X.signal||void 0:u.componentType==="IntegratedCircuit"?(d.description=X.description||void 0,d.datasheet=X.datasheet||void 0,d.icType=X.icType||void 0):u.componentType==="VacuumTube"?d.tubeType=X.tubeType||void 0:u.componentType==="VariableResistor"?(d.vrType=X.vrType||void 0,d.resistance=X.resistance||void 0,d.power=X.power||void 0,d.taper=X.taper||void 0):u.componentType==="Crystal"?(d.frequency=X.frequency||void 0,d.loadCapacitance=X.loadCapacitance||void 0,d.tolerance=X.tolerance||void 0):u.componentType==="ZenerDiode"&&(d.voltage=X.voltage||void 0,d.power=X.power||void 0,d.tolerance=X.tolerance||void 0),d},p=bt.find(u=>u.id===X.id),g=st.find(u=>u.id===X.id),y=p||g;if(y){const u=f(y),d=y.layer,w=X.layer;d!==w?d==="top"?(En(b=>b.filter(te=>te.id!==X.id)),dn(b=>[...b,u])):(dn(b=>b.filter(te=>te.id!==X.id)),En(b=>[...b,u])):w==="top"?En(b=>b.map(te=>te.id===X.id?u:te)):dn(b=>b.map(te=>te.id===X.id?u:te))}else if(console.warn(`Component ${X.id} not found in either layer array`),X.layer==="top"){const u=st.find(d=>d.id===X.id);if(u){const d=f(u);dn(w=>w.filter(b=>b.id!==X.id)),En(w=>[...w,d])}}else{const u=bt.find(d=>d.id===X.id);if(u){const d=f(u);En(w=>w.filter(b=>b.id!==X.id)),dn(w=>[...w,d])}}Ut(null),Pl(null)},disabled:Me,style:{padding:"2px 5px",background:Me?"#f5f5f5":"#0b5fff",color:Me?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Me?"not-allowed":"pointer",fontSize:"10px",opacity:Me?.6:1},children:"Save"})]})]})):null})(),mn&&mn.visible&&(()=>{if(!vt.find(f=>f.id===mn.id))return null;const c=Nt.find(f=>f.id===mn.powerBusId);return s.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[s.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),s.jsx("button",{onClick:()=>So(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),s.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:c?`${c.name} (${c.voltage})`:"Unknown"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`power-layer-${mn.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),s.jsxs("select",{id:`power-layer-${mn.id}`,name:`power-layer-${mn.id}`,value:mn.layer,onChange:f=>So({...mn,layer:f.target.value}),disabled:Ct,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:Ct?.6:1},children:[s.jsx("option",{value:"top",children:"Top"}),s.jsx("option",{value:"bottom",children:"Bottom"})]})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),s.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:mn.x.toFixed(2)})]}),s.jsxs("div",{children:[s.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),s.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:mn.y.toFixed(2)})]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[s.jsx("button",{onClick:()=>So(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),s.jsx("button",{onClick:()=>{Ct||(el(f=>f.map(p=>p.id===mn.id?{...p,layer:mn.layer}:p)),So(null))},disabled:Ct,style:{padding:"2px 5px",background:Ct?"#f5f5f5":"#0b5fff",color:Ct?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Ct?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!T&&!_&&s.jsx("div",{className:"placeholder"}),s.jsx("div",{ref:Yi,className:"scrollbar-horizontal",onScroll:o=>{if(oa.current)return;const c=o.currentTarget,f=fi.current;Wn(p=>({x:-c.scrollLeft-f,y:p.y}))},"aria-label":"Horizontal pan",children:s.jsx("div",{className:"scrollbar-horizontal-content",ref:zc})}),s.jsx("div",{ref:Ca,className:"scrollbar-vertical",onScroll:o=>{if(oa.current)return;const c=o.currentTarget,f=di.current;Wn(p=>({x:p.x,y:-c.scrollTop-f}))},"aria-label":"Vertical pan",children:s.jsx("div",{className:"scrollbar-vertical-content",ref:jc})})]}),$i&&s.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"2px solid #333",borderRadius:8,padding:"20px",zIndex:1e3,minWidth:"500px",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[s.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),s.jsx("button",{onClick:()=>Zn(!1),style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666"},children:""})]}),s.jsx("div",{style:{marginBottom:"16px"},children:[...Nt].sort((o,c)=>{const f=y=>{const u=y.match(/([+-]?)(\d+\.?\d*)/);if(u){const d=u[1]||"+",w=parseFloat(u[2]);return{absValue:Math.abs(w),isNegative:d==="-",original:y}}return{absValue:1/0,isNegative:!1,original:y}},p=f(o.voltage),g=f(c.voltage);return p.absValue!==g.absValue?p.absValue-g.absValue:p.isNegative!==g.isNegative?p.isNegative?-1:1:0}).map(o=>{const c=Nt.findIndex(f=>f.id===o.id);return s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",marginBottom:"8px",background:"#f5f5f5",borderRadius:6,border:"1px solid #ddd"},children:[s.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:o.color,border:"2px solid #333"}}),s.jsxs("div",{style:{flex:1},children:[s.jsx("input",{type:"text",value:o.name,onChange:f=>{const p=[...Nt];p[c]={...o,name:f.target.value},dl(p)},placeholder:"Name",style:{width:"100%",padding:"4px 8px",marginBottom:"4px",border:"1px solid #ccc",borderRadius:4,fontSize:"13px"}}),s.jsx("input",{type:"text",value:o.voltage,onChange:f=>{const p=[...Nt];p[c]={...o,voltage:f.target.value},dl(p)},placeholder:"Voltage (e.g., +5VDC, +3.3VDC, -5VDC)",style:{width:"100%",padding:"4px 8px",border:"1px solid #ccc",borderRadius:4,fontSize:"13px"}})]}),s.jsx("input",{type:"color",value:o.color,onChange:f=>{const p=[...Nt];p[c]={...o,color:f.target.value},dl(p)},style:{width:"40px",height:"40px",border:"1px solid #ccc",borderRadius:4,cursor:"pointer"}}),s.jsx("button",{onClick:()=>{const f=vt.filter(p=>p.powerBusId===o.id);if(f.length>0){alert(`Cannot delete: ${f.length} power node(s) are using this bus. Remove or reassign them first.`);return}dl(p=>p.filter(g=>g.id!==o.id))},style:{padding:"6px 12px",background:"#ff4444",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Delete"})]},o.id)})}),s.jsx("button",{onClick:()=>{const o={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0VDC",color:"#ff0000"};dl(c=>[...c,o])},style:{width:"100%",padding:"10px",background:"#4CAF50",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"+ Add Power Bus"}),s.jsx("button",{onClick:()=>Zn(!1),style:{width:"100%",padding:"10px",background:"#666",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Close"})]}),s.jsx("input",{ref:Ec,type:"file",accept:"image/*",style:{display:"none"},onChange:o=>{const c=o.target.files?.[0];c&&Vl(c,"top"),o.target.value=""}}),s.jsx("input",{ref:_s,type:"file",accept:"image/*",style:{display:"none"},onChange:o=>{const c=o.target.files?.[0];c&&Vl(c,"bottom"),o.target.value=""}}),s.jsx("input",{ref:ui,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async o=>{const c=o.target.files?.[0];if(c)try{tl(c.name);const f=await c.text(),p=JSON.parse(f);await Bo(p);let g;p.projectInfo?.name?g=p.projectInfo.name:(g=c.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",jl(g),localStorage.setItem("pcb_project_name",g)),kn||(jl(g),localStorage.setItem("pcb_project_name",g)),setTimeout(()=>{p.autoSave?.enabled===!0||To({visible:!0,source:"open"})},100)}catch(f){console.error("Failed to open project",f),alert("Failed to open project file. See console for details.")}o.target.value=""}}),s.jsx(Fy,{visible:js.visible,selectedIds:ht,selectedComponentIds:ut,selectedPowerIds:ot,selectedGroundIds:kt,drawingStrokes:Ze,componentsTop:bt,componentsBottom:st,powers:vt,grounds:ct,powerBuses:Nt,onClose:()=>Es({visible:!1,text:""}),setComponentsTop:En,setComponentsBottom:dn,determineViaType:Fa,determinePadType:ca}),As.visible&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:o=>{o.target===o.currentTarget&&wi()},children:s.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[s.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),s.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("button",{onClick:wi,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),s.jsx("button",{onClick:Zs,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),s.jsx("button",{ref:Ac,onClick:ha,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),Kt.visible&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:o=>{o.target===o.currentTarget&&_a()},children:s.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[s.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),s.jsx("input",{ref:nl,type:"text",value:Kt.projectName,onChange:o=>{ii(c=>({...c,projectName:o.target.value}))},onKeyDown:o=>{o.key==="Enter"?(o.preventDefault(),lo()):o.key==="Escape"&&(o.preventDefault(),_a())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),Kt.projectName&&(()=>{const o=Kt.projectName.match(/[^a-zA-Z0-9_-]/g);if(o){const c=[...new Set(o)];return s.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",c.map(f=>`"${f}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),s.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[s.jsx("input",{type:"text",value:Kt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Kt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),s.jsx("button",{onClick:$s,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Kt.projectName&&Kt.locationPath&&s.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[s.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),s.jsxs("div",{style:{color:"#4CAF50"},children:[Kt.locationPath,"/",Kt.projectName,"/project.json"]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("button",{onClick:_a,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),s.jsx("button",{onClick:lo,disabled:!Kt.projectName.trim()||!Kt.locationHandle,style:{padding:"8px 16px",background:!Kt.projectName.trim()||!Kt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Kt.projectName.trim()||!Kt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Kt.projectName.trim()||!Kt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Kt.projectName.trim()||!Kt.locationHandle?.6:1},children:"Create"})]})]})}),$t.visible&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:o=>{o.target===o.currentTarget&&Wi()},children:s.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[s.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),s.jsx("input",{ref:za,type:"text",value:$t.filename,onChange:o=>{si(c=>({...c,filename:o.target.value}))},onKeyDown:o=>{o.key==="Enter"?(o.preventDefault(),Mc()):o.key==="Escape"&&(o.preventDefault(),Wi())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),s.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[s.jsx("input",{type:"text",value:$t.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:$t.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),s.jsx("button",{onClick:Rc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),$t.filename&&$t.locationPath&&s.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[s.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),s.jsxs("div",{style:{color:"#4CAF50"},children:[$t.locationPath,"/",$t.filename.endsWith(".json")?$t.filename:`${$t.filename}.json`]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("button",{onClick:Wi,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),s.jsx("button",{onClick:Mc,disabled:!$t.filename.trim()||!$t.locationHandle,style:{padding:"8px 16px",background:!$t.filename.trim()||!$t.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!$t.filename.trim()||!$t.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!$t.filename.trim()||!$t.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!$t.filename.trim()||!$t.locationHandle?.6:1},children:"Save"})]})]})}),s.jsx(Qy,{visible:ai.visible,title:ai.title,message:ai.message,onClose:()=>ks({visible:!1,title:"",message:""})}),Wl.visible&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:o=>{o.target===o.currentTarget&&Ll({visible:!1,size:6})},children:s.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[s.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),s.jsx("input",{ref:Xi,type:"number",min:"1",max:"99",value:Wl.size,onChange:o=>{const c=parseInt(o.target.value)||1,f=Math.max(1,Math.min(99,c));Ll(p=>({...p,size:f}))},onKeyDown:o=>{if(o.key==="Enter"?Ja():o.key==="Escape"&&Ll({visible:!1,size:6}),o.key.length===1&&/[0-9]/.test(o.key)){const c=Wl.size.toString();c.length>=2&&Xi.current?.selectionStart===Xi.current?.selectionEnd&&Xi.current?.selectionStart===c.length&&o.preventDefault()}},onInput:o=>{const c=o.target,f=c.value;if(f.length>2){c.value=f.slice(0,2);const p=parseInt(c.value)||1;Ll(g=>({...g,size:Math.max(1,Math.min(99,p))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),s.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(Wl.size)?Wl.size:"",onChange:o=>{const c=parseInt(o.target.value);!isNaN(c)&&c>0&&Ll(f=>({...f,size:c}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[s.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(o=>s.jsxs("option",{value:o,style:{background:"#1f1f24",color:"#f2f2f2"},children:[o," pixels"]},o))]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("button",{onClick:()=>Ll({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),s.jsx("button",{onClick:Ja,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Jl.visible&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:o=>{o.target===o.currentTarget&&zl({visible:!1,interval:5})},children:s.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[s.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),s.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),s.jsxs("select",{value:Jl.interval===null?"disable":(Jl.interval||5).toString(),onChange:o=>{const c=o.target.value;if(c==="disable")zl({visible:!0,interval:null});else{const f=parseFloat(c);!isNaN(f)&&f>0&&zl({visible:!0,interval:f})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[s.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),s.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),s.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),s.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),s.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),s.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("button",{onClick:()=>zl({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),s.jsx("button",{onClick:bi,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),wc.visible&&s.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:o=>{o.target===o.currentTarget&&Ki()},children:s.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[s.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),s.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),s.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[s.jsx("button",{onClick:Ki,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),s.jsx("button",{onClick:eo,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Enable Auto Save"})]})]})})]})]})}zy.createRoot(document.getElementById("root")).render(s.jsx(v.StrictMode,{children:s.jsx(f0,{})}));
