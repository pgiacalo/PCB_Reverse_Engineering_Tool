(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))f(u);new MutationObserver(u=>{for(const H of u)if(H.type==="childList")for(const te of H.addedNodes)te.tagName==="LINK"&&te.rel==="modulepreload"&&f(te)}).observe(document,{childList:!0,subtree:!0});function v(u){const H={};return u.integrity&&(H.integrity=u.integrity),u.referrerPolicy&&(H.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?H.credentials="include":u.crossOrigin==="anonymous"?H.credentials="omit":H.credentials="same-origin",H}function f(u){if(u.ep)return;u.ep=!0;const H=v(u);fetch(u.href,H)}})();function Cg(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var bd={exports:{}},qr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function zg(){if(Zp)return qr;Zp=1;var c=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function v(f,u,H){var te=null;if(H!==void 0&&(te=""+H),u.key!==void 0&&(te=""+u.key),"key"in u){H={};for(var ze in u)ze!=="key"&&(H[ze]=u[ze])}else H=u;return u=H.ref,{$$typeof:c,type:f,key:te,ref:u!==void 0?u:null,props:H}}return qr.Fragment=d,qr.jsx=v,qr.jsxs=v,qr}var Qp;function Rg(){return Qp||(Qp=1,bd.exports=zg()),bd.exports}var i=Rg(),md={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp;function Dg(){if(Kp)return St;Kp=1;var c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ze=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),ce=Symbol.iterator;function oe(M){return M===null||typeof M!="object"?null:(M=ce&&M[ce]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,_e={};function we(M,R,I){this.props=M,this.context=R,this.refs=_e,this.updater=I||P}we.prototype.isReactComponent={},we.prototype.setState=function(M,R){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,R,"setState")},we.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function B(){}B.prototype=we.prototype;function D(M,R,I){this.props=M,this.context=R,this.refs=_e,this.updater=I||P}var U=D.prototype=new B;U.constructor=D,W(U,we.prototype),U.isPureReactComponent=!0;var _=Array.isArray;function C(){}var g={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function De(M,R,I){var fe=I.ref;return{$$typeof:c,type:M,key:R,ref:fe!==void 0?fe:null,props:I}}function nt(M,R){return De(M.type,R,M.props)}function T(M){return typeof M=="object"&&M!==null&&M.$$typeof===c}function Xe(M){var R={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(I){return R[I]})}var Ee=/\/+/g;function vt(M,R){return typeof M=="object"&&M!==null&&M.key!=null?Xe(""+M.key):R.toString(36)}function lt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(C,C):(M.status="pending",M.then(function(R){M.status==="pending"&&(M.status="fulfilled",M.value=R)},function(R){M.status==="pending"&&(M.status="rejected",M.reason=R)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function V(M,R,I,fe,ae){var Me=typeof M;(Me==="undefined"||Me==="boolean")&&(M=null);var Be=!1;if(M===null)Be=!0;else switch(Me){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(M.$$typeof){case c:case d:Be=!0;break;case me:return Be=M._init,V(Be(M._payload),R,I,fe,ae)}}if(Be)return ae=ae(M),Be=fe===""?"."+vt(M,0):fe,_(ae)?(I="",Be!=null&&(I=Be.replace(Ee,"$&/")+"/"),V(ae,R,I,"",function(Ue){return Ue})):ae!=null&&(T(ae)&&(ae=nt(ae,I+(ae.key==null||M&&M.key===ae.key?"":(""+ae.key).replace(Ee,"$&/")+"/")+Be)),R.push(ae)),1;Be=0;var Ve=fe===""?".":fe+":";if(_(M))for(var ge=0;ge<M.length;ge++)fe=M[ge],Me=Ve+vt(fe,ge),Be+=V(fe,R,I,Me,ae);else if(ge=oe(M),typeof ge=="function")for(M=ge.call(M),ge=0;!(fe=M.next()).done;)fe=fe.value,Me=Ve+vt(fe,ge++),Be+=V(fe,R,I,Me,ae);else if(Me==="object"){if(typeof M.then=="function")return V(lt(M),R,I,fe,ae);throw R=String(M),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return Be}function J(M,R,I){if(M==null)return M;var fe=[],ae=0;return V(M,fe,"","",function(Me){return R.call(I,Me,ae++)}),fe}function Ne(M){if(M._status===-1){var R=M._result;R=R(),R.then(function(I){(M._status===0||M._status===-1)&&(M._status=1,M._result=I)},function(I){(M._status===0||M._status===-1)&&(M._status=2,M._result=I)}),M._status===-1&&(M._status=0,M._result=R)}if(M._status===1)return M._result.default;throw M._result}var et=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},yt={map:J,forEach:function(M,R,I){J(M,function(){R.apply(this,arguments)},I)},count:function(M){var R=0;return J(M,function(){R++}),R},toArray:function(M){return J(M,function(R){return R})||[]},only:function(M){if(!T(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return St.Activity=K,St.Children=yt,St.Component=we,St.Fragment=v,St.Profiler=u,St.PureComponent=D,St.StrictMode=f,St.Suspense=Z,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=g,St.__COMPILER_RUNTIME={__proto__:null,c:function(M){return g.H.useMemoCache(M)}},St.cache=function(M){return function(){return M.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(M,R,I){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var fe=W({},M.props),ae=M.key;if(R!=null)for(Me in R.key!==void 0&&(ae=""+R.key),R)!ne.call(R,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&R.ref===void 0||(fe[Me]=R[Me]);var Me=arguments.length-2;if(Me===1)fe.children=I;else if(1<Me){for(var Be=Array(Me),Ve=0;Ve<Me;Ve++)Be[Ve]=arguments[Ve+2];fe.children=Be}return De(M.type,ae,fe)},St.createContext=function(M){return M={$$typeof:te,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:H,_context:M},M},St.createElement=function(M,R,I){var fe,ae={},Me=null;if(R!=null)for(fe in R.key!==void 0&&(Me=""+R.key),R)ne.call(R,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(ae[fe]=R[fe]);var Be=arguments.length-2;if(Be===1)ae.children=I;else if(1<Be){for(var Ve=Array(Be),ge=0;ge<Be;ge++)Ve[ge]=arguments[ge+2];ae.children=Ve}if(M&&M.defaultProps)for(fe in Be=M.defaultProps,Be)ae[fe]===void 0&&(ae[fe]=Be[fe]);return De(M,Me,ae)},St.createRef=function(){return{current:null}},St.forwardRef=function(M){return{$$typeof:ze,render:M}},St.isValidElement=T,St.lazy=function(M){return{$$typeof:me,_payload:{_status:-1,_result:M},_init:Ne}},St.memo=function(M,R){return{$$typeof:E,type:M,compare:R===void 0?null:R}},St.startTransition=function(M){var R=g.T,I={};g.T=I;try{var fe=M(),ae=g.S;ae!==null&&ae(I,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(C,et)}catch(Me){et(Me)}finally{R!==null&&I.types!==null&&(R.types=I.types),g.T=R}},St.unstable_useCacheRefresh=function(){return g.H.useCacheRefresh()},St.use=function(M){return g.H.use(M)},St.useActionState=function(M,R,I){return g.H.useActionState(M,R,I)},St.useCallback=function(M,R){return g.H.useCallback(M,R)},St.useContext=function(M){return g.H.useContext(M)},St.useDebugValue=function(){},St.useDeferredValue=function(M,R){return g.H.useDeferredValue(M,R)},St.useEffect=function(M,R){return g.H.useEffect(M,R)},St.useEffectEvent=function(M){return g.H.useEffectEvent(M)},St.useId=function(){return g.H.useId()},St.useImperativeHandle=function(M,R,I){return g.H.useImperativeHandle(M,R,I)},St.useInsertionEffect=function(M,R){return g.H.useInsertionEffect(M,R)},St.useLayoutEffect=function(M,R){return g.H.useLayoutEffect(M,R)},St.useMemo=function(M,R){return g.H.useMemo(M,R)},St.useOptimistic=function(M,R){return g.H.useOptimistic(M,R)},St.useReducer=function(M,R,I){return g.H.useReducer(M,R,I)},St.useRef=function(M){return g.H.useRef(M)},St.useState=function(M){return g.H.useState(M)},St.useSyncExternalStore=function(M,R,I){return g.H.useSyncExternalStore(M,R,I)},St.useTransition=function(){return g.H.useTransition()},St.version="19.2.0",St}var Jp;function Dd(){return Jp||(Jp=1,md.exports=Dg()),md.exports}var j=Dd();const at=Cg(j);var Sd={exports:{}},Zr={},wd={exports:{}},Td={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh;function Ag(){return eh||(eh=1,(function(c){function d(V,J){var Ne=V.length;V.push(J);e:for(;0<Ne;){var et=Ne-1>>>1,yt=V[et];if(0<u(yt,J))V[et]=J,V[Ne]=yt,Ne=et;else break e}}function v(V){return V.length===0?null:V[0]}function f(V){if(V.length===0)return null;var J=V[0],Ne=V.pop();if(Ne!==J){V[0]=Ne;e:for(var et=0,yt=V.length,M=yt>>>1;et<M;){var R=2*(et+1)-1,I=V[R],fe=R+1,ae=V[fe];if(0>u(I,Ne))fe<yt&&0>u(ae,I)?(V[et]=ae,V[fe]=Ne,et=fe):(V[et]=I,V[R]=Ne,et=R);else if(fe<yt&&0>u(ae,Ne))V[et]=ae,V[fe]=Ne,et=fe;else break e}}return J}function u(V,J){var Ne=V.sortIndex-J.sortIndex;return Ne!==0?Ne:V.id-J.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var H=performance;c.unstable_now=function(){return H.now()}}else{var te=Date,ze=te.now();c.unstable_now=function(){return te.now()-ze}}var Z=[],E=[],me=1,K=null,ce=3,oe=!1,P=!1,W=!1,_e=!1,we=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(V){for(var J=v(E);J!==null;){if(J.callback===null)f(E);else if(J.startTime<=V)f(E),J.sortIndex=J.expirationTime,d(Z,J);else break;J=v(E)}}function _(V){if(W=!1,U(V),!P)if(v(Z)!==null)P=!0,C||(C=!0,Xe());else{var J=v(E);J!==null&&lt(_,J.startTime-V)}}var C=!1,g=-1,ne=5,De=-1;function nt(){return _e?!0:!(c.unstable_now()-De<ne)}function T(){if(_e=!1,C){var V=c.unstable_now();De=V;var J=!0;try{e:{P=!1,W&&(W=!1,B(g),g=-1),oe=!0;var Ne=ce;try{t:{for(U(V),K=v(Z);K!==null&&!(K.expirationTime>V&&nt());){var et=K.callback;if(typeof et=="function"){K.callback=null,ce=K.priorityLevel;var yt=et(K.expirationTime<=V);if(V=c.unstable_now(),typeof yt=="function"){K.callback=yt,U(V),J=!0;break t}K===v(Z)&&f(Z),U(V)}else f(Z);K=v(Z)}if(K!==null)J=!0;else{var M=v(E);M!==null&&lt(_,M.startTime-V),J=!1}}break e}finally{K=null,ce=Ne,oe=!1}J=void 0}}finally{J?Xe():C=!1}}}var Xe;if(typeof D=="function")Xe=function(){D(T)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,vt=Ee.port2;Ee.port1.onmessage=T,Xe=function(){vt.postMessage(null)}}else Xe=function(){we(T,0)};function lt(V,J){g=we(function(){V(c.unstable_now())},J)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(V){V.callback=null},c.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<V?Math.floor(1e3/V):5},c.unstable_getCurrentPriorityLevel=function(){return ce},c.unstable_next=function(V){switch(ce){case 1:case 2:case 3:var J=3;break;default:J=ce}var Ne=ce;ce=J;try{return V()}finally{ce=Ne}},c.unstable_requestPaint=function(){_e=!0},c.unstable_runWithPriority=function(V,J){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Ne=ce;ce=V;try{return J()}finally{ce=Ne}},c.unstable_scheduleCallback=function(V,J,Ne){var et=c.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?et+Ne:et):Ne=et,V){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=Ne+yt,V={id:me++,callback:J,priorityLevel:V,startTime:Ne,expirationTime:yt,sortIndex:-1},Ne>et?(V.sortIndex=Ne,d(E,V),v(Z)===null&&V===v(E)&&(W?(B(g),g=-1):W=!0,lt(_,Ne-et))):(V.sortIndex=yt,d(Z,V),P||oe||(P=!0,C||(C=!0,Xe()))),V},c.unstable_shouldYield=nt,c.unstable_wrapCallback=function(V){var J=ce;return function(){var Ne=ce;ce=J;try{return V.apply(this,arguments)}finally{ce=Ne}}}})(Td)),Td}var th;function kg(){return th||(th=1,wd.exports=Ag()),wd.exports}var jd={exports:{}},cl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh;function Ng(){if(nh)return cl;nh=1;var c=Dd();function d(Z){var E="https://react.dev/errors/"+Z;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var me=2;me<arguments.length;me++)E+="&args[]="+encodeURIComponent(arguments[me])}return"Minified React error #"+Z+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(){}var f={d:{f:v,r:function(){throw Error(d(522))},D:v,C:v,L:v,m:v,X:v,S:v,M:v},p:0,findDOMNode:null},u=Symbol.for("react.portal");function H(Z,E,me){var K=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:K==null?null:""+K,children:Z,containerInfo:E,implementation:me}}var te=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ze(Z,E){if(Z==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return cl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,cl.createPortal=function(Z,E){var me=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(d(299));return H(Z,E,null,me)},cl.flushSync=function(Z){var E=te.T,me=f.p;try{if(te.T=null,f.p=2,Z)return Z()}finally{te.T=E,f.p=me,f.d.f()}},cl.preconnect=function(Z,E){typeof Z=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,f.d.C(Z,E))},cl.prefetchDNS=function(Z){typeof Z=="string"&&f.d.D(Z)},cl.preinit=function(Z,E){if(typeof Z=="string"&&E&&typeof E.as=="string"){var me=E.as,K=ze(me,E.crossOrigin),ce=typeof E.integrity=="string"?E.integrity:void 0,oe=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;me==="style"?f.d.S(Z,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:K,integrity:ce,fetchPriority:oe}):me==="script"&&f.d.X(Z,{crossOrigin:K,integrity:ce,fetchPriority:oe,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},cl.preinitModule=function(Z,E){if(typeof Z=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var me=ze(E.as,E.crossOrigin);f.d.M(Z,{crossOrigin:me,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&f.d.M(Z)},cl.preload=function(Z,E){if(typeof Z=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var me=E.as,K=ze(me,E.crossOrigin);f.d.L(Z,me,{crossOrigin:K,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},cl.preloadModule=function(Z,E){if(typeof Z=="string")if(E){var me=ze(E.as,E.crossOrigin);f.d.m(Z,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:me,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else f.d.m(Z)},cl.requestFormReset=function(Z){f.d.r(Z)},cl.unstable_batchedUpdates=function(Z,E){return Z(E)},cl.useFormState=function(Z,E,me){return te.H.useFormState(Z,E,me)},cl.useFormStatus=function(){return te.H.useHostTransitionStatus()},cl.version="19.2.0",cl}var lh;function Mg(){if(lh)return jd.exports;lh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),jd.exports=Ng(),jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih;function Ug(){if(ih)return Zr;ih=1;var c=kg(),d=Dd(),v=Mg();function f(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function H(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function te(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ze(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Z(e){if(H(e)!==e)throw Error(f(188))}function E(e){var t=e.alternate;if(!t){if(t=H(e),t===null)throw Error(f(188));return t!==e?null:e}for(var n=e,l=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(l=a.return,l!==null){n=l;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return Z(a),e;if(s===l)return Z(a),t;s=s.sibling}throw Error(f(188))}if(n.return!==l.return)n=a,l=s;else{for(var p=!1,b=a.child;b;){if(b===n){p=!0,n=a,l=s;break}if(b===l){p=!0,l=a,n=s;break}b=b.sibling}if(!p){for(b=s.child;b;){if(b===n){p=!0,n=s,l=a;break}if(b===l){p=!0,l=s,n=a;break}b=b.sibling}if(!p)throw Error(f(189))}}if(n.alternate!==l)throw Error(f(190))}if(n.tag!==3)throw Error(f(188));return n.stateNode.current===n?e:t}function me(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=me(e),t!==null)return t;e=e.sibling}return null}var K=Object.assign,ce=Symbol.for("react.element"),oe=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),De=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function Xe(e){return e===null||typeof e!="object"?null:(e=T&&e[T]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Symbol.for("react.client.reference");function vt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ee?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case we:return"Profiler";case _e:return"StrictMode";case _:return"Suspense";case C:return"SuspenseList";case De:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case P:return"Portal";case D:return e.displayName||"Context";case B:return(e._context.displayName||"Context")+".Consumer";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g:return t=e.displayName||null,t!==null?t:vt(e.type)||"Memo";case ne:t=e._payload,e=e._init;try{return vt(e(t))}catch{}}return null}var lt=Array.isArray,V=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=v.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},et=[],yt=-1;function M(e){return{current:e}}function R(e){0>yt||(e.current=et[yt],et[yt]=null,yt--)}function I(e,t){yt++,et[yt]=e.current,e.current=t}var fe=M(null),ae=M(null),Me=M(null),Be=M(null);function Ve(e,t){switch(I(Me,t),I(ae,e),I(fe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=bp(t),e=mp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}R(fe),I(fe,e)}function ge(){R(fe),R(ae),R(Me)}function Ue(e){e.memoizedState!==null&&I(Be,e);var t=fe.current,n=mp(t,e.type);t!==n&&(I(ae,e),I(fe,n))}function Ye(e){ae.current===e&&(R(fe),R(ae)),Be.current===e&&(R(Be),Wr._currentValue=Ne)}var wt,Ae;function Fe(e){if(wt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wt=t&&t[1]||"",Ae=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+e+Ae}var pt=!1;function ke(e,t){if(!e||pt)return"";pt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var be=function(){throw Error()};if(Object.defineProperty(be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(be,[])}catch(se){var Q=se}Reflect.construct(e,[],be)}else{try{be.call()}catch(se){Q=se}e.call(be.prototype)}}else{try{throw Error()}catch(se){Q=se}(be=e())&&typeof be.catch=="function"&&be.catch(function(){})}}catch(se){if(se&&Q&&typeof se.stack=="string")return[se.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),p=s[0],b=s[1];if(p&&b){var A=p.split(`
`),F=b.split(`
`);for(a=l=0;l<A.length&&!A[l].includes("DetermineComponentFrameRoot");)l++;for(;a<F.length&&!F[a].includes("DetermineComponentFrameRoot");)a++;if(l===A.length||a===F.length)for(l=A.length-1,a=F.length-1;1<=l&&0<=a&&A[l]!==F[a];)a--;for(;1<=l&&0<=a;l--,a--)if(A[l]!==F[a]){if(l!==1||a!==1)do if(l--,a--,0>a||A[l]!==F[a]){var ue=`
`+A[l].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=l&&0<=a);break}}}finally{pt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Fe(n):""}function ct(e,t){switch(e.tag){case 26:case 27:case 5:return Fe(e.type);case 16:return Fe("Lazy");case 13:return e.child!==t&&t!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return ke(e.type,!1);case 11:return ke(e.type.render,!1);case 1:return ke(e.type,!0);case 31:return Fe("Activity");default:return""}}function dt(e){try{var t="",n=null;do t+=ct(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var At=Object.prototype.hasOwnProperty,qe=c.unstable_scheduleCallback,Qe=c.unstable_cancelCallback,pn=c.unstable_shouldYield,Wn=c.unstable_requestPaint,Oe=c.unstable_now,Ki=c.unstable_getCurrentPriorityLevel,Ut=c.unstable_ImmediatePriority,In=c.unstable_UserBlockingPriority,Ql=c.unstable_NormalPriority,Ps=c.unstable_LowPriority,Ia=c.unstable_IdlePriority,Xs=c.log,Vt=c.unstable_setDisableYieldValue,Mi=null,Ln=null;function Ol(e){if(typeof Xs=="function"&&Vt(e),Ln&&typeof Ln.setStrictMode=="function")try{Ln.setStrictMode(Mi,e)}catch{}}var An=Math.clz32?Math.clz32:iu,ot=Math.log,un=Math.LN2;function iu(e){return e>>>=0,e===0?32:31-(ot(e)/un|0)|0}var es=256,$e=262144,Kl=4194304;function ht(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Kn(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var a=0,s=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~s,l!==0?a=ht(l):(p&=b,p!==0?a=ht(p):n||(n=b&~e,n!==0&&(a=ht(n))))):(b=l&~s,b!==0?a=ht(b):p!==0?a=ht(p):n||(n=l&~e,n!==0&&(a=ht(n)))),a===0?0:t!==0&&t!==a&&(t&s)===0&&(s=a&-a,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:a}function Ha(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Qr(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ws(){var e=Kl;return Kl<<=1,(Kl&62914560)===0&&(Kl=4194304),e}function Ls(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function en(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ts(e,t,n,l,a,s){var p=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var b=e.entanglements,A=e.expirationTimes,F=e.hiddenUpdates;for(n=p&~n;0<n;){var ue=31-An(n),be=1<<ue;b[ue]=0,A[ue]=-1;var Q=F[ue];if(Q!==null)for(F[ue]=null,ue=0;ue<Q.length;ue++){var se=Q[ue];se!==null&&(se.lane&=-536870913)}n&=~be}l!==0&&ul(e,l,0),s!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=s&~(p&~t))}function ul(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-An(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Gs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-An(n),a=1<<l;a&t|e[l]&t&&(e[l]|=t),n&=~a}}function Vl(e,t){var n=t&-t;return n=(n&42)!==0?1:ns(n),(n&(e.suspendedLanes|t))!==0?0:n}function ns(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function on(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:Pp(e.type))}function Jn(e,t){var n=J.p;try{return J.p=e,t()}finally{J.p=n}}var ml=Math.random().toString(36).slice(2),kn="__reactFiber$"+ml,vn="__reactProps$"+ml,Sl="__reactContainer$"+ml,ls="__reactEvents$"+ml,qs="__reactListeners$"+ml,Kr="__reactHandles$"+ml,Zs="__reactResources$"+ml,Jl="__reactMarker$"+ml;function Ui(e){delete e[kn],delete e[vn],delete e[ls],delete e[qs],delete e[Kr]}function Ji(e){var t=e[kn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sl]||n[kn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Rp(e);e!==null;){if(n=e[kn])return n;e=Rp(e)}return t}e=n,n=e.parentNode}return null}function Ea(e){if(e=e[kn]||e[Sl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function is(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(f(33))}function $a(e){var t=e[Zs];return t||(t=e[Zs]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function jn(e){e[Jl]=!0}var Jr=new Set,Qs={};function ea(e,t){bn(e,t),bn(e+"Capture",t)}function bn(e,t){for(Qs[e]=t,e=0;e<t.length;e++)Jr.add(t[e])}var au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zt={},Pt={};function as(e){return At.call(Pt,e)?!0:At.call(zt,e)?!1:au.test(e)?Pt[e]=!0:(zt[e]=!0,!1)}function Co(e,t,n){if(as(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function bt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Rt(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function It(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ht(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var a=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(p){n=""+p,s.call(this,p)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(p){n=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Et(e){if(!e._valueTracker){var t=It(e)?"checked":"value";e._valueTracker=Ht(e,t,""+e[t])}}function ec(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=It(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Dt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Hn=/[\n"\\]/g;function ut(e){return e.replace(Hn,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Cn(e,t,n,l,a,s,p,b){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ft(t)):e.value!==""+ft(t)&&(e.value=""+ft(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Ks(e,p,ft(t)):n!=null?Ks(e,p,ft(n)):l!=null&&e.removeAttribute("value"),a==null&&s!=null&&(e.defaultChecked=!!s),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+ft(b):e.removeAttribute("name")}function ta(e,t,n,l,a,s,p,b){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Et(e);return}n=n!=null?""+ft(n):"",t=t!=null?""+ft(t):n,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??a,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Et(e)}function Ks(e,t,n){t==="number"&&Dt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function zn(e,t,n,l){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&l&&(e[n].defaultSelected=!0)}else{for(n=""+ft(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,l&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function zo(e,t,n){if(t!=null&&(t=""+ft(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ft(n):""}function os(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(f(92));if(lt(l)){if(1<l.length)throw Error(f(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=ft(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),Et(e)}function ei(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function er(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Js.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ya(e,t,n){if(t!=null&&typeof t!="object")throw Error(f(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var a in t)l=t[a],t.hasOwnProperty(a)&&n[a]!==l&&er(e,a,l)}else for(var s in t)t.hasOwnProperty(s)&&er(e,s,t[s])}function ss(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ou=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),su=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kt(e){return su.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function En(){}var tr=null;function dl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pa=null,el=null;function sl(e){var t=Ea(e);if(t&&(e=t.stateNode)){var n=e[vn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Cn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ut(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var a=l[vn]||null;if(!a)throw Error(f(90));Cn(l,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&ec(l)}break e;case"textarea":zo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&zn(e,!!n.multiple,t,!1)}}}var na=!1;function tc(e,t,n){if(na)return e(t,n);na=!0;try{var l=e(t);return l}finally{if(na=!1,(Pa!==null||el!==null)&&(Dc(),Pa&&(t=Pa,e=el,el=Pa=null,sl(t),e)))for(t=0;t<e.length;t++)sl(e[t])}}function rl(e,t){var n=e.stateNode;if(n===null)return null;var l=n[vn]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(f(231,t,typeof n));return n}var wl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if(wl)try{var la={};Object.defineProperty(la,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{Nn=!1}var Mn=null,rs=null,Rn=null;function cs(){if(Rn)return Rn;var e,t=rs,n=t.length,l,a="value"in Mn?Mn.value:Mn.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var p=n-e;for(l=1;l<=p&&t[n-l]===a[s-l];l++);return Rn=a.slice(e,1<l?1-l:void 0)}function $n(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xa(){return!0}function Gn(){return!1}function Yn(e){function t(n,l,a,s,p){this._reactName=n,this._targetInst=a,this.type=l,this.nativeEvent=s,this.target=p,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(s):s[b]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xa:Gn,this.isPropagationStopped=Gn,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),t}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=Yn(qt),Ro=K({},qt,{view:0,detail:0}),ru=Yn(Ro),Do,xi,Tl,ia=K({},Ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:or,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tl&&(Tl&&e.type==="mousemove"?(Do=e.screenX-Tl.screenX,xi=e.screenY-Tl.screenY):xi=Do=0,Tl=e),Do)},movementY:function(e){return"movementY"in e?e.movementY:xi}}),yi=Yn(ia),La=K({},ia,{dataTransfer:0}),ti=Yn(La),Ga=K({},Ro,{relatedTarget:0}),aa=Yn(Ga),nr=K({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),lr=Yn(nr),ir=K({},qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ao=Yn(ir),rn=K({},qt,{data:0}),Fa=Yn(rn),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function us(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ar[e])?!!t[e]:!1}function or(){return us}var jl=K({},Ro,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$n(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ko[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:or,charCode:function(e){return e.type==="keypress"?$n(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$n(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ni=Yn(jl),oa=K({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vi=Yn(oa),_i=K({},Ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:or}),ds=Yn(_i),Bi=K({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),sa=Yn(Bi),fs=K({},ia,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fl=Yn(fs),No=K({},qt,{newState:0,oldState:0}),Oi=Yn(No),Pn=[9,13,27,32],pl=wl&&"CompositionEvent"in window,Mo=null;wl&&"documentMode"in document&&(Mo=document.documentMode);var Uo=wl&&"TextEvent"in window&&!Mo,sr=wl&&(!pl||Mo&&8<Mo&&11>=Mo),rr=" ",tn=!1;function Il(e,t){switch(e){case"keyup":return Pn.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ps(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vi=!1;function cr(e,t){switch(e){case"compositionend":return ps(t);case"keypress":return t.which!==32?null:(tn=!0,rr);case"textInput":return e=t.data,e===rr&&tn?null:e;default:return null}}function nc(e,t){if(Vi)return e==="compositionend"||!pl&&Il(e,t)?(e=cs(),Rn=rs=Mn=null,Vi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sr&&t.locale!=="ko"?null:t.data;default:return null}}var lc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lc[e.type]:t==="textarea"}function dr(e,t,n,l){Pa?el?el.push(l):el=[l]:Pa=l,t=Bc(t,"onChange"),0<t.length&&(n=new Wa("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var ra=null,Ii=null;function qa(e){pp(e,0)}function Hi(e){var t=is(e);if(ec(t))return e}function fr(e,t){if(e==="change")return t}var ca=!1;if(wl){var Za;if(wl){var Qa="oninput"in document;if(!Qa){var ua=document.createElement("div");ua.setAttribute("oninput","return;"),Qa=typeof ua.oninput=="function"}Za=Qa}else Za=!1;ca=Za&&(!document.documentMode||9<document.documentMode)}function hs(){ra&&(ra.detachEvent("onpropertychange",Ka),Ii=ra=null)}function Ka(e){if(e.propertyName==="value"&&Hi(Ii)){var t=[];dr(t,Ii,e,dl(e)),tc(qa,t)}}function _o(e,t,n){e==="focusin"?(hs(),ra=t,Ii=n,ra.attachEvent("onpropertychange",Ka)):e==="focusout"&&hs()}function Bo(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hi(Ii)}function ic(e,t){if(e==="click")return Hi(t)}function bi(e,t){if(e==="input"||e==="change")return Hi(t)}function Oo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fn=typeof Object.is=="function"?Object.is:Oo;function Cl(e,t){if(Fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var a=n[l];if(!At.call(t,a)||!Fn(e[a],t[a]))return!1}return!0}function ac(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vo(e,t){var n=ac(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ac(n)}}function pr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pr(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Dt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Dt(e.document)}return t}function Ja(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hr=wl&&"documentMode"in document&&11>=document.documentMode,da=null,gs=null,eo=null,to=!1;function no(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;to||da==null||da!==Dt(l)||(l=da,"selectionStart"in l&&Ja(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),eo&&Cl(eo,l)||(eo=l,l=Bc(gs,"onSelect"),0<l.length&&(t=new Wa("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=da)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ii={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},qn={},xs={};wl&&(xs=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function Un(e){if(qn[e])return qn[e];if(!ii[e])return e;var t=ii[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in xs)return qn[e]=t[n];return e}var ys=Un("animationend"),hl=Un("animationiteration"),vs=Un("animationstart"),fa=Un("transitionrun"),gr=Un("transitionstart"),pa=Un("transitioncancel"),bs=Un("transitionend"),Hl=new Map,lo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lo.push("scrollEnd");function mn(e,t){Hl.set(e,t),ea(t,[e])}var ha=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Dn=[],Ei=0,mt=0;function Tt(){for(var e=Ei,t=mt=Ei=0;t<e;){var n=Dn[t];Dn[t++]=null;var l=Dn[t];Dn[t++]=null;var a=Dn[t];Dn[t++]=null;var s=Dn[t];if(Dn[t++]=null,l!==null&&a!==null){var p=l.pending;p===null?a.next=a:(a.next=p.next,p.next=a),l.pending=a}s!==0&&ga(n,a,s)}}function ms(e,t,n,l){Dn[Ei++]=e,Dn[Ei++]=t,Dn[Ei++]=n,Dn[Ei++]=l,mt|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function io(e,t,n,l){return ms(e,t,n,l),xa(e)}function mi(e,t){return ms(e,null,null,t),xa(e)}function ga(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var a=!1,s=e.return;s!==null;)s.childLanes|=n,l=s.alternate,l!==null&&(l.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(a=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,a&&t!==null&&(a=31-An(n),e=s.hiddenUpdates,l=e[a],l===null?e[a]=[t]:l.push(t),t.lane=n|536870912),s):null}function xa(e){if(50<Ir)throw Ir=0,Pu=null,Error(f(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Si={};function wi(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tl(e,t,n,l){return new wi(e,t,n,l)}function $i(e){return e=e.prototype,!(!e||!e.isReactComponent)}function El(e,t){var n=e.alternate;return n===null?(n=tl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ya(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function va(e,t,n,l,a,s){var p=0;if(l=e,typeof e=="function")$i(e)&&(p=1);else if(typeof e=="string")p=pg(e,n,fe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case De:return e=tl(31,n,t,a),e.elementType=De,e.lanes=s,e;case W:return Ti(n.children,a,s,t);case _e:p=8,a|=24;break;case we:return e=tl(12,n,t,a|2),e.elementType=we,e.lanes=s,e;case _:return e=tl(13,n,t,a),e.elementType=_,e.lanes=s,e;case C:return e=tl(19,n,t,a),e.elementType=C,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:p=10;break e;case B:p=9;break e;case U:p=11;break e;case g:p=14;break e;case ne:p=16,l=null;break e}p=29,n=Error(f(130,e===null?"null":typeof e,"")),l=null}return t=tl(p,n,t,a),t.elementType=e,t.type=l,t.lanes=s,t}function Ti(e,t,n,l){return e=tl(7,e,l,t),e.lanes=n,e}function Ss(e,t,n){return e=tl(6,e,null,t),e.lanes=n,e}function Io(e){var t=tl(18,null,null,0);return t.stateNode=e,t}function ws(e,t,n){return t=tl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var sc=new WeakMap;function zl(e,t){if(typeof e=="object"&&e!==null){var n=sc.get(e);return n!==void 0?n:(t={value:e,source:t,stack:dt(t)},sc.set(e,t),t)}return{value:e,source:t,stack:dt(t)}}var ao=[],ba=0,Rl=null,gl=0,Dl=[],Al=0,Yi=null,ai=1,oi="";function ji(e,t){ao[ba++]=gl,ao[ba++]=Rl,Rl=e,gl=t}function rc(e,t,n){Dl[Al++]=ai,Dl[Al++]=oi,Dl[Al++]=Yi,Yi=e;var l=ai;e=oi;var a=32-An(l)-1;l&=~(1<<a),n+=1;var s=32-An(t)+a;if(30<s){var p=a-a%5;s=(l&(1<<p)-1).toString(32),l>>=p,a-=p,ai=1<<32-An(t)+a|n<<a|l,oi=s+e}else ai=1<<s|n<<a|l,oi=e}function xr(e){e.return!==null&&(ji(e,1),rc(e,1,0))}function ma(e){for(;e===Rl;)Rl=ao[--ba],ao[ba]=null,gl=ao[--ba],ao[ba]=null;for(;e===Yi;)Yi=Dl[--Al],Dl[Al]=null,oi=Dl[--Al],Dl[Al]=null,ai=Dl[--Al],Dl[Al]=null}function Sa(e,t){Dl[Al++]=ai,Dl[Al++]=oi,Dl[Al++]=Yi,ai=t.id,oi=t.overflow,Yi=e}var yn=null,Zt=null,Nt=!1,$l=null,nl=!1,oo=Error(f(519));function ll(e){var t=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ho(zl(t,e)),oo}function so(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[kn]=e,t[vn]=l,n){case"dialog":Ot("cancel",t),Ot("close",t);break;case"iframe":case"object":case"embed":Ot("load",t);break;case"video":case"audio":for(n=0;n<Er.length;n++)Ot(Er[n],t);break;case"source":Ot("error",t);break;case"img":case"image":case"link":Ot("error",t),Ot("load",t);break;case"details":Ot("toggle",t);break;case"input":Ot("invalid",t),ta(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ot("invalid",t);break;case"textarea":Ot("invalid",t),os(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||yp(t.textContent,n)?(l.popover!=null&&(Ot("beforetoggle",t),Ot("toggle",t)),l.onScroll!=null&&Ot("scroll",t),l.onScrollEnd!=null&&Ot("scrollend",t),l.onClick!=null&&(t.onclick=En),t=!0):t=!1,t||ll(e,!0)}function wa(e){for(yn=e.return;yn;)switch(yn.tag){case 5:case 31:case 13:nl=!1;return;case 27:case 3:nl=!0;return;default:yn=yn.return}}function Zn(e){if(e!==yn)return!1;if(!Nt)return wa(e),Nt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||id(e.type,e.memoizedProps)),n=!n),n&&Zt&&ll(e),wa(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Zt=zp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));Zt=zp(e)}else t===27?(t=Zt,bo(e.type)?(e=cd,cd=null,Zt=e):Zt=t):Zt=yn?hi(e.stateNode.nextSibling):null;return!0}function Ci(){Zt=yn=null,Nt=!1}function yr(){var e=$l;return e!==null&&(_l===null?_l=e:_l.push.apply(_l,e),$l=null),e}function Ho(e){$l===null?$l=[e]:$l.push(e)}var Ts=M(null),xl=null,Yl=null;function si(e,t,n){I(Ts,t._currentValue),t._currentValue=n}function Pl(e){e._currentValue=Ts.current,R(Ts)}function Eo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function vr(e,t,n,l){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){var p=a.child;s=s.firstContext;e:for(;s!==null;){var b=s;s=a;for(var A=0;A<t.length;A++)if(b.context===t[A]){s.lanes|=n,b=s.alternate,b!==null&&(b.lanes|=n),Eo(s.return,n,e),l||(p=null);break e}s=b.next}}else if(a.tag===18){if(p=a.return,p===null)throw Error(f(341));p.lanes|=n,s=p.alternate,s!==null&&(s.lanes|=n),Eo(p,n,e),p=null}else p=a.child;if(p!==null)p.return=a;else for(p=a;p!==null;){if(p===e){p=null;break}if(a=p.sibling,a!==null){a.return=p.return,p=a;break}p=p.return}a=p}}function Ta(e,t,n,l){e=null;for(var a=t,s=!1;a!==null;){if(!s){if((a.flags&524288)!==0)s=!0;else if((a.flags&262144)!==0)break}if(a.tag===10){var p=a.alternate;if(p===null)throw Error(f(387));if(p=p.memoizedProps,p!==null){var b=a.type;Fn(a.pendingProps.value,p.value)||(e!==null?e.push(b):e=[b])}}else if(a===Be.current){if(p=a.alternate,p===null)throw Error(f(387));p.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(Wr):e=[Wr])}a=a.return}e!==null&&vr(t,e,n,l),t.flags|=262144}function Xl(e){for(e=e.firstContext;e!==null;){if(!Fn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){xl=e,Yl=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function hn(e){return zi(xl,e)}function $o(e,t){return xl===null&&Pi(e),zi(e,t)}function zi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Yl===null){if(e===null)throw Error(f(308));Yl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Yl=Yl.next=t;return n}var br=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},cc=c.unstable_scheduleCallback,cu=c.unstable_NormalPriority,Sn={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mr(){return{controller:new br,data:new Map,refCount:0}}function Xi(e){e.refCount--,e.refCount===0&&cc(cu,function(){e.controller.abort()})}var ro=null,Sr=0,ja=0,ri=null;function uu(e,t){if(ro===null){var n=ro=[];Sr=0,ja=qu(),ri={status:"pending",value:void 0,then:function(l){n.push(l)}}}return Sr++,t.then(js,js),t}function js(){if(--Sr===0&&ro!==null){ri!==null&&(ri.status="fulfilled");var e=ro;ro=null,ja=0,ri=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function du(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(l.status="rejected",l.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),l}var Cs=V.S;V.S=function(e,t){$f=Oe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&uu(e,t),Cs!==null&&Cs(e,t)};var Ri=M(null);function zs(){var e=Ri.current;return e!==null?e:sn.pooledCache}function Yo(e,t){t===null?I(Ri,Ri.current):I(Ri,t.pool)}function wr(){var e=zs();return e===null?null:{parent:Sn._currentValue,pool:e}}var ci=Error(f(460)),Po=Error(f(474)),Wi=Error(f(542)),ui={then:function(){}};function Xo(e){return e=e.status,e==="fulfilled"||e==="rejected"}function uc(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(En,En),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wo(e),e;default:if(typeof t.status=="string")t.then(En,En);else{if(e=sn,e!==null&&100<e.shellSuspendCounter)throw Error(f(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=l}},function(l){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Wo(e),e}throw Li=t,ci}}function Ca(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Li=n,ci):n}}var Li=null;function Tr(){if(Li===null)throw Error(f(459));var e=Li;return Li=null,e}function Wo(e){if(e===ci||e===Wi)throw Error(f(483))}var yl=null,co=0;function Di(e){var t=co;return co+=1,yl===null&&(yl=[]),uc(yl,e,t)}function Wl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Lo(e,t){throw t.$$typeof===ce?Error(f(525)):(e=Object.prototype.toString.call(t),Error(f(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function jr(e){function t(X,O){if(e){var G=X.deletions;G===null?(X.deletions=[O],X.flags|=16):G.push(O)}}function n(X,O){if(!e)return null;for(;O!==null;)t(X,O),O=O.sibling;return null}function l(X){for(var O=new Map;X!==null;)X.key!==null?O.set(X.key,X):O.set(X.index,X),X=X.sibling;return O}function a(X,O){return X=El(X,O),X.index=0,X.sibling=null,X}function s(X,O,G){return X.index=G,e?(G=X.alternate,G!==null?(G=G.index,G<O?(X.flags|=67108866,O):G):(X.flags|=67108866,O)):(X.flags|=1048576,O)}function p(X){return e&&X.alternate===null&&(X.flags|=67108866),X}function b(X,O,G,xe){return O===null||O.tag!==6?(O=Ss(G,X.mode,xe),O.return=X,O):(O=a(O,G),O.return=X,O)}function A(X,O,G,xe){var tt=G.type;return tt===W?ue(X,O,G.props.children,xe,G.key):O!==null&&(O.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===ne&&Ca(tt)===O.type)?(O=a(O,G.props),Wl(O,G),O.return=X,O):(O=va(G.type,G.key,G.props,null,X.mode,xe),Wl(O,G),O.return=X,O)}function F(X,O,G,xe){return O===null||O.tag!==4||O.stateNode.containerInfo!==G.containerInfo||O.stateNode.implementation!==G.implementation?(O=ws(G,X.mode,xe),O.return=X,O):(O=a(O,G.children||[]),O.return=X,O)}function ue(X,O,G,xe,tt){return O===null||O.tag!==7?(O=Ti(G,X.mode,xe,tt),O.return=X,O):(O=a(O,G),O.return=X,O)}function be(X,O,G){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ss(""+O,X.mode,G),O.return=X,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case oe:return G=va(O.type,O.key,O.props,null,X.mode,G),Wl(G,O),G.return=X,G;case P:return O=ws(O,X.mode,G),O.return=X,O;case ne:return O=Ca(O),be(X,O,G)}if(lt(O)||Xe(O))return O=Ti(O,X.mode,G,null),O.return=X,O;if(typeof O.then=="function")return be(X,Di(O),G);if(O.$$typeof===D)return be(X,$o(X,O),G);Lo(X,O)}return null}function Q(X,O,G,xe){var tt=O!==null?O.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return tt!==null?null:b(X,O,""+G,xe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case oe:return G.key===tt?A(X,O,G,xe):null;case P:return G.key===tt?F(X,O,G,xe):null;case ne:return G=Ca(G),Q(X,O,G,xe)}if(lt(G)||Xe(G))return tt!==null?null:ue(X,O,G,xe,null);if(typeof G.then=="function")return Q(X,O,Di(G),xe);if(G.$$typeof===D)return Q(X,O,$o(X,G),xe);Lo(X,G)}return null}function se(X,O,G,xe,tt){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return X=X.get(G)||null,b(O,X,""+xe,tt);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case oe:return X=X.get(xe.key===null?G:xe.key)||null,A(O,X,xe,tt);case P:return X=X.get(xe.key===null?G:xe.key)||null,F(O,X,xe,tt);case ne:return xe=Ca(xe),se(X,O,G,xe,tt)}if(lt(xe)||Xe(xe))return X=X.get(G)||null,ue(O,X,xe,tt,null);if(typeof xe.then=="function")return se(X,O,G,Di(xe),tt);if(xe.$$typeof===D)return se(X,O,G,$o(O,xe),tt);Lo(O,xe)}return null}function Ge(X,O,G,xe){for(var tt=null,Wt=null,Ze=O,Mt=O=0,Yt=null;Ze!==null&&Mt<G.length;Mt++){Ze.index>Mt?(Yt=Ze,Ze=null):Yt=Ze.sibling;var Lt=Q(X,Ze,G[Mt],xe);if(Lt===null){Ze===null&&(Ze=Yt);break}e&&Ze&&Lt.alternate===null&&t(X,Ze),O=s(Lt,O,Mt),Wt===null?tt=Lt:Wt.sibling=Lt,Wt=Lt,Ze=Yt}if(Mt===G.length)return n(X,Ze),Nt&&ji(X,Mt),tt;if(Ze===null){for(;Mt<G.length;Mt++)Ze=be(X,G[Mt],xe),Ze!==null&&(O=s(Ze,O,Mt),Wt===null?tt=Ze:Wt.sibling=Ze,Wt=Ze);return Nt&&ji(X,Mt),tt}for(Ze=l(Ze);Mt<G.length;Mt++)Yt=se(Ze,X,Mt,G[Mt],xe),Yt!==null&&(e&&Yt.alternate!==null&&Ze.delete(Yt.key===null?Mt:Yt.key),O=s(Yt,O,Mt),Wt===null?tt=Yt:Wt.sibling=Yt,Wt=Yt);return e&&Ze.forEach(function(jo){return t(X,jo)}),Nt&&ji(X,Mt),tt}function it(X,O,G,xe){if(G==null)throw Error(f(151));for(var tt=null,Wt=null,Ze=O,Mt=O=0,Yt=null,Lt=G.next();Ze!==null&&!Lt.done;Mt++,Lt=G.next()){Ze.index>Mt?(Yt=Ze,Ze=null):Yt=Ze.sibling;var jo=Q(X,Ze,Lt.value,xe);if(jo===null){Ze===null&&(Ze=Yt);break}e&&Ze&&jo.alternate===null&&t(X,Ze),O=s(jo,O,Mt),Wt===null?tt=jo:Wt.sibling=jo,Wt=jo,Ze=Yt}if(Lt.done)return n(X,Ze),Nt&&ji(X,Mt),tt;if(Ze===null){for(;!Lt.done;Mt++,Lt=G.next())Lt=be(X,Lt.value,xe),Lt!==null&&(O=s(Lt,O,Mt),Wt===null?tt=Lt:Wt.sibling=Lt,Wt=Lt);return Nt&&ji(X,Mt),tt}for(Ze=l(Ze);!Lt.done;Mt++,Lt=G.next())Lt=se(Ze,X,Mt,Lt.value,xe),Lt!==null&&(e&&Lt.alternate!==null&&Ze.delete(Lt.key===null?Mt:Lt.key),O=s(Lt,O,Mt),Wt===null?tt=Lt:Wt.sibling=Lt,Wt=Lt);return e&&Ze.forEach(function(jg){return t(X,jg)}),Nt&&ji(X,Mt),tt}function an(X,O,G,xe){if(typeof G=="object"&&G!==null&&G.type===W&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case oe:e:{for(var tt=G.key;O!==null;){if(O.key===tt){if(tt=G.type,tt===W){if(O.tag===7){n(X,O.sibling),xe=a(O,G.props.children),xe.return=X,X=xe;break e}}else if(O.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===ne&&Ca(tt)===O.type){n(X,O.sibling),xe=a(O,G.props),Wl(xe,G),xe.return=X,X=xe;break e}n(X,O);break}else t(X,O);O=O.sibling}G.type===W?(xe=Ti(G.props.children,X.mode,xe,G.key),xe.return=X,X=xe):(xe=va(G.type,G.key,G.props,null,X.mode,xe),Wl(xe,G),xe.return=X,X=xe)}return p(X);case P:e:{for(tt=G.key;O!==null;){if(O.key===tt)if(O.tag===4&&O.stateNode.containerInfo===G.containerInfo&&O.stateNode.implementation===G.implementation){n(X,O.sibling),xe=a(O,G.children||[]),xe.return=X,X=xe;break e}else{n(X,O);break}else t(X,O);O=O.sibling}xe=ws(G,X.mode,xe),xe.return=X,X=xe}return p(X);case ne:return G=Ca(G),an(X,O,G,xe)}if(lt(G))return Ge(X,O,G,xe);if(Xe(G)){if(tt=Xe(G),typeof tt!="function")throw Error(f(150));return G=tt.call(G),it(X,O,G,xe)}if(typeof G.then=="function")return an(X,O,Di(G),xe);if(G.$$typeof===D)return an(X,O,$o(X,G),xe);Lo(X,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,O!==null&&O.tag===6?(n(X,O.sibling),xe=a(O,G),xe.return=X,X=xe):(n(X,O),xe=Ss(G,X.mode,xe),xe.return=X,X=xe),p(X)):n(X,O)}return function(X,O,G,xe){try{co=0;var tt=an(X,O,G,xe);return yl=null,tt}catch(Ze){if(Ze===ci||Ze===Wi)throw Ze;var Wt=tl(29,Ze,null,X.mode);return Wt.lanes=xe,Wt.return=X,Wt}finally{}}}var wn=jr(!0),za=jr(!1),di=!1;function Go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function kl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ft&2)!==0){var a=l.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),l.pending=t,t=xa(e),ga(e,null,n),t}return ms(e,l,t,n),xa(e)}function Ai(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Gs(e,n)}}function zr(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var p={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?a=s=p:s=s.next=p,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:l.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Rs=!1;function Ra(){if(Rs){var e=ri;if(e!==null)throw e}}function Fo(e,t,n,l){Rs=!1;var a=e.updateQueue;di=!1;var s=a.firstBaseUpdate,p=a.lastBaseUpdate,b=a.shared.pending;if(b!==null){a.shared.pending=null;var A=b,F=A.next;A.next=null,p===null?s=F:p.next=F,p=A;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,b=ue.lastBaseUpdate,b!==p&&(b===null?ue.firstBaseUpdate=F:b.next=F,ue.lastBaseUpdate=A))}if(s!==null){var be=a.baseState;p=0,ue=F=A=null,b=s;do{var Q=b.lane&-536870913,se=Q!==b.lane;if(se?($t&Q)===Q:(l&Q)===Q){Q!==0&&Q===ja&&(Rs=!0),ue!==null&&(ue=ue.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ge=e,it=b;Q=t;var an=n;switch(it.tag){case 1:if(Ge=it.payload,typeof Ge=="function"){be=Ge.call(an,be,Q);break e}be=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=it.payload,Q=typeof Ge=="function"?Ge.call(an,be,Q):Ge,Q==null)break e;be=K({},be,Q);break e;case 2:di=!0}}Q=b.callback,Q!==null&&(e.flags|=64,se&&(e.flags|=8192),se=a.callbacks,se===null?a.callbacks=[Q]:se.push(Q))}else se={lane:Q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ue===null?(F=ue=se,A=be):ue=ue.next=se,p|=Q;if(b=b.next,b===null){if(b=a.shared.pending,b===null)break;se=b,b=se.next,se.next=null,a.lastBaseUpdate=se,a.shared.pending=null}}while(!0);ue===null&&(A=be),a.baseState=A,a.firstBaseUpdate=F,a.lastBaseUpdate=ue,s===null&&(a.shared.lanes=0),ho|=p,e.lanes=p,e.memoizedState=be}}function dc(e,t){if(typeof e!="function")throw Error(f(191,e));e.call(t)}function Rr(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)dc(n[e],t)}var Fi=M(null),uo=M(0);function fc(e,t){e=Ba,I(uo,e),I(Fi,t),Ba=e|t.baseLanes}function Ds(){I(uo,Ba),I(Fi,Fi.current)}function Da(){Ba=uo.current,R(Fi),R(uo)}var _n=M(null),il=null;function fi(e){var t=e.alternate;I(o,o.current&1),I(_n,e),il===null&&(t===null||Fi.current!==null||t.memoizedState!==null)&&(il=e)}function qo(e){I(o,o.current),I(_n,e),il===null&&(il=e)}function pc(e){e.tag===22?(I(o,o.current),I(_n,e),il===null&&(il=e)):Ke()}function Ke(){I(o,o.current),I(_n,_n.current)}function vl(e){R(_n),il===e&&(il=null),R(o)}var o=M(0);function r(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||sd(n)||rd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var x=0,y=null,S=null,m=null,h=!1,w=!1,k=!1,z=0,re=0,Y=null,ve=0;function L(){throw Error(f(321))}function ie(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fn(e[n],t[n]))return!1;return!0}function ee(e,t,n,l,a,s){return x=s,y=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,V.H=e===null||e.memoizedState===null?Qd:vu,k=!1,s=n(l,a),k=!1,w&&(s=Se(t,n,l,a)),q(e),s}function q(e){V.H=Ar;var t=S!==null&&S.next!==null;if(x=0,m=S=y=null,h=!1,re=0,Y=null,t)throw Error(f(300));e===null||Bn||(e=e.dependencies,e!==null&&Xl(e)&&(Bn=!0))}function Se(e,t,n,l){y=e;var a=0;do{if(w&&(Y=null),re=0,w=!1,25<=a)throw Error(f(301));if(a+=1,m=S=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}V.H=Kd,s=t(n,l)}while(w);return s}function pe(){var e=V.H,t=e.useState()[0];return t=typeof t.then=="function"?N(t):t,e=e.useState()[0],(S!==null?S.memoizedState:null)!==e&&(y.flags|=1024),t}function ye(){var e=z!==0;return z=0,e}function je(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ce(e){if(h){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}h=!1}x=0,m=S=y=null,w=!1,re=z=0,Y=null}function Te(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return m===null?y.memoizedState=m=e:m=m.next=e,m}function de(){if(S===null){var e=y.alternate;e=e!==null?e.memoizedState:null}else e=S.next;var t=m===null?y.memoizedState:m.next;if(t!==null)m=t,S=e;else{if(e===null)throw y.alternate===null?Error(f(467)):Error(f(310));S=e,e={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null},m===null?y.memoizedState=m=e:m=m.next=e}return m}function $(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function N(e){var t=re;return re+=1,Y===null&&(Y=[]),e=uc(Y,e,t),t=y,(m===null?t.memoizedState:m.next)===null&&(t=t.alternate,V.H=t===null||t.memoizedState===null?Qd:vu),e}function le(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return N(e);if(e.$$typeof===D)return hn(e)}throw Error(f(438,String(e)))}function he(e){var t=null,n=y.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=y.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=$(),y.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=nt;return t.index++,n}function Re(e,t){return typeof t=="function"?t(e):t}function He(e){var t=de();return We(t,S,e)}function We(e,t,n){var l=e.queue;if(l===null)throw Error(f(311));l.lastRenderedReducer=n;var a=e.baseQueue,s=l.pending;if(s!==null){if(a!==null){var p=a.next;a.next=s.next,s.next=p}t.baseQueue=a=s,l.pending=null}if(s=e.baseState,a===null)e.memoizedState=s;else{t=a.next;var b=p=null,A=null,F=t,ue=!1;do{var be=F.lane&-536870913;if(be!==F.lane?($t&be)===be:(x&be)===be){var Q=F.revertLane;if(Q===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),be===ja&&(ue=!0);else if((x&Q)===Q){F=F.next,Q===ja&&(ue=!0);continue}else be={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},A===null?(b=A=be,p=s):A=A.next=be,y.lanes|=Q,ho|=Q;be=F.action,k&&n(s,be),s=F.hasEagerState?F.eagerState:n(s,be)}else Q={lane:be,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},A===null?(b=A=Q,p=s):A=A.next=Q,y.lanes|=be,ho|=be;F=F.next}while(F!==null&&F!==t);if(A===null?p=s:A.next=b,!Fn(s,e.memoizedState)&&(Bn=!0,ue&&(n=ri,n!==null)))throw n;e.memoizedState=s,e.baseState=p,e.baseQueue=A,l.lastRenderedState=s}return a===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ie(e){var t=de(),n=t.queue;if(n===null)throw Error(f(311));n.lastRenderedReducer=e;var l=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var p=a=a.next;do s=e(s,p.action),p=p.next;while(p!==a);Fn(s,t.memoizedState)||(Bn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function st(e,t,n){var l=y,a=de(),s=Nt;if(s){if(n===void 0)throw Error(f(407));n=n()}else n=t();var p=!Fn((S||a).memoizedState,n);if(p&&(a.memoizedState=n,Bn=!0),a=a.queue,fu(jt.bind(null,l,a,e),[e]),a.getSnapshot!==t||p||m!==null&&m.memoizedState.tag&1){if(l.flags|=2048,As(9,{destroy:void 0},gt.bind(null,l,a,n,t),null),sn===null)throw Error(f(349));s||(x&127)!==0||rt(l,t,n)}return n}function rt(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=y.updateQueue,t===null?(t=$(),y.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gt(e,t,n,l){t.value=n,t.getSnapshot=l,Pe(t)&&Je(e)}function jt(e,t,n){return n(function(){Pe(t)&&Je(e)})}function Pe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fn(e,n)}catch{return!0}}function Je(e){var t=mi(e,2);t!==null&&Bl(t,e,2)}function Ct(e){var t=Te();if(typeof e=="function"){var n=e;if(e=n(),k){Ol(!0);try{n()}finally{Ol(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Re,lastRenderedState:e},t}function Xt(e,t,n,l){return e.baseState=n,We(e,S,typeof l=="function"?l:Re)}function nn(e,t,n,l,a){if(xc(e))throw Error(f(485));if(e=t.action,e!==null){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){s.listeners.push(p)}};V.T!==null?n(!0):s.isTransition=!1,l(s),n=t.pending,n===null?(s.next=t.pending=s,gn(t,s)):(s.next=n.next,t.pending=n.next=s)}}function gn(e,t){var n=t.action,l=t.payload,a=e.state;if(t.isTransition){var s=V.T,p={};V.T=p;try{var b=n(a,l),A=V.S;A!==null&&A(p,b),dn(e,t,b)}catch(F){Ll(e,t,F)}finally{s!==null&&p.types!==null&&(s.types=p.types),V.T=s}}else try{s=n(a,l),dn(e,t,s)}catch(F){Ll(e,t,F)}}function dn(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){xt(e,t,l)},function(l){return Ll(e,t,l)}):xt(e,t,n)}function xt(e,t,n){t.status="fulfilled",t.value=n,pi(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,gn(e,n)))}function Ll(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,pi(t),t=t.next;while(t!==l)}e.action=null}function pi(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function bl(e,t){return t}function Ad(e,t){if(Nt){var n=sn.formState;if(n!==null){e:{var l=y;if(Nt){if(Zt){t:{for(var a=Zt,s=nl;a.nodeType!==8;){if(!s){a=null;break t}if(a=hi(a.nextSibling),a===null){a=null;break t}}s=a.data,a=s==="F!"||s==="F"?a:null}if(a){Zt=hi(a.nextSibling),l=a.data==="F!";break e}}ll(l)}l=!1}l&&(t=n[0])}}return n=Te(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:t},n.queue=l,n=Fd.bind(null,y,l),l.dispatch=n,l=Ct(!1),s=yu.bind(null,y,!1,l.queue),l=Te(),a={state:t,dispatch:null,action:e,pending:null},l.queue=a,n=nn.bind(null,y,a,s,n),a.dispatch=n,l.memoizedState=e,[t,n,!1]}function kd(e){var t=de();return Nd(t,S,e)}function Nd(e,t,n){if(t=We(e,t,bl)[0],e=He(Re)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=N(t)}catch(p){throw p===ci?Wi:p}else l=t;t=de();var a=t.queue,s=a.dispatch;return n!==t.memoizedState&&(y.flags|=2048,As(9,{destroy:void 0},yh.bind(null,a,n),null)),[l,s,e]}function yh(e,t){e.action=t}function Md(e){var t=de(),n=S;if(n!==null)return Nd(t,n,e);de(),t=t.memoizedState,n=de();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function As(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=y.updateQueue,t===null&&(t=$(),y.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Ud(){return de().memoizedState}function hc(e,t,n,l){var a=Te();y.flags|=e,a.memoizedState=As(1|t,{destroy:void 0},n,l===void 0?null:l)}function gc(e,t,n,l){var a=de();l=l===void 0?null:l;var s=a.memoizedState.inst;S!==null&&l!==null&&ie(l,S.memoizedState.deps)?a.memoizedState=As(t,s,n,l):(y.flags|=e,a.memoizedState=As(1|t,s,n,l))}function _d(e,t){hc(8390656,8,e,t)}function fu(e,t){gc(2048,8,e,t)}function vh(e){y.flags|=4;var t=y.updateQueue;if(t===null)t=$(),y.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Bd(e){var t=de().memoizedState;return vh({ref:t,nextImpl:e}),function(){if((Ft&2)!==0)throw Error(f(440));return t.impl.apply(void 0,arguments)}}function Od(e,t){return gc(4,2,e,t)}function Vd(e,t){return gc(4,4,e,t)}function Id(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hd(e,t,n){n=n!=null?n.concat([e]):null,gc(4,4,Id.bind(null,t,e),n)}function pu(){}function Ed(e,t){var n=de();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&ie(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function $d(e,t){var n=de();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&ie(t,l[1]))return l[0];if(l=e(),k){Ol(!0);try{e()}finally{Ol(!1)}}return n.memoizedState=[l,t],l}function hu(e,t,n){return n===void 0||(x&1073741824)!==0&&($t&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Pf(),y.lanes|=e,ho|=e,n)}function Yd(e,t,n,l){return Fn(n,t)?n:Fi.current!==null?(e=hu(e,n,l),Fn(e,t)||(Bn=!0),e):(x&42)===0||(x&1073741824)!==0&&($t&261930)===0?(Bn=!0,e.memoizedState=n):(e=Pf(),y.lanes|=e,ho|=e,t)}function Pd(e,t,n,l,a){var s=J.p;J.p=s!==0&&8>s?s:8;var p=V.T,b={};V.T=b,yu(e,!1,t,n);try{var A=a(),F=V.S;if(F!==null&&F(b,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var ue=du(A,l);Dr(e,t,ue,ql(e))}else Dr(e,t,l,ql(e))}catch(be){Dr(e,t,{then:function(){},status:"rejected",reason:be},ql())}finally{J.p=s,p!==null&&b.types!==null&&(p.types=b.types),V.T=p}}function bh(){}function gu(e,t,n,l){if(e.tag!==5)throw Error(f(476));var a=Xd(e).queue;Pd(e,a,t,Ne,n===null?bh:function(){return Wd(e),n(l)})}function Xd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Re,lastRenderedState:Ne},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Re,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Wd(e){var t=Xd(e);t.next===null&&(t=e.alternate.memoizedState),Dr(e,t.next.queue,{},ql())}function xu(){return hn(Wr)}function Ld(){return de().memoizedState}function Gd(){return de().memoizedState}function mh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ql();e=kl(n);var l=Gi(t,e,n);l!==null&&(Bl(l,t,n),Ai(l,t,n)),t={cache:mr()},e.payload=t;return}t=t.return}}function Sh(e,t,n){var l=ql();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},xc(e)?qd(t,n):(n=io(e,t,n,l),n!==null&&(Bl(n,e,l),Zd(n,t,l)))}function Fd(e,t,n){var l=ql();Dr(e,t,n,l)}function Dr(e,t,n,l){var a={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(xc(e))qd(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var p=t.lastRenderedState,b=s(p,n);if(a.hasEagerState=!0,a.eagerState=b,Fn(b,p))return ms(e,t,a,0),sn===null&&Tt(),!1}catch{}finally{}if(n=io(e,t,a,l),n!==null)return Bl(n,e,l),Zd(n,t,l),!0}return!1}function yu(e,t,n,l){if(l={lane:2,revertLane:qu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xc(e)){if(t)throw Error(f(479))}else t=io(e,n,l,2),t!==null&&Bl(t,e,2)}function xc(e){var t=e.alternate;return e===y||t!==null&&t===y}function qd(e,t){w=h=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zd(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Gs(e,n)}}var Ar={readContext:hn,use:le,useCallback:L,useContext:L,useEffect:L,useImperativeHandle:L,useLayoutEffect:L,useInsertionEffect:L,useMemo:L,useReducer:L,useRef:L,useState:L,useDebugValue:L,useDeferredValue:L,useTransition:L,useSyncExternalStore:L,useId:L,useHostTransitionStatus:L,useFormState:L,useActionState:L,useOptimistic:L,useMemoCache:L,useCacheRefresh:L};Ar.useEffectEvent=L;var Qd={readContext:hn,use:le,useCallback:function(e,t){return Te().memoizedState=[e,t===void 0?null:t],e},useContext:hn,useEffect:_d,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,hc(4194308,4,Id.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hc(4194308,4,e,t)},useInsertionEffect:function(e,t){hc(4,2,e,t)},useMemo:function(e,t){var n=Te();t=t===void 0?null:t;var l=e();if(k){Ol(!0);try{e()}finally{Ol(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=Te();if(n!==void 0){var a=n(t);if(k){Ol(!0);try{n(t)}finally{Ol(!1)}}}else a=t;return l.memoizedState=l.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},l.queue=e,e=e.dispatch=Sh.bind(null,y,e),[l.memoizedState,e]},useRef:function(e){var t=Te();return e={current:e},t.memoizedState=e},useState:function(e){e=Ct(e);var t=e.queue,n=Fd.bind(null,y,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:pu,useDeferredValue:function(e,t){var n=Te();return hu(n,e,t)},useTransition:function(){var e=Ct(!1);return e=Pd.bind(null,y,e.queue,!0,!1),Te().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=y,a=Te();if(Nt){if(n===void 0)throw Error(f(407));n=n()}else{if(n=t(),sn===null)throw Error(f(349));($t&127)!==0||rt(l,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,_d(jt.bind(null,l,s,e),[e]),l.flags|=2048,As(9,{destroy:void 0},gt.bind(null,l,s,n,t),null),n},useId:function(){var e=Te(),t=sn.identifierPrefix;if(Nt){var n=oi,l=ai;n=(l&~(1<<32-An(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=z++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=ve++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:xu,useFormState:Ad,useActionState:Ad,useOptimistic:function(e){var t=Te();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=yu.bind(null,y,!0,n),n.dispatch=t,[e,t]},useMemoCache:he,useCacheRefresh:function(){return Te().memoizedState=mh.bind(null,y)},useEffectEvent:function(e){var t=Te(),n={impl:e};return t.memoizedState=n,function(){if((Ft&2)!==0)throw Error(f(440));return n.impl.apply(void 0,arguments)}}},vu={readContext:hn,use:le,useCallback:Ed,useContext:hn,useEffect:fu,useImperativeHandle:Hd,useInsertionEffect:Od,useLayoutEffect:Vd,useMemo:$d,useReducer:He,useRef:Ud,useState:function(){return He(Re)},useDebugValue:pu,useDeferredValue:function(e,t){var n=de();return Yd(n,S.memoizedState,e,t)},useTransition:function(){var e=He(Re)[0],t=de().memoizedState;return[typeof e=="boolean"?e:N(e),t]},useSyncExternalStore:st,useId:Ld,useHostTransitionStatus:xu,useFormState:kd,useActionState:kd,useOptimistic:function(e,t){var n=de();return Xt(n,S,e,t)},useMemoCache:he,useCacheRefresh:Gd};vu.useEffectEvent=Bd;var Kd={readContext:hn,use:le,useCallback:Ed,useContext:hn,useEffect:fu,useImperativeHandle:Hd,useInsertionEffect:Od,useLayoutEffect:Vd,useMemo:$d,useReducer:Ie,useRef:Ud,useState:function(){return Ie(Re)},useDebugValue:pu,useDeferredValue:function(e,t){var n=de();return S===null?hu(n,e,t):Yd(n,S.memoizedState,e,t)},useTransition:function(){var e=Ie(Re)[0],t=de().memoizedState;return[typeof e=="boolean"?e:N(e),t]},useSyncExternalStore:st,useId:Ld,useHostTransitionStatus:xu,useFormState:Md,useActionState:Md,useOptimistic:function(e,t){var n=de();return S!==null?Xt(n,S,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:he,useCacheRefresh:Gd};Kd.useEffectEvent=Bd;function bu(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:K({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mu={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=ql(),a=kl(l);a.payload=t,n!=null&&(a.callback=n),t=Gi(e,a,l),t!==null&&(Bl(t,e,l),Ai(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=ql(),a=kl(l);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Gi(e,a,l),t!==null&&(Bl(t,e,l),Ai(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ql(),l=kl(n);l.tag=2,t!=null&&(l.callback=t),t=Gi(e,l,n),t!==null&&(Bl(t,e,n),Ai(t,e,n))}};function Jd(e,t,n,l,a,s,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,p):t.prototype&&t.prototype.isPureReactComponent?!Cl(n,l)||!Cl(a,s):!0}function ef(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&mu.enqueueReplaceState(t,t.state,null)}function Zo(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=K({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}function tf(e){ha(e)}function nf(e){console.error(e)}function lf(e){ha(e)}function yc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function af(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Su(e,t,n){return n=kl(n),n.tag=3,n.payload={element:null},n.callback=function(){yc(e,t)},n}function of(e){return e=kl(e),e.tag=3,e}function sf(e,t,n,l){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var s=l.value;e.payload=function(){return a(s)},e.callback=function(){af(t,n,l)}}var p=n.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){af(t,n,l),typeof a!="function"&&(go===null?go=new Set([this]):go.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function wh(e,t,n,l,a){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Ta(t,n,a,!0),n=_n.current,n!==null){switch(n.tag){case 31:case 13:return il===null?Ac():n.alternate===null&&Tn===0&&(Tn=3),n.flags&=-257,n.flags|=65536,n.lanes=a,l===ui?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),Lu(e,l,a)),!1;case 22:return n.flags|=65536,l===ui?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),Lu(e,l,a)),!1}throw Error(f(435,n.tag))}return Lu(e,l,a),Ac(),!1}if(Nt)return t=_n.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=a,l!==oo&&(e=Error(f(422),{cause:l}),Ho(zl(e,n)))):(l!==oo&&(t=Error(f(423),{cause:l}),Ho(zl(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,l=zl(l,n),a=Su(e.stateNode,l,a),zr(e,a),Tn!==4&&(Tn=2)),!1;var s=Error(f(520),{cause:l});if(s=zl(s,n),Vr===null?Vr=[s]:Vr.push(s),Tn!==4&&(Tn=2),t===null)return!0;l=zl(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Su(n.stateNode,l,e),zr(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(go===null||!go.has(s))))return n.flags|=65536,a&=-a,n.lanes|=a,a=of(a),sf(a,e,n,l),zr(n,a),!1}n=n.return}while(n!==null);return!1}var wu=Error(f(461)),Bn=!1;function al(e,t,n,l){t.child=e===null?za(t,null,n,l):wn(t,e.child,n,l)}function rf(e,t,n,l,a){n=n.render;var s=t.ref;if("ref"in l){var p={};for(var b in l)b!=="ref"&&(p[b]=l[b])}else p=l;return Pi(t),l=ee(e,t,n,p,s,a),b=ye(),e!==null&&!Bn?(je(e,t,a),Aa(e,t,a)):(Nt&&b&&xr(t),t.flags|=1,al(e,t,l,a),t.child)}function cf(e,t,n,l,a){if(e===null){var s=n.type;return typeof s=="function"&&!$i(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,uf(e,t,s,l,a)):(e=va(n.type,null,l,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!ku(e,a)){var p=s.memoizedProps;if(n=n.compare,n=n!==null?n:Cl,n(p,l)&&e.ref===t.ref)return Aa(e,t,a)}return t.flags|=1,e=El(s,l),e.ref=t.ref,e.return=t,t.child=e}function uf(e,t,n,l,a){if(e!==null){var s=e.memoizedProps;if(Cl(s,l)&&e.ref===t.ref)if(Bn=!1,t.pendingProps=l=s,ku(e,a))(e.flags&131072)!==0&&(Bn=!0);else return t.lanes=e.lanes,Aa(e,t,a)}return Tu(e,t,n,l,a)}function df(e,t,n,l){var a=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(l=t.child=e.child,a=0;l!==null;)a=a|l.lanes|l.childLanes,l=l.sibling;l=a&~s}else l=0,t.child=null;return ff(e,t,s,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yo(t,s!==null?s.cachePool:null),s!==null?fc(t,s):Ds(),pc(t);else return l=t.lanes=536870912,ff(e,t,s!==null?s.baseLanes|n:n,n,l)}else s!==null?(Yo(t,s.cachePool),fc(t,s),Ke(),t.memoizedState=null):(e!==null&&Yo(t,null),Ds(),Ke());return al(e,t,a,n),t.child}function kr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ff(e,t,n,l,a){var s=zs();return s=s===null?null:{parent:Sn._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Yo(t,null),Ds(),pc(t),e!==null&&Ta(e,t,l,!0),t.childLanes=a,null}function vc(e,t){return t=mc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function pf(e,t,n){return wn(t,e.child,null,n),e=vc(t,t.pendingProps),e.flags|=2,vl(t),t.memoizedState=null,e}function Th(e,t,n){var l=t.pendingProps,a=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Nt){if(l.mode==="hidden")return e=vc(t,l),t.lanes=536870912,kr(null,e);if(qo(t),(e=Zt)?(e=Cp(e,nl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Yi!==null?{id:ai,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},n=Io(e),n.return=t,t.child=n,yn=t,Zt=null)):e=null,e===null)throw ll(t);return t.lanes=536870912,null}return vc(t,l)}var s=e.memoizedState;if(s!==null){var p=s.dehydrated;if(qo(t),a)if(t.flags&256)t.flags&=-257,t=pf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(f(558));else if(Bn||Ta(e,t,n,!1),a=(n&e.childLanes)!==0,Bn||a){if(l=sn,l!==null&&(p=Vl(l,n),p!==0&&p!==s.retryLane))throw s.retryLane=p,mi(e,p),Bl(l,e,p),wu;Ac(),t=pf(e,t,n)}else e=s.treeContext,Zt=hi(p.nextSibling),yn=t,Nt=!0,$l=null,nl=!1,e!==null&&Sa(t,e),t=vc(t,l),t.flags|=4096;return t}return e=El(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function bc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(f(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Tu(e,t,n,l,a){return Pi(t),n=ee(e,t,n,l,void 0,a),l=ye(),e!==null&&!Bn?(je(e,t,a),Aa(e,t,a)):(Nt&&l&&xr(t),t.flags|=1,al(e,t,n,a),t.child)}function hf(e,t,n,l,a,s){return Pi(t),t.updateQueue=null,n=Se(t,l,n,a),q(e),l=ye(),e!==null&&!Bn?(je(e,t,s),Aa(e,t,s)):(Nt&&l&&xr(t),t.flags|=1,al(e,t,n,s),t.child)}function gf(e,t,n,l,a){if(Pi(t),t.stateNode===null){var s=Si,p=n.contextType;typeof p=="object"&&p!==null&&(s=hn(p)),s=new n(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=mu,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},Go(t),p=n.contextType,s.context=typeof p=="object"&&p!==null?hn(p):Si,s.state=t.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(bu(t,n,p,l),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(p=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),p!==s.state&&mu.enqueueReplaceState(s,s.state,null),Fo(t,l,s,a),Ra(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var b=t.memoizedProps,A=Zo(n,b);s.props=A;var F=s.context,ue=n.contextType;p=Si,typeof ue=="object"&&ue!==null&&(p=hn(ue));var be=n.getDerivedStateFromProps;ue=typeof be=="function"||typeof s.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ue||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(b||F!==p)&&ef(t,s,l,p),di=!1;var Q=t.memoizedState;s.state=Q,Fo(t,l,s,a),Ra(),F=t.memoizedState,b||Q!==F||di?(typeof be=="function"&&(bu(t,n,be,l),F=t.memoizedState),(A=di||Jd(t,n,A,l,Q,F,p))?(ue||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=F),s.props=l,s.state=F,s.context=p,l=A):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,Cr(e,t),p=t.memoizedProps,ue=Zo(n,p),s.props=ue,be=t.pendingProps,Q=s.context,F=n.contextType,A=Si,typeof F=="object"&&F!==null&&(A=hn(F)),b=n.getDerivedStateFromProps,(F=typeof b=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(p!==be||Q!==A)&&ef(t,s,l,A),di=!1,Q=t.memoizedState,s.state=Q,Fo(t,l,s,a),Ra();var se=t.memoizedState;p!==be||Q!==se||di||e!==null&&e.dependencies!==null&&Xl(e.dependencies)?(typeof b=="function"&&(bu(t,n,b,l),se=t.memoizedState),(ue=di||Jd(t,n,ue,l,Q,se,A)||e!==null&&e.dependencies!==null&&Xl(e.dependencies))?(F||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,se,A),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,se,A)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||p===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=se),s.props=l,s.state=se,s.context=A,l=ue):(typeof s.componentDidUpdate!="function"||p===e.memoizedProps&&Q===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&Q===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,bc(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=wn(t,e.child,null,a),t.child=wn(t,null,n,a)):al(e,t,n,a),t.memoizedState=s.state,e=t.child):e=Aa(e,t,a),e}function xf(e,t,n,l){return Ci(),t.flags|=256,al(e,t,n,l),t.child}var ju={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cu(e){return{baseLanes:e,cachePool:wr()}}function zu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Fl),e}function yf(e,t,n){var l=t.pendingProps,a=!1,s=(t.flags&128)!==0,p;if((p=s)||(p=e!==null&&e.memoizedState===null?!1:(o.current&2)!==0),p&&(a=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Nt){if(a?fi(t):Ke(),(e=Zt)?(e=Cp(e,nl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Yi!==null?{id:ai,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},n=Io(e),n.return=t,t.child=n,yn=t,Zt=null)):e=null,e===null)throw ll(t);return rd(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,a?(Ke(),a=t.mode,b=mc({mode:"hidden",children:b},a),l=Ti(l,a,n,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=Cu(n),l.childLanes=zu(e,p,n),t.memoizedState=ju,kr(null,l)):(fi(t),Ru(t,b))}var A=e.memoizedState;if(A!==null&&(b=A.dehydrated,b!==null)){if(s)t.flags&256?(fi(t),t.flags&=-257,t=Du(e,t,n)):t.memoizedState!==null?(Ke(),t.child=e.child,t.flags|=128,t=null):(Ke(),b=l.fallback,a=t.mode,l=mc({mode:"visible",children:l.children},a),b=Ti(b,a,n,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,wn(t,e.child,null,n),l=t.child,l.memoizedState=Cu(n),l.childLanes=zu(e,p,n),t.memoizedState=ju,t=kr(null,l));else if(fi(t),rd(b)){if(p=b.nextSibling&&b.nextSibling.dataset,p)var F=p.dgst;p=F,l=Error(f(419)),l.stack="",l.digest=p,Ho({value:l,source:null,stack:null}),t=Du(e,t,n)}else if(Bn||Ta(e,t,n,!1),p=(n&e.childLanes)!==0,Bn||p){if(p=sn,p!==null&&(l=Vl(p,n),l!==0&&l!==A.retryLane))throw A.retryLane=l,mi(e,l),Bl(p,e,l),wu;sd(b)||Ac(),t=Du(e,t,n)}else sd(b)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,Zt=hi(b.nextSibling),yn=t,Nt=!0,$l=null,nl=!1,e!==null&&Sa(t,e),t=Ru(t,l.children),t.flags|=4096);return t}return a?(Ke(),b=l.fallback,a=t.mode,A=e.child,F=A.sibling,l=El(A,{mode:"hidden",children:l.children}),l.subtreeFlags=A.subtreeFlags&65011712,F!==null?b=El(F,b):(b=Ti(b,a,n,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,kr(null,l),l=t.child,b=e.child.memoizedState,b===null?b=Cu(n):(a=b.cachePool,a!==null?(A=Sn._currentValue,a=a.parent!==A?{parent:A,pool:A}:a):a=wr(),b={baseLanes:b.baseLanes|n,cachePool:a}),l.memoizedState=b,l.childLanes=zu(e,p,n),t.memoizedState=ju,kr(e.child,l)):(fi(t),n=e.child,e=n.sibling,n=El(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=n,t.memoizedState=null,n)}function Ru(e,t){return t=mc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function mc(e,t){return e=tl(22,e,null,t),e.lanes=0,e}function Du(e,t,n){return wn(t,e.child,null,n),e=Ru(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vf(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Eo(e.return,t,n)}function Au(e,t,n,l,a,s){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:a,treeForkCount:s}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=n,p.tailMode=a,p.treeForkCount=s)}function bf(e,t,n){var l=t.pendingProps,a=l.revealOrder,s=l.tail;l=l.children;var p=o.current,b=(p&2)!==0;if(b?(p=p&1|2,t.flags|=128):p&=1,I(o,p),al(e,t,l,n),l=Nt?gl:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vf(e,n,t);else if(e.tag===19)vf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&r(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Au(t,!1,a,n,s,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&r(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Au(t,!0,n,null,s,l);break;case"together":Au(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Aa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ho|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ta(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(f(153));if(t.child!==null){for(e=t.child,n=El(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=El(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ku(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Xl(e)))}function jh(e,t,n){switch(t.tag){case 3:Ve(t,t.stateNode.containerInfo),si(t,Sn,e.memoizedState.cache),Ci();break;case 27:case 5:Ue(t);break;case 4:Ve(t,t.stateNode.containerInfo);break;case 10:si(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,qo(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(fi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?yf(e,t,n):(fi(t),e=Aa(e,t,n),e!==null?e.sibling:null);fi(t);break;case 19:var a=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Ta(e,t,n,!1),l=(n&t.childLanes)!==0),a){if(l)return bf(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),I(o,o.current),l)break;return null;case 22:return t.lanes=0,df(e,t,n,t.pendingProps);case 24:si(t,Sn,e.memoizedState.cache)}return Aa(e,t,n)}function mf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Bn=!0;else{if(!ku(e,n)&&(t.flags&128)===0)return Bn=!1,jh(e,t,n);Bn=(e.flags&131072)!==0}else Bn=!1,Nt&&(t.flags&1048576)!==0&&rc(t,gl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=Ca(t.elementType),t.type=e,typeof e=="function")$i(e)?(l=Zo(e,l),t.tag=1,t=gf(null,t,e,l,n)):(t.tag=0,t=Tu(null,t,e,l,n));else{if(e!=null){var a=e.$$typeof;if(a===U){t.tag=11,t=rf(null,t,e,l,n);break e}else if(a===g){t.tag=14,t=cf(null,t,e,l,n);break e}}throw t=vt(e)||e,Error(f(306,t,""))}}return t;case 0:return Tu(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,a=Zo(l,t.pendingProps),gf(e,t,l,a,n);case 3:e:{if(Ve(t,t.stateNode.containerInfo),e===null)throw Error(f(387));l=t.pendingProps;var s=t.memoizedState;a=s.element,Cr(e,t),Fo(t,l,null,n);var p=t.memoizedState;if(l=p.cache,si(t,Sn,l),l!==s.cache&&vr(t,[Sn],n,!0),Ra(),l=p.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=xf(e,t,l,n);break e}else if(l!==a){a=zl(Error(f(424)),t),Ho(a),t=xf(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Zt=hi(e.firstChild),yn=t,Nt=!0,$l=null,nl=!0,n=za(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ci(),l===a){t=Aa(e,t,n);break e}al(e,t,l,n)}t=t.child}return t;case 26:return bc(e,t),e===null?(n=Np(t.type,null,t.pendingProps,null))?t.memoizedState=n:Nt||(n=t.type,e=t.pendingProps,l=Oc(Me.current).createElement(n),l[kn]=t,l[vn]=e,ol(l,n,e),jn(l),t.stateNode=l):t.memoizedState=Np(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ue(t),e===null&&Nt&&(l=t.stateNode=Dp(t.type,t.pendingProps,Me.current),yn=t,nl=!0,a=Zt,bo(t.type)?(cd=a,Zt=hi(l.firstChild)):Zt=a),al(e,t,t.pendingProps.children,n),bc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Nt&&((a=l=Zt)&&(l=eg(l,t.type,t.pendingProps,nl),l!==null?(t.stateNode=l,yn=t,Zt=hi(l.firstChild),nl=!1,a=!0):a=!1),a||ll(t)),Ue(t),a=t.type,s=t.pendingProps,p=e!==null?e.memoizedProps:null,l=s.children,id(a,s)?l=null:p!==null&&id(a,p)&&(t.flags|=32),t.memoizedState!==null&&(a=ee(e,t,pe,null,null,n),Wr._currentValue=a),bc(e,t),al(e,t,l,n),t.child;case 6:return e===null&&Nt&&((e=n=Zt)&&(n=tg(n,t.pendingProps,nl),n!==null?(t.stateNode=n,yn=t,Zt=null,e=!0):e=!1),e||ll(t)),null;case 13:return yf(e,t,n);case 4:return Ve(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=wn(t,null,l,n):al(e,t,l,n),t.child;case 11:return rf(e,t,t.type,t.pendingProps,n);case 7:return al(e,t,t.pendingProps,n),t.child;case 8:return al(e,t,t.pendingProps.children,n),t.child;case 12:return al(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,si(t,t.type,l.value),al(e,t,l.children,n),t.child;case 9:return a=t.type._context,l=t.pendingProps.children,Pi(t),a=hn(a),l=l(a),t.flags|=1,al(e,t,l,n),t.child;case 14:return cf(e,t,t.type,t.pendingProps,n);case 15:return uf(e,t,t.type,t.pendingProps,n);case 19:return bf(e,t,n);case 31:return Th(e,t,n);case 22:return df(e,t,n,t.pendingProps);case 24:return Pi(t),l=hn(Sn),e===null?(a=zs(),a===null&&(a=sn,s=mr(),a.pooledCache=s,s.refCount++,s!==null&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:l,cache:a},Go(t),si(t,Sn,a)):((e.lanes&n)!==0&&(Cr(e,t),Fo(t,null,null,n),Ra()),a=e.memoizedState,s=t.memoizedState,a.parent!==l?(a={parent:l,cache:l},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),si(t,Sn,l)):(l=s.cache,si(t,Sn,l),l!==a.cache&&vr(t,[Sn],n,!0))),al(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(f(156,t.tag))}function ka(e){e.flags|=4}function Nu(e,t,n,l,a){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(a&335544128)===a)if(e.stateNode.complete)e.flags|=8192;else if(Gf())e.flags|=8192;else throw Li=ui,Po}else e.flags&=-16777217}function Sf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Op(t))if(Gf())e.flags|=8192;else throw Li=ui,Po}function Sc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ws():536870912,e.lanes|=t,Us|=t)}function Nr(e,t){if(!Nt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function fn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,l|=a.subtreeFlags&65011712,l|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,l|=a.subtreeFlags,l|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Ch(e,t,n){var l=t.pendingProps;switch(ma(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(t),null;case 1:return fn(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Pl(Sn),ge(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Zn(t)?ka(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,yr())),fn(t),null;case 26:var a=t.type,s=t.memoizedState;return e===null?(ka(t),s!==null?(fn(t),Sf(t,s)):(fn(t),Nu(t,a,null,l,n))):s?s!==e.memoizedState?(ka(t),fn(t),Sf(t,s)):(fn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ka(t),fn(t),Nu(t,a,e,l,n)),null;case 27:if(Ye(t),n=Me.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ka(t);else{if(!l){if(t.stateNode===null)throw Error(f(166));return fn(t),null}e=fe.current,Zn(t)?so(t):(e=Dp(a,l,n),t.stateNode=e,ka(t))}return fn(t),null;case 5:if(Ye(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ka(t);else{if(!l){if(t.stateNode===null)throw Error(f(166));return fn(t),null}if(s=fe.current,Zn(t))so(t);else{var p=Oc(Me.current);switch(s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?p.createElement("select",{is:l.is}):p.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?p.createElement(a,{is:l.is}):p.createElement(a)}}s[kn]=t,s[vn]=l;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=s;e:switch(ol(s,a,l),a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ka(t)}}return fn(t),Nu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ka(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(f(166));if(e=Me.current,Zn(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,a=yn,a!==null)switch(a.tag){case 27:case 5:l=a.memoizedProps}e[kn]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||yp(e.nodeValue,n)),e||ll(t,!0)}else e=Oc(e).createTextNode(l),e[kn]=t,t.stateNode=e}return fn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Zn(t),n!==null){if(e===null){if(!l)throw Error(f(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(557));e[kn]=t}else Ci(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;fn(t),e=!1}else n=yr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(vl(t),t):(vl(t),null);if((t.flags&128)!==0)throw Error(f(558))}return fn(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Zn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!a)throw Error(f(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(f(317));a[kn]=t}else Ci(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;fn(t),a=!1}else a=yr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(vl(t),t):(vl(t),null)}return vl(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,a=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(a=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==a&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Sc(t,t.updateQueue),fn(t),null);case 4:return ge(),e===null&&Ju(t.stateNode.containerInfo),fn(t),null;case 10:return Pl(t.type),fn(t),null;case 19:if(R(o),l=t.memoizedState,l===null)return fn(t),null;if(a=(t.flags&128)!==0,s=l.rendering,s===null)if(a)Nr(l,!1);else{if(Tn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=r(e),s!==null){for(t.flags|=128,Nr(l,!1),e=s.updateQueue,t.updateQueue=e,Sc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ya(n,e),n=n.sibling;return I(o,o.current&1|2),Nt&&ji(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Oe()>zc&&(t.flags|=128,a=!0,Nr(l,!1),t.lanes=4194304)}else{if(!a)if(e=r(s),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Sc(t,e),Nr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!Nt)return fn(t),null}else 2*Oe()-l.renderingStartTime>zc&&n!==536870912&&(t.flags|=128,a=!0,Nr(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Oe(),e.sibling=null,n=o.current,I(o,a?n&1|2:n&1),Nt&&ji(t,l.treeForkCount),e):(fn(t),null);case 22:case 23:return vl(t),Da(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(fn(t),t.subtreeFlags&6&&(t.flags|=8192)):fn(t),n=t.updateQueue,n!==null&&Sc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&R(Ri),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Pl(Sn),fn(t),null;case 25:return null;case 30:return null}throw Error(f(156,t.tag))}function zh(e,t){switch(ma(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pl(Sn),ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ye(t),null;case 31:if(t.memoizedState!==null){if(vl(t),t.alternate===null)throw Error(f(340));Ci()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vl(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(f(340));Ci()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return R(o),null;case 4:return ge(),null;case 10:return Pl(t.type),null;case 22:case 23:return vl(t),Da(),e!==null&&R(Ri),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Pl(Sn),null;case 25:return null;default:return null}}function wf(e,t){switch(ma(t),t.tag){case 3:Pl(Sn),ge();break;case 26:case 27:case 5:Ye(t);break;case 4:ge();break;case 31:t.memoizedState!==null&&vl(t);break;case 13:vl(t);break;case 19:R(o);break;case 10:Pl(t.type);break;case 22:case 23:vl(t),Da(),e!==null&&R(Ri);break;case 24:Pl(Sn)}}function Mr(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var a=l.next;n=a;do{if((n.tag&e)===e){l=void 0;var s=n.create,p=n.inst;l=s(),p.destroy=l}n=n.next}while(n!==a)}}catch(b){Kt(t,t.return,b)}}function fo(e,t,n){try{var l=t.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var s=a.next;l=s;do{if((l.tag&e)===e){var p=l.inst,b=p.destroy;if(b!==void 0){p.destroy=void 0,a=t;var A=n,F=b;try{F()}catch(ue){Kt(a,A,ue)}}}l=l.next}while(l!==s)}}catch(ue){Kt(t,t.return,ue)}}function Tf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Rr(t,n)}catch(l){Kt(e,e.return,l)}}}function jf(e,t,n){n.props=Zo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Kt(e,t,l)}}function Ur(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(a){Kt(e,t,a)}}function qi(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(a){Kt(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Kt(e,t,a)}else n.current=null}function Cf(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(a){Kt(e,e.return,a)}}function Mu(e,t,n){try{var l=e.stateNode;Fh(l,e.type,n,t),l[vn]=t}catch(a){Kt(e,e.return,a)}}function zf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&bo(e.type)||e.tag===4}function Uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&bo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _u(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=En));else if(l!==4&&(l===27&&bo(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(_u(e,t,n),e=e.sibling;e!==null;)_u(e,t,n),e=e.sibling}function wc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&bo(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(wc(e,t,n),e=e.sibling;e!==null;)wc(e,t,n),e=e.sibling}function Rf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ol(t,l,n),t[kn]=e,t[vn]=n}catch(s){Kt(e,e.return,s)}}var Na=!1,On=!1,Bu=!1,Df=typeof WeakSet=="function"?WeakSet:Set,Qn=null;function Rh(e,t){if(e=e.containerInfo,nd=Pc,e=oc(e),Ja(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var a=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var p=0,b=-1,A=-1,F=0,ue=0,be=e,Q=null;t:for(;;){for(var se;be!==n||a!==0&&be.nodeType!==3||(b=p+a),be!==s||l!==0&&be.nodeType!==3||(A=p+l),be.nodeType===3&&(p+=be.nodeValue.length),(se=be.firstChild)!==null;)Q=be,be=se;for(;;){if(be===e)break t;if(Q===n&&++F===a&&(b=p),Q===s&&++ue===l&&(A=p),(se=be.nextSibling)!==null)break;be=Q,Q=be.parentNode}be=se}n=b===-1||A===-1?null:{start:b,end:A}}else n=null}n=n||{start:0,end:0}}else n=null;for(ld={focusedElem:e,selectionRange:n},Pc=!1,Qn=t;Qn!==null;)if(t=Qn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qn=e;else for(;Qn!==null;){switch(t=Qn,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,a=s.memoizedProps,s=s.memoizedState,l=n.stateNode;try{var Ge=Zo(n.type,a);e=l.getSnapshotBeforeUpdate(Ge,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(it){Kt(n,n.return,it)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)od(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(f(163))}if(e=t.sibling,e!==null){e.return=t.return,Qn=e;break}Qn=t.return}}function Af(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Ua(e,n),l&4&&Mr(5,n);break;case 1:if(Ua(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(p){Kt(n,n.return,p)}else{var a=Zo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Kt(n,n.return,p)}}l&64&&Tf(n),l&512&&Ur(n,n.return);break;case 3:if(Ua(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Rr(e,t)}catch(p){Kt(n,n.return,p)}}break;case 27:t===null&&l&4&&Rf(n);case 26:case 5:Ua(e,n),t===null&&l&4&&Cf(n),l&512&&Ur(n,n.return);break;case 12:Ua(e,n);break;case 31:Ua(e,n),l&4&&Mf(e,n);break;case 13:Ua(e,n),l&4&&Uf(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Oh.bind(null,n),ng(e,n))));break;case 22:if(l=n.memoizedState!==null||Na,!l){t=t!==null&&t.memoizedState!==null||On,a=Na;var s=On;Na=l,(On=t)&&!s?_a(e,n,(n.subtreeFlags&8772)!==0):Ua(e,n),Na=a,On=s}break;case 30:break;default:Ua(e,n)}}function kf(e){var t=e.alternate;t!==null&&(e.alternate=null,kf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ui(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xn=null,Nl=!1;function Ma(e,t,n){for(n=n.child;n!==null;)Nf(e,t,n),n=n.sibling}function Nf(e,t,n){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Mi,n)}catch{}switch(n.tag){case 26:On||qi(n,t),Ma(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:On||qi(n,t);var l=xn,a=Nl;bo(n.type)&&(xn=n.stateNode,Nl=!1),Ma(e,t,n),Yr(n.stateNode),xn=l,Nl=a;break;case 5:On||qi(n,t);case 6:if(l=xn,a=Nl,xn=null,Ma(e,t,n),xn=l,Nl=a,xn!==null)if(Nl)try{(xn.nodeType===9?xn.body:xn.nodeName==="HTML"?xn.ownerDocument.body:xn).removeChild(n.stateNode)}catch(s){Kt(n,t,s)}else try{xn.removeChild(n.stateNode)}catch(s){Kt(n,t,s)}break;case 18:xn!==null&&(Nl?(e=xn,Tp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),$s(e)):Tp(xn,n.stateNode));break;case 4:l=xn,a=Nl,xn=n.stateNode.containerInfo,Nl=!0,Ma(e,t,n),xn=l,Nl=a;break;case 0:case 11:case 14:case 15:fo(2,n,t),On||fo(4,n,t),Ma(e,t,n);break;case 1:On||(qi(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&jf(n,t,l)),Ma(e,t,n);break;case 21:Ma(e,t,n);break;case 22:On=(l=On)||n.memoizedState!==null,Ma(e,t,n),On=l;break;default:Ma(e,t,n)}}function Mf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{$s(e)}catch(n){Kt(t,t.return,n)}}}function Uf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$s(e)}catch(n){Kt(t,t.return,n)}}function Dh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Df),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Df),t;default:throw Error(f(435,e.tag))}}function Tc(e,t){var n=Dh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var a=Vh.bind(null,e,l);l.then(a,a)}})}function Ml(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var a=n[l],s=e,p=t,b=p;e:for(;b!==null;){switch(b.tag){case 27:if(bo(b.type)){xn=b.stateNode,Nl=!1;break e}break;case 5:xn=b.stateNode,Nl=!1;break e;case 3:case 4:xn=b.stateNode.containerInfo,Nl=!0;break e}b=b.return}if(xn===null)throw Error(f(160));Nf(s,p,a),xn=null,Nl=!1,s=a.alternate,s!==null&&(s.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)_f(t,e),t=t.sibling}var ki=null;function _f(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ml(t,e),Ul(e),l&4&&(fo(3,e,e.return),Mr(3,e),fo(5,e,e.return));break;case 1:Ml(t,e),Ul(e),l&512&&(On||n===null||qi(n,n.return)),l&64&&Na&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var a=ki;if(Ml(t,e),Ul(e),l&512&&(On||n===null||qi(n,n.return)),l&4){var s=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(l){case"title":s=a.getElementsByTagName("title")[0],(!s||s[Jl]||s[kn]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=a.createElement(l),a.head.insertBefore(s,a.querySelector("head > title"))),ol(s,l,n),s[kn]=e,jn(s),l=s;break e;case"link":var p=_p("link","href",a).get(l+(n.href||""));if(p){for(var b=0;b<p.length;b++)if(s=p[b],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){p.splice(b,1);break t}}s=a.createElement(l),ol(s,l,n),a.head.appendChild(s);break;case"meta":if(p=_p("meta","content",a).get(l+(n.content||""))){for(b=0;b<p.length;b++)if(s=p[b],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){p.splice(b,1);break t}}s=a.createElement(l),ol(s,l,n),a.head.appendChild(s);break;default:throw Error(f(468,l))}s[kn]=e,jn(s),l=s}e.stateNode=l}else Bp(a,e.type,e.stateNode);else e.stateNode=Up(a,l,e.memoizedProps);else s!==l?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,l===null?Bp(a,e.type,e.stateNode):Up(a,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Mu(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ml(t,e),Ul(e),l&512&&(On||n===null||qi(n,n.return)),n!==null&&l&4&&Mu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ml(t,e),Ul(e),l&512&&(On||n===null||qi(n,n.return)),e.flags&32){a=e.stateNode;try{ei(a,"")}catch(Ge){Kt(e,e.return,Ge)}}l&4&&e.stateNode!=null&&(a=e.memoizedProps,Mu(e,a,n!==null?n.memoizedProps:a)),l&1024&&(Bu=!0);break;case 6:if(Ml(t,e),Ul(e),l&4){if(e.stateNode===null)throw Error(f(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(Ge){Kt(e,e.return,Ge)}}break;case 3:if(Hc=null,a=ki,ki=Vc(t.containerInfo),Ml(t,e),ki=a,Ul(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{$s(t.containerInfo)}catch(Ge){Kt(e,e.return,Ge)}Bu&&(Bu=!1,Bf(e));break;case 4:l=ki,ki=Vc(e.stateNode.containerInfo),Ml(t,e),Ul(e),ki=l;break;case 12:Ml(t,e),Ul(e);break;case 31:Ml(t,e),Ul(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Tc(e,l)));break;case 13:Ml(t,e),Ul(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Cc=Oe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Tc(e,l)));break;case 22:a=e.memoizedState!==null;var A=n!==null&&n.memoizedState!==null,F=Na,ue=On;if(Na=F||a,On=ue||A,Ml(t,e),On=ue,Na=F,Ul(e),l&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||A||Na||On||Qo(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){A=n=t;try{if(s=A.stateNode,a)p=s.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{b=A.stateNode;var be=A.memoizedProps.style,Q=be!=null&&be.hasOwnProperty("display")?be.display:null;b.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Ge){Kt(A,A.return,Ge)}}}else if(t.tag===6){if(n===null){A=t;try{A.stateNode.nodeValue=a?"":A.memoizedProps}catch(Ge){Kt(A,A.return,Ge)}}}else if(t.tag===18){if(n===null){A=t;try{var se=A.stateNode;a?jp(se,!0):jp(A.stateNode,!1)}catch(Ge){Kt(A,A.return,Ge)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Tc(e,n))));break;case 19:Ml(t,e),Ul(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Tc(e,l)));break;case 30:break;case 21:break;default:Ml(t,e),Ul(e)}}function Ul(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(zf(l)){n=l;break}l=l.return}if(n==null)throw Error(f(160));switch(n.tag){case 27:var a=n.stateNode,s=Uu(e);wc(e,s,a);break;case 5:var p=n.stateNode;n.flags&32&&(ei(p,""),n.flags&=-33);var b=Uu(e);wc(e,b,p);break;case 3:case 4:var A=n.stateNode.containerInfo,F=Uu(e);_u(e,F,A);break;default:throw Error(f(161))}}catch(ue){Kt(e,e.return,ue)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Bf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ua(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Af(e,t.alternate,t),t=t.sibling}function Qo(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:fo(4,t,t.return),Qo(t);break;case 1:qi(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&jf(t,t.return,n),Qo(t);break;case 27:Yr(t.stateNode);case 26:case 5:qi(t,t.return),Qo(t);break;case 22:t.memoizedState===null&&Qo(t);break;case 30:Qo(t);break;default:Qo(t)}e=e.sibling}}function _a(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,a=e,s=t,p=s.flags;switch(s.tag){case 0:case 11:case 15:_a(a,s,n),Mr(4,s);break;case 1:if(_a(a,s,n),l=s,a=l.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(F){Kt(l,l.return,F)}if(l=s,a=l.updateQueue,a!==null){var b=l.stateNode;try{var A=a.shared.hiddenCallbacks;if(A!==null)for(a.shared.hiddenCallbacks=null,a=0;a<A.length;a++)dc(A[a],b)}catch(F){Kt(l,l.return,F)}}n&&p&64&&Tf(s),Ur(s,s.return);break;case 27:Rf(s);case 26:case 5:_a(a,s,n),n&&l===null&&p&4&&Cf(s),Ur(s,s.return);break;case 12:_a(a,s,n);break;case 31:_a(a,s,n),n&&p&4&&Mf(a,s);break;case 13:_a(a,s,n),n&&p&4&&Uf(a,s);break;case 22:s.memoizedState===null&&_a(a,s,n),Ur(s,s.return);break;case 30:break;default:_a(a,s,n)}t=t.sibling}}function Ou(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Xi(n))}function Vu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xi(e))}function Ni(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Of(e,t,n,l),t=t.sibling}function Of(e,t,n,l){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Ni(e,t,n,l),a&2048&&Mr(9,t);break;case 1:Ni(e,t,n,l);break;case 3:Ni(e,t,n,l),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Xi(e)));break;case 12:if(a&2048){Ni(e,t,n,l),e=t.stateNode;try{var s=t.memoizedProps,p=s.id,b=s.onPostCommit;typeof b=="function"&&b(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Kt(t,t.return,A)}}else Ni(e,t,n,l);break;case 31:Ni(e,t,n,l);break;case 13:Ni(e,t,n,l);break;case 23:break;case 22:s=t.stateNode,p=t.alternate,t.memoizedState!==null?s._visibility&2?Ni(e,t,n,l):_r(e,t):s._visibility&2?Ni(e,t,n,l):(s._visibility|=2,ks(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),a&2048&&Ou(p,t);break;case 24:Ni(e,t,n,l),a&2048&&Vu(t.alternate,t);break;default:Ni(e,t,n,l)}}function ks(e,t,n,l,a){for(a=a&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,p=t,b=n,A=l,F=p.flags;switch(p.tag){case 0:case 11:case 15:ks(s,p,b,A,a),Mr(8,p);break;case 23:break;case 22:var ue=p.stateNode;p.memoizedState!==null?ue._visibility&2?ks(s,p,b,A,a):_r(s,p):(ue._visibility|=2,ks(s,p,b,A,a)),a&&F&2048&&Ou(p.alternate,p);break;case 24:ks(s,p,b,A,a),a&&F&2048&&Vu(p.alternate,p);break;default:ks(s,p,b,A,a)}t=t.sibling}}function _r(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,a=l.flags;switch(l.tag){case 22:_r(n,l),a&2048&&Ou(l.alternate,l);break;case 24:_r(n,l),a&2048&&Vu(l.alternate,l);break;default:_r(n,l)}t=t.sibling}}var Br=8192;function Ns(e,t,n){if(e.subtreeFlags&Br)for(e=e.child;e!==null;)Vf(e,t,n),e=e.sibling}function Vf(e,t,n){switch(e.tag){case 26:Ns(e,t,n),e.flags&Br&&e.memoizedState!==null&&hg(n,ki,e.memoizedState,e.memoizedProps);break;case 5:Ns(e,t,n);break;case 3:case 4:var l=ki;ki=Vc(e.stateNode.containerInfo),Ns(e,t,n),ki=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Br,Br=16777216,Ns(e,t,n),Br=l):Ns(e,t,n));break;default:Ns(e,t,n)}}function If(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Or(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Qn=l,Ef(l,e)}If(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Hf(e),e=e.sibling}function Hf(e){switch(e.tag){case 0:case 11:case 15:Or(e),e.flags&2048&&fo(9,e,e.return);break;case 3:Or(e);break;case 12:Or(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,jc(e)):Or(e);break;default:Or(e)}}function jc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Qn=l,Ef(l,e)}If(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:fo(8,t,t.return),jc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,jc(t));break;default:jc(t)}e=e.sibling}}function Ef(e,t){for(;Qn!==null;){var n=Qn;switch(n.tag){case 0:case 11:case 15:fo(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Xi(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,Qn=l;else e:for(n=e;Qn!==null;){l=Qn;var a=l.sibling,s=l.return;if(kf(l),l===n){Qn=null;break e}if(a!==null){a.return=s,Qn=a;break e}Qn=s}}}var Ah={getCacheForType:function(e){var t=hn(Sn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return hn(Sn).controller.signal}},kh=typeof WeakMap=="function"?WeakMap:Map,Ft=0,sn=null,Bt=null,$t=0,Qt=0,Gl=null,po=!1,Ms=!1,Iu=!1,Ba=0,Tn=0,ho=0,Ko=0,Hu=0,Fl=0,Us=0,Vr=null,_l=null,Eu=!1,Cc=0,$f=0,zc=1/0,Rc=null,go=null,Xn=0,xo=null,_s=null,Oa=0,$u=0,Yu=null,Yf=null,Ir=0,Pu=null;function ql(){return(Ft&2)!==0&&$t!==0?$t&-$t:V.T!==null?qu():on()}function Pf(){if(Fl===0)if(($t&536870912)===0||Nt){var e=$e;$e<<=1,($e&3932160)===0&&($e=262144),Fl=e}else Fl=536870912;return e=_n.current,e!==null&&(e.flags|=32),Fl}function Bl(e,t,n){(e===sn&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(Bs(e,0),yo(e,$t,Fl,!1)),en(e,n),((Ft&2)===0||e!==sn)&&(e===sn&&((Ft&2)===0&&(Ko|=n),Tn===4&&yo(e,$t,Fl,!1)),Zi(e))}function Xf(e,t,n){if((Ft&6)!==0)throw Error(f(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Ha(e,t),a=l?Uh(e,t):Wu(e,t,!0),s=l;do{if(a===0){Ms&&!l&&yo(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Nh(n)){a=Wu(e,t,!1),s=!1;continue}if(a===2){if(s=t,e.errorRecoveryDisabledLanes&s)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var b=e;a=Vr;var A=b.current.memoizedState.isDehydrated;if(A&&(Bs(b,p).flags|=256),p=Wu(b,p,!1),p!==2){if(Iu&&!A){b.errorRecoveryDisabledLanes|=s,Ko|=s,a=4;break e}s=_l,_l=a,s!==null&&(_l===null?_l=s:_l.push.apply(_l,s))}a=p}if(s=!1,a!==2)continue}}if(a===1){Bs(e,0),yo(e,t,0,!0);break}e:{switch(l=e,s=a,s){case 0:case 1:throw Error(f(345));case 4:if((t&4194048)!==t)break;case 6:yo(l,t,Fl,!po);break e;case 2:_l=null;break;case 3:case 5:break;default:throw Error(f(329))}if((t&62914560)===t&&(a=Cc+300-Oe(),10<a)){if(yo(l,t,Fl,!po),Kn(l,0,!0)!==0)break e;Oa=t,l.timeoutHandle=Sp(Wf.bind(null,l,n,_l,Rc,Eu,t,Fl,Ko,Us,po,s,"Throttled",-0,0),a);break e}Wf(l,n,_l,Rc,Eu,t,Fl,Ko,Us,po,s,null,-0,0)}}break}while(!0);Zi(e)}function Wf(e,t,n,l,a,s,p,b,A,F,ue,be,Q,se){if(e.timeoutHandle=-1,be=t.subtreeFlags,be&8192||(be&16785408)===16785408){be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:En},Vf(t,s,be);var Ge=(s&62914560)===s?Cc-Oe():(s&4194048)===s?$f-Oe():0;if(Ge=gg(be,Ge),Ge!==null){Oa=s,e.cancelPendingCommit=Ge(Jf.bind(null,e,t,s,n,l,a,p,b,A,ue,be,null,Q,se)),yo(e,s,p,!F);return}}Jf(e,t,s,n,l,a,p,b,A)}function Nh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var a=n[l],s=a.getSnapshot;a=a.value;try{if(!Fn(s(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yo(e,t,n,l){t&=~Hu,t&=~Ko,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var a=t;0<a;){var s=31-An(a),p=1<<s;l[s]=-1,a&=~p}n!==0&&ul(e,n,t)}function Dc(){return(Ft&6)===0?(Hr(0),!1):!0}function Xu(){if(Bt!==null){if(Qt===0)var e=Bt.return;else e=Bt,Yl=xl=null,Ce(e),yl=null,co=0,e=Bt;for(;e!==null;)wf(e.alternate,e),e=e.return;Bt=null}}function Bs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Qh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Oa=0,Xu(),sn=e,Bt=n=El(e.current,null),$t=t,Qt=0,Gl=null,po=!1,Ms=Ha(e,t),Iu=!1,Us=Fl=Hu=Ko=ho=Tn=0,_l=Vr=null,Eu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var a=31-An(l),s=1<<a;t|=e[a],l&=~s}return Ba=t,Tt(),n}function Lf(e,t){y=null,V.H=Ar,t===ci||t===Wi?(t=Tr(),Qt=3):t===Po?(t=Tr(),Qt=4):Qt=t===wu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Gl=t,Bt===null&&(Tn=1,yc(e,zl(t,e.current)))}function Gf(){var e=_n.current;return e===null?!0:($t&4194048)===$t?il===null:($t&62914560)===$t||($t&536870912)!==0?e===il:!1}function Ff(){var e=V.H;return V.H=Ar,e===null?Ar:e}function qf(){var e=V.A;return V.A=Ah,e}function Ac(){Tn=4,po||($t&4194048)!==$t&&_n.current!==null||(Ms=!0),(ho&134217727)===0&&(Ko&134217727)===0||sn===null||yo(sn,$t,Fl,!1)}function Wu(e,t,n){var l=Ft;Ft|=2;var a=Ff(),s=qf();(sn!==e||$t!==t)&&(Rc=null,Bs(e,t)),t=!1;var p=Tn;e:do try{if(Qt!==0&&Bt!==null){var b=Bt,A=Gl;switch(Qt){case 8:Xu(),p=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(t=!0);var F=Qt;if(Qt=0,Gl=null,Os(e,b,A,F),n&&Ms){p=0;break e}break;default:F=Qt,Qt=0,Gl=null,Os(e,b,A,F)}}Mh(),p=Tn;break}catch(ue){Lf(e,ue)}while(!0);return t&&e.shellSuspendCounter++,Yl=xl=null,Ft=l,V.H=a,V.A=s,Bt===null&&(sn=null,$t=0,Tt()),p}function Mh(){for(;Bt!==null;)Zf(Bt)}function Uh(e,t){var n=Ft;Ft|=2;var l=Ff(),a=qf();sn!==e||$t!==t?(Rc=null,zc=Oe()+500,Bs(e,t)):Ms=Ha(e,t);e:do try{if(Qt!==0&&Bt!==null){t=Bt;var s=Gl;t:switch(Qt){case 1:Qt=0,Gl=null,Os(e,t,s,1);break;case 2:case 9:if(Xo(s)){Qt=0,Gl=null,Qf(t);break}t=function(){Qt!==2&&Qt!==9||sn!==e||(Qt=7),Zi(e)},s.then(t,t);break e;case 3:Qt=7;break e;case 4:Qt=5;break e;case 7:Xo(s)?(Qt=0,Gl=null,Qf(t)):(Qt=0,Gl=null,Os(e,t,s,7));break;case 5:var p=null;switch(Bt.tag){case 26:p=Bt.memoizedState;case 5:case 27:var b=Bt;if(p?Op(p):b.stateNode.complete){Qt=0,Gl=null;var A=b.sibling;if(A!==null)Bt=A;else{var F=b.return;F!==null?(Bt=F,kc(F)):Bt=null}break t}}Qt=0,Gl=null,Os(e,t,s,5);break;case 6:Qt=0,Gl=null,Os(e,t,s,6);break;case 8:Xu(),Tn=6;break e;default:throw Error(f(462))}}_h();break}catch(ue){Lf(e,ue)}while(!0);return Yl=xl=null,V.H=l,V.A=a,Ft=n,Bt!==null?0:(sn=null,$t=0,Tt(),Tn)}function _h(){for(;Bt!==null&&!pn();)Zf(Bt)}function Zf(e){var t=mf(e.alternate,e,Ba);e.memoizedProps=e.pendingProps,t===null?kc(e):Bt=t}function Qf(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=hf(n,t,t.pendingProps,t.type,void 0,$t);break;case 11:t=hf(n,t,t.pendingProps,t.type.render,t.ref,$t);break;case 5:Ce(t);default:wf(n,t),t=Bt=ya(t,Ba),t=mf(n,t,Ba)}e.memoizedProps=e.pendingProps,t===null?kc(e):Bt=t}function Os(e,t,n,l){Yl=xl=null,Ce(t),yl=null,co=0;var a=t.return;try{if(wh(e,a,t,n,$t)){Tn=1,yc(e,zl(n,e.current)),Bt=null;return}}catch(s){if(a!==null)throw Bt=a,s;Tn=1,yc(e,zl(n,e.current)),Bt=null;return}t.flags&32768?(Nt||l===1?e=!0:Ms||($t&536870912)!==0?e=!1:(po=e=!0,(l===2||l===9||l===3||l===6)&&(l=_n.current,l!==null&&l.tag===13&&(l.flags|=16384))),Kf(t,e)):kc(t)}function kc(e){var t=e;do{if((t.flags&32768)!==0){Kf(t,po);return}e=t.return;var n=Ch(t.alternate,t,Ba);if(n!==null){Bt=n;return}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);Tn===0&&(Tn=5)}function Kf(e,t){do{var n=zh(e.alternate,e);if(n!==null){n.flags&=32767,Bt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Bt=e;return}Bt=e=n}while(e!==null);Tn=6,Bt=null}function Jf(e,t,n,l,a,s,p,b,A){e.cancelPendingCommit=null;do Nc();while(Xn!==0);if((Ft&6)!==0)throw Error(f(327));if(t!==null){if(t===e.current)throw Error(f(177));if(s=t.lanes|t.childLanes,s|=mt,ts(e,n,s,p,b,A),e===sn&&(Bt=sn=null,$t=0),_s=t,xo=e,Oa=n,$u=s,Yu=a,Yf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ih(Ql,function(){return ip(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=V.T,V.T=null,a=J.p,J.p=2,p=Ft,Ft|=4;try{Rh(e,t,n)}finally{Ft=p,J.p=a,V.T=l}}Xn=1,ep(),tp(),np()}}function ep(){if(Xn===1){Xn=0;var e=xo,t=_s,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=V.T,V.T=null;var l=J.p;J.p=2;var a=Ft;Ft|=4;try{_f(t,e);var s=ld,p=oc(e.containerInfo),b=s.focusedElem,A=s.selectionRange;if(p!==b&&b&&b.ownerDocument&&pr(b.ownerDocument.documentElement,b)){if(A!==null&&Ja(b)){var F=A.start,ue=A.end;if(ue===void 0&&(ue=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(ue,b.value.length);else{var be=b.ownerDocument||document,Q=be&&be.defaultView||window;if(Q.getSelection){var se=Q.getSelection(),Ge=b.textContent.length,it=Math.min(A.start,Ge),an=A.end===void 0?it:Math.min(A.end,Ge);!se.extend&&it>an&&(p=an,an=it,it=p);var X=Vo(b,it),O=Vo(b,an);if(X&&O&&(se.rangeCount!==1||se.anchorNode!==X.node||se.anchorOffset!==X.offset||se.focusNode!==O.node||se.focusOffset!==O.offset)){var G=be.createRange();G.setStart(X.node,X.offset),se.removeAllRanges(),it>an?(se.addRange(G),se.extend(O.node,O.offset)):(G.setEnd(O.node,O.offset),se.addRange(G))}}}}for(be=[],se=b;se=se.parentNode;)se.nodeType===1&&be.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<be.length;b++){var xe=be[b];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Pc=!!nd,ld=nd=null}finally{Ft=a,J.p=l,V.T=n}}e.current=t,Xn=2}}function tp(){if(Xn===2){Xn=0;var e=xo,t=_s,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=V.T,V.T=null;var l=J.p;J.p=2;var a=Ft;Ft|=4;try{Af(e,t.alternate,t)}finally{Ft=a,J.p=l,V.T=n}}Xn=3}}function np(){if(Xn===4||Xn===3){Xn=0,Wn();var e=xo,t=_s,n=Oa,l=Yf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Xn=5:(Xn=0,_s=xo=null,lp(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(go=null),Fs(n),t=t.stateNode,Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Mi,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=V.T,a=J.p,J.p=2,V.T=null;try{for(var s=e.onRecoverableError,p=0;p<l.length;p++){var b=l[p];s(b.value,{componentStack:b.stack})}}finally{V.T=t,J.p=a}}(Oa&3)!==0&&Nc(),Zi(e),a=e.pendingLanes,(n&261930)!==0&&(a&42)!==0?e===Pu?Ir++:(Ir=0,Pu=e):Ir=0,Hr(0)}}function lp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Xi(t)))}function Nc(){return ep(),tp(),np(),ip()}function ip(){if(Xn!==5)return!1;var e=xo,t=$u;$u=0;var n=Fs(Oa),l=V.T,a=J.p;try{J.p=32>n?32:n,V.T=null,n=Yu,Yu=null;var s=xo,p=Oa;if(Xn=0,_s=xo=null,Oa=0,(Ft&6)!==0)throw Error(f(331));var b=Ft;if(Ft|=4,Hf(s.current),Of(s,s.current,p,n),Ft=b,Hr(0,!1),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Mi,s)}catch{}return!0}finally{J.p=a,V.T=l,lp(e,t)}}function ap(e,t,n){t=zl(n,t),t=Su(e.stateNode,t,2),e=Gi(e,t,2),e!==null&&(en(e,2),Zi(e))}function Kt(e,t,n){if(e.tag===3)ap(e,e,n);else for(;t!==null;){if(t.tag===3){ap(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(go===null||!go.has(l))){e=zl(n,e),n=of(2),l=Gi(t,n,2),l!==null&&(sf(n,l,t,e),en(l,2),Zi(l));break}}t=t.return}}function Lu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new kh;var a=new Set;l.set(t,a)}else a=l.get(t),a===void 0&&(a=new Set,l.set(t,a));a.has(n)||(Iu=!0,a.add(n),e=Bh.bind(null,e,t,n),t.then(e,e))}function Bh(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sn===e&&($t&n)===n&&(Tn===4||Tn===3&&($t&62914560)===$t&&300>Oe()-Cc?(Ft&2)===0&&Bs(e,0):Hu|=n,Us===$t&&(Us=0)),Zi(e)}function op(e,t){t===0&&(t=Ws()),e=mi(e,t),e!==null&&(en(e,t),Zi(e))}function Oh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),op(e,n)}function Vh(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(f(314))}l!==null&&l.delete(t),op(e,n)}function Ih(e,t){return qe(e,t)}var Mc=null,Vs=null,Gu=!1,Uc=!1,Fu=!1,vo=0;function Zi(e){e!==Vs&&e.next===null&&(Vs===null?Mc=Vs=e:Vs=Vs.next=e),Uc=!0,Gu||(Gu=!0,Eh())}function Hr(e,t){if(!Fu&&Uc){Fu=!0;do for(var n=!1,l=Mc;l!==null;){if(e!==0){var a=l.pendingLanes;if(a===0)var s=0;else{var p=l.suspendedLanes,b=l.pingedLanes;s=(1<<31-An(42|e)+1)-1,s&=a&~(p&~b),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,up(l,s))}else s=$t,s=Kn(l,l===sn?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||Ha(l,s)||(n=!0,up(l,s));l=l.next}while(n);Fu=!1}}function Hh(){sp()}function sp(){Uc=Gu=!1;var e=0;vo!==0&&Zh()&&(e=vo);for(var t=Oe(),n=null,l=Mc;l!==null;){var a=l.next,s=rp(l,t);s===0?(l.next=null,n===null?Mc=a:n.next=a,a===null&&(Vs=n)):(n=l,(e!==0||(s&3)!==0)&&(Uc=!0)),l=a}Xn!==0&&Xn!==5||Hr(e),vo!==0&&(vo=0)}function rp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var p=31-An(s),b=1<<p,A=a[p];A===-1?((b&n)===0||(b&l)!==0)&&(a[p]=Qr(b,t)):A<=t&&(e.expiredLanes|=b),s&=~b}if(t=sn,n=$t,n=Kn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Qe(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Ha(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Qe(l),Fs(n)){case 2:case 8:n=In;break;case 32:n=Ql;break;case 268435456:n=Ia;break;default:n=Ql}return l=cp.bind(null,e),n=qe(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Qe(l),e.callbackPriority=2,e.callbackNode=null,2}function cp(e,t){if(Xn!==0&&Xn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var l=$t;return l=Kn(e,e===sn?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Xf(e,l,t),rp(e,Oe()),e.callbackNode!=null&&e.callbackNode===n?cp.bind(null,e):null)}function up(e,t){if(Nc())return null;Xf(e,t,!0)}function Eh(){Kh(function(){(Ft&6)!==0?qe(Ut,Hh):sp()})}function qu(){if(vo===0){var e=ja;e===0&&(e=es,es<<=1,(es&261888)===0&&(es=256)),vo=e}return vo}function dp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:kt(""+e)}function fp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function $h(e,t,n,l,a){if(t==="submit"&&n&&n.stateNode===a){var s=dp((a[vn]||null).action),p=l.submitter;p&&(t=(t=p[vn]||null)?dp(t.formAction):p.getAttribute("formAction"),t!==null&&(s=t,p=null));var b=new Wa("action","action",null,l,a);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(vo!==0){var A=p?fp(a,p):new FormData(a);gu(n,{pending:!0,data:A,method:a.method,action:s},null,A)}}else typeof s=="function"&&(b.preventDefault(),A=p?fp(a,p):new FormData(a),gu(n,{pending:!0,data:A,method:a.method,action:s},s,A))},currentTarget:a}]})}}for(var Zu=0;Zu<lo.length;Zu++){var Qu=lo[Zu],Yh=Qu.toLowerCase(),Ph=Qu[0].toUpperCase()+Qu.slice(1);mn(Yh,"on"+Ph)}mn(ys,"onAnimationEnd"),mn(hl,"onAnimationIteration"),mn(vs,"onAnimationStart"),mn("dblclick","onDoubleClick"),mn("focusin","onFocus"),mn("focusout","onBlur"),mn(fa,"onTransitionRun"),mn(gr,"onTransitionStart"),mn(pa,"onTransitionCancel"),mn(bs,"onTransitionEnd"),bn("onMouseEnter",["mouseout","mouseover"]),bn("onMouseLeave",["mouseout","mouseover"]),bn("onPointerEnter",["pointerout","pointerover"]),bn("onPointerLeave",["pointerout","pointerover"]),ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Er));function pp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],a=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var p=l.length-1;0<=p;p--){var b=l[p],A=b.instance,F=b.currentTarget;if(b=b.listener,A!==s&&a.isPropagationStopped())break e;s=b,a.currentTarget=F;try{s(a)}catch(ue){ha(ue)}a.currentTarget=null,s=A}else for(p=0;p<l.length;p++){if(b=l[p],A=b.instance,F=b.currentTarget,b=b.listener,A!==s&&a.isPropagationStopped())break e;s=b,a.currentTarget=F;try{s(a)}catch(ue){ha(ue)}a.currentTarget=null,s=A}}}}function Ot(e,t){var n=t[ls];n===void 0&&(n=t[ls]=new Set);var l=e+"__bubble";n.has(l)||(hp(t,e,2,!1),n.add(l))}function Ku(e,t,n){var l=0;t&&(l|=4),hp(n,e,l,t)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[_c]){e[_c]=!0,Jr.forEach(function(n){n!=="selectionchange"&&(Xh.has(n)||Ku(n,!1,e),Ku(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_c]||(t[_c]=!0,Ku("selectionchange",!1,t))}}function hp(e,t,n,l){switch(Pp(t)){case 2:var a=vg;break;case 8:a=bg;break;default:a=hd}n=a.bind(null,t,n,e),a=void 0,!Nn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),l?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ed(e,t,n,l,a){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var b=l.stateNode.containerInfo;if(b===a)break;if(p===4)for(p=l.return;p!==null;){var A=p.tag;if((A===3||A===4)&&p.stateNode.containerInfo===a)return;p=p.return}for(;b!==null;){if(p=Ji(b),p===null)return;if(A=p.tag,A===5||A===6||A===26||A===27){l=s=p;continue e}b=b.parentNode}}l=l.return}tc(function(){var F=s,ue=dl(n),be=[];e:{var Q=Hl.get(e);if(Q!==void 0){var se=Wa,Ge=e;switch(e){case"keypress":if($n(n)===0)break e;case"keydown":case"keyup":se=ni;break;case"focusin":Ge="focus",se=aa;break;case"focusout":Ge="blur",se=aa;break;case"beforeblur":case"afterblur":se=aa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=ds;break;case ys:case hl:case vs:se=lr;break;case bs:se=sa;break;case"scroll":case"scrollend":se=ru;break;case"wheel":se=fl;break;case"copy":case"cut":case"paste":se=Ao;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=vi;break;case"toggle":case"beforetoggle":se=Oi}var it=(t&4)!==0,an=!it&&(e==="scroll"||e==="scrollend"),X=it?Q!==null?Q+"Capture":null:Q;it=[];for(var O=F,G;O!==null;){var xe=O;if(G=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||G===null||X===null||(xe=rl(O,X),xe!=null&&it.push($r(O,xe,G))),an)break;O=O.return}0<it.length&&(Q=new se(Q,Ge,null,n,ue),be.push({event:Q,listeners:it}))}}if((t&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",Q&&n!==tr&&(Ge=n.relatedTarget||n.fromElement)&&(Ji(Ge)||Ge[Sl]))break e;if((se||Q)&&(Q=ue.window===ue?ue:(Q=ue.ownerDocument)?Q.defaultView||Q.parentWindow:window,se?(Ge=n.relatedTarget||n.toElement,se=F,Ge=Ge?Ji(Ge):null,Ge!==null&&(an=H(Ge),it=Ge.tag,Ge!==an||it!==5&&it!==27&&it!==6)&&(Ge=null)):(se=null,Ge=F),se!==Ge)){if(it=yi,xe="onMouseLeave",X="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(it=vi,xe="onPointerLeave",X="onPointerEnter",O="pointer"),an=se==null?Q:is(se),G=Ge==null?Q:is(Ge),Q=new it(xe,O+"leave",se,n,ue),Q.target=an,Q.relatedTarget=G,xe=null,Ji(ue)===F&&(it=new it(X,O+"enter",Ge,n,ue),it.target=G,it.relatedTarget=an,xe=it),an=xe,se&&Ge)t:{for(it=Wh,X=se,O=Ge,G=0,xe=X;xe;xe=it(xe))G++;xe=0;for(var tt=O;tt;tt=it(tt))xe++;for(;0<G-xe;)X=it(X),G--;for(;0<xe-G;)O=it(O),xe--;for(;G--;){if(X===O||O!==null&&X===O.alternate){it=X;break t}X=it(X),O=it(O)}it=null}else it=null;se!==null&&gp(be,Q,se,it,!1),Ge!==null&&an!==null&&gp(be,an,Ge,it,!0)}}e:{if(Q=F?is(F):window,se=Q.nodeName&&Q.nodeName.toLowerCase(),se==="select"||se==="input"&&Q.type==="file")var Wt=fr;else if(ur(Q))if(ca)Wt=bi;else{Wt=Bo;var Ze=_o}else se=Q.nodeName,!se||se.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?F&&ss(F.elementType)&&(Wt=fr):Wt=ic;if(Wt&&(Wt=Wt(e,F))){dr(be,Wt,n,ue);break e}Ze&&Ze(e,Q,F),e==="focusout"&&F&&Q.type==="number"&&F.memoizedProps.value!=null&&Ks(Q,"number",Q.value)}switch(Ze=F?is(F):window,e){case"focusin":(ur(Ze)||Ze.contentEditable==="true")&&(da=Ze,gs=F,eo=null);break;case"focusout":eo=gs=da=null;break;case"mousedown":to=!0;break;case"contextmenu":case"mouseup":case"dragend":to=!1,no(be,n,ue);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":no(be,n,ue)}var Mt;if(pl)e:{switch(e){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Vi?Il(e,n)&&(Yt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Yt="onCompositionStart");Yt&&(sr&&n.locale!=="ko"&&(Vi||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Vi&&(Mt=cs()):(Mn=ue,rs="value"in Mn?Mn.value:Mn.textContent,Vi=!0)),Ze=Bc(F,Yt),0<Ze.length&&(Yt=new Fa(Yt,e,null,n,ue),be.push({event:Yt,listeners:Ze}),Mt?Yt.data=Mt:(Mt=ps(n),Mt!==null&&(Yt.data=Mt)))),(Mt=Uo?cr(e,n):nc(e,n))&&(Yt=Bc(F,"onBeforeInput"),0<Yt.length&&(Ze=new Fa("onBeforeInput","beforeinput",null,n,ue),be.push({event:Ze,listeners:Yt}),Ze.data=Mt)),$h(be,e,F,n,ue)}pp(be,t)})}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bc(e,t){for(var n=t+"Capture",l=[];e!==null;){var a=e,s=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||s===null||(a=rl(e,n),a!=null&&l.unshift($r(e,a,s)),a=rl(e,t),a!=null&&l.push($r(e,a,s))),e.tag===3)return l;e=e.return}return[]}function Wh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gp(e,t,n,l,a){for(var s=t._reactName,p=[];n!==null&&n!==l;){var b=n,A=b.alternate,F=b.stateNode;if(b=b.tag,A!==null&&A===l)break;b!==5&&b!==26&&b!==27||F===null||(A=F,a?(F=rl(n,s),F!=null&&p.unshift($r(n,F,A))):a||(F=rl(n,s),F!=null&&p.push($r(n,F,A)))),n=n.return}p.length!==0&&e.push({event:t,listeners:p})}var Lh=/\r\n?/g,Gh=/\u0000|\uFFFD/g;function xp(e){return(typeof e=="string"?e:""+e).replace(Lh,`
`).replace(Gh,"")}function yp(e,t){return t=xp(t),xp(e)===t}function ln(e,t,n,l,a,s){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||ei(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&ei(e,""+l);break;case"className":bt(e,"class",l);break;case"tabIndex":bt(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bt(e,n,l);break;case"style":Ya(e,l,s);break;case"data":if(t!=="object"){bt(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=kt(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&ln(e,t,"name",a.name,a,null),ln(e,t,"formEncType",a.formEncType,a,null),ln(e,t,"formMethod",a.formMethod,a,null),ln(e,t,"formTarget",a.formTarget,a,null)):(ln(e,t,"encType",a.encType,a,null),ln(e,t,"method",a.method,a,null),ln(e,t,"target",a.target,a,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=kt(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=En);break;case"onScroll":l!=null&&Ot("scroll",e);break;case"onScrollEnd":l!=null&&Ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(f(61));if(n=l.__html,n!=null){if(a.children!=null)throw Error(f(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=kt(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Ot("beforetoggle",e),Ot("toggle",e),Co(e,"popover",l);break;case"xlinkActuate":Rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Co(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=ou.get(n)||n,Co(e,n,l))}}function td(e,t,n,l,a,s){switch(n){case"style":Ya(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(f(61));if(n=l.__html,n!=null){if(a.children!=null)throw Error(f(60));e.innerHTML=n}}break;case"children":typeof l=="string"?ei(e,l):(typeof l=="number"||typeof l=="bigint")&&ei(e,""+l);break;case"onScroll":l!=null&&Ot("scroll",e);break;case"onScrollEnd":l!=null&&Ot("scrollend",e);break;case"onClick":l!=null&&(e.onclick=En);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qs.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),s=e[vn]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,a),typeof l=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,a);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Co(e,n,l)}}}function ol(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",e),Ot("load",e);var l=!1,a=!1,s;for(s in n)if(n.hasOwnProperty(s)){var p=n[s];if(p!=null)switch(s){case"src":l=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,t));default:ln(e,t,s,p,n,null)}}a&&ln(e,t,"srcSet",n.srcSet,n,null),l&&ln(e,t,"src",n.src,n,null);return;case"input":Ot("invalid",e);var b=s=p=a=null,A=null,F=null;for(l in n)if(n.hasOwnProperty(l)){var ue=n[l];if(ue!=null)switch(l){case"name":a=ue;break;case"type":p=ue;break;case"checked":A=ue;break;case"defaultChecked":F=ue;break;case"value":s=ue;break;case"defaultValue":b=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(f(137,t));break;default:ln(e,t,l,ue,n,null)}}ta(e,s,b,A,F,p,a,!1);return;case"select":Ot("invalid",e),l=p=s=null;for(a in n)if(n.hasOwnProperty(a)&&(b=n[a],b!=null))switch(a){case"value":s=b;break;case"defaultValue":p=b;break;case"multiple":l=b;default:ln(e,t,a,b,n,null)}t=s,n=p,e.multiple=!!l,t!=null?zn(e,!!l,t,!1):n!=null&&zn(e,!!l,n,!0);return;case"textarea":Ot("invalid",e),s=a=l=null;for(p in n)if(n.hasOwnProperty(p)&&(b=n[p],b!=null))switch(p){case"value":l=b;break;case"defaultValue":a=b;break;case"children":s=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(f(91));break;default:ln(e,t,p,b,n,null)}os(e,l,a,s);return;case"option":for(A in n)if(n.hasOwnProperty(A)&&(l=n[A],l!=null))switch(A){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ln(e,t,A,l,n,null)}return;case"dialog":Ot("beforetoggle",e),Ot("toggle",e),Ot("cancel",e),Ot("close",e);break;case"iframe":case"object":Ot("load",e);break;case"video":case"audio":for(l=0;l<Er.length;l++)Ot(Er[l],e);break;case"image":Ot("error",e),Ot("load",e);break;case"details":Ot("toggle",e);break;case"embed":case"source":case"link":Ot("error",e),Ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in n)if(n.hasOwnProperty(F)&&(l=n[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,t));default:ln(e,t,F,l,n,null)}return;default:if(ss(t)){for(ue in n)n.hasOwnProperty(ue)&&(l=n[ue],l!==void 0&&td(e,t,ue,l,n,void 0));return}}for(b in n)n.hasOwnProperty(b)&&(l=n[b],l!=null&&ln(e,t,b,l,n,null))}function Fh(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,p=null,b=null,A=null,F=null,ue=null;for(se in n){var be=n[se];if(n.hasOwnProperty(se)&&be!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":A=be;default:l.hasOwnProperty(se)||ln(e,t,se,null,l,be)}}for(var Q in l){var se=l[Q];if(be=n[Q],l.hasOwnProperty(Q)&&(se!=null||be!=null))switch(Q){case"type":s=se;break;case"name":a=se;break;case"checked":F=se;break;case"defaultChecked":ue=se;break;case"value":p=se;break;case"defaultValue":b=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(f(137,t));break;default:se!==be&&ln(e,t,Q,se,l,be)}}Cn(e,p,b,A,F,ue,s,a);return;case"select":se=p=b=Q=null;for(s in n)if(A=n[s],n.hasOwnProperty(s)&&A!=null)switch(s){case"value":break;case"multiple":se=A;default:l.hasOwnProperty(s)||ln(e,t,s,null,l,A)}for(a in l)if(s=l[a],A=n[a],l.hasOwnProperty(a)&&(s!=null||A!=null))switch(a){case"value":Q=s;break;case"defaultValue":b=s;break;case"multiple":p=s;default:s!==A&&ln(e,t,a,s,l,A)}t=b,n=p,l=se,Q!=null?zn(e,!!n,Q,!1):!!l!=!!n&&(t!=null?zn(e,!!n,t,!0):zn(e,!!n,n?[]:"",!1));return;case"textarea":se=Q=null;for(b in n)if(a=n[b],n.hasOwnProperty(b)&&a!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ln(e,t,b,null,l,a)}for(p in l)if(a=l[p],s=n[p],l.hasOwnProperty(p)&&(a!=null||s!=null))switch(p){case"value":Q=a;break;case"defaultValue":se=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(f(91));break;default:a!==s&&ln(e,t,p,a,l,s)}zo(e,Q,se);return;case"option":for(var Ge in n)if(Q=n[Ge],n.hasOwnProperty(Ge)&&Q!=null&&!l.hasOwnProperty(Ge))switch(Ge){case"selected":e.selected=!1;break;default:ln(e,t,Ge,null,l,Q)}for(A in l)if(Q=l[A],se=n[A],l.hasOwnProperty(A)&&Q!==se&&(Q!=null||se!=null))switch(A){case"selected":e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ln(e,t,A,Q,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in n)Q=n[it],n.hasOwnProperty(it)&&Q!=null&&!l.hasOwnProperty(it)&&ln(e,t,it,null,l,Q);for(F in l)if(Q=l[F],se=n[F],l.hasOwnProperty(F)&&Q!==se&&(Q!=null||se!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(f(137,t));break;default:ln(e,t,F,Q,l,se)}return;default:if(ss(t)){for(var an in n)Q=n[an],n.hasOwnProperty(an)&&Q!==void 0&&!l.hasOwnProperty(an)&&td(e,t,an,void 0,l,Q);for(ue in l)Q=l[ue],se=n[ue],!l.hasOwnProperty(ue)||Q===se||Q===void 0&&se===void 0||td(e,t,ue,Q,l,se);return}}for(var X in n)Q=n[X],n.hasOwnProperty(X)&&Q!=null&&!l.hasOwnProperty(X)&&ln(e,t,X,null,l,Q);for(be in l)Q=l[be],se=n[be],!l.hasOwnProperty(be)||Q===se||Q==null&&se==null||ln(e,t,be,Q,l,se)}function vp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var a=n[l],s=a.transferSize,p=a.initiatorType,b=a.duration;if(s&&b&&vp(p)){for(p=0,b=a.responseEnd,l+=1;l<n.length;l++){var A=n[l],F=A.startTime;if(F>b)break;var ue=A.transferSize,be=A.initiatorType;ue&&vp(be)&&(A=A.responseEnd,p+=ue*(A<b?1:(b-F)/(A-F)))}if(--l,t+=8*(s+p)/(a.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var nd=null,ld=null;function Oc(e){return e.nodeType===9?e:e.ownerDocument}function bp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function id(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ad=null;function Zh(){var e=window.event;return e&&e.type==="popstate"?e===ad?!1:(ad=e,!0):(ad=null,!1)}var Sp=typeof setTimeout=="function"?setTimeout:void 0,Qh=typeof clearTimeout=="function"?clearTimeout:void 0,wp=typeof Promise=="function"?Promise:void 0,Kh=typeof queueMicrotask=="function"?queueMicrotask:typeof wp<"u"?function(e){return wp.resolve(null).then(e).catch(Jh)}:Sp;function Jh(e){setTimeout(function(){throw e})}function bo(e){return e==="head"}function Tp(e,t){var n=t,l=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(a),$s(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")Yr(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Yr(n);for(var s=n.firstChild;s;){var p=s.nextSibling,b=s.nodeName;s[Jl]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=p}}else n==="body"&&Yr(e.ownerDocument.body);n=a}while(n);$s(t)}function jp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function od(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":od(n),Ui(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function eg(e,t,n,l){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Jl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=hi(e.nextSibling),e===null)break}return null}function tg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=hi(e.nextSibling),e===null))return null;return e}function Cp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=hi(e.nextSibling),e===null))return null;return e}function sd(e){return e.data==="$?"||e.data==="$~"}function rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ng(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function hi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var cd=null;function zp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return hi(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Rp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Dp(e,t,n){switch(t=Oc(n),e){case"html":if(e=t.documentElement,!e)throw Error(f(452));return e;case"head":if(e=t.head,!e)throw Error(f(453));return e;case"body":if(e=t.body,!e)throw Error(f(454));return e;default:throw Error(f(451))}}function Yr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ui(e)}var gi=new Map,Ap=new Set;function Vc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Va=J.d;J.d={f:lg,r:ig,D:ag,C:og,L:sg,m:rg,X:ug,S:cg,M:dg};function lg(){var e=Va.f(),t=Dc();return e||t}function ig(e){var t=Ea(e);t!==null&&t.tag===5&&t.type==="form"?Wd(t):Va.r(e)}var Is=typeof document>"u"?null:document;function kp(e,t,n){var l=Is;if(l&&typeof t=="string"&&t){var a=ut(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Ap.has(a)||(Ap.add(a),e={rel:e,crossOrigin:n,href:t},l.querySelector(a)===null&&(t=l.createElement("link"),ol(t,"link",e),jn(t),l.head.appendChild(t)))}}function ag(e){Va.D(e),kp("dns-prefetch",e,null)}function og(e,t){Va.C(e,t),kp("preconnect",e,t)}function sg(e,t,n){Va.L(e,t,n);var l=Is;if(l&&e&&t){var a='link[rel="preload"][as="'+ut(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+ut(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+ut(n.imageSizes)+'"]')):a+='[href="'+ut(e)+'"]';var s=a;switch(t){case"style":s=Hs(e);break;case"script":s=Es(e)}gi.has(s)||(e=K({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),gi.set(s,e),l.querySelector(a)!==null||t==="style"&&l.querySelector(Pr(s))||t==="script"&&l.querySelector(Xr(s))||(t=l.createElement("link"),ol(t,"link",e),jn(t),l.head.appendChild(t)))}}function rg(e,t){Va.m(e,t);var n=Is;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+ut(l)+'"][href="'+ut(e)+'"]',s=a;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Es(e)}if(!gi.has(s)&&(e=K({rel:"modulepreload",href:e},t),gi.set(s,e),n.querySelector(a)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xr(s)))return}l=n.createElement("link"),ol(l,"link",e),jn(l),n.head.appendChild(l)}}}function cg(e,t,n){Va.S(e,t,n);var l=Is;if(l&&e){var a=$a(l).hoistableStyles,s=Hs(e);t=t||"default";var p=a.get(s);if(!p){var b={loading:0,preload:null};if(p=l.querySelector(Pr(s)))b.loading=5;else{e=K({rel:"stylesheet",href:e,"data-precedence":t},n),(n=gi.get(s))&&ud(e,n);var A=p=l.createElement("link");jn(A),ol(A,"link",e),A._p=new Promise(function(F,ue){A.onload=F,A.onerror=ue}),A.addEventListener("load",function(){b.loading|=1}),A.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ic(p,t,l)}p={type:"stylesheet",instance:p,count:1,state:b},a.set(s,p)}}}function ug(e,t){Va.X(e,t);var n=Is;if(n&&e){var l=$a(n).hoistableScripts,a=Es(e),s=l.get(a);s||(s=n.querySelector(Xr(a)),s||(e=K({src:e,async:!0},t),(t=gi.get(a))&&dd(e,t),s=n.createElement("script"),jn(s),ol(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(a,s))}}function dg(e,t){Va.M(e,t);var n=Is;if(n&&e){var l=$a(n).hoistableScripts,a=Es(e),s=l.get(a);s||(s=n.querySelector(Xr(a)),s||(e=K({src:e,async:!0,type:"module"},t),(t=gi.get(a))&&dd(e,t),s=n.createElement("script"),jn(s),ol(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(a,s))}}function Np(e,t,n,l){var a=(a=Me.current)?Vc(a):null;if(!a)throw Error(f(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Hs(n.href),n=$a(a).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Hs(n.href);var s=$a(a).hoistableStyles,p=s.get(e);if(p||(a=a.ownerDocument||a,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,p),(s=a.querySelector(Pr(e)))&&!s._p&&(p.instance=s,p.state.loading=5),gi.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},gi.set(e,n),s||fg(a,e,n,p.state))),t&&l===null)throw Error(f(528,""));return p}if(t&&l!==null)throw Error(f(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Es(n),n=$a(a).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,e))}}function Hs(e){return'href="'+ut(e)+'"'}function Pr(e){return'link[rel="stylesheet"]['+e+"]"}function Mp(e){return K({},e,{"data-precedence":e.precedence,precedence:null})}function fg(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ol(t,"link",n),jn(t),e.head.appendChild(t))}function Es(e){return'[src="'+ut(e)+'"]'}function Xr(e){return"script[async]"+e}function Up(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+ut(n.href)+'"]');if(l)return t.instance=l,jn(l),l;var a=K({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),jn(l),ol(l,"style",a),Ic(l,n.precedence,e),t.instance=l;case"stylesheet":a=Hs(n.href);var s=e.querySelector(Pr(a));if(s)return t.state.loading|=4,t.instance=s,jn(s),s;l=Mp(n),(a=gi.get(a))&&ud(l,a),s=(e.ownerDocument||e).createElement("link"),jn(s);var p=s;return p._p=new Promise(function(b,A){p.onload=b,p.onerror=A}),ol(s,"link",l),t.state.loading|=4,Ic(s,n.precedence,e),t.instance=s;case"script":return s=Es(n.src),(a=e.querySelector(Xr(s)))?(t.instance=a,jn(a),a):(l=n,(a=gi.get(s))&&(l=K({},n),dd(l,a)),e=e.ownerDocument||e,a=e.createElement("script"),jn(a),ol(a,"link",l),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(f(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ic(l,n.precedence,e));return t.instance}function Ic(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=l.length?l[l.length-1]:null,s=a,p=0;p<l.length;p++){var b=l[p];if(b.dataset.precedence===t)s=b;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ud(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function dd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Hc=null;function _p(e,t,n){if(Hc===null){var l=new Map,a=Hc=new Map;a.set(n,l)}else a=Hc,l=a.get(n),l||(l=new Map,a.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var s=n[a];if(!(s[Jl]||s[kn]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var p=s.getAttribute(t)||"";p=e+p;var b=l.get(p);b?b.push(s):l.set(p,[s])}}return l}function Bp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function pg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Op(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function hg(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var a=Hs(l.href),s=t.querySelector(Pr(a));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ec.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,jn(s);return}s=t.ownerDocument||t,l=Mp(l),(a=gi.get(a))&&ud(l,a),s=s.createElement("link"),jn(s);var p=s;p._p=new Promise(function(b,A){p.onload=b,p.onerror=A}),ol(s,"link",l),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Ec.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var fd=0;function gg(e,t){return e.stylesheets&&e.count===0&&Yc(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&Yc(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&fd===0&&(fd=62500*qh());var a=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Yc(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>fd?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(a)}}:null}function Ec(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var $c=null;function Yc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,$c=new Map,t.forEach(xg,e),$c=null,Ec.call(e))}function xg(e,t){if(!(t.state.loading&4)){var n=$c.get(e);if(n)var l=n.get(null);else{n=new Map,$c.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var p=a[s];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(n.set(p.dataset.precedence,p),l=p)}l&&n.set(null,l)}a=t.instance,p=a.getAttribute("data-precedence"),s=n.get(p)||l,s===l&&n.set(null,a),n.set(p,a),this.count++,l=Ec.bind(this),a.addEventListener("load",l),a.addEventListener("error",l),s?s.parentNode.insertBefore(a,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var Wr={$$typeof:D,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function yg(e,t,n,l,a,s,p,b,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=l,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Vp(e,t,n,l,a,s,p,b,A,F,ue,be){return e=new yg(e,t,n,p,A,F,ue,be,b),t=1,s===!0&&(t|=24),s=tl(3,null,null,t),e.current=s,s.stateNode=e,t=mr(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:n,cache:t},Go(s),e}function Ip(e){return e?(e=Si,e):Si}function Hp(e,t,n,l,a,s){a=Ip(a),l.context===null?l.context=a:l.pendingContext=a,l=kl(t),l.payload={element:n},s=s===void 0?null:s,s!==null&&(l.callback=s),n=Gi(e,l,t),n!==null&&(Bl(n,e,t),Ai(n,e,t))}function Ep(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pd(e,t){Ep(e,t),(e=e.alternate)&&Ep(e,t)}function $p(e){if(e.tag===13||e.tag===31){var t=mi(e,67108864);t!==null&&Bl(t,e,67108864),pd(e,67108864)}}function Yp(e){if(e.tag===13||e.tag===31){var t=ql();t=ns(t);var n=mi(e,t);n!==null&&Bl(n,e,t),pd(e,t)}}var Pc=!0;function vg(e,t,n,l){var a=V.T;V.T=null;var s=J.p;try{J.p=2,hd(e,t,n,l)}finally{J.p=s,V.T=a}}function bg(e,t,n,l){var a=V.T;V.T=null;var s=J.p;try{J.p=8,hd(e,t,n,l)}finally{J.p=s,V.T=a}}function hd(e,t,n,l){if(Pc){var a=gd(l);if(a===null)ed(e,t,l,Xc,n),Xp(e,l);else if(Sg(a,e,t,n,l))l.stopPropagation();else if(Xp(e,l),t&4&&-1<mg.indexOf(e)){for(;a!==null;){var s=Ea(a);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var p=ht(s.pendingLanes);if(p!==0){var b=s;for(b.pendingLanes|=2,b.entangledLanes|=2;p;){var A=1<<31-An(p);b.entanglements[1]|=A,p&=~A}Zi(s),(Ft&6)===0&&(zc=Oe()+500,Hr(0))}}break;case 31:case 13:b=mi(s,2),b!==null&&Bl(b,s,2),Dc(),pd(s,2)}if(s=gd(l),s===null&&ed(e,t,l,Xc,n),s===a)break;a=s}a!==null&&l.stopPropagation()}else ed(e,t,l,null,n)}}function gd(e){return e=dl(e),xd(e)}var Xc=null;function xd(e){if(Xc=null,e=Ji(e),e!==null){var t=H(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=te(t),e!==null)return e;e=null}else if(n===31){if(e=ze(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xc=e,null}function Pp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ki()){case Ut:return 2;case In:return 8;case Ql:case Ps:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var yd=!1,mo=null,So=null,wo=null,Lr=new Map,Gr=new Map,To=[],mg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xp(e,t){switch(e){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":Lr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(t.pointerId)}}function Fr(e,t,n,l,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[a]},t!==null&&(t=Ea(t),t!==null&&$p(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Sg(e,t,n,l,a){switch(t){case"focusin":return mo=Fr(mo,e,t,n,l,a),!0;case"dragenter":return So=Fr(So,e,t,n,l,a),!0;case"mouseover":return wo=Fr(wo,e,t,n,l,a),!0;case"pointerover":var s=a.pointerId;return Lr.set(s,Fr(Lr.get(s)||null,e,t,n,l,a)),!0;case"gotpointercapture":return s=a.pointerId,Gr.set(s,Fr(Gr.get(s)||null,e,t,n,l,a)),!0}return!1}function Wp(e){var t=Ji(e.target);if(t!==null){var n=H(t);if(n!==null){if(t=n.tag,t===13){if(t=te(n),t!==null){e.blockedOn=t,Jn(e.priority,function(){Yp(n)});return}}else if(t===31){if(t=ze(n),t!==null){e.blockedOn=t,Jn(e.priority,function(){Yp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gd(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);tr=l,n.target.dispatchEvent(l),tr=null}else return t=Ea(n),t!==null&&$p(t),e.blockedOn=n,!1;t.shift()}return!0}function Lp(e,t,n){Wc(e)&&n.delete(t)}function wg(){yd=!1,mo!==null&&Wc(mo)&&(mo=null),So!==null&&Wc(So)&&(So=null),wo!==null&&Wc(wo)&&(wo=null),Lr.forEach(Lp),Gr.forEach(Lp)}function Lc(e,t){e.blockedOn===t&&(e.blockedOn=null,yd||(yd=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,wg)))}var Gc=null;function Gp(e){Gc!==e&&(Gc=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){Gc===e&&(Gc=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],a=e[t+2];if(typeof l!="function"){if(xd(l||n)===null)continue;break}var s=Ea(n);s!==null&&(e.splice(t,3),t-=3,gu(s,{pending:!0,data:a,method:n.method,action:l},l,a))}}))}function $s(e){function t(A){return Lc(A,e)}mo!==null&&Lc(mo,e),So!==null&&Lc(So,e),wo!==null&&Lc(wo,e),Lr.forEach(t),Gr.forEach(t);for(var n=0;n<To.length;n++){var l=To[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<To.length&&(n=To[0],n.blockedOn===null);)Wp(n),n.blockedOn===null&&To.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var a=n[l],s=n[l+1],p=a[vn]||null;if(typeof s=="function")p||Gp(n);else if(p){var b=null;if(s&&s.hasAttribute("formAction")){if(a=s,p=s[vn]||null)b=p.formAction;else if(xd(a)!==null)continue}else b=p.action;typeof b=="function"?n[l+1]=b:(n.splice(l,3),l-=3),Gp(n)}}}function Fp(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(p){return a=p})},focusReset:"manual",scroll:"manual"})}function t(){a!==null&&(a(),a=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),a!==null&&(a(),a=null)}}}function vd(e){this._internalRoot=e}Fc.prototype.render=vd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(f(409));var n=t.current,l=ql();Hp(n,l,e,t,null,null)},Fc.prototype.unmount=vd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hp(e.current,2,null,e,null,null),Dc(),t[Sl]=null}};function Fc(e){this._internalRoot=e}Fc.prototype.unstable_scheduleHydration=function(e){if(e){var t=on();e={blockedOn:null,target:e,priority:t};for(var n=0;n<To.length&&t!==0&&t<To[n].priority;n++);To.splice(n,0,e),n===0&&Wp(e)}};var qp=d.version;if(qp!=="19.2.0")throw Error(f(527,qp,"19.2.0"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(f(188)):(e=Object.keys(e).join(","),Error(f(268,e)));return e=E(t),e=e!==null?me(e):null,e=e===null?null:e.stateNode,e};var Tg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qc.isDisabled&&qc.supportsFiber)try{Mi=qc.inject(Tg),Ln=qc}catch{}}return Zr.createRoot=function(e,t){if(!u(e))throw Error(f(299));var n=!1,l="",a=tf,s=nf,p=lf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=Vp(e,1,!1,null,null,n,l,null,a,s,p,Fp),e[Sl]=t.current,Ju(e),new vd(t)},Zr.hydrateRoot=function(e,t,n){if(!u(e))throw Error(f(299));var l=!1,a="",s=tf,p=nf,b=lf,A=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.formState!==void 0&&(A=n.formState)),t=Vp(e,1,!0,t,n??null,l,a,A,s,p,b,Fp),t.context=Ip(null),n=t.current,l=ql(),l=ns(l),a=kl(l),a.callback=null,Gi(n,a,l),n=l,t.current.lanes=n,en(t,n),Zi(t),e[Sl]=t.current,Ju(e),new Fc(t)},Zr.version="19.2.0",Zr}var ah;function _g(){if(ah)return Sd.exports;ah=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),Sd.exports=Ug(),Sd.exports}var Bg=_g();function Og(c,d){return c?d?{minX:Math.min(c.minX,d.minX),minY:Math.min(c.minY,d.minY),maxX:Math.max(c.maxX,d.maxX),maxY:Math.max(c.maxY,d.maxY)}:c:d}function Vg(c,d,v,f,u,H,te,ze,Z){const E=c/2,me=d/2,K=[{x:-E,y:-me},{x:E,y:-me},{x:E,y:me},{x:-E,y:me}],ce=Z*Math.PI/180,oe=Math.sin(ce),P=Math.cos(ce);let W=1/0,_e=1/0,we=-1/0,B=-1/0;for(const D of K){const U=D.x*te,_=D.y*ze,C=U*P-_*oe,g=U*oe+_*P,ne=v+u+C,De=f+H+g;ne<W&&(W=ne),De<_e&&(_e=De),ne>we&&(we=ne),De>B&&(B=De)}return{minX:W,minY:_e,maxX:we,maxY:B}}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hg=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(d,v,f)=>f?f.toUpperCase():v.toLowerCase()),oh=c=>{const d=Hg(c);return d.charAt(0).toUpperCase()+d.slice(1)},uh=(...c)=>c.filter((d,v,f)=>!!d&&d.trim()!==""&&f.indexOf(d)===v).join(" ").trim(),Eg=c=>{for(const d in c)if(d.startsWith("aria-")||d==="role"||d==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $g={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=j.forwardRef(({color:c="currentColor",size:d=24,strokeWidth:v=2,absoluteStrokeWidth:f,className:u="",children:H,iconNode:te,...ze},Z)=>j.createElement("svg",{ref:Z,...$g,width:d,height:d,stroke:c,strokeWidth:f?Number(v)*24/Number(d):v,className:uh("lucide",u),...!H&&!Eg(ze)&&{"aria-hidden":"true"},...ze},[...te.map(([E,me])=>j.createElement(E,me)),...Array.isArray(H)?H:[H]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=(c,d)=>{const v=j.forwardRef(({className:f,...u},H)=>j.createElement(Yg,{ref:H,iconNode:d,className:uh(`lucide-${Ig(oh(c))}`,`lucide-${c}`,f),...u}));return v.displayName=oh(c),v};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Xg=dh("mouse-pointer",Pg);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Lg=dh("pen-line",Wg),eu="#2CA02C",fh="#F0E442",ph="#00BFC4",Cd="#000000",Gg="#00008b",tu="#FF0000",hh={DEFAULT_SIZE:24},lu={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},Fg={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},Jo={DEFAULT_SIZE:26},gh={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function Gt(c){return gh[c]?.validUnits||[]}function Le(c){return gh[c]?.defaultUnit||""}let Ys=1,nu=Promise.resolve(0);function Zl(){let c;nu=nu.then(v=>(c=v+1,Ys=c+1,c));const d=Ys;return Ys=d+1,d}function zd(c){nu=nu.then(()=>(Ys=c,c-1)),Ys=c}function sh(){return Ys}function qg(c="id"){return`${c}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function rh(c){return Math.round(c*1e3)/1e3}function Jt(c){return{x:rh(c.x),y:rh(c.y)}}function Zg(c){return lu[c]?.defaultPins||2}function Qg(c,d,v,f,u,H=hh.DEFAULT_SIZE){const te={id:qg("comp"),componentType:c,designator:"",layer:d,x:v,y:f,color:u,size:H,pinCount:Zg(c),pinConnections:[],orientation:0};switch(te.pinConnections=new Array(te.pinCount).fill(""),(c==="Electrolytic Capacitor"||c==="Diode"||c==="Battery"||c==="ZenerDiode")&&(te.pinPolarities=new Array(te.pinCount).fill("")),c){case"Battery":return{...te,componentType:"Battery"};case"Capacitor":return{...te,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...te,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Diode":return{...te,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...te,componentType:"Fuse"};case"FerriteBead":return{...te,componentType:"FerriteBead"};case"Connector":return{...te,componentType:"Connector",gender:"N/A"};case"Jumper":return{...te,componentType:"Jumper"};case"Relay":return{...te,componentType:"Relay"};case"Inductor":return{...te,componentType:"Inductor"};case"Speaker":return{...te,componentType:"Speaker"};case"Motor":return{...te,componentType:"Motor"};case"PowerSupply":return{...te,componentType:"PowerSupply"};case"Transistor":return{...te,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...te,componentType:"Resistor"};case"ResistorNetwork":return{...te,componentType:"ResistorNetwork"};case"Thermistor":return{...te,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...te,componentType:"Switch"};case"Transformer":return{...te,componentType:"Transformer"};case"TestPoint":return{...te,componentType:"TestPoint"};case"IntegratedCircuit":return{...te,componentType:"IntegratedCircuit"};case"VacuumTube":return{...te,componentType:"VacuumTube"};case"VariableResistor":return{...te,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...te,componentType:"Crystal"};case"ZenerDiode":return{...te,componentType:"ZenerDiode"};default:return{...te,componentType:"Resistor"}}}function Rd(c,d,v){const f=c.componentType==="Electrolytic Capacitor"||c.componentType==="Diode"||c.componentType==="Battery"||c.componentType==="ZenerDiode",u=c.componentType==="Capacitor"&&"dielectric"in c&&c.dielectric==="Tantalum";if(!(f||u)||c.pinCount!==2||!(d.length===2&&d[0]&&d[0].trim()!==""&&d[1]&&d[1].trim()!==""))return null;const te=ce=>{const oe=parseInt(ce,10);if(isNaN(oe))return null;for(const P of v)if((P.type==="via"||P.type==="pad")&&P.points.length>0){const W=P.points[0];if(W.id===oe)return{x:W.x,y:W.y}}return null},ze=te(d[0]),Z=te(d[1]);if(!ze||!Z)return null;const E=Math.hypot(c.x-ze.x,c.y-ze.y),me=Math.hypot(c.x-Z.x,c.y-Z.y),K=["",""];return E<me?(K[0]="-",K[1]="+"):(K[0]="+",K[1]="-"),K}class Kg{parent=new Map;rank=new Map;find(d){return this.parent.has(d)?(this.parent.get(d)!==d&&this.parent.set(d,this.find(this.parent.get(d))),this.parent.get(d)):(this.parent.set(d,d),this.rank.set(d,0),d)}union(d,v){const f=this.find(d),u=this.find(v);if(f===u)return;const H=this.rank.get(f)||0,te=this.rank.get(u)||0;H<te?this.parent.set(f,u):H>te?this.parent.set(u,f):(this.parent.set(u,f),this.rank.set(f,H+1))}getGroups(){const d=new Map;for(const v of this.parent.keys()){const f=this.find(v);d.has(f)||d.set(f,[]),d.get(f).push(v)}return d}}function Jg(c){if(!c)return"UNKNOWN";let d=c.trim();d=d.replace(/\s*(VDC|VAC)\s*$/i,""),d=d.replace(/\s*(DC|AC)\s*$/i,""),d=d.replace(/\s*V\s*$/i,"");const v=d.match(/^([+-])?/),f=v&&v[1]||"+",u=d.match(/(\d+\.?\d*)/);if(!u)return c.trim();const H=u[1];return`${f}${H}V`}function ex(c,d,v,f,u){const H=new Map;let te=0,ze=0,Z=0,E=0;for(const oe of c)if((oe.type==="via"||oe.type==="pad")&&oe.points.length>0){const P=oe.points[0];if(P.id!==void 0)if(!H.has(P.id))H.set(P.id,{id:P.id,type:oe.type==="via"?"via":"pad",x:P.x,y:P.y}),oe.type==="via"?te++:ze++;else{const W=H.get(P.id);W.type==="trace_point"&&(E++,W.type=oe.type==="via"?"via":"pad")}}else if(oe.type==="trace"){for(const P of oe.points)if(P.id!==void 0)if(!H.has(P.id))H.set(P.id,{id:P.id,type:"trace_point",x:P.x,y:P.y}),Z++;else{const W=H.get(P.id);(W.type==="via"||W.type==="pad")&&E++}}console.log(`[Connectivity] Added ${te} vias, ${ze} pads, ${Z} trace points to graph`),E>0&&console.log(`[Connectivity] Found ${E} nodes where vias/pads share Node IDs with trace points (automatic connection)`);for(const oe of v)if(oe.pointId!==void 0){const P=u.find(W=>W.id===oe.powerBusId);H.set(oe.pointId,{id:oe.pointId,type:"power",x:oe.x,y:oe.y,voltage:P?.voltage||oe.type||"UNKNOWN",powerBusId:oe.powerBusId})}for(const oe of f){const P=oe;P.pointId!==void 0&&H.set(P.pointId,{id:P.pointId,type:"ground",x:oe.x,y:oe.y})}let me=0,K=0,ce=0;for(const oe of d){const P=oe.abbreviation?.trim()||oe.designator?.trim();if(P)for(let W=0;W<oe.pinCount;W++){const _e=oe.pinConnections?.[W]||"";if(_e&&_e.trim()!==""){const we=parseInt(_e.trim(),10);if(!isNaN(we)&&we>0)if(me++,!H.has(we))H.set(we,{id:we,type:"component_pin",x:oe.x,y:oe.y,componentId:oe.id,pinIndex:W}),ce++,console.warn(`[Connectivity] Component ${P} pin ${W+1}: Node ID ${we} does NOT exist in vias/pads/traces - creating isolated component pin node`);else{const B=H.get(we),D=B.type;B.componentId=oe.id,B.pinIndex=W,B.type="component_pin",K++,console.log(`[Connectivity] Component ${P} pin ${W+1}: Connected to existing Node ID ${we} (was ${D})`)}}}}return console.log(`[Connectivity] Component pins: ${me} total, ${K} connected to existing nodes, ${ce} isolated (no matching via/pad/trace)`),H}function tx(c,d){const v=new Kg;let f=0,u=0;for(const[me,K]of d)c.has(me)&&c.has(K)?(v.union(me,K),f++):(c.has(me)||u++,c.has(K)||u++);console.log(`[Connectivity] Union-find: Processed ${d.length} connections, ${f} valid, ${u} missing nodes`);const H=[];for(const[me,K]of c)K.type==="ground"&&H.push(me);if(H.length>0)if(H.length>1){const me=H[0];for(let K=1;K<H.length;K++)v.union(me,H[K]);console.log(`[Connectivity] Unified ${H.length} ground nodes into a single net (common ground plane)`)}else console.log("[Connectivity] Found 1 ground node (common ground plane)");const te=new Map;for(const[me,K]of c)if(K.type==="power"&&K.voltage){const ce=Jg(K.voltage);te.has(ce)||te.set(ce,[]),te.get(ce).push(me)}for(const[me,K]of te)if(K.length>0)if(K.length>1){const ce=K[0];for(let oe=1;oe<K.length;oe++)v.union(ce,K[oe]);console.log(`[Connectivity] Unified ${K.length} power nodes with voltage "${me}" into a single net (common power bus)`)}else console.log(`[Connectivity] Found 1 power node with voltage "${me}" (common power bus)`);for(const me of c.keys())v.find(me);const ze=v.getGroups(),Z=new Map;console.log(`[Connectivity] Union-find created ${ze.size} net groups`);const E=new Map;for(const[,me]of ze){const K=me.length;E.set(K,(E.get(K)||0)+1)}console.log("[Connectivity] Net size distribution:",Array.from(E.entries()).sort((me,K)=>K[0]-me[0]).slice(0,10));for(const[me,K]of ze){const ce=K.map(oe=>c.get(oe)).filter(oe=>oe!==void 0);Z.set(me,ce)}return Z}function nx(c,d){const v=new Map;let f=1;for(const[u,H]of c){if(H.some(Z=>Z.type==="ground")){v.set(u,"GND"),console.log(`[NetNames] Net ${u}: Labeled as GND (contains ${H.filter(Z=>Z.type==="ground").length} ground node(s), ${H.filter(Z=>Z.type==="via"||Z.type==="pad").length} via/pad node(s) sharing same Node ID)`);continue}const ze=H.filter(Z=>Z.type==="power");if(ze.length>0){let E=(ze[0].voltage||"UNKNOWN").trim();E&&!E.startsWith("+")&&!E.startsWith("-")&&!E.startsWith("AC")&&(E="+"+E),E&&/^[+-]?\d+\.?\d*$/.test(E.replace(/[Vv]/g,""))&&(E.toUpperCase().endsWith("V")||(E=E+"V")),v.set(u,E);const me=H.filter(K=>K.type==="via"||K.type==="pad").length;console.log(`[NetNames] Net ${u}: Labeled as ${E} (contains ${ze.length} power node(s), ${me} via/pad node(s) sharing same Node ID)`);continue}v.set(u,`N$${f++}`)}return v}function xh(c){if(!c)return"UNKNOWN";let d=c.trim();d=d.replace(/\s*(VDC|VAC)\s*$/i,""),d=d.replace(/\s*(DC|AC)\s*$/i,""),d=d.replace(/\s*V\s*$/i,"");const v=d.match(/^([+-])?/),f=v&&v[1]||"+",u=d.match(/(\d+\.?\d*)/);if(!u)return c.trim();const H=u[1];return`${f}${H}V`}function Zc(c,d,v,f){if(d==="power"){const H=c[d]||"";return typeof H=="string"&&H.trim()!==""?{value:H.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[d]!==void 0||c[v]!==void 0)return{value:c[d]||"",unit:c[v]||f};const u=c[d]||"";if(typeof u=="string"&&u.trim()!==""){const H=u.trim().match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(H)return{value:H[1],unit:H[2]||""};const te=u.trim().match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return te?{value:te[1],unit:te[2]||""}:{value:u.trim(),unit:""}}return{value:"",unit:f}}function Qc(c,d){return!c||c.trim()===""?"":!d||d.trim()===""?c.trim():`${c.trim()}${d.trim()}`}function Kc(c){return{resistance:"",capacitance:"F",inductance:"H",voltage:"V",current:"A",power:"W",impedance:"",capacity:"mAh",esr:"",coilVoltage:"V",inputVoltage:"V",outputVoltage:"V"}[c]||""}function lx(c){if(c.componentType==="Resistor"&&"resistance"in c){const{value:f,unit:u}=Zc(c,"resistance","resistanceUnit",Kc("resistance"));if(f&&f.trim()!=="")return Qc(f,u)}if(c.componentType==="Capacitor"&&"capacitance"in c){const{value:f,unit:u}=Zc(c,"capacitance","capacitanceUnit",Kc("capacitance"));if(f&&f.trim()!=="")return Qc(f,u)}if(c.componentType==="Electrolytic Capacitor"&&"capacitance"in c){const{value:f,unit:u}=Zc(c,"capacitance","capacitanceUnit",Kc("capacitance"));if(f&&f.trim()!=="")return Qc(f,u)}if(c.componentType==="Inductor"&&"inductance"in c){const{value:f,unit:u}=Zc(c,"inductance","inductanceUnit",Kc("inductance"));if(f&&f.trim()!=="")return Qc(f,u)}const d=c.partName?.trim();if(d&&d!=="")return d;const v=c.partNumber?.trim();return v&&v!==""?v:c.componentType}function ix(c,d,v,f){const u=new Map;for(const ce of d.keys())u.has(ce)||u.set(ce,new Set);for(const ce of v)if(ce.type==="trace"&&ce.points.length>=2){const oe=[];for(let P=0;P<ce.points.length;P++){const W=ce.points[P];W&&W.id!==void 0&&W.id!==null&&oe.push({pointIndex:P,nodeId:W.id})}for(let P=0;P<oe.length;P++)for(let W=P+1;W<oe.length;W++){const _e=oe[P].nodeId,we=oe[W].nodeId;d.has(_e)&&d.has(we)&&(u.has(_e)||u.set(_e,new Set),u.has(we)||u.set(we,new Set),u.get(_e).add(we),u.get(we).add(_e))}for(let P=0;P<ce.points.length-1;P++){const W=ce.points[P],_e=ce.points[P+1];if(W&&_e&&W.id!==void 0&&W.id!==null&&_e.id!==void 0&&_e.id!==null){const we=W.id,B=_e.id;d.has(we)&&d.has(B)&&(u.has(we)||u.set(we,new Set),u.has(B)||u.set(B,new Set),u.get(we).add(B),u.get(B).add(we))}}}const H=new Set,te=new Set,ze=new Map;function Z(ce){if(H.has(ce))return;H.add(ce);const oe=d.get(ce);if(!oe)return;if(ce!==c&&oe.type!=="trace_point"&&te.add(ce),oe.type==="component_pin"&&oe.componentId&&oe.pinIndex!==void 0){const W=f.get(oe.componentId);if(W){const _e=`${oe.componentId}:${oe.pinIndex}`;ze.has(_e)||ze.set(_e,[{designator:W,pin:(oe.pinIndex||0)+1}])}}const P=u.get(ce);if(P)for(const W of P)Z(W)}Z(c);const E=Array.from(te).sort((ce,oe)=>ce-oe),me=new Set,K=[];for(const ce of ze.values())for(const oe of ce)me.add(oe.designator),K.push(oe);return K.sort((ce,oe)=>ce.designator!==oe.designator?ce.designator.localeCompare(oe.designator):ce.pin-oe.pin),{connectedNodeIds:E,connectedComponents:Array.from(me).sort(),connectedComponentPins:K}}function ax(c,d,v,f,u){const H=new Map;for(const ze of f){let Z=ze.designator?.trim()||ze.abbreviation?.trim();Z&&(Z==="?"||Z==="??"||Z==="***"||Z==="****"||Z==="*")&&(Z=""),Z&&Z.length>0&&H.set(ze.id,Z)}const te=[];te.push("Node ID,Node Type,Connected Node IDs,Connected Components,Connected Component Pins");for(const[ze,Z]of c){if(Z.type==="trace_point")continue;let E;for(const[C,g]of d)if(g.some(ne=>ne.id===ze)){E=C;break}const me=E?d.get(E)||[]:[];let K;const ce=me.some(C=>C.type==="ground"),oe=me.filter(C=>C.type==="power");if(Z.type==="via"||Z.type==="pad")if(ce)K="Ground";else if(oe.length>0){let g=(oe[0].voltage||"UNKNOWN").trim();g&&!g.startsWith("+")&&!g.startsWith("-")&&!g.startsWith("AC")&&(g="+"+g),g&&/^[+-]?\d+\.?\d*$/.test(g.replace(/[VvDdCcAa]/g,""))&&!g.toUpperCase().endsWith("VDC")&&!g.toUpperCase().endsWith("VAC")&&(g.toUpperCase().endsWith("V")||(g=g+"VDC")),K=`Power ${g}`}else K="Signal";else if(K=ox(Z),ce)K="Ground";else if(oe.length>0&&Z.type==="component_pin"){let g=(oe[0].voltage||"UNKNOWN").trim();g&&!g.startsWith("+")&&!g.startsWith("-")&&!g.startsWith("AC")&&(g="+"+g),g&&/^[+-]?\d+\.?\d*$/.test(g.replace(/[VvDdCcAa]/g,""))&&!g.toUpperCase().endsWith("VDC")&&!g.toUpperCase().endsWith("VAC")&&(g.toUpperCase().endsWith("V")||(g=g+"VDC")),K=`Power ${g}`}const P=ix(ze,c,u,H),W=P.connectedNodeIds,_e=P.connectedComponents,we=P.connectedComponentPins,B=W.length>0?W.join(";"):"",D=_e.length>0?_e.join(";"):"",U=we.length>0?we.map(C=>`${C.designator}:${C.pin}`).join(";"):"",_=C=>C.includes(",")||C.includes('"')||C.includes(`
`)||C.includes(";")?`"${C.replace(/"/g,'""')}"`:C;te.push([ze.toString(),_(K),_(B),_(D),_(U)].join(","))}return te.join(`
`)}function ox(c){switch(c.type){case"via":return"via";case"pad":return"pad";case"trace_point":return"trace_point";case"ground":return"GND";case"power":return c.voltage?`Power ${xh(c.voltage)}`:"Power";case"component_pin":return"component_pin";default:return"unknown"}}function sx(c,d,v,f,u){const H=ex(d,c,v,f,u),te=Array.from(H.values()).filter(R=>R.type==="component_pin");console.log(`[Schematic] Component pin nodes in graph: ${te.length}`),te.length>0&&console.log("[Schematic] Sample component pin nodes:",te.slice(0,5).map(R=>`Node ID ${R.id} (compId: ${R.componentId}, pinIndex: ${R.pinIndex})`));const ze=[];for(const R of d)if(R.type==="trace"&&R.points.length>=2)for(let I=0;I<R.points.length-1;I++){const fe=R.points[I],ae=R.points[I+1];fe&&ae&&fe.id!==void 0&&ae.id!==void 0&&fe.id!==ae.id&&ze.push([fe.id,ae.id])}console.log(`[Schematic] Trace connections: ${ze.length} (connecting nodes with different Node IDs)`);const Z=tx(H,ze),E=nx(Z);console.log(`[Schematic] Net groups created: ${Z.size}`),console.log(`
[Schematic Analysis] ========================================`),console.log("[Schematic Analysis] Starting comprehensive node tree analysis"),console.log("[Schematic Analysis] ========================================");const me=new Map;for(const R of c){let I=R.designator?.trim()||R.abbreviation?.trim();I&&(I==="?"||I==="??"||I==="***"||I==="****"||I==="*")&&(I=""),I&&I.length>0&&me.set(R.id,I)}const K=[],ce=new Map,oe=[];for(const[R,I]of Z){const fe=E.get(R)||`N$${R}`;if(I.filter(Ve=>Ve.type==="ground").length>0){K.push({netId:R,nodeCount:I.length,nodeIds:I.map(Ve=>Ve.id)});continue}const Me=I.filter(Ve=>Ve.type==="power");if(Me.length>0){const Ve=new Map;for(const ge of Me)if(ge.voltage){const Ue=xh(ge.voltage);Ve.has(Ue)||Ve.set(Ue,[]),Ve.get(Ue).push(ge)}for(const[ge]of Ve)ce.has(ge)||ce.set(ge,[]),ce.get(ge).push({netId:R,nodeCount:I.length,nodeIds:I.map(Ue=>Ue.id)});continue}const Be=[];for(const Ve of I)if(Ve.type==="component_pin"&&Ve.componentId&&Ve.pinIndex!==void 0){const ge=me.get(Ve.componentId);ge&&Be.push({designator:ge,pin:(Ve.pinIndex||0)+1,nodeId:Ve.id})}(Be.length>0||I.length>0)&&oe.push({netId:R,netName:fe,componentPins:Be,nodeCount:I.length})}if(console.log(`
[Schematic Analysis] GROUND ANALYSIS:`),K.length===0)console.log("  No ground nets found");else if(K.length===1)console.log("   Single common ground plane identified"),console.log(`    - Net ID: ${K[0].netId}`),console.log(`    - Total nodes: ${K[0].nodeCount}`),console.log(`    - All ${K[0].nodeCount} ground points are connected`);else{console.log(`   WARNING: Multiple ground nets found (${K.length})`);for(const R of K)console.log(`    - Net ID ${R.netId}: ${R.nodeCount} nodes`);console.log("  Note: All ground points should be in a single net (common ground plane)")}if(console.log(`
[Schematic Analysis] POWER BUS ANALYSIS:`),ce.size===0)console.log("  No power buses found");else{console.log(`   Found ${ce.size} distinct power bus(es) by voltage:`);for(const[R,I]of ce)if(console.log(`
  Power Bus: ${R}`),I.length===1)console.log(`    - Single net (Net ID: ${I[0].netId})`),console.log(`    - Total nodes: ${I[0].nodeCount}`),console.log(`    - All power nodes at ${R} are connected`);else{console.log(`    -  WARNING: ${R} appears in ${I.length} separate nets:`);for(const fe of I)console.log(`      * Net ID ${fe.netId}: ${fe.nodeCount} nodes`);console.log("    - Note: All power nodes with the same voltage should be in a single net")}}console.log(`
[Schematic Analysis] COMPONENT CONNECTIONS:`);const P=new Map;for(const R of oe)for(const I of R.componentPins)P.has(I.designator)||P.set(I.designator,[]),P.get(I.designator).push({pin:I.pin,netName:R.netName,nodeId:I.nodeId});if(console.log(`  Total components with connections: ${P.size}`),P.size>0){console.log("  Sample component connections (first 10):");let R=0;for(const[I,fe]of P){if(R++>=10)break;const ae=fe.map(Me=>`pin${Me.pin}${Me.netName}`).join(", ");console.log(`    - ${I}: ${fe.length} pins connected (${ae})`)}}console.log(`
[Schematic Analysis] SIGNAL NET SUMMARY:`);const W=oe.filter(R=>R.componentPins.length>0),_e=oe.filter(R=>R.componentPins.length>=2);if(console.log(`  - Total signal nets: ${oe.length}`),console.log(`  - Nets with component pins: ${W.length}`),console.log(`  - Nets with 2+ component pins: ${_e.length}`),console.log(`  - Isolated nets (no component pins): ${oe.length-W.length}`),_e.length>0){console.log(`
  Sample signal nets with 2+ pins (first 5):`);let R=0;for(const I of _e){if(R++>=5)break;const fe=I.componentPins.map(ae=>`${ae.designator}:pin${ae.pin}`).join(", ");console.log(`    - ${I.netName}: ${I.componentPins.length} pins (${fe})`)}}if(console.log(`
[Schematic Analysis] ========================================`),console.log("[Schematic Analysis] Analysis complete"),console.log(`[Schematic Analysis] ========================================
`),te.length>0){const R=[];for(const I of te){let fe=!1;for(const[,ae]of Z)if(ae.some(Me=>Me.id===I.id)){fe=!0;break}if(!fe){const ae=c.find(Be=>Be.id===I.componentId),Me=ae&&(ae.abbreviation?.trim()||ae.designator?.trim())||"UNKNOWN";R.push({compId:I.componentId||"unknown",designator:Me,pinIndex:I.pinIndex||0,nodeId:I.id})}}if(R.length>0){console.warn(`[Schematic] Found ${R.length} isolated component pins (not in any net):`);for(const I of R.slice(0,10))console.warn(`  - ${I.designator} pin ${I.pinIndex+1} at Node ID ${I.nodeId}`)}else console.log("[Schematic] All component pins are in nets")}const we=new Map;for(const R of c){let I=R.designator?.trim()||R.abbreviation?.trim();I&&(I==="?"||I==="??"||I==="***"||I==="****"||I==="*")&&(I=""),I&&I.length>0?(we.set(R.id,I),console.log(`[Schematic] Mapped component ${R.id} to designator "${I}"`)):console.warn(`[Schematic] Component ${R.id} (type: ${R.componentType}) has no valid designator`)}console.log(`[Schematic] Component ID to designator map: ${we.size} components`);const B=[];let D=0,U=0;const _=new Map;for(const[R,I]of Z){D++;const fe=[];for(const ae of I)ae.type==="component_pin"&&ae.componentId&&ae.pinIndex!==void 0&&(fe.push(ae),U++);fe.length>0&&_.set(R,fe)}for(const[R,I]of Z){const fe=E.get(R)||`N$${R}`,ae=[];let Me=!1,Be=!1,Ve,ge=0,Ue=0;for(const Ye of I)if(Ye.type==="component_pin"&&Ye.componentId&&Ye.pinIndex!==void 0){const wt=we.get(Ye.componentId);if(wt)ae.push({designator:wt,pin:(Ye.pinIndex||0)+1});else{const Ae=c.find(pt=>pt.id===Ye.componentId),Fe=Ae?Ae.designator?.trim()||Ae.abbreviation?.trim()||"NONE":"NOT_FOUND";console.warn(`[Schematic] Component pin found but no designator in map for componentId: ${Ye.componentId}, component designator: "${Fe}", node: Node ID ${Ye.id}, pinIndex: ${Ye.pinIndex}`)}}else if(Ye.type==="power"){Me=!0;const wt=Ye.voltage||Ve||"";if(wt){let Ae=wt.trim();Ae&&!Ae.startsWith("+")&&!Ae.startsWith("-")&&!Ae.startsWith("AC")&&(Ae="+"+Ae),Ae&&/^[+-]?\d+\.?\d*$/.test(Ae.replace(/[Vv]/g,""))&&(Ae.toUpperCase().endsWith("V")||(Ae=Ae+"V")),Ve=Ae}}else Ye.type==="ground"?Be=!0:Ye.type==="via"?ge++:Ye.type==="trace_point"&&Ue++;B.push({name:fe,componentPins:ae,hasPower:Me,hasGround:Be,powerVoltage:Ve,viaCount:ge,tracePointCount:Ue})}console.log(`[Schematic] Total net groups: ${D}, Component pins found: ${U}`),console.log(`[Schematic] Nets with component pins: ${_.size}`),console.log(`[Schematic] Generated ${B.length} total nets (including power/ground and single-pin connections)`);const C=B.filter(R=>R.componentPins.length>=2).length,g=B.filter(R=>R.hasPower).length,ne=B.filter(R=>R.hasGround).length;if(console.log(`[Schematic] - ${C} nets with 2+ component pins`),console.log(`[Schematic] - ${g} power nets`),console.log(`[Schematic] - ${ne} ground nets`),_.size>0){console.log("[Schematic] Sample nets with component pins:");let R=0;for(const[I,fe]of _){if(R++>=5)break;const ae=E.get(I)||`N$${I}`,Me=fe.map(Be=>`${we.get(Be.componentId)||"unknown"}:pin${(Be.pinIndex||0)+1}@NodeID${Be.id}`);console.log(`  Net ${ae} (root Node ID ${I}): ${fe.length} pins - ${Me.join(", ")}`)}}B.length>0?console.log(`[Schematic] First net: ${B[0].name} with ${B[0].componentPins.length} pins:`,B[0].componentPins):(console.warn("[Schematic] No nets with 2+ component pins found! Each component pin is in its own net."),console.warn("[Schematic] This suggests component pins are not connected through traces/vias."));const De=new Map,nt=c.filter(R=>{let I=R.designator?.trim()||R.abbreviation?.trim();return I&&(I==="?"||I==="??"||I==="***"||I==="****"||I==="*")&&(I=""),!!I&&I.length>0});if(nt.length>0){let R=1/0,I=1/0,fe=-1/0,ae=-1/0;for(const qe of nt)R=Math.min(R,qe.x),I=Math.min(I,qe.y),fe=Math.max(fe,qe.x),ae=Math.max(ae,qe.y);const Me=fe-R,Be=ae-I,Ve=30,ge=297-2*Ve,Ue=420-2*Ve,Ye=Me>0?ge/Me:.1,wt=Be>0?Ue/Be:.1;let Ae=Math.min(Ye,wt);Ae=Math.max(.01,Math.min(Ae,2));const ke=Me*Ae,ct=Be*Ae,dt=Ve+(ge-ke)/2,At=Ve+(Ue-ct)/2;for(const qe of nt){let Qe=qe.designator?.trim()||qe.abbreviation?.trim();if(Qe&&(Qe==="?"||Qe==="??"||Qe==="***"||Qe==="****"||Qe==="*")&&(Qe=""),Qe&&Qe.length>0){const pn=(qe.x-R)*Ae+dt,Wn=(qe.y-I)*Ae+At;De.set(Qe,{comp:qe,designator:Qe,x:pn,y:Wn})}}console.log(`[Schematic] Component positioning: ${De.size} components`),console.log(`[Schematic] PCB bounds: ${R.toFixed(1)}, ${I.toFixed(1)} to ${fe.toFixed(1)}, ${ae.toFixed(1)}`),console.log(`[Schematic] PCB size: ${Me.toFixed(1)} x ${Be.toFixed(1)} pixels`),console.log(`[Schematic] Usable area: ${ge.toFixed(1)} x ${Ue.toFixed(1)} mm (A3 paper with ${Ve}mm margins)`),console.log(`[Schematic] Scale factor: ${Ae.toFixed(4)} (${(1/Ae).toFixed(2)} pixels per mm)`),console.log(`[Schematic] Scaled size: ${ke.toFixed(1)} x ${ct.toFixed(1)} mm`),console.log(`[Schematic] Schematic bounds: ${dt.toFixed(1)}mm, ${At.toFixed(1)}mm to ${(dt+ke).toFixed(1)}mm, ${(At+ct).toFixed(1)}mm`)}let T=`(kicad_sch (version 20201015) (generator simple_schematic)
`;T+=`  (paper "A3")
`,T+=`  (title_block
`,T+=`    (title "")
`,T+=`    (date "")
`,T+=`    (rev "")
`,T+=`    (company "")
`,T+=`  )
`,T+=`
`,T+=`  (lib_symbols
`,T+=`    (symbol "simple:Power" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,T+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,T+=`        (effects (font (size 1.27 1.27)) hide)
`,T+=`      )
`,T+=`      (symbol "Power_0_1"
`,T+=`        (polyline (pts (xy 0 0) (xy 0 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -1.27 0) (xy 1.27 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -0.635 -1.27) (xy 0.635 -1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -0.3175 -1.905) (xy 0.3175 -1.905)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`      )
`,T+=`    )
`,T+=`    (symbol "simple:Ground" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,T+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,T+=`        (effects (font (size 1.27 1.27)) hide)
`,T+=`      )
`,T+=`      (symbol "Ground_0_1"
`,T+=`        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -2.54 2.54) (xy 2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -1.27 3.81) (xy 1.27 3.81)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -0.635 4.445) (xy 0.635 4.445)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`      )
`,T+=`    )
`,T+=`    (symbol "simple:Resistor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,T+=`      (property "Reference" "R" (id 0) (at 0 3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (symbol "Resistor_0_1"
`,T+=`        (polyline (pts (xy -3.81 0) (xy -2.54 0) (xy -1.27 1.27) (xy 0 -1.27) (xy 1.27 1.27) (xy 2.54 -1.27) (xy 3.81 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (pin passive line (at -6.35 0 0) (length 2.54)
`,T+=`          (name "1" (effects (font (size 1.27 1.27))))
`,T+=`          (number "1" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`        (pin passive line (at 6.35 0 180) (length 2.54)
`,T+=`          (name "2" (effects (font (size 1.27 1.27))))
`,T+=`          (number "2" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`      )
`,T+=`    )
`,T+=`    (symbol "simple:Capacitor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,T+=`      (property "Reference" "C" (id 0) (at 0 3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (symbol "Capacitor_0_1"
`,T+=`        (polyline (pts (xy 0 -2.54) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -2.54 -2.54) (xy -2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy 2.54 -2.54) (xy 2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,T+=`          (name "1" (effects (font (size 1.27 1.27))))
`,T+=`          (number "1" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,T+=`          (name "2" (effects (font (size 1.27 1.27))))
`,T+=`          (number "2" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`      )
`,T+=`    )
`,T+=`    (symbol "simple:Diode" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,T+=`      (property "Reference" "D" (id 0) (at 0 3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (symbol "Diode_0_1"
`,T+=`        (polyline (pts (xy -2.54 0) (xy 0 -2.54) (xy 0 2.54) (xy -2.54 0)) (stroke (width 0.254) (type default)) (fill (type background)))
`,T+=`        (polyline (pts (xy 0 -2.54) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,T+=`          (name "1" (effects (font (size 1.27 1.27))))
`,T+=`          (number "1" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,T+=`          (name "2" (effects (font (size 1.27 1.27))))
`,T+=`          (number "2" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`      )
`,T+=`    )
`,T+=`    (symbol "simple:Switch" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,T+=`      (property "Reference" "SW" (id 0) (at 0 3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (symbol "Switch_0_1"
`,T+=`        (polyline (pts (xy -3.81 0) (xy -1.27 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy 1.27 0) (xy 3.81 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -1.27 -1.27) (xy 1.27 1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,T+=`          (name "1" (effects (font (size 1.27 1.27))))
`,T+=`          (number "1" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,T+=`          (name "2" (effects (font (size 1.27 1.27))))
`,T+=`          (number "2" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`      )
`,T+=`    )
`,T+=`    (symbol "simple:Transistor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,T+=`      (property "Reference" "Q" (id 0) (at 0 3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (symbol "Transistor_0_1"
`,T+=`        (polyline (pts (xy 0 -2.54) (xy 0 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -2.54 0) (xy 0 0) (xy 2.54 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -1.27 -1.27) (xy 0 -2.54) (xy 1.27 -1.27)) (stroke (width 0.254) (type default)) (fill (type background)))
`,T+=`        (pin passive line (at 0 -5.08 90) (length 2.54)
`,T+=`          (name "1" (effects (font (size 1.27 1.27))))
`,T+=`          (number "1" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`        (pin passive line (at -3.81 0 0) (length 2.54)
`,T+=`          (name "2" (effects (font (size 1.27 1.27))))
`,T+=`          (number "2" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`        (pin passive line (at 3.81 0 180) (length 2.54)
`,T+=`          (name "3" (effects (font (size 1.27 1.27))))
`,T+=`          (number "3" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`      )
`,T+=`    )
`,T+=`    (symbol "simple:Inductor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,T+=`      (property "Reference" "L" (id 0) (at 0 3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (symbol "Inductor_0_1"
`,T+=`        (arc (start -2.54 0) (mid -1.27 0) (end 0 0) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (arc (start 0 0) (mid 1.27 0) (end 2.54 0) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,T+=`          (name "1" (effects (font (size 1.27 1.27))))
`,T+=`          (number "1" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,T+=`          (name "2" (effects (font (size 1.27 1.27))))
`,T+=`          (number "2" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`      )
`,T+=`    )
`,T+=`    (symbol "simple:Battery" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,T+=`      (property "Reference" "B" (id 0) (at 0 3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (symbol "Battery_0_1"
`,T+=`        (polyline (pts (xy -3.81 -1.27) (xy -3.81 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy -1.27 -1.27) (xy -1.27 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy 1.27 -1.27) (xy 1.27 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,T+=`        (polyline (pts (xy 3.81 -1.27) (xy 3.81 1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,T+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,T+=`          (name "1" (effects (font (size 1.27 1.27))))
`,T+=`          (number "1" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,T+=`          (name "2" (effects (font (size 1.27 1.27))))
`,T+=`          (number "2" (effects (font (size 1.27 1.27))))
`,T+=`        )
`,T+=`      )
`,T+=`    )
`;const Xe=(R,I,fe=20)=>{const ae=R.includes(":")?R.split(":")[1]:R;T+=`    (symbol "${R}" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,T+=`      (property "Reference" "${I}" (id 0) (at 0 2.54 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,T+=`        (effects (font (size 1.27 1.27)))
`,T+=`      )
`,T+=`      (symbol "${ae}_0_1"
`,T+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,T+=`          (stroke (width 0.254)) (fill (type background))
`,T+=`        )
`,T+=`      )
`;for(let Me=1;Me<=fe;Me++){T+=`      (symbol "${ae}_1_${Me}"
`;const Be=Math.ceil(Me/2),Ve=Math.floor(Me/2);for(let ge=0;ge<Be;ge++){const Ue=ge+1,Ye=Be>1?-((Be-1)*2.54/2)+ge*2.54:0;T+=`        (pin passive line (at ${-5.08} ${Ye} 0) (length 2.54)
`,T+=`          (name "${Ue}" (effects (font (size 1.27 1.27))))
`,T+=`          (number "${Ue}" (effects (font (size 1.27 1.27))))
`,T+=`        )
`}for(let ge=0;ge<Ve;ge++){const Ue=Be+ge+1,Ye=Ve>1?-((Ve-1)*2.54/2)+ge*2.54:0;T+=`        (pin passive line (at ${5.08} ${Ye} 180) (length 2.54)
`,T+=`          (name "${Ue}" (effects (font (size 1.27 1.27))))
`,T+=`          (number "${Ue}" (effects (font (size 1.27 1.27))))
`,T+=`        )
`}T+=`      )
`}T+=`    )
`};Xe("simple:IC","U",20),Xe("simple:Generic","REF",20),T+=`  )
`,T+=`
`;let Ee=1;const vt=()=>`00000000-0000-0000-0000-${String(Ee++).padStart(12,"0")}`,lt=R=>{switch(R){case"Resistor":case"ResistorNetwork":case"VariableResistor":case"Thermistor":return"simple:Resistor";case"Capacitor":case"Electrolytic Capacitor":return"simple:Capacitor";case"Diode":case"ZenerDiode":return"simple:Diode";case"Switch":return"simple:Switch";case"Transistor":return"simple:Transistor";case"Inductor":return"simple:Inductor";case"Battery":return"simple:Battery";case"IntegratedCircuit":return"simple:IC";default:return"simple:Generic"}},V=(R,I)=>{if(!R.pinConnections||R.pinConnections.length===0)return 0;const fe=[];for(let Me=0;Me<R.pinConnections.length;Me++){const Be=R.pinConnections[Me];if(Be&&Be.trim()!==""){const Ve=parseInt(Be.trim(),10);if(!isNaN(Ve)&&I.has(Ve)){const ge=I.get(Ve);(ge.type==="via"||ge.type==="pad")&&fe.push({pinIndex:Me,x:ge.x,y:ge.y})}}}if(fe.length<2)return 0;if(R.pinCount===2&&fe.length>=2){const Me=fe.find(Ve=>Ve.pinIndex===0),Be=fe.find(Ve=>Ve.pinIndex===1);if(Me&&Be){const Ve=Me.x-R.x,ge=Me.y-R.y;return Math.abs(Ve)>Math.abs(ge)?Ve<0?0:180:ge<0?90:270}}const ae=fe.find(Me=>Me.pinIndex===0);if(ae){const Me=ae.x-R.x,Be=ae.y-R.y;return Math.abs(Me)>Math.abs(Be)?Me<0?Be<0?0:270:Be<0?90:180:Be<0?Me<0?0:90:Me<0?270:180}return 0};for(const[R,I]of De){const fe=vt(),ae=I.comp,Me=lt(ae.componentType);let Be=ae.rotation!==void 0?ae.rotation:V(ae,H);Be=Math.round(Be/90)*90,Be<0&&(Be+=360),Be>=360&&(Be-=360);const Ve=ae.pinCount||2;let ge=1;(Me==="simple:IC"||Me==="simple:Generic")&&(ge=Math.min(Math.max(Ve,1),20)),T+=`  (symbol (lib_id "${Me}") (at ${I.x} ${I.y} ${Be}) (unit ${ge})
`,T+=`    (in_bom yes) (on_board yes) (dnp no)
`,T+=`    (uuid ${fe})
`,T+=`    (property "Reference" "${R}" (id 0) (at ${I.x} ${I.y+3.81} 0)
`,T+=`      (effects (font (size 1.27 1.27)))
`,T+=`    )
`,T+=`    (property "Value" "${lx(ae)}" (id 1) (at ${I.x} ${I.y-3.81} 0)
`,T+=`      (effects (font (size 1.27 1.27)))
`,T+=`    )
`,T+=`  )
`}T+=`
`;let J=25.4,Ne=25.4;const et=25.4,yt=new Map;console.log(`[Schematic] Processing ${B.length} nets for wire generation`);for(const R of B){let I=function(ge,Ue){if(ge===Ue)return!0;if(!Ve.has(ge)||!Ve.has(Ue))return!1;const Ye=new Set,wt=[ge];for(Ye.add(ge);wt.length>0;){const Ae=wt.shift();if(Ae===Ue)return!0;const Fe=Ve.get(Ae);if(Fe)for(const pt of Fe)Ye.has(pt)||(Ye.add(pt),wt.push(pt))}return!1};if(R.hasPower&&R.powerVoltage){const ge=`PWR_${R.powerVoltage}`;if(!yt.has(ge)){const Ue=vt();yt.set(ge,{x:J,y:Ne,uuid:Ue}),T+=`  (symbol (lib_id "simple:Power") (at ${J} ${Ne} 0) (unit 1)
`,T+=`    (in_bom no) (on_board no) (dnp no)
`,T+=`    (uuid ${Ue})
`,T+=`    (property "Reference" "#PWR" (id 0) (at ${J} ${Ne} 0)
`,T+=`      (effects (font (size 1.27 1.27)) hide)
`,T+=`    )
`,T+=`    (property "Value" "${R.powerVoltage}" (id 1) (at ${J} ${Ne-5.08} 0)
`,T+=`      (effects (font (size 1.27 1.27)))
`,T+=`    )
`,T+=`  )
`,J+=et}}if(R.hasGround&&!yt.has("GND")){const Ue=vt();yt.set("GND",{x:J,y:Ne,uuid:Ue}),T+=`  (symbol (lib_id "simple:Ground") (at ${J} ${Ne} 0) (unit 1)
`,T+=`    (in_bom no) (on_board no) (dnp no)
`,T+=`    (uuid ${Ue})
`,T+=`    (property "Reference" "#PWR" (id 0) (at ${J} ${Ne} 0)
`,T+=`      (effects (font (size 1.27 1.27)) hide)
`,T+=`    )
`,T+=`    (property "Value" "GND" (id 1) (at ${J} ${Ne+5.08} 0)
`,T+=`      (effects (font (size 1.27 1.27)))
`,T+=`    )
`,T+=`  )
`,J+=et}if(R.componentPins.length===0)continue;console.log(`[Schematic] Processing net ${R.name} with ${R.componentPins.length} component pins:`,R.componentPins);const fe=[...R.componentPins].sort((ge,Ue)=>{const Ye=ge.designator.localeCompare(Ue.designator);return Ye!==0?Ye:ge.pin-Ue.pin}),ae=[];for(const ge of fe){const Ue=De.get(ge.designator);if(!Ue){console.warn(`[Schematic] Component ${ge.designator} not found in componentMap for net ${R.name}`);continue}const Ye=Ue.comp,wt=Ye.pinCount||2,Ae=2.54;let Fe,pt;if(wt===2){const ke=lt(Ye.componentType);ke==="simple:Resistor"?ge.pin===1?(Fe=Ue.x-6.35,pt=Ue.y):(Fe=Ue.x+6.35,pt=Ue.y):ge.pin===1?(Fe=Ue.x-5.08,pt=Ue.y):(Fe=Ue.x+5.08,pt=Ue.y)}else if(wt===3&&lt(Ye.componentType)==="simple:Transistor")ge.pin===1?(Fe=Ue.x,pt=Ue.y-5.08):ge.pin===2?(Fe=Ue.x-3.81,pt=Ue.y):(Fe=Ue.x+3.81,pt=Ue.y);else{const ke=Math.ceil(wt/2),ct=Math.floor(wt/2);if(ge.pin<=ke){Fe=Ue.x-5.08;const At=ge.pin-1;pt=Ue.y-(ke-1)*Ae/2+At*Ae}else{Fe=Ue.x+5.08;const At=ge.pin-ke-1;pt=Ue.y-(ct-1)*Ae/2+At*Ae}}ae.push({x:Fe,y:pt,designator:ge.designator,pin:ge.pin})}const Me=new Map;for(const ge of ae){const Ue=`${ge.designator}:${ge.pin}`;Me.has(Ue)||Me.set(Ue,new Set)}const Be=new Map;for(const ge of R.componentPins){const Ue=c.find(Ye=>(Ye.abbreviation?.trim()||Ye.designator?.trim())===ge.designator);if(Ue&&Ue.pinConnections&&Ue.pinConnections[ge.pin-1]){const Ye=Ue.pinConnections[ge.pin-1],wt=parseInt(Ye.trim(),10);if(!isNaN(wt)){const Ae=`${ge.designator}:${ge.pin}`;Be.set(Ae,wt)}}}const Ve=new Map;for(const ge of H.keys())Ve.has(ge)||Ve.set(ge,new Set);for(const ge of d)if(ge.type==="trace"&&ge.points.length>=2){const Ue=ge.points.map(Ye=>Ye.id).filter(Ye=>Ye!==void 0&&H.has(Ye));for(let Ye=0;Ye<Ue.length-1;Ye++){const wt=Ue[Ye],Ae=Ue[Ye+1];wt!==void 0&&Ae!==void 0&&(Ve.has(wt)||Ve.set(wt,new Set),Ve.has(Ae)||Ve.set(Ae,new Set),Ve.get(wt).add(Ae),Ve.get(Ae).add(wt))}}for(const[ge,Ue]of Be)for(const[Ye,wt]of Be)ge!==Ye&&(Ue===wt||I(Ue,wt))&&(Me.get(ge).add(Ye),Me.get(Ye).add(ge));if(ae.length>=1){const ge=ae.length>1?ae.reduce((pt,ke)=>pt+ke.x,0)/ae.length:ae[0].x+10,Ue=ae.length>1?ae.reduce((pt,ke)=>pt+ke.y,0)/ae.length:ae[0].y;if(R.hasPower&&R.powerVoltage){const pt=`PWR_${R.powerVoltage}`,ke=yt.get(pt);if(ke){const ct=ke.y-2.54,dt=ke.x,At=vt();T+=`  (junction (at ${dt} ${ct}) (diameter 0) (color 0 0 0 0) (uuid ${At}))
`;const qe=ae.length===1?ae[0]:{x:ge,y:Ue},Qe=vt();T+=`  (wire (pts (xy ${qe.x} ${qe.y}) (xy ${dt} ${ct})) (stroke (width 0) (type default)) (uuid ${Qe}))
`}}if(R.hasGround){const ke=yt.get("GND");if(ke){const ct=ke.y+2.54,dt=ke.x,At=vt();T+=`  (junction (at ${dt} ${ct}) (diameter 0) (color 0 0 0 0) (uuid ${At}))
`;const qe=ae.length===1?ae[0]:{x:ge,y:Ue},Qe=vt();T+=`  (wire (pts (xy ${qe.x} ${qe.y}) (xy ${dt} ${ct})) (stroke (width 0) (type default)) (uuid ${Qe}))
`}}if(ae.length>=2){console.log(`[Schematic] Creating wires for net ${R.name}: ${ae.length} pins`);const pt=new Map;for(const dt of ae){const At=`${dt.designator}:${dt.pin}`;pt.set(At,{x:dt.x,y:dt.y})}const ke=new Set,ct=[];for(const[dt,At]of Me)for(const qe of At)if(pt.has(dt)&&pt.has(qe)){const Qe=pt.get(dt),pn=pt.get(qe),Wn=Math.sqrt(Math.pow(pn.x-Qe.x,2)+Math.pow(pn.y-Qe.y,2));ct.push({from:dt,to:qe,distance:Wn})}if(ct.length>0){ct.sort((Qe,pn)=>Qe.distance-pn.distance);const dt=new Map,At=Qe=>(dt.has(Qe)||dt.set(Qe,Qe),dt.get(Qe)!==Qe&&dt.set(Qe,At(dt.get(Qe))),dt.get(Qe)),qe=(Qe,pn)=>{const Wn=At(Qe),Oe=At(pn);return Wn!==Oe?(dt.set(Oe,Wn),!0):!1};for(const Qe of ct)if(qe(Qe.from,Qe.to)){const pn=pt.get(Qe.from),Wn=pt.get(Qe.to),Oe=vt();T+=`  (wire (pts (xy ${pn.x} ${pn.y}) (xy ${Wn.x} ${Wn.y})) (stroke (width 0) (type default)) (uuid ${Oe}))
`,ke.add(Qe.from),ke.add(Qe.to)}}else if(ae.length===2){const dt=vt();T+=`  (wire (pts (xy ${ae[0].x} ${ae[0].y}) (xy ${ae[1].x} ${ae[1].y})) (stroke (width 0) (type default)) (uuid ${dt}))
`}else{const dt=[...ae].sort((At,qe)=>Math.abs(At.y-qe.y)<5?At.x-qe.x:At.y-qe.y);for(let At=0;At<dt.length-1;At++){const qe=vt();T+=`  (wire (pts (xy ${dt[At].x} ${dt[At].y}) (xy ${dt[At+1].x} ${dt[At+1].y})) (stroke (width 0) (type default)) (uuid ${qe}))
`}}}else if(ae.length===1){console.log(`[Schematic] Creating junction for single-pin net ${R.name} at (${ae[0].x}, ${ae[0].y})`);const pt=vt();T+=`  (junction (at ${ae[0].x} ${ae[0].y}) (diameter 0.508) (color 0 0 0 0) (uuid ${pt}))
`}else console.warn(`[Schematic] Net ${R.name} has ${R.componentPins.length} component pins but 0 valid pin positions!`);const Ye=ae.length>1?Ue+5.08:ae[0].y+5.08,wt=ae.length>1?ge:ae[0].x,Ae=vt(),Fe=R.hasPower&&R.powerVoltage?R.powerVoltage:R.hasGround?"GND":R.name;T+=`  (text "${Fe}" (at ${wt} ${Ye} 0)
`,T+=`    (effects (font (size 1.27 1.27)))
`,T+=`    (uuid ${Ae})
`,T+=`  )
`}}T+=`)
`;const M=ax(H,Z,E,c,d);return{schematic:T,nodesCsv:M}}function rx(){const c=new Date,d=c.getFullYear(),v=String(c.getMonth()+1).padStart(2,"0"),f=String(c.getDate()).padStart(2,"0"),u=String(c.getHours()).padStart(2,"0"),H=String(c.getMinutes()).padStart(2,"0"),te=String(c.getSeconds()).padStart(2,"0");return`${d}_${v}_${f}-${u}-${H}-${te}`}const cx=({openMenu:c,setOpenMenu:d,isReadOnlyMode:v,currentProjectFilePath:f,onNewProject:u,onOpenProject:H,onSaveProject:te,onSaveAs:ze,onExportSchematic:Z,onPrint:E,hasUnsavedChanges:me,setNewProjectDialog:K,setAutoSaveDialog:ce,topImage:oe,bottomImage:P,selectedImageForTransform:W,setSelectedImageForTransform:_e,setCurrentTool:we,transformMode:B,setTransformMode:D,updateImageTransform:U,resetImageTransform:_,isGrayscale:C,setIsGrayscale:g,isBlackAndWhiteEdges:ne,setIsBlackAndWhiteEdges:De,isBlackAndWhiteInverted:nt,setIsBlackAndWhiteInverted:T,areImagesLocked:Xe,setAreImagesLocked:Ee,onEnterBoardDimensions:vt,fileInputTopRef:lt,fileInputBottomRef:V,openProjectRef:J,increaseSize:Ne,decreaseSize:et,brushSize:yt,drawingStrokes:M,selectedIds:R,selectedComponentIds:I,selectedPowerIds:fe,selectedGroundIds:ae,componentsTop:Me,componentsBottom:Be,powers:Ve,grounds:ge,setSetSizeDialog:Ue,areViasLocked:Ye,setAreViasLocked:wt,arePadsLocked:Ae,setArePadsLocked:Fe,areTracesLocked:pt,setAreTracesLocked:ke,areComponentsLocked:ct,setAreComponentsLocked:dt,areGroundNodesLocked:At,setAreGroundNodesLocked:qe,arePowerNodesLocked:Qe,setArePowerNodesLocked:pn,setSelectedIds:Wn,setSelectedComponentIds:Oe,setSelectedPowerIds:Ki,setSelectedGroundIds:Ut,selectAllVias:In,selectAllTraces:Ql,selectAllPads:Ps,selectAllComponents:Ia,selectDisconnectedComponents:Xs,selectAllPowerNodes:Vt,selectAllGroundNodes:Mi,setShowPowerBusManager:Ln,menuBarRef:Ol})=>{const An=()=>{if(R.size>0){const ot=M.filter(un=>R.has(un.id));if(ot.length>0)return ot[0].size}else if(I.size>0){const ot=[...Me,...Be].find(un=>I.has(un.id));if(ot)return ot.size||18}else if(fe.size>0){const ot=Ve.find(un=>fe.has(un.id));if(ot)return ot.size}else if(ae.size>0){const ot=ge.find(un=>ae.has(un.id));if(ot)return ot.size||18}return yt};return i.jsxs("div",{ref:Ol,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ot=>{ot.stopPropagation(),d(un=>un==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),c==="file"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{v||(d(null),me()?K({visible:!0}):u())},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"New Project"}),i.jsx("button",{onClick:async()=>{await H(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{v||(te(),d(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Save Project"}),i.jsx("button",{onClick:()=>{v||(ze(),d(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Save As"}),i.jsx("button",{onClick:()=>{v||(ce({visible:!0,interval:5}),d(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Auto Save"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{v||(Z(),d(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Export Simple Schematic"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{E(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),i.jsx("button",{onClick:()=>{E(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ot=>{v||(ot.stopPropagation(),d(un=>un==="transform"?null:"transform"))},disabled:v,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="transform"?"#eef3ff":"#fff",fontWeight:600,color:v?"#999":"#222",cursor:v?"not-allowed":"pointer",opacity:v?.5:1},children:"Images "}),c==="transform"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),i.jsx("button",{onClick:()=>{v||(lt.current?.click(),d(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Load Top PCB"}),i.jsx("button",{onClick:()=>{v||(V.current?.click(),d(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Load Bottom PCB"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{vt(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Enter PCB Dimensions"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),i.jsxs("button",{disabled:!oe,onClick:()=>{_e("top"),we("transform"),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[W==="top"?" ":"","Top Image"]}),i.jsxs("button",{disabled:!P,onClick:()=>{_e("bottom"),we("transform"),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:P?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[W==="bottom"?" ":"","Bottom Image"]}),i.jsxs("button",{disabled:!oe||!P,onClick:()=>{_e("both"),we("transform"),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe&&P?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[W==="both"?" ":"","Both Images"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{if(W)if(W==="both"){const ot=!oe?.flipX;U("both",{flipX:ot})}else{const ot=W==="top"?oe?.flipX||!1:P?.flipX||!1;U(W,{flipX:!ot})}d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Horizontal Flip"}),i.jsx("button",{onClick:()=>{if(W)if(W==="both"){const ot=!oe?.flipY;U("both",{flipY:ot})}else{const ot=W==="top"?oe?.flipY||!1:P?.flipY||!1;U(W,{flipY:!ot})}d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Vertical Flip"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{D("nudge"),we("transform"),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[B==="nudge"?" ":"","Mode: Nudge"]}),i.jsxs("button",{onClick:()=>{D("scale"),we("transform"),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[B==="scale"?" ":"","Mode: Scale"]}),i.jsxs("button",{onClick:()=>{D("rotate"),we("transform"),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[B==="rotate"?" ":"","Mode: Rotate"]}),i.jsxs("button",{onClick:()=>{D("slant"),we("transform"),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[B==="slant"?" ":"","Mode: Slant"]}),i.jsxs("button",{onClick:()=>{D("keystone"),we("transform"),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[B==="keystone"?" ":"","Mode: Keystone"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{we("transform"),C||ne?(g(!1),De(!1),T(!1)):g(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:C||ne?"Color Mode":"Grayscale Mode"}),i.jsx("button",{onClick:()=>{we("transform"),ne?T(ot=>!ot):(De(!0),T(!1)),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:ne?"Invert Edges":"Black & White Edges"}),i.jsx("button",{onClick:()=>{we("transform"),_(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Reset Transform"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{Ee(ot=>!ot),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Images ",Xe?"":""]})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ot=>{v||(ot.stopPropagation(),d(un=>un==="tools"?null:"tools"))},disabled:v,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="tools"?"#eef3ff":"#fff",fontWeight:600,color:v?"#999":"#222",cursor:v?"not-allowed":"pointer",opacity:v?.5:1},children:"Tools "}),c==="tools"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{Ne(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),i.jsx("button",{onClick:()=>{et(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ue({visible:!0,size:An()}),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Set Size"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{wt(ot=>!ot),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Vias ",Ye?"":""]}),i.jsxs("button",{onClick:()=>{Fe(ot=>!ot),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Pads ",Ae?"":""]}),i.jsxs("button",{onClick:()=>{ke(ot=>!ot),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Traces ",pt?"":""]}),i.jsxs("button",{onClick:()=>{dt(ot=>!ot),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Components ",ct?"":""]}),i.jsxs("button",{onClick:()=>{qe(ot=>!ot),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Ground Node ",At?"":""]}),i.jsxs("button",{onClick:()=>{pn(ot=>!ot),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Power Nodes ",Qe?"":""]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select All"}),i.jsx("button",{onClick:()=>{In(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Vias"}),i.jsx("button",{onClick:()=>{Ql(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Traces"}),i.jsx("button",{onClick:()=>{Ps(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Pads"}),i.jsx("button",{onClick:()=>{Ia(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Components"}),i.jsx("button",{onClick:()=>{Vt(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Power Nodes"}),i.jsx("button",{onClick:()=>{Mi(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Ground Nodes"}),i.jsx("button",{onClick:()=>{Xs(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select Disconnected"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ln(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ot=>{ot.stopPropagation(),d(un=>un==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),c==="about"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:400,maxWidth:600,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:16,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 12px 0",color:"#000",fontSize:"18px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"This application supports typical 4-layer PCBs and allows you to load top and bottom PCB images, trace connections, place components, and export schematics in KiCad format."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:i.jsx("strong",{children:"Key Features:"})}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Load and align top and bottom PCB images"}),i.jsx("li",{children:"Trace connections with automatic node snapping"}),i.jsx("li",{children:"Place and annotate components with pin connections"}),i.jsx("li",{children:"Manage power buses and ground connections"}),i.jsx("li",{children:"Export to KiCad schematic format"}),i.jsx("li",{children:"Auto-save functionality for project management"})]}),i.jsxs("p",{style:{margin:"0 0 0 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to create new projects, save your work, and export schematics. The ",i.jsx("strong",{children:"Images"})," menu provides tools for aligning and transforming PCB images. The ",i.jsx("strong",{children:"Tools"})," menu offers size adjustments and locking controls for different PCB elements."]})]})})]}),f&&i.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:i.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:f,children:f})})]})},ux=({visible:c})=>c?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),i.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to start a new project."]}),i.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"Images"})," menu to load PCB photos."]})]}):null,dx=({visible:c,title:d,message:v,onClose:f})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:u=>{u.target===u.currentTarget&&f()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:u=>u.stopPropagation(),children:[i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),i.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:d})]}),i.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:v}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:i.jsx("button",{onClick:f,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,fx=({visible:c,selectedIds:d,selectedComponentIds:v,selectedPowerIds:f,selectedGroundIds:u,drawingStrokes:H,componentsTop:te,componentsBottom:ze,powers:Z,grounds:E,powerBuses:me,onClose:K,setComponentsTop:ce,setComponentsBottom:oe,determineViaType:P,determinePadType:W,onFindComponent:_e,position:we,isDragging:B,onDragStart:D})=>{if(!c)return null;const U=we?{position:"fixed",left:`${we.x}px`,top:`${we.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:B?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},_={padding:"20px",overflow:"auto",flex:1};return i.jsxs("div",{style:U,children:[i.jsxs("div",{onMouseDown:C=>{const g=C.target;g.tagName==="BUTTON"||g.closest("button")||we&&D(C)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:B?"grabbing":we?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Detailed Information"}),i.jsx("button",{onClick:K,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:_,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const C=H.filter(T=>d.has(T.id)).length,g=[...te,...ze].filter(T=>v.has(T.id)).length,ne=Z.filter(T=>f.has(T.id)).length,De=E.filter(T=>u.has(T.id)).length,nt=C+g+ne+De;return i.jsx("div",{style:{padding:"12px 16px",backgroundColor:nt>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:nt>0?"#333":"#856404",marginBottom:"8px"},children:nt>0?`${nt} Object${nt!==1?"s":""} Selected`:"Zero Objects Selected"})})(),v.size>0&&(()=>{const C=H.some(g=>d.has(g.id)&&(g.type==="via"||g.type==="pad"));return[...te,...ze].filter(g=>v.has(g.id)).map(g=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:g.componentType})]}),_e&&i.jsx("button",{onClick:()=>{_e(g.id,g.x,g.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ne=>{ne.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ne=>{ne.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Layer: ",g.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("span",{children:["Designator: ",g.designator||"(empty)"]}),C&&i.jsx("button",{onClick:()=>{const ne=[...te,...ze].filter(V=>v.has(V.id)&&V.componentType===g.componentType),De=ne.length,nt=H.filter(V=>d.has(V.id)&&V.type==="pad"&&V.points.length>0&&V.points[0].id!==void 0).map(V=>{const J=V.points[0].id;if(J===void 0)throw new Error("Unexpected undefined id");return{stroke:V,nodeId:J}}).sort((V,J)=>V.nodeId-J.nodeId),T=nt.length>0?nt:H.filter(V=>d.has(V.id)&&V.type==="via"&&V.points.length>0&&V.points[0].id!==void 0).map(V=>{const J=V.points[0].id;if(J===void 0)throw new Error("Unexpected undefined id");return{stroke:V,nodeId:J}}).sort((V,J)=>V.nodeId-J.nodeId),Xe=T.length;if(Xe===0){console.warn("No vias or pads with Node IDs found in selection");return}const Ee=Math.floor(Xe/De);if(Ee===0){console.warn(`Not enough ${nt.length>0?"pads":"vias"} (${Xe}) for ${De} components`);return}[...ne].sort((V,J)=>V.id.localeCompare(J.id)).forEach((V,J)=>{const Ne=J*Ee,et=Ne+Ee,M=T.slice(Ne,et).map(I=>I.nodeId.toString()),R=Rd(V,M,H);V.layer==="top"?ce(I=>I.map(fe=>{if(fe.id===V.id){const ae={...fe,pinCount:Ee,pinConnections:M};return R&&(ae.pinPolarities=R),ae}return fe})):oe(I=>I.map(fe=>{if(fe.id===V.id){const ae={...fe,pinCount:Ee,pinConnections:M};return R&&(ae.pinPolarities=R),ae}return fe}))});const lt=nt.length>0?"pads":"vias";console.log(`Connected ${De} components of type ${g.componentType} to ${Xe} ${lt} (${Ee} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:ne=>{ne.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ne=>{ne.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),i.jsxs("div",{children:["Abbreviation: ",g.abbreviation||"(empty)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:g.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:g.color})]}),i.jsxs("div",{children:["Size: ",g.size]}),i.jsxs("div",{children:["Pin Count: ",g.pinCount]}),g.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[g.capacitance&&i.jsxs("div",{children:["Capacitance: ",g.capacitance]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.dielectric&&i.jsxs("div",{children:["Dielectric: ",g.dielectric]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[g.capacitance&&i.jsxs("div",{children:["Capacitance: ",g.capacitance]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]}),g.polarity&&i.jsxs("div",{children:["Polarity: ",g.polarity]}),g.esr&&i.jsxs("div",{children:["ESR: ",g.esr]}),g.temperature&&i.jsxs("div",{children:["Temperature: ",g.temperature]})]}),g.orientation!==void 0&&g.orientation!==null&&i.jsxs("div",{children:["Orientation: ",g.orientation,""]}),g.pinConnections&&g.pinConnections.length>0&&(()=>{const ne=g.componentType==="Electrolytic Capacitor"||g.componentType==="Diode"||g.componentType==="Battery"||g.componentType==="ZenerDiode",De=g.componentType==="Capacitor"&&"dielectric"in g&&g.dielectric==="Tantalum",nt=ne||De;return i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),nt&&i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:g.pinConnections.map((T,Xe)=>{const Ee=g.pinPolarities&&g.pinPolarities.length>Xe?g.pinPolarities[Xe]:"";return i.jsxs("tr",{style:{backgroundColor:Xe%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Xe+1}),nt&&i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:Ee==="+"?"#d32f2f":Ee==="-"?"#1976d2":"#999"},children:Ee||"-"}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:T||"(not connected)"})]},Xe)})})]})]})})(),"manufacturer"in g&&g.manufacturer&&i.jsxs("div",{children:["Manufacturer: ",g.manufacturer]}),"partNumber"in g&&g.partNumber&&i.jsxs("div",{children:["Part Number: ",g.partNumber]}),g.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[g.diodeType&&i.jsxs("div",{children:["Type: ",g.diodeType]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.ledColor&&i.jsxs("div",{children:["LED Color: ",g.ledColor]})]}),g.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.capacity&&i.jsxs("div",{children:["Capacity: ",g.capacity]}),g.chemistry&&i.jsxs("div",{children:["Chemistry: ",g.chemistry]})]}),g.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.fuseType&&i.jsxs("div",{children:["Type: ",g.fuseType]})]}),g.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[g.impedance&&i.jsxs("div",{children:["Impedance: ",g.impedance]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[g.connectorType&&i.jsxs("div",{children:["Type: ",g.connectorType]}),g.gender&&i.jsxs("div",{children:["Gender: ",g.gender]})]}),g.componentType==="Jumper"&&i.jsx(i.Fragment,{children:g.positions&&i.jsxs("div",{children:["Positions: ",g.positions]})}),g.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[g.coilVoltage&&i.jsxs("div",{children:["Coil Voltage: ",g.coilVoltage]}),g.contactType&&i.jsxs("div",{children:["Contact Type: ",g.contactType]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[g.inductance&&i.jsxs("div",{children:["Inductance: ",g.inductance]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.resistance&&i.jsxs("div",{children:["DC Resistance: ",g.resistance]})]}),g.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[g.impedance&&i.jsxs("div",{children:["Impedance: ",g.impedance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]})]}),g.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[g.motorType&&i.jsxs("div",{children:["Type: ",g.motorType]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[g.inputVoltage&&i.jsxs("div",{children:["Input Voltage: ",g.inputVoltage]}),g.outputVoltage&&i.jsxs("div",{children:["Output Voltage: ",g.outputVoltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[g.transistorType&&i.jsxs("div",{children:["Type: ",g.transistorType]}),g.polarity&&i.jsxs("div",{children:["Polarity: ",g.polarity]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.configuration&&i.jsxs("div",{children:["Configuration: ",g.configuration]})]}),g.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.thermistorType&&i.jsxs("div",{children:["Type: ",g.thermistorType]}),g.beta&&i.jsxs("div",{children:["Beta: ",g.beta]})]}),g.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[g.switchType&&i.jsxs("div",{children:["Type: ",g.switchType]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]})]}),g.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[g.primaryVoltage&&i.jsxs("div",{children:["Primary Voltage: ",g.primaryVoltage]}),g.secondaryVoltage&&i.jsxs("div",{children:["Secondary Voltage: ",g.secondaryVoltage]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.turns&&i.jsxs("div",{children:["Turns Ratio: ",g.turns]})]}),g.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:g.signal&&i.jsxs("div",{children:["Signal: ",g.signal]})}),g.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[g.description&&i.jsxs("div",{children:["Description: ",g.description]}),g.icType&&i.jsxs("div",{children:["IC Type: ",g.icType]}),g.datasheet&&i.jsxs("div",{children:["Datasheet: ",i.jsx("a",{href:g.datasheet,target:"_blank",rel:"noopener noreferrer",children:g.datasheet})]})]}),g.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:g.tubeType&&i.jsxs("div",{children:["Type: ",g.tubeType]})}),g.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[g.vrType&&i.jsxs("div",{children:["Type: ",g.vrType]}),g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.taper&&i.jsxs("div",{children:["Taper: ",g.taper]})]}),g.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[g.frequency&&i.jsxs("div",{children:["Frequency: ",g.frequency]}),g.loadCapacitance&&i.jsxs("div",{children:["Load Capacitance: ",g.loadCapacitance]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[g.voltage&&i.jsxs("div",{children:["Zener Voltage: ",g.voltage]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),i.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})})]})]},g.id))})(),d.size>0&&H.filter(C=>d.has(C.id)&&C.type==="via"&&C.points.length>0).map(C=>{const g=C.points[0],ne=C.viaType||(g.id!==void 0?P(g.id,me):"Via (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ne})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[g.id&&i.jsxs("div",{children:["Node ID: ",g.id]}),i.jsx("div",{children:"Layer: Top and Bottom"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:C.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:C.color})]}),i.jsxs("div",{children:["Size: ",C.size]}),i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})]})]},C.id)}),d.size>0&&H.filter(C=>d.has(C.id)&&C.type==="pad"&&C.points.length>0).map(C=>{const g=C.points[0],ne=C.padType||(g.id!==void 0?W(g.id,me):"Pad (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ne})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[g.id&&i.jsxs("div",{children:["Node ID: ",g.id]}),i.jsxs("div",{children:["Layer: ",C.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:C.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:C.color})]}),i.jsxs("div",{children:["Size: ",C.size]}),i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})]})]},C.id)}),d.size>0&&H.filter(C=>d.has(C.id)&&C.type==="trace").map(C=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:C.type||"unknown"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[C.points.length>0&&i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",C.points.length]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:C.points.map((g,ne)=>i.jsxs("tr",{style:{backgroundColor:ne%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ne}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.x.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.y.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.id||"(none)"})]},ne))})]})]}),i.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",C.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:C.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:C.color})]}),i.jsxs("div",{children:["Size: ",C.size]})]})]},C.id)),f.size>0&&Z.filter(C=>f.has(C.id)).map(C=>{const g=me.find(ne=>ne.id===C.powerBusId);return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:C.type||(g?`${g.name} Power Node`:"Power Node")})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",C.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:C.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:C.color})]}),i.jsxs("div",{children:["Size: ",C.size]}),i.jsxs("div",{children:["Layer: ",C.layer]}),i.jsxs("div",{children:["Power Bus: ",g?.name||C.powerBusId||"(unknown)"]}),i.jsxs("div",{children:["Position: x=",C.x.toFixed(2),", y=",C.y.toFixed(2)]})]})]},C.id)}),u.size>0&&E.filter(C=>u.has(C.id)).map(C=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:C.type||"Ground Node"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",C.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:C.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:C.color})]}),i.jsxs("div",{children:["Size: ",C.size]}),i.jsxs("div",{children:["Position: x=",C.x.toFixed(2),", y=",C.y.toFixed(2)]})]})]},C.id))]})})]})},px=({visible:c,dimensions:d,onSave:v,onClose:f})=>{const[u,H]=j.useState(""),[te,ze]=j.useState(""),[Z,E]=j.useState("inches");j.useEffect(()=>{c&&d?(H(d.width.toString()),ze(d.height.toString()),E(d.unit)):c&&(H(""),ze(""),E("inches"))},[c,d]);const me=()=>{const ce=parseFloat(u),oe=parseFloat(te);if(isNaN(ce)||ce<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(oe)||oe<=0){alert("Please enter a valid height greater than 0");return}v({width:ce,height:oe,unit:Z}),f()},K=()=>{f()};return c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:ce=>{ce.target===ce.currentTarget&&K()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:ce=>ce.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:u,onChange:ce=>H(ce.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:Z,onChange:ce=>E(ce.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:te,onChange:ce=>ze(ce.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:Z,onChange:ce=>E(ce.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:K,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),i.jsx("button",{onClick:me,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},hx=({component:c,componentEditor:d,setComponentEditor:v,areComponentsLocked:f})=>i.jsxs(i.Fragment,{children:[c.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:u=>v({...d,resistance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||Le("resistance"),onChange:u=>v({...d,resistanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("resistance").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:u=>v({...d,power:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"5%",onChange:u=>v({...d,tolerance:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.05%",children:"0.05%"}),i.jsx("option",{value:"0.1%",children:"0.1%"}),i.jsx("option",{value:"0.25%",children:"0.25%"}),i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:d.capacitance||"",onChange:u=>v({...d,capacitance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:d.capacitanceUnit||Le("capacitance"),onChange:u=>v({...d,capacitanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("capacitance").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||Le("voltage"),onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-dielectric-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),i.jsxs("select",{id:`component-dielectric-${c.id}`,value:d.dielectric||"Ceramic",onChange:u=>v({...d,dielectric:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Ceramic",children:"Ceramic"}),i.jsx("option",{value:"Tantalum",children:"Tantalum"}),i.jsx("option",{value:"Film",children:"Film"}),i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Mica",children:"Mica"}),i.jsx("option",{value:"Paper",children:"Paper"}),i.jsx("option",{value:"Glass",children:"Glass"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"10%",onChange:u=>v({...d,tolerance:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:d.capacitance||"",onChange:u=>v({...d,capacitance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),i.jsxs("select",{value:d.capacitanceUnit||"F",onChange:u=>v({...d,capacitanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:[i.jsx("option",{value:"pF",children:"pF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"mF",children:"mF"}),i.jsx("option",{value:"F",children:"F"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 25"}),i.jsx("select",{value:d.voltageUnit||Le("voltage"),onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"20%",onChange:u=>v({...d,tolerance:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:d.polarityCapacitor||c.polarity||"Positive",onChange:u=>v({...d,polarityCapacitor:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Positive",children:"Positive"}),i.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),c.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inductance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),i.jsx("input",{id:`component-inductance-${c.id}`,type:"text",value:d.inductance||"",onChange:u=>v({...d,inductance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.inductanceUnit||Le("inductance"),onChange:u=>v({...d,inductanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("inductance").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Le("current"),onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:u=>v({...d,resistance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.resistanceUnit||"",onChange:u=>v({...d,resistanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("resistance").map(u=>i.jsx("option",{value:u,children:u},u))})]})]}),c.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-diodetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),i.jsxs("select",{id:`component-diodetype-${c.id}`,value:d.diodeType||"Standard",onChange:u=>v({...d,diodeType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Standard",children:"Standard"}),i.jsx("option",{value:"Zener",children:"Zener"}),i.jsx("option",{value:"LED",children:"LED"}),i.jsx("option",{value:"Schottky",children:"Schottky"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),d.diodeType==="LED"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ledcolor-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),i.jsxs("select",{id:`component-ledcolor-${c.id}`,value:d.ledColor||"",onChange:u=>v({...d,ledColor:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"Red",children:"Red"}),i.jsx("option",{value:"Green",children:"Green"}),i.jsx("option",{value:"Blue",children:"Blue"}),i.jsx("option",{value:"Yellow",children:"Yellow"}),i.jsx("option",{value:"Orange",children:"Orange"}),i.jsx("option",{value:"White",children:"White"}),i.jsx("option",{value:"RGB",children:"RGB"}),i.jsx("option",{value:"IR",children:"IR (Infrared)"}),i.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||Le("voltage"),onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Le("current"),onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]})]}),c.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 3.7"}),i.jsx("select",{value:d.voltageUnit||"V",onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),i.jsx("input",{id:`component-capacity-${c.id}`,type:"text",value:d.capacity||"",onChange:u=>v({...d,capacity:u.target.value}),disabled:f,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 2000mAh"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-chemistry-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),i.jsxs("select",{id:`component-chemistry-${c.id}`,value:d.chemistry||"Li-ion",onChange:u=>v({...d,chemistry:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Li-ion",children:"Li-ion"}),i.jsx("option",{value:"LiPo",children:"LiPo"}),i.jsx("option",{value:"NiMH",children:"NiMH"}),i.jsx("option",{value:"NiCd",children:"NiCd"}),i.jsx("option",{value:"Alkaline",children:"Alkaline"}),i.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),i.jsx("option",{value:"Lithium",children:"Lithium"}),i.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),c.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:d.currentUnit||"A",onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:d.voltageUnit||"V",onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-fusetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),i.jsxs("select",{id:`component-fusetype-${c.id}`,value:d.fuseType||"Fast-blow",onChange:u=>v({...d,fuseType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),i.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),i.jsx("option",{value:"Time-delay",children:"Time-delay"}),i.jsx("option",{value:"Resettable",children:"Resettable"}),i.jsx("option",{value:"Cartridge",children:"Cartridge"}),i.jsx("option",{value:"Glass",children:"Glass"}),i.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),c.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-coilvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),i.jsx("input",{id:`component-coilvoltage-${c.id}`,type:"text",value:d.coilVoltage||"",onChange:u=>v({...d,coilVoltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.coilVoltageUnit||Le("voltage"),onChange:u=>v({...d,coilVoltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-contacttype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),i.jsxs("select",{id:`component-contacttype-${c.id}`,value:d.contactType||"SPST",onChange:u=>v({...d,contactType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),i.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),i.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),i.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),i.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),i.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.currentUnit||Le("current"),onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]})]}),c.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-motortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),i.jsxs("select",{id:`component-motortype-${c.id}`,value:d.motorType||"DC",onChange:u=>v({...d,motorType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"DC",children:"DC Motor"}),i.jsx("option",{value:"Stepper",children:"Stepper Motor"}),i.jsx("option",{value:"Servo",children:"Servo Motor"}),i.jsx("option",{value:"Brushless",children:"Brushless DC"}),i.jsx("option",{value:"AC",children:"AC Motor"}),i.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.voltageUnit||Le("voltage"),onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Le("current"),onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]})]}),c.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-switchtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),i.jsxs("select",{id:`component-switchtype-${c.id}`,value:d.switchType||"Toggle",onChange:u=>v({...d,switchType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Toggle",children:"Toggle"}),i.jsx("option",{value:"Push-button",children:"Push-button"}),i.jsx("option",{value:"Slide",children:"Slide"}),i.jsx("option",{value:"Rotary",children:"Rotary"}),i.jsx("option",{value:"DIP",children:"DIP Switch"}),i.jsx("option",{value:"Momentary",children:"Momentary"}),i.jsx("option",{value:"Latching",children:"Latching"}),i.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:d.currentUnit||Le("current"),onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:d.voltageUnit||Le("voltage"),onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]})]}),c.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:d.impedance||"",onChange:u=>v({...d,impedance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:d.impedanceUnit||Le("impedance"),onChange:u=>v({...d,impedanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("impedance").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Le("current"),onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]})]}),c.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-connectortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),i.jsx("input",{id:`component-connectortype-${c.id}`,type:"text",value:d.connectorType||"",onChange:u=>v({...d,connectorType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-gender-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),i.jsxs("select",{id:`component-gender-${c.id}`,value:d.gender||"N/A",onChange:u=>v({...d,gender:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),c.componentType==="Jumper"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-positions-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),i.jsx("input",{id:`component-positions-${c.id}`,type:"number",min:"2",value:d.positions||3,onChange:u=>v({...d,positions:parseInt(u.target.value)||3}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"}})]})}),c.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:d.impedance||"",onChange:u=>v({...d,impedance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 8"}),i.jsx("select",{value:d.impedanceUnit||Le("impedance"),onChange:u=>v({...d,impedanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("impedance").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:u=>v({...d,power:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]})]}),c.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),i.jsx("input",{id:`component-inputvoltage-${c.id}`,type:"text",value:d.inputVoltage||"",onChange:u=>v({...d,inputVoltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:d.inputVoltageUnit||Le("voltage"),onChange:u=>v({...d,inputVoltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-outputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),i.jsx("input",{id:`component-outputvoltage-${c.id}`,type:"text",value:d.outputVoltage||"",onChange:u=>v({...d,outputVoltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.outputVoltageUnit||Le("voltage"),onChange:u=>v({...d,outputVoltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Le("current"),onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]})]}),c.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-transistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),i.jsxs("select",{id:`component-transistortype-${c.id}`,value:d.transistorType||"BJT",onChange:u=>v({...d,transistorType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),i.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),i.jsx("option",{value:"MOSFET",children:"MOSFET"}),i.jsx("option",{value:"IGBT",children:"IGBT"}),i.jsx("option",{value:"JFET",children:"JFET"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:d.polarity||"NPN",onChange:u=>v({...d,polarity:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NPN",children:"NPN"}),i.jsx("option",{value:"PNP",children:"PNP"}),i.jsx("option",{value:"N-Channel",children:"N-Channel"}),i.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||Le("voltage"),onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:u=>v({...d,current:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Le("current"),onChange:u=>v({...d,currentUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("current").map(u=>i.jsx("option",{value:u,children:u},u))})]})]}),c.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:u=>v({...d,resistance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||Le("resistance"),onChange:u=>v({...d,resistanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("resistance").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-configuration-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),i.jsx("input",{id:`component-configuration-${c.id}`,type:"text",value:d.configuration||"",onChange:u=>v({...d,configuration:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),c.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:u=>v({...d,resistance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||Le("resistance"),onChange:u=>v({...d,resistanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("resistance").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-thermistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),i.jsxs("select",{id:`component-thermistortype-${c.id}`,value:d.thermistorType||"NTC",onChange:u=>v({...d,thermistorType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),i.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-beta-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),i.jsx("input",{id:`component-beta-${c.id}`,type:"text",value:d.beta||"",onChange:u=>v({...d,beta:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),c.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-primaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),i.jsx("input",{id:`component-primaryvoltage-${c.id}`,type:"text",value:d.primaryVoltage||"",onChange:u=>v({...d,primaryVoltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:d.primaryVoltageUnit||Le("voltage"),onChange:u=>v({...d,primaryVoltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-secondaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),i.jsx("input",{id:`component-secondaryvoltage-${c.id}`,type:"text",value:d.secondaryVoltage||"",onChange:u=>v({...d,secondaryVoltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.secondaryVoltageUnit||Le("voltage"),onChange:u=>v({...d,secondaryVoltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:u=>v({...d,power:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-turns-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),i.jsx("input",{id:`component-turns-${c.id}`,type:"text",value:d.turns||"",onChange:u=>v({...d,turns:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),c.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-signal-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),i.jsx("input",{id:`component-signal-${c.id}`,type:"text",value:d.signal||"",onChange:u=>v({...d,signal:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),c.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ictype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),i.jsxs("select",{id:`component-ictype-${c.id}`,value:d.icType||"Op-Amp",onChange:u=>v({...d,icType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),i.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),i.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),i.jsx("option",{value:"Logic",children:"Logic"}),i.jsx("option",{value:"Memory",children:"Memory"}),i.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),i.jsx("option",{value:"Timer",children:"Timer"}),i.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),i.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),i.jsx("option",{value:"Comparator",children:"Comparator"}),i.jsx("option",{value:"Transceiver",children:"Transceiver"}),i.jsx("option",{value:"Driver",children:"Driver"}),i.jsx("option",{value:"Amplifier",children:"Amplifier"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-datasheet-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),i.jsx("input",{id:`component-datasheet-${c.id}`,type:"text",value:d.datasheet||"",onChange:u=>v({...d,datasheet:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"URL"})]})]}),c.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tubetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),i.jsx("input",{id:`component-tubetype-${c.id}`,type:"text",value:d.tubeType||"",onChange:u=>v({...d,tubeType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),c.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-vrtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),i.jsxs("select",{id:`component-vrtype-${c.id}`,value:d.vrType||"Potentiometer",onChange:u=>v({...d,vrType:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),i.jsx("option",{value:"Rheostat",children:"Rheostat"}),i.jsx("option",{value:"Trimmer",children:"Trimmer"}),i.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:u=>v({...d,resistance:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||Le("resistance"),onChange:u=>v({...d,resistanceUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("resistance").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:u=>v({...d,power:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-taper-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),i.jsxs("select",{id:`component-taper-${c.id}`,value:d.taper||"Linear",onChange:u=>v({...d,taper:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Linear",children:"Linear"}),i.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),i.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),c.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-frequency-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),i.jsx("input",{id:`component-frequency-${c.id}`,type:"text",value:d.frequency||"",onChange:u=>v({...d,frequency:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-loadcapacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),i.jsx("input",{id:`component-loadcapacitance-${c.id}`,type:"text",value:d.loadCapacitance||"",onChange:u=>v({...d,loadCapacitance:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"10ppm",onChange:u=>v({...d,tolerance:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"10ppm",children:"10ppm"}),i.jsx("option",{value:"20ppm",children:"20ppm"}),i.jsx("option",{value:"30ppm",children:"30ppm"}),i.jsx("option",{value:"50ppm",children:"50ppm"}),i.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),c.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:u=>v({...d,voltage:u.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5.1"}),i.jsx("select",{value:d.voltageUnit||Le("voltage"),onChange:u=>v({...d,voltageUnit:u.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:Gt("voltage").map(u=>i.jsx("option",{value:u,children:u},u))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:u=>v({...d,power:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"5%",onChange:u=>v({...d,tolerance:u.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),gx=c=>{const d=lu[c];return!d||!d.prefix||d.prefix.length<1?"?":d.prefix[0].substring(0,1).toUpperCase()},xx=({componentEditor:c,setComponentEditor:d,componentsTop:v,componentsBottom:f,setComponentsTop:u,setComponentsBottom:H,connectingPin:te,setConnectingPin:ze,componentDialogPosition:Z,setComponentDialogPosition:E,isDraggingDialog:me,setIsDraggingDialog:K,dialogDragOffset:ce,setDialogDragOffset:oe,areComponentsLocked:P})=>{if(!c||!c.visible)return null;let W=v.find(D=>D.id===c.id),_e="top";if(W||(W=f.find(D=>D.id===c.id),_e="bottom"),!W)return null;c.layer!==_e&&d({...c,layer:_e});const we=D=>{const U={...D};if(U.designator=c.designator,U.x=c.x,U.y=c.y,U.layer=c.layer,U.orientation=c.orientation??0,U.abbreviation=c.abbreviation.trim()||gx(D.componentType),"manufacturer"in U&&(U.manufacturer=c.manufacturer),"partNumber"in U&&(U.partNumber=c.partNumber),c.pinCount!==D.pinCount){U.pinCount=c.pinCount;const _=D.pinConnections||[];if(U.pinConnections=new Array(c.pinCount).fill("").map((C,g)=>g<_.length?_[g]:""),D.pinPolarities){const C=D.pinPolarities||[];U.pinPolarities=new Array(c.pinCount).fill("").map((g,ne)=>ne<C.length?C[ne]:"")}}else U.pinConnections=D.pinConnections||[],D.pinPolarities&&(U.pinPolarities=D.pinPolarities);return D.componentType==="Resistor"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.tolerance=c.tolerance||void 0):D.componentType==="Capacitor"?(U.capacitance=c.capacitance||void 0,U.capacitanceUnit=c.capacitanceUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.tolerance=c.tolerance||void 0,U.dielectric=c.dielectric||void 0):D.componentType==="Electrolytic Capacitor"?(U.capacitance=c.capacitance||void 0,U.capacitanceUnit=c.capacitanceUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.tolerance=c.tolerance||void 0,U.polarity=c.polarityCapacitor||void 0,U.esr=c.esr||void 0,U.esrUnit=c.esrUnit||void 0,U.temperature=c.temperature||void 0):D.componentType==="Diode"?(U.diodeType=c.diodeType||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.ledColor=c.ledColor||void 0):D.componentType==="Battery"?(U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.capacity=c.capacity||void 0,U.capacityUnit=c.capacityUnit||void 0,U.chemistry=c.chemistry||void 0):D.componentType==="Fuse"?(U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.fuseType=c.fuseType||void 0):D.componentType==="FerriteBead"?(U.impedance=c.impedance||void 0,U.impedanceUnit=c.impedanceUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):D.componentType==="Connector"?(U.connectorType=c.connectorType||void 0,U.gender=c.gender||void 0):D.componentType==="Jumper"?U.positions=c.positions||void 0:D.componentType==="Relay"?(U.coilVoltage=c.coilVoltage||void 0,U.coilVoltageUnit=c.coilVoltageUnit||void 0,U.contactType=c.contactType||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):D.componentType==="Inductor"?(U.inductance=c.inductance||void 0,U.inductanceUnit=c.inductanceUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0):D.componentType==="Speaker"?(U.impedance=c.impedance||void 0,U.impedanceUnit=c.impedanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0):D.componentType==="Motor"?(U.motorType=c.motorType||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):D.componentType==="PowerSupply"?(U.inputVoltage=c.inputVoltage||void 0,U.inputVoltageUnit=c.inputVoltageUnit||void 0,U.outputVoltage=c.outputVoltage||void 0,U.outputVoltageUnit=c.outputVoltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):D.componentType==="Transistor"?(U.transistorType=c.transistorType||void 0,U.polarity=c.polarity||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):D.componentType==="ResistorNetwork"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.configuration=c.configuration||void 0):D.componentType==="Thermistor"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.thermistorType=c.thermistorType||void 0,U.beta=c.beta||void 0):D.componentType==="Switch"?(U.switchType=c.switchType||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0):D.componentType==="Transformer"?(U.primaryVoltage=c.primaryVoltage||void 0,U.primaryVoltageUnit=c.primaryVoltageUnit||void 0,U.secondaryVoltage=c.secondaryVoltage||void 0,U.secondaryVoltageUnit=c.secondaryVoltageUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.turns=c.turns||void 0):D.componentType==="TestPoint"?U.signal=c.signal||void 0:D.componentType==="IntegratedCircuit"?(U.description=c.description||c.designator||void 0,U.datasheet=c.datasheet||void 0,U.icType=c.icType||void 0,c.description&&(U.designator=c.description)):D.componentType==="VacuumTube"?U.tubeType=c.tubeType||void 0:D.componentType==="VariableResistor"?(U.vrType=c.vrType||void 0,U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.taper=c.taper||void 0):D.componentType==="Crystal"?(U.frequency=c.frequency||void 0,U.loadCapacitance=c.loadCapacitance||void 0,U.tolerance=c.tolerance||void 0):D.componentType==="ZenerDiode"&&(U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.tolerance=c.tolerance||void 0),U},B=()=>{if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const D=v.find(C=>C.id===c.id),U=f.find(C=>C.id===c.id),_=D||U;if(_){const C=we(_),g=_.layer,ne=c.layer;g!==ne?g==="top"?(u(De=>De.filter(nt=>nt.id!==c.id)),H(De=>[...De,C])):(H(De=>De.filter(nt=>nt.id!==c.id)),u(De=>[...De,C])):ne==="top"?u(De=>De.map(nt=>nt.id===c.id?C:nt)):H(De=>De.map(nt=>nt.id===c.id?C:nt))}else if(console.warn(`Component ${c.id} not found in either layer array`),c.layer==="top"){const C=f.find(g=>g.id===c.id);if(C){const g=we(C);H(ne=>ne.filter(De=>De.id!==c.id)),u(ne=>[...ne,g])}}else{const C=v.find(g=>g.id===c.id);if(C){const g=we(C);u(ne=>ne.filter(De=>De.id!==c.id)),H(ne=>[...ne,g])}}d(null),ze(null)};return i.jsxs("div",{"data-component-editor-dialog":!0,onClick:D=>{if(te&&te.componentId===W.id){const U=D.target;(U.tagName==="BUTTON"||U.tagName==="INPUT"||U.closest("button")||U.closest("input"))&&D.stopPropagation()}},style:{position:"fixed",top:Z?`${Z.y}px`:"50%",left:Z?`${Z.x}px`:"50%",transform:"translate(-50%, -50%)",background:te&&te.componentId===W.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:me?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:D=>{const U=D.target;U.tagName==="BUTTON"||U.tagName==="INPUT"||U.closest("button")||U.closest("input")||Z&&(oe({x:D.clientX-Z.x,y:D.clientY-Z.y}),K(!0),D.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:me?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),i.jsx("button",{onClick:()=>{d(null),ze(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),i.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:W.componentType})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-layer-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),i.jsxs("select",{id:`component-layer-${W.id}`,name:`component-layer-${W.id}`,value:c.layer,onChange:D=>d({...c,layer:D.target.value}),disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-orientation-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),i.jsxs("select",{id:`component-orientation-${W.id}`,name:`component-orientation-${W.id}`,value:c.orientation??0,onChange:D=>{const U=parseInt(D.target.value)||0;if(d({...c,orientation:U}),!P){const C=(c.layer==="top"?v:f).find(g=>g.id===c.id);if(C){const g={...C,orientation:U};c.layer==="top"?u(ne=>ne.map(De=>De.id===c.id?g:De)):H(ne=>ne.map(De=>De.id===c.id?g:De))}}},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0",children:"0"}),i.jsx("option",{value:"90",children:"90"}),i.jsx("option",{value:"180",children:"180"}),i.jsx("option",{value:"270",children:"270"})]})]}),i.jsx(hx,{component:W,componentEditor:c,setComponentEditor:d,areComponentsLocked:P}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{htmlFor:`component-abbreviation-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),i.jsx("input",{id:`component-abbreviation-${W.id}`,name:`component-abbreviation-${W.id}`,type:"text",maxLength:4,value:c.abbreviation.replace(/\*/g,""),onChange:D=>{const U=D.target.value.substring(0,4).toUpperCase();d({...c,abbreviation:U})},onBlur:D=>{const U=D.target.value.substring(0,4).toUpperCase();d({...c,abbreviation:U})},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:P?.6:1},placeholder:"e.g., U2, R7, C1"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-description-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),i.jsx("input",{id:`component-description-${W.id}`,name:`component-description-${W.id}`,type:"text",value:W.componentType==="IntegratedCircuit"?c.description||c.designator||"":c.designator||"",onChange:D=>{W.componentType==="IntegratedCircuit"?d({...c,description:D.target.value,designator:D.target.value}):d({...c,designator:D.target.value})},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1},placeholder:W.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-x-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),i.jsx("input",{id:`component-x-${W.id}`,name:`component-x-${W.id}`,type:"number",value:c.x.toFixed(2),onChange:D=>{const U=parseFloat(D.target.value)||0;d({...c,x:U})},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-y-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),i.jsx("input",{id:`component-y-${W.id}`,name:`component-y-${W.id}`,type:"number",value:c.y.toFixed(2),onChange:D=>{const U=parseFloat(D.target.value)||0;d({...c,y:U})},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-manufacturer-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),i.jsx("input",{id:`component-manufacturer-${W.id}`,name:`component-manufacturer-${W.id}`,type:"text",value:c.manufacturer,onChange:D=>d({...c,manufacturer:D.target.value}),disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-partnumber-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),i.jsx("input",{id:`component-partnumber-${W.id}`,name:`component-partnumber-${W.id}`,type:"text",value:c.partNumber,onChange:D=>d({...c,partNumber:D.target.value}),disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${W.id}`,name:`component-pincount-${W.id}`,type:"number",min:"1",value:c.pinCount,onChange:D=>{const U=Math.max(1,parseInt(D.target.value)||1);d({...c,pinCount:U})},onBlur:D=>{if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const U=Math.max(1,parseInt(D.target.value)||1),C=(c.layer==="top"?v:f).find(g=>g.id===c.id);if(C&&U!==C.pinCount){const g=C.pinConnections||[],ne=new Array(U).fill("").map((Xe,Ee)=>Ee<g.length?g[Ee]:""),De=C.pinPolarities||[],nt=C.pinPolarities?new Array(U).fill("").map((Xe,Ee)=>Ee<De.length?De[Ee]:""):void 0,T={...C,pinCount:U,pinConnections:ne,...nt!==void 0&&{pinPolarities:nt}};c.layer==="top"?u(Xe=>Xe.map(Ee=>Ee.id===c.id?T:Ee)):H(Xe=>Xe.map(Ee=>Ee.id===c.id?T:Ee)),d({...c,pinCount:U})}},disabled:P,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:P?.6:1}})]}),i.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),te&&te.componentId===W.id&&i.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",te.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const D=W.componentType==="Electrolytic Capacitor"||W.componentType==="Diode"||W.componentType==="Battery"||W.componentType==="ZenerDiode",U=W.componentType==="Capacitor"&&"dielectric"in W&&W.dielectric==="Tantalum",_=D||U;return i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),_&&i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),i.jsx("tbody",{children:Array.from({length:c.pinCount},(C,g)=>{const De=(c.layer==="top"?v:f).find(Ee=>Ee.id===c.id),nt=De?.pinConnections&&De.pinConnections.length>g?De.pinConnections[g]:"",T=De?.pinPolarities&&De.pinPolarities.length>g&&De.pinPolarities[g]||"",Xe=te&&te.componentId===W.id&&te.pinIndex===g;return i.jsxs("tr",{style:{cursor:P?"not-allowed":"pointer",background:Xe?"#e6f0ff":nt?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:Ee=>{if(Ee.target.tagName!=="SELECT"){if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}ze(Xe?null:{componentId:W.id,pinIndex:g})}},title:nt?`Connected to: ${nt}`:"Select this pin, then click on a via or pad to connect",children:[i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsx("input",{id:`pin-radio-${W.id}-${g}`,name:`pin-radio-${W.id}`,type:"radio",checked:!!Xe,onChange:()=>{if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}ze(Xe?null:{componentId:W.id,pinIndex:g})},disabled:P,style:{margin:0,cursor:P?"not-allowed":"pointer",opacity:P?.6:1,width:"10px",height:"10px"}})}),i.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:Xe?600:400,fontFamily:"monospace"},children:g+1}),_&&i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsxs("select",{value:T??"",onChange:Ee=>{if(P){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const vt=Ee.target.value,V=(c.layer==="top"?v:f).find(J=>J.id===c.id);if(V){const Ne=[...V.pinPolarities||new Array(V.pinCount).fill("")];for(;Ne.length<V.pinCount;)Ne.push("");Ne[g]=vt;const et={...V,pinPolarities:Ne};c.layer==="top"?u(yt=>yt.map(M=>M.id===c.id?et:M)):H(yt=>yt.map(M=>M.id===c.id?et:M))}},disabled:P,onClick:Ee=>Ee.stopPropagation(),onFocus:Ee=>Ee.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:P?"not-allowed":"pointer",opacity:P?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[i.jsx("option",{value:"",children:"-"}),i.jsx("option",{value:"+",children:"+"}),i.jsx("option",{value:"-",children:"-"})]},`polarity-${W.id}-${g}-${T}`)}),i.jsx("td",{style:{padding:"2px 4px",color:nt?"#28a745":"#999",fontWeight:nt?600:400,fontFamily:"monospace"},children:nt||"-"})]},g)})})]})})()]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[i.jsx("button",{onClick:()=>{d(null),ze(null)},disabled:P,style:{padding:"2px 5px",background:P?"#f5f5f5":"#fff",color:P?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:P?"not-allowed":"pointer",fontSize:"10px",opacity:P?.6:1},children:"Cancel"}),i.jsx("button",{onClick:B,disabled:P,style:{padding:"2px 5px",background:P?"#f5f5f5":"#0b5fff",color:P?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:P?"not-allowed":"pointer",fontSize:"10px",opacity:P?.6:1},children:"Save"})]})]})};function yx(){const[c,d]=j.useState([]),[v,f]=j.useState(!1),[u,H]=j.useState([]),[te,ze]=j.useState(null),[Z,E]=j.useState("trace"),[me,K]=j.useState("top"),ce=j.useRef([]),oe=j.useRef(0),P=j.useRef(!1),W=j.useCallback(()=>{f(!0),H([]),ce.current=[]},[]),_e=j.useCallback(()=>{f(!1),H([]),ce.current=[]},[]),we=j.useCallback(D=>{H(U=>[...U,D]),ce.current=[...ce.current,D]},[]),B=j.useCallback(D=>{d(U=>[...U,D]),H([]),ce.current=[]},[]);return{drawingStrokes:c,setDrawingStrokes:d,isDrawing:v,setIsDrawing:f,currentStroke:u,setCurrentStroke:H,tracePreviewMousePos:te,setTracePreviewMousePos:ze,drawingMode:Z,setDrawingMode:E,selectedDrawingLayer:me,setSelectedDrawingLayer:K,currentStrokeRef:ce,lastTraceClickTimeRef:oe,isDoubleClickingTraceRef:P,startDrawing:W,stopDrawing:_e,addPointToStroke:we,finishStroke:B}}function vx(){const[c,d]=j.useState(new Set),[v,f]=j.useState(!1),[u,H]=j.useState(new Set),[te,ze]=j.useState(new Set),[Z,E]=j.useState(new Set),me=j.useCallback(()=>{d(new Set),H(new Set),ze(new Set),E(new Set)},[]),K=j.useCallback((P,W="stroke")=>{W==="stroke"?d(_e=>new Set([..._e,P])):W==="component"?H(_e=>new Set([..._e,P])):W==="power"?ze(_e=>new Set([..._e,P])):W==="ground"&&E(_e=>new Set([..._e,P]))},[]),ce=j.useCallback((P,W="stroke")=>{W==="stroke"?d(_e=>{const we=new Set(_e);return we.delete(P),we}):W==="component"?H(_e=>{const we=new Set(_e);return we.delete(P),we}):W==="power"?ze(_e=>{const we=new Set(_e);return we.delete(P),we}):W==="ground"&&E(_e=>{const we=new Set(_e);return we.delete(P),we})},[]),oe=j.useCallback((P,W="stroke")=>{W==="stroke"?d(P):W==="component"?H(P):W==="power"?ze(P):W==="ground"&&E(P)},[]);return{selectedIds:c,setSelectedIds:d,isSelecting:v,setIsSelecting:f,selectedComponentIds:u,setSelectedComponentIds:H,selectedPowerIds:te,setSelectedPowerIds:ze,selectedGroundIds:Z,setSelectedGroundIds:E,clearSelection:me,addToSelection:K,removeFromSelection:ce,setSelection:oe}}function bx(){const[c,d]=j.useState(null),[v,f]=j.useState(!1),[u,H]=j.useState(null),[te,ze]=j.useState("nudge"),Z=j.useCallback((me,K)=>{d(me),f(!0),H(K)},[]),E=j.useCallback(()=>{f(!1),d(null),H(null)},[]);return{selectedImageForTransform:c,setSelectedImageForTransform:d,isTransforming:v,setIsTransforming:f,transformStartPos:u,setTransformStartPos:H,transformMode:te,setTransformMode:ze,startTransform:Z,stopTransform:E}}function mx(){const[c,d]=j.useState(null),[v,f]=j.useState(null),[u,H]=j.useState("overlay"),[te,ze]=j.useState(50),[Z,E]=j.useState(!1),[me,K]=j.useState(!1),[ce,oe]=j.useState(!1),[P,W]=j.useState(!1),_e=j.useCallback(D=>{d(D)},[]),we=j.useCallback(D=>{f(D)},[]),B=j.useCallback(()=>{d(null),f(null)},[]);return{topImage:c,setTopImage:d,bottomImage:v,setBottomImage:f,currentView:u,setCurrentView:H,transparency:te,setTransparency:ze,isTransparencyCycling:Z,setIsTransparencyCycling:E,isGrayscale:me,setIsGrayscale:K,isBlackAndWhiteEdges:ce,setIsBlackAndWhiteEdges:oe,isBlackAndWhiteInverted:P,setIsBlackAndWhiteInverted:W,loadTopImage:_e,loadBottomImage:we,clearImages:B}}function Sx(){const[c,d]=j.useState(1),[v,f]=j.useState({x:0,y:0}),[u,H]=j.useState(!1),[te,ze]=j.useState(!1),Z=j.useCallback(()=>{d(1),f({x:0,y:0})},[]),E=j.useCallback((P=1.2)=>{d(W=>W*P)},[]),me=j.useCallback((P=1.2)=>{d(W=>W/P)},[]),K=j.useCallback(P=>{d(P)},[]),ce=j.useCallback((P,W)=>{f(_e=>({x:_e.x+P,y:_e.y+W}))},[]),oe=j.useCallback((P,W)=>{f({x:P,y:W})},[]);return{viewScale:c,setViewScale:d,viewPan:v,setViewPan:f,isShiftConstrained:u,setIsShiftConstrained:H,showBothLayers:te,setShowBothLayers:ze,resetView:Z,zoomIn:E,zoomOut:me,setZoom:K,pan:ce,setPan:oe}}function _t(c,d,v,f){if(d==="power"){const H=c[d]||"";return typeof H=="string"&&H.trim()!==""?{value:H.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[d]!==void 0||c[v]!==void 0)return{value:c[d]||"",unit:c[v]||f};const u=c[d]||"";return typeof u=="string"&&u.trim()!==""?wx(u):{value:"",unit:f}}function wx(c){if(!c||c.trim()==="")return{value:"",unit:""};const d=c.trim(),v=d.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(v)return{value:v[1],unit:v[2]||""};const f=d.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return f?{value:f[1],unit:f[2]||""}:{value:d,unit:""}}function Tx(){const[c,d]=j.useState([]),[v,f]=j.useState([]),[u,H]=j.useState(null),[te,ze]=j.useState(null),[Z,E]=j.useState(null),[me,K]=j.useState(!1),[ce,oe]=j.useState(null),P=j.useCallback((D,U)=>{U==="top"?d(_=>[..._,D]):f(_=>[..._,D])},[]),W=j.useCallback((D,U,_)=>{_==="top"?d(C=>C.map(g=>g.id===D?{...g,...U}:g)):f(C=>C.map(g=>g.id===D?{...g,...U}:g))},[]),_e=j.useCallback((D,U)=>{U==="top"?d(_=>_.filter(C=>C.id!==D)):f(_=>_.filter(C=>C.id!==D))},[]),we=j.useCallback((D,U)=>{const _={visible:!0,layer:U,id:D.id,designator:D.designator||"",abbreviation:D.abbreviation||"",manufacturer:"manufacturer"in D&&D.manufacturer||"",partNumber:"partNumber"in D&&D.partNumber||"",pinCount:D.pinCount,x:D.x,y:D.y,orientation:D.orientation??0};if(D.componentType==="Resistor"){const C=D,g=_t(C,"resistance","resistanceUnit",Le("resistance"));_.resistance=g.value,_.resistanceUnit=g.unit;const ne=_t(C,"power","powerUnit","W");_.power=ne.value||"1/4",_.tolerance=C.tolerance||"5%"}else if(D.componentType==="Capacitor"){const C=D,g=_t(C,"capacitance","capacitanceUnit",Le("capacitance"));_.capacitance=g.value,_.capacitanceUnit=g.unit;const ne=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=ne.value,_.voltageUnit=ne.unit,_.tolerance=C.tolerance||"10%",_.dielectric=C.dielectric||"Ceramic"}else if(D.componentType==="Electrolytic Capacitor"){const C=D,g=_t(C,"capacitance","capacitanceUnit",Le("capacitance"));_.capacitance=g.value,_.capacitanceUnit=g.unit;const ne=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=ne.value,_.voltageUnit=ne.unit,_.tolerance=C.tolerance||"20%",_.polarityCapacitor=C.polarity||"Positive";const De=_t(C,"esr","esrUnit",Le("esr"));_.esr=De.value,_.esrUnit=De.unit,_.temperature=C.temperature||""}else if(D.componentType==="Diode"){const C=D;_.diodeType=C.diodeType||"Standard";const g=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=g.value,_.voltageUnit=g.unit;const ne=_t(C,"current","currentUnit",Le("current"));_.current=ne.value,_.currentUnit=ne.unit,_.ledColor=C.ledColor||""}else if(D.componentType==="Battery"){const C=D,g=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=g.value,_.voltageUnit=g.unit;const ne=_t(C,"capacity","capacityUnit",Le("capacity"));_.capacity=ne.value,_.capacityUnit=ne.unit,_.chemistry=C.chemistry||"Li-ion"}else if(D.componentType==="Fuse"){const C=D,g=_t(C,"current","currentUnit",Le("current"));_.current=g.value,_.currentUnit=g.unit;const ne=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=ne.value,_.voltageUnit=ne.unit,_.fuseType=C.fuseType||"Fast-blow"}else if(D.componentType==="FerriteBead"){const C=D,g=_t(C,"impedance","impedanceUnit",Le("impedance"));_.impedance=g.value,_.impedanceUnit=g.unit;const ne=_t(C,"current","currentUnit",Le("current"));_.current=ne.value,_.currentUnit=ne.unit}else if(D.componentType==="Connector"){const C=D;_.connectorType=C.connectorType||"",_.gender=C.gender||"N/A"}else if(D.componentType==="Jumper"){const C=D;_.positions=C.positions||3}else if(D.componentType==="Relay"){const C=D,g=_t(C,"coilVoltage","coilVoltageUnit",Le("coilVoltage"));_.coilVoltage=g.value,_.coilVoltageUnit=g.unit,_.contactType=C.contactType||"SPST";const ne=_t(C,"current","currentUnit",Le("current"));_.current=ne.value,_.currentUnit=ne.unit}else if(D.componentType==="Inductor"){const C=D,g=_t(C,"inductance","inductanceUnit",Le("inductance"));_.inductance=g.value,_.inductanceUnit=g.unit;const ne=_t(C,"current","currentUnit",Le("current"));_.current=ne.value,_.currentUnit=ne.unit;const De=_t(C,"resistance","resistanceUnit",Le("resistance"));_.resistance=De.value,_.resistanceUnit=De.unit}else if(D.componentType==="Speaker"){const C=D,g=_t(C,"impedance","impedanceUnit",Le("impedance"));_.impedance=g.value,_.impedanceUnit=g.unit;const ne=_t(C,"power","powerUnit","W");_.power=ne.value||"1"}else if(D.componentType==="Motor"){const C=D;_.motorType=C.motorType||"DC";const g=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=g.value,_.voltageUnit=g.unit;const ne=_t(C,"current","currentUnit",Le("current"));_.current=ne.value,_.currentUnit=ne.unit}else if(D.componentType==="PowerSupply"){const C=D,g=_t(C,"inputVoltage","inputVoltageUnit",Le("inputVoltage"));_.inputVoltage=g.value,_.inputVoltageUnit=g.unit;const ne=_t(C,"outputVoltage","outputVoltageUnit",Le("outputVoltage"));_.outputVoltage=ne.value,_.outputVoltageUnit=ne.unit;const De=_t(C,"current","currentUnit",Le("current"));_.current=De.value,_.currentUnit=De.unit}else if(D.componentType==="Transistor"){const C=D;_.transistorType=C.transistorType||"BJT",_.polarity=C.polarity||"NPN";const g=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=g.value,_.voltageUnit=g.unit;const ne=_t(C,"current","currentUnit",Le("current"));_.current=ne.value,_.currentUnit=ne.unit}else if(D.componentType==="ResistorNetwork"){const C=D,g=_t(C,"resistance","resistanceUnit",Le("resistance"));_.resistance=g.value,_.resistanceUnit=g.unit,_.configuration=C.configuration||""}else if(D.componentType==="Thermistor"){const C=D,g=_t(C,"resistance","resistanceUnit",Le("resistance"));_.resistance=g.value,_.resistanceUnit=g.unit,_.thermistorType=C.thermistorType||"NTC",_.beta=C.beta||""}else if(D.componentType==="Switch"){const C=D;_.switchType=C.switchType||"Toggle";const g=_t(C,"current","currentUnit",Le("current"));_.current=g.value,_.currentUnit=g.unit;const ne=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=ne.value,_.voltageUnit=ne.unit}else if(D.componentType==="Transformer"){const C=D,g=_t(C,"primaryVoltage","primaryVoltageUnit",Le("primaryVoltage"));_.primaryVoltage=g.value,_.primaryVoltageUnit=g.unit;const ne=_t(C,"secondaryVoltage","secondaryVoltageUnit",Le("secondaryVoltage"));_.secondaryVoltage=ne.value,_.secondaryVoltageUnit=ne.unit;const De=_t(C,"power","powerUnit",Le("power"));_.power=De.value||"1",_.turns=C.turns||""}else if(D.componentType==="TestPoint"){const C=D;_.signal=C.signal||""}else if(D.componentType==="IntegratedCircuit"){const C=D;_.description=C.description||"",_.datasheet=C.datasheet||"",_.icType=C.icType||"Op-Amp"}else if(D.componentType==="VacuumTube"){const C=D;_.tubeType=C.tubeType||""}else if(D.componentType==="VariableResistor"){const C=D;_.vrType=C.vrType||"Potentiometer";const g=_t(C,"resistance","resistanceUnit",Le("resistance"));_.resistance=g.value,_.resistanceUnit=g.unit;const ne=_t(C,"power","powerUnit",Le("power"));_.power=ne.value||"1/4",_.taper=C.taper||""}else if(D.componentType==="Crystal"){const C=D;_.frequency=C.frequency||"",_.loadCapacitance=C.loadCapacitance||"",_.tolerance=C.tolerance||""}else if(D.componentType==="ZenerDiode"){const C=D,g=_t(C,"voltage","voltageUnit",Le("voltage"));_.voltage=g.value,_.voltageUnit=g.unit;const ne=_t(C,"power","powerUnit",Le("power"));_.power=ne.value||"1/4",_.tolerance=C.tolerance||"5%"}H(_)},[]),B=j.useCallback(()=>{H(null),ze(null)},[]);return{componentsTop:c,setComponentsTop:d,componentsBottom:v,setComponentsBottom:f,componentEditor:u,setComponentEditor:H,connectingPin:te,setConnectingPin:ze,componentDialogPosition:Z,setComponentDialogPosition:E,isDraggingDialog:me,setIsDraggingDialog:K,dialogDragOffset:ce,setDialogDragOffset:oe,addComponent:P,updateComponent:W,removeComponent:_e,openComponentEditor:we,closeComponentEditor:B}}function jx(){const[c,d]=j.useState([]),[v,f]=j.useState([]),[u,H]=j.useState([]),[te,ze]=j.useState(null),[Z,E]=j.useState(null),me=j.useCallback(we=>{d(B=>[...B,we])},[]),K=j.useCallback((we,B)=>{d(D=>D.map(U=>U.id===we?{...U,...B}:U))},[]),ce=j.useCallback(we=>{d(B=>B.filter(D=>D.id!==we)),f(B=>B.filter(D=>D.powerBusId!==we))},[]),oe=j.useCallback(we=>{f(B=>[...B,we])},[]),P=j.useCallback(we=>{f(B=>B.filter(D=>D.id!==we))},[]),W=j.useCallback(we=>{H(B=>[...B,we])},[]),_e=j.useCallback(we=>{H(B=>B.filter(D=>D.id!==we))},[]);return{powerBuses:c,setPowerBuses:d,powerSymbols:v,setPowerSymbols:f,groundSymbols:u,setGroundSymbols:H,powerEditor:te,setPowerEditor:ze,groundEditor:Z,setGroundEditor:E,addPowerBus:me,updatePowerBus:K,removePowerBus:ce,addPowerSymbol:oe,removePowerSymbol:P,addGroundSymbol:W,removeGroundSymbol:_e}}function Cx(){const d=j.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"26",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"26",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"26",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[])(),[v,f]=j.useState(d.brushColor),[u,H]=j.useState(d.brushSize),[te,ze]=j.useState(d.topTraceColor),[Z,E]=j.useState(d.bottomTraceColor),[me,K]=j.useState(d.topTraceSize),[ce,oe]=j.useState(d.bottomTraceSize),[P,W]=j.useState(d.topPadColor),[_e,we]=j.useState(d.bottomPadColor),[B,D]=j.useState(d.topPadSize),[U,_]=j.useState(d.bottomPadSize),[C,g]=j.useState(d.topComponentColor),[ne,De]=j.useState(d.bottomComponentColor),[nt,T]=j.useState(d.topComponentSize),[Xe,Ee]=j.useState(d.bottomComponentSize),vt=j.useCallback((V,J,Ne)=>{V==="trace"&&Ne?Ne==="top"?localStorage.setItem("defaultTopTraceSize",String(J)):localStorage.setItem("defaultBottomTraceSize",String(J)):V==="pad"&&Ne?Ne==="top"?localStorage.setItem("defaultTopPadSize",String(J)):localStorage.setItem("defaultBottomPadSize",String(J)):V==="component"&&Ne?Ne==="top"?localStorage.setItem("defaultTopComponentSize",String(J)):localStorage.setItem("defaultBottomComponentSize",String(J)):V==="via"?localStorage.setItem("defaultViaSize",String(J)):V==="power"?localStorage.setItem("defaultPowerSize",String(J)):V==="ground"?localStorage.setItem("defaultGroundSize",String(J)):V==="brush"&&localStorage.setItem("defaultBrushSize",String(J))},[]),lt=j.useCallback((V,J,Ne)=>{V==="trace"&&Ne?Ne==="top"?localStorage.setItem("defaultTopTraceColor",J):localStorage.setItem("defaultBottomTraceColor",J):V==="pad"&&Ne?Ne==="top"?localStorage.setItem("defaultTopPadColor",J):localStorage.setItem("defaultBottomPadColor",J):V==="component"&&Ne?Ne==="top"?localStorage.setItem("defaultTopComponentColor",J):localStorage.setItem("defaultBottomComponentColor",J):V==="via"?localStorage.setItem("defaultViaColor",J):V==="brush"&&localStorage.setItem("defaultBrushColor",J)},[]);return{brushColor:v,setBrushColor:f,brushSize:u,setBrushSize:H,topTraceColor:te,setTopTraceColor:ze,bottomTraceColor:Z,setBottomTraceColor:E,topTraceSize:me,setTopTraceSize:K,bottomTraceSize:ce,setBottomTraceSize:oe,topPadColor:P,setTopPadColor:W,bottomPadColor:_e,setBottomPadColor:we,topPadSize:B,setTopPadSize:D,bottomPadSize:U,setBottomPadSize:_,topComponentColor:C,setTopComponentColor:g,bottomComponentColor:ne,setBottomComponentColor:De,topComponentSize:nt,setTopComponentSize:T,bottomComponentSize:Xe,setBottomComponentSize:Ee,saveDefaultSize:vt,saveDefaultColor:lt}}const zx=(c,d,v)=>{const f=`tool_${c}_color`,u=`tool_${c}_size`;localStorage.setItem(f,d),localStorage.setItem(u,String(v))};function Rx(c,d,v,f,u,H,te,ze,Z,E,me,K,ce,oe,P,W,_e,we,B,D){const[U,_]=j.useState(()=>c()),C=j.useRef(null),g=j.useRef(f),ne=j.useRef(u),De=j.useCallback(Xe=>d==="draw"&&v==="trace"?Xe.get("trace"):d==="draw"&&v==="via"?Xe.get("via"):d==="draw"&&v==="pad"?Xe.get("pad"):d==="component"?Xe.get("component"):d==="power"?Xe.get("power"):d==="ground"?Xe.get("ground"):null,[d,v]);j.useEffect(()=>{_(Xe=>{const Ee=De(Xe),vt=Ee?.id||null,lt=C.current,V=new Map(Xe);if(lt&&lt!==vt){const J=Xe.get(lt);J&&(zx(lt,g.current,ne.current),V.set(lt,{...J,settings:{color:g.current,size:ne.current}}))}if(Ee&&vt!==lt)if(d==="draw"&&v==="trace"){const J=we||"top",Ne=J==="top"?H:te,et=J==="top"?ze:Z;g.current=Ne,ne.current=et,V.set("trace",{...Ee,settings:{color:Ne,size:et}})}else if(d==="draw"&&v==="pad"){const J=B||"top",Ne=J==="top"?E:me,et=J==="top"?K:ce;g.current=Ne,ne.current=et,V.set("pad",{...Ee,settings:{color:Ne,size:et}})}else if(d==="component"){const J=D||"top",Ne=J==="top"?oe:P,et=J==="top"?W:_e;g.current=Ne,ne.current=et,V.set("component",{...Ee,settings:{color:Ne,size:et}})}else g.current=Ee.settings.color,ne.current=Ee.settings.size;return C.current=vt,V})},[d,v,f,u,H,te,ze,Z,E,me,K,ce,oe,P,W,_e,we,B,D,De]);const nt=j.useCallback((Xe,Ee)=>{_(vt=>{const lt=new Map(vt),V=lt.get(Xe);return V&&lt.set(Xe,{...V,settings:Ee}),lt})},[]),T=j.useCallback((Xe,Ee,vt)=>{_(lt=>{const V=new Map(lt),J=V.get(Xe);if(J){const Ne=new Map(J.layerSettings);Ne.set(Ee,vt),V.set(Xe,{...J,layerSettings:Ne})}return V})},[]);return{toolRegistry:U,setToolRegistry:_,updateToolSettings:nt,updateToolLayerSettings:T,getCurrentToolDef:De}}function Dx(){const[c,d]=j.useState(!1),[v,f]=j.useState(!1),[u,H]=j.useState(!1),[te,ze]=j.useState(!1),[Z,E]=j.useState(!1),[me,K]=j.useState(!1),[ce,oe]=j.useState(!1),P=j.useCallback(()=>{d(!0),f(!0),H(!0),ze(!0),E(!0),K(!0),oe(!0)},[]),W=j.useCallback(()=>{d(!1),f(!1),H(!1),ze(!1),E(!1),K(!1),oe(!1)},[]);return{areImagesLocked:c,setAreImagesLocked:d,areViasLocked:v,setAreViasLocked:f,arePadsLocked:u,setArePadsLocked:H,areTracesLocked:te,setAreTracesLocked:ze,areComponentsLocked:Z,setAreComponentsLocked:E,areGroundNodesLocked:me,setAreGroundNodesLocked:K,arePowerNodesLocked:ce,setArePowerNodesLocked:oe,lockAll:P,unlockAll:W}}function Ax(){const[c,d]=j.useState(null),[v,f]=j.useState({visible:!1,size:6}),[u,H]=j.useState({visible:!1,interval:5}),[te,ze]=j.useState({visible:!1,source:null,interval:5}),[Z,E]=j.useState({visible:!1,text:""}),[me,K]=j.useState({visible:!1,title:"",message:""}),[ce,oe]=j.useState({visible:!1}),[P,W]=j.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[_e,we]=j.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[B,D]=j.useState(!1),[U,_]=j.useState(!0);return{openMenu:c,setOpenMenu:d,setSizeDialog:v,setSetSizeDialog:f,autoSaveDialog:u,setAutoSaveDialog:H,autoSavePromptDialog:te,setAutoSavePromptDialog:ze,debugDialog:Z,setDebugDialog:E,errorDialog:me,setErrorDialog:K,newProjectDialog:ce,setNewProjectDialog:oe,newProjectSetupDialog:P,setNewProjectSetupDialog:W,saveAsDialog:_e,setSaveAsDialog:we,showColorPicker:B,setShowColorPicker:D,showWelcomeDialog:U,setShowWelcomeDialog:_}}function kx(){const[c,d]=j.useState(!1),[v,f]=j.useState(1),[u,H]=j.useState(null),[te,ze]=j.useState(""),[Z,E]=j.useState(""),[me,K]=j.useState(null),[ce,oe]=j.useState("pcb_project"),[P,W]=j.useState([]),[_e,we]=j.useState(-1),B=j.useRef(null),D=j.useRef(!1),U=j.useRef(!1);return{autoSaveEnabled:c,setAutoSaveEnabled:d,autoSaveInterval:v,setAutoSaveInterval:f,autoSaveDirHandle:u,setAutoSaveDirHandle:H,autoSaveBaseName:te,setAutoSaveBaseName:ze,currentProjectFilePath:Z,setCurrentProjectFilePath:E,projectDirHandle:me,setProjectDirHandle:K,projectName:ce,setProjectName:oe,autoSaveFileHistory:P,setAutoSaveFileHistory:W,currentFileIndex:_e,setCurrentFileIndex:we,autoSaveIntervalRef:B,hasChangesSinceLastAutoSaveRef:D,prevAutoSaveEnabledRef:U}}const Jc=c=>{const d=lu[c];return!d||!d.prefix||d.prefix.length<1?"?":d.prefix[0].substring(0,1).toUpperCase()},Qi=(c,d,v)=>{const f=`tool_${c}_color`,u=`tool_${c}_size`,H=localStorage.getItem(f),te=localStorage.getItem(u);return{color:H||d,size:te?parseInt(te,10):v}},ch=(c,d,v)=>{localStorage.setItem(`tool_${c}_color`,d),localStorage.setItem(`tool_${c}_size`,String(v))},Vn=(c,d,v,f)=>{const u=`tool_${c}_${d}_color`,H=`tool_${c}_${d}_size`,te=localStorage.getItem(u),ze=localStorage.getItem(H);return{color:te||v,size:ze?parseInt(ze,10):f}},Nx=()=>{const c=new Map,d={top:"#0072B2",bottom:"#56B4E9"},v={top:Jo.DEFAULT_SIZE,bottom:Jo.DEFAULT_SIZE},f={top:"#AA4499",bottom:"#F781BF"},u={top:6,bottom:6},H={top:"#6A3D9A",bottom:"#9467BD"},te={top:18,bottom:18};return c.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:Qi("select","#ff0000",10),layerSettings:new Map([["top",Vn("select","top","#ff0000",10)],["bottom",Vn("select","bottom","#ff0000",10)]])}),c.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:Qi("via",eu,Jo.DEFAULT_SIZE),layerSettings:new Map([["top",Vn("via","top",eu,Jo.DEFAULT_SIZE)],["bottom",Vn("via","bottom",eu,Jo.DEFAULT_SIZE)]]),defaultLayer:"top"}),c.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:Qi("pad",Gg,Jo.DEFAULT_SIZE),layerSettings:new Map([["top",Vn("pad","top",d.top,v.top)],["bottom",Vn("pad","bottom",d.bottom,v.bottom)]]),defaultLayer:"top"}),c.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:Qi("trace",fh,2),layerSettings:new Map([["top",Vn("trace","top",f.top,u.top)],["bottom",Vn("trace","bottom",f.bottom,u.bottom)]]),defaultLayer:"top"}),c.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:Qi("component",ph,hh.DEFAULT_SIZE),layerSettings:new Map([["top",Vn("component","top",H.top,te.top)],["bottom",Vn("component","bottom",H.bottom,te.bottom)]]),defaultLayer:"top"}),c.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:Qi("power",tu,26),layerSettings:new Map([["top",Vn("power","top",tu,26)],["bottom",Vn("power","bottom",tu,26)]]),defaultLayer:"top"}),c.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:Qi("ground",Cd,26),layerSettings:new Map([["top",Vn("ground","top",Cd,26)],["bottom",Vn("ground","bottom",Cd,26)]]),defaultLayer:"top"}),c.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:Qi("erase","#f5a3b3",5),layerSettings:new Map([["top",Vn("erase","top","#f5a3b3",5)],["bottom",Vn("erase","bottom","#f5a3b3",5)]])}),c.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:Qi("pan","#ff0000",10),layerSettings:new Map([["top",Vn("pan","top","#ff0000",10)],["bottom",Vn("pan","bottom","#ff0000",10)]])}),c.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:Qi("magnify","#ff0000",10),layerSettings:new Map([["top",Vn("magnify","top","#ff0000",10)],["bottom",Vn("magnify","bottom","#ff0000",10)]])}),c};function Mx(){const d=mx(),{topImage:v,setTopImage:f,bottomImage:u,setBottomImage:H,currentView:te,setCurrentView:ze,transparency:Z,setTransparency:E,isTransparencyCycling:me,setIsTransparencyCycling:K,isGrayscale:ce,setIsGrayscale:oe,isBlackAndWhiteEdges:P,setIsBlackAndWhiteEdges:W,isBlackAndWhiteInverted:_e,setIsBlackAndWhiteInverted:we}=d,[B,D]=j.useState("none"),U=Cx(),{brushColor:_,setBrushColor:C,brushSize:g,setBrushSize:ne,topTraceColor:De,setTopTraceColor:nt,bottomTraceColor:T,setBottomTraceColor:Xe,topTraceSize:Ee,setTopTraceSize:vt,bottomTraceSize:lt,setBottomTraceSize:V,topPadColor:J,setTopPadColor:Ne,bottomPadColor:et,setBottomPadColor:yt,topPadSize:M,setTopPadSize:R,bottomPadSize:I,setBottomPadSize:fe,topComponentColor:ae,setTopComponentColor:Me,bottomComponentColor:Be,setBottomComponentColor:Ve,topComponentSize:ge,setTopComponentSize:Ue,bottomComponentSize:Ye,setBottomComponentSize:wt,saveDefaultSize:Ae,saveDefaultColor:Fe}=U,pt=yx(),{drawingStrokes:ke,setDrawingStrokes:ct,isDrawing:dt,setIsDrawing:At,currentStroke:qe,setCurrentStroke:Qe,tracePreviewMousePos:pn,setTracePreviewMousePos:Wn,drawingMode:Oe,setDrawingMode:Ki,selectedDrawingLayer:Ut,setSelectedDrawingLayer:In,currentStrokeRef:Ql,lastTraceClickTimeRef:Ps,isDoubleClickingTraceRef:Ia}=pt,Xs=bx(),{selectedImageForTransform:Vt,setSelectedImageForTransform:Mi,isTransforming:Ln,setIsTransforming:Ol,transformStartPos:An,setTransformStartPos:ot,transformMode:un,setTransformMode:iu}=Xs,es=Sx(),{viewScale:$e,setViewScale:Kl,viewPan:ht,setViewPan:Kn,isShiftConstrained:Ha,setIsShiftConstrained:Qr,showBothLayers:Ws,setShowBothLayers:Ls}=es,[en,ts]=j.useState("top"),[ul,Gs]=j.useState("top"),[Vl,ns]=j.useState("top"),Fs=Rx(Nx,B,Oe,_,g,De,T,Ee,lt,J,et,M,I,ae,Be,ge,Ye,en,ul,Vl),{toolRegistry:on,setToolRegistry:Jn,getCurrentToolDef:ml}=Fs,kn=at.useRef(null),vn=at.useRef(_),Sl=at.useRef(g);at.useEffect(()=>{Jn(o=>{const r=ml(o),x=r?.id||null,y=kn.current,S=new Map(o);if(y&&y!==x){const m=o.get(y);m&&(ch(y,vn.current,Sl.current),S.set(y,{...m,settings:{color:vn.current,size:Sl.current}}))}if(r&&x!==y)if(B==="draw"&&Oe==="trace"){const m=en||"top",h=m==="top"?De:T,w=m==="top"?Ee:lt;C(h),ne(w),vn.current=h,Sl.current=w,S.set("trace",{...r,settings:{color:h,size:w}})}else if(B==="draw"&&Oe==="pad"){const m=ul||"top",h=m==="top"?J:et,w=m==="top"?M:I;C(h),ne(w),vn.current=h,Sl.current=w,S.set("pad",{...r,settings:{color:h,size:w}})}else if(B==="component"){const m=Vl||"top",h=m==="top"?ae:Be,w=m==="top"?ge:Ye;C(h),ne(w),vn.current=h,Sl.current=w,S.set("component",{...r,settings:{color:h,size:w}})}else{const m=r.settings;C(m.color),ne(m.size),vn.current=m.color,Sl.current=m.size}return kn.current=x,S})},[B,Oe,ml,De,T,Ee,lt,J,et,M,I,ae,Be,ge,Ye]),at.useEffect(()=>{Jn(o=>{const r=ml(o);if(r){ch(r.id,_,g),B==="draw"&&Oe==="trace"?(en||"top")==="top"?(nt(_),vt(g),Fe("trace",_,"top"),Ae("trace",g,"top")):(Xe(_),V(g),Fe("trace",_,"bottom"),Ae("trace",g,"bottom")):B==="draw"&&Oe==="pad"?(ul||"top")==="top"?(Ne(_),R(g),Fe("pad",_,"top"),Ae("pad",g,"top")):(yt(_),fe(g),Fe("pad",_,"bottom"),Ae("pad",g,"bottom")):B==="component"&&((Vl||"top")==="top"?(Me(_),Ue(g),Fe("component",_,"top"),Ae("component",g,"top")):(Ve(_),wt(g),Fe("component",_,"bottom"),Ae("component",g,"bottom")));const x=new Map(o);return x.set(r.id,{...r,settings:{color:_,size:g}}),vn.current=_,Sl.current=g,x}return o})},[_,g,B,Oe,ml,Fe,Ae]),at.useEffect(()=>{B==="power"?(ga(!0),Si(null)):(ga(!1),Si(null))},[B]);const[ls,qs]=j.useState(void 0),[,Kr]=j.useState([]),[,Zs]=j.useState([]),[,Jl]=j.useState([]),[,Ui]=j.useState([]),[Ji,Ea]=j.useState([]),[is,$a]=j.useState([]),[jn,Jr]=j.useState([]),[Qs,ea]=j.useState([]),bn=j.useRef(null),au=vx(),{selectedIds:zt,setSelectedIds:Pt,isSelecting:as,setIsSelecting:Co,selectedComponentIds:bt,setSelectedComponentIds:Rt,selectedPowerIds:ft,setSelectedPowerIds:It,selectedGroundIds:Ht,setSelectedGroundIds:Et}=au,ec=Tx(),{componentsTop:Dt,setComponentsTop:Hn,componentsBottom:ut,setComponentsBottom:Cn,componentEditor:ta,setComponentEditor:Ks,connectingPin:zn,setConnectingPin:zo,componentDialogPosition:os,setComponentDialogPosition:ei,isDraggingDialog:Js,setIsDraggingDialog:er,dialogDragOffset:Ya,setDialogDragOffset:ss,openComponentEditor:ou}=ec,su=jx(),{powerBuses:kt,setPowerBuses:En,powerSymbols:tr,setPowerSymbols:dl,groundSymbols:Pa,setGroundSymbols:el,powerEditor:sl,setPowerEditor:na}=su,tc=Dx(),{areImagesLocked:rl,setAreImagesLocked:wl,areViasLocked:Nn,setAreViasLocked:la,arePadsLocked:Mn,setArePadsLocked:rs,areTracesLocked:Rn,setAreTracesLocked:cs,areComponentsLocked:$n,setAreComponentsLocked:Xa,areGroundNodesLocked:Gn,setAreGroundNodesLocked:Yn,arePowerNodesLocked:qt,setArePowerNodesLocked:Wa}=tc,Ro=Ax(),{openMenu:ru,setOpenMenu:Do,setSizeDialog:xi,setSetSizeDialog:Tl,autoSaveDialog:ia,setAutoSaveDialog:yi,autoSavePromptDialog:La,setAutoSavePromptDialog:ti,debugDialog:Ga,setDebugDialog:aa,errorDialog:nr,setErrorDialog:lr,newProjectDialog:ir,setNewProjectDialog:Ao,newProjectSetupDialog:rn,setNewProjectSetupDialog:Fa,saveAsDialog:cn,setSaveAsDialog:ko,showColorPicker:ar,setShowColorPicker:us}=Ro,or=kx(),{autoSaveEnabled:jl,setAutoSaveEnabled:ni,autoSaveInterval:oa,setAutoSaveInterval:vi,autoSaveDirHandle:_i,setAutoSaveDirHandle:ds,autoSaveBaseName:Bi,setAutoSaveBaseName:sa,currentProjectFilePath:fs,setCurrentProjectFilePath:fl,projectDirHandle:No,setProjectDirHandle:Oi,projectName:Pn,setProjectName:pl,autoSaveFileHistory:Mo,setAutoSaveFileHistory:Uo,currentFileIndex:sr,setCurrentFileIndex:rr,autoSaveIntervalRef:tn,hasChangesSinceLastAutoSaveRef:Il,prevAutoSaveEnabledRef:ps}=or,Vi=j.useRef(null),cr=j.useRef(null),nc=j.useRef(null),lc=j.useRef(null),ur=j.useRef(null),dr=j.useRef(null),ra=j.useRef(null),Ii=j.useRef(null),qa=j.useRef(null),Hi=j.useRef(null),fr=j.useRef(null),ca=j.useRef(!1),Za=j.useRef(0),Qa=j.useRef(0),[ua,hs]=j.useState(!1),Ka=j.useRef(null),_o=j.useRef(null),[Bo,ic]=j.useState(!1),bi=j.useRef(null),[Oo,Fn]=j.useState(!1),[Cl,ac]=j.useState({width:960,height:600}),Vo=j.useRef(null),pr=j.useRef(null),oc=j.useRef(null),Ja=j.useRef(null),hr=j.useRef(null),da=j.useRef(null),gs=j.useRef(null),eo=j.useRef(null),[to,no]=j.useState(!0),[li,ii]=j.useState(!0),[qn,xs]=j.useState(!0),[Un,ys]=j.useState(!0),[hl,vs]=j.useState(!0),[fa,gr]=j.useState(!0),[pa,bs]=j.useState(!0),[Hl,lo]=j.useState(!0),[mn,ha]=j.useState(!0),[Dn,Ei]=j.useState(!0),mt=tr,Tt=Pa,[ms,io]=j.useState(!1),[mi,ga]=j.useState(!1),[xa,Si]=j.useState(null),[wi,tl]=j.useState(!0),[$i,El]=j.useState(!0),[ya,va]=j.useState(null),[Ti,Ss]=j.useState(!1),[Io,ws]=j.useState(null),[sc,zl]=j.useState(()=>{const o=localStorage.getItem("boardDimensions");if(o)try{return JSON.parse(o)}catch{return null}return null}),[ao,ba]=j.useState(!1);at.useEffect(()=>{kt.length===0&&En([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[kt.length,En]);const Rl=j.useCallback((o,r)=>{const x=mt.find(S=>S.pointId===o);if(x){const S=r.find(h=>h.id===x.powerBusId);return`Via (${S?S.voltage:x.type||"Power Node"})`}const y=Tt.find(S=>S.pointId===o);return y?`Via (${y.type||"Ground"})`:"Via (Signal)"},[mt,Tt]),gl=j.useCallback((o,r)=>{const x=mt.find(S=>S.pointId===o);if(x){const S=r.find(h=>h.id===x.powerBusId);return`Pad (${S?S.voltage:x.type||"Power Node"})`}const y=Tt.find(S=>S.pointId===o);return y?`Pad (${y.type||"Ground"})`:"Pad (Signal)"},[mt,Tt]),Dl=j.useCallback(()=>{const o=ke.filter(r=>r.type==="via").map(r=>r.id);Pt(new Set(o)),Rt(new Set),It(new Set),Et(new Set)},[ke,Pt,Rt,It,Et]),Al=j.useCallback(()=>{const o=ke.filter(r=>r.type==="trace").map(r=>r.id);Pt(new Set(o)),Rt(new Set),It(new Set),Et(new Set)},[ke,Pt,Rt,It,Et]),Yi=j.useCallback(()=>{const o=ke.filter(r=>r.type==="pad").map(r=>r.id);Pt(new Set(o)),Rt(new Set),It(new Set),Et(new Set)},[ke,Pt,Rt,It,Et]),ai=j.useCallback(()=>{const o=[...Dt,...ut].map(r=>r.id);Rt(new Set(o)),Pt(new Set),It(new Set),Et(new Set)},[Dt,ut,Rt,Pt,It,Et]),oi=j.useCallback(()=>{const o=[...Dt,...ut].filter(r=>{const x=r.pinConnections||[];return!(x.length>0&&x.length===r.pinCount&&x.every(S=>S&&S.trim()!==""))}).map(r=>r.id);Rt(new Set(o)),Pt(new Set),It(new Set),Et(new Set),aa({visible:!0,text:""})},[Dt,ut,Rt,Pt,It,Et,aa]),ji=j.useCallback((o,r,x)=>{const y=bn.current;if(!y)return;const S=y.width-80,m=y.height-80,h=S/2,w=m/2,k=h-r*$e,z=w-x*$e;Kn({x:k,y:z}),Rt(new Set([o])),Pt(new Set),It(new Set),Et(new Set)},[$e,Kn,Rt,Pt,It,Et]),rc=j.useCallback(()=>{const o=mt.map(r=>r.id);It(new Set(o)),Pt(new Set),Rt(new Set),Et(new Set)},[mt,It,Pt,Rt,Et]),xr=j.useCallback(()=>{const o=Tt.map(r=>r.id);Et(new Set(o)),Pt(new Set),Rt(new Set),It(new Set)},[Tt,Et,Pt,Rt,It]),[ma,Sa]=j.useState(!1),yn=j.useRef(null),[Zt,Nt]=j.useState(!1),$l=j.useRef(null),nl=j.useRef(null),[oo,ll]=j.useState(!1),[so,wa]=j.useState(!1),[Zn,Ci]=j.useState(null),[yr,Ho]=j.useState(new Set),Ts=j.useRef(null),xl=j.useRef(null),Yl=j.useRef(null),si=j.useRef(null),Pl=j.useRef(null),Eo=j.useRef(null),[vr,Ta]=j.useState(null),[Xl,Pi]=j.useState(!1),[hn,$o]=j.useState(null),[zi,br]=j.useState(null),cc=j.useCallback(async(o,r)=>{try{const x=await createImageBitmap(o),y=URL.createObjectURL(o),S=await new Promise((h,w)=>{const k=new FileReader;k.onload=()=>h(k.result),k.onerror=w,k.readAsDataURL(o)}),m={url:y,name:o.name,width:x.width,height:x.height,dataUrl:S,x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:x};r==="top"?f(m):H(m)}catch(x){console.error("Failed to load image",x)}},[]),cu=j.useCallback(o=>{o.stopPropagation(),o.preventDefault();const r=bn.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,S=r.height/x.height,m=o.nativeEvent.offsetX,h=o.nativeEvent.offsetY,w=typeof m=="number"?m:o.clientX-x.left,k=typeof h=="number"?h:o.clientY-x.top,z=w*y,re=k*S,Y=z-40,ve=re-40,L=(Y-ht.x)/$e,ie=(ve-ht.y)/$e;if(B==="select"){if(zn){let N=1/0,le=null,he=null;const Re=Math.max(6/$e,4),We=[...Dt,...ut].find(Ie=>Ie.id===zn.componentId)?.layer||"top";for(const Ie of ke)if((Ie.type==="via"||Ie.type==="pad")&&Ie.points.length>0){if(Ie.type==="pad"&&(Ie.layer||"top")!==We)continue;const st=Ie.points[0],rt=Math.max(1,Ie.size/2),gt=Math.hypot(st.x-L,st.y-ie),jt=Math.max(rt,Re);gt<=jt&&gt<N&&(N=gt,le=st.id??null,he=Ie)}if(he?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${he.id}`),console.log(`  Point ID: ${le}`),console.log(`  Point coordinates: x=${he.points[0].x.toFixed(2)}, y=${he.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${L.toFixed(2)}, y=${ie.toFixed(2)}`),console.log(`  Distance: ${N.toFixed(2)}`),console.log(`  Via size: ${he.size}, radius: ${Math.max(1,he.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${L.toFixed(2)}, y=${ie.toFixed(2)}`),console.log(`  Hit tolerance: ${Re.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${ke.filter(Ie=>Ie.type==="via").length}`)),le!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${le} (type: ${typeof le})`);const Ie=String(le),st=zn.pinIndex,rt=zn.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${st} (Pin ${st+1}) of component ${rt} to point ID ${Ie}`);const gt=Dt.find(Pe=>Pe.id===rt),jt=ut.find(Pe=>Pe.id===rt);gt?(console.log("Component found in TOP layer"),Hn(Pe=>{const Je=Pe.find(xt=>xt.id===rt);if(!Je)return console.error(`Component ${rt} not found in TOP layer during update!`),Pe;console.log("BEFORE update: pinConnections =",Je.pinConnections);const Ct=Je.pinConnections||[],Xt=Ct.length>0?[...Ct]:new Array(Je.pinCount).fill("");let nn;if(Xt.length!==Je.pinCount){nn=new Array(Je.pinCount).fill("");for(let xt=0;xt<Math.min(Xt.length,Je.pinCount);xt++)nn[xt]=Xt[xt]||""}else nn=[...Xt];nn[st]=Ie,console.log(`Updating pin ${st} with value: ${Ie}`),console.log("New pinConnections array:",nn);const gn=Pe.map(xt=>xt.id===rt?{...xt,pinConnections:nn}:xt),dn=gn.find(xt=>xt.id===rt);return console.log("AFTER update: pinConnections =",dn?.pinConnections),console.log(`Pin ${st} value: ${dn?.pinConnections[st]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),gn})):jt?(console.log("Component found in BOTTOM layer"),Cn(Pe=>{const Je=Pe.find(xt=>xt.id===rt);if(!Je)return console.error(`Component ${rt} not found in BOTTOM layer during update!`),Pe;console.log("BEFORE update: pinConnections =",Je.pinConnections);const Ct=Je.pinConnections||[],Xt=Ct.length>0?[...Ct]:new Array(Je.pinCount).fill("");let nn;if(Xt.length!==Je.pinCount){nn=new Array(Je.pinCount).fill("");for(let xt=0;xt<Math.min(Xt.length,Je.pinCount);xt++)nn[xt]=Xt[xt]||""}else nn=[...Xt];nn[st]=Ie,console.log(`Updating pin ${st} with value: ${Ie}`),console.log("New pinConnections array:",nn);const gn=Pe.map(xt=>xt.id===rt?{...xt,pinConnections:nn}:xt),dn=gn.find(xt=>xt.id===rt);return console.log("AFTER update: pinConnections =",dn?.pinConnections),console.log(`Pin ${st} value: ${dn?.pinConnections[st]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),gn})):(console.error(`Component ${rt} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",Dt.map(Pe=>Pe.id)),console.log("Available BOTTOM components:",ut.map(Pe=>Pe.id))),setTimeout(()=>{zo(null)},0);return}else zo(null)}const ee=10,q=(()=>{for(const N of Dt)if(L>=N.x-ee&&L<=N.x+ee&&ie>=N.y-ee&&ie<=N.y+ee)return{layer:"top",comp:N};for(const N of ut)if(L>=N.x-ee&&L<=N.x+ee&&ie>=N.y-ee&&ie<=N.y+ee)return{layer:"bottom",comp:N};return null})();if(q){const{comp:N}=q;let le;if(o.shiftKey){const he=new Set(bt);he.has(N.id)?he.delete(N.id):he.add(N.id),le=he,Rt(le)}else le=new Set([N.id]),Rt(le),Pt(new Set),It(new Set),Et(new Set);if(le.has(N.id)){const he=[];for(const Re of le){const He=Dt.find(We=>We.id===Re);if(He)he.push({id:Re,layer:"top",startX:He.x,startY:He.y});else{const We=ut.find(Ie=>Ie.id===Re);We&&he.push({id:Re,layer:"bottom",startX:We.x,startY:We.y})}}bi.current={mouseX:L,mouseY:ie,components:he}}else bi.current=null;return}const Se=Math.max(6/$e,4);let pe=null;for(const N of mt){const le=Math.max(6,N.size/2),he=le*.8,Re=le+he,He=Math.hypot(N.x-L,N.y-ie),We=Math.abs(L-N.x)<=Se&&Math.abs(ie-N.y)<=Re,Ie=Math.abs(ie-N.y)<=Se&&Math.abs(L-N.x)<=Re;if(He<=Math.max(le,Se)||We||Ie){pe=N;break}}if(pe){let N;if(o.shiftKey){const le=new Set(ft);le.has(pe.id)?le.delete(pe.id):le.add(pe.id),N=le,It(N)}else N=new Set([pe.id]),It(N);Pt(new Set),Rt(new Set),Et(new Set);return}let ye=null;for(const N of Tt){const le=Math.max(6,(N.size||18)/2),he=le*.8,Re=le+he,He=Math.hypot(N.x-L,N.y-ie),We=Math.abs(L-N.x)<=Se&&Math.abs(ie-N.y)<=Re,Ie=Math.abs(ie-N.y)<=Se&&Math.abs(L-N.x)<=Re;if(He<=Math.max(le,Se)||We||Ie){ye=N;break}}if(ye){let N;if(o.shiftKey){const le=new Set(Ht);le.has(ye.id)?le.delete(ye.id):le.add(ye.id),N=le,Et(N)}else N=new Set([ye.id]),Et(N),Pt(new Set),Rt(new Set),It(new Set);return}const Ce=Math.max(6/$e,4/$e),de=Math.max(Ce,.5);let $=null;for(const N of ke)if((N.type==="via"||N.type==="pad")&&N.points.length>0){if(!qn)continue;const le=N.points[0],he=Math.max(1,N.size/2);if(Math.hypot(le.x-L,le.y-ie)<=Math.max(he,de)){$=N;break}}if($){let N;if(o.shiftKey){const le=new Set(zt);le.has($.id)?le.delete($.id):le.add($.id),N=le,Pt(N)}else N=new Set([$.id]),Pt(N),Rt(new Set),It(new Set),Et(new Set);return}bi.current?bi.current=null:(o.shiftKey||(Pt(new Set),Rt(new Set),It(new Set),Et(new Set)),Co(!0),$o({x:L,y:ie,shiftKey:o.shiftKey}),br({x:L,y:ie,width:0,height:0}));return}else if(B==="magnify"){const ee=o.shiftKey?.5:2,q=Math.max(.25,Math.min(8,$e*ee)),Se=Y-q*L,pe=ve-q*ie;Kl(q),Kn({x:Se,y:pe});return}else if(B==="pan"){Ka.current={startCX:Y,startCY:ve,panX:ht.x,panY:ht.y},_o.current={startClientX:o.clientX,startClientY:o.clientY,panX:ht.x,panY:ht.y},hs(!0);return}else if(B==="draw"){const ee=(pe,ye)=>{let je=1/0,Ce=null;const de=Math.max(10/$e,5);for(const le of ke)if(le.type==="via"){const he=le.points[0],Re=Math.hypot(he.x-pe,he.y-ye);Re<=de&&Re<je&&(je=Re,Ce=he)}else if(le.type==="pad"){const he=le.points[0],Re=Math.hypot(he.x-pe,he.y-ye);Re<=de&&Re<je&&(je=Re,Ce=he)}for(const le of mt)if(le.pointId!==void 0){const he=Math.hypot(le.x-pe,le.y-ye);he<=de&&he<je&&(je=he,Ce={x:le.x,y:le.y,id:le.pointId})}for(const le of Tt)if(le.pointId!==void 0){const he=Math.hypot(le.x-pe,le.y-ye);he<=de&&he<je&&(je=he,Ce={x:le.x,y:le.y,id:le.pointId})}const N=Jt(Ce??{x:pe,y:ye});return{x:N.x,y:N.y,nodeId:Ce?.id}};if(Oe==="via"){const pe=on.get("via"),ye=localStorage.getItem("tool_via_color"),je=localStorage.getItem("tool_via_size"),Ce=ye||pe?.settings.color||eu,Te=je?parseInt(je,10):pe?.settings.size||Jo.DEFAULT_SIZE,$=Xl?{x:Jt({x:L,y:ie}).x,y:Jt({x:L,y:ie}).y}:((He,We)=>{let Ie=1/0,st=null;const gt=Math.max(10/$e,5);for(const Je of ke)if(Je.type==="via"||Je.type==="pad"){const Ct=Je.points[0],Xt=Math.hypot(Ct.x-He,Ct.y-We);Xt<=gt&&Xt<Ie&&(Ie=Xt,st=Ct)}for(const Je of mt)if(Je.pointId!==void 0){const Ct=Math.hypot(Je.x-He,Je.y-We);Ct<=gt&&Ct<Ie&&(Ie=Ct,st={x:Je.x,y:Je.y,id:Je.pointId})}for(const Je of Tt)if(Je.pointId!==void 0){const Ct=Math.hypot(Je.x-He,Je.y-We);Ct<=gt&&Ct<Ie&&(Ie=Ct,st={x:Je.x,y:Je.y,id:Je.pointId})}const Pe=Jt(st??{x:He,y:We});return{x:Pe.x,y:Pe.y,nodeId:st?.id}})(L,ie),N=$.nodeId??Zl(),le=Rl(N,kt),he={id:N,x:$.x,y:$.y},Re={id:`${Date.now()}-via`,points:[he],color:Ce,size:Te,layer:Ut,type:"via",viaType:le};ct(He=>[...He,Re]),Ut==="top"?Kr(He=>[...He,Re.id]):Zs(He=>[...He,Re.id]);return}if(Oe==="pad"){if(!ul)return;const ye=Xl?{x:Jt({x:L,y:ie}).x,y:Jt({x:L,y:ie}).y}:((le,he)=>{let Re=1/0,He=null;const Ie=Math.max(10/$e,5);for(const gt of ke)if(gt.type==="via"||gt.type==="pad"){const jt=gt.points[0],Pe=Math.hypot(jt.x-le,jt.y-he);Pe<=Ie&&Pe<Re&&(Re=Pe,He=jt)}for(const gt of mt)if(gt.pointId!==void 0){const jt=Math.hypot(gt.x-le,gt.y-he);jt<=Ie&&jt<Re&&(Re=jt,He={x:gt.x,y:gt.y,id:gt.pointId})}for(const gt of Tt)if(gt.pointId!==void 0){const jt=Math.hypot(gt.x-le,gt.y-he);jt<=Ie&&jt<Re&&(Re=jt,He={x:gt.x,y:gt.y,id:gt.pointId})}const rt=Jt(He??{x:le,y:he});return{x:rt.x,y:rt.y,nodeId:He?.id}})(L,ie),je=ye.nodeId??Zl(),Ce=gl(je,kt),Te=ul==="top"?J:et,de=ul==="top"?M:I,$={id:je,x:ye.x,y:ye.y},N={id:`${Date.now()}-pad`,points:[$],color:Te,size:de,layer:ul,type:"pad",padType:Ce};ct(le=>[...le,N]);return}if(Ia.current)return;const q=Oe==="trace"&&!Xl?ee(L,ie):{x:Jt({x:L,y:ie}).x,y:Jt({x:L,y:ie}).y},Se=q.nodeId!==void 0?{id:q.nodeId,x:q.x,y:q.y}:{x:q.x,y:q.y};Qe(pe=>pe.length===0?[Se]:[...pe,Se]),Ps.current=Date.now(),Wn(null),At(!1),Qr(!1)}else if(B==="erase"){if(ke.some(q=>q.layer===Ut&&(q.type==="via"&&Nn||q.type==="pad"&&Mn||q.type==="trace"&&Rn))){const q=[];Nn&&ke.some(Se=>Se.layer===Ut&&Se.type==="via")&&q.push("vias"),Mn&&ke.some(Se=>Se.layer===Ut&&Se.type==="pad")&&q.push("pads"),Rn&&ke.some(Se=>Se.layer===Ut&&Se.type==="trace")&&q.push("traces"),q.length>0&&alert(`Cannot erase: ${q.join(", ")} are locked on the ${Ut} layer. Unlock them to erase.`)}At(!0),Qe([{id:Zl(),x:L,y:ie}]),console.log("Starting erase at:",L,ie,"selectedDrawingLayer:",Ut,"total strokes:",ke.length)}else if(B==="transform"&&Vt){if(rl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}Ol(!0),ot({x:L,y:ie})}else if(B==="component"){if(!Zn)return;const ee=Jt({x:L,y:ie}),q=Vl==="top"?ae:Be,Se=Vl==="top"?ge:Ye,pe=Qg(Zn,Vl,ee.x,ee.y,q,Se);pe.abbreviation=Jc(Zn),Vl==="top"?(lo(!0),Hn(ye=>[...ye,pe])):(ha(!0),Cn(ye=>[...ye,pe]));return}else if(B==="power"){if(!xa)return;const q=Xl?{x:Jt({x:L,y:ie}).x,y:Jt({x:L,y:ie}).y}:((pe,ye)=>{let je=1/0,Ce=null;const de=Math.max(10/$e,5);for(const le of ke)if(le.type==="via"||le.type==="pad"){const he=le.points[0],Re=Math.hypot(he.x-pe,he.y-ye);Re<=de&&Re<je&&(je=Re,Ce=he)}else if(le.type==="trace")for(const he of le.points){const Re=Math.hypot(he.x-pe,he.y-ye);Re<=de&&Re<je&&(je=Re,Ce=he)}const N=Jt(Ce??{x:pe,y:ye});return{x:N.x,y:N.y,nodeId:Ce?.id}})(L,ie),Se=kt.find(pe=>pe.id===xa);if(Se){const pe=q.nodeId??Zl(),ye=`${Se.voltage} Power Node`;if(Tt.find(Te=>Te.pointId===pe)){lr({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${pe}). Power and ground nodes cannot share the same Node ID.`});return}const Ce={id:`power-${Date.now()}-${Math.random()}`,x:q.x,y:q.y,color:"#ff0000",size:g,powerBusId:Se.id,layer:Ut,type:ye,pointId:pe};if(dl(Te=>[...Te,Ce]),q.nodeId!==void 0){const Te=Rl(q.nodeId,kt),de=gl(q.nodeId,kt);ct($=>$.map(N=>N.type==="via"&&N.points.length>0&&N.points[0].id===q.nodeId?{...N,viaType:Te}:N.type==="pad"&&N.points.length>0&&N.points[0].id===q.nodeId?{...N,padType:de}:N))}}return}else if(B==="ground"){const q=Xl?{x:Jt({x:L,y:ie}).x,y:Jt({x:L,y:ie}).y}:((Ce,Te)=>{let de=1/0,$=null;const le=Math.max(10/$e,5);for(const He of ke)if(He.type==="via"||He.type==="pad"){const We=He.points[0],Ie=Math.hypot(We.x-Ce,We.y-Te);Ie<=le&&Ie<de&&(de=Ie,$=We)}else if(He.type==="trace")for(const We of He.points){const Ie=Math.hypot(We.x-Ce,We.y-Te);Ie<=le&&Ie<de&&(de=Ie,$=We)}const Re=Jt($??{x:Ce,y:Te});return{x:Re.x,y:Re.y,nodeId:$?.id}})(L,ie),Se=q.nodeId??Zl(),pe="Ground",ye=mt.find(Ce=>Ce.pointId===Se);if(ye){lr({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${ye.type||"Power Node"}) already exists at this Node ID (${Se}). Power and ground nodes cannot share the same Node ID.`});return}const je={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:q.x,y:q.y,color:"#000000",size:on.get("ground")?.settings.size||18,type:pe,pointId:Se};if(el(Ce=>[...Ce,je]),q.nodeId!==void 0){const Ce=Rl(q.nodeId,kt),Te=gl(q.nodeId,kt);ct(de=>de.map($=>$.type==="via"&&$.points.length>0&&$.points[0].id===q.nodeId?{...$,viaType:Ce}:$.type==="pad"&&$.points.length>0&&$.points[0].id===q.nodeId?{...$,padType:Te}:$))}return}},[B,Vt,g,_,Oe,Ut,ke,$e,ht.x,ht.y,Xl,xa,kt,Zn,on,ul,en,mt,Tt,Rl,gl,qn]),Sn=j.useCallback(o=>{if(B!=="magnify")return;o.preventDefault();const r=bn.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,S=r.height/x.height,m=o.nativeEvent.offsetX,h=o.nativeEvent.offsetY,w=typeof m=="number"?m:o.clientX-x.left,k=typeof h=="number"?h:o.clientY-x.top,z=w*y,re=k*S,Y=(z-40-ht.x)/$e,ve=(re-40-ht.y)/$e,L=1.2,ie=1/L,ee=o.deltaY<0?L:ie,q=Math.max(.25,Math.min(8,$e*ee)),Se=z-40-q*Y,pe=re-40-q*ve;Kl(q),Kn({x:Se,y:pe})},[B,$e,ht.x,ht.y]),mr=j.useCallback(o=>{if(B==="draw"&&Oe==="trace"){Ia.current=!0;let r=qe;if(r.length>1){const x=[r[0]];for(let y=1;y<r.length;y++){const S=x[x.length-1],m=r[y];(Math.abs(S.x-m.x)>.001||Math.abs(S.y-m.y)>.001)&&x.push(m)}r=x}if(r.length>=1){const x=en||"top",y=x==="top"?De:T,S=x==="top"?Ee:lt,m={id:`${Date.now()}-trace`,points:r,color:y,size:S,layer:x,type:"trace"};ct(h=>[...h,m]),x==="top"?Jl(h=>[...h,m.id]):Ui(h=>[...h,m.id]),Qe([]),Wn(null),setTimeout(()=>{Ia.current=!1},300);return}}if(B==="select"||B==="component"){const r=bn.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,S=r.height/x.height,m=o.nativeEvent.offsetX,h=o.nativeEvent.offsetY,w=typeof m=="number"?m:o.clientX-x.left,k=typeof h=="number"?h:o.clientY-x.top,z=w*y,re=k*S,Y=z-40,ve=re-40,L=(Y-ht.x)/$e,ie=(ve-ht.y)/$e,ee=10,q=(()=>{for(const ye of Dt)if(L>=ye.x-ee&&L<=ye.x+ee&&ie>=ye.y-ee&&ie<=ye.y+ee)return{layer:"top",comp:ye};for(const ye of ut)if(L>=ye.x-ee&&L<=ye.x+ee&&ie>=ye.y-ee&&ie<=ye.y+ee)return{layer:"bottom",comp:ye};return null})(),Se=Math.max(6/$e,4);let pe=null;for(const ye of mt){const je=Math.max(6,ye.size/2),Ce=je*.8,Te=je+Ce,de=Math.hypot(ye.x-L,ye.y-ie),$=Math.abs(L-ye.x)<=Se&&Math.abs(ie-ye.y)<=Te,N=Math.abs(ie-ye.y)<=Se&&Math.abs(L-ye.x)<=Te;if(de<=Math.max(je,Se)||$||N){pe=ye;break}}if(pe){It(new Set([pe.id])),na({visible:!0,id:pe.id,layer:pe.layer,x:pe.x,y:pe.y,size:pe.size,color:pe.color,powerBusId:pe.powerBusId});return}if(q){const{layer:ye,comp:je}=q;ou(je,ye)}}},[B,Oe,_,g,Ut,Dt,ut,mt,$e,ht.x,ht.y,Zn,oo,Xl,ke,Vt,ua,vr,zn,on,qe,en,De,T,Ee,lt]),Xi=j.useCallback(()=>{const o=Ql.current;if(B==="draw"&&Oe==="trace"&&o.length>=2){let r=[o[0]];for(let h=1;h<o.length;h++){const w=r[r.length-1],k=o[h];(Math.abs(w.x-k.x)>.001||Math.abs(w.y-k.y)>.001)&&r.push(k)}const x=en||"top",y=x==="top"?De:T,S=x==="top"?Ee:lt,m={id:`${Date.now()}-trace`,points:r,color:y,size:S,layer:x,type:"trace"};ct(h=>[...h,m]),x==="top"?Jl(h=>[...h,m.id]):Ui(h=>[...h,m.id]),Qe([]),Wn(null)}else if(B==="draw"&&Oe==="trace"&&o.length===1){const r=en||"top",x=r==="top"?De:T,y=r==="top"?Ee:lt,S={id:`${Date.now()}-trace-dot`,points:o,color:x,size:y,layer:r,type:"trace"};ct(m=>[...m,S]),r==="top"?Jl(m=>[...m,S.id]):Ui(m=>[...m,S.id]),Qe([])}},[B,Oe,en,De,T,Ee,lt,ct]),ro=j.useCallback((o,r,x)=>{const y=r-o.x,S=x-o.y;if(y===0&&S===0)return{x:r,y:x};const h=(Math.atan2(S,y)*180/Math.PI%180+180)%180,w=[0,45,90];let k=0,z=1e9;for(const re of w){const Y=Math.abs(h-re);Y<z&&(z=Y,k=re)}if(k===0)return{x:r,y:o.y};if(k===90)return{x:o.x,y:x};{const re=Math.min(Math.abs(y),Math.abs(S)),Y=y>=0?1:-1,ve=S>=0?1:-1;return{x:o.x+Y*re,y:o.y+ve*re}}},[]),Sr=j.useCallback(o=>{const r=bn.current?.getBoundingClientRect();if(!r)return;const x=o.clientX-r.left,y=o.clientY-r.top,S=bn.current,m=S.width/r.width,h=S.height/r.height,w=x*m,k=y*h,z=w-40,re=k-40,Y=(z-ht.x)/$e,ve=(re-ht.y)/$e;if(B==="draw"&&Oe==="trace"&&qe.length>0){const ie=Xl?{x:Jt({x:Y,y:ve}).x,y:Jt({x:Y,y:ve}).y}:((ee,q)=>{let Se=1/0,pe=null;const je=Math.max(10/$e,5);for(const de of ke)if(de.type==="via"){const $=de.points[0],N=Math.hypot($.x-ee,$.y-q);N<=je&&N<Se&&(Se=N,pe=$)}else if(de.type==="pad"){const $=de.points[0],N=Math.hypot($.x-ee,$.y-q);N<=je&&N<Se&&(Se=N,pe=$)}for(const de of mt)if(de.pointId!==void 0){const $=Math.hypot(de.x-ee,de.y-q);$<=je&&$<Se&&(Se=$,pe={x:de.x,y:de.y,id:de.pointId})}for(const de of Tt)if(de.pointId!==void 0){const $=Math.hypot(de.x-ee,de.y-q);$<=je&&$<Se&&(Se=$,pe={x:de.x,y:de.y,id:de.pointId})}const Te=Jt(pe??{x:ee,y:q});return{x:Te.x,y:Te.y,nodeId:pe?.id}})(Y,ve);Wn({x:ie.x,y:ie.y})}else Wn(null);if(B==="select"&&bi.current&&!Bo){const{mouseX:L,mouseY:ie}=bi.current,ee=2/$e,q=Y-L,Se=ve-ie;Math.hypot(q,Se)>ee&&ic(!0)}if(B==="select"&&as&&hn){const L=hn.x,ie=hn.y;br({x:Math.min(L,Y),y:Math.min(ie,ve),width:Math.abs(Y-L),height:Math.abs(ve-ie)})}else if(B==="pan"&&ua&&Ka.current){const{startCX:L,startCY:ie,panX:ee,panY:q}=Ka.current,Se=z-L,pe=re-ie;Kn({x:ee+Se,y:q+pe})}else if(dt&&qe.length>0){if(B==="draw")if(Ha){const L=qe[0],ie=ro(L,Y,ve),ee=Jt(ie),q={id:Zl(),x:ee.x,y:ee.y};Qe([L,q])}else{const L=Jt({x:Y,y:ve});Qe(ie=>[...ie,{id:Zl(),x:L.x,y:L.y}])}else if(B==="erase"&&(Qe(L=>[...L,{id:Zl(),x:Y,y:ve}]),ct(L=>{const ie=L.filter(q=>{if(q.type==="via"&&Nn||q.type==="pad"&&Mn||q.type==="trace"&&Rn||q.layer!==Ut)return!0;const Se=g/2,pe=Y-Se,ye=Y+Se,je=ve-Se,Ce=ve+Se,Te=(N,le)=>N>=pe&&N<=ye&&le>=je&&le<=Ce,de=(N,le,he,Re)=>{const gt=(gn,dn)=>{let xt=0;return gn<pe?xt|=1:gn>ye&&(xt|=2),dn<je?xt|=4:dn>Ce&&(xt|=8),xt};let jt=N,Pe=le,Je=he,Ct=Re,Xt=gt(jt,Pe),nn=gt(Je,Ct);for(;;){if((Xt|nn)===0)return!0;if((Xt&nn)!==0)return!1;const gn=Xt!==0?Xt:nn;let dn=0,xt=0;gn&8?(dn=jt+(Je-jt)*(Ce-Pe)/(Ct-Pe),xt=Ce):gn&4?(dn=jt+(Je-jt)*(je-Pe)/(Ct-Pe),xt=je):gn&2?(xt=Pe+(Ct-Pe)*(ye-jt)/(Je-jt),dn=ye):(xt=Pe+(Ct-Pe)*(pe-jt)/(Je-jt),dn=pe),gn===Xt?(jt=dn,Pe=xt,Xt=gt(jt,Pe)):(Je=dn,Ct=xt,nn=gt(Je,Ct))}};let $=!1;if(q.points.length===1){const N=q.points[0];$=Te(N.x,N.y)}else for(let N=0;N<q.points.length-1;N++){const le=q.points[N],he=q.points[N+1];if(de(le.x,le.y,he.x,he.y)){$=!0;break}}return $&&console.log("Erasing stroke at position:",Y,ve,"brushSize:",g,"selectedLayer:",Ut),!$});console.log("Strokes before:",L.length,"after:",ie.length);const ee=new Set(ie.map(q=>q.id));return Kr(q=>q.filter(Se=>ee.has(Se))),Zs(q=>q.filter(Se=>ee.has(Se))),Jl(q=>q.filter(Se=>ee.has(Se))),Ui(q=>q.filter(Se=>ee.has(Se))),ie}),qt||dl(L=>{const ie=g/2,ee=Y-ie,q=Y+ie,Se=ve-ie,pe=ve+ie,ye=je=>{const Ce=je.size/2,Te=je.x-Ce,de=je.x+Ce,$=je.y-Ce,N=je.y+Ce;return!(q<Te||ee>de||pe<$||Se>N)};return L.filter(je=>!ye(je))}),Gn||el(L=>{const ie=g/2,ee=Y-ie,q=Y+ie,Se=ve-ie,pe=ve+ie,ye=Ce=>{const Te=Math.max(6,(Ce.size||18)/2),de=Te*.8,$=Te+de,N=Ce.x-$,le=Ce.x+$,he=Ce.y-$,Re=Ce.y+$;return!(q<N||ee>le||pe<he||Se>Re)};return L.filter(Ce=>!ye(Ce))}),!$n)){const L=g/2,ie=Y-L,ee=Y+L,q=ve-L,Se=ve+L,pe=ye=>{const Ce=(ye.size||18)/2,Te=ye.x-Ce,de=ye.x+Ce,$=ye.y-Ce,N=ye.y+Ce;return!(ee<Te||ie>de||Se<$||q>N)};Hn(ye=>ye.filter(je=>!pe(je))),Cn(ye=>ye.filter(je=>!pe(je)))}}else if(Ln&&An&&Vt){if(rl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}const L=Y-An.x,ie=ve-An.y;Vt==="top"&&v?f(ee=>ee?{...ee,x:ee.x+L,y:ee.y+ie}:null):Vt==="bottom"&&u?H(ee=>ee?{...ee,x:ee.x+L,y:ee.y+ie}:null):Vt==="both"&&(v&&f(ee=>ee?{...ee,x:ee.x+L,y:ee.y+ie}:null),u&&H(ee=>ee?{...ee,x:ee.x+L,y:ee.y+ie}:null)),ot({x:Y,y:ve})}else if(Bo&&bi.current){const{mouseX:L,mouseY:ie,components:ee}=bi.current,q=Y-L,Se=ve-ie;for(const pe of ee){const ye=pe.startX+q,je=pe.startY+Se;pe.layer==="top"?Hn(Ce=>Ce.map(Te=>Te.id===pe.id?{...Te,x:ye,y:je}:Te)):Cn(Ce=>Ce.map(Te=>Te.id===pe.id?{...Te,x:ye,y:je}:Te))}}},[dt,qe,B,g,Ln,An,Vt,v,u,Ha,ro,Ut,ct,$e,ht.x,ht.y,as,hn,rl,Nn,Mn,Rn,qt,Gn,Bo,Dt,ut,Hn,Cn]),ja=j.useCallback(()=>{if(B==="select"&&as){const o=zi,r=hn;if(Co(!1),$o(null),br(null),o&&r){const S=Math.max(3,5/$e),m=o.width<S&&o.height<S,h=($,N)=>{const le=o.x,he=o.y,Re=o.x+o.width,He=o.y+o.height;return $>=le&&$<=Re&&N>=he&&N<=He},w=($,N,le,he,Re,He,We,Ie)=>{const Je=(Ll,pi)=>{let bl=0;return Ll<Re?bl|=1:Ll>We&&(bl|=2),pi<He?bl|=4:pi>Ie&&(bl|=8),bl};let Ct=$,Xt=N,nn=le,gn=he,dn=Je(Ct,Xt),xt=Je(nn,gn);for(;;){if((dn|xt)===0)return!0;if((dn&xt)!==0)return!1;const Ll=dn!==0?dn:xt;let pi=0,bl=0;Ll&8?(pi=Ct+(nn-Ct)*(Ie-Xt)/(gn-Xt),bl=Ie):Ll&4?(pi=Ct+(nn-Ct)*(He-Xt)/(gn-Xt),bl=He):Ll&2?(bl=Xt+(gn-Xt)*(We-Ct)/(nn-Ct),pi=We):(bl=Xt+(gn-Xt)*(Re-Ct)/(nn-Ct),pi=Re),Ll===dn?(Ct=pi,Xt=bl,dn=Je(Ct,Xt)):(nn=pi,gn=bl,xt=Je(nn,gn))}},k=o.x,z=o.y,re=o.x+o.width,Y=o.y+o.height,L=Math.max(6/$e,4/$e,.5),ie=($,N,le,he,Re,He)=>{const We=Re-le,Ie=He-he;if(We===0&&Ie===0)return Math.hypot($-le,N-he);const st=Math.max(0,Math.min(1,(($-le)*We+(N-he)*Ie)/(We*We+Ie*Ie))),rt=le+st*We,gt=he+st*Ie;return Math.hypot($-rt,N-gt)},ee=r?.shiftKey===!0,q=new Set(ee?Array.from(zt):[]),Se=new Set(ee?Array.from(bt):[]),pe=new Set(ee?Array.from(ft):[]),ye=new Set(ee?Array.from(Ht):[]),je=r?.hitStrokeId;if(je){const $=ke.find(N=>N.id===je);if($){let N=!1;if($.type==="via"||$.type==="pad"?N=qn:N=$.layer==="top"?Un:hl,N){ee?q.has(je)?q.delete(je):q.add(je):(q.clear(),q.add(je)),Pt(q),Rt(Se),It(pe),Et(ye);return}}}if(m){let $=null;for(const N of ke){let le=!1;if(N.type==="via"||N.type==="pad"?le=qn:le=N.layer==="top"?Un:hl,!le)continue;let he=1/0;if(N.type==="via"||N.type==="pad"){const Re=N.points[0],He=Math.max(1,N.size/2);he=Math.hypot(Re.x-r.x,Re.y-r.y);const Ie=Math.max(6/$e,4/$e,.5);he<=Math.max(He,Ie)&&(!$||he<$.dist)&&($={id:N.id,dist:he})}else for(let Re=0;Re<N.points.length-1;Re++){const He=N.points[Re],We=N.points[Re+1],Ie=ie(r.x,r.y,He.x,He.y,We.x,We.y);if(Ie<=Math.max(L,N.size/2)){(!$||Ie<$.dist)&&($={id:N.id,dist:Ie});break}}}$&&q.add($.id)}else for(const $ of ke){let N=!1;if($.type==="via"||$.type==="pad"?N=qn:N=$.layer==="top"?Un:hl,!N)continue;let le=!1;if($.type==="via"||$.type==="pad"){const he=$.points[0];le=h(he.x,he.y)}else for(let he=0;he<$.points.length-1;he++){const Re=$.points[he],He=$.points[he+1];if(w(Re.x,Re.y,He.x,He.y,k,z,re,Y)||h(Re.x,Re.y)&&h(He.x,He.y)){le=!0;break}}le&&q.add($.id)}const Ce=$=>{const le=Math.max(10,$.size||18)/2;return $.x-le<=re&&$.x+le>=k&&$.y-le<=Y&&$.y+le>=z};if(m){const $=N=>{const he=Math.max(10,N.size||18)/2;return r.x>=N.x-he&&r.x<=N.x+he&&r.y>=N.y-he&&r.y<=N.y+he};Hl&&Dt.forEach(N=>{$(N)&&Se.add(N.id)}),mn&&ut.forEach(N=>{$(N)&&Se.add(N.id)})}else Hl&&Dt.forEach($=>{Ce($)&&Se.add($.id)}),mn&&ut.forEach($=>{Ce($)&&Se.add($.id)});const Te=$=>{const N=Math.max(6,$.size/2),le=N*.8,he=N+le;return $.x-he<=re&&$.x+he>=k&&$.y-he<=Y&&$.y+he>=z};if(Dn)if(m){let $=null;for(const N of mt){const le=Math.max(6,N.size/2),he=le*.8,Re=le+he,He=Math.hypot(N.x-r.x,N.y-r.y),We=Math.abs(r.x-N.x)<=L&&Math.abs(r.y-N.y)<=Re,Ie=Math.abs(r.y-N.y)<=L&&Math.abs(r.x-N.x)<=Re;if(He<=Math.max(le,L)||We||Ie){const rt=Math.min(He,Math.abs(r.x-N.x)+Math.abs(r.y-N.y));(!$||rt<$.dist)&&($={id:N.id,dist:rt})}}$&&pe.add($.id)}else mt.forEach($=>{Te($)&&pe.add($.id)});const de=$=>{const N=Math.max(6,($.size||18)/2),le=N*.8,he=N+le;return $.x-he<=re&&$.x+he>=k&&$.y-he<=Y&&$.y+he>=z};if(wi)if(m){let $=null;for(const N of Tt){const le=Math.max(6,(N.size||18)/2),he=le*.8,Re=le+he,He=Math.hypot(N.x-r.x,N.y-r.y),We=Math.abs(r.x-N.x)<=L&&Math.abs(r.y-N.y)<=Re,Ie=Math.abs(r.y-N.y)<=L&&Math.abs(r.x-N.x)<=Re;if(He<=Math.max(le,L)||We||Ie){const rt=Math.min(He,Math.abs(r.x-N.x)+Math.abs(r.y-N.y));(!$||rt<$.dist)&&($={id:N.id,dist:rt})}}$&&ye.add($.id)}else Tt.forEach($=>{de($)&&ye.add($.id)});Pt(q),Rt(Se),It(pe),Et(ye)}}if(dt&&qe.length>0){if(B==="draw"&&Oe!=="trace"){const o={id:Date.now().toString(),points:qe,color:_,size:g,layer:Ut,type:"trace"};ct(r=>[...r,o]),Ut==="top"?Jl(r=>[...r,o.id]):Ui(r=>[...r,o.id])}Qe([])}ua&&(hs(!1),Ka.current=null,_o.current=null),Bo&&(ic(!1),bi.current=null),At(!1),Ol(!1),ot(null),Qr(!1)},[dt,qe,B,_,g,Ut,zi,hn,as,ke,$e,Oo,zt,mt,Tt,Dt,ut,bt,ft,Ht,qn,Un,hl,Hl,mn,Dn,wi,Bo]);at.useEffect(()=>{if(!(B==="pan"&&ua&&_o.current))return;const o=x=>{const y=bn.current;if(!y)return;const S=y.getBoundingClientRect(),m=y.width/S.width,h=y.height/S.height,{startClientX:w,startClientY:k,panX:z,panY:re}=_o.current,Y=(x.clientX-w)*m,ve=(x.clientY-k)*h;Kn({x:z+Y,y:re+ve})},r=()=>{hs(!1),Ka.current=null,_o.current=null,window.removeEventListener("mousemove",o,!0),window.removeEventListener("mouseup",r,!0)};return window.addEventListener("mousemove",o,!0),window.addEventListener("mouseup",r,!0),()=>{window.removeEventListener("mousemove",o,!0),window.removeEventListener("mouseup",r,!0)}},[B,ua]);const ri=j.useCallback(()=>{const o=bn.current;if(!o)return;const r=o.getContext("2d");if(!r)return;r.clearRect(0,0,o.width,o.height),r.save(),r.beginPath(),r.rect(40,40,o.width-80,o.height-80),r.clip(),r.translate(40,40),r.translate(ht.x,ht.y),r.scale($e,$e);const x=(h,w)=>{const k=h.width,z=h.height,re=document.createElement("canvas");re.width=k,re.height=z;const Y=re.getContext("2d");if(!Y)return re;Y.drawImage(h,0,0,k,z);const L=Y.getImageData(0,0,k,z).data,ie=new Uint8ClampedArray(k*z);for(let Te=0;Te<k*z;Te++){const de=L[Te*4+0],$=L[Te*4+1],N=L[Te*4+2];ie[Te]=Math.round(.299*de+.587*$+.114*N)}const ee=[-1,0,1,-2,0,2,-1,0,1],q=[-1,-2,-1,0,0,0,1,2,1],Se=new Float32Array(k*z);for(let Te=1;Te<z-1;Te++)for(let de=1;de<k-1;de++){let $=0,N=0,le=0;for(let Re=-1;Re<=1;Re++)for(let He=-1;He<=1;He++){const We=de+He,Ie=Te+Re,st=ie[Ie*k+We];$+=st*ee[le],N+=st*q[le],le++}const he=Math.sqrt($*$+N*N);Se[Te*k+de]=he}let pe=0;for(let Te=0;Te<Se.length;Te++)Se[Te]>pe&&(pe=Se[Te]);const ye=Y.createImageData(k,z),je=ye.data,Ce=.2;for(let Te=0;Te<k*z;Te++){const $=(pe>0?Se[Te]/pe:0)>=Ce?255:0,N=w?255-$:$;je[Te*4+0]=N,je[Te*4+1]=N,je[Te*4+2]=N,je[Te*4+3]=255}return Y.putImageData(ye,0,0),re},y=(h,w,k,z,re,Y,ve,L)=>{const ie=document.createElement("canvas");ie.width=k,ie.height=z;const ee=ie.getContext("2d",{willReadFrequently:!0});ee.clearRect(0,0,k,z),ee.drawImage(w,0,0,k,z);let q=ie;if(Math.abs(re)>1e-6){const Se=Math.tan(re),pe=Math.max(.2,1-Se),ye=Math.max(.2,1+Se),je=Math.max(pe,ye),Ce=Math.max(1,Math.ceil(k*je)),Te=document.createElement("canvas");Te.width=Ce,Te.height=z;const de=Te.getContext("2d",{willReadFrequently:!0});de.clearRect(0,0,Ce,z);for(let $=0;$<z;$++){const N=z<=1?0:$/(z-1),le=pe*(1-N)+ye*N,he=Math.max(1,k*le),Re=(Ce-he)/2;de.drawImage(q,0,$,k,1,Re,$,he,1)}q=Te}if(Math.abs(Y)>1e-6){const Se=Math.tan(Y),pe=Math.max(.2,1-Se),ye=Math.max(.2,1+Se),je=Math.max(pe,ye),Ce=Math.max(1,Math.ceil(z*je)),Te=document.createElement("canvas");Te.width=q.width,Te.height=Ce;const de=Te.getContext("2d",{willReadFrequently:!0});de.clearRect(0,0,Te.width,Ce);for(let $=0;$<q.width;$++){const N=q.width<=1?0:$/(q.width-1),le=pe*(1-N)+ye*N,he=Math.max(1,z*le),Re=(Ce-he)/2;de.drawImage(q,$,0,1,q.height,$,Re,1,he)}q=Te}h.drawImage(q,-ve/2,-L/2,ve,L)},S=to&&li;if(v&&v.bitmap&&to){const h=v.bitmap;r.save(),r.globalAlpha=1,ce&&!P?r.filter="grayscale(100%)":r.filter="none";const w=o.width-80,k=o.height-80,z=w/2,re=k/2;if(r.translate(z+v.x,re+v.y),r.rotate(v.rotation*Math.PI/180),v.skewX||v.skewY){const ie=Math.tan(v.skewX||0),ee=Math.tan(v.skewY||0);r.transform(1,ee,ie,1,0,0)}r.scale(v.scale*(v.flipX?-1:1),v.scale*(v.flipY?-1:1));const Y=h.width*1,ve=h.height*1,L=P?x(h,_e):h;v.keystoneV&&Math.abs(v.keystoneV)>1e-6||v.keystoneH&&Math.abs(v.keystoneH)>1e-6?y(r,L,h.width,h.height,v.keystoneV||0,v.keystoneH||0,Y,ve):r.drawImage(L,-Y/2,-ve/2,Y,ve),r.restore()}if(u&&u.bitmap&&li){const h=u.bitmap;r.save(),r.globalAlpha=S?Z/100:1,ce&&!P?r.filter="grayscale(100%)":r.filter="none";const w=o.width-80,k=o.height-80,z=w/2,re=k/2;if(r.translate(z+u.x,re+u.y),r.rotate(u.rotation*Math.PI/180),u.skewX||u.skewY){const ie=Math.tan(u.skewX||0),ee=Math.tan(u.skewY||0);r.transform(1,ee,ie,1,0,0)}r.scale(u.scale*(u.flipX?-1:1),u.scale*(u.flipY?-1:1));const Y=h.width*1,ve=h.height*1,L=P?x(h,_e):h;u.keystoneV&&Math.abs(u.keystoneV)>1e-6||u.keystoneH&&Math.abs(u.keystoneH)>1e-6?y(r,L,h.width,h.height,u.keystoneV||0,u.keystoneH||0,Y,ve):r.drawImage(L,-Y/2,-ve/2,Y,ve),r.restore()}if(uu(r),Dn&&mt.length>0){const h=w=>{r.save();const k=kt.find(L=>L.id===w.powerBusId),z=ft.has(w.id),re="#ff0000";r.strokeStyle=re,r.lineWidth=Math.max(1,(z?3:2)/Math.max($e,.001)),r.lineCap="round";const Y=Math.max(6,w.size/2),ve=Y*.8;z&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max($e,.001)),r.beginPath(),r.arc(w.x,w.y,Y+ve+3,0,Math.PI*2),r.stroke()),r.strokeStyle=re,r.lineWidth=Math.max(1,(z?3:2)/Math.max($e,.001)),r.beginPath(),r.arc(w.x,w.y,Y,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(w.x,w.y-Y-ve),r.lineTo(w.x,w.y+Y+ve),r.stroke(),r.beginPath(),r.moveTo(w.x-Y-ve,w.y),r.lineTo(w.x+Y+ve,w.y),r.stroke(),k&&(r.fillStyle=re,r.font=`${Math.max(10,Y*.8)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(k.voltage,w.x,w.y+Y+ve+12)),r.restore()};mt.forEach(h)}if(wi&&Tt.length>0){const h=w=>{r.save();const k=Ht.has(w.id),z="#000000";r.strokeStyle=z,r.lineWidth=Math.max(1,(k?3:2)/Math.max($e,.001)),r.lineCap="round";const re=Math.max(6,(w.size||18)/2),Y=re*.8;k&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max($e,.001)),r.beginPath(),r.arc(w.x,w.y,re+Y+3,0,Math.PI*2),r.stroke()),r.strokeStyle=z,r.lineWidth=Math.max(1,(k?3:2)/Math.max($e,.001)),r.beginPath(),r.arc(w.x,w.y,re,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(w.x,w.y-re-Y),r.lineTo(w.x,w.y+re+Y),r.stroke(),r.beginPath(),r.moveTo(w.x-re-Y,w.y),r.lineTo(w.x+re+Y,w.y),r.stroke(),r.restore()};Tt.forEach(h)}const m=h=>{const w=Math.max(10,h.size||18),k=w/2;r.save(),r.strokeStyle=h.color||"#111",r.lineWidth=Math.max(1,2/Math.max($e,.001));const z=h.pinConnections||[],re=z.length>0&&z.length===h.pinCount&&z.every(Ce=>Ce&&Ce.trim()!=="");r.fillStyle=re?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",r.beginPath(),r.rect(h.x-k,h.y-k,w,w),r.fill(),r.stroke();let Y="abbreviation"in h&&h.abbreviation?String(h.abbreviation).trim():"";(!Y||Y===""||Y==="****"||Y==="*"||Y==="?")&&(Y=Jc(h.componentType)),r.fillStyle=h.color||"#111",r.font=`bold ${Math.max(8,w*.35)}px sans-serif`,r.textAlign="center",r.textBaseline="middle";const ve=Ce=>{const Te=parseInt(Ce,10);if(isNaN(Te))return null;for(const de of ke)if((de.type==="via"||de.type==="pad")&&de.points.length>0){const $=de.points[0];if($.id===Te)return{x:$.x,y:$.y}}return null},L=h.componentType==="Electrolytic Capacitor"||h.componentType==="Diode"||h.componentType==="Battery"||h.componentType==="ZenerDiode",ie=h.componentType==="Capacitor"&&"dielectric"in h&&h.dielectric==="Tantalum";let ee="none";if((L||ie)&&h.pinPolarities&&h.pinPolarities.length===2){const Ce=h.pinPolarities.findIndex(Te=>Te==="-");if(Ce>=0&&z[Ce]){const Te=ve(z[Ce]);if(Te){const de=Te.x-h.x,$=Te.y-h.y;Math.abs($)>Math.abs(de)?ee=$>0?"underscore":"macron":ee=de>0?"pipeAfter":"pipeBefore"}}}const Se=r.measureText(Y).width,pe=Math.max(8,w*.35),ye=h.y;if(ee==="underscore"){const Ce=ye+pe/2+2;r.strokeStyle=h.color||"#111",r.lineWidth=Math.max(1,2/Math.max($e,.001)),r.beginPath(),r.moveTo(h.x-Se/2,Ce),r.lineTo(h.x+Se/2,Ce),r.stroke()}else if(ee==="macron"){const Ce=ye-pe/2-2;r.strokeStyle=h.color||"#111",r.lineWidth=Math.max(1,2/Math.max($e,.001)),r.beginPath(),r.moveTo(h.x-Se/2,Ce),r.lineTo(h.x+Se/2,Ce),r.stroke()}else if(ee==="pipeBefore"){const Ce=h.x-Se/2-pe*.3;r.strokeStyle=h.color||"#111",r.lineWidth=Math.max(1,2/Math.max($e,.001)),r.beginPath(),r.moveTo(Ce,ye-pe/2),r.lineTo(Ce,ye+pe/2),r.stroke()}else if(ee==="pipeAfter"){const Ce=h.x+Se/2+pe*.3;r.strokeStyle=h.color||"#111",r.lineWidth=Math.max(1,2/Math.max($e,.001)),r.beginPath(),r.moveTo(Ce,ye-pe/2),r.lineTo(Ce,ye+pe/2),r.stroke()}r.fillText(Y,h.x,h.y),bt.has(h.id)&&(r.setLineDash([4,3]),r.strokeStyle="#00bfff",r.lineWidth=1.5,r.strokeRect(h.x-k-3,h.y-k-3,w+6,w+6),r.setLineDash([])),r.restore()};if($i){const h=k=>{const z=parseInt(k,10);if(isNaN(z))return null;for(const re of ke)if((re.type==="via"||re.type==="pad")&&re.points.length>0){const Y=re.points[0];if(Y.id===z)return{x:Y.x,y:Y.y}}for(const re of ke)if(re.type==="trace"){for(const Y of re.points)if(Y.id===z)return{x:Y.x,y:Y.y}}for(const re of mt)if(re.pointId===z)return{x:re.x,y:re.y};for(const re of Tt)if(re.pointId===z)return{x:re.x,y:re.y};return null},w=k=>{const z=k.pinConnections||[],re=new Set;for(let Y=0;Y<z.length;Y++){const ve=z[Y];ve&&ve.trim()!==""&&re.add(ve.trim())}for(const Y of re){const ve=h(Y);if(ve){const L={x:k.x,y:k.y};r.save(),r.strokeStyle="rgba(0, 150, 255, 0.6)",r.lineWidth=Math.max(1,1.5/Math.max($e,.001)),r.setLineDash([4,4]),r.beginPath(),r.moveTo(L.x,L.y),r.lineTo(ve.x,ve.y),r.stroke(),r.setLineDash([]),r.restore()}}};Hl&&Dt.forEach(w),mn&&ut.forEach(w)}if(Hl&&Dt.forEach(m),mn&&ut.forEach(m),B==="select"&&zi){r.save();const h=Math.max(2,6/Math.max(1e-4,$e));r.strokeStyle="#00bfff",r.fillStyle="rgba(0, 191, 255, 0.15)",r.lineWidth=Math.max(1,1.5/Math.max(1e-4,$e)),r.setLineDash([h,h]),r.beginPath(),r.rect(zi.x,zi.y,zi.width,zi.height),r.fill(),r.stroke(),r.setLineDash([]),r.restore()}r.restore()},[v,u,Z,ke,qe,dt,B,_,g,ce,P,_e,Vt,Ut,$e,ht.x,ht.y,to,li,qn,Un,hl,fa,pa,Hl,mn,Dt,ut,Dn,mt,wi,Tt,$i,zi,zt,bt,ft,Ht,en,De,T,Ee,lt,Oe,pn]);at.useEffect(()=>{const o=bn.current,r=qa.current,x=nc.current,y=lc.current;if(!o||!r||!x||!y)return;let S=null;const m=o.width-80,h=o.height-80,w=m/2,k=h/2,z=je=>{if(!je||!je.bitmap)return;const Ce=je.bitmap.width,Te=je.bitmap.height,de=je.keystoneV?Math.tan(je.keystoneV):0,$=je.keystoneH?Math.tan(je.keystoneH):0,N=Math.max(.2,1-de),le=Math.max(.2,1+de),he=Math.max(.2,1-$),Re=Math.max(.2,1+$),He=Math.max(N,le),We=Math.max(he,Re),Ie=Ce*He,st=Te*We,rt=je.skewX?Math.tan(je.skewX):0,gt=je.skewY?Math.tan(je.skewY):0,jt=Math.abs(je.scale),Pe=Math.abs(jt)*Ie+Math.abs(rt)*Math.abs(jt)*st,Je=Math.abs(gt)*Math.abs(jt)*Ie+Math.abs(jt)*st,Ct=Vg(Pe,Je,w,k,je.x,je.y,1,1,je.rotation);S=Og(S,Ct)};if(z(v),z(u),!S){x.style.width=`${r.clientWidth}px`,y.style.height=`${r.clientHeight}px`;return}const re=S,Y=re.maxX-re.minX,ve=re.maxY-re.minY,L=Y*$e,ie=ve*$e,ee=8,q=Math.max(r.clientWidth,Math.ceil(L)+ee*2),Se=Math.max(r.clientHeight,Math.ceil(ie)+ee*2);x.style.width=`${q}px`,y.style.height=`${Se}px`,Za.current=re.minX*$e-ee,Qa.current=re.minY*$e-ee;const pe=Vi.current,ye=cr.current;if(ca.current=!0,pe){const je=Math.max(0,pe.scrollWidth-pe.clientWidth),Ce=Math.max(0,Math.min(je,-(ht.x+Za.current)));pe.scrollLeft=Ce}if(ye){const je=Math.max(0,ye.scrollHeight-ye.clientHeight),Ce=Math.max(0,Math.min(je,-(ht.y+Qa.current)));ye.scrollTop=Ce}requestAnimationFrame(()=>{ca.current=!1})},[v,u,$e,ht.x,ht.y,Cl.width,Cl.height]),at.useEffect(()=>{const o=()=>{const r=qa.current;if(!r)return;const x=1.6,y=24,S=r.clientWidth-y,m=r.clientHeight-y,h=Math.floor(m*x),w=Math.floor(S/x);let k,z;h<=S?(k=h,z=m):(k=S,z=w),k=Math.max(600,k),z=Math.max(375,z),ac(re=>re.width===k&&re.height===z?re:{width:k,height:z})};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const uu=j.useCallback(o=>{if(ke.forEach(r=>{if(r.type==="via"||r.type==="pad")return;let x=!1;if(r.layer==="top"?x=Un:r.layer==="bottom"&&(x=hl),!!x)if(r.points.length===1){const y=r.points[0],S=Math.max(.5,r.size/2);zt.has(r.id)&&(o.strokeStyle="#00bfff",o.lineWidth=2,o.setLineDash([4,3]),o.beginPath(),o.arc(y.x,y.y,S+3,0,Math.PI*2),o.stroke(),o.setLineDash([])),o.fillStyle=r.color,o.beginPath(),o.arc(y.x,y.y,S,0,Math.PI*2),o.fill()}else{zt.has(r.id)&&(o.strokeStyle="#00bfff",o.lineWidth=r.size+4,o.lineCap="round",o.lineJoin="round",o.globalAlpha=.6,o.beginPath(),r.points.forEach((y,S)=>{S===0?o.moveTo(y.x,y.y):o.lineTo(y.x,y.y)}),o.stroke(),o.globalAlpha=1),o.strokeStyle=r.color,o.lineWidth=r.size,o.lineCap="round",o.lineJoin="round",o.globalAlpha=1,o.beginPath(),r.points.forEach((y,S)=>{S===0?o.moveTo(y.x,y.y):o.lineTo(y.x,y.y)}),o.stroke();for(const y of r.points)o.beginPath(),o.arc(y.x,y.y,r.size/2,0,Math.PI*2),o.fill()}}),ke.forEach(r=>{if(r.type==="via"){if(!qn)return}else if(r.type==="pad"){if(r.layer==="top"&&!fa||r.layer==="bottom"&&!pa)return}else return;const x=r.points[0];if(zt.has(r.id)){if(r.type==="via"){const y=Math.max(.5,r.size/2)+3;o.strokeStyle="#00bfff",o.lineWidth=2,o.setLineDash([4,3]),o.beginPath(),o.arc(x.x,x.y,y,0,Math.PI*2),o.stroke(),o.setLineDash([])}else if(r.type==="pad"){const y=Math.max(.5,r.size/2)+3;o.strokeStyle="#00bfff",o.lineWidth=2,o.setLineDash([4,3]),o.strokeRect(x.x-y,x.y-y,r.size+6,r.size+6),o.setLineDash([])}}if(r.type==="via"){const y=Math.max(.5,r.size/2),S=y*.5,m=y*.7;o.fillStyle=r.color,o.beginPath(),o.arc(x.x,x.y,y,0,Math.PI*2),o.arc(x.x,x.y,S,0,Math.PI*2),o.fill("evenodd"),o.strokeStyle="#808080",o.lineWidth=1,o.beginPath(),o.moveTo(x.x-m,x.y),o.lineTo(x.x+m,x.y),o.stroke(),o.beginPath(),o.moveTo(x.x,x.y-m),o.lineTo(x.x,x.y+m),o.stroke()}else if(r.type==="pad"){const y=Math.max(.5,r.size/2),S=r.size,m=S*.5,h=y*.7;o.fillStyle=r.color,o.beginPath(),o.rect(x.x-y,x.y-y,S,S),o.rect(x.x-m/2,x.y-m/2,m,m),o.fill("evenodd"),o.strokeStyle="#808080",o.lineWidth=1,o.beginPath(),o.moveTo(x.x-h,x.y),o.lineTo(x.x+h,x.y),o.stroke(),o.beginPath(),o.moveTo(x.x,x.y-h),o.lineTo(x.x,x.y+h),o.stroke()}}),qe.length>0){const r=Ut;let x=!0;if(B==="draw"&&(Oe==="via"?x=qn:x=r==="top"?Un:hl),x)if(B==="draw")if(Oe==="via"){const y=qe[qe.length-1],S=Math.max(.5,g/2),m=S*.5,h=S*.7;o.fillStyle=_,o.beginPath(),o.arc(y.x,y.y,S,0,Math.PI*2),o.arc(y.x,y.y,m,0,Math.PI*2),o.fill("evenodd"),o.strokeStyle="#808080",o.lineWidth=1,o.beginPath(),o.moveTo(y.x-h,y.y),o.lineTo(y.x+h,y.y),o.stroke(),o.beginPath(),o.moveTo(y.x,y.y-h),o.lineTo(y.x,y.y+h),o.stroke()}else if(Oe==="pad"){const y=qe[qe.length-1],S=Math.max(.5,g/2),m=g,h=m*.5,w=S*.7;o.fillStyle=_,o.beginPath(),o.rect(y.x-S,y.y-S,m,m),o.rect(y.x-h/2,y.y-h/2,h,h),o.fill("evenodd"),o.strokeStyle="#808080",o.lineWidth=1,o.beginPath(),o.moveTo(y.x-w,y.y),o.lineTo(y.x+w,y.y),o.stroke(),o.beginPath(),o.moveTo(y.x,y.y-w),o.lineTo(y.x,y.y+w),o.stroke()}else{const y=en||"top",S=y==="top"?De:T,m=y==="top"?Ee:lt;if(qe.length===1){const h=qe[0],w=Math.max(.5,m/2);o.fillStyle=S,o.beginPath(),o.arc(h.x,h.y,w,0,Math.PI*2),o.fill(),pn&&(o.strokeStyle=S,o.lineWidth=m,o.lineCap="round",o.lineJoin="round",o.globalAlpha=.6,o.beginPath(),o.moveTo(h.x,h.y),o.lineTo(pn.x,pn.y),o.stroke(),o.globalAlpha=1)}else if(o.strokeStyle=S,o.lineWidth=m,o.lineCap="round",o.lineJoin="round",o.globalAlpha=1,o.beginPath(),qe.forEach((h,w)=>{w===0?o.moveTo(h.x,h.y):o.lineTo(h.x,h.y)}),o.stroke(),pn&&qe.length>0){const h=qe[qe.length-1];o.globalAlpha=.6,o.beginPath(),o.moveTo(h.x,h.y),o.lineTo(pn.x,pn.y),o.stroke(),o.globalAlpha=1}}else B==="erase"&&(o.strokeStyle="rgba(255, 0, 0, 0.5)",o.lineWidth=g,o.lineCap="round",o.lineJoin="round",o.globalAlpha=.5,o.beginPath(),qe.forEach((y,S)=>{S===0?o.moveTo(y.x,y.y):o.lineTo(y.x,y.y)}),o.stroke())}},[ke,zt,Un,hl,qn,fa,pa,qe,B,Oe,_,g,Ut,en,De,T,Ee,lt,pn]),js=j.useCallback((o,r)=>{if(rl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}o==="top"&&v?f(x=>x?{...x,...r}:null):o==="bottom"&&u?H(x=>x?{...x,...r}:null):o==="both"&&(v&&f(x=>x?{...x,...r}:null),u&&H(x=>x?{...x,...r}:null))},[v,u,rl]),du=j.useCallback(()=>{Vt&&(js(Vt,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),oe(!1),W(!1),we(!1))},[js,Vt]),Cs=j.useCallback(()=>{if(zt.size>0||bt.size>0||ft.size>0||Ht.size>0){if(zt.size>0){const o=ke.filter(S=>zt.has(S.id)),r=Nn&&o.some(S=>S.type==="via"),x=Rn&&o.some(S=>S.type==="trace"),y=Mn&&o.some(S=>S.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(x){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(bt.size>0&&$n){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(ft.size>0&&qt){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Ht.size>0&&Gn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(ct(o=>o.map(r=>{if(zt.has(r.id)){const x=r.size+1;return r.type==="via"?Ae("via",x):r.type==="pad"?Ae("pad",x):r.type==="trace"&&Ae("trace",x,r.layer),{...r,size:x}}return r})),bt.size>0){const o=(bt.size>0&&Dt.find(r=>bt.has(r.id))?.size||18)+1;Ae("component",o),Hn(r=>r.map(x=>bt.has(x.id)?{...x,size:(x.size||18)+1}:x)),Cn(r=>r.map(x=>bt.has(x.id)?{...x,size:(x.size||18)+1}:x))}if(ft.size>0){const o=(mt.find(r=>ft.has(r.id))?.size||18)+1;Ae("power",o),dl(r=>r.map(x=>ft.has(x.id)?{...x,size:x.size+1}:x))}if(Ht.size>0){const o=(Tt.find(r=>Ht.has(r.id))?.size||18)+1;Ae("ground",o),el(r=>r.map(x=>Ht.has(x.id)?{...x,size:(x.size||18)+1}:x))}}else ne(o=>Math.min(40,o+1))},[zt,bt,ft,Ht,ke,Nn,Rn,$n,qt,Gn,B,Oe,Ut,Ae]),Ri=j.useCallback(()=>{if(zt.size>0||bt.size>0||ft.size>0||Ht.size>0){if(zt.size>0){const o=ke.filter(S=>zt.has(S.id)),r=Nn&&o.some(S=>S.type==="via"),x=Rn&&o.some(S=>S.type==="trace"),y=Mn&&o.some(S=>S.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(x){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(bt.size>0&&$n){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(ft.size>0&&qt){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Ht.size>0&&Gn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(ct(o=>o.map(r=>{if(zt.has(r.id)){const x=Math.max(1,r.size-1);return r.type==="via"?Ae("via",x):r.type==="pad"?Ae("pad",x):r.type==="trace"&&Ae("trace",x,r.layer),{...r,size:x}}return r})),bt.size>0){const o=Math.max(1,(Dt.find(r=>bt.has(r.id))?.size||18)-1);Ae("component",o),Hn(r=>r.map(x=>bt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x)),Cn(r=>r.map(x=>bt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x))}if(ft.size>0){const o=Math.max(1,(mt.find(r=>ft.has(r.id))?.size||18)-1);Ae("power",o),dl(r=>r.map(x=>ft.has(x.id)?{...x,size:Math.max(1,x.size-1)}:x))}if(Ht.size>0){const o=Math.max(1,(Tt.find(r=>Ht.has(r.id))?.size||18)-1);Ae("ground",o),el(r=>r.map(x=>Ht.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x))}}else ne(o=>Math.max(1,o-1))},[zt,bt,ft,Ht,ke,Nn,Rn,$n,qt,Gn,B,Oe,Ut,Ae]),zs=j.useCallback(()=>{const o=xi.size;if(zt.size>0||bt.size>0||ft.size>0||Ht.size>0){if(zt.size>0){const r=ke.filter(m=>zt.has(m.id)),x=Nn&&r.some(m=>m.type==="via"),y=Mn&&r.some(m=>m.type==="pad"),S=Rn&&r.some(m=>m.type==="trace");if(x||y||S){alert("Cannot change size: selected items are locked.");return}}if(bt.size>0&&$n){alert("Cannot change size: selected components are locked.");return}if(ft.size>0&&qt){alert("Cannot change size: selected power nodes are locked.");return}if(Ht.size>0&&Gn){alert("Cannot change size: selected ground nodes are locked.");return}ct(r=>r.map(x=>zt.has(x.id)?(x.type==="via"?(Ae("via",o),Jn(y=>{const S=new Map(y),m=S.get("via");return m&&S.set("via",{...m,settings:{...m.settings,size:o}}),S})):x.type==="pad"?(Ae("pad",o),Jn(y=>{const S=new Map(y),m=S.get("pad");return m&&S.set("pad",{...m,settings:{...m.settings,size:o}}),S})):x.type==="trace"&&Ae("trace",o,x.layer),{...x,size:o}):x)),bt.size>0&&(Ae("component",o),Hn(r=>r.map(x=>bt.has(x.id)?{...x,size:o}:x)),Cn(r=>r.map(x=>bt.has(x.id)?{...x,size:o}:x))),ft.size>0&&(Ae("power",o),dl(r=>r.map(x=>ft.has(x.id)?{...x,size:o}:x))),Ht.size>0&&(Ae("ground",o),el(r=>r.map(x=>Ht.has(x.id)?{...x,size:o}:x)))}else ne(o),B==="draw"&&Oe==="trace"?Ut==="top"?(vt(o),Ae("trace",o,"top")):(V(o),Ae("trace",o,"bottom")):Ae(B==="draw"&&Oe==="via"?"via":B==="draw"&&Oe==="pad"?"pad":B==="component"?"component":B==="power"?"power":B==="ground"?"ground":"brush",o);Tl({visible:!1,size:6})},[xi.size,zt,bt,ft,Ht,ke,Nn,Rn,$n,qt,Gn,B,Oe,Ut,Ae,on,Jn]),Yo=j.useCallback(()=>{ti({visible:!1,source:null,interval:5})},[]),wr=j.useCallback(async(o,r=!1)=>{if(o===null){ni(!1),vi(null),tn.current&&(clearInterval(tn.current),tn.current=null),yi({visible:!1,interval:5}),r&&ti({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!Pn){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let x=No;if(!x){const S=window;if(typeof S.showDirectoryPicker=="function")try{x=await S.showDirectoryPicker(),Oi(x)}catch(m){m?.name!=="AbortError"&&(console.error("Failed to get directory:",m),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}ds(x);const y=Pn.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");sa(y),Di.current=x,Wl.current=y,vi(o),ni(!0),Il.current=!0,yi({visible:!1,interval:5}),r&&ti({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${o} minutes`),ra.current&&ra.current()},200)},[Pn,No,ni,vi,ds,sa,yi,ti,Oi]),ci=j.useCallback(()=>{D("select"),Pt(new Set),Rt(new Set),It(new Set),Et(new Set)},[Pt,Rt,It,Et]),Po=j.useCallback(o=>{if(o.key==="Escape"){const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type==="checkbox"||y.tagName==="INPUT"&&y.type==="radio")){y.blur(),o.preventDefault(),o.stopPropagation();return}}const r=document.activeElement;if(!(r&&(r.tagName==="INPUT"&&r.type!=="checkbox"&&r.type!=="radio"||r.tagName==="TEXTAREA"||r.isContentEditable)||za.current>0&&o.key!=="z"&&o.key!=="Z")){if(o.key==="+"||o.key==="="){o.preventDefault(),o.stopPropagation(),Cs();return}if(o.key==="-"||o.key==="_"){o.preventDefault(),o.stopPropagation(),Ri();return}if((o.key==="I"||o.key==="i")&&(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey){o.preventDefault(),o.stopPropagation();const y=[];zt.size>0,zt.size===0&&bt.size===0&&ft.size===0&&Ht.size===0&&y.push(`
No objects selected.`);const S=y.join(`
`);console.log(S),aa({visible:!0,text:S});return}if(o.key==="O"||o.key==="o"){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;o.preventDefault(),o.stopPropagation(),Kl(1);const m=bn.current,h=qa.current;let w=0,k=0;if(m&&h){const z=m.getBoundingClientRect(),re=h.getBoundingClientRect(),Y=m.width-80,ve=m.height-80,ee=60+168+6,q=z.left-re.left,Se=ee-q,pe=z.width-Math.max(0,Se),ye=Se+pe/2,je=z.height/2,Ce=Y/2,Te=ve/2,de=z.width/m.width,$=z.height/m.height,N=ye/de,le=je/$,he=N-40,Re=le-40;w=he-Ce,k=Re-Te}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Kn({x:w,y:k}),ze("overlay"),Pt(new Set),Rt(new Set),It(new Set),Et(new Set),D("select");return}if((o.key==="Alt"||o.altKey)&&Pi(!0),o.key==="Escape"){o.preventDefault(),o.stopPropagation(),ci(),Sa(!1),Nt(!1),wa(!1),ll(!1),ga(!1),us(!1),Ta(null);return}if(o.key==="Enter"&&B==="draw"&&Oe==="trace"){Xi();return}if((o.key==="Delete"||o.key==="Backspace")&&(zt.size>0||bt.size>0||ft.size>0||Ht.size>0)){if(o.preventDefault(),o.stopPropagation(),zt.size>0){const y=ke.filter(w=>zt.has(w.id)),S=Nn&&y.some(w=>w.type==="via"),m=Rn&&y.some(w=>w.type==="trace"),h=Mn&&y.some(w=>w.type==="pad");S?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):m?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):h?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):(ct(w=>w.filter(k=>!zt.has(k.id))),Pt(new Set))}bt.size>0&&($n?alert("Cannot delete: Components are locked. Unlock components to delete them."):(Hn(y=>y.filter(S=>!bt.has(S.id))),Cn(y=>y.filter(S=>!bt.has(S.id))),Rt(new Set))),ft.size>0&&(qt?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(dl(y=>y.filter(S=>!ft.has(S.id))),It(new Set))),Ht.size>0&&(Gn?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(el(y=>y.filter(S=>!Ht.has(S.id))),Et(new Set)));return}if((B==="draw"||B==="erase"||B==="power"||B==="ground")&&(o.key==="z"||o.key==="Z")&&(o.metaKey||o.ctrlKey)&&!o.shiftKey&&!o.altKey){if(o.preventDefault(),o.stopPropagation(),B==="power"){dl(y=>y.length===0?y:y.slice(0,-1));return}if(B==="ground"){el(y=>y.length===0?y:y.slice(0,-1));return}if(B==="draw"&&Oe==="trace"){const y=qe,S=Ql.current,m=y.length>0?y:S;if(m.length>0){m.length>1?Qe(h=>h.slice(0,-1)):Qe([]);return}ct(h=>{for(let w=h.length-1;w>=0;w--){const k=h[w];if(k.type==="trace"&&k.layer===Ut&&k.points.length>=2)if(k.points.length>2){const z=k.points.slice(0,-1);return Qe(z),[...h.slice(0,w),...h.slice(w+1)]}else return[...h.slice(0,w),...h.slice(w+1)]}return h});return}if(dt&&qe.length>0){Qe([]);return}B==="draw"&&(Oe==="via"||Oe==="pad")&&ct(y=>{for(let S=y.length-1;S>=0;S--){const m=y[S];if(m.layer===Ut&&m.type===Oe)return[...y.slice(0,S),...y.slice(S+1)]}return y});return}if(!o.metaKey&&!o.ctrlKey&&!o.altKey){const y=document.activeElement;if(!(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)))switch(o.key){case"s":case"S":o.preventDefault(),ci();return;case"b":case"B":o.preventDefault(),D("power");return;case"g":case"G":o.preventDefault(),D("ground");return;case"v":case"V":o.preventDefault(),Ki("via"),D("draw");return;case"p":case"P":o.preventDefault(),Ki("pad"),D("draw"),In(ul||"top"),Nt(!0);return;case"t":case"T":o.preventDefault(),Ki("trace"),D("draw"),In(en||"top"),Sa(!0);return;case"c":case"C":o.preventDefault(),D("component"),wa(!0),ll(!1),Ci(null);return;case"e":case"E":o.preventDefault(),D("erase");return;case"h":case"H":o.preventDefault(),D("pan");return;case"z":case"Z":if(!(o.metaKey||o.ctrlKey)){o.preventDefault(),Fn(!1),D("magnify");return}break}}if(B==="transform"&&Vt){if(!(o.key==="ArrowLeft"||o.key==="ArrowRight"||o.key==="ArrowUp"||o.key==="ArrowDown"))return;o.preventDefault(),o.stopPropagation();const S=document.activeElement;if(S&&S.tagName==="INPUT"){const m=S;m.type==="radio"&&m.blur()}if(un==="nudge"){let m=0,h=0;switch(o.key){case"ArrowLeft":m=-1;break;case"ArrowRight":m=1;break;case"ArrowUp":h=-1;break;case"ArrowDown":h=1;break;default:return}Vt==="top"&&v?f(w=>w?{...w,x:w.x+m,y:w.y+h}:null):Vt==="bottom"&&u?H(w=>w?{...w,x:w.x+m,y:w.y+h}:null):Vt==="both"&&(v&&f(w=>w?{...w,x:w.x+m,y:w.y+h}:null),u&&H(w=>w?{...w,x:w.x+m,y:w.y+h}:null))}else if(un==="scale"){let m=0;switch(o.key){case"ArrowUp":m=.01;break;case"ArrowDown":m=-.01;break;case"ArrowRight":m=.001;break;case"ArrowLeft":m=-.001;break;default:return}Vt==="top"&&v?f(h=>h?{...h,scale:Math.max(.1,Math.min(3,h.scale+m))}:null):Vt==="bottom"&&u?H(h=>h?{...h,scale:Math.max(.1,Math.min(3,h.scale+m))}:null):Vt==="both"&&(v&&f(h=>h?{...h,scale:Math.max(.1,Math.min(3,h.scale+m))}:null),u&&H(h=>h?{...h,scale:Math.max(.1,Math.min(3,h.scale+m))}:null))}else if(un==="rotate"){let m=0;switch(o.key){case"ArrowUp":m=1;break;case"ArrowDown":m=-1;break;case"ArrowRight":m=.1;break;case"ArrowLeft":m=-.1;break;default:return}Vt==="top"&&v?f(h=>h?{...h,rotation:h.rotation+m}:null):Vt==="bottom"&&u?H(h=>h?{...h,rotation:h.rotation+m}:null):Vt==="both"&&(v&&f(h=>h?{...h,rotation:h.rotation+m}:null),u&&H(h=>h?{...h,rotation:h.rotation+m}:null))}else if(un==="slant"){let m=0,h=0;switch(o.key){case"ArrowUp":h=-.5;break;case"ArrowDown":h=.5;break;case"ArrowLeft":m=-.5;break;case"ArrowRight":m=.5;break}if(m!==0||h!==0){const w=z=>z*Math.PI/180,k=z=>Math.max(-.7,Math.min(.7,z));Vt==="top"&&v?f(z=>z?{...z,skewX:k((z.skewX||0)+w(m)),skewY:k((z.skewY||0)+w(h))}:null):Vt==="bottom"&&u?H(z=>z?{...z,skewX:k((z.skewX||0)+w(m)),skewY:k((z.skewY||0)+w(h))}:null):Vt==="both"&&(v&&f(z=>z?{...z,skewX:k((z.skewX||0)+w(m)),skewY:k((z.skewY||0)+w(h))}:null),u&&H(z=>z?{...z,skewX:k((z.skewX||0)+w(m)),skewY:k((z.skewY||0)+w(h))}:null))}}else if(un==="keystone"){let m=0,h=0;switch(o.key){case"ArrowUp":h=-.5;break;case"ArrowDown":h=.5;break;case"ArrowLeft":m=-.5;break;case"ArrowRight":m=.5;break}if(m!==0||h!==0){const w=z=>z*Math.PI/180,k=z=>Math.max(-.35,Math.min(.35,z));Vt==="top"&&v?f(z=>z?{...z,keystoneH:k((z.keystoneH||0)+w(m)),keystoneV:k((z.keystoneV||0)+w(h))}:null):Vt==="bottom"&&u?H(z=>z?{...z,keystoneH:k((z.keystoneH||0)+w(m)),keystoneV:k((z.keystoneV||0)+w(h))}:null):Vt==="both"&&(v&&f(z=>z?{...z,keystoneH:k((z.keystoneH||0)+w(m)),keystoneV:k((z.keystoneV||0)+w(h))}:null),u&&H(z=>z?{...z,keystoneH:k((z.keystoneH||0)+w(m)),keystoneV:k((z.keystoneV||0)+w(h))}:null))}}}else{const y=o.target;if(y.tagName==="INPUT"&&y.type==="range"){const S=y,m=Number(S.value),h=Number(S.min),w=Number(S.max),k=Number(S.step)||1;switch(o.key){case"ArrowLeft":o.preventDefault();const z=Math.max(h,m-k);S.value=z.toString(),S.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":o.preventDefault();const re=Math.min(w,m+k);S.value=re.toString(),S.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[B,Vt,un,v,u,zt,bt,ft,Ht,ke,Dt,ut,mt,Tt,kt,Oe,Xi,en,De,T,Ee,lt,ci]);at.useEffect(()=>{B!=="transform"&&Mi(null)},[B]),at.useEffect(()=>{window.addEventListener("keydown",Po,!0);const o=r=>{r.key==="Alt"&&Pi(!1)};return window.addEventListener("keyup",o,!0),()=>{window.removeEventListener("keydown",Po,!0),window.removeEventListener("keyup",o,!0)}},[Po,ft,Ht,qt,Gn,mt,Tt,Cs,Ri,ci]);const Wi=j.useCallback(()=>{nt("#AA4499"),Xe("#F781BF"),vt(6),V(6),Fe("trace","#AA4499","top"),Fe("trace","#F781BF","bottom"),Ae("trace",6,"top"),Ae("trace",6,"bottom"),Ne("#0072B2"),yt("#56B4E9"),R(26),fe(26),Fe("pad","#0072B2","top"),Fe("pad","#56B4E9","bottom"),Ae("pad",26,"top"),Ae("pad",26,"bottom"),Me("#6A3D9A"),Ve("#9467BD"),Ue(18),wt(18),Fe("component","#6A3D9A","top"),Fe("component","#9467BD","bottom"),Ae("component",18,"top"),Ae("component",18,"bottom"),ts("top"),C("#AA4499"),ne(6),En([{id:"powerbus-1",name:"+3.3VDC",voltage:"+3.3VDC",color:"#ff0000"},{id:"powerbus-2",name:"+5VDC",voltage:"+5VDC",color:"#ff0000"}]),wl(!1),la(!1),cs(!1),Xa(!1),Yn(!1),Wa(!1),In("top"),D("select"),E(50),K(!1),ze("overlay"),zd(1)},[Fe,Ae]),ui=j.useCallback(()=>{Wi(),setTimeout(()=>{Kl(1);const o=bn.current,r=qa.current;let x=0,y=0;if(o&&r){const S=o.getBoundingClientRect(),m=r.getBoundingClientRect(),h=o.width-80,w=o.height-80,re=60+168+6,Y=S.left-m.left,ve=re-Y,L=S.width-Math.max(0,ve),ie=ve+L/2,ee=S.height/2,q=h/2,Se=w/2,pe=S.width/o.width,ye=S.height/o.height,je=ie/pe,Ce=ee/ye,Te=je-40,de=Ce-40;x=Te-q,y=de-Se}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Kn({x,y}),Pt(new Set),Rt(new Set),It(new Set),Et(new Set)},100)},[Wi]);at.useEffect(()=>{ui()},[]),at.useEffect(()=>{if(!Ga.visible)return;const o=[];zt.size>0,zt.size===0&&bt.size===0&&ft.size===0&&Ht.size===0&&o.push(`
No objects selected.`);const r=o.join(`
`);aa(x=>({...x,text:r}))},[Ga.visible,zt,bt,ft,Ht,ke,Dt,ut,mt,Tt,kt]),at.useEffect(()=>{const o=r=>{const x=bn.current;if(x&&!(xl.current&&xl.current.contains(r.target))&&!(r.target instanceof Node&&x.contains(r.target))){if(Xi(),ma){const y=yn.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&Sa(!1)}if(so){const y=xl.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(wa(!1),D("select"))}if(oo){const y=Ts.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(ll(!1),Ta(null))}if(ar){const y=eo.current;!r.target?.closest('button[title="Color Picker"]')&&(!y||!(r.target instanceof Node)||!y.contains(r.target))&&us(!1)}}};return document.addEventListener("mousedown",o,!0),()=>document.removeEventListener("mousedown",o,!0)},[Xi,ma,Zt,so,oo,ar]);const Xo=o=>{if(!o.current)return{top:0,left:0};const r=o.current.getBoundingClientRect(),x=qa.current?.getBoundingClientRect();return x?{top:r.top-x.top,left:r.left-x.left+r.width+4}:{top:0,left:0}};at.useEffect(()=>{if(ma&&yn.current&&Yl.current){const o=Xo(Yl);yn.current.style.top=`${o.top}px`,yn.current.style.left=`${o.left}px`}},[ma]),at.useEffect(()=>{if(Zt&&$l.current&&si.current){const o=Xo(si);$l.current.style.top=`${o.top}px`,$l.current.style.left=`${o.left}px`}},[Zt]),at.useEffect(()=>{if(so&&xl.current&&Pl.current){const o=Xo(Pl);xl.current.style.top=`${o.top}px`,xl.current.style.left=`${o.left}px`}},[so]),at.useEffect(()=>{if(mi&&nl.current&&Eo.current){const o=Xo(Eo);nl.current.style.top=`${o.top}px`,nl.current.style.left=`${o.left}px`}},[mi]),at.useEffect(()=>{const o=r=>{if(!zn)return;const x=document.querySelector("[data-component-editor-dialog]");if(x&&r.target instanceof Node&&x.contains(r.target)){const de=r.target;if(de.tagName==="BUTTON"||de.tagName==="INPUT"||de.closest("button")||de.closest("input"))return}const y=bn.current;if(!y)return;const S=y.getBoundingClientRect(),m=r.clientX,h=r.clientY;if(m<S.left||m>S.right||h<S.top||h>S.bottom)return;const w=y.width/S.width,k=y.height/S.height,z=m-S.left,re=h-S.top,Y=z*w,ve=re*k,L=Y-40,ie=ve-40,ee=(L-ht.x)/$e,q=(ie-ht.y)/$e;let Se=1/0,pe=null,ye=null;const je=Math.max(6/$e,4),Te=[...Dt,...ut].find(de=>de.id===zn.componentId)?.layer||"top";for(const de of ke)if((de.type==="via"||de.type==="pad")&&de.points.length>0){if(de.type==="pad"&&(de.layer||"top")!==Te)continue;const $=de.points[0],N=Math.max(1,de.size/2),le=Math.hypot($.x-ee,$.y-q),he=Math.max(N,je);le<=he&&le<Se&&(Se=le,pe=$.id??null,ye=de)}if(pe!=null&&ye){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${pe}`),console.log(`  Connecting pin ${zn.pinIndex+1} of component ${zn.componentId}`);const de=String(pe),$=zn.pinIndex,N=zn.componentId,le=Dt.find(Re=>Re.id===N),he=ut.find(Re=>Re.id===N);if(le){const Re=ke;Hn(He=>{const We=He.find(Pe=>Pe.id===N);if(!We)return He;const Ie=We.pinConnections||[],st=Ie.length>0?[...Ie]:new Array(We.pinCount).fill("");let rt;if(st.length!==We.pinCount){rt=new Array(We.pinCount).fill("");for(let Pe=0;Pe<Math.min(st.length,We.pinCount);Pe++)rt[Pe]=st[Pe]||""}else rt=[...st];rt[$]=de,console.log(`Updated pin ${$} with value: ${de}`),console.log("New pinConnections:",rt);const gt=He.find(Pe=>Pe.id===N),jt=gt?Rd(gt,rt,Re):null;return He.map(Pe=>{if(Pe.id===N){const Je={...Pe,pinConnections:rt};return jt&&(Je.pinPolarities=jt),Je}return Pe})})}else if(he){const Re=ke;Cn(He=>{const We=He.find(Pe=>Pe.id===N);if(!We)return He;const Ie=We.pinConnections||[],st=Ie.length>0?[...Ie]:new Array(We.pinCount).fill("");let rt;if(st.length!==We.pinCount){rt=new Array(We.pinCount).fill("");for(let Pe=0;Pe<Math.min(st.length,We.pinCount);Pe++)rt[Pe]=st[Pe]||""}else rt=[...st];rt[$]=de,console.log(`Updated pin ${$} with value: ${de}`),console.log("New pinConnections:",rt);const gt=He.find(Pe=>Pe.id===N),jt=gt?Rd(gt,rt,Re):null;return He.map(Pe=>{if(Pe.id===N){const Je={...Pe,pinConnections:rt};return jt&&(Je.pinPolarities=jt),Je}return Pe})})}setTimeout(()=>{zo(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(zn)return document.addEventListener("mousedown",o,!0),()=>document.removeEventListener("mousedown",o,!0)},[zn,Dt,ut,ke,$e,ht.x,ht.y]),at.useEffect(()=>{if(!Js)return;const o=x=>{if(!Ya)return;const y={x:x.clientX-Ya.x,y:x.clientY-Ya.y};ei(y),localStorage.setItem("componentDialogPosition",JSON.stringify(y))},r=()=>{er(!1),ss(null)};return document.addEventListener("mousemove",o),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r)}},[Js,Ya]),at.useEffect(()=>{if(!Ti)return;const o=x=>{if(!Io)return;const y={x:x.clientX-Io.x,y:x.clientY-Io.y};va(y),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(y))},r=()=>{Ss(!1),ws(null)};return document.addEventListener("mousemove",o),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r)}},[Ti,Io]),at.useEffect(()=>{if(ta&&ta.visible&&os===null){const o=localStorage.getItem("componentDialogPosition");if(o)try{const r=JSON.parse(o);ei(r)}catch{ei({x:window.innerWidth/2,y:window.innerHeight/2})}else ei({x:window.innerWidth/2,y:window.innerHeight/2})}else!ta||ta.visible},[ta,os]),at.useEffect(()=>{if(Ga.visible&&ya===null){const o=localStorage.getItem("detailedInfoDialogPosition");if(o)try{const r=JSON.parse(o);va(r)}catch{va({x:window.innerWidth-450,y:80})}else va({x:window.innerWidth-450,y:80})}else Ga.visible},[Ga.visible,ya]);const uc=j.useCallback(o=>{switch(o){case"transparency":E(50);break;case"brushSize":ne(3);break}},[]);at.useEffect(()=>{if(me){fr.current=performance.now(),E(0);const o=r=>{const x=fr.current||r,y=1e3,S=(r-x)%y/y,m=1-Math.abs(1-2*S);E(Math.round(m*100)),Hi.current=requestAnimationFrame(o)};Hi.current=requestAnimationFrame(o)}return()=>{Hi.current&&(cancelAnimationFrame(Hi.current),Hi.current=null)}},[me]),at.useEffect(()=>{const o=B==="erase"?"erase":B==="magnify"?"magnify":B==="ground"?"ground":B==="power"?"power":B==="component"?"component":B==="draw"?Oe==="via"?"via":Oe==="pad"?"pad":"trace":"default";if(o==="default"){qs(void 0);return}const r=Math.max(1,$e),x=o==="magnify"?18:Math.max(o==="component"?16:o==="power"||o==="ground"?12:6,Math.round(g*r)),S=x+4*2+(o==="magnify"?8:0),m=document.createElement("canvas");m.width=S,m.height=S;const h=m.getContext("2d");if(!h){qs(void 0);return}const w=S/2,k=S/2,z=x/2;if(h.clearRect(0,0,S,S),o==="via"){const Y=z,ve=z*.5,L=z*.7,ee=on.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";h.fillStyle=ee,h.beginPath(),h.arc(w,k,Y,0,Math.PI*2),h.arc(w,k,ve,0,Math.PI*2),h.fill("evenodd"),h.strokeStyle="#808080",h.lineWidth=1,h.beginPath(),h.moveTo(w-L,k),h.lineTo(w+L,k),h.stroke(),h.beginPath(),h.moveTo(w,k-L),h.lineTo(w,k+L),h.stroke()}else if(o==="pad"){const ve=on.get("pad")?.settings.color||J||_,L=z*2,ie=L*.5,ee=z*.7;h.fillStyle=ve,h.beginPath(),h.rect(w-z,k-z,L,L),h.rect(w-ie/2,k-ie/2,ie,ie),h.fill("evenodd"),h.strokeStyle="#808080",h.lineWidth=1,h.beginPath(),h.moveTo(w-ee,k),h.lineTo(w+ee,k),h.stroke(),h.beginPath(),h.moveTo(w,k-ee),h.lineTo(w,k+ee),h.stroke()}else if(o==="trace"){const ve=on.get("trace")?.settings.color||(en==="top"?De:T)||_;h.fillStyle=ve,h.beginPath(),h.arc(w,k,z,0,Math.PI*2),h.fill()}else if(o==="erase"){const Y=Math.max(g*.75,8),ve=Math.max(g*.5,6),L=Math.max(g*.2,2);h.save(),h.translate(w,k),h.rotate(-35*Math.PI/180),h.fillStyle="#f5a3b3",h.strokeStyle="#111",h.lineWidth=1.5;const ie=1.5,ee=-Y/2,q=-ve/2;h.beginPath(),h.moveTo(ee+ie,q),h.lineTo(ee+Y-ie,q),h.quadraticCurveTo(ee+Y,q,ee+Y,q+ie),h.lineTo(ee+Y,q+ve-ie),h.quadraticCurveTo(ee+Y,q+ve,ee+Y-ie,q+ve),h.lineTo(ee+ie,q+ve),h.quadraticCurveTo(ee,q+ve,ee,q+ve-ie),h.lineTo(ee,q+ie),h.quadraticCurveTo(ee,q,ee+ie,q),h.closePath(),h.fill(),h.stroke(),h.fillStyle="#f18ea4",h.beginPath(),h.rect(-Y/2,ve/2-L,Y,L),h.fill(),h.restore()}else if(o==="magnify"){const Y=z;h.strokeStyle="#111",h.lineWidth=2,h.beginPath(),h.arc(w-2,k-2,Y,0,Math.PI*2),h.stroke();const ve=w+Y*.6,L=k+Y*.6,ie=ve+6,ee=L+6;h.beginPath(),h.moveTo(ve,L),h.lineTo(ie,ee),h.stroke(),h.beginPath(),h.moveTo(w-6,k-2),h.lineTo(w+2,k-2),h.stroke(),Oo||(h.beginPath(),h.moveTo(w-2,k-6),h.lineTo(w-2,k+2),h.stroke())}else if(o==="ground"){h.strokeStyle="#000000",h.lineWidth=2,h.lineCap="round";const Y=z*.8;h.beginPath(),h.arc(w,k,z,0,Math.PI*2),h.stroke(),h.beginPath(),h.moveTo(w,k-z-Y),h.lineTo(w,k+z+Y),h.stroke(),h.beginPath(),h.moveTo(w-z-Y,k),h.lineTo(w+z+Y,k),h.stroke()}else if(o==="power"){h.strokeStyle="#ff0000",h.lineWidth=2,h.lineCap="round";const Y=z*.8;h.beginPath(),h.arc(w,k,z,0,Math.PI*2),h.stroke(),h.beginPath(),h.moveTo(w,k-z-Y),h.lineTo(w,k+z+Y),h.stroke(),h.beginPath(),h.moveTo(w-z-Y,k),h.lineTo(w+z+Y,k),h.stroke()}else if(o==="component"){const Y=Vl||"top",ve=on.get("component"),L=(Y==="top"?ae:Be)||ve?.settings.color||_,ie=x,ee=ie/2;h.strokeStyle=L,h.lineWidth=2,h.fillStyle="rgba(255,255,255,0.9)",h.beginPath(),h.rect(w-ee,k-ee,ie,ie),h.fill(),h.stroke();const q=Zn?Jc(Zn):"?";h.fillStyle=L,h.font=`bold ${Math.max(8,ie*.35)}px sans-serif`,h.textAlign="center",h.textBaseline="middle",h.fillText(q,w,k)}const re=`url(${m.toDataURL()}) ${Math.round(w)} ${Math.round(k)}, crosshair`;qs(re)},[B,Oe,_,g,$e,Oo,Zn,xa,kt,on,en,De,T,Vl,ae,Be]),at.useEffect(()=>{ri()},[ri]),at.useEffect(()=>{ri()},[Cl.width,Cl.height]),at.useEffect(()=>{zt.size===0&&B==="draw"&&Oe==="trace"&&g>=1&&(Ut==="top"?vt(g):V(g))},[g,B,Oe,Ut,zt]),at.useEffect(()=>{ct(o=>o.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Rl(x,kt);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=gl(x,kt);if(r.padType!==y)return{...r,padType:y}}return r}))},[mt,Tt,kt,Rl,gl]);const Ca=j.useCallback(()=>{const o=bn.current;if(!o)return;const r=o.toDataURL("image/png"),x=window.open("","_blank");if(!x){alert("Please allow popups to print the canvas.");return}x.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${r}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),x.document.close()},[]);at.useEffect(()=>{const o=x=>{x.key==="Shift"&&Fn(!0)},r=x=>{x.key==="Shift"&&Fn(!1)};return window.addEventListener("keydown",o),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",r)}},[]);const Li=j.useCallback(o=>{if(o.size===0)return;const r=Array.from(o).map(x=>String(x));ct(x=>x.map(y=>{if(y.type==="trace"){const S=y.points.filter(m=>m.id===void 0?!0:!o.has(m.id));return S.length<2?null:{...y,points:S}}return y}).filter(y=>y!==null)),Hn(x=>x.map(y=>{const S=y.pinConnections||[];if(S.some(h=>h&&r.includes(h))){const h=S.map(w=>w&&r.includes(w)?"":w);return{...y,pinConnections:h}}return y})),Cn(x=>x.map(y=>{const S=y.pinConnections||[];if(S.some(h=>h&&r.includes(h))){const h=S.map(w=>w&&r.includes(w)?"":w);return{...y,pinConnections:h}}return y}))},[ct,Hn,Cn]),Tr=j.useRef(new Set);at.useEffect(()=>{const o=new Set;for(const x of ke)if((x.type==="via"||x.type==="pad")&&x.points.length>0){const y=x.points[0].id;y!==void 0&&o.add(y)}const r=new Set;for(const x of Tr.current)o.has(x)||r.add(x);r.size>0&&Li(r),Tr.current=o},[ke,Li]),at.useEffect(()=>{ct(o=>o.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Rl(x,kt);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=gl(x,kt);if(r.padType!==y)return{...r,padType:y}}return r}))},[mt,Tt,kt,Rl,gl]),at.useEffect(()=>{const o=r=>{hr.current&&(hr.current.contains(r.target)||Do(null))};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[]),at.useEffect(()=>{const o=(r,x)=>{const y=r.current;if(!y)return;const S=y.getContext("2d");if(!S)return;const m=y.width,h=y.height;if(S.clearRect(0,0,m,h),S.fillStyle="#fff",S.fillRect(0,0,m,h),x?.bitmap){const w=x.bitmap,k=Math.min(m/w.width,h/w.height),z=Math.max(1,Math.floor(w.width*k)),re=Math.max(1,Math.floor(w.height*k)),Y=Math.floor((m-z)/2),ve=Math.floor((h-re)/2);S.drawImage(w,Y,ve,z,re)}S.strokeStyle="#ddd",S.lineWidth=1,S.strokeRect(.5,.5,m-1,h-1)};o(da,v),o(gs,u)},[v,u]),at.useEffect(()=>{const o=[],r=[],x=[],y=[];for(const S of ke)if(S.type==="via"&&S.points.length>=1){const m=S.points[0],h={id:S.id,pointId:m.id,x:m.x,y:m.y,size:S.size,color:S.color};o.push(h)}else if(S.type==="pad"&&S.points.length>=1){const m=S.points[0],h={id:S.id,pointId:m.id,x:m.x,y:m.y,size:S.size,color:S.color,layer:S.layer||"top"};r.push(h)}else if(S.type==="trace"&&S.points.length>=2)for(let m=0;m<S.points.length-1;m++){const h=S.points[m],w=S.points[m+1],k={id:S.id,startPointId:h.id,endPointId:w.id,x1:h.x,y1:h.y,x2:w.x,y2:w.y,size:S.size,color:S.color};S.layer==="top"?x.push(k):y.push(k)}Ea(o),$a(r),Jr(x),ea(y)},[ke]);const Wo=j.useRef(ke);Wo.current=ke;const yl=j.useCallback(()=>{const r=new Date().toISOString(),x=rx();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:r,view:{currentView:te,viewScale:$e,viewPan:ht,showBothLayers:Ws,selectedDrawingLayer:Ut},images:{top:v?{name:v.name,width:v.width,height:v.height,dataUrl:v.dataUrl??v.url,x:v.x,y:v.y,scale:v.scale,rotation:v.rotation,flipX:v.flipX,flipY:v.flipY,skewX:v.skewX,skewY:v.skewY,keystoneV:v.keystoneV,keystoneH:v.keystoneH}:null,bottom:u?{name:u.name,width:u.width,height:u.height,dataUrl:u.dataUrl??u.url,x:u.x,y:u.y,scale:u.scale,rotation:u.rotation,flipX:u.flipX,flipY:u.flipY,skewX:u.skewX,skewY:u.skewY,keystoneV:u.keystoneV,keystoneH:u.keystoneH}:null},drawing:{drawingStrokes:Wo.current.filter(S=>!(S.type==="trace"&&S.points.length<2)),vias:Ji,tracesTop:jn,tracesBottom:Qs,componentsTop:Dt,componentsBottom:ut,grounds:Tt,powers:mt},powerBuses:kt,pointIdCounter:sh(),traceColors:{top:De,bottom:T},traceSizes:{top:Ee,bottom:lt},padColors:{top:J,bottom:et},padSizes:{top:M,bottom:I},componentColors:{top:ae,bottom:Be},componentSizes:{top:ge,bottom:Ye},traceToolLayer:en,toolSettings:{trace:on.get("trace")?.settings||{color:"#ff0000",size:10},via:on.get("via")?.settings||{color:"#ff0000",size:26},pad:on.get("pad")?.settings||{color:"#ff0000",size:26},component:on.get("component")?.settings||{color:"#ff0000",size:18},ground:on.get("ground")?.settings||{color:"#000000",size:18},power:on.get("power")?.settings||{color:"#ff0000",size:18}},locks:{areImagesLocked:rl,areViasLocked:Nn,arePadsLocked:Mn,areTracesLocked:Rn,areComponentsLocked:$n,areGroundNodesLocked:Gn,arePowerNodesLocked:qt},visibility:{showViasLayer:qn,showTopPadsLayer:fa,showBottomPadsLayer:pa,showTopTracesLayer:Un,showBottomTracesLayer:hl,showTopComponents:Hl,showBottomComponents:mn,showPowerLayer:Dn,showGroundLayer:wi,showConnectionsLayer:$i},autoSave:{enabled:jl,interval:oa,baseName:Bi},projectInfo:{name:Pn}},timestamp:x}},[te,$e,ht,Ws,Ut,v,u,ke,Ji,jn,Qs,Dt,ut,Tt,on,rl,Nn,Mn,Rn,$n,Gn,qt,kt,sh,De,T,Ee,lt,J,et,M,I,ae,Be,ge,Ye,en,jl,oa,Bi,Pn,qn,fa,pa,Un,hl,Hl,mn,Dn,wi,$i]),co=j.useRef(yl);co.current=yl;const Di=j.useRef(_i);Di.current=_i;const Wl=j.useRef(Bi);Wl.current=Bi;const Lo=j.useRef(fl);Lo.current=fl;const jr=j.useRef(fs);jr.current=fs;const wn=j.useRef([]);wn.current=Mo;const za=j.useRef(-1);za.current=sr;const di=j.useCallback(async()=>{console.log("Auto save: performAutoSave called");let o=Di.current,r=Wl.current;console.log(`Auto save: dirHandle=${o?"set":"missing"}, baseName=${r||"missing"}`);const x=jr.current;if(console.log(`Auto save: currentFilePath=${x||"none"}`),!o||!r){console.warn(`Auto save: Missing directory handle (${!o}) or base name (${!r}). Please use File -> Auto Save -> Enable to set up auto save.`),ni(!1),tn.current&&(clearInterval(tn.current),tn.current=null);return}if(!Il.current){console.log("Auto save: Skipping - no changes since last save");return}const y=Wo.current,S=y.filter(re=>re.type==="trace"&&re.points.length<2);if(S.length>0){console.log(`Auto save: Cleaning up ${S.length} single-point trace(s) before save`),S.forEach(Y=>console.log(`  - Removing single-point trace ${Y.id}`));const re=y.filter(Y=>!(Y.type==="trace"&&Y.points.length<2));ct(re),Wo.current=re}console.log("Auto save: Starting save...");const{project:m,timestamp:h}=co.current(),w=`${r}_${h}.json`,k=JSON.stringify(m,null,2),z=new Blob([k],{type:"application/json"});try{let re;try{re=await o.getDirectoryHandle("history",{create:!0})}catch(ee){console.error("Failed to get/create history directory:",ee);return}try{const ee=[];for await(const q of o.keys())try{if(q==="history"||q===w)continue;const pe=await(await o.getFileHandle(q)).getFile();if(!q.endsWith(".json"))continue;const ye=await pe.text();try{const je=JSON.parse(ye);je.version&&(je.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!je.fileType)&&(ee.push(q),console.log(`Auto save: Found PCB project file in root: ${q} (${je.fileType?"auto-saved":"manually saved"})`))}catch{continue}}catch{continue}for(const q of ee)try{const ye=await(await(await o.getFileHandle(q)).getFile()).text(),Ce=await(await re.getFileHandle(q,{create:!0})).createWritable();await Ce.write(new Blob([ye],{type:"application/json"})),await Ce.close(),await o.removeEntry(q),console.log(`Auto save: Moved ${q} from root to history/`)}catch(Se){console.warn(`Auto save: Failed to move ${q} to history:`,Se)}}catch(ee){console.warn("Auto save: Error checking for old files in root:",ee)}const ve=await(await o.getFileHandle(w,{create:!0})).createWritable();await ve.write(z),await ve.close(),console.log(`Auto save: Successfully saved ${w} to root directory`),Lo.current(w);const L=wn.current,ie=[w,...L.filter(ee=>ee!==w)].sort((ee,q)=>q.localeCompare(ee));Uo(ie),wn.current=ie,rr(0),za.current=0,Il.current=!1}catch(re){console.error("Auto save failed:",re)}},[]);ra.current=di;const Go=j.useCallback(async()=>{const{project:o}=yl(),r=JSON.stringify(o,null,2),x=new Blob([r],{type:"application/json"});if(No&&Pn)try{const z="project.json",Y=await(await No.getFileHandle(z,{create:!0})).createWritable();await Y.write(x),await Y.close(),fl(z),console.log(`Project saved: ${Pn}/${z}`);return}catch(z){console.error("Failed to save to project directory:",z),Oi(null)}if(Pn&&!No){const z=window;if(typeof z.showDirectoryPicker=="function")try{const re=await z.showDirectoryPicker();Oi(re);const Y=`${Pn}.json`,L=await(await re.getFileHandle(Y,{create:!0})).createWritable();await L.write(x),await L.close(),fl(Y),console.log(`Project saved: ${Y} in selected directory`);return}catch(re){re?.name!=="AbortError"&&console.error("Failed to get directory:",re)}}const y=z=>String(z).padStart(2,"0"),S=new Date,h=`pcb_project_${`${S.getFullYear()}_${y(S.getMonth()+1)}_${y(S.getDate())}_${y(S.getHours())}_${y(S.getMinutes())}_${y(S.getSeconds())}`}.json`,w=window;if(typeof w.showSaveFilePicker=="function")try{const z=await w.showSaveFilePicker({suggestedName:h,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),re=await z.createWritable();await re.write(x),await re.close();const Y=z.name;try{const ie=await z.getFile();fl(ie.name)}catch{fl(Y)}const L=Y.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");L&&(pl(L),localStorage.setItem("pcb_project_name",L));try{const ie=z.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");sa(ie),_i||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(ie){console.warn("Could not set up auto save for new file:",ie)}return}catch(z){if(z?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",z)}const k=document.createElement("a");k.href=URL.createObjectURL(x),k.download=h,document.body.appendChild(k),k.click(),setTimeout(()=>{URL.revokeObjectURL(k.href),document.body.removeChild(k)},0)},[yl]),Cr=j.useCallback(async()=>{const o=[...Dt,...ut],{schematic:r,nodesCsv:x}=sx(o,ke,mt,Tt,kt),y=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),S=Pn||"pcb_project",m=new Blob([x],{type:"text/csv"}),h=`${y}_nodes.csv`,w=window;if(typeof w.showSaveFilePicker=="function")try{const Y=await w.showSaveFilePicker({suggestedName:h,types:[{description:"CSV Files",accept:{"text/csv":[".csv"]}}]}),ve=await Y.createWritable();await ve.write(m),await ve.close(),console.log(`Nodes CSV exported: ${Y.name}`)}catch(Y){if(Y?.name==="AbortError")return;console.warn("showSaveFilePicker failed for CSV, falling back to download",Y);const ve=document.createElement("a");ve.href=URL.createObjectURL(m),ve.download=h,document.body.appendChild(ve),ve.click(),setTimeout(()=>{URL.revokeObjectURL(ve.href),document.body.removeChild(ve)},0)}else{const Y=document.createElement("a");Y.href=URL.createObjectURL(m),Y.download=h,document.body.appendChild(Y),Y.click(),setTimeout(()=>{URL.revokeObjectURL(Y.href),document.body.removeChild(Y)},0)}const k=new Blob([r],{type:"text/plain"}),z=`${S}.kicad_sch`;if(typeof w.showSaveFilePicker=="function")try{const Y=await w.showSaveFilePicker({suggestedName:z,types:[{description:"KiCad Schematic",accept:{"text/plain":["kicad_sch"]}}]}),ve=await Y.createWritable();await ve.write(k),await ve.close(),console.log(`Simple schematic exported: ${Y.name}`);return}catch(Y){if(Y?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",Y)}const re=document.createElement("a");re.href=URL.createObjectURL(k),re.download=z,document.body.appendChild(re),re.click(),setTimeout(()=>{URL.revokeObjectURL(re.href),document.body.removeChild(re)},0)},[Dt,ut,ke,mt,Tt,kt,Pn]);at.useEffect(()=>{tn.current&&(clearInterval(tn.current),tn.current=null);const o=ps.current;if(ps.current=jl,jl&&oa){const r=oa*60*1e3;_i&&Bi?(console.log(`Auto save: Setting up interval for ${oa} minute(s) (${r}ms)`),o||(Il.current=!0,setTimeout(()=>{di()},100)),tn.current&&(clearInterval(tn.current),tn.current=null),tn.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${Il.current}`),console.log(`  - dirHandle: ${Di.current?"set":"missing"}`),console.log(`  - baseName: ${Wl.current||"missing"}`),di()},r),console.log(`Auto save: Interval set up for ${r}ms (${oa} minutes)`),console.log(`  - Directory handle: ${_i?"set":"missing"}`),console.log(`  - Base name: ${Bi||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!_i}) or base name (${!Bi}). Disabling auto save.`),ni(!1),tn.current&&(clearInterval(tn.current),tn.current=null))}else jl||(ps.current=!1);return()=>{tn.current&&(clearInterval(tn.current),tn.current=null)}},[jl,oa,_i,Bi]);const kl=j.useRef(!1);at.useEffect(()=>{if(!jl){kl.current=!1;return}if(kl.current){kl.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}Il.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!v,bottomImage:!!u,drawingStrokesCount:ke.length,componentsTopCount:Dt.length,componentsBottomCount:ut.length,powersCount:mt.length,groundsCount:Tt.length,powerBusesCount:kt.length,areImagesLocked:rl,areViasLocked:Nn,areTracesLocked:Rn,areComponentsLocked:$n,areGroundNodesLocked:Gn,arePowerNodesLocked:qt})},[v,u,ke,Dt,ut,mt,Tt,kt,De,T,Ee,lt,rl,Nn,Rn,$n,Gn,qt,jl]),at.useEffect(()=>{jl?(kl.current=!0,console.log("Auto save: Enabled, marking first run")):kl.current=!1},[jl]),at.useEffect(()=>{jl||(Il.current=!1)},[jl]);const Gi=j.useCallback(()=>!!(v||u||ke.length>0||Dt.length>0||ut.length>0||mt.length>0||Tt.length>0),[v,u,ke,Dt,ut,mt,Tt]);at.useEffect(()=>{const o=localStorage.getItem("pcb_project_name");o&&pl(o)},[]);const Ai=j.useCallback(()=>{Fa({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),zr=j.useCallback(async()=>{const o=window;if(typeof o.showDirectoryPicker=="function")try{const r=await o.showDirectoryPicker();Fa(x=>({...x,locationHandle:r,locationPath:r.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",r.name||"")}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),Rs=j.useCallback(async()=>{const o=rn.projectName.trim();if(!o){alert("Please enter a project name.");return}const r=o.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!rn.locationHandle){alert("Please select a location for the project.");return}const x=rn.locationHandle;let y;try{y=await x.getDirectoryHandle(r,{create:!0})}catch(S){console.error("Failed to create project folder:",S),alert(`Failed to create project folder "${r}". See console for details.`);return}Fa({visible:!1,projectName:"",locationPath:"",locationHandle:null}),pl(r),Oi(y),localStorage.setItem("pcb_project_name",r),localStorage.setItem("pcb_project_location_path",x.name||""),f(null),H(null),ct([]),Hn([]),Cn([]),dl([]),el([]),Pt(new Set),Rt(new Set),It(new Set),Et(new Set),ze("overlay"),Kl(1),Kn({x:0,y:0}),Il.current=!1,fl(""),ni(!1),vi(null),ds(null),sa(""),tn.current&&(clearInterval(tn.current),tn.current=null),Wi();try{const{project:S}=yl(),m="project.json",h=JSON.stringify(S,null,2),w=new Blob([h],{type:"application/json"}),z=await(await y.getFileHandle(m,{create:!0})).createWritable();await z.write(w),await z.close(),fl(m),console.log(`New project created: ${r}/project.json`),ti({visible:!0,source:"new",interval:5})}catch(S){console.error("Failed to save new project:",S),alert("Failed to save new project file. See console for details.")}},[Wi,yl,rn]),Ra=j.useCallback(()=>{Fa({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Fo=j.useCallback(()=>{const o=Pn?`${Pn}.json`:"";ko({visible:!0,filename:o,locationPath:"",locationHandle:null}),setTimeout(()=>{if(Ja.current?.focus(),Ja.current&&o){const r=o.replace(/\.json$/i,"");Ja.current.setSelectionRange(0,r.length)}},100)},[Pn]),dc=j.useCallback(async()=>{const o=window;if(typeof o.showDirectoryPicker=="function")try{const r=await o.showDirectoryPicker();ko(x=>({...x,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Rr=j.useCallback(async()=>{const o=cn.filename.trim();if(!o){alert("Please enter a file name.");return}const x=(o.endsWith(".json")?o:`${o}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!cn.locationHandle){alert("Please select a location for the file.");return}const y=cn.locationHandle;try{const{project:S}=yl(),m=JSON.stringify(S,null,2),h=new Blob([m],{type:"application/json"}),k=await(await y.getFileHandle(x,{create:!0})).createWritable();await k.write(h),await k.close(),fl(x);const z=x.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");z&&(pl(z),localStorage.setItem("pcb_project_name",z)),Oi(y),ko({visible:!1,filename:"",locationPath:"",locationHandle:null}),Do(null),console.log(`Project saved as: ${x} in selected directory`)}catch(S){console.error("Failed to save project:",S),alert(`Failed to save project file "${x}". See console for details.`)}},[cn,yl]),Fi=j.useCallback(()=>{ko({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),uo=j.useCallback(async()=>{Ao({visible:!1}),await Go(),Ai(),ui()},[Go,Ai,ui]),fc=j.useCallback(()=>{Ao({visible:!1}),Ai(),ui()},[Ai,ui]),Ds=j.useCallback(()=>{Ao({visible:!1})},[]);at.useEffect(()=>{if(ir.visible){setTimeout(()=>{pr.current?.focus()},0);const o=r=>{r.key==="Enter"?(r.preventDefault(),uo()):r.key==="Escape"&&(r.preventDefault(),Ao({visible:!1}))};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}}},[ir.visible,uo]);const Da=j.useCallback(async o=>{try{if(o.projectInfo)o.projectInfo.name&&(pl(o.projectInfo.name),localStorage.setItem("pcb_project_name",o.projectInfo.name));else{const m=localStorage.getItem("pcb_project_name");m&&pl(m)}if(o.view&&(o.view.currentView&&ze(o.view.currentView),o.view.viewScale!=null&&Kl(o.view.viewScale),o.view.viewPan&&Kn(o.view.viewPan),o.view.showBothLayers!=null&&Ls(o.view.showBothLayers),o.view.selectedDrawingLayer&&In(o.view.selectedDrawingLayer)),o.traceColors&&(o.traceColors.top&&(nt(o.traceColors.top),Fe("trace",o.traceColors.top,"top")),o.traceColors.bottom&&(Xe(o.traceColors.bottom),Fe("trace",o.traceColors.bottom,"bottom"))),o.traceSizes){const m=o.traceSizes.top!=null&&o.traceSizes.top>0?o.traceSizes.top:6;let h=o.traceSizes.bottom!=null&&o.traceSizes.bottom>0?o.traceSizes.bottom:6;h<6&&(h=6),vt(m),V(h),Ae("trace",m,"top"),Ae("trace",h,"bottom")}else vt(6),V(6);if(o.padColors&&(o.padColors.top&&(Ne(o.padColors.top),Fe("pad",o.padColors.top,"top")),o.padColors.bottom&&(yt(o.padColors.bottom),Fe("pad",o.padColors.bottom,"bottom"))),o.padSizes){const m=o.padSizes.top!=null&&o.padSizes.top>0?o.padSizes.top:26,h=o.padSizes.bottom!=null&&o.padSizes.bottom>0?o.padSizes.bottom:26;R(m),fe(h),Ae("pad",m,"top"),Ae("pad",h,"bottom")}if(o.componentColors&&(o.componentColors.top&&(Me(o.componentColors.top),Fe("component",o.componentColors.top,"top")),o.componentColors.bottom&&(Ve(o.componentColors.bottom),Fe("component",o.componentColors.bottom,"bottom"))),o.componentSizes){const m=o.componentSizes.top!=null&&o.componentSizes.top>0?o.componentSizes.top:18,h=o.componentSizes.bottom!=null&&o.componentSizes.bottom>0?o.componentSizes.bottom:18;Ue(m),wt(h),Ae("component",m,"top"),Ae("component",h,"bottom")}if(o.traceToolLayer&&(ts(o.traceToolLayer),B==="draw"&&Oe==="trace")){const m=o.traceToolLayer;C(m==="top"?o.traceColors?.top||De:o.traceColors?.bottom||T);const h=o.traceSizes?.top!=null&&o.traceSizes.top>0?o.traceSizes.top:6;let w=o.traceSizes?.bottom!=null&&o.traceSizes.bottom>0?o.traceSizes.bottom:6;w<6&&(w=6),ne(m==="top"?h:w)}o.toolSettings&&Jn(m=>{const h=new Map(m);if(o.toolSettings.trace){const k=h.get("trace");k&&h.set("trace",{...k,settings:o.toolSettings.trace})}if(o.toolSettings.via){const k=h.get("via");k&&h.set("via",{...k,settings:o.toolSettings.via})}if(o.toolSettings.pad){const k=h.get("pad");k&&h.set("pad",{...k,settings:o.toolSettings.pad})}if(o.toolSettings.component){const k=h.get("component");k&&h.set("component",{...k,settings:o.toolSettings.component})}if(o.toolSettings.ground){const k=h.get("ground");k&&h.set("ground",{...k,settings:o.toolSettings.ground})}if(o.toolSettings.power){const k=h.get("power");k&&h.set("power",{...k,settings:o.toolSettings.power})}const w=B==="draw"&&Oe==="trace"?h.get("trace"):B==="draw"&&Oe==="via"?h.get("via"):B==="draw"&&Oe==="pad"?h.get("pad"):B==="component"?h.get("component"):B==="power"?h.get("power"):B==="ground"?h.get("ground"):null;return w&&(C(w.settings.color),ne(w.settings.size)),h});const r=async m=>{if(!m)return null;let h=null;if(m.dataUrl){const w=await(await fetch(m.dataUrl)).blob();h=await createImageBitmap(w)}return{url:m.dataUrl??"",name:m.name??"image",width:m.width??(h?h.width:0),height:m.height??(h?h.height:0),dataUrl:m.dataUrl,x:m.x??0,y:m.y??0,scale:m.scale??1,rotation:m.rotation??0,flipX:!!m.flipX,flipY:!!m.flipY,skewX:m.skewX??0,skewY:m.skewY??0,keystoneV:m.keystoneV??0,keystoneH:m.keystoneH??0,bitmap:h}},x=await r(o.images?.top),y=await r(o.images?.bottom);if(f(x),H(y),o.pointIdCounter&&typeof o.pointIdCounter=="number")zd(o.pointIdCounter);else{let m=0;if(o.drawing?.drawingStrokes){for(const w of o.drawing.drawingStrokes)if(w.points)for(const k of w.points)k.id&&typeof k.id=="number"&&k.id>m&&(m=k.id)}const h=[...o.drawing?.componentsTop||[],...o.drawing?.componentsBottom||[]];for(const w of h)if(w.pinConnections){for(const k of w.pinConnections)if(k){const z=parseInt(k.trim(),10);!isNaN(z)&&z>m&&(m=z)}}if(o.drawing?.powers)for(const w of o.drawing.powers)w.pointId&&typeof w.pointId=="number"&&w.pointId>m&&(m=w.pointId);if(o.drawing?.grounds)for(const w of o.drawing.grounds)w.pointId&&typeof w.pointId=="number"&&w.pointId>m&&(m=w.pointId);zd(m+1)}if(o.locks&&(typeof o.locks.areImagesLocked=="boolean"?wl(o.locks.areImagesLocked):typeof o.locks.isImagesLocked=="boolean"&&wl(o.locks.isImagesLocked),typeof o.locks.areViasLocked=="boolean"&&la(o.locks.areViasLocked),typeof o.locks.arePadsLocked=="boolean"&&rs(o.locks.arePadsLocked),typeof o.locks.areTracesLocked=="boolean"&&cs(o.locks.areTracesLocked),typeof o.locks.areComponentsLocked=="boolean"&&Xa(o.locks.areComponentsLocked),typeof o.locks.areGroundNodesLocked=="boolean"?Yn(o.locks.areGroundNodesLocked):typeof o.locks.isGroundLocked=="boolean"&&Yn(o.locks.isGroundLocked),typeof o.locks.arePowerNodesLocked=="boolean"&&Wa(o.locks.arePowerNodesLocked)),o.visibility&&(typeof o.visibility.showViasLayer=="boolean"&&xs(o.visibility.showViasLayer),typeof o.visibility.showTopPadsLayer=="boolean"&&gr(o.visibility.showTopPadsLayer),typeof o.visibility.showBottomPadsLayer=="boolean"&&bs(o.visibility.showBottomPadsLayer),typeof o.visibility.showTopTracesLayer=="boolean"&&ys(o.visibility.showTopTracesLayer),typeof o.visibility.showBottomTracesLayer=="boolean"&&vs(o.visibility.showBottomTracesLayer),typeof o.visibility.showTopComponents=="boolean"&&lo(o.visibility.showTopComponents),typeof o.visibility.showBottomComponents=="boolean"&&ha(o.visibility.showBottomComponents),typeof o.visibility.showPowerLayer=="boolean"&&Ei(o.visibility.showPowerLayer),typeof o.visibility.showGroundLayer=="boolean"&&tl(o.visibility.showGroundLayer),typeof o.visibility.showConnectionsLayer=="boolean"&&El(o.visibility.showConnectionsLayer)),o.autoSave?(typeof o.autoSave.enabled=="boolean"&&ni(o.autoSave.enabled),typeof o.autoSave.interval=="number"&&vi(o.autoSave.interval),typeof o.autoSave.baseName=="string"&&o.autoSave.baseName?(sa(o.autoSave.baseName),Wl.current=o.autoSave.baseName,o.autoSave.enabled&&!_i&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),ni(!1),vi(null))):o.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),ni(!1),vi(null),sa(""),Wl.current="")):(ni(!1),vi(null),ds(null),sa(""),Di.current=null,Wl.current="",tn.current&&(clearInterval(tn.current),tn.current=null)),o.drawing?.drawingStrokes&&Array.isArray(o.drawing.drawingStrokes)){const m=o.drawing.drawingStrokes.map(h=>({...h,points:h.points.map(w=>({...w,...Jt(w)}))})).filter(h=>!(h.type==="trace"&&h.points.length<2));ct(m)}else{const m=[],h=(z,re)=>{const Y=Jt({x:z.x,y:z.y});m.push({id:z.id||`${Date.now()}-via-${Math.random()}`,points:[{id:z.pointId||Zl(),x:Y.x,y:Y.y}],color:z.color,size:z.size,layer:re,type:"via"})},w=(z,re)=>{const Y=Jt({x:z.x1,y:z.y1}),ve=Jt({x:z.x2,y:z.y2});m.push({id:z.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:z.startPointId||Zl(),x:Y.x,y:Y.y},{id:z.endPointId||Zl(),x:ve.x,y:ve.y}],color:z.color,size:z.size,layer:re,type:"trace"})};o.drawing?.vias?o.drawing.vias.forEach(z=>h(z,"top")):((o.drawing?.viasTop??[]).forEach(z=>h(z,"top")),(o.drawing?.viasBottom??[]).forEach(z=>h(z,"bottom"))),(o.drawing?.tracesTop??[]).forEach(z=>w(z,"top")),(o.drawing?.tracesBottom??[]).forEach(z=>w(z,"bottom"));const k=m.filter(z=>!(z.type==="trace"&&z.points.length<2));ct(k)}if(o.drawing?.componentsTop){const m=o.drawing.componentsTop.map(h=>{const w=Jt({x:h.x,y:h.y});return{...h,x:w.x,y:w.y,layer:h.layer||"top",pinConnections:h.pinConnections||new Array(h.pinCount||0).fill("")}});Hn(m)}if(o.drawing?.componentsBottom){const m=o.drawing.componentsBottom.map(h=>{const w=Jt({x:h.x,y:h.y});return{...h,x:w.x,y:w.y,layer:h.layer||"bottom",pinConnections:h.pinConnections||new Array(h.pinCount||0).fill("")}});Cn(m)}if(o.drawing?.grounds){const h=o.drawing.grounds.map(w=>{const k=w.pointId||Zl(),z=Jt({x:w.x,y:w.y});return{...w,pointId:k,x:z.x,y:z.y}}).filter(w=>{const k=w.y>=0&&w.x>=0&&typeof w.x=="number"&&typeof w.y=="number"&&!isNaN(w.x)&&!isNaN(w.y)&&isFinite(w.x)&&isFinite(w.y);return k||console.warn(`Filtered out invalid ground symbol at (${w.x}, ${w.y}) - likely in border area or invalid coordinates`),k});el(h)}let S=kt;if(o.powerBuses&&Array.isArray(o.powerBuses)&&(S=o.powerBuses,En(S)),o.drawing?.powers){const h=o.drawing.powers.map(w=>{const k=w.pointId||Zl(),z=Jt({x:w.x,y:w.y});return w.powerBusId?{...w,pointId:k,x:z.x,y:z.y,layer:w.layer||"top"}:{...w,pointId:k,x:z.x,y:z.y,powerBusId:S.length>0?S[0].id:"default-5v",layer:w.layer||"top"}}).filter(w=>{const k=w.y>=0&&w.x>=0&&typeof w.x=="number"&&typeof w.y=="number"&&!isNaN(w.x)&&!isNaN(w.y)&&isFinite(w.x)&&isFinite(w.y);return k||console.warn(`Filtered out invalid power node at (${w.x}, ${w.y}) - likely in border area or invalid coordinates`),k});dl(h)}Il.current=!1}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}},[B,Oe]),_n=j.useCallback(async()=>{},[fs]),il=j.useCallback(async o=>{const r=Di.current;if(!r){console.warn("Cannot load file: no directory handle");return}try{const y=await(await r.getFileHandle(o)).getFile();if(y.size===0){console.warn(`File ${o} is empty, skipping`);const z=wn.current.filter(re=>re!==o);Uo(z),wn.current=z;return}const S=await y.text();if(!S||S.trim().length===0){console.warn(`File ${o} contains no data, skipping`);const z=wn.current.filter(re=>re!==o);Uo(z),wn.current=z;return}let m;try{m=JSON.parse(S)}catch(k){console.error(`Failed to parse JSON from file ${o}:`,k);const re=wn.current.filter(Y=>Y!==o);Uo(re),wn.current=re,await _n();return}Wi(),Kl(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Pt(new Set),Rt(new Set),It(new Set),Et(new Set),ui(),await Da(m),fl(o);const w=wn.current.indexOf(o);w>=0?(rr(w),za.current=w):await _n(),Il.current=!1}catch(x){console.error("Failed to load file from history:",x);const y=wn.current;if(y.includes(o)){const S=y.filter(m=>m!==o);Uo(S),wn.current=S,await _n()}}},[Da,_n,ui]);j.useCallback(async()=>{const o=za.current,r=wn.current;if(o>=0&&o<r.length-1){const x=o+1,y=r[x];y&&await il(y)}},[il]),j.useCallback(async()=>{const o=za.current,r=wn.current;if(o<=0||o>=r.length||r.length===0){console.warn("Cannot navigate to newer file: index is",o,"history length is",r.length);return}if(o>0&&o<r.length&&r.length>0){const x=o-1;if(x>=0&&x<r.length){const y=r[x];y?await il(y):(console.warn("No newer file found at index",x),await _n())}else console.warn("Cannot navigate to newer file: prevIndex",x,"is out of bounds")}},[il,_n]),at.useEffect(()=>{Ql.current=qe},[qe]);const fi=at.useRef(Oe),qo=at.useRef(Ut);at.useEffect(()=>{const o=Oe!==fi.current;if(B==="draw"&&fi.current==="trace"&&o){if(Ql.current.length>=2){const r={id:`${Date.now()}-trace-autofinalize`,points:Ql.current,color:_,size:g,layer:qo.current,type:"trace"};ct(x=>[...x,r]),qo.current==="top"?Jl(x=>[...x,r.id]):Ui(x=>[...x,r.id])}Qe([]),At(!1)}fi.current=Oe,qo.current=Ut},[Oe,Ut,B,_,g]);const pc=at.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);at.useEffect(()=>{ri()},[ke]),at.useEffect(()=>{ri()},[Dt,ut,Tt,wi]),at.useEffect(()=>{const o=Vi.current,r=cr.current;if(ca.current=!0,o){const x=Math.max(0,o.scrollWidth-o.clientWidth),y=Za.current,S=Math.max(0,Math.min(x,-(ht.x+y)));Math.abs(o.scrollLeft-S)>.5&&(o.scrollLeft=S)}if(r){const x=Math.max(0,r.scrollHeight-r.clientHeight),y=Qa.current,S=Math.max(0,Math.min(x,-(ht.y+y)));Math.abs(r.scrollTop-S)>.5&&(r.scrollTop=S)}requestAnimationFrame(()=>{ca.current=!1})},[ht.x,ht.y]);const Ke=sr>0,vl=j.useCallback(async()=>{const o=window;if(typeof o.showOpenFilePicker=="function")try{const[r]=await o.showOpenFilePicker({multiple:!1}),x=await r.getFile();if(!x.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}fl(x.name);const y=await x.text(),S=JSON.parse(y);try{const h=await r.getParent();Oi(h)}catch(h){console.warn("Could not get directory handle from file handle:",h)}await Da(S);let m;S.projectInfo?.name?m=S.projectInfo.name:(m=x.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",pl(m),localStorage.setItem("pcb_project_name",m)),Pn||(pl(m),localStorage.setItem("pcb_project_name",m)),setTimeout(()=>{ti({visible:!0,source:"open",interval:5})},100)}catch(r){if(r?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",r),Ii.current?.click()}else Ii.current?.click()},[Da,Pn,fl,pl,Oi,ti]);return i.jsxs("div",{className:"app",children:[i.jsx("header",{className:"app-header",children:i.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.0)"})}),i.jsx(cx,{openMenu:ru,setOpenMenu:Do,isReadOnlyMode:Ke,currentProjectFilePath:fs,onNewProject:Ai,onOpenProject:vl,onSaveProject:Go,onSaveAs:Fo,onExportSchematic:Cr,onPrint:Ca,hasUnsavedChanges:Gi,setNewProjectDialog:Ao,setAutoSaveDialog:yi,topImage:v,bottomImage:u,selectedImageForTransform:Vt,setSelectedImageForTransform:Mi,setCurrentTool:D,transformMode:un,setTransformMode:iu,updateImageTransform:js,resetImageTransform:du,isGrayscale:ce,setIsGrayscale:oe,isBlackAndWhiteEdges:P,setIsBlackAndWhiteEdges:W,isBlackAndWhiteInverted:_e,setIsBlackAndWhiteInverted:we,areImagesLocked:rl,setAreImagesLocked:wl,onEnterBoardDimensions:()=>ba(!0),fileInputTopRef:ur,fileInputBottomRef:dr,openProjectRef:Ii,increaseSize:Cs,decreaseSize:Ri,brushSize:g,drawingStrokes:ke,selectedIds:zt,selectedComponentIds:bt,selectedPowerIds:ft,selectedGroundIds:Ht,componentsTop:Dt,componentsBottom:ut,powers:mt,grounds:Tt,setSetSizeDialog:Tl,areViasLocked:Nn,setAreViasLocked:la,arePadsLocked:Mn,setArePadsLocked:rs,areTracesLocked:Rn,setAreTracesLocked:cs,areComponentsLocked:$n,setAreComponentsLocked:Xa,areGroundNodesLocked:Gn,setAreGroundNodesLocked:Yn,arePowerNodesLocked:qt,setArePowerNodesLocked:Wa,setSelectedIds:Pt,setSelectedComponentIds:Rt,setSelectedPowerIds:It,setSelectedGroundIds:Et,selectAllVias:Dl,selectAllTraces:Al,selectAllPads:Yi,selectAllComponents:ai,selectDisconnectedComponents:oi,selectAllPowerNodes:rc,selectAllGroundNodes:xr,setShowPowerBusManager:io,menuBarRef:hr}),i.jsxs("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:[i.jsxs("div",{ref:qa,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[i.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:44,display:"flex",flexDirection:"column",gap:8,padding:"6px 6px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[i.jsx("button",{onClick:()=>{Ke||ci()},onMouseDown:o=>o.currentTarget.blur(),disabled:Ke,title:"Select (S)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="select"?"2px solid #000":"1px solid #ddd",background:B==="select"?"#e6f0ff":"#fff",color:Ke?"#999":"#222",outline:"none",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsx(Xg,{size:16})}),i.jsx("button",{onClick:()=>{Ke||(Ki("via"),D("draw"))},disabled:Ke,title:"Draw Vias (V)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="draw"&&Oe==="via"?"2px solid #000":"1px solid #ddd",background:B==="draw"&&Oe==="via"?"#e6f0ff":"#fff",color:Ke?"#999":"#222",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const r=on.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";return i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:r,strokeWidth:"3"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:r})]})})()})}),i.jsx("button",{ref:si,onClick:()=>{Ke||(Ki("pad"),D("draw"),In(ul||"top"),Nt(!0))},disabled:Ke,title:"Draw Pads (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="draw"&&Oe==="pad"?"2px solid #000":"1px solid #ddd",background:B==="draw"&&Oe==="pad"?"#e6f0ff":"#fff",color:Ke?"#999":"#222",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const o=on.get("pad"),r=o?.settings.size||M||26,x=o?.settings.color||J||_,y=Math.min(14,Math.max(4,r/26*14)),S=(24-y)/2,m=(24-y)/2;return i.jsx("rect",{x:S,y:m,width:y,height:y,fill:x})})()})}),i.jsx("button",{ref:Yl,onClick:()=>{Ke||(Ki("trace"),D("draw"),In(en||"top"),Sa(!0))},disabled:Ke,title:"Draw Traces (T)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="draw"&&Oe==="trace"?"2px solid #000":"1px solid #ddd",background:B==="draw"&&Oe==="trace"?"#e6f0ff":"#fff",color:Ke?"#999":"#222",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsx(Lg,{size:16,color:on.get("trace")?.settings.color||(en==="top"?De:T)||fh})}),i.jsx("button",{ref:Pl,onClick:()=>{Ke||(D("component"),wa(!0),ll(!1),Ci(null))},disabled:Ke,title:"Draw Component (C)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="component"?"2px solid #000":"1px solid #ddd",background:B==="component"?"#e6f0ff":"#fff",color:Ke?"#999":"#222",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:(()=>{const o=Vl||"top",r=on.get("component"),x=(o==="top"?ae:Be)||r?.settings.color||ph;return Zn?i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:x,strokeWidth:"1.5"}),i.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:x,fontWeight:"bold",fontFamily:"monospace",children:Jc(Zn)})]}):i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[i.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:x,stroke:x,strokeWidth:"0.5"}),i.jsxs("g",{stroke:x,fill:"none",strokeWidth:"1.5",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),i.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:x})]})]})})()}),i.jsx("button",{ref:Eo,onClick:()=>{Ke||D("power")},disabled:Ke,title:"Draw Power (B)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="power"?"2px solid #000":"1px solid #ddd",background:B==="power"?"#e6f0ff":"#fff",color:Ke?"#999":"#222",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsx("span",{style:{color:on.get("power")?.settings.color||tu,fontSize:"18px",fontWeight:"bold",lineHeight:1},children:"V"})}),i.jsx("button",{onClick:()=>{Ke||D("ground")},disabled:Ke,title:"Draw Ground (G)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="ground"?"2px solid #000":"1px solid #ddd",background:B==="ground"?"#e6f0ff":"#fff",color:Ke?"#999":"#222",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible"},children:i.jsxs("g",{stroke:on.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),i.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),i.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),i.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})})}),i.jsx("button",{onClick:()=>{Ke||D("erase")},disabled:Ke,title:"Erase (E)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="erase"?"2px solid #000":"1px solid #ddd",background:B==="erase"?"#ffecec":"#fff",color:Ke?"#999":"#222",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsxs("g",{transform:"rotate(-35 12 12)",children:[i.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),i.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})})}),i.jsx("button",{onClick:()=>{Ke||D(o=>o==="pan"?"draw":"pan")},disabled:Ke,title:"Move (H)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="pan"?"2px solid #000":"1px solid #ddd",background:B==="pan"?"#e6f0ff":"#fff",color:Ke?"#999":"#222",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),i.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),i.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})})}),i.jsx("button",{onClick:()=>{Fn(!1),D(o=>o==="magnify"?"draw":"magnify")},title:`${Oo?"Zoom Out":"Zoom In"} (Z)`,style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:B==="magnify"?"2px solid #000":"1px solid #ddd",background:B==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[i.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),Oo?i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),i.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]})}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>{Ke||us(o=>!o)},disabled:Ke,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:Ke?"not-allowed":"pointer",opacity:Ke?.5:1},children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",children:[i.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),ar&&i.jsx("div",{ref:eo,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:pc.map(o=>i.jsx("div",{onClick:()=>{C(o),us(!1),ml(on),Fe("brush",o),B==="draw"&&Oe==="trace"?Ut==="top"?(nt(o),Fe("trace",o,"top")):(Xe(o),Fe("trace",o,"bottom")):B==="draw"&&Oe==="via"?Fe("via",o):B==="draw"&&Oe==="pad"?Fe("pad",o):B==="component"&&Fe("component",o),zt.size>0&&ct(r=>r.map(x=>zt.has(x.id)?(x.type==="via"?(Fe("via",o),Jn(y=>{const S=new Map(y),m=S.get("via");return m&&S.set("via",{...m,settings:{...m.settings,color:o}}),S})):x.type==="pad"?(Fe("pad",o),Jn(y=>{const S=new Map(y),m=S.get("pad");return m&&S.set("pad",{...m,settings:{...m.settings,color:o}}),S})):x.type==="trace"&&Fe("trace",o,x.layer),{...x,color:o}):x)),bt.size>0&&(Fe("component",o),Hn(r=>r.map(x=>bt.has(x.id)?{...x,color:o}:x)),Cn(r=>r.map(x=>bt.has(x.id)?{...x,color:o}:x))),ft.size>0&&dl(r=>r.map(x=>ft.has(x.id)?{...x,color:o}:x)),Ht.size>0&&el(r=>r.map(x=>Ht.has(x.id)?{...x,color:o}:x))},title:o,style:{width:22,height:22,backgroundColor:o,border:o===_?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},o))})})]})]}),B==="draw"&&Oe==="trace"&&ma&&i.jsxs("div",{ref:yn,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:en==="top",onChange:()=>{ts("top"),In("top"),C(De),ne(Ee),Jn(o=>{const r=new Map(o),x=r.get("trace");return x&&r.set("trace",{...x,settings:{color:De,size:Ee}}),r}),Sa(!1),no(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:en==="bottom",onChange:()=>{ts("bottom"),In("bottom"),C(T),ne(lt),Jn(o=>{const r=new Map(o),x=r.get("trace");return x&&r.set("trace",{...x,settings:{color:T,size:lt}}),r}),Sa(!1),ii(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),B==="draw"&&Oe==="pad"&&Zt&&i.jsxs("div",{ref:$l,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:ul==="top",onChange:()=>{Gs("top"),In("top"),C(J),ne(M),Jn(o=>{const r=new Map(o),x=r.get("pad");return x&&r.set("pad",{...x,settings:{color:J,size:M}}),r}),Nt(!1),no(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:ul==="bottom",onChange:()=>{Gs("bottom"),In("bottom"),C(et),ne(I),Jn(o=>{const r=new Map(o),x=r.get("pad");return x&&r.set("pad",{...x,settings:{color:et,size:I}}),r}),Nt(!1),ii(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),mi&&B==="power"&&i.jsxs("div",{ref:nl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),kt.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...kt].sort((o,r)=>{const x=m=>{const h=m.match(/([+-]?)(\d+\.?\d*)/);if(h){const w=h[1]||"+",k=parseFloat(h[2]);return{absValue:Math.abs(k),isNegative:w==="-",original:m}}return{absValue:1/0,isNegative:!1,original:m}},y=x(o.voltage),S=x(r.voltage);return y.absValue!==S.absValue?y.absValue-S.absValue:y.isNegative!==S.isNegative?y.isNegative?-1:1:0}).map(o=>i.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),Si(o.id),ga(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:o.color,border:"1px solid #ccc"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:o.name}),i.jsx("div",{style:{fontSize:"11px",color:"#666"},children:o.voltage})]})]})},o.id)),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:o=>{o.preventDefault(),o.stopPropagation(),ga(!1),io(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),i.jsx("button",{onClick:o=>{o.preventDefault(),o.stopPropagation(),ga(!1),Si(null),D("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),B==="component"&&so&&i.jsxs("div",{ref:xl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:Ut==="top",onClick:()=>{ns("top"),In("top"),C(ae),ne(ge),Jn(o=>{const r=new Map(o),x=r.get("component");return x&&r.set("component",{...x,settings:{color:ae,size:ge}}),r}),wa(!1),no(!0),ll(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:Ut==="bottom",onClick:()=>{ns("bottom"),In("bottom"),C(Be),ne(Ye),Jn(o=>{const r=new Map(o),x=r.get("component");return x&&r.set("component",{...x,settings:{color:Be,size:Ye}}),r}),wa(!1),ii(!0),ll(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),B==="component"&&oo&&i.jsxs("div",{ref:Ts,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(Fg).map(([o,r])=>{const x=yr.has(o);return i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),Ho(S=>{const m=new Set(S);return m.has(o)?m.delete(o):m.add(o),m})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:x?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[i.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:x?"":""}),o]}),x&&i.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(r).map(([y,S])=>i.jsxs("div",{style:{marginBottom:"2px"},children:[i.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[y,":"]}),S.map(m=>{const h=lu[m];return h?i.jsxs("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),Ci(m),ll(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:Zn===m?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[h.prefix.join(", ")," - ",m," (",h.defaultPins," pins)"]},m):null})]},y))})]},o)}),i.jsx("button",{onClick:o=>{o.preventDefault(),o.stopPropagation(),ll(!1),D("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),i.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[i.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),i.jsxs("div",{onClick:()=>In("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Vt==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:to,onChange:o=>no(o.target.checked)})})]}),i.jsx("canvas",{ref:da,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsxs("div",{onClick:()=>In("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Vt==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:li,onChange:o=>ii(o.target.checked)})})]}),i.jsx("canvas",{ref:gs,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:qn,onChange:o=>xs(o.target.checked)}),i.jsx("span",{children:"Vias"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:fa,onChange:o=>gr(o.target.checked)}),i.jsx("span",{children:"Pads (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Un,onChange:o=>ys(o.target.checked)}),i.jsx("span",{children:"Traces (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Hl,onChange:o=>lo(o.target.checked)}),i.jsx("span",{children:"Components (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:pa,onChange:o=>bs(o.target.checked)}),i.jsx("span",{children:"Pads (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:hl,onChange:o=>vs(o.target.checked)}),i.jsx("span",{children:"Traces (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:mn,onChange:o=>ha(o.target.checked)}),i.jsx("span",{children:"Components (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Dn,onChange:o=>Ei(o.target.checked)}),i.jsx("span",{children:"Power"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:wi,onChange:o=>tl(o.target.checked)}),i.jsx("span",{children:"Ground"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:$i,onChange:o=>El(o.target.checked)}),i.jsx("span",{children:"Connections"})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:qn&&fa&&pa&&Un&&hl&&Hl&&mn&&Dn&&wi&&$i,onChange:o=>{const r=o.target.checked;xs(r),gr(r),bs(r),ys(r),vs(r),lo(r),ha(r),Ei(r),tl(r),El(r)}}),i.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",Z,"%"]}),i.jsxs("label",{className:"radio-label",style:{margin:0},children:[i.jsx("input",{type:"checkbox",checked:me,onChange:o=>{const r=o.target.checked;r?(no(!0),ii(!0)):(E(50),D("select")),K(r)}}),i.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:Z,onChange:o=>E(Number(o.target.value)),onDoubleClick:()=>uc("transparency"),className:"slider",style:{width:"100%",marginTop:3}})]})]}),i.jsx(ux,{visible:!v&&!u}),i.jsx("canvas",{ref:bn,width:Cl.width,height:Cl.height,onMouseDown:cu,onMouseMove:Sr,onMouseUp:ja,onMouseLeave:ja,onWheel:Sn,onDoubleClick:mr,className:`pcb-canvas ${B==="transform"?"transform-cursor":B==="draw"?"draw-cursor":B==="erase"?"erase-cursor":"default-cursor"}`,style:{...ls?{cursor:ls}:B==="pan"?{cursor:ua?"grabbing":"grab"}:{},width:`${Cl.width}px`,height:`${Cl.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),i.jsx(xx,{componentEditor:ta,setComponentEditor:Ks,componentsTop:Dt,componentsBottom:ut,setComponentsTop:Hn,setComponentsBottom:Cn,connectingPin:zn,setConnectingPin:zo,componentDialogPosition:os,setComponentDialogPosition:ei,isDraggingDialog:Js,setIsDraggingDialog:er,dialogDragOffset:Ya,setDialogDragOffset:ss,areComponentsLocked:$n}),sl&&sl.visible&&(()=>{if(!mt.find(x=>x.id===sl.id))return null;const r=kt.find(x=>x.id===sl.powerBusId);return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),i.jsx("button",{onClick:()=>na(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:r?`${r.name} (${r.voltage})`:"Unknown"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`power-layer-${sl.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),i.jsxs("select",{id:`power-layer-${sl.id}`,name:`power-layer-${sl.id}`,value:sl.layer,onChange:x=>na({...sl,layer:x.target.value}),disabled:qt,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:qt?.6:1},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:sl.x.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:sl.y.toFixed(2)})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[i.jsx("button",{onClick:()=>na(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),i.jsx("button",{onClick:()=>{qt||(dl(x=>x.map(y=>y.id===sl.id?{...y,layer:sl.layer}:y)),na(null))},disabled:qt,style:{padding:"2px 5px",background:qt?"#f5f5f5":"#0b5fff",color:qt?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:qt?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!v&&!u&&i.jsx("div",{className:"placeholder"}),i.jsx("div",{ref:Vi,className:"scrollbar-horizontal",onScroll:o=>{if(ca.current)return;const r=o.currentTarget,x=Za.current;Kn(y=>({x:-r.scrollLeft-x,y:y.y}))},"aria-label":"Horizontal pan",children:i.jsx("div",{className:"scrollbar-horizontal-content",ref:nc})}),i.jsx("div",{ref:cr,className:"scrollbar-vertical",onScroll:o=>{if(ca.current)return;const r=o.currentTarget,x=Qa.current;Kn(y=>({x:y.x,y:-r.scrollTop-x}))},"aria-label":"Vertical pan",children:i.jsx("div",{className:"scrollbar-vertical-content",ref:lc})})]}),ms&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"12px",zIndex:1e3,minWidth:"400px",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>io(!1),style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666",padding:0,width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"16px"},children:[...kt].sort((o,r)=>{const x=m=>{const h=m.match(/([+-]?)(\d+\.?\d*)/);if(h){const w=h[1]||"+",k=parseFloat(h[2]);return{absValue:Math.abs(k),isNegative:w==="-",original:m}}return{absValue:1/0,isNegative:!1,original:m}},y=x(o.voltage),S=x(r.voltage);return y.absValue!==S.absValue?y.absValue-S.absValue:y.isNegative!==S.isNegative?y.isNegative?-1:1:0}).map(o=>{const r=kt.findIndex(x=>x.id===o.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px",marginBottom:"6px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:18,height:18,borderRadius:"50%",background:o.color,border:"1px solid #ccc"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("input",{type:"text",value:o.name,onChange:x=>{const y=[...kt];y[r]={...o,name:x.target.value},En(y)},placeholder:"Name",style:{width:"100%",padding:"3px 6px",marginBottom:"3px",border:"1px solid #ccc",borderRadius:3,fontSize:"12px"}}),i.jsx("input",{type:"text",value:o.voltage,onChange:x=>{const y=[...kt];y[r]={...o,voltage:x.target.value},En(y)},placeholder:"Voltage (e.g., +5VDC, +3.3VDC, -5VDC)",style:{width:"100%",padding:"3px 6px",border:"1px solid #ccc",borderRadius:3,fontSize:"12px"}})]}),i.jsx("input",{type:"color",value:o.color,onChange:x=>{const y=[...kt];y[r]={...o,color:x.target.value},En(y)},style:{width:"32px",height:"32px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer"}}),i.jsx("button",{onClick:()=>{const x=mt.filter(y=>y.powerBusId===o.id);if(x.length>0){alert(`Cannot delete: ${x.length} power node(s) are using this bus. Remove or reassign them first.`);return}En(y=>y.filter(S=>S.id!==o.id))},style:{padding:"4px 8px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"11px"},children:"Delete"})]},o.id)})}),i.jsx("button",{onClick:()=>{const o={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0VDC",color:"#ff0000"};En(r=>[...r,o])},style:{width:"100%",padding:"6px 10px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px",marginBottom:"8px"},children:"+ Add Power Bus"}),i.jsx("button",{onClick:()=>io(!1),style:{width:"100%",padding:"6px 10px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}),i.jsx("input",{ref:ur,type:"file",accept:"image/*",style:{display:"none"},onChange:o=>{const r=o.target.files?.[0];r&&cc(r,"top"),o.target.value=""}}),i.jsx("input",{ref:dr,type:"file",accept:"image/*",style:{display:"none"},onChange:o=>{const r=o.target.files?.[0];r&&cc(r,"bottom"),o.target.value=""}}),i.jsx("input",{ref:Ii,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async o=>{const r=o.target.files?.[0];if(r)try{fl(r.name);const x=await r.text(),y=JSON.parse(x);await Da(y);let S;y.projectInfo?.name?S=y.projectInfo.name:(S=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",pl(S),localStorage.setItem("pcb_project_name",S)),Pn||(pl(S),localStorage.setItem("pcb_project_name",S)),setTimeout(()=>{ti({visible:!0,source:"open",interval:5})},100)}catch(x){console.error("Failed to open project",x),alert("Failed to open project file. See console for details.")}o.target.value=""}}),i.jsx(fx,{visible:Ga.visible,selectedIds:zt,selectedComponentIds:bt,selectedPowerIds:ft,selectedGroundIds:Ht,drawingStrokes:ke,componentsTop:Dt,componentsBottom:ut,powers:mt,grounds:Tt,powerBuses:kt,onClose:()=>{aa({visible:!1,text:""})},setComponentsTop:Hn,setComponentsBottom:Cn,determineViaType:Rl,determinePadType:gl,onFindComponent:ji,position:ya,isDragging:Ti,onDragStart:o=>{ya&&(ws({x:o.clientX-ya.x,y:o.clientY-ya.y}),Ss(!0),o.preventDefault())}}),ir.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:o=>{o.target===o.currentTarget&&Ds()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Ds,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:fc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),i.jsx("button",{ref:pr,onClick:uo,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),rn.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:o=>{o.target===o.currentTarget&&Ra()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),i.jsx("input",{ref:oc,type:"text",value:rn.projectName,onChange:o=>{Fa(r=>({...r,projectName:o.target.value}))},onKeyDown:o=>{o.key==="Enter"?(o.preventDefault(),Rs()):o.key==="Escape"&&(o.preventDefault(),Ra())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),rn.projectName&&(()=>{const o=rn.projectName.match(/[^a-zA-Z0-9_-]/g);if(o){const r=[...new Set(o)];return i.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",r.map(x=>`"${x}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:rn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:rn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:zr,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),rn.projectName&&rn.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[rn.locationPath,"/",rn.projectName,"/project.json"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Ra,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Rs,disabled:!rn.projectName.trim()||!rn.locationHandle,style:{padding:"8px 16px",background:!rn.projectName.trim()||!rn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!rn.projectName.trim()||!rn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!rn.projectName.trim()||!rn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!rn.projectName.trim()||!rn.locationHandle?.6:1},children:"Create"})]})]})}),cn.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:o=>{o.target===o.currentTarget&&Fi()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),i.jsx("input",{ref:Ja,type:"text",value:cn.filename,onChange:o=>{ko(r=>({...r,filename:o.target.value}))},onKeyDown:o=>{o.key==="Enter"?(o.preventDefault(),Rr()):o.key==="Escape"&&(o.preventDefault(),Fi())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:cn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:cn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:dc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),cn.filename&&cn.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[cn.locationPath,"/",cn.filename.endsWith(".json")?cn.filename:`${cn.filename}.json`]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Fi,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Rr,disabled:!cn.filename.trim()||!cn.locationHandle,style:{padding:"8px 16px",background:!cn.filename.trim()||!cn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!cn.filename.trim()||!cn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!cn.filename.trim()||!cn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!cn.filename.trim()||!cn.locationHandle?.6:1},children:"Save"})]})]})}),i.jsx(dx,{visible:nr.visible,title:nr.title,message:nr.message,onClose:()=>lr({visible:!1,title:"",message:""})}),i.jsx(px,{visible:ao,dimensions:sc,onSave:o=>{zl(o),localStorage.setItem("boardDimensions",JSON.stringify(o))},onClose:()=>ba(!1)}),xi.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:o=>{o.target===o.currentTarget&&Tl({visible:!1,size:6})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),i.jsx("input",{ref:Vo,type:"number",min:"1",max:"99",value:xi.size,onChange:o=>{const r=parseInt(o.target.value)||1,x=Math.max(1,Math.min(99,r));Tl(y=>({...y,size:x}))},onKeyDown:o=>{if(o.key==="Enter"?zs():o.key==="Escape"&&Tl({visible:!1,size:6}),o.key.length===1&&/[0-9]/.test(o.key)){const r=xi.size.toString();r.length>=2&&Vo.current?.selectionStart===Vo.current?.selectionEnd&&Vo.current?.selectionStart===r.length&&o.preventDefault()}},onInput:o=>{const r=o.target,x=r.value;if(x.length>2){r.value=x.slice(0,2);const y=parseInt(r.value)||1;Tl(S=>({...S,size:Math.max(1,Math.min(99,y))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),i.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(xi.size)?xi.size:"",onChange:o=>{const r=parseInt(o.target.value);!isNaN(r)&&r>0&&Tl(x=>({...x,size:r}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[i.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(o=>i.jsxs("option",{value:o,style:{background:"#1f1f24",color:"#f2f2f2"},children:[o," pixels"]},o))]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Tl({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:zs,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),ia.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:o=>{o.target===o.currentTarget&&yi({visible:!1,interval:5})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:ia.interval===null?"disable":(ia.interval||5).toString(),onChange:o=>{const r=o.target.value;if(r==="disable")yi({visible:!0,interval:null});else{const x=parseFloat(r);!isNaN(x)&&x>0&&yi({visible:!0,interval:x})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),i.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>yi({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:()=>wr(ia.interval,!1),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),La.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:o=>{o.target===o.currentTarget&&Yo()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:o=>o.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),i.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:La.interval===null?"disable":(La.interval||5).toString(),onChange:o=>{const r=o.target.value;if(r==="disable")ti({...La,interval:null});else{const x=parseFloat(r);!isNaN(x)&&x>0&&ti({...La,interval:x})}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Yo,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),i.jsx("button",{onClick:()=>wr(La.interval,!0),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})})]})]})}Bg.createRoot(document.getElementById("root")).render(i.jsx(j.StrictMode,{children:i.jsx(Mx,{})}));
