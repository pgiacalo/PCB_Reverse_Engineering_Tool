(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))p(d);new MutationObserver(d=>{for(const B of d)if(B.type==="childList")for(const L of B.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&p(L)}).observe(document,{childList:!0,subtree:!0});function v(d){const B={};return d.integrity&&(B.integrity=d.integrity),d.referrerPolicy&&(B.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?B.credentials="include":d.crossOrigin==="anonymous"?B.credentials="omit":B.credentials="same-origin",B}function p(d){if(d.ep)return;d.ep=!0;const B=v(d);fetch(d.href,B)}})();function Mg(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Hu={exports:{}},xc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih;function Ug(){if(ih)return xc;ih=1;var c=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function v(p,d,B){var L=null;if(B!==void 0&&(L=""+B),d.key!==void 0&&(L=""+d.key),"key"in d){B={};for(var ge in d)ge!=="key"&&(B[ge]=d[ge])}else B=d;return d=B.ref,{$$typeof:c,type:p,key:L,ref:d!==void 0?d:null,props:B}}return xc.Fragment=u,xc.jsx=v,xc.jsxs=v,xc}var ah;function Bg(){return ah||(ah=1,Hu.exports=Ug()),Hu.exports}var i=Bg(),Eu={exports:{}},At={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh;function _g(){if(oh)return At;oh=1;var c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),L=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),de=Symbol.iterator;function fe(D){return D===null||typeof D!="object"?null:(D=de&&D[de]||D["@@iterator"],typeof D=="function"?D:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,_e={};function Ee(D,X,ue){this.props=D,this.context=X,this.refs=_e,this.updater=ue||Y}Ee.prototype.isReactComponent={},Ee.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},Ee.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function E(){}E.prototype=Ee.prototype;function k(D,X,ue){this.props=D,this.context=X,this.refs=_e,this.updater=ue||Y}var U=k.prototype=new E;U.constructor=k,q(U,Ee.prototype),U.isPureReactComponent=!0;var M=Array.isArray;function T(){}var g={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function we(D,X,ue){var Ve=ue.ref;return{$$typeof:c,type:D,key:X,ref:Ve!==void 0?Ve:null,props:ue}}function tt(D,X){return we(D.type,X,D.props)}function Ke(D){return typeof D=="object"&&D!==null&&D.$$typeof===c}function ke(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ue){return X[ue]})}var Ye=/\/+/g;function Pt(D,X){return typeof D=="object"&&D!==null&&D.key!=null?ke(""+D.key):X.toString(36)}function at(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(T,T):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function _(D,X,ue,Ve,Je){var st=typeof D;(st==="undefined"||st==="boolean")&&(D=null);var ht=!1;if(D===null)ht=!0;else switch(st){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(D.$$typeof){case c:case u:ht=!0;break;case je:return ht=D._init,_(ht(D._payload),X,ue,Ve,Je)}}if(ht)return Je=Je(D),ht=Ve===""?"."+Pt(D,0):Ve,M(Je)?(ue="",ht!=null&&(ue=ht.replace(Ye,"$&/")+"/"),_(Je,X,ue,"",function(El){return El})):Je!=null&&(Ke(Je)&&(Je=tt(Je,ue+(Je.key==null||D&&D.key===Je.key?"":(""+Je.key).replace(Ye,"$&/")+"/")+ht)),X.push(Je)),1;ht=0;var gn=Ve===""?".":Ve+":";if(M(D))for(var Ot=0;Ot<D.length;Ot++)Ve=D[Ot],st=gn+Pt(Ve,Ot),ht+=_(Ve,X,ue,st,Je);else if(Ot=fe(D),typeof Ot=="function")for(D=Ot.call(D),Ot=0;!(Ve=D.next()).done;)Ve=Ve.value,st=gn+Pt(Ve,Ot++),ht+=_(Ve,X,ue,st,Je);else if(st==="object"){if(typeof D.then=="function")return _(at(D),X,ue,Ve,Je);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ht}function ne(D,X,ue){if(D==null)return D;var Ve=[],Je=0;return _(D,Ve,"","",function(st){return X.call(ue,st,Je++)}),Ve}function Me(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(ue){(D._status===0||D._status===-1)&&(D._status=1,D._result=ue)},function(ue){(D._status===0||D._status===-1)&&(D._status=2,D._result=ue)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var ie=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},m={map:ne,forEach:function(D,X,ue){ne(D,function(){X.apply(this,arguments)},ue)},count:function(D){var X=0;return ne(D,function(){X++}),X},toArray:function(D){return ne(D,function(X){return X})||[]},only:function(D){if(!Ke(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return At.Activity=P,At.Children=m,At.Component=Ee,At.Fragment=v,At.Profiler=d,At.PureComponent=k,At.StrictMode=p,At.Suspense=F,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=g,At.__COMPILER_RUNTIME={__proto__:null,c:function(D){return g.H.useMemoCache(D)}},At.cache=function(D){return function(){return D.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(D,X,ue){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Ve=q({},D.props),Je=D.key;if(X!=null)for(st in X.key!==void 0&&(Je=""+X.key),X)!W.call(X,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&X.ref===void 0||(Ve[st]=X[st]);var st=arguments.length-2;if(st===1)Ve.children=ue;else if(1<st){for(var ht=Array(st),gn=0;gn<st;gn++)ht[gn]=arguments[gn+2];Ve.children=ht}return we(D.type,Je,Ve)},At.createContext=function(D){return D={$$typeof:L,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:B,_context:D},D},At.createElement=function(D,X,ue){var Ve,Je={},st=null;if(X!=null)for(Ve in X.key!==void 0&&(st=""+X.key),X)W.call(X,Ve)&&Ve!=="key"&&Ve!=="__self"&&Ve!=="__source"&&(Je[Ve]=X[Ve]);var ht=arguments.length-2;if(ht===1)Je.children=ue;else if(1<ht){for(var gn=Array(ht),Ot=0;Ot<ht;Ot++)gn[Ot]=arguments[Ot+2];Je.children=gn}if(D&&D.defaultProps)for(Ve in ht=D.defaultProps,ht)Je[Ve]===void 0&&(Je[Ve]=ht[Ve]);return we(D,st,Je)},At.createRef=function(){return{current:null}},At.forwardRef=function(D){return{$$typeof:ge,render:D}},At.isValidElement=Ke,At.lazy=function(D){return{$$typeof:je,_payload:{_status:-1,_result:D},_init:Me}},At.memo=function(D,X){return{$$typeof:H,type:D,compare:X===void 0?null:X}},At.startTransition=function(D){var X=g.T,ue={};g.T=ue;try{var Ve=D(),Je=g.S;Je!==null&&Je(ue,Ve),typeof Ve=="object"&&Ve!==null&&typeof Ve.then=="function"&&Ve.then(T,ie)}catch(st){ie(st)}finally{X!==null&&ue.types!==null&&(X.types=ue.types),g.T=X}},At.unstable_useCacheRefresh=function(){return g.H.useCacheRefresh()},At.use=function(D){return g.H.use(D)},At.useActionState=function(D,X,ue){return g.H.useActionState(D,X,ue)},At.useCallback=function(D,X){return g.H.useCallback(D,X)},At.useContext=function(D){return g.H.useContext(D)},At.useDebugValue=function(){},At.useDeferredValue=function(D,X){return g.H.useDeferredValue(D,X)},At.useEffect=function(D,X){return g.H.useEffect(D,X)},At.useEffectEvent=function(D){return g.H.useEffectEvent(D)},At.useId=function(){return g.H.useId()},At.useImperativeHandle=function(D,X,ue){return g.H.useImperativeHandle(D,X,ue)},At.useInsertionEffect=function(D,X){return g.H.useInsertionEffect(D,X)},At.useLayoutEffect=function(D,X){return g.H.useLayoutEffect(D,X)},At.useMemo=function(D,X){return g.H.useMemo(D,X)},At.useOptimistic=function(D,X){return g.H.useOptimistic(D,X)},At.useReducer=function(D,X,ue){return g.H.useReducer(D,X,ue)},At.useRef=function(D){return g.H.useRef(D)},At.useState=function(D){return g.H.useState(D)},At.useSyncExternalStore=function(D,X,ue){return g.H.useSyncExternalStore(D,X,ue)},At.useTransition=function(){return g.H.useTransition()},At.version="19.2.0",At}var sh;function Gu(){return sh||(sh=1,Eu.exports=_g()),Eu.exports}var C=Gu();const it=Mg(C);var Vu={exports:{}},yc={},$u={exports:{}},Iu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh;function Og(){return rh||(rh=1,(function(c){function u(_,ne){var Me=_.length;_.push(ne);e:for(;0<Me;){var ie=Me-1>>>1,m=_[ie];if(0<d(m,ne))_[ie]=ne,_[Me]=m,Me=ie;else break e}}function v(_){return _.length===0?null:_[0]}function p(_){if(_.length===0)return null;var ne=_[0],Me=_.pop();if(Me!==ne){_[0]=Me;e:for(var ie=0,m=_.length,D=m>>>1;ie<D;){var X=2*(ie+1)-1,ue=_[X],Ve=X+1,Je=_[Ve];if(0>d(ue,Me))Ve<m&&0>d(Je,ue)?(_[ie]=Je,_[Ve]=Me,ie=Ve):(_[ie]=ue,_[X]=Me,ie=X);else if(Ve<m&&0>d(Je,Me))_[ie]=Je,_[Ve]=Me,ie=Ve;else break e}}return ne}function d(_,ne){var Me=_.sortIndex-ne.sortIndex;return Me!==0?Me:_.id-ne.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var B=performance;c.unstable_now=function(){return B.now()}}else{var L=Date,ge=L.now();c.unstable_now=function(){return L.now()-ge}}var F=[],H=[],je=1,P=null,de=3,fe=!1,Y=!1,q=!1,_e=!1,Ee=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function U(_){for(var ne=v(H);ne!==null;){if(ne.callback===null)p(H);else if(ne.startTime<=_)p(H),ne.sortIndex=ne.expirationTime,u(F,ne);else break;ne=v(H)}}function M(_){if(q=!1,U(_),!Y)if(v(F)!==null)Y=!0,T||(T=!0,ke());else{var ne=v(H);ne!==null&&at(M,ne.startTime-_)}}var T=!1,g=-1,W=5,we=-1;function tt(){return _e?!0:!(c.unstable_now()-we<W)}function Ke(){if(_e=!1,T){var _=c.unstable_now();we=_;var ne=!0;try{e:{Y=!1,q&&(q=!1,E(g),g=-1),fe=!0;var Me=de;try{t:{for(U(_),P=v(F);P!==null&&!(P.expirationTime>_&&tt());){var ie=P.callback;if(typeof ie=="function"){P.callback=null,de=P.priorityLevel;var m=ie(P.expirationTime<=_);if(_=c.unstable_now(),typeof m=="function"){P.callback=m,U(_),ne=!0;break t}P===v(F)&&p(F),U(_)}else p(F);P=v(F)}if(P!==null)ne=!0;else{var D=v(H);D!==null&&at(M,D.startTime-_),ne=!1}}break e}finally{P=null,de=Me,fe=!1}ne=void 0}}finally{ne?ke():T=!1}}}var ke;if(typeof k=="function")ke=function(){k(Ke)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Pt=Ye.port2;Ye.port1.onmessage=Ke,ke=function(){Pt.postMessage(null)}}else ke=function(){Ee(Ke,0)};function at(_,ne){g=Ee(function(){_(c.unstable_now())},ne)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(_){_.callback=null},c.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<_?Math.floor(1e3/_):5},c.unstable_getCurrentPriorityLevel=function(){return de},c.unstable_next=function(_){switch(de){case 1:case 2:case 3:var ne=3;break;default:ne=de}var Me=de;de=ne;try{return _()}finally{de=Me}},c.unstable_requestPaint=function(){_e=!0},c.unstable_runWithPriority=function(_,ne){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var Me=de;de=_;try{return ne()}finally{de=Me}},c.unstable_scheduleCallback=function(_,ne,Me){var ie=c.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?ie+Me:ie):Me=ie,_){case 1:var m=-1;break;case 2:m=250;break;case 5:m=1073741823;break;case 4:m=1e4;break;default:m=5e3}return m=Me+m,_={id:je++,callback:ne,priorityLevel:_,startTime:Me,expirationTime:m,sortIndex:-1},Me>ie?(_.sortIndex=Me,u(H,_),v(F)===null&&_===v(H)&&(q?(E(g),g=-1):q=!0,at(M,Me-ie))):(_.sortIndex=m,u(F,_),Y||fe||(Y=!0,T||(T=!0,ke()))),_},c.unstable_shouldYield=tt,c.unstable_wrapCallback=function(_){var ne=de;return function(){var Me=de;de=ne;try{return _.apply(this,arguments)}finally{de=Me}}}})(Iu)),Iu}var ch;function Hg(){return ch||(ch=1,$u.exports=Og()),$u.exports}var Pu={exports:{}},Rl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function Eg(){if(dh)return Rl;dh=1;var c=Gu();function u(F){var H="https://react.dev/errors/"+F;if(1<arguments.length){H+="?args[]="+encodeURIComponent(arguments[1]);for(var je=2;je<arguments.length;je++)H+="&args[]="+encodeURIComponent(arguments[je])}return"Minified React error #"+F+"; visit "+H+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(){}var p={d:{f:v,r:function(){throw Error(u(522))},D:v,C:v,L:v,m:v,X:v,S:v,M:v},p:0,findDOMNode:null},d=Symbol.for("react.portal");function B(F,H,je){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:P==null?null:""+P,children:F,containerInfo:H,implementation:je}}var L=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ge(F,H){if(F==="font")return"";if(typeof H=="string")return H==="use-credentials"?H:""}return Rl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,Rl.createPortal=function(F,H){var je=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!H||H.nodeType!==1&&H.nodeType!==9&&H.nodeType!==11)throw Error(u(299));return B(F,H,null,je)},Rl.flushSync=function(F){var H=L.T,je=p.p;try{if(L.T=null,p.p=2,F)return F()}finally{L.T=H,p.p=je,p.d.f()}},Rl.preconnect=function(F,H){typeof F=="string"&&(H?(H=H.crossOrigin,H=typeof H=="string"?H==="use-credentials"?H:"":void 0):H=null,p.d.C(F,H))},Rl.prefetchDNS=function(F){typeof F=="string"&&p.d.D(F)},Rl.preinit=function(F,H){if(typeof F=="string"&&H&&typeof H.as=="string"){var je=H.as,P=ge(je,H.crossOrigin),de=typeof H.integrity=="string"?H.integrity:void 0,fe=typeof H.fetchPriority=="string"?H.fetchPriority:void 0;je==="style"?p.d.S(F,typeof H.precedence=="string"?H.precedence:void 0,{crossOrigin:P,integrity:de,fetchPriority:fe}):je==="script"&&p.d.X(F,{crossOrigin:P,integrity:de,fetchPriority:fe,nonce:typeof H.nonce=="string"?H.nonce:void 0})}},Rl.preinitModule=function(F,H){if(typeof F=="string")if(typeof H=="object"&&H!==null){if(H.as==null||H.as==="script"){var je=ge(H.as,H.crossOrigin);p.d.M(F,{crossOrigin:je,integrity:typeof H.integrity=="string"?H.integrity:void 0,nonce:typeof H.nonce=="string"?H.nonce:void 0})}}else H==null&&p.d.M(F)},Rl.preload=function(F,H){if(typeof F=="string"&&typeof H=="object"&&H!==null&&typeof H.as=="string"){var je=H.as,P=ge(je,H.crossOrigin);p.d.L(F,je,{crossOrigin:P,integrity:typeof H.integrity=="string"?H.integrity:void 0,nonce:typeof H.nonce=="string"?H.nonce:void 0,type:typeof H.type=="string"?H.type:void 0,fetchPriority:typeof H.fetchPriority=="string"?H.fetchPriority:void 0,referrerPolicy:typeof H.referrerPolicy=="string"?H.referrerPolicy:void 0,imageSrcSet:typeof H.imageSrcSet=="string"?H.imageSrcSet:void 0,imageSizes:typeof H.imageSizes=="string"?H.imageSizes:void 0,media:typeof H.media=="string"?H.media:void 0})}},Rl.preloadModule=function(F,H){if(typeof F=="string")if(H){var je=ge(H.as,H.crossOrigin);p.d.m(F,{as:typeof H.as=="string"&&H.as!=="script"?H.as:void 0,crossOrigin:je,integrity:typeof H.integrity=="string"?H.integrity:void 0})}else p.d.m(F)},Rl.requestFormReset=function(F){p.d.r(F)},Rl.unstable_batchedUpdates=function(F,H){return F(H)},Rl.useFormState=function(F,H,je){return L.H.useFormState(F,H,je)},Rl.useFormStatus=function(){return L.H.useHostTransitionStatus()},Rl.version="19.2.0",Rl}var uh;function Vg(){if(uh)return Pu.exports;uh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(u){console.error(u)}}return c(),Pu.exports=Eg(),Pu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function $g(){if(fh)return yc;fh=1;var c=Hg(),u=Gu(),v=Vg();function p(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function B(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ge(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function F(e){if(B(e)!==e)throw Error(p(188))}function H(e){var t=e.alternate;if(!t){if(t=B(e),t===null)throw Error(p(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return F(o),e;if(s===l)return F(o),t;s=s.sibling}throw Error(p(188))}if(n.return!==l.return)n=o,l=s;else{for(var h=!1,w=o.child;w;){if(w===n){h=!0,n=o,l=s;break}if(w===l){h=!0,l=o,n=s;break}w=w.sibling}if(!h){for(w=s.child;w;){if(w===n){h=!0,n=s,l=o;break}if(w===l){h=!0,l=s,n=o;break}w=w.sibling}if(!h)throw Error(p(189))}}if(n.alternate!==l)throw Error(p(190))}if(n.tag!==3)throw Error(p(188));return n.stateNode.current===n?e:t}function je(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=je(e),t!==null)return t;e=e.sibling}return null}var P=Object.assign,de=Symbol.for("react.element"),fe=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),k=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),Ke=Symbol.iterator;function ke(e){return e===null||typeof e!="object"?null:(e=Ke&&e[Ke]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Symbol.for("react.client.reference");function Pt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case Ee:return"Profiler";case _e:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList";case we:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Y:return"Portal";case k:return e.displayName||"Context";case E:return(e._context.displayName||"Context")+".Consumer";case U:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g:return t=e.displayName||null,t!==null?t:Pt(e.type)||"Memo";case W:t=e._payload,e=e._init;try{return Pt(e(t))}catch{}}return null}var at=Array.isArray,_=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=v.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},ie=[],m=-1;function D(e){return{current:e}}function X(e){0>m||(e.current=ie[m],ie[m]=null,m--)}function ue(e,t){m++,ie[m]=e.current,e.current=t}var Ve=D(null),Je=D(null),st=D(null),ht=D(null);function gn(e,t){switch(ue(st,t),ue(Je,e),ue(Ve,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Rp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Rp(t),e=Dp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}X(Ve),ue(Ve,e)}function Ot(){X(Ve),X(Je),X(st)}function El(e){e.memoizedState!==null&&ue(ht,e);var t=Ve.current,n=Dp(t,e.type);t!==n&&(ue(Je,e),ue(Ve,n))}function te(e){Je.current===e&&(X(Ve),X(Je)),ht.current===e&&(X(ht),fc._currentValue=Me)}var xe,Te;function oe(e){if(xe===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xe=t&&t[1]||"",Te=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+e+Te}var Ze=!1;function ye(e,t){if(!e||Ze)return"";Ze=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(se){var le=se}Reflect.construct(e,[],Ce)}else{try{Ce.call()}catch(se){le=se}e.call(Ce.prototype)}}else{try{throw Error()}catch(se){le=se}(Ce=e())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(se){if(se&&le&&typeof se.stack=="string")return[se.stack,le.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),h=s[0],w=s[1];if(h&&w){var N=h.split(`
`),K=w.split(`
`);for(o=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;o<K.length&&!K[o].includes("DetermineComponentFrameRoot");)o++;if(l===N.length||o===K.length)for(l=N.length-1,o=K.length-1;1<=l&&0<=o&&N[l]!==K[o];)o--;for(;1<=l&&0<=o;l--,o--)if(N[l]!==K[o]){if(l!==1||o!==1)do if(l--,o--,0>o||N[l]!==K[o]){var be=`
`+N[l].replace(" at new "," at ");return e.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",e.displayName)),be}while(1<=l&&0<=o);break}}}finally{Ze=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?oe(n):""}function Ue(e,t){switch(e.tag){case 26:case 27:case 5:return oe(e.type);case 16:return oe("Lazy");case 13:return e.child!==t&&t!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return ye(e.type,!1);case 11:return ye(e.type.render,!1);case 1:return ye(e.type,!0);case 31:return oe("Activity");default:return""}}function Ae(e){try{var t="",n=null;do t+=Ue(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Be=Object.prototype.hasOwnProperty,Oe=c.unstable_scheduleCallback,ut=c.unstable_cancelCallback,Ut=c.unstable_shouldYield,bt=c.unstable_requestPaint,me=c.unstable_now,qe=c.unstable_getCurrentPriorityLevel,$e=c.unstable_ImmediatePriority,Et=c.unstable_UserBlockingPriority,jt=c.unstable_NormalPriority,qn=c.unstable_LowPriority,pl=c.unstable_IdlePriority,Gi=c.log,Yt=c.unstable_setDisableYieldValue,yi=null,In=null;function hl(e){if(typeof Gi=="function"&&Yt(e),In&&typeof In.setStrictMode=="function")try{In.setStrictMode(yi,e)}catch{}}var Pn=Math.clz32?Math.clz32:Zn,bi=Math.log,pn=Math.LN2;function Zn(e){return e>>>=0,e===0?32:31-(bi(e)/pn|0)|0}var Fi=256,Ie=262144,We=4194304;function Le(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function kn(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,s=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~s,l!==0?o=Le(l):(h&=w,h!==0?o=Le(h):n||(n=w&~e,n!==0&&(o=Le(n))))):(w=l&~s,w!==0?o=Le(w):h!==0?o=Le(h):n||(n=l&~e,n!==0&&(o=Le(n)))),o===0?0:t!==0&&t!==o&&(t&s)===0&&(s=o&-o,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:o}function ma(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ur(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rs(){var e=We;return We<<=1,(We&62914560)===0&&(We=4194304),e}function Ds(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function lt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gl(e,t,n,l,o,s){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var w=e.entanglements,N=e.expirationTimes,K=e.hiddenUpdates;for(n=h&~n;0<n;){var be=31-Pn(n),Ce=1<<be;w[be]=0,N[be]=-1;var le=K[be];if(le!==null)for(K[be]=null,be=0;be<le.length;be++){var se=le[be];se!==null&&(se.lane&=-536870913)}n&=~Ce}l!==0&&Qn(e,l,0),s!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=s&~(h&~t))}function Qn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Pn(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function fr(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Pn(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function xl(e,t){var n=t&-t;return n=(n&42)!==0?1:ks(n),(n&(e.suspendedLanes|t))!==0?0:n}function ks(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Qt(){var e=ne.p;return e!==0?e:(e=window.event,e===void 0?32:Qp(e.type))}function al(e,t){var n=ne.p;try{return ne.p=e,t()}finally{ne.p=n}}var Vl=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Vl,vn="__reactProps$"+Vl,ol="__reactContainer$"+Vl,As="__reactEvents$"+Vl,hr="__reactListeners$"+Vl,mc="__reactHandles$"+Vl,gr="__reactResources$"+Vl,vi="__reactMarker$"+Vl;function Li(e){delete e[Yn],delete e[vn],delete e[As],delete e[hr],delete e[mc]}function Sa(e){var t=e[Yn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ol]||n[Yn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_p(e);e!==null;){if(n=e[Yn])return n;e=_p(e)}return t}e=n,n=e.parentNode}return null}function io(e){if(e=e[Yn]||e[ol]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ns(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(p(33))}function ao(e){var t=e[gr];return t||(t=e[gr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function On(e){e[vi]=!0}var Sc=new Set,xr={};function wa(e,t){An(e,t),An(e+"Capture",t)}function An(e,t){for(xr[e]=t,e=0;e<t.length;e++)Sc.add(t[e])}var zd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},qt={};function Ms(e){return Be.call(qt,e)?!0:Be.call(Nt,e)?!1:zd.test(e)?qt[e]=!0:(Nt[e]=!0,!1)}function Xo(e,t,n){if(Ms(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function vt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Bt(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vt(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){n=""+h,s.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xt(e){if(!e._valueTracker){var t=Wt(e)?"checked":"value";e._valueTracker=Vt(e,t,""+e[t])}}function wc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Wt(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function zt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Un=/[\n"\\]/g;function xt(e){return e.replace(Un,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Tn(e,t,n,l,o,s,h,w){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+mt(t)):e.value!==""+mt(t)&&(e.value=""+mt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?yr(e,h,mt(t)):n!=null?yr(e,h,mt(n)):l!=null&&e.removeAttribute("value"),o==null&&s!=null&&(e.defaultChecked=!!s),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+mt(w):e.removeAttribute("name")}function ja(e,t,n,l,o,s,h,w){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Xt(e);return}n=n!=null?""+mt(n):"",t=t!=null?""+mt(t):n,w||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),Xt(e)}function yr(e,t,n){t==="number"&&zt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Hn(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+mt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Go(e,t,n){if(t!=null&&(t=""+mt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+mt(n):""}function Us(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(p(92));if(at(l)){if(1<l.length)throw Error(p(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=mt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),Xt(e)}function mi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vr(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||br.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function oo(e,t,n){if(t!=null&&typeof t!="object")throw Error(p(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&vr(e,o,l)}else for(var s in t)t.hasOwnProperty(s)&&vr(e,s,t[s])}function Bs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return Dd.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function En(){}var yl=null;function Ui(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var so=null,Kn=null;function jc(e){var t=io(e);if(t&&(e=t.stateNode)){var n=e[vn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Tn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[vn]||null;if(!o)throw Error(p(90));Tn(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&wc(l)}break e;case"textarea":Go(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Hn(e,!!n.multiple,t,!1)}}}var Dl=!1;function bl(e,t,n){if(Dl)return e(t,n);Dl=!0;try{var l=e(t);return l}finally{if(Dl=!1,(so!==null||Kn!==null)&&(qc(),so&&(t=so,e=Kn,Kn=so=null,jc(t),e)))for(t=0;t<e.length;t++)jc(e[t])}}function Bi(e,t){var n=e.stateNode;if(n===null)return null;var l=n[vn]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(p(231,t,typeof n));return n}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=!1;if(_i)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){tl=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{tl=!1}var mn=null,Fo=null,vl=null;function mr(){if(vl)return vl;var e,t=Fo,n=t.length,l,o="value"in mn?mn.value:mn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var h=n-e;for(l=1;l<=h&&t[n-l]===o[s-l];l++);return vl=o.slice(e,1<l?1-l:void 0)}function Vn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ro(){return!0}function sl(){return!1}function nl(e){function t(n,l,o,s,h){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=s,this.target=h,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(n=e[w],this[w]=n?n(s):s[w]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ro:sl,this.isPropagationStopped=sl,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),t}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=nl(Nn),cn=P({},Nn,{view:0,detail:0}),Sr=nl(cn),wr,jr,Ca,Si=P({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ca&&(Ca&&e.type==="mousemove"?(wr=e.screenX-Ca.screenX,jr=e.screenY-Ca.screenY):jr=wr=0,Ca=e),wr)},movementY:function(e){return"movementY"in e?e.movementY:jr}}),Oi=nl(Si),_s=P({},Si,{dataTransfer:0}),Zi=nl(_s),co=P({},cn,{relatedTarget:0}),$l=nl(co),uo=P({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Lo=nl(uo),Tr=P({},Nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Os=nl(Tr),Cr=P({},Nn,{data:0}),fo=nl(Cr),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zo(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yn[e])?!!t[e]:!1}function Qo(){return Zo}var Hs=P({},cn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(e){return e.type==="keypress"?Vn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kd=nl(Hs),Il=P({},Si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ii=nl(Il),za=P({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),Qi=nl(za),Ki=P({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Es=nl(Ki),Ji=P({},Si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ra=nl(Ji),Vs=P({},Nn,{newState:0,oldState:0}),kl=nl(Vs),wi=[9,13,27,32],ji=_i&&"CompositionEvent"in window,Cn=null;_i&&"documentMode"in document&&(Cn=document.documentMode);var ai=_i&&"TextEvent"in window&&!Cn,Tc=_i&&(!ji||Cn&&8<Cn&&11>=Cn),po=" ",zr=!1;function Rr(e,t){switch(e){case"keyup":return wi.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dn(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rl=!1;function Dr(e,t){switch(e){case"compositionend":return dn(t);case"keypress":return t.which!==32?null:(zr=!0,po);case"textInput":return e=t.data,e===po&&zr?null:e;default:return null}}function kr(e,t){if(rl)return e==="compositionend"||!ji&&Rr(e,t)?(e=mr(),vl=Fo=mn=null,rl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tc&&t.locale!=="ko"?null:t.data;default:return null}}var Ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ar[e.type]:t==="textarea"}function Mr(e,t,n,l){so?Kn?Kn.push(l):Kn=[l]:so=l,t=nd(t,"onChange"),0<t.length&&(n=new Ta("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var ho=null,go=null;function Ur(e){Sp(e,0)}function Da(e){var t=Ns(e);if(wc(t))return e}function ka(e,t){if(e==="change")return t}var xo=!1;if(_i){var $s;if(_i){var ea="oninput"in document;if(!ea){var Ko=document.createElement("div");Ko.setAttribute("oninput","return;"),ea=typeof Ko.oninput=="function"}$s=ea}else $s=!1;xo=$s&&(!document.documentMode||9<document.documentMode)}function Jo(){ho&&(ho.detachEvent("onpropertychange",Aa),go=ho=null)}function Aa(e){if(e.propertyName==="value"&&Da(go)){var t=[];Mr(t,go,e,Ui(e)),bl(Ur,t)}}function Br(e,t,n){e==="focusin"?(Jo(),ho=t,go=n,ho.attachEvent("onpropertychange",Aa)):e==="focusout"&&Jo()}function es(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Da(go)}function ts(e,t){if(e==="click")return Da(t)}function ns(e,t){if(e==="input"||e==="change")return Da(t)}function Is(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bn=typeof Object.is=="function"?Object.is:Is;function ls(e,t){if(Bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!Be.call(t,o)||!Bn(e[o],t[o]))return!1}return!0}function is(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _r(e,t){var n=is(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=is(n)}}function Cc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function as(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=zt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zt(e.document)}return t}function os(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var zc=_i&&"documentMode"in document&&11>=document.documentMode,Na=null,Ps=null,ta=null,Ma=!1;function ss(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ma||Na==null||Na!==zt(l)||(l=Na,"selectionStart"in l&&os(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ta&&ls(ta,l)||(ta=l,l=nd(Ps,"onSelect"),0<l.length&&(t=new Ta("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=Na)))}function oi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $n={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionrun:oi("Transition","TransitionRun"),transitionstart:oi("Transition","TransitionStart"),transitioncancel:oi("Transition","TransitionCancel"),transitionend:oi("Transition","TransitionEnd")},rs={},Al={};_i&&(Al=document.createElement("div").style,"AnimationEvent"in window||(delete $n.animationend.animation,delete $n.animationiteration.animation,delete $n.animationstart.animation),"TransitionEvent"in window||delete $n.transitionend.transition);function Hi(e){if(rs[e])return rs[e];if(!$n[e])return e;var t=$n[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Al)return rs[e]=t[n];return e}var Nl=Hi("animationend"),Ys=Hi("animationiteration"),si=Hi("animationstart"),Or=Hi("transitionrun"),Ti=Hi("transitionstart"),Hr=Hi("transitioncancel"),ri=Hi("transitionend"),cs=new Map,Pl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pl.push("scrollEnd");function ml(e,t){cs.set(e,t),wa(t,[e])}var ci=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Sl=[],St=0,Dt=0;function Ws(){for(var e=St,t=Dt=St=0;t<e;){var n=Sl[t];Sl[t++]=null;var l=Sl[t];Sl[t++]=null;var o=Sl[t];Sl[t++]=null;var s=Sl[t];if(Sl[t++]=null,l!==null&&o!==null){var h=l.pending;h===null?o.next=o:(o.next=h.next,h.next=o),l.pending=o}s!==0&&us(n,o,s)}}function Ua(e,t,n,l){Sl[St++]=e,Sl[St++]=t,Sl[St++]=n,Sl[St++]=l,Dt|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ds(e,t,n,l){return Ua(e,t,n,l),Ba(e)}function Yl(e,t){return Ua(e,null,null,t),Ba(e)}function us(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,s=e.return;s!==null;)s.childLanes|=n,l=s.alternate,l!==null&&(l.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(o=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,o&&t!==null&&(o=31-Pn(n),e=s.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),s):null}function Ba(e){if(50<ac)throw ac=0,su=null,Error(p(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var yo={};function Xs(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cl(e,t,n,l){return new Xs(e,t,n,l)}function na(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wl(e,t){var n=e.alternate;return n===null?(n=cl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function fs(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wl(e,t,n,l,o,s){var h=0;if(l=e,typeof e=="function")na(e)&&(h=1);else if(typeof e=="string")h=mg(e,n,Ve.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case we:return e=cl(31,n,t,o),e.elementType=we,e.lanes=s,e;case q:return Ei(n.children,o,s,t);case _e:h=8,o|=24;break;case Ee:return e=cl(12,n,t,o|2),e.elementType=Ee,e.lanes=s,e;case M:return e=cl(13,n,t,o),e.elementType=M,e.lanes=s,e;case T:return e=cl(19,n,t,o),e.elementType=T,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:h=10;break e;case E:h=9;break e;case U:h=11;break e;case g:h=14;break e;case W:h=16,l=null;break e}h=29,n=Error(p(130,e===null?"null":typeof e,"")),l=null}return t=cl(h,n,t,o),t.elementType=e,t.type=l,t.lanes=s,t}function Ei(e,t,n,l){return e=cl(7,e,l,t),e.lanes=n,e}function la(e,t,n){return e=cl(6,e,null,t),e.lanes=n,e}function Gs(e){var t=cl(18,null,null,0);return t.stateNode=e,t}function ia(e,t,n){return t=cl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ps=new WeakMap;function jl(e,t){if(typeof e=="object"&&e!==null){var n=ps.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ae(t)},ps.set(e,t),t)}return{value:e,source:t,stack:Ae(t)}}var _a=[],Vi=0,hs=null,Oa=0,Ml=[],Jn=0,di=null,Xl=1,ui="";function Gl(e,t){_a[Vi++]=Oa,_a[Vi++]=hs,hs=e,Oa=t}function Er(e,t,n){Ml[Jn++]=Xl,Ml[Jn++]=ui,Ml[Jn++]=di,di=e;var l=Xl;e=ui;var o=32-Pn(l)-1;l&=~(1<<o),n+=1;var s=32-Pn(t)+o;if(30<s){var h=o-o%5;s=(l&(1<<h)-1).toString(32),l>>=h,o-=h,Xl=1<<32-Pn(t)+o|n<<o|l,ui=s+e}else Xl=1<<s|n<<o|l,ui=e}function Vr(e){e.return!==null&&(Gl(e,1),Er(e,1,0))}function $r(e){for(;e===hs;)hs=_a[--Vi],_a[Vi]=null,Oa=_a[--Vi],_a[Vi]=null;for(;e===di;)di=Ml[--Jn],Ml[Jn]=null,ui=Ml[--Jn],Ml[Jn]=null,Xl=Ml[--Jn],Ml[Jn]=null}function Rc(e,t){Ml[Jn++]=Xl,Ml[Jn++]=ui,Ml[Jn++]=di,Xl=t.id,ui=t.overflow,di=e}var Wn=null,Gt=null,Tt=!1,aa=null,Fl=!1,Ir=Error(p(519));function oa(e){var t=Error(p(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ci(jl(t,e)),Ir}function Dc(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[Yn]=e,t[vn]=l,n){case"dialog":It("cancel",t),It("close",t);break;case"iframe":case"object":case"embed":It("load",t);break;case"video":case"audio":for(n=0;n<sc.length;n++)It(sc[n],t);break;case"source":It("error",t);break;case"img":case"image":case"link":It("error",t),It("load",t);break;case"details":It("toggle",t);break;case"input":It("invalid",t),ja(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":It("invalid",t);break;case"textarea":It("invalid",t),Us(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Cp(t.textContent,n)?(l.popover!=null&&(It("beforetoggle",t),It("toggle",t)),l.onScroll!=null&&It("scroll",t),l.onScrollEnd!=null&&It("scrollend",t),l.onClick!=null&&(t.onclick=En),t=!0):t=!1,t||oa(e,!0)}function kc(e){for(Wn=e.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:Fl=!1;return;case 27:case 3:Fl=!0;return;default:Wn=Wn.return}}function bo(e){if(e!==Wn)return!1;if(!Tt)return kc(e),Tt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||wu(e.type,e.memoizedProps)),n=!n),n&&Gt&&oa(e),kc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));Gt=Bp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));Gt=Bp(e)}else t===27?(t=Gt,Vo(e.type)?(e=Ru,Ru=null,Gt=e):Gt=t):Gt=Wn?Ni(e.stateNode.nextSibling):null;return!0}function Ha(){Gt=Wn=null,Tt=!1}function Ea(){var e=aa;return e!==null&&(ni===null?ni=e:ni.push.apply(ni,e),aa=null),e}function Ci(e){aa===null?aa=[e]:aa.push(e)}var sa=D(null),zi=null,Ul=null;function Ll(e,t,n){ue(sa,t._currentValue),t._currentValue=n}function ql(e){e._currentValue=sa.current,X(sa)}function vo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function mo(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){var h=o.child;s=s.firstContext;e:for(;s!==null;){var w=s;s=o;for(var N=0;N<t.length;N++)if(w.context===t[N]){s.lanes|=n,w=s.alternate,w!==null&&(w.lanes|=n),vo(s.return,n,e),l||(h=null);break e}s=w.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(p(341));h.lanes|=n,s=h.alternate,s!==null&&(s.lanes|=n),vo(h,n,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function Bl(e,t,n,l){e=null;for(var o=t,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(p(387));if(h=h.memoizedProps,h!==null){var w=o.type;Bn(o.pendingProps.value,h.value)||(e!==null?e.push(w):e=[w])}}else if(o===ht.current){if(h=o.alternate,h===null)throw Error(p(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(fc):e=[fc])}o=o.return}e!==null&&mo(t,e,n,l),t.flags|=262144}function ra(e){for(e=e.firstContext;e!==null;){if(!Bn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Zl(e){zi=e,Ul=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function on(e){return Ac(zi,e)}function So(e,t){return zi===null&&Zl(e),Ac(e,t)}function Ac(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ul===null){if(e===null)throw Error(p(308));Ul=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ul=Ul.next=t;return n}var Ad=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Nc=c.unstable_scheduleCallback,Va=c.unstable_NormalPriority,Sn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wo(){return{controller:new Ad,data:new Map,refCount:0}}function $a(e){e.refCount--,e.refCount===0&&Nc(Va,function(){e.controller.abort()})}var Ia=null,gs=0,jo=0,Pa=null;function ca(e,t){if(Ia===null){var n=Ia=[];gs=0,jo=pu(),Pa={status:"pending",value:void 0,then:function(l){n.push(l)}}}return gs++,t.then(Pr,Pr),t}function Pr(){if(--gs===0&&Ia!==null){Pa!==null&&(Pa.status="fulfilled");var e=Ia;Ia=null,jo=0,Pa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function To(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var Yr=_.S;_.S=function(e,t){qf=me(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ca(e,t),Yr!==null&&Yr(e,t)};var Tl=D(null);function xs(){var e=Tl.current;return e!==null?e:hn.pooledCache}function ys(e,t){t===null?ue(Tl,Tl.current):ue(Tl,t.pool)}function Mc(){var e=xs();return e===null?null:{parent:Sn._currentValue,pool:e}}var Co=Error(p(460)),Wr=Error(p(474)),Ya=Error(p(542)),bs={then:function(){}};function Uc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xr(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(En,En),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bc(e),e;default:if(typeof t.status=="string")t.then(En,En);else{if(e=hn,e!==null&&100<e.shellSuspendCounter)throw Error(p(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bc(e),e}throw Wa=t,Co}}function fi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Wa=n,Co):n}}var Wa=null;function Fs(){if(Wa===null)throw Error(p(459));var e=Wa;return Wa=null,e}function Bc(e){if(e===Co||e===Ya)throw Error(p(483))}var da=null,Xa=0;function vs(e){var t=Xa;return Xa+=1,da===null&&(da=[]),Xr(da,e,t)}function zo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ms(e,t){throw t.$$typeof===de?Error(p(525)):(e=Object.prototype.toString.call(t),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ro(e){function t(I,O){if(e){var Q=I.deletions;Q===null?(I.deletions=[O],I.flags|=16):Q.push(O)}}function n(I,O){if(!e)return null;for(;O!==null;)t(I,O),O=O.sibling;return null}function l(I){for(var O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function o(I,O){return I=wl(I,O),I.index=0,I.sibling=null,I}function s(I,O,Q){return I.index=Q,e?(Q=I.alternate,Q!==null?(Q=Q.index,Q<O?(I.flags|=67108866,O):Q):(I.flags|=67108866,O)):(I.flags|=1048576,O)}function h(I){return e&&I.alternate===null&&(I.flags|=67108866),I}function w(I,O,Q,Se){return O===null||O.tag!==6?(O=la(Q,I.mode,Se),O.return=I,O):(O=o(O,Q),O.return=I,O)}function N(I,O,Q,Se){var dt=Q.type;return dt===q?be(I,O,Q.props.children,Se,Q.key):O!==null&&(O.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===W&&fi(dt)===O.type)?(O=o(O,Q.props),zo(O,Q),O.return=I,O):(O=Wl(Q.type,Q.key,Q.props,null,I.mode,Se),zo(O,Q),O.return=I,O)}function K(I,O,Q,Se){return O===null||O.tag!==4||O.stateNode.containerInfo!==Q.containerInfo||O.stateNode.implementation!==Q.implementation?(O=ia(Q,I.mode,Se),O.return=I,O):(O=o(O,Q.children||[]),O.return=I,O)}function be(I,O,Q,Se,dt){return O===null||O.tag!==7?(O=Ei(Q,I.mode,Se,dt),O.return=I,O):(O=o(O,Q),O.return=I,O)}function Ce(I,O,Q){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=la(""+O,I.mode,Q),O.return=I,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case fe:return Q=Wl(O.type,O.key,O.props,null,I.mode,Q),zo(Q,O),Q.return=I,Q;case Y:return O=ia(O,I.mode,Q),O.return=I,O;case W:return O=fi(O),Ce(I,O,Q)}if(at(O)||ke(O))return O=Ei(O,I.mode,Q,null),O.return=I,O;if(typeof O.then=="function")return Ce(I,vs(O),Q);if(O.$$typeof===k)return Ce(I,So(I,O),Q);ms(I,O)}return null}function le(I,O,Q,Se){var dt=O!==null?O.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return dt!==null?null:w(I,O,""+Q,Se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case fe:return Q.key===dt?N(I,O,Q,Se):null;case Y:return Q.key===dt?K(I,O,Q,Se):null;case W:return Q=fi(Q),le(I,O,Q,Se)}if(at(Q)||ke(Q))return dt!==null?null:be(I,O,Q,Se,null);if(typeof Q.then=="function")return le(I,O,vs(Q),Se);if(Q.$$typeof===k)return le(I,O,So(I,Q),Se);ms(I,Q)}return null}function se(I,O,Q,Se,dt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return I=I.get(Q)||null,w(O,I,""+Se,dt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case fe:return I=I.get(Se.key===null?Q:Se.key)||null,N(O,I,Se,dt);case Y:return I=I.get(Se.key===null?Q:Se.key)||null,K(O,I,Se,dt);case W:return Se=fi(Se),se(I,O,Q,Se,dt)}if(at(Se)||ke(Se))return I=I.get(Q)||null,be(O,I,Se,dt,null);if(typeof Se.then=="function")return se(I,O,Q,vs(Se),dt);if(Se.$$typeof===k)return se(I,O,Q,So(O,Se),dt);ms(O,Se)}return null}function et(I,O,Q,Se){for(var dt=null,Kt=null,nt=O,_t=O=0,Lt=null;nt!==null&&_t<Q.length;_t++){nt.index>_t?(Lt=nt,nt=null):Lt=nt.sibling;var Jt=le(I,nt,Q[_t],Se);if(Jt===null){nt===null&&(nt=Lt);break}e&&nt&&Jt.alternate===null&&t(I,nt),O=s(Jt,O,_t),Kt===null?dt=Jt:Kt.sibling=Jt,Kt=Jt,nt=Lt}if(_t===Q.length)return n(I,nt),Tt&&Gl(I,_t),dt;if(nt===null){for(;_t<Q.length;_t++)nt=Ce(I,Q[_t],Se),nt!==null&&(O=s(nt,O,_t),Kt===null?dt=nt:Kt.sibling=nt,Kt=nt);return Tt&&Gl(I,_t),dt}for(nt=l(nt);_t<Q.length;_t++)Lt=se(nt,I,_t,Q[_t],Se),Lt!==null&&(e&&Lt.alternate!==null&&nt.delete(Lt.key===null?_t:Lt.key),O=s(Lt,O,_t),Kt===null?dt=Lt:Kt.sibling=Lt,Kt=Lt);return e&&nt.forEach(function(Wo){return t(I,Wo)}),Tt&&Gl(I,_t),dt}function gt(I,O,Q,Se){if(Q==null)throw Error(p(151));for(var dt=null,Kt=null,nt=O,_t=O=0,Lt=null,Jt=Q.next();nt!==null&&!Jt.done;_t++,Jt=Q.next()){nt.index>_t?(Lt=nt,nt=null):Lt=nt.sibling;var Wo=le(I,nt,Jt.value,Se);if(Wo===null){nt===null&&(nt=Lt);break}e&&nt&&Wo.alternate===null&&t(I,nt),O=s(Wo,O,_t),Kt===null?dt=Wo:Kt.sibling=Wo,Kt=Wo,nt=Lt}if(Jt.done)return n(I,nt),Tt&&Gl(I,_t),dt;if(nt===null){for(;!Jt.done;_t++,Jt=Q.next())Jt=Ce(I,Jt.value,Se),Jt!==null&&(O=s(Jt,O,_t),Kt===null?dt=Jt:Kt.sibling=Jt,Kt=Jt);return Tt&&Gl(I,_t),dt}for(nt=l(nt);!Jt.done;_t++,Jt=Q.next())Jt=se(nt,I,_t,Jt.value,Se),Jt!==null&&(e&&Jt.alternate!==null&&nt.delete(Jt.key===null?_t:Jt.key),O=s(Jt,O,_t),Kt===null?dt=Jt:Kt.sibling=Jt,Kt=Jt);return e&&nt.forEach(function(Ng){return t(I,Ng)}),Tt&&Gl(I,_t),dt}function fn(I,O,Q,Se){if(typeof Q=="object"&&Q!==null&&Q.type===q&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case fe:e:{for(var dt=Q.key;O!==null;){if(O.key===dt){if(dt=Q.type,dt===q){if(O.tag===7){n(I,O.sibling),Se=o(O,Q.props.children),Se.return=I,I=Se;break e}}else if(O.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===W&&fi(dt)===O.type){n(I,O.sibling),Se=o(O,Q.props),zo(Se,Q),Se.return=I,I=Se;break e}n(I,O);break}else t(I,O);O=O.sibling}Q.type===q?(Se=Ei(Q.props.children,I.mode,Se,Q.key),Se.return=I,I=Se):(Se=Wl(Q.type,Q.key,Q.props,null,I.mode,Se),zo(Se,Q),Se.return=I,I=Se)}return h(I);case Y:e:{for(dt=Q.key;O!==null;){if(O.key===dt)if(O.tag===4&&O.stateNode.containerInfo===Q.containerInfo&&O.stateNode.implementation===Q.implementation){n(I,O.sibling),Se=o(O,Q.children||[]),Se.return=I,I=Se;break e}else{n(I,O);break}else t(I,O);O=O.sibling}Se=ia(Q,I.mode,Se),Se.return=I,I=Se}return h(I);case W:return Q=fi(Q),fn(I,O,Q,Se)}if(at(Q))return et(I,O,Q,Se);if(ke(Q)){if(dt=ke(Q),typeof dt!="function")throw Error(p(150));return Q=dt.call(Q),gt(I,O,Q,Se)}if(typeof Q.then=="function")return fn(I,O,vs(Q),Se);if(Q.$$typeof===k)return fn(I,O,So(I,Q),Se);ms(I,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,O!==null&&O.tag===6?(n(I,O.sibling),Se=o(O,Q),Se.return=I,I=Se):(n(I,O),Se=la(Q,I.mode,Se),Se.return=I,I=Se),h(I)):n(I,O)}return function(I,O,Q,Se){try{Xa=0;var dt=fn(I,O,Q,Se);return da=null,dt}catch(nt){if(nt===Co||nt===Ya)throw nt;var Kt=cl(29,nt,null,I.mode);return Kt.lanes=Se,Kt.return=I,Kt}finally{}}}var $i=Ro(!0),Do=Ro(!1),Cl=!1;function Ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ss(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ri(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ua(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(nn&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=Ba(e),us(e,null,n),t}return Ua(e,l,t,n),Ba(e)}function ws(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,fr(e,n)}}function Ls(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=h:s=s.next=h,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var qs=!1;function fa(){if(qs){var e=Pa;if(e!==null)throw e}}function _l(e,t,n,l){qs=!1;var o=e.updateQueue;Cl=!1;var s=o.firstBaseUpdate,h=o.lastBaseUpdate,w=o.shared.pending;if(w!==null){o.shared.pending=null;var N=w,K=N.next;N.next=null,h===null?s=K:h.next=K,h=N;var be=e.alternate;be!==null&&(be=be.updateQueue,w=be.lastBaseUpdate,w!==h&&(w===null?be.firstBaseUpdate=K:w.next=K,be.lastBaseUpdate=N))}if(s!==null){var Ce=o.baseState;h=0,be=K=N=null,w=s;do{var le=w.lane&-536870913,se=le!==w.lane;if(se?(Ft&le)===le:(l&le)===le){le!==0&&le===jo&&(qs=!0),be!==null&&(be=be.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var et=e,gt=w;le=t;var fn=n;switch(gt.tag){case 1:if(et=gt.payload,typeof et=="function"){Ce=et.call(fn,Ce,le);break e}Ce=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=gt.payload,le=typeof et=="function"?et.call(fn,Ce,le):et,le==null)break e;Ce=P({},Ce,le);break e;case 2:Cl=!0}}le=w.callback,le!==null&&(e.flags|=64,se&&(e.flags|=8192),se=o.callbacks,se===null?o.callbacks=[le]:se.push(le))}else se={lane:le,tag:w.tag,payload:w.payload,callback:w.callback,next:null},be===null?(K=be=se,N=Ce):be=be.next=se,h|=le;if(w=w.next,w===null){if(w=o.shared.pending,w===null)break;se=w,w=se.next,se.next=null,o.lastBaseUpdate=se,o.shared.pending=null}}while(!0);be===null&&(N=Ce),o.baseState=N,o.firstBaseUpdate=K,o.lastBaseUpdate=be,s===null&&(o.shared.lanes=0),Bo|=h,e.lanes=h,e.memoizedState=Ce}}function Gr(e,t){if(typeof e!="function")throw Error(p(191,e));e.call(t)}function Fa(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Gr(n[e],t)}var Ql=D(null),js=D(0);function Zs(e,t){e=to,ue(js,e),ue(Ql,t),to=e|t.baseLanes}function ll(){ue(js,to),ue(Ql,Ql.current)}function pa(){to=js.current,X(Ql),X(js)}var dl=D(null),zl=null;function ha(e){var t=e.alternate;ue(zn,zn.current&1),ue(dl,e),zl===null&&(t===null||Ql.current!==null||t.memoizedState!==null)&&(zl=e)}function La(e){ue(zn,zn.current),ue(dl,e),zl===null&&(zl=e)}function _c(e){e.tag===22?(ue(zn,zn.current),ue(dl,e),zl===null&&(zl=e)):Kl()}function Kl(){ue(zn,zn.current),ue(dl,dl.current)}function Ol(e){X(dl),zl===e&&(zl=null),X(zn)}var zn=D(0);function ko(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Cu(n)||zu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ii=0,kt=null,tn=null,Rn=null,Ao=!1,No=!1,ga=!1,xa=0,Di=0,Pi=null,Fr=0;function bn(){throw Error(p(321))}function Lr(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bn(e[n],t[n]))return!1;return!0}function ft(e,t,n,l,o,s){return Ii=s,kt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?of:Od,ga=!1,s=n(l,o),ga=!1,No&&(s=a(t,n,l,o)),Oc(e),s}function Oc(e){_.H=Zr;var t=tn!==null&&tn.next!==null;if(Ii=0,Rn=tn=kt=null,Ao=!1,Di=0,Pi=null,t)throw Error(p(300));e===null||Xn||(e=e.dependencies,e!==null&&ra(e)&&(Xn=!0))}function a(e,t,n,l){kt=e;var o=0;do{if(No&&(Pi=null),Di=0,No=!1,25<=o)throw Error(p(301));if(o+=1,Rn=tn=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}_.H=sf,s=t(n,l)}while(No);return s}function r(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?z(t):t,e=e.useState()[0],(tn!==null?tn.memoizedState:null)!==e&&(kt.flags|=1024),t}function x(){var e=xa!==0;return xa=0,e}function y(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function S(e){if(Ao){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ao=!1}Ii=0,Rn=tn=kt=null,No=!1,Di=xa=0,Pi=null}function b(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?kt.memoizedState=Rn=e:Rn=Rn.next=e,Rn}function f(){if(tn===null){var e=kt.alternate;e=e!==null?e.memoizedState:null}else e=tn.next;var t=Rn===null?kt.memoizedState:Rn.next;if(t!==null)Rn=t,tn=e;else{if(e===null)throw kt.alternate===null?Error(p(467)):Error(p(310));tn=e,e={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},Rn===null?kt.memoizedState=Rn=e:Rn=Rn.next=e}return Rn}function j(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function z(e){var t=Di;return Di+=1,Pi===null&&(Pi=[]),e=Xr(Pi,e,t),t=kt,(Rn===null?t.memoizedState:Rn.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?of:Od),e}function R(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return z(e);if(e.$$typeof===k)return on(e)}throw Error(p(438,String(e)))}function J(e){var t=null,n=kt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=kt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=j(),kt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=tt;return t.index++,n}function V(e,t){return typeof t=="function"?t(e):t}function re(e){var t=f();return Z(t,tn,e)}function Z(e,t,n){var l=e.queue;if(l===null)throw Error(p(311));l.lastRenderedReducer=n;var o=e.baseQueue,s=l.pending;if(s!==null){if(o!==null){var h=o.next;o.next=s.next,s.next=h}t.baseQueue=o=s,l.pending=null}if(s=e.baseState,o===null)e.memoizedState=s;else{t=o.next;var w=h=null,N=null,K=t,be=!1;do{var Ce=K.lane&-536870913;if(Ce!==K.lane?(Ft&Ce)===Ce:(Ii&Ce)===Ce){var le=K.revertLane;if(le===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),Ce===jo&&(be=!0);else if((Ii&le)===le){K=K.next,le===jo&&(be=!0);continue}else Ce={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},N===null?(w=N=Ce,h=s):N=N.next=Ce,kt.lanes|=le,Bo|=le;Ce=K.action,ga&&n(s,Ce),s=K.hasEagerState?K.eagerState:n(s,Ce)}else le={lane:Ce,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},N===null?(w=N=le,h=s):N=N.next=le,kt.lanes|=Ce,Bo|=Ce;K=K.next}while(K!==null&&K!==t);if(N===null?h=s:N.next=w,!Bn(s,e.memoizedState)&&(Xn=!0,be&&(n=Pa,n!==null)))throw n;e.memoizedState=s,e.baseState=h,e.baseQueue=N,l.lastRenderedState=s}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ae(e){var t=f(),n=t.queue;if(n===null)throw Error(p(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do s=e(s,h.action),h=h.next;while(h!==o);Bn(s,t.memoizedState)||(Xn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function ee(e,t,n){var l=kt,o=f(),s=Tt;if(s){if(n===void 0)throw Error(p(407));n=n()}else n=t();var h=!Bn((tn||o).memoizedState,n);if(h&&(o.memoizedState=n,Xn=!0),o=o.queue,Zt(he.bind(null,l,o,e),[e]),o.getSnapshot!==t||h||Rn!==null&&Rn.memoizedState.tag&1){if(l.flags|=2048,rt(9,{destroy:void 0},pe.bind(null,l,o,n,t),null),hn===null)throw Error(p(349));s||(Ii&127)!==0||G(l,t,n)}return n}function G(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=kt.updateQueue,t===null?(t=j(),kt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pe(e,t,n,l){t.value=n,t.getSnapshot=l,Re(t)&&De(e)}function he(e,t,n){return n(function(){Re(t)&&De(e)})}function Re(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bn(e,n)}catch{return!0}}function De(e){var t=Yl(e,2);t!==null&&li(t,e,2)}function ze(e){var t=b();if(typeof e=="function"){var n=e;if(e=n(),ga){hl(!0);try{n()}finally{hl(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V,lastRenderedState:e},t}function Fe(e,t,n,l){return e.baseState=n,Z(e,tn,typeof l=="function"?l:V)}function He(e,t,n,l,o){if(Hc(e))throw Error(p(485));if(e=t.action,e!==null){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){s.listeners.push(h)}};_.T!==null?n(!0):s.isTransition=!1,l(s),n=t.pending,n===null?(s.next=t.pending=s,$(t,s)):(s.next=n.next,t.pending=n.next=s)}}function $(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var s=_.T,h={};_.T=h;try{var w=n(o,l),N=_.S;N!==null&&N(h,w),A(e,t,w)}catch(K){ve(e,t,K)}finally{s!==null&&h.types!==null&&(s.types=h.types),_.T=s}}else try{s=n(o,l),A(e,t,s)}catch(K){ve(e,t,K)}}function A(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){ce(e,t,l)},function(l){return ve(e,t,l)}):ce(e,t,n)}function ce(e,t,n){t.status="fulfilled",t.value=n,Ne(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,$(e,n)))}function ve(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Ne(t),t=t.next;while(t!==l)}e.action=null}function Ne(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pe(e,t){return t}function ct(e,t){if(Tt){var n=hn.formState;if(n!==null){e:{var l=kt;if(Tt){if(Gt){t:{for(var o=Gt,s=Fl;o.nodeType!==8;){if(!s){o=null;break t}if(o=Ni(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){Gt=Ni(o.nextSibling),l=o.data==="F!";break e}}oa(l)}l=!1}l&&(t=n[0])}}return n=b(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pe,lastRenderedState:t},n.queue=l,n=nf.bind(null,kt,l),l.dispatch=n,l=ze(!1),s=_d.bind(null,kt,!1,l.queue),l=b(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=He.bind(null,kt,o,s,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function Xe(e){var t=f();return ot(t,tn,e)}function ot(e,t,n){if(t=Z(e,t,Pe)[0],e=re(V)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=z(t)}catch(h){throw h===Co?Ya:h}else l=t;t=f();var o=t.queue,s=o.dispatch;return n!==t.memoizedState&&(kt.flags|=2048,rt(9,{destroy:void 0},pt.bind(null,o,n),null)),[l,s,e]}function pt(e,t){e.action=t}function an(e){var t=f(),n=tn;if(n!==null)return ot(t,n,e);f(),t=t.memoizedState,n=f();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function rt(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=kt.updateQueue,t===null&&(t=j(),kt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Ge(){return f().memoizedState}function wt(e,t,n,l){var o=b();kt.flags|=e,o.memoizedState=rt(1|t,{destroy:void 0},n,l===void 0?null:l)}function yt(e,t,n,l){var o=f();l=l===void 0?null:l;var s=o.memoizedState.inst;tn!==null&&l!==null&&Lr(l,tn.memoizedState.deps)?o.memoizedState=rt(t,s,n,l):(kt.flags|=e,o.memoizedState=rt(1|t,s,n,l))}function Mt(e,t){wt(8390656,8,e,t)}function Zt(e,t){yt(2048,8,e,t)}function Mn(e){kt.flags|=4;var t=kt.updateQueue;if(t===null)t=j(),kt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function wn(e){var t=f().memoizedState;return Mn({ref:t,nextImpl:e}),function(){if((nn&2)!==0)throw Error(p(440));return t.impl.apply(void 0,arguments)}}function Ct(e,t){return yt(4,2,e,t)}function ki(e,t){return yt(4,4,e,t)}function Ai(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hl(e,t,n){n=n!=null?n.concat([e]):null,yt(4,4,Ai.bind(null,t,e),n)}function Nd(){}function Lu(e,t){var n=f();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Lr(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function qu(e,t){var n=f();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Lr(t,l[1]))return l[0];if(l=e(),ga){hl(!0);try{e()}finally{hl(!1)}}return n.memoizedState=[l,t],l}function Md(e,t,n){return n===void 0||(Ii&1073741824)!==0&&(Ft&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Qf(),kt.lanes|=e,Bo|=e,n)}function Zu(e,t,n,l){return Bn(n,t)?n:Ql.current!==null?(e=Md(e,n,l),Bn(e,t)||(Xn=!0),e):(Ii&42)===0||(Ii&1073741824)!==0&&(Ft&261930)===0?(Xn=!0,e.memoizedState=n):(e=Qf(),kt.lanes|=e,Bo|=e,t)}function Qu(e,t,n,l,o){var s=ne.p;ne.p=s!==0&&8>s?s:8;var h=_.T,w={};_.T=w,_d(e,!1,t,n);try{var N=o(),K=_.S;if(K!==null&&K(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var be=To(N,l);qr(e,t,be,gi(e))}else qr(e,t,l,gi(e))}catch(Ce){qr(e,t,{then:function(){},status:"rejected",reason:Ce},gi())}finally{ne.p=s,h!==null&&w.types!==null&&(h.types=w.types),_.T=h}}function zh(){}function Ud(e,t,n,l){if(e.tag!==5)throw Error(p(476));var o=Ku(e).queue;Qu(e,o,t,Me,n===null?zh:function(){return Ju(e),n(l)})}function Ku(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:V,lastRenderedState:Me},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:V,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ju(e){var t=Ku(e);t.next===null&&(t=e.alternate.memoizedState),qr(e,t.next.queue,{},gi())}function Bd(){return on(fc)}function ef(){return f().memoizedState}function tf(){return f().memoizedState}function Rh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=gi();e=Ri(n);var l=ua(t,e,n);l!==null&&(li(l,t,n),ws(l,t,n)),t={cache:wo()},e.payload=t;return}t=t.return}}function Dh(e,t,n){var l=gi();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Hc(e)?lf(t,n):(n=ds(e,t,n,l),n!==null&&(li(n,e,l),af(n,t,l)))}function nf(e,t,n){var l=gi();qr(e,t,n,l)}function qr(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hc(e))lf(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var h=t.lastRenderedState,w=s(h,n);if(o.hasEagerState=!0,o.eagerState=w,Bn(w,h))return Ua(e,t,o,0),hn===null&&Ws(),!1}catch{}finally{}if(n=ds(e,t,o,l),n!==null)return li(n,e,l),af(n,t,l),!0}return!1}function _d(e,t,n,l){if(l={lane:2,revertLane:pu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Hc(e)){if(t)throw Error(p(479))}else t=ds(e,n,l,2),t!==null&&li(t,e,2)}function Hc(e){var t=e.alternate;return e===kt||t!==null&&t===kt}function lf(e,t){No=Ao=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function af(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,fr(e,n)}}var Zr={readContext:on,use:R,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn};Zr.useEffectEvent=bn;var of={readContext:on,use:R,useCallback:function(e,t){return b().memoizedState=[e,t===void 0?null:t],e},useContext:on,useEffect:Mt,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,wt(4194308,4,Ai.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wt(4194308,4,e,t)},useInsertionEffect:function(e,t){wt(4,2,e,t)},useMemo:function(e,t){var n=b();t=t===void 0?null:t;var l=e();if(ga){hl(!0);try{e()}finally{hl(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=b();if(n!==void 0){var o=n(t);if(ga){hl(!0);try{n(t)}finally{hl(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=Dh.bind(null,kt,e),[l.memoizedState,e]},useRef:function(e){var t=b();return e={current:e},t.memoizedState=e},useState:function(e){e=ze(e);var t=e.queue,n=nf.bind(null,kt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Nd,useDeferredValue:function(e,t){var n=b();return Md(n,e,t)},useTransition:function(){var e=ze(!1);return e=Qu.bind(null,kt,e.queue,!0,!1),b().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=kt,o=b();if(Tt){if(n===void 0)throw Error(p(407));n=n()}else{if(n=t(),hn===null)throw Error(p(349));(Ft&127)!==0||G(l,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Mt(he.bind(null,l,s,e),[e]),l.flags|=2048,rt(9,{destroy:void 0},pe.bind(null,l,s,n,t),null),n},useId:function(){var e=b(),t=hn.identifierPrefix;if(Tt){var n=ui,l=Xl;n=(l&~(1<<32-Pn(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=xa++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Fr++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Bd,useFormState:ct,useActionState:ct,useOptimistic:function(e){var t=b();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=_d.bind(null,kt,!0,n),n.dispatch=t,[e,t]},useMemoCache:J,useCacheRefresh:function(){return b().memoizedState=Rh.bind(null,kt)},useEffectEvent:function(e){var t=b(),n={impl:e};return t.memoizedState=n,function(){if((nn&2)!==0)throw Error(p(440));return n.impl.apply(void 0,arguments)}}},Od={readContext:on,use:R,useCallback:Lu,useContext:on,useEffect:Zt,useImperativeHandle:Hl,useInsertionEffect:Ct,useLayoutEffect:ki,useMemo:qu,useReducer:re,useRef:Ge,useState:function(){return re(V)},useDebugValue:Nd,useDeferredValue:function(e,t){var n=f();return Zu(n,tn.memoizedState,e,t)},useTransition:function(){var e=re(V)[0],t=f().memoizedState;return[typeof e=="boolean"?e:z(e),t]},useSyncExternalStore:ee,useId:ef,useHostTransitionStatus:Bd,useFormState:Xe,useActionState:Xe,useOptimistic:function(e,t){var n=f();return Fe(n,tn,e,t)},useMemoCache:J,useCacheRefresh:tf};Od.useEffectEvent=wn;var sf={readContext:on,use:R,useCallback:Lu,useContext:on,useEffect:Zt,useImperativeHandle:Hl,useInsertionEffect:Ct,useLayoutEffect:ki,useMemo:qu,useReducer:ae,useRef:Ge,useState:function(){return ae(V)},useDebugValue:Nd,useDeferredValue:function(e,t){var n=f();return tn===null?Md(n,e,t):Zu(n,tn.memoizedState,e,t)},useTransition:function(){var e=ae(V)[0],t=f().memoizedState;return[typeof e=="boolean"?e:z(e),t]},useSyncExternalStore:ee,useId:ef,useHostTransitionStatus:Bd,useFormState:an,useActionState:an,useOptimistic:function(e,t){var n=f();return tn!==null?Fe(n,tn,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:J,useCacheRefresh:tf};sf.useEffectEvent=wn;function Hd(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:P({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ed={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=gi(),o=Ri(l);o.payload=t,n!=null&&(o.callback=n),t=ua(e,o,l),t!==null&&(li(t,e,l),ws(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=gi(),o=Ri(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ua(e,o,l),t!==null&&(li(t,e,l),ws(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gi(),l=Ri(n);l.tag=2,t!=null&&(l.callback=t),t=ua(e,l,n),t!==null&&(li(t,e,n),ws(t,e,n))}};function rf(e,t,n,l,o,s,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,h):t.prototype&&t.prototype.isPureReactComponent?!ls(n,l)||!ls(o,s):!0}function cf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Ed.enqueueReplaceState(t,t.state,null)}function Ts(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=P({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function df(e){ci(e)}function uf(e){console.error(e)}function ff(e){ci(e)}function Ec(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function pf(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Vd(e,t,n){return n=Ri(n),n.tag=3,n.payload={element:null},n.callback=function(){Ec(e,t)},n}function hf(e){return e=Ri(e),e.tag=3,e}function gf(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=l.value;e.payload=function(){return o(s)},e.callback=function(){pf(t,n,l)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){pf(t,n,l),typeof o!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function kh(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Bl(t,n,o,!0),n=dl.current,n!==null){switch(n.tag){case 31:case 13:return zl===null?Zc():n.alternate===null&&_n===0&&(_n=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===bs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),du(e,l,o)),!1;case 22:return n.flags|=65536,l===bs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),du(e,l,o)),!1}throw Error(p(435,n.tag))}return du(e,l,o),Zc(),!1}if(Tt)return t=dl.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==Ir&&(e=Error(p(422),{cause:l}),Ci(jl(e,n)))):(l!==Ir&&(t=Error(p(423),{cause:l}),Ci(jl(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=jl(l,n),o=Vd(e.stateNode,l,o),Ls(e,o),_n!==4&&(_n=2)),!1;var s=Error(p(520),{cause:l});if(s=jl(s,n),ic===null?ic=[s]:ic.push(s),_n!==4&&(_n=2),t===null)return!0;l=jl(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Vd(n.stateNode,l,e),Ls(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(_o===null||!_o.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=hf(o),gf(o,e,n,l),Ls(n,o),!1}n=n.return}while(n!==null);return!1}var $d=Error(p(461)),Xn=!1;function ul(e,t,n,l){t.child=e===null?Do(t,null,n,l):$i(t,e.child,n,l)}function xf(e,t,n,l,o){n=n.render;var s=t.ref;if("ref"in l){var h={};for(var w in l)w!=="ref"&&(h[w]=l[w])}else h=l;return Zl(t),l=ft(e,t,n,h,s,o),w=x(),e!==null&&!Xn?(y(e,t,o),qa(e,t,o)):(Tt&&w&&Vr(t),t.flags|=1,ul(e,t,l,o),t.child)}function yf(e,t,n,l,o){if(e===null){var s=n.type;return typeof s=="function"&&!na(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,bf(e,t,s,l,o)):(e=Wl(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Ld(e,o)){var h=s.memoizedProps;if(n=n.compare,n=n!==null?n:ls,n(h,l)&&e.ref===t.ref)return qa(e,t,o)}return t.flags|=1,e=wl(s,l),e.ref=t.ref,e.return=t,t.child=e}function bf(e,t,n,l,o){if(e!==null){var s=e.memoizedProps;if(ls(s,l)&&e.ref===t.ref)if(Xn=!1,t.pendingProps=l=s,Ld(e,o))(e.flags&131072)!==0&&(Xn=!0);else return t.lanes=e.lanes,qa(e,t,o)}return Id(e,t,n,l,o)}function vf(e,t,n,l){var o=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~s}else l=0,t.child=null;return mf(e,t,s,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ys(t,s!==null?s.cachePool:null),s!==null?Zs(t,s):ll(),_c(t);else return l=t.lanes=536870912,mf(e,t,s!==null?s.baseLanes|n:n,n,l)}else s!==null?(ys(t,s.cachePool),Zs(t,s),Kl(),t.memoizedState=null):(e!==null&&ys(t,null),ll(),Kl());return ul(e,t,o,n),t.child}function Qr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function mf(e,t,n,l,o){var s=xs();return s=s===null?null:{parent:Sn._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&ys(t,null),ll(),_c(t),e!==null&&Bl(e,t,l,!0),t.childLanes=o,null}function Vc(e,t){return t=Ic({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Sf(e,t,n){return $i(t,e.child,null,n),e=Vc(t,t.pendingProps),e.flags|=2,Ol(t),t.memoizedState=null,e}function Ah(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Tt){if(l.mode==="hidden")return e=Vc(t,l),t.lanes=536870912,Qr(null,e);if(La(t),(e=Gt)?(e=Up(e,Fl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:di!==null?{id:Xl,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},n=Gs(e),n.return=t,t.child=n,Wn=t,Gt=null)):e=null,e===null)throw oa(t);return t.lanes=536870912,null}return Vc(t,l)}var s=e.memoizedState;if(s!==null){var h=s.dehydrated;if(La(t),o)if(t.flags&256)t.flags&=-257,t=Sf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(p(558));else if(Xn||Bl(e,t,n,!1),o=(n&e.childLanes)!==0,Xn||o){if(l=hn,l!==null&&(h=xl(l,n),h!==0&&h!==s.retryLane))throw s.retryLane=h,Yl(e,h),li(l,e,h),$d;Zc(),t=Sf(e,t,n)}else e=s.treeContext,Gt=Ni(h.nextSibling),Wn=t,Tt=!0,aa=null,Fl=!1,e!==null&&Rc(t,e),t=Vc(t,l),t.flags|=4096;return t}return e=wl(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function $c(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(p(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Id(e,t,n,l,o){return Zl(t),n=ft(e,t,n,l,void 0,o),l=x(),e!==null&&!Xn?(y(e,t,o),qa(e,t,o)):(Tt&&l&&Vr(t),t.flags|=1,ul(e,t,n,o),t.child)}function wf(e,t,n,l,o,s){return Zl(t),t.updateQueue=null,n=a(t,l,n,o),Oc(e),l=x(),e!==null&&!Xn?(y(e,t,s),qa(e,t,s)):(Tt&&l&&Vr(t),t.flags|=1,ul(e,t,n,s),t.child)}function jf(e,t,n,l,o){if(Zl(t),t.stateNode===null){var s=yo,h=n.contextType;typeof h=="object"&&h!==null&&(s=on(h)),s=new n(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ed,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},Ga(t),h=n.contextType,s.context=typeof h=="object"&&h!==null?on(h):yo,s.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Hd(t,n,h,l),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(h=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),h!==s.state&&Ed.enqueueReplaceState(s,s.state,null),_l(t,l,s,o),fa(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var w=t.memoizedProps,N=Ts(n,w);s.props=N;var K=s.context,be=n.contextType;h=yo,typeof be=="object"&&be!==null&&(h=on(be));var Ce=n.getDerivedStateFromProps;be=typeof Ce=="function"||typeof s.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,be||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(w||K!==h)&&cf(t,s,l,h),Cl=!1;var le=t.memoizedState;s.state=le,_l(t,l,s,o),fa(),K=t.memoizedState,w||le!==K||Cl?(typeof Ce=="function"&&(Hd(t,n,Ce,l),K=t.memoizedState),(N=Cl||rf(t,n,N,l,le,K,h))?(be||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=K),s.props=l,s.state=K,s.context=h,l=N):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,Ss(e,t),h=t.memoizedProps,be=Ts(n,h),s.props=be,Ce=t.pendingProps,le=s.context,K=n.contextType,N=yo,typeof K=="object"&&K!==null&&(N=on(K)),w=n.getDerivedStateFromProps,(K=typeof w=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(h!==Ce||le!==N)&&cf(t,s,l,N),Cl=!1,le=t.memoizedState,s.state=le,_l(t,l,s,o),fa();var se=t.memoizedState;h!==Ce||le!==se||Cl||e!==null&&e.dependencies!==null&&ra(e.dependencies)?(typeof w=="function"&&(Hd(t,n,w,l),se=t.memoizedState),(be=Cl||rf(t,n,be,l,le,se,N)||e!==null&&e.dependencies!==null&&ra(e.dependencies))?(K||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,se,N),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,se,N)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=se),s.props=l,s.state=se,s.context=N,l=be):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,$c(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=$i(t,e.child,null,o),t.child=$i(t,null,n,o)):ul(e,t,n,o),t.memoizedState=s.state,e=t.child):e=qa(e,t,o),e}function Tf(e,t,n,l){return Ha(),t.flags|=256,ul(e,t,n,l),t.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yd(e){return{baseLanes:e,cachePool:Mc()}}function Wd(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=hi),e}function Cf(e,t,n){var l=t.pendingProps,o=!1,s=(t.flags&128)!==0,h;if((h=s)||(h=e!==null&&e.memoizedState===null?!1:(zn.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Tt){if(o?ha(t):Kl(),(e=Gt)?(e=Up(e,Fl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:di!==null?{id:Xl,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},n=Gs(e),n.return=t,t.child=n,Wn=t,Gt=null)):e=null,e===null)throw oa(t);return zu(e)?t.lanes=32:t.lanes=536870912,null}var w=l.children;return l=l.fallback,o?(Kl(),o=t.mode,w=Ic({mode:"hidden",children:w},o),l=Ei(l,o,n,null),w.return=t,l.return=t,w.sibling=l,t.child=w,l=t.child,l.memoizedState=Yd(n),l.childLanes=Wd(e,h,n),t.memoizedState=Pd,Qr(null,l)):(ha(t),Xd(t,w))}var N=e.memoizedState;if(N!==null&&(w=N.dehydrated,w!==null)){if(s)t.flags&256?(ha(t),t.flags&=-257,t=Gd(e,t,n)):t.memoizedState!==null?(Kl(),t.child=e.child,t.flags|=128,t=null):(Kl(),w=l.fallback,o=t.mode,l=Ic({mode:"visible",children:l.children},o),w=Ei(w,o,n,null),w.flags|=2,l.return=t,w.return=t,l.sibling=w,t.child=l,$i(t,e.child,null,n),l=t.child,l.memoizedState=Yd(n),l.childLanes=Wd(e,h,n),t.memoizedState=Pd,t=Qr(null,l));else if(ha(t),zu(w)){if(h=w.nextSibling&&w.nextSibling.dataset,h)var K=h.dgst;h=K,l=Error(p(419)),l.stack="",l.digest=h,Ci({value:l,source:null,stack:null}),t=Gd(e,t,n)}else if(Xn||Bl(e,t,n,!1),h=(n&e.childLanes)!==0,Xn||h){if(h=hn,h!==null&&(l=xl(h,n),l!==0&&l!==N.retryLane))throw N.retryLane=l,Yl(e,l),li(h,e,l),$d;Cu(w)||Zc(),t=Gd(e,t,n)}else Cu(w)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Gt=Ni(w.nextSibling),Wn=t,Tt=!0,aa=null,Fl=!1,e!==null&&Rc(t,e),t=Xd(t,l.children),t.flags|=4096);return t}return o?(Kl(),w=l.fallback,o=t.mode,N=e.child,K=N.sibling,l=wl(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,K!==null?w=wl(K,w):(w=Ei(w,o,n,null),w.flags|=2),w.return=t,l.return=t,l.sibling=w,t.child=l,Qr(null,l),l=t.child,w=e.child.memoizedState,w===null?w=Yd(n):(o=w.cachePool,o!==null?(N=Sn._currentValue,o=o.parent!==N?{parent:N,pool:N}:o):o=Mc(),w={baseLanes:w.baseLanes|n,cachePool:o}),l.memoizedState=w,l.childLanes=Wd(e,h,n),t.memoizedState=Pd,Qr(e.child,l)):(ha(t),n=e.child,e=n.sibling,n=wl(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function Xd(e,t){return t=Ic({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ic(e,t){return e=cl(22,e,null,t),e.lanes=0,e}function Gd(e,t,n){return $i(t,e.child,null,n),e=Xd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zf(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),vo(e.return,t,n)}function Fd(e,t,n,l,o,s){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:s}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=n,h.tailMode=o,h.treeForkCount=s)}function Rf(e,t,n){var l=t.pendingProps,o=l.revealOrder,s=l.tail;l=l.children;var h=zn.current,w=(h&2)!==0;if(w?(h=h&1|2,t.flags|=128):h&=1,ue(zn,h),ul(e,t,l,n),l=Tt?Oa:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zf(e,n,t);else if(e.tag===19)zf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ko(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Fd(t,!1,o,n,s,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ko(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Fd(t,!0,n,null,s,l);break;case"together":Fd(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function qa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bo|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Bl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(p(153));if(t.child!==null){for(e=t.child,n=wl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=wl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ld(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ra(e)))}function Nh(e,t,n){switch(t.tag){case 3:gn(t,t.stateNode.containerInfo),Ll(t,Sn,e.memoizedState.cache),Ha();break;case 27:case 5:El(t);break;case 4:gn(t,t.stateNode.containerInfo);break;case 10:Ll(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,La(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(ha(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Cf(e,t,n):(ha(t),e=qa(e,t,n),e!==null?e.sibling:null);ha(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Bl(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return Rf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ue(zn,zn.current),l)break;return null;case 22:return t.lanes=0,vf(e,t,n,t.pendingProps);case 24:Ll(t,Sn,e.memoizedState.cache)}return qa(e,t,n)}function Df(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Xn=!0;else{if(!Ld(e,n)&&(t.flags&128)===0)return Xn=!1,Nh(e,t,n);Xn=(e.flags&131072)!==0}else Xn=!1,Tt&&(t.flags&1048576)!==0&&Er(t,Oa,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=fi(t.elementType),t.type=e,typeof e=="function")na(e)?(l=Ts(e,l),t.tag=1,t=jf(null,t,e,l,n)):(t.tag=0,t=Id(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===U){t.tag=11,t=xf(null,t,e,l,n);break e}else if(o===g){t.tag=14,t=yf(null,t,e,l,n);break e}}throw t=Pt(e)||e,Error(p(306,t,""))}}return t;case 0:return Id(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=Ts(l,t.pendingProps),jf(e,t,l,o,n);case 3:e:{if(gn(t,t.stateNode.containerInfo),e===null)throw Error(p(387));l=t.pendingProps;var s=t.memoizedState;o=s.element,Ss(e,t),_l(t,l,null,n);var h=t.memoizedState;if(l=h.cache,Ll(t,Sn,l),l!==s.cache&&mo(t,[Sn],n,!0),fa(),l=h.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Tf(e,t,l,n);break e}else if(l!==o){o=jl(Error(p(424)),t),Ci(o),t=Tf(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Gt=Ni(e.firstChild),Wn=t,Tt=!0,aa=null,Fl=!0,n=Do(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ha(),l===o){t=qa(e,t,n);break e}ul(e,t,l,n)}t=t.child}return t;case 26:return $c(e,t),e===null?(n=Vp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Tt||(n=t.type,e=t.pendingProps,l=ld(st.current).createElement(n),l[Yn]=t,l[vn]=e,fl(l,n,e),On(l),t.stateNode=l):t.memoizedState=Vp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return El(t),e===null&&Tt&&(l=t.stateNode=Op(t.type,t.pendingProps,st.current),Wn=t,Fl=!0,o=Gt,Vo(t.type)?(Ru=o,Gt=Ni(l.firstChild)):Gt=o),ul(e,t,t.pendingProps.children,n),$c(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Tt&&((o=l=Gt)&&(l=sg(l,t.type,t.pendingProps,Fl),l!==null?(t.stateNode=l,Wn=t,Gt=Ni(l.firstChild),Fl=!1,o=!0):o=!1),o||oa(t)),El(t),o=t.type,s=t.pendingProps,h=e!==null?e.memoizedProps:null,l=s.children,wu(o,s)?l=null:h!==null&&wu(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=ft(e,t,r,null,null,n),fc._currentValue=o),$c(e,t),ul(e,t,l,n),t.child;case 6:return e===null&&Tt&&((e=n=Gt)&&(n=rg(n,t.pendingProps,Fl),n!==null?(t.stateNode=n,Wn=t,Gt=null,e=!0):e=!1),e||oa(t)),null;case 13:return Cf(e,t,n);case 4:return gn(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=$i(t,null,l,n):ul(e,t,l,n),t.child;case 11:return xf(e,t,t.type,t.pendingProps,n);case 7:return ul(e,t,t.pendingProps,n),t.child;case 8:return ul(e,t,t.pendingProps.children,n),t.child;case 12:return ul(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,Ll(t,t.type,l.value),ul(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,Zl(t),o=on(o),l=l(o),t.flags|=1,ul(e,t,l,n),t.child;case 14:return yf(e,t,t.type,t.pendingProps,n);case 15:return bf(e,t,t.type,t.pendingProps,n);case 19:return Rf(e,t,n);case 31:return Ah(e,t,n);case 22:return vf(e,t,n,t.pendingProps);case 24:return Zl(t),l=on(Sn),e===null?(o=xs(),o===null&&(o=hn,s=wo(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:l,cache:o},Ga(t),Ll(t,Sn,o)):((e.lanes&n)!==0&&(Ss(e,t),_l(t,null,null,n),fa()),o=e.memoizedState,s=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ll(t,Sn,l)):(l=s.cache,Ll(t,Sn,l),l!==o.cache&&mo(t,[Sn],n,!0))),ul(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(p(156,t.tag))}function Za(e){e.flags|=4}function qd(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(tp())e.flags|=8192;else throw Wa=bs,Wr}else e.flags&=-16777217}function kf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Wp(t))if(tp())e.flags|=8192;else throw Wa=bs,Wr}function Pc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Rs():536870912,e.lanes|=t,er|=t)}function Kr(e,t){if(!Tt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Mh(e,t,n){var l=t.pendingProps;switch($r(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(t),null;case 1:return jn(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ql(Sn),Ot(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(bo(t)?Za(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ea())),jn(t),null;case 26:var o=t.type,s=t.memoizedState;return e===null?(Za(t),s!==null?(jn(t),kf(t,s)):(jn(t),qd(t,o,null,l,n))):s?s!==e.memoizedState?(Za(t),jn(t),kf(t,s)):(jn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Za(t),jn(t),qd(t,o,e,l,n)),null;case 27:if(te(t),n=st.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Za(t);else{if(!l){if(t.stateNode===null)throw Error(p(166));return jn(t),null}e=Ve.current,bo(t)?Dc(t):(e=Op(o,l,n),t.stateNode=e,Za(t))}return jn(t),null;case 5:if(te(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Za(t);else{if(!l){if(t.stateNode===null)throw Error(p(166));return jn(t),null}if(s=Ve.current,bo(t))Dc(t);else{var h=ld(st.current);switch(s){case 1:s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=h.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?h.createElement(o,{is:l.is}):h.createElement(o)}}s[Yn]=t,s[vn]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=s;e:switch(fl(s,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Za(t)}}return jn(t),qd(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Za(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(p(166));if(e=st.current,bo(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=Wn,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[Yn]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Cp(e.nodeValue,n)),e||oa(t,!0)}else e=ld(e).createTextNode(l),e[Yn]=t,t.stateNode=e}return jn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=bo(t),n!==null){if(e===null){if(!l)throw Error(p(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(557));e[Yn]=t}else Ha(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;jn(t),e=!1}else n=Ea(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Ol(t),t):(Ol(t),null);if((t.flags&128)!==0)throw Error(p(558))}return jn(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=bo(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(p(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p(317));o[Yn]=t}else Ha(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;jn(t),o=!1}else o=Ea(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Ol(t),t):(Ol(t),null)}return Ol(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Pc(t,t.updateQueue),jn(t),null);case 4:return Ot(),e===null&&yu(t.stateNode.containerInfo),jn(t),null;case 10:return ql(t.type),jn(t),null;case 19:if(X(zn),l=t.memoizedState,l===null)return jn(t),null;if(o=(t.flags&128)!==0,s=l.rendering,s===null)if(o)Kr(l,!1);else{if(_n!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=ko(e),s!==null){for(t.flags|=128,Kr(l,!1),e=s.updateQueue,t.updateQueue=e,Pc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)fs(n,e),n=n.sibling;return ue(zn,zn.current&1|2),Tt&&Gl(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&me()>Fc&&(t.flags|=128,o=!0,Kr(l,!1),t.lanes=4194304)}else{if(!o)if(e=ko(s),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Pc(t,e),Kr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!Tt)return jn(t),null}else 2*me()-l.renderingStartTime>Fc&&n!==536870912&&(t.flags|=128,o=!0,Kr(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=me(),e.sibling=null,n=zn.current,ue(zn,o?n&1|2:n&1),Tt&&Gl(t,l.treeForkCount),e):(jn(t),null);case 22:case 23:return Ol(t),pa(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(jn(t),t.subtreeFlags&6&&(t.flags|=8192)):jn(t),n=t.updateQueue,n!==null&&Pc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&X(Tl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ql(Sn),jn(t),null;case 25:return null;case 30:return null}throw Error(p(156,t.tag))}function Uh(e,t){switch($r(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ql(Sn),Ot(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return te(t),null;case 31:if(t.memoizedState!==null){if(Ol(t),t.alternate===null)throw Error(p(340));Ha()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ol(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(p(340));Ha()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(zn),null;case 4:return Ot(),null;case 10:return ql(t.type),null;case 22:case 23:return Ol(t),pa(),e!==null&&X(Tl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ql(Sn),null;case 25:return null;default:return null}}function Af(e,t){switch($r(t),t.tag){case 3:ql(Sn),Ot();break;case 26:case 27:case 5:te(t);break;case 4:Ot();break;case 31:t.memoizedState!==null&&Ol(t);break;case 13:Ol(t);break;case 19:X(zn);break;case 10:ql(t.type);break;case 22:case 23:Ol(t),pa(),e!==null&&X(Tl);break;case 24:ql(Sn)}}function Jr(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var s=n.create,h=n.inst;l=s(),h.destroy=l}n=n.next}while(n!==o)}}catch(w){rn(t,t.return,w)}}function Mo(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var s=o.next;l=s;do{if((l.tag&e)===e){var h=l.inst,w=h.destroy;if(w!==void 0){h.destroy=void 0,o=t;var N=n,K=w;try{K()}catch(be){rn(o,N,be)}}}l=l.next}while(l!==s)}}catch(be){rn(t,t.return,be)}}function Nf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Fa(t,n)}catch(l){rn(e,e.return,l)}}}function Mf(e,t,n){n.props=Ts(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){rn(e,t,l)}}function ec(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){rn(e,t,o)}}function ya(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){rn(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){rn(e,t,o)}else n.current=null}function Uf(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){rn(e,e.return,o)}}function Zd(e,t,n){try{var l=e.stateNode;tg(l,e.type,n,t),l[vn]=t}catch(o){rn(e,e.return,o)}}function Bf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Vo(e.type)||e.tag===4}function Qd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Vo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kd(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=En));else if(l!==4&&(l===27&&Vo(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Kd(e,t,n),e=e.sibling;e!==null;)Kd(e,t,n),e=e.sibling}function Yc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&Vo(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Yc(e,t,n),e=e.sibling;e!==null;)Yc(e,t,n),e=e.sibling}function _f(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);fl(t,l,n),t[Yn]=e,t[vn]=n}catch(s){rn(e,e.return,s)}}var Qa=!1,Gn=!1,Jd=!1,Of=typeof WeakSet=="function"?WeakSet:Set,il=null;function Bh(e,t){if(e=e.containerInfo,mu=dd,e=as(e),os(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var h=0,w=-1,N=-1,K=0,be=0,Ce=e,le=null;t:for(;;){for(var se;Ce!==n||o!==0&&Ce.nodeType!==3||(w=h+o),Ce!==s||l!==0&&Ce.nodeType!==3||(N=h+l),Ce.nodeType===3&&(h+=Ce.nodeValue.length),(se=Ce.firstChild)!==null;)le=Ce,Ce=se;for(;;){if(Ce===e)break t;if(le===n&&++K===o&&(w=h),le===s&&++be===l&&(N=h),(se=Ce.nextSibling)!==null)break;Ce=le,le=Ce.parentNode}Ce=se}n=w===-1||N===-1?null:{start:w,end:N}}else n=null}n=n||{start:0,end:0}}else n=null;for(Su={focusedElem:e,selectionRange:n},dd=!1,il=t;il!==null;)if(t=il,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,il=e;else for(;il!==null;){switch(t=il,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,o=s.memoizedProps,s=s.memoizedState,l=n.stateNode;try{var et=Ts(n.type,o);e=l.getSnapshotBeforeUpdate(et,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(gt){rn(n,n.return,gt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Tu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Tu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(p(163))}if(e=t.sibling,e!==null){e.return=t.return,il=e;break}il=t.return}}function Hf(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Ja(e,n),l&4&&Jr(5,n);break;case 1:if(Ja(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){rn(n,n.return,h)}else{var o=Ts(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){rn(n,n.return,h)}}l&64&&Nf(n),l&512&&ec(n,n.return);break;case 3:if(Ja(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Fa(e,t)}catch(h){rn(n,n.return,h)}}break;case 27:t===null&&l&4&&_f(n);case 26:case 5:Ja(e,n),t===null&&l&4&&Uf(n),l&512&&ec(n,n.return);break;case 12:Ja(e,n);break;case 31:Ja(e,n),l&4&&$f(e,n);break;case 13:Ja(e,n),l&4&&If(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Yh.bind(null,n),cg(e,n))));break;case 22:if(l=n.memoizedState!==null||Qa,!l){t=t!==null&&t.memoizedState!==null||Gn,o=Qa;var s=Gn;Qa=l,(Gn=t)&&!s?eo(e,n,(n.subtreeFlags&8772)!==0):Ja(e,n),Qa=o,Gn=s}break;case 30:break;default:Ja(e,n)}}function Ef(e){var t=e.alternate;t!==null&&(e.alternate=null,Ef(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Li(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dn=null,Jl=!1;function Ka(e,t,n){for(n=n.child;n!==null;)Vf(e,t,n),n=n.sibling}function Vf(e,t,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(yi,n)}catch{}switch(n.tag){case 26:Gn||ya(n,t),Ka(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Gn||ya(n,t);var l=Dn,o=Jl;Vo(n.type)&&(Dn=n.stateNode,Jl=!1),Ka(e,t,n),cc(n.stateNode),Dn=l,Jl=o;break;case 5:Gn||ya(n,t);case 6:if(l=Dn,o=Jl,Dn=null,Ka(e,t,n),Dn=l,Jl=o,Dn!==null)if(Jl)try{(Dn.nodeType===9?Dn.body:Dn.nodeName==="HTML"?Dn.ownerDocument.body:Dn).removeChild(n.stateNode)}catch(s){rn(n,t,s)}else try{Dn.removeChild(n.stateNode)}catch(s){rn(n,t,s)}break;case 18:Dn!==null&&(Jl?(e=Dn,Np(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),rr(e)):Np(Dn,n.stateNode));break;case 4:l=Dn,o=Jl,Dn=n.stateNode.containerInfo,Jl=!0,Ka(e,t,n),Dn=l,Jl=o;break;case 0:case 11:case 14:case 15:Mo(2,n,t),Gn||Mo(4,n,t),Ka(e,t,n);break;case 1:Gn||(ya(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Mf(n,t,l)),Ka(e,t,n);break;case 21:Ka(e,t,n);break;case 22:Gn=(l=Gn)||n.memoizedState!==null,Ka(e,t,n),Gn=l;break;default:Ka(e,t,n)}}function $f(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{rr(e)}catch(n){rn(t,t.return,n)}}}function If(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{rr(e)}catch(n){rn(t,t.return,n)}}function _h(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Of),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Of),t;default:throw Error(p(435,e.tag))}}function Wc(e,t){var n=_h(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=Wh.bind(null,e,l);l.then(o,o)}})}function ei(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],s=e,h=t,w=h;e:for(;w!==null;){switch(w.tag){case 27:if(Vo(w.type)){Dn=w.stateNode,Jl=!1;break e}break;case 5:Dn=w.stateNode,Jl=!1;break e;case 3:case 4:Dn=w.stateNode.containerInfo,Jl=!0;break e}w=w.return}if(Dn===null)throw Error(p(160));Vf(s,h,o),Dn=null,Jl=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Pf(t,e),t=t.sibling}var Yi=null;function Pf(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ei(t,e),ti(e),l&4&&(Mo(3,e,e.return),Jr(3,e),Mo(5,e,e.return));break;case 1:ei(t,e),ti(e),l&512&&(Gn||n===null||ya(n,n.return)),l&64&&Qa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=Yi;if(ei(t,e),ti(e),l&512&&(Gn||n===null||ya(n,n.return)),l&4){var s=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":s=o.getElementsByTagName("title")[0],(!s||s[vi]||s[Yn]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(l),o.head.insertBefore(s,o.querySelector("head > title"))),fl(s,l,n),s[Yn]=e,On(s),l=s;break e;case"link":var h=Pp("link","href",o).get(l+(n.href||""));if(h){for(var w=0;w<h.length;w++)if(s=h[w],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(w,1);break t}}s=o.createElement(l),fl(s,l,n),o.head.appendChild(s);break;case"meta":if(h=Pp("meta","content",o).get(l+(n.content||""))){for(w=0;w<h.length;w++)if(s=h[w],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(w,1);break t}}s=o.createElement(l),fl(s,l,n),o.head.appendChild(s);break;default:throw Error(p(468,l))}s[Yn]=e,On(s),l=s}e.stateNode=l}else Yp(o,e.type,e.stateNode);else e.stateNode=Ip(o,l,e.memoizedProps);else s!==l?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,l===null?Yp(o,e.type,e.stateNode):Ip(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Zd(e,e.memoizedProps,n.memoizedProps)}break;case 27:ei(t,e),ti(e),l&512&&(Gn||n===null||ya(n,n.return)),n!==null&&l&4&&Zd(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ei(t,e),ti(e),l&512&&(Gn||n===null||ya(n,n.return)),e.flags&32){o=e.stateNode;try{mi(o,"")}catch(et){rn(e,e.return,et)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,Zd(e,o,n!==null?n.memoizedProps:o)),l&1024&&(Jd=!0);break;case 6:if(ei(t,e),ti(e),l&4){if(e.stateNode===null)throw Error(p(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(et){rn(e,e.return,et)}}break;case 3:if(od=null,o=Yi,Yi=id(t.containerInfo),ei(t,e),Yi=o,ti(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{rr(t.containerInfo)}catch(et){rn(e,e.return,et)}Jd&&(Jd=!1,Yf(e));break;case 4:l=Yi,Yi=id(e.stateNode.containerInfo),ei(t,e),ti(e),Yi=l;break;case 12:ei(t,e),ti(e);break;case 31:ei(t,e),ti(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Wc(e,l)));break;case 13:ei(t,e),ti(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Gc=me()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Wc(e,l)));break;case 22:o=e.memoizedState!==null;var N=n!==null&&n.memoizedState!==null,K=Qa,be=Gn;if(Qa=K||o,Gn=be||N,ei(t,e),Gn=be,Qa=K,ti(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||N||Qa||Gn||Cs(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){N=n=t;try{if(s=N.stateNode,o)h=s.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{w=N.stateNode;var Ce=N.memoizedProps.style,le=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;w.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(et){rn(N,N.return,et)}}}else if(t.tag===6){if(n===null){N=t;try{N.stateNode.nodeValue=o?"":N.memoizedProps}catch(et){rn(N,N.return,et)}}}else if(t.tag===18){if(n===null){N=t;try{var se=N.stateNode;o?Mp(se,!0):Mp(N.stateNode,!1)}catch(et){rn(N,N.return,et)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Wc(e,n))));break;case 19:ei(t,e),ti(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Wc(e,l)));break;case 30:break;case 21:break;default:ei(t,e),ti(e)}}function ti(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Bf(l)){n=l;break}l=l.return}if(n==null)throw Error(p(160));switch(n.tag){case 27:var o=n.stateNode,s=Qd(e);Yc(e,s,o);break;case 5:var h=n.stateNode;n.flags&32&&(mi(h,""),n.flags&=-33);var w=Qd(e);Yc(e,w,h);break;case 3:case 4:var N=n.stateNode.containerInfo,K=Qd(e);Kd(e,K,N);break;default:throw Error(p(161))}}catch(be){rn(e,e.return,be)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Yf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ja(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Hf(e,t.alternate,t),t=t.sibling}function Cs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Mo(4,t,t.return),Cs(t);break;case 1:ya(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Mf(t,t.return,n),Cs(t);break;case 27:cc(t.stateNode);case 26:case 5:ya(t,t.return),Cs(t);break;case 22:t.memoizedState===null&&Cs(t);break;case 30:Cs(t);break;default:Cs(t)}e=e.sibling}}function eo(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,s=t,h=s.flags;switch(s.tag){case 0:case 11:case 15:eo(o,s,n),Jr(4,s);break;case 1:if(eo(o,s,n),l=s,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(K){rn(l,l.return,K)}if(l=s,o=l.updateQueue,o!==null){var w=l.stateNode;try{var N=o.shared.hiddenCallbacks;if(N!==null)for(o.shared.hiddenCallbacks=null,o=0;o<N.length;o++)Gr(N[o],w)}catch(K){rn(l,l.return,K)}}n&&h&64&&Nf(s),ec(s,s.return);break;case 27:_f(s);case 26:case 5:eo(o,s,n),n&&l===null&&h&4&&Uf(s),ec(s,s.return);break;case 12:eo(o,s,n);break;case 31:eo(o,s,n),n&&h&4&&$f(o,s);break;case 13:eo(o,s,n),n&&h&4&&If(o,s);break;case 22:s.memoizedState===null&&eo(o,s,n),ec(s,s.return);break;case 30:break;default:eo(o,s,n)}t=t.sibling}}function eu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&$a(n))}function tu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$a(e))}function Wi(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wf(e,t,n,l),t=t.sibling}function Wf(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Wi(e,t,n,l),o&2048&&Jr(9,t);break;case 1:Wi(e,t,n,l);break;case 3:Wi(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$a(e)));break;case 12:if(o&2048){Wi(e,t,n,l),e=t.stateNode;try{var s=t.memoizedProps,h=s.id,w=s.onPostCommit;typeof w=="function"&&w(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){rn(t,t.return,N)}}else Wi(e,t,n,l);break;case 31:Wi(e,t,n,l);break;case 13:Wi(e,t,n,l);break;case 23:break;case 22:s=t.stateNode,h=t.alternate,t.memoizedState!==null?s._visibility&2?Wi(e,t,n,l):tc(e,t):s._visibility&2?Wi(e,t,n,l):(s._visibility|=2,Qs(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&eu(h,t);break;case 24:Wi(e,t,n,l),o&2048&&tu(t.alternate,t);break;default:Wi(e,t,n,l)}}function Qs(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,h=t,w=n,N=l,K=h.flags;switch(h.tag){case 0:case 11:case 15:Qs(s,h,w,N,o),Jr(8,h);break;case 23:break;case 22:var be=h.stateNode;h.memoizedState!==null?be._visibility&2?Qs(s,h,w,N,o):tc(s,h):(be._visibility|=2,Qs(s,h,w,N,o)),o&&K&2048&&eu(h.alternate,h);break;case 24:Qs(s,h,w,N,o),o&&K&2048&&tu(h.alternate,h);break;default:Qs(s,h,w,N,o)}t=t.sibling}}function tc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:tc(n,l),o&2048&&eu(l.alternate,l);break;case 24:tc(n,l),o&2048&&tu(l.alternate,l);break;default:tc(n,l)}t=t.sibling}}var nc=8192;function Ks(e,t,n){if(e.subtreeFlags&nc)for(e=e.child;e!==null;)Xf(e,t,n),e=e.sibling}function Xf(e,t,n){switch(e.tag){case 26:Ks(e,t,n),e.flags&nc&&e.memoizedState!==null&&Sg(n,Yi,e.memoizedState,e.memoizedProps);break;case 5:Ks(e,t,n);break;case 3:case 4:var l=Yi;Yi=id(e.stateNode.containerInfo),Ks(e,t,n),Yi=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=nc,nc=16777216,Ks(e,t,n),nc=l):Ks(e,t,n));break;default:Ks(e,t,n)}}function Gf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function lc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];il=l,Lf(l,e)}Gf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ff(e),e=e.sibling}function Ff(e){switch(e.tag){case 0:case 11:case 15:lc(e),e.flags&2048&&Mo(9,e,e.return);break;case 3:lc(e);break;case 12:lc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Xc(e)):lc(e);break;default:lc(e)}}function Xc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];il=l,Lf(l,e)}Gf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Mo(8,t,t.return),Xc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Xc(t));break;default:Xc(t)}e=e.sibling}}function Lf(e,t){for(;il!==null;){var n=il;switch(n.tag){case 0:case 11:case 15:Mo(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:$a(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,il=l;else e:for(n=e;il!==null;){l=il;var o=l.sibling,s=l.return;if(Ef(l),l===n){il=null;break e}if(o!==null){o.return=s,il=o;break e}il=s}}}var Oh={getCacheForType:function(e){var t=on(Sn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return on(Sn).controller.signal}},Hh=typeof WeakMap=="function"?WeakMap:Map,nn=0,hn=null,$t=null,Ft=0,sn=0,pi=null,Uo=!1,Js=!1,nu=!1,to=0,_n=0,Bo=0,zs=0,lu=0,hi=0,er=0,ic=null,ni=null,iu=!1,Gc=0,qf=0,Fc=1/0,Lc=null,_o=null,el=0,Oo=null,tr=null,no=0,au=0,ou=null,Zf=null,ac=0,su=null;function gi(){return(nn&2)!==0&&Ft!==0?Ft&-Ft:_.T!==null?pu():Qt()}function Qf(){if(hi===0)if((Ft&536870912)===0||Tt){var e=Ie;Ie<<=1,(Ie&3932160)===0&&(Ie=262144),hi=e}else hi=536870912;return e=dl.current,e!==null&&(e.flags|=32),hi}function li(e,t,n){(e===hn&&(sn===2||sn===9)||e.cancelPendingCommit!==null)&&(nr(e,0),Ho(e,Ft,hi,!1)),lt(e,n),((nn&2)===0||e!==hn)&&(e===hn&&((nn&2)===0&&(zs|=n),_n===4&&Ho(e,Ft,hi,!1)),ba(e))}function Kf(e,t,n){if((nn&6)!==0)throw Error(p(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ma(e,t),o=l?$h(e,t):cu(e,t,!0),s=l;do{if(o===0){Js&&!l&&Ho(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Eh(n)){o=cu(e,t,!1),s=!1;continue}if(o===2){if(s=t,e.errorRecoveryDisabledLanes&s)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var w=e;o=ic;var N=w.current.memoizedState.isDehydrated;if(N&&(nr(w,h).flags|=256),h=cu(w,h,!1),h!==2){if(nu&&!N){w.errorRecoveryDisabledLanes|=s,zs|=s,o=4;break e}s=ni,ni=o,s!==null&&(ni===null?ni=s:ni.push.apply(ni,s))}o=h}if(s=!1,o!==2)continue}}if(o===1){nr(e,0),Ho(e,t,0,!0);break}e:{switch(l=e,s=o,s){case 0:case 1:throw Error(p(345));case 4:if((t&4194048)!==t)break;case 6:Ho(l,t,hi,!Uo);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(p(329))}if((t&62914560)===t&&(o=Gc+300-me(),10<o)){if(Ho(l,t,hi,!Uo),kn(l,0,!0)!==0)break e;no=t,l.timeoutHandle=kp(Jf.bind(null,l,n,ni,Lc,iu,t,hi,zs,er,Uo,s,"Throttled",-0,0),o);break e}Jf(l,n,ni,Lc,iu,t,hi,zs,er,Uo,s,null,-0,0)}}break}while(!0);ba(e)}function Jf(e,t,n,l,o,s,h,w,N,K,be,Ce,le,se){if(e.timeoutHandle=-1,Ce=t.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:En},Xf(t,s,Ce);var et=(s&62914560)===s?Gc-me():(s&4194048)===s?qf-me():0;if(et=wg(Ce,et),et!==null){no=s,e.cancelPendingCommit=et(sp.bind(null,e,t,s,n,l,o,h,w,N,be,Ce,null,le,se)),Ho(e,s,h,!K);return}}sp(e,t,s,n,l,o,h,w,N)}function Eh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],s=o.getSnapshot;o=o.value;try{if(!Bn(s(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ho(e,t,n,l){t&=~lu,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var s=31-Pn(o),h=1<<s;l[s]=-1,o&=~h}n!==0&&Qn(e,n,t)}function qc(){return(nn&6)===0?(oc(0),!1):!0}function ru(){if($t!==null){if(sn===0)var e=$t.return;else e=$t,Ul=zi=null,S(e),da=null,Xa=0,e=$t;for(;e!==null;)Af(e.alternate,e),e=e.return;$t=null}}function nr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,ig(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),no=0,ru(),hn=e,$t=n=wl(e.current,null),Ft=t,sn=0,pi=null,Uo=!1,Js=ma(e,t),nu=!1,er=hi=lu=zs=Bo=_n=0,ni=ic=null,iu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-Pn(l),s=1<<o;t|=e[o],l&=~s}return to=t,Ws(),n}function ep(e,t){kt=null,_.H=Zr,t===Co||t===Ya?(t=Fs(),sn=3):t===Wr?(t=Fs(),sn=4):sn=t===$d?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,pi=t,$t===null&&(_n=1,Ec(e,jl(t,e.current)))}function tp(){var e=dl.current;return e===null?!0:(Ft&4194048)===Ft?zl===null:(Ft&62914560)===Ft||(Ft&536870912)!==0?e===zl:!1}function np(){var e=_.H;return _.H=Zr,e===null?Zr:e}function lp(){var e=_.A;return _.A=Oh,e}function Zc(){_n=4,Uo||(Ft&4194048)!==Ft&&dl.current!==null||(Js=!0),(Bo&134217727)===0&&(zs&134217727)===0||hn===null||Ho(hn,Ft,hi,!1)}function cu(e,t,n){var l=nn;nn|=2;var o=np(),s=lp();(hn!==e||Ft!==t)&&(Lc=null,nr(e,t)),t=!1;var h=_n;e:do try{if(sn!==0&&$t!==null){var w=$t,N=pi;switch(sn){case 8:ru(),h=6;break e;case 3:case 2:case 9:case 6:dl.current===null&&(t=!0);var K=sn;if(sn=0,pi=null,lr(e,w,N,K),n&&Js){h=0;break e}break;default:K=sn,sn=0,pi=null,lr(e,w,N,K)}}Vh(),h=_n;break}catch(be){ep(e,be)}while(!0);return t&&e.shellSuspendCounter++,Ul=zi=null,nn=l,_.H=o,_.A=s,$t===null&&(hn=null,Ft=0,Ws()),h}function Vh(){for(;$t!==null;)ip($t)}function $h(e,t){var n=nn;nn|=2;var l=np(),o=lp();hn!==e||Ft!==t?(Lc=null,Fc=me()+500,nr(e,t)):Js=ma(e,t);e:do try{if(sn!==0&&$t!==null){t=$t;var s=pi;t:switch(sn){case 1:sn=0,pi=null,lr(e,t,s,1);break;case 2:case 9:if(Uc(s)){sn=0,pi=null,ap(t);break}t=function(){sn!==2&&sn!==9||hn!==e||(sn=7),ba(e)},s.then(t,t);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:Uc(s)?(sn=0,pi=null,ap(t)):(sn=0,pi=null,lr(e,t,s,7));break;case 5:var h=null;switch($t.tag){case 26:h=$t.memoizedState;case 5:case 27:var w=$t;if(h?Wp(h):w.stateNode.complete){sn=0,pi=null;var N=w.sibling;if(N!==null)$t=N;else{var K=w.return;K!==null?($t=K,Qc(K)):$t=null}break t}}sn=0,pi=null,lr(e,t,s,5);break;case 6:sn=0,pi=null,lr(e,t,s,6);break;case 8:ru(),_n=6;break e;default:throw Error(p(462))}}Ih();break}catch(be){ep(e,be)}while(!0);return Ul=zi=null,_.H=l,_.A=o,nn=n,$t!==null?0:(hn=null,Ft=0,Ws(),_n)}function Ih(){for(;$t!==null&&!Ut();)ip($t)}function ip(e){var t=Df(e.alternate,e,to);e.memoizedProps=e.pendingProps,t===null?Qc(e):$t=t}function ap(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=wf(n,t,t.pendingProps,t.type,void 0,Ft);break;case 11:t=wf(n,t,t.pendingProps,t.type.render,t.ref,Ft);break;case 5:S(t);default:Af(n,t),t=$t=fs(t,to),t=Df(n,t,to)}e.memoizedProps=e.pendingProps,t===null?Qc(e):$t=t}function lr(e,t,n,l){Ul=zi=null,S(t),da=null,Xa=0;var o=t.return;try{if(kh(e,o,t,n,Ft)){_n=1,Ec(e,jl(n,e.current)),$t=null;return}}catch(s){if(o!==null)throw $t=o,s;_n=1,Ec(e,jl(n,e.current)),$t=null;return}t.flags&32768?(Tt||l===1?e=!0:Js||(Ft&536870912)!==0?e=!1:(Uo=e=!0,(l===2||l===9||l===3||l===6)&&(l=dl.current,l!==null&&l.tag===13&&(l.flags|=16384))),op(t,e)):Qc(t)}function Qc(e){var t=e;do{if((t.flags&32768)!==0){op(t,Uo);return}e=t.return;var n=Mh(t.alternate,t,to);if(n!==null){$t=n;return}if(t=t.sibling,t!==null){$t=t;return}$t=t=e}while(t!==null);_n===0&&(_n=5)}function op(e,t){do{var n=Uh(e.alternate,e);if(n!==null){n.flags&=32767,$t=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){$t=e;return}$t=e=n}while(e!==null);_n=6,$t=null}function sp(e,t,n,l,o,s,h,w,N){e.cancelPendingCommit=null;do Kc();while(el!==0);if((nn&6)!==0)throw Error(p(327));if(t!==null){if(t===e.current)throw Error(p(177));if(s=t.lanes|t.childLanes,s|=Dt,gl(e,n,s,h,w,N),e===hn&&($t=hn=null,Ft=0),tr=t,Oo=e,no=n,au=s,ou=o,Zf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Xh(jt,function(){return fp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,o=ne.p,ne.p=2,h=nn,nn|=4;try{Bh(e,t,n)}finally{nn=h,ne.p=o,_.T=l}}el=1,rp(),cp(),dp()}}function rp(){if(el===1){el=0;var e=Oo,t=tr,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=_.T,_.T=null;var l=ne.p;ne.p=2;var o=nn;nn|=4;try{Pf(t,e);var s=Su,h=as(e.containerInfo),w=s.focusedElem,N=s.selectionRange;if(h!==w&&w&&w.ownerDocument&&Cc(w.ownerDocument.documentElement,w)){if(N!==null&&os(w)){var K=N.start,be=N.end;if(be===void 0&&(be=K),"selectionStart"in w)w.selectionStart=K,w.selectionEnd=Math.min(be,w.value.length);else{var Ce=w.ownerDocument||document,le=Ce&&Ce.defaultView||window;if(le.getSelection){var se=le.getSelection(),et=w.textContent.length,gt=Math.min(N.start,et),fn=N.end===void 0?gt:Math.min(N.end,et);!se.extend&&gt>fn&&(h=fn,fn=gt,gt=h);var I=_r(w,gt),O=_r(w,fn);if(I&&O&&(se.rangeCount!==1||se.anchorNode!==I.node||se.anchorOffset!==I.offset||se.focusNode!==O.node||se.focusOffset!==O.offset)){var Q=Ce.createRange();Q.setStart(I.node,I.offset),se.removeAllRanges(),gt>fn?(se.addRange(Q),se.extend(O.node,O.offset)):(Q.setEnd(O.node,O.offset),se.addRange(Q))}}}}for(Ce=[],se=w;se=se.parentNode;)se.nodeType===1&&Ce.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<Ce.length;w++){var Se=Ce[w];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}dd=!!mu,Su=mu=null}finally{nn=o,ne.p=l,_.T=n}}e.current=t,el=2}}function cp(){if(el===2){el=0;var e=Oo,t=tr,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=_.T,_.T=null;var l=ne.p;ne.p=2;var o=nn;nn|=4;try{Hf(e,t.alternate,t)}finally{nn=o,ne.p=l,_.T=n}}el=3}}function dp(){if(el===4||el===3){el=0,bt();var e=Oo,t=tr,n=no,l=Zf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?el=5:(el=0,tr=Oo=null,up(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(_o=null),pr(n),t=t.stateNode,In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=_.T,o=ne.p,ne.p=2,_.T=null;try{for(var s=e.onRecoverableError,h=0;h<l.length;h++){var w=l[h];s(w.value,{componentStack:w.stack})}}finally{_.T=t,ne.p=o}}(no&3)!==0&&Kc(),ba(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===su?ac++:(ac=0,su=e):ac=0,oc(0)}}function up(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,$a(t)))}function Kc(){return rp(),cp(),dp(),fp()}function fp(){if(el!==5)return!1;var e=Oo,t=au;au=0;var n=pr(no),l=_.T,o=ne.p;try{ne.p=32>n?32:n,_.T=null,n=ou,ou=null;var s=Oo,h=no;if(el=0,tr=Oo=null,no=0,(nn&6)!==0)throw Error(p(331));var w=nn;if(nn|=4,Ff(s.current),Wf(s,s.current,h,n),nn=w,oc(0,!1),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(yi,s)}catch{}return!0}finally{ne.p=o,_.T=l,up(e,t)}}function pp(e,t,n){t=jl(n,t),t=Vd(e.stateNode,t,2),e=ua(e,t,2),e!==null&&(lt(e,2),ba(e))}function rn(e,t,n){if(e.tag===3)pp(e,e,n);else for(;t!==null;){if(t.tag===3){pp(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(_o===null||!_o.has(l))){e=jl(n,e),n=hf(2),l=ua(t,n,2),l!==null&&(gf(n,l,t,e),lt(l,2),ba(l));break}}t=t.return}}function du(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new Hh;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(nu=!0,o.add(n),e=Ph.bind(null,e,t,n),t.then(e,e))}function Ph(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,hn===e&&(Ft&n)===n&&(_n===4||_n===3&&(Ft&62914560)===Ft&&300>me()-Gc?(nn&2)===0&&nr(e,0):lu|=n,er===Ft&&(er=0)),ba(e)}function hp(e,t){t===0&&(t=Rs()),e=Yl(e,t),e!==null&&(lt(e,t),ba(e))}function Yh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hp(e,n)}function Wh(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(p(314))}l!==null&&l.delete(t),hp(e,n)}function Xh(e,t){return Oe(e,t)}var Jc=null,ir=null,uu=!1,ed=!1,fu=!1,Eo=0;function ba(e){e!==ir&&e.next===null&&(ir===null?Jc=ir=e:ir=ir.next=e),ed=!0,uu||(uu=!0,Fh())}function oc(e,t){if(!fu&&ed){fu=!0;do for(var n=!1,l=Jc;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var s=0;else{var h=l.suspendedLanes,w=l.pingedLanes;s=(1<<31-Pn(42|e)+1)-1,s&=o&~(h&~w),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,bp(l,s))}else s=Ft,s=kn(l,l===hn?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||ma(l,s)||(n=!0,bp(l,s));l=l.next}while(n);fu=!1}}function Gh(){gp()}function gp(){ed=uu=!1;var e=0;Eo!==0&&lg()&&(e=Eo);for(var t=me(),n=null,l=Jc;l!==null;){var o=l.next,s=xp(l,t);s===0?(l.next=null,n===null?Jc=o:n.next=o,o===null&&(ir=n)):(n=l,(e!==0||(s&3)!==0)&&(ed=!0)),l=o}el!==0&&el!==5||oc(e),Eo!==0&&(Eo=0)}function xp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var h=31-Pn(s),w=1<<h,N=o[h];N===-1?((w&n)===0||(w&l)!==0)&&(o[h]=ur(w,t)):N<=t&&(e.expiredLanes|=w),s&=~w}if(t=hn,n=Ft,n=kn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(sn===2||sn===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&ut(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ma(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&ut(l),pr(n)){case 2:case 8:n=Et;break;case 32:n=jt;break;case 268435456:n=pl;break;default:n=jt}return l=yp.bind(null,e),n=Oe(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&ut(l),e.callbackPriority=2,e.callbackNode=null,2}function yp(e,t){if(el!==0&&el!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Kc()&&e.callbackNode!==n)return null;var l=Ft;return l=kn(e,e===hn?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Kf(e,l,t),xp(e,me()),e.callbackNode!=null&&e.callbackNode===n?yp.bind(null,e):null)}function bp(e,t){if(Kc())return null;Kf(e,t,!0)}function Fh(){ag(function(){(nn&6)!==0?Oe($e,Gh):gp()})}function pu(){if(Eo===0){var e=jo;e===0&&(e=Fi,Fi<<=1,(Fi&261888)===0&&(Fi=256)),Eo=e}return Eo}function vp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rt(""+e)}function mp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Lh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var s=vp((o[vn]||null).action),h=l.submitter;h&&(t=(t=h[vn]||null)?vp(t.formAction):h.getAttribute("formAction"),t!==null&&(s=t,h=null));var w=new Ta("action","action",null,l,o);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Eo!==0){var N=h?mp(o,h):new FormData(o);Ud(n,{pending:!0,data:N,method:o.method,action:s},null,N)}}else typeof s=="function"&&(w.preventDefault(),N=h?mp(o,h):new FormData(o),Ud(n,{pending:!0,data:N,method:o.method,action:s},s,N))},currentTarget:o}]})}}for(var hu=0;hu<Pl.length;hu++){var gu=Pl[hu],qh=gu.toLowerCase(),Zh=gu[0].toUpperCase()+gu.slice(1);ml(qh,"on"+Zh)}ml(Nl,"onAnimationEnd"),ml(Ys,"onAnimationIteration"),ml(si,"onAnimationStart"),ml("dblclick","onDoubleClick"),ml("focusin","onFocus"),ml("focusout","onBlur"),ml(Or,"onTransitionRun"),ml(Ti,"onTransitionStart"),ml(Hr,"onTransitionCancel"),ml(ri,"onTransitionEnd"),An("onMouseEnter",["mouseout","mouseover"]),An("onMouseLeave",["mouseout","mouseover"]),An("onPointerEnter",["pointerout","pointerover"]),An("onPointerLeave",["pointerout","pointerover"]),wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sc));function Sp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var h=l.length-1;0<=h;h--){var w=l[h],N=w.instance,K=w.currentTarget;if(w=w.listener,N!==s&&o.isPropagationStopped())break e;s=w,o.currentTarget=K;try{s(o)}catch(be){ci(be)}o.currentTarget=null,s=N}else for(h=0;h<l.length;h++){if(w=l[h],N=w.instance,K=w.currentTarget,w=w.listener,N!==s&&o.isPropagationStopped())break e;s=w,o.currentTarget=K;try{s(o)}catch(be){ci(be)}o.currentTarget=null,s=N}}}}function It(e,t){var n=t[As];n===void 0&&(n=t[As]=new Set);var l=e+"__bubble";n.has(l)||(wp(t,e,2,!1),n.add(l))}function xu(e,t,n){var l=0;t&&(l|=4),wp(n,e,l,t)}var td="_reactListening"+Math.random().toString(36).slice(2);function yu(e){if(!e[td]){e[td]=!0,Sc.forEach(function(n){n!=="selectionchange"&&(Qh.has(n)||xu(n,!1,e),xu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[td]||(t[td]=!0,xu("selectionchange",!1,t))}}function wp(e,t,n,l){switch(Qp(t)){case 2:var o=Cg;break;case 8:o=zg;break;default:o=Mu}n=o.bind(null,t,n,e),o=void 0,!tl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function bu(e,t,n,l,o){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var w=l.stateNode.containerInfo;if(w===o)break;if(h===4)for(h=l.return;h!==null;){var N=h.tag;if((N===3||N===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;w!==null;){if(h=Sa(w),h===null)return;if(N=h.tag,N===5||N===6||N===26||N===27){l=s=h;continue e}w=w.parentNode}}l=l.return}bl(function(){var K=s,be=Ui(n),Ce=[];e:{var le=cs.get(e);if(le!==void 0){var se=Ta,et=e;switch(e){case"keypress":if(Vn(n)===0)break e;case"keydown":case"keyup":se=kd;break;case"focusin":et="focus",se=$l;break;case"focusout":et="blur",se=$l;break;case"beforeblur":case"afterblur":se=$l;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Zi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Qi;break;case Nl:case Ys:case si:se=Lo;break;case ri:se=Es;break;case"scroll":case"scrollend":se=Sr;break;case"wheel":se=Ra;break;case"copy":case"cut":case"paste":se=Os;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=ii;break;case"toggle":case"beforetoggle":se=kl}var gt=(t&4)!==0,fn=!gt&&(e==="scroll"||e==="scrollend"),I=gt?le!==null?le+"Capture":null:le;gt=[];for(var O=K,Q;O!==null;){var Se=O;if(Q=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||Q===null||I===null||(Se=Bi(O,I),Se!=null&&gt.push(rc(O,Se,Q))),fn)break;O=O.return}0<gt.length&&(le=new se(le,et,null,n,be),Ce.push({event:le,listeners:gt}))}}if((t&7)===0){e:{if(le=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",le&&n!==yl&&(et=n.relatedTarget||n.fromElement)&&(Sa(et)||et[ol]))break e;if((se||le)&&(le=be.window===be?be:(le=be.ownerDocument)?le.defaultView||le.parentWindow:window,se?(et=n.relatedTarget||n.toElement,se=K,et=et?Sa(et):null,et!==null&&(fn=B(et),gt=et.tag,et!==fn||gt!==5&&gt!==27&&gt!==6)&&(et=null)):(se=null,et=K),se!==et)){if(gt=Oi,Se="onMouseLeave",I="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(gt=ii,Se="onPointerLeave",I="onPointerEnter",O="pointer"),fn=se==null?le:Ns(se),Q=et==null?le:Ns(et),le=new gt(Se,O+"leave",se,n,be),le.target=fn,le.relatedTarget=Q,Se=null,Sa(be)===K&&(gt=new gt(I,O+"enter",et,n,be),gt.target=Q,gt.relatedTarget=fn,Se=gt),fn=Se,se&&et)t:{for(gt=Kh,I=se,O=et,Q=0,Se=I;Se;Se=gt(Se))Q++;Se=0;for(var dt=O;dt;dt=gt(dt))Se++;for(;0<Q-Se;)I=gt(I),Q--;for(;0<Se-Q;)O=gt(O),Se--;for(;Q--;){if(I===O||O!==null&&I===O.alternate){gt=I;break t}I=gt(I),O=gt(O)}gt=null}else gt=null;se!==null&&jp(Ce,le,se,gt,!1),et!==null&&fn!==null&&jp(Ce,fn,et,gt,!0)}}e:{if(le=K?Ns(K):window,se=le.nodeName&&le.nodeName.toLowerCase(),se==="select"||se==="input"&&le.type==="file")var Kt=ka;else if(Nr(le))if(xo)Kt=ns;else{Kt=es;var nt=Br}else se=le.nodeName,!se||se.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?K&&Bs(K.elementType)&&(Kt=ka):Kt=ts;if(Kt&&(Kt=Kt(e,K))){Mr(Ce,Kt,n,be);break e}nt&&nt(e,le,K),e==="focusout"&&K&&le.type==="number"&&K.memoizedProps.value!=null&&yr(le,"number",le.value)}switch(nt=K?Ns(K):window,e){case"focusin":(Nr(nt)||nt.contentEditable==="true")&&(Na=nt,Ps=K,ta=null);break;case"focusout":ta=Ps=Na=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,ss(Ce,n,be);break;case"selectionchange":if(zc)break;case"keydown":case"keyup":ss(Ce,n,be)}var _t;if(ji)e:{switch(e){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else rl?Rr(e,n)&&(Lt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Lt="onCompositionStart");Lt&&(Tc&&n.locale!=="ko"&&(rl||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&rl&&(_t=mr()):(mn=be,Fo="value"in mn?mn.value:mn.textContent,rl=!0)),nt=nd(K,Lt),0<nt.length&&(Lt=new fo(Lt,e,null,n,be),Ce.push({event:Lt,listeners:nt}),_t?Lt.data=_t:(_t=dn(n),_t!==null&&(Lt.data=_t)))),(_t=ai?Dr(e,n):kr(e,n))&&(Lt=nd(K,"onBeforeInput"),0<Lt.length&&(nt=new fo("onBeforeInput","beforeinput",null,n,be),Ce.push({event:nt,listeners:Lt}),nt.data=_t)),Lh(Ce,e,K,n,be)}Sp(Ce,t)})}function rc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nd(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=Bi(e,n),o!=null&&l.unshift(rc(e,o,s)),o=Bi(e,t),o!=null&&l.push(rc(e,o,s))),e.tag===3)return l;e=e.return}return[]}function Kh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jp(e,t,n,l,o){for(var s=t._reactName,h=[];n!==null&&n!==l;){var w=n,N=w.alternate,K=w.stateNode;if(w=w.tag,N!==null&&N===l)break;w!==5&&w!==26&&w!==27||K===null||(N=K,o?(K=Bi(n,s),K!=null&&h.unshift(rc(n,K,N))):o||(K=Bi(n,s),K!=null&&h.push(rc(n,K,N)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var Jh=/\r\n?/g,eg=/\u0000|\uFFFD/g;function Tp(e){return(typeof e=="string"?e:""+e).replace(Jh,`
`).replace(eg,"")}function Cp(e,t){return t=Tp(t),Tp(e)===t}function un(e,t,n,l,o,s){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||mi(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&mi(e,""+l);break;case"className":vt(e,"class",l);break;case"tabIndex":vt(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":vt(e,n,l);break;case"style":oo(e,l,s);break;case"data":if(t!=="object"){vt(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Rt(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&un(e,t,"name",o.name,o,null),un(e,t,"formEncType",o.formEncType,o,null),un(e,t,"formMethod",o.formMethod,o,null),un(e,t,"formTarget",o.formTarget,o,null)):(un(e,t,"encType",o.encType,o,null),un(e,t,"method",o.method,o,null),un(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Rt(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=En);break;case"onScroll":l!=null&&It("scroll",e);break;case"onScrollEnd":l!=null&&It("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(p(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(p(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=Rt(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":It("beforetoggle",e),It("toggle",e),Xo(e,"popover",l);break;case"xlinkActuate":Bt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Bt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Bt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Bt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Bt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Bt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Bt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Bt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Bt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xo(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Rd.get(n)||n,Xo(e,n,l))}}function vu(e,t,n,l,o,s){switch(n){case"style":oo(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(p(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(p(60));e.innerHTML=n}}break;case"children":typeof l=="string"?mi(e,l):(typeof l=="number"||typeof l=="bigint")&&mi(e,""+l);break;case"onScroll":l!=null&&It("scroll",e);break;case"onScrollEnd":l!=null&&It("scrollend",e);break;case"onClick":l!=null&&(e.onclick=En);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xr.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),s=e[vn]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,o),typeof l=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Xo(e,n,l)}}}function fl(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",e),It("load",e);var l=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(p(137,t));default:un(e,t,s,h,n,null)}}o&&un(e,t,"srcSet",n.srcSet,n,null),l&&un(e,t,"src",n.src,n,null);return;case"input":It("invalid",e);var w=s=h=o=null,N=null,K=null;for(l in n)if(n.hasOwnProperty(l)){var be=n[l];if(be!=null)switch(l){case"name":o=be;break;case"type":h=be;break;case"checked":N=be;break;case"defaultChecked":K=be;break;case"value":s=be;break;case"defaultValue":w=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(p(137,t));break;default:un(e,t,l,be,n,null)}}ja(e,s,w,N,K,h,o,!1);return;case"select":It("invalid",e),l=h=s=null;for(o in n)if(n.hasOwnProperty(o)&&(w=n[o],w!=null))switch(o){case"value":s=w;break;case"defaultValue":h=w;break;case"multiple":l=w;default:un(e,t,o,w,n,null)}t=s,n=h,e.multiple=!!l,t!=null?Hn(e,!!l,t,!1):n!=null&&Hn(e,!!l,n,!0);return;case"textarea":It("invalid",e),s=o=l=null;for(h in n)if(n.hasOwnProperty(h)&&(w=n[h],w!=null))switch(h){case"value":l=w;break;case"defaultValue":o=w;break;case"children":s=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(p(91));break;default:un(e,t,h,w,n,null)}Us(e,l,o,s);return;case"option":for(N in n)if(n.hasOwnProperty(N)&&(l=n[N],l!=null))switch(N){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:un(e,t,N,l,n,null)}return;case"dialog":It("beforetoggle",e),It("toggle",e),It("cancel",e),It("close",e);break;case"iframe":case"object":It("load",e);break;case"video":case"audio":for(l=0;l<sc.length;l++)It(sc[l],e);break;case"image":It("error",e),It("load",e);break;case"details":It("toggle",e);break;case"embed":case"source":case"link":It("error",e),It("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in n)if(n.hasOwnProperty(K)&&(l=n[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(p(137,t));default:un(e,t,K,l,n,null)}return;default:if(Bs(t)){for(be in n)n.hasOwnProperty(be)&&(l=n[be],l!==void 0&&vu(e,t,be,l,n,void 0));return}}for(w in n)n.hasOwnProperty(w)&&(l=n[w],l!=null&&un(e,t,w,l,n,null))}function tg(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,h=null,w=null,N=null,K=null,be=null;for(se in n){var Ce=n[se];if(n.hasOwnProperty(se)&&Ce!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":N=Ce;default:l.hasOwnProperty(se)||un(e,t,se,null,l,Ce)}}for(var le in l){var se=l[le];if(Ce=n[le],l.hasOwnProperty(le)&&(se!=null||Ce!=null))switch(le){case"type":s=se;break;case"name":o=se;break;case"checked":K=se;break;case"defaultChecked":be=se;break;case"value":h=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(p(137,t));break;default:se!==Ce&&un(e,t,le,se,l,Ce)}}Tn(e,h,w,N,K,be,s,o);return;case"select":se=h=w=le=null;for(s in n)if(N=n[s],n.hasOwnProperty(s)&&N!=null)switch(s){case"value":break;case"multiple":se=N;default:l.hasOwnProperty(s)||un(e,t,s,null,l,N)}for(o in l)if(s=l[o],N=n[o],l.hasOwnProperty(o)&&(s!=null||N!=null))switch(o){case"value":le=s;break;case"defaultValue":w=s;break;case"multiple":h=s;default:s!==N&&un(e,t,o,s,l,N)}t=w,n=h,l=se,le!=null?Hn(e,!!n,le,!1):!!l!=!!n&&(t!=null?Hn(e,!!n,t,!0):Hn(e,!!n,n?[]:"",!1));return;case"textarea":se=le=null;for(w in n)if(o=n[w],n.hasOwnProperty(w)&&o!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:un(e,t,w,null,l,o)}for(h in l)if(o=l[h],s=n[h],l.hasOwnProperty(h)&&(o!=null||s!=null))switch(h){case"value":le=o;break;case"defaultValue":se=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(p(91));break;default:o!==s&&un(e,t,h,o,l,s)}Go(e,le,se);return;case"option":for(var et in n)if(le=n[et],n.hasOwnProperty(et)&&le!=null&&!l.hasOwnProperty(et))switch(et){case"selected":e.selected=!1;break;default:un(e,t,et,null,l,le)}for(N in l)if(le=l[N],se=n[N],l.hasOwnProperty(N)&&le!==se&&(le!=null||se!=null))switch(N){case"selected":e.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:un(e,t,N,le,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in n)le=n[gt],n.hasOwnProperty(gt)&&le!=null&&!l.hasOwnProperty(gt)&&un(e,t,gt,null,l,le);for(K in l)if(le=l[K],se=n[K],l.hasOwnProperty(K)&&le!==se&&(le!=null||se!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(p(137,t));break;default:un(e,t,K,le,l,se)}return;default:if(Bs(t)){for(var fn in n)le=n[fn],n.hasOwnProperty(fn)&&le!==void 0&&!l.hasOwnProperty(fn)&&vu(e,t,fn,void 0,l,le);for(be in l)le=l[be],se=n[be],!l.hasOwnProperty(be)||le===se||le===void 0&&se===void 0||vu(e,t,be,le,l,se);return}}for(var I in n)le=n[I],n.hasOwnProperty(I)&&le!=null&&!l.hasOwnProperty(I)&&un(e,t,I,null,l,le);for(Ce in l)le=l[Ce],se=n[Ce],!l.hasOwnProperty(Ce)||le===se||le==null&&se==null||un(e,t,Ce,le,l,se)}function zp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ng(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],s=o.transferSize,h=o.initiatorType,w=o.duration;if(s&&w&&zp(h)){for(h=0,w=o.responseEnd,l+=1;l<n.length;l++){var N=n[l],K=N.startTime;if(K>w)break;var be=N.transferSize,Ce=N.initiatorType;be&&zp(Ce)&&(N=N.responseEnd,h+=be*(N<w?1:(w-K)/(N-K)))}if(--l,t+=8*(s+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var mu=null,Su=null;function ld(e){return e.nodeType===9?e:e.ownerDocument}function Rp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function wu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ju=null;function lg(){var e=window.event;return e&&e.type==="popstate"?e===ju?!1:(ju=e,!0):(ju=null,!1)}var kp=typeof setTimeout=="function"?setTimeout:void 0,ig=typeof clearTimeout=="function"?clearTimeout:void 0,Ap=typeof Promise=="function"?Promise:void 0,ag=typeof queueMicrotask=="function"?queueMicrotask:typeof Ap<"u"?function(e){return Ap.resolve(null).then(e).catch(og)}:kp;function og(e){setTimeout(function(){throw e})}function Vo(e){return e==="head"}function Np(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),rr(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")cc(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,cc(n);for(var s=n.firstChild;s;){var h=s.nextSibling,w=s.nodeName;s[vi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=h}}else n==="body"&&cc(e.ownerDocument.body);n=o}while(n);rr(t)}function Mp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Tu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Tu(n),Li(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function sg(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[vi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Ni(e.nextSibling),e===null)break}return null}function rg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ni(e.nextSibling),e===null))return null;return e}function Up(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ni(e.nextSibling),e===null))return null;return e}function Cu(e){return e.data==="$?"||e.data==="$~"}function zu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function cg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Ni(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ru=null;function Bp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Ni(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function _p(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Op(e,t,n){switch(t=ld(n),e){case"html":if(e=t.documentElement,!e)throw Error(p(452));return e;case"head":if(e=t.head,!e)throw Error(p(453));return e;case"body":if(e=t.body,!e)throw Error(p(454));return e;default:throw Error(p(451))}}function cc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Li(e)}var Mi=new Map,Hp=new Set;function id(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var lo=ne.d;ne.d={f:dg,r:ug,D:fg,C:pg,L:hg,m:gg,X:yg,S:xg,M:bg};function dg(){var e=lo.f(),t=qc();return e||t}function ug(e){var t=io(e);t!==null&&t.tag===5&&t.type==="form"?Ju(t):lo.r(e)}var ar=typeof document>"u"?null:document;function Ep(e,t,n){var l=ar;if(l&&typeof t=="string"&&t){var o=xt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Hp.has(o)||(Hp.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),fl(t,"link",e),On(t),l.head.appendChild(t)))}}function fg(e){lo.D(e),Ep("dns-prefetch",e,null)}function pg(e,t){lo.C(e,t),Ep("preconnect",e,t)}function hg(e,t,n){lo.L(e,t,n);var l=ar;if(l&&e&&t){var o='link[rel="preload"][as="'+xt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+xt(n.imageSizes)+'"]')):o+='[href="'+xt(e)+'"]';var s=o;switch(t){case"style":s=or(e);break;case"script":s=sr(e)}Mi.has(s)||(e=P({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Mi.set(s,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(dc(s))||t==="script"&&l.querySelector(uc(s))||(t=l.createElement("link"),fl(t,"link",e),On(t),l.head.appendChild(t)))}}function gg(e,t){lo.m(e,t);var n=ar;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+xt(l)+'"][href="'+xt(e)+'"]',s=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=sr(e)}if(!Mi.has(s)&&(e=P({rel:"modulepreload",href:e},t),Mi.set(s,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(uc(s)))return}l=n.createElement("link"),fl(l,"link",e),On(l),n.head.appendChild(l)}}}function xg(e,t,n){lo.S(e,t,n);var l=ar;if(l&&e){var o=ao(l).hoistableStyles,s=or(e);t=t||"default";var h=o.get(s);if(!h){var w={loading:0,preload:null};if(h=l.querySelector(dc(s)))w.loading=5;else{e=P({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Mi.get(s))&&Du(e,n);var N=h=l.createElement("link");On(N),fl(N,"link",e),N._p=new Promise(function(K,be){N.onload=K,N.onerror=be}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ad(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:w},o.set(s,h)}}}function yg(e,t){lo.X(e,t);var n=ar;if(n&&e){var l=ao(n).hoistableScripts,o=sr(e),s=l.get(o);s||(s=n.querySelector(uc(o)),s||(e=P({src:e,async:!0},t),(t=Mi.get(o))&&ku(e,t),s=n.createElement("script"),On(s),fl(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function bg(e,t){lo.M(e,t);var n=ar;if(n&&e){var l=ao(n).hoistableScripts,o=sr(e),s=l.get(o);s||(s=n.querySelector(uc(o)),s||(e=P({src:e,async:!0,type:"module"},t),(t=Mi.get(o))&&ku(e,t),s=n.createElement("script"),On(s),fl(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function Vp(e,t,n,l){var o=(o=st.current)?id(o):null;if(!o)throw Error(p(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=or(n.href),n=ao(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=or(n.href);var s=ao(o).hoistableStyles,h=s.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,h),(s=o.querySelector(dc(e)))&&!s._p&&(h.instance=s,h.state.loading=5),Mi.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Mi.set(e,n),s||vg(o,e,n,h.state))),t&&l===null)throw Error(p(528,""));return h}if(t&&l!==null)throw Error(p(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=sr(n),n=ao(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(p(444,e))}}function or(e){return'href="'+xt(e)+'"'}function dc(e){return'link[rel="stylesheet"]['+e+"]"}function $p(e){return P({},e,{"data-precedence":e.precedence,precedence:null})}function vg(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),fl(t,"link",n),On(t),e.head.appendChild(t))}function sr(e){return'[src="'+xt(e)+'"]'}function uc(e){return"script[async]"+e}function Ip(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+xt(n.href)+'"]');if(l)return t.instance=l,On(l),l;var o=P({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),On(l),fl(l,"style",o),ad(l,n.precedence,e),t.instance=l;case"stylesheet":o=or(n.href);var s=e.querySelector(dc(o));if(s)return t.state.loading|=4,t.instance=s,On(s),s;l=$p(n),(o=Mi.get(o))&&Du(l,o),s=(e.ownerDocument||e).createElement("link"),On(s);var h=s;return h._p=new Promise(function(w,N){h.onload=w,h.onerror=N}),fl(s,"link",l),t.state.loading|=4,ad(s,n.precedence,e),t.instance=s;case"script":return s=sr(n.src),(o=e.querySelector(uc(s)))?(t.instance=o,On(o),o):(l=n,(o=Mi.get(s))&&(l=P({},n),ku(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),On(o),fl(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(p(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ad(l,n.precedence,e));return t.instance}function ad(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,s=o,h=0;h<l.length;h++){var w=l[h];if(w.dataset.precedence===t)s=w;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ku(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var od=null;function Pp(e,t,n){if(od===null){var l=new Map,o=od=new Map;o.set(n,l)}else o=od,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var s=n[o];if(!(s[vi]||s[Yn]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var h=s.getAttribute(t)||"";h=e+h;var w=l.get(h);w?w.push(s):l.set(h,[s])}}return l}function Yp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function mg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Wp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Sg(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=or(l.href),s=t.querySelector(dc(o));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=sd.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,On(s);return}s=t.ownerDocument||t,l=$p(l),(o=Mi.get(o))&&Du(l,o),s=s.createElement("link"),On(s);var h=s;h._p=new Promise(function(w,N){h.onload=w,h.onerror=N}),fl(s,"link",l),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=sd.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Au=0;function wg(e,t){return e.stylesheets&&e.count===0&&cd(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Au===0&&(Au=62500*ng());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&cd(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Au?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function sd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rd=null;function cd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rd=new Map,t.forEach(jg,e),rd=null,sd.call(e))}function jg(e,t){if(!(t.state.loading&4)){var n=rd.get(e);if(n)var l=n.get(null);else{n=new Map,rd.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var h=o[s];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),l=h)}l&&n.set(null,l)}o=t.instance,h=o.getAttribute("data-precedence"),s=n.get(h)||l,s===l&&n.set(null,o),n.set(h,o),this.count++,l=sd.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),s?s.parentNode.insertBefore(o,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var fc={$$typeof:k,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function Tg(e,t,n,l,o,s,h,w,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.hiddenUpdates=Ds(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Xp(e,t,n,l,o,s,h,w,N,K,be,Ce){return e=new Tg(e,t,n,h,N,K,be,Ce,w),t=1,s===!0&&(t|=24),s=cl(3,null,null,t),e.current=s,s.stateNode=e,t=wo(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:n,cache:t},Ga(s),e}function Gp(e){return e?(e=yo,e):yo}function Fp(e,t,n,l,o,s){o=Gp(o),l.context===null?l.context=o:l.pendingContext=o,l=Ri(t),l.payload={element:n},s=s===void 0?null:s,s!==null&&(l.callback=s),n=ua(e,l,t),n!==null&&(li(n,e,t),ws(n,e,t))}function Lp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nu(e,t){Lp(e,t),(e=e.alternate)&&Lp(e,t)}function qp(e){if(e.tag===13||e.tag===31){var t=Yl(e,67108864);t!==null&&li(t,e,67108864),Nu(e,67108864)}}function Zp(e){if(e.tag===13||e.tag===31){var t=gi();t=ks(t);var n=Yl(e,t);n!==null&&li(n,e,t),Nu(e,t)}}var dd=!0;function Cg(e,t,n,l){var o=_.T;_.T=null;var s=ne.p;try{ne.p=2,Mu(e,t,n,l)}finally{ne.p=s,_.T=o}}function zg(e,t,n,l){var o=_.T;_.T=null;var s=ne.p;try{ne.p=8,Mu(e,t,n,l)}finally{ne.p=s,_.T=o}}function Mu(e,t,n,l){if(dd){var o=Uu(l);if(o===null)bu(e,t,l,ud,n),Kp(e,l);else if(Dg(o,e,t,n,l))l.stopPropagation();else if(Kp(e,l),t&4&&-1<Rg.indexOf(e)){for(;o!==null;){var s=io(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var h=Le(s.pendingLanes);if(h!==0){var w=s;for(w.pendingLanes|=2,w.entangledLanes|=2;h;){var N=1<<31-Pn(h);w.entanglements[1]|=N,h&=~N}ba(s),(nn&6)===0&&(Fc=me()+500,oc(0))}}break;case 31:case 13:w=Yl(s,2),w!==null&&li(w,s,2),qc(),Nu(s,2)}if(s=Uu(l),s===null&&bu(e,t,l,ud,n),s===o)break;o=s}o!==null&&l.stopPropagation()}else bu(e,t,l,null,n)}}function Uu(e){return e=Ui(e),Bu(e)}var ud=null;function Bu(e){if(ud=null,e=Sa(e),e!==null){var t=B(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=L(t),e!==null)return e;e=null}else if(n===31){if(e=ge(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ud=e,null}function Qp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case $e:return 2;case Et:return 8;case jt:case qn:return 32;case pl:return 268435456;default:return 32}default:return 32}}var _u=!1,$o=null,Io=null,Po=null,pc=new Map,hc=new Map,Yo=[],Rg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kp(e,t){switch(e){case"focusin":case"focusout":$o=null;break;case"dragenter":case"dragleave":Io=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":pc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(t.pointerId)}}function gc(e,t,n,l,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[o]},t!==null&&(t=io(t),t!==null&&qp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Dg(e,t,n,l,o){switch(t){case"focusin":return $o=gc($o,e,t,n,l,o),!0;case"dragenter":return Io=gc(Io,e,t,n,l,o),!0;case"mouseover":return Po=gc(Po,e,t,n,l,o),!0;case"pointerover":var s=o.pointerId;return pc.set(s,gc(pc.get(s)||null,e,t,n,l,o)),!0;case"gotpointercapture":return s=o.pointerId,hc.set(s,gc(hc.get(s)||null,e,t,n,l,o)),!0}return!1}function Jp(e){var t=Sa(e.target);if(t!==null){var n=B(t);if(n!==null){if(t=n.tag,t===13){if(t=L(n),t!==null){e.blockedOn=t,al(e.priority,function(){Zp(n)});return}}else if(t===31){if(t=ge(n),t!==null){e.blockedOn=t,al(e.priority,function(){Zp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Uu(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);yl=l,n.target.dispatchEvent(l),yl=null}else return t=io(n),t!==null&&qp(t),e.blockedOn=n,!1;t.shift()}return!0}function eh(e,t,n){fd(e)&&n.delete(t)}function kg(){_u=!1,$o!==null&&fd($o)&&($o=null),Io!==null&&fd(Io)&&(Io=null),Po!==null&&fd(Po)&&(Po=null),pc.forEach(eh),hc.forEach(eh)}function pd(e,t){e.blockedOn===t&&(e.blockedOn=null,_u||(_u=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,kg)))}var hd=null;function th(e){hd!==e&&(hd=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){hd===e&&(hd=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(Bu(l||n)===null)continue;break}var s=io(n);s!==null&&(e.splice(t,3),t-=3,Ud(s,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function rr(e){function t(N){return pd(N,e)}$o!==null&&pd($o,e),Io!==null&&pd(Io,e),Po!==null&&pd(Po,e),pc.forEach(t),hc.forEach(t);for(var n=0;n<Yo.length;n++){var l=Yo[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Yo.length&&(n=Yo[0],n.blockedOn===null);)Jp(n),n.blockedOn===null&&Yo.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],s=n[l+1],h=o[vn]||null;if(typeof s=="function")h||th(n);else if(h){var w=null;if(s&&s.hasAttribute("formAction")){if(o=s,h=s[vn]||null)w=h.formAction;else if(Bu(o)!==null)continue}else w=h.action;typeof w=="function"?n[l+1]=w:(n.splice(l,3),l-=3),th(n)}}}function nh(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Ou(e){this._internalRoot=e}gd.prototype.render=Ou.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(p(409));var n=t.current,l=gi();Fp(n,l,e,t,null,null)},gd.prototype.unmount=Ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fp(e.current,2,null,e,null,null),qc(),t[ol]=null}};function gd(e){this._internalRoot=e}gd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yo.length&&t!==0&&t<Yo[n].priority;n++);Yo.splice(n,0,e),n===0&&Jp(e)}};var lh=u.version;if(lh!=="19.2.0")throw Error(p(527,lh,"19.2.0"));ne.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=H(t),e=e!==null?je(e):null,e=e===null?null:e.stateNode,e};var Ag={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{yi=xd.inject(Ag),In=xd}catch{}}return yc.createRoot=function(e,t){if(!d(e))throw Error(p(299));var n=!1,l="",o=df,s=uf,h=ff;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Xp(e,1,!1,null,null,n,l,null,o,s,h,nh),e[ol]=t.current,yu(e),new Ou(t)},yc.hydrateRoot=function(e,t,n){if(!d(e))throw Error(p(299));var l=!1,o="",s=df,h=uf,w=ff,N=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError),n.formState!==void 0&&(N=n.formState)),t=Xp(e,1,!0,t,n??null,l,o,N,s,h,w,nh),t.context=Gp(null),n=t.current,l=gi(),l=ks(l),o=Ri(l),o.callback=null,ua(n,o,l),n=l,t.current.lanes=n,lt(t,n),ba(t),e[ol]=t.current,yu(e),new gd(t)},yc.version="19.2.0",yc}var ph;function Ig(){if(ph)return Vu.exports;ph=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(u){console.error(u)}}return c(),Vu.exports=$g(),Vu.exports}var Pg=Ig();function Yg(c,u){return c?u?{minX:Math.min(c.minX,u.minX),minY:Math.min(c.minY,u.minY),maxX:Math.max(c.maxX,u.maxX),maxY:Math.max(c.maxY,u.maxY)}:c:u}function Wg(c,u,v,p,d,B,L,ge,F){const H=c/2,je=u/2,P=[{x:-H,y:-je},{x:H,y:-je},{x:H,y:je},{x:-H,y:je}],de=F*Math.PI/180,fe=Math.sin(de),Y=Math.cos(de);let q=1/0,_e=1/0,Ee=-1/0,E=-1/0;for(const k of P){const U=k.x*L,M=k.y*ge,T=U*Y-M*fe,g=U*fe+M*Y,W=v+d+T,we=p+B+g;W<q&&(q=W),we<_e&&(_e=we),W>Ee&&(Ee=W),we>E&&(E=we)}return{minX:q,minY:_e,maxX:Ee,maxY:E}}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gg=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,v,p)=>p?p.toUpperCase():v.toLowerCase()),hh=c=>{const u=Gg(c);return u.charAt(0).toUpperCase()+u.slice(1)},yh=(...c)=>c.filter((u,v,p)=>!!u&&u.trim()!==""&&p.indexOf(u)===v).join(" ").trim(),Fg=c=>{for(const u in c)if(u.startsWith("aria-")||u==="role"||u==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=C.forwardRef(({color:c="currentColor",size:u=24,strokeWidth:v=2,absoluteStrokeWidth:p,className:d="",children:B,iconNode:L,...ge},F)=>C.createElement("svg",{ref:F,...Lg,width:u,height:u,stroke:c,strokeWidth:p?Number(v)*24/Number(u):v,className:yh("lucide",d),...!B&&!Fg(ge)&&{"aria-hidden":"true"},...ge},[...L.map(([H,je])=>C.createElement(H,je)),...Array.isArray(B)?B:[B]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=(c,u)=>{const v=C.forwardRef(({className:p,...d},B)=>C.createElement(qg,{ref:B,iconNode:u,className:yh(`lucide-${Xg(hh(c))}`,`lucide-${c}`,p),...d}));return v.displayName=hh(c),v};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Qg=bh("mouse-pointer",Zg);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Jg=bh("pen-line",Kg),Sd="#2CA02C",vh="#F0E442",mh="#00BFC4",wd="#000000",Sh="#00008b",vc="#FF0000",wh={DEFAULT_SIZE:18},Cd={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},ex={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},jd={DEFAULT_SIZE:18},jh={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function en(c){return jh[c]?.validUnits||[]}function Qe(c){return jh[c]?.defaultUnit||""}let dr=1,Td=Promise.resolve(0);function xi(){let c;Td=Td.then(v=>(c=v+1,dr=c+1,c));const u=dr;return dr=u+1,u}function Yu(c){Td=Td.then(()=>(dr=c,c-1)),dr=c}function gh(){return dr}function tx(c="id"){return`${c}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function xh(c){return Math.round(c*1e4)/1e4}function ln(c){return{x:xh(c.x),y:xh(c.y)}}function nx(c){return Cd[c]?.defaultPins||2}function lx(c,u,v,p,d,B=wh.DEFAULT_SIZE){const L={id:tx("comp"),componentType:c,designator:"",layer:u,x:v,y:p,color:d,size:B,pinCount:nx(c),pinConnections:[],orientation:0};switch(L.pinConnections=new Array(L.pinCount).fill(""),(c==="Electrolytic Capacitor"||c==="Diode"||c==="Battery"||c==="ZenerDiode")&&(L.pinPolarities=new Array(L.pinCount).fill("")),c){case"Battery":return{...L,componentType:"Battery"};case"Capacitor":return{...L,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...L,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Diode":return{...L,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...L,componentType:"Fuse"};case"FerriteBead":return{...L,componentType:"FerriteBead"};case"Connector":return{...L,componentType:"Connector",gender:"N/A"};case"Jumper":return{...L,componentType:"Jumper"};case"Relay":return{...L,componentType:"Relay"};case"Inductor":return{...L,componentType:"Inductor"};case"Speaker":return{...L,componentType:"Speaker"};case"Motor":return{...L,componentType:"Motor"};case"PowerSupply":return{...L,componentType:"PowerSupply"};case"Transistor":return{...L,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...L,componentType:"Resistor"};case"ResistorNetwork":return{...L,componentType:"ResistorNetwork"};case"Thermistor":return{...L,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...L,componentType:"Switch"};case"Transformer":return{...L,componentType:"Transformer"};case"TestPoint":return{...L,componentType:"TestPoint"};case"IntegratedCircuit":return{...L,componentType:"IntegratedCircuit"};case"VacuumTube":return{...L,componentType:"VacuumTube"};case"VariableResistor":return{...L,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...L,componentType:"Crystal"};case"ZenerDiode":return{...L,componentType:"ZenerDiode"};default:return{...L,componentType:"Resistor"}}}function Wu(c,u,v){const p=c.componentType==="Electrolytic Capacitor"||c.componentType==="Diode"||c.componentType==="Battery"||c.componentType==="ZenerDiode",d=c.componentType==="Capacitor"&&"dielectric"in c&&c.dielectric==="Tantalum";if(!(p||d)||c.pinCount!==2||!(u.length===2&&u[0]&&u[0].trim()!==""&&u[1]&&u[1].trim()!==""))return null;const L=de=>{const fe=parseInt(de,10);if(isNaN(fe))return null;for(const Y of v)if((Y.type==="via"||Y.type==="pad")&&Y.points.length>0){const q=Y.points[0];if(q.id===fe)return{x:q.x,y:q.y}}return null},ge=L(u[0]),F=L(u[1]);if(!ge||!F)return null;const H=Math.hypot(c.x-ge.x,c.y-ge.y),je=Math.hypot(c.x-F.x,c.y-F.y),P=["",""];return H<je?(P[0]="-",P[1]="+"):(P[0]="+",P[1]="-"),P}class ix{parent=new Map;rank=new Map;find(u){return this.parent.has(u)?(this.parent.get(u)!==u&&this.parent.set(u,this.find(this.parent.get(u))),this.parent.get(u)):(this.parent.set(u,u),this.rank.set(u,0),u)}union(u,v){const p=this.find(u),d=this.find(v);if(p===d)return;const B=this.rank.get(p)||0,L=this.rank.get(d)||0;B<L?this.parent.set(p,d):B>L?this.parent.set(d,p):(this.parent.set(d,p),this.rank.set(p,B+1))}getGroups(){const u=new Map;for(const v of this.parent.keys()){const p=this.find(v);u.has(p)||u.set(p,[]),u.get(p).push(v)}return u}}function Th(c){if(!c)return"UNKNOWN";let u=c.trim();u=u.replace(/\s*(VDC|VAC)\s*$/i,""),u=u.replace(/\s*(DC|AC)\s*$/i,""),u=u.replace(/\s*V\s*$/i,"");const v=u.match(/^([+-])?/),p=v&&v[1]||"+",d=u.match(/(\d+\.?\d*)/);if(!d)return c.trim();let B=d[1];if(B.includes(".")){const L=B.split("."),ge=L[0],H=(L[1]||"0").replace(/0+$/,"")||"0";B=`${ge}V${H}`}return`${p}${B}V`}function ax(c,u,v,p,d){const B=new Map;let L=0,ge=0,F=0,H=0;for(const fe of c)if((fe.type==="via"||fe.type==="pad")&&fe.points.length>0){const Y=fe.points[0];if(Y.id!==void 0)if(!B.has(Y.id))B.set(Y.id,{id:Y.id,type:fe.type==="via"?"via":"pad",x:Y.x,y:Y.y}),fe.type==="via"?L++:ge++;else{const q=B.get(Y.id);q.type==="trace_point"&&(H++,q.type=fe.type==="via"?"via":"pad")}}else if(fe.type==="trace"){for(const Y of fe.points)if(Y.id!==void 0)if(!B.has(Y.id))B.set(Y.id,{id:Y.id,type:"trace_point",x:Y.x,y:Y.y}),F++;else{const q=B.get(Y.id);(q.type==="via"||q.type==="pad")&&H++}}console.log(`[Connectivity] Added ${L} vias, ${ge} pads, ${F} trace points to graph`),H>0&&console.log(`[Connectivity] Found ${H} nodes where vias/pads share Node IDs with trace points (automatic connection)`);for(const fe of v)if(fe.pointId!==void 0){const Y=d.find(q=>q.id===fe.powerBusId);B.set(fe.pointId,{id:fe.pointId,type:"power",x:fe.x,y:fe.y,voltage:Y?.voltage||fe.type||"UNKNOWN",powerBusId:fe.powerBusId})}for(const fe of p){const Y=fe;Y.pointId!==void 0&&B.set(Y.pointId,{id:Y.pointId,type:"ground",x:fe.x,y:fe.y})}let je=0,P=0,de=0;for(const fe of u){const Y=fe.abbreviation?.trim()||fe.designator?.trim();if(Y)for(let q=0;q<fe.pinCount;q++){const _e=fe.pinConnections?.[q]||"";if(_e&&_e.trim()!==""){const Ee=parseInt(_e.trim(),10);if(!isNaN(Ee)&&Ee>0)if(je++,!B.has(Ee))B.set(Ee,{id:Ee,type:"component_pin",x:fe.x,y:fe.y,componentId:fe.id,pinIndex:q}),de++,console.warn(`[Connectivity] Component ${Y} pin ${q+1}: Node ID ${Ee} does NOT exist in vias/pads/traces - creating isolated component pin node`);else{const E=B.get(Ee),k=E.type;E.componentId=fe.id,E.pinIndex=q,E.type="component_pin",P++,console.log(`[Connectivity] Component ${Y} pin ${q+1}: Connected to existing Node ID ${Ee} (was ${k})`)}}}}return console.log(`[Connectivity] Component pins: ${je} total, ${P} connected to existing nodes, ${de} isolated (no matching via/pad/trace)`),B}function ox(c,u){const v=new ix;let p=0,d=0;for(const[je,P]of u)c.has(je)&&c.has(P)?(v.union(je,P),p++):(c.has(je)||d++,c.has(P)||d++);console.log(`[Connectivity] Union-find: Processed ${u.length} connections, ${p} valid, ${d} missing nodes`);const B=[];for(const[je,P]of c)P.type==="ground"&&B.push(je);if(B.length>0)if(B.length>1){const je=B[0];for(let P=1;P<B.length;P++)v.union(je,B[P]);console.log(`[Connectivity] Unified ${B.length} ground nodes into a single net (common ground plane)`)}else console.log("[Connectivity] Found 1 ground node (common ground plane)");const L=new Map;for(const[je,P]of c)if(P.type==="power"&&P.voltage){const de=Th(P.voltage);L.has(de)||L.set(de,[]),L.get(de).push(je)}for(const[je,P]of L)if(P.length>0)if(P.length>1){const de=P[0];for(let fe=1;fe<P.length;fe++)v.union(de,P[fe]);console.log(`[Connectivity] Unified ${P.length} power nodes with voltage "${je}" into a single net (common power bus)`)}else console.log(`[Connectivity] Found 1 power node with voltage "${je}" (common power bus)`);for(const je of c.keys())v.find(je);const ge=v.getGroups(),F=new Map;console.log(`[Connectivity] Union-find created ${ge.size} net groups`);const H=new Map;for(const[,je]of ge){const P=je.length;H.set(P,(H.get(P)||0)+1)}console.log("[Connectivity] Net size distribution:",Array.from(H.entries()).sort((je,P)=>P[0]-je[0]).slice(0,10));for(const[je,P]of ge){const de=P.map(fe=>c.get(fe)).filter(fe=>fe!==void 0);F.set(je,de)}return F}function sx(c,u){const v=new Map;let p=1;for(const[d,B]of c){if(B.some(F=>F.type==="ground")){v.set(d,"GND"),console.log(`[NetNames] Net ${d}: Labeled as GND (contains ${B.filter(F=>F.type==="ground").length} ground node(s), ${B.filter(F=>F.type==="via"||F.type==="pad").length} via/pad node(s) sharing same Node ID)`);continue}const ge=B.filter(F=>F.type==="power");if(ge.length>0){const F=ge[0].voltage||"UNKNOWN",H=Th(F);v.set(d,H);const je=B.filter(P=>P.type==="via"||P.type==="pad").length;console.log(`[NetNames] Net ${d}: Labeled as ${H} (contains ${ge.length} power node(s), ${je} via/pad node(s) sharing same Node ID)`);continue}v.set(d,`N$${p++}`)}return v}function Fu(c){if(!c)return"UNKNOWN";let u=c.trim();u=u.replace(/\s*(VDC|VAC)\s*$/i,""),u=u.replace(/\s*(DC|AC)\s*$/i,""),u=u.replace(/\s*V\s*$/i,"");const v=u.match(/^([+-])?/),p=v&&v[1]||"+",d=u.match(/(\d+\.?\d*)/);if(!d)return c.trim();let B=d[1];if(B.includes(".")){const L=B.split("."),ge=L[0],H=(L[1]||"0").replace(/0+$/,"")||"0";B=`${ge}V${H}`}return`${p}${B}V`}function Xu(c){return Fu(c)}function yd(c,u,v,p){if(u==="power"){const B=c[u]||"";return typeof B=="string"&&B.trim()!==""?{value:B.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[u]!==void 0||c[v]!==void 0)return{value:c[u]||"",unit:c[v]||p};const d=c[u]||"";if(typeof d=="string"&&d.trim()!==""){const B=d.trim().match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(B)return{value:B[1],unit:B[2]||""};const L=d.trim().match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return L?{value:L[1],unit:L[2]||""}:{value:d.trim(),unit:""}}return{value:"",unit:p}}function bd(c,u){return!c||c.trim()===""?"":!u||u.trim()===""?c.trim():`${c.trim()}${u.trim()}`}function vd(c){return{resistance:"",capacitance:"F",inductance:"H",voltage:"V",current:"A",power:"W",impedance:"",capacity:"mAh",esr:"",coilVoltage:"V",inputVoltage:"V",outputVoltage:"V"}[c]||""}function rx(c){if(c.componentType==="Resistor"&&"resistance"in c){const{value:p,unit:d}=yd(c,"resistance","resistanceUnit",vd("resistance"));if(p&&p.trim()!=="")return bd(p,d)}if(c.componentType==="Capacitor"&&"capacitance"in c){const{value:p,unit:d}=yd(c,"capacitance","capacitanceUnit",vd("capacitance"));if(p&&p.trim()!=="")return bd(p,d)}if(c.componentType==="Electrolytic Capacitor"&&"capacitance"in c){const{value:p,unit:d}=yd(c,"capacitance","capacitanceUnit",vd("capacitance"));if(p&&p.trim()!=="")return bd(p,d)}if(c.componentType==="Inductor"&&"inductance"in c){const{value:p,unit:d}=yd(c,"inductance","inductanceUnit",vd("inductance"));if(p&&p.trim()!=="")return bd(p,d)}const u=c.partName?.trim();if(u&&u!=="")return u;const v=c.partNumber?.trim();return v&&v!==""?v:c.componentType}function Ch(c,u,v,p){const d=new Map;for(const P of u.keys())d.has(P)||d.set(P,new Set);for(const P of v)if(P.type==="trace"&&P.points.length>=2)for(let de=0;de<P.points.length-1;de++){const fe=P.points[de],Y=P.points[de+1];if(fe&&Y&&fe.id!==void 0&&fe.id!==null&&Y.id!==void 0&&Y.id!==null){const q=fe.id,_e=Y.id;u.has(q)&&u.has(_e)&&(d.has(q)||d.set(q,new Set),d.has(_e)||d.set(_e,new Set),d.get(q).add(_e),d.get(_e).add(q))}}const B=new Set,L=d.get(c);if(L)for(const P of L){const de=u.get(P);de&&de.type!=="trace_point"&&B.add(P)}const ge=[],F=u.get(c);if(F&&F.type==="component_pin"&&F.componentId&&F.pinIndex!==void 0){const P=p.get(F.componentId);P&&ge.push({designator:P,pin:(F.pinIndex||0)+1})}for(const P of B){const de=u.get(P);if(de&&de.type==="component_pin"&&de.componentId&&de.pinIndex!==void 0){const fe=p.get(de.componentId);fe&&ge.push({designator:fe,pin:(de.pinIndex||0)+1})}}const H=new Map;for(const P of ge){const de=`${P.designator}:${P.pin}`;H.has(de)||H.set(de,P)}const je=Array.from(H.values()).sort((P,de)=>P.designator!==de.designator?P.designator.localeCompare(de.designator):P.pin-de.pin);return{directNeighborIds:Array.from(B).sort((P,de)=>P-de),componentPins:je}}function cx(c,u,v,p){const d=u.get(c);if(!d)return!1;if(d.type==="component_pin")return!0;const{directNeighborIds:B}=Ch(c,u,v,p);for(const L of B){const ge=u.get(L);if(ge&&ge.type==="component_pin")return!0}return!1}function dx(c,u,v,p,d){const B=new Map;for(const ge of p){let F=ge.designator?.trim()||ge.abbreviation?.trim();F&&(F==="?"||F==="??"||F==="***"||F==="****"||F==="*")&&(F=""),F&&F.length>0&&B.set(ge.id,F)}const L=[];L.push("Node ID,Node Type,Connected Node IDs,Connected Components,Connected Component Pins");for(const[ge,F]of c){if(F.type==="trace_point"||!cx(ge,c,d,B))continue;let H;for(const[T,g]of u)if(g.some(W=>W.id===ge)){H=T;break}const je=H?u.get(H)||[]:[];let P;const de=je.some(T=>T.type==="ground"),fe=je.filter(T=>T.type==="power");if(F.type==="via"||F.type==="pad")if(de)P="Ground";else if(fe.length>0){const T=fe[0].voltage||"UNKNOWN";P=`Power ${Xu(T)}`}else P="Signal";else if(P=ux(F),de)P="Ground";else if(fe.length>0&&F.type==="component_pin"){const T=fe[0].voltage||"UNKNOWN";P=`Power ${Xu(T)}`}const Y=Ch(ge,c,d,B),q=Y.directNeighborIds,_e=Y.componentPins,Ee=Array.from(new Set(_e.map(T=>T.designator))).sort(),E=q.length>0?q.join(";"):"",k=Ee.length>0?Ee.join(";"):"",U=_e.length>0?_e.map(T=>`${T.designator}:${T.pin}`).join(";"):"",M=T=>T.includes(",")||T.includes('"')||T.includes(`
`)||T.includes(";")?`"${T.replace(/"/g,'""')}"`:T;L.push([ge.toString(),M(P),M(E),M(k),M(U)].join(","))}return L.join(`
`)}function ux(c){switch(c.type){case"via":return"via";case"pad":return"pad";case"trace_point":return"trace_point";case"ground":return"GND";case"power":return c.voltage?`Power ${Fu(c.voltage)}`:"Power";case"component_pin":return"component_pin";default:return"unknown"}}function fx(c,u,v,p,d){const B=ax(u,c,v,p,d),L=Array.from(B.values()).filter(te=>te.type==="component_pin");console.log(`[Schematic] Component pin nodes in graph: ${L.length}`),L.length>0&&console.log("[Schematic] Sample component pin nodes:",L.slice(0,5).map(te=>`Node ID ${te.id} (compId: ${te.componentId}, pinIndex: ${te.pinIndex})`));const ge=[];for(const te of u)if(te.type==="trace"&&te.points.length>=2)for(let xe=0;xe<te.points.length-1;xe++){const Te=te.points[xe],oe=te.points[xe+1];Te&&oe&&Te.id!==void 0&&oe.id!==void 0&&Te.id!==oe.id&&ge.push([Te.id,oe.id])}console.log(`[Schematic] Trace connections: ${ge.length} (connecting nodes with different Node IDs)`);const F=ox(B,ge),H=sx(F);console.log(`[Schematic] Net groups created: ${F.size}`),console.log(`
[Schematic Analysis] ========================================`),console.log("[Schematic Analysis] Starting comprehensive node tree analysis"),console.log("[Schematic Analysis] ========================================");const je=new Map;for(const te of c){let xe=te.designator?.trim()||te.abbreviation?.trim();xe&&(xe==="?"||xe==="??"||xe==="***"||xe==="****"||xe==="*")&&(xe=""),xe&&xe.length>0&&je.set(te.id,xe)}const P=[],de=new Map,fe=[];for(const[te,xe]of F){const Te=H.get(te)||`N$${te}`;if(xe.filter(Ue=>Ue.type==="ground").length>0){P.push({netId:te,nodeCount:xe.length,nodeIds:xe.map(Ue=>Ue.id)});continue}const Ze=xe.filter(Ue=>Ue.type==="power");if(Ze.length>0){const Ue=new Map;for(const Ae of Ze)if(Ae.voltage){const Be=Fu(Ae.voltage);Ue.has(Be)||Ue.set(Be,[]),Ue.get(Be).push(Ae)}for(const[Ae]of Ue)de.has(Ae)||de.set(Ae,[]),de.get(Ae).push({netId:te,nodeCount:xe.length,nodeIds:xe.map(Be=>Be.id)});continue}const ye=[];for(const Ue of xe)if(Ue.type==="component_pin"&&Ue.componentId&&Ue.pinIndex!==void 0){const Ae=je.get(Ue.componentId);Ae&&ye.push({designator:Ae,pin:(Ue.pinIndex||0)+1,nodeId:Ue.id})}(ye.length>0||xe.length>0)&&fe.push({netId:te,netName:Te,componentPins:ye,nodeCount:xe.length})}if(console.log(`
[Schematic Analysis] GROUND ANALYSIS:`),P.length===0)console.log("  No ground nets found");else if(P.length===1)console.log("   Single common ground plane identified"),console.log(`    - Net ID: ${P[0].netId}`),console.log(`    - Total nodes: ${P[0].nodeCount}`),console.log(`    - All ${P[0].nodeCount} ground points are connected`);else{console.log(`   WARNING: Multiple ground nets found (${P.length})`);for(const te of P)console.log(`    - Net ID ${te.netId}: ${te.nodeCount} nodes`);console.log("  Note: All ground points should be in a single net (common ground plane)")}if(console.log(`
[Schematic Analysis] POWER BUS ANALYSIS:`),de.size===0)console.log("  No power buses found");else{console.log(`   Found ${de.size} distinct power bus(es) by voltage:`);for(const[te,xe]of de)if(console.log(`
  Power Bus: ${te}`),xe.length===1)console.log(`    - Single net (Net ID: ${xe[0].netId})`),console.log(`    - Total nodes: ${xe[0].nodeCount}`),console.log(`    - All power nodes at ${te} are connected`);else{console.log(`    -  WARNING: ${te} appears in ${xe.length} separate nets:`);for(const Te of xe)console.log(`      * Net ID ${Te.netId}: ${Te.nodeCount} nodes`);console.log("    - Note: All power nodes with the same voltage should be in a single net")}}console.log(`
[Schematic Analysis] COMPONENT CONNECTIONS:`);const Y=new Map;for(const te of fe)for(const xe of te.componentPins)Y.has(xe.designator)||Y.set(xe.designator,[]),Y.get(xe.designator).push({pin:xe.pin,netName:te.netName,nodeId:xe.nodeId});if(console.log(`  Total components with connections: ${Y.size}`),Y.size>0){console.log("  Sample component connections (first 10):");let te=0;for(const[xe,Te]of Y){if(te++>=10)break;const oe=Te.map(Ze=>`pin${Ze.pin}${Ze.netName}`).join(", ");console.log(`    - ${xe}: ${Te.length} pins connected (${oe})`)}}console.log(`
[Schematic Analysis] SIGNAL NET SUMMARY:`);const q=fe.filter(te=>te.componentPins.length>0),_e=fe.filter(te=>te.componentPins.length>=2);if(console.log(`  - Total signal nets: ${fe.length}`),console.log(`  - Nets with component pins: ${q.length}`),console.log(`  - Nets with 2+ component pins: ${_e.length}`),console.log(`  - Isolated nets (no component pins): ${fe.length-q.length}`),_e.length>0){console.log(`
  Sample signal nets with 2+ pins (first 5):`);let te=0;for(const xe of _e){if(te++>=5)break;const Te=xe.componentPins.map(oe=>`${oe.designator}:pin${oe.pin}`).join(", ");console.log(`    - ${xe.netName}: ${xe.componentPins.length} pins (${Te})`)}}if(console.log(`
[Schematic Analysis] ========================================`),console.log("[Schematic Analysis] Analysis complete"),console.log(`[Schematic Analysis] ========================================
`),L.length>0){const te=[];for(const xe of L){let Te=!1;for(const[,oe]of F)if(oe.some(Ze=>Ze.id===xe.id)){Te=!0;break}if(!Te){const oe=c.find(ye=>ye.id===xe.componentId),Ze=oe&&(oe.abbreviation?.trim()||oe.designator?.trim())||"UNKNOWN";te.push({compId:xe.componentId||"unknown",designator:Ze,pinIndex:xe.pinIndex||0,nodeId:xe.id})}}if(te.length>0){console.warn(`[Schematic] Found ${te.length} isolated component pins (not in any net):`);for(const xe of te.slice(0,10))console.warn(`  - ${xe.designator} pin ${xe.pinIndex+1} at Node ID ${xe.nodeId}`)}else console.log("[Schematic] All component pins are in nets")}const Ee=new Map;for(const te of c){let xe=te.designator?.trim()||te.abbreviation?.trim();xe&&(xe==="?"||xe==="??"||xe==="***"||xe==="****"||xe==="*")&&(xe=""),xe&&xe.length>0?(Ee.set(te.id,xe),console.log(`[Schematic] Mapped component ${te.id} to designator "${xe}"`)):console.warn(`[Schematic] Component ${te.id} (type: ${te.componentType}) has no valid designator`)}console.log(`[Schematic] Component ID to designator map: ${Ee.size} components`);const E=[];let k=0,U=0;const M=new Map;for(const[te,xe]of F){k++;const Te=[];for(const oe of xe)oe.type==="component_pin"&&oe.componentId&&oe.pinIndex!==void 0&&(Te.push(oe),U++);Te.length>0&&M.set(te,Te)}for(const[te,xe]of F){const Te=H.get(te)||`N$${te}`,oe=[];let Ze=!1,ye=!1,Ue,Ae=0,Be=0;for(const Oe of xe)if(Oe.type==="component_pin"&&Oe.componentId&&Oe.pinIndex!==void 0){const ut=Ee.get(Oe.componentId);if(ut)oe.push({designator:ut,pin:(Oe.pinIndex||0)+1});else{const Ut=c.find(me=>me.id===Oe.componentId),bt=Ut?Ut.designator?.trim()||Ut.abbreviation?.trim()||"NONE":"NOT_FOUND";console.warn(`[Schematic] Component pin found but no designator in map for componentId: ${Oe.componentId}, component designator: "${bt}", node: Node ID ${Oe.id}, pinIndex: ${Oe.pinIndex}`)}}else if(Oe.type==="power"){Ze=!0;const ut=Oe.voltage||Ue||"";ut&&(Ue=Xu(ut))}else Oe.type==="ground"?ye=!0:Oe.type==="via"?Ae++:Oe.type==="trace_point"&&Be++;E.push({name:Te,componentPins:oe,hasPower:Ze,hasGround:ye,powerVoltage:Ue,viaCount:Ae,tracePointCount:Be})}console.log(`[Schematic] Total net groups: ${k}, Component pins found: ${U}`),console.log(`[Schematic] Nets with component pins: ${M.size}`),console.log(`[Schematic] Generated ${E.length} total nets (including power/ground and single-pin connections)`);const T=E.filter(te=>te.componentPins.length>=2).length,g=E.filter(te=>te.hasPower).length,W=E.filter(te=>te.hasGround).length;if(console.log(`[Schematic] - ${T} nets with 2+ component pins`),console.log(`[Schematic] - ${g} power nets`),console.log(`[Schematic] - ${W} ground nets`),M.size>0){console.log("[Schematic] Sample nets with component pins:");let te=0;for(const[xe,Te]of M){if(te++>=5)break;const oe=H.get(xe)||`N$${xe}`,Ze=Te.map(ye=>`${Ee.get(ye.componentId)||"unknown"}:pin${(ye.pinIndex||0)+1}@NodeID${ye.id}`);console.log(`  Net ${oe} (root Node ID ${xe}): ${Te.length} pins - ${Ze.join(", ")}`)}}E.length>0?console.log(`[Schematic] First net: ${E[0].name} with ${E[0].componentPins.length} pins:`,E[0].componentPins):(console.warn("[Schematic] No nets with 2+ component pins found! Each component pin is in its own net."),console.warn("[Schematic] This suggests component pins are not connected through traces/vias."));const we=new Map,tt=c.filter(te=>{let xe=te.designator?.trim()||te.abbreviation?.trim();return xe&&(xe==="?"||xe==="??"||xe==="***"||xe==="****"||xe==="*")&&(xe=""),!!xe&&xe.length>0}),Ke=()=>{const te=new Map;for(const xe of tt){const Te=xe.designator?.trim()||xe.abbreviation?.trim();Te&&Te.length>0&&te.set(Te,new Set)}for(const xe of E)if(xe.componentPins.length>=2){const Te=xe.componentPins.map(oe=>oe.designator);for(let oe=0;oe<Te.length;oe++)for(let Ze=oe+1;Ze<Te.length;Ze++){const ye=Te[oe],Ue=Te[Ze];te.has(ye)&&te.has(Ue)&&(te.get(ye).add(Ue),te.get(Ue).add(ye))}}return te},ke=te=>{const xe=new Map,Te=new Set;let oe=0;const Ze=(ye,Ue)=>{if(Te.has(ye))return;Te.add(ye),xe.set(ye,Ue);const Ae=te.get(ye);if(Ae)for(const Be of Ae)Te.has(Be)||Ze(Be,Ue)};for(const ye of te.keys())Te.has(ye)||Ze(ye,oe++);return xe},Ye=Ke(),Pt=ke(Ye),at=new Map;for(const te of Pt.values())at.set(te,(at.get(te)||0)+1);console.log(`[Schematic] Component clustering: ${at.size} functional blocks identified`);for(const[te,xe]of at)console.log(`  Cluster ${te}: ${xe} components`);let _=30,ne=30,Me=0,ie=0;if(tt.length>0){let te=1/0,xe=1/0,Te=-1/0,oe=-1/0;for(const qe of tt)te=Math.min(te,qe.x),xe=Math.min(xe,qe.y),Te=Math.max(Te,qe.x),oe=Math.max(oe,qe.y);const Ze=Te-te,ye=oe-xe,Ue=30,Ae=297-2*Ue,Be=420-2*Ue,Oe=Ze>0?Ae/Ze:.1,ut=ye>0?Be/ye:.1;let Ut=Math.min(Oe,ut);Ut=Math.max(.5,Math.min(Ut,2)),Me=Ze*Ut,ie=ye*Ut,_=Ue+(Ae-Me)/2,ne=Ue+(Be-ie)/2;for(const qe of tt){let $e=qe.designator?.trim()||qe.abbreviation?.trim();if($e&&($e==="?"||$e==="??"||$e==="***"||$e==="****"||$e==="*")&&($e=""),$e&&$e.length>0){const Et=(qe.x-te)*Ut+_,jt=(qe.y-xe)*Ut+ne;we.set($e,{comp:qe,designator:$e,x:Et,y:jt})}}console.log(`[Schematic] Component positioning: ${we.size} components`),console.log(`[Schematic] PCB bounds: ${te.toFixed(1)}, ${xe.toFixed(1)} to ${Te.toFixed(1)}, ${oe.toFixed(1)}`),console.log(`[Schematic] PCB size: ${Ze.toFixed(1)} x ${ye.toFixed(1)} pixels`),console.log(`[Schematic] Usable area: ${Ae.toFixed(1)} x ${Be.toFixed(1)} mm (A3 paper with ${Ue}mm margins)`),console.log(`[Schematic] Scale factor: ${Ut.toFixed(4)} (${(1/Ut).toFixed(2)} pixels per mm)`),console.log(`[Schematic] Scaled size: ${Me.toFixed(1)} x ${ie.toFixed(1)} mm`),console.log(`[Schematic] Schematic bounds: ${_.toFixed(1)}mm, ${ne.toFixed(1)}mm to ${(_+Me).toFixed(1)}mm, ${(ne+ie).toFixed(1)}mm`)}let m=`(kicad_sch (version 20201015) (generator simple_schematic)
`;m+=`  (paper "A3")
`,m+=`  (title_block
`,m+=`    (title "")
`,m+=`    (date "")
`,m+=`    (rev "")
`,m+=`    (company "")
`,m+=`  )
`,m+=`
`,m+=`  (lib_symbols
`,m+=`    (symbol "simple:Power" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,m+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,m+=`        (effects (font (size 1.27 1.27)) hide)
`,m+=`      )
`,m+=`      (symbol "Power_0_1"
`,m+=`        (polyline (pts (xy 0 0) (xy 0 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 0) (xy 1.27 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -0.635 -1.27) (xy 0.635 -1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -0.3175 -1.905) (xy 0.3175 -1.905)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Ground" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,m+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,m+=`        (effects (font (size 1.27 1.27)) hide)
`,m+=`      )
`,m+=`      (symbol "Ground_0_1"
`,m+=`        (polyline (pts (xy 0 0) (xy 0 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -2.54 -2.54) (xy 2.54 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 -3.81) (xy 1.27 -3.81)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -0.635 -4.445) (xy 0.635 -4.445)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Resistor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "R" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Resistor_0_1"
`,m+=`        (polyline (pts (xy -3.81 0) (xy -2.54 0) (xy -1.27 1.27) (xy 0 -1.27) (xy 1.27 1.27) (xy 2.54 -1.27) (xy 3.81 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -6.35 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 6.35 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Capacitor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "C" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Capacitor_0_1"
`,m+=`        (polyline (pts (xy 0 -2.54) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -2.54 -2.54) (xy -2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 2.54 -2.54) (xy 2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Diode" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "D" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Diode_0_1"
`,m+=`        (polyline (pts (xy -2.54 0) (xy 0 -2.54) (xy 0 2.54) (xy -2.54 0)) (stroke (width 0.254) (type default)) (fill (type background)))
`,m+=`        (polyline (pts (xy 0 -2.54) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Switch" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "SW" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Switch_0_1"
`,m+=`        (polyline (pts (xy -3.81 0) (xy -1.27 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 1.27 0) (xy 3.81 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 -1.27) (xy 1.27 1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Transistor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "Q" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Transistor_0_1"
`,m+=`        (polyline (pts (xy 0 -2.54) (xy 0 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -2.54 0) (xy 0 0) (xy 2.54 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 -1.27) (xy 0 -2.54) (xy 1.27 -1.27)) (stroke (width 0.254) (type default)) (fill (type background)))
`,m+=`        (pin passive line (at 0 -5.08 90) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at -3.81 0 0) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 3.81 0 180) (length 2.54)
`,m+=`          (name "3" (effects (font (size 1.27 1.27))))
`,m+=`          (number "3" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Inductor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "L" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Inductor_0_1"
`,m+=`        (arc (start -2.54 0) (mid -1.27 0) (end 0 0) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (arc (start 0 0) (mid 1.27 0) (end 2.54 0) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`,m+=`    (symbol "simple:Battery" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "B" (id 0) (at 0 3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "Battery_0_1"
`,m+=`        (polyline (pts (xy -3.81 -1.27) (xy -3.81 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy -1.27 -1.27) (xy -1.27 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 1.27 -1.27) (xy 1.27 1.27)) (stroke (width 0.508) (type default)) (fill (type none)))
`,m+=`        (polyline (pts (xy 3.81 -1.27) (xy 3.81 1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,m+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,m+=`          (name "1" (effects (font (size 1.27 1.27))))
`,m+=`          (number "1" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,m+=`          (name "2" (effects (font (size 1.27 1.27))))
`,m+=`          (number "2" (effects (font (size 1.27 1.27))))
`,m+=`        )
`,m+=`      )
`,m+=`    )
`;const D=(te,xe,Te=20)=>{const oe=te.includes(":")?te.split(":")[1]:te;m+=`    (symbol "${te}" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,m+=`      (property "Reference" "${xe}" (id 0) (at 0 2.54 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,m+=`        (effects (font (size 1.27 1.27)))
`,m+=`      )
`,m+=`      (symbol "${oe}_0_1"
`,m+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,m+=`          (stroke (width 0.254)) (fill (type background))
`,m+=`        )
`,m+=`      )
`;for(let Ze=1;Ze<=Te;Ze++){m+=`      (symbol "${oe}_1_${Ze}"
`;const ye=Math.ceil(Ze/2),Ue=Math.floor(Ze/2);for(let Ae=0;Ae<ye;Ae++){const Be=Ae+1,Oe=ye>1?-((ye-1)*2.54/2)+Ae*2.54:0;m+=`        (pin passive line (at ${-5.08} ${Oe} 0) (length 2.54)
`,m+=`          (name "${Be}" (effects (font (size 1.27 1.27))))
`,m+=`          (number "${Be}" (effects (font (size 1.27 1.27))))
`,m+=`        )
`}for(let Ae=0;Ae<Ue;Ae++){const Be=ye+Ae+1,Oe=Ue>1?-((Ue-1)*2.54/2)+Ae*2.54:0;m+=`        (pin passive line (at ${5.08} ${Oe} 180) (length 2.54)
`,m+=`          (name "${Be}" (effects (font (size 1.27 1.27))))
`,m+=`          (number "${Be}" (effects (font (size 1.27 1.27))))
`,m+=`        )
`}m+=`      )
`}m+=`    )
`};D("simple:IC","U",20),D("simple:Generic","REF",20),m+=`  )
`,m+=`
`;let X=1;const ue=()=>`00000000-0000-0000-0000-${String(X++).padStart(12,"0")}`,Ve=te=>{switch(te){case"Resistor":case"ResistorNetwork":case"VariableResistor":case"Thermistor":return"simple:Resistor";case"Capacitor":case"Electrolytic Capacitor":return"simple:Capacitor";case"Diode":case"ZenerDiode":return"simple:Diode";case"Switch":return"simple:Switch";case"Transistor":return"simple:Transistor";case"Inductor":return"simple:Inductor";case"Battery":return"simple:Battery";case"IntegratedCircuit":return"simple:IC";default:return"simple:Generic"}},Je=(te,xe)=>{if(!te.pinConnections||te.pinConnections.length===0)return 0;const Te=[];for(let Ze=0;Ze<te.pinConnections.length;Ze++){const ye=te.pinConnections[Ze];if(ye&&ye.trim()!==""){const Ue=parseInt(ye.trim(),10);if(!isNaN(Ue)&&xe.has(Ue)){const Ae=xe.get(Ue);(Ae.type==="via"||Ae.type==="pad")&&Te.push({pinIndex:Ze,x:Ae.x,y:Ae.y})}}}if(Te.length<2)return 0;if(te.pinCount===2&&Te.length>=2){const Ze=Te.find(Ue=>Ue.pinIndex===0),ye=Te.find(Ue=>Ue.pinIndex===1);if(Ze&&ye){const Ue=Ze.x-te.x,Ae=Ze.y-te.y;return Math.abs(Ue)>Math.abs(Ae)?Ue<0?0:180:Ae<0?90:270}}const oe=Te.find(Ze=>Ze.pinIndex===0);if(oe){const Ze=oe.x-te.x,ye=oe.y-te.y;return Math.abs(Ze)>Math.abs(ye)?Ze<0?ye<0?0:270:ye<0?90:180:ye<0?Ze<0?0:90:Ze<0?270:180}return 0};for(const[te,xe]of we){const Te=ue(),oe=xe.comp,Ze=Ve(oe.componentType);let ye=oe.rotation!==void 0?oe.rotation:Je(oe,B);ye=Math.round(ye/90)*90,ye<0&&(ye+=360),ye>=360&&(ye-=360);const Ue=oe.pinCount||2;let Ae=1;(Ze==="simple:IC"||Ze==="simple:Generic")&&(Ae=Math.min(Math.max(Ue,1),20)),m+=`  (symbol (lib_id "${Ze}") (at ${xe.x} ${xe.y} ${ye}) (unit ${Ae})
`,m+=`    (in_bom yes) (on_board yes) (dnp no)
`,m+=`    (uuid ${Te})
`,m+=`    (property "Reference" "${te}" (id 0) (at ${xe.x} ${xe.y+3.81} 0)
`,m+=`      (effects (font (size 1.27 1.27)))
`,m+=`    )
`,m+=`    (property "Value" "${rx(oe)}" (id 1) (at ${xe.x} ${xe.y-3.81} 0)
`,m+=`      (effects (font (size 1.27 1.27)))
`,m+=`    )
`,m+=`  )
`}m+=`
`;let st=_+Me+20,ht=ne+ie/2;const gn=15,Ot=new Map;console.log(`[Schematic] Processing ${E.length} nets for wire generation`);for(const te of E){let xe=function(Ae,Be){if(Ae===Be)return!0;if(!Ue.has(Ae)||!Ue.has(Be))return!1;const Oe=new Set,ut=[Ae];for(Oe.add(Ae);ut.length>0;){const Ut=ut.shift();if(Ut===Be)return!0;const bt=Ue.get(Ut);if(bt)for(const me of bt)Oe.has(me)||(Oe.add(me),ut.push(me))}return!1};if(te.hasPower&&te.powerVoltage){const Ae=`PWR_${te.powerVoltage}`;if(!Ot.has(Ae)){const Be=ue();Ot.set(Ae,{x:st,y:ht,uuid:Be}),m+=`  (symbol (lib_id "simple:Power") (at ${st} ${ht} 0) (unit 1)
`,m+=`    (in_bom no) (on_board no) (dnp no)
`,m+=`    (uuid ${Be})
`,m+=`    (property "Reference" "#PWR" (id 0) (at ${st} ${ht} 0)
`,m+=`      (effects (font (size 1.27 1.27)) hide)
`,m+=`    )
`,m+=`    (property "Value" "${te.powerVoltage}" (id 1) (at ${st} ${ht-5.08} 0)
`,m+=`      (effects (font (size 1.27 1.27)))
`,m+=`    )
`,m+=`  )
`,st+=gn}}if(te.hasGround&&!Ot.has("GND")){const Be=ue();Ot.set("GND",{x:st,y:ht,uuid:Be}),m+=`  (symbol (lib_id "simple:Ground") (at ${st} ${ht} 0) (unit 1)
`,m+=`    (in_bom no) (on_board no) (dnp no)
`,m+=`    (uuid ${Be})
`,m+=`    (property "Reference" "#PWR" (id 0) (at ${st} ${ht} 0)
`,m+=`      (effects (font (size 1.27 1.27)) hide)
`,m+=`    )
`,m+=`    (property "Value" "GND" (id 1) (at ${st} ${ht+5.08} 0)
`,m+=`      (effects (font (size 1.27 1.27)))
`,m+=`    )
`,m+=`  )
`,st+=gn}if(te.componentPins.length===0)continue;console.log(`[Schematic] Processing net ${te.name} with ${te.componentPins.length} component pins:`,te.componentPins);const Te=[...te.componentPins].sort((Ae,Be)=>{const Oe=Ae.designator.localeCompare(Be.designator);return Oe!==0?Oe:Ae.pin-Be.pin}),oe=[];for(const Ae of Te){const Be=we.get(Ae.designator);if(!Be){console.warn(`[Schematic] Component ${Ae.designator} not found in componentMap for net ${te.name}`);continue}const Oe=Be.comp,ut=Oe.pinCount||2,Ut=2.54;let bt,me;if(ut===2){const qe=Ve(Oe.componentType);qe==="simple:Resistor"?Ae.pin===1?(bt=Be.x-6.35,me=Be.y):(bt=Be.x+6.35,me=Be.y):Ae.pin===1?(bt=Be.x-5.08,me=Be.y):(bt=Be.x+5.08,me=Be.y)}else if(ut===3&&Ve(Oe.componentType)==="simple:Transistor")Ae.pin===1?(bt=Be.x,me=Be.y-5.08):Ae.pin===2?(bt=Be.x-3.81,me=Be.y):(bt=Be.x+3.81,me=Be.y);else{const qe=Math.ceil(ut/2),$e=Math.floor(ut/2);if(Ae.pin<=qe){bt=Be.x-5.08;const jt=Ae.pin-1;me=Be.y-(qe-1)*Ut/2+jt*Ut}else{bt=Be.x+5.08;const jt=Ae.pin-qe-1;me=Be.y-($e-1)*Ut/2+jt*Ut}}oe.push({x:bt,y:me,designator:Ae.designator,pin:Ae.pin})}const Ze=new Map;for(const Ae of oe){const Be=`${Ae.designator}:${Ae.pin}`;Ze.has(Be)||Ze.set(Be,new Set)}const ye=new Map;for(const Ae of te.componentPins){const Be=c.find(Oe=>(Oe.abbreviation?.trim()||Oe.designator?.trim())===Ae.designator);if(Be&&Be.pinConnections&&Be.pinConnections[Ae.pin-1]){const Oe=Be.pinConnections[Ae.pin-1],ut=parseInt(Oe.trim(),10);if(!isNaN(ut)){const Ut=`${Ae.designator}:${Ae.pin}`;ye.set(Ut,ut)}}}const Ue=new Map;for(const Ae of B.keys())Ue.has(Ae)||Ue.set(Ae,new Set);for(const Ae of u)if(Ae.type==="trace"&&Ae.points.length>=2){const Be=Ae.points.map(Oe=>Oe.id).filter(Oe=>Oe!==void 0&&B.has(Oe));for(let Oe=0;Oe<Be.length-1;Oe++){const ut=Be[Oe],Ut=Be[Oe+1];ut!==void 0&&Ut!==void 0&&(Ue.has(ut)||Ue.set(ut,new Set),Ue.has(Ut)||Ue.set(Ut,new Set),Ue.get(ut).add(Ut),Ue.get(Ut).add(ut))}}for(const[Ae,Be]of ye)for(const[Oe,ut]of ye)Ae!==Oe&&(Be===ut||xe(Be,ut))&&(Ze.get(Ae).add(Oe),Ze.get(Oe).add(Ae));if(oe.length>=1){const Ae=oe.length>1?oe.reduce((bt,me)=>bt+me.x,0)/oe.length:oe[0].x+10,Be=oe.length>1?oe.reduce((bt,me)=>bt+me.y,0)/oe.length:oe[0].y;if(te.hasPower&&te.powerVoltage){const bt=`PWR_${te.powerVoltage}`,me=Ot.get(bt);if(me){const qe=me.y-2.54,$e=me.x,Et=ue();m+=`  (junction (at ${$e} ${qe}) (diameter 0) (color 0 0 0 0) (uuid ${Et}))
`;const jt=oe.length===1?oe[0]:{x:Ae,y:Be},qn=ue();m+=`  (wire (pts (xy ${jt.x} ${jt.y}) (xy ${$e} ${qe})) (stroke (width 0) (type default)) (uuid ${qn}))
`}}if(te.hasGround){const me=Ot.get("GND");if(me){const qe=me.y-2.54,$e=me.x,Et=ue();m+=`  (junction (at ${$e} ${qe}) (diameter 0) (color 0 0 0 0) (uuid ${Et}))
`;const jt=oe.length===1?oe[0]:{x:Ae,y:Be},qn=ue();m+=`  (wire (pts (xy ${jt.x} ${jt.y}) (xy ${$e} ${qe})) (stroke (width 0) (type default)) (uuid ${qn}))
`}}const Oe=new Set;if(oe.length>=2){console.log(`[Schematic] Creating wires for net ${te.name}: ${oe.length} pins`);const bt=new Map;for(const qe of oe){const $e=`${qe.designator}:${qe.pin}`;bt.set($e,{x:qe.x,y:qe.y})}const me=[];for(const[qe,$e]of Ze)for(const Et of $e)if(bt.has(qe)&&bt.has(Et)){const jt=bt.get(qe),qn=bt.get(Et),pl=Math.sqrt(Math.pow(qn.x-jt.x,2)+Math.pow(qn.y-jt.y,2));me.push({from:qe,to:Et,distance:pl})}if(me.length>0){me.sort((jt,qn)=>jt.distance-qn.distance);const qe=new Map,$e=jt=>(qe.has(jt)||qe.set(jt,jt),qe.get(jt)!==jt&&qe.set(jt,$e(qe.get(jt))),qe.get(jt)),Et=(jt,qn)=>{const pl=$e(jt),Gi=$e(qn);return pl!==Gi?(qe.set(Gi,pl),!0):!1};for(const jt of me)if(Et(jt.from,jt.to)){const qn=bt.get(jt.from),pl=bt.get(jt.to),Gi=ue();m+=`  (wire (pts (xy ${qn.x} ${qn.y}) (xy ${pl.x} ${pl.y})) (stroke (width 0) (type default)) (uuid ${Gi}))
`,Oe.add(jt.from),Oe.add(jt.to)}}else if(oe.length===2){const qe=ue();m+=`  (wire (pts (xy ${oe[0].x} ${oe[0].y}) (xy ${oe[1].x} ${oe[1].y})) (stroke (width 0) (type default)) (uuid ${qe}))
`,Oe.add(`${oe[0].designator}:${oe[0].pin}`),Oe.add(`${oe[1].designator}:${oe[1].pin}`)}else{const qe=[...oe].sort(($e,Et)=>Math.abs($e.y-Et.y)<5?$e.x-Et.x:$e.y-Et.y);for(let $e=0;$e<qe.length-1;$e++){const Et=ue();m+=`  (wire (pts (xy ${qe[$e].x} ${qe[$e].y}) (xy ${qe[$e+1].x} ${qe[$e+1].y})) (stroke (width 0) (type default)) (uuid ${Et}))
`,Oe.add(`${qe[$e].designator}:${qe[$e].pin}`),Oe.add(`${qe[$e+1].designator}:${qe[$e+1].pin}`)}}}else if(oe.length===1){console.log(`[Schematic] Creating junction for single-pin net ${te.name} at (${oe[0].x}, ${oe[0].y})`);const bt=ue();m+=`  (junction (at ${oe[0].x} ${oe[0].y}) (diameter 0.508) (color 0 0 0 0) (uuid ${bt}))
`}else console.warn(`[Schematic] Net ${te.name} has ${te.componentPins.length} component pins but 0 valid pin positions!`);const ut=oe.length>=2&&Oe.size===oe.length;if(te.hasPower||te.hasGround||oe.length===1||oe.length>=2&&!ut){const bt=oe.length>1?Be+5.08:oe[0].y+5.08,me=oe.length>1?Ae:oe[0].x,qe=ue(),$e=te.hasPower&&te.powerVoltage?te.powerVoltage:te.hasGround?"GND":te.name;m+=`  (text "${$e}" (at ${me} ${bt} 0)
`,m+=`    (effects (font (size 1.27 1.27)))
`,m+=`    (uuid ${qe})
`,m+=`  )
`}else console.log(`[Schematic] Net ${te.name}: All ${oe.length} pins connected with wires, skipping label`)}}m+=`)
`;const El=dx(B,F,H,c,u);return{schematic:m,nodesCsv:El}}function px(){const c=new Date,u=c.getFullYear(),v=String(c.getMonth()+1).padStart(2,"0"),p=String(c.getDate()).padStart(2,"0"),d=String(c.getHours()).padStart(2,"0"),B=String(c.getMinutes()).padStart(2,"0"),L=String(c.getSeconds()).padStart(2,"0");return`${u}_${v}_${p}-${d}-${B}-${L}`}function bc(c){let u=c.replace(/\.json$/i,""),v="";for(;v!==u;)v=u,u=u.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),u=u.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return u}const hx=({openMenu:c,setOpenMenu:u,isReadOnlyMode:v,currentProjectFilePath:p,onNewProject:d,onOpenProject:B,onSaveProject:L,onSaveAs:ge,onExportSchematic:F,onPrint:H,hasUnsavedChanges:je,setNewProjectDialog:P,setAutoSaveDialog:de,topImage:fe,bottomImage:Y,selectedImageForTransform:q,setSelectedImageForTransform:_e,setCurrentTool:Ee,transformMode:E,setTransformMode:k,updateImageTransform:U,resetImageTransform:M,isGrayscale:T,setIsGrayscale:g,isBlackAndWhiteEdges:W,setIsBlackAndWhiteEdges:we,isBlackAndWhiteInverted:tt,setIsBlackAndWhiteInverted:Ke,areImagesLocked:ke,setAreImagesLocked:Ye,onEnterBoardDimensions:Pt,fileInputTopRef:at,fileInputBottomRef:_,openProjectRef:ne,increaseSize:Me,decreaseSize:ie,brushSize:m,drawingStrokes:D,selectedIds:X,selectedComponentIds:ue,selectedPowerIds:Ve,selectedGroundIds:Je,componentsTop:st,componentsBottom:ht,powers:gn,grounds:Ot,setSetSizeDialog:El,areViasLocked:te,setAreViasLocked:xe,arePadsLocked:Te,setArePadsLocked:oe,areTracesLocked:Ze,setAreTracesLocked:ye,areComponentsLocked:Ue,setAreComponentsLocked:Ae,areGroundNodesLocked:Be,setAreGroundNodesLocked:Oe,arePowerNodesLocked:ut,setArePowerNodesLocked:Ut,setSelectedIds:bt,setSelectedComponentIds:me,setSelectedPowerIds:qe,setSelectedGroundIds:$e,selectAllVias:Et,selectAllTraces:jt,selectAllPads:qn,selectAllComponents:pl,selectDisconnectedComponents:Gi,selectAllPowerNodes:Yt,selectAllGroundNodes:yi,setShowPowerBusManager:In,setShowGroundBusManager:hl,menuBarRef:Pn})=>{const[bi,pn]=it.useState(null),Zn=it.useRef(null),Fi=(We,Le)=>{const kn=We==="top",lt=!(We==="both"?fe&&Y:(kn?fe:We==="bottom"?Y:null)!==null)||ke;return i.jsxs("div",{onMouseEnter:()=>{Le.current&&(clearTimeout(Le.current),Le.current=null),pn(We)},onMouseLeave:()=>{pn(null)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{if(We==="both"){const gl=!fe?.flipX;U("both",{flipX:gl})}else{const gl=kn?fe?.flipX||!1:Y?.flipX||!1;U(We,{flipX:!gl})}pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:"Toggle Horizontal Flip"}),i.jsx("button",{onClick:()=>{if(We==="both"){const gl=!fe?.flipY;U("both",{flipY:gl})}else{const gl=kn?fe?.flipY||!1:Y?.flipY||!1;U(We,{flipY:!gl})}pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:"Toggle Vertical Flip"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{_e(We),k("nudge"),Ee("transform"),pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:[E==="nudge"&&q===We?" ":"","Mode: Nudge"]}),i.jsxs("button",{onClick:()=>{_e(We),k("scale"),Ee("transform"),pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:[E==="scale"&&q===We?" ":"","Mode: Scale"]}),i.jsxs("button",{onClick:()=>{_e(We),k("rotate"),Ee("transform"),pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:[E==="rotate"&&q===We?" ":"","Mode: Rotate"]}),i.jsxs("button",{onClick:()=>{_e(We),k("slant"),Ee("transform"),pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:[E==="slant"&&q===We?" ":"","Mode: Slant"]}),i.jsxs("button",{onClick:()=>{_e(We),k("keystone"),Ee("transform"),pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:[E==="keystone"&&q===We?" ":"","Mode: Keystone"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{_e(We),Ee("transform"),T||W?(g(!1),we(!1),Ke(!1)):g(!0),pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:T||W?"Color Mode":"Grayscale Mode"}),i.jsx("button",{onClick:()=>{_e(We),Ee("transform"),W?Ke(gl=>!gl):(we(!0),Ke(!1)),pn(null),u(null)},disabled:lt,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:lt?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:lt?"not-allowed":"pointer"},children:W?"Invert Edges":"Black & White Edges"})]})},Ie=()=>{if(X.size>0){const We=D.filter(Le=>X.has(Le.id));if(We.length>0)return We[0].size}else if(ue.size>0){const We=[...st,...ht].find(Le=>ue.has(Le.id));if(We)return We.size||18}else if(Ve.size>0){const We=gn.find(Le=>Ve.has(Le.id));if(We)return We.size}else if(Je.size>0){const We=Ot.find(Le=>Je.has(Le.id));if(We)return We.size||18}return m};return i.jsxs("div",{ref:Pn,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:We=>{We.stopPropagation(),u(Le=>Le==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),c==="file"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{v||(u(null),je()?P({visible:!0}):d())},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"New Project"}),i.jsx("button",{onClick:async()=>{await B(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{v||(L(),u(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Save Project"}),i.jsx("button",{onClick:()=>{v||(ge(),u(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Save As"}),i.jsx("button",{onClick:()=>{v||(de({visible:!0,interval:5}),u(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Auto Save"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{v||(F(),u(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Export Simple Schematic"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{H(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),i.jsx("button",{onClick:()=>{H(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:We=>{v||(We.stopPropagation(),u(Le=>Le==="transform"?null:"transform"))},disabled:v,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="transform"?"#eef3ff":"#fff",fontWeight:600,color:v?"#999":"#222",cursor:v?"not-allowed":"pointer",opacity:v?.5:1},children:"Images "}),c==="transform"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),i.jsx("button",{onClick:()=>{!v&&!ke&&(at.current?.click(),u(null))},disabled:v||ke,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v||ke?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v||ke?"not-allowed":"pointer"},children:"Load Top PCB"}),i.jsx("button",{onClick:()=>{!v&&!ke&&(_.current?.click(),u(null))},disabled:v||ke,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v||ke?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v||ke?"not-allowed":"pointer"},children:"Load Bottom PCB"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{ke||(Pt(),u(null))},disabled:ke,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ke?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ke?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!fe||ke,onMouseEnter:()=>{ke||(Zn.current&&(clearTimeout(Zn.current),Zn.current=null),pn("top"))},onMouseLeave:()=>{Zn.current=setTimeout(()=>{pn(We=>We==="top"?null:We)},300)},onClick:()=>{ke||(_e("top"),Ee("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!fe||ke?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!fe||ke?"not-allowed":"pointer"},children:[q==="top"?" ":"","Top Image "]}),bi==="top"&&!ke&&Fi("top",Zn)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!Y||ke,onMouseEnter:()=>{ke||(Zn.current&&(clearTimeout(Zn.current),Zn.current=null),pn("bottom"))},onMouseLeave:()=>{Zn.current=setTimeout(()=>{pn(We=>We==="bottom"?null:We)},300)},onClick:()=>{ke||(_e("bottom"),Ee("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!Y||ke?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!Y||ke?"not-allowed":"pointer"},children:[q==="bottom"?" ":"","Bottom Image "]}),bi==="bottom"&&!ke&&Fi("bottom",Zn)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!fe||!Y||ke,onMouseEnter:()=>{ke||(Zn.current&&(clearTimeout(Zn.current),Zn.current=null),pn("both"))},onMouseLeave:()=>{Zn.current=setTimeout(()=>{pn(We=>We==="both"?null:We)},300)},onClick:()=>{ke||(_e("both"),Ee("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!fe||!Y||ke?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!fe||!Y||ke?"not-allowed":"pointer"},children:[q==="both"?" ":"","Both Images "]}),bi==="both"&&!ke&&Fi("both",Zn)]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{ke||(Ee("transform"),M(),u(null))},disabled:ke,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ke?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ke?"not-allowed":"pointer"},children:"Reset Transform"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ye(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:ke?"Unlock Images ":"Lock Images"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:We=>{v||(We.stopPropagation(),u(Le=>Le==="tools"?null:"tools"))},disabled:v,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="tools"?"#eef3ff":"#fff",fontWeight:600,color:v?"#999":"#222",cursor:v?"not-allowed":"pointer",opacity:v?.5:1},children:"Tools "}),c==="tools"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{Me(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),i.jsx("button",{onClick:()=>{ie(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{El({visible:!0,size:Ie()}),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Set Size"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{xe(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Vias ",te?"":""]}),i.jsxs("button",{onClick:()=>{oe(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Pads ",Te?"":""]}),i.jsxs("button",{onClick:()=>{ye(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Traces ",Ze?"":""]}),i.jsxs("button",{onClick:()=>{Ae(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Components ",Ue?"":""]}),i.jsxs("button",{onClick:()=>{Oe(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Ground Node ",Be?"":""]}),i.jsxs("button",{onClick:()=>{Ut(We=>!We),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Power Nodes ",ut?"":""]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select All"}),i.jsx("button",{onClick:()=>{Et(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Vias"}),i.jsx("button",{onClick:()=>{jt(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Traces"}),i.jsx("button",{onClick:()=>{qn(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Pads"}),i.jsx("button",{onClick:()=>{pl(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Components"}),i.jsx("button",{onClick:()=>{Yt(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Power Nodes"}),i.jsx("button",{onClick:()=>{yi(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Ground Nodes"}),i.jsx("button",{onClick:()=>{Gi(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select Disconnected"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{In(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>{hl(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:We=>{We.stopPropagation(),u(Le=>Le==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),c==="about"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:400,maxWidth:600,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:16,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 12px 0",color:"#000",fontSize:"18px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"This application supports typical 4-layer PCBs and allows you to load top and bottom PCB images, trace connections, place components, and export schematics in KiCad format."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:i.jsx("strong",{children:"Key Features:"})}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Load and align top and bottom PCB images"}),i.jsx("li",{children:"Trace connections with automatic node snapping"}),i.jsx("li",{children:"Place and annotate components with pin connections"}),i.jsx("li",{children:"Manage power buses and ground connections"}),i.jsx("li",{children:"Export to KiCad schematic format"}),i.jsx("li",{children:"Auto-save functionality for project management"})]}),i.jsxs("p",{style:{margin:"0 0 0 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to create new projects, save your work, and export schematics. The ",i.jsx("strong",{children:"Images"})," menu provides tools for aligning and transforming PCB images. The ",i.jsx("strong",{children:"Tools"})," menu offers size adjustments and locking controls for different PCB elements."]})]})})]}),p&&i.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:i.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:p,children:p})})]})},gx=({visible:c})=>c?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),i.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to start a new project."]}),i.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"Images"})," menu to load PCB photos."]})]}):null,xx=({visible:c,title:u,message:v,onClose:p})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:d=>{d.target===d.currentTarget&&p()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:d=>d.stopPropagation(),children:[i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),i.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:u})]}),i.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:v}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:i.jsx("button",{onClick:p,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,yx=({visible:c,selectedIds:u,selectedComponentIds:v,selectedPowerIds:p,selectedGroundIds:d,drawingStrokes:B,componentsTop:L,componentsBottom:ge,powers:F,grounds:H,powerBuses:je,onClose:P,setComponentsTop:de,setComponentsBottom:fe,determineViaType:Y,determinePadType:q,onFindComponent:_e,position:Ee,isDragging:E,onDragStart:k})=>{if(!c)return null;const U=Ee?{position:"fixed",left:`${Ee.x}px`,top:`${Ee.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:E?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},M={padding:"20px",overflow:"auto",flex:1};return i.jsxs("div",{style:U,children:[i.jsxs("div",{onMouseDown:T=>{const g=T.target;g.tagName==="BUTTON"||g.closest("button")||Ee&&k(T)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:E?"grabbing":Ee?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (Ctrl+I)"}),i.jsx("button",{onClick:P,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:M,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const T=B.filter(Ke=>u.has(Ke.id)).length,g=[...L,...ge].filter(Ke=>v.has(Ke.id)).length,W=F.filter(Ke=>p.has(Ke.id)).length,we=H.filter(Ke=>d.has(Ke.id)).length,tt=T+g+W+we;return i.jsx("div",{style:{padding:"12px 16px",backgroundColor:tt>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:tt>0?"#333":"#856404",marginBottom:"8px"},children:tt>0?`${tt} Object${tt!==1?"s":""} Selected`:"Zero Objects Selected"})})(),v.size>0&&(()=>{const T=B.some(g=>u.has(g.id)&&(g.type==="via"||g.type==="pad"));return[...L,...ge].filter(g=>v.has(g.id)).map(g=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:g.componentType})]}),_e&&i.jsx("button",{onClick:()=>{_e(g.id,g.x,g.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Layer: ",g.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("span",{children:["Designator: ",g.designator||"(empty)"]}),T&&i.jsx("button",{onClick:()=>{const W=[...L,...ge].filter(_=>v.has(_.id)&&_.componentType===g.componentType),we=W.length,tt=B.filter(_=>u.has(_.id)&&_.type==="pad"&&_.points.length>0&&_.points[0].id!==void 0).map(_=>{const ne=_.points[0].id;if(ne===void 0)throw new Error("Unexpected undefined id");return{stroke:_,nodeId:ne}}).sort((_,ne)=>_.nodeId-ne.nodeId),Ke=tt.length>0?tt:B.filter(_=>u.has(_.id)&&_.type==="via"&&_.points.length>0&&_.points[0].id!==void 0).map(_=>{const ne=_.points[0].id;if(ne===void 0)throw new Error("Unexpected undefined id");return{stroke:_,nodeId:ne}}).sort((_,ne)=>_.nodeId-ne.nodeId),ke=Ke.length;if(ke===0){console.warn("No vias or pads with Node IDs found in selection");return}const Ye=Math.floor(ke/we);if(Ye===0){console.warn(`Not enough ${tt.length>0?"pads":"vias"} (${ke}) for ${we} components`);return}[...W].sort((_,ne)=>_.id.localeCompare(ne.id)).forEach((_,ne)=>{const Me=ne*Ye,ie=Me+Ye,D=Ke.slice(Me,ie).map(ue=>ue.nodeId.toString()),X=Wu(_,D,B);_.layer==="top"?de(ue=>ue.map(Ve=>{if(Ve.id===_.id){const Je={...Ve,pinCount:Ye,pinConnections:D};return X&&(Je.pinPolarities=X),Je}return Ve})):fe(ue=>ue.map(Ve=>{if(Ve.id===_.id){const Je={...Ve,pinCount:Ye,pinConnections:D};return X&&(Je.pinPolarities=X),Je}return Ve}))});const at=tt.length>0?"pads":"vias";console.log(`Connected ${we} components of type ${g.componentType} to ${ke} ${at} (${Ye} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),i.jsxs("div",{children:["Abbreviation: ",g.abbreviation||"(empty)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:g.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:g.color})]}),i.jsxs("div",{children:["Size: ",g.size]}),i.jsxs("div",{children:["Pin Count: ",g.pinCount]}),g.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[g.capacitance&&i.jsxs("div",{children:["Capacitance: ",g.capacitance]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.dielectric&&i.jsxs("div",{children:["Dielectric: ",g.dielectric]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[g.capacitance&&i.jsxs("div",{children:["Capacitance: ",g.capacitance]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]}),g.polarity&&i.jsxs("div",{children:["Polarity: ",g.polarity]}),g.esr&&i.jsxs("div",{children:["ESR: ",g.esr]}),g.temperature&&i.jsxs("div",{children:["Temperature: ",g.temperature]})]}),g.orientation!==void 0&&g.orientation!==null&&i.jsxs("div",{children:["Orientation: ",g.orientation,""]}),g.pinConnections&&g.pinConnections.length>0&&(()=>{const W=g.componentType==="Electrolytic Capacitor"||g.componentType==="Diode"||g.componentType==="Battery"||g.componentType==="ZenerDiode",we=g.componentType==="Capacitor"&&"dielectric"in g&&g.dielectric==="Tantalum",tt=W||we;return i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),tt&&i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:g.pinConnections.map((Ke,ke)=>{const Ye=g.pinPolarities&&g.pinPolarities.length>ke?g.pinPolarities[ke]:"";return i.jsxs("tr",{style:{backgroundColor:ke%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ke+1}),tt&&i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:Ye==="+"?"#d32f2f":Ye==="-"?"#1976d2":"#999"},children:Ye||"-"}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Ke||"(not connected)"})]},ke)})})]})]})})(),"manufacturer"in g&&g.manufacturer&&i.jsxs("div",{children:["Manufacturer: ",g.manufacturer]}),"partNumber"in g&&g.partNumber&&i.jsxs("div",{children:["Part Number: ",g.partNumber]}),g.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[g.diodeType&&i.jsxs("div",{children:["Type: ",g.diodeType]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.ledColor&&i.jsxs("div",{children:["LED Color: ",g.ledColor]})]}),g.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.capacity&&i.jsxs("div",{children:["Capacity: ",g.capacity]}),g.chemistry&&i.jsxs("div",{children:["Chemistry: ",g.chemistry]})]}),g.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.fuseType&&i.jsxs("div",{children:["Type: ",g.fuseType]})]}),g.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[g.impedance&&i.jsxs("div",{children:["Impedance: ",g.impedance]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[g.connectorType&&i.jsxs("div",{children:["Type: ",g.connectorType]}),g.gender&&i.jsxs("div",{children:["Gender: ",g.gender]})]}),g.componentType==="Jumper"&&i.jsx(i.Fragment,{children:g.positions&&i.jsxs("div",{children:["Positions: ",g.positions]})}),g.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[g.coilVoltage&&i.jsxs("div",{children:["Coil Voltage: ",g.coilVoltage]}),g.contactType&&i.jsxs("div",{children:["Contact Type: ",g.contactType]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[g.inductance&&i.jsxs("div",{children:["Inductance: ",g.inductance]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.resistance&&i.jsxs("div",{children:["DC Resistance: ",g.resistance]})]}),g.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[g.impedance&&i.jsxs("div",{children:["Impedance: ",g.impedance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]})]}),g.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[g.motorType&&i.jsxs("div",{children:["Type: ",g.motorType]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[g.inputVoltage&&i.jsxs("div",{children:["Input Voltage: ",g.inputVoltage]}),g.outputVoltage&&i.jsxs("div",{children:["Output Voltage: ",g.outputVoltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[g.transistorType&&i.jsxs("div",{children:["Type: ",g.transistorType]}),g.polarity&&i.jsxs("div",{children:["Polarity: ",g.polarity]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]})]}),g.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.configuration&&i.jsxs("div",{children:["Configuration: ",g.configuration]})]}),g.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.thermistorType&&i.jsxs("div",{children:["Type: ",g.thermistorType]}),g.beta&&i.jsxs("div",{children:["Beta: ",g.beta]})]}),g.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[g.switchType&&i.jsxs("div",{children:["Type: ",g.switchType]}),g.current&&i.jsxs("div",{children:["Current: ",g.current]}),g.voltage&&i.jsxs("div",{children:["Voltage: ",g.voltage]})]}),g.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[g.primaryVoltage&&i.jsxs("div",{children:["Primary Voltage: ",g.primaryVoltage]}),g.secondaryVoltage&&i.jsxs("div",{children:["Secondary Voltage: ",g.secondaryVoltage]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.turns&&i.jsxs("div",{children:["Turns Ratio: ",g.turns]})]}),g.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:g.signal&&i.jsxs("div",{children:["Signal: ",g.signal]})}),g.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[g.description&&i.jsxs("div",{children:["Description: ",g.description]}),g.icType&&i.jsxs("div",{children:["IC Type: ",g.icType]}),g.datasheet&&i.jsxs("div",{children:["Datasheet: ",i.jsx("a",{href:g.datasheet,target:"_blank",rel:"noopener noreferrer",children:g.datasheet})]})]}),g.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:g.tubeType&&i.jsxs("div",{children:["Type: ",g.tubeType]})}),g.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[g.vrType&&i.jsxs("div",{children:["Type: ",g.vrType]}),g.resistance&&i.jsxs("div",{children:["Resistance: ",g.resistance]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.taper&&i.jsxs("div",{children:["Taper: ",g.taper]})]}),g.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[g.frequency&&i.jsxs("div",{children:["Frequency: ",g.frequency]}),g.loadCapacitance&&i.jsxs("div",{children:["Load Capacitance: ",g.loadCapacitance]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),g.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[g.voltage&&i.jsxs("div",{children:["Zener Voltage: ",g.voltage]}),g.power&&i.jsxs("div",{children:["Power: ",g.power]}),g.tolerance&&i.jsxs("div",{children:["Tolerance: ",g.tolerance]})]}),i.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})})]})]},g.id))})(),u.size>0&&B.filter(T=>u.has(T.id)&&T.type==="via"&&T.points.length>0).map(T=>{const g=T.points[0],W=T.viaType||(g.id!==void 0?Y(g.id,je):"Via (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:W})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[g.id&&i.jsxs("div",{children:["Node ID: ",g.id]}),i.jsx("div",{children:"Layer: Top and Bottom"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})]})]},T.id)}),u.size>0&&B.filter(T=>u.has(T.id)&&T.type==="pad"&&T.points.length>0).map(T=>{const g=T.points[0],W=T.padType||(g.id!==void 0?q(g.id,je):"Pad (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:W})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[g.id&&i.jsxs("div",{children:["Node ID: ",g.id]}),i.jsxs("div",{children:["Layer: ",T.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",g.x.toFixed(2),", y=",g.y.toFixed(2)]})]})]},T.id)}),u.size>0&&B.filter(T=>u.has(T.id)&&T.type==="trace").map(T=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||"unknown"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[T.points.length>0&&i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",T.points.length]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:T.points.map((g,W)=>i.jsxs("tr",{style:{backgroundColor:W%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:W}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.x.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.y.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:g.id||"(none)"})]},W))})]})]}),i.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",T.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]})]})]},T.id)),p.size>0&&F.filter(T=>p.has(T.id)).map(T=>{const g=je.find(W=>W.id===T.powerBusId);return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||(g?`${g.name} Power Node`:"Power Node")})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",T.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Layer: ",T.layer]}),i.jsxs("div",{children:["Power Bus: ",g?.name||T.powerBusId||"(unknown)"]}),i.jsxs("div",{children:["Position: x=",T.x.toFixed(2),", y=",T.y.toFixed(2)]})]})]},T.id)}),d.size>0&&H.filter(T=>d.has(T.id)).map(T=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||"Ground Node"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",T.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",T.x.toFixed(2),", y=",T.y.toFixed(2)]})]})]},T.id))]})})]})},Fn=200,bx=({visible:c,selectedIds:u,selectedComponentIds:v,selectedPowerIds:p,selectedGroundIds:d,drawingStrokes:B,componentsTop:L,componentsBottom:ge,powers:F,grounds:H,powerBuses:je,onClose:P,setComponentsTop:de,setComponentsBottom:fe,setDrawingStrokes:Y,setPowerSymbols:q,setGroundSymbols:_e,determineViaType:Ee,determinePadType:E,position:k,isDragging:U,onDragStart:M})=>{const[T,g]=C.useState(new Map),W=C.useRef(""),we=()=>[...Array.from(u).sort(),...Array.from(v).sort(),...Array.from(p).sort(),...Array.from(d).sort()].join(",");if(C.useEffect(()=>{if(!c)return;const ie=we();ie!==W.current&&(W.current=ie,g(m=>{const D=new Map;return[...L,...ge].filter(X=>v.has(X.id)).forEach(X=>{const ue=m.get(X.id);D.set(X.id,ue!==void 0?ue:X.notes||"")}),B.filter(X=>u.has(X.id)).forEach(X=>{const ue=m.get(X.id);D.set(X.id,ue!==void 0?ue:X.notes||"")}),F.filter(X=>p.has(X.id)).forEach(X=>{const ue=m.get(X.id);D.set(X.id,ue!==void 0?ue:X.notes||"")}),H.filter(X=>d.has(X.id)).forEach(X=>{const ue=m.get(X.id);D.set(X.id,ue!==void 0?ue:X.notes||"")}),D}))},[c,u,v,p,d,B,L,ge,F,H]),!c)return null;const tt=k?{position:"fixed",left:`${k.x}px`,top:`${k.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:U?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},Ke={padding:"20px",overflow:"auto",flex:1},ke=B.filter(ie=>u.has(ie.id)).length,Ye=[...L,...ge].filter(ie=>v.has(ie.id)).length,Pt=F.filter(ie=>p.has(ie.id)).length,at=H.filter(ie=>d.has(ie.id)).length,_=ke+Ye+Pt+at,ne=(ie,m)=>{const D=m.length>Fn?m.substring(0,Fn):m;g(X=>{const ue=new Map(X);return ue.set(ie,D),ue})},Me=()=>{de(ie=>ie.map(m=>{if(v.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m})),fe(ie=>ie.map(m=>{if(v.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m})),Y(ie=>ie.map(m=>{if(u.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m})),q(ie=>ie.map(m=>{if(p.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m})),_e(ie=>ie.map(m=>{if(d.has(m.id)&&T.has(m.id)){const D=T.get(m.id)||"";return{...m,notes:D.trim()===""?null:D.trim()}}return m}))};return i.jsxs("div",{style:tt,children:[i.jsxs("div",{onMouseDown:ie=>{const m=ie.target;m.tagName==="BUTTON"||m.closest("button")||k&&M(ie)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:U?"grabbing":k?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (Ctrl+N)"}),i.jsx("button",{onClick:P,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:Ke,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[i.jsx("div",{style:{padding:"12px 16px",backgroundColor:_>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:_>0?"#333":"#856404",marginBottom:"8px"},children:_>0?`${_} Object${_!==1?"s":""} Selected`:"Zero Objects Selected"}),_===0?i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):i.jsxs(i.Fragment,{children:[[...L,...ge].filter(ie=>v.has(ie.id)).map(ie=>{const m=T.get(ie.id)||"",D=m.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ie.componentType})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:m,onChange:X=>ne(ie.id,X.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Fn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:D>=Fn?"#d32f2f":"#666",textAlign:"right"},children:[D," / ",Fn]})]})]},ie.id)}),B.filter(ie=>u.has(ie.id)&&ie.type==="via"&&ie.points.length>0).map(ie=>{const m=ie.points[0],D=ie.viaType||(m.id!==void 0?Ee(m.id,je):"Via (Signal)"),X=T.get(ie.id)||"",ue=X.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:D})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:m.id&&i.jsxs("div",{children:["Node ID: ",m.id]})}),i.jsx("textarea",{value:X,onChange:Ve=>ne(ie.id,Ve.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Fn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Fn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Fn]})]})]},ie.id)}),B.filter(ie=>u.has(ie.id)&&ie.type==="pad"&&ie.points.length>0).map(ie=>{const m=ie.points[0],D=ie.padType||(m.id!==void 0?E(m.id,je):"Pad (Signal)"),X=T.get(ie.id)||"",ue=X.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:D})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:m.id&&i.jsxs("div",{children:["Node ID: ",m.id]})}),i.jsx("textarea",{value:X,onChange:Ve=>ne(ie.id,Ve.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Fn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Fn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Fn]})]})]},ie.id)}),B.filter(ie=>u.has(ie.id)&&ie.type==="trace").map(ie=>{const m=T.get(ie.id)||"",D=m.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ie.type||"unknown"})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:m,onChange:X=>ne(ie.id,X.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Fn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:D>=Fn?"#d32f2f":"#666",textAlign:"right"},children:[D," / ",Fn]})]})]},ie.id)}),F.filter(ie=>p.has(ie.id)).map(ie=>{const m=je.find(Ve=>Ve.id===ie.powerBusId),D=ie.type||(m?`${m.name} Power Node`:"Power Node"),X=T.get(ie.id)||"",ue=X.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:D})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",ie.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:X,onChange:Ve=>ne(ie.id,Ve.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Fn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Fn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Fn]})]})]},ie.id)}),H.filter(ie=>d.has(ie.id)).map(ie=>{const m=ie.type||"Ground Node",D=T.get(ie.id)||"",X=D.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:m})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",ie.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:D,onChange:ue=>ne(ie.id,ue.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Fn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:X>=Fn?"#d32f2f":"#666",textAlign:"right"},children:[X," / ",Fn]})]})]},ie.id)}),i.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[i.jsx("button",{onClick:Me,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Save Notes"}),i.jsx("button",{onClick:P,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#616161"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#757575"},children:"Close"})]})]})]})})]})},vx=({visible:c,dimensions:u,onSave:v,onClose:p})=>{const[d,B]=C.useState(""),[L,ge]=C.useState(""),[F,H]=C.useState("inches");C.useEffect(()=>{c&&u?(B(u.width.toString()),ge(u.height.toString()),H(u.unit)):c&&(B(""),ge(""),H("inches"))},[c,u]);const je=()=>{const de=parseFloat(d),fe=parseFloat(L);if(isNaN(de)||de<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(fe)||fe<=0){alert("Please enter a valid height greater than 0");return}v({width:de,height:fe,unit:F}),p()},P=()=>{p()};return c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:de=>{de.target===de.currentTarget&&P()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:de=>de.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:d,onChange:de=>B(de.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:F,onChange:de=>H(de.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:L,onChange:de=>ge(de.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:F,onChange:de=>H(de.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:P,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),i.jsx("button",{onClick:je,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},mx=({component:c,componentEditor:u,setComponentEditor:v,areComponentsLocked:p})=>i.jsxs(i.Fragment,{children:[c.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>v({...u,resistance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Qe("resistance"),onChange:d=>v({...u,resistanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>v({...u,power:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"5%",onChange:d=>v({...u,tolerance:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.05%",children:"0.05%"}),i.jsx("option",{value:"0.1%",children:"0.1%"}),i.jsx("option",{value:"0.25%",children:"0.25%"}),i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:u.capacitance||"",onChange:d=>v({...u,capacitance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:u.capacitanceUnit||Qe("capacitance"),onChange:d=>v({...u,capacitanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("capacitance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-dielectric-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),i.jsxs("select",{id:`component-dielectric-${c.id}`,value:u.dielectric||"Ceramic",onChange:d=>v({...u,dielectric:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Ceramic",children:"Ceramic"}),i.jsx("option",{value:"Tantalum",children:"Tantalum"}),i.jsx("option",{value:"Film",children:"Film"}),i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Mica",children:"Mica"}),i.jsx("option",{value:"Paper",children:"Paper"}),i.jsx("option",{value:"Glass",children:"Glass"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"10%",onChange:d=>v({...u,tolerance:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:u.capacitance||"",onChange:d=>v({...u,capacitance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 100"}),i.jsxs("select",{value:u.capacitanceUnit||"F",onChange:d=>v({...u,capacitanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:[i.jsx("option",{value:"pF",children:"pF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"mF",children:"mF"}),i.jsx("option",{value:"F",children:"F"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 25"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"20%",onChange:d=>v({...u,tolerance:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:u.polarityCapacitor||c.polarity||"Positive",onChange:d=>v({...u,polarityCapacitor:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Positive",children:"Positive"}),i.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),c.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inductance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),i.jsx("input",{id:`component-inductance-${c.id}`,type:"text",value:u.inductance||"",onChange:d=>v({...u,inductance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.inductanceUnit||Qe("inductance"),onChange:d=>v({...u,inductanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("inductance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>v({...u,resistance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.resistanceUnit||"",onChange:d=>v({...u,resistanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-diodetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),i.jsxs("select",{id:`component-diodetype-${c.id}`,value:u.diodeType||"Standard",onChange:d=>v({...u,diodeType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Standard",children:"Standard"}),i.jsx("option",{value:"Zener",children:"Zener"}),i.jsx("option",{value:"LED",children:"LED"}),i.jsx("option",{value:"Schottky",children:"Schottky"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),u.diodeType==="LED"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ledcolor-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),i.jsxs("select",{id:`component-ledcolor-${c.id}`,value:u.ledColor||"",onChange:d=>v({...u,ledColor:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"Red",children:"Red"}),i.jsx("option",{value:"Green",children:"Green"}),i.jsx("option",{value:"Blue",children:"Blue"}),i.jsx("option",{value:"Yellow",children:"Yellow"}),i.jsx("option",{value:"Orange",children:"Orange"}),i.jsx("option",{value:"White",children:"White"}),i.jsx("option",{value:"RGB",children:"RGB"}),i.jsx("option",{value:"IR",children:"IR (Infrared)"}),i.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 3.7"}),i.jsx("select",{value:u.voltageUnit||"V",onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),i.jsx("input",{id:`component-capacity-${c.id}`,type:"text",value:u.capacity||"",onChange:d=>v({...u,capacity:d.target.value}),disabled:p,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 2000mAh"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-chemistry-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),i.jsxs("select",{id:`component-chemistry-${c.id}`,value:u.chemistry||"Li-ion",onChange:d=>v({...u,chemistry:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Li-ion",children:"Li-ion"}),i.jsx("option",{value:"LiPo",children:"LiPo"}),i.jsx("option",{value:"NiMH",children:"NiMH"}),i.jsx("option",{value:"NiCd",children:"NiCd"}),i.jsx("option",{value:"Alkaline",children:"Alkaline"}),i.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),i.jsx("option",{value:"Lithium",children:"Lithium"}),i.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),c.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:u.currentUnit||"A",onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:u.voltageUnit||"V",onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-fusetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),i.jsxs("select",{id:`component-fusetype-${c.id}`,value:u.fuseType||"Fast-blow",onChange:d=>v({...u,fuseType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),i.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),i.jsx("option",{value:"Time-delay",children:"Time-delay"}),i.jsx("option",{value:"Resettable",children:"Resettable"}),i.jsx("option",{value:"Cartridge",children:"Cartridge"}),i.jsx("option",{value:"Glass",children:"Glass"}),i.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),c.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-coilvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),i.jsx("input",{id:`component-coilvoltage-${c.id}`,type:"text",value:u.coilVoltage||"",onChange:d=>v({...u,coilVoltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.coilVoltageUnit||Qe("voltage"),onChange:d=>v({...u,coilVoltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-contacttype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),i.jsxs("select",{id:`component-contacttype-${c.id}`,value:u.contactType||"SPST",onChange:d=>v({...u,contactType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),i.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),i.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),i.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),i.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),i.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-motortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),i.jsxs("select",{id:`component-motortype-${c.id}`,value:u.motorType||"DC",onChange:d=>v({...u,motorType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"DC",children:"DC Motor"}),i.jsx("option",{value:"Stepper",children:"Stepper Motor"}),i.jsx("option",{value:"Servo",children:"Servo Motor"}),i.jsx("option",{value:"Brushless",children:"Brushless DC"}),i.jsx("option",{value:"AC",children:"AC Motor"}),i.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-switchtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),i.jsxs("select",{id:`component-switchtype-${c.id}`,value:u.switchType||"Toggle",onChange:d=>v({...u,switchType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Toggle",children:"Toggle"}),i.jsx("option",{value:"Push-button",children:"Push-button"}),i.jsx("option",{value:"Slide",children:"Slide"}),i.jsx("option",{value:"Rotary",children:"Rotary"}),i.jsx("option",{value:"DIP",children:"DIP Switch"}),i.jsx("option",{value:"Momentary",children:"Momentary"}),i.jsx("option",{value:"Latching",children:"Latching"}),i.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:u.impedance||"",onChange:d=>v({...u,impedance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:u.impedanceUnit||Qe("impedance"),onChange:d=>v({...u,impedanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("impedance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-connectortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),i.jsx("input",{id:`component-connectortype-${c.id}`,type:"text",value:u.connectorType||"",onChange:d=>v({...u,connectorType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-gender-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),i.jsxs("select",{id:`component-gender-${c.id}`,value:u.gender||"N/A",onChange:d=>v({...u,gender:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),c.componentType==="Jumper"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-positions-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),i.jsx("input",{id:`component-positions-${c.id}`,type:"number",min:"2",value:u.positions||3,onChange:d=>v({...u,positions:parseInt(d.target.value)||3}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"}})]})}),c.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:u.impedance||"",onChange:d=>v({...u,impedance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 8"}),i.jsx("select",{value:u.impedanceUnit||Qe("impedance"),onChange:d=>v({...u,impedanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("impedance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>v({...u,power:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]})]}),c.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),i.jsx("input",{id:`component-inputvoltage-${c.id}`,type:"text",value:u.inputVoltage||"",onChange:d=>v({...u,inputVoltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:u.inputVoltageUnit||Qe("voltage"),onChange:d=>v({...u,inputVoltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-outputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),i.jsx("input",{id:`component-outputvoltage-${c.id}`,type:"text",value:u.outputVoltage||"",onChange:d=>v({...u,outputVoltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.outputVoltageUnit||Qe("voltage"),onChange:d=>v({...u,outputVoltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-transistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),i.jsxs("select",{id:`component-transistortype-${c.id}`,value:u.transistorType||"BJT",onChange:d=>v({...u,transistorType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),i.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),i.jsx("option",{value:"MOSFET",children:"MOSFET"}),i.jsx("option",{value:"IGBT",children:"IGBT"}),i.jsx("option",{value:"JFET",children:"JFET"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:u.polarity||"NPN",onChange:d=>v({...u,polarity:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NPN",children:"NPN"}),i.jsx("option",{value:"PNP",children:"PNP"}),i.jsx("option",{value:"N-Channel",children:"N-Channel"}),i.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:d=>v({...u,current:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Qe("current"),onChange:d=>v({...u,currentUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>v({...u,resistance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Qe("resistance"),onChange:d=>v({...u,resistanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-configuration-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),i.jsx("input",{id:`component-configuration-${c.id}`,type:"text",value:u.configuration||"",onChange:d=>v({...u,configuration:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),c.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>v({...u,resistance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Qe("resistance"),onChange:d=>v({...u,resistanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-thermistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),i.jsxs("select",{id:`component-thermistortype-${c.id}`,value:u.thermistorType||"NTC",onChange:d=>v({...u,thermistorType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),i.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-beta-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),i.jsx("input",{id:`component-beta-${c.id}`,type:"text",value:u.beta||"",onChange:d=>v({...u,beta:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),c.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-primaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),i.jsx("input",{id:`component-primaryvoltage-${c.id}`,type:"text",value:u.primaryVoltage||"",onChange:d=>v({...u,primaryVoltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:u.primaryVoltageUnit||Qe("voltage"),onChange:d=>v({...u,primaryVoltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-secondaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),i.jsx("input",{id:`component-secondaryvoltage-${c.id}`,type:"text",value:u.secondaryVoltage||"",onChange:d=>v({...u,secondaryVoltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.secondaryVoltageUnit||Qe("voltage"),onChange:d=>v({...u,secondaryVoltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>v({...u,power:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-turns-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),i.jsx("input",{id:`component-turns-${c.id}`,type:"text",value:u.turns||"",onChange:d=>v({...u,turns:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),c.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-signal-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),i.jsx("input",{id:`component-signal-${c.id}`,type:"text",value:u.signal||"",onChange:d=>v({...u,signal:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),c.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ictype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),i.jsxs("select",{id:`component-ictype-${c.id}`,value:u.icType||"Op-Amp",onChange:d=>v({...u,icType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),i.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),i.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),i.jsx("option",{value:"Logic",children:"Logic"}),i.jsx("option",{value:"Memory",children:"Memory"}),i.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),i.jsx("option",{value:"Timer",children:"Timer"}),i.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),i.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),i.jsx("option",{value:"Comparator",children:"Comparator"}),i.jsx("option",{value:"Transceiver",children:"Transceiver"}),i.jsx("option",{value:"Driver",children:"Driver"}),i.jsx("option",{value:"Amplifier",children:"Amplifier"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-datasheet-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),i.jsx("input",{id:`component-datasheet-${c.id}`,type:"text",value:u.datasheet||"",onChange:d=>v({...u,datasheet:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"URL"})]})]}),c.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tubetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),i.jsx("input",{id:`component-tubetype-${c.id}`,type:"text",value:u.tubeType||"",onChange:d=>v({...u,tubeType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),c.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-vrtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),i.jsxs("select",{id:`component-vrtype-${c.id}`,value:u.vrType||"Potentiometer",onChange:d=>v({...u,vrType:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),i.jsx("option",{value:"Rheostat",children:"Rheostat"}),i.jsx("option",{value:"Trimmer",children:"Trimmer"}),i.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:d=>v({...u,resistance:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Qe("resistance"),onChange:d=>v({...u,resistanceUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>v({...u,power:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-taper-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),i.jsxs("select",{id:`component-taper-${c.id}`,value:u.taper||"Linear",onChange:d=>v({...u,taper:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Linear",children:"Linear"}),i.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),i.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),c.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-frequency-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),i.jsx("input",{id:`component-frequency-${c.id}`,type:"text",value:u.frequency||"",onChange:d=>v({...u,frequency:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-loadcapacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),i.jsx("input",{id:`component-loadcapacitance-${c.id}`,type:"text",value:u.loadCapacitance||"",onChange:d=>v({...u,loadCapacitance:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"10ppm",onChange:d=>v({...u,tolerance:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"10ppm",children:"10ppm"}),i.jsx("option",{value:"20ppm",children:"20ppm"}),i.jsx("option",{value:"30ppm",children:"30ppm"}),i.jsx("option",{value:"50ppm",children:"50ppm"}),i.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),c.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:d=>v({...u,voltage:d.target.value}),disabled:p,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1},placeholder:"e.g., 5.1"}),i.jsx("select",{value:u.voltageUnit||Qe("voltage"),onChange:d=>v({...u,voltageUnit:d.target.value}),disabled:p,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,width:"60px",marginRight:"12px"},children:en("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:d=>v({...u,power:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"5%",onChange:d=>v({...u,tolerance:d.target.value}),disabled:p,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:p?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),Sx=c=>{const u=Cd[c];return!u||!u.prefix||u.prefix.length<1?"?":u.prefix[0].substring(0,1).toUpperCase()},wx=({componentEditor:c,setComponentEditor:u,componentsTop:v,componentsBottom:p,setComponentsTop:d,setComponentsBottom:B,connectingPin:L,setConnectingPin:ge,componentDialogPosition:F,setComponentDialogPosition:H,isDraggingDialog:je,setIsDraggingDialog:P,dialogDragOffset:de,setDialogDragOffset:fe,areComponentsLocked:Y})=>{if(!c||!c.visible)return null;let q=v.find(k=>k.id===c.id),_e="top";if(q||(q=p.find(k=>k.id===c.id),_e="bottom"),!q)return null;c.layer!==_e&&u({...c,layer:_e});const Ee=k=>{const U={...k},M=c.abbreviation?.trim()||"",T=c.designator?.trim()||"";if(U.designator=T&&T!=="?"&&T!=="??"&&T!=="***"&&T!=="****"&&T!=="*"?T:M||c.designator||"",U.x=c.x,U.y=c.y,U.layer=c.layer,U.orientation=c.orientation??0,U.abbreviation=c.abbreviation.trim()||Sx(k.componentType),"manufacturer"in U&&(U.manufacturer=c.manufacturer),"partNumber"in U&&(U.partNumber=c.partNumber),c.pinCount!==k.pinCount){U.pinCount=c.pinCount;const g=k.pinConnections||[];if(U.pinConnections=new Array(c.pinCount).fill("").map((W,we)=>we<g.length?g[we]:""),k.pinPolarities){const W=k.pinPolarities||[];U.pinPolarities=new Array(c.pinCount).fill("").map((we,tt)=>tt<W.length?W[tt]:"")}}else U.pinConnections=k.pinConnections||[],k.pinPolarities&&(U.pinPolarities=k.pinPolarities);return k.componentType==="Resistor"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.tolerance=c.tolerance||void 0):k.componentType==="Capacitor"?(U.capacitance=c.capacitance||void 0,U.capacitanceUnit=c.capacitanceUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.tolerance=c.tolerance||void 0,U.dielectric=c.dielectric||void 0):k.componentType==="Electrolytic Capacitor"?(U.capacitance=c.capacitance||void 0,U.capacitanceUnit=c.capacitanceUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.tolerance=c.tolerance||void 0,U.polarity=c.polarityCapacitor||void 0,U.esr=c.esr||void 0,U.esrUnit=c.esrUnit||void 0,U.temperature=c.temperature||void 0):k.componentType==="Diode"?(U.diodeType=c.diodeType||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.ledColor=c.ledColor||void 0):k.componentType==="Battery"?(U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.capacity=c.capacity||void 0,U.capacityUnit=c.capacityUnit||void 0,U.chemistry=c.chemistry||void 0):k.componentType==="Fuse"?(U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.fuseType=c.fuseType||void 0):k.componentType==="FerriteBead"?(U.impedance=c.impedance||void 0,U.impedanceUnit=c.impedanceUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):k.componentType==="Connector"?(U.connectorType=c.connectorType||void 0,U.gender=c.gender||void 0):k.componentType==="Jumper"?U.positions=c.positions||void 0:k.componentType==="Relay"?(U.coilVoltage=c.coilVoltage||void 0,U.coilVoltageUnit=c.coilVoltageUnit||void 0,U.contactType=c.contactType||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):k.componentType==="Inductor"?(U.inductance=c.inductance||void 0,U.inductanceUnit=c.inductanceUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0):k.componentType==="Speaker"?(U.impedance=c.impedance||void 0,U.impedanceUnit=c.impedanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0):k.componentType==="Motor"?(U.motorType=c.motorType||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):k.componentType==="PowerSupply"?(U.inputVoltage=c.inputVoltage||void 0,U.inputVoltageUnit=c.inputVoltageUnit||void 0,U.outputVoltage=c.outputVoltage||void 0,U.outputVoltageUnit=c.outputVoltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):k.componentType==="Transistor"?(U.transistorType=c.transistorType||void 0,U.polarity=c.polarity||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0):k.componentType==="ResistorNetwork"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.configuration=c.configuration||void 0):k.componentType==="Thermistor"?(U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.thermistorType=c.thermistorType||void 0,U.beta=c.beta||void 0):k.componentType==="Switch"?(U.switchType=c.switchType||void 0,U.current=c.current||void 0,U.currentUnit=c.currentUnit||void 0,U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0):k.componentType==="Transformer"?(U.primaryVoltage=c.primaryVoltage||void 0,U.primaryVoltageUnit=c.primaryVoltageUnit||void 0,U.secondaryVoltage=c.secondaryVoltage||void 0,U.secondaryVoltageUnit=c.secondaryVoltageUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.turns=c.turns||void 0):k.componentType==="TestPoint"?U.signal=c.signal||void 0:k.componentType==="IntegratedCircuit"?(U.description=c.description||c.designator||void 0,U.datasheet=c.datasheet||void 0,U.icType=c.icType||void 0,c.description&&(U.designator=c.description)):k.componentType==="VacuumTube"?U.tubeType=c.tubeType||void 0:k.componentType==="VariableResistor"?(U.vrType=c.vrType||void 0,U.resistance=c.resistance||void 0,U.resistanceUnit=c.resistanceUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.taper=c.taper||void 0):k.componentType==="Crystal"?(U.frequency=c.frequency||void 0,U.loadCapacitance=c.loadCapacitance||void 0,U.tolerance=c.tolerance||void 0):k.componentType==="ZenerDiode"&&(U.voltage=c.voltage||void 0,U.voltageUnit=c.voltageUnit||void 0,U.power=c.power?`${c.power}W`:void 0,U.tolerance=c.tolerance||void 0),U},E=()=>{if(Y){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const k=v.find(T=>T.id===c.id),U=p.find(T=>T.id===c.id),M=k||U;if(M){const T=Ee(M),g=M.layer,W=c.layer;g!==W?g==="top"?(d(we=>we.filter(tt=>tt.id!==c.id)),B(we=>[...we,T])):(B(we=>we.filter(tt=>tt.id!==c.id)),d(we=>[...we,T])):W==="top"?d(we=>we.map(tt=>tt.id===c.id?T:tt)):B(we=>we.map(tt=>tt.id===c.id?T:tt))}else if(console.warn(`Component ${c.id} not found in either layer array`),c.layer==="top"){const T=p.find(g=>g.id===c.id);if(T){const g=Ee(T);B(W=>W.filter(we=>we.id!==c.id)),d(W=>[...W,g])}}else{const T=v.find(g=>g.id===c.id);if(T){const g=Ee(T);d(W=>W.filter(we=>we.id!==c.id)),B(W=>[...W,g])}}u(null),ge(null)};return i.jsxs("div",{"data-component-editor-dialog":!0,onClick:k=>{if(L&&L.componentId===q.id){const U=k.target;(U.tagName==="BUTTON"||U.tagName==="INPUT"||U.closest("button")||U.closest("input"))&&k.stopPropagation()}},style:{position:"fixed",top:F?`${F.y}px`:"50%",left:F?`${F.x}px`:"50%",transform:"translate(-50%, -50%)",background:L&&L.componentId===q.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:je?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:k=>{const U=k.target;U.tagName==="BUTTON"||U.tagName==="INPUT"||U.closest("button")||U.closest("input")||F&&(fe({x:k.clientX-F.x,y:k.clientY-F.y}),P(!0),k.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:je?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),i.jsx("button",{onClick:()=>{u(null),ge(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),i.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:q.componentType})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-layer-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),i.jsxs("select",{id:`component-layer-${q.id}`,name:`component-layer-${q.id}`,value:c.layer,onChange:k=>u({...c,layer:k.target.value}),disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Y?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-orientation-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),i.jsxs("select",{id:`component-orientation-${q.id}`,name:`component-orientation-${q.id}`,value:c.orientation??0,onChange:k=>{const U=parseInt(k.target.value)||0;if(u({...c,orientation:U}),!Y){const T=(c.layer==="top"?v:p).find(g=>g.id===c.id);if(T){const g={...T,orientation:U};c.layer==="top"?d(W=>W.map(we=>we.id===c.id?g:we)):B(W=>W.map(we=>we.id===c.id?g:we))}}},disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Y?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0",children:"0"}),i.jsx("option",{value:"90",children:"90"}),i.jsx("option",{value:"180",children:"180"}),i.jsx("option",{value:"270",children:"270"})]})]}),i.jsx(mx,{component:q,componentEditor:c,setComponentEditor:u,areComponentsLocked:Y}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{htmlFor:`component-abbreviation-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),i.jsx("input",{id:`component-abbreviation-${q.id}`,name:`component-abbreviation-${q.id}`,type:"text",maxLength:4,value:c.abbreviation.replace(/\*/g,""),onChange:k=>{const U=k.target.value.substring(0,4).toUpperCase();u({...c,abbreviation:U})},onBlur:k=>{const U=k.target.value.substring(0,4).toUpperCase();u({...c,abbreviation:U})},disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:Y?.6:1},placeholder:"e.g., U2, R7, C1"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-description-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),i.jsx("input",{id:`component-description-${q.id}`,name:`component-description-${q.id}`,type:"text",value:q.componentType==="IntegratedCircuit"?c.description||c.designator||"":c.designator||"",onChange:k=>{q.componentType==="IntegratedCircuit"?u({...c,description:k.target.value,designator:k.target.value}):u({...c,designator:k.target.value})},disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Y?.6:1},placeholder:q.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-x-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),i.jsx("input",{id:`component-x-${q.id}`,name:`component-x-${q.id}`,type:"number",value:c.x.toFixed(2),onChange:k=>{const U=parseFloat(k.target.value)||0;u({...c,x:U})},disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Y?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-y-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),i.jsx("input",{id:`component-y-${q.id}`,name:`component-y-${q.id}`,type:"number",value:c.y.toFixed(2),onChange:k=>{const U=parseFloat(k.target.value)||0;u({...c,y:U})},disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Y?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-manufacturer-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),i.jsx("input",{id:`component-manufacturer-${q.id}`,name:`component-manufacturer-${q.id}`,type:"text",value:c.manufacturer,onChange:k=>u({...c,manufacturer:k.target.value}),disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Y?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-partnumber-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),i.jsx("input",{id:`component-partnumber-${q.id}`,name:`component-partnumber-${q.id}`,type:"text",value:c.partNumber,onChange:k=>u({...c,partNumber:k.target.value}),disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Y?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${q.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${q.id}`,name:`component-pincount-${q.id}`,type:"number",min:"1",value:c.pinCount,onChange:k=>{const U=Math.max(1,parseInt(k.target.value)||1);u({...c,pinCount:U})},onBlur:k=>{if(Y){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const U=Math.max(1,parseInt(k.target.value)||1),T=(c.layer==="top"?v:p).find(g=>g.id===c.id);if(T&&U!==T.pinCount){const g=T.pinConnections||[],W=new Array(U).fill("").map((ke,Ye)=>Ye<g.length?g[Ye]:""),we=T.pinPolarities||[],tt=T.pinPolarities?new Array(U).fill("").map((ke,Ye)=>Ye<we.length?we[Ye]:""):void 0,Ke={...T,pinCount:U,pinConnections:W,...tt!==void 0&&{pinPolarities:tt}};c.layer==="top"?d(ke=>ke.map(Ye=>Ye.id===c.id?Ke:Ye)):B(ke=>ke.map(Ye=>Ye.id===c.id?Ke:Ye)),u({...c,pinCount:U})}},disabled:Y,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Y?.6:1}})]}),i.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),L&&L.componentId===q.id&&i.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",L.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const k=q.componentType==="Electrolytic Capacitor"||q.componentType==="Diode"||q.componentType==="Battery"||q.componentType==="ZenerDiode",U=q.componentType==="Capacitor"&&"dielectric"in q&&q.dielectric==="Tantalum",M=k||U;return i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),M&&i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),i.jsx("tbody",{children:Array.from({length:c.pinCount},(T,g)=>{const we=(c.layer==="top"?v:p).find(Ye=>Ye.id===c.id),tt=we?.pinConnections&&we.pinConnections.length>g?we.pinConnections[g]:"",Ke=we?.pinPolarities&&we.pinPolarities.length>g&&we.pinPolarities[g]||"",ke=L&&L.componentId===q.id&&L.pinIndex===g;return i.jsxs("tr",{style:{cursor:Y?"not-allowed":"pointer",background:ke?"#e6f0ff":tt?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:Ye=>{if(Ye.target.tagName!=="SELECT"){if(Y){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}ge(ke?null:{componentId:q.id,pinIndex:g})}},title:tt?`Connected to: ${tt}`:"Select this pin, then click on a via or pad to connect",children:[i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsx("input",{id:`pin-radio-${q.id}-${g}`,name:`pin-radio-${q.id}`,type:"radio",checked:!!ke,onChange:()=>{if(Y){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}ge(ke?null:{componentId:q.id,pinIndex:g})},disabled:Y,style:{margin:0,cursor:Y?"not-allowed":"pointer",opacity:Y?.6:1,width:"10px",height:"10px"}})}),i.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:ke?600:400,fontFamily:"monospace"},children:g+1}),M&&i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsxs("select",{value:Ke??"",onChange:Ye=>{if(Y){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const Pt=Ye.target.value,_=(c.layer==="top"?v:p).find(ne=>ne.id===c.id);if(_){const Me=[..._.pinPolarities||new Array(_.pinCount).fill("")];for(;Me.length<_.pinCount;)Me.push("");Me[g]=Pt;const ie={..._,pinPolarities:Me};c.layer==="top"?d(m=>m.map(D=>D.id===c.id?ie:D)):B(m=>m.map(D=>D.id===c.id?ie:D))}},disabled:Y,onClick:Ye=>Ye.stopPropagation(),onFocus:Ye=>Ye.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:Y?"not-allowed":"pointer",opacity:Y?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[i.jsx("option",{value:"",children:"-"}),i.jsx("option",{value:"+",children:"+"}),i.jsx("option",{value:"-",children:"-"})]},`polarity-${q.id}-${g}-${Ke}`)}),i.jsx("td",{style:{padding:"2px 4px",color:tt?"#28a745":"#999",fontWeight:tt?600:400,fontFamily:"monospace"},children:tt||"-"})]},g)})})]})})()]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[i.jsx("button",{onClick:()=>{u(null),ge(null)},disabled:Y,style:{padding:"2px 5px",background:Y?"#f5f5f5":"#fff",color:Y?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:Y?"not-allowed":"pointer",fontSize:"10px",opacity:Y?.6:1},children:"Cancel"}),i.jsx("button",{onClick:E,disabled:Y,style:{padding:"2px 5px",background:Y?"#f5f5f5":"#0b5fff",color:Y?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Y?"not-allowed":"pointer",fontSize:"10px",opacity:Y?.6:1},children:"Save"})]})]})};function jx(){const[c,u]=C.useState([]),[v,p]=C.useState(!1),[d,B]=C.useState([]),[L,ge]=C.useState(null),[F,H]=C.useState("trace"),[je,P]=C.useState("top"),de=C.useRef([]),fe=C.useRef(0),Y=C.useRef(!1),q=C.useCallback(()=>{p(!0),B([]),de.current=[]},[]),_e=C.useCallback(()=>{p(!1),B([]),de.current=[]},[]),Ee=C.useCallback(k=>{B(U=>[...U,k]),de.current=[...de.current,k]},[]),E=C.useCallback(k=>{u(U=>[...U,k]),B([]),de.current=[]},[]);return{drawingStrokes:c,setDrawingStrokes:u,isDrawing:v,setIsDrawing:p,currentStroke:d,setCurrentStroke:B,tracePreviewMousePos:L,setTracePreviewMousePos:ge,drawingMode:F,setDrawingMode:H,selectedDrawingLayer:je,setSelectedDrawingLayer:P,currentStrokeRef:de,lastTraceClickTimeRef:fe,isDoubleClickingTraceRef:Y,startDrawing:q,stopDrawing:_e,addPointToStroke:Ee,finishStroke:E}}function Tx(){const[c,u]=C.useState(new Set),[v,p]=C.useState(!1),[d,B]=C.useState(new Set),[L,ge]=C.useState(new Set),[F,H]=C.useState(new Set),je=C.useCallback(()=>{u(new Set),B(new Set),ge(new Set),H(new Set)},[]),P=C.useCallback((Y,q="stroke")=>{q==="stroke"?u(_e=>new Set([..._e,Y])):q==="component"?B(_e=>new Set([..._e,Y])):q==="power"?ge(_e=>new Set([..._e,Y])):q==="ground"&&H(_e=>new Set([..._e,Y]))},[]),de=C.useCallback((Y,q="stroke")=>{q==="stroke"?u(_e=>{const Ee=new Set(_e);return Ee.delete(Y),Ee}):q==="component"?B(_e=>{const Ee=new Set(_e);return Ee.delete(Y),Ee}):q==="power"?ge(_e=>{const Ee=new Set(_e);return Ee.delete(Y),Ee}):q==="ground"&&H(_e=>{const Ee=new Set(_e);return Ee.delete(Y),Ee})},[]),fe=C.useCallback((Y,q="stroke")=>{q==="stroke"?u(Y):q==="component"?B(Y):q==="power"?ge(Y):q==="ground"&&H(Y)},[]);return{selectedIds:c,setSelectedIds:u,isSelecting:v,setIsSelecting:p,selectedComponentIds:d,setSelectedComponentIds:B,selectedPowerIds:L,setSelectedPowerIds:ge,selectedGroundIds:F,setSelectedGroundIds:H,clearSelection:je,addToSelection:P,removeFromSelection:de,setSelection:fe}}function Cx(){const[c,u]=C.useState(null),[v,p]=C.useState(!1),[d,B]=C.useState(null),[L,ge]=C.useState("nudge"),F=C.useCallback((je,P)=>{u(je),p(!0),B(P)},[]),H=C.useCallback(()=>{p(!1),u(null),B(null)},[]);return{selectedImageForTransform:c,setSelectedImageForTransform:u,isTransforming:v,setIsTransforming:p,transformStartPos:d,setTransformStartPos:B,transformMode:L,setTransformMode:ge,startTransform:F,stopTransform:H}}function zx(){const[c,u]=C.useState(null),[v,p]=C.useState(null),[d,B]=C.useState("overlay"),[L,ge]=C.useState(50),[F,H]=C.useState(!1),[je,P]=C.useState(!1),[de,fe]=C.useState(!1),[Y,q]=C.useState(!1),_e=C.useCallback(k=>{u(k)},[]),Ee=C.useCallback(k=>{p(k)},[]),E=C.useCallback(()=>{u(null),p(null)},[]);return{topImage:c,setTopImage:u,bottomImage:v,setBottomImage:p,currentView:d,setCurrentView:B,transparency:L,setTransparency:ge,isTransparencyCycling:F,setIsTransparencyCycling:H,isGrayscale:je,setIsGrayscale:P,isBlackAndWhiteEdges:de,setIsBlackAndWhiteEdges:fe,isBlackAndWhiteInverted:Y,setIsBlackAndWhiteInverted:q,loadTopImage:_e,loadBottomImage:Ee,clearImages:E}}function Rx(){const[c,u]=C.useState(1),[v,p]=C.useState({x:0,y:0}),[d,B]=C.useState(!1),[L,ge]=C.useState(!1),F=C.useCallback(()=>{u(1),p({x:0,y:0})},[]),H=C.useCallback((Y=1.2)=>{u(q=>q*Y)},[]),je=C.useCallback((Y=1.2)=>{u(q=>q/Y)},[]),P=C.useCallback(Y=>{u(Y)},[]),de=C.useCallback((Y,q)=>{p(_e=>({x:_e.x+Y,y:_e.y+q}))},[]),fe=C.useCallback((Y,q)=>{p({x:Y,y:q})},[]);return{viewScale:c,setViewScale:u,viewPan:v,setViewPan:p,isShiftConstrained:d,setIsShiftConstrained:B,showBothLayers:L,setShowBothLayers:ge,resetView:F,zoomIn:H,zoomOut:je,setZoom:P,pan:de,setPan:fe}}function Ht(c,u,v,p){if(u==="power"){const B=c[u]||"";return typeof B=="string"&&B.trim()!==""?{value:B.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[u]!==void 0||c[v]!==void 0)return{value:c[u]||"",unit:c[v]||p};const d=c[u]||"";return typeof d=="string"&&d.trim()!==""?Dx(d):{value:"",unit:p}}function Dx(c){if(!c||c.trim()==="")return{value:"",unit:""};const u=c.trim(),v=u.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(v)return{value:v[1],unit:v[2]||""};const p=u.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return p?{value:p[1],unit:p[2]||""}:{value:u,unit:""}}function kx(){const[c,u]=C.useState([]),[v,p]=C.useState([]),[d,B]=C.useState(null),[L,ge]=C.useState(null),[F,H]=C.useState(null),[je,P]=C.useState(!1),[de,fe]=C.useState(null),Y=C.useCallback((k,U)=>{U==="top"?u(M=>[...M,k]):p(M=>[...M,k])},[]),q=C.useCallback((k,U,M)=>{M==="top"?u(T=>T.map(g=>g.id===k?{...g,...U}:g)):p(T=>T.map(g=>g.id===k?{...g,...U}:g))},[]),_e=C.useCallback((k,U)=>{U==="top"?u(M=>M.filter(T=>T.id!==k)):p(M=>M.filter(T=>T.id!==k))},[]),Ee=C.useCallback((k,U)=>{const M={visible:!0,layer:U,id:k.id,designator:k.designator||"",abbreviation:k.abbreviation||"",manufacturer:"manufacturer"in k&&k.manufacturer||"",partNumber:"partNumber"in k&&k.partNumber||"",pinCount:k.pinCount,x:k.x,y:k.y,orientation:k.orientation??0};if(k.componentType==="Resistor"){const T=k,g=Ht(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=g.value,M.resistanceUnit=g.unit;const W=Ht(T,"power","powerUnit","W");M.power=W.value||"1/4",M.tolerance=T.tolerance||"5%"}else if(k.componentType==="Capacitor"){const T=k,g=Ht(T,"capacitance","capacitanceUnit",Qe("capacitance"));M.capacitance=g.value,M.capacitanceUnit=g.unit;const W=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=W.value,M.voltageUnit=W.unit,M.tolerance=T.tolerance||"10%",M.dielectric=T.dielectric||"Ceramic"}else if(k.componentType==="Electrolytic Capacitor"){const T=k,g=Ht(T,"capacitance","capacitanceUnit",Qe("capacitance"));M.capacitance=g.value,M.capacitanceUnit=g.unit;const W=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=W.value,M.voltageUnit=W.unit,M.tolerance=T.tolerance||"20%",M.polarityCapacitor=T.polarity||"Positive";const we=Ht(T,"esr","esrUnit",Qe("esr"));M.esr=we.value,M.esrUnit=we.unit,M.temperature=T.temperature||""}else if(k.componentType==="Diode"){const T=k;M.diodeType=T.diodeType||"Standard";const g=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const W=Ht(T,"current","currentUnit",Qe("current"));M.current=W.value,M.currentUnit=W.unit,M.ledColor=T.ledColor||""}else if(k.componentType==="Battery"){const T=k,g=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const W=Ht(T,"capacity","capacityUnit",Qe("capacity"));M.capacity=W.value,M.capacityUnit=W.unit,M.chemistry=T.chemistry||"Li-ion"}else if(k.componentType==="Fuse"){const T=k,g=Ht(T,"current","currentUnit",Qe("current"));M.current=g.value,M.currentUnit=g.unit;const W=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=W.value,M.voltageUnit=W.unit,M.fuseType=T.fuseType||"Fast-blow"}else if(k.componentType==="FerriteBead"){const T=k,g=Ht(T,"impedance","impedanceUnit",Qe("impedance"));M.impedance=g.value,M.impedanceUnit=g.unit;const W=Ht(T,"current","currentUnit",Qe("current"));M.current=W.value,M.currentUnit=W.unit}else if(k.componentType==="Connector"){const T=k;M.connectorType=T.connectorType||"",M.gender=T.gender||"N/A"}else if(k.componentType==="Jumper"){const T=k;M.positions=T.positions||3}else if(k.componentType==="Relay"){const T=k,g=Ht(T,"coilVoltage","coilVoltageUnit",Qe("coilVoltage"));M.coilVoltage=g.value,M.coilVoltageUnit=g.unit,M.contactType=T.contactType||"SPST";const W=Ht(T,"current","currentUnit",Qe("current"));M.current=W.value,M.currentUnit=W.unit}else if(k.componentType==="Inductor"){const T=k,g=Ht(T,"inductance","inductanceUnit",Qe("inductance"));M.inductance=g.value,M.inductanceUnit=g.unit;const W=Ht(T,"current","currentUnit",Qe("current"));M.current=W.value,M.currentUnit=W.unit;const we=Ht(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=we.value,M.resistanceUnit=we.unit}else if(k.componentType==="Speaker"){const T=k,g=Ht(T,"impedance","impedanceUnit",Qe("impedance"));M.impedance=g.value,M.impedanceUnit=g.unit;const W=Ht(T,"power","powerUnit","W");M.power=W.value||"1"}else if(k.componentType==="Motor"){const T=k;M.motorType=T.motorType||"DC";const g=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const W=Ht(T,"current","currentUnit",Qe("current"));M.current=W.value,M.currentUnit=W.unit}else if(k.componentType==="PowerSupply"){const T=k,g=Ht(T,"inputVoltage","inputVoltageUnit",Qe("inputVoltage"));M.inputVoltage=g.value,M.inputVoltageUnit=g.unit;const W=Ht(T,"outputVoltage","outputVoltageUnit",Qe("outputVoltage"));M.outputVoltage=W.value,M.outputVoltageUnit=W.unit;const we=Ht(T,"current","currentUnit",Qe("current"));M.current=we.value,M.currentUnit=we.unit}else if(k.componentType==="Transistor"){const T=k;M.transistorType=T.transistorType||"BJT",M.polarity=T.polarity||"NPN";const g=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const W=Ht(T,"current","currentUnit",Qe("current"));M.current=W.value,M.currentUnit=W.unit}else if(k.componentType==="ResistorNetwork"){const T=k,g=Ht(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=g.value,M.resistanceUnit=g.unit,M.configuration=T.configuration||""}else if(k.componentType==="Thermistor"){const T=k,g=Ht(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=g.value,M.resistanceUnit=g.unit,M.thermistorType=T.thermistorType||"NTC",M.beta=T.beta||""}else if(k.componentType==="Switch"){const T=k;M.switchType=T.switchType||"Toggle";const g=Ht(T,"current","currentUnit",Qe("current"));M.current=g.value,M.currentUnit=g.unit;const W=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=W.value,M.voltageUnit=W.unit}else if(k.componentType==="Transformer"){const T=k,g=Ht(T,"primaryVoltage","primaryVoltageUnit",Qe("primaryVoltage"));M.primaryVoltage=g.value,M.primaryVoltageUnit=g.unit;const W=Ht(T,"secondaryVoltage","secondaryVoltageUnit",Qe("secondaryVoltage"));M.secondaryVoltage=W.value,M.secondaryVoltageUnit=W.unit;const we=Ht(T,"power","powerUnit",Qe("power"));M.power=we.value||"1",M.turns=T.turns||""}else if(k.componentType==="TestPoint"){const T=k;M.signal=T.signal||""}else if(k.componentType==="IntegratedCircuit"){const T=k;M.description=T.description||"",M.datasheet=T.datasheet||"",M.icType=T.icType||"Op-Amp"}else if(k.componentType==="VacuumTube"){const T=k;M.tubeType=T.tubeType||""}else if(k.componentType==="VariableResistor"){const T=k;M.vrType=T.vrType||"Potentiometer";const g=Ht(T,"resistance","resistanceUnit",Qe("resistance"));M.resistance=g.value,M.resistanceUnit=g.unit;const W=Ht(T,"power","powerUnit",Qe("power"));M.power=W.value||"1/4",M.taper=T.taper||""}else if(k.componentType==="Crystal"){const T=k;M.frequency=T.frequency||"",M.loadCapacitance=T.loadCapacitance||"",M.tolerance=T.tolerance||""}else if(k.componentType==="ZenerDiode"){const T=k,g=Ht(T,"voltage","voltageUnit",Qe("voltage"));M.voltage=g.value,M.voltageUnit=g.unit;const W=Ht(T,"power","powerUnit",Qe("power"));M.power=W.value||"1/4",M.tolerance=T.tolerance||"5%"}B(M)},[]),E=C.useCallback(()=>{B(null),ge(null)},[]);return{componentsTop:c,setComponentsTop:u,componentsBottom:v,setComponentsBottom:p,componentEditor:d,setComponentEditor:B,connectingPin:L,setConnectingPin:ge,componentDialogPosition:F,setComponentDialogPosition:H,isDraggingDialog:je,setIsDraggingDialog:P,dialogDragOffset:de,setDialogDragOffset:fe,addComponent:Y,updateComponent:q,removeComponent:_e,openComponentEditor:Ee,closeComponentEditor:E}}function Ax(){const[c,u]=C.useState([]),[v,p]=C.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),[d,B]=C.useState([]),[L,ge]=C.useState([]),[F,H]=C.useState(null),[je,P]=C.useState(null),de=C.useCallback(T=>{u(g=>[...g,T])},[]),fe=C.useCallback((T,g)=>{u(W=>W.map(we=>we.id===T?{...we,...g}:we))},[]),Y=C.useCallback(T=>{u(g=>g.filter(W=>W.id!==T)),B(g=>g.filter(W=>W.powerBusId!==T))},[]),q=C.useCallback(T=>{B(g=>[...g,T])},[]),_e=C.useCallback(T=>{B(g=>g.filter(W=>W.id!==T))},[]),Ee=C.useCallback(T=>{ge(g=>[...g,T])},[]),E=C.useCallback(T=>{ge(g=>g.filter(W=>W.id!==T))},[]),k=C.useCallback(T=>{p(g=>[...g,T])},[]),U=C.useCallback((T,g)=>{p(W=>W.map(we=>we.id===T?{...we,...g}:we))},[]),M=C.useCallback(T=>{p(g=>g.filter(W=>W.id!==T)),ge(g=>g.filter(W=>W.groundBusId===T))},[]);return{powerBuses:c,setPowerBuses:u,groundBuses:v,setGroundBuses:p,powerSymbols:d,setPowerSymbols:B,groundSymbols:L,setGroundSymbols:ge,powerEditor:F,setPowerEditor:H,groundEditor:je,setGroundEditor:P,addPowerBus:de,updatePowerBus:fe,removePowerBus:Y,addPowerSymbol:q,removePowerSymbol:_e,addGroundSymbol:Ee,removeGroundSymbol:E,addGroundBus:k,updateGroundBus:U,removeGroundBus:M}}function Nx(){const u=C.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"18",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"18",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"18",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[])(),[v,p]=C.useState(u.brushColor),[d,B]=C.useState(u.brushSize),[L,ge]=C.useState(u.topTraceColor),[F,H]=C.useState(u.bottomTraceColor),[je,P]=C.useState(u.topTraceSize),[de,fe]=C.useState(u.bottomTraceSize),[Y,q]=C.useState(u.topPadColor),[_e,Ee]=C.useState(u.bottomPadColor),[E,k]=C.useState(u.topPadSize),[U,M]=C.useState(u.bottomPadSize),[T,g]=C.useState(u.topComponentColor),[W,we]=C.useState(u.bottomComponentColor),[tt,Ke]=C.useState(u.topComponentSize),[ke,Ye]=C.useState(u.bottomComponentSize),Pt=C.useCallback((_,ne,Me)=>{_==="trace"&&Me?Me==="top"?localStorage.setItem("defaultTopTraceSize",String(ne)):localStorage.setItem("defaultBottomTraceSize",String(ne)):_==="pad"&&Me?Me==="top"?localStorage.setItem("defaultTopPadSize",String(ne)):localStorage.setItem("defaultBottomPadSize",String(ne)):_==="component"&&Me?Me==="top"?localStorage.setItem("defaultTopComponentSize",String(ne)):localStorage.setItem("defaultBottomComponentSize",String(ne)):_==="via"?localStorage.setItem("defaultViaSize",String(ne)):_==="power"?localStorage.setItem("defaultPowerSize",String(ne)):_==="ground"?localStorage.setItem("defaultGroundSize",String(ne)):_==="brush"&&localStorage.setItem("defaultBrushSize",String(ne))},[]),at=C.useCallback((_,ne,Me)=>{_==="trace"&&Me?Me==="top"?localStorage.setItem("defaultTopTraceColor",ne):localStorage.setItem("defaultBottomTraceColor",ne):_==="pad"&&Me?Me==="top"?localStorage.setItem("defaultTopPadColor",ne):localStorage.setItem("defaultBottomPadColor",ne):_==="component"&&Me?Me==="top"?localStorage.setItem("defaultTopComponentColor",ne):localStorage.setItem("defaultBottomComponentColor",ne):_==="via"?localStorage.setItem("defaultViaColor",ne):_==="brush"&&localStorage.setItem("defaultBrushColor",ne)},[]);return{brushColor:v,setBrushColor:p,brushSize:d,setBrushSize:B,topTraceColor:L,setTopTraceColor:ge,bottomTraceColor:F,setBottomTraceColor:H,topTraceSize:je,setTopTraceSize:P,bottomTraceSize:de,setBottomTraceSize:fe,topPadColor:Y,setTopPadColor:q,bottomPadColor:_e,setBottomPadColor:Ee,topPadSize:E,setTopPadSize:k,bottomPadSize:U,setBottomPadSize:M,topComponentColor:T,setTopComponentColor:g,bottomComponentColor:W,setBottomComponentColor:we,topComponentSize:tt,setTopComponentSize:Ke,bottomComponentSize:ke,setBottomComponentSize:Ye,saveDefaultSize:Pt,saveDefaultColor:at}}const Mx=(c,u,v)=>{const p=`tool_${c}_color`,d=`tool_${c}_size`;localStorage.setItem(p,u),localStorage.setItem(d,String(v))};function Ux(c,u,v,p,d,B,L,ge,F,H,je,P,de,fe,Y,q,_e,Ee,E,k){const[U,M]=C.useState(()=>c()),T=C.useRef(null),g=C.useRef(p),W=C.useRef(d),we=C.useCallback(ke=>u==="draw"&&v==="trace"?ke.get("trace"):u==="draw"&&v==="via"?ke.get("via"):u==="draw"&&v==="pad"?ke.get("pad"):u==="component"?ke.get("component"):u==="power"?ke.get("power"):u==="ground"?ke.get("ground"):null,[u,v]);C.useEffect(()=>{M(ke=>{const Ye=we(ke),Pt=Ye?.id||null,at=T.current,_=new Map(ke);if(at&&at!==Pt){const ne=ke.get(at);ne&&(Mx(at,g.current,W.current),_.set(at,{...ne,settings:{color:g.current,size:W.current}}))}if(Ye&&Pt!==at)if(u==="draw"&&v==="trace"){const ne=Ee||"top",Me=ne==="top"?B:L,ie=ne==="top"?ge:F;g.current=Me,W.current=ie,_.set("trace",{...Ye,settings:{color:Me,size:ie}})}else if(u==="draw"&&v==="pad"){const ne=E||"top",Me=ne==="top"?H:je,ie=ne==="top"?P:de;g.current=Me,W.current=ie,_.set("pad",{...Ye,settings:{color:Me,size:ie}})}else if(u==="component"){const ne=k||"top",Me=ne==="top"?fe:Y,ie=ne==="top"?q:_e;g.current=Me,W.current=ie,_.set("component",{...Ye,settings:{color:Me,size:ie}})}else g.current=Ye.settings.color,W.current=Ye.settings.size;return T.current=Pt,_})},[u,v,p,d,B,L,ge,F,H,je,P,de,fe,Y,q,_e,Ee,E,k,we]);const tt=C.useCallback((ke,Ye)=>{M(Pt=>{const at=new Map(Pt),_=at.get(ke);return _&&at.set(ke,{..._,settings:Ye}),at})},[]),Ke=C.useCallback((ke,Ye,Pt)=>{M(at=>{const _=new Map(at),ne=_.get(ke);if(ne){const Me=new Map(ne.layerSettings);Me.set(Ye,Pt),_.set(ke,{...ne,layerSettings:Me})}return _})},[]);return{toolRegistry:U,setToolRegistry:M,updateToolSettings:tt,updateToolLayerSettings:Ke,getCurrentToolDef:we}}function Bx(){const[c,u]=C.useState(!1),[v,p]=C.useState(!1),[d,B]=C.useState(!1),[L,ge]=C.useState(!1),[F,H]=C.useState(!1),[je,P]=C.useState(!1),[de,fe]=C.useState(!1),Y=C.useCallback(()=>{u(!0),p(!0),B(!0),ge(!0),H(!0),P(!0),fe(!0)},[]),q=C.useCallback(()=>{u(!1),p(!1),B(!1),ge(!1),H(!1),P(!1),fe(!1)},[]);return{areImagesLocked:c,setAreImagesLocked:u,areViasLocked:v,setAreViasLocked:p,arePadsLocked:d,setArePadsLocked:B,areTracesLocked:L,setAreTracesLocked:ge,areComponentsLocked:F,setAreComponentsLocked:H,areGroundNodesLocked:je,setAreGroundNodesLocked:P,arePowerNodesLocked:de,setArePowerNodesLocked:fe,lockAll:Y,unlockAll:q}}function _x(){const[c,u]=C.useState(null),[v,p]=C.useState({visible:!1,size:6}),[d,B]=C.useState({visible:!1,interval:5}),[L,ge]=C.useState({visible:!1,source:null,interval:5}),[F,H]=C.useState({visible:!1,text:""}),[je,P]=C.useState({visible:!1,title:"",message:""}),[de,fe]=C.useState({visible:!1}),[Y,q]=C.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[_e,Ee]=C.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[E,k]=C.useState(!1),[U,M]=C.useState(!0);return{openMenu:c,setOpenMenu:u,setSizeDialog:v,setSetSizeDialog:p,autoSaveDialog:d,setAutoSaveDialog:B,autoSavePromptDialog:L,setAutoSavePromptDialog:ge,debugDialog:F,setDebugDialog:H,errorDialog:je,setErrorDialog:P,newProjectDialog:de,setNewProjectDialog:fe,newProjectSetupDialog:Y,setNewProjectSetupDialog:q,saveAsDialog:_e,setSaveAsDialog:Ee,showColorPicker:E,setShowColorPicker:k,showWelcomeDialog:U,setShowWelcomeDialog:M}}function Ox(){const[c,u]=C.useState(!1),[v,p]=C.useState(1),[d,B]=C.useState(null),[L,ge]=C.useState(""),[F,H]=C.useState(""),[je,P]=C.useState(null),[de,fe]=C.useState("pcb_project"),[Y,q]=C.useState([]),[_e,Ee]=C.useState(-1),E=C.useRef(null),k=C.useRef(!1),U=C.useRef(!1);return{autoSaveEnabled:c,setAutoSaveEnabled:u,autoSaveInterval:v,setAutoSaveInterval:p,autoSaveDirHandle:d,setAutoSaveDirHandle:B,autoSaveBaseName:L,setAutoSaveBaseName:ge,currentProjectFilePath:F,setCurrentProjectFilePath:H,projectDirHandle:je,setProjectDirHandle:P,projectName:de,setProjectName:fe,autoSaveFileHistory:Y,setAutoSaveFileHistory:q,currentFileIndex:_e,setCurrentFileIndex:Ee,autoSaveIntervalRef:E,hasChangesSinceLastAutoSaveRef:k,prevAutoSaveEnabledRef:U}}const md=c=>{const u=Cd[c];return!u||!u.prefix||u.prefix.length<1?"?":u.prefix[0].substring(0,1).toUpperCase()},va=(c,u,v)=>{const p=`tool_${c}_color`,d=`tool_${c}_size`,B=localStorage.getItem(p),L=localStorage.getItem(d);return{color:B||u,size:L?parseInt(L,10):v}},cr=(c,u,v)=>{localStorage.setItem(`tool_${c}_color`,u),localStorage.setItem(`tool_${c}_size`,String(v))},Ln=(c,u,v,p)=>{const d=`tool_${c}_${u}_color`,B=`tool_${c}_${u}_size`,L=localStorage.getItem(d),ge=localStorage.getItem(B);return{color:L||v,size:ge?parseInt(ge,10):p}},Xi=(c,u,v,p)=>{localStorage.setItem(`tool_${c}_${u}_color`,v),localStorage.setItem(`tool_${c}_${u}_size`,String(p))},Hx=()=>{const c=new Map,u={top:"#0072B2",bottom:"#56B4E9"},v={top:18,bottom:18},p={top:"#AA4499",bottom:"#F781BF"},d={top:6,bottom:6},B={top:"#6A3D9A",bottom:"#9467BD"},L={top:18,bottom:18};return c.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:va("select","#ff0000",10),layerSettings:new Map([["top",Ln("select","top","#ff0000",10)],["bottom",Ln("select","bottom","#ff0000",10)]])}),c.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:va("via",Sd,jd.DEFAULT_SIZE),layerSettings:new Map([["top",Ln("via","top",Sd,jd.DEFAULT_SIZE)],["bottom",Ln("via","bottom",Sd,jd.DEFAULT_SIZE)]]),defaultLayer:"top"}),c.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:va("pad",Sh,18),layerSettings:new Map([["top",Ln("pad","top",u.top,v.top)],["bottom",Ln("pad","bottom",u.bottom,v.bottom)]]),defaultLayer:"top"}),c.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:va("trace",vh,6),layerSettings:new Map([["top",Ln("trace","top",p.top,d.top)],["bottom",Ln("trace","bottom",p.bottom,d.bottom)]]),defaultLayer:"top"}),c.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:va("component",mh,wh.DEFAULT_SIZE),layerSettings:new Map([["top",Ln("component","top",B.top,L.top)],["bottom",Ln("component","bottom",B.bottom,L.bottom)]]),defaultLayer:"top"}),c.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:va("power",vc,18),layerSettings:new Map([["top",Ln("power","top",vc,18)],["bottom",Ln("power","bottom",vc,18)]]),defaultLayer:"top"}),c.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:va("ground",wd,18),layerSettings:new Map([["top",Ln("ground","top",wd,18)],["bottom",Ln("ground","bottom",wd,18)]]),defaultLayer:"top"}),c.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:va("erase","#f5a3b3",18),layerSettings:new Map([["top",Ln("erase","top","#f5a3b3",18)],["bottom",Ln("erase","bottom","#f5a3b3",18)]])}),c.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:va("pan","#ff0000",10),layerSettings:new Map([["top",Ln("pan","top","#ff0000",10)],["bottom",Ln("pan","bottom","#ff0000",10)]])}),c.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:va("magnify","#ff0000",10),layerSettings:new Map([["top",Ln("magnify","top","#ff0000",10)],["bottom",Ln("magnify","bottom","#ff0000",10)]])}),c};function Ex(){const u=zx(),{topImage:v,setTopImage:p,bottomImage:d,setBottomImage:B,currentView:L,setCurrentView:ge,transparency:F,setTransparency:H,isTransparencyCycling:je,setIsTransparencyCycling:P,isGrayscale:de,setIsGrayscale:fe,isBlackAndWhiteEdges:Y,setIsBlackAndWhiteEdges:q,isBlackAndWhiteInverted:_e,setIsBlackAndWhiteInverted:Ee}=u,[E,k]=C.useState("none"),U=Nx(),{brushColor:M,setBrushColor:T,brushSize:g,setBrushSize:W,topTraceColor:we,setTopTraceColor:tt,bottomTraceColor:Ke,setBottomTraceColor:ke,topTraceSize:Ye,setTopTraceSize:Pt,bottomTraceSize:at,setBottomTraceSize:_,topPadColor:ne,setTopPadColor:Me,bottomPadColor:ie,setBottomPadColor:m,topPadSize:D,setTopPadSize:X,bottomPadSize:ue,setBottomPadSize:Ve,topComponentColor:Je,setTopComponentColor:st,bottomComponentColor:ht,setBottomComponentColor:gn,topComponentSize:Ot,setTopComponentSize:El,bottomComponentSize:te,setBottomComponentSize:xe,saveDefaultSize:Te,saveDefaultColor:oe}=U,Ze=jx(),{drawingStrokes:ye,setDrawingStrokes:Ue,isDrawing:Ae,setIsDrawing:Be,currentStroke:Oe,setCurrentStroke:ut,tracePreviewMousePos:Ut,setTracePreviewMousePos:bt,drawingMode:me,setDrawingMode:qe,selectedDrawingLayer:$e,setSelectedDrawingLayer:Et,currentStrokeRef:jt,lastTraceClickTimeRef:qn,isDoubleClickingTraceRef:pl}=Ze,Gi=Cx(),{selectedImageForTransform:Yt,setSelectedImageForTransform:yi,isTransforming:In,setIsTransforming:hl,transformStartPos:Pn,setTransformStartPos:bi,transformMode:pn,setTransformMode:Zn}=Gi,Fi=Rx(),{viewScale:Ie,setViewScale:We,viewPan:Le,setViewPan:kn,isShiftConstrained:ma,setIsShiftConstrained:ur,showBothLayers:Rs,setShowBothLayers:Ds}=Fi,[lt,gl]=C.useState("top"),[Qn,fr]=C.useState("top"),[xl,ks]=C.useState("top"),pr=Ux(Hx,E,me,M,g,we,Ke,Ye,at,ne,ie,D,ue,Je,ht,Ot,te,lt,Qn,xl),{toolRegistry:Qt,setToolRegistry:al,getCurrentToolDef:Vl}=pr,Yn=it.useRef(null),vn=it.useRef(M),ol=it.useRef(g);it.useEffect(()=>{al(a=>{const r=Vl(a),x=r?.id||null,y=Yn.current,S=new Map(a);if(y&&y!==x){const b=a.get(y);b&&(cr(y,vn.current,ol.current),S.set(y,{...b,settings:{color:vn.current,size:ol.current}}))}if(r&&x!==y)if(E==="draw"&&me==="trace"){const b=lt||"top",f=b==="top"?we:Ke,j=b==="top"?Ye:at;T(f),W(j),vn.current=f,ol.current=j,S.set("trace",{...r,settings:{color:f,size:j}})}else if(E==="draw"&&me==="pad"){const b=Qn||"top",f=b==="top"?ne:ie,j=b==="top"?D:ue;T(f),W(j),vn.current=f,ol.current=j,S.set("pad",{...r,settings:{color:f,size:j}})}else if(E==="component"){const b=xl||"top",f=b==="top"?Je:ht,j=b==="top"?Ot:te;T(f),W(j),vn.current=f,ol.current=j,S.set("component",{...r,settings:{color:f,size:j}})}else{const b=r.settings;T(b.color),W(b.size),vn.current=b.color,ol.current=b.size}return Yn.current=x,S})},[E,me,Vl,we,Ke,Ye,at,ne,ie,D,ue,Je,ht,Ot,te]),it.useEffect(()=>{al(a=>{const r=Vl(a);if(r)if(E==="draw"&&me==="trace"){const x=lt||"top";Xi(r.id,x,M,g),x==="top"?(tt(M),Pt(g),oe("trace",M,"top"),Te("trace",g,"top")):(ke(M),_(g),oe("trace",M,"bottom"),Te("trace",g,"bottom"));const y=new Map(a),S=new Map(r.layerSettings);return S.set(x,{color:M,size:g}),y.set(r.id,{...r,layerSettings:S,settings:{color:M,size:g}}),vn.current=M,ol.current=g,y}else if(E==="draw"&&me==="pad"){const x=Qn||"top";Xi(r.id,x,M,g),x==="top"?(Me(M),X(g),oe("pad",M,"top"),Te("pad",g,"top")):(m(M),Ve(g),oe("pad",M,"bottom"),Te("pad",g,"bottom"));const y=new Map(a),S=new Map(r.layerSettings);return S.set(x,{color:M,size:g}),y.set(r.id,{...r,layerSettings:S,settings:{color:M,size:g}}),vn.current=M,ol.current=g,y}else if(E==="component"){const x=xl||"top";Xi(r.id,x,M,g),x==="top"?(st(M),El(g),oe("component",M,"top"),Te("component",g,"top")):(gn(M),xe(g),oe("component",M,"bottom"),Te("component",g,"bottom"));const y=new Map(a),S=new Map(r.layerSettings);return S.set(x,{color:M,size:g}),y.set(r.id,{...r,layerSettings:S,settings:{color:M,size:g}}),vn.current=M,ol.current=g,y}else{cr(r.id,M,g);const x=new Map(a);return x.set(r.id,{...r,settings:{color:M,size:g}}),vn.current=M,ol.current=g,x}return a})},[M,g,E,me,lt,Qn,xl,Vl,oe,Te,Xi,tt,ke,Pt,_,Me,m,X,Ve,st,gn,El,xe]),it.useEffect(()=>{E==="power"?(Yl(!0),Ba(null)):(Yl(!1),Ba(null))},[E]),it.useEffect(()=>{E==="ground"?(na(!0),fs(null)):(na(!1),fs(null))},[E]),it.useEffect(()=>{Ci(E==="draw"&&me==="trace")},[E,me]),it.useEffect(()=>{Ul(E==="draw"&&me==="pad")},[E,me]);const[As,hr]=C.useState(void 0),[,mc]=C.useState([]),[,gr]=C.useState([]),[,vi]=C.useState([]),[,Li]=C.useState([]),[Sa,io]=C.useState([]),[Ns,ao]=C.useState([]),[On,Sc]=C.useState([]),[xr,wa]=C.useState([]),An=C.useRef(null),zd=Tx(),{selectedIds:Nt,setSelectedIds:qt,isSelecting:Ms,setIsSelecting:Xo,selectedComponentIds:vt,setSelectedComponentIds:Bt,selectedPowerIds:mt,setSelectedPowerIds:Wt,selectedGroundIds:Vt,setSelectedGroundIds:Xt}=zd,wc=kx(),{componentsTop:zt,setComponentsTop:Un,componentsBottom:xt,setComponentsBottom:Tn,componentEditor:ja,setComponentEditor:yr,connectingPin:Hn,setConnectingPin:Go,componentDialogPosition:Us,setComponentDialogPosition:mi,isDraggingDialog:br,setIsDraggingDialog:vr,dialogDragOffset:oo,setDialogDragOffset:Bs,openComponentEditor:Rd}=wc,Dd=Ax(),{powerBuses:Rt,setPowerBuses:En,groundBuses:yl,setGroundBuses:Ui,powerSymbols:so,setPowerSymbols:Kn,groundSymbols:jc,setGroundSymbols:Dl,powerEditor:bl,setPowerEditor:Bi}=Dd,_i=Bx(),{areImagesLocked:tl,setAreImagesLocked:qi,areViasLocked:mn,setAreViasLocked:Fo,arePadsLocked:vl,setArePadsLocked:mr,areTracesLocked:Vn,setAreTracesLocked:ro,areComponentsLocked:sl,setAreComponentsLocked:nl,areGroundNodesLocked:Nn,setAreGroundNodesLocked:Ta,arePowerNodesLocked:cn,setArePowerNodesLocked:Sr}=_i,wr=_x(),{openMenu:jr,setOpenMenu:Ca,setSizeDialog:Si,setSetSizeDialog:Oi,autoSaveDialog:_s,setAutoSaveDialog:Zi,autoSavePromptDialog:co,setAutoSavePromptDialog:$l,debugDialog:uo,setDebugDialog:Lo,errorDialog:Tr,setErrorDialog:Os,newProjectDialog:Cr,setNewProjectDialog:fo,newProjectSetupDialog:xn,setNewProjectSetupDialog:qo,saveAsDialog:yn,setSaveAsDialog:Zo,showColorPicker:Qo,setShowColorPicker:Hs}=wr,kd=Ox(),{autoSaveEnabled:Il,setAutoSaveEnabled:ii,autoSaveInterval:za,setAutoSaveInterval:Qi,autoSaveDirHandle:Ki,setAutoSaveDirHandle:Es,autoSaveBaseName:Ji,setAutoSaveBaseName:Ra,currentProjectFilePath:Vs,setCurrentProjectFilePath:kl,projectDirHandle:wi,setProjectDirHandle:ji,projectName:Cn,setProjectName:ai,autoSaveFileHistory:Tc,setAutoSaveFileHistory:po,currentFileIndex:zr,setCurrentFileIndex:Rr,autoSaveIntervalRef:dn,hasChangesSinceLastAutoSaveRef:rl,prevAutoSaveEnabledRef:Dr}=kd,kr=C.useRef(null),Ar=C.useRef(null),Nr=C.useRef(null),Mr=C.useRef(null),ho=C.useRef(null),go=C.useRef(null),Ur=C.useRef(null),Da=C.useRef(null),ka=C.useRef(null),xo=C.useRef(null),$s=C.useRef(null),ea=C.useRef(!1),Ko=C.useRef(0),Jo=C.useRef(0),[Aa,Br]=C.useState(!1),es=C.useRef(null),ts=C.useRef(null),[ns,Is]=C.useState(!1),[Bn,ls]=C.useState({width:960,height:600}),is=C.useRef(null),_r=C.useRef(null),Cc=C.useRef(null),as=C.useRef(null),os=C.useRef(null),zc=C.useRef(null),Na=C.useRef(null),Ps=C.useRef(null),[ta,Ma]=C.useState(!0),[ss,oi]=C.useState(!0),[$n,rs]=C.useState(!0),[Al,Hi]=C.useState(!0),[Nl,Ys]=C.useState(!0),[si,Or]=C.useState(!0),[Ti,Hr]=C.useState(!0),[ri,cs]=C.useState(!0),[Pl,ml]=C.useState(!0),[ci,Sl]=C.useState(!0),St=so,Dt=jc,[Ws,Ua]=C.useState(!1),[ds,Yl]=C.useState(!1),[us,Ba]=C.useState(null),[yo,Xs]=C.useState(!1),[cl,na]=C.useState(!1),[wl,fs]=C.useState(null),[Wl,Ei]=C.useState(!0),[la,Gs]=C.useState(!0),[ia,ps]=C.useState(null),[jl,_a]=C.useState(!1),[Vi,hs]=C.useState(null),[Oa,Ml]=C.useState(!1),[Jn,di]=C.useState(null),[Xl,ui]=C.useState(!1),[Gl,Er]=C.useState(null),[Vr,$r]=C.useState(()=>{const a=localStorage.getItem("boardDimensions");if(a)try{return JSON.parse(a)}catch{return null}return null}),[Rc,Wn]=C.useState(!1);it.useEffect(()=>{Rt.length===0&&En([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[Rt.length,En]);const Gt=C.useCallback((a,r)=>{const x=St.find(S=>S.pointId===a);if(x){const S=r.find(f=>f.id===x.powerBusId);return`Via (${S?S.voltage:x.type||"Power Node"})`}const y=Dt.find(S=>S.pointId===a);return y?`Via (${y.type||"Ground"})`:"Via (Signal)"},[St,Dt]),Tt=C.useCallback((a,r)=>{const x=St.find(S=>S.pointId===a);if(x){const S=r.find(f=>f.id===x.powerBusId);return`Pad (${S?S.voltage:x.type||"Power Node"})`}const y=Dt.find(S=>S.pointId===a);return y?`Pad (${y.type||"Ground"})`:"Pad (Signal)"},[St,Dt]),aa=C.useCallback(()=>{const a=ye.filter(r=>r.type==="via").map(r=>r.id);qt(new Set(a)),Bt(new Set),Wt(new Set),Xt(new Set)},[ye,qt,Bt,Wt,Xt]),Fl=C.useCallback(()=>{const a=ye.filter(r=>r.type==="trace").map(r=>r.id);qt(new Set(a)),Bt(new Set),Wt(new Set),Xt(new Set)},[ye,qt,Bt,Wt,Xt]),Ir=C.useCallback(()=>{const a=ye.filter(r=>r.type==="pad").map(r=>r.id);qt(new Set(a)),Bt(new Set),Wt(new Set),Xt(new Set)},[ye,qt,Bt,Wt,Xt]),oa=C.useCallback(()=>{const a=[...zt,...xt].map(r=>r.id);Bt(new Set(a)),qt(new Set),Wt(new Set),Xt(new Set)},[zt,xt,Bt,qt,Wt,Xt]),Dc=C.useCallback(()=>{const a=[...zt,...xt].filter(r=>{const x=r.pinConnections||[];return!(x.length>0&&x.length===r.pinCount&&x.every(S=>S&&S.trim()!==""))}).map(r=>r.id);Bt(new Set(a)),qt(new Set),Wt(new Set),Xt(new Set),Lo({visible:!0,text:""})},[zt,xt,Bt,qt,Wt,Xt,Lo]),kc=C.useCallback((a,r,x)=>{const y=An.current;if(!y)return;const S=y.width-80,b=y.height-80,f=S/2,j=b/2,z=f-r*Ie,R=j-x*Ie;kn({x:z,y:R}),Bt(new Set([a])),qt(new Set),Wt(new Set),Xt(new Set)},[Ie,kn,Bt,qt,Wt,Xt]),bo=C.useCallback(()=>{const a=St.map(r=>r.id);Wt(new Set(a)),qt(new Set),Bt(new Set),Xt(new Set)},[St,Wt,qt,Bt,Xt]),Ha=C.useCallback(()=>{const a=Dt.map(r=>r.id);Xt(new Set(a)),qt(new Set),Bt(new Set),Wt(new Set)},[Dt,Xt,qt,Bt,Wt]),[Ea,Ci]=C.useState(!1),sa=C.useRef(null),[zi,Ul]=C.useState(!1),Ll=C.useRef(null),ql=C.useRef(null),vo=C.useRef(null),[mo,Bl]=C.useState(!1),[ra,Zl]=C.useState(!1),[on,So]=C.useState(null),[Ac,Ad]=C.useState(new Set),Nc=C.useRef(null),Va=C.useRef(null),Sn=C.useRef(null),wo=C.useRef(null),$a=C.useRef(null),Ia=C.useRef(null),gs=C.useRef(null),[jo,Pa]=C.useState(null),[ca,Pr]=C.useState(!1),[To,Yr]=C.useState(null),[Tl,xs]=C.useState(null),ys=C.useCallback(async(a,r)=>{try{const x=await createImageBitmap(a),y=URL.createObjectURL(a),S=await new Promise((R,J)=>{const V=new FileReader;V.onload=()=>R(V.result),V.onerror=J,V.readAsDataURL(a)}),b=An.current;let f=0,j=0;if(b){const R=b.width-80,J=b.height-80,V=R/2,re=J/2;f=(V-Le.x)/Ie,j=(re-Le.y)/Ie}const z={url:y,name:a.name,width:x.width,height:x.height,dataUrl:S,x:f,y:j,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:x};r==="top"?p(z):B(z)}catch(x){console.error("Failed to load image",x)}},[Le.x,Le.y,Ie,v,d]),Mc=C.useCallback(a=>{a.stopPropagation(),a.preventDefault();const r=An.current;if(!r)return;document.activeElement!==r&&r.focus();const x=r.getBoundingClientRect(),y=r.width/x.width,S=r.height/x.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,j=typeof b=="number"?b:a.clientX-x.left,z=typeof f=="number"?f:a.clientY-x.top,R=j*y,J=z*S,V=R-40,re=J-40,Z=(V-Le.x)/Ie,ae=(re-Le.y)/Ie;if(E==="select"){if(Hn){let A=1/0,ce=null,ve=null;const Ne=Math.max(6/Ie,4),ct=[...zt,...xt].find(Xe=>Xe.id===Hn.componentId)?.layer||"top";for(const Xe of ye)if((Xe.type==="via"||Xe.type==="pad")&&Xe.points.length>0){if(Xe.type==="pad"&&(Xe.layer||"top")!==ct)continue;const ot=Xe.points[0],pt=Math.max(1,Xe.size/2),an=Math.hypot(ot.x-Z,ot.y-ae),rt=Math.max(pt,Ne);an<=rt&&an<A&&(A=an,ce=ot.id??null,ve=Xe)}if(ve?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${ve.id}`),console.log(`  Point ID: ${ce}`),console.log(`  Point coordinates: x=${ve.points[0].x.toFixed(2)}, y=${ve.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${Z.toFixed(2)}, y=${ae.toFixed(2)}`),console.log(`  Distance: ${A.toFixed(2)}`),console.log(`  Via size: ${ve.size}, radius: ${Math.max(1,ve.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${Z.toFixed(2)}, y=${ae.toFixed(2)}`),console.log(`  Hit tolerance: ${Ne.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${ye.filter(Xe=>Xe.type==="via").length}`)),ce!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${ce} (type: ${typeof ce})`);const Xe=String(ce),ot=Hn.pinIndex,pt=Hn.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${ot} (Pin ${ot+1}) of component ${pt} to point ID ${Xe}`);const an=zt.find(Ge=>Ge.id===pt),rt=xt.find(Ge=>Ge.id===pt);an?(console.log("Component found in TOP layer"),Un(Ge=>{const wt=Ge.find(Ct=>Ct.id===pt);if(!wt)return console.error(`Component ${pt} not found in TOP layer during update!`),Ge;console.log("BEFORE update: pinConnections =",wt.pinConnections);const yt=wt.pinConnections||[],Mt=yt.length>0?[...yt]:new Array(wt.pinCount).fill("");let Zt;if(Mt.length!==wt.pinCount){Zt=new Array(wt.pinCount).fill("");for(let Ct=0;Ct<Math.min(Mt.length,wt.pinCount);Ct++)Zt[Ct]=Mt[Ct]||""}else Zt=[...Mt];Zt[ot]=Xe,console.log(`Updating pin ${ot} with value: ${Xe}`),console.log("New pinConnections array:",Zt);const Mn=Ge.map(Ct=>Ct.id===pt?{...Ct,pinConnections:Zt}:Ct),wn=Mn.find(Ct=>Ct.id===pt);return console.log("AFTER update: pinConnections =",wn?.pinConnections),console.log(`Pin ${ot} value: ${wn?.pinConnections[ot]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),Mn})):rt?(console.log("Component found in BOTTOM layer"),Tn(Ge=>{const wt=Ge.find(Ct=>Ct.id===pt);if(!wt)return console.error(`Component ${pt} not found in BOTTOM layer during update!`),Ge;console.log("BEFORE update: pinConnections =",wt.pinConnections);const yt=wt.pinConnections||[],Mt=yt.length>0?[...yt]:new Array(wt.pinCount).fill("");let Zt;if(Mt.length!==wt.pinCount){Zt=new Array(wt.pinCount).fill("");for(let Ct=0;Ct<Math.min(Mt.length,wt.pinCount);Ct++)Zt[Ct]=Mt[Ct]||""}else Zt=[...Mt];Zt[ot]=Xe,console.log(`Updating pin ${ot} with value: ${Xe}`),console.log("New pinConnections array:",Zt);const Mn=Ge.map(Ct=>Ct.id===pt?{...Ct,pinConnections:Zt}:Ct),wn=Mn.find(Ct=>Ct.id===pt);return console.log("AFTER update: pinConnections =",wn?.pinConnections),console.log(`Pin ${ot} value: ${wn?.pinConnections[ot]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),Mn})):(console.error(`Component ${pt} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",zt.map(Ge=>Ge.id)),console.log("Available BOTTOM components:",xt.map(Ge=>Ge.id))),setTimeout(()=>{Go(null)},0);return}else Go(null)}const ee=10,G=(()=>{for(const A of zt)if(Z>=A.x-ee&&Z<=A.x+ee&&ae>=A.y-ee&&ae<=A.y+ee)return{layer:"top",comp:A};for(const A of xt)if(Z>=A.x-ee&&Z<=A.x+ee&&ae>=A.y-ee&&ae<=A.y+ee)return{layer:"bottom",comp:A};return null})();if(G){const{comp:A}=G;let ce;if(a.shiftKey){const ve=new Set(vt);ve.has(A.id)?ve.delete(A.id):ve.add(A.id),ce=ve,Bt(ce)}else ce=new Set([A.id]),Bt(ce),qt(new Set),Wt(new Set),Xt(new Set);return}const pe=Math.max(6/Ie,4);let he=null;for(const A of St){const ce=Math.max(6,A.size/2),ve=ce*.8,Ne=ce+ve,Pe=Math.hypot(A.x-Z,A.y-ae),ct=Math.abs(Z-A.x)<=pe&&Math.abs(ae-A.y)<=Ne,Xe=Math.abs(ae-A.y)<=pe&&Math.abs(Z-A.x)<=Ne;if(Pe<=Math.max(ce,pe)||ct||Xe){he=A;break}}if(he){let A;if(a.shiftKey){const ce=new Set(mt);ce.has(he.id)?ce.delete(he.id):ce.add(he.id),A=ce,Wt(A)}else A=new Set([he.id]),Wt(A);qt(new Set),Bt(new Set),Xt(new Set);return}let Re=null;for(const A of Dt){const ce=Math.max(6,(A.size||18)/2),ve=ce*.8,Ne=ce+ve,Pe=Math.hypot(A.x-Z,A.y-ae),ct=Math.abs(Z-A.x)<=pe&&Math.abs(ae-A.y)<=Ne,Xe=Math.abs(ae-A.y)<=pe&&Math.abs(Z-A.x)<=Ne;if(Pe<=Math.max(ce,pe)||ct||Xe){Re=A;break}}if(Re){let A;if(a.shiftKey){const ce=new Set(Vt);ce.has(Re.id)?ce.delete(Re.id):ce.add(Re.id),A=ce,Xt(A)}else A=new Set([Re.id]),Xt(A),qt(new Set),Bt(new Set),Wt(new Set);return}const ze=Math.max(6/Ie,4/Ie),He=Math.max(ze,.5);let $=null;for(const A of ye)if((A.type==="via"||A.type==="pad")&&A.points.length>0){let ce=!1;if(A.type==="via"?ce=$n:A.type==="pad"&&(ce=(A.layer||"top")==="top"?si:Ti),!ce)continue;const ve=A.points[0],Ne=Math.max(1,A.size/2);if(Math.hypot(ve.x-Z,ve.y-ae)<=Math.max(Ne,He)){$=A;break}}if($){let A;if(a.shiftKey){const ce=new Set(Nt);ce.has($.id)?ce.delete($.id):ce.add($.id),A=ce,qt(A)}else A=new Set([$.id]),qt(A),Bt(new Set),Wt(new Set),Xt(new Set);return}a.shiftKey||(qt(new Set),Bt(new Set),Wt(new Set),Xt(new Set)),Xo(!0),Yr({x:Z,y:ae,shiftKey:a.shiftKey}),xs({x:Z,y:ae,width:0,height:0});return}else if(E==="magnify"){const ee=a.shiftKey?.5:2,G=Math.max(.25,Math.min(8,Ie*ee)),pe=V-G*Z,he=re-G*ae;We(G),kn({x:pe,y:he});return}else if(E==="pan"){es.current={startCX:V,startCY:re,panX:Le.x,panY:Le.y},ts.current={startClientX:a.clientX,startClientY:a.clientY,panX:Le.x,panY:Le.y},Br(!0);return}else if(E==="draw"){const ee=(he,Re)=>{let De=1/0,ze=null;const He=10/Ie,$=Ie>20?Math.max(He,1e-4):Ie>10?Math.max(He,.001):Math.max(He,.01);for(const ve of ye)if(ve.type==="via"){const Ne=ve.points[0],Pe=Math.hypot(Ne.x-he,Ne.y-Re);Pe<=$&&Pe<De&&(De=Pe,ze=Ne)}else if(ve.type==="pad"){const Ne=ve.points[0],Pe=Math.hypot(Ne.x-he,Ne.y-Re);Pe<=$&&Pe<De&&(De=Pe,ze=Ne)}for(const ve of St)if(ve.pointId!==void 0){const Ne=Math.hypot(ve.x-he,ve.y-Re);Ne<=$&&Ne<De&&(De=Ne,ze={x:ve.x,y:ve.y,id:ve.pointId})}for(const ve of Dt)if(ve.pointId!==void 0){const Ne=Math.hypot(ve.x-he,ve.y-Re);Ne<=$&&Ne<De&&(De=Ne,ze={x:ve.x,y:ve.y,id:ve.pointId})}const ce=ln(ze??{x:he,y:Re});return{x:ce.x,y:ce.y,nodeId:ze?.id}};if(me==="via"){const he=Qt.get("via"),Re=localStorage.getItem("tool_via_color"),De=localStorage.getItem("tool_via_size"),ze=Re||he?.settings.color||Sd,Fe=De?parseInt(De,10):he?.settings.size||jd.DEFAULT_SIZE,$=ca?{x:ln({x:Z,y:ae}).x,y:ln({x:Z,y:ae}).y}:((Pe,ct)=>{let Xe=1/0,ot=null;const an=10/Ie,rt=Ie>10?Math.max(an,.001):Math.max(an,.01);for(const yt of ye)if(yt.type==="via"||yt.type==="pad"){const Mt=yt.points[0],Zt=Math.hypot(Mt.x-Pe,Mt.y-ct);Zt<=rt&&Zt<Xe&&(Xe=Zt,ot=Mt)}for(const yt of St)if(yt.pointId!==void 0){const Mt=Math.hypot(yt.x-Pe,yt.y-ct);Mt<=rt&&Mt<Xe&&(Xe=Mt,ot={x:yt.x,y:yt.y,id:yt.pointId})}for(const yt of Dt)if(yt.pointId!==void 0){const Mt=Math.hypot(yt.x-Pe,yt.y-ct);Mt<=rt&&Mt<Xe&&(Xe=Mt,ot={x:yt.x,y:yt.y,id:yt.pointId})}const wt=ln(ot??{x:Pe,y:ct});return{x:wt.x,y:wt.y,nodeId:ot?.id}})(Z,ae),A=$.nodeId??xi(),ce=Gt(A,Rt),ve={id:A,x:$.x,y:$.y},Ne={id:`${Date.now()}-via`,points:[ve],color:ze,size:Fe,layer:$e,type:"via",viaType:ce};Ue(Pe=>[...Pe,Ne]),$e==="top"?mc(Pe=>[...Pe,Ne.id]):gr(Pe=>[...Pe,Ne.id]);return}if(me==="pad"){if(!Qn)return;const Re=ca?{x:ln({x:Z,y:ae}).x,y:ln({x:Z,y:ae}).y}:((ce,ve)=>{let Ne=1/0,Pe=null;const Xe=10/Ie,ot=Ie>10?Math.max(Xe,.001):Math.max(Xe,.01);for(const rt of ye)if(rt.type==="via"||rt.type==="pad"){const Ge=rt.points[0],wt=Math.hypot(Ge.x-ce,Ge.y-ve);wt<=ot&&wt<Ne&&(Ne=wt,Pe=Ge)}for(const rt of St)if(rt.pointId!==void 0){const Ge=Math.hypot(rt.x-ce,rt.y-ve);Ge<=ot&&Ge<Ne&&(Ne=Ge,Pe={x:rt.x,y:rt.y,id:rt.pointId})}for(const rt of Dt)if(rt.pointId!==void 0){const Ge=Math.hypot(rt.x-ce,rt.y-ve);Ge<=ot&&Ge<Ne&&(Ne=Ge,Pe={x:rt.x,y:rt.y,id:rt.pointId})}const an=ln(Pe??{x:ce,y:ve});return{x:an.x,y:an.y,nodeId:Pe?.id}})(Z,ae),De=Re.nodeId??xi(),ze=Tt(De,Rt),Fe=Qn==="top"?ne:ie,He=Qn==="top"?D:ue,$={id:De,x:Re.x,y:Re.y},A={id:`${Date.now()}-pad`,points:[$],color:Fe,size:He,layer:Qn,type:"pad",padType:ze};Ue(ce=>[...ce,A]);return}if(pl.current)return;const G=me==="trace"&&!ca?ee(Z,ae):{x:ln({x:Z,y:ae}).x,y:ln({x:Z,y:ae}).y},pe=G.nodeId!==void 0?{id:G.nodeId,x:G.x,y:G.y}:{x:G.x,y:G.y};ut(he=>he.length===0?[pe]:[...he,pe]),qn.current=Date.now(),bt(null),Be(!1),ur(!1)}else if(E==="erase"){if(ye.some(G=>G.layer===$e&&(G.type==="via"&&mn||G.type==="pad"&&vl||G.type==="trace"&&Vn))){const G=[];mn&&ye.some(pe=>pe.layer===$e&&pe.type==="via")&&G.push("vias"),vl&&ye.some(pe=>pe.layer===$e&&pe.type==="pad")&&G.push("pads"),Vn&&ye.some(pe=>pe.layer===$e&&pe.type==="trace")&&G.push("traces"),G.length>0&&alert(`Cannot erase: ${G.join(", ")} are locked on the ${$e} layer. Unlock them to erase.`)}Be(!0),ut([{id:xi(),x:Z,y:ae}]),console.log("Starting erase at:",Z,ae,"selectedDrawingLayer:",$e,"total strokes:",ye.length)}else if(E==="transform"&&Yt){if(tl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}hl(!0),bi({x:Z,y:ae})}else if(E==="component"){if(!on)return;const ee=ln({x:Z,y:ae}),G=xl==="top"?Je:ht,pe=xl==="top"?Ot:te,he=lx(on,xl,ee.x,ee.y,G,pe);he.abbreviation=md(on),xl==="top"?(cs(!0),Un(Re=>[...Re,he])):(ml(!0),Tn(Re=>[...Re,he]));return}else if(E==="power"){if(!us)return;const G=ca?{x:ln({x:Z,y:ae}).x,y:ln({x:Z,y:ae}).y}:((he,Re)=>{let De=1/0,ze=null;const He=10/Ie,$=Ie>20?Math.max(He,1e-4):Ie>10?Math.max(He,.001):Math.max(He,.01);for(const ve of ye)if(ve.type==="via"||ve.type==="pad"){const Ne=ve.points[0],Pe=Math.hypot(Ne.x-he,Ne.y-Re);Pe<=$&&Pe<De&&(De=Pe,ze=Ne)}else if(ve.type==="trace")for(const Ne of ve.points){const Pe=Math.hypot(Ne.x-he,Ne.y-Re);Pe<=$&&Pe<De&&(De=Pe,ze=Ne)}const ce=ln(ze??{x:he,y:Re});return{x:ce.x,y:ce.y,nodeId:ze?.id}})(Z,ae),pe=Rt.find(he=>he.id===us);if(pe){const he=G.nodeId??xi(),Re=`${pe.voltage} Power Node`;if(Dt.find(Fe=>Fe.pointId===he)){Os({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${he}). Power and ground nodes cannot share the same Node ID.`});return}const ze={id:`power-${Date.now()}-${Math.random()}`,x:G.x,y:G.y,color:"#ff0000",size:g,powerBusId:pe.id,layer:$e,type:Re,pointId:he};if(Kn(Fe=>[...Fe,ze]),G.nodeId!==void 0){const Fe=Gt(G.nodeId,Rt),He=Tt(G.nodeId,Rt);Ue($=>$.map(A=>A.type==="via"&&A.points.length>0&&A.points[0].id===G.nodeId?{...A,viaType:Fe}:A.type==="pad"&&A.points.length>0&&A.points[0].id===G.nodeId?{...A,padType:He}:A))}}return}else if(E==="ground"){if(wl===null){if(yl.length===0){Os({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}na(!0);return}const ee=yl.find(G=>G.id===wl);if(ee){const pe=ca?{x:ln({x:Z,y:ae}).x,y:ln({x:Z,y:ae}).y}:((Fe,He)=>{let $=1/0,A=null;const ve=10/Ie,Ne=Ie>20?Math.max(ve,1e-4):Ie>10?Math.max(ve,.001):Math.max(ve,.01);for(const Xe of ye)if(Xe.type==="via"||Xe.type==="pad"){const ot=Xe.points[0],pt=Math.hypot(ot.x-Fe,ot.y-He);pt<=Ne&&pt<$&&($=pt,A=ot)}else if(Xe.type==="trace")for(const ot of Xe.points){const pt=Math.hypot(ot.x-Fe,ot.y-He);pt<=Ne&&pt<$&&($=pt,A=ot)}const ct=ln(A??{x:Fe,y:He});return{x:ct.x,y:ct.y,nodeId:A?.id}})(Z,ae),he=pe.nodeId??xi(),Re=`${ee.name} Ground Node`,De=St.find(Fe=>Fe.pointId===he);if(De){Os({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${De.type||"Power Node"}) already exists at this Node ID (${he}). Power and ground nodes cannot share the same Node ID.`});return}const ze={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:pe.x,y:pe.y,color:ee.color,size:Qt.get("ground")?.settings.size||18,groundBusId:ee.id,layer:$e,type:Re,pointId:he};if(Dl(Fe=>[...Fe,ze]),pe.nodeId!==void 0){const Fe=Gt(pe.nodeId,Rt),He=Tt(pe.nodeId,Rt);Ue($=>$.map(A=>A.type==="via"&&A.points.length>0&&A.points[0].id===pe.nodeId?{...A,viaType:Fe}:A.type==="pad"&&A.points.length>0&&A.points[0].id===pe.nodeId?{...A,padType:He}:A))}}return}},[E,Yt,g,M,me,$e,ye,Ie,Le.x,Le.y,ca,us,wl,Rt,yl,on,Qt,Qn,lt,St,Dt,Gt,Tt,$n,si,Ti]),Co=C.useCallback(a=>{if(E!=="magnify")return;a.preventDefault();const r=An.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,S=r.height/x.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,j=typeof b=="number"?b:a.clientX-x.left,z=typeof f=="number"?f:a.clientY-x.top,R=j*y,J=z*S,V=(R-40-Le.x)/Ie,re=(J-40-Le.y)/Ie,Z=1.2,ae=1/Z,ee=a.deltaY<0?Z:ae,G=Math.max(.25,Math.min(8,Ie*ee)),pe=R-40-G*V,he=J-40-G*re;We(G),kn({x:pe,y:he})},[E,Ie,Le.x,Le.y]),Wr=C.useCallback(a=>{if(E==="draw"&&me==="trace"){pl.current=!0;let r=Oe;if(r.length>1){const x=[r[0]];for(let y=1;y<r.length;y++){const S=x[x.length-1],b=r[y];(Math.abs(S.x-b.x)>.001||Math.abs(S.y-b.y)>.001)&&x.push(b)}r=x}if(r.length>=1){const x=lt||"top",y=x==="top"?we:Ke,S=x==="top"?Ye:at,b={id:`${Date.now()}-trace`,points:r,color:y,size:S,layer:x,type:"trace"};Ue(f=>[...f,b]),x==="top"?vi(f=>[...f,b.id]):Li(f=>[...f,b.id]),ut([]),bt(null),setTimeout(()=>{pl.current=!1},300);return}}if(E==="select"||E==="component"){const r=An.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,S=r.height/x.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,j=typeof b=="number"?b:a.clientX-x.left,z=typeof f=="number"?f:a.clientY-x.top,R=j*y,J=z*S,V=R-40,re=J-40,Z=(V-Le.x)/Ie,ae=(re-Le.y)/Ie,ee=10,G=(()=>{for(const Re of zt)if(Z>=Re.x-ee&&Z<=Re.x+ee&&ae>=Re.y-ee&&ae<=Re.y+ee)return{layer:"top",comp:Re};for(const Re of xt)if(Z>=Re.x-ee&&Z<=Re.x+ee&&ae>=Re.y-ee&&ae<=Re.y+ee)return{layer:"bottom",comp:Re};return null})(),pe=Math.max(6/Ie,4);let he=null;for(const Re of St){const De=Math.max(6,Re.size/2),ze=De*.8,Fe=De+ze,He=Math.hypot(Re.x-Z,Re.y-ae),$=Math.abs(Z-Re.x)<=pe&&Math.abs(ae-Re.y)<=Fe,A=Math.abs(ae-Re.y)<=pe&&Math.abs(Z-Re.x)<=Fe;if(He<=Math.max(De,pe)||$||A){he=Re;break}}if(he){Wt(new Set([he.id])),Bi({visible:!0,id:he.id,layer:he.layer,x:he.x,y:he.y,size:he.size,color:he.color,powerBusId:he.powerBusId});return}if(G){const{layer:Re,comp:De}=G;Rd(De,Re)}}},[E,me,M,g,$e,zt,xt,St,Ie,Le.x,Le.y,on,mo,ca,ye,Yt,Aa,jo,Hn,Qt,Oe,lt,we,Ke,Ye,at]),Ya=C.useCallback(()=>{const a=jt.current;if(E==="draw"&&me==="trace"&&a.length>=2){let r=[a[0]];for(let f=1;f<a.length;f++){const j=r[r.length-1],z=a[f];(Math.abs(j.x-z.x)>.001||Math.abs(j.y-z.y)>.001)&&r.push(z)}const x=lt||"top",y=x==="top"?we:Ke,S=x==="top"?Ye:at,b={id:`${Date.now()}-trace`,points:r,color:y,size:S,layer:x,type:"trace"};Ue(f=>[...f,b]),x==="top"?vi(f=>[...f,b.id]):Li(f=>[...f,b.id]),ut([]),bt(null)}else if(E==="draw"&&me==="trace"&&a.length===1){const r=lt||"top",x=r==="top"?we:Ke,y=r==="top"?Ye:at,S={id:`${Date.now()}-trace-dot`,points:a,color:x,size:y,layer:r,type:"trace"};Ue(b=>[...b,S]),r==="top"?vi(b=>[...b,S.id]):Li(b=>[...b,S.id]),ut([])}},[E,me,lt,we,Ke,Ye,at,Ue]),bs=C.useCallback((a,r,x)=>{const y=r-a.x,S=x-a.y;if(y===0&&S===0)return{x:r,y:x};const f=(Math.atan2(S,y)*180/Math.PI%180+180)%180,j=[0,45,90];let z=0,R=1e9;for(const J of j){const V=Math.abs(f-J);V<R&&(R=V,z=J)}if(z===0)return{x:r,y:a.y};if(z===90)return{x:a.x,y:x};{const J=Math.min(Math.abs(y),Math.abs(S)),V=y>=0?1:-1,re=S>=0?1:-1;return{x:a.x+V*J,y:a.y+re*J}}},[]),Uc=C.useCallback(a=>{const r=An.current?.getBoundingClientRect();if(!r)return;const x=a.clientX-r.left,y=a.clientY-r.top,S=An.current,b=S.width/r.width,f=S.height/r.height,j=x*b,z=y*f,R=j-40,J=z-40,V=(R-Le.x)/Ie,re=(J-Le.y)/Ie;if(E==="draw"&&me==="trace"&&Oe.length>0){const ae=ca?{x:ln({x:V,y:re}).x,y:ln({x:V,y:re}).y}:((ee,G)=>{let pe=1/0,he=null;const De=10/Ie,ze=Ie>20?Math.max(De,1e-4):Ie>10?Math.max(De,.001):Math.max(De,.01);for(const $ of ye)if($.type==="via"){const A=$.points[0],ce=Math.hypot(A.x-ee,A.y-G);ce<=ze&&ce<pe&&(pe=ce,he=A)}else if($.type==="pad"){const A=$.points[0],ce=Math.hypot(A.x-ee,A.y-G);ce<=ze&&ce<pe&&(pe=ce,he=A)}for(const $ of St)if($.pointId!==void 0){const A=Math.hypot($.x-ee,$.y-G);A<=ze&&A<pe&&(pe=A,he={x:$.x,y:$.y,id:$.pointId})}for(const $ of Dt)if($.pointId!==void 0){const A=Math.hypot($.x-ee,$.y-G);A<=ze&&A<pe&&(pe=A,he={x:$.x,y:$.y,id:$.pointId})}const He=ln(he??{x:ee,y:G});return{x:He.x,y:He.y,nodeId:he?.id}})(V,re);bt({x:ae.x,y:ae.y})}else bt(null);if(E==="select"&&Ms&&To){const Z=To.x,ae=To.y;xs({x:Math.min(Z,V),y:Math.min(ae,re),width:Math.abs(V-Z),height:Math.abs(re-ae)})}else if(E==="pan"&&Aa&&es.current){const{startCX:Z,startCY:ae,panX:ee,panY:G}=es.current,pe=R-Z,he=J-ae;kn({x:ee+pe,y:G+he})}else if(Ae&&Oe.length>0){if(E==="draw")if(ma){const Z=Oe[0],ae=bs(Z,V,re),ee=ln(ae),G={id:xi(),x:ee.x,y:ee.y};ut([Z,G])}else{const Z=ln({x:V,y:re});ut(ae=>[...ae,{id:xi(),x:Z.x,y:Z.y}])}else if(E==="erase"&&(ut(Z=>[...Z,{id:xi(),x:V,y:re}]),Ue(Z=>{const ae=Z.filter(G=>{if(G.type==="via"&&mn||G.type==="pad"&&vl||G.type==="trace"&&Vn||G.layer!==$e)return!0;const pe=g/2,he=V-pe,Re=V+pe,De=re-pe,ze=re+pe,Fe=(A,ce)=>A>=he&&A<=Re&&ce>=De&&ce<=ze,He=(A,ce,ve,Ne)=>{const an=(Mn,wn)=>{let Ct=0;return Mn<he?Ct|=1:Mn>Re&&(Ct|=2),wn<De?Ct|=4:wn>ze&&(Ct|=8),Ct};let rt=A,Ge=ce,wt=ve,yt=Ne,Mt=an(rt,Ge),Zt=an(wt,yt);for(;;){if((Mt|Zt)===0)return!0;if((Mt&Zt)!==0)return!1;const Mn=Mt!==0?Mt:Zt;let wn=0,Ct=0;Mn&8?(wn=rt+(wt-rt)*(ze-Ge)/(yt-Ge),Ct=ze):Mn&4?(wn=rt+(wt-rt)*(De-Ge)/(yt-Ge),Ct=De):Mn&2?(Ct=Ge+(yt-Ge)*(Re-rt)/(wt-rt),wn=Re):(Ct=Ge+(yt-Ge)*(he-rt)/(wt-rt),wn=he),Mn===Mt?(rt=wn,Ge=Ct,Mt=an(rt,Ge)):(wt=wn,yt=Ct,Zt=an(wt,yt))}};let $=!1;if(G.points.length===1){const A=G.points[0];$=Fe(A.x,A.y)}else for(let A=0;A<G.points.length-1;A++){const ce=G.points[A],ve=G.points[A+1];if(He(ce.x,ce.y,ve.x,ve.y)){$=!0;break}}return $&&console.log("Erasing stroke at position:",V,re,"brushSize:",g,"selectedLayer:",$e),!$});console.log("Strokes before:",Z.length,"after:",ae.length);const ee=new Set(ae.map(G=>G.id));return mc(G=>G.filter(pe=>ee.has(pe))),gr(G=>G.filter(pe=>ee.has(pe))),vi(G=>G.filter(pe=>ee.has(pe))),Li(G=>G.filter(pe=>ee.has(pe))),ae}),cn||Kn(Z=>{const ae=g/2,ee=V-ae,G=V+ae,pe=re-ae,he=re+ae,Re=De=>{const ze=De.size/2,Fe=De.x-ze,He=De.x+ze,$=De.y-ze,A=De.y+ze;return!(G<Fe||ee>He||he<$||pe>A)};return Z.filter(De=>!Re(De))}),Nn||Dl(Z=>{const ae=g/2,ee=V-ae,G=V+ae,pe=re-ae,he=re+ae,Re=ze=>{const Fe=Math.max(6,(ze.size||18)/2),He=Fe*.8,$=Fe+He,A=ze.x-$,ce=ze.x+$,ve=ze.y-$,Ne=ze.y+$;return!(G<A||ee>ce||he<ve||pe>Ne)};return Z.filter(ze=>!Re(ze))}),!sl)){const Z=g/2,ae=V-Z,ee=V+Z,G=re-Z,pe=re+Z,he=Re=>{const ze=(Re.size||18)/2,Fe=Re.x-ze,He=Re.x+ze,$=Re.y-ze,A=Re.y+ze;return!(ee<Fe||ae>He||pe<$||G>A)};Un(Re=>Re.filter(De=>!he(De))),Tn(Re=>Re.filter(De=>!he(De)))}}else if(In&&Pn&&Yt){if(tl){hl(!1),bi(null);return}const Z=V-Pn.x,ae=re-Pn.y;Yt==="top"&&v?p(ee=>ee?{...ee,x:ee.x+Z,y:ee.y+ae}:null):Yt==="bottom"&&d?B(ee=>ee?{...ee,x:ee.x+Z,y:ee.y+ae}:null):Yt==="both"&&(v&&p(ee=>ee?{...ee,x:ee.x+Z,y:ee.y+ae}:null),d&&B(ee=>ee?{...ee,x:ee.x+Z,y:ee.y+ae}:null)),bi({x:V,y:re})}},[Ae,Oe,E,g,In,Pn,Yt,v,d,ma,bs,$e,Ue,Ie,Le.x,Le.y,Ms,To,tl,mn,vl,Vn,cn,Nn,zt,xt,Un,Tn]),Xr=C.useCallback(()=>{if(E==="select"&&Ms){const a=Tl,r=To;if(Xo(!1),Yr(null),xs(null),a&&r){const S=Math.max(3,5/Ie),b=a.width<S&&a.height<S,f=($,A)=>{const ce=a.x,ve=a.y,Ne=a.x+a.width,Pe=a.y+a.height;return $>=ce&&$<=Ne&&A>=ve&&A<=Pe},j=($,A,ce,ve,Ne,Pe,ct,Xe)=>{const wt=(ki,Ai)=>{let Hl=0;return ki<Ne?Hl|=1:ki>ct&&(Hl|=2),Ai<Pe?Hl|=4:Ai>Xe&&(Hl|=8),Hl};let yt=$,Mt=A,Zt=ce,Mn=ve,wn=wt(yt,Mt),Ct=wt(Zt,Mn);for(;;){if((wn|Ct)===0)return!0;if((wn&Ct)!==0)return!1;const ki=wn!==0?wn:Ct;let Ai=0,Hl=0;ki&8?(Ai=yt+(Zt-yt)*(Xe-Mt)/(Mn-Mt),Hl=Xe):ki&4?(Ai=yt+(Zt-yt)*(Pe-Mt)/(Mn-Mt),Hl=Pe):ki&2?(Hl=Mt+(Mn-Mt)*(ct-yt)/(Zt-yt),Ai=ct):(Hl=Mt+(Mn-Mt)*(Ne-yt)/(Zt-yt),Ai=Ne),ki===wn?(yt=Ai,Mt=Hl,wn=wt(yt,Mt)):(Zt=Ai,Mn=Hl,Ct=wt(Zt,Mn))}},z=a.x,R=a.y,J=a.x+a.width,V=a.y+a.height,Z=Math.max(6/Ie,4/Ie,.5),ae=($,A,ce,ve,Ne,Pe)=>{const ct=Ne-ce,Xe=Pe-ve;if(ct===0&&Xe===0)return Math.hypot($-ce,A-ve);const ot=Math.max(0,Math.min(1,(($-ce)*ct+(A-ve)*Xe)/(ct*ct+Xe*Xe))),pt=ce+ot*ct,an=ve+ot*Xe;return Math.hypot($-pt,A-an)},ee=r?.shiftKey===!0,G=new Set(ee?Array.from(Nt):[]),pe=new Set(ee?Array.from(vt):[]),he=new Set(ee?Array.from(mt):[]),Re=new Set(ee?Array.from(Vt):[]),De=r?.hitStrokeId;if(De){const $=ye.find(A=>A.id===De);if($){let A=!1;if($.type==="via"||$.type==="pad"?A=$n:A=$.layer==="top"?Al:Nl,A){ee?G.has(De)?G.delete(De):G.add(De):(G.clear(),G.add(De)),qt(G),Bt(pe),Wt(he),Xt(Re);return}}}if(b){let $=null;for(const A of ye){let ce=!1;if(A.type==="via"||A.type==="pad"?ce=$n:ce=A.layer==="top"?Al:Nl,!ce)continue;let ve=1/0;if(A.type==="via"||A.type==="pad"){const Ne=A.points[0],Pe=Math.max(1,A.size/2);ve=Math.hypot(Ne.x-r.x,Ne.y-r.y);const Xe=Math.max(6/Ie,4/Ie,.5);ve<=Math.max(Pe,Xe)&&(!$||ve<$.dist)&&($={id:A.id,dist:ve})}else for(let Ne=0;Ne<A.points.length-1;Ne++){const Pe=A.points[Ne],ct=A.points[Ne+1],Xe=ae(r.x,r.y,Pe.x,Pe.y,ct.x,ct.y);if(Xe<=Math.max(Z,A.size/2)){(!$||Xe<$.dist)&&($={id:A.id,dist:Xe});break}}}$&&G.add($.id)}else for(const $ of ye){let A=!1;if($.type==="via"?A=$n:$.type==="pad"?A=($.layer||"top")==="top"?si:Ti:A=$.layer==="top"?Al:Nl,!A)continue;let ce=!1;if($.type==="via"||$.type==="pad"){const ve=$.points[0];ce=f(ve.x,ve.y)}else for(let ve=0;ve<$.points.length-1;ve++){const Ne=$.points[ve],Pe=$.points[ve+1];if(j(Ne.x,Ne.y,Pe.x,Pe.y,z,R,J,V)||f(Ne.x,Ne.y)&&f(Pe.x,Pe.y)){ce=!0;break}}ce&&G.add($.id)}const ze=$=>{const ce=Math.max(10,$.size||18)/2;return $.x-ce<=J&&$.x+ce>=z&&$.y-ce<=V&&$.y+ce>=R};if(b){const $=A=>{const ve=Math.max(10,A.size||18)/2;return r.x>=A.x-ve&&r.x<=A.x+ve&&r.y>=A.y-ve&&r.y<=A.y+ve};ri&&zt.forEach(A=>{$(A)&&pe.add(A.id)}),Pl&&xt.forEach(A=>{$(A)&&pe.add(A.id)})}else ri&&zt.forEach($=>{ze($)&&pe.add($.id)}),Pl&&xt.forEach($=>{ze($)&&pe.add($.id)});const Fe=$=>{const A=Math.max(6,$.size/2),ce=A*.8,ve=A+ce;return $.x-ve<=J&&$.x+ve>=z&&$.y-ve<=V&&$.y+ve>=R};if(ci)if(b){let $=null;for(const A of St){const ce=Math.max(6,A.size/2),ve=ce*.8,Ne=ce+ve,Pe=Math.hypot(A.x-r.x,A.y-r.y),ct=Math.abs(r.x-A.x)<=Z&&Math.abs(r.y-A.y)<=Ne,Xe=Math.abs(r.y-A.y)<=Z&&Math.abs(r.x-A.x)<=Ne;if(Pe<=Math.max(ce,Z)||ct||Xe){const pt=Math.min(Pe,Math.abs(r.x-A.x)+Math.abs(r.y-A.y));(!$||pt<$.dist)&&($={id:A.id,dist:pt})}}$&&he.add($.id)}else St.forEach($=>{Fe($)&&he.add($.id)});const He=$=>{const A=Math.max(6,($.size||18)/2),ce=A*.8,ve=A+ce;return $.x-ve<=J&&$.x+ve>=z&&$.y-ve<=V&&$.y+ve>=R};if(Wl)if(b){let $=null;for(const A of Dt){const ce=Math.max(6,(A.size||18)/2),ve=ce*.8,Ne=ce+ve,Pe=Math.hypot(A.x-r.x,A.y-r.y),ct=Math.abs(r.x-A.x)<=Z&&Math.abs(r.y-A.y)<=Ne,Xe=Math.abs(r.y-A.y)<=Z&&Math.abs(r.x-A.x)<=Ne;if(Pe<=Math.max(ce,Z)||ct||Xe){const pt=Math.min(Pe,Math.abs(r.x-A.x)+Math.abs(r.y-A.y));(!$||pt<$.dist)&&($={id:A.id,dist:pt})}}$&&Re.add($.id)}else Dt.forEach($=>{He($)&&Re.add($.id)});qt(G),Bt(pe),Wt(he),Xt(Re)}}if(Ae&&Oe.length>0){if(E==="draw"&&me!=="trace"){const a={id:Date.now().toString(),points:Oe,color:M,size:g,layer:$e,type:"trace"};Ue(r=>[...r,a]),$e==="top"?vi(r=>[...r,a.id]):Li(r=>[...r,a.id])}ut([])}Aa&&(Br(!1),es.current=null,ts.current=null),Be(!1),hl(!1),bi(null),ur(!1)},[Ae,Oe,E,M,g,$e,Tl,To,Ms,ye,Ie,ns,Nt,St,Dt,zt,xt,vt,mt,Vt,$n,Al,Nl,ri,Pl,ci,Wl]);it.useEffect(()=>{if(!(E==="pan"&&Aa&&ts.current))return;const a=x=>{const y=An.current;if(!y)return;const S=y.getBoundingClientRect(),b=y.width/S.width,f=y.height/S.height,{startClientX:j,startClientY:z,panX:R,panY:J}=ts.current,V=(x.clientX-j)*b,re=(x.clientY-z)*f;kn({x:R+V,y:J+re})},r=()=>{Br(!1),es.current=null,ts.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",r,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)}},[E,Aa]);const fi=C.useCallback(()=>{const a=An.current;if(!a)return;const r=a.getContext("2d");if(!r)return;r.clearRect(0,0,a.width,a.height),r.save(),r.beginPath(),r.rect(40,40,a.width-80,a.height-80),r.clip(),r.translate(40,40);const x=(b,f)=>{const j=b.width,z=b.height,R=document.createElement("canvas");R.width=j,R.height=z;const J=R.getContext("2d");if(!J)return R;J.drawImage(b,0,0,j,z);const re=J.getImageData(0,0,j,z).data,Z=new Uint8ClampedArray(j*z);for(let ze=0;ze<j*z;ze++){const Fe=re[ze*4+0],He=re[ze*4+1],$=re[ze*4+2];Z[ze]=Math.round(.299*Fe+.587*He+.114*$)}const ae=[-1,0,1,-2,0,2,-1,0,1],ee=[-1,-2,-1,0,0,0,1,2,1],G=new Float32Array(j*z);for(let ze=1;ze<z-1;ze++)for(let Fe=1;Fe<j-1;Fe++){let He=0,$=0,A=0;for(let ve=-1;ve<=1;ve++)for(let Ne=-1;Ne<=1;Ne++){const Pe=Fe+Ne,ct=ze+ve,Xe=Z[ct*j+Pe];He+=Xe*ae[A],$+=Xe*ee[A],A++}const ce=Math.sqrt(He*He+$*$);G[ze*j+Fe]=ce}let pe=0;for(let ze=0;ze<G.length;ze++)G[ze]>pe&&(pe=G[ze]);const he=J.createImageData(j,z),Re=he.data,De=.2;for(let ze=0;ze<j*z;ze++){const He=(pe>0?G[ze]/pe:0)>=De?255:0,$=f?255-He:He;Re[ze*4+0]=$,Re[ze*4+1]=$,Re[ze*4+2]=$,Re[ze*4+3]=255}return J.putImageData(he,0,0),R},y=(b,f,j,z,R,J,V,re)=>{const Z=document.createElement("canvas");Z.width=j,Z.height=z;const ae=Z.getContext("2d",{willReadFrequently:!0});ae.clearRect(0,0,j,z),ae.drawImage(f,0,0,j,z);let ee=Z;if(Math.abs(R)>1e-6){const G=Math.tan(R),pe=Math.max(.2,1-G),he=Math.max(.2,1+G),Re=Math.max(pe,he),De=Math.max(1,Math.ceil(j*Re)),ze=document.createElement("canvas");ze.width=De,ze.height=z;const Fe=ze.getContext("2d",{willReadFrequently:!0});Fe.clearRect(0,0,De,z);for(let He=0;He<z;He++){const $=z<=1?0:He/(z-1),A=pe*(1-$)+he*$,ce=Math.max(1,j*A),ve=(De-ce)/2;Fe.drawImage(ee,0,He,j,1,ve,He,ce,1)}ee=ze}if(Math.abs(J)>1e-6){const G=Math.tan(J),pe=Math.max(.2,1-G),he=Math.max(.2,1+G),Re=Math.max(pe,he),De=Math.max(1,Math.ceil(z*Re)),ze=document.createElement("canvas");ze.width=ee.width,ze.height=De;const Fe=ze.getContext("2d",{willReadFrequently:!0});Fe.clearRect(0,0,ze.width,De);for(let He=0;He<ee.width;He++){const $=ee.width<=1?0:He/(ee.width-1),A=pe*(1-$)+he*$,ce=Math.max(1,z*A),ve=(De-ce)/2;Fe.drawImage(ee,He,0,1,ee.height,He,ve,1,ce)}ee=ze}b.drawImage(ee,-V/2,-re/2,V,re)};r.translate(Le.x,Le.y),r.scale(Ie,Ie);{const b=ta&&ss;if(v&&v.bitmap&&ta){const f=v.bitmap;if(r.save(),r.globalAlpha=1,de&&!Y?r.filter="grayscale(100%)":r.filter="none",r.translate(v.x,v.y),r.rotate(v.rotation*Math.PI/180),v.skewX||v.skewY){const J=Math.tan(v.skewX||0),V=Math.tan(v.skewY||0);r.transform(1,V,J,1,0,0)}r.scale(v.scale*(v.flipX?-1:1),v.scale*(v.flipY?-1:1));const j=f.width*1,z=f.height*1,R=Y?x(f,_e):f;v.keystoneV&&Math.abs(v.keystoneV)>1e-6||v.keystoneH&&Math.abs(v.keystoneH)>1e-6?y(r,R,f.width,f.height,v.keystoneV||0,v.keystoneH||0,j,z):r.drawImage(R,-j/2,-z/2,j,z),r.restore()}if(d&&d.bitmap&&ss){const f=d.bitmap;if(r.save(),r.globalAlpha=b?F/100:1,de&&!Y?r.filter="grayscale(100%)":r.filter="none",r.translate(d.x,d.y),r.rotate(d.rotation*Math.PI/180),d.skewX||d.skewY){const J=Math.tan(d.skewX||0),V=Math.tan(d.skewY||0);r.transform(1,V,J,1,0,0)}r.scale(d.scale*(d.flipX?-1:1),d.scale*(d.flipY?-1:1));const j=f.width*1,z=f.height*1,R=Y?x(f,_e):f;d.keystoneV&&Math.abs(d.keystoneV)>1e-6||d.keystoneH&&Math.abs(d.keystoneH)>1e-6?y(r,R,f.width,f.height,d.keystoneV||0,d.keystoneH||0,j,z):r.drawImage(R,-j/2,-z/2,j,z),r.restore()}}if(Wa(r),ci&&St.length>0){const b=f=>{r.save();const j=Rt.find(re=>re.id===f.powerBusId),z=mt.has(f.id),R="#ff0000";r.strokeStyle=R,r.lineWidth=Math.max(1,(z?3:2)/Math.max(Ie,.001)),r.lineCap="round";const J=Math.max(6,f.size/2),V=J*.8;z&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ie,.001)),r.beginPath(),r.arc(f.x,f.y,J+V+3,0,Math.PI*2),r.stroke()),r.strokeStyle=R,r.lineWidth=Math.max(1,(z?3:2)/Math.max(Ie,.001)),r.beginPath(),r.arc(f.x,f.y,J,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(f.x,f.y-J-V),r.lineTo(f.x,f.y+J+V),r.stroke(),r.beginPath(),r.moveTo(f.x-J-V,f.y),r.lineTo(f.x+J+V,f.y),r.stroke(),j&&(r.fillStyle=R,r.font=`${Math.max(10,J*.8)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(j.voltage,f.x,f.y+J+V+12)),r.restore()};St.forEach(b)}if(Wl&&Dt.length>0){const b=f=>{r.save();const j=Vt.has(f.id),z=f.color||"#000000";if(f.groundBusId==="groundbus-earth"){const J=Math.max(6,f.size||18),V=J*.9,re=J*.24,Z=J*1.6;r.strokeStyle=z,r.lineWidth=Math.max(1,(j?3:2)/Math.max(Ie,.001)),r.lineCap="round",j&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ie,.001)),r.setLineDash([5,5]),r.strokeRect(f.x-Z/2-3,f.y-3,Z+6,V+re*2+6),r.setLineDash([])),r.strokeStyle=z,r.lineWidth=Math.max(1,(j?3:2)/Math.max(Ie,.001)),r.beginPath(),r.moveTo(f.x,f.y),r.lineTo(f.x,f.y+V),r.stroke();for(let ae=0;ae<3;ae++){const ee=f.y+V+ae*re,G=Z*(1-ae*.25);r.beginPath(),r.moveTo(f.x-G/2,ee),r.lineTo(f.x+G/2,ee),r.stroke()}}else{const J=Math.max(6,(f.size||18)/2),V=J*.8;j&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ie,.001)),r.beginPath(),r.arc(f.x,f.y,J+V+3,0,Math.PI*2),r.stroke()),r.strokeStyle=z,r.lineWidth=Math.max(1,(j?3:2)/Math.max(Ie,.001)),r.beginPath(),r.arc(f.x,f.y,J,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(f.x,f.y-J-V),r.lineTo(f.x,f.y+J+V),r.stroke(),r.beginPath(),r.moveTo(f.x-J-V,f.y),r.lineTo(f.x+J+V,f.y),r.stroke()}r.restore()};Dt.forEach(b)}const S=b=>{const f=Math.max(10,b.size||18),j=f/2;r.save(),r.strokeStyle=b.color||"#111",r.lineWidth=Math.max(1,2/Math.max(Ie,.001));const z=b.pinConnections||[],R=z.length>0&&z.length===b.pinCount&&z.every(re=>re&&re.trim()!=="");r.fillStyle=R?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",r.beginPath(),r.rect(b.x-j,b.y-j,f,f),r.fill(),r.stroke();let J="abbreviation"in b&&b.abbreviation?String(b.abbreviation).trim():"";(!J||J===""||J==="****"||J==="*"||J==="?")&&(J=md(b.componentType)),r.fillStyle=b.color||"#111",r.font=`bold ${Math.max(8,f*.35)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(J,b.x,b.y),vt.has(b.id)&&(r.setLineDash([4,3]),r.strokeStyle="#00bfff",r.lineWidth=1.5,r.strokeRect(b.x-j-3,b.y-j-3,f+6,f+6),r.setLineDash([])),r.restore()};if(la){const b=j=>{const z=parseInt(j,10);if(isNaN(z))return null;for(const R of ye)if((R.type==="via"||R.type==="pad")&&R.points.length>0){const J=R.points[0];if(J.id===z)return{x:J.x,y:J.y}}for(const R of ye)if(R.type==="trace"){for(const J of R.points)if(J.id===z)return{x:J.x,y:J.y}}for(const R of St)if(R.pointId===z)return{x:R.x,y:R.y};for(const R of Dt)if(R.pointId===z)return{x:R.x,y:R.y};return null},f=j=>{const z=j.pinConnections||[],R=j.componentType==="Electrolytic Capacitor"||j.componentType==="Diode"||j.componentType==="Battery"||j.componentType==="ZenerDiode",J=j.componentType==="Capacitor"&&"dielectric"in j&&j.dielectric==="Tantalum",V=(R||J)&&j.pinPolarities,re=new Map;for(let Z=0;Z<z.length;Z++){const ae=z[Z];if(ae&&ae.trim()!==""){const ee=ae.trim(),G=!!(V&&j.pinPolarities&&Z<j.pinPolarities.length&&j.pinPolarities[Z]==="-"),pe=re.get(ee);pe!==void 0?re.set(ee,pe||G):re.set(ee,G)}}for(const[Z,ae]of re){const ee=b(Z);if(ee){const G={x:j.x,y:j.y};r.save(),r.strokeStyle=ae?"rgba(0, 0, 0, 0.8)":"rgba(0, 150, 255, 0.6)",r.lineWidth=Math.max(1,3/Math.max(Ie,.001)),r.beginPath(),r.moveTo(G.x,G.y),r.lineTo(ee.x,ee.y),r.stroke(),r.restore()}}};ri&&zt.forEach(f),Pl&&xt.forEach(f)}if(ri&&zt.forEach(S),Pl&&xt.forEach(S),E==="select"&&Tl){r.save();const b=Math.max(2,6/Math.max(1e-4,Ie));r.strokeStyle="#00bfff",r.fillStyle="rgba(0, 191, 255, 0.15)",r.lineWidth=Math.max(1,1.5/Math.max(1e-4,Ie)),r.setLineDash([b,b]),r.beginPath(),r.rect(Tl.x,Tl.y,Tl.width,Tl.height),r.fill(),r.stroke(),r.setLineDash([]),r.restore()}r.restore()},[v,d,F,ye,Oe,Ae,E,M,g,de,Y,_e,Yt,$e,Ie,Le.x,Le.y,ta,ss,$n,Al,Nl,si,Ti,ri,Pl,zt,xt,ci,St,Wl,Dt,la,Tl,Nt,vt,mt,Vt,lt,we,Ke,Ye,at,me,Ut,tl]);it.useEffect(()=>{const a=An.current,r=ka.current,x=Nr.current,y=Mr.current;if(!a||!r||!x||!y)return;let S=null;const b=a.width-80,f=a.height-80,j=b/2,z=f/2,R=De=>{if(!De||!De.bitmap)return;const ze=De.bitmap.width,Fe=De.bitmap.height,He=De.keystoneV?Math.tan(De.keystoneV):0,$=De.keystoneH?Math.tan(De.keystoneH):0,A=Math.max(.2,1-He),ce=Math.max(.2,1+He),ve=Math.max(.2,1-$),Ne=Math.max(.2,1+$),Pe=Math.max(A,ce),ct=Math.max(ve,Ne),Xe=ze*Pe,ot=Fe*ct,pt=De.skewX?Math.tan(De.skewX):0,an=De.skewY?Math.tan(De.skewY):0,rt=Math.abs(De.scale),Ge=Math.abs(rt)*Xe+Math.abs(pt)*Math.abs(rt)*ot,wt=Math.abs(an)*Math.abs(rt)*Xe+Math.abs(rt)*ot,yt=Wg(Ge,wt,j,z,De.x,De.y,1,1,De.rotation);S=Yg(S,yt)};if(R(v),R(d),!S){x.style.width=`${r.clientWidth}px`,y.style.height=`${r.clientHeight}px`;return}const J=S,V=J.maxX-J.minX,re=J.maxY-J.minY,Z=V*Ie,ae=re*Ie,ee=8,G=Math.max(r.clientWidth,Math.ceil(Z)+ee*2),pe=Math.max(r.clientHeight,Math.ceil(ae)+ee*2);x.style.width=`${G}px`,y.style.height=`${pe}px`,Ko.current=J.minX*Ie-ee,Jo.current=J.minY*Ie-ee;const he=kr.current,Re=Ar.current;if(ea.current=!0,he){const De=Math.max(0,he.scrollWidth-he.clientWidth),ze=Math.max(0,Math.min(De,-(Le.x+Ko.current)));he.scrollLeft=ze}if(Re){const De=Math.max(0,Re.scrollHeight-Re.clientHeight),ze=Math.max(0,Math.min(De,-(Le.y+Jo.current)));Re.scrollTop=ze}requestAnimationFrame(()=>{ea.current=!1})},[v,d,Ie,Le.x,Le.y,Bn.width,Bn.height]),it.useEffect(()=>{const a=()=>{const r=ka.current;if(!r)return;const x=1.6,y=24,S=r.clientWidth-y,b=r.clientHeight-y,f=Math.floor(b*x),j=Math.floor(S/x);let z,R;f<=S?(z=f,R=b):(z=S,R=j),z=Math.max(600,z),R=Math.max(375,R),ls(J=>{if(J.width!==z||J.height!==R){const V=J.width-80,re=J.height-80,Z=z-80,ae=R-80,ee=V>0?Z/V:1,G=re>0?ae/re:1;kn(pe=>({x:pe.x*ee,y:pe.y*G}))}return J.width===z&&J.height===R?J:{width:z,height:R}})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[kn]),it.useEffect(()=>{tl&&(In&&(hl(!1),bi(null)),yi(null))},[tl,In,hl,bi,yi]);const Wa=C.useCallback(a=>{if(ye.forEach(r=>{if(r.type==="via"||r.type==="pad")return;let x=!1;if(r.layer==="top"?x=Al:r.layer==="bottom"&&(x=Nl),!!x)if(r.points.length===1){const y=r.points[0],S=Math.max(.5,r.size/2);Nt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(y.x,y.y,S+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=r.color,a.beginPath(),a.arc(y.x,y.y,S,0,Math.PI*2),a.fill()}else{Nt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=r.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),r.points.forEach((y,S)=>{S===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=r.color,a.lineWidth=r.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),r.points.forEach((y,S)=>{S===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke();for(const y of r.points)a.beginPath(),a.arc(y.x,y.y,r.size/2,0,Math.PI*2),a.fill()}}),ye.forEach(r=>{if(r.type==="via"){if(!$n)return}else if(r.type==="pad"){if(r.layer==="top"&&!si||r.layer==="bottom"&&!Ti)return}else return;const x=r.points[0];if(Nt.has(r.id)){if(r.type==="via"){const y=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(x.x,x.y,y,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(r.type==="pad"){const y=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(x.x-y,x.y-y,r.size+6,r.size+6),a.setLineDash([])}}if(r.type==="via"){const y=Math.max(.5,r.size/2),S=y*.5,b=y*.7;a.fillStyle=r.color,a.beginPath(),a.arc(x.x,x.y,y,0,Math.PI*2),a.arc(x.x,x.y,S,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-b,x.y),a.lineTo(x.x+b,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-b),a.lineTo(x.x,x.y+b),a.stroke()}else if(r.type==="pad"){const y=Math.max(.5,r.size/2),S=r.size,b=S*.5,f=y*.7;a.fillStyle=r.color,a.beginPath(),a.rect(x.x-y,x.y-y,S,S),a.rect(x.x-b/2,x.y-b/2,b,b),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-f,x.y),a.lineTo(x.x+f,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-f),a.lineTo(x.x,x.y+f),a.stroke()}}),Oe.length>0){const r=$e;let x=!0;if(E==="draw"&&(me==="via"?x=$n:x=r==="top"?Al:Nl),x)if(E==="draw")if(me==="via"){const y=Oe[Oe.length-1],S=Math.max(.5,g/2),b=S*.5,f=S*.7;a.fillStyle=M,a.beginPath(),a.arc(y.x,y.y,S,0,Math.PI*2),a.arc(y.x,y.y,b,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(y.x-f,y.y),a.lineTo(y.x+f,y.y),a.stroke(),a.beginPath(),a.moveTo(y.x,y.y-f),a.lineTo(y.x,y.y+f),a.stroke()}else if(me==="pad"){const y=Oe[Oe.length-1],S=Math.max(.5,g/2),b=g,f=b*.5,j=S*.7;a.fillStyle=M,a.beginPath(),a.rect(y.x-S,y.y-S,b,b),a.rect(y.x-f/2,y.y-f/2,f,f),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(y.x-j,y.y),a.lineTo(y.x+j,y.y),a.stroke(),a.beginPath(),a.moveTo(y.x,y.y-j),a.lineTo(y.x,y.y+j),a.stroke()}else{const y=lt||"top",S=y==="top"?we:Ke,b=y==="top"?Ye:at;if(Oe.length===1){const f=Oe[0],j=Math.max(.5,b/2);a.fillStyle=S,a.beginPath(),a.arc(f.x,f.y,j,0,Math.PI*2),a.fill(),Ut&&(a.strokeStyle=S,a.lineWidth=b,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(Ut.x,Ut.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=S,a.lineWidth=b,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),Oe.forEach((f,j)=>{j===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y)}),a.stroke(),Ut&&Oe.length>0){const f=Oe[Oe.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(Ut.x,Ut.y),a.stroke(),a.globalAlpha=1}}else E==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=g,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),Oe.forEach((y,S)=>{S===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke())}},[ye,Nt,Al,Nl,$n,si,Ti,Oe,E,me,M,g,$e,lt,we,Ke,Ye,at,Ut]),Fs=C.useCallback((a,r)=>{if(tl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&v?p(x=>x?{...x,...r}:null):a==="bottom"&&d?B(x=>x?{...x,...r}:null):a==="both"&&(v&&p(x=>x?{...x,...r}:null),d&&B(x=>x?{...x,...r}:null))},[v,d,tl]),Bc=C.useCallback(()=>{Yt&&(Fs(Yt,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),fe(!1),q(!1),Ee(!1))},[Fs,Yt]),da=C.useCallback(()=>{if(Nt.size>0||vt.size>0||mt.size>0||Vt.size>0){if(Nt.size>0){const a=ye.filter(S=>Nt.has(S.id)),r=mn&&a.some(S=>S.type==="via"),x=Vn&&a.some(S=>S.type==="trace"),y=vl&&a.some(S=>S.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(x){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(vt.size>0&&sl){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(mt.size>0&&cn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Vt.size>0&&Nn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Ue(a=>a.map(r=>{if(Nt.has(r.id)){const x=r.size+1;return r.type==="via"?Te("via",x):r.type==="pad"?Te("pad",x):r.type==="trace"&&Te("trace",x,r.layer),{...r,size:x}}return r})),vt.size>0){const a=(vt.size>0&&zt.find(r=>vt.has(r.id))?.size||18)+1;Te("component",a),Un(r=>r.map(x=>vt.has(x.id)?{...x,size:(x.size||18)+1}:x)),Tn(r=>r.map(x=>vt.has(x.id)?{...x,size:(x.size||18)+1}:x))}if(mt.size>0){const a=(St.find(r=>mt.has(r.id))?.size||18)+1;Te("power",a),Kn(r=>r.map(x=>mt.has(x.id)?{...x,size:x.size+1}:x))}if(Vt.size>0){const a=(Dt.find(r=>Vt.has(r.id))?.size||18)+1;Te("ground",a),Dl(r=>r.map(x=>Vt.has(x.id)?{...x,size:(x.size||18)+1}:x))}}else W(a=>Math.min(40,a+1))},[Nt,vt,mt,Vt,ye,mn,Vn,sl,cn,Nn,E,me,$e,Te]),Xa=C.useCallback(()=>{if(Nt.size>0||vt.size>0||mt.size>0||Vt.size>0){if(Nt.size>0){const a=ye.filter(S=>Nt.has(S.id)),r=mn&&a.some(S=>S.type==="via"),x=Vn&&a.some(S=>S.type==="trace"),y=vl&&a.some(S=>S.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(x){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(vt.size>0&&sl){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(mt.size>0&&cn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Vt.size>0&&Nn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Ue(a=>a.map(r=>{if(Nt.has(r.id)){const x=Math.max(1,r.size-1);return r.type==="via"?Te("via",x):r.type==="pad"?Te("pad",x):r.type==="trace"&&Te("trace",x,r.layer),{...r,size:x}}return r})),vt.size>0){const a=Math.max(1,(zt.find(r=>vt.has(r.id))?.size||18)-1);Te("component",a),Un(r=>r.map(x=>vt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x)),Tn(r=>r.map(x=>vt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x))}if(mt.size>0){const a=Math.max(1,(St.find(r=>mt.has(r.id))?.size||18)-1);Te("power",a),Kn(r=>r.map(x=>mt.has(x.id)?{...x,size:Math.max(1,x.size-1)}:x))}if(Vt.size>0){const a=Math.max(1,(Dt.find(r=>Vt.has(r.id))?.size||18)-1);Te("ground",a),Dl(r=>r.map(x=>Vt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x))}}else W(a=>Math.max(1,a-1))},[Nt,vt,mt,Vt,ye,mn,Vn,sl,cn,Nn,E,me,$e,Te]),vs=C.useCallback(()=>{const a=Si.size;if(Nt.size>0||vt.size>0||mt.size>0||Vt.size>0){if(Nt.size>0){const r=ye.filter(b=>Nt.has(b.id)),x=mn&&r.some(b=>b.type==="via"),y=vl&&r.some(b=>b.type==="pad"),S=Vn&&r.some(b=>b.type==="trace");if(x||y||S){alert("Cannot change size: selected items are locked.");return}}if(vt.size>0&&sl){alert("Cannot change size: selected components are locked.");return}if(mt.size>0&&cn){alert("Cannot change size: selected power nodes are locked.");return}if(Vt.size>0&&Nn){alert("Cannot change size: selected ground nodes are locked.");return}Ue(r=>r.map(x=>Nt.has(x.id)?(x.type==="via"?(Te("via",a),al(y=>{const S=new Map(y),b=S.get("via");return b&&S.set("via",{...b,settings:{...b.settings,size:a}}),S})):x.type==="pad"?(Te("pad",a),al(y=>{const S=new Map(y),b=S.get("pad");return b&&S.set("pad",{...b,settings:{...b.settings,size:a}}),S})):x.type==="trace"&&Te("trace",a,x.layer),{...x,size:a}):x)),vt.size>0&&(Te("component",a),Un(r=>r.map(x=>vt.has(x.id)?{...x,size:a}:x)),Tn(r=>r.map(x=>vt.has(x.id)?{...x,size:a}:x))),mt.size>0&&(Te("power",a),Kn(r=>r.map(x=>mt.has(x.id)?{...x,size:a}:x))),Vt.size>0&&(Te("ground",a),Dl(r=>r.map(x=>Vt.has(x.id)?{...x,size:a}:x)))}else W(a),E==="draw"&&me==="trace"?$e==="top"?(Pt(a),Te("trace",a,"top")):(_(a),Te("trace",a,"bottom")):Te(E==="draw"&&me==="via"?"via":E==="draw"&&me==="pad"?"pad":E==="component"?"component":E==="power"?"power":E==="ground"?"ground":"brush",a);Oi({visible:!1,size:6})},[Si.size,Nt,vt,mt,Vt,ye,mn,Vn,sl,cn,Nn,E,me,$e,Te,Qt,al]),zo=C.useCallback(()=>{$l({visible:!1,source:null,interval:5})},[]),ms=C.useCallback(async(a,r=!1)=>{if(a===null){ii(!1),Qi(null),dn.current&&(clearInterval(dn.current),dn.current=null),Zi({visible:!1,interval:5}),r&&$l({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!Cn){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let x=wi;if(!x){const f=window;if(typeof f.showDirectoryPicker=="function")try{x=await f.showDirectoryPicker(),ji(x)}catch(j){j?.name!=="AbortError"&&(console.error("Failed to get directory:",j),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}Es(x);const y=Cn.replace(/\.json$/i,""),b=bc(y).replace(/[^a-zA-Z0-9_-]/g,"_");Ra(b),Fa.current=x,Ql.current=b,Qi(a),ii(!0),rl.current=!0,Zi({visible:!1,interval:5}),r&&$l({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),Ur.current&&Ur.current()},200)},[Cn,wi,ii,Qi,Es,Ra,Zi,$l,ji]),Ro=C.useCallback(()=>{k("select"),qt(new Set),Bt(new Set),Wt(new Set),Xt(new Set)},[qt,Bt,Wt,Xt]),$i=C.useCallback(a=>{if(a.key==="Escape"){const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type==="checkbox"||y.tagName==="INPUT"&&y.type==="radio")){y.blur(),a.preventDefault(),a.stopPropagation();return}}const r=document.activeElement;if(!(r&&(r.tagName==="INPUT"&&r.type!=="checkbox"&&r.type!=="radio"||r.tagName==="TEXTAREA"||r.isContentEditable)||pa.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),da();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),Xa();return}if((a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="ArrowLeft"||a.key==="ArrowRight")&&vt.size>0){a.preventDefault(),a.stopPropagation();const y=a.shiftKey?10:1;let S=0,b=0;a.key==="ArrowUp"?b=-y:a.key==="ArrowDown"?b=y:a.key==="ArrowLeft"?S=-y:a.key==="ArrowRight"&&(S=y);for(const f of vt){const j=zt.find(z=>z.id===f);if(j){const z=j.x+S,R=j.y+b,J=ln({x:z,y:R});Un(V=>V.map(re=>re.id===f?{...re,x:J.x,y:J.y}:re))}else{const z=xt.find(R=>R.id===f);if(z){const R=z.x+S,J=z.y+b,V=ln({x:R,y:J});Tn(re=>re.map(Z=>Z.id===f?{...Z,x:V.x,y:V.y}:Z))}}}return}if((a.key==="I"||a.key==="i")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation();const y=[];Nt.size>0,Nt.size===0&&vt.size===0&&mt.size===0&&Vt.size===0&&y.push(`
No objects selected.`);const S=y.join(`
`);console.log(S),Lo({visible:!0,text:S});return}if((a.key==="N"||a.key==="n")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation(),Ml(!0);return}if(a.key==="O"||a.key==="o"){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;a.preventDefault(),a.stopPropagation(),We(1);const b=An.current,f=ka.current;let j=0,z=0;if(b&&f){const R=b.getBoundingClientRect(),J=f.getBoundingClientRect(),V=b.width-80,re=b.height-80,ee=60+168+6,G=R.left-J.left,pe=ee-G,he=R.width-Math.max(0,pe),Re=pe+he/2,De=R.height/2,ze=V/2,Fe=re/2,He=R.width/b.width,$=R.height/b.height,A=Re/He,ce=De/$,ve=A-40,Ne=ce-40;j=ve-ze,z=Ne-Fe}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),kn({x:j,y:z}),ge("overlay"),qt(new Set),Bt(new Set),Wt(new Set),Xt(new Set),k("select");return}if((a.key==="Alt"||a.altKey)&&Pr(!0),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),Ro(),Ci(!1),Ul(!1),Zl(!1),Bl(!1),Yl(!1),Hs(!1),Pa(null);return}if(a.key==="Enter"&&E==="draw"&&me==="trace"){Ya();return}if((a.key==="Delete"||a.key==="Backspace")&&(Nt.size>0||vt.size>0||mt.size>0||Vt.size>0)){if(a.preventDefault(),a.stopPropagation(),Nt.size>0){const y=ye.filter(j=>Nt.has(j.id)),S=mn&&y.some(j=>j.type==="via"),b=Vn&&y.some(j=>j.type==="trace"),f=vl&&y.some(j=>j.type==="pad");S?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):b?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):f?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):(Ue(j=>j.filter(z=>!Nt.has(z.id))),qt(new Set))}vt.size>0&&(sl?alert("Cannot delete: Components are locked. Unlock components to delete them."):(Un(y=>y.filter(S=>!vt.has(S.id))),Tn(y=>y.filter(S=>!vt.has(S.id))),Bt(new Set))),mt.size>0&&(cn?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Kn(y=>y.filter(S=>!mt.has(S.id))),Wt(new Set))),Vt.size>0&&(Nn?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(Dl(y=>y.filter(S=>!Vt.has(S.id))),Xt(new Set)));return}if((E==="draw"||E==="erase"||E==="power"||E==="ground")&&(a.key==="z"||a.key==="Z")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),E==="power"){Kn(y=>y.length===0?y:y.slice(0,-1));return}if(E==="ground"){Dl(y=>y.length===0?y:y.slice(0,-1));return}if(E==="draw"&&me==="trace"){const y=Oe,S=jt.current,b=y.length>0?y:S;if(b.length>0){b.length>1?ut(f=>f.slice(0,-1)):ut([]);return}Ue(f=>{for(let j=f.length-1;j>=0;j--){const z=f[j];if(z.type==="trace"&&z.layer===$e&&z.points.length>=2)if(z.points.length>2){const R=z.points.slice(0,-1);return ut(R),[...f.slice(0,j),...f.slice(j+1)]}else return[...f.slice(0,j),...f.slice(j+1)]}return f});return}if(Ae&&Oe.length>0){ut([]);return}E==="draw"&&(me==="via"||me==="pad")&&Ue(y=>{for(let S=y.length-1;S>=0;S--){const b=y[S];if(b.layer===$e&&b.type===me)return[...y.slice(0,S),...y.slice(S+1)]}return y});return}if(!a.ctrlKey&&!a.altKey){const y=document.activeElement;if(!(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),Ro();return;case"b":case"B":a.preventDefault(),k("power");return;case"g":case"G":a.preventDefault(),k("ground");return;case"v":case"V":a.preventDefault(),qe("via"),k("draw");return;case"p":case"P":a.preventDefault(),qe("pad"),k("draw"),Et(Qn||"top");return;case"t":case"T":a.preventDefault(),qe("trace"),k("draw"),Et(lt||"top");return;case"c":case"C":a.preventDefault(),k("component"),Zl(!0),Bl(!1),So(null);return;case"e":case"E":a.preventDefault(),k("erase");return;case"h":case"H":a.preventDefault(),k("pan");return;case"z":case"Z":if(!a.ctrlKey){a.preventDefault(),Is(!1),k("magnify");return}break}}if(E==="transform"&&Yt){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const S=document.activeElement;if(S&&S.tagName==="INPUT"){const b=S;b.type==="radio"&&b.blur()}if(tl)return;if(pn==="nudge"){let b=0,f=0;switch(a.key){case"ArrowLeft":b=-1;break;case"ArrowRight":b=1;break;case"ArrowUp":f=-1;break;case"ArrowDown":f=1;break;default:return}Yt==="top"&&v?p(j=>j?{...j,x:j.x+b,y:j.y+f}:null):Yt==="bottom"&&d?B(j=>j?{...j,x:j.x+b,y:j.y+f}:null):Yt==="both"&&(v&&p(j=>j?{...j,x:j.x+b,y:j.y+f}:null),d&&B(j=>j?{...j,x:j.x+b,y:j.y+f}:null))}else if(pn==="scale"){let b=0;switch(a.key){case"ArrowUp":b=.01;break;case"ArrowDown":b=-.01;break;case"ArrowRight":b=.001;break;case"ArrowLeft":b=-.001;break;default:return}Yt==="top"&&v?p(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null):Yt==="bottom"&&d?B(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null):Yt==="both"&&(v&&p(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null),d&&B(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null))}else if(pn==="rotate"){let b=0;switch(a.key){case"ArrowUp":b=1;break;case"ArrowDown":b=-1;break;case"ArrowRight":b=.1;break;case"ArrowLeft":b=-.1;break;default:return}Yt==="top"&&v?p(f=>f?{...f,rotation:f.rotation+b}:null):Yt==="bottom"&&d?B(f=>f?{...f,rotation:f.rotation+b}:null):Yt==="both"&&(v&&p(f=>f?{...f,rotation:f.rotation+b}:null),d&&B(f=>f?{...f,rotation:f.rotation+b}:null))}else if(pn==="slant"){let b=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":b=-.5;break;case"ArrowRight":b=.5;break}if(b!==0||f!==0){const j=R=>R*Math.PI/180,z=R=>Math.max(-.7,Math.min(.7,R));Yt==="top"&&v?p(R=>R?{...R,skewX:z((R.skewX||0)+j(b)),skewY:z((R.skewY||0)+j(f))}:null):Yt==="bottom"&&d?B(R=>R?{...R,skewX:z((R.skewX||0)+j(b)),skewY:z((R.skewY||0)+j(f))}:null):Yt==="both"&&(v&&p(R=>R?{...R,skewX:z((R.skewX||0)+j(b)),skewY:z((R.skewY||0)+j(f))}:null),d&&B(R=>R?{...R,skewX:z((R.skewX||0)+j(b)),skewY:z((R.skewY||0)+j(f))}:null))}}else if(pn==="keystone"){let b=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":b=-.5;break;case"ArrowRight":b=.5;break}if(b!==0||f!==0){const j=R=>R*Math.PI/180,z=R=>Math.max(-.35,Math.min(.35,R));Yt==="top"&&v?p(R=>R?{...R,keystoneH:z((R.keystoneH||0)+j(b)),keystoneV:z((R.keystoneV||0)+j(f))}:null):Yt==="bottom"&&d?B(R=>R?{...R,keystoneH:z((R.keystoneH||0)+j(b)),keystoneV:z((R.keystoneV||0)+j(f))}:null):Yt==="both"&&(v&&p(R=>R?{...R,keystoneH:z((R.keystoneH||0)+j(b)),keystoneV:z((R.keystoneV||0)+j(f))}:null),d&&B(R=>R?{...R,keystoneH:z((R.keystoneH||0)+j(b)),keystoneV:z((R.keystoneV||0)+j(f))}:null))}}}else{const y=a.target;if(y.tagName==="INPUT"&&y.type==="range"){const S=y,b=Number(S.value),f=Number(S.min),j=Number(S.max),z=Number(S.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const R=Math.max(f,b-z);S.value=R.toString(),S.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const J=Math.min(j,b+z);S.value=J.toString(),S.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[E,Yt,pn,v,d,Nt,vt,mt,Vt,ye,zt,xt,St,Dt,Rt,me,Ya,lt,we,Ke,Ye,at,Ro,Un,Tn]);it.useEffect(()=>{E!=="transform"&&yi(null)},[E]),it.useEffect(()=>{window.addEventListener("keydown",$i,!0);const a=r=>{r.key==="Alt"&&Pr(!1)};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",$i,!0),window.removeEventListener("keyup",a,!0)}},[$i,mt,Vt,cn,Nn,St,Dt,da,Xa,Ro,vt,zt,xt,Un,Tn]);const Do=C.useCallback(()=>{tt("#AA4499"),ke("#F781BF"),Pt(6),_(6),oe("trace","#AA4499","top"),oe("trace","#F781BF","bottom"),Te("trace",6,"top"),Te("trace",6,"bottom"),Me("#0072B2"),m("#56B4E9"),X(18),Ve(18),oe("pad","#0072B2","top"),oe("pad","#56B4E9","bottom"),Te("pad",18,"top"),Te("pad",18,"bottom"),st("#6A3D9A"),gn("#9467BD"),El(18),xe(18),oe("component","#6A3D9A","top"),oe("component","#9467BD","bottom"),Te("component",18,"top"),Te("component",18,"bottom"),gl("top"),T("#AA4499"),W(6),En([{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}]),Ui([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),cr("pad",Sh,18),cr("power",vc,18),cr("ground",wd,18),Te("power",18),Te("ground",18),qi(!1),Fo(!1),ro(!1),nl(!1),Ta(!1),Sr(!1),Et("top"),k("select"),H(50),P(!1),ge("overlay"),Yu(1)},[oe,Te]),Cl=C.useCallback(()=>{Do(),setTimeout(()=>{We(1);const a=An.current,r=ka.current;let x=0,y=0;if(a&&r){const S=a.getBoundingClientRect(),b=r.getBoundingClientRect(),f=a.width-80,j=a.height-80,J=60+168+6,V=S.left-b.left,re=J-V,Z=S.width-Math.max(0,re),ae=re+Z/2,ee=S.height/2,G=f/2,pe=j/2,he=S.width/a.width,Re=S.height/a.height,De=ae/he,ze=ee/Re,Fe=De-40,He=ze-40;x=Fe-G,y=He-pe}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),kn({x,y}),qt(new Set),Bt(new Set),Wt(new Set),Xt(new Set)},100)},[Do]);it.useEffect(()=>{Cl()},[]),it.useEffect(()=>{if(!uo.visible)return;const a=[];Nt.size>0,Nt.size===0&&vt.size===0&&mt.size===0&&Vt.size===0&&a.push(`
No objects selected.`);const r=a.join(`
`);Lo(x=>({...x,text:r}))},[uo.visible,Nt,vt,mt,Vt,ye,zt,xt,St,Dt,Rt]),it.useEffect(()=>{const a=r=>{const x=An.current;if(x&&!(Va.current&&Va.current.contains(r.target))&&!(r.target instanceof Node&&x.contains(r.target))){if(Ya(),Ea){const y=sa.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&Ci(!1)}if(ra){const y=Va.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(Zl(!1),k("select"))}if(mo){const y=Nc.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(Bl(!1),Pa(null))}if(Qo){const y=Ps.current;!r.target?.closest('button[title="Color Picker"]')&&(!y||!(r.target instanceof Node)||!y.contains(r.target))&&Hs(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[Ya,Ea,zi,ra,mo,Qo]);const Ga=a=>{if(!a.current)return{top:0,left:0};const r=a.current.getBoundingClientRect(),x=ka.current?.getBoundingClientRect();return x?{top:r.top-x.top,left:r.left-x.left+r.width+4}:{top:0,left:0}},Ss=C.useCallback(()=>{sa.current&&Sn.current&&requestAnimationFrame(()=>{if(sa.current&&Sn.current){const a=Ga(Sn);sa.current.style.top=`${a.top}px`,sa.current.style.left=`${a.left}px`}})},[]),Ri=C.useCallback(()=>{Ll.current&&wo.current&&requestAnimationFrame(()=>{if(Ll.current&&wo.current){const a=Ga(wo);Ll.current.style.top=`${a.top}px`,Ll.current.style.left=`${a.left}px`}})},[]);it.useEffect(()=>{Ea&&Ss()},[Ea,Ss]),it.useEffect(()=>{zi&&Ri()},[zi,Ri]),it.useEffect(()=>{if(ra&&Va.current&&$a.current){const a=Ga($a);Va.current.style.top=`${a.top}px`,Va.current.style.left=`${a.left}px`}},[ra]),it.useEffect(()=>{if(ds&&ql.current&&Ia.current){const a=Ga(Ia);ql.current.style.top=`${a.top}px`,ql.current.style.left=`${a.left}px`}},[ds]),it.useEffect(()=>{if(cl&&vo.current&&gs.current){const a=Ga(gs);vo.current.style.top=`${a.top}px`,vo.current.style.left=`${a.left}px`}},[cl]),it.useEffect(()=>{const a=r=>{if(!Hn)return;const x=document.querySelector("[data-component-editor-dialog]");if(x&&r.target instanceof Node&&x.contains(r.target)){const He=r.target;if(He.tagName==="BUTTON"||He.tagName==="INPUT"||He.closest("button")||He.closest("input"))return}const y=An.current;if(!y)return;const S=y.getBoundingClientRect(),b=r.clientX,f=r.clientY;if(b<S.left||b>S.right||f<S.top||f>S.bottom)return;const j=y.width/S.width,z=y.height/S.height,R=b-S.left,J=f-S.top,V=R*j,re=J*z,Z=V-40,ae=re-40,ee=(Z-Le.x)/Ie,G=(ae-Le.y)/Ie;let pe=1/0,he=null,Re=null;const De=Math.max(6/Ie,4),Fe=[...zt,...xt].find(He=>He.id===Hn.componentId)?.layer||"top";for(const He of ye)if((He.type==="via"||He.type==="pad")&&He.points.length>0){if(He.type==="pad"&&(He.layer||"top")!==Fe)continue;const $=He.points[0],A=Math.max(1,He.size/2),ce=Math.hypot($.x-ee,$.y-G),ve=Math.max(A,De);ce<=ve&&ce<pe&&(pe=ce,he=$.id??null,Re=He)}if(he!=null&&Re){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${he}`),console.log(`  Connecting pin ${Hn.pinIndex+1} of component ${Hn.componentId}`);const He=String(he),$=Hn.pinIndex,A=Hn.componentId,ce=zt.find(Ne=>Ne.id===A),ve=xt.find(Ne=>Ne.id===A);if(ce){const Ne=ye;Un(Pe=>{const ct=Pe.find(Ge=>Ge.id===A);if(!ct)return Pe;const Xe=ct.pinConnections||[],ot=Xe.length>0?[...Xe]:new Array(ct.pinCount).fill("");let pt;if(ot.length!==ct.pinCount){pt=new Array(ct.pinCount).fill("");for(let Ge=0;Ge<Math.min(ot.length,ct.pinCount);Ge++)pt[Ge]=ot[Ge]||""}else pt=[...ot];pt[$]=He,console.log(`Updated pin ${$} with value: ${He}`),console.log("New pinConnections:",pt);const an=Pe.find(Ge=>Ge.id===A),rt=an?Wu(an,pt,Ne):null;return Pe.map(Ge=>{if(Ge.id===A){const wt={...Ge,pinConnections:pt};return rt&&(wt.pinPolarities=rt),wt}return Ge})})}else if(ve){const Ne=ye;Tn(Pe=>{const ct=Pe.find(Ge=>Ge.id===A);if(!ct)return Pe;const Xe=ct.pinConnections||[],ot=Xe.length>0?[...Xe]:new Array(ct.pinCount).fill("");let pt;if(ot.length!==ct.pinCount){pt=new Array(ct.pinCount).fill("");for(let Ge=0;Ge<Math.min(ot.length,ct.pinCount);Ge++)pt[Ge]=ot[Ge]||""}else pt=[...ot];pt[$]=He,console.log(`Updated pin ${$} with value: ${He}`),console.log("New pinConnections:",pt);const an=Pe.find(Ge=>Ge.id===A),rt=an?Wu(an,pt,Ne):null;return Pe.map(Ge=>{if(Ge.id===A){const wt={...Ge,pinConnections:pt};return rt&&(wt.pinPolarities=rt),wt}return Ge})})}setTimeout(()=>{Go(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Hn)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[Hn,zt,xt,ye,Ie,Le.x,Le.y]),it.useEffect(()=>{if(!br)return;const a=x=>{if(!oo)return;const y={x:x.clientX-oo.x,y:x.clientY-oo.y};mi(y),localStorage.setItem("componentDialogPosition",JSON.stringify(y))},r=()=>{vr(!1),Bs(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[br,oo]),it.useEffect(()=>{if(!jl)return;const a=x=>{if(!Vi)return;const y={x:x.clientX-Vi.x,y:x.clientY-Vi.y};ps(y),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(y))},r=()=>{_a(!1),hs(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[jl,Vi]),it.useEffect(()=>{if(!Xl)return;const a=x=>{if(!Gl)return;const y={x:x.clientX-Gl.x,y:x.clientY-Gl.y};di(y),localStorage.setItem("notesDialogPosition",JSON.stringify(y))},r=()=>{ui(!1),Er(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Xl,Gl]),it.useEffect(()=>{if(Oa&&Jn===null){const a=localStorage.getItem("notesDialogPosition");if(a)try{const r=JSON.parse(a);di(r)}catch{di({x:window.innerWidth-550,y:100})}else di({x:window.innerWidth-550,y:100})}},[Oa,Jn]),it.useEffect(()=>{if(ja&&ja.visible&&Us===null){const a=localStorage.getItem("componentDialogPosition");if(a)try{const r=JSON.parse(a);mi(r)}catch{mi({x:window.innerWidth/2,y:window.innerHeight/2})}else mi({x:window.innerWidth/2,y:window.innerHeight/2})}else!ja||ja.visible},[ja,Us]),it.useEffect(()=>{if(uo.visible&&ia===null){const a=localStorage.getItem("detailedInfoDialogPosition");if(a)try{const r=JSON.parse(a);ps(r)}catch{ps({x:window.innerWidth-450,y:80})}else ps({x:window.innerWidth-450,y:80})}else uo.visible},[uo.visible,ia]);const ua=C.useCallback(a=>{switch(a){case"transparency":H(50);break;case"brushSize":W(3);break}},[]);it.useEffect(()=>{if(je){$s.current=performance.now(),H(0);const a=r=>{const x=$s.current||r,y=1e3,S=(r-x)%y/y,b=1-Math.abs(1-2*S);H(Math.round(b*100)),xo.current=requestAnimationFrame(a)};xo.current=requestAnimationFrame(a)}return()=>{xo.current&&(cancelAnimationFrame(xo.current),xo.current=null)}},[je]),it.useEffect(()=>{const a=E==="erase"?"erase":E==="magnify"?"magnify":E==="ground"?"ground":E==="power"?"power":E==="component"?"component":E==="draw"?me==="via"?"via":me==="pad"?"pad":"trace":"default";if(a==="default"){hr(void 0);return}const r=Math.max(1,Ie),x=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(g*r)),S=x+4*2+(a==="magnify"?8:0),b=document.createElement("canvas");b.width=S,b.height=S;const f=b.getContext("2d");if(!f){hr(void 0);return}const j=S/2,z=S/2,R=x/2;if(f.clearRect(0,0,S,S),a==="via"){const V=R,re=R*.5,Z=R*.7,ee=Qt.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";f.fillStyle=ee,f.beginPath(),f.arc(j,z,V,0,Math.PI*2),f.arc(j,z,re,0,Math.PI*2),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(j-Z,z),f.lineTo(j+Z,z),f.stroke(),f.beginPath(),f.moveTo(j,z-Z),f.lineTo(j,z+Z),f.stroke()}else if(a==="pad"){const re=Qt.get("pad")?.settings.color||ne||M,Z=R*2,ae=Z*.5,ee=R*.7;f.fillStyle=re,f.beginPath(),f.rect(j-R,z-R,Z,Z),f.rect(j-ae/2,z-ae/2,ae,ae),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(j-ee,z),f.lineTo(j+ee,z),f.stroke(),f.beginPath(),f.moveTo(j,z-ee),f.lineTo(j,z+ee),f.stroke()}else if(a==="trace"){const re=Qt.get("trace")?.settings.color||(lt==="top"?we:Ke)||M;f.fillStyle=re,f.beginPath(),f.arc(j,z,R,0,Math.PI*2),f.fill()}else if(a==="erase"){const V=Math.max(g*.75,8),re=Math.max(g*.5,6),Z=Math.max(g*.2,2);f.save(),f.translate(j,z),f.rotate(-35*Math.PI/180),f.fillStyle="#f5a3b3",f.strokeStyle="#111",f.lineWidth=1.5;const ae=1.5,ee=-V/2,G=-re/2;f.beginPath(),f.moveTo(ee+ae,G),f.lineTo(ee+V-ae,G),f.quadraticCurveTo(ee+V,G,ee+V,G+ae),f.lineTo(ee+V,G+re-ae),f.quadraticCurveTo(ee+V,G+re,ee+V-ae,G+re),f.lineTo(ee+ae,G+re),f.quadraticCurveTo(ee,G+re,ee,G+re-ae),f.lineTo(ee,G+ae),f.quadraticCurveTo(ee,G,ee+ae,G),f.closePath(),f.fill(),f.stroke(),f.fillStyle="#f18ea4",f.beginPath(),f.rect(-V/2,re/2-Z,V,Z),f.fill(),f.restore()}else if(a==="magnify"){const V=R;f.strokeStyle="#111",f.lineWidth=2,f.beginPath(),f.arc(j-2,z-2,V,0,Math.PI*2),f.stroke();const re=j+V*.6,Z=z+V*.6,ae=re+6,ee=Z+6;f.beginPath(),f.moveTo(re,Z),f.lineTo(ae,ee),f.stroke(),f.beginPath(),f.moveTo(j-6,z-2),f.lineTo(j+2,z-2),f.stroke(),ns||(f.beginPath(),f.moveTo(j-2,z-6),f.lineTo(j-2,z+2),f.stroke())}else if(a==="ground")if(f.strokeStyle="#000000",f.lineWidth=2,f.lineCap="round",wl==="groundbus-earth"){const re=R*1.5,Z=re*.9,ae=re*.24,ee=re*1.6;f.beginPath(),f.moveTo(j,z-Z/2),f.lineTo(j,z+Z/2),f.stroke();for(let G=0;G<3;G++){const pe=z+Z/2+G*ae,he=ee*(1-G*.25);f.beginPath(),f.moveTo(j-he/2,pe),f.lineTo(j+he/2,pe),f.stroke()}}else{const re=R*.8;f.beginPath(),f.arc(j,z,R,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(j,z-R-re),f.lineTo(j,z+R+re),f.stroke(),f.beginPath(),f.moveTo(j-R-re,z),f.lineTo(j+R+re,z),f.stroke()}else if(a==="power"){f.strokeStyle="#ff0000",f.lineWidth=2,f.lineCap="round";const V=R*.8;f.beginPath(),f.arc(j,z,R,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(j,z-R-V),f.lineTo(j,z+R+V),f.stroke(),f.beginPath(),f.moveTo(j-R-V,z),f.lineTo(j+R+V,z),f.stroke()}else if(a==="component"){const V=xl||"top",re=Qt.get("component"),Z=(V==="top"?Je:ht)||re?.settings.color||M,ae=x,ee=ae/2;f.strokeStyle=Z,f.lineWidth=2,f.fillStyle="rgba(255,255,255,0.9)",f.beginPath(),f.rect(j-ee,z-ee,ae,ae),f.fill(),f.stroke();const G=on?md(on):"?";f.fillStyle=Z,f.font=`bold ${Math.max(8,ae*.35)}px sans-serif`,f.textAlign="center",f.textBaseline="middle",f.fillText(G,j,z)}const J=`url(${b.toDataURL()}) ${Math.round(j)} ${Math.round(z)}, crosshair`;hr(J)},[E,me,M,g,Ie,ns,on,us,wl,Rt,Qt,lt,we,Ke,xl,Je,ht]),it.useEffect(()=>{fi()},[fi]),it.useEffect(()=>{fi()},[Bn.width,Bn.height]),it.useEffect(()=>{Nt.size===0&&E==="draw"&&me==="trace"&&g>=1&&($e==="top"?Pt(g):_(g))},[g,E,me,$e,Nt]),it.useEffect(()=>{Ue(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Gt(x,Rt);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Tt(x,Rt);if(r.padType!==y)return{...r,padType:y}}return r}))},[St,Dt,Rt,Gt,Tt]);const ws=C.useCallback(()=>{const a=An.current;if(!a)return;const r=a.toDataURL("image/png"),x=window.open("","_blank");if(!x){alert("Please allow popups to print the canvas.");return}x.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${r}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),x.document.close()},[]);it.useEffect(()=>{const a=x=>{x.key==="Shift"&&Is(!0)},r=x=>{x.key==="Shift"&&Is(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}},[]);const Ls=C.useCallback(a=>{if(a.size===0)return;const r=Array.from(a).map(x=>String(x));Ue(x=>x.map(y=>{if(y.type==="trace"){const S=y.points.filter(b=>b.id===void 0?!0:!a.has(b.id));return S.length<2?null:{...y,points:S}}return y}).filter(y=>y!==null)),Un(x=>x.map(y=>{const S=y.pinConnections||[];if(S.some(f=>f&&r.includes(f))){const f=S.map(j=>j&&r.includes(j)?"":j);return{...y,pinConnections:f}}return y})),Tn(x=>x.map(y=>{const S=y.pinConnections||[];if(S.some(f=>f&&r.includes(f))){const f=S.map(j=>j&&r.includes(j)?"":j);return{...y,pinConnections:f}}return y}))},[Ue,Un,Tn]),qs=C.useRef(new Set);it.useEffect(()=>{const a=new Set;for(const x of ye)if((x.type==="via"||x.type==="pad")&&x.points.length>0){const y=x.points[0].id;y!==void 0&&a.add(y)}const r=new Set;for(const x of qs.current)a.has(x)||r.add(x);r.size>0&&Ls(r),qs.current=a},[ye,Ls]),it.useEffect(()=>{Ue(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Gt(x,Rt);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Tt(x,Rt);if(r.padType!==y)return{...r,padType:y}}return r}))},[St,Dt,Rt,Gt,Tt]),it.useEffect(()=>{const a=r=>{os.current&&(os.current.contains(r.target)||Ca(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),it.useEffect(()=>{const a=(r,x)=>{const y=r.current;if(!y)return;const S=y.getContext("2d");if(!S)return;const b=y.width,f=y.height;if(S.clearRect(0,0,b,f),S.fillStyle="#fff",S.fillRect(0,0,b,f),x?.bitmap){const j=x.bitmap,z=Math.min(b/j.width,f/j.height),R=Math.max(1,Math.floor(j.width*z)),J=Math.max(1,Math.floor(j.height*z)),V=Math.floor((b-R)/2),re=Math.floor((f-J)/2);S.drawImage(j,V,re,R,J)}S.strokeStyle="#ddd",S.lineWidth=1,S.strokeRect(.5,.5,b-1,f-1)};a(zc,v),a(Na,d)},[v,d]),it.useEffect(()=>{const a=[],r=[],x=[],y=[];for(const S of ye)if(S.type==="via"&&S.points.length>=1){const b=S.points[0],f={id:S.id,pointId:b.id,x:b.x,y:b.y,size:S.size,color:S.color};a.push(f)}else if(S.type==="pad"&&S.points.length>=1){const b=S.points[0],f={id:S.id,pointId:b.id,x:b.x,y:b.y,size:S.size,color:S.color,layer:S.layer||"top"};r.push(f)}else if(S.type==="trace"&&S.points.length>=2)for(let b=0;b<S.points.length-1;b++){const f=S.points[b],j=S.points[b+1],z={id:S.id,startPointId:f.id,endPointId:j.id,x1:f.x,y1:f.y,x2:j.x,y2:j.y,size:S.size,color:S.color};S.layer==="top"?x.push(z):y.push(z)}io(a),ao(r),Sc(x),wa(y)},[ye]);const fa=C.useRef(ye);fa.current=ye;const _l=C.useCallback(()=>{const r=new Date().toISOString(),x=px();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:r,view:{currentView:L,viewScale:Ie,viewPan:Le,showBothLayers:Rs,selectedDrawingLayer:$e},images:{top:v?{name:v.name,width:v.width,height:v.height,dataUrl:v.dataUrl??v.url,x:v.x,y:v.y,scale:v.scale,rotation:v.rotation,flipX:v.flipX,flipY:v.flipY,skewX:v.skewX,skewY:v.skewY,keystoneV:v.keystoneV,keystoneH:v.keystoneH}:null,bottom:d?{name:d.name,width:d.width,height:d.height,dataUrl:d.dataUrl??d.url,x:d.x,y:d.y,scale:d.scale,rotation:d.rotation,flipX:d.flipX,flipY:d.flipY,skewX:d.skewX,skewY:d.skewY,keystoneV:d.keystoneV,keystoneH:d.keystoneH}:null},drawing:{drawingStrokes:fa.current.filter(S=>!(S.type==="trace"&&S.points.length<2)),vias:Sa,tracesTop:On,tracesBottom:xr,componentsTop:zt,componentsBottom:xt,grounds:Dt,powers:St},powerBuses:Rt,groundBuses:yl,pointIdCounter:gh(),traceColors:{top:we,bottom:Ke},traceSizes:{top:Ye,bottom:at},padColors:{top:ne,bottom:ie},padSizes:{top:D,bottom:ue},componentColors:{top:Je,bottom:ht},componentSizes:{top:Ot,bottom:te},traceToolLayer:lt,toolSettings:{trace:Qt.get("trace")?.settings||{color:"#ff0000",size:6},via:Qt.get("via")?.settings||{color:"#ff0000",size:18},pad:Qt.get("pad")?.settings||{color:"#ff0000",size:18},component:Qt.get("component")?.settings||{color:"#ff0000",size:18},ground:Qt.get("ground")?.settings||{color:"#000000",size:18},power:Qt.get("power")?.settings||{color:"#ff0000",size:18},erase:Qt.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:tl,areViasLocked:mn,arePadsLocked:vl,areTracesLocked:Vn,areComponentsLocked:sl,areGroundNodesLocked:Nn,arePowerNodesLocked:cn},visibility:{showViasLayer:$n,showTopPadsLayer:si,showBottomPadsLayer:Ti,showTopTracesLayer:Al,showBottomTracesLayer:Nl,showTopComponents:ri,showBottomComponents:Pl,showPowerLayer:ci,showGroundLayer:Wl,showConnectionsLayer:la},autoSave:{enabled:Il,interval:za,baseName:Ji},projectInfo:{name:Cn}},timestamp:x}},[L,Ie,Le,Rs,$e,v,d,ye,Sa,On,xr,zt,xt,Dt,Qt,tl,mn,vl,Vn,sl,Nn,cn,Rt,yl,gh,we,Ke,Ye,at,ne,ie,D,ue,Je,ht,Ot,te,lt,Il,za,Ji,Cn,$n,si,Ti,Al,Nl,ri,Pl,ci,Wl,la]),Gr=C.useRef(_l);Gr.current=_l;const Fa=C.useRef(Ki);Fa.current=Ki;const Ql=C.useRef(Ji);Ql.current=Ji;const js=C.useRef(kl);js.current=kl;const Zs=C.useRef(Vs);Zs.current=Vs;const ll=C.useRef([]);ll.current=Tc;const pa=C.useRef(-1);pa.current=zr;const dl=C.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=Fa.current,r=Ql.current;console.log(`Auto save: dirHandle=${a?"set":"missing"}, baseName=${r||"missing"}`);const x=Zs.current;if(console.log(`Auto save: currentFilePath=${x||"none"}`),!a||!r){console.warn(`Auto save: Missing directory handle (${!a}) or base name (${!r}). Please use File -> Auto Save -> Enable to set up auto save.`),ii(!1),dn.current&&(clearInterval(dn.current),dn.current=null);return}if(!rl.current){console.log("Auto save: Skipping - no changes since last save");return}const y=fa.current,S=y.filter(V=>V.type==="trace"&&V.points.length<2);if(S.length>0){console.log(`Auto save: Cleaning up ${S.length} single-point trace(s) before save`),S.forEach(re=>console.log(`  - Removing single-point trace ${re.id}`));const V=y.filter(re=>!(re.type==="trace"&&re.points.length<2));Ue(V),fa.current=V}console.log("Auto save: Starting save...");const{project:b,timestamp:f}=Gr.current(),z=`${bc(r)}_${f}.json`,R=JSON.stringify(b,null,2),J=new Blob([R],{type:"application/json"});try{let V;try{V=await a.getDirectoryHandle("history",{create:!0})}catch(G){console.error("Failed to get/create history directory:",G);return}try{const G=[],pe=Zs.current;for await(const he of a.keys())try{if(he==="history"||he===z)continue;const De=await(await a.getFileHandle(he)).getFile();if(!he.endsWith(".json"))continue;const ze=await De.text();try{const Fe=JSON.parse(ze);if(Fe.version&&(Fe.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!Fe.fileType)){G.push(he);const He=Fe.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${he} (${He}${he===pe?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const he of G)try{const ze=await(await(await a.getFileHandle(he)).getFile()).text(),He=await(await V.getFileHandle(he,{create:!0})).createWritable();await He.write(new Blob([ze],{type:"application/json"})),await He.close(),await a.removeEntry(he),console.log(`Auto save: Moved ${he} from root to history/`)}catch(Re){console.warn(`Auto save: Failed to move ${he} to history:`,Re)}}catch(G){console.warn("Auto save: Error checking for old files in root:",G)}const Z=await(await a.getFileHandle(z,{create:!0})).createWritable();await Z.write(J),await Z.close(),console.log(`Auto save: Successfully saved ${z} to root directory`),js.current(z);const ae=ll.current,ee=[z,...ae.filter(G=>G!==z)].sort((G,pe)=>pe.localeCompare(G));po(ee),ll.current=ee,Rr(0),pa.current=0,rl.current=!1}catch(V){console.error("Auto save failed:",V)}},[]);Ur.current=dl;const zl=C.useCallback(async()=>{const{project:a}=_l(),r=JSON.stringify(a,null,2),x=new Blob([r],{type:"application/json"});if(wi&&Cn)try{let R=null;try{R=await wi.getDirectoryHandle("history",{create:!0})}catch(G){console.error("Failed to get/create history directory:",G),R=null}const J=Cn.replace(/\.json$/i,""),V=bc(J),{timestamp:re}=_l(),Z=`${V}_${re}.json`;if(R)try{const G=[];for await(const pe of wi.keys())try{if(pe==="history"||pe===Z)continue;const Re=await(await wi.getFileHandle(pe)).getFile();if(!pe.endsWith(".json"))continue;const De=await Re.text();try{JSON.parse(De).version&&(G.push(pe),console.log(`Save: Found PCB project file in root: ${pe}`))}catch{continue}}catch{continue}for(const pe of G)try{const De=await(await(await wi.getFileHandle(pe)).getFile()).text(),Fe=await(await R.getFileHandle(pe,{create:!0})).createWritable();await Fe.write(new Blob([De],{type:"application/json"})),await Fe.close(),await wi.removeEntry(pe),console.log(`Save: Moved ${pe} from root to history/`)}catch(he){console.warn(`Save: Failed to move ${pe} to history:`,he)}}catch(G){console.warn("Save: Error checking for old files in root:",G)}const ee=await(await wi.getFileHandle(Z,{create:!0})).createWritable();await ee.write(x),await ee.close(),kl(Z),console.log(`Project saved: ${Cn}/${Z}`);return}catch(R){console.error("Failed to save to project directory:",R),ji(null)}if(Cn&&!wi){const R=window;if(typeof R.showDirectoryPicker=="function")try{const J=await R.showDirectoryPicker();ji(J);const V=`${Cn}.json`,Z=await(await J.getFileHandle(V,{create:!0})).createWritable();await Z.write(x),await Z.close(),kl(V),console.log(`Project saved: ${V} in selected directory`);return}catch(J){J?.name!=="AbortError"&&console.error("Failed to get directory:",J)}}const y=R=>String(R).padStart(2,"0"),S=new Date,f=`pcb_project_${`${S.getFullYear()}_${y(S.getMonth()+1)}_${y(S.getDate())}_${y(S.getHours())}_${y(S.getMinutes())}_${y(S.getSeconds())}`}.json`,j=window;if(typeof j.showSaveFilePicker=="function")try{const R=await j.showSaveFilePicker({suggestedName:f,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),J=await R.createWritable();await J.write(x),await J.close();const V=R.name;try{const ae=await R.getFile();kl(ae.name)}catch{kl(V)}const Z=V.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");Z&&(ai(Z),localStorage.setItem("pcb_project_name",Z));try{const ae=R.name.replace(/\.json$/i,""),G=bc(ae).replace(/[^a-zA-Z0-9_-]/g,"_");Ra(G),Ki||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(ae){console.warn("Could not set up auto save for new file:",ae)}return}catch(R){if(R?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",R)}const z=document.createElement("a");z.href=URL.createObjectURL(x),z.download=f,document.body.appendChild(z),z.click(),setTimeout(()=>{URL.revokeObjectURL(z.href),document.body.removeChild(z)},0)},[_l]),ha=C.useCallback(async()=>{const a=[...zt,...xt],{schematic:r,nodesCsv:x}=fx(a,ye,St,Dt,Rt),y=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),S=Cn||"pcb_project",b=new Blob([x],{type:"text/csv"}),f=`${y}_nodes.csv`,j=window;if(typeof j.showSaveFilePicker=="function")try{const V=await j.showSaveFilePicker({suggestedName:f,types:[{description:"CSV Files",accept:{"text/csv":[".csv"]}}]}),re=await V.createWritable();await re.write(b),await re.close(),console.log(`Nodes CSV exported: ${V.name}`)}catch(V){if(V?.name==="AbortError")return;console.warn("showSaveFilePicker failed for CSV, falling back to download",V);const re=document.createElement("a");re.href=URL.createObjectURL(b),re.download=f,document.body.appendChild(re),re.click(),setTimeout(()=>{URL.revokeObjectURL(re.href),document.body.removeChild(re)},0)}else{const V=document.createElement("a");V.href=URL.createObjectURL(b),V.download=f,document.body.appendChild(V),V.click(),setTimeout(()=>{URL.revokeObjectURL(V.href),document.body.removeChild(V)},0)}const z=new Blob([r],{type:"text/plain"}),R=`${S}.kicad_sch`;if(typeof j.showSaveFilePicker=="function")try{const V=await j.showSaveFilePicker({suggestedName:R,types:[{description:"KiCad Schematic",accept:{"text/plain":["kicad_sch"]}}]}),re=await V.createWritable();await re.write(z),await re.close(),console.log(`Simple schematic exported: ${V.name}`);return}catch(V){if(V?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",V)}const J=document.createElement("a");J.href=URL.createObjectURL(z),J.download=R,document.body.appendChild(J),J.click(),setTimeout(()=>{URL.revokeObjectURL(J.href),document.body.removeChild(J)},0)},[zt,xt,ye,St,Dt,Rt,Cn]);it.useEffect(()=>{dn.current&&(clearInterval(dn.current),dn.current=null);const a=Dr.current;if(Dr.current=Il,Il&&za){const r=za*60*1e3;Ki&&Ji?(console.log(`Auto save: Setting up interval for ${za} minute(s) (${r}ms)`),a||(rl.current=!0,setTimeout(()=>{dl()},100)),dn.current&&(clearInterval(dn.current),dn.current=null),dn.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${rl.current}`),console.log(`  - dirHandle: ${Fa.current?"set":"missing"}`),console.log(`  - baseName: ${Ql.current||"missing"}`),dl()},r),console.log(`Auto save: Interval set up for ${r}ms (${za} minutes)`),console.log(`  - Directory handle: ${Ki?"set":"missing"}`),console.log(`  - Base name: ${Ji||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!Ki}) or base name (${!Ji}). Disabling auto save.`),ii(!1),dn.current&&(clearInterval(dn.current),dn.current=null))}else Il||(Dr.current=!1);return()=>{dn.current&&(clearInterval(dn.current),dn.current=null)}},[Il,za,Ki,Ji]);const La=C.useRef(!1);it.useEffect(()=>{if(!Il){La.current=!1;return}if(La.current){La.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}rl.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!v,bottomImage:!!d,drawingStrokesCount:ye.length,componentsTopCount:zt.length,componentsBottomCount:xt.length,powersCount:St.length,groundsCount:Dt.length,powerBusesCount:Rt.length,areImagesLocked:tl,areViasLocked:mn,areTracesLocked:Vn,areComponentsLocked:sl,areGroundNodesLocked:Nn,arePowerNodesLocked:cn})},[v,d,ye,zt,xt,St,Dt,Rt,we,Ke,Ye,at,tl,mn,Vn,sl,Nn,cn,Il]),it.useEffect(()=>{Il?(La.current=!0,console.log("Auto save: Enabled, marking first run")):La.current=!1},[Il]),it.useEffect(()=>{Il||(rl.current=!1)},[Il]);const _c=C.useCallback(()=>!!(v||d||ye.length>0||zt.length>0||xt.length>0||St.length>0||Dt.length>0),[v,d,ye,zt,xt,St,Dt]);it.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&ai(a)},[]);const Kl=C.useCallback(()=>{qo({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Ol=C.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();qo(x=>({...x,locationHandle:r,locationPath:r.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",r.name||"")}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),zn=C.useCallback(async()=>{const a=xn.projectName.trim();if(!a){alert("Please enter a project name.");return}const r=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!xn.locationHandle){alert("Please select a location for the project.");return}const x=xn.locationHandle;let y;try{y=await x.getDirectoryHandle(r,{create:!0})}catch(S){console.error("Failed to create project folder:",S),alert(`Failed to create project folder "${r}". See console for details.`);return}qo({visible:!1,projectName:"",locationPath:"",locationHandle:null}),ai(r),ji(y),localStorage.setItem("pcb_project_name",r),localStorage.setItem("pcb_project_location_path",x.name||""),p(null),B(null),Ue([]),Un([]),Tn([]),Kn([]),Dl([]),qt(new Set),Bt(new Set),Wt(new Set),Xt(new Set),ge("overlay"),We(1),kn({x:0,y:0}),rl.current=!1,kl(""),ii(!1),Qi(null),Es(null),Ra(""),dn.current&&(clearInterval(dn.current),dn.current=null),Do();try{const{project:S,timestamp:b}=_l(),j=`${bc(r)}_${b}.json`,z=JSON.stringify(S,null,2),R=new Blob([z],{type:"application/json"}),V=await(await y.getFileHandle(j,{create:!0})).createWritable();await V.write(R),await V.close(),kl(j),console.log(`New project created: ${r}/${j}`),$l({visible:!0,source:"new",interval:5})}catch(S){console.error("Failed to save new project:",S),alert("Failed to save new project file. See console for details.")}},[Do,_l,xn]),ko=C.useCallback(()=>{qo({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Ii=C.useCallback(()=>{const a=Cn?`${Cn}.json`:"";Zo({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(as.current?.focus(),as.current&&a){const r=a.replace(/\.json$/i,"");as.current.setSelectionRange(0,r.length)}},100)},[Cn]),kt=C.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Zo(x=>({...x,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),tn=C.useCallback(async()=>{const a=yn.filename.trim();if(!a){alert("Please enter a file name.");return}const x=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!yn.locationHandle){alert("Please select a location for the file.");return}const y=yn.locationHandle;try{const{project:S}=_l(),b=JSON.stringify(S,null,2),f=new Blob([b],{type:"application/json"}),z=await(await y.getFileHandle(x,{create:!0})).createWritable();await z.write(f),await z.close(),kl(x);const R=x.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");R&&(ai(R),localStorage.setItem("pcb_project_name",R)),ji(y),Zo({visible:!1,filename:"",locationPath:"",locationHandle:null}),Ca(null),console.log(`Project saved as: ${x} in selected directory`)}catch(S){console.error("Failed to save project:",S),alert(`Failed to save project file "${x}". See console for details.`)}},[yn,_l]),Rn=C.useCallback(()=>{Zo({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),Ao=C.useCallback(async()=>{fo({visible:!1}),await zl(),Kl(),Cl()},[zl,Kl,Cl]),No=C.useCallback(()=>{fo({visible:!1}),Kl(),Cl()},[Kl,Cl]),ga=C.useCallback(()=>{fo({visible:!1})},[]);it.useEffect(()=>{if(Cr.visible){setTimeout(()=>{_r.current?.focus()},0);const a=r=>{r.key==="Enter"?(r.preventDefault(),Ao()):r.key==="Escape"&&(r.preventDefault(),fo({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[Cr.visible,Ao]);const xa=C.useCallback(async a=>{try{if(a.projectInfo)a.projectInfo.name&&(ai(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const b=localStorage.getItem("pcb_project_name");b&&ai(b)}if(a.view&&(a.view.currentView&&ge(a.view.currentView),a.view.viewScale!=null&&We(a.view.viewScale),a.view.viewPan&&kn(a.view.viewPan),a.view.showBothLayers!=null&&Ds(a.view.showBothLayers),a.view.selectedDrawingLayer&&Et(a.view.selectedDrawingLayer)),a.traceColors&&(a.traceColors.top&&(tt(a.traceColors.top),oe("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(ke(a.traceColors.bottom),oe("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const b=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let f=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;f<6&&(f=6),Pt(b),_(f),Te("trace",b,"top"),Te("trace",f,"bottom"),Xi("trace","top",a.traceColors?.top||we,b),Xi("trace","bottom",a.traceColors?.bottom||Ke,f)}else Pt(6),_(6),Xi("trace","top",we,6),Xi("trace","bottom",Ke,6);if(a.padColors&&(a.padColors.top&&(Me(a.padColors.top),oe("pad",a.padColors.top,"top")),a.padColors.bottom&&(m(a.padColors.bottom),oe("pad",a.padColors.bottom,"bottom"))),a.padSizes){const b=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:18,f=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:18;X(b),Ve(f),Te("pad",b,"top"),Te("pad",f,"bottom")}if(a.componentColors&&(a.componentColors.top&&(st(a.componentColors.top),oe("component",a.componentColors.top,"top")),a.componentColors.bottom&&(gn(a.componentColors.bottom),oe("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const b=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,f=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;El(b),xe(f),Te("component",b,"top"),Te("component",f,"bottom")}if(a.traceToolLayer&&(gl(a.traceToolLayer),E==="draw"&&me==="trace")){const b=a.traceToolLayer;T(b==="top"?a.traceColors?.top||we:a.traceColors?.bottom||Ke);const f=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let j=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;j<6&&(j=6),W(b==="top"?f:j)}a.toolSettings&&al(b=>{const f=new Map(b);if(a.toolSettings.trace){const z=f.get("trace");if(z){const R={...z,settings:a.toolSettings.trace},J=new Map(z.layerSettings);a.traceSizes&&a.traceColors&&(J.set("top",{color:a.traceColors.top||z.layerSettings.get("top")?.color||"#AA4499",size:a.traceSizes.top||z.layerSettings.get("top")?.size||6}),J.set("bottom",{color:a.traceColors.bottom||z.layerSettings.get("bottom")?.color||"#F781BF",size:a.traceSizes.bottom||z.layerSettings.get("bottom")?.size||6})),f.set("trace",{...R,layerSettings:J})}}if(a.toolSettings.via){const z=f.get("via");z&&f.set("via",{...z,settings:a.toolSettings.via})}if(a.toolSettings.pad){const z=f.get("pad");z&&f.set("pad",{...z,settings:a.toolSettings.pad})}if(a.toolSettings.component){const z=f.get("component");z&&f.set("component",{...z,settings:a.toolSettings.component})}if(a.toolSettings.ground){const z=f.get("ground");z&&f.set("ground",{...z,settings:a.toolSettings.ground})}if(a.toolSettings.power){const z=f.get("power");z&&f.set("power",{...z,settings:a.toolSettings.power})}if(a.toolSettings.erase){const z=f.get("erase");z&&f.set("erase",{...z,settings:a.toolSettings.erase})}const j=E==="draw"&&me==="trace"?f.get("trace"):E==="draw"&&me==="via"?f.get("via"):E==="draw"&&me==="pad"?f.get("pad"):E==="component"?f.get("component"):E==="power"?f.get("power"):E==="ground"?f.get("ground"):null;return j&&(T(j.settings.color),W(j.settings.size)),f});const r=async b=>{if(!b)return null;let f=null;if(b.dataUrl){const j=await(await fetch(b.dataUrl)).blob();f=await createImageBitmap(j)}return{url:b.dataUrl??"",name:b.name??"image",width:b.width??(f?f.width:0),height:b.height??(f?f.height:0),dataUrl:b.dataUrl,x:b.x??0,y:b.y??0,scale:b.scale??1,rotation:b.rotation??0,flipX:!!b.flipX,flipY:!!b.flipY,skewX:b.skewX??0,skewY:b.skewY??0,keystoneV:b.keystoneV??0,keystoneH:b.keystoneH??0,bitmap:f}},x=await r(a.images?.top),y=await r(a.images?.bottom);if(p(x),B(y),a.pointIdCounter&&typeof a.pointIdCounter=="number")Yu(a.pointIdCounter);else{let b=0;if(a.drawing?.drawingStrokes){for(const j of a.drawing.drawingStrokes)if(j.points)for(const z of j.points)z.id&&typeof z.id=="number"&&z.id>b&&(b=z.id)}const f=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]];for(const j of f)if(j.pinConnections){for(const z of j.pinConnections)if(z){const R=parseInt(z.trim(),10);!isNaN(R)&&R>b&&(b=R)}}if(a.drawing?.powers)for(const j of a.drawing.powers)j.pointId&&typeof j.pointId=="number"&&j.pointId>b&&(b=j.pointId);if(a.drawing?.grounds)for(const j of a.drawing.grounds)j.pointId&&typeof j.pointId=="number"&&j.pointId>b&&(b=j.pointId);Yu(b+1)}if(a.locks&&(typeof a.locks.areImagesLocked=="boolean"?qi(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&qi(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&Fo(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&mr(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&ro(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&nl(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?Ta(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&Ta(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&Sr(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&rs(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&Or(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&Hr(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&Hi(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&Ys(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&cs(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&ml(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&Sl(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Ei(a.visibility.showGroundLayer),typeof a.visibility.showConnectionsLayer=="boolean"&&Gs(a.visibility.showConnectionsLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&ii(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&Qi(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(Ra(a.autoSave.baseName),Ql.current=a.autoSave.baseName,a.autoSave.enabled&&!Ki&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),ii(!1),Qi(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),ii(!1),Qi(null),Ra(""),Ql.current="")):(ii(!1),Qi(null),Es(null),Ra(""),Fa.current=null,Ql.current="",dn.current&&(clearInterval(dn.current),dn.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const b=a.drawing.drawingStrokes.map(f=>({...f,points:f.points.map(j=>({...j,...ln(j)}))})).filter(f=>!(f.type==="trace"&&f.points.length<2));Ue(b)}else{const b=[],f=(R,J)=>{const V=ln({x:R.x,y:R.y});b.push({id:R.id||`${Date.now()}-via-${Math.random()}`,points:[{id:R.pointId||xi(),x:V.x,y:V.y}],color:R.color,size:R.size,layer:J,type:"via"})},j=(R,J)=>{const V=ln({x:R.x1,y:R.y1}),re=ln({x:R.x2,y:R.y2});b.push({id:R.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:R.startPointId||xi(),x:V.x,y:V.y},{id:R.endPointId||xi(),x:re.x,y:re.y}],color:R.color,size:R.size,layer:J,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(R=>f(R,"top")):((a.drawing?.viasTop??[]).forEach(R=>f(R,"top")),(a.drawing?.viasBottom??[]).forEach(R=>f(R,"bottom"))),(a.drawing?.tracesTop??[]).forEach(R=>j(R,"top")),(a.drawing?.tracesBottom??[]).forEach(R=>j(R,"bottom"));const z=b.filter(R=>!(R.type==="trace"&&R.points.length<2));Ue(z)}if(a.drawing?.componentsTop){const b=a.drawing.componentsTop.map(f=>{const j=ln({x:f.x,y:f.y});return{...f,x:j.x,y:j.y,layer:f.layer||"top",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});Un(b)}if(a.drawing?.componentsBottom){const b=a.drawing.componentsBottom.map(f=>{const j=ln({x:f.x,y:f.y});return{...f,x:j.x,y:j.y,layer:f.layer||"bottom",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});Tn(b)}if(a.drawing?.grounds){const f=a.drawing.grounds.map(j=>{const z=j.pointId||xi(),R=ln({x:j.x,y:j.y});return{...j,pointId:z,x:R.x,y:R.y}}).filter(j=>{const z=j.y>=0&&j.x>=0&&typeof j.x=="number"&&typeof j.y=="number"&&!isNaN(j.x)&&!isNaN(j.y)&&isFinite(j.x)&&isFinite(j.y);return z||console.warn(`Filtered out invalid ground symbol at (${j.x}, ${j.y}) - likely in border area or invalid coordinates`),z});Dl(f)}let S;if(a.powerBuses&&Array.isArray(a.powerBuses)&&a.powerBuses.length>0?(S=a.powerBuses,En(S)):(S=[{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}],En(S)),a.groundBuses&&Array.isArray(a.groundBuses)&&a.groundBuses.length>0){const b=a.groundBuses.map(f=>{const{value:j,...z}=f;return z});Ui(b)}else Ui([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]);if(a.drawing?.powers){const f=a.drawing.powers.map(j=>{const z=j.pointId||xi(),R=ln({x:j.x,y:j.y});return j.powerBusId?{...j,pointId:z,x:R.x,y:R.y,layer:j.layer||"top"}:{...j,pointId:z,x:R.x,y:R.y,powerBusId:S.length>0?S[0].id:"default-5v",layer:j.layer||"top"}}).filter(j=>{const z=j.y>=0&&j.x>=0&&typeof j.x=="number"&&typeof j.y=="number"&&!isNaN(j.x)&&!isNaN(j.y)&&isFinite(j.x)&&isFinite(j.y);return z||console.warn(`Filtered out invalid power node at (${j.x}, ${j.y}) - likely in border area or invalid coordinates`),z});Kn(f)}rl.current=!1}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}},[E,me]),Di=C.useCallback(async()=>{},[Vs]),Pi=C.useCallback(async a=>{const r=Fa.current;if(!r){console.warn("Cannot load file: no directory handle");return}try{const y=await(await r.getFileHandle(a)).getFile();if(y.size===0){console.warn(`File ${a} is empty, skipping`);const R=ll.current.filter(J=>J!==a);po(R),ll.current=R;return}const S=await y.text();if(!S||S.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const R=ll.current.filter(J=>J!==a);po(R),ll.current=R;return}let b;try{b=JSON.parse(S)}catch(z){console.error(`Failed to parse JSON from file ${a}:`,z);const J=ll.current.filter(V=>V!==a);po(J),ll.current=J,await Di();return}Do(),We(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),qt(new Set),Bt(new Set),Wt(new Set),Xt(new Set),Cl(),await xa(b),kl(a);const j=ll.current.indexOf(a);j>=0?(Rr(j),pa.current=j):await Di(),rl.current=!1}catch(x){console.error("Failed to load file from history:",x);const y=ll.current;if(y.includes(a)){const S=y.filter(b=>b!==a);po(S),ll.current=S,await Di()}}},[xa,Di,Cl]);C.useCallback(async()=>{const a=pa.current,r=ll.current;if(a>=0&&a<r.length-1){const x=a+1,y=r[x];y&&await Pi(y)}},[Pi]),C.useCallback(async()=>{const a=pa.current,r=ll.current;if(a<=0||a>=r.length||r.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",r.length);return}if(a>0&&a<r.length&&r.length>0){const x=a-1;if(x>=0&&x<r.length){const y=r[x];y?await Pi(y):(console.warn("No newer file found at index",x),await Di())}else console.warn("Cannot navigate to newer file: prevIndex",x,"is out of bounds")}},[Pi,Di]),it.useEffect(()=>{jt.current=Oe},[Oe]);const Fr=it.useRef(me),bn=it.useRef($e);it.useEffect(()=>{const a=me!==Fr.current;if(E==="draw"&&Fr.current==="trace"&&a){if(jt.current.length>=2){const r={id:`${Date.now()}-trace-autofinalize`,points:jt.current,color:M,size:g,layer:bn.current,type:"trace"};Ue(x=>[...x,r]),bn.current==="top"?vi(x=>[...x,r.id]):Li(x=>[...x,r.id])}ut([]),Be(!1)}Fr.current=me,bn.current=$e},[me,$e,E,M,g]);const Lr=it.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);it.useEffect(()=>{fi()},[ye]),it.useEffect(()=>{fi()},[zt,xt,Dt,Wl]),it.useEffect(()=>{const a=kr.current,r=Ar.current;if(ea.current=!0,a){const x=Math.max(0,a.scrollWidth-a.clientWidth),y=Ko.current,S=Math.max(0,Math.min(x,-(Le.x+y)));Math.abs(a.scrollLeft-S)>.5&&(a.scrollLeft=S)}if(r){const x=Math.max(0,r.scrollHeight-r.clientHeight),y=Jo.current,S=Math.max(0,Math.min(x,-(Le.y+y)));Math.abs(r.scrollTop-S)>.5&&(r.scrollTop=S)}requestAnimationFrame(()=>{ea.current=!1})},[Le.x,Le.y]);const ft=zr>0,Oc=C.useCallback(async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[r]=await a.showOpenFilePicker({multiple:!1}),x=await r.getFile();if(!x.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}kl(x.name);const y=await x.text(),S=JSON.parse(y);try{const f=await r.getParent();ji(f),console.log(`Opened project file: ${x.name} in directory (auto-save will use this directory)`)}catch(f){console.warn("Could not get directory handle from file handle:",f)}await xa(S);let b;S.projectInfo?.name?b=S.projectInfo.name:(b=x.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",ai(b),localStorage.setItem("pcb_project_name",b)),Cn||(ai(b),localStorage.setItem("pcb_project_name",b)),setTimeout(()=>{$l({visible:!0,source:"open",interval:5})},100)}catch(r){if(r?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",r),Da.current?.click()}else Da.current?.click()},[xa,Cn,kl,ai,ji,$l]);return i.jsxs("div",{className:"app",children:[i.jsx("header",{className:"app-header",children:i.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.0)"})}),i.jsx(hx,{openMenu:jr,setOpenMenu:Ca,isReadOnlyMode:ft,currentProjectFilePath:Vs,onNewProject:Kl,onOpenProject:Oc,onSaveProject:zl,onSaveAs:Ii,onExportSchematic:ha,onPrint:ws,hasUnsavedChanges:_c,setNewProjectDialog:fo,setAutoSaveDialog:Zi,topImage:v,bottomImage:d,selectedImageForTransform:Yt,setSelectedImageForTransform:yi,setCurrentTool:k,transformMode:pn,setTransformMode:Zn,updateImageTransform:Fs,resetImageTransform:Bc,isGrayscale:de,setIsGrayscale:fe,isBlackAndWhiteEdges:Y,setIsBlackAndWhiteEdges:q,isBlackAndWhiteInverted:_e,setIsBlackAndWhiteInverted:Ee,areImagesLocked:tl,setAreImagesLocked:qi,onEnterBoardDimensions:()=>Wn(!0),fileInputTopRef:ho,fileInputBottomRef:go,openProjectRef:Da,increaseSize:da,decreaseSize:Xa,brushSize:g,drawingStrokes:ye,selectedIds:Nt,selectedComponentIds:vt,selectedPowerIds:mt,selectedGroundIds:Vt,componentsTop:zt,componentsBottom:xt,powers:St,grounds:Dt,setSetSizeDialog:Oi,areViasLocked:mn,setAreViasLocked:Fo,arePadsLocked:vl,setArePadsLocked:mr,areTracesLocked:Vn,setAreTracesLocked:ro,areComponentsLocked:sl,setAreComponentsLocked:nl,areGroundNodesLocked:Nn,setAreGroundNodesLocked:Ta,arePowerNodesLocked:cn,setArePowerNodesLocked:Sr,setSelectedIds:qt,setSelectedComponentIds:Bt,setSelectedPowerIds:Wt,setSelectedGroundIds:Xt,selectAllVias:aa,selectAllTraces:Fl,selectAllPads:Ir,selectAllComponents:oa,selectDisconnectedComponents:Dc,selectAllPowerNodes:bo,selectAllGroundNodes:Ha,setShowPowerBusManager:Ua,setShowGroundBusManager:Xs,menuBarRef:os}),i.jsxs("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:[i.jsxs("div",{ref:ka,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[i.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[i.jsxs("button",{onClick:()=>{ft||Ro()},onMouseDown:a=>a.currentTarget.blur(),disabled:ft,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="select"?"2px solid #000":"1px solid #ddd",background:E==="select"?"#e6f0ff":"#fff",color:ft?"#999":"#222",outline:"none",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[i.jsx(Qg,{size:14}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{ft||(qe("via"),k("draw"))},disabled:ft,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="draw"&&me==="via"?"2px solid #000":"1px solid #ddd",background:E==="draw"&&me==="via"?"#e6f0ff":"#fff",color:ft?"#999":"#222",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=Qt.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";return i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:r,strokeWidth:"3"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:r})]})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Qt.get("via")?.settings.size||26})]})]}),i.jsxs("button",{ref:wo,onClick:()=>{ft||(qe("pad"),k("draw"),Et(Qn||"top"),setTimeout(()=>Ri(),0))},disabled:ft,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="draw"&&me==="pad"?"2px solid #000":"1px solid #ddd",background:E==="draw"&&me==="pad"?"#e6f0ff":"#fff",color:ft?"#999":"#222",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const a=Qt.get("pad"),r=Qn||"top",x=a?.settings.color||(r==="top"?ne:ie)||M,y=10,S=(24-y)/2,b=(24-y)/2;return i.jsx("rect",{x:S,y:b,width:y,height:y,fill:x})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=Qt.get("pad"),r=Qn||"top";return a?.settings.size||(r==="top"?D:ue)||18})()})]})]}),i.jsxs("button",{ref:Sn,onClick:()=>{ft||(qe("trace"),k("draw"),Et(lt||"top"),setTimeout(()=>Ss(),0))},disabled:ft,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="draw"&&me==="trace"?"2px solid #000":"1px solid #ddd",background:E==="draw"&&me==="trace"?"#e6f0ff":"#fff",color:ft?"#999":"#222",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[i.jsx(Jg,{size:14,color:Qt.get("trace")?.settings.color||(lt==="top"?we:Ke)||vh}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:lt==="top"?Ye:at})]})]}),i.jsxs("button",{ref:$a,onClick:()=>{ft||(k("component"),Zl(!0),Bl(!1),So(null))},disabled:ft,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="component"?"2px solid #000":"1px solid #ddd",background:E==="component"?"#e6f0ff":"#fff",color:ft?"#999":"#222",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[(()=>{const a=xl||"top",r=Qt.get("component"),x=(a==="top"?Je:ht)||r?.settings.color||mh;return on?i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:x,strokeWidth:"1.5"}),i.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:x,fontWeight:"bold",fontFamily:"monospace",children:md(on)})]}):i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:x,stroke:x,strokeWidth:"0.5"}),i.jsxs("g",{stroke:x,fill:"none",strokeWidth:"1.5",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),i.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:x})]})]})})(),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(xl||"top")==="top"?Ot:te})]})]}),i.jsxs("button",{ref:Ia,onClick:()=>{ft||k("power")},disabled:ft,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="power"?"2px solid #000":"1px solid #ddd",background:E==="power"?"#e6f0ff":"#fff",color:ft?"#999":"#222",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[i.jsx("span",{style:{color:Qt.get("power")?.settings.color||vc,fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Qt.get("power")?.settings.size||18})]})]}),i.jsxs("button",{ref:gs,onClick:()=>{ft||k("ground")},disabled:ft,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="ground"?"2px solid #000":"1px solid #ddd",background:E==="ground"?"#e6f0ff":"#fff",color:ft?"#999":"#222",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:i.jsxs("g",{stroke:Qt.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),i.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),i.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),i.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Qt.get("ground")?.settings.size||18})]})]}),i.jsxs("button",{onClick:()=>{ft||k(a=>a==="pan"?"draw":"pan")},disabled:ft,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:E==="pan"?"2px solid #000":"1px solid #ddd",background:E==="pan"?"#e6f0ff":"#fff",color:ft?"#999":"#222",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),i.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),i.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Is(!1),k(a=>a==="magnify"?"draw":"magnify")},title:`${ns?"Zoom Out":"Zoom In"} (Z)`,style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="magnify"?"2px solid #000":"1px solid #ddd",background:E==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),ns?i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),i.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Z"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{ft||k("erase")},disabled:ft,title:"Erase (E)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:E==="erase"?"2px solid #000":"1px solid #ddd",background:E==="erase"?"#ffecec":"#fff",color:ft?"#999":"#222",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{transform:"rotate(-35 12 12)",children:[i.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),i.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Qt.get("erase")?.settings.size||18})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>{ft||Hs(a=>!a)},disabled:ft,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:ft?"not-allowed":"pointer",opacity:ft?.5:1},children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[i.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Qo&&i.jsx("div",{ref:Ps,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:Lr.map(a=>i.jsx("div",{onClick:()=>{T(a),Hs(!1);const r=Vl(Qt);if(r)if(E==="draw"&&me==="trace"){const x=lt||"top";Xi(r.id,x,a,g),x==="top"?(tt(a),oe("trace",a,"top")):(ke(a),oe("trace",a,"bottom"))}else if(E==="draw"&&me==="pad"){const x=Qn||"top";Xi(r.id,x,a,g),x==="top"?(Me(a),oe("pad",a,"top")):(m(a),oe("pad",a,"bottom"))}else if(E==="component"){const x=xl||"top";Xi(r.id,x,a,g),x==="top"?(st(a),oe("component",a,"top")):(gn(a),oe("component",a,"bottom"))}else cr(r.id,a,g),E==="draw"&&me==="via"&&oe("via",a);oe("brush",a),Nt.size>0&&Ue(x=>x.map(y=>Nt.has(y.id)?(y.type==="via"?(oe("via",a),al(S=>{const b=new Map(S),f=b.get("via");return f&&b.set("via",{...f,settings:{...f.settings,color:a}}),b})):y.type==="pad"?(oe("pad",a),al(S=>{const b=new Map(S),f=b.get("pad");return f&&b.set("pad",{...f,settings:{...f.settings,color:a}}),b})):y.type==="trace"&&oe("trace",a,y.layer),{...y,color:a}):y)),vt.size>0&&(oe("component",a),Un(x=>x.map(y=>vt.has(y.id)?{...y,color:a}:y)),Tn(x=>x.map(y=>vt.has(y.id)?{...y,color:a}:y))),mt.size>0&&Kn(x=>x.map(y=>mt.has(y.id)?{...y,color:a}:y)),Vt.size>0&&Dl(x=>x.map(y=>Vt.has(y.id)?{...y,color:a}:y))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===M?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),E==="draw"&&me==="trace"&&Ea&&i.jsxs("div",{ref:sa,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:lt==="top",onChange:()=>{gl("top"),Et("top"),T(we),W(Ye),al(a=>{const r=new Map(a),x=r.get("trace");return x&&r.set("trace",{...x,settings:{color:we,size:Ye}}),r}),Ci(!1),Ma(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:lt==="bottom",onChange:()=>{gl("bottom"),Et("bottom"),T(Ke),W(at),al(a=>{const r=new Map(a),x=r.get("trace");return x&&r.set("trace",{...x,settings:{color:Ke,size:at}}),r}),Ci(!1),oi(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),E==="draw"&&me==="pad"&&zi&&i.jsxs("div",{ref:Ll,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:Qn==="top",onChange:()=>{fr("top"),Et("top"),T(ne),W(D),al(a=>{const r=new Map(a),x=r.get("pad");return x&&r.set("pad",{...x,settings:{color:ne,size:D}}),r}),Ul(!1),Ma(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:Qn==="bottom",onChange:()=>{fr("bottom"),Et("bottom"),T(ie),W(ue),al(a=>{const r=new Map(a),x=r.get("pad");return x&&r.set("pad",{...x,settings:{color:ie,size:ue}}),r}),Ul(!1),oi(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),ds&&E==="power"&&i.jsxs("div",{ref:ql,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),Rt.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...Rt].sort((a,r)=>{const x=b=>{const f=b.match(/([+-]?)(\d+\.?\d*)/);if(f){const j=f[1]||"+",z=parseFloat(f[2]);return{absValue:Math.abs(z),isNegative:j==="-",original:b}}return{absValue:1/0,isNegative:!1,original:b}},y=x(a.voltage),S=x(r.voltage);return y.absValue!==S.absValue?y.absValue-S.absValue:y.isNegative!==S.isNegative?y.isNegative?-1:1:0}).map(a=>i.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),Ba(a.id),Yl(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),i.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Yl(!1),Ua(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Yl(!1),Ba(null),k("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),cl&&E==="ground"&&i.jsxs("div",{ref:vo,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),yl.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...yl].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=a.id==="groundbus-earth",x=wl===a.id;return i.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),fs(a.id),na(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:x?"#e0e0e0":"#f5f5f5",border:x?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),i.jsx("div",{children:i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name})})]})},a.id)}),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),na(!1),Xs(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),na(!1),fs(null),k("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),E==="component"&&ra&&i.jsxs("div",{ref:Va,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:$e==="top",onClick:()=>{ks("top"),Et("top"),T(Je),W(Ot),al(a=>{const r=new Map(a),x=r.get("component");return x&&r.set("component",{...x,settings:{color:Je,size:Ot}}),r}),Zl(!1),Ma(!0),Bl(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:$e==="bottom",onClick:()=>{ks("bottom"),Et("bottom"),T(ht),W(te),al(a=>{const r=new Map(a),x=r.get("component");return x&&r.set("component",{...x,settings:{color:ht,size:te}}),r}),Zl(!1),oi(!0),Bl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),E==="component"&&mo&&i.jsxs("div",{ref:Nc,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(ex).map(([a,r])=>{const x=Ac.has(a);return i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),Ad(S=>{const b=new Set(S);return b.has(a)?b.delete(a):b.add(a),b})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:x?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[i.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:x?"":""}),a]}),x&&i.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(r).map(([y,S])=>i.jsxs("div",{style:{marginBottom:"2px"},children:[i.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[y,":"]}),S.map(b=>{const f=Cd[b];return f?i.jsxs("button",{onClick:j=>{j.preventDefault(),j.stopPropagation(),So(b),Bl(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:on===b?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[f.prefix.join(", ")," - ",b," (",f.defaultPins," pins)"]},b):null})]},y))})]},a)}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Bl(!1),k("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),i.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[i.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),i.jsxs("div",{onClick:()=>Et("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Yt==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:ta,onChange:a=>Ma(a.target.checked)})})]}),i.jsx("canvas",{ref:zc,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsxs("div",{onClick:()=>Et("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Yt==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:ss,onChange:a=>oi(a.target.checked)})})]}),i.jsx("canvas",{ref:Na,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:$n,onChange:a=>rs(a.target.checked)}),i.jsx("span",{children:"Vias"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:si,onChange:a=>Or(a.target.checked)}),i.jsx("span",{children:"Pads (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Al,onChange:a=>Hi(a.target.checked)}),i.jsx("span",{children:"Traces (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ri,onChange:a=>cs(a.target.checked)}),i.jsx("span",{children:"Components (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Ti,onChange:a=>Hr(a.target.checked)}),i.jsx("span",{children:"Pads (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Nl,onChange:a=>Ys(a.target.checked)}),i.jsx("span",{children:"Traces (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Pl,onChange:a=>ml(a.target.checked)}),i.jsx("span",{children:"Components (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ci,onChange:a=>Sl(a.target.checked)}),i.jsx("span",{children:"Power"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Wl,onChange:a=>Ei(a.target.checked)}),i.jsx("span",{children:"Ground"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:la,onChange:a=>Gs(a.target.checked)}),i.jsx("span",{children:"Connections"})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:$n&&si&&Ti&&Al&&Nl&&ri&&Pl&&ci&&Wl&&la,onChange:a=>{const r=a.target.checked;rs(r),Or(r),Hr(r),Hi(r),Ys(r),cs(r),ml(r),Sl(r),Ei(r),Gs(r)}}),i.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",F,"%"]}),i.jsxs("label",{className:"radio-label",style:{margin:0},children:[i.jsx("input",{type:"checkbox",checked:je,onChange:a=>{const r=a.target.checked;r?(Ma(!0),oi(!0)):(H(50),k("select")),P(r)}}),i.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:F,onChange:a=>H(Number(a.target.value)),onDoubleClick:()=>ua("transparency"),className:"slider",style:{width:"100%",marginTop:3}})]})]}),i.jsx(gx,{visible:!v&&!d}),i.jsx("canvas",{ref:An,width:Bn.width,height:Bn.height,tabIndex:0,onMouseDown:Mc,onMouseMove:Uc,onMouseUp:Xr,onMouseLeave:Xr,onWheel:Co,onDoubleClick:Wr,className:`pcb-canvas ${E==="transform"?"transform-cursor":E==="draw"?"draw-cursor":E==="erase"?"erase-cursor":"default-cursor"}`,style:{...As?{cursor:As}:E==="pan"?{cursor:Aa?"grabbing":"grab"}:{},width:`${Bn.width}px`,height:`${Bn.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),i.jsx(wx,{componentEditor:ja,setComponentEditor:yr,componentsTop:zt,componentsBottom:xt,setComponentsTop:Un,setComponentsBottom:Tn,connectingPin:Hn,setConnectingPin:Go,componentDialogPosition:Us,setComponentDialogPosition:mi,isDraggingDialog:br,setIsDraggingDialog:vr,dialogDragOffset:oo,setDialogDragOffset:Bs,areComponentsLocked:sl}),bl&&bl.visible&&(()=>{if(!St.find(x=>x.id===bl.id))return null;const r=Rt.find(x=>x.id===bl.powerBusId);return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),i.jsx("button",{onClick:()=>Bi(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:r?`${r.name} (${r.voltage})`:"Unknown"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`power-layer-${bl.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),i.jsxs("select",{id:`power-layer-${bl.id}`,name:`power-layer-${bl.id}`,value:bl.layer,onChange:x=>Bi({...bl,layer:x.target.value}),disabled:cn,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:cn?.6:1},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:bl.x.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:bl.y.toFixed(2)})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[i.jsx("button",{onClick:()=>Bi(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),i.jsx("button",{onClick:()=>{cn||(Kn(x=>x.map(y=>y.id===bl.id?{...y,layer:bl.layer}:y)),Bi(null))},disabled:cn,style:{padding:"2px 5px",background:cn?"#f5f5f5":"#0b5fff",color:cn?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:cn?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!v&&!d&&i.jsx("div",{className:"placeholder"}),i.jsx("div",{ref:kr,className:"scrollbar-horizontal",onScroll:a=>{if(ea.current)return;const r=a.currentTarget,x=Ko.current;kn(y=>({x:-r.scrollLeft-x,y:y.y}))},"aria-label":"Horizontal pan",children:i.jsx("div",{className:"scrollbar-horizontal-content",ref:Nr})}),i.jsx("div",{ref:Ar,className:"scrollbar-vertical",onScroll:a=>{if(ea.current)return;const r=a.currentTarget,x=Jo.current;kn(y=>({x:y.x,y:-r.scrollTop-x}))},"aria-label":"Vertical pan",children:i.jsx("div",{className:"scrollbar-vertical-content",ref:Mr})})]}),Ws&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>Ua(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:[...Rt].sort((a,r)=>{const x=b=>{const f=b.match(/([+-]?)(\d+\.?\d*)/);if(f){const j=f[1]||"+",z=parseFloat(f[2]);return{absValue:Math.abs(z),isNegative:j==="-",original:b}}return{absValue:1/0,isNegative:!1,original:b}},y=x(a.voltage),S=x(r.voltage);return y.absValue!==S.absValue?y.absValue-S.absValue:y.isNegative!==S.isNegative?y.isNegative?-1:1:0}).map(a=>{const r=Rt.findIndex(S=>S.id===a.id),x=Rt.some(S=>S.name===a.name&&S.id!==a.id),y=Rt.some(S=>S.voltage===a.voltage&&S.id!==a.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:a.name,onChange:S=>{const b=[...Rt];b[r]={...a,name:S.target.value},En(b)},placeholder:"e.g., +3V3, -3V3",style:{flex:1,padding:"2px 4px",border:x?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Value"}),i.jsx("input",{type:"text",inputMode:"decimal",value:a.voltage,onChange:S=>{const b=S.target.value;if(b===""||/^[+-]?\d*\.?\d*$/.test(b)){const f=[...Rt];f[r]={...a,voltage:b},En(f)}},onBlur:S=>{const b=S.target.value.trim();if(b==="")return;const f=parseFloat(b);if(!isNaN(f)){const j=f>=0?"+":"-",z=Math.abs(f),R=`${j}${z.toFixed(1).replace(/\.?0+$/,"")}`,J=[...Rt];J[r]={...a,voltage:R},En(J)}},placeholder:"e.g., +3.3, -3.3",style:{flex:1,padding:"2px 4px",border:y?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})]}),i.jsx("input",{type:"color",value:a.color,onChange:S=>{const b=[...Rt];b[r]={...a,color:S.target.value},En(b)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const S=St.filter(b=>b.powerBusId===a.id);if(S.length>0){alert(`Cannot delete: ${S.length} power node(s) are using this bus. Remove or reassign them first.`);return}En(b=>b.filter(f=>f.id!==a.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},a.id)})}),i.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};En(r=>[...r,a])},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Power Bus"}),i.jsx("button",{onClick:()=>Ua(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),yo&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:()=>Xs(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:[...yl].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=yl.findIndex(y=>y.id===a.id),x=yl.some(y=>y.name===a.name&&y.id!==a.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc",flexShrink:0}}),i.jsx("div",{style:{flex:1,minWidth:0},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:a.name,onChange:y=>{const S=[...yl];S[r]={...a,name:y.target.value},Ui(S)},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 4px",border:x?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})}),i.jsx("input",{type:"color",value:a.color,onChange:y=>{const S=[...yl];S[r]={...a,color:y.target.value},Ui(S)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const y=Dt.filter(S=>S.groundBusId===a.id);if(y.length>0){alert(`Cannot delete: ${y.length} ground node(s) are using this bus. Remove or reassign them first.`);return}Ui(S=>S.filter(b=>b.id!==a.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},a.id)})}),i.jsx("button",{onClick:()=>{const a={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};Ui(r=>[...r,a])},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Ground Bus"}),i.jsx("button",{onClick:()=>Xs(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),i.jsx("input",{ref:ho,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&ys(r,"top"),a.target.value=""}}),i.jsx("input",{ref:go,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&ys(r,"bottom"),a.target.value=""}}),i.jsx("input",{ref:Da,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const r=a.target.files?.[0];if(r)try{kl(r.name);const x=await r.text(),y=JSON.parse(x);await xa(y);let S;y.projectInfo?.name?S=y.projectInfo.name:(S=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",ai(S),localStorage.setItem("pcb_project_name",S)),Cn||(ai(S),localStorage.setItem("pcb_project_name",S)),setTimeout(()=>{$l({visible:!0,source:"open",interval:5})},100)}catch(x){console.error("Failed to open project",x),alert("Failed to open project file. See console for details.")}a.target.value=""}}),i.jsx(yx,{visible:uo.visible,selectedIds:Nt,selectedComponentIds:vt,selectedPowerIds:mt,selectedGroundIds:Vt,drawingStrokes:ye,componentsTop:zt,componentsBottom:xt,powers:St,grounds:Dt,powerBuses:Rt,onClose:()=>{Lo({visible:!1,text:""})},setComponentsTop:Un,setComponentsBottom:Tn,determineViaType:Gt,determinePadType:Tt,onFindComponent:kc,position:ia,isDragging:jl,onDragStart:a=>{ia&&(hs({x:a.clientX-ia.x,y:a.clientY-ia.y}),_a(!0),a.preventDefault())}}),i.jsx(bx,{visible:Oa,selectedIds:Nt,selectedComponentIds:vt,selectedPowerIds:mt,selectedGroundIds:Vt,drawingStrokes:ye,componentsTop:zt,componentsBottom:xt,powers:St,grounds:Dt,powerBuses:Rt,onClose:()=>{Ml(!1)},setComponentsTop:Un,setComponentsBottom:Tn,setDrawingStrokes:Ue,setPowerSymbols:Kn,setGroundSymbols:Dl,determineViaType:Gt,determinePadType:Tt,position:Jn,isDragging:Xl,onDragStart:a=>{Jn&&(Er({x:a.clientX-Jn.x,y:a.clientY-Jn.y}),ui(!0),a.preventDefault())}}),Cr.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&ga()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:ga,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:No,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),i.jsx("button",{ref:_r,onClick:Ao,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),xn.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&ko()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),i.jsx("input",{ref:Cc,type:"text",value:xn.projectName,onChange:a=>{qo(r=>({...r,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),zn()):a.key==="Escape"&&(a.preventDefault(),ko())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),xn.projectName&&(()=>{const a=xn.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const r=[...new Set(a)];return i.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",r.map(x=>`"${x}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:xn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:xn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Ol,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),xn.projectName&&xn.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[xn.locationPath,"/",xn.projectName,"/project.json"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:ko,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:zn,disabled:!xn.projectName.trim()||!xn.locationHandle,style:{padding:"8px 16px",background:!xn.projectName.trim()||!xn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!xn.projectName.trim()||!xn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!xn.projectName.trim()||!xn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!xn.projectName.trim()||!xn.locationHandle?.6:1},children:"Create"})]})]})}),yn.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Rn()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),i.jsx("input",{ref:as,type:"text",value:yn.filename,onChange:a=>{Zo(r=>({...r,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),tn()):a.key==="Escape"&&(a.preventDefault(),Rn())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:yn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:yn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:kt,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),yn.filename&&yn.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[yn.locationPath,"/",yn.filename.endsWith(".json")?yn.filename:`${yn.filename}.json`]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Rn,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:tn,disabled:!yn.filename.trim()||!yn.locationHandle,style:{padding:"8px 16px",background:!yn.filename.trim()||!yn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!yn.filename.trim()||!yn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!yn.filename.trim()||!yn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!yn.filename.trim()||!yn.locationHandle?.6:1},children:"Save"})]})]})}),i.jsx(xx,{visible:Tr.visible,title:Tr.title,message:Tr.message,onClose:()=>Os({visible:!1,title:"",message:""})}),i.jsx(vx,{visible:Rc,dimensions:Vr,onSave:a=>{$r(a),localStorage.setItem("boardDimensions",JSON.stringify(a))},onClose:()=>Wn(!1)}),Si.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Oi({visible:!1,size:6})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),i.jsx("input",{ref:is,type:"number",min:"1",max:"99",value:Si.size,onChange:a=>{const r=parseInt(a.target.value)||1,x=Math.max(1,Math.min(99,r));Oi(y=>({...y,size:x}))},onKeyDown:a=>{if(a.key==="Enter"?vs():a.key==="Escape"&&Oi({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const r=Si.size.toString();r.length>=2&&is.current?.selectionStart===is.current?.selectionEnd&&is.current?.selectionStart===r.length&&a.preventDefault()}},onInput:a=>{const r=a.target,x=r.value;if(x.length>2){r.value=x.slice(0,2);const y=parseInt(r.value)||1;Oi(S=>({...S,size:Math.max(1,Math.min(99,y))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),i.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(Si.size)?Si.size:"",onChange:a=>{const r=parseInt(a.target.value);!isNaN(r)&&r>0&&Oi(x=>({...x,size:r}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[i.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>i.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Oi({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:vs,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),_s.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Zi({visible:!1,interval:5})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:_s.interval===null?"disable":(_s.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")Zi({visible:!0,interval:null});else{const x=parseFloat(r);!isNaN(x)&&x>0&&Zi({visible:!0,interval:x})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),i.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Zi({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:()=>ms(_s.interval,!1),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),co.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&zo()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),i.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:co.interval===null?"disable":(co.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")$l({...co,interval:null});else{const x=parseFloat(r);!isNaN(x)&&x>0&&$l({...co,interval:x})}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:zo,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),i.jsx("button",{onClick:()=>ms(co.interval,!0),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})})]})]})}Pg.createRoot(document.getElementById("root")).render(i.jsx(C.StrictMode,{children:i.jsx(Ex,{})}));
