(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const v of d.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function a(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(l){if(l.ep)return;l.ep=!0;const d=a(l);fetch(l.href,d)}})();var cw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Am(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Oh={exports:{}},zf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function zm(){if(Xg)return zf;Xg=1;var i=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(s,l,d){var v=null;if(d!==void 0&&(v=""+d),l.key!==void 0&&(v=""+l.key),"key"in l){d={};for(var p in l)p!=="key"&&(d[p]=l[p])}else d=l;return l=d.ref,{$$typeof:i,type:s,key:v,ref:l!==void 0?l:null,props:d}}return zf.Fragment=r,zf.jsx=a,zf.jsxs=a,zf}var Kg;function Pm(){return Kg||(Kg=1,Oh.exports=zm()),Oh.exports}var n=Pm(),Eh={exports:{}},fi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function _m(){if(Zg)return fi;Zg=1;var i=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),v=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),O=Symbol.iterator;function T(k){return k===null||typeof k!="object"?null:(k=O&&k[O]||k["@@iterator"],typeof k=="function"?k:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,z={};function w(k,A,W){this.props=k,this.context=A,this.refs=z,this.updater=W||K}w.prototype.isReactComponent={},w.prototype.setState=function(k,A){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,A,"setState")},w.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function we(){}we.prototype=w.prototype;function X(k,A,W){this.props=k,this.context=A,this.refs=z,this.updater=W||K}var G=X.prototype=new we;G.constructor=X,R(G,w.prototype),G.isPureReactComponent=!0;var J=Array.isArray;function ue(){}var oe={H:null,A:null,T:null,S:null},ie=Object.prototype.hasOwnProperty;function E(k,A,W){var q=W.ref;return{$$typeof:i,type:k,key:A,ref:q!==void 0?q:null,props:W}}function Y(k,A){return E(k.type,A,k.props)}function F(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function L(k){var A={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(W){return A[W]})}var $=/\/+/g;function H(k,A){return typeof k=="object"&&k!==null&&k.key!=null?L(""+k.key):A.toString(36)}function Pe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ue,ue):(k.status="pending",k.then(function(A){k.status==="pending"&&(k.status="fulfilled",k.value=A)},function(A){k.status==="pending"&&(k.status="rejected",k.reason=A)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function ae(k,A,W,q,te){var xe=typeof k;(xe==="undefined"||xe==="boolean")&&(k=null);var ee=!1;if(k===null)ee=!0;else switch(xe){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(k.$$typeof){case i:case r:ee=!0;break;case C:return ee=k._init,ae(ee(k._payload),A,W,q,te)}}if(ee)return te=te(k),ee=q===""?"."+H(k,0):q,J(te)?(W="",ee!=null&&(W=ee.replace($,"$&/")+"/"),ae(te,A,W,"",function(Fe){return Fe})):te!=null&&(F(te)&&(te=Y(te,W+(te.key==null||k&&k.key===te.key?"":(""+te.key).replace($,"$&/")+"/")+ee)),A.push(te)),1;ee=0;var Ie=q===""?".":q+":";if(J(k))for(var _e=0;_e<k.length;_e++)q=k[_e],xe=Ie+H(q,_e),ee+=ae(q,A,W,xe,te);else if(_e=T(k),typeof _e=="function")for(k=_e.call(k),_e=0;!(q=k.next()).done;)q=q.value,xe=Ie+H(q,_e++),ee+=ae(q,A,W,xe,te);else if(xe==="object"){if(typeof k.then=="function")return ae(Pe(k),A,W,q,te);throw A=String(k),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return ee}function ve(k,A,W){if(k==null)return k;var q=[],te=0;return ae(k,q,"","",function(xe){return A.call(W,xe,te++)}),q}function pe(k){if(k._status===-1){var A=k._result;A=A(),A.then(function(W){(k._status===0||k._status===-1)&&(k._status=1,k._result=W)},function(W){(k._status===0||k._status===-1)&&(k._status=2,k._result=W)}),k._status===-1&&(k._status=0,k._result=A)}if(k._status===1)return k._result.default;throw k._result}var Ce=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},fe={map:ve,forEach:function(k,A,W){ve(k,function(){A.apply(this,arguments)},W)},count:function(k){var A=0;return ve(k,function(){A++}),A},toArray:function(k){return ve(k,function(A){return A})||[]},only:function(k){if(!F(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return fi.Activity=D,fi.Children=fe,fi.Component=w,fi.Fragment=a,fi.Profiler=l,fi.PureComponent=X,fi.StrictMode=s,fi.Suspense=b,fi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,fi.__COMPILER_RUNTIME={__proto__:null,c:function(k){return oe.H.useMemoCache(k)}},fi.cache=function(k){return function(){return k.apply(null,arguments)}},fi.cacheSignal=function(){return null},fi.cloneElement=function(k,A,W){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var q=R({},k.props),te=k.key;if(A!=null)for(xe in A.key!==void 0&&(te=""+A.key),A)!ie.call(A,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&A.ref===void 0||(q[xe]=A[xe]);var xe=arguments.length-2;if(xe===1)q.children=W;else if(1<xe){for(var ee=Array(xe),Ie=0;Ie<xe;Ie++)ee[Ie]=arguments[Ie+2];q.children=ee}return E(k.type,te,q)},fi.createContext=function(k){return k={$$typeof:v,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:d,_context:k},k},fi.createElement=function(k,A,W){var q,te={},xe=null;if(A!=null)for(q in A.key!==void 0&&(xe=""+A.key),A)ie.call(A,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(te[q]=A[q]);var ee=arguments.length-2;if(ee===1)te.children=W;else if(1<ee){for(var Ie=Array(ee),_e=0;_e<ee;_e++)Ie[_e]=arguments[_e+2];te.children=Ie}if(k&&k.defaultProps)for(q in ee=k.defaultProps,ee)te[q]===void 0&&(te[q]=ee[q]);return E(k,xe,te)},fi.createRef=function(){return{current:null}},fi.forwardRef=function(k){return{$$typeof:p,render:k}},fi.isValidElement=F,fi.lazy=function(k){return{$$typeof:C,_payload:{_status:-1,_result:k},_init:pe}},fi.memo=function(k,A){return{$$typeof:y,type:k,compare:A===void 0?null:A}},fi.startTransition=function(k){var A=oe.T,W={};oe.T=W;try{var q=k(),te=oe.S;te!==null&&te(W,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(ue,Ce)}catch(xe){Ce(xe)}finally{A!==null&&W.types!==null&&(A.types=W.types),oe.T=A}},fi.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},fi.use=function(k){return oe.H.use(k)},fi.useActionState=function(k,A,W){return oe.H.useActionState(k,A,W)},fi.useCallback=function(k,A){return oe.H.useCallback(k,A)},fi.useContext=function(k){return oe.H.useContext(k)},fi.useDebugValue=function(){},fi.useDeferredValue=function(k,A){return oe.H.useDeferredValue(k,A)},fi.useEffect=function(k,A){return oe.H.useEffect(k,A)},fi.useEffectEvent=function(k){return oe.H.useEffectEvent(k)},fi.useId=function(){return oe.H.useId()},fi.useImperativeHandle=function(k,A,W){return oe.H.useImperativeHandle(k,A,W)},fi.useInsertionEffect=function(k,A){return oe.H.useInsertionEffect(k,A)},fi.useLayoutEffect=function(k,A){return oe.H.useLayoutEffect(k,A)},fi.useMemo=function(k,A){return oe.H.useMemo(k,A)},fi.useOptimistic=function(k,A){return oe.H.useOptimistic(k,A)},fi.useReducer=function(k,A,W){return oe.H.useReducer(k,A,W)},fi.useRef=function(k){return oe.H.useRef(k)},fi.useState=function(k){return oe.H.useState(k)},fi.useSyncExternalStore=function(k,A,W){return oe.H.useSyncExternalStore(k,A,W)},fi.useTransition=function(){return oe.H.useTransition()},fi.version="19.2.0",fi}var Jg;function M0(){return Jg||(Jg=1,Eh.exports=_m()),Eh.exports}var M=M0();const Dt=Am(M);var Fh={exports:{}},Pf={},Uh={exports:{}},qh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function Dm(){return Qg||(Qg=1,(function(i){function r(ae,ve){var pe=ae.length;ae.push(ve);e:for(;0<pe;){var Ce=pe-1>>>1,fe=ae[Ce];if(0<l(fe,ve))ae[Ce]=ve,ae[pe]=fe,pe=Ce;else break e}}function a(ae){return ae.length===0?null:ae[0]}function s(ae){if(ae.length===0)return null;var ve=ae[0],pe=ae.pop();if(pe!==ve){ae[0]=pe;e:for(var Ce=0,fe=ae.length,k=fe>>>1;Ce<k;){var A=2*(Ce+1)-1,W=ae[A],q=A+1,te=ae[q];if(0>l(W,pe))q<fe&&0>l(te,W)?(ae[Ce]=te,ae[q]=pe,Ce=q):(ae[Ce]=W,ae[A]=pe,Ce=A);else if(q<fe&&0>l(te,pe))ae[Ce]=te,ae[q]=pe,Ce=q;else break e}}return ve}function l(ae,ve){var pe=ae.sortIndex-ve.sortIndex;return pe!==0?pe:ae.id-ve.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var v=Date,p=v.now();i.unstable_now=function(){return v.now()-p}}var b=[],y=[],C=1,D=null,O=3,T=!1,K=!1,R=!1,z=!1,w=typeof setTimeout=="function"?setTimeout:null,we=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function G(ae){for(var ve=a(y);ve!==null;){if(ve.callback===null)s(y);else if(ve.startTime<=ae)s(y),ve.sortIndex=ve.expirationTime,r(b,ve);else break;ve=a(y)}}function J(ae){if(R=!1,G(ae),!K)if(a(b)!==null)K=!0,ue||(ue=!0,L());else{var ve=a(y);ve!==null&&Pe(J,ve.startTime-ae)}}var ue=!1,oe=-1,ie=5,E=-1;function Y(){return z?!0:!(i.unstable_now()-E<ie)}function F(){if(z=!1,ue){var ae=i.unstable_now();E=ae;var ve=!0;try{e:{K=!1,R&&(R=!1,we(oe),oe=-1),T=!0;var pe=O;try{t:{for(G(ae),D=a(b);D!==null&&!(D.expirationTime>ae&&Y());){var Ce=D.callback;if(typeof Ce=="function"){D.callback=null,O=D.priorityLevel;var fe=Ce(D.expirationTime<=ae);if(ae=i.unstable_now(),typeof fe=="function"){D.callback=fe,G(ae),ve=!0;break t}D===a(b)&&s(b),G(ae)}else s(b);D=a(b)}if(D!==null)ve=!0;else{var k=a(y);k!==null&&Pe(J,k.startTime-ae),ve=!1}}break e}finally{D=null,O=pe,T=!1}ve=void 0}}finally{ve?L():ue=!1}}}var L;if(typeof X=="function")L=function(){X(F)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,H=$.port2;$.port1.onmessage=F,L=function(){H.postMessage(null)}}else L=function(){w(F,0)};function Pe(ae,ve){oe=w(function(){ae(i.unstable_now())},ve)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ae){ae.callback=null},i.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<ae?Math.floor(1e3/ae):5},i.unstable_getCurrentPriorityLevel=function(){return O},i.unstable_next=function(ae){switch(O){case 1:case 2:case 3:var ve=3;break;default:ve=O}var pe=O;O=ve;try{return ae()}finally{O=pe}},i.unstable_requestPaint=function(){z=!0},i.unstable_runWithPriority=function(ae,ve){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var pe=O;O=ae;try{return ve()}finally{O=pe}},i.unstable_scheduleCallback=function(ae,ve,pe){var Ce=i.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ce+pe:Ce):pe=Ce,ae){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=pe+fe,ae={id:C++,callback:ve,priorityLevel:ae,startTime:pe,expirationTime:fe,sortIndex:-1},pe>Ce?(ae.sortIndex=pe,r(y,ae),a(b)===null&&ae===a(y)&&(R?(we(oe),oe=-1):R=!0,Pe(J,pe-Ce))):(ae.sortIndex=fe,r(b,ae),K||T||(K=!0,ue||(ue=!0,L()))),ae},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(ae){var ve=O;return function(){var pe=O;O=ve;try{return ae.apply(this,arguments)}finally{O=pe}}}})(qh)),qh}var e1;function Rm(){return e1||(e1=1,Uh.exports=Dm()),Uh.exports}var Vh={exports:{}},Ss={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1;function Lm(){if(t1)return Ss;t1=1;var i=M0();function r(b){var y="https://react.dev/errors/"+b;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)y+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+b+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(b,y,C){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:D==null?null:""+D,children:b,containerInfo:y,implementation:C}}var v=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(b,y){if(b==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ss.createPortal=function(b,y){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(r(299));return d(b,y,null,C)},Ss.flushSync=function(b){var y=v.T,C=s.p;try{if(v.T=null,s.p=2,b)return b()}finally{v.T=y,s.p=C,s.d.f()}},Ss.preconnect=function(b,y){typeof b=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(b,y))},Ss.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},Ss.preinit=function(b,y){if(typeof b=="string"&&y&&typeof y.as=="string"){var C=y.as,D=p(C,y.crossOrigin),O=typeof y.integrity=="string"?y.integrity:void 0,T=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;C==="style"?s.d.S(b,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:D,integrity:O,fetchPriority:T}):C==="script"&&s.d.X(b,{crossOrigin:D,integrity:O,fetchPriority:T,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ss.preinitModule=function(b,y){if(typeof b=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var C=p(y.as,y.crossOrigin);s.d.M(b,{crossOrigin:C,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(b)},Ss.preload=function(b,y){if(typeof b=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var C=y.as,D=p(C,y.crossOrigin);s.d.L(b,C,{crossOrigin:D,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ss.preloadModule=function(b,y){if(typeof b=="string")if(y){var C=p(y.as,y.crossOrigin);s.d.m(b,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:C,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(b)},Ss.requestFormReset=function(b){s.d.r(b)},Ss.unstable_batchedUpdates=function(b,y){return b(y)},Ss.useFormState=function(b,y,C){return v.H.useFormState(b,y,C)},Ss.useFormStatus=function(){return v.H.useHostTransitionStatus()},Ss.version="19.2.0",Ss}var n1;function Mm(){if(n1)return Vh.exports;n1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),Vh.exports=Lm(),Vh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function Im(){if(i1)return Pf;i1=1;var i=Rm(),r=M0(),a=Mm();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function v(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(d(e)!==e)throw Error(s(188))}function y(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var o=e,u=t;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return b(h),e;if(m===u)return b(h),t;m=m.sibling}throw Error(s(188))}if(o.return!==u.return)o=h,u=m;else{for(var I=!1,se=h.child;se;){if(se===o){I=!0,o=h,u=m;break}if(se===u){I=!0,u=h,o=m;break}se=se.sibling}if(!I){for(se=m.child;se;){if(se===o){I=!0,o=m,u=h;break}if(se===u){I=!0,u=m,o=h;break}se=se.sibling}if(!I)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:t}function C(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=C(e),t!==null)return t;e=e.sibling}return null}var D=Object.assign,O=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),we=Symbol.for("react.consumer"),X=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var $=Symbol.for("react.client.reference");function H(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case w:return"Profiler";case z:return"StrictMode";case J:return"Suspense";case ue:return"SuspenseList";case E:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case K:return"Portal";case X:return e.displayName||"Context";case we:return(e._context.displayName||"Context")+".Consumer";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oe:return t=e.displayName||null,t!==null?t:H(e.type)||"Memo";case ie:t=e._payload,e=e._init;try{return H(e(t))}catch{}}return null}var Pe=Array.isArray,ae=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ce=[],fe=-1;function k(e){return{current:e}}function A(e){0>fe||(e.current=Ce[fe],Ce[fe]=null,fe--)}function W(e,t){fe++,Ce[fe]=e.current,e.current=t}var q=k(null),te=k(null),xe=k(null),ee=k(null);function Ie(e,t){switch(W(xe,t),W(te,e),W(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?mg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=mg(t),e=bg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(q),W(q,e)}function _e(){A(q),A(te),A(xe)}function Fe(e){e.memoizedState!==null&&W(ee,e);var t=q.current,o=bg(t,e.type);t!==o&&(W(te,e),W(q,o))}function nt(e){te.current===e&&(A(q),A(te)),ee.current===e&&(A(ee),Cf._currentValue=pe)}var lt,kt;function It(e){if(lt===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);lt=t&&t[1]||"",kt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+e+kt}var ne=!1;function jt(e,t){if(!e||ne)return"";ne=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(t){var At=function(){throw Error()};if(Object.defineProperty(At.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(At,[])}catch(gt){var st=gt}Reflect.construct(e,[],At)}else{try{At.call()}catch(gt){st=gt}e.call(At.prototype)}}else{try{throw Error()}catch(gt){st=gt}(At=e())&&typeof At.catch=="function"&&At.catch(function(){})}}catch(gt){if(gt&&st&&typeof gt.stack=="string")return[gt.stack,st.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),I=m[0],se=m[1];if(I&&se){var Oe=I.split(`
`),ot=se.split(`
`);for(h=u=0;u<Oe.length&&!Oe[u].includes("DetermineComponentFrameRoot");)u++;for(;h<ot.length&&!ot[h].includes("DetermineComponentFrameRoot");)h++;if(u===Oe.length||h===ot.length)for(u=Oe.length-1,h=ot.length-1;1<=u&&0<=h&&Oe[u]!==ot[h];)h--;for(;1<=u&&0<=h;u--,h--)if(Oe[u]!==ot[h]){if(u!==1||h!==1)do if(u--,h--,0>h||Oe[u]!==ot[h]){var vt=`
`+Oe[u].replace(" at new "," at ");return e.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",e.displayName)),vt}while(1<=u&&0<=h);break}}}finally{ne=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?It(o):""}function Qt(e,t){switch(e.tag){case 26:case 27:case 5:return It(e.type);case 16:return It("Lazy");case 13:return e.child!==t&&t!==null?It("Suspense Fallback"):It("Suspense");case 19:return It("SuspenseList");case 0:case 15:return jt(e.type,!1);case 11:return jt(e.type.render,!1);case 1:return jt(e.type,!0);case 31:return It("Activity");default:return""}}function Wt(e){try{var t="",o=null;do t+=Qt(e,o),o=e,e=e.return;while(e);return t}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var xt=Object.prototype.hasOwnProperty,Je=i.unstable_scheduleCallback,Gt=i.unstable_cancelCallback,un=i.unstable_shouldYield,Zt=i.unstable_requestPaint,_n=i.unstable_now,Rt=i.unstable_getCurrentPriorityLevel,Le=i.unstable_ImmediatePriority,ke=i.unstable_UserBlockingPriority,Xe=i.unstable_NormalPriority,et=i.unstable_LowPriority,Pt=i.unstable_IdlePriority,St=i.log,_t=i.unstable_setDisableYieldValue,Ut=null,qt=null;function Xt(e){if(typeof St=="function"&&_t(e),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Ut,e)}catch{}}var it=Math.clz32?Math.clz32:Kt,an=Math.log,Bt=Math.LN2;function Kt(e){return e>>>=0,e===0?32:31-(an(e)/Bt|0)|0}var dn=256,ti=262144,Nn=4194304;function xn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ot(e,t,o){var u=e.pendingLanes;if(u===0)return 0;var h=0,m=e.suspendedLanes,I=e.pingedLanes;e=e.warmLanes;var se=u&134217727;return se!==0?(u=se&~m,u!==0?h=xn(u):(I&=se,I!==0?h=xn(I):o||(o=se&~e,o!==0&&(h=xn(o))))):(se=u&~m,se!==0?h=xn(se):I!==0?h=xn(I):o||(o=u&~e,o!==0&&(h=xn(o)))),h===0?0:t!==0&&t!==h&&(t&m)===0&&(m=h&-h,o=t&-t,m>=o||m===32&&(o&4194048)!==0)?t:h}function ji(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function In(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function er(){var e=Nn;return Nn<<=1,(Nn&62914560)===0&&(Nn=4194304),e}function Gi(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Ft(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pi(e,t,o,u,h,m){var I=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var se=e.entanglements,Oe=e.expirationTimes,ot=e.hiddenUpdates;for(o=I&~o;0<o;){var vt=31-it(o),At=1<<vt;se[vt]=0,Oe[vt]=-1;var st=ot[vt];if(st!==null)for(ot[vt]=null,vt=0;vt<st.length;vt++){var gt=st[vt];gt!==null&&(gt.lane&=-536870913)}o&=~At}u!==0&&gi(e,u,0),m!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=m&~(I&~t))}function gi(e,t,o){e.pendingLanes|=t,e.suspendedLanes&=~t;var u=31-it(t);e.entangledLanes|=t,e.entanglements[u]=e.entanglements[u]|1073741824|o&261930}function Et(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var u=31-it(o),h=1<<u;h&t|e[u]&t&&(e[u]|=t),o&=~h}}function Ke(e,t){var o=t&-t;return o=(o&42)!==0?1:Vt(o),(o&(e.suspendedLanes|t))!==0?0:o}function Vt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $t(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function On(){var e=ve.p;return e!==0?e:(e=window.event,e===void 0?32:qg(e.type))}function En(e,t){var o=ve.p;try{return ve.p=e,t()}finally{ve.p=o}}var Hi=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Hi,ai="__reactProps$"+Hi,Li="__reactContainer$"+Hi,tr="__reactEvents$"+Hi,co="__reactListeners$"+Hi,pl="__reactHandles$"+Hi,ko="__reactResources$"+Hi,No="__reactMarker$"+Hi;function is(e){delete e[Gn],delete e[ai],delete e[tr],delete e[co],delete e[pl]}function Zn(e){var t=e[Gn];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Li]||o[Gn]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=kg(e);e!==null;){if(o=e[Gn])return o;e=kg(e)}return t}e=o,o=e.parentNode}return null}function ka(e){if(e=e[Gn]||e[Li]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function bi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function uo(e){var t=e[ko];return t||(t=e[ko]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Fn(e){e[No]=!0}var Ns=new Set,xi={};function Xa(e,t){fo(e,t),fo(e+"Capture",t)}function fo(e,t){for(xi[e]=t,e=0;e<t.length;e++)Ns.add(t[e])}var As=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zs={},Ao={};function Cc(e){return xt.call(Ao,e)?!0:xt.call(zs,e)?!1:As.test(e)?Ao[e]=!0:(zs[e]=!0,!1)}function ar(e,t,o){if(Cc(t))if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var u=t.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+o)}}function Ps(e,t,o){if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+o)}}function Wn(e,t,o,u){if(u===null)e.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(t,o,""+u)}}function Hn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _s(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qo(e,t,o){var u=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,m=u.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(I){o=""+I,m.call(this,I)}}),Object.defineProperty(e,t,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(I){o=""+I},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function po(e){if(!e._valueTracker){var t=_s(e)?"checked":"value";e._valueTracker=qo(e,t,""+e[t])}}function Oa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),u="";return e&&(u=_s(e)?e.checked?"true":"false":e.value),e=u,e!==o?(t.setValue(e),!0):!1}function vi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Wi=/[\n"\\]/g;function yi(e){return e.replace(Wi,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function _r(e,t,o,u,h,m,I,se){e.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?e.type=I:e.removeAttribute("type"),t!=null?I==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Hn(t)):e.value!==""+Hn(t)&&(e.value=""+Hn(t)):I!=="submit"&&I!=="reset"||e.removeAttribute("value"),t!=null?Ea(e,I,Hn(t)):o!=null?Ea(e,I,Hn(o)):u!=null&&e.removeAttribute("value"),h==null&&m!=null&&(e.defaultChecked=!!m),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?e.name=""+Hn(se):e.removeAttribute("name")}function sc(e,t,o,u,h,m,I,se){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),t!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||t!=null)){po(e);return}o=o!=null?""+Hn(o):"",t=t!=null?""+Hn(t):o,se||t===e.value||(e.value=t),e.defaultValue=t}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=se?e.checked:!!u,e.defaultChecked=!!u,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(e.name=I),po(e)}function Ea(e,t,o){t==="number"&&vi(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Na(e,t,o,u){if(e=e.options,t){t={};for(var h=0;h<o.length;h++)t["$"+o[h]]=!0;for(o=0;o<e.length;o++)h=t.hasOwnProperty("$"+e[o].value),e[o].selected!==h&&(e[o].selected=h),h&&u&&(e[o].defaultSelected=!0)}else{for(o=""+Hn(o),t=null,h=0;h<e.length;h++){if(e[h].value===o){e[h].selected=!0,u&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function hl(e,t,o){if(t!=null&&(t=""+Hn(t),t!==e.value&&(e.value=t),o==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=o!=null?""+Hn(o):""}function Ka(e,t,o,u){if(t==null){if(u!=null){if(o!=null)throw Error(s(92));if(Pe(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),t=o}o=Hn(t),e.defaultValue=o,u=e.textContent,u===o&&u!==""&&u!==null&&(e.value=u),po(e)}function ua(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Fa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zo(e,t,o){var u=t.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":u?e.setProperty(t,o):typeof o!="number"||o===0||Fa.has(t)?t==="float"?e.cssFloat=o:e[t]=(""+o).trim():e[t]=o+"px"}function Mt(e,t,o){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||t!=null&&t.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var h in t)u=t[h],t.hasOwnProperty(h)&&o[h]!==u&&zo(e,h,u)}else for(var m in t)t.hasOwnProperty(m)&&zo(e,m,t[m])}function Fi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ur(e){return Xs.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ho(){}var or=null;function nr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rs=null,Vn=null;function oi(e){var t=ka(e);if(t&&(e=t.stateNode)){var o=e[ai]||null;e:switch(e=t.stateNode,t.type){case"input":if(_r(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+yi(""+t)+'"][type="radio"]'),t=0;t<o.length;t++){var u=o[t];if(u!==e&&u.form===e.form){var h=u[ai]||null;if(!h)throw Error(s(90));_r(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(t=0;t<o.length;t++)u=o[t],u.form===e.form&&Oa(u)}break e;case"textarea":hl(e,o.value,o.defaultValue);break e;case"select":t=o.value,t!=null&&Na(e,!!o.multiple,t,!1)}}}var An=!1;function lc(e,t,o){if(An)return e(t,o);An=!0;try{var u=e(t);return u}finally{if(An=!1,(rs!==null||Vn!==null)&&(fp(),rs&&(t=rs,e=Vn,Vn=rs=null,oi(t),e)))for(t=0;t<e.length;t++)oi(e[t])}}function Za(e,t){var o=e.stateNode;if(o===null)return null;var u=o[ai]||null;if(u===null)return null;o=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,t,typeof o));return o}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cn=!1;if(gn)try{var li={};Object.defineProperty(li,"passive",{get:function(){Cn=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Cn=!1}var hn=null,ci=null,yn=null;function hu(){if(yn)return yn;var e,t=ci,o=t.length,u,h="value"in hn?hn.value:hn.textContent,m=h.length;for(e=0;e<o&&t[e]===h[e];e++);var I=o-e;for(u=1;u<=I&&t[o-u]===h[m-u];u++);return yn=h.slice(e,1<u?1-u:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function _i(){return!0}function on(){return!1}function Xn(e){function t(o,u,h,m,I){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=I,this.currentTarget=null;for(var se in e)e.hasOwnProperty(se)&&(o=e[se],this[se]=o?o(m):m[se]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?_i:on,this.isPropagationStopped=on,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),t}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=Xn(Aa),Kr=D({},Aa,{view:0,detail:0}),Ds=Xn(Kr),ho,_o,Rs,Vl=D({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(ho=e.screenX-Rs.screenX,_o=e.screenY-Rs.screenY):_o=ho=0,Rs=e),ho)},movementY:function(e){return"movementY"in e?e.movementY:_o}}),gl=Xn(Vl),Ks=D({},Vl,{dataTransfer:0}),as=Xn(Ks),gu=D({},Kr,{relatedTarget:0}),bn=Xn(gu),os=D({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),S=Xn(os),U=D({},Aa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Se=Xn(U),Be=D({},Aa,{data:0}),Ve=Xn(Be),ut={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sn[e])?!!t[e]:!1}function vn(){return jn}var ni=D({},Kr,{key:function(e){if(e.key){var t=ut[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jt(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return e.type==="keypress"?Jt(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jt(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wi=Xn(ni),qr=D({},Vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Di=Xn(qr),Xi=D({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn}),Mi=Xn(Xi),Nr=D({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),sr=Xn(Nr),Wo=D({},Vl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=Xn(Wo),Ls=D({},Aa,{newState:0,oldState:0}),da=Xn(Ls),Ms=[9,13,27,32],Dr=gn&&"CompositionEvent"in window,Ja=null;gn&&"documentMode"in document&&(Ja=document.documentMode);var fa=gn&&"TextEvent"in window&&!Ja,Do=gn&&(!Dr||Ja&&8<Ja&&11>=Ja),ui=" ",$o=!1;function Hl(e,t){switch(e){case"keyup":return Ms.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ro=!1;function za(e,t){switch(e){case"compositionend":return kc(t);case"keypress":return t.which!==32?null:($o=!0,ui);case"textInput":return e=t.data,e===ui&&$o?null:e;default:return null}}function ss(e,t){if(Ro)return e==="compositionend"||!Dr&&Hl(e,t)?(e=hu(),yn=ci=hn=null,Ro=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Do&&t.locale!=="ko"?null:t.data;default:return null}}var Wl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ls(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wl[e.type]:t==="textarea"}function Qa(e,t,o,u){rs?Vn?Vn.push(u):Vn=[u]:rs=u,t=bp(t,"onChange"),0<t.length&&(o=new Po("onChange","change",null,o,u),e.push({event:o,listeners:t}))}var na=null,Lo=null;function Is(e){fg(e,0)}function Yo(e){var t=bi(e);if(Oa(t))return e}function Go(e,t){if(e==="change")return t}var eo=!1;if(gn){var ia;if(gn){var cs="oninput"in document;if(!cs){var go=document.createElement("div");go.setAttribute("oninput","return;"),cs=typeof go.oninput=="function"}ia=cs}else ia=!1;eo=ia&&(!document.documentMode||9<document.documentMode)}function Ni(){na&&(na.detachEvent("onpropertychange",us),Lo=na=null)}function us(e){if(e.propertyName==="value"&&Yo(Lo)){var t=[];Qa(t,Lo,e,nr(e)),lc(Is,t)}}function lr(e,t,o){e==="focusin"?(Ni(),na=t,Lo=o,na.attachEvent("onpropertychange",us)):e==="focusout"&&Ni()}function wr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yo(Lo)}function Nc(e,t){if(e==="click")return Yo(t)}function xo(e,t){if(e==="input"||e==="change")return Yo(t)}function Zs(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ma=typeof Object.is=="function"?Object.is:Zs;function xl(e,t){if(ma(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),u=Object.keys(t);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!xt.call(t,h)||!ma(e[h],t[h]))return!1}return!0}function Ac(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mo(e,t){var o=Ac(e);e=0;for(var u;o;){if(o.nodeType===3){if(u=e+o.textContent.length,e<=t&&u>=t)return{node:o,offset:t-e};e=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ac(o)}}function Bs(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bs(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ds(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=vi(e.document);t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=vi(e.document)}return t}function to(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Pa=gn&&"documentMode"in document&&11>=document.documentMode,yo=null,fs=null,no=null,Xo=!1;function Ki(e,t,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xo||yo==null||yo!==vi(u)||(u=yo,"selectionStart"in u&&to(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),no&&xl(no,u)||(no=u,u=bp(fs,"onSelect"),0<u.length&&(t=new Po("onSelect","select",null,t,o),e.push({event:t,listeners:u}),t.target=yo)))}function Ii(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Sr={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionrun:Ii("Transition","TransitionRun"),transitionstart:Ii("Transition","TransitionStart"),transitioncancel:Ii("Transition","TransitionCancel"),transitionend:Ii("Transition","TransitionEnd")},ra={},Js={};gn&&(Js=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function Os(e){if(ra[e])return ra[e];if(!Sr[e])return e;var t=Sr[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in Js)return ra[e]=t[o];return e}var aa=Os("animationend"),io=Os("animationiteration"),Qs=Os("animationstart"),Es=Os("transitionrun"),el=Os("transitionstart"),yl=Os("transitioncancel"),tl=Os("transitionend"),Io=new Map,nl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nl.push("scrollEnd");function hr(e,t){Io.set(e,t),Xa(t,[e])}var Ti=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Vr=[],Hr=0,mo=0;function Wc(){for(var e=Hr,t=mo=Hr=0;t<e;){var o=Vr[t];Vr[t++]=null;var u=Vr[t];Vr[t++]=null;var h=Vr[t];Vr[t++]=null;var m=Vr[t];if(Vr[t++]=null,u!==null&&h!==null){var I=u.pending;I===null?h.next=h:(h.next=I.next,I.next=h),u.pending=h}m!==0&&$i(o,h,m)}}function Fs(e,t,o,u){Vr[Hr++]=e,Vr[Hr++]=t,Vr[Hr++]=o,Vr[Hr++]=u,mo|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function $c(e,t,o,u){return Fs(e,t,o,u),cr(e)}function ps(e,t){return Fs(e,null,null,t),cr(e)}function $i(e,t,o){e.lanes|=o;var u=e.alternate;u!==null&&(u.lanes|=o);for(var h=!1,m=e.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(h=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,h&&t!==null&&(h=31-it(o),e=m.hiddenUpdates,u=e[h],u===null?e[h]=[t]:u.push(t),t.lane=o|536870912),m):null}function cr(e){if(50<ta)throw ta=0,Jn=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ba={};function Yc(e,t,o,u){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ua(e,t,o,u){return new Yc(e,t,o,u)}function zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bo(e,t){var o=e.alternate;return o===null?(o=Ua(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function cc(e,t){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,t=o.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function il(e,t,o,u,h,m){var I=0;if(u=e,typeof e=="function")zc(e)&&(I=1);else if(typeof e=="string")I=xm(e,o,q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case E:return e=Ua(31,o,t,h),e.elementType=E,e.lanes=m,e;case R:return ml(o.children,h,m,t);case z:I=8,h|=24;break;case w:return e=Ua(12,o,t,h|2),e.elementType=w,e.lanes=m,e;case J:return e=Ua(13,o,t,h),e.elementType=J,e.lanes=m,e;case ue:return e=Ua(19,o,t,h),e.elementType=ue,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:I=10;break e;case we:I=9;break e;case G:I=11;break e;case oe:I=14;break e;case ie:I=16,u=null;break e}I=29,o=Error(s(130,e===null?"null":typeof e,"")),u=null}return t=Ua(I,o,t,h),t.elementType=e,t.type=u,t.lanes=m,t}function ml(e,t,o,u){return e=Ua(7,e,u,t),e.lanes=o,e}function Us(e,t,o){return e=Ua(6,e,null,t),e.lanes=o,e}function $l(e){var t=Ua(18,null,null,0);return t.stateNode=e,t}function hs(e,t,o){return t=Ua(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var bl=new WeakMap;function vo(e,t){if(typeof e=="object"&&e!==null){var o=bl.get(e);return o!==void 0?o:(t={value:e,source:t,stack:Wt(t)},bl.set(e,t),t)}return{value:e,source:t,stack:Wt(t)}}var vl=[],Ko=0,rl=null,Pc=0,oa=[],Zo=0,Zr=null,wo=1,Jo="";function va(e,t){vl[Ko++]=Pc,vl[Ko++]=rl,rl=e,Pc=t}function Yl(e,t,o){oa[Zo++]=wo,oa[Zo++]=Jo,oa[Zo++]=Zr,Zr=e;var u=wo;e=Jo;var h=32-it(u)-1;u&=~(1<<h),o+=1;var m=32-it(t)+h;if(30<m){var I=h-h%5;m=(u&(1<<I)-1).toString(32),u>>=I,h-=I,wo=1<<32-it(t)+h|o<<h|u,Jo=m+e}else wo=1<<m|o<<h|u,Jo=e}function _c(e){e.return!==null&&(va(e,1),Yl(e,1,0))}function wl(e){for(;e===rl;)rl=vl[--Ko],vl[Ko]=null,Pc=vl[--Ko],vl[Ko]=null;for(;e===Zr;)Zr=oa[--Zo],oa[Zo]=null,Jo=oa[--Zo],oa[Zo]=null,wo=oa[--Zo],oa[Zo]=null}function al(e,t){oa[Zo++]=wo,oa[Zo++]=Jo,oa[Zo++]=Zr,wo=t.id,Jo=t.overflow,Zr=e}var qa=null,jr=null,Ai=!1,So=null,Jr=!1,Qo=Error(s(519));function Sl(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pa(vo(t,e)),Qo}function xu(e){var t=e.stateNode,o=e.type,u=e.memoizedProps;switch(t[Gn]=e,t[ai]=u,o){case"dialog":Vi("cancel",t),Vi("close",t);break;case"iframe":case"object":case"embed":Vi("load",t);break;case"video":case"audio":for(o=0;o<vf.length;o++)Vi(vf[o],t);break;case"source":Vi("error",t);break;case"img":case"image":case"link":Vi("error",t),Vi("load",t);break;case"details":Vi("toggle",t);break;case"input":Vi("invalid",t),sc(t,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Vi("invalid",t);break;case"textarea":Vi("invalid",t),Ka(t,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||t.textContent===""+o||u.suppressHydrationWarning===!0||xg(t.textContent,o)?(u.popover!=null&&(Vi("beforetoggle",t),Vi("toggle",t)),u.onScroll!=null&&Vi("scroll",t),u.onScrollEnd!=null&&Vi("scrollend",t),u.onClick!=null&&(t.onclick=Ho),t=!0):t=!1,t||Sl(e,!0)}function ol(e){for(qa=e.return;qa;)switch(qa.tag){case 5:case 31:case 13:Jr=!1;return;case 27:case 3:Jr=!0;return;default:qa=qa.return}}function Rr(e){if(e!==qa)return!1;if(!Ai)return ol(e),Ai=!0,!1;var t=e.tag,o;if((o=t!==3&&t!==27)&&((o=t===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||jh(e.type,e.memoizedProps)),o=!o),o&&jr&&Sl(e),ol(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));jr=Cg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));jr=Cg(e)}else t===27?(t=jr,Ou(e.type)?(e=Ah,Ah=null,jr=e):jr=t):jr=qa?nc(e.stateNode.nextSibling):null;return!0}function sa(){jr=qa=null,Ai=!1}function sl(){var e=So;return e!==null&&(zt===null?zt=e:zt.push.apply(zt,e),So=null),e}function pa(e){So===null?So=[e]:So.push(e)}var yu=k(null),jl=null,mr=null;function _a(e,t,o){W(yu,t._currentValue),t._currentValue=o}function br(e){e._currentValue=yu.current,A(yu)}function ro(e,t,o){for(;e!==null;){var u=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,u!==null&&(u.childLanes|=t)):u!==null&&(u.childLanes&t)!==t&&(u.childLanes|=t),e===o)break;e=e.return}}function Qr(e,t,o,u){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var m=h.dependencies;if(m!==null){var I=h.child;m=m.firstContext;e:for(;m!==null;){var se=m;m=h;for(var Oe=0;Oe<t.length;Oe++)if(se.context===t[Oe]){m.lanes|=o,se=m.alternate,se!==null&&(se.lanes|=o),ro(m.return,o,e),u||(I=null);break e}m=se.next}}else if(h.tag===18){if(I=h.return,I===null)throw Error(s(341));I.lanes|=o,m=I.alternate,m!==null&&(m.lanes|=o),ro(I,o,e),I=null}else I=h.child;if(I!==null)I.return=h;else for(I=h;I!==null;){if(I===e){I=null;break}if(h=I.sibling,h!==null){h.return=I.return,I=h;break}I=I.return}h=I}}function Da(e,t,o,u){e=null;for(var h=t,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var I=h.alternate;if(I===null)throw Error(s(387));if(I=I.memoizedProps,I!==null){var se=h.type;ma(h.pendingProps.value,I.value)||(e!==null?e.push(se):e=[se])}}else if(h===ee.current){if(I=h.alternate,I===null)throw Error(s(387));I.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Cf):e=[Cf])}h=h.return}e!==null&&Qr(t,e,o,u),t.flags|=262144}function Ra(e){for(e=e.firstContext;e!==null;){if(!ma(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function La(e){jl=e,mr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zi(e){return es(jl,e)}function Bo(e,t){return jl===null&&La(e),es(e,t)}function es(e,t){var o=t._currentValue;if(t={context:t,memoizedValue:o,next:null},mr===null){if(e===null)throw Error(s(308));mr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else mr=mr.next=t;return o}var Tl=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(o,u){e.push(u)}};this.abort=function(){t.aborted=!0,e.forEach(function(o){return o()})}},gs=i.unstable_scheduleCallback,Cl=i.unstable_NormalPriority,Bi={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Va(){return{controller:new Tl,data:new Map,refCount:0}}function Ma(e){e.refCount--,e.refCount===0&&gs(Cl,function(){e.controller.abort()})}var ao=null,jo=0,f=0,g=null;function j(e,t){if(ao===null){var o=ao=[];jo=0,f=hh(),g={status:"pending",value:void 0,then:function(u){o.push(u)}}}return jo++,t.then(_,_),t}function _(){if(--jo===0&&ao!==null){g!==null&&(g.status="fulfilled");var e=ao;ao=null,f=0,g=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function V(e,t){var o=[],u={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return e.then(function(){u.status="fulfilled",u.value=t;for(var h=0;h<o.length;h++)(0,o[h])(t)},function(h){for(u.status="rejected",u.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),u}var Z=ae.S;ae.S=function(e,t){Yn=_n(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&j(e,t),Z!==null&&Z(e,t)};var Q=k(null);function he(){var e=Q.current;return e!==null?e:ge.pooledCache}function be(e,t){t===null?W(Q,Q.current):W(Q,t.pool)}function je(){var e=he();return e===null?null:{parent:Bi._currentValue,pool:e}}var Ee=Error(s(460)),rt=Error(s(474)),Te=Error(s(542)),He={then:function(){}};function Ye(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dt(e,t,o){switch(o=e[o],o===void 0?e.push(t):o!==t&&(t.then(Ho,Ho),t=o),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,bt(e),e;default:if(typeof t.status=="string")t.then(Ho,Ho);else{if(e=ge,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(u){if(t.status==="pending"){var h=t;h.status="fulfilled",h.value=u}},function(u){if(t.status==="pending"){var h=t;h.status="rejected",h.reason=u}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,bt(e),e}throw yt=t,Ee}}function Qe(e){try{var t=e._init;return t(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(yt=o,Ee):o}}var yt=null;function pt(){if(yt===null)throw Error(s(459));var e=yt;return yt=null,e}function bt(e){if(e===Ee||e===Te)throw Error(s(483))}var Nt=null,fn=0;function cn(e){var t=fn;return fn+=1,Nt===null&&(Nt=[]),dt(Nt,e,t)}function Qn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function pn(e,t){throw t.$$typeof===O?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ln(e){function t(Ze,qe){if(e){var at=Ze.deletions;at===null?(Ze.deletions=[qe],Ze.flags|=16):at.push(qe)}}function o(Ze,qe){if(!e)return null;for(;qe!==null;)t(Ze,qe),qe=qe.sibling;return null}function u(Ze){for(var qe=new Map;Ze!==null;)Ze.key!==null?qe.set(Ze.key,Ze):qe.set(Ze.index,Ze),Ze=Ze.sibling;return qe}function h(Ze,qe){return Ze=bo(Ze,qe),Ze.index=0,Ze.sibling=null,Ze}function m(Ze,qe,at){return Ze.index=at,e?(at=Ze.alternate,at!==null?(at=at.index,at<qe?(Ze.flags|=67108866,qe):at):(Ze.flags|=67108866,qe)):(Ze.flags|=1048576,qe)}function I(Ze){return e&&Ze.alternate===null&&(Ze.flags|=67108866),Ze}function se(Ze,qe,at,Ct){return qe===null||qe.tag!==6?(qe=Us(at,Ze.mode,Ct),qe.return=Ze,qe):(qe=h(qe,at),qe.return=Ze,qe)}function Oe(Ze,qe,at,Ct){var qn=at.type;return qn===R?vt(Ze,qe,at.props.children,Ct,at.key):qe!==null&&(qe.elementType===qn||typeof qn=="object"&&qn!==null&&qn.$$typeof===ie&&Qe(qn)===qe.type)?(qe=h(qe,at.props),Qn(qe,at),qe.return=Ze,qe):(qe=il(at.type,at.key,at.props,null,Ze.mode,Ct),Qn(qe,at),qe.return=Ze,qe)}function ot(Ze,qe,at,Ct){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==at.containerInfo||qe.stateNode.implementation!==at.implementation?(qe=hs(at,Ze.mode,Ct),qe.return=Ze,qe):(qe=h(qe,at.children||[]),qe.return=Ze,qe)}function vt(Ze,qe,at,Ct,qn){return qe===null||qe.tag!==7?(qe=ml(at,Ze.mode,Ct,qn),qe.return=Ze,qe):(qe=h(qe,at),qe.return=Ze,qe)}function At(Ze,qe,at){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=Us(""+qe,Ze.mode,at),qe.return=Ze,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case T:return at=il(qe.type,qe.key,qe.props,null,Ze.mode,at),Qn(at,qe),at.return=Ze,at;case K:return qe=hs(qe,Ze.mode,at),qe.return=Ze,qe;case ie:return qe=Qe(qe),At(Ze,qe,at)}if(Pe(qe)||L(qe))return qe=ml(qe,Ze.mode,at,null),qe.return=Ze,qe;if(typeof qe.then=="function")return At(Ze,cn(qe),at);if(qe.$$typeof===X)return At(Ze,Bo(Ze,qe),at);pn(Ze,qe)}return null}function st(Ze,qe,at,Ct){var qn=qe!==null?qe.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return qn!==null?null:se(Ze,qe,""+at,Ct);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case T:return at.key===qn?Oe(Ze,qe,at,Ct):null;case K:return at.key===qn?ot(Ze,qe,at,Ct):null;case ie:return at=Qe(at),st(Ze,qe,at,Ct)}if(Pe(at)||L(at))return qn!==null?null:vt(Ze,qe,at,Ct,null);if(typeof at.then=="function")return st(Ze,qe,cn(at),Ct);if(at.$$typeof===X)return st(Ze,qe,Bo(Ze,at),Ct);pn(Ze,at)}return null}function gt(Ze,qe,at,Ct,qn){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return Ze=Ze.get(at)||null,se(qe,Ze,""+Ct,qn);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case T:return Ze=Ze.get(Ct.key===null?at:Ct.key)||null,Oe(qe,Ze,Ct,qn);case K:return Ze=Ze.get(Ct.key===null?at:Ct.key)||null,ot(qe,Ze,Ct,qn);case ie:return Ct=Qe(Ct),gt(Ze,qe,at,Ct,qn)}if(Pe(Ct)||L(Ct))return Ze=Ze.get(at)||null,vt(qe,Ze,Ct,qn,null);if(typeof Ct.then=="function")return gt(Ze,qe,at,cn(Ct),qn);if(Ct.$$typeof===X)return gt(Ze,qe,at,Bo(qe,Ct),qn);pn(qe,Ct)}return null}function mn(Ze,qe,at,Ct){for(var qn=null,xr=null,Pn=qe,ki=qe=0,Yi=null;Pn!==null&&ki<at.length;ki++){Pn.index>ki?(Yi=Pn,Pn=null):Yi=Pn.sibling;var yr=st(Ze,Pn,at[ki],Ct);if(yr===null){Pn===null&&(Pn=Yi);break}e&&Pn&&yr.alternate===null&&t(Ze,Pn),qe=m(yr,qe,ki),xr===null?qn=yr:xr.sibling=yr,xr=yr,Pn=Yi}if(ki===at.length)return o(Ze,Pn),Ai&&va(Ze,ki),qn;if(Pn===null){for(;ki<at.length;ki++)Pn=At(Ze,at[ki],Ct),Pn!==null&&(qe=m(Pn,qe,ki),xr===null?qn=Pn:xr.sibling=Pn,xr=Pn);return Ai&&va(Ze,ki),qn}for(Pn=u(Pn);ki<at.length;ki++)Yi=gt(Pn,Ze,ki,at[ki],Ct),Yi!==null&&(e&&Yi.alternate!==null&&Pn.delete(Yi.key===null?ki:Yi.key),qe=m(Yi,qe,ki),xr===null?qn=Yi:xr.sibling=Yi,xr=Yi);return e&&Pn.forEach(function(Vu){return t(Ze,Vu)}),Ai&&va(Ze,ki),qn}function Kn(Ze,qe,at,Ct){if(at==null)throw Error(s(151));for(var qn=null,xr=null,Pn=qe,ki=qe=0,Yi=null,yr=at.next();Pn!==null&&!yr.done;ki++,yr=at.next()){Pn.index>ki?(Yi=Pn,Pn=null):Yi=Pn.sibling;var Vu=st(Ze,Pn,yr.value,Ct);if(Vu===null){Pn===null&&(Pn=Yi);break}e&&Pn&&Vu.alternate===null&&t(Ze,Pn),qe=m(Vu,qe,ki),xr===null?qn=Vu:xr.sibling=Vu,xr=Vu,Pn=Yi}if(yr.done)return o(Ze,Pn),Ai&&va(Ze,ki),qn;if(Pn===null){for(;!yr.done;ki++,yr=at.next())yr=At(Ze,yr.value,Ct),yr!==null&&(qe=m(yr,qe,ki),xr===null?qn=yr:xr.sibling=yr,xr=yr);return Ai&&va(Ze,ki),qn}for(Pn=u(Pn);!yr.done;ki++,yr=at.next())yr=gt(Pn,Ze,ki,yr.value,Ct),yr!==null&&(e&&yr.alternate!==null&&Pn.delete(yr.key===null?ki:yr.key),qe=m(yr,qe,ki),xr===null?qn=yr:xr.sibling=yr,xr=yr);return e&&Pn.forEach(function(Nm){return t(Ze,Nm)}),Ai&&va(Ze,ki),qn}function Fr(Ze,qe,at,Ct){if(typeof at=="object"&&at!==null&&at.type===R&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case T:e:{for(var qn=at.key;qe!==null;){if(qe.key===qn){if(qn=at.type,qn===R){if(qe.tag===7){o(Ze,qe.sibling),Ct=h(qe,at.props.children),Ct.return=Ze,Ze=Ct;break e}}else if(qe.elementType===qn||typeof qn=="object"&&qn!==null&&qn.$$typeof===ie&&Qe(qn)===qe.type){o(Ze,qe.sibling),Ct=h(qe,at.props),Qn(Ct,at),Ct.return=Ze,Ze=Ct;break e}o(Ze,qe);break}else t(Ze,qe);qe=qe.sibling}at.type===R?(Ct=ml(at.props.children,Ze.mode,Ct,at.key),Ct.return=Ze,Ze=Ct):(Ct=il(at.type,at.key,at.props,null,Ze.mode,Ct),Qn(Ct,at),Ct.return=Ze,Ze=Ct)}return I(Ze);case K:e:{for(qn=at.key;qe!==null;){if(qe.key===qn)if(qe.tag===4&&qe.stateNode.containerInfo===at.containerInfo&&qe.stateNode.implementation===at.implementation){o(Ze,qe.sibling),Ct=h(qe,at.children||[]),Ct.return=Ze,Ze=Ct;break e}else{o(Ze,qe);break}else t(Ze,qe);qe=qe.sibling}Ct=hs(at,Ze.mode,Ct),Ct.return=Ze,Ze=Ct}return I(Ze);case ie:return at=Qe(at),Fr(Ze,qe,at,Ct)}if(Pe(at))return mn(Ze,qe,at,Ct);if(L(at)){if(qn=L(at),typeof qn!="function")throw Error(s(150));return at=qn.call(at),Kn(Ze,qe,at,Ct)}if(typeof at.then=="function")return Fr(Ze,qe,cn(at),Ct);if(at.$$typeof===X)return Fr(Ze,qe,Bo(Ze,at),Ct);pn(Ze,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,qe!==null&&qe.tag===6?(o(Ze,qe.sibling),Ct=h(qe,at),Ct.return=Ze,Ze=Ct):(o(Ze,qe),Ct=Us(at,Ze.mode,Ct),Ct.return=Ze,Ze=Ct),I(Ze)):o(Ze,qe)}return function(Ze,qe,at,Ct){try{fn=0;var qn=Fr(Ze,qe,at,Ct);return Nt=null,qn}catch(Pn){if(Pn===Ee||Pn===Te)throw Pn;var xr=Ua(29,Pn,null,Ze.mode);return xr.lanes=Ct,xr.return=Ze,xr}finally{}}}var Ci=Ln(!0),$n=Ln(!1),tn=!1;function Ht(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ir(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Dn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function si(e,t,o){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(le&2)!==0){var h=u.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),u.pending=t,t=cr(e),$i(e,null,o),t}return Fs(e,u,t,o),cr(e)}function Ji(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194048)!==0)){var u=t.lanes;u&=e.pendingLanes,o|=u,t.lanes=o,Et(e,o)}}function ur(e,t){var o=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var I={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?h=m=I:m=m.next=I,o=o.next}while(o!==null);m===null?h=m=t:m=m.next=t}else h=m=t;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}var dr=!1;function mi(){if(dr){var e=g;if(e!==null)throw e}}function fr(e,t,o,u){dr=!1;var h=e.updateQueue;tn=!1;var m=h.firstBaseUpdate,I=h.lastBaseUpdate,se=h.shared.pending;if(se!==null){h.shared.pending=null;var Oe=se,ot=Oe.next;Oe.next=null,I===null?m=ot:I.next=ot,I=Oe;var vt=e.alternate;vt!==null&&(vt=vt.updateQueue,se=vt.lastBaseUpdate,se!==I&&(se===null?vt.firstBaseUpdate=ot:se.next=ot,vt.lastBaseUpdate=Oe))}if(m!==null){var At=h.baseState;I=0,vt=ot=Oe=null,se=m;do{var st=se.lane&-536870913,gt=st!==se.lane;if(gt?(de&st)===st:(u&st)===st){st!==0&&st===f&&(dr=!0),vt!==null&&(vt=vt.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var mn=e,Kn=se;st=t;var Fr=o;switch(Kn.tag){case 1:if(mn=Kn.payload,typeof mn=="function"){At=mn.call(Fr,At,st);break e}At=mn;break e;case 3:mn.flags=mn.flags&-65537|128;case 0:if(mn=Kn.payload,st=typeof mn=="function"?mn.call(Fr,At,st):mn,st==null)break e;At=D({},At,st);break e;case 2:tn=!0}}st=se.callback,st!==null&&(e.flags|=64,gt&&(e.flags|=8192),gt=h.callbacks,gt===null?h.callbacks=[st]:gt.push(st))}else gt={lane:st,tag:se.tag,payload:se.payload,callback:se.callback,next:null},vt===null?(ot=vt=gt,Oe=At):vt=vt.next=gt,I|=st;if(se=se.next,se===null){if(se=h.shared.pending,se===null)break;gt=se,se=gt.next,gt.next=null,h.lastBaseUpdate=gt,h.shared.pending=null}}while(!0);vt===null&&(Oe=At),h.baseState=Oe,h.firstBaseUpdate=ot,h.lastBaseUpdate=vt,m===null&&(h.shared.lanes=0),Yt|=I,e.lanes=I,e.memoizedState=At}}function Lr(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Mr(e,t){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)Lr(o[e],t)}var di=k(null),ii=k(0);function vr(e,t){e=Tt,W(ii,e),W(di,t),Tt=e|t.baseLanes}function Ui(){W(ii,Tt),W(di,di.current)}function ha(){Tt=ii.current,A(di),A(ii)}var Tr=k(null),qi=null;function Wr(e){var t=e.alternate;W(Oi,Oi.current&1),W(Tr,e),qi===null&&(t===null||di.current!==null||t.memoizedState!==null)&&(qi=e)}function zi(e){W(Oi,Oi.current),W(Tr,e),qi===null&&(qi=e)}function Ar(e){e.tag===22?(W(Oi,Oi.current),W(Tr,e),qi===null&&(qi=e)):$r()}function $r(){W(Oi,Oi.current),W(Tr,Tr.current)}function pr(e){A(Tr),qi===e&&(qi=null),A(Oi)}var Oi=k(0);function wa(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||kh(o)||Nh(o)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yr=0,kn=null,zn=null,Ei=null,Ha=!1,Wa=!1,Sa=!1,ea=0,ll=0,qs=null,Dc=0;function gr(){throw Error(s(321))}function mu(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!ma(e[o],t[o]))return!1;return!0}function Gl(e,t,o,u,h,m){return Yr=m,kn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ae.H=e===null||e.memoizedState===null?uf:td,Sa=!1,m=o(u,h),Sa=!1,Wa&&(m=Vs(t,o,u,h)),Xl(e),m}function Xl(e){ae.H=ru;var t=zn!==null&&zn.next!==null;if(Yr=0,Ei=zn=kn=null,Ha=!1,ll=0,qs=null,t)throw Error(s(300));e===null||ja||(e=e.dependencies,e!==null&&Ra(e)&&(ja=!0))}function Vs(e,t,o,u){kn=e;var h=0;do{if(Wa&&(qs=null),ll=0,Wa=!1,25<=h)throw Error(s(301));if(h+=1,Ei=zn=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ae.H=nd,m=t(o,u)}while(Wa);return m}function Xu(){var e=ae.H,t=e.useState()[0];return t=typeof t.then=="function"?Nl(t):t,e=e.useState()[0],(zn!==null?zn.memoizedState:null)!==e&&(kn.flags|=1024),t}function Rc(){var e=ea!==0;return ea=0,e}function Gc(e,t,o){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o}function bu(e){if(Ha){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ha=!1}Yr=0,Ei=zn=kn=null,Wa=!1,ll=ea=0,qs=null}function Ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ei===null?kn.memoizedState=Ei=e:Ei=Ei.next=e,Ei}function Br(){if(zn===null){var e=kn.alternate;e=e!==null?e.memoizedState:null}else e=zn.next;var t=Ei===null?kn.memoizedState:Ei.next;if(t!==null)Ei=t,zn=e;else{if(e===null)throw kn.alternate===null?Error(s(467)):Error(s(310));zn=e,e={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Ei===null?kn.memoizedState=Ei=e:Ei=Ei.next=e}return Ei}function kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(e){var t=ll;return ll+=1,qs===null&&(qs=[]),e=dt(qs,e,t),t=kn,(Ei===null?t.memoizedState:Ei.next)===null&&(t=t.alternate,ae.H=t===null||t.memoizedState===null?uf:td),e}function uc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Nl(e);if(e.$$typeof===X)return Zi(e)}throw Error(s(438,String(e)))}function cl(e){var t=null,o=kn.updateQueue;if(o!==null&&(t=o.memoCache),t==null){var u=kn.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(t={data:u.data.map(function(h){return h.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),o===null&&(o=kl(),kn.updateQueue=o),o.memoCache=t,o=t.data[t.index],o===void 0)for(o=t.data[t.index]=Array(e),u=0;u<e;u++)o[u]=Y;return t.index++,o}function Hs(e,t){return typeof t=="function"?t(e):t}function Al(e){var t=Br();return Kl(t,zn,e)}function Kl(e,t,o){var u=e.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var h=e.baseQueue,m=u.pending;if(m!==null){if(h!==null){var I=h.next;h.next=m.next,m.next=I}t.baseQueue=h=m,u.pending=null}if(m=e.baseState,h===null)e.memoizedState=m;else{t=h.next;var se=I=null,Oe=null,ot=t,vt=!1;do{var At=ot.lane&-536870913;if(At!==ot.lane?(de&At)===At:(Yr&At)===At){var st=ot.revertLane;if(st===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),At===f&&(vt=!0);else if((Yr&st)===st){ot=ot.next,st===f&&(vt=!0);continue}else At={lane:0,revertLane:ot.revertLane,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},Oe===null?(se=Oe=At,I=m):Oe=Oe.next=At,kn.lanes|=st,Yt|=st;At=ot.action,Sa&&o(m,At),m=ot.hasEagerState?ot.eagerState:o(m,At)}else st={lane:At,revertLane:ot.revertLane,gesture:ot.gesture,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},Oe===null?(se=Oe=st,I=m):Oe=Oe.next=st,kn.lanes|=At,Yt|=At;ot=ot.next}while(ot!==null&&ot!==t);if(Oe===null?I=m:Oe.next=se,!ma(m,e.memoizedState)&&(ja=!0,vt&&(o=g,o!==null)))throw o;e.memoizedState=m,e.baseState=I,e.baseQueue=Oe,u.lastRenderedState=m}return h===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Xc(e){var t=Br(),o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var u=o.dispatch,h=o.pending,m=t.memoizedState;if(h!==null){o.pending=null;var I=h=h.next;do m=e(m,I.action),I=I.next;while(I!==h);ma(m,t.memoizedState)||(ja=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),o.lastRenderedState=m}return[m,u]}function Kc(e,t,o){var u=kn,h=Br(),m=Ai;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=t();var I=!ma((zn||h).memoizedState,o);if(I&&(h.memoizedState=o,ja=!0),h=h.queue,of(Zl.bind(null,u,h,e),[e]),h.getSnapshot!==t||I||Ei!==null&&Ei.memoizedState.tag&1){if(u.flags|=2048,Ql(9,{destroy:void 0},Lc.bind(null,u,h,o,t),null),ge===null)throw Error(s(349));m||(Yr&127)!==0||xs(u,t,o)}return o}function xs(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=kn.updateQueue,t===null?(t=kl(),kn.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function Lc(e,t,o,u){t.value=o,t.getSnapshot=u,Zc(t)&&dc(e)}function Zl(e,t,o){return o(function(){Zc(t)&&dc(e)})}function Zc(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!ma(e,o)}catch{return!0}}function dc(e){var t=ps(e,2);t!==null&&dl(t,e,2)}function Jl(e){var t=Ir();if(typeof e=="function"){var o=e;if(e=o(),Sa){Xt(!0);try{o()}finally{Xt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function vu(e,t,o,u){return e.baseState=o,Kl(e,zn,typeof u=="function"?u:Hs)}function Td(e,t,o,u,h){if(Cd(e))throw Error(s(485));if(e=t.action,e!==null){var m={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){m.listeners.push(I)}};ae.T!==null?o(!0):m.isTransition=!1,u(m),o=t.pending,o===null?(m.next=t.pending=m,Jc(t,m)):(m.next=o.next,t.pending=o.next=m)}}function Jc(e,t){var o=t.action,u=t.payload,h=e.state;if(t.isTransition){var m=ae.T,I={};ae.T=I;try{var se=o(h,u),Oe=ae.S;Oe!==null&&Oe(I,se),ys(e,t,se)}catch(ot){oo(e,t,ot)}finally{m!==null&&I.types!==null&&(m.types=I.types),ae.T=m}}else try{m=o(h,u),ys(e,t,m)}catch(ot){oo(e,t,ot)}}function ys(e,t,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Ws(e,t,u)},function(u){return oo(e,t,u)}):Ws(e,t,o)}function Ws(e,t,o){t.status="fulfilled",t.value=o,wu(t),e.state=o,t=e.pending,t!==null&&(o=t.next,o===t?e.pending=null:(o=o.next,t.next=o,Jc(e,o)))}function oo(e,t,o){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do t.status="rejected",t.reason=o,wu(t),t=t.next;while(t!==u)}e.action=null}function wu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qc(e,t){return t}function ul(e,t){if(Ai){var o=ge.formState;if(o!==null){e:{var u=kn;if(Ai){if(jr){t:{for(var h=jr,m=Jr;h.nodeType!==8;){if(!m){h=null;break t}if(h=nc(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){jr=nc(h.nextSibling),u=h.data==="F!";break e}}Sl(u)}u=!1}u&&(t=o[0])}}return o=Ir(),o.memoizedState=o.baseState=t,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qc,lastRenderedState:t},o.queue=u,o=_l.bind(null,kn,u),u.dispatch=o,u=Jl(!1),m=cf.bind(null,kn,!1,u.queue),u=Ir(),h={state:t,dispatch:null,action:e,pending:null},u.queue=h,o=Td.bind(null,kn,h,m,o),h.dispatch=o,u.memoizedState=e,[t,o,!1]}function zl(e){var t=Br();return Pl(t,zn,e)}function Pl(e,t,o){if(t=Kl(e,t,Qc)[0],e=Al(Hs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var u=Nl(t)}catch(I){throw I===Ee?Te:I}else u=t;t=Br();var h=t.queue,m=h.dispatch;return o!==t.memoizedState&&(kn.flags|=2048,Ql(9,{destroy:void 0},Su.bind(null,h,o),null)),[u,m,e]}function Su(e,t){e.action=t}function eu(e){var t=Br(),o=zn;if(o!==null)return Pl(t,o,e);Br(),t=t.memoizedState,o=Br();var u=o.queue.dispatch;return o.memoizedState=e,[t,u,!1]}function Ql(e,t,o,u){return e={tag:e,create:o,deps:u,inst:t,next:null},t=kn.updateQueue,t===null&&(t=kl(),kn.updateQueue=t),o=t.lastEffect,o===null?t.lastEffect=e.next=e:(u=o.next,o.next=e,e.next=u,t.lastEffect=e),e}function $s(){return Br().memoizedState}function fc(e,t,o,u){var h=Ir();kn.flags|=e,h.memoizedState=Ql(1|t,{destroy:void 0},o,u===void 0?null:u)}function Mc(e,t,o,u){var h=Br();u=u===void 0?null:u;var m=h.memoizedState.inst;zn!==null&&u!==null&&mu(u,zn.memoizedState.deps)?h.memoizedState=Ql(t,m,o,u):(kn.flags|=e,h.memoizedState=Ql(1|t,m,o,u))}function Vf(e,t){fc(8390656,8,e,t)}function of(e,t){Mc(2048,8,e,t)}function oh(e){kn.flags|=4;var t=kn.updateQueue;if(t===null)t=kl(),kn.updateQueue=t,t.events=[e];else{var o=t.events;o===null?t.events=[e]:o.push(e)}}function Hf(e){var t=Br().memoizedState;return oh({ref:t,nextImpl:e}),function(){if((le&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Wf(e,t){return Mc(4,2,e,t)}function $f(e,t){return Mc(4,4,e,t)}function Yf(e,t){if(typeof t=="function"){e=e();var o=t(e);return function(){typeof o=="function"?o():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gf(e,t,o){o=o!=null?o.concat([e]):null,Mc(4,4,Yf.bind(null,t,e),o)}function sf(){}function Xf(e,t){var o=Br();t=t===void 0?null:t;var u=o.memoizedState;return t!==null&&mu(t,u[1])?u[0]:(o.memoizedState=[e,t],e)}function ju(e,t){var o=Br();t=t===void 0?null:t;var u=o.memoizedState;if(t!==null&&mu(t,u[1]))return u[0];if(u=e(),Sa){Xt(!0);try{e()}finally{Xt(!1)}}return o.memoizedState=[u,t],u}function Ic(e,t,o){return o===void 0||(Yr&1073741824)!==0&&(de&261930)===0?e.memoizedState=t:(e.memoizedState=o,e=Ys(),kn.lanes|=e,Yt|=e,o)}function tu(e,t,o,u){return ma(o,t)?o:di.current!==null?(e=Ic(e,o,u),ma(e,t)||(ja=!0),e):(Yr&42)===0||(Yr&1073741824)!==0&&(de&261930)===0?(ja=!0,e.memoizedState=o):(e=Ys(),kn.lanes|=e,Yt|=e,t)}function Ku(e,t,o,u,h){var m=ve.p;ve.p=m!==0&&8>m?m:8;var I=ae.T,se={};ae.T=se,cf(e,!1,t,o);try{var Oe=h(),ot=ae.S;if(ot!==null&&ot(se,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var vt=V(Oe,u);iu(e,t,vt,la(e))}else iu(e,t,u,la(e))}catch(At){iu(e,t,{then:function(){},status:"rejected",reason:At},la())}finally{ve.p=m,I!==null&&se.types!==null&&(I.types=se.types),ae.T=I}}function Zu(){}function Ju(e,t,o,u){if(e.tag!==5)throw Error(s(476));var h=Tu(e).queue;Ku(e,h,t,pe,o===null?Zu:function(){return Cu(e),o(u)})}function Tu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:pe},next:null};var o={};return t.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:o},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Cu(e){var t=Tu(e);t.next===null&&(t=e.alternate.memoizedState),iu(e,t.next.queue,{},la())}function nu(){return Zi(Cf)}function Qu(){return Br().memoizedState}function ed(){return Br().memoizedState}function sh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var o=la();e=Dn(o);var u=si(t,e,o);u!==null&&(dl(u,t,o),Ji(u,t,o)),t={cache:Va()},e.payload=t;return}t=t.return}}function lf(e,t,o){var u=la();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Cd(e)?pc(t,o):(o=$c(e,t,o,u),o!==null&&(dl(o,e,u),Kf(o,t,u)))}function _l(e,t,o){var u=la();iu(e,t,o,u)}function iu(e,t,o,u){var h={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Cd(e))pc(t,h);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var I=t.lastRenderedState,se=m(I,o);if(h.hasEagerState=!0,h.eagerState=se,ma(se,I))return Fs(e,t,h,0),ge===null&&Wc(),!1}catch{}finally{}if(o=$c(e,t,h,u),o!==null)return dl(o,e,u),Kf(o,t,u),!0}return!1}function cf(e,t,o,u){if(u={lane:2,revertLane:hh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Cd(e)){if(t)throw Error(s(479))}else t=$c(e,o,u,2),t!==null&&dl(t,e,2)}function Cd(e){var t=e.alternate;return e===kn||t!==null&&t===kn}function pc(e,t){Wa=Ha=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function Kf(e,t,o){if((o&4194048)!==0){var u=t.lanes;u&=e.pendingLanes,o|=u,t.lanes=o,Et(e,o)}}var ru={readContext:Zi,use:uc,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useLayoutEffect:gr,useInsertionEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useSyncExternalStore:gr,useId:gr,useHostTransitionStatus:gr,useFormState:gr,useActionState:gr,useOptimistic:gr,useMemoCache:gr,useCacheRefresh:gr};ru.useEffectEvent=gr;var uf={readContext:Zi,use:uc,useCallback:function(e,t){return Ir().memoizedState=[e,t===void 0?null:t],e},useContext:Zi,useEffect:Vf,useImperativeHandle:function(e,t,o){o=o!=null?o.concat([e]):null,fc(4194308,4,Yf.bind(null,t,e),o)},useLayoutEffect:function(e,t){return fc(4194308,4,e,t)},useInsertionEffect:function(e,t){fc(4,2,e,t)},useMemo:function(e,t){var o=Ir();t=t===void 0?null:t;var u=e();if(Sa){Xt(!0);try{e()}finally{Xt(!1)}}return o.memoizedState=[u,t],u},useReducer:function(e,t,o){var u=Ir();if(o!==void 0){var h=o(t);if(Sa){Xt(!0);try{o(t)}finally{Xt(!1)}}}else h=t;return u.memoizedState=u.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},u.queue=e,e=e.dispatch=lf.bind(null,kn,e),[u.memoizedState,e]},useRef:function(e){var t=Ir();return e={current:e},t.memoizedState=e},useState:function(e){e=Jl(e);var t=e.queue,o=_l.bind(null,kn,t);return t.dispatch=o,[e.memoizedState,o]},useDebugValue:sf,useDeferredValue:function(e,t){var o=Ir();return Ic(o,e,t)},useTransition:function(){var e=Jl(!1);return e=Ku.bind(null,kn,e.queue,!0,!1),Ir().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,o){var u=kn,h=Ir();if(Ai){if(o===void 0)throw Error(s(407));o=o()}else{if(o=t(),ge===null)throw Error(s(349));(de&127)!==0||xs(u,t,o)}h.memoizedState=o;var m={value:o,getSnapshot:t};return h.queue=m,Vf(Zl.bind(null,u,m,e),[e]),u.flags|=2048,Ql(9,{destroy:void 0},Lc.bind(null,u,m,o,t),null),o},useId:function(){var e=Ir(),t=ge.identifierPrefix;if(Ai){var o=Jo,u=wo;o=(u&~(1<<32-it(u)-1)).toString(32)+o,t="_"+t+"R_"+o,o=ea++,0<o&&(t+="H"+o.toString(32)),t+="_"}else o=Dc++,t="_"+t+"r_"+o.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:nu,useFormState:ul,useActionState:ul,useOptimistic:function(e){var t=Ir();t.memoizedState=t.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=o,t=cf.bind(null,kn,!0,o),o.dispatch=t,[e,t]},useMemoCache:cl,useCacheRefresh:function(){return Ir().memoizedState=sh.bind(null,kn)},useEffectEvent:function(e){var t=Ir(),o={impl:e};return t.memoizedState=o,function(){if((le&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},td={readContext:Zi,use:uc,useCallback:Xf,useContext:Zi,useEffect:of,useImperativeHandle:Gf,useInsertionEffect:Wf,useLayoutEffect:$f,useMemo:ju,useReducer:Al,useRef:$s,useState:function(){return Al(Hs)},useDebugValue:sf,useDeferredValue:function(e,t){var o=Br();return tu(o,zn.memoizedState,e,t)},useTransition:function(){var e=Al(Hs)[0],t=Br().memoizedState;return[typeof e=="boolean"?e:Nl(e),t]},useSyncExternalStore:Kc,useId:Qu,useHostTransitionStatus:nu,useFormState:zl,useActionState:zl,useOptimistic:function(e,t){var o=Br();return vu(o,zn,e,t)},useMemoCache:cl,useCacheRefresh:ed};td.useEffectEvent=Hf;var nd={readContext:Zi,use:uc,useCallback:Xf,useContext:Zi,useEffect:of,useImperativeHandle:Gf,useInsertionEffect:Wf,useLayoutEffect:$f,useMemo:ju,useReducer:Xc,useRef:$s,useState:function(){return Xc(Hs)},useDebugValue:sf,useDeferredValue:function(e,t){var o=Br();return zn===null?Ic(o,e,t):tu(o,zn.memoizedState,e,t)},useTransition:function(){var e=Xc(Hs)[0],t=Br().memoizedState;return[typeof e=="boolean"?e:Nl(e),t]},useSyncExternalStore:Kc,useId:Qu,useHostTransitionStatus:nu,useFormState:eu,useActionState:eu,useOptimistic:function(e,t){var o=Br();return zn!==null?vu(o,zn,e,t):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:cl,useCacheRefresh:ed};nd.useEffectEvent=Hf;function ku(e,t,o,u){t=e.memoizedState,o=o(u,t),o=o==null?t:D({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Nu={enqueueSetState:function(e,t,o){e=e._reactInternals;var u=la(),h=Dn(u);h.payload=t,o!=null&&(h.callback=o),t=si(e,h,u),t!==null&&(dl(t,e,u),Ji(t,e,u))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var u=la(),h=Dn(u);h.tag=1,h.payload=t,o!=null&&(h.callback=o),t=si(e,h,u),t!==null&&(dl(t,e,u),Ji(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=la(),u=Dn(o);u.tag=2,t!=null&&(u.callback=t),t=si(e,u,o),t!==null&&(dl(t,e,o),Ji(t,e,o))}};function Zf(e,t,o,u,h,m,I){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,m,I):t.prototype&&t.prototype.isPureReactComponent?!xl(o,u)||!xl(h,m):!0}function kd(e,t,o,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,u),t.state!==e&&Nu.enqueueReplaceState(t,t.state,null)}function hc(e,t){var o=t;if("ref"in t){o={};for(var u in t)u!=="ref"&&(o[u]=t[u])}if(e=e.defaultProps){o===t&&(o=D({},o));for(var h in e)o[h]===void 0&&(o[h]=e[h])}return o}function Jf(e){Ti(e)}function Qf(e){console.error(e)}function ms(e){Ti(e)}function Nd(e,t){try{var o=e.onUncaughtError;o(t.value,{componentStack:t.stack})}catch(u){setTimeout(function(){throw u})}}function Dl(e,t,o){try{var u=e.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ad(e,t,o){return o=Dn(o),o.tag=3,o.payload={element:null},o.callback=function(){Nd(e,t)},o}function au(e){return e=Dn(e),e.tag=3,e}function df(e,t,o,u){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;e.payload=function(){return h(m)},e.callback=function(){Dl(t,o,u)}}var I=o.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(e.callback=function(){Dl(t,o,u),typeof h!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var se=u.stack;this.componentDidCatch(u.value,{componentStack:se!==null?se:""})})}function Bc(e,t,o,u,h){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(t=o.alternate,t!==null&&Da(t,o,h,!0),o=Tr.current,o!==null){switch(o.tag){case 31:case 13:return qi===null?pp():o.alternate===null&&tt===0&&(tt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,u===He?o.flags|=16384:(t=o.updateQueue,t===null?o.updateQueue=new Set([u]):t.add(u),dh(e,u,h)),!1;case 22:return o.flags|=65536,u===He?o.flags|=16384:(t=o.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=t):(o=t.retryQueue,o===null?t.retryQueue=new Set([u]):o.add(u)),dh(e,u,h)),!1}throw Error(s(435,o.tag))}return dh(e,u,h),pp(),!1}if(Ai)return t=Tr.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=h,u!==Qo&&(e=Error(s(422),{cause:u}),pa(vo(e,o)))):(u!==Qo&&(t=Error(s(423),{cause:u}),pa(vo(t,o))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,u=vo(u,o),h=Ad(e.stateNode,u,h),ur(e,h),tt!==4&&(tt=2)),!1;var m=Error(s(520),{cause:u});if(m=vo(m,o),ft===null?ft=[m]:ft.push(m),tt!==4&&(tt=2),t===null)return!0;u=vo(u,o),o=t;do{switch(o.tag){case 3:return o.flags|=65536,e=h&-h,o.lanes|=e,e=Ad(o.stateNode,u,e),ur(o,e),!1;case 1:if(t=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ei===null||!ei.has(m))))return o.flags|=65536,h&=-h,o.lanes|=h,h=au(h),df(h,e,o,u),ur(o,h),!1}o=o.return}while(o!==null);return!1}var id=Error(s(461)),ja=!1;function so(e,t,o,u){t.child=e===null?$n(t,null,o,u):Ci(t,e.child,o,u)}function ep(e,t,o,u,h){o=o.render;var m=t.ref;if("ref"in u){var I={};for(var se in u)se!=="ref"&&(I[se]=u[se])}else I=u;return La(t),u=Gl(e,t,o,I,m,h),se=Rc(),e!==null&&!ja?(Gc(e,t,h),Ll(e,t,h)):(Ai&&se&&_c(t),t.flags|=1,so(e,t,u,h),t.child)}function tp(e,t,o,u,h){if(e===null){var m=o.type;return typeof m=="function"&&!zc(m)&&m.defaultProps===void 0&&o.compare===null?(t.tag=15,t.type=m,np(e,t,m,u,h)):(e=il(o.type,null,u,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!To(e,h)){var I=m.memoizedProps;if(o=o.compare,o=o!==null?o:xl,o(I,u)&&e.ref===t.ref)return Ll(e,t,h)}return t.flags|=1,e=bo(m,u),e.ref=t.ref,e.return=t,t.child=e}function np(e,t,o,u,h){if(e!==null){var m=e.memoizedProps;if(xl(m,u)&&e.ref===t.ref)if(ja=!1,t.pendingProps=u=m,To(e,h))(e.flags&131072)!==0&&(ja=!0);else return t.lanes=e.lanes,Ll(e,t,h)}return zd(e,t,o,u,h)}function rd(e,t,o,u){var h=u.children,m=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((t.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,e!==null){for(u=t.child=e.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~m}else u=0,t.child=null;return ip(e,t,m,o,u)}if((o&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&be(t,m!==null?m.cachePool:null),m!==null?vr(t,m):Ui(),Ar(t);else return u=t.lanes=536870912,ip(e,t,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(be(t,m.cachePool),vr(t,m),$r(),t.memoizedState=null):(e!==null&&be(t,null),Ui(),$r());return so(e,t,h,o),t.child}function Au(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ip(e,t,o,u,h){var m=he();return m=m===null?null:{parent:Bi._currentValue,pool:m},t.memoizedState={baseLanes:o,cachePool:m},e!==null&&be(t,null),Ui(),Ar(t),e!==null&&Da(e,t,u,!0),t.childLanes=h,null}function ad(e,t){return t=Oc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function zu(e,t,o){return Ci(t,e.child,null,o),e=ad(t,t.pendingProps),e.flags|=2,pr(t),t.memoizedState=null,e}function lh(e,t,o){var u=t.pendingProps,h=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ai){if(u.mode==="hidden")return e=ad(t,u),t.lanes=536870912,Au(null,e);if(zi(t),(e=jr)?(e=Tg(e,Jr),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zr!==null?{id:wo,overflow:Jo}:null,retryLane:536870912,hydrationErrors:null},o=$l(e),o.return=t,t.child=o,qa=t,jr=null)):e=null,e===null)throw Sl(t);return t.lanes=536870912,null}return ad(t,u)}var m=e.memoizedState;if(m!==null){var I=m.dehydrated;if(zi(t),h)if(t.flags&256)t.flags&=-257,t=zu(e,t,o);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(ja||Da(e,t,o,!1),h=(o&e.childLanes)!==0,ja||h){if(u=ge,u!==null&&(I=Ke(u,o),I!==0&&I!==m.retryLane))throw m.retryLane=I,ps(e,I),dl(u,e,I),id;pp(),t=zu(e,t,o)}else e=m.treeContext,jr=nc(I.nextSibling),qa=t,Ai=!0,So=null,Jr=!1,e!==null&&al(t,e),t=ad(t,u),t.flags|=4096;return t}return e=bo(e.child,{mode:u.mode,children:u.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Pu(e,t){var o=t.ref;if(o===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(e===null||e.ref!==o)&&(t.flags|=4194816)}}function zd(e,t,o,u,h){return La(t),o=Gl(e,t,o,u,void 0,h),u=Rc(),e!==null&&!ja?(Gc(e,t,h),Ll(e,t,h)):(Ai&&u&&_c(t),t.flags|=1,so(e,t,o,h),t.child)}function Pd(e,t,o,u,h,m){return La(t),t.updateQueue=null,o=Vs(t,u,o,h),Xl(e),u=Rc(),e!==null&&!ja?(Gc(e,t,m),Ll(e,t,m)):(Ai&&u&&_c(t),t.flags|=1,so(e,t,o,m),t.child)}function _d(e,t,o,u,h){if(La(t),t.stateNode===null){var m=ba,I=o.contextType;typeof I=="object"&&I!==null&&(m=Zi(I)),m=new o(u,m),t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Nu,t.stateNode=m,m._reactInternals=t,m=t.stateNode,m.props=u,m.state=t.memoizedState,m.refs={},Ht(t),I=o.contextType,m.context=typeof I=="object"&&I!==null?Zi(I):ba,m.state=t.memoizedState,I=o.getDerivedStateFromProps,typeof I=="function"&&(ku(t,o,I,u),m.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(I=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),I!==m.state&&Nu.enqueueReplaceState(m,m.state,null),fr(t,u,m,h),mi(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),u=!0}else if(e===null){m=t.stateNode;var se=t.memoizedProps,Oe=hc(o,se);m.props=Oe;var ot=m.context,vt=o.contextType;I=ba,typeof vt=="object"&&vt!==null&&(I=Zi(vt));var At=o.getDerivedStateFromProps;vt=typeof At=="function"||typeof m.getSnapshotBeforeUpdate=="function",se=t.pendingProps!==se,vt||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(se||ot!==I)&&kd(t,m,u,I),tn=!1;var st=t.memoizedState;m.state=st,fr(t,u,m,h),mi(),ot=t.memoizedState,se||st!==ot||tn?(typeof At=="function"&&(ku(t,o,At,u),ot=t.memoizedState),(Oe=tn||Zf(t,o,Oe,u,st,ot,I))?(vt||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=u,t.memoizedState=ot),m.props=u,m.state=ot,m.context=I,u=Oe):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),u=!1)}else{m=t.stateNode,ir(e,t),I=t.memoizedProps,vt=hc(o,I),m.props=vt,At=t.pendingProps,st=m.context,ot=o.contextType,Oe=ba,typeof ot=="object"&&ot!==null&&(Oe=Zi(ot)),se=o.getDerivedStateFromProps,(ot=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(I!==At||st!==Oe)&&kd(t,m,u,Oe),tn=!1,st=t.memoizedState,m.state=st,fr(t,u,m,h),mi();var gt=t.memoizedState;I!==At||st!==gt||tn||e!==null&&e.dependencies!==null&&Ra(e.dependencies)?(typeof se=="function"&&(ku(t,o,se,u),gt=t.memoizedState),(vt=tn||Zf(t,o,vt,u,st,gt,Oe)||e!==null&&e.dependencies!==null&&Ra(e.dependencies))?(ot||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,gt,Oe),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,gt,Oe)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||I===e.memoizedProps&&st===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&st===e.memoizedState||(t.flags|=1024),t.memoizedProps=u,t.memoizedState=gt),m.props=u,m.state=gt,m.context=Oe,u=vt):(typeof m.componentDidUpdate!="function"||I===e.memoizedProps&&st===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||I===e.memoizedProps&&st===e.memoizedState||(t.flags|=1024),u=!1)}return m=u,Pu(e,t),u=(t.flags&128)!==0,m||u?(m=t.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),t.flags|=1,e!==null&&u?(t.child=Ci(t,e.child,null,h),t.child=Ci(t,null,o,h)):so(e,t,o,h),t.memoizedState=m.state,e=t.child):e=Ll(e,t,h),e}function rp(e,t,o,u){return sa(),t.flags|=256,so(e,t,o,u),t.child}var ff={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dd(e){return{baseLanes:e,cachePool:je()}}function ou(e,t,o){return e=e!==null?e.childLanes&~o:0,t&&(e|=Ue),e}function Rd(e,t,o){var u=t.pendingProps,h=!1,m=(t.flags&128)!==0,I;if((I=m)||(I=e!==null&&e.memoizedState===null?!1:(Oi.current&2)!==0),I&&(h=!0,t.flags&=-129),I=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ai){if(h?Wr(t):$r(),(e=jr)?(e=Tg(e,Jr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zr!==null?{id:wo,overflow:Jo}:null,retryLane:536870912,hydrationErrors:null},o=$l(e),o.return=t,t.child=o,qa=t,jr=null)):e=null,e===null)throw Sl(t);return Nh(e)?t.lanes=32:t.lanes=536870912,null}var se=u.children;return u=u.fallback,h?($r(),h=t.mode,se=Oc({mode:"hidden",children:se},h),u=ml(u,h,o,null),se.return=t,u.return=t,se.sibling=u,t.child=se,u=t.child,u.memoizedState=Dd(o),u.childLanes=ou(e,I,o),t.memoizedState=ff,Au(null,u)):(Wr(t),gc(t,se))}var Oe=e.memoizedState;if(Oe!==null&&(se=Oe.dehydrated,se!==null)){if(m)t.flags&256?(Wr(t),t.flags&=-257,t=Rl(e,t,o)):t.memoizedState!==null?($r(),t.child=e.child,t.flags|=128,t=null):($r(),se=u.fallback,h=t.mode,u=Oc({mode:"visible",children:u.children},h),se=ml(se,h,o,null),se.flags|=2,u.return=t,se.return=t,u.sibling=se,t.child=u,Ci(t,e.child,null,o),u=t.child,u.memoizedState=Dd(o),u.childLanes=ou(e,I,o),t.memoizedState=ff,t=Au(null,u));else if(Wr(t),Nh(se)){if(I=se.nextSibling&&se.nextSibling.dataset,I)var ot=I.dgst;I=ot,u=Error(s(419)),u.stack="",u.digest=I,pa({value:u,source:null,stack:null}),t=Rl(e,t,o)}else if(ja||Da(e,t,o,!1),I=(o&e.childLanes)!==0,ja||I){if(I=ge,I!==null&&(u=Ke(I,o),u!==0&&u!==Oe.retryLane))throw Oe.retryLane=u,ps(e,u),dl(I,e,u),id;kh(se)||pp(),t=Rl(e,t,o)}else kh(se)?(t.flags|=192,t.child=e.child,t=null):(e=Oe.treeContext,jr=nc(se.nextSibling),qa=t,Ai=!0,So=null,Jr=!1,e!==null&&al(t,e),t=gc(t,u.children),t.flags|=4096);return t}return h?($r(),se=u.fallback,h=t.mode,Oe=e.child,ot=Oe.sibling,u=bo(Oe,{mode:"hidden",children:u.children}),u.subtreeFlags=Oe.subtreeFlags&65011712,ot!==null?se=bo(ot,se):(se=ml(se,h,o,null),se.flags|=2),se.return=t,u.return=t,u.sibling=se,t.child=u,Au(null,u),u=t.child,se=e.child.memoizedState,se===null?se=Dd(o):(h=se.cachePool,h!==null?(Oe=Bi._currentValue,h=h.parent!==Oe?{parent:Oe,pool:Oe}:h):h=je(),se={baseLanes:se.baseLanes|o,cachePool:h}),u.memoizedState=se,u.childLanes=ou(e,I,o),t.memoizedState=ff,Au(e.child,u)):(Wr(t),o=e.child,e=o.sibling,o=bo(o,{mode:"visible",children:u.children}),o.return=t,o.sibling=null,e!==null&&(I=t.deletions,I===null?(t.deletions=[e],t.flags|=16):I.push(e)),t.child=o,t.memoizedState=null,o)}function gc(e,t){return t=Oc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Oc(e,t){return e=Ua(22,e,null,t),e.lanes=0,e}function Rl(e,t,o){return Ci(t,e.child,null,o),e=gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _u(e,t,o){e.lanes|=t;var u=e.alternate;u!==null&&(u.lanes|=t),ro(e.return,t,o)}function od(e,t,o,u,h,m){var I=e.memoizedState;I===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h,treeForkCount:m}:(I.isBackwards=t,I.rendering=null,I.renderingStartTime=0,I.last=u,I.tail=o,I.tailMode=h,I.treeForkCount=m)}function Ld(e,t,o){var u=t.pendingProps,h=u.revealOrder,m=u.tail;u=u.children;var I=Oi.current,se=(I&2)!==0;if(se?(I=I&1|2,t.flags|=128):I&=1,W(Oi,I),so(e,t,u,o),u=Ai?Pc:0,!se&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_u(e,o,t);else if(e.tag===19)_u(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(o=t.child,h=null;o!==null;)e=o.alternate,e!==null&&wa(e)===null&&(h=o),o=o.sibling;o=h,o===null?(h=t.child,t.child=null):(h=o.sibling,o.sibling=null),od(t,!1,h,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&wa(e)===null){t.child=h;break}e=h.sibling,h.sibling=o,o=h,h=e}od(t,!0,o,null,m,u);break;case"together":od(t,!1,null,null,void 0,u);break;default:t.memoizedState=null}return t.child}function Ll(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Yt|=t.lanes,(o&t.childLanes)===0)if(e!==null){if(Da(e,t,o,!1),(o&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,o=bo(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=bo(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function To(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ra(e)))}function pf(e,t,o){switch(t.tag){case 3:Ie(t,t.stateNode.containerInfo),_a(t,Bi,e.memoizedState.cache),sa();break;case 27:case 5:Fe(t);break;case 4:Ie(t,t.stateNode.containerInfo);break;case 10:_a(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,zi(t),null;break;case 13:var u=t.memoizedState;if(u!==null)return u.dehydrated!==null?(Wr(t),t.flags|=128,null):(o&t.child.childLanes)!==0?Rd(e,t,o):(Wr(t),e=Ll(e,t,o),e!==null?e.sibling:null);Wr(t);break;case 19:var h=(e.flags&128)!==0;if(u=(o&t.childLanes)!==0,u||(Da(e,t,o,!1),u=(o&t.childLanes)!==0),h){if(u)return Ld(e,t,o);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),W(Oi,Oi.current),u)break;return null;case 22:return t.lanes=0,rd(e,t,o,t.pendingProps);case 24:_a(t,Bi,e.memoizedState.cache)}return Ll(e,t,o)}function hf(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps)ja=!0;else{if(!To(e,o)&&(t.flags&128)===0)return ja=!1,pf(e,t,o);ja=(e.flags&131072)!==0}else ja=!1,Ai&&(t.flags&1048576)!==0&&Yl(t,Pc,t.index);switch(t.lanes=0,t.tag){case 16:e:{var u=t.pendingProps;if(e=Qe(t.elementType),t.type=e,typeof e=="function")zc(e)?(u=hc(e,u),t.tag=1,t=_d(null,t,e,u,o)):(t.tag=0,t=zd(null,t,e,u,o));else{if(e!=null){var h=e.$$typeof;if(h===G){t.tag=11,t=ep(null,t,e,u,o);break e}else if(h===oe){t.tag=14,t=tp(null,t,e,u,o);break e}}throw t=H(e)||e,Error(s(306,t,""))}}return t;case 0:return zd(e,t,t.type,t.pendingProps,o);case 1:return u=t.type,h=hc(u,t.pendingProps),_d(e,t,u,h,o);case 3:e:{if(Ie(t,t.stateNode.containerInfo),e===null)throw Error(s(387));u=t.pendingProps;var m=t.memoizedState;h=m.element,ir(e,t),fr(t,u,null,o);var I=t.memoizedState;if(u=I.cache,_a(t,Bi,u),u!==m.cache&&Qr(t,[Bi],o,!0),mi(),u=I.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:I.cache},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){t=rp(e,t,u,o);break e}else if(u!==h){h=vo(Error(s(424)),t),pa(h),t=rp(e,t,u,o);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(jr=nc(e.firstChild),qa=t,Ai=!0,So=null,Jr=!0,o=$n(t,null,u,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(sa(),u===h){t=Ll(e,t,o);break e}so(e,t,u,o)}t=t.child}return t;case 26:return Pu(e,t),e===null?(o=Pg(t.type,null,t.pendingProps,null))?t.memoizedState=o:Ai||(o=t.type,e=t.pendingProps,u=vp(xe.current).createElement(o),u[Gn]=t,u[ai]=e,ns(u,o,e),Fn(u),t.stateNode=u):t.memoizedState=Pg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Fe(t),e===null&&Ai&&(u=t.stateNode=Ng(t.type,t.pendingProps,xe.current),qa=t,Jr=!0,h=jr,Ou(t.type)?(Ah=h,jr=nc(u.firstChild)):jr=h),so(e,t,t.pendingProps.children,o),Pu(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ai&&((h=u=jr)&&(u=im(u,t.type,t.pendingProps,Jr),u!==null?(t.stateNode=u,qa=t,jr=nc(u.firstChild),Jr=!1,h=!0):h=!1),h||Sl(t)),Fe(t),h=t.type,m=t.pendingProps,I=e!==null?e.memoizedProps:null,u=m.children,jh(h,m)?u=null:I!==null&&jh(h,I)&&(t.flags|=32),t.memoizedState!==null&&(h=Gl(e,t,Xu,null,null,o),Cf._currentValue=h),Pu(e,t),so(e,t,u,o),t.child;case 6:return e===null&&Ai&&((e=o=jr)&&(o=rm(o,t.pendingProps,Jr),o!==null?(t.stateNode=o,qa=t,jr=null,e=!0):e=!1),e||Sl(t)),null;case 13:return Rd(e,t,o);case 4:return Ie(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Ci(t,null,u,o):so(e,t,u,o),t.child;case 11:return ep(e,t,t.type,t.pendingProps,o);case 7:return so(e,t,t.pendingProps,o),t.child;case 8:return so(e,t,t.pendingProps.children,o),t.child;case 12:return so(e,t,t.pendingProps.children,o),t.child;case 10:return u=t.pendingProps,_a(t,t.type,u.value),so(e,t,u.children,o),t.child;case 9:return h=t.type._context,u=t.pendingProps.children,La(t),h=Zi(h),u=u(h),t.flags|=1,so(e,t,u,o),t.child;case 14:return tp(e,t,t.type,t.pendingProps,o);case 15:return np(e,t,t.type,t.pendingProps,o);case 19:return Ld(e,t,o);case 31:return lh(e,t,o);case 22:return rd(e,t,o,t.pendingProps);case 24:return La(t),u=Zi(Bi),e===null?(h=he(),h===null&&(h=ge,m=Va(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=o),h=m),t.memoizedState={parent:u,cache:h},Ht(t),_a(t,Bi,h)):((e.lanes&o)!==0&&(ir(e,t),fr(t,null,null,o),mi()),h=e.memoizedState,m=t.memoizedState,h.parent!==u?(h={parent:u,cache:u},t.memoizedState=h,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=h),_a(t,Bi,u)):(u=m.cache,_a(t,Bi,u),u!==h.cache&&Qr(t,[Bi],o,!0))),so(e,t,t.pendingProps.children,o),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function xc(e){e.flags|=4}function Md(e,t,o,u,h){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if($0())e.flags|=8192;else throw yt=He,rt}else e.flags&=-16777217}function ap(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Mg(t))if($0())e.flags|=8192;else throw yt=He,rt}function sd(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?er():536870912,e.lanes|=t,ct|=t)}function Du(e,t){if(!Ai)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,u=0;if(t)for(var h=e.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=u,e.childLanes=o,t}function yc(e,t,o){var u=t.pendingProps;switch(wl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(t),null;case 1:return Cr(t),null;case 3:return o=t.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),t.memoizedState.cache!==u&&(t.flags|=2048),br(Bi),_e(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Rr(t)?xc(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,sl())),Cr(t),null;case 26:var h=t.type,m=t.memoizedState;return e===null?(xc(t),m!==null?(Cr(t),ap(t,m)):(Cr(t),Md(t,h,null,u,o))):m?m!==e.memoizedState?(xc(t),Cr(t),ap(t,m)):(Cr(t),t.flags&=-16777217):(e=e.memoizedProps,e!==u&&xc(t),Cr(t),Md(t,h,e,u,o)),null;case 27:if(nt(t),o=xe.current,h=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==u&&xc(t);else{if(!u){if(t.stateNode===null)throw Error(s(166));return Cr(t),null}e=q.current,Rr(t)?xu(t):(e=Ng(h,u,o),t.stateNode=e,xc(t))}return Cr(t),null;case 5:if(nt(t),h=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==u&&xc(t);else{if(!u){if(t.stateNode===null)throw Error(s(166));return Cr(t),null}if(m=q.current,Rr(t))xu(t);else{var I=vp(xe.current);switch(m){case 1:m=I.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=I.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=I.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=I.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=I.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?I.createElement("select",{is:u.is}):I.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?I.createElement(h,{is:u.is}):I.createElement(h)}}m[Gn]=t,m[ai]=u;e:for(I=t.child;I!==null;){if(I.tag===5||I.tag===6)m.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===t)break e;for(;I.sibling===null;){if(I.return===null||I.return===t)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}t.stateNode=m;e:switch(ns(m,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&xc(t)}}return Cr(t),Md(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,o),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==u&&xc(t);else{if(typeof u!="string"&&t.stateNode===null)throw Error(s(166));if(e=xe.current,Rr(t)){if(e=t.stateNode,o=t.memoizedProps,u=null,h=qa,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}e[Gn]=t,e=!!(e.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||xg(e.nodeValue,o)),e||Sl(t,!0)}else e=vp(e).createTextNode(u),e[Gn]=t,t.stateNode=e}return Cr(t),null;case 31:if(o=t.memoizedState,e===null||e.memoizedState!==null){if(u=Rr(t),o!==null){if(e===null){if(!u)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Gn]=t}else sa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Cr(t),e=!1}else o=sl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return t.flags&256?(pr(t),t):(pr(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Cr(t),null;case 13:if(u=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Rr(t),u!==null&&u.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Gn]=t}else sa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Cr(t),h=!1}else h=sl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return t.flags&256?(pr(t),t):(pr(t),null)}return pr(t),(t.flags&128)!==0?(t.lanes=o,t):(o=u!==null,e=e!==null&&e.memoizedState!==null,o&&(u=t.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)),o!==e&&o&&(t.child.flags|=8192),sd(t,t.updateQueue),Cr(t),null);case 4:return _e(),e===null&&mh(t.stateNode.containerInfo),Cr(t),null;case 10:return br(t.type),Cr(t),null;case 19:if(A(Oi),u=t.memoizedState,u===null)return Cr(t),null;if(h=(t.flags&128)!==0,m=u.rendering,m===null)if(h)Du(u,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=wa(e),m!==null){for(t.flags|=128,Du(u,!1),e=m.updateQueue,t.updateQueue=e,sd(t,e),t.subtreeFlags=0,e=o,o=t.child;o!==null;)cc(o,e),o=o.sibling;return W(Oi,Oi.current&1|2),Ai&&va(t,u.treeForkCount),t.child}e=e.sibling}u.tail!==null&&_n()>Mn&&(t.flags|=128,h=!0,Du(u,!1),t.lanes=4194304)}else{if(!h)if(e=wa(m),e!==null){if(t.flags|=128,h=!0,e=e.updateQueue,t.updateQueue=e,sd(t,e),Du(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Ai)return Cr(t),null}else 2*_n()-u.renderingStartTime>Mn&&o!==536870912&&(t.flags|=128,h=!0,Du(u,!1),t.lanes=4194304);u.isBackwards?(m.sibling=t.child,t.child=m):(e=u.last,e!==null?e.sibling=m:t.child=m,u.last=m)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=_n(),e.sibling=null,o=Oi.current,W(Oi,h?o&1|2:o&1),Ai&&va(t,u.treeForkCount),e):(Cr(t),null);case 22:case 23:return pr(t),ha(),u=t.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(t.flags|=8192):u&&(t.flags|=8192),u?(o&536870912)!==0&&(t.flags&128)===0&&(Cr(t),t.subtreeFlags&6&&(t.flags|=8192)):Cr(t),o=t.updateQueue,o!==null&&sd(t,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),u=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(u=t.memoizedState.cachePool.pool),u!==o&&(t.flags|=2048),e!==null&&A(Q),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),br(Bi),Cr(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function op(e,t){switch(wl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return br(Bi),_e(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return nt(t),null;case 31:if(t.memoizedState!==null){if(pr(t),t.alternate===null)throw Error(s(340));sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(pr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(Oi),null;case 4:return _e(),null;case 10:return br(t.type),null;case 22:case 23:return pr(t),ha(),e!==null&&A(Q),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return br(Bi),null;case 25:return null;default:return null}}function Ml(e,t){switch(wl(t),t.tag){case 3:br(Bi),_e();break;case 26:case 27:case 5:nt(t);break;case 4:_e();break;case 31:t.memoizedState!==null&&pr(t);break;case 13:pr(t);break;case 19:A(Oi);break;case 10:br(t.type);break;case 22:case 23:pr(t),ha(),e!==null&&A(Q);break;case 24:br(Bi)}}function bs(e,t){try{var o=t.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&e)===e){u=void 0;var m=o.create,I=o.inst;u=m(),I.destroy=u}o=o.next}while(o!==h)}}catch(se){zr(t,t.return,se)}}function mc(e,t,o){try{var u=t.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&e)===e){var I=u.inst,se=I.destroy;if(se!==void 0){I.destroy=void 0,h=t;var Oe=o,ot=se;try{ot()}catch(vt){zr(h,Oe,vt)}}}u=u.next}while(u!==m)}}catch(vt){zr(t,t.return,vt)}}function gf(e){var t=e.updateQueue;if(t!==null){var o=e.stateNode;try{Mr(t,o)}catch(u){zr(e,e.return,u)}}}function ts(e,t,o){o.props=hc(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(u){zr(e,t,u)}}function ec(e,t){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof o=="function"?e.refCleanup=o(u):o.current=u}}catch(h){zr(e,t,h)}}function Oo(e,t){var o=e.ref,u=e.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(h){zr(e,t,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){zr(e,t,h)}else o.current=null}function ld(e){var t=e.type,o=e.memoizedProps,u=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(h){zr(e,e.return,h)}}function cd(e,t,o){try{var u=e.stateNode;Zy(u,e.type,o,t),u[ai]=t}catch(h){zr(e,e.return,h)}}function Ru(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ou(e.type)||e.tag===4}function Id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ou(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xf(e,t,o){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,t):(t=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,t.appendChild(e),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Ho));else if(u!==4&&(u===27&&Ou(e.type)&&(o=e.stateNode,t=null),e=e.child,e!==null))for(xf(e,t,o),e=e.sibling;e!==null;)xf(e,t,o),e=e.sibling}function su(e,t,o){var u=e.tag;if(u===5||u===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(u!==4&&(u===27&&Ou(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(su(e,t,o),e=e.sibling;e!==null;)su(e,t,o),e=e.sibling}function ud(e){var t=e.stateNode,o=e.memoizedProps;try{for(var u=e.type,h=t.attributes;h.length;)t.removeAttributeNode(h[0]);ns(t,u,o),t[Gn]=e,t[ai]=o}catch(m){zr(e,e.return,m)}}var bc=!1,Ia=!1,dd=!1,Lu=typeof WeakSet=="function"?WeakSet:Set,lo=null;function sp(e,t){if(e=e.containerInfo,wh=Np,e=ds(e),to(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var I=0,se=-1,Oe=-1,ot=0,vt=0,At=e,st=null;t:for(;;){for(var gt;At!==o||h!==0&&At.nodeType!==3||(se=I+h),At!==m||u!==0&&At.nodeType!==3||(Oe=I+u),At.nodeType===3&&(I+=At.nodeValue.length),(gt=At.firstChild)!==null;)st=At,At=gt;for(;;){if(At===e)break t;if(st===o&&++ot===h&&(se=I),st===m&&++vt===u&&(Oe=I),(gt=At.nextSibling)!==null)break;At=st,st=At.parentNode}At=gt}o=se===-1||Oe===-1?null:{start:se,end:Oe}}else o=null}o=o||{start:0,end:0}}else o=null;for(Sh={focusedElem:e,selectionRange:o},Np=!1,lo=t;lo!==null;)if(t=lo,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,lo=e;else for(;lo!==null;){switch(t=lo,m=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)h=e[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,o=t,h=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var mn=hc(o.type,h);e=u.getSnapshotBeforeUpdate(mn,m),u.__reactInternalSnapshotBeforeUpdate=e}catch(Kn){zr(o,o.return,Kn)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,o=e.nodeType,o===9)Ch(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ch(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,lo=e;break}lo=t.return}}function Bd(e,t,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:tc(e,o),u&4&&bs(5,o);break;case 1:if(tc(e,o),u&4)if(e=o.stateNode,t===null)try{e.componentDidMount()}catch(I){zr(o,o.return,I)}else{var h=hc(o.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(h,t,e.__reactInternalSnapshotBeforeUpdate)}catch(I){zr(o,o.return,I)}}u&64&&gf(o),u&512&&ec(o,o.return);break;case 3:if(tc(e,o),u&64&&(e=o.updateQueue,e!==null)){if(t=null,o.child!==null)switch(o.child.tag){case 27:case 5:t=o.child.stateNode;break;case 1:t=o.child.stateNode}try{Mr(e,t)}catch(I){zr(o,o.return,I)}}break;case 27:t===null&&u&4&&ud(o);case 26:case 5:tc(e,o),t===null&&u&4&&ld(o),u&512&&ec(o,o.return);break;case 12:tc(e,o);break;case 31:tc(e,o),u&4&&up(e,o);break;case 13:tc(e,o),u&4&&Ec(e,o),u&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=Ey.bind(null,o),am(e,o))));break;case 22:if(u=o.memoizedState!==null||bc,!u){t=t!==null&&t.memoizedState!==null||Ia,h=bc;var m=Ia;bc=u,(Ia=t)&&!m?ws(e,o,(o.subtreeFlags&8772)!==0):tc(e,o),bc=h,Ia=m}break;case 30:break;default:tc(e,o)}}function lp(e){var t=e.alternate;t!==null&&(e.alternate=null,lp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&is(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Gr=null,Eo=!1;function Il(e,t,o){for(o=o.child;o!==null;)cp(e,t,o),o=o.sibling}function cp(e,t,o){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Ut,o)}catch{}switch(o.tag){case 26:Ia||Oo(o,t),Il(e,t,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ia||Oo(o,t);var u=Gr,h=Eo;Ou(o.type)&&(Gr=o.stateNode,Eo=!1),Il(e,t,o),Sf(o.stateNode),Gr=u,Eo=h;break;case 5:Ia||Oo(o,t);case 6:if(u=Gr,h=Eo,Gr=null,Il(e,t,o),Gr=u,Eo=h,Gr!==null)if(Eo)try{(Gr.nodeType===9?Gr.body:Gr.nodeName==="HTML"?Gr.ownerDocument.body:Gr).removeChild(o.stateNode)}catch(m){zr(o,t,m)}else try{Gr.removeChild(o.stateNode)}catch(m){zr(o,t,m)}break;case 18:Gr!==null&&(Eo?(e=Gr,Sg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),Wd(e)):Sg(Gr,o.stateNode));break;case 4:u=Gr,h=Eo,Gr=o.stateNode.containerInfo,Eo=!0,Il(e,t,o),Gr=u,Eo=h;break;case 0:case 11:case 14:case 15:mc(2,o,t),Ia||mc(4,o,t),Il(e,t,o);break;case 1:Ia||(Oo(o,t),u=o.stateNode,typeof u.componentWillUnmount=="function"&&ts(o,t,u)),Il(e,t,o);break;case 21:Il(e,t,o);break;case 22:Ia=(u=Ia)||o.memoizedState!==null,Il(e,t,o),Ia=u;break;default:Il(e,t,o)}}function up(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Wd(e)}catch(o){zr(t,t.return,o)}}}function Ec(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wd(e)}catch(o){zr(t,t.return,o)}}function Mu(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Lu),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Lu),t;default:throw Error(s(435,e.tag))}}function lu(e,t){var o=Mu(e);t.forEach(function(u){if(!o.has(u)){o.add(u);var h=Fy.bind(null,e,u);u.then(h,h)}})}function vs(e,t){var o=t.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u],m=e,I=t,se=I;e:for(;se!==null;){switch(se.tag){case 27:if(Ou(se.type)){Gr=se.stateNode,Eo=!1;break e}break;case 5:Gr=se.stateNode,Eo=!1;break e;case 3:case 4:Gr=se.stateNode.containerInfo,Eo=!0;break e}se=se.return}if(Gr===null)throw Error(s(160));cp(m,I,h),Gr=null,Eo=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Od(t,e),t=t.sibling}var Bl=null;function Od(e,t){var o=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vs(t,e),Fo(e),u&4&&(mc(3,e,e.return),bs(3,e),mc(5,e,e.return));break;case 1:vs(t,e),Fo(e),u&512&&(Ia||o===null||Oo(o,o.return)),u&64&&bc&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var h=Bl;if(vs(t,e),Fo(e),u&512&&(Ia||o===null||Oo(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=e.memoizedState,o===null)if(u===null)if(e.stateNode===null){e:{u=e.type,o=e.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[No]||m[Gn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),ns(m,u,o),m[Gn]=e,Fn(m),u=m;break e;case"link":var I=Rg("link","href",h).get(u+(o.href||""));if(I){for(var se=0;se<I.length;se++)if(m=I[se],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){I.splice(se,1);break t}}m=h.createElement(u),ns(m,u,o),h.head.appendChild(m);break;case"meta":if(I=Rg("meta","content",h).get(u+(o.content||""))){for(se=0;se<I.length;se++)if(m=I[se],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){I.splice(se,1);break t}}m=h.createElement(u),ns(m,u,o),h.head.appendChild(m);break;default:throw Error(s(468,u))}m[Gn]=e,Fn(m),u=m}e.stateNode=u}else Lg(h,e.type,e.stateNode);else e.stateNode=Dg(h,u,e.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?Lg(h,e.type,e.stateNode):Dg(h,u,e.memoizedProps)):u===null&&e.stateNode!==null&&cd(e,e.memoizedProps,o.memoizedProps)}break;case 27:vs(t,e),Fo(e),u&512&&(Ia||o===null||Oo(o,o.return)),o!==null&&u&4&&cd(e,e.memoizedProps,o.memoizedProps);break;case 5:if(vs(t,e),Fo(e),u&512&&(Ia||o===null||Oo(o,o.return)),e.flags&32){h=e.stateNode;try{ua(h,"")}catch(mn){zr(e,e.return,mn)}}u&4&&e.stateNode!=null&&(h=e.memoizedProps,cd(e,h,o!==null?o.memoizedProps:h)),u&1024&&(dd=!0);break;case 6:if(vs(t,e),Fo(e),u&4){if(e.stateNode===null)throw Error(s(162));u=e.memoizedProps,o=e.stateNode;try{o.nodeValue=u}catch(mn){zr(e,e.return,mn)}}break;case 3:if(jp=null,h=Bl,Bl=wp(t.containerInfo),vs(t,e),Bl=h,Fo(e),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Wd(t.containerInfo)}catch(mn){zr(e,e.return,mn)}dd&&(dd=!1,yf(e));break;case 4:u=Bl,Bl=wp(e.stateNode.containerInfo),vs(t,e),Fo(e),Bl=u;break;case 12:vs(t,e),Fo(e);break;case 31:vs(t,e),Fo(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,lu(e,u)));break;case 13:vs(t,e),Fo(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Tn=_n()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,lu(e,u)));break;case 22:h=e.memoizedState!==null;var Oe=o!==null&&o.memoizedState!==null,ot=bc,vt=Ia;if(bc=ot||h,Ia=vt||Oe,vs(t,e),Ia=vt,bc=ot,Fo(e),u&8192)e:for(t=e.stateNode,t._visibility=h?t._visibility&-2:t._visibility|1,h&&(o===null||Oe||bc||Ia||en(e)),o=null,t=e;;){if(t.tag===5||t.tag===26){if(o===null){Oe=o=t;try{if(m=Oe.stateNode,h)I=m.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{se=Oe.stateNode;var At=Oe.memoizedProps.style,st=At!=null&&At.hasOwnProperty("display")?At.display:null;se.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(mn){zr(Oe,Oe.return,mn)}}}else if(t.tag===6){if(o===null){Oe=t;try{Oe.stateNode.nodeValue=h?"":Oe.memoizedProps}catch(mn){zr(Oe,Oe.return,mn)}}}else if(t.tag===18){if(o===null){Oe=t;try{var gt=Oe.stateNode;h?jg(gt,!0):jg(Oe.stateNode,!1)}catch(mn){zr(Oe,Oe.return,mn)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;o===t&&(o=null),t=t.return}o===t&&(o=null),t.sibling.return=t.return,t=t.sibling}u&4&&(u=e.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,lu(e,o))));break;case 19:vs(t,e),Fo(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,lu(e,u)));break;case 30:break;case 21:break;default:vs(t,e),Fo(e)}}function Fo(e){var t=e.flags;if(t&2){try{for(var o,u=e.return;u!==null;){if(Ru(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var h=o.stateNode,m=Id(e);su(e,m,h);break;case 5:var I=o.stateNode;o.flags&32&&(ua(I,""),o.flags&=-33);var se=Id(e);su(e,se,I);break;case 3:case 4:var Oe=o.stateNode.containerInfo,ot=Id(e);xf(e,ot,Oe);break;default:throw Error(s(161))}}catch(vt){zr(e,e.return,vt)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;yf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function tc(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Bd(e,t.alternate,t),t=t.sibling}function en(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:mc(4,t,t.return),en(t);break;case 1:Oo(t,t.return);var o=t.stateNode;typeof o.componentWillUnmount=="function"&&ts(t,t.return,o),en(t);break;case 27:Sf(t.stateNode);case 26:case 5:Oo(t,t.return),en(t);break;case 22:t.memoizedState===null&&en(t);break;case 30:en(t);break;default:en(t)}e=e.sibling}}function ws(e,t,o){for(o=o&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var u=t.alternate,h=e,m=t,I=m.flags;switch(m.tag){case 0:case 11:case 15:ws(h,m,o),bs(4,m);break;case 1:if(ws(h,m,o),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(ot){zr(u,u.return,ot)}if(u=m,h=u.updateQueue,h!==null){var se=u.stateNode;try{var Oe=h.shared.hiddenCallbacks;if(Oe!==null)for(h.shared.hiddenCallbacks=null,h=0;h<Oe.length;h++)Lr(Oe[h],se)}catch(ot){zr(u,u.return,ot)}}o&&I&64&&gf(m),ec(m,m.return);break;case 27:ud(m);case 26:case 5:ws(h,m,o),o&&u===null&&I&4&&ld(m),ec(m,m.return);break;case 12:ws(h,m,o);break;case 31:ws(h,m,o),o&&I&4&&up(h,m);break;case 13:ws(h,m,o),o&&I&4&&Ec(h,m);break;case 22:m.memoizedState===null&&ws(h,m,o),ec(m,m.return);break;case 30:break;default:ws(h,m,o)}t=t.sibling}}function fd(e,t){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Ma(o))}function mf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ma(e))}function Ol(e,t,o,u){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dp(e,t,o,u),t=t.sibling}function dp(e,t,o,u){var h=t.flags;switch(t.tag){case 0:case 11:case 15:Ol(e,t,o,u),h&2048&&bs(9,t);break;case 1:Ol(e,t,o,u);break;case 3:Ol(e,t,o,u),h&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ma(e)));break;case 12:if(h&2048){Ol(e,t,o,u),e=t.stateNode;try{var m=t.memoizedProps,I=m.id,se=m.onPostCommit;typeof se=="function"&&se(I,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Oe){zr(t,t.return,Oe)}}else Ol(e,t,o,u);break;case 31:Ol(e,t,o,u);break;case 13:Ol(e,t,o,u);break;case 23:break;case 22:m=t.stateNode,I=t.alternate,t.memoizedState!==null?m._visibility&2?Ol(e,t,o,u):x(e,t):m._visibility&2?Ol(e,t,o,u):(m._visibility|=2,c(e,t,o,u,(t.subtreeFlags&10256)!==0||!1)),h&2048&&fd(I,t);break;case 24:Ol(e,t,o,u),h&2048&&mf(t.alternate,t);break;default:Ol(e,t,o,u)}}function c(e,t,o,u,h){for(h=h&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var m=e,I=t,se=o,Oe=u,ot=I.flags;switch(I.tag){case 0:case 11:case 15:c(m,I,se,Oe,h),bs(8,I);break;case 23:break;case 22:var vt=I.stateNode;I.memoizedState!==null?vt._visibility&2?c(m,I,se,Oe,h):x(m,I):(vt._visibility|=2,c(m,I,se,Oe,h)),h&&ot&2048&&fd(I.alternate,I);break;case 24:c(m,I,se,Oe,h),h&&ot&2048&&mf(I.alternate,I);break;default:c(m,I,se,Oe,h)}t=t.sibling}}function x(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var o=e,u=t,h=u.flags;switch(u.tag){case 22:x(o,u),h&2048&&fd(u.alternate,u);break;case 24:x(o,u),h&2048&&mf(u.alternate,u);break;default:x(o,u)}t=t.sibling}}var N=8192;function B(e,t,o){if(e.subtreeFlags&N)for(e=e.child;e!==null;)re(e,t,o),e=e.sibling}function re(e,t,o){switch(e.tag){case 26:B(e,t,o),e.flags&N&&e.memoizedState!==null&&ym(o,Bl,e.memoizedState,e.memoizedProps);break;case 5:B(e,t,o);break;case 3:case 4:var u=Bl;Bl=wp(e.stateNode.containerInfo),B(e,t,o),Bl=u;break;case 22:e.memoizedState===null&&(u=e.alternate,u!==null&&u.memoizedState!==null?(u=N,N=16777216,B(e,t,o),N=u):B(e,t,o));break;default:B(e,t,o)}}function ye(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function P(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var u=t[o];lo=u,De(u,e)}ye(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ze(e),e=e.sibling}function ze(e){switch(e.tag){case 0:case 11:case 15:P(e),e.flags&2048&&mc(9,e,e.return);break;case 3:P(e);break;case 12:P(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,me(e)):P(e);break;default:P(e)}}function me(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var u=t[o];lo=u,De(u,e)}ye(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:mc(8,t,t.return),me(t);break;case 22:o=t.stateNode,o._visibility&2&&(o._visibility&=-3,me(t));break;default:me(t)}e=e.sibling}}function De(e,t){for(;lo!==null;){var o=lo;switch(o.tag){case 0:case 11:case 15:mc(8,o,t);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ma(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,lo=u;else e:for(o=e;lo!==null;){u=lo;var h=u.sibling,m=u.return;if(lp(u),u===o){lo=null;break e}if(h!==null){h.return=m,lo=h;break e}lo=m}}}var Ae={getCacheForType:function(e){var t=Zi(Bi),o=t.data.get(e);return o===void 0&&(o=e(),t.data.set(e,o)),o},cacheSignal:function(){return Zi(Bi).controller.signal}},Ne=typeof WeakMap=="function"?WeakMap:Map,le=0,ge=null,ce=null,de=0,Me=0,Re=null,$e=!1,ht=!1,mt=!1,Tt=0,tt=0,Yt=0,We=0,Ge=0,Ue=0,ct=0,ft=null,zt=null,nn=!1,Tn=0,Yn=0,Mn=1/0,Un=null,ei=null,rn=0,Lt=null,wn=null,Ri=0,Or=0,kr=null,Ta=null,ta=0,Jn=null;function la(){return(le&2)!==0&&de!==0?de&-de:ae.T!==null?hh():On()}function Ys(){if(Ue===0)if((de&536870912)===0||Ai){var e=ti;ti<<=1,(ti&3932160)===0&&(ti=262144),Ue=e}else Ue=536870912;return e=Tr.current,e!==null&&(e.flags|=32),Ue}function dl(e,t,o){(e===ge&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(Ed(e,0),Iu(e,de,Ue,!1)),Ft(e,o),((le&2)===0||e!==ge)&&(e===ge&&((le&2)===0&&(We|=o),tt===4&&Iu(e,de,Ue,!1)),Fc(e))}function V0(e,t,o){if((le&6)!==0)throw Error(s(327));var u=!o&&(t&127)===0&&(t&e.expiredLanes)===0||ji(e,t),h=u?Iy(e,t):uh(e,t,!0),m=u;do{if(h===0){ht&&!u&&Iu(e,t,0,!1);break}else{if(o=e.current.alternate,m&&!Ly(o)){h=uh(e,t,!1),m=!1;continue}if(h===2){if(m=t,e.errorRecoveryDisabledLanes&m)var I=0;else I=e.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){t=I;e:{var se=e;h=ft;var Oe=se.current.memoizedState.isDehydrated;if(Oe&&(Ed(se,I).flags|=256),I=uh(se,I,!1),I!==2){if(mt&&!Oe){se.errorRecoveryDisabledLanes|=m,We|=m,h=4;break e}m=zt,zt=h,m!==null&&(zt===null?zt=m:zt.push.apply(zt,m))}h=I}if(m=!1,h!==2)continue}}if(h===1){Ed(e,0),Iu(e,t,0,!0);break}e:{switch(u=e,m=h,m){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Iu(u,t,Ue,!$e);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(h=Tn+300-_n(),10<h)){if(Iu(u,t,Ue,!$e),Ot(u,0,!0)!==0)break e;Ri=t,u.timeoutHandle=vg(H0.bind(null,u,o,zt,Un,nn,t,Ue,We,ct,$e,m,"Throttled",-0,0),h);break e}H0(u,o,zt,Un,nn,t,Ue,We,ct,$e,m,null,-0,0)}}break}while(!0);Fc(e)}function H0(e,t,o,u,h,m,I,se,Oe,ot,vt,At,st,gt){if(e.timeoutHandle=-1,At=t.subtreeFlags,At&8192||(At&16785408)===16785408){At={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ho},re(t,m,At);var mn=(m&62914560)===m?Tn-_n():(m&4194048)===m?Yn-_n():0;if(mn=mm(At,mn),mn!==null){Ri=m,e.cancelPendingCommit=mn(J0.bind(null,e,t,m,o,u,h,I,se,Oe,vt,At,null,st,gt)),Iu(e,m,I,!ot);return}}J0(e,t,m,o,u,h,I,se,Oe)}function Ly(e){for(var t=e;;){var o=t.tag;if((o===0||o===11||o===15)&&t.flags&16384&&(o=t.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var h=o[u],m=h.getSnapshot;h=h.value;try{if(!ma(m(),h))return!1}catch{return!1}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Iu(e,t,o,u){t&=~Ge,t&=~We,e.suspendedLanes|=t,e.pingedLanes&=~t,u&&(e.warmLanes|=t),u=e.expirationTimes;for(var h=t;0<h;){var m=31-it(h),I=1<<m;u[m]=-1,h&=~I}o!==0&&gi(e,o,t)}function fp(){return(le&6)===0?(bf(0),!1):!0}function ch(){if(ce!==null){if(Me===0)var e=ce.return;else e=ce,mr=jl=null,bu(e),Nt=null,fn=0,e=ce;for(;e!==null;)Ml(e.alternate,e),e=e.return;ce=null}}function Ed(e,t){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,em(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),Ri=0,ch(),ge=e,ce=o=bo(e.current,null),de=t,Me=0,Re=null,$e=!1,ht=ji(e,t),mt=!1,ct=Ue=Ge=We=Yt=tt=0,zt=ft=null,nn=!1,(t&8)!==0&&(t|=t&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=t;0<u;){var h=31-it(u),m=1<<h;t|=e[h],u&=~m}return Tt=t,Wc(),o}function W0(e,t){kn=null,ae.H=ru,t===Ee||t===Te?(t=pt(),Me=3):t===rt?(t=pt(),Me=4):Me=t===id?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Re=t,ce===null&&(tt=1,Nd(e,vo(t,e.current)))}function $0(){var e=Tr.current;return e===null?!0:(de&4194048)===de?qi===null:(de&62914560)===de||(de&536870912)!==0?e===qi:!1}function Y0(){var e=ae.H;return ae.H=ru,e===null?ru:e}function G0(){var e=ae.A;return ae.A=Ae,e}function pp(){tt=4,$e||(de&4194048)!==de&&Tr.current!==null||(ht=!0),(Yt&134217727)===0&&(We&134217727)===0||ge===null||Iu(ge,de,Ue,!1)}function uh(e,t,o){var u=le;le|=2;var h=Y0(),m=G0();(ge!==e||de!==t)&&(Un=null,Ed(e,t)),t=!1;var I=tt;e:do try{if(Me!==0&&ce!==null){var se=ce,Oe=Re;switch(Me){case 8:ch(),I=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(t=!0);var ot=Me;if(Me=0,Re=null,Fd(e,se,Oe,ot),o&&ht){I=0;break e}break;default:ot=Me,Me=0,Re=null,Fd(e,se,Oe,ot)}}My(),I=tt;break}catch(vt){W0(e,vt)}while(!0);return t&&e.shellSuspendCounter++,mr=jl=null,le=u,ae.H=h,ae.A=m,ce===null&&(ge=null,de=0,Wc()),I}function My(){for(;ce!==null;)X0(ce)}function Iy(e,t){var o=le;le|=2;var u=Y0(),h=G0();ge!==e||de!==t?(Un=null,Mn=_n()+500,Ed(e,t)):ht=ji(e,t);e:do try{if(Me!==0&&ce!==null){t=ce;var m=Re;t:switch(Me){case 1:Me=0,Re=null,Fd(e,t,m,1);break;case 2:case 9:if(Ye(m)){Me=0,Re=null,K0(t);break}t=function(){Me!==2&&Me!==9||ge!==e||(Me=7),Fc(e)},m.then(t,t);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:Ye(m)?(Me=0,Re=null,K0(t)):(Me=0,Re=null,Fd(e,t,m,7));break;case 5:var I=null;switch(ce.tag){case 26:I=ce.memoizedState;case 5:case 27:var se=ce;if(I?Mg(I):se.stateNode.complete){Me=0,Re=null;var Oe=se.sibling;if(Oe!==null)ce=Oe;else{var ot=se.return;ot!==null?(ce=ot,hp(ot)):ce=null}break t}}Me=0,Re=null,Fd(e,t,m,5);break;case 6:Me=0,Re=null,Fd(e,t,m,6);break;case 8:ch(),tt=6;break e;default:throw Error(s(462))}}By();break}catch(vt){W0(e,vt)}while(!0);return mr=jl=null,ae.H=u,ae.A=h,le=o,ce!==null?0:(ge=null,de=0,Wc(),tt)}function By(){for(;ce!==null&&!un();)X0(ce)}function X0(e){var t=hf(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?hp(e):ce=t}function K0(e){var t=e,o=t.alternate;switch(t.tag){case 15:case 0:t=Pd(o,t,t.pendingProps,t.type,void 0,de);break;case 11:t=Pd(o,t,t.pendingProps,t.type.render,t.ref,de);break;case 5:bu(t);default:Ml(o,t),t=ce=cc(t,Tt),t=hf(o,t,Tt)}e.memoizedProps=e.pendingProps,t===null?hp(e):ce=t}function Fd(e,t,o,u){mr=jl=null,bu(t),Nt=null,fn=0;var h=t.return;try{if(Bc(e,h,t,o,de)){tt=1,Nd(e,vo(o,e.current)),ce=null;return}}catch(m){if(h!==null)throw ce=h,m;tt=1,Nd(e,vo(o,e.current)),ce=null;return}t.flags&32768?(Ai||u===1?e=!0:ht||(de&536870912)!==0?e=!1:($e=e=!0,(u===2||u===9||u===3||u===6)&&(u=Tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Z0(t,e)):hp(t)}function hp(e){var t=e;do{if((t.flags&32768)!==0){Z0(t,$e);return}e=t.return;var o=yc(t.alternate,t,Tt);if(o!==null){ce=o;return}if(t=t.sibling,t!==null){ce=t;return}ce=t=e}while(t!==null);tt===0&&(tt=5)}function Z0(e,t){do{var o=op(e.alternate,e);if(o!==null){o.flags&=32767,ce=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!t&&(e=e.sibling,e!==null)){ce=e;return}ce=e=o}while(e!==null);tt=6,ce=null}function J0(e,t,o,u,h,m,I,se,Oe){e.cancelPendingCommit=null;do gp();while(rn!==0);if((le&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(m=t.lanes|t.childLanes,m|=mo,Pi(e,o,m,I,se,Oe),e===ge&&(ce=ge=null,de=0),wn=t,Lt=e,Ri=o,Or=m,kr=h,Ta=u,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Uy(Xe,function(){return ig(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||u){u=ae.T,ae.T=null,h=ve.p,ve.p=2,I=le,le|=4;try{sp(e,t,o)}finally{le=I,ve.p=h,ae.T=u}}rn=1,Q0(),eg(),tg()}}function Q0(){if(rn===1){rn=0;var e=Lt,t=wn,o=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||o){o=ae.T,ae.T=null;var u=ve.p;ve.p=2;var h=le;le|=4;try{Od(t,e);var m=Sh,I=ds(e.containerInfo),se=m.focusedElem,Oe=m.selectionRange;if(I!==se&&se&&se.ownerDocument&&Bs(se.ownerDocument.documentElement,se)){if(Oe!==null&&to(se)){var ot=Oe.start,vt=Oe.end;if(vt===void 0&&(vt=ot),"selectionStart"in se)se.selectionStart=ot,se.selectionEnd=Math.min(vt,se.value.length);else{var At=se.ownerDocument||document,st=At&&At.defaultView||window;if(st.getSelection){var gt=st.getSelection(),mn=se.textContent.length,Kn=Math.min(Oe.start,mn),Fr=Oe.end===void 0?Kn:Math.min(Oe.end,mn);!gt.extend&&Kn>Fr&&(I=Fr,Fr=Kn,Kn=I);var Ze=Mo(se,Kn),qe=Mo(se,Fr);if(Ze&&qe&&(gt.rangeCount!==1||gt.anchorNode!==Ze.node||gt.anchorOffset!==Ze.offset||gt.focusNode!==qe.node||gt.focusOffset!==qe.offset)){var at=At.createRange();at.setStart(Ze.node,Ze.offset),gt.removeAllRanges(),Kn>Fr?(gt.addRange(at),gt.extend(qe.node,qe.offset)):(at.setEnd(qe.node,qe.offset),gt.addRange(at))}}}}for(At=[],gt=se;gt=gt.parentNode;)gt.nodeType===1&&At.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<At.length;se++){var Ct=At[se];Ct.element.scrollLeft=Ct.left,Ct.element.scrollTop=Ct.top}}Np=!!wh,Sh=wh=null}finally{le=h,ve.p=u,ae.T=o}}e.current=t,rn=2}}function eg(){if(rn===2){rn=0;var e=Lt,t=wn,o=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||o){o=ae.T,ae.T=null;var u=ve.p;ve.p=2;var h=le;le|=4;try{Bd(e,t.alternate,t)}finally{le=h,ve.p=u,ae.T=o}}rn=3}}function tg(){if(rn===4||rn===3){rn=0,Zt();var e=Lt,t=wn,o=Ri,u=Ta;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?rn=5:(rn=0,wn=Lt=null,ng(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(ei=null),$t(o),t=t.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Ut,t,void 0,(t.current.flags&128)===128)}catch{}if(u!==null){t=ae.T,h=ve.p,ve.p=2,ae.T=null;try{for(var m=e.onRecoverableError,I=0;I<u.length;I++){var se=u[I];m(se.value,{componentStack:se.stack})}}finally{ae.T=t,ve.p=h}}(Ri&3)!==0&&gp(),Fc(e),h=e.pendingLanes,(o&261930)!==0&&(h&42)!==0?e===Jn?ta++:(ta=0,Jn=e):ta=0,bf(0)}}function ng(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ma(t)))}function gp(){return Q0(),eg(),tg(),ig()}function ig(){if(rn!==5)return!1;var e=Lt,t=Or;Or=0;var o=$t(Ri),u=ae.T,h=ve.p;try{ve.p=32>o?32:o,ae.T=null,o=kr,kr=null;var m=Lt,I=Ri;if(rn=0,wn=Lt=null,Ri=0,(le&6)!==0)throw Error(s(331));var se=le;if(le|=4,ze(m.current),dp(m,m.current,I,o),le=se,bf(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Ut,m)}catch{}return!0}finally{ve.p=h,ae.T=u,ng(e,t)}}function rg(e,t,o){t=vo(o,t),t=Ad(e.stateNode,t,2),e=si(e,t,2),e!==null&&(Ft(e,2),Fc(e))}function zr(e,t,o){if(e.tag===3)rg(e,e,o);else for(;t!==null;){if(t.tag===3){rg(t,e,o);break}else if(t.tag===1){var u=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ei===null||!ei.has(u))){e=vo(o,e),o=au(2),u=si(t,o,2),u!==null&&(df(o,u,t,e),Ft(u,2),Fc(u));break}}t=t.return}}function dh(e,t,o){var u=e.pingCache;if(u===null){u=e.pingCache=new Ne;var h=new Set;u.set(t,h)}else h=u.get(t),h===void 0&&(h=new Set,u.set(t,h));h.has(o)||(mt=!0,h.add(o),e=Oy.bind(null,e,t,o),t.then(e,e))}function Oy(e,t,o){var u=e.pingCache;u!==null&&u.delete(t),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,ge===e&&(de&o)===o&&(tt===4||tt===3&&(de&62914560)===de&&300>_n()-Tn?(le&2)===0&&Ed(e,0):Ge|=o,ct===de&&(ct=0)),Fc(e)}function ag(e,t){t===0&&(t=er()),e=ps(e,t),e!==null&&(Ft(e,t),Fc(e))}function Ey(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),ag(e,o)}function Fy(e,t){var o=0;switch(e.tag){case 31:case 13:var u=e.stateNode,h=e.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(t),ag(e,o)}function Uy(e,t){return Je(e,t)}var xp=null,Ud=null,fh=!1,yp=!1,ph=!1,Bu=0;function Fc(e){e!==Ud&&e.next===null&&(Ud===null?xp=Ud=e:Ud=Ud.next=e),yp=!0,fh||(fh=!0,Vy())}function bf(e,t){if(!ph&&yp){ph=!0;do for(var o=!1,u=xp;u!==null;){if(e!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var I=u.suspendedLanes,se=u.pingedLanes;m=(1<<31-it(42|e)+1)-1,m&=h&~(I&~se),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,cg(u,m))}else m=de,m=Ot(u,u===ge?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ji(u,m)||(o=!0,cg(u,m));u=u.next}while(o);ph=!1}}function qy(){og()}function og(){yp=fh=!1;var e=0;Bu!==0&&Qy()&&(e=Bu);for(var t=_n(),o=null,u=xp;u!==null;){var h=u.next,m=sg(u,t);m===0?(u.next=null,o===null?xp=h:o.next=h,h===null&&(Ud=o)):(o=u,(e!==0||(m&3)!==0)&&(yp=!0)),u=h}rn!==0&&rn!==5||bf(e),Bu!==0&&(Bu=0)}function sg(e,t){for(var o=e.suspendedLanes,u=e.pingedLanes,h=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var I=31-it(m),se=1<<I,Oe=h[I];Oe===-1?((se&o)===0||(se&u)!==0)&&(h[I]=In(se,t)):Oe<=t&&(e.expiredLanes|=se),m&=~se}if(t=ge,o=de,o=Ot(e,e===t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,o===0||e===t&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&Gt(u),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||ji(e,o)){if(t=o&-o,t===e.callbackPriority)return t;switch(u!==null&&Gt(u),$t(o)){case 2:case 8:o=ke;break;case 32:o=Xe;break;case 268435456:o=Pt;break;default:o=Xe}return u=lg.bind(null,e),o=Je(o,u),e.callbackPriority=t,e.callbackNode=o,t}return u!==null&&u!==null&&Gt(u),e.callbackPriority=2,e.callbackNode=null,2}function lg(e,t){if(rn!==0&&rn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(gp()&&e.callbackNode!==o)return null;var u=de;return u=Ot(e,e===ge?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(V0(e,u,t),sg(e,_n()),e.callbackNode!=null&&e.callbackNode===o?lg.bind(null,e):null)}function cg(e,t){if(gp())return null;V0(e,t,!0)}function Vy(){tm(function(){(le&6)!==0?Je(Le,qy):og()})}function hh(){if(Bu===0){var e=f;e===0&&(e=dn,dn<<=1,(dn&261888)===0&&(dn=256)),Bu=e}return Bu}function ug(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ur(""+e)}function dg(e,t){var o=t.ownerDocument.createElement("input");return o.name=t.name,o.value=t.value,e.id&&o.setAttribute("form",e.id),t.parentNode.insertBefore(o,t),e=new FormData(e),o.parentNode.removeChild(o),e}function Hy(e,t,o,u,h){if(t==="submit"&&o&&o.stateNode===h){var m=ug((h[ai]||null).action),I=u.submitter;I&&(t=(t=I[ai]||null)?ug(t.formAction):I.getAttribute("formAction"),t!==null&&(m=t,I=null));var se=new Po("action","action",null,u,h);e.push({event:se,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Bu!==0){var Oe=I?dg(h,I):new FormData(h);Ju(o,{pending:!0,data:Oe,method:h.method,action:m},null,Oe)}}else typeof m=="function"&&(se.preventDefault(),Oe=I?dg(h,I):new FormData(h),Ju(o,{pending:!0,data:Oe,method:h.method,action:m},m,Oe))},currentTarget:h}]})}}for(var gh=0;gh<nl.length;gh++){var xh=nl[gh],Wy=xh.toLowerCase(),$y=xh[0].toUpperCase()+xh.slice(1);hr(Wy,"on"+$y)}hr(aa,"onAnimationEnd"),hr(io,"onAnimationIteration"),hr(Qs,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(Es,"onTransitionRun"),hr(el,"onTransitionStart"),hr(yl,"onTransitionCancel"),hr(tl,"onTransitionEnd"),fo("onMouseEnter",["mouseout","mouseover"]),fo("onMouseLeave",["mouseout","mouseover"]),fo("onPointerEnter",["pointerout","pointerover"]),fo("onPointerLeave",["pointerout","pointerover"]),Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vf));function fg(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var u=e[o],h=u.event;u=u.listeners;e:{var m=void 0;if(t)for(var I=u.length-1;0<=I;I--){var se=u[I],Oe=se.instance,ot=se.currentTarget;if(se=se.listener,Oe!==m&&h.isPropagationStopped())break e;m=se,h.currentTarget=ot;try{m(h)}catch(vt){Ti(vt)}h.currentTarget=null,m=Oe}else for(I=0;I<u.length;I++){if(se=u[I],Oe=se.instance,ot=se.currentTarget,se=se.listener,Oe!==m&&h.isPropagationStopped())break e;m=se,h.currentTarget=ot;try{m(h)}catch(vt){Ti(vt)}h.currentTarget=null,m=Oe}}}}function Vi(e,t){var o=t[tr];o===void 0&&(o=t[tr]=new Set);var u=e+"__bubble";o.has(u)||(pg(t,e,2,!1),o.add(u))}function yh(e,t,o){var u=0;t&&(u|=4),pg(o,e,u,t)}var mp="_reactListening"+Math.random().toString(36).slice(2);function mh(e){if(!e[mp]){e[mp]=!0,Ns.forEach(function(o){o!=="selectionchange"&&(Yy.has(o)||yh(o,!1,e),yh(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mp]||(t[mp]=!0,yh("selectionchange",!1,t))}}function pg(e,t,o,u){switch(qg(t)){case 2:var h=wm;break;case 8:h=Sm;break;default:h=Rh}o=h.bind(null,t,o,e),h=void 0,!Cn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),u?h!==void 0?e.addEventListener(t,o,{capture:!0,passive:h}):e.addEventListener(t,o,!0):h!==void 0?e.addEventListener(t,o,{passive:h}):e.addEventListener(t,o,!1)}function bh(e,t,o,u,h){var m=u;if((t&1)===0&&(t&2)===0&&u!==null)e:for(;;){if(u===null)return;var I=u.tag;if(I===3||I===4){var se=u.stateNode.containerInfo;if(se===h)break;if(I===4)for(I=u.return;I!==null;){var Oe=I.tag;if((Oe===3||Oe===4)&&I.stateNode.containerInfo===h)return;I=I.return}for(;se!==null;){if(I=Zn(se),I===null)return;if(Oe=I.tag,Oe===5||Oe===6||Oe===26||Oe===27){u=m=I;continue e}se=se.parentNode}}u=u.return}lc(function(){var ot=m,vt=nr(o),At=[];e:{var st=Io.get(e);if(st!==void 0){var gt=Po,mn=e;switch(e){case"keypress":if(Jt(o)===0)break e;case"keydown":case"keyup":gt=wi;break;case"focusin":mn="focus",gt=bn;break;case"focusout":mn="blur",gt=bn;break;case"beforeblur":case"afterblur":gt=bn;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=as;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Mi;break;case aa:case io:case Qs:gt=S;break;case tl:gt=sr;break;case"scroll":case"scrollend":gt=Ds;break;case"wheel":gt=ya;break;case"copy":case"cut":case"paste":gt=Se;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Di;break;case"toggle":case"beforetoggle":gt=da}var Kn=(t&4)!==0,Fr=!Kn&&(e==="scroll"||e==="scrollend"),Ze=Kn?st!==null?st+"Capture":null:st;Kn=[];for(var qe=ot,at;qe!==null;){var Ct=qe;if(at=Ct.stateNode,Ct=Ct.tag,Ct!==5&&Ct!==26&&Ct!==27||at===null||Ze===null||(Ct=Za(qe,Ze),Ct!=null&&Kn.push(wf(qe,Ct,at))),Fr)break;qe=qe.return}0<Kn.length&&(st=new gt(st,mn,null,o,vt),At.push({event:st,listeners:Kn}))}}if((t&7)===0){e:{if(st=e==="mouseover"||e==="pointerover",gt=e==="mouseout"||e==="pointerout",st&&o!==or&&(mn=o.relatedTarget||o.fromElement)&&(Zn(mn)||mn[Li]))break e;if((gt||st)&&(st=vt.window===vt?vt:(st=vt.ownerDocument)?st.defaultView||st.parentWindow:window,gt?(mn=o.relatedTarget||o.toElement,gt=ot,mn=mn?Zn(mn):null,mn!==null&&(Fr=d(mn),Kn=mn.tag,mn!==Fr||Kn!==5&&Kn!==27&&Kn!==6)&&(mn=null)):(gt=null,mn=ot),gt!==mn)){if(Kn=gl,Ct="onMouseLeave",Ze="onMouseEnter",qe="mouse",(e==="pointerout"||e==="pointerover")&&(Kn=Di,Ct="onPointerLeave",Ze="onPointerEnter",qe="pointer"),Fr=gt==null?st:bi(gt),at=mn==null?st:bi(mn),st=new Kn(Ct,qe+"leave",gt,o,vt),st.target=Fr,st.relatedTarget=at,Ct=null,Zn(vt)===ot&&(Kn=new Kn(Ze,qe+"enter",mn,o,vt),Kn.target=at,Kn.relatedTarget=Fr,Ct=Kn),Fr=Ct,gt&&mn)t:{for(Kn=Gy,Ze=gt,qe=mn,at=0,Ct=Ze;Ct;Ct=Kn(Ct))at++;Ct=0;for(var qn=qe;qn;qn=Kn(qn))Ct++;for(;0<at-Ct;)Ze=Kn(Ze),at--;for(;0<Ct-at;)qe=Kn(qe),Ct--;for(;at--;){if(Ze===qe||qe!==null&&Ze===qe.alternate){Kn=Ze;break t}Ze=Kn(Ze),qe=Kn(qe)}Kn=null}else Kn=null;gt!==null&&hg(At,st,gt,Kn,!1),mn!==null&&Fr!==null&&hg(At,Fr,mn,Kn,!0)}}e:{if(st=ot?bi(ot):window,gt=st.nodeName&&st.nodeName.toLowerCase(),gt==="select"||gt==="input"&&st.type==="file")var xr=Go;else if(ls(st))if(eo)xr=xo;else{xr=wr;var Pn=lr}else gt=st.nodeName,!gt||gt.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?ot&&Fi(ot.elementType)&&(xr=Go):xr=Nc;if(xr&&(xr=xr(e,ot))){Qa(At,xr,o,vt);break e}Pn&&Pn(e,st,ot),e==="focusout"&&ot&&st.type==="number"&&ot.memoizedProps.value!=null&&Ea(st,"number",st.value)}switch(Pn=ot?bi(ot):window,e){case"focusin":(ls(Pn)||Pn.contentEditable==="true")&&(yo=Pn,fs=ot,no=null);break;case"focusout":no=fs=yo=null;break;case"mousedown":Xo=!0;break;case"contextmenu":case"mouseup":case"dragend":Xo=!1,Ki(At,o,vt);break;case"selectionchange":if(Pa)break;case"keydown":case"keyup":Ki(At,o,vt)}var ki;if(Dr)e:{switch(e){case"compositionstart":var Yi="onCompositionStart";break e;case"compositionend":Yi="onCompositionEnd";break e;case"compositionupdate":Yi="onCompositionUpdate";break e}Yi=void 0}else Ro?Hl(e,o)&&(Yi="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Yi="onCompositionStart");Yi&&(Do&&o.locale!=="ko"&&(Ro||Yi!=="onCompositionStart"?Yi==="onCompositionEnd"&&Ro&&(ki=hu()):(hn=vt,ci="value"in hn?hn.value:hn.textContent,Ro=!0)),Pn=bp(ot,Yi),0<Pn.length&&(Yi=new Ve(Yi,e,null,o,vt),At.push({event:Yi,listeners:Pn}),ki?Yi.data=ki:(ki=kc(o),ki!==null&&(Yi.data=ki)))),(ki=fa?za(e,o):ss(e,o))&&(Yi=bp(ot,"onBeforeInput"),0<Yi.length&&(Pn=new Ve("onBeforeInput","beforeinput",null,o,vt),At.push({event:Pn,listeners:Yi}),Pn.data=ki)),Hy(At,e,ot,o,vt)}fg(At,t)})}function wf(e,t,o){return{instance:e,listener:t,currentTarget:o}}function bp(e,t){for(var o=t+"Capture",u=[];e!==null;){var h=e,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Za(e,o),h!=null&&u.unshift(wf(e,h,m)),h=Za(e,t),h!=null&&u.push(wf(e,h,m))),e.tag===3)return u;e=e.return}return[]}function Gy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function hg(e,t,o,u,h){for(var m=t._reactName,I=[];o!==null&&o!==u;){var se=o,Oe=se.alternate,ot=se.stateNode;if(se=se.tag,Oe!==null&&Oe===u)break;se!==5&&se!==26&&se!==27||ot===null||(Oe=ot,h?(ot=Za(o,m),ot!=null&&I.unshift(wf(o,ot,Oe))):h||(ot=Za(o,m),ot!=null&&I.push(wf(o,ot,Oe)))),o=o.return}I.length!==0&&e.push({event:t,listeners:I})}var Xy=/\r\n?/g,Ky=/\u0000|\uFFFD/g;function gg(e){return(typeof e=="string"?e:""+e).replace(Xy,`
`).replace(Ky,"")}function xg(e,t){return t=gg(t),gg(e)===t}function Er(e,t,o,u,h,m){switch(o){case"children":typeof u=="string"?t==="body"||t==="textarea"&&u===""||ua(e,u):(typeof u=="number"||typeof u=="bigint")&&t!=="body"&&ua(e,""+u);break;case"className":Ps(e,"class",u);break;case"tabIndex":Ps(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ps(e,o,u);break;case"style":Mt(e,u,m);break;case"data":if(t!=="object"){Ps(e,"data",u);break}case"src":case"href":if(u===""&&(t!=="a"||o!=="href")){e.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(o);break}u=Ur(""+u),e.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(t!=="input"&&Er(e,t,"name",h.name,h,null),Er(e,t,"formEncType",h.formEncType,h,null),Er(e,t,"formMethod",h.formMethod,h,null),Er(e,t,"formTarget",h.formTarget,h,null)):(Er(e,t,"encType",h.encType,h,null),Er(e,t,"method",h.method,h,null),Er(e,t,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(o);break}u=Ur(""+u),e.setAttribute(o,u);break;case"onClick":u!=null&&(e.onclick=Ho);break;case"onScroll":u!=null&&Vi("scroll",e);break;case"onScrollEnd":u!=null&&Vi("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}o=Ur(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(o,""+u):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":u===!0?e.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(o,u):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(o,u):e.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(o):e.setAttribute(o,u);break;case"popover":Vi("beforetoggle",e),Vi("toggle",e),ar(e,"popover",u);break;case"xlinkActuate":Wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Wn(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Wn(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Wn(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Wn(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ar(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Vo.get(o)||o,ar(e,o,u))}}function vh(e,t,o,u,h,m){switch(o){case"style":Mt(e,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"children":typeof u=="string"?ua(e,u):(typeof u=="number"||typeof u=="bigint")&&ua(e,""+u);break;case"onScroll":u!=null&&Vi("scroll",e);break;case"onScrollEnd":u!=null&&Vi("scrollend",e);break;case"onClick":u!=null&&(e.onclick=Ho);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xi.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),t=o.slice(2,h?o.length-7:void 0),m=e[ai]||null,m=m!=null?m[o]:null,typeof m=="function"&&e.removeEventListener(t,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(t,u,h);break e}o in e?e[o]=u:u===!0?e.setAttribute(o,""):ar(e,o,u)}}}function ns(e,t,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vi("error",e),Vi("load",e);var u=!1,h=!1,m;for(m in o)if(o.hasOwnProperty(m)){var I=o[m];if(I!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Er(e,t,m,I,o,null)}}h&&Er(e,t,"srcSet",o.srcSet,o,null),u&&Er(e,t,"src",o.src,o,null);return;case"input":Vi("invalid",e);var se=m=I=h=null,Oe=null,ot=null;for(u in o)if(o.hasOwnProperty(u)){var vt=o[u];if(vt!=null)switch(u){case"name":h=vt;break;case"type":I=vt;break;case"checked":Oe=vt;break;case"defaultChecked":ot=vt;break;case"value":m=vt;break;case"defaultValue":se=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(s(137,t));break;default:Er(e,t,u,vt,o,null)}}sc(e,m,se,Oe,ot,I,h,!1);return;case"select":Vi("invalid",e),u=I=m=null;for(h in o)if(o.hasOwnProperty(h)&&(se=o[h],se!=null))switch(h){case"value":m=se;break;case"defaultValue":I=se;break;case"multiple":u=se;default:Er(e,t,h,se,o,null)}t=m,o=I,e.multiple=!!u,t!=null?Na(e,!!u,t,!1):o!=null&&Na(e,!!u,o,!0);return;case"textarea":Vi("invalid",e),m=h=u=null;for(I in o)if(o.hasOwnProperty(I)&&(se=o[I],se!=null))switch(I){case"value":u=se;break;case"defaultValue":h=se;break;case"children":m=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(91));break;default:Er(e,t,I,se,o,null)}Ka(e,u,h,m);return;case"option":for(Oe in o)if(o.hasOwnProperty(Oe)&&(u=o[Oe],u!=null))switch(Oe){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Er(e,t,Oe,u,o,null)}return;case"dialog":Vi("beforetoggle",e),Vi("toggle",e),Vi("cancel",e),Vi("close",e);break;case"iframe":case"object":Vi("load",e);break;case"video":case"audio":for(u=0;u<vf.length;u++)Vi(vf[u],e);break;case"image":Vi("error",e),Vi("load",e);break;case"details":Vi("toggle",e);break;case"embed":case"source":case"link":Vi("error",e),Vi("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ot in o)if(o.hasOwnProperty(ot)&&(u=o[ot],u!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Er(e,t,ot,u,o,null)}return;default:if(Fi(t)){for(vt in o)o.hasOwnProperty(vt)&&(u=o[vt],u!==void 0&&vh(e,t,vt,u,o,void 0));return}}for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!=null&&Er(e,t,se,u,o,null))}function Zy(e,t,o,u){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,I=null,se=null,Oe=null,ot=null,vt=null;for(gt in o){var At=o[gt];if(o.hasOwnProperty(gt)&&At!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":Oe=At;default:u.hasOwnProperty(gt)||Er(e,t,gt,null,u,At)}}for(var st in u){var gt=u[st];if(At=o[st],u.hasOwnProperty(st)&&(gt!=null||At!=null))switch(st){case"type":m=gt;break;case"name":h=gt;break;case"checked":ot=gt;break;case"defaultChecked":vt=gt;break;case"value":I=gt;break;case"defaultValue":se=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(s(137,t));break;default:gt!==At&&Er(e,t,st,gt,u,At)}}_r(e,I,se,Oe,ot,vt,m,h);return;case"select":gt=I=se=st=null;for(m in o)if(Oe=o[m],o.hasOwnProperty(m)&&Oe!=null)switch(m){case"value":break;case"multiple":gt=Oe;default:u.hasOwnProperty(m)||Er(e,t,m,null,u,Oe)}for(h in u)if(m=u[h],Oe=o[h],u.hasOwnProperty(h)&&(m!=null||Oe!=null))switch(h){case"value":st=m;break;case"defaultValue":se=m;break;case"multiple":I=m;default:m!==Oe&&Er(e,t,h,m,u,Oe)}t=se,o=I,u=gt,st!=null?Na(e,!!o,st,!1):!!u!=!!o&&(t!=null?Na(e,!!o,t,!0):Na(e,!!o,o?[]:"",!1));return;case"textarea":gt=st=null;for(se in o)if(h=o[se],o.hasOwnProperty(se)&&h!=null&&!u.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:Er(e,t,se,null,u,h)}for(I in u)if(h=u[I],m=o[I],u.hasOwnProperty(I)&&(h!=null||m!=null))switch(I){case"value":st=h;break;case"defaultValue":gt=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==m&&Er(e,t,I,h,u,m)}hl(e,st,gt);return;case"option":for(var mn in o)if(st=o[mn],o.hasOwnProperty(mn)&&st!=null&&!u.hasOwnProperty(mn))switch(mn){case"selected":e.selected=!1;break;default:Er(e,t,mn,null,u,st)}for(Oe in u)if(st=u[Oe],gt=o[Oe],u.hasOwnProperty(Oe)&&st!==gt&&(st!=null||gt!=null))switch(Oe){case"selected":e.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:Er(e,t,Oe,st,u,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kn in o)st=o[Kn],o.hasOwnProperty(Kn)&&st!=null&&!u.hasOwnProperty(Kn)&&Er(e,t,Kn,null,u,st);for(ot in u)if(st=u[ot],gt=o[ot],u.hasOwnProperty(ot)&&st!==gt&&(st!=null||gt!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(s(137,t));break;default:Er(e,t,ot,st,u,gt)}return;default:if(Fi(t)){for(var Fr in o)st=o[Fr],o.hasOwnProperty(Fr)&&st!==void 0&&!u.hasOwnProperty(Fr)&&vh(e,t,Fr,void 0,u,st);for(vt in u)st=u[vt],gt=o[vt],!u.hasOwnProperty(vt)||st===gt||st===void 0&&gt===void 0||vh(e,t,vt,st,u,gt);return}}for(var Ze in o)st=o[Ze],o.hasOwnProperty(Ze)&&st!=null&&!u.hasOwnProperty(Ze)&&Er(e,t,Ze,null,u,st);for(At in u)st=u[At],gt=o[At],!u.hasOwnProperty(At)||st===gt||st==null&&gt==null||Er(e,t,At,st,u,gt)}function yg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var h=o[u],m=h.transferSize,I=h.initiatorType,se=h.duration;if(m&&se&&yg(I)){for(I=0,se=h.responseEnd,u+=1;u<o.length;u++){var Oe=o[u],ot=Oe.startTime;if(ot>se)break;var vt=Oe.transferSize,At=Oe.initiatorType;vt&&yg(At)&&(Oe=Oe.responseEnd,I+=vt*(Oe<se?1:(se-ot)/(Oe-ot)))}if(--u,t+=8*(m+I)/(h.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wh=null,Sh=null;function vp(e){return e.nodeType===9?e:e.ownerDocument}function mg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function jh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Th=null;function Qy(){var e=window.event;return e&&e.type==="popstate"?e===Th?!1:(Th=e,!0):(Th=null,!1)}var vg=typeof setTimeout=="function"?setTimeout:void 0,em=typeof clearTimeout=="function"?clearTimeout:void 0,wg=typeof Promise=="function"?Promise:void 0,tm=typeof queueMicrotask=="function"?queueMicrotask:typeof wg<"u"?function(e){return wg.resolve(null).then(e).catch(nm)}:vg;function nm(e){setTimeout(function(){throw e})}function Ou(e){return e==="head"}function Sg(e,t){var o=t,u=0;do{var h=o.nextSibling;if(e.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(u===0){e.removeChild(h),Wd(t);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Sf(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,Sf(o);for(var m=o.firstChild;m;){var I=m.nextSibling,se=m.nodeName;m[No]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=I}}else o==="body"&&Sf(e.ownerDocument.body);o=h}while(o);Wd(t)}function jg(e,t){var o=e;e=0;do{var u=o.nextSibling;if(o.nodeType===1?t?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(t?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=u}while(o)}function Ch(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var o=t;switch(t=t.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ch(o),is(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function im(e,t,o,u){for(;e.nodeType===1;){var h=o;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[No])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=nc(e.nextSibling),e===null)break}return null}function rm(e,t,o){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=nc(e.nextSibling),e===null))return null;return e}function Tg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=nc(e.nextSibling),e===null))return null;return e}function kh(e){return e.data==="$?"||e.data==="$~"}function Nh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function am(e,t){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||o.readyState!=="loading")t();else{var u=function(){t(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function nc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ah=null;function Cg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(t===0)return nc(e.nextSibling);t--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||t++}e=e.nextSibling}return null}function kg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(t===0)return e;t--}else o!=="/$"&&o!=="/&"||t++}e=e.previousSibling}return null}function Ng(e,t,o){switch(t=vp(o),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Sf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);is(e)}var ic=new Map,Ag=new Set;function wp(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var cu=ve.d;ve.d={f:om,r:sm,D:lm,C:cm,L:um,m:dm,X:pm,S:fm,M:hm};function om(){var e=cu.f(),t=fp();return e||t}function sm(e){var t=ka(e);t!==null&&t.tag===5&&t.type==="form"?Cu(t):cu.r(e)}var qd=typeof document>"u"?null:document;function zg(e,t,o){var u=qd;if(u&&typeof t=="string"&&t){var h=yi(t);h='link[rel="'+e+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),Ag.has(h)||(Ag.add(h),e={rel:e,crossOrigin:o,href:t},u.querySelector(h)===null&&(t=u.createElement("link"),ns(t,"link",e),Fn(t),u.head.appendChild(t)))}}function lm(e){cu.D(e),zg("dns-prefetch",e,null)}function cm(e,t){cu.C(e,t),zg("preconnect",e,t)}function um(e,t,o){cu.L(e,t,o);var u=qd;if(u&&e&&t){var h='link[rel="preload"][as="'+yi(t)+'"]';t==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+yi(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+yi(o.imageSizes)+'"]')):h+='[href="'+yi(e)+'"]';var m=h;switch(t){case"style":m=Vd(e);break;case"script":m=Hd(e)}ic.has(m)||(e=D({rel:"preload",href:t==="image"&&o&&o.imageSrcSet?void 0:e,as:t},o),ic.set(m,e),u.querySelector(h)!==null||t==="style"&&u.querySelector(jf(m))||t==="script"&&u.querySelector(Tf(m))||(t=u.createElement("link"),ns(t,"link",e),Fn(t),u.head.appendChild(t)))}}function dm(e,t){cu.m(e,t);var o=qd;if(o&&e){var u=t&&typeof t.as=="string"?t.as:"script",h='link[rel="modulepreload"][as="'+yi(u)+'"][href="'+yi(e)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Hd(e)}if(!ic.has(m)&&(e=D({rel:"modulepreload",href:e},t),ic.set(m,e),o.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Tf(m)))return}u=o.createElement("link"),ns(u,"link",e),Fn(u),o.head.appendChild(u)}}}function fm(e,t,o){cu.S(e,t,o);var u=qd;if(u&&e){var h=uo(u).hoistableStyles,m=Vd(e);t=t||"default";var I=h.get(m);if(!I){var se={loading:0,preload:null};if(I=u.querySelector(jf(m)))se.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":t},o),(o=ic.get(m))&&zh(e,o);var Oe=I=u.createElement("link");Fn(Oe),ns(Oe,"link",e),Oe._p=new Promise(function(ot,vt){Oe.onload=ot,Oe.onerror=vt}),Oe.addEventListener("load",function(){se.loading|=1}),Oe.addEventListener("error",function(){se.loading|=2}),se.loading|=4,Sp(I,t,u)}I={type:"stylesheet",instance:I,count:1,state:se},h.set(m,I)}}}function pm(e,t){cu.X(e,t);var o=qd;if(o&&e){var u=uo(o).hoistableScripts,h=Hd(e),m=u.get(h);m||(m=o.querySelector(Tf(h)),m||(e=D({src:e,async:!0},t),(t=ic.get(h))&&Ph(e,t),m=o.createElement("script"),Fn(m),ns(m,"link",e),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function hm(e,t){cu.M(e,t);var o=qd;if(o&&e){var u=uo(o).hoistableScripts,h=Hd(e),m=u.get(h);m||(m=o.querySelector(Tf(h)),m||(e=D({src:e,async:!0,type:"module"},t),(t=ic.get(h))&&Ph(e,t),m=o.createElement("script"),Fn(m),ns(m,"link",e),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function Pg(e,t,o,u){var h=(h=xe.current)?wp(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(t=Vd(o.href),o=uo(h).hoistableStyles,u=o.get(t),u||(u={type:"style",instance:null,count:0,state:null},o.set(t,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Vd(o.href);var m=uo(h).hoistableStyles,I=m.get(e);if(I||(h=h.ownerDocument||h,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,I),(m=h.querySelector(jf(e)))&&!m._p&&(I.instance=m,I.state.loading=5),ic.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ic.set(e,o),m||gm(h,e,o,I.state))),t&&u===null)throw Error(s(528,""));return I}if(t&&u!==null)throw Error(s(529,""));return null;case"script":return t=o.async,o=o.src,typeof o=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Hd(o),o=uo(h).hoistableScripts,u=o.get(t),u||(u={type:"script",instance:null,count:0,state:null},o.set(t,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Vd(e){return'href="'+yi(e)+'"'}function jf(e){return'link[rel="stylesheet"]['+e+"]"}function _g(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function gm(e,t,o,u){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?u.loading=1:(t=e.createElement("link"),u.preload=t,t.addEventListener("load",function(){return u.loading|=1}),t.addEventListener("error",function(){return u.loading|=2}),ns(t,"link",o),Fn(t),e.head.appendChild(t))}function Hd(e){return'[src="'+yi(e)+'"]'}function Tf(e){return"script[async]"+e}function Dg(e,t,o){if(t.count++,t.instance===null)switch(t.type){case"style":var u=e.querySelector('style[data-href~="'+yi(o.href)+'"]');if(u)return t.instance=u,Fn(u),u;var h=D({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),Fn(u),ns(u,"style",h),Sp(u,o.precedence,e),t.instance=u;case"stylesheet":h=Vd(o.href);var m=e.querySelector(jf(h));if(m)return t.state.loading|=4,t.instance=m,Fn(m),m;u=_g(o),(h=ic.get(h))&&zh(u,h),m=(e.ownerDocument||e).createElement("link"),Fn(m);var I=m;return I._p=new Promise(function(se,Oe){I.onload=se,I.onerror=Oe}),ns(m,"link",u),t.state.loading|=4,Sp(m,o.precedence,e),t.instance=m;case"script":return m=Hd(o.src),(h=e.querySelector(Tf(m)))?(t.instance=h,Fn(h),h):(u=o,(h=ic.get(m))&&(u=D({},o),Ph(u,h)),e=e.ownerDocument||e,h=e.createElement("script"),Fn(h),ns(h,"link",u),e.head.appendChild(h),t.instance=h);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(u=t.instance,t.state.loading|=4,Sp(u,o.precedence,e));return t.instance}function Sp(e,t,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,I=0;I<u.length;I++){var se=u[I];if(se.dataset.precedence===t)m=se;else if(m!==h)break}m?m.parentNode.insertBefore(e,m.nextSibling):(t=o.nodeType===9?o.head:o,t.insertBefore(e,t.firstChild))}function zh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ph(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var jp=null;function Rg(e,t,o){if(jp===null){var u=new Map,h=jp=new Map;h.set(o,u)}else h=jp,u=h.get(o),u||(u=new Map,h.set(o,u));if(u.has(e))return u;for(u.set(e,null),o=o.getElementsByTagName(e),h=0;h<o.length;h++){var m=o[h];if(!(m[No]||m[Gn]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var I=m.getAttribute(t)||"";I=e+I;var se=u.get(I);se?se.push(m):u.set(I,[m])}}return u}function Lg(e,t,o){e=e.ownerDocument||e,e.head.insertBefore(o,t==="title"?e.querySelector("head > title"):null)}function xm(e,t,o){if(o===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Mg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ym(e,t,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=Vd(u.href),m=t.querySelector(jf(h));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Tp.bind(e),t.then(e,e)),o.state.loading|=4,o.instance=m,Fn(m);return}m=t.ownerDocument||t,u=_g(u),(h=ic.get(h))&&zh(u,h),m=m.createElement("link"),Fn(m);var I=m;I._p=new Promise(function(se,Oe){I.onload=se,I.onerror=Oe}),ns(m,"link",u),o.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,t),(t=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=Tp.bind(e),t.addEventListener("load",o),t.addEventListener("error",o))}}var _h=0;function mm(e,t){return e.stylesheets&&e.count===0&&kp(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var u=setTimeout(function(){if(e.stylesheets&&kp(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+t);0<e.imgBytes&&_h===0&&(_h=62500*Jy());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&kp(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>_h?50:800)+t);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function Tp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Cp=null;function kp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Cp=new Map,t.forEach(bm,e),Cp=null,Tp.call(e))}function bm(e,t){if(!(t.state.loading&4)){var o=Cp.get(e);if(o)var u=o.get(null);else{o=new Map,Cp.set(e,o);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var I=h[m];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(o.set(I.dataset.precedence,I),u=I)}u&&o.set(null,u)}h=t.instance,I=h.getAttribute("data-precedence"),m=o.get(I)||u,m===u&&o.set(null,h),o.set(I,h),this.count++,u=Tp.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),t.state.loading|=4}}var Cf={$$typeof:X,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function vm(e,t,o,u,h,m,I,se,Oe){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Oe,this.incompleteTransitions=new Map}function Ig(e,t,o,u,h,m,I,se,Oe,ot,vt,At){return e=new vm(e,t,o,I,Oe,ot,vt,At,se),t=1,m===!0&&(t|=24),m=Ua(3,null,null,t),e.current=m,m.stateNode=e,t=Va(),t.refCount++,e.pooledCache=t,t.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:t},Ht(m),e}function Bg(e){return e?(e=ba,e):ba}function Og(e,t,o,u,h,m){h=Bg(h),u.context===null?u.context=h:u.pendingContext=h,u=Dn(t),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=si(e,u,t),o!==null&&(dl(o,e,t),Ji(o,e,t))}function Eg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function Dh(e,t){Eg(e,t),(e=e.alternate)&&Eg(e,t)}function Fg(e){if(e.tag===13||e.tag===31){var t=ps(e,67108864);t!==null&&dl(t,e,67108864),Dh(e,67108864)}}function Ug(e){if(e.tag===13||e.tag===31){var t=la();t=Vt(t);var o=ps(e,t);o!==null&&dl(o,e,t),Dh(e,t)}}var Np=!0;function wm(e,t,o,u){var h=ae.T;ae.T=null;var m=ve.p;try{ve.p=2,Rh(e,t,o,u)}finally{ve.p=m,ae.T=h}}function Sm(e,t,o,u){var h=ae.T;ae.T=null;var m=ve.p;try{ve.p=8,Rh(e,t,o,u)}finally{ve.p=m,ae.T=h}}function Rh(e,t,o,u){if(Np){var h=Lh(u);if(h===null)bh(e,t,u,Ap,o),Vg(e,u);else if(Tm(h,e,t,o,u))u.stopPropagation();else if(Vg(e,u),t&4&&-1<jm.indexOf(e)){for(;h!==null;){var m=ka(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var I=xn(m.pendingLanes);if(I!==0){var se=m;for(se.pendingLanes|=2,se.entangledLanes|=2;I;){var Oe=1<<31-it(I);se.entanglements[1]|=Oe,I&=~Oe}Fc(m),(le&6)===0&&(Mn=_n()+500,bf(0))}}break;case 31:case 13:se=ps(m,2),se!==null&&dl(se,m,2),fp(),Dh(m,2)}if(m=Lh(u),m===null&&bh(e,t,u,Ap,o),m===h)break;h=m}h!==null&&u.stopPropagation()}else bh(e,t,u,null,o)}}function Lh(e){return e=nr(e),Mh(e)}var Ap=null;function Mh(e){if(Ap=null,e=Zn(e),e!==null){var t=d(e);if(t===null)e=null;else{var o=t.tag;if(o===13){if(e=v(t),e!==null)return e;e=null}else if(o===31){if(e=p(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ap=e,null}function qg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rt()){case Le:return 2;case ke:return 8;case Xe:case et:return 32;case Pt:return 268435456;default:return 32}default:return 32}}var Ih=!1,Eu=null,Fu=null,Uu=null,kf=new Map,Nf=new Map,qu=[],jm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vg(e,t){switch(e){case"focusin":case"focusout":Eu=null;break;case"dragenter":case"dragleave":Fu=null;break;case"mouseover":case"mouseout":Uu=null;break;case"pointerover":case"pointerout":kf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nf.delete(t.pointerId)}}function Af(e,t,o,u,h,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},t!==null&&(t=ka(t),t!==null&&Fg(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function Tm(e,t,o,u,h){switch(t){case"focusin":return Eu=Af(Eu,e,t,o,u,h),!0;case"dragenter":return Fu=Af(Fu,e,t,o,u,h),!0;case"mouseover":return Uu=Af(Uu,e,t,o,u,h),!0;case"pointerover":var m=h.pointerId;return kf.set(m,Af(kf.get(m)||null,e,t,o,u,h)),!0;case"gotpointercapture":return m=h.pointerId,Nf.set(m,Af(Nf.get(m)||null,e,t,o,u,h)),!0}return!1}function Hg(e){var t=Zn(e.target);if(t!==null){var o=d(t);if(o!==null){if(t=o.tag,t===13){if(t=v(o),t!==null){e.blockedOn=t,En(e.priority,function(){Ug(o)});return}}else if(t===31){if(t=p(o),t!==null){e.blockedOn=t,En(e.priority,function(){Ug(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Lh(e.nativeEvent);if(o===null){o=e.nativeEvent;var u=new o.constructor(o.type,o);or=u,o.target.dispatchEvent(u),or=null}else return t=ka(o),t!==null&&Fg(t),e.blockedOn=o,!1;t.shift()}return!0}function Wg(e,t,o){zp(e)&&o.delete(t)}function Cm(){Ih=!1,Eu!==null&&zp(Eu)&&(Eu=null),Fu!==null&&zp(Fu)&&(Fu=null),Uu!==null&&zp(Uu)&&(Uu=null),kf.forEach(Wg),Nf.forEach(Wg)}function Pp(e,t){e.blockedOn===t&&(e.blockedOn=null,Ih||(Ih=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Cm)))}var _p=null;function $g(e){_p!==e&&(_p=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){_p===e&&(_p=null);for(var t=0;t<e.length;t+=3){var o=e[t],u=e[t+1],h=e[t+2];if(typeof u!="function"){if(Mh(u||o)===null)continue;break}var m=ka(o);m!==null&&(e.splice(t,3),t-=3,Ju(m,{pending:!0,data:h,method:o.method,action:u},u,h))}}))}function Wd(e){function t(Oe){return Pp(Oe,e)}Eu!==null&&Pp(Eu,e),Fu!==null&&Pp(Fu,e),Uu!==null&&Pp(Uu,e),kf.forEach(t),Nf.forEach(t);for(var o=0;o<qu.length;o++){var u=qu[o];u.blockedOn===e&&(u.blockedOn=null)}for(;0<qu.length&&(o=qu[0],o.blockedOn===null);)Hg(o),o.blockedOn===null&&qu.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],I=h[ai]||null;if(typeof m=="function")I||$g(o);else if(I){var se=null;if(m&&m.hasAttribute("formAction")){if(h=m,I=m[ai]||null)se=I.formAction;else if(Mh(h)!==null)continue}else se=I.action;typeof se=="function"?o[u+1]=se:(o.splice(u,3),u-=3),$g(o)}}}function Yg(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(I){return h=I})},focusReset:"manual",scroll:"manual"})}function t(){h!==null&&(h(),h=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),h!==null&&(h(),h=null)}}}function Bh(e){this._internalRoot=e}Dp.prototype.render=Bh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var o=t.current,u=la();Og(o,u,e,t,null,null)},Dp.prototype.unmount=Bh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Og(e.current,2,null,e,null,null),fp(),t[Li]=null}};function Dp(e){this._internalRoot=e}Dp.prototype.unstable_scheduleHydration=function(e){if(e){var t=On();e={blockedOn:null,target:e,priority:t};for(var o=0;o<qu.length&&t!==0&&t<qu[o].priority;o++);qu.splice(o,0,e),o===0&&Hg(e)}};var Gg=r.version;if(Gg!=="19.2.0")throw Error(s(527,Gg,"19.2.0"));ve.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(t),e=e!==null?C(e):null,e=e===null?null:e.stateNode,e};var km={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rp.isDisabled&&Rp.supportsFiber)try{Ut=Rp.inject(km),qt=Rp}catch{}}return Pf.createRoot=function(e,t){if(!l(e))throw Error(s(299));var o=!1,u="",h=Jf,m=Qf,I=ms;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(u=t.identifierPrefix),t.onUncaughtError!==void 0&&(h=t.onUncaughtError),t.onCaughtError!==void 0&&(m=t.onCaughtError),t.onRecoverableError!==void 0&&(I=t.onRecoverableError)),t=Ig(e,1,!1,null,null,o,u,null,h,m,I,Yg),e[Li]=t.current,mh(e),new Bh(t)},Pf.hydrateRoot=function(e,t,o){if(!l(e))throw Error(s(299));var u=!1,h="",m=Jf,I=Qf,se=ms,Oe=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(I=o.onCaughtError),o.onRecoverableError!==void 0&&(se=o.onRecoverableError),o.formState!==void 0&&(Oe=o.formState)),t=Ig(e,1,!0,t,o??null,u,h,Oe,m,I,se,Yg),t.context=Bg(null),o=t.current,u=la(),u=Vt(u),h=Dn(u),h.callback=null,si(o,h,u),o=u,t.current.lanes=o,Ft(t,o),Fc(t),e[Li]=t.current,mh(e),new Dp(t)},Pf.version="19.2.0",Pf}var r1;function Bm(){if(r1)return Fh.exports;r1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),Fh.exports=Im(),Fh.exports}var Om=Bm();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fm=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,a,s)=>s?s.toUpperCase():a.toLowerCase()),a1=i=>{const r=Fm(i);return r.charAt(0).toUpperCase()+r.slice(1)},_x=(...i)=>i.filter((r,a,s)=>!!r&&r.trim()!==""&&s.indexOf(r)===a).join(" ").trim(),Um=i=>{for(const r in i)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=M.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:l="",children:d,iconNode:v,...p},b)=>M.createElement("svg",{ref:b,...qm,width:r,height:r,stroke:i,strokeWidth:s?Number(a)*24/Number(r):a,className:_x("lucide",l),...!d&&!Um(p)&&{"aria-hidden":"true"},...p},[...v.map(([y,C])=>M.createElement(y,C)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=(i,r)=>{const a=M.forwardRef(({className:s,...l},d)=>M.createElement(Vm,{ref:d,iconNode:r,className:_x(`lucide-${Em(a1(i))}`,`lucide-${i}`,s),...l}));return a.displayName=a1(i),a};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Wm=Dx("mouse-pointer",Hm);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ym=Dx("pen-line",$m),Gm=JSON.parse('[{"category":"Capacitors","subcategory":"General","type":"Capacitor","displayName":"Capacitor","description":"General purpose capacitor","searchText":"capacitor general","designator":"C","defaultPins":2,"properties":{"capacitorType":"General"},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"dielectric","label":"Dielectric","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Electrolytic","type":"Capacitor","displayName":"Electrolytic","description":"Electrolytic capacitor","searchText":"electrolytic capacitor","designator":"CE","defaultPins":2,"properties":{"capacitorType":"Electrolytic","polarized":true},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"20%","required":false},{"name":"esr","label":"ESR","type":"number","units":["m",""],"defaultUnit":"","required":false},{"name":"temperature","label":"Temperature Range","type":"string","required":false},{"name":"ripple","label":"Ripple Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"leakageCurrent","label":"Leakage Current","type":"number","units":["A","mA"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Film","type":"Capacitor","displayName":"Film","description":"Film capacitor","searchText":"film capacitor","designator":"CF","defaultPins":2,"properties":{"capacitorType":"Film"},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"nF","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"10%","required":false},{"name":"filmType","label":"Film Type","type":"enum","enumValues":["Polyester","Polypropylene","Polyethylene","Polystyrene","Teflon"],"defaultValue":"Polyester","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Tantalum","type":"Capacitor","displayName":"Tantalum","description":"Tantalum capacitor","searchText":"tantalum capacitor","designator":"C","defaultPins":2,"properties":{"capacitorType":"Tantalum","dielectric":"Tantalum","polarized":true},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"esr","label":"ESR","type":"number","units":["m",""],"defaultUnit":"","required":false},{"name":"leakageCurrent","label":"Leakage Current","type":"number","units":["A","mA"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Diodes","subcategory":"Standard","type":"Diode","displayName":"Diode","description":"Standard diode","searchText":"diode standard","designator":"D","defaultPins":2,"subtype":"Standard","properties":{"diodeType":"Standard","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Zener","type":"Diode","displayName":"Zener","description":"Zener diode","searchText":"zener diode","designator":"Z","defaultPins":2,"subtype":"Zener","properties":{"diodeType":"Zener","polarized":true},"fields":[{"name":"voltage","label":"Zener Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"mA","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"LED","type":"Diode","displayName":"LED","description":"LED diode","searchText":"led diode","designator":"LED","defaultPins":2,"subtype":"LED","properties":{"diodeType":"LED","polarized":true},"fields":[{"name":"voltage","label":"Forward Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Forward Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"ledColor","label":"Color","type":"string","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Schottky","type":"Diode","displayName":"Schottky","description":"Schottky diode","searchText":"schottky diode","designator":"D","defaultPins":2,"subtype":"Schottky","properties":{"diodeType":"Schottky","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Infrared","type":"Diode","displayName":"Infrared","description":"Infrared diode","searchText":"infrared diode","designator":"IR","defaultPins":2,"subtype":"Infrared","properties":{"diodeType":"Infrared","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Photodiode","type":"Diode","displayName":"Photodiode","description":"Photodiode","searchText":"photodiode diode","designator":"PD","defaultPins":2,"subtype":"Photodiode","properties":{"diodeType":"Photodiode","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Resistors","subcategory":"Standard","type":"Resistor","displayName":"Resistor","description":"Standard resistor","searchText":"resistor standard","designator":"R","defaultPins":2,"properties":{"resistorType":"Standard"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"5%","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Network","type":"Resistor","displayName":"Resistor Network","description":"Resistor network","searchText":"resistor network","designator":"RN","defaultPins":8,"properties":{"resistorType":"Network"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"configuration","label":"Configuration","type":"enum","enumValues":["Isolated","Bussed","Dual Terminator"],"defaultValue":"Isolated","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Thermistor","type":"Resistor","displayName":"Thermistor","description":"Thermistor resistor","searchText":"thermistor resistor","designator":"RT","defaultPins":2,"properties":{"resistorType":"Thermistor"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"thermistorType","label":"Thermistor Type","type":"enum","enumValues":["NTC","PTC"],"defaultValue":"NTC","required":false},{"name":"beta","label":"Beta Value","type":"number","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Resistors","subcategory":"Variable","type":"Resistor","displayName":"Variable Resistor","description":"Variable resistor","searchText":"variable resistor","designator":"VR","defaultPins":3,"subtype":"Potentiometer","properties":{"resistorType":"Variable","vrType":"Potentiometer"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"taper","label":"Taper","type":"enum","enumValues":["Linear","Logarithmic"],"defaultValue":"Linear","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Varistor","type":"Resistor","displayName":"Varistor","description":"Varistor resistor","searchText":"varistor resistor","designator":"RV","defaultPins":3,"subtype":"Varistor","properties":{"resistorType":"Variable","vrType":"Varistor"},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"BJT","type":"Semiconductor","displayName":"Transistor, BJT NPN","description":"Bipolar Junction Transistor NPN (Collector, Base, Emitter)","searchText":"bjt transistor bipolar junction base emitter collector npn","designator":"Q","defaultPins":3,"properties":{"semiconductorType":"Transistor","transistorType":"BJT","pinNames":["Collector","Base","Emitter"]},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"BJT PNP","type":"Semiconductor","displayName":"Transistor, BJT PNP","description":"Bipolar Junction Transistor PNP (Emitter, Base, Collector)","searchText":"bjt transistor bipolar junction base emitter collector pnp","designator":"Q","defaultPins":3,"properties":{"semiconductorType":"Transistor","transistorType":"BJT","pinNames":["Emitter","Base","Collector"]},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"MOSFET","type":"Semiconductor","displayName":"Transistor, MOSFET, N-Channel","description":"Metal-Oxide-Semiconductor Field-Effect Transistor N-Channel (Source, Gate, Drain)","searchText":"mosfet transistor metal oxide semiconductor field effect source gate drain n-channel","designator":"Q","defaultPins":3,"properties":{"semiconductorType":"Transistor","transistorType":"MOSFET","pinNames":["Source","Drain","Gate"]},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"MOSFET P-Channel","type":"Semiconductor","displayName":"Transistor, MOSFET, P-Channel","description":"Metal-Oxide-Semiconductor Field-Effect Transistor P-Channel (Source, Gate, Drain)","searchText":"mosfet transistor metal oxide semiconductor field effect source gate drain p-channel","designator":"Q","defaultPins":3,"properties":{"semiconductorType":"Transistor","transistorType":"MOSFET","pinNames":["Source","Drain","Gate"]},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"JFET","type":"Semiconductor","displayName":"Transistor, JFET","description":"Junction Field-Effect Transistor (Source, Gate, Drain)","searchText":"jfet transistor junction field effect source gate drain n-channel p-channel","designator":"Q","defaultPins":3,"properties":{"semiconductorType":"Transistor","transistorType":"JFET","pinNames":["Source","Gate","Drain"]},"fields":[{"name":"polarity","label":"Polarity","type":"enum","enumValues":["N-Channel","P-Channel"],"defaultValue":"N-Channel","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"Single Op Amp","type":"Semiconductor","displayName":"Op Amp, Single","description":"Single operational amplifier","searchText":"single op amp operational amplifier opamp","designator":"U","defaultPins":5,"properties":{"semiconductorType":"OpAmp","pinNames":["V+","V-","input+","input-","output"]},"fields":[{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"packageType","label":"Package Type","type":"enum","enumValues":["SOT-23-5","SC70-5","Other"],"defaultValue":"SOT-23-5","required":false},{"name":"voltage","label":"Supply Voltage","type":"number","units":["V","mV"],"defaultUnit":"V","required":false},{"name":"description","label":"Description","type":"string","required":false},{"name":"datasheet","label":"Datasheet URL","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"Dual Op Amp","type":"Semiconductor","displayName":"Op Amp, Dual","description":"Dual operational amplifier","searchText":"dual op amp operational amplifier opamp","designator":"U","defaultPins":8,"properties":{"semiconductorType":"OpAmp","pinNames":["Output 1","Input 1-","Input 1+","VEE / GND","Input 2+","Input 2-","Output 2","VCC / V+"]},"fields":[{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"packageType","label":"Package Type","type":"enum","enumValues":["DIP-8","SOIC-8","DIP-14","SOIC-14","SOT-23-5","Other"],"defaultValue":"DIP-8","required":false},{"name":"voltage","label":"Supply Voltage","type":"number","units":["V","mV"],"defaultUnit":"V","required":false},{"name":"description","label":"Description","type":"string","required":false},{"name":"datasheet","label":"Datasheet URL","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"Quad Op Amp","type":"Semiconductor","displayName":"Op Amp, Quad","description":"Quad operational amplifier","searchText":"quad op amp operational amplifier opamp","designator":"U","defaultPins":14,"properties":{"semiconductorType":"OpAmp","pinNames":["1OUT","1IN-","1IN+","VCC+","2IN+","2IN-","2OUT","3OUT","3IN-","3IN+","VCC-","4IN+","4IN-","4OUT"]},"fields":[{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"packageType","label":"Package Type","type":"enum","enumValues":["DIP-14","SOIC-14","TSSOP-14","Other"],"defaultValue":"DIP-14","required":false},{"name":"voltage","label":"Supply Voltage","type":"number","units":["V","mV"],"defaultUnit":"V","required":false},{"name":"description","label":"Description","type":"string","required":false},{"name":"datasheet","label":"Datasheet URL","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"Integrated Circuit","type":"Semiconductor","displayName":"Integrated Circuit","description":"Integrated circuit","searchText":"integrated circuit semiconductor ic","designator":"U","defaultPins":8,"fixedPinCount":false,"properties":{"semiconductorType":"IntegratedCircuit","pinNames":["CHIP_DEPENDENT"]},"fields":[{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"icType","label":"IC Type","type":"string","required":false},{"name":"packageType","label":"Package Type","type":"enum","enumValues":["DIP","SOIC","QFP","LQFP","TQFP","BGA","SSOP","TSOP","Various","Other"],"required":false},{"name":"description","label":"Description","type":"string","required":false},{"name":"datasheet","label":"Datasheet URL","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Passive Components","subcategory":"Inductor","type":"Inductor","displayName":"Inductor","description":"Inductor","searchText":"inductor","designator":"L","defaultPins":2,"properties":{"passiveType":"Inductor"},"fields":[{"name":"inductance","label":"Inductance","type":"number","units":["nH","H","mH","H"],"defaultUnit":"H","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"resistance","label":"DC Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Passive Components","subcategory":"Ferrite Bead","type":"FerriteBead","displayName":"Ferrite Bead","description":"Ferrite bead","searchText":"ferrite bead passive","designator":"FB","defaultPins":2,"properties":{"passiveType":"FerriteBead"},"fields":[{"name":"impedance","label":"Impedance","type":"number","units":["","m","k"],"defaultUnit":"","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Passive Components","subcategory":"Crystal","type":"Crystal","displayName":"Crystal","description":"Crystal oscillator","searchText":"crystal oscillator passive","designator":"X","defaultPins":2,"properties":{"passiveType":"Crystal"},"fields":[{"name":"frequency","label":"Frequency","type":"string","required":false},{"name":"loadCapacitance","label":"Load Capacitance","type":"string","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Battery","type":"PowerEnergy","displayName":"Battery","description":"Battery or battery holder","searchText":"battery power energy","designator":"B","defaultPins":2,"properties":{"powerType":"Battery","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"capacity","label":"Capacity","type":"number","units":["mAh","Ah"],"defaultUnit":"mAh","required":false},{"name":"chemistry","label":"Chemistry","type":"enum","enumValues":["Li-ion","Alkaline","NiMH","NiCd","Lead-acid"],"required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Power Supply","type":"PowerEnergy","displayName":"Power Supply","description":"Power supply","searchText":"power supply energy","designator":"PS","defaultPins":4,"properties":{"powerType":"PowerSupply"},"fields":[{"name":"inputVoltage","label":"Input Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"outputVoltage","label":"Output Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"efficiency","label":"Efficiency","type":"number","required":false},{"name":"ripple","label":"Ripple","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Fuse","type":"PowerEnergy","displayName":"Fuse","description":"Fuse","searchText":"fuse power energy","designator":"F","defaultPins":2,"properties":{"powerType":"Fuse"},"fields":[{"name":"current","label":"Current Rating","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"fuseType","label":"Fuse Type","type":"enum","enumValues":["Fast-blow","Slow-blow","Time-delay"],"defaultValue":"Fast-blow","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Connectors & Switches","subcategory":"Connector","type":"Connector","displayName":"Connector","description":"Connector","searchText":"connector","designator":"J","defaultPins":4,"properties":{"connectorType":"Connector"},"fields":[{"name":"connectorType","label":"Connector Type","type":"string","required":false},{"name":"gender","label":"Gender","type":"enum","enumValues":["Male","Female","N/A"],"defaultValue":"N/A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Jumper","type":"Jumper","displayName":"Jumper","description":"Jumper link","searchText":"jumper link","designator":"JP","defaultPins":3,"properties":{"connectorType":"Jumper"},"fields":[{"name":"positions","label":"Positions","type":"number","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Switch","type":"Switch","displayName":"Switch","description":"Switch","searchText":"switch","designator":"S","defaultPins":2,"properties":{"switchType":"Switch"},"fields":[{"name":"switchType","label":"Switch Type","type":"string","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Relay","type":"Relay","displayName":"Relay","description":"Relay or contactor","searchText":"relay contactor","designator":"K","defaultPins":5,"properties":{"switchType":"Relay"},"fields":[{"name":"coilVoltage","label":"Coil Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"contactType","label":"Contact Type","type":"string","required":false},{"name":"current","label":"Contact Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Other","subcategory":"Transformer","type":"Transformer","displayName":"Transformer","description":"Transformer","searchText":"transformer","designator":"TR","defaultPins":4,"fields":[{"name":"primaryVoltage","label":"Primary Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"secondaryVoltage","label":"Secondary Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"turns","label":"Turns Ratio","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Speaker","type":"Speaker","displayName":"Speaker","description":"Loudspeaker or buzzer","searchText":"speaker loudspeaker buzzer","designator":"LS","defaultPins":2,"fields":[{"name":"impedance","label":"Impedance","type":"number","units":["","m","k"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Motor","type":"Motor","displayName":"Motor","description":"Motor","searchText":"motor","designator":"M","defaultPins":2,"fields":[{"name":"motorType","label":"Motor Type","type":"string","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Test Point","type":"TestPoint","displayName":"Test Point","description":"Test point","searchText":"test point","designator":"TP","defaultPins":1,"fields":[{"name":"signal","label":"Signal","type":"string","required":false}]},{"category":"Other","subcategory":"Vacuum Tube","type":"VacuumTube","displayName":"Vacuum Tube","description":"Vacuum tube","searchText":"vacuum tube","designator":"V","defaultPins":5,"fields":[{"name":"tubeType","label":"Tube Type","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Attenuator","type":"GenericComponent","displayName":"Attenuator","description":"Attenuator or isolator","searchText":"attenuator isolator component","designator":"AT","defaultPins":2,"subtype":"Attenuator","fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Circuit Breaker","type":"GenericComponent","displayName":"Circuit Breaker","description":"Circuit breaker","searchText":"circuit breaker component","designator":"CB","defaultPins":2,"subtype":"CircuitBreaker","fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Thermocouple","type":"GenericComponent","displayName":"Thermocouple","description":"Thermocouple","searchText":"thermocouple component","designator":"TC","defaultPins":2,"subtype":"Thermocouple","fields":[{"name":"model","label":"Model","type":"string","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Tuner","type":"GenericComponent","displayName":"Tuner","description":"Tuner","searchText":"tuner component","designator":"TUN","defaultPins":2,"subtype":"Tuner","fields":[{"name":"frequency","label":"Frequency","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]}]'),ih={components:Gm},Xm=["#FFFFFF","#BFBFBF","#7F7F7F","#3C3C3C","#000000","#A6CEE3","#56B4E9","#17BECF","#00BFC4","#1F77B4","#0072B2","#332288","#B2DF8A","#B3DE69","#2CA02C","#009E73","#FFED6F","#F0E442","#BCBD22","#E69F00","#FF7F0E","#FB9A99","#F781BF","#E15759","#D62728","#CAB2D6","#CC79A7","#AA4499","#6A3D9A","#9467BD","#9C755F","#8C564B"],Hh="#2CA02C",Km="#F0E442",Zm="#00BFC4",Wh="#000000",Jm="#00008b",$h="#FF0000",I0={DEFAULT_SIZE:18},If={};ih.components.forEach(i=>{const r=i.type,a=i.designator;if(!If[r])If[r]={prefix:[a],defaultPins:i.defaultPins};else{const s=If[r],l=[...new Set([...s.prefix,a])];If[r]={prefix:l,defaultPins:s.defaultPins}}});const B0=If,$d={};ih.components.forEach(i=>{if($d[i.category]||($d[i.category]={}),!$d[i.category][i.subcategory])$d[i.category][i.subcategory]=[i.type];else{const r=$d[i.category][i.subcategory];r.includes(i.type)||($d[i.category][i.subcategory]=[...r,i.type])}});const Yh={DEFAULT_SIZE:18},Rx={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function Qi(i){return Rx[i]?.validUnits||[]}function ln(i){return Rx[i]?.defaultUnit||""}function Ul(i){return i.includes(" ")?i:i.replace(/([a-z])([A-Z])/g,"$1 $2")}const Co=Math.PI*2;function Lx(i){return(i%360+360)%360}function pu(i){return i*Math.PI/180}function Qm(i){return i*180/Math.PI}function w0(i,r){return Lx(i+r)}function Jp(i){return Math.tan(i)}function e2(i){return Math.cos(i)}function t2(i){return Math.sin(i)}function n2(i,r){return Math.atan2(i,r)}function i2(i,r){return Qm(n2(r,i))}function S0(i,r){const{x:a,y:s,rotation:l=0,scale:d=1,flipX:v=!1,flipY:p=!1,skewX:b=0,skewY:y=0}=r;if(i.translate(a,s),l!==0&&i.rotate(pu(l)),b!==0||y!==0){const O=Jp(b),T=Jp(y);i.transform(1,T,O,1,0,0)}const C=d*(v?-1:1),D=d*(p?-1:1);(C!==1||D!==1)&&i.scale(C,D)}function o1(i,r,a,s=0,l=!1,d=!1){S0(i,{x:r,y:a,rotation:s,flipX:l,flipY:d})}function Mx(i,r,a){const s=pu(a),l=e2(s),d=t2(s);return{x:i*l-r*d,y:i*d+r*l}}function r2(i,r=0,a=!1){a&&i.scale(-1,1),r!==0&&i.rotate(pu(r))}function a2(i,r=0,a=!1){const s=Lx(r),l=s===90||s===270;a&&i.scale(-1,1),r!==0&&i.rotate(pu(-r)),a&&l&&i.rotate(pu(180))}function s1(i,r,a,s=0,l=!1){let d=i/a,v=r/a;if(s!==0){const p=Mx(d,v,-s);d=p.x,v=p.y}return l&&(d=-d),{x:d,y:v}}function _f(i,r,a,s,l=0,d=!1){let v=i-a.x,p=r-a.y;if(v=v/s,p=p/s,d&&(v=-v),l!==0){const b=Mx(v,p,-l);v=b.x,p=b.y}return{x:v,y:p}}function o2(i,r=.4){if(i.startsWith("#")){const s=i.slice(1),l=parseInt(s.slice(0,2),16),d=parseInt(s.slice(2,4),16),v=parseInt(s.slice(4,6),16),p=Math.max(0,Math.floor(l*(1-r))),b=Math.max(0,Math.floor(d*(1-r))),y=Math.max(0,Math.floor(v*(1-r)));return`#${p.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}${y.toString(16).padStart(2,"0")}`}const a=i.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(a){const s=parseInt(a[1],10),l=parseInt(a[2],10),d=parseInt(a[3],10),v=a[4]?a[4].trim():"",p=Math.max(0,Math.floor(s*(1-r))),b=Math.max(0,Math.floor(l*(1-r))),y=Math.max(0,Math.floor(d*(1-r)));return i.includes("rgba")?`rgba(${p}, ${b}, ${y}${v?`, ${v}`:", 1"})`:`rgb(${p}, ${b}, ${y})`}return i}let Gs=1;const ac=new Set;function vc(){const i=Gs;if(Gs++,ac.has(i)){for(console.error(`CRITICAL ERROR: Duplicate Node ID ${i} would be allocated!`),console.error(`Current counter: ${Gs}, Allocated IDs count: ${ac.size}`);ac.has(Gs);)Gs++;const r=Gs;return Gs++,ac.add(r),console.error(`Recovered by allocating ID ${r} instead`),r}return ac.add(i),i}function Lp(i){i<1&&(console.warn(`setPointIdCounter called with invalid value ${i}, using 1`),i=1),Gs=i,ac.clear()}function Gh(){return Gs}function l1(){Gs=1,ac.clear()}function Xh(i){i>0&&(ac.add(i),i>=Gs&&(Gs=i+1))}function Mp(i){if(i>0&&ac.has(i))if(ac.delete(i),ac.size>0){const r=Math.max(...Array.from(ac));r<Gs&&(Gs=Math.max(1,r+1))}else Gs=1}function Ix(i="id"){return`${i}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function c1(i){return Math.round(i*1e4)/1e4}function rr(i){return{x:c1(i.x),y:c1(i.y)}}const Yu=ih.components;Yu.map(i=>({designator:i.designator,componentType:i.description}));function Fl(i){if(!i)return;const r=i.componentDefinitionKey;if(r){const s=Yu.find(l=>`${l.category}:${l.subcategory}:${l.type}`===r);if(s)return s}if(typeof i.designator=="string"&&i.designator.trim()!==""){const s=i.designator.trim().match(/^[A-Za-z]+/),l=s?s[0]:null;if(l){const d=Yu.find(v=>Array.isArray(v.designators)&&v.designators.includes(l));if(d)return d}}const a=i.componentType==="Electrolytic Capacitor"||i.componentType==="Film Capacitor"?"Capacitor":i.componentType;return Yu.find(s=>{if(s.type!==a)return!1;if(s.category==="Capacitors"){const l=i.capacitorType||i.dielectric;return!!(l&&s.properties?.capacitorType===l||!l)}if(s.category==="Diodes"){const l=i.diodeType;return!!(l&&s.properties?.diodeType===l||!s.properties?.diodeType)}if(s.category==="Resistors"){const l=i.resistorType,d=i.vrType;return!!(l&&s.properties?.resistorType===l||d&&s.properties?.vrType===d||!s.properties?.resistorType&&!s.properties?.vrType)}if(s.category==="Semiconductors"){const l=i.semiconductorType;return!!(l&&s.properties?.semiconductorType===l||!s.properties?.semiconductorType)}if(s.category==="Passive Components"){const l=i.passiveType;return!!(l&&s.properties?.passiveType===l||!s.properties?.passiveType)}if(s.category==="Power & Energy"){const l=i.powerType;return!!(l&&s.properties?.powerType===l||!s.properties?.powerType)}if(s.category==="Connectors & Switches"){const l=i.connectorType,d=i.switchType;return!!(l&&s.properties?.connectorType===l||d&&s.properties?.switchType===d||!s.properties?.connectorType&&!s.properties?.switchType)}if(i.componentType==="GenericComponent"){const l=i.genericType;return!!(l&&s.subtype===l)}return!0})}function Kh(i){return(B0[i]?.prefix||["?"])[0]}function Uf(i){return Fl(i)?.properties?.polarized===!0}function j0(i,r,a){if(!Uf(i)||i.pinCount!==2||!(r.length===2&&r[0]&&r[0].trim()!==""&&r[1]&&r[1].trim()!==""))return null;const l=C=>{const D=parseInt(C,10);if(isNaN(D))return null;for(const O of a)if((O.type==="via"||O.type==="pad")&&O.points.length>0){const T=O.points[0];if(T.id===D)return{x:T.x,y:T.y}}return null},d=l(r[0]),v=l(r[1]);if(!d||!v)return null;const p=Math.hypot(i.x-d.x,i.y-d.y),b=Math.hypot(i.x-v.x,i.y-v.y),y=["",""];return p<b?(y[0]="-",y[1]="+"):(y[0]="+",y[1]="-"),y}function Df(){return{}}function s2(i){}function l2(i,r,a){let s=0;for(const d of r)if(d.designator){const v=d.designator.match(new RegExp(`^${i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(v){const p=parseInt(v[1],10);p>s&&(s=p)}}const l=a[i]||0;return Math.max(s,l)+1}function u1(i,r,a){const s={...a};return s[i]=Math.max(s[i]||0,r),s}function c2(i){if(i.designator&&i.designator.trim()!=="")return i.designator.trim();switch(i.baseType){case"Capacitor":return"C";case"Diode":return"D";case"Resistor":return"R";case"Semiconductor":return"Q";case"Passive":return"L";case"PowerEnergy":return"PS";case"Connector":return"J";case"Switch":return"S";case"Transformer":return"T";case"Other":default:return"?"}}function u2(i,r,a){let s=0;for(const v of r){if(!v.designator||!v.designator.startsWith(i))continue;const p=parseInt(v.designator.slice(i.length),10);!isNaN(p)&&p>s&&(s=p)}const d=(a[i]??s)+1;return a[i]=d,d}function d2(i,r,a){const s=c2(i),l=u2(s,r,a);return`${s}${l}`}function f2(i){const{definition:r,layer:a,x:s,y:l,color:d,size:v,designator:p,existingComponents:b=[],counters:y={}}=i,C=v&&v>0?v:I0.DEFAULT_SIZE,D=p||d2(r,b,y),O={id:Ix("comp"),componentType:r.type,designator:D,layer:a,x:s,y:l,color:d,size:C,pinCount:r.defaultPins,pinConnections:new Array(r.defaultPins).fill(""),pinPolarities:void 0,notes:null,orientation:0,flipX:!1,flipY:!1,description:r.description};if(O.componentDefinitionKey=r.key,r.properties&&Object.assign(O,r.properties),r.properties?.pinNames&&Array.isArray(r.properties.pinNames)){const T=r.properties.pinNames;T.includes("CHIP_DEPENDENT")?O.pinNames=new Array(O.pinCount).fill(""):O.pinNames=new Array(O.pinCount).fill("").map((R,z)=>z<T.length?T[z]:"")}return r.fields&&r.fields.length>0&&r.fields.forEach(T=>{T.defaultValue!==void 0&&T.defaultValue!==""&&(O[T.name]=T.defaultValue),T.units&&T.defaultUnit&&(O[`${T.name}Unit`]=T.defaultUnit)}),O}function p2(){const i=document.createElement("canvas"),r=24;i.width=r,i.height=r;const a=i.getContext("2d");a.strokeStyle="#000",a.lineWidth=3,a.lineCap="round";const s=r/2,l=8;return a.beginPath(),a.moveTo(s,s-l),a.lineTo(s,s-2),a.moveTo(s,s+2),a.lineTo(s,s+l),a.moveTo(s-l,s),a.lineTo(s-2,s),a.moveTo(s+2,s),a.lineTo(s+l,s),a.stroke(),`url(${i.toDataURL()}) ${s} ${s}, crosshair`}function h2(i){const r=document.createElement("canvas"),a=Math.max(12,Math.min(i,32)),l=a+4*2;r.width=l,r.height=l;const d=r.getContext("2d"),v=l/2,p=l/2,b=a/2;return d.fillStyle="#FFFF00",d.strokeStyle="#000000",d.lineWidth=2,d.beginPath(),d.moveTo(v,p-b),d.lineTo(v+b,p),d.lineTo(v,p+b),d.lineTo(v-b,p),d.closePath(),d.fill(),d.stroke(),`url(${r.toDataURL()}) ${v} ${p}, crosshair`}function d1(){const i=new Date,r=i.getFullYear(),a=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0"),l=String(i.getHours()).padStart(2,"0"),d=String(i.getMinutes()).padStart(2,"0"),v=String(i.getSeconds()).padStart(2,"0");return`${r}_${a}_${s}-${l}-${d}-${v}`}function pd(i){let r=i.replace(/\.json$/i,""),a="";for(;a!==r;)a=r,r=r.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),r=r.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return r}function pi(i,r,a,s){if(r==="power"){const d=i[r]||"";return typeof d=="string"&&d.trim()!==""?{value:d.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(i[r]!==void 0||i[a]!==void 0)return{value:i[r]||"",unit:i[a]||s};const l=i[r]||"";return typeof l=="string"&&l.trim()!==""?Bx(l):{value:"",unit:s}}function Bx(i){if(!i||i.trim()==="")return{value:"",unit:""};const r=i.trim(),a=r.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(a)return{value:a[1],unit:a[2]||""};const s=r.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return s?{value:s[1],unit:s[2]||""}:{value:r,unit:""}}function hd(i,r){return!i||i.trim()===""?"":!r||r.trim()===""?i.trim():`${i.trim()}${r.trim()}`}function g2(){const[i,r]=M.useState([]),[a,s]=M.useState([]),[l,d]=M.useState(null),[v,p]=M.useState(null),[b,y]=M.useState(null),[C,D]=M.useState(!1),[O,T]=M.useState(null),K=M.useCallback((X,G)=>{G==="top"?r(J=>[...J,X]):s(J=>[...J,X])},[]),R=M.useCallback((X,G,J)=>{J==="top"?r(ue=>ue.map(oe=>oe.id===X?{...oe,...G}:oe)):s(ue=>ue.map(oe=>oe.id===X?{...oe,...G}:oe))},[]),z=M.useCallback((X,G)=>{G==="top"?r(J=>J.filter(ue=>ue.id!==X)):s(J=>J.filter(ue=>ue.id!==X))},[]),w=M.useCallback((X,G)=>{if(!X){console.error("[openComponentEditor] Component is null or undefined");return}if(!X.id||typeof X.id!="string"){console.error("[openComponentEditor] Component missing valid id property:",{component:X});return}const J=X.id;if(!X.componentType||typeof X.componentType!="string"){console.error("[openComponentEditor] Component missing valid componentType property:",{componentId:J,component:X});return}const ue=X.componentType;if(typeof X.pinCount!="number"||X.pinCount<0){console.error("[openComponentEditor] Component missing valid pinCount property:",{componentId:J,componentType:ue,pinCount:X.pinCount,component:X});return}if(G!=="top"&&G!=="bottom"){console.error("[openComponentEditor] Invalid layer parameter:",{layer:G,componentId:X.id});return}const oe=X.designator||"",ie=X.abbreviation||(oe.length>0?oe.charAt(0).toUpperCase():""),E=X.componentType,Y={visible:!0,layer:G,id:X.id,designator:oe,abbreviation:ie,manufacturer:"manufacturer"in X&&X.manufacturer||"",partNumber:"partNumber"in X&&X.partNumber||"",pinCount:X.pinCount,x:X.x,y:X.y,orientation:X.orientation??0,description:X.description||"",datasheet:X.datasheet||"",componentDefinitionKey:X.componentDefinitionKey||""};if(E==="Resistor"){const L=X,$=pi(L,"resistance","resistanceUnit",ln("resistance"));Y.resistance=$.value,Y.resistanceUnit=$.unit;const H=pi(L,"power","powerUnit","W");Y.power=H.value||"1/4",Y.tolerance=L.tolerance||"5%"}else if(E==="Capacitor"){const L=X,$=pi(L,"capacitance","capacitanceUnit",ln("capacitance"));Y.capacitance=$.value,Y.capacitanceUnit=$.unit;const H=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=H.value,Y.voltageUnit=H.unit,Y.tolerance=L.tolerance||"10%",Y.dielectric=L.dielectric||"Ceramic"}else if(E==="Electrolytic Capacitor"){const L=X,$=pi(L,"capacitance","capacitanceUnit",ln("capacitance"));Y.capacitance=$.value,Y.capacitanceUnit=$.unit;const H=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=H.value,Y.voltageUnit=H.unit,Y.tolerance=L.tolerance||"20%",Y.polarized=L.polarized!==void 0?L.polarized:!0;const Pe=pi(L,"esr","esrUnit",ln("esr"));Y.esr=Pe.value,Y.esrUnit=Pe.unit,Y.temperature=L.temperature||""}else if(E==="Film Capacitor"){const L=X,$=pi(L,"capacitance","capacitanceUnit",ln("capacitance"));Y.capacitance=$.value,Y.capacitanceUnit=$.unit;const H=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=H.value,Y.voltageUnit=H.unit,Y.tolerance=L.tolerance||"10%",Y.filmType=L.filmType||"Polyester"}else if(E==="Diode"){const L=X;Y.diodeType=L.diodeType||"Standard";const $=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=$.value,Y.voltageUnit=$.unit;const H=pi(L,"current","currentUnit",ln("current"));Y.current=H.value,Y.currentUnit=H.unit,Y.ledColor=L.ledColor||""}else if(E==="Battery"){const L=X,$=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=$.value,Y.voltageUnit=$.unit;const H=pi(L,"capacity","capacityUnit",ln("capacity"));Y.capacity=H.value,Y.capacityUnit=H.unit,Y.chemistry=L.chemistry||"Li-ion"}else if(E==="Fuse"){const L=X,$=pi(L,"current","currentUnit",ln("current"));Y.current=$.value,Y.currentUnit=$.unit;const H=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=H.value,Y.voltageUnit=H.unit,Y.fuseType=L.fuseType||"Fast-blow"}else if(E==="FerriteBead"){const L=X,$=pi(L,"impedance","impedanceUnit",ln("impedance"));Y.impedance=$.value,Y.impedanceUnit=$.unit;const H=pi(L,"current","currentUnit",ln("current"));Y.current=H.value,Y.currentUnit=H.unit}else if(E==="Connector"){const L=X;Y.connectorType=L.connectorType||"",Y.gender=L.gender||"N/A"}else if(E==="Jumper"){const L=X;Y.positions=L.positions||3}else if(E==="Relay"){const L=X,$=pi(L,"coilVoltage","coilVoltageUnit",ln("coilVoltage"));Y.coilVoltage=$.value,Y.coilVoltageUnit=$.unit,Y.contactType=L.contactType||"SPST";const H=pi(L,"current","currentUnit",ln("current"));Y.current=H.value,Y.currentUnit=H.unit}else if(E==="Inductor"){const L=X,$=pi(L,"inductance","inductanceUnit",ln("inductance"));Y.inductance=$.value,Y.inductanceUnit=$.unit;const H=pi(L,"current","currentUnit",ln("current"));Y.current=H.value,Y.currentUnit=H.unit;const Pe=pi(L,"resistance","resistanceUnit",ln("resistance"));Y.resistance=Pe.value,Y.resistanceUnit=Pe.unit}else if(E==="Speaker"){const L=X,$=pi(L,"impedance","impedanceUnit",ln("impedance"));Y.impedance=$.value,Y.impedanceUnit=$.unit;const H=pi(L,"power","powerUnit","W");Y.power=H.value||"1"}else if(E==="Motor"){const L=X;Y.motorType=L.motorType||"DC";const $=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=$.value,Y.voltageUnit=$.unit;const H=pi(L,"current","currentUnit",ln("current"));Y.current=H.value,Y.currentUnit=H.unit}else if(E==="PowerSupply"){const L=X,$=pi(L,"inputVoltage","inputVoltageUnit",ln("inputVoltage"));Y.inputVoltage=$.value,Y.inputVoltageUnit=$.unit;const H=pi(L,"outputVoltage","outputVoltageUnit",ln("outputVoltage"));Y.outputVoltage=H.value,Y.outputVoltageUnit=H.unit;const Pe=pi(L,"current","currentUnit",ln("current"));Y.current=Pe.value,Y.currentUnit=Pe.unit}else if(E==="Transistor"){const L=X;Y.transistorType=L.transistorType||"BJT",Y.polarity=L.polarity||"NPN";const $=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=$.value,Y.voltageUnit=$.unit;const H=pi(L,"current","currentUnit",ln("current"));Y.current=H.value,Y.currentUnit=H.unit}else if(E==="ResistorNetwork"){const L=X,$=pi(L,"resistance","resistanceUnit",ln("resistance"));Y.resistance=$.value,Y.resistanceUnit=$.unit,Y.configuration=L.configuration||""}else if(E==="Thermistor"){const L=X,$=pi(L,"resistance","resistanceUnit",ln("resistance"));Y.resistance=$.value,Y.resistanceUnit=$.unit,Y.thermistorType=L.thermistorType||"NTC",Y.beta=L.beta||""}else if(E==="Switch"){const L=X;Y.switchType=L.switchType||"Toggle";const $=pi(L,"current","currentUnit",ln("current"));Y.current=$.value,Y.currentUnit=$.unit;const H=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=H.value,Y.voltageUnit=H.unit}else if(E==="Transformer"){const L=X,$=pi(L,"primaryVoltage","primaryVoltageUnit",ln("primaryVoltage"));Y.primaryVoltage=$.value,Y.primaryVoltageUnit=$.unit;const H=pi(L,"secondaryVoltage","secondaryVoltageUnit",ln("secondaryVoltage"));Y.secondaryVoltage=H.value,Y.secondaryVoltageUnit=H.unit;const Pe=pi(L,"power","powerUnit",ln("power"));Y.power=Pe.value||"1",Y.turns=L.turns||""}else if(E==="TestPoint"){const L=X;Y.signal=L.signal||""}else if(E==="IntegratedCircuit"||E==="Semiconductor"){const L=X;Y.description=L.description||X.designator||"",Y.datasheet=L.datasheet||"",Y.datasheetFileName=L.datasheetFileName||void 0,Y.manufacturer=L.manufacturer||"",Y.partNumber=L.partNumber||"",Y.operatingTemperature=L.operatingTemperature||"",Y.packageType=L.packageType||"",console.log("[useComponents] Loading IC component - datasheet from component:",L.datasheet,"editor datasheet:",Y.datasheet,"datasheetFileName:",L.datasheetFileName),Y.icType=L.icType||"Op-Amp"}else if(E==="VacuumTube"){const L=X;Y.tubeType=L.tubeType||""}else if(E==="VariableResistor"){const L=X;Y.vrType=L.vrType||"Potentiometer";const $=pi(L,"resistance","resistanceUnit",ln("resistance"));Y.resistance=$.value,Y.resistanceUnit=$.unit;const H=pi(L,"power","powerUnit",ln("power"));Y.power=H.value||"1/4",Y.taper=L.taper||""}else if(E==="Crystal"){const L=X;Y.frequency=L.frequency||"",Y.loadCapacitance=L.loadCapacitance||"",Y.tolerance=L.tolerance||""}else if(E==="Diode"){const L=X;Y.diodeType=L.diodeType||"Standard";const $=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=$.value,Y.voltageUnit=$.unit;const H=pi(L,"current","currentUnit",ln("current"));Y.current=H.value,Y.currentUnit=H.unit,Y.ledColor=L.ledColor||""}else if(E==="GenericComponent"){const L=X;Y.genericType=L.genericType||"Attenuator";const $=pi(L,"voltage","voltageUnit",ln("voltage"));Y.voltage=$.value,Y.voltageUnit=$.unit;const H=pi(L,"current","currentUnit",ln("current"));Y.current=H.value,Y.currentUnit=H.unit,Y.power=L.power||"",Y.frequency=L.frequency||"",Y.model=L.model||""}const F=X.componentDefinitionKey;if(F){const L=Yu.find($=>`${$.category}:${$.subcategory}:${$.type}`===F);L&&(Y.componentDefinition=L,Y.componentDefinitionKey=F)}d(Y)},[]),we=M.useCallback(()=>{d(null),p(null)},[]);return{componentsTop:i,setComponentsTop:r,componentsBottom:a,setComponentsBottom:s,componentEditor:l,setComponentEditor:d,connectingPin:v,setConnectingPin:p,componentDialogPosition:b,setComponentDialogPosition:y,isDraggingDialog:C,setIsDraggingDialog:D,dialogDragOffset:O,setDialogDragOffset:T,addComponent:K,updateComponent:R,removeComponent:z,openComponentEditor:w,closeComponentEditor:we}}function gd(i){return{resistance:"",capacitance:"F",inductance:"H",voltage:"V",current:"A",power:"W",impedance:"",capacity:"mAh",esr:"",coilVoltage:"V",inputVoltage:"V",outputVoltage:"V"}[i]||""}function xd(i,r,a,s){if(r==="power"){const d=i[r]||"";return typeof d=="string"&&d.trim()!==""?{value:d.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(i[r]!==void 0||i[a]!==void 0)return{value:i[r]||"",unit:i[a]||s};const l=i[r]||"";return typeof l=="string"&&l.trim()!==""?Bx(l):{value:"",unit:s}}function x2(i){if((i.componentType==="Resistor"||i.componentType==="ResistorNetwork"||i.componentType==="Thermistor"||i.componentType==="VariableResistor")&&"resistance"in i){const{value:s,unit:l}=xd(i,"resistance","resistanceUnit",gd("resistance"));if(s&&s.trim()!=="")return hd(s,l)}if((i.componentType==="Capacitor"||i.componentType==="Electrolytic Capacitor"||i.componentType==="Film Capacitor")&&"capacitance"in i){const{value:s,unit:l}=xd(i,"capacitance","capacitanceUnit",gd("capacitance"));if(s&&s.trim()!=="")return hd(s,l)}if(i.componentType==="Inductor"&&"inductance"in i){const{value:s,unit:l}=xd(i,"inductance","inductanceUnit",gd("inductance"));if(s&&s.trim()!=="")return hd(s,l)}if(i.componentType==="Fuse"&&"current"in i){const{value:s,unit:l}=xd(i,"current","currentUnit",gd("current"));if(s&&s.trim()!=="")return hd(s,l)}if(i.componentType==="Battery"){const{value:s,unit:l}=xd(i,"capacity","capacityUnit",gd("capacity"));if(s&&s.trim()!=="")return hd(s,l);const{value:d,unit:v}=xd(i,"voltage","voltageUnit",gd("voltage"));if(d&&d.trim()!=="")return hd(d,v)}if(i.componentType==="PowerSupply"){const{value:s,unit:l}=xd(i,"outputVoltage","outputVoltageUnit",gd("voltage"));if(s&&s.trim()!=="")return hd(s,l)}const r=i.partName?.trim();if(r&&r!=="")return r;const a=i.partNumber?.trim();return a&&a!==""?a:Ul(i.componentType)}function y2(i,r,a){const s=[...i,...r],l=s.length,d=new Map;for(const p of s){const b=Ul(p.componentType),y=x2(p),C=`${b}|${y}`;if(!d.has(C)){const O=i.some(R=>R.id===p.id),T=r.some(R=>R.id===p.id),K=O&&T?"both":O?"top":"bottom";d.set(C,{componentType:b,value:y,quantity:0,designators:[],packageType:p.packageType,manufacturer:p.manufacturer,partNumber:p.partNumber,description:p.description,notes:p.notes,datasheet:p.datasheet,layer:K})}const D=d.get(C);D.quantity++,p.designator&&p.designator.trim()!==""&&D.designators.push(p.designator.trim())}const v=Array.from(d.values()).sort((p,b)=>p.componentType!==b.componentType?p.componentType.localeCompare(b.componentType):p.value.localeCompare(b.value));return{version:"1.0",exportedAt:new Date().toISOString(),projectName:a,totalComponents:l,uniqueComponents:v.length,items:v}}const m2="modulepreload",b2=function(i){return"/PCB_Reverse_Engineering_Tool/"+i},f1={},Zh=function(r,a,s){let l=Promise.resolve();if(a&&a.length>0){let b=function(y){return Promise.all(y.map(C=>Promise.resolve(C).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),p=v?.nonce||v?.getAttribute("nonce");l=b(a.map(y=>{if(y=b2(y),y in f1)return;f1[y]=!0;const C=y.endsWith(".css"),D=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${D}`))return;const O=document.createElement("link");if(O.rel=C?"stylesheet":m2,C||(O.as="script"),O.crossOrigin="",O.href=y,p&&O.setAttribute("nonce",p),document.head.appendChild(O),C)return new Promise((T,K)=>{O.addEventListener("load",T),O.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${y}`)))})}))}function d(v){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=v,window.dispatchEvent(p),!p.defaultPrevented)throw v}return l.then(v=>{for(const p of v||[])p.status==="rejected"&&d(p.reason);return r().catch(d)})};function Pr(i){"@babel/helpers - typeof";return Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pr(i)}var Sc=Uint8Array,ql=Uint16Array,O0=Int32Array,E0=new Sc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),F0=new Sc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),p1=new Sc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ox=function(i,r){for(var a=new ql(31),s=0;s<31;++s)a[s]=r+=1<<i[s-1];for(var l=new O0(a[30]),s=1;s<30;++s)for(var d=a[s];d<a[s+1];++d)l[d]=d-a[s]<<5|s;return{b:a,r:l}},Ex=Ox(E0,2),v2=Ex.b,T0=Ex.r;v2[28]=258,T0[258]=28;var w2=Ox(F0,0),h1=w2.r,C0=new ql(32768);for(var ca=0;ca<32768;++ca){var Hu=(ca&43690)>>1|(ca&21845)<<1;Hu=(Hu&52428)>>2|(Hu&13107)<<2,Hu=(Hu&61680)>>4|(Hu&3855)<<4,C0[ca]=((Hu&65280)>>8|(Hu&255)<<8)>>1}var Bf=(function(i,r,a){for(var s=i.length,l=0,d=new ql(r);l<s;++l)i[l]&&++d[i[l]-1];var v=new ql(r);for(l=1;l<r;++l)v[l]=v[l-1]+d[l-1]<<1;var p;if(a){p=new ql(1<<r);var b=15-r;for(l=0;l<s;++l)if(i[l])for(var y=l<<4|i[l],C=r-i[l],D=v[i[l]-1]++<<C,O=D|(1<<C)-1;D<=O;++D)p[C0[D]>>b]=y}else for(p=new ql(s),l=0;l<s;++l)i[l]&&(p[l]=C0[v[i[l]-1]++]>>15-i[l]);return p}),vd=new Sc(288);for(var ca=0;ca<144;++ca)vd[ca]=8;for(var ca=144;ca<256;++ca)vd[ca]=9;for(var ca=256;ca<280;++ca)vd[ca]=7;for(var ca=280;ca<288;++ca)vd[ca]=8;var Qp=new Sc(32);for(var ca=0;ca<32;++ca)Qp[ca]=5;var S2=Bf(vd,9,0),j2=Bf(Qp,5,0),Fx=function(i){return(i+7)/8|0},T2=function(i,r,a){return(a==null||a>i.length)&&(a=i.length),new Sc(i.subarray(r,a))},uu=function(i,r,a){a<<=r&7;var s=r/8|0;i[s]|=a,i[s+1]|=a>>8},Rf=function(i,r,a){a<<=r&7;var s=r/8|0;i[s]|=a,i[s+1]|=a>>8,i[s+2]|=a>>16},Jh=function(i,r){for(var a=[],s=0;s<i.length;++s)i[s]&&a.push({s,f:i[s]});var l=a.length,d=a.slice();if(!l)return{t:qx,l:0};if(l==1){var v=new Sc(a[0].s+1);return v[a[0].s]=1,{t:v,l:1}}a.sort(function(J,ue){return J.f-ue.f}),a.push({s:-1,f:25001});var p=a[0],b=a[1],y=0,C=1,D=2;for(a[0]={s:-1,f:p.f+b.f,l:p,r:b};C!=l-1;)p=a[a[y].f<a[D].f?y++:D++],b=a[y!=C&&a[y].f<a[D].f?y++:D++],a[C++]={s:-1,f:p.f+b.f,l:p,r:b};for(var O=d[0].s,s=1;s<l;++s)d[s].s>O&&(O=d[s].s);var T=new ql(O+1),K=k0(a[C-1],T,0);if(K>r){var s=0,R=0,z=K-r,w=1<<z;for(d.sort(function(ue,oe){return T[oe.s]-T[ue.s]||ue.f-oe.f});s<l;++s){var we=d[s].s;if(T[we]>r)R+=w-(1<<K-T[we]),T[we]=r;else break}for(R>>=z;R>0;){var X=d[s].s;T[X]<r?R-=1<<r-T[X]++-1:++s}for(;s>=0&&R;--s){var G=d[s].s;T[G]==r&&(--T[G],++R)}K=r}return{t:new Sc(T),l:K}},k0=function(i,r,a){return i.s==-1?Math.max(k0(i.l,r,a+1),k0(i.r,r,a+1)):r[i.s]=a},g1=function(i){for(var r=i.length;r&&!i[--r];);for(var a=new ql(++r),s=0,l=i[0],d=1,v=function(b){a[s++]=b},p=1;p<=r;++p)if(i[p]==l&&p!=r)++d;else{if(!l&&d>2){for(;d>138;d-=138)v(32754);d>2&&(v(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(v(l),--d;d>6;d-=6)v(8304);d>2&&(v(d-3<<5|8208),d=0)}for(;d--;)v(l);d=1,l=i[p]}return{c:a.subarray(0,s),n:r}},Lf=function(i,r){for(var a=0,s=0;s<r.length;++s)a+=i[s]*r[s];return a},Ux=function(i,r,a){var s=a.length,l=Fx(r+2);i[l]=s&255,i[l+1]=s>>8,i[l+2]=i[l]^255,i[l+3]=i[l+1]^255;for(var d=0;d<s;++d)i[l+d+4]=a[d];return(l+4+s)*8},x1=function(i,r,a,s,l,d,v,p,b,y,C){uu(r,C++,a),++l[256];for(var D=Jh(l,15),O=D.t,T=D.l,K=Jh(d,15),R=K.t,z=K.l,w=g1(O),we=w.c,X=w.n,G=g1(R),J=G.c,ue=G.n,oe=new ql(19),ie=0;ie<we.length;++ie)++oe[we[ie]&31];for(var ie=0;ie<J.length;++ie)++oe[J[ie]&31];for(var E=Jh(oe,7),Y=E.t,F=E.l,L=19;L>4&&!Y[p1[L-1]];--L);var $=y+5<<3,H=Lf(l,vd)+Lf(d,Qp)+v,Pe=Lf(l,O)+Lf(d,R)+v+14+3*L+Lf(oe,Y)+2*oe[16]+3*oe[17]+7*oe[18];if(b>=0&&$<=H&&$<=Pe)return Ux(r,C,i.subarray(b,b+y));var ae,ve,pe,Ce;if(uu(r,C,1+(Pe<H)),C+=2,Pe<H){ae=Bf(O,T,0),ve=O,pe=Bf(R,z,0),Ce=R;var fe=Bf(Y,F,0);uu(r,C,X-257),uu(r,C+5,ue-1),uu(r,C+10,L-4),C+=14;for(var ie=0;ie<L;++ie)uu(r,C+3*ie,Y[p1[ie]]);C+=3*L;for(var k=[we,J],A=0;A<2;++A)for(var W=k[A],ie=0;ie<W.length;++ie){var q=W[ie]&31;uu(r,C,fe[q]),C+=Y[q],q>15&&(uu(r,C,W[ie]>>5&127),C+=W[ie]>>12)}}else ae=S2,ve=vd,pe=j2,Ce=Qp;for(var ie=0;ie<p;++ie){var te=s[ie];if(te>255){var q=te>>18&31;Rf(r,C,ae[q+257]),C+=ve[q+257],q>7&&(uu(r,C,te>>23&31),C+=E0[q]);var xe=te&31;Rf(r,C,pe[xe]),C+=Ce[xe],xe>3&&(Rf(r,C,te>>5&8191),C+=F0[xe])}else Rf(r,C,ae[te]),C+=ve[te]}return Rf(r,C,ae[256]),C+ve[256]},C2=new O0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qx=new Sc(0),k2=function(i,r,a,s,l,d){var v=d.z||i.length,p=new Sc(s+v+5*(1+Math.ceil(v/7e3))+l),b=p.subarray(s,p.length-l),y=d.l,C=(d.r||0)&7;if(r){C&&(b[0]=d.r>>3);for(var D=C2[r-1],O=D>>13,T=D&8191,K=(1<<a)-1,R=d.p||new ql(32768),z=d.h||new ql(K+1),w=Math.ceil(a/3),we=2*w,X=function(It){return(i[It]^i[It+1]<<w^i[It+2]<<we)&K},G=new O0(25e3),J=new ql(288),ue=new ql(32),oe=0,ie=0,E=d.i||0,Y=0,F=d.w||0,L=0;E+2<v;++E){var $=X(E),H=E&32767,Pe=z[$];if(R[H]=Pe,z[$]=H,F<=E){var ae=v-E;if((oe>7e3||Y>24576)&&(ae>423||!y)){C=x1(i,b,0,G,J,ue,ie,Y,L,E-L,C),Y=oe=ie=0,L=E;for(var ve=0;ve<286;++ve)J[ve]=0;for(var ve=0;ve<30;++ve)ue[ve]=0}var pe=2,Ce=0,fe=T,k=H-Pe&32767;if(ae>2&&$==X(E-k))for(var A=Math.min(O,ae)-1,W=Math.min(32767,E),q=Math.min(258,ae);k<=W&&--fe&&H!=Pe;){if(i[E+pe]==i[E+pe-k]){for(var te=0;te<q&&i[E+te]==i[E+te-k];++te);if(te>pe){if(pe=te,Ce=k,te>A)break;for(var xe=Math.min(k,te-2),ee=0,ve=0;ve<xe;++ve){var Ie=E-k+ve&32767,_e=R[Ie],Fe=Ie-_e&32767;Fe>ee&&(ee=Fe,Pe=Ie)}}}H=Pe,Pe=R[H],k+=H-Pe&32767}if(Ce){G[Y++]=268435456|T0[pe]<<18|h1[Ce];var nt=T0[pe]&31,lt=h1[Ce]&31;ie+=E0[nt]+F0[lt],++J[257+nt],++ue[lt],F=E+pe,++oe}else G[Y++]=i[E],++J[i[E]]}}for(E=Math.max(E,F);E<v;++E)G[Y++]=i[E],++J[i[E]];C=x1(i,b,y,G,J,ue,ie,Y,L,E-L,C),y||(d.r=C&7|b[C/8|0]<<3,C-=7,d.h=z,d.p=R,d.i=E,d.w=F)}else{for(var E=d.w||0;E<v+y;E+=65535){var kt=E+65535;kt>=v&&(b[C/8|0]=y,kt=v),C=Ux(b,C+1,i.subarray(E,kt))}d.i=v}return T2(p,0,s+Fx(C)+l)},Vx=function(){var i=1,r=0;return{p:function(a){for(var s=i,l=r,d=a.length|0,v=0;v!=d;){for(var p=Math.min(v+2655,d);v<p;++v)l+=s+=a[v];s=(s&65535)+15*(s>>16),l=(l&65535)+15*(l>>16)}i=s,r=l},d:function(){return i%=65521,r%=65521,(i&255)<<24|(i&65280)<<8|(r&255)<<8|r>>8}}},N2=function(i,r,a,s,l){if(!l&&(l={l:1},r.dictionary)){var d=r.dictionary.subarray(-32768),v=new Sc(d.length+i.length);v.set(d),v.set(i,d.length),i=v,l.w=d.length}return k2(i,r.level==null?6:r.level,r.mem==null?l.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+r.mem,a,s,l)},Hx=function(i,r,a){for(;a;++r)i[r]=a,a>>>=8},A2=function(i,r){var a=r.level,s=a==0?0:a<6?1:a==9?3:2;if(i[0]=120,i[1]=s<<6|(r.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,r.dictionary){var l=Vx();l.p(r.dictionary),Hx(i,2,l.d())}};function N0(i,r){r||(r={});var a=Vx();a.p(i);var s=N2(i,r,r.dictionary?6:2,4);return A2(s,r),Hx(s,s.length-4,a.d()),s}var z2=typeof TextDecoder<"u"&&new TextDecoder,P2=0;try{z2.decode(qx,{stream:!0}),P2=1}catch{}function _2(i){if(Array.isArray(i))return i}function D2(i,r){var a=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(a!=null){var s,l,d,v,p=[],b=!0,y=!1;try{if(d=(a=a.call(i)).next,r!==0)for(;!(b=(s=d.call(a)).done)&&(p.push(s.value),p.length!==r);b=!0);}catch(C){y=!0,l=C}finally{try{if(!b&&a.return!=null&&(v=a.return(),Object(v)!==v))return}finally{if(y)throw l}}return p}}function y1(i,r){(r==null||r>i.length)&&(r=i.length);for(var a=0,s=Array(r);a<r;a++)s[a]=i[a];return s}function R2(i,r){if(i){if(typeof i=="string")return y1(i,r);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y1(i,r):void 0}}function L2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m1(i,r){return _2(i)||D2(i,r)||R2(i,r)||L2()}function b1(i,r="utf8"){return new TextDecoder(r).decode(i)}const M2=new TextEncoder;function I2(i){return M2.encode(i)}const B2=1024*8,O2=(()=>{const i=new Uint8Array(4),r=new Uint32Array(i.buffer);return!((r[0]=1)&i[0])})(),Qh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class U0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(r=B2,a={}){let s=!1;typeof r=="number"?r=new ArrayBuffer(r):(s=!0,this.lastWrittenByte=r.byteLength);const l=a.offset?a.offset>>>0:0,d=r.byteLength-l;let v=l;(ArrayBuffer.isView(r)||r instanceof U0)&&(r.byteLength!==r.buffer.byteLength&&(v=r.byteOffset+l),r=r.buffer),s?this.lastWrittenByte=d:this.lastWrittenByte=0,this.buffer=r,this.length=d,this.byteLength=d,this.byteOffset=v,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,v,d),this._mark=0,this._marks=[]}available(r=1){return this.offset+r<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(r=1){return this.offset+=r,this}back(r=1){return this.offset-=r,this}seek(r){return this.offset=r,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const r=this._marks.pop();if(r===void 0)throw new Error("Mark stack empty");return this.seek(r),this}rewind(){return this.offset=0,this}ensureAvailable(r=1){if(!this.available(r)){const s=(this.offset+r)*2,l=new Uint8Array(s);l.set(new Uint8Array(this.buffer)),this.buffer=l.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(r=1){return this.readArray(r,"uint8")}readArray(r,a){const s=Qh[a].BYTES_PER_ELEMENT*r,l=this.byteOffset+this.offset,d=this.buffer.slice(l,l+s);if(this.littleEndian===O2&&a!=="uint8"&&a!=="int8"){const p=new Uint8Array(this.buffer.slice(l,l+s));p.reverse();const b=new Qh[a](p.buffer);return this.offset+=s,b.reverse(),b}const v=new Qh[a](d);return this.offset+=s,v}readInt16(){const r=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,r}readUint16(){const r=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,r}readInt32(){const r=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,r}readUint32(){const r=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat32(){const r=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat64(){const r=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,r}readBigInt64(){const r=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,r}readBigUint64(){const r=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,r}readChar(){return String.fromCharCode(this.readInt8())}readChars(r=1){let a="";for(let s=0;s<r;s++)a+=this.readChar();return a}readUtf8(r=1){return b1(this.readBytes(r))}decodeText(r=1,a="utf8"){return b1(this.readBytes(r),a)}writeBoolean(r){return this.writeUint8(r?255:0),this}writeInt8(r){return this.ensureAvailable(1),this._data.setInt8(this.offset++,r),this._updateLastWrittenByte(),this}writeUint8(r){return this.ensureAvailable(1),this._data.setUint8(this.offset++,r),this._updateLastWrittenByte(),this}writeByte(r){return this.writeUint8(r)}writeBytes(r){this.ensureAvailable(r.length);for(let a=0;a<r.length;a++)this._data.setUint8(this.offset++,r[a]);return this._updateLastWrittenByte(),this}writeInt16(r){return this.ensureAvailable(2),this._data.setInt16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(r){return this.ensureAvailable(2),this._data.setUint16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(r){return this.ensureAvailable(4),this._data.setInt32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(r){return this.ensureAvailable(4),this._data.setUint32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(r){return this.ensureAvailable(4),this._data.setFloat32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(r){return this.ensureAvailable(8),this._data.setFloat64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(r){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(r){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(r){return this.writeUint8(r.charCodeAt(0))}writeChars(r){for(let a=0;a<r.length;a++)this.writeUint8(r.charCodeAt(a));return this}writeUtf8(r){return this.writeBytes(I2(r))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function af(i){let r=i.length;for(;--r>=0;)i[r]=0}const E2=3,F2=258,Wx=29,U2=256,q2=U2+1+Wx,$x=30,V2=512,H2=new Array((q2+2)*2);af(H2);const W2=new Array($x*2);af(W2);const $2=new Array(V2);af($2);const Y2=new Array(F2-E2+1);af(Y2);const G2=new Array(Wx);af(G2);const X2=new Array($x);af(X2);const K2=(i,r,a,s)=>{let l=i&65535|0,d=i>>>16&65535|0,v=0;for(;a!==0;){v=a>2e3?2e3:a,a-=v;do l=l+r[s++]|0,d=d+l|0;while(--v);l%=65521,d%=65521}return l|d<<16|0};var A0=K2;const Z2=()=>{let i,r=[];for(var a=0;a<256;a++){i=a;for(var s=0;s<8;s++)i=i&1?3988292384^i>>>1:i>>>1;r[a]=i}return r},J2=new Uint32Array(Z2()),Q2=(i,r,a,s)=>{const l=J2,d=s+a;i^=-1;for(let v=s;v<d;v++)i=i>>>8^l[(i^r[v])&255];return i^-1};var Uc=Q2,z0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Yx={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const eb=(i,r)=>Object.prototype.hasOwnProperty.call(i,r);var tb=function(i){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const a=r.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const s in a)eb(a,s)&&(i[s]=a[s])}}return i},nb=i=>{let r=0;for(let s=0,l=i.length;s<l;s++)r+=i[s].length;const a=new Uint8Array(r);for(let s=0,l=0,d=i.length;s<d;s++){let v=i[s];a.set(v,l),l+=v.length}return a},Gx={assign:tb,flattenChunks:nb};let Xx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Xx=!1}const Ef=new Uint8Array(256);for(let i=0;i<256;i++)Ef[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Ef[254]=Ef[254]=1;var ib=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let r,a,s,l,d,v=i.length,p=0;for(l=0;l<v;l++)a=i.charCodeAt(l),(a&64512)===55296&&l+1<v&&(s=i.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),p+=a<128?1:a<2048?2:a<65536?3:4;for(r=new Uint8Array(p),d=0,l=0;d<p;l++)a=i.charCodeAt(l),(a&64512)===55296&&l+1<v&&(s=i.charCodeAt(l+1),(s&64512)===56320&&(a=65536+(a-55296<<10)+(s-56320),l++)),a<128?r[d++]=a:a<2048?(r[d++]=192|a>>>6,r[d++]=128|a&63):a<65536?(r[d++]=224|a>>>12,r[d++]=128|a>>>6&63,r[d++]=128|a&63):(r[d++]=240|a>>>18,r[d++]=128|a>>>12&63,r[d++]=128|a>>>6&63,r[d++]=128|a&63);return r};const rb=(i,r)=>{if(r<65534&&i.subarray&&Xx)return String.fromCharCode.apply(null,i.length===r?i:i.subarray(0,r));let a="";for(let s=0;s<r;s++)a+=String.fromCharCode(i[s]);return a};var ab=(i,r)=>{const a=r||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,r));let s,l;const d=new Array(a*2);for(l=0,s=0;s<a;){let v=i[s++];if(v<128){d[l++]=v;continue}let p=Ef[v];if(p>4){d[l++]=65533,s+=p-1;continue}for(v&=p===2?31:p===3?15:7;p>1&&s<a;)v=v<<6|i[s++]&63,p--;if(p>1){d[l++]=65533;continue}v<65536?d[l++]=v:(v-=65536,d[l++]=55296|v>>10&1023,d[l++]=56320|v&1023)}return rb(d,l)},ob=(i,r)=>{r=r||i.length,r>i.length&&(r=i.length);let a=r-1;for(;a>=0&&(i[a]&192)===128;)a--;return a<0||a===0?r:a+Ef[i[a]]>r?a:r},P0={string2buf:ib,buf2string:ab,utf8border:ob};function sb(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var lb=sb;const Ip=16209,cb=16191;var ub=function(r,a){let s,l,d,v,p,b,y,C,D,O,T,K,R,z,w,we,X,G,J,ue,oe,ie,E,Y;const F=r.state;s=r.next_in,E=r.input,l=s+(r.avail_in-5),d=r.next_out,Y=r.output,v=d-(a-r.avail_out),p=d+(r.avail_out-257),b=F.dmax,y=F.wsize,C=F.whave,D=F.wnext,O=F.window,T=F.hold,K=F.bits,R=F.lencode,z=F.distcode,w=(1<<F.lenbits)-1,we=(1<<F.distbits)-1;e:do{K<15&&(T+=E[s++]<<K,K+=8,T+=E[s++]<<K,K+=8),X=R[T&w];t:for(;;){if(G=X>>>24,T>>>=G,K-=G,G=X>>>16&255,G===0)Y[d++]=X&65535;else if(G&16){J=X&65535,G&=15,G&&(K<G&&(T+=E[s++]<<K,K+=8),J+=T&(1<<G)-1,T>>>=G,K-=G),K<15&&(T+=E[s++]<<K,K+=8,T+=E[s++]<<K,K+=8),X=z[T&we];n:for(;;){if(G=X>>>24,T>>>=G,K-=G,G=X>>>16&255,G&16){if(ue=X&65535,G&=15,K<G&&(T+=E[s++]<<K,K+=8,K<G&&(T+=E[s++]<<K,K+=8)),ue+=T&(1<<G)-1,ue>b){r.msg="invalid distance too far back",F.mode=Ip;break e}if(T>>>=G,K-=G,G=d-v,ue>G){if(G=ue-G,G>C&&F.sane){r.msg="invalid distance too far back",F.mode=Ip;break e}if(oe=0,ie=O,D===0){if(oe+=y-G,G<J){J-=G;do Y[d++]=O[oe++];while(--G);oe=d-ue,ie=Y}}else if(D<G){if(oe+=y+D-G,G-=D,G<J){J-=G;do Y[d++]=O[oe++];while(--G);if(oe=0,D<J){G=D,J-=G;do Y[d++]=O[oe++];while(--G);oe=d-ue,ie=Y}}}else if(oe+=D-G,G<J){J-=G;do Y[d++]=O[oe++];while(--G);oe=d-ue,ie=Y}for(;J>2;)Y[d++]=ie[oe++],Y[d++]=ie[oe++],Y[d++]=ie[oe++],J-=3;J&&(Y[d++]=ie[oe++],J>1&&(Y[d++]=ie[oe++]))}else{oe=d-ue;do Y[d++]=Y[oe++],Y[d++]=Y[oe++],Y[d++]=Y[oe++],J-=3;while(J>2);J&&(Y[d++]=Y[oe++],J>1&&(Y[d++]=Y[oe++]))}}else if((G&64)===0){X=z[(X&65535)+(T&(1<<G)-1)];continue n}else{r.msg="invalid distance code",F.mode=Ip;break e}break}}else if((G&64)===0){X=R[(X&65535)+(T&(1<<G)-1)];continue t}else if(G&32){F.mode=cb;break e}else{r.msg="invalid literal/length code",F.mode=Ip;break e}break}}while(s<l&&d<p);J=K>>3,s-=J,K-=J<<3,T&=(1<<K)-1,r.next_in=s,r.next_out=d,r.avail_in=s<l?5+(l-s):5-(s-l),r.avail_out=d<p?257+(p-d):257-(d-p),F.hold=T,F.bits=K};const Yd=15,v1=852,w1=592,S1=0,e0=1,j1=2,db=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fb=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pb=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hb=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),gb=(i,r,a,s,l,d,v,p)=>{const b=p.bits;let y=0,C=0,D=0,O=0,T=0,K=0,R=0,z=0,w=0,we=0,X,G,J,ue,oe,ie=null,E;const Y=new Uint16Array(Yd+1),F=new Uint16Array(Yd+1);let L=null,$,H,Pe;for(y=0;y<=Yd;y++)Y[y]=0;for(C=0;C<s;C++)Y[r[a+C]]++;for(T=b,O=Yd;O>=1&&Y[O]===0;O--);if(T>O&&(T=O),O===0)return l[d++]=1<<24|64<<16|0,l[d++]=1<<24|64<<16|0,p.bits=1,0;for(D=1;D<O&&Y[D]===0;D++);for(T<D&&(T=D),z=1,y=1;y<=Yd;y++)if(z<<=1,z-=Y[y],z<0)return-1;if(z>0&&(i===S1||O!==1))return-1;for(F[1]=0,y=1;y<Yd;y++)F[y+1]=F[y]+Y[y];for(C=0;C<s;C++)r[a+C]!==0&&(v[F[r[a+C]]++]=C);if(i===S1?(ie=L=v,E=20):i===e0?(ie=db,L=fb,E=257):(ie=pb,L=hb,E=0),we=0,C=0,y=D,oe=d,K=T,R=0,J=-1,w=1<<T,ue=w-1,i===e0&&w>v1||i===j1&&w>w1)return 1;for(;;){$=y-R,v[C]+1<E?(H=0,Pe=v[C]):v[C]>=E?(H=L[v[C]-E],Pe=ie[v[C]-E]):(H=96,Pe=0),X=1<<y-R,G=1<<K,D=G;do G-=X,l[oe+(we>>R)+G]=$<<24|H<<16|Pe|0;while(G!==0);for(X=1<<y-1;we&X;)X>>=1;if(X!==0?(we&=X-1,we+=X):we=0,C++,--Y[y]===0){if(y===O)break;y=r[a+v[C]]}if(y>T&&(we&ue)!==J){for(R===0&&(R=T),oe+=D,K=y-R,z=1<<K;K+R<O&&(z-=Y[K+R],!(z<=0));)K++,z<<=1;if(w+=1<<K,i===e0&&w>v1||i===j1&&w>w1)return 1;J=we&ue,l[J]=T<<24|K<<16|oe-d|0}}return we!==0&&(l[oe+we]=y-R<<24|64<<16|0),p.bits=T,0};var Of=gb;const xb=0,Kx=1,Zx=2,{Z_FINISH:T1,Z_BLOCK:yb,Z_TREES:Bp,Z_OK:wd,Z_STREAM_END:mb,Z_NEED_DICT:bb,Z_STREAM_ERROR:oc,Z_DATA_ERROR:Jx,Z_MEM_ERROR:Qx,Z_BUF_ERROR:vb,Z_DEFLATED:C1}=Yx,rh=16180,k1=16181,N1=16182,A1=16183,z1=16184,P1=16185,_1=16186,D1=16187,R1=16188,L1=16189,eh=16190,du=16191,t0=16192,M1=16193,n0=16194,I1=16195,B1=16196,O1=16197,E1=16198,Op=16199,Ep=16200,F1=16201,U1=16202,q1=16203,V1=16204,H1=16205,i0=16206,W1=16207,$1=16208,ga=16209,ey=16210,ty=16211,wb=852,Sb=592,jb=15,Tb=jb,Y1=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function Cb(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Sd=i=>{if(!i)return 1;const r=i.state;return!r||r.strm!==i||r.mode<rh||r.mode>ty?1:0},ny=i=>{if(Sd(i))return oc;const r=i.state;return i.total_in=i.total_out=r.total=0,i.msg="",r.wrap&&(i.adler=r.wrap&1),r.mode=rh,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(wb),r.distcode=r.distdyn=new Int32Array(Sb),r.sane=1,r.back=-1,wd},iy=i=>{if(Sd(i))return oc;const r=i.state;return r.wsize=0,r.whave=0,r.wnext=0,ny(i)},ry=(i,r)=>{let a;if(Sd(i))return oc;const s=i.state;return r<0?(a=0,r=-r):(a=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?oc:(s.window!==null&&s.wbits!==r&&(s.window=null),s.wrap=a,s.wbits=r,iy(i))},ay=(i,r)=>{if(!i)return oc;const a=new Cb;i.state=a,a.strm=i,a.window=null,a.mode=rh;const s=ry(i,r);return s!==wd&&(i.state=null),s},kb=i=>ay(i,Tb);let G1=!0,r0,a0;const Nb=i=>{if(G1){r0=new Int32Array(512),a0=new Int32Array(32);let r=0;for(;r<144;)i.lens[r++]=8;for(;r<256;)i.lens[r++]=9;for(;r<280;)i.lens[r++]=7;for(;r<288;)i.lens[r++]=8;for(Of(Kx,i.lens,0,288,r0,0,i.work,{bits:9}),r=0;r<32;)i.lens[r++]=5;Of(Zx,i.lens,0,32,a0,0,i.work,{bits:5}),G1=!1}i.lencode=r0,i.lenbits=9,i.distcode=a0,i.distbits=5},oy=(i,r,a,s)=>{let l;const d=i.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new Uint8Array(d.wsize)),s>=d.wsize?(d.window.set(r.subarray(a-d.wsize,a),0),d.wnext=0,d.whave=d.wsize):(l=d.wsize-d.wnext,l>s&&(l=s),d.window.set(r.subarray(a-s,a-s+l),d.wnext),s-=l,s?(d.window.set(r.subarray(a-s,a),0),d.wnext=s,d.whave=d.wsize):(d.wnext+=l,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=l))),0},Ab=(i,r)=>{let a,s,l,d,v,p,b,y,C,D,O,T,K,R,z=0,w,we,X,G,J,ue,oe,ie;const E=new Uint8Array(4);let Y,F;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Sd(i)||!i.output||!i.input&&i.avail_in!==0)return oc;a=i.state,a.mode===du&&(a.mode=t0),v=i.next_out,l=i.output,b=i.avail_out,d=i.next_in,s=i.input,p=i.avail_in,y=a.hold,C=a.bits,D=p,O=b,ie=wd;e:for(;;)switch(a.mode){case rh:if(a.wrap===0){a.mode=t0;break}for(;C<16;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if(a.wrap&2&&y===35615){a.wbits===0&&(a.wbits=15),a.check=0,E[0]=y&255,E[1]=y>>>8&255,a.check=Uc(a.check,E,2,0),y=0,C=0,a.mode=k1;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((y&255)<<8)+(y>>8))%31){i.msg="incorrect header check",a.mode=ga;break}if((y&15)!==C1){i.msg="unknown compression method",a.mode=ga;break}if(y>>>=4,C-=4,oe=(y&15)+8,a.wbits===0&&(a.wbits=oe),oe>15||oe>a.wbits){i.msg="invalid window size",a.mode=ga;break}a.dmax=1<<a.wbits,a.flags=0,i.adler=a.check=1,a.mode=y&512?L1:du,y=0,C=0;break;case k1:for(;C<16;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if(a.flags=y,(a.flags&255)!==C1){i.msg="unknown compression method",a.mode=ga;break}if(a.flags&57344){i.msg="unknown header flags set",a.mode=ga;break}a.head&&(a.head.text=y>>8&1),a.flags&512&&a.wrap&4&&(E[0]=y&255,E[1]=y>>>8&255,a.check=Uc(a.check,E,2,0)),y=0,C=0,a.mode=N1;case N1:for(;C<32;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}a.head&&(a.head.time=y),a.flags&512&&a.wrap&4&&(E[0]=y&255,E[1]=y>>>8&255,E[2]=y>>>16&255,E[3]=y>>>24&255,a.check=Uc(a.check,E,4,0)),y=0,C=0,a.mode=A1;case A1:for(;C<16;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}a.head&&(a.head.xflags=y&255,a.head.os=y>>8),a.flags&512&&a.wrap&4&&(E[0]=y&255,E[1]=y>>>8&255,a.check=Uc(a.check,E,2,0)),y=0,C=0,a.mode=z1;case z1:if(a.flags&1024){for(;C<16;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}a.length=y,a.head&&(a.head.extra_len=y),a.flags&512&&a.wrap&4&&(E[0]=y&255,E[1]=y>>>8&255,a.check=Uc(a.check,E,2,0)),y=0,C=0}else a.head&&(a.head.extra=null);a.mode=P1;case P1:if(a.flags&1024&&(T=a.length,T>p&&(T=p),T&&(a.head&&(oe=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(s.subarray(d,d+T),oe)),a.flags&512&&a.wrap&4&&(a.check=Uc(a.check,s,T,d)),p-=T,d+=T,a.length-=T),a.length))break e;a.length=0,a.mode=_1;case _1:if(a.flags&2048){if(p===0)break e;T=0;do oe=s[d+T++],a.head&&oe&&a.length<65536&&(a.head.name+=String.fromCharCode(oe));while(oe&&T<p);if(a.flags&512&&a.wrap&4&&(a.check=Uc(a.check,s,T,d)),p-=T,d+=T,oe)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=D1;case D1:if(a.flags&4096){if(p===0)break e;T=0;do oe=s[d+T++],a.head&&oe&&a.length<65536&&(a.head.comment+=String.fromCharCode(oe));while(oe&&T<p);if(a.flags&512&&a.wrap&4&&(a.check=Uc(a.check,s,T,d)),p-=T,d+=T,oe)break e}else a.head&&(a.head.comment=null);a.mode=R1;case R1:if(a.flags&512){for(;C<16;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if(a.wrap&4&&y!==(a.check&65535)){i.msg="header crc mismatch",a.mode=ga;break}y=0,C=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),i.adler=a.check=0,a.mode=du;break;case L1:for(;C<32;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}i.adler=a.check=Y1(y),y=0,C=0,a.mode=eh;case eh:if(a.havedict===0)return i.next_out=v,i.avail_out=b,i.next_in=d,i.avail_in=p,a.hold=y,a.bits=C,bb;i.adler=a.check=1,a.mode=du;case du:if(r===yb||r===Bp)break e;case t0:if(a.last){y>>>=C&7,C-=C&7,a.mode=i0;break}for(;C<3;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}switch(a.last=y&1,y>>>=1,C-=1,y&3){case 0:a.mode=M1;break;case 1:if(Nb(a),a.mode=Op,r===Bp){y>>>=2,C-=2;break e}break;case 2:a.mode=B1;break;case 3:i.msg="invalid block type",a.mode=ga}y>>>=2,C-=2;break;case M1:for(y>>>=C&7,C-=C&7;C<32;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if((y&65535)!==(y>>>16^65535)){i.msg="invalid stored block lengths",a.mode=ga;break}if(a.length=y&65535,y=0,C=0,a.mode=n0,r===Bp)break e;case n0:a.mode=I1;case I1:if(T=a.length,T){if(T>p&&(T=p),T>b&&(T=b),T===0)break e;l.set(s.subarray(d,d+T),v),p-=T,d+=T,b-=T,v+=T,a.length-=T;break}a.mode=du;break;case B1:for(;C<14;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if(a.nlen=(y&31)+257,y>>>=5,C-=5,a.ndist=(y&31)+1,y>>>=5,C-=5,a.ncode=(y&15)+4,y>>>=4,C-=4,a.nlen>286||a.ndist>30){i.msg="too many length or distance symbols",a.mode=ga;break}a.have=0,a.mode=O1;case O1:for(;a.have<a.ncode;){for(;C<3;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}a.lens[L[a.have++]]=y&7,y>>>=3,C-=3}for(;a.have<19;)a.lens[L[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,Y={bits:a.lenbits},ie=Of(xb,a.lens,0,19,a.lencode,0,a.work,Y),a.lenbits=Y.bits,ie){i.msg="invalid code lengths set",a.mode=ga;break}a.have=0,a.mode=E1;case E1:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[y&(1<<a.lenbits)-1],w=z>>>24,we=z>>>16&255,X=z&65535,!(w<=C);){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if(X<16)y>>>=w,C-=w,a.lens[a.have++]=X;else{if(X===16){for(F=w+2;C<F;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if(y>>>=w,C-=w,a.have===0){i.msg="invalid bit length repeat",a.mode=ga;break}oe=a.lens[a.have-1],T=3+(y&3),y>>>=2,C-=2}else if(X===17){for(F=w+3;C<F;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}y>>>=w,C-=w,oe=0,T=3+(y&7),y>>>=3,C-=3}else{for(F=w+7;C<F;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}y>>>=w,C-=w,oe=0,T=11+(y&127),y>>>=7,C-=7}if(a.have+T>a.nlen+a.ndist){i.msg="invalid bit length repeat",a.mode=ga;break}for(;T--;)a.lens[a.have++]=oe}}if(a.mode===ga)break;if(a.lens[256]===0){i.msg="invalid code -- missing end-of-block",a.mode=ga;break}if(a.lenbits=9,Y={bits:a.lenbits},ie=Of(Kx,a.lens,0,a.nlen,a.lencode,0,a.work,Y),a.lenbits=Y.bits,ie){i.msg="invalid literal/lengths set",a.mode=ga;break}if(a.distbits=6,a.distcode=a.distdyn,Y={bits:a.distbits},ie=Of(Zx,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,Y),a.distbits=Y.bits,ie){i.msg="invalid distances set",a.mode=ga;break}if(a.mode=Op,r===Bp)break e;case Op:a.mode=Ep;case Ep:if(p>=6&&b>=258){i.next_out=v,i.avail_out=b,i.next_in=d,i.avail_in=p,a.hold=y,a.bits=C,ub(i,O),v=i.next_out,l=i.output,b=i.avail_out,d=i.next_in,s=i.input,p=i.avail_in,y=a.hold,C=a.bits,a.mode===du&&(a.back=-1);break}for(a.back=0;z=a.lencode[y&(1<<a.lenbits)-1],w=z>>>24,we=z>>>16&255,X=z&65535,!(w<=C);){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if(we&&(we&240)===0){for(G=w,J=we,ue=X;z=a.lencode[ue+((y&(1<<G+J)-1)>>G)],w=z>>>24,we=z>>>16&255,X=z&65535,!(G+w<=C);){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}y>>>=G,C-=G,a.back+=G}if(y>>>=w,C-=w,a.back+=w,a.length=X,we===0){a.mode=H1;break}if(we&32){a.back=-1,a.mode=du;break}if(we&64){i.msg="invalid literal/length code",a.mode=ga;break}a.extra=we&15,a.mode=F1;case F1:if(a.extra){for(F=a.extra;C<F;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}a.length+=y&(1<<a.extra)-1,y>>>=a.extra,C-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=U1;case U1:for(;z=a.distcode[y&(1<<a.distbits)-1],w=z>>>24,we=z>>>16&255,X=z&65535,!(w<=C);){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if((we&240)===0){for(G=w,J=we,ue=X;z=a.distcode[ue+((y&(1<<G+J)-1)>>G)],w=z>>>24,we=z>>>16&255,X=z&65535,!(G+w<=C);){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}y>>>=G,C-=G,a.back+=G}if(y>>>=w,C-=w,a.back+=w,we&64){i.msg="invalid distance code",a.mode=ga;break}a.offset=X,a.extra=we&15,a.mode=q1;case q1:if(a.extra){for(F=a.extra;C<F;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}a.offset+=y&(1<<a.extra)-1,y>>>=a.extra,C-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){i.msg="invalid distance too far back",a.mode=ga;break}a.mode=V1;case V1:if(b===0)break e;if(T=O-b,a.offset>T){if(T=a.offset-T,T>a.whave&&a.sane){i.msg="invalid distance too far back",a.mode=ga;break}T>a.wnext?(T-=a.wnext,K=a.wsize-T):K=a.wnext-T,T>a.length&&(T=a.length),R=a.window}else R=l,K=v-a.offset,T=a.length;T>b&&(T=b),b-=T,a.length-=T;do l[v++]=R[K++];while(--T);a.length===0&&(a.mode=Ep);break;case H1:if(b===0)break e;l[v++]=a.length,b--,a.mode=Ep;break;case i0:if(a.wrap){for(;C<32;){if(p===0)break e;p--,y|=s[d++]<<C,C+=8}if(O-=b,i.total_out+=O,a.total+=O,a.wrap&4&&O&&(i.adler=a.check=a.flags?Uc(a.check,l,O,v-O):A0(a.check,l,O,v-O)),O=b,a.wrap&4&&(a.flags?y:Y1(y))!==a.check){i.msg="incorrect data check",a.mode=ga;break}y=0,C=0}a.mode=W1;case W1:if(a.wrap&&a.flags){for(;C<32;){if(p===0)break e;p--,y+=s[d++]<<C,C+=8}if(a.wrap&4&&y!==(a.total&4294967295)){i.msg="incorrect length check",a.mode=ga;break}y=0,C=0}a.mode=$1;case $1:ie=mb;break e;case ga:ie=Jx;break e;case ey:return Qx;case ty:default:return oc}return i.next_out=v,i.avail_out=b,i.next_in=d,i.avail_in=p,a.hold=y,a.bits=C,(a.wsize||O!==i.avail_out&&a.mode<ga&&(a.mode<i0||r!==T1))&&oy(i,i.output,i.next_out,O-i.avail_out),D-=i.avail_in,O-=i.avail_out,i.total_in+=D,i.total_out+=O,a.total+=O,a.wrap&4&&O&&(i.adler=a.check=a.flags?Uc(a.check,l,O,i.next_out-O):A0(a.check,l,O,i.next_out-O)),i.data_type=a.bits+(a.last?64:0)+(a.mode===du?128:0)+(a.mode===Op||a.mode===n0?256:0),(D===0&&O===0||r===T1)&&ie===wd&&(ie=vb),ie},zb=i=>{if(Sd(i))return oc;let r=i.state;return r.window&&(r.window=null),i.state=null,wd},Pb=(i,r)=>{if(Sd(i))return oc;const a=i.state;return(a.wrap&2)===0?oc:(a.head=r,r.done=!1,wd)},_b=(i,r)=>{const a=r.length;let s,l,d;return Sd(i)||(s=i.state,s.wrap!==0&&s.mode!==eh)?oc:s.mode===eh&&(l=1,l=A0(l,r,a,0),l!==s.check)?Jx:(d=oy(i,r,a,a),d?(s.mode=ey,Qx):(s.havedict=1,wd))};var Db=iy,Rb=ry,Lb=ny,Mb=kb,Ib=ay,Bb=Ab,Ob=zb,Eb=Pb,Fb=_b,Ub="pako inflate (from Nodeca project)",fu={inflateReset:Db,inflateReset2:Rb,inflateResetKeep:Lb,inflateInit:Mb,inflateInit2:Ib,inflate:Bb,inflateEnd:Ob,inflateGetHeader:Eb,inflateSetDictionary:Fb,inflateInfo:Ub};function qb(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Vb=qb;const sy=Object.prototype.toString,{Z_NO_FLUSH:Hb,Z_FINISH:Wb,Z_OK:Ff,Z_STREAM_END:o0,Z_NEED_DICT:s0,Z_STREAM_ERROR:$b,Z_DATA_ERROR:X1,Z_MEM_ERROR:Yb}=Yx;function qf(i){this.options=Gx.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(i&&i.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lb,this.strm.avail_out=0;let a=fu.inflateInit2(this.strm,r.windowBits);if(a!==Ff)throw new Error(z0[a]);if(this.header=new Vb,fu.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=P0.string2buf(r.dictionary):sy.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(a=fu.inflateSetDictionary(this.strm,r.dictionary),a!==Ff)))throw new Error(z0[a])}qf.prototype.push=function(i,r){const a=this.strm,s=this.options.chunkSize,l=this.options.dictionary;let d,v,p;if(this.ended)return!1;for(r===~~r?v=r:v=r===!0?Wb:Hb,sy.call(i)==="[object ArrayBuffer]"?a.input=new Uint8Array(i):a.input=i,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),d=fu.inflate(a,v),d===s0&&l&&(d=fu.inflateSetDictionary(a,l),d===Ff?d=fu.inflate(a,v):d===X1&&(d=s0));a.avail_in>0&&d===o0&&a.state.wrap>0&&i[a.next_in]!==0;)fu.inflateReset(a),d=fu.inflate(a,v);switch(d){case $b:case X1:case s0:case Yb:return this.onEnd(d),this.ended=!0,!1}if(p=a.avail_out,a.next_out&&(a.avail_out===0||d===o0))if(this.options.to==="string"){let b=P0.utf8border(a.output,a.next_out),y=a.next_out-b,C=P0.buf2string(a.output,b);a.next_out=y,a.avail_out=s-y,y&&a.output.set(a.output.subarray(b,b+y),0),this.onData(C)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(d===Ff&&p===0)){if(d===o0)return d=fu.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};qf.prototype.onData=function(i){this.chunks.push(i)};qf.prototype.onEnd=function(i){i===Ff&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Gx.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Gb(i,r){const a=new qf(r);if(a.push(i),a.err)throw a.msg||z0[a.err];return a.result}var Xb=qf,Kb=Gb,Zb={Inflate:Xb,inflate:Kb};const{Inflate:Jb,inflate:Qb}=Zb;var K1=Jb,e5=Qb;const ly=[];for(let i=0;i<256;i++){let r=i;for(let a=0;a<8;a++)r&1?r=3988292384^r>>>1:r=r>>>1;ly[i]=r}const Z1=4294967295;function t5(i,r,a){let s=i;for(let l=0;l<a;l++)s=ly[(s^r[l])&255]^s>>>8;return s}function n5(i,r){return(t5(Z1,i,r)^Z1)>>>0}function J1(i,r,a){const s=i.readUint32(),l=n5(new Uint8Array(i.buffer,i.byteOffset+i.offset-r-4,r),r);if(l!==s)throw new Error(`CRC mismatch for chunk ${a}. Expected ${s}, found ${l}`)}function cy(i,r,a){for(let s=0;s<a;s++)r[s]=i[s]}function uy(i,r,a,s){let l=0;for(;l<s;l++)r[l]=i[l];for(;l<a;l++)r[l]=i[l]+r[l-s]&255}function dy(i,r,a,s){let l=0;if(a.length===0)for(;l<s;l++)r[l]=i[l];else for(;l<s;l++)r[l]=i[l]+a[l]&255}function fy(i,r,a,s,l){let d=0;if(a.length===0){for(;d<l;d++)r[d]=i[d];for(;d<s;d++)r[d]=i[d]+(r[d-l]>>1)&255}else{for(;d<l;d++)r[d]=i[d]+(a[d]>>1)&255;for(;d<s;d++)r[d]=i[d]+(r[d-l]+a[d]>>1)&255}}function py(i,r,a,s,l){let d=0;if(a.length===0){for(;d<l;d++)r[d]=i[d];for(;d<s;d++)r[d]=i[d]+r[d-l]&255}else{for(;d<l;d++)r[d]=i[d]+a[d]&255;for(;d<s;d++)r[d]=i[d]+i5(r[d-l],a[d],a[d-l])&255}}function i5(i,r,a){const s=i+r-a,l=Math.abs(s-i),d=Math.abs(s-r),v=Math.abs(s-a);return l<=d&&l<=v?i:d<=v?r:a}function r5(i,r,a,s,l,d){switch(i){case 0:cy(r,a,l);break;case 1:uy(r,a,l,d);break;case 2:dy(r,a,s,l);break;case 3:fy(r,a,s,l,d);break;case 4:py(r,a,s,l,d);break;default:throw new Error(`Unsupported filter: ${i}`)}}const a5=new Uint16Array([255]),o5=new Uint8Array(a5.buffer),s5=o5[0]===255;function l5(i){const{data:r,width:a,height:s,channels:l,depth:d}=i,v=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],p=Math.ceil(d/8)*l,b=new Uint8Array(s*a*p);let y=0;for(let C=0;C<7;C++){const D=v[C],O=Math.ceil((a-D.x)/D.xStep),T=Math.ceil((s-D.y)/D.yStep);if(O<=0||T<=0)continue;const K=O*p,R=new Uint8Array(K);for(let z=0;z<T;z++){const w=r[y++],we=r.subarray(y,y+K);y+=K;const X=new Uint8Array(K);r5(w,we,X,R,K,p),R.set(X);for(let G=0;G<O;G++){const J=D.x+G*D.xStep,ue=D.y+z*D.yStep;if(!(J>=a||ue>=s))for(let oe=0;oe<p;oe++)b[(ue*a+J)*p+oe]=X[G*p+oe]}}}if(d===16){const C=new Uint16Array(b.buffer);if(s5)for(let D=0;D<C.length;D++)C[D]=c5(C[D]);return C}else return b}function c5(i){return(i&255)<<8|i>>8&255}const u5=new Uint16Array([255]),d5=new Uint8Array(u5.buffer),f5=d5[0]===255,p5=new Uint8Array(0);function Q1(i){const{data:r,width:a,height:s,channels:l,depth:d}=i,v=Math.ceil(d/8)*l,p=Math.ceil(d/8*l*a),b=new Uint8Array(s*p);let y=p5,C=0,D,O;for(let T=0;T<s;T++){switch(D=r.subarray(C+1,C+1+p),O=b.subarray(T*p,(T+1)*p),r[C]){case 0:cy(D,O,p);break;case 1:uy(D,O,p,v);break;case 2:dy(D,O,y,p);break;case 3:fy(D,O,y,p,v);break;case 4:py(D,O,y,p,v);break;default:throw new Error(`Unsupported filter: ${r[C]}`)}y=O,C+=p+1}if(d===16){const T=new Uint16Array(b.buffer);if(f5)for(let K=0;K<T.length;K++)T[K]=h5(T[K]);return T}else return b}function h5(i){return(i&255)<<8|i>>8&255}const $p=Uint8Array.of(137,80,78,71,13,10,26,10);function ex(i){if(!g5(i.readBytes($p.length)))throw new Error("wrong PNG signature")}function g5(i){if(i.length<$p.length)return!1;for(let r=0;r<$p.length;r++)if(i[r]!==$p[r])return!1;return!0}const x5="tEXt",y5=0,hy=new TextDecoder("latin1");function m5(i){if(v5(i),i.length===0||i.length>79)throw new Error("keyword length must be between 1 and 79")}const b5=/^[\u0000-\u00FF]*$/;function v5(i){if(!b5.test(i))throw new Error("invalid latin1 text")}function w5(i,r,a){const s=gy(r);i[s]=S5(r,a-s.length-1)}function gy(i){for(i.mark();i.readByte()!==y5;);const r=i.offset;i.reset();const a=hy.decode(i.readBytes(r-i.offset-1));return i.skip(1),m5(a),a}function S5(i,r){return hy.decode(i.readBytes(r))}const El={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},l0={UNKNOWN:-1,DEFLATE:0},tx={UNKNOWN:-1,ADAPTIVE:0},c0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Fp={NONE:0,BACKGROUND:1,PREVIOUS:2},u0={SOURCE:0,OVER:1};class j5 extends U0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(r,a={}){super(r);const{checkCrc:s=!1}=a;this._checkCrc=s,this._inflator=new K1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=l0.UNKNOWN,this._filterMethod=tx.UNKNOWN,this._interlaceMethod=c0.UNKNOWN,this._colorType=El.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ex(this);!this._end;){const r=this.readUint32(),a=this.readChars(4);this.decodeChunk(r,a)}return this.decodeImage(),this._png}decodeApng(){for(ex(this);!this._end;){const r=this.readUint32(),a=this.readChars(4);this.decodeApngChunk(r,a)}return this.decodeApngImage(),this._apng}decodeChunk(r,a){const s=this.offset;switch(a){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case x5:w5(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?J1(this,r+4,a):this.skip(4)}decodeApngChunk(r,a){const s=this.offset;switch(a!=="fdAT"&&a!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),a){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,a),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?J1(this,r+4,a):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=T5(this.readUint8());const a=this.readUint8();this._colorType=a;let s;switch(a){case El.GREYSCALE:s=1;break;case El.TRUECOLOUR:s=3;break;case El.INDEXED_COLOUR:s=1;break;case El.GREYSCALE_ALPHA:s=2;break;case El.TRUECOLOUR_ALPHA:s=4;break;case El.UNKNOWN:default:throw new Error(`Unknown color type: ${a}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==l0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const a=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let l=0;l<a;l++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const a=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let a=r,s=this.offset+this.byteOffset;if(s+=4,a-=4,this._inflator.push(new Uint8Array(this.buffer,s,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case El.GREYSCALE:case El.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let a=0;a<r/2;a++)this._transparency[a]=this.readUint16();break}case El.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let a=0;for(;a<r;a++){const s=this.readByte();this._palette[a].push(s)}for(;a<this._palette.length;a++)this._palette[a].push(255);break}case El.UNKNOWN:case El.GREYSCALE_ALPHA:case El.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const a=gy(this),s=this.readUint8();if(s!==l0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const l=this.readBytes(r-a.length-2);this._png.iccEmbeddedProfile={name:a,profile:e5(l)}}decodepHYs(){const r=this.readUint32(),a=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:a,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const a={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=Q1({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)a.data=s.data;else{const l=this._apng.frames.at(r-1);this.disposeFrame(s,l,a),this.addFrameDataToCanvas(a,s)}this._apng.frames.push(a)}}return this._apng}disposeFrame(r,a,s){switch(r.disposeOp){case Fp.NONE:break;case Fp.BACKGROUND:for(let l=0;l<this._png.height;l++)for(let d=0;d<this._png.width;d++){const v=(l*r.width+d)*this._png.channels;for(let p=0;p<this._png.channels;p++)s.data[v+p]=0}break;case Fp.PREVIOUS:s.data.set(a.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,a){const s=1<<this._png.depth,l=(d,v)=>{const p=((d+a.yOffset)*this._png.width+a.xOffset+v)*this._png.channels,b=(d*a.width+v)*this._png.channels;return{index:p,frameIndex:b}};switch(a.blendOp){case u0.SOURCE:for(let d=0;d<a.height;d++)for(let v=0;v<a.width;v++){const{index:p,frameIndex:b}=l(d,v);for(let y=0;y<this._png.channels;y++)r.data[p+y]=a.data[b+y]}break;case u0.OVER:for(let d=0;d<a.height;d++)for(let v=0;v<a.width;v++){const{index:p,frameIndex:b}=l(d,v);for(let y=0;y<this._png.channels;y++){const C=a.data[b+this._png.channels-1]/s,D=y%(this._png.channels-1)===0?1:a.data[b+y],O=Math.floor(C*D+(1-C)*r.data[p+y]);r.data[p+y]+=O}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==tx.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===c0.NO_INTERLACE)this._png.data=Q1({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===c0.ADAM7)this._png.data=l5({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,a=this._frames.at(-1);a?a.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Fp.NONE,blendOp:u0.SOURCE,data:r}),this._inflator=new K1,this._writingDataChunks=!1}}function T5(i){if(i!==1&&i!==2&&i!==4&&i!==8&&i!==16)throw new Error(`invalid bit depth: ${i}`);return i}var nx;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.METRE=1]="METRE"})(nx||(nx={}));function C5(i,r){return new j5(i,r).decode()}var ri=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function d0(){ri.console&&typeof ri.console.log=="function"&&ri.console.log.apply(ri.console,arguments)}var Xr={log:d0,warn:function(i){ri.console&&(typeof ri.console.warn=="function"?ri.console.warn.apply(ri.console,arguments):d0.call(null,arguments))},error:function(i){ri.console&&(typeof ri.console.error=="function"?ri.console.error.apply(ri.console,arguments):d0(i))}};function f0(i,r,a){var s=new XMLHttpRequest;s.open("GET",i),s.responseType="blob",s.onload=function(){yd(s.response,r,a)},s.onerror=function(){Xr.error("could not download file")},s.send()}function ix(i){var r=new XMLHttpRequest;r.open("HEAD",i,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function Up(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(r)}}var yd=ri.saveAs||((typeof window>"u"?"undefined":Pr(window))!=="object"||window!==ri?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,r,a){var s=ri.URL||ri.webkitURL,l=document.createElement("a");r=r||i.name||"download",l.download=r,l.rel="noopener",typeof i=="string"?(l.href=i,l.origin!==location.origin?ix(l.href)?f0(i,r,a):Up(l,l.target="_blank"):Up(l)):(l.href=s.createObjectURL(i),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){Up(l)},0))}:"msSaveOrOpenBlob"in navigator?function(i,r,a){if(r=r||i.name||"download",typeof i=="string")if(ix(i))f0(i,r,a);else{var s=document.createElement("a");s.href=i,s.target="_blank",setTimeout(function(){Up(s)})}else navigator.msSaveOrOpenBlob((function(l,d){return d===void 0?d={autoBom:!1}:Pr(d)!=="object"&&(Xr.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l})(i,a),r)}:function(i,r,a,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof i=="string")return f0(i,r,a);var l=i.type==="application/octet-stream",d=/constructor/i.test(ri.HTMLElement)||ri.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||l&&d)&&(typeof FileReader>"u"?"undefined":Pr(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var C=p.result;C=v?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=C:location=C,s=null},p.readAsDataURL(i)}else{var b=ri.URL||ri.webkitURL,y=b.createObjectURL(i);s?s.location=y:location.href=y,s=null,setTimeout(function(){b.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function xy(i){var r;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],s=0;s<a.length;s++){var l=a[s].re,d=a[s].process,v=l.exec(i);v&&(r=d(v),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),b=this.g.toString(16),y=this.b.toString(16);return p.length==1&&(p="0"+p),b.length==1&&(b="0"+b),y.length==1&&(y="0"+y),"#"+p+b+y}}var Yp=ri.atob.bind(ri),rx=ri.btoa.bind(ri);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function p0(i,r){var a=i[0],s=i[1],l=i[2],d=i[3];a=js(a,s,l,d,r[0],7,-680876936),d=js(d,a,s,l,r[1],12,-389564586),l=js(l,d,a,s,r[2],17,606105819),s=js(s,l,d,a,r[3],22,-1044525330),a=js(a,s,l,d,r[4],7,-176418897),d=js(d,a,s,l,r[5],12,1200080426),l=js(l,d,a,s,r[6],17,-1473231341),s=js(s,l,d,a,r[7],22,-45705983),a=js(a,s,l,d,r[8],7,1770035416),d=js(d,a,s,l,r[9],12,-1958414417),l=js(l,d,a,s,r[10],17,-42063),s=js(s,l,d,a,r[11],22,-1990404162),a=js(a,s,l,d,r[12],7,1804603682),d=js(d,a,s,l,r[13],12,-40341101),l=js(l,d,a,s,r[14],17,-1502002290),a=Ts(a,s=js(s,l,d,a,r[15],22,1236535329),l,d,r[1],5,-165796510),d=Ts(d,a,s,l,r[6],9,-1069501632),l=Ts(l,d,a,s,r[11],14,643717713),s=Ts(s,l,d,a,r[0],20,-373897302),a=Ts(a,s,l,d,r[5],5,-701558691),d=Ts(d,a,s,l,r[10],9,38016083),l=Ts(l,d,a,s,r[15],14,-660478335),s=Ts(s,l,d,a,r[4],20,-405537848),a=Ts(a,s,l,d,r[9],5,568446438),d=Ts(d,a,s,l,r[14],9,-1019803690),l=Ts(l,d,a,s,r[3],14,-187363961),s=Ts(s,l,d,a,r[8],20,1163531501),a=Ts(a,s,l,d,r[13],5,-1444681467),d=Ts(d,a,s,l,r[2],9,-51403784),l=Ts(l,d,a,s,r[7],14,1735328473),a=Cs(a,s=Ts(s,l,d,a,r[12],20,-1926607734),l,d,r[5],4,-378558),d=Cs(d,a,s,l,r[8],11,-2022574463),l=Cs(l,d,a,s,r[11],16,1839030562),s=Cs(s,l,d,a,r[14],23,-35309556),a=Cs(a,s,l,d,r[1],4,-1530992060),d=Cs(d,a,s,l,r[4],11,1272893353),l=Cs(l,d,a,s,r[7],16,-155497632),s=Cs(s,l,d,a,r[10],23,-1094730640),a=Cs(a,s,l,d,r[13],4,681279174),d=Cs(d,a,s,l,r[0],11,-358537222),l=Cs(l,d,a,s,r[3],16,-722521979),s=Cs(s,l,d,a,r[6],23,76029189),a=Cs(a,s,l,d,r[9],4,-640364487),d=Cs(d,a,s,l,r[12],11,-421815835),l=Cs(l,d,a,s,r[15],16,530742520),a=ks(a,s=Cs(s,l,d,a,r[2],23,-995338651),l,d,r[0],6,-198630844),d=ks(d,a,s,l,r[7],10,1126891415),l=ks(l,d,a,s,r[14],15,-1416354905),s=ks(s,l,d,a,r[5],21,-57434055),a=ks(a,s,l,d,r[12],6,1700485571),d=ks(d,a,s,l,r[3],10,-1894986606),l=ks(l,d,a,s,r[10],15,-1051523),s=ks(s,l,d,a,r[1],21,-2054922799),a=ks(a,s,l,d,r[8],6,1873313359),d=ks(d,a,s,l,r[15],10,-30611744),l=ks(l,d,a,s,r[6],15,-1560198380),s=ks(s,l,d,a,r[13],21,1309151649),a=ks(a,s,l,d,r[4],6,-145523070),d=ks(d,a,s,l,r[11],10,-1120210379),l=ks(l,d,a,s,r[2],15,718787259),s=ks(s,l,d,a,r[9],21,-343485551),i[0]=$u(a,i[0]),i[1]=$u(s,i[1]),i[2]=$u(l,i[2]),i[3]=$u(d,i[3])}function ah(i,r,a,s,l,d){return r=$u($u(r,i),$u(s,d)),$u(r<<l|r>>>32-l,a)}function js(i,r,a,s,l,d,v){return ah(r&a|~r&s,i,r,l,d,v)}function Ts(i,r,a,s,l,d,v){return ah(r&s|a&~s,i,r,l,d,v)}function Cs(i,r,a,s,l,d,v){return ah(r^a^s,i,r,l,d,v)}function ks(i,r,a,s,l,d,v){return ah(a^(r|~s),i,r,l,d,v)}function yy(i){var r,a=i.length,s=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=i.length;r+=64)p0(s,k5(i.substring(r-64,r)));i=i.substring(r-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<i.length;r++)l[r>>2]|=i.charCodeAt(r)<<(r%4<<3);if(l[r>>2]|=128<<(r%4<<3),r>55)for(p0(s,l),r=0;r<16;r++)l[r]=0;return l[14]=8*a,p0(s,l),s}function k5(i){var r,a=[];for(r=0;r<64;r+=4)a[r>>2]=i.charCodeAt(r)+(i.charCodeAt(r+1)<<8)+(i.charCodeAt(r+2)<<16)+(i.charCodeAt(r+3)<<24);return a}var ax="0123456789abcdef".split("");function N5(i){for(var r="",a=0;a<4;a++)r+=ax[i>>8*a+4&15]+ax[i>>8*a&15];return r}function A5(i){return String.fromCharCode(255&i,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function _0(i){return yy(i).map(A5).join("")}var z5=(function(i){for(var r=0;r<i.length;r++)i[r]=N5(i[r]);return i.join("")})(yy("hello"))!="5d41402abc4b2a76b9719d911017c592";function $u(i,r){if(z5){var a=(65535&i)+(65535&r);return(i>>16)+(r>>16)+(a>>16)<<16|65535&a}return i+r&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function D0(i,r){var a,s,l,d;if(i!==a){for(var v=(l=i,d=1+(256/i.length|0),new Array(d+1).join(l)),p=[],b=0;b<256;b++)p[b]=b;var y=0;for(b=0;b<256;b++){var C=p[b];y=(y+C+v.charCodeAt(b))%256,p[b]=p[y],p[y]=C}a=i,s=p}else p=s;var D=r.length,O=0,T=0,K="";for(b=0;b<D;b++)T=(T+(C=p[O=(O+1)%256]))%256,p[O]=p[T],p[T]=C,v=p[(p[O]+p[T])%256],K+=String.fromCharCode(r.charCodeAt(b)^v);return K}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ox={print:4,modify:8,copy:16,"annot-forms":32};function Zd(i,r,a,s){this.v=1,this.r=2;var l=192;i.forEach(function(p){if(ox.perm!==void 0)throw new Error("Invalid permission: "+p);l+=ox[p]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var d=(r+this.padding).substr(0,32),v=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(d,v),this.P=-(1+(255^l)),this.encryptionKey=_0(d+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=D0(this.encryptionKey,this.padding)}function Jd(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var r="",a=i.length,s=0;s<a;s++){var l=i.charCodeAt(s);r+=l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?"#"+("0"+l.toString(16)).slice(-2):i[s]}return r}function sx(i){if(Pr(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(a,s,l){if(l=l||!1,typeof a!="string"||typeof s!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(a)||(r[a]={});var d=Math.random().toString(35);return r[a][d]=[s,!!l],d},this.unsubscribe=function(a){for(var s in r)if(r[s][a])return delete r[s][a],Object.keys(r[s]).length===0&&delete r[s],!0;return!1},this.publish=function(a){if(r.hasOwnProperty(a)){var s=Array.prototype.slice.call(arguments,1),l=[];for(var d in r[a]){var v=r[a][d];try{v[0].apply(i,s)}catch(p){ri.console&&Xr.error("jsPDF PubSub Error",p.message,p)}v[1]&&l.push(d)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function th(i){if(!(this instanceof th))return new th(i);var r="opacity,stroke-opacity".split(",");for(var a in i)i.hasOwnProperty(a)&&r.indexOf(a)>=0&&(this[a]=i[a]);this.id="",this.objectNumber=-1}function my(i,r){this.gState=i,this.matrix=r,this.id="",this.objectNumber=-1}function md(i,r,a,s,l){if(!(this instanceof md))return new md(i,r,a,s,l);this.type=i==="axial"?2:3,this.coords=r,this.colors=a,my.call(this,s,l)}function Qd(i,r,a,s,l){if(!(this instanceof Qd))return new Qd(i,r,a,s,l);this.boundingBox=i,this.xStep=r,this.yStep=a,this.stream="",this.cloneIndex=0,my.call(this,s,l)}function Rn(i){var r,a=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],l=arguments[2],d=arguments[3],v=[],p=1,b=16,y="S",C=null;Pr(i=i||{})==="object"&&(a=i.orientation,s=i.unit||s,l=i.format||l,d=i.compress||i.compressPdf||d,(C=i.encryption||null)!==null&&(C.userPassword=C.userPassword||"",C.ownerPassword=C.ownerPassword||"",C.userPermissions=C.userPermissions||[]),p=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(r=i.precision),i.floatPrecision!==void 0&&(b=i.floatPrecision),y=i.defaultPathOperation||"S"),v=i.filters||(d===!0?["FlateEncode"]:v),s=s||"mm",a=(""+(a||"P")).toLowerCase();var D=i.putOnlyUsedFonts||!1,O={},T={internal:{},__private__:{}};T.__private__.PubSub=sx;var K="1.3",R=T.__private__.getPdfVersion=function(){return K};T.__private__.setPdfVersion=function(S){K=S};var z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};T.__private__.getPageFormats=function(){return z};var w=T.__private__.getPageFormat=function(S){return z[S]};l=l||"a4";var we="compat",X="advanced",G=we;function J(){this.saveGraphicsState(),ne(new Ft(Pt,0,0,-Pt,0,bn()*Pt).toString()+" cm"),this.setFontSize(this.getFontSize()/Pt),y="n",G=X}function ue(){this.restoreGraphicsState(),y="S",G=we}var oe=T.__private__.combineFontStyleAndFontWeight=function(S,U){if(S=="bold"&&U=="normal"||S=="bold"&&U==400||S=="normal"&&U=="italic"||S=="bold"&&U=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return U&&(S=U==400||U==="normal"?S==="italic"?"italic":"normal":U!=700&&U!=="bold"||S!=="normal"?(U==700?"bold":U)+""+S:"bold"),S};T.advancedAPI=function(S){var U=G===we;return U&&J.call(this),typeof S!="function"||(S(this),U&&ue.call(this)),this},T.compatAPI=function(S){var U=G===X;return U&&ue.call(this),typeof S!="function"||(S(this),U&&J.call(this)),this},T.isAdvancedAPI=function(){return G===X};var ie,E=function(S){if(G!==X)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Y=T.roundToPrecision=T.__private__.roundToPrecision=function(S,U){var Se=r||U;if(isNaN(S)||isNaN(Se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(Se).replace(/0+$/,"")};ie=T.hpf=T.__private__.hpf=typeof b=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(S,b)}:b==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(S,16)};var F=T.f2=T.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return Y(S,2)},L=T.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return Y(S,3)},$=T.scale=T.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return G===we?S*Pt:G===X?S:void 0},H=function(S){return $((function(U){return G===we?bn()-U:G===X?U:void 0})(S))};T.__private__.setPrecision=T.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(r=parseInt(S,10))};var Pe,ae="00000000000000000000000000000000",ve=T.__private__.getFileId=function(){return ae},pe=T.__private__.setFileId=function(S){return ae=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),C!==null&&(Wi=new Zd(C.userPermissions,C.userPassword,C.ownerPassword,ae)),ae};T.setFileId=function(S){return pe(S),this},T.getFileId=function(){return ve()};var Ce=T.__private__.convertDateToPDFDate=function(S){var U=S.getTimezoneOffset(),Se=U<0?"+":"-",Be=Math.floor(Math.abs(U/60)),Ve=Math.abs(U%60),ut=[Se,q(Be),"'",q(Ve),"'"].join("");return["D:",S.getFullYear(),q(S.getMonth()+1),q(S.getDate()),q(S.getHours()),q(S.getMinutes()),q(S.getSeconds()),ut].join("")},fe=T.__private__.convertPDFDateToDate=function(S){var U=parseInt(S.substr(2,4),10),Se=parseInt(S.substr(6,2),10)-1,Be=parseInt(S.substr(8,2),10),Ve=parseInt(S.substr(10,2),10),ut=parseInt(S.substr(12,2),10),wt=parseInt(S.substr(14,2),10);return new Date(U,Se,Be,Ve,ut,wt,0)},k=T.__private__.setCreationDate=function(S){var U;if(S===void 0&&(S=new Date),S instanceof Date)U=Ce(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");U=S}return Pe=U},A=T.__private__.getCreationDate=function(S){var U=Pe;return S==="jsDate"&&(U=fe(Pe)),U};T.setCreationDate=function(S){return k(S),this},T.getCreationDate=function(S){return A(S)};var W,q=T.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},te=T.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},xe=0,ee=[],Ie=[],_e=0,Fe=[],nt=[],lt=!1,kt=Ie;T.__private__.setCustomOutputDestination=function(S){lt=!0,kt=S};var It=function(S){lt||(kt=S)};T.__private__.resetCustomOutputDestination=function(){lt=!1,kt=Ie};var ne=T.__private__.out=function(S){return S=S.toString(),_e+=S.length+1,kt.push(S),kt},jt=T.__private__.write=function(S){return ne(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},Qt=T.__private__.getArrayBuffer=function(S){for(var U=S.length,Se=new ArrayBuffer(U),Be=new Uint8Array(Se);U--;)Be[U]=S.charCodeAt(U);return Se},Wt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];T.__private__.getStandardFonts=function(){return Wt};var xt=i.fontSize||16;T.__private__.setFontSize=T.setFontSize=function(S){return xt=G===X?S/Pt:S,this};var Je,Gt=T.__private__.getFontSize=T.getFontSize=function(){return G===we?xt:xt*Pt},un=i.R2L||!1;T.__private__.setR2L=T.setR2L=function(S){return un=S,this},T.__private__.getR2L=T.getR2L=function(){return un};var Zt,_n=T.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))Je=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');Je=S}else Je=parseInt(S,10)};T.__private__.getZoomMode=function(){return Je};var Rt,Le=T.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Zt=S};T.__private__.getPageMode=function(){return Zt};var ke=T.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');Rt=S};T.__private__.getLayoutMode=function(){return Rt},T.__private__.setDisplayMode=T.setDisplayMode=function(S,U,Se){return _n(S),ke(U),Le(Se),this};var Xe={title:"",subject:"",author:"",keywords:"",creator:""};T.__private__.getDocumentProperty=function(S){if(Object.keys(Xe).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xe[S]},T.__private__.getDocumentProperties=function(){return Xe},T.__private__.setDocumentProperties=T.setProperties=T.setDocumentProperties=function(S){for(var U in Xe)Xe.hasOwnProperty(U)&&S[U]&&(Xe[U]=S[U]);return this},T.__private__.setDocumentProperty=function(S,U){if(Object.keys(Xe).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xe[S]=U};var et,Pt,St,_t,Ut,qt={},Xt={},it=[],an={},Bt={},Kt={},dn={},ti=null,Nn=0,xn=[],Ot=new sx(T),ji=i.hotfixes||[],In={},er={},Gi=[],Ft=function S(U,Se,Be,Ve,ut,wt){if(!(this instanceof S))return new S(U,Se,Be,Ve,ut,wt);isNaN(U)&&(U=1),isNaN(Se)&&(Se=0),isNaN(Be)&&(Be=0),isNaN(Ve)&&(Ve=1),isNaN(ut)&&(ut=0),isNaN(wt)&&(wt=0),this._matrix=[U,Se,Be,Ve,ut,wt]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ie).join(S)},Ft.prototype.multiply=function(S){var U=S.sx*this.sx+S.shy*this.shx,Se=S.sx*this.shy+S.shy*this.sy,Be=S.shx*this.sx+S.sy*this.shx,Ve=S.shx*this.shy+S.sy*this.sy,ut=S.tx*this.sx+S.ty*this.shx+this.tx,wt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Ft(U,Se,Be,Ve,ut,wt)},Ft.prototype.decompose=function(){var S=this.sx,U=this.shy,Se=this.shx,Be=this.sy,Ve=this.tx,ut=this.ty,wt=Math.sqrt(S*S+U*U),sn=(S/=wt)*Se+(U/=wt)*Be;Se-=S*sn,Be-=U*sn;var jn=Math.sqrt(Se*Se+Be*Be);return sn/=jn,S*(Be/=jn)<U*(Se/=jn)&&(S=-S,U=-U,sn=-sn,wt=-wt),{scale:new Ft(wt,0,0,jn,0,0),translate:new Ft(1,0,0,1,Ve,ut),rotate:new Ft(S,U,-U,S,0,0),skew:new Ft(1,0,sn,1,0,0)}},Ft.prototype.toString=function(S){return this.join(" ")},Ft.prototype.inversed=function(){var S=this.sx,U=this.shy,Se=this.shx,Be=this.sy,Ve=this.tx,ut=this.ty,wt=1/(S*Be-U*Se),sn=Be*wt,jn=-U*wt,vn=-Se*wt,ni=S*wt;return new Ft(sn,jn,vn,ni,-sn*Ve-vn*ut,-jn*Ve-ni*ut)},Ft.prototype.applyToPoint=function(S){var U=S.x*this.sx+S.y*this.shx+this.tx,Se=S.x*this.shy+S.y*this.sy+this.ty;return new Po(U,Se)},Ft.prototype.applyToRectangle=function(S){var U=this.applyToPoint(S),Se=this.applyToPoint(new Po(S.x+S.w,S.y+S.h));return new Kr(U.x,U.y,Se.x-U.x,Se.y-U.y)},Ft.prototype.clone=function(){var S=this.sx,U=this.shy,Se=this.shx,Be=this.sy,Ve=this.tx,ut=this.ty;return new Ft(S,U,Se,Be,Ve,ut)},T.Matrix=Ft;var Pi=T.matrixMult=function(S,U){return U.multiply(S)},gi=new Ft(1,0,0,1,0,0);T.unitMatrix=T.identityMatrix=gi;var Et=function(S,U){if(!Bt[S]){var Se=(U instanceof md?"Sh":"P")+(Object.keys(an).length+1).toString(10);U.id=Se,Bt[S]=Se,an[Se]=U,Ot.publish("addPattern",U)}};T.ShadingPattern=md,T.TilingPattern=Qd,T.addShadingPattern=function(S,U){return E("addShadingPattern()"),Et(S,U),this},T.beginTilingPattern=function(S){E("beginTilingPattern()"),ho(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},T.endTilingPattern=function(S,U){E("endTilingPattern()"),U.stream=nt[W].join(`
`),Et(S,U),Ot.publish("endTilingPattern",U),Gi.pop().restore()};var Ke,Vt=T.__private__.newObject=function(){var S=$t();return On(S,!0),S},$t=T.__private__.newObjectDeferred=function(){return xe++,ee[xe]=function(){return _e},xe},On=function(S,U){return U=typeof U=="boolean"&&U,ee[S]=_e,U&&ne(S+" 0 obj"),S},En=T.__private__.newAdditionalObject=function(){var S={objId:$t(),content:""};return Fe.push(S),S},Hi=$t(),Gn=$t(),ai=T.__private__.decodeColorString=function(S){var U=S.split(" ");if(U.length!==2||U[1]!=="g"&&U[1]!=="G")U.length!==5||U[4]!=="k"&&U[4]!=="K"||(U=[(1-U[0])*(1-U[3]),(1-U[1])*(1-U[3]),(1-U[2])*(1-U[3]),"r"]);else{var Se=parseFloat(U[0]);U=[Se,Se,Se,"r"]}for(var Be="#",Ve=0;Ve<3;Ve++)Be+=("0"+Math.floor(255*parseFloat(U[Ve])).toString(16)).slice(-2);return Be},Li=T.__private__.encodeColorString=function(S){var U;typeof S=="string"&&(S={ch1:S});var Se=S.ch1,Be=S.ch2,Ve=S.ch3,ut=S.ch4,wt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Se=="string"&&Se.charAt(0)!=="#"){var sn=new xy(Se);if(sn.ok)Se=sn.toHex();else if(!/^\d*\.?\d*$/.test(Se))throw new Error('Invalid color "'+Se+'" passed to jsPDF.encodeColorString.')}if(typeof Se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Se)&&(Se="#"+Se[1]+Se[1]+Se[2]+Se[2]+Se[3]+Se[3]),typeof Se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Se)){var jn=parseInt(Se.substr(1),16);Se=jn>>16&255,Be=jn>>8&255,Ve=255&jn}if(Be===void 0||ut===void 0&&Se===Be&&Be===Ve)U=typeof Se=="string"?Se+" "+wt[0]:S.precision===2?F(Se/255)+" "+wt[0]:L(Se/255)+" "+wt[0];else if(ut===void 0||Pr(ut)==="object"){if(ut&&!isNaN(ut.a)&&ut.a===0)return["1.","1.","1.",wt[1]].join(" ");U=typeof Se=="string"?[Se,Be,Ve,wt[1]].join(" "):S.precision===2?[F(Se/255),F(Be/255),F(Ve/255),wt[1]].join(" "):[L(Se/255),L(Be/255),L(Ve/255),wt[1]].join(" ")}else U=typeof Se=="string"?[Se,Be,Ve,ut,wt[2]].join(" "):S.precision===2?[F(Se),F(Be),F(Ve),F(ut),wt[2]].join(" "):[L(Se),L(Be),L(Ve),L(ut),wt[2]].join(" ");return U},tr=T.__private__.getFilters=function(){return v},co=T.__private__.putStream=function(S){var U=(S=S||{}).data||"",Se=S.filters||tr(),Be=S.alreadyAppliedFilters||[],Ve=S.addLength1||!1,ut=U.length,wt=S.objectId,sn=function(Mi){return Mi};if(C!==null&&wt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");C!==null&&(sn=Wi.encryptor(wt,0));var jn={};Se===!0&&(Se=["FlateEncode"]);var vn=S.additionalKeyValues||[],ni=(jn=Rn.API.processDataByFilters!==void 0?Rn.API.processDataByFilters(U,Se):{data:U,reverseChain:[]}).reverseChain+(Array.isArray(Be)?Be.join(" "):Be.toString());if(jn.data.length!==0&&(vn.push({key:"Length",value:jn.data.length}),Ve===!0&&vn.push({key:"Length1",value:ut})),ni.length!=0)if(ni.split("/").length-1==1)vn.push({key:"Filter",value:ni});else{vn.push({key:"Filter",value:"["+ni+"]"});for(var wi=0;wi<vn.length;wi+=1)if(vn[wi].key==="DecodeParms"){for(var qr=[],Di=0;Di<jn.reverseChain.split("/").length-1;Di+=1)qr.push("null");qr.push(vn[wi].value),vn[wi].value="["+qr.join(" ")+"]"}}ne("<<");for(var Xi=0;Xi<vn.length;Xi++)ne("/"+vn[Xi].key+" "+vn[Xi].value);ne(">>"),jn.data.length!==0&&(ne("stream"),ne(sn(jn.data)),ne("endstream"))},pl=T.__private__.putPage=function(S){var U=S.number,Se=S.data,Be=S.objId,Ve=S.contentsObjId;On(Be,!0),ne("<</Type /Page"),ne("/Parent "+S.rootDictionaryObjId+" 0 R"),ne("/Resources "+S.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(ie(S.mediaBox.bottomLeftX))+" "+parseFloat(ie(S.mediaBox.bottomLeftY))+" "+ie(S.mediaBox.topRightX)+" "+ie(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&ne("/CropBox ["+ie(S.cropBox.bottomLeftX)+" "+ie(S.cropBox.bottomLeftY)+" "+ie(S.cropBox.topRightX)+" "+ie(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&ne("/BleedBox ["+ie(S.bleedBox.bottomLeftX)+" "+ie(S.bleedBox.bottomLeftY)+" "+ie(S.bleedBox.topRightX)+" "+ie(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&ne("/TrimBox ["+ie(S.trimBox.bottomLeftX)+" "+ie(S.trimBox.bottomLeftY)+" "+ie(S.trimBox.topRightX)+" "+ie(S.trimBox.topRightY)+"]"),S.artBox!==null&&ne("/ArtBox ["+ie(S.artBox.bottomLeftX)+" "+ie(S.artBox.bottomLeftY)+" "+ie(S.artBox.topRightX)+" "+ie(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&ne("/UserUnit "+S.userUnit),Ot.publish("putPage",{objId:Be,pageContext:xn[U],pageNumber:U,page:Se}),ne("/Contents "+Ve+" 0 R"),ne(">>"),ne("endobj");var ut=Se.join(`
`);return G===X&&(ut+=`
Q`),On(Ve,!0),co({data:ut,filters:tr(),objectId:Ve}),ne("endobj"),Be},ko=T.__private__.putPages=function(){var S,U,Se=[];for(S=1;S<=Nn;S++)xn[S].objId=$t(),xn[S].contentsObjId=$t();for(S=1;S<=Nn;S++)Se.push(pl({number:S,data:nt[S],objId:xn[S].objId,contentsObjId:xn[S].contentsObjId,mediaBox:xn[S].mediaBox,cropBox:xn[S].cropBox,bleedBox:xn[S].bleedBox,trimBox:xn[S].trimBox,artBox:xn[S].artBox,userUnit:xn[S].userUnit,rootDictionaryObjId:Hi,resourceDictionaryObjId:Gn}));On(Hi,!0),ne("<</Type /Pages");var Be="/Kids [";for(U=0;U<Nn;U++)Be+=Se[U]+" 0 R ";ne(Be+"]"),ne("/Count "+Nn),ne(">>"),ne("endobj"),Ot.publish("postPutPages")},No=function(S){Ot.publish("putFont",{font:S,out:ne,newObject:Vt,putStream:co}),S.isAlreadyPutted!==!0&&(S.objectNumber=Vt(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+Jd(S.postScriptName)),ne("/Subtype /Type1"),typeof S.encoding=="string"&&ne("/Encoding /"+S.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},is=function(S){S.objectNumber=Vt();var U=[];U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Form"}),U.push({key:"BBox",value:"["+[ie(S.x),ie(S.y),ie(S.x+S.width),ie(S.y+S.height)].join(" ")+"]"}),U.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var Se=S.pages[1].join(`
`);co({data:Se,additionalKeyValues:U,objectId:S.objectNumber}),ne("endobj")},Zn=function(S,U){U||(U=21);var Se=Vt(),Be=(function(wt,sn){var jn,vn=[],ni=1/(sn-1);for(jn=0;jn<1;jn+=ni)vn.push(jn);if(vn.push(1),wt[0].offset!=0){var wi={offset:0,color:wt[0].color};wt.unshift(wi)}if(wt[wt.length-1].offset!=1){var qr={offset:1,color:wt[wt.length-1].color};wt.push(qr)}for(var Di="",Xi=0,Mi=0;Mi<vn.length;Mi++){for(jn=vn[Mi];jn>wt[Xi+1].offset;)Xi++;var Nr=wt[Xi].offset,sr=(jn-Nr)/(wt[Xi+1].offset-Nr),Wo=wt[Xi].color,ya=wt[Xi+1].color;Di+=te(Math.round((1-sr)*Wo[0]+sr*ya[0]).toString(16))+te(Math.round((1-sr)*Wo[1]+sr*ya[1]).toString(16))+te(Math.round((1-sr)*Wo[2]+sr*ya[2]).toString(16))}return Di.trim()})(S.colors,U),Ve=[];Ve.push({key:"FunctionType",value:"0"}),Ve.push({key:"Domain",value:"[0.0 1.0]"}),Ve.push({key:"Size",value:"["+U+"]"}),Ve.push({key:"BitsPerSample",value:"8"}),Ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),co({data:Be,additionalKeyValues:Ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Se}),ne("endobj"),S.objectNumber=Vt(),ne("<< /ShadingType "+S.type),ne("/ColorSpace /DeviceRGB");var ut="/Coords ["+ie(parseFloat(S.coords[0]))+" "+ie(parseFloat(S.coords[1]))+" ";S.type===2?ut+=ie(parseFloat(S.coords[2]))+" "+ie(parseFloat(S.coords[3])):ut+=ie(parseFloat(S.coords[2]))+" "+ie(parseFloat(S.coords[3]))+" "+ie(parseFloat(S.coords[4]))+" "+ie(parseFloat(S.coords[5])),ne(ut+="]"),S.matrix&&ne("/Matrix ["+S.matrix.toString()+"]"),ne("/Function "+Se+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},ka=function(S,U){var Se=$t(),Be=Vt();U.push({resourcesOid:Se,objectOid:Be}),S.objectNumber=Be;var Ve=[];Ve.push({key:"Type",value:"/Pattern"}),Ve.push({key:"PatternType",value:"1"}),Ve.push({key:"PaintType",value:"1"}),Ve.push({key:"TilingType",value:"1"}),Ve.push({key:"BBox",value:"["+S.boundingBox.map(ie).join(" ")+"]"}),Ve.push({key:"XStep",value:ie(S.xStep)}),Ve.push({key:"YStep",value:ie(S.yStep)}),Ve.push({key:"Resources",value:Se+" 0 R"}),S.matrix&&Ve.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),co({data:S.stream,additionalKeyValues:Ve,objectId:S.objectNumber}),ne("endobj")},bi=function(S){for(var U in S.objectNumber=Vt(),ne("<<"),S)switch(U){case"opacity":ne("/ca "+F(S[U]));break;case"stroke-opacity":ne("/CA "+F(S[U]))}ne(">>"),ne("endobj")},uo=function(S){On(S.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var U in ne("/Font <<"),qt)qt.hasOwnProperty(U)&&(D===!1||D===!0&&O.hasOwnProperty(U))&&ne("/"+U+" "+qt[U].objectNumber+" 0 R");ne(">>")})(),(function(){if(Object.keys(an).length>0){for(var U in ne("/Shading <<"),an)an.hasOwnProperty(U)&&an[U]instanceof md&&an[U].objectNumber>=0&&ne("/"+U+" "+an[U].objectNumber+" 0 R");Ot.publish("putShadingPatternDict"),ne(">>")}})(),(function(U){if(Object.keys(an).length>0){for(var Se in ne("/Pattern <<"),an)an.hasOwnProperty(Se)&&an[Se]instanceof T.TilingPattern&&an[Se].objectNumber>=0&&an[Se].objectNumber<U&&ne("/"+Se+" "+an[Se].objectNumber+" 0 R");Ot.publish("putTilingPatternDict"),ne(">>")}})(S.objectOid),(function(){if(Object.keys(Kt).length>0){var U;for(U in ne("/ExtGState <<"),Kt)Kt.hasOwnProperty(U)&&Kt[U].objectNumber>=0&&ne("/"+U+" "+Kt[U].objectNumber+" 0 R");Ot.publish("putGStateDict"),ne(">>")}})(),(function(){for(var U in ne("/XObject <<"),In)In.hasOwnProperty(U)&&In[U].objectNumber>=0&&ne("/"+U+" "+In[U].objectNumber+" 0 R");Ot.publish("putXobjectDict"),ne(">>")})(),ne(">>"),ne("endobj")},Fn=function(S){Xt[S.fontName]=Xt[S.fontName]||{},Xt[S.fontName][S.fontStyle]=S.id},Ns=function(S,U,Se,Be,Ve){var ut={id:"F"+(Object.keys(qt).length+1).toString(10),postScriptName:S,fontName:U,fontStyle:Se,encoding:Be,isStandardFont:Ve||!1,metadata:{}};return Ot.publish("addFont",{font:ut,instance:this}),qt[ut.id]=ut,Fn(ut),ut.id},xi=T.__private__.pdfEscape=T.pdfEscape=function(S,U){return(function(Se,Be){var Ve,ut,wt,sn,jn,vn,ni,wi,qr;if(wt=(Be=Be||{}).sourceEncoding||"Unicode",jn=Be.outputEncoding,(Be.autoencode||jn)&&qt[et].metadata&&qt[et].metadata[wt]&&qt[et].metadata[wt].encoding&&(sn=qt[et].metadata[wt].encoding,!jn&&qt[et].encoding&&(jn=qt[et].encoding),!jn&&sn.codePages&&(jn=sn.codePages[0]),typeof jn=="string"&&(jn=sn[jn]),jn)){for(ni=!1,vn=[],Ve=0,ut=Se.length;Ve<ut;Ve++)(wi=jn[Se.charCodeAt(Ve)])?vn.push(String.fromCharCode(wi)):vn.push(Se[Ve]),vn[Ve].charCodeAt(0)>>8&&(ni=!0);Se=vn.join("")}for(Ve=Se.length;ni===void 0&&Ve!==0;)Se.charCodeAt(Ve-1)>>8&&(ni=!0),Ve--;if(!ni)return Se;for(vn=Be.noBOM?[]:[254,255],Ve=0,ut=Se.length;Ve<ut;Ve++){if((qr=(wi=Se.charCodeAt(Ve))>>8)>>8)throw new Error("Character at position "+Ve+" of string '"+Se+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");vn.push(qr),vn.push(wi-(qr<<8))}return String.fromCharCode.apply(void 0,vn)})(S,U).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xa=T.__private__.beginPage=function(S){nt[++Nn]=[],xn[Nn]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},zs(Nn),It(nt[W])},fo=function(S,U){var Se,Be,Ve;switch(a=U||a,typeof S=="string"&&(Se=w(S.toLowerCase()),Array.isArray(Se)&&(Be=Se[0],Ve=Se[1])),Array.isArray(S)&&(Be=S[0]*Pt,Ve=S[1]*Pt),isNaN(Be)&&(Be=l[0],Ve=l[1]),(Be>14400||Ve>14400)&&(Xr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Be=Math.min(14400,Be),Ve=Math.min(14400,Ve)),l=[Be,Ve],a.substr(0,1)){case"l":Ve>Be&&(l=[Ve,Be]);break;case"p":Be>Ve&&(l=[Ve,Be])}Xa(l),Vn(nr),ne(hn),on!==0&&ne(on+" J"),Xn!==0&&ne(Xn+" j"),Ot.publish("addPage",{pageNumber:Nn})},As=function(S){S>0&&S<=Nn&&(nt.splice(S,1),xn.splice(S,1),Nn--,W>Nn&&(W=Nn),this.setPage(W))},zs=function(S){S>0&&S<=Nn&&(W=S)},Ao=T.__private__.getNumberOfPages=T.getNumberOfPages=function(){return nt.length-1},Cc=function(S,U,Se){var Be,Ve=void 0;return Se=Se||{},S=S!==void 0?S:qt[et].fontName,U=U!==void 0?U:qt[et].fontStyle,Be=S.toLowerCase(),Xt[Be]!==void 0&&Xt[Be][U]!==void 0?Ve=Xt[Be][U]:Xt[S]!==void 0&&Xt[S][U]!==void 0?Ve=Xt[S][U]:Se.disableWarning===!1&&Xr.warn("Unable to look up font label for font '"+S+"', '"+U+"'. Refer to getFontList() for available fonts."),Ve||Se.noFallback||(Ve=Xt.times[U])==null&&(Ve=Xt.times.normal),Ve},ar=T.__private__.putInfo=function(){var S=Vt(),U=function(Be){return Be};for(var Se in C!==null&&(U=Wi.encryptor(S,0)),ne("<<"),ne("/Producer ("+xi(U("jsPDF "+Rn.version))+")"),Xe)Xe.hasOwnProperty(Se)&&Xe[Se]&&ne("/"+Se.substr(0,1).toUpperCase()+Se.substr(1)+" ("+xi(U(Xe[Se]))+")");ne("/CreationDate ("+xi(U(Pe))+")"),ne(">>"),ne("endobj")},Ps=T.__private__.putCatalog=function(S){var U=(S=S||{}).rootDictionaryObjId||Hi;switch(Vt(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+U+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Se=""+Je;Se.substr(Se.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+F(Je)+"]")}switch(Rt||(Rt="continuous"),Rt){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Zt&&ne("/PageMode /"+Zt),Ot.publish("putCatalog"),ne(">>"),ne("endobj")},Wn=T.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(xe+1)),ne("/Root "+xe+" 0 R"),ne("/Info "+(xe-1)+" 0 R"),C!==null&&ne("/Encrypt "+Wi.oid+" 0 R"),ne("/ID [ <"+ae+"> <"+ae+"> ]"),ne(">>")},Hn=T.__private__.putHeader=function(){ne("%PDF-"+K),ne("%")},_s=T.__private__.putXRef=function(){var S="0000000000";ne("xref"),ne("0 "+(xe+1)),ne("0000000000 65535 f ");for(var U=1;U<=xe;U++)typeof ee[U]=="function"?ne((S+ee[U]()).slice(-10)+" 00000 n "):ee[U]!==void 0?ne((S+ee[U]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},qo=T.__private__.buildDocument=function(){var S;xe=0,_e=0,Ie=[],ee=[],Fe=[],Hi=$t(),Gn=$t(),It(Ie),Ot.publish("buildDocument"),Hn(),ko(),(function(){Ot.publish("putAdditionalObjects");for(var Se=0;Se<Fe.length;Se++){var Be=Fe[Se];On(Be.objId,!0),ne(Be.content),ne("endobj")}Ot.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var Se in qt)qt.hasOwnProperty(Se)&&(D===!1||D===!0&&O.hasOwnProperty(Se))&&No(qt[Se])})(),(function(){var Se;for(Se in Kt)Kt.hasOwnProperty(Se)&&bi(Kt[Se])})(),(function(){for(var Se in In)In.hasOwnProperty(Se)&&is(In[Se])})(),(function(Se){var Be;for(Be in an)an.hasOwnProperty(Be)&&(an[Be]instanceof md?Zn(an[Be]):an[Be]instanceof Qd&&ka(an[Be],Se))})(S),Ot.publish("putResources"),S.forEach(uo),uo({resourcesOid:Gn,objectOid:Number.MAX_SAFE_INTEGER}),Ot.publish("postPutResources"),C!==null&&(Wi.oid=Vt(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Wi.v),ne("/R "+Wi.r),ne("/U <"+Wi.toHexString(Wi.U)+">"),ne("/O <"+Wi.toHexString(Wi.O)+">"),ne("/P "+Wi.P),ne(">>"),ne("endobj")),ar(),Ps();var U=_e;return _s(),Wn(),ne("startxref"),ne(""+U),ne("%%EOF"),It(nt[W]),Ie.join(`
`)},po=T.__private__.getBlob=function(S){return new Blob([Qt(S)],{type:"application/pdf"})},Oa=T.output=T.__private__.output=(Ke=function(S,U){switch(typeof(U=U||{})=="string"?U={filename:U}:U.filename=U.filename||"generated.pdf",S){case void 0:return qo();case"save":T.save(U.filename);break;case"arraybuffer":return Qt(qo());case"blob":return po(qo());case"bloburi":case"bloburl":if(ri.URL!==void 0&&typeof ri.URL.createObjectURL=="function")return ri.URL&&ri.URL.createObjectURL(po(qo()))||void 0;Xr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Se="",Be=qo();try{Se=rx(Be)}catch{Se=rx(unescape(encodeURIComponent(Be)))}return"data:application/pdf;filename="+U.filename+";base64,"+Se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ri)==="[object Window]"){var Ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ut=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';U.pdfObjectUrl&&(Ve=U.pdfObjectUrl,ut="");var wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ve+'"'+ut+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(U)+");<\/script></body></html>",sn=ri.open();return sn!==null&&sn.document.write(wt),sn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ri)==="[object Window]"){var jn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(U.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+U.filename+'" width="500px" height="400px" /></body></html>',vn=ri.open();if(vn!==null){vn.document.write(jn);var ni=this;vn.document.documentElement.querySelector("#pdfViewer").onload=function(){vn.document.title=U.filename,vn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ni.output("bloburl"))}}return vn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ri)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",U)+'"></iframe></body></html>',qr=ri.open();if(qr!==null&&(qr.document.write(wi),qr.document.title=U.filename),qr||typeof safari>"u")return qr;break;case"datauri":case"dataurl":return ri.document.location.href=this.output("datauristring",U);default:return null}},Ke.foo=function(){try{return Ke.apply(this,arguments)}catch(Se){var S=Se.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var U="Error in function "+S.split(`
`)[0].split("<")[0]+": "+Se.message;if(!ri.console)throw new Error(U);ri.console.error(U,Se),ri.alert&&alert(U)}},Ke.foo.bar=Ke,Ke.foo),vi=function(S){return Array.isArray(ji)===!0&&ji.indexOf(S)>-1};switch(s){case"pt":Pt=1;break;case"mm":Pt=72/25.4;break;case"cm":Pt=72/2.54;break;case"in":Pt=72;break;case"px":Pt=vi("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pt=12;break;case"ex":Pt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Pt=s}var Wi=null;k(),pe();var yi=T.__private__.getPageInfo=T.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xn[S].objId,pageNumber:S,pageContext:xn[S]}},_r=T.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var U in xn)if(xn[U].objId===S)break;return yi(U)},sc=T.__private__.getCurrentPageInfo=T.getCurrentPageInfo=function(){return{objId:xn[W].objId,pageNumber:W,pageContext:xn[W]}};T.addPage=function(){return fo.apply(this,arguments),this},T.setPage=function(){return zs.apply(this,arguments),It.call(this,nt[W]),this},T.insertPage=function(S){return this.addPage(),this.movePage(W,S),this},T.movePage=function(S,U){var Se,Be;if(S>U){Se=nt[S],Be=xn[S];for(var Ve=S;Ve>U;Ve--)nt[Ve]=nt[Ve-1],xn[Ve]=xn[Ve-1];nt[U]=Se,xn[U]=Be,this.setPage(U)}else if(S<U){Se=nt[S],Be=xn[S];for(var ut=S;ut<U;ut++)nt[ut]=nt[ut+1],xn[ut]=xn[ut+1];nt[U]=Se,xn[U]=Be,this.setPage(U)}return this},T.deletePage=function(){return As.apply(this,arguments),this},T.__private__.text=T.text=function(S,U,Se,Be,Ve){var ut,wt,sn,jn,vn,ni,wi,qr,Di,Xi=(Be=Be||{}).scope||this;if(typeof S=="number"&&typeof U=="number"&&(typeof Se=="string"||Array.isArray(Se))){var Mi=Se;Se=U,U=S,S=Mi}if(arguments[3]instanceof Ft==0?(sn=arguments[4],jn=arguments[5],Pr(wi=arguments[3])==="object"&&wi!==null||(typeof sn=="string"&&(jn=sn,sn=null),typeof wi=="string"&&(jn=wi,wi=null),typeof wi=="number"&&(sn=wi,wi=null),Be={flags:wi,angle:sn,align:jn})):(E("The transform parameter of text() with a Matrix value"),Di=Ve),isNaN(U)||isNaN(Se)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return Xi;var Nr,sr="",Wo=typeof Be.lineHeightFactor=="number"?Be.lineHeightFactor:or,ya=Xi.internal.scaleFactor;function Ls(Ki){return Ki=Ki.split("	").join(Array(Be.TabLen||9).join(" ")),xi(Ki,wi)}function da(Ki){for(var Ii,Sr=Ki.concat(),ra=[],Js=Sr.length;Js--;)typeof(Ii=Sr.shift())=="string"?ra.push(Ii):Array.isArray(Ki)&&(Ii.length===1||Ii[1]===void 0&&Ii[2]===void 0)?ra.push(Ii[0]):ra.push([Ii[0],Ii[1],Ii[2]]);return ra}function Ms(Ki,Ii){var Sr;if(typeof Ki=="string")Sr=Ii(Ki)[0];else if(Array.isArray(Ki)){for(var ra,Js,Os=Ki.concat(),aa=[],io=Os.length;io--;)typeof(ra=Os.shift())=="string"?aa.push(Ii(ra)[0]):Array.isArray(ra)&&typeof ra[0]=="string"&&(Js=Ii(ra[0],ra[1],ra[2]),aa.push([Js[0],Js[1],Js[2]]));Sr=aa}return Sr}var Dr=!1,Ja=!0;if(typeof S=="string")Dr=!0;else if(Array.isArray(S)){var fa=S.concat();wt=[];for(var Do,ui=fa.length;ui--;)(typeof(Do=fa.shift())!="string"||Array.isArray(Do)&&typeof Do[0]!="string")&&(Ja=!1);Dr=Ja}if(Dr===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var $o=xt/Xi.internal.scaleFactor,Hl=$o*(Wo-1);switch(Be.baseline){case"bottom":Se-=Hl;break;case"top":Se+=$o-Hl;break;case"hanging":Se+=$o-2*Hl;break;case"middle":Se+=$o/2-Hl}if((ni=Be.maxWidth||0)>0&&(typeof S=="string"?S=Xi.splitTextToSize(S,ni):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Ki,Ii){return Ki.concat(Xi.splitTextToSize(Ii,ni))},[]))),ut={text:S,x:U,y:Se,options:Be,mutex:{pdfEscape:xi,activeFontKey:et,fonts:qt,activeFontSize:xt}},Ot.publish("preProcessText",ut),S=ut.text,sn=(Be=ut.options).angle,Di instanceof Ft==0&&sn&&typeof sn=="number"){sn*=Math.PI/180,Be.rotationDirection===0&&(sn=-sn),G===X&&(sn=-sn);var kc=Math.cos(sn),Ro=Math.sin(sn);Di=new Ft(kc,Ro,-Ro,kc,0,0)}else sn&&sn instanceof Ft&&(Di=sn);G!==X||Di||(Di=gi),(vn=Be.charSpace||Jt)!==void 0&&(sr+=ie($(vn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qr=Be.horizontalScale)!==void 0&&(sr+=ie(100*qr)+` Tz
`),Be.lang;var za=-1,ss=Be.renderingMode!==void 0?Be.renderingMode:Be.stroke,Wl=Xi.internal.getCurrentPageInfo().pageContext;switch(ss){case 0:case!1:case"fill":za=0;break;case 1:case!0:case"stroke":za=1;break;case 2:case"fillThenStroke":za=2;break;case 3:case"invisible":za=3;break;case 4:case"fillAndAddForClipping":za=4;break;case 5:case"strokeAndAddPathForClipping":za=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":za=6;break;case 7:case"addToPathForClipping":za=7}var ls=Wl.usedRenderingMode!==void 0?Wl.usedRenderingMode:-1;za!==-1?sr+=za+` Tr
`:ls!==-1&&(sr+=`0 Tr
`),za!==-1&&(Wl.usedRenderingMode=za),jn=Be.align||"left";var Qa,na=xt*Wo,Lo=Xi.internal.pageSize.getWidth(),Is=qt[et];vn=Be.charSpace||Jt,ni=Be.maxWidth||0,wi=Object.assign({autoencode:!0,noBOM:!0},Be.flags);var Yo=[],Go=function(Ki){return Xi.getStringUnitWidth(Ki,{font:Is,charSpace:vn,fontSize:xt,doKerning:!1})*xt/ya};if(Object.prototype.toString.call(S)==="[object Array]"){var eo;wt=da(S),jn!=="left"&&(Qa=wt.map(Go));var ia,cs=0;if(jn==="right"){U-=Qa[0],S=[],ui=wt.length;for(var go=0;go<ui;go++)go===0?(ia=Za(U),eo=gn(Se)):(ia=$(cs-Qa[go]),eo=-na),S.push([wt[go],ia,eo]),cs=Qa[go]}else if(jn==="center"){U-=Qa[0]/2,S=[],ui=wt.length;for(var Ni=0;Ni<ui;Ni++)Ni===0?(ia=Za(U),eo=gn(Se)):(ia=$((cs-Qa[Ni])/2),eo=-na),S.push([wt[Ni],ia,eo]),cs=Qa[Ni]}else if(jn==="left"){S=[],ui=wt.length;for(var us=0;us<ui;us++)S.push(wt[us])}else if(jn==="justify"&&Is.encoding==="Identity-H"){S=[],ui=wt.length,ni=ni!==0?ni:Lo;for(var lr=0,wr=0;wr<ui;wr++)if(eo=wr===0?gn(Se):-na,ia=wr===0?Za(U):lr,wr<ui-1){var Nc=$((ni-Qa[wr])/(wt[wr].split(" ").length-1)),xo=wt[wr].split(" ");S.push([xo[0]+" ",ia,eo]),lr=0;for(var Zs=1;Zs<xo.length;Zs++){var ma=(Go(xo[Zs-1]+" "+xo[Zs])-Go(xo[Zs]))*ya+Nc;Zs==xo.length-1?S.push([xo[Zs],ma,0]):S.push([xo[Zs]+" ",ma,0]),lr-=ma}}else S.push([wt[wr],ia,eo]);S.push(["",lr,0])}else{if(jn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],ui=wt.length,ni=ni!==0?ni:Lo,wr=0;wr<ui;wr++){eo=wr===0?gn(Se):-na,ia=wr===0?Za(U):0;var xl=wt[wr].split(" ").length-1,Ac=xl>0?(ni-Qa[wr])/xl:0;wr<ui-1?Yo.push(ie($(Ac))):Yo.push(0),S.push([wt[wr],ia,eo])}}}(typeof Be.R2L=="boolean"?Be.R2L:un)===!0&&(S=Ms(S,function(Ki,Ii,Sr){return[Ki.split("").reverse().join(""),Ii,Sr]})),ut={text:S,x:U,y:Se,options:Be,mutex:{pdfEscape:xi,activeFontKey:et,fonts:qt,activeFontSize:xt}},Ot.publish("postProcessText",ut),S=ut.text,Nr=ut.mutex.isHex||!1;var Mo=qt[et].encoding;Mo!=="WinAnsiEncoding"&&Mo!=="StandardEncoding"||(S=Ms(S,function(Ki,Ii,Sr){return[Ls(Ki),Ii,Sr]})),wt=da(S),S=[];for(var Bs,ds,to,Pa=Array.isArray(wt[0])?1:0,yo="",fs=function(Ki,Ii,Sr){var ra="";return Sr instanceof Ft?(Sr=typeof Be.angle=="number"?Pi(Sr,new Ft(1,0,0,1,Ki,Ii)):Pi(new Ft(1,0,0,1,Ki,Ii),Sr),G===X&&(Sr=Pi(new Ft(1,0,0,-1,0,0),Sr)),ra=Sr.join(" ")+` Tm
`):ra=ie(Ki)+" "+ie(Ii)+` Td
`,ra},no=0;no<wt.length;no++){switch(yo="",Pa){case 1:to=(Nr?"<":"(")+wt[no][0]+(Nr?">":")"),Bs=parseFloat(wt[no][1]),ds=parseFloat(wt[no][2]);break;case 0:to=(Nr?"<":"(")+wt[no]+(Nr?">":")"),Bs=Za(U),ds=gn(Se)}Yo!==void 0&&Yo[no]!==void 0&&(yo=Yo[no]+` Tw
`),no===0?S.push(yo+fs(Bs,ds,Di)+to):Pa===0?S.push(yo+to):Pa===1&&S.push(yo+fs(Bs,ds,Di)+to)}S=Pa===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Xo=`BT
/`;return Xo+=et+" "+xt+` Tf
`,Xo+=ie(xt*Wo)+` TL
`,Xo+=yn+`
`,Xo+=sr,Xo+=S,ne(Xo+="ET"),O[et]=!0,Xi};var Ea=T.__private__.clip=T.clip=function(S){return ne(S==="evenodd"?"W*":"W"),this};T.clipEvenOdd=function(){return Ea("evenodd")},T.__private__.discardPath=T.discardPath=function(){return ne("n"),this};var Na=T.__private__.isValidStyle=function(S){var U=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(U=!0),U};T.__private__.setDefaultPathOperation=T.setDefaultPathOperation=function(S){return Na(S)&&(y=S),this};var hl=T.__private__.getStyle=T.getStyle=function(S){var U=y;switch(S){case"D":case"S":U="S";break;case"F":U="f";break;case"FD":case"DF":U="B";break;case"f":case"f*":case"B":case"B*":U=S}return U},Ka=T.close=function(){return ne("h"),this};T.stroke=function(){return ne("S"),this},T.fill=function(S){return ua("f",S),this},T.fillEvenOdd=function(S){return ua("f*",S),this},T.fillStroke=function(S){return ua("B",S),this},T.fillStrokeEvenOdd=function(S){return ua("B*",S),this};var ua=function(S,U){Pr(U)==="object"?Mt(U,S):ne(S)},Fa=function(S){S===null||G===X&&S===void 0||(S=hl(S),ne(S))};function zo(S,U,Se,Be,Ve){var ut=new Qd(U||this.boundingBox,Se||this.xStep,Be||this.yStep,this.gState,Ve||this.matrix);ut.stream=this.stream;var wt=S+"$$"+this.cloneIndex+++"$$";return Et(wt,ut),ut}var Mt=function(S,U){var Se=Bt[S.key],Be=an[Se];if(Be instanceof md)ne("q"),ne(Fi(U)),Be.gState&&T.setGState(Be.gState),ne(S.matrix.toString()+" cm"),ne("/"+Se+" sh"),ne("Q");else if(Be instanceof Qd){var Ve=new Ft(1,0,0,-1,0,bn());S.matrix&&(Ve=Ve.multiply(S.matrix||gi),Se=zo.call(Be,S.key,S.boundingBox,S.xStep,S.yStep,Ve).id),ne("q"),ne("/Pattern cs"),ne("/"+Se+" scn"),Be.gState&&T.setGState(Be.gState),ne(U),ne("Q")}},Fi=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Vo=T.moveTo=function(S,U){return ne(ie($(S))+" "+ie(H(U))+" m"),this},Xs=T.lineTo=function(S,U){return ne(ie($(S))+" "+ie(H(U))+" l"),this},Ur=T.curveTo=function(S,U,Se,Be,Ve,ut){return ne([ie($(S)),ie(H(U)),ie($(Se)),ie(H(Be)),ie($(Ve)),ie(H(ut)),"c"].join(" ")),this};T.__private__.line=T.line=function(S,U,Se,Be,Ve){if(isNaN(S)||isNaN(U)||isNaN(Se)||isNaN(Be)||!Na(Ve))throw new Error("Invalid arguments passed to jsPDF.line");return G===we?this.lines([[Se-S,Be-U]],S,U,[1,1],Ve||"S"):this.lines([[Se-S,Be-U]],S,U,[1,1]).stroke()},T.__private__.lines=T.lines=function(S,U,Se,Be,Ve,ut){var wt,sn,jn,vn,ni,wi,qr,Di,Xi,Mi,Nr,sr;if(typeof S=="number"&&(sr=Se,Se=U,U=S,S=sr),Be=Be||[1,1],ut=ut||!1,isNaN(U)||isNaN(Se)||!Array.isArray(S)||!Array.isArray(Be)||!Na(Ve)||typeof ut!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Vo(U,Se),wt=Be[0],sn=Be[1],vn=S.length,Mi=U,Nr=Se,jn=0;jn<vn;jn++)(ni=S[jn]).length===2?(Mi=ni[0]*wt+Mi,Nr=ni[1]*sn+Nr,Xs(Mi,Nr)):(wi=ni[0]*wt+Mi,qr=ni[1]*sn+Nr,Di=ni[2]*wt+Mi,Xi=ni[3]*sn+Nr,Mi=ni[4]*wt+Mi,Nr=ni[5]*sn+Nr,Ur(wi,qr,Di,Xi,Mi,Nr));return ut&&Ka(),Fa(Ve),this},T.path=function(S){for(var U=0;U<S.length;U++){var Se=S[U],Be=Se.c;switch(Se.op){case"m":Vo(Be[0],Be[1]);break;case"l":Xs(Be[0],Be[1]);break;case"c":Ur.apply(this,Be);break;case"h":Ka()}}return this},T.__private__.rect=T.rect=function(S,U,Se,Be,Ve){if(isNaN(S)||isNaN(U)||isNaN(Se)||isNaN(Be)||!Na(Ve))throw new Error("Invalid arguments passed to jsPDF.rect");return G===we&&(Be=-Be),ne([ie($(S)),ie(H(U)),ie($(Se)),ie($(Be)),"re"].join(" ")),Fa(Ve),this},T.__private__.triangle=T.triangle=function(S,U,Se,Be,Ve,ut,wt){if(isNaN(S)||isNaN(U)||isNaN(Se)||isNaN(Be)||isNaN(Ve)||isNaN(ut)||!Na(wt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Se-S,Be-U],[Ve-Se,ut-Be],[S-Ve,U-ut]],S,U,[1,1],wt,!0),this},T.__private__.roundedRect=T.roundedRect=function(S,U,Se,Be,Ve,ut,wt){if(isNaN(S)||isNaN(U)||isNaN(Se)||isNaN(Be)||isNaN(Ve)||isNaN(ut)||!Na(wt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var sn=4/3*(Math.SQRT2-1);return Ve=Math.min(Ve,.5*Se),ut=Math.min(ut,.5*Be),this.lines([[Se-2*Ve,0],[Ve*sn,0,Ve,ut-ut*sn,Ve,ut],[0,Be-2*ut],[0,ut*sn,-Ve*sn,ut,-Ve,ut],[2*Ve-Se,0],[-Ve*sn,0,-Ve,-ut*sn,-Ve,-ut],[0,2*ut-Be],[0,-ut*sn,Ve*sn,-ut,Ve,-ut]],S+Ve,U,[1,1],wt,!0),this},T.__private__.ellipse=T.ellipse=function(S,U,Se,Be,Ve){if(isNaN(S)||isNaN(U)||isNaN(Se)||isNaN(Be)||!Na(Ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ut=4/3*(Math.SQRT2-1)*Se,wt=4/3*(Math.SQRT2-1)*Be;return Vo(S+Se,U),Ur(S+Se,U-wt,S+ut,U-Be,S,U-Be),Ur(S-ut,U-Be,S-Se,U-wt,S-Se,U),Ur(S-Se,U+wt,S-ut,U+Be,S,U+Be),Ur(S+ut,U+Be,S+Se,U+wt,S+Se,U),Fa(Ve),this},T.__private__.circle=T.circle=function(S,U,Se,Be){if(isNaN(S)||isNaN(U)||isNaN(Se)||!Na(Be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,U,Se,Se,Be)},T.setFont=function(S,U,Se){return Se&&(U=oe(U,Se)),et=Cc(S,U,{disableWarning:!1}),this};var Ho=T.__private__.getFont=T.getFont=function(){return qt[Cc.apply(T,arguments)]};T.__private__.getFontList=T.getFontList=function(){var S,U,Se={};for(S in Xt)if(Xt.hasOwnProperty(S))for(U in Se[S]=[],Xt[S])Xt[S].hasOwnProperty(U)&&Se[S].push(U);return Se},T.addFont=function(S,U,Se,Be,Ve){var ut=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ut.indexOf(arguments[3])!==-1?Ve=arguments[3]:arguments[3]&&ut.indexOf(arguments[3])==-1&&(Se=oe(Se,Be)),Ns.call(this,S,U,Se,Ve=Ve||"Identity-H")};var or,nr=i.lineWidth||.200025,rs=T.__private__.getLineWidth=T.getLineWidth=function(){return nr},Vn=T.__private__.setLineWidth=T.setLineWidth=function(S){return nr=S,ne(ie($(S))+" w"),this};T.__private__.setLineDash=Rn.API.setLineDash=Rn.API.setLineDashPattern=function(S,U){if(S=S||[],U=U||0,isNaN(U)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(Se){return ie($(Se))}).join(" "),U=ie($(U)),ne("["+S+"] "+U+" d"),this};var oi=T.__private__.getLineHeight=T.getLineHeight=function(){return xt*or};T.__private__.getLineHeight=T.getLineHeight=function(){return xt*or};var An=T.__private__.setLineHeightFactor=T.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(or=S),this},lc=T.__private__.getLineHeightFactor=T.getLineHeightFactor=function(){return or};An(i.lineHeight);var Za=T.__private__.getHorizontalCoordinate=function(S){return $(S)},gn=T.__private__.getVerticalCoordinate=function(S){return G===X?S:xn[W].mediaBox.topRightY-xn[W].mediaBox.bottomLeftY-$(S)},Cn=T.__private__.getHorizontalCoordinateString=T.getHorizontalCoordinateString=function(S){return ie(Za(S))},li=T.__private__.getVerticalCoordinateString=T.getVerticalCoordinateString=function(S){return ie(gn(S))},hn=i.strokeColor||"0 G";T.__private__.getStrokeColor=T.getDrawColor=function(){return ai(hn)},T.__private__.setStrokeColor=T.setDrawColor=function(S,U,Se,Be){return hn=Li({ch1:S,ch2:U,ch3:Se,ch4:Be,pdfColorType:"draw",precision:2}),ne(hn),this};var ci=i.fillColor||"0 g";T.__private__.getFillColor=T.getFillColor=function(){return ai(ci)},T.__private__.setFillColor=T.setFillColor=function(S,U,Se,Be){return ci=Li({ch1:S,ch2:U,ch3:Se,ch4:Be,pdfColorType:"fill",precision:2}),ne(ci),this};var yn=i.textColor||"0 g",hu=T.__private__.getTextColor=T.getTextColor=function(){return ai(yn)};T.__private__.setTextColor=T.setTextColor=function(S,U,Se,Be){return yn=Li({ch1:S,ch2:U,ch3:Se,ch4:Be,pdfColorType:"text",precision:3}),this};var Jt=i.charSpace,_i=T.__private__.getCharSpace=T.getCharSpace=function(){return parseFloat(Jt||0)};T.__private__.setCharSpace=T.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jt=S,this};var on=0;T.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},T.__private__.setLineCap=T.setLineCap=function(S){var U=T.CapJoinStyles[S];if(U===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return on=U,ne(U+" J"),this};var Xn=0;T.__private__.setLineJoin=T.setLineJoin=function(S){var U=T.CapJoinStyles[S];if(U===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xn=U,ne(U+" j"),this},T.__private__.setLineMiterLimit=T.__private__.setMiterLimit=T.setLineMiterLimit=T.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(ie($(S))+" M"),this},T.GState=th,T.setGState=function(S){(S=typeof S=="string"?Kt[dn[S]]:Aa(null,S)).equals(ti)||(ne("/"+S.id+" gs"),ti=S)};var Aa=function(S,U){if(!S||!dn[S]){var Se=!1;for(var Be in Kt)if(Kt.hasOwnProperty(Be)&&Kt[Be].equals(U)){Se=!0;break}if(Se)U=Kt[Be];else{var Ve="GS"+(Object.keys(Kt).length+1).toString(10);Kt[Ve]=U,U.id=Ve}return S&&(dn[S]=U.id),Ot.publish("addGState",U),U}};T.addGState=function(S,U){return Aa(S,U),this},T.saveGraphicsState=function(){return ne("q"),it.push({key:et,size:xt,color:yn}),this},T.restoreGraphicsState=function(){ne("Q");var S=it.pop();return et=S.key,xt=S.size,yn=S.color,ti=null,this},T.setCurrentTransformationMatrix=function(S){return ne(S.toString()+" cm"),this},T.comment=function(S){return ne("#"+S),this};var Po=function(S,U){var Se=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Se},set:function(ut){isNaN(ut)||(Se=parseFloat(ut))}});var Be=U||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Be},set:function(ut){isNaN(ut)||(Be=parseFloat(ut))}});var Ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ve},set:function(ut){Ve=ut.toString()}}),this},Kr=function(S,U,Se,Be){Po.call(this,S,U),this.type="rect";var Ve=Se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ve},set:function(wt){isNaN(wt)||(Ve=parseFloat(wt))}});var ut=Be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ut},set:function(wt){isNaN(wt)||(ut=parseFloat(wt))}}),this},Ds=function(){this.page=Nn,this.currentPage=W,this.pages=nt.slice(0),this.pagesContext=xn.slice(0),this.x=St,this.y=_t,this.matrix=Ut,this.width=Rs(W),this.height=gl(W),this.outputDestination=kt,this.id="",this.objectNumber=-1};Ds.prototype.restore=function(){Nn=this.page,W=this.currentPage,xn=this.pagesContext,nt=this.pages,St=this.x,_t=this.y,Ut=this.matrix,Vl(W,this.width),Ks(W,this.height),kt=this.outputDestination};var ho=function(S,U,Se,Be,Ve){Gi.push(new Ds),Nn=W=0,nt=[],St=S,_t=U,Ut=Ve,Xa([Se,Be])};for(var _o in T.beginFormObject=function(S,U,Se,Be,Ve){return ho(S,U,Se,Be,Ve),this},T.endFormObject=function(S){return(function(U){if(er[U])Gi.pop().restore();else{var Se=new Ds,Be="Xo"+(Object.keys(In).length+1).toString(10);Se.id=Be,er[U]=Be,In[Be]=Se,Ot.publish("addFormObject",Se),Gi.pop().restore()}})(S),this},T.doFormObject=function(S,U){var Se=In[er[S]];return ne("q"),ne(U.toString()+" cm"),ne("/"+Se.id+" Do"),ne("Q"),this},T.getFormObject=function(S){var U=In[er[S]];return{x:U.x,y:U.y,width:U.width,height:U.height,matrix:U.matrix}},T.save=function(S,U){return S=S||"generated.pdf",(U=U||{}).returnPromise=U.returnPromise||!1,U.returnPromise===!1?(yd(po(qo()),S),typeof yd.unload=="function"&&ri.setTimeout&&setTimeout(yd.unload,911),this):new Promise(function(Se,Be){try{var Ve=yd(po(qo()),S);typeof yd.unload=="function"&&ri.setTimeout&&setTimeout(yd.unload,911),Se(Ve)}catch(ut){Be(ut.message)}})},Rn.API)Rn.API.hasOwnProperty(_o)&&(_o==="events"&&Rn.API.events.length?(function(S,U){var Se,Be,Ve;for(Ve=U.length-1;Ve!==-1;Ve--)Se=U[Ve][0],Be=U[Ve][1],S.subscribe.apply(S,[Se].concat(typeof Be=="function"?[Be]:Be))})(Ot,Rn.API.events):T[_o]=Rn.API[_o]);function Rs(S){return xn[S].mediaBox.topRightX-xn[S].mediaBox.bottomLeftX}function Vl(S,U){xn[S].mediaBox.topRightX=U+xn[S].mediaBox.bottomLeftX}function gl(S){return xn[S].mediaBox.topRightY-xn[S].mediaBox.bottomLeftY}function Ks(S,U){xn[S].mediaBox.topRightY=U+xn[S].mediaBox.bottomLeftY}var as=T.getPageWidth=function(S){return Rs(S=S||W)/Pt},gu=T.setPageWidth=function(S,U){Vl(S,U*Pt)},bn=T.getPageHeight=function(S){return gl(S=S||W)/Pt},os=T.setPageHeight=function(S,U){Ks(S,U*Pt)};return T.internal={pdfEscape:xi,getStyle:hl,getFont:Ho,getFontSize:Gt,getCharSpace:_i,getTextColor:hu,getLineHeight:oi,getLineHeightFactor:lc,getLineWidth:rs,write:jt,getHorizontalCoordinate:Za,getVerticalCoordinate:gn,getCoordinateString:Cn,getVerticalCoordinateString:li,collections:{},newObject:Vt,newAdditionalObject:En,newObjectDeferred:$t,newObjectDeferredBegin:On,getFilters:tr,putStream:co,events:Ot,scaleFactor:Pt,pageSize:{getWidth:function(){return as(W)},setWidth:function(S){gu(W,S)},getHeight:function(){return bn(W)},setHeight:function(S){os(W,S)}},encryptionOptions:C,encryption:Wi,getEncryptor:function(S){return C!==null?Wi.encryptor(S,0):function(U){return U}},output:Oa,getNumberOfPages:Ao,get pages(){return nt},out:ne,f2:F,f3:L,getPageInfo:yi,getPageInfoByObjId:_r,getCurrentPageInfo:sc,getPDFVersion:R,Point:Po,Rectangle:Kr,Matrix:Ft,hasHotfix:vi},Object.defineProperty(T.internal.pageSize,"width",{get:function(){return as(W)},set:function(S){gu(W,S)},enumerable:!0,configurable:!0}),Object.defineProperty(T.internal.pageSize,"height",{get:function(){return bn(W)},set:function(S){os(W,S)},enumerable:!0,configurable:!0}),(function(S){for(var U=0,Se=Wt.length;U<Se;U++){var Be=Ns.call(this,S[U][0],S[U][1],S[U][2],Wt[U][3],!0);D===!1&&(O[Be]=!0);var Ve=S[U][0].split("-");Fn({id:Be,fontName:Ve[0],fontStyle:Ve[1]||""})}Ot.publish("addFonts",{fonts:qt,dictionary:Xt})}).call(T,Wt),et="F1",fo(l,a),Ot.publish("initialized"),T}Zd.prototype.lsbFirstWord=function(i){return String.fromCharCode(255&i,i>>8&255,i>>16&255,i>>24&255)},Zd.prototype.toHexString=function(i){return i.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Zd.prototype.hexToBytes=function(i){for(var r=[],a=0;a<i.length;a+=2)r.push(String.fromCharCode(parseInt(i.substr(a,2),16)));return r.join("")},Zd.prototype.processOwnerPassword=function(i,r){return D0(_0(r).substr(0,5),i)},Zd.prototype.encryptor=function(i,r){var a=_0(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&r,r>>8&255)).substr(0,10);return function(s){return D0(a,s)}},th.prototype.equals=function(i){var r,a="id,objectNumber,equals";if(!i||Pr(i)!==Pr(this))return!1;var s=0;for(r in this)if(!(a.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!i.hasOwnProperty(r)||this[r]!==i[r])return!1;s++}for(r in i)i.hasOwnProperty(r)&&a.indexOf(r)<0&&s--;return s===0},Rn.API={events:[]},Rn.version="3.0.4";var Ba=Rn.API,q0=1,jd=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gd=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},hi=function(i){return i.toFixed(2)},Wu=function(i){return i.toFixed(5)};Ba.__acroform__={};var fl=function(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i},lx=function(i){return i*q0},qc=function(i){var r=new vy,a=Sn.internal.getHeight(i)||0,s=Sn.internal.getWidth(i)||0;return r.BBox=[0,0,Number(hi(s)),Number(hi(a))],r},P5=Ba.__acroform__.setBit=function(i,r){if(i=i||0,r=r||0,isNaN(i)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|1<<r},_5=Ba.__acroform__.clearBit=function(i,r){if(i=i||0,r=r||0,isNaN(i)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&~(1<<r)},D5=Ba.__acroform__.getBit=function(i,r){if(isNaN(i)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<r?1:0},$a=Ba.__acroform__.getBitForPdf=function(i,r){if(isNaN(i)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return D5(i,r-1)},Ya=Ba.__acroform__.setBitForPdf=function(i,r){if(isNaN(i)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return P5(i,r-1)},Ga=Ba.__acroform__.clearBitForPdf=function(i,r){if(isNaN(i)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _5(i,r-1)},R5=Ba.__acroform__.calculateCoordinates=function(i,r){var a=r.internal.getHorizontalCoordinate,s=r.internal.getVerticalCoordinate,l=i[0],d=i[1],v=i[2],p=i[3],b={};return b.lowerLeft_X=a(l)||0,b.lowerLeft_Y=s(d+p)||0,b.upperRight_X=a(l+v)||0,b.upperRight_Y=s(d)||0,[Number(hi(b.lowerLeft_X)),Number(hi(b.lowerLeft_Y)),Number(hi(b.upperRight_X)),Number(hi(b.upperRight_Y))]},L5=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var r=[],a=i._V||i.DV,s=R0(i,a),l=i.scope.internal.getFont(i.fontName,i.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(i.scope.__private__.encodeColorString(i.color)),r.push("/"+l+" "+hi(s.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC");var d=qc(i);return d.scope=i.scope,d.stream=r.join(`
`),d}},R0=function(i,r){var a=i.fontSize===0?i.maxFontSize:i.fontSize,s={text:"",fontSize:""},l=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");l=i.multiline?l.map(function(F){return F.split(`
`)}):l.map(function(F){return[F]});var d=a,v=Sn.internal.getHeight(i)||0;v=v<0?-v:v;var p=Sn.internal.getWidth(i)||0;p=p<0?-p:p;var b=function(F,L,$){if(F+1<l.length){var H=L+" "+l[F+1][0];return qp(H,i,$).width<=p-4}return!1};d++;e:for(;d>0;){r="",d--;var y,C,D=qp("3",i,d).height,O=i.multiline?v-d:(v-D)/2,T=O+=2,K=0,R=0,z=0;if(d<=0){r=`(...) Tj
`,r+="% Width of Text: "+qp(r,i,d=12).width+", FieldWidth:"+p+`
`;break}for(var w="",we=0,X=0;X<l.length;X++)if(l.hasOwnProperty(X)){var G=!1;if(l[X].length!==1&&z!==l[X].length-1){if((D+2)*(we+2)+2>v)continue e;w+=l[X][z],G=!0,R=X,X--}else{w=(w+=l[X][z]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var J=parseInt(X),ue=b(J,w,d),oe=X>=l.length-1;if(ue&&!oe){w+=" ",z=0;continue}if(ue||oe){if(oe)R=J;else if(i.multiline&&(D+2)*(we+2)+2>v)continue e}else{if(!i.multiline||(D+2)*(we+2)+2>v)continue e;R=J}}for(var ie="",E=K;E<=R;E++){var Y=l[E];if(i.multiline){if(E===R){ie+=Y[z]+" ",z=(z+1)%Y.length;continue}if(E===K){ie+=Y[Y.length-1]+" ";continue}}ie+=Y[0]+" "}switch(ie=ie.substr(ie.length-1)==" "?ie.substr(0,ie.length-1):ie,C=qp(ie,i,d).width,i.textAlign){case"right":y=p-C-2;break;case"center":y=(p-C)/2;break;default:y=2}r+=hi(y)+" "+hi(T)+` Td
`,r+="("+jd(ie)+`) Tj
`,r+=-hi(y)+` 0 Td
`,T=-(d+2),C=0,K=G?R:R+1,we++,w=""}break}return s.text=r,s.fontSize=d,s},qp=function(i,r,a){var s=r.scope.internal.getFont(r.fontName,r.fontStyle),l=r.scope.getStringUnitWidth(i,{font:s,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:r.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:l}},M5={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},I5=function(i,r){var a={type:"reference",object:i};r.internal.getPageInfo(i.page).pageContext.annotations.find(function(s){return s.type===a.type&&s.object===a.object})===void 0&&r.internal.getPageInfo(i.page).pageContext.annotations.push(a)},B5=function(i,r){if(r.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(jc.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(M5)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");q0=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new wy,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in s)if(s.hasOwnProperty(l)){var d=s[l];d.objId=void 0,d.hasAnnotation&&I5(d,a)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(a){(function(s,l){var d=!s;for(var v in s||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(v)){var p=s[v],b=[],y=p.Rect;if(p.Rect&&(p.Rect=R5(p.Rect,l)),l.internal.newObjectDeferredBegin(p.objId,!0),p.DA=Sn.createDefaultAppearanceStream(p),Pr(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(b=p.getKeyValueListForStream()),p.Rect=y,p.hasAppearanceStream&&!p.appearanceStreamContent){var C=L5(p);b.push({key:"AP",value:"<</N "+C+">>"}),l.internal.acroformPlugin.xForms.push(C)}if(p.appearanceStreamContent){var D="";for(var O in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(O)){var T=p.appearanceStreamContent[O];if(D+="/"+O+" ",D+="<<",Object.keys(T).length>=1||Array.isArray(T)){for(var v in T)if(T.hasOwnProperty(v)){var K=T[v];typeof K=="function"&&(K=K.call(l,p)),D+="/"+v+" "+K+" ",l.internal.acroformPlugin.xForms.indexOf(K)>=0||l.internal.acroformPlugin.xForms.push(K)}}else typeof(K=T)=="function"&&(K=K.call(l,p)),D+="/"+v+" "+K,l.internal.acroformPlugin.xForms.indexOf(K)>=0||l.internal.acroformPlugin.xForms.push(K);D+=">>"}b.push({key:"AP",value:`<<
`+D+">>"})}l.internal.putStream({additionalKeyValues:b,objectId:p.objId}),l.internal.out("endobj")}d&&(function(R,z){for(var w in R)if(R.hasOwnProperty(w)){var we=w,X=R[w];z.internal.newObjectDeferredBegin(X.objId,!0),Pr(X)==="object"&&typeof X.putStream=="function"&&X.putStream(),delete R[we]}})(l.internal.acroformPlugin.xForms,l)})(a,i)}),i.internal.acroformPlugin.isInitialized=!0}},by=Ba.__acroform__.arrayToPdfArray=function(i,r,a){var s=function(v){return v};if(Array.isArray(i)){for(var l="[",d=0;d<i.length;d++)switch(d!==0&&(l+=" "),Pr(i[d])){case"boolean":case"number":case"object":l+=i[d].toString();break;case"string":i[d].substr(0,1)!=="/"?(r!==void 0&&a&&(s=a.internal.getEncryptor(r)),l+="("+jd(s(i[d].toString()))+")"):l+=i[d].toString()}return l+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},h0=function(i,r,a){var s=function(l){return l};return r!==void 0&&a&&(s=a.internal.getEncryptor(r)),(i=i||"").toString(),"("+jd(s(i))+")"},Vc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Vc.prototype.toString=function(){return this.objId+" 0 R"},Vc.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},Vc.prototype.getKeyValueListForStream=function(){var i=[],r=Object.getOwnPropertyNames(this).filter(function(d){return d!="content"&&d!="appearanceStreamContent"&&d!="scope"&&d!="objId"&&d.substring(0,1)!="_"});for(var a in r)if(Object.getOwnPropertyDescriptor(this,r[a]).configurable===!1){var s=r[a],l=this[s];l&&(Array.isArray(l)?i.push({key:s,value:by(l,this.objId,this.scope)}):l instanceof Vc?(l.scope=this.scope,i.push({key:s,value:l.objId+" 0 R"})):typeof l!="function"&&i.push({key:s,value:l}))}return i};var vy=function(){Vc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){i=a.trim()},get:function(){return i||null}})};fl(vy,Vc);var wy=function(){Vc.call(this);var i,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var a=function(s){return s};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+jd(a(i))+")"}},set:function(a){i=a}})};fl(wy,Vc);var jc=function i(){Vc.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');r=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$a(r,3)},set:function(w){w?this.F=Ya(r,3):this.F=Ga(r,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');a=w}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(w){s=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(w){s[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(w){s[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(w){s[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(w){s[3]=w}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var d=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!d||d.length<1){if(this instanceof nh)return;d="FieldObject"+i.FieldNum++}var w=function(we){return we};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+jd(w(d))+")"},set:function(w){d=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return d},set:function(w){d=w}});var v="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return v},set:function(w){v=w}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(w){p=w}});var b=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return b},set:function(w){b=w}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/q0:y},set:function(w){y=w}});var C="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return C},set:function(w){C=w}});var D="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!D||this instanceof nh||this instanceof bd))return h0(D,this.objId,this.scope)},set:function(w){w=w.toString(),D=w}});var O=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(O)return this instanceof Uo==0?h0(O,this.objId,this.scope):O},set:function(w){w=w.toString(),O=this instanceof Uo==0?w.substr(0,1)==="("?Gd(w.substr(1,w.length-2)):Gd(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Uo==1?Gd(O.substr(1,O.length-1)):O},set:function(w){w=w.toString(),O=this instanceof Uo==1?"/"+w:w}});var T=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(T)return T},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof Uo==0?h0(T,this.objId,this.scope):T},set:function(w){w=w.toString(),T=this instanceof Uo==0?w.substr(0,1)==="("?Gd(w.substr(1,w.length-2)):Gd(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Uo==1?Gd(T.substr(1,T.length-1)):T},set:function(w){w=w.toString(),T=this instanceof Uo==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var K,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(w){w=!!w,R=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(K)return K},set:function(w){K=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,1)},set:function(w){w?this.Ff=Ya(this.Ff,1):this.Ff=Ga(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,2)},set:function(w){w?this.Ff=Ya(this.Ff,2):this.Ff=Ga(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,3)},set:function(w){w?this.Ff=Ya(this.Ff,3):this.Ff=Ga(this.Ff,3)}});var z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(z!==null)return z},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');z=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(z){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:z=2;break;case"center":case 1:z=1;break;default:z=0}}})};fl(jc,Vc);var ef=function(){jc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(a){i=a}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return by(r,this.objId,this.scope)},set:function(a){var s,l;l=[],typeof(s=a)=="string"&&(l=(function(d,v,p){p||(p=1);for(var b,y=[];b=v.exec(d);)y.push(b[p]);return y})(s,/\((.*?)\)/g)),r=l}}),this.getOptions=function(){return r},this.setOptions=function(a){r=a,this.sort&&r.sort()},this.addOption=function(a){a=(a=a||"").toString(),r.push(a),this.sort&&r.sort()},this.removeOption=function(a,s){for(s=s||!1,a=(a=a||"").toString();r.indexOf(a)!==-1&&(r.splice(r.indexOf(a),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,18)},set:function(a){a?this.Ff=Ya(this.Ff,18):this.Ff=Ga(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Ya(this.Ff,19):this.Ff=Ga(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,20)},set:function(a){a?(this.Ff=Ya(this.Ff,20),r.sort()):this.Ff=Ga(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,22)},set:function(a){a?this.Ff=Ya(this.Ff,22):this.Ff=Ga(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,23)},set:function(a){a?this.Ff=Ya(this.Ff,23):this.Ff=Ga(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,27)},set:function(a){a?this.Ff=Ya(this.Ff,27):this.Ff=Ga(this.Ff,27)}}),this.hasAppearanceStream=!1};fl(ef,jc);var tf=function(){ef.call(this),this.fontName="helvetica",this.combo=!1};fl(tf,ef);var nf=function(){tf.call(this),this.combo=!0};fl(nf,tf);var Gp=function(){nf.call(this),this.edit=!0};fl(Gp,nf);var Uo=function(){jc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,15)},set:function(a){a?this.Ff=Ya(this.Ff,15):this.Ff=Ga(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,16)},set:function(a){a?this.Ff=Ya(this.Ff,16):this.Ff=Ga(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,17)},set:function(a){a?this.Ff=Ya(this.Ff,17):this.Ff=Ga(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,26)},set:function(a){a?this.Ff=Ya(this.Ff,26):this.Ff=Ga(this.Ff,26)}});var i,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var s,l=[];for(s in l.push("<<"),r)l.push("/"+s+" ("+jd(a(r[s]))+")");return l.push(">>"),l.join(`
`)}},set:function(a){Pr(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(a){i="/"+a}})};fl(Uo,jc);var Xp=function(){Uo.call(this),this.pushButton=!0};fl(Xp,Uo);var rf=function(){Uo.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(r){i=r!==void 0?r:[]}})};fl(rf,Uo);var nh=function(){var i,r;jc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(l){i=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(l){r=l}});var a,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(p){return p};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var d,v=[];for(d in v.push("<<"),s)v.push("/"+d+" ("+jd(l(s[d]))+")");return v.push(">>"),v.join(`
`)},set:function(l){Pr(l)==="object"&&(s=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(l){typeof l=="string"&&(s.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(l){a="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Sn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fl(nh,jc),rf.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var a=this.Kids[r];a.appearanceStreamContent=i.createAppearanceStream(a.optionName),a.caption=i.getCA()}},rf.prototype.createOption=function(i){var r=new nh;return r.Parent=this,r.optionName=i,this.Kids.push(r),O5.call(this.scope,r),r};var Kp=function(){Uo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Sn.CheckBox.createAppearanceStream()};fl(Kp,Uo);var bd=function(){jc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,13)},set:function(r){r?this.Ff=Ya(this.Ff,13):this.Ff=Ga(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,21)},set:function(r){r?this.Ff=Ya(this.Ff,21):this.Ff=Ga(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,23)},set:function(r){r?this.Ff=Ya(this.Ff,23):this.Ff=Ga(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,24)},set:function(r){r?this.Ff=Ya(this.Ff,24):this.Ff=Ga(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,25)},set:function(r){r?this.Ff=Ya(this.Ff,25):this.Ff=Ga(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,26)},set:function(r){r?this.Ff=Ya(this.Ff,26):this.Ff=Ga(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(r){i=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(r){Number.isInteger(r)&&(i=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fl(bd,jc);var Zp=function(){bd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$a(this.Ff,14)},set:function(i){i?this.Ff=Ya(this.Ff,14):this.Ff=Ga(this.Ff,14)}}),this.password=!0};fl(Zp,bd);var Sn={CheckBox:{createAppearanceStream:function(){return{N:{On:Sn.CheckBox.YesNormal},D:{On:Sn.CheckBox.YesPushDown,Off:Sn.CheckBox.OffPushDown}}},YesPushDown:function(i){var r=qc(i);r.scope=i.scope;var a=[],s=i.scope.internal.getFont(i.fontName,i.fontStyle).id,l=i.scope.__private__.encodeColorString(i.color),d=R0(i,i.caption);return a.push("0.749023 g"),a.push("0 0 "+hi(Sn.internal.getWidth(i))+" "+hi(Sn.internal.getHeight(i))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+s+" "+hi(d.fontSize)+" Tf "+l),a.push("BT"),a.push(d.text),a.push("ET"),a.push("Q"),a.push("EMC"),r.stream=a.join(`
`),r},YesNormal:function(i){var r=qc(i);r.scope=i.scope;var a=i.scope.internal.getFont(i.fontName,i.fontStyle).id,s=i.scope.__private__.encodeColorString(i.color),l=[],d=Sn.internal.getHeight(i),v=Sn.internal.getWidth(i),p=R0(i,i.caption);return l.push("1 g"),l.push("0 0 "+hi(v)+" "+hi(d)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+hi(v-1)+" "+hi(d-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+a+" "+hi(p.fontSize)+" Tf "+s),l.push(p.text),l.push("ET"),l.push("Q"),r.stream=l.join(`
`),r},OffPushDown:function(i){var r=qc(i);r.scope=i.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+hi(Sn.internal.getWidth(i))+" "+hi(Sn.internal.getHeight(i))+" re"),a.push("f"),r.stream=a.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(i){var r={D:{Off:Sn.RadioButton.Circle.OffPushDown},N:{}};return r.N[i]=Sn.RadioButton.Circle.YesNormal,r.D[i]=Sn.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(i){var r=qc(i);r.scope=i.scope;var a=[],s=Sn.internal.getWidth(i)<=Sn.internal.getHeight(i)?Sn.internal.getWidth(i)/4:Sn.internal.getHeight(i)/4;s=Number((.9*s).toFixed(5));var l=Sn.internal.Bezier_C,d=Number((s*l).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+Wu(Sn.internal.getWidth(i)/2)+" "+Wu(Sn.internal.getHeight(i)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+d+" "+d+" "+s+" 0 "+s+" c"),a.push("-"+d+" "+s+" -"+s+" "+d+" -"+s+" 0 c"),a.push("-"+s+" -"+d+" -"+d+" -"+s+" 0 -"+s+" c"),a.push(d+" -"+s+" "+s+" -"+d+" "+s+" 0 c"),a.push("f"),a.push("Q"),r.stream=a.join(`
`),r},YesPushDown:function(i){var r=qc(i);r.scope=i.scope;var a=[],s=Sn.internal.getWidth(i)<=Sn.internal.getHeight(i)?Sn.internal.getWidth(i)/4:Sn.internal.getHeight(i)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),d=Number((l*Sn.internal.Bezier_C).toFixed(5)),v=Number((s*Sn.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Wu(Sn.internal.getWidth(i)/2)+" "+Wu(Sn.internal.getHeight(i)/2)+" cm"),a.push(l+" 0 m"),a.push(l+" "+d+" "+d+" "+l+" 0 "+l+" c"),a.push("-"+d+" "+l+" -"+l+" "+d+" -"+l+" 0 c"),a.push("-"+l+" -"+d+" -"+d+" -"+l+" 0 -"+l+" c"),a.push(d+" -"+l+" "+l+" -"+d+" "+l+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+Wu(Sn.internal.getWidth(i)/2)+" "+Wu(Sn.internal.getHeight(i)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+v+" "+v+" "+s+" 0 "+s+" c"),a.push("-"+v+" "+s+" -"+s+" "+v+" -"+s+" 0 c"),a.push("-"+s+" -"+v+" -"+v+" -"+s+" 0 -"+s+" c"),a.push(v+" -"+s+" "+s+" -"+v+" "+s+" 0 c"),a.push("f"),a.push("Q"),r.stream=a.join(`
`),r},OffPushDown:function(i){var r=qc(i);r.scope=i.scope;var a=[],s=Sn.internal.getWidth(i)<=Sn.internal.getHeight(i)?Sn.internal.getWidth(i)/4:Sn.internal.getHeight(i)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),d=Number((l*Sn.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Wu(Sn.internal.getWidth(i)/2)+" "+Wu(Sn.internal.getHeight(i)/2)+" cm"),a.push(l+" 0 m"),a.push(l+" "+d+" "+d+" "+l+" 0 "+l+" c"),a.push("-"+d+" "+l+" -"+l+" "+d+" -"+l+" 0 c"),a.push("-"+l+" -"+d+" -"+d+" -"+l+" 0 -"+l+" c"),a.push(d+" -"+l+" "+l+" -"+d+" "+l+" 0 c"),a.push("f"),a.push("Q"),r.stream=a.join(`
`),r}},Cross:{createAppearanceStream:function(i){var r={D:{Off:Sn.RadioButton.Cross.OffPushDown},N:{}};return r.N[i]=Sn.RadioButton.Cross.YesNormal,r.D[i]=Sn.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(i){var r=qc(i);r.scope=i.scope;var a=[],s=Sn.internal.calculateCross(i);return a.push("q"),a.push("1 1 "+hi(Sn.internal.getWidth(i)-2)+" "+hi(Sn.internal.getHeight(i)-2)+" re"),a.push("W"),a.push("n"),a.push(hi(s.x1.x)+" "+hi(s.x1.y)+" m"),a.push(hi(s.x2.x)+" "+hi(s.x2.y)+" l"),a.push(hi(s.x4.x)+" "+hi(s.x4.y)+" m"),a.push(hi(s.x3.x)+" "+hi(s.x3.y)+" l"),a.push("s"),a.push("Q"),r.stream=a.join(`
`),r},YesPushDown:function(i){var r=qc(i);r.scope=i.scope;var a=Sn.internal.calculateCross(i),s=[];return s.push("0.749023 g"),s.push("0 0 "+hi(Sn.internal.getWidth(i))+" "+hi(Sn.internal.getHeight(i))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+hi(Sn.internal.getWidth(i)-2)+" "+hi(Sn.internal.getHeight(i)-2)+" re"),s.push("W"),s.push("n"),s.push(hi(a.x1.x)+" "+hi(a.x1.y)+" m"),s.push(hi(a.x2.x)+" "+hi(a.x2.y)+" l"),s.push(hi(a.x4.x)+" "+hi(a.x4.y)+" m"),s.push(hi(a.x3.x)+" "+hi(a.x3.y)+" l"),s.push("s"),s.push("Q"),r.stream=s.join(`
`),r},OffPushDown:function(i){var r=qc(i);r.scope=i.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+hi(Sn.internal.getWidth(i))+" "+hi(Sn.internal.getHeight(i))+" re"),a.push("f"),r.stream=a.join(`
`),r}}},createDefaultAppearanceStream:function(i){var r=i.scope.internal.getFont(i.fontName,i.fontStyle).id,a=i.scope.__private__.encodeColorString(i.color);return"/"+r+" "+i.fontSize+" Tf "+a}};Sn.internal={Bezier_C:.551915024494,calculateCross:function(i){var r=Sn.internal.getWidth(i),a=Sn.internal.getHeight(i),s=Math.min(r,a);return{x1:{x:(r-s)/2,y:(a-s)/2+s},x2:{x:(r-s)/2+s,y:(a-s)/2},x3:{x:(r-s)/2,y:(a-s)/2},x4:{x:(r-s)/2+s,y:(a-s)/2+s}}}},Sn.internal.getWidth=function(i){var r=0;return Pr(i)==="object"&&(r=lx(i.Rect[2])),r},Sn.internal.getHeight=function(i){var r=0;return Pr(i)==="object"&&(r=lx(i.Rect[3])),r};var O5=Ba.addField=function(i){if(B5(this,i),!(i instanceof jc))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=i).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Ba.AcroFormChoiceField=ef,Ba.AcroFormListBox=tf,Ba.AcroFormComboBox=nf,Ba.AcroFormEditBox=Gp,Ba.AcroFormButton=Uo,Ba.AcroFormPushButton=Xp,Ba.AcroFormRadioButton=rf,Ba.AcroFormCheckBox=Kp,Ba.AcroFormTextField=bd,Ba.AcroFormPasswordField=Zp,Ba.AcroFormAppearance=Sn,Ba.AcroForm={ChoiceField:ef,ListBox:tf,ComboBox:nf,EditBox:Gp,Button:Uo,PushButton:Xp,RadioButton:rf,CheckBox:Kp,TextField:bd,PasswordField:Zp,Appearance:Sn},Rn.AcroForm={ChoiceField:ef,ListBox:tf,ComboBox:nf,EditBox:Gp,Button:Uo,PushButton:Xp,RadioButton:rf,CheckBox:Kp,TextField:bd,PasswordField:Zp,Appearance:Sn};Rn.AcroForm;function Sy(i){return i.reduce(function(r,a,s){return r[a]=s,r},{})}(function(i){var r="addImage_";i.__addimage__={};var a="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},l=i.__addimage__.getImageFileTypeByImageData=function(F,L){var $,H,Pe,ae,ve,pe=a;if((L=L||a)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(ue(F))for(ve in s)for(Pe=s[ve],$=0;$<Pe.length;$+=1){for(ae=!0,H=0;H<Pe[$].length;H+=1)if(Pe[$][H]!==void 0&&Pe[$][H]!==F[H]){ae=!1;break}if(ae===!0){pe=ve;break}}else for(ve in s)for(Pe=s[ve],$=0;$<Pe.length;$+=1){for(ae=!0,H=0;H<Pe[$].length;H+=1)if(Pe[$][H]!==void 0&&Pe[$][H]!==F.charCodeAt(H)){ae=!1;break}if(ae===!0){pe=ve;break}}return pe===a&&L!==a&&(pe=L),pe},d=function F(L){for(var $=this.internal.write,H=this.internal.putStream,Pe=(0,this.internal.getFilters)();Pe.indexOf("FlateEncode")!==-1;)Pe.splice(Pe.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:L.width}),ae.push({key:"Height",value:L.height}),L.colorSpace===w.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===w.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var ve="",pe=0,Ce=L.transparency.length;pe<Ce;pe++)ve+=L.transparency[pe]+" "+L.transparency[pe]+" ";ae.push({key:"Mask",value:"["+ve+"]"})}L.sMask!==void 0&&ae.push({key:"SMask",value:L.objectId+1+" 0 R"});var fe=L.filter!==void 0?["/"+L.filter]:void 0;if(H({data:L.data,additionalKeyValues:ae,alreadyAppliedFilters:fe,objectId:L.objectId}),$("endobj"),"sMask"in L&&L.sMask!==void 0){var k,A=(k=L.sMaskBitsPerComponent)!==null&&k!==void 0?k:L.bitsPerComponent,W={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:A,data:L.sMask};"filter"in L&&(W.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(A," /Columns ").concat(L.width),W.filter=L.filter),F.call(this,W)}if(L.colorSpace===w.INDEXED){var q=this.internal.newObject();H({data:ie(new Uint8Array(L.palette)),objectId:q}),$("endobj")}},v=function(){var F=this.internal.collections[r+"images"];for(var L in F)d.call(this,F[L])},p=function(){var F,L=this.internal.collections[r+"images"],$=this.internal.write;for(var H in L)$("/I"+(F=L[H]).index,F.objectId,"0","R")},b=function(){this.internal.collections[r+"images"]||(this.internal.collections[r+"images"]={},this.internal.events.subscribe("putResources",v),this.internal.events.subscribe("putXobjectDict",p))},y=function(){var F=this.internal.collections[r+"images"];return b.call(this),F},C=function(){return Object.keys(this.internal.collections[r+"images"]).length},D=function(F){return typeof i["process"+F.toUpperCase()]=="function"},O=function(F){return Pr(F)==="object"&&F.nodeType===1},T=function(F,L){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var $=""+F.getAttribute("src");if($.indexOf("data:image/")===0)return Yp(unescape($).split("base64,").pop());var H=i.loadFile($,!0);if(H!==void 0)return H}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var Pe;switch(L){case"PNG":Pe="image/png";break;case"WEBP":Pe="image/webp";break;default:Pe="image/jpeg"}return Yp(F.toDataURL(Pe,1).split("base64,").pop())}},K=function(F){var L=this.internal.collections[r+"images"];if(L){for(var $ in L)if(F===L[$].alias)return L[$]}},R=function(F,L,$){return F||L||(F=-96,L=-96),F<0&&(F=-1*$.width*72/F/this.internal.scaleFactor),L<0&&(L=-1*$.height*72/L/this.internal.scaleFactor),F===0&&(F=L*$.width/$.height),L===0&&(L=F*$.height/$.width),[F,L]},z=function(F,L,$,H,Pe,ae){var ve=R.call(this,$,H,Pe),pe=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,fe=y.call(this);if($=ve[0],H=ve[1],fe[Pe.index]=Pe,ae){ae*=Math.PI/180;var k=Math.cos(ae),A=Math.sin(ae),W=function(te){return te.toFixed(4)},q=[W(k),W(A),W(-1*A),W(k),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,pe(F),Ce(L+H),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([pe($),"0","0",pe(H),"0","0","cm"].join(" "))):this.internal.write([pe($),"0","0",pe(H),pe(F),Ce(L+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Pe.index+" Do"),this.internal.write("Q")},w=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var we=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},X=i.__addimage__.sHashCode=function(F){var L,$,H=0;if(typeof F=="string")for($=F.length,L=0;L<$;L++)H=(H<<5)-H+F.charCodeAt(L),H|=0;else if(ue(F))for($=F.byteLength/2,L=0;L<$;L++)H=(H<<5)-H+F[L],H|=0;return H},G=i.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var L=!0;return F.length===0&&(L=!1),F.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(L=!1),L},J=i.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var L=F.indexOf(",");return L<0?null:F.substring(0,L).trim().endsWith("base64")?F.substring(L+1):null};i.__addimage__.isArrayBuffer=function(F){return F instanceof ArrayBuffer};var ue=i.__addimage__.isArrayBufferView=function(F){return F instanceof Int8Array||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array},oe=i.__addimage__.binaryStringToUint8Array=function(F){for(var L=F.length,$=new Uint8Array(L),H=0;H<L;H++)$[H]=F.charCodeAt(H);return $},ie=i.__addimage__.arrayBufferToBinaryString=function(F){for(var L="",$=ue(F)?F:new Uint8Array(F),H=0;H<$.length;H+=8192)L+=String.fromCharCode.apply(null,$.subarray(H,H+8192));return L};i.addImage=function(){var F,L,$,H,Pe,ae,ve,pe,Ce;if(typeof arguments[1]=="number"?(L=a,$=arguments[1],H=arguments[2],Pe=arguments[3],ae=arguments[4],ve=arguments[5],pe=arguments[6],Ce=arguments[7]):(L=arguments[1],$=arguments[2],H=arguments[3],Pe=arguments[4],ae=arguments[5],ve=arguments[6],pe=arguments[7],Ce=arguments[8]),Pr(F=arguments[0])==="object"&&!O(F)&&"imageData"in F){var fe=F;F=fe.imageData,L=fe.format||L||a,$=fe.x||$||0,H=fe.y||H||0,Pe=fe.w||fe.width||Pe,ae=fe.h||fe.height||ae,ve=fe.alias||ve,pe=fe.compression||pe,Ce=fe.rotation||fe.angle||Ce}var k=this.internal.getFilters();if(pe===void 0&&k.indexOf("FlateEncode")!==-1&&(pe="SLOW"),isNaN($)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");b.call(this);var A=E.call(this,F,L,ve,pe);return z.call(this,$,H,Pe,ae,A,Ce),this};var E=function(F,L,$,H){var Pe,ae,ve;if(typeof F=="string"&&l(F)===a){F=unescape(F);var pe=Y(F,!1);(pe!==""||(pe=i.loadFile(F,!0))!==void 0)&&(F=pe)}if(O(F)&&(F=T(F,L)),L=l(F,L),!D(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((ve=$)==null||ve.length===0)&&($=(function(Ce){return typeof Ce=="string"||ue(Ce)?X(Ce):ue(Ce.data)?X(Ce.data):null})(F)),(Pe=K.call(this,$))||(F instanceof Uint8Array||L==="RGBA"||(ae=F,F=oe(F)),Pe=this["process"+L.toUpperCase()](F,C.call(this),$,(function(Ce){return Ce&&typeof Ce=="string"&&(Ce=Ce.toUpperCase()),Ce in i.image_compression?Ce:we.NONE})(H),ae)),!Pe)throw new Error("An unknown error occurred whilst processing the image.");return Pe},Y=i.__addimage__.convertBase64ToBinaryString=function(F,L){L=typeof L!="boolean"||L;var $,H="";if(typeof F=="string"){var Pe;$=(Pe=J(F))!==null&&Pe!==void 0?Pe:F;try{H=Yp($)}catch(ae){if(L)throw G($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};i.getImageProperties=function(F){var L,$,H="";if(O(F)&&(F=T(F)),typeof F=="string"&&l(F)===a&&((H=Y(F,!1))===""&&(H=i.loadFile(F)||""),F=H),$=l(F),!D($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(F instanceof Uint8Array||(F=oe(F)),!(L=this["process"+$.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=$,L}})(Rn.API),(function(i){var r=function(a){if(a!==void 0&&a!="")return!0};Rn.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(a){for(var s,l,d,v=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,b=this.internal.getPageInfoByObjId(a.objId),y=a.pageContext.annotations,C=!1,D=0;D<y.length&&!C;D++)switch((s=y[D]).type){case"link":(r(s.options.url)||r(s.options.pageNumber))&&(C=!0);break;case"reference":case"text":case"freetext":C=!0}if(C!=0){this.internal.write("/Annots [");for(var O=0;O<y.length;O++){s=y[O];var T=this.internal.pdfEscape,K=this.internal.getEncryptor(a.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),z=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(R.objId),we=s.title||"Note";d="<</Type /Annot /Subtype /Text "+(l="/Rect ["+v(s.bounds.x)+" "+p(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w)+" "+p(s.bounds.y)+"] ")+"/Contents ("+T(w(s.contents))+")",d+=" /Popup "+z.objId+" 0 R",d+=" /P "+b.objId+" 0 R",d+=" /T ("+T(w(we))+") >>",R.content=d;var X=R.objId+" 0 R";d="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+v(s.bounds.x+30)+" "+p(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w+30)+" "+p(s.bounds.y)+"] ")+" /Parent "+X,s.open&&(d+=" /Open true"),d+=" >>",z.content=d,this.internal.write(R.objId,"0 R",z.objId,"0 R");break;case"freetext":l="/Rect ["+v(s.bounds.x)+" "+p(s.bounds.y)+" "+v(s.bounds.x+s.bounds.w)+" "+p(s.bounds.y+s.bounds.h)+"] ";var G=s.color||"#000000";d="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+T(K(s.contents))+")",d+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",d+=" /Border [0 0 0]",d+=" >>",this.internal.write(d);break;case"link":if(s.options.name){var J=this.annotations._nameMap[s.options.name];s.options.pageNumber=J.page,s.options.top=J.y}else s.options.top||(s.options.top=0);if(l="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",d="",s.options.url)d="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+T(K(s.options.url))+") >>";else if(s.options.pageNumber)switch(d="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":d+=" /Fit]";break;case"FitH":d+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,d+=" /FitV "+s.options.left+"]";break;default:var ue=p(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),d+=" /XYZ "+s.options.left+" "+ue+" "+s.options.zoom+"]"}d!=""&&(d+=" >>",this.internal.write(d))}}this.internal.write("]")}}]),i.createAnnotation=function(a){var s=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":s.pageContext.annotations.push(a)}},i.link=function(a,s,l,d,v){var p=this.internal.getCurrentPageInfo(),b=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:b(a),y:y(s),w:b(a+l),h:y(s+d)},options:v,type:"link"})},i.textWithLink=function(a,s,l,d){var v,p,b=this.getTextWidth(a),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(d.maxWidth!==void 0){p=d.maxWidth;var C=this.splitTextToSize(a,p).length;v=Math.ceil(y*C)}else p=b,v=y;return this.text(a,s,l,d),l+=.2*y,d.align==="center"&&(s-=b/2),d.align==="right"&&(s-=b),this.link(s,l-y,p,v,d),b},i.getTextWidth=function(a){var s=this.internal.getFontSize();return this.getStringUnitWidth(a)*s/this.internal.scaleFactor}})(Rn.API),(function(i){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];i.__arabicParser__={};var d=i.__arabicParser__.isInArabicSubstitutionA=function(R){return r[R.charCodeAt(0)]!==void 0},v=i.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},p=i.__arabicParser__.isArabicEndLetter=function(R){return v(R)&&d(R)&&r[R.charCodeAt(0)].length<=2},b=i.__arabicParser__.isArabicAlfLetter=function(R){return v(R)&&l.indexOf(R.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return v(R)&&d(R)&&r[R.charCodeAt(0)].length>=1};var y=i.__arabicParser__.arabicLetterHasFinalForm=function(R){return v(R)&&d(R)&&r[R.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(R){return v(R)&&d(R)&&r[R.charCodeAt(0)].length>=3};var C=i.__arabicParser__.arabicLetterHasMedialForm=function(R){return v(R)&&d(R)&&r[R.charCodeAt(0)].length==4},D=i.__arabicParser__.resolveLigatures=function(R){var z=0,w=a,we="",X=0;for(z=0;z<R.length;z+=1)w[R.charCodeAt(z)]!==void 0?(X++,typeof(w=w[R.charCodeAt(z)])=="number"&&(we+=String.fromCharCode(w),w=a,X=0),z===R.length-1&&(w=a,we+=R.charAt(z-(X-1)),z-=X-1,X=0)):(w=a,we+=R.charAt(z-X),z-=X,X=0);return we};i.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&s[R.charCodeAt(0)]!==void 0};var O=i.__arabicParser__.getCorrectForm=function(R,z,w){return v(R)?d(R)===!1?-1:!y(R)||!v(z)&&!v(w)||!v(w)&&p(z)||p(R)&&!v(z)||p(R)&&b(z)||p(R)&&p(z)?0:C(R)&&v(z)&&!p(z)&&v(w)&&y(w)?3:p(R)||!v(w)?1:2:-1},T=function(R){var z=0,w=0,we=0,X="",G="",J="",ue=(R=R||"").split("\\s+"),oe=[];for(z=0;z<ue.length;z+=1){for(oe.push(""),w=0;w<ue[z].length;w+=1)X=ue[z][w],G=ue[z][w-1],J=ue[z][w+1],v(X)?(we=O(X,G,J),oe[z]+=we!==-1?String.fromCharCode(r[X.charCodeAt(0)][we]):X):oe[z]+=X;oe[z]=D(oe[z])}return oe.join(" ")},K=i.__arabicParser__.processArabic=i.processArabic=function(){var R,z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(z)){var we=0;for(w=[],we=0;we<z.length;we+=1)Array.isArray(z[we])?w.push([T(z[we][0]),z[we][1],z[we][2]]):w.push([T(z[we])]);R=w}else R=T(z);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};i.events.push(["preProcessText",K])})(Rn.API),Rn.API.autoPrint=function(i){var r;return(i=i||{}).variant=i.variant||"non-conform",i.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})),this},(function(i){var r=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(p){a=p}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(p){s=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(p){l=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var d=[];Object.defineProperty(this,"childNodes",{get:function(){return d},set:function(p){d=p}});var v={};Object.defineProperty(this,"style",{get:function(){return v},set:function(p){v=p}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(a,s){var l;if((a=a||"2d")!=="2d")return null;for(l in s)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=s[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])})(Rn.API),(function(i){var r={left:0,top:0,bottom:0,right:0},a=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new d,this.internal.__cell__.pages=1},d=function(){var b=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return b},set:function(R){b=R}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(R){y=R}});var C=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return C},set:function(R){C=R}});var D=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return D},set:function(R){D=R}});var O=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return O},set:function(R){O=R}});var T=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return T},set:function(R){T=R}});var K=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return K},set:function(R){K=R}}),this};d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},d.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(b){return s.call(this),this.internal.__cell__.headerFunction=typeof b=="function"?b:void 0,this},i.getTextDimensions=function(b,y){s.call(this);var C=(y=y||{}).fontSize||this.getFontSize(),D=y.font||this.getFont(),O=y.scaleFactor||this.internal.scaleFactor,T=0,K=0,R=0,z=this;if(!Array.isArray(b)&&typeof b!="string"){if(typeof b!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");b=String(b)}var w=y.maxWidth;w>0?typeof b=="string"?b=this.splitTextToSize(b,w):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(X,G){return X.concat(z.splitTextToSize(G,w))},[])):b=Array.isArray(b)?b:[b];for(var we=0;we<b.length;we++)T<(R=this.getStringUnitWidth(b[we],{font:D})*C)&&(T=R);return T!==0&&(K=b.length),{w:T/=O,h:Math.max((K*C*this.getLineHeightFactor()-C*(this.getLineHeightFactor()-1))/O,0)}},i.cellAddPage=function(){s.call(this),this.addPage();var b=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new d(b.left,b.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var v=i.cell=function(){var b;b=arguments[0]instanceof d?arguments[0]:new d(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var y=this.internal.__cell__.lastCell,C=this.internal.__cell__.padding,D=this.internal.__cell__.margins||r,O=this.internal.__cell__.tableHeaderRow,T=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===b.lineNumber?(b.x=(y.x||0)+(y.width||0),b.y=y.y||0):y.y+y.height+b.height+D.bottom>this.getPageHeight()?(this.cellAddPage(),b.y=D.top,T&&O&&(this.printHeaderRow(b.lineNumber,!0),b.y+=O[0].height)):b.y=y.y+y.height||b.y),b.text[0]!==void 0&&(this.rect(b.x,b.y,b.width,b.height,a===!0?"FD":void 0),b.align==="right"?this.text(b.text,b.x+b.width-C,b.y+C,{align:"right",baseline:"top"}):b.align==="center"?this.text(b.text,b.x+b.width/2,b.y+C,{align:"center",baseline:"top",maxWidth:b.width-C-C}):this.text(b.text,b.x+C,b.y+C,{align:"left",baseline:"top",maxWidth:b.width-C-C})),this.internal.__cell__.lastCell=b,this};i.table=function(b,y,C,D,O){if(s.call(this),!C)throw new Error("No data for PDF table.");var T,K,R,z,w=[],we=[],X=[],G={},J={},ue=[],oe=[],ie=(O=O||{}).autoSize||!1,E=O.printHeaders!==!1,Y=O.css&&O.css["font-size"]!==void 0?16*O.css["font-size"]:O.fontSize||12,F=O.margins||Object.assign({width:this.getPageWidth()},r),L=typeof O.padding=="number"?O.padding:3,$=O.headerBackgroundColor||"#c8c8c8",H=O.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=H,this.setFontSize(Y),D==null)we=w=Object.keys(C[0]),X=w.map(function(){return"left"});else if(Array.isArray(D)&&Pr(D[0])==="object")for(w=D.map(function(fe){return fe.name}),we=D.map(function(fe){return fe.prompt||fe.name||""}),X=D.map(function(fe){return fe.align||"left"}),T=0;T<D.length;T+=1)J[D[T].name]=.7499990551181103*D[T].width;else Array.isArray(D)&&typeof D[0]=="string"&&(we=w=D,X=w.map(function(){return"left"}));if(ie||Array.isArray(D)&&typeof D[0]=="string")for(T=0;T<w.length;T+=1){for(G[z=w[T]]=C.map(function(fe){return fe[z]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(we[T],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),K=G[z],this.setFont(void 0,"normal"),R=0;R<K.length;R+=1)ue.push(this.getTextDimensions(K[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[z]=Math.max.apply(null,ue)+L+L,ue=[]}if(E){var Pe={};for(T=0;T<w.length;T+=1)Pe[w[T]]={},Pe[w[T]].text=we[T],Pe[w[T]].align=X[T];var ae=p.call(this,Pe,J);oe=w.map(function(fe){return new d(b,y,J[fe],ae,Pe[fe].text,void 0,Pe[fe].align)}),this.setTableHeaderRow(oe),this.printHeaderRow(1,!1)}var ve=D.reduce(function(fe,k){return fe[k.name]=k.align,fe},{});for(T=0;T<C.length;T+=1){"rowStart"in O&&O.rowStart instanceof Function&&O.rowStart({row:T,data:C[T]},this);var pe=p.call(this,C[T],J);for(R=0;R<w.length;R+=1){var Ce=C[T][w[R]];"cellStart"in O&&O.cellStart instanceof Function&&O.cellStart({row:T,col:R,data:Ce},this),v.call(this,new d(b,y,J[w[R]],pe,Ce,T+2,ve[w[R]]))}}return this.internal.__cell__.table_x=b,this.internal.__cell__.table_y=y,this};var p=function(b,y){var C=this.internal.__cell__.padding,D=this.internal.__cell__.table_font_size,O=this.internal.scaleFactor;return Object.keys(b).map(function(T){var K=b[T];return this.splitTextToSize(K.hasOwnProperty("text")?K.text:K,y[T]-C-C)},this).map(function(T){return this.getLineHeightFactor()*T.length*D/O+C+C},this).reduce(function(T,K){return Math.max(T,K)},0)};i.setTableHeaderRow=function(b){s.call(this),this.internal.__cell__.tableHeaderRow=b},i.printHeaderRow=function(b,y){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var C;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var D=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new d(D[0],D[1],D[2],D[3],void 0,-1)}this.setFont(void 0,"bold");for(var O=[],T=0;T<this.internal.__cell__.tableHeaderRow.length;T+=1){C=this.internal.__cell__.tableHeaderRow[T].clone(),y&&(C.y=this.internal.__cell__.margins.top||0,O.push(C)),C.lineNumber=b;var K=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),v.call(this,C),this.setTextColor(K)}O.length>0&&this.setTableHeaderRow(O),this.setFont(void 0,"normal"),a=!1}})(Rn.API);var jy={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ty=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],L0=Sy(Ty),Cy=[100,200,300,400,500,600,700,800,900],E5=Sy(Cy);function g0(i){var r=i.family.replace(/"|'/g,"").toLowerCase(),a=(function(d){return jy[d=d||"normal"]?d:"normal"})(i.style),s=(function(d){return d?typeof d=="number"?d>=100&&d<=900&&d%100==0?d:400:/^\d00$/.test(d)?parseInt(d):d==="bold"?700:400:400})(i.weight),l=(function(d){return typeof L0[d=d||"normal"]=="number"?d:"normal"})(i.stretch);return{family:r,style:a,weight:s,stretch:l,src:i.src||[],ref:i.ref||{name:r,style:[l,a,s].join(" ")}}}function cx(i,r,a,s){var l;for(l=a;l>=0&&l<r.length;l+=s)if(i[r[l]])return i[r[l]];for(l=a;l>=0&&l<r.length;l-=s)if(i[r[l]])return i[r[l]]}var F5={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ux={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dx(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function fx(i){return i.trimLeft()}function U5(i,r){for(var a=0;a<i.length;){if(i.charAt(a)===r)return[i.substring(0,a),i.substring(a+1)];a+=1}return null}function q5(i){var r=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],i.substring(r[0].length)]}var Vp,px,hx,Xd,Hp,gx,xx,yx,x0=["times"];function mx(i,r,a,s,l){var d=4,v=vx;switch(l){case Rn.API.image_compression.FAST:d=1,v=bx;break;case Rn.API.image_compression.MEDIUM:d=6,v=wx;break;case Rn.API.image_compression.SLOW:d=9,v=Sx}i=(function(b,y,C,D){for(var O,T=b.length/y,K=new Uint8Array(b.length+T),R=[V5,bx,vx,wx,Sx],z=0;z<T;z+=1){var w=z*y,we=b.subarray(w,w+y);if(D)K.set(D(we,C,O),w+z);else{for(var X=R.length,G=[],J=0;J<X;J+=1)G[J]=R[J](we,C,O);var ue=W5(G.concat());K.set(G[ue],w+z)}O=we}return K})(i,r,Math.ceil(a*s/8),v);var p=N0(i,{level:d});return Rn.API.__addimage__.arrayBufferToBinaryString(p)}function V5(i){var r=Array.apply([],i);return r.unshift(0),r}function bx(i,r){var a=i.length,s=[];s[0]=1;for(var l=0;l<a;l+=1){var d=i[l-r]||0;s[l+1]=i[l]-d+256&255}return s}function vx(i,r,a){var s=i.length,l=[];l[0]=2;for(var d=0;d<s;d+=1){var v=a&&a[d]||0;l[d+1]=i[d]-v+256&255}return l}function wx(i,r,a){var s=i.length,l=[];l[0]=3;for(var d=0;d<s;d+=1){var v=i[d-r]||0,p=a&&a[d]||0;l[d+1]=i[d]+256-(v+p>>>1)&255}return l}function Sx(i,r,a){var s=i.length,l=[];l[0]=4;for(var d=0;d<s;d+=1){var v=H5(i[d-r]||0,a&&a[d]||0,a&&a[d-r]||0);l[d+1]=i[d]-v+256&255}return l}function H5(i,r,a){if(i===r&&r===a)return i;var s=Math.abs(r-a),l=Math.abs(i-a),d=Math.abs(i+r-a-a);return s<=l&&s<=d?i:l<=d?r:a}function W5(i){var r=i.map(function(a){return a.reduce(function(s,l){return s+Math.abs(l)},0)});return r.indexOf(Math.min.apply(null,r))}function y0(i,r,a){var s=r*a,l=Math.floor(s/8),d=16-(s-8*l+a),v=(1<<a)-1;return ky(i,l)>>d&v}function jx(i,r,a,s){var l=a*s,d=Math.floor(l/8),v=16-(l-8*d+s),p=(1<<s)-1,b=(r&p)<<v;(function(y,C,D){if(C+1<y.byteLength)y.setUint16(C,D,!1);else{var O=D>>8&255;y.setUint8(C,O)}})(i,d,ky(i,d)&~(p<<v)&65535|b)}function ky(i,r){return r+1<i.byteLength?i.getUint16(r,!1):i.getUint8(r)<<8}function $5(i){var r=0;if(i[r++]!==71||i[r++]!==73||i[r++]!==70||i[r++]!==56||(i[r++]+1&253)!=56||i[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=i[r++]|i[r++]<<8,s=i[r++]|i[r++]<<8,l=i[r++],d=l>>7,v=1<<1+(7&l);i[r++],i[r++];var p=null,b=null;d&&(p=r,b=v,r+=3*v);var y=!0,C=[],D=0,O=null,T=0,K=null;for(this.width=a,this.height=s;y&&r<i.length;)switch(i[r++]){case 33:switch(i[r++]){case 255:if(i[r]!==11||i[r+1]==78&&i[r+2]==69&&i[r+3]==84&&i[r+4]==83&&i[r+5]==67&&i[r+6]==65&&i[r+7]==80&&i[r+8]==69&&i[r+9]==50&&i[r+10]==46&&i[r+11]==48&&i[r+12]==3&&i[r+13]==1&&i[r+16]==0)r+=14,K=i[r++]|i[r++]<<8,r++;else for(r+=12;;){if(!((F=i[r++])>=0))throw Error("Invalid block size");if(F===0)break;r+=F}break;case 249:if(i[r++]!==4||i[r+4]!==0)throw new Error("Invalid graphics extension block.");var R=i[r++];D=i[r++]|i[r++]<<8,O=i[r++],1&R||(O=null),T=R>>2&7,r++;break;case 254:for(;;){if(!((F=i[r++])>=0))throw Error("Invalid block size");if(F===0)break;r+=F}break;default:throw new Error("Unknown graphic control label: 0x"+i[r-1].toString(16))}break;case 44:var z=i[r++]|i[r++]<<8,w=i[r++]|i[r++]<<8,we=i[r++]|i[r++]<<8,X=i[r++]|i[r++]<<8,G=i[r++],J=G>>6&1,ue=1<<1+(7&G),oe=p,ie=b,E=!1;G>>7&&(E=!0,oe=r,ie=ue,r+=3*ue);var Y=r;for(r++;;){var F;if(!((F=i[r++])>=0))throw Error("Invalid block size");if(F===0)break;r+=F}C.push({x:z,y:w,width:we,height:X,has_local_palette:E,palette_offset:oe,palette_size:ie,data_offset:Y,data_length:r-Y,transparent_index:O,interlaced:!!J,delay:D,disposal:T});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+i[r-1].toString(16))}this.numFrames=function(){return C.length},this.loopCount=function(){return K},this.frameInfo=function(L){if(L<0||L>=C.length)throw new Error("Frame index out of range.");return C[L]},this.decodeAndBlitFrameBGRA=function(L,$){var H=this.frameInfo(L),Pe=H.width*H.height,ae=new Uint8Array(Pe);Tx(i,H.data_offset,ae,Pe);var ve=H.palette_offset,pe=H.transparent_index;pe===null&&(pe=256);var Ce=H.width,fe=a-Ce,k=Ce,A=4*(H.y*a+H.x),W=4*((H.y+H.height)*a+H.x),q=A,te=4*fe;H.interlaced===!0&&(te+=4*a*7);for(var xe=8,ee=0,Ie=ae.length;ee<Ie;++ee){var _e=ae[ee];if(k===0&&(k=Ce,(q+=te)>=W&&(te=4*fe+4*a*(xe-1),q=A+(Ce+fe)*(xe<<1),xe>>=1)),_e===pe)q+=4;else{var Fe=i[ve+3*_e],nt=i[ve+3*_e+1],lt=i[ve+3*_e+2];$[q++]=lt,$[q++]=nt,$[q++]=Fe,$[q++]=255}--k}},this.decodeAndBlitFrameRGBA=function(L,$){var H=this.frameInfo(L),Pe=H.width*H.height,ae=new Uint8Array(Pe);Tx(i,H.data_offset,ae,Pe);var ve=H.palette_offset,pe=H.transparent_index;pe===null&&(pe=256);var Ce=H.width,fe=a-Ce,k=Ce,A=4*(H.y*a+H.x),W=4*((H.y+H.height)*a+H.x),q=A,te=4*fe;H.interlaced===!0&&(te+=4*a*7);for(var xe=8,ee=0,Ie=ae.length;ee<Ie;++ee){var _e=ae[ee];if(k===0&&(k=Ce,(q+=te)>=W&&(te=4*fe+4*a*(xe-1),q=A+(Ce+fe)*(xe<<1),xe>>=1)),_e===pe)q+=4;else{var Fe=i[ve+3*_e],nt=i[ve+3*_e+1],lt=i[ve+3*_e+2];$[q++]=Fe,$[q++]=nt,$[q++]=lt,$[q++]=255}--k}}}function Tx(i,r,a,s){for(var l=i[r++],d=1<<l,v=d+1,p=v+1,b=l+1,y=(1<<b)-1,C=0,D=0,O=0,T=i[r++],K=new Int32Array(4096),R=null;;){for(;C<16&&T!==0;)D|=i[r++]<<C,C+=8,T===1?T=i[r++]:--T;if(C<b)break;var z=D&y;if(D>>=b,C-=b,z!==d){if(z===v)break;for(var w=z<p?z:R,we=0,X=w;X>d;)X=K[X]>>8,++we;var G=X;if(O+we+(w!==z?1:0)>s)return void Xr.log("Warning, gif stream longer than expected.");a[O++]=G;var J=O+=we;for(w!==z&&(a[O++]=G),X=w;we--;)X=K[X],a[--J]=255&X,X>>=8;R!==null&&p<4096&&(K[p++]=R<<8|G,p>=y+1&&b<12&&(++b,y=y<<1|1)),R=z}else p=v+1,y=(1<<(b=l+1))-1,R=null}return O!==s&&Xr.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function m0(i){var r,a,s,l,d,v=Math.floor,p=new Array(64),b=new Array(64),y=new Array(64),C=new Array(64),D=new Array(65535),O=new Array(65535),T=new Array(64),K=new Array(64),R=[],z=0,w=7,we=new Array(64),X=new Array(64),G=new Array(64),J=new Array(256),ue=new Array(2048),oe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ie=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Pe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(A,W){for(var q=0,te=0,xe=new Array,ee=1;ee<=16;ee++){for(var Ie=1;Ie<=A[ee];Ie++)xe[W[te]]=[],xe[W[te]][0]=q,xe[W[te]][1]=ee,te++,q++;q*=2}return xe}function ve(A){for(var W=A[0],q=A[1]-1;q>=0;)W&1<<q&&(z|=1<<w),q--,--w<0&&(z==255?(pe(255),pe(0)):pe(z),w=7,z=0)}function pe(A){R.push(A)}function Ce(A){pe(A>>8&255),pe(255&A)}function fe(A,W,q,te,xe){for(var ee,Ie=xe[0],_e=xe[240],Fe=(function(xt,Je){var Gt,un,Zt,_n,Rt,Le,ke,Xe,et,Pt,St=0;for(et=0;et<8;++et){Gt=xt[St],un=xt[St+1],Zt=xt[St+2],_n=xt[St+3],Rt=xt[St+4],Le=xt[St+5],ke=xt[St+6];var _t=Gt+(Xe=xt[St+7]),Ut=Gt-Xe,qt=un+ke,Xt=un-ke,it=Zt+Le,an=Zt-Le,Bt=_n+Rt,Kt=_n-Rt,dn=_t+Bt,ti=_t-Bt,Nn=qt+it,xn=qt-it;xt[St]=dn+Nn,xt[St+4]=dn-Nn;var Ot=.707106781*(xn+ti);xt[St+2]=ti+Ot,xt[St+6]=ti-Ot;var ji=.382683433*((dn=Kt+an)-(xn=Xt+Ut)),In=.5411961*dn+ji,er=1.306562965*xn+ji,Gi=.707106781*(Nn=an+Xt),Ft=Ut+Gi,Pi=Ut-Gi;xt[St+5]=Pi+In,xt[St+3]=Pi-In,xt[St+1]=Ft+er,xt[St+7]=Ft-er,St+=8}for(St=0,et=0;et<8;++et){Gt=xt[St],un=xt[St+8],Zt=xt[St+16],_n=xt[St+24],Rt=xt[St+32],Le=xt[St+40],ke=xt[St+48];var gi=Gt+(Xe=xt[St+56]),Et=Gt-Xe,Ke=un+ke,Vt=un-ke,$t=Zt+Le,On=Zt-Le,En=_n+Rt,Hi=_n-Rt,Gn=gi+En,ai=gi-En,Li=Ke+$t,tr=Ke-$t;xt[St]=Gn+Li,xt[St+32]=Gn-Li;var co=.707106781*(tr+ai);xt[St+16]=ai+co,xt[St+48]=ai-co;var pl=.382683433*((Gn=Hi+On)-(tr=Vt+Et)),ko=.5411961*Gn+pl,No=1.306562965*tr+pl,is=.707106781*(Li=On+Vt),Zn=Et+is,ka=Et-is;xt[St+40]=ka+ko,xt[St+24]=ka-ko,xt[St+8]=Zn+No,xt[St+56]=Zn-No,St++}for(et=0;et<64;++et)Pt=xt[et]*Je[et],T[et]=Pt>0?Pt+.5|0:Pt-.5|0;return T})(A,W),nt=0;nt<64;++nt)K[oe[nt]]=Fe[nt];var lt=K[0]-q;q=K[0],lt==0?ve(te[0]):(ve(te[O[ee=32767+lt]]),ve(D[ee]));for(var kt=63;kt>0&&K[kt]==0;)kt--;if(kt==0)return ve(Ie),q;for(var It,ne=1;ne<=kt;){for(var jt=ne;K[ne]==0&&ne<=kt;)++ne;var Qt=ne-jt;if(Qt>=16){It=Qt>>4;for(var Wt=1;Wt<=It;++Wt)ve(_e);Qt&=15}ee=32767+K[ne],ve(xe[(Qt<<4)+O[ee]]),ve(D[ee]),ne++}return kt!=63&&ve(Ie),q}function k(A){A=Math.min(Math.max(A,1),100),d!=A&&((function(W){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var xe=v((q[te]*W+50)/100);xe=Math.min(Math.max(xe,1),255),p[oe[te]]=xe}for(var ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ie=0;Ie<64;Ie++){var _e=v((ee[Ie]*W+50)/100);_e=Math.min(Math.max(_e,1),255),b[oe[Ie]]=_e}for(var Fe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],nt=0,lt=0;lt<8;lt++)for(var kt=0;kt<8;kt++)y[nt]=1/(p[oe[nt]]*Fe[lt]*Fe[kt]*8),C[nt]=1/(b[oe[nt]]*Fe[lt]*Fe[kt]*8),nt++})(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),d=A)}this.encode=function(A,W){W&&k(W),R=new Array,z=0,w=7,Ce(65496),Ce(65504),Ce(16),pe(74),pe(70),pe(73),pe(70),pe(0),pe(1),pe(1),pe(0),Ce(1),Ce(1),pe(0),pe(0),(function(){Ce(65499),Ce(132),pe(0);for(var un=0;un<64;un++)pe(p[un]);pe(1);for(var Zt=0;Zt<64;Zt++)pe(b[Zt])})(),(function(un,Zt){Ce(65472),Ce(17),pe(8),Ce(Zt),Ce(un),pe(3),pe(1),pe(17),pe(0),pe(2),pe(17),pe(1),pe(3),pe(17),pe(1)})(A.width,A.height),(function(){Ce(65476),Ce(418),pe(0);for(var un=0;un<16;un++)pe(ie[un+1]);for(var Zt=0;Zt<=11;Zt++)pe(E[Zt]);pe(16);for(var _n=0;_n<16;_n++)pe(Y[_n+1]);for(var Rt=0;Rt<=161;Rt++)pe(F[Rt]);pe(1);for(var Le=0;Le<16;Le++)pe(L[Le+1]);for(var ke=0;ke<=11;ke++)pe($[ke]);pe(17);for(var Xe=0;Xe<16;Xe++)pe(H[Xe+1]);for(var et=0;et<=161;et++)pe(Pe[et])})(),Ce(65498),Ce(12),pe(3),pe(1),pe(0),pe(2),pe(17),pe(3),pe(17),pe(0),pe(63),pe(0);var q=0,te=0,xe=0;z=0,w=7,this.encode.displayName="_encode_";for(var ee,Ie,_e,Fe,nt,lt,kt,It,ne,jt=A.data,Qt=A.width,Wt=A.height,xt=4*Qt,Je=0;Je<Wt;){for(ee=0;ee<xt;){for(nt=xt*Je+ee,kt=-1,It=0,ne=0;ne<64;ne++)lt=nt+(It=ne>>3)*xt+(kt=4*(7&ne)),Je+It>=Wt&&(lt-=xt*(Je+1+It-Wt)),ee+kt>=xt&&(lt-=ee+kt-xt+4),Ie=jt[lt++],_e=jt[lt++],Fe=jt[lt++],we[ne]=(ue[Ie]+ue[_e+256|0]+ue[Fe+512|0]>>16)-128,X[ne]=(ue[Ie+768|0]+ue[_e+1024|0]+ue[Fe+1280|0]>>16)-128,G[ne]=(ue[Ie+1280|0]+ue[_e+1536|0]+ue[Fe+1792|0]>>16)-128;q=fe(we,y,q,r,s),te=fe(X,C,te,a,l),xe=fe(G,C,xe,a,l),ee+=32}Je+=8}if(w>=0){var Gt=[];Gt[1]=w+1,Gt[0]=(1<<w+1)-1,ve(Gt)}return Ce(65497),new Uint8Array(R)},i=i||50,(function(){for(var A=String.fromCharCode,W=0;W<256;W++)J[W]=A(W)})(),r=ae(ie,E),a=ae(L,$),s=ae(Y,F),l=ae(H,Pe),(function(){for(var A=1,W=2,q=1;q<=15;q++){for(var te=A;te<W;te++)O[32767+te]=q,D[32767+te]=[],D[32767+te][1]=q,D[32767+te][0]=te;for(var xe=-(W-1);xe<=-A;xe++)O[32767+xe]=q,D[32767+xe]=[],D[32767+xe][1]=q,D[32767+xe][0]=W-1+xe;A<<=1,W<<=1}})(),(function(){for(var A=0;A<256;A++)ue[A]=19595*A,ue[A+256|0]=38470*A,ue[A+512|0]=7471*A+32768,ue[A+768|0]=-11059*A,ue[A+1024|0]=-21709*A,ue[A+1280|0]=32768*A+8421375,ue[A+1536|0]=-27439*A,ue[A+1792|0]=-5329*A})(),k(i)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wc(i,r){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Cx(i){function r(E){if(!E)throw Error("assert :P")}function a(E,Y,F){for(var L=0;4>L;L++)if(E[Y+L]!=F.charCodeAt(L))return!0;return!1}function s(E,Y,F,L,$){for(var H=0;H<$;H++)E[Y+H]=F[L+H]}function l(E,Y,F,L){for(var $=0;$<L;$++)E[Y+$]=F}function d(E){return new Int32Array(E)}function v(E,Y){for(var F=[],L=0;L<E;L++)F.push(new Y);return F}function p(E,Y){var F=[];return(function L($,H,Pe){for(var ae=Pe[H],ve=0;ve<ae&&($.push(Pe.length>H+1?[]:new Y),!(Pe.length<H+1));ve++)L($[ve],H+1,Pe)})(F,0,E),F}var b=function(){var E=this;function Y(f,g){for(var j=1<<g-1>>>0;f&j;)j>>>=1;return j?(f&j-1)+j:f}function F(f,g,j,_,V){r(!(_%j));do f[g+(_-=j)]=V;while(0<_)}function L(f,g,j,_,V){if(r(2328>=V),512>=V)var Z=d(512);else if((Z=d(V))==null)return 0;return(function(Q,he,be,je,Ee,rt){var Te,He,Ye=he,dt=1<<be,Qe=d(16),yt=d(16);for(r(Ee!=0),r(je!=null),r(Q!=null),r(0<be),He=0;He<Ee;++He){if(15<je[He])return 0;++Qe[je[He]]}if(Qe[0]==Ee)return 0;for(yt[1]=0,Te=1;15>Te;++Te){if(Qe[Te]>1<<Te)return 0;yt[Te+1]=yt[Te]+Qe[Te]}for(He=0;He<Ee;++He)Te=je[He],0<je[He]&&(rt[yt[Te]++]=He);if(yt[15]==1)return(je=new $).g=0,je.value=rt[0],F(Q,Ye,1,dt,je),dt;var pt,bt=-1,Nt=dt-1,fn=0,cn=1,Qn=1,pn=1<<be;for(He=0,Te=1,Ee=2;Te<=be;++Te,Ee<<=1){if(cn+=Qn<<=1,0>(Qn-=Qe[Te]))return 0;for(;0<Qe[Te];--Qe[Te])(je=new $).g=Te,je.value=rt[He++],F(Q,Ye+fn,Ee,pn,je),fn=Y(fn,Te)}for(Te=be+1,Ee=2;15>=Te;++Te,Ee<<=1){if(cn+=Qn<<=1,0>(Qn-=Qe[Te]))return 0;for(;0<Qe[Te];--Qe[Te]){if(je=new $,(fn&Nt)!=bt){for(Ye+=pn,pt=1<<(bt=Te)-be;15>bt&&!(0>=(pt-=Qe[bt]));)++bt,pt<<=1;dt+=pn=1<<(pt=bt-be),Q[he+(bt=fn&Nt)].g=pt+be,Q[he+bt].value=Ye-he-bt}je.g=Te-be,je.value=rt[He++],F(Q,Ye+(fn>>be),Ee,pn,je),fn=Y(fn,Te)}}return cn!=2*yt[15]-1?0:dt})(f,g,j,_,V,Z)}function $(){this.value=this.g=0}function H(){this.value=this.g=0}function Pe(){this.G=v(5,$),this.H=d(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=v(Go,H)}function ae(f,g,j,_){r(f!=null),r(g!=null),r(2147483648>_),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=g,f.pa=j,f.Jd=g,f.Yc=j+_,f.Zc=4<=_?j+_-4+1:j,Ie(f)}function ve(f,g){for(var j=0;0<g--;)j|=Fe(f,128)<<g;return j}function pe(f,g){var j=ve(f,g);return _e(f)?-j:j}function Ce(f,g,j,_){var V,Z=0;for(r(f!=null),r(g!=null),r(4294967288>_),f.Sb=_,f.Ra=0,f.u=0,f.h=0,4<_&&(_=4),V=0;V<_;++V)Z+=g[j+V]<<8*V;f.Ra=Z,f.bb=_,f.oa=g,f.pa=j}function fe(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<cs-8>>>0,++f.bb,f.u-=8;te(f)&&(f.h=1,f.u=0)}function k(f,g){if(r(0<=g),!f.h&&g<=ia){var j=q(f)&eo[g];return f.u+=g,fe(f),j}return f.h=1,f.u=0}function A(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(f){return f.Ra>>>(f.u&cs-1)>>>0}function te(f){return r(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>cs}function xe(f,g){f.u=g,f.h=te(f)}function ee(f){f.u>=go&&(r(f.u>=go),fe(f))}function Ie(f){r(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(r(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function _e(f){return ve(f,1)}function Fe(f,g){var j=f.Ca;0>f.b&&Ie(f);var _=f.b,V=j*g>>>8,Z=(f.I>>>_>V)+0;for(Z?(j-=V,f.I-=V+1<<_>>>0):j=V+1,_=j,V=0;256<=_;)V+=8,_>>=8;return _=7^V+Ni[_],f.b-=_,f.Ca=(j<<_)-1,Z}function nt(f,g,j){f[g+0]=j>>24&255,f[g+1]=j>>16&255,f[g+2]=j>>8&255,f[g+3]=255&j}function lt(f,g){return f[g+0]|f[g+1]<<8}function kt(f,g){return lt(f,g)|f[g+2]<<16}function It(f,g){return lt(f,g)|lt(f,g+2)<<16}function ne(f,g){var j=1<<g;return r(f!=null),r(0<g),f.X=d(j),f.X==null?0:(f.Mb=32-g,f.Xa=g,1)}function jt(f,g){r(f!=null),r(g!=null),r(f.Xa==g.Xa),s(g.X,0,f.X,0,1<<g.Xa)}function Qt(){this.X=[],this.Xa=this.Mb=0}function Wt(f,g,j,_){r(j!=null),r(_!=null);var V=j[0],Z=_[0];return V==0&&(V=(f*Z+g/2)/g),Z==0&&(Z=(g*V+f/2)/f),0>=V||0>=Z?0:(j[0]=V,_[0]=Z,1)}function xt(f,g){return f+(1<<g)-1>>>g}function Je(f,g){return((4278255360&f)+(4278255360&g)>>>0&4278255360)+((16711935&f)+(16711935&g)>>>0&16711935)>>>0}function Gt(f,g){E[g]=function(j,_,V,Z,Q,he,be){var je;for(je=0;je<Q;++je){var Ee=E[f](he[be+je-1],V,Z+je);he[be+je]=Je(j[_+je],Ee)}}}function un(){this.ud=this.hd=this.jd=0}function Zt(f,g){return((4278124286&(f^g))>>>1)+(f&g)>>>0}function _n(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function Rt(f,g){return _n(f+(f-g+.5>>1))}function Le(f,g,j){return Math.abs(g-j)-Math.abs(f-j)}function ke(f,g,j,_,V,Z,Q){for(_=Z[Q-1],j=0;j<V;++j)Z[Q+j]=_=Je(f[g+j],_)}function Xe(f,g,j,_,V){var Z;for(Z=0;Z<j;++Z){var Q=f[g+Z],he=Q>>8&255,be=16711935&(be=(be=16711935&Q)+((he<<16)+he));_[V+Z]=(4278255360&Q)+be>>>0}}function et(f,g){g.jd=255&f,g.hd=f>>8&255,g.ud=f>>16&255}function Pt(f,g,j,_,V,Z){var Q;for(Q=0;Q<_;++Q){var he=g[j+Q],be=he>>>8,je=he,Ee=255&(Ee=(Ee=he>>>16)+((f.jd<<24>>24)*(be<<24>>24)>>>5));je=255&(je=(je+=(f.hd<<24>>24)*(be<<24>>24)>>>5)+((f.ud<<24>>24)*(Ee<<24>>24)>>>5)),V[Z+Q]=(4278255360&he)+(Ee<<16)+je}}function St(f,g,j,_,V){E[g]=function(Z,Q,he,be,je,Ee,rt,Te,He){for(be=rt;be<Te;++be)for(rt=0;rt<He;++rt)je[Ee++]=V(he[_(Z[Q++])])},E[f]=function(Z,Q,he,be,je,Ee,rt){var Te=8>>Z.b,He=Z.Ea,Ye=Z.K[0],dt=Z.w;if(8>Te)for(Z=(1<<Z.b)-1,dt=(1<<Te)-1;Q<he;++Q){var Qe,yt=0;for(Qe=0;Qe<He;++Qe)Qe&Z||(yt=_(be[je++])),Ee[rt++]=V(Ye[yt&dt]),yt>>=Te}else E["VP8LMapColor"+j](be,je,Ye,dt,Ee,rt,Q,he,He)}}function _t(f,g,j,_,V){for(j=g+j;g<j;){var Z=f[g++];_[V++]=Z>>16&255,_[V++]=Z>>8&255,_[V++]=255&Z}}function Ut(f,g,j,_,V){for(j=g+j;g<j;){var Z=f[g++];_[V++]=Z>>16&255,_[V++]=Z>>8&255,_[V++]=255&Z,_[V++]=Z>>24&255}}function qt(f,g,j,_,V){for(j=g+j;g<j;){var Z=(Q=f[g++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;_[V++]=Z,_[V++]=Q}}function Xt(f,g,j,_,V){for(j=g+j;g<j;){var Z=(Q=f[g++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;_[V++]=Z,_[V++]=Q}}function it(f,g,j,_,V){for(j=g+j;g<j;){var Z=f[g++];_[V++]=255&Z,_[V++]=Z>>8&255,_[V++]=Z>>16&255}}function an(f,g,j,_,V,Z){if(Z==0)for(j=g+j;g<j;)nt(_,((Z=f[g++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),V+=32;else s(_,V,f,g,j)}function Bt(f,g){E[g][0]=E[f+"0"],E[g][1]=E[f+"1"],E[g][2]=E[f+"2"],E[g][3]=E[f+"3"],E[g][4]=E[f+"4"],E[g][5]=E[f+"5"],E[g][6]=E[f+"6"],E[g][7]=E[f+"7"],E[g][8]=E[f+"8"],E[g][9]=E[f+"9"],E[g][10]=E[f+"10"],E[g][11]=E[f+"11"],E[g][12]=E[f+"12"],E[g][13]=E[f+"13"],E[g][14]=E[f+"0"],E[g][15]=E[f+"0"]}function Kt(f){return f==Us||f==$l||f==hs||f==bl}function dn(){this.eb=[],this.size=this.A=this.fb=0}function ti(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Nn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new dn,this.f.kb=new ti,this.sd=null}function xn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ot(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ji(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function In(f,g){var j=f.T,_=g.ba.f.RGBA,V=_.eb,Z=_.fb+f.ka*_.A,Q=Rr[g.ba.S],he=f.y,be=f.O,je=f.f,Ee=f.N,rt=f.ea,Te=f.W,He=g.cc,Ye=g.dc,dt=g.Mc,Qe=g.Nc,yt=f.ka,pt=f.ka+f.T,bt=f.U,Nt=bt+1>>1;for(yt==0?Q(he,be,null,null,je,Ee,rt,Te,je,Ee,rt,Te,V,Z,null,null,bt):(Q(g.ec,g.fc,he,be,He,Ye,dt,Qe,je,Ee,rt,Te,V,Z-_.A,V,Z,bt),++j);yt+2<pt;yt+=2)He=je,Ye=Ee,dt=rt,Qe=Te,Ee+=f.Rc,Te+=f.Rc,Z+=2*_.A,Q(he,(be+=2*f.fa)-f.fa,he,be,He,Ye,dt,Qe,je,Ee,rt,Te,V,Z-_.A,V,Z,bt);return be+=f.fa,f.j+pt<f.o?(s(g.ec,g.fc,he,be,bt),s(g.cc,g.dc,je,Ee,Nt),s(g.Mc,g.Nc,rt,Te,Nt),j--):1&pt||Q(he,be,null,null,je,Ee,rt,Te,je,Ee,rt,Te,V,Z+_.A,null,null,bt),j}function er(f,g,j){var _=f.F,V=[f.J];if(_!=null){var Z=f.U,Q=g.ba.S,he=Q==cc||Q==hs;g=g.ba.f.RGBA;var be=[0],je=f.ka;be[0]=f.T,f.Kb&&(je==0?--be[0]:(--je,V[0]-=f.width),f.j+f.ka+f.T==f.o&&(be[0]=f.o-f.j-je));var Ee=g.eb;je=g.fb+je*g.A,f=Ti(_,V[0],f.width,Z,be,Ee,je+(he?0:3),g.A),r(j==be),f&&Kt(Q)&&nl(Ee,je,he,Z,be,g.A)}return 0}function Gi(f){var g=f.ma,j=g.ba.S,_=11>j,V=j==Ua||j==bo||j==cc||j==il||j==12||Kt(j);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Lo(g.Oa,f,V?11:12))return 0;if(V&&Kt(j)&&da(),f.da)alert("todo:use_scaling");else{if(_){if(g.Ib=ji,f.Kb){if(j=f.U+1>>1,g.memory=d(f.U+2*j),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+f.U,g.Mc=g.cc,g.Nc=g.dc+j,g.Ib=In,da()}}else alert("todo:EmitYUV");V&&(g.Jb=er,_&&ya())}if(_&&!La){for(f=0;256>f;++f)Zi[f]=89858*(f-128)+ro>>br,Tl[f]=-22014*(f-128)+ro,es[f]=-45773*(f-128),Bo[f]=113618*(f-128)+ro>>br;for(f=Qr;f<Da;++f)g=76283*(f-16)+ro>>br,gs[f-Qr]=ar(g,255),Cl[f-Qr]=ar(g+8>>4,15);La=1}return 1}function Ft(f){var g=f.ma,j=f.U,_=f.T;return r(!(1&f.ka)),0>=j||0>=_?0:(j=g.Ib(f,g),g.Jb!=null&&g.Jb(f,g,j),g.Dc+=j,1)}function Pi(f){f.ma.memory=null}function gi(f,g,j,_){return k(f,8)!=47?0:(g[0]=k(f,14)+1,j[0]=k(f,14)+1,_[0]=k(f,1),k(f,3)!=0?0:!f.h)}function Et(f,g){if(4>f)return f+1;var j=f-2>>1;return(2+(1&f)<<j)+k(g,j)+1}function Ke(f,g){return 120<g?g-120:1<=(j=((j=oa[g-1])>>4)*f+(8-(15&j)))?j:1;var j}function Vt(f,g,j){var _=q(j),V=f[g+=255&_].g-8;return 0<V&&(xe(j,j.u+8),_=q(j),g+=f[g].value,g+=_&(1<<V)-1),xe(j,j.u+f[g].g),f[g].value}function $t(f,g,j){return j.g+=f.g,j.value+=f.value<<g>>>0,r(8>=j.g),f.g}function On(f,g,j){var _=f.xc;return r((g=_==0?0:f.vc[f.md*(j>>_)+(g>>_)])<f.Wb),f.Ya[g]}function En(f,g,j,_){var V=f.ab,Z=f.c*g,Q=f.C;g=Q+g;var he=j,be=_;for(_=f.Ta,j=f.Ua;0<V--;){var je=f.gc[V],Ee=Q,rt=g,Te=he,He=be,Ye=(be=_,he=j,je.Ea);switch(r(Ee<rt),r(rt<=je.nc),je.hc){case 2:wr(Te,He,(rt-Ee)*Ye,be,he);break;case 0:var dt=Ee,Qe=rt,yt=be,pt=he,bt=(pn=je).Ea;dt==0&&(us(Te,He,null,null,1,yt,pt),ke(Te,He+1,0,0,bt-1,yt,pt+1),He+=bt,pt+=bt,++dt);for(var Nt=1<<pn.b,fn=Nt-1,cn=xt(bt,pn.b),Qn=pn.K,pn=pn.w+(dt>>pn.b)*cn;dt<Qe;){var Ln=Qn,Ci=pn,$n=1;for(lr(Te,He,yt,pt-bt,1,yt,pt);$n<bt;){var tn=($n&~fn)+Nt;tn>bt&&(tn=bt),(0,xl[Ln[Ci++]>>8&15])(Te,He+ +$n,yt,pt+$n-bt,tn-$n,yt,pt+$n),$n=tn}He+=bt,pt+=bt,++dt&fn||(pn+=cn)}rt!=je.nc&&s(be,he-Ye,be,he+(rt-Ee-1)*Ye,Ye);break;case 1:for(Ye=Te,Qe=He,bt=(Te=je.Ea)-(pt=Te&~(yt=(He=1<<je.b)-1)),dt=xt(Te,je.b),Nt=je.K,je=je.w+(Ee>>je.b)*dt;Ee<rt;){for(fn=Nt,cn=je,Qn=new un,pn=Qe+pt,Ln=Qe+Te;Qe<pn;)et(fn[cn++],Qn),Ac(Qn,Ye,Qe,He,be,he),Qe+=He,he+=He;Qe<Ln&&(et(fn[cn++],Qn),Ac(Qn,Ye,Qe,bt,be,he),Qe+=bt,he+=bt),++Ee&yt||(je+=dt)}break;case 3:if(Te==be&&He==he&&0<je.b){for(Qe=be,Te=Ye=he+(rt-Ee)*Ye-(pt=(rt-Ee)*xt(je.Ea,je.b)),He=be,yt=he,dt=[],pt=(bt=pt)-1;0<=pt;--pt)dt[pt]=He[yt+pt];for(pt=bt-1;0<=pt;--pt)Qe[Te+pt]=dt[pt];Nc(je,Ee,rt,be,Ye,be,he)}else Nc(je,Ee,rt,Te,He,be,he)}he=_,be=j}be!=j&&s(_,j,he,be,Z)}function Hi(f,g){var j=f.V,_=f.Ba+f.c*f.C,V=g-f.C;if(r(g<=f.l.o),r(16>=V),0<V){var Z=f.l,Q=f.Ta,he=f.Ua,be=Z.width;if(En(f,V,j,_),V=he=[he],r((j=f.C)<(_=g)),r(Z.v<Z.va),_>Z.o&&(_=Z.o),j<Z.j){var je=Z.j-j;j=Z.j,V[0]+=je*be}if(j>=_?j=0:(V[0]+=4*Z.v,Z.ka=j-Z.j,Z.U=Z.va-Z.v,Z.T=_-j,j=1),j){if(he=he[0],11>(j=f.ca).S){var Ee=j.f.RGBA,rt=(_=j.S,V=Z.U,Z=Z.T,je=Ee.eb,Ee.A),Te=Z;for(Ee=Ee.fb+f.Ma*Ee.A;0<Te--;){var He=Q,Ye=he,dt=V,Qe=je,yt=Ee;switch(_){case Yc:Mo(He,Ye,dt,Qe,yt);break;case Ua:Bs(He,Ye,dt,Qe,yt);break;case Us:Bs(He,Ye,dt,Qe,yt),nl(Qe,yt,0,dt,1,0);break;case zc:Pa(He,Ye,dt,Qe,yt);break;case bo:an(He,Ye,dt,Qe,yt,1);break;case $l:an(He,Ye,dt,Qe,yt,1),nl(Qe,yt,0,dt,1,0);break;case cc:an(He,Ye,dt,Qe,yt,0);break;case hs:an(He,Ye,dt,Qe,yt,0),nl(Qe,yt,1,dt,1,0);break;case il:ds(He,Ye,dt,Qe,yt);break;case bl:ds(He,Ye,dt,Qe,yt),hr(Qe,yt,dt,1,0);break;case ml:to(He,Ye,dt,Qe,yt);break;default:r(0)}he+=be,Ee+=rt}f.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");r(f.Ma<=j.height)}}f.C=g,r(f.C<=f.i)}function Gn(f){var g;if(0<f.ua)return 0;for(g=0;g<f.Wb;++g){var j=f.Ya[g].G,_=f.Ya[g].H;if(0<j[1][_[1]+0].g||0<j[2][_[2]+0].g||0<j[3][_[3]+0].g)return 0}return 1}function ai(f,g,j,_,V,Z){if(f.Z!=0){var Q=f.qd,he=f.rd;for(r(ol[f.Z]!=null);g<j;++g)ol[f.Z](Q,he,_,V,_,V,Z),Q=_,he=V,V+=Z;f.qd=Q,f.rd=he}}function Li(f,g){var j=f.l.ma,_=j.Z==0||j.Z==1?f.l.j:f.C;if(_=f.C<_?_:f.C,r(g<=f.l.o),g>_){var V=f.l.width,Z=j.ca,Q=j.tb+V*_,he=f.V,be=f.Ba+f.c*_,je=f.gc;r(f.ab==1),r(je[0].hc==3),Zs(je[0],_,g,he,be,Z,Q),ai(j,_,g,Z,Q,V)}f.C=f.Ma=g}function tr(f,g,j,_,V,Z,Q){var he=f.$/_,be=f.$%_,je=f.m,Ee=f.s,rt=j+f.$,Te=rt;V=j+_*V;var He=j+_*Z,Ye=280+Ee.ua,dt=f.Pb?he:16777216,Qe=0<Ee.ua?Ee.Wa:null,yt=Ee.wc,pt=rt<He?On(Ee,be,he):null;r(f.C<Z),r(He<=V);var bt=!1;e:for(;;){for(;bt||rt<He;){var Nt=0;if(he>=dt){var fn=rt-j;r((dt=f).Pb),dt.wd=dt.m,dt.xd=fn,0<dt.s.ua&&jt(dt.s.Wa,dt.s.vb),dt=he+Zr}if(be&yt||(pt=On(Ee,be,he)),r(pt!=null),pt.Qb&&(g[rt]=pt.qb,bt=!0),!bt)if(ee(je),pt.jc){Nt=je,fn=g;var cn=rt,Qn=pt.pd[q(Nt)&Go-1];r(pt.jc),256>Qn.g?(xe(Nt,Nt.u+Qn.g),fn[cn]=Qn.value,Nt=0):(xe(Nt,Nt.u+Qn.g-256),r(256<=Qn.value),Nt=Qn.value),Nt==0&&(bt=!0)}else Nt=Vt(pt.G[0],pt.H[0],je);if(je.h)break;if(bt||256>Nt){if(!bt)if(pt.nd)g[rt]=(pt.qb|Nt<<8)>>>0;else{if(ee(je),bt=Vt(pt.G[1],pt.H[1],je),ee(je),fn=Vt(pt.G[2],pt.H[2],je),cn=Vt(pt.G[3],pt.H[3],je),je.h)break;g[rt]=(cn<<24|bt<<16|Nt<<8|fn)>>>0}if(bt=!1,++rt,++be>=_&&(be=0,++he,Q!=null&&he<=Z&&!(he%16)&&Q(f,he),Qe!=null))for(;Te<rt;)Nt=g[Te++],Qe.X[(506832829*Nt&4294967295)>>>Qe.Mb]=Nt}else if(280>Nt){if(Nt=Et(Nt-256,je),fn=Vt(pt.G[4],pt.H[4],je),ee(je),fn=Ke(_,fn=Et(fn,je)),je.h)break;if(rt-j<fn||V-rt<Nt)break e;for(cn=0;cn<Nt;++cn)g[rt+cn]=g[rt+cn-fn];for(rt+=Nt,be+=Nt;be>=_;)be-=_,++he,Q!=null&&he<=Z&&!(he%16)&&Q(f,he);if(r(rt<=V),be&yt&&(pt=On(Ee,be,he)),Qe!=null)for(;Te<rt;)Nt=g[Te++],Qe.X[(506832829*Nt&4294967295)>>>Qe.Mb]=Nt}else{if(!(Nt<Ye))break e;for(bt=Nt-280,r(Qe!=null);Te<rt;)Nt=g[Te++],Qe.X[(506832829*Nt&4294967295)>>>Qe.Mb]=Nt;Nt=rt,r(!(bt>>>(fn=Qe).Xa)),g[Nt]=fn.X[bt],bt=!0}bt||r(je.h==te(je))}if(f.Pb&&je.h&&rt<V)r(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&jt(f.s.vb,f.s.Wa);else{if(je.h)break e;Q?.(f,he>Z?Z:he),f.a=0,f.$=rt-j}return 1}return f.a=3,0}function co(f){r(f!=null),f.vc=null,f.yc=null,f.Ya=null;var g=f.Wa;g!=null&&(g.X=null),f.vb=null,r(f!=null)}function pl(){var f=new vn;return f==null?null:(f.a=0,f.xb=xu,Bt("Predictor","VP8LPredictors"),Bt("Predictor","VP8LPredictors_C"),Bt("PredictorAdd","VP8LPredictorsAdd"),Bt("PredictorAdd","VP8LPredictorsAdd_C"),wr=Xe,Ac=Pt,Mo=_t,Bs=Ut,ds=qt,to=Xt,Pa=it,E.VP8LMapColor32b=xo,E.VP8LMapColor8b=ma,f)}function ko(f,g,j,_,V){var Z=1,Q=[f],he=[g],be=_.m,je=_.s,Ee=null,rt=0;e:for(;;){if(j)for(;Z&&k(be,1);){var Te=Q,He=he,Ye=_,dt=1,Qe=Ye.m,yt=Ye.gc[Ye.ab],pt=k(Qe,2);if(Ye.Oc&1<<pt)Z=0;else{switch(Ye.Oc|=1<<pt,yt.hc=pt,yt.Ea=Te[0],yt.nc=He[0],yt.K=[null],++Ye.ab,r(4>=Ye.ab),pt){case 0:case 1:yt.b=k(Qe,3)+2,dt=ko(xt(yt.Ea,yt.b),xt(yt.nc,yt.b),0,Ye,yt.K),yt.K=yt.K[0];break;case 3:var bt,Nt=k(Qe,8)+1,fn=16<Nt?0:4<Nt?1:2<Nt?2:3;if(Te[0]=xt(yt.Ea,fn),yt.b=fn,bt=dt=ko(Nt,1,0,Ye,yt.K)){var cn,Qn=Nt,pn=yt,Ln=1<<(8>>pn.b),Ci=d(Ln);if(Ci==null)bt=0;else{var $n=pn.K[0],tn=pn.w;for(Ci[0]=pn.K[0][0],cn=1;cn<1*Qn;++cn)Ci[cn]=Je($n[tn+cn],Ci[cn-1]);for(;cn<4*Ln;++cn)Ci[cn]=0;pn.K[0]=null,pn.K[0]=Ci,bt=1}}dt=bt;break;case 2:break;default:r(0)}Z=dt}}if(Q=Q[0],he=he[0],Z&&k(be,1)&&!(Z=1<=(rt=k(be,4))&&11>=rt)){_.a=3;break e}var Ht;if(Ht=Z)t:{var ir,Dn,si,Ji=_,ur=Q,dr=he,mi=rt,fr=j,Lr=Ji.m,Mr=Ji.s,di=[null],ii=1,vr=0,Ui=Zo[mi];n:for(;;){if(fr&&k(Lr,1)){var ha=k(Lr,3)+2,Tr=xt(ur,ha),qi=xt(dr,ha),Wr=Tr*qi;if(!ko(Tr,qi,0,Ji,di))break n;for(di=di[0],Mr.xc=ha,ir=0;ir<Wr;++ir){var zi=di[ir]>>8&65535;di[ir]=zi,zi>=ii&&(ii=zi+1)}}if(Lr.h)break n;for(Dn=0;5>Dn;++Dn){var Ar=Ko[Dn];!Dn&&0<mi&&(Ar+=1<<mi),vr<Ar&&(vr=Ar)}var $r=v(ii*Ui,$),pr=ii,Oi=v(pr,Pe);if(Oi==null)var wa=null;else r(65536>=pr),wa=Oi;var Yr=d(vr);if(wa==null||Yr==null||$r==null){Ji.a=1;break n}var kn=$r;for(ir=si=0;ir<ii;++ir){var zn=wa[ir],Ei=zn.G,Ha=zn.H,Wa=0,Sa=1,ea=0;for(Dn=0;5>Dn;++Dn){Ar=Ko[Dn],Ei[Dn]=kn,Ha[Dn]=si,!Dn&&0<mi&&(Ar+=1<<mi);r:{var ll,qs=Ar,Dc=Ji,gr=Yr,mu=kn,Gl=si,Xl=0,Vs=Dc.m,Xu=k(Vs,1);if(l(gr,0,0,qs),Xu){var Rc=k(Vs,1)+1,Gc=k(Vs,1),bu=k(Vs,Gc==0?1:8);gr[bu]=1,Rc==2&&(gr[bu=k(Vs,8)]=1);var Ir=1}else{var Br=d(19),kl=k(Vs,4)+4;if(19<kl){Dc.a=3;var Nl=0;break r}for(ll=0;ll<kl;++ll)Br[Pc[ll]]=k(Vs,3);var uc=void 0,cl=void 0,Hs=Dc,Al=Br,Kl=qs,Xc=gr,Kc=0,xs=Hs.m,Lc=8,Zl=v(128,$);i:for(;L(Zl,0,7,Al,19);){if(k(xs,1)){var Zc=2+2*k(xs,3);if((uc=2+k(xs,Zc))>Kl)break i}else uc=Kl;for(cl=0;cl<Kl&&uc--;){ee(xs);var dc=Zl[0+(127&q(xs))];xe(xs,xs.u+dc.g);var Jl=dc.value;if(16>Jl)Xc[cl++]=Jl,Jl!=0&&(Lc=Jl);else{var vu=Jl==16,Td=Jl-16,Jc=vl[Td],ys=k(xs,vo[Td])+Jc;if(cl+ys>Kl)break i;for(var Ws=vu?Lc:0;0<ys--;)Xc[cl++]=Ws}}Kc=1;break i}Kc||(Hs.a=3),Ir=Kc}(Ir=Ir&&!Vs.h)&&(Xl=L(mu,Gl,8,gr,qs)),Ir&&Xl!=0?Nl=Xl:(Dc.a=3,Nl=0)}if(Nl==0)break n;if(Sa&&rl[Dn]==1&&(Sa=kn[si].g==0),Wa+=kn[si].g,si+=Nl,3>=Dn){var oo,wu=Yr[0];for(oo=1;oo<Ar;++oo)Yr[oo]>wu&&(wu=Yr[oo]);ea+=wu}}if(zn.nd=Sa,zn.Qb=0,Sa&&(zn.qb=(Ei[3][Ha[3]+0].value<<24|Ei[1][Ha[1]+0].value<<16|Ei[2][Ha[2]+0].value)>>>0,Wa==0&&256>Ei[0][Ha[0]+0].value&&(zn.Qb=1,zn.qb+=Ei[0][Ha[0]+0].value<<8)),zn.jc=!zn.Qb&&6>ea,zn.jc){var Qc,ul=zn;for(Qc=0;Qc<Go;++Qc){var zl=Qc,Pl=ul.pd[zl],Su=ul.G[0][ul.H[0]+zl];256<=Su.value?(Pl.g=Su.g+256,Pl.value=Su.value):(Pl.g=0,Pl.value=0,zl>>=$t(Su,8,Pl),zl>>=$t(ul.G[1][ul.H[1]+zl],16,Pl),zl>>=$t(ul.G[2][ul.H[2]+zl],0,Pl),$t(ul.G[3][ul.H[3]+zl],24,Pl))}}}Mr.vc=di,Mr.Wb=ii,Mr.Ya=wa,Mr.yc=$r,Ht=1;break t}Ht=0}if(!(Z=Ht)){_.a=3;break e}if(0<rt){if(je.ua=1<<rt,!ne(je.Wa,rt)){_.a=1,Z=0;break e}}else je.ua=0;var eu=_,Ql=Q,$s=he,fc=eu.s,Mc=fc.xc;if(eu.c=Ql,eu.i=$s,fc.md=xt(Ql,Mc),fc.wc=Mc==0?-1:(1<<Mc)-1,j){_.xb=Sl;break e}if((Ee=d(Q*he))==null){_.a=1,Z=0;break e}Z=(Z=tr(_,Ee,0,Q,he,he,null))&&!be.h;break e}return Z?(V!=null?V[0]=Ee:(r(Ee==null),r(j)),_.$=0,j||co(je)):co(je),Z}function No(f,g){var j=f.c*f.i,_=j+g+16*g;return r(f.c<=g),f.V=d(_),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+j+g,1)}function is(f,g){var j=f.C,_=g-j,V=f.V,Z=f.Ba+f.c*j;for(r(g<=f.l.o);0<_;){var Q=16<_?16:_,he=f.l.ma,be=f.l.width,je=be*Q,Ee=he.ca,rt=he.tb+be*j,Te=f.Ta,He=f.Ua;En(f,Q,V,Z),Vr(Te,He,Ee,rt,je),ai(he,j,j+Q,Ee,rt,be),_-=Q,V+=Q*f.c,j+=Q}r(j==g),f.C=f.Ma=g}function Zn(){this.ub=this.yd=this.td=this.Rb=0}function ka(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bi(){this.Fb=this.Bb=this.Cb=0,this.Zb=d(4),this.Lb=d(4)}function uo(){this.Yb=(function(){var f=[];return(function g(j,_,V){for(var Z=V[_],Q=0;Q<Z&&(j.push(V.length>_+1?[]:0),!(V.length<_+1));Q++)g(j[Q],_+1,V)})(f,0,[3,11]),f})()}function Fn(){this.jb=d(3),this.Wc=p([4,8],uo),this.Xc=p([4,17],uo)}function Ns(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new d(4),this.od=new d(4)}function xi(){this.ld=this.La=this.dd=this.tc=0}function Xa(){this.Na=this.la=0}function fo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function As(){this.ad=d(384),this.Za=0,this.Ob=d(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zs(){this.uc=this.M=this.Nb=0,this.wa=Array(new xi),this.Y=0,this.ya=Array(new As),this.aa=0,this.l=new Ps}function Ao(){this.y=d(16),this.f=d(8),this.ea=d(8)}function Cc(){this.cb=this.a=0,this.sc="",this.m=new A,this.Od=new Zn,this.Kc=new ka,this.ed=new Ns,this.Qa=new bi,this.Ic=this.$c=this.Aa=0,this.D=new zs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=v(8,A),this.ia=0,this.pb=v(4,fo),this.Pa=new Fn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ao),this.Hd=0,this.rb=Array(new Xa),this.sb=0,this.wa=Array(new xi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new As),this.L=this.aa=0,this.gd=p([4,2],xi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ar(f,g){return 0>f?0:f>g?g:f}function Ps(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wn(){var f=new Cc;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,va||(va=po)),f}function Hn(f,g,j){return f.a==0&&(f.a=g,f.sc=j,f.cb=0),0}function _s(f,g,j){return 3<=j&&f[g+0]==157&&f[g+1]==1&&f[g+2]==42}function qo(f,g){if(f==null)return 0;if(f.a=0,f.sc="OK",g==null)return Hn(f,2,"null VP8Io passed to VP8GetHeaders()");var j=g.data,_=g.w,V=g.ha;if(4>V)return Hn(f,7,"Truncated header.");var Z=j[_+0]|j[_+1]<<8|j[_+2]<<16,Q=f.Od;if(Q.Rb=!(1&Z),Q.td=Z>>1&7,Q.yd=Z>>4&1,Q.ub=Z>>5,3<Q.td)return Hn(f,3,"Incorrect keyframe parameters.");if(!Q.yd)return Hn(f,4,"Frame not displayable.");_+=3,V-=3;var he=f.Kc;if(Q.Rb){if(7>V)return Hn(f,7,"cannot parse picture header");if(!_s(j,_,V))return Hn(f,3,"Bad code word");he.c=16383&(j[_+4]<<8|j[_+3]),he.Td=j[_+4]>>6,he.i=16383&(j[_+6]<<8|j[_+5]),he.Ud=j[_+6]>>6,_+=7,V-=7,f.za=he.c+15>>4,f.Ub=he.i+15>>4,g.width=he.c,g.height=he.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,l((Z=f.Pa).jb,0,255,Z.jb.length),r((Z=f.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,l(Z.Zb,0,0,Z.Zb.length),l(Z.Lb,0,0,Z.Lb)}if(Q.ub>V)return Hn(f,7,"bad partition length");ae(Z=f.m,j,_,Q.ub),_+=Q.ub,V-=Q.ub,Q.Rb&&(he.Ld=_e(Z),he.Kd=_e(Z)),he=f.Qa;var be,je=f.Pa;if(r(Z!=null),r(he!=null),he.Cb=_e(Z),he.Cb){if(he.Bb=_e(Z),_e(Z)){for(he.Fb=_e(Z),be=0;4>be;++be)he.Zb[be]=_e(Z)?pe(Z,7):0;for(be=0;4>be;++be)he.Lb[be]=_e(Z)?pe(Z,6):0}if(he.Bb)for(be=0;3>be;++be)je.jb[be]=_e(Z)?ve(Z,8):255}else he.Bb=0;if(Z.Ka)return Hn(f,3,"cannot parse segment header");if((he=f.ed).zd=_e(Z),he.Tb=ve(Z,6),he.wb=ve(Z,3),he.Pc=_e(Z),he.Pc&&_e(Z)){for(je=0;4>je;++je)_e(Z)&&(he.vd[je]=pe(Z,6));for(je=0;4>je;++je)_e(Z)&&(he.od[je]=pe(Z,6))}if(f.L=he.Tb==0?0:he.zd?1:2,Z.Ka)return Hn(f,3,"cannot parse filter header");var Ee=V;if(V=be=_,_=be+Ee,he=Ee,f.Xb=(1<<ve(f.m,2))-1,Ee<3*(je=f.Xb))j=7;else{for(be+=3*je,he-=3*je,Ee=0;Ee<je;++Ee){var rt=j[V+0]|j[V+1]<<8|j[V+2]<<16;rt>he&&(rt=he),ae(f.Jc[+Ee],j,be,rt),be+=rt,he-=rt,V+=3}ae(f.Jc[+je],j,be,he),j=be<_?0:5}if(j!=0)return Hn(f,j,"cannot parse partitions");for(j=ve(be=f.m,7),V=_e(be)?pe(be,4):0,_=_e(be)?pe(be,4):0,he=_e(be)?pe(be,4):0,je=_e(be)?pe(be,4):0,be=_e(be)?pe(be,4):0,Ee=f.Qa,rt=0;4>rt;++rt){if(Ee.Cb){var Te=Ee.Zb[rt];Ee.Fb||(Te+=j)}else{if(0<rt){f.pb[rt]=f.pb[0];continue}Te=j}var He=f.pb[rt];He.Sc[0]=wo[ar(Te+V,127)],He.Sc[1]=Jo[ar(Te+0,127)],He.Eb[0]=2*wo[ar(Te+_,127)],He.Eb[1]=101581*Jo[ar(Te+he,127)]>>16,8>He.Eb[1]&&(He.Eb[1]=8),He.Qc[0]=wo[ar(Te+je,117)],He.Qc[1]=Jo[ar(Te+be,127)],He.lc=Te+be}if(!Q.Rb)return Hn(f,4,"Not a key frame.");for(_e(Z),Q=f.Pa,j=0;4>j;++j){for(V=0;8>V;++V)for(_=0;3>_;++_)for(he=0;11>he;++he)je=Fe(Z,jr[j][V][_][he])?ve(Z,8):al[j][V][_][he],Q.Wc[j][V].Yb[_][he]=je;for(V=0;17>V;++V)Q.Xc[j][V]=Q.Wc[j][Ai[V]]}return f.kc=_e(Z),f.kc&&(f.Bd=ve(Z,8)),f.cb=1}function po(f,g,j,_,V,Z,Q){var he=g[V].Yb[j];for(j=0;16>V;++V){if(!Fe(f,he[j+0]))return V;for(;!Fe(f,he[j+1]);)if(he=g[++V].Yb[0],j=0,V==16)return 16;var be=g[V+1].Yb;if(Fe(f,he[j+2])){var je=f,Ee=0;if(Fe(je,(Te=he)[(rt=j)+3]))if(Fe(je,Te[rt+6])){for(he=0,rt=2*(Ee=Fe(je,Te[rt+8]))+(Te=Fe(je,Te[rt+9+Ee])),Ee=0,Te=Yl[rt];Te[he];++he)Ee+=Ee+Fe(je,Te[he]);Ee+=3+(8<<rt)}else Fe(je,Te[rt+7])?(Ee=7+2*Fe(je,165),Ee+=Fe(je,145)):Ee=5+Fe(je,159);else Ee=Fe(je,Te[rt+4])?3+Fe(je,Te[rt+5]):2;he=be[2]}else Ee=1,he=be[1];be=Q+_c[V],0>(je=f).b&&Ie(je);var rt,Te=je.b,He=(rt=je.Ca>>1)-(je.I>>Te)>>31;--je.b,je.Ca+=He,je.Ca|=1,je.I-=(rt+1&He)<<Te,Z[be]=((Ee^He)-He)*_[(0<V)+0]}return 16}function Oa(f){var g=f.rb[f.sb-1];g.la=0,g.Na=0,l(f.zc,0,0,f.zc.length),f.ja=0}function vi(f,g,j,_,V){V=f[g+j+32*_]+(V>>3),f[g+j+32*_]=-256&V?0>V?0:255:V}function Wi(f,g,j,_,V,Z){vi(f,g,0,j,_+V),vi(f,g,1,j,_+Z),vi(f,g,2,j,_-Z),vi(f,g,3,j,_-V)}function yi(f){return(20091*f>>16)+f}function _r(f,g,j,_){var V,Z=0,Q=d(16);for(V=0;4>V;++V){var he=f[g+0]+f[g+8],be=f[g+0]-f[g+8],je=(35468*f[g+4]>>16)-yi(f[g+12]),Ee=yi(f[g+4])+(35468*f[g+12]>>16);Q[Z+0]=he+Ee,Q[Z+1]=be+je,Q[Z+2]=be-je,Q[Z+3]=he-Ee,Z+=4,g++}for(V=Z=0;4>V;++V)he=(f=Q[Z+0]+4)+Q[Z+8],be=f-Q[Z+8],je=(35468*Q[Z+4]>>16)-yi(Q[Z+12]),vi(j,_,0,0,he+(Ee=yi(Q[Z+4])+(35468*Q[Z+12]>>16))),vi(j,_,1,0,be+je),vi(j,_,2,0,be-je),vi(j,_,3,0,he-Ee),Z++,_+=32}function sc(f,g,j,_){var V=f[g+0]+4,Z=35468*f[g+4]>>16,Q=yi(f[g+4]),he=35468*f[g+1]>>16;Wi(j,_,0,V+Q,f=yi(f[g+1]),he),Wi(j,_,1,V+Z,f,he),Wi(j,_,2,V-Z,f,he),Wi(j,_,3,V-Q,f,he)}function Ea(f,g,j,_,V){_r(f,g,j,_),V&&_r(f,g+16,j,_+4)}function Na(f,g,j,_){fs(f,g+0,j,_,1),fs(f,g+32,j,_+128,1)}function hl(f,g,j,_){var V;for(f=f[g+0]+4,V=0;4>V;++V)for(g=0;4>g;++g)vi(j,_,g,V,f)}function Ka(f,g,j,_){f[g+0]&&Ki(f,g+0,j,_),f[g+16]&&Ki(f,g+16,j,_+4),f[g+32]&&Ki(f,g+32,j,_+128),f[g+48]&&Ki(f,g+48,j,_+128+4)}function ua(f,g,j,_){var V,Z=d(16);for(V=0;4>V;++V){var Q=f[g+0+V]+f[g+12+V],he=f[g+4+V]+f[g+8+V],be=f[g+4+V]-f[g+8+V],je=f[g+0+V]-f[g+12+V];Z[0+V]=Q+he,Z[8+V]=Q-he,Z[4+V]=je+be,Z[12+V]=je-be}for(V=0;4>V;++V)Q=(f=Z[0+4*V]+3)+Z[3+4*V],he=Z[1+4*V]+Z[2+4*V],be=Z[1+4*V]-Z[2+4*V],je=f-Z[3+4*V],j[_+0]=Q+he>>3,j[_+16]=je+be>>3,j[_+32]=Q-he>>3,j[_+48]=je-be>>3,_+=64}function Fa(f,g,j){var _,V=g-32,Z=cr,Q=255-f[V-1];for(_=0;_<j;++_){var he,be=Z,je=Q+f[g-1];for(he=0;he<j;++he)f[g+he]=be[je+f[V+he]];g+=32}}function zo(f,g){Fa(f,g,4)}function Mt(f,g){Fa(f,g,8)}function Fi(f,g){Fa(f,g,16)}function Vo(f,g){var j;for(j=0;16>j;++j)s(f,g+32*j,f,g-32,16)}function Xs(f,g){var j;for(j=16;0<j;--j)l(f,g,f[g-1],16),g+=32}function Ur(f,g,j){var _;for(_=0;16>_;++_)l(g,j+32*_,f,16)}function Ho(f,g){var j,_=16;for(j=0;16>j;++j)_+=f[g-1+32*j]+f[g+j-32];Ur(_>>5,f,g)}function or(f,g){var j,_=8;for(j=0;16>j;++j)_+=f[g-1+32*j];Ur(_>>4,f,g)}function nr(f,g){var j,_=8;for(j=0;16>j;++j)_+=f[g+j-32];Ur(_>>4,f,g)}function rs(f,g){Ur(128,f,g)}function Vn(f,g,j){return f+2*g+j+2>>2}function oi(f,g){var j,_=g-32;for(_=new Uint8Array([Vn(f[_-1],f[_+0],f[_+1]),Vn(f[_+0],f[_+1],f[_+2]),Vn(f[_+1],f[_+2],f[_+3]),Vn(f[_+2],f[_+3],f[_+4])]),j=0;4>j;++j)s(f,g+32*j,_,0,_.length)}function An(f,g){var j=f[g-1],_=f[g-1+32],V=f[g-1+64],Z=f[g-1+96];nt(f,g+0,16843009*Vn(f[g-1-32],j,_)),nt(f,g+32,16843009*Vn(j,_,V)),nt(f,g+64,16843009*Vn(_,V,Z)),nt(f,g+96,16843009*Vn(V,Z,Z))}function lc(f,g){var j,_=4;for(j=0;4>j;++j)_+=f[g+j-32]+f[g-1+32*j];for(_>>=3,j=0;4>j;++j)l(f,g+32*j,_,4)}function Za(f,g){var j=f[g-1+0],_=f[g-1+32],V=f[g-1+64],Z=f[g-1-32],Q=f[g+0-32],he=f[g+1-32],be=f[g+2-32],je=f[g+3-32];f[g+0+96]=Vn(_,V,f[g-1+96]),f[g+1+96]=f[g+0+64]=Vn(j,_,V),f[g+2+96]=f[g+1+64]=f[g+0+32]=Vn(Z,j,_),f[g+3+96]=f[g+2+64]=f[g+1+32]=f[g+0+0]=Vn(Q,Z,j),f[g+3+64]=f[g+2+32]=f[g+1+0]=Vn(he,Q,Z),f[g+3+32]=f[g+2+0]=Vn(be,he,Q),f[g+3+0]=Vn(je,be,he)}function gn(f,g){var j=f[g+1-32],_=f[g+2-32],V=f[g+3-32],Z=f[g+4-32],Q=f[g+5-32],he=f[g+6-32],be=f[g+7-32];f[g+0+0]=Vn(f[g+0-32],j,_),f[g+1+0]=f[g+0+32]=Vn(j,_,V),f[g+2+0]=f[g+1+32]=f[g+0+64]=Vn(_,V,Z),f[g+3+0]=f[g+2+32]=f[g+1+64]=f[g+0+96]=Vn(V,Z,Q),f[g+3+32]=f[g+2+64]=f[g+1+96]=Vn(Z,Q,he),f[g+3+64]=f[g+2+96]=Vn(Q,he,be),f[g+3+96]=Vn(he,be,be)}function Cn(f,g){var j=f[g-1+0],_=f[g-1+32],V=f[g-1+64],Z=f[g-1-32],Q=f[g+0-32],he=f[g+1-32],be=f[g+2-32],je=f[g+3-32];f[g+0+0]=f[g+1+64]=Z+Q+1>>1,f[g+1+0]=f[g+2+64]=Q+he+1>>1,f[g+2+0]=f[g+3+64]=he+be+1>>1,f[g+3+0]=be+je+1>>1,f[g+0+96]=Vn(V,_,j),f[g+0+64]=Vn(_,j,Z),f[g+0+32]=f[g+1+96]=Vn(j,Z,Q),f[g+1+32]=f[g+2+96]=Vn(Z,Q,he),f[g+2+32]=f[g+3+96]=Vn(Q,he,be),f[g+3+32]=Vn(he,be,je)}function li(f,g){var j=f[g+0-32],_=f[g+1-32],V=f[g+2-32],Z=f[g+3-32],Q=f[g+4-32],he=f[g+5-32],be=f[g+6-32],je=f[g+7-32];f[g+0+0]=j+_+1>>1,f[g+1+0]=f[g+0+64]=_+V+1>>1,f[g+2+0]=f[g+1+64]=V+Z+1>>1,f[g+3+0]=f[g+2+64]=Z+Q+1>>1,f[g+0+32]=Vn(j,_,V),f[g+1+32]=f[g+0+96]=Vn(_,V,Z),f[g+2+32]=f[g+1+96]=Vn(V,Z,Q),f[g+3+32]=f[g+2+96]=Vn(Z,Q,he),f[g+3+64]=Vn(Q,he,be),f[g+3+96]=Vn(he,be,je)}function hn(f,g){var j=f[g-1+0],_=f[g-1+32],V=f[g-1+64],Z=f[g-1+96];f[g+0+0]=j+_+1>>1,f[g+2+0]=f[g+0+32]=_+V+1>>1,f[g+2+32]=f[g+0+64]=V+Z+1>>1,f[g+1+0]=Vn(j,_,V),f[g+3+0]=f[g+1+32]=Vn(_,V,Z),f[g+3+32]=f[g+1+64]=Vn(V,Z,Z),f[g+3+64]=f[g+2+64]=f[g+0+96]=f[g+1+96]=f[g+2+96]=f[g+3+96]=Z}function ci(f,g){var j=f[g-1+0],_=f[g-1+32],V=f[g-1+64],Z=f[g-1+96],Q=f[g-1-32],he=f[g+0-32],be=f[g+1-32],je=f[g+2-32];f[g+0+0]=f[g+2+32]=j+Q+1>>1,f[g+0+32]=f[g+2+64]=_+j+1>>1,f[g+0+64]=f[g+2+96]=V+_+1>>1,f[g+0+96]=Z+V+1>>1,f[g+3+0]=Vn(he,be,je),f[g+2+0]=Vn(Q,he,be),f[g+1+0]=f[g+3+32]=Vn(j,Q,he),f[g+1+32]=f[g+3+64]=Vn(_,j,Q),f[g+1+64]=f[g+3+96]=Vn(V,_,j),f[g+1+96]=Vn(Z,V,_)}function yn(f,g){var j;for(j=0;8>j;++j)s(f,g+32*j,f,g-32,8)}function hu(f,g){var j;for(j=0;8>j;++j)l(f,g,f[g-1],8),g+=32}function Jt(f,g,j){var _;for(_=0;8>_;++_)l(g,j+32*_,f,8)}function _i(f,g){var j,_=8;for(j=0;8>j;++j)_+=f[g+j-32]+f[g-1+32*j];Jt(_>>4,f,g)}function on(f,g){var j,_=4;for(j=0;8>j;++j)_+=f[g+j-32];Jt(_>>3,f,g)}function Xn(f,g){var j,_=4;for(j=0;8>j;++j)_+=f[g-1+32*j];Jt(_>>3,f,g)}function Aa(f,g){Jt(128,f,g)}function Po(f,g,j){var _=f[g-j],V=f[g+0],Z=3*(V-_)+ps[1020+f[g-2*j]-f[g+j]],Q=$i[112+(Z+4>>3)];f[g-j]=cr[255+_+$i[112+(Z+3>>3)]],f[g+0]=cr[255+V-Q]}function Kr(f,g,j,_){var V=f[g+0],Z=f[g+j];return ba[255+f[g-2*j]-f[g-j]]>_||ba[255+Z-V]>_}function Ds(f,g,j,_){return 4*ba[255+f[g-j]-f[g+0]]+ba[255+f[g-2*j]-f[g+j]]<=_}function ho(f,g,j,_,V){var Z=f[g-3*j],Q=f[g-2*j],he=f[g-j],be=f[g+0],je=f[g+j],Ee=f[g+2*j],rt=f[g+3*j];return 4*ba[255+he-be]+ba[255+Q-je]>_?0:ba[255+f[g-4*j]-Z]<=V&&ba[255+Z-Q]<=V&&ba[255+Q-he]<=V&&ba[255+rt-Ee]<=V&&ba[255+Ee-je]<=V&&ba[255+je-be]<=V}function _o(f,g,j,_){var V=2*_+1;for(_=0;16>_;++_)Ds(f,g+_,j,V)&&Po(f,g+_,j)}function Rs(f,g,j,_){var V=2*_+1;for(_=0;16>_;++_)Ds(f,g+_*j,1,V)&&Po(f,g+_*j,1)}function Vl(f,g,j,_){var V;for(V=3;0<V;--V)_o(f,g+=4*j,j,_)}function gl(f,g,j,_){var V;for(V=3;0<V;--V)Rs(f,g+=4,j,_)}function Ks(f,g,j,_,V,Z,Q,he){for(Z=2*Z+1;0<V--;){if(ho(f,g,j,Z,Q))if(Kr(f,g,j,he))Po(f,g,j);else{var be=f,je=g,Ee=j,rt=be[je-2*Ee],Te=be[je-Ee],He=be[je+0],Ye=be[je+Ee],dt=be[je+2*Ee],Qe=27*(pt=ps[1020+3*(He-Te)+ps[1020+rt-Ye]])+63>>7,yt=18*pt+63>>7,pt=9*pt+63>>7;be[je-3*Ee]=cr[255+be[je-3*Ee]+pt],be[je-2*Ee]=cr[255+rt+yt],be[je-Ee]=cr[255+Te+Qe],be[je+0]=cr[255+He-Qe],be[je+Ee]=cr[255+Ye-yt],be[je+2*Ee]=cr[255+dt-pt]}g+=_}}function as(f,g,j,_,V,Z,Q,he){for(Z=2*Z+1;0<V--;){if(ho(f,g,j,Z,Q))if(Kr(f,g,j,he))Po(f,g,j);else{var be=f,je=g,Ee=j,rt=be[je-Ee],Te=be[je+0],He=be[je+Ee],Ye=$i[112+(4+(dt=3*(Te-rt))>>3)],dt=$i[112+(dt+3>>3)],Qe=Ye+1>>1;be[je-2*Ee]=cr[255+be[je-2*Ee]+Qe],be[je-Ee]=cr[255+rt+dt],be[je+0]=cr[255+Te-Ye],be[je+Ee]=cr[255+He-Qe]}g+=_}}function gu(f,g,j,_,V,Z){Ks(f,g,j,1,16,_,V,Z)}function bn(f,g,j,_,V,Z){Ks(f,g,1,j,16,_,V,Z)}function os(f,g,j,_,V,Z){var Q;for(Q=3;0<Q;--Q)as(f,g+=4*j,j,1,16,_,V,Z)}function S(f,g,j,_,V,Z){var Q;for(Q=3;0<Q;--Q)as(f,g+=4,1,j,16,_,V,Z)}function U(f,g,j,_,V,Z,Q,he){Ks(f,g,V,1,8,Z,Q,he),Ks(j,_,V,1,8,Z,Q,he)}function Se(f,g,j,_,V,Z,Q,he){Ks(f,g,1,V,8,Z,Q,he),Ks(j,_,1,V,8,Z,Q,he)}function Be(f,g,j,_,V,Z,Q,he){as(f,g+4*V,V,1,8,Z,Q,he),as(j,_+4*V,V,1,8,Z,Q,he)}function Ve(f,g,j,_,V,Z,Q,he){as(f,g+4,1,V,8,Z,Q,he),as(j,_+4,1,V,8,Z,Q,he)}function ut(){this.ba=new Nn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ot,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jn(){this.ua=0,this.Wa=new Qt,this.vb=new Qt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Pe,this.yc=new $}function vn(){this.xb=this.a=0,this.l=new Ps,this.ca=new Nn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jn,this.ab=0,this.gc=v(4,sn),this.Oc=0}function ni(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ps,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wi(f,g,j,_,V,Z,Q){for(f=f==null?0:f[g+0],g=0;g<Q;++g)V[Z+g]=f+j[_+g]&255,f=V[Z+g]}function qr(f,g,j,_,V,Z,Q){var he;if(f==null)wi(null,null,j,_,V,Z,Q);else for(he=0;he<Q;++he)V[Z+he]=f[g+he]+j[_+he]&255}function Di(f,g,j,_,V,Z,Q){if(f==null)wi(null,null,j,_,V,Z,Q);else{var he,be=f[g+0],je=be,Ee=be;for(he=0;he<Q;++he)je=Ee+(be=f[g+he])-je,Ee=j[_+he]+(-256&je?0>je?0:255:je)&255,je=be,V[Z+he]=Ee}}function Xi(f,g,j,_){var V=g.width,Z=g.o;if(r(f!=null&&g!=null),0>j||0>=_||j+_>Z)return null;if(!f.Cc){if(f.ga==null){var Q;if(f.ga=new ni,(Q=f.ga==null)||(Q=g.width*g.o,r(f.Gb.length==0),f.Gb=d(Q),f.Uc=0,f.Gb==null?Q=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,Q=1),Q=!Q),!Q){Q=f.ga;var he=f.Fa,be=f.P,je=f.qc,Ee=f.mb,rt=f.nb,Te=be+1,He=je-1,Ye=Q.l;if(r(he!=null&&Ee!=null&&g!=null),ol[0]=null,ol[1]=wi,ol[2]=qr,ol[3]=Di,Q.ca=Ee,Q.tb=rt,Q.c=g.width,Q.i=g.height,r(0<Q.c&&0<Q.i),1>=je)g=0;else if(Q.$a=3&he[be+0],Q.Z=he[be+0]>>2&3,Q.Lc=he[be+0]>>4&3,be=he[be+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||be)g=0;else if(Ye.put=Ft,Ye.ac=Gi,Ye.bc=Pi,Ye.ma=Q,Ye.width=g.width,Ye.height=g.height,Ye.Da=g.Da,Ye.v=g.v,Ye.va=g.va,Ye.j=g.j,Ye.o=g.o,Q.$a)e:{r(Q.$a==1),g=pl();t:for(;;){if(g==null){g=0;break e}if(r(Q!=null),Q.mc=g,g.c=Q.c,g.i=Q.i,g.l=Q.l,g.l.ma=Q,g.l.width=Q.c,g.l.height=Q.i,g.a=0,Ce(g.m,he,Te,He),!ko(Q.c,Q.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&Gn(g.s)?(Q.ic=1,he=g.c*g.i,g.Ta=null,g.Ua=0,g.V=d(he),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(Q.ic=0,g=No(g,Q.c)),!g))break t;g=1;break e}Q.mc=null,g=0}else g=He>=Q.c*Q.i;Q=!g}if(Q)return null;f.ga.Lc!=1?f.Ga=0:_=Z-j}r(f.ga!=null),r(j+_<=Z);e:{if(g=(he=f.ga).c,Z=he.l.o,he.$a==0){if(Te=f.rc,He=f.Vc,Ye=f.Fa,be=f.P+1+j*g,je=f.mb,Ee=f.nb+j*g,r(be<=f.P+f.qc),he.Z!=0)for(r(ol[he.Z]!=null),Q=0;Q<_;++Q)ol[he.Z](Te,He,Ye,be,je,Ee,g),Te=je,He=Ee,Ee+=g,be+=g;else for(Q=0;Q<_;++Q)s(je,Ee,Ye,be,g),Te=je,He=Ee,Ee+=g,be+=g;f.rc=Te,f.Vc=He}else{if(r(he.mc!=null),g=j+_,r((Q=he.mc)!=null),r(g<=Q.i),Q.C>=g)g=1;else if(he.ic||ya(),he.ic){he=Q.V,Te=Q.Ba,He=Q.c;var dt=Q.i,Qe=(Ye=1,be=Q.$/He,je=Q.$%He,Ee=Q.m,rt=Q.s,Q.$),yt=He*dt,pt=He*g,bt=rt.wc,Nt=Qe<pt?On(rt,je,be):null;r(Qe<=yt),r(g<=dt),r(Gn(rt));t:for(;;){for(;!Ee.h&&Qe<pt;){if(je&bt||(Nt=On(rt,je,be)),r(Nt!=null),ee(Ee),256>(dt=Vt(Nt.G[0],Nt.H[0],Ee)))he[Te+Qe]=dt,++Qe,++je>=He&&(je=0,++be<=g&&!(be%16)&&Li(Q,be));else{if(!(280>dt)){Ye=0;break t}dt=Et(dt-256,Ee);var fn,cn=Vt(Nt.G[4],Nt.H[4],Ee);if(ee(Ee),!(Qe>=(cn=Ke(He,cn=Et(cn,Ee)))&&yt-Qe>=dt)){Ye=0;break t}for(fn=0;fn<dt;++fn)he[Te+Qe+fn]=he[Te+Qe+fn-cn];for(Qe+=dt,je+=dt;je>=He;)je-=He,++be<=g&&!(be%16)&&Li(Q,be);Qe<pt&&je&bt&&(Nt=On(rt,je,be))}r(Ee.h==te(Ee))}Li(Q,be>g?g:be);break t}!Ye||Ee.h&&Qe<yt?(Ye=0,Q.a=Ee.h?5:3):Q.$=Qe,g=Ye}else g=tr(Q,Q.V,Q.Ba,Q.c,Q.i,g,is);if(!g){_=0;break e}}j+_>=Z&&(f.Cc=1),_=1}if(!_)return null;if(f.Cc&&((_=f.ga)!=null&&(_.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+j*V}function Mi(f,g,j,_,V,Z){for(;0<V--;){var Q,he=f,be=g+(j?1:0),je=f,Ee=g+(j?0:3);for(Q=0;Q<_;++Q){var rt=je[Ee+4*Q];rt!=255&&(rt*=32897,he[be+4*Q+0]=he[be+4*Q+0]*rt>>23,he[be+4*Q+1]=he[be+4*Q+1]*rt>>23,he[be+4*Q+2]=he[be+4*Q+2]*rt>>23)}g+=Z}}function Nr(f,g,j,_,V){for(;0<_--;){var Z;for(Z=0;Z<j;++Z){var Q=f[g+2*Z+0],he=15&(je=f[g+2*Z+1]),be=4369*he,je=(240&je|je>>4)*be>>16;f[g+2*Z+0]=(240&Q|Q>>4)*be>>16&240|(15&Q|Q<<4)*be>>16>>4&15,f[g+2*Z+1]=240&je|he}g+=V}}function sr(f,g,j,_,V,Z,Q,he){var be,je,Ee=255;for(je=0;je<V;++je){for(be=0;be<_;++be){var rt=f[g+be];Z[Q+4*be]=rt,Ee&=rt}g+=j,Q+=he}return Ee!=255}function Wo(f,g,j,_,V){var Z;for(Z=0;Z<V;++Z)j[_+Z]=f[g+Z]>>8}function ya(){nl=Mi,hr=Nr,Ti=sr,Vr=Wo}function Ls(f,g,j){E[f]=function(_,V,Z,Q,he,be,je,Ee,rt,Te,He,Ye,dt,Qe,yt,pt,bt){var Nt,fn=bt-1>>1,cn=he[be+0]|je[Ee+0]<<16,Qn=rt[Te+0]|He[Ye+0]<<16;r(_!=null);var pn=3*cn+Qn+131074>>2;for(g(_[V+0],255&pn,pn>>16,dt,Qe),Z!=null&&(pn=3*Qn+cn+131074>>2,g(Z[Q+0],255&pn,pn>>16,yt,pt)),Nt=1;Nt<=fn;++Nt){var Ln=he[be+Nt]|je[Ee+Nt]<<16,Ci=rt[Te+Nt]|He[Ye+Nt]<<16,$n=cn+Ln+Qn+Ci+524296,tn=$n+2*(Ln+Qn)>>3;pn=tn+cn>>1,cn=($n=$n+2*(cn+Ci)>>3)+Ln>>1,g(_[V+2*Nt-1],255&pn,pn>>16,dt,Qe+(2*Nt-1)*j),g(_[V+2*Nt-0],255&cn,cn>>16,dt,Qe+(2*Nt-0)*j),Z!=null&&(pn=$n+Qn>>1,cn=tn+Ci>>1,g(Z[Q+2*Nt-1],255&pn,pn>>16,yt,pt+(2*Nt-1)*j),g(Z[Q+2*Nt+0],255&cn,cn>>16,yt,pt+(2*Nt+0)*j)),cn=Ln,Qn=Ci}1&bt||(pn=3*cn+Qn+131074>>2,g(_[V+bt-1],255&pn,pn>>16,dt,Qe+(bt-1)*j),Z!=null&&(pn=3*Qn+cn+131074>>2,g(Z[Q+bt-1],255&pn,pn>>16,yt,pt+(bt-1)*j)))}}function da(){Rr[Yc]=sa,Rr[Ua]=pa,Rr[zc]=sl,Rr[bo]=yu,Rr[cc]=jl,Rr[il]=mr,Rr[ml]=_a,Rr[Us]=pa,Rr[$l]=yu,Rr[hs]=jl,Rr[bl]=mr}function Ms(f){return f&-16384?0>f?0:255:f>>Ra}function Dr(f,g){return Ms((19077*f>>8)+(26149*g>>8)-14234)}function Ja(f,g,j){return Ms((19077*f>>8)-(6419*g>>8)-(13320*j>>8)+8708)}function fa(f,g){return Ms((19077*f>>8)+(33050*g>>8)-17685)}function Do(f,g,j,_,V){_[V+0]=Dr(f,j),_[V+1]=Ja(f,g,j),_[V+2]=fa(f,g)}function ui(f,g,j,_,V){_[V+0]=fa(f,g),_[V+1]=Ja(f,g,j),_[V+2]=Dr(f,j)}function $o(f,g,j,_,V){var Z=Ja(f,g,j);g=Z<<3&224|fa(f,g)>>3,_[V+0]=248&Dr(f,j)|Z>>5,_[V+1]=g}function Hl(f,g,j,_,V){var Z=240&fa(f,g)|15;_[V+0]=240&Dr(f,j)|Ja(f,g,j)>>4,_[V+1]=Z}function kc(f,g,j,_,V){_[V+0]=255,Do(f,g,j,_,V+1)}function Ro(f,g,j,_,V){ui(f,g,j,_,V),_[V+3]=255}function za(f,g,j,_,V){Do(f,g,j,_,V),_[V+3]=255}function ss(f,g,j){E[f]=function(_,V,Z,Q,he,be,je,Ee,rt){for(var Te=Ee+(-2&rt)*j;Ee!=Te;)g(_[V+0],Z[Q+0],he[be+0],je,Ee),g(_[V+1],Z[Q+0],he[be+0],je,Ee+j),V+=2,++Q,++be,Ee+=2*j;1&rt&&g(_[V+0],Z[Q+0],he[be+0],je,Ee)}}function Wl(f,g,j){return j==0?f==0?g==0?6:5:g==0?4:0:j}function ls(f,g,j,_,V){switch(f>>>30){case 3:fs(g,j,_,V,0);break;case 2:no(g,j,_,V);break;case 1:Ki(g,j,_,V)}}function Qa(f,g){var j,_,V=g.M,Z=g.Nb,Q=f.oc,he=f.pc+40,be=f.oc,je=f.pc+584,Ee=f.oc,rt=f.pc+600;for(j=0;16>j;++j)Q[he+32*j-1]=129;for(j=0;8>j;++j)be[je+32*j-1]=129,Ee[rt+32*j-1]=129;for(0<V?Q[he-1-32]=be[je-1-32]=Ee[rt-1-32]=129:(l(Q,he-32-1,127,21),l(be,je-32-1,127,9),l(Ee,rt-32-1,127,9)),_=0;_<f.za;++_){var Te=g.ya[g.aa+_];if(0<_){for(j=-1;16>j;++j)s(Q,he+32*j-4,Q,he+32*j+12,4);for(j=-1;8>j;++j)s(be,je+32*j-4,be,je+32*j+4,4),s(Ee,rt+32*j-4,Ee,rt+32*j+4,4)}var He=f.Gd,Ye=f.Hd+_,dt=Te.ad,Qe=Te.Hc;if(0<V&&(s(Q,he-32,He[Ye].y,0,16),s(be,je-32,He[Ye].f,0,8),s(Ee,rt-32,He[Ye].ea,0,8)),Te.Za){var yt=Q,pt=he-32+16;for(0<V&&(_>=f.za-1?l(yt,pt,He[Ye].y[15],4):s(yt,pt,He[Ye+1].y,0,4)),j=0;4>j;j++)yt[pt+128+j]=yt[pt+256+j]=yt[pt+384+j]=yt[pt+0+j];for(j=0;16>j;++j,Qe<<=2)yt=Q,pt=he+Bi[j],Jr[Te.Ob[j]](yt,pt),ls(Qe,dt,16*+j,yt,pt)}else if(yt=Wl(_,V,Te.Ob[0]),So[yt](Q,he),Qe!=0)for(j=0;16>j;++j,Qe<<=2)ls(Qe,dt,16*+j,Q,he+Bi[j]);for(j=Te.Gc,yt=Wl(_,V,Te.Dd),Qo[yt](be,je),Qo[yt](Ee,rt),Qe=dt,yt=be,pt=je,255&(Te=0|j)&&(170&Te?Xo(Qe,256,yt,pt):Ii(Qe,256,yt,pt)),Te=Ee,Qe=rt,255&(j>>=8)&&(170&j?Xo(dt,320,Te,Qe):Ii(dt,320,Te,Qe)),V<f.Ub-1&&(s(He[Ye].y,0,Q,he+480,16),s(He[Ye].f,0,be,je+224,8),s(He[Ye].ea,0,Ee,rt+224,8)),j=8*Z*f.B,He=f.sa,Ye=f.ta+16*_+16*Z*f.R,dt=f.qa,Te=f.ra+8*_+j,Qe=f.Ha,yt=f.Ia+8*_+j,j=0;16>j;++j)s(He,Ye+j*f.R,Q,he+32*j,16);for(j=0;8>j;++j)s(dt,Te+j*f.B,be,je+32*j,8),s(Qe,yt+j*f.B,Ee,rt+32*j,8)}}function na(f,g,j,_,V,Z,Q,he,be){var je=[0],Ee=[0],rt=0,Te=be!=null?be.kd:0,He=be??new wt;if(f==null||12>j)return 7;He.data=f,He.w=g,He.ha=j,g=[g],j=[j],He.gb=[He.gb];e:{var Ye=g,dt=j,Qe=He.gb;if(r(f!=null),r(dt!=null),r(Qe!=null),Qe[0]=0,12<=dt[0]&&!a(f,Ye[0],"RIFF")){if(a(f,Ye[0]+8,"WEBP")){Qe=3;break e}var yt=It(f,Ye[0]+4);if(12>yt||4294967286<yt){Qe=3;break e}if(Te&&yt>dt[0]-8){Qe=7;break e}Qe[0]=yt,Ye[0]+=12,dt[0]-=12}Qe=0}if(Qe!=0)return Qe;for(yt=0<He.gb[0],j=j[0];;){e:{var pt=f;dt=g,Qe=j;var bt=je,Nt=Ee,fn=Ye=[0];if((pn=rt=[rt])[0]=0,8>Qe[0])Qe=7;else{if(!a(pt,dt[0],"VP8X")){if(It(pt,dt[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var cn=It(pt,dt[0]+8),Qn=1+kt(pt,dt[0]+12);if(2147483648<=Qn*(pt=1+kt(pt,dt[0]+15))){Qe=3;break e}fn!=null&&(fn[0]=cn),bt!=null&&(bt[0]=Qn),Nt!=null&&(Nt[0]=pt),dt[0]+=18,Qe[0]-=18,pn[0]=1}Qe=0}}if(rt=rt[0],Ye=Ye[0],Qe!=0)return Qe;if(dt=!!(2&Ye),!yt&&rt)return 3;if(Z!=null&&(Z[0]=!!(16&Ye)),Q!=null&&(Q[0]=dt),he!=null&&(he[0]=0),Q=je[0],Ye=Ee[0],rt&&dt&&be==null){Qe=0;break}if(4>j){Qe=7;break}if(yt&&rt||!yt&&!rt&&!a(f,g[0],"ALPH")){j=[j],He.na=[He.na],He.P=[He.P],He.Sa=[He.Sa];e:{cn=f,Qe=g,yt=j;var pn=He.gb;bt=He.na,Nt=He.P,fn=He.Sa,Qn=22,r(cn!=null),r(yt!=null),pt=Qe[0];var Ln=yt[0];for(r(bt!=null),r(fn!=null),bt[0]=null,Nt[0]=null,fn[0]=0;;){if(Qe[0]=pt,yt[0]=Ln,8>Ln){Qe=7;break e}var Ci=It(cn,pt+4);if(4294967286<Ci){Qe=3;break e}var $n=8+Ci+1&-2;if(Qn+=$n,0<pn&&Qn>pn){Qe=3;break e}if(!a(cn,pt,"VP8 ")||!a(cn,pt,"VP8L")){Qe=0;break e}if(Ln[0]<$n){Qe=7;break e}a(cn,pt,"ALPH")||(bt[0]=cn,Nt[0]=pt+8,fn[0]=Ci),pt+=$n,Ln-=$n}}if(j=j[0],He.na=He.na[0],He.P=He.P[0],He.Sa=He.Sa[0],Qe!=0)break}j=[j],He.Ja=[He.Ja],He.xa=[He.xa];e:if(pn=f,Qe=g,yt=j,bt=He.gb[0],Nt=He.Ja,fn=He.xa,cn=Qe[0],pt=!a(pn,cn,"VP8 "),Qn=!a(pn,cn,"VP8L"),r(pn!=null),r(yt!=null),r(Nt!=null),r(fn!=null),8>yt[0])Qe=7;else{if(pt||Qn){if(pn=It(pn,cn+4),12<=bt&&pn>bt-12){Qe=3;break e}if(Te&&pn>yt[0]-8){Qe=7;break e}Nt[0]=pn,Qe[0]+=8,yt[0]-=8,fn[0]=Qn}else fn[0]=5<=yt[0]&&pn[cn+0]==47&&!(pn[cn+4]>>5),Nt[0]=yt[0];Qe=0}if(j=j[0],He.Ja=He.Ja[0],He.xa=He.xa[0],g=g[0],Qe!=0)break;if(4294967286<He.Ja)return 3;if(he==null||dt||(he[0]=He.xa?2:1),Q=[Q],Ye=[Ye],He.xa){if(5>j){Qe=7;break}he=Q,Te=Ye,dt=Z,f==null||5>j?f=0:5<=j&&f[g+0]==47&&!(f[g+4]>>5)?(yt=[0],pn=[0],bt=[0],Ce(Nt=new W,f,g,j),gi(Nt,yt,pn,bt)?(he!=null&&(he[0]=yt[0]),Te!=null&&(Te[0]=pn[0]),dt!=null&&(dt[0]=bt[0]),f=1):f=0):f=0}else{if(10>j){Qe=7;break}he=Ye,f==null||10>j||!_s(f,g+3,j-3)?f=0:(Te=f[g+0]|f[g+1]<<8|f[g+2]<<16,dt=16383&(f[g+7]<<8|f[g+6]),f=16383&(f[g+9]<<8|f[g+8]),1&Te||3<(Te>>1&7)||!(Te>>4&1)||Te>>5>=He.Ja||!dt||!f?f=0:(Q&&(Q[0]=dt),he&&(he[0]=f),f=1))}if(!f||(Q=Q[0],Ye=Ye[0],rt&&(je[0]!=Q||Ee[0]!=Ye)))return 3;be!=null&&(be[0]=He,be.offset=g-be.w,r(4294967286>g-be.w),r(be.offset==be.ha-j));break}return Qe==0||Qe==7&&rt&&be==null?(Z!=null&&(Z[0]|=He.na!=null&&0<He.na.length),_!=null&&(_[0]=Q),V!=null&&(V[0]=Ye),0):Qe}function Lo(f,g,j){var _=g.width,V=g.height,Z=0,Q=0,he=_,be=V;if(g.Da=f!=null&&0<f.Da,g.Da&&(he=f.cd,be=f.bd,Z=f.v,Q=f.j,11>j||(Z&=-2,Q&=-2),0>Z||0>Q||0>=he||0>=be||Z+he>_||Q+be>V))return 0;if(g.v=Z,g.j=Q,g.va=Z+he,g.o=Q+be,g.U=he,g.T=be,g.da=f!=null&&0<f.da,g.da){if(!Wt(he,be,j=[f.ib],Z=[f.hb]))return 0;g.ib=j[0],g.hb=Z[0]}return g.ob=f!=null&&f.ob,g.Kb=f==null||!f.Sd,g.da&&(g.ob=g.ib<3*_/4&&g.hb<3*V/4,g.Kb=0),1}function Is(f){if(f==null)return 2;if(11>f.S){var g=f.f.RGBA;g.fb+=(f.height-1)*g.A,g.A=-g.A}else g=f.f.kb,f=f.height,g.O+=(f-1)*g.fa,g.fa=-g.fa,g.N+=(f-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(f-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(f-1)*g.lb,g.lb=-g.lb);return 0}function Yo(f,g,j,_){if(_==null||0>=f||0>=g)return 2;if(j!=null){if(j.Da){var V=j.cd,Z=j.bd,Q=-2&j.v,he=-2&j.j;if(0>Q||0>he||0>=V||0>=Z||Q+V>f||he+Z>g)return 2;f=V,g=Z}if(j.da){if(!Wt(f,g,V=[j.ib],Z=[j.hb]))return 2;f=V[0],g=Z[0]}}_.width=f,_.height=g;e:{var be=_.width,je=_.height;if(f=_.S,0>=be||0>=je||!(f>=Yc&&13>f))f=2;else{if(0>=_.Rd&&_.sd==null){Q=Z=V=g=0;var Ee=(he=be*jo[f])*je;if(11>f||(Z=(je+1)/2*(g=(be+1)/2),f==12&&(Q=(V=be)*je)),(je=d(Ee+2*Z+Q))==null){f=1;break e}_.sd=je,11>f?((be=_.f.RGBA).eb=je,be.fb=0,be.A=he,be.size=Ee):((be=_.f.kb).y=je,be.O=0,be.fa=he,be.Fd=Ee,be.f=je,be.N=0+Ee,be.Ab=g,be.Cd=Z,be.ea=je,be.W=0+Ee+Z,be.Db=g,be.Ed=Z,f==12&&(be.F=je,be.J=0+Ee+2*Z),be.Tc=Q,be.lb=V)}if(g=1,V=_.S,Z=_.width,Q=_.height,V>=Yc&&13>V)if(11>V)f=_.f.RGBA,g&=(he=Math.abs(f.A))*(Q-1)+Z<=f.size,g&=he>=Z*jo[V],g&=f.eb!=null;else{f=_.f.kb,he=(Z+1)/2,Ee=(Q+1)/2,be=Math.abs(f.fa),je=Math.abs(f.Ab);var rt=Math.abs(f.Db),Te=Math.abs(f.lb),He=Te*(Q-1)+Z;g&=be*(Q-1)+Z<=f.Fd,g&=je*(Ee-1)+he<=f.Cd,g=(g&=rt*(Ee-1)+he<=f.Ed)&be>=Z&je>=he&rt>=he,g&=f.y!=null,g&=f.f!=null,g&=f.ea!=null,V==12&&(g&=Te>=Z,g&=He<=f.Tc,g&=f.F!=null)}else g=0;f=g?0:2}}return f!=0||j!=null&&j.fd&&(f=Is(_)),f}var Go=64,eo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ia=24,cs=32,go=8,Ni=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Gt("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(f){return f},E.Predictor2=function(f,g,j){return g[j+0]},E.Predictor3=function(f,g,j){return g[j+1]},E.Predictor4=function(f,g,j){return g[j-1]},E.Predictor5=function(f,g,j){return Zt(Zt(f,g[j+1]),g[j+0])},E.Predictor6=function(f,g,j){return Zt(f,g[j-1])},E.Predictor7=function(f,g,j){return Zt(f,g[j+0])},E.Predictor8=function(f,g,j){return Zt(g[j-1],g[j+0])},E.Predictor9=function(f,g,j){return Zt(g[j+0],g[j+1])},E.Predictor10=function(f,g,j){return Zt(Zt(f,g[j-1]),Zt(g[j+0],g[j+1]))},E.Predictor11=function(f,g,j){var _=g[j+0];return 0>=Le(_>>24&255,f>>24&255,(g=g[j-1])>>24&255)+Le(_>>16&255,f>>16&255,g>>16&255)+Le(_>>8&255,f>>8&255,g>>8&255)+Le(255&_,255&f,255&g)?_:f},E.Predictor12=function(f,g,j){var _=g[j+0];return(_n((f>>24&255)+(_>>24&255)-((g=g[j-1])>>24&255))<<24|_n((f>>16&255)+(_>>16&255)-(g>>16&255))<<16|_n((f>>8&255)+(_>>8&255)-(g>>8&255))<<8|_n((255&f)+(255&_)-(255&g)))>>>0},E.Predictor13=function(f,g,j){var _=g[j-1];return(Rt((f=Zt(f,g[j+0]))>>24&255,_>>24&255)<<24|Rt(f>>16&255,_>>16&255)<<16|Rt(f>>8&255,_>>8&255)<<8|Rt(255&f,255&_))>>>0};var us=E.PredictorAdd0;E.PredictorAdd1=ke,Gt("Predictor2","PredictorAdd2"),Gt("Predictor3","PredictorAdd3"),Gt("Predictor4","PredictorAdd4"),Gt("Predictor5","PredictorAdd5"),Gt("Predictor6","PredictorAdd6"),Gt("Predictor7","PredictorAdd7"),Gt("Predictor8","PredictorAdd8"),Gt("Predictor9","PredictorAdd9"),Gt("Predictor10","PredictorAdd10"),Gt("Predictor11","PredictorAdd11"),Gt("Predictor12","PredictorAdd12"),Gt("Predictor13","PredictorAdd13");var lr=E.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var wr,Nc=E.ColorIndexInverseTransform,xo=E.MapARGB,Zs=E.VP8LColorIndexInverseTransformAlpha,ma=E.MapAlpha,xl=E.VP8LPredictorsAdd=[];xl.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Ac,Mo,Bs,ds,to,Pa,yo,fs,no,Xo,Ki,Ii,Sr,ra,Js,Os,aa,io,Qs,Es,el,yl,tl,Io,nl,hr,Ti,Vr,Hr=d(511),mo=d(2041),Wc=d(225),Fs=d(767),$c=0,ps=mo,$i=Wc,cr=Fs,ba=Hr,Yc=0,Ua=1,zc=2,bo=3,cc=4,il=5,ml=6,Us=7,$l=8,hs=9,bl=10,vo=[2,3,7],vl=[3,3,11],Ko=[280,256,256,256,40],rl=[0,1,1,1,0],Pc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oa=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zo=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zr=8,wo=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Jo=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],va=null,Yl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_c=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],wl=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],al=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],qa=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],jr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ai=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],So=[],Jr=[],Qo=[],Sl=1,xu=2,ol=[],Rr=[];Ls("UpsampleRgbLinePair",Do,3),Ls("UpsampleBgrLinePair",ui,3),Ls("UpsampleRgbaLinePair",za,4),Ls("UpsampleBgraLinePair",Ro,4),Ls("UpsampleArgbLinePair",kc,4),Ls("UpsampleRgba4444LinePair",Hl,2),Ls("UpsampleRgb565LinePair",$o,2);var sa=E.UpsampleRgbLinePair,sl=E.UpsampleBgrLinePair,pa=E.UpsampleRgbaLinePair,yu=E.UpsampleBgraLinePair,jl=E.UpsampleArgbLinePair,mr=E.UpsampleRgba4444LinePair,_a=E.UpsampleRgb565LinePair,br=16,ro=1<<br-1,Qr=-227,Da=482,Ra=6,La=0,Zi=d(256),Bo=d(256),es=d(256),Tl=d(256),gs=d(Da-Qr),Cl=d(Da-Qr);ss("YuvToRgbRow",Do,3),ss("YuvToBgrRow",ui,3),ss("YuvToRgbaRow",za,4),ss("YuvToBgraRow",Ro,4),ss("YuvToArgbRow",kc,4),ss("YuvToRgba4444Row",Hl,2),ss("YuvToRgb565Row",$o,2);var Bi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Va=[0,2,8],Ma=[8,7,6,4,4,2,2,2,1,1,1,1],ao=1;this.WebPDecodeRGBA=function(f,g,j,_,V){var Z=Ua,Q=new ut,he=new Nn;Q.ba=he,he.S=Z,he.width=[he.width],he.height=[he.height];var be=he.width,je=he.height,Ee=new xn;if(Ee==null||f==null)var rt=2;else r(Ee!=null),rt=na(f,g,j,Ee.width,Ee.height,Ee.Pd,Ee.Qd,Ee.format,null);if(rt!=0?be=0:(be!=null&&(be[0]=Ee.width[0]),je!=null&&(je[0]=Ee.height[0]),be=1),be){he.width=he.width[0],he.height=he.height[0],_!=null&&(_[0]=he.width),V!=null&&(V[0]=he.height);e:{if(_=new Ps,(V=new wt).data=f,V.w=g,V.ha=j,V.kd=1,g=[0],r(V!=null),((f=na(V.data,V.w,V.ha,null,null,null,g,null,V))==0||f==7)&&g[0]&&(f=4),(g=f)==0){if(r(Q!=null),_.data=V.data,_.w=V.w+V.offset,_.ha=V.ha-V.offset,_.put=Ft,_.ac=Gi,_.bc=Pi,_.ma=Q,V.xa){if((f=pl())==null){Q=1;break e}if((function(Te,He){var Ye=[0],dt=[0],Qe=[0];t:for(;;){if(Te==null)return 0;if(He==null)return Te.a=2,0;if(Te.l=He,Te.a=0,Ce(Te.m,He.data,He.w,He.ha),!gi(Te.m,Ye,dt,Qe)){Te.a=3;break t}if(Te.xb=xu,He.width=Ye[0],He.height=dt[0],!ko(Ye[0],dt[0],1,Te,null))break t;return 1}return r(Te.a!=0),0})(f,_)){if(_=(g=Yo(_.width,_.height,Q.Oa,Q.ba))==0){t:{_=f;n:for(;;){if(_==null){_=0;break t}if(r(_.s.yc!=null),r(_.s.Ya!=null),r(0<_.s.Wb),r((j=_.l)!=null),r((V=j.ma)!=null),_.xb!=0){if(_.ca=V.ba,_.tb=V.tb,r(_.ca!=null),!Lo(V.Oa,j,bo)){_.a=2;break n}if(!No(_,j.width)||j.da)break n;if((j.da||Kt(_.ca.S))&&ya(),11>_.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),_.ca.f.kb.F!=null&&ya()),_.Pb&&0<_.s.ua&&_.s.vb.X==null&&!ne(_.s.vb,_.s.Wa.Xa)){_.a=1;break n}_.xb=0}if(!tr(_,_.V,_.Ba,_.c,_.i,j.o,Hi))break n;V.Dc=_.Ma,_=1;break t}r(_.a!=0),_=0}_=!_}_&&(g=f.a)}else g=f.a}else{if((f=new Wn)==null){Q=1;break e}if(f.Fa=V.na,f.P=V.P,f.qc=V.Sa,qo(f,_)){if((g=Yo(_.width,_.height,Q.Oa,Q.ba))==0){if(f.Aa=0,j=Q.Oa,r((V=f)!=null),j!=null){if(0<(be=0>(be=j.Md)?0:100<be?255:255*be/100)){for(je=Ee=0;4>je;++je)12>(rt=V.pb[je]).lc&&(rt.ia=be*Ma[0>rt.lc?0:rt.lc]>>3),Ee|=rt.ia;Ee&&(alert("todo:VP8InitRandom"),V.ia=1)}V.Ga=j.Id,100<V.Ga?V.Ga=100:0>V.Ga&&(V.Ga=0)}(function(Te,He){if(Te==null)return 0;if(He==null)return Hn(Te,2,"NULL VP8Io parameter in VP8Decode().");if(!Te.cb&&!qo(Te,He))return 0;if(r(Te.cb),He.ac==null||He.ac(He)){He.ob&&(Te.L=0);var Ye=Va[Te.L];if(Te.L==2?(Te.yb=0,Te.zb=0):(Te.yb=He.v-Ye>>4,Te.zb=He.j-Ye>>4,0>Te.yb&&(Te.yb=0),0>Te.zb&&(Te.zb=0)),Te.Va=He.o+15+Ye>>4,Te.Hb=He.va+15+Ye>>4,Te.Hb>Te.za&&(Te.Hb=Te.za),Te.Va>Te.Ub&&(Te.Va=Te.Ub),0<Te.L){var dt=Te.ed;for(Ye=0;4>Ye;++Ye){var Qe;if(Te.Qa.Cb){var yt=Te.Qa.Lb[Ye];Te.Qa.Fb||(yt+=dt.Tb)}else yt=dt.Tb;for(Qe=0;1>=Qe;++Qe){var pt=Te.gd[Ye][Qe],bt=yt;if(dt.Pc&&(bt+=dt.vd[0],Qe&&(bt+=dt.od[0])),0<(bt=0>bt?0:63<bt?63:bt)){var Nt=bt;0<dt.wb&&(Nt=4<dt.wb?Nt>>2:Nt>>1)>9-dt.wb&&(Nt=9-dt.wb),1>Nt&&(Nt=1),pt.dd=Nt,pt.tc=2*bt+Nt,pt.ld=40<=bt?2:15<=bt?1:0}else pt.tc=0;pt.La=Qe}}}Ye=0}else Hn(Te,6,"Frame setup failed"),Ye=Te.a;if(Ye=Ye==0){if(Ye){Te.$c=0,0<Te.Aa||(Te.Ic=ao);t:{Ye=Te.Ic,dt=4*(Nt=Te.za);var fn=32*Nt,cn=Nt+1,Qn=0<Te.L?Nt*(0<Te.Aa?2:1):0,pn=(Te.Aa==2?2:1)*Nt;if((pt=dt+832+(Qe=3*(16*Ye+Va[Te.L])/2*fn)+(yt=Te.Fa!=null&&0<Te.Fa.length?Te.Kc.c*Te.Kc.i:0))!=pt)Ye=0;else{if(pt>Te.Vb){if(Te.Vb=0,Te.Ec=d(pt),Te.Fc=0,Te.Ec==null){Ye=Hn(Te,1,"no memory during frame initialization.");break t}Te.Vb=pt}pt=Te.Ec,bt=Te.Fc,Te.Ac=pt,Te.Bc=bt,bt+=dt,Te.Gd=v(fn,Ao),Te.Hd=0,Te.rb=v(cn+1,Xa),Te.sb=1,Te.wa=Qn?v(Qn,xi):null,Te.Y=0,Te.D.Nb=0,Te.D.wa=Te.wa,Te.D.Y=Te.Y,0<Te.Aa&&(Te.D.Y+=Nt),r(!0),Te.oc=pt,Te.pc=bt,bt+=832,Te.ya=v(pn,As),Te.aa=0,Te.D.ya=Te.ya,Te.D.aa=Te.aa,Te.Aa==2&&(Te.D.aa+=Nt),Te.R=16*Nt,Te.B=8*Nt,Nt=(fn=Va[Te.L])*Te.R,fn=fn/2*Te.B,Te.sa=pt,Te.ta=bt+Nt,Te.qa=Te.sa,Te.ra=Te.ta+16*Ye*Te.R+fn,Te.Ha=Te.qa,Te.Ia=Te.ra+8*Ye*Te.B+fn,Te.$c=0,bt+=Qe,Te.mb=yt?pt:null,Te.nb=yt?bt:null,r(bt+yt<=Te.Fc+Te.Vb),Oa(Te),l(Te.Ac,Te.Bc,0,dt),Ye=1}}if(Ye){if(He.ka=0,He.y=Te.sa,He.O=Te.ta,He.f=Te.qa,He.N=Te.ra,He.ea=Te.Ha,He.Vd=Te.Ia,He.fa=Te.R,He.Rc=Te.B,He.F=null,He.J=0,!$c){for(Ye=-255;255>=Ye;++Ye)Hr[255+Ye]=0>Ye?-Ye:Ye;for(Ye=-1020;1020>=Ye;++Ye)mo[1020+Ye]=-128>Ye?-128:127<Ye?127:Ye;for(Ye=-112;112>=Ye;++Ye)Wc[112+Ye]=-16>Ye?-16:15<Ye?15:Ye;for(Ye=-255;510>=Ye;++Ye)Fs[255+Ye]=0>Ye?0:255<Ye?255:Ye;$c=1}yo=ua,fs=Ea,Xo=Na,Ki=hl,Ii=Ka,no=sc,Sr=gu,ra=bn,Js=U,Os=Se,aa=os,io=S,Qs=Be,Es=Ve,el=_o,yl=Rs,tl=Vl,Io=gl,Jr[0]=lc,Jr[1]=zo,Jr[2]=oi,Jr[3]=An,Jr[4]=Za,Jr[5]=Cn,Jr[6]=gn,Jr[7]=li,Jr[8]=ci,Jr[9]=hn,So[0]=Ho,So[1]=Fi,So[2]=Vo,So[3]=Xs,So[4]=or,So[5]=nr,So[6]=rs,Qo[0]=_i,Qo[1]=Mt,Qo[2]=yn,Qo[3]=hu,Qo[4]=Xn,Qo[5]=on,Qo[6]=Aa,Ye=1}else Ye=0}Ye&&(Ye=(function(Ln,Ci){for(Ln.M=0;Ln.M<Ln.Va;++Ln.M){var $n,tn=Ln.Jc[Ln.M&Ln.Xb],Ht=Ln.m,ir=Ln;for($n=0;$n<ir.za;++$n){var Dn=Ht,si=ir,Ji=si.Ac,ur=si.Bc+4*$n,dr=si.zc,mi=si.ya[si.aa+$n];if(si.Qa.Bb?mi.$b=Fe(Dn,si.Pa.jb[0])?2+Fe(Dn,si.Pa.jb[2]):Fe(Dn,si.Pa.jb[1]):mi.$b=0,si.kc&&(mi.Ad=Fe(Dn,si.Bd)),mi.Za=!Fe(Dn,145)+0,mi.Za){var fr=mi.Ob,Lr=0;for(si=0;4>si;++si){var Mr,di=dr[0+si];for(Mr=0;4>Mr;++Mr){di=qa[Ji[ur+Mr]][di];for(var ii=wl[Fe(Dn,di[0])];0<ii;)ii=wl[2*ii+Fe(Dn,di[ii])];di=-ii,Ji[ur+Mr]=di}s(fr,Lr,Ji,ur,4),Lr+=4,dr[0+si]=di}}else di=Fe(Dn,156)?Fe(Dn,128)?1:3:Fe(Dn,163)?2:0,mi.Ob[0]=di,l(Ji,ur,di,4),l(dr,0,di,4);mi.Dd=Fe(Dn,142)?Fe(Dn,114)?Fe(Dn,183)?1:3:2:0}if(ir.m.Ka)return Hn(Ln,7,"Premature end-of-partition0 encountered.");for(;Ln.ja<Ln.za;++Ln.ja){if(ir=tn,Dn=(Ht=Ln).rb[Ht.sb-1],Ji=Ht.rb[Ht.sb+Ht.ja],$n=Ht.ya[Ht.aa+Ht.ja],ur=Ht.kc?$n.Ad:0)Dn.la=Ji.la=0,$n.Za||(Dn.Na=Ji.Na=0),$n.Hc=0,$n.Gc=0,$n.ia=0;else{var vr,Ui;if(Dn=Ji,Ji=ir,ur=Ht.Pa.Xc,dr=Ht.ya[Ht.aa+Ht.ja],mi=Ht.pb[dr.$b],si=dr.ad,fr=0,Lr=Ht.rb[Ht.sb-1],di=Mr=0,l(si,fr,0,384),dr.Za)var ha=0,Tr=ur[3];else{ii=d(16);var qi=Dn.Na+Lr.Na;if(qi=va(Ji,ur[1],qi,mi.Eb,0,ii,0),Dn.Na=Lr.Na=(0<qi)+0,1<qi)yo(ii,0,si,fr);else{var Wr=ii[0]+3>>3;for(ii=0;256>ii;ii+=16)si[fr+ii]=Wr}ha=1,Tr=ur[0]}var zi=15&Dn.la,Ar=15&Lr.la;for(ii=0;4>ii;++ii){var $r=1&Ar;for(Wr=Ui=0;4>Wr;++Wr)zi=zi>>1|($r=(qi=va(Ji,Tr,qi=$r+(1&zi),mi.Sc,ha,si,fr))>ha)<<7,Ui=Ui<<2|(3<qi?3:1<qi?2:si[fr+0]!=0),fr+=16;zi>>=4,Ar=Ar>>1|$r<<7,Mr=(Mr<<8|Ui)>>>0}for(Tr=zi,ha=Ar>>4,vr=0;4>vr;vr+=2){for(Ui=0,zi=Dn.la>>4+vr,Ar=Lr.la>>4+vr,ii=0;2>ii;++ii){for($r=1&Ar,Wr=0;2>Wr;++Wr)qi=$r+(1&zi),zi=zi>>1|($r=0<(qi=va(Ji,ur[2],qi,mi.Qc,0,si,fr)))<<3,Ui=Ui<<2|(3<qi?3:1<qi?2:si[fr+0]!=0),fr+=16;zi>>=2,Ar=Ar>>1|$r<<5}di|=Ui<<4*vr,Tr|=zi<<4<<vr,ha|=(240&Ar)<<vr}Dn.la=Tr,Lr.la=ha,dr.Hc=Mr,dr.Gc=di,dr.ia=43690&di?0:mi.ia,ur=!(Mr|di)}if(0<Ht.L&&(Ht.wa[Ht.Y+Ht.ja]=Ht.gd[$n.$b][$n.Za],Ht.wa[Ht.Y+Ht.ja].La|=!ur),ir.Ka)return Hn(Ln,7,"Premature end-of-file encountered.")}if(Oa(Ln),Ht=Ci,ir=1,$n=(tn=Ln).D,Dn=0<tn.L&&tn.M>=tn.zb&&tn.M<=tn.Va,tn.Aa==0)t:{if($n.M=tn.M,$n.uc=Dn,Qa(tn,$n),ir=1,$n=(Ui=tn.D).Nb,Dn=(di=Va[tn.L])*tn.R,Ji=di/2*tn.B,ii=16*$n*tn.R,Wr=8*$n*tn.B,ur=tn.sa,dr=tn.ta-Dn+ii,mi=tn.qa,si=tn.ra-Ji+Wr,fr=tn.Ha,Lr=tn.Ia-Ji+Wr,Ar=(zi=Ui.M)==0,Mr=zi>=tn.Va-1,tn.Aa==2&&Qa(tn,Ui),Ui.uc)for($r=(qi=tn).D.M,r(qi.D.uc),Ui=qi.yb;Ui<qi.Hb;++Ui){ha=Ui,Tr=$r;var pr=(Oi=(ea=qi).D).Nb;vr=ea.R;var Oi=Oi.wa[Oi.Y+ha],wa=ea.sa,Yr=ea.ta+16*pr*vr+16*ha,kn=Oi.dd,zn=Oi.tc;if(zn!=0)if(r(3<=zn),ea.L==1)0<ha&&yl(wa,Yr,vr,zn+4),Oi.La&&Io(wa,Yr,vr,zn),0<Tr&&el(wa,Yr,vr,zn+4),Oi.La&&tl(wa,Yr,vr,zn);else{var Ei=ea.B,Ha=ea.qa,Wa=ea.ra+8*pr*Ei+8*ha,Sa=ea.Ha,ea=ea.Ia+8*pr*Ei+8*ha;pr=Oi.ld,0<ha&&(ra(wa,Yr,vr,zn+4,kn,pr),Os(Ha,Wa,Sa,ea,Ei,zn+4,kn,pr)),Oi.La&&(io(wa,Yr,vr,zn,kn,pr),Es(Ha,Wa,Sa,ea,Ei,zn,kn,pr)),0<Tr&&(Sr(wa,Yr,vr,zn+4,kn,pr),Js(Ha,Wa,Sa,ea,Ei,zn+4,kn,pr)),Oi.La&&(aa(wa,Yr,vr,zn,kn,pr),Qs(Ha,Wa,Sa,ea,Ei,zn,kn,pr))}}if(tn.ia&&alert("todo:DitherRow"),Ht.put!=null){if(Ui=16*zi,zi=16*(zi+1),Ar?(Ht.y=tn.sa,Ht.O=tn.ta+ii,Ht.f=tn.qa,Ht.N=tn.ra+Wr,Ht.ea=tn.Ha,Ht.W=tn.Ia+Wr):(Ui-=di,Ht.y=ur,Ht.O=dr,Ht.f=mi,Ht.N=si,Ht.ea=fr,Ht.W=Lr),Mr||(zi-=di),zi>Ht.o&&(zi=Ht.o),Ht.F=null,Ht.J=null,tn.Fa!=null&&0<tn.Fa.length&&Ui<zi&&(Ht.J=Xi(tn,Ht,Ui,zi-Ui),Ht.F=tn.mb,Ht.F==null&&Ht.F.length==0)){ir=Hn(tn,3,"Could not decode alpha data.");break t}Ui<Ht.j&&(di=Ht.j-Ui,Ui=Ht.j,r(!(1&di)),Ht.O+=tn.R*di,Ht.N+=tn.B*(di>>1),Ht.W+=tn.B*(di>>1),Ht.F!=null&&(Ht.J+=Ht.width*di)),Ui<zi&&(Ht.O+=Ht.v,Ht.N+=Ht.v>>1,Ht.W+=Ht.v>>1,Ht.F!=null&&(Ht.J+=Ht.v),Ht.ka=Ui-Ht.j,Ht.U=Ht.va-Ht.v,Ht.T=zi-Ui,ir=Ht.put(Ht))}$n+1!=tn.Ic||Mr||(s(tn.sa,tn.ta-Dn,ur,dr+16*tn.R,Dn),s(tn.qa,tn.ra-Ji,mi,si+8*tn.B,Ji),s(tn.Ha,tn.Ia-Ji,fr,Lr+8*tn.B,Ji))}if(!ir)return Hn(Ln,6,"Output aborted.")}return 1})(Te,He)),He.bc!=null&&He.bc(He),Ye&=1}return Ye?(Te.cb=0,Ye):0})(f,_)||(g=f.a)}}else g=f.a}g==0&&Q.Oa!=null&&Q.Oa.fd&&(g=Is(Q.ba))}Q=g}Z=Q!=0?null:11>Z?he.f.RGBA.eb:he.f.kb.y}else Z=null;return Z};var jo=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(E,Y){for(var F="",L=0;L<4;L++)F+=String.fromCharCode(E[Y++]);return F}function C(E,Y){return E[Y+0]|E[Y+1]<<8}function D(E,Y){return(E[Y+0]|E[Y+1]<<8|E[Y+2]<<16)>>>0}function O(E,Y){return(E[Y+0]|E[Y+1]<<8|E[Y+2]<<16|E[Y+3]<<24)>>>0}new b;var T=[0],K=[0],R=[],z=new b,w=i,we=(function(E,Y){var F={},L=0,$=!1,H=0,Pe=0;if(F.frames=[],!(function(A,W){for(var q=0;q<4;q++)if(A[W+q]!="RIFF".charCodeAt(q))return!0;return!1})(E,Y)){for(O(E,Y+=4),Y+=8;Y<E.length;){var ae=y(E,Y),ve=O(E,Y+=4);Y+=4;var pe=ve+(1&ve);switch(ae){case"VP8 ":case"VP8L":F.frames[L]===void 0&&(F.frames[L]={}),(k=F.frames[L]).src_off=$?Pe:Y-8,k.src_size=H+ve+8,L++,$&&($=!1,H=0,Pe=0);break;case"VP8X":(k=F.header={}).feature_flags=E[Y];var Ce=Y+4;k.canvas_width=1+D(E,Ce),Ce+=3,k.canvas_height=1+D(E,Ce),Ce+=3;break;case"ALPH":$=!0,H=pe+8,Pe=Y-8;break;case"ANIM":(k=F.header).bgcolor=O(E,Y),Ce=Y+4,k.loop_count=C(E,Ce),Ce+=2;break;case"ANMF":var fe,k;(k=F.frames[L]={}).offset_x=2*D(E,Y),Y+=3,k.offset_y=2*D(E,Y),Y+=3,k.width=1+D(E,Y),Y+=3,k.height=1+D(E,Y),Y+=3,k.duration=D(E,Y),Y+=3,fe=E[Y++],k.dispose=1&fe,k.blend=fe>>1&1}ae!="ANMF"&&(Y+=pe)}return F}})(w,0);we.response=w,we.rgbaoutput=!0,we.dataurl=!1;var X=we.header?we.header:null,G=we.frames?we.frames:null;if(X){X.loop_counter=X.loop_count,T=[X.canvas_height],K=[X.canvas_width];for(var J=0;J<G.length&&G[J].blend!=0;J++);}var ue=G[0],oe=z.WebPDecodeRGBA(w,ue.src_off,ue.src_size,K,T);ue.rgba=oe,ue.imgwidth=K[0],ue.imgheight=T[0];for(var ie=0;ie<K[0]*T[0]*4;ie++)R[ie]=oe[ie];return this.width=K,this.height=T,this.data=R,this}(function(i){var r,a,s,l,d,v,p,b,y,C=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new b,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new v,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new v,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new D(this),r=this.internal.f2,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,d=this.internal.getVerticalCoordinate,v=this.internal.Point,p=this.internal.Rectangle,b=this.internal.Matrix,y=new C}]);var D=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=A;Object.defineProperty(this,"pdf",{get:function(){return W}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(ne){q=!!ne}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(ne){te=!!ne}});var xe=0;Object.defineProperty(this,"posX",{get:function(){return xe},set:function(ne){isNaN(ne)||(xe=ne)}});var ee=0;Object.defineProperty(this,"posY",{get:function(){return ee},set:function(ne){isNaN(ne)||(ee=ne)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(ne){var jt;typeof ne=="number"?jt=[ne,ne,ne,ne]:((jt=new Array(4))[0]=ne[0],jt[1]=ne.length>=2?ne[1]:jt[0],jt[2]=ne.length>=3?ne[2]:jt[0],jt[3]=ne.length>=4?ne[3]:jt[1]),y.margin=jt}});var Ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ie},set:function(ne){Ie=ne}});var _e=0;Object.defineProperty(this,"lastBreak",{get:function(){return _e},set:function(ne){_e=ne}});var Fe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Fe},set:function(ne){Fe=ne}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(ne){ne instanceof C&&(y=ne)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(ne){y.path=ne}});var nt=[];Object.defineProperty(this,"ctxStack",{get:function(){return nt},set:function(ne){nt=ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ne){var jt;jt=O(ne),this.ctx.fillStyle=jt.style,this.ctx.isFillTransparent=jt.a===0,this.ctx.fillOpacity=jt.a,this.pdf.setFillColor(jt.r,jt.g,jt.b,{a:jt.a}),this.pdf.setTextColor(jt.r,jt.g,jt.b,{a:jt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ne){var jt=O(ne);this.ctx.strokeStyle=jt.style,this.ctx.isStrokeTransparent=jt.a===0,this.ctx.strokeOpacity=jt.a,jt.a===0?this.pdf.setDrawColor(255,255,255):(jt.a,this.pdf.setDrawColor(jt.r,jt.g,jt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ne){["butt","round","square"].indexOf(ne)!==-1&&(this.ctx.lineCap=ne,this.pdf.setLineCap(ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ne){isNaN(ne)||(this.ctx.lineWidth=ne,this.pdf.setLineWidth(ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ne){["bevel","round","miter"].indexOf(ne)!==-1&&(this.ctx.lineJoin=ne,this.pdf.setLineJoin(ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ne){isNaN(ne)||(this.ctx.miterLimit=ne,this.pdf.setMiterLimit(ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ne){this.ctx.textBaseline=ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ne){["right","end","center","left","start"].indexOf(ne)!==-1&&(this.ctx.textAlign=ne)}});var lt=null,kt=null,It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function(ne){lt=null,kt=null,It=ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ne){var jt;if(this.ctx.font=ne,(jt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ne))!==null){var Qt=jt[1];jt[2];var Wt=jt[3],xt=jt[4];jt[5];var Je=jt[6],Gt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(xt)[2];xt=Math.floor(Gt==="px"?parseFloat(xt)*this.pdf.internal.scaleFactor:Gt==="em"?parseFloat(xt)*this.pdf.getFontSize():parseFloat(xt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(xt);var un=(function(St){var _t,Ut,qt=[],Xt=St.trim();if(Xt==="")return x0;if(Xt in ux)return[ux[Xt]];for(;Xt!=="";){switch(Ut=null,_t=(Xt=fx(Xt)).charAt(0)){case'"':case"'":Ut=U5(Xt.substring(1),_t);break;default:Ut=q5(Xt)}if(Ut===null||(qt.push(Ut[0]),(Xt=fx(Ut[1]))!==""&&Xt.charAt(0)!==","))return x0;Xt=Xt.replace(/^,/,"")}return qt})(Je);if(this.fontFaces){var Zt=(function(St,_t){var Ut=St.getFontList(),qt=JSON.stringify(Ut);if(lt===null||kt!==qt){var Xt=(function(it){var an=[];return Object.keys(it).forEach(function(Bt){it[Bt].forEach(function(Kt){var dn=null;switch(Kt){case"bold":dn={family:Bt,weight:"bold"};break;case"italic":dn={family:Bt,style:"italic"};break;case"bolditalic":dn={family:Bt,weight:"bold",style:"italic"};break;case"":case"normal":dn={family:Bt}}dn!==null&&(dn.ref={name:Bt,style:Kt},an.push(dn))})}),an})(Ut);lt=(function(it){for(var an={},Bt=0;Bt<it.length;++Bt){var Kt=g0(it[Bt]),dn=Kt.family,ti=Kt.stretch,Nn=Kt.style,xn=Kt.weight;an[dn]=an[dn]||{},an[dn][ti]=an[dn][ti]||{},an[dn][ti][Nn]=an[dn][ti][Nn]||{},an[dn][ti][Nn][xn]=Kt}return an})(Xt.concat(_t)),kt=qt}return lt})(this.pdf,this.fontFaces),_n=un.map(function(St){return{family:St,stretch:"normal",weight:Wt,style:Qt}}),Rt=(function(St,_t,Ut){for(var qt=(Ut=Ut||{}).defaultFontFamily||"times",Xt=Object.assign({},F5,Ut.genericFontFamilies||{}),it=null,an=null,Bt=0;Bt<_t.length;++Bt)if(Xt[(it=g0(_t[Bt])).family]&&(it.family=Xt[it.family]),St.hasOwnProperty(it.family)){an=St[it.family];break}if(!(an=an||St[qt]))throw new Error("Could not find a font-family for the rule '"+dx(it)+"' and default family '"+qt+"'.");if(an=(function(Kt,dn){if(dn[Kt])return dn[Kt];var ti=L0[Kt],Nn=ti<=L0.normal?-1:1,xn=cx(dn,Ty,ti,Nn);if(!xn)throw new Error("Could not find a matching font-stretch value for "+Kt);return xn})(it.stretch,an),an=(function(Kt,dn){if(dn[Kt])return dn[Kt];for(var ti=jy[Kt],Nn=0;Nn<ti.length;++Nn)if(dn[ti[Nn]])return dn[ti[Nn]];throw new Error("Could not find a matching font-style for "+Kt)})(it.style,an),!(an=(function(Kt,dn){if(dn[Kt])return dn[Kt];if(Kt===400&&dn[500])return dn[500];if(Kt===500&&dn[400])return dn[400];var ti=E5[Kt],Nn=cx(dn,Cy,ti,Kt<400?-1:1);if(!Nn)throw new Error("Could not find a matching font-weight for value "+Kt);return Nn})(it.weight,an)))throw new Error("Failed to resolve a font for the rule '"+dx(it)+"'.");return an})(Zt,_n);this.pdf.setFont(Rt.ref.name,Rt.ref.style)}else{var Le="";(Wt==="bold"||parseInt(Wt,10)>=700||Qt==="bold")&&(Le="bold"),Qt==="italic"&&(Le+="italic"),Le.length===0&&(Le="normal");for(var ke="",Xe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},et=0;et<un.length;et++){if(this.pdf.internal.getFont(un[et],Le,{noFallback:!0,disableWarning:!0})!==void 0){ke=un[et];break}if(Le==="bolditalic"&&this.pdf.internal.getFont(un[et],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ke=un[et],Le="bold";else if(this.pdf.internal.getFont(un[et],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ke=un[et],Le="normal";break}}if(ke===""){for(var Pt=0;Pt<un.length;Pt++)if(Xe[un[Pt]]){ke=Xe[un[Pt]];break}}ke=ke===""?"Times":ke,this.pdf.setFont(ke,Le)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ne){this.ctx.globalCompositeOperation=ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ne){this.ctx.globalAlpha=ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ne){this.ctx.lineDashOffset=ne,k.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ne){this.ctx.lineDash=ne,k.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ne){this.ctx.ignoreClearRect=!!ne}})};D.prototype.setLineDash=function(A){this.lineDash=A},D.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},D.prototype.fill=function(){G.call(this,"fill",!1)},D.prototype.stroke=function(){G.call(this,"stroke",!1)},D.prototype.beginPath=function(){this.path=[{type:"begin"}]},D.prototype.moveTo=function(A,W){if(isNaN(A)||isNaN(W))throw Xr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new v(A,W));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new v(A,W)},D.prototype.closePath=function(){var A=new v(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Pr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){A=new v(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new v(A.x,A.y)},D.prototype.lineTo=function(A,W){if(isNaN(A)||isNaN(W))throw Xr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new v(A,W));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new v(q.x,q.y)},D.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},D.prototype.quadraticCurveTo=function(A,W,q,te){if(isNaN(q)||isNaN(te)||isNaN(A)||isNaN(W))throw Xr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var xe=this.ctx.transform.applyToPoint(new v(q,te)),ee=this.ctx.transform.applyToPoint(new v(A,W));this.path.push({type:"qct",x1:ee.x,y1:ee.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new v(xe.x,xe.y)},D.prototype.bezierCurveTo=function(A,W,q,te,xe,ee){if(isNaN(xe)||isNaN(ee)||isNaN(A)||isNaN(W)||isNaN(q)||isNaN(te))throw Xr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ie=this.ctx.transform.applyToPoint(new v(xe,ee)),_e=this.ctx.transform.applyToPoint(new v(A,W)),Fe=this.ctx.transform.applyToPoint(new v(q,te));this.path.push({type:"bct",x1:_e.x,y1:_e.y,x2:Fe.x,y2:Fe.y,x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new v(Ie.x,Ie.y)},D.prototype.arc=function(A,W,q,te,xe,ee){if(isNaN(A)||isNaN(W)||isNaN(q)||isNaN(te)||isNaN(xe))throw Xr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ee=!!ee,!this.ctx.transform.isIdentity){var Ie=this.ctx.transform.applyToPoint(new v(A,W));A=Ie.x,W=Ie.y;var _e=this.ctx.transform.applyToPoint(new v(0,q)),Fe=this.ctx.transform.applyToPoint(new v(0,0));q=Math.sqrt(Math.pow(_e.x-Fe.x,2)+Math.pow(_e.y-Fe.y,2))}Math.abs(xe-te)>=2*Math.PI&&(te=0,xe=2*Math.PI),this.path.push({type:"arc",x:A,y:W,radius:q,startAngle:te,endAngle:xe,counterclockwise:ee})},D.prototype.arcTo=function(A,W,q,te,xe){throw new Error("arcTo not implemented.")},D.prototype.rect=function(A,W,q,te){if(isNaN(A)||isNaN(W)||isNaN(q)||isNaN(te))throw Xr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,W),this.lineTo(A+q,W),this.lineTo(A+q,W+te),this.lineTo(A,W+te),this.lineTo(A,W),this.lineTo(A+q,W),this.lineTo(A,W)},D.prototype.fillRect=function(A,W,q,te){if(isNaN(A)||isNaN(W)||isNaN(q)||isNaN(te))throw Xr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!T.call(this)){var xe={};this.lineCap!=="butt"&&(xe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(xe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,W,q,te),this.fill(),xe.hasOwnProperty("lineCap")&&(this.lineCap=xe.lineCap),xe.hasOwnProperty("lineJoin")&&(this.lineJoin=xe.lineJoin)}},D.prototype.strokeRect=function(A,W,q,te){if(isNaN(A)||isNaN(W)||isNaN(q)||isNaN(te))throw Xr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");K.call(this)||(this.beginPath(),this.rect(A,W,q,te),this.stroke())},D.prototype.clearRect=function(A,W,q,te){if(isNaN(A)||isNaN(W)||isNaN(q)||isNaN(te))throw Xr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,W,q,te))},D.prototype.save=function(A){A=typeof A!="boolean"||A;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new C(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},D.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(W),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},D.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var O=function(A){var W,q,te,xe;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))W=0,q=0,te=0,xe=0;else{var ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(ee!==null)W=parseInt(ee[1]),q=parseInt(ee[2]),te=parseInt(ee[3]),xe=1;else if((ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)W=parseInt(ee[1]),q=parseInt(ee[2]),te=parseInt(ee[3]),xe=parseFloat(ee[4]);else{if(xe=1,typeof A=="string"&&A.charAt(0)!=="#"){var Ie=new xy(A);A=Ie.ok?Ie.toHex():"#000000"}A.length===4?(W=A.substring(1,2),W+=W,q=A.substring(2,3),q+=q,te=A.substring(3,4),te+=te):(W=A.substring(1,3),q=A.substring(3,5),te=A.substring(5,7)),W=parseInt(W,16),q=parseInt(q,16),te=parseInt(te,16)}}return{r:W,g:q,b:te,a:xe,style:A}},T=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},K=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};D.prototype.fillText=function(A,W,q,te){if(isNaN(W)||isNaN(q)||typeof A!="string")throw Xr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!T.call(this)){var xe=pe(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;L.call(this,{text:A,x:W,y:q,scale:ee,angle:xe,align:this.textAlign,maxWidth:te})}},D.prototype.strokeText=function(A,W,q,te){if(isNaN(W)||isNaN(q)||typeof A!="string")throw Xr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!K.call(this)){te=isNaN(te)?void 0:te;var xe=pe(this.ctx.transform.rotation),ee=this.ctx.transform.scaleX;L.call(this,{text:A,x:W,y:q,scale:ee,renderingMode:"stroke",angle:xe,align:this.textAlign,maxWidth:te})}},D.prototype.measureText=function(A){if(typeof A!="string")throw Xr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,q=this.pdf.internal.scaleFactor,te=W.internal.getFontSize(),xe=W.getStringUnitWidth(A)*te/W.internal.scaleFactor;return new function(ee){var Ie=(ee=ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ie}}),this}({width:xe*=Math.round(96*q/72*1e4)/1e4})},D.prototype.scale=function(A,W){if(isNaN(A)||isNaN(W))throw Xr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new b(A,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},D.prototype.rotate=function(A){if(isNaN(A))throw Xr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new b(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},D.prototype.translate=function(A,W){if(isNaN(A)||isNaN(W))throw Xr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new b(1,0,0,1,A,W);this.ctx.transform=this.ctx.transform.multiply(q)},D.prototype.transform=function(A,W,q,te,xe,ee){if(isNaN(A)||isNaN(W)||isNaN(q)||isNaN(te)||isNaN(xe)||isNaN(ee))throw Xr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ie=new b(A,W,q,te,xe,ee);this.ctx.transform=this.ctx.transform.multiply(Ie)},D.prototype.setTransform=function(A,W,q,te,xe,ee){A=isNaN(A)?1:A,W=isNaN(W)?0:W,q=isNaN(q)?0:q,te=isNaN(te)?1:te,xe=isNaN(xe)?0:xe,ee=isNaN(ee)?0:ee,this.ctx.transform=new b(A,W,q,te,xe,ee)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};D.prototype.drawImage=function(A,W,q,te,xe,ee,Ie,_e,Fe){var nt=this.pdf.getImageProperties(A),lt=1,kt=1,It=1,ne=1;te!==void 0&&_e!==void 0&&(It=_e/te,ne=Fe/xe,lt=nt.width/te*_e/te,kt=nt.height/xe*Fe/xe),ee===void 0&&(ee=W,Ie=q,W=0,q=0),te!==void 0&&_e===void 0&&(_e=te,Fe=xe),te===void 0&&_e===void 0&&(_e=nt.width,Fe=nt.height);var jt=this.ctx.transform.decompose(),Qt=pe(jt.rotate.shx),Wt=new b,xt=(Wt=(Wt=(Wt=Wt.multiply(jt.translate)).multiply(jt.skew)).multiply(jt.scale)).applyToRectangle(new p(ee-W*It,Ie-q*ne,te*lt,xe*kt));if(this.autoPaging){for(var Je,Gt=z.call(this,xt),un=[],Zt=0;Zt<Gt.length;Zt+=1)un.indexOf(Gt[Zt])===-1&&un.push(Gt[Zt]);X(un);for(var _n=un[0],Rt=un[un.length-1],Le=_n;Le<Rt+1;Le++){this.pdf.setPage(Le);var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xe=Le===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=Le===1?0:et+(Le-2)*Pt;if(this.ctx.clip_path.length!==0){var _t=this.path;Je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=we(Je,this.posX+this.margin[3],-St+Xe+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=_t}var Ut=JSON.parse(JSON.stringify(xt));Ut=we([Ut],this.posX+this.margin[3],-St+Xe+this.ctx.prevPageLastElemOffset)[0];var qt=(Le>_n||Le<Rt)&&R.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,Pt,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",Ut.x,Ut.y,Ut.w,Ut.h,null,null,Qt),qt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(A,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,Qt)};var z=function(A,W,q){var te=[];W=W||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var xe=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":te.push(Math.floor((A.y+xe)/q)+1);break;case"arc":te.push(Math.floor((A.y+xe-A.radius)/q)+1),te.push(Math.floor((A.y+xe+A.radius)/q)+1);break;case"qct":var ee=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);te.push(Math.floor((ee.y+xe)/q)+1),te.push(Math.floor((ee.y+ee.h+xe)/q)+1);break;case"bct":var Ie=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);te.push(Math.floor((Ie.y+xe)/q)+1),te.push(Math.floor((Ie.y+Ie.h+xe)/q)+1);break;case"rect":te.push(Math.floor((A.y+xe)/q)+1),te.push(Math.floor((A.y+A.h+xe)/q)+1)}for(var _e=0;_e<te.length;_e+=1)for(;this.pdf.internal.getNumberOfPages()<te[_e];)w.call(this);return te},w=function(){var A=this.fillStyle,W=this.strokeStyle,q=this.font,te=this.lineCap,xe=this.lineWidth,ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=W,this.font=q,this.lineCap=te,this.lineWidth=xe,this.lineJoin=ee},we=function(A,W,q){for(var te=0;te<A.length;te++)switch(A[te].type){case"bct":A[te].x2+=W,A[te].y2+=q;case"qct":A[te].x1+=W,A[te].y1+=q;default:A[te].x+=W,A[te].y+=q}return A},X=function(A){return A.sort(function(W,q){return W-q})},G=function(A,W){var q=this.fillStyle,te=this.strokeStyle,xe=this.lineCap,ee=this.lineWidth,Ie=Math.abs(ee*this.ctx.transform.scaleX),_e=this.lineJoin;if(this.autoPaging){for(var Fe,nt,lt=JSON.parse(JSON.stringify(this.path)),kt=JSON.parse(JSON.stringify(this.path)),It=[],ne=0;ne<kt.length;ne++)if(kt[ne].x!==void 0)for(var jt=z.call(this,kt[ne]),Qt=0;Qt<jt.length;Qt+=1)It.indexOf(jt[Qt])===-1&&It.push(jt[Qt]);for(var Wt=0;Wt<It.length;Wt++)for(;this.pdf.internal.getNumberOfPages()<It[Wt];)w.call(this);X(It);for(var xt=It[0],Je=It[It.length-1],Gt=xt;Gt<Je+1;Gt++){this.pdf.setPage(Gt),this.fillStyle=q,this.strokeStyle=te,this.lineCap=xe,this.lineWidth=Ie,this.lineJoin=_e;var un=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Zt=Gt===1?this.posY+this.margin[0]:this.margin[0],_n=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Le=Gt===1?0:_n+(Gt-2)*Rt;if(this.ctx.clip_path.length!==0){var ke=this.path;Fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=we(Fe,this.posX+this.margin[3],-Le+Zt+this.ctx.prevPageLastElemOffset),J.call(this,A,!0),this.path=ke}if(nt=JSON.parse(JSON.stringify(lt)),this.path=we(nt,this.posX+this.margin[3],-Le+Zt+this.ctx.prevPageLastElemOffset),W===!1||Gt===0){var Xe=(Gt>xt||Gt<Je)&&R.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],un,Rt,null).clip().discardPath()),J.call(this,A,W),Xe&&this.pdf.restoreGraphicsState()}this.lineWidth=ee}this.path=lt}else this.lineWidth=Ie,J.call(this,A,W),this.lineWidth=ee},J=function(A,W){if((A!=="stroke"||W||!K.call(this))&&(A==="stroke"||W||!T.call(this))){for(var q,te,xe=[],ee=this.path,Ie=0;Ie<ee.length;Ie++){var _e=ee[Ie];switch(_e.type){case"begin":xe.push({begin:!0});break;case"close":xe.push({close:!0});break;case"mt":xe.push({start:_e,deltas:[],abs:[]});break;case"lt":var Fe=xe.length;if(ee[Ie-1]&&!isNaN(ee[Ie-1].x)&&(q=[_e.x-ee[Ie-1].x,_e.y-ee[Ie-1].y],Fe>0)){for(;Fe>=0;Fe--)if(xe[Fe-1].close!==!0&&xe[Fe-1].begin!==!0){xe[Fe-1].deltas.push(q),xe[Fe-1].abs.push(_e);break}}break;case"bct":q=[_e.x1-ee[Ie-1].x,_e.y1-ee[Ie-1].y,_e.x2-ee[Ie-1].x,_e.y2-ee[Ie-1].y,_e.x-ee[Ie-1].x,_e.y-ee[Ie-1].y],xe[xe.length-1].deltas.push(q);break;case"qct":var nt=ee[Ie-1].x+2/3*(_e.x1-ee[Ie-1].x),lt=ee[Ie-1].y+2/3*(_e.y1-ee[Ie-1].y),kt=_e.x+2/3*(_e.x1-_e.x),It=_e.y+2/3*(_e.y1-_e.y),ne=_e.x,jt=_e.y;q=[nt-ee[Ie-1].x,lt-ee[Ie-1].y,kt-ee[Ie-1].x,It-ee[Ie-1].y,ne-ee[Ie-1].x,jt-ee[Ie-1].y],xe[xe.length-1].deltas.push(q);break;case"arc":xe.push({deltas:[],abs:[],arc:!0}),Array.isArray(xe[xe.length-1].abs)&&xe[xe.length-1].abs.push(_e)}}te=W?null:A==="stroke"?"stroke":"fill";for(var Qt=!1,Wt=0;Wt<xe.length;Wt++)if(xe[Wt].arc)for(var xt=xe[Wt].abs,Je=0;Je<xt.length;Je++){var Gt=xt[Je];Gt.type==="arc"?ie.call(this,Gt.x,Gt.y,Gt.radius,Gt.startAngle,Gt.endAngle,Gt.counterclockwise,void 0,W,!Qt):$.call(this,Gt.x,Gt.y),Qt=!0}else if(xe[Wt].close===!0)this.pdf.internal.out("h"),Qt=!1;else if(xe[Wt].begin!==!0){var un=xe[Wt].start.x,Zt=xe[Wt].start.y;H.call(this,xe[Wt].deltas,un,Zt),Qt=!0}te&&E.call(this,te),W&&Y.call(this)}},ue=function(A){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-q;case"top":return A+W-q;case"hanging":return A+W-2*q;case"middle":return A+W/2-q;default:return A}},oe=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};D.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(W,q){this.colorStops.push([W,q])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},D.prototype.createPattern=function(){return this.createLinearGradient()},D.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ie=function(A,W,q,te,xe,ee,Ie,_e,Fe){for(var nt=ae.call(this,q,te,xe,ee),lt=0;lt<nt.length;lt++){var kt=nt[lt];lt===0&&(Fe?F.call(this,kt.x1+A,kt.y1+W):$.call(this,kt.x1+A,kt.y1+W)),Pe.call(this,A,W,kt.x2,kt.y2,kt.x3,kt.y3,kt.x4,kt.y4)}_e?Y.call(this):E.call(this,Ie)},E=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(A,W){this.pdf.internal.out(a(A)+" "+s(W)+" m")},L=function(A){var W;switch(A.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var q,te,xe,ee=this.pdf.getTextDimensions(A.text),Ie=ue.call(this,A.y),_e=oe.call(this,Ie)-ee.h,Fe=this.ctx.transform.applyToPoint(new v(A.x,Ie));if(this.autoPaging){var nt=this.ctx.transform.decompose(),lt=new b;lt=(lt=(lt=lt.multiply(nt.translate)).multiply(nt.skew)).multiply(nt.scale);for(var kt=this.ctx.transform.applyToRectangle(new p(A.x,Ie,ee.w,ee.h)),It=lt.applyToRectangle(new p(A.x,_e,ee.w,ee.h)),ne=z.call(this,It),jt=[],Qt=0;Qt<ne.length;Qt+=1)jt.indexOf(ne[Qt])===-1&&jt.push(ne[Qt]);X(jt);for(var Wt=jt[0],xt=jt[jt.length-1],Je=Wt;Je<xt+1;Je++){this.pdf.setPage(Je);var Gt=Je===1?this.posY+this.margin[0]:this.margin[0],un=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[2],_n=Zt-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],Le=Rt-this.margin[3],ke=Je===1?0:un+(Je-2)*_n;if(this.ctx.clip_path.length!==0){var Xe=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=we(q,this.posX+this.margin[3],-1*ke+Gt),J.call(this,"fill",!0),this.path=Xe}var et=we([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-ke+Gt+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(te*A.scale),xe=this.lineWidth,this.lineWidth=xe*A.scale);var Pt=this.autoPaging!=="text";if(Pt||et.y+et.h<=Zt){if(Pt||et.y>=Gt&&et.x<=Rt){var St=Pt?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||Rt-et.x)[0],_t=we([JSON.parse(JSON.stringify(kt))],this.posX+this.margin[3],-ke+Gt+this.ctx.prevPageLastElemOffset)[0],Ut=Pt&&(Je>Wt||Je<xt)&&R.call(this);Ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,_n,null).clip().discardPath()),this.pdf.text(St,_t.x,_t.y,{angle:A.angle,align:W,renderingMode:A.renderingMode}),Ut&&this.pdf.restoreGraphicsState()}}else et.y<Zt&&(this.ctx.prevPageLastElemOffset+=Zt-et.y);A.scale>=.01&&(this.pdf.setFontSize(te),this.lineWidth=xe)}}else A.scale>=.01&&(te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(te*A.scale),xe=this.lineWidth,this.lineWidth=xe*A.scale),this.pdf.text(A.text,Fe.x+this.posX,Fe.y+this.posY,{angle:A.angle,align:W,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(te),this.lineWidth=xe)},$=function(A,W,q,te){q=q||0,te=te||0,this.pdf.internal.out(a(A+q)+" "+s(W+te)+" l")},H=function(A,W,q){return this.pdf.lines(A,W,q,null,null)},Pe=function(A,W,q,te,xe,ee,Ie,_e){this.pdf.internal.out([r(l(q+A)),r(d(te+W)),r(l(xe+A)),r(d(ee+W)),r(l(Ie+A)),r(d(_e+W)),"c"].join(" "))},ae=function(A,W,q,te){for(var xe=2*Math.PI,ee=Math.PI/2;W>q;)W-=xe;var Ie=Math.abs(q-W);Ie<xe&&te&&(Ie=xe-Ie);for(var _e=[],Fe=te?-1:1,nt=W;Ie>1e-5;){var lt=nt+Fe*Math.min(Ie,ee);_e.push(ve.call(this,A,nt,lt)),Ie-=Math.abs(lt-nt),nt=lt}return _e},ve=function(A,W,q){var te=(q-W)/2,xe=A*Math.cos(te),ee=A*Math.sin(te),Ie=xe,_e=-ee,Fe=Ie*Ie+_e*_e,nt=Fe+Ie*xe+_e*ee,lt=4/3*(Math.sqrt(2*Fe*nt)-nt)/(Ie*ee-_e*xe),kt=Ie-lt*_e,It=_e+lt*Ie,ne=kt,jt=-It,Qt=te+W,Wt=Math.cos(Qt),xt=Math.sin(Qt);return{x1:A*Math.cos(W),y1:A*Math.sin(W),x2:kt*Wt-It*xt,y2:kt*xt+It*Wt,x3:ne*Wt-jt*xt,y3:ne*xt+jt*Wt,x4:A*Math.cos(q),y4:A*Math.sin(q)}},pe=function(A){return 180*A/Math.PI},Ce=function(A,W,q,te,xe,ee){var Ie=A+.5*(q-A),_e=W+.5*(te-W),Fe=xe+.5*(q-xe),nt=ee+.5*(te-ee),lt=Math.min(A,xe,Ie,Fe),kt=Math.max(A,xe,Ie,Fe),It=Math.min(W,ee,_e,nt),ne=Math.max(W,ee,_e,nt);return new p(lt,It,kt-lt,ne-It)},fe=function(A,W,q,te,xe,ee,Ie,_e){var Fe,nt,lt,kt,It,ne,jt,Qt,Wt,xt,Je,Gt,un,Zt,_n=q-A,Rt=te-W,Le=xe-q,ke=ee-te,Xe=Ie-xe,et=_e-ee;for(nt=0;nt<41;nt++)Wt=(jt=(lt=A+(Fe=nt/40)*_n)+Fe*((It=q+Fe*Le)-lt))+Fe*(It+Fe*(xe+Fe*Xe-It)-jt),xt=(Qt=(kt=W+Fe*Rt)+Fe*((ne=te+Fe*ke)-kt))+Fe*(ne+Fe*(ee+Fe*et-ne)-Qt),nt==0?(Je=Wt,Gt=xt,un=Wt,Zt=xt):(Je=Math.min(Je,Wt),Gt=Math.min(Gt,xt),un=Math.max(un,Wt),Zt=Math.max(Zt,xt));return new p(Math.round(Je),Math.round(Gt),Math.round(un-Je),Math.round(Zt-Gt))},k=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,W,q=(A=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:W}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Rn.API),(function(i){var r=function(v){var p,b,y,C,D,O,T,K,R,z;for(b=[],y=0,C=(v+=p="\0\0\0\0".slice(v.length%4||4)).length;C>y;y+=4)(D=(v.charCodeAt(y)<<24)+(v.charCodeAt(y+1)<<16)+(v.charCodeAt(y+2)<<8)+v.charCodeAt(y+3))!==0?(O=(D=((D=((D=((D=(D-(z=D%85))/85)-(R=D%85))/85)-(K=D%85))/85)-(T=D%85))/85)%85,b.push(O+33,T+33,K+33,R+33,z+33)):b.push(122);return(function(w,we){for(var X=we;X>0;X--)w.pop()})(b,p.length),String.fromCharCode.apply(String,b)+"~>"},a=function(v){var p,b,y,C,D,O=String,T="length",K=255,R="charCodeAt",z="slice",w="replace";for(v[z](-2),v=v[z](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),y=[],C=0,D=(v+=p="uuuuu"[z](v[T]%5||5))[T];D>C;C+=5)b=52200625*(v[R](C)-33)+614125*(v[R](C+1)-33)+7225*(v[R](C+2)-33)+85*(v[R](C+3)-33)+(v[R](C+4)-33),y.push(K&b>>24,K&b>>16,K&b>>8,K&b);return(function(we,X){for(var G=X;G>0;G--)we.pop()})(y,p[T]),O.fromCharCode.apply(O,y)},s=function(v){return v.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">"},l=function(v){var p=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((v=v.replace(/\s/g,"")).indexOf(">")!==-1&&(v=v.substr(0,v.indexOf(">"))),v.length%2&&(v+="0"),p.test(v)===!1)return"";for(var b="",y=0;y<v.length;y+=2)b+=String.fromCharCode("0x"+(v[y]+v[y+1]));return b},d=function(v){for(var p=new Uint8Array(v.length),b=v.length;b--;)p[b]=v.charCodeAt(b);return(p=N0(p)).reduce(function(y,C){return y+String.fromCharCode(C)},"")};i.processDataByFilters=function(v,p){var b=0,y=v||"",C=[];for(typeof(p=p||[])=="string"&&(p=[p]),b=0;b<p.length;b+=1)switch(p[b]){case"ASCII85Decode":case"/ASCII85Decode":y=a(y),C.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":y=r(y),C.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":y=l(y),C.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":y=s(y),C.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":y=d(y),C.push("/FlateDecode");break;default:throw new Error('The filter: "'+p[b]+'" is not implemented')}return{data:y,reverseChain:C.reverse().join(" ")}}})(Rn.API),(function(i){i.loadFile=function(r,a,s){return(function(l,d,v){d=d!==!1,v=typeof v=="function"?v:function(){};var p=void 0;try{p=(function(b,y,C){var D=new XMLHttpRequest,O=0,T=function(K){var R=K.length,z=[],w=String.fromCharCode;for(O=0;O<R;O+=1)z.push(w(255&K.charCodeAt(O)));return z.join("")};if(D.open("GET",b,!y),D.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(D.onload=function(){D.status===200?C(T(this.responseText)):C(void 0)}),D.send(null),y&&D.status===200)return T(D.responseText)})(l,d,v)}catch{}return p})(r,a,s)},i.loadImageFile=i.loadFile})(Rn.API),(function(i){function r(){return(ri.html2canvas?Promise.resolve(ri.html2canvas):Zh(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load html2canvas: "+p))}).then(function(p){return p.default?p.default:p})}function a(){return(ri.DOMPurify?Promise.resolve(ri.DOMPurify):Zh(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load dompurify: "+p))}).then(function(p){return p.default?p.default:p})}var s=function(p){var b=Pr(p);return b==="undefined"?"undefined":b==="string"||p instanceof String?"string":b==="number"||p instanceof Number?"number":b==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":b==="object"?"object":"unknown"},l=function(p,b){var y=document.createElement(p);for(var C in b.className&&(y.className=b.className),b.innerHTML&&b.dompurify&&(y.innerHTML=b.dompurify.sanitize(b.innerHTML)),b.style)y.style[C]=b.style[C];return y},d=function p(b,y){for(var C=b.nodeType===3?document.createTextNode(b.nodeValue):b.cloneNode(!1),D=b.firstChild;D;D=D.nextSibling)y!==!0&&D.nodeType===1&&D.nodeName==="SCRIPT"||C.appendChild(p(D,y));return b.nodeType===1&&(b.nodeName==="CANVAS"?(C.width=b.width,C.height=b.height,C.getContext("2d").drawImage(b,0,0)):b.nodeName!=="TEXTAREA"&&b.nodeName!=="SELECT"||(C.value=b.value),C.addEventListener("load",function(){C.scrollTop=b.scrollTop,C.scrollLeft=b.scrollLeft},!0)),C},v=function p(b){var y=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),C=p.convert(Promise.resolve(),y);return(C=C.setProgress(1,p,1,[p])).set(b)};(v.prototype=Object.create(Promise.prototype)).constructor=v,v.convert=function(p,b){return p.__proto__=b||v.prototype,p},v.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},v.prototype.from=function(p,b){return this.then(function(){switch(b=b||(function(y){switch(s(y)){case"string":return"string";case"element":return y.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(p),b){case"string":return this.then(a).then(function(y){return this.set({src:l("div",{innerHTML:p,dompurify:y})})});case"element":return this.set({src:p});case"canvas":return this.set({canvas:p});case"img":return this.set({img:p});default:return this.error("Unknown source type.")}})},v.prototype.to=function(p){switch(p){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},v.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var p={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},b=d(this.prop.src,this.opt.html2canvas.javascriptEnabled);b.tagName==="BODY"&&(p.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:p}),this.prop.container.appendChild(b),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},v.prototype.toCanvas=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(r).then(function(b){var y=Object.assign({},this.opt.html2canvas);return delete y.onrendered,b(this.prop.container,y)}).then(function(b){(this.opt.html2canvas.onrendered||function(){})(b),this.prop.canvas=b,document.body.removeChild(this.prop.overlay)})},v.prototype.toContext2d=function(){var p=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(p).then(r).then(function(b){var y=this.opt.jsPDF,C=this.opt.fontFaces,D=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,O=Object.assign({async:!0,allowTaint:!0,scale:D,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete O.onrendered,y.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,y.context2d.posX=this.opt.x,y.context2d.posY=this.opt.y,y.context2d.margin=this.opt.margin,y.context2d.fontFaces=C,C)for(var T=0;T<C.length;++T){var K=C[T],R=K.src.find(function(z){return z.format==="truetype"});R&&y.addFont(R.url,K.ref.name,K.ref.style)}return O.windowHeight=O.windowHeight||0,O.windowHeight=O.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):O.windowHeight,y.context2d.save(!0),b(this.prop.container,O)}).then(function(b){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(b),this.prop.canvas=b,document.body.removeChild(this.prop.overlay)})},v.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var p=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=p})},v.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},v.prototype.output=function(p,b,y){return(y=y||"pdf").toLowerCase()==="img"||y.toLowerCase()==="image"?this.outputImg(p,b):this.outputPdf(p,b)},v.prototype.outputPdf=function(p,b){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(p,b)})},v.prototype.outputImg=function(p){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(p){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+p+'" is not supported.'}})},v.prototype.save=function(p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(p?{filename:p}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},v.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},v.prototype.set=function(p){if(s(p)!=="object")return this;var b=Object.keys(p||{}).map(function(y){if(y in v.template.prop)return function(){this.prop[y]=p[y]};switch(y){case"margin":return this.setMargin.bind(this,p.margin);case"jsPDF":return function(){return this.opt.jsPDF=p.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,p.pageSize);default:return function(){this.opt[y]=p[y]}}},this);return this.then(function(){return this.thenList(b)})},v.prototype.get=function(p,b){return this.then(function(){var y=p in v.template.prop?this.prop[p]:this.opt[p];return b?b(y):y})},v.prototype.setMargin=function(p){return this.then(function(){switch(s(p)){case"number":p=[p,p,p,p];case"array":if(p.length===2&&(p=[p[0],p[1],p[0],p[1]]),p.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=p}).then(this.setPageSize)},v.prototype.setPageSize=function(p){function b(y,C){return Math.floor(y*C/72*96)}return this.then(function(){(p=p||Rn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(p.inner={width:p.width-this.opt.margin[1]-this.opt.margin[3],height:p.height-this.opt.margin[0]-this.opt.margin[2]},p.inner.px={width:b(p.inner.width,p.k),height:b(p.inner.height,p.k)},p.inner.ratio=p.inner.height/p.inner.width),this.prop.pageSize=p})},v.prototype.setProgress=function(p,b,y,C){return p!=null&&(this.progress.val=p),b!=null&&(this.progress.state=b),y!=null&&(this.progress.n=y),C!=null&&(this.progress.stack=C),this.progress.ratio=this.progress.val/this.progress.state,this},v.prototype.updateProgress=function(p,b,y,C){return this.setProgress(p?this.progress.val+p:null,b||null,y?this.progress.n+y:null,C?this.progress.stack.concat(C):null)},v.prototype.then=function(p,b){var y=this;return this.thenCore(p,b,function(C,D){return y.updateProgress(null,null,1,[C]),Promise.prototype.then.call(this,function(O){return y.updateProgress(null,C),O}).then(C,D).then(function(O){return y.updateProgress(1),O})})},v.prototype.thenCore=function(p,b,y){y=y||Promise.prototype.then;var C=this;p&&(p=p.bind(C)),b&&(b=b.bind(C));var D=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?C:v.convert(Object.assign({},C),Promise.prototype),O=y.call(D,p,b);return v.convert(O,C.__proto__)},v.prototype.thenExternal=function(p,b){return Promise.prototype.then.call(this,p,b)},v.prototype.thenList=function(p){var b=this;return p.forEach(function(y){b=b.thenCore(y)}),b},v.prototype.catch=function(p){p&&(p=p.bind(this));var b=Promise.prototype.catch.call(this,p);return v.convert(b,this)},v.prototype.catchExternal=function(p){return Promise.prototype.catch.call(this,p)},v.prototype.error=function(p){return this.then(function(){throw new Error(p)})},v.prototype.using=v.prototype.set,v.prototype.saveAs=v.prototype.save,v.prototype.export=v.prototype.output,v.prototype.run=v.prototype.then,Rn.getPageSize=function(p,b,y){if(Pr(p)==="object"){var C=p;p=C.orientation,b=C.unit||b,y=C.format||y}b=b||"mm",y=y||"a4",p=(""+(p||"P")).toLowerCase();var D,O=(""+y).toLowerCase(),T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(b){case"pt":D=1;break;case"mm":D=72/25.4;break;case"cm":D=72/2.54;break;case"in":D=72;break;case"px":D=.75;break;case"pc":case"em":D=12;break;case"ex":D=6;break;default:throw"Invalid unit: "+b}var K,R=0,z=0;if(T.hasOwnProperty(O))R=T[O][1]/D,z=T[O][0]/D;else try{R=y[1],z=y[0]}catch{throw new Error("Invalid format: "+y)}if(p==="p"||p==="portrait")p="p",z>R&&(K=z,z=R,R=K);else{if(p!=="l"&&p!=="landscape")throw"Invalid orientation: "+p;p="l",R>z&&(K=z,z=R,R=K)}return{width:z,height:R,unit:b,k:D,orientation:p}},i.html=function(p,b){(b=b||{}).callback=b.callback||function(){},b.html2canvas=b.html2canvas||{},b.html2canvas.canvas=b.html2canvas.canvas||this.canvas,b.jsPDF=b.jsPDF||this,b.fontFaces=b.fontFaces?b.fontFaces.map(g0):null;var y=new v(b);return b.worker?y:y.from(p).doCallback()}})(Rn.API),Rn.API.addJS=function(i){return hx=i,this.internal.events.subscribe("postPutResources",function(){Vp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),px=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Vp!==void 0&&px!==void 0&&this.internal.out("/Names <</JavaScript "+Vp+" 0 R>>")}),this},(function(i){var r;i.events.push(["postPutResources",function(){var a=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=a.outline.render().split(/\r\n/),d=0;d<l.length;d++){var v=l[d],p=s.exec(v);if(p!=null){var b=p[1];a.internal.newObjectDeferredBegin(b,!1)}a.internal.write(v)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,C=[];for(d=0;d<y;d++){var D=a.internal.newObject();C.push(D);var O=a.internal.getPageInfo(d+1);a.internal.write("<< /D["+O.objId+" 0 R /XYZ null null null]>> endobj")}var T=a.internal.newObject();for(a.internal.write("<< /Names [ "),d=0;d<C.length;d++)a.internal.write("(page_"+(d+1)+")"+C[d]+" 0 R");a.internal.write(" ] >>","endobj"),r=a.internal.newObject(),a.internal.write("<< /Dests "+T+" 0 R"),a.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){var a=this;a.outline.root.children.length>0&&(a.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&a.internal.write("/Names "+r+" 0 R"))}]),i.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(s,l,d){var v={title:l,options:d,children:[]};return s==null&&(s=this.root),s.children.push(v),v},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(s){s.id=a.internal.newObjectDeferred();for(var l=0;l<s.children.length;l++)this.genIds_r(s.children[l])},a.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},a.outline.renderItems=function(s){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,d=0;d<s.children.length;d++){var v=s.children[d];this.objStart(v),this.line("/Title "+this.makeString(v.title)),this.line("/Parent "+this.makeRef(s)),d>0&&this.line("/Prev "+this.makeRef(s.children[d-1])),d<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[d+1])),v.children.length>0&&(this.line("/First "+this.makeRef(v.children[0])),this.line("/Last "+this.makeRef(v.children[v.children.length-1])));var p=this.count=this.count_r({count:0},v);if(p>0&&this.line("/Count "+p),v.options&&v.options.pageNumber){var b=a.internal.getPageInfo(v.options.pageNumber);this.line("/Dest ["+b.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var y=0;y<s.children.length;y++)this.renderItems(s.children[y])},a.outline.line=function(s){this.ctx.val+=s+`\r
`},a.outline.makeRef=function(s){return s.id+" 0 R"},a.outline.makeString=function(s){return"("+a.internal.pdfEscape(s)+")"},a.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(s,l){for(var d=0;d<l.children.length;d++)s.count++,this.count_r(s,l.children[d]);return s.count}}])})(Rn.API),(function(i){var r=[192,193,194,195,196,197,198,199];i.processJPEG=function(a,s,l,d,v,p){var b,y=this.decode.DCT_DECODE,C=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=v||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,b=(function(D){for(var O,T=256*D.charCodeAt(4)+D.charCodeAt(5),K=D.length,R={width:0,height:0,numcomponents:1},z=4;z<K;z+=2){if(z+=T,r.indexOf(D.charCodeAt(z+1))!==-1){O=256*D.charCodeAt(z+5)+D.charCodeAt(z+6),R={width:256*D.charCodeAt(z+7)+D.charCodeAt(z+8),height:O,numcomponents:D.charCodeAt(z+9)};break}T=256*D.charCodeAt(z+2)+D.charCodeAt(z+3)}return R})(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a),b.numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}C={data:a,width:b.width,height:b.height,colorSpace:p,bitsPerComponent:8,filter:y,index:s,alias:l}}return C}})(Rn.API),Rn.API.processPNG=function(i,r,a,s){if(this.__addimage__.isArrayBuffer(i)&&(i=new Uint8Array(i)),this.__addimage__.isArrayBufferView(i)){var l,d=C5(i,{checkCrc:!0}),v=d.width,p=d.height,b=d.channels,y=d.palette,C=d.depth;l=y&&b===1?(function(ie){for(var E=ie.width,Y=ie.height,F=ie.data,L=ie.palette,$=ie.depth,H=!1,Pe=[],ae=[],ve=void 0,pe=!1,Ce=0,fe=0;fe<L.length;fe++){var k=m1(L[fe],4),A=k[0],W=k[1],q=k[2],te=k[3];Pe.push(A,W,q),te!=null&&(te===0?(Ce++,ae.length<1&&ae.push(fe)):te<255&&(pe=!0))}if(pe||Ce>1){H=!0,ae=void 0;var xe=E*Y;ve=new Uint8Array(xe);for(var ee=new DataView(F.buffer),Ie=0;Ie<xe;Ie++){var _e=y0(ee,Ie,$),Fe=m1(L[_e],4)[3];ve[Ie]=Fe}}else Ce===0&&(ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:H?8:void 0,colorBytes:F,alphaBytes:ve,needSMask:H,palette:Pe,mask:ae}})(d):b===2||b===4?(function(ie){for(var E=ie.data,Y=ie.width,F=ie.height,L=ie.channels,$=ie.depth,H=L===2?"DeviceGray":"DeviceRGB",Pe=L-1,ae=Y*F,ve=Pe,pe=ae*ve,Ce=1*ae,fe=Math.ceil(pe*$/8),k=Math.ceil(Ce*$/8),A=new Uint8Array(fe),W=new Uint8Array(k),q=new DataView(E.buffer),te=new DataView(A.buffer),xe=new DataView(W.buffer),ee=!1,Ie=0;Ie<ae;Ie++){for(var _e=Ie*L,Fe=0;Fe<ve;Fe++)jx(te,y0(q,_e+Fe,$),Ie*ve+Fe,$);var nt=y0(q,_e+ve,$);nt<(1<<$)-1&&(ee=!0),jx(xe,nt,1*Ie,$)}return{colorSpace:H,colorsPerPixel:Pe,sMaskBitsPerComponent:ee?$:void 0,colorBytes:A,alphaBytes:W,needSMask:ee}})(d):(function(ie){var E=ie.data,Y=ie.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Y,colorsPerPixel:Y==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?(function(F){for(var L=F.length,$=new Uint8Array(2*L),H=new DataView($.buffer,$.byteOffset,$.byteLength),Pe=0;Pe<L;Pe++)H.setUint16(2*Pe,F[Pe],!1);return $})(E):E,needSMask:!1}})(d);var D,O,T,K=l,R=K.colorSpace,z=K.colorsPerPixel,w=K.sMaskBitsPerComponent,we=K.colorBytes,X=K.alphaBytes,G=K.needSMask,J=K.palette,ue=K.mask,oe=null;return s!==Rn.API.image_compression.NONE&&typeof N0=="function"?(oe=(function(ie){var E;switch(ie){case Rn.API.image_compression.FAST:E=11;break;case Rn.API.image_compression.MEDIUM:E=13;break;case Rn.API.image_compression.SLOW:E=14;break;default:E=12}return E})(s),D=this.decode.FLATE_DECODE,O="/Predictor ".concat(oe," /Colors ").concat(z," /BitsPerComponent ").concat(C," /Columns ").concat(v),i=mx(we,Math.ceil(v*z*C/8),z,C,s),G&&(T=mx(X,Math.ceil(v*w/8),1,w,s))):(D=void 0,O=void 0,i=we,G&&(T=X)),(this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i))&&(i=this.__addimage__.arrayBufferToBinaryString(i)),(T&&this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),{alias:a,data:i,index:r,filter:D,decodeParameters:O,transparency:ue,palette:J,sMask:T,predictor:oe,width:v,height:p,bitsPerComponent:C,sMaskBitsPerComponent:w,colorSpace:R}}},(function(i){i.processGIF89A=function(r,a,s,l){var d=new $5(r),v=d.width,p=d.height,b=[];d.decodeAndBlitFrameRGBA(0,b);var y={data:b,width:v,height:p},C=new m0(100).encode(y,100);return i.processJPEG.call(this,C,a,s,l)},i.processGIF87A=i.processGIF89A})(Rn.API),wc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var r=0;r<i;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:l,green:s,blue:a,quad:d}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wc.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[i]()}catch(a){Xr.log("bit decode error:"+a)}},wc.prototype.bit1=function(){var i,r=Math.ceil(this.width/8),a=r%4;for(i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,l=0;l<r;l++)for(var d=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+8*l*4,p=0;p<8&&8*l+p<this.width;p++){var b=this.palette[d>>7-p&1];this.data[v+4*p]=b.blue,this.data[v+4*p+1]=b.green,this.data[v+4*p+2]=b.red,this.data[v+4*p+3]=255}a!==0&&(this.pos+=4-a)}},wc.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),r=i%4,a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,l=0;l<i;l++){var d=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+2*l*4,p=d>>4,b=15&d,y=this.palette[p];if(this.data[v]=y.blue,this.data[v+1]=y.green,this.data[v+2]=y.red,this.data[v+3]=255,2*l+1>=this.width)break;y=this.palette[b],this.data[v+4]=y.blue,this.data[v+4+1]=y.green,this.data[v+4+2]=y.red,this.data[v+4+3]=255}r!==0&&(this.pos+=4-r)}},wc.prototype.bit8=function(){for(var i=this.width%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+4*s;if(l<this.palette.length){var v=this.palette[l];this.data[d]=v.red,this.data[d+1]=v.green,this.data[d+2]=v.blue,this.data[d+3]=255}else this.data[d]=255,this.data[d+1]=255,this.data[d+2]=255,this.data[d+3]=255}i!==0&&(this.pos+=4-i)}},wc.prototype.bit15=function(){for(var i=this.width%3,r=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var v=(d&r)/r*255|0,p=(d>>5&r)/r*255|0,b=(d>>10&r)/r*255|0,y=d>>15?255:0,C=s*this.width*4+4*l;this.data[C]=b,this.data[C+1]=p,this.data[C+2]=v,this.data[C+3]=y}this.pos+=i}},wc.prototype.bit16=function(){for(var i=this.width%3,r=parseInt("11111",2),a=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var l=this.bottom_up?s:this.height-1-s,d=0;d<this.width;d++){var v=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(v&r)/r*255|0,b=(v>>5&a)/a*255|0,y=(v>>11)/r*255|0,C=l*this.width*4+4*d;this.data[C]=y,this.data[C+1]=b,this.data[C+2]=p,this.data[C+3]=255}this.pos+=i}},wc.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),v=r*this.width*4+4*a;this.data[v]=d,this.data[v+1]=l,this.data[v+2]=s,this.data[v+3]=255}this.pos+=this.width%4}},wc.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var r=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),v=this.datav.getUint8(this.pos++,!0),p=r*this.width*4+4*a;this.data[p]=d,this.data[p+1]=l,this.data[p+2]=s,this.data[p+3]=v}},wc.prototype.getData=function(){return this.data},(function(i){i.processBMP=function(r,a,s,l){var d=new wc(r,!1),v=d.width,p=d.height,b={data:d.getData(),width:v,height:p},y=new m0(100).encode(b,100);return i.processJPEG.call(this,y,a,s,l)}})(Rn.API),Cx.prototype.getData=function(){return this.data},(function(i){i.processWEBP=function(r,a,s,l){var d=new Cx(r),v=d.width,p=d.height,b={data:d.getData(),width:v,height:p},y=new m0(100).encode(b,100);return i.processJPEG.call(this,y,a,s,l)}})(Rn.API),Rn.API.processRGBA=function(i,r,a){for(var s=i.data,l=s.length,d=new Uint8Array(l/4*3),v=new Uint8Array(l/4),p=0,b=0,y=0;y<l;y+=4){var C=s[y],D=s[y+1],O=s[y+2],T=s[y+3];d[p++]=C,d[p++]=D,d[p++]=O,v[b++]=T}var K=this.__addimage__.arrayBufferToBinaryString(d);return{alpha:this.__addimage__.arrayBufferToBinaryString(v),data:K,index:r,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},Rn.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xd=Rn.API,Hp=Xd.getCharWidthsArray=function(i,r){var a,s,l=(r=r||{}).font||this.internal.getFont(),d=r.fontSize||this.internal.getFontSize(),v=r.charSpace||this.internal.getCharSpace(),p=r.widths?r.widths:l.metadata.Unicode.widths,b=p.fof?p.fof:1,y=r.kerning?r.kerning:l.metadata.Unicode.kerning,C=y.fof?y.fof:1,D=r.doKerning!==!1,O=0,T=i.length,K=0,R=p[0]||b,z=[];for(a=0;a<T;a++)s=i.charCodeAt(a),typeof l.metadata.widthOfString=="function"?z.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(s))+v*(1e3/d)||0)/1e3):(O=D&&Pr(y[s])==="object"&&!isNaN(parseInt(y[s][K],10))?y[s][K]/C:0,z.push((p[s]||R)/b+O)),K=s;return z},gx=Xd.getStringUnitWidth=function(i,r){var a=(r=r||{}).fontSize||this.internal.getFontSize(),s=r.font||this.internal.getFont(),l=r.charSpace||this.internal.getCharSpace();return Xd.processArabic&&(i=Xd.processArabic(i)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(i,a,l)/a:Hp.apply(this,arguments).reduce(function(d,v){return d+v},0)},xx=function(i,r,a,s){for(var l=[],d=0,v=i.length,p=0;d!==v&&p+r[d]<a;)p+=r[d],d++;l.push(i.slice(0,d));var b=d;for(p=0;d!==v;)p+r[d]>s&&(l.push(i.slice(b,d)),p=0,b=d),p+=r[d],d++;return b!==d&&l.push(i.slice(b,d)),l},yx=function(i,r,a){a||(a={});var s,l,d,v,p,b,y,C=[],D=[C],O=a.textIndent||0,T=0,K=0,R=i.split(" "),z=Hp.apply(this,[" ",a])[0];if(b=a.lineIndent===-1?R[0].length+2:a.lineIndent||0){var w=Array(b).join(" "),we=[];R.map(function(G){(G=G.split(/\s*\n/)).length>1?we=we.concat(G.map(function(J,ue){return(ue&&J.length?`
`:"")+J})):we.push(G[0])}),R=we,b=gx.apply(this,[w,a])}for(d=0,v=R.length;d<v;d++){var X=0;if(s=R[d],b&&s[0]==`
`&&(s=s.substr(1),X=1),O+T+(K=(l=Hp.apply(this,[s,a])).reduce(function(G,J){return G+J},0))>r||X){if(K>r){for(p=xx.apply(this,[s,l,r-(O+T),r]),C.push(p.shift()),C=[p.pop()];p.length;)D.push([p.shift()]);K=l.slice(s.length-(C[0]?C[0].length:0)).reduce(function(G,J){return G+J},0)}else C=[s];D.push(C),O=K+b,T=z}else C.push(s),O+=T+K,T=z}return y=b?function(G,J){return(J?w:"")+G.join(" ")}:function(G){return G.join(" ")},D.map(y)},Xd.splitTextToSize=function(i,r,a){var s,l=(a=a||{}).fontSize||this.internal.getFontSize(),d=(function(C){if(C.widths&&C.kerning)return{widths:C.widths,kerning:C.kerning};var D=this.internal.getFont(C.fontName,C.fontStyle),O="Unicode";return D.metadata[O]?{widths:D.metadata[O].widths||{0:1},kerning:D.metadata[O].kerning||{}}:{font:D.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);s=Array.isArray(i)?i:String(i).split(/\r?\n/);var v=1*this.internal.scaleFactor*r/l;d.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/l:0,d.lineIndent=a.lineIndent;var p,b,y=[];for(p=0,b=s.length;p<b;p++)y=y.concat(yx.apply(this,[s[p],v,d]));return y},(function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var r="0123456789abcdef",a="klmnopqrstuvwxyz",s={},l={},d=0;d<16;d++)s[a[d]]=r[d],l[r[d]]=a[d];var v=function(O){return"0x"+parseInt(O,10).toString(16)},p=i.__fontmetrics__.compress=function(O){var T,K,R,z,w=["{"];for(var we in O){if(T=O[we],isNaN(parseInt(we,10))?K="'"+we+"'":(we=parseInt(we,10),K=(K=v(we).slice(2)).slice(0,-1)+l[K.slice(-1)]),typeof T=="number")T<0?(R=v(T).slice(3),z="-"):(R=v(T).slice(2),z=""),R=z+R.slice(0,-1)+l[R.slice(-1)];else{if(Pr(T)!=="object")throw new Error("Don't know what to do with value type "+Pr(T)+".");R=p(T)}w.push(K+R)}return w.push("}"),w.join("")},b=i.__fontmetrics__.uncompress=function(O){if(typeof O!="string")throw new Error("Invalid argument passed to uncompress.");for(var T,K,R,z,w={},we=1,X=w,G=[],J="",ue="",oe=O.length-1,ie=1;ie<oe;ie+=1)(z=O[ie])=="'"?T?(R=T.join(""),T=void 0):T=[]:T?T.push(z):z=="{"?(G.push([X,R]),X={},R=void 0):z=="}"?((K=G.pop())[0][K[1]]=X,R=void 0,X=K[0]):z=="-"?we=-1:R===void 0?s.hasOwnProperty(z)?(J+=s[z],R=parseInt(J,16)*we,we=1,J=""):J+=z:s.hasOwnProperty(z)?(ue+=s[z],X[R]=parseInt(ue,16)*we,we=1,R=void 0,ue=""):ue+=z;return w},y={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},C={Unicode:{Courier:y,"Courier-Bold":y,"Courier-BoldOblique":y,"Courier-Oblique":y,Helvetica:y,"Helvetica-Bold":y,"Helvetica-BoldOblique":y,"Helvetica-Oblique":y,"Times-Roman":y,"Times-Bold":y,"Times-BoldItalic":y,"Times-Italic":y}},D={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:b("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:b("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(O){var T=O.font,K=D.Unicode[T.postScriptName];K&&(T.metadata.Unicode={},T.metadata.Unicode.widths=K.widths,T.metadata.Unicode.kerning=K.kerning);var R=C.Unicode[T.postScriptName];R&&(T.metadata.Unicode.encoding=R,T.encoding=R.codePages[0])}])})(Rn.API),(function(i){var r=function(a){for(var s=a.length,l=new Uint8Array(s),d=0;d<s;d++)l[d]=a.charCodeAt(d);return l};i.API.events.push(["addFont",function(a){var s=void 0,l=a.font,d=a.instance;if(!l.isStandardFont){if(d===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(s=d.existsFileInVFS(l.postScriptName)===!1?d.loadFile(l.postScriptName):d.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(v,p){p=/^\x00\x01\x00\x00/.test(p)?r(p):r(Yp(p)),v.metadata=i.API.TTFFont.open(p),v.metadata.Unicode=v.metadata.Unicode||{encoding:{},kerning:{},widths:[]},v.metadata.glyIdsUsed=[0]})(l,s)}}])})(Rn),Rn.API.addSvgAsImage=function(i,r,a,s,l,d,v,p){if(isNaN(r)||isNaN(a))throw Xr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(l))throw Xr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=s,b.height=l;var y=b.getContext("2d");y.fillStyle="#fff",y.fillRect(0,0,b.width,b.height);var C={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},D=this;return(ri.canvg?Promise.resolve(ri.canvg):Zh(()=>import("./index.es-D3qJGqf4.js"),[])).catch(function(O){return Promise.reject(new Error("Could not load canvg: "+O))}).then(function(O){return O.default?O.default:O}).then(function(O){return O.fromString(y,i,C)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(O){return O.render(C)}).then(function(){D.addImage(b.toDataURL("image/jpeg",1),r,a,s,l,v,p)})},Rn.API.putTotalPages=function(i){var r,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(i,"g"),a=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var l=0;l<this.internal.pages[s].length;l++)this.internal.pages[s][l]=this.internal.pages[s][l].replace(r,a);return this},Rn.API.viewerPreferences=function(i,r){var a;i=i||{},r=r||!1;var s,l,d,v={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(v),b=[],y=0,C=0,D=0;function O(K,R){var z,w=!1;for(z=0;z<K.length;z+=1)K[z]===R&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(v)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,i==="reset"||r===!0){var T=p.length;for(D=0;D<T;D+=1)a[p[D]].value=a[p[D]].defaultValue,a[p[D]].explicitSet=!1}if(Pr(i)==="object"){for(l in i)if(d=i[l],O(p,l)&&d!==void 0){if(a[l].type==="boolean"&&typeof d=="boolean")a[l].value=d;else if(a[l].type==="name"&&O(a[l].valueSet,d))a[l].value=d;else if(a[l].type==="integer"&&Number.isInteger(d))a[l].value=d;else if(a[l].type==="array"){for(y=0;y<d.length;y+=1)if(s=!0,d[y].length===1&&typeof d[y][0]=="number")b.push(String(d[y]-1));else if(d[y].length>1){for(C=0;C<d[y].length;C+=1)typeof d[y][C]!="number"&&(s=!1);s===!0&&b.push([d[y][0]-1,d[y][1]-1].join(" "))}a[l].value="["+b.join(" ")+"]"}else a[l].value=a[l].defaultValue;a[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var K,R=[];for(K in a)a[K].explicitSet===!0&&(a[K].type==="name"?R.push("/"+K+" /"+a[K].value):R.push("/"+K+" "+a[K].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},(function(i){var r=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),d=unescape(encodeURIComponent(s)),v=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),b=unescape(encodeURIComponent("</x:xmpmeta>")),y=d.length+v.length+p.length+l.length+b.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(l+d+v+p+b),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(s,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",r)),this}})(Rn.API),(function(i){var r=i.API,a=r.pdfEscape16=function(d,v){for(var p,b=v.metadata.Unicode.widths,y=["","0","00","000","0000"],C=[""],D=0,O=d.length;D<O;++D){if(p=v.metadata.characterToGlyph(d.charCodeAt(D)),v.metadata.glyIdsUsed.push(p),v.metadata.toUnicode[p]=d.charCodeAt(D),b.indexOf(p)==-1&&(b.push(p),b.push([parseInt(v.metadata.widthOfGlyph(p),10)])),p=="0")return C.join("");p=p.toString(16),C.push(y[4-p.length],p)}return C.join("")},s=function(d){var v,p,b,y,C,D,O;for(C=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,b=[],D=0,O=(p=Object.keys(d).sort(function(T,K){return T-K})).length;D<O;D++)v=p[D],b.length>=100&&(C+=`
`+b.length+` beginbfchar
`+b.join(`
`)+`
endbfchar`,b=[]),d[v]!==void 0&&d[v]!==null&&typeof d[v].toString=="function"&&(y=("0000"+d[v].toString(16)).slice(-4),v=("0000"+(+v).toString(16)).slice(-4),b.push("<"+v+"><"+y+">"));return b.length&&(C+=`
`+b.length+` beginbfchar
`+b.join(`
`)+`
endbfchar
`),C+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(d){(function(v){var p=v.font,b=v.out,y=v.newObject,C=v.putStream;if(p.metadata instanceof i.API.TTFFont&&p.encoding==="Identity-H"){for(var D=p.metadata.Unicode.widths,O=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),T="",K=0;K<O.length;K++)T+=String.fromCharCode(O[K]);var R=y();C({data:T,addLength1:!0,objectId:R}),b("endobj");var z=y();C({data:s(p.metadata.toUnicode),addLength1:!0,objectId:z}),b("endobj");var w=y();b("<<"),b("/Type /FontDescriptor"),b("/FontName /"+Jd(p.fontName)),b("/FontFile2 "+R+" 0 R"),b("/FontBBox "+i.API.PDFObject.convert(p.metadata.bbox)),b("/Flags "+p.metadata.flags),b("/StemV "+p.metadata.stemV),b("/ItalicAngle "+p.metadata.italicAngle),b("/Ascent "+p.metadata.ascender),b("/Descent "+p.metadata.decender),b("/CapHeight "+p.metadata.capHeight),b(">>"),b("endobj");var we=y();b("<<"),b("/Type /Font"),b("/BaseFont /"+Jd(p.fontName)),b("/FontDescriptor "+w+" 0 R"),b("/W "+i.API.PDFObject.convert(D)),b("/CIDToGIDMap /Identity"),b("/DW 1000"),b("/Subtype /CIDFontType2"),b("/CIDSystemInfo"),b("<<"),b("/Supplement 0"),b("/Registry (Adobe)"),b("/Ordering ("+p.encoding+")"),b(">>"),b(">>"),b("endobj"),p.objectNumber=y(),b("<<"),b("/Type /Font"),b("/Subtype /Type0"),b("/ToUnicode "+z+" 0 R"),b("/BaseFont /"+Jd(p.fontName)),b("/Encoding /"+p.encoding),b("/DescendantFonts ["+we+" 0 R]"),b(">>"),b("endobj"),p.isAlreadyPutted=!0}})(d)}]),r.events.push(["putFont",function(d){(function(v){var p=v.font,b=v.out,y=v.newObject,C=v.putStream;if(p.metadata instanceof i.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var D=p.metadata.rawData,O="",T=0;T<D.length;T++)O+=String.fromCharCode(D[T]);var K=y();C({data:O,addLength1:!0,objectId:K}),b("endobj");var R=y();C({data:s(p.metadata.toUnicode),addLength1:!0,objectId:R}),b("endobj");var z=y();b("<<"),b("/Descent "+p.metadata.decender),b("/CapHeight "+p.metadata.capHeight),b("/StemV "+p.metadata.stemV),b("/Type /FontDescriptor"),b("/FontFile2 "+K+" 0 R"),b("/Flags 96"),b("/FontBBox "+i.API.PDFObject.convert(p.metadata.bbox)),b("/FontName /"+Jd(p.fontName)),b("/ItalicAngle "+p.metadata.italicAngle),b("/Ascent "+p.metadata.ascender),b(">>"),b("endobj"),p.objectNumber=y();for(var w=0;w<p.metadata.hmtx.widths.length;w++)p.metadata.hmtx.widths[w]=parseInt(p.metadata.hmtx.widths[w]*(1e3/p.metadata.head.unitsPerEm));b("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+Jd(p.fontName)+"/FontDescriptor "+z+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),b("endobj"),p.isAlreadyPutted=!0}})(d)}]);var l=function(d){var v,p=d.text||"",b=d.x,y=d.y,C=d.options||{},D=d.mutex||{},O=D.pdfEscape,T=D.activeFontKey,K=D.fonts,R=T,z="",w=0,we="",X=K[R].encoding;if(K[R].encoding!=="Identity-H")return{text:p,x:b,y,options:C,mutex:D};for(we=p,R=T,Array.isArray(p)&&(we=p[0]),w=0;w<we.length;w+=1)K[R].metadata.hasOwnProperty("cmap")&&(v=K[R].metadata.cmap.unicode.codeMap[we[w].charCodeAt(0)]),v||we[w].charCodeAt(0)<256&&K[R].metadata.hasOwnProperty("Unicode")?z+=we[w]:z+="";var G="";return parseInt(R.slice(1))<14||X==="WinAnsiEncoding"?G=O(z,R).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):X==="Identity-H"&&(G=a(z,K[R])),D.isHex=!0,{text:G,x:b,y,options:C,mutex:D}};r.events.push(["postProcessText",function(d){var v=d.text||"",p=[],b={text:v,x:d.x,y:d.y,options:d.options,mutex:d.mutex};if(Array.isArray(v)){var y=0;for(y=0;y<v.length;y+=1)Array.isArray(v[y])&&v[y].length===3?p.push([l(Object.assign({},b,{text:v[y][0]})).text,v[y][1],v[y][2]]):p.push(l(Object.assign({},b,{text:v[y]})).text);d.text=p}else d.text=l(Object.assign({},b,{text:v})).text}])})(Rn),(function(i){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(a){return r.call(this),this.internal.vFS[a]!==void 0},i.addFileToVFS=function(a,s){return r.call(this),this.internal.vFS[a]=s,this},i.getFileFromVFS=function(a){return r.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}})(Rn.API),(function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(s){var l,d,v,p,b,y,C,D=r,O=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],T=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],K={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},z=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),we=!1,X=0;this.__bidiEngine__={};var G=function(F){var L=F.charCodeAt(),$=L>>8,H=R[$];return H!==void 0?D[256*H+(255&L)]:$===252||$===253?"AL":w.test($)?"L":$===8?"R":"N"},J=function(F){for(var L,$=0;$<F.length;$++){if((L=G(F.charAt($)))==="L")return!1;if(L==="R")return!0}return!1},ue=function(F,L,$,H){var Pe,ae,ve,pe,Ce=L[H];switch(Ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":we=!1;break;case"N":case"AN":break;case"EN":we&&(Ce="AN");break;case"AL":we=!0,Ce="R";break;case"WS":case"BN":Ce="N";break;case"CS":H<1||H+1>=L.length||(Pe=$[H-1])!=="EN"&&Pe!=="AN"||(ae=L[H+1])!=="EN"&&ae!=="AN"?Ce="N":we&&(ae="AN"),Ce=ae===Pe?ae:"N";break;case"ES":Ce=(Pe=H>0?$[H-1]:"B")==="EN"&&H+1<L.length&&L[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&$[H-1]==="EN"){Ce="EN";break}if(we){Ce="N";break}for(ve=H+1,pe=L.length;ve<pe&&L[ve]==="ET";)ve++;Ce=ve<pe&&L[ve]==="EN"?"EN":"N";break;case"NSM":if(v&&!p){for(pe=L.length,ve=H+1;ve<pe&&L[ve]==="NSM";)ve++;if(ve<pe){var fe=F[H],k=fe>=1425&&fe<=2303||fe===64286;if(Pe=L[ve],k&&(Pe==="R"||Pe==="AL")){Ce="R";break}}}Ce=H<1||(Pe=L[H-1])==="B"?"N":$[H-1];break;case"B":we=!1,l=!0,Ce=X;break;case"S":d=!0,Ce="N"}return Ce},oe=function(F,L,$){var H=F.split("");return $&&ie(H,$,{hiLevel:X}),H.reverse(),L&&L.reverse(),H.join("")},ie=function(F,L,$){var H,Pe,ae,ve,pe,Ce=-1,fe=F.length,k=0,A=[],W=X?T:O,q=[];for(we=!1,l=!1,d=!1,Pe=0;Pe<fe;Pe++)q[Pe]=G(F[Pe]);for(ae=0;ae<fe;ae++){if(pe=k,A[ae]=ue(F,q,A,ae),H=240&(k=W[pe][K[A[ae]]]),k&=15,L[ae]=ve=W[k][5],H>0)if(H===16){for(Pe=Ce;Pe<ae;Pe++)L[Pe]=1;Ce=-1}else Ce=-1;if(W[k][6])Ce===-1&&(Ce=ae);else if(Ce>-1){for(Pe=Ce;Pe<ae;Pe++)L[Pe]=ve;Ce=-1}q[ae]==="B"&&(L[ae]=0),$.hiLevel|=ve}d&&(function(te,xe,ee){for(var Ie=0;Ie<ee;Ie++)if(te[Ie]==="S"){xe[Ie]=X;for(var _e=Ie-1;_e>=0&&te[_e]==="WS";_e--)xe[_e]=X}})(q,L,fe)},E=function(F,L,$,H,Pe){if(!(Pe.hiLevel<F)){if(F===1&&X===1&&!l)return L.reverse(),void($&&$.reverse());for(var ae,ve,pe,Ce,fe=L.length,k=0;k<fe;){if(H[k]>=F){for(pe=k+1;pe<fe&&H[pe]>=F;)pe++;for(Ce=k,ve=pe-1;Ce<ve;Ce++,ve--)ae=L[Ce],L[Ce]=L[ve],L[ve]=ae,$&&(ae=$[Ce],$[Ce]=$[ve],$[ve]=ae);k=pe}k++}}},Y=function(F,L,$){var H=F.split(""),Pe={hiLevel:X};return $||($=[]),ie(H,$,Pe),(function(ae,ve,pe){if(pe.hiLevel!==0&&C)for(var Ce,fe=0;fe<ae.length;fe++)ve[fe]===1&&(Ce=z.indexOf(ae[fe]))>=0&&(ae[fe]=z[Ce+1])})(H,$,Pe),E(2,H,L,$,Pe),E(1,H,L,$,Pe),H.join("")};return this.__bidiEngine__.doBidiReorder=function(F,L,$){if((function(Pe,ae){if(ae)for(var ve=0;ve<Pe.length;ve++)ae[ve]=ve;p===void 0&&(p=J(Pe)),y===void 0&&(y=J(Pe))})(F,L),v||!b||y)if(v&&b&&p^y)X=p?1:0,F=oe(F,L,$);else if(!v&&b&&y)X=p?1:0,F=Y(F,L,$),F=oe(F,L);else if(!v||p||b||y){if(v&&!b&&p^y)F=oe(F,L),p?(X=0,F=Y(F,L,$)):(X=1,F=Y(F,L,$),F=oe(F,L));else if(v&&p&&!b&&y)X=1,F=Y(F,L,$),F=oe(F,L);else if(!v&&!b&&p^y){var H=C;p?(X=1,F=Y(F,L,$),X=0,C=!1,F=Y(F,L,$),C=H):(X=0,F=Y(F,L,$),F=oe(F,L),X=1,C=!1,F=Y(F,L,$),C=H,F=oe(F,L))}}else X=0,F=Y(F,L,$);else X=p?1:0,F=Y(F,L,$);return F},this.__bidiEngine__.setOptions=function(F){F&&(v=F.isInputVisual,b=F.isOutputVisual,p=F.isInputRtl,y=F.isOutputRtl,C=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(s){var l=s.text;s.x,s.y;var d=s.options||{};s.mutex,d.lang;var v=[];if(d.isInputVisual=typeof d.isInputVisual!="boolean"||d.isInputVisual,a.setOptions(d),Object.prototype.toString.call(l)==="[object Array]"){var p=0;for(v=[],p=0;p<l.length;p+=1)Object.prototype.toString.call(l[p])==="[object Array]"?v.push([a.doBidiReorder(l[p][0]),l[p][1],l[p][2]]):v.push([a.doBidiReorder(l[p])]);s.text=v}else s.text=a.doBidiReorder(l);a.setOptions({isInputVisual:!0})}])})(Rn),Rn.API.TTFFont=(function(){function i(r){var a;if(this.rawData=r,a=this.contents=new Gu(r),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new sv(this),this.registerTTF()}return i.open=function(r){return new i(r)},i.prototype.parse=function(){return this.directory=new Y5(this.contents),this.head=new X5(this),this.name=new ev(this),this.cmap=new Ny(this),this.toUnicode={},this.hhea=new K5(this),this.maxp=new tv(this),this.hmtx=new nv(this),this.post=new J5(this),this.os2=new Z5(this),this.loca=new ov(this),this.glyf=new iv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var r,a,s,l,d;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var v,p,b,y;for(y=[],v=0,p=(b=this.bbox).length;v<p;v++)r=b[v],y.push(Math.round(r*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(s=255&(l=this.post.italic_angle),32768&(a=l>>16)&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(d=this.familyClass)===1||d===2||d===3||d===4||d===5||d===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(r){var a;return((a=this.cmap.unicode)!=null?a.codeMap[r]:void 0)||0},i.prototype.widthOfGlyph=function(r){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*a},i.prototype.widthOfString=function(r,a,s){var l,d,v,p;for(v=0,d=0,p=(r=""+r).length;0<=p?d<p:d>p;d=0<=p?++d:--d)l=r.charCodeAt(d),v+=this.widthOfGlyph(this.characterToGlyph(l))+s*(1e3/a)||0;return v*(a/1e3)},i.prototype.lineHeight=function(r,a){var s;return a==null&&(a=!1),s=a?this.lineGap:0,(this.ascender+s-this.decender)/1e3*r},i})();var Tc,Gu=(function(){function i(r){this.data=r??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(r){return this.data[this.pos++]=r},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},i.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},i.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},i.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},i.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},i.prototype.readString=function(r){var a,s;for(s=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)s[a]=String.fromCharCode(this.readByte());return s.join("")},i.prototype.writeString=function(r){var a,s,l;for(l=[],a=0,s=r.length;0<=s?a<s:a>s;a=0<=s?++a:--a)l.push(this.writeByte(r.charCodeAt(a)));return l},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(r){return this.writeInt16(r)},i.prototype.readLongLong=function(){var r,a,s,l,d,v,p,b;return r=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),d=this.readByte(),v=this.readByte(),p=this.readByte(),b=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^a)+1099511627776*(255^s)+4294967296*(255^l)+16777216*(255^d)+65536*(255^v)+256*(255^p)+(255^b)+1):72057594037927940*r+281474976710656*a+1099511627776*s+4294967296*l+16777216*d+65536*v+256*p+b},i.prototype.writeLongLong=function(r){var a,s;return a=Math.floor(r/4294967296),s=4294967295&r,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(r){return this.writeInt32(r)},i.prototype.read=function(r){var a,s;for(a=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)a.push(this.readByte());return a},i.prototype.write=function(r){var a,s,l,d;for(d=[],s=0,l=r.length;s<l;s++)a=r[s],d.push(this.writeByte(a));return d},i})(),Y5=(function(){var i;function r(a){var s,l,d;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},l=0,d=this.tableCount;0<=d?l<d:l>d;l=0<=d?++l:--l)s={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[s.tag]=s}return r.prototype.encode=function(a){var s,l,d,v,p,b,y,C,D,O,T,K,R;for(R in T=Object.keys(a).length,b=Math.log(2),D=16*Math.floor(Math.log(T)/b),v=Math.floor(D/b),C=16*T-D,(l=new Gu).writeInt(this.scalarType),l.writeShort(T),l.writeShort(D),l.writeShort(v),l.writeShort(C),d=16*T,y=l.pos+d,p=null,K=[],a)for(O=a[R],l.writeString(R),l.writeInt(i(O)),l.writeInt(y),l.writeInt(O.length),K=K.concat(O),R==="head"&&(p=y),y+=O.length;y%4;)K.push(0),y++;return l.write(K),s=2981146554-i(l.data),l.pos=p+8,l.writeUInt32(s),l.data},i=function(a){var s,l,d,v;for(a=Ay.call(a);a.length%4;)a.push(0);for(d=new Gu(a),l=0,s=0,v=a.length;s<v;s=s+=4)l+=d.readUInt32();return 4294967295&l},r})(),G5={}.hasOwnProperty,Hc=function(i,r){for(var a in r)G5.call(r,a)&&(i[a]=r[a]);function s(){this.constructor=i}return s.prototype=r.prototype,i.prototype=new s,i.__super__=r.prototype,i};Tc=(function(){function i(r){var a;this.file=r,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i})();var X5=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="head",i.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},i.prototype.encode=function(r){var a;return(a=new Gu).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},i})(),kx=(function(){function i(r,a){var s,l,d,v,p,b,y,C,D,O,T,K,R,z,w,we,X;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=a+r.readInt(),D=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(b=0;b<256;++b)this.codeMap[b]=r.readByte();break;case 4:for(T=r.readUInt16(),O=T/2,r.pos+=6,d=(function(){var G,J;for(J=[],b=G=0;0<=O?G<O:G>O;b=0<=O?++G:--G)J.push(r.readUInt16());return J})(),r.pos+=2,R=(function(){var G,J;for(J=[],b=G=0;0<=O?G<O:G>O;b=0<=O?++G:--G)J.push(r.readUInt16());return J})(),y=(function(){var G,J;for(J=[],b=G=0;0<=O?G<O:G>O;b=0<=O?++G:--G)J.push(r.readUInt16());return J})(),C=(function(){var G,J;for(J=[],b=G=0;0<=O?G<O:G>O;b=0<=O?++G:--G)J.push(r.readUInt16());return J})(),l=(this.length-r.pos+this.offset)/2,p=(function(){var G,J;for(J=[],b=G=0;0<=l?G<l:G>l;b=0<=l?++G:--G)J.push(r.readUInt16());return J})(),b=w=0,X=d.length;w<X;b=++w)for(z=d[b],s=we=K=R[b];K<=z?we<=z:we>=z;s=K<=z?++we:--we)C[b]===0?v=s+y[b]:(v=p[C[b]/2+(s-K)-(O-b)]||0)!==0&&(v+=y[b]),this.codeMap[s]=65535&v}r.pos=D}return i.encode=function(r,a){var s,l,d,v,p,b,y,C,D,O,T,K,R,z,w,we,X,G,J,ue,oe,ie,E,Y,F,L,$,H,Pe,ae,ve,pe,Ce,fe,k,A,W,q,te,xe,ee,Ie,_e,Fe,nt,lt;switch(H=new Gu,v=Object.keys(r).sort(function(kt,It){return kt-It}),a){case"macroman":for(R=0,z=(function(){var kt=[];for(K=0;K<256;++K)kt.push(0);return kt})(),we={0:0},d={},Pe=0,Ce=v.length;Pe<Ce;Pe++)we[_e=r[l=v[Pe]]]==null&&(we[_e]=++R),d[l]={old:r[l],new:we[r[l]]},z[l]=we[r[l]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(z),{charMap:d,subtable:H.data,maxGlyphID:R+1};case"unicode":for(L=[],D=[],X=0,we={},s={},w=y=null,ae=0,fe=v.length;ae<fe;ae++)we[J=r[l=v[ae]]]==null&&(we[J]=++X),s[l]={old:J,new:we[J]},p=we[J]-l,w!=null&&p===y||(w&&D.push(w),L.push(l),y=p),w=l;for(w&&D.push(w),D.push(65535),L.push(65535),Y=2*(E=L.length),ie=2*Math.pow(Math.log(E)/Math.LN2,2),O=Math.log(ie/2)/Math.LN2,oe=2*E-ie,b=[],ue=[],T=[],K=ve=0,k=L.length;ve<k;K=++ve){if(F=L[K],C=D[K],F===65535){b.push(0),ue.push(0);break}if(F-($=s[F].new)>=32768)for(b.push(0),ue.push(2*(T.length+E-K)),l=pe=F;F<=C?pe<=C:pe>=C;l=F<=C?++pe:--pe)T.push(s[l].new);else b.push($-F),ue.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*E+2*T.length),H.writeUInt16(0),H.writeUInt16(Y),H.writeUInt16(ie),H.writeUInt16(O),H.writeUInt16(oe),ee=0,A=D.length;ee<A;ee++)l=D[ee],H.writeUInt16(l);for(H.writeUInt16(0),Ie=0,W=L.length;Ie<W;Ie++)l=L[Ie],H.writeUInt16(l);for(Fe=0,q=b.length;Fe<q;Fe++)p=b[Fe],H.writeUInt16(p);for(nt=0,te=ue.length;nt<te;nt++)G=ue[nt],H.writeUInt16(G);for(lt=0,xe=T.length;lt<xe;lt++)R=T[lt],H.writeUInt16(R);return{charMap:s,subtable:H.data,maxGlyphID:X+1}}},i})(),Ny=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="cmap",i.prototype.parse=function(r){var a,s,l;for(r.pos=this.offset,this.version=r.readUInt16(),l=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=l?s<l:s>l;s=0<=l?++s:--s)a=new kx(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},i.encode=function(r,a){var s,l;return a==null&&(a="macroman"),s=kx.encode(r,a),(l=new Gu).writeUInt16(0),l.writeUInt16(1),s.table=l.data.concat(s.subtable),s},i})(),K5=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="hhea",i.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},i})(),Z5=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="OS/2",i.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var a,s;for(s=[],a=0;a<10;++a)s.push(r.readByte());return s})(),this.charRange=(function(){var a,s;for(s=[],a=0;a<4;++a)s.push(r.readInt());return s})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(r.readInt());return s})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},i})(),J5=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="post",i.prototype.parse=function(r){var a,s,l;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:case 196608:break;case 131072:var d;for(s=r.readUInt16(),this.glyphNameIndex=[],d=0;0<=s?d<s:d>s;d=0<=s?++d:--d)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],l=[];r.pos<this.offset+this.length;)a=r.readByte(),l.push(this.names.push(r.readString(a)));return l;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 262144:return this.map=(function(){var v,p,b;for(b=[],d=v=0,p=this.file.maxp.numGlyphs;0<=p?v<p:v>p;d=0<=p?++v:--v)b.push(r.readUInt32());return b}).call(this)}},i})(),Q5=function(i,r){this.raw=i,this.length=i.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},ev=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="name",i.prototype.parse=function(r){var a,s,l,d,v,p,b,y,C,D,O;for(r.pos=this.offset,r.readShort(),a=r.readShort(),p=r.readShort(),s=[],d=0;0<=a?d<a:d>a;d=0<=a?++d:--d)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+p+r.readShort()});for(b={},d=C=0,D=s.length;C<D;d=++C)l=s[d],r.pos=l.offset,y=r.readString(l.length),v=new Q5(y,l),b[O=l.nameID]==null&&(b[O]=[]),b[l.nameID].push(v);this.strings=b,this.copyright=b[0],this.fontFamily=b[1],this.fontSubfamily=b[2],this.uniqueSubfamily=b[3],this.fontName=b[4],this.version=b[5];try{this.postscriptName=b[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=b[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=b[7],this.manufacturer=b[8],this.designer=b[9],this.description=b[10],this.vendorUrl=b[11],this.designerUrl=b[12],this.license=b[13],this.licenseUrl=b[14],this.preferredFamily=b[15],this.preferredSubfamily=b[17],this.compatibleFull=b[18],this.sampleText=b[19]},i})(),tv=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="maxp",i.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},i})(),nv=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="hmtx",i.prototype.parse=function(r){var a,s,l,d,v,p,b;for(r.pos=this.offset,this.metrics=[],a=0,p=this.file.hhea.numberOfMetrics;0<=p?a<p:a>p;a=0<=p?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var y,C;for(C=[],a=y=0;0<=l?y<l:y>l;a=0<=l?++y:--y)C.push(r.readInt16());return C})(),this.widths=(function(){var y,C,D,O;for(O=[],y=0,C=(D=this.metrics).length;y<C;y++)d=D[y],O.push(d.advance);return O}).call(this),s=this.widths[this.widths.length-1],b=[],a=v=0;0<=l?v<l:v>l;a=0<=l?++v:--v)b.push(this.widths.push(s));return b},i.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},i})(),Ay=[].slice,iv=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="glyf",i.prototype.parse=function(){return this.cache={}},i.prototype.glyphFor=function(r){var a,s,l,d,v,p,b,y,C,D;return r in this.cache?this.cache[r]:(d=this.file.loca,a=this.file.contents,s=d.indexOf(r),(l=d.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+s,v=(p=new Gu(a.read(l))).readShort(),y=p.readShort(),D=p.readShort(),b=p.readShort(),C=p.readShort(),this.cache[r]=v===-1?new av(p,y,D,b,C):new rv(p,v,y,D,b,C),this.cache[r]))},i.prototype.encode=function(r,a,s){var l,d,v,p,b;for(v=[],d=[],p=0,b=a.length;p<b;p++)l=r[a[p]],d.push(v.length),l&&(v=v.concat(l.encode(s)));return d.push(v.length),{table:v,offsets:d}},i})(),rv=(function(){function i(r,a,s,l,d,v){this.raw=r,this.numberOfContours=a,this.xMin=s,this.yMin=l,this.xMax=d,this.yMax=v,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i})(),av=(function(){function i(r,a,s,l,d){var v,p;for(this.raw=r,this.xMin=a,this.yMin=s,this.xMax=l,this.yMax=d,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],v=this.raw;p=v.readShort(),this.glyphOffsets.push(v.pos),this.glyphIDs.push(v.readUInt16()),32&p;)v.pos+=1&p?4:2,128&p?v.pos+=8:64&p?v.pos+=4:8&p&&(v.pos+=2)}return i.prototype.encode=function(){var r,a,s;for(a=new Gu(Ay.call(this.raw.data)),r=0,s=this.glyphIDs.length;r<s;++r)a.pos=this.glyphOffsets[r];return a.data},i})(),ov=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Hc(i,Tc),i.prototype.tag="loca",i.prototype.parse=function(r){var a,s;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var l,d;for(d=[],s=0,l=this.length;s<l;s+=2)d.push(2*r.readUInt16());return d}).call(this):(function(){var l,d;for(d=[],s=0,l=this.length;s<l;s+=4)d.push(r.readUInt32());return d}).call(this)},i.prototype.indexOf=function(r){return this.offsets[r]},i.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},i.prototype.encode=function(r,a){for(var s=new Uint32Array(this.offsets.length),l=0,d=0,v=0;v<s.length;++v)if(s[v]=l,d<a.length&&a[d]==v){++d,s[v]=l;var p=this.offsets[v],b=this.offsets[v+1]-p;b>0&&(l+=b)}for(var y=new Array(4*s.length),C=0;C<s.length;++C)y[4*C+3]=255&s[C],y[4*C+2]=(65280&s[C])>>8,y[4*C+1]=(16711680&s[C])>>16,y[4*C]=(4278190080&s[C])>>24;return y},i})(),sv=(function(){function i(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var r,a,s,l,d;for(a in l=this.font.cmap.tables[0].codeMap,r={},d=this.subset)s=d[a],r[a]=l[s];return r},i.prototype.glyphsFor=function(r){var a,s,l,d,v,p,b;for(l={},v=0,p=r.length;v<p;v++)l[d=r[v]]=this.font.glyf.glyphFor(d);for(d in a=[],l)(s=l[d])!=null&&s.compound&&a.push.apply(a,s.glyphIDs);if(a.length>0)for(d in b=this.glyphsFor(a))s=b[d],l[d]=s;return l},i.prototype.encode=function(r,a){var s,l,d,v,p,b,y,C,D,O,T,K,R,z,w;for(l in s=Ny.encode(this.generateCmap(),"unicode"),v=this.glyphsFor(r),T={0:0},w=s.charMap)T[(b=w[l]).old]=b.new;for(K in O=s.maxGlyphID,v)K in T||(T[K]=O++);return C=(function(we){var X,G;for(X in G={},we)G[we[X]]=X;return G})(T),D=Object.keys(C).sort(function(we,X){return we-X}),R=(function(){var we,X,G;for(G=[],we=0,X=D.length;we<X;we++)p=D[we],G.push(C[p]);return G})(),d=this.font.glyf.encode(v,R,T),y=this.font.loca.encode(d.offsets,R),z={cmap:this.font.cmap.raw(),glyf:d.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(z)},i})();Rn.API.PDFObject=(function(){var i;function r(){}return i=function(a,s){return(Array(s+1).join("0")+a).slice(-s)},r.convert=function(a){var s,l,d,v;if(Array.isArray(a))return"["+(function(){var p,b,y;for(y=[],p=0,b=a.length;p<b;p++)s=a[p],y.push(r.convert(s));return y})().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a?.isString)return"("+a+")";if(a instanceof Date)return"(D:"+i(a.getUTCFullYear(),4)+i(a.getUTCMonth(),2)+i(a.getUTCDate(),2)+i(a.getUTCHours(),2)+i(a.getUTCMinutes(),2)+i(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(l in d=["<<"],a)v=a[l],d.push("/"+l+" "+r.convert(v));return d.push(">>"),d.join(`
`)}return""+a},r})();const b0=i=>{const r=B0[i];return!r||!r.prefix||r.prefix.length<1?"?":r.prefix[0].substring(0,1).toUpperCase()},rc=(i,r,a)=>({color:r,size:a}),Nx=(i,r,a)=>{},xa=(i,r,a,s)=>({color:a,size:s}),Kd=(i,r,a,s)=>{},lv=()=>{const i=new Map,r={top:"#0072B2",bottom:"#56B4E9"},a={top:18,bottom:18},s={top:"#FFFF00",bottom:"#FFFF00"},l={top:18,bottom:18},d={top:"#AA4499",bottom:"#F781BF"},v={top:6,bottom:6},p={top:"#6A3D9A",bottom:"#9467BD"},b={top:18,bottom:18};return i.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:rc("select","#ff0000",10),layerSettings:new Map([["top",xa("select","top","#ff0000",10)],["bottom",xa("select","bottom","#ff0000",10)]])}),i.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:rc("via",Hh,Yh.DEFAULT_SIZE),layerSettings:new Map([["top",xa("via","top",Hh,Yh.DEFAULT_SIZE)],["bottom",xa("via","bottom",Hh,Yh.DEFAULT_SIZE)]]),defaultLayer:"top"}),i.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:rc("pad",Jm,18),layerSettings:new Map([["top",xa("pad","top",r.top,a.top)],["bottom",xa("pad","bottom",r.bottom,a.bottom)]]),defaultLayer:"top"}),i.set("testPoint",{id:"testPoint",name:"Test Point",toolType:"draw",drawingMode:"testPoint",icon:"",shortcut:"Y",tooltip:"Place test point",colorReflective:!0,settings:rc("testPoint","#FFFF00",18),layerSettings:new Map([["top",xa("testPoint","top",s.top,l.top)],["bottom",xa("testPoint","bottom",s.bottom,l.bottom)]]),defaultLayer:"top"}),i.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:rc("trace",Km,6),layerSettings:new Map([["top",xa("trace","top",d.top,v.top)],["bottom",xa("trace","bottom",d.bottom,v.bottom)]]),defaultLayer:"top"}),i.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:rc("component",Zm,I0.DEFAULT_SIZE),layerSettings:new Map([["top",xa("component","top",p.top,b.top)],["bottom",xa("component","bottom",p.bottom,b.bottom)]]),defaultLayer:"top"}),i.set("componentConnection",{id:"componentConnection",name:"Component Connections",toolType:"componentConnection",icon:"",shortcut:"",tooltip:"Component connection lines",colorReflective:!1,settings:rc("componentConnection","#E69F00",3),layerSettings:new Map([["top",xa("componentConnection","top","#E69F00",3)],["bottom",xa("componentConnection","bottom","#E69F00",3)]])}),i.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:rc("power",$h,18),layerSettings:new Map([["top",xa("power","top",$h,18)],["bottom",xa("power","bottom",$h,18)]]),defaultLayer:"top"}),i.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:rc("ground",Wh,18),layerSettings:new Map([["top",xa("ground","top",Wh,18)],["bottom",xa("ground","bottom",Wh,18)]]),defaultLayer:"top"}),i.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:rc("erase","#f5a3b3",18),layerSettings:new Map([["top",xa("erase","top","#f5a3b3",18)],["bottom",xa("erase","bottom","#f5a3b3",18)]])}),i.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:rc("pan","#ff0000",10),layerSettings:new Map([["top",xa("pan","top","#ff0000",10)],["bottom",xa("pan","bottom","#ff0000",10)]])}),i.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"M",tooltip:"Magnify",colorReflective:!1,settings:rc("magnify","#ff0000",10),layerSettings:new Map([["top",xa("magnify","top","#ff0000",10)],["bottom",xa("magnify","bottom","#ff0000",10)]])}),i},Ax={via:{color:"#2CA02C",size:18},padTop:{color:"#0072B2",size:18},padBottom:{color:"#56B4E9",size:18},testPointTop:{color:"#FFFF00",size:18},testPointBottom:{color:"#FFFF00",size:18},traceTop:{color:"#AA4499",size:6},traceBottom:{color:"#F781BF",size:6},componentTop:{color:"#6A3D9A",size:18},componentBottom:{color:"#9467BD",size:18},power:{color:"#ff0000",size:18},ground:{color:"#000000",size:18}},Mf={via:"Via",padTop:"Pad (Top)",padBottom:"Pad (Bottom)",testPointTop:"Test Point (Top)",testPointBottom:"Test Point (Bottom)",traceTop:"Trace (Top)",traceBottom:"Trace (Bottom)",componentTop:"Component (Top)",componentBottom:"Component (Bottom)",power:"Power",ground:"Ground"};class cv{instances=new Map;listeners=new Map;initialize(){for(const r of Object.keys(Ax)){const a=Ax[r];this.instances.set(r,{id:r,name:Mf[r],color:a.color,size:a.size}),this.listeners.set(r,new Set)}}initializeFromProject(r){if(this.initialize(),r?.toolInstances)for(const[a,s]of Object.entries(r.toolInstances))this.instances.has(a)&&this.instances.set(a,s)}get(r){const a=this.instances.get(r);if(!a)throw new Error(`Tool instance ${r} not found`);return a}getColor(r){const a=this.instances.get(r);if(!a)throw new Error(`Tool instance ${r} not found`);const s=Mf[r];return console.log(`${s}, returning color value=${a.color}`),a.color}getSize(r){const a=this.instances.get(r);if(!a)throw new Error(`Tool instance ${r} not found`);const s=Mf[r];return console.log(`${s}, returning size value=${a.size}`),a.size}setColor(r,a){const s=this.instances.get(r);if(s){const l=Mf[r];console.log(`${l}, setting color value=${a}`),s.color=a,this.notifyListeners(r)}}setSize(r,a){const s=this.instances.get(r);if(s){const l=Mf[r];console.log(`${l}, setting size value=${a}`),s.size=a,this.notifyListeners(r)}}getAll(){const r={};for(const[a,s]of this.instances.entries())r[a]=s;return r}subscribe(r,a){const s=this.listeners.get(r);return s?(s.add(a),()=>{s.delete(a)}):()=>{}}notifyListeners(r){const a=this.listeners.get(r);a&&a.forEach(s=>s())}}const Bn=new cv;Bn.initialize();function Wp(i,r){switch(i){case"via":return"via";case"pad":return r==="bottom"?"padBottom":"padTop";case"testPoint":return r==="bottom"?"testPointBottom":"testPointTop";case"trace":return r==="bottom"?"traceBottom":"traceTop";case"component":return r==="bottom"?"componentBottom":"componentTop";case"power":return"power";case"ground":return"ground";default:throw new Error(`Unknown tool: ${i}`)}}const uv=({visible:i,toolRegistry:r,currentTool:a,drawingMode:s,traceToolLayer:l,padToolLayer:d,testPointToolLayer:v,componentToolLayer:p,updateToolSettings:b,updateToolLayerSettings:y,setBrushSize:C,saveToolSettings:D,saveToolLayerSettings:O,setTopTraceSize:T,setBottomTraceSize:K,setTopPadSize:R,setBottomPadSize:z,setTopTestPointSize:w,setBottomTestPointSize:we,setTopComponentSize:X,setBottomComponentSize:G,setComponentConnectionSize:J,saveDefaultSize:ue,onClose:oe})=>{const[ie,E]=M.useState({}),Y=[{id:"via",name:"Via",instanceId:"via"},{id:"pad",name:"Pad",layer:"top",instanceId:"padTop"},{id:"pad",name:"Pad",layer:"bottom",instanceId:"padBottom"},{id:"testPoint",name:"Test Point",layer:"top",instanceId:"testPointTop"},{id:"testPoint",name:"Test Point",layer:"bottom",instanceId:"testPointBottom"},{id:"trace",name:"Trace",layer:"top",instanceId:"traceTop"},{id:"trace",name:"Trace",layer:"bottom",instanceId:"traceBottom"},{id:"component",name:"Component",layer:"top",instanceId:"componentTop"},{id:"component",name:"Component",layer:"bottom",instanceId:"componentBottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power",instanceId:"power"},{id:"ground",name:"Ground",instanceId:"ground"},{id:"erase",name:"Erase"}];M.useEffect(()=>{if(i){const $={};for(const H of Y){const Pe=H.instanceId||H.id;if(H.instanceId)try{const ae=Bn.get(H.instanceId);$[Pe]=ae.size}catch{const ae=r.get(H.id);ae&&($[Pe]=H.layer?ae.layerSettings.get(H.layer)?.size??ae.settings.size??10:ae.settings.size??10)}else{const ae=r.get(H.id);ae&&($[Pe]=ae.settings.size??10)}}E($)}},[i]);const F=M.useCallback(($,H,Pe,ae)=>{if(!r.get($)&&$!=="componentConnection")return;const pe=ae||$;E(fe=>({...fe,[pe]:H})),["trace","pad","testPoint","component"].includes($)&&Pe&&ae?(Bn.setSize(ae,H),($==="trace"&&a==="draw"&&s==="trace"||$==="pad"&&a==="draw"&&s==="pad"||$==="testPoint"&&a==="draw"&&s==="testPoint"||$==="component"&&a==="component")&&(($==="trace"?l:$==="pad"?d:$==="testPoint"?v:p)||"top")===Pe&&C(H)):ae?(Bn.setSize(ae,H),($==="via"&&a==="draw"&&s==="via"||$==="power"&&a==="power"||$==="ground"&&a==="ground")&&C(H)):($==="componentConnection"&&(J(H),ue("componentConnection",H)),$==="erase"&&a==="erase"&&C(H))},[r,a,s,l,d,v,p,C,J,ue]);if(!i)return null;const L=Array.from({length:50},($,H)=>H+1);return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:$=>{$.target===$.currentTarget&&oe()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",maxWidth:"400px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:$=>$.stopPropagation(),children:[n.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Size"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Y.map(($,H)=>{if(!r.get($.id)&&$.id!=="componentConnection")return null;const ae=$.layer?`${$.name} (${$.layer==="top"?"Top":"Bottom"})`:$.name,ve=$.instanceId||$.id,pe=ie[ve]??10;return n.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[n.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[ae,":"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[n.jsx("select",{value:pe,onChange:Ce=>{const fe=parseInt(Ce.target.value,10);F($.id,fe,$.layer,$.instanceId)},style:{width:"50px",padding:"4px 6px",background:"#2b2b31",border:"1px solid #3a3a44",borderRadius:4,color:"#f2f2f2",fontSize:"12px",cursor:"pointer"},children:L.map(Ce=>n.jsx("option",{value:Ce,style:{background:"#2b2b31",color:"#f2f2f2"},children:Ce},Ce))}),n.jsx("span",{style:{color:"#f2f2f2",fontSize:"12px"},children:"px"})]})]},`${$.id}-${$.layer||"default"}-${H}`)})}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:n.jsx("button",{onClick:oe,style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},dv=({visible:i,toolRegistry:r,currentTool:a,drawingMode:s,traceToolLayer:l,padToolLayer:d,testPointToolLayer:v,componentToolLayer:p,updateToolSettings:b,updateToolLayerSettings:y,saveToolSettings:C,saveToolLayerSettings:D,setBrushColor:O,setTopTraceColor:T,setBottomTraceColor:K,setTopPadColor:R,setBottomPadColor:z,setTopTestPointColor:w,setBottomTestPointColor:we,setTopComponentColor:X,setBottomComponentColor:G,setComponentConnectionColor:J,saveDefaultColor:ue,colorPalette:oe,onClose:ie})=>{const[E,Y]=Dt.useState(null),[F,L]=Dt.useState(0);if(Dt.useEffect(()=>{const ve=[];return[{id:"via"},{id:"pad",layer:"top"},{id:"pad",layer:"bottom"},{id:"testPoint",layer:"top"},{id:"testPoint",layer:"bottom"},{id:"trace",layer:"top"},{id:"trace",layer:"bottom"},{id:"component",layer:"top"},{id:"component",layer:"bottom"},{id:"power"},{id:"ground"}].forEach(({id:Ce,layer:fe})=>{try{const k=Wp(Ce,fe),A=Bn.subscribe(k,()=>{L(W=>W+1)});ve.push(A)}catch{}}),()=>{ve.forEach(Ce=>Ce())}},[]),!i)return null;const $=["pad","testPoint","trace","component"],H=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],Pe=(ve,pe,Ce)=>{if(ve==="componentConnection"){J(pe),ue("componentConnection",pe),Y(null);return}if(ve==="erase"){const fe=r.get(ve);fe&&(b(ve,{...fe.settings,color:pe}),C(ve,pe,fe.settings.size)),Y(null);return}try{let fe;Ce&&$.includes(ve)?fe=Wp(ve,Ce):fe=Wp(ve),Bn.setColor(fe,pe),(ve==="via"&&a==="draw"&&s==="via"||ve==="trace"&&a==="draw"&&s==="trace"||ve==="pad"&&a==="draw"&&s==="pad"||ve==="testPoint"&&a==="draw"&&s==="testPoint"||ve==="component"&&a==="component"||ve==="power"&&a==="power"||ve==="ground"&&a==="ground")&&(Ce&&$.includes(ve)?((ve==="trace"?l:ve==="pad"?d:ve==="testPoint"?v:p)||"top")===Ce&&O(pe):O(pe))}catch(fe){console.error(`Error updating color for tool ${ve}:`,fe);const k=r.get(ve);k&&(Ce&&$.includes(ve)?(y(ve,Ce,{...k.layerSettings.get(Ce),color:pe}),D(ve,Ce,pe,k.layerSettings.get(Ce)?.size||k.settings.size)):(b(ve,{...k.settings,color:pe}),C(ve,pe,k.settings.size)))}Y(null)},ae=(ve,pe)=>{let Ce;try{const A=Wp(ve,pe);Ce=Bn.get(A).color}catch{const A=r.get(ve);if(!A)return null;Ce=A.settings.color??"#000000"}const fe=pe?`${ve}-${pe}`:ve,k=E?.toolId===ve&&E?.layer===pe;return n.jsxs("div",{style:{position:"relative",display:"inline-block",zIndex:10005},children:[n.jsx("button",{className:"color-swatch-button",onClick:A=>{A.stopPropagation(),Y(k?null:{toolId:ve,layer:pe})},style:{width:"40px",height:"24px",background:Ce,backgroundColor:Ce,backgroundImage:"none",border:"1px solid #3a3a44",borderRadius:3,cursor:"pointer",padding:0,margin:0,display:"block","--swatch-color":Ce},title:Ce},`${fe}-button-${Ce}-${F}`),k&&n.jsx("div",{onClick:A=>{A.stopPropagation()},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:100},children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:oe.map(A=>n.jsx("div",{onClick:()=>Pe(ve,A,pe),title:A,style:{width:22,height:22,backgroundColor:A,border:A===Ce?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},A))})})]},`${fe}-${Ce}-${F}`)};return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:ve=>{ve.target===ve.currentTarget&&(ie(),Y(null))},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",minWidth:"450px",maxWidth:"600px",maxHeight:"85vh",overflowY:"auto",overflowX:"visible",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:ve=>ve.stopPropagation(),children:[n.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Color"}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:H.map((ve,pe)=>{if(!r.get(ve.id))return null;const fe=ve.layer?`${ve.name} (${ve.layer==="top"?"Top":"Bottom"})`:ve.name;return n.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[n.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[fe,":"]}),ae(ve.id,ve.layer)]},`${ve.id}-${ve.layer||"default"}-${pe}`)})}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:n.jsx("button",{onClick:()=>{ie(),Y(null)},style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},fv=({openMenu:i,setOpenMenu:r,isReadOnlyMode:a,currentProjectFilePath:s,isProjectActive:l,autoSaveEnabled:d,autoSaveInterval:v,hasUnsavedChangesState:p,onNewProject:b,onOpenProject:y,onSaveProject:C,onPrint:D,onExportBOM:O,hasUnsavedChanges:T,bomExportFormat:K,setBomExportFormat:R,setNewProjectDialog:z,setAutoSaveDialog:w,onShowGeminiSettings:we,topImage:X,bottomImage:G,setCurrentTool:J,resetImageTransform:ue,areImagesLocked:oe,setAreImagesLocked:ie,onEnterBoardDimensions:E,fileInputTopRef:Y,fileInputBottomRef:F,openProjectRef:L,increaseSize:$,decreaseSize:H,brushSize:Pe,drawingStrokes:ae,selectedIds:ve,selectedComponentIds:pe,selectedPowerIds:Ce,selectedGroundIds:fe,componentsTop:k,componentsBottom:A,powers:W,grounds:q,powerNodeNames:te,groundNodeNames:xe,setSetSizeDialog:ee,areViasLocked:Ie,setAreViasLocked:_e,arePadsLocked:Fe,setArePadsLocked:nt,areTestPointsLocked:lt,setAreTestPointsLocked:kt,areTracesLocked:It,setAreTracesLocked:ne,areComponentsLocked:jt,setAreComponentsLocked:Qt,areGroundNodesLocked:Wt,setAreGroundNodesLocked:xt,arePowerNodesLocked:Je,setArePowerNodesLocked:Gt,showTraceCornerDots:un,setShowTraceCornerDots:Zt,setSelectedIds:_n,setSelectedComponentIds:Rt,setSelectedPowerIds:Le,setSelectedGroundIds:ke,selectAllVias:Xe,selectAllTraces:et,selectAllPads:Pt,selectAllComponents:St,selectDisconnectedComponents:_t,selectAllComponentConnections:Ut,selectAllPowerNodes:qt,selectAllGroundNodes:Xt,selectPowerNodesByName:it,selectGroundNodesByName:an,setShowPowerBusManager:Bt,setShowGroundBusManager:Kt,setShowPastMachine:dn,toolRegistry:ti,updateToolSettings:Nn,updateToolLayerSettings:xn,setBrushSize:Ot,setBrushColor:ji,saveToolSettings:In,saveToolLayerSettings:er,colorPalette:Gi,currentTool:Ft,drawingMode:Pi,traceToolLayer:gi,padToolLayer:Et,testPointToolLayer:Ke,componentToolLayer:Vt,setTopTraceSize:$t,setBottomTraceSize:On,setTopPadSize:En,setBottomPadSize:Hi,setTopTestPointSize:Gn,setBottomTestPointSize:ai,setTopComponentSize:Li,setBottomComponentSize:tr,setComponentConnectionSize:co,topTraceColor:pl,bottomTraceColor:ko,topPadColor:No,bottomPadColor:is,topTestPointColor:Zn,bottomTestPointColor:ka,topComponentColor:bi,bottomComponentColor:uo,setTopTraceColor:Fn,setBottomTraceColor:Ns,setTopPadColor:xi,setBottomPadColor:Xa,setTopTestPointColor:fo,setBottomTestPointColor:As,setTopComponentColor:zs,setBottomComponentColor:Ao,setComponentConnectionColor:Cc,saveDefaultSize:ar,saveDefaultColor:Ps,menuBarRef:Wn,onOpenProjectNotes:Hn,onOpenTransformImages:_s,onOpenTransformAll:qo})=>{const[po,Oa]=Dt.useState(null),vi=Dt.useRef(null),[Wi,yi]=Dt.useState(null),_r=Dt.useRef(null),[sc,Ea]=Dt.useState(!1),[Na,hl]=Dt.useState(!1),Ka=Mt=>{if(!l){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),r(null);return}const Fi=Mt();Fi instanceof Promise&&Fi.catch(Vo=>{const Xs=Vo instanceof Error?Vo.message:String(Vo);console.error("Error in requireProject action:",Vo),alert(`An error occurred:

${Xs}

See console for details.`)})},ua=Mt=>{const Fi=Mt==="power"?te:xe,Vo=Fi.length>0,Xs=Mt==="power"?"Select Power Nodes":"Select Ground Nodes";return n.jsxs("div",{onMouseEnter:()=>{vi.current&&(clearTimeout(vi.current),vi.current=null),Oa(Mt)},onMouseLeave:()=>{vi.current=window.setTimeout(()=>{Oa(Ur=>Ur===Mt?null:Ur)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[n.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[Xs," by Name"]}),n.jsxs("button",{onClick:()=>{Mt==="power"?qt():Xt(),Oa(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",Mt==="power"?"Power Nodes":"Ground Nodes"]}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),Vo?Fi.map(Ur=>n.jsx("button",{onClick:()=>{Mt==="power"?it(Ur):an(Ur),Oa(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:Ur},Ur)):n.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",Mt==="power"?"power":"ground"," nodes available."]})]})},Fa=()=>n.jsxs("div",{onMouseEnter:()=>{_r.current&&(clearTimeout(_r.current),_r.current=null),yi("lock")},onMouseLeave:()=>{_r.current=window.setTimeout(()=>{yi(Mt=>Mt==="lock"?null:Mt)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[n.jsxs("label",{onClick:Mt=>{Mt.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[n.jsx("input",{type:"checkbox",checked:Ie,onChange:()=>{_e(Mt=>!Mt)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),n.jsx("span",{children:"Lock Vias"})]}),n.jsxs("label",{onClick:Mt=>{Mt.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[n.jsx("input",{type:"checkbox",checked:Fe,onChange:()=>{nt(Mt=>!Mt)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),n.jsx("span",{children:"Lock Pads"})]}),n.jsxs("label",{onClick:Mt=>{Mt.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[n.jsx("input",{type:"checkbox",checked:lt,onChange:()=>{kt(Mt=>!Mt)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),n.jsx("span",{children:"Lock Test Points"})]}),n.jsxs("label",{onClick:Mt=>{Mt.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[n.jsx("input",{type:"checkbox",checked:It,onChange:()=>{ne(Mt=>!Mt)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),n.jsx("span",{children:"Lock Traces"})]}),n.jsxs("label",{onClick:Mt=>{Mt.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[n.jsx("input",{type:"checkbox",checked:jt,onChange:()=>{Qt(Mt=>!Mt)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),n.jsx("span",{children:"Lock Components"})]}),n.jsxs("label",{onClick:Mt=>{Mt.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[n.jsx("input",{type:"checkbox",checked:Wt,onChange:()=>{xt(Mt=>!Mt)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),n.jsx("span",{children:"Lock Ground Node"})]}),n.jsxs("label",{onClick:Mt=>{Mt.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[n.jsx("input",{type:"checkbox",checked:Je,onChange:()=>{Gt(Mt=>!Mt)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),n.jsx("span",{children:"Lock Power Nodes"})]})]}),zo=()=>n.jsxs("div",{onMouseEnter:()=>{_r.current&&(clearTimeout(_r.current),_r.current=null),yi("select")},onMouseLeave:()=>{_r.current=window.setTimeout(()=>{yi(Mt=>Mt==="select"?null:Mt)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[n.jsx("button",{onClick:()=>{Xe(),yi(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Vias"}),n.jsx("button",{onClick:()=>{et(),yi(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Traces"}),n.jsx("button",{onClick:()=>{Pt(),yi(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Pads"}),n.jsx("button",{onClick:()=>{const Mt=new Set(ae.filter(Fi=>Fi.type==="testPoint").map(Fi=>Fi.id));_n(Mt),Rt(new Set),Le(new Set),ke(new Set),yi(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Test Points"}),n.jsx("button",{onClick:()=>{St(),yi(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Components"}),n.jsx("button",{onClick:()=>{Ut(),yi(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Component Connections"}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onMouseEnter:()=>{vi.current&&(clearTimeout(vi.current),vi.current=null),Oa("power")},onMouseLeave:()=>{vi.current=window.setTimeout(()=>{Oa(Mt=>Mt==="power"?null:Mt)},200)},onClick:()=>{Oa(Mt=>Mt==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Power Nodes "}),po==="power"&&ua("power")]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onMouseEnter:()=>{vi.current&&(clearTimeout(vi.current),vi.current=null),Oa("ground")},onMouseLeave:()=>{vi.current=window.setTimeout(()=>{Oa(Mt=>Mt==="ground"?null:Mt)},200)},onClick:()=>{Oa(Mt=>Mt==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Ground Nodes "}),po==="ground"&&ua("ground")]}),n.jsx("button",{onClick:()=>{_t(),yi(null),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Disconnected Components"})]});return n.jsxs(n.Fragment,{children:[n.jsxs("div",{ref:Wn,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:Mt=>{Mt.stopPropagation(),r(Fi=>Fi==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:i==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),i==="file"&&n.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[n.jsx("button",{onClick:()=>{a||(r(null),T()?z({visible:!0}):b())},disabled:a,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a?"not-allowed":"pointer"},children:"New Project"}),n.jsx("button",{onClick:async()=>{await y(),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{a||Ka(()=>{C(),r(null)})},disabled:a||!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||!l?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||!l?"not-allowed":"pointer"},children:"Save Project"}),n.jsx("button",{onClick:()=>{a||Ka(()=>{w({visible:!0,interval:5}),r(null)})},disabled:a||!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||!l?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||!l?"not-allowed":"pointer"},children:"Auto Save"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{dn(!0),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Restore from History"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{we(),r(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"AI Settings"}),n.jsx("button",{onClick:async()=>{if(!a){if(!l){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),r(null);return}try{await O(),r(null)}catch(Mt){console.error("Error exporting BOM:",Mt)}}},disabled:a||!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||!l?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||!l?"not-allowed":"pointer"},children:"Export BOM"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{Ka(()=>{D(),r(null)})},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Print"}),n.jsx("button",{onClick:()=>{Ka(()=>{D(),r(null)})},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Printer Settings"})]})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:Mt=>{a||(Mt.stopPropagation(),r(Fi=>Fi==="transform"?null:"transform"))},disabled:a,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:i==="transform"?"#eef3ff":"#fff",fontWeight:600,color:a?"#999":"#222",cursor:a?"not-allowed":"pointer",opacity:a?.5:1},children:"Images "}),i==="transform"&&n.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[n.jsx("button",{onClick:()=>{!a&&!oe&&l&&(Y.current?.click(),r(null))},disabled:a||oe||!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||oe||!l?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||oe||!l?"not-allowed":"pointer"},children:"Load Top PCB"}),n.jsx("button",{onClick:()=>{!a&&!oe&&l&&(F.current?.click(),r(null))},disabled:a||oe||!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:a||oe||!l?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:a||oe||!l?"not-allowed":"pointer"},children:"Load Bottom PCB"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{!oe&&l&&(E(),r(null))},disabled:oe||!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe||!l?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe||!l?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{l&&(_s(),r(null))},disabled:!X&&!G||oe||!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!X&&!G||oe||!l?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!X&&!G||oe||!l?"not-allowed":"pointer"},children:"Transform Images"}),n.jsx("button",{onClick:()=>{!oe&&l&&(J("transform"),ue(),r(null))},disabled:oe||!X&&!G||!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe||!X&&!G||!l?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe||!X&&!G||!l?"not-allowed":"pointer"},children:"Reset Transform"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{l&&(ie(Mt=>!Mt),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:oe?"Unlock Images ":"Lock Images"})]})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:Mt=>{a||(Mt.stopPropagation(),r(Fi=>Fi==="tools"?null:"tools"))},disabled:a,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:i==="tools"?"#eef3ff":"#fff",fontWeight:600,color:a?"#999":"#222",cursor:a?"not-allowed":"pointer",opacity:a?.5:1},children:"Tools "}),i==="tools"&&n.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[n.jsx("button",{onClick:()=>{l&&(qo(),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Change Perspective"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:Mt=>{l&&($(Mt.shiftKey?5:1),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Increase Size (+)"}),n.jsx("button",{onClick:Mt=>{l&&(H(Mt.shiftKey?5:1),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Decrease Size (-)"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onMouseEnter:()=>{l&&_r.current&&(clearTimeout(_r.current),_r.current=null),l&&yi("lock")},onMouseLeave:()=>{l&&(_r.current=window.setTimeout(()=>{yi(Mt=>Mt==="lock"?null:Mt)},200))},onClick:()=>{l&&yi(Mt=>Mt==="lock"?null:"lock")},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Lock "}),Wi==="lock"&&l&&Fa()]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onMouseEnter:()=>{l&&_r.current&&(clearTimeout(_r.current),_r.current=null),l&&yi("select")},onMouseLeave:()=>{l&&(_r.current=window.setTimeout(()=>{yi(Mt=>Mt==="select"?null:Mt)},200))},onClick:()=>{l&&yi(Mt=>Mt==="select"?null:"select")},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Select "}),Wi==="select"&&l&&zo()]}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{l&&(Hn(),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Open Project Notes"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{l&&(Ea(!0),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Set Tool Sizes"}),n.jsx("button",{onClick:()=>{l&&(hl(!0),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Set Tool Colors"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsx("button",{onClick:()=>{l&&(Bt(!0),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Manage Power Buses"}),n.jsx("button",{onClick:()=>{l&&(Kt(!0),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:"Manage Ground Buses"}),n.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),n.jsxs("button",{onClick:()=>{l&&(Zt(!un),r(null))},disabled:!l,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:l?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:l?"pointer":"not-allowed"},children:[un?" ":"   ","Show Trace Corner Dots"]})]})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:Mt=>{Mt.stopPropagation(),r(Fi=>Fi==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:i==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),i==="about"&&n.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:n.jsxs("div",{style:{marginBottom:16},children:[n.jsx("h2",{style:{margin:"0 0 16px 0",color:"#f2f2f2",fontSize:"20px",fontWeight:700},children:"PCB Tracer"}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"About"}),n.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool useful for both reverse engineering and troubleshooting electronics by tracing and documenting circuit connections from PCB images. This application supports typical 2 to 4 layer PCBs and enables comprehensive PCB analysis and documentation."}),n.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"This tool can assist in troubleshooting by tracing circuits, holding contextual notes, comparing test results, and documenting findings during the debugging process."})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Technologies"}),n.jsxs("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:["Built with ",n.jsx("strong",{children:"TypeScript"})," and ",n.jsx("strong",{children:"React"}),", with ",n.jsx("strong",{children:"Gemini AI"})," integration for intelligent pin name extraction from datasheets. The application runs entirely client-side in the browser, providing a responsive, interactive drawing experience with no backend server requirements."]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Features"}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Via/Pad Placement"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsxs("li",{children:["Alt/Option+click the Via or Pad tool, or press ",n.jsx("code",{children:"Alt/Option+V"})," or ",n.jsx("code",{children:"Alt/Option+P"})," to open the placement dialog"]}),n.jsx("li",{children:"Place multiple vias or pads in Linear, 2-Sided, or 4-Sided arrangements"}),n.jsx("li",{children:"Automatic counter-clockwise numbering starting from Pin 1"}),n.jsx("li",{children:"Supports chip orientations of 0, 90, 180, or 270"}),n.jsx("li",{children:"Click and drag to define the placement area"}),n.jsx("li",{children:"Tool automatically returns to Select tool after placement"})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Tools & Shortcuts"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#f2f2f2"},children:[n.jsx("div",{children:n.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Select"}),"  ",n.jsx("code",{children:"S"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Via"}),"  ",n.jsx("code",{children:"V"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Pad"}),"  ",n.jsx("code",{children:"P"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Test Point"}),"  ",n.jsx("code",{children:"Y"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Trace"}),"  ",n.jsx("code",{children:"T"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Component"}),"  ",n.jsx("code",{children:"C"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Component Properties"}),"  double-click component"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Resize Icons"}),"  ",n.jsx("code",{children:"+"})," / ",n.jsx("code",{children:"-"})," (",n.jsx("code",{children:"Shift"})," + ",n.jsx("code",{children:"+"})," / ",n.jsx("code",{children:"-"})," = 5x faster)"]})]})}),n.jsx("div",{children:n.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Power"}),"  ",n.jsx("code",{children:"B"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ground"}),"  ",n.jsx("code",{children:"G"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Move (Pan)"}),"  ",n.jsx("code",{children:"H"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Magnify"}),"  ",n.jsx("code",{children:"M"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Set View"}),"  ",n.jsx("code",{children:"X"})," then ",n.jsx("code",{children:"0-9"})," to save view"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Recall View"}),"  ",n.jsx("code",{children:"0-9"})," to recall saved view"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Default View 0"}),"  ",n.jsx("code",{children:"0"})," to recall default view (origin with all images contained)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Information Dialog"}),"  ",n.jsx("code",{children:"I"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Notes Dialog"}),"  ",n.jsx("code",{children:"N"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Project Notes / TODO"}),"  ",n.jsx("code",{children:"L"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Undo"}),"  ",n.jsx("code",{children:"Ctrl"})," + ",n.jsx("code",{children:"Z"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Copy Component"}),"  ",n.jsx("code",{children:"Ctrl"})," + ",n.jsx("code",{children:"C"})," / ",n.jsx("code",{children:"Cmd"})," + ",n.jsx("code",{children:"C"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Paste Component"}),"  ",n.jsx("code",{children:"Ctrl"})," + ",n.jsx("code",{children:"V"})," / ",n.jsx("code",{children:"Cmd"})," + ",n.jsx("code",{children:"V"})]})]})})]}),n.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#f2f2f2"},children:[n.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Arrow Keys"}),n.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components (1 unit per press, ",n.jsx("code",{children:"Shift"})," = 10 units)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Switch Perspective"}),"  ",n.jsx("code",{children:"Shift"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," or ",n.jsx("code",{children:"Caps Lock"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," to switch between top/bottom view"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Rotate Perspective"}),"  ",n.jsx("code",{children:"Shift"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," or ",n.jsx("code",{children:"Caps Lock"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," to rotate in 90 increments (",n.jsx("code",{children:""})," = counter-clockwise, ",n.jsx("code",{children:""})," = clockwise)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Image Transformations"}),"  Arrow keys for scaling, rotating, and adjusting image transformations (when image is selected for transform)"]}),n.jsx("li",{children:"Click a slider first, then use arrow keys for precise adjustment"})]})]})]}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 20px"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Image Management"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Load top and bottom PCB images"}),n.jsx("li",{children:"Image alignment and transformation"}),n.jsx("li",{children:"Transform modes: nudge, scale, rotate, slant, keystone"}),n.jsx("li",{children:"Horizontal and vertical flip controls"}),n.jsx("li",{children:"Brightness and contrast controls"}),n.jsx("li",{children:"Grayscale mode"}),n.jsx("li",{children:"Automated transparency slider"}),n.jsx("li",{children:"Board dimensions configuration"})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Drawing Tools"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Draw copper traces (top and bottom layers)"}),n.jsx("li",{children:"Place vias for layer connections"}),n.jsx("li",{children:"Place component pads (SMD and through-hole)"}),n.jsx("li",{children:"Place test points for circuit testing"}),n.jsx("li",{children:"Place and annotate components"}),n.jsx("li",{children:"Place power and ground nodes"}),n.jsx("li",{children:"Erase tool for removing elements"})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Layer Management"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"14 independent layers to manage PCB element types"}),n.jsx("li",{children:"Separate top and bottom layer support"}),n.jsx("li",{children:"Layer-specific color customization"}),n.jsx("li",{children:"Layer-specific size controls"}),n.jsx("li",{children:"Layer visibility toggles"}),n.jsx("li",{children:"Overlay view mode"})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Component Management"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Component placement with pin counts"}),n.jsx("li",{children:"Pin connection tracking"}),n.jsx("li",{children:"Component type classification"}),n.jsx("li",{children:"Designator and value annotation"}),n.jsx("li",{children:"Component editor dialog"}),n.jsx("li",{children:"Find and center component"})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Selection & Locking"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Select individual elements or groups"}),n.jsx("li",{children:"Select all vias, traces, pads, or components"}),n.jsx("li",{children:"Select power/ground nodes by name"}),n.jsx("li",{children:"Select disconnected components"}),n.jsx("li",{children:"Lock/unlock elements by type"}),n.jsx("li",{children:"Image locking for protection"})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Power & Ground"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Multiple voltage power nodes"}),n.jsx("li",{children:"Power bus management"}),n.jsx("li",{children:"Ground node placement"}),n.jsx("li",{children:"Ground bus management"}),n.jsx("li",{children:"Node naming and organization"})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Customization"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Customizable colors per layer"}),n.jsx("li",{children:"Adjustable brush/tool sizes"}),n.jsx("li",{children:"Size presets for common tools"}),n.jsx("li",{children:"Color palette management"}),n.jsx("li",{children:"Tool settings persistence"})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Project Management"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Create, open, and save projects"}),n.jsx("li",{children:"Auto-save with configurable intervals"}),n.jsx("li",{children:"File history automatically saved in history subdirectory when Auto Save is enabled"}),n.jsx("li",{children:"Project Notes / TODO list with spreadsheet-like editing"}),n.jsx("li",{children:"Project file format (JSON)"}),n.jsx("li",{children:"Print functionality"}),n.jsx("li",{children:"Export to KiCad schematic format (future feature, not yet implemented)"})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"View Controls"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Zoom in/out with mouse wheel"}),n.jsx("li",{children:"Pan view with hand tool"}),n.jsx("li",{children:"Zoom to fit"}),n.jsx("li",{children:"View mode switching (top/bottom/overlay)"}),n.jsx("li",{children:"Save up to 10 view locations (X + 0-9)"}),n.jsx("li",{children:"Recall saved views instantly (0-9 keys)"}),n.jsxs("li",{children:["Default View 0: Press ",n.jsx("code",{children:"0"})," to recall the default view showing the origin with all loaded images fully contained within the canvas"]}),n.jsx("li",{children:"Change Perspective (Tools menu) - switch between top/bottom view and rotate all elements"}),n.jsx("li",{children:"Detailed information dialog"})]})]})]})]}),n.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:n.jsxs("p",{style:{margin:"0 0 8px 0",color:"#bbb",fontSize:"12px",lineHeight:"1.5"},children:["Use the ",n.jsx("strong",{children:"File"})," menu to manage projects, the ",n.jsx("strong",{children:"Images"})," menu for image loading and transformation, and the ",n.jsx("strong",{children:"Tools"})," menu for selection, locking, and customization options."]})}),n.jsxs("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Future / TODO List"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"A searchable list of common components"}),n.jsx("li",{children:"Output schematics (perhaps as KiCad files)"}),n.jsx("li",{children:"Dynamic layers"}),n.jsx("li",{children:"Create a desktop version of this application using Electron"})]})]})]})})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:Mt=>{Mt.stopPropagation(),r(Fi=>Fi==="help"?null:"help")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:i==="help"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"Help "}),i==="help"&&n.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:n.jsxs("div",{style:{marginBottom:16},children:[n.jsx("h2",{style:{margin:"0 0 16px 0",color:"#f2f2f2",fontSize:"20px",fontWeight:700},children:"Help: Typical Usage Steps"}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 1: Create or Open a Project"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"New Project:"})," File  New Project. Choose a project name and location."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Open Project:"})," File  Open Project. Select an existing project file (.json)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Auto-Save:"})," File  Auto Save  Enable to automatically save your work at regular intervals."]})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 2: Load PCB Images"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Load Top Image:"})," Images  Load Top Image. Select your top-side PCB photo (.png or .jpeg)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Load Bottom Image:"})," Images  Load Bottom Image. Select your bottom-side PCB photo."]}),n.jsxs("li",{children:["Images are automatically copied to the ",n.jsx("code",{style:{background:"#1f1f24",padding:"2px 4px",borderRadius:3,color:"#fff"},children:"images/"})," subdirectory."]})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 3: Align and Transform Images"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Enter Transform Mode:"})," Images  Transform Images. Select which image (Top or Bottom) to transform."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Transform Operations:"})," Use Move, Nudge, Scale, Rotate, Slant, or Keystone to align images."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Image Adjustments:"})," Adjust brightness, contrast, sharpness, and grayscale as needed."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Flip Images:"})," Use horizontal or vertical flip if your images are mirrored."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Arrow Keys:"})," When transform tool is active, use arrow keys for precise image adjustments."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Move Components:"})," Select components, then use arrow keys to move them (1 unit per press, ",n.jsx("code",{children:"Shift"})," = 10 units for larger steps)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Change Perspective:"})," Tools  Change Perspective (or press ",n.jsx("code",{children:"E"}),") to switch between top/bottom view or rotate all elements (images, components, traces) together by 90, 180, or 270."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Quick Perspective Switch:"})," Press ",n.jsx("code",{children:"Shift"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," or ",n.jsx("code",{children:"Caps Lock"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," to quickly switch between top/bottom view."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Quick Perspective Rotation:"})," Press ",n.jsx("code",{children:"Shift"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," or ",n.jsx("code",{children:"Caps Lock"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," to rotate perspective in 90 increments (",n.jsx("code",{children:""})," = counter-clockwise, ",n.jsx("code",{children:""})," = clockwise)."]})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 4: Set Board Dimensions"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Enter Dimensions:"})," Images  Enter Board Dimensions. Specify the actual physical dimensions of your PCB."]}),n.jsx("li",{children:"This helps ensure accurate measurements and scaling for your reverse engineering work."})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 5: Trace Connections"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Place Vias:"})," Click the Via tool (",n.jsx("code",{children:"V"}),") and click on the PCB where vias connect layers."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Place Pads:"})," Click the Pad tool (",n.jsx("code",{children:"P"}),") and mark component pad locations."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Place Multiple Vias/Pads:"})," Alt/Option+click the Via or Pad tool, or press ",n.jsx("code",{children:"Alt/Option+V"})," (vias) or ",n.jsx("code",{children:"Alt/Option+P"})," (pads) to open the placement dialog. Choose arrangement (Linear, 2-Sided, or 4-Sided), number of pins, orientation, and layer. Click and drag on the canvas to define the placement area. Vias/pads are automatically arranged in counter-clockwise order starting from Pin 1."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Place Test Points:"})," Click the Test Point tool (",n.jsx("code",{children:"Y"}),") to mark test points."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Draw Traces:"})," Click the Trace tool (",n.jsx("code",{children:"T"}),"), select Top or Bottom layer, then click to start a trace. Click again to add segments. Press ",n.jsx("code",{children:"Enter"})," or click outside to finish."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Snapping:"})," Traces automatically snap to nearby vias, pads, power nodes, and ground nodes."]})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 6: Place Components"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Place Component:"})," Click the Component tool (",n.jsx("code",{children:"C"}),"), select component type, then click on the PCB."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Edit Component:"})," Double-click a component or select a component and press ",n.jsx("code",{children:"A"})," to open the Component Properties dialog. If multiple components are selected, opens the most recently selected one."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Set Properties:"})," Enter designator (e.g., R1, C2), value, and other component details."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Connect Pins:"})," Click on pads or vias to connect component pins to the circuit."]})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 7: Add Power and Ground Nodes"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Manage Power Buses:"})," Tools  Manage Power Buses to create and configure voltage buses (e.g., +5V, +3.3V)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Place Power Nodes:"})," Click the Power tool (",n.jsx("code",{children:"B"}),"), select a voltage bus, then click on the PCB."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Manage Ground Buses:"})," Tools  Manage Ground Buses to configure ground connections."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Place Ground Nodes:"})," Click the Ground tool (",n.jsx("code",{children:"G"}),"), select a ground bus, then click on the PCB."]})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 8: Add Notes and Documentation"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Element Notes:"})," Press ",n.jsx("code",{children:"N"})," to open the Notes dialog for selected elements (vias, pads, traces, etc.)."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Project Notes:"})," Press ",n.jsx("code",{children:"L"})," to open Project Notes / TODO list for general project documentation."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Information Dialog:"})," Press ",n.jsx("code",{children:"I"})," to see detailed information about selected elements."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Find Elements:"})," Use the Find button in the Information dialog to center and highlight specific elements."]})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 9: Save Your Work"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Manual Save:"})," File  Save Project to save your work manually."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Auto-Save:"})," If enabled, your project is automatically saved at regular intervals."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"History:"})," Auto-saved versions are stored in the ",n.jsx("code",{style:{background:"#1f1f24",padding:"2px 4px",borderRadius:3,color:"#fff"},children:"history/"})," subdirectory."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Restore from History:"})," File  Restore from History to access previous versions."]})]})]}),n.jsxs("div",{style:{marginBottom:20,paddingTop:16,borderTop:"1px solid #444"},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Keyboard Shortcuts"}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#f2f2f2"},children:[n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Drawing Tools"}),n.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Select"}),"  ",n.jsx("code",{children:"S"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Via"}),"  ",n.jsx("code",{children:"V"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Via Pattern"}),"  ",n.jsx("code",{children:"Alt/Option+V"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Pad"}),"  ",n.jsx("code",{children:"P"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Pad Pattern"}),"  ",n.jsx("code",{children:"Alt/Option+P"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Test Point"}),"  ",n.jsx("code",{children:"Y"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Trace"}),"  ",n.jsx("code",{children:"T"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Component"}),"  ",n.jsx("code",{children:"C"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Component Properties"}),"  ",n.jsx("code",{children:"A"})," (opens dialog for selected component)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Power"}),"  ",n.jsx("code",{children:"B"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Ground"}),"  ",n.jsx("code",{children:"G"})]})]})]}),n.jsxs("div",{children:[n.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"View & Navigation"}),n.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Move (Pan)"}),"  ",n.jsx("code",{children:"H"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Magnify"}),"  ",n.jsx("code",{children:"M"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Set View"}),"  ",n.jsx("code",{children:"X"})," then ",n.jsx("code",{children:"0-9"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Recall View"}),"  ",n.jsx("code",{children:"0-9"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Default View 0"}),"  ",n.jsx("code",{children:"0"})," (origin with all images contained)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Default View 0"}),"  ",n.jsx("code",{children:"0"})," (origin with all images contained)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Information"}),"  ",n.jsx("code",{children:"I"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Notes"}),"  ",n.jsx("code",{children:"N"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Project Notes"}),"  ",n.jsx("code",{children:"L"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Undo"}),"  ",n.jsx("code",{children:"Ctrl+Z"})," / ",n.jsx("code",{children:"Cmd+Z"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Copy Component"}),"  ",n.jsx("code",{children:"Ctrl+C"})," / ",n.jsx("code",{children:"Cmd+C"})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Paste Component"}),"  ",n.jsx("code",{children:"Ctrl+V"})," / ",n.jsx("code",{children:"Cmd+V"})]})]})]})]}),n.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#f2f2f2"},children:[n.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Arrow Keys"}),n.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components (1 unit per press, ",n.jsx("code",{children:"Shift"})," = 10 units)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Switch Perspective"}),"  ",n.jsx("code",{children:"Shift"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," or ",n.jsx("code",{children:"Caps Lock"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Rotate Perspective"}),"  ",n.jsx("code",{children:"Shift"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," or ",n.jsx("code",{children:"Caps Lock"})," + ",n.jsx("code",{children:""})," / ",n.jsx("code",{children:""})," (",n.jsx("code",{children:""})," = counter-clockwise, ",n.jsx("code",{children:""})," = clockwise)"]}),n.jsx("li",{children:"Use arrow keys to adjust image transformations (when transform tool is active)"}),n.jsx("li",{children:"Click a slider first, then use arrow keys for precise adjustment"})]})]})]}),n.jsxs("div",{style:{marginBottom:20},children:[n.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Tips & Tricks"}),n.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[n.jsx("li",{children:"Double-click any slider to reset it to the default value"}),n.jsx("li",{children:"Double-click a component to edit its properties"}),n.jsxs("li",{children:["Hold ",n.jsx("code",{children:"Shift"})," while clicking to add to selection"]}),n.jsxs("li",{children:["Use the Information dialog (",n.jsx("code",{children:"I"}),") to see details about selected elements"]}),n.jsx("li",{children:"Lock layers (Tools  Lock) to prevent accidental modifications"}),n.jsx("li",{children:"Use the Find button in the Information dialog to center elements in view"}),n.jsxs("li",{children:["Save views with ",n.jsx("code",{children:"X"})," + number key for quick navigation"]}),n.jsxs("li",{children:["Use ",n.jsx("code",{children:"+"})," and ",n.jsx("code",{children:"-"})," keys to resize tool icons (",n.jsx("code",{children:"Shift"})," + ",n.jsx("code",{children:"+"})," / ",n.jsx("code",{children:"-"})," changes size 5 times faster)"]})]})]}),n.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:n.jsxs("p",{style:{margin:"0 0 8px 0",color:"#bbb",fontSize:"12px",lineHeight:"1.5"},children:["For more detailed feature information, see the ",n.jsx("strong",{children:"About"})," menu."]})})]})})]}),s&&n.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:s,children:s}),n.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"1px solid #666",backgroundColor:p?d?"#ffaa00":"#ff0000":"#00ff00",flexShrink:0},title:p?d?`Changes detected  Auto Save: ON  Will be saved automatically every ${v||1} minute${v===1?"":"s"}`:"Changes detected  Auto Save: OFF  You need to save manually (File  Save Project)":"Project saved  No unsaved changes  Auto Save: "+(d?"ON":"OFF")})]})]}),n.jsx(uv,{visible:sc,toolRegistry:ti,currentTool:Ft,drawingMode:Pi,traceToolLayer:gi,padToolLayer:Et,testPointToolLayer:Ke,componentToolLayer:Vt,updateToolSettings:Nn,updateToolLayerSettings:xn,setBrushSize:Ot,saveToolSettings:In,saveToolLayerSettings:er,setTopTraceSize:$t,setBottomTraceSize:On,setTopPadSize:En,setBottomPadSize:Hi,setTopTestPointSize:Gn,setBottomTestPointSize:ai,setTopComponentSize:Li,setBottomComponentSize:tr,setComponentConnectionSize:co,saveDefaultSize:ar,onClose:()=>Ea(!1)}),n.jsx(dv,{visible:Na,toolRegistry:ti,currentTool:Ft,drawingMode:Pi,traceToolLayer:gi,padToolLayer:Et,testPointToolLayer:Ke,componentToolLayer:Vt,updateToolSettings:Nn,updateToolLayerSettings:xn,saveToolSettings:In,saveToolLayerSettings:er,setBrushColor:ji,setTopTraceColor:Fn,setBottomTraceColor:Ns,setTopPadColor:xi,setBottomPadColor:Xa,setTopTestPointColor:fo,setBottomTestPointColor:As,setTopComponentColor:zs,setBottomComponentColor:Ao,setComponentConnectionColor:Cc,saveDefaultColor:Ps,colorPalette:Gi,onClose:()=>hl(!1)})]})},pv=({visible:i,canvasSize:r={width:960,height:600},canvasPosition:a={left:244,top:6},onDismiss:s})=>{const l=M.useRef(null),d=M.useRef(null),[v,p]=M.useState(!0),b=M.useCallback(()=>{l.current&&(l.current.pause(),l.current.src="",l.current.load()),p(!1),s&&s()},[s]);return M.useEffect(()=>{i&&p(!0)},[i]),M.useEffect(()=>{if(!i)return;const y=()=>{b()};return document.addEventListener("click",y,{once:!0}),document.addEventListener("mousedown",y,{once:!0}),()=>{document.removeEventListener("click",y),document.removeEventListener("mousedown",y)}},[i,b]),M.useEffect(()=>{i&&v&&l.current?l.current.play().catch(y=>{console.warn("Video autoplay failed:",y)}):(!i||!v)&&l.current&&l.current&&(l.current.pause(),l.current.src="",l.current.load())},[i,v]),i?n.jsxs("div",{ref:d,style:{position:"absolute",left:0,top:0,right:0,bottom:0,pointerEvents:"none",zIndex:10},children:[v&&n.jsx("video",{ref:l,src:"/PCB_Reverse_Engineering_Tool/SplashLoop.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{position:"absolute",left:`${a.left}px`,top:`${a.top}px`,width:`${r.width}px`,height:`${r.height}px`,objectFit:"cover",pointerEvents:"none",zIndex:1}}),n.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.85)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",maxWidth:"500px",pointerEvents:"auto",zIndex:2},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Tracer: An Electronics Tool"}),n.jsxs("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:["Reverse Engineer, Troubleshoot, Repair, Signal Trace,",n.jsx("br",{}),"Document Test Results"]}),n.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"1) Use the File menu to start a new project."}),n.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"2) Use the Images menu to load images."}),n.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5",textAlign:"left"},children:"3) Use the tools to draw vias, traces, components, etc."}),n.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"16px",textAlign:"center",fontStyle:"italic",fontWeight:"bold"},children:"Best viewed in browser's full screen mode."})]})]}):null},zy=({visible:i,title:r,message:a,onClose:s})=>i?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:l=>{l.target===l.currentTarget&&s()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:l=>l.stopPropagation(),children:[n.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[n.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),n.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:r})]}),n.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:a}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:n.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,hv=({visible:i,selectedIds:r,selectedComponentIds:a,selectedPowerIds:s,selectedGroundIds:l,drawingStrokes:d,componentsTop:v,componentsBottom:p,powers:b,grounds:y,powerBuses:C,onClose:D,setComponentsTop:O,setComponentsBottom:T,determineViaType:K,determinePadType:R,determineTestPointType:z,onFindComponent:w,onFindStroke:we,onFindPower:X,onFindGround:G,position:J,isDragging:ue,onDragStart:oe,onOpenNotesDialog:ie})=>{const[E,Y]=M.useState({visible:!1,title:"",message:""}),[F,L]=M.useState(()=>{const fe=localStorage.getItem("detailedInfoDialogSize");if(fe)try{return JSON.parse(fe)}catch{return{width:400,height:window.innerHeight*.8}}return{width:400,height:window.innerHeight*.8}}),[$,H]=M.useState(!1),[Pe,ae]=M.useState({x:0,y:0,width:0,height:0});M.useEffect(()=>{if(!$)return;const fe=A=>{const W=A.clientX-Pe.x,q=A.clientY-Pe.y,te=Math.max(300,Math.min(window.innerWidth-20,Pe.width+W)),xe=Math.max(200,Math.min(window.innerHeight-20,Pe.height+q)),ee={width:te,height:xe};L(ee),localStorage.setItem("detailedInfoDialogSize",JSON.stringify(ee))},k=()=>{H(!1)};return document.addEventListener("mousemove",fe),document.addEventListener("mouseup",k),()=>{document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",k)}},[$,Pe]);const ve=fe=>{fe.preventDefault(),fe.stopPropagation(),H(!0),ae({x:fe.clientX,y:fe.clientY,width:F.width,height:F.height})};if(!i)return null;const pe=J?{position:"fixed",left:`${J.x}px`,top:`${J.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"300px",width:`${F.width}px`,height:`${F.height}px`,maxHeight:`${window.innerHeight-20}px`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:ue?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},Ce={padding:"20px",overflow:"auto",flex:1};return n.jsxs("div",{style:pe,children:[n.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",...J?{}:{backgroundColor:"#fff",borderRadius:8,minWidth:"300px",width:`${F.width}px`,height:`${F.height}px`,maxHeight:`${window.innerHeight-20}px`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",pointerEvents:"auto"}},children:[n.jsxs("div",{onMouseDown:fe=>{const k=fe.target;k.tagName==="BUTTON"||k.closest("button")||J&&oe(fe)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:ue?"grabbing":J?"grab":"default",userSelect:"none",flexShrink:0},children:[n.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (I)"}),n.jsx("button",{onClick:D,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsx("div",{style:Ce,children:n.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const fe=d.filter(te=>r.has(te.id)).length,k=[...v,...p].filter(te=>a.has(te.id)).length,A=b.filter(te=>s.has(te.id)).length,W=y.filter(te=>l.has(te.id)).length,q=fe+k+A+W;return n.jsx("div",{style:{padding:"12px 16px",backgroundColor:q>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:q>0?"#333":"#856404",marginBottom:"8px"},children:q>0?`${q} Object${q!==1?"s":""} Selected`:"Zero Objects Selected"})})(),a.size>0&&(()=>{const fe=d.some(k=>r.has(k.id)&&(k.type==="via"||k.type==="pad"));return[...v,...p].filter(k=>a.has(k.id)).map(k=>{const A=Fl(k),W=A?.fields,q=W&&W.length>0?n.jsx("div",{style:{marginTop:"6px",marginBottom:"6px",padding:"4px 0"},children:W.map(te=>{const xe=k[te.name];if(xe==null||xe==="")return null;const ee=k[`${te.name}Unit`],Ie=typeof xe=="boolean"?xe?"Yes":"No":xe;return n.jsxs("div",{style:{fontSize:"11px",color:"#444",marginBottom:"2px"},children:[te.label,": ",Ie,ee?` ${ee}`:""]},te.name)})}):n.jsx("div",{style:{padding:"6px 0",fontSize:"11px",color:"#856404",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:4,marginTop:"6px",marginBottom:"6px"},children:"Component definition missing for this instance. Please ensure componentDefinitions.json entry and componentDefinitionKey are set."});return n.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",flexDirection:"column",gap:"4px",padding:"8px 12px",minHeight:"32px"},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Category:"}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A?.category||"N/A"})]})}),n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A?.displayName?k.componentType==="Capacitor"&&!A.displayName.toLowerCase().includes("capacitor")?`${A.displayName} Capacitor`:A.displayName:k.componentType==="GenericComponent"&&k.genericType?Ul(k.genericType):k.componentType==="Diode"&&k.diodeType&&k.diodeType!=="Standard"?Ul(k.diodeType):k.componentType==="VariableResistor"&&k.vrType&&k.vrType!=="Potentiometer"?Ul(k.vrType):k.componentType==="Capacitor"&&k.dielectric==="Tantalum"?"Tantalum Capacitor":k.componentType==="Capacitor"&&k.capacitorType==="Electrolytic"?"Electrolytic Capacitor":k.componentType==="Capacitor"&&k.capacitorType==="Film"?"Film Capacitor":Ul(k.componentType)})]}),w&&n.jsx("button",{onClick:()=>{w(k.id,k.x,k.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:te=>{te.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]})]}),n.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[q,n.jsxs("div",{children:["Layer: ",k.layer]}),k.componentType==="IntegratedCircuit"&&n.jsxs(n.Fragment,{children:[k.description&&n.jsxs("div",{children:["Description: ",k.description]}),k.icType&&n.jsxs("div",{children:["IC Type: ",k.icType]})]}),n.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),n.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:ie,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsxs("span",{children:["Designator: ",k.designator||"(empty)"]}),fe&&n.jsx("button",{onClick:()=>{const te=[...v,...p].filter(ne=>a.has(ne.id)&&ne.componentType===k.componentType),xe=te.length,ee=d.filter(ne=>r.has(ne.id)&&ne.type==="pad"&&ne.points.length>0&&ne.points[0].id!==void 0).map(ne=>{const jt=ne.points[0].id;if(jt===void 0)throw new Error("Unexpected undefined id");return{stroke:ne,nodeId:jt}}).sort((ne,jt)=>ne.nodeId-jt.nodeId),Ie=ee.length>0?ee:d.filter(ne=>r.has(ne.id)&&ne.type==="via"&&ne.points.length>0&&ne.points[0].id!==void 0).map(ne=>{const jt=ne.points[0].id;if(jt===void 0)throw new Error("Unexpected undefined id");return{stroke:ne,nodeId:jt}}).sort((ne,jt)=>ne.nodeId-jt.nodeId),_e=Ie.length;if(_e===0){console.warn("No vias or pads with Node IDs found in selection");return}const Fe=Math.floor(_e/xe);if(Fe===0){console.warn(`Not enough ${ee.length>0?"pads":"vias"} (${_e}) for ${xe} components`);return}const nt=Fl(te[0]);if(nt?.fixedPinCount!==!1){const ne=te[0]?.pinCount??nt?.defaultPins??Fe;if(te.every(Qt=>(Qt.pinCount??nt?.defaultPins)===ne)||console.warn("Selected components have different pin counts"),Fe!==ne){const Qt=ee.length>0?"pads":"vias";console.warn(`Cannot change pin count for ${k.componentType}. Expected ${ne} ${Qt} per component, but got ${Fe}. This component has a fixed pin count.`),Y({visible:!0,title:"Cannot Connect Components",message:`${k.componentType} has a fixed pin count of ${ne}. Please select exactly ${ne*xe} ${Qt} (${ne} per component).`});return}}[...te].sort((ne,jt)=>ne.id.localeCompare(jt.id)).forEach((ne,jt)=>{const Qt=jt*Fe,Wt=Qt+Fe,Je=Ie.slice(Qt,Wt).map(un=>un.nodeId.toString()),Gt=j0(ne,Je,d);ne.layer==="top"?O(un=>un.map(Zt=>{if(Zt.id===ne.id){const _n={...Zt,pinCount:Fe,pinConnections:Je};if(Gt&&(_n.pinPolarities=Gt),Zt.pinNames){const Rt=Zt.pinNames||[];_n.pinNames=new Array(Fe).fill("").map((Le,ke)=>ke<Rt.length?Rt[ke]:"")}return _n}return Zt})):T(un=>un.map(Zt=>{if(Zt.id===ne.id){const _n={...Zt,pinCount:Fe,pinConnections:Je};if(Gt&&(_n.pinPolarities=Gt),Zt.pinNames){const Rt=Zt.pinNames||[];_n.pinNames=new Array(Fe).fill("").map((Le,ke)=>ke<Rt.length?Rt[ke]:"")}return _n}return Zt}))});const It=ee.length>0?"pads":"vias";console.log(`Connected ${xe} components of type ${k.componentType} to ${_e} ${It} (${Fe} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:te=>{te.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{children:"Color:"}),n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),n.jsx("span",{children:k.color})]}),n.jsxs("div",{children:["Size: ",k.size]}),n.jsxs("div",{children:["Pin Count: ",k.pinCount]}),k.componentType==="Resistor"&&n.jsxs(n.Fragment,{children:[k.resistance&&n.jsxs("div",{children:["Resistance: ",k.resistance]}),k.power&&n.jsxs("div",{children:["Power: ",k.power]}),k.tolerance&&n.jsxs("div",{children:["Tolerance: ",k.tolerance]})]}),k.componentType==="Capacitor"&&n.jsxs(n.Fragment,{children:[k.capacitance&&n.jsxs("div",{children:["Capacitance: ",k.capacitance]}),k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage]}),k.dielectric&&n.jsxs("div",{children:["Dielectric: ",k.dielectric]}),k.tolerance&&n.jsxs("div",{children:["Tolerance: ",k.tolerance]})]}),k.componentType==="Electrolytic Capacitor"&&n.jsxs(n.Fragment,{children:[k.capacitance&&n.jsxs("div",{children:["Capacitance: ",k.capacitance]}),k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage]}),k.tolerance&&n.jsxs("div",{children:["Tolerance: ",k.tolerance]}),k.polarized!==void 0&&n.jsxs("div",{children:["Polarized: ",k.polarized?"Yes":"No"]}),k.esr&&n.jsxs("div",{children:["ESR: ",k.esr]}),k.temperature&&n.jsxs("div",{children:["Temperature: ",k.temperature]})]}),k.pinConnections&&k.pinConnections.length>0&&(()=>{const te=Uf(k),xe=Fl(k),ee=k?.pinNames,Ie=xe?.properties?.pinNames,Fe=Ie&&Ie.length>0;return n.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[n.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),Fe&&n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin Name"}),te&&n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),n.jsx("tbody",{children:k.pinConnections.map((nt,lt)=>{const kt=k.pinPolarities&&k.pinPolarities.length>lt?k.pinPolarities[lt]:"",It=ee&&lt<ee.length?ee[lt]:"",ne=Ie&&lt<Ie.length?Ie[lt]:"",jt=ne==="CHIP_DEPENDENT",Qt=It&&It.trim()!==""?It:jt?"":ne;return n.jsxs("tr",{style:{backgroundColor:lt%2===0?"#fff":"#f9f9f9"},children:[n.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:lt+1}),Fe&&n.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",fontSize:"9px",fontStyle:"italic",color:"#555"},children:Qt||"-"}),te&&n.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:kt==="+"?"#d32f2f":kt==="-"?"#1976d2":"#999"},children:kt||"-"}),n.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:nt||"(not connected)"})]},lt)})})]})]})})(),"manufacturer"in k&&k.manufacturer&&n.jsxs("div",{children:["Manufacturer: ",k.manufacturer]}),"partNumber"in k&&k.partNumber&&n.jsxs("div",{children:["Part Number: ",k.partNumber]}),k.componentType==="Diode"&&n.jsxs(n.Fragment,{children:[k.diodeType&&n.jsxs("div",{children:["Type: ",k.diodeType]}),k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage]}),k.current&&n.jsxs("div",{children:["Current: ",k.current]}),k.ledColor&&n.jsxs("div",{children:["LED Color: ",k.ledColor]})]}),k.componentType==="Battery"&&n.jsxs(n.Fragment,{children:[k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage]}),k.capacity&&n.jsxs("div",{children:["Capacity: ",k.capacity]}),k.chemistry&&n.jsxs("div",{children:["Chemistry: ",k.chemistry]})]}),k.componentType==="Fuse"&&n.jsxs(n.Fragment,{children:[k.current&&n.jsxs("div",{children:["Current: ",k.current]}),k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage]}),k.fuseType&&n.jsxs("div",{children:["Type: ",k.fuseType]})]}),k.componentType==="FerriteBead"&&n.jsxs(n.Fragment,{children:[k.impedance&&n.jsxs("div",{children:["Impedance: ",k.impedance]}),k.current&&n.jsxs("div",{children:["Current: ",k.current]})]}),k.componentType==="Connector"&&n.jsxs(n.Fragment,{children:[k.connectorType&&n.jsxs("div",{children:["Type: ",k.connectorType]}),k.gender&&n.jsxs("div",{children:["Gender: ",k.gender]})]}),k.componentType==="Jumper"&&n.jsx(n.Fragment,{children:k.positions&&n.jsxs("div",{children:["Positions: ",k.positions]})}),k.componentType==="Relay"&&n.jsxs(n.Fragment,{children:[k.coilVoltage&&n.jsxs("div",{children:["Coil Voltage: ",k.coilVoltage]}),k.contactType&&n.jsxs("div",{children:["Contact Type: ",k.contactType]}),k.current&&n.jsxs("div",{children:["Current: ",k.current]})]}),k.componentType==="Inductor"&&n.jsxs(n.Fragment,{children:[k.inductance&&n.jsxs("div",{children:["Inductance: ",k.inductance]}),k.current&&n.jsxs("div",{children:["Current: ",k.current]}),k.resistance&&n.jsxs("div",{children:["DC Resistance: ",k.resistance]})]}),k.componentType==="Speaker"&&n.jsxs(n.Fragment,{children:[k.impedance&&n.jsxs("div",{children:["Impedance: ",k.impedance]}),k.power&&n.jsxs("div",{children:["Power: ",k.power]})]}),k.componentType==="Motor"&&n.jsxs(n.Fragment,{children:[k.motorType&&n.jsxs("div",{children:["Type: ",k.motorType]}),k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage]}),k.current&&n.jsxs("div",{children:["Current: ",k.current]})]}),k.componentType==="PowerSupply"&&n.jsxs(n.Fragment,{children:[k.inputVoltage&&n.jsxs("div",{children:["Input Voltage: ",k.inputVoltage]}),k.outputVoltage&&n.jsxs("div",{children:["Output Voltage: ",k.outputVoltage]}),k.current&&n.jsxs("div",{children:["Current: ",k.current]})]}),k.componentType==="Transistor"&&n.jsxs(n.Fragment,{children:[k.transistorType&&n.jsxs("div",{children:["Type: ",k.transistorType]}),k.polarized!==void 0&&n.jsxs("div",{children:["Polarized: ",k.polarized?"Yes":"No"]}),k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage]}),k.current&&n.jsxs("div",{children:["Current: ",k.current]})]}),k.componentType==="ResistorNetwork"&&n.jsxs(n.Fragment,{children:[k.resistance&&n.jsxs("div",{children:["Resistance: ",k.resistance]}),k.configuration&&n.jsxs("div",{children:["Configuration: ",k.configuration]})]}),k.componentType==="Thermistor"&&n.jsxs(n.Fragment,{children:[k.resistance&&n.jsxs("div",{children:["Resistance: ",k.resistance]}),k.thermistorType&&n.jsxs("div",{children:["Type: ",k.thermistorType]}),k.beta&&n.jsxs("div",{children:["Beta: ",k.beta]})]}),k.componentType==="Switch"&&n.jsxs(n.Fragment,{children:[k.switchType&&n.jsxs("div",{children:["Type: ",k.switchType]}),k.current&&n.jsxs("div",{children:["Current: ",k.current]}),k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage]})]}),k.componentType==="Transformer"&&n.jsxs(n.Fragment,{children:[k.primaryVoltage&&n.jsxs("div",{children:["Primary Voltage: ",k.primaryVoltage]}),k.secondaryVoltage&&n.jsxs("div",{children:["Secondary Voltage: ",k.secondaryVoltage]}),k.power&&n.jsxs("div",{children:["Power: ",k.power]}),k.turns&&n.jsxs("div",{children:["Turns Ratio: ",k.turns]})]}),k.componentType==="TestPoint"&&n.jsx(n.Fragment,{children:k.signal&&n.jsxs("div",{children:["Signal: ",k.signal]})}),k.componentType==="IntegratedCircuit"&&n.jsxs(n.Fragment,{children:[k.datasheet&&(()=>{const te=k.datasheet.trim(),xe=te.match(/^https?:\/\//)?te:`https://${te}`;return n.jsxs("div",{children:["Datasheet URL:"," ",n.jsx("a",{href:xe,target:"_blank",rel:"noopener noreferrer",style:{color:"#0066cc",textDecoration:"underline"},children:te})]})})(),k.datasheetFileName&&(()=>{const xe=k.datasheetFileName.split("/").pop();return n.jsxs("div",{children:["Datasheet File:"," ",n.jsxs("span",{style:{color:"#666",fontStyle:"italic"},title:"Re-choose the datasheet file in Component Properties to open it",children:[xe," (re-choose file to open)"]})]})})()]}),k.componentType==="VacuumTube"&&n.jsx(n.Fragment,{children:k.tubeType&&n.jsxs("div",{children:["Type: ",k.tubeType]})}),k.componentType==="VariableResistor"&&n.jsxs(n.Fragment,{children:[k.vrType&&n.jsxs("div",{children:["Type: ",k.vrType]}),k.resistance&&n.jsxs("div",{children:["Resistance: ",k.resistance]}),k.power&&n.jsxs("div",{children:["Power: ",k.power]}),k.taper&&n.jsxs("div",{children:["Taper: ",k.taper]})]}),k.componentType==="Crystal"&&n.jsxs(n.Fragment,{children:[k.frequency&&n.jsxs("div",{children:["Frequency: ",k.frequency]}),k.loadCapacitance&&n.jsxs("div",{children:["Load Capacitance: ",k.loadCapacitance]}),k.tolerance&&n.jsxs("div",{children:["Tolerance: ",k.tolerance]})]}),k.componentType==="GenericComponent"&&n.jsxs(n.Fragment,{children:[k.genericType&&n.jsxs("div",{children:["Type: ",k.genericType]}),k.voltage&&n.jsxs("div",{children:["Voltage: ",k.voltage," ",k.voltageUnit||"V"]}),k.current&&n.jsxs("div",{children:["Current: ",k.current," ",k.currentUnit||"A"]}),k.power&&n.jsxs("div",{children:["Power: ",k.power]}),k.frequency&&n.jsxs("div",{children:["Frequency: ",k.frequency]}),k.model&&n.jsxs("div",{children:["Model: ",k.model]})]}),n.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:n.jsxs("div",{children:["Position: x=",k.x.toFixed(2),", y=",k.y.toFixed(2)]})})]})]},k.id)})})(),r.size>0&&d.filter(fe=>r.has(fe.id)&&fe.type==="via"&&fe.points.length>0).map(fe=>{const k=fe.points[0],A=fe.viaType||(k.id!==void 0?K(k.id,C):"Via");return n.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),we&&n.jsx("button",{onClick:()=>{we(fe.id,k.x,k.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),n.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[k.id&&n.jsxs("div",{children:["Node ID: ",k.id]}),n.jsx("div",{children:"Layer: Top and Bottom"}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{children:"Color:"}),n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:fe.color,border:"1px solid #ccc",borderRadius:2}}),n.jsx("span",{children:fe.color})]}),n.jsxs("div",{children:["Size: ",fe.size]}),n.jsxs("div",{children:["Position: x=",k.x.toFixed(2),", y=",k.y.toFixed(2)]}),n.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),n.jsx("input",{type:"text",value:fe.notes||"",readOnly:!0,onClick:ie,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},fe.id)}),r.size>0&&d.filter(fe=>r.has(fe.id)&&fe.type==="pad"&&fe.points.length>0).map(fe=>{const k=fe.points[0],A=fe.padType||(k.id!==void 0?R(k.id,C):"Pad");return n.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),we&&n.jsx("button",{onClick:()=>{we(fe.id,k.x,k.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),n.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[k.id&&n.jsxs("div",{children:["Node ID: ",k.id]}),n.jsxs("div",{children:["Layer: ",fe.layer]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{children:"Color:"}),n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:fe.color,border:"1px solid #ccc",borderRadius:2}}),n.jsx("span",{children:fe.color})]}),n.jsxs("div",{children:["Size: ",fe.size]}),n.jsxs("div",{children:["Position: x=",k.x.toFixed(2),", y=",k.y.toFixed(2)]}),n.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),n.jsx("input",{type:"text",value:fe.notes||"",readOnly:!0,onClick:ie,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},fe.id)}),r.size>0&&d.filter(fe=>r.has(fe.id)&&fe.type==="testPoint"&&fe.points.length>0).map(fe=>{const k=fe.points[0],A=k.id!==void 0?z(k.id,C):"Test Point";return n.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),we&&n.jsx("button",{onClick:()=>{we(fe.id,k.x,k.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),n.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[k.id&&n.jsxs("div",{children:["Node ID: ",k.id]}),n.jsxs("div",{children:["Layer: ",fe.layer]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{children:"Color:"}),n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:fe.color,border:"1px solid #ccc",borderRadius:2}}),n.jsx("span",{children:fe.color})]}),n.jsxs("div",{children:["Size: ",fe.size]}),n.jsxs("div",{children:["Position: x=",k.x.toFixed(2),", y=",k.y.toFixed(2)]}),n.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),n.jsx("input",{type:"text",value:fe.notes||"",readOnly:!0,onClick:ie,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},fe.id)}),r.size>0&&d.filter(fe=>r.has(fe.id)&&fe.type==="trace").map(fe=>{const k=fe.points.length>0?fe.points.reduce((W,q)=>W+q.x,0)/fe.points.length:0,A=fe.points.length>0?fe.points.reduce((W,q)=>W+q.y,0)/fe.points.length:0;return n.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:fe.type||"unknown"})]}),we&&fe.points.length>0&&n.jsx("button",{onClick:()=>{we(fe.id,k,A)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),n.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[fe.points.length>0&&n.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[n.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",fe.points.length]}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),n.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),n.jsx("tbody",{children:fe.points.map((W,q)=>n.jsxs("tr",{style:{backgroundColor:q%2===0?"#fff":"#f9f9f9"},children:[n.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:q}),n.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:W.x.toFixed(2)}),n.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:W.y.toFixed(2)}),n.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:W.id||"(none)"})]},q))})]})]}),n.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",fe.layer]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{children:"Color:"}),n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:fe.color,border:"1px solid #ccc",borderRadius:2}}),n.jsx("span",{children:fe.color})]}),n.jsxs("div",{children:["Size: ",fe.size]}),n.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),n.jsx("input",{type:"text",value:fe.notes||"",readOnly:!0,onClick:ie,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},fe.id)}),s.size>0&&b.filter(fe=>s.has(fe.id)).map(fe=>{const k=C.find(A=>A.id===fe.powerBusId);return n.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:fe.type||(k?`${k.name} Power Node`:"Power Node")})]}),X&&n.jsx("button",{onClick:()=>{X(fe.id,fe.x,fe.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:A=>{A.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:A=>{A.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),n.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[n.jsxs("div",{children:["Node ID: ",fe.pointId||"(not assigned)"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{children:"Color:"}),n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:fe.color,border:"1px solid #ccc",borderRadius:2}}),n.jsx("span",{children:fe.color})]}),n.jsxs("div",{children:["Size: ",fe.size]}),n.jsxs("div",{children:["Layer: ",fe.layer]}),n.jsxs("div",{children:["Power Bus: ",k?.name||fe.powerBusId||"(unknown)"]}),n.jsxs("div",{children:["Position: x=",fe.x.toFixed(2),", y=",fe.y.toFixed(2)]}),n.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),n.jsx("input",{type:"text",value:fe.notes||"",readOnly:!0,onClick:ie,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},fe.id)}),l.size>0&&y.filter(fe=>l.has(fe.id)).map(fe=>n.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:fe.type||"Ground Node"})]}),G&&n.jsx("button",{onClick:()=>{G(fe.id,fe.x,fe.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),n.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[n.jsxs("div",{children:["Node ID: ",fe.pointId||"(not assigned)"]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("span",{children:"Color:"}),n.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:fe.color,border:"1px solid #ccc",borderRadius:2}}),n.jsx("span",{children:fe.color})]}),n.jsxs("div",{children:["Size: ",fe.size]}),n.jsxs("div",{children:["Position: x=",fe.x.toFixed(2),", y=",fe.y.toFixed(2)]}),n.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),n.jsx("input",{type:"text",value:fe.notes||"",readOnly:!0,onClick:ie,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},fe.id))]})}),n.jsx("div",{onMouseDown:ve,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:10001},title:"Drag to resize"})]}),n.jsx(zy,{visible:E.visible,title:E.title,message:E.message,onClose:()=>Y({visible:!1,title:"",message:""})})]})},Ca=500,gv=({visible:i,selectedIds:r,selectedComponentIds:a,selectedPowerIds:s,selectedGroundIds:l,drawingStrokes:d,componentsTop:v,componentsBottom:p,powers:b,grounds:y,powerBuses:C,onClose:D,setComponentsTop:O,setComponentsBottom:T,setDrawingStrokes:K,setPowerSymbols:R,setGroundSymbols:z,determineViaType:w,determinePadType:we,determineTestPointType:X,position:G,isDragging:J,onDragStart:ue})=>{const[oe,ie]=M.useState(new Map),E=M.useRef(""),[Y,F]=M.useState(()=>{const ee=localStorage.getItem("notesDialogSize");if(ee)try{return JSON.parse(ee)}catch{return{width:400,height:window.innerHeight*.8}}return{width:400,height:window.innerHeight*.8}}),[L,$]=M.useState(!1),[H,Pe]=M.useState({x:0,y:0,width:0,height:0}),ae=()=>[...Array.from(r).sort(),...Array.from(a).sort(),...Array.from(s).sort(),...Array.from(l).sort()].join(",");M.useEffect(()=>{if(!i)return;const ee=ae();ee!==E.current&&(E.current=ee,ie(Ie=>{const _e=new Map;return[...v,...p].filter(Fe=>a.has(Fe.id)).forEach(Fe=>{const nt=Ie.get(Fe.id);_e.set(Fe.id,nt!==void 0?nt:Fe.notes||"")}),d.filter(Fe=>r.has(Fe.id)).forEach(Fe=>{const nt=Ie.get(Fe.id);_e.set(Fe.id,nt!==void 0?nt:Fe.notes||"")}),b.filter(Fe=>s.has(Fe.id)).forEach(Fe=>{const nt=Ie.get(Fe.id);_e.set(Fe.id,nt!==void 0?nt:Fe.notes||"")}),y.filter(Fe=>l.has(Fe.id)).forEach(Fe=>{const nt=Ie.get(Fe.id);_e.set(Fe.id,nt!==void 0?nt:Fe.notes||"")}),_e}))},[i,r,a,s,l,d,v,p,b,y]),M.useEffect(()=>{if(!L)return;const ee=_e=>{const Fe=_e.clientX-H.x,nt=_e.clientY-H.y,lt=Math.max(300,Math.min(window.innerWidth-20,H.width+Fe)),kt=Math.max(200,Math.min(window.innerHeight-20,H.height+nt)),It={width:lt,height:kt};F(It),localStorage.setItem("notesDialogSize",JSON.stringify(It))},Ie=()=>{$(!1)};return document.addEventListener("mousemove",ee),document.addEventListener("mouseup",Ie),()=>{document.removeEventListener("mousemove",ee),document.removeEventListener("mouseup",Ie)}},[L,H]);const ve=ee=>{ee.preventDefault(),ee.stopPropagation(),$(!0),Pe({x:ee.clientX,y:ee.clientY,width:Y.width,height:Y.height})};if(!i)return null;const pe=G?{position:"fixed",left:`${G.x}px`,top:`${G.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"300px",width:`${Y.width}px`,height:`${Y.height}px`,maxHeight:`${window.innerHeight-20}px`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:J?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},Ce={padding:"20px",overflow:"auto",flex:1},fe=d.filter(ee=>r.has(ee.id)).length,k=[...v,...p].filter(ee=>a.has(ee.id)).length,A=b.filter(ee=>s.has(ee.id)).length,W=y.filter(ee=>l.has(ee.id)).length,q=fe+k+A+W,te=(ee,Ie)=>{const _e=Ie.length>Ca?Ie.substring(0,Ca):Ie;ie(Fe=>{const nt=new Map(Fe);return nt.set(ee,_e),nt})},xe=()=>{O(ee=>ee.map(Ie=>{if(a.has(Ie.id)&&oe.has(Ie.id)){const _e=oe.get(Ie.id)||"";return{...Ie,notes:_e.trim()===""?void 0:_e.trim()}}return Ie})),T(ee=>ee.map(Ie=>{if(a.has(Ie.id)&&oe.has(Ie.id)){const _e=oe.get(Ie.id)||"";return{...Ie,notes:_e.trim()===""?void 0:_e.trim()}}return Ie})),K(ee=>ee.map(Ie=>{if(r.has(Ie.id)&&oe.has(Ie.id)){const _e=oe.get(Ie.id)||"";return{...Ie,notes:_e.trim()===""?null:_e.trim()}}return Ie})),R(ee=>ee.map(Ie=>{if(s.has(Ie.id)&&oe.has(Ie.id)){const _e=oe.get(Ie.id)||"";return{...Ie,notes:_e.trim()===""?null:_e.trim()}}return Ie})),z(ee=>ee.map(Ie=>{if(l.has(Ie.id)&&oe.has(Ie.id)){const _e=oe.get(Ie.id)||"";return{...Ie,notes:_e.trim()===""?null:_e.trim()}}return Ie}))};return n.jsx("div",{style:pe,children:n.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",...G?{}:{backgroundColor:"#fff",borderRadius:8,minWidth:"300px",width:`${Y.width}px`,height:`${Y.height}px`,maxHeight:`${window.innerHeight-20}px`,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",pointerEvents:"auto"}},children:[n.jsxs("div",{onMouseDown:ee=>{const Ie=ee.target;Ie.tagName==="BUTTON"||Ie.closest("button")||G&&ue(ee)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:J?"grabbing":G?"grab":"default",userSelect:"none",flexShrink:0},children:[n.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (N)"}),n.jsx("button",{onClick:D,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsx("div",{style:Ce,children:n.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[n.jsx("div",{style:{padding:"12px 16px",backgroundColor:q>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:q>0?"#333":"#856404",marginBottom:"8px"},children:q>0?`${q} Object${q!==1?"s":""} Selected`:"Zero Objects Selected"}),q===0?n.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):n.jsxs(n.Fragment,{children:[[...v,...p].filter(ee=>a.has(ee.id)).map(ee=>{const Ie=oe.get(ee.id)||"",_e=Ie.length;return n.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),n.jsxs("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:[Ul(ee.componentType),ee.designator&&ee.designator.trim()?` (${ee.designator.trim()})`:""]})]}),n.jsxs("div",{style:{padding:"8px"},children:[n.jsx("textarea",{value:Ie,onChange:Fe=>te(ee.id,Fe.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Ca,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),n.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:_e>=Ca?"#d32f2f":"#666",textAlign:"right"},children:[_e," / ",Ca]})]})]},ee.id)}),d.filter(ee=>r.has(ee.id)&&ee.type==="via"&&ee.points.length>0).map(ee=>{const Ie=ee.points[0],_e=ee.viaType||(Ie.id!==void 0?w(Ie.id,C):"Via"),Fe=oe.get(ee.id)||"",nt=Fe.length;return n.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:_e})]}),n.jsxs("div",{style:{padding:"8px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:Ie.id&&n.jsxs("div",{children:["Node ID: ",Ie.id]})}),n.jsx("textarea",{value:Fe,onChange:lt=>te(ee.id,lt.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Ca,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),n.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:nt>=Ca?"#d32f2f":"#666",textAlign:"right"},children:[nt," / ",Ca]})]})]},ee.id)}),d.filter(ee=>r.has(ee.id)&&ee.type==="pad"&&ee.points.length>0).map(ee=>{const Ie=ee.points[0],_e=ee.padType||(Ie.id!==void 0?we(Ie.id,C):"Pad"),Fe=oe.get(ee.id)||"",nt=Fe.length;return n.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:_e})]}),n.jsxs("div",{style:{padding:"8px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:Ie.id&&n.jsxs("div",{children:["Node ID: ",Ie.id]})}),n.jsx("textarea",{value:Fe,onChange:lt=>te(ee.id,lt.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Ca,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),n.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:nt>=Ca?"#d32f2f":"#666",textAlign:"right"},children:[nt," / ",Ca]})]})]},ee.id)}),d.filter(ee=>r.has(ee.id)&&ee.type==="testPoint"&&ee.points.length>0).map(ee=>{const Ie=ee.points[0],_e=Ie.id!==void 0?X(Ie.id,C):"Test Point",Fe=oe.get(ee.id)||"",nt=Fe.length;return n.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:_e})]}),n.jsxs("div",{style:{padding:"8px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:Ie.id&&n.jsxs("div",{children:["Node ID: ",Ie.id]})}),n.jsx("textarea",{value:Fe,onChange:lt=>te(ee.id,lt.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Ca,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),n.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:nt>=Ca?"#d32f2f":"#666",textAlign:"right"},children:[nt," / ",Ca]})]})]},ee.id)}),d.filter(ee=>r.has(ee.id)&&ee.type==="trace").map(ee=>{const Ie=oe.get(ee.id)||"",_e=Ie.length;return n.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ee.type||"unknown"})]}),n.jsxs("div",{style:{padding:"8px"},children:[n.jsx("textarea",{value:Ie,onChange:Fe=>te(ee.id,Fe.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Ca,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),n.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:_e>=Ca?"#d32f2f":"#666",textAlign:"right"},children:[_e," / ",Ca]})]})]},ee.id)}),b.filter(ee=>s.has(ee.id)).map(ee=>{const Ie=C.find(lt=>lt.id===ee.powerBusId),_e=ee.type||(Ie?`${Ie.name} Power Node`:"Power Node"),Fe=oe.get(ee.id)||"",nt=Fe.length;return n.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:_e})]}),n.jsxs("div",{style:{padding:"8px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:n.jsxs("div",{children:["Node ID: ",ee.pointId||"(not assigned)"]})}),n.jsx("textarea",{value:Fe,onChange:lt=>te(ee.id,lt.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Ca,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),n.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:nt>=Ca?"#d32f2f":"#666",textAlign:"right"},children:[nt," / ",Ca]})]})]},ee.id)}),y.filter(ee=>l.has(ee.id)).map(ee=>{const Ie=ee.type||"Ground Node",_e=oe.get(ee.id)||"",Fe=_e.length;return n.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[n.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),n.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:Ie})]}),n.jsxs("div",{style:{padding:"8px"},children:[n.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:n.jsxs("div",{children:["Node ID: ",ee.pointId||"(not assigned)"]})}),n.jsx("textarea",{value:_e,onChange:nt=>te(ee.id,nt.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Ca,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),n.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:Fe>=Ca?"#d32f2f":"#666",textAlign:"right"},children:[Fe," / ",Ca]})]})]},ee.id)}),n.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[n.jsx("button",{onClick:D,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:ee=>{ee.currentTarget.style.backgroundColor="#616161"},onMouseLeave:ee=>{ee.currentTarget.style.backgroundColor="#757575"},children:"Close"}),n.jsx("button",{onClick:xe,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:ee=>{ee.currentTarget.style.backgroundColor="#1976D2"},onMouseLeave:ee=>{ee.currentTarget.style.backgroundColor="#2196F3"},children:"Save"})]})]})]})}),n.jsx("div",{onMouseDown:ve,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:10001},title:"Drag to resize"})]})})},xv=({visible:i,projectNotes:r,setProjectNotes:a,onClose:s,position:l,isDragging:d,onDragStart:v})=>{const[p,b]=M.useState([]),[y,C]=M.useState(null),[D,O]=M.useState(null),T=M.useRef(new Map),[K,R]=M.useState({width:Math.min(window.innerWidth*.85,1400),height:window.innerHeight*.7}),[z,w]=M.useState(!1),[we,X]=M.useState({x:0,y:0,width:0,height:0}),[G,J]=M.useState("");M.useEffect(()=>{i&&(b([...r]),C(null),O(null),J(""))},[i,r]);const ue=G.trim()===""?p:p.filter(pe=>{const Ce=G.toLowerCase(),fe=pe.name.toLowerCase().includes(Ce),k=pe.value.toLowerCase().includes(Ce);return fe||k});M.useEffect(()=>{if(!z)return;const pe=fe=>{const k=fe.clientX-we.x,A=fe.clientY-we.y,W=Math.max(400,Math.min(window.innerWidth-20,we.width+k)),q=Math.max(300,Math.min(window.innerHeight-20,we.height+A));R({width:W,height:q})},Ce=()=>{w(!1)};return document.addEventListener("mousemove",pe),document.addEventListener("mouseup",Ce),()=>{document.removeEventListener("mousemove",pe),document.removeEventListener("mouseup",Ce)}},[z,we]);const oe=pe=>{pe.preventDefault(),pe.stopPropagation(),w(!0),X({x:pe.clientX,y:pe.clientY,width:K.width,height:K.height})};if(!i)return null;const ie=()=>{const pe={name:"",value:"",checked:!1};b([...p,pe]),C(p.length),O("name")},E=pe=>{const Ce=p.filter((fe,k)=>k!==pe);b(Ce),y===pe?(C(null),O(null)):y!==null&&y>pe&&C(y-1)},Y=()=>{const pe=p.filter(Ce=>Ce.name.trim()!==""||Ce.value.trim()!=="");a(pe),s()},F=()=>{b([...r]),C(null),O(null),s()},L=(pe,Ce,fe)=>{const k=[...p];k[pe]={...k[pe],[Ce]:fe},b(k)},$=(pe,Ce)=>{const fe=[...p];fe[pe]={...fe[pe],checked:Ce},b(fe)},H=(pe,Ce,fe)=>{pe.stopPropagation();const k=pe.currentTarget,A=k.selectionStart,W=k.value.length,q=k.selectionStart!==k.selectionEnd;if(!(pe.key==="Enter"&&pe.altKey)){if(pe.key==="ArrowRight"&&!pe.ctrlKey&&!pe.shiftKey&&!pe.altKey){if(A===W&&!q&&fe==="name"){pe.preventDefault();const te=`${Ce}-value`,xe=T.current.get(te);xe&&(xe.focus(),xe.setSelectionRange(0,0))}return}if(pe.key==="ArrowLeft"&&!pe.ctrlKey&&!pe.shiftKey&&!pe.altKey){if(A===0&&!q&&fe==="value"){pe.preventDefault();const te=`${Ce}-name`,xe=T.current.get(te);xe&&(xe.focus(),xe.setSelectionRange(xe.value.length,xe.value.length))}return}if(pe.key==="ArrowDown"&&!pe.ctrlKey&&!pe.shiftKey&&!pe.altKey){if(pe.preventDefault(),Ce<p.length-1){const te=`${Ce+1}-${fe}`,xe=T.current.get(te);if(xe){xe.focus();const ee=Math.min(A,xe.value.length);xe.setSelectionRange(ee,ee)}}else{const te=p.length;ie(),setTimeout(()=>{const xe=`${te}-${fe}`,ee=T.current.get(xe);ee&&(ee.focus(),ee.setSelectionRange(0,0))},0)}return}if(pe.key==="ArrowUp"&&!pe.ctrlKey&&!pe.shiftKey&&!pe.altKey){if(pe.preventDefault(),Ce>0){const te=`${Ce-1}-${fe}`,xe=T.current.get(te);if(xe){xe.focus();const ee=Math.min(A,xe.value.length);xe.setSelectionRange(ee,ee)}}return}if(pe.key==="Enter"&&!pe.altKey&&!pe.shiftKey){if(pe.preventDefault(),fe==="name"){const te=`${Ce}-value`,xe=T.current.get(te);xe&&(xe.focus(),xe.setSelectionRange(0,0))}else if(fe==="value")if(Ce<p.length-1){const te=`${Ce+1}-name`,xe=T.current.get(te);xe&&(xe.focus(),xe.setSelectionRange(0,0))}else{const te=p.length;ie(),setTimeout(()=>{const xe=`${te}-name`,ee=T.current.get(xe);ee&&(ee.focus(),ee.setSelectionRange(0,0))},0)}return}if(pe.key==="Tab"&&!pe.shiftKey){if(pe.preventDefault(),fe==="name"){const te=`${Ce}-value`,xe=T.current.get(te);xe&&(xe.focus(),xe.select())}else if(fe==="value")if(Ce<p.length-1){const te=`${Ce+1}-name`,xe=T.current.get(te);xe&&(xe.focus(),xe.select())}else{const te=p.length;ie(),setTimeout(()=>{const xe=`${te}-name`,ee=T.current.get(xe);ee&&ee.focus()},0)}return}if(pe.key==="Tab"&&pe.shiftKey){if(pe.preventDefault(),fe==="value"){const te=`${Ce}-name`,xe=T.current.get(te);xe&&(xe.focus(),xe.select())}else if(fe==="name"&&Ce>0){const te=`${Ce-1}-value`,xe=T.current.get(te);xe&&(xe.focus(),xe.select())}return}}},Pe=(pe,Ce)=>{C(pe),O(Ce)},ae=()=>{},ve={position:"fixed",top:l?.y??100,left:l?.x??(window.innerWidth-K.width)/2,width:`${K.width}px`,height:`${K.height}px`,backgroundColor:"#fff",borderRadius:8,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:d?"grabbing":"default",overflow:"hidden"};return n.jsxs("div",{style:ve,children:[n.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e0e0e0",background:"#888",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none"},onMouseDown:v,children:[n.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Project Notes / TODO List (L)"}),n.jsx("button",{onClick:F,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),n.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f5f5f5",display:"flex",gap:"8px",alignItems:"center",flexShrink:0},children:[n.jsx("input",{type:"text",value:G,onChange:pe=>J(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"&&pe.preventDefault()},placeholder:"Search notes...",style:{flex:1,padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"13px",color:"#000",background:"#fff",outline:"none"}}),n.jsx("button",{onClick:()=>{G.trim()!==""&&J("")},style:{padding:"6px 16px",background:G.trim()!==""?"#4CAF50":"#888",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:500,whiteSpace:"nowrap"},children:G.trim()!==""?"Clear":"Search"})]}),n.jsxs("div",{className:"project-notes-content",style:{padding:0,flex:1,overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",minHeight:0,scrollbarWidth:"thin",scrollbarColor:"#888 #f0f0f0"},children:[n.jsxs("div",{style:{border:"none",borderTop:"1px solid #ccc",borderRadius:0,overflow:"visible",marginBottom:"16px",backgroundColor:"#e0e0e0",flexShrink:0},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",backgroundColor:"#e0e0e0",borderBottom:"1px solid #ccc",position:"sticky",top:0,zIndex:10},children:[n.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:n.jsx("label",{className:"radio-label",style:{margin:0,cursor:"default"},children:n.jsx("input",{type:"checkbox",disabled:!0,style:{opacity:.5}})})}),n.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Item"}),n.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Notes"}),n.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",color:"#000"}})]}),n.jsx("div",{children:p.length===0?n.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:'No notes. Click "Add Note" to create one.'}):ue.length===0?n.jsxs("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:['No matches found for "',G,'".']}):ue.map(pe=>{const Ce=p.findIndex(fe=>fe===pe);return n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",borderBottom:"1px solid #ccc",backgroundColor:"#fff"},children:[n.jsx("div",{style:{padding:"8px 12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("label",{className:"radio-label",style:{margin:0,cursor:"pointer"},children:n.jsx("input",{type:"checkbox",checked:pe.checked||!1,onChange:fe=>$(Ce,fe.target.checked)})})}),n.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:n.jsx("textarea",{ref:fe=>{fe?T.current.set(`${Ce}-name`,fe):T.current.delete(`${Ce}-name`)},value:pe.name,onChange:fe=>L(Ce,"name",fe.target.value),onFocus:()=>Pe(Ce,"name"),onBlur:ae,onKeyDown:fe=>H(fe,Ce,"name"),placeholder:"Item name...",rows:1,style:{width:"100%",padding:"4px 6px",border:y===Ce&&D==="name"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:fe=>{const k=fe.target;k.style.height="auto",k.style.height=`${k.scrollHeight}px`}})}),n.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:n.jsx("textarea",{ref:fe=>{fe?T.current.set(`${Ce}-value`,fe):T.current.delete(`${Ce}-value`)},value:pe.value,onChange:fe=>L(Ce,"value",fe.target.value),onFocus:()=>Pe(Ce,"value"),onBlur:ae,onKeyDown:fe=>H(fe,Ce,"value"),placeholder:"Notes...",rows:1,style:{width:"100%",padding:"4px 6px",border:y===Ce&&D==="value"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:fe=>{const k=fe.target;k.style.height="auto",k.style.height=`${k.scrollHeight}px`}})}),n.jsx("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("button",{onClick:()=>E(Ce),style:{background:"#f44336",color:"#fff",border:"none",borderRadius:3,padding:"4px 8px",cursor:"pointer",fontSize:"11px"},title:"Delete note",children:"Delete"})})]},Ce)})})]}),n.jsx("div",{style:{padding:"16px",flexShrink:0},children:n.jsx("button",{onClick:ie,style:{background:"#888",color:"#fff",border:"none",borderRadius:4,padding:"8px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500,alignSelf:"flex-start"},children:"+ Add Note"})})]}),n.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px",flexShrink:0},children:[n.jsx("button",{onClick:F,style:{background:"#f5f5f5",color:"#000",border:"1px solid #ddd",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),n.jsx("button",{onClick:Y,style:{background:"#0b5fff",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500},children:"Save"})]}),n.jsx("div",{onMouseDown:oe,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:10001},title:"Drag to resize"})]})},yv=({visible:i,drawingStrokes:r,onClose:a,onFindTestPoint:s,position:l,isDragging:d,onDragStart:v,determineTestPointType:p,powerBuses:b})=>{const[y,C]=M.useState("");if(M.useEffect(()=>{i&&C("")},[i]),!i)return null;const D=r.filter(R=>R.type==="testPoint"&&R.points.length>0),O=y.trim()===""?D:D.filter(R=>(R.notes||"").toLowerCase().includes(y.toLowerCase())),T=l?{position:"fixed",left:`${l.x}px`,top:`${l.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"500px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:d?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},K={padding:"20px",overflow:"auto",flex:1};return n.jsxs("div",{style:T,children:[n.jsxs("div",{onMouseDown:R=>{const z=R.target;z.tagName==="BUTTON"||z.closest("button")||l&&v(R)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:d?"grabbing":l?"grab":"default",userSelect:"none",flexShrink:0},children:[n.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Test Points"}),n.jsx("button",{onClick:a,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f5f5f5",display:"flex",gap:"8px",alignItems:"center",flexShrink:0},children:[n.jsx("input",{type:"text",value:y,onChange:R=>C(R.target.value),onKeyDown:R=>{R.key==="Enter"&&R.preventDefault()},placeholder:"Search test point notes...",style:{flex:1,padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"13px",color:"#000",background:"#fff",outline:"none"}}),n.jsx("button",{onClick:()=>{y.trim()!==""&&C("")},style:{padding:"6px 16px",background:y.trim()!==""?"#4CAF50":"#888",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",fontWeight:500,whiteSpace:"nowrap"},children:y.trim()!==""?"Clear":"Search"})]}),n.jsx("div",{style:K,children:D.length===0?n.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:"No test points found."}):O.length===0?n.jsxs("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:['No matches found for "',y,'".']}):n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:O.map(R=>{const z=R.points[0],w=z.id!==void 0?p(z.id,b):"Test Point",we=w.includes("(")?w.substring(0,w.indexOf("(")).trim():w;return n.jsxs("div",{style:{padding:"12px",backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{flexShrink:0},children:n.jsx("path",{d:"M 12 5 L 19 12 L 12 19 L 5 12 Z",fill:"#FFD700",stroke:"#000",strokeWidth:"1.5"})}),n.jsx("div",{style:{fontSize:"12px",fontWeight:500,color:"#000"},children:we})]}),s&&n.jsx("button",{onClick:()=>{s(R.id,z.x,z.y)},style:{padding:"4px 12px",fontSize:"11px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:X=>{X.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),R.notes&&R.notes.trim()!==""?n.jsx("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px",padding:"8px",backgroundColor:"#f5f5f5",borderRadius:"3px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:R.notes}):n.jsx("div",{style:{fontSize:"11px",color:"#999",fontStyle:"italic",marginTop:"8px"},children:"No notes"}),n.jsxs("div",{style:{fontSize:"10px",color:"#999",marginTop:"8px"},children:["Layer: ",R.layer," | Position: (",z.x.toFixed(2),", ",z.y.toFixed(2),")"]})]},R.id)})})})]})},mv=({visible:i,dimensions:r,onSave:a,onClose:s})=>{const[l,d]=M.useState(""),[v,p]=M.useState(""),[b,y]=M.useState("inches");M.useEffect(()=>{i&&r?(d(r.width.toString()),p(r.height.toString()),y(r.unit)):i&&(d(""),p(""),y("inches"))},[i,r]);const C=()=>{const O=parseFloat(l),T=parseFloat(v);if(isNaN(O)||O<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(T)||T<=0){alert("Please enter a valid height greater than 0");return}a({width:O,height:T,unit:b}),s()},D=()=>{s()};return i?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:O=>{O.target===O.currentTarget&&D()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:O=>O.stopPropagation(),children:[n.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"number",step:"0.001",min:"0.001",value:l,onChange:O=>d(O.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),n.jsxs("select",{value:b,onChange:O=>y(O.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[n.jsx("option",{value:"inches",children:"inches"}),n.jsx("option",{value:"mm",children:"mm"})]})]})]}),n.jsxs("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),n.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[n.jsx("input",{type:"number",step:"0.001",min:"0.001",value:v,onChange:O=>p(O.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),n.jsxs("select",{value:b,onChange:O=>y(O.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[n.jsx("option",{value:"inches",children:"inches"}),n.jsx("option",{value:"mm",children:"mm"})]})]})]}),n.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[n.jsx("button",{onClick:D,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),n.jsx("button",{onClick:C,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},bv=({visible:i,onClose:r,topImage:a,bottomImage:s,selectedImageForTransform:l,setSelectedImageForTransform:d,transformMode:v,setTransformMode:p,updateImageTransform:b,resetImageTransform:y,setCurrentTool:C,isGrayscale:D,setIsGrayscale:O,areImagesLocked:T})=>{const[K,R]=M.useState(null),[z,w]=M.useState(!1),we=M.useRef({x:0,y:0}),X=M.useRef(null);M.useEffect(()=>{i&&K===null&&R({x:window.innerWidth-320-20,y:80})},[i,K]),M.useEffect(()=>{i||R(null)},[i]);const G=M.useCallback(q=>{if(X.current){const te=X.current.getBoundingClientRect();we.current={x:q.clientX-te.left,y:q.clientY-te.top},w(!0)}},[]);if(M.useEffect(()=>{if(!z)return;const q=xe=>{const ee=xe.clientX-we.current.x,Ie=xe.clientY-we.current.y,_e=X.current?.offsetWidth||320,Fe=X.current?.offsetHeight||600,nt=Math.max(0,Math.min(ee,window.innerWidth-_e)),lt=Math.max(0,Math.min(Ie,window.innerHeight-Fe));R({x:nt,y:lt})},te=()=>{w(!1)};return document.addEventListener("mousemove",q),document.addEventListener("mouseup",te),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",te)}},[z]),!i)return null;const J=a!==null,ue=s!==null,oe=J||ue,ie=J&&ue,E=l||(J?"top":ue?"bottom":null),Y=()=>E==="top"&&a?a.brightness??100:E==="bottom"&&s?s.brightness??100:E==="both"&&a?a.brightness??100:100,F=()=>E==="top"&&a?a.contrast??100:E==="bottom"&&s?s.contrast??100:E==="both"&&a?a.contrast??100:100,L=Y(),$=F(),H=!oe||T,Pe=()=>{if(!(!E||H))if(E==="both"){const q=!a?.flipX;b("both",{flipX:q})}else{const q=E==="top"?a?.flipX||!1:s?.flipX||!1;b(E,{flipX:!q})}},ae=()=>{if(!(!E||H))if(E==="both"){const q=!a?.flipY;b("both",{flipY:q})}else{const q=E==="top"?a?.flipY||!1:s?.flipY||!1;b(E,{flipY:!q})}},ve=q=>{H||(E&&d(E),p(q),C("transform"))},pe=q=>{!E||H||b(E,{brightness:q})},Ce=q=>{!E||H||b(E,{contrast:q})},fe=()=>{H||(E&&d(E),C("transform"),O(!D))},k=()=>{H||(C("transform"),y())},A=(q,te=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:q?"#666":"#f2f2f2",background:te?"#3a3a42":"transparent",border:"none",borderRadius:4,cursor:q?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"}),W=(q,te)=>({display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",color:q?"#666":"#f2f2f2",cursor:q?"not-allowed":"pointer",fontSize:"13px",background:te?"#3a3a42":"transparent",borderRadius:4,transition:"background 0.15s"});return n.jsxs("div",{ref:X,style:{position:"fixed",top:K?.y??80,left:K?.x??window.innerWidth-340,backgroundColor:"#2b2b31",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24",zIndex:10001},children:[n.jsxs("div",{onMouseDown:G,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(to bottom, #3a3a42, #2b2b31)",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottom:"1px solid #1f1f24",cursor:z?"grabbing":"grab",userSelect:"none"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("span",{style:{color:"#888",fontSize:"14px"},children:""}),n.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#f2f2f2"},children:"Transform Images"})]}),n.jsx("button",{onClick:r,style:{background:"transparent",border:"none",color:"#888",fontSize:"16px",cursor:"pointer",padding:"2px 6px",lineHeight:1,borderRadius:4},onMouseEnter:q=>{q.currentTarget.style.background="#444",q.currentTarget.style.color="#fff"},onMouseLeave:q=>{q.currentTarget.style.background="transparent",q.currentTarget.style.color="#888"},children:""})]}),n.jsxs("div",{style:{padding:"16px"},children:[n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"Apply to:"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[n.jsxs("label",{style:W(!J,E==="top"),children:[n.jsx("input",{type:"radio",name:"imageSelection",checked:E==="top",onChange:()=>d("top"),disabled:!J,style:{accentColor:"#6b9fff"}}),"Top Image",!J&&n.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),n.jsxs("label",{style:W(!ue,E==="bottom"),children:[n.jsx("input",{type:"radio",name:"imageSelection",checked:E==="bottom",onChange:()=>d("bottom"),disabled:!ue,style:{accentColor:"#6b9fff"}}),"Bottom Image",!ue&&n.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),n.jsxs("label",{style:W(!ie,E==="both"),children:[n.jsx("input",{type:"radio",name:"imageSelection",checked:E==="both",onChange:()=>d("both"),disabled:!ie,style:{accentColor:"#6b9fff"}}),"Both Images",!ie&&n.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(need both)"})]})]})]}),n.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("button",{onClick:Pe,disabled:H,style:A(H),onMouseEnter:q=>!H&&(q.currentTarget.style.background="#3a3a42"),onMouseLeave:q=>q.currentTarget.style.background="transparent",children:"Horizontal Flip"}),n.jsx("button",{onClick:ae,disabled:H,style:A(H),onMouseEnter:q=>!H&&(q.currentTarget.style.background="#3a3a42"),onMouseLeave:q=>q.currentTarget.style.background="transparent",children:"Vertical Flip"})]}),n.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),n.jsx("div",{style:{marginBottom:"12px"},children:["nudge","scale","rotate","slant","keystone"].map(q=>n.jsxs("button",{onClick:()=>ve(q),disabled:H,style:A(H,v===q),onMouseEnter:te=>!H&&v!==q&&(te.currentTarget.style.background="#3a3a42"),onMouseLeave:te=>v!==q&&(te.currentTarget.style.background="transparent"),children:[v===q?" ":"","Mode: ",q.charAt(0).toUpperCase()+q.slice(1)]},q))}),n.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[n.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Brightness"}),n.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[L,"%"]})]}),n.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:L,onChange:q=>pe(parseInt(q.target.value,10)),disabled:H,style:{width:"100%",cursor:H?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[n.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Contrast"}),n.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[$,"%"]})]}),n.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:$,onChange:q=>Ce(parseInt(q.target.value,10)),disabled:H,style:{width:"100%",cursor:H?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),n.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),n.jsx("div",{style:{marginBottom:"12px"},children:n.jsxs("button",{onClick:fe,disabled:H,style:A(H,D),onMouseEnter:q=>!H&&!D&&(q.currentTarget.style.background="#3a3a42"),onMouseLeave:q=>!D&&(q.currentTarget.style.background="transparent"),children:[D?" ":"","Grayscale Mode"]})}),n.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:[n.jsx("button",{onClick:k,disabled:H,style:{padding:"8px 16px",background:H?"#444":"#555",color:H?"#777":"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:H?"not-allowed":"pointer",fontSize:"13px",fontWeight:500},children:"Reset Transform"}),n.jsx("button",{onClick:r,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:q=>q.currentTarget.style.background="#3a8ee6",onMouseLeave:q=>q.currentTarget.style.background="#4a9eff",children:"Close"})]}),T&&n.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",background:"#3d2b2b",border:"1px solid #5a3a3a",borderRadius:4,fontSize:"12px",color:"#e88"},children:" Images are locked. Unlock via Images  Lock Images to make changes."})]})]})},vv=({visible:i,onClose:r,topImage:a,bottomImage:s,setTopImage:l,setBottomImage:d,componentsTop:v,componentsBottom:p,setComponentsTop:b,setComponentsBottom:y,drawingStrokes:C,setDrawingStrokes:D,powerSymbols:O,groundSymbols:T,setPowerSymbols:K,setGroundSymbols:R,canvasRef:z,isBottomView:w,setIsBottomView:we,originalTopFlipX:X,setOriginalTopFlipX:G,originalBottomFlipX:J,setOriginalBottomFlipX:ue,originalTopFlipY:oe,setOriginalTopFlipY:ie,originalBottomFlipY:E,setOriginalBottomFlipY:Y,cameraWorldCenter:F,setCameraWorldCenter:L,viewScale:$,viewRotation:H,setViewRotation:Pe,viewFlipX:ae,setViewFlipX:ve,contentBorder:pe,setTransparency:Ce})=>{const[fe,k]=M.useState(null),[A,W]=M.useState(!1),q=M.useRef({x:0,y:0}),te=M.useRef(null),xe=M.useCallback((lt,kt,It,ne)=>{const jt=window.innerWidth,Qt=window.innerHeight,Wt=10,xt=Math.max(Wt,Math.min(lt,jt-It-Wt)),Je=Math.max(Wt,Math.min(kt,Qt-ne-Wt));return{x:xt,y:Je}},[]);M.useEffect(()=>{if(i&&fe===null){const lt=localStorage.getItem("transformAllDialogPosition"),kt=320,It=400,ne=20,jt=150;let Qt;if(lt)try{const Wt=JSON.parse(lt);Qt=xe(Wt.x,Wt.y,kt,It)}catch{Qt=xe(window.innerWidth-kt-ne,jt,kt,It)}else Qt=xe(window.innerWidth-kt-ne,jt,kt,It);k(Qt)}},[i,fe,xe]);const ee=M.useCallback(lt=>{if(te.current){const kt=te.current.getBoundingClientRect();q.current={x:lt.clientX-kt.left,y:lt.clientY-kt.top},W(!0)}},[]);M.useEffect(()=>{if(!A)return;const lt=It=>{const ne=It.clientX-q.current.x,jt=It.clientY-q.current.y,Qt=te.current?.offsetWidth||320,Wt=te.current?.offsetHeight||400,xt=xe(ne,jt,Qt,Wt);k(xt),localStorage.setItem("transformAllDialogPosition",JSON.stringify(xt))},kt=()=>{W(!1)};return document.addEventListener("mousemove",lt),document.addEventListener("mouseup",kt),()=>{document.removeEventListener("mousemove",lt),document.removeEventListener("mouseup",kt)}},[A,xe]);const Ie=M.useCallback(()=>{w||(ve(!0),we(!0),Ce(100))},[w,ve,we,Ce]),_e=M.useCallback(()=>{w&&(ve(!1),we(!1),Ce(0))},[w,ve,we,Ce]),Fe=M.useCallback(lt=>{Pe(kt=>w0(kt,lt))},[Pe,w0]);if(!i)return null;const nt=(lt=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:lt?"#999":"#222",background:"transparent",border:"none",borderRadius:4,cursor:lt?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"});return n.jsxs("div",{ref:te,style:{position:"fixed",top:fe?.y??150,left:fe?.x??window.innerWidth-340,backgroundColor:"#fff",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:10001,display:"flex",flexDirection:"column"},children:[n.jsxs("div",{onMouseDown:ee,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:A?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[n.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Change Perspective"}),n.jsx("button",{onClick:r,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsxs("div",{style:{padding:"20px",overflow:"auto",flex:1},children:[n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px",fontWeight:500},children:"View:"}),n.jsx("button",{onClick:w?_e:Ie,style:nt(!1),onMouseEnter:lt=>lt.currentTarget.style.background="#f0f0f0",onMouseLeave:lt=>lt.currentTarget.style.background="transparent",children:w?"Switch to Top View":"Switch to Bottom View"}),n.jsx("div",{style:{fontSize:"10px",color:"#999",marginTop:"6px",fontStyle:"italic"},children:"Shortcut: Shift-Left/Right Arrow Keys"})]}),n.jsx("div",{style:{height:1,background:"#e0e0e0",margin:"16px 0"}}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px",fontWeight:500},children:"Rotate (clockwise):"}),n.jsx("button",{onClick:()=>Fe(90),style:nt(),onMouseEnter:lt=>lt.currentTarget.style.background="#f0f0f0",onMouseLeave:lt=>lt.currentTarget.style.background="transparent",children:"Rotate 90"}),n.jsx("button",{onClick:()=>Fe(180),style:nt(),onMouseEnter:lt=>lt.currentTarget.style.background="#f0f0f0",onMouseLeave:lt=>lt.currentTarget.style.background="transparent",children:"Rotate 180"}),n.jsx("button",{onClick:()=>Fe(270),style:nt(),onMouseEnter:lt=>lt.currentTarget.style.background="#f0f0f0",onMouseLeave:lt=>lt.currentTarget.style.background="transparent",children:"Rotate 270"}),n.jsx("div",{style:{fontSize:"10px",color:"#999",marginTop:"6px",fontStyle:"italic"},children:"Shortcut: Shift-Up/Down Arrow Keys"})]}),n.jsx("div",{style:{height:1,background:"#e0e0e0",margin:"16px 0"}}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:n.jsx("button",{onClick:r,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:lt=>lt.currentTarget.style.background="#3a8ee6",onMouseLeave:lt=>lt.currentTarget.style.background="#4a9eff",children:"Close"})})]})]})},zx=({visible:i,title:r,message:a,onClose:s,type:l="info",onShowResponse:d})=>{if(!i)return null;const v=l==="success"?"#4CAF50":"#2196F3",p=l==="success"?"#4CAF50":"#2196F3",b=l==="success"?"":"";return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:y=>{y.target===y.currentTarget&&s()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"90vw",maxHeight:"90vh",width:"600px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:`2px solid ${p}`,display:"flex",flexDirection:"column"},onClick:y=>y.stopPropagation(),children:[n.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px",flexShrink:0},children:[n.jsx("div",{style:{fontSize:"24px",color:v},children:b}),n.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:r})]}),n.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5",whiteSpace:"pre-wrap",wordWrap:"break-word",overflowY:"auto",maxHeight:"60vh",paddingRight:"8px",flex:1},children:a}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[d&&n.jsx("button",{onClick:()=>{d(),s()},style:{padding:"8px 16px",background:"#555",color:"#fff",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Show Response"}),n.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})]})]})})},wv=({component:i,componentEditor:r,componentDefinition:a,setComponentEditor:s,areComponentsLocked:l,componentsTop:d,componentsBottom:v,setComponentsTop:p,setComponentsBottom:b,uploadedDatasheetFile:y,setUploadedDatasheetFile:C})=>{if(!i||!i.id||!i.componentType||typeof i.pinCount!="number")return console.error("[ComponentTypeFields] Component missing required properties:",{comp:i,hasId:!!i?.id,hasComponentType:!!i?.componentType,componentType:i?.componentType,pinCount:i?.pinCount,pinCountType:typeof i?.pinCount}),null;const O=(a||r?.componentDefinition||Fl(i))?.fields,T=i.componentType,K=T==="IntegratedCircuit"||T==="Semiconductor",R=T==="Semiconductor",z=T==="IntegratedCircuit";if(O&&O.length>0&&!z){const w=(X,G,J)=>J?X==="capacitance"||X==="resistance"||X==="voltage"||X==="current"?"80px":X==="power"||X==="inductance"||X==="impedance"||X==="esr"||X==="ripple"||X==="leakageCurrent"?"70px":"80px":X==="tolerance"||X==="pinCount"?"60px":X==="partNumber"||X==="manufacturer"?"150px":X==="description"||X==="operatingTemperature"?"180px":G==="string"&&!X.includes("Unit")?"150px":"120px",we=X=>{const G=i.componentType,J=G==="IntegratedCircuit"||G==="Semiconductor";if(J&&X.name==="datasheet"||J&&(X.name==="manufacturer"||X.name==="partNumber")||X.name==="description")return null;const ue=X.name,oe=`${X.name}Unit`,ie=r[ue]??i[ue]??X.defaultValue??"",E=r[oe]??i[oe]??(X.units&&X.defaultUnit?X.defaultUnit:""),Y=H=>{s({...r,[ue]:H})},F=H=>{s({...r,[oe]:H})},L=!!(X.units&&X.units.length>0),$=w(X.name,X.type,L);return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsxs("label",{style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:[X.label,":"]}),X.type==="enum"?n.jsx("select",{value:ie,onChange:H=>Y(H.target.value),disabled:l,style:{width:$,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:(X.enumValues||[]).map(H=>n.jsx("option",{value:H,children:H},H))}):n.jsx("input",{type:"text",value:ie,onChange:H=>Y(H.target.value),disabled:l,style:{width:$,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:L?"8px":"0"},placeholder:X.defaultValue!==void 0?String(X.defaultValue):""}),L&&X.units&&n.jsx("select",{value:E||X.defaultUnit||X.units[0],onChange:H=>F(H.target.value),disabled:l,style:{width:"70px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,flexShrink:0},children:X.units.map(H=>n.jsx("option",{value:H,children:H},H))})]},X.name)};if(!R)return n.jsx(n.Fragment,{children:O.map(we).filter(Boolean)})}return K?n.jsxs(n.Fragment,{children:[i.componentType==="Resistor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-resistance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),n.jsx("input",{id:`component-resistance-${i.id}`,type:"text",value:r.resistance||"",onChange:w=>s({...r,resistance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 10"}),n.jsx("select",{value:r.resistanceUnit||ln("resistance"),onChange:w=>s({...r,resistanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("resistance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-power-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),n.jsxs("select",{id:`component-power-${i.id}`,value:r.power||"1/4",onChange:w=>s({...r,power:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"12px"},children:[n.jsx("option",{value:"1/20",children:"1/20 W"}),n.jsx("option",{value:"1/16",children:"1/16 W"}),n.jsx("option",{value:"1/10",children:"1/10 W"}),n.jsx("option",{value:"1/8",children:"1/8 W"}),n.jsx("option",{value:"1/4",children:"1/4 W"}),n.jsx("option",{value:"1/2",children:"1/2 W"}),n.jsx("option",{value:"1",children:"1 W"}),n.jsx("option",{value:"2",children:"2 W"}),n.jsx("option",{value:"3",children:"3 W"}),n.jsx("option",{value:"5",children:"5 W"}),n.jsx("option",{value:"10",children:"10 W"}),n.jsx("option",{value:"25",children:"25 W"}),n.jsx("option",{value:"50",children:"50 W"}),n.jsx("option",{value:"100",children:"100 W"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-tolerance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),n.jsxs("select",{id:`component-tolerance-${i.id}`,value:r.tolerance||"5%",onChange:w=>s({...r,tolerance:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"0.05%",children:"0.05%"}),n.jsx("option",{value:"0.1%",children:"0.1%"}),n.jsx("option",{value:"0.25%",children:"0.25%"}),n.jsx("option",{value:"0.5%",children:"0.5%"}),n.jsx("option",{value:"1%",children:"1%"}),n.jsx("option",{value:"2%",children:"2%"}),n.jsx("option",{value:"5%",children:"5%"}),n.jsx("option",{value:"10%",children:"10%"}),n.jsx("option",{value:"20%",children:"20%"})]})]})]}),i.componentType==="Capacitor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-capacitance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),n.jsx("input",{id:`component-capacitance-${i.id}`,type:"text",value:r.capacitance||"",onChange:w=>s({...r,capacitance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 100"}),n.jsx("select",{value:r.capacitanceUnit||ln("capacitance"),onChange:w=>s({...r,capacitanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("capacitance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 50"}),n.jsx("select",{value:r.voltageUnit||ln("voltage"),onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-dielectric-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),n.jsxs("select",{id:`component-dielectric-${i.id}`,value:r.dielectric||"Ceramic",onChange:w=>s({...r,dielectric:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Ceramic",children:"Ceramic"}),n.jsx("option",{value:"Tantalum",children:"Tantalum"}),n.jsx("option",{value:"Film",children:"Film"}),n.jsx("option",{value:"Polyester",children:"Polyester"}),n.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),n.jsx("option",{value:"Mica",children:"Mica"}),n.jsx("option",{value:"Paper",children:"Paper"}),n.jsx("option",{value:"Glass",children:"Glass"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-tolerance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),n.jsxs("select",{id:`component-tolerance-${i.id}`,value:r.tolerance||"10%",onChange:w=>s({...r,tolerance:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"0.5%",children:"0.5%"}),n.jsx("option",{value:"1%",children:"1%"}),n.jsx("option",{value:"2%",children:"2%"}),n.jsx("option",{value:"5%",children:"5%"}),n.jsx("option",{value:"10%",children:"10%"}),n.jsx("option",{value:"20%",children:"20%"})]})]})]}),i.componentType==="Film Capacitor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-capacitance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),n.jsx("input",{id:`component-capacitance-${i.id}`,type:"text",value:r.capacitance||"",onChange:w=>s({...r,capacitance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 100"}),n.jsx("select",{value:r.capacitanceUnit||ln("capacitance"),onChange:w=>s({...r,capacitanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("capacitance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 50"}),n.jsx("select",{value:r.voltageUnit||ln("voltage"),onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-filmtype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Film Type:"}),n.jsxs("select",{id:`component-filmtype-${i.id}`,value:r.filmType||"Polyester",onChange:w=>s({...r,filmType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Polyester",children:"Polyester"}),n.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),n.jsx("option",{value:"Polyethylene",children:"Polyethylene"}),n.jsx("option",{value:"Polystyrene",children:"Polystyrene"}),n.jsx("option",{value:"Polycarbonate",children:"Polycarbonate"}),n.jsx("option",{value:"PTFE",children:"PTFE (Teflon)"}),n.jsx("option",{value:"PPS",children:"PPS (Polyphenylene Sulfide)"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-tolerance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),n.jsxs("select",{id:`component-tolerance-${i.id}`,value:r.tolerance||"10%",onChange:w=>s({...r,tolerance:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"0.5%",children:"0.5%"}),n.jsx("option",{value:"1%",children:"1%"}),n.jsx("option",{value:"2%",children:"2%"}),n.jsx("option",{value:"5%",children:"5%"}),n.jsx("option",{value:"10%",children:"10%"}),n.jsx("option",{value:"20%",children:"20%"})]})]})]}),i.componentType==="Electrolytic Capacitor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-capacitance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),n.jsx("input",{id:`component-capacitance-${i.id}`,type:"text",value:r.capacitance||"",onChange:w=>s({...r,capacitance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 100"}),n.jsxs("select",{value:r.capacitanceUnit||"F",onChange:w=>s({...r,capacitanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:[n.jsx("option",{value:"pF",children:"pF"}),n.jsx("option",{value:"nF",children:"nF"}),n.jsx("option",{value:"F",children:"F"}),n.jsx("option",{value:"mF",children:"mF"}),n.jsx("option",{value:"F",children:"F"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 25"}),n.jsx("select",{value:r.voltageUnit||ln("voltage"),onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-tolerance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),n.jsxs("select",{id:`component-tolerance-${i.id}`,value:r.tolerance||"20%",onChange:w=>s({...r,tolerance:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},children:[n.jsx("option",{value:"0.5%",children:"0.5%"}),n.jsx("option",{value:"1%",children:"1%"}),n.jsx("option",{value:"2%",children:"2%"}),n.jsx("option",{value:"5%",children:"5%"}),n.jsx("option",{value:"10%",children:"10%"}),n.jsx("option",{value:"20%",children:"20%"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-polarized-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarized:"}),n.jsx("input",{id:`component-polarized-${i.id}`,type:"checkbox",checked:Uf(i),disabled:!0,style:{opacity:.6,cursor:"not-allowed"},title:"Polarized is a fixed property determined by component type"})]})]}),i.componentType==="Inductor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-inductance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),n.jsx("input",{id:`component-inductance-${i.id}`,type:"text",value:r.inductance||"",onChange:w=>s({...r,inductance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 10"}),n.jsx("select",{value:r.inductanceUnit||ln("inductance"),onChange:w=>s({...r,inductanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("inductance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 1"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-resistance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),n.jsx("input",{id:`component-resistance-${i.id}`,type:"text",value:r.resistance||"",onChange:w=>s({...r,resistance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 50"}),n.jsx("select",{value:r.resistanceUnit||"",onChange:w=>s({...r,resistanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("resistance").map(w=>n.jsx("option",{value:w,children:w},w))})]})]}),i.componentType==="Diode"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-diodetype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),n.jsxs("select",{id:`component-diodetype-${i.id}`,value:r.diodeType||"Standard",onChange:w=>s({...r,diodeType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Standard",children:"Standard"}),n.jsx("option",{value:"Zener",children:"Zener"}),n.jsx("option",{value:"LED",children:"LED"}),n.jsx("option",{value:"Schottky",children:"Schottky"}),n.jsx("option",{value:"Infrared",children:"Infrared"}),n.jsx("option",{value:"Photodiode",children:"Photodiode"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),r.diodeType==="LED"&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-ledcolor-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),n.jsxs("select",{id:`component-ledcolor-${i.id}`,value:r.ledColor||"",onChange:w=>s({...r,ledColor:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"",children:"Select..."}),n.jsx("option",{value:"Red",children:"Red"}),n.jsx("option",{value:"Green",children:"Green"}),n.jsx("option",{value:"Blue",children:"Blue"}),n.jsx("option",{value:"Yellow",children:"Yellow"}),n.jsx("option",{value:"Orange",children:"Orange"}),n.jsx("option",{value:"White",children:"White"}),n.jsx("option",{value:"RGB",children:"RGB"}),n.jsx("option",{value:"IR",children:"IR (Infrared)"}),n.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 50"}),n.jsx("select",{value:r.voltageUnit||ln("voltage"),onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 1"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]})]}),i.componentType==="Battery"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 3.7"}),n.jsx("select",{value:r.voltageUnit||"V",onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-capacity-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),n.jsx("input",{id:`component-capacity-${i.id}`,type:"text",value:r.capacity||"",onChange:w=>s({...r,capacity:w.target.value}),disabled:l,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 2000mAh"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-chemistry-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),n.jsxs("select",{id:`component-chemistry-${i.id}`,value:r.chemistry||"Li-ion",onChange:w=>s({...r,chemistry:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Li-ion",children:"Li-ion"}),n.jsx("option",{value:"LiPo",children:"LiPo"}),n.jsx("option",{value:"NiMH",children:"NiMH"}),n.jsx("option",{value:"NiCd",children:"NiCd"}),n.jsx("option",{value:"Alkaline",children:"Alkaline"}),n.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),n.jsx("option",{value:"Lithium",children:"Lithium"}),n.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),i.componentType==="Fuse"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 5"}),n.jsx("select",{value:r.currentUnit||"A",onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 250"}),n.jsx("select",{value:r.voltageUnit||"V",onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-fusetype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),n.jsxs("select",{id:`component-fusetype-${i.id}`,value:r.fuseType||"Fast-blow",onChange:w=>s({...r,fuseType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),n.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),n.jsx("option",{value:"Time-delay",children:"Time-delay"}),n.jsx("option",{value:"Resettable",children:"Resettable"}),n.jsx("option",{value:"Cartridge",children:"Cartridge"}),n.jsx("option",{value:"Glass",children:"Glass"}),n.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),i.componentType==="Relay"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-coilvoltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),n.jsx("input",{id:`component-coilvoltage-${i.id}`,type:"text",value:r.coilVoltage||"",onChange:w=>s({...r,coilVoltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 12"}),n.jsx("select",{value:r.coilVoltageUnit||ln("voltage"),onChange:w=>s({...r,coilVoltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-contacttype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),n.jsxs("select",{id:`component-contacttype-${i.id}`,value:r.contactType||"SPST",onChange:w=>s({...r,contactType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),n.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),n.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),n.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),n.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),n.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 10"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]})]}),i.componentType==="Motor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-motortype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),n.jsxs("select",{id:`component-motortype-${i.id}`,value:r.motorType||"DC",onChange:w=>s({...r,motorType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"DC",children:"DC Motor"}),n.jsx("option",{value:"Stepper",children:"Stepper Motor"}),n.jsx("option",{value:"Servo",children:"Servo Motor"}),n.jsx("option",{value:"Brushless",children:"Brushless DC"}),n.jsx("option",{value:"AC",children:"AC Motor"}),n.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 12"}),n.jsx("select",{value:r.voltageUnit||ln("voltage"),onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 1"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]})]}),i.componentType==="Switch"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-switchtype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),n.jsxs("select",{id:`component-switchtype-${i.id}`,value:r.switchType||"Toggle",onChange:w=>s({...r,switchType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Toggle",children:"Toggle"}),n.jsx("option",{value:"Push-button",children:"Push-button"}),n.jsx("option",{value:"Slide",children:"Slide"}),n.jsx("option",{value:"Rotary",children:"Rotary"}),n.jsx("option",{value:"DIP",children:"DIP Switch"}),n.jsx("option",{value:"Momentary",children:"Momentary"}),n.jsx("option",{value:"Latching",children:"Latching"}),n.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 5"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 250"}),n.jsx("select",{value:r.voltageUnit||ln("voltage"),onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]})]}),i.componentType==="FerriteBead"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-impedance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),n.jsx("input",{id:`component-impedance-${i.id}`,type:"text",value:r.impedance||"",onChange:w=>s({...r,impedance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 100"}),n.jsx("select",{value:r.impedanceUnit||ln("impedance"),onChange:w=>s({...r,impedanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("impedance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 1"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]})]}),i.componentType==="Connector"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-connectortype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),n.jsx("input",{id:`component-connectortype-${i.id}`,type:"text",value:r.connectorType||"",onChange:w=>s({...r,connectorType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-gender-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),n.jsxs("select",{id:`component-gender-${i.id}`,value:r.gender||"N/A",onChange:w=>s({...r,gender:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Male",children:"Male"}),n.jsx("option",{value:"Female",children:"Female"}),n.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),i.componentType==="Jumper"&&n.jsx(n.Fragment,{children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-positions-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),n.jsx("input",{id:`component-positions-${i.id}`,type:"number",min:"2",value:r.positions||3,onChange:w=>s({...r,positions:parseInt(w.target.value)||3}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"}})]})}),i.componentType==="Speaker"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-impedance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),n.jsx("input",{id:`component-impedance-${i.id}`,type:"text",value:r.impedance||"",onChange:w=>s({...r,impedance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 8"}),n.jsx("select",{value:r.impedanceUnit||ln("impedance"),onChange:w=>s({...r,impedanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("impedance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-power-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),n.jsxs("select",{id:`component-power-${i.id}`,value:r.power||"1/4",onChange:w=>s({...r,power:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"12px"},children:[n.jsx("option",{value:"1/20",children:"1/20 W"}),n.jsx("option",{value:"1/16",children:"1/16 W"}),n.jsx("option",{value:"1/10",children:"1/10 W"}),n.jsx("option",{value:"1/8",children:"1/8 W"}),n.jsx("option",{value:"1/4",children:"1/4 W"}),n.jsx("option",{value:"1/2",children:"1/2 W"}),n.jsx("option",{value:"1",children:"1 W"}),n.jsx("option",{value:"2",children:"2 W"}),n.jsx("option",{value:"3",children:"3 W"}),n.jsx("option",{value:"5",children:"5 W"}),n.jsx("option",{value:"10",children:"10 W"}),n.jsx("option",{value:"25",children:"25 W"}),n.jsx("option",{value:"50",children:"50 W"}),n.jsx("option",{value:"100",children:"100 W"})]})]})]}),i.componentType==="PowerSupply"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-inputvoltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),n.jsx("input",{id:`component-inputvoltage-${i.id}`,type:"text",value:r.inputVoltage||"",onChange:w=>s({...r,inputVoltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 120"}),n.jsx("select",{value:r.inputVoltageUnit||ln("voltage"),onChange:w=>s({...r,inputVoltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-outputvoltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),n.jsx("input",{id:`component-outputvoltage-${i.id}`,type:"text",value:r.outputVoltage||"",onChange:w=>s({...r,outputVoltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 12"}),n.jsx("select",{value:r.outputVoltageUnit||ln("voltage"),onChange:w=>s({...r,outputVoltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 1"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]})]}),i.componentType==="Transistor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-transistortype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),n.jsxs("select",{id:`component-transistortype-${i.id}`,value:r.transistorType||"BJT",onChange:w=>s({...r,transistorType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),n.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),n.jsx("option",{value:"MOSFET",children:"MOSFET"}),n.jsx("option",{value:"IGBT",children:"IGBT"}),n.jsx("option",{value:"JFET",children:"JFET"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-polarity-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),n.jsxs("select",{id:`component-polarity-${i.id}`,value:r.polarity||"NPN",onChange:w=>s({...r,polarity:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"NPN",children:"NPN"}),n.jsx("option",{value:"PNP",children:"PNP"}),n.jsx("option",{value:"N-Channel",children:"N-Channel"}),n.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 50"}),n.jsx("select",{value:r.voltageUnit||ln("voltage"),onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 1"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]})]}),i.componentType==="ResistorNetwork"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-resistance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),n.jsx("input",{id:`component-resistance-${i.id}`,type:"text",value:r.resistance||"",onChange:w=>s({...r,resistance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 10"}),n.jsx("select",{value:r.resistanceUnit||ln("resistance"),onChange:w=>s({...r,resistanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("resistance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-configuration-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),n.jsx("input",{id:`component-configuration-${i.id}`,type:"text",value:r.configuration||"",onChange:w=>s({...r,configuration:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),i.componentType==="Thermistor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-resistance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),n.jsx("input",{id:`component-resistance-${i.id}`,type:"text",value:r.resistance||"",onChange:w=>s({...r,resistance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 10"}),n.jsx("select",{value:r.resistanceUnit||ln("resistance"),onChange:w=>s({...r,resistanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("resistance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-thermistortype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),n.jsxs("select",{id:`component-thermistortype-${i.id}`,value:r.thermistorType||"NTC",onChange:w=>s({...r,thermistorType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),n.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-beta-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),n.jsx("input",{id:`component-beta-${i.id}`,type:"text",value:r.beta||"",onChange:w=>s({...r,beta:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),i.componentType==="Transformer"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-primaryvoltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),n.jsx("input",{id:`component-primaryvoltage-${i.id}`,type:"text",value:r.primaryVoltage||"",onChange:w=>s({...r,primaryVoltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 120"}),n.jsx("select",{value:r.primaryVoltageUnit||ln("voltage"),onChange:w=>s({...r,primaryVoltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-secondaryvoltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),n.jsx("input",{id:`component-secondaryvoltage-${i.id}`,type:"text",value:r.secondaryVoltage||"",onChange:w=>s({...r,secondaryVoltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 12"}),n.jsx("select",{value:r.secondaryVoltageUnit||ln("voltage"),onChange:w=>s({...r,secondaryVoltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-power-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),n.jsxs("select",{id:`component-power-${i.id}`,value:r.power||"1/4",onChange:w=>s({...r,power:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"12px"},children:[n.jsx("option",{value:"1/20",children:"1/20 W"}),n.jsx("option",{value:"1/16",children:"1/16 W"}),n.jsx("option",{value:"1/10",children:"1/10 W"}),n.jsx("option",{value:"1/8",children:"1/8 W"}),n.jsx("option",{value:"1/4",children:"1/4 W"}),n.jsx("option",{value:"1/2",children:"1/2 W"}),n.jsx("option",{value:"1",children:"1 W"}),n.jsx("option",{value:"2",children:"2 W"}),n.jsx("option",{value:"3",children:"3 W"}),n.jsx("option",{value:"5",children:"5 W"}),n.jsx("option",{value:"10",children:"10 W"}),n.jsx("option",{value:"25",children:"25 W"}),n.jsx("option",{value:"50",children:"50 W"}),n.jsx("option",{value:"100",children:"100 W"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-turns-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),n.jsx("input",{id:`component-turns-${i.id}`,type:"text",value:r.turns||"",onChange:w=>s({...r,turns:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),i.componentType==="TestPoint"&&n.jsx(n.Fragment,{children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-signal-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),n.jsx("input",{id:`component-signal-${i.id}`,type:"text",value:r.signal||"",onChange:w=>s({...r,signal:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),(i.componentType==="IntegratedCircuit"||i.componentType==="Semiconductor")&&n.jsxs(n.Fragment,{children:[R&&O&&O.length>0&&(()=>{const w=(ue,oe,ie)=>ie?"80px":ue==="partNumber"||ue==="manufacturer"?"150px":ue==="description"||ue==="operatingTemperature"?"180px":oe==="string"&&!ue.includes("Unit")?"150px":"120px",we=ue=>{if(ue.name==="datasheet"||ue.name==="description"||ue.name==="operatingTemperature"||R&&(ue.name==="manufacturer"||ue.name==="partNumber")||ue.name==="icType"||R&&!ue.name)return null;const oe=ue.name,ie=`${ue.name}Unit`,E=r[oe]??i[oe]??ue.defaultValue??"",Y=r[ie]??i[ie]??(ue.units&&ue.defaultUnit?ue.defaultUnit:""),F=Pe=>{s({...r,[oe]:Pe})},L=Pe=>{s({...r,[ie]:Pe})},$=!!(ue.units&&ue.units.length>0),H=w(ue.name,ue.type,$);return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsxs("label",{style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:[ue.label,":"]}),ue.type==="enum"?n.jsx("select",{value:E,onChange:Pe=>F(Pe.target.value),disabled:l,style:{width:H,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:(ue.enumValues||[]).map(Pe=>n.jsx("option",{value:Pe,children:Pe},Pe))}):n.jsx("input",{type:"text",value:E,onChange:Pe=>F(Pe.target.value),disabled:l,style:{width:H,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:$?"8px":"0"},placeholder:ue.defaultValue!==void 0?String(ue.defaultValue):""}),$&&ue.units&&n.jsx("select",{value:Y||ue.defaultUnit||ue.units[0],onChange:Pe=>L(Pe.target.value),disabled:l,style:{width:"70px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,flexShrink:0},children:ue.units.map(Pe=>n.jsx("option",{value:Pe,children:Pe},Pe))})]},ue.name)},X=O.map(we).filter(Boolean),G=R?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx("label",{htmlFor:`component-ictype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"IC Type:"}),n.jsxs("select",{id:`component-ictype-${i.id}`,value:r.icType||"Other",onChange:ue=>s({...r,icType:ue.target.value}),disabled:l,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),n.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),n.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),n.jsx("option",{value:"Logic",children:"Logic"}),n.jsx("option",{value:"Memory",children:"Memory"}),n.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),n.jsx("option",{value:"Timer",children:"Timer"}),n.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),n.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),n.jsx("option",{value:"Comparator",children:"Comparator"}),n.jsx("option",{value:"Transceiver",children:"Transceiver"}),n.jsx("option",{value:"Driver",children:"Driver"}),n.jsx("option",{value:"Amplifier",children:"Amplifier"}),n.jsx("option",{value:"Other",children:"Other"})]})]},"icType"):null,J=X.findIndex(ue=>ue?.key==="manufacturer");return J>=0&&G?X.splice(J+1,0,G):G&&X.push(G),X})(),z&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx("label",{htmlFor:`component-ictype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"IC Type:"}),n.jsxs("select",{id:`component-ictype-${i.id}`,value:r.icType||"Other",onChange:w=>s({...r,icType:w.target.value}),disabled:l,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},children:[n.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),n.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),n.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),n.jsx("option",{value:"Logic",children:"Logic"}),n.jsx("option",{value:"Memory",children:"Memory"}),n.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),n.jsx("option",{value:"Timer",children:"Timer"}),n.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),n.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),n.jsx("option",{value:"Comparator",children:"Comparator"}),n.jsx("option",{value:"Transceiver",children:"Transceiver"}),n.jsx("option",{value:"Driver",children:"Driver"}),n.jsx("option",{value:"Amplifier",children:"Amplifier"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx("label",{htmlFor:`component-packagetype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Package Type:"}),n.jsxs("select",{id:`component-packagetype-${i.id}`,value:r.packageType||"",onChange:w=>s({...r,packageType:w.target.value}),disabled:l,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},children:[n.jsx("option",{value:"",children:"-- Select --"}),n.jsx("option",{value:"DIP",children:"DIP"}),n.jsx("option",{value:"PDIP",children:"PDIP"}),n.jsx("option",{value:"SOIC",children:"SOIC"}),n.jsx("option",{value:"QFP",children:"QFP"}),n.jsx("option",{value:"LQFP",children:"LQFP"}),n.jsx("option",{value:"TQFP",children:"TQFP"}),n.jsx("option",{value:"BGA",children:"BGA"}),n.jsx("option",{value:"SSOP",children:"SSOP"}),n.jsx("option",{value:"TSOP",children:"TSOP"}),n.jsx("option",{value:"Various",children:"Various"}),n.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),i.componentType==="VacuumTube"&&n.jsx(n.Fragment,{children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-tubetype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),n.jsx("input",{id:`component-tubetype-${i.id}`,type:"text",value:r.tubeType||"",onChange:w=>s({...r,tubeType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),i.componentType==="VariableResistor"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-vrtype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),n.jsxs("select",{id:`component-vrtype-${i.id}`,value:r.vrType||"Potentiometer",onChange:w=>s({...r,vrType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),n.jsx("option",{value:"Rheostat",children:"Rheostat"}),n.jsx("option",{value:"Trimmer",children:"Trimmer"}),n.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-resistance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),n.jsx("input",{id:`component-resistance-${i.id}`,type:"text",value:r.resistance||"",onChange:w=>s({...r,resistance:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 10"}),n.jsx("select",{value:r.resistanceUnit||ln("resistance"),onChange:w=>s({...r,resistanceUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("resistance").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-power-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),n.jsxs("select",{id:`component-power-${i.id}`,value:r.power||"1/4",onChange:w=>s({...r,power:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"12px"},children:[n.jsx("option",{value:"1/20",children:"1/20 W"}),n.jsx("option",{value:"1/16",children:"1/16 W"}),n.jsx("option",{value:"1/10",children:"1/10 W"}),n.jsx("option",{value:"1/8",children:"1/8 W"}),n.jsx("option",{value:"1/4",children:"1/4 W"}),n.jsx("option",{value:"1/2",children:"1/2 W"}),n.jsx("option",{value:"1",children:"1 W"}),n.jsx("option",{value:"2",children:"2 W"}),n.jsx("option",{value:"3",children:"3 W"}),n.jsx("option",{value:"5",children:"5 W"}),n.jsx("option",{value:"10",children:"10 W"}),n.jsx("option",{value:"25",children:"25 W"}),n.jsx("option",{value:"50",children:"50 W"}),n.jsx("option",{value:"100",children:"100 W"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-taper-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),n.jsxs("select",{id:`component-taper-${i.id}`,value:r.taper||"Linear",onChange:w=>s({...r,taper:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Linear",children:"Linear"}),n.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),n.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),i.componentType==="Crystal"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-frequency-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),n.jsx("input",{id:`component-frequency-${i.id}`,type:"text",value:r.frequency||"",onChange:w=>s({...r,frequency:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-loadcapacitance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),n.jsx("input",{id:`component-loadcapacitance-${i.id}`,type:"text",value:r.loadCapacitance||"",onChange:w=>s({...r,loadCapacitance:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-tolerance-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),n.jsxs("select",{id:`component-tolerance-${i.id}`,value:r.tolerance||"10ppm",onChange:w=>s({...r,tolerance:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"10ppm",children:"10ppm"}),n.jsx("option",{value:"20ppm",children:"20ppm"}),n.jsx("option",{value:"30ppm",children:"30ppm"}),n.jsx("option",{value:"50ppm",children:"50ppm"}),n.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),i.componentType==="GenericComponent"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-generictype-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),n.jsxs("select",{id:`component-generictype-${i.id}`,value:i.genericType||"Attenuator",onChange:w=>s({...r,genericType:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},children:[n.jsx("option",{value:"Attenuator",children:"Attenuator"}),n.jsx("option",{value:"CircuitBreaker",children:"Circuit Breaker"}),n.jsx("option",{value:"Thermocouple",children:"Thermocouple"}),n.jsx("option",{value:"Tuner",children:"Tuner"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-voltage-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),n.jsx("input",{id:`component-voltage-${i.id}`,type:"text",value:r.voltage||"",onChange:w=>s({...r,voltage:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 50"}),n.jsx("select",{value:r.voltageUnit||ln("voltage"),onChange:w=>s({...r,voltageUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("voltage").map(w=>n.jsx("option",{value:w,children:w},w))})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-current-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),n.jsx("input",{id:`component-current-${i.id}`,type:"text",value:r.current||"",onChange:w=>s({...r,current:w.target.value}),disabled:l,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1},placeholder:"e.g., 1"}),n.jsx("select",{value:r.currentUnit||ln("current"),onChange:w=>s({...r,currentUnit:w.target.value}),disabled:l,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,width:"60px",marginRight:"12px"},children:Qi("current").map(w=>n.jsx("option",{value:w,children:w},w))})]}),i.genericType==="Tuner"&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-frequency-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),n.jsx("input",{id:`component-frequency-${i.id}`,type:"text",value:r.frequency||"",onChange:w=>s({...r,frequency:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., 100MHz"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-power-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),n.jsx("input",{id:`component-power-${i.id}`,type:"text",value:r.power||"",onChange:w=>s({...r,power:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"e.g., 1W"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-model-${i.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Model:"}),n.jsx("input",{id:`component-model-${i.id}`,type:"text",value:r.model||"",onChange:w=>s({...r,model:w.target.value}),disabled:l,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:l?.6:1,marginRight:"8px"},placeholder:"Part number or model"})]})]})]}):n.jsx("div",{style:{padding:"8px",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:4,color:"#856404",marginBottom:"8px",fontSize:"11px"},children:"Component definition missing for this instance. Using legacy fields. Please ensure the component has a definition in componentDefinitions.json and a valid componentDefinitionKey."})},Py=()=>{if(typeof window<"u"){const i=localStorage.getItem("geminiApiKey");if(i&&i.trim())return i.trim()}return null},Sv=()=>{if(typeof window<"u"){const i=localStorage.getItem("geminiModel");if(i)return i}return"gemini-2.5-flash-lite"},jv=()=>{const i=Py(),r=Sv();return i?`https://generativelanguage.googleapis.com/v1/models/${r}:generateContent?key=${i}`:null},Tv=i=>{const r=B0[i];return!r||!r.prefix||r.prefix.length<1?"?":r.prefix[0].substring(0,1).toUpperCase()},Cv=({componentEditor:i,componentDefinition:r,setComponentEditor:a,componentsTop:s,componentsBottom:l,setComponentsTop:d,setComponentsBottom:v,connectingPin:p,setConnectingPin:b,componentDialogPosition:y,setComponentDialogPosition:C,isDraggingDialog:D,setIsDraggingDialog:O,dialogDragOffset:T,setDialogDragOffset:K,areComponentsLocked:R,setSelectedComponentIds:z,setNotesDialogVisible:w,projectDirHandle:we,showGeminiSettingsDialog:X=!1,onGeminiSettingsDialogClose:G,onFindComponent:J})=>{const[ue,oe]=M.useState(!1),[ie,E]=M.useState(null),[Y,F]=M.useState(!1),[L,$]=M.useState(!1),[H,Pe]=M.useState(null),[ae,ve]=M.useState(!1),[pe,Ce]=M.useState(!1),[fe,k]=M.useState(""),[A,W]=M.useState(()=>typeof window<"u"&&localStorage.getItem("geminiApiKey")||""),[q,te]=M.useState(()=>typeof window<"u"&&localStorage.getItem("geminiModel")||"gemini-2.5-flash-lite"),[xe,ee]=M.useState(()=>typeof window<"u"?!!localStorage.getItem("geminiApiKey"):!1);M.useEffect(()=>{if(X){const Le=setTimeout(()=>{$(!0)},0);return()=>clearTimeout(Le)}},[X]),M.useEffect(()=>{typeof window<"u"&&ee(!!localStorage.getItem("geminiApiKey")||!!A.trim())},[A]),M.useEffect(()=>{if(i){const ke=(i.layer==="top"?s:l).find(Xe=>Xe.id===i.id);if(ke){const Xe=ke.customGeminiPrompt;k(Xe||"")}}},[i?.id,s,l]);const Ie=()=>{A.trim()?(typeof window<"u"&&(localStorage.setItem("geminiApiKey",A.trim()),localStorage.setItem("geminiModel",q)),ee(!0),xt({visible:!0,title:"API Key and Model Saved",message:`API key and model (${q}) saved! You can now use the "Extract Datasheet Information" feature.`,type:"success"})):(typeof window<"u"&&(localStorage.removeItem("geminiApiKey"),localStorage.setItem("geminiModel",q)),ee(!1),xt({visible:!0,title:"API Key Removed",message:"API key removed. Model preference saved.",type:"info"}))},_e=()=>{typeof window<"u"&&localStorage.removeItem("geminiApiKey"),W(""),ee(!1),xt({visible:!0,title:"API Key Removed",message:"API key has been removed from browser localStorage. You will need to enter it again to use AI features.",type:"info"})},Fe=()=>{const Le=i?.designator?.trim().toUpperCase();if(!Le)return;const Xe=[...s,...l].filter(Pt=>Pt.designator?.trim().toUpperCase()===Le);if(Xe.length===0)return;if(J&&Xe.length>0){const Pt=Xe[0];J(Pt.id,Pt.x,Pt.y)}const et=new Set(Xe.map(Pt=>Pt.id));z(et)},nt=Le=>`You are analyzing an electronic component datasheet PDF. Extract pin information, component properties, a datasheet summary, IC type, and pin count, then return the data as a JSON object.

Requirements:
1. Return a JSON object with three sections: "pins", "properties", and "summary"
2. First, determine the total number of pins (pinCount) for this component from the datasheet. This should be a positive integer representing the total number of pins/pads on the component.
3. For pins, extract information for ALL pins found in the datasheet (not just a subset). For each pin, provide:
   - pinNumber: The pin number (1, 2, 3, etc.)
   - pinName: The signal name (e.g., VCC, GND, IN+, OUT, etc.). Use the exact name from the datasheet.
   - pinDescription: A brief description of the pin's function (optional, can be empty string)
4. For component properties, extract the following information if available in the datasheet:
${Le.map(ke=>ke.hasUnits?`   - ${ke.name}: The ${ke.label.toLowerCase()} value (as a number) and ${ke.name}Unit: The unit (one of: ${ke.units.join(", ")})`:ke.type==="enum"?`   - ${ke.name}: The ${ke.label.toLowerCase()} (as a string)`:`   - ${ke.name}: The ${ke.label.toLowerCase()} (as a string or number, depending on the field type)`).join(`
`)}
5. For IC Type (icType), determine the type of integrated circuit from the datasheet. Choose from: "Op-Amp", "Microcontroller", "Microprocessor", "Logic", "Memory", "Voltage Regulator", "Timer", "ADC", "DAC", "Comparator", "Transceiver", "Driver", "Amplifier", or "Other". If it's clearly an op amp, use "Op-Amp". If it's clearly a microcontroller, use "Microcontroller", etc.
6. For Package Type (packageType), determine the package type from the datasheet. Choose from: "DIP", "PDIP", "SOIC", "QFP", "LQFP", "TQFP", "BGA", "SSOP", "TSOP", "Various", or "Other". If multiple package types are mentioned in the datasheet, use "Various". If it's a plastic DIP, use "PDIP". If it's a standard DIP, use "DIP".
7. For pin count (pinCount), determine the total number of pins/pads on the component from the datasheet. This should be a positive integer. Include this in the properties section.
8. For datasheet summary (datasheetSummary), provide a concise summary (2-4 sentences) of the introductory information from the datasheet, including what the component is, its main purpose, and key features mentioned in the introduction or overview section.
9. Only include properties that are actually found in the datasheet - do not make up values
10. For numeric fields with units, extract both the numeric value and the appropriate unit
11. Return ONLY valid JSON, no additional text, explanations, or markdown formatting

Example JSON format:
{
  "pins": [
    {"pinNumber": 1, "pinName": "VCC", "pinDescription": "Power supply positive"},
    {"pinNumber": 2, "pinName": "GND", "pinDescription": "Ground"},
    {"pinNumber": 3, "pinName": "IN+", "pinDescription": "Non-inverting input"},
    {"pinNumber": 4, "pinName": "IN-", "pinDescription": "Inverting input"},
    {"pinNumber": 5, "pinName": "OUT", "pinDescription": "Output"}
  ],
  "properties": {
    "partNumber": "LM358",
    "manufacturer": "Texas Instruments",
    "voltage": 36,
    "voltageUnit": "V",
    "description": "Dual operational amplifier",
    "icType": "Op-Amp",
    "packageType": "PDIP",
    "pinCount": 5
  },
  "summary": {
    "datasheetSummary": "The LM358 is a dual operational amplifier featuring low power consumption and wide supply voltage range. It is designed for single supply operation from 3V to 32V or dual supplies from 1.5V to 16V. The device offers high gain bandwidth product and low input offset voltage."
  }
}

Analyze the attached PDF datasheet and extract the information according to the requirements above.`,[lt,kt]=M.useState(()=>{const Le=localStorage.getItem("componentDialogSize");if(Le)try{return JSON.parse(Le)}catch{return{width:350,height:window.innerHeight*.4}}return{width:350,height:window.innerHeight*.4}}),[It,ne]=M.useState(!1),[jt,Qt]=M.useState({x:0,y:0,width:0,height:0}),[Wt,xt]=M.useState({visible:!1,title:"",message:"",type:"info"}),Je=Dt.useMemo(()=>{if(!i||!i.visible)return null;let Le=s.find(ke=>ke.id===i.id);return Le||(Le=l.find(ke=>ke.id===i.id)),Le||null},[i,s,l]);Dt.useEffect(()=>{if(!Je){E(null);return}const Le=Je.id,ke=Je.componentType,Xe=Je.componentType;if(!ke){console.error("[ComponentEditor useEffect] Component missing componentType:",{comp:Je,componentId:Le}),E(null);return}if(ke==="IntegratedCircuit"||Xe==="Semiconductor"){const et=Je;E(null),i&&a({...i,datasheetFileName:et.datasheetFileName||void 0})}else E(null)},[Je?.id,Je?.componentType,Je?.datasheetFileName]),M.useEffect(()=>{if(!It)return;const Le=Xe=>{const et=Xe.clientX-jt.x,Pt=Xe.clientY-jt.y,St=Math.max(350,Math.min(window.innerWidth-20,jt.width+et)),_t=Math.max(200,Math.min(window.innerHeight-20,jt.height+Pt)),Ut={width:St,height:_t};kt(Ut),localStorage.setItem("componentDialogSize",JSON.stringify(Ut))},ke=()=>{ne(!1)};return document.addEventListener("mousemove",Le),document.addEventListener("mouseup",ke),()=>{document.removeEventListener("mousemove",Le),document.removeEventListener("mouseup",ke)}},[It,jt]);const Gt=Le=>{Le.preventDefault(),Le.stopPropagation(),ne(!0),Qt({x:Le.clientX,y:Le.clientY,width:lt.width,height:lt.height})};if(!i||!i.visible)return n.jsxs(n.Fragment,{children:[L&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10005},onClick:Le=>{Le.target===Le.currentTarget&&($(!1),G?.())},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"500px",maxWidth:"600px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:Le=>Le.stopPropagation(),children:[n.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:"Google Gemini API Configuration"}),n.jsx("button",{onClick:()=>{$(!1),G?.()},style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:0,width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Close",children:""})]}),n.jsxs("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:[n.jsx("p",{style:{margin:"0 0 12px 0",fontWeight:600,color:"#fff"},children:"Benefits of Adding Your API Key:"}),n.jsxs("ul",{style:{margin:"0 0 16px 0",paddingLeft:"20px"},children:[n.jsx("li",{children:"Automatically extract pin names and component properties (voltage, current, temperature, etc.) from datasheet PDFs"}),n.jsx("li",{children:"Get datasheet summary for component notes"}),n.jsx("li",{children:"Save time by avoiding manual data entry"})]}),n.jsx("p",{style:{margin:"0 0 12px 0",fontWeight:600,color:"#fff"},children:"How to Get Your Free API Key:"}),n.jsxs("p",{style:{margin:"0 0 16px 0"},children:["Go to"," ",n.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",style:{color:"#4CAF50",textDecoration:"underline"},children:"Google AI Studio (aistudio.google.com/app/apikey)"}),', sign in with your Google account, and click "Get API key" or "Create API key" in the Dashboard to generate a key for a new or existing Google Cloud project, then copy it and paste it below.']}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#fff",fontSize:"13px",fontWeight:600},children:"Enter Your API Key:"}),n.jsx("input",{type:"password",value:A,onChange:Le=>W(Le.target.value),placeholder:"Paste your Gemini API key here",style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #555",borderRadius:"4px",background:"#1f1f24",color:"#fff",boxSizing:"border-box"},autoFocus:!0})]}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#fff",fontSize:"13px",fontWeight:600},children:"Select Gemini Model:"}),n.jsxs("select",{value:q,onChange:Le=>te(Le.target.value),style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #555",borderRadius:"4px",background:"#1f1f24",color:"#fff",boxSizing:"border-box",cursor:"pointer"},children:[n.jsx("option",{value:"gemini-2.5-flash-lite",children:"gemini-2.5-flash-lite (Lightweight, Fast)"}),n.jsx("option",{value:"gemini-2.5-flash",children:"gemini-2.5-flash (Fast, Balanced)"}),n.jsx("option",{value:"gemini-2.5-pro",children:"gemini-2.5-pro (High Quality, Slower)"}),n.jsx("option",{value:"gemini-1.5-flash",children:"gemini-1.5-flash (Legacy Fast)"}),n.jsx("option",{value:"gemini-1.5-pro",children:"gemini-1.5-pro (Legacy High Quality)"})]}),n.jsx("p",{style:{margin:"6px 0 0 0",color:"#aaa",fontSize:"12px",lineHeight:"1.4"},children:"Choose the model based on your needs: Flash models are faster and use fewer tokens, while Pro models provide higher quality responses."})]}),n.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#1f1f24",borderRadius:"4px",border:"1px solid #444"},children:[n.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#fff",fontSize:"13px"},children:"Storage & Security Information:"}),n.jsxs("p",{style:{margin:"0 0 8px 0",color:"#ddd",fontSize:"12px",lineHeight:"1.5"},children:["Your API key will be stored in your browser's ",n.jsx("strong",{children:"localStorage"})," under the key ",n.jsx("code",{style:{background:"#2b2b31",padding:"2px 4px",borderRadius:"2px",color:"#4CAF50"},children:"'geminiApiKey'"}),"."]}),n.jsx("p",{style:{margin:"0 0 8px 0",color:"#ffaa00",fontSize:"12px",lineHeight:"1.5",fontWeight:600},children:" Security Warnings:"}),n.jsxs("ul",{style:{margin:"0 0 8px 0",paddingLeft:"20px",color:"#ddd",fontSize:"12px",lineHeight:"1.5"},children:[n.jsx("li",{children:"localStorage is accessible via browser DevTools"}),n.jsx("li",{children:"Do not use on shared or public computers"}),n.jsx("li",{children:"Malicious browser extensions could access your key"}),n.jsx("li",{children:"XSS attacks could potentially read your key"}),n.jsx("li",{children:"The key is stored in plain text (not encrypted)"})]}),n.jsx("p",{style:{margin:"0",color:"#aaa",fontSize:"11px",lineHeight:"1.4",fontStyle:"italic"},children:"For maximum security, consider using API key restrictions in Google Cloud Console and regularly rotating your keys."})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"8px"},children:[n.jsx("button",{onClick:_e,disabled:!xe,style:{padding:"8px 16px",background:xe?"#d32f2f":"#444",color:"#fff",border:"1px solid #666",borderRadius:6,cursor:xe?"pointer":"not-allowed",fontSize:"14px",fontWeight:600,opacity:xe?1:.5},title:xe?"Remove API key from browser localStorage":"No API key stored",children:"Remove API Key"}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>{$(!1),G?.()},style:{padding:"8px 16px",background:"#555",color:"#fff",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Cancel"}),n.jsx("button",{onClick:()=>{Ie(),$(!1),G?.()},style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save API Key"})]})]})]})}),n.jsx(zx,{visible:Wt.visible,title:Wt.title,message:Wt.message,type:Wt.type,onClose:()=>{xt({visible:!1,title:"",message:"",type:"info"})},onShowResponse:Wt.onShowResponse})]});if(!Je)return console.error("[ComponentEditor] Component not found:",{componentId:i.id,componentsTopCount:s.length,componentsBottomCount:l.length}),null;if(!Je.id||!Je.componentType||typeof Je.pinCount!="number")return console.error("[ComponentEditor] Component missing required properties:",{componentId:Je.id,hasComponentType:!!Je.componentType,componentType:Je.componentType,pinCount:Je.pinCount,pinCountType:typeof Je.pinCount,component:Je}),null;let un="top";s.find(Le=>Le.id===i.id)||(un="bottom"),i.layer!==un&&a({...i,layer:un});const Zt=Le=>{const ke={...Le};console.log("[ComponentEditor] updateComponent - Entry:",{componentId:Le.id,componentType:Le.componentType});const Xe=i.designator?.trim()||"";ke.designator=Xe,ke.x=i.x,ke.y=i.y,ke.layer=i.layer,ke.orientation=i.orientation??0;const et=Xe.length>0?Xe.charAt(0).toUpperCase():Tv(Le.componentType);if(ke.abbreviation=et,i.manufacturer!==void 0&&(ke.manufacturer=i.manufacturer?.trim()||void 0),i.partNumber!==void 0&&(ke.partNumber=i.partNumber?.trim()||void 0),i.pinCount!==Le.pinCount){ke.pinCount=i.pinCount;const Pt=Le.pinConnections||[];if(ke.pinConnections=new Array(i.pinCount).fill("").map((St,_t)=>_t<Pt.length?Pt[_t]:""),Le.pinPolarities){const St=Le.pinPolarities||[];ke.pinPolarities=new Array(i.pinCount).fill("").map((_t,Ut)=>Ut<St.length?St[Ut]:"")}if(Le.pinNames){const St=Le.pinNames||[];ke.pinNames=new Array(i.pinCount).fill("").map((_t,Ut)=>Ut<St.length?St[Ut]:"")}}else ke.pinConnections=Le.pinConnections||[],Le.pinPolarities&&(ke.pinPolarities=Le.pinPolarities),Le.pinNames&&(ke.pinNames=Le.pinNames);return Le.componentType==="Resistor"?(ke.resistance=i.resistance||void 0,ke.resistanceUnit=i.resistanceUnit||void 0,ke.power=i.power?`${i.power}W`:void 0,ke.tolerance=i.tolerance||void 0):Le.componentType==="Capacitor"?(ke.capacitance=i.capacitance||void 0,ke.capacitanceUnit=i.capacitanceUnit||void 0,ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.tolerance=i.tolerance||void 0,ke.dielectric=i.dielectric||void 0):Le.componentType==="Electrolytic Capacitor"?(ke.capacitance=i.capacitance||void 0,ke.capacitanceUnit=i.capacitanceUnit||void 0,ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.tolerance=i.tolerance||void 0,ke.esr=i.esr||void 0,ke.esrUnit=i.esrUnit||void 0,ke.temperature=i.temperature||void 0):Le.componentType==="Film Capacitor"?(ke.capacitance=i.capacitance||void 0,ke.capacitanceUnit=i.capacitanceUnit||void 0,ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.tolerance=i.tolerance||void 0,ke.filmType=i.filmType||void 0):Le.componentType==="Diode"?(ke.diodeType=i.diodeType||Le.diodeType||"Standard",ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0,ke.ledColor=i.ledColor||void 0):Le.componentType==="Battery"?(ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.capacity=i.capacity||void 0,ke.capacityUnit=i.capacityUnit||void 0,ke.chemistry=i.chemistry||void 0):Le.componentType==="Fuse"?(ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0,ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.fuseType=i.fuseType||void 0):Le.componentType==="FerriteBead"?(ke.impedance=i.impedance||void 0,ke.impedanceUnit=i.impedanceUnit||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0):Le.componentType==="Connector"?(ke.connectorType=i.connectorType||void 0,ke.gender=i.gender||void 0):Le.componentType==="Jumper"?ke.positions=i.positions||void 0:Le.componentType==="Relay"?(ke.coilVoltage=i.coilVoltage||void 0,ke.coilVoltageUnit=i.coilVoltageUnit||void 0,ke.contactType=i.contactType||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0):Le.componentType==="Inductor"?(ke.inductance=i.inductance||void 0,ke.inductanceUnit=i.inductanceUnit||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0,ke.resistance=i.resistance||void 0,ke.resistanceUnit=i.resistanceUnit||void 0):Le.componentType==="Speaker"?(ke.impedance=i.impedance||void 0,ke.impedanceUnit=i.impedanceUnit||void 0,ke.power=i.power?`${i.power}W`:void 0):Le.componentType==="Motor"?(ke.motorType=i.motorType||void 0,ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0):Le.componentType==="PowerSupply"?(ke.inputVoltage=i.inputVoltage||void 0,ke.inputVoltageUnit=i.inputVoltageUnit||void 0,ke.outputVoltage=i.outputVoltage||void 0,ke.outputVoltageUnit=i.outputVoltageUnit||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0):Le.componentType==="Transistor"?(ke.transistorType=i.transistorType||void 0,ke.polarity=i.polarity||void 0,ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0):Le.componentType==="ResistorNetwork"?(ke.resistance=i.resistance||void 0,ke.resistanceUnit=i.resistanceUnit||void 0,ke.configuration=i.configuration||void 0):Le.componentType==="Thermistor"?(ke.resistance=i.resistance||void 0,ke.resistanceUnit=i.resistanceUnit||void 0,ke.thermistorType=i.thermistorType||void 0,ke.beta=i.beta||void 0):Le.componentType==="Switch"?(ke.switchType=i.switchType||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0,ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0):Le.componentType==="Transformer"?(ke.primaryVoltage=i.primaryVoltage||void 0,ke.primaryVoltageUnit=i.primaryVoltageUnit||void 0,ke.secondaryVoltage=i.secondaryVoltage||void 0,ke.secondaryVoltageUnit=i.secondaryVoltageUnit||void 0,ke.power=i.power?`${i.power}W`:void 0,ke.turns=i.turns||void 0):Le.componentType==="TestPoint"?ke.signal=i.signal||void 0:Le.componentType==="Film Capacitor"?(ke.capacitance=i.capacitance||void 0,ke.capacitanceUnit=i.capacitanceUnit||void 0,ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.tolerance=i.tolerance||void 0,ke.filmType=i.filmType||void 0):Le.componentType==="IntegratedCircuit"||Le.componentType==="Semiconductor"?(ke.description=i.description?.trim()||void 0,Le.componentType==="Semiconductor"&&(ke.componentType="IntegratedCircuit"),ke.icType=i.icType||void 0,ke.manufacturer=i.manufacturer?.trim()||void 0,ke.partNumber=i.partNumber?.trim()||void 0,ke.operatingTemperature=i.operatingTemperature?.trim()||void 0,ke.packageType=i.packageType||void 0,i.datasheetFileName?ke.datasheetFileName=i.datasheetFileName:ke.datasheetFileName=void 0):ke.description=i.description?.trim()||void 0,Le.componentType==="VacuumTube"?ke.tubeType=i.tubeType||void 0:Le.componentType==="VariableResistor"?(ke.vrType=i.vrType||void 0,ke.resistance=i.resistance||void 0,ke.resistanceUnit=i.resistanceUnit||void 0,ke.power=i.power?`${i.power}W`:void 0,ke.taper=i.taper||void 0):Le.componentType==="Crystal"?(ke.frequency=i.frequency||void 0,ke.loadCapacitance=i.loadCapacitance||void 0,ke.tolerance=i.tolerance||void 0):Le.componentType==="GenericComponent"&&(ke.genericType=i.genericType||"Attenuator",ke.voltage=i.voltage||void 0,ke.voltageUnit=i.voltageUnit||void 0,ke.current=i.current||void 0,ke.currentUnit=i.currentUnit||void 0,ke.power=i.power||void 0,ke.frequency=i.frequency||void 0,ke.model=i.model||void 0),ke},_n=()=>{if(R){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const Le=s.find(et=>et.id===i.id),ke=l.find(et=>et.id===i.id),Xe=Le||ke;if(Xe){Xe.componentType==="IntegratedCircuit"&&console.log("[ComponentEditor] handleSave - Before updateComponent call:",{componentDatasheet:Xe.datasheet,editorDatasheet:i.datasheet,editorDatasheetType:typeof i.datasheet,editorDatasheetLength:i.datasheet?.length,fullEditor:i});const et=Zt(Xe);Xe.componentType==="IntegratedCircuit"&&console.log("[ComponentEditor] handleSave - After updateComponent call:",{updatedComponentDatasheet:et.datasheet,updatedComponentDatasheetType:typeof et.datasheet});const Pt=Xe.layer,St=i.layer;Pt!==St?Pt==="top"?(d(_t=>_t.filter(Ut=>Ut.id!==i.id)),v(_t=>[..._t,et])):(v(_t=>_t.filter(Ut=>Ut.id!==i.id)),d(_t=>[..._t,et])):St==="top"?d(_t=>{const Ut=_t.map(Xt=>Xt.id===i.id?(console.log("[ComponentEditor] Updating component in top array - datasheet:",et.datasheet),et):Xt),qt=Ut.find(Xt=>Xt.id===i.id);return qt&&qt.componentType==="IntegratedCircuit"&&console.log("[ComponentEditor] After state update - component datasheet in array:",qt.datasheet),Ut}):v(_t=>{const Ut=_t.map(Xt=>Xt.id===i.id?(console.log("[ComponentEditor] Updating component in bottom array - datasheet:",et.datasheet),et):Xt),qt=Ut.find(Xt=>Xt.id===i.id);return qt&&qt.componentType==="IntegratedCircuit"&&console.log("[ComponentEditor] After state update - component datasheet in array:",qt.datasheet),Ut})}else if(console.warn(`Component ${i.id} not found in either layer array`),i.layer==="top"){const et=l.find(Pt=>Pt.id===i.id);if(et){const Pt=Zt(et);v(St=>St.filter(_t=>_t.id!==i.id)),d(St=>[...St,Pt])}}else{const et=s.find(Pt=>Pt.id===i.id);if(et){const Pt=Zt(et);d(St=>St.filter(_t=>_t.id!==i.id)),v(St=>[...St,Pt])}}a(null),b(null)},Rt=async()=>{const Le=Py(),ke=jv();if(!Le||!ke){$(!0);return}const Xe=Je?.datasheetFileName;if(!ie&&(!we||!Xe)){xt({visible:!0,title:"Datasheet Required",message:"Please choose a datasheet file before extracting information.",type:"info"});return}oe(!0);try{let et,Pt;if(ie)et=await ie.arrayBuffer(),Pt=ie.size;else if(we&&Xe){const Et=Xe.split("/");let Ke=we;for(let On=0;On<Et.length-1;On++){const En=Et[On];try{Ke=await Ke.getDirectoryHandle(En)}catch{const Gn=En==="datasheets"?"Datasheets":En==="Datasheets"?"datasheets":En;try{Ke=await Ke.getDirectoryHandle(Gn)}catch{throw new Error(`Directory '${En}' not found in project folder.`)}}}const $t=await(await Ke.getFileHandle(Et[Et.length-1])).getFile();et=await $t.arrayBuffer(),Pt=$t.size}else throw new Error("No datasheet file available");const St=20*1024*1024;if(Pt>St){const Et=(Pt/1048576).toFixed(2);throw new Error(`PDF file is too large (${Et} MB). Maximum file size is 20 MB. Please use a smaller file or split the datasheet.`)}const _t=await new Promise((Et,Ke)=>{const Vt=new Blob([et],{type:"application/pdf"}),$t=new FileReader;$t.onloadend=()=>{const En=$t.result.split(",")[1];if(!En){Ke(new Error("Failed to extract base64 data from FileReader result"));return}Et(En)},$t.onerror=()=>Ke(new Error("FileReader failed to read PDF file")),$t.readAsDataURL(Vt)}),qt=(i.layer==="top"?s:l).find(Et=>Et.id===i.id);if(!qt)throw new Error("Component not found");const an=((r||Fl(qt))?.fields||[]).filter(Et=>Et.name!=="datasheet").map(Et=>({name:Et.name,label:Et.label,type:Et.type,hasUnits:!!(Et.units&&Et.units.length>0),units:Et.units||[]}));let Bt;const Kt=qt.customGeminiPrompt;Kt&&Kt.trim()?Bt=Kt:Bt=nt(an);const dn=await fetch(ke,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:Bt},{inlineData:{mimeType:"application/pdf",data:_t}}]}]})});if(!dn.ok){const Et=await dn.text();let Ke=`Gemini API error: ${dn.status} ${dn.statusText}`;try{const Vt=JSON.parse(Et);if(Vt.error&&Vt.error.message){let $t=Vt.error.message;$t.length>500&&($t=$t.replace(/"([A-Za-z0-9+/]{100,})"/g,(On,En)=>`"[Base64 data truncated - ${En.length} characters]"`)),Ke+=`.

${$t}`}if(Vt.error&&Vt.error.details){let $t=JSON.stringify(Vt.error.details,null,2);$t=$t.replace(/"([A-Za-z0-9+/]{100,})"/g,(On,En)=>`"[Base64 data truncated - ${En.length} characters]"`),Ke+=`

Details:
${$t}`}}catch{Et.length>1e3?Ke+=`.

${Et.substring(0,1e3)}... [truncated]`:Ke+=`.

${Et}`}throw new Error(Ke)}const ti=await dn.json();let Nn="";if(ti.candidates&&ti.candidates[0]){if(ti.candidates[0].finishReason&&ti.candidates[0].finishReason!=="STOP")throw new Error(`Gemini API response blocked: ${ti.candidates[0].finishReason}`);if(ti.candidates[0].content&&ti.candidates[0].content.parts){const Et=ti.candidates[0].content.parts;Et&&Et[0]&&Et[0].text&&(Nn=Et[0].text.trim())}}if(!Nn)throw Pe(null),new Error("No response text from Gemini API. The API may have returned an empty response.");Pe(Nn),Nn=Nn.replace(/^```[\w]*\n?/gm,"").replace(/\n?```$/gm,"");let Ot;try{Ot=JSON.parse(Nn)}catch(Et){throw new Error(`Failed to parse JSON response from Gemini API: ${Et instanceof Error?Et.message:"Unknown error"}`)}if(!Ot||typeof Ot!="object")throw new Error("Invalid JSON response from Gemini API: expected an object");let ji=i.pinCount;if(Ot.properties&&typeof Ot.properties=="object"&&Ot.properties.pinCount){const Et=parseInt(String(Ot.properties.pinCount),10);!isNaN(Et)&&Et>0&&(ji=Et)}else if(Ot.pins&&Array.isArray(Ot.pins)){let Et=0;for(const Ke of Ot.pins)if(Ke&&typeof Ke=="object"&&Ke.pinNumber){const Vt=parseInt(String(Ke.pinNumber),10);!isNaN(Vt)&&Vt>Et&&(Et=Vt)}Et>0&&(ji=Et)}const In=new Array(ji).fill("");let er=0;if(Ot.pins&&Array.isArray(Ot.pins)){for(const Et of Ot.pins)if(Et&&typeof Et=="object"&&Et.pinNumber&&Et.pinName){const Ke=parseInt(String(Et.pinNumber),10);!isNaN(Ke)&&Ke>=1&&Ke<=ji&&(In[Ke-1]=String(Et.pinName).trim(),er++)}}if(er===0)throw new Error("Could not parse any pin information from the JSON response.");const Gi={...i};let Ft=0;const Pi=[];if(ji!==i.pinCount&&(Gi.pinCount=ji,Pi.push({label:"Pin Count",value:String(ji)}),Ft++),Ot.properties&&typeof Ot.properties=="object"){const Et=Ot.properties;for(const Ke of an)if(Et.hasOwnProperty(Ke.name)){const Vt=Et[Ke.name];if(Vt!=null&&Vt!==""){let $t="";if(Ke.hasUnits){Gi[Ke.name]=String(Vt);const On=`${Ke.name}Unit`;let En="";if(Et.hasOwnProperty(On)){const Hi=String(Et[On]).trim();Ke.units.includes(Hi)?(Gi[On]=Hi,En=Hi):Ke.units.length>0&&(Gi[On]=Ke.units[0],En=Ke.units[0])}else Ke.units.length>0&&(Gi[On]=Ke.units[0],En=Ke.units[0]);$t=`${Vt} ${En}`.trim()}else Gi[Ke.name]=String(Vt),$t=String(Vt);Pi.push({label:Ke.label,value:$t}),Ft++}}if(Et.hasOwnProperty("icType")&&Et.icType){const Ke=String(Et.icType).trim();["Op-Amp","Microcontroller","Microprocessor","Logic","Memory","Voltage Regulator","Timer","ADC","DAC","Comparator","Transceiver","Driver","Amplifier","Other"].includes(Ke)&&(Gi.icType=Ke,Pi.push({label:"IC Type",value:Ke}),Ft++)}if(Et.hasOwnProperty("packageType")&&Et.packageType){const Ke=String(Et.packageType).trim(),Vt=["DIP","PDIP","SOIC","QFP","LQFP","TQFP","BGA","SSOP","TSOP","Various","Other"];let $t=Ke;if(Ke.toUpperCase()==="PDIP"||Ke.toUpperCase()==="DIP")Ke.includes(",")||Ke.includes(" or ")||Ke.includes(" and ")?$t="Various":Ke.toUpperCase().includes("PDIP")?$t="PDIP":$t="DIP";else if(Vt.includes(Ke))$t=Ke;else if(Ke.includes(",")||Ke.includes(" or ")||Ke.includes(" and "))$t="Various";else{const On=Ke.toUpperCase();On.includes("LQFP")?$t="LQFP":On.includes("TQFP")?$t="TQFP":On.includes("QFP")?$t="QFP":On.includes("SOIC")?$t="SOIC":On.includes("BGA")?$t="BGA":On.includes("SSOP")?$t="SSOP":On.includes("TSOP")?$t="TSOP":$t="Other"}(Vt.includes($t)||$t==="Various")&&(Gi.packageType=$t,Pi.push({label:"Package Type",value:$t}),Ft++)}}let gi="";if(Ot.summary&&typeof Ot.summary=="object"&&Ot.summary.datasheetSummary&&(gi=String(Ot.summary.datasheetSummary).trim(),gi)){Gi.notes=gi;const Et=gi.length>100?gi.substring(0,100)+"...":gi;Pi.push({label:"Notes",value:Et}),Ft++}if(a(Gi),qt){const Et=qt.pinConnections||[],Ke=new Array(ji).fill("").map((Li,tr)=>tr<Et.length?Et[tr]:""),Vt=qt.pinPolarities||[],$t=new Array(ji).fill("").map((Li,tr)=>tr<Vt.length?Vt[tr]:""),On=[...In];for(;On.length<ji;)On.push("");const En={...qt,pinNames:On,pinCount:ji,pinConnections:Ke,pinPolarities:$t,...gi&&{notes:gi}};i.layer==="top"?d(Li=>Li.map(tr=>tr.id===i.id?En:tr)):v(Li=>Li.map(tr=>tr.id===i.id?En:tr));const Hi=In.filter(Li=>Li.length>0).length;let Gn=`Extracted ${Hi} pin name${Hi!==1?"s":""}`;ji!==i.pinCount&&(Gn+=" and pin count"),Ft>0&&(Gn+=` and ${Ft} propert${Ft===1?"y":"ies"}`),Gn+=" from datasheet.",Pi.length>0&&(Gn+=`

Extracted Properties:`,Pi.forEach(Li=>{Gn+=`
   ${Li.label}: ${Li.value}`}));const ai=[];In.forEach((Li,tr)=>{Li&&Li.trim()&&ai.push(`Pin ${tr+1}: ${Li.trim()}`)}),ai.length>0&&(Gn+=`

Pin Names:`,Gn+=`
  `+ai.join(", ")),xt({visible:!0,title:"Extraction Complete",message:Gn,type:"success"}),Pe(null)}}catch(et){console.error("Error fetching pin names:",et),xt({visible:!0,title:"Extraction Failed",message:`Failed to extract information: ${et instanceof Error?et.message:"Unknown error"}. Please enter pin names manually.`,type:"info",onShowResponse:H?()=>ve(!0):void 0})}finally{oe(!1)}};return n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        @keyframes heartbeat {
          0%, 100% {
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.8);
          }
          50% {
            transform: scale(1.15);
            box-shadow: 0 0 0 8px rgba(76, 175, 80, 0);
          }
        }
        .fetch-pin-names-pulse {
          animation: heartbeat 0.8s ease-in-out infinite;
        }
      `}),n.jsxs("div",{"data-component-editor-dialog":!0,onClick:Le=>{if(p&&p.componentId===Je.id){const ke=Le.target;(ke.tagName==="BUTTON"||ke.tagName==="INPUT"||ke.closest("button")||ke.closest("input"))&&Le.stopPropagation()}},style:{position:"fixed",top:y?`${y.y}px`:"90px",left:y?`${y.x}px`:`${window.innerWidth-280}px`,transform:"none",background:p&&p.componentId===Je.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"350px",width:`${lt.width}px`,height:`${lt.height}px`,maxHeight:`${window.innerHeight-20}px`,display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:D?"grabbing":"default"},children:[n.jsxs("div",{onMouseDown:Le=>{const ke=Le.target;ke.tagName==="BUTTON"||ke.tagName==="INPUT"||ke.closest("button")||ke.closest("input")||y&&(K({x:Le.clientX-y.x,y:Le.clientY-y.y}),O(!0),Le.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:D?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[n.jsx("h3",{style:{margin:0,fontSize:"13px",color:"#fff",fontWeight:600},children:"Component Properties"}),n.jsx("button",{onClick:()=>{a(null),b(null)},style:{background:"transparent",border:"none",fontSize:"15px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[(()=>{const Le=r||Fl(Je);return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Category:"}),n.jsx("div",{style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"11px",color:"#000"},children:Le?.category||"N/A"})]})})(),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Type:"}),n.jsx("div",{style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"11px",color:"#000"},children:(()=>{const Le=r||Fl(Je);return Le?.displayName?Je.componentType==="Capacitor"&&!Le.displayName.toLowerCase().includes("capacitor")?`${Le.displayName} Capacitor`:Le.displayName:Je.componentType==="GenericComponent"&&Je.genericType?Ul(Je.genericType):Je.componentType==="Diode"&&Je.diodeType&&Je.diodeType!=="Standard"?Ul(Je.diodeType):Je.componentType==="VariableResistor"&&Je.vrType&&Je.vrType!=="Potentiometer"?Ul(Je.vrType):Je.componentType==="Capacitor"&&Je.dielectric==="Tantalum"?"Tantalum Capacitor":Je.componentType==="Capacitor"&&Je.capacitorType==="Electrolytic"?"Electrolytic Capacitor":Je.componentType==="Capacitor"&&Je.capacitorType==="Film"?"Film Capacitor":Ul(Je.componentType)})()})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-layer-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Layer:"}),n.jsxs("select",{id:`component-layer-${Je.id}`,name:`component-layer-${Je.id}`,value:i.layer,onChange:Le=>a({...i,layer:Le.target.value}),disabled:R,style:{width:"80px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1},children:[n.jsx("option",{value:"top",children:"Top"}),n.jsx("option",{value:"bottom",children:"Bottom"})]})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-designator-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Designator:"}),n.jsx("input",{id:`component-designator-${Je.id}`,name:`component-designator-${Je.id}`,type:"text",value:i.designator||"",onChange:Le=>{const ke=Le.target.value,Xe=ke.length>0?ke.charAt(0).toUpperCase():i.abbreviation;a({...i,designator:ke,abbreviation:Xe})},disabled:R,style:{width:"80px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",fontFamily:"monospace",textTransform:"uppercase",opacity:R?.6:1},placeholder:"e.g., U2, R7, C1",onKeyDown:Le=>{Le.key==="Enter"&&!R&&(Le.preventDefault(),Fe())}}),n.jsx("button",{onClick:Fe,disabled:R||!i.designator?.trim(),style:{padding:"4px 12px",background:R||!i.designator?.trim()?"#ccc":"linear-gradient(90deg, #7B68EE 0%, #6A5ACD 100%)",color:"#fff",border:"none",borderRadius:"4px",fontSize:"11px",fontWeight:600,cursor:R||!i.designator?.trim()?"not-allowed":"pointer",opacity:R||!i.designator?.trim()?.6:1,textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)",whiteSpace:"nowrap"},title:"Find all components with this designator",children:"Find"})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-orientation-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Orientation:"}),n.jsxs("select",{id:`component-orientation-${Je.id}`,name:`component-orientation-${Je.id}`,value:i.orientation??0,onChange:Le=>{const ke=parseInt(Le.target.value)||0;if(a({...i,orientation:ke}),!R){const et=(i.layer==="top"?s:l).find(Pt=>Pt.id===i.id);if(et){const Pt={...et,orientation:ke};i.layer==="top"?d(St=>St.map(_t=>_t.id===i.id?Pt:_t)):v(St=>St.map(_t=>_t.id===i.id?Pt:_t))}}},disabled:R,style:{width:"70px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1},children:[n.jsx("option",{value:"0",children:"0"}),n.jsx("option",{value:"90",children:"90"}),n.jsx("option",{value:"180",children:"180"}),n.jsx("option",{value:"270",children:"270"})]})]}),(Je.componentType==="IntegratedCircuit"||Je.componentType==="Semiconductor")&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx("label",{htmlFor:`component-datasheet-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Datasheet:"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",flex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap",flex:1},children:[n.jsx("input",{id:`component-datasheet-file-${Je.id}`,type:"file",accept:".pdf",onChange:async Le=>{const ke=Le.target.files?.[0]||null;if(ke){E(ke);let Xe=ke.name;if(we)try{let et;try{et=await we.getDirectoryHandle("datasheets",{create:!0})}catch(_t){console.error("Failed to get/create datasheets directory:",_t),et=we}const St=await(await et.getFileHandle(ke.name,{create:!0})).createWritable();await St.write(await ke.arrayBuffer()),await St.close(),Xe=et===we?ke.name:`datasheets/${ke.name}`}catch(et){console.error("Failed to copy datasheet to project directory:",et)}a({...i,datasheetFileName:Xe})}else E(null),a({...i,datasheetFileName:void 0})},disabled:R,style:{position:"absolute",width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",zIndex:-1}}),n.jsx("label",{htmlFor:`component-datasheet-file-${Je.id}`,style:{display:"inline-block",padding:"2px 6px",background:R?"#ccc":"#4CAF50",border:"none",borderRadius:2,fontSize:"11px",color:"#fff",cursor:R?"not-allowed":"pointer",opacity:R?.6:1,whiteSpace:"nowrap",flex:"0 0 auto"},children:"Choose File"}),(()=>{const Le=Je?.datasheetFileName,ke=ie?.name||(Le?Le.split("/").pop():null),Xe=!!ie;return ke?Xe?n.jsx("a",{href:"#",onClick:et=>{et.preventDefault(),et.stopPropagation();try{const Pt=ie,St=URL.createObjectURL(Pt),_t=window.open(St,"_blank","noopener,noreferrer");if(!_t||_t.closed){URL.revokeObjectURL(St);const Ut=document.createElement("a"),qt=URL.createObjectURL(Pt);Ut.href=qt,Ut.target="_blank",Ut.rel="noopener noreferrer",document.body.appendChild(Ut),Ut.click(),document.body.removeChild(Ut)}}catch(Pt){console.error("Error opening datasheet:",Pt),alert("Failed to open datasheet file.")}},style:{fontSize:"11px",color:"#0066cc",whiteSpace:"nowrap",textDecoration:"underline",cursor:"pointer",flex:"0 0 auto"},title:"Click to open PDF in new window",children:ke}):n.jsxs("span",{style:{fontSize:"11px",color:"#666",flex:"0 0 auto",fontStyle:"italic"},title:"Re-choose the datasheet file to open it",children:[ke," (re-choose file to open)"]}):n.jsx("span",{style:{fontSize:"11px",color:"#666",flex:"0 0 auto"},children:"No file chosen"})})()]}),n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:n.jsx("button",{onClick:()=>{if(i&&Je){const ke=(i.layer==="top"?s:l).find(Xe=>Xe.id===i.id);if(ke){const Pt=((r||Fl(ke))?.fields||[]).filter(_t=>_t.name!=="datasheet").map(_t=>({name:_t.name,label:_t.label,type:_t.type,hasUnits:!!(_t.units&&_t.units.length>0),units:_t.units||[]})),St=ke.customGeminiPrompt;if(St&&St.trim())k(St);else{const _t=nt(Pt);k(_t)}}}Ce(!0)},disabled:R,style:{padding:"3px 8px",fontSize:"11px",background:R?"#ccc":"#0066cc",color:"#fff",border:"none",borderRadius:"3px",cursor:R?"not-allowed":"pointer",opacity:R?.6:1,fontWeight:600,whiteSpace:"nowrap",transition:"background 0.2s"},title:"View and edit the AI prompt that will be sent to Gemini",children:"View/Edit Prompt"})}),n.jsx("div",{style:{display:"flex",alignItems:"center",gap:"4px",marginTop:"4px"},children:n.jsx("button",{onClick:Rt,disabled:ue||R,className:ue?"fetch-pin-names-pulse":"",style:{padding:"3px 8px",fontSize:"11px",background:R?"#ccc":"#4CAF50",color:"#fff",border:"none",borderRadius:"3px",cursor:ue||R?"not-allowed":"pointer",opacity:R?.6:1,fontWeight:600,whiteSpace:"nowrap",transition:"background 0.2s"},children:ue?"Extracting...":"Extract Datasheet Information"})})]})]}),(Je.componentType==="IntegratedCircuit"||Je.componentType==="Semiconductor")&&n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"11px",fontWeight:600,color:"#000",marginBottom:"4px"},children:"IC Properties:"}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx("label",{htmlFor:`component-manufacturer-ic-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Manufacturer:"}),n.jsx("input",{id:`component-manufacturer-ic-${Je.id}`,type:"text",value:i.manufacturer||"",onChange:Le=>a({...i,manufacturer:Le.target.value}),disabled:R,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1}})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx("label",{htmlFor:`component-partnumber-ic-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Part Number:"}),n.jsx("input",{id:`component-partnumber-ic-${Je.id}`,type:"text",value:i.partNumber||"",onChange:Le=>a({...i,partNumber:Le.target.value}),disabled:R,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1}})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[n.jsx("label",{htmlFor:`component-pincount-ic-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Pin Count:"}),n.jsx("input",{id:`component-pincount-ic-${Je.id}`,name:`component-pincount-ic-${Je.id}`,type:"number",min:"1",value:i.pinCount,onChange:Le=>{const ke=Math.max(1,parseInt(Le.target.value)||1);a({...i,pinCount:ke})},onBlur:Le=>{if(R){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const ke=Math.max(1,parseInt(Le.target.value)||1),et=(i.layer==="top"?s:l).find(Pt=>Pt.id===i.id);if(et&&ke!==et.pinCount){const Pt=et.pinConnections||[],St=new Array(ke).fill("").map((Xt,it)=>it<Pt.length?Pt[it]:""),_t=et.pinPolarities||[],Ut=et.pinPolarities?new Array(ke).fill("").map((Xt,it)=>it<_t.length?_t[it]:""):void 0,qt={...et,pinCount:ke,pinConnections:St,...Ut!==void 0&&{pinPolarities:Ut}};i.layer==="top"?d(Xt=>Xt.map(it=>it.id===i.id?qt:it)):v(Xt=>Xt.map(it=>it.id===i.id?qt:it)),a({...i,pinCount:ke})}},disabled:R,style:{width:"80px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1}})]})]})]}),n.jsx(wv,{component:Je,componentEditor:i,componentDefinition:r,setComponentEditor:a,areComponentsLocked:R,componentsTop:s,componentsBottom:l,uploadedDatasheetFile:ie,setUploadedDatasheetFile:E,setComponentsTop:d,setComponentsBottom:v}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-description-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Description:"}),n.jsx("input",{id:`component-description-${Je.id}`,name:`component-description-${Je.id}`,type:"text",value:i.description||"",onChange:Le=>{a({...i,description:Le.target.value})},disabled:R,style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"",title:i.description||""})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-notes-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Notes:"}),n.jsx("input",{id:`component-notes-${Je.id}`,name:`component-notes-${Je.id}`,type:"text",readOnly:!0,value:Je.notes||"",onClick:()=>{R||(z(new Set([Je.id])),w(!0))},disabled:R,style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1,cursor:R?"not-allowed":"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Click to edit notes...",title:Je.notes||"Click to edit notes..."})]}),(Je.componentType==="IntegratedCircuit"||Je.componentType==="Semiconductor")&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-operatingTemperature-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Operating Temperature:"}),n.jsx("input",{id:`component-operatingTemperature-${Je.id}`,name:`component-operatingTemperature-${Je.id}`,type:"text",value:i.operatingTemperature||"",onChange:Le=>{a({...i,operatingTemperature:Le.target.value})},disabled:R,style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"",title:i.operatingTemperature||""})]}),Je.componentType!=="IntegratedCircuit"&&Je.componentType!=="Semiconductor"&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-pincount-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Pin Count:"}),n.jsx("input",{id:`component-pincount-${Je.id}`,name:`component-pincount-${Je.id}`,type:"number",min:"1",value:i.pinCount,onChange:Le=>{const ke=Math.max(1,parseInt(Le.target.value)||1);a({...i,pinCount:ke})},onBlur:Le=>{if(R){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const ke=Math.max(1,parseInt(Le.target.value)||1),et=(i.layer==="top"?s:l).find(Pt=>Pt.id===i.id);if(et&&ke!==et.pinCount){const Pt=et.pinConnections||[],St=new Array(ke).fill("").map((Xt,it)=>it<Pt.length?Pt[it]:""),_t=et.pinPolarities||[],Ut=et.pinPolarities?new Array(ke).fill("").map((Xt,it)=>it<_t.length?_t[it]:""):void 0,qt={...et,pinCount:ke,pinConnections:St,...Ut!==void 0&&{pinPolarities:Ut}};i.layer==="top"?d(Xt=>Xt.map(it=>it.id===i.id?qt:it)):v(Xt=>Xt.map(it=>it.id===i.id?qt:it)),a({...i,pinCount:ke})}},disabled:R,style:{width:"60px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1}})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-x-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"X:"}),n.jsx("input",{id:`component-x-${Je.id}`,name:`component-x-${Je.id}`,type:"number",value:i.x.toFixed(2),onChange:Le=>{const ke=parseFloat(Le.target.value)||0;a({...i,x:ke})},disabled:R,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1}})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{htmlFor:`component-y-${Je.id}`,style:{fontSize:"11px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Y:"}),n.jsx("input",{id:`component-y-${Je.id}`,name:`component-y-${Je.id}`,type:"number",value:i.y.toFixed(2),onChange:Le=>{const ke=parseFloat(Le.target.value)||0;a({...i,y:ke})},disabled:R,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"11px",color:"#000",opacity:R?.6:1}})]}),n.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[n.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),p&&p.componentId===Je.id&&n.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"11px",color:"#856404"},children:["Pin ",p.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const Le=Uf(Je),Xe=(i.layer==="top"?s:l).find(an=>an.id===i.id),et=Xe?.pinNames,St=(r||Fl(Je))?.properties?.pinNames,_t=St&&St.length>0,Ut=_t&&St.includes("CHIP_DEPENDENT"),qt=_t&&!Ut,Xt=Ut,it=_t;return n.jsx("div",{children:n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px",marginTop:"2px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[n.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"11px",color:"#333",width:"20px"}}),n.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"11px",color:"#333",width:"40px"},children:"Pin"}),it&&n.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"11px",color:"#333",width:"70px"},children:"Pin Name"}),Le&&n.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"11px",color:"#333",width:"50px"},children:"Polarity"}),n.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"11px",color:"#333"},children:"Node ID"})]})}),n.jsx("tbody",{children:Array.from({length:i.pinCount},(an,Bt)=>{const Kt=Xe?.pinConnections&&Xe.pinConnections.length>Bt?Xe.pinConnections[Bt]:"",dn=Xe?.pinPolarities&&Xe.pinPolarities.length>Bt&&Xe.pinPolarities[Bt]||"",ti=et&&Bt<et.length?et[Bt]:"",Nn=St&&Bt<St.length?St[Bt]:"",xn=Nn==="CHIP_DEPENDENT",Ot=ti&&ti.trim()!==""?ti:xn?"":Nn,ji=p&&p.componentId===Je.id&&p.pinIndex===Bt;return n.jsxs("tr",{style:{cursor:R?"not-allowed":"pointer",background:ji?"#e6f0ff":Kt?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:In=>{if(In.target.tagName!=="SELECT"){if(R){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}b(ji?null:{componentId:Je.id,pinIndex:Bt})}},title:Kt?`Connected to: ${Kt}`:"Select this pin, then click on a via or pad to connect",children:[n.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:n.jsx("input",{id:`pin-radio-${Je.id}-${Bt}`,name:`pin-radio-${Je.id}`,type:"radio",checked:!!ji,onChange:()=>{if(R){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}b(ji?null:{componentId:Je.id,pinIndex:Bt})},disabled:R,style:{margin:0,cursor:R?"not-allowed":"pointer",opacity:R?.6:1,width:"10px",height:"10px"}})}),n.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:ji?600:400,fontFamily:"monospace"},children:Bt+1}),(qt||Xt)&&n.jsx("td",{style:{padding:"2px 4px",textAlign:"left"},children:qt?n.jsx("select",{value:Ot||"",onChange:In=>{if(R){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const er=In.target.value,Ft=(i.layer==="top"?s:l).find(Pi=>Pi.id===i.id);if(Ft){const gi=[...Ft.pinNames||(St?[...St]:[])];for(;gi.length<i.pinCount;)gi.push("");gi[Bt]=er;const Et={...Ft,pinNames:gi};i.layer==="top"?d(Ke=>Ke.map(Vt=>Vt.id===i.id?Et:Vt)):v(Ke=>Ke.map(Vt=>Vt.id===i.id?Et:Vt))}},disabled:R,onClick:In=>In.stopPropagation(),onFocus:In=>In.stopPropagation(),style:{padding:"2px 4px",fontSize:"11px",border:"1px solid #ddd",borderRadius:2,background:"#fff",color:"#333",cursor:R?"not-allowed":"pointer",opacity:R?.6:1,width:"100%",fontStyle:"italic",minHeight:"18px"},children:St&&St.length>0?St.filter(In=>In!=="CHIP_DEPENDENT").map((In,er)=>n.jsx("option",{value:In,children:In},er)):n.jsx("option",{value:"",children:"-"})}):n.jsx("input",{type:"text",value:Ot||"",onChange:In=>{if(R){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const er=In.target.value,Ft=(i.layer==="top"?s:l).find(Pi=>Pi.id===i.id);if(Ft){const gi=[...Ft.pinNames||[]];for(;gi.length<i.pinCount;)gi.push("");gi[Bt]=er;const Et={...Ft,pinNames:gi};i.layer==="top"?d(Ke=>Ke.map(Vt=>Vt.id===i.id?Et:Vt)):v(Ke=>Ke.map(Vt=>Vt.id===i.id?Et:Vt))}},disabled:R,onClick:In=>In.stopPropagation(),onFocus:In=>In.stopPropagation(),placeholder:"Pin name",style:{padding:"1px 2px",fontSize:"11px",border:"1px solid #ddd",borderRadius:2,background:"#fff",color:"#333",width:"100%",opacity:R?.6:1,cursor:R?"not-allowed":"text"}})}),Le&&n.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:Kt?n.jsx("span",{style:{fontFamily:"monospace",fontWeight:600,color:dn==="+"?"#d32f2f":dn==="-"?"#1976d2":"#999"},children:dn||"-"}):n.jsxs("select",{value:dn??"",onChange:In=>{if(R){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const er=In.target.value,Ft=(i.layer==="top"?s:l).find(Pi=>Pi.id===i.id);if(Ft){const gi=[...Ft.pinPolarities||new Array(Ft.pinCount).fill("")];for(;gi.length<Ft.pinCount;)gi.push("");gi[Bt]=er;const Et={...Ft,pinPolarities:gi};i.layer==="top"?d(Ke=>Ke.map(Vt=>Vt.id===i.id?Et:Vt)):v(Ke=>Ke.map(Vt=>Vt.id===i.id?Et:Vt))}},disabled:R,onClick:In=>In.stopPropagation(),onFocus:In=>In.stopPropagation(),style:{padding:"1px 2px",fontSize:"11px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:R?"not-allowed":"pointer",opacity:R?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[n.jsx("option",{value:"",children:"-"}),n.jsx("option",{value:"+",children:"+"}),n.jsx("option",{value:"-",children:"-"})]},`polarity-${Je.id}-${Bt}-${dn}`)}),n.jsx("td",{style:{padding:"2px 4px",color:Kt?"#28a745":"#999",fontWeight:Kt?600:400,fontFamily:"monospace"},children:Kt||"-"})]},Bt)})})]})})})()]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",paddingRight:"24px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[n.jsx("button",{onClick:()=>{a(null),b(null)},disabled:R,style:{padding:"2px 5px",background:R?"#f5f5f5":"#fff",color:R?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:R?"not-allowed":"pointer",fontSize:"11px",opacity:R?.6:1},children:"Cancel"}),n.jsx("button",{onClick:_n,disabled:R,style:{padding:"2px 5px",background:R?"#f5f5f5":"#0b5fff",color:R?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:R?"not-allowed":"pointer",fontSize:"11px",opacity:R?.6:1},children:"Save"})]}),Y&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10005},onClick:Le=>{Le.target===Le.currentTarget&&F(!1)},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"600px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:Le=>Le.stopPropagation(),children:[n.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:"How to Get a Google Gemini API Key"}),n.jsx("button",{onClick:()=>F(!1),style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:0,width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Close",children:""})]}),n.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:n.jsxs("p",{style:{margin:"0 0 12px 0"},children:["To get a Google Gemini API key, go to"," ",n.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",style:{color:"#4CAF50",textDecoration:"underline"},children:"Google AI Studio (aistudio.google.com/app/apikey)"}),', sign in with your Google account, and click "Get API key" or "Create API key" in the Dashboard to generate a key for a new or existing Google Cloud project, then copy it and store it securely.']})}),n.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:n.jsx("button",{onClick:()=>F(!1),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}),n.jsx("div",{onMouseDown:Gt,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:1001},title:"Drag to resize"})]}),L&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10005},onClick:Le=>{Le.target===Le.currentTarget&&($(!1),G?.())},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"500px",maxWidth:"600px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:Le=>Le.stopPropagation(),children:[n.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:"Google Gemini API Configuration"}),n.jsx("button",{onClick:()=>$(!1),style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:0,width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Close",children:""})]}),n.jsxs("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:[n.jsx("p",{style:{margin:"0 0 12px 0",fontWeight:600,color:"#fff"},children:"Benefits of Adding Your API Key:"}),n.jsxs("ul",{style:{margin:"0 0 16px 0",paddingLeft:"20px"},children:[n.jsx("li",{children:"Automatically extract pin names and component properties (voltage, current, temperature, etc.) from datasheet PDFs"}),n.jsx("li",{children:"Get datasheet summary for component notes"}),n.jsx("li",{children:"Save time by avoiding manual data entry"})]}),n.jsx("p",{style:{margin:"0 0 12px 0",fontWeight:600,color:"#fff"},children:"How to Get Your Free API Key:"}),n.jsxs("p",{style:{margin:"0 0 16px 0"},children:["Go to"," ",n.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",style:{color:"#4CAF50",textDecoration:"underline"},children:"Google AI Studio (aistudio.google.com/app/apikey)"}),', sign in with your Google account, and click "Get API key" or "Create API key" in the Dashboard to generate a key for a new or existing Google Cloud project, then copy it and paste it below.']}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#fff",fontSize:"13px",fontWeight:600},children:"Enter Your API Key:"}),n.jsx("input",{type:"password",value:A,onChange:Le=>W(Le.target.value),placeholder:"Paste your Gemini API key here",style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #555",borderRadius:"4px",background:"#1f1f24",color:"#fff",boxSizing:"border-box"},autoFocus:!0})]}),n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#fff",fontSize:"13px",fontWeight:600},children:"Select Gemini Model:"}),n.jsxs("select",{value:q,onChange:Le=>te(Le.target.value),style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #555",borderRadius:"4px",background:"#1f1f24",color:"#fff",boxSizing:"border-box",cursor:"pointer"},children:[n.jsx("option",{value:"gemini-2.5-flash-lite",children:"gemini-2.5-flash-lite (Lightweight, Fast)"}),n.jsx("option",{value:"gemini-2.5-flash",children:"gemini-2.5-flash (Fast, Balanced)"}),n.jsx("option",{value:"gemini-2.5-pro",children:"gemini-2.5-pro (High Quality, Slower)"}),n.jsx("option",{value:"gemini-1.5-flash",children:"gemini-1.5-flash (Legacy Fast)"}),n.jsx("option",{value:"gemini-1.5-pro",children:"gemini-1.5-pro (Legacy High Quality)"})]}),n.jsx("p",{style:{margin:"6px 0 0 0",color:"#aaa",fontSize:"12px",lineHeight:"1.4"},children:"Choose the model based on your needs: Flash models are faster and use fewer tokens, while Pro models provide higher quality responses."})]}),n.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#1f1f24",borderRadius:"4px",border:"1px solid #444"},children:[n.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#fff",fontSize:"13px"},children:"Storage & Security Information:"}),n.jsxs("p",{style:{margin:"0 0 8px 0",color:"#ddd",fontSize:"12px",lineHeight:"1.5"},children:["Your API key will be stored in your browser's ",n.jsx("strong",{children:"localStorage"})," under the key ",n.jsx("code",{style:{background:"#2b2b31",padding:"2px 4px",borderRadius:"2px",color:"#4CAF50"},children:"'geminiApiKey'"}),"."]}),n.jsx("p",{style:{margin:"0 0 8px 0",color:"#ffaa00",fontSize:"12px",lineHeight:"1.5",fontWeight:600},children:" Security Warnings:"}),n.jsxs("ul",{style:{margin:"0 0 8px 0",paddingLeft:"20px",color:"#ddd",fontSize:"12px",lineHeight:"1.5"},children:[n.jsx("li",{children:"localStorage is accessible via browser DevTools"}),n.jsx("li",{children:"Do not use on shared or public computers"}),n.jsx("li",{children:"Malicious browser extensions could access your key"}),n.jsx("li",{children:"XSS attacks could potentially read your key"}),n.jsx("li",{children:"The key is stored in plain text (not encrypted)"})]}),n.jsx("p",{style:{margin:"0",color:"#aaa",fontSize:"11px",lineHeight:"1.4",fontStyle:"italic"},children:"For maximum security, consider using API key restrictions in Google Cloud Console and regularly rotating your keys."})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"8px"},children:[n.jsx("button",{onClick:_e,disabled:!xe,style:{padding:"8px 16px",background:xe?"#d32f2f":"#444",color:"#fff",border:"1px solid #666",borderRadius:6,cursor:xe?"pointer":"not-allowed",fontSize:"14px",fontWeight:600,opacity:xe?1:.5},title:xe?"Remove API key from browser localStorage":"No API key stored",children:"Remove API Key"}),n.jsxs("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:()=>{$(!1),G?.()},style:{padding:"8px 16px",background:"#555",color:"#fff",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Cancel"}),n.jsx("button",{onClick:()=>{Ie(),$(!1),G?.()},style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save API Key"})]})]})]})}),ae&&H&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10006},onClick:Le=>{Le.target===Le.currentTarget&&ve(!1)},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"600px",maxWidth:"90vw",maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #2196F3",display:"flex",flexDirection:"column"},onClick:Le=>Le.stopPropagation(),children:[n.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:"Gemini API Response"}),n.jsx("button",{onClick:()=>{ve(!1),Pe(null)},style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:0,width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Close",children:""})]}),n.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"13px",lineHeight:"1.6",overflow:"auto",flex:1,padding:"12px",background:"#1f1f24",borderRadius:"4px",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word",maxHeight:"60vh"},children:H}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[n.jsx("button",{onClick:()=>{navigator.clipboard.writeText(H||""),alert("Response copied to clipboard")},style:{padding:"8px 16px",background:"#555",color:"#fff",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Copy to Clipboard"}),n.jsx("button",{onClick:()=>{ve(!1),Pe(null)},style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Close"})]})]})}),pe&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},onClick:Le=>{Le.target===Le.currentTarget&&Ce(!1)},children:n.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:"20px",maxWidth:"90%",maxHeight:"90%",width:"800px",display:"flex",flexDirection:"column",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},onClick:Le=>Le.stopPropagation(),children:[n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:600,color:"#333"},children:"AI Prompt Editor"}),n.jsx("p",{style:{margin:"0",fontSize:"13px",color:"#666",lineHeight:"1.5"},children:'This is the prompt that will be sent to Gemini when you click "Extract Datasheet Information". You can customize it for this component. The prompt will be saved with this component and reloaded when you open it again.'}),n.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#888",fontStyle:"italic"},children:'Note: The PDF datasheet will be automatically attached to your prompt when extracting information. You can reference it in your prompt as "the attached PDF" or "the datasheet".'})]}),n.jsx("textarea",{value:fe,onChange:Le=>k(Le.target.value),style:{flex:1,minHeight:"400px",padding:"12px",border:"1px solid #ddd",borderRadius:4,fontSize:"13px",fontFamily:"monospace",resize:"vertical",color:"#000",background:"#fff",lineHeight:"1.5"},placeholder:"Enter your custom prompt here..."}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:[n.jsx("button",{onClick:()=>{Ce(!1)},style:{padding:"8px 16px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"14px",fontWeight:500},children:"Cancel"}),n.jsx("button",{onClick:()=>{if(i&&Je){const ke=(i.layer==="top"?s:l).find(Xe=>Xe.id===i.id);if(ke){const Xe={...ke,customGeminiPrompt:fe.trim()||void 0};i.layer==="top"?d(et=>et.map(Pt=>Pt.id===i.id?Xe:Pt)):v(et=>et.map(Pt=>Pt.id===i.id?Xe:Pt)),a({...i,customGeminiPrompt:fe.trim()||void 0})}}Ce(!1)},style:{padding:"8px 16px",background:"#4CAF50",border:"none",borderRadius:4,cursor:"pointer",color:"#fff",fontSize:"14px",fontWeight:600},children:"Save Prompt"})]})]})}),n.jsx(zx,{visible:Wt.visible,title:Wt.title,message:Wt.message,type:Wt.type,onClose:()=>{xt({visible:!1,title:"",message:"",type:"info"}),ae||Pe(null)},onShowResponse:Wt.onShowResponse})]})};function kv(i){if(i.baseType)return i.baseType;switch(i.category){case"Capacitors":return"Capacitor";case"Diodes":return"Diode";case"Resistors":return"Resistor";case"Semiconductors":return"Semiconductor";case"Passive Components":return"Passive";case"Power & Energy":return"PowerEnergy";case"Connectors & Switches":return i.type==="Switch"||i.subcategory==="Switch"?"Switch":"Connector";case"Other":return i.type==="Transformer"?"Transformer":"Other";default:return"Other"}}const Nv=ih.components,Av=Nv.map(i=>{const r=`${i.category}:${i.subcategory}:${i.type}`,a=kv(i);return{...i,key:r,baseType:a}}),_y=new Map;Av.forEach(i=>{_y.set(i.key,i)});function zv(i){if(i)return _y.get(i)}const v0=i=>{const{category:r,subcategory:a,type:s,designator:l}=i;let d,v;switch(r){case"Capacitors":a==="Electrolytic"?d="Electrolytic Capacitor":a==="Film"?d="Film Capacitor":(d="Capacitor",a==="Tantalum"&&(v="Tantalum"));break;case"Diodes":d="Diode",a==="LED"?v="LED":a==="Infrared"?v="Infrared":a==="Photodiode"?v="Photodiode":a==="Schottky"?v="Schottky":a==="Zener"?v="Zener":v="Standard";break;case"Resistors":a==="Network"?(d="ResistorNetwork",v="Network"):a==="Thermistor"?(d="Thermistor",v="Thermistor"):a==="Variable"?(d="VariableResistor",v="Potentiometer"):a==="Varistor"?(d="VariableResistor",v="Varistor"):d="Resistor";break;case"Semiconductors":a==="BJT"||a==="MOSFET"||a==="JFET"?d="Transistor":d="IntegratedCircuit";break;case"Passive Components":s==="Inductor"?d="Inductor":s==="FerriteBead"?d="FerriteBead":d="Crystal";break;case"Power & Energy":a==="Battery"?d="Battery":a==="Power Supply"?d="PowerSupply":d="Fuse";break;case"Connectors & Switches":a==="Connector"?d="Connector":a==="Jumper"?d="Jumper":a==="Switch"?d="Switch":d="Relay";break;case"Other":a==="Transformer"?d="Transformer":a==="Speaker"?d="Speaker":a==="Motor"?d="Motor":a==="Test Point"?d="TestPoint":a==="Vacuum Tube"?d="VacuumTube":(d="GenericComponent",a==="Attenuator"?v="Attenuator":a==="Circuit Breaker"?v="CircuitBreaker":a==="Thermocouple"?v="Thermocouple":a==="Tuner"&&(v="Tuner"));break;default:d="GenericComponent";break}const p=`${r}:${a}:${s}:${l}`,b=`${r}:${a}:${s}`,y=zv(b);return{componentType:d,designator:l,subtype:v,uniqueKey:p,componentDefinition:i,dataDrivenDefinition:y}},Dy=Yu.reduce((i,r)=>(i[r.category]||(i[r.category]=[]),i[r.category].push(r),i),{});Object.values(Dy).forEach(i=>{i.sort((r,a)=>r.displayName.localeCompare(a.displayName))});const Pv=({visible:i,selectedLayer:r,selectedComponentType:a,selectedComponentKey:s,onLayerChange:l,onComponentTypeChange:d,onClose:v})=>{const[p,b]=M.useState(""),[y,C]=M.useState(null),[D,O]=M.useState(!1),T=M.useRef({x:0,y:0}),K=M.useRef(null),R=M.useRef(null);M.useEffect(()=>{i&&y===null&&C({x:window.innerWidth-400-8,y:130})},[i,y]),M.useEffect(()=>{if(i&&R.current){const J=setTimeout(()=>{R.current?.focus(),R.current?.select()},100);return()=>clearTimeout(J)}},[i]);const z=M.useCallback(J=>{const ue=J.target;if(!(ue.tagName==="BUTTON"||ue.tagName==="INPUT"||ue.closest("button")||ue.closest("input"))&&K.current){const oe=K.current.getBoundingClientRect();T.current={x:J.clientX-oe.left,y:J.clientY-oe.top},O(!0),J.preventDefault()}},[]);M.useEffect(()=>{if(!D)return;const J=oe=>{const ie=oe.clientX-T.current.x,E=oe.clientY-T.current.y,Y=K.current?.offsetWidth||400,F=K.current?.offsetHeight||600,L=Math.max(0,Math.min(ie,window.innerWidth-Y)),$=Math.max(0,Math.min(E,window.innerHeight-F));C({x:L,y:$})},ue=()=>{O(!1)};return document.addEventListener("mousemove",J),document.addEventListener("mouseup",ue),()=>{document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",ue)}},[D]);const w=M.useMemo(()=>{if(!p.trim())return()=>!0;const J=p.toLowerCase();return ue=>!!(ue.searchText&&ue.searchText.toLowerCase().includes(J)||ue.displayName&&ue.displayName.toLowerCase().includes(J)||ue.description&&ue.description.toLowerCase().includes(J)||ue.category&&ue.category.toLowerCase().includes(J)||ue.subcategory&&ue.subcategory.toLowerCase().includes(J)||ue.designator&&ue.designator.toLowerCase().includes(J)||ue.type&&ue.type.toLowerCase().includes(J)||ue.resolvedTypeName&&ue.resolvedTypeName.toLowerCase().includes(J))},[p]),we=M.useMemo(()=>p.trim()?Yu.filter(J=>{const ue=v0(J);return w({category:J.category,type:ue.componentType,subcategory:J.subcategory,designator:J.designator,displayName:J.displayName,description:J.description,resolvedTypeName:Ul(ue.componentType),searchText:J.searchText})}):Yu,[p,w]);if(!i)return null;const X={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",zIndex:10005,pointerEvents:"none"},G={padding:"20px",overflow:"auto",flex:1};return n.jsx("div",{style:X,onClick:J=>J.stopPropagation(),children:n.jsxs("div",{ref:K,onClick:J=>J.stopPropagation(),style:{position:"fixed",top:y?`${y.y}px`:void 0,left:y?`${y.x}px`:void 0,backgroundColor:"#fff",borderRadius:8,minWidth:"300px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:10005,display:"flex",flexDirection:"column",pointerEvents:"auto",transform:"none"},children:[n.jsxs("div",{onMouseDown:z,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:D?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[n.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Select Component"}),n.jsx("button",{type:"button",onMouseDown:J=>{J.stopPropagation()},onClick:J=>{J.stopPropagation(),v()},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsxs("div",{style:G,children:[n.jsx("div",{style:{marginBottom:"16px"},onClick:J=>J.stopPropagation(),children:n.jsx("input",{ref:R,type:"text",placeholder:"Search by Component Type...",value:p,onChange:J=>b(J.target.value),onClick:J=>J.stopPropagation(),onMouseDown:J=>J.stopPropagation(),style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #ddd",borderRadius:4,color:"#333",backgroundColor:"#fff",boxSizing:"border-box"}})}),n.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"16px",borderBottom:"2px solid #eee"},onClick:J=>J.stopPropagation(),children:[n.jsx("div",{style:{marginBottom:"8px",fontSize:"14px",fontWeight:600,color:"#333"},children:"Layer:"}),n.jsxs("div",{style:{display:"flex",gap:"16px"},children:[n.jsxs("label",{onClick:J=>J.stopPropagation(),onMouseDown:J=>J.stopPropagation(),style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px",color:"#333"},children:[n.jsx("input",{type:"radio",name:"componentLayer",checked:r==="top",onChange:()=>l("top"),onClick:J=>J.stopPropagation(),onMouseDown:J=>J.stopPropagation(),style:{marginRight:"8px",width:"20px",height:"20px",cursor:"pointer",accentColor:"#0066cc",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:r==="top"?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:r==="top"?"#0066cc":"transparent",position:"relative"}}),"Top"]}),n.jsxs("label",{onClick:J=>J.stopPropagation(),onMouseDown:J=>J.stopPropagation(),style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px",color:"#333"},children:[n.jsx("input",{type:"radio",name:"componentLayer",checked:r==="bottom",onChange:()=>l("bottom"),onClick:J=>J.stopPropagation(),onMouseDown:J=>J.stopPropagation(),style:{marginRight:"8px",width:"20px",height:"20px",cursor:"pointer",accentColor:"#0066cc",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:r==="bottom"?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:r==="bottom"?"#0066cc":"transparent",position:"relative"}}),"Bottom"]})]})]}),n.jsxs("div",{children:[n.jsx("div",{style:{marginBottom:"12px",fontSize:"14px",fontWeight:600,color:"#333"},children:"Component Type:"}),n.jsx("div",{style:{maxHeight:"calc(80vh - 280px)",overflowY:"auto"},children:p.trim()?we.length>0?we.map(J=>{const ue=v0(J),oe=ue.uniqueKey||`${J.category}:${J.subcategory}:${J.type}:${J.designator}`,ie=s===oe,E=`${J.designator} - ${J.displayName}`;return n.jsxs("label",{onClick:Y=>{Y.stopPropagation(),d(ue.componentType,oe,ue)},onMouseDown:Y=>Y.stopPropagation(),style:{display:"block",width:"100%",textAlign:"left",padding:"8px 12px",marginBottom:"4px",background:ie?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",color:"#333"},children:[n.jsx("input",{type:"radio",name:"componentType-search",checked:ie,onChange:()=>d(ue.componentType,oe,ue),onClick:Y=>Y.stopPropagation(),onMouseDown:Y=>Y.stopPropagation(),style:{marginRight:"10px",width:"20px",height:"20px",cursor:"pointer",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:ie?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:ie?"#0066cc":"transparent",position:"relative",flexShrink:0}}),n.jsx("strong",{children:E})]},oe)}):n.jsxs("div",{style:{padding:"12px",color:"#666",fontSize:"12px",textAlign:"center"},children:['No matches found for "',p,'"']}):Object.entries(Dy).map(([J,ue])=>ue.length===0?null:n.jsxs("div",{style:{marginBottom:"12px"},children:[n.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#333",padding:"6px 8px",marginBottom:"4px",backgroundColor:"#f5f5f5",borderRadius:4},children:J}),n.jsx("div",{style:{marginLeft:"8px"},children:ue.map(oe=>{const ie=v0(oe),E=ie.uniqueKey||`${oe.category}:${oe.subcategory}:${oe.type}:${oe.designator}`,Y=s===E,F=`${oe.designator} - ${oe.displayName}`;return n.jsxs("label",{onClick:L=>{L.stopPropagation(),d(ie.componentType,E,ie)},onMouseDown:L=>L.stopPropagation(),style:{display:"block",width:"100%",textAlign:"left",padding:"6px 12px",marginBottom:"2px",background:Y?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",color:"#333"},children:[n.jsx("input",{type:"radio",name:`componentType-${J}`,checked:Y,onChange:()=>d(ie.componentType,E,ie),onMouseDown:L=>L.stopPropagation(),style:{marginRight:"10px",width:"20px",height:"20px",cursor:"pointer",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:Y?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:Y?"#0066cc":"transparent",position:"relative",flexShrink:0}}),F]},E)})})]},J))})]})]})]})})},_v=({visible:i,onClose:r,powerBuses:a,setPowerBuses:s,editingPowerBusId:l,setEditingPowerBusId:d,powers:v})=>{const[p,b]=M.useState(null),[y,C]=M.useState(!1),[D,O]=M.useState(null),T=M.useRef(null);M.useEffect(()=>{i&&!p&&b({x:window.innerWidth/2-140,y:window.innerHeight/2-200})},[i,p]),M.useEffect(()=>{if(!y)return;const G=ue=>{p&&D&&b({x:ue.clientX-D.x,y:ue.clientY-D.y})},J=()=>{C(!1),O(null)};return window.addEventListener("mousemove",G),window.addEventListener("mouseup",J),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",J)}},[y,p,D]);const K=a.filter(G=>G.id!==l),R=a.find(G=>G.id===l);if(!i)return null;const z=[...K].sort((G,J)=>{const ue=E=>{const Y=E.match(/([+-]?)(\d+\.?\d*)/);if(Y){const F=Y[1]||"+",L=parseFloat(Y[2]);return{absValue:Math.abs(L),isNegative:F==="-"}}return{absValue:1/0,isNegative:!1}},oe=ue(G.voltage),ie=ue(J.voltage);return oe.absValue!==ie.absValue?oe.absValue-ie.absValue:oe.isNegative!==ie.isNegative?oe.isNegative?-1:1:0}),w=R?[...z,R]:z,we=()=>{const G={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};s(J=>[...J,G]),d(G.id)},X=G=>{const J=G.target;J.tagName==="BUTTON"||J.tagName==="INPUT"||J.closest("button")||J.closest("input")||p&&(O({x:G.clientX-p.x,y:G.clientY-p.y}),C(!0),G.preventDefault())};return n.jsxs("div",{ref:T,style:{position:"fixed",top:p?`${p.y}px`:"50%",left:p?`${p.x}px`:"50%",transform:p?"none":"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",display:"flex",flexDirection:"column",cursor:y?"grabbing":"default"},children:[n.jsxs("div",{onMouseDown:X,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:y?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[n.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Manage Power Buses"}),n.jsx("button",{onClick:r,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:w.map(G=>{const J=a.find(E=>E.id===G.id)||G,ue=a.findIndex(E=>E.id===G.id),oe=a.some(E=>E.name===J.name&&E.id!==G.id),ie=a.some(E=>E.voltage===J.voltage&&E.id!==G.id);return n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Name:"}),n.jsx("input",{type:"text",value:J.name,onChange:E=>{const Y=E.target.value;if(!a.some(L=>L.name===Y&&L.id!==G.id)){const L=[...a];ue>=0&&(L[ue]={...J,name:Y},s(L))}},placeholder:"e.g., +5VDC",style:{flex:1,padding:"2px 3px",border:oe?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Value:"}),n.jsx("input",{type:"text",inputMode:"decimal",value:J.voltage,onChange:E=>{const Y=E.target.value;if(Y===""||/^[+-]?\d*\.?\d*$/.test(Y)){const F=[...a];ue>=0&&(F[ue]={...J,voltage:Y},s(F))}},onBlur:E=>{const Y=E.target.value.trim();if(Y==="")return;const F=parseFloat(Y);if(!isNaN(F)){const L=F>=0?"+":"-",$=Math.abs(F),H=`${L}${$.toFixed(1).replace(/\.?0+$/,"")}`,Pe=[...a];ue>=0&&(Pe[ue]={...J,voltage:H},s(Pe))}},placeholder:"e.g., +5.0",style:{flex:1,padding:"2px 3px",border:ie?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]})]}),n.jsx("input",{type:"color",value:J.color,onChange:E=>{const Y=[...a];ue>=0&&(Y[ue]={...J,color:E.target.value},s(Y))},style:{width:"24px",height:"24px",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",flexShrink:0},title:"Color"}),n.jsx("button",{onClick:()=>{const E=v.filter(Y=>Y.powerBusId===G.id);if(E.length>0){alert(`Cannot delete: ${E.length} power node(s) are using this bus. Remove or reassign them first.`);return}s(Y=>Y.filter(F=>F.id!==G.id))},style:{padding:"2px 6px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"9px",flexShrink:0},children:"Delete"})]})},G.id)})}),n.jsxs("div",{style:{padding:"6px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"4px",flexShrink:0},children:[n.jsx("button",{onClick:we,style:{flex:1,padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",fontSize:"10px"},children:"+ Add Power Bus"}),n.jsx("button",{onClick:r,style:{flex:1,padding:"4px 8px",background:"#0b5fff",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",fontSize:"10px",fontWeight:500},children:"Close"})]})]})},Dv=({visible:i,onClose:r,groundBuses:a,setGroundBuses:s,editingGroundBusId:l,setEditingGroundBusId:d,grounds:v})=>{const[p,b]=M.useState(null),[y,C]=M.useState(!1),[D,O]=M.useState(null),T=M.useRef(null);M.useEffect(()=>{i&&!p&&b({x:window.innerWidth/2-140,y:window.innerHeight/2-200})},[i,p]),M.useEffect(()=>{if(!y)return;const G=ue=>{p&&D&&b({x:ue.clientX-D.x,y:ue.clientY-D.y})},J=()=>{C(!1),O(null)};return window.addEventListener("mousemove",G),window.addEventListener("mouseup",J),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",J)}},[y,p,D]);const K=a.filter(G=>G.id!==l),R=a.find(G=>G.id===l);if(!i)return null;const z=[...K].sort((G,J)=>G.name.localeCompare(J.name)),w=R?[...z,R]:z,we=()=>{const G={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};s(J=>[...J,G]),d(G.id)},X=G=>{const J=G.target;J.tagName==="BUTTON"||J.tagName==="INPUT"||J.closest("button")||J.closest("input")||p&&(O({x:G.clientX-p.x,y:G.clientY-p.y}),C(!0),G.preventDefault())};return n.jsxs("div",{ref:T,style:{position:"fixed",top:p?`${p.y}px`:"50%",left:p?`${p.x}px`:"50%",transform:p?"none":"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",display:"flex",flexDirection:"column",cursor:y?"grabbing":"default"},children:[n.jsxs("div",{onMouseDown:X,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:y?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[n.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Manage Ground Buses"}),n.jsx("button",{onClick:r,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:w.map(G=>{const J=a.find(ie=>ie.id===G.id)||G,ue=a.findIndex(ie=>ie.id===G.id),oe=a.some(ie=>ie.name===J.name&&ie.id!==G.id);return n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[n.jsx("div",{style:{flex:1,minWidth:0},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[n.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Name:"}),n.jsx("input",{type:"text",value:J.name,onChange:ie=>{const E=ie.target.value;if(!a.some(F=>F.name===E&&F.id!==G.id)){const F=[...a];ue>=0&&(F[ue]={...J,name:E},s(F))}},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 3px",border:oe?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]})}),n.jsx("input",{type:"color",value:J.color,onChange:ie=>{const E=[...a];ue>=0&&(E[ue]={...J,color:ie.target.value},s(E))},style:{width:"24px",height:"24px",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",flexShrink:0},title:"Color"}),n.jsx("button",{onClick:()=>{const ie=v.filter(E=>E.groundBusId===G.id);if(ie.length>0){alert(`Cannot delete: ${ie.length} ground node(s) are using this bus. Remove or reassign them first.`);return}s(E=>E.filter(Y=>Y.id!==G.id))},style:{padding:"2px 6px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"9px",flexShrink:0},children:"Delete"})]},G.id)})}),n.jsxs("div",{style:{padding:"6px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"4px",flexShrink:0},children:[n.jsx("button",{onClick:we,style:{flex:1,padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",fontSize:"10px"},children:"+ Add Ground Bus"}),n.jsx("button",{onClick:r,style:{flex:1,padding:"4px 8px",background:"#0b5fff",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",fontSize:"10px",fontWeight:500},children:"Close"})]})]})},Rv=({visible:i,onClose:r,autoAssignDesignators:a,setAutoAssignDesignators:s,useGlobalDesignatorCounters:l,setUseGlobalDesignatorCounters:d})=>i?n.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"16px",zIndex:1e3,minWidth:"300px",maxWidth:"400px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Designators"}),n.jsx("button",{onClick:r,style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsxs("div",{style:{marginBottom:"16px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333",marginBottom:"12px"},children:[n.jsx("input",{type:"checkbox",checked:a,onChange:v=>{s(v.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),n.jsx("span",{children:"Automatically assign designators"})]}),n.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4",marginBottom:"12px"},children:a?n.jsx("div",{children:"When enabled, new components automatically receive sequential designators (e.g., C1, C2, C3 for Capacitors; R1, R2, R3 for Resistors)."}):n.jsx("div",{children:"When disabled, you must manually assign designators to each component. The designator field will be empty when components are created."})}),n.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333"},children:[n.jsx("input",{type:"checkbox",checked:l,onChange:v=>{d(v.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),n.jsx("span",{children:"Use global designator counters"})]}),n.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4"},children:l?n.jsx("div",{children:"When ON, designators continue from global counters across all projects. New components start with the next value from the global counter (e.g., if global counter is C10, new capacitor will be C11)."}):n.jsx("div",{children:"When OFF (default), designators start at 1 for each project. Each project maintains its own independent designator sequence (e.g., C1, C2, C3...)."})})]}),n.jsx("button",{onClick:r,style:{width:"100%",padding:"6px 12px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}):null,Px=({visible:i,title:r,message:a,onYes:s,onNo:l,onCancel:d,yesButtonRef:v})=>i?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:p=>{p.target===p.currentTarget&&d()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:p=>p.stopPropagation(),children:[n.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:r}),n.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:a}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[n.jsx("button",{onClick:d,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),n.jsx("button",{onClick:l,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),n.jsx("button",{ref:v,onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}):null,Lv=({visible:i,size:r,onSizeChange:a,onApply:s,onCancel:l})=>{const d=M.useRef(null);if(M.useEffect(()=>{i&&d.current&&(d.current.focus(),d.current.select())},[i]),!i)return null;const v=[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32];return n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:p=>{p.target===p.currentTarget&&l()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:p=>p.stopPropagation(),children:[n.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),n.jsx("input",{ref:d,type:"number",min:"1",max:"99",value:r,onChange:p=>{const b=parseInt(p.target.value)||1,y=Math.max(1,Math.min(99,b));a(y)},onKeyDown:p=>{if(p.key==="Enter"?s():p.key==="Escape"&&l(),p.key.length===1&&/[0-9]/.test(p.key)){const b=r.toString();b.length>=2&&d.current?.selectionStart===d.current?.selectionEnd&&d.current?.selectionStart===b.length&&p.preventDefault()}},onInput:p=>{const b=p.target,y=b.value;if(y.length>2){b.value=y.slice(0,2);const C=parseInt(b.value)||1;a(Math.max(1,Math.min(99,C)))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),n.jsxs("select",{value:v.includes(r)?r:"",onChange:p=>{const b=parseInt(p.target.value);!isNaN(b)&&b>0&&a(b)},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[n.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),v.map(p=>n.jsxs("option",{value:p,style:{background:"#1f1f24",color:"#f2f2f2"},children:[p," pixels"]},p))]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[n.jsx("button",{onClick:l,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),n.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})})},Mv=({visible:i,interval:r,onIntervalChange:a,onApply:s,onCancel:l})=>i?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:d=>{d.target===d.currentTarget&&l()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:d=>d.stopPropagation(),children:[n.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),n.jsxs("select",{value:r===null?"disable":(r||5).toString(),onChange:d=>{const v=d.target.value;if(v==="disable")a(null);else{const p=parseFloat(v);!isNaN(p)&&p>0&&a(p)}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[n.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),n.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),n.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),n.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),n.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),n.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[n.jsx("button",{onClick:l,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),n.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}):null,Iv=({visible:i,interval:r,onIntervalChange:a,onEnable:s,onSkip:l})=>i?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:d=>{d.target===d.currentTarget&&l()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:d=>d.stopPropagation(),children:[n.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),n.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),n.jsxs("select",{value:r===null?"disable":(r||5).toString(),onChange:d=>{const v=d.target.value;if(v==="disable")a(null);else{const p=parseFloat(v);!isNaN(p)&&p>0&&a(p)}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[n.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),n.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),n.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),n.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),n.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[n.jsx("button",{onClick:l,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),n.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})}):null,Bv=({visible:i,projectDirHandle:r,onClose:a,onRestore:s,position:l,isDragging:d=!1,onDragStart:v})=>{const[p,b]=M.useState([]),[y,C]=M.useState(!1),[D,O]=M.useState(null),[T,K]=M.useState(null),R=M.useRef(null);M.useEffect(()=>{if(!i||!r){b([]),O(null),K(null);return}(async()=>{C(!0),K(null);try{let J;try{J=await r.getDirectoryHandle("history")}catch{b([]),C(!1);return}const ue=ie=>{const E=ie.match(/_(\d{4})_(\d{2})_(\d{2})-(\d{2})-(\d{2})-(\d{2})\.json$/);if(E){const[,F,L,$,H,Pe,ae]=E;return new Date(parseInt(F),parseInt(L)-1,parseInt($),parseInt(H),parseInt(Pe),parseInt(ae))}const Y=ie.match(/_(\d{4})_(\d{2})_(\d{2})_(\d{2})_(\d{2})_(\d{2})\.json$/);if(Y){const[,F,L,$,H,Pe,ae]=Y;return new Date(parseInt(F),parseInt(L)-1,parseInt($),parseInt(H),parseInt(Pe),parseInt(ae))}return null},oe=[];for await(const ie of J.keys())if(ie.endsWith(".json"))try{const Y=await(await J.getFileHandle(ie)).getFile(),F=ue(ie);oe.push({name:ie,lastModified:new Date(Y.lastModified),size:Y.size,timestamp:F||new Date(Y.lastModified)})}catch(E){console.warn(`Failed to read file ${ie}:`,E)}oe.sort((ie,E)=>E.timestamp.getTime()-ie.timestamp.getTime()),b(oe)}catch(J){console.error("Failed to load history files:",J),K("Failed to load history files. Please try again.")}finally{C(!1)}})()},[i,r]);const z=async()=>{if(D)try{await s(D),a()}catch(G){console.error("Failed to restore file:",G),K("Failed to restore file. Please try again.")}},w=G=>G.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),we=G=>G<1024?`${G} B`:G<1024*1024?`${(G/1024).toFixed(1)} KB`:`${(G/(1024*1024)).toFixed(1)} MB`;if(!i)return null;const X=l?{position:"fixed",left:`${l.x}px`,top:`${l.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"500px",maxWidth:"700px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:d?"grabbing":"default"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",borderRadius:8,minWidth:"500px",maxWidth:"700px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column"};return n.jsxs("div",{style:X,children:[n.jsxs("div",{onMouseDown:v,style:{backgroundColor:"#f5f5f5",padding:"12px 16px",borderBottom:"1px solid #ddd",borderRadius:"8px 8px 0 0",cursor:d?"grabbing":"move",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h2",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#000"},children:"PastTime"}),n.jsx("button",{onClick:a,style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),n.jsxs("div",{style:{padding:"16px",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[T&&n.jsx("div",{style:{padding:"12px",backgroundColor:"#fee",color:"#c00",borderRadius:4,marginBottom:"12px"},children:T}),y?n.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"Loading history files..."}):p.length===0?n.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"No history files found."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{style:{marginBottom:"12px",color:"#333",fontSize:"14px"},children:"Select a file to restore:"}),n.jsx("div",{ref:R,style:{border:"1px solid #ddd",borderRadius:4,overflowY:"auto",maxHeight:"400px",backgroundColor:"#fafafa"},children:p.map((G,J)=>n.jsxs("div",{onClick:()=>O(G.name),style:{padding:"12px 16px",borderBottom:J<p.length-1?"1px solid #eee":"none",backgroundColor:D===G.name?"#e6f0ff":"transparent",cursor:"pointer",transition:"background-color 0.1s"},onMouseEnter:ue=>{D!==G.name&&(ue.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:ue=>{D!==G.name&&(ue.currentTarget.style.backgroundColor="transparent")},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"},children:[n.jsx("div",{style:{fontWeight:600,color:"#000",fontSize:"13px",wordBreak:"break-word",flex:1},children:G.name}),n.jsx("div",{style:{color:"#666",fontSize:"12px",marginLeft:"12px",whiteSpace:"nowrap"},children:we(G.size)})]}),n.jsx("div",{style:{color:"#666",fontSize:"12px"},children:w(G.lastModified)})]},G.name))})]})]}),n.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px"},children:[n.jsx("button",{onClick:a,style:{padding:"6px 16px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"13px"},children:"Cancel"}),n.jsx("button",{onClick:z,disabled:!D||y,style:{padding:"6px 16px",background:D&&!y?"#0066cc":"#ccc",border:"none",borderRadius:4,cursor:D&&!y?"pointer":"not-allowed",color:"#fff",fontSize:"13px",fontWeight:500},children:"Restore"})]})]})},Ov=()=>n.jsxs("svg",{width:"45",height:"30",viewBox:"0 0 45 30",style:{marginLeft:"8px",flexShrink:0},children:[n.jsx("rect",{x:"8",y:"4",width:"29",height:"14",rx:"2",ry:"2",fill:"#000"}),n.jsx("rect",{x:"10",y:"18",width:"2.5",height:"6",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"14.5",y:"18",width:"2.5",height:"6",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"19",y:"18",width:"2.5",height:"6",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"23.5",y:"18",width:"2.5",height:"6",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"28",y:"18",width:"2.5",height:"6",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"32.5",y:"18",width:"2.5",height:"6",rx:"0.5",fill:"#000"})]}),Ev=()=>n.jsxs("svg",{width:"40",height:"30",viewBox:"0 0 40 30",style:{marginLeft:"8px",flexShrink:0},children:[n.jsx("rect",{x:"2",y:"11",width:"5",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"2",y:"14.5",width:"5",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"2",y:"18",width:"5",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"7",y:"6",width:"26",height:"18",rx:"2",ry:"2",fill:"#000"}),n.jsx("rect",{x:"13",y:"10",width:"14",height:"10",rx:"1.5",ry:"1.5",fill:"#fff"}),n.jsx("circle",{cx:"14.5",cy:"11.5",r:"1",fill:"#000"}),n.jsx("rect",{x:"33",y:"11",width:"5",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"33",y:"14.5",width:"5",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"33",y:"18",width:"5",height:"2.5",rx:"0.5",fill:"#000"})]}),Fv=()=>n.jsxs("svg",{width:"35",height:"35",viewBox:"0 0 35 35",style:{marginLeft:"8px",flexShrink:0},children:[n.jsx("rect",{x:"12",y:"2",width:"2.5",height:"4",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"16.25",y:"2",width:"2.5",height:"4",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"20.5",y:"2",width:"2.5",height:"4",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"2",y:"12",width:"4",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"2",y:"16.25",width:"4",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"2",y:"20.5",width:"4",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"6",y:"6",width:"23",height:"23",fill:"#000"}),n.jsx("rect",{x:"29",y:"12",width:"4",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"29",y:"16.25",width:"4",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"29",y:"20.5",width:"4",height:"2.5",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"12",y:"29",width:"2.5",height:"4",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"16.25",y:"29",width:"2.5",height:"4",rx:"0.5",fill:"#000"}),n.jsx("rect",{x:"20.5",y:"29",width:"2.5",height:"4",rx:"0.5",fill:"#000"})]}),Ry=({rotate:i=0})=>{const s=i!==0?`rotate(${i} 20 20)`:"";return n.jsx("svg",{width:"40",height:"40",viewBox:"0 0 40 40",style:{marginLeft:"8px",flexShrink:0},children:n.jsxs("g",{transform:s,children:[n.jsx("rect",{x:"8",y:"10",width:"24",height:"20",rx:"2",ry:"2",fill:"#555"}),n.jsx("rect",{x:"2",y:"12",width:"6",height:"3",rx:"1",ry:"1",fill:"#555"}),n.jsx("rect",{x:"2",y:"18",width:"6",height:"3",rx:"1",ry:"1",fill:"#555"}),n.jsx("rect",{x:"2",y:"24",width:"6",height:"3",rx:"1",ry:"1",fill:"#555"}),n.jsx("rect",{x:"32",y:"12",width:"6",height:"3",rx:"1",ry:"1",fill:"#555"}),n.jsx("rect",{x:"32",y:"18",width:"6",height:"3",rx:"1",ry:"1",fill:"#555"}),n.jsx("rect",{x:"32",y:"24",width:"6",height:"3",rx:"1",ry:"1",fill:"#555"}),n.jsx("rect",{x:"12",y:"14",width:"16",height:"12",rx:"1.5",ry:"1.5",fill:"#fff"}),n.jsx("circle",{cx:"14",cy:"16",r:"1.5",fill:"#555"})]})})},Uv=()=>n.jsx(Ry,{rotate:0}),qv=()=>n.jsx(Ry,{rotate:90}),Vv=({visible:i,isPad:r,onConfirm:a,onClose:s})=>{const[l,d]=M.useState("linear"),[v,p]=M.useState("vertical-edges"),[b,y]=M.useState("8"),[C,D]=M.useState("");M.useEffect(()=>{i&&(d("linear"),p("vertical-edges"),y("8"),D(""))},[i]);const O=(R,z)=>{const w=R.trim();if(w==="")return{valid:!1,error:"Number of pins is required."};const we=parseInt(w,10);return isNaN(we)?{valid:!1,error:"Please enter a valid number."}:we<1?{valid:!1,error:"Number of pins must be >= 1."}:z==="linear"?we!==Math.floor(we)||we<=0?{valid:!1,error:"Linear arrangement requires a positive integer."}:{valid:!0,error:"",numPins:we}:z==="twoSided"?we!==Math.floor(we)||we<=0?{valid:!1,error:"2-sided arrangement requires a positive integer."}:we%2!==0?{valid:!1,error:"2-sided components must have an even number of pins."}:{valid:!0,error:"",numPins:we}:z==="fourSided"?we!==Math.floor(we)||we<=0?{valid:!1,error:"4-sided arrangement requires a positive integer."}:we%4!==0?{valid:!1,error:"4-sided components must have a number of pins divisible by 4."}:{valid:!0,error:"",numPins:we}:{valid:!0,error:"",numPins:we}},T=R=>{let z=R===""?"":R.replace(/[^\d]/g,"");y(z);const w=O(z,l);w.error?D(w.error):D("")},K=M.useCallback(()=>{const R=O(b,l);if(!R.valid||R.numPins===void 0){D(R.error||"Invalid number of pins.");return}D(""),a({numPins:R.numPins,type:l,...l==="twoSided"?{twoSidedOrientation:v}:{}})},[b,l,v,a]);return M.useEffect(()=>{if(!i)return;const R=z=>{z.key==="Enter"&&!z.shiftKey&&!z.ctrlKey&&!z.altKey&&!z.metaKey&&(z.preventDefault(),K())};return window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}},[i,K]),i?n.jsxs(n.Fragment,{children:[n.jsx("style",{children:`
        .number-input-large-spinners::-webkit-inner-spin-button,
        .number-input-large-spinners::-webkit-outer-spin-button {
          opacity: 1;
          height: 20px;
          width: 20px;
          cursor: pointer;
        }
        .number-input-large-spinners::-webkit-inner-spin-button {
          margin-right: 4px;
        }
      `}),n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:R=>{R.target===R.currentTarget&&s()},children:n.jsxs("div",{style:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",minWidth:"320px",maxWidth:"380px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:R=>R.stopPropagation(),children:[n.jsxs("h2",{style:{marginTop:0,marginBottom:"20px",color:"#222",fontSize:"18px"},children:[r?"Pad Pattern":"Via Pattern"," Placement"]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",color:"#222",fontWeight:500},children:"Arrangement:"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[n.jsx("input",{type:"radio",value:"linear",checked:l==="linear",onChange:R=>{const z=R.target.value;d(z);const w=O(b,z);w.error?D(w.error):D("")},style:{marginRight:"8px"}}),n.jsx("span",{style:{color:"#222"},children:"Linear (1 side)"}),n.jsx(Ov,{})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[n.jsx("input",{type:"radio",value:"twoSided",checked:l==="twoSided",onChange:R=>{const z=R.target.value;d(z);const w=O(b,z);w.error?D(w.error):D("")},style:{marginRight:"8px"}}),n.jsx("span",{style:{color:"#222"},children:"2-Sided"}),n.jsx(Ev,{})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[n.jsx("input",{type:"radio",value:"fourSided",checked:l==="fourSided",onChange:R=>{const z=R.target.value;d(z);const w=O(b,z);w.error?D(w.error):D("")},style:{marginRight:"8px"}}),n.jsx("span",{style:{color:"#222"},children:"4-Sided"}),n.jsx(Fv,{})]})]})]}),l==="twoSided"&&n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",color:"#222",fontWeight:500},children:"Orientation:"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[n.jsx("input",{type:"radio",value:"vertical-edges",checked:v==="vertical-edges",onChange:R=>p(R.target.value),style:{marginRight:"8px"}}),n.jsxs("span",{style:{color:"#222"},children:["Vertical ",r?"Pads":"Vias"," (left & right)"]}),n.jsx(Uv,{})]}),n.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[n.jsx("input",{type:"radio",value:"horizontal-edges",checked:v==="horizontal-edges",onChange:R=>p(R.target.value),style:{marginRight:"8px"}}),n.jsxs("span",{style:{color:"#222"},children:["Horizontal ",r?"Pads":"Vias"," (top & bottom)"]}),n.jsx(qv,{})]})]})]}),n.jsxs("div",{style:{marginBottom:"15px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"5px",color:"#222",fontWeight:500},children:"Number of Pins:"}),n.jsx("input",{type:"number",min:l==="linear"?1:l==="twoSided"?2:4,step:l==="linear"?1:l==="twoSided"?2:4,value:b,onChange:R=>T(R.target.value),onBlur:()=>{const R=O(b,l);R.valid?D(""):D(R.error)},style:{width:"80px",padding:"6px 24px 6px 6px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",color:"#000",background:"#fff"},className:"number-input-large-spinners"}),C&&n.jsx("div",{style:{color:"#d32f2f",fontSize:"12px",marginTop:"4px"},children:C})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"20px"},children:[n.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),n.jsx("button",{onClick:K,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})]})]})})]}):null};function Hv(i,r){const a={x:i.x,y:i.y},s={x:r.x,y:r.y},l={x:s.x,y:a.y},d={x:a.x,y:s.y};return{corner1:a,corner2:l,corner3:s,corner4:d}}function Wv(i){if(i.numPins<1)throw new Error("Number of pins must be >= 1.");if(i.type==="twoSided"){if(i.numPins%2!==0)throw new Error("2-sided components must have an even number of pins.");if(!i.twoSidedOrientation)throw new Error("Orientation required for 2-sided components.")}if(i.type==="fourSided"&&i.numPins%4!==0)throw new Error("4-sided components must have N divisible by 4.");if(Math.abs(i.point1.x-i.point2.x)<.001||Math.abs(i.point1.y-i.point2.y)<.001)throw new Error("Area must have non-zero width and height.")}function $v(i,r){const a=[],{corner1:s,corner2:l,corner3:d,corner4:v}=r,p=Math.abs(l.x-s.x),b=Math.abs(d.y-l.y);if(p>b){const y=(s.y+v.y)/2,C=Math.min(s.x,l.x),D=Math.max(s.x,l.x),O=D-C,T=i.numPins>1?O/(i.numPins-1):0,K=Math.hypot(s.x-C,s.y-y),R=Math.hypot(s.x-D,s.y-y),z=K<R;if(i.numPins===1)a.push({pinNumber:1,x:(C+D)/2,y});else for(let w=1;w<=i.numPins;w++){const we=z?C+(w-1)*T:D-(w-1)*T;a.push({pinNumber:w,x:we,y})}}else{const y=(s.x+l.x)/2,C=Math.min(s.y,l.y),D=Math.max(d.y,v.y),O=D-C,T=i.numPins>1?O/(i.numPins-1):0,K=Math.hypot(s.x-y,s.y-C),R=Math.hypot(s.x-y,s.y-D),z=K<R;if(i.numPins===1)a.push({pinNumber:1,x:y,y:(C+D)/2});else for(let w=1;w<=i.numPins;w++){const we=z?C+(w-1)*T:D-(w-1)*T;a.push({pinNumber:w,x:y,y:we})}}return a}function Yv(i,r){const a=[],{corner1:s,corner2:l,corner3:d,corner4:v}=r,p=i.type==="fourSided"?i.numPins/4:i.numPins/2,b=Math.min(s.x,l.x,d.x,v.x),y=Math.min(s.y,l.y,d.y,v.y),C=Math.abs(s.y-y)<.001,D=Math.abs(s.x-b)<.001,O=C?D?"TopLeft":"TopRight":D?"BottomLeft":"BottomRight",T=Math.max(s.x,l.x,d.x,v.x),K=Math.max(s.y,l.y,d.y,v.y),R=(L,$,H=.001)=>{const Pe=[s,l,d,v];for(const ae of Pe)if(Math.abs(ae.x-L)<H&&Math.abs(ae.y-$)<H)return ae;return null},z=R(b,y)||s,w=R(T,y)||l,we=R(T,K)||d,X=R(b,K)||v,G={start:z,end:X,name:"Left",direction:"Down"},J={start:X,end:we,name:"Bottom",direction:"Right"},ue={start:we,end:w,name:"Right",direction:"Up"},oe={start:w,end:z,name:"Top",direction:"Left"};let ie;const E=[];if(O==="TopLeft"?(ie=G,E.push(G,J,ue,oe)):O==="BottomLeft"?(ie=J,E.push(J,ue,oe,G)):O==="BottomRight"?(ie=ue,E.push(ue,oe,G,J)):(ie=oe,E.push(oe,G,J,ue)),i.type==="twoSided"){if(i.twoSidedOrientation==="vertical-edges"){if(O!=="TopLeft"&&O!=="BottomRight")throw new Error(`Invalid Pin 1 location for Left/Right orientation. Pin 1 is at ${O}, but must be at Top-Left or Bottom-Right.`)}else if(O!=="TopRight"&&O!=="BottomLeft")throw new Error(`Invalid Pin 1 location for Top/Bottom orientation. Pin 1 is at ${O}, but must be at Top-Right or Bottom-Left.`)}const Y=[];i.type==="fourSided"?Y.push(...E):i.twoSidedOrientation==="vertical-edges"?ie===G?Y.push(G,ue):Y.push(ue,G):ie===oe?Y.push(oe,J):Y.push(J,oe);let F=1;for(const L of Y){const $=Math.hypot(L.end.x-L.start.x,L.end.y-L.start.y),H=i.type==="fourSided"?$/(p+1):p>1?$/(p-1):0,Pe=[];if(i.type==="fourSided")if(L.direction==="Down")for(let ae=1;ae<=p;ae++)Pe.push({x:L.start.x,y:L.start.y+ae*H});else if(L.direction==="Right")for(let ae=1;ae<=p;ae++)Pe.push({x:L.start.x+ae*H,y:L.start.y});else if(L.direction==="Up")for(let ae=1;ae<=p;ae++)Pe.push({x:L.start.x,y:L.start.y-ae*H});else for(let ae=1;ae<=p;ae++)Pe.push({x:L.start.x-ae*H,y:L.start.y});else if(p===1){const ae=(L.start.x+L.end.x)/2,ve=(L.start.y+L.end.y)/2;Pe.push({x:ae,y:ve})}else if(L.direction==="Down")for(let ae=0;ae<p;ae++)Pe.push({x:L.start.x,y:L.start.y+ae*H});else if(L.direction==="Right")for(let ae=0;ae<p;ae++)Pe.push({x:L.start.x+ae*H,y:L.start.y});else if(L.direction==="Up")for(let ae=0;ae<p;ae++)Pe.push({x:L.start.x,y:L.start.y-ae*H});else for(let ae=0;ae<p;ae++)Pe.push({x:L.start.x-ae*H,y:L.start.y});if(L===ie){let ae=0,ve=1/0;for(let Ce=0;Ce<Pe.length;Ce++){const fe=Math.hypot(Pe[Ce].x-s.x,Pe[Ce].y-s.y);fe<ve&&(ve=fe,ae=Ce)}const pe=Math.hypot(L.start.x-s.x,L.start.y-s.y);if(ve<pe&&ae>0){const Ce=Pe.slice(0,ae),fe=Pe.slice(ae);Pe.length=0,Pe.push(...fe,...Ce)}}for(const ae of Pe)a.push({pinNumber:F++,x:ae.x,y:ae.y})}return a}function Gv(i){Wv(i);const r=Hv(i.point1,i.point2);return i.type==="linear"?$v(i,r):Yv(i,r)}function Xv(){const[i,r]=M.useState([]),[a,s]=M.useState(!1),[l,d]=M.useState([]),[v,p]=M.useState(null),[b,y]=M.useState("trace"),[C,D]=M.useState("top"),O=M.useRef([]),T=M.useRef(0),K=M.useRef(!1),R=M.useCallback(()=>{s(!0),d([]),O.current=[]},[]),z=M.useCallback(()=>{s(!1),d([]),O.current=[]},[]),w=M.useCallback(X=>{d(G=>[...G,X]),O.current=[...O.current,X]},[]),we=M.useCallback(X=>{r(G=>[...G,X]),d([]),O.current=[]},[]);return{drawingStrokes:i,setDrawingStrokes:r,isDrawing:a,setIsDrawing:s,currentStroke:l,setCurrentStroke:d,tracePreviewMousePos:v,setTracePreviewMousePos:p,drawingMode:b,setDrawingMode:y,selectedDrawingLayer:C,setSelectedDrawingLayer:D,currentStrokeRef:O,lastTraceClickTimeRef:T,isDoubleClickingTraceRef:K,startDrawing:R,stopDrawing:z,addPointToStroke:w,finishStroke:we}}function Kv(){const[i,r]=M.useState(new Set),[a,s]=M.useState(!1),[l,d]=M.useState(new Set),[v,p]=M.useState(new Set),[b,y]=M.useState(new Set),C=M.useCallback(()=>{r(new Set),d(new Set),p(new Set),y(new Set)},[]),D=M.useCallback((K,R="stroke")=>{R==="stroke"?r(z=>new Set([...z,K])):R==="component"?d(z=>new Set([...z,K])):R==="power"?p(z=>new Set([...z,K])):R==="ground"&&y(z=>new Set([...z,K]))},[]),O=M.useCallback((K,R="stroke")=>{R==="stroke"?r(z=>{const w=new Set(z);return w.delete(K),w}):R==="component"?d(z=>{const w=new Set(z);return w.delete(K),w}):R==="power"?p(z=>{const w=new Set(z);return w.delete(K),w}):R==="ground"&&y(z=>{const w=new Set(z);return w.delete(K),w})},[]),T=M.useCallback((K,R="stroke")=>{R==="stroke"?r(K):R==="component"?d(K):R==="power"?p(K):R==="ground"&&y(K)},[]);return{selectedIds:i,setSelectedIds:r,isSelecting:a,setIsSelecting:s,selectedComponentIds:l,setSelectedComponentIds:d,selectedPowerIds:v,setSelectedPowerIds:p,selectedGroundIds:b,setSelectedGroundIds:y,clearSelection:C,addToSelection:D,removeFromSelection:O,setSelection:T}}function Zv(){const[i,r]=M.useState(null),[a,s]=M.useState(!1),[l,d]=M.useState(null),[v,p]=M.useState("nudge"),b=M.useCallback((C,D)=>{r(C),s(!0),d(D)},[]),y=M.useCallback(()=>{s(!1),r(null),d(null)},[]);return{selectedImageForTransform:i,setSelectedImageForTransform:r,isTransforming:a,setIsTransforming:s,transformStartPos:l,setTransformStartPos:d,transformMode:v,setTransformMode:p,startTransform:b,stopTransform:y}}function Jv(){const[i,r]=M.useState(null),[a,s]=M.useState(null),[l,d]=M.useState("overlay"),[v,p]=M.useState(50),[b,y]=M.useState(!1),[C,D]=M.useState(2e3),[O,T]=M.useState(!1),K=M.useCallback(w=>{r(w)},[]),R=M.useCallback(w=>{s(w)},[]),z=M.useCallback(()=>{r(null),s(null)},[]);return{topImage:i,setTopImage:r,bottomImage:a,setBottomImage:s,currentView:l,setCurrentView:d,transparency:v,setTransparency:p,isTransparencyCycling:b,setIsTransparencyCycling:y,transparencyCycleSpeed:C,setTransparencyCycleSpeed:D,isGrayscale:O,setIsGrayscale:T,loadTopImage:K,loadBottomImage:R,clearImages:z}}function Qv(){const[i,r]=M.useState(1),[a,s]=M.useState({x:0,y:0}),[l,d]=M.useState(0),[v,p]=M.useState(!1),[b,y]=M.useState(!1),[C,D]=M.useState(!1),O=M.useCallback(()=>{r(1),s({x:0,y:0}),d(0),p(!1)},[]),T=M.useCallback((X=1.2)=>{r(G=>G*X)},[]),K=M.useCallback((X=1.2)=>{r(G=>G/X)},[]),R=M.useCallback(X=>{r(X)},[]),z=M.useCallback((X,G,J)=>{const ue=X/J,oe=G/J;s(ie=>({x:ie.x-ue,y:ie.y-oe}))},[]),w=M.useCallback((X,G)=>{s({x:X,y:G})},[]),we=M.useCallback((X,G)=>({x:X-a.x*i,y:G-a.y*i}),[a,i]);return{viewScale:i,setViewScale:r,cameraWorldCenter:a,setCameraWorldCenter:s,viewRotation:l,setViewRotation:d,viewFlipX:v,setViewFlipX:p,isShiftConstrained:b,setIsShiftConstrained:y,showBothLayers:C,setShowBothLayers:D,resetView:O,zoomIn:T,zoomOut:K,setZoom:R,pan:z,setCameraCenter:w,getViewPan:we}}function ew(){const[i,r]=M.useState(()=>[{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),[a,s]=M.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"}]),[l,d]=M.useState([]),[v,p]=M.useState([]),[b,y]=M.useState(null),[C,D]=M.useState(null),O=M.useCallback(ue=>{r(oe=>[...oe,ue])},[]),T=M.useCallback((ue,oe)=>{r(ie=>ie.map(E=>E.id===ue?{...E,...oe}:E))},[]),K=M.useCallback(ue=>{r(oe=>oe.filter(ie=>ie.id!==ue)),d(oe=>oe.filter(ie=>ie.powerBusId!==ue))},[]),R=M.useCallback(ue=>{d(oe=>[...oe,ue])},[]),z=M.useCallback(ue=>{d(oe=>oe.filter(ie=>ie.id!==ue))},[]),w=M.useCallback(ue=>{p(oe=>[...oe,ue])},[]),we=M.useCallback(ue=>{p(oe=>oe.filter(ie=>ie.id!==ue))},[]),X=M.useCallback(ue=>{s(oe=>[...oe,ue])},[]),G=M.useCallback((ue,oe)=>{s(ie=>ie.map(E=>E.id===ue?{...E,...oe}:E))},[]),J=M.useCallback(ue=>{s(oe=>oe.filter(ie=>ie.id!==ue)),p(oe=>oe.filter(ie=>ie.groundBusId===ue))},[]);return{powerBuses:i,setPowerBuses:r,groundBuses:a,setGroundBuses:s,powerSymbols:l,setPowerSymbols:d,groundSymbols:v,setGroundSymbols:p,powerEditor:b,setPowerEditor:y,groundEditor:C,setGroundEditor:D,addPowerBus:O,updatePowerBus:T,removePowerBus:K,addPowerSymbol:R,removePowerSymbol:z,addGroundSymbol:w,removeGroundSymbol:we,addGroundBus:X,updateGroundBus:G,removeGroundBus:J}}const Si={brushColor:"#008080",brushSize:6,topTraceColor:"#AA4499",bottomTraceColor:"#F781BF",topTraceSize:6,bottomTraceSize:6,viaSize:18,viaColor:"#ff0000",topPadColor:"#0072B2",bottomPadColor:"#56B4E9",topPadSize:18,bottomPadSize:18,topTestPointColor:"#FFFF00",bottomTestPointColor:"#FFFF00",topTestPointSize:18,bottomTestPointSize:18,topComponentColor:"#8C564B",bottomComponentColor:"#9C755F",topComponentSize:18,bottomComponentSize:18,componentConnectionColor:"#E69F00",componentConnectionSize:3};function tw(){const[i,r]=M.useState(Si.brushColor),[a,s]=M.useState(Si.brushSize),[l,d]=M.useState(Si.topTraceColor),[v,p]=M.useState(Si.bottomTraceColor),[b,y]=M.useState(Si.topTraceSize),[C,D]=M.useState(Si.bottomTraceSize),[O,T]=M.useState(Si.topPadColor),[K,R]=M.useState(Si.bottomPadColor),[z,w]=M.useState(Si.topPadSize),[we,X]=M.useState(Si.bottomPadSize),[G,J]=M.useState(Si.topTestPointColor),[ue,oe]=M.useState(Si.bottomTestPointColor),[ie,E]=M.useState(Si.topTestPointSize),[Y,F]=M.useState(Si.bottomTestPointSize),[L,$]=M.useState(Si.topComponentColor),[H,Pe]=M.useState(Si.bottomComponentColor),[ae,ve]=M.useState(Si.topComponentSize),[pe,Ce]=M.useState(Si.bottomComponentSize),[fe,k]=M.useState(Si.componentConnectionColor),[A,W]=M.useState(Si.componentConnectionSize),q=M.useCallback(()=>{r(Si.brushColor),s(Si.brushSize),d(Si.topTraceColor),p(Si.bottomTraceColor),y(Si.topTraceSize),D(Si.bottomTraceSize),T(Si.topPadColor),R(Si.bottomPadColor),w(Si.topPadSize),X(Si.bottomPadSize),J(Si.topTestPointColor),oe(Si.bottomTestPointColor),E(Si.topTestPointSize),F(Si.bottomTestPointSize),$(Si.topComponentColor),Pe(Si.bottomComponentColor),ve(Si.topComponentSize),Ce(Si.bottomComponentSize),k(Si.componentConnectionColor),W(Si.componentConnectionSize)},[]),te=M.useCallback(_e=>{_e.brushColor!==void 0&&r(_e.brushColor),_e.brushSize!==void 0&&s(_e.brushSize),_e.topTraceColor!==void 0&&d(_e.topTraceColor),_e.bottomTraceColor!==void 0&&p(_e.bottomTraceColor),_e.topTraceSize!==void 0&&y(_e.topTraceSize),_e.bottomTraceSize!==void 0&&D(_e.bottomTraceSize),_e.topPadColor!==void 0&&T(_e.topPadColor),_e.bottomPadColor!==void 0&&R(_e.bottomPadColor),_e.topPadSize!==void 0&&w(_e.topPadSize),_e.bottomPadSize!==void 0&&X(_e.bottomPadSize),_e.topTestPointColor!==void 0&&J(_e.topTestPointColor),_e.bottomTestPointColor!==void 0&&oe(_e.bottomTestPointColor),_e.topTestPointSize!==void 0&&E(_e.topTestPointSize),_e.bottomTestPointSize!==void 0&&F(_e.bottomTestPointSize),_e.topComponentColor!==void 0&&$(_e.topComponentColor),_e.bottomComponentColor!==void 0&&Pe(_e.bottomComponentColor),_e.topComponentSize!==void 0&&ve(_e.topComponentSize),_e.bottomComponentSize!==void 0&&Ce(_e.bottomComponentSize),_e.componentConnectionColor!==void 0&&k(_e.componentConnectionColor),_e.componentConnectionSize!==void 0&&W(_e.componentConnectionSize)},[]),xe=M.useCallback((_e,Fe,nt)=>{},[]),ee=M.useCallback((_e,Fe,nt)=>{},[]),Ie=M.useCallback(()=>({brushColor:i,brushSize:a,topTraceColor:l,bottomTraceColor:v,topTraceSize:b,bottomTraceSize:C,viaSize:Si.viaSize,viaColor:Si.viaColor,topPadColor:O,bottomPadColor:K,topPadSize:z,bottomPadSize:we,topTestPointColor:G,bottomTestPointColor:ue,topTestPointSize:ie,bottomTestPointSize:Y,topComponentColor:L,bottomComponentColor:H,topComponentSize:ae,bottomComponentSize:pe,componentConnectionColor:fe,componentConnectionSize:A}),[i,a,l,v,b,C,O,K,z,we,G,ue,ie,Y,L,H,ae,pe,fe,A]);return{brushColor:i,setBrushColor:r,brushSize:a,setBrushSize:s,topTraceColor:l,setTopTraceColor:d,bottomTraceColor:v,setBottomTraceColor:p,topTraceSize:b,setTopTraceSize:y,bottomTraceSize:C,setBottomTraceSize:D,topPadColor:O,setTopPadColor:T,bottomPadColor:K,setBottomPadColor:R,topPadSize:z,setTopPadSize:w,bottomPadSize:we,setBottomPadSize:X,topTestPointColor:G,setTopTestPointColor:J,bottomTestPointColor:ue,setBottomTestPointColor:oe,topTestPointSize:ie,setTopTestPointSize:E,bottomTestPointSize:Y,setBottomTestPointSize:F,topComponentColor:L,setTopComponentColor:$,bottomComponentColor:H,setBottomComponentColor:Pe,topComponentSize:ae,setTopComponentSize:ve,bottomComponentSize:pe,setBottomComponentSize:Ce,componentConnectionColor:fe,setComponentConnectionColor:k,componentConnectionSize:A,setComponentConnectionSize:W,resetToDefaults:q,loadFromProject:te,getCurrentSettings:Ie,saveDefaultSize:xe,saveDefaultColor:ee}}function nw(i,r,a,s,l,d,v,p,b,y,C,D,O,T,K,R,z,w,we,X,G,J,ue,oe,ie){const[E,Y]=M.useState(()=>i()),F=M.useRef(null),L=M.useRef(s),$=M.useRef(l),H=M.useCallback(ve=>r==="draw"&&a==="trace"?ve.get("trace"):r==="draw"&&a==="via"?ve.get("via"):r==="draw"&&a==="pad"?ve.get("pad"):r==="component"?ve.get("component"):r==="power"?ve.get("power"):r==="ground"?ve.get("ground"):null,[r,a]);M.useEffect(()=>{Y(ve=>{const pe=H(ve),Ce=pe?.id||null,fe=F.current,k=new Map(ve);if(fe&&fe!==Ce){const A=ve.get(fe);A&&k.set(fe,{...A,settings:{color:L.current,size:$.current}})}if(pe&&Ce!==fe)if(r==="draw"&&a==="trace"){const A=J||"top",W=A==="top"?d:v,q=A==="top"?p:b;L.current=W,$.current=q,k.set("trace",{...pe,settings:{color:W,size:q}})}else if(r==="draw"&&a==="pad"){const A=ue||"top",W=A==="top"?y:C,q=A==="top"?D:O;L.current=W,$.current=q,k.set("pad",{...pe,settings:{color:W,size:q}})}else if(r==="component"){const A=ie||"top",W=A==="top"?w:we,q=A==="top"?X:G;L.current=W,$.current=q,k.set("component",{...pe,settings:{color:W,size:q}})}else L.current=pe.settings.color,$.current=pe.settings.size;return F.current=Ce,k})},[r,a,d,v,p,b,y,C,D,O,w,we,X,G,J,ue,ie,H]);const Pe=M.useCallback((ve,pe)=>{Y(Ce=>{const fe=new Map(Ce),k=fe.get(ve);return k&&fe.set(ve,{...k,settings:pe}),fe})},[]),ae=M.useCallback((ve,pe,Ce)=>{Y(fe=>{const k=new Map(fe),A=k.get(ve);if(A){const W=new Map(A.layerSettings);W.set(pe,Ce),k.set(ve,{...A,layerSettings:W})}return k})},[]);return{toolRegistry:E,setToolRegistry:Y,updateToolSettings:Pe,updateToolLayerSettings:ae,getCurrentToolDef:H}}function iw(i){const{currentTool:r,drawingMode:a,traceToolLayer:s,padToolLayer:l,testPointToolLayer:d,componentToolLayer:v}=i,[p,b]=M.useState(0),y=M.useCallback(()=>r==="draw"&&a==="via"?"via":r==="draw"&&a==="pad"?l==="bottom"?"padBottom":"padTop":r==="draw"&&a==="testPoint"?d==="bottom"?"testPointBottom":"testPointTop":r==="draw"&&a==="trace"?s==="bottom"?"traceBottom":"traceTop":r==="component"?v==="bottom"?"componentBottom":"componentTop":r==="power"?"power":r==="ground"?"ground":null,[r,a,l,d,s,v]),C=M.useCallback(()=>{const K=y();if(K){const R=Bn.get(K);return{currentTool:r,drawingMode:a,layer:r==="draw"&&a==="pad"?l||"top":r==="draw"&&a==="testPoint"?d||"top":r==="draw"&&a==="trace"?s||"top":r==="component"?v||"top":void 0,toolInstanceId:K,color:R.color,size:R.size}}return{currentTool:r,drawingMode:a,layer:void 0,toolInstanceId:null,color:"#000000",size:10}},[r,a,l,d,s,v,y]);M.useEffect(()=>{const K=y();return K?Bn.subscribe(K,()=>{b(z=>z+1)}):void 0},[y]);const D=C(),O=M.useCallback(K=>{const R=y();R&&Bn.setColor(R,K)},[y]),T=M.useCallback(K=>{const R=y();R&&Bn.setSize(R,K)},[y]);return{toolState:D,setColor:O,setSize:T,getCurrentToolInstanceId:y}}function rw(){const[i,r]=M.useState(!1),[a,s]=M.useState(!1),[l,d]=M.useState(!1),[v,p]=M.useState(!1),[b,y]=M.useState(!1),[C,D]=M.useState(!1),[O,T]=M.useState(!1),[K,R]=M.useState(!1),z=M.useCallback(()=>{r(!0),s(!0),d(!0),p(!0),y(!0),D(!0),T(!0),R(!0)},[]),w=M.useCallback(()=>{r(!1),s(!1),d(!1),p(!1),y(!1),D(!1),T(!1),R(!1)},[]);return{areImagesLocked:i,setAreImagesLocked:r,areViasLocked:a,setAreViasLocked:s,arePadsLocked:l,setArePadsLocked:d,areTestPointsLocked:v,setAreTestPointsLocked:p,areTracesLocked:b,setAreTracesLocked:y,areComponentsLocked:C,setAreComponentsLocked:D,areGroundNodesLocked:O,setAreGroundNodesLocked:T,arePowerNodesLocked:K,setArePowerNodesLocked:R,lockAll:z,unlockAll:w}}function aw(){const[i,r]=M.useState(null),[a,s]=M.useState({visible:!1,size:6}),[l,d]=M.useState({visible:!1,interval:5}),[v,p]=M.useState({visible:!1,source:null,interval:5}),[b,y]=M.useState({visible:!1,text:""}),[C,D]=M.useState({visible:!1,title:"",message:""}),[O,T]=M.useState({visible:!1}),[K,R]=M.useState({visible:!1}),[z,w]=M.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[we,X]=M.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[G,J]=M.useState(!1),[ue,oe]=M.useState(!0),[ie,E]=M.useState(!1);return{openMenu:i,setOpenMenu:r,setSizeDialog:a,setSetSizeDialog:s,autoSaveDialog:l,setAutoSaveDialog:d,autoSavePromptDialog:v,setAutoSavePromptDialog:p,debugDialog:b,setDebugDialog:y,errorDialog:C,setErrorDialog:D,newProjectDialog:O,setNewProjectDialog:T,openProjectDialog:K,setOpenProjectDialog:R,newProjectSetupDialog:z,setNewProjectSetupDialog:w,saveAsDialog:we,setSaveAsDialog:X,showColorPicker:G,setShowColorPicker:J,showWelcomeDialog:ue,setShowWelcomeDialog:oe,transformImagesDialogVisible:ie,setTransformImagesDialogVisible:E}}function ow(){const[i,r]=M.useState(!1),[a,s]=M.useState(1),[l,d]=M.useState(null),[v,p]=M.useState(""),[b,y]=M.useState(""),[C,D]=M.useState(null),[O,T]=M.useState("pcb_project"),[K,R]=M.useState([]),[z,w]=M.useState(-1),we=M.useRef(null),X=M.useRef(!1),G=M.useRef(!1);return{autoSaveEnabled:i,setAutoSaveEnabled:r,autoSaveInterval:a,setAutoSaveInterval:s,autoSaveDirHandle:l,setAutoSaveDirHandle:d,autoSaveBaseName:v,setAutoSaveBaseName:p,currentProjectFilePath:b,setCurrentProjectFilePath:y,projectDirHandle:C,setProjectDirHandle:D,projectName:O,setProjectName:T,autoSaveFileHistory:K,setAutoSaveFileHistory:R,currentFileIndex:z,setCurrentFileIndex:w,autoSaveIntervalRef:we,hasChangesSinceLastAutoSaveRef:X,prevAutoSaveEnabledRef:G}}function sw(){const[i,r]=M.useState(null),a=M.useRef(!1),s=M.useCallback((p,b,y,C,D)=>{if(a.current)return;const O={drawingStrokes:JSON.parse(JSON.stringify(p)),componentsTop:JSON.parse(JSON.stringify(b)),componentsBottom:JSON.parse(JSON.stringify(y)),powerSymbols:JSON.parse(JSON.stringify(C)),groundSymbols:JSON.parse(JSON.stringify(D))};r(O)},[]),l=M.useCallback(()=>{if(!i)return null;a.current=!0;const p=i;return r(null),setTimeout(()=>{a.current=!1},100),p},[i]),d=i!==null,v=M.useCallback(()=>{r(null)},[]);return{saveSnapshot:s,undo:l,canUndo:d,clearSnapshot:v}}function lw(){const r=Jv(),{topImage:a,setTopImage:s,bottomImage:l,setBottomImage:d,currentView:v,setCurrentView:p,transparency:b,setTransparency:y,isTransparencyCycling:C,setIsTransparencyCycling:D,transparencyCycleSpeed:O,setTransparencyCycleSpeed:T,isGrayscale:K,setIsGrayscale:R}=r,[z,w]=M.useState("none"),[we,X]=M.useState(()=>{const c=localStorage.getItem("bomExportFormat");return c==="json"||c==="pdf"?c:"pdf"});Dt.useEffect(()=>{localStorage.setItem("bomExportFormat",we)},[we]);const G=tw(),{brushColor:J,setBrushColor:ue,brushSize:oe,setBrushSize:ie,topTraceColor:E,setTopTraceColor:Y,bottomTraceColor:F,setBottomTraceColor:L,topTraceSize:$,setTopTraceSize:H,bottomTraceSize:Pe,setBottomTraceSize:ae,topPadColor:ve,setTopPadColor:pe,bottomPadColor:Ce,setBottomPadColor:fe,topPadSize:k,setTopPadSize:A,bottomPadSize:W,setBottomPadSize:q,topTestPointColor:te,setTopTestPointColor:xe,bottomTestPointColor:ee,setBottomTestPointColor:Ie,topTestPointSize:_e,setTopTestPointSize:Fe,bottomTestPointSize:nt,setBottomTestPointSize:lt,topComponentColor:kt,setTopComponentColor:It,bottomComponentColor:ne,setBottomComponentColor:jt,topComponentSize:Qt,setTopComponentSize:Wt,bottomComponentSize:xt,setBottomComponentSize:Je,componentConnectionColor:Gt,setComponentConnectionColor:un,componentConnectionSize:Zt,setComponentConnectionSize:_n,saveDefaultSize:Rt,saveDefaultColor:Le}=G,ke=Xv(),{drawingStrokes:Xe,setDrawingStrokes:et,isDrawing:Pt,setIsDrawing:St,currentStroke:_t,setCurrentStroke:Ut,tracePreviewMousePos:qt,setTracePreviewMousePos:Xt,drawingMode:it,setDrawingMode:an,selectedDrawingLayer:Bt,setSelectedDrawingLayer:Kt,currentStrokeRef:dn,lastTraceClickTimeRef:ti,isDoubleClickingTraceRef:Nn}=ke,xn=Zv(),{selectedImageForTransform:Ot,setSelectedImageForTransform:ji,isTransforming:In,setIsTransforming:er,transformStartPos:Gi,setTransformStartPos:Ft,transformMode:Pi,setTransformMode:gi}=xn,Et=Qv(),{viewScale:Ke,setViewScale:Vt,viewRotation:$t,setViewRotation:On,viewFlipX:En,setViewFlipX:Hi,cameraWorldCenter:Gn,setCameraWorldCenter:ai,resetView:Li,isShiftConstrained:tr,setIsShiftConstrained:co,showBothLayers:pl,setShowBothLayers:ko,setCameraCenter:No,getViewPan:is}=Et,[Zn,ka]=M.useState("top"),[bi,uo]=M.useState("top"),[Fn,Ns]=M.useState("top"),[xi,Xa]=M.useState("top"),fo=Dt.useRef("top"),As=Dt.useRef("top"),zs=Dt.useRef("top"),Ao=Dt.useRef("top");Dt.useEffect(()=>{fo.current=Zn},[Zn]),Dt.useEffect(()=>{As.current=bi},[bi]),Dt.useEffect(()=>{zs.current=Fn},[Fn]),Dt.useEffect(()=>{Ao.current=xi},[xi]);const Cc=iw({currentTool:z,drawingMode:it,traceToolLayer:Zn,padToolLayer:bi,testPointToolLayer:Fn,componentToolLayer:xi}),{toolState:ar}=Cc,Ps=nw(lv,z,it,J,oe,E,F,$,Pe,ve,Ce,k,W,te,ee,_e,nt,kt,ne,Qt,xt,Zn,bi,Fn,xi),{toolRegistry:Wn,setToolRegistry:Hn,getCurrentToolDef:_s,updateToolSettings:qo,updateToolLayerSettings:po}=Ps,Oa=Dt.useRef(null),vi=Dt.useRef(J),Wi=Dt.useRef(oe);Dt.useEffect(()=>{Hn(c=>{const x=_s(c),N=x?.id||null,B=Oa.current,re=new Map(c);if(B&&B!==N){const ye=c.get(B);ye&&re.set(B,{...ye,settings:{color:vi.current,size:Wi.current}})}if(x&&N!==B)if(z==="draw"&&it==="trace"){const ye=Zn||"top",P=ye==="top"?E:F,ze=ye==="top"?$:Pe;ue(P),ie(ze),vi.current=P,Wi.current=ze;const me=new Map(x.layerSettings);me.set("top",{color:E,size:$}),me.set("bottom",{color:F,size:Pe}),re.set("trace",{...x,settings:{color:P,size:ze},layerSettings:me})}else if(z==="draw"&&it==="pad"){const ye=bi||"top",P=ye==="top"?ve:Ce,ze=ye==="top"?k:W;ue(P),ie(ze),vi.current=P,Wi.current=ze;const me=new Map(x.layerSettings);me.set("top",{color:ve,size:k}),me.set("bottom",{color:Ce,size:W}),re.set("pad",{...x,settings:{color:P,size:ze},layerSettings:me})}else if(z==="draw"&&it==="testPoint"){const ye=Fn||"top",P=ye==="top"?te:ee,ze=ye==="top"?_e:nt;ue(P),ie(ze),vi.current=P,Wi.current=ze;const me=new Map(x.layerSettings);me.set("top",{color:te,size:_e}),me.set("bottom",{color:ee,size:nt}),re.set("testPoint",{...x,settings:{color:P,size:ze},layerSettings:me})}else if(z==="component"){const ye=xi||"top",P=ye==="top"?kt:ne,ze=ye==="top"?Qt:xt;ue(P),ie(ze),vi.current=P,Wi.current=ze;const me=new Map(x.layerSettings);me.set("top",{color:kt,size:Qt}),me.set("bottom",{color:ne,size:xt}),re.set("component",{...x,settings:{color:P,size:ze},layerSettings:me})}else{const ye=x.settings;ue(ye.color),ie(ye.size),vi.current=ye.color,Wi.current=ye.size}return Oa.current=N,re})},[z,it,_s,E,F,$,Pe,ve,Ce,k,W,te,ee,_e,nt,Fn,kt,ne,Qt,xt]),Dt.useEffect(()=>{const c=Wn.get("trace");if(c){const re=c.layerSettings.get("top"),ye=c.layerSettings.get("bottom");re&&(Y(re.color),H(re.size)),ye&&(L(ye.color),ae(ye.size))}const x=Wn.get("pad");if(x){const re=x.layerSettings.get("top"),ye=x.layerSettings.get("bottom");re&&(pe(re.color),A(re.size)),ye&&(fe(ye.color),q(ye.size))}const N=Wn.get("testPoint");if(N){const re=N.layerSettings.get("top"),ye=N.layerSettings.get("bottom");re&&(xe(re.color),Fe(re.size)),ye&&(Ie(ye.color),lt(ye.size))}const B=Wn.get("component");if(B){const re=B.layerSettings.get("top"),ye=B.layerSettings.get("bottom");re&&(It(re.color),Wt(re.size)),ye&&(jt(ye.color),Je(ye.size))}},[]),Dt.useEffect(()=>{Hn(c=>{const x=new Map(c),N=c.get("trace");if(N){const ze=new Map(N.layerSettings);ze.set("top",{color:E,size:$}),ze.set("bottom",{color:F,size:Pe}),x.set("trace",{...N,layerSettings:ze})}const B=c.get("pad");if(B){const ze=new Map(B.layerSettings);ze.set("top",{color:ve,size:k}),ze.set("bottom",{color:Ce,size:W}),x.set("pad",{...B,layerSettings:ze})}const re=c.get("testPoint");if(re){const ze=new Map(re.layerSettings);ze.set("top",{color:te,size:_e}),ze.set("bottom",{color:ee,size:nt}),x.set("testPoint",{...re,layerSettings:ze})}const ye=c.get("component");if(ye){const ze=new Map(ye.layerSettings);ze.set("top",{color:kt,size:Qt}),ze.set("bottom",{color:ne,size:xt}),x.set("component",{...ye,layerSettings:ze})}const P=c.get("componentConnection");return P&&x.set("componentConnection",{...P,settings:{color:Gt,size:Zt}}),x})},[E,F,$,Pe,ve,Ce,k,W,te,ee,_e,nt,kt,ne,Qt,xt,Gt,Zt,Hn]),Dt.useEffect(()=>{Hn(c=>{const x=_s(c);if(x)if(z==="draw"&&it==="trace"){const N=Zn||"top",B=N==="top"?"traceTop":"traceBottom",re=Bn.get(B),ye=re.color,P=re.size;N==="top"?(Y(ye),H(P),Le("trace",ye,"top"),Rt("trace",P,"top")):(L(ye),ae(P),Le("trace",ye,"bottom"),Rt("trace",P,"bottom"));const ze=new Map(c),me=new Map(x.layerSettings);return me.set(N,{color:ye,size:P}),ze.set(x.id,{...x,layerSettings:me,settings:{color:ye,size:P}}),vi.current=ye,Wi.current=P,ze}else if(z==="draw"&&it==="pad"){const N=bi||"top",B=N==="top"?"padTop":"padBottom",re=Bn.get(B),ye=re.color,P=re.size;N==="top"?(pe(ye),A(P),Le("pad",ye,"top"),Rt("pad",P,"top")):(fe(ye),q(P),Le("pad",ye,"bottom"),Rt("pad",P,"bottom"));const ze=new Map(c),me=new Map(x.layerSettings);return me.set(N,{color:ye,size:P}),ze.set(x.id,{...x,layerSettings:me,settings:{color:ye,size:P}}),vi.current=ye,Wi.current=P,ze}else if(z==="draw"&&it==="testPoint"){const N=Fn||"top",B=N==="top"?"testPointTop":"testPointBottom",re=Bn.get(B),ye=re.color,P=re.size;N==="top"?(xe(ye),Fe(P),Le("testPoint",ye,"top"),Rt("testPoint",P,"top")):(Ie(ye),lt(P),Le("testPoint",ye,"bottom"),Rt("testPoint",P,"bottom"));const ze=new Map(c),me=new Map(x.layerSettings);return me.set(N,{color:ye,size:P}),ze.set(x.id,{...x,layerSettings:me,settings:{color:ye,size:P}}),vi.current=ye,Wi.current=P,ze}else if(z==="component"){const N=xi||"top",B=N==="top"?"componentTop":"componentBottom",re=Bn.get(B),ye=re.color,P=re.size;N==="top"?(It(ye),Wt(P),Le("component",ye,"top"),Rt("component",P,"top")):(jt(ye),Je(P),Le("component",ye,"bottom"),Rt("component",P,"bottom"));const ze=new Map(c),me=new Map(x.layerSettings);return me.set(N,{color:ye,size:P}),ze.set(x.id,{...x,layerSettings:me,settings:{color:ye,size:P}}),vi.current=ye,Wi.current=P,ze}else{const N=new Map(c);return N.set(x.id,{...x,settings:{color:J,size:oe}}),vi.current=J,Wi.current=oe,N}return c})},[J,oe,z,it,Zn,bi,Fn,xi,_s,Le,Rt,Kd,Y,L,H,ae,pe,fe,A,q,xe,Ie,Fe,lt,It,jt,Wt,Je]),Dt.useEffect(()=>{if(z==="draw"&&it==="trace"){const c=Zn;Kt(c),ue(c==="top"?E:F),ie(c==="top"?$:Pe),c==="top"?(sa(!0),ro(!0)):(pa(!0),Da(!0)),Ic(!0)}else Ic(!1)},[z,it,Zn,E,F,$,Pe]),Dt.useEffect(()=>{if(z==="draw"&&it==="pad"){const c=bi;Kt(c);const x=Bn.get(c==="top"?"padTop":"padBottom");ue(x.color),ie(x.size),c==="top"?(sa(!0),La(!0)):(pa(!0),Bo(!0)),Zu(!0)}else Zu(!1)},[z,it,bi]),Dt.useEffect(()=>{if(z==="draw"&&it==="testPoint"){const c=Fn;Kt(c),ue(c==="top"?te:ee),ie(c==="top"?_e:nt),c==="top"?(sa(!0),Tl(!0)):(pa(!0),Cl(!0)),Tu(!0)}else Tu(!1)},[z,it,Fn,te,ee,_e,nt]);const[yi,_r]=M.useState(!1);Dt.useEffect(()=>{if(z==="component"){const c=xi;Kt(c),ue(c==="top"?kt:ne),ie(c==="top"?Qt:xt),c==="top"?(sa(!0),Va(!0)):(pa(!0),ao(!0)),yi||lf(!0)}else lf(!1),_r(!1)},[z,xi,kt,ne,Qt,xt,yi]),Dt.useEffect(()=>{if(z==="component"){const c=xi;Kt(c),ue(c==="top"?kt:ne),ie(c==="top"?Qt:xt)}},[xi,z,kt,ne,Qt,xt]),Dt.useEffect(()=>{ar.toolInstanceId&&(ue(ar.color),ie(ar.size))},[ar.toolInstanceId,ar.color,ar.size,ue,ie,z,it]);const[sc,Ea]=M.useState(void 0),[,Na]=M.useState([]),[,hl]=M.useState([]),[,Ka]=M.useState([]),[,ua]=M.useState([]),[Fa,zo]=M.useState([]),[Mt,Fi]=M.useState([]),[Vo,Xs]=M.useState([]),[Ur,Ho]=M.useState([]),or=M.useRef(null),nr=Dt.useMemo(()=>{const c=or.current;if(!c)return{x:0,y:0};const x=(c.width-10)/2,N=(c.height-10)/2;return is(x,N)},[or.current?.width,or.current?.height,Gn,Ke,is]),rs=Dt.useCallback(c=>{const x=or.current;if(!x)return;const N=(x.width-10)/2,B=(x.height-10)/2,re=is(N,B),ye=typeof c=="function"?c(re):c,P=(N-ye.x)/Ke,ze=(B-ye.y)/Ke;ai({x:P,y:ze})},[is,Ke,ai]),Vn=Kv(),{selectedIds:oi,setSelectedIds:An,isSelecting:lc,setIsSelecting:Za,selectedComponentIds:gn,setSelectedComponentIds:Cn,selectedPowerIds:li,setSelectedPowerIds:hn,selectedGroundIds:ci,setSelectedGroundIds:yn}=Vn,hu=g2(),{componentsTop:Jt,setComponentsTop:_i,componentsBottom:on,setComponentsBottom:Xn,componentEditor:Aa,setComponentEditor:Po,connectingPin:Kr,setConnectingPin:Ds,componentDialogPosition:ho,setComponentDialogPosition:_o,isDraggingDialog:Rs,setIsDraggingDialog:Vl,dialogDragOffset:gl,setDialogDragOffset:Ks,openComponentEditor:as}=hu,gu=ew(),{powerBuses:bn,setPowerBuses:os,groundBuses:S,setGroundBuses:U,powerSymbols:Se,setPowerSymbols:Be,groundSymbols:Ve,setGroundSymbols:ut,powerEditor:wt,setPowerEditor:sn}=gu,jn=sw(),{saveSnapshot:vn,undo:ni,clearSnapshot:wi}=jn;Dt.useEffect(()=>{z==="power"?(Ln(!1),bn.length>1?dt&&bn.some(x=>x.id===dt)?Ye(!1):(Ye(!0),dt!==null&&Qe(null)):bn.length===1?(Qe(bn[0].id),Ye(!1)):(Ye(!0),Qe(null))):Ye(!1)},[z,bn]),Dt.useEffect(()=>{z==="ground"?(Ye(!1),S.length>1?Ci&&S.some(x=>x.id===Ci)?Ln(!1):(Ln(!0),Ci!==null&&$n(null)):S.length===1?($n(S[0].id),Ln(!1)):(Ln(!0),$n(null))):Ln(!1)},[z,S]),Dt.useEffect(()=>{z!=="power"&&z!=="ground"&&(Ye(!1),Ln(!1))},[z]);const qr=rw(),{areImagesLocked:Di,setAreImagesLocked:Xi,areViasLocked:Mi,setAreViasLocked:Nr,arePadsLocked:sr,setArePadsLocked:Wo,areTestPointsLocked:ya,setAreTestPointsLocked:Ls,areTracesLocked:da,setAreTracesLocked:Ms,areComponentsLocked:Dr,setAreComponentsLocked:Ja,areGroundNodesLocked:fa,setAreGroundNodesLocked:Do,arePowerNodesLocked:ui,setArePowerNodesLocked:$o}=qr,Hl=aw(),{openMenu:kc,setOpenMenu:Ro,setSizeDialog:za,setSetSizeDialog:ss,autoSaveDialog:Wl,setAutoSaveDialog:ls,autoSavePromptDialog:Qa,setAutoSavePromptDialog:na,debugDialog:Lo,setDebugDialog:Is,errorDialog:Yo,setErrorDialog:Go,newProjectDialog:eo,setNewProjectDialog:ia,openProjectDialog:cs,setOpenProjectDialog:go,newProjectSetupDialog:Ni,setNewProjectSetupDialog:us,saveAsDialog:lr,setSaveAsDialog:wr,showColorPicker:Nc,setShowColorPicker:xo,transformImagesDialogVisible:Zs,setTransformImagesDialogVisible:ma}=Hl,xl=ow(),[Ac,Mo]=M.useState(!1),[Bs,ds]=M.useState(!1),[to,Pa]=M.useState(!1),[yo,fs]=M.useState(null),[no,Xo]=M.useState(null),[Ki,Ii]=M.useState(null),[Sr,ra]=M.useState(null),[Js,Os]=M.useState(null),{autoSaveEnabled:aa,setAutoSaveEnabled:io,autoSaveInterval:Qs,setAutoSaveInterval:Es,autoSaveDirHandle:el,setAutoSaveDirHandle:yl,autoSaveBaseName:tl,setAutoSaveBaseName:Io,currentProjectFilePath:nl,setCurrentProjectFilePath:hr,projectDirHandle:Ti,setProjectDirHandle:Vr,projectName:Hr,setProjectName:mo,autoSaveFileHistory:Wc,setAutoSaveFileHistory:Fs,currentFileIndex:$c,setCurrentFileIndex:ps,autoSaveIntervalRef:$i,hasChangesSinceLastAutoSaveRef:cr,prevAutoSaveEnabledRef:ba}=xl,Yc=M.useRef(null),Ua=M.useRef(null),zc=M.useRef(null),bo=M.useRef(null),cc=M.useRef(null),il=M.useRef(null),ml=M.useRef(null),[Us,$l]=M.useState(!1),hs=M.useRef(null),bl=M.useRef(null),[vo,vl]=M.useState(!1),[Ko,rl]=M.useState({}),[Pc,oa]=M.useState(!1),Zo=M.useCallback(()=>{const c=or.current;if(!c)return null;const x=c.width-10,N=c.height-10;let B=1/0,re=1/0,ye=-1/0,P=-1/0,ze=!1;if(a){const Me=a,Re=(Me.width||0)/2,$e=(Me.height||0)/2;B=Math.min(B,Me.x-Re),re=Math.min(re,Me.y-$e),ye=Math.max(ye,Me.x+Re),P=Math.max(P,Me.y+$e),ze=!0}if(l){const Me=l,Re=(Me.width||0)/2,$e=(Me.height||0)/2;B=Math.min(B,Me.x-Re),re=Math.min(re,Me.y-$e),ye=Math.max(ye,Me.x+Re),P=Math.max(P,Me.y+$e),ze=!0}if(!ze)return{pcbReferenceX:0,pcbReferenceY:0,x:0,y:0,zoom:1,viewRotation:0,viewFlipX:!1,isBottomView:!1,transparency:0,showTopImage:!0,showBottomImage:!0,showViasLayer:!0,showTopTracesLayer:!0,showBottomTracesLayer:!0,showTopPadsLayer:!0,showBottomPadsLayer:!0,showTopTestPointsLayer:!0,showBottomTestPointsLayer:!0,showTopComponents:!0,showBottomComponents:!0,showPowerLayer:!0,showGroundLayer:!0,showConnectionsLayer:!0};const me=ye-B,De=P-re,Ae=.1,Ne=me*(1+2*Ae),le=De*(1+2*Ae),ge=Ne>0?x/Ne:1,ce=le>0?N/le:1;return{pcbReferenceX:0,pcbReferenceY:0,x:0,y:0,zoom:Math.min(ge,ce,1),viewRotation:0,viewFlipX:!1,isBottomView:!1,transparency:0,showTopImage:!0,showBottomImage:!0,showViasLayer:!0,showTopTracesLayer:!0,showBottomTracesLayer:!0,showTopPadsLayer:!0,showBottomPadsLayer:!0,showTopTestPointsLayer:!0,showBottomTestPointsLayer:!0,showTopComponents:!0,showBottomComponents:!0,showPowerLayer:!0,showGroundLayer:!0,showConnectionsLayer:!0}},[a,l]);Dt.useEffect(()=>{const c=Zo();c&&rl(x=>x[0]?x:{...x,0:c})},[a,l,Zo]);const Zr=M.useRef(null),[wo,Jo]=M.useState(!1),[va,Yl]=M.useState(null),[_c,wl]=M.useState(null),[al,qa]=M.useState({width:960,height:600}),jr=M.useRef(null),Ai=M.useRef(null),So=M.useRef(null),Jr=M.useRef(null),Qo=M.useRef(null),Sl=M.useRef(null),xu=M.useRef(null),ol=M.useRef(null),[Rr,sa]=M.useState(!0),[sl,pa]=M.useState(!0),[yu,jl]=M.useState(!1),[mr,_a]=M.useState(!0),[br,ro]=M.useState(!0),[Qr,Da]=M.useState(!0),[Ra,La]=M.useState(!0),[Zi,Bo]=M.useState(!0),[es,Tl]=M.useState(!0),[gs,Cl]=M.useState(!0),[Bi,Va]=M.useState(!0),[Ma,ao]=M.useState(!0),[jo,f]=M.useState(!0),g=Se,j=Ve,[_,V]=M.useState(!1),[Z,Q]=M.useState(null),[he,be]=M.useState(!1),[je,Ee]=M.useState(void 0),[rt,Te]=M.useState(!1),[He,Ye]=M.useState(!1),[dt,Qe]=M.useState(null),[yt,pt]=M.useState(new Set),bt=M.useCallback(()=>{An(new Set),Cn(new Set),hn(new Set),yn(new Set),pt(new Set)},[An,Cn,hn,yn,pt]),[Nt,fn]=M.useState(!1),[cn,Qn]=M.useState(null),[pn,Ln]=M.useState(!1),[Ci,$n]=M.useState(null),[tn,Ht]=M.useState(!0),[ir,Dn]=M.useState(!1),[si,Ji]=M.useState(!1),ur=M.useRef({}),[dr,mi]=M.useState(!0),[fr,Lr]=M.useState(!0),[Mr,di]=M.useState(!0),[ii,vr]=M.useState(null),[Ui,ha]=M.useState(!1),[Tr,qi]=M.useState(null),[Wr,zi]=M.useState(!1),[Ar,$r]=M.useState(null),[pr,Oi]=M.useState(!1),[wa,Yr]=M.useState(null),[kn,zn]=M.useState([]),[Ei,Ha]=M.useState(!1),[Wa,Sa]=M.useState(null),[ea,ll]=M.useState(!1),[qs,Dc]=M.useState(null),[gr,mu]=M.useState(!1),[Gl,Xl]=M.useState(null),[Vs,Xu]=M.useState(!1),[Rc,Gc]=M.useState(null),[bu,Ir]=M.useState(!1),[Br,kl]=M.useState(!1),[Nl,uc]=M.useState(null),[cl,Hs]=M.useState(!1),[Al,Kl]=M.useState(null),[Xc,Kc]=M.useState(!1),xs=M.useRef(null),Lc=M.useRef(!1),Zl=M.useRef(null),Zc=M.useRef(!1),dc=M.useRef(!1);Dt.useEffect(()=>{xs.current=Nl},[Nl]),Dt.useEffect(()=>{Lc.current=cl},[cl]),Dt.useEffect(()=>{Zl.current=Al},[Al]),Dt.useEffect(()=>{Zc.current=Xc},[Xc]),Dt.useEffect(()=>{dc.current=Br},[Br]);const[Jl,vu]=M.useState(null),[Td,Jc]=M.useState(!1);Dt.useEffect(()=>{bn.length===0&&os([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[bn.length,os]);const ys=M.useCallback((c,x)=>{const N=g.find(re=>re.pointId===c);if(N){const re=x.find(P=>P.id===N.powerBusId);return`Via (${re?re.voltage:N.type||"Power Node"})`}const B=j.find(re=>re.pointId===c);return B?`Via (${B.type||"Ground"})`:"Via"},[g,j]),Ws=M.useCallback((c,x)=>{const N=g.find(re=>re.pointId===c);if(N){const re=x.find(P=>P.id===N.powerBusId);return`Pad (${re?re.voltage:N.type||"Power Node"})`}const B=j.find(re=>re.pointId===c);return B?`Pad (${B.type||"Ground"})`:"Pad"},[g,j]),oo=M.useCallback((c,x)=>{const N=g.find(re=>re.pointId===c);if(N){const re=x.find(P=>P.id===N.powerBusId);return`Test Point (${re?re.voltage:N.type||"Power Node"})`}const B=j.find(re=>re.pointId===c);return B?`Test Point (${B.type||"Ground"})`:"Test Point"},[g,j]),wu=M.useCallback(()=>{const c=Xe.filter(x=>x.type==="via").map(x=>x.id);An(new Set(c)),Cn(new Set),hn(new Set),yn(new Set),pt(new Set)},[Xe,An,Cn,hn,yn]),Qc=M.useCallback(()=>{const c=Xe.filter(x=>x.type==="trace").map(x=>x.id);An(new Set(c)),Cn(new Set),hn(new Set),yn(new Set),pt(new Set)},[Xe,An,Cn,hn,yn]),ul=M.useCallback(()=>{const c=Xe.filter(x=>x.type==="pad").map(x=>x.id);An(new Set(c)),Cn(new Set),hn(new Set),yn(new Set),pt(new Set)},[Xe,An,Cn,hn,yn]),zl=M.useCallback(()=>{const c=[...Jt,...on].map(x=>x.id);Cn(new Set(c)),An(new Set),hn(new Set),yn(new Set),pt(new Set)},[Jt,on,Cn,An,hn,yn]),Pl=M.useCallback(()=>{const c=[...Jt,...on].filter(x=>{const N=x.pinConnections||[];return!(N.length>0&&N.length===x.pinCount&&N.every(re=>re&&re.trim()!==""))}).map(x=>x.id);Cn(new Set(c)),An(new Set),hn(new Set),yn(new Set),pt(new Set),Is({visible:!0,text:""})},[Jt,on,Cn,An,hn,yn,Is]),Su=M.useCallback(()=>{const c=new Set;let x=0;for(const N of[...Jt,...on]){const B=N.pinConnections||[];for(const re of B)if(re&&re.trim()!==""){const ye=parseInt(re.trim(),10);if(!isNaN(ye)&&ye>0){const P=`${N.id}:${ye}`;c.add(P),x++}}}if(console.log(`Component connections: ${x} connection lines found`),c.size===0){console.log("No component connections found - components may not have pins connected"),alert("No component connections found. Please connect component pins to vias or pads first.");return}pt(c),An(new Set),Cn(new Set),hn(new Set),yn(new Set),console.log(`Selected ${c.size} component connection lines`)},[Jt,on,An,Cn,hn,yn]),eu=M.useCallback(()=>{to?(Hi(!1),Pa(!1),y(0)):(Hi(!0),Pa(!0),y(100))},[to,Hi,Pa,y]),Ql=M.useCallback(c=>{On(x=>w0(x,c))},[On]),$s=M.useCallback((c,x)=>{const N=or.current;if(!N)return;const B=N.width-10,re=N.height-10,ye=B/2,P=re/2,ze=ye-c*Ke,me=P-x*Ke;rs({x:ze,y:me})},[Ke,rs]),fc=M.useCallback((c,x,N)=>{$s(x,N),Cn(new Set([c])),An(new Set),hn(new Set),yn(new Set),pt(new Set)},[$s,Cn,An,hn,yn]),Mc=M.useCallback((c,x,N)=>{$s(x,N),An(new Set([c])),Cn(new Set),hn(new Set),yn(new Set),pt(new Set)},[$s,An,Cn,hn,yn]),Vf=M.useCallback((c,x,N)=>{$s(x,N),hn(new Set([c])),An(new Set),Cn(new Set),yn(new Set),pt(new Set)},[$s,hn,An,Cn,yn]),of=M.useCallback((c,x,N)=>{$s(x,N),yn(new Set([c])),An(new Set),Cn(new Set),hn(new Set),pt(new Set)},[$s,yn,An,Cn,hn]),oh=M.useCallback((c,x,N)=>{$s(x,N),An(new Set([c])),Cn(new Set),hn(new Set),yn(new Set),pt(new Set)},[$s,An,Cn,hn,yn]),Hf=Dt.useMemo(()=>{const c=new Set(g.map(N=>N.powerBusId).filter(N=>typeof N=="string"&&N.length>0)),x=bn.filter(N=>c.has(N.id)).map(N=>N.name);return Array.from(new Set(x)).sort()},[g,bn]),Wf=Dt.useMemo(()=>{const c=new Set(j.map(N=>N.groundBusId).filter(N=>typeof N=="string"&&N.length>0)),x=S.filter(N=>c.has(N.id)).map(N=>N.name);return Array.from(new Set(x)).sort()},[j,S]),$f=M.useCallback(()=>{const c=g.map(x=>x.id);hn(new Set(c)),An(new Set),Cn(new Set),yn(new Set),pt(new Set)},[g,hn,An,Cn,yn]),Yf=M.useCallback(()=>{const c=j.map(x=>x.id);yn(new Set(c)),An(new Set),Cn(new Set),hn(new Set),pt(new Set)},[j,yn,An,Cn,hn]),Gf=M.useCallback(c=>{const x=bn.filter(B=>B.name===c).map(B=>B.id);if(x.length===0)return;const N=g.filter(B=>B.powerBusId&&x.includes(B.powerBusId)).map(B=>B.id);hn(new Set(N)),An(new Set),Cn(new Set),yn(new Set)},[bn,g,hn,An,Cn,yn]),sf=M.useCallback(c=>{const x=S.filter(B=>B.name===c).map(B=>B.id);if(x.length===0)return;const N=j.filter(B=>B.groundBusId&&x.includes(B.groundBusId)).map(B=>B.id);yn(new Set(N)),An(new Set),Cn(new Set),hn(new Set)},[S,j,yn,An,Cn,hn]);M.useCallback(c=>{switch(c.componentType){case"Resistor":case"ResistorNetwork":case"Thermistor":case"VariableResistor":if("resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit)return`${c.resistance} ${c.resistanceUnit}`;break;case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":if("capacitance"in c&&c.capacitance&&"capacitanceUnit"in c&&c.capacitanceUnit)return`${c.capacitance} ${c.capacitanceUnit}`;break;case"Inductor":if("inductance"in c&&c.inductance&&"inductanceUnit"in c&&c.inductanceUnit)return`${c.inductance} ${c.inductanceUnit}`;break;case"Battery":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"Diode":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"Fuse":if("current"in c&&c.current&&"currentUnit"in c&&c.currentUnit)return`${c.current} ${c.currentUnit}`;break;case"FerriteBead":if("impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit)return`${c.impedance} ${c.impedanceUnit}`;break;case"Relay":if("coilVoltage"in c&&c.coilVoltage&&"coilVoltageUnit"in c&&c.coilVoltageUnit)return`${c.coilVoltage} ${c.coilVoltageUnit}`;break;case"Speaker":if("impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit)return`${c.impedance} ${c.impedanceUnit}`;break;case"Motor":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"PowerSupply":if("outputVoltage"in c&&c.outputVoltage&&"outputVoltageUnit"in c&&c.outputVoltageUnit)return`${c.outputVoltage} ${c.outputVoltageUnit}`;break;case"Transistor":if("partNumber"in c&&c.partNumber)return c.partNumber;break;case"IntegratedCircuit":if("partNumber"in c&&c.partNumber)return c.partNumber;break}return null},[]);const Xf=M.useCallback(c=>{const x=[];switch(c.componentType){case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":"capacitance"in c&&c.capacitance&&"capacitanceUnit"in c&&c.capacitanceUnit&&x.push(`Capacitance: ${c.capacitance} ${c.capacitanceUnit}`),"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&x.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"dielectric"in c&&c.dielectric&&x.push(`Dielectric: ${c.dielectric}`);break;case"Resistor":case"ResistorNetwork":case"Thermistor":"resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit&&x.push(`Resistance: ${c.resistance} ${c.resistanceUnit}`),"power"in c&&c.power&&x.push(`Power: ${c.power}`),"tolerance"in c&&c.tolerance&&x.push(`Tolerance: ${c.tolerance}`);break;case"VariableResistor":"resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit&&x.push(`Resistance: ${c.resistance} ${c.resistanceUnit}`),"vrType"in c&&c.vrType&&x.push(`Type: ${c.vrType}`),"power"in c&&c.power&&x.push(`Power: ${c.power}`),"taper"in c&&c.taper&&x.push(`Taper: ${c.taper}`);break;case"Inductor":"inductance"in c&&c.inductance&&"inductanceUnit"in c&&c.inductanceUnit&&x.push(`Inductance: ${c.inductance} ${c.inductanceUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&x.push(`Current: ${c.current} ${c.currentUnit}`),"tolerance"in c&&c.tolerance&&x.push(`Tolerance: ${c.tolerance}`);break;case"Battery":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&x.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"capacity"in c&&c.capacity&&"capacityUnit"in c&&c.capacityUnit&&x.push(`Capacity: ${c.capacity} ${c.capacityUnit}`);break;case"Diode":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&x.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&x.push(`Current: ${c.current} ${c.currentUnit}`);break;case"Fuse":"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&x.push(`Current: ${c.current} ${c.currentUnit}`),"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&x.push(`Voltage: ${c.voltage} ${c.voltageUnit}`);break;case"FerriteBead":"impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit&&x.push(`Impedance: ${c.impedance} ${c.impedanceUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&x.push(`Current: ${c.current} ${c.currentUnit}`);break;case"Relay":"coilVoltage"in c&&c.coilVoltage&&"coilVoltageUnit"in c&&c.coilVoltageUnit&&x.push(`Coil Voltage: ${c.coilVoltage} ${c.coilVoltageUnit}`),"contactRating"in c&&c.contactRating&&x.push(`Contact Rating: ${c.contactRating}`);break;case"Speaker":"impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit&&x.push(`Impedance: ${c.impedance} ${c.impedanceUnit}`),"power"in c&&c.power&&x.push(`Power: ${c.power}`);break;case"Motor":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&x.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"speed"in c&&c.speed&&"speedUnit"in c&&c.speedUnit&&x.push(`Speed: ${c.speed} ${c.speedUnit}`);break;case"PowerSupply":"outputVoltage"in c&&c.outputVoltage&&"outputVoltageUnit"in c&&c.outputVoltageUnit&&x.push(`Output Voltage: ${c.outputVoltage} ${c.outputVoltageUnit}`),"outputCurrent"in c&&c.outputCurrent&&"outputCurrentUnit"in c&&c.outputCurrentUnit&&x.push(`Output Current: ${c.outputCurrent} ${c.outputCurrentUnit}`);break;case"Transistor":"partNumber"in c&&c.partNumber&&x.push(`Part Number: ${c.partNumber}`),"transistorType"in c&&c.transistorType&&x.push(`Type: ${c.transistorType}`);break;case"Crystal":"frequency"in c&&c.frequency&&x.push(`Frequency: ${c.frequency}`),"loadCapacitance"in c&&c.loadCapacitance&&x.push(`Load Capacitance: ${c.loadCapacitance}`),"tolerance"in c&&c.tolerance&&x.push(`Tolerance: ${c.tolerance}`);break;case"VacuumTube":"tubeType"in c&&c.tubeType&&x.push(`Tube Type: ${c.tubeType}`),"partNumber"in c&&c.partNumber&&x.push(`Part Number: ${c.partNumber}`);break}return x},[]),[ju,Ic]=M.useState(!1),tu=M.useRef(null),[Ku,Zu]=M.useState(!1),[Ju,Tu]=M.useState(!1),Cu=M.useRef(null),nu=M.useRef(null),Qu=M.useRef(null),ed=M.useRef(null),[sh,lf]=M.useState(!1),[_l,iu]=M.useState(null),[cf,Cd]=M.useState(null),[pc,Kf]=M.useState(null),ru=Dt.useRef(null),uf=Dt.useRef(null),td=Dt.useRef(null),nd=M.useRef(null),ku=M.useRef(null),Nu=M.useRef(null),Zf=M.useRef(null),kd=M.useRef(null),hc=M.useRef(null),[Jf,Qf]=M.useState(null),[ms,Nd]=M.useState(null),[Dl,Ad]=M.useState(!1),[au,df]=M.useState(null),[Bc,id]=M.useState(null);Dt.useEffect(()=>{uf.current=pc},[pc]),Dt.useEffect(()=>{td.current=_l},[_l]);const ja=M.useCallback(async(c,x)=>{if(!x)throw new Error("No project directory available. Please create or open a project before loading images. The project directory is needed to store image files.");try{let N;try{N=await x.getDirectoryHandle("images",{create:!0})}catch(ye){throw new Error(`Failed to create images directory in project folder. This may be due to insufficient permissions. Please ensure you have write access to the project directory. Error details: ${ye.message}`)}const B=c.name,re=`images/${B}`;try{const P=await(await N.getFileHandle(B,{create:!0})).createWritable();return await P.write(c),await P.close(),console.log(`Image copied to project directory: ${re}`),re}catch(ye){throw new Error(`Failed to copy image file "${B}" to project images directory. The file may be locked by another application, or there may be insufficient disk space. Please try again or check your disk space. Error details: ${ye.message}`)}}catch(N){throw N instanceof Error&&N.message.includes("No project directory")||N instanceof Error&&N.message.includes("Failed to")?N:new Error(`An unexpected error occurred while copying the image to the project directory. This may be due to file system permissions or disk space issues. Please try again. Technical details: ${N.message}`)}},[]),so=M.useCallback(async(c,x)=>{try{const N=c.name.toLowerCase(),re=[".png",".jpg",".jpeg"].some(ce=>N.endsWith(ce)),P=["image/png","image/jpeg","image/jpg"].includes(c.type);if(!re&&!P){alert(`Error: Unsupported image format.

The software only accepts PNG and JPEG image files.

File selected: ${c.name}
File type: ${c.type||"unknown"}

Please select a .png, .jpg, or .jpeg image file.`);return}let ze;if(Ti)try{ze=await ja(c,Ti)}catch(ce){const de=ce instanceof Error?ce.message:"Unknown error occurred while copying image to project directory.";alert(`Error: ${de}

The image could not be loaded. Please ensure you have a project open and have write permissions to the project directory.`);return}else{if(!confirm(`Warning: No project directory is currently open. The image will be loaded, but you must create or open a project and save it before the image will be stored in the project directory.

Do you want to continue loading the ${x==="top"?"top":"bottom"} image?`))return;ze=c.name}const me=await createImageBitmap(c),De=URL.createObjectURL(c),Ae=or.current;let Ne=0,le=0;Ae&&(Ne=Gn.x,le=Gn.y);const ge={url:De,name:c.name,width:me.width,height:me.height,filePath:ze,x:Ne,y:le,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:me};x==="top"?s(ge):d(ge)}catch(N){const B=N instanceof Error?N.message:"Unknown error occurred while loading the image.";alert(`Error: Failed to load image file "${c.name}".

${B}

Please ensure the file is a valid image format (PNG, JPEG, etc.) and is not corrupted.`),console.error("Failed to load image",N)}},[Gn,Ke,Ti,ja]),ep=M.useCallback(c=>{c.stopPropagation(),c.preventDefault();const x=or.current;if(!x)return;document.activeElement!==x&&x.focus();const N=x.getBoundingClientRect(),B=x.width/N.width,re=x.height/N.height,ye=c.nativeEvent.offsetX,P=c.nativeEvent.offsetY,ze=typeof ye=="number"?ye:c.clientX-N.left,me=typeof P=="number"?P:c.clientY-N.top,De=ze*B,Ae=me*re,Ne=De-5,le=Ae-5,ge=_f(Ne,le,nr,Ke,$t,En),ce=ge.x,de=ge.y;if(Lc.current&&z==="select"){Kc(!0),Kl({start:{x:ce,y:de},end:{x:ce,y:de}});return}if(z==="center"){oa(!0),Zr.current&&clearTimeout(Zr.current),Zr.current=setTimeout(()=>{oa(!1),w("select"),Ea(void 0)},2e3);return}if(z==="select"){if(Kr){let Ue=1/0,ct=null,ft=null;const zt=Math.max(6/Ke,4),Tn=[...Jt,...on].find(Yn=>Yn.id===Kr.componentId)?.layer||"top";for(const Yn of Xe)if((Yn.type==="via"||Yn.type==="pad")&&Yn.points.length>0){if(Yn.type==="pad"&&(Yn.layer||"top")!==Tn)continue;const Mn=Yn.points[0],Un=Math.max(1,Yn.size/2),ei=Math.hypot(Mn.x-ce,Mn.y-de),rn=Math.max(Un,zt);ei<=rn&&ei<Ue&&(Ue=ei,ct=Mn.id??null,ft=Yn)}if(ft?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${ft.id}`),console.log(`  Point ID: ${ct}`),console.log(`  Point coordinates: x=${ft.points[0].x.toFixed(2)}, y=${ft.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${ce.toFixed(2)}, y=${de.toFixed(2)}`),console.log(`  Distance: ${Ue.toFixed(2)}`),console.log(`  Via size: ${ft.size}, radius: ${Math.max(1,ft.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${ce.toFixed(2)}, y=${de.toFixed(2)}`),console.log(`  Hit tolerance: ${zt.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${Xe.filter(Yn=>Yn.type==="via").length}`)),ct!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${ct} (type: ${typeof ct})`);const Yn=String(ct),Mn=Kr.pinIndex,Un=Kr.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${Mn} (Pin ${Mn+1}) of component ${Un} to point ID ${Yn}`);const ei=Jt.find(Lt=>Lt.id===Un),rn=on.find(Lt=>Lt.id===Un);ei?(console.log("Component found in TOP layer"),_i(Lt=>{const wn=Lt.find(Jn=>Jn.id===Un);if(!wn)return console.error(`Component ${Un} not found in TOP layer during update!`),Lt;console.log("BEFORE update: pinConnections =",wn.pinConnections);const Ri=wn.pinConnections||[],Or=Ri.length>0?[...Ri]:new Array(wn.pinCount).fill("");let kr;if(Or.length!==wn.pinCount){kr=new Array(wn.pinCount).fill("");for(let Jn=0;Jn<Math.min(Or.length,wn.pinCount);Jn++)kr[Jn]=Or[Jn]||""}else kr=[...Or];kr[Mn]=Yn,console.log(`Updating pin ${Mn} with value: ${Yn}`),console.log("New pinConnections array:",kr);const Ta=Lt.map(Jn=>Jn.id===Un?{...Jn,pinConnections:kr}:Jn),ta=Ta.find(Jn=>Jn.id===Un);return console.log("AFTER update: pinConnections =",ta?.pinConnections),console.log(`Pin ${Mn} value: ${ta?.pinConnections[Mn]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),Ta})):rn?(console.log("Component found in BOTTOM layer"),Xn(Lt=>{const wn=Lt.find(Jn=>Jn.id===Un);if(!wn)return console.error(`Component ${Un} not found in BOTTOM layer during update!`),Lt;console.log("BEFORE update: pinConnections =",wn.pinConnections);const Ri=wn.pinConnections||[],Or=Ri.length>0?[...Ri]:new Array(wn.pinCount).fill("");let kr;if(Or.length!==wn.pinCount){kr=new Array(wn.pinCount).fill("");for(let Jn=0;Jn<Math.min(Or.length,wn.pinCount);Jn++)kr[Jn]=Or[Jn]||""}else kr=[...Or];kr[Mn]=Yn,console.log(`Updating pin ${Mn} with value: ${Yn}`),console.log("New pinConnections array:",kr);const Ta=Lt.map(Jn=>Jn.id===Un?{...Jn,pinConnections:kr}:Jn),ta=Ta.find(Jn=>Jn.id===Un);return console.log("AFTER update: pinConnections =",ta?.pinConnections),console.log(`Pin ${Mn} value: ${ta?.pinConnections[Mn]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),Ta})):(console.error(`Component ${Un} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",Jt.map(Lt=>Lt.id)),console.log("Available BOTTOM components:",on.map(Lt=>Lt.id))),setTimeout(()=>{Ds(null)},0);return}else Ds(null)}const Me=10,Re=(()=>{for(const Ue of Jt)if(ce>=Ue.x-Me&&ce<=Ue.x+Me&&de>=Ue.y-Me&&de<=Ue.y+Me)return{layer:"top",comp:Ue};for(const Ue of on)if(ce>=Ue.x-Me&&ce<=Ue.x+Me&&de>=Ue.y-Me&&de<=Ue.y+Me)return{layer:"bottom",comp:Ue};return null})();if(Re){const{comp:Ue}=Re;c.shiftKey?Cn(ct=>{const ft=new Set(ct);return ft.has(Ue.id)?ft.delete(Ue.id):ft.add(Ue.id),ft}):(Cn(new Set([Ue.id])),An(new Set),hn(new Set),yn(new Set));return}const $e=Math.max(6/Ke,4);let ht=null;for(const Ue of g){const ct=Math.max(6,Ue.size/2),ft=ct*.8,zt=ct+ft,nn=Math.hypot(Ue.x-ce,Ue.y-de),Tn=Math.abs(ce-Ue.x)<=$e&&Math.abs(de-Ue.y)<=zt,Yn=Math.abs(de-Ue.y)<=$e&&Math.abs(ce-Ue.x)<=zt;if(nn<=Math.max(ct,$e)||Tn||Yn){ht=Ue;break}}if(ht){c.shiftKey?hn(Ue=>{const ct=new Set(Ue);return ct.has(ht.id)?ct.delete(ht.id):ct.add(ht.id),ct}):(hn(new Set([ht.id])),An(new Set),Cn(new Set),yn(new Set));return}let mt=null;for(const Ue of j){const ct=Math.max(6,(Ue.size||18)/2),ft=ct*.8,zt=ct+ft,nn=Math.hypot(Ue.x-ce,Ue.y-de),Tn=Math.abs(ce-Ue.x)<=$e&&Math.abs(de-Ue.y)<=zt,Yn=Math.abs(de-Ue.y)<=$e&&Math.abs(ce-Ue.x)<=zt;if(nn<=Math.max(ct,$e)||Tn||Yn){mt=Ue;break}}if(mt){c.shiftKey?yn(Ue=>{const ct=new Set(Ue);return ct.has(mt.id)?ct.delete(mt.id):ct.add(mt.id),ct}):(yn(new Set([mt.id])),An(new Set),Cn(new Set),hn(new Set));return}const tt=Math.max(6/Ke,4/Ke),We=Math.max(tt,.5);let Ge=null;for(const Ue of Xe)if((Ue.type==="via"||Ue.type==="pad"||Ue.type==="testPoint")&&Ue.points.length>0){let ct=!1;if(Ue.type==="via"?ct=mr:Ue.type==="pad"?ct=(Ue.layer||"top")==="top"?Ra:Zi:Ue.type==="testPoint"&&(ct=(Ue.layer||"top")==="top"?es:gs),!ct)continue;const ft=Ue.points[0],zt=Math.max(1,Ue.size/2);if(Math.hypot(ft.x-ce,ft.y-de)<=Math.max(zt,We)){Ge=Ue;break}}if(Ge){c.shiftKey?An(Ue=>{const ct=new Set(Ue);return ct.has(Ge.id)?ct.delete(Ge.id):ct.add(Ge.id),ct}):(An(new Set([Ge.id])),Cn(new Set),hn(new Set),yn(new Set),pt(new Set));return}c.shiftKey||(An(new Set),Cn(new Set),hn(new Set),yn(new Set),pt(new Set)),Za(!0),df({x:ce,y:de,shiftKey:c.shiftKey}),id({x:ce,y:de,width:0,height:0});return}else if(z==="magnify"){const Me=c.shiftKey?.5:2,Re=Math.max(.25,Math.min(8,Ke*Me));No(ce,de),Vt(Re);return}else if(z==="pan"){const Me={topImageX:a?.x??0,topImageY:a?.y??0,bottomImageX:l?.x??0,bottomImageY:l?.y??0,componentsTop:Object.fromEntries(Jt.map(Re=>[Re.id,{x:Re.x,y:Re.y}])),componentsBottom:Object.fromEntries(on.map(Re=>[Re.id,{x:Re.x,y:Re.y}])),powerSymbols:Object.fromEntries(Se.map(Re=>[Re.id,{x:Re.x,y:Re.y}])),groundSymbols:Object.fromEntries(Ve.map(Re=>[Re.id,{x:Re.x,y:Re.y}])),drawingStrokes:Xe.map(Re=>({points:Re.points.map($e=>({x:$e.x,y:$e.y}))})),vias:Fa.map(Re=>({x:Re.x,y:Re.y})),pads:Mt.map(Re=>({x:Re.x,y:Re.y}))};hs.current={startCX:Ne,startCY:le,panX:nr.x,panY:nr.y,objectStartPositions:Me},bl.current={startClientX:c.clientX,startClientY:c.clientY,panX:nr.x,panY:nr.y,objectStartPositions:Me},$l(!0);return}else if(z==="draw"){const Me=(ht,mt)=>{let Tt=1/0,tt=null;const We=10/Ke,Ge=Ke>20?Math.max(We,1e-4):Ke>10?Math.max(We,.001):Math.max(We,.01);for(const ft of Xe)if(ft.type==="via"){const zt=ft.points[0],nn=Math.hypot(zt.x-ht,zt.y-mt);nn<=Ge&&nn<Tt&&(Tt=nn,tt=zt)}else if(ft.type==="pad"){const zt=ft.points[0],nn=Math.hypot(zt.x-ht,zt.y-mt);nn<=Ge&&nn<Tt&&(Tt=nn,tt=zt)}for(const ft of g)if(ft.pointId!==void 0){const zt=Math.hypot(ft.x-ht,ft.y-mt);zt<=Ge&&zt<Tt&&(Tt=zt,tt={x:ft.x,y:ft.y,id:ft.pointId})}for(const ft of j)if(ft.pointId!==void 0){const zt=Math.hypot(ft.x-ht,ft.y-mt);zt<=Ge&&zt<Tt&&(Tt=zt,tt={x:ft.x,y:ft.y,id:ft.pointId})}const ct=rr(tt??{x:ht,y:mt});return{x:ct.x,y:ct.y,nodeId:tt?.id}};if(it==="via"){const ht=Bn.get("via"),mt=ht.color,Tt=ht.size,Yt=Dl?{x:rr({x:ce,y:de}).x,y:rr({x:ce,y:de}).y}:((ft,zt)=>{let nn=1/0,Tn=null;const Mn=10/Ke,Un=Ke>10?Math.max(Mn,.001):Math.max(Mn,.01);for(const Lt of Xe)if(Lt.type==="via"||Lt.type==="pad"){const wn=Lt.points[0],Ri=Math.hypot(wn.x-ft,wn.y-zt);Ri<=Un&&Ri<nn&&(nn=Ri,Tn=wn)}for(const Lt of g)if(Lt.pointId!==void 0){const wn=Math.hypot(Lt.x-ft,Lt.y-zt);wn<=Un&&wn<nn&&(nn=wn,Tn={x:Lt.x,y:Lt.y,id:Lt.pointId})}for(const Lt of j)if(Lt.pointId!==void 0){const wn=Math.hypot(Lt.x-ft,Lt.y-zt);wn<=Un&&wn<nn&&(nn=wn,Tn={x:Lt.x,y:Lt.y,id:Lt.pointId})}const rn=rr(Tn??{x:ft,y:zt});return{x:rn.x,y:rn.y,nodeId:Tn?.id}})(ce,de),We=Yt.nodeId??vc(),Ge=ys(We,bn),Ue={id:We,x:Yt.x,y:Yt.y};vn(Xe,Jt,on,Se,Ve);const ct={id:`${Date.now()}-via`,points:[Ue],color:mt,size:Tt,layer:Bt,type:"via",viaType:Ge};et(ft=>[...ft,ct]),Bt==="top"?Na(ft=>[...ft,ct.id]):hl(ft=>[...ft,ct.id]);return}if(it==="pad"){if(!bi)return;const mt=Dl?{x:rr({x:ce,y:de}).x,y:rr({x:ce,y:de}).y}:((ct,ft)=>{let zt=1/0,nn=null;const Yn=10/Ke,Mn=Ke>10?Math.max(Yn,.001):Math.max(Yn,.01);for(const rn of Xe)if(rn.type==="via"||rn.type==="pad"||rn.type==="testPoint"){const Lt=rn.points[0],wn=Math.hypot(Lt.x-ct,Lt.y-ft);wn<=Mn&&wn<zt&&(zt=wn,nn=Lt)}for(const rn of g)if(rn.pointId!==void 0){const Lt=Math.hypot(rn.x-ct,rn.y-ft);Lt<=Mn&&Lt<zt&&(zt=Lt,nn={x:rn.x,y:rn.y,id:rn.pointId})}for(const rn of j)if(rn.pointId!==void 0){const Lt=Math.hypot(rn.x-ct,rn.y-ft);Lt<=Mn&&Lt<zt&&(zt=Lt,nn={x:rn.x,y:rn.y,id:rn.pointId})}const ei=rr(nn??{x:ct,y:ft});return{x:ei.x,y:ei.y,nodeId:nn?.id}})(ce,de),Tt=mt.nodeId??vc(),tt=Ws(Tt,bn),Yt=J||(bi==="top"?ve:Ce),We=oe||(bi==="top"?k:W),Ge={id:Tt,x:mt.x,y:mt.y};vn(Xe,Jt,on,Se,Ve);const Ue={id:`${Date.now()}-pad`,points:[Ge],color:Yt,size:We,layer:bi,type:"pad",padType:tt};et(ct=>[...ct,Ue]);return}if(it==="testPoint"){if(!Fn)return;const mt=Dl?{x:rr({x:ce,y:de}).x,y:rr({x:ce,y:de}).y}:((ft,zt)=>{let nn=1/0,Tn=null;const Yn=15;for(const ei of Xe)if(ei.type==="via"||ei.type==="pad"||ei.type==="testPoint"){const rn=ei.points[0],Lt=Math.hypot(rn.x-ft,rn.y-zt);Lt<=Yn&&Lt<nn&&(nn=Lt,Tn=rn)}for(const ei of g)if(ei.pointId!==void 0){const rn=Math.hypot(ei.x-ft,ei.y-zt);rn<=Yn&&rn<nn&&(nn=rn,Tn={x:ei.x,y:ei.y,id:ei.pointId})}for(const ei of j)if(ei.pointId!==void 0){const rn=Math.hypot(ei.x-ft,ei.y-zt);rn<=Yn&&rn<nn&&(nn=rn,Tn={x:ei.x,y:ei.y,id:ei.pointId})}const Un=rr(Tn??{x:ft,y:zt});return{x:Un.x,y:Un.y,nodeId:Tn?.id}})(ce,de),Tt=mt.nodeId??vc(),tt=oo(Tt,bn),Yt=tt.includes("Power")?"power":tt.includes("Ground")?"ground":tt.includes("Signal")?"signal":"unknown",We=rr({x:mt.x,y:mt.y}),Ge=J||(Fn==="top"?te:ee),Ue=oe||(Fn==="top"?_e:nt);vn(Xe,Jt,on,Se,Ve);const ct={id:`${Date.now()}-testPoint`,points:[{id:Tt,x:We.x,y:We.y}],color:Ge,size:Ue,layer:Fn,type:"testPoint",testPointType:Yt};et(ft=>[...ft,ct]);return}if(Nn.current)return;const Re=it==="trace"&&!Dl?Me(ce,de):{x:rr({x:ce,y:de}).x,y:rr({x:ce,y:de}).y},$e=Re.nodeId!==void 0?{id:Re.nodeId,x:Re.x,y:Re.y}:{x:Re.x,y:Re.y};Ut(ht=>ht.length===0?[$e]:[...ht,$e]),ti.current=Date.now(),Xt(null),St(!1),co(!1)}else if(z==="erase"){if(Xe.some(Re=>Re.layer===Bt&&(Re.type==="via"&&Mi||Re.type==="pad"&&sr||Re.type==="testPoint"&&ya||Re.type==="trace"&&da))){const Re=[];Mi&&Xe.some($e=>$e.layer===Bt&&$e.type==="via")&&Re.push("vias"),sr&&Xe.some($e=>$e.layer===Bt&&$e.type==="pad")&&Re.push("pads"),ya&&Xe.some($e=>$e.layer===Bt&&$e.type==="testPoint")&&Re.push("test points"),da&&Xe.some($e=>$e.layer===Bt&&$e.type==="trace")&&Re.push("traces"),Re.length>0&&alert(`Cannot erase: ${Re.join(", ")} are locked on the ${Bt} layer. Unlock them to erase.`)}St(!0),Ut([{id:vc(),x:ce,y:de}]),console.log("Starting erase at:",ce,de,"selectedDrawingLayer:",Bt,"total strokes:",Xe.length)}else if(z==="transform"&&Ot){if(Di){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}er(!0),Ft({x:ce,y:de})}else if(z==="component"){if(!td.current)return;const Me=rr({x:ce,y:de}),$e=(Ao.current||"top")==="top"?"componentTop":"componentBottom",ht=Bn.get($e),mt=ht.color,Tt=ht.size,tt=[...Jt,...on];let Yt;if(ir?Yt=Df():Yt={...ur.current},!Ao.current)return;const We=uf.current?.dataDrivenDefinition;if(!We){console.error("[Component Creation] Missing dataDrivenDefinition metadata for selected component.");return}let Ge;try{Ge=f2({definition:We,layer:Ao.current,x:Me.x,y:Me.y,color:mt,size:Tt,existingComponents:tt,counters:tn?Yt:{}})}catch(Ue){console.error("[Component Creation] Error creating component with v2 runtime:",Ue);return}if(Ge.abbreviation=b0(td.current),tn&&Ge.designator){const Ue=Ge.designator.match(/^([A-Za-z]+)(\d+)$/);if(Ue){const ct=Ue[1],ft=parseInt(Ue[2],10);if(ir){const zt=Df();u1(ct,ft,zt)}else ur.current[ct]=Math.max(ur.current[ct]||0,ft)}}vn(Xe,Jt,on,Se,Ve),Ao.current==="top"?(Va(!0),_i(Ue=>[...Ue,Ge])):(ao(!0),Xn(Ue=>[...Ue,Ge]));return}else if(z==="power"){if(!dt)return;const Re=Dl?{x:rr({x:ce,y:de}).x,y:rr({x:ce,y:de}).y}:((ht,mt)=>{let Tt=1/0,tt=null;const We=10/Ke,Ge=Ke>20?Math.max(We,1e-4):Ke>10?Math.max(We,.001):Math.max(We,.01);for(const ft of Xe)if(ft.type==="via"||ft.type==="pad"){const zt=ft.points[0],nn=Math.hypot(zt.x-ht,zt.y-mt);nn<=Ge&&nn<Tt&&(Tt=nn,tt=zt)}else if(ft.type==="trace")for(const zt of ft.points){const nn=Math.hypot(zt.x-ht,zt.y-mt);nn<=Ge&&nn<Tt&&(Tt=nn,tt=zt)}const ct=rr(tt??{x:ht,y:mt});return{x:ct.x,y:ct.y,nodeId:tt?.id}})(ce,de),$e=bn.find(ht=>ht.id===dt);if($e){const ht=Re.nodeId??vc(),mt=`${$e.voltage} Power Node`;if(j.find(Yt=>Yt.pointId===ht)){Go({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${ht}). Power and ground nodes cannot share the same Node ID.`});return}vn(Xe,Jt,on,Se,Ve);const tt={id:`power-${Date.now()}-${Math.random()}`,x:Re.x,y:Re.y,color:"#ff0000",size:oe,powerBusId:$e.id,layer:Bt,type:mt,pointId:ht};if(Be(Yt=>[...Yt,tt]),Re.nodeId!==void 0){const Yt=ys(Re.nodeId,bn),We=Ws(Re.nodeId,bn),Ge=oo(Re.nodeId,bn),Ue=Ge.includes("Power")?"power":Ge.includes("Ground")?"ground":Ge.includes("Signal")?"signal":"unknown";et(ct=>ct.map(ft=>ft.type==="via"&&ft.points.length>0&&ft.points[0].id===Re.nodeId?{...ft,viaType:Yt}:ft.type==="pad"&&ft.points.length>0&&ft.points[0].id===Re.nodeId?{...ft,padType:We}:ft.type==="testPoint"&&ft.points.length>0&&ft.points[0].id===Re.nodeId?{...ft,testPointType:Ue}:ft))}}return}else if(z==="ground"){if(Ci===null){if(S.length===0){Go({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}Ln(!0);return}const Me=S.find(Re=>Re.id===Ci);if(Me){const $e=Dl?{x:rr({x:ce,y:de}).x,y:rr({x:ce,y:de}).y}:((Yt,We)=>{let Ge=1/0,Ue=null;const ft=10/Ke,zt=Ke>20?Math.max(ft,1e-4):Ke>10?Math.max(ft,.001):Math.max(ft,.01);for(const Yn of Xe)if(Yn.type==="via"||Yn.type==="pad"){const Mn=Yn.points[0],Un=Math.hypot(Mn.x-Yt,Mn.y-We);Un<=zt&&Un<Ge&&(Ge=Un,Ue=Mn)}else if(Yn.type==="trace")for(const Mn of Yn.points){const Un=Math.hypot(Mn.x-Yt,Mn.y-We);Un<=zt&&Un<Ge&&(Ge=Un,Ue=Mn)}const Tn=rr(Ue??{x:Yt,y:We});return{x:Tn.x,y:Tn.y,nodeId:Ue?.id}})(ce,de),ht=$e.nodeId??vc(),mt=`${Me.name} Ground Node`,Tt=g.find(Yt=>Yt.pointId===ht);if(Tt){Go({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${Tt.type||"Power Node"}) already exists at this Node ID (${ht}). Power and ground nodes cannot share the same Node ID.`});return}vn(Xe,Jt,on,Se,Ve);const tt={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:$e.x,y:$e.y,color:Me.color,size:oe||Wn.get("ground")?.settings.size||18,groundBusId:Me.id,layer:Bt,type:mt,pointId:ht};if(ut(Yt=>[...Yt,tt]),$e.nodeId!==void 0){const Yt=ys($e.nodeId,bn),We=Ws($e.nodeId,bn);et(Ge=>Ge.map(Ue=>Ue.type==="via"&&Ue.points.length>0&&Ue.points[0].id===$e.nodeId?{...Ue,viaType:Yt}:Ue.type==="pad"&&Ue.points.length>0&&Ue.points[0].id===$e.nodeId?{...Ue,padType:We}:Ue))}}return}},[z,Ot,oe,J,it,Bt,Xe,Ke,nr.x,nr.y,$t,En,Dl,dt,Ci,bn,S,_l,Wn,bi,Zn,Fn,g,j,ys,Ws,oo,mr,Ra,Zi]),tp=M.useCallback(c=>{if(z!=="magnify")return;c.preventDefault();const x=or.current;if(!x)return;const N=x.getBoundingClientRect(),B=x.width/N.width,re=x.height/N.height,ye=c.nativeEvent.offsetX,P=c.nativeEvent.offsetY,ze=typeof ye=="number"?ye:c.clientX-N.left,me=typeof P=="number"?P:c.clientY-N.top,De=ze*B,Ae=me*re,Ne=De-5,le=Ae-5,ge=_f(Ne,le,nr,Ke,$t,En),ce=ge.x,de=ge.y,Me=1.2,Re=1/Me,$e=c.deltaY<0?Me:Re,ht=Math.max(.25,Math.min(8,Ke*$e));No(ce,de),Vt(ht)},[z,Ke,nr.x,nr.y,$t,En]),np=M.useCallback(c=>{if(z==="draw"&&it==="trace"){Nn.current=!0;let $e=_t;if($e.length>1){const ht=[$e[0]];for(let mt=1;mt<$e.length;mt++){const Tt=ht[ht.length-1],tt=$e[mt];(Math.abs(Tt.x-tt.x)>.001||Math.abs(Tt.y-tt.y)>.001)&&ht.push(tt)}$e=ht}if($e.length>=1){vn(Xe,Jt,on,Se,Ve);const ht=Zn||"top",mt=ht==="top"?"traceTop":"traceBottom",Tt=Bn.get(mt),tt={id:`${Date.now()}-trace`,points:$e,color:Tt.color,size:Tt.size,layer:ht,type:"trace"};et(Yt=>[...Yt,tt]),ht==="top"?Ka(Yt=>[...Yt,tt.id]):ua(Yt=>[...Yt,tt.id]),Ut([]),Xt(null),setTimeout(()=>{Nn.current=!1},300);return}}const x=or.current;if(!x)return;const N=x.getBoundingClientRect(),B=x.width/N.width,re=x.height/N.height,ye=c.nativeEvent.offsetX,P=c.nativeEvent.offsetY,ze=typeof ye=="number"?ye:c.clientX-N.left,me=typeof P=="number"?P:c.clientY-N.top,De=ze*B,Ae=me*re,Ne=De-5,le=Ae-5,ge=_f(Ne,le,nr,Ke,$t,En),ce=ge.x,de=ge.y,Me=Math.max(8/Ke,4),Re=(()=>{for(const $e of Xe)if($e.type==="testPoint"&&$e.points.length>0){const ht=$e.points[0],mt=Math.hypot(ht.x-ce,ht.y-de),Tt=($e.size||18)/2;if(mt<=Tt+Me)return $e}return null})();if(Re){An(new Set([Re.id])),Cn(new Set),hn(new Set),yn(new Set),zi(!0);return}if(z==="select"||z==="component"){const ht=(()=>{for(const tt of Jt)if(ce>=tt.x-10&&ce<=tt.x+10&&de>=tt.y-10&&de<=tt.y+10)return{layer:"top",comp:tt};for(const tt of on)if(ce>=tt.x-10&&ce<=tt.x+10&&de>=tt.y-10&&de<=tt.y+10)return{layer:"bottom",comp:tt};return null})(),mt=Math.max(6/Ke,4);let Tt=null;for(const tt of g){const Yt=Math.max(6,tt.size/2),We=Yt*.8,Ge=Yt+We,Ue=Math.hypot(tt.x-ce,tt.y-de),ct=Math.abs(ce-tt.x)<=mt&&Math.abs(de-tt.y)<=Ge,ft=Math.abs(de-tt.y)<=mt&&Math.abs(ce-tt.x)<=Ge;if(Ue<=Math.max(Yt,mt)||ct||ft){Tt=tt;break}}if(Tt){hn(new Set([Tt.id])),sn({visible:!0,id:Tt.id,layer:Tt.layer,x:Tt.x,y:Tt.y,size:Tt.size,color:Tt.color,powerBusId:Tt.powerBusId});return}if(ht){const{layer:tt,comp:Yt}=ht;as(Yt,tt)}}},[z,it,J,oe,Bt,Jt,on,g,Ke,nr.x,nr.y,$t,En,_l,Dl,Xe,Ot,Us,Jf,Kr,Wn,_t,Zn,E,F,$,Pe,zi,An,Cn,hn,yn,as]),rd=M.useCallback(()=>{const c=dn.current;if(z==="draw"&&it==="trace"&&c.length>=2){let x=[c[0]];for(let P=1;P<c.length;P++){const ze=x[x.length-1],me=c[P];(Math.abs(ze.x-me.x)>.001||Math.abs(ze.y-me.y)>.001)&&x.push(me)}const N=Zn||"top",B=N==="top"?"traceTop":"traceBottom",re=Bn.get(B),ye={id:`${Date.now()}-trace`,points:x,color:re.color,size:re.size,layer:N,type:"trace"};vn(Xe,Jt,on,Se,Ve),et(P=>[...P,ye]),N==="top"?Ka(P=>[...P,ye.id]):ua(P=>[...P,ye.id]),Ut([]),Xt(null)}else if(z==="draw"&&it==="trace"&&c.length===1){const x=Zn||"top",N=x==="top"?"traceTop":"traceBottom",B=Bn.get(N),re={id:`${Date.now()}-trace-dot`,points:c,color:B.color,size:B.size,layer:x,type:"trace"};et(ye=>[...ye,re]),x==="top"?Ka(ye=>[...ye,re.id]):ua(ye=>[...ye,re.id]),Ut([])}},[z,it,Zn,E,F,$,Pe,et]),Au=M.useCallback((c,x,N)=>{const B=x-c.x,re=N-c.y;if(B===0&&re===0)return{x,y:N};const P=(i2(B,re)%180+180)%180,ze=[0,45,90];let me=0,De=1e9;for(const Ae of ze){const Ne=Math.abs(P-Ae);Ne<De&&(De=Ne,me=Ae)}if(me===0)return{x,y:c.y};if(me===90)return{x:c.x,y:N};{const Ae=Math.min(Math.abs(B),Math.abs(re)),Ne=B>=0?1:-1,le=re>=0?1:-1;return{x:c.x+Ne*Ae,y:c.y+le*Ae}}},[]),ip=M.useCallback(c=>{const x=or.current?.getBoundingClientRect();if(!x)return;const N=c.clientX-x.left,B=c.clientY-x.top,re=or.current,ye=re.width/x.width,P=re.height/x.height,ze=N*ye,me=B*P,De=ze-5,Ae=me-5,Ne=_f(De,Ae,nr,Ke,$t,En),le=Ne.x,ge=Ne.y;if(fs({x:le,y:ge}),Zc.current&&Zl.current&&Kl({start:Zl.current.start,end:{x:le,y:ge}}),z==="draw"&&it==="trace"&&_t.length>0){const de=Dl?{x:rr({x:le,y:ge}).x,y:rr({x:le,y:ge}).y}:((Me,Re)=>{let $e=1/0,ht=null;const Tt=10/Ke,tt=Ke>20?Math.max(Tt,1e-4):Ke>10?Math.max(Tt,.001):Math.max(Tt,.01);for(const Ge of Xe)if(Ge.type==="via"){const Ue=Ge.points[0],ct=Math.hypot(Ue.x-Me,Ue.y-Re);ct<=tt&&ct<$e&&($e=ct,ht=Ue)}else if(Ge.type==="pad"){const Ue=Ge.points[0],ct=Math.hypot(Ue.x-Me,Ue.y-Re);ct<=tt&&ct<$e&&($e=ct,ht=Ue)}for(const Ge of g)if(Ge.pointId!==void 0){const Ue=Math.hypot(Ge.x-Me,Ge.y-Re);Ue<=tt&&Ue<$e&&($e=Ue,ht={x:Ge.x,y:Ge.y,id:Ge.pointId})}for(const Ge of j)if(Ge.pointId!==void 0){const Ue=Math.hypot(Ge.x-Me,Ge.y-Re);Ue<=tt&&Ue<$e&&($e=Ue,ht={x:Ge.x,y:Ge.y,id:Ge.pointId})}const We=rr(ht??{x:Me,y:Re});return{x:We.x,y:We.y,nodeId:ht?.id}})(le,ge);Xt({x:de.x,y:de.y})}else Xt(null);if(wo){const de=(()=>{for(const Me of Jt)if(le>=Me.x-10&&le<=Me.x+10&&ge>=Me.y-10&&ge<=Me.y+10)return{layer:"top",comp:Me};for(const Me of on)if(le>=Me.x-10&&le<=Me.x+10&&ge>=Me.y-10&&ge<=Me.y+10)return{layer:"bottom",comp:Me};return null})();if(de)Yl({component:de.comp,layer:de.layer,x:c.clientX,y:c.clientY}),wl(null);else{Yl(null);const Me=Math.max(8/Ke,4),Re=(()=>{for(const $e of Xe)if($e.type==="testPoint"&&$e.points.length>0){const ht=$e.points[0],mt=Math.hypot(ht.x-le,ht.y-ge),Tt=($e.size||18)/2;if(mt<=Tt+Me)return $e}return null})();wl(Re?{stroke:Re,x:c.clientX,y:c.clientY}:null)}}else Yl(null),wl(null);if(z==="select"&&lc&&au){const ce=au.x,de=au.y;id({x:Math.min(ce,le),y:Math.min(de,ge),width:Math.abs(le-ce),height:Math.abs(ge-de)})}else if(z==="pan"&&Us&&hs.current){const{startCX:ce,startCY:de,objectStartPositions:Me}=hs.current,Re=De-ce,$e=Ae-de,ht=s1(Re,$e,Ke,$t,En),mt=ht.x,Tt=ht.y;Me&&(a&&s({...a,x:Me.topImageX+mt,y:Me.topImageY+Tt}),l&&d({...l,x:Me.bottomImageX+mt,y:Me.bottomImageY+Tt}),_i(Jt.map(tt=>({...tt,x:(Me.componentsTop?.[tt.id]?.x??tt.x)+mt,y:(Me.componentsTop?.[tt.id]?.y??tt.y)+Tt}))),Xn(on.map(tt=>({...tt,x:(Me.componentsBottom?.[tt.id]?.x??tt.x)+mt,y:(Me.componentsBottom?.[tt.id]?.y??tt.y)+Tt}))),Be(Se.map(tt=>({...tt,x:(Me.powerSymbols?.[tt.id]?.x??tt.x)+mt,y:(Me.powerSymbols?.[tt.id]?.y??tt.y)+Tt}))),ut(Ve.map(tt=>({...tt,x:(Me.groundSymbols?.[tt.id]?.x??tt.x)+mt,y:(Me.groundSymbols?.[tt.id]?.y??tt.y)+Tt}))),et(Xe.map((tt,Yt)=>({...tt,points:tt.points.map((We,Ge)=>{const Ue=Me.drawingStrokes?.[Yt]?.points?.[Ge];return{...We,x:(Ue?.x??We.x)+mt,y:(Ue?.y??We.y)+Tt}})}))),zo(Fa.map((tt,Yt)=>{const We=Me.vias?.[Yt];return{...tt,x:(We?.x??tt.x)+mt,y:(We?.y??tt.y)+Tt}})),Fi(Mt.map((tt,Yt)=>{const We=Me.pads?.[Yt];return{...tt,x:(We?.x??tt.x)+mt,y:(We?.y??tt.y)+Tt}})))}else if(Pt&&_t.length>0){if(z==="draw")if(tr){const ce=_t[0],de=Au(ce,le,ge),Me=rr(de),Re={id:vc(),x:Me.x,y:Me.y};Ut([ce,Re])}else{const ce=rr({x:le,y:ge});Ut(de=>[...de,{id:vc(),x:ce.x,y:ce.y}])}else if(z==="erase"&&(Ut(ce=>[...ce,{id:vc(),x:le,y:ge}]),et(ce=>{const de=ce.filter(Re=>{if(Re.type==="via"&&Mi||Re.type==="pad"&&sr||Re.type==="testPoint"&&ya||Re.type==="trace"&&da||Re.layer!==Bt)return!0;const $e=oe/2,ht=le-$e,mt=le+$e,Tt=ge-$e,tt=ge+$e,Yt=(Ue,ct)=>Ue>=ht&&Ue<=mt&&ct>=Tt&&ct<=tt,We=(Ue,ct,ft,zt)=>{const ei=(Ta,ta)=>{let Jn=0;return Ta<ht?Jn|=1:Ta>mt&&(Jn|=2),ta<Tt?Jn|=4:ta>tt&&(Jn|=8),Jn};let rn=Ue,Lt=ct,wn=ft,Ri=zt,Or=ei(rn,Lt),kr=ei(wn,Ri);for(;;){if((Or|kr)===0)return!0;if((Or&kr)!==0)return!1;const Ta=Or!==0?Or:kr;let ta=0,Jn=0;Ta&8?(ta=rn+(wn-rn)*(tt-Lt)/(Ri-Lt),Jn=tt):Ta&4?(ta=rn+(wn-rn)*(Tt-Lt)/(Ri-Lt),Jn=Tt):Ta&2?(Jn=Lt+(Ri-Lt)*(mt-rn)/(wn-rn),ta=mt):(Jn=Lt+(Ri-Lt)*(ht-rn)/(wn-rn),ta=ht),Ta===Or?(rn=ta,Lt=Jn,Or=ei(rn,Lt)):(wn=ta,Ri=Jn,kr=ei(wn,Ri))}};let Ge=!1;if(Re.points.length===1){const Ue=Re.points[0];Ge=Yt(Ue.x,Ue.y)}else for(let Ue=0;Ue<Re.points.length-1;Ue++){const ct=Re.points[Ue],ft=Re.points[Ue+1];if(We(ct.x,ct.y,ft.x,ft.y)){Ge=!0;break}}return Ge&&console.log("Erasing stroke at position:",le,ge,"brushSize:",oe,"selectedLayer:",Bt),!Ge});console.log("Strokes before:",ce.length,"after:",de.length);const Me=new Set(de.map(Re=>Re.id));return Na(Re=>Re.filter($e=>Me.has($e))),hl(Re=>Re.filter($e=>Me.has($e))),Ka(Re=>Re.filter($e=>Me.has($e))),ua(Re=>Re.filter($e=>Me.has($e))),de}),ui||Be(ce=>{const de=oe/2,Me=le-de,Re=le+de,$e=ge-de,ht=ge+de,mt=Tt=>{const tt=Tt.size/2,Yt=Tt.x-tt,We=Tt.x+tt,Ge=Tt.y-tt,Ue=Tt.y+tt;return!(Re<Yt||Me>We||ht<Ge||$e>Ue)};return ce.filter(Tt=>!mt(Tt))}),fa||ut(ce=>{const de=oe/2,Me=le-de,Re=le+de,$e=ge-de,ht=ge+de,mt=tt=>{const Yt=Math.max(6,(tt.size||18)/2),We=Yt*.8,Ge=Yt+We,Ue=tt.x-Ge,ct=tt.x+Ge,ft=tt.y-Ge,zt=tt.y+Ge;return!(Re<Ue||Me>ct||ht<ft||$e>zt)};return ce.filter(tt=>!mt(tt))}),!Dr)){const ce=oe/2,de=le-ce,Me=le+ce,Re=ge-ce,$e=ge+ce,ht=mt=>{const tt=(mt.size||18)/2,Yt=mt.x-tt,We=mt.x+tt,Ge=mt.y-tt,Ue=mt.y+tt;return!(Me<Yt||de>We||$e<Ge||Re>Ue)};vn(Xe,Jt,on,Se,Ve),_i(mt=>mt.filter(Tt=>!ht(Tt))),Xn(mt=>mt.filter(Tt=>!ht(Tt)))}}else if(In&&Gi&&Ot){if(Di){er(!1),Ft(null);return}const ce=le-Gi.x,de=ge-Gi.y;if(Ot==="top"){a&&s(Me=>Me?{...Me,x:Me.x+ce,y:Me.y+de}:null),Ft({x:le,y:ge});return}if(Ot==="bottom"){l&&d(Me=>Me?{...Me,x:Me.x+ce,y:Me.y+de}:null),Ft({x:le,y:ge});return}if(Ot==="both"){a&&s(Me=>Me?{...Me,x:Me.x+ce,y:Me.y+de}:null),l&&d(Me=>Me?{...Me,x:Me.x+ce,y:Me.y+de}:null),Ft({x:le,y:ge});return}}},[Pt,_t,z,oe,In,Gi,Ot,a,l,tr,Au,Bt,et,Ke,nr.x,nr.y,$t,En,lc,au,Di,Mi,sr,da,ui,fa,Jt,on,_i,Xn,wo,Yl,Dl,Xe,g,j,_t,it,qt,Xt,Us,hs,rs,5,nr,vc,rr,w,oa,vn,Se,Ve,fs]),ad=M.useCallback(()=>{if(fs(null),Lc.current&&Zl.current&&xs.current&&Zc.current){const c=Zl.current,x=xs.current,N=Math.abs(c.end.x-c.start.x),B=Math.abs(c.end.y-c.start.y);if(N>=1&&B>=1)try{const re=Gv({numPins:x.numPins,type:x.type,twoSidedOrientation:x.twoSidedOrientation,point1:c.start,point2:c.end}),ye=new Set(Xe.flatMap(me=>me.points.map(De=>De.id||0).filter(De=>De>0))),P=ye.size>0?Math.max(...Array.from(ye))+1:1,ze=re.map((me,De)=>{const Ae=dc.current?(bi||"top")==="top"?"padTop":"padBottom":"via",Ne=Bn.get(Ae),le=P+De,ge=dc.current&&bi||"top";return{id:le.toString(),type:dc.current?"pad":"via",points:[{x:me.x,y:me.y,id:le}],size:Ne.size,color:Ne.color,layer:ge}});et(me=>{const De=[...me,...ze];return vn(De,Jt,on,Se,Ve),De})}catch(re){console.error("IC Placement error:",re),alert(`Error placing ${dc.current?"pads":"vias"}: ${re instanceof Error?re.message:String(re)}`)}Hs(!1),Kl(null),uc(null),Kc(!1),Lc.current=!1,Zl.current=null,xs.current=null,Zc.current=!1,Ea(void 0),w("select");return}if(z==="select"&&lc){const c=Bc,x=au;if(Za(!1),df(null),id(null),c&&x){const re=Math.max(3,5/Ke),ye=c.width<re&&c.height<re,P=(We,Ge)=>{const Ue=c.x,ct=c.y,ft=c.x+c.width,zt=c.y+c.height;return We>=Ue&&We<=ft&&Ge>=ct&&Ge<=zt},ze=(We,Ge,Ue,ct,ft,zt,nn,Tn)=>{const Lt=(Jn,la)=>{let Ys=0;return Jn<ft?Ys|=1:Jn>nn&&(Ys|=2),la<zt?Ys|=4:la>Tn&&(Ys|=8),Ys};let wn=We,Ri=Ge,Or=Ue,kr=ct,Ta=Lt(wn,Ri),ta=Lt(Or,kr);for(;;){if((Ta|ta)===0)return!0;if((Ta&ta)!==0)return!1;const Jn=Ta!==0?Ta:ta;let la=0,Ys=0;Jn&8?(la=wn+(Or-wn)*(Tn-Ri)/(kr-Ri),Ys=Tn):Jn&4?(la=wn+(Or-wn)*(zt-Ri)/(kr-Ri),Ys=zt):Jn&2?(Ys=Ri+(kr-Ri)*(nn-wn)/(Or-wn),la=nn):(Ys=Ri+(kr-Ri)*(ft-wn)/(Or-wn),la=ft),Jn===Ta?(wn=la,Ri=Ys,Ta=Lt(wn,Ri)):(Or=la,kr=Ys,ta=Lt(Or,kr))}},me=c.x,De=c.y,Ae=c.x+c.width,Ne=c.y+c.height,ge=Math.max(6/Ke,4/Ke,.5),ce=(We,Ge,Ue,ct,ft,zt)=>{const nn=ft-Ue,Tn=zt-ct;if(nn===0&&Tn===0)return Math.hypot(We-Ue,Ge-ct);const Yn=Math.max(0,Math.min(1,((We-Ue)*nn+(Ge-ct)*Tn)/(nn*nn+Tn*Tn))),Mn=Ue+Yn*nn,Un=ct+Yn*Tn;return Math.hypot(We-Mn,Ge-Un)},de=x?.shiftKey===!0,Me=new Set(de?Array.from(oi):[]),Re=new Set(de?Array.from(gn):[]),$e=new Set(de?Array.from(li):[]),ht=new Set(de?Array.from(ci):[]),mt=x?.hitStrokeId;if(mt){const We=Xe.find(Ge=>Ge.id===mt);if(We){let Ge=!1;if(We.type==="via"||We.type==="pad"?Ge=mr:Ge=We.layer==="top"?br:Qr,Ge){de?An(Ue=>{const ct=new Set(Ue);return ct.has(mt)?ct.delete(mt):ct.add(mt),ct}):(An(new Set([mt])),Cn(new Set),hn(new Set),yn(new Set));return}}}if(ye){let We=null;for(const Ge of Xe){let Ue=!1;if(Ge.type==="via"?Ue=mr:Ge.type==="pad"?Ue=(Ge.layer||"top")==="top"?Ra:Zi:Ge.type==="testPoint"?Ue=(Ge.layer||"top")==="top"?es:gs:Ge.type==="trace"?Ue=Ge.layer==="top"?br:Qr:Ue=!1,!Ue)continue;let ct=1/0;if(Ge.type==="via"||Ge.type==="pad"||Ge.type==="testPoint"){const ft=Ge.points[0],zt=Math.max(1,Ge.size/2);ct=Math.hypot(ft.x-x.x,ft.y-x.y);const Tn=Math.max(6/Ke,4/Ke,.5);ct<=Math.max(zt,Tn)&&(!We||ct<We.dist)&&(We={id:Ge.id,dist:ct})}else for(let ft=0;ft<Ge.points.length-1;ft++){const zt=Ge.points[ft],nn=Ge.points[ft+1],Tn=ce(x.x,x.y,zt.x,zt.y,nn.x,nn.y);if(Tn<=Math.max(ge,Ge.size/2)){(!We||Tn<We.dist)&&(We={id:Ge.id,dist:Tn});break}}}We&&(de&&Me.has(We.id)?Me.delete(We.id):Me.add(We.id))}else for(const We of Xe){let Ge=!1;if(We.type==="via"?Ge=mr:We.type==="pad"?Ge=(We.layer||"top")==="top"?Ra:Zi:We.type==="testPoint"?Ge=(We.layer||"top")==="top"?es:gs:We.type==="trace"?Ge=We.layer==="top"?br:Qr:Ge=!1,!Ge)continue;let Ue=!1;if(We.type==="via"||We.type==="pad"||We.type==="testPoint"){const ct=We.points[0];Ue=P(ct.x,ct.y)}else for(let ct=0;ct<We.points.length-1;ct++){const ft=We.points[ct],zt=We.points[ct+1];if(ze(ft.x,ft.y,zt.x,zt.y,me,De,Ae,Ne)||P(ft.x,ft.y)&&P(zt.x,zt.y)){Ue=!0;break}}Ue&&(de&&Me.has(We.id)?Me.delete(We.id):Me.add(We.id))}const Tt=We=>{const Ue=Math.max(10,We.size||18)/2;return We.x-Ue<=Ae&&We.x+Ue>=me&&We.y-Ue<=Ne&&We.y+Ue>=De};if(ye){const We=Ge=>{const ct=Math.max(10,Ge.size||18)/2;return x.x>=Ge.x-ct&&x.x<=Ge.x+ct&&x.y>=Ge.y-ct&&x.y<=Ge.y+ct};Bi&&Jt.forEach(Ge=>{We(Ge)&&(de&&Re.has(Ge.id)?Re.delete(Ge.id):Re.add(Ge.id))}),Ma&&on.forEach(Ge=>{We(Ge)&&(de&&Re.has(Ge.id)?Re.delete(Ge.id):Re.add(Ge.id))})}else Bi&&Jt.forEach(We=>{Tt(We)&&(de&&Re.has(We.id)?Re.delete(We.id):Re.add(We.id))}),Ma&&on.forEach(We=>{Tt(We)&&(de&&Re.has(We.id)?Re.delete(We.id):Re.add(We.id))});const tt=We=>{const Ge=Math.max(6,We.size/2),Ue=Ge*.8,ct=Ge+Ue;return We.x-ct<=Ae&&We.x+ct>=me&&We.y-ct<=Ne&&We.y+ct>=De};if(jo)if(ye){let We=null;for(const Ge of g){const Ue=Math.max(6,Ge.size/2),ct=Ue*.8,ft=Ue+ct,zt=Math.hypot(Ge.x-x.x,Ge.y-x.y),nn=Math.abs(x.x-Ge.x)<=ge&&Math.abs(x.y-Ge.y)<=ft,Tn=Math.abs(x.y-Ge.y)<=ge&&Math.abs(x.x-Ge.x)<=ft;if(zt<=Math.max(Ue,ge)||nn||Tn){const Mn=Math.min(zt,Math.abs(x.x-Ge.x)+Math.abs(x.y-Ge.y));(!We||Mn<We.dist)&&(We={id:Ge.id,dist:Mn})}}We&&(de&&$e.has(We.id)?$e.delete(We.id):$e.add(We.id))}else g.forEach(We=>{tt(We)&&(de&&$e.has(We.id)?$e.delete(We.id):$e.add(We.id))});const Yt=We=>{const Ge=Math.max(6,(We.size||18)/2),Ue=Ge*.8,ct=Ge+Ue;return We.x-ct<=Ae&&We.x+ct>=me&&We.y-ct<=Ne&&We.y+ct>=De};if(dr)if(ye){let We=null;for(const Ge of j){const Ue=Math.max(6,(Ge.size||18)/2),ct=Ue*.8,ft=Ue+ct,zt=Math.hypot(Ge.x-x.x,Ge.y-x.y),nn=Math.abs(x.x-Ge.x)<=ge&&Math.abs(x.y-Ge.y)<=ft,Tn=Math.abs(x.y-Ge.y)<=ge&&Math.abs(x.x-Ge.x)<=ft;if(zt<=Math.max(Ue,ge)||nn||Tn){const Mn=Math.min(zt,Math.abs(x.x-Ge.x)+Math.abs(x.y-Ge.y));(!We||Mn<We.dist)&&(We={id:Ge.id,dist:Mn})}}We&&(de&&ht.has(We.id)?ht.delete(We.id):ht.add(We.id))}else j.forEach(We=>{Yt(We)&&(de&&ht.has(We.id)?ht.delete(We.id):ht.add(We.id))});An(Me),Cn(Re),hn($e),yn(ht)}}if(Pt&&_t.length>0){if(z==="draw"&&it!=="trace"){const c={id:Date.now().toString(),points:_t,color:J,size:oe,layer:Bt,type:"trace"};et(x=>[...x,c]),Bt==="top"?Ka(x=>[...x,c.id]):ua(x=>[...x,c.id])}Ut([])}Us&&($l(!1),hs.current=null,bl.current=null),St(!1),er(!1),Ft(null),co(!1)},[Pt,_t,z,J,oe,Bt,Bc,au,lc,Xe,Ke,vo,oi,g,j,Jt,on,gn,li,ci,mr,br,Qr,Bi,Ma,jo,dr,fs]);Dt.useEffect(()=>{if(!(z==="pan"&&Us&&bl.current))return;const c=N=>{const B=or.current;if(!B)return;const re=B.getBoundingClientRect(),ye=B.width/re.width,P=B.height/re.height,{startClientX:ze,startClientY:me,objectStartPositions:De}=bl.current,Ae=(N.clientX-ze)*ye,Ne=(N.clientY-me)*P,le=s1(Ae,Ne,Ke,$t,En),ge=le.x,ce=le.y;De&&(a&&s({...a,x:De.topImageX+ge,y:De.topImageY+ce}),l&&d({...l,x:De.bottomImageX+ge,y:De.bottomImageY+ce}),_i(Jt.map(de=>({...de,x:(De.componentsTop?.[de.id]?.x??de.x)+ge,y:(De.componentsTop?.[de.id]?.y??de.y)+ce}))),Xn(on.map(de=>({...de,x:(De.componentsBottom?.[de.id]?.x??de.x)+ge,y:(De.componentsBottom?.[de.id]?.y??de.y)+ce}))),Be(Se.map(de=>({...de,x:(De.powerSymbols?.[de.id]?.x??de.x)+ge,y:(De.powerSymbols?.[de.id]?.y??de.y)+ce}))),ut(Ve.map(de=>({...de,x:(De.groundSymbols?.[de.id]?.x??de.x)+ge,y:(De.groundSymbols?.[de.id]?.y??de.y)+ce}))),et(Xe.map((de,Me)=>({...de,points:de.points.map((Re,$e)=>{const ht=De.drawingStrokes?.[Me]?.points?.[$e];return{...Re,x:(ht?.x??Re.x)+ge,y:(ht?.y??Re.y)+ce}})}))),zo(Fa.map((de,Me)=>{const Re=De.vias?.[Me];return{...de,x:(Re?.x??de.x)+ge,y:(Re?.y??de.y)+ce}})),Fi(Mt.map((de,Me)=>{const Re=De.pads?.[Me];return{...de,x:(Re?.x??de.x)+ge,y:(Re?.y??de.y)+ce}})))},x=()=>{$l(!1),hs.current=null,bl.current=null,window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",x,!0)};return window.addEventListener("mousemove",c,!0),window.addEventListener("mouseup",x,!0),()=>{window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",x,!0)}},[z,Us,Ke,$t,En,a,l,Jt,on,Se,Ve,Xe,Fa,Mt,s,d,_i,Xn,Be,ut,et,zo,Fi]);const zu=M.useCallback(()=>{const c=or.current;if(!c)return;const x=c.getContext("2d");if(!x)return;x.clearRect(0,0,c.width,c.height),x.fillStyle="#000000",x.fillRect(0,0,c.width,c.height),x.fillStyle="#ffffff",x.fillRect(5,5,c.width-10,c.height-10),x.save(),x.beginPath(),x.rect(5,5,c.width-10,c.height-10),x.clip(),x.translate(5,5);const N=(ze,me,De,Ae,Ne,le,ge,ce)=>{const de=document.createElement("canvas");de.width=De,de.height=Ae;const Me=de.getContext("2d",{willReadFrequently:!0});Me.clearRect(0,0,De,Ae),Me.drawImage(me,0,0,De,Ae);let Re=de;if(Math.abs(Ne)>1e-6){const $e=Jp(Ne),ht=Math.max(.2,1-$e),mt=Math.max(.2,1+$e),Tt=Math.max(ht,mt),tt=Math.max(1,Math.ceil(De*Tt)),Yt=document.createElement("canvas");Yt.width=tt,Yt.height=Ae;const We=Yt.getContext("2d",{willReadFrequently:!0});We.clearRect(0,0,tt,Ae);for(let Ge=0;Ge<Ae;Ge++){const Ue=Ae<=1?0:Ge/(Ae-1),ct=ht*(1-Ue)+mt*Ue,ft=Math.max(1,De*ct),zt=(tt-ft)/2;We.drawImage(Re,0,Ge,De,1,zt,Ge,ft,1)}Re=Yt}if(Math.abs(le)>1e-6){const $e=Jp(le),ht=Math.max(.2,1-$e),mt=Math.max(.2,1+$e),Tt=Math.max(ht,mt),tt=Math.max(1,Math.ceil(Ae*Tt)),Yt=document.createElement("canvas");Yt.width=Re.width,Yt.height=tt;const We=Yt.getContext("2d",{willReadFrequently:!0});We.clearRect(0,0,Yt.width,tt);for(let Ge=0;Ge<Re.width;Ge++){const Ue=Re.width<=1?0:Ge/(Re.width-1),ct=ht*(1-Ue)+mt*Ue,ft=Math.max(1,Ae*ct),zt=(tt-ft)/2;We.drawImage(Re,Ge,0,1,Re.height,Ge,zt,1,ft)}Re=Yt}ze.drawImage(Re,-ge/2,-ce/2,ge,ce)};x.translate(nr.x,nr.y),x.scale(Ke,Ke),r2(x,$t,En);{const ze=Rr&&sl;if(a&&a.bitmap&&Rr){const me=a.bitmap;x.save(),x.globalAlpha=1;const De=[];a.brightness!==void 0&&a.brightness!==100&&De.push(`brightness(${a.brightness}%)`),a.contrast!==void 0&&a.contrast!==100&&De.push(`contrast(${a.contrast}%)`),K&&De.push("grayscale(100%)"),x.filter=De.length>0?De.join(" "):"none",S0(x,{x:a.x,y:a.y,rotation:a.rotation||0,scale:a.scale||1,flipX:a.flipX||!1,flipY:a.flipY||!1,skewX:a.skewX||0,skewY:a.skewY||0});const Ae=me.width*1,Ne=me.height*1,le=me;a.keystoneV&&Math.abs(a.keystoneV)>1e-6||a.keystoneH&&Math.abs(a.keystoneH)>1e-6?N(x,le,me.width,me.height,a.keystoneV||0,a.keystoneH||0,Ae,Ne):x.drawImage(le,-Ae/2,-Ne/2,Ae,Ne),x.restore()}if(l&&l.bitmap&&sl){const me=l.bitmap;x.save(),x.globalAlpha=ze?b/100:1;const De=[];l.brightness!==void 0&&l.brightness!==100&&De.push(`brightness(${l.brightness}%)`),l.contrast!==void 0&&l.contrast!==100&&De.push(`contrast(${l.contrast}%)`),K&&De.push("grayscale(100%)"),x.filter=De.length>0?De.join(" "):"none",S0(x,{x:l.x,y:l.y,rotation:l.rotation||0,scale:l.scale||1,flipX:l.flipX||!1,flipY:l.flipY||!1,skewX:l.skewX||0,skewY:l.skewY||0});const Ae=me.width*1,Ne=me.height*1,le=me;l.keystoneV&&Math.abs(l.keystoneV)>1e-6||l.keystoneH&&Math.abs(l.keystoneH)>1e-6?N(x,le,me.width,me.height,l.keystoneV||0,l.keystoneH||0,Ae,Ne):x.drawImage(le,-Ae/2,-Ne/2,Ae,Ne),x.restore()}}if(lh(x),jo&&g.length>0){const ze=me=>{x.save(),o1(x,me.x,me.y,me.rotation??0,me.flipX??!1,!1);const De=bn.find(ce=>ce.id===me.powerBusId),Ae=li.has(me.id),Ne=De?.color||"#ff0000";x.strokeStyle=Ne,x.lineWidth=Math.max(1,(Ae?3:2)/Math.max(Ke,.001)),x.lineCap="round";const le=Math.max(6,me.size/2),ge=le*.8;if(Ae&&(x.strokeStyle="#0066ff",x.lineWidth=Math.max(1,4/Math.max(Ke,.001)),x.beginPath(),x.arc(0,0,le+ge+3,0,Co),x.stroke()),x.strokeStyle=Ne,x.lineWidth=Math.max(1,(Ae?3:2)/Math.max(Ke,.001)),x.beginPath(),x.arc(0,0,le,0,Co),x.stroke(),x.beginPath(),x.moveTo(0,-le-ge),x.lineTo(0,le+ge),x.stroke(),x.beginPath(),x.moveTo(-le-ge,0),x.lineTo(le+ge,0),x.stroke(),De){x.fillStyle=Ne;const ce=Math.max(10,le*.8);x.font=`${ce}px sans-serif`,x.textAlign="center",x.textBaseline="top",x.fillText(De.name,0,le+ge+8)}x.restore()};g.forEach(ze)}if(dr&&j.length>0){const ze=me=>{x.save(),o1(x,me.x,me.y,me.rotation??0,me.flipX??!1,!1);const De=ci.has(me.id),Ae=S.find(ce=>ce.id===me.groundBusId),Ne=Ae?.color||me.color||"#000000",le=me.groundBusId==="groundbus-earth";let ge;if(le){const ce=Math.max(6,me.size||18),de=ce*.9,Me=ce*.24,Re=ce*1.6;x.strokeStyle=Ne,x.lineWidth=Math.max(1,(De?3:2)/Math.max(Ke,.001)),x.lineCap="round",De&&(x.strokeStyle="#0066ff",x.lineWidth=Math.max(1,4/Math.max(Ke,.001)),x.setLineDash([5,5]),x.strokeRect(-Re/2-3,-3,Re+6,de+Me*2+6),x.setLineDash([])),x.strokeStyle=Ne,x.lineWidth=Math.max(1,(De?3:2)/Math.max(Ke,.001)),x.beginPath(),x.moveTo(0,0),x.lineTo(0,de),x.stroke();for(let $e=0;$e<3;$e++){const ht=de+$e*Me,mt=Re*(1-$e*.25);x.beginPath(),x.moveTo(-mt/2,ht),x.lineTo(mt/2,ht),x.stroke()}ge=de+Me*2}else{const ce=Math.max(6,(me.size||18)/2),de=ce*.8;De&&(x.strokeStyle="#0066ff",x.lineWidth=Math.max(1,4/Math.max(Ke,.001)),x.beginPath(),x.arc(0,0,ce+de+3,0,Co),x.stroke()),x.strokeStyle=Ne,x.lineWidth=Math.max(1,(De?3:2)/Math.max(Ke,.001)),x.beginPath(),x.arc(0,0,ce,0,Co),x.stroke(),x.beginPath(),x.moveTo(0,-ce-de),x.lineTo(0,ce+de),x.stroke(),x.beginPath(),x.moveTo(-ce-de,0),x.lineTo(ce+de,0),x.stroke(),ge=ce+de}if(Ae){x.fillStyle=Ne;const ce=Math.max(10,(me.size||18)*.5);x.font=`${ce}px sans-serif`,x.textAlign="center",x.textBaseline="top",x.fillText(Ae.name,0,ge+8)}x.restore()};j.forEach(ze)}const B=ze=>{const me=Math.max(10,ze.size||18),De=me/2;x.save(),x.translate(ze.x,ze.y),a2(x,$t,En),ze.orientation!==void 0&&ze.orientation!==0&&x.rotate(pu(ze.orientation)),ze.flipX&&x.scale(-1,1),ze.flipY&&x.scale(1,-1),x.strokeStyle=ze.color||"#111",x.lineWidth=Math.max(1,2/Math.max(Ke,.001));const Ae=ze.pinConnections||[],Ne=Ae.length>0&&Ae.length===ze.pinCount&&Ae.every(ce=>ce&&ce.trim()!=="");x.fillStyle=Ne?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",x.beginPath(),x.rect(-De,-De,me,me),x.fill(),x.stroke();const le=ze.designator?.trim()||"";if(le){x.fillStyle=ze.color||"#111";const ce=Math.max(6,me*.35),de=me*.9;let Me=ce;x.font=`bold ${Me}px sans-serif`;const Re=x.measureText(le);Re.width>de&&(Me=de/Re.width*Me,Me=Math.max(6,Me),x.font=`bold ${Me}px sans-serif`),x.textAlign="center",x.textBaseline="middle",x.fillText(le,0,0)}gn.has(ze.id)&&(x.setLineDash([4,3]),x.strokeStyle="#00bfff",x.lineWidth=1.5,x.strokeRect(-De-3,-De-3,me+6,me+6),x.setLineDash([])),x.restore()};if(fr){const ze=De=>{const Ae=parseInt(De,10);if(isNaN(Ae))return null;for(const Ne of Xe)if((Ne.type==="via"||Ne.type==="pad"||Ne.type==="testPoint")&&Ne.points.length>0){const le=Ne.points[0];if(le.id===Ae)return{x:le.x,y:le.y}}for(const Ne of Xe)if(Ne.type==="trace"){for(const le of Ne.points)if(le.id===Ae)return{x:le.x,y:le.y}}for(const Ne of g)if(Ne.pointId===Ae)return{x:Ne.x,y:Ne.y};for(const Ne of j)if(Ne.pointId===Ae)return{x:Ne.x,y:Ne.y};return null},me=De=>{const Ae=De.pinConnections||[],Ne=Uf(De)&&De.pinPolarities,ge=Fl(De)?.category==="Semiconductors",ce=new Map;for(let de=0;de<Ae.length;de++){const Me=Ae[de];if(Me&&Me.trim()!==""){const Re=Me.trim(),$e=ge&&de===0,ht=!!(Ne&&De.pinPolarities&&de<De.pinPolarities.length&&De.pinPolarities[de]==="-"),mt=ce.get(Re);mt!==void 0?ce.set(Re,{isNegative:mt.isNegative||ht,hasPin1:mt.hasPin1||$e}):ce.set(Re,{isNegative:ht,hasPin1:$e})}}for(const[de,Me]of ce){const{isNegative:Re,hasPin1:$e}=Me,ht=ze(de);if(ht){const mt={x:De.x,y:De.y},Tt=parseInt(de,10),tt=`${De.id}:${Tt}`,Yt=yt.has(tt);x.save(),Yt?(x.strokeStyle="#00bfff",x.lineWidth=Math.max(2,Zt*1.5/Math.max(Ke,.001)),x.setLineDash([4,3])):(Re?x.strokeStyle="rgba(0, 0, 0, 0.8)":$e?x.strokeStyle=o2(Gt,.4):x.strokeStyle=Gt,x.lineWidth=Math.max(1,Zt/Math.max(Ke,.001))),x.beginPath(),x.moveTo(mt.x,mt.y),x.lineTo(ht.x,ht.y),x.stroke(),x.setLineDash([]),x.restore()}}};Bi&&Jt.forEach(me),Ma&&on.forEach(me)}if(Bi&&Jt.forEach(B),Ma&&on.forEach(B),cl&&Al){x.save();const ze=Al.start,me=Al.end,De=Math.min(ze.x,me.x),Ae=Math.min(ze.y,me.y),Ne=Math.max(ze.x,me.x),le=Math.max(ze.y,me.y),ge=Ne-De,ce=le-Ae,de=Math.max(2,6/Math.max(1e-4,Ke));x.strokeStyle="#ff8800",x.fillStyle="rgba(255, 136, 0, 0.2)",x.lineWidth=Math.max(1,2/Math.max(1e-4,Ke)),x.setLineDash([de,de]),x.beginPath(),x.rect(De,Ae,ge,ce),x.fill(),x.stroke(),x.fillStyle="#ff8800",x.beginPath(),x.arc(ze.x,ze.y,Math.max(3,6/Math.max(1e-4,Ke)),0,Math.PI*2),x.fill(),x.setLineDash([]),x.restore()}if(z==="select"&&Bc){x.save();const ze=Math.max(2,6/Math.max(1e-4,Ke));x.strokeStyle="#00bfff",x.fillStyle="rgba(0, 191, 255, 0.15)",x.lineWidth=Math.max(1,1.5/Math.max(1e-4,Ke)),x.setLineDash([ze,ze]),x.beginPath(),x.rect(Bc.x,Bc.y,Bc.width,Bc.height),x.fill(),x.stroke(),x.setLineDash([]),x.restore()}x.save();const re=50,P=2/Ke;x.strokeStyle="#FF0000",x.lineWidth=P,x.lineCap="round",x.lineJoin="round",x.beginPath(),x.moveTo(-re,0),x.lineTo(re,0),x.stroke(),x.fillStyle="#FF0000",x.font=`${12/Ke}px sans-serif`,x.textAlign="left",x.textBaseline="top",x.fillText("+X",re+2/Ke,2/Ke),x.textAlign="right",x.fillText("-X",-re-2/Ke,2/Ke),x.strokeStyle="#0000FF",x.lineWidth=P,x.lineCap="round",x.lineJoin="round",x.beginPath(),x.moveTo(0,-re),x.lineTo(0,re),x.stroke(),x.fillStyle="#0000FF",x.font=`${12/Ke}px sans-serif`,x.textAlign="left",x.textBaseline="top",x.fillText("+Y",2/Ke,re+2/Ke),x.textBaseline="bottom",x.fillText("-Y",2/Ke,-re-2/Ke),x.restore(),x.restore()},[a,l,b,Xe,_t,Pt,z,J,oe,K,Ot,Bt,Ke,nr.x,nr.y,$t,En,Rr,sl,mr,br,Qr,Ra,Zi,es,gs,Bi,Ma,Jt,on,jo,g,dr,j,fr,Bc,oi,gn,li,ci,yt,Zn,E,F,$,Pe,it,qt,Di,Gt,Zt,Mr,Gn,cl,Al]);Dt.useEffect(()=>{const c=()=>{const x=cc.current;if(!x)return;const N=1.6,B=244,re=12,ye=6,P=12,ze=x.clientWidth-B-re,me=x.getBoundingClientRect(),De=window.innerHeight,Ae=me.top,le=De-Ae-ye-10,ge=Math.min(x.clientHeight-P,le),ce=Math.floor(ge*N),de=Math.floor(ze/N);let Me,Re;ce<=ze?(Me=ce,Re=ge):(Me=ze,Re=de),Me=Math.max(600,Me),Re=Math.max(375,Re),Re=Math.max(355,Re-20),qa($e=>{const ht=$e.width===0&&$e.height===0,mt=$e.width!==Me||$e.height!==Re;return ht&&mt&&setTimeout(()=>{ai({x:0,y:0})},0),$e.width===Me&&$e.height===Re?$e:{width:Me,height:Re}})};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[rs,ai]),Dt.useEffect(()=>{Di&&(In&&(er(!1),Ft(null)),ji(null))},[Di,In,er,Ft,ji]);const lh=M.useCallback(c=>{if(Xe.forEach(x=>{if(x.type==="via"||x.type==="pad"||x.type==="testPoint"||x.testPointType!==void 0||x.type!=="trace")return;let N=!1;if(x.layer==="top"?N=br:x.layer==="bottom"&&(N=Qr),!!N){if(x.points.length===1){const B=x.points[0],re=Math.max(.5,x.size/2);oi.has(x.id)&&(c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.arc(B.x,B.y,re+3,0,Co),c.stroke(),c.setLineDash([])),c.fillStyle=x.color,c.beginPath(),c.arc(B.x,B.y,re,0,Co),c.fill()}else if(oi.has(x.id)&&(c.strokeStyle="#00bfff",c.lineWidth=x.size+4,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.6,c.beginPath(),x.points.forEach((B,re)=>{re===0?c.moveTo(B.x,B.y):c.lineTo(B.x,B.y)}),c.stroke(),c.globalAlpha=1),c.strokeStyle=x.color,c.lineWidth=x.size,c.lineCap="round",c.lineJoin="round",c.globalAlpha=1,c.beginPath(),x.points.forEach((B,re)=>{re===0?c.moveTo(B.x,B.y):c.lineTo(B.x,B.y)}),c.stroke(),Mr){c.fillStyle="#000000";for(const B of x.points)c.beginPath(),c.arc(B.x,B.y,x.size/2,0,Co),c.fill()}}}),Xe.forEach(x=>{if(x.type==="via"){if(!mr)return}else if(x.type==="pad"){const B=x.layer||"top";if(B==="top"&&!Ra||B==="bottom"&&!Zi)return}else if(x.type==="testPoint"){const B=x.layer||"top";if(B==="top"&&!es||B==="bottom"&&!gs)return}else return;const N=x.points[0];if(oi.has(x.id)){if(x.type==="via"){const B=Math.max(.5,x.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.arc(N.x,N.y,B,0,Co),c.stroke(),c.setLineDash([])}else if(x.type==="pad"){const B=Math.max(.5,x.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.strokeRect(N.x-B,N.y-B,x.size+6,x.size+6),c.setLineDash([])}else if(x.type==="testPoint"){const B=Math.max(.5,x.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.moveTo(N.x,N.y-B),c.lineTo(N.x+B,N.y),c.lineTo(N.x,N.y+B),c.lineTo(N.x-B,N.y),c.closePath(),c.stroke(),c.setLineDash([])}}if(x.type==="via"){const B=Math.max(.5,x.size/2),re=B*.5,ye=B*.7;c.fillStyle=x.color,c.beginPath(),c.arc(N.x,N.y,B,0,Co),c.arc(N.x,N.y,re,0,Co),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(N.x-ye,N.y),c.lineTo(N.x+ye,N.y),c.stroke(),c.beginPath(),c.moveTo(N.x,N.y-ye),c.lineTo(N.x,N.y+ye),c.stroke()}else if(x.type==="pad"){const B=Math.max(.5,x.size/2),re=x.size,ye=re*.5,P=B*.7;c.fillStyle=x.color,c.beginPath(),c.rect(N.x-B,N.y-B,re,re),c.rect(N.x-ye/2,N.y-ye/2,ye,ye),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(N.x-P,N.y),c.lineTo(N.x+P,N.y),c.stroke(),c.beginPath(),c.moveTo(N.x,N.y-P),c.lineTo(N.x,N.y+P),c.stroke()}else if(x.type==="testPoint"){const B=Math.max(.5,x.size/2),re=B*.7;c.fillStyle=x.color||"#FFFF00",c.strokeStyle="#000000",c.lineWidth=2,c.beginPath(),c.moveTo(N.x,N.y-B),c.lineTo(N.x+B,N.y),c.lineTo(N.x,N.y+B),c.lineTo(N.x-B,N.y),c.closePath(),c.fill(),c.stroke(),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(N.x-re,N.y),c.lineTo(N.x+re,N.y),c.stroke(),c.beginPath(),c.moveTo(N.x,N.y-re),c.lineTo(N.x,N.y+re),c.stroke()}}),_t.length>0){const x=Bt;let N=!0;if(z==="draw"&&(it==="via"?N=mr:N=x==="top"?br:Qr),N)if(z==="draw")if(it==="via"){const B=_t[_t.length-1],re=Math.max(.5,oe/2),ye=re*.5,P=re*.7;c.fillStyle=J,c.beginPath(),c.arc(B.x,B.y,re,0,Co),c.arc(B.x,B.y,ye,0,Co),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(B.x-P,B.y),c.lineTo(B.x+P,B.y),c.stroke(),c.beginPath(),c.moveTo(B.x,B.y-P),c.lineTo(B.x,B.y+P),c.stroke()}else if(it==="pad"){const B=_t[_t.length-1],re=Math.max(.5,oe/2),ye=oe,P=ye*.5,ze=re*.7;c.fillStyle=J,c.beginPath(),c.rect(B.x-re,B.y-re,ye,ye),c.rect(B.x-P/2,B.y-P/2,P,P),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(B.x-ze,B.y),c.lineTo(B.x+ze,B.y),c.stroke(),c.beginPath(),c.moveTo(B.x,B.y-ze),c.lineTo(B.x,B.y+ze),c.stroke()}else if(it==="testPoint"){const B=_t[_t.length-1],re=Math.max(.5,oe/2),ye=re*.7;c.fillStyle=J,c.beginPath(),c.moveTo(B.x,B.y-re),c.lineTo(B.x+re,B.y),c.lineTo(B.x,B.y+re),c.lineTo(B.x-re,B.y),c.closePath(),c.fill(),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(B.x-ye,B.y),c.lineTo(B.x+ye,B.y),c.stroke(),c.beginPath(),c.moveTo(B.x,B.y-ye),c.lineTo(B.x,B.y+ye),c.stroke()}else{const B=Zn||"top",re=B==="top"?E:F,ye=B==="top"?$:Pe;if(_t.length===1){const P=_t[0],ze=Math.max(.5,ye/2);c.fillStyle=re,c.beginPath(),c.arc(P.x,P.y,ze,0,Co),c.fill(),qt&&(c.strokeStyle=re,c.lineWidth=ye,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.6,c.beginPath(),c.moveTo(P.x,P.y),c.lineTo(qt.x,qt.y),c.stroke(),c.globalAlpha=1)}else if(c.strokeStyle=re,c.lineWidth=ye,c.lineCap="round",c.lineJoin="round",c.globalAlpha=1,c.beginPath(),_t.forEach((P,ze)=>{ze===0?c.moveTo(P.x,P.y):c.lineTo(P.x,P.y)}),c.stroke(),qt&&_t.length>0){const P=_t[_t.length-1];c.globalAlpha=.6,c.beginPath(),c.moveTo(P.x,P.y),c.lineTo(qt.x,qt.y),c.stroke(),c.globalAlpha=1}}else z==="erase"&&(c.strokeStyle="rgba(255, 0, 0, 0.5)",c.lineWidth=oe,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.5,c.beginPath(),_t.forEach((B,re)=>{re===0?c.moveTo(B.x,B.y):c.lineTo(B.x,B.y)}),c.stroke())}},[Xe,oi,br,Qr,mr,Ra,Zi,es,gs,_t,z,it,J,oe,Bt,Zn,E,F,$,Pe,qt,Mr]),Pu=M.useCallback((c,x)=>{if(Di){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}c==="top"&&a?s(N=>N?{...N,...x}:null):c==="bottom"&&l?d(N=>N?{...N,...x}:null):c==="both"&&(a&&s(N=>N?{...N,...x}:null),l&&d(N=>N?{...N,...x}:null))},[a,l,Di]),zd=M.useCallback(()=>{Ot&&(Pu(Ot,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,brightness:100,contrast:100}),R(!1))},[Pu,Ot]),Pd=M.useCallback((c=1)=>{if(oi.size>0||gn.size>0||li.size>0||ci.size>0){if(oi.size>0){const x=Xe.filter(ye=>oi.has(ye.id)),N=Mi&&x.some(ye=>ye.type==="via"),B=da&&x.some(ye=>ye.type==="trace"),re=sr&&x.some(ye=>ye.type==="pad");if(N){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(B){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(re){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(gn.size>0&&Dr){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(li.size>0&&ui){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(ci.size>0&&fa){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(et(x=>x.map(N=>{if(oi.has(N.id)){const B=N.size+c;return N.type==="via"?Rt("via",B):N.type==="pad"?Rt("pad",B):N.type==="trace"&&Rt("trace",B,N.layer),{...N,size:B}}return N})),gn.size>0){const x=(gn.size>0&&Jt.find(N=>gn.has(N.id))?.size||18)+c;Rt("component",x),_i(N=>N.map(B=>gn.has(B.id)?{...B,size:(B.size||18)+c}:B)),Xn(N=>N.map(B=>gn.has(B.id)?{...B,size:(B.size||18)+c}:B))}if(li.size>0){const x=(g.find(N=>li.has(N.id))?.size||18)+c;Rt("power",x),Be(N=>N.map(B=>li.has(B.id)?{...B,size:B.size+c}:B))}if(ci.size>0){const x=(j.find(N=>ci.has(N.id))?.size||18)+c;Rt("ground",x),ut(N=>N.map(B=>ci.has(B.id)?{...B,size:(B.size||18)+c}:B))}}else{let x=null;if(z==="draw"&&it==="via"?x="via":z==="draw"&&it==="pad"?x=As.current==="bottom"?"padBottom":"padTop":z==="draw"&&it==="testPoint"?x=zs.current==="bottom"?"testPointBottom":"testPointTop":z==="draw"&&it==="trace"?x=fo.current==="bottom"?"traceBottom":"traceTop":z==="component"?x=Ao.current==="bottom"?"componentBottom":"componentTop":z==="power"?x="power":z==="ground"&&(x="ground"),x){const N=Bn.get(x),B=Math.min(40,N.size+c);Bn.setSize(x,B)}}},[oi,gn,li,ci,Xe,Mi,da,sr,ya,Dr,ui,fa,z,it,Rt]),_d=M.useCallback((c=1)=>{if(oi.size>0||gn.size>0||li.size>0||ci.size>0){if(oi.size>0){const x=Xe.filter(P=>oi.has(P.id)),N=Mi&&x.some(P=>P.type==="via"),B=da&&x.some(P=>P.type==="trace"),re=sr&&x.some(P=>P.type==="pad"),ye=ya&&x.some(P=>P.type==="testPoint");if(N){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(B){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(re){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}if(ye){alert("Cannot change size: Test Points are locked. Unlock test points to change their size.");return}}if(gn.size>0&&Dr){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(li.size>0&&ui){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(ci.size>0&&fa){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(et(x=>x.map(N=>{if(oi.has(N.id)){const B=Math.max(1,N.size-c);return N.type==="via"?Rt("via",B):N.type==="pad"?Rt("pad",B,N.layer):N.type==="testPoint"?Rt("testPoint",B,N.layer):N.type==="trace"&&Rt("trace",B,N.layer),{...N,size:B}}return N})),gn.size>0){const x=Math.max(12,(gn.size>0&&Jt.find(N=>gn.has(N.id))?.size||18)-c);Rt("component",x),_i(N=>N.map(B=>gn.has(B.id)?{...B,size:Math.max(12,(B.size||18)-c)}:B)),Xn(N=>N.map(B=>gn.has(B.id)?{...B,size:Math.max(12,(B.size||18)-c)}:B))}if(li.size>0){const x=Math.max(12,(g.find(N=>li.has(N.id))?.size||18)-c);Rt("power",x),Be(N=>N.map(B=>li.has(B.id)?{...B,size:Math.max(12,B.size-c)}:B))}if(ci.size>0){const x=Math.max(12,(j.find(N=>ci.has(N.id))?.size||18)-c);Rt("ground",x),ut(N=>N.map(B=>ci.has(B.id)?{...B,size:Math.max(12,(B.size||18)-c)}:B))}}else{let x=null;if(z==="draw"&&it==="via"?x="via":z==="draw"&&it==="pad"?x=(Bt||bi||"top")==="bottom"?"padBottom":"padTop":z==="draw"&&it==="testPoint"?x=(Bt||Fn||"top")==="bottom"?"testPointBottom":"testPointTop":z==="draw"&&it==="trace"?x=(Bt||Zn||"top")==="bottom"?"traceBottom":"traceTop":z==="component"?x=(Bt||xi||"top")==="bottom"?"componentBottom":"componentTop":z==="power"?x="power":z==="ground"&&(x="ground"),x){const N=Bn.get(x),B=Math.max(1,N.size-c);Bn.setSize(x,B)}}},[oi,gn,li,ci,Xe,Mi,da,sr,ya,Dr,ui,fa,z,it,Bt,bi,Fn,Zn,xi,Rt]),rp=M.useCallback(()=>{const c=za.size;if(oi.size>0||gn.size>0||li.size>0||ci.size>0){if(oi.size>0){const x=Xe.filter(P=>oi.has(P.id)),N=Mi&&x.some(P=>P.type==="via"),B=sr&&x.some(P=>P.type==="pad"),re=da&&x.some(P=>P.type==="trace"),ye=ya&&x.some(P=>P.type==="testPoint");if(N||B||re||ye){alert("Cannot change size: selected items are locked.");return}}if(gn.size>0&&Dr){alert("Cannot change size: selected components are locked.");return}if(li.size>0&&ui){alert("Cannot change size: selected power nodes are locked.");return}if(ci.size>0&&fa){alert("Cannot change size: selected ground nodes are locked.");return}et(x=>x.map(N=>oi.has(N.id)?(N.type==="via"?(Rt("via",c),Hn(B=>{const re=new Map(B),ye=re.get("via");return ye&&re.set("via",{...ye,settings:{...ye.settings,size:c}}),re})):N.type==="pad"?(Rt("pad",c,N.layer),Hn(B=>{const re=new Map(B),ye=re.get("pad");if(ye){const P=new Map(ye.layerSettings);P.set(N.layer,{...P.get(N.layer)||{color:ye.settings.color,size:c},size:c}),re.set("pad",{...ye,layerSettings:P})}return re})):N.type==="testPoint"?(Rt("testPoint",c,N.layer),Hn(B=>{const re=new Map(B),ye=re.get("testPoint");if(ye){const P=new Map(ye.layerSettings);P.set(N.layer,{...P.get(N.layer)||{color:ye.settings.color,size:c},size:c}),re.set("testPoint",{...ye,layerSettings:P})}return re})):N.type==="trace"&&Rt("trace",c,N.layer),{...N,size:c}):N)),gn.size>0&&(Rt("component",c),_i(x=>x.map(N=>gn.has(N.id)?{...N,size:c}:N)),Xn(x=>x.map(N=>gn.has(N.id)?{...N,size:c}:N))),li.size>0&&(Rt("power",c),Be(x=>x.map(N=>li.has(N.id)?{...N,size:c}:N))),ci.size>0&&(Rt("ground",c),ut(x=>x.map(N=>ci.has(N.id)?{...N,size:c}:N)))}else ie(c),z==="draw"&&it==="trace"?Bt==="top"?(H(c),Rt("trace",c,"top")):(ae(c),Rt("trace",c,"bottom")):z==="draw"&&it==="via"?Rt("via",c):z==="draw"&&it==="pad"?Rt("pad",c,Bt):z==="draw"&&it==="testPoint"?Rt("testPoint",c,Bt):Rt(z==="component"?"component":z==="power"?"power":z==="ground"?"ground":"brush",c);ss({visible:!1,size:6})},[za.size,oi,gn,li,ci,Xe,Mi,da,Dr,ui,fa,z,it,Bt,Rt,Wn,Hn]),ff=M.useCallback(()=>{na({visible:!1,source:null,interval:5})},[]),Dd=M.useCallback(async(c,x=!1)=>{if(c===null){io(!1),Es(null),$i.current&&(clearInterval($i.current),$i.current=null),ls({visible:!1,interval:5}),x&&na({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!Hr){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let N=Ti;if(!N){const P=window;if(typeof P.showDirectoryPicker=="function")try{N=await P.showDirectoryPicker(),Vr(N)}catch(ze){ze?.name!=="AbortError"&&(console.error("Failed to get directory:",ze),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}yl(N);const B=Hr.replace(/\.json$/i,""),ye=pd(B).replace(/[^a-zA-Z0-9_-]/g,"_");Io(ye),Ml.current=N,bs.current=ye,Es(c),io(!0),cr.current=!0,ls({visible:!1,interval:5}),x&&na({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${c} minutes`),zc.current&&zc.current()},200)},[Hr,Ti,io,Es,yl,Io,ls,na,Vr]),ou=M.useCallback(()=>{bt(),w("select")},[bt]),Rd=M.useCallback(c=>{if(c.key==="Escape"){const P=document.activeElement;if(P&&(P.tagName==="INPUT"&&P.type==="checkbox"||P.tagName==="INPUT"&&P.type==="radio")){P.blur(),c.preventDefault(),c.stopPropagation();return}}const x=document.activeElement;if(x&&(x.tagName==="INPUT"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable))return;const N=ec.current>0;if(N&&c.key!=="m"&&c.key!=="M")return;const B=parseInt(c.key);if(!isNaN(B)&&B>=0&&B<=9){if(c.preventDefault(),c.stopPropagation(),z==="center"&&Pc){if(Zr.current&&(clearTimeout(Zr.current),Zr.current=null),or.current){let me=0,De=0;a?(me=a.x,De=a.y):l&&(me=l.x,De=l.y),rl(Ae=>({...Ae,[B]:{pcbReferenceX:me,pcbReferenceY:De,x:0,y:0,zoom:Ke,viewRotation:$t,viewFlipX:En,isBottomView:to,transparency:b,showTopImage:Rr,showBottomImage:sl,showViasLayer:mr,showTopTracesLayer:br,showBottomTracesLayer:Qr,showTopPadsLayer:Ra,showBottomPadsLayer:Zi,showTopTestPointsLayer:es,showBottomTestPointsLayer:gs,showTopComponents:Bi,showBottomComponents:Ma,showPowerLayer:jo,showGroundLayer:dr,showConnectionsLayer:fr}}))}oa(!1),w("select"),Ea(void 0);return}const P=Ko[B];if(P){Vt(P.zoom),On(P.viewRotation??0),Hi(P.viewFlipX??!1),Pa(P.isBottomView??!1),y(P.transparency??50);const ze=P.pcbReferenceX??P.x??0,me=P.pcbReferenceY??P.y??0;let De=0,Ae=0;a?(De=a.x,Ae=a.y):l&&(De=l.x,Ae=l.y);const Ne=ze-De,le=me-Ae;(Math.abs(Ne)>.001||Math.abs(le)>.001)&&(a&&s({...a,x:a.x+Ne,y:a.y+le}),l&&d({...l,x:l.x+Ne,y:l.y+le}),_i(Jt.map(ge=>({...ge,x:ge.x+Ne,y:ge.y+le}))),Xn(on.map(ge=>({...ge,x:ge.x+Ne,y:ge.y+le}))),Be(Se.map(ge=>({...ge,x:ge.x+Ne,y:ge.y+le}))),ut(Ve.map(ge=>({...ge,x:ge.x+Ne,y:ge.y+le}))),et(Xe.map(ge=>({...ge,points:ge.points.map(ce=>({...ce,x:ce.x+Ne,y:ce.y+le}))}))),zo(Fa.map(ge=>({...ge,x:ge.x+Ne,y:ge.y+le}))),Fi(Mt.map(ge=>({...ge,x:ge.x+Ne,y:ge.y+le})))),ai({x:0,y:0}),sa(P.showTopImage),pa(P.showBottomImage),_a(P.showViasLayer),ro(P.showTopTracesLayer),Da(P.showBottomTracesLayer),La(P.showTopPadsLayer),Bo(P.showBottomPadsLayer),Tl(P.showTopTestPointsLayer),Cl(P.showBottomTestPointsLayer),Va(P.showTopComponents),ao(P.showBottomComponents),f(P.showPowerLayer),mi(P.showGroundLayer),Lr(P.showConnectionsLayer)}return}if(c.key==="+"||c.key==="="){c.preventDefault(),c.stopPropagation(),Pd(c.shiftKey?5:1);return}if(c.key==="-"||c.key==="_"){c.preventDefault(),c.stopPropagation(),_d(c.shiftKey?5:1);return}const re=c.shiftKey||c.getModifierState("CapsLock"),ye=z==="transform"&&Ot;if(c.key==="ArrowUp"||c.key==="ArrowDown"||c.key==="ArrowLeft"||c.key==="ArrowRight"){if(gn.size>0){c.preventDefault(),c.stopPropagation();const P=c.shiftKey?10:1;let ze=0,me=0;c.key==="ArrowUp"?me=-P:c.key==="ArrowDown"?me=P:c.key==="ArrowLeft"?ze=-P:c.key==="ArrowRight"&&(ze=P);for(const De of gn){const Ae=Jt.find(Ne=>Ne.id===De);if(Ae){const Ne=Ae.x+ze,le=Ae.y+me,ge=rr({x:Ne,y:le});_i(ce=>ce.map(de=>de.id===De?{...de,x:ge.x,y:ge.y}:de))}else{const Ne=on.find(le=>le.id===De);if(Ne){const le=Ne.x+ze,ge=Ne.y+me,ce=rr({x:le,y:ge});Xn(de=>de.map(Me=>Me.id===De?{...Me,x:ce.x,y:ce.y}:Me))}}}return}if(re&&!ye&&gn.size===0){if(c.key==="ArrowUp"||c.key==="ArrowDown"){c.preventDefault(),c.stopPropagation();const P=c.key==="ArrowUp"?-90:90;Ql(P);return}else if(c.key==="ArrowLeft"||c.key==="ArrowRight"){c.preventDefault(),c.stopPropagation(),eu();return}}}if((c.key==="I"||c.key==="i")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;c.preventDefault(),c.stopPropagation();const me=[];oi.size>0,oi.size===0&&gn.size===0&&li.size===0&&ci.size===0&&me.push(`
No objects selected.`);const De=me.join(`
`);console.log(De),Is({visible:!0,text:De});return}if((c.key==="N"||c.key==="n")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;c.preventDefault(),c.stopPropagation(),zi(!0);return}if((c.key==="L"||c.key==="l")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;c.preventDefault(),c.stopPropagation(),pf();return}if((c.key==="E"||c.key==="e")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;c.preventDefault(),c.stopPropagation(),en||ds(!0);return}if(c.key==="O"||c.key==="o"){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;c.preventDefault(),c.stopPropagation();const me=Ko[0];if(me){Vt(me.zoom),On(me.viewRotation??0),Hi(me.viewFlipX??!1),Pa(me.isBottomView??!1),y(me.transparency??50);const De=me.pcbReferenceX??me.x??0,Ae=me.pcbReferenceY??me.y??0;let Ne=0,le=0;a?(Ne=a.x,le=a.y):l&&(Ne=l.x,le=l.y);const ge=De-Ne,ce=Ae-le;(Math.abs(ge)>.001||Math.abs(ce)>.001)&&(a&&s({...a,x:a.x+ge,y:a.y+ce}),l&&d({...l,x:l.x+ge,y:l.y+ce}),_i(Jt.map(de=>({...de,x:de.x+ge,y:de.y+ce}))),Xn(on.map(de=>({...de,x:de.x+ge,y:de.y+ce}))),Be(Se.map(de=>({...de,x:de.x+ge,y:de.y+ce}))),ut(Ve.map(de=>({...de,x:de.x+ge,y:de.y+ce}))),et(Xe.map(de=>({...de,points:de.points.map(Me=>({...Me,x:Me.x+ge,y:Me.y+ce}))}))),zo(Fa.map(de=>({...de,x:de.x+ge,y:de.y+ce}))),Fi(Mt.map(de=>({...de,x:de.x+ge,y:de.y+ce})))),sa(me.showTopImage),pa(me.showBottomImage),_a(me.showViasLayer),ro(me.showTopTracesLayer),Da(me.showBottomTracesLayer),La(me.showTopPadsLayer),Bo(me.showBottomPadsLayer),Tl(me.showTopTestPointsLayer),Cl(me.showBottomTestPointsLayer),Va(me.showTopComponents),ao(me.showBottomComponents),f(me.showPowerLayer),mi(me.showGroundLayer),Lr(me.showConnectionsLayer)}else Vt(1),On(0),Hi(!1),Pa(!1),y(0);ai({x:0,y:0}),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),p("overlay"),An(new Set),Cn(new Set),hn(new Set),yn(new Set),w("select");return}if((c.key==="Alt"||c.altKey)&&(Ad(!0),Jo(!0)),c.key==="Escape"){c.preventDefault(),c.stopPropagation(),ou(),Ic(!1),Zu(!1),Tu(!1),Ye(!1),xo(!1),Qf(null);return}if(c.key==="Enter"&&z==="draw"&&it==="trace"){rd();return}if((c.key==="Delete"||c.key==="Backspace")&&(oi.size>0||gn.size>0||li.size>0||ci.size>0)){if(c.preventDefault(),c.stopPropagation(),vn(Xe,Jt,on,Se,Ve),oi.size>0){const P=Xe.filter(Ne=>oi.has(Ne.id)),ze=Mi&&P.some(Ne=>Ne.type==="via"),me=da&&P.some(Ne=>Ne.type==="trace"),De=sr&&P.some(Ne=>Ne.type==="pad"),Ae=ya&&P.some(Ne=>Ne.type==="testPoint");ze?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):me?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):De?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):Ae?alert("Cannot delete: Test points are locked. Unlock test points to delete them."):(et(Ne=>Ne.filter(le=>!oi.has(le.id))),An(new Set))}gn.size>0&&(Dr?alert("Cannot delete: Components are locked. Unlock components to delete them."):(_i(P=>P.filter(ze=>!gn.has(ze.id))),Xn(P=>P.filter(ze=>!gn.has(ze.id))),Cn(new Set))),li.size>0&&(ui?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Be(P=>P.filter(ze=>!li.has(ze.id))),hn(new Set))),ci.size>0&&(fa?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(ut(P=>P.filter(ze=>!ci.has(ze.id))),yn(new Set)));return}if((c.key==="z"||c.key==="Z")&&(c.ctrlKey||c.metaKey)&&!c.shiftKey&&!c.altKey){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;c.preventDefault(),c.stopPropagation();const me=ni();if(me){const De=new Set(me.drawingStrokes.map(ge=>ge.id));for(const ge of Xe)if(!De.has(ge.id))for(const ce of ge.points)ce.id&&typeof ce.id=="number"&&Mp(ce.id);const Ae=new Set([...me.componentsTop.map(ge=>ge.id),...me.componentsBottom.map(ge=>ge.id)]);for(const ge of[...Jt,...on])if(!Ae.has(ge.id)){for(const ce of ge.pinConnections)if(ce&&ce.trim()!==""){const de=parseInt(ce,10);!isNaN(de)&&de>0&&Mp(de)}}const Ne=new Set(me.powerSymbols.map(ge=>ge.id));for(const ge of Se)!Ne.has(ge.id)&&ge.pointId&&typeof ge.pointId=="number"&&Mp(ge.pointId);const le=new Set(me.groundSymbols.map(ge=>ge.id));for(const ge of Ve)!le.has(ge.id)&&ge.pointId&&typeof ge.pointId=="number"&&Mp(ge.pointId);et(me.drawingStrokes),_i(me.componentsTop),Xn(me.componentsBottom),Be(me.powerSymbols),ut(me.groundSymbols),Ut([])}return}if((c.key==="c"||c.key==="C")&&(c.ctrlKey||c.metaKey)&&!c.shiftKey&&!c.altKey){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;if(gn.size===1){c.preventDefault(),c.stopPropagation();const me=Array.from(gn)[0],De=[...Jt,...on].find(Ae=>Ae.id===me);De&&(Nd(De),console.log("Component copied:",De.id,De.designator))}return}if((c.key==="v"||c.key==="V")&&(c.ctrlKey||c.metaKey)&&!c.shiftKey&&!c.altKey){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;if(ms&&!Dr){c.preventDefault(),c.stopPropagation();const me=[...Jt,...on];let De;ir?De=Df():De={...ur.current};let Ae;if(ms.designator){const ce=ms.designator.match(/^([A-Za-z]+)(\d+)$/);ce?Ae=ce[1]:Ae=Kh(ms.componentType)}else Ae=Kh(ms.componentType);const Ne=l2(Ae,me,De),le=`${Ae}${Ne}`;if(ir){const ce=Df();u1(Ae,Ne,ce)}else ur.current[Ae]=Math.max(ur.current[Ae]||0,Ne);const ge={...ms,id:Ix("comp"),designator:le,pinConnections:new Array(ms.pinCount).fill(""),pinPolarities:ms.pinPolarities?new Array(ms.pinCount).fill(""):void 0,x:ms.x+5,y:ms.y+5};ms.pinNames&&(ge.pinNames=[...ms.pinNames]),ge.layer==="top"?_i(ce=>[...ce,ge]):Xn(ce=>[...ce,ge]),bt(),Cn(new Set([ge.id])),console.log("Component pasted:",ge.id,ge.designator)}return}if(c.code==="KeyV"&&c.altKey&&!c.ctrlKey&&!c.shiftKey&&!N){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;c.preventDefault(),c.stopPropagation(),kl(!1),Ir(!0);return}if(c.code==="KeyP"&&c.altKey&&!c.ctrlKey&&!c.shiftKey&&!N){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;c.preventDefault(),c.stopPropagation(),kl(!0),Ir(!0);return}if((c.key==="a"||c.key==="A")&&!c.ctrlKey&&!c.altKey&&!c.shiftKey&&!N){const P=document.activeElement;if(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable))return;if(gn.size>0){c.preventDefault(),c.stopPropagation();const me=Array.from(gn),De=me[me.length-1];let Ae=null,Ne=null;Ae=Jt.find(le=>le.id===De)||null,Ae?Ne="top":(Ae=on.find(le=>le.id===De)||null,Ae&&(Ne="bottom")),Ae&&Ne&&as(Ae,Ne)}return}if(!c.ctrlKey&&!c.altKey){const P=document.activeElement;if(!(!!P&&(P.tagName==="INPUT"&&P.type!=="range"&&P.type!=="checkbox"&&P.type!=="radio"||P.tagName==="TEXTAREA"||P.isContentEditable)))switch(c.key){case"s":case"S":c.preventDefault(),bt(),ou();return;case"b":case"B":c.preventDefault(),bt(),bn.length===1?(Qe(bn[0].id),w("power"),Ye(!1),f(!0)):bn.length>1?Ye(!0):(Ye(!0),w("power"),f(!0));return;case"g":case"G":c.preventDefault(),bt(),S.length===1?($n(S[0].id),w("ground"),Ln(!1),mi(!0)):S.length>1?Ln(!0):(Ln(!0),w("ground"),mi(!0));return;case"v":case"V":c.preventDefault(),bt(),an("via"),w("draw"),_a(!0);return;case"p":case"P":c.preventDefault(),bt(),an("pad"),w("draw");return;case"y":case"Y":c.preventDefault(),bt(),an("testPoint"),w("draw");return;case"t":case"T":c.preventDefault(),bt(),an("trace"),w("draw");return;case"c":case"C":c.preventDefault(),bt(),w("component"),ru.current?iu(ru.current):iu(null);return;case"e":case"E":c.preventDefault(),bt(),w("erase");return;case"h":case"H":c.preventDefault(),bt(),w("pan");return;case"x":case"X":c.preventDefault(),bt(),w("center"),oa(!0),Zr.current&&clearTimeout(Zr.current),Zr.current=setTimeout(()=>{oa(!1),w("select"),Ea(void 0)},2e3);return;case"m":case"M":if(!c.ctrlKey){c.preventDefault(),bt(),vl(!1),w("magnify");return}break}}if(z==="transform"&&Ot){if(!(c.key==="ArrowLeft"||c.key==="ArrowRight"||c.key==="ArrowUp"||c.key==="ArrowDown"))return;c.preventDefault(),c.stopPropagation();const ze=document.activeElement;if(ze&&ze.tagName==="INPUT"){const me=ze;me.type==="radio"&&me.blur()}if(Di)return;if(Pi==="nudge"){let me=0,De=0;switch(c.key){case"ArrowLeft":me=-1;break;case"ArrowRight":me=1;break;case"ArrowUp":De=-1;break;case"ArrowDown":De=1;break;default:return}Ot==="top"&&a?s(Ae=>Ae?{...Ae,x:Ae.x+me,y:Ae.y+De}:null):Ot==="bottom"&&l?d(Ae=>Ae?{...Ae,x:Ae.x+me,y:Ae.y+De}:null):Ot==="both"&&(a&&s(Ae=>Ae?{...Ae,x:Ae.x+me,y:Ae.y+De}:null),l&&d(Ae=>Ae?{...Ae,x:Ae.x+me,y:Ae.y+De}:null))}else if(Pi==="scale"){let me=0;switch(c.key){case"ArrowUp":me=.01;break;case"ArrowDown":me=-.01;break;case"ArrowRight":me=.001;break;case"ArrowLeft":me=-.001;break;default:return}if(Ot==="top"){a&&s(De=>De?{...De,scale:Math.max(.1,Math.min(3,De.scale+me))}:null);return}if(Ot==="bottom"){l&&d(De=>De?{...De,scale:Math.max(.1,Math.min(3,De.scale+me))}:null);return}if(Ot==="both"){a&&s(De=>De?{...De,scale:Math.max(.1,Math.min(3,De.scale+me))}:null),l&&d(De=>De?{...De,scale:Math.max(.1,Math.min(3,De.scale+me))}:null);return}}else if(Pi==="rotate"){let me=0;switch(c.key){case"ArrowUp":me=1;break;case"ArrowDown":me=-1;break;case"ArrowRight":me=.1;break;case"ArrowLeft":me=-.1;break;default:return}if(Ot==="top"){a&&s(De=>De?{...De,rotation:De.rotation+me}:null);return}if(Ot==="bottom"){l&&d(De=>De?{...De,rotation:De.rotation+me}:null);return}if(Ot==="both"){a&&s(De=>De?{...De,rotation:De.rotation+me}:null),l&&d(De=>De?{...De,rotation:De.rotation+me}:null);return}}else if(Pi==="slant"){let me=0,De=0;switch(c.key){case"ArrowUp":De=-.5;break;case"ArrowDown":De=.5;break;case"ArrowLeft":me=-.5;break;case"ArrowRight":me=.5;break}if(me!==0||De!==0){const Ae=pu,Ne=le=>Math.max(-.7,Math.min(.7,le));if(Ot==="top"){a&&s(le=>le?{...le,skewX:Ne((le.skewX||0)+Ae(me)),skewY:Ne((le.skewY||0)+Ae(De))}:null);return}if(Ot==="bottom"){l&&d(le=>le?{...le,skewX:Ne((le.skewX||0)+Ae(me)),skewY:Ne((le.skewY||0)+Ae(De))}:null);return}if(Ot==="both"){a&&s(le=>le?{...le,skewX:Ne((le.skewX||0)+Ae(me)),skewY:Ne((le.skewY||0)+Ae(De))}:null),l&&d(le=>le?{...le,skewX:Ne((le.skewX||0)+Ae(me)),skewY:Ne((le.skewY||0)+Ae(De))}:null);return}}}else if(Pi==="keystone"){let me=0,De=0;switch(c.key){case"ArrowUp":De=-.5;break;case"ArrowDown":De=.5;break;case"ArrowLeft":me=-.5;break;case"ArrowRight":me=.5;break}if(me!==0||De!==0){const Ae=pu,Ne=le=>Math.max(-.35,Math.min(.35,le));if(Ot==="top"){a&&s(le=>le?{...le,keystoneH:Ne((le.keystoneH||0)+Ae(me)),keystoneV:Ne((le.keystoneV||0)+Ae(De))}:null);return}if(Ot==="bottom"){l&&d(le=>le?{...le,keystoneH:Ne((le.keystoneH||0)+Ae(me)),keystoneV:Ne((le.keystoneV||0)+Ae(De))}:null);return}if(Ot==="both"){a&&s(le=>le?{...le,keystoneH:Ne((le.keystoneH||0)+Ae(me)),keystoneV:Ne((le.keystoneV||0)+Ae(De))}:null),l&&d(le=>le?{...le,keystoneH:Ne((le.keystoneH||0)+Ae(me)),keystoneV:Ne((le.keystoneV||0)+Ae(De))}:null);return}}}}else{const P=c.target;if(P.tagName==="INPUT"&&P.type==="range"){const ze=P,me=Number(ze.value),De=Number(ze.min),Ae=Number(ze.max),Ne=Number(ze.step)||1;switch(c.key){case"ArrowLeft":c.preventDefault();const le=Math.max(De,me-Ne);ze.value=le.toString(),ze.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":c.preventDefault();const ge=Math.min(Ae,me+Ne);ze.value=ge.toString(),ze.dispatchEvent(new Event("input",{bubbles:!0}));break}}}},[z,Ot,Pi,a,l,oi,gn,li,ci,Xe,Jt,on,g,j,bn,it,rd,Zn,E,F,$,Pe,ou,_i,Xn,ni,et,Be,ut,Se,Ve,eu,Ql,Ko,Ke,$t,En,to,b,Vt,On,Hi,Pa,y,s,d,zo,Fi,ai,p,An,Cn,hn,yn,w,Fa,Mt,Rr,sl,mr,br,Qr,Ra,Zi,es,gs,Bi,Ma,jo,dr,fr,sa,pa,_a,ro,Da,La,Bo,Tl,Cl,Va,ao,f,mi,Lr,kl,Ir,as]);Dt.useEffect(()=>{z!=="transform"&&ji(null)},[z]),Dt.useEffect(()=>{window.addEventListener("keydown",Rd,!0);const c=x=>{x.key==="Alt"&&(Ad(!1),Jo(!1),Yl(null))};return window.addEventListener("keyup",c,!0),()=>{window.removeEventListener("keydown",Rd,!0),window.removeEventListener("keyup",c,!0)}},[Rd,li,ci,ui,ui,g,j,Pd,_d,ou,gn,Jt,on,_i,Xn,Ko,Pc,z]);const gc=M.useCallback(()=>{ur.current={},Y("#AA4499"),L("#F781BF"),H(6),ae(6),Le("trace","#AA4499","top"),Le("trace","#F781BF","bottom"),Rt("trace",6,"top"),Rt("trace",6,"bottom"),pe("#0072B2"),fe("#56B4E9"),A(18),q(18),Le("pad","#0072B2","top"),Le("pad","#56B4E9","bottom"),Rt("pad",18,"top"),Rt("pad",18,"bottom"),It("#6A3D9A"),jt("#9467BD"),Wt(18),Je(18),Le("component","#6A3D9A","top"),Le("component","#9467BD","bottom"),Rt("component",18,"top"),Rt("component",18,"bottom"),ka("top"),ue("#AA4499"),ie(6),os([{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),U([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),Rt("power",18),Rt("ground",18),Xi(!1),Nr(!1),Ms(!1),Ja(!1),Do(!1),$o(!1),Kt("top"),w("select"),y(50),D(!1),p("overlay"),l1(),wi()},[Le,Rt,wi]),Oc=M.useCallback(()=>{Vr(null),yl(null),Oo&&(Oo.current=null),Ml&&(Ml.current=null),hr(""),mo("pcb_project"),io(!1),Es(null),Io(""),Fs([]),ps(-1),bs&&(bs.current=""),cr.current=!1,Mo(!1),Pa(!1),Xo(null),Ii(null),$i.current&&(clearInterval($i.current),$i.current=null),s(null),d(null),wi(),et([]),zo([]),Fi([]),Xs([]),Ho([]),Ut([]),dn.current=[],_i([]),Xn([]),Po(null),Ds(null),Be([]),ut([]),sn(null),os([{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),U([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),An(new Set),Cn(new Set),hn(new Set),yn(new Set),Za(!1),zn([]),p("overlay"),Vt(1),No(0,0),ko(!0),Kt("top"),rl({}),oa(!1),Zr.current&&(clearTimeout(Zr.current),Zr.current=null),ji(null),er(!1),Ft(null),gi("nudge"),R(!1),y(50),D(!1),T(2e3),Xi(!1),Nr(!1),Wo(!1),Ls(!1),Ms(!1),Ja(!1),Do(!1),$o(!1),sa(!0),pa(!0),_a(!0),ro(!0),Da(!0),La(!0),Bo(!0),Tl(!0),Cl(!0),Va(!0),ao(!0),f(!0),mi(!0),Lr(!0),di(!0),w("select"),an("trace"),ka("top"),uo("top"),Ns("top"),Xa("top"),fo.current="top",As.current="top",zs.current="top",Ao.current="top",ur.current={},Ht(!0),Dn(!1),l1(),Bn.initialize(),Ro(null),Is({visible:!1,text:""}),Go({visible:!1,title:"",message:""}),ia({visible:!1}),go({visible:!1}),us({visible:!1,projectName:"",locationPath:"",locationHandle:null}),wr({visible:!1,filename:"",locationPath:"",locationHandle:null}),ls({visible:!1,interval:null}),na({visible:!1,source:"new",interval:5}),xo(!1),V(!1),fn(!1),Ji(!1),Jc(!1),zi(!1),Ha(!1),ma(!1),vu(null),Yl(null),wl(null),$l(!1),hs.current=null,bl.current=null,St(!1),Xt(null),ti.current=0,Nn.current=!1,console.log("Project closed: All state cleared and browser permissions released")},[Vr,yl,hr,mo,io,Es,Io,Fs,ps,s,d,et,Ut,zo,Fi,Xs,Ho,_i,Xn,Po,Ds,Be,ut,sn,os,U,An,Cn,hn,yn,Za,zn,p,Vt,rs,ko,Kt,rl,oa,ji,er,Ft,gi,R,y,D,T,Xi,Nr,Wo,Ls,Ms,Ja,Do,$o,sa,pa,_a,ro,Da,La,Bo,Tl,Cl,Va,ao,f,mi,Lr,w,an,ka,uo,Ns,Xa,Ht,Dn,Ro,Is,Go,ia,us,wr,ls,na,wi,xo,V,fn,Ji,Jc,zi,Ha,vu,Yl,wl,$l,St,Xt]),Rl=M.useCallback(()=>{gc(),setTimeout(()=>{Vt(1),ai({x:0,y:0}),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),An(new Set),Cn(new Set),hn(new Set),yn(new Set)},200)},[gc,Vt,ai]);Dt.useEffect(()=>{Rl()},[]),Dt.useEffect(()=>{if(!Lo.visible)return;const c=[];oi.size>0,oi.size===0&&gn.size===0&&li.size===0&&ci.size===0&&c.push(`
No objects selected.`);const x=c.join(`
`);Is(N=>({...N,text:x}))},[Lo.visible,oi,gn,li,ci,Xe,Jt,on,g,j,bn]),Dt.useEffect(()=>{const c=x=>{const N=or.current;if(N&&!(x.target instanceof Node&&N.contains(x.target))){if(rd(),ju){const B=tu.current;(!B||!(x.target instanceof Node)||!B.contains(x.target))&&Ic(!1)}if(Nc){const B=ol.current;!x.target?.closest('button[title="Color Picker"]')&&(!B||!(x.target instanceof Node)||!B.contains(x.target))&&xo(!1)}}};return document.addEventListener("mousedown",c,!0),()=>document.removeEventListener("mousedown",c,!0)},[rd,ju,Ku,Nc]);const _u=c=>{if(!c.current)return{top:0,left:0};const x=c.current.getBoundingClientRect(),N=cc.current?.getBoundingClientRect();return N?{top:x.top-N.top,left:x.left-N.left+x.width+4}:{top:0,left:0}},od=M.useCallback(()=>{tu.current&&nd.current&&requestAnimationFrame(()=>{if(tu.current&&nd.current){const c=_u(nd);tu.current.style.top=`${c.top}px`,tu.current.style.left=`${c.left}px`}})},[]),Ld=M.useCallback(()=>{Cu.current&&ku.current&&requestAnimationFrame(()=>{if(Cu.current&&ku.current){const c=_u(ku);Cu.current.style.top=`${c.top}px`,Cu.current.style.left=`${c.left}px`}})},[]),Ll=M.useCallback(()=>{nu.current&&Nu.current&&requestAnimationFrame(()=>{if(nu.current&&Nu.current){const c=_u(Nu);nu.current.style.top=`${c.top}px`,nu.current.style.left=`${c.left}px`}})},[]);Dt.useEffect(()=>{ju&&od()},[ju,od]),Dt.useEffect(()=>{Ku&&Ld()},[Ku,Ld]),Dt.useEffect(()=>{Ju&&Ll()},[Ju,Ll]),Dt.useEffect(()=>{if(He&&Qu.current&&kd.current){const c=_u(kd);Qu.current.style.top=`${c.top}px`,Qu.current.style.left=`${c.left}px`}},[He]),Dt.useEffect(()=>{if(pn&&ed.current&&hc.current){const c=_u(hc);ed.current.style.top=`${c.top}px`,ed.current.style.left=`${c.left}px`}},[pn]),Dt.useEffect(()=>{const c=x=>{if(!Kr)return;const N=document.querySelector("[data-component-editor-dialog]");if(N&&x.target instanceof Node&&N.contains(x.target)){const We=x.target;if(We.tagName==="BUTTON"||We.tagName==="INPUT"||We.closest("button")||We.closest("input"))return}const B=or.current;if(!B)return;const re=B.getBoundingClientRect(),ye=x.clientX,P=x.clientY;if(ye<re.left||ye>re.right||P<re.top||P>re.bottom)return;const ze=B.width/re.width,me=B.height/re.height,De=ye-re.left,Ae=P-re.top,Ne=De*ze,le=Ae*me,ge=Ne-5,ce=le-5,de=_f(ge,ce,nr,Ke,$t,En),Me=de.x,Re=de.y;let $e=1/0,ht=null,mt=null;const Tt=Math.max(6/Ke,4),Yt=[...Jt,...on].find(We=>We.id===Kr.componentId)?.layer||"top";for(const We of Xe)if((We.type==="via"||We.type==="pad")&&We.points.length>0){if(We.type==="pad"&&(We.layer||"top")!==Yt)continue;const Ge=We.points[0],Ue=Math.max(1,We.size/2),ct=Math.hypot(Ge.x-Me,Ge.y-Re),ft=Math.max(Ue,Tt);ct<=ft&&ct<$e&&($e=ct,ht=Ge.id??null,mt=We)}if(ht!=null&&mt){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${ht}`),console.log(`  Connecting pin ${Kr.pinIndex+1} of component ${Kr.componentId}`);const We=String(ht),Ge=Kr.pinIndex,Ue=Kr.componentId,ct=Jt.find(zt=>zt.id===Ue),ft=on.find(zt=>zt.id===Ue);if(ct){const zt=Xe;_i(nn=>{const Tn=nn.find(Lt=>Lt.id===Ue);if(!Tn)return nn;const Yn=Tn.pinConnections||[],Mn=Yn.length>0?[...Yn]:new Array(Tn.pinCount).fill("");let Un;if(Mn.length!==Tn.pinCount){Un=new Array(Tn.pinCount).fill("");for(let Lt=0;Lt<Math.min(Mn.length,Tn.pinCount);Lt++)Un[Lt]=Mn[Lt]||""}else Un=[...Mn];Un[Ge]=We,console.log(`Updated pin ${Ge} with value: ${We}`),console.log("New pinConnections:",Un);const ei=nn.find(Lt=>Lt.id===Ue),rn=ei?j0(ei,Un,zt):null;return nn.map(Lt=>{if(Lt.id===Ue){const wn={...Lt,pinConnections:Un};return rn&&(wn.pinPolarities=rn),wn}return Lt})})}else if(ft){const zt=Xe;Xn(nn=>{const Tn=nn.find(Lt=>Lt.id===Ue);if(!Tn)return nn;const Yn=Tn.pinConnections||[],Mn=Yn.length>0?[...Yn]:new Array(Tn.pinCount).fill("");let Un;if(Mn.length!==Tn.pinCount){Un=new Array(Tn.pinCount).fill("");for(let Lt=0;Lt<Math.min(Mn.length,Tn.pinCount);Lt++)Un[Lt]=Mn[Lt]||""}else Un=[...Mn];Un[Ge]=We,console.log(`Updated pin ${Ge} with value: ${We}`),console.log("New pinConnections:",Un);const ei=nn.find(Lt=>Lt.id===Ue),rn=ei?j0(ei,Un,zt):null;return nn.map(Lt=>{if(Lt.id===Ue){const wn={...Lt,pinConnections:Un};return rn&&(wn.pinPolarities=rn),wn}return Lt})})}setTimeout(()=>{Ds(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Kr)return document.addEventListener("mousedown",c,!0),()=>document.removeEventListener("mousedown",c,!0)},[Kr,Jt,on,Xe,Ke,nr.x,nr.y,$t,En]);const To=M.useCallback((c,x,N,B)=>{const re=window.innerWidth,ye=window.innerHeight,P=10;let ze=Math.max(P,Math.min(c,re-N-P)),me=Math.max(P,Math.min(x,ye-B-P));return{x:ze,y:me}},[]);Dt.useEffect(()=>{if(!Rs)return;const c=N=>{if(!gl)return;const B={x:N.clientX-gl.x,y:N.clientY-gl.y},re=To(B.x,B.y,250,window.innerHeight*.4);_o(re),localStorage.setItem("componentDialogPosition",JSON.stringify(re))},x=()=>{Vl(!1),Ks(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",x)}},[Rs,gl,To]),Dt.useEffect(()=>{if(!Ui)return;const c=N=>{if(!Tr)return;const B={x:N.clientX-Tr.x,y:N.clientY-Tr.y},re=To(B.x,B.y,250,window.innerHeight*.4);vr(re),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(re))},x=()=>{ha(!1),qi(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",x)}},[Ui,Tr,To]),Dt.useEffect(()=>{if(!pr)return;const c=N=>{if(!wa)return;const B={x:N.clientX-wa.x,y:N.clientY-wa.y};$r(B),localStorage.setItem("notesDialogPosition",JSON.stringify(B))},x=()=>{Oi(!1),Yr(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",x)}},[pr,wa]),Dt.useEffect(()=>{if(Wr&&Ar===null){const c=localStorage.getItem("notesDialogPosition");if(c)try{const x=JSON.parse(c);$r(x)}catch{$r({x:window.innerWidth-550,y:100})}else $r({x:window.innerWidth-550,y:100})}},[Wr,Ar]),Dt.useEffect(()=>{if(!ea)return;const c=N=>{if(!qs)return;const B={x:N.clientX-qs.x,y:N.clientY-qs.y};Sa(B),localStorage.setItem("projectNotesDialogPosition",JSON.stringify(B))},x=()=>{ll(!1),Dc(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",x)}},[ea,qs]),Dt.useEffect(()=>{if(!Vs)return;const c=N=>{if(!Rc)return;const B={x:N.clientX-Rc.x,y:N.clientY-Rc.y};Xl(B),localStorage.setItem("testPointsDialogPosition",JSON.stringify(B))},x=()=>{Xu(!1),Gc(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",x)}},[Vs,Rc]),Dt.useEffect(()=>{if(gr&&Gl===null){const c=localStorage.getItem("testPointsDialogPosition");if(c)try{const x=JSON.parse(c);Xl(x)}catch{Xl({x:100,y:100})}else Xl({x:100,y:100})}},[gr,Gl]),Dt.useEffect(()=>{if(Ei&&Wa===null){const c=localStorage.getItem("projectNotesDialogPosition");if(c)try{const x=JSON.parse(c);Sa(x)}catch{Sa({x:100,y:100})}else Sa({x:100,y:100})}},[Ei,Wa]);const pf=M.useCallback(()=>{Ha(!0)},[]),hf=M.useCallback(()=>{mu(!0)},[]);Dt.useEffect(()=>{if(Aa&&Aa.visible&&ho===null){const c=localStorage.getItem("componentDialogPosition");let x;if(c)try{const N=JSON.parse(c);x=To(N.x,N.y,250,window.innerHeight*.4),_o(x)}catch{x=To(window.innerWidth-280,90,250,window.innerHeight*.4),_o(x)}else x=To(window.innerWidth-280,90,250,window.innerHeight*.4),_o(x)}else!Aa||Aa.visible},[Aa,ho,To]),Dt.useEffect(()=>{if(Lo.visible&&ii===null){const c=localStorage.getItem("detailedInfoDialogPosition");let x;if(c)try{const N=JSON.parse(c);x=To(N.x,N.y,400,window.innerHeight*.8),vr(x)}catch{x=To(window.innerWidth-450,90,400,window.innerHeight*.8),vr(x)}else x=To(window.innerWidth-450,90,400,window.innerHeight*.8),vr(x)}else Lo.visible},[Lo.visible,ii,To]),Dt.useEffect(()=>{const c=()=>{if(ho){const x=To(ho.x,ho.y,250,window.innerHeight*.4);(x.x!==ho.x||x.y!==ho.y)&&(_o(x),localStorage.setItem("componentDialogPosition",JSON.stringify(x)))}if(ii){const x=To(ii.x,ii.y,400,window.innerHeight*.8);(x.x!==ii.x||x.y!==ii.y)&&(vr(x),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(x)))}};return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[ho,ii,To]);const xc=M.useCallback(c=>{switch(c){case"transparency":y(50);break;case"brushSize":ie(3);break}},[]),Md=Dt.useRef(O);Dt.useEffect(()=>{Md.current=O},[O]),Dt.useEffect(()=>{if(C){ml.current=performance.now(),y(0);const c=x=>{const N=ml.current||x,B=Md.current,re=(x-N)%B/B,ye=1-Math.abs(1-2*re);y(Math.round(ye*100)),il.current=requestAnimationFrame(c)};il.current=requestAnimationFrame(c)}return()=>{il.current&&(cancelAnimationFrame(il.current),il.current=null)}},[C]),Dt.useEffect(()=>{if(z==="center"){Ea(p2());return}const c=z==="erase"?"erase":z==="magnify"?"magnify":z==="ground"?"ground":z==="power"?"power":z==="component"?"component":z==="draw"?it==="via"?"via":it==="pad"?"pad":it==="testPoint"?"testPoint":"trace":"default";if(c==="default"){Ea(void 0);return}const x=Ke;let N;if(c==="magnify")N=18;else if(c==="component"){const le=(xi||"top")==="top"?"componentTop":"componentBottom",ce=Bn.get(le).size||I0.DEFAULT_SIZE;N=Math.max(16,Math.round(ce*x))}else if(c==="trace"){const le=(Zn||"top")==="top"?"traceTop":"traceBottom",ce=Bn.get(le).size||6;N=Math.max(6,Math.round(ce*x))}else if(c==="via"){const le=Bn.get("via").size||6;N=Math.max(6,Math.round(le*x))}else if(c==="pad"){const le=(bi||"top")==="top"?"padTop":"padBottom",ce=Bn.get(le).size||6;N=Math.max(6,Math.round(ce*x))}else if(c==="testPoint"){const le=(Fn||"top")==="top"?"testPointTop":"testPointBottom",ce=Bn.get(le).size||18;N=Math.max(12,Math.round(ce*x))}else c==="power"||c==="ground"?N=Math.max(12,Math.round(oe*x)):N=Math.max(6,Math.round(oe*x));const re=N+4*2+(c==="magnify"?8:0),ye=document.createElement("canvas");ye.width=re,ye.height=re;const P=ye.getContext("2d");if(!P){Ea(void 0);return}const ze=re/2,me=re/2,De=N/2;if(P.clearRect(0,0,re,re),c==="via"){const Ne=De,le=De*.5,ge=De*.7,de=Bn.get("via").color;P.fillStyle=de,P.beginPath(),P.arc(ze,me,Ne,0,Co),P.arc(ze,me,le,0,Co),P.fill("evenodd"),P.strokeStyle="#808080",P.lineWidth=1,P.beginPath(),P.moveTo(ze-ge,me),P.lineTo(ze+ge,me),P.stroke(),P.beginPath(),P.moveTo(ze,me-ge),P.lineTo(ze,me+ge),P.stroke()}else if(c==="pad"){const Ne=bi==="top"?"padTop":"padBottom",ge=Bn.get(Ne).color,de=N/2,Me=de*2,Re=Me*.5,$e=de*.7;P.fillStyle=ge,P.beginPath(),P.rect(ze-de,me-de,Me,Me),P.rect(ze-Re/2,me-Re/2,Re,Re),P.fill("evenodd"),P.strokeStyle="#808080",P.lineWidth=1,P.beginPath(),P.moveTo(ze-$e,me),P.lineTo(ze+$e,me),P.stroke(),P.beginPath(),P.moveTo(ze,me-$e),P.lineTo(ze,me+$e),P.stroke()}else if(c==="trace"){const Ne=Zn==="top"?"traceTop":"traceBottom",ge=Bn.get(Ne).color;P.fillStyle=ge,P.beginPath(),P.arc(ze,me,De,0,Co),P.fill()}else if(c==="testPoint"){Ea(h2(N));return}else if(c==="erase"){const Ne=oe*x,le=Math.max(Ne*.75,8),ge=Math.max(Ne*.5,6),ce=Math.max(Ne*.2,2);P.save(),P.translate(ze,me),P.rotate(pu(-35)),P.fillStyle="#f5a3b3",P.strokeStyle="#111",P.lineWidth=1.5;const de=1.5,Me=-le/2,Re=-ge/2;P.beginPath(),P.moveTo(Me+de,Re),P.lineTo(Me+le-de,Re),P.quadraticCurveTo(Me+le,Re,Me+le,Re+de),P.lineTo(Me+le,Re+ge-de),P.quadraticCurveTo(Me+le,Re+ge,Me+le-de,Re+ge),P.lineTo(Me+de,Re+ge),P.quadraticCurveTo(Me,Re+ge,Me,Re+ge-de),P.lineTo(Me,Re+de),P.quadraticCurveTo(Me,Re,Me+de,Re),P.closePath(),P.fill(),P.stroke(),P.fillStyle="#f18ea4",P.beginPath(),P.rect(-le/2,ge/2-ce,le,ce),P.fill(),P.restore()}else if(c==="magnify"){const Ne=De;P.strokeStyle="#111",P.lineWidth=2,P.beginPath(),P.arc(ze-2,me-2,Ne,0,Co),P.stroke();const le=ze+Ne*.6,ge=me+Ne*.6,ce=le+6,de=ge+6;P.beginPath(),P.moveTo(le,ge),P.lineTo(ce,de),P.stroke(),P.beginPath(),P.moveTo(ze-6,me-2),P.lineTo(ze+2,me-2),P.stroke(),vo||(P.beginPath(),P.moveTo(ze-2,me-6),P.lineTo(ze-2,me+2),P.stroke())}else if(c==="ground"){const le=(Ci?S.find(ce=>ce.id===Ci):null)?.color||"#000000";if(P.strokeStyle=le,P.lineWidth=2,P.lineCap="round",Ci==="groundbus-earth"){const ce=De*1.5,de=ce*.9,Me=ce*.24,Re=ce*1.6;P.beginPath(),P.moveTo(ze,me-de/2),P.lineTo(ze,me+de/2),P.stroke();for(let $e=0;$e<3;$e++){const ht=me+de/2+$e*Me,mt=Re*(1-$e*.25);P.beginPath(),P.moveTo(ze-mt/2,ht),P.lineTo(ze+mt/2,ht),P.stroke()}}else{const ce=De*.8;P.beginPath(),P.arc(ze,me,De,0,Co),P.stroke(),P.beginPath(),P.moveTo(ze,me-De-ce),P.lineTo(ze,me+De+ce),P.stroke(),P.beginPath(),P.moveTo(ze-De-ce,me),P.lineTo(ze+De+ce,me),P.stroke()}}else if(c==="power"){const le=(dt?bn.find(ce=>ce.id===dt):null)?.color||"#ff0000";P.strokeStyle=le,P.lineWidth=2,P.lineCap="round";const ge=De*.8;P.beginPath(),P.arc(ze,me,De,0,Co),P.stroke(),P.beginPath(),P.moveTo(ze,me-De-ge),P.lineTo(ze,me+De+ge),P.stroke(),P.beginPath(),P.moveTo(ze-De-ge,me),P.lineTo(ze+De+ge,me),P.stroke()}else if(c==="component"){const le=(xi||"top")==="top"?"componentTop":"componentBottom",ce=Bn.get(le).color,de=N,Me=de/2;P.strokeStyle=ce,P.lineWidth=2,P.fillStyle="rgba(255,255,255,0.9)",P.beginPath(),P.rect(ze-Me,me-Me,de,de),P.fill(),P.stroke();const Re=(()=>{const $e=pc?.dataDrivenDefinition?.designator??pc?.componentDefinition?.designator??pc?.designator;return $e?$e.length<=3?$e:$e.substring(0,3):_l?b0(_l):"?"})();P.fillStyle=ce,P.font=`bold ${Math.max(8,de*.35)}px sans-serif`,P.textAlign="center",P.textBaseline="middle",P.fillText(Re,ze,me)}const Ae=`url(${ye.toDataURL()}) ${Math.round(ze)} ${Math.round(me)}, crosshair`;Ea(Ae)},[z,it,J,oe,Ke,vo,_l,pc,dt,Ci,bn,S,Wn,Zn,bi,Fn,xi,ar.toolInstanceId]),Dt.useEffect(()=>{zu()},[zu]),Dt.useEffect(()=>{zu()},[al.width,al.height]),Dt.useEffect(()=>{oi.size===0&&z==="draw"&&it==="trace"&&oe>=1&&(Bt==="top"?H(oe):ae(oe))},[oe,z,it,Bt,oi]),Dt.useEffect(()=>{et(c=>c.map(x=>{if(x.type==="via"&&x.points.length>0&&x.points[0].id!==void 0){const N=x.points[0].id,B=ys(N,bn);if(x.viaType!==B)return{...x,viaType:B}}else if(x.type==="pad"&&x.points.length>0&&x.points[0].id!==void 0){const N=x.points[0].id,B=Ws(N,bn);if(x.padType!==B)return{...x,padType:B}}else if(x.type==="testPoint"&&x.points.length>0&&x.points[0].id!==void 0){const N=x.points[0].id,B=oo(N,bn),re=B.includes("Power")?"power":B.includes("Ground")?"ground":B.includes("Signal")?"signal":"unknown";if(x.testPointType!==re)return{...x,testPointType:re}}return x}))},[g,j,bn,ys,Ws,oo]);const ap=M.useCallback(()=>{const c=or.current;if(!c)return;const x=c.toDataURL("image/png"),N=window.open("","_blank");if(!N){alert("Please allow popups to print the canvas.");return}N.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${x}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),N.document.close()},[]);Dt.useEffect(()=>{const c=N=>{N.key==="Shift"&&vl(!0)},x=N=>{N.key==="Shift"&&vl(!1)};return window.addEventListener("keydown",c),window.addEventListener("keyup",x),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",x)}},[]);const sd=M.useCallback(c=>{if(c.size===0)return;const x=Array.from(c).map(N=>String(N));et(N=>N.map(B=>{if(B.type==="trace"){const re=B.points.filter(ye=>ye.id===void 0?!0:!c.has(ye.id));return re.length<2?null:{...B,points:re}}return B}).filter(B=>B!==null)),_i(N=>N.map(B=>{const re=B.pinConnections||[];if(re.some(P=>P&&x.includes(P))){const P=re.map(ze=>ze&&x.includes(ze)?"":ze);return{...B,pinConnections:P}}return B})),Xn(N=>N.map(B=>{const re=B.pinConnections||[];if(re.some(P=>P&&x.includes(P))){const P=re.map(ze=>ze&&x.includes(ze)?"":ze);return{...B,pinConnections:P}}return B}))},[et,_i,Xn]),Du=M.useRef(new Set);Dt.useEffect(()=>{const c=new Set;for(const N of Xe)if((N.type==="via"||N.type==="pad")&&N.points.length>0){const B=N.points[0].id;B!==void 0&&c.add(B)}const x=new Set;for(const N of Du.current)c.has(N)||x.add(N);x.size>0&&sd(x),Du.current=c},[Xe,sd]),Dt.useEffect(()=>{et(c=>c.map(x=>{if(x.type==="via"&&x.points.length>0&&x.points[0].id!==void 0){const N=x.points[0].id,B=ys(N,bn);if(x.viaType!==B)return{...x,viaType:B}}else if(x.type==="pad"&&x.points.length>0&&x.points[0].id!==void 0){const N=x.points[0].id,B=Ws(N,bn);if(x.padType!==B)return{...x,padType:B}}else if(x.type==="testPoint"&&x.points.length>0&&x.points[0].id!==void 0){const N=x.points[0].id,B=oo(N,bn),re=B.includes("Power")?"power":B.includes("Ground")?"ground":B.includes("Signal")?"signal":"unknown";if(x.testPointType!==re)return{...x,testPointType:re}}return x}))},[g,j,bn,ys,Ws,oo]),Dt.useEffect(()=>{const c=x=>{Qo.current&&(Qo.current.contains(x.target)||Ro(null))};return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[]),Dt.useEffect(()=>{const c=(x,N)=>{const B=x.current;if(!B)return;const re=B.getContext("2d");if(!re)return;const ye=B.width,P=B.height;if(re.clearRect(0,0,ye,P),re.fillStyle="#fff",re.fillRect(0,0,ye,P),N?.bitmap){const ze=N.bitmap,me=Math.min(ye/ze.width,P/ze.height),De=Math.max(1,Math.floor(ze.width*me)),Ae=Math.max(1,Math.floor(ze.height*me)),Ne=Math.floor((ye-De)/2),le=Math.floor((P-Ae)/2);re.drawImage(ze,Ne,le,De,Ae)}re.strokeStyle="#ddd",re.lineWidth=1,re.strokeRect(.5,.5,ye-1,P-1)};c(Sl,a),c(xu,l)},[a,l]),Dt.useEffect(()=>{const c=[],x=[],N=[],B=[];for(const re of Xe)if(re.type==="via"&&re.points.length>=1){const ye=re.points[0],P={id:re.id,pointId:ye.id,x:ye.x,y:ye.y,size:re.size,color:re.color};c.push(P)}else if(re.type==="pad"&&re.points.length>=1){const ye=re.points[0],P={id:re.id,pointId:ye.id,x:ye.x,y:ye.y,size:re.size,color:re.color,layer:re.layer||"top"};x.push(P)}else if(re.type==="trace"&&re.points.length>=2)for(let ye=0;ye<re.points.length-1;ye++){const P=re.points[ye],ze=re.points[ye+1],me={id:re.id,startPointId:P.id,endPointId:ze.id,x1:P.x,y1:P.y,x2:ze.x,y2:ze.y,size:re.size,color:re.color};re.layer==="top"?N.push(me):B.push(me)}zo(c),Fi(x),Xs(N),Ho(B)},[Xe]);const Cr=M.useRef(Xe);Cr.current=Xe;const yc=M.useCallback(()=>{const x=new Date().toISOString(),N=d1();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:x,view:{currentView:v,viewScale:Ke,cameraWorldCenter:Gn,showBothLayers:pl,selectedDrawingLayer:Bt},images:{top:a?{name:a.name,width:a.width,height:a.height,filePath:a.filePath||a.name,x:a.x,y:a.y,scale:a.scale,rotation:a.rotation,flipX:a.flipX,flipY:a.flipY,skewX:a.skewX,skewY:a.skewY,keystoneV:a.keystoneV,keystoneH:a.keystoneH,brightness:a.brightness??100,contrast:a.contrast??100}:null,bottom:l?{name:l.name,width:l.width,height:l.height,filePath:l.filePath||l.name,x:l.x,y:l.y,scale:l.scale,rotation:l.rotation,flipX:l.flipX,flipY:l.flipY,skewX:l.skewX,skewY:l.skewY,keystoneV:l.keystoneV,keystoneH:l.keystoneH,brightness:l.brightness??100,contrast:l.contrast??100}:null},projectDirectoryName:Oo.current?Oo.current.name||null:Ti&&Ti.name||null,drawing:{drawingStrokes:Cr.current.filter(re=>!(re.type==="trace"&&re.points.length<2)),vias:Fa,tracesTop:Vo,tracesBottom:Ur,componentsTop:Jt,componentsBottom:on,grounds:j,powers:g},powerBuses:bn,groundBuses:S,pointIdCounter:Gh(),designatorCounters:{...ur.current},autoAssignDesignators:tn,useGlobalDesignatorCounters:ir,traceColors:{top:Wn.get("trace")?.layerSettings.get("top")?.color||E,bottom:Wn.get("trace")?.layerSettings.get("bottom")?.color||F},traceSizes:{top:Wn.get("trace")?.layerSettings.get("top")?.size||$,bottom:Wn.get("trace")?.layerSettings.get("bottom")?.size||Pe},padColors:{top:Wn.get("pad")?.layerSettings.get("top")?.color||ve,bottom:Wn.get("pad")?.layerSettings.get("bottom")?.color||Ce},padSizes:{top:Wn.get("pad")?.layerSettings.get("top")?.size||k,bottom:Wn.get("pad")?.layerSettings.get("bottom")?.size||W},componentColors:{top:Wn.get("component")?.layerSettings.get("top")?.color||kt,bottom:Wn.get("component")?.layerSettings.get("bottom")?.color||ne},componentSizes:{top:Wn.get("component")?.layerSettings.get("top")?.size||Qt,bottom:Wn.get("component")?.layerSettings.get("bottom")?.size||xt},testPointColors:{top:Wn.get("testPoint")?.layerSettings.get("top")?.color||te,bottom:Wn.get("testPoint")?.layerSettings.get("bottom")?.color||ee},testPointSizes:{top:Wn.get("testPoint")?.layerSettings.get("top")?.size||_e,bottom:Wn.get("testPoint")?.layerSettings.get("bottom")?.size||nt},componentConnectionColor:Gt,componentConnectionSize:Zt,toolLayerDefaults:{trace:Zn,pad:bi,testPoint:Fn,component:xi},toolSettings:{trace:Wn.get("trace")?.settings||{color:"#ff0000",size:6},via:Wn.get("via")?.settings||{color:"#ff0000",size:18},pad:Wn.get("pad")?.settings||{color:"#ff0000",size:18},component:Wn.get("component")?.settings||{color:"#ff0000",size:18},ground:Wn.get("ground")?.settings||{color:"#000000",size:18},power:Wn.get("power")?.settings||{color:"#ff0000",size:18},erase:Wn.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:Di,areViasLocked:Mi,arePadsLocked:sr,areTracesLocked:da,areComponentsLocked:Dr,areGroundNodesLocked:fa,arePowerNodesLocked:ui},visibility:{showViasLayer:mr,showTopPadsLayer:Ra,showBottomPadsLayer:Zi,showTopTracesLayer:br,showBottomTracesLayer:Qr,showTopComponents:Bi,showBottomComponents:Ma,showPowerLayer:jo,showGroundLayer:dr,showConnectionsLayer:fr,showTraceCornerDots:Mr},autoSave:{enabled:aa,interval:Qs,baseName:tl},projectInfo:{name:Hr},projectNotes:kn,homeViews:Ko,toolInstances:Bn.getAll()},timestamp:N}},[v,Ke,Gn,pl,Bt,a,l,Xe,Fa,Vo,Ur,Jt,on,j,Wn,Di,Mi,sr,da,Dr,fa,ui,bn,S,Gh,E,F,$,Pe,ve,Ce,k,W,kt,ne,Qt,xt,Zn,bi,Fn,xi,aa,Qs,tl,Hr,mr,Ra,Zi,br,Qr,Bi,Ma,jo,dr,fr,tn,ir,kn,Ko]),op=M.useRef(yc);op.current=yc;const Ml=M.useRef(el);Ml.current=el;const bs=M.useRef(tl);bs.current=tl;const mc=M.useRef(hr);mc.current=hr;const gf=M.useRef(nl);gf.current=nl;const ts=M.useRef([]);ts.current=Wc;const ec=M.useRef(-1);ec.current=$c;const Oo=M.useRef(null),ld=M.useRef(!1);Dt.useEffect(()=>{ld.current||(Oo.current=Ti)},[Ti]);const cd=M.useCallback(async()=>{console.log("Auto save: performAutoSave called");let c=Ml.current||Oo.current,x=bs.current;if(console.log(`Auto save: dirHandle=${c?`set (using ${Ml.current?"autoSaveDirHandle":"projectDirHandle"})`:"missing"}, baseName=${x||"missing"}`),!c||!x){console.warn(`Auto save: Missing project directory handle (${!c}) or base name (${!x}). Please create a new project or open an existing project first.`),io(!1),$i.current&&(clearInterval($i.current),$i.current=null);return}if(!cr.current){console.log("Auto save: Skipping - no changes since last save");return}const N=Cr.current,B=N.filter(Ae=>Ae.type==="trace"&&Ae.points.length<2);if(B.length>0){console.log(`Auto save: Cleaning up ${B.length} single-point trace(s) before save`),B.forEach(Ne=>console.log(`  - Removing single-point trace ${Ne.id}`));const Ae=N.filter(Ne=>!(Ne.type==="trace"&&Ne.points.length<2));et(Ae),Cr.current=Ae}console.log("Auto save: Starting save...");const{project:re,timestamp:ye}=op.current(),ze=`${pd(x)}_${ye}.json`,me=JSON.stringify(re,null,2),De=new Blob([me],{type:"application/json"});try{let Ae;try{Ae=await c.getDirectoryHandle("history",{create:!0})}catch(de){console.error("Failed to get/create history directory:",de);return}try{const de=[],Me=gf.current;for await(const Re of c.keys())try{if(Re==="history"||Re===ze)continue;const ht=await(await c.getFileHandle(Re)).getFile();if(!Re.endsWith(".json"))continue;const mt=await ht.text();try{const Tt=JSON.parse(mt);if(Tt.version&&(Tt.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!Tt.fileType)){de.push(Re);const tt=Tt.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${Re} (${tt}${Re===Me?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const Re of de)try{const mt=await(await(await c.getFileHandle(Re)).getFile()).text(),tt=await(await Ae.getFileHandle(Re,{create:!0})).createWritable();await tt.write(new Blob([mt],{type:"application/json"})),await tt.close(),await c.removeEntry(Re),console.log(`Auto save: Moved ${Re} from root to history/`)}catch($e){console.warn(`Auto save: Failed to move ${Re} to history:`,$e)}}catch(de){console.warn("Auto save: Error checking for old files in root:",de)}const le=await(await c.getFileHandle(ze,{create:!0})).createWritable();await le.write(De),await le.close(),console.log(`Auto save: Successfully saved ${ze} to root directory`),mc.current(ze);const ge=ts.current,ce=[ze,...ge.filter(de=>de!==ze)].sort((de,Me)=>Me.localeCompare(de));Fs(ce),ts.current=ce,ps(0),ec.current=0,cr.current=!1,Mo(!1)}catch(Ae){console.error("Auto save failed:",Ae)}},[]);zc.current=cd;const Ru=M.useCallback(async()=>{const{project:c}=yc(),x=JSON.stringify(c,null,2),N=new Blob([x],{type:"application/json"});if(Ti&&Hr)try{let De=null;try{De=await Ti.getDirectoryHandle("history",{create:!0})}catch(Me){console.error("Failed to get/create history directory:",Me),De=null}const Ae=Hr.replace(/\.json$/i,""),Ne=pd(Ae),{timestamp:le}=yc(),ge=`${Ne}_${le}.json`;if(De)try{const Me=[];for await(const Re of Ti.keys())try{if(Re==="history"||Re===ge)continue;const ht=await(await Ti.getFileHandle(Re)).getFile();if(!Re.endsWith(".json"))continue;const mt=await ht.text();try{JSON.parse(mt).version&&(Me.push(Re),console.log(`Save: Found PCB project file in root: ${Re}`))}catch{continue}}catch{continue}for(const Re of Me)try{const mt=await(await(await Ti.getFileHandle(Re)).getFile()).text(),tt=await(await De.getFileHandle(Re,{create:!0})).createWritable();await tt.write(new Blob([mt],{type:"application/json"})),await tt.close(),await Ti.removeEntry(Re),console.log(`Save: Moved ${Re} from root to history/`)}catch($e){console.warn(`Save: Failed to move ${Re} to history:`,$e)}}catch(Me){console.warn("Save: Error checking for old files in root:",Me)}const de=await(await Ti.getFileHandle(ge,{create:!0})).createWritable();await de.write(N),await de.close(),hr(ge),Mo(!1),cr.current=!1,console.log(`Project saved successfully: ${Hr}/${ge}`),alert(`Project saved successfully!

File: ${ge}
Location: ${Hr}`);return}catch(De){const Ae=De instanceof Error?De.message:String(De);console.error("Failed to save to project directory:",De),alert(`Failed to save project to directory.

Error: ${Ae}

Please try saving again or use Save As...`),Vr(null)}if(Hr&&!Ti){const De=window;if(typeof De.showDirectoryPicker=="function")try{const Ae=await De.showDirectoryPicker();Vr(Ae);const Ne=`${Hr}.json`,ge=await(await Ae.getFileHandle(Ne,{create:!0})).createWritable();await ge.write(N),await ge.close(),hr(Ne),Mo(!1),cr.current=!1,console.log(`Project saved successfully: ${Ne} in selected directory`),alert(`Project saved successfully!

File: ${Ne}`);return}catch(Ae){if(Ae?.name!=="AbortError"){const Ne=Ae instanceof Error?Ae.message:String(Ae);console.error("Failed to get directory:",Ae),alert(`Failed to select directory.

Error: ${Ne}

Falling back to file picker...`)}}}const B=De=>String(De).padStart(2,"0"),re=new Date,P=`pcb_project_${`${re.getFullYear()}_${B(re.getMonth()+1)}_${B(re.getDate())}_${B(re.getHours())}_${B(re.getMinutes())}_${B(re.getSeconds())}`}.json`,ze=window;if(typeof ze.showSaveFilePicker=="function")try{const De=await ze.showSaveFilePicker({suggestedName:P,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),Ae=await De.createWritable();await Ae.write(N),await Ae.close();const Ne=De.name;try{const ce=await De.getFile();hr(ce.name)}catch{hr(Ne)}const ge=Ne.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");ge&&mo(ge);try{const ce=De.name.replace(/\.json$/i,""),Me=pd(ce).replace(/[^a-zA-Z0-9_-]/g,"_");Io(Me),el||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(ce){console.warn("Could not set up auto save for new file:",ce)}console.log(`Project saved successfully: ${Ne}`),alert(`Project saved successfully!

File: ${Ne}`);return}catch(De){if(De?.name==="AbortError")return;const Ae=De instanceof Error?De.message:String(De);console.warn("showSaveFilePicker failed, falling back to download",De),alert(`File picker unavailable.

Error: ${Ae}

Falling back to browser download...`)}const me=document.createElement("a");me.href=URL.createObjectURL(N),me.download=P,document.body.appendChild(me),me.click(),setTimeout(()=>{URL.revokeObjectURL(me.href),document.body.removeChild(me)},0),console.log(`Project downloaded: ${P}`),alert(`Project downloaded successfully!

File: ${P}

Note: For better project management, use File  New Project or File  Open Project.`)},[yc,Ti,Hr,hr,Vr,Mo,mo,Io,el,pd]),Id=M.useCallback(c=>{const x=new Rn,N=x.internal.pageSize.getWidth(),B=x.internal.pageSize.getHeight(),re=20;let ye=re;const P=7,ze=60;x.setFontSize(18),x.setFont("helvetica","bold"),x.text("Bill of Materials",N/2,ye,{align:"center"}),ye+=P*2,x.setFontSize(10),x.setFont("helvetica","normal"),c.projectName&&(x.text(`Project: ${c.projectName}`,re,ye),ye+=P),x.text(`Exported: ${new Date(c.exportedAt).toLocaleString()}`,re,ye),ye+=P,x.text(`Total Components: ${c.totalComponents} | Unique Components: ${c.uniqueComponents}`,re,ye),ye=ze,x.setFontSize(9),x.setFont("helvetica","bold");const me=[15,50,30,20,25,30,20],De=["Qty","Component Type","Value","Package","Manufacturer","Part Number","Layer"];let Ae=re;return De.forEach((le,ge)=>{x.text(le,Ae,ye),Ae+=me[ge]}),ye+=P,x.setLineWidth(.5),x.line(re,ye,N-re,ye),ye+=P*.5,x.setFont("helvetica","normal"),x.setFontSize(8),c.items.forEach(le=>{const ge=$e=>{ye>B-re-P*$e&&(x.addPage(),ye=re+P)};ge(3),Ae=re,[le.quantity.toString(),le.componentType,le.value||"-",le.packageType||"-",le.manufacturer||"-",le.partNumber||"-",le.layer].forEach(($e,ht)=>{const mt=me[ht]-2,Tt=x.splitTextToSize($e,mt);x.text(Tt[0]||"-",Ae,ye),Ae+=me[ht]}),ye+=P*1.2;const de=(le.notes||"").toString().trim(),Me=le.datasheet?le.datasheet.toString().trim():"",Re=[];if(de&&Re.push(`Notes: ${de}`),Me&&Re.push(`Spec Sheet URL: ${Me}`),Re.length>0){const $e=re+me[0]+2,ht=N-re-$e;Re.forEach(mt=>{x.splitTextToSize(mt,ht).forEach(tt=>{ge(2),x.text(tt,$e,ye),ye+=P*.9})})}ge(1),x.setLineWidth(.2),x.line(re,ye,N-re,ye),ye+=P*.5}),x.output("blob")},[]),xf=M.useCallback(async()=>{if(console.log("handleExportBOM called, format:",we),!Ti){alert("Please create or open a project before exporting BOM.");return}try{console.log("Generating BOM data...");const c=y2(Jt,on,Hr);console.log("BOM data generated:",c),console.log("Creating/getting BOM directory...");let x;try{x=await Ti.getDirectoryHandle("BOM",{create:!0}),console.log("BOM directory obtained")}catch(ze){console.error("Failed to get/create BOM directory:",ze),alert("Failed to create BOM directory. See console for details.");return}const N=d1();let B,re;if(we==="pdf")console.log("Generating PDF..."),B=Id(c),re=`BOM_${N}.pdf`;else{console.log("Generating JSON...");const ze=JSON.stringify(c,null,2);B=new Blob([ze],{type:"application/json"}),re=`BOM_${N}.json`}console.log("Saving file:",re);const P=await(await x.getFileHandle(re,{create:!0})).createWritable();await P.write(B),await P.close(),console.log("BOM file saved successfully"),alert(`BOM exported successfully to ${re} in BOM directory!`)}catch(c){console.error("Failed to export BOM:",c),alert(`Failed to export BOM: ${c instanceof Error?c.message:String(c)}. See console for details.`)}},[Ti,Jt,on,Hr,we,Id]);Dt.useEffect(()=>{$i.current&&(clearInterval($i.current),$i.current=null);const c=ba.current;if(ba.current=aa,aa&&Qs){const x=Qs*60*1e3;(el||Ti)&&tl?(console.log(`Auto save: Setting up interval for ${Qs} minute(s) (${x}ms)`),c||(cr.current=!0,setTimeout(()=>{cd()},100)),$i.current&&(clearInterval($i.current),$i.current=null),$i.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${cr.current}`),console.log(`  - dirHandle: ${Ml.current?"set":"missing"}`),console.log(`  - baseName: ${bs.current||"missing"}`),cd()},x),console.log(`Auto save: Interval set up for ${x}ms (${Qs} minutes)`),console.log(`  - Auto save directory handle: ${el?"set":"missing"}`),console.log(`  - Project directory handle: ${Ti?"set":"missing"}`),console.log(`  - Base name: ${tl||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (autoSaveDirHandle: ${!!el}, projectDirHandle: ${!!Ti}) or base name (${!tl}). Disabling auto save.`),io(!1),$i.current&&(clearInterval($i.current),$i.current=null))}else aa||(ba.current=!1);return()=>{$i.current&&(clearInterval($i.current),$i.current=null)}},[aa,Qs,el,tl,Ti]);const su=M.useRef(!1),ud=M.useRef(!1),[bc,Ia]=Dt.useState(0);Dt.useEffect(()=>{const x=Object.keys(Bn.getAll()).map(N=>Bn.subscribe(N,()=>{Ia(B=>B+1)}));return()=>x.forEach(N=>N())},[]),Dt.useEffect(()=>{if(ud.current){console.log("Change tracking: Skipping - project is being loaded");return}if(aa&&su.current){su.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}cr.current=!0,Mo(!0),console.log("Change detected, marking as unsaved",{autoSaveEnabled:aa,topImage:!!a,bottomImage:!!l,drawingStrokesCount:Xe.length,componentsTopCount:Jt.length,componentsBottomCount:on.length,powersCount:g.length,groundsCount:j.length,powerBusesCount:bn.length,projectNotesCount:kn.length,areImagesLocked:Di,areViasLocked:Mi,areTracesLocked:da,areComponentsLocked:Dr,areGroundNodesLocked:fa,arePowerNodesLocked:ui})},[a,l,Xe,Jt,on,g,j,bn,kn,E,F,$,Pe,Di,Mi,da,Dr,fa,ui,S,aa,ve,Ce,k,W,kt,ne,Qt,xt,te,ee,_e,nt,Gt,Zt,Zn,tn,ir,Ko,Wn,bc]),Dt.useEffect(()=>{aa?(su.current=!0,console.log("Auto save: Enabled, marking first run")):su.current=!1},[aa]),Dt.useEffect(()=>{aa||(cr.current=!1)},[aa]);const dd=M.useCallback(()=>!!(a||l||Xe.length>0||Jt.length>0||on.length>0||g.length>0||j.length>0),[a,l,Xe,Jt,on,g,j]),Lu=M.useCallback(()=>{us({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),lo=M.useCallback(async()=>{const c=window;if(typeof c.showDirectoryPicker=="function")try{const x=await c.showDirectoryPicker({mode:"readwrite"});us(N=>({...N,locationHandle:x,locationPath:x.name||"Selected folder"}))}catch(x){x?.name!=="AbortError"&&(console.error("Failed to get directory:",x),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),sp=M.useCallback(async()=>{const c=Ni.projectName.trim();if(!c){alert("Please enter a project name.");return}const x=c.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!Ni.locationHandle){alert("Please select a location for the project.");return}const N=Ni.locationHandle;let B,re;if(N.name===x)B=N,re=N;else{re=N;try{B=await re.getDirectoryHandle(x,{create:!0})}catch(ye){console.error("Failed to create project folder:",ye),alert(`Failed to create project folder "${x}". See console for details.`);return}}try{await B.getDirectoryHandle("history",{create:!0}),await B.getDirectoryHandle("images",{create:!0}),await B.getDirectoryHandle("datasheets",{create:!0}),console.log("Created project subdirectories: history, images, datasheets")}catch(ye){console.error("Failed to create project subdirectories:",ye)}Oc(),us({visible:!1,projectName:"",locationPath:"",locationHandle:null}),mo(x),Vr(B),gc(),Li(),Pa(!1),y(0);try{const{project:ye,timestamp:P}=yc(),me=`${pd(x)}_${P}.json`,De=JSON.stringify(ye,null,2),Ae=new Blob([De],{type:"application/json"}),le=await(await B.getFileHandle(me,{create:!0})).createWritable();await le.write(Ae),await le.close(),hr(me),console.log(`New project created: ${x}/${me}`),na({visible:!0,source:"new",interval:5})}catch(ye){console.error("Failed to save new project:",ye),alert("Failed to save new project file. See console for details.")}},[gc,yc,Ni,Oc,Li,Pa,y]),Bd=M.useCallback(()=>{us({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),lp=M.useCallback(async()=>{const c=window;if(typeof c.showDirectoryPicker=="function")try{const x=await c.showDirectoryPicker();wr(N=>({...N,locationHandle:x,locationPath:x.name||"Selected folder"}))}catch(x){x?.name!=="AbortError"&&(console.error("Failed to get directory:",x),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Gr=M.useCallback(async()=>{const c=lr.filename.trim();if(!c){alert("Please enter a file name.");return}const N=(c.endsWith(".json")?c:`${c}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!lr.locationHandle){alert("Please select a location for the file.");return}const B=lr.locationHandle;try{const{project:re}=yc(),ye=JSON.stringify(re,null,2),P=new Blob([ye],{type:"application/json"}),me=await(await B.getFileHandle(N,{create:!0})).createWritable();await me.write(P),await me.close(),hr(N);const De=N.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");De&&mo(De),Vr(B),Mo(!1),cr.current=!1,wr({visible:!1,filename:"",locationPath:"",locationHandle:null}),Ro(null),console.log(`Project saved as: ${N} in selected directory`)}catch(re){console.error("Failed to save project:",re),alert(`Failed to save project file "${N}". See console for details.`)}},[lr,yc]),Eo=M.useCallback(()=>{wr({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),Il=M.useCallback(async()=>{ia({visible:!1}),await Ru(),Lu(),Rl()},[Ru,Lu,Rl]),cp=M.useCallback(()=>{ia({visible:!1}),Lu(),Rl()},[Lu,Rl]),up=M.useCallback(()=>{ia({visible:!1})},[]);Dt.useEffect(()=>{if(eo.visible){setTimeout(()=>{jr.current?.focus()},0);const c=x=>{x.key==="Enter"?(x.preventDefault(),Il()):x.key==="Escape"&&(x.preventDefault(),ia({visible:!1}))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}}},[eo.visible,Il]);const Ec=M.useCallback(async(c,x)=>{ud.current=!0;try{if(wi(),c.toolInstances?Bn.initializeFromProject(c):Bn.initialize(),c.projectInfo&&c.projectInfo.name&&mo(c.projectInfo.name),c.view){if(c.view.currentView&&p(c.view.currentView),c.view.viewScale!=null&&Vt(c.view.viewScale),c.view.cameraWorldCenter)ai(c.view.cameraWorldCenter);else if(c.view.viewPan){const Ae=or.current;if(Ae){const Ne=(Ae.width-10)/2,le=(Ae.height-10)/2,ge=c.view.viewScale??1,ce=(Ne-c.view.viewPan.x)/ge,de=(le-c.view.viewPan.y)/ge;ai({x:ce,y:de})}else ai({x:0,y:0})}c.view.showBothLayers!=null&&ko(c.view.showBothLayers),c.view.selectedDrawingLayer&&Kt(c.view.selectedDrawingLayer)}if(c.homeViews){const Ae={};for(const[Ne,le]of Object.entries(c.homeViews)){const ge=parseInt(Ne,10),ce=le;let de=ce.pcbReferenceX,Me=ce.pcbReferenceY;(de===void 0||Me===void 0)&&(de=ce.x??0,Me=ce.y??0),ce.showTopImage===void 0?Ae[ge]={pcbReferenceX:de,pcbReferenceY:Me,x:0,y:0,zoom:ce.zoom,viewRotation:$t,viewFlipX:En,isBottomView:to,transparency:b,showTopImage:Rr,showBottomImage:sl,showViasLayer:mr,showTopTracesLayer:br,showBottomTracesLayer:Qr,showTopPadsLayer:Ra,showBottomPadsLayer:Zi,showTopTestPointsLayer:es,showBottomTestPointsLayer:gs,showTopComponents:Bi,showBottomComponents:Ma,showPowerLayer:jo,showGroundLayer:dr,showConnectionsLayer:fr}:Ae[ge]={...ce,pcbReferenceX:de,pcbReferenceY:Me,x:0,y:0,viewRotation:ce.viewRotation??0,viewFlipX:ce.viewFlipX??!1,isBottomView:ce.isBottomView??!1,transparency:ce.transparency??50}}rl(Ae)}else rl({});if(c.projectNotes&&Array.isArray(c.projectNotes)?zn(c.projectNotes):zn([]),c.traceColors&&(c.traceColors.top&&(Y(c.traceColors.top),Le("trace",c.traceColors.top,"top")),c.traceColors.bottom&&(L(c.traceColors.bottom),Le("trace",c.traceColors.bottom,"bottom"))),c.traceSizes){const Ae=c.traceSizes.top!=null&&c.traceSizes.top>0?c.traceSizes.top:6;let Ne=c.traceSizes.bottom!=null&&c.traceSizes.bottom>0?c.traceSizes.bottom:6;Ne<6&&(Ne=6),H(Ae),ae(Ne),Rt("trace",Ae,"top"),Rt("trace",Ne,"bottom")}else H(6),ae(6);if(c.padColors&&(c.padColors.top&&(pe(c.padColors.top),Le("pad",c.padColors.top,"top")),c.padColors.bottom&&(fe(c.padColors.bottom),Le("pad",c.padColors.bottom,"bottom"))),c.padSizes){const Ae=c.padSizes.top!=null&&c.padSizes.top>0?c.padSizes.top:18,Ne=c.padSizes.bottom!=null&&c.padSizes.bottom>0?c.padSizes.bottom:18;A(Ae),q(Ne),Rt("pad",Ae,"top"),Rt("pad",Ne,"bottom")}if(c.componentColors&&(c.componentColors.top&&(It(c.componentColors.top),Le("component",c.componentColors.top,"top")),c.componentColors.bottom&&(jt(c.componentColors.bottom),Le("component",c.componentColors.bottom,"bottom"))),c.componentSizes){const Ae=c.componentSizes.top!=null&&c.componentSizes.top>0?c.componentSizes.top:18,Ne=c.componentSizes.bottom!=null&&c.componentSizes.bottom>0?c.componentSizes.bottom:18;Wt(Ae),Je(Ne),Rt("component",Ae,"top"),Rt("component",Ne,"bottom")}c.toolLayerDefaults?(c.toolLayerDefaults.trace&&ka(c.toolLayerDefaults.trace),c.toolLayerDefaults.pad&&uo(c.toolLayerDefaults.pad),c.toolLayerDefaults.testPoint&&Ns(c.toolLayerDefaults.testPoint),c.toolLayerDefaults.component&&Xa(c.toolLayerDefaults.component)):c.traceToolLayer&&ka(c.traceToolLayer),c.toolSettings&&Hn(Ae=>{const Ne=new Map(Ae);if(c.toolSettings.trace){const ge=Ne.get("trace");if(ge){const ce={...ge,settings:c.toolSettings.trace},de=new Map(ge.layerSettings);c.traceSizes&&c.traceColors&&(de.set("top",{color:c.traceColors.top||ge.layerSettings.get("top")?.color||"#AA4499",size:c.traceSizes.top||ge.layerSettings.get("top")?.size||6}),de.set("bottom",{color:c.traceColors.bottom||ge.layerSettings.get("bottom")?.color||"#F781BF",size:c.traceSizes.bottom||ge.layerSettings.get("bottom")?.size||6})),Ne.set("trace",{...ce,layerSettings:de})}}if(c.toolSettings.via){const ge=Ne.get("via");ge&&Ne.set("via",{...ge,settings:c.toolSettings.via})}if(c.toolSettings.pad){const ge=Ne.get("pad");if(ge){const ce={...ge,settings:c.toolSettings.pad},de=new Map(ge.layerSettings);c.padSizes&&c.padColors&&(de.set("top",{color:c.padColors.top||ge.layerSettings.get("top")?.color||"#0072B2",size:c.padSizes.top||ge.layerSettings.get("top")?.size||18}),de.set("bottom",{color:c.padColors.bottom||ge.layerSettings.get("bottom")?.color||"#56B4E9",size:c.padSizes.bottom||ge.layerSettings.get("bottom")?.size||18})),Ne.set("pad",{...ce,layerSettings:de})}}if(c.toolSettings.component){const ge=Ne.get("component");if(ge){const ce={...ge,settings:c.toolSettings.component},de=new Map(ge.layerSettings);c.componentSizes&&c.componentColors&&(de.set("top",{color:c.componentColors.top||ge.layerSettings.get("top")?.color||"#6A3D9A",size:c.componentSizes.top||ge.layerSettings.get("top")?.size||18}),de.set("bottom",{color:c.componentColors.bottom||ge.layerSettings.get("bottom")?.color||"#9467BD",size:c.componentSizes.bottom||ge.layerSettings.get("bottom")?.size||18})),Ne.set("component",{...ce,layerSettings:de})}}if(c.testPointSizes&&c.testPointColors){xe(c.testPointColors.top||te),Ie(c.testPointColors.bottom||ee),Fe(c.testPointSizes.top||_e),lt(c.testPointSizes.bottom||nt);const ge=Ne.get("testPoint");if(ge){const ce=new Map(ge.layerSettings);ce.set("top",{color:c.testPointColors.top||ge.layerSettings.get("top")?.color||"#E69F00",size:c.testPointSizes.top||ge.layerSettings.get("top")?.size||6}),ce.set("bottom",{color:c.testPointColors.bottom||ge.layerSettings.get("bottom")?.color||"#F0E442",size:c.testPointSizes.bottom||ge.layerSettings.get("bottom")?.size||6}),Ne.set("testPoint",{...ge,layerSettings:ce})}}if(c.componentConnectionColor!==void 0&&un(c.componentConnectionColor),c.componentConnectionSize!==void 0&&_n(c.componentConnectionSize),c.toolSettings.ground){const ge=Ne.get("ground");ge&&Ne.set("ground",{...ge,settings:c.toolSettings.ground})}if(c.toolSettings.power){const ge=Ne.get("power");ge&&Ne.set("power",{...ge,settings:c.toolSettings.power})}if(c.toolSettings.erase){const ge=Ne.get("erase");ge&&Ne.set("erase",{...ge,settings:c.toolSettings.erase})}const le=z==="draw"&&it==="trace"?Ne.get("trace"):z==="draw"&&it==="via"?Ne.get("via"):z==="draw"&&it==="pad"?Ne.get("pad"):z==="draw"&&it==="testPoint"?Ne.get("testPoint"):z==="component"?Ne.get("component"):z==="power"?Ne.get("power"):z==="ground"?Ne.get("ground"):null;if(le)if(z==="draw"&&it==="trace"){const ge=Zn||"top",ce=le.layerSettings.get(ge);ce?(ue(ce.color),ie(ce.size),ge==="top"?(Y(ce.color),H(ce.size)):(L(ce.color),ae(ce.size))):(ue(le.settings.color),ie(le.settings.size))}else if(z==="draw"&&it==="pad"){const ge=bi||"top",ce=le.layerSettings.get(ge);ce?(ue(ce.color),ie(ce.size),ge==="top"?(pe(ce.color),A(ce.size)):(fe(ce.color),q(ce.size))):(ue(le.settings.color),ie(le.settings.size))}else if(z==="component"){const ge=xi||"top",ce=le.layerSettings.get(ge);ce?(ue(ce.color),ie(ce.size),ge==="top"?(It(ce.color),Wt(ce.size)):(jt(ce.color),Je(ce.size))):(ue(le.settings.color),ie(le.settings.size))}else if(z==="draw"&&it==="testPoint"){const ge=Fn||"top",ce=le.layerSettings.get(ge);ce?(ue(ce.color),ie(ce.size),ge==="top"?(xe(ce.color),Fe(ce.size)):(Ie(ce.color),lt(ce.size))):(ue(le.settings.color),ie(le.settings.size))}else ue(le.settings.color),ie(le.settings.size);return Ne});const N=async(Ae,Ne)=>{if(!Ae)return null;let le=null,ge="",ce=Ae.filePath||Ae.name;if(!Ne){const de=Ae.name||"image";return alert(`Error: Cannot load image "${de}" because no project directory is available.

Please ensure you opened the project file from its project directory. The project directory is required to access the image files stored in the images/ subdirectory.`),null}if(ce)try{let de=ce;!ce.startsWith("images/")&&!ce.startsWith("Images/")?de=ce:ce.startsWith("Images/")?de=ce.replace("Images/",""):ce.startsWith("images/")&&(de=ce.replace("images/",""));let Me;try{Me=await Ne.getDirectoryHandle("images")}catch{try{Me=await Ne.getDirectoryHandle("Images")}catch{throw new Error("Neither 'images' nor 'Images' directory found in project folder.")}}const $e=await(await Me.getFileHandle(de)).getFile();le=await createImageBitmap($e),ge=URL.createObjectURL($e),console.log(`Loaded image from file path: images/${de}`),ce.startsWith("images/")||(ce=`images/${ce.replace("Images/","")}`)}catch(de){const Me=de instanceof Error?de.message:"Unknown error",Re=Ae.name||"image",$e=ce.startsWith("images/")||ce.startsWith("Images/")?ce.replace("Images/","images/"):`images/${ce}`;return alert(`Error: Failed to load image "${Re}" from project directory.

Expected location: ${$e}

This may occur if:
- The image file was moved or deleted
- The project directory structure was modified
- File permissions are insufficient

Please ensure the image file exists in the images/ subdirectory of your project folder.

Technical details: ${Me}`),null}else{const de=Ae.name||"image";return alert(`Error: Image "${de}" has no file path specified in the project file.

The project file is missing the image file path information. This may indicate the project file is corrupted or was created with an older version of the software.`),null}if(!le){const de=Ae.name||"image";return alert(`Error: Could not create image bitmap for "${de}".

The image file may be corrupted or in an unsupported format. Please ensure the image is a valid PNG, JPEG, or other supported image format.`),null}return{url:ge,name:Ae.name??"image",width:Ae.width??le.width,height:Ae.height??le.height,filePath:ce,x:Ae.x??0,y:Ae.y??0,scale:Ae.scale??1,rotation:Ae.rotation??0,flipX:!!Ae.flipX,flipY:!!Ae.flipY,skewX:Ae.skewX??0,skewY:Ae.skewY??0,keystoneV:Ae.keystoneV??0,keystoneH:Ae.keystoneH??0,brightness:Ae.brightness??100,contrast:Ae.contrast??100,bitmap:le}},B=x!==void 0?x:Ti,re=await N(c.images?.top,B),ye=await N(c.images?.bottom,B);if(s(re),d(ye),c.pointIdCounter&&typeof c.pointIdCounter=="number"?Lp(c.pointIdCounter):(console.warn("Project file missing pointIdCounter. Starting from 1."),Lp(1)),c.locks&&(typeof c.locks.areImagesLocked=="boolean"&&Xi(c.locks.areImagesLocked),typeof c.locks.areViasLocked=="boolean"&&Nr(c.locks.areViasLocked),typeof c.locks.arePadsLocked=="boolean"&&Wo(c.locks.arePadsLocked),typeof c.locks.areTracesLocked=="boolean"&&Ms(c.locks.areTracesLocked),typeof c.locks.areComponentsLocked=="boolean"&&Ja(c.locks.areComponentsLocked),typeof c.locks.areGroundNodesLocked=="boolean"&&Do(c.locks.areGroundNodesLocked),typeof c.locks.arePowerNodesLocked=="boolean"&&$o(c.locks.arePowerNodesLocked)),c.visibility&&(typeof c.visibility.showViasLayer=="boolean"&&_a(c.visibility.showViasLayer),typeof c.visibility.showTopPadsLayer=="boolean"&&La(c.visibility.showTopPadsLayer),typeof c.visibility.showBottomPadsLayer=="boolean"&&Bo(c.visibility.showBottomPadsLayer),typeof c.visibility.showTopTracesLayer=="boolean"&&ro(c.visibility.showTopTracesLayer),typeof c.visibility.showBottomTracesLayer=="boolean"&&Da(c.visibility.showBottomTracesLayer),typeof c.visibility.showTopComponents=="boolean"&&Va(c.visibility.showTopComponents),typeof c.visibility.showBottomComponents=="boolean"&&ao(c.visibility.showBottomComponents),typeof c.visibility.showPowerLayer=="boolean"&&f(c.visibility.showPowerLayer),typeof c.visibility.showGroundLayer=="boolean"&&mi(c.visibility.showGroundLayer),typeof c.visibility.showConnectionsLayer=="boolean"&&Lr(c.visibility.showConnectionsLayer),typeof c.visibility.showTraceCornerDots=="boolean"&&di(c.visibility.showTraceCornerDots)),c.autoSave?(typeof c.autoSave.enabled=="boolean"&&io(c.autoSave.enabled),typeof c.autoSave.interval=="number"&&Es(c.autoSave.interval),typeof c.autoSave.baseName=="string"&&c.autoSave.baseName?(Io(c.autoSave.baseName),bs.current=c.autoSave.baseName,c.autoSave.enabled&&!el&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),io(!1),Es(null))):c.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),io(!1),Es(null),Io(""),bs.current="")):(io(!1),Es(null),yl(null),Io(""),Ml.current=null,bs.current="",$i.current&&(clearInterval($i.current),$i.current=null)),c.drawing?.drawingStrokes&&Array.isArray(c.drawing.drawingStrokes)){const Ae=c.drawing.drawingStrokes.map(Ne=>({...Ne,points:Ne.points.map(le=>({...le,...rr(le)}))})).filter(Ne=>!(Ne.type==="trace"&&Ne.points.length<2));et(Ae);for(const Ne of Ae)for(const le of Ne.points)le.id&&typeof le.id=="number"&&Xh(le.id)}else console.warn("Project file missing drawingStrokes. Starting with empty strokes."),et([]);if(c.drawing?.componentsTop){const Ae=c.drawing.componentsTop.map(Ne=>{const le=rr({x:Ne.x,y:Ne.y});return{...Ne,x:le.x,y:le.y,layer:Ne.layer||"top",pinConnections:Ne.pinConnections||new Array(Ne.pinCount||0).fill("")}});_i(Ae)}if(c.drawing?.componentsBottom){const Ae=c.drawing.componentsBottom.map(Ne=>{const le=rr({x:Ne.x,y:Ne.y});return{...Ne,x:le.x,y:le.y,layer:Ne.layer||"bottom",pinConnections:Ne.pinConnections||new Array(Ne.pinCount||0).fill("")}});Xn(Ae)}if(c.designatorCounters&&typeof c.designatorCounters=="object"){const Ae=c.designatorCounters;ur.current={...Ae}}else ur.current={};if(typeof c.autoAssignDesignators=="boolean"&&Ht(c.autoAssignDesignators),typeof c.useGlobalDesignatorCounters=="boolean"?Dn(c.useGlobalDesignatorCounters):Dn(!1),c.drawing?.grounds){const Ne=c.drawing.grounds.map(le=>{le.pointId||console.warn("Ground symbol missing pointId - this may cause issues");const ge=rr({x:le.x,y:le.y});return{...le,x:ge.x,y:ge.y}}).filter(le=>{const ge=typeof le.x=="number"&&typeof le.y=="number"&&!isNaN(le.x)&&!isNaN(le.y)&&isFinite(le.x)&&isFinite(le.y);return ge||console.warn(`Filtered out invalid ground symbol at (${le.x}, ${le.y})`),ge});ut(Ne);for(const le of Ne)le.pointId&&typeof le.pointId=="number"&&Xh(le.pointId)}else ut([]);let P;if(c.powerBuses&&Array.isArray(c.powerBuses)&&c.powerBuses.length>0?(P=c.powerBuses,os(P)):(P=[{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}],os(P)),c.groundBuses&&Array.isArray(c.groundBuses)&&c.groundBuses.length>0?U(c.groundBuses):U([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),c.drawing?.powers){const Ne=c.drawing.powers.map(le=>{le.pointId||console.warn("Power symbol missing pointId - this may cause issues");const ge=rr({x:le.x,y:le.y});return{...le,x:ge.x,y:ge.y}}).filter(le=>{const ge=typeof le.x=="number"&&typeof le.y=="number"&&!isNaN(le.x)&&!isNaN(le.y)&&isFinite(le.x)&&isFinite(le.y);return ge||console.warn(`Filtered out invalid power node at (${le.x}, ${le.y})`),ge});Be(Ne);for(const le of Ne)le.pointId&&typeof le.pointId=="number"&&Xh(le.pointId)}else Be([]);let ze=0;if(c.drawing?.drawingStrokes&&Array.isArray(c.drawing.drawingStrokes))for(const Ae of c.drawing.drawingStrokes)for(const Ne of Ae.points)Ne.id&&typeof Ne.id=="number"&&Ne.id>ze&&(ze=Ne.id);if(c.drawing?.componentsTop&&Array.isArray(c.drawing.componentsTop)){for(const Ae of c.drawing.componentsTop)if(Ae.pinConnections&&Array.isArray(Ae.pinConnections)){for(const Ne of Ae.pinConnections)if(Ne&&typeof Ne=="string"){const le=parseInt(Ne,10);!isNaN(le)&&le>ze&&(ze=le)}}}if(c.drawing?.componentsBottom&&Array.isArray(c.drawing.componentsBottom)){for(const Ae of c.drawing.componentsBottom)if(Ae.pinConnections&&Array.isArray(Ae.pinConnections)){for(const Ne of Ae.pinConnections)if(Ne&&typeof Ne=="string"){const le=parseInt(Ne,10);!isNaN(le)&&le>ze&&(ze=le)}}}if(c.drawing?.grounds&&Array.isArray(c.drawing.grounds))for(const Ae of c.drawing.grounds)Ae.pointId&&typeof Ae.pointId=="number"&&Ae.pointId>ze&&(ze=Ae.pointId);if(c.drawing?.powers&&Array.isArray(c.drawing.powers))for(const Ae of c.drawing.powers)Ae.pointId&&typeof Ae.pointId=="number"&&Ae.pointId>ze&&(ze=Ae.pointId);const me=ze+1,De=Gh();De<me&&(console.warn(`pointIdCounter was ${De} but max existing ID is ${ze}. Correcting to ${me}.`),Lp(me)),cr.current=!1,Mo(!1),Pa(!1),setTimeout(()=>{ud.current=!1},100)}catch(N){console.error("Failed to open project",N),alert("Failed to open project file. See console for details."),ud.current=!1}},[z,it,Ti,s,d,Lp,Xi,Nr,Wo,Ms,Ja,Do,$o,_a,La,Bo,ro,Da,Va,ao,f,mi,Lr,io,Es,yl,Io,et,_i,Xn,ut,os,U,Be,vc,rr,Kh,s2,Df,Ht,Dn,wi]),Mu=M.useCallback(async()=>{},[nl]),lu=M.useCallback(async c=>{const x=Ml.current;if(!x){console.warn("Cannot load file: no directory handle");return}try{const B=await(await x.getFileHandle(c)).getFile();if(B.size===0){console.warn(`File ${c} is empty, skipping`);const De=ts.current.filter(Ae=>Ae!==c);Fs(De),ts.current=De;return}const re=await B.text();if(!re||re.trim().length===0){console.warn(`File ${c} contains no data, skipping`);const De=ts.current.filter(Ae=>Ae!==c);Fs(De),ts.current=De;return}let ye;try{ye=JSON.parse(re)}catch(me){console.error(`Failed to parse JSON from file ${c}:`,me);const Ae=ts.current.filter(Ne=>Ne!==c);Fs(Ae),ts.current=Ae,await Mu();return}gc(),Vt(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),An(new Set),Cn(new Set),hn(new Set),yn(new Set),Rl(),await Ec(ye),hr(c);const ze=ts.current.indexOf(c);ze>=0?(ps(ze),ec.current=ze):await Mu(),cr.current=!1,Mo(!1)}catch(N){console.error("Failed to load file from history:",N);const B=ts.current;if(B.includes(c)){const re=B.filter(ye=>ye!==c);Fs(re),ts.current=re,await Mu()}}},[Ec,Mu,Rl]),vs=M.useCallback(async c=>{if(!Ti){console.warn("Cannot restore file: no project directory handle"),alert("No project directory available. Please open or create a project first.");return}try{let x;try{x=await Ti.getDirectoryHandle("history")}catch(P){console.error("History directory not found:",P),alert("History directory not found.");return}const B=await(await x.getFileHandle(c)).getFile();if(B.size===0){alert(`File ${c} is empty.`);return}const re=await B.text();if(!re||re.trim().length===0){alert(`File ${c} contains no data.`);return}let ye;try{ye=JSON.parse(re)}catch(P){console.error(`Failed to parse JSON from file ${c}:`,P),alert(`Failed to parse file ${c}. It may be corrupted.`);return}gc(),Vt(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),An(new Set),Cn(new Set),hn(new Set),yn(new Set),Rl(),await Ec(ye),hr(c),cr.current=!1,console.log(`Successfully restored file: ${c}`)}catch(x){console.error("Failed to restore file from history:",x),alert(`Failed to restore file ${c}. Please try again.`)}},[Ti,Ec,An,Cn,hn,yn,hr,Vt,gc,Rl]);Dt.useEffect(()=>{he&&!je&&Ee({x:window.innerWidth/2-300,y:window.innerHeight/2-250})},[he,je]);const Bl=M.useCallback(c=>{if(!je)return;Te(!0);const x=c.clientX-je.x,N=c.clientY-je.y,B=ye=>{Ee({x:ye.clientX-x,y:ye.clientY-N})},re=()=>{Te(!1),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",re)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",re)},[je]);M.useCallback(async()=>{const c=ec.current,x=ts.current;if(c>=0&&c<x.length-1){const N=c+1,B=x[N];B&&await lu(B)}},[lu]),M.useCallback(async()=>{const c=ec.current,x=ts.current;if(c<=0||c>=x.length||x.length===0){console.warn("Cannot navigate to newer file: index is",c,"history length is",x.length);return}if(c>0&&c<x.length&&x.length>0){const N=c-1;if(N>=0&&N<x.length){const B=x[N];B?await lu(B):(console.warn("No newer file found at index",N),await Mu())}else console.warn("Cannot navigate to newer file: prevIndex",N,"is out of bounds")}},[lu,Mu]),Dt.useEffect(()=>{dn.current=_t},[_t]);const Od=Dt.useRef(it),Fo=Dt.useRef(Bt);Dt.useEffect(()=>{const c=it!==Od.current;if(z==="draw"&&Od.current==="trace"&&c){if(dn.current.length>=2){vn(Xe,Jt,on,Se,Ve);const x={id:`${Date.now()}-trace-autofinalize`,points:dn.current,color:J,size:oe,layer:Fo.current,type:"trace"};et(N=>[...N,x]),Fo.current==="top"?Ka(N=>[...N,x.id]):ua(N=>[...N,x.id])}Ut([]),St(!1)}Od.current=it,Fo.current=Bt},[it,Bt,z,J,oe]);const yf=Dt.useRef(z);Dt.useEffect(()=>{if(yf.current==="draw"&&z!=="draw"&&it==="trace"&&dn.current.length>=2){const c={id:`${Date.now()}-trace-autofinalize`,points:dn.current,color:J,size:oe,layer:Bt,type:"trace"};et(x=>[...x,c]),Bt==="top"?Ka(x=>[...x,c.id]):ua(x=>[...x,c.id]),Ut([]),St(!1)}yf.current=z},[z,it,J,oe,Bt]);const tc=Dt.useMemo(()=>Xm,[]);Dt.useEffect(()=>{zu()},[Xe]),Dt.useEffect(()=>{zu()},[Jt,on,j,dr]);const en=$c>0,ws=M.useCallback(async()=>{const c=window;if(typeof c.showOpenFilePicker=="function")try{const[x]=await c.showOpenFilePicker({multiple:!1}),N=await x.getFile();if(!N.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}ld.current=!0,Oc(),await new Promise(me=>setTimeout(me,0)),hr(N.name);const B=await N.text(),re=JSON.parse(B);ld.current=!0;let ye=null;try{if(typeof x.getParent=="function")ye=await x.getParent();else{console.warn("getParent() not available. Prompting user for directory access...");const me=window;if(typeof me.showDirectoryPicker=="function")ye=await me.showDirectoryPicker({startIn:x});else throw new Error("Directory picker not available in this browser")}if(ye)try{if((await(await ye.getFileHandle(N.name)).getFile()).name!==N.name)throw new Error("Directory verification failed: file name mismatch")}catch(me){throw console.error("Directory verification failed:",me),console.error("The selected directory might not contain the opened file"),new Error("Directory verification failed - selected directory does not contain the opened file")}if(Vr(ye),Oo.current=ye,ye)try{await ye.getDirectoryHandle("history",{create:!0}),await ye.getDirectoryHandle("images",{create:!0}),await ye.getDirectoryHandle("datasheets",{create:!0}),console.log("Created/verified project subdirectories: history, images, datasheets")}catch(me){console.error("Failed to create/verify project subdirectories:",me)}}catch(me){console.error("Failed to get directory handle from file handle:",me)}finally{setTimeout(()=>{ld.current=!1},1e3)}const P=re.autoSave?.enabled===!0;await Ec(re,ye);let ze;if(re.projectInfo?.name?ze=re.projectInfo.name:(ze=N.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",mo(ze)),Hr||mo(ze),P&&ye){const me=ze.replace(/\.json$/i,""),Ae=pd(me).replace(/[^a-zA-Z0-9_-]/g,"_");yl(ye),Io(Ae),Ml.current=ye,bs.current=Ae,$i.current&&(clearInterval($i.current),$i.current=null)}setTimeout(()=>{na({visible:!0,source:"open",interval:5})},100)}catch(x){if(x?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",x),bo.current?.click()}else bo.current?.click()},[Ec,Hr,hr,mo,Vr,na,aa,yl,Io,Oc]),fd=M.useCallback(async()=>{go({visible:!1}),await Ru(),await ws()},[Ru,ws]),mf=M.useCallback(async()=>{go({visible:!1}),await ws()},[ws]),Ol=M.useCallback(()=>{go({visible:!1})},[]);Dt.useEffect(()=>{if(cs.visible){setTimeout(()=>{Ai.current?.focus()},0);const c=x=>{x.key==="Enter"?(x.preventDefault(),fd()):x.key==="Escape"&&(x.preventDefault(),go({visible:!1}))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}}},[cs.visible,fd]);const dp=M.useCallback(async()=>{dd()?go({visible:!0}):await ws()},[dd,ws]);return n.jsxs("div",{className:"app",children:[n.jsx("header",{className:"app-header",children:n.jsx("h1",{children:" PCB Tracer (v3.0)"})}),n.jsx(fv,{openMenu:kc,setOpenMenu:Ro,isReadOnlyMode:en,currentProjectFilePath:nl,isProjectActive:!!Ti,autoSaveEnabled:aa,autoSaveInterval:Qs,hasUnsavedChangesState:Ac,onNewProject:Lu,onOpenProject:dp,onSaveProject:Ru,onPrint:ap,onExportBOM:xf,bomExportFormat:we,setBomExportFormat:X,hasUnsavedChanges:dd,setNewProjectDialog:ia,setAutoSaveDialog:ls,onShowGeminiSettings:()=>jl(!0),topImage:a,bottomImage:l,setCurrentTool:w,resetImageTransform:zd,areImagesLocked:Di,setAreImagesLocked:Xi,onEnterBoardDimensions:()=>Jc(!0),fileInputTopRef:Yc,fileInputBottomRef:Ua,openProjectRef:bo,increaseSize:Pd,decreaseSize:_d,brushSize:oe,drawingStrokes:Xe,selectedIds:oi,selectedComponentIds:gn,selectedPowerIds:li,selectedGroundIds:ci,componentsTop:Jt,componentsBottom:on,powers:g,grounds:j,powerNodeNames:Hf,groundNodeNames:Wf,setSetSizeDialog:ss,areViasLocked:Mi,setAreViasLocked:Nr,arePadsLocked:sr,setArePadsLocked:Wo,areTestPointsLocked:ya,setAreTestPointsLocked:Ls,areTracesLocked:da,setAreTracesLocked:Ms,areComponentsLocked:Dr,setAreComponentsLocked:Ja,areGroundNodesLocked:fa,setAreGroundNodesLocked:Do,arePowerNodesLocked:ui,setArePowerNodesLocked:$o,showTraceCornerDots:Mr,setShowTraceCornerDots:di,setSelectedIds:An,setSelectedComponentIds:Cn,setSelectedPowerIds:hn,setSelectedGroundIds:yn,selectAllVias:wu,selectAllTraces:Qc,selectAllPads:ul,selectAllComponents:zl,selectDisconnectedComponents:Pl,selectAllComponentConnections:Su,selectAllPowerNodes:$f,selectAllGroundNodes:Yf,selectPowerNodesByName:Gf,selectGroundNodesByName:sf,setShowPowerBusManager:V,setShowGroundBusManager:fn,setShowPastMachine:be,toolRegistry:Wn,updateToolSettings:qo,updateToolLayerSettings:po,setBrushSize:ie,setBrushColor:ue,saveToolSettings:Nx,saveToolLayerSettings:Kd,colorPalette:tc,currentTool:z,drawingMode:it,traceToolLayer:Zn,padToolLayer:bi,testPointToolLayer:Fn,componentToolLayer:xi,setTopTraceSize:H,setBottomTraceSize:ae,setTopPadSize:A,setBottomPadSize:q,setTopTestPointSize:Fe,setBottomTestPointSize:lt,setTopComponentSize:Wt,setBottomComponentSize:Je,setComponentConnectionSize:_n,topTraceColor:E,bottomTraceColor:F,topPadColor:ve,bottomPadColor:Ce,topTestPointColor:te,bottomTestPointColor:ee,topComponentColor:kt,bottomComponentColor:ne,setTopTraceColor:Y,setBottomTraceColor:L,setTopPadColor:pe,setBottomPadColor:fe,setTopTestPointColor:xe,setBottomTestPointColor:Ie,setTopComponentColor:It,setBottomComponentColor:jt,setComponentConnectionColor:un,saveDefaultSize:Rt,saveDefaultColor:Le,menuBarRef:Qo,onOpenProjectNotes:pf,onOpenTestPoints:hf,onOpenTransformImages:()=>ma(!0),onOpenTransformAll:()=>ds(!0)}),n.jsx("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:n.jsxs("div",{ref:cc,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[n.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[n.jsxs("button",{onClick:()=>{en||ou()},onMouseDown:c=>c.currentTarget.blur(),disabled:en,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="select"?"2px solid #000":"1px solid #ddd",background:z==="select"?"#e6f0ff":"#fff",color:en?"#999":"#222",outline:"none",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsx(Wm,{size:14}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),n.jsxs("button",{onMouseDown:c=>{if(c.altKey&&!en){c.preventDefault(),c.stopPropagation(),kl(!1),Ir(!0);return}},onClick:c=>{!en&&!c.altKey&&(console.log("Via tool clicked"),bt(),an("via"),w("draw"),_a(!0))},disabled:en,title:"Draw Vias (V), Option+click for Pattern Placement",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="draw"&&it==="via"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&it==="via"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const c=Bn.get("via").color;return n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:c,strokeWidth:"3"}),n.jsx("circle",{cx:"12",cy:"12",r:"4",fill:c})]})})()}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Bn.get("via").size})]})]}),n.jsxs("button",{ref:ku,onMouseDown:c=>{if(c.altKey&&!en){c.preventDefault(),c.stopPropagation(),kl(!0),Ir(!0);return}},onClick:c=>{!en&&!c.altKey&&(console.log("Pad tool clicked"),bt(),an("pad"),w("draw"),setTimeout(()=>Ld(),0))},disabled:en,title:"Draw Pads (P), Option+click for Pattern Placement",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="draw"&&it==="pad"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&it==="pad"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const x=bi==="top"?"padTop":"padBottom",N=Bn.get(x).color,B=14,re=(24-B)/2,ye=(24-B)/2;return n.jsx("rect",{x:re,y:ye,width:B,height:B,fill:N})})()}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(z==="draw"&&it==="pad"&&ar.toolInstanceId&&(ar.toolInstanceId==="padTop"||ar.toolInstanceId==="padBottom"))return ar.size;const c=bi==="top"?"padTop":"padBottom";return Bn.get(c).size})()})]})]}),n.jsxs("button",{ref:Nu,onClick:()=>{en||(console.log("Test Point tool clicked"),bt(),an("testPoint"),w("draw"),setTimeout(()=>Ll(),0))},disabled:en,title:"Draw Test Points (Y)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="draw"&&it==="testPoint"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&it==="testPoint"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const x=Fn==="top"?"testPointTop":"testPointBottom",N=Bn.get(x).color,B=14,re=12,ye=12;return n.jsx("path",{d:`M ${re} ${ye-B/2} L ${re+B/2} ${ye} L ${re} ${ye+B/2} L ${re-B/2} ${ye} Z`,fill:N,stroke:"#000",strokeWidth:"1.5"})})()}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Y"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(z==="draw"&&it==="testPoint"&&ar.toolInstanceId&&(ar.toolInstanceId==="testPointTop"||ar.toolInstanceId==="testPointBottom"))return ar.size;const c=Fn==="top"?"testPointTop":"testPointBottom";return Bn.get(c).size})()})]})]}),n.jsxs("button",{ref:nd,onClick:()=>{en||(console.log("Trace tool clicked"),bt(),an("trace"),w("draw"),setTimeout(()=>od(),0))},disabled:en,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="draw"&&it==="trace"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&it==="trace"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsx(Ym,{size:14,color:(()=>{const x=Zn==="top"?"traceTop":"traceBottom";return Bn.get(x).color})()}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const c=Zn==="top"?"traceTop":"traceBottom";return Bn.get(c).size})()})]})]}),n.jsxs("button",{ref:Zf,onClick:()=>{en||(console.log("Component tool clicked"),bt(),w("component"))},disabled:en,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="component"?"2px solid #000":"1px solid #ddd",background:z==="component"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[(()=>{const x=(xi||"top")==="top"?"componentTop":"componentBottom",N=Bn.get(x).color;return _l?n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[n.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:N,strokeWidth:"1.5"}),n.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:N,fontWeight:"bold",fontFamily:"monospace",children:(()=>{const B=pc?.componentDefinition?.designator??pc?.designator;return B?B.length<=3?B:B.substring(0,3):b0(_l)})()})]}):n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[n.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:N,stroke:N,strokeWidth:"0.5"}),n.jsxs("g",{stroke:N,fill:"none",strokeWidth:"1.5",children:[n.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),n.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:N})]})]})})(),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const c=xi==="top"?"componentTop":"componentBottom";return Bn.get(c).size})()})]})]}),n.jsxs("button",{ref:kd,onClick:()=>{en||(console.log("Power tool clicked"),bt(),Ln(!1),bn.length===1?(Qe(bn[0].id),w("power"),Ye(!1),f(!0)):bn.length>1?Ye(!0):(Ye(!0),w("power"),f(!0)))},disabled:en,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="power"?"2px solid #000":"1px solid #ddd",background:z==="power"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsx("span",{style:{color:(dt?bn.find(c=>c.id===dt)?.color:null)||"#ff0000",fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Bn.get("power").size})]})]}),n.jsxs("button",{ref:hc,onClick:()=>{en||(console.log("Ground tool clicked"),Ye(!1),S.length===1?($n(S[0].id),w("ground"),Ln(!1),mi(!0)):S.length>1?Ln(!0):(Ln(!0),w("ground"),mi(!0)))},disabled:en,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="ground"?"2px solid #000":"1px solid #ddd",background:z==="ground"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:n.jsxs("g",{stroke:(Ci?S.find(c=>c.id===Ci)?.color:null)||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[n.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),n.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),n.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),n.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Bn.get("ground").size})]})]}),n.jsx("div",{style:{height:32}}),n.jsxs("button",{onClick:()=>{en||(bt(),w(c=>c==="pan"?"draw":"pan"))},disabled:en,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:z==="pan"?"2px solid #000":"1px solid #ddd",background:z==="pan"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:n.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),n.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),n.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),n.jsxs("button",{onClick:()=>{bt(),vl(!1),w(c=>c==="magnify"?"draw":"magnify")},title:"Magnify (M)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="magnify"?"2px solid #000":"1px solid #ddd",background:z==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[n.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),n.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),vo?n.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):n.jsxs(n.Fragment,{children:[n.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),n.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"M"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),n.jsxs("button",{onClick:()=>{en||ds(!0)},disabled:en,title:"Change Perspective (E) - Open Change Perspective Dialog",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:Bs?"2px solid #000":"1px solid #ddd",background:Bs?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[n.jsx("ellipse",{cx:"12",cy:"12",rx:"9",ry:"6",fill:"none",stroke:"#111",strokeWidth:"2"}),n.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"none",stroke:"#111",strokeWidth:"2"}),n.jsx("circle",{cx:"11",cy:"11",r:"1.5",fill:"#111",stroke:"none"})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),n.jsxs("button",{onClick:()=>{en||(bt(),w("center"),oa(!0),Zr.current&&clearTimeout(Zr.current),Zr.current=setTimeout(()=>{oa(!1),w("select"),Ea(void 0)},2e3))},disabled:en,title:"Set View (X) - Press 0-9 to Set View",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="center"?"2px solid #000":"1px solid #ddd",background:z==="center"?"#e6f0ff":"#fff",color:en?"#999":"#222",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:[n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[n.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),n.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"22",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),n.jsx("line",{x1:"2",y1:"12",x2:"10",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),n.jsx("line",{x1:"14",y1:"12",x2:"22",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[n.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"X"}),n.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),n.jsxs("div",{style:{position:"relative"},children:[n.jsx("button",{onClick:()=>{en||xo(c=>!c)},disabled:en,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:n.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[n.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),n.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Nc&&n.jsx("div",{ref:ol,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:tc.map(c=>n.jsx("div",{onClick:()=>{ue(c),xo(!1);try{let N=null;z==="draw"&&it==="via"?N="via":z==="draw"&&it==="pad"?N=(bi||"top")==="bottom"?"padBottom":"padTop":z==="draw"&&it==="testPoint"?N=(Fn||"top")==="bottom"?"testPointBottom":"testPointTop":z==="draw"&&it==="trace"?N=(Zn||"top")==="bottom"?"traceBottom":"traceTop":z==="component"?N=(xi||"top")==="bottom"?"componentBottom":"componentTop":z==="power"?N="power":z==="ground"&&(N="ground"),N&&Bn.setColor(N,c)}catch(N){console.error("Error updating tool instance color:",N)}const x=_s(Wn);if(x)if(z==="draw"&&it==="trace"){const N=Zn||"top",re=x.layerSettings.get(N)?.size||x.settings.size,ye={color:c,size:re};po(x.id,N,ye),Kd(x.id),N==="top"?(Y(c),Le("trace",c,"top")):(L(c),Le("trace",c,"bottom"))}else if(z==="draw"&&it==="pad"){const N=bi||"top",re=x.layerSettings.get(N)?.size||x.settings.size,ye={color:c,size:re};po(x.id,N,ye),Kd(x.id),N==="top"?(pe(c),Le("pad",c,"top")):(fe(c),Le("pad",c,"bottom"))}else if(z==="draw"&&it==="testPoint"){const N=Fn||"top",re=x.layerSettings.get(N)?.size||x.settings.size,ye={color:c,size:re};po(x.id,N,ye),Kd(x.id),N==="top"?(xe(c),Le("testPoint",c,"top")):(Ie(c),Le("testPoint",c,"bottom"))}else if(z==="component"){const N=xi||"top",re=x.layerSettings.get(N)?.size||x.settings.size,ye={color:c,size:re};po(x.id,N,ye),Kd(x.id),N==="top"?(It(c),Le("component",c,"top")):(jt(c),Le("component",c,"bottom"))}else{const N={...x.settings,color:c};qo(x.id,N),Nx(x.id,c,x.settings.size),z==="draw"&&it==="via"&&Le("via",c)}Le("brush",c),oi.size>0&&et(N=>N.map(B=>oi.has(B.id)?(B.type==="via"?(Le("via",c),Hn(re=>{const ye=new Map(re),P=ye.get("via");return P&&ye.set("via",{...P,settings:{...P.settings,color:c}}),ye})):B.type==="pad"?(Le("pad",c),Hn(re=>{const ye=new Map(re),P=ye.get("pad");return P&&ye.set("pad",{...P,settings:{...P.settings,color:c}}),ye})):B.type==="trace"&&Le("trace",c,B.layer),{...B,color:c}):B)),gn.size>0&&(Le("component",c),_i(N=>N.map(B=>gn.has(B.id)?{...B,color:c}:B)),Xn(N=>N.map(B=>gn.has(B.id)?{...B,color:c}:B))),li.size>0&&Be(N=>N.map(B=>li.has(B.id)?{...B,color:c}:B)),ci.size>0&&ut(N=>N.map(B=>ci.has(B.id)?{...B,color:c}:B))},title:c,style:{width:22,height:22,backgroundColor:c,border:c===J?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},c))})})]}),n.jsx("div",{style:{height:32}}),n.jsx("button",{onClick:()=>{en||pf()},disabled:en,title:"Project Notes",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2",fill:"#fff",stroke:"#FFD700",strokeWidth:"1"}),n.jsx("circle",{cx:"6",cy:"7",r:"1.5",fill:"#000"}),n.jsx("rect",{x:"9",y:"6",width:"8",height:"2",rx:"1",fill:"#000"}),n.jsx("circle",{cx:"6",cy:"11",r:"1.5",fill:"#000"}),n.jsx("rect",{x:"9",y:"10",width:"8",height:"2",rx:"1",fill:"#000"}),n.jsx("circle",{cx:"6",cy:"15",r:"1.5",fill:"#000"}),n.jsx("rect",{x:"9",y:"14",width:"8",height:"2",rx:"1",fill:"#000"}),n.jsx("circle",{cx:"6",cy:"19",r:"1.5",fill:"#000"}),n.jsx("rect",{x:"9",y:"18",width:"8",height:"2",rx:"1",fill:"#000"})]})}),n.jsx("button",{onClick:()=>{en||hf()},disabled:en,title:"Test Points",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:en?"not-allowed":"pointer",opacity:en?.5:1},children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("rect",{width:"24",height:"24",fill:"#FFD700"}),n.jsx("circle",{cx:"6",cy:"7",r:"1.5",fill:"#000"}),n.jsx("rect",{x:"9",y:"6",width:"8",height:"2",rx:"1",fill:"#000"}),n.jsx("circle",{cx:"6",cy:"11",r:"1.5",fill:"#000"}),n.jsx("rect",{x:"9",y:"10",width:"8",height:"2",rx:"1",fill:"#000"}),n.jsx("circle",{cx:"6",cy:"15",r:"1.5",fill:"#000"}),n.jsx("rect",{x:"9",y:"14",width:"8",height:"2",rx:"1",fill:"#000"}),n.jsx("circle",{cx:"6",cy:"19",r:"1.5",fill:"#000"}),n.jsx("rect",{x:"9",y:"18",width:"8",height:"2",rx:"1",fill:"#000"})]})})]}),z==="draw"&&it==="trace"&&ju&&n.jsxs("div",{ref:tu,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[n.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[n.jsx("input",{type:"radio",name:"traceToolLayer",checked:Zn==="top",onChange:()=>{console.log("Trace tool Top clicked"),fo.current="top",ka("top"),Kt("top"),ue(E),ie($),Hn(c=>{const x=new Map(c),N=x.get("trace");return N&&x.set("trace",{...N,settings:{color:E,size:$}}),x}),Ic(!1),sa(!0),ro(!0)}}),n.jsx("span",{children:"Top"})]}),n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",name:"traceToolLayer",checked:Zn==="bottom",onChange:()=>{console.log("Trace tool Bottom clicked"),fo.current="bottom",ka("bottom"),Kt("bottom"),ue(F),ie(Pe),Hn(c=>{const x=new Map(c),N=x.get("trace");return N&&x.set("trace",{...N,settings:{color:F,size:Pe}}),x}),Ic(!1),pa(!0),Da(!0)}}),n.jsx("span",{children:"Bottom"})]})]}),z==="draw"&&it==="pad"&&Ku&&n.jsxs("div",{ref:Cu,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[n.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[n.jsx("input",{type:"radio",name:"padToolLayer",checked:bi==="top",onChange:()=>{console.log("Pad tool Top clicked"),As.current="top",uo("top"),Kt("top");const c=Bn.get("padTop");ue(c.color),ie(c.size),Hn(x=>{const N=new Map(x),B=N.get("pad");return B&&N.set("pad",{...B,settings:{color:c.color,size:c.size}}),N}),Zu(!1),sa(!0),La(!0)}}),n.jsx("span",{children:"Top"})]}),n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",name:"padToolLayer",checked:bi==="bottom",onChange:()=>{console.log("Pad tool Bottom clicked"),As.current="bottom",uo("bottom"),Kt("bottom");const c=Bn.get("padBottom");ue(c.color),ie(c.size),Hn(x=>{const N=new Map(x),B=N.get("pad");return B&&N.set("pad",{...B,settings:{color:c.color,size:c.size}}),N}),Zu(!1),pa(!0),Bo(!0)}}),n.jsx("span",{children:"Bottom"})]})]}),z==="draw"&&it==="testPoint"&&Ju&&n.jsxs("div",{ref:nu,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[n.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[n.jsx("input",{type:"radio",name:"testPointToolLayer",checked:Fn==="top",onChange:()=>{console.log("Test Point tool Top clicked"),zs.current="top",Ns("top"),Kt("top"),ue(te),ie(_e),Hn(c=>{const x=new Map(c),N=x.get("testPoint");return N&&x.set("testPoint",{...N,settings:{color:te,size:_e}}),x}),Tu(!1),sa(!0),Tl(!0)}}),n.jsx("span",{children:"Top"})]}),n.jsxs("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",name:"testPointToolLayer",checked:Fn==="bottom",onChange:()=>{console.log("Test Point tool Bottom clicked"),zs.current="bottom",Ns("bottom"),Kt("bottom"),ue(ee),ie(nt),Hn(c=>{const x=new Map(c),N=x.get("testPoint");return N&&x.set("testPoint",{...N,settings:{color:ee,size:nt}}),x}),Tu(!1),pa(!0),Cl(!0)}}),n.jsx("span",{children:"Bottom"})]})]}),He&&n.jsxs("div",{ref:Qu,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[n.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),bn.length===0?n.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...bn].sort((c,x)=>{const N=ye=>{const P=ye.match(/([+-]?)(\d+\.?\d*)/);if(P){const ze=P[1]||"+",me=parseFloat(P[2]);return{absValue:Math.abs(me),isNegative:ze==="-",original:ye}}return{absValue:1/0,isNegative:!1,original:ye}},B=N(c.voltage),re=N(x.voltage);return B.absValue!==re.absValue?B.absValue-re.absValue:B.isNegative!==re.isNegative?B.isNegative?-1:1:0}).map(c=>n.jsx("button",{onClick:x=>{x.preventDefault(),x.stopPropagation(),Qe(c.id),z!=="power"&&(bt(),w("power"),f(!0)),Ye(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:c.color,border:"1px solid #ccc"}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:c.name}),n.jsx("div",{style:{fontSize:"11px",color:"#666"},children:c.voltage})]})]})},c.id)),n.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),n.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),Ye(!1),V(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),n.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),Ye(!1),Qe(null),w("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),pn&&n.jsxs("div",{ref:ed,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[n.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),S.length===0?n.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...S].sort((c,x)=>c.name.localeCompare(x.name)).map(c=>{const x=c.id==="groundbus-earth",N=Ci===c.id;return n.jsx("button",{onClick:B=>{B.preventDefault(),B.stopPropagation(),$n(c.id),z!=="ground"&&(bt(),w("ground"),mi(!0)),Ln(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:N?"#e0e0e0":"#f5f5f5",border:N?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:x?n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[n.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[n.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),n.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),n.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),n.jsx("div",{children:n.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:c.name})})]})},c.id)}),n.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),n.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),Ln(!1),fn(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),n.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),Ln(!1),$n(null),w("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),n.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[n.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),n.jsxs("div",{onClick:()=>Kt("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Ot==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[n.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),n.jsx("label",{className:"radio-label",style:{margin:0},children:n.jsx("input",{type:"checkbox",checked:Rr,onChange:c=>sa(c.target.checked)})})]}),n.jsx("canvas",{ref:Sl,width:60,height:40,style:{width:"60px",height:"40px"}})]}),n.jsxs("div",{onClick:()=>Kt("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Ot==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[n.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),n.jsx("label",{className:"radio-label",style:{margin:0},children:n.jsx("input",{type:"checkbox",checked:sl,onChange:c=>pa(c.target.checked)})})]}),n.jsx("canvas",{ref:xu,width:60,height:40,style:{width:"60px",height:"40px"}})]}),n.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:mr,onChange:c=>_a(c.target.checked)}),n.jsx("span",{children:"Vias"})]}),n.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:br,onChange:c=>ro(c.target.checked)}),n.jsx("span",{children:"Traces (Top)"})]}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Bi,onChange:c=>Va(c.target.checked)}),n.jsx("span",{children:"Components (Top)"})]}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Ra,onChange:c=>La(c.target.checked)}),n.jsx("span",{children:"Pads (Top)"})]}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:es,onChange:c=>Tl(c.target.checked)}),n.jsx("span",{children:"Test Points (Top)"})]}),n.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Qr,onChange:c=>Da(c.target.checked)}),n.jsx("span",{children:"Traces (Bottom)"})]}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Ma,onChange:c=>ao(c.target.checked)}),n.jsx("span",{children:"Components (Bottom)"})]}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Zi,onChange:c=>Bo(c.target.checked)}),n.jsx("span",{children:"Pads (Bottom)"})]}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:gs,onChange:c=>Cl(c.target.checked)}),n.jsx("span",{children:"Test Points (Bottom)"})]}),n.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:jo,onChange:c=>f(c.target.checked)}),n.jsx("span",{children:"Power"})]}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:dr,onChange:c=>mi(c.target.checked)}),n.jsx("span",{children:"Ground"})]}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:fr,onChange:c=>Lr(c.target.checked)}),n.jsx("span",{children:"Connections"})]}),n.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),n.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:mr&&Ra&&Zi&&es&&gs&&br&&Qr&&Bi&&Ma&&jo&&dr&&fr,onChange:c=>{const x=c.target.checked;_a(x),La(x),Bo(x),Tl(x),Cl(x),ro(x),Da(x),Va(x),ao(x),f(x),mi(x),Lr(x)}}),n.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),n.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),n.jsxs("div",{style:{marginTop:6},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",b,"%"]}),n.jsxs("label",{className:"radio-label",style:{margin:0},children:[n.jsx("input",{type:"checkbox",checked:C,onChange:c=>{const x=c.target.checked;x?(sa(!0),pa(!0)):(y(50),w("select")),D(x)}}),n.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),n.jsx("input",{type:"range",min:"0",max:"100",value:b,onChange:c=>y(Number(c.target.value)),onDoubleClick:()=>xc("transparency"),className:"slider",style:{width:"100%",marginTop:3}}),C&&n.jsxs("div",{style:{marginTop:6},children:[n.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Cycle Speed: ",(O/1e3).toFixed(1),"s"]}),n.jsx("input",{type:"range",min:"500",max:"8000",step:"100",value:8500-O,onChange:c=>T(8500-Number(c.target.value)),onDoubleClick:()=>T(2e3),className:"slider",style:{width:"100%",marginTop:3}})]})]})]}),n.jsx(pv,{visible:!a&&!l,canvasSize:al,canvasPosition:{left:244,top:6}}),n.jsx("canvas",{ref:or,width:al.width,height:al.height,tabIndex:0,onMouseDown:ep,onMouseMove:ip,onMouseUp:ad,onMouseLeave:ad,onWheel:tp,onDoubleClick:np,className:`pcb-canvas ${z==="transform"?"transform-cursor":z==="draw"?"draw-cursor":z==="erase"?"erase-cursor":"default-cursor"}`,style:{position:"absolute",left:"244px",top:"6px",...sc?{cursor:sc}:z==="pan"?{cursor:Us?"grabbing":"grab"}:{},width:`${al.width}px`,height:`${al.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),yo&&n.jsxs("div",{style:{position:"absolute",left:`${244+al.width-120}px`,top:`${6+al.height+4}px`,fontSize:"11px",fontFamily:"monospace",color:"#333",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"2px 6px",borderRadius:"3px",border:"1px solid #ccc",pointerEvents:"none",zIndex:1e3},children:["(",yo.x.toFixed(1),"mm, ",yo.y.toFixed(1),"mm)"]}),n.jsx(Cv,{componentEditor:Aa,setComponentEditor:Po,componentsTop:Jt,componentsBottom:on,setComponentsTop:_i,setComponentsBottom:Xn,connectingPin:Kr,setConnectingPin:Ds,componentDialogPosition:ho,setComponentDialogPosition:_o,isDraggingDialog:Rs,setIsDraggingDialog:Vl,dialogDragOffset:gl,setDialogDragOffset:Ks,areComponentsLocked:Dr,setSelectedComponentIds:Cn,setNotesDialogVisible:zi,projectDirHandle:Ti,showGeminiSettingsDialog:yu,onGeminiSettingsDialogClose:()=>jl(!1),onFindComponent:fc,componentDefinition:Aa?(()=>{const c=Jt.find(x=>x.id===Aa.id)||on.find(x=>x.id===Aa.id);return c?Fl(c):void 0})():void 0}),va&&wo&&(()=>{const c=va.component,x=va.layer;if(!c)return null;const N=c.componentType||"Component",B=c.componentType==="IntegratedCircuit"&&"icType"in c?c.icType:null,re=Xf(c),ye=Fl(c),P=ye?.category==="Semiconductors",ze=c?.pinNames,me=ye?.properties?.pinNames,De=8,Ae=8,Ne=200,le=150,ge=10;let ce=va.x+De,de=va.y+Ae;return ce+Ne+ge>window.innerWidth&&(ce=va.x-Ne-De),de+le+ge>window.innerHeight&&(de=va.y-le-Ae),ce=Math.max(ge,Math.min(ce,window.innerWidth-Ne-ge)),de=Math.max(ge,Math.min(de,window.innerHeight-le-ge)),n.jsxs("div",{style:{position:"fixed",left:`${ce}px`,top:`${de}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:Ul(N)}),n.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["Layer: ",x==="top"?"Top":"Bottom"]}),B&&n.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["IC Type: ",B]}),re.length>0&&n.jsx("div",{style:{marginBottom:"4px"},children:re.map((Me,Re)=>n.jsx("div",{style:{color:"#e0e0e0",fontSize:"11px",marginBottom:"2px"},children:Me},Re))}),c.description&&n.jsx("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:c.description}),c.notes&&n.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c.notes}),P&&c.pinCount>0&&(()=>{const Me=Array.from({length:c.pinCount},(Re,$e)=>{const ht=c.pinConnections&&c.pinConnections.length>$e?c.pinConnections[$e]:"",mt=ze&&$e<ze.length?ze[$e]:"",Tt=me&&$e<me.length?me[$e]:"",tt=Tt==="CHIP_DEPENDENT",Yt=mt&&mt.trim()!==""?mt:tt?"":Tt;return{pin:$e+1,name:Yt||"-",nodeId:ht||"-"}});return n.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid rgba(255,255,255,0.2)"},children:[n.jsx("div",{style:{fontSize:"11px",fontWeight:600,marginBottom:"4px",color:"#fff"},children:"Pin Connections:"}),n.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px"},children:[n.jsx("thead",{children:n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.3)"},children:[n.jsx("th",{style:{textAlign:"left",padding:"2px 6px",fontWeight:600,color:"#fff"},children:"Pin"}),n.jsx("th",{style:{textAlign:"left",padding:"2px 6px",fontWeight:600,color:"#fff"},children:"Name"}),n.jsx("th",{style:{textAlign:"left",padding:"2px 6px",fontWeight:600,color:"#fff"},children:"Node ID"})]})}),n.jsx("tbody",{children:Me.map((Re,$e)=>n.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[n.jsx("td",{style:{padding:"2px 6px",color:"#e0e0e0",fontFamily:"monospace"},children:Re.pin}),n.jsx("td",{style:{padding:"2px 6px",color:"#e0e0e0",fontStyle:Re.name!=="-"?"italic":"normal"},children:Re.name}),n.jsx("td",{style:{padding:"2px 6px",color:"#e0e0e0",fontFamily:"monospace"},children:Re.nodeId})]},$e))})]})]})})()]})})(),_c&&wo&&(()=>{const c=_c.stroke;return c.notes?n.jsxs("div",{style:{position:"fixed",left:`${_c.x+10}px`,top:`${_c.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[n.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"Test Point"}),n.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c.notes})]}):null})(),wt&&wt.visible&&(()=>{if(!g.find(N=>N.id===wt.id))return null;const x=bn.find(N=>N.id===wt.powerBusId);return n.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[n.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),n.jsx("button",{onClick:()=>sn(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),n.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:x?`${x.name} (${x.voltage})`:"Unknown"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:`power-layer-${wt.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),n.jsxs("select",{id:`power-layer-${wt.id}`,name:`power-layer-${wt.id}`,value:wt.layer,onChange:N=>sn({...wt,layer:N.target.value}),disabled:ui,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:ui?.6:1},children:[n.jsx("option",{value:"top",children:"Top"}),n.jsx("option",{value:"bottom",children:"Bottom"})]})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),n.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:wt.x.toFixed(2)})]}),n.jsxs("div",{children:[n.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),n.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:wt.y.toFixed(2)})]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[n.jsx("button",{onClick:()=>sn(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),n.jsx("button",{onClick:()=>{ui||(Be(N=>N.map(B=>B.id===wt.id?{...B,layer:wt.layer}:B)),sn(null))},disabled:ui,style:{padding:"2px 5px",background:ui?"#f5f5f5":"#0b5fff",color:ui?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:ui?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!a&&!l&&n.jsx("div",{className:"placeholder"})]})}),n.jsx(_v,{visible:_,onClose:()=>V(!1),powerBuses:bn,setPowerBuses:os,editingPowerBusId:Z,setEditingPowerBusId:Q,powers:g}),n.jsx(Dv,{visible:Nt,onClose:()=>fn(!1),groundBuses:S,setGroundBuses:U,editingGroundBusId:cn,setEditingGroundBusId:Qn,grounds:j}),n.jsx(Bv,{visible:he,projectDirHandle:Ti,onClose:()=>{be(!1),Ee(void 0)},onRestore:vs,position:je,isDragging:rt,onDragStart:Bl}),n.jsx(Rv,{visible:si,onClose:()=>Ji(!1),autoAssignDesignators:tn,setAutoAssignDesignators:Ht,useGlobalDesignatorCounters:ir,setUseGlobalDesignatorCounters:Dn}),n.jsx("input",{ref:Yc,type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",style:{display:"none"},onChange:c=>{const x=c.target.files?.[0];x&&so(x,"top"),c.target.value=""}}),n.jsx("input",{ref:Ua,type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",style:{display:"none"},onChange:c=>{const x=c.target.files?.[0];x&&so(x,"bottom"),c.target.value=""}}),n.jsx("input",{ref:bo,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async c=>{const x=c.target.files?.[0];if(x)try{Oc(),await new Promise(P=>setTimeout(P,0)),hr(x.name);const N=await x.text(),B=JSON.parse(N);await Ec(B,null);let ye;B.projectInfo?.name?ye=B.projectInfo.name:(ye=x.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",mo(ye)),Hr||mo(ye),setTimeout(()=>{na({visible:!0,source:"open",interval:5})},100)}catch(N){console.error("Failed to open project",N),alert("Failed to open project file. See console for details.")}c.target.value=""}}),n.jsx(hv,{visible:Lo.visible,selectedIds:oi,selectedComponentIds:gn,selectedPowerIds:li,selectedGroundIds:ci,drawingStrokes:Xe,componentsTop:Jt,componentsBottom:on,powers:g,grounds:j,powerBuses:bn,onClose:()=>{Is({visible:!1,text:""})},setComponentsTop:_i,setComponentsBottom:Xn,determineViaType:ys,determinePadType:Ws,determineTestPointType:oo,onFindComponent:fc,onFindStroke:Mc,onFindPower:Vf,onFindGround:of,onOpenNotesDialog:()=>zi(!0),position:ii,isDragging:Ui,onDragStart:c=>{ii&&(qi({x:c.clientX-ii.x,y:c.clientY-ii.y}),ha(!0),c.preventDefault())}}),n.jsx(gv,{visible:Wr,selectedIds:oi,selectedComponentIds:gn,selectedPowerIds:li,selectedGroundIds:ci,drawingStrokes:Xe,componentsTop:Jt,componentsBottom:on,powers:g,grounds:j,powerBuses:bn,onClose:()=>{zi(!1)},setComponentsTop:_i,setComponentsBottom:Xn,setDrawingStrokes:et,setPowerSymbols:Be,setGroundSymbols:ut,determineViaType:ys,determinePadType:Ws,determineTestPointType:oo,position:Ar,isDragging:pr,onDragStart:c=>{Ar&&(Yr({x:c.clientX-Ar.x,y:c.clientY-Ar.y}),Oi(!0),c.preventDefault())}}),n.jsx(xv,{visible:Ei,projectNotes:kn,setProjectNotes:zn,onClose:()=>{Ha(!1)},position:Wa,isDragging:ea,onDragStart:c=>{Wa?(Dc({x:c.clientX-Wa.x,y:c.clientY-Wa.y}),ll(!0),c.preventDefault()):(Sa({x:c.clientX-300,y:c.clientY-200}),Dc({x:300,y:200}),ll(!0),c.preventDefault())}}),n.jsx(yv,{visible:gr,drawingStrokes:Xe,onClose:()=>{mu(!1)},onFindTestPoint:oh,position:Gl,isDragging:Vs,onDragStart:c=>{Gl?(Gc({x:c.clientX-Gl.x,y:c.clientY-Gl.y}),Xu(!0),c.preventDefault()):(Xl({x:c.clientX-300,y:c.clientY-200}),Gc({x:300,y:200}),Xu(!0),c.preventDefault())},determineTestPointType:oo,powerBuses:bn}),n.jsx(Px,{visible:eo.visible,title:"New Project",message:"You have unsaved changes. Do you want to save your project before creating a new one?",onYes:Il,onNo:cp,onCancel:up,yesButtonRef:jr}),n.jsx(Px,{visible:cs.visible,title:"Open Project",message:"You have unsaved changes. Do you want to save your project before opening another one?",onYes:fd,onNo:mf,onCancel:Ol,yesButtonRef:Ai}),Ni.visible&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:c=>{c.target===c.currentTarget&&Bd()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:c=>c.stopPropagation(),children:[n.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),n.jsx("input",{ref:So,type:"text",value:Ni.projectName,onChange:c=>{us(x=>({...x,projectName:c.target.value}))},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),sp()):c.key==="Escape"&&(c.preventDefault(),Bd())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),Ni.projectName&&(()=>{const c=Ni.projectName.match(/[^a-zA-Z0-9_-]/g);if(c){const x=[...new Set(c)];return n.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",x.map(N=>`"${N}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[n.jsx("input",{type:"text",value:Ni.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Ni.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),n.jsx("button",{onClick:lo,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Ni.projectName&&Ni.locationPath&&n.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[n.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),n.jsx("div",{style:{color:"#4CAF50"},children:(()=>{if(!Ni.projectName||!Ni.locationPath)return"";const x=Ni.projectName.trim().replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",N=`${x}.json`;return Ni.locationPath===x?`${Ni.locationPath}/${N}`:`${Ni.locationPath}/${x}/${N}`})()})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[n.jsx("button",{onClick:Bd,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),n.jsx("button",{onClick:sp,disabled:!Ni.projectName.trim()||!Ni.locationHandle,style:{padding:"8px 16px",background:!Ni.projectName.trim()||!Ni.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Ni.projectName.trim()||!Ni.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Ni.projectName.trim()||!Ni.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Ni.projectName.trim()||!Ni.locationHandle?.6:1},children:"Create"})]})]})}),lr.visible&&n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:c=>{c.target===c.currentTarget&&Eo()},children:n.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:c=>c.stopPropagation(),children:[n.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),n.jsx("input",{ref:Jr,type:"text",value:lr.filename,onChange:c=>{wr(x=>({...x,filename:c.target.value}))},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),Gr()):c.key==="Escape"&&(c.preventDefault(),Eo())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),n.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[n.jsx("input",{type:"text",value:lr.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:lr.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),n.jsx("button",{onClick:lp,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),lr.filename&&lr.locationPath&&n.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[n.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),n.jsxs("div",{style:{color:"#4CAF50"},children:[lr.locationPath,"/",lr.filename.endsWith(".json")?lr.filename:`${lr.filename}.json`]})]}),n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[n.jsx("button",{onClick:Eo,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),n.jsx("button",{onClick:Gr,disabled:!lr.filename.trim()||!lr.locationHandle,style:{padding:"8px 16px",background:!lr.filename.trim()||!lr.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!lr.filename.trim()||!lr.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!lr.filename.trim()||!lr.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!lr.filename.trim()||!lr.locationHandle?.6:1},children:"Save"})]})]})}),n.jsx(zy,{visible:Yo.visible,title:Yo.title,message:Yo.message,onClose:()=>Go({visible:!1,title:"",message:""})}),n.jsx(mv,{visible:Td,dimensions:Jl,onSave:c=>{vu(c)},onClose:()=>Jc(!1)}),n.jsx(bv,{visible:Zs,onClose:()=>{let c=0,x=0;a?(c=a.x,x=a.y):l&&(c=l.x,x=l.y),rl(N=>({...N,0:{pcbReferenceX:c,pcbReferenceY:x,x:0,y:0,zoom:Ke,viewRotation:$t,viewFlipX:En,isBottomView:to,transparency:b,showTopImage:Rr,showBottomImage:sl,showViasLayer:mr,showTopTracesLayer:br,showBottomTracesLayer:Qr,showTopPadsLayer:Ra,showBottomPadsLayer:Zi,showTopTestPointsLayer:es,showBottomTestPointsLayer:gs,showTopComponents:Bi,showBottomComponents:Ma,showPowerLayer:jo,showGroundLayer:dr,showConnectionsLayer:fr}})),ma(!1)},topImage:a,bottomImage:l,selectedImageForTransform:Ot,setSelectedImageForTransform:ji,transformMode:Pi,setTransformMode:gi,updateImageTransform:Pu,resetImageTransform:zd,setCurrentTool:w,isGrayscale:K,setIsGrayscale:R,areImagesLocked:Di}),n.jsx(vv,{visible:Bs,onClose:()=>ds(!1),topImage:a,bottomImage:l,setTopImage:s,setBottomImage:d,componentsTop:Jt,componentsBottom:on,setComponentsTop:_i,setComponentsBottom:Xn,drawingStrokes:Xe,setDrawingStrokes:et,powerSymbols:g,groundSymbols:j,setPowerSymbols:Be,setGroundSymbols:ut,canvasRef:or,isBottomView:to,setIsBottomView:Pa,originalTopFlipX:no,setOriginalTopFlipX:Xo,originalBottomFlipX:Ki,setOriginalBottomFlipX:Ii,originalTopFlipY:Sr,setOriginalTopFlipY:ra,originalBottomFlipY:Js,setOriginalBottomFlipY:Os,cameraWorldCenter:Gn,setCameraWorldCenter:ai,viewScale:Ke,viewRotation:$t,setViewRotation:On,viewFlipX:En,setViewFlipX:Hi,contentBorder:5,setTransparency:y}),n.jsx(Pv,{visible:sh,selectedLayer:xi,selectedComponentType:_l,selectedComponentKey:cf,onLayerChange:c=>{Xa(c),Ao.current=c,Kt(c),ue(c==="top"?kt:ne),ie(c==="top"?Qt:xt),c==="top"?(sa(!0),Va(!0)):(pa(!0),ao(!0))},onComponentTypeChange:(c,x,N)=>{iu(c),Cd(x),Kf(N||null),ru.current=c},onClose:()=>{lf(!1),_r(!0),w("select")}}),n.jsx(Lv,{visible:za.visible,size:za.size,onSizeChange:c=>ss(x=>({...x,size:c})),onApply:rp,onCancel:()=>ss({visible:!1,size:6})}),n.jsx(Mv,{visible:Wl.visible,interval:Wl.interval,onIntervalChange:c=>ls({visible:!0,interval:c}),onApply:()=>Dd(Wl.interval,!1),onCancel:()=>ls({visible:!1,interval:5})}),n.jsx(Iv,{visible:Qa.visible,interval:Qa.interval,onIntervalChange:c=>na({...Qa,interval:c}),onEnable:()=>Dd(Qa.interval,!0),onSkip:ff}),n.jsx(Vv,{visible:bu,isPad:Br,onConfirm:c=>{uc({numPins:c.numPins,type:c.type,twoSidedOrientation:c.twoSidedOrientation,point1:{x:0,y:0},point2:{x:0,y:0}}),Hs(!0),w("select"),Ir(!1)},onClose:()=>{Ir(!1)}}),n.jsx("div",{style:{position:"fixed",bottom:8,right:8,zIndex:100},children:n.jsxs("button",{onClick:()=>{window.open("https://github.com/sponsors/pgiacalo","_blank","noopener,noreferrer")},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)",border:"1px solid rgba(27, 31, 36, 0.15)",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:500,color:"#24292f",boxShadow:"0 1px 0 rgba(27, 31, 36, 0.04)",transition:"background 0.2s"},onMouseEnter:c=>{c.currentTarget.style.background="linear-gradient(180deg, #f3f4f6 0%, #e5e6e9 100%)"},onMouseLeave:c=>{c.currentTarget.style.background="linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)"},title:"Donate to support this project",children:[n.jsx("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"#bf3989","aria-hidden":"true",children:n.jsx("path",{d:"M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.749.749 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5z"})}),"Donate"]})})]})}Om.createRoot(document.getElementById("root")).render(n.jsx(M.StrictMode,{children:n.jsx(lw,{})}));export{Pr as _,cw as c,Am as g};
