(function(){const M=document.createElement("link").relList;if(M&&M.supports&&M.supports("modulepreload"))return;for(const ae of document.querySelectorAll('link[rel="modulepreload"]'))x(ae);new MutationObserver(ae=>{for(const re of ae)if(re.type==="childList")for(const W of re.addedNodes)W.tagName==="LINK"&&W.rel==="modulepreload"&&x(W)}).observe(document,{childList:!0,subtree:!0});function le(ae){const re={};return ae.integrity&&(re.integrity=ae.integrity),ae.referrerPolicy&&(re.referrerPolicy=ae.referrerPolicy),ae.crossOrigin==="use-credentials"?re.credentials="include":ae.crossOrigin==="anonymous"?re.credentials="omit":re.credentials="same-origin",re}function x(ae){if(ae.ep)return;ae.ep=!0;const re=le(ae);fetch(ae.href,re)}})();function y0(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}var Zu={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp;function g0(){if(Hp)return pc;Hp=1;var O=Symbol.for("react.transitional.element"),M=Symbol.for("react.fragment");function le(x,ae,re){var W=null;if(re!==void 0&&(W=""+re),ae.key!==void 0&&(W=""+ae.key),"key"in ae){re={};for(var he in ae)he!=="key"&&(re[he]=ae[he])}else re=ae;return ae=re.ref,{$$typeof:O,type:x,key:W,ref:ae!==void 0?ae:null,props:re}}return pc.Fragment=M,pc.jsx=le,pc.jsxs=le,pc}var Lp;function m0(){return Lp||(Lp=1,Zu.exports=g0()),Zu.exports}var c=m0(),Qu={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function x0(){if(Yp)return Qe;Yp=1;var O=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),W=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),G=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),ue=Symbol.iterator;function rn(C){return C===null||typeof C!="object"?null:(C=ue&&C[ue]||C["@@iterator"],typeof C=="function"?C:null)}var pe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oe=Object.assign,xt={};function ke(C,$,ce){this.props=C,this.context=$,this.refs=xt,this.updater=ce||pe}ke.prototype.isReactComponent={},ke.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},ke.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function Mt(){}Mt.prototype=ke.prototype;function ye(C,$,ce){this.props=C,this.context=$,this.refs=xt,this.updater=ce||pe}var ut=ye.prototype=new Mt;ut.constructor=ye,Oe(ut,ke.prototype),ut.isPureReactComponent=!0;var nt=Array.isArray;function fe(){}var Te={H:null,A:null,T:null,S:null},kt=Object.prototype.hasOwnProperty;function se(C,$,ce){var me=ce.ref;return{$$typeof:O,type:C,key:$,ref:me!==void 0?me:null,props:ce}}function ze(C,$){return se(C.type,$,C.props)}function Ae(C){return typeof C=="object"&&C!==null&&C.$$typeof===O}function be(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ce){return $[ce]})}var tt=/\/+/g;function St(C,$){return typeof C=="object"&&C!==null&&C.key!=null?be(""+C.key):$.toString(36)}function Ft(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(fe,fe):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function X(C,$,ce,me,He){var $e=typeof C;($e==="undefined"||$e==="boolean")&&(C=null);var lt=!1;if(C===null)lt=!0;else switch($e){case"bigint":case"string":case"number":lt=!0;break;case"object":switch(C.$$typeof){case O:case M:lt=!0;break;case je:return lt=C._init,X(lt(C._payload),$,ce,me,He)}}if(lt)return He=He(C),lt=me===""?"."+St(C,0):me,nt(He)?(ce="",lt!=null&&(ce=lt.replace(tt,"$&/")+"/"),X(He,$,ce,"",function(da){return da})):He!=null&&(Ae(He)&&(He=ze(He,ce+(He.key==null||C&&C.key===He.key?"":(""+He.key).replace(tt,"$&/")+"/")+lt)),$.push(He)),1;lt=0;var wn=me===""?".":me+":";if(nt(C))for(var Qt=0;Qt<C.length;Qt++)me=C[Qt],$e=wn+St(me,Qt),lt+=X(me,$,ce,$e,He);else if(Qt=rn(C),typeof Qt=="function")for(C=Qt.call(C),Qt=0;!(me=C.next()).done;)me=me.value,$e=wn+St(me,Qt++),lt+=X(me,$,ce,$e,He);else if($e==="object"){if(typeof C.then=="function")return X(Ft(C),$,ce,me,He);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return lt}function ne(C,$,ce){if(C==null)return C;var me=[],He=0;return X(C,me,"","",function($e){return $.call(ce,$e,He++)}),me}function _e(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(ce){(C._status===0||C._status===-1)&&(C._status=1,C._result=ce)},function(ce){(C._status===0||C._status===-1)&&(C._status=2,C._result=ce)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var ft=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Et={map:ne,forEach:function(C,$,ce){ne(C,function(){$.apply(this,arguments)},ce)},count:function(C){var $=0;return ne(C,function(){$++}),$},toArray:function(C){return ne(C,function($){return $})||[]},only:function(C){if(!Ae(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Qe.Activity=z,Qe.Children=Et,Qe.Component=ke,Qe.Fragment=le,Qe.Profiler=ae,Qe.PureComponent=ye,Qe.StrictMode=x,Qe.Suspense=ee,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Te,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(C){return Te.H.useMemoCache(C)}},Qe.cache=function(C){return function(){return C.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(C,$,ce){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var me=Oe({},C.props),He=C.key;if($!=null)for($e in $.key!==void 0&&(He=""+$.key),$)!kt.call($,$e)||$e==="key"||$e==="__self"||$e==="__source"||$e==="ref"&&$.ref===void 0||(me[$e]=$[$e]);var $e=arguments.length-2;if($e===1)me.children=ce;else if(1<$e){for(var lt=Array($e),wn=0;wn<$e;wn++)lt[wn]=arguments[wn+2];me.children=lt}return se(C.type,He,me)},Qe.createContext=function(C){return C={$$typeof:W,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:re,_context:C},C},Qe.createElement=function(C,$,ce){var me,He={},$e=null;if($!=null)for(me in $.key!==void 0&&($e=""+$.key),$)kt.call($,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(He[me]=$[me]);var lt=arguments.length-2;if(lt===1)He.children=ce;else if(1<lt){for(var wn=Array(lt),Qt=0;Qt<lt;Qt++)wn[Qt]=arguments[Qt+2];He.children=wn}if(C&&C.defaultProps)for(me in lt=C.defaultProps,lt)He[me]===void 0&&(He[me]=lt[me]);return se(C,$e,He)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(C){return{$$typeof:he,render:C}},Qe.isValidElement=Ae,Qe.lazy=function(C){return{$$typeof:je,_payload:{_status:-1,_result:C},_init:_e}},Qe.memo=function(C,$){return{$$typeof:G,type:C,compare:$===void 0?null:$}},Qe.startTransition=function(C){var $=Te.T,ce={};Te.T=ce;try{var me=C(),He=Te.S;He!==null&&He(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(fe,ft)}catch($e){ft($e)}finally{$!==null&&ce.types!==null&&($.types=ce.types),Te.T=$}},Qe.unstable_useCacheRefresh=function(){return Te.H.useCacheRefresh()},Qe.use=function(C){return Te.H.use(C)},Qe.useActionState=function(C,$,ce){return Te.H.useActionState(C,$,ce)},Qe.useCallback=function(C,$){return Te.H.useCallback(C,$)},Qe.useContext=function(C){return Te.H.useContext(C)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(C,$){return Te.H.useDeferredValue(C,$)},Qe.useEffect=function(C,$){return Te.H.useEffect(C,$)},Qe.useEffectEvent=function(C){return Te.H.useEffectEvent(C)},Qe.useId=function(){return Te.H.useId()},Qe.useImperativeHandle=function(C,$,ce){return Te.H.useImperativeHandle(C,$,ce)},Qe.useInsertionEffect=function(C,$){return Te.H.useInsertionEffect(C,$)},Qe.useLayoutEffect=function(C,$){return Te.H.useLayoutEffect(C,$)},Qe.useMemo=function(C,$){return Te.H.useMemo(C,$)},Qe.useOptimistic=function(C,$){return Te.H.useOptimistic(C,$)},Qe.useReducer=function(C,$,ce){return Te.H.useReducer(C,$,ce)},Qe.useRef=function(C){return Te.H.useRef(C)},Qe.useState=function(C){return Te.H.useState(C)},Qe.useSyncExternalStore=function(C,$,ce){return Te.H.useSyncExternalStore(C,$,ce)},Qe.useTransition=function(){return Te.H.useTransition()},Qe.version="19.2.0",Qe}var Xp;function Ju(){return Xp||(Xp=1,Qu.exports=x0()),Qu.exports}var S=Ju();const et=y0(S);var Ku={exports:{}},hc={},$u={exports:{}},Fu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function b0(){return Vp||(Vp=1,(function(O){function M(X,ne){var _e=X.length;X.push(ne);e:for(;0<_e;){var ft=_e-1>>>1,Et=X[ft];if(0<ae(Et,ne))X[ft]=ne,X[_e]=Et,_e=ft;else break e}}function le(X){return X.length===0?null:X[0]}function x(X){if(X.length===0)return null;var ne=X[0],_e=X.pop();if(_e!==ne){X[0]=_e;e:for(var ft=0,Et=X.length,C=Et>>>1;ft<C;){var $=2*(ft+1)-1,ce=X[$],me=$+1,He=X[me];if(0>ae(ce,_e))me<Et&&0>ae(He,ce)?(X[ft]=He,X[me]=_e,ft=me):(X[ft]=ce,X[$]=_e,ft=$);else if(me<Et&&0>ae(He,_e))X[ft]=He,X[me]=_e,ft=me;else break e}}return ne}function ae(X,ne){var _e=X.sortIndex-ne.sortIndex;return _e!==0?_e:X.id-ne.id}if(O.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var re=performance;O.unstable_now=function(){return re.now()}}else{var W=Date,he=W.now();O.unstable_now=function(){return W.now()-he}}var ee=[],G=[],je=1,z=null,ue=3,rn=!1,pe=!1,Oe=!1,xt=!1,ke=typeof setTimeout=="function"?setTimeout:null,Mt=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;function ut(X){for(var ne=le(G);ne!==null;){if(ne.callback===null)x(G);else if(ne.startTime<=X)x(G),ne.sortIndex=ne.expirationTime,M(ee,ne);else break;ne=le(G)}}function nt(X){if(Oe=!1,ut(X),!pe)if(le(ee)!==null)pe=!0,fe||(fe=!0,be());else{var ne=le(G);ne!==null&&Ft(nt,ne.startTime-X)}}var fe=!1,Te=-1,kt=5,se=-1;function ze(){return xt?!0:!(O.unstable_now()-se<kt)}function Ae(){if(xt=!1,fe){var X=O.unstable_now();se=X;var ne=!0;try{e:{pe=!1,Oe&&(Oe=!1,Mt(Te),Te=-1),rn=!0;var _e=ue;try{t:{for(ut(X),z=le(ee);z!==null&&!(z.expirationTime>X&&ze());){var ft=z.callback;if(typeof ft=="function"){z.callback=null,ue=z.priorityLevel;var Et=ft(z.expirationTime<=X);if(X=O.unstable_now(),typeof Et=="function"){z.callback=Et,ut(X),ne=!0;break t}z===le(ee)&&x(ee),ut(X)}else x(ee);z=le(ee)}if(z!==null)ne=!0;else{var C=le(G);C!==null&&Ft(nt,C.startTime-X),ne=!1}}break e}finally{z=null,ue=_e,rn=!1}ne=void 0}}finally{ne?be():fe=!1}}}var be;if(typeof ye=="function")be=function(){ye(Ae)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,St=tt.port2;tt.port1.onmessage=Ae,be=function(){St.postMessage(null)}}else be=function(){ke(Ae,0)};function Ft(X,ne){Te=ke(function(){X(O.unstable_now())},ne)}O.unstable_IdlePriority=5,O.unstable_ImmediatePriority=1,O.unstable_LowPriority=4,O.unstable_NormalPriority=3,O.unstable_Profiling=null,O.unstable_UserBlockingPriority=2,O.unstable_cancelCallback=function(X){X.callback=null},O.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):kt=0<X?Math.floor(1e3/X):5},O.unstable_getCurrentPriorityLevel=function(){return ue},O.unstable_next=function(X){switch(ue){case 1:case 2:case 3:var ne=3;break;default:ne=ue}var _e=ue;ue=ne;try{return X()}finally{ue=_e}},O.unstable_requestPaint=function(){xt=!0},O.unstable_runWithPriority=function(X,ne){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=ue;ue=X;try{return ne()}finally{ue=_e}},O.unstable_scheduleCallback=function(X,ne,_e){var ft=O.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ft+_e:ft):_e=ft,X){case 1:var Et=-1;break;case 2:Et=250;break;case 5:Et=1073741823;break;case 4:Et=1e4;break;default:Et=5e3}return Et=_e+Et,X={id:je++,callback:ne,priorityLevel:X,startTime:_e,expirationTime:Et,sortIndex:-1},_e>ft?(X.sortIndex=_e,M(G,X),le(ee)===null&&X===le(G)&&(Oe?(Mt(Te),Te=-1):Oe=!0,Ft(nt,_e-ft))):(X.sortIndex=Et,M(ee,X),pe||rn||(pe=!0,fe||(fe=!0,be()))),X},O.unstable_shouldYield=ze,O.unstable_wrapCallback=function(X){var ne=ue;return function(){var _e=ue;ue=ne;try{return X.apply(this,arguments)}finally{ue=_e}}}})(Fu)),Fu}var Gp;function v0(){return Gp||(Gp=1,$u.exports=b0()),$u.exports}var Wu={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function S0(){if(qp)return Pn;qp=1;var O=Ju();function M(ee){var G="https://react.dev/errors/"+ee;if(1<arguments.length){G+="?args[]="+encodeURIComponent(arguments[1]);for(var je=2;je<arguments.length;je++)G+="&args[]="+encodeURIComponent(arguments[je])}return"Minified React error #"+ee+"; visit "+G+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function le(){}var x={d:{f:le,r:function(){throw Error(M(522))},D:le,C:le,L:le,m:le,X:le,S:le,M:le},p:0,findDOMNode:null},ae=Symbol.for("react.portal");function re(ee,G,je){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:z==null?null:""+z,children:ee,containerInfo:G,implementation:je}}var W=O.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function he(ee,G){if(ee==="font")return"";if(typeof G=="string")return G==="use-credentials"?G:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Pn.createPortal=function(ee,G){var je=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!G||G.nodeType!==1&&G.nodeType!==9&&G.nodeType!==11)throw Error(M(299));return re(ee,G,null,je)},Pn.flushSync=function(ee){var G=W.T,je=x.p;try{if(W.T=null,x.p=2,ee)return ee()}finally{W.T=G,x.p=je,x.d.f()}},Pn.preconnect=function(ee,G){typeof ee=="string"&&(G?(G=G.crossOrigin,G=typeof G=="string"?G==="use-credentials"?G:"":void 0):G=null,x.d.C(ee,G))},Pn.prefetchDNS=function(ee){typeof ee=="string"&&x.d.D(ee)},Pn.preinit=function(ee,G){if(typeof ee=="string"&&G&&typeof G.as=="string"){var je=G.as,z=he(je,G.crossOrigin),ue=typeof G.integrity=="string"?G.integrity:void 0,rn=typeof G.fetchPriority=="string"?G.fetchPriority:void 0;je==="style"?x.d.S(ee,typeof G.precedence=="string"?G.precedence:void 0,{crossOrigin:z,integrity:ue,fetchPriority:rn}):je==="script"&&x.d.X(ee,{crossOrigin:z,integrity:ue,fetchPriority:rn,nonce:typeof G.nonce=="string"?G.nonce:void 0})}},Pn.preinitModule=function(ee,G){if(typeof ee=="string")if(typeof G=="object"&&G!==null){if(G.as==null||G.as==="script"){var je=he(G.as,G.crossOrigin);x.d.M(ee,{crossOrigin:je,integrity:typeof G.integrity=="string"?G.integrity:void 0,nonce:typeof G.nonce=="string"?G.nonce:void 0})}}else G==null&&x.d.M(ee)},Pn.preload=function(ee,G){if(typeof ee=="string"&&typeof G=="object"&&G!==null&&typeof G.as=="string"){var je=G.as,z=he(je,G.crossOrigin);x.d.L(ee,je,{crossOrigin:z,integrity:typeof G.integrity=="string"?G.integrity:void 0,nonce:typeof G.nonce=="string"?G.nonce:void 0,type:typeof G.type=="string"?G.type:void 0,fetchPriority:typeof G.fetchPriority=="string"?G.fetchPriority:void 0,referrerPolicy:typeof G.referrerPolicy=="string"?G.referrerPolicy:void 0,imageSrcSet:typeof G.imageSrcSet=="string"?G.imageSrcSet:void 0,imageSizes:typeof G.imageSizes=="string"?G.imageSizes:void 0,media:typeof G.media=="string"?G.media:void 0})}},Pn.preloadModule=function(ee,G){if(typeof ee=="string")if(G){var je=he(G.as,G.crossOrigin);x.d.m(ee,{as:typeof G.as=="string"&&G.as!=="script"?G.as:void 0,crossOrigin:je,integrity:typeof G.integrity=="string"?G.integrity:void 0})}else x.d.m(ee)},Pn.requestFormReset=function(ee){x.d.r(ee)},Pn.unstable_batchedUpdates=function(ee,G){return ee(G)},Pn.useFormState=function(ee,G,je){return W.H.useFormState(ee,G,je)},Pn.useFormStatus=function(){return W.H.useHostTransitionStatus()},Pn.version="19.2.0",Pn}var Ip;function C0(){if(Ip)return Wu.exports;Ip=1;function O(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O)}catch(M){console.error(M)}}return O(),Wu.exports=S0(),Wu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function w0(){if(Zp)return hc;Zp=1;var O=v0(),M=Ju(),le=C0();function x(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ae(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function re(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function W(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function he(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ee(e){if(re(e)!==e)throw Error(x(188))}function G(e){var t=e.alternate;if(!t){if(t=re(e),t===null)throw Error(x(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return ee(o),e;if(i===l)return ee(o),t;i=i.sibling}throw Error(x(188))}if(n.return!==l.return)n=o,l=i;else{for(var r=!1,p=o.child;p;){if(p===n){r=!0,n=o,l=i;break}if(p===l){r=!0,l=o,n=i;break}p=p.sibling}if(!r){for(p=i.child;p;){if(p===n){r=!0,n=i,l=o;break}if(p===l){r=!0,l=i,n=o;break}p=p.sibling}if(!r)throw Error(x(189))}}if(n.alternate!==l)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?e:t}function je(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=je(e),t!==null)return t;e=e.sibling}return null}var z=Object.assign,ue=Symbol.for("react.element"),rn=Symbol.for("react.transitional.element"),pe=Symbol.for("react.portal"),Oe=Symbol.for("react.fragment"),xt=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),Mt=Symbol.for("react.consumer"),ye=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ze=Symbol.for("react.memo_cache_sentinel"),Ae=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=Ae&&e[Ae]||e["@@iterator"],typeof e=="function"?e:null)}var tt=Symbol.for("react.client.reference");function St(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===tt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oe:return"Fragment";case ke:return"Profiler";case xt:return"StrictMode";case nt:return"Suspense";case fe:return"SuspenseList";case se:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case pe:return"Portal";case ye:return e.displayName||"Context";case Mt:return(e._context.displayName||"Context")+".Consumer";case ut:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return t=e.displayName||null,t!==null?t:St(e.type)||"Memo";case kt:t=e._payload,e=e._init;try{return St(e(t))}catch{}}return null}var Ft=Array.isArray,X=M.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=le.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},ft=[],Et=-1;function C(e){return{current:e}}function $(e){0>Et||(e.current=ft[Et],ft[Et]=null,Et--)}function ce(e,t){Et++,ft[Et]=e.current,e.current=t}var me=C(null),He=C(null),$e=C(null),lt=C(null);function wn(e,t){switch(ce($e,t),ce(He,e),ce(me,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=sp(t),e=cp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(me),ce(me,e)}function Qt(){$(me),$(He),$($e)}function da(e){e.memoizedState!==null&&ce(lt,e);var t=me.current,n=cp(t,e.type);t!==n&&(ce(He,e),ce(me,n))}function Dt(e){He.current===e&&($(me),$(He)),lt.current===e&&($(lt),rc._currentValue=_e)}var kn,Ee;function Ct(e){if(kn===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);kn=t&&t[1]||"",Ee=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kn+e+Ee}var pa=!1;function po(e,t){if(!e||pa)return"";pa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(H){var _=H}Reflect.construct(e,[],F)}else{try{F.call()}catch(H){_=H}e.call(F.prototype)}}else{try{throw Error()}catch(H){_=H}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(H){if(H&&_&&typeof H.stack=="string")return[H.stack,_.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=l.DetermineComponentFrameRoot(),r=i[0],p=i[1];if(r&&p){var b=r.split(`
`),R=p.split(`
`);for(o=l=0;l<b.length&&!b[l].includes("DetermineComponentFrameRoot");)l++;for(;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;if(l===b.length||o===R.length)for(l=b.length-1,o=R.length-1;1<=l&&0<=o&&b[l]!==R[o];)o--;for(;1<=l&&0<=o;l--,o--)if(b[l]!==R[o]){if(l!==1||o!==1)do if(l--,o--,0>o||b[l]!==R[o]){var I=`
`+b[l].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=l&&0<=o);break}}}finally{pa=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ct(n):""}function Rt(e,t){switch(e.tag){case 26:case 27:case 5:return Ct(e.type);case 16:return Ct("Lazy");case 13:return e.child!==t&&t!==null?Ct("Suspense Fallback"):Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 15:return po(e.type,!1);case 11:return po(e.type.render,!1);case 1:return po(e.type,!0);case 31:return Ct("Activity");default:return""}}function Ln(e){try{var t="",n=null;do t+=Rt(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Yl=Object.prototype.hasOwnProperty,La=O.unstable_scheduleCallback,Ve=O.unstable_cancelCallback,zi=O.unstable_shouldYield,yc=O.unstable_requestPaint,Zn=O.unstable_now,Ei=O.unstable_getCurrentPriorityLevel,ji=O.unstable_ImmediatePriority,ol=O.unstable_UserBlockingPriority,ha=O.unstable_NormalPriority,Wo=O.unstable_LowPriority,Ai=O.unstable_IdlePriority,ea=O.log,gs=O.unstable_setDisableYieldValue,Ya=null,Dn=null;function Ie(e){if(typeof ea=="function"&&gs(e),Dn&&typeof Dn.setStrictMode=="function")try{Dn.setStrictMode(Ya,e)}catch{}}var Ut=Math.clz32?Math.clz32:mc,gc=Math.log,Tr=Math.LN2;function mc(e){return e>>>=0,e===0?32:31-(gc(e)/Tr|0)|0}var Po=256,Be=262144,Xl=4194304;function Ge(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jn(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,i=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var p=l&134217727;return p!==0?(l=p&~i,l!==0?o=Ge(l):(r&=p,r!==0?o=Ge(r):n||(n=p&~e,n!==0&&(o=Ge(n))))):(p=l&~i,p!==0?o=Ge(p):r!==0?o=Ge(r):n||(n=l&~e,n!==0&&(o=Ge(n)))),o===0?0:t!==0&&t!==o&&(t&i)===0&&(i=o&-o,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:o}function ge(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ho(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ms(){var e=Xl;return Xl<<=1,(Xl&62914560)===0&&(Xl=4194304),e}function ta(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jo(e,t,n,l,o,i){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var p=e.entanglements,b=e.expirationTimes,R=e.hiddenUpdates;for(n=r&~n;0<n;){var I=31-Ut(n),F=1<<I;p[I]=0,b[I]=-1;var _=R[I];if(_!==null)for(R[I]=null,I=0;I<_.length;I++){var H=_[I];H!==null&&(H.lane&=-536870913)}n&=~F}l!==0&&xs(e,l,0),i!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=i&~(r&~t))}function xs(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ut(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Mi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Ut(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function bs(e,t){var n=t&-t;return n=(n&42)!==0?1:ki(n),(n&(e.suspendedLanes|t))!==0?0:n}function ki(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function il(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ei(){var e=ne.p;return e!==0?e:(e=window.event,e===void 0?32:Dp(e.type))}function Tn(e,t){var n=ne.p;try{return ne.p=e,t()}finally{ne.p=n}}var Vl=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Vl,Yn="__reactProps$"+Vl,en="__reactContainer$"+Vl,ti="__reactEvents$"+Vl,Fe="__reactListeners$"+Vl,vs="__reactHandles$"+Vl,Rn="__reactResources$"+Vl,ya="__reactMarker$"+Vl;function Gt(e){delete e[Nt],delete e[Yn],delete e[ti],delete e[Fe],delete e[vs]}function ga(e){var t=e[Nt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[en]||n[Nt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yp(e);e!==null;){if(n=e[Nt])return n;e=yp(e)}return t}e=n,n=e.parentNode}return null}function Sl(e){if(e=e[Nt]||e[en]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Gl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(x(33))}function Xa(e){var t=e[Rn];return t||(t=e[Rn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function gn(e){e[ya]=!0}var zr=new Set,xc={};function ma(e,t){yo(e,t),yo(e+"Capture",t)}function yo(e,t){for(xc[e]=t,e=0;e<t.length;e++)zr.add(t[e])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vc={},Xn={};function ni(e){return Yl.call(Xn,e)?!0:Yl.call(vc,e)?!1:bc.test(e)?Xn[e]=!0:(vc[e]=!0,!1)}function Di(e,t,n){if(ni(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function go(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Xe(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function at(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zn(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,i=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(r){n=""+r,i.call(this,r)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qe(e){if(!e._valueTracker){var t=at(e)?"checked":"value";e._valueTracker=zn(e,t,""+e[t])}}function nn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=at(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function We(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var un=/[\n"\\]/g;function Le(e){return e.replace(un,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ln(e,t,n,l,o,i,r,p){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?En(e,r,At(t)):n!=null?En(e,r,At(n)):l!=null&&e.removeAttribute("value"),o==null&&i!=null&&(e.defaultChecked=!!i),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+At(p):e.removeAttribute("name")}function ve(e,t,n,l,o,i,r,p){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){qe(e);return}n=n!=null?""+At(n):"",t=t!=null?""+At(t):n,p||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=p?e.checked:!!l,e.defaultChecked=!!l,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),qe(e)}function En(e,t,n){t==="number"&&We(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+At(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function na(e,t,n){if(t!=null&&(t=""+At(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+At(n):""}function Cl(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(x(92));if(Ft(l)){if(1<l.length)throw Error(x(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=At(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),qe(e)}function xa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ri=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ss(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Ri.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function li(e,t,n){if(t!=null&&typeof t!="object")throw Error(x(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&Ss(e,o,l)}else for(var i in t)t.hasOwnProperty(i)&&Ss(e,i,t[i])}function Ni(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ai=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(e){return ai.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wl(){}var Oi=null;function _i(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Va=null,Ga=null;function Cs(e){var t=Sl(e);if(t&&(e=t.stateNode)){var n=e[Yn]||null;e:switch(e=t.stateNode,t.type){case"input":if(ln(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Le(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[Yn]||null;if(!o)throw Error(x(90));ln(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&nn(l)}break e;case"textarea":na(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&wt(e,!!n.multiple,t,!1)}}}var qa=!1;function xo(e,t,n){if(qa)return e(t,n);qa=!0;try{var l=e(t);return l}finally{if(qa=!1,(Va!==null||Ga!==null)&&(er(),Va&&(t=Va,e=Ga,Ga=Va=null,Cs(t),e)))for(t=0;t<e.length;t++)Cs(e[t])}}function bo(e,t){var n=e.stateNode;if(n===null)return null;var l=n[Yn]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(x(231,t,typeof n));return n}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if(Qn)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){vo=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{vo=!1}var tl=null,oi=null,va=null;function So(){if(va)return va;var e,t=oi,n=t.length,l,o="value"in tl?tl.value:tl.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var r=n-e;for(l=1;l<=r&&t[n-l]===o[i-l];l++);return va=o.slice(e,1<l?1-l:void 0)}function Sa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ia(){return!0}function la(){return!1}function Kn(e){function t(n,l,o,i,r){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=i,this.target=r,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(i):i[p]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ia:la,this.isPropagationStopped=la,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),t}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},De=Kn($n),Tl=z({},$n,{view:0,detail:0}),Ca=Kn(Tl),Co,Za,sl,Bi=z({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sl&&(sl&&e.type==="mousemove"?(Co=e.screenX-sl.screenX,Za=e.screenY-sl.screenY):Za=Co=0,sl=e),Co)},movementY:function(e){return"movementY"in e?e.movementY:Za}}),wo=Kn(Bi),ws=z({},Bi,{dataTransfer:0}),Ts=Kn(ws),zs=z({},Tl,{relatedTarget:0}),To=Kn(zs),Es=z({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),ii=Kn(Es),Sc=z({},$n,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qt=Kn(Sc),si=z({},$n,{data:0}),Cc=Kn(si),It={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ui={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cl(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ui[e])?!!t[e]:!1}function zl(){return cl}var Qa=z({},Tl,{key:function(e){if(e.key){var t=It[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ci[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(e){return e.type==="keypress"?Sa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ka=Kn(Qa),wa=z({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=Kn(wa),Ta=z({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),zo=Kn(Ta),Xt=z({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),ql=Kn(Xt),js=z({},Bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Eo=Kn(js),rl=z({},$n,{newState:0,oldState:0}),ri=Kn(rl),ui=[9,13,27,32],mn=Qn&&"CompositionEvent"in window,Fn=null;Qn&&"documentMode"in document&&(Fn=document.documentMode);var Er=Qn&&"TextEvent"in window&&!Fn,jo=Qn&&(!mn||Fn&&8<Fn&&11>=Fn),As=" ",Ms=!1;function Li(e,t){switch(e){case"keyup":return ui.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ks(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $a=!1;function wc(e,t){switch(e){case"compositionend":return ks(t);case"keypress":return t.which!==32?null:(Ms=!0,As);case"textInput":return e=t.data,e===As&&Ms?null:e;default:return null}}function Yi(e,t){if($a)return e==="compositionend"||!mn&&Li(e,t)?(e=So(),va=oi=tl=null,$a=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jo&&t.locale!=="ko"?null:t.data;default:return null}}var fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fi[e.type]:t==="textarea"}function Ao(e,t,n,l){Va?Ga?Ga.push(l):Ga=[l]:Va=l,t=sr(t,"onChange"),0<t.length&&(n=new De("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Nn=null,Mo=null;function Il(e){tp(e,0)}function pi(e){var t=Gl(e);if(nn(t))return e}function El(e,t){if(e==="change")return t}var Ds=!1;if(Qn){var za;if(Qn){var Xi="oninput"in document;if(!Xi){var Fa=document.createElement("div");Fa.setAttribute("oninput","return;"),Xi=typeof Fa.oninput=="function"}za=Xi}else za=!1;Ds=za&&(!document.documentMode||9<document.documentMode)}function Rs(){Nn&&(Nn.detachEvent("onpropertychange",aa),Mo=Nn=null)}function aa(e){if(e.propertyName==="value"&&pi(Mo)){var t=[];Ao(t,Mo,e,_i(e)),xo(Il,t)}}function Ns(e,t,n){e==="focusin"?(Rs(),Nn=t,Mo=n,Nn.attachEvent("onpropertychange",aa)):e==="focusout"&&Rs()}function Ea(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pi(Mo)}function Os(e,t){if(e==="click")return pi(t)}function Wa(e,t){if(e==="input"||e==="change")return pi(t)}function Tc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ye=typeof Object.is=="function"?Object.is:Tc;function Vn(e,t){if(Ye(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!Yl.call(t,o)||!Ye(e[o],t[o]))return!1}return!0}function bt(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ja(e,t){var n=bt(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bt(n)}}function zc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vi(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=We(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=We(e.document)}return t}function _s(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hi=Qn&&"documentMode"in document&&11>=document.documentMode,oa=null,ko=null,ul=null,Gi=!1;function dt(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gi||oa==null||oa!==We(l)||(l=oa,"selectionStart"in l&&_s(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ul&&Vn(ul,l)||(ul=l,l=sr(ko,"onSelect"),0<l.length&&(t=new De("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=oa)))}function On(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jl={animationend:On("Animation","AnimationEnd"),animationiteration:On("Animation","AnimationIteration"),animationstart:On("Animation","AnimationStart"),transitionrun:On("Transition","TransitionRun"),transitionstart:On("Transition","TransitionStart"),transitioncancel:On("Transition","TransitionCancel"),transitionend:On("Transition","TransitionEnd")},Aa={},Wt={};Qn&&(Wt=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function Zl(e){if(Aa[e])return Aa[e];if(!jl[e])return e;var t=jl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wt)return Aa[e]=t[n];return e}var qi=Zl("animationend"),Pa=Zl("animationiteration"),Bs=Zl("animationstart"),Al=Zl("transitionrun"),Ec=Zl("transitionstart"),jc=Zl("transitioncancel"),Do=Zl("transitionend"),Ac=new Map,Ro="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ro.push("scrollEnd");function xn(e,t){Ac.set(e,t),ma(t,[e])}var No=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},jn=[],_n=0,yi=0;function gi(){for(var e=_n,t=yi=_n=0;t<e;){var n=jn[t];jn[t++]=null;var l=jn[t];jn[t++]=null;var o=jn[t];jn[t++]=null;var i=jn[t];if(jn[t++]=null,l!==null&&o!==null){var r=l.pending;r===null?o.next=o:(o.next=r.next,r.next=o),l.pending=o}i!==0&&Mc(n,o,i)}}function Ja(e,t,n,l){jn[_n++]=e,jn[_n++]=t,jn[_n++]=n,jn[_n++]=l,yi|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ml(e,t,n,l){return Ja(e,t,n,l),mi(e)}function Ma(e,t){return Ja(e,null,null,t),mi(e)}function Mc(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,i=e.return;i!==null;)i.childLanes|=n,l=i.alternate,l!==null&&(l.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(o=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,o&&t!==null&&(o=31-Ut(n),e=i.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),i):null}function mi(e){if(50<nc)throw nc=0,gu=null,Error(x(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var kl={};function kc(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Se(e,t,n,l){return new kc(e,t,n,l)}function fn(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fl(e,t){var n=e.alternate;return n===null?(n=Se(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Us(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ia(e,t,n,l,o,i){var r=0;if(l=e,typeof e=="function")fn(e)&&(r=1);else if(typeof e=="string")r=l0(e,n,me.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case se:return e=Se(31,n,t,o),e.elementType=se,e.lanes=i,e;case Oe:return ka(n.children,o,i,t);case xt:r=8,o|=24;break;case ke:return e=Se(12,n,t,o|2),e.elementType=ke,e.lanes=i,e;case nt:return e=Se(13,n,t,o),e.elementType=nt,e.lanes=i,e;case fe:return e=Se(19,n,t,o),e.elementType=fe,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ye:r=10;break e;case Mt:r=9;break e;case ut:r=11;break e;case Te:r=14;break e;case kt:r=16,l=null;break e}r=29,n=Error(x(130,e===null?"null":typeof e,"")),l=null}return t=Se(r,n,t,o),t.elementType=e,t.type=l,t.lanes=i,t}function ka(e,t,n,l){return e=Se(7,e,l,t),e.lanes=n,e}function Ql(e,t,n){return e=Se(6,e,null,t),e.lanes=n,e}function Ii(e){var t=Se(18,null,null,0);return t.stateNode=e,t}function Zi(e,t,n){return t=Se(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Dc=new WeakMap;function dl(e,t){if(typeof e=="object"&&e!==null){var n=Dc.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ln(t)},Dc.set(e,t),t)}return{value:e,source:t,stack:Ln(t)}}var Oo=[],sa=0,xi=null,bi=0,nl=[],Bn=0,Da=null,Gn=1,Kl="";function Dl(e,t){Oo[sa++]=bi,Oo[sa++]=xi,xi=e,bi=t}function Qi(e,t,n){nl[Bn++]=Gn,nl[Bn++]=Kl,nl[Bn++]=Da,Da=e;var l=Gn;e=Kl;var o=32-Ut(l)-1;l&=~(1<<o),n+=1;var i=32-Ut(t)+o;if(30<i){var r=o-o%5;i=(l&(1<<r)-1).toString(32),l>>=r,o-=r,Gn=1<<32-Ut(t)+o|n<<o|l,Kl=i+e}else Gn=1<<i|n<<o|l,Kl=e}function Ki(e){e.return!==null&&(Dl(e,1),Qi(e,1,0))}function Hs(e){for(;e===xi;)xi=Oo[--sa],Oo[sa]=null,bi=Oo[--sa],Oo[sa]=null;for(;e===Da;)Da=nl[--Bn],nl[Bn]=null,Kl=nl[--Bn],nl[Bn]=null,Gn=nl[--Bn],nl[Bn]=null}function Ls(e,t){nl[Bn++]=Gn,nl[Bn++]=Kl,nl[Bn++]=Da,Gn=t.id,Kl=t.overflow,Da=e}var An=null,Ot=null,Pe=!1,Wn=null,pl=!1,$i=Error(x(519));function Rl(e){var t=Error(x(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _o(dl(t,e)),$i}function ca(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[Nt]=e,t[Yn]=l,n){case"dialog":rt("cancel",t),rt("close",t);break;case"iframe":case"object":case"embed":rt("load",t);break;case"video":case"audio":for(n=0;n<ac.length;n++)rt(ac[n],t);break;case"source":rt("error",t);break;case"img":case"image":case"link":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"input":rt("invalid",t),ve(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":rt("invalid",t);break;case"textarea":rt("invalid",t),Cl(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||op(t.textContent,n)?(l.popover!=null&&(rt("beforetoggle",t),rt("toggle",t)),l.onScroll!=null&&rt("scroll",t),l.onScrollEnd!=null&&rt("scrollend",t),l.onClick!=null&&(t.onclick=wl),t=!0):t=!1,t||Rl(e,!0)}function Ys(e){for(An=e.return;An;)switch(An.tag){case 5:case 31:case 13:pl=!1;return;case 27:case 3:pl=!0;return;default:An=An.return}}function Nl(e){if(e!==An)return!1;if(!Pe)return Ys(e),Pe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Du(e.type,e.memoizedProps)),n=!n),n&&Ot&&Rl(e),Ys(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(317));Ot=hp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(317));Ot=hp(e)}else t===27?(t=Ot,Io(e.type)?(e=Bu,Bu=null,Ot=e):Ot=t):Ot=An?Pl(e.stateNode.nextSibling):null;return!0}function ll(){Ot=An=null,Pe=!1}function Fi(){var e=Wn;return e!==null&&(xl===null?xl=e:xl.push.apply(xl,e),Wn=null),e}function _o(e){Wn===null?Wn=[e]:Wn.push(e)}var Un=C(null),hl=null,Ol=null;function $l(e,t,n){ce(Un,t._currentValue),t._currentValue=n}function ra(e){e._currentValue=Un.current,$(Un)}function eo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Xs(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var i=o.dependencies;if(i!==null){var r=o.child;i=i.firstContext;e:for(;i!==null;){var p=i;i=o;for(var b=0;b<t.length;b++)if(p.context===t[b]){i.lanes|=n,p=i.alternate,p!==null&&(p.lanes|=n),eo(i.return,n,e),l||(r=null);break e}i=p.next}}else if(o.tag===18){if(r=o.return,r===null)throw Error(x(341));r.lanes|=n,i=r.alternate,i!==null&&(i.lanes|=n),eo(r,n,e),r=null}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===e){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}}function Fl(e,t,n,l){e=null;for(var o=t,i=!1;o!==null;){if(!i){if((o.flags&524288)!==0)i=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var r=o.alternate;if(r===null)throw Error(x(387));if(r=r.memoizedProps,r!==null){var p=o.type;Ye(o.pendingProps.value,r.value)||(e!==null?e.push(p):e=[p])}}else if(o===lt.current){if(r=o.alternate,r===null)throw Error(x(387));r.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(rc):e=[rc])}o=o.return}e!==null&&Xs(t,e,n,l),t.flags|=262144}function Wi(e){for(e=e.firstContext;e!==null;){if(!Ye(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ra(e){hl=e,Ol=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function dn(e){return Rc(hl,e)}function Pi(e,t){return hl===null&&Ra(e),Rc(e,t)}function Rc(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ol===null){if(e===null)throw Error(x(308));Ol=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ol=Ol.next=t;return n}var Nc=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Vs=O.unstable_scheduleCallback,Gs=O.unstable_NormalPriority,an={$$typeof:ye,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ji(){return{controller:new Nc,data:new Map,refCount:0}}function Na(e){e.refCount--,e.refCount===0&&Vs(Gs,function(){e.controller.abort()})}var Wl=null,Bo=0,Oa=0,_a=null;function jr(e,t){if(Wl===null){var n=Wl=[];Bo=0,Oa=Cu(),_a={status:"pending",value:void 0,then:function(l){n.push(l)}}}return Bo++,t.then(oe,oe),t}function oe(){if(--Bo===0&&Wl!==null){_a!==null&&(_a.status="fulfilled");var e=Wl;Wl=null,Oa=0,_a=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function a(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var s=X.S;X.S=function(e,t){Md=Zn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&jr(e,t),s!==null&&s(e,t)};var u=C(null);function d(){var e=u.current;return e!==null?e:Vt.pooledCache}function g(e,t){t===null?ce(u,u.current):ce(u,t.pool)}function y(){var e=d();return e===null?null:{parent:an._currentValue,pool:e}}var f=Error(x(460)),h=Error(x(474)),v=Error(x(542)),m={then:function(){}};function k(e){return e=e.status,e==="fulfilled"||e==="rejected"}function B(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(wl,wl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,L(e),e;default:if(typeof t.status=="string")t.then(wl,wl);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(x(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,L(e),e}throw Y=t,f}}function te(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Y=n,f):n}}var Y=null;function V(){if(Y===null)throw Error(x(459));var e=Y;return Y=null,e}function L(e){if(e===f||e===v)throw Error(x(483))}var N=null,P=0;function J(e){var t=P;return P+=1,N===null&&(N=[]),B(N,e,t)}function A(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function j(e,t){throw t.$$typeof===ue?Error(x(525)):(e=Object.prototype.toString.call(t),Error(x(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Z(e){function t(E,w){if(e){var D=E.deletions;D===null?(E.deletions=[w],E.flags|=16):D.push(w)}}function n(E,w){if(!e)return null;for(;w!==null;)t(E,w),w=w.sibling;return null}function l(E){for(var w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function o(E,w){return E=fl(E,w),E.index=0,E.sibling=null,E}function i(E,w,D){return E.index=D,e?(D=E.alternate,D!==null?(D=D.index,D<w?(E.flags|=67108866,w):D):(E.flags|=67108866,w)):(E.flags|=1048576,w)}function r(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function p(E,w,D,K){return w===null||w.tag!==6?(w=Ql(D,E.mode,K),w.return=E,w):(w=o(w,D),w.return=E,w)}function b(E,w,D,K){var Ne=D.type;return Ne===Oe?I(E,w,D.props.children,K,D.key):w!==null&&(w.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===kt&&te(Ne)===w.type)?(w=o(w,D.props),A(w,D),w.return=E,w):(w=ia(D.type,D.key,D.props,null,E.mode,K),A(w,D),w.return=E,w)}function R(E,w,D,K){return w===null||w.tag!==4||w.stateNode.containerInfo!==D.containerInfo||w.stateNode.implementation!==D.implementation?(w=Zi(D,E.mode,K),w.return=E,w):(w=o(w,D.children||[]),w.return=E,w)}function I(E,w,D,K,Ne){return w===null||w.tag!==7?(w=ka(D,E.mode,K,Ne),w.return=E,w):(w=o(w,D),w.return=E,w)}function F(E,w,D){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Ql(""+w,E.mode,D),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case rn:return D=ia(w.type,w.key,w.props,null,E.mode,D),A(D,w),D.return=E,D;case pe:return w=Zi(w,E.mode,D),w.return=E,w;case kt:return w=te(w),F(E,w,D)}if(Ft(w)||be(w))return w=ka(w,E.mode,D,null),w.return=E,w;if(typeof w.then=="function")return F(E,J(w),D);if(w.$$typeof===ye)return F(E,Pi(E,w),D);j(E,w)}return null}function _(E,w,D,K){var Ne=w!==null?w.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return Ne!==null?null:p(E,w,""+D,K);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case rn:return D.key===Ne?b(E,w,D,K):null;case pe:return D.key===Ne?R(E,w,D,K):null;case kt:return D=te(D),_(E,w,D,K)}if(Ft(D)||be(D))return Ne!==null?null:I(E,w,D,K,null);if(typeof D.then=="function")return _(E,w,J(D),K);if(D.$$typeof===ye)return _(E,w,Pi(E,D),K);j(E,D)}return null}function H(E,w,D,K,Ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return E=E.get(D)||null,p(w,E,""+K,Ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case rn:return E=E.get(K.key===null?D:K.key)||null,b(w,E,K,Ne);case pe:return E=E.get(K.key===null?D:K.key)||null,R(w,E,K,Ne);case kt:return K=te(K),H(E,w,D,K,Ne)}if(Ft(K)||be(K))return E=E.get(D)||null,I(w,E,K,Ne,null);if(typeof K.then=="function")return H(E,w,D,J(K),Ne);if(K.$$typeof===ye)return H(E,w,D,Pi(w,K),Ne);j(w,K)}return null}function xe(E,w,D,K){for(var Ne=null,Tt=null,we=w,Je=w=0,yt=null;we!==null&&Je<D.length;Je++){we.index>Je?(yt=we,we=null):yt=we.sibling;var zt=_(E,we,D[Je],K);if(zt===null){we===null&&(we=yt);break}e&&we&&zt.alternate===null&&t(E,we),w=i(zt,w,Je),Tt===null?Ne=zt:Tt.sibling=zt,Tt=zt,we=yt}if(Je===D.length)return n(E,we),Pe&&Dl(E,Je),Ne;if(we===null){for(;Je<D.length;Je++)we=F(E,D[Je],K),we!==null&&(w=i(we,w,Je),Tt===null?Ne=we:Tt.sibling=we,Tt=we);return Pe&&Dl(E,Je),Ne}for(we=l(we);Je<D.length;Je++)yt=H(we,E,Je,D[Je],K),yt!==null&&(e&&yt.alternate!==null&&we.delete(yt.key===null?Je:yt.key),w=i(yt,w,Je),Tt===null?Ne=yt:Tt.sibling=yt,Tt=yt);return e&&we.forEach(function(Fo){return t(E,Fo)}),Pe&&Dl(E,Je),Ne}function Ue(E,w,D,K){if(D==null)throw Error(x(151));for(var Ne=null,Tt=null,we=w,Je=w=0,yt=null,zt=D.next();we!==null&&!zt.done;Je++,zt=D.next()){we.index>Je?(yt=we,we=null):yt=we.sibling;var Fo=_(E,we,zt.value,K);if(Fo===null){we===null&&(we=yt);break}e&&we&&Fo.alternate===null&&t(E,we),w=i(Fo,w,Je),Tt===null?Ne=Fo:Tt.sibling=Fo,Tt=Fo,we=yt}if(zt.done)return n(E,we),Pe&&Dl(E,Je),Ne;if(we===null){for(;!zt.done;Je++,zt=D.next())zt=F(E,zt.value,K),zt!==null&&(w=i(zt,w,Je),Tt===null?Ne=zt:Tt.sibling=zt,Tt=zt);return Pe&&Dl(E,Je),Ne}for(we=l(we);!zt.done;Je++,zt=D.next())zt=H(we,E,Je,zt.value,K),zt!==null&&(e&&zt.alternate!==null&&we.delete(zt.key===null?Je:zt.key),w=i(zt,w,Je),Tt===null?Ne=zt:Tt.sibling=zt,Tt=zt);return e&&we.forEach(function(h0){return t(E,h0)}),Pe&&Dl(E,Je),Ne}function Yt(E,w,D,K){if(typeof D=="object"&&D!==null&&D.type===Oe&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case rn:e:{for(var Ne=D.key;w!==null;){if(w.key===Ne){if(Ne=D.type,Ne===Oe){if(w.tag===7){n(E,w.sibling),K=o(w,D.props.children),K.return=E,E=K;break e}}else if(w.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===kt&&te(Ne)===w.type){n(E,w.sibling),K=o(w,D.props),A(K,D),K.return=E,E=K;break e}n(E,w);break}else t(E,w);w=w.sibling}D.type===Oe?(K=ka(D.props.children,E.mode,K,D.key),K.return=E,E=K):(K=ia(D.type,D.key,D.props,null,E.mode,K),A(K,D),K.return=E,E=K)}return r(E);case pe:e:{for(Ne=D.key;w!==null;){if(w.key===Ne)if(w.tag===4&&w.stateNode.containerInfo===D.containerInfo&&w.stateNode.implementation===D.implementation){n(E,w.sibling),K=o(w,D.children||[]),K.return=E,E=K;break e}else{n(E,w);break}else t(E,w);w=w.sibling}K=Zi(D,E.mode,K),K.return=E,E=K}return r(E);case kt:return D=te(D),Yt(E,w,D,K)}if(Ft(D))return xe(E,w,D,K);if(be(D)){if(Ne=be(D),typeof Ne!="function")throw Error(x(150));return D=Ne.call(D),Ue(E,w,D,K)}if(typeof D.then=="function")return Yt(E,w,J(D),K);if(D.$$typeof===ye)return Yt(E,w,Pi(E,D),K);j(E,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,w!==null&&w.tag===6?(n(E,w.sibling),K=o(w,D),K.return=E,E=K):(n(E,w),K=Ql(D,E.mode,K),K.return=E,E=K),r(E)):n(E,w)}return function(E,w,D,K){try{P=0;var Ne=Yt(E,w,D,K);return N=null,Ne}catch(we){if(we===f||we===v)throw we;var Tt=Se(29,we,null,E.mode);return Tt.lanes=K,Tt.return=E,Tt}finally{}}}var T=Z(!0),U=Z(!1),q=!1;function Q(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ie(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ce(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function de(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(jt&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=mi(e),Mc(e,null,n),t}return Ja(e,l,t,n),mi(e)}function Re(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Mi(e,n)}}function ot(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?o=i=r:i=i.next=r,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Zt=!1;function gt(){if(Zt){var e=_a;if(e!==null)throw e}}function Me(e,t,n,l){Zt=!1;var o=e.updateQueue;q=!1;var i=o.firstBaseUpdate,r=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var b=p,R=b.next;b.next=null,r===null?i=R:r.next=R,r=b;var I=e.alternate;I!==null&&(I=I.updateQueue,p=I.lastBaseUpdate,p!==r&&(p===null?I.firstBaseUpdate=R:p.next=R,I.lastBaseUpdate=b))}if(i!==null){var F=o.baseState;r=0,I=R=b=null,p=i;do{var _=p.lane&-536870913,H=_!==p.lane;if(H?(ht&_)===_:(l&_)===_){_!==0&&_===Oa&&(Zt=!0),I!==null&&(I=I.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var xe=e,Ue=p;_=t;var Yt=n;switch(Ue.tag){case 1:if(xe=Ue.payload,typeof xe=="function"){F=xe.call(Yt,F,_);break e}F=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ue.payload,_=typeof xe=="function"?xe.call(Yt,F,_):xe,_==null)break e;F=z({},F,_);break e;case 2:q=!0}}_=p.callback,_!==null&&(e.flags|=64,H&&(e.flags|=8192),H=o.callbacks,H===null?o.callbacks=[_]:H.push(_))}else H={lane:_,tag:p.tag,payload:p.payload,callback:p.callback,next:null},I===null?(R=I=H,b=F):I=I.next=H,r|=_;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;H=p,p=H.next,H.next=null,o.lastBaseUpdate=H,o.shared.pending=null}}while(!0);I===null&&(b=F),o.baseState=b,o.firstBaseUpdate=R,o.lastBaseUpdate=I,i===null&&(o.shared.lanes=0),Yo|=r,e.lanes=r,e.memoizedState=F}}function st(e,t){if(typeof e!="function")throw Error(x(191,e));e.call(t)}function vt(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)st(n[e],t)}var it=C(null),mt=C(0);function tn(e,t){e=ro,ce(mt,e),ce(it,t),ro=e|t.baseLanes}function Pt(){ce(mt,ro),ce(it,it.current)}function Ze(){ro=mt.current,$(it),$(mt)}var pt=C(null),on=null;function pn(e){var t=e.alternate;ce(hn,hn.current&1),ce(pt,e),on===null&&(t===null||it.current!==null||t.memoizedState!==null)&&(on=e)}function Ar(e){ce(hn,hn.current),ce(pt,e),on===null&&(on=e)}function nf(e){e.tag===22?(ce(hn,hn.current),ce(pt,e),on===null&&(on=e)):Uo()}function Uo(){ce(hn,hn.current),ce(pt,pt.current)}function _l(e){$(pt),on===e&&(on=null),$(hn)}var hn=C(0);function Oc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ou(n)||_u(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=0,Ke=null,Ht=null,bn=null,_c=!1,es=!1,vi=!1,Bc=0,qs=0,ts=null,ah=0;function sn(){throw Error(x(321))}function Mr(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ye(e[n],t[n]))return!1;return!0}function kr(e,t,n,l,o,i){return to=i,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,X.H=e===null||e.memoizedState===null?Yf:Ir,vi=!1,i=n(l,o),vi=!1,es&&(i=af(t,n,l,o)),lf(e),i}function lf(e){X.H=Qs;var t=Ht!==null&&Ht.next!==null;if(to=0,bn=Ht=Ke=null,_c=!1,qs=0,ts=null,t)throw Error(x(300));e===null||vn||(e=e.dependencies,e!==null&&Wi(e)&&(vn=!0))}function af(e,t,n,l){Ke=e;var o=0;do{if(es&&(ts=null),qs=0,es=!1,25<=o)throw Error(x(301));if(o+=1,bn=Ht=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}X.H=Xf,i=t(n,l)}while(es);return i}function oh(){var e=X.H,t=e.useState()[0];return t=typeof t.then=="function"?Is(t):t,e=e.useState()[0],(Ht!==null?Ht.memoizedState:null)!==e&&(Ke.flags|=1024),t}function Dr(){var e=Bc!==0;return Bc=0,e}function Rr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Nr(e){if(_c){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}_c=!1}to=0,bn=Ht=Ke=null,es=!1,qs=Bc=0,ts=null}function al(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Ke.memoizedState=bn=e:bn=bn.next=e,bn}function yn(){if(Ht===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=Ht.next;var t=bn===null?Ke.memoizedState:bn.next;if(t!==null)bn=t,Ht=e;else{if(e===null)throw Ke.alternate===null?Error(x(467)):Error(x(310));Ht=e,e={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},bn===null?Ke.memoizedState=bn=e:bn=bn.next=e}return bn}function Uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Is(e){var t=qs;return qs+=1,ts===null&&(ts=[]),e=B(ts,e,t),t=Ke,(bn===null?t.memoizedState:bn.next)===null&&(t=t.alternate,X.H=t===null||t.memoizedState===null?Yf:Ir),e}function Hc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Is(e);if(e.$$typeof===ye)return dn(e)}throw Error(x(438,String(e)))}function Or(e){var t=null,n=Ke.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=Ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Uc(),Ke.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=ze;return t.index++,n}function no(e,t){return typeof t=="function"?t(e):t}function Lc(e){var t=yn();return _r(t,Ht,e)}function _r(e,t,n){var l=e.queue;if(l===null)throw Error(x(311));l.lastRenderedReducer=n;var o=e.baseQueue,i=l.pending;if(i!==null){if(o!==null){var r=o.next;o.next=i.next,i.next=r}t.baseQueue=o=i,l.pending=null}if(i=e.baseState,o===null)e.memoizedState=i;else{t=o.next;var p=r=null,b=null,R=t,I=!1;do{var F=R.lane&-536870913;if(F!==R.lane?(ht&F)===F:(to&F)===F){var _=R.revertLane;if(_===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),F===Oa&&(I=!0);else if((to&_)===_){R=R.next,_===Oa&&(I=!0);continue}else F={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},b===null?(p=b=F,r=i):b=b.next=F,Ke.lanes|=_,Yo|=_;F=R.action,vi&&n(i,F),i=R.hasEagerState?R.eagerState:n(i,F)}else _={lane:F,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},b===null?(p=b=_,r=i):b=b.next=_,Ke.lanes|=F,Yo|=F;R=R.next}while(R!==null&&R!==t);if(b===null?r=i:b.next=p,!Ye(i,e.memoizedState)&&(vn=!0,I&&(n=_a,n!==null)))throw n;e.memoizedState=i,e.baseState=r,e.baseQueue=b,l.lastRenderedState=i}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Br(e){var t=yn(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do i=e(i,r.action),r=r.next;while(r!==o);Ye(i,t.memoizedState)||(vn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,l]}function of(e,t,n){var l=Ke,o=yn(),i=Pe;if(i){if(n===void 0)throw Error(x(407));n=n()}else n=t();var r=!Ye((Ht||o).memoizedState,n);if(r&&(o.memoizedState=n,vn=!0),o=o.queue,Lr(rf.bind(null,l,o,e),[e]),o.getSnapshot!==t||r||bn!==null&&bn.memoizedState.tag&1){if(l.flags|=2048,ns(9,{destroy:void 0},cf.bind(null,l,o,n,t),null),Vt===null)throw Error(x(349));i||(to&127)!==0||sf(l,t,n)}return n}function sf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t=Uc(),Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cf(e,t,n,l){t.value=n,t.getSnapshot=l,uf(t)&&ff(e)}function rf(e,t,n){return n(function(){uf(t)&&ff(e)})}function uf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ye(e,n)}catch{return!0}}function ff(e){var t=Ma(e,2);t!==null&&bl(t,e,2)}function Ur(e){var t=al();if(typeof e=="function"){var n=e;if(e=n(),vi){Ie(!0);try{n()}finally{Ie(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:e},t}function df(e,t,n,l){return e.baseState=n,_r(e,Ht,typeof l=="function"?l:no)}function ih(e,t,n,l,o){if(Vc(e))throw Error(x(485));if(e=t.action,e!==null){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){i.listeners.push(r)}};X.T!==null?n(!0):i.isTransition=!1,l(i),n=t.pending,n===null?(i.next=t.pending=i,pf(t,i)):(i.next=n.next,t.pending=n.next=i)}}function pf(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var i=X.T,r={};X.T=r;try{var p=n(o,l),b=X.S;b!==null&&b(r,p),hf(e,t,p)}catch(R){Hr(e,t,R)}finally{i!==null&&r.types!==null&&(i.types=r.types),X.T=i}}else try{i=n(o,l),hf(e,t,i)}catch(R){Hr(e,t,R)}}function hf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){yf(e,t,l)},function(l){return Hr(e,t,l)}):yf(e,t,n)}function yf(e,t,n){t.status="fulfilled",t.value=n,gf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,pf(e,n)))}function Hr(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,gf(t),t=t.next;while(t!==l)}e.action=null}function gf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function mf(e,t){return t}function xf(e,t){if(Pe){var n=Vt.formState;if(n!==null){e:{var l=Ke;if(Pe){if(Ot){t:{for(var o=Ot,i=pl;o.nodeType!==8;){if(!i){o=null;break t}if(o=Pl(o.nextSibling),o===null){o=null;break t}}i=o.data,o=i==="F!"||i==="F"?o:null}if(o){Ot=Pl(o.nextSibling),l=o.data==="F!";break e}}Rl(l)}l=!1}l&&(t=n[0])}}return n=al(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:t},n.queue=l,n=Uf.bind(null,Ke,l),l.dispatch=n,l=Ur(!1),i=qr.bind(null,Ke,!1,l.queue),l=al(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=ih.bind(null,Ke,o,i,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function bf(e){var t=yn();return vf(t,Ht,e)}function vf(e,t,n){if(t=_r(e,t,mf)[0],e=Lc(no)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Is(t)}catch(r){throw r===f?v:r}else l=t;t=yn();var o=t.queue,i=o.dispatch;return n!==t.memoizedState&&(Ke.flags|=2048,ns(9,{destroy:void 0},sh.bind(null,o,n),null)),[l,i,e]}function sh(e,t){e.action=t}function Sf(e){var t=yn(),n=Ht;if(n!==null)return vf(t,n,e);yn(),t=t.memoizedState,n=yn();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function ns(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=Ke.updateQueue,t===null&&(t=Uc(),Ke.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Cf(){return yn().memoizedState}function Yc(e,t,n,l){var o=al();Ke.flags|=e,o.memoizedState=ns(1|t,{destroy:void 0},n,l===void 0?null:l)}function Xc(e,t,n,l){var o=yn();l=l===void 0?null:l;var i=o.memoizedState.inst;Ht!==null&&l!==null&&Mr(l,Ht.memoizedState.deps)?o.memoizedState=ns(t,i,n,l):(Ke.flags|=e,o.memoizedState=ns(1|t,i,n,l))}function wf(e,t){Yc(8390656,8,e,t)}function Lr(e,t){Xc(2048,8,e,t)}function ch(e){Ke.flags|=4;var t=Ke.updateQueue;if(t===null)t=Uc(),Ke.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Tf(e){var t=yn().memoizedState;return ch({ref:t,nextImpl:e}),function(){if((jt&2)!==0)throw Error(x(440));return t.impl.apply(void 0,arguments)}}function zf(e,t){return Xc(4,2,e,t)}function Ef(e,t){return Xc(4,4,e,t)}function jf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Af(e,t,n){n=n!=null?n.concat([e]):null,Xc(4,4,jf.bind(null,t,e),n)}function Yr(){}function Mf(e,t){var n=yn();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Mr(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function kf(e,t){var n=yn();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Mr(t,l[1]))return l[0];if(l=e(),vi){Ie(!0);try{e()}finally{Ie(!1)}}return n.memoizedState=[l,t],l}function Xr(e,t,n){return n===void 0||(to&1073741824)!==0&&(ht&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Dd(),Ke.lanes|=e,Yo|=e,n)}function Df(e,t,n,l){return Ye(n,t)?n:it.current!==null?(e=Xr(e,n,l),Ye(e,t)||(vn=!0),e):(to&42)===0||(to&1073741824)!==0&&(ht&261930)===0?(vn=!0,e.memoizedState=n):(e=Dd(),Ke.lanes|=e,Yo|=e,t)}function Rf(e,t,n,l,o){var i=ne.p;ne.p=i!==0&&8>i?i:8;var r=X.T,p={};X.T=p,qr(e,!1,t,n);try{var b=o(),R=X.S;if(R!==null&&R(p,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var I=a(b,l);Zs(e,t,I,Hl(e))}else Zs(e,t,l,Hl(e))}catch(F){Zs(e,t,{then:function(){},status:"rejected",reason:F},Hl())}finally{ne.p=i,r!==null&&p.types!==null&&(r.types=p.types),X.T=r}}function rh(){}function Vr(e,t,n,l){if(e.tag!==5)throw Error(x(476));var o=Nf(e).queue;Rf(e,o,t,_e,n===null?rh:function(){return Of(e),n(l)})}function Nf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:_e},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Of(e){var t=Nf(e);t.next===null&&(t=e.alternate.memoizedState),Zs(e,t.next.queue,{},Hl())}function Gr(){return dn(rc)}function _f(){return yn().memoizedState}function Bf(){return yn().memoizedState}function uh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Hl();e=Ce(n);var l=de(t,e,n);l!==null&&(bl(l,t,n),Re(l,t,n)),t={cache:Ji()},e.payload=t;return}t=t.return}}function fh(e,t,n){var l=Hl();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Vc(e)?Hf(t,n):(n=Ml(e,t,n,l),n!==null&&(bl(n,e,l),Lf(n,t,l)))}function Uf(e,t,n){var l=Hl();Zs(e,t,n,l)}function Zs(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vc(e))Hf(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var r=t.lastRenderedState,p=i(r,n);if(o.hasEagerState=!0,o.eagerState=p,Ye(p,r))return Ja(e,t,o,0),Vt===null&&gi(),!1}catch{}finally{}if(n=Ml(e,t,o,l),n!==null)return bl(n,e,l),Lf(n,t,l),!0}return!1}function qr(e,t,n,l){if(l={lane:2,revertLane:Cu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Vc(e)){if(t)throw Error(x(479))}else t=Ml(e,n,l,2),t!==null&&bl(t,e,2)}function Vc(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function Hf(e,t){es=_c=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Lf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Mi(e,n)}}var Qs={readContext:dn,use:Hc,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};Qs.useEffectEvent=sn;var Yf={readContext:dn,use:Hc,useCallback:function(e,t){return al().memoizedState=[e,t===void 0?null:t],e},useContext:dn,useEffect:wf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Yc(4194308,4,jf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yc(4194308,4,e,t)},useInsertionEffect:function(e,t){Yc(4,2,e,t)},useMemo:function(e,t){var n=al();t=t===void 0?null:t;var l=e();if(vi){Ie(!0);try{e()}finally{Ie(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=al();if(n!==void 0){var o=n(t);if(vi){Ie(!0);try{n(t)}finally{Ie(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=fh.bind(null,Ke,e),[l.memoizedState,e]},useRef:function(e){var t=al();return e={current:e},t.memoizedState=e},useState:function(e){e=Ur(e);var t=e.queue,n=Uf.bind(null,Ke,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yr,useDeferredValue:function(e,t){var n=al();return Xr(n,e,t)},useTransition:function(){var e=Ur(!1);return e=Rf.bind(null,Ke,e.queue,!0,!1),al().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=Ke,o=al();if(Pe){if(n===void 0)throw Error(x(407));n=n()}else{if(n=t(),Vt===null)throw Error(x(349));(ht&127)!==0||sf(l,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,wf(rf.bind(null,l,i,e),[e]),l.flags|=2048,ns(9,{destroy:void 0},cf.bind(null,l,i,n,t),null),n},useId:function(){var e=al(),t=Vt.identifierPrefix;if(Pe){var n=Kl,l=Gn;n=(l&~(1<<32-Ut(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Bc++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=ah++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Gr,useFormState:xf,useActionState:xf,useOptimistic:function(e){var t=al();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=qr.bind(null,Ke,!0,n),n.dispatch=t,[e,t]},useMemoCache:Or,useCacheRefresh:function(){return al().memoizedState=uh.bind(null,Ke)},useEffectEvent:function(e){var t=al(),n={impl:e};return t.memoizedState=n,function(){if((jt&2)!==0)throw Error(x(440));return n.impl.apply(void 0,arguments)}}},Ir={readContext:dn,use:Hc,useCallback:Mf,useContext:dn,useEffect:Lr,useImperativeHandle:Af,useInsertionEffect:zf,useLayoutEffect:Ef,useMemo:kf,useReducer:Lc,useRef:Cf,useState:function(){return Lc(no)},useDebugValue:Yr,useDeferredValue:function(e,t){var n=yn();return Df(n,Ht.memoizedState,e,t)},useTransition:function(){var e=Lc(no)[0],t=yn().memoizedState;return[typeof e=="boolean"?e:Is(e),t]},useSyncExternalStore:of,useId:_f,useHostTransitionStatus:Gr,useFormState:bf,useActionState:bf,useOptimistic:function(e,t){var n=yn();return df(n,Ht,e,t)},useMemoCache:Or,useCacheRefresh:Bf};Ir.useEffectEvent=Tf;var Xf={readContext:dn,use:Hc,useCallback:Mf,useContext:dn,useEffect:Lr,useImperativeHandle:Af,useInsertionEffect:zf,useLayoutEffect:Ef,useMemo:kf,useReducer:Br,useRef:Cf,useState:function(){return Br(no)},useDebugValue:Yr,useDeferredValue:function(e,t){var n=yn();return Ht===null?Xr(n,e,t):Df(n,Ht.memoizedState,e,t)},useTransition:function(){var e=Br(no)[0],t=yn().memoizedState;return[typeof e=="boolean"?e:Is(e),t]},useSyncExternalStore:of,useId:_f,useHostTransitionStatus:Gr,useFormState:Sf,useActionState:Sf,useOptimistic:function(e,t){var n=yn();return Ht!==null?df(n,Ht,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Or,useCacheRefresh:Bf};Xf.useEffectEvent=Tf;function Zr(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:z({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qr={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Hl(),o=Ce(l);o.payload=t,n!=null&&(o.callback=n),t=de(e,o,l),t!==null&&(bl(t,e,l),Re(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Hl(),o=Ce(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=de(e,o,l),t!==null&&(bl(t,e,l),Re(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Hl(),l=Ce(n);l.tag=2,t!=null&&(l.callback=t),t=de(e,l,n),t!==null&&(bl(t,e,n),Re(t,e,n))}};function Vf(e,t,n,l,o,i,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,i,r):t.prototype&&t.prototype.isPureReactComponent?!Vn(n,l)||!Vn(o,i):!0}function Gf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Qr.enqueueReplaceState(t,t.state,null)}function Si(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=z({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function qf(e){No(e)}function If(e){console.error(e)}function Zf(e){No(e)}function Gc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Qf(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Kr(e,t,n){return n=Ce(n),n.tag=3,n.payload={element:null},n.callback=function(){Gc(e,t)},n}function Kf(e){return e=Ce(e),e.tag=3,e}function $f(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var i=l.value;e.payload=function(){return o(i)},e.callback=function(){Qf(t,n,l)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Qf(t,n,l),typeof o!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var p=l.stack;this.componentDidCatch(l.value,{componentStack:p!==null?p:""})})}function dh(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Fl(t,n,o,!0),n=pt.current,n!==null){switch(n.tag){case 31:case 13:return on===null?tr():n.alternate===null&&cn===0&&(cn=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===m?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),bu(e,l,o)),!1;case 22:return n.flags|=65536,l===m?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),bu(e,l,o)),!1}throw Error(x(435,n.tag))}return bu(e,l,o),tr(),!1}if(Pe)return t=pt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==$i&&(e=Error(x(422),{cause:l}),_o(dl(e,n)))):(l!==$i&&(t=Error(x(423),{cause:l}),_o(dl(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=dl(l,n),o=Kr(e.stateNode,l,o),ot(e,o),cn!==4&&(cn=2)),!1;var i=Error(x(520),{cause:l});if(i=dl(i,n),tc===null?tc=[i]:tc.push(i),cn!==4&&(cn=2),t===null)return!0;l=dl(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Kr(n.stateNode,l,e),ot(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Xo===null||!Xo.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Kf(o),$f(o,e,n,l),ot(n,o),!1}n=n.return}while(n!==null);return!1}var $r=Error(x(461)),vn=!1;function qn(e,t,n,l){t.child=e===null?U(t,null,n,l):T(t,e.child,n,l)}function Ff(e,t,n,l,o){n=n.render;var i=t.ref;if("ref"in l){var r={};for(var p in l)p!=="ref"&&(r[p]=l[p])}else r=l;return Ra(t),l=kr(e,t,n,r,i,o),p=Dr(),e!==null&&!vn?(Rr(e,t,o),lo(e,t,o)):(Pe&&p&&Ki(t),t.flags|=1,qn(e,t,l,o),t.child)}function Wf(e,t,n,l,o){if(e===null){var i=n.type;return typeof i=="function"&&!fn(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,Pf(e,t,i,l,o)):(e=ia(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!lu(e,o)){var r=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vn,n(r,l)&&e.ref===t.ref)return lo(e,t,o)}return t.flags|=1,e=fl(i,l),e.ref=t.ref,e.return=t,t.child=e}function Pf(e,t,n,l,o){if(e!==null){var i=e.memoizedProps;if(Vn(i,l)&&e.ref===t.ref)if(vn=!1,t.pendingProps=l=i,lu(e,o))(e.flags&131072)!==0&&(vn=!0);else return t.lanes=e.lanes,lo(e,t,o)}return Fr(e,t,n,l,o)}function Jf(e,t,n,l){var o=l.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(i=i!==null?i.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~i}else l=0,t.child=null;return ed(e,t,i,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&g(t,i!==null?i.cachePool:null),i!==null?tn(t,i):Pt(),nf(t);else return l=t.lanes=536870912,ed(e,t,i!==null?i.baseLanes|n:n,n,l)}else i!==null?(g(t,i.cachePool),tn(t,i),Uo(),t.memoizedState=null):(e!==null&&g(t,null),Pt(),Uo());return qn(e,t,o,n),t.child}function Ks(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ed(e,t,n,l,o){var i=d();return i=i===null?null:{parent:an._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&g(t,null),Pt(),nf(t),e!==null&&Fl(e,t,l,!0),t.childLanes=o,null}function qc(e,t){return t=Zc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function td(e,t,n){return T(t,e.child,null,n),e=qc(t,t.pendingProps),e.flags|=2,_l(t),t.memoizedState=null,e}function ph(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Pe){if(l.mode==="hidden")return e=qc(t,l),t.lanes=536870912,Ks(null,e);if(Ar(t),(e=Ot)?(e=pp(e,pl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Da!==null?{id:Gn,overflow:Kl}:null,retryLane:536870912,hydrationErrors:null},n=Ii(e),n.return=t,t.child=n,An=t,Ot=null)):e=null,e===null)throw Rl(t);return t.lanes=536870912,null}return qc(t,l)}var i=e.memoizedState;if(i!==null){var r=i.dehydrated;if(Ar(t),o)if(t.flags&256)t.flags&=-257,t=td(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(x(558));else if(vn||Fl(e,t,n,!1),o=(n&e.childLanes)!==0,vn||o){if(l=Vt,l!==null&&(r=bs(l,n),r!==0&&r!==i.retryLane))throw i.retryLane=r,Ma(e,r),bl(l,e,r),$r;tr(),t=td(e,t,n)}else e=i.treeContext,Ot=Pl(r.nextSibling),An=t,Pe=!0,Wn=null,pl=!1,e!==null&&Ls(t,e),t=qc(t,l),t.flags|=4096;return t}return e=fl(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ic(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(x(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Fr(e,t,n,l,o){return Ra(t),n=kr(e,t,n,l,void 0,o),l=Dr(),e!==null&&!vn?(Rr(e,t,o),lo(e,t,o)):(Pe&&l&&Ki(t),t.flags|=1,qn(e,t,n,o),t.child)}function nd(e,t,n,l,o,i){return Ra(t),t.updateQueue=null,n=af(t,l,n,o),lf(e),l=Dr(),e!==null&&!vn?(Rr(e,t,i),lo(e,t,i)):(Pe&&l&&Ki(t),t.flags|=1,qn(e,t,n,i),t.child)}function ld(e,t,n,l,o){if(Ra(t),t.stateNode===null){var i=kl,r=n.contextType;typeof r=="object"&&r!==null&&(i=dn(r)),i=new n(l,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Qr,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=l,i.state=t.memoizedState,i.refs={},Q(t),r=n.contextType,i.context=typeof r=="object"&&r!==null?dn(r):kl,i.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(Zr(t,n,r,l),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(r=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),r!==i.state&&Qr.enqueueReplaceState(i,i.state,null),Me(t,l,i,o),gt(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){i=t.stateNode;var p=t.memoizedProps,b=Si(n,p);i.props=b;var R=i.context,I=n.contextType;r=kl,typeof I=="object"&&I!==null&&(r=dn(I));var F=n.getDerivedStateFromProps;I=typeof F=="function"||typeof i.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,I||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(p||R!==r)&&Gf(t,i,l,r),q=!1;var _=t.memoizedState;i.state=_,Me(t,l,i,o),gt(),R=t.memoizedState,p||_!==R||q?(typeof F=="function"&&(Zr(t,n,F,l),R=t.memoizedState),(b=q||Vf(t,n,b,l,_,R,r))?(I||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=R),i.props=l,i.state=R,i.context=r,l=b):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,ie(e,t),r=t.memoizedProps,I=Si(n,r),i.props=I,F=t.pendingProps,_=i.context,R=n.contextType,b=kl,typeof R=="object"&&R!==null&&(b=dn(R)),p=n.getDerivedStateFromProps,(R=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r!==F||_!==b)&&Gf(t,i,l,b),q=!1,_=t.memoizedState,i.state=_,Me(t,l,i,o),gt();var H=t.memoizedState;r!==F||_!==H||q||e!==null&&e.dependencies!==null&&Wi(e.dependencies)?(typeof p=="function"&&(Zr(t,n,p,l),H=t.memoizedState),(I=q||Vf(t,n,I,l,_,H,b)||e!==null&&e.dependencies!==null&&Wi(e.dependencies))?(R||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,H,b),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,H,b)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=H),i.props=l,i.state=H,i.context=b,l=I):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),l=!1)}return i=l,Ic(e,t),l=(t.flags&128)!==0,i||l?(i=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&l?(t.child=T(t,e.child,null,o),t.child=T(t,null,n,o)):qn(e,t,n,o),t.memoizedState=i.state,e=t.child):e=lo(e,t,o),e}function ad(e,t,n,l){return ll(),t.flags|=256,qn(e,t,n,l),t.child}var Wr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pr(e){return{baseLanes:e,cachePool:y()}}function Jr(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ul),e}function od(e,t,n){var l=t.pendingProps,o=!1,i=(t.flags&128)!==0,r;if((r=i)||(r=e!==null&&e.memoizedState===null?!1:(hn.current&2)!==0),r&&(o=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(Pe){if(o?pn(t):Uo(),(e=Ot)?(e=pp(e,pl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Da!==null?{id:Gn,overflow:Kl}:null,retryLane:536870912,hydrationErrors:null},n=Ii(e),n.return=t,t.child=n,An=t,Ot=null)):e=null,e===null)throw Rl(t);return _u(e)?t.lanes=32:t.lanes=536870912,null}var p=l.children;return l=l.fallback,o?(Uo(),o=t.mode,p=Zc({mode:"hidden",children:p},o),l=ka(l,o,n,null),p.return=t,l.return=t,p.sibling=l,t.child=p,l=t.child,l.memoizedState=Pr(n),l.childLanes=Jr(e,r,n),t.memoizedState=Wr,Ks(null,l)):(pn(t),eu(t,p))}var b=e.memoizedState;if(b!==null&&(p=b.dehydrated,p!==null)){if(i)t.flags&256?(pn(t),t.flags&=-257,t=tu(e,t,n)):t.memoizedState!==null?(Uo(),t.child=e.child,t.flags|=128,t=null):(Uo(),p=l.fallback,o=t.mode,l=Zc({mode:"visible",children:l.children},o),p=ka(p,o,n,null),p.flags|=2,l.return=t,p.return=t,l.sibling=p,t.child=l,T(t,e.child,null,n),l=t.child,l.memoizedState=Pr(n),l.childLanes=Jr(e,r,n),t.memoizedState=Wr,t=Ks(null,l));else if(pn(t),_u(p)){if(r=p.nextSibling&&p.nextSibling.dataset,r)var R=r.dgst;r=R,l=Error(x(419)),l.stack="",l.digest=r,_o({value:l,source:null,stack:null}),t=tu(e,t,n)}else if(vn||Fl(e,t,n,!1),r=(n&e.childLanes)!==0,vn||r){if(r=Vt,r!==null&&(l=bs(r,n),l!==0&&l!==b.retryLane))throw b.retryLane=l,Ma(e,l),bl(r,e,l),$r;Ou(p)||tr(),t=tu(e,t,n)}else Ou(p)?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,Ot=Pl(p.nextSibling),An=t,Pe=!0,Wn=null,pl=!1,e!==null&&Ls(t,e),t=eu(t,l.children),t.flags|=4096);return t}return o?(Uo(),p=l.fallback,o=t.mode,b=e.child,R=b.sibling,l=fl(b,{mode:"hidden",children:l.children}),l.subtreeFlags=b.subtreeFlags&65011712,R!==null?p=fl(R,p):(p=ka(p,o,n,null),p.flags|=2),p.return=t,l.return=t,l.sibling=p,t.child=l,Ks(null,l),l=t.child,p=e.child.memoizedState,p===null?p=Pr(n):(o=p.cachePool,o!==null?(b=an._currentValue,o=o.parent!==b?{parent:b,pool:b}:o):o=y(),p={baseLanes:p.baseLanes|n,cachePool:o}),l.memoizedState=p,l.childLanes=Jr(e,r,n),t.memoizedState=Wr,Ks(e.child,l)):(pn(t),n=e.child,e=n.sibling,n=fl(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function eu(e,t){return t=Zc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Zc(e,t){return e=Se(22,e,null,t),e.lanes=0,e}function tu(e,t,n){return T(t,e.child,null,n),e=eu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function id(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),eo(e.return,t,n)}function nu(e,t,n,l,o,i){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=n,r.tailMode=o,r.treeForkCount=i)}function sd(e,t,n){var l=t.pendingProps,o=l.revealOrder,i=l.tail;l=l.children;var r=hn.current,p=(r&2)!==0;if(p?(r=r&1|2,t.flags|=128):r&=1,ce(hn,r),qn(e,t,l,n),l=Pe?bi:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&id(e,n,t);else if(e.tag===19)id(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Oc(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),nu(t,!1,o,n,i,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Oc(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}nu(t,!0,n,null,i,l);break;case"together":nu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function lo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yo|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Fl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(x(153));if(t.child!==null){for(e=t.child,n=fl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Wi(e)))}function hh(e,t,n){switch(t.tag){case 3:wn(t,t.stateNode.containerInfo),$l(t,an,e.memoizedState.cache),ll();break;case 27:case 5:da(t);break;case 4:wn(t,t.stateNode.containerInfo);break;case 10:$l(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Ar(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(pn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?od(e,t,n):(pn(t),e=lo(e,t,n),e!==null?e.sibling:null);pn(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Fl(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return sd(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ce(hn,hn.current),l)break;return null;case 22:return t.lanes=0,Jf(e,t,n,t.pendingProps);case 24:$l(t,an,e.memoizedState.cache)}return lo(e,t,n)}function cd(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)vn=!0;else{if(!lu(e,n)&&(t.flags&128)===0)return vn=!1,hh(e,t,n);vn=(e.flags&131072)!==0}else vn=!1,Pe&&(t.flags&1048576)!==0&&Qi(t,bi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=te(t.elementType),t.type=e,typeof e=="function")fn(e)?(l=Si(e,l),t.tag=1,t=ld(null,t,e,l,n)):(t.tag=0,t=Fr(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===ut){t.tag=11,t=Ff(null,t,e,l,n);break e}else if(o===Te){t.tag=14,t=Wf(null,t,e,l,n);break e}}throw t=St(e)||e,Error(x(306,t,""))}}return t;case 0:return Fr(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=Si(l,t.pendingProps),ld(e,t,l,o,n);case 3:e:{if(wn(t,t.stateNode.containerInfo),e===null)throw Error(x(387));l=t.pendingProps;var i=t.memoizedState;o=i.element,ie(e,t),Me(t,l,null,n);var r=t.memoizedState;if(l=r.cache,$l(t,an,l),l!==i.cache&&Xs(t,[an],n,!0),gt(),l=r.element,i.isDehydrated)if(i={element:l,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=ad(e,t,l,n);break e}else if(l!==o){o=dl(Error(x(424)),t),_o(o),t=ad(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ot=Pl(e.firstChild),An=t,Pe=!0,Wn=null,pl=!0,n=U(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ll(),l===o){t=lo(e,t,n);break e}qn(e,t,l,n)}t=t.child}return t;case 26:return Ic(e,t),e===null?(n=bp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Pe||(n=t.type,e=t.pendingProps,l=cr($e.current).createElement(n),l[Nt]=t,l[Yn]=e,In(l,n,e),gn(l),t.stateNode=l):t.memoizedState=bp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return da(t),e===null&&Pe&&(l=t.stateNode=gp(t.type,t.pendingProps,$e.current),An=t,pl=!0,o=Ot,Io(t.type)?(Bu=o,Ot=Pl(l.firstChild)):Ot=o),qn(e,t,t.pendingProps.children,n),Ic(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Pe&&((o=l=Ot)&&(l=qh(l,t.type,t.pendingProps,pl),l!==null?(t.stateNode=l,An=t,Ot=Pl(l.firstChild),pl=!1,o=!0):o=!1),o||Rl(t)),da(t),o=t.type,i=t.pendingProps,r=e!==null?e.memoizedProps:null,l=i.children,Du(o,i)?l=null:r!==null&&Du(o,r)&&(t.flags|=32),t.memoizedState!==null&&(o=kr(e,t,oh,null,null,n),rc._currentValue=o),Ic(e,t),qn(e,t,l,n),t.child;case 6:return e===null&&Pe&&((e=n=Ot)&&(n=Ih(n,t.pendingProps,pl),n!==null?(t.stateNode=n,An=t,Ot=null,e=!0):e=!1),e||Rl(t)),null;case 13:return od(e,t,n);case 4:return wn(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=T(t,null,l,n):qn(e,t,l,n),t.child;case 11:return Ff(e,t,t.type,t.pendingProps,n);case 7:return qn(e,t,t.pendingProps,n),t.child;case 8:return qn(e,t,t.pendingProps.children,n),t.child;case 12:return qn(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,$l(t,t.type,l.value),qn(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,Ra(t),o=dn(o),l=l(o),t.flags|=1,qn(e,t,l,n),t.child;case 14:return Wf(e,t,t.type,t.pendingProps,n);case 15:return Pf(e,t,t.type,t.pendingProps,n);case 19:return sd(e,t,n);case 31:return ph(e,t,n);case 22:return Jf(e,t,n,t.pendingProps);case 24:return Ra(t),l=dn(an),e===null?(o=d(),o===null&&(o=Vt,i=Ji(),o.pooledCache=i,i.refCount++,i!==null&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:l,cache:o},Q(t),$l(t,an,o)):((e.lanes&n)!==0&&(ie(e,t),Me(t,null,null,n),gt()),o=e.memoizedState,i=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),$l(t,an,l)):(l=i.cache,$l(t,an,l),l!==o.cache&&Xs(t,[an],n,!0))),qn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(x(156,t.tag))}function ao(e){e.flags|=4}function au(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(_d())e.flags|=8192;else throw Y=m,h}else e.flags&=-16777217}function rd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tp(t))if(_d())e.flags|=8192;else throw Y=m,h}function Qc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ms():536870912,e.lanes|=t,is|=t)}function $s(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function yh(e,t,n){var l=t.pendingProps;switch(Hs(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(t),null;case 1:return Kt(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ra(an),Qt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Nl(t)?ao(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Fi())),Kt(t),null;case 26:var o=t.type,i=t.memoizedState;return e===null?(ao(t),i!==null?(Kt(t),rd(t,i)):(Kt(t),au(t,o,null,l,n))):i?i!==e.memoizedState?(ao(t),Kt(t),rd(t,i)):(Kt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ao(t),Kt(t),au(t,o,e,l,n)),null;case 27:if(Dt(t),n=$e.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ao(t);else{if(!l){if(t.stateNode===null)throw Error(x(166));return Kt(t),null}e=me.current,Nl(t)?ca(t):(e=gp(o,l,n),t.stateNode=e,ao(t))}return Kt(t),null;case 5:if(Dt(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ao(t);else{if(!l){if(t.stateNode===null)throw Error(x(166));return Kt(t),null}if(i=me.current,Nl(t))ca(t);else{var r=cr($e.current);switch(i){case 1:i=r.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=r.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=r.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof l.is=="string"?r.createElement("select",{is:l.is}):r.createElement("select"),l.multiple?i.multiple=!0:l.size&&(i.size=l.size);break;default:i=typeof l.is=="string"?r.createElement(o,{is:l.is}):r.createElement(o)}}i[Nt]=t,i[Yn]=l;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)i.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=i;e:switch(In(i,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ao(t)}}return Kt(t),au(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ao(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(x(166));if(e=$e.current,Nl(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=An,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[Nt]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||op(e.nodeValue,n)),e||Rl(t,!0)}else e=cr(e).createTextNode(l),e[Nt]=t,t.stateNode=e}return Kt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Nl(t),n!==null){if(e===null){if(!l)throw Error(x(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(557));e[Nt]=t}else ll(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Kt(t),e=!1}else n=Fi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(_l(t),t):(_l(t),null);if((t.flags&128)!==0)throw Error(x(558))}return Kt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Nl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(x(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(x(317));o[Nt]=t}else ll(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Kt(t),o=!1}else o=Fi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(_l(t),t):(_l(t),null)}return _l(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Qc(t,t.updateQueue),Kt(t),null);case 4:return Qt(),e===null&&Eu(t.stateNode.containerInfo),Kt(t),null;case 10:return ra(t.type),Kt(t),null;case 19:if($(hn),l=t.memoizedState,l===null)return Kt(t),null;if(o=(t.flags&128)!==0,i=l.rendering,i===null)if(o)$s(l,!1);else{if(cn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Oc(e),i!==null){for(t.flags|=128,$s(l,!1),e=i.updateQueue,t.updateQueue=e,Qc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Us(n,e),n=n.sibling;return ce(hn,hn.current&1|2),Pe&&Dl(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Zn()>Pc&&(t.flags|=128,o=!0,$s(l,!1),t.lanes=4194304)}else{if(!o)if(e=Oc(i),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Qc(t,e),$s(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Pe)return Kt(t),null}else 2*Zn()-l.renderingStartTime>Pc&&n!==536870912&&(t.flags|=128,o=!0,$s(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(e=l.last,e!==null?e.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Zn(),e.sibling=null,n=hn.current,ce(hn,o?n&1|2:n&1),Pe&&Dl(t,l.treeForkCount),e):(Kt(t),null);case 22:case 23:return _l(t),Ze(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(Kt(t),t.subtreeFlags&6&&(t.flags|=8192)):Kt(t),n=t.updateQueue,n!==null&&Qc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&$(u),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ra(an),Kt(t),null;case 25:return null;case 30:return null}throw Error(x(156,t.tag))}function gh(e,t){switch(Hs(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ra(an),Qt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Dt(t),null;case 31:if(t.memoizedState!==null){if(_l(t),t.alternate===null)throw Error(x(340));ll()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(_l(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(x(340));ll()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $(hn),null;case 4:return Qt(),null;case 10:return ra(t.type),null;case 22:case 23:return _l(t),Ze(),e!==null&&$(u),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ra(an),null;case 25:return null;default:return null}}function ud(e,t){switch(Hs(t),t.tag){case 3:ra(an),Qt();break;case 26:case 27:case 5:Dt(t);break;case 4:Qt();break;case 31:t.memoizedState!==null&&_l(t);break;case 13:_l(t);break;case 19:$(hn);break;case 10:ra(t.type);break;case 22:case 23:_l(t),Ze(),e!==null&&$(u);break;case 24:ra(an)}}function Fs(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var i=n.create,r=n.inst;l=i(),r.destroy=l}n=n.next}while(n!==o)}}catch(p){Bt(t,t.return,p)}}function Ho(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var i=o.next;l=i;do{if((l.tag&e)===e){var r=l.inst,p=r.destroy;if(p!==void 0){r.destroy=void 0,o=t;var b=n,R=p;try{R()}catch(I){Bt(o,b,I)}}}l=l.next}while(l!==i)}}catch(I){Bt(t,t.return,I)}}function fd(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{vt(t,n)}catch(l){Bt(e,e.return,l)}}}function dd(e,t,n){n.props=Si(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Bt(e,t,l)}}function Ws(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){Bt(e,t,o)}}function Ba(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){Bt(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Bt(e,t,o)}else n.current=null}function pd(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){Bt(e,e.return,o)}}function ou(e,t,n){try{var l=e.stateNode;Hh(l,e.type,n,t),l[Yn]=t}catch(o){Bt(e,e.return,o)}}function hd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Io(e.type)||e.tag===4}function iu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Io(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function su(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wl));else if(l!==4&&(l===27&&Io(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(su(e,t,n),e=e.sibling;e!==null;)su(e,t,n),e=e.sibling}function Kc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&Io(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Kc(e,t,n),e=e.sibling;e!==null;)Kc(e,t,n),e=e.sibling}function yd(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);In(t,l,n),t[Nt]=e,t[Yn]=n}catch(i){Bt(e,e.return,i)}}var oo=!1,Sn=!1,cu=!1,gd=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function mh(e,t){if(e=e.containerInfo,Mu=yr,e=Vi(e),_s(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,i=l.focusNode;l=l.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var r=0,p=-1,b=-1,R=0,I=0,F=e,_=null;t:for(;;){for(var H;F!==n||o!==0&&F.nodeType!==3||(p=r+o),F!==i||l!==0&&F.nodeType!==3||(b=r+l),F.nodeType===3&&(r+=F.nodeValue.length),(H=F.firstChild)!==null;)_=F,F=H;for(;;){if(F===e)break t;if(_===n&&++R===o&&(p=r),_===i&&++I===l&&(b=r),(H=F.nextSibling)!==null)break;F=_,_=F.parentNode}F=H}n=p===-1||b===-1?null:{start:p,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(ku={focusedElem:e,selectionRange:n},yr=!1,Hn=t;Hn!==null;)if(t=Hn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Hn=e;else for(;Hn!==null;){switch(t=Hn,i=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,l=n.stateNode;try{var xe=Si(n.type,o);e=l.getSnapshotBeforeUpdate(xe,i),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ue){Bt(n,n.return,Ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Nu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(x(163))}if(e=t.sibling,e!==null){e.return=t.return,Hn=e;break}Hn=t.return}}function md(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:so(e,n),l&4&&Fs(5,n);break;case 1:if(so(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){Bt(n,n.return,r)}else{var o=Si(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Bt(n,n.return,r)}}l&64&&fd(n),l&512&&Ws(n,n.return);break;case 3:if(so(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{vt(e,t)}catch(r){Bt(n,n.return,r)}}break;case 27:t===null&&l&4&&yd(n);case 26:case 5:so(e,n),t===null&&l&4&&pd(n),l&512&&Ws(n,n.return);break;case 12:so(e,n);break;case 31:so(e,n),l&4&&vd(e,n);break;case 13:so(e,n),l&4&&Sd(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Eh.bind(null,n),Zh(e,n))));break;case 22:if(l=n.memoizedState!==null||oo,!l){t=t!==null&&t.memoizedState!==null||Sn,o=oo;var i=Sn;oo=l,(Sn=t)&&!i?co(e,n,(n.subtreeFlags&8772)!==0):so(e,n),oo=o,Sn=i}break;case 30:break;default:so(e,n)}}function xd(e){var t=e.alternate;t!==null&&(e.alternate=null,xd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Gt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Jt=null,yl=!1;function io(e,t,n){for(n=n.child;n!==null;)bd(e,t,n),n=n.sibling}function bd(e,t,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Ya,n)}catch{}switch(n.tag){case 26:Sn||Ba(n,t),io(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Sn||Ba(n,t);var l=Jt,o=yl;Io(n.type)&&(Jt=n.stateNode,yl=!1),io(e,t,n),ic(n.stateNode),Jt=l,yl=o;break;case 5:Sn||Ba(n,t);case 6:if(l=Jt,o=yl,Jt=null,io(e,t,n),Jt=l,yl=o,Jt!==null)if(yl)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(n.stateNode)}catch(i){Bt(n,t,i)}else try{Jt.removeChild(n.stateNode)}catch(i){Bt(n,t,i)}break;case 18:Jt!==null&&(yl?(e=Jt,fp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),hs(e)):fp(Jt,n.stateNode));break;case 4:l=Jt,o=yl,Jt=n.stateNode.containerInfo,yl=!0,io(e,t,n),Jt=l,yl=o;break;case 0:case 11:case 14:case 15:Ho(2,n,t),Sn||Ho(4,n,t),io(e,t,n);break;case 1:Sn||(Ba(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&dd(n,t,l)),io(e,t,n);break;case 21:io(e,t,n);break;case 22:Sn=(l=Sn)||n.memoizedState!==null,io(e,t,n),Sn=l;break;default:io(e,t,n)}}function vd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hs(e)}catch(n){Bt(t,t.return,n)}}}function Sd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hs(e)}catch(n){Bt(t,t.return,n)}}function xh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new gd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new gd),t;default:throw Error(x(435,e.tag))}}function $c(e,t){var n=xh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=jh.bind(null,e,l);l.then(o,o)}})}function gl(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],i=e,r=t,p=r;e:for(;p!==null;){switch(p.tag){case 27:if(Io(p.type)){Jt=p.stateNode,yl=!1;break e}break;case 5:Jt=p.stateNode,yl=!1;break e;case 3:case 4:Jt=p.stateNode.containerInfo,yl=!0;break e}p=p.return}if(Jt===null)throw Error(x(160));bd(i,r,o),Jt=null,yl=!1,i=o.alternate,i!==null&&(i.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Cd(t,e),t=t.sibling}var ua=null;function Cd(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gl(t,e),ml(e),l&4&&(Ho(3,e,e.return),Fs(3,e),Ho(5,e,e.return));break;case 1:gl(t,e),ml(e),l&512&&(Sn||n===null||Ba(n,n.return)),l&64&&oo&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=ua;if(gl(t,e),ml(e),l&512&&(Sn||n===null||Ba(n,n.return)),l&4){var i=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":i=o.getElementsByTagName("title")[0],(!i||i[ya]||i[Nt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=o.createElement(l),o.head.insertBefore(i,o.querySelector("head > title"))),In(i,l,n),i[Nt]=e,gn(i),l=i;break e;case"link":var r=Cp("link","href",o).get(l+(n.href||""));if(r){for(var p=0;p<r.length;p++)if(i=r[p],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(p,1);break t}}i=o.createElement(l),In(i,l,n),o.head.appendChild(i);break;case"meta":if(r=Cp("meta","content",o).get(l+(n.content||""))){for(p=0;p<r.length;p++)if(i=r[p],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(p,1);break t}}i=o.createElement(l),In(i,l,n),o.head.appendChild(i);break;default:throw Error(x(468,l))}i[Nt]=e,gn(i),l=i}e.stateNode=l}else wp(o,e.type,e.stateNode);else e.stateNode=Sp(o,l,e.memoizedProps);else i!==l?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,l===null?wp(o,e.type,e.stateNode):Sp(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ou(e,e.memoizedProps,n.memoizedProps)}break;case 27:gl(t,e),ml(e),l&512&&(Sn||n===null||Ba(n,n.return)),n!==null&&l&4&&ou(e,e.memoizedProps,n.memoizedProps);break;case 5:if(gl(t,e),ml(e),l&512&&(Sn||n===null||Ba(n,n.return)),e.flags&32){o=e.stateNode;try{xa(o,"")}catch(xe){Bt(e,e.return,xe)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,ou(e,o,n!==null?n.memoizedProps:o)),l&1024&&(cu=!0);break;case 6:if(gl(t,e),ml(e),l&4){if(e.stateNode===null)throw Error(x(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(xe){Bt(e,e.return,xe)}}break;case 3:if(fr=null,o=ua,ua=rr(t.containerInfo),gl(t,e),ua=o,ml(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{hs(t.containerInfo)}catch(xe){Bt(e,e.return,xe)}cu&&(cu=!1,wd(e));break;case 4:l=ua,ua=rr(e.stateNode.containerInfo),gl(t,e),ml(e),ua=l;break;case 12:gl(t,e),ml(e);break;case 31:gl(t,e),ml(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,$c(e,l)));break;case 13:gl(t,e),ml(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Wc=Zn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,$c(e,l)));break;case 22:o=e.memoizedState!==null;var b=n!==null&&n.memoizedState!==null,R=oo,I=Sn;if(oo=R||o,Sn=I||b,gl(t,e),Sn=I,oo=R,ml(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||b||oo||Sn||Ci(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){b=n=t;try{if(i=b.stateNode,o)r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{p=b.stateNode;var F=b.memoizedProps.style,_=F!=null&&F.hasOwnProperty("display")?F.display:null;p.style.display=_==null||typeof _=="boolean"?"":(""+_).trim()}}catch(xe){Bt(b,b.return,xe)}}}else if(t.tag===6){if(n===null){b=t;try{b.stateNode.nodeValue=o?"":b.memoizedProps}catch(xe){Bt(b,b.return,xe)}}}else if(t.tag===18){if(n===null){b=t;try{var H=b.stateNode;o?dp(H,!0):dp(b.stateNode,!1)}catch(xe){Bt(b,b.return,xe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,$c(e,n))));break;case 19:gl(t,e),ml(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,$c(e,l)));break;case 30:break;case 21:break;default:gl(t,e),ml(e)}}function ml(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(hd(l)){n=l;break}l=l.return}if(n==null)throw Error(x(160));switch(n.tag){case 27:var o=n.stateNode,i=iu(e);Kc(e,i,o);break;case 5:var r=n.stateNode;n.flags&32&&(xa(r,""),n.flags&=-33);var p=iu(e);Kc(e,p,r);break;case 3:case 4:var b=n.stateNode.containerInfo,R=iu(e);su(e,R,b);break;default:throw Error(x(161))}}catch(I){Bt(e,e.return,I)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;wd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function so(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)md(e,t.alternate,t),t=t.sibling}function Ci(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ho(4,t,t.return),Ci(t);break;case 1:Ba(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&dd(t,t.return,n),Ci(t);break;case 27:ic(t.stateNode);case 26:case 5:Ba(t,t.return),Ci(t);break;case 22:t.memoizedState===null&&Ci(t);break;case 30:Ci(t);break;default:Ci(t)}e=e.sibling}}function co(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,i=t,r=i.flags;switch(i.tag){case 0:case 11:case 15:co(o,i,n),Fs(4,i);break;case 1:if(co(o,i,n),l=i,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(R){Bt(l,l.return,R)}if(l=i,o=l.updateQueue,o!==null){var p=l.stateNode;try{var b=o.shared.hiddenCallbacks;if(b!==null)for(o.shared.hiddenCallbacks=null,o=0;o<b.length;o++)st(b[o],p)}catch(R){Bt(l,l.return,R)}}n&&r&64&&fd(i),Ws(i,i.return);break;case 27:yd(i);case 26:case 5:co(o,i,n),n&&l===null&&r&4&&pd(i),Ws(i,i.return);break;case 12:co(o,i,n);break;case 31:co(o,i,n),n&&r&4&&vd(o,i);break;case 13:co(o,i,n),n&&r&4&&Sd(o,i);break;case 22:i.memoizedState===null&&co(o,i,n),Ws(i,i.return);break;case 30:break;default:co(o,i,n)}t=t.sibling}}function ru(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Na(n))}function uu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Na(e))}function fa(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Td(e,t,n,l),t=t.sibling}function Td(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:fa(e,t,n,l),o&2048&&Fs(9,t);break;case 1:fa(e,t,n,l);break;case 3:fa(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Na(e)));break;case 12:if(o&2048){fa(e,t,n,l),e=t.stateNode;try{var i=t.memoizedProps,r=i.id,p=i.onPostCommit;typeof p=="function"&&p(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Bt(t,t.return,b)}}else fa(e,t,n,l);break;case 31:fa(e,t,n,l);break;case 13:fa(e,t,n,l);break;case 23:break;case 22:i=t.stateNode,r=t.alternate,t.memoizedState!==null?i._visibility&2?fa(e,t,n,l):Ps(e,t):i._visibility&2?fa(e,t,n,l):(i._visibility|=2,ls(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&ru(r,t);break;case 24:fa(e,t,n,l),o&2048&&uu(t.alternate,t);break;default:fa(e,t,n,l)}}function ls(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,r=t,p=n,b=l,R=r.flags;switch(r.tag){case 0:case 11:case 15:ls(i,r,p,b,o),Fs(8,r);break;case 23:break;case 22:var I=r.stateNode;r.memoizedState!==null?I._visibility&2?ls(i,r,p,b,o):Ps(i,r):(I._visibility|=2,ls(i,r,p,b,o)),o&&R&2048&&ru(r.alternate,r);break;case 24:ls(i,r,p,b,o),o&&R&2048&&uu(r.alternate,r);break;default:ls(i,r,p,b,o)}t=t.sibling}}function Ps(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:Ps(n,l),o&2048&&ru(l.alternate,l);break;case 24:Ps(n,l),o&2048&&uu(l.alternate,l);break;default:Ps(n,l)}t=t.sibling}}var Js=8192;function as(e,t,n){if(e.subtreeFlags&Js)for(e=e.child;e!==null;)zd(e,t,n),e=e.sibling}function zd(e,t,n){switch(e.tag){case 26:as(e,t,n),e.flags&Js&&e.memoizedState!==null&&a0(n,ua,e.memoizedState,e.memoizedProps);break;case 5:as(e,t,n);break;case 3:case 4:var l=ua;ua=rr(e.stateNode.containerInfo),as(e,t,n),ua=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Js,Js=16777216,as(e,t,n),Js=l):as(e,t,n));break;default:as(e,t,n)}}function Ed(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ec(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Hn=l,Ad(l,e)}Ed(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jd(e),e=e.sibling}function jd(e){switch(e.tag){case 0:case 11:case 15:ec(e),e.flags&2048&&Ho(9,e,e.return);break;case 3:ec(e);break;case 12:ec(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fc(e)):ec(e);break;default:ec(e)}}function Fc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Hn=l,Ad(l,e)}Ed(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ho(8,t,t.return),Fc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Fc(t));break;default:Fc(t)}e=e.sibling}}function Ad(e,t){for(;Hn!==null;){var n=Hn;switch(n.tag){case 0:case 11:case 15:Ho(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Na(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,Hn=l;else e:for(n=e;Hn!==null;){l=Hn;var o=l.sibling,i=l.return;if(xd(l),l===n){Hn=null;break e}if(o!==null){o.return=i,Hn=o;break e}Hn=i}}}var bh={getCacheForType:function(e){var t=dn(an),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return dn(an).controller.signal}},vh=typeof WeakMap=="function"?WeakMap:Map,jt=0,Vt=null,ct=null,ht=0,_t=0,Bl=null,Lo=!1,os=!1,fu=!1,ro=0,cn=0,Yo=0,wi=0,du=0,Ul=0,is=0,tc=null,xl=null,pu=!1,Wc=0,Md=0,Pc=1/0,Jc=null,Xo=null,Mn=0,Vo=null,ss=null,uo=0,hu=0,yu=null,kd=null,nc=0,gu=null;function Hl(){return(jt&2)!==0&&ht!==0?ht&-ht:X.T!==null?Cu():ei()}function Dd(){if(Ul===0)if((ht&536870912)===0||Pe){var e=Be;Be<<=1,(Be&3932160)===0&&(Be=262144),Ul=e}else Ul=536870912;return e=pt.current,e!==null&&(e.flags|=32),Ul}function bl(e,t,n){(e===Vt&&(_t===2||_t===9)||e.cancelPendingCommit!==null)&&(cs(e,0),Go(e,ht,Ul,!1)),vl(e,n),((jt&2)===0||e!==Vt)&&(e===Vt&&((jt&2)===0&&(wi|=n),cn===4&&Go(e,ht,Ul,!1)),Ua(e))}function Rd(e,t,n){if((jt&6)!==0)throw Error(x(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ge(e,t),o=l?wh(e,t):xu(e,t,!0),i=l;do{if(o===0){os&&!l&&Go(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!Sh(n)){o=xu(e,t,!1),i=!1;continue}if(o===2){if(i=t,e.errorRecoveryDisabledLanes&i)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var p=e;o=tc;var b=p.current.memoizedState.isDehydrated;if(b&&(cs(p,r).flags|=256),r=xu(p,r,!1),r!==2){if(fu&&!b){p.errorRecoveryDisabledLanes|=i,wi|=i,o=4;break e}i=xl,xl=o,i!==null&&(xl===null?xl=i:xl.push.apply(xl,i))}o=r}if(i=!1,o!==2)continue}}if(o===1){cs(e,0),Go(e,t,0,!0);break}e:{switch(l=e,i=o,i){case 0:case 1:throw Error(x(345));case 4:if((t&4194048)!==t)break;case 6:Go(l,t,Ul,!Lo);break e;case 2:xl=null;break;case 3:case 5:break;default:throw Error(x(329))}if((t&62914560)===t&&(o=Wc+300-Zn(),10<o)){if(Go(l,t,Ul,!Lo),Jn(l,0,!0)!==0)break e;uo=t,l.timeoutHandle=rp(Nd.bind(null,l,n,xl,Jc,pu,t,Ul,wi,is,Lo,i,"Throttled",-0,0),o);break e}Nd(l,n,xl,Jc,pu,t,Ul,wi,is,Lo,i,null,-0,0)}}break}while(!0);Ua(e)}function Nd(e,t,n,l,o,i,r,p,b,R,I,F,_,H){if(e.timeoutHandle=-1,F=t.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wl},zd(t,i,F);var xe=(i&62914560)===i?Wc-Zn():(i&4194048)===i?Md-Zn():0;if(xe=o0(F,xe),xe!==null){uo=i,e.cancelPendingCommit=xe(Xd.bind(null,e,t,i,n,l,o,r,p,b,I,F,null,_,H)),Go(e,i,r,!R);return}}Xd(e,t,i,n,l,o,r,p,b)}function Sh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],i=o.getSnapshot;o=o.value;try{if(!Ye(i(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Go(e,t,n,l){t&=~du,t&=~wi,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var i=31-Ut(o),r=1<<i;l[i]=-1,o&=~r}n!==0&&xs(e,n,t)}function er(){return(jt&6)===0?(lc(0),!1):!0}function mu(){if(ct!==null){if(_t===0)var e=ct.return;else e=ct,Ol=hl=null,Nr(e),N=null,P=0,e=ct;for(;e!==null;)ud(e.alternate,e),e=e.return;ct=null}}function cs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Xh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),uo=0,mu(),Vt=e,ct=n=fl(e.current,null),ht=t,_t=0,Bl=null,Lo=!1,os=ge(e,t),fu=!1,is=Ul=du=wi=Yo=cn=0,xl=tc=null,pu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-Ut(l),i=1<<o;t|=e[o],l&=~i}return ro=t,gi(),n}function Od(e,t){Ke=null,X.H=Qs,t===f||t===v?(t=V(),_t=3):t===h?(t=V(),_t=4):_t=t===$r?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Bl=t,ct===null&&(cn=1,Gc(e,dl(t,e.current)))}function _d(){var e=pt.current;return e===null?!0:(ht&4194048)===ht?on===null:(ht&62914560)===ht||(ht&536870912)!==0?e===on:!1}function Bd(){var e=X.H;return X.H=Qs,e===null?Qs:e}function Ud(){var e=X.A;return X.A=bh,e}function tr(){cn=4,Lo||(ht&4194048)!==ht&&pt.current!==null||(os=!0),(Yo&134217727)===0&&(wi&134217727)===0||Vt===null||Go(Vt,ht,Ul,!1)}function xu(e,t,n){var l=jt;jt|=2;var o=Bd(),i=Ud();(Vt!==e||ht!==t)&&(Jc=null,cs(e,t)),t=!1;var r=cn;e:do try{if(_t!==0&&ct!==null){var p=ct,b=Bl;switch(_t){case 8:mu(),r=6;break e;case 3:case 2:case 9:case 6:pt.current===null&&(t=!0);var R=_t;if(_t=0,Bl=null,rs(e,p,b,R),n&&os){r=0;break e}break;default:R=_t,_t=0,Bl=null,rs(e,p,b,R)}}Ch(),r=cn;break}catch(I){Od(e,I)}while(!0);return t&&e.shellSuspendCounter++,Ol=hl=null,jt=l,X.H=o,X.A=i,ct===null&&(Vt=null,ht=0,gi()),r}function Ch(){for(;ct!==null;)Hd(ct)}function wh(e,t){var n=jt;jt|=2;var l=Bd(),o=Ud();Vt!==e||ht!==t?(Jc=null,Pc=Zn()+500,cs(e,t)):os=ge(e,t);e:do try{if(_t!==0&&ct!==null){t=ct;var i=Bl;t:switch(_t){case 1:_t=0,Bl=null,rs(e,t,i,1);break;case 2:case 9:if(k(i)){_t=0,Bl=null,Ld(t);break}t=function(){_t!==2&&_t!==9||Vt!==e||(_t=7),Ua(e)},i.then(t,t);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:k(i)?(_t=0,Bl=null,Ld(t)):(_t=0,Bl=null,rs(e,t,i,7));break;case 5:var r=null;switch(ct.tag){case 26:r=ct.memoizedState;case 5:case 27:var p=ct;if(r?Tp(r):p.stateNode.complete){_t=0,Bl=null;var b=p.sibling;if(b!==null)ct=b;else{var R=p.return;R!==null?(ct=R,nr(R)):ct=null}break t}}_t=0,Bl=null,rs(e,t,i,5);break;case 6:_t=0,Bl=null,rs(e,t,i,6);break;case 8:mu(),cn=6;break e;default:throw Error(x(462))}}Th();break}catch(I){Od(e,I)}while(!0);return Ol=hl=null,X.H=l,X.A=o,jt=n,ct!==null?0:(Vt=null,ht=0,gi(),cn)}function Th(){for(;ct!==null&&!zi();)Hd(ct)}function Hd(e){var t=cd(e.alternate,e,ro);e.memoizedProps=e.pendingProps,t===null?nr(e):ct=t}function Ld(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=nd(n,t,t.pendingProps,t.type,void 0,ht);break;case 11:t=nd(n,t,t.pendingProps,t.type.render,t.ref,ht);break;case 5:Nr(t);default:ud(n,t),t=ct=Us(t,ro),t=cd(n,t,ro)}e.memoizedProps=e.pendingProps,t===null?nr(e):ct=t}function rs(e,t,n,l){Ol=hl=null,Nr(t),N=null,P=0;var o=t.return;try{if(dh(e,o,t,n,ht)){cn=1,Gc(e,dl(n,e.current)),ct=null;return}}catch(i){if(o!==null)throw ct=o,i;cn=1,Gc(e,dl(n,e.current)),ct=null;return}t.flags&32768?(Pe||l===1?e=!0:os||(ht&536870912)!==0?e=!1:(Lo=e=!0,(l===2||l===9||l===3||l===6)&&(l=pt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Yd(t,e)):nr(t)}function nr(e){var t=e;do{if((t.flags&32768)!==0){Yd(t,Lo);return}e=t.return;var n=yh(t.alternate,t,ro);if(n!==null){ct=n;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);cn===0&&(cn=5)}function Yd(e,t){do{var n=gh(e.alternate,e);if(n!==null){n.flags&=32767,ct=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ct=e;return}ct=e=n}while(e!==null);cn=6,ct=null}function Xd(e,t,n,l,o,i,r,p,b){e.cancelPendingCommit=null;do lr();while(Mn!==0);if((jt&6)!==0)throw Error(x(327));if(t!==null){if(t===e.current)throw Error(x(177));if(i=t.lanes|t.childLanes,i|=yi,Jo(e,n,i,r,p,b),e===Vt&&(ct=Vt=null,ht=0),ss=t,Vo=e,uo=n,hu=i,yu=o,kd=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ah(ha,function(){return Zd(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,o=ne.p,ne.p=2,r=jt,jt|=4;try{mh(e,t,n)}finally{jt=r,ne.p=o,X.T=l}}Mn=1,Vd(),Gd(),qd()}}function Vd(){if(Mn===1){Mn=0;var e=Vo,t=ss,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=X.T,X.T=null;var l=ne.p;ne.p=2;var o=jt;jt|=4;try{Cd(t,e);var i=ku,r=Vi(e.containerInfo),p=i.focusedElem,b=i.selectionRange;if(r!==p&&p&&p.ownerDocument&&zc(p.ownerDocument.documentElement,p)){if(b!==null&&_s(p)){var R=b.start,I=b.end;if(I===void 0&&(I=R),"selectionStart"in p)p.selectionStart=R,p.selectionEnd=Math.min(I,p.value.length);else{var F=p.ownerDocument||document,_=F&&F.defaultView||window;if(_.getSelection){var H=_.getSelection(),xe=p.textContent.length,Ue=Math.min(b.start,xe),Yt=b.end===void 0?Ue:Math.min(b.end,xe);!H.extend&&Ue>Yt&&(r=Yt,Yt=Ue,Ue=r);var E=ja(p,Ue),w=ja(p,Yt);if(E&&w&&(H.rangeCount!==1||H.anchorNode!==E.node||H.anchorOffset!==E.offset||H.focusNode!==w.node||H.focusOffset!==w.offset)){var D=F.createRange();D.setStart(E.node,E.offset),H.removeAllRanges(),Ue>Yt?(H.addRange(D),H.extend(w.node,w.offset)):(D.setEnd(w.node,w.offset),H.addRange(D))}}}}for(F=[],H=p;H=H.parentNode;)H.nodeType===1&&F.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<F.length;p++){var K=F[p];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}yr=!!Mu,ku=Mu=null}finally{jt=o,ne.p=l,X.T=n}}e.current=t,Mn=2}}function Gd(){if(Mn===2){Mn=0;var e=Vo,t=ss,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=X.T,X.T=null;var l=ne.p;ne.p=2;var o=jt;jt|=4;try{md(e,t.alternate,t)}finally{jt=o,ne.p=l,X.T=n}}Mn=3}}function qd(){if(Mn===4||Mn===3){Mn=0,yc();var e=Vo,t=ss,n=uo,l=kd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Mn=5:(Mn=0,ss=Vo=null,Id(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Xo=null),il(n),t=t.stateNode,Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Ya,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=X.T,o=ne.p,ne.p=2,X.T=null;try{for(var i=e.onRecoverableError,r=0;r<l.length;r++){var p=l[r];i(p.value,{componentStack:p.stack})}}finally{X.T=t,ne.p=o}}(uo&3)!==0&&lr(),Ua(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===gu?nc++:(nc=0,gu=e):nc=0,lc(0)}}function Id(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Na(t)))}function lr(){return Vd(),Gd(),qd(),Zd()}function Zd(){if(Mn!==5)return!1;var e=Vo,t=hu;hu=0;var n=il(uo),l=X.T,o=ne.p;try{ne.p=32>n?32:n,X.T=null,n=yu,yu=null;var i=Vo,r=uo;if(Mn=0,ss=Vo=null,uo=0,(jt&6)!==0)throw Error(x(331));var p=jt;if(jt|=4,jd(i.current),Td(i,i.current,r,n),jt=p,lc(0,!1),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Ya,i)}catch{}return!0}finally{ne.p=o,X.T=l,Id(e,t)}}function Qd(e,t,n){t=dl(n,t),t=Kr(e.stateNode,t,2),e=de(e,t,2),e!==null&&(vl(e,2),Ua(e))}function Bt(e,t,n){if(e.tag===3)Qd(e,e,n);else for(;t!==null;){if(t.tag===3){Qd(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xo===null||!Xo.has(l))){e=dl(n,e),n=Kf(2),l=de(t,n,2),l!==null&&($f(n,l,t,e),vl(l,2),Ua(l));break}}t=t.return}}function bu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new vh;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(fu=!0,o.add(n),e=zh.bind(null,e,t,n),t.then(e,e))}function zh(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vt===e&&(ht&n)===n&&(cn===4||cn===3&&(ht&62914560)===ht&&300>Zn()-Wc?(jt&2)===0&&cs(e,0):du|=n,is===ht&&(is=0)),Ua(e)}function Kd(e,t){t===0&&(t=ms()),e=Ma(e,t),e!==null&&(vl(e,t),Ua(e))}function Eh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Kd(e,n)}function jh(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(x(314))}l!==null&&l.delete(t),Kd(e,n)}function Ah(e,t){return La(e,t)}var ar=null,us=null,vu=!1,or=!1,Su=!1,qo=0;function Ua(e){e!==us&&e.next===null&&(us===null?ar=us=e:us=us.next=e),or=!0,vu||(vu=!0,kh())}function lc(e,t){if(!Su&&or){Su=!0;do for(var n=!1,l=ar;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var i=0;else{var r=l.suspendedLanes,p=l.pingedLanes;i=(1<<31-Ut(42|e)+1)-1,i&=o&~(r&~p),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,Pd(l,i))}else i=ht,i=Jn(l,l===Vt?i:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(i&3)===0||ge(l,i)||(n=!0,Pd(l,i));l=l.next}while(n);Su=!1}}function Mh(){$d()}function $d(){or=vu=!1;var e=0;qo!==0&&Yh()&&(e=qo);for(var t=Zn(),n=null,l=ar;l!==null;){var o=l.next,i=Fd(l,t);i===0?(l.next=null,n===null?ar=o:n.next=o,o===null&&(us=n)):(n=l,(e!==0||(i&3)!==0)&&(or=!0)),l=o}Mn!==0&&Mn!==5||lc(e),qo!==0&&(qo=0)}function Fd(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var r=31-Ut(i),p=1<<r,b=o[r];b===-1?((p&n)===0||(p&l)!==0)&&(o[r]=ho(p,t)):b<=t&&(e.expiredLanes|=p),i&=~p}if(t=Vt,n=ht,n=Jn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(_t===2||_t===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ve(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ge(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Ve(l),il(n)){case 2:case 8:n=ol;break;case 32:n=ha;break;case 268435456:n=Ai;break;default:n=ha}return l=Wd.bind(null,e),n=La(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Ve(l),e.callbackPriority=2,e.callbackNode=null,2}function Wd(e,t){if(Mn!==0&&Mn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lr()&&e.callbackNode!==n)return null;var l=ht;return l=Jn(e,e===Vt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Rd(e,l,t),Fd(e,Zn()),e.callbackNode!=null&&e.callbackNode===n?Wd.bind(null,e):null)}function Pd(e,t){if(lr())return null;Rd(e,t,!0)}function kh(){Vh(function(){(jt&6)!==0?La(ji,Mh):$d()})}function Cu(){if(qo===0){var e=Oa;e===0&&(e=Po,Po<<=1,(Po&261888)===0&&(Po=256)),qo=e}return qo}function Jd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:mo(""+e)}function ep(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Dh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var i=Jd((o[Yn]||null).action),r=l.submitter;r&&(t=(t=r[Yn]||null)?Jd(t.formAction):r.getAttribute("formAction"),t!==null&&(i=t,r=null));var p=new De("action","action",null,l,o);e.push({event:p,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(qo!==0){var b=r?ep(o,r):new FormData(o);Vr(n,{pending:!0,data:b,method:o.method,action:i},null,b)}}else typeof i=="function"&&(p.preventDefault(),b=r?ep(o,r):new FormData(o),Vr(n,{pending:!0,data:b,method:o.method,action:i},i,b))},currentTarget:o}]})}}for(var wu=0;wu<Ro.length;wu++){var Tu=Ro[wu],Rh=Tu.toLowerCase(),Nh=Tu[0].toUpperCase()+Tu.slice(1);xn(Rh,"on"+Nh)}xn(qi,"onAnimationEnd"),xn(Pa,"onAnimationIteration"),xn(Bs,"onAnimationStart"),xn("dblclick","onDoubleClick"),xn("focusin","onFocus"),xn("focusout","onBlur"),xn(Al,"onTransitionRun"),xn(Ec,"onTransitionStart"),xn(jc,"onTransitionCancel"),xn(Do,"onTransitionEnd"),yo("onMouseEnter",["mouseout","mouseover"]),yo("onMouseLeave",["mouseout","mouseover"]),yo("onPointerEnter",["pointerout","pointerover"]),yo("onPointerLeave",["pointerout","pointerover"]),ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function tp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var i=void 0;if(t)for(var r=l.length-1;0<=r;r--){var p=l[r],b=p.instance,R=p.currentTarget;if(p=p.listener,b!==i&&o.isPropagationStopped())break e;i=p,o.currentTarget=R;try{i(o)}catch(I){No(I)}o.currentTarget=null,i=b}else for(r=0;r<l.length;r++){if(p=l[r],b=p.instance,R=p.currentTarget,p=p.listener,b!==i&&o.isPropagationStopped())break e;i=p,o.currentTarget=R;try{i(o)}catch(I){No(I)}o.currentTarget=null,i=b}}}}function rt(e,t){var n=t[ti];n===void 0&&(n=t[ti]=new Set);var l=e+"__bubble";n.has(l)||(np(t,e,2,!1),n.add(l))}function zu(e,t,n){var l=0;t&&(l|=4),np(n,e,l,t)}var ir="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[ir]){e[ir]=!0,zr.forEach(function(n){n!=="selectionchange"&&(Oh.has(n)||zu(n,!1,e),zu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ir]||(t[ir]=!0,zu("selectionchange",!1,t))}}function np(e,t,n,l){switch(Dp(t)){case 2:var o=c0;break;case 8:o=r0;break;default:o=Xu}n=o.bind(null,t,n,e),o=void 0,!vo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ju(e,t,n,l,o){var i=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var r=l.tag;if(r===3||r===4){var p=l.stateNode.containerInfo;if(p===o)break;if(r===4)for(r=l.return;r!==null;){var b=r.tag;if((b===3||b===4)&&r.stateNode.containerInfo===o)return;r=r.return}for(;p!==null;){if(r=ga(p),r===null)return;if(b=r.tag,b===5||b===6||b===26||b===27){l=i=r;continue e}p=p.parentNode}}l=l.return}xo(function(){var R=i,I=_i(n),F=[];e:{var _=Ac.get(e);if(_!==void 0){var H=De,xe=e;switch(e){case"keypress":if(Sa(n)===0)break e;case"keydown":case"keyup":H=Ka;break;case"focusin":xe="focus",H=To;break;case"focusout":xe="blur",H=To;break;case"beforeblur":case"afterblur":H=To;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=zo;break;case qi:case Pa:case Bs:H=ii;break;case Do:H=ql;break;case"scroll":case"scrollend":H=Ca;break;case"wheel":H=Eo;break;case"copy":case"cut":case"paste":H=qt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Hi;break;case"toggle":case"beforetoggle":H=ri}var Ue=(t&4)!==0,Yt=!Ue&&(e==="scroll"||e==="scrollend"),E=Ue?_!==null?_+"Capture":null:_;Ue=[];for(var w=R,D;w!==null;){var K=w;if(D=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||D===null||E===null||(K=bo(w,E),K!=null&&Ue.push(oc(w,K,D))),Yt)break;w=w.return}0<Ue.length&&(_=new H(_,xe,null,n,I),F.push({event:_,listeners:Ue}))}}if((t&7)===0){e:{if(_=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",_&&n!==Oi&&(xe=n.relatedTarget||n.fromElement)&&(ga(xe)||xe[en]))break e;if((H||_)&&(_=I.window===I?I:(_=I.ownerDocument)?_.defaultView||_.parentWindow:window,H?(xe=n.relatedTarget||n.toElement,H=R,xe=xe?ga(xe):null,xe!==null&&(Yt=re(xe),Ue=xe.tag,xe!==Yt||Ue!==5&&Ue!==27&&Ue!==6)&&(xe=null)):(H=null,xe=R),H!==xe)){if(Ue=wo,K="onMouseLeave",E="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(Ue=Hi,K="onPointerLeave",E="onPointerEnter",w="pointer"),Yt=H==null?_:Gl(H),D=xe==null?_:Gl(xe),_=new Ue(K,w+"leave",H,n,I),_.target=Yt,_.relatedTarget=D,K=null,ga(I)===R&&(Ue=new Ue(E,w+"enter",xe,n,I),Ue.target=D,Ue.relatedTarget=Yt,K=Ue),Yt=K,H&&xe)t:{for(Ue=_h,E=H,w=xe,D=0,K=E;K;K=Ue(K))D++;K=0;for(var Ne=w;Ne;Ne=Ue(Ne))K++;for(;0<D-K;)E=Ue(E),D--;for(;0<K-D;)w=Ue(w),K--;for(;D--;){if(E===w||w!==null&&E===w.alternate){Ue=E;break t}E=Ue(E),w=Ue(w)}Ue=null}else Ue=null;H!==null&&lp(F,_,H,Ue,!1),xe!==null&&Yt!==null&&lp(F,Yt,xe,Ue,!0)}}e:{if(_=R?Gl(R):window,H=_.nodeName&&_.nodeName.toLowerCase(),H==="select"||H==="input"&&_.type==="file")var Tt=El;else if(di(_))if(Ds)Tt=Wa;else{Tt=Ea;var we=Ns}else H=_.nodeName,!H||H.toLowerCase()!=="input"||_.type!=="checkbox"&&_.type!=="radio"?R&&Ni(R.elementType)&&(Tt=El):Tt=Os;if(Tt&&(Tt=Tt(e,R))){Ao(F,Tt,n,I);break e}we&&we(e,_,R),e==="focusout"&&R&&_.type==="number"&&R.memoizedProps.value!=null&&En(_,"number",_.value)}switch(we=R?Gl(R):window,e){case"focusin":(di(we)||we.contentEditable==="true")&&(oa=we,ko=R,ul=null);break;case"focusout":ul=ko=oa=null;break;case"mousedown":Gi=!0;break;case"contextmenu":case"mouseup":case"dragend":Gi=!1,dt(F,n,I);break;case"selectionchange":if(hi)break;case"keydown":case"keyup":dt(F,n,I)}var Je;if(mn)e:{switch(e){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else $a?Li(e,n)&&(yt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(yt="onCompositionStart");yt&&(jo&&n.locale!=="ko"&&($a||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&$a&&(Je=So()):(tl=I,oi="value"in tl?tl.value:tl.textContent,$a=!0)),we=sr(R,yt),0<we.length&&(yt=new Cc(yt,e,null,n,I),F.push({event:yt,listeners:we}),Je?yt.data=Je:(Je=ks(n),Je!==null&&(yt.data=Je)))),(Je=Er?wc(e,n):Yi(e,n))&&(yt=sr(R,"onBeforeInput"),0<yt.length&&(we=new Cc("onBeforeInput","beforeinput",null,n,I),F.push({event:we,listeners:yt}),we.data=Je)),Dh(F,e,R,n,I)}tp(F,t)})}function oc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sr(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,i=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||i===null||(o=bo(e,n),o!=null&&l.unshift(oc(e,o,i)),o=bo(e,t),o!=null&&l.push(oc(e,o,i))),e.tag===3)return l;e=e.return}return[]}function _h(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function lp(e,t,n,l,o){for(var i=t._reactName,r=[];n!==null&&n!==l;){var p=n,b=p.alternate,R=p.stateNode;if(p=p.tag,b!==null&&b===l)break;p!==5&&p!==26&&p!==27||R===null||(b=R,o?(R=bo(n,i),R!=null&&r.unshift(oc(n,R,b))):o||(R=bo(n,i),R!=null&&r.push(oc(n,R,b)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var Bh=/\r\n?/g,Uh=/\u0000|\uFFFD/g;function ap(e){return(typeof e=="string"?e:""+e).replace(Bh,`
`).replace(Uh,"")}function op(e,t){return t=ap(t),ap(e)===t}function Lt(e,t,n,l,o,i){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||xa(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&xa(e,""+l);break;case"className":go(e,"class",l);break;case"tabIndex":go(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":go(e,n,l);break;case"style":li(e,l,i);break;case"data":if(t!=="object"){go(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=mo(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Lt(e,t,"name",o.name,o,null),Lt(e,t,"formEncType",o.formEncType,o,null),Lt(e,t,"formMethod",o.formMethod,o,null),Lt(e,t,"formTarget",o.formTarget,o,null)):(Lt(e,t,"encType",o.encType,o,null),Lt(e,t,"method",o.method,o,null),Lt(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=mo(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=wl);break;case"onScroll":l!=null&&rt("scroll",e);break;case"onScrollEnd":l!=null&&rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(x(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(x(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=mo(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":rt("beforetoggle",e),rt("toggle",e),Di(e,"popover",l);break;case"xlinkActuate":Xe(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Xe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Xe(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Xe(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Xe(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Xe(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Xe(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Di(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=el.get(n)||n,Di(e,n,l))}}function Au(e,t,n,l,o,i){switch(n){case"style":li(e,l,i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(x(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(x(60));e.innerHTML=n}}break;case"children":typeof l=="string"?xa(e,l):(typeof l=="number"||typeof l=="bigint")&&xa(e,""+l);break;case"onScroll":l!=null&&rt("scroll",e);break;case"onScrollEnd":l!=null&&rt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=wl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xc.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),i=e[Yn]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,o),typeof l=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Di(e,n,l)}}}function In(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",e),rt("load",e);var l=!1,o=!1,i;for(i in n)if(n.hasOwnProperty(i)){var r=n[i];if(r!=null)switch(i){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(x(137,t));default:Lt(e,t,i,r,n,null)}}o&&Lt(e,t,"srcSet",n.srcSet,n,null),l&&Lt(e,t,"src",n.src,n,null);return;case"input":rt("invalid",e);var p=i=r=o=null,b=null,R=null;for(l in n)if(n.hasOwnProperty(l)){var I=n[l];if(I!=null)switch(l){case"name":o=I;break;case"type":r=I;break;case"checked":b=I;break;case"defaultChecked":R=I;break;case"value":i=I;break;case"defaultValue":p=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(x(137,t));break;default:Lt(e,t,l,I,n,null)}}ve(e,i,p,b,R,r,o,!1);return;case"select":rt("invalid",e),l=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(p=n[o],p!=null))switch(o){case"value":i=p;break;case"defaultValue":r=p;break;case"multiple":l=p;default:Lt(e,t,o,p,n,null)}t=i,n=r,e.multiple=!!l,t!=null?wt(e,!!l,t,!1):n!=null&&wt(e,!!l,n,!0);return;case"textarea":rt("invalid",e),i=o=l=null;for(r in n)if(n.hasOwnProperty(r)&&(p=n[r],p!=null))switch(r){case"value":l=p;break;case"defaultValue":o=p;break;case"children":i=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(x(91));break;default:Lt(e,t,r,p,n,null)}Cl(e,l,o,i);return;case"option":for(b in n)if(n.hasOwnProperty(b)&&(l=n[b],l!=null))switch(b){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Lt(e,t,b,l,n,null)}return;case"dialog":rt("beforetoggle",e),rt("toggle",e),rt("cancel",e),rt("close",e);break;case"iframe":case"object":rt("load",e);break;case"video":case"audio":for(l=0;l<ac.length;l++)rt(ac[l],e);break;case"image":rt("error",e),rt("load",e);break;case"details":rt("toggle",e);break;case"embed":case"source":case"link":rt("error",e),rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in n)if(n.hasOwnProperty(R)&&(l=n[R],l!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(x(137,t));default:Lt(e,t,R,l,n,null)}return;default:if(Ni(t)){for(I in n)n.hasOwnProperty(I)&&(l=n[I],l!==void 0&&Au(e,t,I,l,n,void 0));return}}for(p in n)n.hasOwnProperty(p)&&(l=n[p],l!=null&&Lt(e,t,p,l,n,null))}function Hh(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,r=null,p=null,b=null,R=null,I=null;for(H in n){var F=n[H];if(n.hasOwnProperty(H)&&F!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":b=F;default:l.hasOwnProperty(H)||Lt(e,t,H,null,l,F)}}for(var _ in l){var H=l[_];if(F=n[_],l.hasOwnProperty(_)&&(H!=null||F!=null))switch(_){case"type":i=H;break;case"name":o=H;break;case"checked":R=H;break;case"defaultChecked":I=H;break;case"value":r=H;break;case"defaultValue":p=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(x(137,t));break;default:H!==F&&Lt(e,t,_,H,l,F)}}ln(e,r,p,b,R,I,i,o);return;case"select":H=r=p=_=null;for(i in n)if(b=n[i],n.hasOwnProperty(i)&&b!=null)switch(i){case"value":break;case"multiple":H=b;default:l.hasOwnProperty(i)||Lt(e,t,i,null,l,b)}for(o in l)if(i=l[o],b=n[o],l.hasOwnProperty(o)&&(i!=null||b!=null))switch(o){case"value":_=i;break;case"defaultValue":p=i;break;case"multiple":r=i;default:i!==b&&Lt(e,t,o,i,l,b)}t=p,n=r,l=H,_!=null?wt(e,!!n,_,!1):!!l!=!!n&&(t!=null?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1));return;case"textarea":H=_=null;for(p in n)if(o=n[p],n.hasOwnProperty(p)&&o!=null&&!l.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Lt(e,t,p,null,l,o)}for(r in l)if(o=l[r],i=n[r],l.hasOwnProperty(r)&&(o!=null||i!=null))switch(r){case"value":_=o;break;case"defaultValue":H=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(x(91));break;default:o!==i&&Lt(e,t,r,o,l,i)}na(e,_,H);return;case"option":for(var xe in n)if(_=n[xe],n.hasOwnProperty(xe)&&_!=null&&!l.hasOwnProperty(xe))switch(xe){case"selected":e.selected=!1;break;default:Lt(e,t,xe,null,l,_)}for(b in l)if(_=l[b],H=n[b],l.hasOwnProperty(b)&&_!==H&&(_!=null||H!=null))switch(b){case"selected":e.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Lt(e,t,b,_,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in n)_=n[Ue],n.hasOwnProperty(Ue)&&_!=null&&!l.hasOwnProperty(Ue)&&Lt(e,t,Ue,null,l,_);for(R in l)if(_=l[R],H=n[R],l.hasOwnProperty(R)&&_!==H&&(_!=null||H!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(x(137,t));break;default:Lt(e,t,R,_,l,H)}return;default:if(Ni(t)){for(var Yt in n)_=n[Yt],n.hasOwnProperty(Yt)&&_!==void 0&&!l.hasOwnProperty(Yt)&&Au(e,t,Yt,void 0,l,_);for(I in l)_=l[I],H=n[I],!l.hasOwnProperty(I)||_===H||_===void 0&&H===void 0||Au(e,t,I,_,l,H);return}}for(var E in n)_=n[E],n.hasOwnProperty(E)&&_!=null&&!l.hasOwnProperty(E)&&Lt(e,t,E,null,l,_);for(F in l)_=l[F],H=n[F],!l.hasOwnProperty(F)||_===H||_==null&&H==null||Lt(e,t,F,_,l,H)}function ip(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],i=o.transferSize,r=o.initiatorType,p=o.duration;if(i&&p&&ip(r)){for(r=0,p=o.responseEnd,l+=1;l<n.length;l++){var b=n[l],R=b.startTime;if(R>p)break;var I=b.transferSize,F=b.initiatorType;I&&ip(F)&&(b=b.responseEnd,r+=I*(b<p?1:(p-R)/(b-R)))}if(--l,t+=8*(i+r)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Mu=null,ku=null;function cr(e){return e.nodeType===9?e:e.ownerDocument}function sp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Du(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ru=null;function Yh(){var e=window.event;return e&&e.type==="popstate"?e===Ru?!1:(Ru=e,!0):(Ru=null,!1)}var rp=typeof setTimeout=="function"?setTimeout:void 0,Xh=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,Vh=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(e){return up.resolve(null).then(e).catch(Gh)}:rp;function Gh(e){setTimeout(function(){throw e})}function Io(e){return e==="head"}function fp(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),hs(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")ic(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,ic(n);for(var i=n.firstChild;i;){var r=i.nextSibling,p=i.nodeName;i[ya]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=r}}else n==="body"&&ic(e.ownerDocument.body);n=o}while(n);hs(t)}function dp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Nu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Nu(n),Gt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function qh(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ya])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Pl(e.nextSibling),e===null)break}return null}function Ih(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Pl(e.nextSibling),e===null))return null;return e}function pp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Pl(e.nextSibling),e===null))return null;return e}function Ou(e){return e.data==="$?"||e.data==="$~"}function _u(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Zh(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Pl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Bu=null;function hp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Pl(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function yp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function gp(e,t,n){switch(t=cr(n),e){case"html":if(e=t.documentElement,!e)throw Error(x(452));return e;case"head":if(e=t.head,!e)throw Error(x(453));return e;case"body":if(e=t.body,!e)throw Error(x(454));return e;default:throw Error(x(451))}}function ic(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Gt(e)}var Jl=new Map,mp=new Set;function rr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fo=ne.d;ne.d={f:Qh,r:Kh,D:$h,C:Fh,L:Wh,m:Ph,X:e0,S:Jh,M:t0};function Qh(){var e=fo.f(),t=er();return e||t}function Kh(e){var t=Sl(e);t!==null&&t.tag===5&&t.type==="form"?Of(t):fo.r(e)}var fs=typeof document>"u"?null:document;function xp(e,t,n){var l=fs;if(l&&typeof t=="string"&&t){var o=Le(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),mp.has(o)||(mp.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),In(t,"link",e),gn(t),l.head.appendChild(t)))}}function $h(e){fo.D(e),xp("dns-prefetch",e,null)}function Fh(e,t){fo.C(e,t),xp("preconnect",e,t)}function Wh(e,t,n){fo.L(e,t,n);var l=fs;if(l&&e&&t){var o='link[rel="preload"][as="'+Le(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Le(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Le(n.imageSizes)+'"]')):o+='[href="'+Le(e)+'"]';var i=o;switch(t){case"style":i=ds(e);break;case"script":i=ps(e)}Jl.has(i)||(e=z({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Jl.set(i,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(sc(i))||t==="script"&&l.querySelector(cc(i))||(t=l.createElement("link"),In(t,"link",e),gn(t),l.head.appendChild(t)))}}function Ph(e,t){fo.m(e,t);var n=fs;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Le(l)+'"][href="'+Le(e)+'"]',i=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=ps(e)}if(!Jl.has(i)&&(e=z({rel:"modulepreload",href:e},t),Jl.set(i,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(cc(i)))return}l=n.createElement("link"),In(l,"link",e),gn(l),n.head.appendChild(l)}}}function Jh(e,t,n){fo.S(e,t,n);var l=fs;if(l&&e){var o=Xa(l).hoistableStyles,i=ds(e);t=t||"default";var r=o.get(i);if(!r){var p={loading:0,preload:null};if(r=l.querySelector(sc(i)))p.loading=5;else{e=z({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Jl.get(i))&&Uu(e,n);var b=r=l.createElement("link");gn(b),In(b,"link",e),b._p=new Promise(function(R,I){b.onload=R,b.onerror=I}),b.addEventListener("load",function(){p.loading|=1}),b.addEventListener("error",function(){p.loading|=2}),p.loading|=4,ur(r,t,l)}r={type:"stylesheet",instance:r,count:1,state:p},o.set(i,r)}}}function e0(e,t){fo.X(e,t);var n=fs;if(n&&e){var l=Xa(n).hoistableScripts,o=ps(e),i=l.get(o);i||(i=n.querySelector(cc(o)),i||(e=z({src:e,async:!0},t),(t=Jl.get(o))&&Hu(e,t),i=n.createElement("script"),gn(i),In(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(o,i))}}function t0(e,t){fo.M(e,t);var n=fs;if(n&&e){var l=Xa(n).hoistableScripts,o=ps(e),i=l.get(o);i||(i=n.querySelector(cc(o)),i||(e=z({src:e,async:!0,type:"module"},t),(t=Jl.get(o))&&Hu(e,t),i=n.createElement("script"),gn(i),In(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(o,i))}}function bp(e,t,n,l){var o=(o=$e.current)?rr(o):null;if(!o)throw Error(x(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ds(n.href),n=Xa(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ds(n.href);var i=Xa(o).hoistableStyles,r=i.get(e);if(r||(o=o.ownerDocument||o,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,r),(i=o.querySelector(sc(e)))&&!i._p&&(r.instance=i,r.state.loading=5),Jl.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Jl.set(e,n),i||n0(o,e,n,r.state))),t&&l===null)throw Error(x(528,""));return r}if(t&&l!==null)throw Error(x(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ps(n),n=Xa(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(x(444,e))}}function ds(e){return'href="'+Le(e)+'"'}function sc(e){return'link[rel="stylesheet"]['+e+"]"}function vp(e){return z({},e,{"data-precedence":e.precedence,precedence:null})}function n0(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),In(t,"link",n),gn(t),e.head.appendChild(t))}function ps(e){return'[src="'+Le(e)+'"]'}function cc(e){return"script[async]"+e}function Sp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Le(n.href)+'"]');if(l)return t.instance=l,gn(l),l;var o=z({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),gn(l),In(l,"style",o),ur(l,n.precedence,e),t.instance=l;case"stylesheet":o=ds(n.href);var i=e.querySelector(sc(o));if(i)return t.state.loading|=4,t.instance=i,gn(i),i;l=vp(n),(o=Jl.get(o))&&Uu(l,o),i=(e.ownerDocument||e).createElement("link"),gn(i);var r=i;return r._p=new Promise(function(p,b){r.onload=p,r.onerror=b}),In(i,"link",l),t.state.loading|=4,ur(i,n.precedence,e),t.instance=i;case"script":return i=ps(n.src),(o=e.querySelector(cc(i)))?(t.instance=o,gn(o),o):(l=n,(o=Jl.get(i))&&(l=z({},n),Hu(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),gn(o),In(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(x(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ur(l,n.precedence,e));return t.instance}function ur(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,i=o,r=0;r<l.length;r++){var p=l[r];if(p.dataset.precedence===t)i=p;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Uu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Hu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var fr=null;function Cp(e,t,n){if(fr===null){var l=new Map,o=fr=new Map;o.set(n,l)}else o=fr,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[ya]||i[Nt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var r=i.getAttribute(t)||"";r=e+r;var p=l.get(r);p?p.push(i):l.set(r,[i])}}return l}function wp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function l0(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Tp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function a0(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=ds(l.href),i=t.querySelector(sc(o));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=dr.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,gn(i);return}i=t.ownerDocument||t,l=vp(l),(o=Jl.get(o))&&Uu(l,o),i=i.createElement("link"),gn(i);var r=i;r._p=new Promise(function(p,b){r.onload=p,r.onerror=b}),In(i,"link",l),n.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=dr.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Lu=0;function o0(e,t){return e.stylesheets&&e.count===0&&hr(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&hr(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&Lu===0&&(Lu=62500*Lh());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hr(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>Lu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function dr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pr=null;function hr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pr=new Map,t.forEach(i0,e),pr=null,dr.call(e))}function i0(e,t){if(!(t.state.loading&4)){var n=pr.get(e);if(n)var l=n.get(null);else{n=new Map,pr.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var r=o[i];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),l=r)}l&&n.set(null,l)}o=t.instance,r=o.getAttribute("data-precedence"),i=n.get(r)||l,i===l&&n.set(null,o),n.set(r,o),this.count++,l=dr.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),i?i.parentNode.insertBefore(o,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var rc={$$typeof:ye,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function s0(e,t,n,l,o,i,r,p,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.hiddenUpdates=ta(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function zp(e,t,n,l,o,i,r,p,b,R,I,F){return e=new s0(e,t,n,r,b,R,I,F,p),t=1,i===!0&&(t|=24),i=Se(3,null,null,t),e.current=i,i.stateNode=e,t=Ji(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:l,isDehydrated:n,cache:t},Q(i),e}function Ep(e){return e?(e=kl,e):kl}function jp(e,t,n,l,o,i){o=Ep(o),l.context===null?l.context=o:l.pendingContext=o,l=Ce(t),l.payload={element:n},i=i===void 0?null:i,i!==null&&(l.callback=i),n=de(e,l,t),n!==null&&(bl(n,e,t),Re(n,e,t))}function Ap(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yu(e,t){Ap(e,t),(e=e.alternate)&&Ap(e,t)}function Mp(e){if(e.tag===13||e.tag===31){var t=Ma(e,67108864);t!==null&&bl(t,e,67108864),Yu(e,67108864)}}function kp(e){if(e.tag===13||e.tag===31){var t=Hl();t=ki(t);var n=Ma(e,t);n!==null&&bl(n,e,t),Yu(e,t)}}var yr=!0;function c0(e,t,n,l){var o=X.T;X.T=null;var i=ne.p;try{ne.p=2,Xu(e,t,n,l)}finally{ne.p=i,X.T=o}}function r0(e,t,n,l){var o=X.T;X.T=null;var i=ne.p;try{ne.p=8,Xu(e,t,n,l)}finally{ne.p=i,X.T=o}}function Xu(e,t,n,l){if(yr){var o=Vu(l);if(o===null)ju(e,t,l,gr,n),Rp(e,l);else if(f0(o,e,t,n,l))l.stopPropagation();else if(Rp(e,l),t&4&&-1<u0.indexOf(e)){for(;o!==null;){var i=Sl(o);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var r=Ge(i.pendingLanes);if(r!==0){var p=i;for(p.pendingLanes|=2,p.entangledLanes|=2;r;){var b=1<<31-Ut(r);p.entanglements[1]|=b,r&=~b}Ua(i),(jt&6)===0&&(Pc=Zn()+500,lc(0))}}break;case 31:case 13:p=Ma(i,2),p!==null&&bl(p,i,2),er(),Yu(i,2)}if(i=Vu(l),i===null&&ju(e,t,l,gr,n),i===o)break;o=i}o!==null&&l.stopPropagation()}else ju(e,t,l,null,n)}}function Vu(e){return e=_i(e),Gu(e)}var gr=null;function Gu(e){if(gr=null,e=ga(e),e!==null){var t=re(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=W(t),e!==null)return e;e=null}else if(n===31){if(e=he(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return gr=e,null}function Dp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ei()){case ji:return 2;case ol:return 8;case ha:case Wo:return 32;case Ai:return 268435456;default:return 32}default:return 32}}var qu=!1,Zo=null,Qo=null,Ko=null,uc=new Map,fc=new Map,$o=[],u0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rp(e,t){switch(e){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":Qo=null;break;case"mouseover":case"mouseout":Ko=null;break;case"pointerover":case"pointerout":uc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(t.pointerId)}}function dc(e,t,n,l,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Sl(t),t!==null&&Mp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function f0(e,t,n,l,o){switch(t){case"focusin":return Zo=dc(Zo,e,t,n,l,o),!0;case"dragenter":return Qo=dc(Qo,e,t,n,l,o),!0;case"mouseover":return Ko=dc(Ko,e,t,n,l,o),!0;case"pointerover":var i=o.pointerId;return uc.set(i,dc(uc.get(i)||null,e,t,n,l,o)),!0;case"gotpointercapture":return i=o.pointerId,fc.set(i,dc(fc.get(i)||null,e,t,n,l,o)),!0}return!1}function Np(e){var t=ga(e.target);if(t!==null){var n=re(t);if(n!==null){if(t=n.tag,t===13){if(t=W(n),t!==null){e.blockedOn=t,Tn(e.priority,function(){kp(n)});return}}else if(t===31){if(t=he(n),t!==null){e.blockedOn=t,Tn(e.priority,function(){kp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vu(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Oi=l,n.target.dispatchEvent(l),Oi=null}else return t=Sl(n),t!==null&&Mp(t),e.blockedOn=n,!1;t.shift()}return!0}function Op(e,t,n){mr(e)&&n.delete(t)}function d0(){qu=!1,Zo!==null&&mr(Zo)&&(Zo=null),Qo!==null&&mr(Qo)&&(Qo=null),Ko!==null&&mr(Ko)&&(Ko=null),uc.forEach(Op),fc.forEach(Op)}function xr(e,t){e.blockedOn===t&&(e.blockedOn=null,qu||(qu=!0,O.unstable_scheduleCallback(O.unstable_NormalPriority,d0)))}var br=null;function _p(e){br!==e&&(br=e,O.unstable_scheduleCallback(O.unstable_NormalPriority,function(){br===e&&(br=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(Gu(l||n)===null)continue;break}var i=Sl(n);i!==null&&(e.splice(t,3),t-=3,Vr(i,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function hs(e){function t(b){return xr(b,e)}Zo!==null&&xr(Zo,e),Qo!==null&&xr(Qo,e),Ko!==null&&xr(Ko,e),uc.forEach(t),fc.forEach(t);for(var n=0;n<$o.length;n++){var l=$o[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<$o.length&&(n=$o[0],n.blockedOn===null);)Np(n),n.blockedOn===null&&$o.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],i=n[l+1],r=o[Yn]||null;if(typeof i=="function")r||_p(n);else if(r){var p=null;if(i&&i.hasAttribute("formAction")){if(o=i,r=i[Yn]||null)p=r.formAction;else if(Gu(o)!==null)continue}else p=r.action;typeof p=="function"?n[l+1]=p:(n.splice(l,3),l-=3),_p(n)}}}function Bp(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(r){return o=r})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Iu(e){this._internalRoot=e}vr.prototype.render=Iu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(x(409));var n=t.current,l=Hl();jp(n,l,e,t,null,null)},vr.prototype.unmount=Iu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jp(e.current,2,null,e,null,null),er(),t[en]=null}};function vr(e){this._internalRoot=e}vr.prototype.unstable_scheduleHydration=function(e){if(e){var t=ei();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$o.length&&t!==0&&t<$o[n].priority;n++);$o.splice(n,0,e),n===0&&Np(e)}};var Up=M.version;if(Up!=="19.2.0")throw Error(x(527,Up,"19.2.0"));ne.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(x(188)):(e=Object.keys(e).join(","),Error(x(268,e)));return e=G(t),e=e!==null?je(e):null,e=e===null?null:e.stateNode,e};var p0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sr.isDisabled&&Sr.supportsFiber)try{Ya=Sr.inject(p0),Dn=Sr}catch{}}return hc.createRoot=function(e,t){if(!ae(e))throw Error(x(299));var n=!1,l="",o=qf,i=If,r=Zf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=zp(e,1,!1,null,null,n,l,null,o,i,r,Bp),e[en]=t.current,Eu(e),new Iu(t)},hc.hydrateRoot=function(e,t,n){if(!ae(e))throw Error(x(299));var l=!1,o="",i=qf,r=If,p=Zf,b=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError),n.formState!==void 0&&(b=n.formState)),t=zp(e,1,!0,t,n??null,l,o,b,i,r,p,Bp),t.context=Ep(null),n=t.current,l=Hl(),l=ki(l),o=Ce(l),o.callback=null,de(n,o,l),n=l,t.current.lanes=n,vl(t,n),Ua(t),e[en]=t.current,Eu(e),new vr(t)},hc.version="19.2.0",hc}var Qp;function T0(){if(Qp)return Ku.exports;Qp=1;function O(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O)}catch(M){console.error(M)}}return O(),Ku.exports=w0(),Ku.exports}var z0=T0();function E0(O,M){return O?M?{minX:Math.min(O.minX,M.minX),minY:Math.min(O.minY,M.minY),maxX:Math.max(O.maxX,M.maxX),maxY:Math.max(O.maxY,M.maxY)}:O:M}function j0(O,M,le,x,ae,re,W,he,ee){const G=O/2,je=M/2,z=[{x:-G,y:-je},{x:G,y:-je},{x:G,y:je},{x:-G,y:je}],ue=ee*Math.PI/180,rn=Math.sin(ue),pe=Math.cos(ue);let Oe=1/0,xt=1/0,ke=-1/0,Mt=-1/0;for(const ye of z){const ut=ye.x*W,nt=ye.y*he,fe=ut*pe-nt*rn,Te=ut*rn+nt*pe,kt=le+ae+fe,se=x+re+Te;kt<Oe&&(Oe=kt),se<xt&&(xt=se),kt>ke&&(ke=kt),se>Mt&&(Mt=se)}return{minX:Oe,minY:xt,maxX:ke,maxY:Mt}}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=O=>O.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M0=O=>O.replace(/^([A-Z])|[\s-_]+(\w)/g,(M,le,x)=>x?x.toUpperCase():le.toLowerCase()),Kp=O=>{const M=M0(O);return M.charAt(0).toUpperCase()+M.slice(1)},Jp=(...O)=>O.filter((M,le,x)=>!!M&&M.trim()!==""&&x.indexOf(M)===le).join(" ").trim(),k0=O=>{for(const M in O)if(M.startsWith("aria-")||M==="role"||M==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=S.forwardRef(({color:O="currentColor",size:M=24,strokeWidth:le=2,absoluteStrokeWidth:x,className:ae="",children:re,iconNode:W,...he},ee)=>S.createElement("svg",{ref:ee,...D0,width:M,height:M,stroke:O,strokeWidth:x?Number(le)*24/Number(M):le,className:Jp("lucide",ae),...!re&&!k0(he)&&{"aria-hidden":"true"},...he},[...W.map(([G,je])=>S.createElement(G,je)),...Array.isArray(re)?re:[re]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=(O,M)=>{const le=S.forwardRef(({className:x,...ae},re)=>S.createElement(R0,{ref:re,iconNode:M,className:Jp(`lucide-${A0(Kp(O))}`,`lucide-${O}`,x),...ae}));return le.displayName=Kp(O),le};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],O0=eh("mouse-pointer",N0);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],B0=eh("pen-line",_0),Cr="#2CA02C",th="#F0E442",nh="#00BFC4",Pu="#000000",U0="#00008b",wr="#FF0000",lh={DEFAULT_SIZE:24},ef={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},Ti={DEFAULT_SIZE:26};let tf=1;function Ll(){return tf++}function $p(O){tf=O}function Fp(){return tf}function H0(O="id"){return`${O}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function Wp(O){return Math.round(O*1e3)/1e3}function $t(O){return{x:Wp(O.x),y:Wp(O.y)}}function L0(O){return ef[O]?.defaultPins||2}function Y0(O,M,le,x,ae,re=lh.DEFAULT_SIZE){const W={id:H0("comp"),componentType:O,designator:"",layer:M,x:le,y:x,color:ae,size:re,pinCount:L0(O),pinConnections:[]};switch(W.pinConnections=new Array(W.pinCount).fill(""),O){case"Battery":return{...W,componentType:"Battery"};case"Capacitor":return{...W,componentType:"Capacitor"};case"Diode":return{...W,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...W,componentType:"Fuse"};case"FerriteBead":return{...W,componentType:"FerriteBead"};case"Connector":return{...W,componentType:"Connector",gender:"N/A"};case"Jumper":return{...W,componentType:"Jumper"};case"Relay":return{...W,componentType:"Relay"};case"Inductor":return{...W,componentType:"Inductor"};case"Speaker":return{...W,componentType:"Speaker"};case"Motor":return{...W,componentType:"Motor"};case"PowerSupply":return{...W,componentType:"PowerSupply"};case"Transistor":return{...W,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...W,componentType:"Resistor"};case"ResistorNetwork":return{...W,componentType:"ResistorNetwork"};case"Thermistor":return{...W,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...W,componentType:"Switch"};case"Transformer":return{...W,componentType:"Transformer"};case"TestPoint":return{...W,componentType:"TestPoint"};case"IntegratedCircuit":return{...W,componentType:"IntegratedCircuit"};case"VacuumTube":return{...W,componentType:"VacuumTube"};case"VariableResistor":return{...W,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...W,componentType:"Crystal"};case"ZenerDiode":return{...W,componentType:"ZenerDiode"};default:return{...W,componentType:"Resistor"}}}class X0{parent=new Map;rank=new Map;find(M){return this.parent.has(M)?(this.parent.get(M)!==M&&this.parent.set(M,this.find(this.parent.get(M))),this.parent.get(M)):(this.parent.set(M,M),this.rank.set(M,0),M)}union(M,le){const x=this.find(M),ae=this.find(le);if(x===ae)return;const re=this.rank.get(x)||0,W=this.rank.get(ae)||0;re<W?this.parent.set(x,ae):re>W?this.parent.set(ae,x):(this.parent.set(ae,x),this.rank.set(x,re+1))}getGroups(){const M=new Map;for(const le of this.parent.keys()){const x=this.find(le);M.has(x)||M.set(x,[]),M.get(x).push(le)}return M}}function V0(O,M,le,x,ae){const re=new Map;for(const W of O)if((W.type==="via"||W.type==="pad")&&W.points.length>0){const he=W.points[0];he.id!==void 0&&!re.has(he.id)&&re.set(he.id,{id:he.id,type:W.type==="via"?"via":"pad",x:he.x,y:he.y})}else if(W.type==="trace")for(const he of W.points)he.id!==void 0&&!re.has(he.id)&&re.set(he.id,{id:he.id,type:"trace_point",x:he.x,y:he.y});for(const W of le)if(W.pointId!==void 0){const he=ae.find(ee=>ee.id===W.powerBusId);re.set(W.pointId,{id:W.pointId,type:"power",x:W.x,y:W.y,voltage:he?.voltage||W.type||"UNKNOWN",powerBusId:W.powerBusId})}for(const W of x){const he=W;he.pointId!==void 0&&re.set(he.pointId,{id:he.pointId,type:"ground",x:W.x,y:W.y})}for(const W of M)if(W.abbreviation?.trim()||W.designator?.trim())for(let ee=0;ee<W.pinCount;ee++){const G=W.pinConnections?.[ee]||"";if(G&&G.trim()!==""){const je=parseInt(G.trim(),10);if(!isNaN(je)&&je>0)if(!re.has(je))re.set(je,{id:je,type:"component_pin",x:W.x,y:W.y,componentId:W.id,pinIndex:ee});else{const z=re.get(je);z.componentId=W.id,z.pinIndex=ee,z.type="component_pin"}}}return re}function G0(O,M){const le=new X0;for(const[he,ee]of M)O.has(he)&&O.has(ee)&&le.union(he,ee);const x=[];for(const[he,ee]of O)ee.type==="ground"&&x.push(he);if(x.length>1){const he=x[0];for(let ee=1;ee<x.length;ee++)le.union(he,x[ee]);console.log(`[Connectivity] Unified ${x.length} ground nodes into a single net`)}const ae=new Map;for(const[he,ee]of O)if(ee.type==="power"&&ee.voltage){const G=ee.voltage.trim();ae.has(G)||ae.set(G,[]),ae.get(G).push(he)}for(const[he,ee]of ae)if(ee.length>1){const G=ee[0];for(let je=1;je<ee.length;je++)le.union(G,ee[je]);console.log(`[Connectivity] Unified ${ee.length} power nodes with voltage "${he}" into a single net`)}for(const he of O.keys())le.find(he);const re=le.getGroups(),W=new Map;for(const[he,ee]of re){const G=ee.map(je=>O.get(je)).filter(je=>je!==void 0);W.set(he,G)}return W}function q0(O,M){const le=new Map;let x=1;for(const[ae,re]of O){if(re.some(ee=>ee.type==="ground")){le.set(ae,"GND");continue}const he=re.filter(ee=>ee.type==="power");if(he.length>0){let G=(he[0].voltage||"UNKNOWN").trim();G&&!G.startsWith("+")&&!G.startsWith("-")&&!G.startsWith("AC")&&(G="+"+G),le.set(ae,G);continue}le.set(ae,`N$${x++}`)}return le}function I0(O,M,le,x,ae){const re=V0(M,O,le,x,ae),W=Array.from(re.values()).filter(se=>se.type==="component_pin");console.log(`[Schematic] Component pin nodes in graph: ${W.length}`),W.length>0&&console.log("[Schematic] Sample component pin nodes:",W.slice(0,5).map(se=>`Node ID ${se.id} (compId: ${se.componentId}, pinIndex: ${se.pinIndex})`));const he=[];for(const se of M)if(se.type==="trace"&&se.points.length>=2)for(let ze=0;ze<se.points.length-1;ze++){const Ae=se.points[ze],be=se.points[ze+1];Ae&&be&&Ae.id!==void 0&&be.id!==void 0&&Ae.id!==be.id&&he.push([Ae.id,be.id])}console.log(`[Schematic] Trace connections: ${he.length}`);const ee=G0(re,he),G=q0(ee);if(console.log(`[Schematic] Net groups created: ${ee.size}`),W.length>0){const se=[];for(const ze of W){let Ae=!1;for(const[,be]of ee)if(be.some(tt=>tt.id===ze.id)){Ae=!0;break}if(!Ae){const be=O.find(St=>St.id===ze.componentId),tt=be&&(be.abbreviation?.trim()||be.designator?.trim())||"UNKNOWN";se.push({compId:ze.componentId||"unknown",designator:tt,pinIndex:ze.pinIndex||0,nodeId:ze.id})}}if(se.length>0){console.warn(`[Schematic] Found ${se.length} isolated component pins (not in any net):`);for(const ze of se.slice(0,10))console.warn(`  - ${ze.designator} pin ${ze.pinIndex+1} at Node ID ${ze.nodeId}`)}else console.log("[Schematic] All component pins are in nets")}const je=new Map;for(const se of O){const ze=se.abbreviation?.trim()||se.designator?.trim();ze&&je.set(se.id,ze)}const z=[];let ue=0,rn=0;const pe=new Map;for(const[se,ze]of ee){ue++;const Ae=[];for(const be of ze)be.type==="component_pin"&&be.componentId&&be.pinIndex!==void 0&&(Ae.push(be),rn++);Ae.length>0&&pe.set(se,Ae)}for(const[se,ze]of pe){const Ae=G.get(se)||`N$${se}`,be=[];for(const tt of ze){const St=je.get(tt.componentId);St?be.push({designator:St,pin:(tt.pinIndex||0)+1}):console.warn(`[Schematic] Component pin found but no designator for componentId: ${tt.componentId}`)}be.length>=2?z.push({name:Ae,componentPins:be}):be.length===1&&console.log(`[Schematic] Net ${Ae} has only 1 component pin: ${be[0].designator} pin ${be[0].pin}`)}if(console.log(`[Schematic] Total net groups: ${ue}, Component pins found: ${rn}`),console.log(`[Schematic] Nets with component pins: ${pe.size}`),console.log(`[Schematic] Generated ${z.length} nets with 2+ component connections`),pe.size>0){console.log("[Schematic] Sample nets with component pins:");let se=0;for(const[ze,Ae]of pe){if(se++>=5)break;const be=G.get(ze)||`N$${ze}`,tt=Ae.map(St=>`${je.get(St.componentId)||"unknown"}:pin${(St.pinIndex||0)+1}@NodeID${St.id}`);console.log(`  Net ${be} (root Node ID ${ze}): ${Ae.length} pins - ${tt.join(", ")}`)}}z.length>0?console.log(`[Schematic] First net: ${z[0].name} with ${z[0].componentPins.length} pins:`,z[0].componentPins):(console.warn("[Schematic] No nets with 2+ component pins found! Each component pin is in its own net."),console.warn("[Schematic] This suggests component pins are not connected through traces/vias."));const Oe=new Map,xt=O.filter(se=>!!(se.abbreviation?.trim()||se.designator?.trim())),ke=50.8,Mt=Math.ceil(Math.sqrt(xt.length));let ye=25.4,ut=25.4,nt=0;for(const se of xt){const ze=se.abbreviation?.trim()||se.designator?.trim();ze&&(Oe.set(ze,{comp:se,designator:ze,x:ye,y:ut}),nt++,nt>=Mt?(nt=0,ye=25.4,ut+=ke):ye+=ke)}let fe=`(kicad_sch (version 20201015) (generator simple_schematic)
`;fe+=`  (paper "A4")
`,fe+=`  (title_block
`,fe+=`    (title "")
`,fe+=`    (date "")
`,fe+=`    (rev "")
`,fe+=`    (company "")
`,fe+=`  )
`,fe+=`
`,fe+=`  (lib_symbols
`,fe+=`    (symbol "simple:Generic" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,fe+=`      (property "Reference" "REF" (id 0) (at 0 2.54 0)
`,fe+=`        (effects (font (size 1.27 1.27)))
`,fe+=`      )
`,fe+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,fe+=`        (effects (font (size 1.27 1.27)))
`,fe+=`      )
`,fe+=`      (symbol "Generic_0_1"
`,fe+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,fe+=`          (stroke (width 0.254)) (fill (type background))
`,fe+=`        )
`,fe+=`      )
`,fe+=`      (symbol "Generic_1_1"
`;for(let se=0;se<10;se++){const ze=se+1,Ae=-11.43+se*2.54;fe+=`        (pin passive line (at ${-5.08} ${Ae} 0) (length 2.54)
`,fe+=`          (name "${ze}" (effects (font (size 1.27 1.27))))
`,fe+=`          (number "${ze}" (effects (font (size 1.27 1.27))))
`,fe+=`        )
`}for(let se=0;se<10;se++){const ze=se+11,Ae=-11.43+se*2.54;fe+=`        (pin passive line (at ${5.08} ${Ae} 180) (length 2.54)
`,fe+=`          (name "${ze}" (effects (font (size 1.27 1.27))))
`,fe+=`          (number "${ze}" (effects (font (size 1.27 1.27))))
`,fe+=`        )
`}fe+=`      )
`,fe+=`    )
`,fe+=`  )
`,fe+=`
`;let Te=1;const kt=()=>`00000000-0000-0000-0000-${String(Te++).padStart(12,"0")}`;for(const[se,ze]of Oe){const Ae=kt(),be=ze.comp;fe+=`  (symbol (lib_id "simple:Generic") (at ${ze.x} ${ze.y} 0) (unit 1)
`,fe+=`    (in_bom yes) (on_board yes) (dnp no)
`,fe+=`    (uuid ${Ae})
`,fe+=`    (property "Reference" "${se}" (id 0) (at ${ze.x} ${ze.y+3.81} 0)
`,fe+=`      (effects (font (size 1.27 1.27)))
`,fe+=`    )
`,fe+=`    (property "Value" "${be.componentType}" (id 1) (at ${ze.x} ${ze.y-3.81} 0)
`,fe+=`      (effects (font (size 1.27 1.27)))
`,fe+=`    )
`,fe+=`  )
`}fe+=`
`,console.log(`[Schematic] Processing ${z.length} nets for wire generation`);for(const se of z){if(se.componentPins.length<2){console.warn(`[Schematic] Skipping net ${se.name} with only ${se.componentPins.length} pins`);continue}const ze=[...se.componentPins].sort((be,tt)=>{const St=be.designator.localeCompare(tt.designator);return St!==0?St:be.pin-tt.pin}),Ae=[];for(const be of ze){const tt=Oe.get(be.designator);if(!tt)continue;const St=2.54,Ft=be.pin<=10;let X,ne;Ft?(X=tt.x-5.08-2.54,ne=tt.y-9*St/2+(be.pin-1)*St):(X=tt.x+5.08+2.54,ne=tt.y-9*St/2+(be.pin-11)*St),Ae.push({x:X,y:ne,designator:be.designator,pin:be.pin})}if(Ae.length>=2){const be=Ae.reduce((X,ne)=>X+ne.x,0)/Ae.length,tt=Ae.reduce((X,ne)=>X+ne.y,0)/Ae.length,St=kt();fe+=`  (junction (at ${be} ${tt}) (diameter 0) (color 0 0 0 0) (uuid ${St}))
`;for(const X of Ae){const ne=kt();fe+=`  (wire (pts (xy ${X.x} ${X.y}) (xy ${be} ${tt})) (stroke (width 0) (type default)) (uuid ${ne}))
`}const Ft=kt();fe+=`  (text "${se.name}" (at ${be} ${tt+5.08} 0)
`,fe+=`    (effects (font (size 1.27 1.27)))
`,fe+=`    (uuid ${Ft})
`,fe+=`  )
`}}return fe+=`)
`,fe}function Z0(){const O=new Date,M=O.getFullYear(),le=String(O.getMonth()+1).padStart(2,"0"),x=String(O.getDate()).padStart(2,"0"),ae=String(O.getHours()).padStart(2,"0"),re=String(O.getMinutes()).padStart(2,"0"),W=String(O.getSeconds()).padStart(2,"0");return`${M}_${le}_${x}-${ae}-${re}-${W}`}const ys=O=>{const M=ef[O];return!M||!M.prefix||M.prefix.length<1?"?":M.prefix[0].substring(0,1).toUpperCase()},Ha=(O,M,le)=>{const x=`tool_${O}_color`,ae=`tool_${O}_size`,re=localStorage.getItem(x),W=localStorage.getItem(ae);return{color:re||M,size:W?parseInt(W,10):le}},Pp=(O,M,le)=>{localStorage.setItem(`tool_${O}_color`,M),localStorage.setItem(`tool_${O}_size`,String(le))},Cn=(O,M,le,x)=>{const ae=`tool_${O}_${M}_color`,re=`tool_${O}_${M}_size`,W=localStorage.getItem(ae),he=localStorage.getItem(re);return{color:W||le,size:he?parseInt(he,10):x}},Q0=()=>{const O=new Map,M={top:"#0072B2",bottom:"#56B4E9"},le={top:Ti.DEFAULT_SIZE,bottom:Ti.DEFAULT_SIZE},x={top:"#AA4499",bottom:"#F781BF"},ae={top:6,bottom:6},re={top:"#6A3D9A",bottom:"#9467BD"},W={top:18,bottom:18};return O.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:Ha("select","#ff0000",10),layerSettings:new Map([["top",Cn("select","top","#ff0000",10)],["bottom",Cn("select","bottom","#ff0000",10)]])}),O.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:Ha("via",Cr,Ti.DEFAULT_SIZE),layerSettings:new Map([["top",Cn("via","top",Cr,Ti.DEFAULT_SIZE)],["bottom",Cn("via","bottom",Cr,Ti.DEFAULT_SIZE)]]),defaultLayer:"top"}),O.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:Ha("pad",U0,Ti.DEFAULT_SIZE),layerSettings:new Map([["top",Cn("pad","top",M.top,le.top)],["bottom",Cn("pad","bottom",M.bottom,le.bottom)]]),defaultLayer:"top"}),O.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:Ha("trace",th,2),layerSettings:new Map([["top",Cn("trace","top",x.top,ae.top)],["bottom",Cn("trace","bottom",x.bottom,ae.bottom)]]),defaultLayer:"top"}),O.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:Ha("component",nh,lh.DEFAULT_SIZE),layerSettings:new Map([["top",Cn("component","top",re.top,W.top)],["bottom",Cn("component","bottom",re.bottom,W.bottom)]]),defaultLayer:"top"}),O.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"W",tooltip:"Place power node",colorReflective:!0,settings:Ha("power",wr,26),layerSettings:new Map([["top",Cn("power","top",wr,26)],["bottom",Cn("power","bottom",wr,26)]]),defaultLayer:"top"}),O.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:Ha("ground",Pu,26),layerSettings:new Map([["top",Cn("ground","top",Pu,26)],["bottom",Cn("ground","bottom",Pu,26)]]),defaultLayer:"top"}),O.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:Ha("erase","#f5a3b3",5),layerSettings:new Map([["top",Cn("erase","top","#f5a3b3",5)],["bottom",Cn("erase","bottom","#f5a3b3",5)]])}),O.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:Ha("pan","#ff0000",10),layerSettings:new Map([["top",Cn("pan","top","#ff0000",10)],["bottom",Cn("pan","bottom","#ff0000",10)]])}),O.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:Ha("magnify","#ff0000",10),layerSettings:new Map([["top",Cn("magnify","top","#ff0000",10)],["bottom",Cn("magnify","bottom","#ff0000",10)]])}),O};function K0(){const[M,le]=S.useState(null),[x,ae]=S.useState(null),[re,W]=S.useState("overlay"),[he,ee]=S.useState(50),[G,je]=S.useState(!1),[z,ue]=S.useState("none"),rn=S.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"26",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"26",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"26",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[]),pe=S.useCallback((a,s,u)=>{a==="trace"&&u?u==="top"?localStorage.setItem("defaultTopTraceSize",String(s)):localStorage.setItem("defaultBottomTraceSize",String(s)):a==="pad"&&u?u==="top"?localStorage.setItem("defaultTopPadSize",String(s)):localStorage.setItem("defaultBottomPadSize",String(s)):a==="component"&&u?u==="top"?localStorage.setItem("defaultTopComponentSize",String(s)):localStorage.setItem("defaultBottomComponentSize",String(s)):a==="via"?localStorage.setItem("defaultViaSize",String(s)):a==="power"?localStorage.setItem("defaultPowerSize",String(s)):a==="ground"?localStorage.setItem("defaultGroundSize",String(s)):a==="brush"&&localStorage.setItem("defaultBrushSize",String(s))},[]),Oe=S.useCallback((a,s,u)=>{a==="trace"&&u?u==="top"?localStorage.setItem("defaultTopTraceColor",s):localStorage.setItem("defaultBottomTraceColor",s):a==="pad"&&u?u==="top"?localStorage.setItem("defaultTopPadColor",s):localStorage.setItem("defaultBottomPadColor",s):a==="component"&&u?u==="top"?localStorage.setItem("defaultTopComponentColor",s):localStorage.setItem("defaultBottomComponentColor",s):a==="via"?localStorage.setItem("defaultViaColor",s):a==="brush"&&localStorage.setItem("defaultBrushColor",s)},[]),xt=rn(),[ke,Mt]=S.useState(xt.brushColor),[ye,ut]=S.useState(xt.brushSize),[nt,fe]=S.useState(xt.topTraceColor),[Te,kt]=S.useState(xt.bottomTraceColor),[se,ze]=S.useState(xt.topTraceSize),[Ae,be]=S.useState(xt.bottomTraceSize),[tt,St]=S.useState(xt.topPadColor),[Ft,X]=S.useState(xt.bottomPadColor),[ne,_e]=S.useState(xt.topPadSize),[ft,Et]=S.useState(xt.bottomPadSize),[C,$]=S.useState(xt.topComponentColor),[ce,me]=S.useState(xt.bottomComponentColor),[He,$e]=S.useState(xt.topComponentSize),[lt,wn]=S.useState(xt.bottomComponentSize),[Qt,da]=S.useState(!1),[Dt,kn]=S.useState(()=>Q0()),[Ee,Ct]=S.useState([]),[pa,po]=S.useState(!1),[Rt,Ln]=S.useState([]),[Yl,La]=S.useState(null),[Ve,zi]=S.useState(null),[yc,Zn]=S.useState(!1),[Ei,ji]=S.useState(null),[ol,ha]=S.useState("nudge"),[Wo,Ai]=S.useState(!1),[ea,gs]=S.useState(!1),[Ya,Dn]=S.useState(!1),[Ie,Ut]=S.useState("top"),[gc,Tr]=S.useState(!1),[mc,Po]=S.useState(!1),[Be,Xl]=S.useState(1),[Ge,Jn]=S.useState({x:0,y:0}),[ge,ho]=S.useState("trace"),ms=et.useRef(null),ta=et.useRef(ke),vl=et.useRef(ye),Jo=S.useCallback(a=>z==="draw"&&ge==="trace"?a.get("trace"):z==="draw"&&ge==="via"?a.get("via"):z==="draw"&&ge==="pad"?a.get("pad"):z==="component"?a.get("component"):z==="power"?a.get("power"):z==="ground"?a.get("ground"):null,[z,ge]);et.useEffect(()=>{kn(a=>{const s=Jo(a),u=s?.id||null,d=ms.current,g=new Map(a);if(d&&d!==u){const y=a.get(d);y&&(Pp(d,ta.current,vl.current),g.set(d,{...y,settings:{color:ta.current,size:vl.current}}))}if(s&&u!==d)if(z==="draw"&&ge==="trace"){const y=Wt||"top",f=y==="top"?nt:Te,h=y==="top"?se:Ae;Mt(f),ut(h),ta.current=f,vl.current=h,g.set("trace",{...s,settings:{color:f,size:h}})}else if(z==="draw"&&ge==="pad"){const y=Al||"top",f=y==="top"?tt:Ft,h=y==="top"?ne:ft;Mt(f),ut(h),ta.current=f,vl.current=h,g.set("pad",{...s,settings:{color:f,size:h}})}else if(z==="component"){const y=Ml||"top",f=y==="top"?C:ce,h=y==="top"?He:lt;Mt(f),ut(h),ta.current=f,vl.current=h,g.set("component",{...s,settings:{color:f,size:h}})}else{const y=s.settings;Mt(y.color),ut(y.size),ta.current=y.color,vl.current=y.size}return ms.current=u,g})},[z,ge,Jo,nt,Te,se,Ae,tt,Ft,ne,ft,C,ce,He,lt]),et.useEffect(()=>{kn(a=>{const s=Jo(a);if(s){Pp(s.id,ke,ye),z==="draw"&&ge==="trace"?(Wt||"top")==="top"?(fe(ke),ze(ye),Oe("trace",ke,"top"),pe("trace",ye,"top")):(kt(ke),be(ye),Oe("trace",ke,"bottom"),pe("trace",ye,"bottom")):z==="draw"&&ge==="pad"?(Al||"top")==="top"?(St(ke),_e(ye),Oe("pad",ke,"top"),pe("pad",ye,"top")):(X(ke),Et(ye),Oe("pad",ke,"bottom"),pe("pad",ye,"bottom")):z==="component"&&((Ml||"top")==="top"?($(ke),$e(ye),Oe("component",ke,"top"),pe("component",ye,"top")):(me(ke),wn(ye),Oe("component",ke,"bottom"),pe("component",ye,"bottom")));const u=new Map(a);return u.set(s.id,{...s,settings:{color:ke,size:ye}}),ta.current=ke,vl.current=ye,u}return a})},[ke,ye,z,ge,Jo,Oe,pe]),et.useEffect(()=>{z==="power"?(hi(!0),ko(null)):(hi(!1),ko(null))},[z]);const[xs,Mi]=S.useState(void 0),[,bs]=S.useState([]),[,ki]=S.useState([]),[il,ei]=S.useState(!1),[Tn,Vl]=S.useState(!1),[Nt,Yn]=S.useState(!1),[en,ti]=S.useState(!1),[Fe,vs]=S.useState(!1),[Rn,ya]=S.useState(!1),[Gt,ga]=S.useState(!1),[,Sl]=S.useState([]),[,Gl]=S.useState([]),[Xa,gn]=S.useState([]),[zr,xc]=S.useState([]),[ma,yo]=S.useState([]),[bc,vc]=S.useState([]),Xn=S.useRef(null),ni=S.useRef([]),Di=S.useRef(0),go=S.useRef(!1),[Xe,At]=S.useState([]),[at,zn]=S.useState([]),[qe,nn]=S.useState(new Set),[We,un]=S.useState(new Set),[Le,ln]=S.useState(new Set),[ve,En]=S.useState(null),[wt,na]=S.useState(null),[Cl,xa]=S.useState(null),[Ri,Ss]=S.useState(!1),[li,Ni]=S.useState(null),[el,ai]=S.useState(null),mo=S.useRef(null),wl=S.useRef(null),Oi=S.useRef(null),_i=S.useRef(null),Va=S.useRef(null),Ga=S.useRef(null),Cs=S.useRef(null),qa=S.useRef(null),xo=S.useRef(null),bo=S.useRef(null),Qn=S.useRef(!1),vo=S.useRef(0),ba=S.useRef(0),[tl,oi]=S.useState(!1),va=S.useRef(null),So=S.useRef(null),[Sa,Ia]=S.useState(!1),[la,Kn]=S.useState({width:960,height:600}),[$n,De]=S.useState(null),[Tl,Ca]=S.useState({visible:!1,size:6}),Co=S.useRef(null),[Za,sl]=S.useState({visible:!1,interval:5}),[Bi,wo]=S.useState({visible:!1,source:null}),[ws,Ts]=S.useState({visible:!1,text:""}),[zs,To]=S.useState({visible:!1,title:"",message:""}),[Es,ii]=S.useState({visible:!1}),Sc=S.useRef(null),[qt,si]=S.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Cc=S.useRef(null),[It,ci]=S.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),Ui=S.useRef(null),[cl,zl]=S.useState(!1),[Qa,Ka]=S.useState(1),[wa,Hi]=S.useState(null),[Ta,zo]=S.useState(""),Xt=S.useRef(null),ql=S.useRef(!1),js=S.useRef(!1),[Eo,rl]=S.useState(""),[ri,ui]=S.useState(null),[mn,Fn]=S.useState("pcb_project"),[Er,jo]=S.useState([]),[As,Ms]=S.useState(-1),Li=S.useRef(null),ks=S.useRef(null),$a=S.useRef(null),wc=S.useRef(null),[Yi,fi]=S.useState(!0),[di,Ao]=S.useState(!0),[Nn,Mo]=S.useState(!0),[Il,pi]=S.useState(!0),[El,Ds]=S.useState(!0),[za,Xi]=S.useState(!0),[Fa,Rs]=S.useState(!0),[aa,Ns]=S.useState(!0),[Ea,Os]=S.useState(!0),[Wa,Tc]=S.useState(!0),[Ye,Vn]=S.useState([]),[bt,ja]=S.useState([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}]),[zc,Vi]=S.useState(!1),[_s,hi]=S.useState(!1),[oa,ko]=S.useState(null),[ul,Gi]=S.useState(!0),[dt,On]=S.useState([]),jl=S.useCallback((a,s)=>{const u=Ye.find(g=>g.pointId===a);if(u){const g=s.find(f=>f.id===u.powerBusId);return`Via (${g?g.voltage:u.type||"Power Node"})`}const d=dt.find(g=>g.pointId===a);return d?`Via (${d.type||"Ground"})`:"Via (Signal)"},[Ye,dt]),Aa=S.useCallback((a,s)=>{const u=Ye.find(g=>g.pointId===a);if(u){const g=s.find(f=>f.id===u.powerBusId);return`Pad (${g?g.voltage:u.type||"Power Node"})`}const d=dt.find(g=>g.pointId===a);return d?`Pad (${d.type||"Ground"})`:"Pad (Signal)"},[Ye,dt]),[Wt,Zl]=S.useState("top"),[qi,Pa]=S.useState(!1),Bs=S.useRef(null),[Al,Ec]=S.useState("top"),[jc,Do]=S.useState(!1),Ac=S.useRef(null),[Ro,xn]=S.useState(!1),[No,jn]=S.useState(!1),[_n,yi]=S.useState(null),gi=S.useRef(null),Ja=S.useRef(null),[Ml,Ma]=S.useState("top"),[Mc,mi]=S.useState(null),[kl,kc]=S.useState(!1),[Se,fn]=S.useState(new Set),[fl,Us]=S.useState(!1),[ia,ka]=S.useState(null),[Ql,Ii]=S.useState(null),Zi=S.useCallback(async(a,s)=>{try{const u=await createImageBitmap(a),d=URL.createObjectURL(a),g=await new Promise((f,h)=>{const v=new FileReader;v.onload=()=>f(v.result),v.onerror=h,v.readAsDataURL(a)}),y={url:d,name:a.name,width:u.width,height:u.height,dataUrl:g,x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:u};s==="top"?le(y):ae(y)}catch(u){console.error("Failed to load image",u)}},[]),Dc=S.useCallback(a=>{a.stopPropagation(),a.preventDefault();const s=Xn.current;if(!s)return;const u=s.getBoundingClientRect(),d=s.width/u.width,g=s.height/u.height,y=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,h=typeof y=="number"?y:a.clientX-u.left,v=typeof f=="number"?f:a.clientY-u.top,m=h*d,k=v*g,B=m-40,te=k-40,Y=(B-Ge.x)/Be,V=(te-Ge.y)/Be;if(z==="select"){if(wt){let T=1/0,U=null,q=null;const Q=Math.max(6/Be,4),Ce=[...Xe,...at].find(de=>de.id===wt.componentId)?.layer||"top";for(const de of Ee)if((de.type==="via"||de.type==="pad")&&de.points.length>0){if(de.type==="pad"&&(de.layer||"top")!==Ce)continue;const Re=de.points[0],ot=Math.max(1,de.size/2),Zt=Math.hypot(Re.x-Y,Re.y-V),gt=Math.max(ot,Q);Zt<=gt&&Zt<T&&(T=Zt,U=Re.id??null,q=de)}if(q?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${q.id}`),console.log(`  Point ID: ${U}`),console.log(`  Point coordinates: x=${q.points[0].x.toFixed(2)}, y=${q.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${Y.toFixed(2)}, y=${V.toFixed(2)}`),console.log(`  Distance: ${T.toFixed(2)}`),console.log(`  Via size: ${q.size}, radius: ${Math.max(1,q.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${Y.toFixed(2)}, y=${V.toFixed(2)}`),console.log(`  Hit tolerance: ${Q.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${Ee.filter(de=>de.type==="via").length}`)),U!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${U} (type: ${typeof U})`);const de=String(U),Re=wt.pinIndex,ot=wt.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${Re} (Pin ${Re+1}) of component ${ot} to point ID ${de}`);const Zt=Xe.find(Me=>Me.id===ot),gt=at.find(Me=>Me.id===ot);Zt?(console.log("Component found in TOP layer"),At(Me=>{const st=Me.find(Ze=>Ze.id===ot);if(!st)return console.error(`Component ${ot} not found in TOP layer during update!`),Me;console.log("BEFORE update: pinConnections =",st.pinConnections);const vt=st.pinConnections||[],it=vt.length>0?[...vt]:new Array(st.pinCount).fill("");let mt;if(it.length!==st.pinCount){mt=new Array(st.pinCount).fill("");for(let Ze=0;Ze<Math.min(it.length,st.pinCount);Ze++)mt[Ze]=it[Ze]||""}else mt=[...it];mt[Re]=de,console.log(`Updating pin ${Re} with value: ${de}`),console.log("New pinConnections array:",mt);const tn=Me.map(Ze=>Ze.id===ot?{...Ze,pinConnections:mt}:Ze),Pt=tn.find(Ze=>Ze.id===ot);return console.log("AFTER update: pinConnections =",Pt?.pinConnections),console.log(`Pin ${Re} value: ${Pt?.pinConnections[Re]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),tn})):gt?(console.log("Component found in BOTTOM layer"),zn(Me=>{const st=Me.find(Ze=>Ze.id===ot);if(!st)return console.error(`Component ${ot} not found in BOTTOM layer during update!`),Me;console.log("BEFORE update: pinConnections =",st.pinConnections);const vt=st.pinConnections||[],it=vt.length>0?[...vt]:new Array(st.pinCount).fill("");let mt;if(it.length!==st.pinCount){mt=new Array(st.pinCount).fill("");for(let Ze=0;Ze<Math.min(it.length,st.pinCount);Ze++)mt[Ze]=it[Ze]||""}else mt=[...it];mt[Re]=de,console.log(`Updating pin ${Re} with value: ${de}`),console.log("New pinConnections array:",mt);const tn=Me.map(Ze=>Ze.id===ot?{...Ze,pinConnections:mt}:Ze),Pt=tn.find(Ze=>Ze.id===ot);return console.log("AFTER update: pinConnections =",Pt?.pinConnections),console.log(`Pin ${Re} value: ${Pt?.pinConnections[Re]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),tn})):(console.error(`Component ${ot} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",Xe.map(Me=>Me.id)),console.log("Available BOTTOM components:",at.map(Me=>Me.id))),setTimeout(()=>{na(null)},0);return}else na(null)}const L=10,N=(()=>{for(const T of Xe)if(Y>=T.x-L&&Y<=T.x+L&&V>=T.y-L&&V<=T.y+L)return{layer:"top",comp:T};for(const T of at)if(Y>=T.x-L&&Y<=T.x+L&&V>=T.y-L&&V<=T.y+L)return{layer:"bottom",comp:T};return null})();if(N){const{comp:T}=N;a.shiftKey?nn(U=>{const q=new Set(U);return q.has(T.id)?q.delete(T.id):q.add(T.id),q}):(nn(new Set([T.id])),fn(new Set),un(new Set),ln(new Set));return}const P=Math.max(6/Be,4);let J=null;for(const T of Ye){const U=Math.max(6,T.size/2),q=U*.8,Q=U+q,ie=Math.hypot(T.x-Y,T.y-V),Ce=Math.abs(Y-T.x)<=P&&Math.abs(V-T.y)<=Q,de=Math.abs(V-T.y)<=P&&Math.abs(Y-T.x)<=Q;if(ie<=Math.max(U,P)||Ce||de){J=T;break}}if(J){a.shiftKey?un(T=>{const U=new Set(T);return U.has(J.id)?U.delete(J.id):U.add(J.id),U}):un(new Set([J.id])),fn(new Set),nn(new Set),ln(new Set);return}let A=null;for(const T of dt){const U=Math.max(6,(T.size||18)/2),q=U*.8,Q=U+q,ie=Math.hypot(T.x-Y,T.y-V),Ce=Math.abs(Y-T.x)<=P&&Math.abs(V-T.y)<=Q,de=Math.abs(V-T.y)<=P&&Math.abs(Y-T.x)<=Q;if(ie<=Math.max(U,P)||Ce||de){A=T;break}}if(A){a.shiftKey?ln(T=>{const U=new Set(T);return U.has(A.id)?U.delete(A.id):U.add(A.id),U}):(ln(new Set([A.id])),fn(new Set),nn(new Set),un(new Set));return}const j=Math.max(6/Be,4);let Z=null;for(const T of Ee)if((T.type==="via"||T.type==="pad")&&T.points.length>0){if(!Nn)continue;const U=T.points[0],q=Math.max(1,T.size/2);if(Math.hypot(U.x-Y,U.y-V)<=Math.max(q,j)){Z=T;break}}Z||a.shiftKey||(fn(new Set),nn(new Set),un(new Set),ln(new Set)),Us(!0),ka({x:Y,y:V,shiftKey:a.shiftKey}),Ii({x:Y,y:V,width:0,height:0});return}else if(z==="magnify"){const L=a.shiftKey?.5:2,N=Math.max(.25,Math.min(8,Be*L)),P=B-N*Y,J=te-N*V;Xl(N),Jn({x:P,y:J});return}else if(z==="pan"){va.current={startCX:B,startCY:te,panX:Ge.x,panY:Ge.y},So.current={startClientX:a.clientX,startClientY:a.clientY,panX:Ge.x,panY:Ge.y},oi(!0);return}else if(z==="draw"){const L=(J,A)=>{let j=1/0,Z=null;const T=15;for(const Q of Ee)if(Q.type==="via"){const ie=Q.points[0],Ce=Math.hypot(ie.x-J,ie.y-A);Ce<=T&&Ce<j&&(j=Ce,Z=ie)}else if(Q.type==="pad"){const ie=Q.points[0],Ce=Math.hypot(ie.x-J,ie.y-A);Ce<=T&&Ce<j&&(j=Ce,Z=ie)}for(const Q of Ye)if(Q.pointId!==void 0){const ie=Math.hypot(Q.x-J,Q.y-A);ie<=T&&ie<j&&(j=ie,Z={x:Q.x,y:Q.y,id:Q.pointId})}for(const Q of dt)if(Q.pointId!==void 0){const ie=Math.hypot(Q.x-J,Q.y-A);ie<=T&&ie<j&&(j=ie,Z={x:Q.x,y:Q.y,id:Q.pointId})}const q=$t(Z??{x:J,y:A});return{x:q.x,y:q.y,nodeId:Z?.id}};if(ge==="via"){const J=Dt.get("via"),A=localStorage.getItem("tool_via_color"),j=localStorage.getItem("tool_via_size"),Z=A||J?.settings.color||Cr,T=j?parseInt(j,10):J?.settings.size||Ti.DEFAULT_SIZE,U=$t({x:Y,y:V}),q={id:Ll(),x:U.x,y:U.y},Q={id:`${Date.now()}-via`,points:[q],color:Z,size:T,layer:Ie,type:"via",viaType:"Via (Signal)"};Ct(ie=>[...ie,Q]),Ie==="top"?bs(ie=>[...ie,Q.id]):ki(ie=>[...ie,Q.id]);return}if(ge==="pad"){if(!Al)return;const J=Al==="top"?tt:Ft,A=Al==="top"?ne:ft,j=$t({x:Y,y:V}),Z={id:Ll(),x:j.x,y:j.y},T={id:`${Date.now()}-pad`,points:[Z],color:J,size:A,layer:Al,type:"pad",padType:"Pad (Signal)"};Ct(U=>[...U,T]);return}if(go.current)return;const N=ge==="trace"&&!kl?L(Y,V):{x:$t({x:Y,y:V}).x,y:$t({x:Y,y:V}).y},P=N.nodeId!==void 0?{id:N.nodeId,x:N.x,y:N.y}:{x:N.x,y:N.y};Ln(J=>J.length===0?[P]:[...J,P]),Di.current=Date.now(),La(null),po(!1),Po(!1)}else if(z==="erase"){if(Ee.some(N=>N.layer===Ie&&(N.type==="via"&&Tn||N.type==="pad"&&Nt||N.type==="trace"&&en))){const N=[];Tn&&Ee.some(P=>P.layer===Ie&&P.type==="via")&&N.push("vias"),Nt&&Ee.some(P=>P.layer===Ie&&P.type==="pad")&&N.push("pads"),en&&Ee.some(P=>P.layer===Ie&&P.type==="trace")&&N.push("traces"),N.length>0&&alert(`Cannot erase: ${N.join(", ")} are locked on the ${Ie} layer. Unlock them to erase.`)}po(!0),Ln([{id:Ll(),x:Y,y:V}]),console.log("Starting erase at:",Y,V,"selectedDrawingLayer:",Ie,"total strokes:",Ee.length)}else if(z==="transform"&&Ve){if(il){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}Zn(!0),ji({x:Y,y:V})}else if(z==="component"){if(!_n)return;const L=$t({x:Y,y:V}),N=Ml==="top"?C:ce,P=Ml==="top"?He:lt,J=Y0(_n,Ml,L.x,L.y,N,P);J.abbreviation=ys(_n),Ml==="top"?(Ns(!0),At(A=>[...A,J])):(Os(!0),zn(A=>[...A,J]));return}else if(z==="power"){if(!oa)return;const N=kl?{x:$t({x:Y,y:V}).x,y:$t({x:Y,y:V}).y}:((J,A)=>{let j=1/0,Z=null;const T=15;for(const Q of Ee)if(Q.type==="via"||Q.type==="pad"){const ie=Q.points[0],Ce=Math.hypot(ie.x-J,ie.y-A);Ce<=T&&Ce<j&&(j=Ce,Z=ie)}else if(Q.type==="trace")for(const ie of Q.points){const Ce=Math.hypot(ie.x-J,ie.y-A);Ce<=T&&Ce<j&&(j=Ce,Z=ie)}const q=$t(Z??{x:J,y:A});return{x:q.x,y:q.y,nodeId:Z?.id}})(Y,V),P=bt.find(J=>J.id===oa);if(P){const J=N.nodeId??Ll(),A=`${P.voltage} Power Node`;if(dt.find(T=>T.pointId===J)){To({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${J}). Power and ground nodes cannot share the same Node ID.`});return}const Z={id:`power-${Date.now()}-${Math.random()}`,x:N.x,y:N.y,color:"#ff0000",size:ye,powerBusId:P.id,layer:Ie,type:A,pointId:J};if(Vn(T=>[...T,Z]),N.nodeId!==void 0){const T=jl(N.nodeId,bt),U=Aa(N.nodeId,bt);Ct(q=>q.map(Q=>Q.type==="via"&&Q.points.length>0&&Q.points[0].id===N.nodeId?{...Q,viaType:T}:Q.type==="pad"&&Q.points.length>0&&Q.points[0].id===N.nodeId?{...Q,padType:U}:Q))}}return}else if(z==="ground"){const N=kl?{x:$t({x:Y,y:V}).x,y:$t({x:Y,y:V}).y}:((Z,T)=>{let U=1/0,q=null;const Q=15;for(const de of Ee)if(de.type==="via"||de.type==="pad"){const Re=de.points[0],ot=Math.hypot(Re.x-Z,Re.y-T);ot<=Q&&ot<U&&(U=ot,q=Re)}else if(de.type==="trace")for(const Re of de.points){const ot=Math.hypot(Re.x-Z,Re.y-T);ot<=Q&&ot<U&&(U=ot,q=Re)}const Ce=$t(q??{x:Z,y:T});return{x:Ce.x,y:Ce.y,nodeId:q?.id}})(Y,V),P=N.nodeId??Ll(),J="Ground",A=Ye.find(Z=>Z.pointId===P);if(A){To({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${A.type||"Power Node"}) already exists at this Node ID (${P}). Power and ground nodes cannot share the same Node ID.`});return}const j={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:N.x,y:N.y,color:"#000000",size:Dt.get("ground")?.settings.size||18,type:J,pointId:P};if(On(Z=>[...Z,j]),N.nodeId!==void 0){const Z=jl(N.nodeId,bt),T=Aa(N.nodeId,bt);Ct(U=>U.map(q=>q.type==="via"&&q.points.length>0&&q.points[0].id===N.nodeId?{...q,viaType:Z}:q.type==="pad"&&q.points.length>0&&q.points[0].id===N.nodeId?{...q,padType:T}:q))}return}},[z,Ve,ye,ke,ge,Ie,Ee,Be,Ge.x,Ge.y,kl,oa,bt,_n,Dt,Al,Wt,Ye,dt,jl,Aa,Nn]),dl=S.useCallback(a=>{if(z!=="magnify")return;a.preventDefault();const s=Xn.current;if(!s)return;const u=s.getBoundingClientRect(),d=s.width/u.width,g=s.height/u.height,y=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,h=typeof y=="number"?y:a.clientX-u.left,v=typeof f=="number"?f:a.clientY-u.top,m=h*d,k=v*g,B=(m-40-Ge.x)/Be,te=(k-40-Ge.y)/Be,Y=1.2,V=1/Y,L=a.deltaY<0?Y:V,N=Math.max(.25,Math.min(8,Be*L)),P=m-40-N*B,J=k-40-N*te;Xl(N),Jn({x:P,y:J})},[z,Be,Ge.x,Ge.y]),Oo=S.useCallback(a=>{if(z==="draw"&&ge==="trace"){go.current=!0;let s=Rt;if(s.length>1){const u=[s[0]];for(let d=1;d<s.length;d++){const g=u[u.length-1],y=s[d];(Math.abs(g.x-y.x)>.001||Math.abs(g.y-y.y)>.001)&&u.push(y)}s=u}if(s.length>=1){const u=Wt||"top",d=u==="top"?nt:Te,g=u==="top"?se:Ae,y={id:`${Date.now()}-trace`,points:s,color:d,size:g,layer:u,type:"trace"};Ct(f=>[...f,y]),u==="top"?Sl(f=>[...f,y.id]):Gl(f=>[...f,y.id]),Ln([]),La(null),setTimeout(()=>{go.current=!1},300);return}}if(z==="select"||z==="component"){const s=Xn.current;if(!s)return;const u=s.getBoundingClientRect(),d=s.width/u.width,g=s.height/u.height,y=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,h=typeof y=="number"?y:a.clientX-u.left,v=typeof f=="number"?f:a.clientY-u.top,m=h*d,k=v*g,B=m-40,te=k-40,Y=(B-Ge.x)/Be,V=(te-Ge.y)/Be,L=10,N=(()=>{for(const A of Xe)if(Y>=A.x-L&&Y<=A.x+L&&V>=A.y-L&&V<=A.y+L)return{layer:"top",comp:A};for(const A of at)if(Y>=A.x-L&&Y<=A.x+L&&V>=A.y-L&&V<=A.y+L)return{layer:"bottom",comp:A};return null})(),P=Math.max(6/Be,4);let J=null;for(const A of Ye){const j=Math.max(6,A.size/2),Z=j*.8,T=j+Z,U=Math.hypot(A.x-Y,A.y-V),q=Math.abs(Y-A.x)<=P&&Math.abs(V-A.y)<=T,Q=Math.abs(V-A.y)<=P&&Math.abs(Y-A.x)<=T;if(U<=Math.max(j,P)||q||Q){J=A;break}}if(J){un(new Set([J.id])),ai({visible:!0,id:J.id,layer:J.layer,x:J.x,y:J.y,size:J.size,color:J.color,powerBusId:J.powerBusId});return}if(N){const{layer:A,comp:j}=N;nn(new Set([j.id]));let Z="abbreviation"in j&&j.abbreviation?String(j.abbreviation):"";(!Z||Z.trim()===""||Z==="****"||Z==="*")&&(Z=ys(j.componentType)),En({visible:!0,layer:A,id:j.id,designator:j.designator||j.componentType||"",abbreviation:Z,manufacturer:"manufacturer"in j&&j.manufacturer||"",partNumber:"partNumber"in j&&j.partNumber||"",pinCount:j.pinCount,x:j.x,y:j.y})}}},[z,ge,ke,ye,Ie,Xe,at,Ye,Be,Ge.x,Ge.y,_n,Ro,kl,Ee,Ve,tl,Mc,wt,Dt,Rt,Wt,nt,Te,se,Ae]),sa=S.useCallback(()=>{const a=ni.current;if(z==="draw"&&ge==="trace"&&a.length>=2){let s=[a[0]];for(let f=1;f<a.length;f++){const h=s[s.length-1],v=a[f];(Math.abs(h.x-v.x)>.001||Math.abs(h.y-v.y)>.001)&&s.push(v)}const u=Wt||"top",d=u==="top"?nt:Te,g=u==="top"?se:Ae,y={id:`${Date.now()}-trace`,points:s,color:d,size:g,layer:u,type:"trace"};Ct(f=>[...f,y]),u==="top"?Sl(f=>[...f,y.id]):Gl(f=>[...f,y.id]),Ln([]),La(null)}else if(z==="draw"&&ge==="trace"&&a.length===1){const s=Wt||"top",u=s==="top"?nt:Te,d=s==="top"?se:Ae,g={id:`${Date.now()}-trace-dot`,points:a,color:u,size:d,layer:s,type:"trace"};Ct(y=>[...y,g]),s==="top"?Sl(y=>[...y,g.id]):Gl(y=>[...y,g.id]),Ln([])}},[z,ge,Wt,nt,Te,se,Ae,Ct]),xi=S.useCallback((a,s,u)=>{const d=s-a.x,g=u-a.y;if(d===0&&g===0)return{x:s,y:u};const f=(Math.atan2(g,d)*180/Math.PI%180+180)%180,h=[0,45,90];let v=0,m=1e9;for(const k of h){const B=Math.abs(f-k);B<m&&(m=B,v=k)}if(v===0)return{x:s,y:a.y};if(v===90)return{x:a.x,y:u};{const k=Math.min(Math.abs(d),Math.abs(g)),B=d>=0?1:-1,te=g>=0?1:-1;return{x:a.x+B*k,y:a.y+te*k}}},[]),bi=S.useCallback(a=>{const s=Xn.current?.getBoundingClientRect();if(!s)return;const u=a.clientX-s.left,d=a.clientY-s.top,g=Xn.current,y=g.width/s.width,f=g.height/s.height,h=u*y,v=d*f,m=h-40,k=v-40,B=(m-Ge.x)/Be,te=(k-Ge.y)/Be;if(z==="draw"&&ge==="trace"&&Rt.length>0){const V=kl?{x:$t({x:B,y:te}).x,y:$t({x:B,y:te}).y}:((L,N)=>{let P=1/0,J=null;const A=15;for(const T of Ee)if(T.type==="via"){const U=T.points[0],q=Math.hypot(U.x-L,U.y-N);q<=A&&q<P&&(P=q,J=U)}else if(T.type==="pad"){const U=T.points[0],q=Math.hypot(U.x-L,U.y-N);q<=A&&q<P&&(P=q,J=U)}for(const T of Ye)if(T.pointId!==void 0){const U=Math.hypot(T.x-L,T.y-N);U<=A&&U<P&&(P=U,J={x:T.x,y:T.y,id:T.pointId})}for(const T of dt)if(T.pointId!==void 0){const U=Math.hypot(T.x-L,T.y-N);U<=A&&U<P&&(P=U,J={x:T.x,y:T.y,id:T.pointId})}const Z=$t(J??{x:L,y:N});return{x:Z.x,y:Z.y,nodeId:J?.id}})(B,te);La({x:V.x,y:V.y})}else La(null);if(z==="select"&&fl&&ia){const Y=ia.x,V=ia.y;Ii({x:Math.min(Y,B),y:Math.min(V,te),width:Math.abs(B-Y),height:Math.abs(te-V)})}else if(z==="pan"&&tl&&va.current){const{startCX:Y,startCY:V,panX:L,panY:N}=va.current,P=m-Y,J=k-V;Jn({x:L+P,y:N+J})}else if(pa&&Rt.length>0)if(z==="draw")if(mc){const Y=Rt[0],V=xi(Y,B,te),L=$t(V),N={id:Ll(),x:L.x,y:L.y};Ln([Y,N])}else{const Y=$t({x:B,y:te});Ln(V=>[...V,{id:Ll(),x:Y.x,y:Y.y}])}else z==="erase"&&(Ln(Y=>[...Y,{id:Ll(),x:B,y:te}]),Ct(Y=>{const V=Y.filter(N=>{if(N.type==="via"&&Tn||N.type==="pad"&&Nt||N.type==="trace"&&en||N.layer!==Ie)return!0;const P=ye/2,J=B-P,A=B+P,j=te-P,Z=te+P,T=(Q,ie)=>Q>=J&&Q<=A&&ie>=j&&ie<=Z,U=(Q,ie,Ce,de)=>{const st=(pt,on)=>{let pn=0;return pt<J?pn|=1:pt>A&&(pn|=2),on<j?pn|=4:on>Z&&(pn|=8),pn};let vt=Q,it=ie,mt=Ce,tn=de,Pt=st(vt,it),Ze=st(mt,tn);for(;;){if((Pt|Ze)===0)return!0;if((Pt&Ze)!==0)return!1;const pt=Pt!==0?Pt:Ze;let on=0,pn=0;pt&8?(on=vt+(mt-vt)*(Z-it)/(tn-it),pn=Z):pt&4?(on=vt+(mt-vt)*(j-it)/(tn-it),pn=j):pt&2?(pn=it+(tn-it)*(A-vt)/(mt-vt),on=A):(pn=it+(tn-it)*(J-vt)/(mt-vt),on=J),pt===Pt?(vt=on,it=pn,Pt=st(vt,it)):(mt=on,tn=pn,Ze=st(mt,tn))}};let q=!1;if(N.points.length===1){const Q=N.points[0];q=T(Q.x,Q.y)}else for(let Q=0;Q<N.points.length-1;Q++){const ie=N.points[Q],Ce=N.points[Q+1];if(U(ie.x,ie.y,Ce.x,Ce.y)){q=!0;break}}return q&&console.log("Erasing stroke at position:",B,te,"brushSize:",ye,"selectedLayer:",Ie),!q});console.log("Strokes before:",Y.length,"after:",V.length);const L=new Set(V.map(N=>N.id));return bs(N=>N.filter(P=>L.has(P))),ki(N=>N.filter(P=>L.has(P))),Sl(N=>N.filter(P=>L.has(P))),Gl(N=>N.filter(P=>L.has(P))),V}),Gt||Vn(Y=>{const V=ye/2,L=B-V,N=B+V,P=te-V,J=te+V,A=j=>{const Z=j.size/2,T=j.x-Z,U=j.x+Z,q=j.y-Z,Q=j.y+Z;return!(N<T||L>U||J<q||P>Q)};return Y.filter(j=>!A(j))}),Rn||On(Y=>{const V=ye/2,L=B-V,N=B+V,P=te-V,J=te+V,A=Z=>{const T=Math.max(6,(Z.size||18)/2),U=T*.8,q=T+U,Q=Z.x-q,ie=Z.x+q,Ce=Z.y-q,de=Z.y+q;return!(N<Q||L>ie||J<Ce||P>de)};return Y.filter(Z=>!A(Z))}));else if(yc&&Ei&&Ve){if(il){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}const Y=B-Ei.x,V=te-Ei.y;Ve==="top"&&M?le(L=>L?{...L,x:L.x+Y,y:L.y+V}:null):Ve==="bottom"&&x?ae(L=>L?{...L,x:L.x+Y,y:L.y+V}:null):Ve==="both"&&(M&&le(L=>L?{...L,x:L.x+Y,y:L.y+V}:null),x&&ae(L=>L?{...L,x:L.x+Y,y:L.y+V}:null)),ji({x:B,y:te})}},[pa,Rt,z,ye,yc,Ei,Ve,M,x,mc,xi,Ie,Ct,Be,Ge.x,Ge.y,fl,ia,il,Tn,Nt,en,Gt,Rn]),nl=S.useCallback(()=>{if(z==="select"&&fl){const a=Ql,s=ia;if(Us(!1),ka(null),Ii(null),a&&s){const u=a.width<3&&a.height<3,d=(A,j)=>{const Z=a.x,T=a.y,U=a.x+a.width,q=a.y+a.height;return A>=Z&&A<=U&&j>=T&&j<=q},g=(A,j,Z,T,U,q,Q,ie)=>{const gt=(Pt,Ze)=>{let pt=0;return Pt<U?pt|=1:Pt>Q&&(pt|=2),Ze<q?pt|=4:Ze>ie&&(pt|=8),pt};let Me=A,st=j,vt=Z,it=T,mt=gt(Me,st),tn=gt(vt,it);for(;;){if((mt|tn)===0)return!0;if((mt&tn)!==0)return!1;const Pt=mt!==0?mt:tn;let Ze=0,pt=0;Pt&8?(Ze=Me+(vt-Me)*(ie-st)/(it-st),pt=ie):Pt&4?(Ze=Me+(vt-Me)*(q-st)/(it-st),pt=q):Pt&2?(pt=st+(it-st)*(Q-Me)/(vt-Me),Ze=Q):(pt=st+(it-st)*(U-Me)/(vt-Me),Ze=U),Pt===mt?(Me=Ze,st=pt,mt=gt(Me,st)):(vt=Ze,it=pt,tn=gt(vt,it))}},y=a.x,f=a.y,h=a.x+a.width,v=a.y+a.height,m=Math.max(6/Be,4),k=(A,j,Z,T,U,q)=>{const Q=U-Z,ie=q-T;if(Q===0&&ie===0)return Math.hypot(A-Z,j-T);const Ce=Math.max(0,Math.min(1,((A-Z)*Q+(j-T)*ie)/(Q*Q+ie*ie))),de=Z+Ce*Q,Re=T+Ce*ie;return Math.hypot(A-de,j-Re)},B=s?.shiftKey===!0,te=new Set(B?Array.from(Se):[]),Y=new Set(B?Array.from(qe):[]),V=new Set(B?Array.from(We):[]),L=new Set(B?Array.from(Le):[]);if(u){let A=null;for(const j of Ee){let Z=!1;if(j.type==="via"||j.type==="pad"?Z=Nn:Z=j.layer==="top"?Il:El,!Z)continue;let T=1/0;if(j.type==="via"||j.type==="pad"){const U=j.points[0],q=Math.max(1,j.size/2);T=Math.hypot(U.x-s.x,U.y-s.y),T<=Math.max(q,m)&&(!A||T<A.dist)&&(A={id:j.id,dist:T})}else for(let U=0;U<j.points.length-1;U++){const q=j.points[U],Q=j.points[U+1],ie=k(s.x,s.y,q.x,q.y,Q.x,Q.y);if(ie<=Math.max(m,j.size/2)){(!A||ie<A.dist)&&(A={id:j.id,dist:ie});break}}}A&&te.add(A.id)}else for(const A of Ee){let j=!1;if(A.type==="via"||A.type==="pad"?j=Nn:j=A.layer==="top"?Il:El,!j)continue;let Z=!1;if(A.type==="via"||A.type==="pad"){const T=A.points[0];Z=d(T.x,T.y)}else for(let T=0;T<A.points.length-1;T++){const U=A.points[T],q=A.points[T+1];if(g(U.x,U.y,q.x,q.y,y,f,h,v)||d(U.x,U.y)&&d(q.x,q.y)){Z=!0;break}}Z&&te.add(A.id)}const N=A=>{const Z=Math.max(10,A.size||18)/2;return A.x-Z<=h&&A.x+Z>=y&&A.y-Z<=v&&A.y+Z>=f};if(u){const A=j=>{const T=Math.max(10,j.size||18)/2;return s.x>=j.x-T&&s.x<=j.x+T&&s.y>=j.y-T&&s.y<=j.y+T};aa&&Xe.forEach(j=>{A(j)&&Y.add(j.id)}),Ea&&at.forEach(j=>{A(j)&&Y.add(j.id)})}else aa&&Xe.forEach(A=>{N(A)&&Y.add(A.id)}),Ea&&at.forEach(A=>{N(A)&&Y.add(A.id)});const P=A=>{const j=Math.max(6,A.size/2),Z=j*.8,T=j+Z;return A.x-T<=h&&A.x+T>=y&&A.y-T<=v&&A.y+T>=f};if(Wa)if(u){let A=null;for(const j of Ye){const Z=Math.max(6,j.size/2),T=Z*.8,U=Z+T,q=Math.hypot(j.x-s.x,j.y-s.y),Q=Math.abs(s.x-j.x)<=m&&Math.abs(s.y-j.y)<=U,ie=Math.abs(s.y-j.y)<=m&&Math.abs(s.x-j.x)<=U;if(q<=Math.max(Z,m)||Q||ie){const de=Math.min(q,Math.abs(s.x-j.x)+Math.abs(s.y-j.y));(!A||de<A.dist)&&(A={id:j.id,dist:de})}}A&&V.add(A.id)}else Ye.forEach(A=>{P(A)&&V.add(A.id)});const J=A=>{const j=Math.max(6,(A.size||18)/2),Z=j*.8,T=j+Z;return A.x-T<=h&&A.x+T>=y&&A.y-T<=v&&A.y+T>=f};if(ul)if(u){let A=null;for(const j of dt){const Z=Math.max(6,(j.size||18)/2),T=Z*.8,U=Z+T,q=Math.hypot(j.x-s.x,j.y-s.y),Q=Math.abs(s.x-j.x)<=m&&Math.abs(s.y-j.y)<=U,ie=Math.abs(s.y-j.y)<=m&&Math.abs(s.x-j.x)<=U;if(q<=Math.max(Z,m)||Q||ie){const de=Math.min(q,Math.abs(s.x-j.x)+Math.abs(s.y-j.y));(!A||de<A.dist)&&(A={id:j.id,dist:de})}}A&&L.add(A.id)}else dt.forEach(A=>{J(A)&&L.add(A.id)});fn(te),nn(Y),un(V),ln(L)}}if(pa&&Rt.length>0){if(z==="draw"&&ge!=="trace"){const a={id:Date.now().toString(),points:Rt,color:ke,size:ye,layer:Ie,type:"trace"};Ct(s=>[...s,a]),Ie==="top"?Sl(s=>[...s,a.id]):Gl(s=>[...s,a.id])}Ln([])}tl&&(oi(!1),va.current=null,So.current=null),po(!1),Zn(!1),ji(null),Po(!1)},[pa,Rt,z,ke,ye,Ie,Ql,ia,fl,Ee,Be,Sa,Se,Ye,dt,Xe,at,qe,We,Le,Nn,Il,El,aa,Ea,Wa,ul]);et.useEffect(()=>{if(!(z==="pan"&&tl&&So.current))return;const a=u=>{const d=Xn.current;if(!d)return;const g=d.getBoundingClientRect(),y=d.width/g.width,f=d.height/g.height,{startClientX:h,startClientY:v,panX:m,panY:k}=So.current,B=(u.clientX-h)*y,te=(u.clientY-v)*f;Jn({x:m+B,y:k+te})},s=()=>{oi(!1),va.current=null,So.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",s,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",s,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",s,!0)}},[z,tl]);const Bn=S.useCallback(()=>{const a=Xn.current;if(!a)return;const s=a.getContext("2d");if(!s)return;s.clearRect(0,0,a.width,a.height),s.save(),s.beginPath(),s.rect(40,40,a.width-80,a.height-80),s.clip(),s.translate(40,40),s.translate(Ge.x,Ge.y),s.scale(Be,Be);const u=(f,h)=>{const v=f.width,m=f.height,k=document.createElement("canvas");k.width=v,k.height=m;const B=k.getContext("2d");if(!B)return k;B.drawImage(f,0,0,v,m);const Y=B.getImageData(0,0,v,m).data,V=new Uint8ClampedArray(v*m);for(let T=0;T<v*m;T++){const U=Y[T*4+0],q=Y[T*4+1],Q=Y[T*4+2];V[T]=Math.round(.299*U+.587*q+.114*Q)}const L=[-1,0,1,-2,0,2,-1,0,1],N=[-1,-2,-1,0,0,0,1,2,1],P=new Float32Array(v*m);for(let T=1;T<m-1;T++)for(let U=1;U<v-1;U++){let q=0,Q=0,ie=0;for(let de=-1;de<=1;de++)for(let Re=-1;Re<=1;Re++){const ot=U+Re,Zt=T+de,gt=V[Zt*v+ot];q+=gt*L[ie],Q+=gt*N[ie],ie++}const Ce=Math.sqrt(q*q+Q*Q);P[T*v+U]=Ce}let J=0;for(let T=0;T<P.length;T++)P[T]>J&&(J=P[T]);const A=B.createImageData(v,m),j=A.data,Z=.2;for(let T=0;T<v*m;T++){const q=(J>0?P[T]/J:0)>=Z?255:0,Q=h?255-q:q;j[T*4+0]=Q,j[T*4+1]=Q,j[T*4+2]=Q,j[T*4+3]=255}return B.putImageData(A,0,0),k},d=(f,h,v,m,k,B,te,Y)=>{const V=document.createElement("canvas");V.width=v,V.height=m;const L=V.getContext("2d",{willReadFrequently:!0});L.clearRect(0,0,v,m),L.drawImage(h,0,0,v,m);let N=V;if(Math.abs(k)>1e-6){const P=Math.tan(k),J=Math.max(.2,1-P),A=Math.max(.2,1+P),j=Math.max(J,A),Z=Math.max(1,Math.ceil(v*j)),T=document.createElement("canvas");T.width=Z,T.height=m;const U=T.getContext("2d",{willReadFrequently:!0});U.clearRect(0,0,Z,m);for(let q=0;q<m;q++){const Q=m<=1?0:q/(m-1),ie=J*(1-Q)+A*Q,Ce=Math.max(1,v*ie),de=(Z-Ce)/2;U.drawImage(N,0,q,v,1,de,q,Ce,1)}N=T}if(Math.abs(B)>1e-6){const P=Math.tan(B),J=Math.max(.2,1-P),A=Math.max(.2,1+P),j=Math.max(J,A),Z=Math.max(1,Math.ceil(m*j)),T=document.createElement("canvas");T.width=N.width,T.height=Z;const U=T.getContext("2d",{willReadFrequently:!0});U.clearRect(0,0,T.width,Z);for(let q=0;q<N.width;q++){const Q=N.width<=1?0:q/(N.width-1),ie=J*(1-Q)+A*Q,Ce=Math.max(1,m*ie),de=(Z-Ce)/2;U.drawImage(N,q,0,1,N.height,q,de,1,Ce)}N=T}f.drawImage(N,-te/2,-Y/2,te,Y)},g=Yi&&di;if(M&&M.bitmap&&Yi){const f=M.bitmap;s.save(),s.globalAlpha=1,Wo&&!ea?s.filter="grayscale(100%)":s.filter="none";const h=a.width-80,v=a.height-80,m=h/2,k=v/2;if(s.translate(m+M.x,k+M.y),s.rotate(M.rotation*Math.PI/180),M.skewX||M.skewY){const V=Math.tan(M.skewX||0),L=Math.tan(M.skewY||0);s.transform(1,L,V,1,0,0)}s.scale(M.scale*(M.flipX?-1:1),M.scale*(M.flipY?-1:1));const B=f.width*1,te=f.height*1,Y=ea?u(f,Ya):f;M.keystoneV&&Math.abs(M.keystoneV)>1e-6||M.keystoneH&&Math.abs(M.keystoneH)>1e-6?d(s,Y,f.width,f.height,M.keystoneV||0,M.keystoneH||0,B,te):s.drawImage(Y,-B/2,-te/2,B,te),s.restore()}if(x&&x.bitmap&&di){const f=x.bitmap;s.save(),s.globalAlpha=g?he/100:1,Wo&&!ea?s.filter="grayscale(100%)":s.filter="none";const h=a.width-80,v=a.height-80,m=h/2,k=v/2;if(s.translate(m+x.x,k+x.y),s.rotate(x.rotation*Math.PI/180),x.skewX||x.skewY){const V=Math.tan(x.skewX||0),L=Math.tan(x.skewY||0);s.transform(1,L,V,1,0,0)}s.scale(x.scale*(x.flipX?-1:1),x.scale*(x.flipY?-1:1));const B=f.width*1,te=f.height*1,Y=ea?u(f,Ya):f;x.keystoneV&&Math.abs(x.keystoneV)>1e-6||x.keystoneH&&Math.abs(x.keystoneH)>1e-6?d(s,Y,f.width,f.height,x.keystoneV||0,x.keystoneH||0,B,te):s.drawImage(Y,-B/2,-te/2,B,te),s.restore()}if(Da(s),Wa&&Ye.length>0){const f=h=>{s.save();const v=bt.find(Y=>Y.id===h.powerBusId),m=We.has(h.id),k="#ff0000";s.strokeStyle=k,s.lineWidth=Math.max(1,(m?3:2)/Math.max(Be,.001)),s.lineCap="round";const B=Math.max(6,h.size/2),te=B*.8;m&&(s.strokeStyle="#0066ff",s.lineWidth=Math.max(1,4/Math.max(Be,.001)),s.beginPath(),s.arc(h.x,h.y,B+te+3,0,Math.PI*2),s.stroke()),s.strokeStyle=k,s.lineWidth=Math.max(1,(m?3:2)/Math.max(Be,.001)),s.beginPath(),s.arc(h.x,h.y,B,0,Math.PI*2),s.stroke(),s.beginPath(),s.moveTo(h.x,h.y-B-te),s.lineTo(h.x,h.y+B+te),s.stroke(),s.beginPath(),s.moveTo(h.x-B-te,h.y),s.lineTo(h.x+B+te,h.y),s.stroke(),v&&(s.fillStyle=k,s.font=`${Math.max(10,B*.8)}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(v.voltage,h.x,h.y+B+te+12)),s.restore()};Ye.forEach(f)}if(ul&&dt.length>0){const f=h=>{s.save();const v=Le.has(h.id),m="#000000";s.strokeStyle=m,s.lineWidth=Math.max(1,(v?3:2)/Math.max(Be,.001)),s.lineCap="round";const k=Math.max(6,(h.size||18)/2),B=k*.8;v&&(s.strokeStyle="#0066ff",s.lineWidth=Math.max(1,4/Math.max(Be,.001)),s.beginPath(),s.arc(h.x,h.y,k+B+3,0,Math.PI*2),s.stroke()),s.strokeStyle=m,s.lineWidth=Math.max(1,(v?3:2)/Math.max(Be,.001)),s.beginPath(),s.arc(h.x,h.y,k,0,Math.PI*2),s.stroke(),s.beginPath(),s.moveTo(h.x,h.y-k-B),s.lineTo(h.x,h.y+k+B),s.stroke(),s.beginPath(),s.moveTo(h.x-k-B,h.y),s.lineTo(h.x+k+B,h.y),s.stroke(),s.restore()};dt.forEach(f)}const y=f=>{const h=Math.max(10,f.size||18),v=h/2;s.save(),s.strokeStyle=f.color||"#111",s.lineWidth=Math.max(1,2/Math.max(Be,.001)),s.fillStyle="rgba(255,255,255,0.85)",s.beginPath(),s.rect(f.x-v,f.y-v,h,h),s.fill(),s.stroke();let m="abbreviation"in f&&f.abbreviation?String(f.abbreviation).trim():"";(!m||m===""||m==="****"||m==="*"||m==="?")&&(m=ys(f.componentType)),s.fillStyle=f.color||"#111",s.font=`bold ${Math.max(8,h*.35)}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(m,f.x,f.y);const k=f.pinConnections||[];if(k.length>0&&k.length===f.pinCount&&k.every(Y=>Y&&Y.trim()!=="")){const V=s.measureText(m).width,L=f.y+h*.35/2+2;s.strokeStyle=f.color||"#111",s.lineWidth=Math.max(1,2/Math.max(Be,.001)),s.beginPath(),s.moveTo(f.x-V/2,L),s.lineTo(f.x+V/2,L),s.stroke()}qe.has(f.id)&&(s.setLineDash([4,3]),s.strokeStyle="#00bfff",s.lineWidth=1.5,s.strokeRect(f.x-v-3,f.y-v-3,h+6,h+6),s.setLineDash([])),s.restore()};if(aa&&Xe.forEach(y),Ea&&at.forEach(y),z==="select"&&Ql){s.save();const f=Math.max(2,6/Math.max(1e-4,Be));s.strokeStyle="#00bfff",s.fillStyle="rgba(0, 191, 255, 0.15)",s.lineWidth=Math.max(1,1.5/Math.max(1e-4,Be)),s.setLineDash([f,f]),s.beginPath(),s.rect(Ql.x,Ql.y,Ql.width,Ql.height),s.fill(),s.stroke(),s.setLineDash([]),s.restore()}s.restore()},[M,x,he,Ee,Rt,pa,z,ke,ye,Wo,ea,Ya,Ve,Ie,Be,Ge.x,Ge.y,Yi,di,Nn,Il,El,za,Fa,aa,Ea,Xe,at,Wa,Ye,ul,dt,Ql,Se,qe,We,Le,Wt,nt,Te,se,Ae,ge,Yl]);et.useEffect(()=>{const a=Xn.current,s=qa.current,u=Oi.current,d=_i.current;if(!a||!s||!u||!d)return;let g=null;const y=a.width-80,f=a.height-80,h=y/2,v=f/2,m=j=>{if(!j||!j.bitmap)return;const Z=j.bitmap.width,T=j.bitmap.height,U=j.keystoneV?Math.tan(j.keystoneV):0,q=j.keystoneH?Math.tan(j.keystoneH):0,Q=Math.max(.2,1-U),ie=Math.max(.2,1+U),Ce=Math.max(.2,1-q),de=Math.max(.2,1+q),Re=Math.max(Q,ie),ot=Math.max(Ce,de),Zt=Z*Re,gt=T*ot,Me=j.skewX?Math.tan(j.skewX):0,st=j.skewY?Math.tan(j.skewY):0,vt=Math.abs(j.scale),it=Math.abs(vt)*Zt+Math.abs(Me)*Math.abs(vt)*gt,mt=Math.abs(st)*Math.abs(vt)*Zt+Math.abs(vt)*gt,tn=j0(it,mt,h,v,j.x,j.y,1,1,j.rotation);g=E0(g,tn)};if(m(M),m(x),!g){u.style.width=`${s.clientWidth}px`,d.style.height=`${s.clientHeight}px`;return}const k=g,B=k.maxX-k.minX,te=k.maxY-k.minY,Y=B*Be,V=te*Be,L=8,N=Math.max(s.clientWidth,Math.ceil(Y)+L*2),P=Math.max(s.clientHeight,Math.ceil(V)+L*2);u.style.width=`${N}px`,d.style.height=`${P}px`,vo.current=k.minX*Be-L,ba.current=k.minY*Be-L;const J=mo.current,A=wl.current;if(Qn.current=!0,J){const j=Math.max(0,J.scrollWidth-J.clientWidth),Z=Math.max(0,Math.min(j,-(Ge.x+vo.current)));J.scrollLeft=Z}if(A){const j=Math.max(0,A.scrollHeight-A.clientHeight),Z=Math.max(0,Math.min(j,-(Ge.y+ba.current)));A.scrollTop=Z}requestAnimationFrame(()=>{Qn.current=!1})},[M,x,Be,Ge.x,Ge.y,la.width,la.height]),et.useEffect(()=>{const a=()=>{const s=qa.current;if(!s)return;const u=1.6,d=24,g=s.clientWidth-d,y=s.clientHeight-d,f=Math.floor(y*u),h=Math.floor(g/u);let v,m;f<=g?(v=f,m=y):(v=g,m=h),v=Math.max(600,v),m=Math.max(375,m),Kn(k=>k.width===v&&k.height===m?k:{width:v,height:m})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const Da=S.useCallback(a=>{if(Ee.forEach(s=>{if(s.type==="via"||s.type==="pad")return;let u=!1;if(s.layer==="top"?u=Il:s.layer==="bottom"&&(u=El),!!u)if(s.points.length===1){const d=s.points[0],g=Math.max(.5,s.size/2);Se.has(s.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(d.x,d.y,g+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=s.color,a.beginPath(),a.arc(d.x,d.y,g,0,Math.PI*2),a.fill()}else{Se.has(s.id)&&(a.strokeStyle="#00bfff",a.lineWidth=s.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),s.points.forEach((d,g)=>{g===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=s.color,a.lineWidth=s.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),s.points.forEach((d,g)=>{g===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke();for(const d of s.points)a.beginPath(),a.arc(d.x,d.y,s.size/2,0,Math.PI*2),a.fill()}}),Ee.forEach(s=>{if(s.type==="via"){if(!Nn)return}else if(s.type==="pad"){if(s.layer==="top"&&!za||s.layer==="bottom"&&!Fa)return}else return;const u=s.points[0];if(Se.has(s.id)){if(s.type==="via"){const d=Math.max(.5,s.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(u.x,u.y,d,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(s.type==="pad"){const d=Math.max(.5,s.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(u.x-d,u.y-d,s.size+6,s.size+6),a.setLineDash([])}}if(s.type==="via"){const d=Math.max(.5,s.size/2),g=d*.5,y=d*.7;a.fillStyle=s.color,a.beginPath(),a.arc(u.x,u.y,d,0,Math.PI*2),a.arc(u.x,u.y,g,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(u.x-y,u.y),a.lineTo(u.x+y,u.y),a.stroke(),a.beginPath(),a.moveTo(u.x,u.y-y),a.lineTo(u.x,u.y+y),a.stroke()}else if(s.type==="pad"){const d=Math.max(.5,s.size/2),g=s.size,y=g*.5,f=d*.7;a.fillStyle=s.color,a.beginPath(),a.rect(u.x-d,u.y-d,g,g),a.rect(u.x-y/2,u.y-y/2,y,y),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(u.x-f,u.y),a.lineTo(u.x+f,u.y),a.stroke(),a.beginPath(),a.moveTo(u.x,u.y-f),a.lineTo(u.x,u.y+f),a.stroke()}}),Rt.length>0){const s=Ie;let u=!0;if(z==="draw"&&(ge==="via"?u=Nn:u=s==="top"?Il:El),u)if(z==="draw")if(ge==="via"){const d=Rt[Rt.length-1],g=Math.max(.5,ye/2),y=g*.5,f=g*.7;a.fillStyle=ke,a.beginPath(),a.arc(d.x,d.y,g,0,Math.PI*2),a.arc(d.x,d.y,y,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(d.x-f,d.y),a.lineTo(d.x+f,d.y),a.stroke(),a.beginPath(),a.moveTo(d.x,d.y-f),a.lineTo(d.x,d.y+f),a.stroke()}else if(ge==="pad"){const d=Rt[Rt.length-1],g=Math.max(.5,ye/2),y=ye,f=y*.5,h=g*.7;a.fillStyle=ke,a.beginPath(),a.rect(d.x-g,d.y-g,y,y),a.rect(d.x-f/2,d.y-f/2,f,f),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(d.x-h,d.y),a.lineTo(d.x+h,d.y),a.stroke(),a.beginPath(),a.moveTo(d.x,d.y-h),a.lineTo(d.x,d.y+h),a.stroke()}else{const d=Wt||"top",g=d==="top"?nt:Te,y=d==="top"?se:Ae;if(Rt.length===1){const f=Rt[0],h=Math.max(.5,y/2);a.fillStyle=g,a.beginPath(),a.arc(f.x,f.y,h,0,Math.PI*2),a.fill(),Yl&&(a.strokeStyle=g,a.lineWidth=y,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(Yl.x,Yl.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=g,a.lineWidth=y,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),Rt.forEach((f,h)=>{h===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y)}),a.stroke(),Yl&&Rt.length>0){const f=Rt[Rt.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(Yl.x,Yl.y),a.stroke(),a.globalAlpha=1}}else z==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=ye,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),Rt.forEach((d,g)=>{g===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke())}},[Ee,Se,Il,El,Nn,za,Fa,Rt,z,ge,ke,ye,Ie,Wt,nt,Te,se,Ae,Yl]),Gn=S.useCallback((a,s)=>{if(il){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&M?le(u=>u?{...u,...s}:null):a==="bottom"&&x?ae(u=>u?{...u,...s}:null):a==="both"&&(M&&le(u=>u?{...u,...s}:null),x&&ae(u=>u?{...u,...s}:null))},[M,x,il]),Kl=S.useCallback(()=>{Ve&&(Gn(Ve,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),Ai(!1),gs(!1),Dn(!1))},[Gn,Ve]),Dl=S.useCallback(()=>{if(Se.size>0||qe.size>0||We.size>0||Le.size>0){if(Se.size>0){const a=Ee.filter(g=>Se.has(g.id)),s=Tn&&a.some(g=>g.type==="via"),u=en&&a.some(g=>g.type==="trace"),d=Nt&&a.some(g=>g.type==="pad");if(s){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(u){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(d){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(qe.size>0&&Fe){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(We.size>0&&Gt){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Le.size>0&&Rn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Ct(a=>a.map(s=>{if(Se.has(s.id)){const u=s.size+1;return s.type==="via"?pe("via",u):s.type==="pad"?pe("pad",u):s.type==="trace"&&pe("trace",u,s.layer),{...s,size:u}}return s})),qe.size>0){const a=(qe.size>0&&Xe.find(s=>qe.has(s.id))?.size||18)+1;pe("component",a),At(s=>s.map(u=>qe.has(u.id)?{...u,size:(u.size||18)+1}:u)),zn(s=>s.map(u=>qe.has(u.id)?{...u,size:(u.size||18)+1}:u))}if(We.size>0){const a=(Ye.find(s=>We.has(s.id))?.size||18)+1;pe("power",a),Vn(s=>s.map(u=>We.has(u.id)?{...u,size:u.size+1}:u))}if(Le.size>0){const a=(dt.find(s=>Le.has(s.id))?.size||18)+1;pe("ground",a),On(s=>s.map(u=>Le.has(u.id)?{...u,size:(u.size||18)+1}:u))}}else ut(a=>Math.min(40,a+1))},[Se,qe,We,Le,Ee,Tn,en,Fe,Gt,Rn,z,ge,Ie,pe]),Qi=S.useCallback(()=>{if(Se.size>0||qe.size>0||We.size>0||Le.size>0){if(Se.size>0){const a=Ee.filter(g=>Se.has(g.id)),s=Tn&&a.some(g=>g.type==="via"),u=en&&a.some(g=>g.type==="trace"),d=Nt&&a.some(g=>g.type==="pad");if(s){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(u){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(d){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(qe.size>0&&Fe){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(We.size>0&&Gt){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Le.size>0&&Rn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Ct(a=>a.map(s=>{if(Se.has(s.id)){const u=Math.max(1,s.size-1);return s.type==="via"?pe("via",u):s.type==="pad"?pe("pad",u):s.type==="trace"&&pe("trace",u,s.layer),{...s,size:u}}return s})),qe.size>0){const a=Math.max(1,(Xe.find(s=>qe.has(s.id))?.size||18)-1);pe("component",a),At(s=>s.map(u=>qe.has(u.id)?{...u,size:Math.max(1,(u.size||18)-1)}:u)),zn(s=>s.map(u=>qe.has(u.id)?{...u,size:Math.max(1,(u.size||18)-1)}:u))}if(We.size>0){const a=Math.max(1,(Ye.find(s=>We.has(s.id))?.size||18)-1);pe("power",a),Vn(s=>s.map(u=>We.has(u.id)?{...u,size:Math.max(1,u.size-1)}:u))}if(Le.size>0){const a=Math.max(1,(dt.find(s=>Le.has(s.id))?.size||18)-1);pe("ground",a),On(s=>s.map(u=>Le.has(u.id)?{...u,size:Math.max(1,(u.size||18)-1)}:u))}}else ut(a=>Math.max(1,a-1))},[Se,qe,We,Le,Ee,Tn,en,Fe,Gt,Rn,z,ge,Ie,pe]),Ki=S.useCallback(()=>{const a=Tl.size;if(Se.size>0||qe.size>0||We.size>0||Le.size>0){if(Se.size>0){const s=Ee.filter(y=>Se.has(y.id)),u=Tn&&s.some(y=>y.type==="via"),d=Nt&&s.some(y=>y.type==="pad"),g=en&&s.some(y=>y.type==="trace");if(u||d||g){alert("Cannot change size: selected items are locked.");return}}if(qe.size>0&&Fe){alert("Cannot change size: selected components are locked.");return}if(We.size>0&&Gt){alert("Cannot change size: selected power nodes are locked.");return}if(Le.size>0&&Rn){alert("Cannot change size: selected ground nodes are locked.");return}Ct(s=>s.map(u=>Se.has(u.id)?(u.type==="via"?(pe("via",a),kn(d=>{const g=new Map(d),y=g.get("via");return y&&g.set("via",{...y,settings:{...y.settings,size:a}}),g})):u.type==="pad"?(pe("pad",a),kn(d=>{const g=new Map(d),y=g.get("pad");return y&&g.set("pad",{...y,settings:{...y.settings,size:a}}),g})):u.type==="trace"&&pe("trace",a,u.layer),{...u,size:a}):u)),qe.size>0&&(pe("component",a),At(s=>s.map(u=>qe.has(u.id)?{...u,size:a}:u)),zn(s=>s.map(u=>qe.has(u.id)?{...u,size:a}:u))),We.size>0&&(pe("power",a),Vn(s=>s.map(u=>We.has(u.id)?{...u,size:a}:u))),Le.size>0&&(pe("ground",a),On(s=>s.map(u=>Le.has(u.id)?{...u,size:a}:u)))}else ut(a),z==="draw"&&ge==="trace"?Ie==="top"?(ze(a),pe("trace",a,"top")):(be(a),pe("trace",a,"bottom")):pe(z==="draw"&&ge==="via"?"via":z==="draw"&&ge==="pad"?"pad":z==="component"?"component":z==="power"?"power":z==="ground"?"ground":"brush",a);Ca({visible:!1,size:6})},[Tl.size,Se,qe,We,Le,Ee,Tn,en,Fe,Gt,Rn,z,ge,Ie,pe,Dt,kn]),Hs=S.useCallback(()=>{wo({visible:!1,source:null}),sl({visible:!0,interval:5})},[]),Ls=S.useCallback(()=>{wo({visible:!1,source:null})},[]),An=S.useCallback(async()=>{const a=Za.interval;if(a===null){zl(!1),Ka(null),Xt.current&&(clearInterval(Xt.current),Xt.current=null),sl({visible:!1,interval:5}),console.log("Auto save: Disabled");return}if(!mn){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let s=ri;if(!s){const d=window;if(typeof d.showDirectoryPicker=="function")try{s=await d.showDirectoryPicker(),ui(s)}catch(g){g?.name!=="AbortError"&&(console.error("Failed to get directory:",g),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser.");return}}Hi(s);const u=mn.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");zo(u),Nl.current=s,ll.current=u,Ka(a),zl(!0),ql.current=!0,sl({visible:!1,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),Ol()},200)},[Za.interval,mn,ri]),Ot=S.useCallback(a=>{if(a.key==="Escape"){const d=document.activeElement;if(d&&(d.tagName==="INPUT"&&d.type==="checkbox"||d.tagName==="INPUT"&&d.type==="radio")){d.blur(),a.preventDefault(),a.stopPropagation();return}}const s=document.activeElement;if(!(s&&(s.tagName==="INPUT"&&s.type!=="checkbox"&&s.type!=="radio"||s.tagName==="TEXTAREA"||s.isContentEditable)||hl.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),Dl();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),Qi();return}if((a.key==="I"||a.key==="i")&&(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation();const d=[];Se.size>0,Se.size===0&&qe.size===0&&We.size===0&&Le.size===0&&d.push(`
No objects selected.`);const g=d.join(`
`);console.log(g),Ts({visible:!0,text:g});return}if(a.key==="O"||a.key==="o"){const d=document.activeElement;if(!!d&&(d.tagName==="INPUT"&&d.type!=="range"&&d.type!=="checkbox"&&d.type!=="radio"||d.tagName==="TEXTAREA"||d.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Xl(1);const y=Xn.current,f=qa.current;let h=0,v=0;if(y&&f){const m=y.getBoundingClientRect(),k=f.getBoundingClientRect(),B=y.width-80,te=y.height-80,L=56+168+6,N=m.left-k.left,P=L-N,J=m.width-Math.max(0,P),A=P+J/2,j=m.height/2,Z=B/2,T=te/2,U=m.width/y.width,q=m.height/y.height,Q=A/U,ie=j/q,Ce=Q-40,de=ie-40;h=Ce-Z,v=de-T}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Jn({x:h,y:v}),W("overlay"),fn(new Set),nn(new Set),un(new Set),ln(new Set),ue("select");return}if((a.key==="Alt"||a.altKey)&&kc(!0),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),ue("select"),Pa(!1),Do(!1),jn(!1),xn(!1),hi(!1),da(!1),mi(null);return}if(a.key==="Enter"&&z==="draw"&&ge==="trace"){sa();return}if((a.key==="Delete"||a.key==="Backspace")&&(Se.size>0||qe.size>0||We.size>0||Le.size>0)){if(a.preventDefault(),a.stopPropagation(),Se.size>0){const d=Ee.filter(h=>Se.has(h.id)),g=Tn&&d.some(h=>h.type==="via"),y=en&&d.some(h=>h.type==="trace"),f=Nt&&d.some(h=>h.type==="pad");g?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):y?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):f?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):(Ct(h=>h.filter(v=>!Se.has(v.id))),fn(new Set))}qe.size>0&&(Fe?alert("Cannot delete: Components are locked. Unlock components to delete them."):(At(d=>d.filter(g=>!qe.has(g.id))),zn(d=>d.filter(g=>!qe.has(g.id))),nn(new Set))),We.size>0&&(Gt?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Vn(d=>d.filter(g=>!We.has(g.id))),un(new Set))),Le.size>0&&(Rn?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(On(d=>d.filter(g=>!Le.has(g.id))),ln(new Set)));return}if((z==="draw"||z==="erase"||z==="power"||z==="ground")&&(a.key==="z"||a.key==="Z")&&(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),z==="power"){Vn(d=>d.length===0?d:d.slice(0,-1));return}if(z==="ground"){On(d=>d.length===0?d:d.slice(0,-1));return}if(z==="draw"&&ge==="trace"){const d=Rt,g=ni.current,y=d.length>0?d:g;if(y.length>0){y.length>1?Ln(f=>f.slice(0,-1)):Ln([]);return}Ct(f=>{for(let h=f.length-1;h>=0;h--){const v=f[h];if(v.type==="trace"&&v.layer===Ie&&v.points.length>=2)if(v.points.length>2){const m=v.points.slice(0,-1);return Ln(m),[...f.slice(0,h),...f.slice(h+1)]}else return[...f.slice(0,h),...f.slice(h+1)]}return f});return}if(pa&&Rt.length>0){Ln([]);return}z==="draw"&&(ge==="via"||ge==="pad")&&Ct(d=>{for(let g=d.length-1;g>=0;g--){const y=d[g];if(y.layer===Ie&&y.type===ge)return[...d.slice(0,g),...d.slice(g+1)]}return d});return}if(!a.metaKey&&!a.ctrlKey&&!a.altKey){const d=document.activeElement;if(!(!!d&&(d.tagName==="INPUT"&&d.type!=="range"&&d.type!=="checkbox"&&d.type!=="radio"||d.tagName==="TEXTAREA"||d.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),ue("select");return;case"w":case"W":a.preventDefault(),ue("power");return;case"g":case"G":a.preventDefault(),ue("ground");return;case"v":case"V":a.preventDefault(),ho("via"),ue("draw");return;case"p":case"P":a.preventDefault(),ho("pad"),ue("draw"),Ut(Al||"top"),Do(!0);return;case"t":case"T":a.preventDefault(),ho("trace"),ue("draw"),Ut(Wt||"top"),Pa(!0);return;case"c":case"C":a.preventDefault(),ue("component"),jn(!0),xn(!1),yi(null);return;case"e":case"E":a.preventDefault(),ue("erase");return;case"h":case"H":a.preventDefault(),ue("pan");return;case"z":case"Z":if(!(a.metaKey||a.ctrlKey)){a.preventDefault(),Ia(!1),ue("magnify");return}break}}if(z==="transform"&&Ve){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const g=document.activeElement;if(g&&g.tagName==="INPUT"){const y=g;y.type==="radio"&&y.blur()}if(ol==="nudge"){let y=0,f=0;switch(a.key){case"ArrowLeft":y=-1;break;case"ArrowRight":y=1;break;case"ArrowUp":f=-1;break;case"ArrowDown":f=1;break;default:return}Ve==="top"&&M?le(h=>h?{...h,x:h.x+y,y:h.y+f}:null):Ve==="bottom"&&x?ae(h=>h?{...h,x:h.x+y,y:h.y+f}:null):Ve==="both"&&(M&&le(h=>h?{...h,x:h.x+y,y:h.y+f}:null),x&&ae(h=>h?{...h,x:h.x+y,y:h.y+f}:null))}else if(ol==="scale"){let y=0;switch(a.key){case"ArrowUp":y=.01;break;case"ArrowDown":y=-.01;break;case"ArrowRight":y=.001;break;case"ArrowLeft":y=-.001;break;default:return}Ve==="top"&&M?le(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+y))}:null):Ve==="bottom"&&x?ae(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+y))}:null):Ve==="both"&&(M&&le(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+y))}:null),x&&ae(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+y))}:null))}else if(ol==="rotate"){let y=0;switch(a.key){case"ArrowUp":y=1;break;case"ArrowDown":y=-1;break;case"ArrowRight":y=.1;break;case"ArrowLeft":y=-.1;break;default:return}Ve==="top"&&M?le(f=>f?{...f,rotation:f.rotation+y}:null):Ve==="bottom"&&x?ae(f=>f?{...f,rotation:f.rotation+y}:null):Ve==="both"&&(M&&le(f=>f?{...f,rotation:f.rotation+y}:null),x&&ae(f=>f?{...f,rotation:f.rotation+y}:null))}else if(ol==="slant"){let y=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":y=-.5;break;case"ArrowRight":y=.5;break}if(y!==0||f!==0){const h=m=>m*Math.PI/180,v=m=>Math.max(-.7,Math.min(.7,m));Ve==="top"&&M?le(m=>m?{...m,skewX:v((m.skewX||0)+h(y)),skewY:v((m.skewY||0)+h(f))}:null):Ve==="bottom"&&x?ae(m=>m?{...m,skewX:v((m.skewX||0)+h(y)),skewY:v((m.skewY||0)+h(f))}:null):Ve==="both"&&(M&&le(m=>m?{...m,skewX:v((m.skewX||0)+h(y)),skewY:v((m.skewY||0)+h(f))}:null),x&&ae(m=>m?{...m,skewX:v((m.skewX||0)+h(y)),skewY:v((m.skewY||0)+h(f))}:null))}}else if(ol==="keystone"){let y=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":y=-.5;break;case"ArrowRight":y=.5;break}if(y!==0||f!==0){const h=m=>m*Math.PI/180,v=m=>Math.max(-.35,Math.min(.35,m));Ve==="top"&&M?le(m=>m?{...m,keystoneH:v((m.keystoneH||0)+h(y)),keystoneV:v((m.keystoneV||0)+h(f))}:null):Ve==="bottom"&&x?ae(m=>m?{...m,keystoneH:v((m.keystoneH||0)+h(y)),keystoneV:v((m.keystoneV||0)+h(f))}:null):Ve==="both"&&(M&&le(m=>m?{...m,keystoneH:v((m.keystoneH||0)+h(y)),keystoneV:v((m.keystoneV||0)+h(f))}:null),x&&ae(m=>m?{...m,keystoneH:v((m.keystoneH||0)+h(y)),keystoneV:v((m.keystoneV||0)+h(f))}:null))}}}else{const d=a.target;if(d.tagName==="INPUT"&&d.type==="range"){const g=d,y=Number(g.value),f=Number(g.min),h=Number(g.max),v=Number(g.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const m=Math.max(f,y-v);g.value=m.toString(),g.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const k=Math.min(h,y+v);g.value=k.toString(),g.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[z,Ve,ol,M,x,Se,qe,We,Le,Ee,Xe,at,Ye,dt,bt,ge,sa,Wt,nt,Te,se,Ae]);et.useEffect(()=>{z!=="transform"&&zi(null)},[z]),et.useEffect(()=>{window.addEventListener("keydown",Ot,!0);const a=s=>{s.key==="Alt"&&kc(!1)};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",Ot,!0),window.removeEventListener("keyup",a,!0)}},[Ot,We,Le,Gt,Rn,Ye,dt,Dl,Qi]);const Pe=S.useCallback(()=>{fe("#AA4499"),kt("#F781BF"),ze(6),be(6),Oe("trace","#AA4499","top"),Oe("trace","#F781BF","bottom"),pe("trace",6,"top"),pe("trace",6,"bottom"),St("#0072B2"),X("#56B4E9"),_e(26),Et(26),Oe("pad","#0072B2","top"),Oe("pad","#56B4E9","bottom"),pe("pad",26,"top"),pe("pad",26,"bottom"),$("#6A3D9A"),me("#9467BD"),$e(18),wn(18),Oe("component","#6A3D9A","top"),Oe("component","#9467BD","bottom"),pe("component",18,"top"),pe("component",18,"bottom"),Zl("top"),Mt("#AA4499"),ut(6),ja([{id:"powerbus-1",name:"+3.3VDC",voltage:"+3.3VDC",color:"#ff0000"},{id:"powerbus-2",name:"+5VDC",voltage:"+5VDC",color:"#ff0000"}]),ei(!1),Vl(!1),ti(!1),vs(!1),ya(!1),ga(!1),Ut("top"),ue("select"),ee(50),je(!1),W("overlay"),$p(1)},[Oe,pe]),Wn=S.useCallback(()=>{Pe(),setTimeout(()=>{Xl(1);const a=Xn.current,s=qa.current;let u=0,d=0;if(a&&s){const g=a.getBoundingClientRect(),y=s.getBoundingClientRect(),f=a.width-80,h=a.height-80,k=56+168+6,B=g.left-y.left,te=k-B,Y=g.width-Math.max(0,te),V=te+Y/2,L=g.height/2,N=f/2,P=h/2,J=g.width/a.width,A=g.height/a.height,j=V/J,Z=L/A,T=j-40,U=Z-40;u=T-N,d=U-P}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Jn({x:u,y:d}),fn(new Set),nn(new Set),un(new Set),ln(new Set)},100)},[Pe]);et.useEffect(()=>{Wn()},[]),et.useEffect(()=>{if(!ws.visible)return;const a=[];Se.size>0,Se.size===0&&qe.size===0&&We.size===0&&Le.size===0&&a.push(`
No objects selected.`);const s=a.join(`
`);Ts(u=>({...u,text:s}))},[ws.visible,Se,qe,We,Le,Ee,Xe,at,Ye,dt,bt]),et.useEffect(()=>{const a=s=>{const u=Xn.current;if(u&&!(Ja.current&&Ja.current.contains(s.target))&&!(s.target instanceof Node&&u.contains(s.target))){if(sa(),qi){const d=Bs.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&Pa(!1)}if(No){const d=Ja.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&(jn(!1),ue("select"))}if(Ro){const d=gi.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&(xn(!1),mi(null))}if(Qt){const d=wc.current;!s.target?.closest('button[title="Color Picker"]')&&(!d||!(s.target instanceof Node)||!d.contains(s.target))&&da(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[sa,qi,jc,No,Ro,Qt]),et.useEffect(()=>{const a=s=>{if(!wt)return;const u=document.querySelector("[data-component-editor-dialog]");if(u&&s.target instanceof Node&&u.contains(s.target)){const U=s.target;if(U.tagName==="BUTTON"||U.tagName==="INPUT"||U.closest("button")||U.closest("input"))return}const d=Xn.current;if(!d)return;const g=d.getBoundingClientRect(),y=s.clientX,f=s.clientY;if(y<g.left||y>g.right||f<g.top||f>g.bottom)return;const h=d.width/g.width,v=d.height/g.height,m=y-g.left,k=f-g.top,B=m*h,te=k*v,Y=B-40,V=te-40,L=(Y-Ge.x)/Be,N=(V-Ge.y)/Be;let P=1/0,J=null,A=null;const j=Math.max(6/Be,4),T=[...Xe,...at].find(U=>U.id===wt.componentId)?.layer||"top";for(const U of Ee)if((U.type==="via"||U.type==="pad")&&U.points.length>0){if(U.type==="pad"&&(U.layer||"top")!==T)continue;const q=U.points[0],Q=Math.max(1,U.size/2),ie=Math.hypot(q.x-L,q.y-N),Ce=Math.max(Q,j);ie<=Ce&&ie<P&&(P=ie,J=q.id??null,A=U)}if(J!=null&&A){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${J}`),console.log(`  Connecting pin ${wt.pinIndex+1} of component ${wt.componentId}`);const U=String(J),q=wt.pinIndex,Q=wt.componentId,ie=Xe.find(de=>de.id===Q),Ce=at.find(de=>de.id===Q);ie?At(de=>{const Re=de.find(Me=>Me.id===Q);if(!Re)return de;const ot=Re.pinConnections||[],Zt=ot.length>0?[...ot]:new Array(Re.pinCount).fill("");let gt;if(Zt.length!==Re.pinCount){gt=new Array(Re.pinCount).fill("");for(let Me=0;Me<Math.min(Zt.length,Re.pinCount);Me++)gt[Me]=Zt[Me]||""}else gt=[...Zt];return gt[q]=U,console.log(`Updated pin ${q} with value: ${U}`),console.log("New pinConnections:",gt),de.map(Me=>Me.id===Q?{...Me,pinConnections:gt}:Me)}):Ce&&zn(de=>{const Re=de.find(Me=>Me.id===Q);if(!Re)return de;const ot=Re.pinConnections||[],Zt=ot.length>0?[...ot]:new Array(Re.pinCount).fill("");let gt;if(Zt.length!==Re.pinCount){gt=new Array(Re.pinCount).fill("");for(let Me=0;Me<Math.min(Zt.length,Re.pinCount);Me++)gt[Me]=Zt[Me]||""}else gt=[...Zt];return gt[q]=U,console.log(`Updated pin ${q} with value: ${U}`),console.log("New pinConnections:",gt),de.map(Me=>Me.id===Q?{...Me,pinConnections:gt}:Me)}),setTimeout(()=>{na(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(wt)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[wt,Xe,at,Ee,Be,Ge.x,Ge.y]),et.useEffect(()=>{if(!Ri)return;const a=u=>{li&&xa({x:u.clientX-li.x,y:u.clientY-li.y})},s=()=>{Ss(!1),Ni(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s)}},[Ri,li]),et.useEffect(()=>{ve&&ve.visible&&Cl===null?xa({x:window.innerWidth/2,y:window.innerHeight/2}):(!ve||!ve.visible)&&xa(null)},[ve,Cl]);const pl=S.useCallback(a=>{switch(a){case"transparency":ee(50);break;case"brushSize":ut(3);break}},[]);et.useEffect(()=>{if(G){bo.current=performance.now(),ee(0);const a=s=>{const u=bo.current||s,d=1e3,g=(s-u)%d/d,y=1-Math.abs(1-2*g);ee(Math.round(y*100)),xo.current=requestAnimationFrame(a)};xo.current=requestAnimationFrame(a)}return()=>{xo.current&&(cancelAnimationFrame(xo.current),xo.current=null)}},[G]),et.useEffect(()=>{const a=z==="erase"?"erase":z==="magnify"?"magnify":z==="ground"?"ground":z==="power"?"power":z==="component"?"component":z==="draw"?ge==="via"?"via":ge==="pad"?"pad":"trace":"default";if(a==="default"){Mi(void 0);return}const s=Math.max(1,Be),u=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(ye*s)),g=u+4*2+(a==="magnify"?8:0),y=document.createElement("canvas");y.width=g,y.height=g;const f=y.getContext("2d");if(!f){Mi(void 0);return}const h=g/2,v=g/2,m=u/2;if(f.clearRect(0,0,g,g),a==="via"){const B=m,te=m*.5,Y=m*.7,L=Dt.get("via")?.settings.color||xt.viaColor||ke;f.fillStyle=L,f.beginPath(),f.arc(h,v,B,0,Math.PI*2),f.arc(h,v,te,0,Math.PI*2),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(h-Y,v),f.lineTo(h+Y,v),f.stroke(),f.beginPath(),f.moveTo(h,v-Y),f.lineTo(h,v+Y),f.stroke()}else if(a==="pad"){const te=Dt.get("pad")?.settings.color||tt||ke,Y=m*2,V=Y*.5,L=m*.7;f.fillStyle=te,f.beginPath(),f.rect(h-m,v-m,Y,Y),f.rect(h-V/2,v-V/2,V,V),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(h-L,v),f.lineTo(h+L,v),f.stroke(),f.beginPath(),f.moveTo(h,v-L),f.lineTo(h,v+L),f.stroke()}else if(a==="trace"){const te=Dt.get("trace")?.settings.color||(Wt==="top"?nt:Te)||ke;f.fillStyle=te,f.beginPath(),f.arc(h,v,m,0,Math.PI*2),f.fill()}else if(a==="erase"){const B=Math.max(ye*.75,8),te=Math.max(ye*.5,6),Y=Math.max(ye*.2,2);f.save(),f.translate(h,v),f.rotate(-35*Math.PI/180),f.fillStyle="#f5a3b3",f.strokeStyle="#111",f.lineWidth=1.5;const V=1.5,L=-B/2,N=-te/2;f.beginPath(),f.moveTo(L+V,N),f.lineTo(L+B-V,N),f.quadraticCurveTo(L+B,N,L+B,N+V),f.lineTo(L+B,N+te-V),f.quadraticCurveTo(L+B,N+te,L+B-V,N+te),f.lineTo(L+V,N+te),f.quadraticCurveTo(L,N+te,L,N+te-V),f.lineTo(L,N+V),f.quadraticCurveTo(L,N,L+V,N),f.closePath(),f.fill(),f.stroke(),f.fillStyle="#f18ea4",f.beginPath(),f.rect(-B/2,te/2-Y,B,Y),f.fill(),f.restore()}else if(a==="magnify"){const B=m;f.strokeStyle="#111",f.lineWidth=2,f.beginPath(),f.arc(h-2,v-2,B,0,Math.PI*2),f.stroke();const te=h+B*.6,Y=v+B*.6,V=te+6,L=Y+6;f.beginPath(),f.moveTo(te,Y),f.lineTo(V,L),f.stroke(),f.beginPath(),f.moveTo(h-6,v-2),f.lineTo(h+2,v-2),f.stroke(),Sa||(f.beginPath(),f.moveTo(h-2,v-6),f.lineTo(h-2,v+2),f.stroke())}else if(a==="ground"){f.strokeStyle="#000000",f.lineWidth=2,f.lineCap="round";const B=m*.8;f.beginPath(),f.arc(h,v,m,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(h,v-m-B),f.lineTo(h,v+m+B),f.stroke(),f.beginPath(),f.moveTo(h-m-B,v),f.lineTo(h+m+B,v),f.stroke()}else if(a==="power"){f.strokeStyle="#ff0000",f.lineWidth=2,f.lineCap="round";const B=m*.8;f.beginPath(),f.arc(h,v,m,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(h,v-m-B),f.lineTo(h,v+m+B),f.stroke(),f.beginPath(),f.moveTo(h-m-B,v),f.lineTo(h+m+B,v),f.stroke()}else if(a==="component"){const B=Ml||"top",te=Dt.get("component"),Y=(B==="top"?C:ce)||te?.settings.color||ke,V=u,L=V/2;f.strokeStyle=Y,f.lineWidth=2,f.fillStyle="rgba(255,255,255,0.9)",f.beginPath(),f.rect(h-L,v-L,V,V),f.fill(),f.stroke();const N=_n?ys(_n):"?";f.fillStyle=Y,f.font=`bold ${Math.max(8,V*.35)}px sans-serif`,f.textAlign="center",f.textBaseline="middle",f.fillText(N,h,v)}const k=`url(${y.toDataURL()}) ${Math.round(h)} ${Math.round(v)}, crosshair`;Mi(k)},[z,ge,ke,ye,Be,Sa,_n,oa,bt,Dt,xt,Wt,nt,Te,Ml,C,ce]),et.useEffect(()=>{Bn()},[Bn]),et.useEffect(()=>{Bn()},[la.width,la.height]),et.useEffect(()=>{Se.size===0&&z==="draw"&&ge==="trace"&&ye>=1&&(Ie==="top"?ze(ye):be(ye))},[ye,z,ge,Ie,Se]),et.useEffect(()=>{Ct(a=>a.map(s=>{if(s.type==="via"&&s.points.length>0&&s.points[0].id!==void 0){const u=s.points[0].id,d=jl(u,bt);if(s.viaType!==d)return{...s,viaType:d}}else if(s.type==="pad"&&s.points.length>0&&s.points[0].id!==void 0){const u=s.points[0].id,d=Aa(u,bt);if(s.padType!==d)return{...s,padType:d}}return s}))},[Ye,dt,bt,jl,Aa]);const $i=S.useCallback(()=>{const a=Xn.current;if(!a)return;const s=a.toDataURL("image/png"),u=window.open("","_blank");if(!u){alert("Please allow popups to print the canvas.");return}u.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${s}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),u.document.close()},[]);et.useEffect(()=>{const a=u=>{u.key==="Shift"&&Ia(!0)},s=u=>{u.key==="Shift"&&Ia(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",s)}},[]),et.useEffect(()=>{const a=s=>{Li.current&&(Li.current.contains(s.target)||De(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),et.useEffect(()=>{const a=(s,u)=>{const d=s.current;if(!d)return;const g=d.getContext("2d");if(!g)return;const y=d.width,f=d.height;if(g.clearRect(0,0,y,f),g.fillStyle="#fff",g.fillRect(0,0,y,f),u?.bitmap){const h=u.bitmap,v=Math.min(y/h.width,f/h.height),m=Math.max(1,Math.floor(h.width*v)),k=Math.max(1,Math.floor(h.height*v)),B=Math.floor((y-m)/2),te=Math.floor((f-k)/2);g.drawImage(h,B,te,m,k)}g.strokeStyle="#ddd",g.lineWidth=1,g.strokeRect(.5,.5,y-1,f-1)};a(ks,M),a($a,x)},[M,x]),et.useEffect(()=>{const a=[],s=[],u=[],d=[];for(const g of Ee)if(g.type==="via"&&g.points.length>=1){const y=g.points[0],f={id:g.id,pointId:y.id,x:y.x,y:y.y,size:g.size,color:g.color};a.push(f)}else if(g.type==="pad"&&g.points.length>=1){const y=g.points[0],f={id:g.id,pointId:y.id,x:y.x,y:y.y,size:g.size,color:g.color,layer:g.layer||"top"};s.push(f)}else if(g.type==="trace"&&g.points.length>=2)for(let y=0;y<g.points.length-1;y++){const f=g.points[y],h=g.points[y+1],v={id:g.id,startPointId:f.id,endPointId:h.id,x1:f.x,y1:f.y,x2:h.x,y2:h.y,size:g.size,color:g.color};g.layer==="top"?u.push(v):d.push(v)}gn(a),xc(s),yo(u),vc(d)},[Ee]);const Rl=S.useRef(Ee);Rl.current=Ee;const ca=S.useCallback(()=>{const s=new Date().toISOString(),u=Z0();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:s,view:{currentView:re,viewScale:Be,viewPan:Ge,showBothLayers:gc,selectedDrawingLayer:Ie},images:{top:M?{name:M.name,width:M.width,height:M.height,dataUrl:M.dataUrl??M.url,x:M.x,y:M.y,scale:M.scale,rotation:M.rotation,flipX:M.flipX,flipY:M.flipY,skewX:M.skewX,skewY:M.skewY,keystoneV:M.keystoneV,keystoneH:M.keystoneH}:null,bottom:x?{name:x.name,width:x.width,height:x.height,dataUrl:x.dataUrl??x.url,x:x.x,y:x.y,scale:x.scale,rotation:x.rotation,flipX:x.flipX,flipY:x.flipY,skewX:x.skewX,skewY:x.skewY,keystoneV:x.keystoneV,keystoneH:x.keystoneH}:null},drawing:{drawingStrokes:Rl.current.filter(g=>!(g.type==="trace"&&g.points.length<2)),vias:Xa,tracesTop:ma,tracesBottom:bc,componentsTop:Xe,componentsBottom:at,grounds:dt,powers:Ye},powerBuses:bt,pointIdCounter:Fp(),traceColors:{top:nt,bottom:Te},traceSizes:{top:se,bottom:Ae},padColors:{top:tt,bottom:Ft},padSizes:{top:ne,bottom:ft},componentColors:{top:C,bottom:ce},componentSizes:{top:He,bottom:lt},traceToolLayer:Wt,toolSettings:{trace:Dt.get("trace")?.settings||{color:"#ff0000",size:10},via:Dt.get("via")?.settings||{color:"#ff0000",size:26},pad:Dt.get("pad")?.settings||{color:"#ff0000",size:26},component:Dt.get("component")?.settings||{color:"#ff0000",size:18},ground:Dt.get("ground")?.settings||{color:"#000000",size:18},power:Dt.get("power")?.settings||{color:"#ff0000",size:18}},locks:{areImagesLocked:il,areViasLocked:Tn,arePadsLocked:Nt,areTracesLocked:en,areComponentsLocked:Fe,areGroundNodesLocked:Rn,arePowerNodesLocked:Gt},visibility:{showViasLayer:Nn,showTopPadsLayer:za,showBottomPadsLayer:Fa,showTopTracesLayer:Il,showBottomTracesLayer:El,showTopComponents:aa,showBottomComponents:Ea,showPowerLayer:Wa,showGroundLayer:ul},autoSave:{enabled:cl,interval:Qa,baseName:Ta},projectInfo:{name:mn}},timestamp:u}},[re,Be,Ge,gc,Ie,M,x,Ee,Xa,ma,bc,Xe,at,dt,Dt,il,Tn,Nt,en,Fe,Rn,Gt,bt,Fp,nt,Te,se,Ae,tt,Ft,ne,ft,C,ce,He,lt,Wt,cl,Qa,Ta,mn,Nn,za,Fa,Il,El,aa,Ea,Wa,ul]),Ys=S.useRef(ca);Ys.current=ca;const Nl=S.useRef(wa);Nl.current=wa;const ll=S.useRef(Ta);ll.current=Ta;const Fi=S.useRef(rl);Fi.current=rl;const _o=S.useRef(Eo);_o.current=Eo;const Un=S.useRef([]);Un.current=Er;const hl=S.useRef(-1);hl.current=As;const Ol=S.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=Nl.current,s=ll.current;console.log(`Auto save: dirHandle=${a?"set":"missing"}, baseName=${s||"missing"}`);const u=_o.current;if(console.log(`Auto save: currentFilePath=${u||"none"}`),!a||!s){console.warn(`Auto save: Missing directory handle (${!a}) or base name (${!s}). Please use File -> Auto Save -> Enable to set up auto save.`),zl(!1),Xt.current&&(clearInterval(Xt.current),Xt.current=null);return}if(!ql.current){console.log("Auto save: Skipping - no changes since last save");return}const d=Rl.current,g=d.filter(k=>k.type==="trace"&&k.points.length<2);if(g.length>0){console.log(`Auto save: Cleaning up ${g.length} single-point trace(s) before save`),g.forEach(B=>console.log(`  - Removing single-point trace ${B.id}`));const k=d.filter(B=>!(B.type==="trace"&&B.points.length<2));Ct(k),Rl.current=k}console.log("Auto save: Starting save...");const{project:y,timestamp:f}=Ys.current(),h=`${s}_${f}.json`,v=JSON.stringify(y,null,2),m=new Blob([v],{type:"application/json"});try{let k;try{k=await a.getDirectoryHandle("history",{create:!0})}catch(L){console.error("Failed to get/create history directory:",L);return}try{const L=[];for await(const N of a.keys())try{if(N==="history"||N===h)continue;const J=await(await a.getFileHandle(N)).getFile();if(!N.endsWith(".json"))continue;const A=await J.text();try{const j=JSON.parse(A);j.version&&(j.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!j.fileType)&&(L.push(N),console.log(`Auto save: Found PCB project file in root: ${N} (${j.fileType?"auto-saved":"manually saved"})`))}catch{continue}}catch{continue}for(const N of L)try{const A=await(await(await a.getFileHandle(N)).getFile()).text(),Z=await(await k.getFileHandle(N,{create:!0})).createWritable();await Z.write(new Blob([A],{type:"application/json"})),await Z.close(),await a.removeEntry(N),console.log(`Auto save: Moved ${N} from root to history/`)}catch(P){console.warn(`Auto save: Failed to move ${N} to history:`,P)}}catch(L){console.warn("Auto save: Error checking for old files in root:",L)}const te=await(await a.getFileHandle(h,{create:!0})).createWritable();await te.write(m),await te.close(),console.log(`Auto save: Successfully saved ${h} to root directory`),Fi.current(h);const Y=Un.current,V=[h,...Y.filter(L=>L!==h)].sort((L,N)=>N.localeCompare(L));jo(V),Un.current=V,Ms(0),hl.current=0,ql.current=!1}catch(k){console.error("Auto save failed:",k)}},[]),$l=S.useCallback(async()=>{const{project:a}=ca(),s=JSON.stringify(a,null,2),u=new Blob([s],{type:"application/json"});if(ri&&mn)try{const m="project.json",B=await(await ri.getFileHandle(m,{create:!0})).createWritable();await B.write(u),await B.close(),rl(m),console.log(`Project saved: ${mn}/${m}`);return}catch(m){console.error("Failed to save to project directory:",m),ui(null)}if(mn&&!ri){const m=window;if(typeof m.showDirectoryPicker=="function")try{const k=await m.showDirectoryPicker();ui(k);const B=`${mn}.json`,Y=await(await k.getFileHandle(B,{create:!0})).createWritable();await Y.write(u),await Y.close(),rl(B),console.log(`Project saved: ${B} in selected directory`);return}catch(k){k?.name!=="AbortError"&&console.error("Failed to get directory:",k)}}const d=m=>String(m).padStart(2,"0"),g=new Date,f=`pcb_project_${`${g.getFullYear()}_${d(g.getMonth()+1)}_${d(g.getDate())}_${d(g.getHours())}_${d(g.getMinutes())}_${d(g.getSeconds())}`}.json`,h=window;if(typeof h.showSaveFilePicker=="function")try{const m=await h.showSaveFilePicker({suggestedName:f,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),k=await m.createWritable();await k.write(u),await k.close();const B=m.name;try{const V=await m.getFile();rl(V.name)}catch{rl(B)}const Y=B.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");Y&&(Fn(Y),localStorage.setItem("pcb_project_name",Y));try{const V=m.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");zo(V),wa||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(V){console.warn("Could not set up auto save for new file:",V)}return}catch(m){if(m?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",m)}const v=document.createElement("a");v.href=URL.createObjectURL(u),v.download=f,document.body.appendChild(v),v.click(),setTimeout(()=>{URL.revokeObjectURL(v.href),document.body.removeChild(v)},0)},[ca]),ra=S.useCallback(async()=>{const a=[...Xe,...at],s=I0(a,Ee,Ye,dt,bt),u=new Blob([s],{type:"text/plain"}),g=`${mn||"pcb_project"}.kicad_sch`,y=window;if(typeof y.showSaveFilePicker=="function")try{const h=await y.showSaveFilePicker({suggestedName:g,types:[{description:"KiCad Schematic",accept:{"text/plain":["kicad_sch"]}}]}),v=await h.createWritable();await v.write(u),await v.close(),console.log(`Simple schematic exported: ${h.name}`);return}catch(h){if(h?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",h)}const f=document.createElement("a");f.href=URL.createObjectURL(u),f.download=g,document.body.appendChild(f),f.click(),setTimeout(()=>{URL.revokeObjectURL(f.href),document.body.removeChild(f)},0)},[Xe,at,Ee,Ye,dt,bt,mn]);et.useEffect(()=>{Xt.current&&(clearInterval(Xt.current),Xt.current=null);const a=js.current;if(js.current=cl,cl&&Qa){const s=Qa*60*1e3;wa&&Ta?(console.log(`Auto save: Setting up interval for ${Qa} minute(s) (${s}ms)`),a||(ql.current=!0,setTimeout(()=>{Ol()},100)),Xt.current&&(clearInterval(Xt.current),Xt.current=null),Xt.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${ql.current}`),console.log(`  - dirHandle: ${Nl.current?"set":"missing"}`),console.log(`  - baseName: ${ll.current||"missing"}`),Ol()},s),console.log(`Auto save: Interval set up for ${s}ms (${Qa} minutes)`),console.log(`  - Directory handle: ${wa?"set":"missing"}`),console.log(`  - Base name: ${Ta||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!wa}) or base name (${!Ta}). Disabling auto save.`),zl(!1),Xt.current&&(clearInterval(Xt.current),Xt.current=null))}else cl||(js.current=!1);return()=>{Xt.current&&(clearInterval(Xt.current),Xt.current=null)}},[cl,Qa,wa,Ta]);const eo=S.useRef(!1);et.useEffect(()=>{if(!cl){eo.current=!1;return}if(eo.current){eo.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}ql.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!M,bottomImage:!!x,drawingStrokesCount:Ee.length,componentsTopCount:Xe.length,componentsBottomCount:at.length,powersCount:Ye.length,groundsCount:dt.length,powerBusesCount:bt.length,areImagesLocked:il,areViasLocked:Tn,areTracesLocked:en,areComponentsLocked:Fe,areGroundNodesLocked:Rn,arePowerNodesLocked:Gt})},[M,x,Ee,Xe,at,Ye,dt,bt,nt,Te,se,Ae,il,Tn,en,Fe,Rn,Gt,cl]),et.useEffect(()=>{cl?(eo.current=!0,console.log("Auto save: Enabled, marking first run")):eo.current=!1},[cl]),et.useEffect(()=>{cl||(ql.current=!1)},[cl]);const Xs=S.useCallback(()=>!!(M||x||Ee.length>0||Xe.length>0||at.length>0||Ye.length>0||dt.length>0),[M,x,Ee,Xe,at,Ye,dt]);et.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&Fn(a)},[]);const Fl=S.useCallback(()=>{si({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Wi=S.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const s=await a.showDirectoryPicker();si(u=>({...u,locationHandle:s,locationPath:s.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",s.name||"")}catch(s){s?.name!=="AbortError"&&(console.error("Failed to get directory:",s),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),Ra=S.useCallback(async()=>{const a=qt.projectName.trim();if(!a){alert("Please enter a project name.");return}const s=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!qt.locationHandle){alert("Please select a location for the project.");return}const u=qt.locationHandle;let d;try{d=await u.getDirectoryHandle(s,{create:!0})}catch(g){console.error("Failed to create project folder:",g),alert(`Failed to create project folder "${s}". See console for details.`);return}si({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Fn(s),ui(d),localStorage.setItem("pcb_project_name",s),localStorage.setItem("pcb_project_location_path",u.name||""),le(null),ae(null),Ct([]),At([]),zn([]),Vn([]),On([]),fn(new Set),nn(new Set),un(new Set),ln(new Set),W("overlay"),Xl(1),Jn({x:0,y:0}),ql.current=!1,rl(""),zl(!1),Ka(null),Hi(null),zo(""),Xt.current&&(clearInterval(Xt.current),Xt.current=null),Pe();try{const{project:g}=ca(),y="project.json",f=JSON.stringify(g,null,2),h=new Blob([f],{type:"application/json"}),m=await(await d.getFileHandle(y,{create:!0})).createWritable();await m.write(h),await m.close(),rl(y),console.log(`New project created: ${s}/project.json`),wo({visible:!0,source:"new"})}catch(g){console.error("Failed to save new project:",g),alert("Failed to save new project file. See console for details.")}},[Pe,ca,qt]),dn=S.useCallback(()=>{si({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Pi=S.useCallback(()=>{const a=mn?`${mn}.json`:"";ci({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(Ui.current?.focus(),Ui.current&&a){const s=a.replace(/\.json$/i,"");Ui.current.setSelectionRange(0,s.length)}},100)},[mn]),Rc=S.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const s=await a.showDirectoryPicker();ci(u=>({...u,locationHandle:s,locationPath:s.name||"Selected folder"}))}catch(s){s?.name!=="AbortError"&&(console.error("Failed to get directory:",s),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Nc=S.useCallback(async()=>{const a=It.filename.trim();if(!a){alert("Please enter a file name.");return}const u=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!It.locationHandle){alert("Please select a location for the file.");return}const d=It.locationHandle;try{const{project:g}=ca(),y=JSON.stringify(g,null,2),f=new Blob([y],{type:"application/json"}),v=await(await d.getFileHandle(u,{create:!0})).createWritable();await v.write(f),await v.close(),rl(u);const m=u.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");m&&(Fn(m),localStorage.setItem("pcb_project_name",m)),ui(d),ci({visible:!1,filename:"",locationPath:"",locationHandle:null}),De(null),console.log(`Project saved as: ${u} in selected directory`)}catch(g){console.error("Failed to save project:",g),alert(`Failed to save project file "${u}". See console for details.`)}},[It,ca]),Vs=S.useCallback(()=>{ci({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),Gs=S.useCallback(async()=>{ii({visible:!1}),await $l(),Fl(),Wn()},[$l,Fl,Wn]),an=S.useCallback(()=>{ii({visible:!1}),Fl(),Wn()},[Fl,Wn]),Ji=S.useCallback(()=>{ii({visible:!1})},[]);et.useEffect(()=>{if(Es.visible){setTimeout(()=>{Sc.current?.focus()},0);const a=s=>{s.key==="Enter"?(s.preventDefault(),Gs()):s.key==="Escape"&&(s.preventDefault(),ii({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[Es.visible,Gs]);const Na=S.useCallback(async a=>{try{if(a.projectInfo)a.projectInfo.name&&(Fn(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const y=localStorage.getItem("pcb_project_name");y&&Fn(y)}if(a.view&&(a.view.currentView&&W(a.view.currentView),a.view.viewScale!=null&&Xl(a.view.viewScale),a.view.viewPan&&Jn(a.view.viewPan),a.view.showBothLayers!=null&&Tr(a.view.showBothLayers),a.view.selectedDrawingLayer&&Ut(a.view.selectedDrawingLayer)),a.traceColors&&(a.traceColors.top&&(fe(a.traceColors.top),Oe("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(kt(a.traceColors.bottom),Oe("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const y=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let f=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;f<6&&(f=6),ze(y),be(f),pe("trace",y,"top"),pe("trace",f,"bottom")}else ze(6),be(6);if(a.padColors&&(a.padColors.top&&(St(a.padColors.top),Oe("pad",a.padColors.top,"top")),a.padColors.bottom&&(X(a.padColors.bottom),Oe("pad",a.padColors.bottom,"bottom"))),a.padSizes){const y=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:26,f=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:26;_e(y),Et(f),pe("pad",y,"top"),pe("pad",f,"bottom")}if(a.componentColors&&(a.componentColors.top&&($(a.componentColors.top),Oe("component",a.componentColors.top,"top")),a.componentColors.bottom&&(me(a.componentColors.bottom),Oe("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const y=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,f=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;$e(y),wn(f),pe("component",y,"top"),pe("component",f,"bottom")}if(a.traceToolLayer&&(Zl(a.traceToolLayer),z==="draw"&&ge==="trace")){const y=a.traceToolLayer;Mt(y==="top"?a.traceColors?.top||nt:a.traceColors?.bottom||Te);const f=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let h=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;h<6&&(h=6),ut(y==="top"?f:h)}a.toolSettings&&kn(y=>{const f=new Map(y);if(a.toolSettings.trace){const v=f.get("trace");v&&f.set("trace",{...v,settings:a.toolSettings.trace})}if(a.toolSettings.via){const v=f.get("via");v&&f.set("via",{...v,settings:a.toolSettings.via})}if(a.toolSettings.pad){const v=f.get("pad");v&&f.set("pad",{...v,settings:a.toolSettings.pad})}if(a.toolSettings.component){const v=f.get("component");v&&f.set("component",{...v,settings:a.toolSettings.component})}if(a.toolSettings.ground){const v=f.get("ground");v&&f.set("ground",{...v,settings:a.toolSettings.ground})}if(a.toolSettings.power){const v=f.get("power");v&&f.set("power",{...v,settings:a.toolSettings.power})}const h=z==="draw"&&ge==="trace"?f.get("trace"):z==="draw"&&ge==="via"?f.get("via"):z==="draw"&&ge==="pad"?f.get("pad"):z==="component"?f.get("component"):z==="power"?f.get("power"):z==="ground"?f.get("ground"):null;return h&&(Mt(h.settings.color),ut(h.settings.size)),f});const s=async y=>{if(!y)return null;let f=null;if(y.dataUrl){const h=await(await fetch(y.dataUrl)).blob();f=await createImageBitmap(h)}return{url:y.dataUrl??"",name:y.name??"image",width:y.width??(f?f.width:0),height:y.height??(f?f.height:0),dataUrl:y.dataUrl,x:y.x??0,y:y.y??0,scale:y.scale??1,rotation:y.rotation??0,flipX:!!y.flipX,flipY:!!y.flipY,skewX:y.skewX??0,skewY:y.skewY??0,keystoneV:y.keystoneV??0,keystoneH:y.keystoneH??0,bitmap:f}},u=await s(a.images?.top),d=await s(a.images?.bottom);if(le(u),ae(d),a.pointIdCounter&&typeof a.pointIdCounter=="number"&&$p(a.pointIdCounter),a.locks&&(typeof a.locks.areImagesLocked=="boolean"?ei(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&ei(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&Vl(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&Yn(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&ti(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&vs(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?ya(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&ya(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&ga(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&Mo(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&Xi(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&Rs(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&pi(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&Ds(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&Ns(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&Os(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&Tc(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Gi(a.visibility.showGroundLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&zl(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&Ka(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(zo(a.autoSave.baseName),ll.current=a.autoSave.baseName,a.autoSave.enabled&&!wa&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),zl(!1),Ka(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),zl(!1),Ka(null),zo(""),ll.current="")):(zl(!1),Ka(null),Hi(null),zo(""),Nl.current=null,ll.current="",Xt.current&&(clearInterval(Xt.current),Xt.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const y=a.drawing.drawingStrokes.map(f=>({...f,points:f.points.map(h=>({...h,...$t(h)}))})).filter(f=>!(f.type==="trace"&&f.points.length<2));Ct(y)}else{const y=[],f=(m,k)=>{const B=$t({x:m.x,y:m.y});y.push({id:m.id||`${Date.now()}-via-${Math.random()}`,points:[{id:m.pointId||Ll(),x:B.x,y:B.y}],color:m.color,size:m.size,layer:k,type:"via"})},h=(m,k)=>{const B=$t({x:m.x1,y:m.y1}),te=$t({x:m.x2,y:m.y2});y.push({id:m.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:m.startPointId||Ll(),x:B.x,y:B.y},{id:m.endPointId||Ll(),x:te.x,y:te.y}],color:m.color,size:m.size,layer:k,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(m=>f(m,"top")):((a.drawing?.viasTop??[]).forEach(m=>f(m,"top")),(a.drawing?.viasBottom??[]).forEach(m=>f(m,"bottom"))),(a.drawing?.tracesTop??[]).forEach(m=>h(m,"top")),(a.drawing?.tracesBottom??[]).forEach(m=>h(m,"bottom"));const v=y.filter(m=>!(m.type==="trace"&&m.points.length<2));Ct(v)}if(a.drawing?.componentsTop){const y=a.drawing.componentsTop.map(f=>{const h=$t({x:f.x,y:f.y});return{...f,x:h.x,y:h.y,layer:f.layer||"top",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});At(y)}if(a.drawing?.componentsBottom){const y=a.drawing.componentsBottom.map(f=>{const h=$t({x:f.x,y:f.y});return{...f,x:h.x,y:h.y,layer:f.layer||"bottom",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});zn(y)}if(a.drawing?.grounds){const f=a.drawing.grounds.map(h=>{const v=h.pointId||Ll(),m=$t({x:h.x,y:h.y});return{...h,pointId:v,x:m.x,y:m.y}}).filter(h=>{const v=h.y>=0&&h.x>=0&&typeof h.x=="number"&&typeof h.y=="number"&&!isNaN(h.x)&&!isNaN(h.y)&&isFinite(h.x)&&isFinite(h.y);return v||console.warn(`Filtered out invalid ground symbol at (${h.x}, ${h.y}) - likely in border area or invalid coordinates`),v});On(f)}let g=bt;if(a.powerBuses&&Array.isArray(a.powerBuses)&&(g=a.powerBuses,ja(g)),a.drawing?.powers){const f=a.drawing.powers.map(h=>{const v=h.pointId||Ll(),m=$t({x:h.x,y:h.y});return h.powerBusId?{...h,pointId:v,x:m.x,y:m.y,layer:h.layer||"top"}:{...h,pointId:v,x:m.x,y:m.y,powerBusId:g.length>0?g[0].id:"default-5v",layer:h.layer||"top"}}).filter(h=>{const v=h.y>=0&&h.x>=0&&typeof h.x=="number"&&typeof h.y=="number"&&!isNaN(h.x)&&!isNaN(h.y)&&isFinite(h.x)&&isFinite(h.y);return v||console.warn(`Filtered out invalid power node at (${h.x}, ${h.y}) - likely in border area or invalid coordinates`),v});Vn(f)}ql.current=!1}catch(s){console.error("Failed to open project",s),alert("Failed to open project file. See console for details.")}},[z,ge]),Wl=S.useCallback(async()=>{},[Eo]),Bo=S.useCallback(async a=>{const s=Nl.current;if(!s){console.warn("Cannot load file: no directory handle");return}try{const d=await(await s.getFileHandle(a)).getFile();if(d.size===0){console.warn(`File ${a} is empty, skipping`);const m=Un.current.filter(k=>k!==a);jo(m),Un.current=m;return}const g=await d.text();if(!g||g.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const m=Un.current.filter(k=>k!==a);jo(m),Un.current=m;return}let y;try{y=JSON.parse(g)}catch(v){console.error(`Failed to parse JSON from file ${a}:`,v);const k=Un.current.filter(B=>B!==a);jo(k),Un.current=k,await Wl();return}Pe(),Xl(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),fn(new Set),nn(new Set),un(new Set),ln(new Set),Wn(),await Na(y),rl(a);const h=Un.current.indexOf(a);h>=0?(Ms(h),hl.current=h):await Wl(),ql.current=!1}catch(u){console.error("Failed to load file from history:",u);const d=Un.current;if(d.includes(a)){const g=d.filter(y=>y!==a);jo(g),Un.current=g,await Wl()}}},[Na,Wl,Wn]);S.useCallback(async()=>{const a=hl.current,s=Un.current;if(a>=0&&a<s.length-1){const u=a+1,d=s[u];d&&await Bo(d)}},[Bo]),S.useCallback(async()=>{const a=hl.current,s=Un.current;if(a<=0||a>=s.length||s.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",s.length);return}if(a>0&&a<s.length&&s.length>0){const u=a-1;if(u>=0&&u<s.length){const d=s[u];d?await Bo(d):(console.warn("No newer file found at index",u),await Wl())}else console.warn("Cannot navigate to newer file: prevIndex",u,"is out of bounds")}},[Bo,Wl]),et.useEffect(()=>{ni.current=Rt},[Rt]);const Oa=et.useRef(ge),_a=et.useRef(Ie);et.useEffect(()=>{const a=ge!==Oa.current;if(z==="draw"&&Oa.current==="trace"&&a){if(ni.current.length>=2){const s={id:`${Date.now()}-trace-autofinalize`,points:ni.current,color:ke,size:ye,layer:_a.current,type:"trace"};Ct(u=>[...u,s]),_a.current==="top"?Sl(u=>[...u,s.id]):Gl(u=>[...u,s.id])}Ln([]),po(!1)}Oa.current=ge,_a.current=Ie},[ge,Ie,z,ke,ye]);const jr=et.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);et.useEffect(()=>{Bn()},[Ee]),et.useEffect(()=>{Bn()},[Xe,at,dt,ul]),et.useEffect(()=>{const a=mo.current,s=wl.current;if(Qn.current=!0,a){const u=Math.max(0,a.scrollWidth-a.clientWidth),d=vo.current,g=Math.max(0,Math.min(u,-(Ge.x+d)));Math.abs(a.scrollLeft-g)>.5&&(a.scrollLeft=g)}if(s){const u=Math.max(0,s.scrollHeight-s.clientHeight),d=ba.current,g=Math.max(0,Math.min(u,-(Ge.y+d)));Math.abs(s.scrollTop-g)>.5&&(s.scrollTop=g)}requestAnimationFrame(()=>{Qn.current=!1})},[Ge.x,Ge.y]);const oe=As>0;return c.jsxs("div",{className:"app",children:[c.jsx("header",{className:"app-header",children:c.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.0)"})}),c.jsxs("div",{ref:Li,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:a=>{a.stopPropagation(),De(s=>s==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:$n==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),$n==="file"&&c.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[c.jsx("button",{onClick:()=>{oe||(De(null),Xs()?ii({visible:!0}):Fl())},disabled:oe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe?"not-allowed":"pointer"},children:"New Project"}),c.jsx("button",{onClick:async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[s]=await a.showOpenFilePicker({multiple:!1}),u=await s.getFile();if(!u.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file."),De(null);return}rl(u.name);const d=await u.text(),g=JSON.parse(d);await Na(g);let y;g.projectInfo?.name?y=g.projectInfo.name:(y=u.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Fn(y),localStorage.setItem("pcb_project_name",y)),mn||(Fn(y),localStorage.setItem("pcb_project_name",y)),setTimeout(()=>{g.autoSave?.enabled===!0||wo({visible:!0,source:"open"})},100),De(null);return}catch(s){if(s?.name==="AbortError"){De(null);return}console.warn("showOpenFilePicker failed, falling back to input",s)}Cs.current?.click(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{oe||($l(),De(null))},disabled:oe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe?"not-allowed":"pointer"},children:"Save Project"}),c.jsx("button",{onClick:()=>{oe||(Pi(),De(null))},disabled:oe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe?"not-allowed":"pointer"},children:"Save As"}),c.jsx("button",{onClick:()=>{oe||(sl({visible:!0,interval:5}),De(null))},disabled:oe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe?"not-allowed":"pointer"},children:"Auto Save"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{oe||(ra(),De(null))},disabled:oe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe?"not-allowed":"pointer"},children:"Export Simple Schematic"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{$i(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),c.jsx("button",{onClick:()=>{$i(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:a=>{oe||(a.stopPropagation(),De(s=>s==="transform"?null:"transform"))},disabled:oe,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:$n==="transform"?"#eef3ff":"#fff",fontWeight:600,color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:"Images "}),$n==="transform"&&c.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[c.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),c.jsx("button",{onClick:()=>{oe||(Va.current?.click(),De(null))},disabled:oe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe?"not-allowed":"pointer"},children:"Load Top PCB"}),c.jsx("button",{onClick:()=>{oe||(Ga.current?.click(),De(null))},disabled:oe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:oe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:oe?"not-allowed":"pointer"},children:"Load Bottom PCB"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),c.jsxs("button",{disabled:!M,onClick:()=>{zi("top"),ue("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:M?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ve==="top"?" ":"","Top Image"]}),c.jsxs("button",{disabled:!x,onClick:()=>{zi("bottom"),ue("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:x?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ve==="bottom"?" ":"","Bottom Image"]}),c.jsxs("button",{disabled:!M||!x,onClick:()=>{zi("both"),ue("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:M&&x?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ve==="both"?" ":"","Both Images"]}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{if(Ve)if(Ve==="both"){const a=!M?.flipX;Gn("both",{flipX:a})}else{const a=Ve==="top"?M?.flipX||!1:x?.flipX||!1;Gn(Ve,{flipX:!a})}De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Horizontal Flip"}),c.jsx("button",{onClick:()=>{if(Ve)if(Ve==="both"){const a=!M?.flipY;Gn("both",{flipY:a})}else{const a=Ve==="top"?M?.flipY||!1:x?.flipY||!1;Gn(Ve,{flipY:!a})}De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Vertical Flip"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsxs("button",{onClick:()=>{ha("nudge"),ue("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[ol==="nudge"?" ":"","Mode: Nudge"]}),c.jsxs("button",{onClick:()=>{ha("scale"),ue("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[ol==="scale"?" ":"","Mode: Scale"]}),c.jsxs("button",{onClick:()=>{ha("rotate"),ue("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[ol==="rotate"?" ":"","Mode: Rotate"]}),c.jsxs("button",{onClick:()=>{ha("slant"),ue("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[ol==="slant"?" ":"","Mode: Slant"]}),c.jsxs("button",{onClick:()=>{ha("keystone"),ue("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[ol==="keystone"?" ":"","Mode: Keystone"]}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{ue("transform"),Wo||ea?(Ai(!1),gs(!1),Dn(!1)):Ai(!0),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:Wo||ea?"Color Mode":"Grayscale Mode"}),c.jsx("button",{onClick:()=>{ue("transform"),ea?Dn(a=>!a):(gs(!0),Dn(!1)),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:ea?"Invert Edges":"Black & White Edges"}),c.jsx("button",{onClick:()=>{ue("transform"),Kl(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Reset Transform"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsxs("button",{onClick:()=>{ei(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Images ",il?"":""]})]})]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:a=>{oe||(a.stopPropagation(),De(s=>s==="tools"?null:"tools"))},disabled:oe,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:$n==="tools"?"#eef3ff":"#fff",fontWeight:600,color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:"Tools "}),$n==="tools"&&c.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[c.jsx("button",{onClick:()=>{Dl(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),c.jsx("button",{onClick:()=>{Qi(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{let a=ye;if(Se.size>0){const s=Ee.filter(u=>Se.has(u.id));s.length>0&&(a=s[0].size)}else if(qe.size>0){const s=[...Xe,...at].find(u=>qe.has(u.id));s&&(a=s.size||18)}else if(We.size>0){const s=Ye.find(u=>We.has(u.id));s&&(a=s.size)}else if(Le.size>0){const s=dt.find(u=>Le.has(u.id));s&&(a=s.size||18)}Ca({visible:!0,size:a}),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Set Size"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsxs("button",{onClick:()=>{Vl(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Vias ",Tn?"":""]}),c.jsxs("button",{onClick:()=>{Yn(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Pads ",Nt?"":""]}),c.jsxs("button",{onClick:()=>{ti(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Traces ",en?"":""]}),c.jsxs("button",{onClick:()=>{vs(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Components ",Fe?"":""]}),c.jsxs("button",{onClick:()=>{ya(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Ground Node ",Rn?"":""]}),c.jsxs("button",{onClick:()=>{ga(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Power Nodes ",Gt?"":""]}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{Vi(!0),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{const a=Ee.filter(s=>s.type==="via").map(s=>s.id);fn(new Set(a)),nn(new Set),un(new Set),ln(new Set),ue("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all vias"}),c.jsx("button",{onClick:()=>{const a=Ee.filter(s=>s.type==="pad"&&s.layer==="top").map(s=>s.id);fn(new Set(a)),nn(new Set),un(new Set),ln(new Set),ue("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Pads (Top)"}),c.jsx("button",{onClick:()=>{const a=Ee.filter(s=>s.type==="pad"&&s.layer==="bottom").map(s=>s.id);fn(new Set(a)),nn(new Set),un(new Set),ln(new Set),ue("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Pads (Bottom)"}),c.jsx("button",{onClick:()=>{const a=Ee.filter(s=>s.type==="trace"&&s.layer==="top").map(s=>s.id);fn(new Set(a)),nn(new Set),un(new Set),ln(new Set),ue("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Traces (top)"}),c.jsx("button",{onClick:()=>{const a=Ee.filter(s=>s.type==="trace"&&s.layer==="bottom").map(s=>s.id);fn(new Set(a)),nn(new Set),un(new Set),ln(new Set),ue("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Traces (bottom)"}),c.jsx("button",{onClick:()=>{const a=Xe.map(s=>s.id);nn(new Set(a)),fn(new Set),un(new Set),ln(new Set),ue("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Components (top)"}),c.jsx("button",{onClick:()=>{const a=at.map(s=>s.id);nn(new Set(a)),fn(new Set),un(new Set),ln(new Set),ue("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Components (bottom)"})]})]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:a=>{a.stopPropagation(),De(s=>s==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:$n==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),$n==="about"&&c.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:400,maxWidth:600,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:16,overflowY:"auto",zIndex:100},children:[c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h2",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"18px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),c.jsx("p",{style:{margin:"0 0 16px 0",color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images."})]}),c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Purpose"}),c.jsx("p",{style:{margin:0,color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:"This tool helps engineers and hobbyists document PCB layouts by allowing you to overlay traces, vias, pads, components, and power/ground connections on top of PCB images. The tool generates netlists and schematics that can be exported to KiCad and other EDA tools."})]}),c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Features"}),c.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"#ddd",fontSize:"14px",lineHeight:"1.8"},children:[c.jsxs("li",{children:["Support for ",c.jsx("strong",{style:{color:"#fff"},children:"Typical 4-Layer PCBs"})," (Top, Bottom, Ground Plane, Power Plane)"]}),c.jsx("li",{children:"Layer-specific drawing tools (Traces, Pads, Components) for Top and Bottom layers"}),c.jsx("li",{children:"Via placement with automatic type detection (Signal, Power, Ground)"}),c.jsx("li",{children:"Component placement with 24+ component types and pin connection management"}),c.jsx("li",{children:"Power and Ground node placement with bus management"}),c.jsx("li",{children:"Netlist generation and export (KiCad, Protel formats)"}),c.jsx("li",{children:"Simple schematic export"}),c.jsx("li",{children:"Project save/load with auto-save functionality"}),c.jsx("li",{children:"Layer visibility controls and locking mechanisms"})]})]}),c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Limitations"}),c.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"#ddd",fontSize:"14px",lineHeight:"1.8"},children:[c.jsxs("li",{children:["Currently supports ",c.jsx("strong",{style:{color:"#fff"},children:"through-hole vias only"})," (blind and buried vias not yet supported)"]}),c.jsx("li",{children:"Designed for 4-layer PCBs (can be adapted for 2-layer with some limitations)"}),c.jsx("li",{children:"Manual tracing required (no automatic trace detection from images)"}),c.jsx("li",{children:"Component library limited to standard through-hole and SMD types"})]})]}),c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"4-Layer PCB Support"}),c.jsx("p",{style:{margin:"0 0 8px 0",color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:"The tool is optimized for the most common 4-layer PCB stackup:"}),c.jsxs("ul",{style:{margin:"0 0 8px 0",paddingLeft:20,color:"#ddd",fontSize:"14px",lineHeight:"1.8"},children:[c.jsxs("li",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Layer 1 (Top):"})," Signal layer"]}),c.jsxs("li",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Layer 2 (Inner):"})," Ground plane"]}),c.jsxs("li",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Layer 3 (Inner):"})," Power plane"]}),c.jsxs("li",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Layer 4 (Bottom):"})," Signal layer"]})]}),c.jsxs("p",{style:{margin:0,color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:["Vias automatically connect Top and Bottom layers. See the ",c.jsx("strong",{style:{color:"#fff"},children:"ABOUT_VIAS.md"})," file in the project for detailed information about via types and usage in 4-layer PCBs."]})]}),c.jsxs("div",{style:{marginBottom:0},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Keyboard Shortcuts"}),c.jsxs("div",{style:{color:"#ddd",fontSize:"13px",lineHeight:"1.8",fontFamily:"monospace"},children:[c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"S"})," - Select tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"V"})," - Via tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"D"})," - Pad tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"T"})," - Trace tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"C"})," - Component tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"P"})," - Power tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"G"})," - Ground tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"E"})," - Erase tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"H"})," - Pan/Move tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Z"})," - Zoom tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Esc"})," - Return to Select tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Option/Alt"})," - Disable snap-to while drawing"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"+/-"})," - Increase/Decrease size"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Cmd/Ctrl+I"})," - Detailed Information"]})]})]})]})]}),Eo&&c.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:c.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:Eo,children:Eo})})]}),c.jsxs("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:[c.jsxs("div",{ref:qa,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[c.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:44,display:"flex",flexDirection:"column",gap:8,padding:"6px 6px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[c.jsx("button",{onClick:()=>{oe||ue("select")},onMouseDown:a=>a.currentTarget.blur(),disabled:oe,title:"Select (S)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="select"?"2px solid #000":"1px solid #ddd",background:z==="select"?"#e6f0ff":"#fff",color:oe?"#999":"#222",outline:"none",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsx(O0,{size:16})}),c.jsx("button",{onClick:()=>{oe||(ho("via"),ue("draw"))},disabled:oe,title:"Draw Vias (V)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="draw"&&ge==="via"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&ge==="via"?"#e6f0ff":"#fff",color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const s=Dt.get("via")?.settings.color||xt.viaColor||ke;return c.jsxs(c.Fragment,{children:[c.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:s,strokeWidth:"3"}),c.jsx("circle",{cx:"12",cy:"12",r:"4",fill:s})]})})()})}),c.jsx("button",{onClick:()=>{oe||(ho("pad"),ue("draw"),Ut(Al||"top"),Do(!0))},disabled:oe,title:"Draw Pads (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="draw"&&ge==="pad"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&ge==="pad"?"#e6f0ff":"#fff",color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const a=Dt.get("pad"),s=a?.settings.size||ne||26,u=a?.settings.color||tt||ke,d=Math.min(14,Math.max(4,s/26*14)),g=(24-d)/2,y=(24-d)/2;return c.jsx("rect",{x:g,y,width:d,height:d,fill:u})})()})}),c.jsx("button",{onClick:()=>{oe||(ho("trace"),ue("draw"),Ut(Wt||"top"),Pa(!0))},disabled:oe,title:"Draw Traces (T)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="draw"&&ge==="trace"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&ge==="trace"?"#e6f0ff":"#fff",color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsx(B0,{size:16,color:Dt.get("trace")?.settings.color||(Wt==="top"?nt:Te)||th})}),c.jsx("button",{onClick:()=>{oe||(ue("component"),jn(!0),xn(!1),yi(null))},disabled:oe,title:"Draw Component (C)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="component"?"2px solid #000":"1px solid #ddd",background:z==="component"?"#e6f0ff":"#fff",color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:(()=>{const a=Ml||"top",s=Dt.get("component"),u=(a==="top"?C:ce)||s?.settings.color||nh;return _n?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[c.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:u,strokeWidth:"1.5"}),c.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:u,fontWeight:"bold",fontFamily:"monospace",children:ys(_n)})]}):c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[c.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:u,stroke:u,strokeWidth:"0.5"}),c.jsxs("g",{stroke:u,fill:"none",strokeWidth:"1.5",children:[c.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),c.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:u})]})]})})()}),c.jsx("button",{onClick:()=>{oe||ue("power")},disabled:oe,title:"Draw Power (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="power"?"2px solid #000":"1px solid #ddd",background:z==="power"?"#e6f0ff":"#fff",color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsx("span",{style:{color:Dt.get("power")?.settings.color||wr,fontSize:"18px",fontWeight:"bold",lineHeight:1},children:"V"})}),c.jsx("button",{onClick:()=>{oe||ue("ground")},disabled:oe,title:"Draw Ground (G)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="ground"?"2px solid #000":"1px solid #ddd",background:z==="ground"?"#e6f0ff":"#fff",color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible"},children:c.jsxs("g",{stroke:Dt.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[c.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),c.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),c.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),c.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})})}),c.jsx("button",{onClick:()=>{oe||ue("erase")},disabled:oe,title:"Erase (E)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="erase"?"2px solid #000":"1px solid #ddd",background:z==="erase"?"#ffecec":"#fff",color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsxs("g",{transform:"rotate(-35 12 12)",children:[c.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),c.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})})}),c.jsx("button",{onClick:()=>{oe||ue(a=>a==="pan"?"draw":"pan")},disabled:oe,title:"Move (H)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="pan"?"2px solid #000":"1px solid #ddd",background:z==="pan"?"#e6f0ff":"#fff",color:oe?"#999":"#222",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),c.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),c.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})})}),c.jsx("button",{onClick:()=>{Ia(!1),ue(a=>a==="magnify"?"draw":"magnify")},title:`${Sa?"Zoom Out":"Zoom In"} (Z)`,style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:z==="magnify"?"2px solid #000":"1px solid #ddd",background:z==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[c.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),c.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),Sa?c.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),c.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]})}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:()=>{oe||da(a=>!a)},disabled:oe,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:oe?"not-allowed":"pointer",opacity:oe?.5:1},children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",children:[c.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Qt&&c.jsx("div",{ref:wc,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:jr.map(a=>c.jsx("div",{onClick:()=>{Mt(a),da(!1),Jo(Dt),Oe("brush",a),z==="draw"&&ge==="trace"?Ie==="top"?(fe(a),Oe("trace",a,"top")):(kt(a),Oe("trace",a,"bottom")):z==="draw"&&ge==="via"?Oe("via",a):z==="draw"&&ge==="pad"?Oe("pad",a):z==="component"&&Oe("component",a),Se.size>0&&Ct(s=>s.map(u=>Se.has(u.id)?(u.type==="via"?(Oe("via",a),kn(d=>{const g=new Map(d),y=g.get("via");return y&&g.set("via",{...y,settings:{...y.settings,color:a}}),g})):u.type==="pad"?(Oe("pad",a),kn(d=>{const g=new Map(d),y=g.get("pad");return y&&g.set("pad",{...y,settings:{...y.settings,color:a}}),g})):u.type==="trace"&&Oe("trace",a,u.layer),{...u,color:a}):u)),qe.size>0&&(Oe("component",a),At(s=>s.map(u=>qe.has(u.id)?{...u,color:a}:u)),zn(s=>s.map(u=>qe.has(u.id)?{...u,color:a}:u))),We.size>0&&Vn(s=>s.map(u=>We.has(u.id)?{...u,color:a}:u)),Le.size>0&&On(s=>s.map(u=>Le.has(u.id)?{...u,color:a}:u))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===ke?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),z==="draw"&&ge==="trace"&&qi&&c.jsxs("div",{ref:Bs,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[c.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[c.jsx("input",{type:"radio",name:"traceToolLayer",checked:Wt==="top",onChange:()=>{Zl("top"),Ut("top"),Mt(nt),ut(se),kn(a=>{const s=new Map(a),u=s.get("trace");return u&&s.set("trace",{...u,settings:{color:nt,size:se}}),s}),Pa(!1),fi(!0)}}),c.jsx("span",{children:"Top"})]}),c.jsxs("label",{className:"radio-label",children:[c.jsx("input",{type:"radio",name:"traceToolLayer",checked:Wt==="bottom",onChange:()=>{Zl("bottom"),Ut("bottom"),Mt(Te),ut(Ae),kn(a=>{const s=new Map(a),u=s.get("trace");return u&&s.set("trace",{...u,settings:{color:Te,size:Ae}}),s}),Pa(!1),Ao(!0)}}),c.jsx("span",{children:"Bottom"})]})]}),z==="draw"&&ge==="pad"&&jc&&c.jsxs("div",{ref:Ac,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[c.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[c.jsx("input",{type:"radio",name:"padToolLayer",checked:Al==="top",onChange:()=>{Ec("top"),Ut("top"),Mt(tt),ut(ne),kn(a=>{const s=new Map(a),u=s.get("pad");return u&&s.set("pad",{...u,settings:{color:tt,size:ne}}),s}),Do(!1),fi(!0)}}),c.jsx("span",{children:"Top"})]}),c.jsxs("label",{className:"radio-label",children:[c.jsx("input",{type:"radio",name:"padToolLayer",checked:Al==="bottom",onChange:()=>{Ec("bottom"),Ut("bottom"),Mt(Ft),ut(ft),kn(a=>{const s=new Map(a),u=s.get("pad");return u&&s.set("pad",{...u,settings:{color:Ft,size:ft}}),s}),Do(!1),Ao(!0)}}),c.jsx("span",{children:"Bottom"})]})]}),_s&&z==="power"&&c.jsxs("div",{style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,minWidth:"200px"},children:[c.jsx("div",{style:{marginBottom:"6px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),bt.length===0?c.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...bt].sort((a,s)=>{const u=y=>{const f=y.match(/([+-]?)(\d+\.?\d*)/);if(f){const h=f[1]||"+",v=parseFloat(f[2]);return{absValue:Math.abs(v),isNegative:h==="-",original:y}}return{absValue:1/0,isNegative:!1,original:y}},d=u(a.voltage),g=u(s.voltage);return d.absValue!==g.absValue?d.absValue-g.absValue:d.isNegative!==g.isNegative?d.isNegative?-1:1:0}).map(a=>c.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),ko(a.id),hi(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",marginBottom:"4px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),c.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),c.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),hi(!1),ko(null),ue("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),z==="component"&&No&&c.jsxs("div",{ref:Ja,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[c.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[c.jsx("input",{type:"radio",name:"componentToolLayer",checked:Ie==="top",onClick:()=>{Ma("top"),Ut("top"),Mt(C),ut(He),kn(a=>{const s=new Map(a),u=s.get("component");return u&&s.set("component",{...u,settings:{color:C,size:He}}),s}),jn(!1),fi(!0),xn(!0)}}),c.jsx("span",{children:"Top"})]}),c.jsxs("label",{className:"radio-label",children:[c.jsx("input",{type:"radio",name:"componentToolLayer",checked:Ie==="bottom",onClick:()=>{Ma("bottom"),Ut("bottom"),Mt(ce),ut(lt),kn(a=>{const s=new Map(a),u=s.get("component");return u&&s.set("component",{...u,settings:{color:ce,size:lt}}),s}),jn(!1),Ao(!0),xn(!0)}}),c.jsx("span",{children:"Bottom"})]})]}),z==="component"&&Ro&&c.jsxs("div",{ref:gi,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"400px",overflowY:"auto",minWidth:"200px"},children:[c.jsx("div",{style:{marginBottom:"6px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Component Type:"}),Object.entries(ef).map(([a,s])=>c.jsxs("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),yi(a),xn(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px",marginBottom:"2px",background:_n===a?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",color:"#333"},children:[s.prefix.join(", ")," - ",a," (",s.defaultPins," pins)"]},a)),c.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),xn(!1),ue("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),c.jsxs("div",{style:{position:"absolute",top:6,left:56,bottom:6,width:168,padding:8,display:"flex",flexDirection:"column",gap:4,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[c.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),c.jsxs("div",{onClick:()=>Ut("top"),title:"Top layer",style:{cursor:"pointer",padding:4,borderRadius:6,border:Ve==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[c.jsx("div",{style:{fontSize:12,color:"#444",fontWeight:600},children:"Top Image"}),c.jsx("label",{className:"radio-label",style:{margin:0},children:c.jsx("input",{type:"checkbox",checked:Yi,onChange:a=>fi(a.target.checked)})})]}),c.jsx("canvas",{ref:ks,width:100,height:64})]}),c.jsxs("div",{onClick:()=>Ut("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:4,borderRadius:6,border:Ve==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[c.jsx("div",{style:{fontSize:12,color:"#444",fontWeight:600},children:"Bottom Image"}),c.jsx("label",{className:"radio-label",style:{margin:0},children:c.jsx("input",{type:"checkbox",checked:di,onChange:a=>Ao(a.target.checked)})})]}),c.jsx("canvas",{ref:$a,width:100,height:64})]}),c.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"4px 0"}}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Nn,onChange:a=>Mo(a.target.checked)}),c.jsx("span",{children:"Vias"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:za,onChange:a=>Xi(a.target.checked)}),c.jsx("span",{children:"Pads (Top)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Fa,onChange:a=>Rs(a.target.checked)}),c.jsx("span",{children:"Pads (Bottom)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Il,onChange:a=>pi(a.target.checked)}),c.jsx("span",{children:"Traces (Top)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:El,onChange:a=>Ds(a.target.checked)}),c.jsx("span",{children:"Traces (Bottom)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:aa,onChange:a=>Ns(a.target.checked)}),c.jsx("span",{children:"Components (Top)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Ea,onChange:a=>Os(a.target.checked)}),c.jsx("span",{children:"Components (Bottom)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Wa,onChange:a=>Tc(a.target.checked)}),c.jsx("span",{children:"Power"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:ul,onChange:a=>Gi(a.target.checked)}),c.jsx("span",{children:"Ground"})]}),c.jsxs("div",{style:{marginTop:16},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs("label",{style:{fontSize:12,color:"#333"},children:["Transparency: ",he,"%"]}),c.jsxs("label",{className:"radio-label",style:{margin:0},children:[c.jsx("input",{type:"checkbox",checked:G,onChange:a=>{const s=a.target.checked;s?(fi(!0),Ao(!0)):(ee(50),ue("select")),je(s)}}),c.jsx("span",{style:{marginLeft:6,fontSize:12},children:"Cycle"})]})]}),c.jsx("input",{type:"range",min:"0",max:"100",value:he,onChange:a=>ee(Number(a.target.value)),onDoubleClick:()=>pl("transparency"),className:"slider",style:{width:"100%",marginTop:6}})]})]}),!M&&!x&&c.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[c.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#333",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),c.jsxs("div",{style:{fontSize:"14px",color:"#666",marginBottom:"16px",lineHeight:"1.5"},children:["Supports ",c.jsx("strong",{style:{color:"#4CAF50"},children:"Typical 4-Layer PCBs"})]}),c.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5"},children:["Use the ",c.jsx("strong",{children:"File"})," menu to start a new project."]}),c.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5"},children:["Use the ",c.jsx("strong",{children:"Images"})," menu to load PCB photos."]})]}),c.jsx("canvas",{ref:Xn,width:la.width,height:la.height,onMouseDown:Dc,onMouseMove:bi,onMouseUp:nl,onMouseLeave:nl,onWheel:dl,onDoubleClick:Oo,className:`pcb-canvas ${z==="transform"?"transform-cursor":z==="draw"?"draw-cursor":z==="erase"?"erase-cursor":"default-cursor"}`,style:{...xs?{cursor:xs}:z==="pan"?{cursor:tl?"grabbing":"grab"}:{},width:`${la.width}px`,height:`${la.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),ve&&ve.visible&&(()=>{let a=Xe.find(u=>u.id===ve.id),s="top";return a||(a=at.find(u=>u.id===ve.id),s="bottom"),a?(ve.layer!==s&&En({...ve,layer:s}),c.jsxs("div",{"data-component-editor-dialog":!0,onClick:u=>{if(wt&&wt.componentId===a.id){const d=u.target;(d.tagName==="BUTTON"||d.tagName==="INPUT"||d.closest("button")||d.closest("input"))&&u.stopPropagation()}},style:{position:"fixed",top:Cl?`${Cl.y}px`:"50%",left:Cl?`${Cl.x}px`:"50%",transform:"translate(-50%, -50%)",background:wt&&wt.componentId===a.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:Ri?"grabbing":"default"},children:[c.jsxs("div",{onMouseDown:u=>{const d=u.target;d.tagName==="BUTTON"||d.tagName==="INPUT"||d.closest("button")||d.closest("input")||Cl&&(Ni({x:u.clientX-Cl.x,y:u.clientY-Cl.y}),Ss(!0),u.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:Ri?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[c.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),c.jsx("button",{onClick:()=>{En(null),na(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px",overflowY:"auto",flex:1,minHeight:0},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),c.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:a.componentType})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-layer-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),c.jsxs("select",{id:`component-layer-${a.id}`,name:`component-layer-${a.id}`,value:ve.layer,onChange:u=>En({...ve,layer:u.target.value}),disabled:Fe,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Fe?.6:1},children:[c.jsx("option",{value:"top",children:"Top"}),c.jsx("option",{value:"bottom",children:"Bottom"})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-designator-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Name:"}),c.jsx("input",{id:`component-designator-${a.id}`,name:`component-designator-${a.id}`,type:"text",value:ve.designator,onChange:u=>En({...ve,designator:u.target.value}),disabled:Fe,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Fe?.6:1},placeholder:"e.g., Op Amp OP07"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-abbreviation-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),c.jsx("input",{id:`component-abbreviation-${a.id}`,name:`component-abbreviation-${a.id}`,type:"text",maxLength:4,value:ve.abbreviation.replace(/\*/g,""),onChange:u=>{const d=u.target.value.substring(0,4).toUpperCase();En({...ve,abbreviation:d})},onBlur:u=>{const d=u.target.value.substring(0,4).toUpperCase();En({...ve,abbreviation:d})},disabled:Fe,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:Fe?.6:1},placeholder:"e.g., U2, R7, C1"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-x-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),c.jsx("input",{id:`component-x-${a.id}`,name:`component-x-${a.id}`,type:"number",value:ve.x.toFixed(2),onChange:u=>{const d=parseFloat(u.target.value)||0;En({...ve,x:d})},disabled:Fe,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Fe?.6:1}})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-y-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),c.jsx("input",{id:`component-y-${a.id}`,name:`component-y-${a.id}`,type:"number",value:ve.y.toFixed(2),onChange:u=>{const d=parseFloat(u.target.value)||0;En({...ve,y:d})},disabled:Fe,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Fe?.6:1}})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-manufacturer-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),c.jsx("input",{id:`component-manufacturer-${a.id}`,name:`component-manufacturer-${a.id}`,type:"text",value:ve.manufacturer,onChange:u=>En({...ve,manufacturer:u.target.value}),disabled:Fe,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Fe?.6:1}})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-partnumber-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),c.jsx("input",{id:`component-partnumber-${a.id}`,name:`component-partnumber-${a.id}`,type:"text",value:ve.partNumber,onChange:u=>En({...ve,partNumber:u.target.value}),disabled:Fe,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Fe?.6:1}})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-pincount-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),c.jsx("input",{id:`component-pincount-${a.id}`,name:`component-pincount-${a.id}`,type:"number",min:"1",value:ve.pinCount,onChange:u=>{const d=Math.max(1,parseInt(u.target.value)||1);En({...ve,pinCount:d})},onBlur:u=>{if(Fe){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const d=Math.max(1,parseInt(u.target.value)||1),y=(ve.layer==="top"?Xe:at).find(f=>f.id===ve.id);if(y&&d!==y.pinCount){const f=y.pinConnections||[],h=new Array(d).fill("").map((m,k)=>k<f.length?f[k]:""),v={...y,pinCount:d,pinConnections:h};ve.layer==="top"?At(m=>m.map(k=>k.id===ve.id?v:k)):zn(m=>m.map(k=>k.id===ve.id?v:k)),En({...ve,pinCount:d})}},disabled:Fe,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Fe?.6:1}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),wt&&wt.componentId===a.id&&c.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"9px",color:"#856404"},children:["Pin ",wt.pinIndex+1," selected. Click on a via or pad to connect."]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px",padding:"1px"},children:Array.from({length:ve.pinCount},(u,d)=>{const y=(ve.layer==="top"?Xe:at).find(v=>v.id===ve.id),f=y?.pinConnections&&y.pinConnections.length>d?y.pinConnections[d]:"",h=wt&&wt.componentId===a.id&&wt.pinIndex===d;return wt&&wt.componentId===a.id&&console.log(`Component Editor Pin ${d+1}: pinConnection="${f}", comp.pinConnections=`,y?.pinConnections),c.jsxs("label",{htmlFor:`pin-radio-${a.id}-${d}`,style:{display:"flex",alignItems:"center",gap:"4px",padding:"2px 4px",cursor:"pointer",fontSize:"9px",border:h?"1px solid #0b5fff":f?"1px solid #28a745":"1px solid #ddd",borderRadius:2,background:h?"#e6f0ff":f?"#d4edda":"#fff"},title:f?`Connected to: ${f}`:"Select this pin, then click on a via or pad to connect",children:[c.jsx("input",{id:`pin-radio-${a.id}-${d}`,name:`pin-radio-${a.id}`,type:"radio",checked:!!h,onChange:()=>{if(Fe){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}na(h?null:{componentId:a.id,pinIndex:d})},disabled:Fe,style:{margin:0,cursor:Fe?"not-allowed":"pointer",opacity:Fe?.6:1}}),c.jsxs("span",{style:{color:"#333",fontWeight:h?600:400},children:["Pin ",d+1]}),f&&c.jsx("span",{style:{fontSize:"8px",color:"#28a745",fontWeight:600,marginLeft:"auto"},children:f})]},d)})})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[c.jsx("button",{onClick:()=>{En(null),na(null)},style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),c.jsx("button",{onClick:()=>{if(Fe){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const u=f=>{const h={...f};if(h.designator=ve.designator,h.x=ve.x,h.y=ve.y,h.layer=ve.layer,h.abbreviation=ve.abbreviation.trim()||ys(f.componentType),"manufacturer"in h&&(h.manufacturer=ve.manufacturer),"partNumber"in h&&(h.partNumber=ve.partNumber),ve.pinCount!==f.pinCount){h.pinCount=ve.pinCount;const v=f.pinConnections||[];h.pinConnections=new Array(ve.pinCount).fill("").map((m,k)=>k<v.length?v[k]:"")}else h.pinConnections=f.pinConnections||[];return h},d=Xe.find(f=>f.id===ve.id),g=at.find(f=>f.id===ve.id),y=d||g;if(y){const f=u(y),h=y.layer,v=ve.layer;h!==v?h==="top"?(At(m=>m.filter(k=>k.id!==ve.id)),zn(m=>[...m,f])):(zn(m=>m.filter(k=>k.id!==ve.id)),At(m=>[...m,f])):v==="top"?At(m=>m.map(k=>k.id===ve.id?f:k)):zn(m=>m.map(k=>k.id===ve.id?f:k))}else if(console.warn(`Component ${ve.id} not found in either layer array`),ve.layer==="top"){const f=at.find(h=>h.id===ve.id);if(f){const h=u(f);zn(v=>v.filter(m=>m.id!==ve.id)),At(v=>[...v,h])}}else{const f=Xe.find(h=>h.id===ve.id);if(f){const h=u(f);At(v=>v.filter(m=>m.id!==ve.id)),zn(v=>[...v,h])}}En(null),na(null)},disabled:Fe,style:{padding:"2px 5px",background:Fe?"#f5f5f5":"#0b5fff",color:Fe?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Fe?"not-allowed":"pointer",fontSize:"10px",opacity:Fe?.6:1},children:"Save"})]})]})):null})(),el&&el.visible&&(()=>{if(!Ye.find(u=>u.id===el.id))return null;const s=bt.find(u=>u.id===el.powerBusId);return c.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[c.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),c.jsx("button",{onClick:()=>ai(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),c.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:s?`${s.name} (${s.voltage})`:"Unknown"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`power-layer-${el.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),c.jsxs("select",{id:`power-layer-${el.id}`,name:`power-layer-${el.id}`,value:el.layer,onChange:u=>ai({...el,layer:u.target.value}),disabled:Gt,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:Gt?.6:1},children:[c.jsx("option",{value:"top",children:"Top"}),c.jsx("option",{value:"bottom",children:"Bottom"})]})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),c.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:el.x.toFixed(2)})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),c.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:el.y.toFixed(2)})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[c.jsx("button",{onClick:()=>ai(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),c.jsx("button",{onClick:()=>{Gt||(Vn(u=>u.map(d=>d.id===el.id?{...d,layer:el.layer}:d)),ai(null))},disabled:Gt,style:{padding:"2px 5px",background:Gt?"#f5f5f5":"#0b5fff",color:Gt?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Gt?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!M&&!x&&c.jsx("div",{className:"placeholder"}),c.jsx("div",{ref:mo,className:"scrollbar-horizontal",onScroll:a=>{if(Qn.current)return;const s=a.currentTarget,u=vo.current;Jn(d=>({x:-s.scrollLeft-u,y:d.y}))},"aria-label":"Horizontal pan",children:c.jsx("div",{className:"scrollbar-horizontal-content",ref:Oi})}),c.jsx("div",{ref:wl,className:"scrollbar-vertical",onScroll:a=>{if(Qn.current)return;const s=a.currentTarget,u=ba.current;Jn(d=>({x:d.x,y:-s.scrollTop-u}))},"aria-label":"Vertical pan",children:c.jsx("div",{className:"scrollbar-vertical-content",ref:_i})})]}),zc&&c.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"2px solid #333",borderRadius:8,padding:"20px",zIndex:1e3,minWidth:"500px",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),c.jsx("button",{onClick:()=>Vi(!1),style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666"},children:""})]}),c.jsx("div",{style:{marginBottom:"16px"},children:[...bt].sort((a,s)=>{const u=y=>{const f=y.match(/([+-]?)(\d+\.?\d*)/);if(f){const h=f[1]||"+",v=parseFloat(f[2]);return{absValue:Math.abs(v),isNegative:h==="-",original:y}}return{absValue:1/0,isNegative:!1,original:y}},d=u(a.voltage),g=u(s.voltage);return d.absValue!==g.absValue?d.absValue-g.absValue:d.isNegative!==g.isNegative?d.isNegative?-1:1:0}).map(a=>{const s=bt.findIndex(u=>u.id===a.id);return c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",marginBottom:"8px",background:"#f5f5f5",borderRadius:6,border:"1px solid #ddd"},children:[c.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:a.color,border:"2px solid #333"}}),c.jsxs("div",{style:{flex:1},children:[c.jsx("input",{type:"text",value:a.name,onChange:u=>{const d=[...bt];d[s]={...a,name:u.target.value},ja(d)},placeholder:"Name",style:{width:"100%",padding:"4px 8px",marginBottom:"4px",border:"1px solid #ccc",borderRadius:4,fontSize:"13px"}}),c.jsx("input",{type:"text",value:a.voltage,onChange:u=>{const d=[...bt];d[s]={...a,voltage:u.target.value},ja(d)},placeholder:"Voltage (e.g., +5VDC, +3.3VDC, -5VDC)",style:{width:"100%",padding:"4px 8px",border:"1px solid #ccc",borderRadius:4,fontSize:"13px"}})]}),c.jsx("input",{type:"color",value:a.color,onChange:u=>{const d=[...bt];d[s]={...a,color:u.target.value},ja(d)},style:{width:"40px",height:"40px",border:"1px solid #ccc",borderRadius:4,cursor:"pointer"}}),c.jsx("button",{onClick:()=>{const u=Ye.filter(d=>d.powerBusId===a.id);if(u.length>0){alert(`Cannot delete: ${u.length} power node(s) are using this bus. Remove or reassign them first.`);return}ja(d=>d.filter(g=>g.id!==a.id))},style:{padding:"6px 12px",background:"#ff4444",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Delete"})]},a.id)})}),c.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0VDC",color:"#ff0000"};ja(s=>[...s,a])},style:{width:"100%",padding:"10px",background:"#4CAF50",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"+ Add Power Bus"}),c.jsx("button",{onClick:()=>Vi(!1),style:{width:"100%",padding:"10px",background:"#666",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Close"})]}),c.jsx("input",{ref:Va,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const s=a.target.files?.[0];s&&Zi(s,"top"),a.target.value=""}}),c.jsx("input",{ref:Ga,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const s=a.target.files?.[0];s&&Zi(s,"bottom"),a.target.value=""}}),c.jsx("input",{ref:Cs,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const s=a.target.files?.[0];if(s)try{rl(s.name);const u=await s.text(),d=JSON.parse(u);await Na(d);let g;d.projectInfo?.name?g=d.projectInfo.name:(g=s.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Fn(g),localStorage.setItem("pcb_project_name",g)),mn||(Fn(g),localStorage.setItem("pcb_project_name",g)),setTimeout(()=>{d.autoSave?.enabled===!0||wo({visible:!0,source:"open"})},100)}catch(u){console.error("Failed to open project",u),alert("Failed to open project file. See console for details.")}a.target.value=""}}),ws.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"20px",zIndex:1e4,pointerEvents:"none"},children:c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:8,padding:"20px",minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",position:"relative",pointerEvents:"auto",border:"1px solid #ddd"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#222"},children:"Detailed Information"}),c.jsx("button",{onClick:()=>Ts({visible:!1,text:""}),style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:0,width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),c.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const a=Ee.filter(y=>Se.has(y.id)).length,s=[...Xe,...at].filter(y=>qe.has(y.id)).length,u=Ye.filter(y=>We.has(y.id)).length,d=dt.filter(y=>Le.has(y.id)).length,g=a+s+u+d;return g>0?c.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#e8e8e8",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:"#333",marginBottom:"8px"},children:[g," Object",g!==1?"s":""," Selected"]}):null})(),qe.size>0&&(()=>{const a=Ee.some(s=>Se.has(s.id)&&(s.type==="via"||s.type==="pad"));return[...Xe,...at].filter(s=>qe.has(s.id)).map(s=>c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:s.componentType})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[c.jsxs("div",{children:["Layer: ",s.layer]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsxs("span",{children:["Designator: ",s.designator||"(empty)"]}),a&&c.jsx("button",{onClick:()=>{const u=[...Xe,...at].filter(k=>qe.has(k.id)&&k.componentType===s.componentType),d=u.length,g=Ee.filter(k=>Se.has(k.id)&&k.type==="pad"&&k.points.length>0&&k.points[0].id!==void 0).map(k=>({stroke:k,nodeId:k.points[0].id})).sort((k,B)=>k.nodeId-B.nodeId),y=g.length>0?g:Ee.filter(k=>Se.has(k.id)&&k.type==="via"&&k.points.length>0&&k.points[0].id!==void 0).map(k=>({stroke:k,nodeId:k.points[0].id})).sort((k,B)=>k.nodeId-B.nodeId),f=y.length;if(f===0){console.warn("No vias or pads with Node IDs found in selection");return}const h=Math.floor(f/d);if(h===0){console.warn(`Not enough ${g.length>0?"pads":"vias"} (${f}) for ${d} components`);return}[...u].sort((k,B)=>k.id.localeCompare(B.id)).forEach((k,B)=>{const te=B*h,Y=te+h,L=y.slice(te,Y).map(N=>N.nodeId.toString());k.layer==="top"?At(N=>N.map(P=>P.id===k.id?{...P,pinCount:h,pinConnections:L}:P)):zn(N=>N.map(P=>P.id===k.id?{...P,pinCount:h,pinConnections:L}:P))});const m=g.length>0?"pads":"vias";console.log(`Connected ${d} components of type ${s.componentType} to ${f} ${m} (${h} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),c.jsxs("div",{children:["Abbreviation: ",s.abbreviation||"(empty)"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:s.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:s.color})]}),c.jsxs("div",{children:["Size: ",s.size]}),c.jsxs("div",{children:["Pin Count: ",s.pinCount]}),s.pinConnections&&s.pinConnections.length>0&&c.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[c.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),c.jsx("tbody",{children:s.pinConnections.map((u,d)=>c.jsxs("tr",{style:{backgroundColor:d%2===0?"#fff":"#f9f9f9"},children:[c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:d+1}),c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:u||"(not connected)"})]},d))})]})]}),"manufacturer"in s&&s.manufacturer&&c.jsxs("div",{children:["Manufacturer: ",s.manufacturer]}),"partNumber"in s&&s.partNumber&&c.jsxs("div",{children:["Part Number: ",s.partNumber]}),c.jsxs("div",{children:["Position: x=",s.x.toFixed(2),", y=",s.y.toFixed(2)]})]})]},s.id))})(),Se.size>0&&Ee.filter(a=>Se.has(a.id)&&a.type==="via"&&a.points.length>0).map(a=>{const s=a.points[0],u=a.viaType||(s.id!==void 0?jl(s.id,bt):"Via (Signal)");return c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:u})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[s.id&&c.jsxs("div",{children:["Node ID: ",s.id]}),c.jsx("div",{children:"Layer: Top and Bottom"}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]}),c.jsxs("div",{children:["Position: x=",s.x.toFixed(2),", y=",s.y.toFixed(2)]})]})]},a.id)}),Se.size>0&&Ee.filter(a=>Se.has(a.id)&&a.type==="pad"&&a.points.length>0).map(a=>{const s=a.points[0],u=a.padType||(s.id!==void 0?Aa(s.id,bt):"Pad (Signal)");return c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:u})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[s.id&&c.jsxs("div",{children:["Node ID: ",s.id]}),c.jsxs("div",{children:["Layer: ",a.layer]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]}),c.jsxs("div",{children:["Position: x=",s.x.toFixed(2),", y=",s.y.toFixed(2)]})]})]},a.id)}),Se.size>0&&Ee.filter(a=>Se.has(a.id)&&a.type==="trace").map(a=>c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||"unknown"})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[a.points.length>0&&c.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[c.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",a.points.length]}),c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),c.jsx("tbody",{children:a.points.map((s,u)=>c.jsxs("tr",{style:{backgroundColor:u%2===0?"#fff":"#f9f9f9"},children:[c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:u}),c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:s.x.toFixed(2)}),c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:s.y.toFixed(2)}),c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:s.id||"(none)"})]},u))})]})]}),c.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",a.layer]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]})]})]},a.id)),We.size>0&&Ye.filter(a=>We.has(a.id)).map(a=>{const s=bt.find(u=>u.id===a.powerBusId);return c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||(s?`${s.name} Power Node`:"Power Node")})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[c.jsxs("div",{children:["Node ID: ",a.pointId||"(not assigned)"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]}),c.jsxs("div",{children:["Layer: ",a.layer]}),c.jsxs("div",{children:["Power Bus: ",s?.name||a.powerBusId||"(unknown)"]}),c.jsxs("div",{children:["Position: x=",a.x.toFixed(2),", y=",a.y.toFixed(2)]})]})]},a.id)}),Le.size>0&&dt.filter(a=>Le.has(a.id)).map(a=>c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||"Ground Node"})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[c.jsxs("div",{children:["Node ID: ",a.pointId||"(not assigned)"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]}),c.jsxs("div",{children:["Position: x=",a.x.toFixed(2),", y=",a.y.toFixed(2)]})]})]},a.id))]})]})}),Es.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&Ji()},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),c.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:Ji,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:an,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),c.jsx("button",{ref:Sc,onClick:Gs,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),qt.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&dn()},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),c.jsx("input",{ref:Cc,type:"text",value:qt.projectName,onChange:a=>{si(s=>({...s,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Ra()):a.key==="Escape"&&(a.preventDefault(),dn())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),qt.projectName&&(()=>{const a=qt.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const s=[...new Set(a)];return c.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",s.map(u=>`"${u}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),c.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[c.jsx("input",{type:"text",value:qt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:qt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),c.jsx("button",{onClick:Wi,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),qt.projectName&&qt.locationPath&&c.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[c.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),c.jsxs("div",{style:{color:"#4CAF50"},children:[qt.locationPath,"/",qt.projectName,"/project.json"]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:dn,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:Ra,disabled:!qt.projectName.trim()||!qt.locationHandle,style:{padding:"8px 16px",background:!qt.projectName.trim()||!qt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!qt.projectName.trim()||!qt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!qt.projectName.trim()||!qt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!qt.projectName.trim()||!qt.locationHandle?.6:1},children:"Create"})]})]})}),It.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Vs()},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),c.jsx("input",{ref:Ui,type:"text",value:It.filename,onChange:a=>{ci(s=>({...s,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Nc()):a.key==="Escape"&&(a.preventDefault(),Vs())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),c.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[c.jsx("input",{type:"text",value:It.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:It.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),c.jsx("button",{onClick:Rc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),It.filename&&It.locationPath&&c.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[c.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),c.jsxs("div",{style:{color:"#4CAF50"},children:[It.locationPath,"/",It.filename.endsWith(".json")?It.filename:`${It.filename}.json`]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:Vs,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:Nc,disabled:!It.filename.trim()||!It.locationHandle,style:{padding:"8px 16px",background:!It.filename.trim()||!It.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!It.filename.trim()||!It.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!It.filename.trim()||!It.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!It.filename.trim()||!It.locationHandle?.6:1},children:"Save"})]})]})}),zs.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&To({visible:!1,title:"",message:""})},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[c.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),c.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:zs.title})]}),c.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:zs.message}),c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:c.jsx("button",{onClick:()=>To({visible:!1,title:"",message:""}),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}),Tl.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Ca({visible:!1,size:6})},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),c.jsx("input",{ref:Co,type:"number",min:"1",max:"99",value:Tl.size,onChange:a=>{const s=parseInt(a.target.value)||1,u=Math.max(1,Math.min(99,s));Ca(d=>({...d,size:u}))},onKeyDown:a=>{if(a.key==="Enter"?Ki():a.key==="Escape"&&Ca({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const s=Tl.size.toString();s.length>=2&&Co.current?.selectionStart===Co.current?.selectionEnd&&Co.current?.selectionStart===s.length&&a.preventDefault()}},onInput:a=>{const s=a.target,u=s.value;if(u.length>2){s.value=u.slice(0,2);const d=parseInt(s.value)||1;Ca(g=>({...g,size:Math.max(1,Math.min(99,d))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),c.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(Tl.size)?Tl.size:"",onChange:a=>{const s=parseInt(a.target.value);!isNaN(s)&&s>0&&Ca(u=>({...u,size:s}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[c.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>c.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:()=>Ca({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:Ki,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Za.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&sl({visible:!1,interval:5})},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),c.jsxs("select",{value:Za.interval===null?"disable":(Za.interval||5).toString(),onChange:a=>{const s=a.target.value;if(s==="disable")sl({visible:!0,interval:null});else{const u=parseFloat(s);!isNaN(u)&&u>0&&sl({visible:!0,interval:u})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[c.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),c.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),c.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),c.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),c.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),c.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:()=>sl({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:An,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Bi.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&Ls()},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),c.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:Ls,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),c.jsx("button",{onClick:Hs,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Enable Auto Save"})]})]})})]})]})}z0.createRoot(document.getElementById("root")).render(c.jsx(S.StrictMode,{children:c.jsx(K0,{})}));
