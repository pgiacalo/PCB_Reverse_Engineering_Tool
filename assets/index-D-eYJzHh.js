(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function o(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(u){if(u.ep)return;u.ep=!0;const f=o(u);fetch(u.href,f)}})();var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dh={exports:{}},wd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function Sm(){if(Yg)return wd;Yg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function o(s,u,f){var v=null;if(f!==void 0&&(v=""+f),u.key!==void 0&&(v=""+u.key),"key"in u){f={};for(var h in u)h!=="key"&&(f[h]=u[h])}else f=u;return u=f.ref,{$$typeof:r,type:s,key:v,ref:u!==void 0?u:null,props:f}}return wd.Fragment=n,wd.jsx=o,wd.jsxs=o,wd}var Gg;function Cm(){return Gg||(Gg=1,Dh.exports=Sm()),Dh.exports}var a=Cm(),Eh={exports:{}},oi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function Tm(){if(Xg)return oi;Xg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),v=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),E=Symbol.iterator;function C(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,z={};function V(F,A,M){this.props=F,this.context=A,this.refs=z,this.updater=M||K}V.prototype.isReactComponent={},V.prototype.setState=function(F,A){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,A,"setState")},V.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function ae(){}ae.prototype=V.prototype;function ce(F,A,M){this.props=F,this.context=A,this.refs=z,this.updater=M||K}var H=ce.prototype=new ae;H.constructor=ce,O(H,V.prototype),H.isPureReactComponent=!0;var se=Array.isArray;function Q(){}var N={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function W(F,A,M){var B=M.ref;return{$$typeof:r,type:F,key:A,ref:B!==void 0?B:null,props:M}}function X(F,A){return W(F.type,A,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===r}function S(F){var A={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(M){return A[M]})}var J=/\/+/g;function ie(F,A){return typeof F=="object"&&F!==null&&F.key!=null?S(""+F.key):A.toString(36)}function ge(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Q,Q):(F.status="pending",F.then(function(A){F.status==="pending"&&(F.status="fulfilled",F.value=A)},function(A){F.status==="pending"&&(F.status="rejected",F.reason=A)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function $(F,A,M,B,de){var ke=typeof F;(ke==="undefined"||ke==="boolean")&&(F=null);var De=!1;if(F===null)De=!0;else switch(ke){case"bigint":case"string":case"number":De=!0;break;case"object":switch(F.$$typeof){case r:case n:De=!0;break;case T:return De=F._init,$(De(F._payload),A,M,B,de)}}if(De)return de=de(F),De=B===""?"."+ie(F,0):B,se(de)?(M="",De!=null&&(M=De.replace(J,"$&/")+"/"),$(de,A,M,"",function(tt){return tt})):de!=null&&(k(de)&&(de=X(de,M+(de.key==null||F&&F.key===de.key?"":(""+de.key).replace(J,"$&/")+"/")+De)),A.push(de)),1;De=0;var Ge=B===""?".":B+":";if(se(F))for(var ze=0;ze<F.length;ze++)B=F[ze],ke=Ge+ie(B,ze),De+=$(B,A,M,ke,de);else if(ze=C(F),typeof ze=="function")for(F=ze.call(F),ze=0;!(B=F.next()).done;)B=B.value,ke=Ge+ie(B,ze++),De+=$(B,A,M,ke,de);else if(ke==="object"){if(typeof F.then=="function")return $(ge(F),A,M,B,de);throw A=String(F),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return De}function te(F,A,M){if(F==null)return F;var B=[],de=0;return $(F,B,"","",function(ke){return A.call(M,ke,de++)}),B}function he(F){if(F._status===-1){var A=F._result;A=A(),A.then(function(M){(F._status===0||F._status===-1)&&(F._status=1,F._result=M)},function(M){(F._status===0||F._status===-1)&&(F._status=2,F._result=M)}),F._status===-1&&(F._status=0,F._result=A)}if(F._status===1)return F._result.default;throw F._result}var je=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},be={map:te,forEach:function(F,A,M){te(F,function(){A.apply(this,arguments)},M)},count:function(F){var A=0;return te(F,function(){A++}),A},toArray:function(F){return te(F,function(A){return A})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return oi.Activity=D,oi.Children=be,oi.Component=V,oi.Fragment=o,oi.Profiler=u,oi.PureComponent=ce,oi.StrictMode=s,oi.Suspense=b,oi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,oi.__COMPILER_RUNTIME={__proto__:null,c:function(F){return N.H.useMemoCache(F)}},oi.cache=function(F){return function(){return F.apply(null,arguments)}},oi.cacheSignal=function(){return null},oi.cloneElement=function(F,A,M){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var B=O({},F.props),de=F.key;if(A!=null)for(ke in A.key!==void 0&&(de=""+A.key),A)!R.call(A,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&A.ref===void 0||(B[ke]=A[ke]);var ke=arguments.length-2;if(ke===1)B.children=M;else if(1<ke){for(var De=Array(ke),Ge=0;Ge<ke;Ge++)De[Ge]=arguments[Ge+2];B.children=De}return W(F.type,de,B)},oi.createContext=function(F){return F={$$typeof:v,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:f,_context:F},F},oi.createElement=function(F,A,M){var B,de={},ke=null;if(A!=null)for(B in A.key!==void 0&&(ke=""+A.key),A)R.call(A,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(de[B]=A[B]);var De=arguments.length-2;if(De===1)de.children=M;else if(1<De){for(var Ge=Array(De),ze=0;ze<De;ze++)Ge[ze]=arguments[ze+2];de.children=Ge}if(F&&F.defaultProps)for(B in De=F.defaultProps,De)de[B]===void 0&&(de[B]=De[B]);return W(F,ke,de)},oi.createRef=function(){return{current:null}},oi.forwardRef=function(F){return{$$typeof:h,render:F}},oi.isValidElement=k,oi.lazy=function(F){return{$$typeof:T,_payload:{_status:-1,_result:F},_init:he}},oi.memo=function(F,A){return{$$typeof:x,type:F,compare:A===void 0?null:A}},oi.startTransition=function(F){var A=N.T,M={};N.T=M;try{var B=F(),de=N.S;de!==null&&de(M,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(Q,je)}catch(ke){je(ke)}finally{A!==null&&M.types!==null&&(A.types=M.types),N.T=A}},oi.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},oi.use=function(F){return N.H.use(F)},oi.useActionState=function(F,A,M){return N.H.useActionState(F,A,M)},oi.useCallback=function(F,A){return N.H.useCallback(F,A)},oi.useContext=function(F){return N.H.useContext(F)},oi.useDebugValue=function(){},oi.useDeferredValue=function(F,A){return N.H.useDeferredValue(F,A)},oi.useEffect=function(F,A){return N.H.useEffect(F,A)},oi.useEffectEvent=function(F){return N.H.useEffectEvent(F)},oi.useId=function(){return N.H.useId()},oi.useImperativeHandle=function(F,A,M){return N.H.useImperativeHandle(F,A,M)},oi.useInsertionEffect=function(F,A){return N.H.useInsertionEffect(F,A)},oi.useLayoutEffect=function(F,A){return N.H.useLayoutEffect(F,A)},oi.useMemo=function(F,A){return N.H.useMemo(F,A)},oi.useOptimistic=function(F,A){return N.H.useOptimistic(F,A)},oi.useReducer=function(F,A,M){return N.H.useReducer(F,A,M)},oi.useRef=function(F){return N.H.useRef(F)},oi.useState=function(F){return N.H.useState(F)},oi.useSyncExternalStore=function(F,A,M){return N.H.useSyncExternalStore(F,A,M)},oi.useTransition=function(){return N.H.useTransition()},oi.version="19.2.0",oi}var $g;function L0(){return $g||($g=1,Eh.exports=Tm()),Eh.exports}var I=L0();const _t=wm(I);var Rh={exports:{}},Sd={},Mh={exports:{}},Bh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function jm(){return Kg||(Kg=1,(function(r){function n($,te){var he=$.length;$.push(te);e:for(;0<he;){var je=he-1>>>1,be=$[je];if(0<u(be,te))$[je]=te,$[he]=be,he=je;else break e}}function o($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var te=$[0],he=$.pop();if(he!==te){$[0]=he;e:for(var je=0,be=$.length,F=be>>>1;je<F;){var A=2*(je+1)-1,M=$[A],B=A+1,de=$[B];if(0>u(M,he))B<be&&0>u(de,M)?($[je]=de,$[B]=he,je=B):($[je]=M,$[A]=he,je=A);else if(B<be&&0>u(de,he))$[je]=de,$[B]=he,je=B;else break e}}return te}function u($,te){var he=$.sortIndex-te.sortIndex;return he!==0?he:$.id-te.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var v=Date,h=v.now();r.unstable_now=function(){return v.now()-h}}var b=[],x=[],T=1,D=null,E=3,C=!1,K=!1,O=!1,z=!1,V=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function H($){for(var te=o(x);te!==null;){if(te.callback===null)s(x);else if(te.startTime<=$)s(x),te.sortIndex=te.expirationTime,n(b,te);else break;te=o(x)}}function se($){if(O=!1,H($),!K)if(o(b)!==null)K=!0,Q||(Q=!0,S());else{var te=o(x);te!==null&&ge(se,te.startTime-$)}}var Q=!1,N=-1,R=5,W=-1;function X(){return z?!0:!(r.unstable_now()-W<R)}function k(){if(z=!1,Q){var $=r.unstable_now();W=$;var te=!0;try{e:{K=!1,O&&(O=!1,ae(N),N=-1),C=!0;var he=E;try{t:{for(H($),D=o(b);D!==null&&!(D.expirationTime>$&&X());){var je=D.callback;if(typeof je=="function"){D.callback=null,E=D.priorityLevel;var be=je(D.expirationTime<=$);if($=r.unstable_now(),typeof be=="function"){D.callback=be,H($),te=!0;break t}D===o(b)&&s(b),H($)}else s(b);D=o(b)}if(D!==null)te=!0;else{var F=o(x);F!==null&&ge(se,F.startTime-$),te=!1}}break e}finally{D=null,E=he,C=!1}te=void 0}}finally{te?S():Q=!1}}}var S;if(typeof ce=="function")S=function(){ce(k)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ie=J.port2;J.port1.onmessage=k,S=function(){ie.postMessage(null)}}else S=function(){V(k,0)};function ge($,te){N=V(function(){$(r.unstable_now())},te)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function($){switch(E){case 1:case 2:case 3:var te=3;break;default:te=E}var he=E;E=te;try{return $()}finally{E=he}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function($,te){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var he=E;E=$;try{return te()}finally{E=he}},r.unstable_scheduleCallback=function($,te,he){var je=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?je+he:je):he=je,$){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=he+be,$={id:T++,callback:te,priorityLevel:$,startTime:he,expirationTime:be,sortIndex:-1},he>je?($.sortIndex=he,n(x,$),o(b)===null&&$===o(x)&&(O?(ae(N),N=-1):O=!0,ge(se,he-je))):($.sortIndex=be,n(b,$),K||C||(K=!0,Q||(Q=!0,S()))),$},r.unstable_shouldYield=X,r.unstable_wrapCallback=function($){var te=E;return function(){var he=E;E=te;try{return $.apply(this,arguments)}finally{E=he}}}})(Bh)),Bh}var Zg;function km(){return Zg||(Zg=1,Mh.exports=jm()),Mh.exports}var Oh={exports:{}},bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function Am(){if(Jg)return bs;Jg=1;var r=L0();function n(b){var x="https://react.dev/errors/"+b;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)x+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+b+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(n(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(b,x,T){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:D==null?null:""+D,children:b,containerInfo:x,implementation:T}}var v=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(b,x){if(b==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bs.createPortal=function(b,x){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(n(299));return f(b,x,null,T)},bs.flushSync=function(b){var x=v.T,T=s.p;try{if(v.T=null,s.p=2,b)return b()}finally{v.T=x,s.p=T,s.d.f()}},bs.preconnect=function(b,x){typeof b=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(b,x))},bs.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},bs.preinit=function(b,x){if(typeof b=="string"&&x&&typeof x.as=="string"){var T=x.as,D=h(T,x.crossOrigin),E=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;T==="style"?s.d.S(b,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:D,integrity:E,fetchPriority:C}):T==="script"&&s.d.X(b,{crossOrigin:D,integrity:E,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},bs.preinitModule=function(b,x){if(typeof b=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var T=h(x.as,x.crossOrigin);s.d.M(b,{crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(b)},bs.preload=function(b,x){if(typeof b=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var T=x.as,D=h(T,x.crossOrigin);s.d.L(b,T,{crossOrigin:D,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},bs.preloadModule=function(b,x){if(typeof b=="string")if(x){var T=h(x.as,x.crossOrigin);s.d.m(b,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(b)},bs.requestFormReset=function(b){s.d.r(b)},bs.unstable_batchedUpdates=function(b,x){return b(x)},bs.useFormState=function(b,x,T){return v.H.useFormState(b,x,T)},bs.useFormStatus=function(){return v.H.useHostTransitionStatus()},bs.version="19.2.0",bs}var Qg;function Nm(){if(Qg)return Oh.exports;Qg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),Oh.exports=Am(),Oh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function _m(){if(e1)return Sd;e1=1;var r=km(),n=L0(),o=Nm();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function v(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(f(e)!==e)throw Error(s(188))}function x(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,l=t;;){var p=i.return;if(p===null)break;var m=p.alternate;if(m===null){if(l=p.return,l!==null){i=l;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===i)return b(p),e;if(m===l)return b(p),t;m=m.sibling}throw Error(s(188))}if(i.return!==l.return)i=p,l=m;else{for(var P=!1,oe=p.child;oe;){if(oe===i){P=!0,i=p,l=m;break}if(oe===l){P=!0,l=p,i=m;break}oe=oe.sibling}if(!P){for(oe=m.child;oe;){if(oe===i){P=!0,i=m,l=p;break}if(oe===l){P=!0,l=m,i=p;break}oe=oe.sibling}if(!P)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function T(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=T(e),t!==null)return t;e=e.sibling}return null}var D=Object.assign,E=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function S(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var J=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===J?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case V:return"Profiler";case z:return"StrictMode";case se:return"Suspense";case Q:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case K:return"Portal";case ce:return e.displayName||"Context";case ae:return(e._context.displayName||"Context")+".Consumer";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return t=e.displayName||null,t!==null?t:ie(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}var ge=Array.isArray,$=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},je=[],be=-1;function F(e){return{current:e}}function A(e){0>be||(e.current=je[be],je[be]=null,be--)}function M(e,t){be++,je[be]=e.current,e.current=t}var B=F(null),de=F(null),ke=F(null),De=F(null);function Ge(e,t){switch(M(ke,t),M(de,e),M(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gg(t),e=yg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(B),M(B,e)}function ze(){A(B),A(de),A(ke)}function tt(e){e.memoizedState!==null&&M(De,e);var t=B.current,i=yg(t,e.type);t!==i&&(M(de,e),M(B,i))}function Xe(e){de.current===e&&(A(B),A(de)),De.current===e&&(A(De),md._currentValue=he)}var Tt,jt;function It(e){if(Tt===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Tt=t&&t[1]||"",jt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+e+jt}var pe=!1;function Pt(e,t){if(!e||pe)return"";pe=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(it){var Qe=it}Reflect.construct(e,[],mt)}else{try{mt.call()}catch(it){Qe=it}e.call(mt.prototype)}}else{try{throw Error()}catch(it){Qe=it}(mt=e())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(it){if(it&&Qe&&typeof it.stack=="string")return[it.stack,Qe.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),P=m[0],oe=m[1];if(P&&oe){var Le=P.split(`
`),Ze=oe.split(`
`);for(p=l=0;l<Le.length&&!Le[l].includes("DetermineComponentFrameRoot");)l++;for(;p<Ze.length&&!Ze[p].includes("DetermineComponentFrameRoot");)p++;if(l===Le.length||p===Ze.length)for(l=Le.length-1,p=Ze.length-1;1<=l&&0<=p&&Le[l]!==Ze[p];)p--;for(;1<=l&&0<=p;l--,p--)if(Le[l]!==Ze[p]){if(l!==1||p!==1)do if(l--,p--,0>p||Le[l]!==Ze[p]){var dt=`
`+Le[l].replace(" at new "," at ");return e.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",e.displayName)),dt}while(1<=l&&0<=p);break}}}finally{pe=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?It(i):""}function gn(e,t){switch(e.tag){case 26:case 27:case 5:return It(e.type);case 16:return It("Lazy");case 13:return e.child!==t&&t!==null?It("Suspense Fallback"):It("Suspense");case 19:return It("SuspenseList");case 0:case 15:return Pt(e.type,!1);case 11:return Pt(e.type.render,!1);case 1:return Pt(e.type,!0);case 31:return It("Activity");default:return""}}function Qt(e){try{var t="",i=null;do t+=gn(e,i),i=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ht=Object.prototype.hasOwnProperty,nn=r.unstable_scheduleCallback,Rt=r.unstable_cancelCallback,mn=r.unstable_shouldYield,en=r.unstable_requestPaint,Vn=r.unstable_now,Nt=r.unstable_getCurrentPriorityLevel,Dt=r.unstable_ImmediatePriority,li=r.unstable_UserBlockingPriority,ct=r.unstable_NormalPriority,kt=r.unstable_LowPriority,Rn=r.unstable_IdlePriority,Gt=r.log,zn=r.unstable_setDisableYieldValue,Nn=null,rn=null;function xn(e){if(typeof Gt=="function"&&zn(e),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Nn,e)}catch{}}var rt=Math.clz32?Math.clz32:Vt,$t=Math.log,Ht=Math.LN2;function Vt(e){return e>>>=0,e===0?32:31-($t(e)/Ht|0)|0}var wn=256,Xi=262144,Un=4194304;function un(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Wt(e,t,i){var l=e.pendingLanes;if(l===0)return 0;var p=0,m=e.suspendedLanes,P=e.pingedLanes;e=e.warmLanes;var oe=l&134217727;return oe!==0?(l=oe&~m,l!==0?p=un(l):(P&=oe,P!==0?p=un(P):i||(i=oe&~e,i!==0&&(p=un(i))))):(oe=l&~m,oe!==0?p=un(oe):P!==0?p=un(P):i||(i=l&~e,i!==0&&(p=un(i)))),p===0?0:t!==0&&t!==p&&(t&m)===0&&(m=p&-p,i=t&-t,m>=i||m===32&&(i&4194048)!==0)?t:p}function ko(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Zr(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function go(){var e=Un;return Un<<=1,(Un&62914560)===0&&(Un=4194304),e}function Ao(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Xt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function No(e,t,i,l,p,m){var P=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var oe=e.entanglements,Le=e.expirationTimes,Ze=e.hiddenUpdates;for(i=P&~i;0<i;){var dt=31-rt(i),mt=1<<dt;oe[dt]=0,Le[dt]=-1;var Qe=Ze[dt];if(Qe!==null)for(Ze[dt]=null,dt=0;dt<Qe.length;dt++){var it=Qe[dt];it!==null&&(it.lane&=-536870913)}i&=~mt}l!==0&&ya(e,l,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(P&~t))}function ya(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-rt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|i&261930}function na(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-rt(i),p=1<<l;p&t|e[l]&t&&(e[l]|=t),i&=~p}}function vt(e,t){var i=t&-t;return i=(i&42)!==0?1:ii(i),(i&(e.suspendedLanes|t))!==0?0:i}function ii(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function cr(){var e=te.p;return e!==0?e:(e=window.event,e===void 0?32:Ig(e.type))}function $i(e,t){var i=te.p;try{return te.p=e,t()}finally{te.p=i}}var Sr=Math.random().toString(36).slice(2),xi="__reactFiber$"+Sr,di="__reactProps$"+Sr,yo="__reactContainer$"+Sr,ia="__reactEvents$"+Sr,ma="__reactListeners$"+Sr,qs="__reactHandles$"+Sr,za="__reactResources$"+Sr,Pa="__reactMarker$"+Sr;function os(e){delete e[xi],delete e[di],delete e[ia],delete e[ma],delete e[qs]}function Wn(e){var t=e[xi];if(t)return t;for(var i=e.parentNode;i;){if(t=i[yo]||i[xi]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Cg(e);e!==null;){if(i=e[xi])return i;e=Cg(e)}return t}e=i,i=e.parentNode}return null}function _o(e){if(e=e[xi]||e[yo]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Si(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function xa(e){var t=e[za];return t||(t=e[za]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Pn(e){e[Pa]=!0}var Ts=new Set,Yn={};function ra(e,t){ba(e,t),ba(e+"Capture",t)}function ba(e,t){for(Yn[e]=t,e=0;e<t.length;e++)Ts.add(t[e])}var js=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ks={},Hs={};function xc(e){return ht.call(Hs,e)?!0:ht.call(ks,e)?!1:js.test(e)?Hs[e]=!0:(ks[e]=!0,!1)}function Fi(e,t,i){if(xc(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function As(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function In(e,t,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+l)}}function Mn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ns(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ya(e,t,i){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return p.call(this)},set:function(P){i=""+P,m.call(this,P)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(P){i=""+P},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Da(e){if(!e._valueTracker){var t=Ns(e)?"checked":"value";e._valueTracker=Ya(e,t,""+e[t])}}function al(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=Ns(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function bi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zn=/[\n"\\]/g;function Cr(e){return e.replace(Zn,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ri(e,t,i,l,p,m,P,oe){e.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?e.type=P:e.removeAttribute("type"),t!=null?P==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Mn(t)):e.value!==""+Mn(t)&&(e.value=""+Mn(t)):P!=="submit"&&P!=="reset"||e.removeAttribute("value"),t!=null?sl(e,P,Mn(t)):i!=null?sl(e,P,Mn(i)):l!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?e.name=""+Mn(oe):e.removeAttribute("name")}function qr(e,t,i,l,p,m,P,oe){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),t!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||t!=null)){Da(e);return}i=i!=null?""+Mn(i):"",t=t!=null?""+Mn(t):i,oe||t===e.value||(e.value=t),e.defaultValue=t}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=oe?e.checked:!!l,e.defaultChecked=!!l,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(e.name=P),Da(e)}function sl(e,t,i){t==="number"&&bi(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Ji(e,t,i,l){if(e=e.options,t){t={};for(var p=0;p<i.length;p++)t["$"+i[p]]=!0;for(i=0;i<e.length;i++)p=t.hasOwnProperty("$"+e[i].value),e[i].selected!==p&&(e[i].selected=p),p&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Mn(i),t=null,p=0;p<e.length;p++){if(e[p].value===i){e[p].selected=!0,l&&(e[p].defaultSelected=!0);return}t!==null||e[p].disabled||(t=e[p])}t!==null&&(t.selected=!0)}}function ao(e,t,i){if(t!=null&&(t=""+Mn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Mn(i):""}function va(e,t,i,l){if(t==null){if(l!=null){if(i!=null)throw Error(s(92));if(ge(l)){if(1<l.length)throw Error(s(93));l=l[0]}i=l}i==null&&(i=""),t=i}i=Mn(t),e.defaultValue=i,l=e.textContent,l===i&&l!==""&&l!==null&&(e.value=l),Da(e)}function Hr(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var wa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sa(e,t,i){var l=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,i):typeof i!="number"||i===0||wa.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function _s(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var p in t)l=t[p],t.hasOwnProperty(p)&&i[p]!==l&&Sa(e,p,l)}else for(var m in t)t.hasOwnProperty(m)&&Sa(e,m,t[m])}function Vs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ut(e){return Pl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Sn(){}var Fo=null;function ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cn=null,wt=null;function ec(e){var t=_o(e);if(t&&(e=t.stateNode)){var i=e[di]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ri(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Cr(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var p=l[di]||null;if(!p)throw Error(s(90));Ri(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(t=0;t<i.length;t++)l=i[t],l.form===e.form&&al(l)}break e;case"textarea":ao(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Ji(e,!!i.multiple,t,!1)}}}var Dl=!1;function Hn(e,t,i){if(Dl)return e(t,i);Dl=!0;try{var l=e(t);return l}finally{if(Dl=!1,(Cn!==null||wt!==null)&&(ip(),Cn&&(t=Cn,e=wt,wt=Cn=null,ec(t),e)))for(t=0;t<e.length;t++)ec(e[t])}}function Kt(e,t){var i=e.stateNode;if(i===null)return null;var l=i[di]||null;if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bn=!1;if(Dn)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){bn=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{bn=!1}var tn=null,tc=null,Ut=null;function Mi(){if(Ut)return Ut;var e,t=tc,i=t.length,l,p="value"in tn?tn.value:tn.textContent,m=p.length;for(e=0;e<i&&t[e]===p[e];e++);var P=i-e;for(l=1;l<=P&&t[i-l]===p[m-l];l++);return Ut=p.slice(e,1<l?1-l:void 0)}function Ft(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ki(){return!0}function Ea(){return!1}function so(e){function t(i,l,p,m,P){this._reactName=i,this._targetInst=p,this.type=l,this.nativeEvent=m,this.target=P,this.currentTarget=null;for(var oe in e)e.hasOwnProperty(oe)&&(i=e[oe],this[oe]=i?i(m):m[oe]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ki:Ea,this.isPropagationStopped=Ea,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),t}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=so(Pr),Ho=D({},Pr,{view:0,detail:0}),Ls=so(Ho),cl,Ws,Ga,El=D({},Ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ga&&(Ga&&e.type==="mousemove"?(cl=e.screenX-Ga.screenX,Ws=e.screenY-Ga.screenY):Ws=cl=0,Ga=e),cl)},movementY:function(e){return"movementY"in e?e.movementY:Ws}}),bc=so(El),ul=D({},El,{dataTransfer:0}),fn=so(ul),as=D({},Ho,{relatedTarget:0}),vi=so(as),Ys=D({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),w=so(Ys),q=D({},Pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ye=so(q),Ae=D({},Pr,{data:0}),He=so(Ae),lt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function an(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mt[e])?!!t[e]:!1}function jn(){return an}var Jn=D({},Ho,{key:function(e){if(e.key){var t=lt[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ft(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return e.type==="keypress"?Ft(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ft(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fn=so(Jn),tr=D({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wi=so(tr),qi=D({},Ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn}),Hi=so(qi),Tr=D({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gr=so(Tr),zs=D({},El,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ur=so(zs),Ra=D({},Pr,{newState:0,oldState:0}),Lo=so(Ra),Ps=[9,13,27,32],Dr=Dn&&"CompositionEvent"in window,oa=null;Dn&&"documentMode"in document&&(oa=document.documentMode);var Qi=Dn&&"TextEvent"in window&&!oa,Ma=Dn&&(!Dr||oa&&8<oa&&11>=oa),zo=" ",Rl=!1;function ss(e,t){switch(e){case"keyup":return Ps.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fl(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xa=!1;function Vo(e,t){switch(e){case"compositionend":return fl(t);case"keypress":return t.which!==32?null:(Rl=!0,zo);case"textInput":return e=t.data,e===zo&&Rl?null:e;default:return null}}function aa(e,t){if(Xa)return e==="compositionend"||!Dr&&ss(e,t)?(e=Mi(),Ut=tc=tn=null,Xa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ma&&t.locale!=="ko"?null:t.data;default:return null}}var dl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ca(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dl[e.type]:t==="textarea"}function Po(e,t,i,l){Cn?wt?wt.push(l):wt=[l]:Cn=l,t=up(t,"onChange"),0<t.length&&(i=new qo("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Wo=null,Ds=null;function Gs(e){cg(e,0)}function $a(e){var t=Si(e);if(al(t))return e}function Ba(e,t){if(e==="change")return t}var sa=!1;if(Dn){var lo;if(Dn){var pi="oninput"in document;if(!pi){var la=document.createElement("div");la.setAttribute("oninput","return;"),pi=typeof la.oninput=="function"}lo=pi}else lo=!1;sa=lo&&(!document.documentMode||9<document.documentMode)}function Bi(){Wo&&(Wo.detachEvent("onpropertychange",ls),Ds=Wo=null)}function ls(e){if(e.propertyName==="value"&&$a(Ds)){var t=[];Po(t,Ds,e,ll(e)),Hn(Gs,t)}}function Ml(e,t,i){e==="focusin"?(Bi(),Wo=t,Ds=i,Wo.attachEvent("onpropertychange",ls)):e==="focusout"&&Bi()}function fr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $a(Ds)}function Qc(e,t){if(e==="click")return $a(t)}function cs(e,t){if(e==="input"||e==="change")return $a(t)}function Xs(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yo=typeof Object.is=="function"?Object.is:Xs;function ca(e,t){if(Yo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var p=i[l];if(!ht.call(t,p)||!Yo(e[p],t[p]))return!1}return!0}function Bl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pl(e,t){var i=Bl(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Bl(i)}}function Ta(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ta(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function co(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bi(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=bi(e.document)}return t}function us(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var $s=Dn&&"documentMode"in document&&11>=document.documentMode,Ka=null,Ks=null,ua=null,Za=!1;function Vi(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Za||Ka==null||Ka!==bi(l)||(l=Ka,"selectionStart"in l&&us(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ua&&ca(ua,l)||(ua=l,l=up(Ks,"onSelect"),0<l.length&&(t=new qo("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Ka)))}function Li(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var dr={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionrun:Li("Transition","TransitionRun"),transitionstart:Li("Transition","TransitionStart"),transitioncancel:Li("Transition","TransitionCancel"),transitionend:Li("Transition","TransitionEnd")},Jr={},jr={};Dn&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function Vr(e){if(Jr[e])return Jr[e];if(!dr[e])return e;var t=dr[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in jr)return Jr[e]=t[i];return e}var Oa=Vr("animationend"),Ia=Vr("animationiteration"),Zs=Vr("animationstart"),hl=Vr("transitionrun"),gl=Vr("transitionstart"),fs=Vr("transitioncancel"),vc=Vr("transitionend"),Do=new Map,zi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zi.push("scrollEnd");function Qr(e,t){Do.set(e,t),ra(t,[e])}var Wr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Er=[],nc=0,Js=0;function wc(){for(var e=nc,t=Js=nc=0;t<e;){var i=Er[t];Er[t++]=null;var l=Er[t];Er[t++]=null;var p=Er[t];Er[t++]=null;var m=Er[t];if(Er[t++]=null,l!==null&&p!==null){var P=l.pending;P===null?p.next=p:(p.next=P.next,P.next=p),l.pending=p}m!==0&&ic(i,p,m)}}function Ol(e,t,i,l){Er[nc++]=e,Er[nc++]=t,Er[nc++]=i,Er[nc++]=l,Js|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Wi(e,t,i,l){return Ol(e,t,i,l),Go(e)}function Yr(e,t){return Ol(e,null,null,t),Go(e)}function ic(e,t,i){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i);for(var p=!1,m=e.return;m!==null;)m.childLanes|=i,l=m.alternate,l!==null&&(l.childLanes|=i),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&t!==null&&(p=31-rt(i),e=m.hiddenUpdates,l=e[p],l===null?e[p]=[t]:l.push(t),t.lane=i|536870912),m):null}function Go(e){if(50<ud)throw ud=0,ih=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Eo={};function Sc(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mo(e,t,i,l){return new Sc(e,t,i,l)}function Cc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fa(e,t){var i=e.alternate;return i===null?(i=mo(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Tc(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ds(e,t,i,l,p,m){var P=0;if(l=e,typeof e=="function")Cc(e)&&(P=1);else if(typeof e=="string")P=cm(e,i,B.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case W:return e=mo(31,i,t,p),e.elementType=W,e.lanes=m,e;case O:return ps(i.children,p,m,t);case z:P=8,p|=24;break;case V:return e=mo(12,i,t,p|2),e.elementType=V,e.lanes=m,e;case se:return e=mo(13,i,t,p),e.elementType=se,e.lanes=m,e;case Q:return e=mo(19,i,t,p),e.elementType=Q,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:P=10;break e;case ae:P=9;break e;case H:P=11;break e;case N:P=14;break e;case R:P=16,l=null;break e}P=29,i=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=mo(P,i,t,p),t.elementType=e,t.type=l,t.lanes=m,t}function ps(e,t,i,l){return e=mo(7,e,l,t),e.lanes=i,e}function Es(e,t,i){return e=mo(6,e,null,t),e.lanes=i,e}function yl(e){var t=mo(18,null,null,0);return t.stateNode=e,t}function ml(e,t,i){return t=mo(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var rc=new WeakMap;function Ro(e,t){if(typeof e=="object"&&e!==null){var i=rc.get(e);return i!==void 0?i:(t={value:e,source:t,stack:Qt(t)},rc.set(e,t),t)}return{value:e,source:t,stack:Qt(t)}}var Rs=[],Il=0,Ja=null,xo=0,ja=[],Qa=0,Ua=null,Mo=1,ka="";function Bo(e,t){Rs[Il++]=xo,Rs[Il++]=Ja,Ja=e,xo=t}function xl(e,t,i){ja[Qa++]=Mo,ja[Qa++]=ka,ja[Qa++]=Ua,Ua=e;var l=Mo;e=ka;var p=32-rt(l)-1;l&=~(1<<p),i+=1;var m=32-rt(t)+p;if(30<m){var P=p-p%5;m=(l&(1<<P)-1).toString(32),l>>=P,p-=P,Mo=1<<32-rt(t)+p|i<<p|l,ka=m+e}else Mo=1<<m|i<<p|l,ka=e}function Lu(e){e.return!==null&&(Bo(e,1),xl(e,1,0))}function Bc(e){for(;e===Ja;)Ja=Rs[--Il],Rs[Il]=null,xo=Rs[--Il],Rs[Il]=null;for(;e===Ua;)Ua=ja[--Qa],ja[Qa]=null,ka=ja[--Qa],ja[Qa]=null,Mo=ja[--Qa],ja[Qa]=null}function zu(e,t){ja[Qa++]=Mo,ja[Qa++]=ka,ja[Qa++]=Ua,Mo=t.id,ka=t.overflow,Ua=e}var Xo=null,nr=null,hi=!1,da=null,Rr=!1,hs=Error(s(519));function Aa(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eo(Ro(t,e)),hs}function $o(e){var t=e.stateNode,i=e.type,l=e.memoizedProps;switch(t[xi]=e,t[di]=l,i){case"dialog":Ei("cancel",t),Ei("close",t);break;case"iframe":case"object":case"embed":Ei("load",t);break;case"video":case"audio":for(i=0;i<dd.length;i++)Ei(dd[i],t);break;case"source":Ei("error",t);break;case"img":case"image":case"link":Ei("error",t),Ei("load",t);break;case"details":Ei("toggle",t);break;case"input":Ei("invalid",t),qr(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ei("invalid",t);break;case"textarea":Ei("invalid",t),va(t,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||l.suppressHydrationWarning===!0||pg(t.textContent,i)?(l.popover!=null&&(Ei("beforetoggle",t),Ei("toggle",t)),l.onScroll!=null&&Ei("scroll",t),l.onScrollEnd!=null&&Ei("scrollend",t),l.onClick!=null&&(t.onclick=Sn),t=!0):t=!1,t||Aa(e,!0)}function pa(e){for(Xo=e.return;Xo;)switch(Xo.tag){case 5:case 31:case 13:Rr=!1;return;case 27:case 3:Rr=!0;return;default:Xo=Xo.return}}function Yi(e){if(e!==Xo)return!1;if(!hi)return pa(e),hi=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||xh(e.type,e.memoizedProps)),i=!i),i&&nr&&Aa(e),pa(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));nr=Sg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));nr=Sg(e)}else t===27?(t=nr,vu(e.type)?(e=Ch,Ch=null,nr=e):nr=t):nr=Xo?$l(e.stateNode.nextSibling):null;return!0}function kr(){nr=Xo=null,hi=!1}function es(){var e=da;return e!==null&&(nl===null?nl=e:nl.push.apply(nl,e),da=null),e}function eo(e){da===null?da=[e]:da.push(e)}var Fa=F(null),Mr=null,uo=null;function Gr(e,t,i){M(Fa,t._currentValue),t._currentValue=i}function Xr(e){e._currentValue=Fa.current,A(Fa)}function fo(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function Ko(e,t,i,l){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var P=p.child;m=m.firstContext;e:for(;m!==null;){var oe=m;m=p;for(var Le=0;Le<t.length;Le++)if(oe.context===t[Le]){m.lanes|=i,oe=m.alternate,oe!==null&&(oe.lanes|=i),fo(m.return,i,e),l||(P=null);break e}m=oe.next}}else if(p.tag===18){if(P=p.return,P===null)throw Error(s(341));P.lanes|=i,m=P.alternate,m!==null&&(m.lanes|=i),fo(P,i,e),P=null}else P=p.child;if(P!==null)P.return=p;else for(P=p;P!==null;){if(P===e){P=null;break}if(p=P.sibling,p!==null){p.return=P.return,P=p;break}P=P.return}p=P}}function bo(e,t,i,l){e=null;for(var p=t,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var P=p.alternate;if(P===null)throw Error(s(387));if(P=P.memoizedProps,P!==null){var oe=p.type;Yo(p.pendingProps.value,P.value)||(e!==null?e.push(oe):e=[oe])}}else if(p===De.current){if(P=p.alternate,P===null)throw Error(s(387));P.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(md):e=[md])}p=p.return}e!==null&&Ko(t,e,i,l),t.flags|=262144}function gs(e){for(e=e.firstContext;e!==null;){if(!Yo(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function vo(e){Mr=e,uo=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function yr(e){return ts(Mr,e)}function Zo(e,t){return Mr===null&&vo(e),ts(e,t)}function ts(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},uo===null){if(e===null)throw Error(s(308));uo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else uo=uo.next=t;return i}var qa=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},ys=r.unstable_scheduleCallback,ms=r.unstable_NormalPriority,Ai={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kn(){return{controller:new qa,data:new Map,refCount:0}}function _n(e){e.refCount--,e.refCount===0&&ys(ms,function(){e.controller.abort()})}var Oc=null,Ul=0,d=0,g=null;function j(e,t){if(Oc===null){var i=Oc=[];Ul=0,d=ch(),g={status:"pending",value:void 0,then:function(l){i.push(l)}}}return Ul++,t.then(L,L),t}function L(){if(--Ul===0&&Oc!==null){g!==null&&(g.status="fulfilled");var e=Oc;Oc=null,d=0,g=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Y(e,t){var i=[],l={status:"pending",value:null,reason:null,then:function(p){i.push(p)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var p=0;p<i.length;p++)(0,i[p])(t)},function(p){for(l.status="rejected",l.reason=p,p=0;p<i.length;p++)(0,i[p])(void 0)}),l}var Z=$.S;$.S=function(e,t){B0=Vn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&j(e,t),Z!==null&&Z(e,t)};var ne=F(null);function le(){var e=ne.current;return e!==null?e:Ur.pooledCache}function fe(e,t){t===null?M(ne,ne.current):M(ne,t.pool)}function me(){var e=le();return e===null?null:{parent:Ai._currentValue,pool:e}}var Pe=Error(s(460)),Ye=Error(s(474)),ve=Error(s(542)),Me={then:function(){}};function Fe(e){return e=e.status,e==="fulfilled"||e==="rejected"}function at(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Sn,Sn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,St(e),e;default:if(typeof t.status=="string")t.then(Sn,Sn);else{if(e=Ur,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var p=t;p.status="fulfilled",p.value=l}},function(l){if(t.status==="pending"){var p=t;p.status="rejected",p.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,St(e),e}throw ot=t,Pe}}function We(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ot=i,Pe):i}}var ot=null;function pt(){if(ot===null)throw Error(s(459));var e=ot;return ot=null,e}function St(e){if(e===Pe||e===ve)throw Error(s(483))}var st=null,Bt=0;function Ot(e){var t=Bt;return Bt+=1,st===null&&(st=[]),at(st,e,t)}function An(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Yt(e,t){throw t.$$typeof===E?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ti(e){function t(Ve,Ie){if(e){var Ke=Ve.deletions;Ke===null?(Ve.deletions=[Ie],Ve.flags|=16):Ke.push(Ie)}}function i(Ve,Ie){if(!e)return null;for(;Ie!==null;)t(Ve,Ie),Ie=Ie.sibling;return null}function l(Ve){for(var Ie=new Map;Ve!==null;)Ve.key!==null?Ie.set(Ve.key,Ve):Ie.set(Ve.index,Ve),Ve=Ve.sibling;return Ie}function p(Ve,Ie){return Ve=fa(Ve,Ie),Ve.index=0,Ve.sibling=null,Ve}function m(Ve,Ie,Ke){return Ve.index=Ke,e?(Ke=Ve.alternate,Ke!==null?(Ke=Ke.index,Ke<Ie?(Ve.flags|=67108866,Ie):Ke):(Ve.flags|=67108866,Ie)):(Ve.flags|=1048576,Ie)}function P(Ve){return e&&Ve.alternate===null&&(Ve.flags|=67108866),Ve}function oe(Ve,Ie,Ke,yt){return Ie===null||Ie.tag!==6?(Ie=Es(Ke,Ve.mode,yt),Ie.return=Ve,Ie):(Ie=p(Ie,Ke),Ie.return=Ve,Ie)}function Le(Ve,Ie,Ke,yt){var Ln=Ke.type;return Ln===O?dt(Ve,Ie,Ke.props.children,yt,Ke.key):Ie!==null&&(Ie.elementType===Ln||typeof Ln=="object"&&Ln!==null&&Ln.$$typeof===R&&We(Ln)===Ie.type)?(Ie=p(Ie,Ke.props),An(Ie,Ke),Ie.return=Ve,Ie):(Ie=ds(Ke.type,Ke.key,Ke.props,null,Ve.mode,yt),An(Ie,Ke),Ie.return=Ve,Ie)}function Ze(Ve,Ie,Ke,yt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ke.containerInfo||Ie.stateNode.implementation!==Ke.implementation?(Ie=ml(Ke,Ve.mode,yt),Ie.return=Ve,Ie):(Ie=p(Ie,Ke.children||[]),Ie.return=Ve,Ie)}function dt(Ve,Ie,Ke,yt,Ln){return Ie===null||Ie.tag!==7?(Ie=ps(Ke,Ve.mode,yt,Ln),Ie.return=Ve,Ie):(Ie=p(Ie,Ke),Ie.return=Ve,Ie)}function mt(Ve,Ie,Ke){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=Es(""+Ie,Ve.mode,Ke),Ie.return=Ve,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:return Ke=ds(Ie.type,Ie.key,Ie.props,null,Ve.mode,Ke),An(Ke,Ie),Ke.return=Ve,Ke;case K:return Ie=ml(Ie,Ve.mode,Ke),Ie.return=Ve,Ie;case R:return Ie=We(Ie),mt(Ve,Ie,Ke)}if(ge(Ie)||S(Ie))return Ie=ps(Ie,Ve.mode,Ke,null),Ie.return=Ve,Ie;if(typeof Ie.then=="function")return mt(Ve,Ot(Ie),Ke);if(Ie.$$typeof===ce)return mt(Ve,Zo(Ve,Ie),Ke);Yt(Ve,Ie)}return null}function Qe(Ve,Ie,Ke,yt){var Ln=Ie!==null?Ie.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ln!==null?null:oe(Ve,Ie,""+Ke,yt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case C:return Ke.key===Ln?Le(Ve,Ie,Ke,yt):null;case K:return Ke.key===Ln?Ze(Ve,Ie,Ke,yt):null;case R:return Ke=We(Ke),Qe(Ve,Ie,Ke,yt)}if(ge(Ke)||S(Ke))return Ln!==null?null:dt(Ve,Ie,Ke,yt,null);if(typeof Ke.then=="function")return Qe(Ve,Ie,Ot(Ke),yt);if(Ke.$$typeof===ce)return Qe(Ve,Ie,Zo(Ve,Ke),yt);Yt(Ve,Ke)}return null}function it(Ve,Ie,Ke,yt,Ln){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return Ve=Ve.get(Ke)||null,oe(Ie,Ve,""+yt,Ln);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case C:return Ve=Ve.get(yt.key===null?Ke:yt.key)||null,Le(Ie,Ve,yt,Ln);case K:return Ve=Ve.get(yt.key===null?Ke:yt.key)||null,Ze(Ie,Ve,yt,Ln);case R:return yt=We(yt),it(Ve,Ie,Ke,yt,Ln)}if(ge(yt)||S(yt))return Ve=Ve.get(Ke)||null,dt(Ie,Ve,yt,Ln,null);if(typeof yt.then=="function")return it(Ve,Ie,Ke,Ot(yt),Ln);if(yt.$$typeof===ce)return it(Ve,Ie,Ke,Zo(Ie,yt),Ln);Yt(Ie,yt)}return null}function on(Ve,Ie,Ke,yt){for(var Ln=null,or=null,yn=Ie,mi=Ie=0,Ui=null;yn!==null&&mi<Ke.length;mi++){yn.index>mi?(Ui=yn,yn=null):Ui=yn.sibling;var ar=Qe(Ve,yn,Ke[mi],yt);if(ar===null){yn===null&&(yn=Ui);break}e&&yn&&ar.alternate===null&&t(Ve,yn),Ie=m(ar,Ie,mi),or===null?Ln=ar:or.sibling=ar,or=ar,yn=Ui}if(mi===Ke.length)return i(Ve,yn),hi&&Bo(Ve,mi),Ln;if(yn===null){for(;mi<Ke.length;mi++)yn=mt(Ve,Ke[mi],yt),yn!==null&&(Ie=m(yn,Ie,mi),or===null?Ln=yn:or.sibling=yn,or=yn);return hi&&Bo(Ve,mi),Ln}for(yn=l(yn);mi<Ke.length;mi++)Ui=it(yn,Ve,mi,Ke[mi],yt),Ui!==null&&(e&&Ui.alternate!==null&&yn.delete(Ui.key===null?mi:Ui.key),Ie=m(Ui,Ie,mi),or===null?Ln=Ui:or.sibling=Ui,or=Ui);return e&&yn.forEach(function(ju){return t(Ve,ju)}),hi&&Bo(Ve,mi),Ln}function qn(Ve,Ie,Ke,yt){if(Ke==null)throw Error(s(151));for(var Ln=null,or=null,yn=Ie,mi=Ie=0,Ui=null,ar=Ke.next();yn!==null&&!ar.done;mi++,ar=Ke.next()){yn.index>mi?(Ui=yn,yn=null):Ui=yn.sibling;var ju=Qe(Ve,yn,ar.value,yt);if(ju===null){yn===null&&(yn=Ui);break}e&&yn&&ju.alternate===null&&t(Ve,yn),Ie=m(ju,Ie,mi),or===null?Ln=ju:or.sibling=ju,or=ju,yn=Ui}if(ar.done)return i(Ve,yn),hi&&Bo(Ve,mi),Ln;if(yn===null){for(;!ar.done;mi++,ar=Ke.next())ar=mt(Ve,ar.value,yt),ar!==null&&(Ie=m(ar,Ie,mi),or===null?Ln=ar:or.sibling=ar,or=ar);return hi&&Bo(Ve,mi),Ln}for(yn=l(yn);!ar.done;mi++,ar=Ke.next())ar=it(yn,Ve,mi,ar.value,yt),ar!==null&&(e&&ar.alternate!==null&&yn.delete(ar.key===null?mi:ar.key),Ie=m(ar,Ie,mi),or===null?Ln=ar:or.sibling=ar,or=ar);return e&&yn.forEach(function(vm){return t(Ve,vm)}),hi&&Bo(Ve,mi),Ln}function zr(Ve,Ie,Ke,yt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===O&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case C:e:{for(var Ln=Ke.key;Ie!==null;){if(Ie.key===Ln){if(Ln=Ke.type,Ln===O){if(Ie.tag===7){i(Ve,Ie.sibling),yt=p(Ie,Ke.props.children),yt.return=Ve,Ve=yt;break e}}else if(Ie.elementType===Ln||typeof Ln=="object"&&Ln!==null&&Ln.$$typeof===R&&We(Ln)===Ie.type){i(Ve,Ie.sibling),yt=p(Ie,Ke.props),An(yt,Ke),yt.return=Ve,Ve=yt;break e}i(Ve,Ie);break}else t(Ve,Ie);Ie=Ie.sibling}Ke.type===O?(yt=ps(Ke.props.children,Ve.mode,yt,Ke.key),yt.return=Ve,Ve=yt):(yt=ds(Ke.type,Ke.key,Ke.props,null,Ve.mode,yt),An(yt,Ke),yt.return=Ve,Ve=yt)}return P(Ve);case K:e:{for(Ln=Ke.key;Ie!==null;){if(Ie.key===Ln)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ke.containerInfo&&Ie.stateNode.implementation===Ke.implementation){i(Ve,Ie.sibling),yt=p(Ie,Ke.children||[]),yt.return=Ve,Ve=yt;break e}else{i(Ve,Ie);break}else t(Ve,Ie);Ie=Ie.sibling}yt=ml(Ke,Ve.mode,yt),yt.return=Ve,Ve=yt}return P(Ve);case R:return Ke=We(Ke),zr(Ve,Ie,Ke,yt)}if(ge(Ke))return on(Ve,Ie,Ke,yt);if(S(Ke)){if(Ln=S(Ke),typeof Ln!="function")throw Error(s(150));return Ke=Ln.call(Ke),qn(Ve,Ie,Ke,yt)}if(typeof Ke.then=="function")return zr(Ve,Ie,Ot(Ke),yt);if(Ke.$$typeof===ce)return zr(Ve,Ie,Zo(Ve,Ke),yt);Yt(Ve,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Ie!==null&&Ie.tag===6?(i(Ve,Ie.sibling),yt=p(Ie,Ke),yt.return=Ve,Ve=yt):(i(Ve,Ie),yt=Es(Ke,Ve.mode,yt),yt.return=Ve,Ve=yt),P(Ve)):i(Ve,Ie)}return function(Ve,Ie,Ke,yt){try{Bt=0;var Ln=zr(Ve,Ie,Ke,yt);return st=null,Ln}catch(yn){if(yn===Pe||yn===ve)throw yn;var or=mo(29,yn,null,Ve.mode);return or.lanes=yt,or.return=Ve,or}finally{}}}var Ki=ti(!0),Qn=ti(!1),qt=!1;function zt(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ci(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Zt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function En(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(lr&2)!==0){var p=l.pending;return p===null?t.next=t:(t.next=p.next,p.next=t),l.pending=t,t=Go(e),ic(e,null,i),t}return Ol(e,l,t,i),Go(e)}function gi(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,na(e,i)}}function Br(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var p=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var P={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?p=m=P:m=m.next=P,i=i.next}while(i!==null);m===null?p=m=t:m=m.next=t}else p=m=t;i={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var wo=!1;function yi(){if(wo){var e=g;if(e!==null)throw e}}function Ar(e,t,i,l){wo=!1;var p=e.updateQueue;qt=!1;var m=p.firstBaseUpdate,P=p.lastBaseUpdate,oe=p.shared.pending;if(oe!==null){p.shared.pending=null;var Le=oe,Ze=Le.next;Le.next=null,P===null?m=Ze:P.next=Ze,P=Le;var dt=e.alternate;dt!==null&&(dt=dt.updateQueue,oe=dt.lastBaseUpdate,oe!==P&&(oe===null?dt.firstBaseUpdate=Ze:oe.next=Ze,dt.lastBaseUpdate=Le))}if(m!==null){var mt=p.baseState;P=0,dt=Ze=Le=null,oe=m;do{var Qe=oe.lane&-536870913,it=Qe!==oe.lane;if(it?(Ii&Qe)===Qe:(l&Qe)===Qe){Qe!==0&&Qe===d&&(wo=!0),dt!==null&&(dt=dt.next={lane:0,tag:oe.tag,payload:oe.payload,callback:null,next:null});e:{var on=e,qn=oe;Qe=t;var zr=i;switch(qn.tag){case 1:if(on=qn.payload,typeof on=="function"){mt=on.call(zr,mt,Qe);break e}mt=on;break e;case 3:on.flags=on.flags&-65537|128;case 0:if(on=qn.payload,Qe=typeof on=="function"?on.call(zr,mt,Qe):on,Qe==null)break e;mt=D({},mt,Qe);break e;case 2:qt=!0}}Qe=oe.callback,Qe!==null&&(e.flags|=64,it&&(e.flags|=8192),it=p.callbacks,it===null?p.callbacks=[Qe]:it.push(Qe))}else it={lane:Qe,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},dt===null?(Ze=dt=it,Le=mt):dt=dt.next=it,P|=Qe;if(oe=oe.next,oe===null){if(oe=p.shared.pending,oe===null)break;it=oe,oe=it.next,it.next=null,p.lastBaseUpdate=it,p.shared.pending=null}}while(!0);dt===null&&(Le=mt),p.baseState=Le,p.firstBaseUpdate=Ze,p.lastBaseUpdate=dt,m===null&&(p.shared.lanes=0),gu|=P,e.lanes=P,e.memoizedState=mt}}function Oo(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function to(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Oo(i[e],t)}var ni=F(null),Pi=F(0);function mr(e,t){e=Yc,M(Pi,e),M(ni,t),Yc=e|t.baseLanes}function ci(){M(Pi,Yc),M(ni,ni.current)}function Nr(){Yc=Pi.current,A(ni),A(Pi)}var pr=F(null),Ni=null;function $r(e){var t=e.alternate;M(Ti,Ti.current&1),M(pr,e),Ni===null&&(t===null||ni.current!==null||t.memoizedState!==null)&&(Ni=e)}function Oi(e){M(Ti,Ti.current),M(pr,e),Ni===null&&(Ni=e)}function no(e){e.tag===22?(M(Ti,Ti.current),M(pr,e),Ni===null&&(Ni=e)):_r()}function _r(){M(Ti,Ti.current),M(pr,pr.current)}function Gi(e){A(pr),Ni===e&&(Ni=null),A(Ti)}var Ti=F(0);function So(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||wh(i)||Sh(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sr=0,dn=null,vn=null,_i=null,Jo=!1,Ha=!1,Na=!1,Kr=0,Fl=0,Ms=null,ns=0;function ji(){throw Error(s(321))}function Bs(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Yo(e[i],t[i]))return!1;return!0}function Pu(e,t,i,l,p,m){return sr=m,dn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?Zf:Vc,Na=!1,m=i(l,p),Na=!1,Ha&&(m=bl(t,i,l,p)),eu(e),m}function eu(e){$.H=Ou;var t=vn!==null&&vn.next!==null;if(sr=0,_i=vn=dn=null,Jo=!1,Fl=0,Ms=null,t)throw Error(s(300));e===null||hr||(e=e.dependencies,e!==null&&gs(e)&&(hr=!0))}function bl(e,t,i,l){dn=e;var p=0;do{if(Ha&&(Ms=null),Fl=0,Ha=!1,25<=p)throw Error(s(301));if(p+=1,_i=vn=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}$.H=hf,m=t(i,l)}while(Ha);return m}function Yf(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?ql(t):t,e=e.useState()[0],(vn!==null?vn.memoizedState:null)!==e&&(dn.flags|=1024),t}function Du(){var e=Kr!==0;return Kr=0,e}function Eu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ic(e){if(Jo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Jo=!1}sr=0,_i=vn=dn=null,Ha=!1,Fl=Kr=0,Ms=null}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _i===null?dn.memoizedState=_i=e:_i=_i.next=e,_i}function er(){if(vn===null){var e=dn.alternate;e=e!==null?e.memoizedState:null}else e=vn.next;var t=_i===null?dn.memoizedState:_i.next;if(t!==null)_i=t,vn=e;else{if(e===null)throw dn.alternate===null?Error(s(467)):Error(s(310));vn=e,e={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},_i===null?dn.memoizedState=_i=e:_i=_i.next=e}return _i}function Uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(e){var t=Fl;return Fl+=1,Ms===null&&(Ms=[]),e=at(Ms,e,t),t=dn,(_i===null?t.memoizedState:_i.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?Zf:Vc),e}function jc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ql(e);if(e.$$typeof===ce)return yr(e)}throw Error(s(438,String(e)))}function oc(e){var t=null,i=dn.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var l=dn.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(p){return p.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Uc(),dn.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),l=0;l<e;l++)i[l]=X;return t.index++,i}function Qs(e,t){return typeof t=="function"?t(e):t}function tu(e){var t=er();return kc(t,vn,e)}function kc(e,t,i){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var p=e.baseQueue,m=l.pending;if(m!==null){if(p!==null){var P=p.next;p.next=m.next,m.next=P}t.baseQueue=p=m,l.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{t=p.next;var oe=P=null,Le=null,Ze=t,dt=!1;do{var mt=Ze.lane&-536870913;if(mt!==Ze.lane?(Ii&mt)===mt:(sr&mt)===mt){var Qe=Ze.revertLane;if(Qe===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,gesture:null,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),mt===d&&(dt=!0);else if((sr&Qe)===Qe){Ze=Ze.next,Qe===d&&(dt=!0);continue}else mt={lane:0,revertLane:Ze.revertLane,gesture:null,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Le===null?(oe=Le=mt,P=m):Le=Le.next=mt,dn.lanes|=Qe,gu|=Qe;mt=Ze.action,Na&&i(m,mt),m=Ze.hasEagerState?Ze.eagerState:i(m,mt)}else Qe={lane:mt,revertLane:Ze.revertLane,gesture:Ze.gesture,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Le===null?(oe=Le=Qe,P=m):Le=Le.next=Qe,dn.lanes|=mt,gu|=mt;Ze=Ze.next}while(Ze!==null&&Ze!==t);if(Le===null?P=m:Le.next=oe,!Yo(m,e.memoizedState)&&(hr=!0,dt&&(i=g,i!==null)))throw i;e.memoizedState=m,e.baseState=P,e.baseQueue=Le,l.lastRenderedState=m}return p===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function nu(e){var t=er(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var l=i.dispatch,p=i.pending,m=t.memoizedState;if(p!==null){i.pending=null;var P=p=p.next;do m=e(m,P.action),P=P.next;while(P!==p);Yo(m,t.memoizedState)||(hr=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),i.lastRenderedState=m}return[m,l]}function iu(e,t,i){var l=dn,p=er(),m=hi;if(m){if(i===void 0)throw Error(s(407));i=i()}else i=t();var P=!Yo((vn||p).memoizedState,i);if(P&&(p.memoizedState=i,hr=!0),p=p.queue,su(ac.bind(null,l,p,e),[e]),p.getSnapshot!==t||P||_i!==null&&_i.memoizedState.tag&1){if(l.flags|=2048,Or(9,{destroy:void 0},Ru.bind(null,l,p,i,t),null),Ur===null)throw Error(s(349));m||(sr&127)!==0||vl(l,t,i)}return i}function vl(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=dn.updateQueue,t===null?(t=Uc(),dn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Ru(e,t,i,l){t.value=i,t.getSnapshot=l,sc(t)&&Hl(e)}function ac(e,t,i){return i(function(){sc(t)&&Hl(e)})}function sc(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Yo(e,i)}catch{return!0}}function Hl(e){var t=Yr(e,2);t!==null&&il(t,e,2)}function Os(e){var t=Co();if(typeof e=="function"){var i=e;if(e=i(),Na){xn(!0);try{i()}finally{xn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:e},t}function Ac(e,t,i,l){return e.baseState=i,kc(e,vn,typeof l=="function"?l:Qs)}function ru(e,t,i,l,p){if(cu(e))throw Error(s(485));if(e=t.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){m.listeners.push(P)}};$.T!==null?i(!0):m.isTransition=!1,l(m),i=t.pending,i===null?(m.next=t.pending=m,Nc(t,m)):(m.next=i.next,t.pending=i.next=m)}}function Nc(e,t){var i=t.action,l=t.payload,p=e.state;if(t.isTransition){var m=$.T,P={};$.T=P;try{var oe=i(p,l),Le=$.S;Le!==null&&Le(P,oe),lc(e,t,oe)}catch(Ze){el(e,t,Ze)}finally{m!==null&&P.types!==null&&(m.types=P.types),$.T=m}}else try{m=i(p,l),lc(e,t,m)}catch(Ze){el(e,t,Ze)}}function lc(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){_c(e,t,l)},function(l){return el(e,t,l)}):_c(e,t,i)}function _c(e,t,i){t.status="fulfilled",t.value=i,cc(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Nc(e,i)))}function el(e,t,i){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=i,cc(t),t=t.next;while(t!==l)}e.action=null}function cc(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Fc(e,t){return t}function xs(e,t){if(hi){var i=Ur.formState;if(i!==null){e:{var l=dn;if(hi){if(nr){t:{for(var p=nr,m=Rr;p.nodeType!==8;){if(!m){p=null;break t}if(p=$l(p.nextSibling),p===null){p=null;break t}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){nr=$l(p.nextSibling),l=p.data==="F!";break e}}Aa(l)}l=!1}l&&(t=i[0])}}return i=Co(),i.memoizedState=i.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fc,lastRenderedState:t},i.queue=l,i=Vd.bind(null,dn,l),l.dispatch=i,l=Os(!1),m=df.bind(null,dn,!1,l.queue),l=Co(),p={state:t,dispatch:null,action:e,pending:null},l.queue=p,i=ru.bind(null,dn,p,m,i),p.dispatch=i,l.memoizedState=e,[t,i,!1]}function io(e){var t=er();return Is(t,vn,e)}function Is(e,t,i){if(t=kc(e,t,Fc)[0],e=tu(Qs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ql(t)}catch(P){throw P===Pe?ve:P}else l=t;t=er();var p=t.queue,m=p.dispatch;return i!==t.memoizedState&&(dn.flags|=2048,Or(9,{destroy:void 0},ou.bind(null,p,i),null)),[l,m,e]}function ou(e,t){e.action=t}function au(e){var t=er(),i=vn;if(i!==null)return Is(t,i,e);er(),t=t.memoizedState,i=er();var l=i.queue.dispatch;return i.memoizedState=e,[t,l,!1]}function Or(e,t,i,l){return e={tag:e,create:i,deps:l,inst:t,next:null},t=dn.updateQueue,t===null&&(t=Uc(),dn.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e),e}function sf(){return er().memoizedState}function Vl(e,t,i,l){var p=Co();dn.flags|=e,p.memoizedState=Or(1|t,{destroy:void 0},i,l===void 0?null:l)}function wl(e,t,i,l){var p=er();l=l===void 0?null:l;var m=p.memoizedState.inst;vn!==null&&l!==null&&Bs(l,vn.memoizedState.deps)?p.memoizedState=Or(t,m,i,l):(dn.flags|=e,p.memoizedState=Or(1|t,m,i,l))}function Mu(e,t){Vl(8390656,8,e,t)}function su(e,t){wl(2048,8,e,t)}function Kp(e){dn.flags|=4;var t=dn.updateQueue;if(t===null)t=Uc(),dn.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function lf(e){var t=er().memoizedState;return Kp({ref:t,nextImpl:e}),function(){if((lr&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function cf(e,t){return wl(4,2,e,t)}function Bd(e,t){return wl(4,4,e,t)}function Od(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sl(e,t,i){i=i!=null?i.concat([e]):null,wl(4,4,Od.bind(null,t,e),i)}function uf(){}function qc(e,t){var i=er();t=t===void 0?null:t;var l=i.memoizedState;return t!==null&&Bs(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function Gf(e,t){var i=er();t=t===void 0?null:t;var l=i.memoizedState;if(t!==null&&Bs(t,l[1]))return l[0];if(l=e(),Na){xn(!0);try{e()}finally{xn(!1)}}return i.memoizedState=[l,t],l}function Wl(e,t,i){return i===void 0||(sr&1073741824)!==0&&(Ii&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=I0(),dn.lanes|=e,gu|=e,i)}function ff(e,t,i,l){return Yo(i,t)?i:ni.current!==null?(e=Wl(e,i,l),Yo(e,t)||(hr=!0),e):(sr&42)===0||(sr&1073741824)!==0&&(Ii&261930)===0?(hr=!0,e.memoizedState=i):(e=I0(),dn.lanes|=e,gu|=e,t)}function Xf(e,t,i,l,p){var m=te.p;te.p=m!==0&&8>m?m:8;var P=$.T,oe={};$.T=oe,df(e,!1,t,i);try{var Le=p(),Ze=$.S;if(Ze!==null&&Ze(oe,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var dt=Y(Le,l);Hc(e,t,dt,Nl(e))}else Hc(e,t,l,Nl(e))}catch(mt){Hc(e,t,{then:function(){},status:"rejected",reason:mt},Nl())}finally{te.p=m,P!==null&&oe.types!==null&&(P.types=oe.types),$.T=P}}function Id(){}function $f(e,t,i,l){if(e.tag!==5)throw Error(s(476));var p=Ud(e).queue;Xf(e,p,t,he,i===null?Id:function(){return Fd(e),i(l)})}function Ud(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:he},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Fd(e){var t=Ud(e);t.next===null&&(t=e.alternate.memoizedState),Hc(e,t.next.queue,{},Nl())}function lu(){return yr(md)}function Kf(){return er().memoizedState}function qd(){return er().memoizedState}function Hd(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Nl();e=Zt(i);var l=En(t,e,i);l!==null&&(il(l,t,i),gi(l,t,i)),t={cache:kn()},e.payload=t;return}t=t.return}}function Bu(e,t,i){var l=Nl();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},cu(e)?pf(t,i):(i=Wi(e,t,i,l),i!==null&&(il(i,e,l),Wd(i,t,l)))}function Vd(e,t,i){var l=Nl();Hc(e,t,i,l)}function Hc(e,t,i,l){var p={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(cu(e))pf(t,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var P=t.lastRenderedState,oe=m(P,i);if(p.hasEagerState=!0,p.eagerState=oe,Yo(oe,P))return Ol(e,t,p,0),Ur===null&&wc(),!1}catch{}finally{}if(i=Wi(e,t,p,l),i!==null)return il(i,e,l),Wd(i,t,l),!0}return!1}function df(e,t,i,l){if(l={lane:2,revertLane:ch(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},cu(e)){if(t)throw Error(s(479))}else t=Wi(e,i,l,2),t!==null&&il(t,e,2)}function cu(e){var t=e.alternate;return e===dn||t!==null&&t===dn}function pf(e,t){Ha=Jo=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Wd(e,t,i){if((i&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,na(e,i)}}var Ou={readContext:yr,use:jc,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useLayoutEffect:ji,useInsertionEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useSyncExternalStore:ji,useId:ji,useHostTransitionStatus:ji,useFormState:ji,useActionState:ji,useOptimistic:ji,useMemoCache:ji,useCacheRefresh:ji};Ou.useEffectEvent=ji;var Zf={readContext:yr,use:jc,useCallback:function(e,t){return Co().memoizedState=[e,t===void 0?null:t],e},useContext:yr,useEffect:Mu,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Vl(4194308,4,Od.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Vl(4194308,4,e,t)},useInsertionEffect:function(e,t){Vl(4,2,e,t)},useMemo:function(e,t){var i=Co();t=t===void 0?null:t;var l=e();if(Na){xn(!0);try{e()}finally{xn(!1)}}return i.memoizedState=[l,t],l},useReducer:function(e,t,i){var l=Co();if(i!==void 0){var p=i(t);if(Na){xn(!0);try{i(t)}finally{xn(!1)}}}else p=t;return l.memoizedState=l.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},l.queue=e,e=e.dispatch=Bu.bind(null,dn,e),[l.memoizedState,e]},useRef:function(e){var t=Co();return e={current:e},t.memoizedState=e},useState:function(e){e=Os(e);var t=e.queue,i=Vd.bind(null,dn,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:uf,useDeferredValue:function(e,t){var i=Co();return Wl(i,e,t)},useTransition:function(){var e=Os(!1);return e=Xf.bind(null,dn,e.queue,!0,!1),Co().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var l=dn,p=Co();if(hi){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Ur===null)throw Error(s(349));(Ii&127)!==0||vl(l,t,i)}p.memoizedState=i;var m={value:i,getSnapshot:t};return p.queue=m,Mu(ac.bind(null,l,m,e),[e]),l.flags|=2048,Or(9,{destroy:void 0},Ru.bind(null,l,m,i,t),null),i},useId:function(){var e=Co(),t=Ur.identifierPrefix;if(hi){var i=ka,l=Mo;i=(l&~(1<<32-rt(l)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Kr++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=ns++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:lu,useFormState:xs,useActionState:xs,useOptimistic:function(e){var t=Co();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=df.bind(null,dn,!0,i),i.dispatch=t,[e,t]},useMemoCache:oc,useCacheRefresh:function(){return Co().memoizedState=Hd.bind(null,dn)},useEffectEvent:function(e){var t=Co(),i={impl:e};return t.memoizedState=i,function(){if((lr&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Vc={readContext:yr,use:jc,useCallback:qc,useContext:yr,useEffect:su,useImperativeHandle:Sl,useInsertionEffect:cf,useLayoutEffect:Bd,useMemo:Gf,useReducer:tu,useRef:sf,useState:function(){return tu(Qs)},useDebugValue:uf,useDeferredValue:function(e,t){var i=er();return ff(i,vn.memoizedState,e,t)},useTransition:function(){var e=tu(Qs)[0],t=er().memoizedState;return[typeof e=="boolean"?e:ql(e),t]},useSyncExternalStore:iu,useId:Kf,useHostTransitionStatus:lu,useFormState:io,useActionState:io,useOptimistic:function(e,t){var i=er();return Ac(i,vn,e,t)},useMemoCache:oc,useCacheRefresh:qd};Vc.useEffectEvent=lf;var hf={readContext:yr,use:jc,useCallback:qc,useContext:yr,useEffect:su,useImperativeHandle:Sl,useInsertionEffect:cf,useLayoutEffect:Bd,useMemo:Gf,useReducer:nu,useRef:sf,useState:function(){return nu(Qs)},useDebugValue:uf,useDeferredValue:function(e,t){var i=er();return vn===null?Wl(i,e,t):ff(i,vn.memoizedState,e,t)},useTransition:function(){var e=nu(Qs)[0],t=er().memoizedState;return[typeof e=="boolean"?e:ql(e),t]},useSyncExternalStore:iu,useId:Kf,useHostTransitionStatus:lu,useFormState:au,useActionState:au,useOptimistic:function(e,t){var i=er();return vn!==null?Ac(i,vn,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:oc,useCacheRefresh:qd};hf.useEffectEvent=lf;function uc(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:D({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var uu={enqueueSetState:function(e,t,i){e=e._reactInternals;var l=Nl(),p=Zt(l);p.payload=t,i!=null&&(p.callback=i),t=En(e,p,l),t!==null&&(il(t,e,l),gi(t,e,l))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=Nl(),p=Zt(l);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=En(e,p,l),t!==null&&(il(t,e,l),gi(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Nl(),l=Zt(i);l.tag=2,t!=null&&(l.callback=t),t=En(e,l,i),t!==null&&(il(t,e,i),gi(t,e,i))}};function Yl(e,t,i,l,p,m,P){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,P):t.prototype&&t.prototype.isPureReactComponent?!ca(i,l)||!ca(p,m):!0}function fu(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&uu.enqueueReplaceState(t,t.state,null)}function fc(e,t){var i=t;if("ref"in t){i={};for(var l in t)l!=="ref"&&(i[l]=t[l])}if(e=e.defaultProps){i===t&&(i=D({},i));for(var p in e)i[p]===void 0&&(i[p]=e[p])}return i}function gf(e){Wr(e)}function yf(e){console.error(e)}function Va(e){Wr(e)}function Iu(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Yd(e,t,i){try{var l=e.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function mf(e,t,i){return i=Zt(i),i.tag=3,i.payload={element:null},i.callback=function(){Iu(e,t)},i}function Gd(e){return e=Zt(e),e.tag=3,e}function Jf(e,t,i,l){var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var m=l.value;e.payload=function(){return p(m)},e.callback=function(){Yd(t,i,l)}}var P=i.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(e.callback=function(){Yd(t,i,l),typeof p!="function"&&(yu===null?yu=new Set([this]):yu.add(this));var oe=l.stack;this.componentDidCatch(l.value,{componentStack:oe!==null?oe:""})})}function Xd(e,t,i,l,p){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=i.alternate,t!==null&&bo(t,i,p,!0),i=pr.current,i!==null){switch(i.tag){case 31:case 13:return Ni===null?rp():i.alternate===null&&Io===0&&(Io=3),i.flags&=-257,i.flags|=65536,i.lanes=p,l===Me?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([l]):t.add(l),ah(e,l,p)),!1;case 22:return i.flags|=65536,l===Me?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([l]):i.add(l)),ah(e,l,p)),!1}throw Error(s(435,i.tag))}return ah(e,l,p),rp(),!1}if(hi)return t=pr.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=p,l!==hs&&(e=Error(s(422),{cause:l}),eo(Ro(e,i)))):(l!==hs&&(t=Error(s(423),{cause:l}),eo(Ro(t,i))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,l=Ro(l,i),p=mf(e.stateNode,l,p),Br(e,p),Io!==4&&(Io=2)),!1;var m=Error(s(520),{cause:l});if(m=Ro(m,i),cd===null?cd=[m]:cd.push(m),Io!==4&&(Io=2),t===null)return!0;l=Ro(l,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=p&-p,i.lanes|=e,e=mf(i.stateNode,l,e),Br(i,e),!1;case 1:if(t=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(yu===null||!yu.has(m))))return i.flags|=65536,p&=-p,i.lanes|=p,p=Gd(p),Jf(p,e,i,l),Br(i,p),!1}i=i.return}while(i!==null);return!1}var du=Error(s(461)),hr=!1;function ha(e,t,i,l){t.child=e===null?Qn(t,null,i,l):Ki(t,e.child,i,l)}function dc(e,t,i,l,p){i=i.render;var m=t.ref;if("ref"in l){var P={};for(var oe in l)oe!=="ref"&&(P[oe]=l[oe])}else P=l;return vo(t),l=Pu(e,t,i,P,m,p),oe=Du(),e!==null&&!hr?(Eu(e,t,p),Tl(e,t,p)):(hi&&oe&&Lu(t),t.flags|=1,ha(e,t,l,p),t.child)}function Cl(e,t,i,l,p){if(e===null){var m=i.type;return typeof m=="function"&&!Cc(m)&&m.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=m,Qf(e,t,m,l,p)):(e=ds(i.type,null,l,t,t.mode,p),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!Yu(e,p)){var P=m.memoizedProps;if(i=i.compare,i=i!==null?i:ca,i(P,l)&&e.ref===t.ref)return Tl(e,t,p)}return t.flags|=1,e=fa(m,l),e.ref=t.ref,e.return=t,t.child=e}function Qf(e,t,i,l,p){if(e!==null){var m=e.memoizedProps;if(ca(m,l)&&e.ref===t.ref)if(hr=!1,t.pendingProps=l=m,Yu(e,p))(e.flags&131072)!==0&&(hr=!0);else return t.lanes=e.lanes,Tl(e,t,p)}return xf(e,t,i,l,p)}function ed(e,t,i,l){var p=l.children,m=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(m=m!==null?m.baseLanes|i:i,e!==null){for(l=t.child=e.child,p=0;l!==null;)p=p|l.lanes|l.childLanes,l=l.sibling;l=p&~m}else l=0,t.child=null;return Wc(e,t,m,i,l)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&fe(t,m!==null?m.cachePool:null),m!==null?mr(t,m):ci(),no(t);else return l=t.lanes=536870912,Wc(e,t,m!==null?m.baseLanes|i:i,i,l)}else m!==null?(fe(t,m.cachePool),mr(t,m),_r(),t.memoizedState=null):(e!==null&&fe(t,null),ci(),_r());return ha(e,t,p,i),t.child}function ga(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Wc(e,t,i,l,p){var m=le();return m=m===null?null:{parent:Ai._currentValue,pool:m},t.memoizedState={baseLanes:i,cachePool:m},e!==null&&fe(t,null),ci(),no(t),e!==null&&bo(e,t,l,!0),t.childLanes=p,null}function Gl(e,t){return t=Vu({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Uu(e,t,i){return Ki(t,e.child,null,i),e=Gl(t,t.pendingProps),e.flags|=2,Gi(t),t.memoizedState=null,e}function td(e,t,i){var l=t.pendingProps,p=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(hi){if(l.mode==="hidden")return e=Gl(t,l),t.lanes=536870912,ga(null,e);if(Oi(t),(e=nr)?(e=wg(e,Rr),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ua!==null?{id:Mo,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},i=yl(e),i.return=t,t.child=i,Xo=t,nr=null)):e=null,e===null)throw Aa(t);return t.lanes=536870912,null}return Gl(t,l)}var m=e.memoizedState;if(m!==null){var P=m.dehydrated;if(Oi(t),p)if(t.flags&256)t.flags&=-257,t=Uu(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(hr||bo(e,t,i,!1),p=(i&e.childLanes)!==0,hr||p){if(l=Ur,l!==null&&(P=vt(l,i),P!==0&&P!==m.retryLane))throw m.retryLane=P,Yr(e,P),il(l,e,P),du;rp(),t=Uu(e,t,i)}else e=m.treeContext,nr=$l(P.nextSibling),Xo=t,hi=!0,da=null,Rr=!1,e!==null&&zu(t,e),t=Gl(t,l),t.flags|=4096;return t}return e=fa(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Lc(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function xf(e,t,i,l,p){return vo(t),i=Pu(e,t,i,l,void 0,p),l=Du(),e!==null&&!hr?(Eu(e,t,p),Tl(e,t,p)):(hi&&l&&Lu(t),t.flags|=1,ha(e,t,i,p),t.child)}function $d(e,t,i,l,p,m){return vo(t),t.updateQueue=null,i=bl(t,l,i,p),eu(e),l=Du(),e!==null&&!hr?(Eu(e,t,m),Tl(e,t,m)):(hi&&l&&Lu(t),t.flags|=1,ha(e,t,i,m),t.child)}function Fu(e,t,i,l,p){if(vo(t),t.stateNode===null){var m=Eo,P=i.contextType;typeof P=="object"&&P!==null&&(m=yr(P)),m=new i(l,m),t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=uu,t.stateNode=m,m._reactInternals=t,m=t.stateNode,m.props=l,m.state=t.memoizedState,m.refs={},zt(t),P=i.contextType,m.context=typeof P=="object"&&P!==null?yr(P):Eo,m.state=t.memoizedState,P=i.getDerivedStateFromProps,typeof P=="function"&&(uc(t,i,P,l),m.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(P=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),P!==m.state&&uu.enqueueReplaceState(m,m.state,null),Ar(t,l,m,p),yi(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){m=t.stateNode;var oe=t.memoizedProps,Le=fc(i,oe);m.props=Le;var Ze=m.context,dt=i.contextType;P=Eo,typeof dt=="object"&&dt!==null&&(P=yr(dt));var mt=i.getDerivedStateFromProps;dt=typeof mt=="function"||typeof m.getSnapshotBeforeUpdate=="function",oe=t.pendingProps!==oe,dt||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(oe||Ze!==P)&&fu(t,m,l,P),qt=!1;var Qe=t.memoizedState;m.state=Qe,Ar(t,l,m,p),yi(),Ze=t.memoizedState,oe||Qe!==Ze||qt?(typeof mt=="function"&&(uc(t,i,mt,l),Ze=t.memoizedState),(Le=qt||Yl(t,i,Le,l,Qe,Ze,P))?(dt||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Ze),m.props=l,m.state=Ze,m.context=P,l=Le):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{m=t.stateNode,Ci(e,t),P=t.memoizedProps,dt=fc(i,P),m.props=dt,mt=t.pendingProps,Qe=m.context,Ze=i.contextType,Le=Eo,typeof Ze=="object"&&Ze!==null&&(Le=yr(Ze)),oe=i.getDerivedStateFromProps,(Ze=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(P!==mt||Qe!==Le)&&fu(t,m,l,Le),qt=!1,Qe=t.memoizedState,m.state=Qe,Ar(t,l,m,p),yi();var it=t.memoizedState;P!==mt||Qe!==it||qt||e!==null&&e.dependencies!==null&&gs(e.dependencies)?(typeof oe=="function"&&(uc(t,i,oe,l),it=t.memoizedState),(dt=qt||Yl(t,i,dt,l,Qe,it,Le)||e!==null&&e.dependencies!==null&&gs(e.dependencies))?(Ze||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,it,Le),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,it,Le)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||P===e.memoizedProps&&Qe===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||P===e.memoizedProps&&Qe===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=it),m.props=l,m.state=it,m.context=Le,l=dt):(typeof m.componentDidUpdate!="function"||P===e.memoizedProps&&Qe===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||P===e.memoizedProps&&Qe===e.memoizedState||(t.flags|=1024),l=!1)}return m=l,Lc(e,t),l=(t.flags&128)!==0,m||l?(m=t.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:m.render(),t.flags|=1,e!==null&&l?(t.child=Ki(t,e.child,null,p),t.child=Ki(t,null,i,p)):ha(e,t,i,p),t.memoizedState=m.state,e=t.child):e=Tl(e,t,p),e}function qu(e,t,i,l){return kr(),t.flags|=256,ha(e,t,i,l),t.child}var nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function id(e){return{baseLanes:e,cachePool:me()}}function Hu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Al),e}function pu(e,t,i){var l=t.pendingProps,p=!1,m=(t.flags&128)!==0,P;if((P=m)||(P=e!==null&&e.memoizedState===null?!1:(Ti.current&2)!==0),P&&(p=!0,t.flags&=-129),P=(t.flags&32)!==0,t.flags&=-33,e===null){if(hi){if(p?$r(t):_r(),(e=nr)?(e=wg(e,Rr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ua!==null?{id:Mo,overflow:ka}:null,retryLane:536870912,hydrationErrors:null},i=yl(e),i.return=t,t.child=i,Xo=t,nr=null)):e=null,e===null)throw Aa(t);return Sh(e)?t.lanes=32:t.lanes=536870912,null}var oe=l.children;return l=l.fallback,p?(_r(),p=t.mode,oe=Vu({mode:"hidden",children:oe},p),l=ps(l,p,i,null),oe.return=t,l.return=t,oe.sibling=l,t.child=oe,l=t.child,l.memoizedState=id(i),l.childLanes=Hu(e,P,i),t.memoizedState=nd,ga(null,l)):($r(t),rd(t,oe))}var Le=e.memoizedState;if(Le!==null&&(oe=Le.dehydrated,oe!==null)){if(m)t.flags&256?($r(t),t.flags&=-257,t=Wu(e,t,i)):t.memoizedState!==null?(_r(),t.child=e.child,t.flags|=128,t=null):(_r(),oe=l.fallback,p=t.mode,l=Vu({mode:"visible",children:l.children},p),oe=ps(oe,p,i,null),oe.flags|=2,l.return=t,oe.return=t,l.sibling=oe,t.child=l,Ki(t,e.child,null,i),l=t.child,l.memoizedState=id(i),l.childLanes=Hu(e,P,i),t.memoizedState=nd,t=ga(null,l));else if($r(t),Sh(oe)){if(P=oe.nextSibling&&oe.nextSibling.dataset,P)var Ze=P.dgst;P=Ze,l=Error(s(419)),l.stack="",l.digest=P,eo({value:l,source:null,stack:null}),t=Wu(e,t,i)}else if(hr||bo(e,t,i,!1),P=(i&e.childLanes)!==0,hr||P){if(P=Ur,P!==null&&(l=vt(P,i),l!==0&&l!==Le.retryLane))throw Le.retryLane=l,Yr(e,l),il(P,e,l),du;wh(oe)||rp(),t=Wu(e,t,i)}else wh(oe)?(t.flags|=192,t.child=e.child,t=null):(e=Le.treeContext,nr=$l(oe.nextSibling),Xo=t,hi=!0,da=null,Rr=!1,e!==null&&zu(t,e),t=rd(t,l.children),t.flags|=4096);return t}return p?(_r(),oe=l.fallback,p=t.mode,Le=e.child,Ze=Le.sibling,l=fa(Le,{mode:"hidden",children:l.children}),l.subtreeFlags=Le.subtreeFlags&65011712,Ze!==null?oe=fa(Ze,oe):(oe=ps(oe,p,i,null),oe.flags|=2),oe.return=t,l.return=t,l.sibling=oe,t.child=l,ga(null,l),l=t.child,oe=e.child.memoizedState,oe===null?oe=id(i):(p=oe.cachePool,p!==null?(Le=Ai._currentValue,p=p.parent!==Le?{parent:Le,pool:Le}:p):p=me(),oe={baseLanes:oe.baseLanes|i,cachePool:p}),l.memoizedState=oe,l.childLanes=Hu(e,P,i),t.memoizedState=nd,ga(e.child,l)):($r(t),i=e.child,e=i.sibling,i=fa(i,{mode:"visible",children:l.children}),i.return=t,i.sibling=null,e!==null&&(P=t.deletions,P===null?(t.deletions=[e],t.flags|=16):P.push(e)),t.child=i,t.memoizedState=null,i)}function rd(e,t){return t=Vu({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Vu(e,t){return e=mo(22,e,null,t),e.lanes=0,e}function Wu(e,t,i){return Ki(t,e.child,null,i),e=rd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kd(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),fo(e.return,t,i)}function od(e,t,i,l,p,m){var P=e.memoizedState;P===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:p,treeForkCount:m}:(P.isBackwards=t,P.rendering=null,P.renderingStartTime=0,P.last=l,P.tail=i,P.tailMode=p,P.treeForkCount=m)}function ad(e,t,i){var l=t.pendingProps,p=l.revealOrder,m=l.tail;l=l.children;var P=Ti.current,oe=(P&2)!==0;if(oe?(P=P&1|2,t.flags|=128):P&=1,M(Ti,P),ha(e,t,l,i),l=hi?xo:0,!oe&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kd(e,i,t);else if(e.tag===19)Kd(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(i=t.child,p=null;i!==null;)e=i.alternate,e!==null&&So(e)===null&&(p=i),i=i.sibling;i=p,i===null?(p=t.child,t.child=null):(p=i.sibling,i.sibling=null),od(t,!1,p,i,m,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,p=t.child,t.child=null;p!==null;){if(e=p.alternate,e!==null&&So(e)===null){t.child=p;break}e=p.sibling,p.sibling=i,i=p,p=e}od(t,!0,i,null,m,l);break;case"together":od(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Tl(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),gu|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(bo(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=fa(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=fa(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Yu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&gs(e)))}function Zp(e,t,i){switch(t.tag){case 3:Ge(t,t.stateNode.containerInfo),Gr(t,Ai,e.memoizedState.cache),kr();break;case 27:case 5:tt(t);break;case 4:Ge(t,t.stateNode.containerInfo);break;case 10:Gr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Oi(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?($r(t),t.flags|=128,null):(i&t.child.childLanes)!==0?pu(e,t,i):($r(t),e=Tl(e,t,i),e!==null?e.sibling:null);$r(t);break;case 19:var p=(e.flags&128)!==0;if(l=(i&t.childLanes)!==0,l||(bo(e,t,i,!1),l=(i&t.childLanes)!==0),p){if(l)return ad(e,t,i);t.flags|=128}if(p=t.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),M(Ti,Ti.current),l)break;return null;case 22:return t.lanes=0,ed(e,t,i,t.pendingProps);case 24:Gr(t,Ai,e.memoizedState.cache)}return Tl(e,t,i)}function Zd(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)hr=!0;else{if(!Yu(e,i)&&(t.flags&128)===0)return hr=!1,Zp(e,t,i);hr=(e.flags&131072)!==0}else hr=!1,hi&&(t.flags&1048576)!==0&&xl(t,xo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=We(t.elementType),t.type=e,typeof e=="function")Cc(e)?(l=fc(e,l),t.tag=1,t=Fu(null,t,e,l,i)):(t.tag=0,t=xf(null,t,e,l,i));else{if(e!=null){var p=e.$$typeof;if(p===H){t.tag=11,t=dc(null,t,e,l,i);break e}else if(p===N){t.tag=14,t=Cl(null,t,e,l,i);break e}}throw t=ie(e)||e,Error(s(306,t,""))}}return t;case 0:return xf(e,t,t.type,t.pendingProps,i);case 1:return l=t.type,p=fc(l,t.pendingProps),Fu(e,t,l,p,i);case 3:e:{if(Ge(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var m=t.memoizedState;p=m.element,Ci(e,t),Ar(t,l,null,i);var P=t.memoizedState;if(l=P.cache,Gr(t,Ai,l),l!==m.cache&&Ko(t,[Ai],i,!0),yi(),l=P.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:P.cache},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){t=qu(e,t,l,i);break e}else if(l!==p){p=Ro(Error(s(424)),t),eo(p),t=qu(e,t,l,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(nr=$l(e.firstChild),Xo=t,hi=!0,da=null,Rr=!0,i=Qn(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(kr(),l===p){t=Tl(e,t,i);break e}ha(e,t,l,i)}t=t.child}return t;case 26:return Lc(e,t),e===null?(i=Ag(t.type,null,t.pendingProps,null))?t.memoizedState=i:hi||(i=t.type,e=t.pendingProps,l=fp(ke.current).createElement(i),l[xi]=t,l[di]=e,rs(l,i,e),Pn(l),t.stateNode=l):t.memoizedState=Ag(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return tt(t),e===null&&hi&&(l=t.stateNode=Tg(t.type,t.pendingProps,ke.current),Xo=t,Rr=!0,p=nr,vu(t.type)?(Ch=p,nr=$l(l.firstChild)):nr=p),ha(e,t,t.pendingProps.children,i),Lc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&hi&&((p=l=nr)&&(l=Ky(l,t.type,t.pendingProps,Rr),l!==null?(t.stateNode=l,Xo=t,nr=$l(l.firstChild),Rr=!1,p=!0):p=!1),p||Aa(t)),tt(t),p=t.type,m=t.pendingProps,P=e!==null?e.memoizedProps:null,l=m.children,xh(p,m)?l=null:P!==null&&xh(p,P)&&(t.flags|=32),t.memoizedState!==null&&(p=Pu(e,t,Yf,null,null,i),md._currentValue=p),Lc(e,t),ha(e,t,l,i),t.child;case 6:return e===null&&hi&&((e=i=nr)&&(i=Zy(i,t.pendingProps,Rr),i!==null?(t.stateNode=i,Xo=t,nr=null,e=!0):e=!1),e||Aa(t)),null;case 13:return pu(e,t,i);case 4:return Ge(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Ki(t,null,l,i):ha(e,t,l,i),t.child;case 11:return dc(e,t,t.type,t.pendingProps,i);case 7:return ha(e,t,t.pendingProps,i),t.child;case 8:return ha(e,t,t.pendingProps.children,i),t.child;case 12:return ha(e,t,t.pendingProps.children,i),t.child;case 10:return l=t.pendingProps,Gr(t,t.type,l.value),ha(e,t,l.children,i),t.child;case 9:return p=t.type._context,l=t.pendingProps.children,vo(t),p=yr(p),l=l(p),t.flags|=1,ha(e,t,l,i),t.child;case 14:return Cl(e,t,t.type,t.pendingProps,i);case 15:return Qf(e,t,t.type,t.pendingProps,i);case 19:return ad(e,t,i);case 31:return td(e,t,i);case 22:return ed(e,t,i,t.pendingProps);case 24:return vo(t),l=yr(Ai),e===null?(p=le(),p===null&&(p=Ur,m=kn(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=i),p=m),t.memoizedState={parent:l,cache:p},zt(t),Gr(t,Ai,p)):((e.lanes&i)!==0&&(Ci(e,t),Ar(t,null,null,i),yi()),p=e.memoizedState,m=t.memoizedState,p.parent!==l?(p={parent:l,cache:l},t.memoizedState=p,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=p),Gr(t,Ai,l)):(l=m.cache,Gr(t,Ai,l),l!==p.cache&&Ko(t,[Ai],i,!0))),ha(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function is(e){e.flags|=4}function zc(e,t,i,l,p){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(H0())e.flags|=8192;else throw ot=Me,Ye}else e.flags&=-16777217}function Gu(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pg(t))if(H0())e.flags|=8192;else throw ot=Me,Ye}function bf(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?go():536870912,e.lanes|=t,Sf|=t)}function Xu(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function xr(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var p=e.child;p!==null;)i|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)i|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function sd(e,t,i){var l=t.pendingProps;switch(Bc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(t),null;case 1:return xr(t),null;case 3:return i=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Xr(Ai),ze(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Yi(t)?is(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,es())),xr(t),null;case 26:var p=t.type,m=t.memoizedState;return e===null?(is(t),m!==null?(xr(t),Gu(t,m)):(xr(t),zc(t,p,null,l,i))):m?m!==e.memoizedState?(is(t),xr(t),Gu(t,m)):(xr(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&is(t),xr(t),zc(t,p,e,l,i)),null;case 27:if(Xe(t),i=ke.current,p=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&is(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return xr(t),null}e=B.current,Yi(t)?$o(t):(e=Tg(p,l,i),t.stateNode=e,is(t))}return xr(t),null;case 5:if(Xe(t),p=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&is(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return xr(t),null}if(m=B.current,Yi(t))$o(t);else{var P=fp(ke.current);switch(m){case 1:m=P.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=P.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=P.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=P.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=P.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?P.createElement("select",{is:l.is}):P.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?P.createElement(p,{is:l.is}):P.createElement(p)}}m[xi]=t,m[di]=l;e:for(P=t.child;P!==null;){if(P.tag===5||P.tag===6)m.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===t)break e;for(;P.sibling===null;){if(P.return===null||P.return===t)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}t.stateNode=m;e:switch(rs(m,p,l),p){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&is(t)}}return xr(t),zc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&is(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=ke.current,Yi(t)){if(e=t.stateNode,i=t.memoizedProps,l=null,p=Xo,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}e[xi]=t,e=!!(e.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||pg(e.nodeValue,i)),e||Aa(t,!0)}else e=fp(e).createTextNode(l),e[xi]=t,t.stateNode=e}return xr(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(l=Yi(t),i!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[xi]=t}else kr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;xr(t),e=!1}else i=es(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Gi(t),t):(Gi(t),null);if((t.flags&128)!==0)throw Error(s(558))}return xr(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Yi(t),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[xi]=t}else kr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;xr(t),p=!1}else p=es(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return t.flags&256?(Gi(t),t):(Gi(t),null)}return Gi(t),(t.flags&128)!==0?(t.lanes=i,t):(i=l!==null,e=e!==null&&e.memoizedState!==null,i&&(l=t.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==p&&(l.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),bf(t,t.updateQueue),xr(t),null);case 4:return ze(),e===null&&ph(t.stateNode.containerInfo),xr(t),null;case 10:return Xr(t.type),xr(t),null;case 19:if(A(Ti),l=t.memoizedState,l===null)return xr(t),null;if(p=(t.flags&128)!==0,m=l.rendering,m===null)if(p)Xu(l,!1);else{if(Io!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=So(e),m!==null){for(t.flags|=128,Xu(l,!1),e=m.updateQueue,t.updateQueue=e,bf(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Tc(i,e),i=i.sibling;return M(Ti,Ti.current&1|2),hi&&Bo(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Vn()>tp&&(t.flags|=128,p=!0,Xu(l,!1),t.lanes=4194304)}else{if(!p)if(e=So(m),e!==null){if(t.flags|=128,p=!0,e=e.updateQueue,t.updateQueue=e,bf(t,e),Xu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!hi)return xr(t),null}else 2*Vn()-l.renderingStartTime>tp&&i!==536870912&&(t.flags|=128,p=!0,Xu(l,!1),t.lanes=4194304);l.isBackwards?(m.sibling=t.child,t.child=m):(e=l.last,e!==null?e.sibling=m:t.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Vn(),e.sibling=null,i=Ti.current,M(Ti,p?i&1|2:i&1),hi&&Bo(t,l.treeForkCount),e):(xr(t),null);case 22:case 23:return Gi(t),Nr(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(i&536870912)!==0&&(t.flags&128)===0&&(xr(t),t.subtreeFlags&6&&(t.flags|=8192)):xr(t),i=t.updateQueue,i!==null&&bf(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==i&&(t.flags|=2048),e!==null&&A(ne),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Xr(Ai),xr(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Jd(e,t){switch(Bc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xr(Ai),ze(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Xe(t),null;case 31:if(t.memoizedState!==null){if(Gi(t),t.alternate===null)throw Error(s(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Gi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(Ti),null;case 4:return ze(),null;case 10:return Xr(t.type),null;case 22:case 23:return Gi(t),Nr(),e!==null&&A(ne),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Xr(Ai),null;case 25:return null;default:return null}}function ld(e,t){switch(Bc(t),t.tag){case 3:Xr(Ai),ze();break;case 26:case 27:case 5:Xe(t);break;case 4:ze();break;case 31:t.memoizedState!==null&&Gi(t);break;case 13:Gi(t);break;case 19:A(Ti);break;case 10:Xr(t.type);break;case 22:case 23:Gi(t),Nr(),e!==null&&A(ne);break;case 24:Xr(Ai)}}function Jt(e,t){try{var i=t.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var p=l.next;i=p;do{if((i.tag&e)===e){l=void 0;var m=i.create,P=i.inst;l=m(),P.destroy=l}i=i.next}while(i!==p)}}catch(oe){vr(t,t.return,oe)}}function Us(e,t,i){try{var l=t.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var m=p.next;l=m;do{if((l.tag&e)===e){var P=l.inst,oe=P.destroy;if(oe!==void 0){P.destroy=void 0,p=t;var Le=i,Ze=oe;try{Ze()}catch(dt){vr(p,Le,dt)}}}l=l.next}while(l!==m)}}catch(dt){vr(t,t.return,dt)}}function vf(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{to(t,i)}catch(l){vr(e,e.return,l)}}}function Qd(e,t,i){i.props=fc(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(l){vr(e,t,l)}}function $u(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof i=="function"?e.refCleanup=i(l):i.current=l}}catch(p){vr(e,t,p)}}function Xl(e,t){var i=e.ref,l=e.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(p){vr(e,t,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(p){vr(e,t,p)}else i.current=null}function c(e){var t=e.type,i=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(p){vr(e,e.return,p)}}function y(e,t,i){try{var l=e.stateNode;Vy(l,e.type,i,t),l[di]=t}catch(p){vr(e,e.return,p)}}function _(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vu(e.type)||e.tag===4}function G(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vu(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function re(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Sn));else if(l!==4&&(l===27&&vu(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(re(e,t,i),e=e.sibling;e!==null;)re(e,t,i),e=e.sibling}function Se(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(l===27&&vu(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Se(e,t,i),e=e.sibling;e!==null;)Se(e,t,i),e=e.sibling}function U(e){var t=e.stateNode,i=e.memoizedProps;try{for(var l=e.type,p=t.attributes;p.length;)t.removeAttributeNode(p[0]);rs(t,l,i),t[xi]=e,t[di]=i}catch(m){vr(e,e.return,m)}}var xe=!1,ee=!1,ue=!1,Te=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Ne(e,t){if(e=e.containerInfo,yh=xp,e=co(e),us(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var p=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var P=0,oe=-1,Le=-1,Ze=0,dt=0,mt=e,Qe=null;t:for(;;){for(var it;mt!==i||p!==0&&mt.nodeType!==3||(oe=P+p),mt!==m||l!==0&&mt.nodeType!==3||(Le=P+l),mt.nodeType===3&&(P+=mt.nodeValue.length),(it=mt.firstChild)!==null;)Qe=mt,mt=it;for(;;){if(mt===e)break t;if(Qe===i&&++Ze===p&&(oe=P),Qe===m&&++dt===l&&(Le=P),(it=mt.nextSibling)!==null)break;mt=Qe,Qe=mt.parentNode}mt=it}i=oe===-1||Le===-1?null:{start:oe,end:Le}}else i=null}i=i||{start:0,end:0}}else i=null;for(mh={focusedElem:e,selectionRange:i},xp=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){switch(t=Ce,m=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)p=e[i],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,i=t,p=m.memoizedProps,m=m.memoizedState,l=i.stateNode;try{var on=fc(i.type,p);e=l.getSnapshotBeforeUpdate(on,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(qn){vr(i,i.return,qn)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)vh(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}}function Re(e,t,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:nt(e,i),l&4&&Jt(5,i);break;case 1:if(nt(e,i),l&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(P){vr(i,i.return,P)}else{var p=fc(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(p,t,e.__reactInternalSnapshotBeforeUpdate)}catch(P){vr(i,i.return,P)}}l&64&&vf(i),l&512&&$u(i,i.return);break;case 3:if(nt(e,i),l&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{to(e,t)}catch(P){vr(i,i.return,P)}}break;case 27:t===null&&l&4&&U(i);case 26:case 5:nt(e,i),t===null&&l&4&&c(i),l&512&&$u(i,i.return);break;case 12:nt(e,i);break;case 31:nt(e,i),l&4&&ft(e,i);break;case 13:nt(e,i),l&4&&gt(e,i),l&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Py.bind(null,i),Jy(e,i))));break;case 22:if(l=i.memoizedState!==null||xe,!l){t=t!==null&&t.memoizedState!==null||ee,p=xe;var m=ee;xe=l,(ee=t)&&!m?Et(e,i,(i.subtreeFlags&8772)!==0):nt(e,i),xe=p,ee=m}break;case 30:break;default:nt(e,i)}}function Oe(e){var t=e.alternate;t!==null&&(e.alternate=null,Oe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&os(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var we=null,Ee=!1;function _e(e,t,i){for(i=i.child;i!==null;)$e(e,t,i),i=i.sibling}function $e(e,t,i){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Nn,i)}catch{}switch(i.tag){case 26:ee||Xl(i,t),_e(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:ee||Xl(i,t);var l=we,p=Ee;vu(i.type)&&(we=i.stateNode,Ee=!1),_e(e,t,i),hd(i.stateNode),we=l,Ee=p;break;case 5:ee||Xl(i,t);case 6:if(l=we,p=Ee,we=null,_e(e,t,i),we=l,Ee=p,we!==null)if(Ee)try{(we.nodeType===9?we.body:we.nodeName==="HTML"?we.ownerDocument.body:we).removeChild(i.stateNode)}catch(m){vr(i,t,m)}else try{we.removeChild(i.stateNode)}catch(m){vr(i,t,m)}break;case 18:we!==null&&(Ee?(e=we,bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Lf(e)):bg(we,i.stateNode));break;case 4:l=we,p=Ee,we=i.stateNode.containerInfo,Ee=!0,_e(e,t,i),we=l,Ee=p;break;case 0:case 11:case 14:case 15:Us(2,i,t),ee||Us(4,i,t),_e(e,t,i);break;case 1:ee||(Xl(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"&&Qd(i,t,l)),_e(e,t,i);break;case 21:_e(e,t,i);break;case 22:ee=(l=ee)||i.memoizedState!==null,_e(e,t,i),ee=l;break;default:_e(e,t,i)}}function ft(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Lf(e)}catch(i){vr(t,t.return,i)}}}function gt(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Lf(e)}catch(i){vr(t,t.return,i)}}function xt(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Te),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Te),t;default:throw Error(s(435,e.tag))}}function Je(e,t){var i=xt(e);t.forEach(function(l){if(!i.has(l)){i.add(l);var p=Dy.bind(null,e,l);l.then(p,p)}})}function Lt(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var p=i[l],m=e,P=t,oe=P;e:for(;oe!==null;){switch(oe.tag){case 27:if(vu(oe.type)){we=oe.stateNode,Ee=!1;break e}break;case 5:we=oe.stateNode,Ee=!1;break e;case 3:case 4:we=oe.stateNode.containerInfo,Ee=!0;break e}oe=oe.return}if(we===null)throw Error(s(160));$e(m,P,p),we=null,Ee=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)qe(t,e),t=t.sibling}var Be=null;function qe(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Lt(t,e),Ue(e),l&4&&(Us(3,e,e.return),Jt(3,e),Us(5,e,e.return));break;case 1:Lt(t,e),Ue(e),l&512&&(ee||i===null||Xl(i,i.return)),l&64&&xe&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var p=Be;if(Lt(t,e),Ue(e),l&512&&(ee||i===null||Xl(i,i.return)),l&4){var m=i!==null?i.memoizedState:null;if(l=e.memoizedState,i===null)if(l===null)if(e.stateNode===null){e:{l=e.type,i=e.memoizedProps,p=p.ownerDocument||p;t:switch(l){case"title":m=p.getElementsByTagName("title")[0],(!m||m[Pa]||m[xi]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(l),p.head.insertBefore(m,p.querySelector("head > title"))),rs(m,l,i),m[xi]=e,Pn(m),l=m;break e;case"link":var P=Lg("link","href",p).get(l+(i.href||""));if(P){for(var oe=0;oe<P.length;oe++)if(m=P[oe],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){P.splice(oe,1);break t}}m=p.createElement(l),rs(m,l,i),p.head.appendChild(m);break;case"meta":if(P=Lg("meta","content",p).get(l+(i.content||""))){for(oe=0;oe<P.length;oe++)if(m=P[oe],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){P.splice(oe,1);break t}}m=p.createElement(l),rs(m,l,i),p.head.appendChild(m);break;default:throw Error(s(468,l))}m[xi]=e,Pn(m),l=m}e.stateNode=l}else zg(p,e.type,e.stateNode);else e.stateNode=_g(p,l,e.memoizedProps);else m!==l?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,l===null?zg(p,e.type,e.stateNode):_g(p,l,e.memoizedProps)):l===null&&e.stateNode!==null&&y(e,e.memoizedProps,i.memoizedProps)}break;case 27:Lt(t,e),Ue(e),l&512&&(ee||i===null||Xl(i,i.return)),i!==null&&l&4&&y(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Lt(t,e),Ue(e),l&512&&(ee||i===null||Xl(i,i.return)),e.flags&32){p=e.stateNode;try{Hr(p,"")}catch(on){vr(e,e.return,on)}}l&4&&e.stateNode!=null&&(p=e.memoizedProps,y(e,p,i!==null?i.memoizedProps:p)),l&1024&&(ue=!0);break;case 6:if(Lt(t,e),Ue(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,i=e.stateNode;try{i.nodeValue=l}catch(on){vr(e,e.return,on)}}break;case 3:if(hp=null,p=Be,Be=dp(t.containerInfo),Lt(t,e),Be=p,Ue(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Lf(t.containerInfo)}catch(on){vr(e,e.return,on)}ue&&(ue=!1,et(e));break;case 4:l=Be,Be=dp(e.stateNode.containerInfo),Lt(t,e),Ue(e),Be=l;break;case 12:Lt(t,e),Ue(e);break;case 31:Lt(t,e),Ue(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Je(e,l)));break;case 13:Lt(t,e),Ue(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(ep=Vn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Je(e,l)));break;case 22:p=e.memoizedState!==null;var Le=i!==null&&i.memoizedState!==null,Ze=xe,dt=ee;if(xe=Ze||p,ee=dt||Le,Lt(t,e),ee=dt,xe=Ze,Ue(e),l&8192)e:for(t=e.stateNode,t._visibility=p?t._visibility&-2:t._visibility|1,p&&(i===null||Le||xe||ee||Ct(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){Le=i=t;try{if(m=Le.stateNode,p)P=m.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{oe=Le.stateNode;var mt=Le.memoizedProps.style,Qe=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;oe.style.display=Qe==null||typeof Qe=="boolean"?"":(""+Qe).trim()}}catch(on){vr(Le,Le.return,on)}}}else if(t.tag===6){if(i===null){Le=t;try{Le.stateNode.nodeValue=p?"":Le.memoizedProps}catch(on){vr(Le,Le.return,on)}}}else if(t.tag===18){if(i===null){Le=t;try{var it=Le.stateNode;p?vg(it,!0):vg(Le.stateNode,!1)}catch(on){vr(Le,Le.return,on)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,Je(e,i))));break;case 19:Lt(t,e),Ue(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Je(e,l)));break;case 30:break;case 21:break;default:Lt(t,e),Ue(e)}}function Ue(e){var t=e.flags;if(t&2){try{for(var i,l=e.return;l!==null;){if(_(l)){i=l;break}l=l.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var p=i.stateNode,m=G(e);Se(e,m,p);break;case 5:var P=i.stateNode;i.flags&32&&(Hr(P,""),i.flags&=-33);var oe=G(e);Se(e,oe,P);break;case 3:case 4:var Le=i.stateNode.containerInfo,Ze=G(e);re(e,Ze,Le);break;default:throw Error(s(161))}}catch(dt){vr(e,e.return,dt)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function et(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;et(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function nt(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Re(e,t.alternate,t),t=t.sibling}function Ct(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Us(4,t,t.return),Ct(t);break;case 1:Xl(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Qd(t,t.return,i),Ct(t);break;case 27:hd(t.stateNode);case 26:case 5:Xl(t,t.return),Ct(t);break;case 22:t.memoizedState===null&&Ct(t);break;case 30:Ct(t);break;default:Ct(t)}e=e.sibling}}function Et(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,p=e,m=t,P=m.flags;switch(m.tag){case 0:case 11:case 15:Et(p,m,i),Jt(4,m);break;case 1:if(Et(p,m,i),l=m,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Ze){vr(l,l.return,Ze)}if(l=m,p=l.updateQueue,p!==null){var oe=l.stateNode;try{var Le=p.shared.hiddenCallbacks;if(Le!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Le.length;p++)Oo(Le[p],oe)}catch(Ze){vr(l,l.return,Ze)}}i&&P&64&&vf(m),$u(m,m.return);break;case 27:U(m);case 26:case 5:Et(p,m,i),i&&l===null&&P&4&&c(m),$u(m,m.return);break;case 12:Et(p,m,i);break;case 31:Et(p,m,i),i&&P&4&&ft(p,m);break;case 13:Et(p,m,i),i&&P&4&&gt(p,m);break;case 22:m.memoizedState===null&&Et(p,m,i),$u(m,m.return);break;case 30:break;default:Et(p,m,i)}t=t.sibling}}function pn(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&_n(i))}function Bn(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_n(e))}function sn(e,t,i,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)On(e,t,i,l),t=t.sibling}function On(e,t,i,l){var p=t.flags;switch(t.tag){case 0:case 11:case 15:sn(e,t,i,l),p&2048&&Jt(9,t);break;case 1:sn(e,t,i,l);break;case 3:sn(e,t,i,l),p&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_n(e)));break;case 12:if(p&2048){sn(e,t,i,l),e=t.stateNode;try{var m=t.memoizedProps,P=m.id,oe=m.onPostCommit;typeof oe=="function"&&oe(P,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Le){vr(t,t.return,Le)}}else sn(e,t,i,l);break;case 31:sn(e,t,i,l);break;case 13:sn(e,t,i,l);break;case 23:break;case 22:m=t.stateNode,P=t.alternate,t.memoizedState!==null?m._visibility&2?sn(e,t,i,l):hn(e,t):m._visibility&2?sn(e,t,i,l):(m._visibility|=2,$n(e,t,i,l,(t.subtreeFlags&10256)!==0||!1)),p&2048&&pn(P,t);break;case 24:sn(e,t,i,l),p&2048&&Bn(t.alternate,t);break;default:sn(e,t,i,l)}}function $n(e,t,i,l,p){for(p=p&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var m=e,P=t,oe=i,Le=l,Ze=P.flags;switch(P.tag){case 0:case 11:case 15:$n(m,P,oe,Le,p),Jt(8,P);break;case 23:break;case 22:var dt=P.stateNode;P.memoizedState!==null?dt._visibility&2?$n(m,P,oe,Le,p):hn(m,P):(dt._visibility|=2,$n(m,P,oe,Le,p)),p&&Ze&2048&&pn(P.alternate,P);break;case 24:$n(m,P,oe,Le,p),p&&Ze&2048&&Bn(P.alternate,P);break;default:$n(m,P,oe,Le,p)}t=t.sibling}}function hn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,l=t,p=l.flags;switch(l.tag){case 22:hn(i,l),p&2048&&pn(l.alternate,l);break;case 24:hn(i,l),p&2048&&Bn(l.alternate,l);break;default:hn(i,l)}t=t.sibling}}var At=8192;function ln(e,t,i){if(e.subtreeFlags&At)for(e=e.child;e!==null;)ir(e,t,i),e=e.sibling}function ir(e,t,i){switch(e.tag){case 26:ln(e,t,i),e.flags&At&&e.memoizedState!==null&&um(i,Be,e.memoizedState,e.memoizedProps);break;case 5:ln(e,t,i);break;case 3:case 4:var l=Be;Be=dp(e.stateNode.containerInfo),ln(e,t,i),Be=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=At,At=16777216,ln(e,t,i),At=l):ln(e,t,i));break;default:ln(e,t,i)}}function Ir(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function rr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];Ce=l,Gn(l,e)}Ir(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)To(e),e=e.sibling}function To(e){switch(e.tag){case 0:case 11:case 15:rr(e),e.flags&2048&&Us(9,e,e.return);break;case 3:rr(e);break;case 12:rr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ro(e)):rr(e);break;default:rr(e)}}function ro(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var l=t[i];Ce=l,Gn(l,e)}Ir(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Us(8,t,t.return),ro(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,ro(t));break;default:ro(t)}e=e.sibling}}function Gn(e,t){for(;Ce!==null;){var i=Ce;switch(i.tag){case 0:case 11:case 15:Us(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:_n(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,Ce=l;else e:for(i=e;Ce!==null;){l=Ce;var p=l.sibling,m=l.return;if(Oe(l),l===i){Ce=null;break e}if(p!==null){p.return=m,Ce=p;break e}Ce=m}}}var jl={getCacheForType:function(e){var t=yr(Ai),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return yr(Ai).controller.signal}},tl=typeof WeakMap=="function"?WeakMap:Map,lr=0,Ur=null,Di=null,Ii=0,br=0,kl=null,hu=!1,wf=!1,Jp=!1,Yc=0,Io=0,gu=0,Ku=0,Qp=0,Al=0,Sf=0,cd=null,nl=null,eh=!1,ep=0,B0=0,tp=1/0,np=null,yu=null,_a=0,mu=null,Cf=null,Gc=0,th=0,nh=null,O0=null,ud=0,ih=null;function Nl(){return(lr&2)!==0&&Ii!==0?Ii&-Ii:$.T!==null?ch():cr()}function I0(){if(Al===0)if((Ii&536870912)===0||hi){var e=Xi;Xi<<=1,(Xi&3932160)===0&&(Xi=262144),Al=e}else Al=536870912;return e=pr.current,e!==null&&(e.flags|=32),Al}function il(e,t,i){(e===Ur&&(br===2||br===9)||e.cancelPendingCommit!==null)&&(Tf(e,0),xu(e,Ii,Al,!1)),Xt(e,i),((lr&2)===0||e!==Ur)&&(e===Ur&&((lr&2)===0&&(Ku|=i),Io===4&&xu(e,Ii,Al,!1)),Pc(e))}function U0(e,t,i){if((lr&6)!==0)throw Error(s(327));var l=!i&&(t&127)===0&&(t&e.expiredLanes)===0||ko(e,t),p=l?_y(e,t):oh(e,t,!0),m=l;do{if(p===0){wf&&!l&&xu(e,t,0,!1);break}else{if(i=e.current.alternate,m&&!Ay(i)){p=oh(e,t,!1),m=!1;continue}if(p===2){if(m=t,e.errorRecoveryDisabledLanes&m)var P=0;else P=e.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){t=P;e:{var oe=e;p=cd;var Le=oe.current.memoizedState.isDehydrated;if(Le&&(Tf(oe,P).flags|=256),P=oh(oe,P,!1),P!==2){if(Jp&&!Le){oe.errorRecoveryDisabledLanes|=m,Ku|=m,p=4;break e}m=nl,nl=p,m!==null&&(nl===null?nl=m:nl.push.apply(nl,m))}p=P}if(m=!1,p!==2)continue}}if(p===1){Tf(e,0),xu(e,t,0,!0);break}e:{switch(l=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:xu(l,t,Al,!hu);break e;case 2:nl=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(p=ep+300-Vn(),10<p)){if(xu(l,t,Al,!hu),Wt(l,0,!0)!==0)break e;Gc=t,l.timeoutHandle=mg(F0.bind(null,l,i,nl,np,eh,t,Al,Ku,Sf,hu,m,"Throttled",-0,0),p);break e}F0(l,i,nl,np,eh,t,Al,Ku,Sf,hu,m,null,-0,0)}}break}while(!0);Pc(e)}function F0(e,t,i,l,p,m,P,oe,Le,Ze,dt,mt,Qe,it){if(e.timeoutHandle=-1,mt=t.subtreeFlags,mt&8192||(mt&16785408)===16785408){mt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sn},ir(t,m,mt);var on=(m&62914560)===m?ep-Vn():(m&4194048)===m?B0-Vn():0;if(on=fm(mt,on),on!==null){Gc=m,e.cancelPendingCommit=on($0.bind(null,e,t,m,i,l,p,P,oe,Le,dt,mt,null,Qe,it)),xu(e,m,P,!Ze);return}}$0(e,t,m,i,l,p,P,oe,Le)}function Ay(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var p=i[l],m=p.getSnapshot;p=p.value;try{if(!Yo(m(),p))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xu(e,t,i,l){t&=~Qp,t&=~Ku,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var p=t;0<p;){var m=31-rt(p),P=1<<m;l[m]=-1,p&=~P}i!==0&&ya(e,i,t)}function ip(){return(lr&6)===0?(fd(0),!1):!0}function rh(){if(Di!==null){if(br===0)var e=Di.return;else e=Di,uo=Mr=null,Ic(e),st=null,Bt=0,e=Di;for(;e!==null;)ld(e.alternate,e),e=e.return;Di=null}}function Tf(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Gy(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Gc=0,rh(),Ur=e,Di=i=fa(e.current,null),Ii=t,br=0,kl=null,hu=!1,wf=ko(e,t),Jp=!1,Sf=Al=Qp=Ku=gu=Io=0,nl=cd=null,eh=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var p=31-rt(l),m=1<<p;t|=e[p],l&=~m}return Yc=t,wc(),i}function q0(e,t){dn=null,$.H=Ou,t===Pe||t===ve?(t=pt(),br=3):t===Ye?(t=pt(),br=4):br=t===du?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,kl=t,Di===null&&(Io=1,Iu(e,Ro(t,e.current)))}function H0(){var e=pr.current;return e===null?!0:(Ii&4194048)===Ii?Ni===null:(Ii&62914560)===Ii||(Ii&536870912)!==0?e===Ni:!1}function V0(){var e=$.H;return $.H=Ou,e===null?Ou:e}function W0(){var e=$.A;return $.A=jl,e}function rp(){Io=4,hu||(Ii&4194048)!==Ii&&pr.current!==null||(wf=!0),(gu&134217727)===0&&(Ku&134217727)===0||Ur===null||xu(Ur,Ii,Al,!1)}function oh(e,t,i){var l=lr;lr|=2;var p=V0(),m=W0();(Ur!==e||Ii!==t)&&(np=null,Tf(e,t)),t=!1;var P=Io;e:do try{if(br!==0&&Di!==null){var oe=Di,Le=kl;switch(br){case 8:rh(),P=6;break e;case 3:case 2:case 9:case 6:pr.current===null&&(t=!0);var Ze=br;if(br=0,kl=null,jf(e,oe,Le,Ze),i&&wf){P=0;break e}break;default:Ze=br,br=0,kl=null,jf(e,oe,Le,Ze)}}Ny(),P=Io;break}catch(dt){q0(e,dt)}while(!0);return t&&e.shellSuspendCounter++,uo=Mr=null,lr=l,$.H=p,$.A=m,Di===null&&(Ur=null,Ii=0,wc()),P}function Ny(){for(;Di!==null;)Y0(Di)}function _y(e,t){var i=lr;lr|=2;var l=V0(),p=W0();Ur!==e||Ii!==t?(np=null,tp=Vn()+500,Tf(e,t)):wf=ko(e,t);e:do try{if(br!==0&&Di!==null){t=Di;var m=kl;t:switch(br){case 1:br=0,kl=null,jf(e,t,m,1);break;case 2:case 9:if(Fe(m)){br=0,kl=null,G0(t);break}t=function(){br!==2&&br!==9||Ur!==e||(br=7),Pc(e)},m.then(t,t);break e;case 3:br=7;break e;case 4:br=5;break e;case 7:Fe(m)?(br=0,kl=null,G0(t)):(br=0,kl=null,jf(e,t,m,7));break;case 5:var P=null;switch(Di.tag){case 26:P=Di.memoizedState;case 5:case 27:var oe=Di;if(P?Pg(P):oe.stateNode.complete){br=0,kl=null;var Le=oe.sibling;if(Le!==null)Di=Le;else{var Ze=oe.return;Ze!==null?(Di=Ze,op(Ze)):Di=null}break t}}br=0,kl=null,jf(e,t,m,5);break;case 6:br=0,kl=null,jf(e,t,m,6);break;case 8:rh(),Io=6;break e;default:throw Error(s(462))}}Ly();break}catch(dt){q0(e,dt)}while(!0);return uo=Mr=null,$.H=l,$.A=p,lr=i,Di!==null?0:(Ur=null,Ii=0,wc(),Io)}function Ly(){for(;Di!==null&&!mn();)Y0(Di)}function Y0(e){var t=Zd(e.alternate,e,Yc);e.memoizedProps=e.pendingProps,t===null?op(e):Di=t}function G0(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=$d(i,t,t.pendingProps,t.type,void 0,Ii);break;case 11:t=$d(i,t,t.pendingProps,t.type.render,t.ref,Ii);break;case 5:Ic(t);default:ld(i,t),t=Di=Tc(t,Yc),t=Zd(i,t,Yc)}e.memoizedProps=e.pendingProps,t===null?op(e):Di=t}function jf(e,t,i,l){uo=Mr=null,Ic(t),st=null,Bt=0;var p=t.return;try{if(Xd(e,p,t,i,Ii)){Io=1,Iu(e,Ro(i,e.current)),Di=null;return}}catch(m){if(p!==null)throw Di=p,m;Io=1,Iu(e,Ro(i,e.current)),Di=null;return}t.flags&32768?(hi||l===1?e=!0:wf||(Ii&536870912)!==0?e=!1:(hu=e=!0,(l===2||l===9||l===3||l===6)&&(l=pr.current,l!==null&&l.tag===13&&(l.flags|=16384))),X0(t,e)):op(t)}function op(e){var t=e;do{if((t.flags&32768)!==0){X0(t,hu);return}e=t.return;var i=sd(t.alternate,t,Yc);if(i!==null){Di=i;return}if(t=t.sibling,t!==null){Di=t;return}Di=t=e}while(t!==null);Io===0&&(Io=5)}function X0(e,t){do{var i=Jd(e.alternate,e);if(i!==null){i.flags&=32767,Di=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Di=e;return}Di=e=i}while(e!==null);Io=6,Di=null}function $0(e,t,i,l,p,m,P,oe,Le){e.cancelPendingCommit=null;do ap();while(_a!==0);if((lr&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(m=t.lanes|t.childLanes,m|=Js,No(e,i,m,P,oe,Le),e===Ur&&(Di=Ur=null,Ii=0),Cf=t,mu=e,Gc=i,th=m,nh=p,O0=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ey(ct,function(){return eg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=$.T,$.T=null,p=te.p,te.p=2,P=lr,lr|=4;try{Ne(e,t,i)}finally{lr=P,te.p=p,$.T=l}}_a=1,K0(),Z0(),J0()}}function K0(){if(_a===1){_a=0;var e=mu,t=Cf,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=$.T,$.T=null;var l=te.p;te.p=2;var p=lr;lr|=4;try{qe(t,e);var m=mh,P=co(e.containerInfo),oe=m.focusedElem,Le=m.selectionRange;if(P!==oe&&oe&&oe.ownerDocument&&Ta(oe.ownerDocument.documentElement,oe)){if(Le!==null&&us(oe)){var Ze=Le.start,dt=Le.end;if(dt===void 0&&(dt=Ze),"selectionStart"in oe)oe.selectionStart=Ze,oe.selectionEnd=Math.min(dt,oe.value.length);else{var mt=oe.ownerDocument||document,Qe=mt&&mt.defaultView||window;if(Qe.getSelection){var it=Qe.getSelection(),on=oe.textContent.length,qn=Math.min(Le.start,on),zr=Le.end===void 0?qn:Math.min(Le.end,on);!it.extend&&qn>zr&&(P=zr,zr=qn,qn=P);var Ve=pl(oe,qn),Ie=pl(oe,zr);if(Ve&&Ie&&(it.rangeCount!==1||it.anchorNode!==Ve.node||it.anchorOffset!==Ve.offset||it.focusNode!==Ie.node||it.focusOffset!==Ie.offset)){var Ke=mt.createRange();Ke.setStart(Ve.node,Ve.offset),it.removeAllRanges(),qn>zr?(it.addRange(Ke),it.extend(Ie.node,Ie.offset)):(Ke.setEnd(Ie.node,Ie.offset),it.addRange(Ke))}}}}for(mt=[],it=oe;it=it.parentNode;)it.nodeType===1&&mt.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<mt.length;oe++){var yt=mt[oe];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}xp=!!yh,mh=yh=null}finally{lr=p,te.p=l,$.T=i}}e.current=t,_a=2}}function Z0(){if(_a===2){_a=0;var e=mu,t=Cf,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=$.T,$.T=null;var l=te.p;te.p=2;var p=lr;lr|=4;try{Re(e,t.alternate,t)}finally{lr=p,te.p=l,$.T=i}}_a=3}}function J0(){if(_a===4||_a===3){_a=0,en();var e=mu,t=Cf,i=Gc,l=O0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?_a=5:(_a=0,Cf=mu=null,Q0(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(yu=null),Xn(i),t=t.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Nn,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=$.T,p=te.p,te.p=2,$.T=null;try{for(var m=e.onRecoverableError,P=0;P<l.length;P++){var oe=l[P];m(oe.value,{componentStack:oe.stack})}}finally{$.T=t,te.p=p}}(Gc&3)!==0&&ap(),Pc(e),p=e.pendingLanes,(i&261930)!==0&&(p&42)!==0?e===ih?ud++:(ud=0,ih=e):ud=0,fd(0)}}function Q0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_n(t)))}function ap(){return K0(),Z0(),J0(),eg()}function eg(){if(_a!==5)return!1;var e=mu,t=th;th=0;var i=Xn(Gc),l=$.T,p=te.p;try{te.p=32>i?32:i,$.T=null,i=nh,nh=null;var m=mu,P=Gc;if(_a=0,Cf=mu=null,Gc=0,(lr&6)!==0)throw Error(s(331));var oe=lr;if(lr|=4,To(m.current),On(m,m.current,P,i),lr=oe,fd(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Nn,m)}catch{}return!0}finally{te.p=p,$.T=l,Q0(e,t)}}function tg(e,t,i){t=Ro(i,t),t=mf(e.stateNode,t,2),e=En(e,t,2),e!==null&&(Xt(e,2),Pc(e))}function vr(e,t,i){if(e.tag===3)tg(e,e,i);else for(;t!==null;){if(t.tag===3){tg(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(yu===null||!yu.has(l))){e=Ro(i,e),i=Gd(2),l=En(t,i,2),l!==null&&(Jf(i,l,t,e),Xt(l,2),Pc(l));break}}t=t.return}}function ah(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new tl;var p=new Set;l.set(t,p)}else p=l.get(t),p===void 0&&(p=new Set,l.set(t,p));p.has(i)||(Jp=!0,p.add(i),e=zy.bind(null,e,t,i),t.then(e,e))}function zy(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ur===e&&(Ii&i)===i&&(Io===4||Io===3&&(Ii&62914560)===Ii&&300>Vn()-ep?(lr&2)===0&&Tf(e,0):Qp|=i,Sf===Ii&&(Sf=0)),Pc(e)}function ng(e,t){t===0&&(t=go()),e=Yr(e,t),e!==null&&(Xt(e,t),Pc(e))}function Py(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),ng(e,i)}function Dy(e,t){var i=0;switch(e.tag){case 31:case 13:var l=e.stateNode,p=e.memoizedState;p!==null&&(i=p.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),ng(e,i)}function Ey(e,t){return nn(e,t)}var sp=null,kf=null,sh=!1,lp=!1,lh=!1,bu=0;function Pc(e){e!==kf&&e.next===null&&(kf===null?sp=kf=e:kf=kf.next=e),lp=!0,sh||(sh=!0,My())}function fd(e,t){if(!lh&&lp){lh=!0;do for(var i=!1,l=sp;l!==null;){if(e!==0){var p=l.pendingLanes;if(p===0)var m=0;else{var P=l.suspendedLanes,oe=l.pingedLanes;m=(1<<31-rt(42|e)+1)-1,m&=p&~(P&~oe),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,ag(l,m))}else m=Ii,m=Wt(l,l===Ur?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||ko(l,m)||(i=!0,ag(l,m));l=l.next}while(i);lh=!1}}function Ry(){ig()}function ig(){lp=sh=!1;var e=0;bu!==0&&Yy()&&(e=bu);for(var t=Vn(),i=null,l=sp;l!==null;){var p=l.next,m=rg(l,t);m===0?(l.next=null,i===null?sp=p:i.next=p,p===null&&(kf=i)):(i=l,(e!==0||(m&3)!==0)&&(lp=!0)),l=p}_a!==0&&_a!==5||fd(e),bu!==0&&(bu=0)}function rg(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var P=31-rt(m),oe=1<<P,Le=p[P];Le===-1?((oe&i)===0||(oe&l)!==0)&&(p[P]=Zr(oe,t)):Le<=t&&(e.expiredLanes|=oe),m&=~oe}if(t=Ur,i=Ii,i=Wt(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,i===0||e===t&&(br===2||br===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Rt(l),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||ko(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(l!==null&&Rt(l),Xn(i)){case 2:case 8:i=li;break;case 32:i=ct;break;case 268435456:i=Rn;break;default:i=ct}return l=og.bind(null,e),i=nn(i,l),e.callbackPriority=t,e.callbackNode=i,t}return l!==null&&l!==null&&Rt(l),e.callbackPriority=2,e.callbackNode=null,2}function og(e,t){if(_a!==0&&_a!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(ap()&&e.callbackNode!==i)return null;var l=Ii;return l=Wt(e,e===Ur?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(U0(e,l,t),rg(e,Vn()),e.callbackNode!=null&&e.callbackNode===i?og.bind(null,e):null)}function ag(e,t){if(ap())return null;U0(e,t,!0)}function My(){Xy(function(){(lr&6)!==0?nn(Dt,Ry):ig()})}function ch(){if(bu===0){var e=d;e===0&&(e=wn,wn<<=1,(wn&261888)===0&&(wn=256)),bu=e}return bu}function sg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ut(""+e)}function lg(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function By(e,t,i,l,p){if(t==="submit"&&i&&i.stateNode===p){var m=sg((p[di]||null).action),P=l.submitter;P&&(t=(t=P[di]||null)?sg(t.formAction):P.getAttribute("formAction"),t!==null&&(m=t,P=null));var oe=new qo("action","action",null,l,p);e.push({event:oe,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(bu!==0){var Le=P?lg(p,P):new FormData(p);$f(i,{pending:!0,data:Le,method:p.method,action:m},null,Le)}}else typeof m=="function"&&(oe.preventDefault(),Le=P?lg(p,P):new FormData(p),$f(i,{pending:!0,data:Le,method:p.method,action:m},m,Le))},currentTarget:p}]})}}for(var uh=0;uh<zi.length;uh++){var fh=zi[uh],Oy=fh.toLowerCase(),Iy=fh[0].toUpperCase()+fh.slice(1);Qr(Oy,"on"+Iy)}Qr(Oa,"onAnimationEnd"),Qr(Ia,"onAnimationIteration"),Qr(Zs,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(hl,"onTransitionRun"),Qr(gl,"onTransitionStart"),Qr(fs,"onTransitionCancel"),Qr(vc,"onTransitionEnd"),ba("onMouseEnter",["mouseout","mouseover"]),ba("onMouseLeave",["mouseout","mouseover"]),ba("onPointerEnter",["pointerout","pointerover"]),ba("onPointerLeave",["pointerout","pointerover"]),ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ra("onBeforeInput",["compositionend","keypress","textInput","paste"]),ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dd));function cg(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],p=l.event;l=l.listeners;e:{var m=void 0;if(t)for(var P=l.length-1;0<=P;P--){var oe=l[P],Le=oe.instance,Ze=oe.currentTarget;if(oe=oe.listener,Le!==m&&p.isPropagationStopped())break e;m=oe,p.currentTarget=Ze;try{m(p)}catch(dt){Wr(dt)}p.currentTarget=null,m=Le}else for(P=0;P<l.length;P++){if(oe=l[P],Le=oe.instance,Ze=oe.currentTarget,oe=oe.listener,Le!==m&&p.isPropagationStopped())break e;m=oe,p.currentTarget=Ze;try{m(p)}catch(dt){Wr(dt)}p.currentTarget=null,m=Le}}}}function Ei(e,t){var i=t[ia];i===void 0&&(i=t[ia]=new Set);var l=e+"__bubble";i.has(l)||(ug(t,e,2,!1),i.add(l))}function dh(e,t,i){var l=0;t&&(l|=4),ug(i,e,l,t)}var cp="_reactListening"+Math.random().toString(36).slice(2);function ph(e){if(!e[cp]){e[cp]=!0,Ts.forEach(function(i){i!=="selectionchange"&&(Uy.has(i)||dh(i,!1,e),dh(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cp]||(t[cp]=!0,dh("selectionchange",!1,t))}}function ug(e,t,i,l){switch(Ig(t)){case 2:var p=hm;break;case 8:p=gm;break;default:p=Nh}i=p.bind(null,t,i,e),p=void 0,!bn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(p=!0),l?p!==void 0?e.addEventListener(t,i,{capture:!0,passive:p}):e.addEventListener(t,i,!0):p!==void 0?e.addEventListener(t,i,{passive:p}):e.addEventListener(t,i,!1)}function hh(e,t,i,l,p){var m=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var P=l.tag;if(P===3||P===4){var oe=l.stateNode.containerInfo;if(oe===p)break;if(P===4)for(P=l.return;P!==null;){var Le=P.tag;if((Le===3||Le===4)&&P.stateNode.containerInfo===p)return;P=P.return}for(;oe!==null;){if(P=Wn(oe),P===null)return;if(Le=P.tag,Le===5||Le===6||Le===26||Le===27){l=m=P;continue e}oe=oe.parentNode}}l=l.return}Hn(function(){var Ze=m,dt=ll(i),mt=[];e:{var Qe=Do.get(e);if(Qe!==void 0){var it=qo,on=e;switch(e){case"keypress":if(Ft(i)===0)break e;case"keydown":case"keyup":it=Fn;break;case"focusin":on="focus",it=vi;break;case"focusout":on="blur",it=vi;break;case"beforeblur":case"afterblur":it=vi;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=Hi;break;case Oa:case Ia:case Zs:it=w;break;case vc:it=gr;break;case"scroll":case"scrollend":it=Ls;break;case"wheel":it=ur;break;case"copy":case"cut":case"paste":it=ye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=wi;break;case"toggle":case"beforetoggle":it=Lo}var qn=(t&4)!==0,zr=!qn&&(e==="scroll"||e==="scrollend"),Ve=qn?Qe!==null?Qe+"Capture":null:Qe;qn=[];for(var Ie=Ze,Ke;Ie!==null;){var yt=Ie;if(Ke=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||Ke===null||Ve===null||(yt=Kt(Ie,Ve),yt!=null&&qn.push(pd(Ie,yt,Ke))),zr)break;Ie=Ie.return}0<qn.length&&(Qe=new it(Qe,on,null,i,dt),mt.push({event:Qe,listeners:qn}))}}if((t&7)===0){e:{if(Qe=e==="mouseover"||e==="pointerover",it=e==="mouseout"||e==="pointerout",Qe&&i!==Fo&&(on=i.relatedTarget||i.fromElement)&&(Wn(on)||on[yo]))break e;if((it||Qe)&&(Qe=dt.window===dt?dt:(Qe=dt.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,it?(on=i.relatedTarget||i.toElement,it=Ze,on=on?Wn(on):null,on!==null&&(zr=f(on),qn=on.tag,on!==zr||qn!==5&&qn!==27&&qn!==6)&&(on=null)):(it=null,on=Ze),it!==on)){if(qn=bc,yt="onMouseLeave",Ve="onMouseEnter",Ie="mouse",(e==="pointerout"||e==="pointerover")&&(qn=wi,yt="onPointerLeave",Ve="onPointerEnter",Ie="pointer"),zr=it==null?Qe:Si(it),Ke=on==null?Qe:Si(on),Qe=new qn(yt,Ie+"leave",it,i,dt),Qe.target=zr,Qe.relatedTarget=Ke,yt=null,Wn(dt)===Ze&&(qn=new qn(Ve,Ie+"enter",on,i,dt),qn.target=Ke,qn.relatedTarget=zr,yt=qn),zr=yt,it&&on)t:{for(qn=Fy,Ve=it,Ie=on,Ke=0,yt=Ve;yt;yt=qn(yt))Ke++;yt=0;for(var Ln=Ie;Ln;Ln=qn(Ln))yt++;for(;0<Ke-yt;)Ve=qn(Ve),Ke--;for(;0<yt-Ke;)Ie=qn(Ie),yt--;for(;Ke--;){if(Ve===Ie||Ie!==null&&Ve===Ie.alternate){qn=Ve;break t}Ve=qn(Ve),Ie=qn(Ie)}qn=null}else qn=null;it!==null&&fg(mt,Qe,it,qn,!1),on!==null&&zr!==null&&fg(mt,zr,on,qn,!0)}}e:{if(Qe=Ze?Si(Ze):window,it=Qe.nodeName&&Qe.nodeName.toLowerCase(),it==="select"||it==="input"&&Qe.type==="file")var or=Ba;else if(Ca(Qe))if(sa)or=cs;else{or=fr;var yn=Ml}else it=Qe.nodeName,!it||it.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?Ze&&Vs(Ze.elementType)&&(or=Ba):or=Qc;if(or&&(or=or(e,Ze))){Po(mt,or,i,dt);break e}yn&&yn(e,Qe,Ze),e==="focusout"&&Ze&&Qe.type==="number"&&Ze.memoizedProps.value!=null&&sl(Qe,"number",Qe.value)}switch(yn=Ze?Si(Ze):window,e){case"focusin":(Ca(yn)||yn.contentEditable==="true")&&(Ka=yn,Ks=Ze,ua=null);break;case"focusout":ua=Ks=Ka=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,Vi(mt,i,dt);break;case"selectionchange":if($s)break;case"keydown":case"keyup":Vi(mt,i,dt)}var mi;if(Dr)e:{switch(e){case"compositionstart":var Ui="onCompositionStart";break e;case"compositionend":Ui="onCompositionEnd";break e;case"compositionupdate":Ui="onCompositionUpdate";break e}Ui=void 0}else Xa?ss(e,i)&&(Ui="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ui="onCompositionStart");Ui&&(Ma&&i.locale!=="ko"&&(Xa||Ui!=="onCompositionStart"?Ui==="onCompositionEnd"&&Xa&&(mi=Mi()):(tn=dt,tc="value"in tn?tn.value:tn.textContent,Xa=!0)),yn=up(Ze,Ui),0<yn.length&&(Ui=new He(Ui,e,null,i,dt),mt.push({event:Ui,listeners:yn}),mi?Ui.data=mi:(mi=fl(i),mi!==null&&(Ui.data=mi)))),(mi=Qi?Vo(e,i):aa(e,i))&&(Ui=up(Ze,"onBeforeInput"),0<Ui.length&&(yn=new He("onBeforeInput","beforeinput",null,i,dt),mt.push({event:yn,listeners:Ui}),yn.data=mi)),By(mt,e,Ze,i,dt)}cg(mt,t)})}function pd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function up(e,t){for(var i=t+"Capture",l=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Kt(e,i),p!=null&&l.unshift(pd(e,p,m)),p=Kt(e,t),p!=null&&l.push(pd(e,p,m))),e.tag===3)return l;e=e.return}return[]}function Fy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function fg(e,t,i,l,p){for(var m=t._reactName,P=[];i!==null&&i!==l;){var oe=i,Le=oe.alternate,Ze=oe.stateNode;if(oe=oe.tag,Le!==null&&Le===l)break;oe!==5&&oe!==26&&oe!==27||Ze===null||(Le=Ze,p?(Ze=Kt(i,m),Ze!=null&&P.unshift(pd(i,Ze,Le))):p||(Ze=Kt(i,m),Ze!=null&&P.push(pd(i,Ze,Le)))),i=i.return}P.length!==0&&e.push({event:t,listeners:P})}var qy=/\r\n?/g,Hy=/\u0000|\uFFFD/g;function dg(e){return(typeof e=="string"?e:""+e).replace(qy,`
`).replace(Hy,"")}function pg(e,t){return t=dg(t),dg(e)===t}function Lr(e,t,i,l,p,m){switch(i){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Hr(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Hr(e,""+l);break;case"className":As(e,"class",l);break;case"tabIndex":As(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":As(e,i,l);break;case"style":_s(e,l,m);break;case"data":if(t!=="object"){As(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ut(""+l),e.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(t!=="input"&&Lr(e,t,"name",p.name,p,null),Lr(e,t,"formEncType",p.formEncType,p,null),Lr(e,t,"formMethod",p.formMethod,p,null),Lr(e,t,"formTarget",p.formTarget,p,null)):(Lr(e,t,"encType",p.encType,p,null),Lr(e,t,"method",p.method,p,null),Lr(e,t,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(i);break}l=ut(""+l),e.setAttribute(i,l);break;case"onClick":l!=null&&(e.onclick=Sn);break;case"onScroll":l!=null&&Ei("scroll",e);break;case"onScrollEnd":l!=null&&Ei("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}i=ut(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""+l):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":l===!0?e.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(i,l):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(i,l):e.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(i):e.setAttribute(i,l);break;case"popover":Ei("beforetoggle",e),Ei("toggle",e),Fi(e,"popover",l);break;case"xlinkActuate":In(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":In(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":In(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":In(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":In(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":In(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":In(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":In(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":In(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Fi(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=zl.get(i)||i,Fi(e,i,l))}}function gh(e,t,i,l,p,m){switch(i){case"style":_s(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(i=l.__html,i!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof l=="string"?Hr(e,l):(typeof l=="number"||typeof l=="bigint")&&Hr(e,""+l);break;case"onScroll":l!=null&&Ei("scroll",e);break;case"onScrollEnd":l!=null&&Ei("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Sn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yn.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(p=i.endsWith("Capture"),t=i.slice(2,p?i.length-7:void 0),m=e[di]||null,m=m!=null?m[i]:null,typeof m=="function"&&e.removeEventListener(t,m,p),typeof l=="function")){typeof m!="function"&&m!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,l,p);break e}i in e?e[i]=l:l===!0?e.setAttribute(i,""):Fi(e,i,l)}}}function rs(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ei("error",e),Ei("load",e);var l=!1,p=!1,m;for(m in i)if(i.hasOwnProperty(m)){var P=i[m];if(P!=null)switch(m){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Lr(e,t,m,P,i,null)}}p&&Lr(e,t,"srcSet",i.srcSet,i,null),l&&Lr(e,t,"src",i.src,i,null);return;case"input":Ei("invalid",e);var oe=m=P=p=null,Le=null,Ze=null;for(l in i)if(i.hasOwnProperty(l)){var dt=i[l];if(dt!=null)switch(l){case"name":p=dt;break;case"type":P=dt;break;case"checked":Le=dt;break;case"defaultChecked":Ze=dt;break;case"value":m=dt;break;case"defaultValue":oe=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,t));break;default:Lr(e,t,l,dt,i,null)}}qr(e,m,oe,Le,Ze,P,p,!1);return;case"select":Ei("invalid",e),l=P=m=null;for(p in i)if(i.hasOwnProperty(p)&&(oe=i[p],oe!=null))switch(p){case"value":m=oe;break;case"defaultValue":P=oe;break;case"multiple":l=oe;default:Lr(e,t,p,oe,i,null)}t=m,i=P,e.multiple=!!l,t!=null?Ji(e,!!l,t,!1):i!=null&&Ji(e,!!l,i,!0);return;case"textarea":Ei("invalid",e),m=p=l=null;for(P in i)if(i.hasOwnProperty(P)&&(oe=i[P],oe!=null))switch(P){case"value":l=oe;break;case"defaultValue":p=oe;break;case"children":m=oe;break;case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(91));break;default:Lr(e,t,P,oe,i,null)}va(e,l,p,m);return;case"option":for(Le in i)if(i.hasOwnProperty(Le)&&(l=i[Le],l!=null))switch(Le){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Lr(e,t,Le,l,i,null)}return;case"dialog":Ei("beforetoggle",e),Ei("toggle",e),Ei("cancel",e),Ei("close",e);break;case"iframe":case"object":Ei("load",e);break;case"video":case"audio":for(l=0;l<dd.length;l++)Ei(dd[l],e);break;case"image":Ei("error",e),Ei("load",e);break;case"details":Ei("toggle",e);break;case"embed":case"source":case"link":Ei("error",e),Ei("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ze in i)if(i.hasOwnProperty(Ze)&&(l=i[Ze],l!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Lr(e,t,Ze,l,i,null)}return;default:if(Vs(t)){for(dt in i)i.hasOwnProperty(dt)&&(l=i[dt],l!==void 0&&gh(e,t,dt,l,i,void 0));return}}for(oe in i)i.hasOwnProperty(oe)&&(l=i[oe],l!=null&&Lr(e,t,oe,l,i,null))}function Vy(e,t,i,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,P=null,oe=null,Le=null,Ze=null,dt=null;for(it in i){var mt=i[it];if(i.hasOwnProperty(it)&&mt!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":Le=mt;default:l.hasOwnProperty(it)||Lr(e,t,it,null,l,mt)}}for(var Qe in l){var it=l[Qe];if(mt=i[Qe],l.hasOwnProperty(Qe)&&(it!=null||mt!=null))switch(Qe){case"type":m=it;break;case"name":p=it;break;case"checked":Ze=it;break;case"defaultChecked":dt=it;break;case"value":P=it;break;case"defaultValue":oe=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(s(137,t));break;default:it!==mt&&Lr(e,t,Qe,it,l,mt)}}Ri(e,P,oe,Le,Ze,dt,m,p);return;case"select":it=P=oe=Qe=null;for(m in i)if(Le=i[m],i.hasOwnProperty(m)&&Le!=null)switch(m){case"value":break;case"multiple":it=Le;default:l.hasOwnProperty(m)||Lr(e,t,m,null,l,Le)}for(p in l)if(m=l[p],Le=i[p],l.hasOwnProperty(p)&&(m!=null||Le!=null))switch(p){case"value":Qe=m;break;case"defaultValue":oe=m;break;case"multiple":P=m;default:m!==Le&&Lr(e,t,p,m,l,Le)}t=oe,i=P,l=it,Qe!=null?Ji(e,!!i,Qe,!1):!!l!=!!i&&(t!=null?Ji(e,!!i,t,!0):Ji(e,!!i,i?[]:"",!1));return;case"textarea":it=Qe=null;for(oe in i)if(p=i[oe],i.hasOwnProperty(oe)&&p!=null&&!l.hasOwnProperty(oe))switch(oe){case"value":break;case"children":break;default:Lr(e,t,oe,null,l,p)}for(P in l)if(p=l[P],m=i[P],l.hasOwnProperty(P)&&(p!=null||m!=null))switch(P){case"value":Qe=p;break;case"defaultValue":it=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&Lr(e,t,P,p,l,m)}ao(e,Qe,it);return;case"option":for(var on in i)if(Qe=i[on],i.hasOwnProperty(on)&&Qe!=null&&!l.hasOwnProperty(on))switch(on){case"selected":e.selected=!1;break;default:Lr(e,t,on,null,l,Qe)}for(Le in l)if(Qe=l[Le],it=i[Le],l.hasOwnProperty(Le)&&Qe!==it&&(Qe!=null||it!=null))switch(Le){case"selected":e.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol";break;default:Lr(e,t,Le,Qe,l,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qn in i)Qe=i[qn],i.hasOwnProperty(qn)&&Qe!=null&&!l.hasOwnProperty(qn)&&Lr(e,t,qn,null,l,Qe);for(Ze in l)if(Qe=l[Ze],it=i[Ze],l.hasOwnProperty(Ze)&&Qe!==it&&(Qe!=null||it!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(s(137,t));break;default:Lr(e,t,Ze,Qe,l,it)}return;default:if(Vs(t)){for(var zr in i)Qe=i[zr],i.hasOwnProperty(zr)&&Qe!==void 0&&!l.hasOwnProperty(zr)&&gh(e,t,zr,void 0,l,Qe);for(dt in l)Qe=l[dt],it=i[dt],!l.hasOwnProperty(dt)||Qe===it||Qe===void 0&&it===void 0||gh(e,t,dt,Qe,l,it);return}}for(var Ve in i)Qe=i[Ve],i.hasOwnProperty(Ve)&&Qe!=null&&!l.hasOwnProperty(Ve)&&Lr(e,t,Ve,null,l,Qe);for(mt in l)Qe=l[mt],it=i[mt],!l.hasOwnProperty(mt)||Qe===it||Qe==null&&it==null||Lr(e,t,mt,Qe,l,it)}function hg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Wy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var p=i[l],m=p.transferSize,P=p.initiatorType,oe=p.duration;if(m&&oe&&hg(P)){for(P=0,oe=p.responseEnd,l+=1;l<i.length;l++){var Le=i[l],Ze=Le.startTime;if(Ze>oe)break;var dt=Le.transferSize,mt=Le.initiatorType;dt&&hg(mt)&&(Le=Le.responseEnd,P+=dt*(Le<oe?1:(oe-Ze)/(Le-Ze)))}if(--l,t+=8*(m+P)/(p.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yh=null,mh=null;function fp(e){return e.nodeType===9?e:e.ownerDocument}function gg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function xh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bh=null;function Yy(){var e=window.event;return e&&e.type==="popstate"?e===bh?!1:(bh=e,!0):(bh=null,!1)}var mg=typeof setTimeout=="function"?setTimeout:void 0,Gy=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,Xy=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(e){return xg.resolve(null).then(e).catch($y)}:mg;function $y(e){setTimeout(function(){throw e})}function vu(e){return e==="head"}function bg(e,t){var i=t,l=0;do{var p=i.nextSibling;if(e.removeChild(i),p&&p.nodeType===8)if(i=p.data,i==="/$"||i==="/&"){if(l===0){e.removeChild(p),Lf(t);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")hd(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,hd(i);for(var m=i.firstChild;m;){var P=m.nextSibling,oe=m.nodeName;m[Pa]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&m.rel.toLowerCase()==="stylesheet"||i.removeChild(m),m=P}}else i==="body"&&hd(e.ownerDocument.body);i=p}while(i);Lf(t)}function vg(e,t){var i=e;e=0;do{var l=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=l}while(i)}function vh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":vh(i),os(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Ky(e,t,i,l){for(;e.nodeType===1;){var p=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Pa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=$l(e.nextSibling),e===null)break}return null}function Zy(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=$l(e.nextSibling),e===null))return null;return e}function wg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=$l(e.nextSibling),e===null))return null;return e}function wh(e){return e.data==="$?"||e.data==="$~"}function Sh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Jy(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var l=function(){t(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $l(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ch=null;function Sg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return $l(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Cg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Tg(e,t,i){switch(t=fp(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function hd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);os(e)}var Kl=new Map,jg=new Set;function dp(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Xc=te.d;te.d={f:Qy,r:em,D:tm,C:nm,L:im,m:rm,X:am,S:om,M:sm};function Qy(){var e=Xc.f(),t=ip();return e||t}function em(e){var t=_o(e);t!==null&&t.tag===5&&t.type==="form"?Fd(t):Xc.r(e)}var Af=typeof document>"u"?null:document;function kg(e,t,i){var l=Af;if(l&&typeof t=="string"&&t){var p=Cr(t);p='link[rel="'+e+'"][href="'+p+'"]',typeof i=="string"&&(p+='[crossorigin="'+i+'"]'),jg.has(p)||(jg.add(p),e={rel:e,crossOrigin:i,href:t},l.querySelector(p)===null&&(t=l.createElement("link"),rs(t,"link",e),Pn(t),l.head.appendChild(t)))}}function tm(e){Xc.D(e),kg("dns-prefetch",e,null)}function nm(e,t){Xc.C(e,t),kg("preconnect",e,t)}function im(e,t,i){Xc.L(e,t,i);var l=Af;if(l&&e&&t){var p='link[rel="preload"][as="'+Cr(t)+'"]';t==="image"&&i&&i.imageSrcSet?(p+='[imagesrcset="'+Cr(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(p+='[imagesizes="'+Cr(i.imageSizes)+'"]')):p+='[href="'+Cr(e)+'"]';var m=p;switch(t){case"style":m=Nf(e);break;case"script":m=_f(e)}Kl.has(m)||(e=D({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Kl.set(m,e),l.querySelector(p)!==null||t==="style"&&l.querySelector(gd(m))||t==="script"&&l.querySelector(yd(m))||(t=l.createElement("link"),rs(t,"link",e),Pn(t),l.head.appendChild(t)))}}function rm(e,t){Xc.m(e,t);var i=Af;if(i&&e){var l=t&&typeof t.as=="string"?t.as:"script",p='link[rel="modulepreload"][as="'+Cr(l)+'"][href="'+Cr(e)+'"]',m=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=_f(e)}if(!Kl.has(m)&&(e=D({rel:"modulepreload",href:e},t),Kl.set(m,e),i.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(yd(m)))return}l=i.createElement("link"),rs(l,"link",e),Pn(l),i.head.appendChild(l)}}}function om(e,t,i){Xc.S(e,t,i);var l=Af;if(l&&e){var p=xa(l).hoistableStyles,m=Nf(e);t=t||"default";var P=p.get(m);if(!P){var oe={loading:0,preload:null};if(P=l.querySelector(gd(m)))oe.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Kl.get(m))&&Th(e,i);var Le=P=l.createElement("link");Pn(Le),rs(Le,"link",e),Le._p=new Promise(function(Ze,dt){Le.onload=Ze,Le.onerror=dt}),Le.addEventListener("load",function(){oe.loading|=1}),Le.addEventListener("error",function(){oe.loading|=2}),oe.loading|=4,pp(P,t,l)}P={type:"stylesheet",instance:P,count:1,state:oe},p.set(m,P)}}}function am(e,t){Xc.X(e,t);var i=Af;if(i&&e){var l=xa(i).hoistableScripts,p=_f(e),m=l.get(p);m||(m=i.querySelector(yd(p)),m||(e=D({src:e,async:!0},t),(t=Kl.get(p))&&jh(e,t),m=i.createElement("script"),Pn(m),rs(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function sm(e,t){Xc.M(e,t);var i=Af;if(i&&e){var l=xa(i).hoistableScripts,p=_f(e),m=l.get(p);m||(m=i.querySelector(yd(p)),m||(e=D({src:e,async:!0,type:"module"},t),(t=Kl.get(p))&&jh(e,t),m=i.createElement("script"),Pn(m),rs(m,"link",e),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function Ag(e,t,i,l){var p=(p=ke.current)?dp(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Nf(i.href),i=xa(p).hoistableStyles,l=i.get(t),l||(l={type:"style",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Nf(i.href);var m=xa(p).hoistableStyles,P=m.get(e);if(P||(p=p.ownerDocument||p,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,P),(m=p.querySelector(gd(e)))&&!m._p&&(P.instance=m,P.state.loading=5),Kl.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Kl.set(e,i),m||lm(p,e,i,P.state))),t&&l===null)throw Error(s(528,""));return P}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=_f(i),i=xa(p).hoistableScripts,l=i.get(t),l||(l={type:"script",instance:null,count:0,state:null},i.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Nf(e){return'href="'+Cr(e)+'"'}function gd(e){return'link[rel="stylesheet"]['+e+"]"}function Ng(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function lm(e,t,i,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),rs(t,"link",i),Pn(t),e.head.appendChild(t))}function _f(e){return'[src="'+Cr(e)+'"]'}function yd(e){return"script[async]"+e}function _g(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Cr(i.href)+'"]');if(l)return t.instance=l,Pn(l),l;var p=D({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Pn(l),rs(l,"style",p),pp(l,i.precedence,e),t.instance=l;case"stylesheet":p=Nf(i.href);var m=e.querySelector(gd(p));if(m)return t.state.loading|=4,t.instance=m,Pn(m),m;l=Ng(i),(p=Kl.get(p))&&Th(l,p),m=(e.ownerDocument||e).createElement("link"),Pn(m);var P=m;return P._p=new Promise(function(oe,Le){P.onload=oe,P.onerror=Le}),rs(m,"link",l),t.state.loading|=4,pp(m,i.precedence,e),t.instance=m;case"script":return m=_f(i.src),(p=e.querySelector(yd(m)))?(t.instance=p,Pn(p),p):(l=i,(p=Kl.get(m))&&(l=D({},i),jh(l,p)),e=e.ownerDocument||e,p=e.createElement("script"),Pn(p),rs(p,"link",l),e.head.appendChild(p),t.instance=p);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,pp(l,i.precedence,e));return t.instance}function pp(e,t,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,m=p,P=0;P<l.length;P++){var oe=l[P];if(oe.dataset.precedence===t)m=oe;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Th(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function jh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var hp=null;function Lg(e,t,i){if(hp===null){var l=new Map,p=hp=new Map;p.set(i,l)}else p=hp,l=p.get(i),l||(l=new Map,p.set(i,l));if(l.has(e))return l;for(l.set(e,null),i=i.getElementsByTagName(e),p=0;p<i.length;p++){var m=i[p];if(!(m[Pa]||m[xi]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var P=m.getAttribute(t)||"";P=e+P;var oe=l.get(P);oe?oe.push(m):l.set(P,[m])}}return l}function zg(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function cm(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Pg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function um(e,t,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var p=Nf(l.href),m=t.querySelector(gd(p));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=gp.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=m,Pn(m);return}m=t.ownerDocument||t,l=Ng(l),(p=Kl.get(p))&&Th(l,p),m=m.createElement("link"),Pn(m);var P=m;P._p=new Promise(function(oe,Le){P.onload=oe,P.onerror=Le}),rs(m,"link",l),i.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=gp.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var kh=0;function fm(e,t){return e.stylesheets&&e.count===0&&mp(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var l=setTimeout(function(){if(e.stylesheets&&mp(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+t);0<e.imgBytes&&kh===0&&(kh=62500*Wy());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&mp(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>kh?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(p)}}:null}function gp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yp=null;function mp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yp=new Map,t.forEach(dm,e),yp=null,gp.call(e))}function dm(e,t){if(!(t.state.loading&4)){var i=yp.get(e);if(i)var l=i.get(null);else{i=new Map,yp.set(e,i);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var P=p[m];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(i.set(P.dataset.precedence,P),l=P)}l&&i.set(null,l)}p=t.instance,P=p.getAttribute("data-precedence"),m=i.get(P)||l,m===l&&i.set(null,p),i.set(P,p),this.count++,l=gp.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),t.state.loading|=4}}var md={$$typeof:ce,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function pm(e,t,i,l,p,m,P,oe,Le){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ao(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.hiddenUpdates=Ao(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Le,this.incompleteTransitions=new Map}function Dg(e,t,i,l,p,m,P,oe,Le,Ze,dt,mt){return e=new pm(e,t,i,P,Le,Ze,dt,mt,oe),t=1,m===!0&&(t|=24),m=mo(3,null,null,t),e.current=m,m.stateNode=e,t=kn(),t.refCount++,e.pooledCache=t,t.refCount++,m.memoizedState={element:l,isDehydrated:i,cache:t},zt(m),e}function Eg(e){return e?(e=Eo,e):Eo}function Rg(e,t,i,l,p,m){p=Eg(p),l.context===null?l.context=p:l.pendingContext=p,l=Zt(t),l.payload={element:i},m=m===void 0?null:m,m!==null&&(l.callback=m),i=En(e,l,t),i!==null&&(il(i,e,t),gi(i,e,t))}function Mg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Ah(e,t){Mg(e,t),(e=e.alternate)&&Mg(e,t)}function Bg(e){if(e.tag===13||e.tag===31){var t=Yr(e,67108864);t!==null&&il(t,e,67108864),Ah(e,67108864)}}function Og(e){if(e.tag===13||e.tag===31){var t=Nl();t=ii(t);var i=Yr(e,t);i!==null&&il(i,e,t),Ah(e,t)}}var xp=!0;function hm(e,t,i,l){var p=$.T;$.T=null;var m=te.p;try{te.p=2,Nh(e,t,i,l)}finally{te.p=m,$.T=p}}function gm(e,t,i,l){var p=$.T;$.T=null;var m=te.p;try{te.p=8,Nh(e,t,i,l)}finally{te.p=m,$.T=p}}function Nh(e,t,i,l){if(xp){var p=_h(l);if(p===null)hh(e,t,l,bp,i),Ug(e,l);else if(mm(p,e,t,i,l))l.stopPropagation();else if(Ug(e,l),t&4&&-1<ym.indexOf(e)){for(;p!==null;){var m=_o(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var P=un(m.pendingLanes);if(P!==0){var oe=m;for(oe.pendingLanes|=2,oe.entangledLanes|=2;P;){var Le=1<<31-rt(P);oe.entanglements[1]|=Le,P&=~Le}Pc(m),(lr&6)===0&&(tp=Vn()+500,fd(0))}}break;case 31:case 13:oe=Yr(m,2),oe!==null&&il(oe,m,2),ip(),Ah(m,2)}if(m=_h(l),m===null&&hh(e,t,l,bp,i),m===p)break;p=m}p!==null&&l.stopPropagation()}else hh(e,t,l,null,i)}}function _h(e){return e=ll(e),Lh(e)}var bp=null;function Lh(e){if(bp=null,e=Wn(e),e!==null){var t=f(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=v(t),e!==null)return e;e=null}else if(i===31){if(e=h(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bp=e,null}function Ig(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case Dt:return 2;case li:return 8;case ct:case kt:return 32;case Rn:return 268435456;default:return 32}default:return 32}}var zh=!1,wu=null,Su=null,Cu=null,xd=new Map,bd=new Map,Tu=[],ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ug(e,t){switch(e){case"focusin":case"focusout":wu=null;break;case"dragenter":case"dragleave":Su=null;break;case"mouseover":case"mouseout":Cu=null;break;case"pointerover":case"pointerout":xd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bd.delete(t.pointerId)}}function vd(e,t,i,l,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:m,targetContainers:[p]},t!==null&&(t=_o(t),t!==null&&Bg(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,p!==null&&t.indexOf(p)===-1&&t.push(p),e)}function mm(e,t,i,l,p){switch(t){case"focusin":return wu=vd(wu,e,t,i,l,p),!0;case"dragenter":return Su=vd(Su,e,t,i,l,p),!0;case"mouseover":return Cu=vd(Cu,e,t,i,l,p),!0;case"pointerover":var m=p.pointerId;return xd.set(m,vd(xd.get(m)||null,e,t,i,l,p)),!0;case"gotpointercapture":return m=p.pointerId,bd.set(m,vd(bd.get(m)||null,e,t,i,l,p)),!0}return!1}function Fg(e){var t=Wn(e.target);if(t!==null){var i=f(t);if(i!==null){if(t=i.tag,t===13){if(t=v(i),t!==null){e.blockedOn=t,$i(e.priority,function(){Og(i)});return}}else if(t===31){if(t=h(i),t!==null){e.blockedOn=t,$i(e.priority,function(){Og(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=_h(e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);Fo=l,i.target.dispatchEvent(l),Fo=null}else return t=_o(i),t!==null&&Bg(t),e.blockedOn=i,!1;t.shift()}return!0}function qg(e,t,i){vp(e)&&i.delete(t)}function xm(){zh=!1,wu!==null&&vp(wu)&&(wu=null),Su!==null&&vp(Su)&&(Su=null),Cu!==null&&vp(Cu)&&(Cu=null),xd.forEach(qg),bd.forEach(qg)}function wp(e,t){e.blockedOn===t&&(e.blockedOn=null,zh||(zh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xm)))}var Sp=null;function Hg(e){Sp!==e&&(Sp=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sp===e&&(Sp=null);for(var t=0;t<e.length;t+=3){var i=e[t],l=e[t+1],p=e[t+2];if(typeof l!="function"){if(Lh(l||i)===null)continue;break}var m=_o(i);m!==null&&(e.splice(t,3),t-=3,$f(m,{pending:!0,data:p,method:i.method,action:l},l,p))}}))}function Lf(e){function t(Le){return wp(Le,e)}wu!==null&&wp(wu,e),Su!==null&&wp(Su,e),Cu!==null&&wp(Cu,e),xd.forEach(t),bd.forEach(t);for(var i=0;i<Tu.length;i++){var l=Tu[i];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Tu.length&&(i=Tu[0],i.blockedOn===null);)Fg(i),i.blockedOn===null&&Tu.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var p=i[l],m=i[l+1],P=p[di]||null;if(typeof m=="function")P||Hg(i);else if(P){var oe=null;if(m&&m.hasAttribute("formAction")){if(p=m,P=m[di]||null)oe=P.formAction;else if(Lh(p)!==null)continue}else oe=P.action;typeof oe=="function"?i[l+1]=oe:(i.splice(l,3),l-=3),Hg(i)}}}function Vg(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(P){return p=P})},focusReset:"manual",scroll:"manual"})}function t(){p!==null&&(p(),p=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),p!==null&&(p(),p=null)}}}function Ph(e){this._internalRoot=e}Cp.prototype.render=Ph.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,l=Nl();Rg(i,l,e,t,null,null)},Cp.prototype.unmount=Ph.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rg(e.current,2,null,e,null,null),ip(),t[yo]=null}};function Cp(e){this._internalRoot=e}Cp.prototype.unstable_scheduleHydration=function(e){if(e){var t=cr();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Tu.length&&t!==0&&t<Tu[i].priority;i++);Tu.splice(i,0,e),i===0&&Fg(e)}};var Wg=n.version;if(Wg!=="19.2.0")throw Error(s(527,Wg,"19.2.0"));te.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=x(t),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var bm={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{Nn=Tp.inject(bm),rn=Tp}catch{}}return Sd.createRoot=function(e,t){if(!u(e))throw Error(s(299));var i=!1,l="",p=gf,m=yf,P=Va;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(p=t.onUncaughtError),t.onCaughtError!==void 0&&(m=t.onCaughtError),t.onRecoverableError!==void 0&&(P=t.onRecoverableError)),t=Dg(e,1,!1,null,null,i,l,null,p,m,P,Vg),e[yo]=t.current,ph(e),new Ph(t)},Sd.hydrateRoot=function(e,t,i){if(!u(e))throw Error(s(299));var l=!1,p="",m=gf,P=yf,oe=Va,Le=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(P=i.onCaughtError),i.onRecoverableError!==void 0&&(oe=i.onRecoverableError),i.formState!==void 0&&(Le=i.formState)),t=Dg(e,1,!0,t,i??null,l,p,Le,m,P,oe,Vg),t.context=Eg(null),i=t.current,l=Nl(),l=ii(l),p=Zt(l),p.callback=null,En(i,p,l),i=l,t.current.lanes=i,Xt(t,i),Pc(t),e[yo]=t.current,ph(e),new Cp(t)},Sd.version="19.2.0",Sd}var t1;function Lm(){if(t1)return Rh.exports;t1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),Rh.exports=_m(),Rh.exports}var zm=Lm();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dm=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,o,s)=>s?s.toUpperCase():o.toLowerCase()),n1=r=>{const n=Dm(r);return n.charAt(0).toUpperCase()+n.slice(1)},N2=(...r)=>r.filter((n,o,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===o).join(" ").trim(),Em=r=>{for(const n in r)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=I.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:u="",children:f,iconNode:v,...h},b)=>I.createElement("svg",{ref:b,...Rm,width:n,height:n,stroke:r,strokeWidth:s?Number(o)*24/Number(n):o,className:N2("lucide",u),...!f&&!Em(h)&&{"aria-hidden":"true"},...h},[...v.map(([x,T])=>I.createElement(x,T)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=(r,n)=>{const o=I.forwardRef(({className:s,...u},f)=>I.createElement(Mm,{ref:f,iconNode:n,className:N2(`lucide-${Pm(n1(r))}`,`lucide-${r}`,s),...u}));return o.displayName=n1(r),o};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Om=_2("mouse-pointer",Bm);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Um=_2("pen-line",Im),Fm=JSON.parse('[{"category":"Capacitors","subcategory":"General","type":"Capacitor","displayName":"Capacitor","description":"General purpose capacitor","searchText":"capacitor general","designators":["C"],"defaultPins":2,"properties":{"capacitorType":"General"},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"dielectric","label":"Dielectric","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Electrolytic","type":"Capacitor","displayName":"Electrolytic","description":"Electrolytic capacitor","searchText":"electrolytic capacitor","designators":["CE"],"defaultPins":2,"properties":{"capacitorType":"Electrolytic","polarized":true},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"20%","required":false},{"name":"polarized","label":"Polarized","type":"boolean","required":false},{"name":"esr","label":"ESR","type":"number","units":["m",""],"defaultUnit":"","required":false},{"name":"temperature","label":"Temperature Range","type":"string","required":false},{"name":"ripple","label":"Ripple Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"leakageCurrent","label":"Leakage Current","type":"number","units":["A","mA"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Film","type":"Capacitor","displayName":"Film","description":"Film capacitor","searchText":"film capacitor","designators":["CF"],"defaultPins":2,"properties":{"capacitorType":"Film"},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"nF","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"10%","required":false},{"name":"filmType","label":"Film Type","type":"enum","enumValues":["Polyester","Polypropylene","Polyethylene","Polystyrene","Teflon"],"defaultValue":"Polyester","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Tantalum","type":"Capacitor","displayName":"Tantalum","description":"Tantalum capacitor","searchText":"tantalum capacitor","designators":["C"],"defaultPins":2,"properties":{"capacitorType":"Tantalum","dielectric":"Tantalum","polarized":true},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"polarized","label":"Polarized","type":"boolean","required":false},{"name":"esr","label":"ESR","type":"number","units":["m",""],"defaultUnit":"","required":false},{"name":"leakageCurrent","label":"Leakage Current","type":"number","units":["A","mA"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Diodes","subcategory":"Standard","type":"Diode","displayName":"Diode","description":"Standard diode","searchText":"diode standard","designators":["D"],"defaultPins":2,"subtype":"Standard","properties":{"diodeType":"Standard","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Zener","type":"Diode","displayName":"Zener","description":"Zener diode","searchText":"zener diode","designators":["Z"],"defaultPins":2,"subtype":"Zener","properties":{"diodeType":"Zener","polarized":true},"fields":[{"name":"voltage","label":"Zener Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"mA","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"LED","type":"Diode","displayName":"LED","description":"LED diode","searchText":"led diode","designators":["LED"],"defaultPins":2,"subtype":"LED","properties":{"diodeType":"LED","polarized":true},"fields":[{"name":"voltage","label":"Forward Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Forward Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"ledColor","label":"Color","type":"string","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Schottky","type":"Diode","displayName":"Schottky","description":"Schottky diode","searchText":"schottky diode","designators":["D"],"defaultPins":2,"subtype":"Schottky","properties":{"diodeType":"Schottky","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Infrared","type":"Diode","displayName":"Infrared","description":"Infrared diode","searchText":"infrared diode","designators":["IR"],"defaultPins":2,"subtype":"Infrared","properties":{"diodeType":"Infrared","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Photodiode","type":"Diode","displayName":"Photodiode","description":"Photodiode","searchText":"photodiode diode","designators":["PD"],"defaultPins":2,"subtype":"Photodiode","properties":{"diodeType":"Photodiode","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Resistors","subcategory":"Standard","type":"Resistor","displayName":"Resistor","description":"Standard resistor","searchText":"resistor standard","designators":["R"],"defaultPins":2,"properties":{"resistorType":"Standard"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"5%","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Network","type":"Resistor","displayName":"Resistor Network","description":"Resistor network","searchText":"resistor network","designators":["RN"],"defaultPins":8,"properties":{"resistorType":"Network"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"configuration","label":"Configuration","type":"enum","enumValues":["Isolated","Bussed","Dual Terminator"],"defaultValue":"Isolated","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Thermistor","type":"Resistor","displayName":"Thermistor","description":"Thermistor resistor","searchText":"thermistor resistor","designators":["RT"],"defaultPins":2,"properties":{"resistorType":"Thermistor"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"thermistorType","label":"Thermistor Type","type":"enum","enumValues":["NTC","PTC"],"defaultValue":"NTC","required":false},{"name":"beta","label":"Beta Value","type":"number","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Resistors","subcategory":"Variable","type":"Resistor","displayName":"Variable Resistor","description":"Variable resistor","searchText":"variable resistor","designators":["VR"],"defaultPins":3,"subtype":"Potentiometer","properties":{"resistorType":"Variable","vrType":"Potentiometer"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"taper","label":"Taper","type":"enum","enumValues":["Linear","Logarithmic"],"defaultValue":"Linear","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Varistor","type":"Resistor","displayName":"Varistor","description":"Varistor resistor","searchText":"varistor resistor","designators":["RV"],"defaultPins":3,"subtype":"Varistor","properties":{"resistorType":"Variable","vrType":"Varistor"},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"Transistor","type":"Semiconductor","displayName":"Transistor","description":"Transistor","searchText":"transistor","designators":["Q"],"defaultPins":3,"properties":{"semiconductorType":"Transistor"},"fields":[{"name":"transistorType","label":"Transistor Type","type":"enum","enumValues":["BJT","FET","MOSFET","JFET"],"defaultValue":"BJT","required":false},{"name":"polarized","label":"Polarized","type":"boolean","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"Integrated Circuit","type":"Semiconductor","displayName":"Integrated Circuit","description":"Integrated circuit","searchText":"integrated circuit semiconductor ic","designators":["U"],"defaultPins":8,"properties":{"semiconductorType":"IntegratedCircuit"},"fields":[{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"icType","label":"IC Type","type":"string","required":false},{"name":"packageType","label":"Package Type","type":"enum","enumValues":["DIP","SOIC","QFP","BGA","TQFP","SSOP","TSOP"],"required":false},{"name":"description","label":"Description","type":"string","required":false},{"name":"datasheet","label":"Datasheet URL","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Passive Components","subcategory":"Inductor","type":"Inductor","displayName":"Inductor","description":"Inductor","searchText":"inductor","designators":["L"],"defaultPins":2,"properties":{"passiveType":"Inductor"},"fields":[{"name":"inductance","label":"Inductance","type":"number","units":["nH","H","mH","H"],"defaultUnit":"H","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"resistance","label":"DC Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Passive Components","subcategory":"Ferrite Bead","type":"FerriteBead","displayName":"Ferrite Bead","description":"Ferrite bead","searchText":"ferrite bead passive","designators":["FB"],"defaultPins":2,"properties":{"passiveType":"FerriteBead"},"fields":[{"name":"impedance","label":"Impedance","type":"number","units":["","m","k"],"defaultUnit":"","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Passive Components","subcategory":"Crystal","type":"Crystal","displayName":"Crystal","description":"Crystal oscillator","searchText":"crystal oscillator passive","designators":["X"],"defaultPins":2,"properties":{"passiveType":"Crystal"},"fields":[{"name":"frequency","label":"Frequency","type":"string","required":false},{"name":"loadCapacitance","label":"Load Capacitance","type":"string","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Battery","type":"PowerEnergy","displayName":"Battery","description":"Battery or battery holder","searchText":"battery power energy","designators":["B"],"defaultPins":2,"properties":{"powerType":"Battery"},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"capacity","label":"Capacity","type":"number","units":["mAh","Ah"],"defaultUnit":"mAh","required":false},{"name":"chemistry","label":"Chemistry","type":"enum","enumValues":["Li-ion","Alkaline","NiMH","NiCd","Lead-acid"],"required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Power Supply","type":"PowerEnergy","displayName":"Power Supply","description":"Power supply","searchText":"power supply energy","designators":["PS"],"defaultPins":4,"properties":{"powerType":"PowerSupply"},"fields":[{"name":"inputVoltage","label":"Input Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"outputVoltage","label":"Output Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"efficiency","label":"Efficiency","type":"number","required":false},{"name":"ripple","label":"Ripple","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Fuse","type":"PowerEnergy","displayName":"Fuse","description":"Fuse","searchText":"fuse power energy","designators":["F"],"defaultPins":2,"properties":{"powerType":"Fuse"},"fields":[{"name":"current","label":"Current Rating","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"fuseType","label":"Fuse Type","type":"enum","enumValues":["Fast-blow","Slow-blow","Time-delay"],"defaultValue":"Fast-blow","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Connectors & Switches","subcategory":"Connector","type":"Connector","displayName":"Connector","description":"Connector","searchText":"connector","designators":["J"],"defaultPins":4,"properties":{"connectorType":"Connector"},"fields":[{"name":"connectorType","label":"Connector Type","type":"string","required":false},{"name":"gender","label":"Gender","type":"enum","enumValues":["Male","Female","N/A"],"defaultValue":"N/A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Jumper","type":"Jumper","displayName":"Jumper","description":"Jumper link","searchText":"jumper link","designators":["JP"],"defaultPins":3,"properties":{"connectorType":"Jumper"},"fields":[{"name":"positions","label":"Positions","type":"number","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Switch","type":"Switch","displayName":"Switch","description":"Switch","searchText":"switch","designators":["S"],"defaultPins":2,"properties":{"switchType":"Switch"},"fields":[{"name":"switchType","label":"Switch Type","type":"string","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Relay","type":"Relay","displayName":"Relay","description":"Relay or contactor","searchText":"relay contactor","designators":["K"],"defaultPins":5,"properties":{"switchType":"Relay"},"fields":[{"name":"coilVoltage","label":"Coil Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"contactType","label":"Contact Type","type":"string","required":false},{"name":"current","label":"Contact Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Other","subcategory":"Transformer","type":"Transformer","displayName":"Transformer","description":"Transformer","searchText":"transformer","designators":["TR"],"defaultPins":4,"fields":[{"name":"primaryVoltage","label":"Primary Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"secondaryVoltage","label":"Secondary Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"turns","label":"Turns Ratio","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Speaker","type":"Speaker","displayName":"Speaker","description":"Loudspeaker or buzzer","searchText":"speaker loudspeaker buzzer","designators":["LS"],"defaultPins":2,"fields":[{"name":"impedance","label":"Impedance","type":"number","units":["","m","k"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Motor","type":"Motor","displayName":"Motor","description":"Motor","searchText":"motor","designators":["M"],"defaultPins":2,"fields":[{"name":"motorType","label":"Motor Type","type":"string","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Test Point","type":"TestPoint","displayName":"Test Point","description":"Test point","searchText":"test point","designators":["TP"],"defaultPins":1,"fields":[{"name":"signal","label":"Signal","type":"string","required":false}]},{"category":"Other","subcategory":"Vacuum Tube","type":"VacuumTube","displayName":"Vacuum Tube","description":"Vacuum tube","searchText":"vacuum tube","designators":["V"],"defaultPins":5,"fields":[{"name":"tubeType","label":"Tube Type","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Attenuator","type":"GenericComponent","displayName":"Attenuator","description":"Attenuator or isolator","searchText":"attenuator isolator component","designators":["AT"],"defaultPins":2,"subtype":"Attenuator","fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Circuit Breaker","type":"GenericComponent","displayName":"Circuit Breaker","description":"Circuit breaker","searchText":"circuit breaker component","designators":["CB"],"defaultPins":2,"subtype":"CircuitBreaker","fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Thermocouple","type":"GenericComponent","displayName":"Thermocouple","description":"Thermocouple","searchText":"thermocouple component","designators":["TC"],"defaultPins":2,"subtype":"Thermocouple","fields":[{"name":"model","label":"Model","type":"string","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Tuner","type":"GenericComponent","displayName":"Tuner","description":"Tuner","searchText":"tuner component","designators":["TUN"],"defaultPins":2,"subtype":"Tuner","fields":[{"name":"frequency","label":"Frequency","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]}]'),Rd={components:Fm},qm=["#FFFFFF","#BFBFBF","#7F7F7F","#3C3C3C","#000000","#A6CEE3","#56B4E9","#17BECF","#00BFC4","#1F77B4","#0072B2","#332288","#B2DF8A","#B3DE69","#2CA02C","#009E73","#FFED6F","#F0E442","#BCBD22","#E69F00","#FF7F0E","#FB9A99","#F781BF","#E15759","#D62728","#CAB2D6","#CC79A7","#AA4499","#6A3D9A","#9467BD","#9C755F","#8C564B"],Ih="#2CA02C",Hm="#F0E442",Vm="#00BFC4",Uh="#000000",Wm="#00008b",Fh="#FF0000",z0={DEFAULT_SIZE:18},Ld={};Rd.components.forEach(r=>{if(!Ld[r.type])Ld[r.type]={prefix:r.designators,defaultPins:r.defaultPins};else{const n=Ld[r.type],o=[...new Set([...n.prefix,...r.designators])];Ld[r.type]={prefix:o,defaultPins:n.defaultPins}}});const tf=Ld,Zu={};Rd.components.forEach(r=>{if(Zu[r.category]||(Zu[r.category]={}),!Zu[r.category][r.subcategory])Zu[r.category][r.subcategory]=[r.type];else{const n=Zu[r.category][r.subcategory];n.includes(r.type)||(Zu[r.category][r.subcategory]=[...n,r.type])}});const Ym=Zu,qh={DEFAULT_SIZE:18},Gm={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function ui(r){return Gm[r]?.defaultUnit||""}function rl(r){return r.includes(" ")?r:r.replace(/([a-z])([A-Z])/g,"$1 $2")}const La=Math.PI*2;function L2(r){return(r%360+360)%360}function Jc(r){return r*Math.PI/180}function Xm(r){return r*180/Math.PI}function y0(r,n){return L2(r+n)}function Hp(r){return Math.tan(r)}function $m(r){return Math.cos(r)}function Km(r){return Math.sin(r)}function Zm(r,n){return Math.atan2(r,n)}function Jm(r,n){return Xm(Zm(n,r))}function m0(r,n){const{x:o,y:s,rotation:u=0,scale:f=1,flipX:v=!1,flipY:h=!1,skewX:b=0,skewY:x=0}=n;if(r.translate(o,s),u!==0&&r.rotate(Jc(u)),b!==0||x!==0){const E=Hp(b),C=Hp(x);r.transform(1,C,E,1,0,0)}const T=f*(v?-1:1),D=f*(h?-1:1);(T!==1||D!==1)&&r.scale(T,D)}function i1(r,n,o,s=0,u=!1,f=!1){m0(r,{x:n,y:o,rotation:s,flipX:u,flipY:f})}function z2(r,n,o){const s=Jc(o),u=$m(s),f=Km(s);return{x:r*u-n*f,y:r*f+n*u}}function Qm(r,n=0,o=!1){o&&r.scale(-1,1),n!==0&&r.rotate(Jc(n))}function ex(r,n=0,o=!1){const s=L2(n),u=s===90||s===270;o&&r.scale(-1,1),n!==0&&r.rotate(Jc(-n)),o&&u&&r.rotate(Jc(180))}function r1(r,n,o,s=0,u=!1){let f=r/o,v=n/o;if(s!==0){const h=z2(f,v,-s);f=h.x,v=h.y}return u&&(f=-f),{x:f,y:v}}function Cd(r,n,o,s,u=0,f=!1){let v=r-o.x,h=n-o.y;if(v=v/s,h=h/s,f&&(v=-v),u!==0){const b=z2(v,h,-u);v=b.x,h=b.y}return{x:v,y:h}}function tx(r,n=.4){if(r.startsWith("#")){const s=r.slice(1),u=parseInt(s.slice(0,2),16),f=parseInt(s.slice(2,4),16),v=parseInt(s.slice(4,6),16),h=Math.max(0,Math.floor(u*(1-n))),b=Math.max(0,Math.floor(f*(1-n))),x=Math.max(0,Math.floor(v*(1-n)));return`#${h.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}${x.toString(16).padStart(2,"0")}`}const o=r.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(o){const s=parseInt(o[1],10),u=parseInt(o[2],10),f=parseInt(o[3],10),v=o[4]?o[4].trim():"",h=Math.max(0,Math.floor(s*(1-n))),b=Math.max(0,Math.floor(u*(1-n))),x=Math.max(0,Math.floor(f*(1-n)));return r.includes("rgba")?`rgba(${h}, ${b}, ${x}${v?`, ${v}`:", 1"})`:`rgb(${h}, ${b}, ${x})`}return r}let Fs=1;const Jl=new Set;function pc(){const r=Fs;if(Fs++,Jl.has(r)){for(console.error(`CRITICAL ERROR: Duplicate Node ID ${r} would be allocated!`),console.error(`Current counter: ${Fs}, Allocated IDs count: ${Jl.size}`);Jl.has(Fs);)Fs++;const n=Fs;return Fs++,Jl.add(n),console.error(`Recovered by allocating ID ${n} instead`),n}return Jl.add(r),r}function Hh(r){r<1&&(console.warn(`setPointIdCounter called with invalid value ${r}, using 1`),r=1),Fs=r,Jl.clear()}function o1(){return Fs}function a1(){Fs=1,Jl.clear()}function Vh(r){r>0&&(Jl.add(r),r>=Fs&&(Fs=r+1))}function jp(r){if(r>0&&Jl.has(r))if(Jl.delete(r),Jl.size>0){const n=Math.max(...Array.from(Jl));n<Fs&&(Fs=Math.max(1,n+1))}else Fs=1}function P2(r="id"){return`${r}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function s1(r){return Math.round(r*1e4)/1e4}function Zi(r){return{x:s1(r.x),y:s1(r.y)}}function nx(r){return tf[r]?.defaultPins||2}function D2(r){return(tf[r]?.prefix||["?"])[0]}function Wh(r,n,o,s,u,f=void 0,v=[],h=Mp(),b=!0,x){const T=f!==void 0&&f>0?f:z0.DEFAULT_SIZE;let D="";if(b){const O=x?.designator||D2(r),z=rx(O,v,h);D=`${O}${z}`}const E={id:P2("comp"),componentType:r,designator:D,layer:n,x:o,y:s,color:u,size:T,pinCount:nx(r),pinConnections:[],orientation:0,flipX:!1,flipY:!1};if(x?.componentDefinition){const O=x.componentDefinition,z=`${O.category}:${O.subcategory}:${O.type}`;E.componentDefinitionKey=z}E.pinConnections=new Array(E.pinCount).fill(""),(x?.componentDefinition?.properties?.polarized!==void 0?x.componentDefinition.properties.polarized:r==="Electrolytic Capacitor"||r==="Diode"||r==="Battery")&&(E.pinPolarities=new Array(E.pinCount).fill(""));const K=x?.componentDefinition;switch(K?.properties&&Object.assign(E,K.properties),K?.fields&&K.fields.forEach(O=>{O.defaultValue!==void 0&&O.defaultValue!==""&&(E[O.name]=O.defaultValue),O.units&&O.defaultUnit&&(E[`${O.name}Unit`]=O.defaultUnit)}),r){case"Battery":return{...E,componentType:"Battery"};case"Capacitor":return{...E,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...E,componentType:"Electrolytic Capacitor",polarized:!0};case"Film Capacitor":return{...E,componentType:"Film Capacitor",filmType:"Polyester"};case"Diode":{const O=x?.subtype==="LED"?"LED":x?.subtype==="Infrared"?"Infrared":x?.subtype==="Photodiode"?"Photodiode":x?.subtype==="Schottky"?"Schottky":x?.subtype==="Zener"?"Zener":"Standard";return{...E,componentType:"Diode",diodeType:O}}case"Fuse":return{...E,componentType:"Fuse"};case"FerriteBead":return{...E,componentType:"FerriteBead"};case"Connector":return{...E,componentType:"Connector",gender:"N/A"};case"Jumper":return{...E,componentType:"Jumper"};case"Relay":return{...E,componentType:"Relay"};case"Inductor":return{...E,componentType:"Inductor"};case"Speaker":return{...E,componentType:"Speaker"};case"Motor":return{...E,componentType:"Motor"};case"PowerSupply":return{...E,componentType:"PowerSupply"};case"Transistor":return{...E,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...E,componentType:"Resistor"};case"ResistorNetwork":return{...E,componentType:"ResistorNetwork"};case"Thermistor":return{...E,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...E,componentType:"Switch"};case"Transformer":return{...E,componentType:"Transformer"};case"TestPoint":return{...E,componentType:"TestPoint"};case"IntegratedCircuit":return{...E,componentType:"IntegratedCircuit"};case"VacuumTube":return{...E,componentType:"VacuumTube"};case"VariableResistor":{const O=x?.subtype==="Varistor"?"Varistor":x?.subtype==="VoltageRegulator"?"VoltageRegulator":"Potentiometer";return{...E,componentType:"VariableResistor",vrType:O}}case"Crystal":return{...E,componentType:"Crystal"};case"GenericComponent":{let O="Attenuator";return x?.subtype?O=x.subtype:D&&(D.startsWith("AT")?O="Attenuator":D.startsWith("CB")?O="CircuitBreaker":D.startsWith("TC")?O="Thermocouple":D.startsWith("TUN")&&(O="Tuner")),{...E,componentType:"GenericComponent",genericType:O}}default:return console.warn(`Unknown component type: ${r}, defaulting to Resistor`),{...E,componentType:"Resistor"}}}function x0(r,n,o){const s=r.componentType==="Electrolytic Capacitor"||r.componentType==="Diode"||r.componentType==="Battery",u=r.componentType==="Capacitor"&&"dielectric"in r&&r.dielectric==="Tantalum";if(!(s||u)||r.pinCount!==2||!(n.length===2&&n[0]&&n[0].trim()!==""&&n[1]&&n[1].trim()!==""))return null;const v=E=>{const C=parseInt(E,10);if(isNaN(C))return null;for(const K of o)if((K.type==="via"||K.type==="pad")&&K.points.length>0){const O=K.points[0];if(O.id===C)return{x:O.x,y:O.y}}return null},h=v(n[0]),b=v(n[1]);if(!h||!b)return null;const x=Math.hypot(r.x-h.x,r.y-h.y),T=Math.hypot(r.x-b.x,r.y-b.y),D=["",""];return x<T?(D[0]="-",D[1]="+"):(D[0]="+",D[1]="-"),D}function Mp(){return{}}function ix(r){}function rx(r,n,o){let s=0;for(const f of n)if(f.designator){const v=f.designator.match(new RegExp(`^${r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(v){const h=parseInt(v[1],10);h>s&&(s=h)}}const u=o[r]||0;return Math.max(s,u)+1}function ox(r,n,o){const s={...o};return s[r]=Math.max(s[r]||0,n),s}function ax(r){if(r.designators&&r.designators.length>0)return r.designators[0];switch(r.baseType){case"Capacitor":return"C";case"Diode":return"D";case"Resistor":return"R";case"Semiconductor":return"Q";case"Passive":return"L";case"PowerEnergy":return"PS";case"Connector":return"J";case"Switch":return"S";case"Transformer":return"T";case"Other":default:return"?"}}function sx(r,n,o){let s=0;for(const v of n){if(!v.designator||!v.designator.startsWith(r))continue;const h=parseInt(v.designator.slice(r.length),10);!isNaN(h)&&h>s&&(s=h)}const f=(o[r]??s)+1;return o[r]=f,f}function lx(r,n,o){const s=ax(r),u=sx(s,n,o);return`${s}${u}`}function cx(r){const{definition:n,layer:o,x:s,y:u,color:f,size:v,designator:h,existingComponents:b=[],counters:x={}}=r,T=v&&v>0?v:z0.DEFAULT_SIZE,D=h||lx(n,b,x),E={id:P2("comp"),componentType:n.type,designator:D,layer:o,x:s,y:u,color:f,size:T,pinCount:n.defaultPins,pinConnections:new Array(n.defaultPins).fill(""),pinPolarities:void 0,notes:null,orientation:0,flipX:!1,flipY:!1,description:n.description};return E.componentDefinitionKey=n.key,n.properties&&Object.assign(E,n.properties),n.fields&&n.fields.length>0&&n.fields.forEach(C=>{C.defaultValue!==void 0&&C.defaultValue!==""&&(E[C.name]=C.defaultValue),C.units&&C.defaultUnit&&(E[`${C.name}Unit`]=C.defaultUnit)}),E}function ux(r){if(r.baseType)return r.baseType;switch(r.category){case"Capacitors":return"Capacitor";case"Diodes":return"Diode";case"Resistors":return"Resistor";case"Semiconductors":return"Semiconductor";case"Passive Components":return"Passive";case"Power & Energy":return"PowerEnergy";case"Connectors & Switches":return r.type==="Switch"||r.subcategory==="Switch"?"Switch":"Connector";case"Other":return r.type==="Transformer"?"Transformer":"Other";default:return"Other"}}const fx=Rd.components,dx=fx.map(r=>{const n=`${r.category}:${r.subcategory}:${r.type}`,o=ux(r);return{...r,key:n,baseType:o}}),E2=new Map;dx.forEach(r=>{E2.set(r.key,r)});function px(r){if(r)return E2.get(r)}function hx(){const r=document.createElement("canvas"),n=24;r.width=n,r.height=n;const o=r.getContext("2d");o.strokeStyle="#000",o.lineWidth=3,o.lineCap="round";const s=n/2,u=8;return o.beginPath(),o.moveTo(s,s-u),o.lineTo(s,s-2),o.moveTo(s,s+2),o.lineTo(s,s+u),o.moveTo(s-u,s),o.lineTo(s-2,s),o.moveTo(s+2,s),o.lineTo(s+u,s),o.stroke(),`url(${r.toDataURL()}) ${s} ${s}, crosshair`}function gx(r){const n=document.createElement("canvas"),o=Math.max(12,Math.min(r,32)),u=o+4*2;n.width=u,n.height=u;const f=n.getContext("2d"),v=u/2,h=u/2,b=o/2;return f.fillStyle="#FFFF00",f.strokeStyle="#000000",f.lineWidth=2,f.beginPath(),f.moveTo(v,h-b),f.lineTo(v+b,h),f.lineTo(v,h+b),f.lineTo(v-b,h),f.closePath(),f.fill(),f.stroke(),`url(${n.toDataURL()}) ${v} ${h}, crosshair`}function l1(){const r=new Date,n=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),u=String(r.getHours()).padStart(2,"0"),f=String(r.getMinutes()).padStart(2,"0"),v=String(r.getSeconds()).padStart(2,"0");return`${n}_${o}_${s}-${u}-${f}-${v}`}function zf(r){let n=r.replace(/\.json$/i,""),o="";for(;o!==n;)o=n,n=n.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),n=n.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return n}const If=Rd.components,Yh=Rd.components.flatMap(r=>r.designators.map(n=>({designators:[n],componentType:r.description})));function ai(r,n,o,s){if(n==="power"){const f=r[n]||"";return typeof f=="string"&&f.trim()!==""?{value:f.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(r[n]!==void 0||r[o]!==void 0)return{value:r[n]||"",unit:r[o]||s};const u=r[n]||"";return typeof u=="string"&&u.trim()!==""?R2(u):{value:"",unit:s}}function R2(r){if(!r||r.trim()==="")return{value:"",unit:""};const n=r.trim(),o=n.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(o)return{value:o[1],unit:o[2]||""};const s=n.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return s?{value:s[1],unit:s[2]||""}:{value:n,unit:""}}function Td(r,n){return!r||r.trim()===""?"":!n||n.trim()===""?r.trim():`${r.trim()}${n.trim()}`}function yx(){const[r,n]=I.useState([]),[o,s]=I.useState([]),[u,f]=I.useState(null),[v,h]=I.useState(null),[b,x]=I.useState(null),[T,D]=I.useState(!1),[E,C]=I.useState(null),K=I.useCallback((ce,H)=>{H==="top"?n(se=>[...se,ce]):s(se=>[...se,ce])},[]),O=I.useCallback((ce,H,se)=>{se==="top"?n(Q=>Q.map(N=>N.id===ce?{...N,...H}:N)):s(Q=>Q.map(N=>N.id===ce?{...N,...H}:N))},[]),z=I.useCallback((ce,H)=>{H==="top"?n(se=>se.filter(Q=>Q.id!==ce)):s(se=>se.filter(Q=>Q.id!==ce))},[]),V=I.useCallback((ce,H)=>{const se=ce.designator||"",Q=ce.abbreviation||(se.length>0?se.charAt(0).toUpperCase():""),N=ce.componentType,R={visible:!0,layer:H,id:ce.id,designator:se,abbreviation:Q,manufacturer:"manufacturer"in ce&&ce.manufacturer||"",partNumber:"partNumber"in ce&&ce.partNumber||"",pinCount:ce.pinCount,x:ce.x,y:ce.y,orientation:ce.orientation??0,description:ce.description||"",componentDefinitionKey:ce.componentDefinitionKey||""};if(N==="Resistor"){const X=ce,k=ai(X,"resistance","resistanceUnit",ui("resistance"));R.resistance=k.value,R.resistanceUnit=k.unit;const S=ai(X,"power","powerUnit","W");R.power=S.value||"1/4",R.tolerance=X.tolerance||"5%"}else if(N==="Capacitor"){const X=ce,k=ai(X,"capacitance","capacitanceUnit",ui("capacitance"));R.capacitance=k.value,R.capacitanceUnit=k.unit;const S=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=S.value,R.voltageUnit=S.unit,R.tolerance=X.tolerance||"10%",R.dielectric=X.dielectric||"Ceramic"}else if(N==="Electrolytic Capacitor"){const X=ce,k=ai(X,"capacitance","capacitanceUnit",ui("capacitance"));R.capacitance=k.value,R.capacitanceUnit=k.unit;const S=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=S.value,R.voltageUnit=S.unit,R.tolerance=X.tolerance||"20%",R.polarized=X.polarized!==void 0?X.polarized:!0;const J=ai(X,"esr","esrUnit",ui("esr"));R.esr=J.value,R.esrUnit=J.unit,R.temperature=X.temperature||""}else if(N==="Film Capacitor"){const X=ce,k=ai(X,"capacitance","capacitanceUnit",ui("capacitance"));R.capacitance=k.value,R.capacitanceUnit=k.unit;const S=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=S.value,R.voltageUnit=S.unit,R.tolerance=X.tolerance||"10%",R.filmType=X.filmType||"Polyester"}else if(N==="Diode"){const X=ce;R.diodeType=X.diodeType||"Standard";const k=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=k.value,R.voltageUnit=k.unit;const S=ai(X,"current","currentUnit",ui("current"));R.current=S.value,R.currentUnit=S.unit,R.ledColor=X.ledColor||""}else if(N==="Battery"){const X=ce,k=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=k.value,R.voltageUnit=k.unit;const S=ai(X,"capacity","capacityUnit",ui("capacity"));R.capacity=S.value,R.capacityUnit=S.unit,R.chemistry=X.chemistry||"Li-ion"}else if(N==="Fuse"){const X=ce,k=ai(X,"current","currentUnit",ui("current"));R.current=k.value,R.currentUnit=k.unit;const S=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=S.value,R.voltageUnit=S.unit,R.fuseType=X.fuseType||"Fast-blow"}else if(N==="FerriteBead"){const X=ce,k=ai(X,"impedance","impedanceUnit",ui("impedance"));R.impedance=k.value,R.impedanceUnit=k.unit;const S=ai(X,"current","currentUnit",ui("current"));R.current=S.value,R.currentUnit=S.unit}else if(N==="Connector"){const X=ce;R.connectorType=X.connectorType||"",R.gender=X.gender||"N/A"}else if(N==="Jumper"){const X=ce;R.positions=X.positions||3}else if(N==="Relay"){const X=ce,k=ai(X,"coilVoltage","coilVoltageUnit",ui("coilVoltage"));R.coilVoltage=k.value,R.coilVoltageUnit=k.unit,R.contactType=X.contactType||"SPST";const S=ai(X,"current","currentUnit",ui("current"));R.current=S.value,R.currentUnit=S.unit}else if(N==="Inductor"){const X=ce,k=ai(X,"inductance","inductanceUnit",ui("inductance"));R.inductance=k.value,R.inductanceUnit=k.unit;const S=ai(X,"current","currentUnit",ui("current"));R.current=S.value,R.currentUnit=S.unit;const J=ai(X,"resistance","resistanceUnit",ui("resistance"));R.resistance=J.value,R.resistanceUnit=J.unit}else if(N==="Speaker"){const X=ce,k=ai(X,"impedance","impedanceUnit",ui("impedance"));R.impedance=k.value,R.impedanceUnit=k.unit;const S=ai(X,"power","powerUnit","W");R.power=S.value||"1"}else if(N==="Motor"){const X=ce;R.motorType=X.motorType||"DC";const k=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=k.value,R.voltageUnit=k.unit;const S=ai(X,"current","currentUnit",ui("current"));R.current=S.value,R.currentUnit=S.unit}else if(N==="PowerSupply"){const X=ce,k=ai(X,"inputVoltage","inputVoltageUnit",ui("inputVoltage"));R.inputVoltage=k.value,R.inputVoltageUnit=k.unit;const S=ai(X,"outputVoltage","outputVoltageUnit",ui("outputVoltage"));R.outputVoltage=S.value,R.outputVoltageUnit=S.unit;const J=ai(X,"current","currentUnit",ui("current"));R.current=J.value,R.currentUnit=J.unit}else if(N==="Transistor"){const X=ce;R.transistorType=X.transistorType||"BJT",R.polarity=X.polarity||"NPN";const k=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=k.value,R.voltageUnit=k.unit;const S=ai(X,"current","currentUnit",ui("current"));R.current=S.value,R.currentUnit=S.unit}else if(N==="ResistorNetwork"){const X=ce,k=ai(X,"resistance","resistanceUnit",ui("resistance"));R.resistance=k.value,R.resistanceUnit=k.unit,R.configuration=X.configuration||""}else if(N==="Thermistor"){const X=ce,k=ai(X,"resistance","resistanceUnit",ui("resistance"));R.resistance=k.value,R.resistanceUnit=k.unit,R.thermistorType=X.thermistorType||"NTC",R.beta=X.beta||""}else if(N==="Switch"){const X=ce;R.switchType=X.switchType||"Toggle";const k=ai(X,"current","currentUnit",ui("current"));R.current=k.value,R.currentUnit=k.unit;const S=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=S.value,R.voltageUnit=S.unit}else if(N==="Transformer"){const X=ce,k=ai(X,"primaryVoltage","primaryVoltageUnit",ui("primaryVoltage"));R.primaryVoltage=k.value,R.primaryVoltageUnit=k.unit;const S=ai(X,"secondaryVoltage","secondaryVoltageUnit",ui("secondaryVoltage"));R.secondaryVoltage=S.value,R.secondaryVoltageUnit=S.unit;const J=ai(X,"power","powerUnit",ui("power"));R.power=J.value||"1",R.turns=X.turns||""}else if(N==="TestPoint"){const X=ce;R.signal=X.signal||""}else if(N==="IntegratedCircuit"){const X=ce;R.description=X.description||ce.designator||"",R.datasheet=X.datasheet||"",R.icType=X.icType||"Op-Amp"}else if(N==="VacuumTube"){const X=ce;R.tubeType=X.tubeType||""}else if(N==="VariableResistor"){const X=ce;R.vrType=X.vrType||"Potentiometer";const k=ai(X,"resistance","resistanceUnit",ui("resistance"));R.resistance=k.value,R.resistanceUnit=k.unit;const S=ai(X,"power","powerUnit",ui("power"));R.power=S.value||"1/4",R.taper=X.taper||""}else if(N==="Crystal"){const X=ce;R.frequency=X.frequency||"",R.loadCapacitance=X.loadCapacitance||"",R.tolerance=X.tolerance||""}else if(N==="Diode"){const X=ce;R.diodeType=X.diodeType||"Standard";const k=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=k.value,R.voltageUnit=k.unit;const S=ai(X,"current","currentUnit",ui("current"));R.current=S.value,R.currentUnit=S.unit,R.ledColor=X.ledColor||""}else if(N==="GenericComponent"){const X=ce;R.genericType=X.genericType||"Attenuator";const k=ai(X,"voltage","voltageUnit",ui("voltage"));R.voltage=k.value,R.voltageUnit=k.unit;const S=ai(X,"current","currentUnit",ui("current"));R.current=S.value,R.currentUnit=S.unit,R.power=X.power||"",R.frequency=X.frequency||"",R.model=X.model||""}const W=ce.componentDefinitionKey;if(W){const X=If.find(k=>`${k.category}:${k.subcategory}:${k.type}`===W);X&&(R.componentDefinition=X,R.componentDefinitionKey=W)}f(R)},[]),ae=I.useCallback(()=>{f(null),h(null)},[]);return{componentsTop:r,setComponentsTop:n,componentsBottom:o,setComponentsBottom:s,componentEditor:u,setComponentEditor:f,connectingPin:v,setConnectingPin:h,componentDialogPosition:b,setComponentDialogPosition:x,isDraggingDialog:T,setIsDraggingDialog:D,dialogDragOffset:E,setDialogDragOffset:C,addComponent:K,updateComponent:O,removeComponent:z,openComponentEditor:V,closeComponentEditor:ae}}function jd(r){return{resistance:"",capacitance:"F",inductance:"H",voltage:"V",current:"A",power:"W",impedance:"",capacity:"mAh",esr:"",coilVoltage:"V",inputVoltage:"V",outputVoltage:"V"}[r]||""}function kd(r,n,o,s){if(n==="power"){const f=r[n]||"";return typeof f=="string"&&f.trim()!==""?{value:f.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(r[n]!==void 0||r[o]!==void 0)return{value:r[n]||"",unit:r[o]||s};const u=r[n]||"";return typeof u=="string"&&u.trim()!==""?R2(u):{value:"",unit:s}}function mx(r){if(r.componentType==="Resistor"&&"resistance"in r){const{value:s,unit:u}=kd(r,"resistance","resistanceUnit",jd("resistance"));if(s&&s.trim()!=="")return Td(s,u)}if(r.componentType==="Capacitor"&&"capacitance"in r){const{value:s,unit:u}=kd(r,"capacitance","capacitanceUnit",jd("capacitance"));if(s&&s.trim()!=="")return Td(s,u)}if(r.componentType==="Electrolytic Capacitor"&&"capacitance"in r){const{value:s,unit:u}=kd(r,"capacitance","capacitanceUnit",jd("capacitance"));if(s&&s.trim()!=="")return Td(s,u)}if(r.componentType==="Film Capacitor"&&"capacitance"in r){const{value:s,unit:u}=kd(r,"capacitance","capacitanceUnit",jd("capacitance"));if(s&&s.trim()!=="")return Td(s,u)}if(r.componentType==="Inductor"&&"inductance"in r){const{value:s,unit:u}=kd(r,"inductance","inductanceUnit",jd("inductance"));if(s&&s.trim()!=="")return Td(s,u)}const n=r.partName?.trim();if(n&&n!=="")return n;const o=r.partNumber?.trim();return o&&o!==""?o:rl(r.componentType)}function xx(r,n,o){const s=[...r,...n],u=s.length,f=new Map;for(const h of s){const b=rl(h.componentType),x=mx(h),T=`${b}|${x}`;if(!f.has(T)){const E=r.some(O=>O.id===h.id),C=n.some(O=>O.id===h.id),K=E&&C?"both":E?"top":"bottom";f.set(T,{componentType:b,value:x,quantity:0,designators:[],packageType:h.packageType,manufacturer:h.manufacturer,partNumber:h.partNumber,description:h.description,notes:h.notes,layer:K})}const D=f.get(T);D.quantity++,h.designator&&h.designator.trim()!==""&&D.designators.push(h.designator.trim())}const v=Array.from(f.values()).sort((h,b)=>h.componentType!==b.componentType?h.componentType.localeCompare(b.componentType):h.value.localeCompare(b.value));return{version:"1.0",exportedAt:new Date().toISOString(),projectName:o,totalComponents:u,uniqueComponents:v.length,items:v}}const bx="modulepreload",vx=function(r){return"/PCB_Reverse_Engineering_Tool/"+r},c1={},Gh=function(n,o,s){let u=Promise.resolve();if(o&&o.length>0){let b=function(x){return Promise.all(x.map(T=>Promise.resolve(T).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),h=v?.nonce||v?.getAttribute("nonce");u=b(o.map(x=>{if(x=vx(x),x in c1)return;c1[x]=!0;const T=x.endsWith(".css"),D=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${D}`))return;const E=document.createElement("link");if(E.rel=T?"stylesheet":bx,T||(E.as="script"),E.crossOrigin="",E.href=x,h&&E.setAttribute("nonce",h),document.head.appendChild(E),T)return new Promise((C,K)=>{E.addEventListener("load",C),E.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${x}`)))})}))}function f(v){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=v,window.dispatchEvent(h),!h.defaultPrevented)throw v}return u.then(v=>{for(const h of v||[])h.status==="rejected"&&f(h.reason);return n().catch(f)})};function wr(r){"@babel/helpers - typeof";return wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wr(r)}var gc=Uint8Array,Ll=Uint16Array,P0=Int32Array,D0=new gc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),E0=new gc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u1=new gc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M2=function(r,n){for(var o=new Ll(31),s=0;s<31;++s)o[s]=n+=1<<r[s-1];for(var u=new P0(o[30]),s=1;s<30;++s)for(var f=o[s];f<o[s+1];++f)u[f]=f-o[s]<<5|s;return{b:o,r:u}},B2=M2(D0,2),wx=B2.b,b0=B2.r;wx[28]=258,b0[258]=28;var Sx=M2(E0,0),f1=Sx.r,v0=new Ll(32768);for(var oo=0;oo<32768;++oo){var ku=(oo&43690)>>1|(oo&21845)<<1;ku=(ku&52428)>>2|(ku&13107)<<2,ku=(ku&61680)>>4|(ku&3855)<<4,v0[oo]=((ku&65280)>>8|(ku&255)<<8)>>1}var zd=(function(r,n,o){for(var s=r.length,u=0,f=new Ll(n);u<s;++u)r[u]&&++f[r[u]-1];var v=new Ll(n);for(u=1;u<n;++u)v[u]=v[u-1]+f[u-1]<<1;var h;if(o){h=new Ll(1<<n);var b=15-n;for(u=0;u<s;++u)if(r[u])for(var x=u<<4|r[u],T=n-r[u],D=v[r[u]-1]++<<T,E=D|(1<<T)-1;D<=E;++D)h[v0[D]>>b]=x}else for(h=new Ll(s),u=0;u<s;++u)r[u]&&(h[u]=v0[v[r[u]-1]++]>>15-r[u]);return h}),nf=new gc(288);for(var oo=0;oo<144;++oo)nf[oo]=8;for(var oo=144;oo<256;++oo)nf[oo]=9;for(var oo=256;oo<280;++oo)nf[oo]=7;for(var oo=280;oo<288;++oo)nf[oo]=8;var Vp=new gc(32);for(var oo=0;oo<32;++oo)Vp[oo]=5;var Cx=zd(nf,9,0),Tx=zd(Vp,5,0),O2=function(r){return(r+7)/8|0},jx=function(r,n,o){return(o==null||o>r.length)&&(o=r.length),new gc(r.subarray(n,o))},$c=function(r,n,o){o<<=n&7;var s=n/8|0;r[s]|=o,r[s+1]|=o>>8},Ad=function(r,n,o){o<<=n&7;var s=n/8|0;r[s]|=o,r[s+1]|=o>>8,r[s+2]|=o>>16},Xh=function(r,n){for(var o=[],s=0;s<r.length;++s)r[s]&&o.push({s,f:r[s]});var u=o.length,f=o.slice();if(!u)return{t:U2,l:0};if(u==1){var v=new gc(o[0].s+1);return v[o[0].s]=1,{t:v,l:1}}o.sort(function(se,Q){return se.f-Q.f}),o.push({s:-1,f:25001});var h=o[0],b=o[1],x=0,T=1,D=2;for(o[0]={s:-1,f:h.f+b.f,l:h,r:b};T!=u-1;)h=o[o[x].f<o[D].f?x++:D++],b=o[x!=T&&o[x].f<o[D].f?x++:D++],o[T++]={s:-1,f:h.f+b.f,l:h,r:b};for(var E=f[0].s,s=1;s<u;++s)f[s].s>E&&(E=f[s].s);var C=new Ll(E+1),K=w0(o[T-1],C,0);if(K>n){var s=0,O=0,z=K-n,V=1<<z;for(f.sort(function(Q,N){return C[N.s]-C[Q.s]||Q.f-N.f});s<u;++s){var ae=f[s].s;if(C[ae]>n)O+=V-(1<<K-C[ae]),C[ae]=n;else break}for(O>>=z;O>0;){var ce=f[s].s;C[ce]<n?O-=1<<n-C[ce]++-1:++s}for(;s>=0&&O;--s){var H=f[s].s;C[H]==n&&(--C[H],++O)}K=n}return{t:new gc(C),l:K}},w0=function(r,n,o){return r.s==-1?Math.max(w0(r.l,n,o+1),w0(r.r,n,o+1)):n[r.s]=o},d1=function(r){for(var n=r.length;n&&!r[--n];);for(var o=new Ll(++n),s=0,u=r[0],f=1,v=function(b){o[s++]=b},h=1;h<=n;++h)if(r[h]==u&&h!=n)++f;else{if(!u&&f>2){for(;f>138;f-=138)v(32754);f>2&&(v(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(v(u),--f;f>6;f-=6)v(8304);f>2&&(v(f-3<<5|8208),f=0)}for(;f--;)v(u);f=1,u=r[h]}return{c:o.subarray(0,s),n}},Nd=function(r,n){for(var o=0,s=0;s<n.length;++s)o+=r[s]*n[s];return o},I2=function(r,n,o){var s=o.length,u=O2(n+2);r[u]=s&255,r[u+1]=s>>8,r[u+2]=r[u]^255,r[u+3]=r[u+1]^255;for(var f=0;f<s;++f)r[u+f+4]=o[f];return(u+4+s)*8},p1=function(r,n,o,s,u,f,v,h,b,x,T){$c(n,T++,o),++u[256];for(var D=Xh(u,15),E=D.t,C=D.l,K=Xh(f,15),O=K.t,z=K.l,V=d1(E),ae=V.c,ce=V.n,H=d1(O),se=H.c,Q=H.n,N=new Ll(19),R=0;R<ae.length;++R)++N[ae[R]&31];for(var R=0;R<se.length;++R)++N[se[R]&31];for(var W=Xh(N,7),X=W.t,k=W.l,S=19;S>4&&!X[u1[S-1]];--S);var J=x+5<<3,ie=Nd(u,nf)+Nd(f,Vp)+v,ge=Nd(u,E)+Nd(f,O)+v+14+3*S+Nd(N,X)+2*N[16]+3*N[17]+7*N[18];if(b>=0&&J<=ie&&J<=ge)return I2(n,T,r.subarray(b,b+x));var $,te,he,je;if($c(n,T,1+(ge<ie)),T+=2,ge<ie){$=zd(E,C,0),te=E,he=zd(O,z,0),je=O;var be=zd(X,k,0);$c(n,T,ce-257),$c(n,T+5,Q-1),$c(n,T+10,S-4),T+=14;for(var R=0;R<S;++R)$c(n,T+3*R,X[u1[R]]);T+=3*S;for(var F=[ae,se],A=0;A<2;++A)for(var M=F[A],R=0;R<M.length;++R){var B=M[R]&31;$c(n,T,be[B]),T+=X[B],B>15&&($c(n,T,M[R]>>5&127),T+=M[R]>>12)}}else $=Cx,te=nf,he=Tx,je=Vp;for(var R=0;R<h;++R){var de=s[R];if(de>255){var B=de>>18&31;Ad(n,T,$[B+257]),T+=te[B+257],B>7&&($c(n,T,de>>23&31),T+=D0[B]);var ke=de&31;Ad(n,T,he[ke]),T+=je[ke],ke>3&&(Ad(n,T,de>>5&8191),T+=E0[ke])}else Ad(n,T,$[de]),T+=te[de]}return Ad(n,T,$[256]),T+te[256]},kx=new P0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),U2=new gc(0),Ax=function(r,n,o,s,u,f){var v=f.z||r.length,h=new gc(s+v+5*(1+Math.ceil(v/7e3))+u),b=h.subarray(s,h.length-u),x=f.l,T=(f.r||0)&7;if(n){T&&(b[0]=f.r>>3);for(var D=kx[n-1],E=D>>13,C=D&8191,K=(1<<o)-1,O=f.p||new Ll(32768),z=f.h||new Ll(K+1),V=Math.ceil(o/3),ae=2*V,ce=function(It){return(r[It]^r[It+1]<<V^r[It+2]<<ae)&K},H=new P0(25e3),se=new Ll(288),Q=new Ll(32),N=0,R=0,W=f.i||0,X=0,k=f.w||0,S=0;W+2<v;++W){var J=ce(W),ie=W&32767,ge=z[J];if(O[ie]=ge,z[J]=ie,k<=W){var $=v-W;if((N>7e3||X>24576)&&($>423||!x)){T=p1(r,b,0,H,se,Q,R,X,S,W-S,T),X=N=R=0,S=W;for(var te=0;te<286;++te)se[te]=0;for(var te=0;te<30;++te)Q[te]=0}var he=2,je=0,be=C,F=ie-ge&32767;if($>2&&J==ce(W-F))for(var A=Math.min(E,$)-1,M=Math.min(32767,W),B=Math.min(258,$);F<=M&&--be&&ie!=ge;){if(r[W+he]==r[W+he-F]){for(var de=0;de<B&&r[W+de]==r[W+de-F];++de);if(de>he){if(he=de,je=F,de>A)break;for(var ke=Math.min(F,de-2),De=0,te=0;te<ke;++te){var Ge=W-F+te&32767,ze=O[Ge],tt=Ge-ze&32767;tt>De&&(De=tt,ge=Ge)}}}ie=ge,ge=O[ie],F+=ie-ge&32767}if(je){H[X++]=268435456|b0[he]<<18|f1[je];var Xe=b0[he]&31,Tt=f1[je]&31;R+=D0[Xe]+E0[Tt],++se[257+Xe],++Q[Tt],k=W+he,++N}else H[X++]=r[W],++se[r[W]]}}for(W=Math.max(W,k);W<v;++W)H[X++]=r[W],++se[r[W]];T=p1(r,b,x,H,se,Q,R,X,S,W-S,T),x||(f.r=T&7|b[T/8|0]<<3,T-=7,f.h=z,f.p=O,f.i=W,f.w=k)}else{for(var W=f.w||0;W<v+x;W+=65535){var jt=W+65535;jt>=v&&(b[T/8|0]=x,jt=v),T=I2(b,T+1,r.subarray(W,jt))}f.i=v}return jx(h,0,s+O2(T)+u)},F2=function(){var r=1,n=0;return{p:function(o){for(var s=r,u=n,f=o.length|0,v=0;v!=f;){for(var h=Math.min(v+2655,f);v<h;++v)u+=s+=o[v];s=(s&65535)+15*(s>>16),u=(u&65535)+15*(u>>16)}r=s,n=u},d:function(){return r%=65521,n%=65521,(r&255)<<24|(r&65280)<<8|(n&255)<<8|n>>8}}},Nx=function(r,n,o,s,u){if(!u&&(u={l:1},n.dictionary)){var f=n.dictionary.subarray(-32768),v=new gc(f.length+r.length);v.set(f),v.set(r,f.length),r=v,u.w=f.length}return Ax(r,n.level==null?6:n.level,n.mem==null?u.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+n.mem,o,s,u)},q2=function(r,n,o){for(;o;++n)r[n]=o,o>>>=8},_x=function(r,n){var o=n.level,s=o==0?0:o<6?1:o==9?3:2;if(r[0]=120,r[1]=s<<6|(n.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,n.dictionary){var u=F2();u.p(n.dictionary),q2(r,2,u.d())}};function S0(r,n){n||(n={});var o=F2();o.p(r);var s=Nx(r,n,n.dictionary?6:2,4);return _x(s,n),q2(s,s.length-4,o.d()),s}var Lx=typeof TextDecoder<"u"&&new TextDecoder,zx=0;try{Lx.decode(U2,{stream:!0}),zx=1}catch{}function Px(r){if(Array.isArray(r))return r}function Dx(r,n){var o=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(o!=null){var s,u,f,v,h=[],b=!0,x=!1;try{if(f=(o=o.call(r)).next,n!==0)for(;!(b=(s=f.call(o)).done)&&(h.push(s.value),h.length!==n);b=!0);}catch(T){x=!0,u=T}finally{try{if(!b&&o.return!=null&&(v=o.return(),Object(v)!==v))return}finally{if(x)throw u}}return h}}function h1(r,n){(n==null||n>r.length)&&(n=r.length);for(var o=0,s=Array(n);o<n;o++)s[o]=r[o];return s}function Ex(r,n){if(r){if(typeof r=="string")return h1(r,n);var o={}.toString.call(r).slice(8,-1);return o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set"?Array.from(r):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h1(r,n):void 0}}function Rx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g1(r,n){return Px(r)||Dx(r,n)||Ex(r,n)||Rx()}function y1(r,n="utf8"){return new TextDecoder(n).decode(r)}const Mx=new TextEncoder;function Bx(r){return Mx.encode(r)}const Ox=1024*8,Ix=(()=>{const r=new Uint8Array(4),n=new Uint32Array(r.buffer);return!((n[0]=1)&r[0])})(),$h={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class R0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=Ox,o={}){let s=!1;typeof n=="number"?n=new ArrayBuffer(n):(s=!0,this.lastWrittenByte=n.byteLength);const u=o.offset?o.offset>>>0:0,f=n.byteLength-u;let v=u;(ArrayBuffer.isView(n)||n instanceof R0)&&(n.byteLength!==n.buffer.byteLength&&(v=n.byteOffset+u),n=n.buffer),s?this.lastWrittenByte=f:this.lastWrittenByte=0,this.buffer=n,this.length=f,this.byteLength=f,this.byteOffset=v,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,v,f),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const s=(this.offset+n)*2,u=new Uint8Array(s);u.set(new Uint8Array(this.buffer)),this.buffer=u.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,o){const s=$h[o].BYTES_PER_ELEMENT*n,u=this.byteOffset+this.offset,f=this.buffer.slice(u,u+s);if(this.littleEndian===Ix&&o!=="uint8"&&o!=="int8"){const h=new Uint8Array(this.buffer.slice(u,u+s));h.reverse();const b=new $h[o](h.buffer);return this.offset+=s,b.reverse(),b}const v=new $h[o](f);return this.offset+=s,v}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let o="";for(let s=0;s<n;s++)o+=this.readChar();return o}readUtf8(n=1){return y1(this.readBytes(n))}decodeText(n=1,o="utf8"){return y1(this.readBytes(n),o)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let o=0;o<n.length;o++)this._data.setUint8(this.offset++,n[o]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let o=0;o<n.length;o++)this.writeUint8(n.charCodeAt(o));return this}writeUtf8(n){return this.writeBytes(Bx(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Wf(r){let n=r.length;for(;--n>=0;)r[n]=0}const Ux=3,Fx=258,H2=29,qx=256,Hx=qx+1+H2,V2=30,Vx=512,Wx=new Array((Hx+2)*2);Wf(Wx);const Yx=new Array(V2*2);Wf(Yx);const Gx=new Array(Vx);Wf(Gx);const Xx=new Array(Fx-Ux+1);Wf(Xx);const $x=new Array(H2);Wf($x);const Kx=new Array(V2);Wf(Kx);const Zx=(r,n,o,s)=>{let u=r&65535|0,f=r>>>16&65535|0,v=0;for(;o!==0;){v=o>2e3?2e3:o,o-=v;do u=u+n[s++]|0,f=f+u|0;while(--v);u%=65521,f%=65521}return u|f<<16|0};var C0=Zx;const Jx=()=>{let r,n=[];for(var o=0;o<256;o++){r=o;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;n[o]=r}return n},Qx=new Uint32Array(Jx()),eb=(r,n,o,s)=>{const u=Qx,f=s+o;r^=-1;for(let v=s;v<f;v++)r=r>>>8^u[(r^n[v])&255];return r^-1};var Dc=eb,T0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},W2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const tb=(r,n)=>Object.prototype.hasOwnProperty.call(r,n);var nb=function(r){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const o=n.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(const s in o)tb(o,s)&&(r[s]=o[s])}}return r},ib=r=>{let n=0;for(let s=0,u=r.length;s<u;s++)n+=r[s].length;const o=new Uint8Array(n);for(let s=0,u=0,f=r.length;s<f;s++){let v=r[s];o.set(v,u),u+=v.length}return o},Y2={assign:nb,flattenChunks:ib};let G2=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{G2=!1}const Dd=new Uint8Array(256);for(let r=0;r<256;r++)Dd[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Dd[254]=Dd[254]=1;var rb=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let n,o,s,u,f,v=r.length,h=0;for(u=0;u<v;u++)o=r.charCodeAt(u),(o&64512)===55296&&u+1<v&&(s=r.charCodeAt(u+1),(s&64512)===56320&&(o=65536+(o-55296<<10)+(s-56320),u++)),h+=o<128?1:o<2048?2:o<65536?3:4;for(n=new Uint8Array(h),f=0,u=0;f<h;u++)o=r.charCodeAt(u),(o&64512)===55296&&u+1<v&&(s=r.charCodeAt(u+1),(s&64512)===56320&&(o=65536+(o-55296<<10)+(s-56320),u++)),o<128?n[f++]=o:o<2048?(n[f++]=192|o>>>6,n[f++]=128|o&63):o<65536?(n[f++]=224|o>>>12,n[f++]=128|o>>>6&63,n[f++]=128|o&63):(n[f++]=240|o>>>18,n[f++]=128|o>>>12&63,n[f++]=128|o>>>6&63,n[f++]=128|o&63);return n};const ob=(r,n)=>{if(n<65534&&r.subarray&&G2)return String.fromCharCode.apply(null,r.length===n?r:r.subarray(0,n));let o="";for(let s=0;s<n;s++)o+=String.fromCharCode(r[s]);return o};var ab=(r,n)=>{const o=n||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,n));let s,u;const f=new Array(o*2);for(u=0,s=0;s<o;){let v=r[s++];if(v<128){f[u++]=v;continue}let h=Dd[v];if(h>4){f[u++]=65533,s+=h-1;continue}for(v&=h===2?31:h===3?15:7;h>1&&s<o;)v=v<<6|r[s++]&63,h--;if(h>1){f[u++]=65533;continue}v<65536?f[u++]=v:(v-=65536,f[u++]=55296|v>>10&1023,f[u++]=56320|v&1023)}return ob(f,u)},sb=(r,n)=>{n=n||r.length,n>r.length&&(n=r.length);let o=n-1;for(;o>=0&&(r[o]&192)===128;)o--;return o<0||o===0?n:o+Dd[r[o]]>n?o:n},j0={string2buf:rb,buf2string:ab,utf8border:sb};function lb(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var cb=lb;const kp=16209,ub=16191;var fb=function(n,o){let s,u,f,v,h,b,x,T,D,E,C,K,O,z,V,ae,ce,H,se,Q,N,R,W,X;const k=n.state;s=n.next_in,W=n.input,u=s+(n.avail_in-5),f=n.next_out,X=n.output,v=f-(o-n.avail_out),h=f+(n.avail_out-257),b=k.dmax,x=k.wsize,T=k.whave,D=k.wnext,E=k.window,C=k.hold,K=k.bits,O=k.lencode,z=k.distcode,V=(1<<k.lenbits)-1,ae=(1<<k.distbits)-1;e:do{K<15&&(C+=W[s++]<<K,K+=8,C+=W[s++]<<K,K+=8),ce=O[C&V];t:for(;;){if(H=ce>>>24,C>>>=H,K-=H,H=ce>>>16&255,H===0)X[f++]=ce&65535;else if(H&16){se=ce&65535,H&=15,H&&(K<H&&(C+=W[s++]<<K,K+=8),se+=C&(1<<H)-1,C>>>=H,K-=H),K<15&&(C+=W[s++]<<K,K+=8,C+=W[s++]<<K,K+=8),ce=z[C&ae];n:for(;;){if(H=ce>>>24,C>>>=H,K-=H,H=ce>>>16&255,H&16){if(Q=ce&65535,H&=15,K<H&&(C+=W[s++]<<K,K+=8,K<H&&(C+=W[s++]<<K,K+=8)),Q+=C&(1<<H)-1,Q>b){n.msg="invalid distance too far back",k.mode=kp;break e}if(C>>>=H,K-=H,H=f-v,Q>H){if(H=Q-H,H>T&&k.sane){n.msg="invalid distance too far back",k.mode=kp;break e}if(N=0,R=E,D===0){if(N+=x-H,H<se){se-=H;do X[f++]=E[N++];while(--H);N=f-Q,R=X}}else if(D<H){if(N+=x+D-H,H-=D,H<se){se-=H;do X[f++]=E[N++];while(--H);if(N=0,D<se){H=D,se-=H;do X[f++]=E[N++];while(--H);N=f-Q,R=X}}}else if(N+=D-H,H<se){se-=H;do X[f++]=E[N++];while(--H);N=f-Q,R=X}for(;se>2;)X[f++]=R[N++],X[f++]=R[N++],X[f++]=R[N++],se-=3;se&&(X[f++]=R[N++],se>1&&(X[f++]=R[N++]))}else{N=f-Q;do X[f++]=X[N++],X[f++]=X[N++],X[f++]=X[N++],se-=3;while(se>2);se&&(X[f++]=X[N++],se>1&&(X[f++]=X[N++]))}}else if((H&64)===0){ce=z[(ce&65535)+(C&(1<<H)-1)];continue n}else{n.msg="invalid distance code",k.mode=kp;break e}break}}else if((H&64)===0){ce=O[(ce&65535)+(C&(1<<H)-1)];continue t}else if(H&32){k.mode=ub;break e}else{n.msg="invalid literal/length code",k.mode=kp;break e}break}}while(s<u&&f<h);se=K>>3,s-=se,K-=se<<3,C&=(1<<K)-1,n.next_in=s,n.next_out=f,n.avail_in=s<u?5+(u-s):5-(s-u),n.avail_out=f<h?257+(h-f):257-(f-h),k.hold=C,k.bits=K};const Pf=15,m1=852,x1=592,b1=0,Kh=1,v1=2,db=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),pb=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hb=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gb=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yb=(r,n,o,s,u,f,v,h)=>{const b=h.bits;let x=0,T=0,D=0,E=0,C=0,K=0,O=0,z=0,V=0,ae=0,ce,H,se,Q,N,R=null,W;const X=new Uint16Array(Pf+1),k=new Uint16Array(Pf+1);let S=null,J,ie,ge;for(x=0;x<=Pf;x++)X[x]=0;for(T=0;T<s;T++)X[n[o+T]]++;for(C=b,E=Pf;E>=1&&X[E]===0;E--);if(C>E&&(C=E),E===0)return u[f++]=1<<24|64<<16|0,u[f++]=1<<24|64<<16|0,h.bits=1,0;for(D=1;D<E&&X[D]===0;D++);for(C<D&&(C=D),z=1,x=1;x<=Pf;x++)if(z<<=1,z-=X[x],z<0)return-1;if(z>0&&(r===b1||E!==1))return-1;for(k[1]=0,x=1;x<Pf;x++)k[x+1]=k[x]+X[x];for(T=0;T<s;T++)n[o+T]!==0&&(v[k[n[o+T]]++]=T);if(r===b1?(R=S=v,W=20):r===Kh?(R=db,S=pb,W=257):(R=hb,S=gb,W=0),ae=0,T=0,x=D,N=f,K=C,O=0,se=-1,V=1<<C,Q=V-1,r===Kh&&V>m1||r===v1&&V>x1)return 1;for(;;){J=x-O,v[T]+1<W?(ie=0,ge=v[T]):v[T]>=W?(ie=S[v[T]-W],ge=R[v[T]-W]):(ie=96,ge=0),ce=1<<x-O,H=1<<K,D=H;do H-=ce,u[N+(ae>>O)+H]=J<<24|ie<<16|ge|0;while(H!==0);for(ce=1<<x-1;ae&ce;)ce>>=1;if(ce!==0?(ae&=ce-1,ae+=ce):ae=0,T++,--X[x]===0){if(x===E)break;x=n[o+v[T]]}if(x>C&&(ae&Q)!==se){for(O===0&&(O=C),N+=D,K=x-O,z=1<<K;K+O<E&&(z-=X[K+O],!(z<=0));)K++,z<<=1;if(V+=1<<K,r===Kh&&V>m1||r===v1&&V>x1)return 1;se=ae&Q,u[se]=C<<24|K<<16|N-f|0}}return ae!==0&&(u[N+ae]=x-O<<24|64<<16|0),h.bits=C,0};var Pd=yb;const mb=0,X2=1,$2=2,{Z_FINISH:w1,Z_BLOCK:xb,Z_TREES:Ap,Z_OK:rf,Z_STREAM_END:bb,Z_NEED_DICT:vb,Z_STREAM_ERROR:Ql,Z_DATA_ERROR:K2,Z_MEM_ERROR:Z2,Z_BUF_ERROR:wb,Z_DEFLATED:S1}=W2,Xp=16180,C1=16181,T1=16182,j1=16183,k1=16184,A1=16185,N1=16186,_1=16187,L1=16188,z1=16189,Wp=16190,Kc=16191,Zh=16192,P1=16193,Jh=16194,D1=16195,E1=16196,R1=16197,M1=16198,Np=16199,_p=16200,B1=16201,O1=16202,I1=16203,U1=16204,F1=16205,Qh=16206,q1=16207,H1=16208,po=16209,J2=16210,Q2=16211,Sb=852,Cb=592,Tb=15,jb=Tb,V1=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function kb(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const of=r=>{if(!r)return 1;const n=r.state;return!n||n.strm!==r||n.mode<Xp||n.mode>Q2?1:0},ey=r=>{if(of(r))return Ql;const n=r.state;return r.total_in=r.total_out=n.total=0,r.msg="",n.wrap&&(r.adler=n.wrap&1),n.mode=Xp,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(Sb),n.distcode=n.distdyn=new Int32Array(Cb),n.sane=1,n.back=-1,rf},ty=r=>{if(of(r))return Ql;const n=r.state;return n.wsize=0,n.whave=0,n.wnext=0,ey(r)},ny=(r,n)=>{let o;if(of(r))return Ql;const s=r.state;return n<0?(o=0,n=-n):(o=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?Ql:(s.window!==null&&s.wbits!==n&&(s.window=null),s.wrap=o,s.wbits=n,ty(r))},iy=(r,n)=>{if(!r)return Ql;const o=new kb;r.state=o,o.strm=r,o.window=null,o.mode=Xp;const s=ny(r,n);return s!==rf&&(r.state=null),s},Ab=r=>iy(r,jb);let W1=!0,e0,t0;const Nb=r=>{if(W1){e0=new Int32Array(512),t0=new Int32Array(32);let n=0;for(;n<144;)r.lens[n++]=8;for(;n<256;)r.lens[n++]=9;for(;n<280;)r.lens[n++]=7;for(;n<288;)r.lens[n++]=8;for(Pd(X2,r.lens,0,288,e0,0,r.work,{bits:9}),n=0;n<32;)r.lens[n++]=5;Pd($2,r.lens,0,32,t0,0,r.work,{bits:5}),W1=!1}r.lencode=e0,r.lenbits=9,r.distcode=t0,r.distbits=5},ry=(r,n,o,s)=>{let u;const f=r.state;return f.window===null&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new Uint8Array(f.wsize)),s>=f.wsize?(f.window.set(n.subarray(o-f.wsize,o),0),f.wnext=0,f.whave=f.wsize):(u=f.wsize-f.wnext,u>s&&(u=s),f.window.set(n.subarray(o-s,o-s+u),f.wnext),s-=u,s?(f.window.set(n.subarray(o-s,o),0),f.wnext=s,f.whave=f.wsize):(f.wnext+=u,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=u))),0},_b=(r,n)=>{let o,s,u,f,v,h,b,x,T,D,E,C,K,O,z=0,V,ae,ce,H,se,Q,N,R;const W=new Uint8Array(4);let X,k;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(of(r)||!r.output||!r.input&&r.avail_in!==0)return Ql;o=r.state,o.mode===Kc&&(o.mode=Zh),v=r.next_out,u=r.output,b=r.avail_out,f=r.next_in,s=r.input,h=r.avail_in,x=o.hold,T=o.bits,D=h,E=b,R=rf;e:for(;;)switch(o.mode){case Xp:if(o.wrap===0){o.mode=Zh;break}for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.wrap&2&&x===35615){o.wbits===0&&(o.wbits=15),o.check=0,W[0]=x&255,W[1]=x>>>8&255,o.check=Dc(o.check,W,2,0),x=0,T=0,o.mode=C1;break}if(o.head&&(o.head.done=!1),!(o.wrap&1)||(((x&255)<<8)+(x>>8))%31){r.msg="incorrect header check",o.mode=po;break}if((x&15)!==S1){r.msg="unknown compression method",o.mode=po;break}if(x>>>=4,T-=4,N=(x&15)+8,o.wbits===0&&(o.wbits=N),N>15||N>o.wbits){r.msg="invalid window size",o.mode=po;break}o.dmax=1<<o.wbits,o.flags=0,r.adler=o.check=1,o.mode=x&512?z1:Kc,x=0,T=0;break;case C1:for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.flags=x,(o.flags&255)!==S1){r.msg="unknown compression method",o.mode=po;break}if(o.flags&57344){r.msg="unknown header flags set",o.mode=po;break}o.head&&(o.head.text=x>>8&1),o.flags&512&&o.wrap&4&&(W[0]=x&255,W[1]=x>>>8&255,o.check=Dc(o.check,W,2,0)),x=0,T=0,o.mode=T1;case T1:for(;T<32;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.head&&(o.head.time=x),o.flags&512&&o.wrap&4&&(W[0]=x&255,W[1]=x>>>8&255,W[2]=x>>>16&255,W[3]=x>>>24&255,o.check=Dc(o.check,W,4,0)),x=0,T=0,o.mode=j1;case j1:for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.head&&(o.head.xflags=x&255,o.head.os=x>>8),o.flags&512&&o.wrap&4&&(W[0]=x&255,W[1]=x>>>8&255,o.check=Dc(o.check,W,2,0)),x=0,T=0,o.mode=k1;case k1:if(o.flags&1024){for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.length=x,o.head&&(o.head.extra_len=x),o.flags&512&&o.wrap&4&&(W[0]=x&255,W[1]=x>>>8&255,o.check=Dc(o.check,W,2,0)),x=0,T=0}else o.head&&(o.head.extra=null);o.mode=A1;case A1:if(o.flags&1024&&(C=o.length,C>h&&(C=h),C&&(o.head&&(N=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Uint8Array(o.head.extra_len)),o.head.extra.set(s.subarray(f,f+C),N)),o.flags&512&&o.wrap&4&&(o.check=Dc(o.check,s,C,f)),h-=C,f+=C,o.length-=C),o.length))break e;o.length=0,o.mode=N1;case N1:if(o.flags&2048){if(h===0)break e;C=0;do N=s[f+C++],o.head&&N&&o.length<65536&&(o.head.name+=String.fromCharCode(N));while(N&&C<h);if(o.flags&512&&o.wrap&4&&(o.check=Dc(o.check,s,C,f)),h-=C,f+=C,N)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=_1;case _1:if(o.flags&4096){if(h===0)break e;C=0;do N=s[f+C++],o.head&&N&&o.length<65536&&(o.head.comment+=String.fromCharCode(N));while(N&&C<h);if(o.flags&512&&o.wrap&4&&(o.check=Dc(o.check,s,C,f)),h-=C,f+=C,N)break e}else o.head&&(o.head.comment=null);o.mode=L1;case L1:if(o.flags&512){for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.wrap&4&&x!==(o.check&65535)){r.msg="header crc mismatch",o.mode=po;break}x=0,T=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),r.adler=o.check=0,o.mode=Kc;break;case z1:for(;T<32;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}r.adler=o.check=V1(x),x=0,T=0,o.mode=Wp;case Wp:if(o.havedict===0)return r.next_out=v,r.avail_out=b,r.next_in=f,r.avail_in=h,o.hold=x,o.bits=T,vb;r.adler=o.check=1,o.mode=Kc;case Kc:if(n===xb||n===Ap)break e;case Zh:if(o.last){x>>>=T&7,T-=T&7,o.mode=Qh;break}for(;T<3;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}switch(o.last=x&1,x>>>=1,T-=1,x&3){case 0:o.mode=P1;break;case 1:if(Nb(o),o.mode=Np,n===Ap){x>>>=2,T-=2;break e}break;case 2:o.mode=E1;break;case 3:r.msg="invalid block type",o.mode=po}x>>>=2,T-=2;break;case P1:for(x>>>=T&7,T-=T&7;T<32;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if((x&65535)!==(x>>>16^65535)){r.msg="invalid stored block lengths",o.mode=po;break}if(o.length=x&65535,x=0,T=0,o.mode=Jh,n===Ap)break e;case Jh:o.mode=D1;case D1:if(C=o.length,C){if(C>h&&(C=h),C>b&&(C=b),C===0)break e;u.set(s.subarray(f,f+C),v),h-=C,f+=C,b-=C,v+=C,o.length-=C;break}o.mode=Kc;break;case E1:for(;T<14;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.nlen=(x&31)+257,x>>>=5,T-=5,o.ndist=(x&31)+1,x>>>=5,T-=5,o.ncode=(x&15)+4,x>>>=4,T-=4,o.nlen>286||o.ndist>30){r.msg="too many length or distance symbols",o.mode=po;break}o.have=0,o.mode=R1;case R1:for(;o.have<o.ncode;){for(;T<3;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.lens[S[o.have++]]=x&7,x>>>=3,T-=3}for(;o.have<19;)o.lens[S[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,X={bits:o.lenbits},R=Pd(mb,o.lens,0,19,o.lencode,0,o.work,X),o.lenbits=X.bits,R){r.msg="invalid code lengths set",o.mode=po;break}o.have=0,o.mode=M1;case M1:for(;o.have<o.nlen+o.ndist;){for(;z=o.lencode[x&(1<<o.lenbits)-1],V=z>>>24,ae=z>>>16&255,ce=z&65535,!(V<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(ce<16)x>>>=V,T-=V,o.lens[o.have++]=ce;else{if(ce===16){for(k=V+2;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(x>>>=V,T-=V,o.have===0){r.msg="invalid bit length repeat",o.mode=po;break}N=o.lens[o.have-1],C=3+(x&3),x>>>=2,T-=2}else if(ce===17){for(k=V+3;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}x>>>=V,T-=V,N=0,C=3+(x&7),x>>>=3,T-=3}else{for(k=V+7;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}x>>>=V,T-=V,N=0,C=11+(x&127),x>>>=7,T-=7}if(o.have+C>o.nlen+o.ndist){r.msg="invalid bit length repeat",o.mode=po;break}for(;C--;)o.lens[o.have++]=N}}if(o.mode===po)break;if(o.lens[256]===0){r.msg="invalid code -- missing end-of-block",o.mode=po;break}if(o.lenbits=9,X={bits:o.lenbits},R=Pd(X2,o.lens,0,o.nlen,o.lencode,0,o.work,X),o.lenbits=X.bits,R){r.msg="invalid literal/lengths set",o.mode=po;break}if(o.distbits=6,o.distcode=o.distdyn,X={bits:o.distbits},R=Pd($2,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,X),o.distbits=X.bits,R){r.msg="invalid distances set",o.mode=po;break}if(o.mode=Np,n===Ap)break e;case Np:o.mode=_p;case _p:if(h>=6&&b>=258){r.next_out=v,r.avail_out=b,r.next_in=f,r.avail_in=h,o.hold=x,o.bits=T,fb(r,E),v=r.next_out,u=r.output,b=r.avail_out,f=r.next_in,s=r.input,h=r.avail_in,x=o.hold,T=o.bits,o.mode===Kc&&(o.back=-1);break}for(o.back=0;z=o.lencode[x&(1<<o.lenbits)-1],V=z>>>24,ae=z>>>16&255,ce=z&65535,!(V<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(ae&&(ae&240)===0){for(H=V,se=ae,Q=ce;z=o.lencode[Q+((x&(1<<H+se)-1)>>H)],V=z>>>24,ae=z>>>16&255,ce=z&65535,!(H+V<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}x>>>=H,T-=H,o.back+=H}if(x>>>=V,T-=V,o.back+=V,o.length=ce,ae===0){o.mode=F1;break}if(ae&32){o.back=-1,o.mode=Kc;break}if(ae&64){r.msg="invalid literal/length code",o.mode=po;break}o.extra=ae&15,o.mode=B1;case B1:if(o.extra){for(k=o.extra;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.length+=x&(1<<o.extra)-1,x>>>=o.extra,T-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=O1;case O1:for(;z=o.distcode[x&(1<<o.distbits)-1],V=z>>>24,ae=z>>>16&255,ce=z&65535,!(V<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if((ae&240)===0){for(H=V,se=ae,Q=ce;z=o.distcode[Q+((x&(1<<H+se)-1)>>H)],V=z>>>24,ae=z>>>16&255,ce=z&65535,!(H+V<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}x>>>=H,T-=H,o.back+=H}if(x>>>=V,T-=V,o.back+=V,ae&64){r.msg="invalid distance code",o.mode=po;break}o.offset=ce,o.extra=ae&15,o.mode=I1;case I1:if(o.extra){for(k=o.extra;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.offset+=x&(1<<o.extra)-1,x>>>=o.extra,T-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){r.msg="invalid distance too far back",o.mode=po;break}o.mode=U1;case U1:if(b===0)break e;if(C=E-b,o.offset>C){if(C=o.offset-C,C>o.whave&&o.sane){r.msg="invalid distance too far back",o.mode=po;break}C>o.wnext?(C-=o.wnext,K=o.wsize-C):K=o.wnext-C,C>o.length&&(C=o.length),O=o.window}else O=u,K=v-o.offset,C=o.length;C>b&&(C=b),b-=C,o.length-=C;do u[v++]=O[K++];while(--C);o.length===0&&(o.mode=_p);break;case F1:if(b===0)break e;u[v++]=o.length,b--,o.mode=_p;break;case Qh:if(o.wrap){for(;T<32;){if(h===0)break e;h--,x|=s[f++]<<T,T+=8}if(E-=b,r.total_out+=E,o.total+=E,o.wrap&4&&E&&(r.adler=o.check=o.flags?Dc(o.check,u,E,v-E):C0(o.check,u,E,v-E)),E=b,o.wrap&4&&(o.flags?x:V1(x))!==o.check){r.msg="incorrect data check",o.mode=po;break}x=0,T=0}o.mode=q1;case q1:if(o.wrap&&o.flags){for(;T<32;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.wrap&4&&x!==(o.total&4294967295)){r.msg="incorrect length check",o.mode=po;break}x=0,T=0}o.mode=H1;case H1:R=bb;break e;case po:R=K2;break e;case J2:return Z2;case Q2:default:return Ql}return r.next_out=v,r.avail_out=b,r.next_in=f,r.avail_in=h,o.hold=x,o.bits=T,(o.wsize||E!==r.avail_out&&o.mode<po&&(o.mode<Qh||n!==w1))&&ry(r,r.output,r.next_out,E-r.avail_out),D-=r.avail_in,E-=r.avail_out,r.total_in+=D,r.total_out+=E,o.total+=E,o.wrap&4&&E&&(r.adler=o.check=o.flags?Dc(o.check,u,E,r.next_out-E):C0(o.check,u,E,r.next_out-E)),r.data_type=o.bits+(o.last?64:0)+(o.mode===Kc?128:0)+(o.mode===Np||o.mode===Jh?256:0),(D===0&&E===0||n===w1)&&R===rf&&(R=wb),R},Lb=r=>{if(of(r))return Ql;let n=r.state;return n.window&&(n.window=null),r.state=null,rf},zb=(r,n)=>{if(of(r))return Ql;const o=r.state;return(o.wrap&2)===0?Ql:(o.head=n,n.done=!1,rf)},Pb=(r,n)=>{const o=n.length;let s,u,f;return of(r)||(s=r.state,s.wrap!==0&&s.mode!==Wp)?Ql:s.mode===Wp&&(u=1,u=C0(u,n,o,0),u!==s.check)?K2:(f=ry(r,n,o,o),f?(s.mode=J2,Z2):(s.havedict=1,rf))};var Db=ty,Eb=ny,Rb=ey,Mb=Ab,Bb=iy,Ob=_b,Ib=Lb,Ub=zb,Fb=Pb,qb="pako inflate (from Nodeca project)",Zc={inflateReset:Db,inflateReset2:Eb,inflateResetKeep:Rb,inflateInit:Mb,inflateInit2:Bb,inflate:Ob,inflateEnd:Ib,inflateGetHeader:Ub,inflateSetDictionary:Fb,inflateInfo:qb};function Hb(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Vb=Hb;const oy=Object.prototype.toString,{Z_NO_FLUSH:Wb,Z_FINISH:Yb,Z_OK:Ed,Z_STREAM_END:n0,Z_NEED_DICT:i0,Z_STREAM_ERROR:Gb,Z_DATA_ERROR:Y1,Z_MEM_ERROR:Xb}=W2;function Md(r){this.options=Y2.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(r&&r.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cb,this.strm.avail_out=0;let o=Zc.inflateInit2(this.strm,n.windowBits);if(o!==Ed)throw new Error(T0[o]);if(this.header=new Vb,Zc.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=j0.string2buf(n.dictionary):oy.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(o=Zc.inflateSetDictionary(this.strm,n.dictionary),o!==Ed)))throw new Error(T0[o])}Md.prototype.push=function(r,n){const o=this.strm,s=this.options.chunkSize,u=this.options.dictionary;let f,v,h;if(this.ended)return!1;for(n===~~n?v=n:v=n===!0?Yb:Wb,oy.call(r)==="[object ArrayBuffer]"?o.input=new Uint8Array(r):o.input=r,o.next_in=0,o.avail_in=o.input.length;;){for(o.avail_out===0&&(o.output=new Uint8Array(s),o.next_out=0,o.avail_out=s),f=Zc.inflate(o,v),f===i0&&u&&(f=Zc.inflateSetDictionary(o,u),f===Ed?f=Zc.inflate(o,v):f===Y1&&(f=i0));o.avail_in>0&&f===n0&&o.state.wrap>0&&r[o.next_in]!==0;)Zc.inflateReset(o),f=Zc.inflate(o,v);switch(f){case Gb:case Y1:case i0:case Xb:return this.onEnd(f),this.ended=!0,!1}if(h=o.avail_out,o.next_out&&(o.avail_out===0||f===n0))if(this.options.to==="string"){let b=j0.utf8border(o.output,o.next_out),x=o.next_out-b,T=j0.buf2string(o.output,b);o.next_out=x,o.avail_out=s-x,x&&o.output.set(o.output.subarray(b,b+x),0),this.onData(T)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(!(f===Ed&&h===0)){if(f===n0)return f=Zc.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,!0;if(o.avail_in===0)break}}return!0};Md.prototype.onData=function(r){this.chunks.push(r)};Md.prototype.onEnd=function(r){r===Ed&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Y2.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function $b(r,n){const o=new Md(n);if(o.push(r),o.err)throw o.msg||T0[o.err];return o.result}var Kb=Md,Zb=$b,Jb={Inflate:Kb,inflate:Zb};const{Inflate:Qb,inflate:e5}=Jb;var G1=Qb,t5=e5;const ay=[];for(let r=0;r<256;r++){let n=r;for(let o=0;o<8;o++)n&1?n=3988292384^n>>>1:n=n>>>1;ay[r]=n}const X1=4294967295;function n5(r,n,o){let s=r;for(let u=0;u<o;u++)s=ay[(s^n[u])&255]^s>>>8;return s}function i5(r,n){return(n5(X1,r,n)^X1)>>>0}function $1(r,n,o){const s=r.readUint32(),u=i5(new Uint8Array(r.buffer,r.byteOffset+r.offset-n-4,n),n);if(u!==s)throw new Error(`CRC mismatch for chunk ${o}. Expected ${s}, found ${u}`)}function sy(r,n,o){for(let s=0;s<o;s++)n[s]=r[s]}function ly(r,n,o,s){let u=0;for(;u<s;u++)n[u]=r[u];for(;u<o;u++)n[u]=r[u]+n[u-s]&255}function cy(r,n,o,s){let u=0;if(o.length===0)for(;u<s;u++)n[u]=r[u];else for(;u<s;u++)n[u]=r[u]+o[u]&255}function uy(r,n,o,s,u){let f=0;if(o.length===0){for(;f<u;f++)n[f]=r[f];for(;f<s;f++)n[f]=r[f]+(n[f-u]>>1)&255}else{for(;f<u;f++)n[f]=r[f]+(o[f]>>1)&255;for(;f<s;f++)n[f]=r[f]+(n[f-u]+o[f]>>1)&255}}function fy(r,n,o,s,u){let f=0;if(o.length===0){for(;f<u;f++)n[f]=r[f];for(;f<s;f++)n[f]=r[f]+n[f-u]&255}else{for(;f<u;f++)n[f]=r[f]+o[f]&255;for(;f<s;f++)n[f]=r[f]+r5(n[f-u],o[f],o[f-u])&255}}function r5(r,n,o){const s=r+n-o,u=Math.abs(s-r),f=Math.abs(s-n),v=Math.abs(s-o);return u<=f&&u<=v?r:f<=v?n:o}function o5(r,n,o,s,u,f){switch(r){case 0:sy(n,o,u);break;case 1:ly(n,o,u,f);break;case 2:cy(n,o,s,u);break;case 3:uy(n,o,s,u,f);break;case 4:fy(n,o,s,u,f);break;default:throw new Error(`Unsupported filter: ${r}`)}}const a5=new Uint16Array([255]),s5=new Uint8Array(a5.buffer),l5=s5[0]===255;function c5(r){const{data:n,width:o,height:s,channels:u,depth:f}=r,v=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],h=Math.ceil(f/8)*u,b=new Uint8Array(s*o*h);let x=0;for(let T=0;T<7;T++){const D=v[T],E=Math.ceil((o-D.x)/D.xStep),C=Math.ceil((s-D.y)/D.yStep);if(E<=0||C<=0)continue;const K=E*h,O=new Uint8Array(K);for(let z=0;z<C;z++){const V=n[x++],ae=n.subarray(x,x+K);x+=K;const ce=new Uint8Array(K);o5(V,ae,ce,O,K,h),O.set(ce);for(let H=0;H<E;H++){const se=D.x+H*D.xStep,Q=D.y+z*D.yStep;if(!(se>=o||Q>=s))for(let N=0;N<h;N++)b[(Q*o+se)*h+N]=ce[H*h+N]}}}if(f===16){const T=new Uint16Array(b.buffer);if(l5)for(let D=0;D<T.length;D++)T[D]=u5(T[D]);return T}else return b}function u5(r){return(r&255)<<8|r>>8&255}const f5=new Uint16Array([255]),d5=new Uint8Array(f5.buffer),p5=d5[0]===255,h5=new Uint8Array(0);function K1(r){const{data:n,width:o,height:s,channels:u,depth:f}=r,v=Math.ceil(f/8)*u,h=Math.ceil(f/8*u*o),b=new Uint8Array(s*h);let x=h5,T=0,D,E;for(let C=0;C<s;C++){switch(D=n.subarray(T+1,T+1+h),E=b.subarray(C*h,(C+1)*h),n[T]){case 0:sy(D,E,h);break;case 1:ly(D,E,h,v);break;case 2:cy(D,E,x,h);break;case 3:uy(D,E,x,h,v);break;case 4:fy(D,E,x,h,v);break;default:throw new Error(`Unsupported filter: ${n[T]}`)}x=E,T+=h+1}if(f===16){const C=new Uint16Array(b.buffer);if(p5)for(let K=0;K<C.length;K++)C[K]=g5(C[K]);return C}else return b}function g5(r){return(r&255)<<8|r>>8&255}const Bp=Uint8Array.of(137,80,78,71,13,10,26,10);function Z1(r){if(!y5(r.readBytes(Bp.length)))throw new Error("wrong PNG signature")}function y5(r){if(r.length<Bp.length)return!1;for(let n=0;n<Bp.length;n++)if(r[n]!==Bp[n])return!1;return!0}const m5="tEXt",x5=0,dy=new TextDecoder("latin1");function b5(r){if(w5(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const v5=/^[\u0000-\u00FF]*$/;function w5(r){if(!v5.test(r))throw new Error("invalid latin1 text")}function S5(r,n,o){const s=py(n);r[s]=C5(n,o-s.length-1)}function py(r){for(r.mark();r.readByte()!==x5;);const n=r.offset;r.reset();const o=dy.decode(r.readBytes(n-r.offset-1));return r.skip(1),b5(o),o}function C5(r,n){return dy.decode(r.readBytes(n))}const _l={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},r0={UNKNOWN:-1,DEFLATE:0},J1={UNKNOWN:-1,ADAPTIVE:0},o0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Lp={NONE:0,BACKGROUND:1,PREVIOUS:2},a0={SOURCE:0,OVER:1};class T5 extends R0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(n,o={}){super(n);const{checkCrc:s=!1}=o;this._checkCrc=s,this._inflator=new G1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=r0.UNKNOWN,this._filterMethod=J1.UNKNOWN,this._interlaceMethod=o0.UNKNOWN,this._colorType=_l.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Z1(this);!this._end;){const n=this.readUint32(),o=this.readChars(4);this.decodeChunk(n,o)}return this.decodeImage(),this._png}decodeApng(){for(Z1(this);!this._end;){const n=this.readUint32(),o=this.readChars(4);this.decodeApngChunk(n,o)}return this.decodeApngImage(),this._apng}decodeChunk(n,o){const s=this.offset;switch(o){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case m5:S5(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${o}`);this._checkCrc?$1(this,n+4,o):this.skip(4)}decodeApngChunk(n,o){const s=this.offset;switch(o!=="fdAT"&&o!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),o){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,o),this.offset=s+n;break}if(this.offset-s!==n)throw new Error(`Length mismatch while decoding chunk ${o}`);this._checkCrc?$1(this,n+4,o):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=j5(this.readUint8());const o=this.readUint8();this._colorType=o;let s;switch(o){case _l.GREYSCALE:s=1;break;case _l.TRUECOLOUR:s=3;break;case _l.INDEXED_COLOUR:s=1;break;case _l.GREYSCALE_ALPHA:s=2;break;case _l.TRUECOLOUR_ALPHA:s=4;break;case _l.UNKNOWN:default:throw new Error(`Unknown color type: ${o}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==r0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const o=n/3;this._hasPalette=!0;const s=[];this._palette=s;for(let u=0;u<o;u++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const o=n,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,o)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let o=n,s=this.offset+this.byteOffset;if(s+=4,o-=4,this._inflator.push(new Uint8Array(this.buffer,s,o)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case _l.GREYSCALE:case _l.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let o=0;o<n/2;o++)this._transparency[o]=this.readUint16();break}case _l.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let o=0;for(;o<n;o++){const s=this.readByte();this._palette[o].push(s)}for(;o<this._palette.length;o++)this._palette[o].push(255);break}case _l.UNKNOWN:case _l.GREYSCALE_ALPHA:case _l.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const o=py(this),s=this.readUint8();if(s!==r0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const u=this.readBytes(n-o.length-2);this._png.iccEmbeddedProfile={name:o,profile:t5(u)}}decodepHYs(){const n=this.readUint32(),o=this.readUint32(),s=this.readByte();this._png.resolution={x:n,y:o,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const o={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(n);if(s){if(s.data=K1({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)o.data=s.data;else{const u=this._apng.frames.at(n-1);this.disposeFrame(s,u,o),this.addFrameDataToCanvas(o,s)}this._apng.frames.push(o)}}return this._apng}disposeFrame(n,o,s){switch(n.disposeOp){case Lp.NONE:break;case Lp.BACKGROUND:for(let u=0;u<this._png.height;u++)for(let f=0;f<this._png.width;f++){const v=(u*n.width+f)*this._png.channels;for(let h=0;h<this._png.channels;h++)s.data[v+h]=0}break;case Lp.PREVIOUS:s.data.set(o.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,o){const s=1<<this._png.depth,u=(f,v)=>{const h=((f+o.yOffset)*this._png.width+o.xOffset+v)*this._png.channels,b=(f*o.width+v)*this._png.channels;return{index:h,frameIndex:b}};switch(o.blendOp){case a0.SOURCE:for(let f=0;f<o.height;f++)for(let v=0;v<o.width;v++){const{index:h,frameIndex:b}=u(f,v);for(let x=0;x<this._png.channels;x++)n.data[h+x]=o.data[b+x]}break;case a0.OVER:for(let f=0;f<o.height;f++)for(let v=0;v<o.width;v++){const{index:h,frameIndex:b}=u(f,v);for(let x=0;x<this._png.channels;x++){const T=o.data[b+this._png.channels-1]/s,D=x%(this._png.channels-1)===0?1:o.data[b+x],E=Math.floor(T*D+(1-T)*n.data[h+x]);n.data[h+x]+=E}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==J1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===o0.NO_INTERLACE)this._png.data=K1({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===o0.ADAM7)this._png.data=c5({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,o=this._frames.at(-1);o?o.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Lp.NONE,blendOp:a0.SOURCE,data:n}),this._inflator=new G1,this._writingDataChunks=!1}}function j5(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Q1;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Q1||(Q1={}));function k5(r,n){return new T5(r,n).decode()}var Kn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function s0(){Kn.console&&typeof Kn.console.log=="function"&&Kn.console.log.apply(Kn.console,arguments)}var Fr={log:s0,warn:function(r){Kn.console&&(typeof Kn.console.warn=="function"?Kn.console.warn.apply(Kn.console,arguments):s0.call(null,arguments))},error:function(r){Kn.console&&(typeof Kn.console.error=="function"?Kn.console.error.apply(Kn.console,arguments):s0(r))}};function l0(r,n,o){var s=new XMLHttpRequest;s.open("GET",r),s.responseType="blob",s.onload=function(){Ju(s.response,n,o)},s.onerror=function(){Fr.error("could not download file")},s.send()}function e2(r){var n=new XMLHttpRequest;n.open("HEAD",r,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function zp(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(n)}}var Ju=Kn.saveAs||((typeof window>"u"?"undefined":wr(window))!=="object"||window!==Kn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,n,o){var s=Kn.URL||Kn.webkitURL,u=document.createElement("a");n=n||r.name||"download",u.download=n,u.rel="noopener",typeof r=="string"?(u.href=r,u.origin!==location.origin?e2(u.href)?l0(r,n,o):zp(u,u.target="_blank"):zp(u)):(u.href=s.createObjectURL(r),setTimeout(function(){s.revokeObjectURL(u.href)},4e4),setTimeout(function(){zp(u)},0))}:"msSaveOrOpenBlob"in navigator?function(r,n,o){if(n=n||r.name||"download",typeof r=="string")if(e2(r))l0(r,n,o);else{var s=document.createElement("a");s.href=r,s.target="_blank",setTimeout(function(){zp(s)})}else navigator.msSaveOrOpenBlob((function(u,f){return f===void 0?f={autoBom:!1}:wr(f)!=="object"&&(Fr.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u})(r,o),n)}:function(r,n,o,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof r=="string")return l0(r,n,o);var u=r.type==="application/octet-stream",f=/constructor/i.test(Kn.HTMLElement)||Kn.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||u&&f)&&(typeof FileReader>"u"?"undefined":wr(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var T=h.result;T=v?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=T:location=T,s=null},h.readAsDataURL(r)}else{var b=Kn.URL||Kn.webkitURL,x=b.createObjectURL(r);s?s.location=x:location.href=x,s=null,setTimeout(function(){b.revokeObjectURL(x)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function hy(r){var n;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var o=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],s=0;s<o.length;s++){var u=o[s].re,f=o[s].process,v=u.exec(r);v&&(n=f(v),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),b=this.g.toString(16),x=this.b.toString(16);return h.length==1&&(h="0"+h),b.length==1&&(b="0"+b),x.length==1&&(x="0"+x),"#"+h+b+x}}var Op=Kn.atob.bind(Kn),t2=Kn.btoa.bind(Kn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function c0(r,n){var o=r[0],s=r[1],u=r[2],f=r[3];o=vs(o,s,u,f,n[0],7,-680876936),f=vs(f,o,s,u,n[1],12,-389564586),u=vs(u,f,o,s,n[2],17,606105819),s=vs(s,u,f,o,n[3],22,-1044525330),o=vs(o,s,u,f,n[4],7,-176418897),f=vs(f,o,s,u,n[5],12,1200080426),u=vs(u,f,o,s,n[6],17,-1473231341),s=vs(s,u,f,o,n[7],22,-45705983),o=vs(o,s,u,f,n[8],7,1770035416),f=vs(f,o,s,u,n[9],12,-1958414417),u=vs(u,f,o,s,n[10],17,-42063),s=vs(s,u,f,o,n[11],22,-1990404162),o=vs(o,s,u,f,n[12],7,1804603682),f=vs(f,o,s,u,n[13],12,-40341101),u=vs(u,f,o,s,n[14],17,-1502002290),o=ws(o,s=vs(s,u,f,o,n[15],22,1236535329),u,f,n[1],5,-165796510),f=ws(f,o,s,u,n[6],9,-1069501632),u=ws(u,f,o,s,n[11],14,643717713),s=ws(s,u,f,o,n[0],20,-373897302),o=ws(o,s,u,f,n[5],5,-701558691),f=ws(f,o,s,u,n[10],9,38016083),u=ws(u,f,o,s,n[15],14,-660478335),s=ws(s,u,f,o,n[4],20,-405537848),o=ws(o,s,u,f,n[9],5,568446438),f=ws(f,o,s,u,n[14],9,-1019803690),u=ws(u,f,o,s,n[3],14,-187363961),s=ws(s,u,f,o,n[8],20,1163531501),o=ws(o,s,u,f,n[13],5,-1444681467),f=ws(f,o,s,u,n[2],9,-51403784),u=ws(u,f,o,s,n[7],14,1735328473),o=Ss(o,s=ws(s,u,f,o,n[12],20,-1926607734),u,f,n[5],4,-378558),f=Ss(f,o,s,u,n[8],11,-2022574463),u=Ss(u,f,o,s,n[11],16,1839030562),s=Ss(s,u,f,o,n[14],23,-35309556),o=Ss(o,s,u,f,n[1],4,-1530992060),f=Ss(f,o,s,u,n[4],11,1272893353),u=Ss(u,f,o,s,n[7],16,-155497632),s=Ss(s,u,f,o,n[10],23,-1094730640),o=Ss(o,s,u,f,n[13],4,681279174),f=Ss(f,o,s,u,n[0],11,-358537222),u=Ss(u,f,o,s,n[3],16,-722521979),s=Ss(s,u,f,o,n[6],23,76029189),o=Ss(o,s,u,f,n[9],4,-640364487),f=Ss(f,o,s,u,n[12],11,-421815835),u=Ss(u,f,o,s,n[15],16,530742520),o=Cs(o,s=Ss(s,u,f,o,n[2],23,-995338651),u,f,n[0],6,-198630844),f=Cs(f,o,s,u,n[7],10,1126891415),u=Cs(u,f,o,s,n[14],15,-1416354905),s=Cs(s,u,f,o,n[5],21,-57434055),o=Cs(o,s,u,f,n[12],6,1700485571),f=Cs(f,o,s,u,n[3],10,-1894986606),u=Cs(u,f,o,s,n[10],15,-1051523),s=Cs(s,u,f,o,n[1],21,-2054922799),o=Cs(o,s,u,f,n[8],6,1873313359),f=Cs(f,o,s,u,n[15],10,-30611744),u=Cs(u,f,o,s,n[6],15,-1560198380),s=Cs(s,u,f,o,n[13],21,1309151649),o=Cs(o,s,u,f,n[4],6,-145523070),f=Cs(f,o,s,u,n[11],10,-1120210379),u=Cs(u,f,o,s,n[2],15,718787259),s=Cs(s,u,f,o,n[9],21,-343485551),r[0]=Nu(o,r[0]),r[1]=Nu(s,r[1]),r[2]=Nu(u,r[2]),r[3]=Nu(f,r[3])}function $p(r,n,o,s,u,f){return n=Nu(Nu(n,r),Nu(s,f)),Nu(n<<u|n>>>32-u,o)}function vs(r,n,o,s,u,f,v){return $p(n&o|~n&s,r,n,u,f,v)}function ws(r,n,o,s,u,f,v){return $p(n&s|o&~s,r,n,u,f,v)}function Ss(r,n,o,s,u,f,v){return $p(n^o^s,r,n,u,f,v)}function Cs(r,n,o,s,u,f,v){return $p(o^(n|~s),r,n,u,f,v)}function gy(r){var n,o=r.length,s=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=r.length;n+=64)c0(s,A5(r.substring(n-64,n)));r=r.substring(n-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<r.length;n++)u[n>>2]|=r.charCodeAt(n)<<(n%4<<3);if(u[n>>2]|=128<<(n%4<<3),n>55)for(c0(s,u),n=0;n<16;n++)u[n]=0;return u[14]=8*o,c0(s,u),s}function A5(r){var n,o=[];for(n=0;n<64;n+=4)o[n>>2]=r.charCodeAt(n)+(r.charCodeAt(n+1)<<8)+(r.charCodeAt(n+2)<<16)+(r.charCodeAt(n+3)<<24);return o}var n2="0123456789abcdef".split("");function N5(r){for(var n="",o=0;o<4;o++)n+=n2[r>>8*o+4&15]+n2[r>>8*o&15];return n}function _5(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function k0(r){return gy(r).map(_5).join("")}var L5=(function(r){for(var n=0;n<r.length;n++)r[n]=N5(r[n]);return r.join("")})(gy("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nu(r,n){if(L5){var o=(65535&r)+(65535&n);return(r>>16)+(n>>16)+(o>>16)<<16|65535&o}return r+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function A0(r,n){var o,s,u,f;if(r!==o){for(var v=(u=r,f=1+(256/r.length|0),new Array(f+1).join(u)),h=[],b=0;b<256;b++)h[b]=b;var x=0;for(b=0;b<256;b++){var T=h[b];x=(x+T+v.charCodeAt(b))%256,h[b]=h[x],h[x]=T}o=r,s=h}else h=s;var D=n.length,E=0,C=0,K="";for(b=0;b<D;b++)C=(C+(T=h[E=(E+1)%256]))%256,h[E]=h[C],h[C]=T,v=h[(h[E]+h[C])%256],K+=String.fromCharCode(n.charCodeAt(b)^v);return K}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var i2={print:4,modify:8,copy:16,"annot-forms":32};function Mf(r,n,o,s){this.v=1,this.r=2;var u=192;r.forEach(function(h){if(i2.perm!==void 0)throw new Error("Invalid permission: "+h);u+=i2[h]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var f=(n+this.padding).substr(0,32),v=(o+this.padding).substr(0,32);this.O=this.processOwnerPassword(f,v),this.P=-(1+(255^u)),this.encryptionKey=k0(f+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=A0(this.encryptionKey,this.padding)}function Bf(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var n="",o=r.length,s=0;s<o;s++){var u=r.charCodeAt(s);n+=u<33||u===35||u===37||u===40||u===41||u===47||u===60||u===62||u===91||u===93||u===123||u===125||u>126?"#"+("0"+u.toString(16)).slice(-2):r[s]}return n}function r2(r){if(wr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(o,s,u){if(u=u||!1,typeof o!="string"||typeof s!="function"||typeof u!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(o)||(n[o]={});var f=Math.random().toString(35);return n[o][f]=[s,!!u],f},this.unsubscribe=function(o){for(var s in n)if(n[s][o])return delete n[s][o],Object.keys(n[s]).length===0&&delete n[s],!0;return!1},this.publish=function(o){if(n.hasOwnProperty(o)){var s=Array.prototype.slice.call(arguments,1),u=[];for(var f in n[o]){var v=n[o][f];try{v[0].apply(r,s)}catch(h){Kn.console&&Fr.error("jsPDF PubSub Error",h.message,h)}v[1]&&u.push(f)}u.length&&u.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function Yp(r){if(!(this instanceof Yp))return new Yp(r);var n="opacity,stroke-opacity".split(",");for(var o in r)r.hasOwnProperty(o)&&n.indexOf(o)>=0&&(this[o]=r[o]);this.id="",this.objectNumber=-1}function yy(r,n){this.gState=r,this.matrix=n,this.id="",this.objectNumber=-1}function Qu(r,n,o,s,u){if(!(this instanceof Qu))return new Qu(r,n,o,s,u);this.type=r==="axial"?2:3,this.coords=n,this.colors=o,yy.call(this,s,u)}function Of(r,n,o,s,u){if(!(this instanceof Of))return new Of(r,n,o,s,u);this.boundingBox=r,this.xStep=n,this.yStep=o,this.stream="",this.cloneIndex=0,yy.call(this,s,u)}function Tn(r){var n,o=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],u=arguments[2],f=arguments[3],v=[],h=1,b=16,x="S",T=null;wr(r=r||{})==="object"&&(o=r.orientation,s=r.unit||s,u=r.format||u,f=r.compress||r.compressPdf||f,(T=r.encryption||null)!==null&&(T.userPassword=T.userPassword||"",T.ownerPassword=T.ownerPassword||"",T.userPermissions=T.userPermissions||[]),h=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(n=r.precision),r.floatPrecision!==void 0&&(b=r.floatPrecision),x=r.defaultPathOperation||"S"),v=r.filters||(f===!0?["FlateEncode"]:v),s=s||"mm",o=(""+(o||"P")).toLowerCase();var D=r.putOnlyUsedFonts||!1,E={},C={internal:{},__private__:{}};C.__private__.PubSub=r2;var K="1.3",O=C.__private__.getPdfVersion=function(){return K};C.__private__.setPdfVersion=function(w){K=w};var z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return z};var V=C.__private__.getPageFormat=function(w){return z[w]};u=u||"a4";var ae="compat",ce="advanced",H=ae;function se(){this.saveGraphicsState(),pe(new Xt(Rn,0,0,-Rn,0,vi()*Rn).toString()+" cm"),this.setFontSize(this.getFontSize()/Rn),x="n",H=ce}function Q(){this.restoreGraphicsState(),x="S",H=ae}var N=C.__private__.combineFontStyleAndFontWeight=function(w,q){if(w=="bold"&&q=="normal"||w=="bold"&&q==400||w=="normal"&&q=="italic"||w=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(w=q==400||q==="normal"?w==="italic"?"italic":"normal":q!=700&&q!=="bold"||w!=="normal"?(q==700?"bold":q)+""+w:"bold"),w};C.advancedAPI=function(w){var q=H===ae;return q&&se.call(this),typeof w!="function"||(w(this),q&&Q.call(this)),this},C.compatAPI=function(w){var q=H===ce;return q&&Q.call(this),typeof w!="function"||(w(this),q&&se.call(this)),this},C.isAdvancedAPI=function(){return H===ce};var R,W=function(w){if(H!==ce)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},X=C.roundToPrecision=C.__private__.roundToPrecision=function(w,q){var ye=n||q;if(isNaN(w)||isNaN(ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(ye).replace(/0+$/,"")};R=C.hpf=C.__private__.hpf=typeof b=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return X(w,b)}:b==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return X(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return X(w,16)};var k=C.f2=C.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return X(w,2)},S=C.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return X(w,3)},J=C.scale=C.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return H===ae?w*Rn:H===ce?w:void 0},ie=function(w){return J((function(q){return H===ae?vi()-q:H===ce?q:void 0})(w))};C.__private__.setPrecision=C.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(n=parseInt(w,10))};var ge,$="00000000000000000000000000000000",te=C.__private__.getFileId=function(){return $},he=C.__private__.setFileId=function(w){return $=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),T!==null&&(Zn=new Mf(T.userPermissions,T.userPassword,T.ownerPassword,$)),$};C.setFileId=function(w){return he(w),this},C.getFileId=function(){return te()};var je=C.__private__.convertDateToPDFDate=function(w){var q=w.getTimezoneOffset(),ye=q<0?"+":"-",Ae=Math.floor(Math.abs(q/60)),He=Math.abs(q%60),lt=[ye,B(Ae),"'",B(He),"'"].join("");return["D:",w.getFullYear(),B(w.getMonth()+1),B(w.getDate()),B(w.getHours()),B(w.getMinutes()),B(w.getSeconds()),lt].join("")},be=C.__private__.convertPDFDateToDate=function(w){var q=parseInt(w.substr(2,4),10),ye=parseInt(w.substr(6,2),10)-1,Ae=parseInt(w.substr(8,2),10),He=parseInt(w.substr(10,2),10),lt=parseInt(w.substr(12,2),10),bt=parseInt(w.substr(14,2),10);return new Date(q,ye,Ae,He,lt,bt,0)},F=C.__private__.setCreationDate=function(w){var q;if(w===void 0&&(w=new Date),w instanceof Date)q=je(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=w}return ge=q},A=C.__private__.getCreationDate=function(w){var q=ge;return w==="jsDate"&&(q=be(ge)),q};C.setCreationDate=function(w){return F(w),this},C.getCreationDate=function(w){return A(w)};var M,B=C.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},de=C.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},ke=0,De=[],Ge=[],ze=0,tt=[],Xe=[],Tt=!1,jt=Ge;C.__private__.setCustomOutputDestination=function(w){Tt=!0,jt=w};var It=function(w){Tt||(jt=w)};C.__private__.resetCustomOutputDestination=function(){Tt=!1,jt=Ge};var pe=C.__private__.out=function(w){return w=w.toString(),ze+=w.length+1,jt.push(w),jt},Pt=C.__private__.write=function(w){return pe(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},gn=C.__private__.getArrayBuffer=function(w){for(var q=w.length,ye=new ArrayBuffer(q),Ae=new Uint8Array(ye);q--;)Ae[q]=w.charCodeAt(q);return ye},Qt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return Qt};var ht=r.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(w){return ht=H===ce?w/Rn:w,this};var nn,Rt=C.__private__.getFontSize=C.getFontSize=function(){return H===ae?ht:ht*Rn},mn=r.R2L||!1;C.__private__.setR2L=C.setR2L=function(w){return mn=w,this},C.__private__.getR2L=C.getR2L=function(){return mn};var en,Vn=C.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))nn=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');nn=w}else nn=parseInt(w,10)};C.__private__.getZoomMode=function(){return nn};var Nt,Dt=C.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');en=w};C.__private__.getPageMode=function(){return en};var li=C.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');Nt=w};C.__private__.getLayoutMode=function(){return Nt},C.__private__.setDisplayMode=C.setDisplayMode=function(w,q,ye){return Vn(w),li(q),Dt(ye),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(w){if(Object.keys(ct).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[w]},C.__private__.getDocumentProperties=function(){return ct},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(w){for(var q in ct)ct.hasOwnProperty(q)&&w[q]&&(ct[q]=w[q]);return this},C.__private__.setDocumentProperty=function(w,q){if(Object.keys(ct).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[w]=q};var kt,Rn,Gt,zn,Nn,rn={},xn={},rt=[],$t={},Ht={},Vt={},wn={},Xi=null,Un=0,un=[],Wt=new r2(C),ko=r.hotfixes||[],Zr={},go={},Ao=[],Xt=function w(q,ye,Ae,He,lt,bt){if(!(this instanceof w))return new w(q,ye,Ae,He,lt,bt);isNaN(q)&&(q=1),isNaN(ye)&&(ye=0),isNaN(Ae)&&(Ae=0),isNaN(He)&&(He=1),isNaN(lt)&&(lt=0),isNaN(bt)&&(bt=0),this._matrix=[q,ye,Ae,He,lt,bt]};Object.defineProperty(Xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Xt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(w)},Xt.prototype.multiply=function(w){var q=w.sx*this.sx+w.shy*this.shx,ye=w.sx*this.shy+w.shy*this.sy,Ae=w.shx*this.sx+w.sy*this.shx,He=w.shx*this.shy+w.sy*this.sy,lt=w.tx*this.sx+w.ty*this.shx+this.tx,bt=w.tx*this.shy+w.ty*this.sy+this.ty;return new Xt(q,ye,Ae,He,lt,bt)},Xt.prototype.decompose=function(){var w=this.sx,q=this.shy,ye=this.shx,Ae=this.sy,He=this.tx,lt=this.ty,bt=Math.sqrt(w*w+q*q),Mt=(w/=bt)*ye+(q/=bt)*Ae;ye-=w*Mt,Ae-=q*Mt;var an=Math.sqrt(ye*ye+Ae*Ae);return Mt/=an,w*(Ae/=an)<q*(ye/=an)&&(w=-w,q=-q,Mt=-Mt,bt=-bt),{scale:new Xt(bt,0,0,an,0,0),translate:new Xt(1,0,0,1,He,lt),rotate:new Xt(w,q,-q,w,0,0),skew:new Xt(1,0,Mt,1,0,0)}},Xt.prototype.toString=function(w){return this.join(" ")},Xt.prototype.inversed=function(){var w=this.sx,q=this.shy,ye=this.shx,Ae=this.sy,He=this.tx,lt=this.ty,bt=1/(w*Ae-q*ye),Mt=Ae*bt,an=-q*bt,jn=-ye*bt,Jn=w*bt;return new Xt(Mt,an,jn,Jn,-Mt*He-jn*lt,-an*He-Jn*lt)},Xt.prototype.applyToPoint=function(w){var q=w.x*this.sx+w.y*this.shx+this.tx,ye=w.x*this.shy+w.y*this.sy+this.ty;return new qo(q,ye)},Xt.prototype.applyToRectangle=function(w){var q=this.applyToPoint(w),ye=this.applyToPoint(new qo(w.x+w.w,w.y+w.h));return new Ho(q.x,q.y,ye.x-q.x,ye.y-q.y)},Xt.prototype.clone=function(){var w=this.sx,q=this.shy,ye=this.shx,Ae=this.sy,He=this.tx,lt=this.ty;return new Xt(w,q,ye,Ae,He,lt)},C.Matrix=Xt;var No=C.matrixMult=function(w,q){return q.multiply(w)},ya=new Xt(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=ya;var na=function(w,q){if(!Ht[w]){var ye=(q instanceof Qu?"Sh":"P")+(Object.keys($t).length+1).toString(10);q.id=ye,Ht[w]=ye,$t[ye]=q,Wt.publish("addPattern",q)}};C.ShadingPattern=Qu,C.TilingPattern=Of,C.addShadingPattern=function(w,q){return W("addShadingPattern()"),na(w,q),this},C.beginTilingPattern=function(w){W("beginTilingPattern()"),cl(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},C.endTilingPattern=function(w,q){W("endTilingPattern()"),q.stream=Xe[M].join(`
`),na(w,q),Wt.publish("endTilingPattern",q),Ao.pop().restore()};var vt,ii=C.__private__.newObject=function(){var w=Xn();return cr(w,!0),w},Xn=C.__private__.newObjectDeferred=function(){return ke++,De[ke]=function(){return ze},ke},cr=function(w,q){return q=typeof q=="boolean"&&q,De[w]=ze,q&&pe(w+" 0 obj"),w},$i=C.__private__.newAdditionalObject=function(){var w={objId:Xn(),content:""};return tt.push(w),w},Sr=Xn(),xi=Xn(),di=C.__private__.decodeColorString=function(w){var q=w.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var ye=parseFloat(q[0]);q=[ye,ye,ye,"r"]}for(var Ae="#",He=0;He<3;He++)Ae+=("0"+Math.floor(255*parseFloat(q[He])).toString(16)).slice(-2);return Ae},yo=C.__private__.encodeColorString=function(w){var q;typeof w=="string"&&(w={ch1:w});var ye=w.ch1,Ae=w.ch2,He=w.ch3,lt=w.ch4,bt=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ye=="string"&&ye.charAt(0)!=="#"){var Mt=new hy(ye);if(Mt.ok)ye=Mt.toHex();else if(!/^\d*\.?\d*$/.test(ye))throw new Error('Invalid color "'+ye+'" passed to jsPDF.encodeColorString.')}if(typeof ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ye)&&(ye="#"+ye[1]+ye[1]+ye[2]+ye[2]+ye[3]+ye[3]),typeof ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ye)){var an=parseInt(ye.substr(1),16);ye=an>>16&255,Ae=an>>8&255,He=255&an}if(Ae===void 0||lt===void 0&&ye===Ae&&Ae===He)q=typeof ye=="string"?ye+" "+bt[0]:w.precision===2?k(ye/255)+" "+bt[0]:S(ye/255)+" "+bt[0];else if(lt===void 0||wr(lt)==="object"){if(lt&&!isNaN(lt.a)&&lt.a===0)return["1.","1.","1.",bt[1]].join(" ");q=typeof ye=="string"?[ye,Ae,He,bt[1]].join(" "):w.precision===2?[k(ye/255),k(Ae/255),k(He/255),bt[1]].join(" "):[S(ye/255),S(Ae/255),S(He/255),bt[1]].join(" ")}else q=typeof ye=="string"?[ye,Ae,He,lt,bt[2]].join(" "):w.precision===2?[k(ye),k(Ae),k(He),k(lt),bt[2]].join(" "):[S(ye),S(Ae),S(He),S(lt),bt[2]].join(" ");return q},ia=C.__private__.getFilters=function(){return v},ma=C.__private__.putStream=function(w){var q=(w=w||{}).data||"",ye=w.filters||ia(),Ae=w.alreadyAppliedFilters||[],He=w.addLength1||!1,lt=q.length,bt=w.objectId,Mt=function(Hi){return Hi};if(T!==null&&bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");T!==null&&(Mt=Zn.encryptor(bt,0));var an={};ye===!0&&(ye=["FlateEncode"]);var jn=w.additionalKeyValues||[],Jn=(an=Tn.API.processDataByFilters!==void 0?Tn.API.processDataByFilters(q,ye):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(Ae)?Ae.join(" "):Ae.toString());if(an.data.length!==0&&(jn.push({key:"Length",value:an.data.length}),He===!0&&jn.push({key:"Length1",value:lt})),Jn.length!=0)if(Jn.split("/").length-1==1)jn.push({key:"Filter",value:Jn});else{jn.push({key:"Filter",value:"["+Jn+"]"});for(var Fn=0;Fn<jn.length;Fn+=1)if(jn[Fn].key==="DecodeParms"){for(var tr=[],wi=0;wi<an.reverseChain.split("/").length-1;wi+=1)tr.push("null");tr.push(jn[Fn].value),jn[Fn].value="["+tr.join(" ")+"]"}}pe("<<");for(var qi=0;qi<jn.length;qi++)pe("/"+jn[qi].key+" "+jn[qi].value);pe(">>"),an.data.length!==0&&(pe("stream"),pe(Mt(an.data)),pe("endstream"))},qs=C.__private__.putPage=function(w){var q=w.number,ye=w.data,Ae=w.objId,He=w.contentsObjId;cr(Ae,!0),pe("<</Type /Page"),pe("/Parent "+w.rootDictionaryObjId+" 0 R"),pe("/Resources "+w.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(R(w.mediaBox.bottomLeftX))+" "+parseFloat(R(w.mediaBox.bottomLeftY))+" "+R(w.mediaBox.topRightX)+" "+R(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&pe("/CropBox ["+R(w.cropBox.bottomLeftX)+" "+R(w.cropBox.bottomLeftY)+" "+R(w.cropBox.topRightX)+" "+R(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&pe("/BleedBox ["+R(w.bleedBox.bottomLeftX)+" "+R(w.bleedBox.bottomLeftY)+" "+R(w.bleedBox.topRightX)+" "+R(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&pe("/TrimBox ["+R(w.trimBox.bottomLeftX)+" "+R(w.trimBox.bottomLeftY)+" "+R(w.trimBox.topRightX)+" "+R(w.trimBox.topRightY)+"]"),w.artBox!==null&&pe("/ArtBox ["+R(w.artBox.bottomLeftX)+" "+R(w.artBox.bottomLeftY)+" "+R(w.artBox.topRightX)+" "+R(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&pe("/UserUnit "+w.userUnit),Wt.publish("putPage",{objId:Ae,pageContext:un[q],pageNumber:q,page:ye}),pe("/Contents "+He+" 0 R"),pe(">>"),pe("endobj");var lt=ye.join(`
`);return H===ce&&(lt+=`
Q`),cr(He,!0),ma({data:lt,filters:ia(),objectId:He}),pe("endobj"),Ae},za=C.__private__.putPages=function(){var w,q,ye=[];for(w=1;w<=Un;w++)un[w].objId=Xn(),un[w].contentsObjId=Xn();for(w=1;w<=Un;w++)ye.push(qs({number:w,data:Xe[w],objId:un[w].objId,contentsObjId:un[w].contentsObjId,mediaBox:un[w].mediaBox,cropBox:un[w].cropBox,bleedBox:un[w].bleedBox,trimBox:un[w].trimBox,artBox:un[w].artBox,userUnit:un[w].userUnit,rootDictionaryObjId:Sr,resourceDictionaryObjId:xi}));cr(Sr,!0),pe("<</Type /Pages");var Ae="/Kids [";for(q=0;q<Un;q++)Ae+=ye[q]+" 0 R ";pe(Ae+"]"),pe("/Count "+Un),pe(">>"),pe("endobj"),Wt.publish("postPutPages")},Pa=function(w){Wt.publish("putFont",{font:w,out:pe,newObject:ii,putStream:ma}),w.isAlreadyPutted!==!0&&(w.objectNumber=ii(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+Bf(w.postScriptName)),pe("/Subtype /Type1"),typeof w.encoding=="string"&&pe("/Encoding /"+w.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},os=function(w){w.objectNumber=ii();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[R(w.x),R(w.y),R(w.x+w.width),R(w.y+w.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var ye=w.pages[1].join(`
`);ma({data:ye,additionalKeyValues:q,objectId:w.objectNumber}),pe("endobj")},Wn=function(w,q){q||(q=21);var ye=ii(),Ae=(function(bt,Mt){var an,jn=[],Jn=1/(Mt-1);for(an=0;an<1;an+=Jn)jn.push(an);if(jn.push(1),bt[0].offset!=0){var Fn={offset:0,color:bt[0].color};bt.unshift(Fn)}if(bt[bt.length-1].offset!=1){var tr={offset:1,color:bt[bt.length-1].color};bt.push(tr)}for(var wi="",qi=0,Hi=0;Hi<jn.length;Hi++){for(an=jn[Hi];an>bt[qi+1].offset;)qi++;var Tr=bt[qi].offset,gr=(an-Tr)/(bt[qi+1].offset-Tr),zs=bt[qi].color,ur=bt[qi+1].color;wi+=de(Math.round((1-gr)*zs[0]+gr*ur[0]).toString(16))+de(Math.round((1-gr)*zs[1]+gr*ur[1]).toString(16))+de(Math.round((1-gr)*zs[2]+gr*ur[2]).toString(16))}return wi.trim()})(w.colors,q),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+q+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ma({data:Ae,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ye}),pe("endobj"),w.objectNumber=ii(),pe("<< /ShadingType "+w.type),pe("/ColorSpace /DeviceRGB");var lt="/Coords ["+R(parseFloat(w.coords[0]))+" "+R(parseFloat(w.coords[1]))+" ";w.type===2?lt+=R(parseFloat(w.coords[2]))+" "+R(parseFloat(w.coords[3])):lt+=R(parseFloat(w.coords[2]))+" "+R(parseFloat(w.coords[3]))+" "+R(parseFloat(w.coords[4]))+" "+R(parseFloat(w.coords[5])),pe(lt+="]"),w.matrix&&pe("/Matrix ["+w.matrix.toString()+"]"),pe("/Function "+ye+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},_o=function(w,q){var ye=Xn(),Ae=ii();q.push({resourcesOid:ye,objectOid:Ae}),w.objectNumber=Ae;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+w.boundingBox.map(R).join(" ")+"]"}),He.push({key:"XStep",value:R(w.xStep)}),He.push({key:"YStep",value:R(w.yStep)}),He.push({key:"Resources",value:ye+" 0 R"}),w.matrix&&He.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),ma({data:w.stream,additionalKeyValues:He,objectId:w.objectNumber}),pe("endobj")},Si=function(w){for(var q in w.objectNumber=ii(),pe("<<"),w)switch(q){case"opacity":pe("/ca "+k(w[q]));break;case"stroke-opacity":pe("/CA "+k(w[q]))}pe(">>"),pe("endobj")},xa=function(w){cr(w.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var q in pe("/Font <<"),rn)rn.hasOwnProperty(q)&&(D===!1||D===!0&&E.hasOwnProperty(q))&&pe("/"+q+" "+rn[q].objectNumber+" 0 R");pe(">>")})(),(function(){if(Object.keys($t).length>0){for(var q in pe("/Shading <<"),$t)$t.hasOwnProperty(q)&&$t[q]instanceof Qu&&$t[q].objectNumber>=0&&pe("/"+q+" "+$t[q].objectNumber+" 0 R");Wt.publish("putShadingPatternDict"),pe(">>")}})(),(function(q){if(Object.keys($t).length>0){for(var ye in pe("/Pattern <<"),$t)$t.hasOwnProperty(ye)&&$t[ye]instanceof C.TilingPattern&&$t[ye].objectNumber>=0&&$t[ye].objectNumber<q&&pe("/"+ye+" "+$t[ye].objectNumber+" 0 R");Wt.publish("putTilingPatternDict"),pe(">>")}})(w.objectOid),(function(){if(Object.keys(Vt).length>0){var q;for(q in pe("/ExtGState <<"),Vt)Vt.hasOwnProperty(q)&&Vt[q].objectNumber>=0&&pe("/"+q+" "+Vt[q].objectNumber+" 0 R");Wt.publish("putGStateDict"),pe(">>")}})(),(function(){for(var q in pe("/XObject <<"),Zr)Zr.hasOwnProperty(q)&&Zr[q].objectNumber>=0&&pe("/"+q+" "+Zr[q].objectNumber+" 0 R");Wt.publish("putXobjectDict"),pe(">>")})(),pe(">>"),pe("endobj")},Pn=function(w){xn[w.fontName]=xn[w.fontName]||{},xn[w.fontName][w.fontStyle]=w.id},Ts=function(w,q,ye,Ae,He){var lt={id:"F"+(Object.keys(rn).length+1).toString(10),postScriptName:w,fontName:q,fontStyle:ye,encoding:Ae,isStandardFont:He||!1,metadata:{}};return Wt.publish("addFont",{font:lt,instance:this}),rn[lt.id]=lt,Pn(lt),lt.id},Yn=C.__private__.pdfEscape=C.pdfEscape=function(w,q){return(function(ye,Ae){var He,lt,bt,Mt,an,jn,Jn,Fn,tr;if(bt=(Ae=Ae||{}).sourceEncoding||"Unicode",an=Ae.outputEncoding,(Ae.autoencode||an)&&rn[kt].metadata&&rn[kt].metadata[bt]&&rn[kt].metadata[bt].encoding&&(Mt=rn[kt].metadata[bt].encoding,!an&&rn[kt].encoding&&(an=rn[kt].encoding),!an&&Mt.codePages&&(an=Mt.codePages[0]),typeof an=="string"&&(an=Mt[an]),an)){for(Jn=!1,jn=[],He=0,lt=ye.length;He<lt;He++)(Fn=an[ye.charCodeAt(He)])?jn.push(String.fromCharCode(Fn)):jn.push(ye[He]),jn[He].charCodeAt(0)>>8&&(Jn=!0);ye=jn.join("")}for(He=ye.length;Jn===void 0&&He!==0;)ye.charCodeAt(He-1)>>8&&(Jn=!0),He--;if(!Jn)return ye;for(jn=Ae.noBOM?[]:[254,255],He=0,lt=ye.length;He<lt;He++){if((tr=(Fn=ye.charCodeAt(He))>>8)>>8)throw new Error("Character at position "+He+" of string '"+ye+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jn.push(tr),jn.push(Fn-(tr<<8))}return String.fromCharCode.apply(void 0,jn)})(w,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ra=C.__private__.beginPage=function(w){Xe[++Un]=[],un[Un]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},ks(Un),It(Xe[M])},ba=function(w,q){var ye,Ae,He;switch(o=q||o,typeof w=="string"&&(ye=V(w.toLowerCase()),Array.isArray(ye)&&(Ae=ye[0],He=ye[1])),Array.isArray(w)&&(Ae=w[0]*Rn,He=w[1]*Rn),isNaN(Ae)&&(Ae=u[0],He=u[1]),(Ae>14400||He>14400)&&(Fr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ae=Math.min(14400,Ae),He=Math.min(14400,He)),u=[Ae,He],o.substr(0,1)){case"l":He>Ae&&(u=[He,Ae]);break;case"p":Ae>He&&(u=[He,Ae])}ra(u),wt(ll),pe(tn),Ea!==0&&pe(Ea+" J"),so!==0&&pe(so+" j"),Wt.publish("addPage",{pageNumber:Un})},js=function(w){w>0&&w<=Un&&(Xe.splice(w,1),un.splice(w,1),Un--,M>Un&&(M=Un),this.setPage(M))},ks=function(w){w>0&&w<=Un&&(M=w)},Hs=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return Xe.length-1},xc=function(w,q,ye){var Ae,He=void 0;return ye=ye||{},w=w!==void 0?w:rn[kt].fontName,q=q!==void 0?q:rn[kt].fontStyle,Ae=w.toLowerCase(),xn[Ae]!==void 0&&xn[Ae][q]!==void 0?He=xn[Ae][q]:xn[w]!==void 0&&xn[w][q]!==void 0?He=xn[w][q]:ye.disableWarning===!1&&Fr.warn("Unable to look up font label for font '"+w+"', '"+q+"'. Refer to getFontList() for available fonts."),He||ye.noFallback||(He=xn.times[q])==null&&(He=xn.times.normal),He},Fi=C.__private__.putInfo=function(){var w=ii(),q=function(Ae){return Ae};for(var ye in T!==null&&(q=Zn.encryptor(w,0)),pe("<<"),pe("/Producer ("+Yn(q("jsPDF "+Tn.version))+")"),ct)ct.hasOwnProperty(ye)&&ct[ye]&&pe("/"+ye.substr(0,1).toUpperCase()+ye.substr(1)+" ("+Yn(q(ct[ye]))+")");pe("/CreationDate ("+Yn(q(ge))+")"),pe(">>"),pe("endobj")},As=C.__private__.putCatalog=function(w){var q=(w=w||{}).rootDictionaryObjId||Sr;switch(ii(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+q+" 0 R"),nn||(nn="fullwidth"),nn){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ye=""+nn;ye.substr(ye.length-1)==="%"&&(nn=parseInt(nn)/100),typeof nn=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+k(nn)+"]")}switch(Nt||(Nt="continuous"),Nt){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}en&&pe("/PageMode /"+en),Wt.publish("putCatalog"),pe(">>"),pe("endobj")},In=C.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(ke+1)),pe("/Root "+ke+" 0 R"),pe("/Info "+(ke-1)+" 0 R"),T!==null&&pe("/Encrypt "+Zn.oid+" 0 R"),pe("/ID [ <"+$+"> <"+$+"> ]"),pe(">>")},Mn=C.__private__.putHeader=function(){pe("%PDF-"+K),pe("%")},Ns=C.__private__.putXRef=function(){var w="0000000000";pe("xref"),pe("0 "+(ke+1)),pe("0000000000 65535 f ");for(var q=1;q<=ke;q++)typeof De[q]=="function"?pe((w+De[q]()).slice(-10)+" 00000 n "):De[q]!==void 0?pe((w+De[q]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},Ya=C.__private__.buildDocument=function(){var w;ke=0,ze=0,Ge=[],De=[],tt=[],Sr=Xn(),xi=Xn(),It(Ge),Wt.publish("buildDocument"),Mn(),za(),(function(){Wt.publish("putAdditionalObjects");for(var ye=0;ye<tt.length;ye++){var Ae=tt[ye];cr(Ae.objId,!0),pe(Ae.content),pe("endobj")}Wt.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var ye in rn)rn.hasOwnProperty(ye)&&(D===!1||D===!0&&E.hasOwnProperty(ye))&&Pa(rn[ye])})(),(function(){var ye;for(ye in Vt)Vt.hasOwnProperty(ye)&&Si(Vt[ye])})(),(function(){for(var ye in Zr)Zr.hasOwnProperty(ye)&&os(Zr[ye])})(),(function(ye){var Ae;for(Ae in $t)$t.hasOwnProperty(Ae)&&($t[Ae]instanceof Qu?Wn($t[Ae]):$t[Ae]instanceof Of&&_o($t[Ae],ye))})(w),Wt.publish("putResources"),w.forEach(xa),xa({resourcesOid:xi,objectOid:Number.MAX_SAFE_INTEGER}),Wt.publish("postPutResources"),T!==null&&(Zn.oid=ii(),pe("<<"),pe("/Filter /Standard"),pe("/V "+Zn.v),pe("/R "+Zn.r),pe("/U <"+Zn.toHexString(Zn.U)+">"),pe("/O <"+Zn.toHexString(Zn.O)+">"),pe("/P "+Zn.P),pe(">>"),pe("endobj")),Fi(),As();var q=ze;return Ns(),In(),pe("startxref"),pe(""+q),pe("%%EOF"),It(Xe[M]),Ge.join(`
`)},Da=C.__private__.getBlob=function(w){return new Blob([gn(w)],{type:"application/pdf"})},al=C.output=C.__private__.output=(vt=function(w,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",w){case void 0:return Ya();case"save":C.save(q.filename);break;case"arraybuffer":return gn(Ya());case"blob":return Da(Ya());case"bloburi":case"bloburl":if(Kn.URL!==void 0&&typeof Kn.URL.createObjectURL=="function")return Kn.URL&&Kn.URL.createObjectURL(Da(Ya()))||void 0;Fr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ye="",Ae=Ya();try{ye=t2(Ae)}catch{ye=t2(unescape(encodeURIComponent(Ae)))}return"data:application/pdf;filename="+q.filename+";base64,"+ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kn)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",lt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(He=q.pdfObjectUrl,lt="");var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+lt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Mt=Kn.open();return Mt!==null&&Mt.document.write(bt),Mt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kn)==="[object Window]"){var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',jn=Kn.open();if(jn!==null){jn.document.write(an);var Jn=this;jn.document.documentElement.querySelector("#pdfViewer").onload=function(){jn.document.title=q.filename,jn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Jn.output("bloburl"))}}return jn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',tr=Kn.open();if(tr!==null&&(tr.document.write(Fn),tr.document.title=q.filename),tr||typeof safari>"u")return tr;break;case"datauri":case"dataurl":return Kn.document.location.href=this.output("datauristring",q);default:return null}},vt.foo=function(){try{return vt.apply(this,arguments)}catch(ye){var w=ye.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var q="Error in function "+w.split(`
`)[0].split("<")[0]+": "+ye.message;if(!Kn.console)throw new Error(q);Kn.console.error(q,ye),Kn.alert&&alert(q)}},vt.foo.bar=vt,vt.foo),bi=function(w){return Array.isArray(ko)===!0&&ko.indexOf(w)>-1};switch(s){case"pt":Rn=1;break;case"mm":Rn=72/25.4;break;case"cm":Rn=72/2.54;break;case"in":Rn=72;break;case"px":Rn=bi("px_scaling")==1?.75:96/72;break;case"pc":case"em":Rn=12;break;case"ex":Rn=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Rn=s}var Zn=null;F(),he();var Cr=C.__private__.getPageInfo=C.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:un[w].objId,pageNumber:w,pageContext:un[w]}},Ri=C.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in un)if(un[q].objId===w)break;return Cr(q)},qr=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:un[M].objId,pageNumber:M,pageContext:un[M]}};C.addPage=function(){return ba.apply(this,arguments),this},C.setPage=function(){return ks.apply(this,arguments),It.call(this,Xe[M]),this},C.insertPage=function(w){return this.addPage(),this.movePage(M,w),this},C.movePage=function(w,q){var ye,Ae;if(w>q){ye=Xe[w],Ae=un[w];for(var He=w;He>q;He--)Xe[He]=Xe[He-1],un[He]=un[He-1];Xe[q]=ye,un[q]=Ae,this.setPage(q)}else if(w<q){ye=Xe[w],Ae=un[w];for(var lt=w;lt<q;lt++)Xe[lt]=Xe[lt+1],un[lt]=un[lt+1];Xe[q]=ye,un[q]=Ae,this.setPage(q)}return this},C.deletePage=function(){return js.apply(this,arguments),this},C.__private__.text=C.text=function(w,q,ye,Ae,He){var lt,bt,Mt,an,jn,Jn,Fn,tr,wi,qi=(Ae=Ae||{}).scope||this;if(typeof w=="number"&&typeof q=="number"&&(typeof ye=="string"||Array.isArray(ye))){var Hi=ye;ye=q,q=w,w=Hi}if(arguments[3]instanceof Xt==0?(Mt=arguments[4],an=arguments[5],wr(Fn=arguments[3])==="object"&&Fn!==null||(typeof Mt=="string"&&(an=Mt,Mt=null),typeof Fn=="string"&&(an=Fn,Fn=null),typeof Fn=="number"&&(Mt=Fn,Fn=null),Ae={flags:Fn,angle:Mt,align:an})):(W("The transform parameter of text() with a Matrix value"),wi=He),isNaN(q)||isNaN(ye)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return qi;var Tr,gr="",zs=typeof Ae.lineHeightFactor=="number"?Ae.lineHeightFactor:Fo,ur=qi.internal.scaleFactor;function Ra(Vi){return Vi=Vi.split("	").join(Array(Ae.TabLen||9).join(" ")),Yn(Vi,Fn)}function Lo(Vi){for(var Li,dr=Vi.concat(),Jr=[],jr=dr.length;jr--;)typeof(Li=dr.shift())=="string"?Jr.push(Li):Array.isArray(Vi)&&(Li.length===1||Li[1]===void 0&&Li[2]===void 0)?Jr.push(Li[0]):Jr.push([Li[0],Li[1],Li[2]]);return Jr}function Ps(Vi,Li){var dr;if(typeof Vi=="string")dr=Li(Vi)[0];else if(Array.isArray(Vi)){for(var Jr,jr,Vr=Vi.concat(),Oa=[],Ia=Vr.length;Ia--;)typeof(Jr=Vr.shift())=="string"?Oa.push(Li(Jr)[0]):Array.isArray(Jr)&&typeof Jr[0]=="string"&&(jr=Li(Jr[0],Jr[1],Jr[2]),Oa.push([jr[0],jr[1],jr[2]]));dr=Oa}return dr}var Dr=!1,oa=!0;if(typeof w=="string")Dr=!0;else if(Array.isArray(w)){var Qi=w.concat();bt=[];for(var Ma,zo=Qi.length;zo--;)(typeof(Ma=Qi.shift())!="string"||Array.isArray(Ma)&&typeof Ma[0]!="string")&&(oa=!1);Dr=oa}if(Dr===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Rl=ht/qi.internal.scaleFactor,ss=Rl*(zs-1);switch(Ae.baseline){case"bottom":ye-=ss;break;case"top":ye+=Rl-ss;break;case"hanging":ye+=Rl-2*ss;break;case"middle":ye+=Rl/2-ss}if((Jn=Ae.maxWidth||0)>0&&(typeof w=="string"?w=qi.splitTextToSize(w,Jn):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Vi,Li){return Vi.concat(qi.splitTextToSize(Li,Jn))},[]))),lt={text:w,x:q,y:ye,options:Ae,mutex:{pdfEscape:Yn,activeFontKey:kt,fonts:rn,activeFontSize:ht}},Wt.publish("preProcessText",lt),w=lt.text,Mt=(Ae=lt.options).angle,wi instanceof Xt==0&&Mt&&typeof Mt=="number"){Mt*=Math.PI/180,Ae.rotationDirection===0&&(Mt=-Mt),H===ce&&(Mt=-Mt);var fl=Math.cos(Mt),Xa=Math.sin(Mt);wi=new Xt(fl,Xa,-Xa,fl,0,0)}else Mt&&Mt instanceof Xt&&(wi=Mt);H!==ce||wi||(wi=ya),(jn=Ae.charSpace||Ft)!==void 0&&(gr+=R(J(jn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(tr=Ae.horizontalScale)!==void 0&&(gr+=R(100*tr)+` Tz
`),Ae.lang;var Vo=-1,aa=Ae.renderingMode!==void 0?Ae.renderingMode:Ae.stroke,dl=qi.internal.getCurrentPageInfo().pageContext;switch(aa){case 0:case!1:case"fill":Vo=0;break;case 1:case!0:case"stroke":Vo=1;break;case 2:case"fillThenStroke":Vo=2;break;case 3:case"invisible":Vo=3;break;case 4:case"fillAndAddForClipping":Vo=4;break;case 5:case"strokeAndAddPathForClipping":Vo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vo=6;break;case 7:case"addToPathForClipping":Vo=7}var Ca=dl.usedRenderingMode!==void 0?dl.usedRenderingMode:-1;Vo!==-1?gr+=Vo+` Tr
`:Ca!==-1&&(gr+=`0 Tr
`),Vo!==-1&&(dl.usedRenderingMode=Vo),an=Ae.align||"left";var Po,Wo=ht*zs,Ds=qi.internal.pageSize.getWidth(),Gs=rn[kt];jn=Ae.charSpace||Ft,Jn=Ae.maxWidth||0,Fn=Object.assign({autoencode:!0,noBOM:!0},Ae.flags);var $a=[],Ba=function(Vi){return qi.getStringUnitWidth(Vi,{font:Gs,charSpace:jn,fontSize:ht,doKerning:!1})*ht/ur};if(Object.prototype.toString.call(w)==="[object Array]"){var sa;bt=Lo(w),an!=="left"&&(Po=bt.map(Ba));var lo,pi=0;if(an==="right"){q-=Po[0],w=[],zo=bt.length;for(var la=0;la<zo;la++)la===0?(lo=Kt(q),sa=Dn(ye)):(lo=J(pi-Po[la]),sa=-Wo),w.push([bt[la],lo,sa]),pi=Po[la]}else if(an==="center"){q-=Po[0]/2,w=[],zo=bt.length;for(var Bi=0;Bi<zo;Bi++)Bi===0?(lo=Kt(q),sa=Dn(ye)):(lo=J((pi-Po[Bi])/2),sa=-Wo),w.push([bt[Bi],lo,sa]),pi=Po[Bi]}else if(an==="left"){w=[],zo=bt.length;for(var ls=0;ls<zo;ls++)w.push(bt[ls])}else if(an==="justify"&&Gs.encoding==="Identity-H"){w=[],zo=bt.length,Jn=Jn!==0?Jn:Ds;for(var Ml=0,fr=0;fr<zo;fr++)if(sa=fr===0?Dn(ye):-Wo,lo=fr===0?Kt(q):Ml,fr<zo-1){var Qc=J((Jn-Po[fr])/(bt[fr].split(" ").length-1)),cs=bt[fr].split(" ");w.push([cs[0]+" ",lo,sa]),Ml=0;for(var Xs=1;Xs<cs.length;Xs++){var Yo=(Ba(cs[Xs-1]+" "+cs[Xs])-Ba(cs[Xs]))*ur+Qc;Xs==cs.length-1?w.push([cs[Xs],Yo,0]):w.push([cs[Xs]+" ",Yo,0]),Ml-=Yo}}else w.push([bt[fr],lo,sa]);w.push(["",Ml,0])}else{if(an!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],zo=bt.length,Jn=Jn!==0?Jn:Ds,fr=0;fr<zo;fr++){sa=fr===0?Dn(ye):-Wo,lo=fr===0?Kt(q):0;var ca=bt[fr].split(" ").length-1,Bl=ca>0?(Jn-Po[fr])/ca:0;fr<zo-1?$a.push(R(J(Bl))):$a.push(0),w.push([bt[fr],lo,sa])}}}(typeof Ae.R2L=="boolean"?Ae.R2L:mn)===!0&&(w=Ps(w,function(Vi,Li,dr){return[Vi.split("").reverse().join(""),Li,dr]})),lt={text:w,x:q,y:ye,options:Ae,mutex:{pdfEscape:Yn,activeFontKey:kt,fonts:rn,activeFontSize:ht}},Wt.publish("postProcessText",lt),w=lt.text,Tr=lt.mutex.isHex||!1;var pl=rn[kt].encoding;pl!=="WinAnsiEncoding"&&pl!=="StandardEncoding"||(w=Ps(w,function(Vi,Li,dr){return[Ra(Vi),Li,dr]})),bt=Lo(w),w=[];for(var Ta,co,us,$s=Array.isArray(bt[0])?1:0,Ka="",Ks=function(Vi,Li,dr){var Jr="";return dr instanceof Xt?(dr=typeof Ae.angle=="number"?No(dr,new Xt(1,0,0,1,Vi,Li)):No(new Xt(1,0,0,1,Vi,Li),dr),H===ce&&(dr=No(new Xt(1,0,0,-1,0,0),dr)),Jr=dr.join(" ")+` Tm
`):Jr=R(Vi)+" "+R(Li)+` Td
`,Jr},ua=0;ua<bt.length;ua++){switch(Ka="",$s){case 1:us=(Tr?"<":"(")+bt[ua][0]+(Tr?">":")"),Ta=parseFloat(bt[ua][1]),co=parseFloat(bt[ua][2]);break;case 0:us=(Tr?"<":"(")+bt[ua]+(Tr?">":")"),Ta=Kt(q),co=Dn(ye)}$a!==void 0&&$a[ua]!==void 0&&(Ka=$a[ua]+` Tw
`),ua===0?w.push(Ka+Ks(Ta,co,wi)+us):$s===0?w.push(Ka+us):$s===1&&w.push(Ka+Ks(Ta,co,wi)+us)}w=$s===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Za=`BT
/`;return Za+=kt+" "+ht+` Tf
`,Za+=R(ht*zs)+` TL
`,Za+=Ut+`
`,Za+=gr,Za+=w,pe(Za+="ET"),E[kt]=!0,qi};var sl=C.__private__.clip=C.clip=function(w){return pe(w==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return sl("evenodd")},C.__private__.discardPath=C.discardPath=function(){return pe("n"),this};var Ji=C.__private__.isValidStyle=function(w){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(q=!0),q};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(w){return Ji(w)&&(x=w),this};var ao=C.__private__.getStyle=C.getStyle=function(w){var q=x;switch(w){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=w}return q},va=C.close=function(){return pe("h"),this};C.stroke=function(){return pe("S"),this},C.fill=function(w){return Hr("f",w),this},C.fillEvenOdd=function(w){return Hr("f*",w),this},C.fillStroke=function(w){return Hr("B",w),this},C.fillStrokeEvenOdd=function(w){return Hr("B*",w),this};var Hr=function(w,q){wr(q)==="object"?_s(q,w):pe(w)},wa=function(w){w===null||H===ce&&w===void 0||(w=ao(w),pe(w))};function Sa(w,q,ye,Ae,He){var lt=new Of(q||this.boundingBox,ye||this.xStep,Ae||this.yStep,this.gState,He||this.matrix);lt.stream=this.stream;var bt=w+"$$"+this.cloneIndex+++"$$";return na(bt,lt),lt}var _s=function(w,q){var ye=Ht[w.key],Ae=$t[ye];if(Ae instanceof Qu)pe("q"),pe(Vs(q)),Ae.gState&&C.setGState(Ae.gState),pe(w.matrix.toString()+" cm"),pe("/"+ye+" sh"),pe("Q");else if(Ae instanceof Of){var He=new Xt(1,0,0,-1,0,vi());w.matrix&&(He=He.multiply(w.matrix||ya),ye=Sa.call(Ae,w.key,w.boundingBox,w.xStep,w.yStep,He).id),pe("q"),pe("/Pattern cs"),pe("/"+ye+" scn"),Ae.gState&&C.setGState(Ae.gState),pe(q),pe("Q")}},Vs=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},zl=C.moveTo=function(w,q){return pe(R(J(w))+" "+R(ie(q))+" m"),this},Pl=C.lineTo=function(w,q){return pe(R(J(w))+" "+R(ie(q))+" l"),this},ut=C.curveTo=function(w,q,ye,Ae,He,lt){return pe([R(J(w)),R(ie(q)),R(J(ye)),R(ie(Ae)),R(J(He)),R(ie(lt)),"c"].join(" ")),this};C.__private__.line=C.line=function(w,q,ye,Ae,He){if(isNaN(w)||isNaN(q)||isNaN(ye)||isNaN(Ae)||!Ji(He))throw new Error("Invalid arguments passed to jsPDF.line");return H===ae?this.lines([[ye-w,Ae-q]],w,q,[1,1],He||"S"):this.lines([[ye-w,Ae-q]],w,q,[1,1]).stroke()},C.__private__.lines=C.lines=function(w,q,ye,Ae,He,lt){var bt,Mt,an,jn,Jn,Fn,tr,wi,qi,Hi,Tr,gr;if(typeof w=="number"&&(gr=ye,ye=q,q=w,w=gr),Ae=Ae||[1,1],lt=lt||!1,isNaN(q)||isNaN(ye)||!Array.isArray(w)||!Array.isArray(Ae)||!Ji(He)||typeof lt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(zl(q,ye),bt=Ae[0],Mt=Ae[1],jn=w.length,Hi=q,Tr=ye,an=0;an<jn;an++)(Jn=w[an]).length===2?(Hi=Jn[0]*bt+Hi,Tr=Jn[1]*Mt+Tr,Pl(Hi,Tr)):(Fn=Jn[0]*bt+Hi,tr=Jn[1]*Mt+Tr,wi=Jn[2]*bt+Hi,qi=Jn[3]*Mt+Tr,Hi=Jn[4]*bt+Hi,Tr=Jn[5]*Mt+Tr,ut(Fn,tr,wi,qi,Hi,Tr));return lt&&va(),wa(He),this},C.path=function(w){for(var q=0;q<w.length;q++){var ye=w[q],Ae=ye.c;switch(ye.op){case"m":zl(Ae[0],Ae[1]);break;case"l":Pl(Ae[0],Ae[1]);break;case"c":ut.apply(this,Ae);break;case"h":va()}}return this},C.__private__.rect=C.rect=function(w,q,ye,Ae,He){if(isNaN(w)||isNaN(q)||isNaN(ye)||isNaN(Ae)||!Ji(He))throw new Error("Invalid arguments passed to jsPDF.rect");return H===ae&&(Ae=-Ae),pe([R(J(w)),R(ie(q)),R(J(ye)),R(J(Ae)),"re"].join(" ")),wa(He),this},C.__private__.triangle=C.triangle=function(w,q,ye,Ae,He,lt,bt){if(isNaN(w)||isNaN(q)||isNaN(ye)||isNaN(Ae)||isNaN(He)||isNaN(lt)||!Ji(bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ye-w,Ae-q],[He-ye,lt-Ae],[w-He,q-lt]],w,q,[1,1],bt,!0),this},C.__private__.roundedRect=C.roundedRect=function(w,q,ye,Ae,He,lt,bt){if(isNaN(w)||isNaN(q)||isNaN(ye)||isNaN(Ae)||isNaN(He)||isNaN(lt)||!Ji(bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Mt=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*ye),lt=Math.min(lt,.5*Ae),this.lines([[ye-2*He,0],[He*Mt,0,He,lt-lt*Mt,He,lt],[0,Ae-2*lt],[0,lt*Mt,-He*Mt,lt,-He,lt],[2*He-ye,0],[-He*Mt,0,-He,-lt*Mt,-He,-lt],[0,2*lt-Ae],[0,-lt*Mt,He*Mt,-lt,He,-lt]],w+He,q,[1,1],bt,!0),this},C.__private__.ellipse=C.ellipse=function(w,q,ye,Ae,He){if(isNaN(w)||isNaN(q)||isNaN(ye)||isNaN(Ae)||!Ji(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var lt=4/3*(Math.SQRT2-1)*ye,bt=4/3*(Math.SQRT2-1)*Ae;return zl(w+ye,q),ut(w+ye,q-bt,w+lt,q-Ae,w,q-Ae),ut(w-lt,q-Ae,w-ye,q-bt,w-ye,q),ut(w-ye,q+bt,w-lt,q+Ae,w,q+Ae),ut(w+lt,q+Ae,w+ye,q+bt,w+ye,q),wa(He),this},C.__private__.circle=C.circle=function(w,q,ye,Ae){if(isNaN(w)||isNaN(q)||isNaN(ye)||!Ji(Ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,q,ye,ye,Ae)},C.setFont=function(w,q,ye){return ye&&(q=N(q,ye)),kt=xc(w,q,{disableWarning:!1}),this};var Sn=C.__private__.getFont=C.getFont=function(){return rn[xc.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var w,q,ye={};for(w in xn)if(xn.hasOwnProperty(w))for(q in ye[w]=[],xn[w])xn[w].hasOwnProperty(q)&&ye[w].push(q);return ye},C.addFont=function(w,q,ye,Ae,He){var lt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&lt.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&lt.indexOf(arguments[3])==-1&&(ye=N(ye,Ae)),Ts.call(this,w,q,ye,He=He||"Identity-H")};var Fo,ll=r.lineWidth||.200025,Cn=C.__private__.getLineWidth=C.getLineWidth=function(){return ll},wt=C.__private__.setLineWidth=C.setLineWidth=function(w){return ll=w,pe(R(J(w))+" w"),this};C.__private__.setLineDash=Tn.API.setLineDash=Tn.API.setLineDashPattern=function(w,q){if(w=w||[],q=q||0,isNaN(q)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(ye){return R(J(ye))}).join(" "),q=R(J(q)),pe("["+w+"] "+q+" d"),this};var ec=C.__private__.getLineHeight=C.getLineHeight=function(){return ht*Fo};C.__private__.getLineHeight=C.getLineHeight=function(){return ht*Fo};var Dl=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(Fo=w),this},Hn=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return Fo};Dl(r.lineHeight);var Kt=C.__private__.getHorizontalCoordinate=function(w){return J(w)},Dn=C.__private__.getVerticalCoordinate=function(w){return H===ce?w:un[M].mediaBox.topRightY-un[M].mediaBox.bottomLeftY-J(w)},bn=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(w){return R(Kt(w))},ri=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(w){return R(Dn(w))},tn=r.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return di(tn)},C.__private__.setStrokeColor=C.setDrawColor=function(w,q,ye,Ae){return tn=yo({ch1:w,ch2:q,ch3:ye,ch4:Ae,pdfColorType:"draw",precision:2}),pe(tn),this};var tc=r.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return di(tc)},C.__private__.setFillColor=C.setFillColor=function(w,q,ye,Ae){return tc=yo({ch1:w,ch2:q,ch3:ye,ch4:Ae,pdfColorType:"fill",precision:2}),pe(tc),this};var Ut=r.textColor||"0 g",Mi=C.__private__.getTextColor=C.getTextColor=function(){return di(Ut)};C.__private__.setTextColor=C.setTextColor=function(w,q,ye,Ae){return Ut=yo({ch1:w,ch2:q,ch3:ye,ch4:Ae,pdfColorType:"text",precision:3}),this};var Ft=r.charSpace,ki=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(Ft||0)};C.__private__.setCharSpace=C.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ft=w,this};var Ea=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(w){var q=C.CapJoinStyles[w];if(q===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ea=q,pe(q+" J"),this};var so=0;C.__private__.setLineJoin=C.setLineJoin=function(w){var q=C.CapJoinStyles[w];if(q===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return so=q,pe(q+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(R(J(w))+" M"),this},C.GState=Yp,C.setGState=function(w){(w=typeof w=="string"?Vt[wn[w]]:Pr(null,w)).equals(Xi)||(pe("/"+w.id+" gs"),Xi=w)};var Pr=function(w,q){if(!w||!wn[w]){var ye=!1;for(var Ae in Vt)if(Vt.hasOwnProperty(Ae)&&Vt[Ae].equals(q)){ye=!0;break}if(ye)q=Vt[Ae];else{var He="GS"+(Object.keys(Vt).length+1).toString(10);Vt[He]=q,q.id=He}return w&&(wn[w]=q.id),Wt.publish("addGState",q),q}};C.addGState=function(w,q){return Pr(w,q),this},C.saveGraphicsState=function(){return pe("q"),rt.push({key:kt,size:ht,color:Ut}),this},C.restoreGraphicsState=function(){pe("Q");var w=rt.pop();return kt=w.key,ht=w.size,Ut=w.color,Xi=null,this},C.setCurrentTransformationMatrix=function(w){return pe(w.toString()+" cm"),this},C.comment=function(w){return pe("#"+w),this};var qo=function(w,q){var ye=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ye},set:function(lt){isNaN(lt)||(ye=parseFloat(lt))}});var Ae=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ae},set:function(lt){isNaN(lt)||(Ae=parseFloat(lt))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(lt){He=lt.toString()}}),this},Ho=function(w,q,ye,Ae){qo.call(this,w,q),this.type="rect";var He=ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(bt){isNaN(bt)||(He=parseFloat(bt))}});var lt=Ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return lt},set:function(bt){isNaN(bt)||(lt=parseFloat(bt))}}),this},Ls=function(){this.page=Un,this.currentPage=M,this.pages=Xe.slice(0),this.pagesContext=un.slice(0),this.x=Gt,this.y=zn,this.matrix=Nn,this.width=Ga(M),this.height=bc(M),this.outputDestination=jt,this.id="",this.objectNumber=-1};Ls.prototype.restore=function(){Un=this.page,M=this.currentPage,un=this.pagesContext,Xe=this.pages,Gt=this.x,zn=this.y,Nn=this.matrix,El(M,this.width),ul(M,this.height),jt=this.outputDestination};var cl=function(w,q,ye,Ae,He){Ao.push(new Ls),Un=M=0,Xe=[],Gt=w,zn=q,Nn=He,ra([ye,Ae])};for(var Ws in C.beginFormObject=function(w,q,ye,Ae,He){return cl(w,q,ye,Ae,He),this},C.endFormObject=function(w){return(function(q){if(go[q])Ao.pop().restore();else{var ye=new Ls,Ae="Xo"+(Object.keys(Zr).length+1).toString(10);ye.id=Ae,go[q]=Ae,Zr[Ae]=ye,Wt.publish("addFormObject",ye),Ao.pop().restore()}})(w),this},C.doFormObject=function(w,q){var ye=Zr[go[w]];return pe("q"),pe(q.toString()+" cm"),pe("/"+ye.id+" Do"),pe("Q"),this},C.getFormObject=function(w){var q=Zr[go[w]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},C.save=function(w,q){return w=w||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(Ju(Da(Ya()),w),typeof Ju.unload=="function"&&Kn.setTimeout&&setTimeout(Ju.unload,911),this):new Promise(function(ye,Ae){try{var He=Ju(Da(Ya()),w);typeof Ju.unload=="function"&&Kn.setTimeout&&setTimeout(Ju.unload,911),ye(He)}catch(lt){Ae(lt.message)}})},Tn.API)Tn.API.hasOwnProperty(Ws)&&(Ws==="events"&&Tn.API.events.length?(function(w,q){var ye,Ae,He;for(He=q.length-1;He!==-1;He--)ye=q[He][0],Ae=q[He][1],w.subscribe.apply(w,[ye].concat(typeof Ae=="function"?[Ae]:Ae))})(Wt,Tn.API.events):C[Ws]=Tn.API[Ws]);function Ga(w){return un[w].mediaBox.topRightX-un[w].mediaBox.bottomLeftX}function El(w,q){un[w].mediaBox.topRightX=q+un[w].mediaBox.bottomLeftX}function bc(w){return un[w].mediaBox.topRightY-un[w].mediaBox.bottomLeftY}function ul(w,q){un[w].mediaBox.topRightY=q+un[w].mediaBox.bottomLeftY}var fn=C.getPageWidth=function(w){return Ga(w=w||M)/Rn},as=C.setPageWidth=function(w,q){El(w,q*Rn)},vi=C.getPageHeight=function(w){return bc(w=w||M)/Rn},Ys=C.setPageHeight=function(w,q){ul(w,q*Rn)};return C.internal={pdfEscape:Yn,getStyle:ao,getFont:Sn,getFontSize:Rt,getCharSpace:ki,getTextColor:Mi,getLineHeight:ec,getLineHeightFactor:Hn,getLineWidth:Cn,write:Pt,getHorizontalCoordinate:Kt,getVerticalCoordinate:Dn,getCoordinateString:bn,getVerticalCoordinateString:ri,collections:{},newObject:ii,newAdditionalObject:$i,newObjectDeferred:Xn,newObjectDeferredBegin:cr,getFilters:ia,putStream:ma,events:Wt,scaleFactor:Rn,pageSize:{getWidth:function(){return fn(M)},setWidth:function(w){as(M,w)},getHeight:function(){return vi(M)},setHeight:function(w){Ys(M,w)}},encryptionOptions:T,encryption:Zn,getEncryptor:function(w){return T!==null?Zn.encryptor(w,0):function(q){return q}},output:al,getNumberOfPages:Hs,get pages(){return Xe},out:pe,f2:k,f3:S,getPageInfo:Cr,getPageInfoByObjId:Ri,getCurrentPageInfo:qr,getPDFVersion:O,Point:qo,Rectangle:Ho,Matrix:Xt,hasHotfix:bi},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return fn(M)},set:function(w){as(M,w)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return vi(M)},set:function(w){Ys(M,w)},enumerable:!0,configurable:!0}),(function(w){for(var q=0,ye=Qt.length;q<ye;q++){var Ae=Ts.call(this,w[q][0],w[q][1],w[q][2],Qt[q][3],!0);D===!1&&(E[Ae]=!0);var He=w[q][0].split("-");Pn({id:Ae,fontName:He[0],fontStyle:He[1]||""})}Wt.publish("addFonts",{fonts:rn,dictionary:xn})}).call(C,Qt),kt="F1",ba(u,o),Wt.publish("initialized"),C}Mf.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Mf.prototype.toHexString=function(r){return r.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Mf.prototype.hexToBytes=function(r){for(var n=[],o=0;o<r.length;o+=2)n.push(String.fromCharCode(parseInt(r.substr(o,2),16)));return n.join("")},Mf.prototype.processOwnerPassword=function(r,n){return A0(k0(n).substr(0,5),r)},Mf.prototype.encryptor=function(r,n){var o=k0(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&n,n>>8&255)).substr(0,10);return function(s){return A0(o,s)}},Yp.prototype.equals=function(r){var n,o="id,objectNumber,equals";if(!r||wr(r)!==wr(this))return!1;var s=0;for(n in this)if(!(o.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!r.hasOwnProperty(n)||this[n]!==r[n])return!1;s++}for(n in r)r.hasOwnProperty(n)&&o.indexOf(n)<0&&s--;return s===0},Tn.API={events:[]},Tn.version="3.0.4";var Uo=Tn.API,M0=1,af=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Df=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},si=function(r){return r.toFixed(2)},Au=function(r){return r.toFixed(5)};Uo.__acroform__={};var ol=function(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r},o2=function(r){return r*M0},Ec=function(r){var n=new xy,o=cn.internal.getHeight(r)||0,s=cn.internal.getWidth(r)||0;return n.BBox=[0,0,Number(si(s)),Number(si(o))],n},z5=Uo.__acroform__.setBit=function(r,n){if(r=r||0,n=n||0,isNaN(r)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<n},P5=Uo.__acroform__.clearBit=function(r,n){if(r=r||0,n=n||0,isNaN(r)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<n)},D5=Uo.__acroform__.getBit=function(r,n){if(isNaN(r)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<n?1:0},Qo=Uo.__acroform__.getBitForPdf=function(r,n){if(isNaN(r)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return D5(r,n-1)},ea=Uo.__acroform__.setBitForPdf=function(r,n){if(isNaN(r)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return z5(r,n-1)},ta=Uo.__acroform__.clearBitForPdf=function(r,n){if(isNaN(r)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return P5(r,n-1)},E5=Uo.__acroform__.calculateCoordinates=function(r,n){var o=n.internal.getHorizontalCoordinate,s=n.internal.getVerticalCoordinate,u=r[0],f=r[1],v=r[2],h=r[3],b={};return b.lowerLeft_X=o(u)||0,b.lowerLeft_Y=s(f+h)||0,b.upperRight_X=o(u+v)||0,b.upperRight_Y=s(f)||0,[Number(si(b.lowerLeft_X)),Number(si(b.lowerLeft_Y)),Number(si(b.upperRight_X)),Number(si(b.upperRight_Y))]},R5=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var n=[],o=r._V||r.DV,s=N0(r,o),u=r.scope.internal.getFont(r.fontName,r.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(r.scope.__private__.encodeColorString(r.color)),n.push("/"+u+" "+si(s.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC");var f=Ec(r);return f.scope=r.scope,f.stream=n.join(`
`),f}},N0=function(r,n){var o=r.fontSize===0?r.maxFontSize:r.fontSize,s={text:"",fontSize:""},u=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");u=r.multiline?u.map(function(k){return k.split(`
`)}):u.map(function(k){return[k]});var f=o,v=cn.internal.getHeight(r)||0;v=v<0?-v:v;var h=cn.internal.getWidth(r)||0;h=h<0?-h:h;var b=function(k,S,J){if(k+1<u.length){var ie=S+" "+u[k+1][0];return Pp(ie,r,J).width<=h-4}return!1};f++;e:for(;f>0;){n="",f--;var x,T,D=Pp("3",r,f).height,E=r.multiline?v-f:(v-D)/2,C=E+=2,K=0,O=0,z=0;if(f<=0){n=`(...) Tj
`,n+="% Width of Text: "+Pp(n,r,f=12).width+", FieldWidth:"+h+`
`;break}for(var V="",ae=0,ce=0;ce<u.length;ce++)if(u.hasOwnProperty(ce)){var H=!1;if(u[ce].length!==1&&z!==u[ce].length-1){if((D+2)*(ae+2)+2>v)continue e;V+=u[ce][z],H=!0,O=ce,ce--}else{V=(V+=u[ce][z]+" ").substr(V.length-1)==" "?V.substr(0,V.length-1):V;var se=parseInt(ce),Q=b(se,V,f),N=ce>=u.length-1;if(Q&&!N){V+=" ",z=0;continue}if(Q||N){if(N)O=se;else if(r.multiline&&(D+2)*(ae+2)+2>v)continue e}else{if(!r.multiline||(D+2)*(ae+2)+2>v)continue e;O=se}}for(var R="",W=K;W<=O;W++){var X=u[W];if(r.multiline){if(W===O){R+=X[z]+" ",z=(z+1)%X.length;continue}if(W===K){R+=X[X.length-1]+" ";continue}}R+=X[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,T=Pp(R,r,f).width,r.textAlign){case"right":x=h-T-2;break;case"center":x=(h-T)/2;break;default:x=2}n+=si(x)+" "+si(C)+` Td
`,n+="("+af(R)+`) Tj
`,n+=-si(x)+` 0 Td
`,C=-(f+2),T=0,K=H?O:O+1,ae++,V=""}break}return s.text=n,s.fontSize=f,s},Pp=function(r,n,o){var s=n.scope.internal.getFont(n.fontName,n.fontStyle),u=n.scope.getStringUnitWidth(r,{font:s,fontSize:parseFloat(o),charSpace:0})*parseFloat(o);return{height:n.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(o),charSpace:0})*parseFloat(o)*1.5,width:u}},M5={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},B5=function(r,n){var o={type:"reference",object:r};n.internal.getPageInfo(r.page).pageContext.annotations.find(function(s){return s.type===o.type&&s.object===o.object})===void 0&&n.internal.getPageInfo(r.page).pageContext.annotations.push(o)},O5=function(r,n){if(n.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(yc.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(M5)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");M0=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new by,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(o){o.internal.events.unsubscribe(o.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete o.internal.acroformPlugin.acroFormDictionaryRoot._eventID,o.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(o){o.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=o.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var u in s)if(s.hasOwnProperty(u)){var f=s[u];f.objId=void 0,f.hasAnnotation&&B5(f,o)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(o){if(o.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");o.internal.write("/AcroForm "+o.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(o){(function(s,u){var f=!s;for(var v in s||(u.internal.newObjectDeferredBegin(u.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),u.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||u.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(v)){var h=s[v],b=[],x=h.Rect;if(h.Rect&&(h.Rect=E5(h.Rect,u)),u.internal.newObjectDeferredBegin(h.objId,!0),h.DA=cn.createDefaultAppearanceStream(h),wr(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(b=h.getKeyValueListForStream()),h.Rect=x,h.hasAppearanceStream&&!h.appearanceStreamContent){var T=R5(h);b.push({key:"AP",value:"<</N "+T+">>"}),u.internal.acroformPlugin.xForms.push(T)}if(h.appearanceStreamContent){var D="";for(var E in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(E)){var C=h.appearanceStreamContent[E];if(D+="/"+E+" ",D+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var v in C)if(C.hasOwnProperty(v)){var K=C[v];typeof K=="function"&&(K=K.call(u,h)),D+="/"+v+" "+K+" ",u.internal.acroformPlugin.xForms.indexOf(K)>=0||u.internal.acroformPlugin.xForms.push(K)}}else typeof(K=C)=="function"&&(K=K.call(u,h)),D+="/"+v+" "+K,u.internal.acroformPlugin.xForms.indexOf(K)>=0||u.internal.acroformPlugin.xForms.push(K);D+=">>"}b.push({key:"AP",value:`<<
`+D+">>"})}u.internal.putStream({additionalKeyValues:b,objectId:h.objId}),u.internal.out("endobj")}f&&(function(O,z){for(var V in O)if(O.hasOwnProperty(V)){var ae=V,ce=O[V];z.internal.newObjectDeferredBegin(ce.objId,!0),wr(ce)==="object"&&typeof ce.putStream=="function"&&ce.putStream(),delete O[ae]}})(u.internal.acroformPlugin.xForms,u)})(o,r)}),r.internal.acroformPlugin.isInitialized=!0}},my=Uo.__acroform__.arrayToPdfArray=function(r,n,o){var s=function(v){return v};if(Array.isArray(r)){for(var u="[",f=0;f<r.length;f++)switch(f!==0&&(u+=" "),wr(r[f])){case"boolean":case"number":case"object":u+=r[f].toString();break;case"string":r[f].substr(0,1)!=="/"?(n!==void 0&&o&&(s=o.internal.getEncryptor(n)),u+="("+af(s(r[f].toString()))+")"):u+=r[f].toString()}return u+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},u0=function(r,n,o){var s=function(u){return u};return n!==void 0&&o&&(s=o.internal.getEncryptor(n)),(r=r||"").toString(),"("+af(s(r))+")"},Rc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Rc.prototype.toString=function(){return this.objId+" 0 R"},Rc.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Rc.prototype.getKeyValueListForStream=function(){var r=[],n=Object.getOwnPropertyNames(this).filter(function(f){return f!="content"&&f!="appearanceStreamContent"&&f!="scope"&&f!="objId"&&f.substring(0,1)!="_"});for(var o in n)if(Object.getOwnPropertyDescriptor(this,n[o]).configurable===!1){var s=n[o],u=this[s];u&&(Array.isArray(u)?r.push({key:s,value:my(u,this.objId,this.scope)}):u instanceof Rc?(u.scope=this.scope,r.push({key:s,value:u.objId+" 0 R"})):typeof u!="function"&&r.push({key:s,value:u}))}return r};var xy=function(){Rc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(o){r=o.trim()},get:function(){return r||null}})};ol(xy,Rc);var by=function(){Rc.call(this);var r,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var o=function(s){return s};return this.scope&&(o=this.scope.internal.getEncryptor(this.objId)),"("+af(o(r))+")"}},set:function(o){r=o}})};ol(by,Rc);var yc=function r(){Rc.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(V){if(isNaN(V))throw new Error('Invalid value "'+V+'" for attribute F supplied.');n=V}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qo(n,3)},set:function(V){V?this.F=ea(n,3):this.F=ta(n,3)}});var o=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return o},set:function(V){if(isNaN(V))throw new Error('Invalid value "'+V+'" for attribute Ff supplied.');o=V}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(V){s=V!==void 0?V:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(V){s[0]=V}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(V){s[1]=V}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(V){s[2]=V}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(V){s[3]=V}});var u="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return u},set:function(V){switch(V){case"/Btn":case"/Tx":case"/Ch":case"/Sig":u=V;break;default:throw new Error('Invalid value "'+V+'" for attribute FT supplied.')}}});var f=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!f||f.length<1){if(this instanceof Gp)return;f="FieldObject"+r.FieldNum++}var V=function(ae){return ae};return this.scope&&(V=this.scope.internal.getEncryptor(this.objId)),"("+af(V(f))+")"},set:function(V){f=V.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return f},set:function(V){f=V}});var v="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return v},set:function(V){v=V}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(V){h=V}});var b=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return b},set:function(V){b=V}});var x=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return x===void 0?50/M0:x},set:function(V){x=V}});var T="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return T},set:function(V){T=V}});var D="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!D||this instanceof Gp||this instanceof ef))return u0(D,this.objId,this.scope)},set:function(V){V=V.toString(),D=V}});var E=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof Wa==0?u0(E,this.objId,this.scope):E},set:function(V){V=V.toString(),E=this instanceof Wa==0?V.substr(0,1)==="("?Df(V.substr(1,V.length-2)):Df(V):V}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wa==1?Df(E.substr(1,E.length-1)):E},set:function(V){V=V.toString(),E=this instanceof Wa==1?"/"+V:V}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(V){this.V=V}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof Wa==0?u0(C,this.objId,this.scope):C},set:function(V){V=V.toString(),C=this instanceof Wa==0?V.substr(0,1)==="("?Df(V.substr(1,V.length-2)):Df(V):V}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wa==1?Df(C.substr(1,C.length-1)):C},set:function(V){V=V.toString(),C=this instanceof Wa==1?"/"+V:V}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var K,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(V){V=!!V,O=V}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(K)return K},set:function(V){K=V}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,1)},set:function(V){V?this.Ff=ea(this.Ff,1):this.Ff=ta(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,2)},set:function(V){V?this.Ff=ea(this.Ff,2):this.Ff=ta(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,3)},set:function(V){V?this.Ff=ea(this.Ff,3):this.Ff=ta(this.Ff,3)}});var z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(z!==null)return z},set:function(V){if([0,1,2].indexOf(V)===-1)throw new Error('Invalid value "'+V+'" for attribute Q supplied.');z=V}}),Object.defineProperty(this,"textAlign",{get:function(){var V;switch(z){case 0:default:V="left";break;case 1:V="center";break;case 2:V="right"}return V},configurable:!0,enumerable:!0,set:function(V){switch(V){case"right":case 2:z=2;break;case"center":case 1:z=1;break;default:z=0}}})};ol(yc,Rc);var Uf=function(){yc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(o){r=o}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return my(n,this.objId,this.scope)},set:function(o){var s,u;u=[],typeof(s=o)=="string"&&(u=(function(f,v,h){h||(h=1);for(var b,x=[];b=v.exec(f);)x.push(b[h]);return x})(s,/\((.*?)\)/g)),n=u}}),this.getOptions=function(){return n},this.setOptions=function(o){n=o,this.sort&&n.sort()},this.addOption=function(o){o=(o=o||"").toString(),n.push(o),this.sort&&n.sort()},this.removeOption=function(o,s){for(s=s||!1,o=(o=o||"").toString();n.indexOf(o)!==-1&&(n.splice(n.indexOf(o),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,18)},set:function(o){o?this.Ff=ea(this.Ff,18):this.Ff=ta(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,19)},set:function(o){this.combo===!0&&(o?this.Ff=ea(this.Ff,19):this.Ff=ta(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,20)},set:function(o){o?(this.Ff=ea(this.Ff,20),n.sort()):this.Ff=ta(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,22)},set:function(o){o?this.Ff=ea(this.Ff,22):this.Ff=ta(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,23)},set:function(o){o?this.Ff=ea(this.Ff,23):this.Ff=ta(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,27)},set:function(o){o?this.Ff=ea(this.Ff,27):this.Ff=ta(this.Ff,27)}}),this.hasAppearanceStream=!1};ol(Uf,yc);var Ff=function(){Uf.call(this),this.fontName="helvetica",this.combo=!1};ol(Ff,Uf);var qf=function(){Ff.call(this),this.combo=!0};ol(qf,Ff);var Ip=function(){qf.call(this),this.edit=!0};ol(Ip,qf);var Wa=function(){yc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,15)},set:function(o){o?this.Ff=ea(this.Ff,15):this.Ff=ta(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,16)},set:function(o){o?this.Ff=ea(this.Ff,16):this.Ff=ta(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,17)},set:function(o){o?this.Ff=ea(this.Ff,17):this.Ff=ta(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,26)},set:function(o){o?this.Ff=ea(this.Ff,26):this.Ff=ta(this.Ff,26)}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};if(this.scope&&(o=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var s,u=[];for(s in u.push("<<"),n)u.push("/"+s+" ("+af(o(n[s]))+")");return u.push(">>"),u.join(`
`)}},set:function(o){wr(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(o){r="/"+o}})};ol(Wa,yc);var Up=function(){Wa.call(this),this.pushButton=!0};ol(Up,Wa);var Hf=function(){Wa.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(n){r=n!==void 0?n:[]}})};ol(Hf,Wa);var Gp=function(){var r,n;yc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(u){r=u}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(u){n=u}});var o,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var u=function(h){return h};this.scope&&(u=this.scope.internal.getEncryptor(this.objId));var f,v=[];for(f in v.push("<<"),s)v.push("/"+f+" ("+af(u(s[f]))+")");return v.push(">>"),v.join(`
`)},set:function(u){wr(u)==="object"&&(s=u)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(u){typeof u=="string"&&(s.CA=u)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return o.substr(1,o.length-1)},set:function(u){o="/"+u}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=cn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ol(Gp,yc),Hf.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var o=this.Kids[n];o.appearanceStreamContent=r.createAppearanceStream(o.optionName),o.caption=r.getCA()}},Hf.prototype.createOption=function(r){var n=new Gp;return n.Parent=this,n.optionName=r,this.Kids.push(n),I5.call(this.scope,n),n};var Fp=function(){Wa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=cn.CheckBox.createAppearanceStream()};ol(Fp,Wa);var ef=function(){yc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,13)},set:function(n){n?this.Ff=ea(this.Ff,13):this.Ff=ta(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,21)},set:function(n){n?this.Ff=ea(this.Ff,21):this.Ff=ta(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,23)},set:function(n){n?this.Ff=ea(this.Ff,23):this.Ff=ta(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,24)},set:function(n){n?this.Ff=ea(this.Ff,24):this.Ff=ta(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,25)},set:function(n){n?this.Ff=ea(this.Ff,25):this.Ff=ta(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,26)},set:function(n){n?this.Ff=ea(this.Ff,26):this.Ff=ta(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(n){Number.isInteger(n)&&(r=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ol(ef,yc);var qp=function(){ef.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qo(this.Ff,14)},set:function(r){r?this.Ff=ea(this.Ff,14):this.Ff=ta(this.Ff,14)}}),this.password=!0};ol(qp,ef);var cn={CheckBox:{createAppearanceStream:function(){return{N:{On:cn.CheckBox.YesNormal},D:{On:cn.CheckBox.YesPushDown,Off:cn.CheckBox.OffPushDown}}},YesPushDown:function(r){var n=Ec(r);n.scope=r.scope;var o=[],s=r.scope.internal.getFont(r.fontName,r.fontStyle).id,u=r.scope.__private__.encodeColorString(r.color),f=N0(r,r.caption);return o.push("0.749023 g"),o.push("0 0 "+si(cn.internal.getWidth(r))+" "+si(cn.internal.getHeight(r))+" re"),o.push("f"),o.push("BMC"),o.push("q"),o.push("0 0 1 rg"),o.push("/"+s+" "+si(f.fontSize)+" Tf "+u),o.push("BT"),o.push(f.text),o.push("ET"),o.push("Q"),o.push("EMC"),n.stream=o.join(`
`),n},YesNormal:function(r){var n=Ec(r);n.scope=r.scope;var o=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color),u=[],f=cn.internal.getHeight(r),v=cn.internal.getWidth(r),h=N0(r,r.caption);return u.push("1 g"),u.push("0 0 "+si(v)+" "+si(f)+" re"),u.push("f"),u.push("q"),u.push("0 0 1 rg"),u.push("0 0 "+si(v-1)+" "+si(f-1)+" re"),u.push("W"),u.push("n"),u.push("0 g"),u.push("BT"),u.push("/"+o+" "+si(h.fontSize)+" Tf "+s),u.push(h.text),u.push("ET"),u.push("Q"),n.stream=u.join(`
`),n},OffPushDown:function(r){var n=Ec(r);n.scope=r.scope;var o=[];return o.push("0.749023 g"),o.push("0 0 "+si(cn.internal.getWidth(r))+" "+si(cn.internal.getHeight(r))+" re"),o.push("f"),n.stream=o.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(r){var n={D:{Off:cn.RadioButton.Circle.OffPushDown},N:{}};return n.N[r]=cn.RadioButton.Circle.YesNormal,n.D[r]=cn.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(r){var n=Ec(r);n.scope=r.scope;var o=[],s=cn.internal.getWidth(r)<=cn.internal.getHeight(r)?cn.internal.getWidth(r)/4:cn.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var u=cn.internal.Bezier_C,f=Number((s*u).toFixed(5));return o.push("q"),o.push("1 0 0 1 "+Au(cn.internal.getWidth(r)/2)+" "+Au(cn.internal.getHeight(r)/2)+" cm"),o.push(s+" 0 m"),o.push(s+" "+f+" "+f+" "+s+" 0 "+s+" c"),o.push("-"+f+" "+s+" -"+s+" "+f+" -"+s+" 0 c"),o.push("-"+s+" -"+f+" -"+f+" -"+s+" 0 -"+s+" c"),o.push(f+" -"+s+" "+s+" -"+f+" "+s+" 0 c"),o.push("f"),o.push("Q"),n.stream=o.join(`
`),n},YesPushDown:function(r){var n=Ec(r);n.scope=r.scope;var o=[],s=cn.internal.getWidth(r)<=cn.internal.getHeight(r)?cn.internal.getWidth(r)/4:cn.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var u=Number((2*s).toFixed(5)),f=Number((u*cn.internal.Bezier_C).toFixed(5)),v=Number((s*cn.internal.Bezier_C).toFixed(5));return o.push("0.749023 g"),o.push("q"),o.push("1 0 0 1 "+Au(cn.internal.getWidth(r)/2)+" "+Au(cn.internal.getHeight(r)/2)+" cm"),o.push(u+" 0 m"),o.push(u+" "+f+" "+f+" "+u+" 0 "+u+" c"),o.push("-"+f+" "+u+" -"+u+" "+f+" -"+u+" 0 c"),o.push("-"+u+" -"+f+" -"+f+" -"+u+" 0 -"+u+" c"),o.push(f+" -"+u+" "+u+" -"+f+" "+u+" 0 c"),o.push("f"),o.push("Q"),o.push("0 g"),o.push("q"),o.push("1 0 0 1 "+Au(cn.internal.getWidth(r)/2)+" "+Au(cn.internal.getHeight(r)/2)+" cm"),o.push(s+" 0 m"),o.push(s+" "+v+" "+v+" "+s+" 0 "+s+" c"),o.push("-"+v+" "+s+" -"+s+" "+v+" -"+s+" 0 c"),o.push("-"+s+" -"+v+" -"+v+" -"+s+" 0 -"+s+" c"),o.push(v+" -"+s+" "+s+" -"+v+" "+s+" 0 c"),o.push("f"),o.push("Q"),n.stream=o.join(`
`),n},OffPushDown:function(r){var n=Ec(r);n.scope=r.scope;var o=[],s=cn.internal.getWidth(r)<=cn.internal.getHeight(r)?cn.internal.getWidth(r)/4:cn.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var u=Number((2*s).toFixed(5)),f=Number((u*cn.internal.Bezier_C).toFixed(5));return o.push("0.749023 g"),o.push("q"),o.push("1 0 0 1 "+Au(cn.internal.getWidth(r)/2)+" "+Au(cn.internal.getHeight(r)/2)+" cm"),o.push(u+" 0 m"),o.push(u+" "+f+" "+f+" "+u+" 0 "+u+" c"),o.push("-"+f+" "+u+" -"+u+" "+f+" -"+u+" 0 c"),o.push("-"+u+" -"+f+" -"+f+" -"+u+" 0 -"+u+" c"),o.push(f+" -"+u+" "+u+" -"+f+" "+u+" 0 c"),o.push("f"),o.push("Q"),n.stream=o.join(`
`),n}},Cross:{createAppearanceStream:function(r){var n={D:{Off:cn.RadioButton.Cross.OffPushDown},N:{}};return n.N[r]=cn.RadioButton.Cross.YesNormal,n.D[r]=cn.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(r){var n=Ec(r);n.scope=r.scope;var o=[],s=cn.internal.calculateCross(r);return o.push("q"),o.push("1 1 "+si(cn.internal.getWidth(r)-2)+" "+si(cn.internal.getHeight(r)-2)+" re"),o.push("W"),o.push("n"),o.push(si(s.x1.x)+" "+si(s.x1.y)+" m"),o.push(si(s.x2.x)+" "+si(s.x2.y)+" l"),o.push(si(s.x4.x)+" "+si(s.x4.y)+" m"),o.push(si(s.x3.x)+" "+si(s.x3.y)+" l"),o.push("s"),o.push("Q"),n.stream=o.join(`
`),n},YesPushDown:function(r){var n=Ec(r);n.scope=r.scope;var o=cn.internal.calculateCross(r),s=[];return s.push("0.749023 g"),s.push("0 0 "+si(cn.internal.getWidth(r))+" "+si(cn.internal.getHeight(r))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+si(cn.internal.getWidth(r)-2)+" "+si(cn.internal.getHeight(r)-2)+" re"),s.push("W"),s.push("n"),s.push(si(o.x1.x)+" "+si(o.x1.y)+" m"),s.push(si(o.x2.x)+" "+si(o.x2.y)+" l"),s.push(si(o.x4.x)+" "+si(o.x4.y)+" m"),s.push(si(o.x3.x)+" "+si(o.x3.y)+" l"),s.push("s"),s.push("Q"),n.stream=s.join(`
`),n},OffPushDown:function(r){var n=Ec(r);n.scope=r.scope;var o=[];return o.push("0.749023 g"),o.push("0 0 "+si(cn.internal.getWidth(r))+" "+si(cn.internal.getHeight(r))+" re"),o.push("f"),n.stream=o.join(`
`),n}}},createDefaultAppearanceStream:function(r){var n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,o=r.scope.__private__.encodeColorString(r.color);return"/"+n+" "+r.fontSize+" Tf "+o}};cn.internal={Bezier_C:.551915024494,calculateCross:function(r){var n=cn.internal.getWidth(r),o=cn.internal.getHeight(r),s=Math.min(n,o);return{x1:{x:(n-s)/2,y:(o-s)/2+s},x2:{x:(n-s)/2+s,y:(o-s)/2},x3:{x:(n-s)/2,y:(o-s)/2},x4:{x:(n-s)/2+s,y:(o-s)/2+s}}}},cn.internal.getWidth=function(r){var n=0;return wr(r)==="object"&&(n=o2(r.Rect[2])),n},cn.internal.getHeight=function(r){var n=0;return wr(r)==="object"&&(n=o2(r.Rect[3])),n};var I5=Uo.addField=function(r){if(O5(this,r),!(r instanceof yc))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=r).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Uo.AcroFormChoiceField=Uf,Uo.AcroFormListBox=Ff,Uo.AcroFormComboBox=qf,Uo.AcroFormEditBox=Ip,Uo.AcroFormButton=Wa,Uo.AcroFormPushButton=Up,Uo.AcroFormRadioButton=Hf,Uo.AcroFormCheckBox=Fp,Uo.AcroFormTextField=ef,Uo.AcroFormPasswordField=qp,Uo.AcroFormAppearance=cn,Uo.AcroForm={ChoiceField:Uf,ListBox:Ff,ComboBox:qf,EditBox:Ip,Button:Wa,PushButton:Up,RadioButton:Hf,CheckBox:Fp,TextField:ef,PasswordField:qp,Appearance:cn},Tn.AcroForm={ChoiceField:Uf,ListBox:Ff,ComboBox:qf,EditBox:Ip,Button:Wa,PushButton:Up,RadioButton:Hf,CheckBox:Fp,TextField:ef,PasswordField:qp,Appearance:cn};Tn.AcroForm;function vy(r){return r.reduce(function(n,o,s){return n[o]=s,n},{})}(function(r){var n="addImage_";r.__addimage__={};var o="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},u=r.__addimage__.getImageFileTypeByImageData=function(k,S){var J,ie,ge,$,te,he=o;if((S=S||o)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(Q(k))for(te in s)for(ge=s[te],J=0;J<ge.length;J+=1){for($=!0,ie=0;ie<ge[J].length;ie+=1)if(ge[J][ie]!==void 0&&ge[J][ie]!==k[ie]){$=!1;break}if($===!0){he=te;break}}else for(te in s)for(ge=s[te],J=0;J<ge.length;J+=1){for($=!0,ie=0;ie<ge[J].length;ie+=1)if(ge[J][ie]!==void 0&&ge[J][ie]!==k.charCodeAt(ie)){$=!1;break}if($===!0){he=te;break}}return he===o&&S!==o&&(he=S),he},f=function k(S){for(var J=this.internal.write,ie=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:S.width}),$.push({key:"Height",value:S.height}),S.colorSpace===V.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===V.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var te="",he=0,je=S.transparency.length;he<je;he++)te+=S.transparency[he]+" "+S.transparency[he]+" ";$.push({key:"Mask",value:"["+te+"]"})}S.sMask!==void 0&&$.push({key:"SMask",value:S.objectId+1+" 0 R"});var be=S.filter!==void 0?["/"+S.filter]:void 0;if(ie({data:S.data,additionalKeyValues:$,alreadyAppliedFilters:be,objectId:S.objectId}),J("endobj"),"sMask"in S&&S.sMask!==void 0){var F,A=(F=S.sMaskBitsPerComponent)!==null&&F!==void 0?F:S.bitsPerComponent,M={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:A,data:S.sMask};"filter"in S&&(M.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(A," /Columns ").concat(S.width),M.filter=S.filter),k.call(this,M)}if(S.colorSpace===V.INDEXED){var B=this.internal.newObject();ie({data:R(new Uint8Array(S.palette)),objectId:B}),J("endobj")}},v=function(){var k=this.internal.collections[n+"images"];for(var S in k)f.call(this,k[S])},h=function(){var k,S=this.internal.collections[n+"images"],J=this.internal.write;for(var ie in S)J("/I"+(k=S[ie]).index,k.objectId,"0","R")},b=function(){this.internal.collections[n+"images"]||(this.internal.collections[n+"images"]={},this.internal.events.subscribe("putResources",v),this.internal.events.subscribe("putXobjectDict",h))},x=function(){var k=this.internal.collections[n+"images"];return b.call(this),k},T=function(){return Object.keys(this.internal.collections[n+"images"]).length},D=function(k){return typeof r["process"+k.toUpperCase()]=="function"},E=function(k){return wr(k)==="object"&&k.nodeType===1},C=function(k,S){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var J=""+k.getAttribute("src");if(J.indexOf("data:image/")===0)return Op(unescape(J).split("base64,").pop());var ie=r.loadFile(J,!0);if(ie!==void 0)return ie}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var ge;switch(S){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return Op(k.toDataURL(ge,1).split("base64,").pop())}},K=function(k){var S=this.internal.collections[n+"images"];if(S){for(var J in S)if(k===S[J].alias)return S[J]}},O=function(k,S,J){return k||S||(k=-96,S=-96),k<0&&(k=-1*J.width*72/k/this.internal.scaleFactor),S<0&&(S=-1*J.height*72/S/this.internal.scaleFactor),k===0&&(k=S*J.width/J.height),S===0&&(S=k*J.height/J.width),[k,S]},z=function(k,S,J,ie,ge,$){var te=O.call(this,J,ie,ge),he=this.internal.getCoordinateString,je=this.internal.getVerticalCoordinateString,be=x.call(this);if(J=te[0],ie=te[1],be[ge.index]=ge,$){$*=Math.PI/180;var F=Math.cos($),A=Math.sin($),M=function(de){return de.toFixed(4)},B=[M(F),M(A),M(-1*A),M(F),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,he(k),je(S+ie),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([he(J),"0","0",he(ie),"0","0","cm"].join(" "))):this.internal.write([he(J),"0","0",he(ie),he(k),je(S+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},V=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ae=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ce=r.__addimage__.sHashCode=function(k){var S,J,ie=0;if(typeof k=="string")for(J=k.length,S=0;S<J;S++)ie=(ie<<5)-ie+k.charCodeAt(S),ie|=0;else if(Q(k))for(J=k.byteLength/2,S=0;S<J;S++)ie=(ie<<5)-ie+k[S],ie|=0;return ie},H=r.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var S=!0;return k.length===0&&(S=!1),k.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(S=!1),S},se=r.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var S=k.indexOf(",");return S<0?null:k.substring(0,S).trim().endsWith("base64")?k.substring(S+1):null};r.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var Q=r.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},N=r.__addimage__.binaryStringToUint8Array=function(k){for(var S=k.length,J=new Uint8Array(S),ie=0;ie<S;ie++)J[ie]=k.charCodeAt(ie);return J},R=r.__addimage__.arrayBufferToBinaryString=function(k){for(var S="",J=Q(k)?k:new Uint8Array(k),ie=0;ie<J.length;ie+=8192)S+=String.fromCharCode.apply(null,J.subarray(ie,ie+8192));return S};r.addImage=function(){var k,S,J,ie,ge,$,te,he,je;if(typeof arguments[1]=="number"?(S=o,J=arguments[1],ie=arguments[2],ge=arguments[3],$=arguments[4],te=arguments[5],he=arguments[6],je=arguments[7]):(S=arguments[1],J=arguments[2],ie=arguments[3],ge=arguments[4],$=arguments[5],te=arguments[6],he=arguments[7],je=arguments[8]),wr(k=arguments[0])==="object"&&!E(k)&&"imageData"in k){var be=k;k=be.imageData,S=be.format||S||o,J=be.x||J||0,ie=be.y||ie||0,ge=be.w||be.width||ge,$=be.h||be.height||$,te=be.alias||te,he=be.compression||he,je=be.rotation||be.angle||je}var F=this.internal.getFilters();if(he===void 0&&F.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(J)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");b.call(this);var A=W.call(this,k,S,te,he);return z.call(this,J,ie,ge,$,A,je),this};var W=function(k,S,J,ie){var ge,$,te;if(typeof k=="string"&&u(k)===o){k=unescape(k);var he=X(k,!1);(he!==""||(he=r.loadFile(k,!0))!==void 0)&&(k=he)}if(E(k)&&(k=C(k,S)),S=u(k,S),!D(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((te=J)==null||te.length===0)&&(J=(function(je){return typeof je=="string"||Q(je)?ce(je):Q(je.data)?ce(je.data):null})(k)),(ge=K.call(this,J))||(k instanceof Uint8Array||S==="RGBA"||($=k,k=N(k)),ge=this["process"+S.toUpperCase()](k,T.call(this),J,(function(je){return je&&typeof je=="string"&&(je=je.toUpperCase()),je in r.image_compression?je:ae.NONE})(ie),$)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},X=r.__addimage__.convertBase64ToBinaryString=function(k,S){S=typeof S!="boolean"||S;var J,ie="";if(typeof k=="string"){var ge;J=(ge=se(k))!==null&&ge!==void 0?ge:k;try{ie=Op(J)}catch($){if(S)throw H(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};r.getImageProperties=function(k){var S,J,ie="";if(E(k)&&(k=C(k)),typeof k=="string"&&u(k)===o&&((ie=X(k,!1))===""&&(ie=r.loadFile(k)||""),k=ie),J=u(k),!D(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(k instanceof Uint8Array||(k=N(k)),!(S=this["process"+J.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=J,S}})(Tn.API),(function(r){var n=function(o){if(o!==void 0&&o!="")return!0};Tn.API.events.push(["addPage",function(o){this.internal.getPageInfo(o.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(o){for(var s,u,f,v=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,b=this.internal.getPageInfoByObjId(o.objId),x=o.pageContext.annotations,T=!1,D=0;D<x.length&&!T;D++)switch((s=x[D]).type){case"link":(n(s.options.url)||n(s.options.pageNumber))&&(T=!0);break;case"reference":case"text":case"freetext":T=!0}if(T!=0){this.internal.write("/Annots [");for(var E=0;E<x.length;E++){s=x[E];var C=this.internal.pdfEscape,K=this.internal.getEncryptor(o.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),z=this.internal.newAdditionalObject(),V=this.internal.getEncryptor(O.objId),ae=s.title||"Note";f="<</Type /Annot /Subtype /Text "+(u="/Rect ["+v(s.bounds.x)+" "+h(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w)+" "+h(s.bounds.y)+"] ")+"/Contents ("+C(V(s.contents))+")",f+=" /Popup "+z.objId+" 0 R",f+=" /P "+b.objId+" 0 R",f+=" /T ("+C(V(ae))+") >>",O.content=f;var ce=O.objId+" 0 R";f="<</Type /Annot /Subtype /Popup "+(u="/Rect ["+v(s.bounds.x+30)+" "+h(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w+30)+" "+h(s.bounds.y)+"] ")+" /Parent "+ce,s.open&&(f+=" /Open true"),f+=" >>",z.content=f,this.internal.write(O.objId,"0 R",z.objId,"0 R");break;case"freetext":u="/Rect ["+v(s.bounds.x)+" "+h(s.bounds.y)+" "+v(s.bounds.x+s.bounds.w)+" "+h(s.bounds.y+s.bounds.h)+"] ";var H=s.color||"#000000";f="<</Type /Annot /Subtype /FreeText "+u+"/Contents ("+C(K(s.contents))+")",f+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+H+")",f+=" /Border [0 0 0]",f+=" >>",this.internal.write(f);break;case"link":if(s.options.name){var se=this.annotations._nameMap[s.options.name];s.options.pageNumber=se.page,s.options.top=se.y}else s.options.top||(s.options.top=0);if(u="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",f="",s.options.url)f="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /A <</S /URI /URI ("+C(K(s.options.url))+") >>";else if(s.options.pageNumber)switch(f="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":f+=" /Fit]";break;case"FitH":f+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,f+=" /FitV "+s.options.left+"]";break;default:var Q=h(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),f+=" /XYZ "+s.options.left+" "+Q+" "+s.options.zoom+"]"}f!=""&&(f+=" >>",this.internal.write(f))}}this.internal.write("]")}}]),r.createAnnotation=function(o){var s=this.internal.getCurrentPageInfo();switch(o.type){case"link":this.link(o.bounds.x,o.bounds.y,o.bounds.w,o.bounds.h,o);break;case"text":case"freetext":s.pageContext.annotations.push(o)}},r.link=function(o,s,u,f,v){var h=this.internal.getCurrentPageInfo(),b=this.internal.getCoordinateString,x=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:b(o),y:x(s),w:b(o+u),h:x(s+f)},options:v,type:"link"})},r.textWithLink=function(o,s,u,f){var v,h,b=this.getTextWidth(o),x=this.internal.getLineHeight()/this.internal.scaleFactor;if(f.maxWidth!==void 0){h=f.maxWidth;var T=this.splitTextToSize(o,h).length;v=Math.ceil(x*T)}else h=b,v=x;return this.text(o,s,u,f),u+=.2*x,f.align==="center"&&(s-=b/2),f.align==="right"&&(s-=b),this.link(s,u-x,h,v,f),b},r.getTextWidth=function(o){var s=this.internal.getFontSize();return this.getStringUnitWidth(o)*s/this.internal.scaleFactor}})(Tn.API),(function(r){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},o={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},u=[1570,1571,1573,1575];r.__arabicParser__={};var f=r.__arabicParser__.isInArabicSubstitutionA=function(O){return n[O.charCodeAt(0)]!==void 0},v=r.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},h=r.__arabicParser__.isArabicEndLetter=function(O){return v(O)&&f(O)&&n[O.charCodeAt(0)].length<=2},b=r.__arabicParser__.isArabicAlfLetter=function(O){return v(O)&&u.indexOf(O.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return v(O)&&f(O)&&n[O.charCodeAt(0)].length>=1};var x=r.__arabicParser__.arabicLetterHasFinalForm=function(O){return v(O)&&f(O)&&n[O.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(O){return v(O)&&f(O)&&n[O.charCodeAt(0)].length>=3};var T=r.__arabicParser__.arabicLetterHasMedialForm=function(O){return v(O)&&f(O)&&n[O.charCodeAt(0)].length==4},D=r.__arabicParser__.resolveLigatures=function(O){var z=0,V=o,ae="",ce=0;for(z=0;z<O.length;z+=1)V[O.charCodeAt(z)]!==void 0?(ce++,typeof(V=V[O.charCodeAt(z)])=="number"&&(ae+=String.fromCharCode(V),V=o,ce=0),z===O.length-1&&(V=o,ae+=O.charAt(z-(ce-1)),z-=ce-1,ce=0)):(V=o,ae+=O.charAt(z-ce),z-=ce,ce=0);return ae};r.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&s[O.charCodeAt(0)]!==void 0};var E=r.__arabicParser__.getCorrectForm=function(O,z,V){return v(O)?f(O)===!1?-1:!x(O)||!v(z)&&!v(V)||!v(V)&&h(z)||h(O)&&!v(z)||h(O)&&b(z)||h(O)&&h(z)?0:T(O)&&v(z)&&!h(z)&&v(V)&&x(V)?3:h(O)||!v(V)?1:2:-1},C=function(O){var z=0,V=0,ae=0,ce="",H="",se="",Q=(O=O||"").split("\\s+"),N=[];for(z=0;z<Q.length;z+=1){for(N.push(""),V=0;V<Q[z].length;V+=1)ce=Q[z][V],H=Q[z][V-1],se=Q[z][V+1],v(ce)?(ae=E(ce,H,se),N[z]+=ae!==-1?String.fromCharCode(n[ce.charCodeAt(0)][ae]):ce):N[z]+=ce;N[z]=D(N[z])}return N.join(" ")},K=r.__arabicParser__.processArabic=r.processArabic=function(){var O,z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,V=[];if(Array.isArray(z)){var ae=0;for(V=[],ae=0;ae<z.length;ae+=1)Array.isArray(z[ae])?V.push([C(z[ae][0]),z[ae][1],z[ae][2]]):V.push([C(z[ae])]);O=V}else O=C(z);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};r.events.push(["preProcessText",K])})(Tn.API),Tn.API.autoPrint=function(r){var n;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})),this},(function(r){var n=function(){var o=void 0;Object.defineProperty(this,"pdf",{get:function(){return o},set:function(h){o=h}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(h){s=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var u=300;Object.defineProperty(this,"height",{get:function(){return u},set:function(h){u=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=u+1)}});var f=[];Object.defineProperty(this,"childNodes",{get:function(){return f},set:function(h){f=h}});var v={};Object.defineProperty(this,"style",{get:function(){return v},set:function(h){v=h}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(o,s){var u;if((o=o||"2d")!=="2d")return null;for(u in s)this.pdf.context2d.hasOwnProperty(u)&&(this.pdf.context2d[u]=s[u]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])})(Tn.API),(function(r){var n={left:0,top:0,bottom:0,right:0},o=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),u.call(this))},u=function(){this.internal.__cell__.lastCell=new f,this.internal.__cell__.pages=1},f=function(){var b=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return b},set:function(O){b=O}});var x=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return x},set:function(O){x=O}});var T=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return T},set:function(O){T=O}});var D=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return D},set:function(O){D=O}});var E=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return E},set:function(O){E=O}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(O){C=O}});var K=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return K},set:function(O){K=O}}),this};f.prototype.clone=function(){return new f(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},f.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(b){return s.call(this),this.internal.__cell__.headerFunction=typeof b=="function"?b:void 0,this},r.getTextDimensions=function(b,x){s.call(this);var T=(x=x||{}).fontSize||this.getFontSize(),D=x.font||this.getFont(),E=x.scaleFactor||this.internal.scaleFactor,C=0,K=0,O=0,z=this;if(!Array.isArray(b)&&typeof b!="string"){if(typeof b!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");b=String(b)}var V=x.maxWidth;V>0?typeof b=="string"?b=this.splitTextToSize(b,V):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(ce,H){return ce.concat(z.splitTextToSize(H,V))},[])):b=Array.isArray(b)?b:[b];for(var ae=0;ae<b.length;ae++)C<(O=this.getStringUnitWidth(b[ae],{font:D})*T)&&(C=O);return C!==0&&(K=b.length),{w:C/=E,h:Math.max((K*T*this.getLineHeightFactor()-T*(this.getLineHeightFactor()-1))/E,0)}},r.cellAddPage=function(){s.call(this),this.addPage();var b=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new f(b.left,b.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var v=r.cell=function(){var b;b=arguments[0]instanceof f?arguments[0]:new f(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var x=this.internal.__cell__.lastCell,T=this.internal.__cell__.padding,D=this.internal.__cell__.margins||n,E=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return x.lineNumber!==void 0&&(x.lineNumber===b.lineNumber?(b.x=(x.x||0)+(x.width||0),b.y=x.y||0):x.y+x.height+b.height+D.bottom>this.getPageHeight()?(this.cellAddPage(),b.y=D.top,C&&E&&(this.printHeaderRow(b.lineNumber,!0),b.y+=E[0].height)):b.y=x.y+x.height||b.y),b.text[0]!==void 0&&(this.rect(b.x,b.y,b.width,b.height,o===!0?"FD":void 0),b.align==="right"?this.text(b.text,b.x+b.width-T,b.y+T,{align:"right",baseline:"top"}):b.align==="center"?this.text(b.text,b.x+b.width/2,b.y+T,{align:"center",baseline:"top",maxWidth:b.width-T-T}):this.text(b.text,b.x+T,b.y+T,{align:"left",baseline:"top",maxWidth:b.width-T-T})),this.internal.__cell__.lastCell=b,this};r.table=function(b,x,T,D,E){if(s.call(this),!T)throw new Error("No data for PDF table.");var C,K,O,z,V=[],ae=[],ce=[],H={},se={},Q=[],N=[],R=(E=E||{}).autoSize||!1,W=E.printHeaders!==!1,X=E.css&&E.css["font-size"]!==void 0?16*E.css["font-size"]:E.fontSize||12,k=E.margins||Object.assign({width:this.getPageWidth()},n),S=typeof E.padding=="number"?E.padding:3,J=E.headerBackgroundColor||"#c8c8c8",ie=E.headerTextColor||"#000";if(u.call(this),this.internal.__cell__.printHeaders=W,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=X,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=ie,this.setFontSize(X),D==null)ae=V=Object.keys(T[0]),ce=V.map(function(){return"left"});else if(Array.isArray(D)&&wr(D[0])==="object")for(V=D.map(function(be){return be.name}),ae=D.map(function(be){return be.prompt||be.name||""}),ce=D.map(function(be){return be.align||"left"}),C=0;C<D.length;C+=1)se[D[C].name]=.7499990551181103*D[C].width;else Array.isArray(D)&&typeof D[0]=="string"&&(ae=V=D,ce=V.map(function(){return"left"}));if(R||Array.isArray(D)&&typeof D[0]=="string")for(C=0;C<V.length;C+=1){for(H[z=V[C]]=T.map(function(be){return be[z]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(ae[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),K=H[z],this.setFont(void 0,"normal"),O=0;O<K.length;O+=1)Q.push(this.getTextDimensions(K[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[z]=Math.max.apply(null,Q)+S+S,Q=[]}if(W){var ge={};for(C=0;C<V.length;C+=1)ge[V[C]]={},ge[V[C]].text=ae[C],ge[V[C]].align=ce[C];var $=h.call(this,ge,se);N=V.map(function(be){return new f(b,x,se[be],$,ge[be].text,void 0,ge[be].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var te=D.reduce(function(be,F){return be[F.name]=F.align,be},{});for(C=0;C<T.length;C+=1){"rowStart"in E&&E.rowStart instanceof Function&&E.rowStart({row:C,data:T[C]},this);var he=h.call(this,T[C],se);for(O=0;O<V.length;O+=1){var je=T[C][V[O]];"cellStart"in E&&E.cellStart instanceof Function&&E.cellStart({row:C,col:O,data:je},this),v.call(this,new f(b,x,se[V[O]],he,je,C+2,te[V[O]]))}}return this.internal.__cell__.table_x=b,this.internal.__cell__.table_y=x,this};var h=function(b,x){var T=this.internal.__cell__.padding,D=this.internal.__cell__.table_font_size,E=this.internal.scaleFactor;return Object.keys(b).map(function(C){var K=b[C];return this.splitTextToSize(K.hasOwnProperty("text")?K.text:K,x[C]-T-T)},this).map(function(C){return this.getLineHeightFactor()*C.length*D/E+T+T},this).reduce(function(C,K){return Math.max(C,K)},0)};r.setTableHeaderRow=function(b){s.call(this),this.internal.__cell__.tableHeaderRow=b},r.printHeaderRow=function(b,x){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var T;if(o=!0,typeof this.internal.__cell__.headerFunction=="function"){var D=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new f(D[0],D[1],D[2],D[3],void 0,-1)}this.setFont(void 0,"bold");for(var E=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){T=this.internal.__cell__.tableHeaderRow[C].clone(),x&&(T.y=this.internal.__cell__.margins.top||0,E.push(T)),T.lineNumber=b;var K=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),v.call(this,T),this.setTextColor(K)}E.length>0&&this.setTableHeaderRow(E),this.setFont(void 0,"normal"),o=!1}})(Tn.API);var wy={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Sy=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_0=vy(Sy),Cy=[100,200,300,400,500,600,700,800,900],U5=vy(Cy);function f0(r){var n=r.family.replace(/"|'/g,"").toLowerCase(),o=(function(f){return wy[f=f||"normal"]?f:"normal"})(r.style),s=(function(f){return f?typeof f=="number"?f>=100&&f<=900&&f%100==0?f:400:/^\d00$/.test(f)?parseInt(f):f==="bold"?700:400:400})(r.weight),u=(function(f){return typeof _0[f=f||"normal"]=="number"?f:"normal"})(r.stretch);return{family:n,style:o,weight:s,stretch:u,src:r.src||[],ref:r.ref||{name:n,style:[u,o,s].join(" ")}}}function a2(r,n,o,s){var u;for(u=o;u>=0&&u<n.length;u+=s)if(r[n[u]])return r[n[u]];for(u=o;u>=0&&u<n.length;u-=s)if(r[n[u]])return r[n[u]]}var F5={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},s2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function l2(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function c2(r){return r.trimLeft()}function q5(r,n){for(var o=0;o<r.length;){if(r.charAt(o)===n)return[r.substring(0,o),r.substring(o+1)];o+=1}return null}function H5(r){var n=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],r.substring(n[0].length)]}var Dp,u2,f2,Ef,Ep,d2,p2,h2,d0=["times"];function g2(r,n,o,s,u){var f=4,v=m2;switch(u){case Tn.API.image_compression.FAST:f=1,v=y2;break;case Tn.API.image_compression.MEDIUM:f=6,v=x2;break;case Tn.API.image_compression.SLOW:f=9,v=b2}r=(function(b,x,T,D){for(var E,C=b.length/x,K=new Uint8Array(b.length+C),O=[V5,y2,m2,x2,b2],z=0;z<C;z+=1){var V=z*x,ae=b.subarray(V,V+x);if(D)K.set(D(ae,T,E),V+z);else{for(var ce=O.length,H=[],se=0;se<ce;se+=1)H[se]=O[se](ae,T,E);var Q=Y5(H.concat());K.set(H[Q],V+z)}E=ae}return K})(r,n,Math.ceil(o*s/8),v);var h=S0(r,{level:f});return Tn.API.__addimage__.arrayBufferToBinaryString(h)}function V5(r){var n=Array.apply([],r);return n.unshift(0),n}function y2(r,n){var o=r.length,s=[];s[0]=1;for(var u=0;u<o;u+=1){var f=r[u-n]||0;s[u+1]=r[u]-f+256&255}return s}function m2(r,n,o){var s=r.length,u=[];u[0]=2;for(var f=0;f<s;f+=1){var v=o&&o[f]||0;u[f+1]=r[f]-v+256&255}return u}function x2(r,n,o){var s=r.length,u=[];u[0]=3;for(var f=0;f<s;f+=1){var v=r[f-n]||0,h=o&&o[f]||0;u[f+1]=r[f]+256-(v+h>>>1)&255}return u}function b2(r,n,o){var s=r.length,u=[];u[0]=4;for(var f=0;f<s;f+=1){var v=W5(r[f-n]||0,o&&o[f]||0,o&&o[f-n]||0);u[f+1]=r[f]-v+256&255}return u}function W5(r,n,o){if(r===n&&n===o)return r;var s=Math.abs(n-o),u=Math.abs(r-o),f=Math.abs(r+n-o-o);return s<=u&&s<=f?r:u<=f?n:o}function Y5(r){var n=r.map(function(o){return o.reduce(function(s,u){return s+Math.abs(u)},0)});return n.indexOf(Math.min.apply(null,n))}function p0(r,n,o){var s=n*o,u=Math.floor(s/8),f=16-(s-8*u+o),v=(1<<o)-1;return Ty(r,u)>>f&v}function v2(r,n,o,s){var u=o*s,f=Math.floor(u/8),v=16-(u-8*f+s),h=(1<<s)-1,b=(n&h)<<v;(function(x,T,D){if(T+1<x.byteLength)x.setUint16(T,D,!1);else{var E=D>>8&255;x.setUint8(T,E)}})(r,f,Ty(r,f)&~(h<<v)&65535|b)}function Ty(r,n){return n+1<r.byteLength?r.getUint16(n,!1):r.getUint8(n)<<8}function G5(r){var n=0;if(r[n++]!==71||r[n++]!==73||r[n++]!==70||r[n++]!==56||(r[n++]+1&253)!=56||r[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var o=r[n++]|r[n++]<<8,s=r[n++]|r[n++]<<8,u=r[n++],f=u>>7,v=1<<1+(7&u);r[n++],r[n++];var h=null,b=null;f&&(h=n,b=v,n+=3*v);var x=!0,T=[],D=0,E=null,C=0,K=null;for(this.width=o,this.height=s;x&&n<r.length;)switch(r[n++]){case 33:switch(r[n++]){case 255:if(r[n]!==11||r[n+1]==78&&r[n+2]==69&&r[n+3]==84&&r[n+4]==83&&r[n+5]==67&&r[n+6]==65&&r[n+7]==80&&r[n+8]==69&&r[n+9]==50&&r[n+10]==46&&r[n+11]==48&&r[n+12]==3&&r[n+13]==1&&r[n+16]==0)n+=14,K=r[n++]|r[n++]<<8,n++;else for(n+=12;;){if(!((k=r[n++])>=0))throw Error("Invalid block size");if(k===0)break;n+=k}break;case 249:if(r[n++]!==4||r[n+4]!==0)throw new Error("Invalid graphics extension block.");var O=r[n++];D=r[n++]|r[n++]<<8,E=r[n++],1&O||(E=null),C=O>>2&7,n++;break;case 254:for(;;){if(!((k=r[n++])>=0))throw Error("Invalid block size");if(k===0)break;n+=k}break;default:throw new Error("Unknown graphic control label: 0x"+r[n-1].toString(16))}break;case 44:var z=r[n++]|r[n++]<<8,V=r[n++]|r[n++]<<8,ae=r[n++]|r[n++]<<8,ce=r[n++]|r[n++]<<8,H=r[n++],se=H>>6&1,Q=1<<1+(7&H),N=h,R=b,W=!1;H>>7&&(W=!0,N=n,R=Q,n+=3*Q);var X=n;for(n++;;){var k;if(!((k=r[n++])>=0))throw Error("Invalid block size");if(k===0)break;n+=k}T.push({x:z,y:V,width:ae,height:ce,has_local_palette:W,palette_offset:N,palette_size:R,data_offset:X,data_length:n-X,transparent_index:E,interlaced:!!se,delay:D,disposal:C});break;case 59:x=!1;break;default:throw new Error("Unknown gif block: 0x"+r[n-1].toString(16))}this.numFrames=function(){return T.length},this.loopCount=function(){return K},this.frameInfo=function(S){if(S<0||S>=T.length)throw new Error("Frame index out of range.");return T[S]},this.decodeAndBlitFrameBGRA=function(S,J){var ie=this.frameInfo(S),ge=ie.width*ie.height,$=new Uint8Array(ge);w2(r,ie.data_offset,$,ge);var te=ie.palette_offset,he=ie.transparent_index;he===null&&(he=256);var je=ie.width,be=o-je,F=je,A=4*(ie.y*o+ie.x),M=4*((ie.y+ie.height)*o+ie.x),B=A,de=4*be;ie.interlaced===!0&&(de+=4*o*7);for(var ke=8,De=0,Ge=$.length;De<Ge;++De){var ze=$[De];if(F===0&&(F=je,(B+=de)>=M&&(de=4*be+4*o*(ke-1),B=A+(je+be)*(ke<<1),ke>>=1)),ze===he)B+=4;else{var tt=r[te+3*ze],Xe=r[te+3*ze+1],Tt=r[te+3*ze+2];J[B++]=Tt,J[B++]=Xe,J[B++]=tt,J[B++]=255}--F}},this.decodeAndBlitFrameRGBA=function(S,J){var ie=this.frameInfo(S),ge=ie.width*ie.height,$=new Uint8Array(ge);w2(r,ie.data_offset,$,ge);var te=ie.palette_offset,he=ie.transparent_index;he===null&&(he=256);var je=ie.width,be=o-je,F=je,A=4*(ie.y*o+ie.x),M=4*((ie.y+ie.height)*o+ie.x),B=A,de=4*be;ie.interlaced===!0&&(de+=4*o*7);for(var ke=8,De=0,Ge=$.length;De<Ge;++De){var ze=$[De];if(F===0&&(F=je,(B+=de)>=M&&(de=4*be+4*o*(ke-1),B=A+(je+be)*(ke<<1),ke>>=1)),ze===he)B+=4;else{var tt=r[te+3*ze],Xe=r[te+3*ze+1],Tt=r[te+3*ze+2];J[B++]=tt,J[B++]=Xe,J[B++]=Tt,J[B++]=255}--F}}}function w2(r,n,o,s){for(var u=r[n++],f=1<<u,v=f+1,h=v+1,b=u+1,x=(1<<b)-1,T=0,D=0,E=0,C=r[n++],K=new Int32Array(4096),O=null;;){for(;T<16&&C!==0;)D|=r[n++]<<T,T+=8,C===1?C=r[n++]:--C;if(T<b)break;var z=D&x;if(D>>=b,T-=b,z!==f){if(z===v)break;for(var V=z<h?z:O,ae=0,ce=V;ce>f;)ce=K[ce]>>8,++ae;var H=ce;if(E+ae+(V!==z?1:0)>s)return void Fr.log("Warning, gif stream longer than expected.");o[E++]=H;var se=E+=ae;for(V!==z&&(o[E++]=H),ce=V;ae--;)ce=K[ce],o[--se]=255&ce,ce>>=8;O!==null&&h<4096&&(K[h++]=O<<8|H,h>=x+1&&b<12&&(++b,x=x<<1|1)),O=z}else h=v+1,x=(1<<(b=u+1))-1,O=null}return E!==s&&Fr.log("Warning, gif stream shorter than expected."),o}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function h0(r){var n,o,s,u,f,v=Math.floor,h=new Array(64),b=new Array(64),x=new Array(64),T=new Array(64),D=new Array(65535),E=new Array(65535),C=new Array(64),K=new Array(64),O=[],z=0,V=7,ae=new Array(64),ce=new Array(64),H=new Array(64),se=new Array(256),Q=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(A,M){for(var B=0,de=0,ke=new Array,De=1;De<=16;De++){for(var Ge=1;Ge<=A[De];Ge++)ke[M[de]]=[],ke[M[de]][0]=B,ke[M[de]][1]=De,de++,B++;B*=2}return ke}function te(A){for(var M=A[0],B=A[1]-1;B>=0;)M&1<<B&&(z|=1<<V),B--,--V<0&&(z==255?(he(255),he(0)):he(z),V=7,z=0)}function he(A){O.push(A)}function je(A){he(A>>8&255),he(255&A)}function be(A,M,B,de,ke){for(var De,Ge=ke[0],ze=ke[240],tt=(function(ht,nn){var Rt,mn,en,Vn,Nt,Dt,li,ct,kt,Rn,Gt=0;for(kt=0;kt<8;++kt){Rt=ht[Gt],mn=ht[Gt+1],en=ht[Gt+2],Vn=ht[Gt+3],Nt=ht[Gt+4],Dt=ht[Gt+5],li=ht[Gt+6];var zn=Rt+(ct=ht[Gt+7]),Nn=Rt-ct,rn=mn+li,xn=mn-li,rt=en+Dt,$t=en-Dt,Ht=Vn+Nt,Vt=Vn-Nt,wn=zn+Ht,Xi=zn-Ht,Un=rn+rt,un=rn-rt;ht[Gt]=wn+Un,ht[Gt+4]=wn-Un;var Wt=.707106781*(un+Xi);ht[Gt+2]=Xi+Wt,ht[Gt+6]=Xi-Wt;var ko=.382683433*((wn=Vt+$t)-(un=xn+Nn)),Zr=.5411961*wn+ko,go=1.306562965*un+ko,Ao=.707106781*(Un=$t+xn),Xt=Nn+Ao,No=Nn-Ao;ht[Gt+5]=No+Zr,ht[Gt+3]=No-Zr,ht[Gt+1]=Xt+go,ht[Gt+7]=Xt-go,Gt+=8}for(Gt=0,kt=0;kt<8;++kt){Rt=ht[Gt],mn=ht[Gt+8],en=ht[Gt+16],Vn=ht[Gt+24],Nt=ht[Gt+32],Dt=ht[Gt+40],li=ht[Gt+48];var ya=Rt+(ct=ht[Gt+56]),na=Rt-ct,vt=mn+li,ii=mn-li,Xn=en+Dt,cr=en-Dt,$i=Vn+Nt,Sr=Vn-Nt,xi=ya+$i,di=ya-$i,yo=vt+Xn,ia=vt-Xn;ht[Gt]=xi+yo,ht[Gt+32]=xi-yo;var ma=.707106781*(ia+di);ht[Gt+16]=di+ma,ht[Gt+48]=di-ma;var qs=.382683433*((xi=Sr+cr)-(ia=ii+na)),za=.5411961*xi+qs,Pa=1.306562965*ia+qs,os=.707106781*(yo=cr+ii),Wn=na+os,_o=na-os;ht[Gt+40]=_o+za,ht[Gt+24]=_o-za,ht[Gt+8]=Wn+Pa,ht[Gt+56]=Wn-Pa,Gt++}for(kt=0;kt<64;++kt)Rn=ht[kt]*nn[kt],C[kt]=Rn>0?Rn+.5|0:Rn-.5|0;return C})(A,M),Xe=0;Xe<64;++Xe)K[N[Xe]]=tt[Xe];var Tt=K[0]-B;B=K[0],Tt==0?te(de[0]):(te(de[E[De=32767+Tt]]),te(D[De]));for(var jt=63;jt>0&&K[jt]==0;)jt--;if(jt==0)return te(Ge),B;for(var It,pe=1;pe<=jt;){for(var Pt=pe;K[pe]==0&&pe<=jt;)++pe;var gn=pe-Pt;if(gn>=16){It=gn>>4;for(var Qt=1;Qt<=It;++Qt)te(ze);gn&=15}De=32767+K[pe],te(ke[(gn<<4)+E[De]]),te(D[De]),pe++}return jt!=63&&te(Ge),B}function F(A){A=Math.min(Math.max(A,1),100),f!=A&&((function(M){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var ke=v((B[de]*M+50)/100);ke=Math.min(Math.max(ke,1),255),h[N[de]]=ke}for(var De=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ge=0;Ge<64;Ge++){var ze=v((De[Ge]*M+50)/100);ze=Math.min(Math.max(ze,1),255),b[N[Ge]]=ze}for(var tt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Xe=0,Tt=0;Tt<8;Tt++)for(var jt=0;jt<8;jt++)x[Xe]=1/(h[N[Xe]]*tt[Tt]*tt[jt]*8),T[Xe]=1/(b[N[Xe]]*tt[Tt]*tt[jt]*8),Xe++})(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),f=A)}this.encode=function(A,M){M&&F(M),O=new Array,z=0,V=7,je(65496),je(65504),je(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),je(1),je(1),he(0),he(0),(function(){je(65499),je(132),he(0);for(var mn=0;mn<64;mn++)he(h[mn]);he(1);for(var en=0;en<64;en++)he(b[en])})(),(function(mn,en){je(65472),je(17),he(8),je(en),je(mn),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)})(A.width,A.height),(function(){je(65476),je(418),he(0);for(var mn=0;mn<16;mn++)he(R[mn+1]);for(var en=0;en<=11;en++)he(W[en]);he(16);for(var Vn=0;Vn<16;Vn++)he(X[Vn+1]);for(var Nt=0;Nt<=161;Nt++)he(k[Nt]);he(1);for(var Dt=0;Dt<16;Dt++)he(S[Dt+1]);for(var li=0;li<=11;li++)he(J[li]);he(17);for(var ct=0;ct<16;ct++)he(ie[ct+1]);for(var kt=0;kt<=161;kt++)he(ge[kt])})(),je(65498),je(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var B=0,de=0,ke=0;z=0,V=7,this.encode.displayName="_encode_";for(var De,Ge,ze,tt,Xe,Tt,jt,It,pe,Pt=A.data,gn=A.width,Qt=A.height,ht=4*gn,nn=0;nn<Qt;){for(De=0;De<ht;){for(Xe=ht*nn+De,jt=-1,It=0,pe=0;pe<64;pe++)Tt=Xe+(It=pe>>3)*ht+(jt=4*(7&pe)),nn+It>=Qt&&(Tt-=ht*(nn+1+It-Qt)),De+jt>=ht&&(Tt-=De+jt-ht+4),Ge=Pt[Tt++],ze=Pt[Tt++],tt=Pt[Tt++],ae[pe]=(Q[Ge]+Q[ze+256|0]+Q[tt+512|0]>>16)-128,ce[pe]=(Q[Ge+768|0]+Q[ze+1024|0]+Q[tt+1280|0]>>16)-128,H[pe]=(Q[Ge+1280|0]+Q[ze+1536|0]+Q[tt+1792|0]>>16)-128;B=be(ae,x,B,n,s),de=be(ce,T,de,o,u),ke=be(H,T,ke,o,u),De+=32}nn+=8}if(V>=0){var Rt=[];Rt[1]=V+1,Rt[0]=(1<<V+1)-1,te(Rt)}return je(65497),new Uint8Array(O)},r=r||50,(function(){for(var A=String.fromCharCode,M=0;M<256;M++)se[M]=A(M)})(),n=$(R,W),o=$(S,J),s=$(X,k),u=$(ie,ge),(function(){for(var A=1,M=2,B=1;B<=15;B++){for(var de=A;de<M;de++)E[32767+de]=B,D[32767+de]=[],D[32767+de][1]=B,D[32767+de][0]=de;for(var ke=-(M-1);ke<=-A;ke++)E[32767+ke]=B,D[32767+ke]=[],D[32767+ke][1]=B,D[32767+ke][0]=M-1+ke;A<<=1,M<<=1}})(),(function(){for(var A=0;A<256;A++)Q[A]=19595*A,Q[A+256|0]=38470*A,Q[A+512|0]=7471*A+32768,Q[A+768|0]=-11059*A,Q[A+1024|0]=-21709*A,Q[A+1280|0]=32768*A+8421375,Q[A+1536|0]=-27439*A,Q[A+1792|0]=-5329*A})(),F(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function hc(r,n){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function S2(r){function n(W){if(!W)throw Error("assert :P")}function o(W,X,k){for(var S=0;4>S;S++)if(W[X+S]!=k.charCodeAt(S))return!0;return!1}function s(W,X,k,S,J){for(var ie=0;ie<J;ie++)W[X+ie]=k[S+ie]}function u(W,X,k,S){for(var J=0;J<S;J++)W[X+J]=k}function f(W){return new Int32Array(W)}function v(W,X){for(var k=[],S=0;S<W;S++)k.push(new X);return k}function h(W,X){var k=[];return(function S(J,ie,ge){for(var $=ge[ie],te=0;te<$&&(J.push(ge.length>ie+1?[]:new X),!(ge.length<ie+1));te++)S(J[te],ie+1,ge)})(k,0,W),k}var b=function(){var W=this;function X(d,g){for(var j=1<<g-1>>>0;d&j;)j>>>=1;return j?(d&j-1)+j:d}function k(d,g,j,L,Y){n(!(L%j));do d[g+(L-=j)]=Y;while(0<L)}function S(d,g,j,L,Y){if(n(2328>=Y),512>=Y)var Z=f(512);else if((Z=f(Y))==null)return 0;return(function(ne,le,fe,me,Pe,Ye){var ve,Me,Fe=le,at=1<<fe,We=f(16),ot=f(16);for(n(Pe!=0),n(me!=null),n(ne!=null),n(0<fe),Me=0;Me<Pe;++Me){if(15<me[Me])return 0;++We[me[Me]]}if(We[0]==Pe)return 0;for(ot[1]=0,ve=1;15>ve;++ve){if(We[ve]>1<<ve)return 0;ot[ve+1]=ot[ve]+We[ve]}for(Me=0;Me<Pe;++Me)ve=me[Me],0<me[Me]&&(Ye[ot[ve]++]=Me);if(ot[15]==1)return(me=new J).g=0,me.value=Ye[0],k(ne,Fe,1,at,me),at;var pt,St=-1,st=at-1,Bt=0,Ot=1,An=1,Yt=1<<fe;for(Me=0,ve=1,Pe=2;ve<=fe;++ve,Pe<<=1){if(Ot+=An<<=1,0>(An-=We[ve]))return 0;for(;0<We[ve];--We[ve])(me=new J).g=ve,me.value=Ye[Me++],k(ne,Fe+Bt,Pe,Yt,me),Bt=X(Bt,ve)}for(ve=fe+1,Pe=2;15>=ve;++ve,Pe<<=1){if(Ot+=An<<=1,0>(An-=We[ve]))return 0;for(;0<We[ve];--We[ve]){if(me=new J,(Bt&st)!=St){for(Fe+=Yt,pt=1<<(St=ve)-fe;15>St&&!(0>=(pt-=We[St]));)++St,pt<<=1;at+=Yt=1<<(pt=St-fe),ne[le+(St=Bt&st)].g=pt+fe,ne[le+St].value=Fe-le-St}me.g=ve-fe,me.value=Ye[Me++],k(ne,Fe+(Bt>>fe),Pe,Yt,me),Bt=X(Bt,ve)}}return Ot!=2*ot[15]-1?0:at})(d,g,j,L,Y,Z)}function J(){this.value=this.g=0}function ie(){this.value=this.g=0}function ge(){this.G=v(5,J),this.H=f(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=v(Ba,ie)}function $(d,g,j,L){n(d!=null),n(g!=null),n(2147483648>L),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=j,d.Jd=g,d.Yc=j+L,d.Zc=4<=L?j+L-4+1:j,Ge(d)}function te(d,g){for(var j=0;0<g--;)j|=tt(d,128)<<g;return j}function he(d,g){var j=te(d,g);return ze(d)?-j:j}function je(d,g,j,L){var Y,Z=0;for(n(d!=null),n(g!=null),n(4294967288>L),d.Sb=L,d.Ra=0,d.u=0,d.h=0,4<L&&(L=4),Y=0;Y<L;++Y)Z+=g[j+Y]<<8*Y;d.Ra=Z,d.bb=L,d.oa=g,d.pa=j}function be(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<pi-8>>>0,++d.bb,d.u-=8;de(d)&&(d.h=1,d.u=0)}function F(d,g){if(n(0<=g),!d.h&&g<=lo){var j=B(d)&sa[g];return d.u+=g,be(d),j}return d.h=1,d.u=0}function A(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(d){return d.Ra>>>(d.u&pi-1)>>>0}function de(d){return n(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>pi}function ke(d,g){d.u=g,d.h=de(d)}function De(d){d.u>=la&&(n(d.u>=la),be(d))}function Ge(d){n(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(n(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ze(d){return te(d,1)}function tt(d,g){var j=d.Ca;0>d.b&&Ge(d);var L=d.b,Y=j*g>>>8,Z=(d.I>>>L>Y)+0;for(Z?(j-=Y,d.I-=Y+1<<L>>>0):j=Y+1,L=j,Y=0;256<=L;)Y+=8,L>>=8;return L=7^Y+Bi[L],d.b-=L,d.Ca=(j<<L)-1,Z}function Xe(d,g,j){d[g+0]=j>>24&255,d[g+1]=j>>16&255,d[g+2]=j>>8&255,d[g+3]=255&j}function Tt(d,g){return d[g+0]|d[g+1]<<8}function jt(d,g){return Tt(d,g)|d[g+2]<<16}function It(d,g){return Tt(d,g)|Tt(d,g+2)<<16}function pe(d,g){var j=1<<g;return n(d!=null),n(0<g),d.X=f(j),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function Pt(d,g){n(d!=null),n(g!=null),n(d.Xa==g.Xa),s(g.X,0,d.X,0,1<<g.Xa)}function gn(){this.X=[],this.Xa=this.Mb=0}function Qt(d,g,j,L){n(j!=null),n(L!=null);var Y=j[0],Z=L[0];return Y==0&&(Y=(d*Z+g/2)/g),Z==0&&(Z=(g*Y+d/2)/d),0>=Y||0>=Z?0:(j[0]=Y,L[0]=Z,1)}function ht(d,g){return d+(1<<g)-1>>>g}function nn(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Rt(d,g){W[g]=function(j,L,Y,Z,ne,le,fe){var me;for(me=0;me<ne;++me){var Pe=W[d](le[fe+me-1],Y,Z+me);le[fe+me]=nn(j[L+me],Pe)}}}function mn(){this.ud=this.hd=this.jd=0}function en(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function Vn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Nt(d,g){return Vn(d+(d-g+.5>>1))}function Dt(d,g,j){return Math.abs(g-j)-Math.abs(d-j)}function li(d,g,j,L,Y,Z,ne){for(L=Z[ne-1],j=0;j<Y;++j)Z[ne+j]=L=nn(d[g+j],L)}function ct(d,g,j,L,Y){var Z;for(Z=0;Z<j;++Z){var ne=d[g+Z],le=ne>>8&255,fe=16711935&(fe=(fe=16711935&ne)+((le<<16)+le));L[Y+Z]=(4278255360&ne)+fe>>>0}}function kt(d,g){g.jd=255&d,g.hd=d>>8&255,g.ud=d>>16&255}function Rn(d,g,j,L,Y,Z){var ne;for(ne=0;ne<L;++ne){var le=g[j+ne],fe=le>>>8,me=le,Pe=255&(Pe=(Pe=le>>>16)+((d.jd<<24>>24)*(fe<<24>>24)>>>5));me=255&(me=(me+=(d.hd<<24>>24)*(fe<<24>>24)>>>5)+((d.ud<<24>>24)*(Pe<<24>>24)>>>5)),Y[Z+ne]=(4278255360&le)+(Pe<<16)+me}}function Gt(d,g,j,L,Y){W[g]=function(Z,ne,le,fe,me,Pe,Ye,ve,Me){for(fe=Ye;fe<ve;++fe)for(Ye=0;Ye<Me;++Ye)me[Pe++]=Y(le[L(Z[ne++])])},W[d]=function(Z,ne,le,fe,me,Pe,Ye){var ve=8>>Z.b,Me=Z.Ea,Fe=Z.K[0],at=Z.w;if(8>ve)for(Z=(1<<Z.b)-1,at=(1<<ve)-1;ne<le;++ne){var We,ot=0;for(We=0;We<Me;++We)We&Z||(ot=L(fe[me++])),Pe[Ye++]=Y(Fe[ot&at]),ot>>=ve}else W["VP8LMapColor"+j](fe,me,Fe,at,Pe,Ye,ne,le,Me)}}function zn(d,g,j,L,Y){for(j=g+j;g<j;){var Z=d[g++];L[Y++]=Z>>16&255,L[Y++]=Z>>8&255,L[Y++]=255&Z}}function Nn(d,g,j,L,Y){for(j=g+j;g<j;){var Z=d[g++];L[Y++]=Z>>16&255,L[Y++]=Z>>8&255,L[Y++]=255&Z,L[Y++]=Z>>24&255}}function rn(d,g,j,L,Y){for(j=g+j;g<j;){var Z=(ne=d[g++])>>16&240|ne>>12&15,ne=240&ne|ne>>28&15;L[Y++]=Z,L[Y++]=ne}}function xn(d,g,j,L,Y){for(j=g+j;g<j;){var Z=(ne=d[g++])>>16&248|ne>>13&7,ne=ne>>5&224|ne>>3&31;L[Y++]=Z,L[Y++]=ne}}function rt(d,g,j,L,Y){for(j=g+j;g<j;){var Z=d[g++];L[Y++]=255&Z,L[Y++]=Z>>8&255,L[Y++]=Z>>16&255}}function $t(d,g,j,L,Y,Z){if(Z==0)for(j=g+j;g<j;)Xe(L,((Z=d[g++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),Y+=32;else s(L,Y,d,g,j)}function Ht(d,g){W[g][0]=W[d+"0"],W[g][1]=W[d+"1"],W[g][2]=W[d+"2"],W[g][3]=W[d+"3"],W[g][4]=W[d+"4"],W[g][5]=W[d+"5"],W[g][6]=W[d+"6"],W[g][7]=W[d+"7"],W[g][8]=W[d+"8"],W[g][9]=W[d+"9"],W[g][10]=W[d+"10"],W[g][11]=W[d+"11"],W[g][12]=W[d+"12"],W[g][13]=W[d+"13"],W[g][14]=W[d+"0"],W[g][15]=W[d+"0"]}function Vt(d){return d==Es||d==yl||d==ml||d==rc}function wn(){this.eb=[],this.size=this.A=this.fb=0}function Xi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Un(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new wn,this.f.kb=new Xi,this.sd=null}function un(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Wt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ko(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Zr(d,g){var j=d.T,L=g.ba.f.RGBA,Y=L.eb,Z=L.fb+d.ka*L.A,ne=Yi[g.ba.S],le=d.y,fe=d.O,me=d.f,Pe=d.N,Ye=d.ea,ve=d.W,Me=g.cc,Fe=g.dc,at=g.Mc,We=g.Nc,ot=d.ka,pt=d.ka+d.T,St=d.U,st=St+1>>1;for(ot==0?ne(le,fe,null,null,me,Pe,Ye,ve,me,Pe,Ye,ve,Y,Z,null,null,St):(ne(g.ec,g.fc,le,fe,Me,Fe,at,We,me,Pe,Ye,ve,Y,Z-L.A,Y,Z,St),++j);ot+2<pt;ot+=2)Me=me,Fe=Pe,at=Ye,We=ve,Pe+=d.Rc,ve+=d.Rc,Z+=2*L.A,ne(le,(fe+=2*d.fa)-d.fa,le,fe,Me,Fe,at,We,me,Pe,Ye,ve,Y,Z-L.A,Y,Z,St);return fe+=d.fa,d.j+pt<d.o?(s(g.ec,g.fc,le,fe,St),s(g.cc,g.dc,me,Pe,st),s(g.Mc,g.Nc,Ye,ve,st),j--):1&pt||ne(le,fe,null,null,me,Pe,Ye,ve,me,Pe,Ye,ve,Y,Z+L.A,null,null,St),j}function go(d,g,j){var L=d.F,Y=[d.J];if(L!=null){var Z=d.U,ne=g.ba.S,le=ne==Tc||ne==ml;g=g.ba.f.RGBA;var fe=[0],me=d.ka;fe[0]=d.T,d.Kb&&(me==0?--fe[0]:(--me,Y[0]-=d.width),d.j+d.ka+d.T==d.o&&(fe[0]=d.o-d.j-me));var Pe=g.eb;me=g.fb+me*g.A,d=Wr(L,Y[0],d.width,Z,fe,Pe,me+(le?0:3),g.A),n(j==fe),d&&Vt(ne)&&zi(Pe,me,le,Z,fe,g.A)}return 0}function Ao(d){var g=d.ma,j=g.ba.S,L=11>j,Y=j==mo||j==fa||j==Tc||j==ds||j==12||Vt(j);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Ds(g.Oa,d,Y?11:12))return 0;if(Y&&Vt(j)&&Lo(),d.da)alert("todo:use_scaling");else{if(L){if(g.Ib=ko,d.Kb){if(j=d.U+1>>1,g.memory=f(d.U+2*j),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+j,g.Ib=Zr,Lo()}}else alert("todo:EmitYUV");Y&&(g.Jb=go,L&&ur())}if(L&&!vo){for(d=0;256>d;++d)yr[d]=89858*(d-128)+fo>>Xr,qa[d]=-22014*(d-128)+fo,ts[d]=-45773*(d-128),Zo[d]=113618*(d-128)+fo>>Xr;for(d=Ko;d<bo;++d)g=76283*(d-16)+fo>>Xr,ys[d-Ko]=Fi(g,255),ms[d-Ko]=Fi(g+8>>4,15);vo=1}return 1}function Xt(d){var g=d.ma,j=d.U,L=d.T;return n(!(1&d.ka)),0>=j||0>=L?0:(j=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,j),g.Dc+=j,1)}function No(d){d.ma.memory=null}function ya(d,g,j,L){return F(d,8)!=47?0:(g[0]=F(d,14)+1,j[0]=F(d,14)+1,L[0]=F(d,1),F(d,3)!=0?0:!d.h)}function na(d,g){if(4>d)return d+1;var j=d-2>>1;return(2+(1&d)<<j)+F(g,j)+1}function vt(d,g){return 120<g?g-120:1<=(j=((j=ja[g-1])>>4)*d+(8-(15&j)))?j:1;var j}function ii(d,g,j){var L=B(j),Y=d[g+=255&L].g-8;return 0<Y&&(ke(j,j.u+8),L=B(j),g+=d[g].value,g+=L&(1<<Y)-1),ke(j,j.u+d[g].g),d[g].value}function Xn(d,g,j){return j.g+=d.g,j.value+=d.value<<g>>>0,n(8>=j.g),d.g}function cr(d,g,j){var L=d.xc;return n((g=L==0?0:d.vc[d.md*(j>>L)+(g>>L)])<d.Wb),d.Ya[g]}function $i(d,g,j,L){var Y=d.ab,Z=d.c*g,ne=d.C;g=ne+g;var le=j,fe=L;for(L=d.Ta,j=d.Ua;0<Y--;){var me=d.gc[Y],Pe=ne,Ye=g,ve=le,Me=fe,Fe=(fe=L,le=j,me.Ea);switch(n(Pe<Ye),n(Ye<=me.nc),me.hc){case 2:fr(ve,Me,(Ye-Pe)*Fe,fe,le);break;case 0:var at=Pe,We=Ye,ot=fe,pt=le,St=(Yt=me).Ea;at==0&&(ls(ve,Me,null,null,1,ot,pt),li(ve,Me+1,0,0,St-1,ot,pt+1),Me+=St,pt+=St,++at);for(var st=1<<Yt.b,Bt=st-1,Ot=ht(St,Yt.b),An=Yt.K,Yt=Yt.w+(at>>Yt.b)*Ot;at<We;){var ti=An,Ki=Yt,Qn=1;for(Ml(ve,Me,ot,pt-St,1,ot,pt);Qn<St;){var qt=(Qn&~Bt)+st;qt>St&&(qt=St),(0,ca[ti[Ki++]>>8&15])(ve,Me+ +Qn,ot,pt+Qn-St,qt-Qn,ot,pt+Qn),Qn=qt}Me+=St,pt+=St,++at&Bt||(Yt+=Ot)}Ye!=me.nc&&s(fe,le-Fe,fe,le+(Ye-Pe-1)*Fe,Fe);break;case 1:for(Fe=ve,We=Me,St=(ve=me.Ea)-(pt=ve&~(ot=(Me=1<<me.b)-1)),at=ht(ve,me.b),st=me.K,me=me.w+(Pe>>me.b)*at;Pe<Ye;){for(Bt=st,Ot=me,An=new mn,Yt=We+pt,ti=We+ve;We<Yt;)kt(Bt[Ot++],An),Bl(An,Fe,We,Me,fe,le),We+=Me,le+=Me;We<ti&&(kt(Bt[Ot++],An),Bl(An,Fe,We,St,fe,le),We+=St,le+=St),++Pe&ot||(me+=at)}break;case 3:if(ve==fe&&Me==le&&0<me.b){for(We=fe,ve=Fe=le+(Ye-Pe)*Fe-(pt=(Ye-Pe)*ht(me.Ea,me.b)),Me=fe,ot=le,at=[],pt=(St=pt)-1;0<=pt;--pt)at[pt]=Me[ot+pt];for(pt=St-1;0<=pt;--pt)We[ve+pt]=at[pt];Qc(me,Pe,Ye,fe,Fe,fe,le)}else Qc(me,Pe,Ye,ve,Me,fe,le)}le=L,fe=j}fe!=j&&s(L,j,le,fe,Z)}function Sr(d,g){var j=d.V,L=d.Ba+d.c*d.C,Y=g-d.C;if(n(g<=d.l.o),n(16>=Y),0<Y){var Z=d.l,ne=d.Ta,le=d.Ua,fe=Z.width;if($i(d,Y,j,L),Y=le=[le],n((j=d.C)<(L=g)),n(Z.v<Z.va),L>Z.o&&(L=Z.o),j<Z.j){var me=Z.j-j;j=Z.j,Y[0]+=me*fe}if(j>=L?j=0:(Y[0]+=4*Z.v,Z.ka=j-Z.j,Z.U=Z.va-Z.v,Z.T=L-j,j=1),j){if(le=le[0],11>(j=d.ca).S){var Pe=j.f.RGBA,Ye=(L=j.S,Y=Z.U,Z=Z.T,me=Pe.eb,Pe.A),ve=Z;for(Pe=Pe.fb+d.Ma*Pe.A;0<ve--;){var Me=ne,Fe=le,at=Y,We=me,ot=Pe;switch(L){case Sc:pl(Me,Fe,at,We,ot);break;case mo:Ta(Me,Fe,at,We,ot);break;case Es:Ta(Me,Fe,at,We,ot),zi(We,ot,0,at,1,0);break;case Cc:$s(Me,Fe,at,We,ot);break;case fa:$t(Me,Fe,at,We,ot,1);break;case yl:$t(Me,Fe,at,We,ot,1),zi(We,ot,0,at,1,0);break;case Tc:$t(Me,Fe,at,We,ot,0);break;case ml:$t(Me,Fe,at,We,ot,0),zi(We,ot,1,at,1,0);break;case ds:co(Me,Fe,at,We,ot);break;case rc:co(Me,Fe,at,We,ot),Qr(We,ot,at,1,0);break;case ps:us(Me,Fe,at,We,ot);break;default:n(0)}le+=fe,Pe+=Ye}d.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");n(d.Ma<=j.height)}}d.C=g,n(d.C<=d.i)}function xi(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var j=d.Ya[g].G,L=d.Ya[g].H;if(0<j[1][L[1]+0].g||0<j[2][L[2]+0].g||0<j[3][L[3]+0].g)return 0}return 1}function di(d,g,j,L,Y,Z){if(d.Z!=0){var ne=d.qd,le=d.rd;for(n(pa[d.Z]!=null);g<j;++g)pa[d.Z](ne,le,L,Y,L,Y,Z),ne=L,le=Y,Y+=Z;d.qd=ne,d.rd=le}}function yo(d,g){var j=d.l.ma,L=j.Z==0||j.Z==1?d.l.j:d.C;if(L=d.C<L?L:d.C,n(g<=d.l.o),g>L){var Y=d.l.width,Z=j.ca,ne=j.tb+Y*L,le=d.V,fe=d.Ba+d.c*L,me=d.gc;n(d.ab==1),n(me[0].hc==3),Xs(me[0],L,g,le,fe,Z,ne),di(j,L,g,Z,ne,Y)}d.C=d.Ma=g}function ia(d,g,j,L,Y,Z,ne){var le=d.$/L,fe=d.$%L,me=d.m,Pe=d.s,Ye=j+d.$,ve=Ye;Y=j+L*Y;var Me=j+L*Z,Fe=280+Pe.ua,at=d.Pb?le:16777216,We=0<Pe.ua?Pe.Wa:null,ot=Pe.wc,pt=Ye<Me?cr(Pe,fe,le):null;n(d.C<Z),n(Me<=Y);var St=!1;e:for(;;){for(;St||Ye<Me;){var st=0;if(le>=at){var Bt=Ye-j;n((at=d).Pb),at.wd=at.m,at.xd=Bt,0<at.s.ua&&Pt(at.s.Wa,at.s.vb),at=le+Ua}if(fe&ot||(pt=cr(Pe,fe,le)),n(pt!=null),pt.Qb&&(g[Ye]=pt.qb,St=!0),!St)if(De(me),pt.jc){st=me,Bt=g;var Ot=Ye,An=pt.pd[B(st)&Ba-1];n(pt.jc),256>An.g?(ke(st,st.u+An.g),Bt[Ot]=An.value,st=0):(ke(st,st.u+An.g-256),n(256<=An.value),st=An.value),st==0&&(St=!0)}else st=ii(pt.G[0],pt.H[0],me);if(me.h)break;if(St||256>st){if(!St)if(pt.nd)g[Ye]=(pt.qb|st<<8)>>>0;else{if(De(me),St=ii(pt.G[1],pt.H[1],me),De(me),Bt=ii(pt.G[2],pt.H[2],me),Ot=ii(pt.G[3],pt.H[3],me),me.h)break;g[Ye]=(Ot<<24|St<<16|st<<8|Bt)>>>0}if(St=!1,++Ye,++fe>=L&&(fe=0,++le,ne!=null&&le<=Z&&!(le%16)&&ne(d,le),We!=null))for(;ve<Ye;)st=g[ve++],We.X[(506832829*st&4294967295)>>>We.Mb]=st}else if(280>st){if(st=na(st-256,me),Bt=ii(pt.G[4],pt.H[4],me),De(me),Bt=vt(L,Bt=na(Bt,me)),me.h)break;if(Ye-j<Bt||Y-Ye<st)break e;for(Ot=0;Ot<st;++Ot)g[Ye+Ot]=g[Ye+Ot-Bt];for(Ye+=st,fe+=st;fe>=L;)fe-=L,++le,ne!=null&&le<=Z&&!(le%16)&&ne(d,le);if(n(Ye<=Y),fe&ot&&(pt=cr(Pe,fe,le)),We!=null)for(;ve<Ye;)st=g[ve++],We.X[(506832829*st&4294967295)>>>We.Mb]=st}else{if(!(st<Fe))break e;for(St=st-280,n(We!=null);ve<Ye;)st=g[ve++],We.X[(506832829*st&4294967295)>>>We.Mb]=st;st=Ye,n(!(St>>>(Bt=We).Xa)),g[st]=Bt.X[St],St=!0}St||n(me.h==de(me))}if(d.Pb&&me.h&&Ye<Y)n(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Pt(d.s.vb,d.s.Wa);else{if(me.h)break e;ne?.(d,le>Z?Z:le),d.a=0,d.$=Ye-j}return 1}return d.a=3,0}function ma(d){n(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,n(d!=null)}function qs(){var d=new jn;return d==null?null:(d.a=0,d.xb=$o,Ht("Predictor","VP8LPredictors"),Ht("Predictor","VP8LPredictors_C"),Ht("PredictorAdd","VP8LPredictorsAdd"),Ht("PredictorAdd","VP8LPredictorsAdd_C"),fr=ct,Bl=Rn,pl=zn,Ta=Nn,co=rn,us=xn,$s=rt,W.VP8LMapColor32b=cs,W.VP8LMapColor8b=Yo,d)}function za(d,g,j,L,Y){var Z=1,ne=[d],le=[g],fe=L.m,me=L.s,Pe=null,Ye=0;e:for(;;){if(j)for(;Z&&F(fe,1);){var ve=ne,Me=le,Fe=L,at=1,We=Fe.m,ot=Fe.gc[Fe.ab],pt=F(We,2);if(Fe.Oc&1<<pt)Z=0;else{switch(Fe.Oc|=1<<pt,ot.hc=pt,ot.Ea=ve[0],ot.nc=Me[0],ot.K=[null],++Fe.ab,n(4>=Fe.ab),pt){case 0:case 1:ot.b=F(We,3)+2,at=za(ht(ot.Ea,ot.b),ht(ot.nc,ot.b),0,Fe,ot.K),ot.K=ot.K[0];break;case 3:var St,st=F(We,8)+1,Bt=16<st?0:4<st?1:2<st?2:3;if(ve[0]=ht(ot.Ea,Bt),ot.b=Bt,St=at=za(st,1,0,Fe,ot.K)){var Ot,An=st,Yt=ot,ti=1<<(8>>Yt.b),Ki=f(ti);if(Ki==null)St=0;else{var Qn=Yt.K[0],qt=Yt.w;for(Ki[0]=Yt.K[0][0],Ot=1;Ot<1*An;++Ot)Ki[Ot]=nn(Qn[qt+Ot],Ki[Ot-1]);for(;Ot<4*ti;++Ot)Ki[Ot]=0;Yt.K[0]=null,Yt.K[0]=Ki,St=1}}at=St;break;case 2:break;default:n(0)}Z=at}}if(ne=ne[0],le=le[0],Z&&F(fe,1)&&!(Z=1<=(Ye=F(fe,4))&&11>=Ye)){L.a=3;break e}var zt;if(zt=Z)t:{var Ci,Zt,En,gi=L,Br=ne,wo=le,yi=Ye,Ar=j,Oo=gi.m,to=gi.s,ni=[null],Pi=1,mr=0,ci=Qa[yi];n:for(;;){if(Ar&&F(Oo,1)){var Nr=F(Oo,3)+2,pr=ht(Br,Nr),Ni=ht(wo,Nr),$r=pr*Ni;if(!za(pr,Ni,0,gi,ni))break n;for(ni=ni[0],to.xc=Nr,Ci=0;Ci<$r;++Ci){var Oi=ni[Ci]>>8&65535;ni[Ci]=Oi,Oi>=Pi&&(Pi=Oi+1)}}if(Oo.h)break n;for(Zt=0;5>Zt;++Zt){var no=Il[Zt];!Zt&&0<yi&&(no+=1<<yi),mr<no&&(mr=no)}var _r=v(Pi*ci,J),Gi=Pi,Ti=v(Gi,ge);if(Ti==null)var So=null;else n(65536>=Gi),So=Ti;var sr=f(mr);if(So==null||sr==null||_r==null){gi.a=1;break n}var dn=_r;for(Ci=En=0;Ci<Pi;++Ci){var vn=So[Ci],_i=vn.G,Jo=vn.H,Ha=0,Na=1,Kr=0;for(Zt=0;5>Zt;++Zt){no=Il[Zt],_i[Zt]=dn,Jo[Zt]=En,!Zt&&0<yi&&(no+=1<<yi);r:{var Fl,Ms=no,ns=gi,ji=sr,Bs=dn,Pu=En,eu=0,bl=ns.m,Yf=F(bl,1);if(u(ji,0,0,Ms),Yf){var Du=F(bl,1)+1,Eu=F(bl,1),Ic=F(bl,Eu==0?1:8);ji[Ic]=1,Du==2&&(ji[Ic=F(bl,8)]=1);var Co=1}else{var er=f(19),Uc=F(bl,4)+4;if(19<Uc){ns.a=3;var ql=0;break r}for(Fl=0;Fl<Uc;++Fl)er[xo[Fl]]=F(bl,3);var jc=void 0,oc=void 0,Qs=ns,tu=er,kc=Ms,nu=ji,iu=0,vl=Qs.m,Ru=8,ac=v(128,J);i:for(;S(ac,0,7,tu,19);){if(F(vl,1)){var sc=2+2*F(vl,3);if((jc=2+F(vl,sc))>kc)break i}else jc=kc;for(oc=0;oc<kc&&jc--;){De(vl);var Hl=ac[0+(127&B(vl))];ke(vl,vl.u+Hl.g);var Os=Hl.value;if(16>Os)nu[oc++]=Os,Os!=0&&(Ru=Os);else{var Ac=Os==16,ru=Os-16,Nc=Rs[ru],lc=F(vl,Ro[ru])+Nc;if(oc+lc>kc)break i;for(var _c=Ac?Ru:0;0<lc--;)nu[oc++]=_c}}iu=1;break i}iu||(Qs.a=3),Co=iu}(Co=Co&&!bl.h)&&(eu=S(Bs,Pu,8,ji,Ms)),Co&&eu!=0?ql=eu:(ns.a=3,ql=0)}if(ql==0)break n;if(Na&&Ja[Zt]==1&&(Na=dn[En].g==0),Ha+=dn[En].g,En+=ql,3>=Zt){var el,cc=sr[0];for(el=1;el<no;++el)sr[el]>cc&&(cc=sr[el]);Kr+=cc}}if(vn.nd=Na,vn.Qb=0,Na&&(vn.qb=(_i[3][Jo[3]+0].value<<24|_i[1][Jo[1]+0].value<<16|_i[2][Jo[2]+0].value)>>>0,Ha==0&&256>_i[0][Jo[0]+0].value&&(vn.Qb=1,vn.qb+=_i[0][Jo[0]+0].value<<8)),vn.jc=!vn.Qb&&6>Kr,vn.jc){var Fc,xs=vn;for(Fc=0;Fc<Ba;++Fc){var io=Fc,Is=xs.pd[io],ou=xs.G[0][xs.H[0]+io];256<=ou.value?(Is.g=ou.g+256,Is.value=ou.value):(Is.g=0,Is.value=0,io>>=Xn(ou,8,Is),io>>=Xn(xs.G[1][xs.H[1]+io],16,Is),io>>=Xn(xs.G[2][xs.H[2]+io],0,Is),Xn(xs.G[3][xs.H[3]+io],24,Is))}}}to.vc=ni,to.Wb=Pi,to.Ya=So,to.yc=_r,zt=1;break t}zt=0}if(!(Z=zt)){L.a=3;break e}if(0<Ye){if(me.ua=1<<Ye,!pe(me.Wa,Ye)){L.a=1,Z=0;break e}}else me.ua=0;var au=L,Or=ne,sf=le,Vl=au.s,wl=Vl.xc;if(au.c=Or,au.i=sf,Vl.md=ht(Or,wl),Vl.wc=wl==0?-1:(1<<wl)-1,j){L.xb=Aa;break e}if((Pe=f(ne*le))==null){L.a=1,Z=0;break e}Z=(Z=ia(L,Pe,0,ne,le,le,null))&&!fe.h;break e}return Z?(Y!=null?Y[0]=Pe:(n(Pe==null),n(j)),L.$=0,j||ma(me)):ma(me),Z}function Pa(d,g){var j=d.c*d.i,L=j+g+16*g;return n(d.c<=g),d.V=f(L),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+j+g,1)}function os(d,g){var j=d.C,L=g-j,Y=d.V,Z=d.Ba+d.c*j;for(n(g<=d.l.o);0<L;){var ne=16<L?16:L,le=d.l.ma,fe=d.l.width,me=fe*ne,Pe=le.ca,Ye=le.tb+fe*j,ve=d.Ta,Me=d.Ua;$i(d,ne,Y,Z),Er(ve,Me,Pe,Ye,me),di(le,j,j+ne,Pe,Ye,fe),L-=ne,Y+=ne*d.c,j+=ne}n(j==g),d.C=d.Ma=g}function Wn(){this.ub=this.yd=this.td=this.Rb=0}function _o(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Si(){this.Fb=this.Bb=this.Cb=0,this.Zb=f(4),this.Lb=f(4)}function xa(){this.Yb=(function(){var d=[];return(function g(j,L,Y){for(var Z=Y[L],ne=0;ne<Z&&(j.push(Y.length>L+1?[]:0),!(Y.length<L+1));ne++)g(j[ne],L+1,Y)})(d,0,[3,11]),d})()}function Pn(){this.jb=f(3),this.Wc=h([4,8],xa),this.Xc=h([4,17],xa)}function Ts(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new f(4),this.od=new f(4)}function Yn(){this.ld=this.La=this.dd=this.tc=0}function ra(){this.Na=this.la=0}function ba(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function js(){this.ad=f(384),this.Za=0,this.Ob=f(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ks(){this.uc=this.M=this.Nb=0,this.wa=Array(new Yn),this.Y=0,this.ya=Array(new js),this.aa=0,this.l=new As}function Hs(){this.y=f(16),this.f=f(8),this.ea=f(8)}function xc(){this.cb=this.a=0,this.sc="",this.m=new A,this.Od=new Wn,this.Kc=new _o,this.ed=new Ts,this.Qa=new Si,this.Ic=this.$c=this.Aa=0,this.D=new ks,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=v(8,A),this.ia=0,this.pb=v(4,ba),this.Pa=new Pn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Hs),this.Hd=0,this.rb=Array(new ra),this.sb=0,this.wa=Array(new Yn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new js),this.L=this.aa=0,this.gd=h([4,2],Yn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fi(d,g){return 0>d?0:d>g?g:d}function As(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function In(){var d=new xc;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Bo||(Bo=Da)),d}function Mn(d,g,j){return d.a==0&&(d.a=g,d.sc=j,d.cb=0),0}function Ns(d,g,j){return 3<=j&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function Ya(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Mn(d,2,"null VP8Io passed to VP8GetHeaders()");var j=g.data,L=g.w,Y=g.ha;if(4>Y)return Mn(d,7,"Truncated header.");var Z=j[L+0]|j[L+1]<<8|j[L+2]<<16,ne=d.Od;if(ne.Rb=!(1&Z),ne.td=Z>>1&7,ne.yd=Z>>4&1,ne.ub=Z>>5,3<ne.td)return Mn(d,3,"Incorrect keyframe parameters.");if(!ne.yd)return Mn(d,4,"Frame not displayable.");L+=3,Y-=3;var le=d.Kc;if(ne.Rb){if(7>Y)return Mn(d,7,"cannot parse picture header");if(!Ns(j,L,Y))return Mn(d,3,"Bad code word");le.c=16383&(j[L+4]<<8|j[L+3]),le.Td=j[L+4]>>6,le.i=16383&(j[L+6]<<8|j[L+5]),le.Ud=j[L+6]>>6,L+=7,Y-=7,d.za=le.c+15>>4,d.Ub=le.i+15>>4,g.width=le.c,g.height=le.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,u((Z=d.Pa).jb,0,255,Z.jb.length),n((Z=d.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,u(Z.Zb,0,0,Z.Zb.length),u(Z.Lb,0,0,Z.Lb)}if(ne.ub>Y)return Mn(d,7,"bad partition length");$(Z=d.m,j,L,ne.ub),L+=ne.ub,Y-=ne.ub,ne.Rb&&(le.Ld=ze(Z),le.Kd=ze(Z)),le=d.Qa;var fe,me=d.Pa;if(n(Z!=null),n(le!=null),le.Cb=ze(Z),le.Cb){if(le.Bb=ze(Z),ze(Z)){for(le.Fb=ze(Z),fe=0;4>fe;++fe)le.Zb[fe]=ze(Z)?he(Z,7):0;for(fe=0;4>fe;++fe)le.Lb[fe]=ze(Z)?he(Z,6):0}if(le.Bb)for(fe=0;3>fe;++fe)me.jb[fe]=ze(Z)?te(Z,8):255}else le.Bb=0;if(Z.Ka)return Mn(d,3,"cannot parse segment header");if((le=d.ed).zd=ze(Z),le.Tb=te(Z,6),le.wb=te(Z,3),le.Pc=ze(Z),le.Pc&&ze(Z)){for(me=0;4>me;++me)ze(Z)&&(le.vd[me]=he(Z,6));for(me=0;4>me;++me)ze(Z)&&(le.od[me]=he(Z,6))}if(d.L=le.Tb==0?0:le.zd?1:2,Z.Ka)return Mn(d,3,"cannot parse filter header");var Pe=Y;if(Y=fe=L,L=fe+Pe,le=Pe,d.Xb=(1<<te(d.m,2))-1,Pe<3*(me=d.Xb))j=7;else{for(fe+=3*me,le-=3*me,Pe=0;Pe<me;++Pe){var Ye=j[Y+0]|j[Y+1]<<8|j[Y+2]<<16;Ye>le&&(Ye=le),$(d.Jc[+Pe],j,fe,Ye),fe+=Ye,le-=Ye,Y+=3}$(d.Jc[+me],j,fe,le),j=fe<L?0:5}if(j!=0)return Mn(d,j,"cannot parse partitions");for(j=te(fe=d.m,7),Y=ze(fe)?he(fe,4):0,L=ze(fe)?he(fe,4):0,le=ze(fe)?he(fe,4):0,me=ze(fe)?he(fe,4):0,fe=ze(fe)?he(fe,4):0,Pe=d.Qa,Ye=0;4>Ye;++Ye){if(Pe.Cb){var ve=Pe.Zb[Ye];Pe.Fb||(ve+=j)}else{if(0<Ye){d.pb[Ye]=d.pb[0];continue}ve=j}var Me=d.pb[Ye];Me.Sc[0]=Mo[Fi(ve+Y,127)],Me.Sc[1]=ka[Fi(ve+0,127)],Me.Eb[0]=2*Mo[Fi(ve+L,127)],Me.Eb[1]=101581*ka[Fi(ve+le,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=Mo[Fi(ve+me,117)],Me.Qc[1]=ka[Fi(ve+fe,127)],Me.lc=ve+fe}if(!ne.Rb)return Mn(d,4,"Not a key frame.");for(ze(Z),ne=d.Pa,j=0;4>j;++j){for(Y=0;8>Y;++Y)for(L=0;3>L;++L)for(le=0;11>le;++le)me=tt(Z,nr[j][Y][L][le])?te(Z,8):zu[j][Y][L][le],ne.Wc[j][Y].Yb[L][le]=me;for(Y=0;17>Y;++Y)ne.Xc[j][Y]=ne.Wc[j][hi[Y]]}return d.kc=ze(Z),d.kc&&(d.Bd=te(Z,8)),d.cb=1}function Da(d,g,j,L,Y,Z,ne){var le=g[Y].Yb[j];for(j=0;16>Y;++Y){if(!tt(d,le[j+0]))return Y;for(;!tt(d,le[j+1]);)if(le=g[++Y].Yb[0],j=0,Y==16)return 16;var fe=g[Y+1].Yb;if(tt(d,le[j+2])){var me=d,Pe=0;if(tt(me,(ve=le)[(Ye=j)+3]))if(tt(me,ve[Ye+6])){for(le=0,Ye=2*(Pe=tt(me,ve[Ye+8]))+(ve=tt(me,ve[Ye+9+Pe])),Pe=0,ve=xl[Ye];ve[le];++le)Pe+=Pe+tt(me,ve[le]);Pe+=3+(8<<Ye)}else tt(me,ve[Ye+7])?(Pe=7+2*tt(me,165),Pe+=tt(me,145)):Pe=5+tt(me,159);else Pe=tt(me,ve[Ye+4])?3+tt(me,ve[Ye+5]):2;le=fe[2]}else Pe=1,le=fe[1];fe=ne+Lu[Y],0>(me=d).b&&Ge(me);var Ye,ve=me.b,Me=(Ye=me.Ca>>1)-(me.I>>ve)>>31;--me.b,me.Ca+=Me,me.Ca|=1,me.I-=(Ye+1&Me)<<ve,Z[fe]=((Pe^Me)-Me)*L[(0<Y)+0]}return 16}function al(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,u(d.zc,0,0,d.zc.length),d.ja=0}function bi(d,g,j,L,Y){Y=d[g+j+32*L]+(Y>>3),d[g+j+32*L]=-256&Y?0>Y?0:255:Y}function Zn(d,g,j,L,Y,Z){bi(d,g,0,j,L+Y),bi(d,g,1,j,L+Z),bi(d,g,2,j,L-Z),bi(d,g,3,j,L-Y)}function Cr(d){return(20091*d>>16)+d}function Ri(d,g,j,L){var Y,Z=0,ne=f(16);for(Y=0;4>Y;++Y){var le=d[g+0]+d[g+8],fe=d[g+0]-d[g+8],me=(35468*d[g+4]>>16)-Cr(d[g+12]),Pe=Cr(d[g+4])+(35468*d[g+12]>>16);ne[Z+0]=le+Pe,ne[Z+1]=fe+me,ne[Z+2]=fe-me,ne[Z+3]=le-Pe,Z+=4,g++}for(Y=Z=0;4>Y;++Y)le=(d=ne[Z+0]+4)+ne[Z+8],fe=d-ne[Z+8],me=(35468*ne[Z+4]>>16)-Cr(ne[Z+12]),bi(j,L,0,0,le+(Pe=Cr(ne[Z+4])+(35468*ne[Z+12]>>16))),bi(j,L,1,0,fe+me),bi(j,L,2,0,fe-me),bi(j,L,3,0,le-Pe),Z++,L+=32}function qr(d,g,j,L){var Y=d[g+0]+4,Z=35468*d[g+4]>>16,ne=Cr(d[g+4]),le=35468*d[g+1]>>16;Zn(j,L,0,Y+ne,d=Cr(d[g+1]),le),Zn(j,L,1,Y+Z,d,le),Zn(j,L,2,Y-Z,d,le),Zn(j,L,3,Y-ne,d,le)}function sl(d,g,j,L,Y){Ri(d,g,j,L),Y&&Ri(d,g+16,j,L+4)}function Ji(d,g,j,L){Ks(d,g+0,j,L,1),Ks(d,g+32,j,L+128,1)}function ao(d,g,j,L){var Y;for(d=d[g+0]+4,Y=0;4>Y;++Y)for(g=0;4>g;++g)bi(j,L,g,Y,d)}function va(d,g,j,L){d[g+0]&&Vi(d,g+0,j,L),d[g+16]&&Vi(d,g+16,j,L+4),d[g+32]&&Vi(d,g+32,j,L+128),d[g+48]&&Vi(d,g+48,j,L+128+4)}function Hr(d,g,j,L){var Y,Z=f(16);for(Y=0;4>Y;++Y){var ne=d[g+0+Y]+d[g+12+Y],le=d[g+4+Y]+d[g+8+Y],fe=d[g+4+Y]-d[g+8+Y],me=d[g+0+Y]-d[g+12+Y];Z[0+Y]=ne+le,Z[8+Y]=ne-le,Z[4+Y]=me+fe,Z[12+Y]=me-fe}for(Y=0;4>Y;++Y)ne=(d=Z[0+4*Y]+3)+Z[3+4*Y],le=Z[1+4*Y]+Z[2+4*Y],fe=Z[1+4*Y]-Z[2+4*Y],me=d-Z[3+4*Y],j[L+0]=ne+le>>3,j[L+16]=me+fe>>3,j[L+32]=ne-le>>3,j[L+48]=me-fe>>3,L+=64}function wa(d,g,j){var L,Y=g-32,Z=Go,ne=255-d[Y-1];for(L=0;L<j;++L){var le,fe=Z,me=ne+d[g-1];for(le=0;le<j;++le)d[g+le]=fe[me+d[Y+le]];g+=32}}function Sa(d,g){wa(d,g,4)}function _s(d,g){wa(d,g,8)}function Vs(d,g){wa(d,g,16)}function zl(d,g){var j;for(j=0;16>j;++j)s(d,g+32*j,d,g-32,16)}function Pl(d,g){var j;for(j=16;0<j;--j)u(d,g,d[g-1],16),g+=32}function ut(d,g,j){var L;for(L=0;16>L;++L)u(g,j+32*L,d,16)}function Sn(d,g){var j,L=16;for(j=0;16>j;++j)L+=d[g-1+32*j]+d[g+j-32];ut(L>>5,d,g)}function Fo(d,g){var j,L=8;for(j=0;16>j;++j)L+=d[g-1+32*j];ut(L>>4,d,g)}function ll(d,g){var j,L=8;for(j=0;16>j;++j)L+=d[g+j-32];ut(L>>4,d,g)}function Cn(d,g){ut(128,d,g)}function wt(d,g,j){return d+2*g+j+2>>2}function ec(d,g){var j,L=g-32;for(L=new Uint8Array([wt(d[L-1],d[L+0],d[L+1]),wt(d[L+0],d[L+1],d[L+2]),wt(d[L+1],d[L+2],d[L+3]),wt(d[L+2],d[L+3],d[L+4])]),j=0;4>j;++j)s(d,g+32*j,L,0,L.length)}function Dl(d,g){var j=d[g-1],L=d[g-1+32],Y=d[g-1+64],Z=d[g-1+96];Xe(d,g+0,16843009*wt(d[g-1-32],j,L)),Xe(d,g+32,16843009*wt(j,L,Y)),Xe(d,g+64,16843009*wt(L,Y,Z)),Xe(d,g+96,16843009*wt(Y,Z,Z))}function Hn(d,g){var j,L=4;for(j=0;4>j;++j)L+=d[g+j-32]+d[g-1+32*j];for(L>>=3,j=0;4>j;++j)u(d,g+32*j,L,4)}function Kt(d,g){var j=d[g-1+0],L=d[g-1+32],Y=d[g-1+64],Z=d[g-1-32],ne=d[g+0-32],le=d[g+1-32],fe=d[g+2-32],me=d[g+3-32];d[g+0+96]=wt(L,Y,d[g-1+96]),d[g+1+96]=d[g+0+64]=wt(j,L,Y),d[g+2+96]=d[g+1+64]=d[g+0+32]=wt(Z,j,L),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=wt(ne,Z,j),d[g+3+64]=d[g+2+32]=d[g+1+0]=wt(le,ne,Z),d[g+3+32]=d[g+2+0]=wt(fe,le,ne),d[g+3+0]=wt(me,fe,le)}function Dn(d,g){var j=d[g+1-32],L=d[g+2-32],Y=d[g+3-32],Z=d[g+4-32],ne=d[g+5-32],le=d[g+6-32],fe=d[g+7-32];d[g+0+0]=wt(d[g+0-32],j,L),d[g+1+0]=d[g+0+32]=wt(j,L,Y),d[g+2+0]=d[g+1+32]=d[g+0+64]=wt(L,Y,Z),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=wt(Y,Z,ne),d[g+3+32]=d[g+2+64]=d[g+1+96]=wt(Z,ne,le),d[g+3+64]=d[g+2+96]=wt(ne,le,fe),d[g+3+96]=wt(le,fe,fe)}function bn(d,g){var j=d[g-1+0],L=d[g-1+32],Y=d[g-1+64],Z=d[g-1-32],ne=d[g+0-32],le=d[g+1-32],fe=d[g+2-32],me=d[g+3-32];d[g+0+0]=d[g+1+64]=Z+ne+1>>1,d[g+1+0]=d[g+2+64]=ne+le+1>>1,d[g+2+0]=d[g+3+64]=le+fe+1>>1,d[g+3+0]=fe+me+1>>1,d[g+0+96]=wt(Y,L,j),d[g+0+64]=wt(L,j,Z),d[g+0+32]=d[g+1+96]=wt(j,Z,ne),d[g+1+32]=d[g+2+96]=wt(Z,ne,le),d[g+2+32]=d[g+3+96]=wt(ne,le,fe),d[g+3+32]=wt(le,fe,me)}function ri(d,g){var j=d[g+0-32],L=d[g+1-32],Y=d[g+2-32],Z=d[g+3-32],ne=d[g+4-32],le=d[g+5-32],fe=d[g+6-32],me=d[g+7-32];d[g+0+0]=j+L+1>>1,d[g+1+0]=d[g+0+64]=L+Y+1>>1,d[g+2+0]=d[g+1+64]=Y+Z+1>>1,d[g+3+0]=d[g+2+64]=Z+ne+1>>1,d[g+0+32]=wt(j,L,Y),d[g+1+32]=d[g+0+96]=wt(L,Y,Z),d[g+2+32]=d[g+1+96]=wt(Y,Z,ne),d[g+3+32]=d[g+2+96]=wt(Z,ne,le),d[g+3+64]=wt(ne,le,fe),d[g+3+96]=wt(le,fe,me)}function tn(d,g){var j=d[g-1+0],L=d[g-1+32],Y=d[g-1+64],Z=d[g-1+96];d[g+0+0]=j+L+1>>1,d[g+2+0]=d[g+0+32]=L+Y+1>>1,d[g+2+32]=d[g+0+64]=Y+Z+1>>1,d[g+1+0]=wt(j,L,Y),d[g+3+0]=d[g+1+32]=wt(L,Y,Z),d[g+3+32]=d[g+1+64]=wt(Y,Z,Z),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=Z}function tc(d,g){var j=d[g-1+0],L=d[g-1+32],Y=d[g-1+64],Z=d[g-1+96],ne=d[g-1-32],le=d[g+0-32],fe=d[g+1-32],me=d[g+2-32];d[g+0+0]=d[g+2+32]=j+ne+1>>1,d[g+0+32]=d[g+2+64]=L+j+1>>1,d[g+0+64]=d[g+2+96]=Y+L+1>>1,d[g+0+96]=Z+Y+1>>1,d[g+3+0]=wt(le,fe,me),d[g+2+0]=wt(ne,le,fe),d[g+1+0]=d[g+3+32]=wt(j,ne,le),d[g+1+32]=d[g+3+64]=wt(L,j,ne),d[g+1+64]=d[g+3+96]=wt(Y,L,j),d[g+1+96]=wt(Z,Y,L)}function Ut(d,g){var j;for(j=0;8>j;++j)s(d,g+32*j,d,g-32,8)}function Mi(d,g){var j;for(j=0;8>j;++j)u(d,g,d[g-1],8),g+=32}function Ft(d,g,j){var L;for(L=0;8>L;++L)u(g,j+32*L,d,8)}function ki(d,g){var j,L=8;for(j=0;8>j;++j)L+=d[g+j-32]+d[g-1+32*j];Ft(L>>4,d,g)}function Ea(d,g){var j,L=4;for(j=0;8>j;++j)L+=d[g+j-32];Ft(L>>3,d,g)}function so(d,g){var j,L=4;for(j=0;8>j;++j)L+=d[g-1+32*j];Ft(L>>3,d,g)}function Pr(d,g){Ft(128,d,g)}function qo(d,g,j){var L=d[g-j],Y=d[g+0],Z=3*(Y-L)+Yr[1020+d[g-2*j]-d[g+j]],ne=ic[112+(Z+4>>3)];d[g-j]=Go[255+L+ic[112+(Z+3>>3)]],d[g+0]=Go[255+Y-ne]}function Ho(d,g,j,L){var Y=d[g+0],Z=d[g+j];return Eo[255+d[g-2*j]-d[g-j]]>L||Eo[255+Z-Y]>L}function Ls(d,g,j,L){return 4*Eo[255+d[g-j]-d[g+0]]+Eo[255+d[g-2*j]-d[g+j]]<=L}function cl(d,g,j,L,Y){var Z=d[g-3*j],ne=d[g-2*j],le=d[g-j],fe=d[g+0],me=d[g+j],Pe=d[g+2*j],Ye=d[g+3*j];return 4*Eo[255+le-fe]+Eo[255+ne-me]>L?0:Eo[255+d[g-4*j]-Z]<=Y&&Eo[255+Z-ne]<=Y&&Eo[255+ne-le]<=Y&&Eo[255+Ye-Pe]<=Y&&Eo[255+Pe-me]<=Y&&Eo[255+me-fe]<=Y}function Ws(d,g,j,L){var Y=2*L+1;for(L=0;16>L;++L)Ls(d,g+L,j,Y)&&qo(d,g+L,j)}function Ga(d,g,j,L){var Y=2*L+1;for(L=0;16>L;++L)Ls(d,g+L*j,1,Y)&&qo(d,g+L*j,1)}function El(d,g,j,L){var Y;for(Y=3;0<Y;--Y)Ws(d,g+=4*j,j,L)}function bc(d,g,j,L){var Y;for(Y=3;0<Y;--Y)Ga(d,g+=4,j,L)}function ul(d,g,j,L,Y,Z,ne,le){for(Z=2*Z+1;0<Y--;){if(cl(d,g,j,Z,ne))if(Ho(d,g,j,le))qo(d,g,j);else{var fe=d,me=g,Pe=j,Ye=fe[me-2*Pe],ve=fe[me-Pe],Me=fe[me+0],Fe=fe[me+Pe],at=fe[me+2*Pe],We=27*(pt=Yr[1020+3*(Me-ve)+Yr[1020+Ye-Fe]])+63>>7,ot=18*pt+63>>7,pt=9*pt+63>>7;fe[me-3*Pe]=Go[255+fe[me-3*Pe]+pt],fe[me-2*Pe]=Go[255+Ye+ot],fe[me-Pe]=Go[255+ve+We],fe[me+0]=Go[255+Me-We],fe[me+Pe]=Go[255+Fe-ot],fe[me+2*Pe]=Go[255+at-pt]}g+=L}}function fn(d,g,j,L,Y,Z,ne,le){for(Z=2*Z+1;0<Y--;){if(cl(d,g,j,Z,ne))if(Ho(d,g,j,le))qo(d,g,j);else{var fe=d,me=g,Pe=j,Ye=fe[me-Pe],ve=fe[me+0],Me=fe[me+Pe],Fe=ic[112+(4+(at=3*(ve-Ye))>>3)],at=ic[112+(at+3>>3)],We=Fe+1>>1;fe[me-2*Pe]=Go[255+fe[me-2*Pe]+We],fe[me-Pe]=Go[255+Ye+at],fe[me+0]=Go[255+ve-Fe],fe[me+Pe]=Go[255+Me-We]}g+=L}}function as(d,g,j,L,Y,Z){ul(d,g,j,1,16,L,Y,Z)}function vi(d,g,j,L,Y,Z){ul(d,g,1,j,16,L,Y,Z)}function Ys(d,g,j,L,Y,Z){var ne;for(ne=3;0<ne;--ne)fn(d,g+=4*j,j,1,16,L,Y,Z)}function w(d,g,j,L,Y,Z){var ne;for(ne=3;0<ne;--ne)fn(d,g+=4,1,j,16,L,Y,Z)}function q(d,g,j,L,Y,Z,ne,le){ul(d,g,Y,1,8,Z,ne,le),ul(j,L,Y,1,8,Z,ne,le)}function ye(d,g,j,L,Y,Z,ne,le){ul(d,g,1,Y,8,Z,ne,le),ul(j,L,1,Y,8,Z,ne,le)}function Ae(d,g,j,L,Y,Z,ne,le){fn(d,g+4*Y,Y,1,8,Z,ne,le),fn(j,L+4*Y,Y,1,8,Z,ne,le)}function He(d,g,j,L,Y,Z,ne,le){fn(d,g+4,1,Y,8,Z,ne,le),fn(j,L+4,1,Y,8,Z,ne,le)}function lt(){this.ba=new Un,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Wt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function bt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new gn,this.vb=new gn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new J}function jn(){this.xb=this.a=0,this.l=new As,this.ca=new Un,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=v(4,Mt),this.Oc=0}function Jn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new As,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fn(d,g,j,L,Y,Z,ne){for(d=d==null?0:d[g+0],g=0;g<ne;++g)Y[Z+g]=d+j[L+g]&255,d=Y[Z+g]}function tr(d,g,j,L,Y,Z,ne){var le;if(d==null)Fn(null,null,j,L,Y,Z,ne);else for(le=0;le<ne;++le)Y[Z+le]=d[g+le]+j[L+le]&255}function wi(d,g,j,L,Y,Z,ne){if(d==null)Fn(null,null,j,L,Y,Z,ne);else{var le,fe=d[g+0],me=fe,Pe=fe;for(le=0;le<ne;++le)me=Pe+(fe=d[g+le])-me,Pe=j[L+le]+(-256&me?0>me?0:255:me)&255,me=fe,Y[Z+le]=Pe}}function qi(d,g,j,L){var Y=g.width,Z=g.o;if(n(d!=null&&g!=null),0>j||0>=L||j+L>Z)return null;if(!d.Cc){if(d.ga==null){var ne;if(d.ga=new Jn,(ne=d.ga==null)||(ne=g.width*g.o,n(d.Gb.length==0),d.Gb=f(ne),d.Uc=0,d.Gb==null?ne=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,ne=1),ne=!ne),!ne){ne=d.ga;var le=d.Fa,fe=d.P,me=d.qc,Pe=d.mb,Ye=d.nb,ve=fe+1,Me=me-1,Fe=ne.l;if(n(le!=null&&Pe!=null&&g!=null),pa[0]=null,pa[1]=Fn,pa[2]=tr,pa[3]=wi,ne.ca=Pe,ne.tb=Ye,ne.c=g.width,ne.i=g.height,n(0<ne.c&&0<ne.i),1>=me)g=0;else if(ne.$a=3&le[fe+0],ne.Z=le[fe+0]>>2&3,ne.Lc=le[fe+0]>>4&3,fe=le[fe+0]>>6&3,0>ne.$a||1<ne.$a||4<=ne.Z||1<ne.Lc||fe)g=0;else if(Fe.put=Xt,Fe.ac=Ao,Fe.bc=No,Fe.ma=ne,Fe.width=g.width,Fe.height=g.height,Fe.Da=g.Da,Fe.v=g.v,Fe.va=g.va,Fe.j=g.j,Fe.o=g.o,ne.$a)e:{n(ne.$a==1),g=qs();t:for(;;){if(g==null){g=0;break e}if(n(ne!=null),ne.mc=g,g.c=ne.c,g.i=ne.i,g.l=ne.l,g.l.ma=ne,g.l.width=ne.c,g.l.height=ne.i,g.a=0,je(g.m,le,ve,Me),!za(ne.c,ne.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&xi(g.s)?(ne.ic=1,le=g.c*g.i,g.Ta=null,g.Ua=0,g.V=f(le),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(ne.ic=0,g=Pa(g,ne.c)),!g))break t;g=1;break e}ne.mc=null,g=0}else g=Me>=ne.c*ne.i;ne=!g}if(ne)return null;d.ga.Lc!=1?d.Ga=0:L=Z-j}n(d.ga!=null),n(j+L<=Z);e:{if(g=(le=d.ga).c,Z=le.l.o,le.$a==0){if(ve=d.rc,Me=d.Vc,Fe=d.Fa,fe=d.P+1+j*g,me=d.mb,Pe=d.nb+j*g,n(fe<=d.P+d.qc),le.Z!=0)for(n(pa[le.Z]!=null),ne=0;ne<L;++ne)pa[le.Z](ve,Me,Fe,fe,me,Pe,g),ve=me,Me=Pe,Pe+=g,fe+=g;else for(ne=0;ne<L;++ne)s(me,Pe,Fe,fe,g),ve=me,Me=Pe,Pe+=g,fe+=g;d.rc=ve,d.Vc=Me}else{if(n(le.mc!=null),g=j+L,n((ne=le.mc)!=null),n(g<=ne.i),ne.C>=g)g=1;else if(le.ic||ur(),le.ic){le=ne.V,ve=ne.Ba,Me=ne.c;var at=ne.i,We=(Fe=1,fe=ne.$/Me,me=ne.$%Me,Pe=ne.m,Ye=ne.s,ne.$),ot=Me*at,pt=Me*g,St=Ye.wc,st=We<pt?cr(Ye,me,fe):null;n(We<=ot),n(g<=at),n(xi(Ye));t:for(;;){for(;!Pe.h&&We<pt;){if(me&St||(st=cr(Ye,me,fe)),n(st!=null),De(Pe),256>(at=ii(st.G[0],st.H[0],Pe)))le[ve+We]=at,++We,++me>=Me&&(me=0,++fe<=g&&!(fe%16)&&yo(ne,fe));else{if(!(280>at)){Fe=0;break t}at=na(at-256,Pe);var Bt,Ot=ii(st.G[4],st.H[4],Pe);if(De(Pe),!(We>=(Ot=vt(Me,Ot=na(Ot,Pe)))&&ot-We>=at)){Fe=0;break t}for(Bt=0;Bt<at;++Bt)le[ve+We+Bt]=le[ve+We+Bt-Ot];for(We+=at,me+=at;me>=Me;)me-=Me,++fe<=g&&!(fe%16)&&yo(ne,fe);We<pt&&me&St&&(st=cr(Ye,me,fe))}n(Pe.h==de(Pe))}yo(ne,fe>g?g:fe);break t}!Fe||Pe.h&&We<ot?(Fe=0,ne.a=Pe.h?5:3):ne.$=We,g=Fe}else g=ia(ne,ne.V,ne.Ba,ne.c,ne.i,g,os);if(!g){L=0;break e}}j+L>=Z&&(d.Cc=1),L=1}if(!L)return null;if(d.Cc&&((L=d.ga)!=null&&(L.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+j*Y}function Hi(d,g,j,L,Y,Z){for(;0<Y--;){var ne,le=d,fe=g+(j?1:0),me=d,Pe=g+(j?0:3);for(ne=0;ne<L;++ne){var Ye=me[Pe+4*ne];Ye!=255&&(Ye*=32897,le[fe+4*ne+0]=le[fe+4*ne+0]*Ye>>23,le[fe+4*ne+1]=le[fe+4*ne+1]*Ye>>23,le[fe+4*ne+2]=le[fe+4*ne+2]*Ye>>23)}g+=Z}}function Tr(d,g,j,L,Y){for(;0<L--;){var Z;for(Z=0;Z<j;++Z){var ne=d[g+2*Z+0],le=15&(me=d[g+2*Z+1]),fe=4369*le,me=(240&me|me>>4)*fe>>16;d[g+2*Z+0]=(240&ne|ne>>4)*fe>>16&240|(15&ne|ne<<4)*fe>>16>>4&15,d[g+2*Z+1]=240&me|le}g+=Y}}function gr(d,g,j,L,Y,Z,ne,le){var fe,me,Pe=255;for(me=0;me<Y;++me){for(fe=0;fe<L;++fe){var Ye=d[g+fe];Z[ne+4*fe]=Ye,Pe&=Ye}g+=j,ne+=le}return Pe!=255}function zs(d,g,j,L,Y){var Z;for(Z=0;Z<Y;++Z)j[L+Z]=d[g+Z]>>8}function ur(){zi=Hi,Qr=Tr,Wr=gr,Er=zs}function Ra(d,g,j){W[d]=function(L,Y,Z,ne,le,fe,me,Pe,Ye,ve,Me,Fe,at,We,ot,pt,St){var st,Bt=St-1>>1,Ot=le[fe+0]|me[Pe+0]<<16,An=Ye[ve+0]|Me[Fe+0]<<16;n(L!=null);var Yt=3*Ot+An+131074>>2;for(g(L[Y+0],255&Yt,Yt>>16,at,We),Z!=null&&(Yt=3*An+Ot+131074>>2,g(Z[ne+0],255&Yt,Yt>>16,ot,pt)),st=1;st<=Bt;++st){var ti=le[fe+st]|me[Pe+st]<<16,Ki=Ye[ve+st]|Me[Fe+st]<<16,Qn=Ot+ti+An+Ki+524296,qt=Qn+2*(ti+An)>>3;Yt=qt+Ot>>1,Ot=(Qn=Qn+2*(Ot+Ki)>>3)+ti>>1,g(L[Y+2*st-1],255&Yt,Yt>>16,at,We+(2*st-1)*j),g(L[Y+2*st-0],255&Ot,Ot>>16,at,We+(2*st-0)*j),Z!=null&&(Yt=Qn+An>>1,Ot=qt+Ki>>1,g(Z[ne+2*st-1],255&Yt,Yt>>16,ot,pt+(2*st-1)*j),g(Z[ne+2*st+0],255&Ot,Ot>>16,ot,pt+(2*st+0)*j)),Ot=ti,An=Ki}1&St||(Yt=3*Ot+An+131074>>2,g(L[Y+St-1],255&Yt,Yt>>16,at,We+(St-1)*j),Z!=null&&(Yt=3*An+Ot+131074>>2,g(Z[ne+St-1],255&Yt,Yt>>16,ot,pt+(St-1)*j)))}}function Lo(){Yi[Sc]=kr,Yi[mo]=eo,Yi[Cc]=es,Yi[fa]=Fa,Yi[Tc]=Mr,Yi[ds]=uo,Yi[ps]=Gr,Yi[Es]=eo,Yi[yl]=Fa,Yi[ml]=Mr,Yi[rc]=uo}function Ps(d){return d&-16384?0>d?0:255:d>>gs}function Dr(d,g){return Ps((19077*d>>8)+(26149*g>>8)-14234)}function oa(d,g,j){return Ps((19077*d>>8)-(6419*g>>8)-(13320*j>>8)+8708)}function Qi(d,g){return Ps((19077*d>>8)+(33050*g>>8)-17685)}function Ma(d,g,j,L,Y){L[Y+0]=Dr(d,j),L[Y+1]=oa(d,g,j),L[Y+2]=Qi(d,g)}function zo(d,g,j,L,Y){L[Y+0]=Qi(d,g),L[Y+1]=oa(d,g,j),L[Y+2]=Dr(d,j)}function Rl(d,g,j,L,Y){var Z=oa(d,g,j);g=Z<<3&224|Qi(d,g)>>3,L[Y+0]=248&Dr(d,j)|Z>>5,L[Y+1]=g}function ss(d,g,j,L,Y){var Z=240&Qi(d,g)|15;L[Y+0]=240&Dr(d,j)|oa(d,g,j)>>4,L[Y+1]=Z}function fl(d,g,j,L,Y){L[Y+0]=255,Ma(d,g,j,L,Y+1)}function Xa(d,g,j,L,Y){zo(d,g,j,L,Y),L[Y+3]=255}function Vo(d,g,j,L,Y){Ma(d,g,j,L,Y),L[Y+3]=255}function aa(d,g,j){W[d]=function(L,Y,Z,ne,le,fe,me,Pe,Ye){for(var ve=Pe+(-2&Ye)*j;Pe!=ve;)g(L[Y+0],Z[ne+0],le[fe+0],me,Pe),g(L[Y+1],Z[ne+0],le[fe+0],me,Pe+j),Y+=2,++ne,++fe,Pe+=2*j;1&Ye&&g(L[Y+0],Z[ne+0],le[fe+0],me,Pe)}}function dl(d,g,j){return j==0?d==0?g==0?6:5:g==0?4:0:j}function Ca(d,g,j,L,Y){switch(d>>>30){case 3:Ks(g,j,L,Y,0);break;case 2:ua(g,j,L,Y);break;case 1:Vi(g,j,L,Y)}}function Po(d,g){var j,L,Y=g.M,Z=g.Nb,ne=d.oc,le=d.pc+40,fe=d.oc,me=d.pc+584,Pe=d.oc,Ye=d.pc+600;for(j=0;16>j;++j)ne[le+32*j-1]=129;for(j=0;8>j;++j)fe[me+32*j-1]=129,Pe[Ye+32*j-1]=129;for(0<Y?ne[le-1-32]=fe[me-1-32]=Pe[Ye-1-32]=129:(u(ne,le-32-1,127,21),u(fe,me-32-1,127,9),u(Pe,Ye-32-1,127,9)),L=0;L<d.za;++L){var ve=g.ya[g.aa+L];if(0<L){for(j=-1;16>j;++j)s(ne,le+32*j-4,ne,le+32*j+12,4);for(j=-1;8>j;++j)s(fe,me+32*j-4,fe,me+32*j+4,4),s(Pe,Ye+32*j-4,Pe,Ye+32*j+4,4)}var Me=d.Gd,Fe=d.Hd+L,at=ve.ad,We=ve.Hc;if(0<Y&&(s(ne,le-32,Me[Fe].y,0,16),s(fe,me-32,Me[Fe].f,0,8),s(Pe,Ye-32,Me[Fe].ea,0,8)),ve.Za){var ot=ne,pt=le-32+16;for(0<Y&&(L>=d.za-1?u(ot,pt,Me[Fe].y[15],4):s(ot,pt,Me[Fe+1].y,0,4)),j=0;4>j;j++)ot[pt+128+j]=ot[pt+256+j]=ot[pt+384+j]=ot[pt+0+j];for(j=0;16>j;++j,We<<=2)ot=ne,pt=le+Ai[j],Rr[ve.Ob[j]](ot,pt),Ca(We,at,16*+j,ot,pt)}else if(ot=dl(L,Y,ve.Ob[0]),da[ot](ne,le),We!=0)for(j=0;16>j;++j,We<<=2)Ca(We,at,16*+j,ne,le+Ai[j]);for(j=ve.Gc,ot=dl(L,Y,ve.Dd),hs[ot](fe,me),hs[ot](Pe,Ye),We=at,ot=fe,pt=me,255&(ve=0|j)&&(170&ve?Za(We,256,ot,pt):Li(We,256,ot,pt)),ve=Pe,We=Ye,255&(j>>=8)&&(170&j?Za(at,320,ve,We):Li(at,320,ve,We)),Y<d.Ub-1&&(s(Me[Fe].y,0,ne,le+480,16),s(Me[Fe].f,0,fe,me+224,8),s(Me[Fe].ea,0,Pe,Ye+224,8)),j=8*Z*d.B,Me=d.sa,Fe=d.ta+16*L+16*Z*d.R,at=d.qa,ve=d.ra+8*L+j,We=d.Ha,ot=d.Ia+8*L+j,j=0;16>j;++j)s(Me,Fe+j*d.R,ne,le+32*j,16);for(j=0;8>j;++j)s(at,ve+j*d.B,fe,me+32*j,8),s(We,ot+j*d.B,Pe,Ye+32*j,8)}}function Wo(d,g,j,L,Y,Z,ne,le,fe){var me=[0],Pe=[0],Ye=0,ve=fe!=null?fe.kd:0,Me=fe??new bt;if(d==null||12>j)return 7;Me.data=d,Me.w=g,Me.ha=j,g=[g],j=[j],Me.gb=[Me.gb];e:{var Fe=g,at=j,We=Me.gb;if(n(d!=null),n(at!=null),n(We!=null),We[0]=0,12<=at[0]&&!o(d,Fe[0],"RIFF")){if(o(d,Fe[0]+8,"WEBP")){We=3;break e}var ot=It(d,Fe[0]+4);if(12>ot||4294967286<ot){We=3;break e}if(ve&&ot>at[0]-8){We=7;break e}We[0]=ot,Fe[0]+=12,at[0]-=12}We=0}if(We!=0)return We;for(ot=0<Me.gb[0],j=j[0];;){e:{var pt=d;at=g,We=j;var St=me,st=Pe,Bt=Fe=[0];if((Yt=Ye=[Ye])[0]=0,8>We[0])We=7;else{if(!o(pt,at[0],"VP8X")){if(It(pt,at[0]+4)!=10){We=3;break e}if(18>We[0]){We=7;break e}var Ot=It(pt,at[0]+8),An=1+jt(pt,at[0]+12);if(2147483648<=An*(pt=1+jt(pt,at[0]+15))){We=3;break e}Bt!=null&&(Bt[0]=Ot),St!=null&&(St[0]=An),st!=null&&(st[0]=pt),at[0]+=18,We[0]-=18,Yt[0]=1}We=0}}if(Ye=Ye[0],Fe=Fe[0],We!=0)return We;if(at=!!(2&Fe),!ot&&Ye)return 3;if(Z!=null&&(Z[0]=!!(16&Fe)),ne!=null&&(ne[0]=at),le!=null&&(le[0]=0),ne=me[0],Fe=Pe[0],Ye&&at&&fe==null){We=0;break}if(4>j){We=7;break}if(ot&&Ye||!ot&&!Ye&&!o(d,g[0],"ALPH")){j=[j],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{Ot=d,We=g,ot=j;var Yt=Me.gb;St=Me.na,st=Me.P,Bt=Me.Sa,An=22,n(Ot!=null),n(ot!=null),pt=We[0];var ti=ot[0];for(n(St!=null),n(Bt!=null),St[0]=null,st[0]=null,Bt[0]=0;;){if(We[0]=pt,ot[0]=ti,8>ti){We=7;break e}var Ki=It(Ot,pt+4);if(4294967286<Ki){We=3;break e}var Qn=8+Ki+1&-2;if(An+=Qn,0<Yt&&An>Yt){We=3;break e}if(!o(Ot,pt,"VP8 ")||!o(Ot,pt,"VP8L")){We=0;break e}if(ti[0]<Qn){We=7;break e}o(Ot,pt,"ALPH")||(St[0]=Ot,st[0]=pt+8,Bt[0]=Ki),pt+=Qn,ti-=Qn}}if(j=j[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],We!=0)break}j=[j],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(Yt=d,We=g,ot=j,St=Me.gb[0],st=Me.Ja,Bt=Me.xa,Ot=We[0],pt=!o(Yt,Ot,"VP8 "),An=!o(Yt,Ot,"VP8L"),n(Yt!=null),n(ot!=null),n(st!=null),n(Bt!=null),8>ot[0])We=7;else{if(pt||An){if(Yt=It(Yt,Ot+4),12<=St&&Yt>St-12){We=3;break e}if(ve&&Yt>ot[0]-8){We=7;break e}st[0]=Yt,We[0]+=8,ot[0]-=8,Bt[0]=An}else Bt[0]=5<=ot[0]&&Yt[Ot+0]==47&&!(Yt[Ot+4]>>5),st[0]=ot[0];We=0}if(j=j[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],g=g[0],We!=0)break;if(4294967286<Me.Ja)return 3;if(le==null||at||(le[0]=Me.xa?2:1),ne=[ne],Fe=[Fe],Me.xa){if(5>j){We=7;break}le=ne,ve=Fe,at=Z,d==null||5>j?d=0:5<=j&&d[g+0]==47&&!(d[g+4]>>5)?(ot=[0],Yt=[0],St=[0],je(st=new M,d,g,j),ya(st,ot,Yt,St)?(le!=null&&(le[0]=ot[0]),ve!=null&&(ve[0]=Yt[0]),at!=null&&(at[0]=St[0]),d=1):d=0):d=0}else{if(10>j){We=7;break}le=Fe,d==null||10>j||!Ns(d,g+3,j-3)?d=0:(ve=d[g+0]|d[g+1]<<8|d[g+2]<<16,at=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=Me.Ja||!at||!d?d=0:(ne&&(ne[0]=at),le&&(le[0]=d),d=1))}if(!d||(ne=ne[0],Fe=Fe[0],Ye&&(me[0]!=ne||Pe[0]!=Fe)))return 3;fe!=null&&(fe[0]=Me,fe.offset=g-fe.w,n(4294967286>g-fe.w),n(fe.offset==fe.ha-j));break}return We==0||We==7&&Ye&&fe==null?(Z!=null&&(Z[0]|=Me.na!=null&&0<Me.na.length),L!=null&&(L[0]=ne),Y!=null&&(Y[0]=Fe),0):We}function Ds(d,g,j){var L=g.width,Y=g.height,Z=0,ne=0,le=L,fe=Y;if(g.Da=d!=null&&0<d.Da,g.Da&&(le=d.cd,fe=d.bd,Z=d.v,ne=d.j,11>j||(Z&=-2,ne&=-2),0>Z||0>ne||0>=le||0>=fe||Z+le>L||ne+fe>Y))return 0;if(g.v=Z,g.j=ne,g.va=Z+le,g.o=ne+fe,g.U=le,g.T=fe,g.da=d!=null&&0<d.da,g.da){if(!Qt(le,fe,j=[d.ib],Z=[d.hb]))return 0;g.ib=j[0],g.hb=Z[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*L/4&&g.hb<3*Y/4,g.Kb=0),1}function Gs(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function $a(d,g,j,L){if(L==null||0>=d||0>=g)return 2;if(j!=null){if(j.Da){var Y=j.cd,Z=j.bd,ne=-2&j.v,le=-2&j.j;if(0>ne||0>le||0>=Y||0>=Z||ne+Y>d||le+Z>g)return 2;d=Y,g=Z}if(j.da){if(!Qt(d,g,Y=[j.ib],Z=[j.hb]))return 2;d=Y[0],g=Z[0]}}L.width=d,L.height=g;e:{var fe=L.width,me=L.height;if(d=L.S,0>=fe||0>=me||!(d>=Sc&&13>d))d=2;else{if(0>=L.Rd&&L.sd==null){ne=Z=Y=g=0;var Pe=(le=fe*Ul[d])*me;if(11>d||(Z=(me+1)/2*(g=(fe+1)/2),d==12&&(ne=(Y=fe)*me)),(me=f(Pe+2*Z+ne))==null){d=1;break e}L.sd=me,11>d?((fe=L.f.RGBA).eb=me,fe.fb=0,fe.A=le,fe.size=Pe):((fe=L.f.kb).y=me,fe.O=0,fe.fa=le,fe.Fd=Pe,fe.f=me,fe.N=0+Pe,fe.Ab=g,fe.Cd=Z,fe.ea=me,fe.W=0+Pe+Z,fe.Db=g,fe.Ed=Z,d==12&&(fe.F=me,fe.J=0+Pe+2*Z),fe.Tc=ne,fe.lb=Y)}if(g=1,Y=L.S,Z=L.width,ne=L.height,Y>=Sc&&13>Y)if(11>Y)d=L.f.RGBA,g&=(le=Math.abs(d.A))*(ne-1)+Z<=d.size,g&=le>=Z*Ul[Y],g&=d.eb!=null;else{d=L.f.kb,le=(Z+1)/2,Pe=(ne+1)/2,fe=Math.abs(d.fa),me=Math.abs(d.Ab);var Ye=Math.abs(d.Db),ve=Math.abs(d.lb),Me=ve*(ne-1)+Z;g&=fe*(ne-1)+Z<=d.Fd,g&=me*(Pe-1)+le<=d.Cd,g=(g&=Ye*(Pe-1)+le<=d.Ed)&fe>=Z&me>=le&Ye>=le,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,Y==12&&(g&=ve>=Z,g&=Me<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||j!=null&&j.fd&&(d=Gs(L)),d}var Ba=64,sa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],lo=24,pi=32,la=8,Bi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Rt("Predictor0","PredictorAdd0"),W.Predictor0=function(){return 4278190080},W.Predictor1=function(d){return d},W.Predictor2=function(d,g,j){return g[j+0]},W.Predictor3=function(d,g,j){return g[j+1]},W.Predictor4=function(d,g,j){return g[j-1]},W.Predictor5=function(d,g,j){return en(en(d,g[j+1]),g[j+0])},W.Predictor6=function(d,g,j){return en(d,g[j-1])},W.Predictor7=function(d,g,j){return en(d,g[j+0])},W.Predictor8=function(d,g,j){return en(g[j-1],g[j+0])},W.Predictor9=function(d,g,j){return en(g[j+0],g[j+1])},W.Predictor10=function(d,g,j){return en(en(d,g[j-1]),en(g[j+0],g[j+1]))},W.Predictor11=function(d,g,j){var L=g[j+0];return 0>=Dt(L>>24&255,d>>24&255,(g=g[j-1])>>24&255)+Dt(L>>16&255,d>>16&255,g>>16&255)+Dt(L>>8&255,d>>8&255,g>>8&255)+Dt(255&L,255&d,255&g)?L:d},W.Predictor12=function(d,g,j){var L=g[j+0];return(Vn((d>>24&255)+(L>>24&255)-((g=g[j-1])>>24&255))<<24|Vn((d>>16&255)+(L>>16&255)-(g>>16&255))<<16|Vn((d>>8&255)+(L>>8&255)-(g>>8&255))<<8|Vn((255&d)+(255&L)-(255&g)))>>>0},W.Predictor13=function(d,g,j){var L=g[j-1];return(Nt((d=en(d,g[j+0]))>>24&255,L>>24&255)<<24|Nt(d>>16&255,L>>16&255)<<16|Nt(d>>8&255,L>>8&255)<<8|Nt(255&d,255&L))>>>0};var ls=W.PredictorAdd0;W.PredictorAdd1=li,Rt("Predictor2","PredictorAdd2"),Rt("Predictor3","PredictorAdd3"),Rt("Predictor4","PredictorAdd4"),Rt("Predictor5","PredictorAdd5"),Rt("Predictor6","PredictorAdd6"),Rt("Predictor7","PredictorAdd7"),Rt("Predictor8","PredictorAdd8"),Rt("Predictor9","PredictorAdd9"),Rt("Predictor10","PredictorAdd10"),Rt("Predictor11","PredictorAdd11"),Rt("Predictor12","PredictorAdd12"),Rt("Predictor13","PredictorAdd13");var Ml=W.PredictorAdd2;Gt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Gt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var fr,Qc=W.ColorIndexInverseTransform,cs=W.MapARGB,Xs=W.VP8LColorIndexInverseTransformAlpha,Yo=W.MapAlpha,ca=W.VP8LPredictorsAdd=[];ca.length=16,(W.VP8LPredictors=[]).length=16,(W.VP8LPredictorsAdd_C=[]).length=16,(W.VP8LPredictors_C=[]).length=16;var Bl,pl,Ta,co,us,$s,Ka,Ks,ua,Za,Vi,Li,dr,Jr,jr,Vr,Oa,Ia,Zs,hl,gl,fs,vc,Do,zi,Qr,Wr,Er,nc=f(511),Js=f(2041),wc=f(225),Ol=f(767),Wi=0,Yr=Js,ic=wc,Go=Ol,Eo=nc,Sc=0,mo=1,Cc=2,fa=3,Tc=4,ds=5,ps=6,Es=7,yl=8,ml=9,rc=10,Ro=[2,3,7],Rs=[3,3,11],Il=[280,256,256,256,40],Ja=[0,1,1,1,0],xo=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ja=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qa=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ua=8,Mo=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ka=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bo=null,xl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Bc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],zu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Xo=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],hi=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],da=[],Rr=[],hs=[],Aa=1,$o=2,pa=[],Yi=[];Ra("UpsampleRgbLinePair",Ma,3),Ra("UpsampleBgrLinePair",zo,3),Ra("UpsampleRgbaLinePair",Vo,4),Ra("UpsampleBgraLinePair",Xa,4),Ra("UpsampleArgbLinePair",fl,4),Ra("UpsampleRgba4444LinePair",ss,2),Ra("UpsampleRgb565LinePair",Rl,2);var kr=W.UpsampleRgbLinePair,es=W.UpsampleBgrLinePair,eo=W.UpsampleRgbaLinePair,Fa=W.UpsampleBgraLinePair,Mr=W.UpsampleArgbLinePair,uo=W.UpsampleRgba4444LinePair,Gr=W.UpsampleRgb565LinePair,Xr=16,fo=1<<Xr-1,Ko=-227,bo=482,gs=6,vo=0,yr=f(256),Zo=f(256),ts=f(256),qa=f(256),ys=f(bo-Ko),ms=f(bo-Ko);aa("YuvToRgbRow",Ma,3),aa("YuvToBgrRow",zo,3),aa("YuvToRgbaRow",Vo,4),aa("YuvToBgraRow",Xa,4),aa("YuvToArgbRow",fl,4),aa("YuvToRgba4444Row",ss,2),aa("YuvToRgb565Row",Rl,2);var Ai=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],kn=[0,2,8],_n=[8,7,6,4,4,2,2,2,1,1,1,1],Oc=1;this.WebPDecodeRGBA=function(d,g,j,L,Y){var Z=mo,ne=new lt,le=new Un;ne.ba=le,le.S=Z,le.width=[le.width],le.height=[le.height];var fe=le.width,me=le.height,Pe=new un;if(Pe==null||d==null)var Ye=2;else n(Pe!=null),Ye=Wo(d,g,j,Pe.width,Pe.height,Pe.Pd,Pe.Qd,Pe.format,null);if(Ye!=0?fe=0:(fe!=null&&(fe[0]=Pe.width[0]),me!=null&&(me[0]=Pe.height[0]),fe=1),fe){le.width=le.width[0],le.height=le.height[0],L!=null&&(L[0]=le.width),Y!=null&&(Y[0]=le.height);e:{if(L=new As,(Y=new bt).data=d,Y.w=g,Y.ha=j,Y.kd=1,g=[0],n(Y!=null),((d=Wo(Y.data,Y.w,Y.ha,null,null,null,g,null,Y))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(n(ne!=null),L.data=Y.data,L.w=Y.w+Y.offset,L.ha=Y.ha-Y.offset,L.put=Xt,L.ac=Ao,L.bc=No,L.ma=ne,Y.xa){if((d=qs())==null){ne=1;break e}if((function(ve,Me){var Fe=[0],at=[0],We=[0];t:for(;;){if(ve==null)return 0;if(Me==null)return ve.a=2,0;if(ve.l=Me,ve.a=0,je(ve.m,Me.data,Me.w,Me.ha),!ya(ve.m,Fe,at,We)){ve.a=3;break t}if(ve.xb=$o,Me.width=Fe[0],Me.height=at[0],!za(Fe[0],at[0],1,ve,null))break t;return 1}return n(ve.a!=0),0})(d,L)){if(L=(g=$a(L.width,L.height,ne.Oa,ne.ba))==0){t:{L=d;n:for(;;){if(L==null){L=0;break t}if(n(L.s.yc!=null),n(L.s.Ya!=null),n(0<L.s.Wb),n((j=L.l)!=null),n((Y=j.ma)!=null),L.xb!=0){if(L.ca=Y.ba,L.tb=Y.tb,n(L.ca!=null),!Ds(Y.Oa,j,fa)){L.a=2;break n}if(!Pa(L,j.width)||j.da)break n;if((j.da||Vt(L.ca.S))&&ur(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&ur()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!pe(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!ia(L,L.V,L.Ba,L.c,L.i,j.o,Sr))break n;Y.Dc=L.Ma,L=1;break t}n(L.a!=0),L=0}L=!L}L&&(g=d.a)}else g=d.a}else{if((d=new In)==null){ne=1;break e}if(d.Fa=Y.na,d.P=Y.P,d.qc=Y.Sa,Ya(d,L)){if((g=$a(L.width,L.height,ne.Oa,ne.ba))==0){if(d.Aa=0,j=ne.Oa,n((Y=d)!=null),j!=null){if(0<(fe=0>(fe=j.Md)?0:100<fe?255:255*fe/100)){for(me=Pe=0;4>me;++me)12>(Ye=Y.pb[me]).lc&&(Ye.ia=fe*_n[0>Ye.lc?0:Ye.lc]>>3),Pe|=Ye.ia;Pe&&(alert("todo:VP8InitRandom"),Y.ia=1)}Y.Ga=j.Id,100<Y.Ga?Y.Ga=100:0>Y.Ga&&(Y.Ga=0)}(function(ve,Me){if(ve==null)return 0;if(Me==null)return Mn(ve,2,"NULL VP8Io parameter in VP8Decode().");if(!ve.cb&&!Ya(ve,Me))return 0;if(n(ve.cb),Me.ac==null||Me.ac(Me)){Me.ob&&(ve.L=0);var Fe=kn[ve.L];if(ve.L==2?(ve.yb=0,ve.zb=0):(ve.yb=Me.v-Fe>>4,ve.zb=Me.j-Fe>>4,0>ve.yb&&(ve.yb=0),0>ve.zb&&(ve.zb=0)),ve.Va=Me.o+15+Fe>>4,ve.Hb=Me.va+15+Fe>>4,ve.Hb>ve.za&&(ve.Hb=ve.za),ve.Va>ve.Ub&&(ve.Va=ve.Ub),0<ve.L){var at=ve.ed;for(Fe=0;4>Fe;++Fe){var We;if(ve.Qa.Cb){var ot=ve.Qa.Lb[Fe];ve.Qa.Fb||(ot+=at.Tb)}else ot=at.Tb;for(We=0;1>=We;++We){var pt=ve.gd[Fe][We],St=ot;if(at.Pc&&(St+=at.vd[0],We&&(St+=at.od[0])),0<(St=0>St?0:63<St?63:St)){var st=St;0<at.wb&&(st=4<at.wb?st>>2:st>>1)>9-at.wb&&(st=9-at.wb),1>st&&(st=1),pt.dd=st,pt.tc=2*St+st,pt.ld=40<=St?2:15<=St?1:0}else pt.tc=0;pt.La=We}}}Fe=0}else Mn(ve,6,"Frame setup failed"),Fe=ve.a;if(Fe=Fe==0){if(Fe){ve.$c=0,0<ve.Aa||(ve.Ic=Oc);t:{Fe=ve.Ic,at=4*(st=ve.za);var Bt=32*st,Ot=st+1,An=0<ve.L?st*(0<ve.Aa?2:1):0,Yt=(ve.Aa==2?2:1)*st;if((pt=at+832+(We=3*(16*Fe+kn[ve.L])/2*Bt)+(ot=ve.Fa!=null&&0<ve.Fa.length?ve.Kc.c*ve.Kc.i:0))!=pt)Fe=0;else{if(pt>ve.Vb){if(ve.Vb=0,ve.Ec=f(pt),ve.Fc=0,ve.Ec==null){Fe=Mn(ve,1,"no memory during frame initialization.");break t}ve.Vb=pt}pt=ve.Ec,St=ve.Fc,ve.Ac=pt,ve.Bc=St,St+=at,ve.Gd=v(Bt,Hs),ve.Hd=0,ve.rb=v(Ot+1,ra),ve.sb=1,ve.wa=An?v(An,Yn):null,ve.Y=0,ve.D.Nb=0,ve.D.wa=ve.wa,ve.D.Y=ve.Y,0<ve.Aa&&(ve.D.Y+=st),n(!0),ve.oc=pt,ve.pc=St,St+=832,ve.ya=v(Yt,js),ve.aa=0,ve.D.ya=ve.ya,ve.D.aa=ve.aa,ve.Aa==2&&(ve.D.aa+=st),ve.R=16*st,ve.B=8*st,st=(Bt=kn[ve.L])*ve.R,Bt=Bt/2*ve.B,ve.sa=pt,ve.ta=St+st,ve.qa=ve.sa,ve.ra=ve.ta+16*Fe*ve.R+Bt,ve.Ha=ve.qa,ve.Ia=ve.ra+8*Fe*ve.B+Bt,ve.$c=0,St+=We,ve.mb=ot?pt:null,ve.nb=ot?St:null,n(St+ot<=ve.Fc+ve.Vb),al(ve),u(ve.Ac,ve.Bc,0,at),Fe=1}}if(Fe){if(Me.ka=0,Me.y=ve.sa,Me.O=ve.ta,Me.f=ve.qa,Me.N=ve.ra,Me.ea=ve.Ha,Me.Vd=ve.Ia,Me.fa=ve.R,Me.Rc=ve.B,Me.F=null,Me.J=0,!Wi){for(Fe=-255;255>=Fe;++Fe)nc[255+Fe]=0>Fe?-Fe:Fe;for(Fe=-1020;1020>=Fe;++Fe)Js[1020+Fe]=-128>Fe?-128:127<Fe?127:Fe;for(Fe=-112;112>=Fe;++Fe)wc[112+Fe]=-16>Fe?-16:15<Fe?15:Fe;for(Fe=-255;510>=Fe;++Fe)Ol[255+Fe]=0>Fe?0:255<Fe?255:Fe;Wi=1}Ka=Hr,Ks=sl,Za=Ji,Vi=ao,Li=va,ua=qr,dr=as,Jr=vi,jr=q,Vr=ye,Oa=Ys,Ia=w,Zs=Ae,hl=He,gl=Ws,fs=Ga,vc=El,Do=bc,Rr[0]=Hn,Rr[1]=Sa,Rr[2]=ec,Rr[3]=Dl,Rr[4]=Kt,Rr[5]=bn,Rr[6]=Dn,Rr[7]=ri,Rr[8]=tc,Rr[9]=tn,da[0]=Sn,da[1]=Vs,da[2]=zl,da[3]=Pl,da[4]=Fo,da[5]=ll,da[6]=Cn,hs[0]=ki,hs[1]=_s,hs[2]=Ut,hs[3]=Mi,hs[4]=so,hs[5]=Ea,hs[6]=Pr,Fe=1}else Fe=0}Fe&&(Fe=(function(ti,Ki){for(ti.M=0;ti.M<ti.Va;++ti.M){var Qn,qt=ti.Jc[ti.M&ti.Xb],zt=ti.m,Ci=ti;for(Qn=0;Qn<Ci.za;++Qn){var Zt=zt,En=Ci,gi=En.Ac,Br=En.Bc+4*Qn,wo=En.zc,yi=En.ya[En.aa+Qn];if(En.Qa.Bb?yi.$b=tt(Zt,En.Pa.jb[0])?2+tt(Zt,En.Pa.jb[2]):tt(Zt,En.Pa.jb[1]):yi.$b=0,En.kc&&(yi.Ad=tt(Zt,En.Bd)),yi.Za=!tt(Zt,145)+0,yi.Za){var Ar=yi.Ob,Oo=0;for(En=0;4>En;++En){var to,ni=wo[0+En];for(to=0;4>to;++to){ni=Xo[gi[Br+to]][ni];for(var Pi=Bc[tt(Zt,ni[0])];0<Pi;)Pi=Bc[2*Pi+tt(Zt,ni[Pi])];ni=-Pi,gi[Br+to]=ni}s(Ar,Oo,gi,Br,4),Oo+=4,wo[0+En]=ni}}else ni=tt(Zt,156)?tt(Zt,128)?1:3:tt(Zt,163)?2:0,yi.Ob[0]=ni,u(gi,Br,ni,4),u(wo,0,ni,4);yi.Dd=tt(Zt,142)?tt(Zt,114)?tt(Zt,183)?1:3:2:0}if(Ci.m.Ka)return Mn(ti,7,"Premature end-of-partition0 encountered.");for(;ti.ja<ti.za;++ti.ja){if(Ci=qt,Zt=(zt=ti).rb[zt.sb-1],gi=zt.rb[zt.sb+zt.ja],Qn=zt.ya[zt.aa+zt.ja],Br=zt.kc?Qn.Ad:0)Zt.la=gi.la=0,Qn.Za||(Zt.Na=gi.Na=0),Qn.Hc=0,Qn.Gc=0,Qn.ia=0;else{var mr,ci;if(Zt=gi,gi=Ci,Br=zt.Pa.Xc,wo=zt.ya[zt.aa+zt.ja],yi=zt.pb[wo.$b],En=wo.ad,Ar=0,Oo=zt.rb[zt.sb-1],ni=to=0,u(En,Ar,0,384),wo.Za)var Nr=0,pr=Br[3];else{Pi=f(16);var Ni=Zt.Na+Oo.Na;if(Ni=Bo(gi,Br[1],Ni,yi.Eb,0,Pi,0),Zt.Na=Oo.Na=(0<Ni)+0,1<Ni)Ka(Pi,0,En,Ar);else{var $r=Pi[0]+3>>3;for(Pi=0;256>Pi;Pi+=16)En[Ar+Pi]=$r}Nr=1,pr=Br[0]}var Oi=15&Zt.la,no=15&Oo.la;for(Pi=0;4>Pi;++Pi){var _r=1&no;for($r=ci=0;4>$r;++$r)Oi=Oi>>1|(_r=(Ni=Bo(gi,pr,Ni=_r+(1&Oi),yi.Sc,Nr,En,Ar))>Nr)<<7,ci=ci<<2|(3<Ni?3:1<Ni?2:En[Ar+0]!=0),Ar+=16;Oi>>=4,no=no>>1|_r<<7,to=(to<<8|ci)>>>0}for(pr=Oi,Nr=no>>4,mr=0;4>mr;mr+=2){for(ci=0,Oi=Zt.la>>4+mr,no=Oo.la>>4+mr,Pi=0;2>Pi;++Pi){for(_r=1&no,$r=0;2>$r;++$r)Ni=_r+(1&Oi),Oi=Oi>>1|(_r=0<(Ni=Bo(gi,Br[2],Ni,yi.Qc,0,En,Ar)))<<3,ci=ci<<2|(3<Ni?3:1<Ni?2:En[Ar+0]!=0),Ar+=16;Oi>>=2,no=no>>1|_r<<5}ni|=ci<<4*mr,pr|=Oi<<4<<mr,Nr|=(240&no)<<mr}Zt.la=pr,Oo.la=Nr,wo.Hc=to,wo.Gc=ni,wo.ia=43690&ni?0:yi.ia,Br=!(to|ni)}if(0<zt.L&&(zt.wa[zt.Y+zt.ja]=zt.gd[Qn.$b][Qn.Za],zt.wa[zt.Y+zt.ja].La|=!Br),Ci.Ka)return Mn(ti,7,"Premature end-of-file encountered.")}if(al(ti),zt=Ki,Ci=1,Qn=(qt=ti).D,Zt=0<qt.L&&qt.M>=qt.zb&&qt.M<=qt.Va,qt.Aa==0)t:{if(Qn.M=qt.M,Qn.uc=Zt,Po(qt,Qn),Ci=1,Qn=(ci=qt.D).Nb,Zt=(ni=kn[qt.L])*qt.R,gi=ni/2*qt.B,Pi=16*Qn*qt.R,$r=8*Qn*qt.B,Br=qt.sa,wo=qt.ta-Zt+Pi,yi=qt.qa,En=qt.ra-gi+$r,Ar=qt.Ha,Oo=qt.Ia-gi+$r,no=(Oi=ci.M)==0,to=Oi>=qt.Va-1,qt.Aa==2&&Po(qt,ci),ci.uc)for(_r=(Ni=qt).D.M,n(Ni.D.uc),ci=Ni.yb;ci<Ni.Hb;++ci){Nr=ci,pr=_r;var Gi=(Ti=(Kr=Ni).D).Nb;mr=Kr.R;var Ti=Ti.wa[Ti.Y+Nr],So=Kr.sa,sr=Kr.ta+16*Gi*mr+16*Nr,dn=Ti.dd,vn=Ti.tc;if(vn!=0)if(n(3<=vn),Kr.L==1)0<Nr&&fs(So,sr,mr,vn+4),Ti.La&&Do(So,sr,mr,vn),0<pr&&gl(So,sr,mr,vn+4),Ti.La&&vc(So,sr,mr,vn);else{var _i=Kr.B,Jo=Kr.qa,Ha=Kr.ra+8*Gi*_i+8*Nr,Na=Kr.Ha,Kr=Kr.Ia+8*Gi*_i+8*Nr;Gi=Ti.ld,0<Nr&&(Jr(So,sr,mr,vn+4,dn,Gi),Vr(Jo,Ha,Na,Kr,_i,vn+4,dn,Gi)),Ti.La&&(Ia(So,sr,mr,vn,dn,Gi),hl(Jo,Ha,Na,Kr,_i,vn,dn,Gi)),0<pr&&(dr(So,sr,mr,vn+4,dn,Gi),jr(Jo,Ha,Na,Kr,_i,vn+4,dn,Gi)),Ti.La&&(Oa(So,sr,mr,vn,dn,Gi),Zs(Jo,Ha,Na,Kr,_i,vn,dn,Gi))}}if(qt.ia&&alert("todo:DitherRow"),zt.put!=null){if(ci=16*Oi,Oi=16*(Oi+1),no?(zt.y=qt.sa,zt.O=qt.ta+Pi,zt.f=qt.qa,zt.N=qt.ra+$r,zt.ea=qt.Ha,zt.W=qt.Ia+$r):(ci-=ni,zt.y=Br,zt.O=wo,zt.f=yi,zt.N=En,zt.ea=Ar,zt.W=Oo),to||(Oi-=ni),Oi>zt.o&&(Oi=zt.o),zt.F=null,zt.J=null,qt.Fa!=null&&0<qt.Fa.length&&ci<Oi&&(zt.J=qi(qt,zt,ci,Oi-ci),zt.F=qt.mb,zt.F==null&&zt.F.length==0)){Ci=Mn(qt,3,"Could not decode alpha data.");break t}ci<zt.j&&(ni=zt.j-ci,ci=zt.j,n(!(1&ni)),zt.O+=qt.R*ni,zt.N+=qt.B*(ni>>1),zt.W+=qt.B*(ni>>1),zt.F!=null&&(zt.J+=zt.width*ni)),ci<Oi&&(zt.O+=zt.v,zt.N+=zt.v>>1,zt.W+=zt.v>>1,zt.F!=null&&(zt.J+=zt.v),zt.ka=ci-zt.j,zt.U=zt.va-zt.v,zt.T=Oi-ci,Ci=zt.put(zt))}Qn+1!=qt.Ic||to||(s(qt.sa,qt.ta-Zt,Br,wo+16*qt.R,Zt),s(qt.qa,qt.ra-gi,yi,En+8*qt.B,gi),s(qt.Ha,qt.Ia-gi,Ar,Oo+8*qt.B,gi))}if(!Ci)return Mn(ti,6,"Output aborted.")}return 1})(ve,Me)),Me.bc!=null&&Me.bc(Me),Fe&=1}return Fe?(ve.cb=0,Fe):0})(d,L)||(g=d.a)}}else g=d.a}g==0&&ne.Oa!=null&&ne.Oa.fd&&(g=Gs(ne.ba))}ne=g}Z=ne!=0?null:11>Z?le.f.RGBA.eb:le.f.kb.y}else Z=null;return Z};var Ul=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function x(W,X){for(var k="",S=0;S<4;S++)k+=String.fromCharCode(W[X++]);return k}function T(W,X){return W[X+0]|W[X+1]<<8}function D(W,X){return(W[X+0]|W[X+1]<<8|W[X+2]<<16)>>>0}function E(W,X){return(W[X+0]|W[X+1]<<8|W[X+2]<<16|W[X+3]<<24)>>>0}new b;var C=[0],K=[0],O=[],z=new b,V=r,ae=(function(W,X){var k={},S=0,J=!1,ie=0,ge=0;if(k.frames=[],!(function(A,M){for(var B=0;B<4;B++)if(A[M+B]!="RIFF".charCodeAt(B))return!0;return!1})(W,X)){for(E(W,X+=4),X+=8;X<W.length;){var $=x(W,X),te=E(W,X+=4);X+=4;var he=te+(1&te);switch($){case"VP8 ":case"VP8L":k.frames[S]===void 0&&(k.frames[S]={}),(F=k.frames[S]).src_off=J?ge:X-8,F.src_size=ie+te+8,S++,J&&(J=!1,ie=0,ge=0);break;case"VP8X":(F=k.header={}).feature_flags=W[X];var je=X+4;F.canvas_width=1+D(W,je),je+=3,F.canvas_height=1+D(W,je),je+=3;break;case"ALPH":J=!0,ie=he+8,ge=X-8;break;case"ANIM":(F=k.header).bgcolor=E(W,X),je=X+4,F.loop_count=T(W,je),je+=2;break;case"ANMF":var be,F;(F=k.frames[S]={}).offset_x=2*D(W,X),X+=3,F.offset_y=2*D(W,X),X+=3,F.width=1+D(W,X),X+=3,F.height=1+D(W,X),X+=3,F.duration=D(W,X),X+=3,be=W[X++],F.dispose=1&be,F.blend=be>>1&1}$!="ANMF"&&(X+=he)}return k}})(V,0);ae.response=V,ae.rgbaoutput=!0,ae.dataurl=!1;var ce=ae.header?ae.header:null,H=ae.frames?ae.frames:null;if(ce){ce.loop_counter=ce.loop_count,C=[ce.canvas_height],K=[ce.canvas_width];for(var se=0;se<H.length&&H[se].blend!=0;se++);}var Q=H[0],N=z.WebPDecodeRGBA(V,Q.src_off,Q.src_size,K,C);Q.rgba=N,Q.imgwidth=K[0],Q.imgheight=C[0];for(var R=0;R<K[0]*C[0]*4;R++)O[R]=N[R];return this.width=K,this.height=C,this.data=O,this}(function(r){var n,o,s,u,f,v,h,b,x,T=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new b,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new v,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new v,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new D(this),n=this.internal.f2,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,u=this.internal.getHorizontalCoordinate,f=this.internal.getVerticalCoordinate,v=this.internal.Point,h=this.internal.Rectangle,b=this.internal.Matrix,x=new T}]);var D=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var M=A;Object.defineProperty(this,"pdf",{get:function(){return M}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(pe){B=!!pe}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(pe){de=!!pe}});var ke=0;Object.defineProperty(this,"posX",{get:function(){return ke},set:function(pe){isNaN(pe)||(ke=pe)}});var De=0;Object.defineProperty(this,"posY",{get:function(){return De},set:function(pe){isNaN(pe)||(De=pe)}}),Object.defineProperty(this,"margin",{get:function(){return x.margin},set:function(pe){var Pt;typeof pe=="number"?Pt=[pe,pe,pe,pe]:((Pt=new Array(4))[0]=pe[0],Pt[1]=pe.length>=2?pe[1]:Pt[0],Pt[2]=pe.length>=3?pe[2]:Pt[0],Pt[3]=pe.length>=4?pe[3]:Pt[1]),x.margin=Pt}});var Ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ge},set:function(pe){Ge=pe}});var ze=0;Object.defineProperty(this,"lastBreak",{get:function(){return ze},set:function(pe){ze=pe}});var tt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return tt},set:function(pe){tt=pe}}),Object.defineProperty(this,"ctx",{get:function(){return x},set:function(pe){pe instanceof T&&(x=pe)}}),Object.defineProperty(this,"path",{get:function(){return x.path},set:function(pe){x.path=pe}});var Xe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Xe},set:function(pe){Xe=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var Pt;Pt=E(pe),this.ctx.fillStyle=Pt.style,this.ctx.isFillTransparent=Pt.a===0,this.ctx.fillOpacity=Pt.a,this.pdf.setFillColor(Pt.r,Pt.g,Pt.b,{a:Pt.a}),this.pdf.setTextColor(Pt.r,Pt.g,Pt.b,{a:Pt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var Pt=E(pe);this.ctx.strokeStyle=Pt.style,this.ctx.isStrokeTransparent=Pt.a===0,this.ctx.strokeOpacity=Pt.a,Pt.a===0?this.pdf.setDrawColor(255,255,255):(Pt.a,this.pdf.setDrawColor(Pt.r,Pt.g,Pt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var Tt=null,jt=null,It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function(pe){Tt=null,jt=null,It=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var Pt;if(this.ctx.font=pe,(Pt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(pe))!==null){var gn=Pt[1];Pt[2];var Qt=Pt[3],ht=Pt[4];Pt[5];var nn=Pt[6],Rt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ht)[2];ht=Math.floor(Rt==="px"?parseFloat(ht)*this.pdf.internal.scaleFactor:Rt==="em"?parseFloat(ht)*this.pdf.getFontSize():parseFloat(ht)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ht);var mn=(function(Gt){var zn,Nn,rn=[],xn=Gt.trim();if(xn==="")return d0;if(xn in s2)return[s2[xn]];for(;xn!=="";){switch(Nn=null,zn=(xn=c2(xn)).charAt(0)){case'"':case"'":Nn=q5(xn.substring(1),zn);break;default:Nn=H5(xn)}if(Nn===null||(rn.push(Nn[0]),(xn=c2(Nn[1]))!==""&&xn.charAt(0)!==","))return d0;xn=xn.replace(/^,/,"")}return rn})(nn);if(this.fontFaces){var en=(function(Gt,zn){var Nn=Gt.getFontList(),rn=JSON.stringify(Nn);if(Tt===null||jt!==rn){var xn=(function(rt){var $t=[];return Object.keys(rt).forEach(function(Ht){rt[Ht].forEach(function(Vt){var wn=null;switch(Vt){case"bold":wn={family:Ht,weight:"bold"};break;case"italic":wn={family:Ht,style:"italic"};break;case"bolditalic":wn={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":wn={family:Ht}}wn!==null&&(wn.ref={name:Ht,style:Vt},$t.push(wn))})}),$t})(Nn);Tt=(function(rt){for(var $t={},Ht=0;Ht<rt.length;++Ht){var Vt=f0(rt[Ht]),wn=Vt.family,Xi=Vt.stretch,Un=Vt.style,un=Vt.weight;$t[wn]=$t[wn]||{},$t[wn][Xi]=$t[wn][Xi]||{},$t[wn][Xi][Un]=$t[wn][Xi][Un]||{},$t[wn][Xi][Un][un]=Vt}return $t})(xn.concat(zn)),jt=rn}return Tt})(this.pdf,this.fontFaces),Vn=mn.map(function(Gt){return{family:Gt,stretch:"normal",weight:Qt,style:gn}}),Nt=(function(Gt,zn,Nn){for(var rn=(Nn=Nn||{}).defaultFontFamily||"times",xn=Object.assign({},F5,Nn.genericFontFamilies||{}),rt=null,$t=null,Ht=0;Ht<zn.length;++Ht)if(xn[(rt=f0(zn[Ht])).family]&&(rt.family=xn[rt.family]),Gt.hasOwnProperty(rt.family)){$t=Gt[rt.family];break}if(!($t=$t||Gt[rn]))throw new Error("Could not find a font-family for the rule '"+l2(rt)+"' and default family '"+rn+"'.");if($t=(function(Vt,wn){if(wn[Vt])return wn[Vt];var Xi=_0[Vt],Un=Xi<=_0.normal?-1:1,un=a2(wn,Sy,Xi,Un);if(!un)throw new Error("Could not find a matching font-stretch value for "+Vt);return un})(rt.stretch,$t),$t=(function(Vt,wn){if(wn[Vt])return wn[Vt];for(var Xi=wy[Vt],Un=0;Un<Xi.length;++Un)if(wn[Xi[Un]])return wn[Xi[Un]];throw new Error("Could not find a matching font-style for "+Vt)})(rt.style,$t),!($t=(function(Vt,wn){if(wn[Vt])return wn[Vt];if(Vt===400&&wn[500])return wn[500];if(Vt===500&&wn[400])return wn[400];var Xi=U5[Vt],Un=a2(wn,Cy,Xi,Vt<400?-1:1);if(!Un)throw new Error("Could not find a matching font-weight for value "+Vt);return Un})(rt.weight,$t)))throw new Error("Failed to resolve a font for the rule '"+l2(rt)+"'.");return $t})(en,Vn);this.pdf.setFont(Nt.ref.name,Nt.ref.style)}else{var Dt="";(Qt==="bold"||parseInt(Qt,10)>=700||gn==="bold")&&(Dt="bold"),gn==="italic"&&(Dt+="italic"),Dt.length===0&&(Dt="normal");for(var li="",ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<mn.length;kt++){if(this.pdf.internal.getFont(mn[kt],Dt,{noFallback:!0,disableWarning:!0})!==void 0){li=mn[kt];break}if(Dt==="bolditalic"&&this.pdf.internal.getFont(mn[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)li=mn[kt],Dt="bold";else if(this.pdf.internal.getFont(mn[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){li=mn[kt],Dt="normal";break}}if(li===""){for(var Rn=0;Rn<mn.length;Rn++)if(ct[mn[Rn]]){li=ct[mn[Rn]];break}}li=li===""?"Times":li,this.pdf.setFont(li,Dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};D.prototype.setLineDash=function(A){this.lineDash=A},D.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},D.prototype.fill=function(){H.call(this,"fill",!1)},D.prototype.stroke=function(){H.call(this,"stroke",!1)},D.prototype.beginPath=function(){this.path=[{type:"begin"}]},D.prototype.moveTo=function(A,M){if(isNaN(A)||isNaN(M))throw Fr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new v(A,M));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new v(A,M)},D.prototype.closePath=function(){var A=new v(0,0),M=0;for(M=this.path.length-1;M!==-1;M--)if(this.path[M].type==="begin"&&wr(this.path[M+1])==="object"&&typeof this.path[M+1].x=="number"){A=new v(this.path[M+1].x,this.path[M+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new v(A.x,A.y)},D.prototype.lineTo=function(A,M){if(isNaN(A)||isNaN(M))throw Fr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new v(A,M));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new v(B.x,B.y)},D.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),H.call(this,null,!0)},D.prototype.quadraticCurveTo=function(A,M,B,de){if(isNaN(B)||isNaN(de)||isNaN(A)||isNaN(M))throw Fr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ke=this.ctx.transform.applyToPoint(new v(B,de)),De=this.ctx.transform.applyToPoint(new v(A,M));this.path.push({type:"qct",x1:De.x,y1:De.y,x:ke.x,y:ke.y}),this.ctx.lastPoint=new v(ke.x,ke.y)},D.prototype.bezierCurveTo=function(A,M,B,de,ke,De){if(isNaN(ke)||isNaN(De)||isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Fr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ge=this.ctx.transform.applyToPoint(new v(ke,De)),ze=this.ctx.transform.applyToPoint(new v(A,M)),tt=this.ctx.transform.applyToPoint(new v(B,de));this.path.push({type:"bct",x1:ze.x,y1:ze.y,x2:tt.x,y2:tt.y,x:Ge.x,y:Ge.y}),this.ctx.lastPoint=new v(Ge.x,Ge.y)},D.prototype.arc=function(A,M,B,de,ke,De){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de)||isNaN(ke))throw Fr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(De=!!De,!this.ctx.transform.isIdentity){var Ge=this.ctx.transform.applyToPoint(new v(A,M));A=Ge.x,M=Ge.y;var ze=this.ctx.transform.applyToPoint(new v(0,B)),tt=this.ctx.transform.applyToPoint(new v(0,0));B=Math.sqrt(Math.pow(ze.x-tt.x,2)+Math.pow(ze.y-tt.y,2))}Math.abs(ke-de)>=2*Math.PI&&(de=0,ke=2*Math.PI),this.path.push({type:"arc",x:A,y:M,radius:B,startAngle:de,endAngle:ke,counterclockwise:De})},D.prototype.arcTo=function(A,M,B,de,ke){throw new Error("arcTo not implemented.")},D.prototype.rect=function(A,M,B,de){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Fr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,M),this.lineTo(A+B,M),this.lineTo(A+B,M+de),this.lineTo(A,M+de),this.lineTo(A,M),this.lineTo(A+B,M),this.lineTo(A,M)},D.prototype.fillRect=function(A,M,B,de){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Fr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var ke={};this.lineCap!=="butt"&&(ke.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ke.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,M,B,de),this.fill(),ke.hasOwnProperty("lineCap")&&(this.lineCap=ke.lineCap),ke.hasOwnProperty("lineJoin")&&(this.lineJoin=ke.lineJoin)}},D.prototype.strokeRect=function(A,M,B,de){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Fr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");K.call(this)||(this.beginPath(),this.rect(A,M,B,de),this.stroke())},D.prototype.clearRect=function(A,M,B,de){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Fr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,M,B,de))},D.prototype.save=function(A){A=typeof A!="boolean"||A;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(M),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new T(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},D.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(M),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},D.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var E=function(A){var M,B,de,ke;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))M=0,B=0,de=0,ke=0;else{var De=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(De!==null)M=parseInt(De[1]),B=parseInt(De[2]),de=parseInt(De[3]),ke=1;else if((De=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)M=parseInt(De[1]),B=parseInt(De[2]),de=parseInt(De[3]),ke=parseFloat(De[4]);else{if(ke=1,typeof A=="string"&&A.charAt(0)!=="#"){var Ge=new hy(A);A=Ge.ok?Ge.toHex():"#000000"}A.length===4?(M=A.substring(1,2),M+=M,B=A.substring(2,3),B+=B,de=A.substring(3,4),de+=de):(M=A.substring(1,3),B=A.substring(3,5),de=A.substring(5,7)),M=parseInt(M,16),B=parseInt(B,16),de=parseInt(de,16)}}return{r:M,g:B,b:de,a:ke,style:A}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},K=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};D.prototype.fillText=function(A,M,B,de){if(isNaN(M)||isNaN(B)||typeof A!="string")throw Fr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!C.call(this)){var ke=he(this.ctx.transform.rotation),De=this.ctx.transform.scaleX;S.call(this,{text:A,x:M,y:B,scale:De,angle:ke,align:this.textAlign,maxWidth:de})}},D.prototype.strokeText=function(A,M,B,de){if(isNaN(M)||isNaN(B)||typeof A!="string")throw Fr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!K.call(this)){de=isNaN(de)?void 0:de;var ke=he(this.ctx.transform.rotation),De=this.ctx.transform.scaleX;S.call(this,{text:A,x:M,y:B,scale:De,renderingMode:"stroke",angle:ke,align:this.textAlign,maxWidth:de})}},D.prototype.measureText=function(A){if(typeof A!="string")throw Fr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var M=this.pdf,B=this.pdf.internal.scaleFactor,de=M.internal.getFontSize(),ke=M.getStringUnitWidth(A)*de/M.internal.scaleFactor;return new function(De){var Ge=(De=De||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ge}}),this}({width:ke*=Math.round(96*B/72*1e4)/1e4})},D.prototype.scale=function(A,M){if(isNaN(A)||isNaN(M))throw Fr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new b(A,0,0,M,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},D.prototype.rotate=function(A){if(isNaN(A))throw Fr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var M=new b(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(M)},D.prototype.translate=function(A,M){if(isNaN(A)||isNaN(M))throw Fr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new b(1,0,0,1,A,M);this.ctx.transform=this.ctx.transform.multiply(B)},D.prototype.transform=function(A,M,B,de,ke,De){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de)||isNaN(ke)||isNaN(De))throw Fr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ge=new b(A,M,B,de,ke,De);this.ctx.transform=this.ctx.transform.multiply(Ge)},D.prototype.setTransform=function(A,M,B,de,ke,De){A=isNaN(A)?1:A,M=isNaN(M)?0:M,B=isNaN(B)?0:B,de=isNaN(de)?1:de,ke=isNaN(ke)?0:ke,De=isNaN(De)?0:De,this.ctx.transform=new b(A,M,B,de,ke,De)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};D.prototype.drawImage=function(A,M,B,de,ke,De,Ge,ze,tt){var Xe=this.pdf.getImageProperties(A),Tt=1,jt=1,It=1,pe=1;de!==void 0&&ze!==void 0&&(It=ze/de,pe=tt/ke,Tt=Xe.width/de*ze/de,jt=Xe.height/ke*tt/ke),De===void 0&&(De=M,Ge=B,M=0,B=0),de!==void 0&&ze===void 0&&(ze=de,tt=ke),de===void 0&&ze===void 0&&(ze=Xe.width,tt=Xe.height);var Pt=this.ctx.transform.decompose(),gn=he(Pt.rotate.shx),Qt=new b,ht=(Qt=(Qt=(Qt=Qt.multiply(Pt.translate)).multiply(Pt.skew)).multiply(Pt.scale)).applyToRectangle(new h(De-M*It,Ge-B*pe,de*Tt,ke*jt));if(this.autoPaging){for(var nn,Rt=z.call(this,ht),mn=[],en=0;en<Rt.length;en+=1)mn.indexOf(Rt[en])===-1&&mn.push(Rt[en]);ce(mn);for(var Vn=mn[0],Nt=mn[mn.length-1],Dt=Vn;Dt<Nt+1;Dt++){this.pdf.setPage(Dt);var li=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=Dt===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=Dt===1?0:kt+(Dt-2)*Rn;if(this.ctx.clip_path.length!==0){var zn=this.path;nn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ae(nn,this.posX+this.margin[3],-Gt+ct+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=zn}var Nn=JSON.parse(JSON.stringify(ht));Nn=ae([Nn],this.posX+this.margin[3],-Gt+ct+this.ctx.prevPageLastElemOffset)[0];var rn=(Dt>Vn||Dt<Nt)&&O.call(this);rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],li,Rn,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",Nn.x,Nn.y,Nn.w,Nn.h,null,null,gn),rn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(A,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,gn)};var z=function(A,M,B){var de=[];M=M||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ke=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":de.push(Math.floor((A.y+ke)/B)+1);break;case"arc":de.push(Math.floor((A.y+ke-A.radius)/B)+1),de.push(Math.floor((A.y+ke+A.radius)/B)+1);break;case"qct":var De=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);de.push(Math.floor((De.y+ke)/B)+1),de.push(Math.floor((De.y+De.h+ke)/B)+1);break;case"bct":var Ge=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);de.push(Math.floor((Ge.y+ke)/B)+1),de.push(Math.floor((Ge.y+Ge.h+ke)/B)+1);break;case"rect":de.push(Math.floor((A.y+ke)/B)+1),de.push(Math.floor((A.y+A.h+ke)/B)+1)}for(var ze=0;ze<de.length;ze+=1)for(;this.pdf.internal.getNumberOfPages()<de[ze];)V.call(this);return de},V=function(){var A=this.fillStyle,M=this.strokeStyle,B=this.font,de=this.lineCap,ke=this.lineWidth,De=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=M,this.font=B,this.lineCap=de,this.lineWidth=ke,this.lineJoin=De},ae=function(A,M,B){for(var de=0;de<A.length;de++)switch(A[de].type){case"bct":A[de].x2+=M,A[de].y2+=B;case"qct":A[de].x1+=M,A[de].y1+=B;default:A[de].x+=M,A[de].y+=B}return A},ce=function(A){return A.sort(function(M,B){return M-B})},H=function(A,M){var B=this.fillStyle,de=this.strokeStyle,ke=this.lineCap,De=this.lineWidth,Ge=Math.abs(De*this.ctx.transform.scaleX),ze=this.lineJoin;if(this.autoPaging){for(var tt,Xe,Tt=JSON.parse(JSON.stringify(this.path)),jt=JSON.parse(JSON.stringify(this.path)),It=[],pe=0;pe<jt.length;pe++)if(jt[pe].x!==void 0)for(var Pt=z.call(this,jt[pe]),gn=0;gn<Pt.length;gn+=1)It.indexOf(Pt[gn])===-1&&It.push(Pt[gn]);for(var Qt=0;Qt<It.length;Qt++)for(;this.pdf.internal.getNumberOfPages()<It[Qt];)V.call(this);ce(It);for(var ht=It[0],nn=It[It.length-1],Rt=ht;Rt<nn+1;Rt++){this.pdf.setPage(Rt),this.fillStyle=B,this.strokeStyle=de,this.lineCap=ke,this.lineWidth=Ge,this.lineJoin=ze;var mn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],en=Rt===1?this.posY+this.margin[0]:this.margin[0],Vn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=Rt===1?0:Vn+(Rt-2)*Nt;if(this.ctx.clip_path.length!==0){var li=this.path;tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ae(tt,this.posX+this.margin[3],-Dt+en+this.ctx.prevPageLastElemOffset),se.call(this,A,!0),this.path=li}if(Xe=JSON.parse(JSON.stringify(Tt)),this.path=ae(Xe,this.posX+this.margin[3],-Dt+en+this.ctx.prevPageLastElemOffset),M===!1||Rt===0){var ct=(Rt>ht||Rt<nn)&&O.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mn,Nt,null).clip().discardPath()),se.call(this,A,M),ct&&this.pdf.restoreGraphicsState()}this.lineWidth=De}this.path=Tt}else this.lineWidth=Ge,se.call(this,A,M),this.lineWidth=De},se=function(A,M){if((A!=="stroke"||M||!K.call(this))&&(A==="stroke"||M||!C.call(this))){for(var B,de,ke=[],De=this.path,Ge=0;Ge<De.length;Ge++){var ze=De[Ge];switch(ze.type){case"begin":ke.push({begin:!0});break;case"close":ke.push({close:!0});break;case"mt":ke.push({start:ze,deltas:[],abs:[]});break;case"lt":var tt=ke.length;if(De[Ge-1]&&!isNaN(De[Ge-1].x)&&(B=[ze.x-De[Ge-1].x,ze.y-De[Ge-1].y],tt>0)){for(;tt>=0;tt--)if(ke[tt-1].close!==!0&&ke[tt-1].begin!==!0){ke[tt-1].deltas.push(B),ke[tt-1].abs.push(ze);break}}break;case"bct":B=[ze.x1-De[Ge-1].x,ze.y1-De[Ge-1].y,ze.x2-De[Ge-1].x,ze.y2-De[Ge-1].y,ze.x-De[Ge-1].x,ze.y-De[Ge-1].y],ke[ke.length-1].deltas.push(B);break;case"qct":var Xe=De[Ge-1].x+2/3*(ze.x1-De[Ge-1].x),Tt=De[Ge-1].y+2/3*(ze.y1-De[Ge-1].y),jt=ze.x+2/3*(ze.x1-ze.x),It=ze.y+2/3*(ze.y1-ze.y),pe=ze.x,Pt=ze.y;B=[Xe-De[Ge-1].x,Tt-De[Ge-1].y,jt-De[Ge-1].x,It-De[Ge-1].y,pe-De[Ge-1].x,Pt-De[Ge-1].y],ke[ke.length-1].deltas.push(B);break;case"arc":ke.push({deltas:[],abs:[],arc:!0}),Array.isArray(ke[ke.length-1].abs)&&ke[ke.length-1].abs.push(ze)}}de=M?null:A==="stroke"?"stroke":"fill";for(var gn=!1,Qt=0;Qt<ke.length;Qt++)if(ke[Qt].arc)for(var ht=ke[Qt].abs,nn=0;nn<ht.length;nn++){var Rt=ht[nn];Rt.type==="arc"?R.call(this,Rt.x,Rt.y,Rt.radius,Rt.startAngle,Rt.endAngle,Rt.counterclockwise,void 0,M,!gn):J.call(this,Rt.x,Rt.y),gn=!0}else if(ke[Qt].close===!0)this.pdf.internal.out("h"),gn=!1;else if(ke[Qt].begin!==!0){var mn=ke[Qt].start.x,en=ke[Qt].start.y;ie.call(this,ke[Qt].deltas,mn,en),gn=!0}de&&W.call(this,de),M&&X.call(this)}},Q=function(A){var M=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=M*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-B;case"top":return A+M-B;case"hanging":return A+M-2*B;case"middle":return A+M/2-B;default:return A}},N=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};D.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(M,B){this.colorStops.push([M,B])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},D.prototype.createPattern=function(){return this.createLinearGradient()},D.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(A,M,B,de,ke,De,Ge,ze,tt){for(var Xe=$.call(this,B,de,ke,De),Tt=0;Tt<Xe.length;Tt++){var jt=Xe[Tt];Tt===0&&(tt?k.call(this,jt.x1+A,jt.y1+M):J.call(this,jt.x1+A,jt.y1+M)),ge.call(this,A,M,jt.x2,jt.y2,jt.x3,jt.y3,jt.x4,jt.y4)}ze?X.call(this):W.call(this,Ge)},W=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},X=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(A,M){this.pdf.internal.out(o(A)+" "+s(M)+" m")},S=function(A){var M;switch(A.align){case"right":case"end":M="right";break;case"center":M="center";break;default:M="left"}var B,de,ke,De=this.pdf.getTextDimensions(A.text),Ge=Q.call(this,A.y),ze=N.call(this,Ge)-De.h,tt=this.ctx.transform.applyToPoint(new v(A.x,Ge));if(this.autoPaging){var Xe=this.ctx.transform.decompose(),Tt=new b;Tt=(Tt=(Tt=Tt.multiply(Xe.translate)).multiply(Xe.skew)).multiply(Xe.scale);for(var jt=this.ctx.transform.applyToRectangle(new h(A.x,Ge,De.w,De.h)),It=Tt.applyToRectangle(new h(A.x,ze,De.w,De.h)),pe=z.call(this,It),Pt=[],gn=0;gn<pe.length;gn+=1)Pt.indexOf(pe[gn])===-1&&Pt.push(pe[gn]);ce(Pt);for(var Qt=Pt[0],ht=Pt[Pt.length-1],nn=Qt;nn<ht+1;nn++){this.pdf.setPage(nn);var Rt=nn===1?this.posY+this.margin[0]:this.margin[0],mn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],en=this.pdf.internal.pageSize.height-this.margin[2],Vn=en-this.margin[0],Nt=this.pdf.internal.pageSize.width-this.margin[1],Dt=Nt-this.margin[3],li=nn===1?0:mn+(nn-2)*Vn;if(this.ctx.clip_path.length!==0){var ct=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ae(B,this.posX+this.margin[3],-1*li+Rt),se.call(this,"fill",!0),this.path=ct}var kt=ae([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-li+Rt+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*A.scale),ke=this.lineWidth,this.lineWidth=ke*A.scale);var Rn=this.autoPaging!=="text";if(Rn||kt.y+kt.h<=en){if(Rn||kt.y>=Rt&&kt.x<=Nt){var Gt=Rn?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||Nt-kt.x)[0],zn=ae([JSON.parse(JSON.stringify(jt))],this.posX+this.margin[3],-li+Rt+this.ctx.prevPageLastElemOffset)[0],Nn=Rn&&(nn>Qt||nn<ht)&&O.call(this);Nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,Vn,null).clip().discardPath()),this.pdf.text(Gt,zn.x,zn.y,{angle:A.angle,align:M,renderingMode:A.renderingMode}),Nn&&this.pdf.restoreGraphicsState()}}else kt.y<en&&(this.ctx.prevPageLastElemOffset+=en-kt.y);A.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=ke)}}else A.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*A.scale),ke=this.lineWidth,this.lineWidth=ke*A.scale),this.pdf.text(A.text,tt.x+this.posX,tt.y+this.posY,{angle:A.angle,align:M,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=ke)},J=function(A,M,B,de){B=B||0,de=de||0,this.pdf.internal.out(o(A+B)+" "+s(M+de)+" l")},ie=function(A,M,B){return this.pdf.lines(A,M,B,null,null)},ge=function(A,M,B,de,ke,De,Ge,ze){this.pdf.internal.out([n(u(B+A)),n(f(de+M)),n(u(ke+A)),n(f(De+M)),n(u(Ge+A)),n(f(ze+M)),"c"].join(" "))},$=function(A,M,B,de){for(var ke=2*Math.PI,De=Math.PI/2;M>B;)M-=ke;var Ge=Math.abs(B-M);Ge<ke&&de&&(Ge=ke-Ge);for(var ze=[],tt=de?-1:1,Xe=M;Ge>1e-5;){var Tt=Xe+tt*Math.min(Ge,De);ze.push(te.call(this,A,Xe,Tt)),Ge-=Math.abs(Tt-Xe),Xe=Tt}return ze},te=function(A,M,B){var de=(B-M)/2,ke=A*Math.cos(de),De=A*Math.sin(de),Ge=ke,ze=-De,tt=Ge*Ge+ze*ze,Xe=tt+Ge*ke+ze*De,Tt=4/3*(Math.sqrt(2*tt*Xe)-Xe)/(Ge*De-ze*ke),jt=Ge-Tt*ze,It=ze+Tt*Ge,pe=jt,Pt=-It,gn=de+M,Qt=Math.cos(gn),ht=Math.sin(gn);return{x1:A*Math.cos(M),y1:A*Math.sin(M),x2:jt*Qt-It*ht,y2:jt*ht+It*Qt,x3:pe*Qt-Pt*ht,y3:pe*ht+Pt*Qt,x4:A*Math.cos(B),y4:A*Math.sin(B)}},he=function(A){return 180*A/Math.PI},je=function(A,M,B,de,ke,De){var Ge=A+.5*(B-A),ze=M+.5*(de-M),tt=ke+.5*(B-ke),Xe=De+.5*(de-De),Tt=Math.min(A,ke,Ge,tt),jt=Math.max(A,ke,Ge,tt),It=Math.min(M,De,ze,Xe),pe=Math.max(M,De,ze,Xe);return new h(Tt,It,jt-Tt,pe-It)},be=function(A,M,B,de,ke,De,Ge,ze){var tt,Xe,Tt,jt,It,pe,Pt,gn,Qt,ht,nn,Rt,mn,en,Vn=B-A,Nt=de-M,Dt=ke-B,li=De-de,ct=Ge-ke,kt=ze-De;for(Xe=0;Xe<41;Xe++)Qt=(Pt=(Tt=A+(tt=Xe/40)*Vn)+tt*((It=B+tt*Dt)-Tt))+tt*(It+tt*(ke+tt*ct-It)-Pt),ht=(gn=(jt=M+tt*Nt)+tt*((pe=de+tt*li)-jt))+tt*(pe+tt*(De+tt*kt-pe)-gn),Xe==0?(nn=Qt,Rt=ht,mn=Qt,en=ht):(nn=Math.min(nn,Qt),Rt=Math.min(Rt,ht),mn=Math.max(mn,Qt),en=Math.max(en,ht));return new h(Math.round(nn),Math.round(Rt),Math.round(mn-nn),Math.round(en-Rt))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,M,B=(A=this.ctx.lineDash,M=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:M}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(Tn.API),(function(r){var n=function(v){var h,b,x,T,D,E,C,K,O,z;for(b=[],x=0,T=(v+=h="\0\0\0\0".slice(v.length%4||4)).length;T>x;x+=4)(D=(v.charCodeAt(x)<<24)+(v.charCodeAt(x+1)<<16)+(v.charCodeAt(x+2)<<8)+v.charCodeAt(x+3))!==0?(E=(D=((D=((D=((D=(D-(z=D%85))/85)-(O=D%85))/85)-(K=D%85))/85)-(C=D%85))/85)%85,b.push(E+33,C+33,K+33,O+33,z+33)):b.push(122);return(function(V,ae){for(var ce=ae;ce>0;ce--)V.pop()})(b,h.length),String.fromCharCode.apply(String,b)+"~>"},o=function(v){var h,b,x,T,D,E=String,C="length",K=255,O="charCodeAt",z="slice",V="replace";for(v[z](-2),v=v[z](0,-2)[V](/\s/g,"")[V]("z","!!!!!"),x=[],T=0,D=(v+=h="uuuuu"[z](v[C]%5||5))[C];D>T;T+=5)b=52200625*(v[O](T)-33)+614125*(v[O](T+1)-33)+7225*(v[O](T+2)-33)+85*(v[O](T+3)-33)+(v[O](T+4)-33),x.push(K&b>>24,K&b>>16,K&b>>8,K&b);return(function(ae,ce){for(var H=ce;H>0;H--)ae.pop()})(x,h[C]),E.fromCharCode.apply(E,x)},s=function(v){return v.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">"},u=function(v){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((v=v.replace(/\s/g,"")).indexOf(">")!==-1&&(v=v.substr(0,v.indexOf(">"))),v.length%2&&(v+="0"),h.test(v)===!1)return"";for(var b="",x=0;x<v.length;x+=2)b+=String.fromCharCode("0x"+(v[x]+v[x+1]));return b},f=function(v){for(var h=new Uint8Array(v.length),b=v.length;b--;)h[b]=v.charCodeAt(b);return(h=S0(h)).reduce(function(x,T){return x+String.fromCharCode(T)},"")};r.processDataByFilters=function(v,h){var b=0,x=v||"",T=[];for(typeof(h=h||[])=="string"&&(h=[h]),b=0;b<h.length;b+=1)switch(h[b]){case"ASCII85Decode":case"/ASCII85Decode":x=o(x),T.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":x=n(x),T.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":x=u(x),T.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":x=s(x),T.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":x=f(x),T.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[b]+'" is not implemented')}return{data:x,reverseChain:T.reverse().join(" ")}}})(Tn.API),(function(r){r.loadFile=function(n,o,s){return(function(u,f,v){f=f!==!1,v=typeof v=="function"?v:function(){};var h=void 0;try{h=(function(b,x,T){var D=new XMLHttpRequest,E=0,C=function(K){var O=K.length,z=[],V=String.fromCharCode;for(E=0;E<O;E+=1)z.push(V(255&K.charCodeAt(E)));return z.join("")};if(D.open("GET",b,!x),D.overrideMimeType("text/plain; charset=x-user-defined"),x===!1&&(D.onload=function(){D.status===200?T(C(this.responseText)):T(void 0)}),D.send(null),x&&D.status===200)return C(D.responseText)})(u,f,v)}catch{}return h})(n,o,s)},r.loadImageFile=r.loadFile})(Tn.API),(function(r){function n(){return(Kn.html2canvas?Promise.resolve(Kn.html2canvas):Gh(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function o(){return(Kn.DOMPurify?Promise.resolve(Kn.DOMPurify):Gh(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var s=function(h){var b=wr(h);return b==="undefined"?"undefined":b==="string"||h instanceof String?"string":b==="number"||h instanceof Number?"number":b==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":b==="object"?"object":"unknown"},u=function(h,b){var x=document.createElement(h);for(var T in b.className&&(x.className=b.className),b.innerHTML&&b.dompurify&&(x.innerHTML=b.dompurify.sanitize(b.innerHTML)),b.style)x.style[T]=b.style[T];return x},f=function h(b,x){for(var T=b.nodeType===3?document.createTextNode(b.nodeValue):b.cloneNode(!1),D=b.firstChild;D;D=D.nextSibling)x!==!0&&D.nodeType===1&&D.nodeName==="SCRIPT"||T.appendChild(h(D,x));return b.nodeType===1&&(b.nodeName==="CANVAS"?(T.width=b.width,T.height=b.height,T.getContext("2d").drawImage(b,0,0)):b.nodeName!=="TEXTAREA"&&b.nodeName!=="SELECT"||(T.value=b.value),T.addEventListener("load",function(){T.scrollTop=b.scrollTop,T.scrollLeft=b.scrollLeft},!0)),T},v=function h(b){var x=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),T=h.convert(Promise.resolve(),x);return(T=T.setProgress(1,h,1,[h])).set(b)};(v.prototype=Object.create(Promise.prototype)).constructor=v,v.convert=function(h,b){return h.__proto__=b||v.prototype,h},v.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},v.prototype.from=function(h,b){return this.then(function(){switch(b=b||(function(x){switch(s(x)){case"string":return"string";case"element":return x.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(h),b){case"string":return this.then(o).then(function(x){return this.set({src:u("div",{innerHTML:h,dompurify:x})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},v.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},v.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},b=f(this.prop.src,this.opt.html2canvas.javascriptEnabled);b.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=u("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=u("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(b),this.prop.container.firstChild.appendChild(u("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},v.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(n).then(function(b){var x=Object.assign({},this.opt.html2canvas);return delete x.onrendered,b(this.prop.container,x)}).then(function(b){(this.opt.html2canvas.onrendered||function(){})(b),this.prop.canvas=b,document.body.removeChild(this.prop.overlay)})},v.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(n).then(function(b){var x=this.opt.jsPDF,T=this.opt.fontFaces,D=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:D,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,x.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,x.context2d.posX=this.opt.x,x.context2d.posY=this.opt.y,x.context2d.margin=this.opt.margin,x.context2d.fontFaces=T,T)for(var C=0;C<T.length;++C){var K=T[C],O=K.src.find(function(z){return z.format==="truetype"});O&&x.addFont(O.url,K.ref.name,K.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,x.context2d.save(!0),b(this.prop.container,E)}).then(function(b){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(b),this.prop.canvas=b,document.body.removeChild(this.prop.overlay)})},v.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},v.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},v.prototype.output=function(h,b,x){return(x=x||"pdf").toLowerCase()==="img"||x.toLowerCase()==="image"?this.outputImg(h,b):this.outputPdf(h,b)},v.prototype.outputPdf=function(h,b){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,b)})},v.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},v.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},v.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},v.prototype.set=function(h){if(s(h)!=="object")return this;var b=Object.keys(h||{}).map(function(x){if(x in v.template.prop)return function(){this.prop[x]=h[x]};switch(x){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[x]=h[x]}}},this);return this.then(function(){return this.thenList(b)})},v.prototype.get=function(h,b){return this.then(function(){var x=h in v.template.prop?this.prop[h]:this.opt[h];return b?b(x):x})},v.prototype.setMargin=function(h){return this.then(function(){switch(s(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},v.prototype.setPageSize=function(h){function b(x,T){return Math.floor(x*T/72*96)}return this.then(function(){(h=h||Tn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:b(h.inner.width,h.k),height:b(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},v.prototype.setProgress=function(h,b,x,T){return h!=null&&(this.progress.val=h),b!=null&&(this.progress.state=b),x!=null&&(this.progress.n=x),T!=null&&(this.progress.stack=T),this.progress.ratio=this.progress.val/this.progress.state,this},v.prototype.updateProgress=function(h,b,x,T){return this.setProgress(h?this.progress.val+h:null,b||null,x?this.progress.n+x:null,T?this.progress.stack.concat(T):null)},v.prototype.then=function(h,b){var x=this;return this.thenCore(h,b,function(T,D){return x.updateProgress(null,null,1,[T]),Promise.prototype.then.call(this,function(E){return x.updateProgress(null,T),E}).then(T,D).then(function(E){return x.updateProgress(1),E})})},v.prototype.thenCore=function(h,b,x){x=x||Promise.prototype.then;var T=this;h&&(h=h.bind(T)),b&&(b=b.bind(T));var D=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?T:v.convert(Object.assign({},T),Promise.prototype),E=x.call(D,h,b);return v.convert(E,T.__proto__)},v.prototype.thenExternal=function(h,b){return Promise.prototype.then.call(this,h,b)},v.prototype.thenList=function(h){var b=this;return h.forEach(function(x){b=b.thenCore(x)}),b},v.prototype.catch=function(h){h&&(h=h.bind(this));var b=Promise.prototype.catch.call(this,h);return v.convert(b,this)},v.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},v.prototype.error=function(h){return this.then(function(){throw new Error(h)})},v.prototype.using=v.prototype.set,v.prototype.saveAs=v.prototype.save,v.prototype.export=v.prototype.output,v.prototype.run=v.prototype.then,Tn.getPageSize=function(h,b,x){if(wr(h)==="object"){var T=h;h=T.orientation,b=T.unit||b,x=T.format||x}b=b||"mm",x=x||"a4",h=(""+(h||"P")).toLowerCase();var D,E=(""+x).toLowerCase(),C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(b){case"pt":D=1;break;case"mm":D=72/25.4;break;case"cm":D=72/2.54;break;case"in":D=72;break;case"px":D=.75;break;case"pc":case"em":D=12;break;case"ex":D=6;break;default:throw"Invalid unit: "+b}var K,O=0,z=0;if(C.hasOwnProperty(E))O=C[E][1]/D,z=C[E][0]/D;else try{O=x[1],z=x[0]}catch{throw new Error("Invalid format: "+x)}if(h==="p"||h==="portrait")h="p",z>O&&(K=z,z=O,O=K);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",O>z&&(K=z,z=O,O=K)}return{width:z,height:O,unit:b,k:D,orientation:h}},r.html=function(h,b){(b=b||{}).callback=b.callback||function(){},b.html2canvas=b.html2canvas||{},b.html2canvas.canvas=b.html2canvas.canvas||this.canvas,b.jsPDF=b.jsPDF||this,b.fontFaces=b.fontFaces?b.fontFaces.map(f0):null;var x=new v(b);return b.worker?x:x.from(h).doCallback()}})(Tn.API),Tn.API.addJS=function(r){return f2=r,this.internal.events.subscribe("postPutResources",function(){Dp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Dp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),u2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+f2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Dp!==void 0&&u2!==void 0&&this.internal.out("/Names <</JavaScript "+Dp+" 0 R>>")}),this},(function(r){var n;r.events.push(["postPutResources",function(){var o=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var u=o.outline.render().split(/\r\n/),f=0;f<u.length;f++){var v=u[f],h=s.exec(v);if(h!=null){var b=h[1];o.internal.newObjectDeferredBegin(b,!1)}o.internal.write(v)}if(this.outline.createNamedDestinations){var x=this.internal.pages.length,T=[];for(f=0;f<x;f++){var D=o.internal.newObject();T.push(D);var E=o.internal.getPageInfo(f+1);o.internal.write("<< /D["+E.objId+" 0 R /XYZ null null null]>> endobj")}var C=o.internal.newObject();for(o.internal.write("<< /Names [ "),f=0;f<T.length;f++)o.internal.write("(page_"+(f+1)+")"+T[f]+" 0 R");o.internal.write(" ] >>","endobj"),n=o.internal.newObject(),o.internal.write("<< /Dests "+C+" 0 R"),o.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var o=this;o.outline.root.children.length>0&&(o.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&o.internal.write("/Names "+n+" 0 R"))}]),r.events.push(["initialized",function(){var o=this;o.outline={createNamedDestinations:!1,root:{children:[]}},o.outline.add=function(s,u,f){var v={title:u,options:f,children:[]};return s==null&&(s=this.root),s.children.push(v),v},o.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=o,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},o.outline.genIds_r=function(s){s.id=o.internal.newObjectDeferred();for(var u=0;u<s.children.length;u++)this.genIds_r(s.children[u])},o.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},o.outline.renderItems=function(s){for(var u=this.ctx.pdf.internal.getVerticalCoordinateString,f=0;f<s.children.length;f++){var v=s.children[f];this.objStart(v),this.line("/Title "+this.makeString(v.title)),this.line("/Parent "+this.makeRef(s)),f>0&&this.line("/Prev "+this.makeRef(s.children[f-1])),f<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[f+1])),v.children.length>0&&(this.line("/First "+this.makeRef(v.children[0])),this.line("/Last "+this.makeRef(v.children[v.children.length-1])));var h=this.count=this.count_r({count:0},v);if(h>0&&this.line("/Count "+h),v.options&&v.options.pageNumber){var b=o.internal.getPageInfo(v.options.pageNumber);this.line("/Dest ["+b.objId+" 0 R /XYZ 0 "+u(0)+" 0]")}this.objEnd()}for(var x=0;x<s.children.length;x++)this.renderItems(s.children[x])},o.outline.line=function(s){this.ctx.val+=s+`\r
`},o.outline.makeRef=function(s){return s.id+" 0 R"},o.outline.makeString=function(s){return"("+o.internal.pdfEscape(s)+")"},o.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},o.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},o.outline.count_r=function(s,u){for(var f=0;f<u.children.length;f++)s.count++,this.count_r(s,u.children[f]);return s.count}}])})(Tn.API),(function(r){var n=[192,193,194,195,196,197,198,199];r.processJPEG=function(o,s,u,f,v,h){var b,x=this.decode.DCT_DECODE,T=null;if(typeof o=="string"||this.__addimage__.isArrayBuffer(o)||this.__addimage__.isArrayBufferView(o)){switch(o=v||o,o=this.__addimage__.isArrayBuffer(o)?new Uint8Array(o):o,b=(function(D){for(var E,C=256*D.charCodeAt(4)+D.charCodeAt(5),K=D.length,O={width:0,height:0,numcomponents:1},z=4;z<K;z+=2){if(z+=C,n.indexOf(D.charCodeAt(z+1))!==-1){E=256*D.charCodeAt(z+5)+D.charCodeAt(z+6),O={width:256*D.charCodeAt(z+7)+D.charCodeAt(z+8),height:E,numcomponents:D.charCodeAt(z+9)};break}C=256*D.charCodeAt(z+2)+D.charCodeAt(z+3)}return O})(o=this.__addimage__.isArrayBufferView(o)?this.__addimage__.arrayBufferToBinaryString(o):o),b.numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}T={data:o,width:b.width,height:b.height,colorSpace:h,bitsPerComponent:8,filter:x,index:s,alias:u}}return T}})(Tn.API),Tn.API.processPNG=function(r,n,o,s){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var u,f=k5(r,{checkCrc:!0}),v=f.width,h=f.height,b=f.channels,x=f.palette,T=f.depth;u=x&&b===1?(function(R){for(var W=R.width,X=R.height,k=R.data,S=R.palette,J=R.depth,ie=!1,ge=[],$=[],te=void 0,he=!1,je=0,be=0;be<S.length;be++){var F=g1(S[be],4),A=F[0],M=F[1],B=F[2],de=F[3];ge.push(A,M,B),de!=null&&(de===0?(je++,$.length<1&&$.push(be)):de<255&&(he=!0))}if(he||je>1){ie=!0,$=void 0;var ke=W*X;te=new Uint8Array(ke);for(var De=new DataView(k.buffer),Ge=0;Ge<ke;Ge++){var ze=p0(De,Ge,J),tt=g1(S[ze],4)[3];te[Ge]=tt}}else je===0&&($=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ie?8:void 0,colorBytes:k,alphaBytes:te,needSMask:ie,palette:ge,mask:$}})(f):b===2||b===4?(function(R){for(var W=R.data,X=R.width,k=R.height,S=R.channels,J=R.depth,ie=S===2?"DeviceGray":"DeviceRGB",ge=S-1,$=X*k,te=ge,he=$*te,je=1*$,be=Math.ceil(he*J/8),F=Math.ceil(je*J/8),A=new Uint8Array(be),M=new Uint8Array(F),B=new DataView(W.buffer),de=new DataView(A.buffer),ke=new DataView(M.buffer),De=!1,Ge=0;Ge<$;Ge++){for(var ze=Ge*S,tt=0;tt<te;tt++)v2(de,p0(B,ze+tt,J),Ge*te+tt,J);var Xe=p0(B,ze+te,J);Xe<(1<<J)-1&&(De=!0),v2(ke,Xe,1*Ge,J)}return{colorSpace:ie,colorsPerPixel:ge,sMaskBitsPerComponent:De?J:void 0,colorBytes:A,alphaBytes:M,needSMask:De}})(f):(function(R){var W=R.data,X=R.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:X,colorsPerPixel:X==="DeviceGray"?1:3,colorBytes:W instanceof Uint16Array?(function(k){for(var S=k.length,J=new Uint8Array(2*S),ie=new DataView(J.buffer,J.byteOffset,J.byteLength),ge=0;ge<S;ge++)ie.setUint16(2*ge,k[ge],!1);return J})(W):W,needSMask:!1}})(f);var D,E,C,K=u,O=K.colorSpace,z=K.colorsPerPixel,V=K.sMaskBitsPerComponent,ae=K.colorBytes,ce=K.alphaBytes,H=K.needSMask,se=K.palette,Q=K.mask,N=null;return s!==Tn.API.image_compression.NONE&&typeof S0=="function"?(N=(function(R){var W;switch(R){case Tn.API.image_compression.FAST:W=11;break;case Tn.API.image_compression.MEDIUM:W=13;break;case Tn.API.image_compression.SLOW:W=14;break;default:W=12}return W})(s),D=this.decode.FLATE_DECODE,E="/Predictor ".concat(N," /Colors ").concat(z," /BitsPerComponent ").concat(T," /Columns ").concat(v),r=g2(ae,Math.ceil(v*z*T/8),z,T,s),H&&(C=g2(ce,Math.ceil(v*V/8),1,V,s))):(D=void 0,E=void 0,r=ae,H&&(C=ce)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(C&&this.__addimage__.isArrayBuffer(C)||this.__addimage__.isArrayBufferView(C))&&(C=this.__addimage__.arrayBufferToBinaryString(C)),{alias:o,data:r,index:n,filter:D,decodeParameters:E,transparency:Q,palette:se,sMask:C,predictor:N,width:v,height:h,bitsPerComponent:T,sMaskBitsPerComponent:V,colorSpace:O}}},(function(r){r.processGIF89A=function(n,o,s,u){var f=new G5(n),v=f.width,h=f.height,b=[];f.decodeAndBlitFrameRGBA(0,b);var x={data:b,width:v,height:h},T=new h0(100).encode(x,100);return r.processJPEG.call(this,T,o,s,u)},r.processGIF87A=r.processGIF89A})(Tn.API),hc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var n=0;n<r;n++){var o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:u,green:s,blue:o,quad:f}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hc.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[r]()}catch(o){Fr.log("bit decode error:"+o)}},hc.prototype.bit1=function(){var r,n=Math.ceil(this.width/8),o=n%4;for(r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,u=0;u<n;u++)for(var f=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+8*u*4,h=0;h<8&&8*u+h<this.width;h++){var b=this.palette[f>>7-h&1];this.data[v+4*h]=b.blue,this.data[v+4*h+1]=b.green,this.data[v+4*h+2]=b.red,this.data[v+4*h+3]=255}o!==0&&(this.pos+=4-o)}},hc.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),n=r%4,o=this.height-1;o>=0;o--){for(var s=this.bottom_up?o:this.height-1-o,u=0;u<r;u++){var f=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+2*u*4,h=f>>4,b=15&f,x=this.palette[h];if(this.data[v]=x.blue,this.data[v+1]=x.green,this.data[v+2]=x.red,this.data[v+3]=255,2*u+1>=this.width)break;x=this.palette[b],this.data[v+4]=x.blue,this.data[v+4+1]=x.green,this.data[v+4+2]=x.red,this.data[v+4+3]=255}n!==0&&(this.pos+=4-n)}},hc.prototype.bit8=function(){for(var r=this.width%4,n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var u=this.datav.getUint8(this.pos++,!0),f=o*this.width*4+4*s;if(u<this.palette.length){var v=this.palette[u];this.data[f]=v.red,this.data[f+1]=v.green,this.data[f+2]=v.blue,this.data[f+3]=255}else this.data[f]=255,this.data[f+1]=255,this.data[f+2]=255,this.data[f+3]=255}r!==0&&(this.pos+=4-r)}},hc.prototype.bit15=function(){for(var r=this.width%3,n=parseInt("11111",2),o=this.height-1;o>=0;o--){for(var s=this.bottom_up?o:this.height-1-o,u=0;u<this.width;u++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var v=(f&n)/n*255|0,h=(f>>5&n)/n*255|0,b=(f>>10&n)/n*255|0,x=f>>15?255:0,T=s*this.width*4+4*u;this.data[T]=b,this.data[T+1]=h,this.data[T+2]=v,this.data[T+3]=x}this.pos+=r}},hc.prototype.bit16=function(){for(var r=this.width%3,n=parseInt("11111",2),o=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var u=this.bottom_up?s:this.height-1-s,f=0;f<this.width;f++){var v=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(v&n)/n*255|0,b=(v>>5&o)/o*255|0,x=(v>>11)/n*255|0,T=u*this.width*4+4*f;this.data[T]=x,this.data[T+1]=b,this.data[T+2]=h,this.data[T+3]=255}this.pos+=r}},hc.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),v=n*this.width*4+4*o;this.data[v]=f,this.data[v+1]=u,this.data[v+2]=s,this.data[v+3]=255}this.pos+=this.width%4}},hc.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var n=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),v=this.datav.getUint8(this.pos++,!0),h=n*this.width*4+4*o;this.data[h]=f,this.data[h+1]=u,this.data[h+2]=s,this.data[h+3]=v}},hc.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(n,o,s,u){var f=new hc(n,!1),v=f.width,h=f.height,b={data:f.getData(),width:v,height:h},x=new h0(100).encode(b,100);return r.processJPEG.call(this,x,o,s,u)}})(Tn.API),S2.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(n,o,s,u){var f=new S2(n),v=f.width,h=f.height,b={data:f.getData(),width:v,height:h},x=new h0(100).encode(b,100);return r.processJPEG.call(this,x,o,s,u)}})(Tn.API),Tn.API.processRGBA=function(r,n,o){for(var s=r.data,u=s.length,f=new Uint8Array(u/4*3),v=new Uint8Array(u/4),h=0,b=0,x=0;x<u;x+=4){var T=s[x],D=s[x+1],E=s[x+2],C=s[x+3];f[h++]=T,f[h++]=D,f[h++]=E,v[b++]=C}var K=this.__addimage__.arrayBufferToBinaryString(f);return{alpha:this.__addimage__.arrayBufferToBinaryString(v),data:K,index:n,alias:o,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Tn.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ef=Tn.API,Ep=Ef.getCharWidthsArray=function(r,n){var o,s,u=(n=n||{}).font||this.internal.getFont(),f=n.fontSize||this.internal.getFontSize(),v=n.charSpace||this.internal.getCharSpace(),h=n.widths?n.widths:u.metadata.Unicode.widths,b=h.fof?h.fof:1,x=n.kerning?n.kerning:u.metadata.Unicode.kerning,T=x.fof?x.fof:1,D=n.doKerning!==!1,E=0,C=r.length,K=0,O=h[0]||b,z=[];for(o=0;o<C;o++)s=r.charCodeAt(o),typeof u.metadata.widthOfString=="function"?z.push((u.metadata.widthOfGlyph(u.metadata.characterToGlyph(s))+v*(1e3/f)||0)/1e3):(E=D&&wr(x[s])==="object"&&!isNaN(parseInt(x[s][K],10))?x[s][K]/T:0,z.push((h[s]||O)/b+E)),K=s;return z},d2=Ef.getStringUnitWidth=function(r,n){var o=(n=n||{}).fontSize||this.internal.getFontSize(),s=n.font||this.internal.getFont(),u=n.charSpace||this.internal.getCharSpace();return Ef.processArabic&&(r=Ef.processArabic(r)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(r,o,u)/o:Ep.apply(this,arguments).reduce(function(f,v){return f+v},0)},p2=function(r,n,o,s){for(var u=[],f=0,v=r.length,h=0;f!==v&&h+n[f]<o;)h+=n[f],f++;u.push(r.slice(0,f));var b=f;for(h=0;f!==v;)h+n[f]>s&&(u.push(r.slice(b,f)),h=0,b=f),h+=n[f],f++;return b!==f&&u.push(r.slice(b,f)),u},h2=function(r,n,o){o||(o={});var s,u,f,v,h,b,x,T=[],D=[T],E=o.textIndent||0,C=0,K=0,O=r.split(" "),z=Ep.apply(this,[" ",o])[0];if(b=o.lineIndent===-1?O[0].length+2:o.lineIndent||0){var V=Array(b).join(" "),ae=[];O.map(function(H){(H=H.split(/\s*\n/)).length>1?ae=ae.concat(H.map(function(se,Q){return(Q&&se.length?`
`:"")+se})):ae.push(H[0])}),O=ae,b=d2.apply(this,[V,o])}for(f=0,v=O.length;f<v;f++){var ce=0;if(s=O[f],b&&s[0]==`
`&&(s=s.substr(1),ce=1),E+C+(K=(u=Ep.apply(this,[s,o])).reduce(function(H,se){return H+se},0))>n||ce){if(K>n){for(h=p2.apply(this,[s,u,n-(E+C),n]),T.push(h.shift()),T=[h.pop()];h.length;)D.push([h.shift()]);K=u.slice(s.length-(T[0]?T[0].length:0)).reduce(function(H,se){return H+se},0)}else T=[s];D.push(T),E=K+b,C=z}else T.push(s),E+=C+K,C=z}return x=b?function(H,se){return(se?V:"")+H.join(" ")}:function(H){return H.join(" ")},D.map(x)},Ef.splitTextToSize=function(r,n,o){var s,u=(o=o||{}).fontSize||this.internal.getFontSize(),f=(function(T){if(T.widths&&T.kerning)return{widths:T.widths,kerning:T.kerning};var D=this.internal.getFont(T.fontName,T.fontStyle),E="Unicode";return D.metadata[E]?{widths:D.metadata[E].widths||{0:1},kerning:D.metadata[E].kerning||{}}:{font:D.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,o);s=Array.isArray(r)?r:String(r).split(/\r?\n/);var v=1*this.internal.scaleFactor*n/u;f.textIndent=o.textIndent?1*o.textIndent*this.internal.scaleFactor/u:0,f.lineIndent=o.lineIndent;var h,b,x=[];for(h=0,b=s.length;h<b;h++)x=x.concat(h2.apply(this,[s[h],v,f]));return x},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var n="0123456789abcdef",o="klmnopqrstuvwxyz",s={},u={},f=0;f<16;f++)s[o[f]]=n[f],u[n[f]]=o[f];var v=function(E){return"0x"+parseInt(E,10).toString(16)},h=r.__fontmetrics__.compress=function(E){var C,K,O,z,V=["{"];for(var ae in E){if(C=E[ae],isNaN(parseInt(ae,10))?K="'"+ae+"'":(ae=parseInt(ae,10),K=(K=v(ae).slice(2)).slice(0,-1)+u[K.slice(-1)]),typeof C=="number")C<0?(O=v(C).slice(3),z="-"):(O=v(C).slice(2),z=""),O=z+O.slice(0,-1)+u[O.slice(-1)];else{if(wr(C)!=="object")throw new Error("Don't know what to do with value type "+wr(C)+".");O=h(C)}V.push(K+O)}return V.push("}"),V.join("")},b=r.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var C,K,O,z,V={},ae=1,ce=V,H=[],se="",Q="",N=E.length-1,R=1;R<N;R+=1)(z=E[R])=="'"?C?(O=C.join(""),C=void 0):C=[]:C?C.push(z):z=="{"?(H.push([ce,O]),ce={},O=void 0):z=="}"?((K=H.pop())[0][K[1]]=ce,O=void 0,ce=K[0]):z=="-"?ae=-1:O===void 0?s.hasOwnProperty(z)?(se+=s[z],O=parseInt(se,16)*ae,ae=1,se=""):se+=z:s.hasOwnProperty(z)?(Q+=s[z],ce[O]=parseInt(Q,16)*ae,ae=1,O=void 0,Q=""):Q+=z;return V},x={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},T={Unicode:{Courier:x,"Courier-Bold":x,"Courier-BoldOblique":x,"Courier-Oblique":x,Helvetica:x,"Helvetica-Bold":x,"Helvetica-BoldOblique":x,"Helvetica-Oblique":x,"Times-Roman":x,"Times-Bold":x,"Times-BoldItalic":x,"Times-Italic":x}},D={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:b("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:b("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(E){var C=E.font,K=D.Unicode[C.postScriptName];K&&(C.metadata.Unicode={},C.metadata.Unicode.widths=K.widths,C.metadata.Unicode.kerning=K.kerning);var O=T.Unicode[C.postScriptName];O&&(C.metadata.Unicode.encoding=O,C.encoding=O.codePages[0])}])})(Tn.API),(function(r){var n=function(o){for(var s=o.length,u=new Uint8Array(s),f=0;f<s;f++)u[f]=o.charCodeAt(f);return u};r.API.events.push(["addFont",function(o){var s=void 0,u=o.font,f=o.instance;if(!u.isStandardFont){if(f===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");if(typeof(s=f.existsFileInVFS(u.postScriptName)===!1?f.loadFile(u.postScriptName):f.getFileFromVFS(u.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");(function(v,h){h=/^\x00\x01\x00\x00/.test(h)?n(h):n(Op(h)),v.metadata=r.API.TTFFont.open(h),v.metadata.Unicode=v.metadata.Unicode||{encoding:{},kerning:{},widths:[]},v.metadata.glyIdsUsed=[0]})(u,s)}}])})(Tn),Tn.API.addSvgAsImage=function(r,n,o,s,u,f,v,h){if(isNaN(n)||isNaN(o))throw Fr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(u))throw Fr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=s,b.height=u;var x=b.getContext("2d");x.fillStyle="#fff",x.fillRect(0,0,b.width,b.height);var T={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},D=this;return(Kn.canvg?Promise.resolve(Kn.canvg):Gh(()=>import("./index.es-B6SVmcVv.js"),[])).catch(function(E){return Promise.reject(new Error("Could not load canvg: "+E))}).then(function(E){return E.default?E.default:E}).then(function(E){return E.fromString(x,r,T)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(E){return E.render(T)}).then(function(){D.addImage(b.toDataURL("image/jpeg",1),n,o,s,u,v,h)})},Tn.API.putTotalPages=function(r){var n,o=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(r,"g"),o=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),o=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var u=0;u<this.internal.pages[s].length;u++)this.internal.pages[s][u]=this.internal.pages[s][u].replace(n,o);return this},Tn.API.viewerPreferences=function(r,n){var o;r=r||{},n=n||!1;var s,u,f,v={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(v),b=[],x=0,T=0,D=0;function E(K,O){var z,V=!1;for(z=0;z<K.length;z+=1)K[z]===O&&(V=!0);return V}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(v)),this.internal.viewerpreferences.isSubscribed=!1),o=this.internal.viewerpreferences.configuration,r==="reset"||n===!0){var C=h.length;for(D=0;D<C;D+=1)o[h[D]].value=o[h[D]].defaultValue,o[h[D]].explicitSet=!1}if(wr(r)==="object"){for(u in r)if(f=r[u],E(h,u)&&f!==void 0){if(o[u].type==="boolean"&&typeof f=="boolean")o[u].value=f;else if(o[u].type==="name"&&E(o[u].valueSet,f))o[u].value=f;else if(o[u].type==="integer"&&Number.isInteger(f))o[u].value=f;else if(o[u].type==="array"){for(x=0;x<f.length;x+=1)if(s=!0,f[x].length===1&&typeof f[x][0]=="number")b.push(String(f[x]-1));else if(f[x].length>1){for(T=0;T<f[x].length;T+=1)typeof f[x][T]!="number"&&(s=!1);s===!0&&b.push([f[x][0]-1,f[x][1]-1].join(" "))}o[u].value="["+b.join(" ")+"]"}else o[u].value=o[u].defaultValue;o[u].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var K,O=[];for(K in o)o[K].explicitSet===!0&&(o[K].type==="name"?O.push("/"+K+" /"+o[K].value):O.push("/"+K+" "+o[K].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=o,this},(function(r){var n=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',u=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),f=unescape(encodeURIComponent(s)),v=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),b=unescape(encodeURIComponent("</x:xmpmeta>")),x=f.length+v.length+h.length+u.length+b.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+x+" >>"),this.internal.write("stream"),this.internal.write(u+f+v+h+b),this.internal.write("endstream"),this.internal.write("endobj")},o=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(s,u){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:u||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",o),this.internal.events.subscribe("postPutResources",n)),this}})(Tn.API),(function(r){var n=r.API,o=n.pdfEscape16=function(f,v){for(var h,b=v.metadata.Unicode.widths,x=["","0","00","000","0000"],T=[""],D=0,E=f.length;D<E;++D){if(h=v.metadata.characterToGlyph(f.charCodeAt(D)),v.metadata.glyIdsUsed.push(h),v.metadata.toUnicode[h]=f.charCodeAt(D),b.indexOf(h)==-1&&(b.push(h),b.push([parseInt(v.metadata.widthOfGlyph(h),10)])),h=="0")return T.join("");h=h.toString(16),T.push(x[4-h.length],h)}return T.join("")},s=function(f){var v,h,b,x,T,D,E;for(T=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,b=[],D=0,E=(h=Object.keys(f).sort(function(C,K){return C-K})).length;D<E;D++)v=h[D],b.length>=100&&(T+=`
`+b.length+` beginbfchar
`+b.join(`
`)+`
endbfchar`,b=[]),f[v]!==void 0&&f[v]!==null&&typeof f[v].toString=="function"&&(x=("0000"+f[v].toString(16)).slice(-4),v=("0000"+(+v).toString(16)).slice(-4),b.push("<"+v+"><"+x+">"));return b.length&&(T+=`
`+b.length+` beginbfchar
`+b.join(`
`)+`
endbfchar
`),T+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(f){(function(v){var h=v.font,b=v.out,x=v.newObject,T=v.putStream;if(h.metadata instanceof r.API.TTFFont&&h.encoding==="Identity-H"){for(var D=h.metadata.Unicode.widths,E=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),C="",K=0;K<E.length;K++)C+=String.fromCharCode(E[K]);var O=x();T({data:C,addLength1:!0,objectId:O}),b("endobj");var z=x();T({data:s(h.metadata.toUnicode),addLength1:!0,objectId:z}),b("endobj");var V=x();b("<<"),b("/Type /FontDescriptor"),b("/FontName /"+Bf(h.fontName)),b("/FontFile2 "+O+" 0 R"),b("/FontBBox "+r.API.PDFObject.convert(h.metadata.bbox)),b("/Flags "+h.metadata.flags),b("/StemV "+h.metadata.stemV),b("/ItalicAngle "+h.metadata.italicAngle),b("/Ascent "+h.metadata.ascender),b("/Descent "+h.metadata.decender),b("/CapHeight "+h.metadata.capHeight),b(">>"),b("endobj");var ae=x();b("<<"),b("/Type /Font"),b("/BaseFont /"+Bf(h.fontName)),b("/FontDescriptor "+V+" 0 R"),b("/W "+r.API.PDFObject.convert(D)),b("/CIDToGIDMap /Identity"),b("/DW 1000"),b("/Subtype /CIDFontType2"),b("/CIDSystemInfo"),b("<<"),b("/Supplement 0"),b("/Registry (Adobe)"),b("/Ordering ("+h.encoding+")"),b(">>"),b(">>"),b("endobj"),h.objectNumber=x(),b("<<"),b("/Type /Font"),b("/Subtype /Type0"),b("/ToUnicode "+z+" 0 R"),b("/BaseFont /"+Bf(h.fontName)),b("/Encoding /"+h.encoding),b("/DescendantFonts ["+ae+" 0 R]"),b(">>"),b("endobj"),h.isAlreadyPutted=!0}})(f)}]),n.events.push(["putFont",function(f){(function(v){var h=v.font,b=v.out,x=v.newObject,T=v.putStream;if(h.metadata instanceof r.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var D=h.metadata.rawData,E="",C=0;C<D.length;C++)E+=String.fromCharCode(D[C]);var K=x();T({data:E,addLength1:!0,objectId:K}),b("endobj");var O=x();T({data:s(h.metadata.toUnicode),addLength1:!0,objectId:O}),b("endobj");var z=x();b("<<"),b("/Descent "+h.metadata.decender),b("/CapHeight "+h.metadata.capHeight),b("/StemV "+h.metadata.stemV),b("/Type /FontDescriptor"),b("/FontFile2 "+K+" 0 R"),b("/Flags 96"),b("/FontBBox "+r.API.PDFObject.convert(h.metadata.bbox)),b("/FontName /"+Bf(h.fontName)),b("/ItalicAngle "+h.metadata.italicAngle),b("/Ascent "+h.metadata.ascender),b(">>"),b("endobj"),h.objectNumber=x();for(var V=0;V<h.metadata.hmtx.widths.length;V++)h.metadata.hmtx.widths[V]=parseInt(h.metadata.hmtx.widths[V]*(1e3/h.metadata.head.unitsPerEm));b("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+Bf(h.fontName)+"/FontDescriptor "+z+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),b("endobj"),h.isAlreadyPutted=!0}})(f)}]);var u=function(f){var v,h=f.text||"",b=f.x,x=f.y,T=f.options||{},D=f.mutex||{},E=D.pdfEscape,C=D.activeFontKey,K=D.fonts,O=C,z="",V=0,ae="",ce=K[O].encoding;if(K[O].encoding!=="Identity-H")return{text:h,x:b,y:x,options:T,mutex:D};for(ae=h,O=C,Array.isArray(h)&&(ae=h[0]),V=0;V<ae.length;V+=1)K[O].metadata.hasOwnProperty("cmap")&&(v=K[O].metadata.cmap.unicode.codeMap[ae[V].charCodeAt(0)]),v||ae[V].charCodeAt(0)<256&&K[O].metadata.hasOwnProperty("Unicode")?z+=ae[V]:z+="";var H="";return parseInt(O.slice(1))<14||ce==="WinAnsiEncoding"?H=E(z,O).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):ce==="Identity-H"&&(H=o(z,K[O])),D.isHex=!0,{text:H,x:b,y:x,options:T,mutex:D}};n.events.push(["postProcessText",function(f){var v=f.text||"",h=[],b={text:v,x:f.x,y:f.y,options:f.options,mutex:f.mutex};if(Array.isArray(v)){var x=0;for(x=0;x<v.length;x+=1)Array.isArray(v[x])&&v[x].length===3?h.push([u(Object.assign({},b,{text:v[x][0]})).text,v[x][1],v[x][2]]):h.push(u(Object.assign({},b,{text:v[x]})).text);f.text=h}else f.text=u(Object.assign({},b,{text:v})).text}])})(Tn),(function(r){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(o){return n.call(this),this.internal.vFS[o]!==void 0},r.addFileToVFS=function(o,s){return n.call(this),this.internal.vFS[o]=s,this},r.getFileFromVFS=function(o){return n.call(this),this.internal.vFS[o]!==void 0?this.internal.vFS[o]:null}})(Tn.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(s){var u,f,v,h,b,x,T,D=n,E=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],K={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},z=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],V=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ae=!1,ce=0;this.__bidiEngine__={};var H=function(k){var S=k.charCodeAt(),J=S>>8,ie=O[J];return ie!==void 0?D[256*ie+(255&S)]:J===252||J===253?"AL":V.test(J)?"L":J===8?"R":"N"},se=function(k){for(var S,J=0;J<k.length;J++){if((S=H(k.charAt(J)))==="L")return!1;if(S==="R")return!0}return!1},Q=function(k,S,J,ie){var ge,$,te,he,je=S[ie];switch(je){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ae=!1;break;case"N":case"AN":break;case"EN":ae&&(je="AN");break;case"AL":ae=!0,je="R";break;case"WS":case"BN":je="N";break;case"CS":ie<1||ie+1>=S.length||(ge=J[ie-1])!=="EN"&&ge!=="AN"||($=S[ie+1])!=="EN"&&$!=="AN"?je="N":ae&&($="AN"),je=$===ge?$:"N";break;case"ES":je=(ge=ie>0?J[ie-1]:"B")==="EN"&&ie+1<S.length&&S[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&J[ie-1]==="EN"){je="EN";break}if(ae){je="N";break}for(te=ie+1,he=S.length;te<he&&S[te]==="ET";)te++;je=te<he&&S[te]==="EN"?"EN":"N";break;case"NSM":if(v&&!h){for(he=S.length,te=ie+1;te<he&&S[te]==="NSM";)te++;if(te<he){var be=k[ie],F=be>=1425&&be<=2303||be===64286;if(ge=S[te],F&&(ge==="R"||ge==="AL")){je="R";break}}}je=ie<1||(ge=S[ie-1])==="B"?"N":J[ie-1];break;case"B":ae=!1,u=!0,je=ce;break;case"S":f=!0,je="N"}return je},N=function(k,S,J){var ie=k.split("");return J&&R(ie,J,{hiLevel:ce}),ie.reverse(),S&&S.reverse(),ie.join("")},R=function(k,S,J){var ie,ge,$,te,he,je=-1,be=k.length,F=0,A=[],M=ce?C:E,B=[];for(ae=!1,u=!1,f=!1,ge=0;ge<be;ge++)B[ge]=H(k[ge]);for($=0;$<be;$++){if(he=F,A[$]=Q(k,B,A,$),ie=240&(F=M[he][K[A[$]]]),F&=15,S[$]=te=M[F][5],ie>0)if(ie===16){for(ge=je;ge<$;ge++)S[ge]=1;je=-1}else je=-1;if(M[F][6])je===-1&&(je=$);else if(je>-1){for(ge=je;ge<$;ge++)S[ge]=te;je=-1}B[$]==="B"&&(S[$]=0),J.hiLevel|=te}f&&(function(de,ke,De){for(var Ge=0;Ge<De;Ge++)if(de[Ge]==="S"){ke[Ge]=ce;for(var ze=Ge-1;ze>=0&&de[ze]==="WS";ze--)ke[ze]=ce}})(B,S,be)},W=function(k,S,J,ie,ge){if(!(ge.hiLevel<k)){if(k===1&&ce===1&&!u)return S.reverse(),void(J&&J.reverse());for(var $,te,he,je,be=S.length,F=0;F<be;){if(ie[F]>=k){for(he=F+1;he<be&&ie[he]>=k;)he++;for(je=F,te=he-1;je<te;je++,te--)$=S[je],S[je]=S[te],S[te]=$,J&&($=J[je],J[je]=J[te],J[te]=$);F=he}F++}}},X=function(k,S,J){var ie=k.split(""),ge={hiLevel:ce};return J||(J=[]),R(ie,J,ge),(function($,te,he){if(he.hiLevel!==0&&T)for(var je,be=0;be<$.length;be++)te[be]===1&&(je=z.indexOf($[be]))>=0&&($[be]=z[je+1])})(ie,J,ge),W(2,ie,S,J,ge),W(1,ie,S,J,ge),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(k,S,J){if((function(ge,$){if($)for(var te=0;te<ge.length;te++)$[te]=te;h===void 0&&(h=se(ge)),x===void 0&&(x=se(ge))})(k,S),v||!b||x)if(v&&b&&h^x)ce=h?1:0,k=N(k,S,J);else if(!v&&b&&x)ce=h?1:0,k=X(k,S,J),k=N(k,S);else if(!v||h||b||x){if(v&&!b&&h^x)k=N(k,S),h?(ce=0,k=X(k,S,J)):(ce=1,k=X(k,S,J),k=N(k,S));else if(v&&h&&!b&&x)ce=1,k=X(k,S,J),k=N(k,S);else if(!v&&!b&&h^x){var ie=T;h?(ce=1,k=X(k,S,J),ce=0,T=!1,k=X(k,S,J),T=ie):(ce=0,k=X(k,S,J),k=N(k,S),ce=1,T=!1,k=X(k,S,J),T=ie,k=N(k,S))}}else ce=0,k=X(k,S,J);else ce=h?1:0,k=X(k,S,J);return k},this.__bidiEngine__.setOptions=function(k){k&&(v=k.isInputVisual,b=k.isOutputVisual,h=k.isInputRtl,x=k.isOutputRtl,T=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],o=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(s){var u=s.text;s.x,s.y;var f=s.options||{};s.mutex,f.lang;var v=[];if(f.isInputVisual=typeof f.isInputVisual!="boolean"||f.isInputVisual,o.setOptions(f),Object.prototype.toString.call(u)==="[object Array]"){var h=0;for(v=[],h=0;h<u.length;h+=1)Object.prototype.toString.call(u[h])==="[object Array]"?v.push([o.doBidiReorder(u[h][0]),u[h][1],u[h][2]]):v.push([o.doBidiReorder(u[h])]);s.text=v}else s.text=o.doBidiReorder(u);o.setOptions({isInputVisual:!0})}])})(Tn),Tn.API.TTFFont=(function(){function r(n){var o;if(this.rawData=n,o=this.contents=new _u(n),this.contents.pos=4,o.readString(4)==="ttcf")throw new Error("TTCF not supported.");o.pos=0,this.parse(),this.subset=new lv(this),this.registerTTF()}return r.open=function(n){return new r(n)},r.prototype.parse=function(){return this.directory=new X5(this.contents),this.head=new K5(this),this.name=new tv(this),this.cmap=new jy(this),this.toUnicode={},this.hhea=new Z5(this),this.maxp=new nv(this),this.hmtx=new iv(this),this.post=new Q5(this),this.os2=new J5(this),this.loca=new sv(this),this.glyf=new rv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var n,o,s,u,f;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var v,h,b,x;for(x=[],v=0,h=(b=this.bbox).length;v<h;v++)n=b[v],x.push(Math.round(n*this.scaleFactor));return x}).call(this),this.stemV=0,this.post.exists?(s=255&(u=this.post.italic_angle),32768&(o=u>>16)&&(o=-(1+(65535^o))),this.italicAngle=+(o+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(f=this.familyClass)===1||f===2||f===3||f===4||f===5||f===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(n){var o;return((o=this.cmap.unicode)!=null?o.codeMap[n]:void 0)||0},r.prototype.widthOfGlyph=function(n){var o;return o=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*o},r.prototype.widthOfString=function(n,o,s){var u,f,v,h;for(v=0,f=0,h=(n=""+n).length;0<=h?f<h:f>h;f=0<=h?++f:--f)u=n.charCodeAt(f),v+=this.widthOfGlyph(this.characterToGlyph(u))+s*(1e3/o)||0;return v*(o/1e3)},r.prototype.lineHeight=function(n,o){var s;return o==null&&(o=!1),s=o?this.lineGap:0,(this.ascender+s-this.decender)/1e3*n},r})();var mc,_u=(function(){function r(n){this.data=n??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(n){return this.data[this.pos++]=n},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},r.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},r.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},r.prototype.readString=function(n){var o,s;for(s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s[o]=String.fromCharCode(this.readByte());return s.join("")},r.prototype.writeString=function(n){var o,s,u;for(u=[],o=0,s=n.length;0<=s?o<s:o>s;o=0<=s?++o:--o)u.push(this.writeByte(n.charCodeAt(o)));return u},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(n){return this.writeInt16(n)},r.prototype.readLongLong=function(){var n,o,s,u,f,v,h,b;return n=this.readByte(),o=this.readByte(),s=this.readByte(),u=this.readByte(),f=this.readByte(),v=this.readByte(),h=this.readByte(),b=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^o)+1099511627776*(255^s)+4294967296*(255^u)+16777216*(255^f)+65536*(255^v)+256*(255^h)+(255^b)+1):72057594037927940*n+281474976710656*o+1099511627776*s+4294967296*u+16777216*f+65536*v+256*h+b},r.prototype.writeLongLong=function(n){var o,s;return o=Math.floor(n/4294967296),s=4294967295&n,this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(n){return this.writeInt32(n)},r.prototype.read=function(n){var o,s;for(o=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)o.push(this.readByte());return o},r.prototype.write=function(n){var o,s,u,f;for(f=[],s=0,u=n.length;s<u;s++)o=n[s],f.push(this.writeByte(o));return f},r})(),X5=(function(){var r;function n(o){var s,u,f;for(this.scalarType=o.readInt(),this.tableCount=o.readShort(),this.searchRange=o.readShort(),this.entrySelector=o.readShort(),this.rangeShift=o.readShort(),this.tables={},u=0,f=this.tableCount;0<=f?u<f:u>f;u=0<=f?++u:--u)s={tag:o.readString(4),checksum:o.readInt(),offset:o.readInt(),length:o.readInt()},this.tables[s.tag]=s}return n.prototype.encode=function(o){var s,u,f,v,h,b,x,T,D,E,C,K,O;for(O in C=Object.keys(o).length,b=Math.log(2),D=16*Math.floor(Math.log(C)/b),v=Math.floor(D/b),T=16*C-D,(u=new _u).writeInt(this.scalarType),u.writeShort(C),u.writeShort(D),u.writeShort(v),u.writeShort(T),f=16*C,x=u.pos+f,h=null,K=[],o)for(E=o[O],u.writeString(O),u.writeInt(r(E)),u.writeInt(x),u.writeInt(E.length),K=K.concat(E),O==="head"&&(h=x),x+=E.length;x%4;)K.push(0),x++;return u.write(K),s=2981146554-r(u.data),u.pos=h+8,u.writeUInt32(s),u.data},r=function(o){var s,u,f,v;for(o=ky.call(o);o.length%4;)o.push(0);for(f=new _u(o),u=0,s=0,v=o.length;s<v;s=s+=4)u+=f.readUInt32();return 4294967295&u},n})(),$5={}.hasOwnProperty,Mc=function(r,n){for(var o in n)$5.call(n,o)&&(r[o]=n[o]);function s(){this.constructor=r}return s.prototype=n.prototype,r.prototype=new s,r.__super__=n.prototype,r};mc=(function(){function r(n){var o;this.file=n,o=this.file.directory.tables[this.tag],this.exists=!!o,o&&(this.offset=o.offset,this.length=o.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var K5=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="head",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},r.prototype.encode=function(n){var o;return(o=new _u).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(n),o.writeShort(this.glyphDataFormat),o.data},r})(),C2=(function(){function r(n,o){var s,u,f,v,h,b,x,T,D,E,C,K,O,z,V,ae,ce;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=o+n.readInt(),D=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(b=0;b<256;++b)this.codeMap[b]=n.readByte();break;case 4:for(C=n.readUInt16(),E=C/2,n.pos+=6,f=(function(){var H,se;for(se=[],b=H=0;0<=E?H<E:H>E;b=0<=E?++H:--H)se.push(n.readUInt16());return se})(),n.pos+=2,O=(function(){var H,se;for(se=[],b=H=0;0<=E?H<E:H>E;b=0<=E?++H:--H)se.push(n.readUInt16());return se})(),x=(function(){var H,se;for(se=[],b=H=0;0<=E?H<E:H>E;b=0<=E?++H:--H)se.push(n.readUInt16());return se})(),T=(function(){var H,se;for(se=[],b=H=0;0<=E?H<E:H>E;b=0<=E?++H:--H)se.push(n.readUInt16());return se})(),u=(this.length-n.pos+this.offset)/2,h=(function(){var H,se;for(se=[],b=H=0;0<=u?H<u:H>u;b=0<=u?++H:--H)se.push(n.readUInt16());return se})(),b=V=0,ce=f.length;V<ce;b=++V)for(z=f[b],s=ae=K=O[b];K<=z?ae<=z:ae>=z;s=K<=z?++ae:--ae)T[b]===0?v=s+x[b]:(v=h[T[b]/2+(s-K)-(E-b)]||0)!==0&&(v+=x[b]),this.codeMap[s]=65535&v}n.pos=D}return r.encode=function(n,o){var s,u,f,v,h,b,x,T,D,E,C,K,O,z,V,ae,ce,H,se,Q,N,R,W,X,k,S,J,ie,ge,$,te,he,je,be,F,A,M,B,de,ke,De,Ge,ze,tt,Xe,Tt;switch(ie=new _u,v=Object.keys(n).sort(function(jt,It){return jt-It}),o){case"macroman":for(O=0,z=(function(){var jt=[];for(K=0;K<256;++K)jt.push(0);return jt})(),ae={0:0},f={},ge=0,je=v.length;ge<je;ge++)ae[ze=n[u=v[ge]]]==null&&(ae[ze]=++O),f[u]={old:n[u],new:ae[n[u]]},z[u]=ae[n[u]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(z),{charMap:f,subtable:ie.data,maxGlyphID:O+1};case"unicode":for(S=[],D=[],ce=0,ae={},s={},V=x=null,$=0,be=v.length;$<be;$++)ae[se=n[u=v[$]]]==null&&(ae[se]=++ce),s[u]={old:se,new:ae[se]},h=ae[se]-u,V!=null&&h===x||(V&&D.push(V),S.push(u),x=h),V=u;for(V&&D.push(V),D.push(65535),S.push(65535),X=2*(W=S.length),R=2*Math.pow(Math.log(W)/Math.LN2,2),E=Math.log(R/2)/Math.LN2,N=2*W-R,b=[],Q=[],C=[],K=te=0,F=S.length;te<F;K=++te){if(k=S[K],T=D[K],k===65535){b.push(0),Q.push(0);break}if(k-(J=s[k].new)>=32768)for(b.push(0),Q.push(2*(C.length+W-K)),u=he=k;k<=T?he<=T:he>=T;u=k<=T?++he:--he)C.push(s[u].new);else b.push(J-k),Q.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*W+2*C.length),ie.writeUInt16(0),ie.writeUInt16(X),ie.writeUInt16(R),ie.writeUInt16(E),ie.writeUInt16(N),De=0,A=D.length;De<A;De++)u=D[De],ie.writeUInt16(u);for(ie.writeUInt16(0),Ge=0,M=S.length;Ge<M;Ge++)u=S[Ge],ie.writeUInt16(u);for(tt=0,B=b.length;tt<B;tt++)h=b[tt],ie.writeUInt16(h);for(Xe=0,de=Q.length;Xe<de;Xe++)H=Q[Xe],ie.writeUInt16(H);for(Tt=0,ke=C.length;Tt<ke;Tt++)O=C[Tt],ie.writeUInt16(O);return{charMap:s,subtable:ie.data,maxGlyphID:ce+1}}},r})(),jy=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="cmap",r.prototype.parse=function(n){var o,s,u;for(n.pos=this.offset,this.version=n.readUInt16(),u=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=u?s<u:s>u;s=0<=u?++s:--s)o=new C2(n,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},r.encode=function(n,o){var s,u;return o==null&&(o="macroman"),s=C2.encode(n,o),(u=new _u).writeUInt16(0),u.writeUInt16(1),s.table=u.data.concat(s.subtable),s},r})(),Z5=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="hhea",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},r})(),J5=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="OS/2",r.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var o,s;for(s=[],o=0;o<10;++o)s.push(n.readByte());return s})(),this.charRange=(function(){var o,s;for(s=[],o=0;o<4;++o)s.push(n.readInt());return s})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var o,s;for(s=[],o=0;o<2;o=++o)s.push(n.readInt());return s})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},r})(),Q5=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="post",r.prototype.parse=function(n){var o,s,u;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:case 196608:break;case 131072:var f;for(s=n.readUInt16(),this.glyphNameIndex=[],f=0;0<=s?f<s:f>s;f=0<=s?++f:--f)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],u=[];n.pos<this.offset+this.length;)o=n.readByte(),u.push(this.names.push(n.readString(o)));return u;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 262144:return this.map=(function(){var v,h,b;for(b=[],f=v=0,h=this.file.maxp.numGlyphs;0<=h?v<h:v>h;f=0<=h?++v:--v)b.push(n.readUInt32());return b}).call(this)}},r})(),ev=function(r,n){this.raw=r,this.length=r.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},tv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="name",r.prototype.parse=function(n){var o,s,u,f,v,h,b,x,T,D,E;for(n.pos=this.offset,n.readShort(),o=n.readShort(),h=n.readShort(),s=[],f=0;0<=o?f<o:f>o;f=0<=o?++f:--f)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+h+n.readShort()});for(b={},f=T=0,D=s.length;T<D;f=++T)u=s[f],n.pos=u.offset,x=n.readString(u.length),v=new ev(x,u),b[E=u.nameID]==null&&(b[E]=[]),b[u.nameID].push(v);this.strings=b,this.copyright=b[0],this.fontFamily=b[1],this.fontSubfamily=b[2],this.uniqueSubfamily=b[3],this.fontName=b[4],this.version=b[5];try{this.postscriptName=b[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=b[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=b[7],this.manufacturer=b[8],this.designer=b[9],this.description=b[10],this.vendorUrl=b[11],this.designerUrl=b[12],this.license=b[13],this.licenseUrl=b[14],this.preferredFamily=b[15],this.preferredSubfamily=b[17],this.compatibleFull=b[18],this.sampleText=b[19]},r})(),nv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="maxp",r.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},r})(),iv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="hmtx",r.prototype.parse=function(n){var o,s,u,f,v,h,b;for(n.pos=this.offset,this.metrics=[],o=0,h=this.file.hhea.numberOfMetrics;0<=h?o<h:o>h;o=0<=h?++o:--o)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var x,T;for(T=[],o=x=0;0<=u?x<u:x>u;o=0<=u?++x:--x)T.push(n.readInt16());return T})(),this.widths=(function(){var x,T,D,E;for(E=[],x=0,T=(D=this.metrics).length;x<T;x++)f=D[x],E.push(f.advance);return E}).call(this),s=this.widths[this.widths.length-1],b=[],o=v=0;0<=u?v<u:v>u;o=0<=u?++v:--v)b.push(this.widths.push(s));return b},r.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},r})(),ky=[].slice,rv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(n){var o,s,u,f,v,h,b,x,T,D;return n in this.cache?this.cache[n]:(f=this.file.loca,o=this.file.contents,s=f.indexOf(n),(u=f.lengthOf(n))===0?this.cache[n]=null:(o.pos=this.offset+s,v=(h=new _u(o.read(u))).readShort(),x=h.readShort(),D=h.readShort(),b=h.readShort(),T=h.readShort(),this.cache[n]=v===-1?new av(h,x,D,b,T):new ov(h,v,x,D,b,T),this.cache[n]))},r.prototype.encode=function(n,o,s){var u,f,v,h,b;for(v=[],f=[],h=0,b=o.length;h<b;h++)u=n[o[h]],f.push(v.length),u&&(v=v.concat(u.encode(s)));return f.push(v.length),{table:v,offsets:f}},r})(),ov=(function(){function r(n,o,s,u,f,v){this.raw=n,this.numberOfContours=o,this.xMin=s,this.yMin=u,this.xMax=f,this.yMax=v,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),av=(function(){function r(n,o,s,u,f){var v,h;for(this.raw=n,this.xMin=o,this.yMin=s,this.xMax=u,this.yMax=f,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],v=this.raw;h=v.readShort(),this.glyphOffsets.push(v.pos),this.glyphIDs.push(v.readUInt16()),32&h;)v.pos+=1&h?4:2,128&h?v.pos+=8:64&h?v.pos+=4:8&h&&(v.pos+=2)}return r.prototype.encode=function(){var n,o,s;for(o=new _u(ky.call(this.raw.data)),n=0,s=this.glyphIDs.length;n<s;++n)o.pos=this.glyphOffsets[n];return o.data},r})(),sv=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Mc(r,mc),r.prototype.tag="loca",r.prototype.parse=function(n){var o,s;return n.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?(function(){var u,f;for(f=[],s=0,u=this.length;s<u;s+=2)f.push(2*n.readUInt16());return f}).call(this):(function(){var u,f;for(f=[],s=0,u=this.length;s<u;s+=4)f.push(n.readUInt32());return f}).call(this)},r.prototype.indexOf=function(n){return this.offsets[n]},r.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},r.prototype.encode=function(n,o){for(var s=new Uint32Array(this.offsets.length),u=0,f=0,v=0;v<s.length;++v)if(s[v]=u,f<o.length&&o[f]==v){++f,s[v]=u;var h=this.offsets[v],b=this.offsets[v+1]-h;b>0&&(u+=b)}for(var x=new Array(4*s.length),T=0;T<s.length;++T)x[4*T+3]=255&s[T],x[4*T+2]=(65280&s[T])>>8,x[4*T+1]=(16711680&s[T])>>16,x[4*T]=(4278190080&s[T])>>24;return x},r})(),lv=(function(){function r(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var n,o,s,u,f;for(o in u=this.font.cmap.tables[0].codeMap,n={},f=this.subset)s=f[o],n[o]=u[s];return n},r.prototype.glyphsFor=function(n){var o,s,u,f,v,h,b;for(u={},v=0,h=n.length;v<h;v++)u[f=n[v]]=this.font.glyf.glyphFor(f);for(f in o=[],u)(s=u[f])!=null&&s.compound&&o.push.apply(o,s.glyphIDs);if(o.length>0)for(f in b=this.glyphsFor(o))s=b[f],u[f]=s;return u},r.prototype.encode=function(n,o){var s,u,f,v,h,b,x,T,D,E,C,K,O,z,V;for(u in s=jy.encode(this.generateCmap(),"unicode"),v=this.glyphsFor(n),C={0:0},V=s.charMap)C[(b=V[u]).old]=b.new;for(K in E=s.maxGlyphID,v)K in C||(C[K]=E++);return T=(function(ae){var ce,H;for(ce in H={},ae)H[ae[ce]]=ce;return H})(C),D=Object.keys(T).sort(function(ae,ce){return ae-ce}),O=(function(){var ae,ce,H;for(H=[],ae=0,ce=D.length;ae<ce;ae++)h=D[ae],H.push(T[h]);return H})(),f=this.font.glyf.encode(v,O,C),x=this.font.loca.encode(f.offsets,O),z={cmap:this.font.cmap.raw(),glyf:f.table,loca:x,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(o)},this.font.os2.exists&&(z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(z)},r})();Tn.API.PDFObject=(function(){var r;function n(){}return r=function(o,s){return(Array(s+1).join("0")+o).slice(-s)},n.convert=function(o){var s,u,f,v;if(Array.isArray(o))return"["+(function(){var h,b,x;for(x=[],h=0,b=o.length;h<b;h++)s=o[h],x.push(n.convert(s));return x})().join(" ")+"]";if(typeof o=="string")return"/"+o;if(o?.isString)return"("+o+")";if(o instanceof Date)return"(D:"+r(o.getUTCFullYear(),4)+r(o.getUTCMonth(),2)+r(o.getUTCDate(),2)+r(o.getUTCHours(),2)+r(o.getUTCMinutes(),2)+r(o.getUTCSeconds(),2)+"Z)";if({}.toString.call(o)==="[object Object]"){for(u in f=["<<"],o)v=o[u],f.push("/"+u+" "+n.convert(v));return f.push(">>"),f.join(`
`)}return""+o},n})();const g0=r=>{const n=tf[r];return!n||!n.prefix||n.prefix.length<1?"?":n.prefix[0].substring(0,1).toUpperCase()},Zl=(r,n,o)=>({color:n,size:o}),T2=(r,n,o)=>{},ho=(r,n,o,s)=>({color:o,size:s}),Rf=(r,n,o,s)=>{},cv=()=>{const r=new Map,n={top:"#0072B2",bottom:"#56B4E9"},o={top:18,bottom:18},s={top:"#FFFF00",bottom:"#FFFF00"},u={top:18,bottom:18},f={top:"#AA4499",bottom:"#F781BF"},v={top:6,bottom:6},h={top:"#6A3D9A",bottom:"#9467BD"},b={top:18,bottom:18};return r.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:Zl("select","#ff0000",10),layerSettings:new Map([["top",ho("select","top","#ff0000",10)],["bottom",ho("select","bottom","#ff0000",10)]])}),r.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:Zl("via",Ih,qh.DEFAULT_SIZE),layerSettings:new Map([["top",ho("via","top",Ih,qh.DEFAULT_SIZE)],["bottom",ho("via","bottom",Ih,qh.DEFAULT_SIZE)]]),defaultLayer:"top"}),r.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:Zl("pad",Wm,18),layerSettings:new Map([["top",ho("pad","top",n.top,o.top)],["bottom",ho("pad","bottom",n.bottom,o.bottom)]]),defaultLayer:"top"}),r.set("testPoint",{id:"testPoint",name:"Test Point",toolType:"draw",drawingMode:"testPoint",icon:"",shortcut:"Y",tooltip:"Place test point",colorReflective:!0,settings:Zl("testPoint","#FFFF00",18),layerSettings:new Map([["top",ho("testPoint","top",s.top,u.top)],["bottom",ho("testPoint","bottom",s.bottom,u.bottom)]]),defaultLayer:"top"}),r.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:Zl("trace",Hm,6),layerSettings:new Map([["top",ho("trace","top",f.top,v.top)],["bottom",ho("trace","bottom",f.bottom,v.bottom)]]),defaultLayer:"top"}),r.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:Zl("component",Vm,z0.DEFAULT_SIZE),layerSettings:new Map([["top",ho("component","top",h.top,b.top)],["bottom",ho("component","bottom",h.bottom,b.bottom)]]),defaultLayer:"top"}),r.set("componentConnection",{id:"componentConnection",name:"Component Connections",toolType:"componentConnection",icon:"",shortcut:"",tooltip:"Component connection lines",colorReflective:!1,settings:Zl("componentConnection","#E69F00",3),layerSettings:new Map([["top",ho("componentConnection","top","#E69F00",3)],["bottom",ho("componentConnection","bottom","#E69F00",3)]])}),r.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:Zl("power",Fh,18),layerSettings:new Map([["top",ho("power","top",Fh,18)],["bottom",ho("power","bottom",Fh,18)]]),defaultLayer:"top"}),r.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:Zl("ground",Uh,18),layerSettings:new Map([["top",ho("ground","top",Uh,18)],["bottom",ho("ground","bottom",Uh,18)]]),defaultLayer:"top"}),r.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:Zl("erase","#f5a3b3",18),layerSettings:new Map([["top",ho("erase","top","#f5a3b3",18)],["bottom",ho("erase","bottom","#f5a3b3",18)]])}),r.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:Zl("pan","#ff0000",10),layerSettings:new Map([["top",ho("pan","top","#ff0000",10)],["bottom",ho("pan","bottom","#ff0000",10)]])}),r.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"M",tooltip:"Magnify",colorReflective:!1,settings:Zl("magnify","#ff0000",10),layerSettings:new Map([["top",ho("magnify","top","#ff0000",10)],["bottom",ho("magnify","bottom","#ff0000",10)]])}),r},j2={via:{color:"#2CA02C",size:18},padTop:{color:"#0072B2",size:18},padBottom:{color:"#56B4E9",size:18},testPointTop:{color:"#FFFF00",size:18},testPointBottom:{color:"#FFFF00",size:18},traceTop:{color:"#AA4499",size:6},traceBottom:{color:"#F781BF",size:6},componentTop:{color:"#6A3D9A",size:18},componentBottom:{color:"#9467BD",size:18},power:{color:"#ff0000",size:18},ground:{color:"#000000",size:18}},_d={via:"Via",padTop:"Pad (Top)",padBottom:"Pad (Bottom)",testPointTop:"Test Point (Top)",testPointBottom:"Test Point (Bottom)",traceTop:"Trace (Top)",traceBottom:"Trace (Bottom)",componentTop:"Component (Top)",componentBottom:"Component (Bottom)",power:"Power",ground:"Ground"};class uv{instances=new Map;listeners=new Map;initialize(){for(const n of Object.keys(j2)){const o=j2[n];this.instances.set(n,{id:n,name:_d[n],color:o.color,size:o.size}),this.listeners.set(n,new Set)}}initializeFromProject(n){if(this.initialize(),n?.toolInstances)for(const[o,s]of Object.entries(n.toolInstances))this.instances.has(o)&&this.instances.set(o,s)}get(n){const o=this.instances.get(n);if(!o)throw new Error(`Tool instance ${n} not found`);return o}getColor(n){const o=this.instances.get(n);if(!o)throw new Error(`Tool instance ${n} not found`);const s=_d[n];return console.log(`${s}, returning color value=${o.color}`),o.color}getSize(n){const o=this.instances.get(n);if(!o)throw new Error(`Tool instance ${n} not found`);const s=_d[n];return console.log(`${s}, returning size value=${o.size}`),o.size}setColor(n,o){const s=this.instances.get(n);if(s){const u=_d[n];console.log(`${u}, setting color value=${o}`),s.color=o,this.notifyListeners(n)}}setSize(n,o){const s=this.instances.get(n);if(s){const u=_d[n];console.log(`${u}, setting size value=${o}`),s.size=o,this.notifyListeners(n)}}getAll(){const n={};for(const[o,s]of this.instances.entries())n[o]=s;return n}subscribe(n,o){const s=this.listeners.get(n);return s?(s.add(o),()=>{s.delete(o)}):()=>{}}notifyListeners(n){const o=this.listeners.get(n);o&&o.forEach(s=>s())}}const ei=new uv;ei.initialize();function Rp(r,n){switch(r){case"via":return"via";case"pad":return n==="bottom"?"padBottom":"padTop";case"testPoint":return n==="bottom"?"testPointBottom":"testPointTop";case"trace":return n==="bottom"?"traceBottom":"traceTop";case"component":return n==="bottom"?"componentBottom":"componentTop";case"power":return"power";case"ground":return"ground";default:throw new Error(`Unknown tool: ${r}`)}}const fv=({visible:r,toolRegistry:n,currentTool:o,drawingMode:s,traceToolLayer:u,padToolLayer:f,testPointToolLayer:v,componentToolLayer:h,updateToolSettings:b,updateToolLayerSettings:x,setBrushSize:T,saveToolSettings:D,saveToolLayerSettings:E,setTopTraceSize:C,setBottomTraceSize:K,setTopPadSize:O,setBottomPadSize:z,setTopTestPointSize:V,setBottomTestPointSize:ae,setTopComponentSize:ce,setBottomComponentSize:H,setComponentConnectionSize:se,saveDefaultSize:Q,onClose:N})=>{const[R,W]=I.useState({}),X=[{id:"via",name:"Via",instanceId:"via"},{id:"pad",name:"Pad",layer:"top",instanceId:"padTop"},{id:"pad",name:"Pad",layer:"bottom",instanceId:"padBottom"},{id:"testPoint",name:"Test Point",layer:"top",instanceId:"testPointTop"},{id:"testPoint",name:"Test Point",layer:"bottom",instanceId:"testPointBottom"},{id:"trace",name:"Trace",layer:"top",instanceId:"traceTop"},{id:"trace",name:"Trace",layer:"bottom",instanceId:"traceBottom"},{id:"component",name:"Component",layer:"top",instanceId:"componentTop"},{id:"component",name:"Component",layer:"bottom",instanceId:"componentBottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power",instanceId:"power"},{id:"ground",name:"Ground",instanceId:"ground"},{id:"erase",name:"Erase"}];I.useEffect(()=>{if(r){const J={};for(const ie of X){const ge=ie.instanceId||ie.id;if(ie.instanceId)try{const $=ei.get(ie.instanceId);J[ge]=$.size}catch{const $=n.get(ie.id);$&&(J[ge]=ie.layer?$.layerSettings.get(ie.layer)?.size??$.settings.size??10:$.settings.size??10)}else{const $=n.get(ie.id);$&&(J[ge]=$.settings.size??10)}}W(J)}},[r]);const k=I.useCallback((J,ie,ge,$)=>{if(!n.get(J)&&J!=="componentConnection")return;const he=$||J;W(be=>({...be,[he]:ie})),["trace","pad","testPoint","component"].includes(J)&&ge&&$?(ei.setSize($,ie),(J==="trace"&&o==="draw"&&s==="trace"||J==="pad"&&o==="draw"&&s==="pad"||J==="testPoint"&&o==="draw"&&s==="testPoint"||J==="component"&&o==="component")&&((J==="trace"?u:J==="pad"?f:J==="testPoint"?v:h)||"top")===ge&&T(ie)):$?(ei.setSize($,ie),(J==="via"&&o==="draw"&&s==="via"||J==="power"&&o==="power"||J==="ground"&&o==="ground")&&T(ie)):(J==="componentConnection"&&(se(ie),Q("componentConnection",ie)),J==="erase"&&o==="erase"&&T(ie))},[n,o,s,u,f,v,h,T,se,Q]);if(!r)return null;const S=Array.from({length:50},(J,ie)=>ie+1);return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:J=>{J.target===J.currentTarget&&N()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",maxWidth:"400px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:J=>J.stopPropagation(),children:[a.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Size"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:X.map((J,ie)=>{if(!n.get(J.id)&&J.id!=="componentConnection")return null;const $=J.layer?`${J.name} (${J.layer==="top"?"Top":"Bottom"})`:J.name,te=J.instanceId||J.id,he=R[te]??10;return a.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[a.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[$,":"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[a.jsx("select",{value:he,onChange:je=>{const be=parseInt(je.target.value,10);k(J.id,be,J.layer,J.instanceId)},style:{width:"50px",padding:"4px 6px",background:"#2b2b31",border:"1px solid #3a3a44",borderRadius:4,color:"#f2f2f2",fontSize:"12px",cursor:"pointer"},children:S.map(je=>a.jsx("option",{value:je,style:{background:"#2b2b31",color:"#f2f2f2"},children:je},je))}),a.jsx("span",{style:{color:"#f2f2f2",fontSize:"12px"},children:"px"})]})]},`${J.id}-${J.layer||"default"}-${ie}`)})}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:a.jsx("button",{onClick:N,style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},dv=({visible:r,toolRegistry:n,currentTool:o,drawingMode:s,traceToolLayer:u,padToolLayer:f,testPointToolLayer:v,componentToolLayer:h,updateToolSettings:b,updateToolLayerSettings:x,saveToolSettings:T,saveToolLayerSettings:D,setBrushColor:E,setTopTraceColor:C,setBottomTraceColor:K,setTopPadColor:O,setBottomPadColor:z,setTopTestPointColor:V,setBottomTestPointColor:ae,setTopComponentColor:ce,setBottomComponentColor:H,setComponentConnectionColor:se,saveDefaultColor:Q,colorPalette:N,onClose:R})=>{const[W,X]=_t.useState(null),[k,S]=_t.useState(0);if(_t.useEffect(()=>{const te=[];return[{id:"via"},{id:"pad",layer:"top"},{id:"pad",layer:"bottom"},{id:"testPoint",layer:"top"},{id:"testPoint",layer:"bottom"},{id:"trace",layer:"top"},{id:"trace",layer:"bottom"},{id:"component",layer:"top"},{id:"component",layer:"bottom"},{id:"power"},{id:"ground"}].forEach(({id:je,layer:be})=>{try{const F=Rp(je,be),A=ei.subscribe(F,()=>{S(M=>M+1)});te.push(A)}catch{}}),()=>{te.forEach(je=>je())}},[]),!r)return null;const J=["pad","testPoint","trace","component"],ie=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],ge=(te,he,je)=>{if(te==="componentConnection"){se(he),Q("componentConnection",he),X(null);return}if(te==="erase"){const be=n.get(te);be&&(b(te,{...be.settings,color:he}),T(te,he,be.settings.size)),X(null);return}try{let be;je&&J.includes(te)?be=Rp(te,je):be=Rp(te),ei.setColor(be,he),(te==="via"&&o==="draw"&&s==="via"||te==="trace"&&o==="draw"&&s==="trace"||te==="pad"&&o==="draw"&&s==="pad"||te==="testPoint"&&o==="draw"&&s==="testPoint"||te==="component"&&o==="component"||te==="power"&&o==="power"||te==="ground"&&o==="ground")&&(je&&J.includes(te)?((te==="trace"?u:te==="pad"?f:te==="testPoint"?v:h)||"top")===je&&E(he):E(he))}catch(be){console.error(`Error updating color for tool ${te}:`,be);const F=n.get(te);F&&(je&&J.includes(te)?(x(te,je,{...F.layerSettings.get(je),color:he}),D(te,je,he,F.layerSettings.get(je)?.size||F.settings.size)):(b(te,{...F.settings,color:he}),T(te,he,F.settings.size)))}X(null)},$=(te,he)=>{let je;try{const A=Rp(te,he);je=ei.get(A).color}catch{const A=n.get(te);if(!A)return null;je=A.settings.color??"#000000"}const be=he?`${te}-${he}`:te,F=W?.toolId===te&&W?.layer===he;return a.jsxs("div",{style:{position:"relative",display:"inline-block",zIndex:10005},children:[a.jsx("button",{className:"color-swatch-button",onClick:A=>{A.stopPropagation(),X(F?null:{toolId:te,layer:he})},style:{width:"40px",height:"24px",background:je,backgroundColor:je,backgroundImage:"none",border:"1px solid #3a3a44",borderRadius:3,cursor:"pointer",padding:0,margin:0,display:"block","--swatch-color":je},title:je},`${be}-button-${je}-${k}`),F&&a.jsx("div",{onClick:A=>{A.stopPropagation()},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:100},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:N.map(A=>a.jsx("div",{onClick:()=>ge(te,A,he),title:A,style:{width:22,height:22,backgroundColor:A,border:A===je?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},A))})})]},`${be}-${je}-${k}`)};return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:te=>{te.target===te.currentTarget&&(R(),X(null))},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",minWidth:"450px",maxWidth:"600px",maxHeight:"85vh",overflowY:"auto",overflowX:"visible",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:te=>te.stopPropagation(),children:[a.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Color"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ie.map((te,he)=>{if(!n.get(te.id))return null;const be=te.layer?`${te.name} (${te.layer==="top"?"Top":"Bottom"})`:te.name;return a.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[a.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[be,":"]}),$(te.id,te.layer)]},`${te.id}-${te.layer||"default"}-${he}`)})}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:a.jsx("button",{onClick:()=>{R(),X(null)},style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},pv=({openMenu:r,setOpenMenu:n,isReadOnlyMode:o,currentProjectFilePath:s,isProjectActive:u,autoSaveEnabled:f,autoSaveInterval:v,hasUnsavedChangesState:h,onNewProject:b,onOpenProject:x,onSaveProject:T,onSaveAs:D,onPrint:E,onExportBOM:C,hasUnsavedChanges:K,bomExportFormat:O,setBomExportFormat:z,setNewProjectDialog:V,setAutoSaveDialog:ae,topImage:ce,bottomImage:H,setCurrentTool:se,resetImageTransform:Q,areImagesLocked:N,setAreImagesLocked:R,onEnterBoardDimensions:W,fileInputTopRef:X,fileInputBottomRef:k,openProjectRef:S,increaseSize:J,decreaseSize:ie,brushSize:ge,drawingStrokes:$,selectedIds:te,selectedComponentIds:he,selectedPowerIds:je,selectedGroundIds:be,componentsTop:F,componentsBottom:A,powers:M,grounds:B,powerNodeNames:de,groundNodeNames:ke,setSetSizeDialog:De,areViasLocked:Ge,setAreViasLocked:ze,arePadsLocked:tt,setArePadsLocked:Xe,areTestPointsLocked:Tt,setAreTestPointsLocked:jt,areTracesLocked:It,setAreTracesLocked:pe,areComponentsLocked:Pt,setAreComponentsLocked:gn,areGroundNodesLocked:Qt,setAreGroundNodesLocked:ht,arePowerNodesLocked:nn,setArePowerNodesLocked:Rt,showTraceCornerDots:mn,setShowTraceCornerDots:en,setSelectedIds:Vn,setSelectedComponentIds:Nt,setSelectedPowerIds:Dt,setSelectedGroundIds:li,selectAllVias:ct,selectAllTraces:kt,selectAllPads:Rn,selectAllComponents:Gt,selectDisconnectedComponents:zn,selectAllComponentConnections:Nn,selectAllPowerNodes:rn,selectAllGroundNodes:xn,selectPowerNodesByName:rt,selectGroundNodesByName:$t,setShowPowerBusManager:Ht,setShowGroundBusManager:Vt,setShowDesignatorManager:wn,setShowPastMachine:Xi,toolRegistry:Un,updateToolSettings:un,updateToolLayerSettings:Wt,setBrushSize:ko,setBrushColor:Zr,saveToolSettings:go,saveToolLayerSettings:Ao,colorPalette:Xt,currentTool:No,drawingMode:ya,traceToolLayer:na,padToolLayer:vt,testPointToolLayer:ii,componentToolLayer:Xn,setTopTraceSize:cr,setBottomTraceSize:$i,setTopPadSize:Sr,setBottomPadSize:xi,setTopTestPointSize:di,setBottomTestPointSize:yo,setTopComponentSize:ia,setBottomComponentSize:ma,setComponentConnectionSize:qs,topTraceColor:za,bottomTraceColor:Pa,topPadColor:os,bottomPadColor:Wn,topTestPointColor:_o,bottomTestPointColor:Si,topComponentColor:xa,bottomComponentColor:Pn,setTopTraceColor:Ts,setBottomTraceColor:Yn,setTopPadColor:ra,setBottomPadColor:ba,setTopTestPointColor:js,setBottomTestPointColor:ks,setTopComponentColor:Hs,setBottomComponentColor:xc,setComponentConnectionColor:Fi,saveDefaultSize:As,saveDefaultColor:In,menuBarRef:Mn,onOpenProjectNotes:Ns,onOpenTransformImages:Ya,onOpenTransformAll:Da})=>{const[al,bi]=_t.useState(null),Zn=_t.useRef(null),[Cr,Ri]=_t.useState(null),qr=_t.useRef(null),[sl,Ji]=_t.useState(!1),ao=_t.useRef(null),[va,Hr]=_t.useState(!1),[wa,Sa]=_t.useState(!1),_s=ut=>{if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),n(null);return}const Sn=ut();Sn instanceof Promise&&Sn.catch(Fo=>{console.error("Error in requireProject action:",Fo)})},Vs=ut=>{const Sn=ut==="power"?de:ke,Fo=Sn.length>0,ll=ut==="power"?"Select Power Nodes":"Select Ground Nodes";return a.jsxs("div",{onMouseEnter:()=>{Zn.current&&(clearTimeout(Zn.current),Zn.current=null),bi(ut)},onMouseLeave:()=>{Zn.current=window.setTimeout(()=>{bi(Cn=>Cn===ut?null:Cn)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[a.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[ll," by Name"]}),a.jsxs("button",{onClick:()=>{ut==="power"?rn():xn(),bi(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",ut==="power"?"Power Nodes":"Ground Nodes"]}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),Fo?Sn.map(Cn=>a.jsx("button",{onClick:()=>{ut==="power"?rt(Cn):$t(Cn),bi(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:Cn},Cn)):a.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",ut==="power"?"power":"ground"," nodes available."]})]})},zl=()=>a.jsxs("div",{onMouseEnter:()=>{qr.current&&(clearTimeout(qr.current),qr.current=null),Ri("lock")},onMouseLeave:()=>{qr.current=window.setTimeout(()=>{Ri(ut=>ut==="lock"?null:ut)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[a.jsxs("label",{onClick:ut=>{ut.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:Ge,onChange:()=>{ze(ut=>!ut)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Vias"})]}),a.jsxs("label",{onClick:ut=>{ut.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:tt,onChange:()=>{Xe(ut=>!ut)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Pads"})]}),a.jsxs("label",{onClick:ut=>{ut.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:Tt,onChange:()=>{jt(ut=>!ut)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Test Points"})]}),a.jsxs("label",{onClick:ut=>{ut.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:It,onChange:()=>{pe(ut=>!ut)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Traces"})]}),a.jsxs("label",{onClick:ut=>{ut.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:Pt,onChange:()=>{gn(ut=>!ut)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Components"})]}),a.jsxs("label",{onClick:ut=>{ut.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:Qt,onChange:()=>{ht(ut=>!ut)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Ground Node"})]}),a.jsxs("label",{onClick:ut=>{ut.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:nn,onChange:()=>{Rt(ut=>!ut)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Power Nodes"})]})]}),Pl=()=>a.jsxs("div",{onMouseEnter:()=>{qr.current&&(clearTimeout(qr.current),qr.current=null),Ri("select")},onMouseLeave:()=>{qr.current=window.setTimeout(()=>{Ri(ut=>ut==="select"?null:ut)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[a.jsx("button",{onClick:()=>{ct(),Ri(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Vias"}),a.jsx("button",{onClick:()=>{kt(),Ri(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Traces"}),a.jsx("button",{onClick:()=>{Rn(),Ri(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Pads"}),a.jsx("button",{onClick:()=>{const ut=new Set($.filter(Sn=>Sn.type==="testPoint").map(Sn=>Sn.id));Vn(ut),Nt(new Set),Dt(new Set),li(new Set),Ri(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Test Points"}),a.jsx("button",{onClick:()=>{Gt(),Ri(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Components"}),a.jsx("button",{onClick:()=>{Nn(),Ri(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Component Connections"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{Zn.current&&(clearTimeout(Zn.current),Zn.current=null),bi("power")},onMouseLeave:()=>{Zn.current=window.setTimeout(()=>{bi(ut=>ut==="power"?null:ut)},200)},onClick:()=>{bi(ut=>ut==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Power Nodes "}),al==="power"&&Vs("power")]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{Zn.current&&(clearTimeout(Zn.current),Zn.current=null),bi("ground")},onMouseLeave:()=>{Zn.current=window.setTimeout(()=>{bi(ut=>ut==="ground"?null:ut)},200)},onClick:()=>{bi(ut=>ut==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Ground Nodes "}),al==="ground"&&Vs("ground")]}),a.jsx("button",{onClick:()=>{zn(),Ri(null),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Disconnected Components"})]});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{ref:Mn,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:ut=>{ut.stopPropagation(),n(Sn=>Sn==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:r==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),r==="file"&&a.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[a.jsx("button",{onClick:()=>{o||(n(null),K()?V({visible:!0}):b())},disabled:o,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o?"not-allowed":"pointer"},children:"New Project"}),a.jsx("button",{onClick:async()=>{await x(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{o||_s(()=>{T(),n(null)})},disabled:o||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||!u?"not-allowed":"pointer"},children:"Save Project"}),a.jsx("button",{onClick:()=>{o||_s(()=>{D(),n(null)})},disabled:o||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||!u?"not-allowed":"pointer"},children:"Save As"}),a.jsx("button",{onClick:()=>{o||_s(()=>{ae({visible:!0,interval:5}),n(null)})},disabled:o||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||!u?"not-allowed":"pointer"},children:"Auto Save"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{Xi(!0),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Restore from History"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{ao.current&&(clearTimeout(ao.current),ao.current=null),Ji(!0)},onMouseLeave:()=>{ao.current=window.setTimeout(()=>{Ji(!1)},200)},onClick:ut=>{ut.stopPropagation(),Ji(!sl)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Settings "}),sl&&a.jsxs("div",{onMouseEnter:()=>{ao.current&&(clearTimeout(ao.current),ao.current=null),Ji(!0)},onMouseLeave:()=>{ao.current=window.setTimeout(()=>{Ji(!1)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[a.jsx("div",{style:{padding:"4px 8px",color:"#aaa",fontSize:"11px",fontWeight:600,textTransform:"uppercase",marginBottom:"4px"},children:"BOM Export Format"}),a.jsxs("label",{onClick:ut=>{ut.stopPropagation(),z("pdf")},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",background:"transparent",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"radio",name:"bomFormat",checked:O==="pdf",onChange:()=>z("pdf"),style:{marginRight:"8px",cursor:"pointer",accentColor:"#4a9eff"}}),a.jsx("span",{children:"PDF"})]}),a.jsxs("label",{onClick:ut=>{ut.stopPropagation(),z("json")},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",background:"transparent",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"radio",name:"bomFormat",checked:O==="json",onChange:()=>z("json"),style:{marginRight:"8px",cursor:"pointer",accentColor:"#4a9eff"}}),a.jsx("span",{children:"JSON"})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"8px 0"}}),a.jsx("button",{onClick:ut=>{ut.stopPropagation(),Hr(!0),n(null),Ji(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Sizes"}),a.jsx("button",{onClick:ut=>{ut.stopPropagation(),Sa(!0),n(null),Ji(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Colors"})]})]}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:async()=>{if(!o){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),n(null);return}try{await C(),n(null)}catch(ut){console.error("Error exporting BOM:",ut)}}},disabled:o||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||!u?"not-allowed":"pointer"},children:"Export BOM"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{_s(()=>{E(),n(null)})},disabled:!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:u?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:u?"pointer":"not-allowed"},children:"Print"}),a.jsx("button",{onClick:()=>{_s(()=>{E(),n(null)})},disabled:!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:u?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:u?"pointer":"not-allowed"},children:"Printer Settings"})]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:ut=>{if(!o){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature.");return}ut.stopPropagation(),n(Sn=>Sn==="transform"?null:"transform")}},disabled:o||!u,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:r==="transform"?"#eef3ff":"#fff",fontWeight:600,color:o||!u?"#999":"#222",cursor:o||!u?"not-allowed":"pointer",opacity:o||!u?.5:1},children:"Images "}),r==="transform"&&a.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[a.jsx("button",{onClick:()=>{!o&&!N&&(X.current?.click(),n(null))},disabled:o||N,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||N?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||N?"not-allowed":"pointer"},children:"Load Top PCB"}),a.jsx("button",{onClick:()=>{!o&&!N&&(k.current?.click(),n(null))},disabled:o||N,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||N?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||N?"not-allowed":"pointer"},children:"Load Bottom PCB"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{N||(W(),n(null))},disabled:N,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:N?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:N?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{Ya(),n(null)},disabled:!ce&&!H||N,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!ce&&!H||N?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!ce&&!H||N?"not-allowed":"pointer"},children:"Transform Images"}),a.jsx("button",{onClick:()=>{N||(se("transform"),Q(),n(null))},disabled:N||!ce&&!H,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:N||!ce&&!H?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:N||!ce&&!H?"not-allowed":"pointer"},children:"Reset Transform"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{R(ut=>!ut),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:N?"Unlock Images ":"Lock Images"})]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:ut=>{if(!o){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature.");return}ut.stopPropagation(),n(Sn=>Sn==="tools"?null:"tools")}},disabled:o||!u,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:r==="tools"?"#eef3ff":"#fff",fontWeight:600,color:o||!u?"#999":"#222",cursor:o||!u?"not-allowed":"pointer",opacity:o||!u?.5:1},children:"Tools "}),r==="tools"&&a.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[a.jsx("button",{onClick:()=>{Da(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Change Perspective"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{J(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),a.jsx("button",{onClick:()=>{ie(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{qr.current&&(clearTimeout(qr.current),qr.current=null),Ri("lock")},onMouseLeave:()=>{qr.current=window.setTimeout(()=>{Ri(ut=>ut==="lock"?null:ut)},200)},onClick:()=>{Ri(ut=>ut==="lock"?null:"lock")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Lock "}),Cr==="lock"&&zl()]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{qr.current&&(clearTimeout(qr.current),qr.current=null),Ri("select")},onMouseLeave:()=>{qr.current=window.setTimeout(()=>{Ri(ut=>ut==="select"?null:ut)},200)},onClick:()=>{Ri(ut=>ut==="select"?null:"select")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select "}),Cr==="select"&&Pl()]}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{Ns(),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Open Project Notes"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{Ht(!0),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),a.jsx("button",{onClick:()=>{Vt(!0),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{wn(!0),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Designators"}),a.jsxs("button",{onClick:()=>{en(!mn),n(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:[mn?" ":"   ","Show Trace Corner Dots"]})]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:ut=>{ut.stopPropagation(),n(Sn=>Sn==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:r==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),r==="about"&&a.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:a.jsxs("div",{style:{marginBottom:16},children:[a.jsx("h2",{style:{margin:"0 0 16px 0",color:"#f2f2f2",fontSize:"20px",fontWeight:700},children:"PCB Tracer"}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"About"}),a.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool useful for both reverse engineering and troubleshooting electronics by tracing and documenting circuit connections from PCB images. This application supports typical 2 to 4 layer PCBs and enables comprehensive PCB analysis and documentation."}),a.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"This tool can assist in troubleshooting by tracing circuits, holding contextual notes, comparing test results, and documenting findings during the debugging process."})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Technology"}),a.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"The application runs entirely client-side in the browser, to provide a responsive, interactive drawing experience with no backend server requirements."})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Features"}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Tools & Shortcuts"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#f2f2f2"},children:[a.jsx("div",{children:a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Select"}),"  ",a.jsx("code",{children:"S"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Via"}),"  ",a.jsx("code",{children:"V"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Pad"}),"  ",a.jsx("code",{children:"P"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Test Point"}),"  ",a.jsx("code",{children:"Y"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Trace"}),"  ",a.jsx("code",{children:"T"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Component"}),"  ",a.jsx("code",{children:"C"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Component Properties"}),"  double-click component"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Resize Icons"}),"  ",a.jsx("code",{children:"+"})," / ",a.jsx("code",{children:"-"})]})]})}),a.jsx("div",{children:a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Power"}),"  ",a.jsx("code",{children:"B"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Ground"}),"  ",a.jsx("code",{children:"G"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Move (Pan)"}),"  ",a.jsx("code",{children:"H"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Magnify"}),"  ",a.jsx("code",{children:"M"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Set View"}),"  ",a.jsx("code",{children:"X"})," then ",a.jsx("code",{children:"0-9"})," to save view"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Recall View"}),"  ",a.jsx("code",{children:"0-9"})," to recall saved view"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Information Dialog"}),"  ",a.jsx("code",{children:"I"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Notes Dialog"}),"  ",a.jsx("code",{children:"N"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Project Notes / TODO"}),"  ",a.jsx("code",{children:"L"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Undo"}),"  ",a.jsx("code",{children:"Ctrl"})," + ",a.jsx("code",{children:"Z"})]})]})})]}),a.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#f2f2f2"},children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Arrow Keys"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components (1 unit per press, ",a.jsx("code",{children:"Shift"})," = 10 units)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Switch Perspective"}),"  ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," to switch between top/bottom view"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Rotate Perspective"}),"  ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," to rotate in 90 increments (",a.jsx("code",{children:""})," = counter-clockwise, ",a.jsx("code",{children:""})," = clockwise)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Image Transformations"}),"  Arrow keys for scaling, rotating, and adjusting image transformations (when image is selected for transform)"]}),a.jsx("li",{children:"Click a slider first, then use arrow keys for precise adjustment"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 20px"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Image Management"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Load top and bottom PCB images"}),a.jsx("li",{children:"Image alignment and transformation"}),a.jsx("li",{children:"Transform modes: nudge, scale, rotate, slant, keystone"}),a.jsx("li",{children:"Horizontal and vertical flip controls"}),a.jsx("li",{children:"Brightness and contrast controls"}),a.jsx("li",{children:"Grayscale mode"}),a.jsx("li",{children:"Automated transparency slider"}),a.jsx("li",{children:"Board dimensions configuration"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Drawing Tools"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Draw copper traces (top and bottom layers)"}),a.jsx("li",{children:"Place vias for layer connections"}),a.jsx("li",{children:"Place component pads (SMD and through-hole)"}),a.jsx("li",{children:"Place test points for circuit testing"}),a.jsx("li",{children:"Place and annotate components"}),a.jsx("li",{children:"Place power and ground nodes"}),a.jsx("li",{children:"Erase tool for removing elements"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Layer Management"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"14 independent layers to manage PCB element types"}),a.jsx("li",{children:"Separate top and bottom layer support"}),a.jsx("li",{children:"Layer-specific color customization"}),a.jsx("li",{children:"Layer-specific size controls"}),a.jsx("li",{children:"Layer visibility toggles"}),a.jsx("li",{children:"Overlay view mode"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Component Management"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Component placement with pin counts"}),a.jsx("li",{children:"Pin connection tracking"}),a.jsx("li",{children:"Component type classification"}),a.jsx("li",{children:"Designator and value annotation"}),a.jsx("li",{children:"Component editor dialog"}),a.jsx("li",{children:"Find and center component"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Selection & Locking"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Select individual elements or groups"}),a.jsx("li",{children:"Select all vias, traces, pads, or components"}),a.jsx("li",{children:"Select power/ground nodes by name"}),a.jsx("li",{children:"Select disconnected components"}),a.jsx("li",{children:"Lock/unlock elements by type"}),a.jsx("li",{children:"Image locking for protection"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Power & Ground"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Multiple voltage power nodes"}),a.jsx("li",{children:"Power bus management"}),a.jsx("li",{children:"Ground node placement"}),a.jsx("li",{children:"Ground bus management"}),a.jsx("li",{children:"Node naming and organization"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Customization"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Customizable colors per layer"}),a.jsx("li",{children:"Adjustable brush/tool sizes"}),a.jsx("li",{children:"Size presets for common tools"}),a.jsx("li",{children:"Color palette management"}),a.jsx("li",{children:"Tool settings persistence"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Project Management"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Create, open, and save projects"}),a.jsx("li",{children:"Auto-save with configurable intervals"}),a.jsx("li",{children:"File history automatically saved in history subdirectory when Auto Save is enabled"}),a.jsx("li",{children:"Project Notes / TODO list with spreadsheet-like editing"}),a.jsx("li",{children:"Project file format (JSON)"}),a.jsx("li",{children:"Print functionality"}),a.jsx("li",{children:"Export to KiCad schematic format (future feature, not yet implemented)"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"View Controls"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Zoom in/out with mouse wheel"}),a.jsx("li",{children:"Pan view with hand tool"}),a.jsx("li",{children:"Zoom to fit"}),a.jsx("li",{children:"View mode switching (top/bottom/overlay)"}),a.jsx("li",{children:"Save up to 10 view locations (X + 0-9)"}),a.jsx("li",{children:"Recall saved views instantly (0-9 keys)"}),a.jsx("li",{children:"Change Perspective (Tools menu) - switch between top/bottom view and rotate all elements"}),a.jsx("li",{children:"Detailed information dialog"})]})]})]})]}),a.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:a.jsxs("p",{style:{margin:"0 0 8px 0",color:"#bbb",fontSize:"12px",lineHeight:"1.5"},children:["Use the ",a.jsx("strong",{children:"File"})," menu to manage projects, the ",a.jsx("strong",{children:"Images"})," menu for image loading and transformation, and the ",a.jsx("strong",{children:"Tools"})," menu for selection, locking, and customization options."]})}),a.jsxs("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Future / TODO List"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"A searchable list of common components"}),a.jsx("li",{children:"Output schematics (perhaps as KiCad files)"}),a.jsx("li",{children:"Dynamic layers"}),a.jsx("li",{children:"Create a desktop version of this application using Electron"})]})]})]})})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:ut=>{ut.stopPropagation(),n(Sn=>Sn==="help"?null:"help")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:r==="help"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"Help "}),r==="help"&&a.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:a.jsxs("div",{style:{marginBottom:16},children:[a.jsx("h2",{style:{margin:"0 0 16px 0",color:"#f2f2f2",fontSize:"20px",fontWeight:700},children:"Help: Typical Usage Steps"}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 1: Create or Open a Project"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"New Project:"})," File  New Project. Choose a project name and location."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Open Project:"})," File  Open Project. Select an existing project file (.json)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Auto-Save:"})," File  Auto Save  Enable to automatically save your work at regular intervals."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 2: Load PCB Images"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Load Top Image:"})," Images  Load Top Image. Select your top-side PCB photo (.png or .jpeg)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Load Bottom Image:"})," Images  Load Bottom Image. Select your bottom-side PCB photo."]}),a.jsxs("li",{children:["Images are automatically copied to the ",a.jsx("code",{style:{background:"#1f1f24",padding:"2px 4px",borderRadius:3,color:"#fff"},children:"images/"})," subdirectory."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 3: Align and Transform Images"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Enter Transform Mode:"})," Images  Transform Images. Select which image (Top or Bottom) to transform."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Transform Operations:"})," Use Move, Nudge, Scale, Rotate, Slant, or Keystone to align images."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Image Adjustments:"})," Adjust brightness, contrast, sharpness, and grayscale as needed."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Flip Images:"})," Use horizontal or vertical flip if your images are mirrored."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Arrow Keys:"})," When transform tool is active, use arrow keys for precise image adjustments."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Move Components:"})," Select components, then use arrow keys to move them (1 unit per press, ",a.jsx("code",{children:"Shift"})," = 10 units for larger steps)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Change Perspective:"})," Tools  Change Perspective (or press ",a.jsx("code",{children:"E"}),") to switch between top/bottom view or rotate all elements (images, components, traces) together by 90, 180, or 270."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Quick Perspective Switch:"})," Press ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," to quickly switch between top/bottom view."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Quick Perspective Rotation:"})," Press ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," to rotate perspective in 90 increments (",a.jsx("code",{children:""})," = counter-clockwise, ",a.jsx("code",{children:""})," = clockwise)."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 4: Set Board Dimensions"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Enter Dimensions:"})," Images  Enter Board Dimensions. Specify the actual physical dimensions of your PCB."]}),a.jsx("li",{children:"This helps ensure accurate measurements and scaling for your reverse engineering work."})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 5: Trace Connections"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Place Vias:"})," Click the Via tool (",a.jsx("code",{children:"V"}),") and click on the PCB where vias connect layers."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Place Pads:"})," Click the Pad tool (",a.jsx("code",{children:"P"}),") and mark component pad locations."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Place Test Points:"})," Click the Test Point tool (",a.jsx("code",{children:"Y"}),") to mark test points."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Draw Traces:"})," Click the Trace tool (",a.jsx("code",{children:"T"}),"), select Top or Bottom layer, then click to start a trace. Click again to add segments. Press ",a.jsx("code",{children:"Enter"})," or click outside to finish."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Snapping:"})," Traces automatically snap to nearby vias, pads, power nodes, and ground nodes."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 6: Place Components"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Place Component:"})," Click the Component tool (",a.jsx("code",{children:"C"}),"), select component type, then click on the PCB."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Edit Component:"})," Double-click a component to open the Component Editor dialog."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Set Properties:"})," Enter designator (e.g., R1, C2), value, and other component details."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Connect Pins:"})," Click on pads or vias to connect component pins to the circuit."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 7: Add Power and Ground Nodes"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Manage Power Buses:"})," Tools  Manage Power Buses to create and configure voltage buses (e.g., +5V, +3.3V)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Place Power Nodes:"})," Click the Power tool (",a.jsx("code",{children:"B"}),"), select a voltage bus, then click on the PCB."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Manage Ground Buses:"})," Tools  Manage Ground Buses to configure ground connections."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Place Ground Nodes:"})," Click the Ground tool (",a.jsx("code",{children:"G"}),"), select a ground bus, then click on the PCB."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 8: Add Notes and Documentation"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Element Notes:"})," Press ",a.jsx("code",{children:"N"})," to open the Notes dialog for selected elements (vias, pads, traces, etc.)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Project Notes:"})," Press ",a.jsx("code",{children:"L"})," to open Project Notes / TODO list for general project documentation."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Information Dialog:"})," Press ",a.jsx("code",{children:"I"})," to see detailed information about selected elements."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Find Elements:"})," Use the Find button in the Information dialog to center and highlight specific elements."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 9: Save Your Work"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Manual Save:"})," File  Save Project to save your work manually."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Auto-Save:"})," If enabled, your project is automatically saved at regular intervals."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"History:"})," Auto-saved versions are stored in the ",a.jsx("code",{style:{background:"#1f1f24",padding:"2px 4px",borderRadius:3,color:"#fff"},children:"history/"})," subdirectory."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Restore from History:"})," File  Restore from History to access previous versions."]})]})]}),a.jsxs("div",{style:{marginBottom:20,paddingTop:16,borderTop:"1px solid #444"},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Keyboard Shortcuts"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#f2f2f2"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Drawing Tools"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Select"}),"  ",a.jsx("code",{children:"S"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Via"}),"  ",a.jsx("code",{children:"V"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Pad"}),"  ",a.jsx("code",{children:"P"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Test Point"}),"  ",a.jsx("code",{children:"Y"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Trace"}),"  ",a.jsx("code",{children:"T"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Component"}),"  ",a.jsx("code",{children:"C"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Power"}),"  ",a.jsx("code",{children:"B"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Ground"}),"  ",a.jsx("code",{children:"G"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"View & Navigation"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Move (Pan)"}),"  ",a.jsx("code",{children:"H"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Magnify"}),"  ",a.jsx("code",{children:"M"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Set View"}),"  ",a.jsx("code",{children:"X"})," then ",a.jsx("code",{children:"0-9"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Recall View"}),"  ",a.jsx("code",{children:"0-9"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Information"}),"  ",a.jsx("code",{children:"I"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Notes"}),"  ",a.jsx("code",{children:"N"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Project Notes"}),"  ",a.jsx("code",{children:"L"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Undo"}),"  ",a.jsx("code",{children:"Ctrl+Z"})," / ",a.jsx("code",{children:"Cmd+Z"})]})]})]})]}),a.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#f2f2f2"},children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Arrow Keys"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components (1 unit per press, ",a.jsx("code",{children:"Shift"})," = 10 units)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Switch Perspective"}),"  ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Rotate Perspective"}),"  ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," (",a.jsx("code",{children:""})," = counter-clockwise, ",a.jsx("code",{children:""})," = clockwise)"]}),a.jsx("li",{children:"Use arrow keys to adjust image transformations (when transform tool is active)"}),a.jsx("li",{children:"Click a slider first, then use arrow keys for precise adjustment"})]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Tips & Tricks"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Double-click any slider to reset it to the default value"}),a.jsx("li",{children:"Double-click a component to edit its properties"}),a.jsxs("li",{children:["Hold ",a.jsx("code",{children:"Shift"})," while clicking to add to selection"]}),a.jsxs("li",{children:["Use the Information dialog (",a.jsx("code",{children:"I"}),") to see details about selected elements"]}),a.jsx("li",{children:"Lock layers (Tools  Lock) to prevent accidental modifications"}),a.jsx("li",{children:"Use the Find button in the Information dialog to center elements in view"}),a.jsxs("li",{children:["Save views with ",a.jsx("code",{children:"X"})," + number key for quick navigation"]}),a.jsxs("li",{children:["Use ",a.jsx("code",{children:"+"})," and ",a.jsx("code",{children:"-"})," keys to resize tool icons"]})]})]}),a.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:a.jsxs("p",{style:{margin:"0 0 8px 0",color:"#bbb",fontSize:"12px",lineHeight:"1.5"},children:["For more detailed feature information, see the ",a.jsx("strong",{children:"About"})," menu."]})})]})})]}),s&&a.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:s,children:s}),a.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"1px solid #666",backgroundColor:h?f?"#ffaa00":"#ff0000":"#00ff00",flexShrink:0},title:h?f?`Changes detected  Auto Save: ON  Will be saved automatically every ${v||1} minute${v===1?"":"s"}`:"Changes detected  Auto Save: OFF  You need to save manually (File  Save Project)":"Project saved  No unsaved changes  Auto Save: "+(f?"ON":"OFF")})]})]}),a.jsx(fv,{visible:va,toolRegistry:Un,currentTool:No,drawingMode:ya,traceToolLayer:na,padToolLayer:vt,testPointToolLayer:ii,componentToolLayer:Xn,updateToolSettings:un,updateToolLayerSettings:Wt,setBrushSize:ko,saveToolSettings:go,saveToolLayerSettings:Ao,setTopTraceSize:cr,setBottomTraceSize:$i,setTopPadSize:Sr,setBottomPadSize:xi,setTopTestPointSize:di,setBottomTestPointSize:yo,setTopComponentSize:ia,setBottomComponentSize:ma,setComponentConnectionSize:qs,saveDefaultSize:As,onClose:()=>Hr(!1)}),a.jsx(dv,{visible:wa,toolRegistry:Un,currentTool:No,drawingMode:ya,traceToolLayer:na,padToolLayer:vt,testPointToolLayer:ii,componentToolLayer:Xn,updateToolSettings:un,updateToolLayerSettings:Wt,saveToolSettings:go,saveToolLayerSettings:Ao,setBrushColor:Zr,setTopTraceColor:Ts,setBottomTraceColor:Yn,setTopPadColor:ra,setBottomPadColor:ba,setTopTestPointColor:js,setBottomTestPointColor:ks,setTopComponentColor:Hs,setBottomComponentColor:xc,setComponentConnectionColor:Fi,saveDefaultColor:In,colorPalette:Xt,onClose:()=>Sa(!1)})]})},hv=({visible:r})=>r?a.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.85)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Tracer"}),a.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Multilayer PCBs"}),a.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"1) Use the File menu to start a new project."}),a.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"2) Use the Images menu to load and align PCB photos."}),a.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5",textAlign:"left"},children:"3) Use the tools to draw vias, pads, traces, etc."}),a.jsx("div",{style:{fontSize:"13px",color:"#555",marginTop:"16px",lineHeight:"1.5",textAlign:"center",fontWeight:"bold"},children:"Best viewed in browser's Full Screen Mode"})]}):null,gv=({visible:r,title:n,message:o,onClose:s})=>r?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:u=>{u.target===u.currentTarget&&s()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:u=>u.stopPropagation(),children:[a.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),a.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:n})]}),a.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:o}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:a.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null;function Vf(r){if(!r)return;const n=r.componentDefinitionKey;if(n){const s=If.find(u=>`${u.category}:${u.subcategory}:${u.type}`===n);if(s)return s}if(typeof r.designator=="string"&&r.designator.trim()!==""){const s=r.designator.trim().match(/^[A-Za-z]+/),u=s?s[0]:null;if(u){const f=If.find(v=>Array.isArray(v.designators)&&v.designators.includes(u));if(f)return f}}const o=r.componentType==="Electrolytic Capacitor"||r.componentType==="Film Capacitor"?"Capacitor":r.componentType;return If.find(s=>{if(s.type!==o)return!1;if(s.category==="Capacitors"){const u=r.capacitorType||r.dielectric;return!!(u&&s.properties?.capacitorType===u||!u)}if(s.category==="Diodes"){const u=r.diodeType;return!!(u&&s.properties?.diodeType===u||!s.properties?.diodeType)}if(s.category==="Resistors"){const u=r.resistorType,f=r.vrType;return!!(u&&s.properties?.resistorType===u||f&&s.properties?.vrType===f||!s.properties?.resistorType&&!s.properties?.vrType)}if(s.category==="Semiconductors"){const u=r.semiconductorType;return!!(u&&s.properties?.semiconductorType===u||!s.properties?.semiconductorType)}if(s.category==="Passive Components"){const u=r.passiveType;return!!(u&&s.properties?.passiveType===u||!s.properties?.passiveType)}if(s.category==="Power & Energy"){const u=r.powerType;return!!(u&&s.properties?.powerType===u||!s.properties?.powerType)}if(s.category==="Connectors & Switches"){const u=r.connectorType,f=r.switchType;return!!(u&&s.properties?.connectorType===u||f&&s.properties?.switchType===f||!s.properties?.connectorType&&!s.properties?.switchType)}if(r.componentType==="GenericComponent"){const u=r.genericType;return!!(u&&s.subtype===u)}return!0})}const yv=({visible:r,selectedIds:n,selectedComponentIds:o,selectedPowerIds:s,selectedGroundIds:u,drawingStrokes:f,componentsTop:v,componentsBottom:h,powers:b,grounds:x,powerBuses:T,onClose:D,setComponentsTop:E,setComponentsBottom:C,determineViaType:K,determinePadType:O,determineTestPointType:z,onFindComponent:V,onFindStroke:ae,onFindPower:ce,onFindGround:H,position:se,isDragging:Q,onDragStart:N,onOpenNotesDialog:R})=>{if(!r)return null;const W=se?{position:"fixed",left:`${se.x}px`,top:`${se.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:Q?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},X={padding:"20px",overflow:"auto",flex:1};return a.jsxs("div",{style:W,children:[a.jsxs("div",{onMouseDown:k=>{const S=k.target;S.tagName==="BUTTON"||S.closest("button")||se&&N(k)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:Q?"grabbing":se?"grab":"default",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (I)"}),a.jsx("button",{onClick:D,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:X,children:a.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const k=f.filter($=>n.has($.id)).length,S=[...v,...h].filter($=>o.has($.id)).length,J=b.filter($=>s.has($.id)).length,ie=x.filter($=>u.has($.id)).length,ge=k+S+J+ie;return a.jsx("div",{style:{padding:"12px 16px",backgroundColor:ge>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:ge>0?"#333":"#856404",marginBottom:"8px"},children:ge>0?`${ge} Object${ge!==1?"s":""} Selected`:"Zero Objects Selected"})})(),o.size>0&&(()=>{const k=f.some(S=>n.has(S.id)&&(S.type==="via"||S.type==="pad"));return[...v,...h].filter(S=>o.has(S.id)).map(S=>{const J=Vf(S),ie=J?.fields,ge=ie&&ie.length>0?a.jsx("div",{style:{marginTop:"6px",marginBottom:"6px",padding:"4px 0"},children:ie.map($=>{const te=S[$.name];if(te==null||te==="")return null;const he=S[`${$.name}Unit`],je=typeof te=="boolean"?te?"Yes":"No":te;return a.jsxs("div",{style:{fontSize:"11px",color:"#444",marginBottom:"2px"},children:[$.label,": ",je,he?` ${he}`:""]},$.name)})}):a.jsx("div",{style:{padding:"6px 0",fontSize:"11px",color:"#856404",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:4,marginTop:"6px",marginBottom:"6px"},children:"Component definition missing for this instance. Please ensure componentDefinitions.json entry and componentDefinitionKey are set."});return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",flexDirection:"column",gap:"4px",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Category:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J?.category||"N/A"})]})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J?.displayName?S.componentType==="Capacitor"&&!J.displayName.toLowerCase().includes("capacitor")?`${J.displayName} Capacitor`:J.displayName:S.componentType==="GenericComponent"&&S.genericType?rl(S.genericType):S.componentType==="Diode"&&S.diodeType&&S.diodeType!=="Standard"?rl(S.diodeType):S.componentType==="VariableResistor"&&S.vrType&&S.vrType!=="Potentiometer"?rl(S.vrType):S.componentType==="Capacitor"&&S.dielectric==="Tantalum"?"Tantalum Capacitor":S.componentType==="Capacitor"&&S.capacitorType==="Electrolytic"?"Electrolytic Capacitor":S.componentType==="Capacitor"&&S.capacitorType==="Film"?"Film Capacitor":rl(S.componentType)})]}),V&&a.jsx("button",{onClick:()=>{V(S.id,S.x,S.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:$=>{$.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:$=>{$.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[ge,a.jsxs("div",{children:["Layer: ",S.layer]}),S.componentType==="IntegratedCircuit"&&a.jsxs(a.Fragment,{children:[S.description&&a.jsxs("div",{children:["Description: ",S.description]}),S.icType&&a.jsxs("div",{children:["IC Type: ",S.icType]})]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:S.notes||"",readOnly:!0,onClick:R,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsxs("span",{children:["Designator: ",S.designator||"(empty)"]}),k&&a.jsx("button",{onClick:()=>{const $=[...v,...h].filter(B=>o.has(B.id)&&B.componentType===S.componentType),te=$.length,he=f.filter(B=>n.has(B.id)&&B.type==="pad"&&B.points.length>0&&B.points[0].id!==void 0).map(B=>{const de=B.points[0].id;if(de===void 0)throw new Error("Unexpected undefined id");return{stroke:B,nodeId:de}}).sort((B,de)=>B.nodeId-de.nodeId),je=he.length>0?he:f.filter(B=>n.has(B.id)&&B.type==="via"&&B.points.length>0&&B.points[0].id!==void 0).map(B=>{const de=B.points[0].id;if(de===void 0)throw new Error("Unexpected undefined id");return{stroke:B,nodeId:de}}).sort((B,de)=>B.nodeId-de.nodeId),be=je.length;if(be===0){console.warn("No vias or pads with Node IDs found in selection");return}const F=Math.floor(be/te);if(F===0){console.warn(`Not enough ${he.length>0?"pads":"vias"} (${be}) for ${te} components`);return}[...$].sort((B,de)=>B.id.localeCompare(de.id)).forEach((B,de)=>{const ke=de*F,De=ke+F,ze=je.slice(ke,De).map(Xe=>Xe.nodeId.toString()),tt=x0(B,ze,f);B.layer==="top"?E(Xe=>Xe.map(Tt=>{if(Tt.id===B.id){const jt={...Tt,pinCount:F,pinConnections:ze};return tt&&(jt.pinPolarities=tt),jt}return Tt})):C(Xe=>Xe.map(Tt=>{if(Tt.id===B.id){const jt={...Tt,pinCount:F,pinConnections:ze};return tt&&(jt.pinPolarities=tt),jt}return Tt}))});const M=he.length>0?"pads":"vias";console.log(`Connected ${te} components of type ${S.componentType} to ${be} ${M} (${F} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:$=>{$.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:$=>{$.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:S.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:S.color})]}),a.jsxs("div",{children:["Size: ",S.size]}),a.jsxs("div",{children:["Pin Count: ",S.pinCount]}),S.componentType==="Resistor"&&a.jsxs(a.Fragment,{children:[S.resistance&&a.jsxs("div",{children:["Resistance: ",S.resistance]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]}),S.tolerance&&a.jsxs("div",{children:["Tolerance: ",S.tolerance]})]}),S.componentType==="Capacitor"&&a.jsxs(a.Fragment,{children:[S.capacitance&&a.jsxs("div",{children:["Capacitance: ",S.capacitance]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.dielectric&&a.jsxs("div",{children:["Dielectric: ",S.dielectric]}),S.tolerance&&a.jsxs("div",{children:["Tolerance: ",S.tolerance]})]}),S.componentType==="Electrolytic Capacitor"&&a.jsxs(a.Fragment,{children:[S.capacitance&&a.jsxs("div",{children:["Capacitance: ",S.capacitance]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.tolerance&&a.jsxs("div",{children:["Tolerance: ",S.tolerance]}),S.polarized!==void 0&&a.jsxs("div",{children:["Polarized: ",S.polarized?"Yes":"No"]}),S.esr&&a.jsxs("div",{children:["ESR: ",S.esr]}),S.temperature&&a.jsxs("div",{children:["Temperature: ",S.temperature]})]}),S.pinConnections&&S.pinConnections.length>0&&(()=>{const $=S.componentType==="Electrolytic Capacitor"||S.componentType==="Diode"||S.componentType==="Battery",te=S.componentType==="Capacitor"&&"dielectric"in S&&S.dielectric==="Tantalum",he=$||te;return a.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[a.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),he&&a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),a.jsx("tbody",{children:S.pinConnections.map((je,be)=>{const F=S.pinPolarities&&S.pinPolarities.length>be?S.pinPolarities[be]:"";return a.jsxs("tr",{style:{backgroundColor:be%2===0?"#fff":"#f9f9f9"},children:[a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:be+1}),he&&a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:F==="+"?"#d32f2f":F==="-"?"#1976d2":"#999"},children:F||"-"}),a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:je||"(not connected)"})]},be)})})]})]})})(),"manufacturer"in S&&S.manufacturer&&a.jsxs("div",{children:["Manufacturer: ",S.manufacturer]}),"partNumber"in S&&S.partNumber&&a.jsxs("div",{children:["Part Number: ",S.partNumber]}),S.componentType==="Diode"&&a.jsxs(a.Fragment,{children:[S.diodeType&&a.jsxs("div",{children:["Type: ",S.diodeType]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]}),S.ledColor&&a.jsxs("div",{children:["LED Color: ",S.ledColor]})]}),S.componentType==="Battery"&&a.jsxs(a.Fragment,{children:[S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.capacity&&a.jsxs("div",{children:["Capacity: ",S.capacity]}),S.chemistry&&a.jsxs("div",{children:["Chemistry: ",S.chemistry]})]}),S.componentType==="Fuse"&&a.jsxs(a.Fragment,{children:[S.current&&a.jsxs("div",{children:["Current: ",S.current]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.fuseType&&a.jsxs("div",{children:["Type: ",S.fuseType]})]}),S.componentType==="FerriteBead"&&a.jsxs(a.Fragment,{children:[S.impedance&&a.jsxs("div",{children:["Impedance: ",S.impedance]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="Connector"&&a.jsxs(a.Fragment,{children:[S.connectorType&&a.jsxs("div",{children:["Type: ",S.connectorType]}),S.gender&&a.jsxs("div",{children:["Gender: ",S.gender]})]}),S.componentType==="Jumper"&&a.jsx(a.Fragment,{children:S.positions&&a.jsxs("div",{children:["Positions: ",S.positions]})}),S.componentType==="Relay"&&a.jsxs(a.Fragment,{children:[S.coilVoltage&&a.jsxs("div",{children:["Coil Voltage: ",S.coilVoltage]}),S.contactType&&a.jsxs("div",{children:["Contact Type: ",S.contactType]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="Inductor"&&a.jsxs(a.Fragment,{children:[S.inductance&&a.jsxs("div",{children:["Inductance: ",S.inductance]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]}),S.resistance&&a.jsxs("div",{children:["DC Resistance: ",S.resistance]})]}),S.componentType==="Speaker"&&a.jsxs(a.Fragment,{children:[S.impedance&&a.jsxs("div",{children:["Impedance: ",S.impedance]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]})]}),S.componentType==="Motor"&&a.jsxs(a.Fragment,{children:[S.motorType&&a.jsxs("div",{children:["Type: ",S.motorType]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="PowerSupply"&&a.jsxs(a.Fragment,{children:[S.inputVoltage&&a.jsxs("div",{children:["Input Voltage: ",S.inputVoltage]}),S.outputVoltage&&a.jsxs("div",{children:["Output Voltage: ",S.outputVoltage]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="Transistor"&&a.jsxs(a.Fragment,{children:[S.transistorType&&a.jsxs("div",{children:["Type: ",S.transistorType]}),S.polarized!==void 0&&a.jsxs("div",{children:["Polarized: ",S.polarized?"Yes":"No"]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="ResistorNetwork"&&a.jsxs(a.Fragment,{children:[S.resistance&&a.jsxs("div",{children:["Resistance: ",S.resistance]}),S.configuration&&a.jsxs("div",{children:["Configuration: ",S.configuration]})]}),S.componentType==="Thermistor"&&a.jsxs(a.Fragment,{children:[S.resistance&&a.jsxs("div",{children:["Resistance: ",S.resistance]}),S.thermistorType&&a.jsxs("div",{children:["Type: ",S.thermistorType]}),S.beta&&a.jsxs("div",{children:["Beta: ",S.beta]})]}),S.componentType==="Switch"&&a.jsxs(a.Fragment,{children:[S.switchType&&a.jsxs("div",{children:["Type: ",S.switchType]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]})]}),S.componentType==="Transformer"&&a.jsxs(a.Fragment,{children:[S.primaryVoltage&&a.jsxs("div",{children:["Primary Voltage: ",S.primaryVoltage]}),S.secondaryVoltage&&a.jsxs("div",{children:["Secondary Voltage: ",S.secondaryVoltage]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]}),S.turns&&a.jsxs("div",{children:["Turns Ratio: ",S.turns]})]}),S.componentType==="TestPoint"&&a.jsx(a.Fragment,{children:S.signal&&a.jsxs("div",{children:["Signal: ",S.signal]})}),S.componentType==="IntegratedCircuit"&&a.jsx(a.Fragment,{children:S.datasheet&&a.jsxs("div",{children:["Datasheet: ",a.jsx("a",{href:S.datasheet,target:"_blank",rel:"noopener noreferrer",children:S.datasheet})]})}),S.componentType==="VacuumTube"&&a.jsx(a.Fragment,{children:S.tubeType&&a.jsxs("div",{children:["Type: ",S.tubeType]})}),S.componentType==="VariableResistor"&&a.jsxs(a.Fragment,{children:[S.vrType&&a.jsxs("div",{children:["Type: ",S.vrType]}),S.resistance&&a.jsxs("div",{children:["Resistance: ",S.resistance]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]}),S.taper&&a.jsxs("div",{children:["Taper: ",S.taper]})]}),S.componentType==="Crystal"&&a.jsxs(a.Fragment,{children:[S.frequency&&a.jsxs("div",{children:["Frequency: ",S.frequency]}),S.loadCapacitance&&a.jsxs("div",{children:["Load Capacitance: ",S.loadCapacitance]}),S.tolerance&&a.jsxs("div",{children:["Tolerance: ",S.tolerance]})]}),S.componentType==="GenericComponent"&&a.jsxs(a.Fragment,{children:[S.genericType&&a.jsxs("div",{children:["Type: ",S.genericType]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage," ",S.voltageUnit||"V"]}),S.current&&a.jsxs("div",{children:["Current: ",S.current," ",S.currentUnit||"A"]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]}),S.frequency&&a.jsxs("div",{children:["Frequency: ",S.frequency]}),S.model&&a.jsxs("div",{children:["Model: ",S.model]})]}),a.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:a.jsxs("div",{children:["Position: x=",S.x.toFixed(2),", y=",S.y.toFixed(2)]})})]})]},S.id)})})(),n.size>0&&f.filter(k=>n.has(k.id)&&k.type==="via"&&k.points.length>0).map(k=>{const S=k.points[0],J=k.viaType||(S.id!==void 0?K(S.id,T):"Via");return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J})]}),ae&&a.jsx("button",{onClick:()=>{ae(k.id,S.x,S.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[S.id&&a.jsxs("div",{children:["Node ID: ",S.id]}),a.jsx("div",{children:"Layer: Top and Bottom"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Position: x=",S.x.toFixed(2),", y=",S.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:R,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),n.size>0&&f.filter(k=>n.has(k.id)&&k.type==="pad"&&k.points.length>0).map(k=>{const S=k.points[0],J=k.padType||(S.id!==void 0?O(S.id,T):"Pad");return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J})]}),ae&&a.jsx("button",{onClick:()=>{ae(k.id,S.x,S.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[S.id&&a.jsxs("div",{children:["Node ID: ",S.id]}),a.jsxs("div",{children:["Layer: ",k.layer]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Position: x=",S.x.toFixed(2),", y=",S.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:R,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),n.size>0&&f.filter(k=>n.has(k.id)&&k.type==="testPoint"&&k.points.length>0).map(k=>{const S=k.points[0],J=S.id!==void 0?z(S.id,T):"Test Point";return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J})]}),ae&&a.jsx("button",{onClick:()=>{ae(k.id,S.x,S.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[S.id&&a.jsxs("div",{children:["Node ID: ",S.id]}),a.jsxs("div",{children:["Layer: ",k.layer]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Position: x=",S.x.toFixed(2),", y=",S.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:R,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),n.size>0&&f.filter(k=>n.has(k.id)&&k.type==="trace").map(k=>{const S=k.points.length>0?k.points.reduce((ie,ge)=>ie+ge.x,0)/k.points.length:0,J=k.points.length>0?k.points.reduce((ie,ge)=>ie+ge.y,0)/k.points.length:0;return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k.type||"unknown"})]}),ae&&k.points.length>0&&a.jsx("button",{onClick:()=>{ae(k.id,S,J)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ie=>{ie.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ie=>{ie.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[k.points.length>0&&a.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[a.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",k.points.length]}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),a.jsx("tbody",{children:k.points.map((ie,ge)=>a.jsxs("tr",{style:{backgroundColor:ge%2===0?"#fff":"#f9f9f9"},children:[a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ge}),a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ie.x.toFixed(2)}),a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ie.y.toFixed(2)}),a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ie.id||"(none)"})]},ge))})]})]}),a.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",k.layer]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:R,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),s.size>0&&b.filter(k=>s.has(k.id)).map(k=>{const S=T.find(J=>J.id===k.powerBusId);return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k.type||(S?`${S.name} Power Node`:"Power Node")})]}),ce&&a.jsx("button",{onClick:()=>{ce(k.id,k.x,k.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[a.jsxs("div",{children:["Node ID: ",k.pointId||"(not assigned)"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Layer: ",k.layer]}),a.jsxs("div",{children:["Power Bus: ",S?.name||k.powerBusId||"(unknown)"]}),a.jsxs("div",{children:["Position: x=",k.x.toFixed(2),", y=",k.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:R,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),u.size>0&&x.filter(k=>u.has(k.id)).map(k=>a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k.type||"Ground Node"})]}),H&&a.jsx("button",{onClick:()=>{H(k.id,k.x,k.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:S=>{S.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[a.jsxs("div",{children:["Node ID: ",k.pointId||"(not assigned)"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Position: x=",k.x.toFixed(2),", y=",k.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:R,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id))]})})]})},jo=200,mv=({visible:r,selectedIds:n,selectedComponentIds:o,selectedPowerIds:s,selectedGroundIds:u,drawingStrokes:f,componentsTop:v,componentsBottom:h,powers:b,grounds:x,powerBuses:T,onClose:D,setComponentsTop:E,setComponentsBottom:C,setDrawingStrokes:K,setPowerSymbols:O,setGroundSymbols:z,determineViaType:V,determinePadType:ae,determineTestPointType:ce,position:H,isDragging:se,onDragStart:Q})=>{const[N,R]=I.useState(new Map),W=I.useRef(""),X=()=>[...Array.from(n).sort(),...Array.from(o).sort(),...Array.from(s).sort(),...Array.from(u).sort()].join(",");if(I.useEffect(()=>{if(!r)return;const be=X();be!==W.current&&(W.current=be,R(F=>{const A=new Map;return[...v,...h].filter(M=>o.has(M.id)).forEach(M=>{const B=F.get(M.id);A.set(M.id,B!==void 0?B:M.notes||"")}),f.filter(M=>n.has(M.id)).forEach(M=>{const B=F.get(M.id);A.set(M.id,B!==void 0?B:M.notes||"")}),b.filter(M=>s.has(M.id)).forEach(M=>{const B=F.get(M.id);A.set(M.id,B!==void 0?B:M.notes||"")}),x.filter(M=>u.has(M.id)).forEach(M=>{const B=F.get(M.id);A.set(M.id,B!==void 0?B:M.notes||"")}),A}))},[r,n,o,s,u,f,v,h,b,x]),!r)return null;const k=H?{position:"fixed",left:`${H.x}px`,top:`${H.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:se?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},S={padding:"20px",overflow:"auto",flex:1},J=f.filter(be=>n.has(be.id)).length,ie=[...v,...h].filter(be=>o.has(be.id)).length,ge=b.filter(be=>s.has(be.id)).length,$=x.filter(be=>u.has(be.id)).length,te=J+ie+ge+$,he=(be,F)=>{const A=F.length>jo?F.substring(0,jo):F;R(M=>{const B=new Map(M);return B.set(be,A),B})},je=()=>{E(be=>be.map(F=>{if(o.has(F.id)&&N.has(F.id)){const A=N.get(F.id)||"";return{...F,notes:A.trim()===""?void 0:A.trim()}}return F})),C(be=>be.map(F=>{if(o.has(F.id)&&N.has(F.id)){const A=N.get(F.id)||"";return{...F,notes:A.trim()===""?void 0:A.trim()}}return F})),K(be=>be.map(F=>{if(n.has(F.id)&&N.has(F.id)){const A=N.get(F.id)||"";return{...F,notes:A.trim()===""?null:A.trim()}}return F})),O(be=>be.map(F=>{if(s.has(F.id)&&N.has(F.id)){const A=N.get(F.id)||"";return{...F,notes:A.trim()===""?null:A.trim()}}return F})),z(be=>be.map(F=>{if(u.has(F.id)&&N.has(F.id)){const A=N.get(F.id)||"";return{...F,notes:A.trim()===""?null:A.trim()}}return F}))};return a.jsxs("div",{style:k,children:[a.jsxs("div",{onMouseDown:be=>{const F=be.target;F.tagName==="BUTTON"||F.closest("button")||H&&Q(be)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:se?"grabbing":H?"grab":"default",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (N)"}),a.jsx("button",{onClick:D,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:S,children:a.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[a.jsx("div",{style:{padding:"12px 16px",backgroundColor:te>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:te>0?"#333":"#856404",marginBottom:"8px"},children:te>0?`${te} Object${te!==1?"s":""} Selected`:"Zero Objects Selected"}),te===0?a.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):a.jsxs(a.Fragment,{children:[[...v,...h].filter(be=>o.has(be.id)).map(be=>{const F=N.get(be.id)||"",A=F.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsxs("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:[rl(be.componentType),be.designator&&be.designator.trim()?` (${be.designator.trim()})`:""]})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("textarea",{value:F,onChange:M=>he(be.id,M.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:A>=jo?"#d32f2f":"#666",textAlign:"right"},children:[A," / ",jo]})]})]},be.id)}),f.filter(be=>n.has(be.id)&&be.type==="via"&&be.points.length>0).map(be=>{const F=be.points[0],A=be.viaType||(F.id!==void 0?V(F.id,T):"Via"),M=N.get(be.id)||"",B=M.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:F.id&&a.jsxs("div",{children:["Node ID: ",F.id]})}),a.jsx("textarea",{value:M,onChange:de=>he(be.id,de.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:B>=jo?"#d32f2f":"#666",textAlign:"right"},children:[B," / ",jo]})]})]},be.id)}),f.filter(be=>n.has(be.id)&&be.type==="pad"&&be.points.length>0).map(be=>{const F=be.points[0],A=be.padType||(F.id!==void 0?ae(F.id,T):"Pad"),M=N.get(be.id)||"",B=M.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:F.id&&a.jsxs("div",{children:["Node ID: ",F.id]})}),a.jsx("textarea",{value:M,onChange:de=>he(be.id,de.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:B>=jo?"#d32f2f":"#666",textAlign:"right"},children:[B," / ",jo]})]})]},be.id)}),f.filter(be=>n.has(be.id)&&be.type==="testPoint"&&be.points.length>0).map(be=>{const F=be.points[0],A=F.id!==void 0?ce(F.id,T):"Test Point",M=N.get(be.id)||"",B=M.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:F.id&&a.jsxs("div",{children:["Node ID: ",F.id]})}),a.jsx("textarea",{value:M,onChange:de=>he(be.id,de.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:B>=jo?"#d32f2f":"#666",textAlign:"right"},children:[B," / ",jo]})]})]},be.id)}),f.filter(be=>n.has(be.id)&&be.type==="trace").map(be=>{const F=N.get(be.id)||"",A=F.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:be.type||"unknown"})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("textarea",{value:F,onChange:M=>he(be.id,M.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:A>=jo?"#d32f2f":"#666",textAlign:"right"},children:[A," / ",jo]})]})]},be.id)}),b.filter(be=>s.has(be.id)).map(be=>{const F=T.find(de=>de.id===be.powerBusId),A=be.type||(F?`${F.name} Power Node`:"Power Node"),M=N.get(be.id)||"",B=M.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:a.jsxs("div",{children:["Node ID: ",be.pointId||"(not assigned)"]})}),a.jsx("textarea",{value:M,onChange:de=>he(be.id,de.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:B>=jo?"#d32f2f":"#666",textAlign:"right"},children:[B," / ",jo]})]})]},be.id)}),x.filter(be=>u.has(be.id)).map(be=>{const F=be.type||"Ground Node",A=N.get(be.id)||"",M=A.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:F})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:a.jsxs("div",{children:["Node ID: ",be.pointId||"(not assigned)"]})}),a.jsx("textarea",{value:A,onChange:B=>he(be.id,B.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:jo,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:M>=jo?"#d32f2f":"#666",textAlign:"right"},children:[M," / ",jo]})]})]},be.id)}),a.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[a.jsx("button",{onClick:D,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:be=>{be.currentTarget.style.backgroundColor="#616161"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor="#757575"},children:"Close"}),a.jsx("button",{onClick:je,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:be=>{be.currentTarget.style.backgroundColor="#1976D2"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor="#2196F3"},children:"Save"})]})]})]})})]})},xv=({visible:r,projectNotes:n,setProjectNotes:o,onClose:s,position:u,isDragging:f,onDragStart:v})=>{const[h,b]=I.useState([]),[x,T]=I.useState(null),[D,E]=I.useState(null),C=I.useRef(new Map),[K,O]=I.useState({width:Math.min(window.innerWidth*.85,1400),height:window.innerHeight*.7}),[z,V]=I.useState(!1),[ae,ce]=I.useState({x:0,y:0,width:0,height:0});I.useEffect(()=>{r&&(b([...n]),T(null),E(null))},[r,n]),I.useEffect(()=>{if(!z)return;const ge=te=>{const he=te.clientX-ae.x,je=te.clientY-ae.y,be=Math.max(400,Math.min(window.innerWidth-20,ae.width+he)),F=Math.max(300,Math.min(window.innerHeight-20,ae.height+je));O({width:be,height:F})},$=()=>{V(!1)};return document.addEventListener("mousemove",ge),document.addEventListener("mouseup",$),()=>{document.removeEventListener("mousemove",ge),document.removeEventListener("mouseup",$)}},[z,ae]);const H=ge=>{ge.preventDefault(),ge.stopPropagation(),V(!0),ce({x:ge.clientX,y:ge.clientY,width:K.width,height:K.height})};if(!r)return null;const se=()=>{const ge={name:"",value:"",checked:!1};b([...h,ge]),T(h.length),E("name")},Q=ge=>{const $=h.filter((te,he)=>he!==ge);b($),x===ge?(T(null),E(null)):x!==null&&x>ge&&T(x-1)},N=()=>{const ge=h.filter($=>$.name.trim()!==""||$.value.trim()!=="");o(ge),s()},R=()=>{b([...n]),T(null),E(null),s()},W=(ge,$,te)=>{const he=[...h];he[ge]={...he[ge],[$]:te},b(he)},X=(ge,$)=>{const te=[...h];te[ge]={...te[ge],checked:$},b(te)},k=(ge,$,te)=>{ge.stopPropagation();const he=ge.currentTarget,je=he.selectionStart,be=he.value.length,F=he.selectionStart!==he.selectionEnd;if(!(ge.key==="Enter"&&ge.altKey)){if(ge.key==="ArrowRight"&&!ge.ctrlKey&&!ge.shiftKey&&!ge.altKey){if(je===be&&!F&&te==="name"){ge.preventDefault();const A=`${$}-value`,M=C.current.get(A);M&&(M.focus(),M.setSelectionRange(0,0))}return}if(ge.key==="ArrowLeft"&&!ge.ctrlKey&&!ge.shiftKey&&!ge.altKey){if(je===0&&!F&&te==="value"){ge.preventDefault();const A=`${$}-name`,M=C.current.get(A);M&&(M.focus(),M.setSelectionRange(M.value.length,M.value.length))}return}if(ge.key==="ArrowDown"&&!ge.ctrlKey&&!ge.shiftKey&&!ge.altKey){if(ge.preventDefault(),$<h.length-1){const A=`${$+1}-${te}`,M=C.current.get(A);if(M){M.focus();const B=Math.min(je,M.value.length);M.setSelectionRange(B,B)}}else{const A=h.length;se(),setTimeout(()=>{const M=`${A}-${te}`,B=C.current.get(M);B&&(B.focus(),B.setSelectionRange(0,0))},0)}return}if(ge.key==="ArrowUp"&&!ge.ctrlKey&&!ge.shiftKey&&!ge.altKey){if(ge.preventDefault(),$>0){const A=`${$-1}-${te}`,M=C.current.get(A);if(M){M.focus();const B=Math.min(je,M.value.length);M.setSelectionRange(B,B)}}return}if(ge.key==="Enter"&&!ge.altKey&&!ge.shiftKey){if(ge.preventDefault(),te==="name"){const A=`${$}-value`,M=C.current.get(A);M&&(M.focus(),M.setSelectionRange(0,0))}else if(te==="value")if($<h.length-1){const A=`${$+1}-name`,M=C.current.get(A);M&&(M.focus(),M.setSelectionRange(0,0))}else{const A=h.length;se(),setTimeout(()=>{const M=`${A}-name`,B=C.current.get(M);B&&(B.focus(),B.setSelectionRange(0,0))},0)}return}if(ge.key==="Tab"&&!ge.shiftKey){if(ge.preventDefault(),te==="name"){const A=`${$}-value`,M=C.current.get(A);M&&(M.focus(),M.select())}else if(te==="value")if($<h.length-1){const A=`${$+1}-name`,M=C.current.get(A);M&&(M.focus(),M.select())}else{const A=h.length;se(),setTimeout(()=>{const M=`${A}-name`,B=C.current.get(M);B&&B.focus()},0)}return}if(ge.key==="Tab"&&ge.shiftKey){if(ge.preventDefault(),te==="value"){const A=`${$}-name`,M=C.current.get(A);M&&(M.focus(),M.select())}else if(te==="name"&&$>0){const A=`${$-1}-value`,M=C.current.get(A);M&&(M.focus(),M.select())}return}}},S=(ge,$)=>{T(ge),E($)},J=()=>{},ie={position:"fixed",top:u?.y??100,left:u?.x??(window.innerWidth-K.width)/2,width:`${K.width}px`,height:`${K.height}px`,backgroundColor:"#fff",borderRadius:8,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:f?"grabbing":"default",overflow:"hidden"};return a.jsxs("div",{style:ie,children:[a.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e0e0e0",background:"#888",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none"},onMouseDown:v,children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Project Notes / TODO List (L)"}),a.jsx("button",{onClick:R,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),a.jsxs("div",{className:"project-notes-content",style:{padding:0,flex:1,overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",minHeight:0,scrollbarWidth:"thin",scrollbarColor:"#888 #f0f0f0"},children:[a.jsxs("div",{style:{border:"none",borderTop:"1px solid #ccc",borderRadius:0,overflow:"visible",marginBottom:"16px",backgroundColor:"#e0e0e0",flexShrink:0},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",backgroundColor:"#e0e0e0",borderBottom:"1px solid #ccc",position:"sticky",top:0,zIndex:10},children:[a.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:a.jsx("label",{className:"radio-label",style:{margin:0,cursor:"default"},children:a.jsx("input",{type:"checkbox",disabled:!0,style:{opacity:.5}})})}),a.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Item"}),a.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Notes"}),a.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",color:"#000"}})]}),a.jsx("div",{children:h.length===0?a.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:'No notes. Click "Add Note" to create one.'}):h.map((ge,$)=>a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",borderBottom:"1px solid #ccc",backgroundColor:"#fff"},children:[a.jsx("div",{style:{padding:"8px 12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("label",{className:"radio-label",style:{margin:0,cursor:"pointer"},children:a.jsx("input",{type:"checkbox",checked:ge.checked||!1,onChange:te=>X($,te.target.checked)})})}),a.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:a.jsx("textarea",{ref:te=>{te?C.current.set(`${$}-name`,te):C.current.delete(`${$}-name`)},value:ge.name,onChange:te=>W($,"name",te.target.value),onFocus:()=>S($,"name"),onBlur:J,onKeyDown:te=>k(te,$,"name"),placeholder:"Item name...",rows:1,style:{width:"100%",padding:"4px 6px",border:x===$&&D==="name"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:te=>{const he=te.target;he.style.height="auto",he.style.height=`${he.scrollHeight}px`}})}),a.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:a.jsx("textarea",{ref:te=>{te?C.current.set(`${$}-value`,te):C.current.delete(`${$}-value`)},value:ge.value,onChange:te=>W($,"value",te.target.value),onFocus:()=>S($,"value"),onBlur:J,onKeyDown:te=>k(te,$,"value"),placeholder:"Notes...",rows:1,style:{width:"100%",padding:"4px 6px",border:x===$&&D==="value"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:te=>{const he=te.target;he.style.height="auto",he.style.height=`${he.scrollHeight}px`}})}),a.jsx("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("button",{onClick:()=>Q($),style:{background:"#f44336",color:"#fff",border:"none",borderRadius:3,padding:"4px 8px",cursor:"pointer",fontSize:"11px"},title:"Delete note",children:"Delete"})})]},$))})]}),a.jsx("div",{style:{padding:"16px",flexShrink:0},children:a.jsx("button",{onClick:se,style:{background:"#888",color:"#fff",border:"none",borderRadius:4,padding:"8px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500,alignSelf:"flex-start"},children:"+ Add Note"})})]}),a.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px",flexShrink:0},children:[a.jsx("button",{onClick:R,style:{background:"#f5f5f5",color:"#000",border:"1px solid #ddd",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),a.jsx("button",{onClick:N,style:{background:"#0b5fff",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500},children:"Save"})]}),a.jsx("div",{onMouseDown:H,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:10001},title:"Drag to resize"})]})},bv=({visible:r,dimensions:n,onSave:o,onClose:s})=>{const[u,f]=I.useState(""),[v,h]=I.useState(""),[b,x]=I.useState("inches");I.useEffect(()=>{r&&n?(f(n.width.toString()),h(n.height.toString()),x(n.unit)):r&&(f(""),h(""),x("inches"))},[r,n]);const T=()=>{const E=parseFloat(u),C=parseFloat(v);if(isNaN(E)||E<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(C)||C<=0){alert("Please enter a valid height greater than 0");return}o({width:E,height:C,unit:b}),s()},D=()=>{s()};return r?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:E=>{E.target===E.currentTarget&&D()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:E=>E.stopPropagation(),children:[a.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"number",step:"0.001",min:"0.001",value:u,onChange:E=>f(E.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),a.jsxs("select",{value:b,onChange:E=>x(E.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[a.jsx("option",{value:"inches",children:"inches"}),a.jsx("option",{value:"mm",children:"mm"})]})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"number",step:"0.001",min:"0.001",value:v,onChange:E=>h(E.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),a.jsxs("select",{value:b,onChange:E=>x(E.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[a.jsx("option",{value:"inches",children:"inches"}),a.jsx("option",{value:"mm",children:"mm"})]})]})]}),a.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[a.jsx("button",{onClick:D,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),a.jsx("button",{onClick:T,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},vv=({visible:r,onClose:n,topImage:o,bottomImage:s,selectedImageForTransform:u,setSelectedImageForTransform:f,transformMode:v,setTransformMode:h,updateImageTransform:b,resetImageTransform:x,setCurrentTool:T,isGrayscale:D,setIsGrayscale:E,areImagesLocked:C})=>{const[K,O]=I.useState(null),[z,V]=I.useState(!1),ae=I.useRef({x:0,y:0}),ce=I.useRef(null);I.useEffect(()=>{r&&K===null&&O({x:window.innerWidth-320-20,y:80})},[r,K]),I.useEffect(()=>{r||O(null)},[r]);const H=I.useCallback(B=>{if(ce.current){const de=ce.current.getBoundingClientRect();ae.current={x:B.clientX-de.left,y:B.clientY-de.top},V(!0)}},[]);if(I.useEffect(()=>{if(!z)return;const B=ke=>{const De=ke.clientX-ae.current.x,Ge=ke.clientY-ae.current.y,ze=ce.current?.offsetWidth||320,tt=ce.current?.offsetHeight||600,Xe=Math.max(0,Math.min(De,window.innerWidth-ze)),Tt=Math.max(0,Math.min(Ge,window.innerHeight-tt));O({x:Xe,y:Tt})},de=()=>{V(!1)};return document.addEventListener("mousemove",B),document.addEventListener("mouseup",de),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",de)}},[z]),!r)return null;const se=o!==null,Q=s!==null,N=se||Q,R=se&&Q,W=u||(se?"top":Q?"bottom":null),X=()=>W==="top"&&o?o.brightness??100:W==="bottom"&&s?s.brightness??100:W==="both"&&o?o.brightness??100:100,k=()=>W==="top"&&o?o.contrast??100:W==="bottom"&&s?s.contrast??100:W==="both"&&o?o.contrast??100:100,S=X(),J=k(),ie=!N||C,ge=()=>{if(!(!W||ie))if(W==="both"){const B=!o?.flipX;b("both",{flipX:B})}else{const B=W==="top"?o?.flipX||!1:s?.flipX||!1;b(W,{flipX:!B})}},$=()=>{if(!(!W||ie))if(W==="both"){const B=!o?.flipY;b("both",{flipY:B})}else{const B=W==="top"?o?.flipY||!1:s?.flipY||!1;b(W,{flipY:!B})}},te=B=>{ie||(W&&f(W),h(B),T("transform"))},he=B=>{!W||ie||b(W,{brightness:B})},je=B=>{!W||ie||b(W,{contrast:B})},be=()=>{ie||(W&&f(W),T("transform"),E(!D))},F=()=>{ie||(T("transform"),x())},A=(B,de=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:B?"#666":"#f2f2f2",background:de?"#3a3a42":"transparent",border:"none",borderRadius:4,cursor:B?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"}),M=(B,de)=>({display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",color:B?"#666":"#f2f2f2",cursor:B?"not-allowed":"pointer",fontSize:"13px",background:de?"#3a3a42":"transparent",borderRadius:4,transition:"background 0.15s"});return a.jsxs("div",{ref:ce,style:{position:"fixed",top:K?.y??80,left:K?.x??window.innerWidth-340,backgroundColor:"#2b2b31",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24",zIndex:10001},children:[a.jsxs("div",{onMouseDown:H,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(to bottom, #3a3a42, #2b2b31)",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottom:"1px solid #1f1f24",cursor:z?"grabbing":"grab",userSelect:"none"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{style:{color:"#888",fontSize:"14px"},children:""}),a.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#f2f2f2"},children:"Transform Images"})]}),a.jsx("button",{onClick:n,style:{background:"transparent",border:"none",color:"#888",fontSize:"16px",cursor:"pointer",padding:"2px 6px",lineHeight:1,borderRadius:4},onMouseEnter:B=>{B.currentTarget.style.background="#444",B.currentTarget.style.color="#fff"},onMouseLeave:B=>{B.currentTarget.style.background="transparent",B.currentTarget.style.color="#888"},children:""})]}),a.jsxs("div",{style:{padding:"16px"},children:[a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"Apply to:"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[a.jsxs("label",{style:M(!se,W==="top"),children:[a.jsx("input",{type:"radio",name:"imageSelection",checked:W==="top",onChange:()=>f("top"),disabled:!se,style:{accentColor:"#6b9fff"}}),"Top Image",!se&&a.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),a.jsxs("label",{style:M(!Q,W==="bottom"),children:[a.jsx("input",{type:"radio",name:"imageSelection",checked:W==="bottom",onChange:()=>f("bottom"),disabled:!Q,style:{accentColor:"#6b9fff"}}),"Bottom Image",!Q&&a.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),a.jsxs("label",{style:M(!R,W==="both"),children:[a.jsx("input",{type:"radio",name:"imageSelection",checked:W==="both",onChange:()=>f("both"),disabled:!R,style:{accentColor:"#6b9fff"}}),"Both Images",!R&&a.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(need both)"})]})]})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("button",{onClick:ge,disabled:ie,style:A(ie),onMouseEnter:B=>!ie&&(B.currentTarget.style.background="#3a3a42"),onMouseLeave:B=>B.currentTarget.style.background="transparent",children:"Horizontal Flip"}),a.jsx("button",{onClick:$,disabled:ie,style:A(ie),onMouseEnter:B=>!ie&&(B.currentTarget.style.background="#3a3a42"),onMouseLeave:B=>B.currentTarget.style.background="transparent",children:"Vertical Flip"})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsx("div",{style:{marginBottom:"12px"},children:["nudge","scale","rotate","slant","keystone"].map(B=>a.jsxs("button",{onClick:()=>te(B),disabled:ie,style:A(ie,v===B),onMouseEnter:de=>!ie&&v!==B&&(de.currentTarget.style.background="#3a3a42"),onMouseLeave:de=>v!==B&&(de.currentTarget.style.background="transparent"),children:[v===B?" ":"","Mode: ",B.charAt(0).toUpperCase()+B.slice(1)]},B))}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[a.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Brightness"}),a.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[S,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:S,onChange:B=>he(parseInt(B.target.value,10)),disabled:ie,style:{width:"100%",cursor:ie?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[a.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Contrast"}),a.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[J,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:J,onChange:B=>je(parseInt(B.target.value,10)),disabled:ie,style:{width:"100%",cursor:ie?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsx("div",{style:{marginBottom:"12px"},children:a.jsxs("button",{onClick:be,disabled:ie,style:A(ie,D),onMouseEnter:B=>!ie&&!D&&(B.currentTarget.style.background="#3a3a42"),onMouseLeave:B=>!D&&(B.currentTarget.style.background="transparent"),children:[D?" ":"","Grayscale Mode"]})}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:[a.jsx("button",{onClick:F,disabled:ie,style:{padding:"8px 16px",background:ie?"#444":"#555",color:ie?"#777":"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:ie?"not-allowed":"pointer",fontSize:"13px",fontWeight:500},children:"Reset Transform"}),a.jsx("button",{onClick:n,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:B=>B.currentTarget.style.background="#3a8ee6",onMouseLeave:B=>B.currentTarget.style.background="#4a9eff",children:"Close"})]}),C&&a.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",background:"#3d2b2b",border:"1px solid #5a3a3a",borderRadius:4,fontSize:"12px",color:"#e88"},children:" Images are locked. Unlock via Images  Lock Images to make changes."})]})]})},wv=({visible:r,onClose:n,topImage:o,bottomImage:s,setTopImage:u,setBottomImage:f,componentsTop:v,componentsBottom:h,setComponentsTop:b,setComponentsBottom:x,drawingStrokes:T,setDrawingStrokes:D,powerSymbols:E,groundSymbols:C,setPowerSymbols:K,setGroundSymbols:O,canvasRef:z,isBottomView:V,setIsBottomView:ae,originalTopFlipX:ce,setOriginalTopFlipX:H,originalBottomFlipX:se,setOriginalBottomFlipX:Q,originalTopFlipY:N,setOriginalTopFlipY:R,originalBottomFlipY:W,setOriginalBottomFlipY:X,cameraWorldCenter:k,setCameraWorldCenter:S,viewScale:J,viewRotation:ie,setViewRotation:ge,viewFlipX:$,setViewFlipX:te,contentBorder:he,setTransparency:je})=>{const[be,F]=I.useState(null),[A,M]=I.useState(!1),B=I.useRef({x:0,y:0}),de=I.useRef(null);I.useEffect(()=>{r&&be===null&&F({x:window.innerWidth-320-20,y:80})},[r,be]),I.useEffect(()=>{r||F(null)},[r]);const ke=I.useCallback(Xe=>{if(de.current){const Tt=de.current.getBoundingClientRect();B.current={x:Xe.clientX-Tt.left,y:Xe.clientY-Tt.top},M(!0)}},[]);I.useEffect(()=>{if(!A)return;const Xe=jt=>{const It=jt.clientX-B.current.x,pe=jt.clientY-B.current.y,Pt=de.current?.offsetWidth||320,gn=de.current?.offsetHeight||400,Qt=Math.max(0,Math.min(It,window.innerWidth-Pt)),ht=Math.max(0,Math.min(pe,window.innerHeight-gn));F({x:Qt,y:ht})},Tt=()=>{M(!1)};return document.addEventListener("mousemove",Xe),document.addEventListener("mouseup",Tt),()=>{document.removeEventListener("mousemove",Xe),document.removeEventListener("mouseup",Tt)}},[A]);const De=I.useCallback(()=>{V||(te(!0),ae(!0),je(100))},[V,te,ae,je]),Ge=I.useCallback(()=>{V&&(te(!1),ae(!1),je(0))},[V,te,ae,je]),ze=I.useCallback(Xe=>{ge(Tt=>y0(Tt,Xe))},[ge,y0]);if(!r)return null;const tt=(Xe=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:Xe?"#666":"#f2f2f2",background:"transparent",border:"none",borderRadius:4,cursor:Xe?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"});return a.jsxs("div",{ref:de,style:{position:"fixed",top:be?.y??80,left:be?.x??window.innerWidth-340,backgroundColor:"#2b2b31",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24",zIndex:10001},children:[a.jsxs("div",{onMouseDown:ke,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(to bottom, #3a3a42, #2b2b31)",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottom:"1px solid #1f1f24",cursor:A?"grabbing":"grab",userSelect:"none"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{style:{color:"#888",fontSize:"14px"},children:""}),a.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#f2f2f2"},children:"Change Perspective"})]}),a.jsx("button",{onClick:n,style:{background:"transparent",border:"none",color:"#888",fontSize:"16px",cursor:"pointer",padding:"2px 6px",lineHeight:1,borderRadius:4},onMouseEnter:Xe=>{Xe.currentTarget.style.background="#444",Xe.currentTarget.style.color="#fff"},onMouseLeave:Xe=>{Xe.currentTarget.style.background="transparent",Xe.currentTarget.style.color="#888"},children:""})]}),a.jsxs("div",{style:{padding:"16px"},children:[a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"View:"}),a.jsx("button",{onClick:V?Ge:De,style:tt(!1),onMouseEnter:Xe=>Xe.currentTarget.style.background="#3a3a42",onMouseLeave:Xe=>Xe.currentTarget.style.background="transparent",children:V?"Switch to Top View":"Switch to Bottom View"}),a.jsx("div",{style:{fontSize:"10px",color:"#666",marginTop:"6px",fontStyle:"italic"},children:"Shortcut: Shift-Left/Right Arrow Keys"})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"Rotate (clockwise):"}),a.jsx("button",{onClick:()=>ze(90),style:tt(),onMouseEnter:Xe=>Xe.currentTarget.style.background="#3a3a42",onMouseLeave:Xe=>Xe.currentTarget.style.background="transparent",children:"Rotate 90"}),a.jsx("button",{onClick:()=>ze(180),style:tt(),onMouseEnter:Xe=>Xe.currentTarget.style.background="#3a3a42",onMouseLeave:Xe=>Xe.currentTarget.style.background="transparent",children:"Rotate 180"}),a.jsx("button",{onClick:()=>ze(270),style:tt(),onMouseEnter:Xe=>Xe.currentTarget.style.background="#3a3a42",onMouseLeave:Xe=>Xe.currentTarget.style.background="transparent",children:"Rotate 270"}),a.jsx("div",{style:{fontSize:"10px",color:"#666",marginTop:"6px",fontStyle:"italic"},children:"Shortcut: Shift-Up/Down Arrow Keys"})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:a.jsx("button",{onClick:n,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:Xe=>Xe.currentTarget.style.background="#3a8ee6",onMouseLeave:Xe=>Xe.currentTarget.style.background="#4a9eff",children:"Close"})})]})]})},Sv=({component:r,componentEditor:n,componentDefinition:o,setComponentEditor:s,areComponentsLocked:u,componentsTop:f,componentsBottom:v,setComponentsTop:h,setComponentsBottom:b})=>{const T=(o||n?.componentDefinition||Vf(r))?.fields;if(T&&T.length>0){const D=(C,K,O)=>O?C==="capacitance"||C==="resistance"||C==="voltage"||C==="current"?"80px":C==="power"||C==="inductance"||C==="impedance"||C==="esr"||C==="ripple"||C==="leakageCurrent"?"70px":"80px":C==="tolerance"||C==="pinCount"?"60px":C==="partNumber"||C==="manufacturer"?"150px":C==="description"||C==="operatingTemperature"?"180px":K==="string"&&!C.includes("Unit")?"150px":"120px",E=C=>{const K=C.name,O=`${C.name}Unit`,z=n[K]??r[K]??C.defaultValue??"",V=n[O]??r[O]??(C.units&&C.defaultUnit?C.defaultUnit:""),ae=Q=>{s({...n,[K]:Q})},ce=Q=>{s({...n,[O]:Q})},H=!!(C.units&&C.units.length>0),se=D(C.name,C.type,H);return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[a.jsxs("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:[C.label,":"]}),C.type==="enum"?a.jsx("select",{value:z,onChange:Q=>ae(Q.target.value),disabled:u,style:{width:se,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:u?.6:1,marginRight:"8px"},children:(C.enumValues||[]).map(Q=>a.jsx("option",{value:Q,children:Q},Q))}):a.jsx("input",{type:"text",value:z,onChange:Q=>ae(Q.target.value),disabled:u,style:{width:se,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:u?.6:1,marginRight:H?"8px":"0"},placeholder:C.defaultValue!==void 0?String(C.defaultValue):""}),H&&C.units&&a.jsx("select",{value:V||C.defaultUnit||C.units[0],onChange:Q=>ce(Q.target.value),disabled:u,style:{width:"70px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:u?.6:1,flexShrink:0},children:C.units.map(Q=>a.jsx("option",{value:Q,children:Q},Q))})]},C.name)};return a.jsx(a.Fragment,{children:T.map(E)})}return a.jsx("div",{style:{padding:"8px",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:4,color:"#856404",marginBottom:"8px",fontSize:"12px"},children:"Component definition missing for this instance. Using legacy fields. Please ensure the component has a definition in componentDefinitions.json and a valid componentDefinitionKey."})},Cv=r=>{const n=tf[r];return!n||!n.prefix||n.prefix.length<1?"?":n.prefix[0].substring(0,1).toUpperCase()},Tv=({componentEditor:r,componentDefinition:n,setComponentEditor:o,componentsTop:s,componentsBottom:u,setComponentsTop:f,setComponentsBottom:v,connectingPin:h,setConnectingPin:b,componentDialogPosition:x,setComponentDialogPosition:T,isDraggingDialog:D,setIsDraggingDialog:E,dialogDragOffset:C,setDialogDragOffset:K,areComponentsLocked:O,setSelectedComponentIds:z,setNotesDialogVisible:V})=>{if(!r||!r.visible)return null;let ae=s.find(Q=>Q.id===r.id),ce="top";if(ae||(ae=u.find(Q=>Q.id===r.id),ce="bottom"),!ae)return null;r.layer!==ce&&o({...r,layer:ce});const H=Q=>{const N={...Q},R=r.designator?.trim()||"";N.designator=R,N.x=r.x,N.y=r.y,N.layer=r.layer,N.orientation=r.orientation??0;const W=R.length>0?R.charAt(0).toUpperCase():Cv(Q.componentType);if(N.abbreviation=W,"manufacturer"in N&&(N.manufacturer=r.manufacturer?.trim()||void 0),"partNumber"in N&&(N.partNumber=r.partNumber?.trim()||void 0),r.pinCount!==Q.pinCount){N.pinCount=r.pinCount;const X=Q.pinConnections||[];if(N.pinConnections=new Array(r.pinCount).fill("").map((k,S)=>S<X.length?X[S]:""),Q.pinPolarities){const k=Q.pinPolarities||[];N.pinPolarities=new Array(r.pinCount).fill("").map((S,J)=>J<k.length?k[J]:"")}}else N.pinConnections=Q.pinConnections||[],Q.pinPolarities&&(N.pinPolarities=Q.pinPolarities);return Q.componentType==="Resistor"?(N.resistance=r.resistance||void 0,N.resistanceUnit=r.resistanceUnit||void 0,N.power=r.power?`${r.power}W`:void 0,N.tolerance=r.tolerance||void 0):Q.componentType==="Capacitor"?(N.capacitance=r.capacitance||void 0,N.capacitanceUnit=r.capacitanceUnit||void 0,N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.tolerance=r.tolerance||void 0,N.dielectric=r.dielectric||void 0):Q.componentType==="Electrolytic Capacitor"?(N.capacitance=r.capacitance||void 0,N.capacitanceUnit=r.capacitanceUnit||void 0,N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.tolerance=r.tolerance||void 0,N.polarized=r.polarized!==void 0?r.polarized:void 0,N.esr=r.esr||void 0,N.esrUnit=r.esrUnit||void 0,N.temperature=r.temperature||void 0):Q.componentType==="Film Capacitor"?(N.capacitance=r.capacitance||void 0,N.capacitanceUnit=r.capacitanceUnit||void 0,N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.tolerance=r.tolerance||void 0,N.filmType=r.filmType||void 0):Q.componentType==="Diode"?(N.diodeType=r.diodeType||Q.diodeType||"Standard",N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0,N.ledColor=r.ledColor||void 0):Q.componentType==="Battery"?(N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.capacity=r.capacity||void 0,N.capacityUnit=r.capacityUnit||void 0,N.chemistry=r.chemistry||void 0):Q.componentType==="Fuse"?(N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0,N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.fuseType=r.fuseType||void 0):Q.componentType==="FerriteBead"?(N.impedance=r.impedance||void 0,N.impedanceUnit=r.impedanceUnit||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0):Q.componentType==="Connector"?(N.connectorType=r.connectorType||void 0,N.gender=r.gender||void 0):Q.componentType==="Jumper"?N.positions=r.positions||void 0:Q.componentType==="Relay"?(N.coilVoltage=r.coilVoltage||void 0,N.coilVoltageUnit=r.coilVoltageUnit||void 0,N.contactType=r.contactType||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0):Q.componentType==="Inductor"?(N.inductance=r.inductance||void 0,N.inductanceUnit=r.inductanceUnit||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0,N.resistance=r.resistance||void 0,N.resistanceUnit=r.resistanceUnit||void 0):Q.componentType==="Speaker"?(N.impedance=r.impedance||void 0,N.impedanceUnit=r.impedanceUnit||void 0,N.power=r.power?`${r.power}W`:void 0):Q.componentType==="Motor"?(N.motorType=r.motorType||void 0,N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0):Q.componentType==="PowerSupply"?(N.inputVoltage=r.inputVoltage||void 0,N.inputVoltageUnit=r.inputVoltageUnit||void 0,N.outputVoltage=r.outputVoltage||void 0,N.outputVoltageUnit=r.outputVoltageUnit||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0):Q.componentType==="Transistor"?(N.transistorType=r.transistorType||void 0,N.polarity=r.polarity||void 0,N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0):Q.componentType==="ResistorNetwork"?(N.resistance=r.resistance||void 0,N.resistanceUnit=r.resistanceUnit||void 0,N.configuration=r.configuration||void 0):Q.componentType==="Thermistor"?(N.resistance=r.resistance||void 0,N.resistanceUnit=r.resistanceUnit||void 0,N.thermistorType=r.thermistorType||void 0,N.beta=r.beta||void 0):Q.componentType==="Switch"?(N.switchType=r.switchType||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0,N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0):Q.componentType==="Transformer"?(N.primaryVoltage=r.primaryVoltage||void 0,N.primaryVoltageUnit=r.primaryVoltageUnit||void 0,N.secondaryVoltage=r.secondaryVoltage||void 0,N.secondaryVoltageUnit=r.secondaryVoltageUnit||void 0,N.power=r.power?`${r.power}W`:void 0,N.turns=r.turns||void 0):Q.componentType==="TestPoint"?N.signal=r.signal||void 0:Q.componentType==="Film Capacitor"?(N.capacitance=r.capacitance||void 0,N.capacitanceUnit=r.capacitanceUnit||void 0,N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.tolerance=r.tolerance||void 0,N.filmType=r.filmType||void 0):Q.componentType==="IntegratedCircuit"?(N.description=r.description?.trim()||void 0,N.datasheet=r.datasheet?.trim()||void 0,N.icType=r.icType||void 0):N.description=r.description?.trim()||void 0,Q.componentType==="VacuumTube"?N.tubeType=r.tubeType||void 0:Q.componentType==="VariableResistor"?(N.vrType=r.vrType||void 0,N.resistance=r.resistance||void 0,N.resistanceUnit=r.resistanceUnit||void 0,N.power=r.power?`${r.power}W`:void 0,N.taper=r.taper||void 0):Q.componentType==="Crystal"?(N.frequency=r.frequency||void 0,N.loadCapacitance=r.loadCapacitance||void 0,N.tolerance=r.tolerance||void 0):Q.componentType==="GenericComponent"&&(N.genericType=r.genericType||"Attenuator",N.voltage=r.voltage||void 0,N.voltageUnit=r.voltageUnit||void 0,N.current=r.current||void 0,N.currentUnit=r.currentUnit||void 0,N.power=r.power||void 0,N.frequency=r.frequency||void 0,N.model=r.model||void 0),N},se=()=>{if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const Q=s.find(W=>W.id===r.id),N=u.find(W=>W.id===r.id),R=Q||N;if(R){const W=H(R),X=R.layer,k=r.layer;X!==k?X==="top"?(f(S=>S.filter(J=>J.id!==r.id)),v(S=>[...S,W])):(v(S=>S.filter(J=>J.id!==r.id)),f(S=>[...S,W])):k==="top"?f(S=>S.map(J=>J.id===r.id?W:J)):v(S=>S.map(J=>J.id===r.id?W:J))}else if(console.warn(`Component ${r.id} not found in either layer array`),r.layer==="top"){const W=u.find(X=>X.id===r.id);if(W){const X=H(W);v(k=>k.filter(S=>S.id!==r.id)),f(k=>[...k,X])}}else{const W=s.find(X=>X.id===r.id);if(W){const X=H(W);f(k=>k.filter(S=>S.id!==r.id)),v(k=>[...k,X])}}o(null),b(null)};return a.jsxs("div",{"data-component-editor-dialog":!0,onClick:Q=>{if(h&&h.componentId===ae.id){const N=Q.target;(N.tagName==="BUTTON"||N.tagName==="INPUT"||N.closest("button")||N.closest("input"))&&Q.stopPropagation()}},style:{position:"fixed",top:x?`${x.y}px`:"90px",left:x?`${x.x}px`:`${window.innerWidth-280}px`,transform:"none",background:h&&h.componentId===ae.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"350px",width:"350px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:D?"grabbing":"default"},children:[a.jsxs("div",{onMouseDown:Q=>{const N=Q.target;N.tagName==="BUTTON"||N.tagName==="INPUT"||N.closest("button")||N.closest("input")||x&&(K({x:Q.clientX-x.x,y:Q.clientY-x.y}),E(!0),Q.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:D?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[a.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),a.jsx("button",{onClick:()=>{o(null),b(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[(()=>{const Q=n||Vf(ae);return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Category:"}),a.jsx("div",{style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#000"},children:Q?.category||"N/A"})]})})(),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Type:"}),a.jsx("div",{style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#000"},children:(()=>{const Q=n||Vf(ae);return Q?.displayName?ae.componentType==="Capacitor"&&!Q.displayName.toLowerCase().includes("capacitor")?`${Q.displayName} Capacitor`:Q.displayName:ae.componentType==="GenericComponent"&&ae.genericType?rl(ae.genericType):ae.componentType==="Diode"&&ae.diodeType&&ae.diodeType!=="Standard"?rl(ae.diodeType):ae.componentType==="VariableResistor"&&ae.vrType&&ae.vrType!=="Potentiometer"?rl(ae.vrType):ae.componentType==="Capacitor"&&ae.dielectric==="Tantalum"?"Tantalum Capacitor":ae.componentType==="Capacitor"&&ae.capacitorType==="Electrolytic"?"Electrolytic Capacitor":ae.componentType==="Capacitor"&&ae.capacitorType==="Film"?"Film Capacitor":rl(ae.componentType)})()})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-layer-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Layer:"}),a.jsxs("select",{id:`component-layer-${ae.id}`,name:`component-layer-${ae.id}`,value:r.layer,onChange:Q=>o({...r,layer:Q.target.value}),disabled:O,style:{width:"80px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1},children:[a.jsx("option",{value:"top",children:"Top"}),a.jsx("option",{value:"bottom",children:"Bottom"})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-orientation-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Orientation:"}),a.jsxs("select",{id:`component-orientation-${ae.id}`,name:`component-orientation-${ae.id}`,value:r.orientation??0,onChange:Q=>{const N=parseInt(Q.target.value)||0;if(o({...r,orientation:N}),!O){const W=(r.layer==="top"?s:u).find(X=>X.id===r.id);if(W){const X={...W,orientation:N};r.layer==="top"?f(k=>k.map(S=>S.id===r.id?X:S)):v(k=>k.map(S=>S.id===r.id?X:S))}}},disabled:O,style:{width:"70px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1},children:[a.jsx("option",{value:"0",children:"0"}),a.jsx("option",{value:"90",children:"90"}),a.jsx("option",{value:"180",children:"180"}),a.jsx("option",{value:"270",children:"270"})]})]}),a.jsx(Sv,{component:ae,componentEditor:r,componentDefinition:n,setComponentEditor:o,areComponentsLocked:O,componentsTop:s,componentsBottom:u,setComponentsTop:f,setComponentsBottom:v}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[a.jsx("label",{htmlFor:`component-designator-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Designator:"}),a.jsx("input",{id:`component-designator-${ae.id}`,name:`component-designator-${ae.id}`,type:"text",value:r.designator||"",onChange:Q=>{const N=Q.target.value,R=N.length>0?N.charAt(0).toUpperCase():r.abbreviation;o({...r,designator:N,abbreviation:R})},disabled:O,style:{width:"80px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",fontFamily:"monospace",textTransform:"uppercase",opacity:O?.6:1},placeholder:"e.g., U2, R7, C1"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-description-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Description:"}),a.jsx("input",{id:`component-description-${ae.id}`,name:`component-description-${ae.id}`,type:"text",value:r.description||"",onChange:Q=>{o({...r,description:Q.target.value})},disabled:O,style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1},placeholder:""})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-notes-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Notes:"}),a.jsx("input",{id:`component-notes-${ae.id}`,name:`component-notes-${ae.id}`,type:"text",readOnly:!0,value:ae.notes||"",onClick:()=>{O||(z(new Set([ae.id])),V(!0))},disabled:O,style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1,cursor:O?"not-allowed":"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Click to edit notes...",title:ae.notes||"Click to edit notes..."})]}),ae.componentType!=="IntegratedCircuit"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-pincount-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Pin Count:"}),a.jsx("input",{id:`component-pincount-${ae.id}`,name:`component-pincount-${ae.id}`,type:"number",min:"1",value:r.pinCount,onChange:Q=>{const N=Math.max(1,parseInt(Q.target.value)||1);o({...r,pinCount:N})},onBlur:Q=>{if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const N=Math.max(1,parseInt(Q.target.value)||1),W=(r.layer==="top"?s:u).find(X=>X.id===r.id);if(W&&N!==W.pinCount){const X=W.pinConnections||[],k=new Array(N).fill("").map((ge,$)=>$<X.length?X[$]:""),S=W.pinPolarities||[],J=W.pinPolarities?new Array(N).fill("").map((ge,$)=>$<S.length?S[$]:""):void 0,ie={...W,pinCount:N,pinConnections:k,...J!==void 0&&{pinPolarities:J}};r.layer==="top"?f(ge=>ge.map($=>$.id===r.id?ie:$)):v(ge=>ge.map($=>$.id===r.id?ie:$)),o({...r,pinCount:N})}},disabled:O,style:{width:"60px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-x-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"X:"}),a.jsx("input",{id:`component-x-${ae.id}`,name:`component-x-${ae.id}`,type:"number",value:r.x.toFixed(2),onChange:Q=>{const N=parseFloat(Q.target.value)||0;o({...r,x:N})},disabled:O,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-y-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Y:"}),a.jsx("input",{id:`component-y-${ae.id}`,name:`component-y-${ae.id}`,type:"number",value:r.y.toFixed(2),onChange:Q=>{const N=parseFloat(Q.target.value)||0;o({...r,y:N})},disabled:O,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-manufacturer-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Manufacturer:"}),a.jsx("input",{id:`component-manufacturer-${ae.id}`,name:`component-manufacturer-${ae.id}`,type:"text",value:r.manufacturer,onChange:Q=>o({...r,manufacturer:Q.target.value}),disabled:O,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-partnumber-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Part Number:"}),a.jsx("input",{id:`component-partnumber-${ae.id}`,name:`component-partnumber-${ae.id}`,type:"text",value:r.partNumber,onChange:Q=>o({...r,partNumber:Q.target.value}),disabled:O,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[a.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),h&&h.componentId===ae.id&&a.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",h.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const Q=ae.componentType==="Electrolytic Capacitor"||ae.componentType==="Diode"||ae.componentType==="Battery",N=ae.componentType==="Capacitor"&&"dielectric"in ae&&ae.dielectric==="Tantalum",R=Q||N;return a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[a.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),a.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),R&&a.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),a.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),a.jsx("tbody",{children:Array.from({length:r.pinCount},(W,X)=>{const S=(r.layer==="top"?s:u).find($=>$.id===r.id),J=S?.pinConnections&&S.pinConnections.length>X?S.pinConnections[X]:"",ie=S?.pinPolarities&&S.pinPolarities.length>X&&S.pinPolarities[X]||"",ge=h&&h.componentId===ae.id&&h.pinIndex===X;return a.jsxs("tr",{style:{cursor:O?"not-allowed":"pointer",background:ge?"#e6f0ff":J?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:$=>{if($.target.tagName!=="SELECT"){if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}b(ge?null:{componentId:ae.id,pinIndex:X})}},title:J?`Connected to: ${J}`:"Select this pin, then click on a via or pad to connect",children:[a.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:a.jsx("input",{id:`pin-radio-${ae.id}-${X}`,name:`pin-radio-${ae.id}`,type:"radio",checked:!!ge,onChange:()=>{if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}b(ge?null:{componentId:ae.id,pinIndex:X})},disabled:O,style:{margin:0,cursor:O?"not-allowed":"pointer",opacity:O?.6:1,width:"10px",height:"10px"}})}),a.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:ge?600:400,fontFamily:"monospace"},children:X+1}),R&&a.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:a.jsxs("select",{value:ie??"",onChange:$=>{if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const te=$.target.value,je=(r.layer==="top"?s:u).find(be=>be.id===r.id);if(je){const F=[...je.pinPolarities||new Array(je.pinCount).fill("")];for(;F.length<je.pinCount;)F.push("");F[X]=te;const A={...je,pinPolarities:F};r.layer==="top"?f(M=>M.map(B=>B.id===r.id?A:B)):v(M=>M.map(B=>B.id===r.id?A:B))}},disabled:O,onClick:$=>$.stopPropagation(),onFocus:$=>$.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:O?"not-allowed":"pointer",opacity:O?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[a.jsx("option",{value:"",children:"-"}),a.jsx("option",{value:"+",children:"+"}),a.jsx("option",{value:"-",children:"-"})]},`polarity-${ae.id}-${X}-${ie}`)}),a.jsx("td",{style:{padding:"2px 4px",color:J?"#28a745":"#999",fontWeight:J?600:400,fontFamily:"monospace"},children:J||"-"})]},X)})})]})})()]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[a.jsx("button",{onClick:()=>{o(null),b(null)},disabled:O,style:{padding:"2px 5px",background:O?"#f5f5f5":"#fff",color:O?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:O?"not-allowed":"pointer",fontSize:"10px",opacity:O?.6:1},children:"Cancel"}),a.jsx("button",{onClick:se,disabled:O,style:{padding:"2px 5px",background:O?"#f5f5f5":"#0b5fff",color:O?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:O?"not-allowed":"pointer",fontSize:"10px",opacity:O?.6:1},children:"Save"})]})]})},k2=r=>{const n={};Object.entries(tf).forEach(([o,s])=>{s.prefix.forEach(u=>{n[u]||(n[u]=o)})});for(const o of r)if(n[o]){const s=n[o];let u;return s==="Diode"?o==="LED"?u="LED":o==="IR"?u="Infrared":o==="PD"?u="Photodiode":o==="D"&&(u="Standard"):s==="VariableResistor"?o==="RV"?u="Varistor":o==="VR"&&(u="Potentiometer"):s==="GenericComponent"&&(o==="AT"?u="Attenuator":o==="CB"?u="CircuitBreaker":o==="TC"?u="Thermocouple":o==="TUN"&&(u="Tuner")),{componentType:s,designator:o,subtype:u}}return r.includes("CE")?{componentType:"Electrolytic Capacitor",designator:"CE"}:r.includes("CF")?{componentType:"Film Capacitor",designator:"CF"}:r.includes("TR")?{componentType:"Transformer",designator:"TR"}:r.includes("VR")?{componentType:"VariableResistor",designator:"VR",subtype:"Potentiometer"}:r.includes("AT")?{componentType:"GenericComponent",designator:"AT",subtype:"Attenuator"}:r.includes("CB")?{componentType:"GenericComponent",designator:"CB",subtype:"CircuitBreaker"}:r.includes("TC")?{componentType:"GenericComponent",designator:"TC",subtype:"Thermocouple"}:r.includes("TUN")?{componentType:"GenericComponent",designator:"TUN",subtype:"Tuner"}:r.includes("LED")?{componentType:"Diode",designator:"LED",subtype:"LED"}:r.includes("IR")?{componentType:"Diode",designator:"IR",subtype:"Infrared"}:r.includes("PD")?{componentType:"Diode",designator:"PD",subtype:"Photodiode"}:r.includes("RV")?{componentType:"VariableResistor",designator:"RV",subtype:"Varistor"}:r.includes("RN")?{componentType:"ResistorNetwork",designator:"RN"}:r.includes("RT")?{componentType:"Thermistor",designator:"RT"}:r.includes("PS")?{componentType:"PowerSupply",designator:"PS"}:r.includes("B")?{componentType:"Battery",designator:"B"}:r.includes("JP")?{componentType:"Jumper",designator:"JP"}:r.includes("TP")?{componentType:"TestPoint",designator:"TP"}:r.includes("FB")?{componentType:"FerriteBead",designator:"FB"}:r.includes("D")?{componentType:"Diode",designator:"D",subtype:"Standard"}:r.includes("C")?{componentType:"Capacitor",designator:"C"}:r.includes("R")?{componentType:"Resistor",designator:"R"}:r.includes("Q")?{componentType:"Transistor",designator:"Q"}:r.includes("U")?{componentType:"IntegratedCircuit",designator:"U"}:r.includes("J")?{componentType:"Connector",designator:"J"}:r.includes("S")?{componentType:"Switch",designator:"S"}:r.includes("Z")?{componentType:"Diode",designator:"Z",subtype:"Zener"}:r.includes("V")&&!r.includes("VR")?{componentType:"VacuumTube",designator:"V"}:r.includes("K")?{componentType:"Relay",designator:"K"}:r.includes("F")?{componentType:"Fuse",designator:"F"}:r.includes("L")?{componentType:"Inductor",designator:"L"}:r.includes("M")?{componentType:"Motor",designator:"M"}:r.includes("X")?{componentType:"Crystal",designator:"X"}:r.includes("LS")?{componentType:"Speaker",designator:"LS"}:null},jv=({visible:r,selectedLayer:n,selectedComponentType:o,selectedComponentKey:s,onLayerChange:u,onComponentTypeChange:f,onClose:v})=>{const[h,b]=I.useState(""),[x,T]=I.useState(null),[D,E]=I.useState(!1),C=I.useRef({x:0,y:0}),K=I.useRef(null);I.useEffect(()=>{r&&x===null&&T({x:window.innerWidth-400-20,y:80})},[r,x]),I.useEffect(()=>{r||T(null)},[r]);const O=I.useCallback(H=>{const se=H.target;if(!(se.tagName==="BUTTON"||se.tagName==="INPUT"||se.closest("button")||se.closest("input"))&&K.current){const Q=K.current.getBoundingClientRect();C.current={x:H.clientX-Q.left,y:H.clientY-Q.top},E(!0),H.preventDefault()}},[]);I.useEffect(()=>{if(!D)return;const H=Q=>{const N=Q.clientX-C.current.x,R=Q.clientY-C.current.y,W=K.current?.offsetWidth||400,X=K.current?.offsetHeight||600,k=Math.max(0,Math.min(N,window.innerWidth-W)),S=Math.max(0,Math.min(R,window.innerHeight-X));T({x:k,y:S})},se=()=>{E(!1)};return document.addEventListener("mousemove",H),document.addEventListener("mouseup",se),()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",se)}},[D]);const z=I.useMemo(()=>{if(!h.trim())return()=>!0;const H=h.toLowerCase();return se=>{if(se.type){const Q=rl(se.type).toLowerCase(),N=se.type.toLowerCase();if(Q.includes(H)||N.includes(H))return!0}return!!(se.subcategory&&se.subcategory.toLowerCase().includes(H)||se.designator&&se.designator.toLowerCase().includes(H)||se.designators&&se.designators.some(Q=>Q.toLowerCase().includes(H))||se.componentType&&se.componentType.toLowerCase().includes(H))}},[h]),V=I.useMemo(()=>h.trim()?Yh.filter(H=>{if(z({componentType:H.componentType,designators:H.designators}))return!0;const se=k2(H.designators);return se?z({type:se.componentType,designator:se.designator,subtype:se.subtype}):!1}):Yh,[h,z]);if(!r)return null;const ae={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",zIndex:10005,pointerEvents:"none"},ce={padding:"20px",overflow:"auto",flex:1};return a.jsx("div",{style:ae,onClick:H=>H.stopPropagation(),children:a.jsxs("div",{ref:K,onClick:H=>H.stopPropagation(),style:{position:"fixed",top:x?`${x.y}px`:void 0,left:x?`${x.x}px`:void 0,backgroundColor:"#fff",borderRadius:8,minWidth:"300px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:10005,display:"flex",flexDirection:"column",pointerEvents:"auto",transform:"none"},children:[a.jsxs("div",{onMouseDown:O,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:D?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Select Component"}),a.jsx("button",{onClick:v,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:ce,children:[a.jsx("div",{style:{marginBottom:"16px"},onClick:H=>H.stopPropagation(),children:a.jsx("input",{type:"text",placeholder:"Search by Component Type...",value:h,onChange:H=>b(H.target.value),onClick:H=>H.stopPropagation(),onMouseDown:H=>H.stopPropagation(),style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #ddd",borderRadius:4,color:"#333",backgroundColor:"#fff",boxSizing:"border-box"}})}),a.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"16px",borderBottom:"2px solid #eee"},onClick:H=>H.stopPropagation(),children:[a.jsx("div",{style:{marginBottom:"8px",fontSize:"14px",fontWeight:600,color:"#333"},children:"Layer:"}),a.jsxs("div",{style:{display:"flex",gap:"16px"},children:[a.jsxs("label",{onClick:H=>H.stopPropagation(),onMouseDown:H=>H.stopPropagation(),style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px",color:"#333"},children:[a.jsx("input",{type:"radio",name:"componentLayer",checked:n==="top",onChange:()=>u("top"),onClick:H=>H.stopPropagation(),onMouseDown:H=>H.stopPropagation(),style:{marginRight:"8px",width:"20px",height:"20px",cursor:"pointer",accentColor:"#0066cc",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:n==="top"?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:n==="top"?"#0066cc":"transparent",position:"relative"}}),"Top"]}),a.jsxs("label",{onClick:H=>H.stopPropagation(),onMouseDown:H=>H.stopPropagation(),style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px",color:"#333"},children:[a.jsx("input",{type:"radio",name:"componentLayer",checked:n==="bottom",onChange:()=>u("bottom"),onClick:H=>H.stopPropagation(),onMouseDown:H=>H.stopPropagation(),style:{marginRight:"8px",width:"20px",height:"20px",cursor:"pointer",accentColor:"#0066cc",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:n==="bottom"?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:n==="bottom"?"#0066cc":"transparent",position:"relative"}}),"Bottom"]})]})]}),a.jsxs("div",{children:[a.jsx("div",{style:{marginBottom:"12px",fontSize:"14px",fontWeight:600,color:"#333"},children:"Component Type:"}),a.jsx("div",{style:{maxHeight:"calc(80vh - 280px)",overflowY:"auto"},children:h.trim()?V.length>0?V.map((H,se)=>{const Q=k2(H.designators),N=Q?`${H.designators[0]}-${Q.componentType}`:null,R=Q&&N?s===N:!1,W=H.designators.join(", "),X=Q?If.find(S=>S.designators.includes(Q.designator||"")):void 0,k=Q?{...Q,componentDefinition:X}:void 0;return a.jsxs("label",{onClick:S=>{S.stopPropagation(),k&&N&&f(k.componentType,N,k)},onMouseDown:S=>S.stopPropagation(),style:{display:"block",width:"100%",textAlign:"left",padding:"8px 12px",marginBottom:"4px",background:R?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:Q?"pointer":"default",fontSize:"12px",color:Q?"#333":"#999"},children:[a.jsx("input",{type:"radio",name:"componentType-search",checked:R,onChange:()=>{k&&N&&f(k.componentType,N,k)},onClick:S=>S.stopPropagation(),onMouseDown:S=>S.stopPropagation(),disabled:!Q,style:{marginRight:"10px",width:"20px",height:"20px",cursor:Q?"pointer":"default",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:R?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:R?"#0066cc":"transparent",position:"relative",flexShrink:0}}),a.jsx("strong",{children:W})," - ",H.componentType,!Q&&a.jsx("span",{style:{color:"#999",fontSize:"11px",marginLeft:"8px"},children:"(Not available)"})]},se)}):a.jsxs("div",{style:{padding:"12px",color:"#666",fontSize:"12px",textAlign:"center"},children:['No matches found for "',h,'"']}):Object.entries(Ym).filter(([H])=>(!h.trim()||H.toLowerCase().includes(h.toLowerCase()),!0)).map(([H,se])=>{const Q=[];return Object.entries(se).forEach(([N,R])=>{R.forEach(W=>{const X=tf[W];if(!X)return;let k=X.prefix[0],S;W==="Capacitor"||W==="Electrolytic Capacitor"||W==="Film Capacitor"?N==="Electrolytic"?k="CE":N==="Film"?k="CF":N==="Tantalum"?(k="C",S="Tantalum"):k="C":W==="Diode"?N==="LED"?(k="LED",S="LED"):N==="Infrared"?(k="IR",S="Infrared"):N==="Photodiode"?(k="PD",S="Photodiode"):N==="Schottky"?(k="D",S="Schottky"):(k="D",S="Standard"):W==="VariableResistor"?N==="Varistor"?(k="RV",S="Varistor"):(k="VR",S="Potentiometer"):W==="GenericComponent"?N==="Attenuator"?(k="AT",S="Attenuator"):N==="Circuit Breaker"?(k="CB",S="CircuitBreaker"):N==="Thermocouple"?(k="TC",S="Thermocouple"):N==="Tuner"&&(k="TUN",S="Tuner"):k=X.prefix[0];let J;const ie=Yh.find(ge=>ge.designators.includes(k));ie&&(J=ie.componentType),!(h.trim()&&!z({type:W,subcategory:N,designator:k,subtype:S,componentType:J,designators:[k]}))&&Q.push({type:W,subcategory:N,designator:k,subtype:S})})}),Q.length===0?null:a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#333",padding:"6px 8px",marginBottom:"4px",backgroundColor:"#f5f5f5",borderRadius:4},children:H}),a.jsx("div",{style:{marginLeft:"8px"},children:Q.map(({type:N,subcategory:R,designator:W,subtype:X},k)=>{if(!tf[N])return null;const J=`${W}-${N}-${R}`,ie=s===J,ge=rl(N);let $=`${W} - ${ge}`;R!=="Standard"&&R!=="General"&&R!==ge&&($=`${W} - ${R}`);const te=If.find(je=>je.category===H&&je.subcategory===R&&je.type===N),he={componentType:N,designator:W,subtype:X,uniqueKey:J,componentDefinition:te};return a.jsxs("label",{onClick:je=>{je.stopPropagation(),f(N,J,he)},onMouseDown:je=>je.stopPropagation(),style:{display:"block",width:"100%",textAlign:"left",padding:"6px 12px",marginBottom:"2px",background:ie?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",color:"#333"},children:[a.jsx("input",{type:"radio",name:`componentType-${H}`,checked:ie,onChange:()=>f(N,J,he),onMouseDown:je=>je.stopPropagation(),style:{marginRight:"10px",width:"20px",height:"20px",cursor:"pointer",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:ie?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:ie?"#0066cc":"transparent",position:"relative",flexShrink:0}}),$]},`${N}-${R}-${k}`)})})]},H)})})]})]})]})})},kv=({visible:r,onClose:n,powerBuses:o,setPowerBuses:s,editingPowerBusId:u,setEditingPowerBusId:f,powers:v})=>{const[h,b]=I.useState(null),[x,T]=I.useState(!1),[D,E]=I.useState(null),C=I.useRef(null);I.useEffect(()=>{r&&!h&&b({x:window.innerWidth/2-140,y:window.innerHeight/2-200})},[r,h]),I.useEffect(()=>{if(!x)return;const H=Q=>{h&&D&&b({x:Q.clientX-D.x,y:Q.clientY-D.y})},se=()=>{T(!1),E(null)};return window.addEventListener("mousemove",H),window.addEventListener("mouseup",se),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",se)}},[x,h,D]);const K=o.filter(H=>H.id!==u),O=o.find(H=>H.id===u);if(!r)return null;const z=[...K].sort((H,se)=>{const Q=W=>{const X=W.match(/([+-]?)(\d+\.?\d*)/);if(X){const k=X[1]||"+",S=parseFloat(X[2]);return{absValue:Math.abs(S),isNegative:k==="-"}}return{absValue:1/0,isNegative:!1}},N=Q(H.voltage),R=Q(se.voltage);return N.absValue!==R.absValue?N.absValue-R.absValue:N.isNegative!==R.isNegative?N.isNegative?-1:1:0}),V=O?[...z,O]:z,ae=()=>{const H={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};s(se=>[...se,H]),f(H.id)},ce=H=>{const se=H.target;se.tagName==="BUTTON"||se.tagName==="INPUT"||se.closest("button")||se.closest("input")||h&&(E({x:H.clientX-h.x,y:H.clientY-h.y}),T(!0),H.preventDefault())};return a.jsxs("div",{ref:C,style:{position:"fixed",top:h?`${h.y}px`:"50%",left:h?`${h.x}px`:"50%",transform:h?"none":"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",display:"flex",flexDirection:"column",cursor:x?"grabbing":"default"},children:[a.jsxs("div",{onMouseDown:ce,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:x?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Manage Power Buses"}),a.jsx("button",{onClick:n,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:V.map(H=>{const se=o.find(W=>W.id===H.id)||H,Q=o.findIndex(W=>W.id===H.id),N=o.some(W=>W.name===se.name&&W.id!==H.id),R=o.some(W=>W.voltage===se.voltage&&W.id!==H.id);return a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Name:"}),a.jsx("input",{type:"text",value:se.name,onChange:W=>{const X=W.target.value;if(!o.some(S=>S.name===X&&S.id!==H.id)){const S=[...o];Q>=0&&(S[Q]={...se,name:X},s(S))}},placeholder:"e.g., +5VDC",style:{flex:1,padding:"2px 3px",border:N?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Value:"}),a.jsx("input",{type:"text",inputMode:"decimal",value:se.voltage,onChange:W=>{const X=W.target.value;if(X===""||/^[+-]?\d*\.?\d*$/.test(X)){const k=[...o];Q>=0&&(k[Q]={...se,voltage:X},s(k))}},onBlur:W=>{const X=W.target.value.trim();if(X==="")return;const k=parseFloat(X);if(!isNaN(k)){const S=k>=0?"+":"-",J=Math.abs(k),ie=`${S}${J.toFixed(1).replace(/\.?0+$/,"")}`,ge=[...o];Q>=0&&(ge[Q]={...se,voltage:ie},s(ge))}},placeholder:"e.g., +5.0",style:{flex:1,padding:"2px 3px",border:R?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]})]}),a.jsx("input",{type:"color",value:se.color,onChange:W=>{const X=[...o];Q>=0&&(X[Q]={...se,color:W.target.value},s(X))},style:{width:"24px",height:"24px",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",flexShrink:0},title:"Color"}),a.jsx("button",{onClick:()=>{const W=v.filter(X=>X.powerBusId===H.id);if(W.length>0){alert(`Cannot delete: ${W.length} power node(s) are using this bus. Remove or reassign them first.`);return}s(X=>X.filter(k=>k.id!==H.id))},style:{padding:"2px 6px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"9px",flexShrink:0},children:"Delete"})]})},H.id)})}),a.jsxs("div",{style:{padding:"6px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"4px",flexShrink:0},children:[a.jsx("button",{onClick:ae,style:{flex:1,padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",fontSize:"10px"},children:"+ Add Power Bus"}),a.jsx("button",{onClick:n,style:{flex:1,padding:"4px 8px",background:"#0b5fff",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",fontSize:"10px",fontWeight:500},children:"Close"})]})]})},Av=({visible:r,onClose:n,groundBuses:o,setGroundBuses:s,editingGroundBusId:u,setEditingGroundBusId:f,grounds:v})=>{const[h,b]=I.useState(null),[x,T]=I.useState(!1),[D,E]=I.useState(null),C=I.useRef(null);I.useEffect(()=>{r&&!h&&b({x:window.innerWidth/2-140,y:window.innerHeight/2-200})},[r,h]),I.useEffect(()=>{if(!x)return;const H=Q=>{h&&D&&b({x:Q.clientX-D.x,y:Q.clientY-D.y})},se=()=>{T(!1),E(null)};return window.addEventListener("mousemove",H),window.addEventListener("mouseup",se),()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",se)}},[x,h,D]);const K=o.filter(H=>H.id!==u),O=o.find(H=>H.id===u);if(!r)return null;const z=[...K].sort((H,se)=>H.name.localeCompare(se.name)),V=O?[...z,O]:z,ae=()=>{const H={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};s(se=>[...se,H]),f(H.id)},ce=H=>{const se=H.target;se.tagName==="BUTTON"||se.tagName==="INPUT"||se.closest("button")||se.closest("input")||h&&(E({x:H.clientX-h.x,y:H.clientY-h.y}),T(!0),H.preventDefault())};return a.jsxs("div",{ref:C,style:{position:"fixed",top:h?`${h.y}px`:"50%",left:h?`${h.x}px`:"50%",transform:h?"none":"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",display:"flex",flexDirection:"column",cursor:x?"grabbing":"default"},children:[a.jsxs("div",{onMouseDown:ce,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:x?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Manage Ground Buses"}),a.jsx("button",{onClick:n,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:V.map(H=>{const se=o.find(R=>R.id===H.id)||H,Q=o.findIndex(R=>R.id===H.id),N=o.some(R=>R.name===se.name&&R.id!==H.id);return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[a.jsx("div",{style:{flex:1,minWidth:0},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Name:"}),a.jsx("input",{type:"text",value:se.name,onChange:R=>{const W=R.target.value;if(!o.some(k=>k.name===W&&k.id!==H.id)){const k=[...o];Q>=0&&(k[Q]={...se,name:W},s(k))}},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 3px",border:N?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]})}),a.jsx("input",{type:"color",value:se.color,onChange:R=>{const W=[...o];Q>=0&&(W[Q]={...se,color:R.target.value},s(W))},style:{width:"24px",height:"24px",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",flexShrink:0},title:"Color"}),a.jsx("button",{onClick:()=>{const R=v.filter(W=>W.groundBusId===H.id);if(R.length>0){alert(`Cannot delete: ${R.length} ground node(s) are using this bus. Remove or reassign them first.`);return}s(W=>W.filter(X=>X.id!==H.id))},style:{padding:"2px 6px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"9px",flexShrink:0},children:"Delete"})]},H.id)})}),a.jsxs("div",{style:{padding:"6px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"4px",flexShrink:0},children:[a.jsx("button",{onClick:ae,style:{flex:1,padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",fontSize:"10px"},children:"+ Add Ground Bus"}),a.jsx("button",{onClick:n,style:{flex:1,padding:"4px 8px",background:"#0b5fff",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",fontSize:"10px",fontWeight:500},children:"Close"})]})]})},Nv=({visible:r,onClose:n,autoAssignDesignators:o,setAutoAssignDesignators:s,useGlobalDesignatorCounters:u,setUseGlobalDesignatorCounters:f})=>r?a.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"16px",zIndex:1e3,minWidth:"300px",maxWidth:"400px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[a.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Designators"}),a.jsx("button",{onClick:n,style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333",marginBottom:"12px"},children:[a.jsx("input",{type:"checkbox",checked:o,onChange:v=>{s(v.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),a.jsx("span",{children:"Automatically assign designators"})]}),a.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4",marginBottom:"12px"},children:o?a.jsx("div",{children:"When enabled, new components automatically receive sequential designators (e.g., C1, C2, C3 for Capacitors; R1, R2, R3 for Resistors)."}):a.jsx("div",{children:"When disabled, you must manually assign designators to each component. The designator field will be empty when components are created."})}),a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333"},children:[a.jsx("input",{type:"checkbox",checked:u,onChange:v=>{f(v.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),a.jsx("span",{children:"Use global designator counters"})]}),a.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4"},children:u?a.jsx("div",{children:"When ON, designators continue from global counters across all projects. New components start with the next value from the global counter (e.g., if global counter is C10, new capacitor will be C11)."}):a.jsx("div",{children:"When OFF (default), designators start at 1 for each project. Each project maintains its own independent designator sequence (e.g., C1, C2, C3...)."})})]}),a.jsx("button",{onClick:n,style:{width:"100%",padding:"6px 12px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}):null,A2=({visible:r,title:n,message:o,onYes:s,onNo:u,onCancel:f,yesButtonRef:v})=>r?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:h=>{h.target===h.currentTarget&&f()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:h=>h.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:n}),a.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:o}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:f,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),a.jsx("button",{ref:v,onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}):null,_v=({visible:r,size:n,onSizeChange:o,onApply:s,onCancel:u})=>{const f=I.useRef(null);if(I.useEffect(()=>{r&&f.current&&(f.current.focus(),f.current.select())},[r]),!r)return null;const v=[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32];return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:h=>{h.target===h.currentTarget&&u()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:h=>h.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),a.jsx("input",{ref:f,type:"number",min:"1",max:"99",value:n,onChange:h=>{const b=parseInt(h.target.value)||1,x=Math.max(1,Math.min(99,b));o(x)},onKeyDown:h=>{if(h.key==="Enter"?s():h.key==="Escape"&&u(),h.key.length===1&&/[0-9]/.test(h.key)){const b=n.toString();b.length>=2&&f.current?.selectionStart===f.current?.selectionEnd&&f.current?.selectionStart===b.length&&h.preventDefault()}},onInput:h=>{const b=h.target,x=b.value;if(x.length>2){b.value=x.slice(0,2);const T=parseInt(b.value)||1;o(Math.max(1,Math.min(99,T)))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),a.jsxs("select",{value:v.includes(n)?n:"",onChange:h=>{const b=parseInt(h.target.value);!isNaN(b)&&b>0&&o(b)},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[a.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),v.map(h=>a.jsxs("option",{value:h,style:{background:"#1f1f24",color:"#f2f2f2"},children:[h," pixels"]},h))]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})})},Lv=({visible:r,interval:n,onIntervalChange:o,onApply:s,onCancel:u})=>r?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:f=>{f.target===f.currentTarget&&u()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:f=>f.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),a.jsxs("select",{value:n===null?"disable":(n||5).toString(),onChange:f=>{const v=f.target.value;if(v==="disable")o(null);else{const h=parseFloat(v);!isNaN(h)&&h>0&&o(h)}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[a.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),a.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),a.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),a.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),a.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),a.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}):null,zv=({visible:r,interval:n,onIntervalChange:o,onEnable:s,onSkip:u})=>r?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:f=>{f.target===f.currentTarget&&u()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:f=>f.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),a.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),a.jsxs("select",{value:n===null?"disable":(n||5).toString(),onChange:f=>{const v=f.target.value;if(v==="disable")o(null);else{const h=parseFloat(v);!isNaN(h)&&h>0&&o(h)}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[a.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),a.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),a.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),a.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),a.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),a.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})}):null,Pv=({visible:r,projectDirHandle:n,onClose:o,onRestore:s,position:u,isDragging:f=!1,onDragStart:v})=>{const[h,b]=I.useState([]),[x,T]=I.useState(!1),[D,E]=I.useState(null),[C,K]=I.useState(null),O=I.useRef(null);I.useEffect(()=>{if(!r||!n){b([]),E(null),K(null);return}(async()=>{T(!0),K(null);try{let se;try{se=await n.getDirectoryHandle("history")}catch{b([]),T(!1);return}const Q=R=>{const W=R.match(/_(\d{4})_(\d{2})_(\d{2})-(\d{2})-(\d{2})-(\d{2})\.json$/);if(W){const[,k,S,J,ie,ge,$]=W;return new Date(parseInt(k),parseInt(S)-1,parseInt(J),parseInt(ie),parseInt(ge),parseInt($))}const X=R.match(/_(\d{4})_(\d{2})_(\d{2})_(\d{2})_(\d{2})_(\d{2})\.json$/);if(X){const[,k,S,J,ie,ge,$]=X;return new Date(parseInt(k),parseInt(S)-1,parseInt(J),parseInt(ie),parseInt(ge),parseInt($))}return null},N=[];for await(const R of se.keys())if(R.endsWith(".json"))try{const X=await(await se.getFileHandle(R)).getFile(),k=Q(R);N.push({name:R,lastModified:new Date(X.lastModified),size:X.size,timestamp:k||new Date(X.lastModified)})}catch(W){console.warn(`Failed to read file ${R}:`,W)}N.sort((R,W)=>W.timestamp.getTime()-R.timestamp.getTime()),b(N)}catch(se){console.error("Failed to load history files:",se),K("Failed to load history files. Please try again.")}finally{T(!1)}})()},[r,n]);const z=async()=>{if(D)try{await s(D),o()}catch(H){console.error("Failed to restore file:",H),K("Failed to restore file. Please try again.")}},V=H=>H.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),ae=H=>H<1024?`${H} B`:H<1024*1024?`${(H/1024).toFixed(1)} KB`:`${(H/(1024*1024)).toFixed(1)} MB`;if(!r)return null;const ce=u?{position:"fixed",left:`${u.x}px`,top:`${u.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"500px",maxWidth:"700px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:f?"grabbing":"default"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",borderRadius:8,minWidth:"500px",maxWidth:"700px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column"};return a.jsxs("div",{style:ce,children:[a.jsxs("div",{onMouseDown:v,style:{backgroundColor:"#f5f5f5",padding:"12px 16px",borderBottom:"1px solid #ddd",borderRadius:"8px 8px 0 0",cursor:f?"grabbing":"move",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h2",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#000"},children:"PastTime"}),a.jsx("button",{onClick:o,style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),a.jsxs("div",{style:{padding:"16px",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[C&&a.jsx("div",{style:{padding:"12px",backgroundColor:"#fee",color:"#c00",borderRadius:4,marginBottom:"12px"},children:C}),x?a.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"Loading history files..."}):h.length===0?a.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"No history files found."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{marginBottom:"12px",color:"#333",fontSize:"14px"},children:"Select a file to restore:"}),a.jsx("div",{ref:O,style:{border:"1px solid #ddd",borderRadius:4,overflowY:"auto",maxHeight:"400px",backgroundColor:"#fafafa"},children:h.map((H,se)=>a.jsxs("div",{onClick:()=>E(H.name),style:{padding:"12px 16px",borderBottom:se<h.length-1?"1px solid #eee":"none",backgroundColor:D===H.name?"#e6f0ff":"transparent",cursor:"pointer",transition:"background-color 0.1s"},onMouseEnter:Q=>{D!==H.name&&(Q.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:Q=>{D!==H.name&&(Q.currentTarget.style.backgroundColor="transparent")},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"},children:[a.jsx("div",{style:{fontWeight:600,color:"#000",fontSize:"13px",wordBreak:"break-word",flex:1},children:H.name}),a.jsx("div",{style:{color:"#666",fontSize:"12px",marginLeft:"12px",whiteSpace:"nowrap"},children:ae(H.size)})]}),a.jsx("div",{style:{color:"#666",fontSize:"12px"},children:V(H.lastModified)})]},H.name))})]})]}),a.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px"},children:[a.jsx("button",{onClick:o,style:{padding:"6px 16px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"13px"},children:"Cancel"}),a.jsx("button",{onClick:z,disabled:!D||x,style:{padding:"6px 16px",background:D&&!x?"#0066cc":"#ccc",border:"none",borderRadius:4,cursor:D&&!x?"pointer":"not-allowed",color:"#fff",fontSize:"13px",fontWeight:500},children:"Restore"})]})]})};function Dv(){const[r,n]=I.useState([]),[o,s]=I.useState(!1),[u,f]=I.useState([]),[v,h]=I.useState(null),[b,x]=I.useState("trace"),[T,D]=I.useState("top"),E=I.useRef([]),C=I.useRef(0),K=I.useRef(!1),O=I.useCallback(()=>{s(!0),f([]),E.current=[]},[]),z=I.useCallback(()=>{s(!1),f([]),E.current=[]},[]),V=I.useCallback(ce=>{f(H=>[...H,ce]),E.current=[...E.current,ce]},[]),ae=I.useCallback(ce=>{n(H=>[...H,ce]),f([]),E.current=[]},[]);return{drawingStrokes:r,setDrawingStrokes:n,isDrawing:o,setIsDrawing:s,currentStroke:u,setCurrentStroke:f,tracePreviewMousePos:v,setTracePreviewMousePos:h,drawingMode:b,setDrawingMode:x,selectedDrawingLayer:T,setSelectedDrawingLayer:D,currentStrokeRef:E,lastTraceClickTimeRef:C,isDoubleClickingTraceRef:K,startDrawing:O,stopDrawing:z,addPointToStroke:V,finishStroke:ae}}function Ev(){const[r,n]=I.useState(new Set),[o,s]=I.useState(!1),[u,f]=I.useState(new Set),[v,h]=I.useState(new Set),[b,x]=I.useState(new Set),T=I.useCallback(()=>{n(new Set),f(new Set),h(new Set),x(new Set)},[]),D=I.useCallback((K,O="stroke")=>{O==="stroke"?n(z=>new Set([...z,K])):O==="component"?f(z=>new Set([...z,K])):O==="power"?h(z=>new Set([...z,K])):O==="ground"&&x(z=>new Set([...z,K]))},[]),E=I.useCallback((K,O="stroke")=>{O==="stroke"?n(z=>{const V=new Set(z);return V.delete(K),V}):O==="component"?f(z=>{const V=new Set(z);return V.delete(K),V}):O==="power"?h(z=>{const V=new Set(z);return V.delete(K),V}):O==="ground"&&x(z=>{const V=new Set(z);return V.delete(K),V})},[]),C=I.useCallback((K,O="stroke")=>{O==="stroke"?n(K):O==="component"?f(K):O==="power"?h(K):O==="ground"&&x(K)},[]);return{selectedIds:r,setSelectedIds:n,isSelecting:o,setIsSelecting:s,selectedComponentIds:u,setSelectedComponentIds:f,selectedPowerIds:v,setSelectedPowerIds:h,selectedGroundIds:b,setSelectedGroundIds:x,clearSelection:T,addToSelection:D,removeFromSelection:E,setSelection:C}}function Rv(){const[r,n]=I.useState(null),[o,s]=I.useState(!1),[u,f]=I.useState(null),[v,h]=I.useState("nudge"),b=I.useCallback((T,D)=>{n(T),s(!0),f(D)},[]),x=I.useCallback(()=>{s(!1),n(null),f(null)},[]);return{selectedImageForTransform:r,setSelectedImageForTransform:n,isTransforming:o,setIsTransforming:s,transformStartPos:u,setTransformStartPos:f,transformMode:v,setTransformMode:h,startTransform:b,stopTransform:x}}function Mv(){const[r,n]=I.useState(null),[o,s]=I.useState(null),[u,f]=I.useState("overlay"),[v,h]=I.useState(50),[b,x]=I.useState(!1),[T,D]=I.useState(2e3),[E,C]=I.useState(!1),K=I.useCallback(V=>{n(V)},[]),O=I.useCallback(V=>{s(V)},[]),z=I.useCallback(()=>{n(null),s(null)},[]);return{topImage:r,setTopImage:n,bottomImage:o,setBottomImage:s,currentView:u,setCurrentView:f,transparency:v,setTransparency:h,isTransparencyCycling:b,setIsTransparencyCycling:x,transparencyCycleSpeed:T,setTransparencyCycleSpeed:D,isGrayscale:E,setIsGrayscale:C,loadTopImage:K,loadBottomImage:O,clearImages:z}}function Bv(){const[r,n]=I.useState(1),[o,s]=I.useState({x:0,y:0}),[u,f]=I.useState(0),[v,h]=I.useState(!1),[b,x]=I.useState(!1),[T,D]=I.useState(!1),E=I.useCallback(()=>{n(1),s({x:0,y:0}),f(0),h(!1)},[]),C=I.useCallback((ce=1.2)=>{n(H=>H*ce)},[]),K=I.useCallback((ce=1.2)=>{n(H=>H/ce)},[]),O=I.useCallback(ce=>{n(ce)},[]),z=I.useCallback((ce,H,se)=>{const Q=ce/se,N=H/se;s(R=>({x:R.x-Q,y:R.y-N}))},[]),V=I.useCallback((ce,H)=>{s({x:ce,y:H})},[]),ae=I.useCallback((ce,H)=>({x:ce-o.x*r,y:H-o.y*r}),[o,r]);return{viewScale:r,setViewScale:n,cameraWorldCenter:o,setCameraWorldCenter:s,viewRotation:u,setViewRotation:f,viewFlipX:v,setViewFlipX:h,isShiftConstrained:b,setIsShiftConstrained:x,showBothLayers:T,setShowBothLayers:D,resetView:E,zoomIn:C,zoomOut:K,setZoom:O,pan:z,setCameraCenter:V,getViewPan:ae}}function Ov(){const[r,n]=I.useState(()=>[{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),[o,s]=I.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"}]),[u,f]=I.useState([]),[v,h]=I.useState([]),[b,x]=I.useState(null),[T,D]=I.useState(null),E=I.useCallback(Q=>{n(N=>[...N,Q])},[]),C=I.useCallback((Q,N)=>{n(R=>R.map(W=>W.id===Q?{...W,...N}:W))},[]),K=I.useCallback(Q=>{n(N=>N.filter(R=>R.id!==Q)),f(N=>N.filter(R=>R.powerBusId!==Q))},[]),O=I.useCallback(Q=>{f(N=>[...N,Q])},[]),z=I.useCallback(Q=>{f(N=>N.filter(R=>R.id!==Q))},[]),V=I.useCallback(Q=>{h(N=>[...N,Q])},[]),ae=I.useCallback(Q=>{h(N=>N.filter(R=>R.id!==Q))},[]),ce=I.useCallback(Q=>{s(N=>[...N,Q])},[]),H=I.useCallback((Q,N)=>{s(R=>R.map(W=>W.id===Q?{...W,...N}:W))},[]),se=I.useCallback(Q=>{s(N=>N.filter(R=>R.id!==Q)),h(N=>N.filter(R=>R.groundBusId===Q))},[]);return{powerBuses:r,setPowerBuses:n,groundBuses:o,setGroundBuses:s,powerSymbols:u,setPowerSymbols:f,groundSymbols:v,setGroundSymbols:h,powerEditor:b,setPowerEditor:x,groundEditor:T,setGroundEditor:D,addPowerBus:E,updatePowerBus:C,removePowerBus:K,addPowerSymbol:O,removePowerSymbol:z,addGroundSymbol:V,removeGroundSymbol:ae,addGroundBus:ce,updateGroundBus:H,removeGroundBus:se}}const fi={brushColor:"#008080",brushSize:6,topTraceColor:"#AA4499",bottomTraceColor:"#F781BF",topTraceSize:6,bottomTraceSize:6,viaSize:18,viaColor:"#ff0000",topPadColor:"#0072B2",bottomPadColor:"#56B4E9",topPadSize:18,bottomPadSize:18,topTestPointColor:"#FFFF00",bottomTestPointColor:"#FFFF00",topTestPointSize:18,bottomTestPointSize:18,topComponentColor:"#8C564B",bottomComponentColor:"#9C755F",topComponentSize:18,bottomComponentSize:18,componentConnectionColor:"#E69F00",componentConnectionSize:3};function Iv(){const[r,n]=I.useState(fi.brushColor),[o,s]=I.useState(fi.brushSize),[u,f]=I.useState(fi.topTraceColor),[v,h]=I.useState(fi.bottomTraceColor),[b,x]=I.useState(fi.topTraceSize),[T,D]=I.useState(fi.bottomTraceSize),[E,C]=I.useState(fi.topPadColor),[K,O]=I.useState(fi.bottomPadColor),[z,V]=I.useState(fi.topPadSize),[ae,ce]=I.useState(fi.bottomPadSize),[H,se]=I.useState(fi.topTestPointColor),[Q,N]=I.useState(fi.bottomTestPointColor),[R,W]=I.useState(fi.topTestPointSize),[X,k]=I.useState(fi.bottomTestPointSize),[S,J]=I.useState(fi.topComponentColor),[ie,ge]=I.useState(fi.bottomComponentColor),[$,te]=I.useState(fi.topComponentSize),[he,je]=I.useState(fi.bottomComponentSize),[be,F]=I.useState(fi.componentConnectionColor),[A,M]=I.useState(fi.componentConnectionSize),B=I.useCallback(()=>{n(fi.brushColor),s(fi.brushSize),f(fi.topTraceColor),h(fi.bottomTraceColor),x(fi.topTraceSize),D(fi.bottomTraceSize),C(fi.topPadColor),O(fi.bottomPadColor),V(fi.topPadSize),ce(fi.bottomPadSize),se(fi.topTestPointColor),N(fi.bottomTestPointColor),W(fi.topTestPointSize),k(fi.bottomTestPointSize),J(fi.topComponentColor),ge(fi.bottomComponentColor),te(fi.topComponentSize),je(fi.bottomComponentSize),F(fi.componentConnectionColor),M(fi.componentConnectionSize)},[]),de=I.useCallback(ze=>{ze.brushColor!==void 0&&n(ze.brushColor),ze.brushSize!==void 0&&s(ze.brushSize),ze.topTraceColor!==void 0&&f(ze.topTraceColor),ze.bottomTraceColor!==void 0&&h(ze.bottomTraceColor),ze.topTraceSize!==void 0&&x(ze.topTraceSize),ze.bottomTraceSize!==void 0&&D(ze.bottomTraceSize),ze.topPadColor!==void 0&&C(ze.topPadColor),ze.bottomPadColor!==void 0&&O(ze.bottomPadColor),ze.topPadSize!==void 0&&V(ze.topPadSize),ze.bottomPadSize!==void 0&&ce(ze.bottomPadSize),ze.topTestPointColor!==void 0&&se(ze.topTestPointColor),ze.bottomTestPointColor!==void 0&&N(ze.bottomTestPointColor),ze.topTestPointSize!==void 0&&W(ze.topTestPointSize),ze.bottomTestPointSize!==void 0&&k(ze.bottomTestPointSize),ze.topComponentColor!==void 0&&J(ze.topComponentColor),ze.bottomComponentColor!==void 0&&ge(ze.bottomComponentColor),ze.topComponentSize!==void 0&&te(ze.topComponentSize),ze.bottomComponentSize!==void 0&&je(ze.bottomComponentSize),ze.componentConnectionColor!==void 0&&F(ze.componentConnectionColor),ze.componentConnectionSize!==void 0&&M(ze.componentConnectionSize)},[]),ke=I.useCallback((ze,tt,Xe)=>{},[]),De=I.useCallback((ze,tt,Xe)=>{},[]),Ge=I.useCallback(()=>({brushColor:r,brushSize:o,topTraceColor:u,bottomTraceColor:v,topTraceSize:b,bottomTraceSize:T,viaSize:fi.viaSize,viaColor:fi.viaColor,topPadColor:E,bottomPadColor:K,topPadSize:z,bottomPadSize:ae,topTestPointColor:H,bottomTestPointColor:Q,topTestPointSize:R,bottomTestPointSize:X,topComponentColor:S,bottomComponentColor:ie,topComponentSize:$,bottomComponentSize:he,componentConnectionColor:be,componentConnectionSize:A}),[r,o,u,v,b,T,E,K,z,ae,H,Q,R,X,S,ie,$,he,be,A]);return{brushColor:r,setBrushColor:n,brushSize:o,setBrushSize:s,topTraceColor:u,setTopTraceColor:f,bottomTraceColor:v,setBottomTraceColor:h,topTraceSize:b,setTopTraceSize:x,bottomTraceSize:T,setBottomTraceSize:D,topPadColor:E,setTopPadColor:C,bottomPadColor:K,setBottomPadColor:O,topPadSize:z,setTopPadSize:V,bottomPadSize:ae,setBottomPadSize:ce,topTestPointColor:H,setTopTestPointColor:se,bottomTestPointColor:Q,setBottomTestPointColor:N,topTestPointSize:R,setTopTestPointSize:W,bottomTestPointSize:X,setBottomTestPointSize:k,topComponentColor:S,setTopComponentColor:J,bottomComponentColor:ie,setBottomComponentColor:ge,topComponentSize:$,setTopComponentSize:te,bottomComponentSize:he,setBottomComponentSize:je,componentConnectionColor:be,setComponentConnectionColor:F,componentConnectionSize:A,setComponentConnectionSize:M,resetToDefaults:B,loadFromProject:de,getCurrentSettings:Ge,saveDefaultSize:ke,saveDefaultColor:De}}function Uv(r,n,o,s,u,f,v,h,b,x,T,D,E,C,K,O,z,V,ae,ce,H,se,Q,N,R){const[W,X]=I.useState(()=>r()),k=I.useRef(null),S=I.useRef(s),J=I.useRef(u),ie=I.useCallback(te=>n==="draw"&&o==="trace"?te.get("trace"):n==="draw"&&o==="via"?te.get("via"):n==="draw"&&o==="pad"?te.get("pad"):n==="component"?te.get("component"):n==="power"?te.get("power"):n==="ground"?te.get("ground"):null,[n,o]);I.useEffect(()=>{X(te=>{const he=ie(te),je=he?.id||null,be=k.current,F=new Map(te);if(be&&be!==je){const A=te.get(be);A&&F.set(be,{...A,settings:{color:S.current,size:J.current}})}if(he&&je!==be)if(n==="draw"&&o==="trace"){const A=se||"top",M=A==="top"?f:v,B=A==="top"?h:b;S.current=M,J.current=B,F.set("trace",{...he,settings:{color:M,size:B}})}else if(n==="draw"&&o==="pad"){const A=Q||"top",M=A==="top"?x:T,B=A==="top"?D:E;S.current=M,J.current=B,F.set("pad",{...he,settings:{color:M,size:B}})}else if(n==="component"){const A=R||"top",M=A==="top"?V:ae,B=A==="top"?ce:H;S.current=M,J.current=B,F.set("component",{...he,settings:{color:M,size:B}})}else S.current=he.settings.color,J.current=he.settings.size;return k.current=je,F})},[n,o,f,v,h,b,x,T,D,E,V,ae,ce,H,se,Q,R,ie]);const ge=I.useCallback((te,he)=>{X(je=>{const be=new Map(je),F=be.get(te);return F&&be.set(te,{...F,settings:he}),be})},[]),$=I.useCallback((te,he,je)=>{X(be=>{const F=new Map(be),A=F.get(te);if(A){const M=new Map(A.layerSettings);M.set(he,je),F.set(te,{...A,layerSettings:M})}return F})},[]);return{toolRegistry:W,setToolRegistry:X,updateToolSettings:ge,updateToolLayerSettings:$,getCurrentToolDef:ie}}function Fv(r){const{currentTool:n,drawingMode:o,traceToolLayer:s,padToolLayer:u,testPointToolLayer:f,componentToolLayer:v}=r,[h,b]=I.useState(0),x=I.useCallback(()=>n==="draw"&&o==="via"?"via":n==="draw"&&o==="pad"?u==="bottom"?"padBottom":"padTop":n==="draw"&&o==="testPoint"?f==="bottom"?"testPointBottom":"testPointTop":n==="draw"&&o==="trace"?s==="bottom"?"traceBottom":"traceTop":n==="component"?v==="bottom"?"componentBottom":"componentTop":n==="power"?"power":n==="ground"?"ground":null,[n,o,u,f,s,v]),T=I.useCallback(()=>{const K=x();if(K){const O=ei.get(K);return{currentTool:n,drawingMode:o,layer:n==="draw"&&o==="pad"?u||"top":n==="draw"&&o==="testPoint"?f||"top":n==="draw"&&o==="trace"?s||"top":n==="component"?v||"top":void 0,toolInstanceId:K,color:O.color,size:O.size}}return{currentTool:n,drawingMode:o,layer:void 0,toolInstanceId:null,color:"#000000",size:10}},[n,o,u,f,s,v,x]);I.useEffect(()=>{const K=x();return K?ei.subscribe(K,()=>{b(z=>z+1)}):void 0},[x]);const D=T(),E=I.useCallback(K=>{const O=x();O&&ei.setColor(O,K)},[x]),C=I.useCallback(K=>{const O=x();O&&ei.setSize(O,K)},[x]);return{toolState:D,setColor:E,setSize:C,getCurrentToolInstanceId:x}}function qv(){const[r,n]=I.useState(!1),[o,s]=I.useState(!1),[u,f]=I.useState(!1),[v,h]=I.useState(!1),[b,x]=I.useState(!1),[T,D]=I.useState(!1),[E,C]=I.useState(!1),[K,O]=I.useState(!1),z=I.useCallback(()=>{n(!0),s(!0),f(!0),h(!0),x(!0),D(!0),C(!0),O(!0)},[]),V=I.useCallback(()=>{n(!1),s(!1),f(!1),h(!1),x(!1),D(!1),C(!1),O(!1)},[]);return{areImagesLocked:r,setAreImagesLocked:n,areViasLocked:o,setAreViasLocked:s,arePadsLocked:u,setArePadsLocked:f,areTestPointsLocked:v,setAreTestPointsLocked:h,areTracesLocked:b,setAreTracesLocked:x,areComponentsLocked:T,setAreComponentsLocked:D,areGroundNodesLocked:E,setAreGroundNodesLocked:C,arePowerNodesLocked:K,setArePowerNodesLocked:O,lockAll:z,unlockAll:V}}function Hv(){const[r,n]=I.useState(null),[o,s]=I.useState({visible:!1,size:6}),[u,f]=I.useState({visible:!1,interval:5}),[v,h]=I.useState({visible:!1,source:null,interval:5}),[b,x]=I.useState({visible:!1,text:""}),[T,D]=I.useState({visible:!1,title:"",message:""}),[E,C]=I.useState({visible:!1}),[K,O]=I.useState({visible:!1}),[z,V]=I.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[ae,ce]=I.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[H,se]=I.useState(!1),[Q,N]=I.useState(!0),[R,W]=I.useState(!1);return{openMenu:r,setOpenMenu:n,setSizeDialog:o,setSetSizeDialog:s,autoSaveDialog:u,setAutoSaveDialog:f,autoSavePromptDialog:v,setAutoSavePromptDialog:h,debugDialog:b,setDebugDialog:x,errorDialog:T,setErrorDialog:D,newProjectDialog:E,setNewProjectDialog:C,openProjectDialog:K,setOpenProjectDialog:O,newProjectSetupDialog:z,setNewProjectSetupDialog:V,saveAsDialog:ae,setSaveAsDialog:ce,showColorPicker:H,setShowColorPicker:se,showWelcomeDialog:Q,setShowWelcomeDialog:N,transformImagesDialogVisible:R,setTransformImagesDialogVisible:W}}function Vv(){const[r,n]=I.useState(!1),[o,s]=I.useState(1),[u,f]=I.useState(null),[v,h]=I.useState(""),[b,x]=I.useState(""),[T,D]=I.useState(null),[E,C]=I.useState("pcb_project"),[K,O]=I.useState([]),[z,V]=I.useState(-1),ae=I.useRef(null),ce=I.useRef(!1),H=I.useRef(!1);return{autoSaveEnabled:r,setAutoSaveEnabled:n,autoSaveInterval:o,setAutoSaveInterval:s,autoSaveDirHandle:u,setAutoSaveDirHandle:f,autoSaveBaseName:v,setAutoSaveBaseName:h,currentProjectFilePath:b,setCurrentProjectFilePath:x,projectDirHandle:T,setProjectDirHandle:D,projectName:E,setProjectName:C,autoSaveFileHistory:K,setAutoSaveFileHistory:O,currentFileIndex:z,setCurrentFileIndex:V,autoSaveIntervalRef:ae,hasChangesSinceLastAutoSaveRef:ce,prevAutoSaveEnabledRef:H}}function Wv(){const[r,n]=I.useState(null),o=I.useRef(!1),s=I.useCallback((h,b,x,T,D)=>{if(o.current)return;const E={drawingStrokes:JSON.parse(JSON.stringify(h)),componentsTop:JSON.parse(JSON.stringify(b)),componentsBottom:JSON.parse(JSON.stringify(x)),powerSymbols:JSON.parse(JSON.stringify(T)),groundSymbols:JSON.parse(JSON.stringify(D))};n(E)},[]),u=I.useCallback(()=>{if(!r)return null;o.current=!0;const h=r;return n(null),setTimeout(()=>{o.current=!1},100),h},[r]),f=r!==null,v=I.useCallback(()=>{n(null)},[]);return{saveSnapshot:s,undo:u,canUndo:f,clearSnapshot:v}}function Yv(){const n=Mv(),{topImage:o,setTopImage:s,bottomImage:u,setBottomImage:f,currentView:v,setCurrentView:h,transparency:b,setTransparency:x,isTransparencyCycling:T,setIsTransparencyCycling:D,transparencyCycleSpeed:E,setTransparencyCycleSpeed:C,isGrayscale:K,setIsGrayscale:O}=n,[z,V]=I.useState("none"),[ae,ce]=I.useState(()=>{const c=localStorage.getItem("bomExportFormat");return c==="json"||c==="pdf"?c:"pdf"});_t.useEffect(()=>{localStorage.setItem("bomExportFormat",ae)},[ae]);const H=Iv(),{brushColor:se,setBrushColor:Q,brushSize:N,setBrushSize:R,topTraceColor:W,setTopTraceColor:X,bottomTraceColor:k,setBottomTraceColor:S,topTraceSize:J,setTopTraceSize:ie,bottomTraceSize:ge,setBottomTraceSize:$,topPadColor:te,setTopPadColor:he,bottomPadColor:je,setBottomPadColor:be,topPadSize:F,setTopPadSize:A,bottomPadSize:M,setBottomPadSize:B,topTestPointColor:de,setTopTestPointColor:ke,bottomTestPointColor:De,setBottomTestPointColor:Ge,topTestPointSize:ze,setTopTestPointSize:tt,bottomTestPointSize:Xe,setBottomTestPointSize:Tt,topComponentColor:jt,setTopComponentColor:It,bottomComponentColor:pe,setBottomComponentColor:Pt,topComponentSize:gn,setTopComponentSize:Qt,bottomComponentSize:ht,setBottomComponentSize:nn,componentConnectionColor:Rt,setComponentConnectionColor:mn,componentConnectionSize:en,setComponentConnectionSize:Vn,saveDefaultSize:Nt,saveDefaultColor:Dt}=H,li=Dv(),{drawingStrokes:ct,setDrawingStrokes:kt,isDrawing:Rn,setIsDrawing:Gt,currentStroke:zn,setCurrentStroke:Nn,tracePreviewMousePos:rn,setTracePreviewMousePos:xn,drawingMode:rt,setDrawingMode:$t,selectedDrawingLayer:Ht,setSelectedDrawingLayer:Vt,currentStrokeRef:wn,lastTraceClickTimeRef:Xi,isDoubleClickingTraceRef:Un}=li,un=Rv(),{selectedImageForTransform:Wt,setSelectedImageForTransform:ko,isTransforming:Zr,setIsTransforming:go,transformStartPos:Ao,setTransformStartPos:Xt,transformMode:No,setTransformMode:ya}=un,na=Bv(),{viewScale:vt,setViewScale:ii,viewRotation:Xn,setViewRotation:cr,viewFlipX:$i,setViewFlipX:Sr,cameraWorldCenter:xi,setCameraWorldCenter:di,resetView:yo,isShiftConstrained:ia,setIsShiftConstrained:ma,showBothLayers:qs,setShowBothLayers:za,setCameraCenter:Pa,getViewPan:os}=na,[Wn,_o]=I.useState("top"),[Si,xa]=I.useState("top"),[Pn,Ts]=I.useState("top"),[Yn,ra]=I.useState("top"),ba=_t.useRef("top"),js=_t.useRef("top"),ks=_t.useRef("top"),Hs=_t.useRef("top");_t.useEffect(()=>{ba.current=Wn},[Wn]),_t.useEffect(()=>{js.current=Si},[Si]),_t.useEffect(()=>{ks.current=Pn},[Pn]),_t.useEffect(()=>{Hs.current=Yn},[Yn]);const xc=Fv({currentTool:z,drawingMode:rt,traceToolLayer:Wn,padToolLayer:Si,testPointToolLayer:Pn,componentToolLayer:Yn}),{toolState:Fi}=xc,As=Uv(cv,z,rt,se,N,W,k,J,ge,te,je,F,M,de,De,ze,Xe,jt,pe,gn,ht,Wn,Si,Pn,Yn),{toolRegistry:In,setToolRegistry:Mn,getCurrentToolDef:Ns,updateToolSettings:Ya,updateToolLayerSettings:Da}=As,al=_t.useRef(null),bi=_t.useRef(se),Zn=_t.useRef(N);_t.useEffect(()=>{Mn(c=>{const y=Ns(c),_=y?.id||null,G=al.current,re=new Map(c);if(G&&G!==_){const Se=c.get(G);Se&&re.set(G,{...Se,settings:{color:bi.current,size:Zn.current}})}if(y&&_!==G)if(z==="draw"&&rt==="trace"){const Se=Wn||"top",U=Se==="top"?W:k,xe=Se==="top"?J:ge;Q(U),R(xe),bi.current=U,Zn.current=xe;const ee=new Map(y.layerSettings);ee.set("top",{color:W,size:J}),ee.set("bottom",{color:k,size:ge}),re.set("trace",{...y,settings:{color:U,size:xe},layerSettings:ee})}else if(z==="draw"&&rt==="pad"){const Se=Si||"top",U=Se==="top"?te:je,xe=Se==="top"?F:M;Q(U),R(xe),bi.current=U,Zn.current=xe;const ee=new Map(y.layerSettings);ee.set("top",{color:te,size:F}),ee.set("bottom",{color:je,size:M}),re.set("pad",{...y,settings:{color:U,size:xe},layerSettings:ee})}else if(z==="draw"&&rt==="testPoint"){const Se=Pn||"top",U=Se==="top"?de:De,xe=Se==="top"?ze:Xe;Q(U),R(xe),bi.current=U,Zn.current=xe;const ee=new Map(y.layerSettings);ee.set("top",{color:de,size:ze}),ee.set("bottom",{color:De,size:Xe}),re.set("testPoint",{...y,settings:{color:U,size:xe},layerSettings:ee})}else if(z==="component"){const Se=Yn||"top",U=Se==="top"?jt:pe,xe=Se==="top"?gn:ht;Q(U),R(xe),bi.current=U,Zn.current=xe;const ee=new Map(y.layerSettings);ee.set("top",{color:jt,size:gn}),ee.set("bottom",{color:pe,size:ht}),re.set("component",{...y,settings:{color:U,size:xe},layerSettings:ee})}else{const Se=y.settings;Q(Se.color),R(Se.size),bi.current=Se.color,Zn.current=Se.size}return al.current=_,re})},[z,rt,Ns,W,k,J,ge,te,je,F,M,de,De,ze,Xe,Pn,jt,pe,gn,ht]),_t.useEffect(()=>{const c=In.get("trace");if(c){const re=c.layerSettings.get("top"),Se=c.layerSettings.get("bottom");re&&(X(re.color),ie(re.size)),Se&&(S(Se.color),$(Se.size))}const y=In.get("pad");if(y){const re=y.layerSettings.get("top"),Se=y.layerSettings.get("bottom");re&&(he(re.color),A(re.size)),Se&&(be(Se.color),B(Se.size))}const _=In.get("testPoint");if(_){const re=_.layerSettings.get("top"),Se=_.layerSettings.get("bottom");re&&(ke(re.color),tt(re.size)),Se&&(Ge(Se.color),Tt(Se.size))}const G=In.get("component");if(G){const re=G.layerSettings.get("top"),Se=G.layerSettings.get("bottom");re&&(It(re.color),Qt(re.size)),Se&&(Pt(Se.color),nn(Se.size))}},[]),_t.useEffect(()=>{Mn(c=>{const y=new Map(c),_=c.get("trace");if(_){const xe=new Map(_.layerSettings);xe.set("top",{color:W,size:J}),xe.set("bottom",{color:k,size:ge}),y.set("trace",{..._,layerSettings:xe})}const G=c.get("pad");if(G){const xe=new Map(G.layerSettings);xe.set("top",{color:te,size:F}),xe.set("bottom",{color:je,size:M}),y.set("pad",{...G,layerSettings:xe})}const re=c.get("testPoint");if(re){const xe=new Map(re.layerSettings);xe.set("top",{color:de,size:ze}),xe.set("bottom",{color:De,size:Xe}),y.set("testPoint",{...re,layerSettings:xe})}const Se=c.get("component");if(Se){const xe=new Map(Se.layerSettings);xe.set("top",{color:jt,size:gn}),xe.set("bottom",{color:pe,size:ht}),y.set("component",{...Se,layerSettings:xe})}const U=c.get("componentConnection");return U&&y.set("componentConnection",{...U,settings:{color:Rt,size:en}}),y})},[W,k,J,ge,te,je,F,M,de,De,ze,Xe,jt,pe,gn,ht,Rt,en,Mn]),_t.useEffect(()=>{Mn(c=>{const y=Ns(c);if(y)if(z==="draw"&&rt==="trace"){const _=Wn||"top";_==="top"?(X(se),ie(N),Dt("trace",se,"top"),Nt("trace",N,"top")):(S(se),$(N),Dt("trace",se,"bottom"),Nt("trace",N,"bottom"));const G=new Map(c),re=new Map(y.layerSettings);return re.set(_,{color:se,size:N}),G.set(y.id,{...y,layerSettings:re,settings:{color:se,size:N}}),bi.current=se,Zn.current=N,G}else if(z==="draw"&&rt==="pad"){const _=Si||"top";_==="top"?(he(se),A(N),Dt("pad",se,"top"),Nt("pad",N,"top")):(be(se),B(N),Dt("pad",se,"bottom"),Nt("pad",N,"bottom"));const G=new Map(c),re=new Map(y.layerSettings);return re.set(_,{color:se,size:N}),G.set(y.id,{...y,layerSettings:re,settings:{color:se,size:N}}),bi.current=se,Zn.current=N,G}else if(z==="draw"&&rt==="testPoint"){const _=Pn||"top";_==="top"?(ke(se),tt(N),Dt("testPoint",se,"top"),Nt("testPoint",N,"top")):(Ge(se),Tt(N),Dt("testPoint",se,"bottom"),Nt("testPoint",N,"bottom"));const G=new Map(c),re=new Map(y.layerSettings);return re.set(_,{color:se,size:N}),G.set(y.id,{...y,layerSettings:re,settings:{color:se,size:N}}),bi.current=se,Zn.current=N,G}else if(z==="component"){const _=Yn||"top";_==="top"?(It(se),Qt(N),Dt("component",se,"top"),Nt("component",N,"top")):(Pt(se),nn(N),Dt("component",se,"bottom"),Nt("component",N,"bottom"));const G=new Map(c),re=new Map(y.layerSettings);return re.set(_,{color:se,size:N}),G.set(y.id,{...y,layerSettings:re,settings:{color:se,size:N}}),bi.current=se,Zn.current=N,G}else{const _=new Map(c);return _.set(y.id,{...y,settings:{color:se,size:N}}),bi.current=se,Zn.current=N,_}return c})},[se,N,z,rt,Wn,Si,Pn,Yn,Ns,Dt,Nt,Rf,X,S,ie,$,he,be,A,B,ke,Ge,tt,Tt,It,Pt,Qt,nn]),_t.useEffect(()=>{if(z==="draw"&&rt==="trace"){const c=Wn;Vt(c),Q(c==="top"?W:k),R(c==="top"?J:ge),c==="top"?($o(!0),Fa(!0)):(Yi(!0),uo(!0)),sc(!0)}else sc(!1)},[z,rt,Wn,W,k,J,ge]),_t.useEffect(()=>{if(z==="draw"&&rt==="pad"){const c=Si;Vt(c);const y=ei.get(c==="top"?"padTop":"padBottom");Q(y.color),R(y.size),c==="top"?($o(!0),Xr(!0)):(Yi(!0),Ko(!0)),Ac(!0)}else Ac(!1)},[z,rt,Si]),_t.useEffect(()=>{if(z==="draw"&&rt==="testPoint"){const c=Pn;Vt(c),Q(c==="top"?de:De),R(c==="top"?ze:Xe),c==="top"?($o(!0),gs(!0)):(Yi(!0),yr(!0)),Nc(!0)}else Nc(!1)},[z,rt,Pn,de,De,ze,Xe]),_t.useEffect(()=>{if(z==="component"){const c=Yn;Vt(c),Q(c==="top"?jt:pe),R(c==="top"?gn:ht),c==="top"?($o(!0),ts(!0)):(Yi(!0),ys(!0)),xs(!0)}else xs(!1)},[z,Yn,jt,pe,gn,ht]),_t.useEffect(()=>{if(z==="component"){const c=Yn;Vt(c),Q(c==="top"?jt:pe),R(c==="top"?gn:ht)}},[Yn,z,jt,pe,gn,ht]),_t.useEffect(()=>{Fi.toolInstanceId&&(Q(Fi.color),R(Fi.size))},[Fi.toolInstanceId,Fi.color,Fi.size,Q,R,z,rt]);const[Cr,Ri]=I.useState(void 0),[,qr]=I.useState([]),[,sl]=I.useState([]),[,Ji]=I.useState([]),[,ao]=I.useState([]),[va,Hr]=I.useState([]),[wa,Sa]=I.useState([]),[_s,Vs]=I.useState([]),[zl,Pl]=I.useState([]),ut=I.useRef(null),Sn=_t.useMemo(()=>{const c=ut.current;if(!c)return{x:0,y:0};const y=(c.width-10)/2,_=(c.height-10)/2;return os(y,_)},[ut.current?.width,ut.current?.height,xi,vt,os]),Fo=_t.useCallback(c=>{const y=ut.current;if(!y)return;const _=(y.width-10)/2,G=(y.height-10)/2,re=os(_,G),Se=typeof c=="function"?c(re):c,U=(_-Se.x)/vt,xe=(G-Se.y)/vt;di({x:U,y:xe})},[os,vt,di]),ll=Ev(),{selectedIds:Cn,setSelectedIds:wt,isSelecting:ec,setIsSelecting:Dl,selectedComponentIds:Hn,setSelectedComponentIds:Kt,selectedPowerIds:Dn,setSelectedPowerIds:bn,selectedGroundIds:ri,setSelectedGroundIds:tn}=ll,tc=yx(),{componentsTop:Ut,setComponentsTop:Mi,componentsBottom:Ft,setComponentsBottom:ki,componentEditor:Ea,setComponentEditor:so,connectingPin:Pr,setConnectingPin:qo,componentDialogPosition:Ho,setComponentDialogPosition:Ls,isDraggingDialog:cl,setIsDraggingDialog:Ws,dialogDragOffset:Ga,setDialogDragOffset:El,openComponentEditor:bc}=tc,ul=Ov(),{powerBuses:fn,setPowerBuses:as,groundBuses:vi,setGroundBuses:Ys,powerSymbols:w,setPowerSymbols:q,groundSymbols:ye,setGroundSymbols:Ae,powerEditor:He,setPowerEditor:lt}=ul,bt=Wv(),{saveSnapshot:Mt,undo:an,clearSnapshot:jn}=bt;_t.useEffect(()=>{z==="power"?(st(!1),fn.length>1?Pe&&fn.some(y=>y.id===Pe)?me(!1):(me(!0),Pe!==null&&Ye(null)):fn.length===1?(Ye(fn[0].id),me(!1)):(me(!0),Ye(null))):me(!1)},[z,fn]),_t.useEffect(()=>{z==="ground"?(me(!1),vi.length>1?Bt&&vi.some(y=>y.id===Bt)?st(!1):(st(!0),Bt!==null&&Ot(null)):vi.length===1?(Ot(vi[0].id),st(!1)):(st(!0),Ot(null))):st(!1)},[z,vi]),_t.useEffect(()=>{z!=="power"&&z!=="ground"&&(me(!1),st(!1))},[z]);const Jn=qv(),{areImagesLocked:Fn,setAreImagesLocked:tr,areViasLocked:wi,setAreViasLocked:qi,arePadsLocked:Hi,setArePadsLocked:Tr,areTestPointsLocked:gr,setAreTestPointsLocked:zs,areTracesLocked:ur,setAreTracesLocked:Ra,areComponentsLocked:Lo,setAreComponentsLocked:Ps,areGroundNodesLocked:Dr,setAreGroundNodesLocked:oa,arePowerNodesLocked:Qi,setArePowerNodesLocked:Ma}=Jn,zo=Hv(),{openMenu:Rl,setOpenMenu:ss,setSizeDialog:fl,setSetSizeDialog:Xa,autoSaveDialog:Vo,setAutoSaveDialog:aa,autoSavePromptDialog:dl,setAutoSavePromptDialog:Ca,debugDialog:Po,setDebugDialog:Wo,errorDialog:Ds,setErrorDialog:Gs,newProjectDialog:$a,setNewProjectDialog:Ba,openProjectDialog:sa,setOpenProjectDialog:lo,newProjectSetupDialog:pi,setNewProjectSetupDialog:la,saveAsDialog:Bi,setSaveAsDialog:ls,showColorPicker:Ml,setShowColorPicker:fr,transformImagesDialogVisible:Qc,setTransformImagesDialogVisible:cs}=zo,Xs=Vv(),[Yo,ca]=I.useState(!1),[Bl,pl]=I.useState(!1),[Ta,co]=I.useState(!1),[us,$s]=I.useState(null),[Ka,Ks]=I.useState(null),[ua,Za]=I.useState(null),[Vi,Li]=I.useState(null),[dr,Jr]=I.useState(null),{autoSaveEnabled:jr,setAutoSaveEnabled:Vr,autoSaveInterval:Oa,setAutoSaveInterval:Ia,autoSaveDirHandle:Zs,setAutoSaveDirHandle:hl,autoSaveBaseName:gl,setAutoSaveBaseName:fs,currentProjectFilePath:vc,setCurrentProjectFilePath:Do,projectDirHandle:zi,setProjectDirHandle:Qr,projectName:Wr,setProjectName:Er,autoSaveFileHistory:nc,setAutoSaveFileHistory:Js,currentFileIndex:wc,setCurrentFileIndex:Ol,autoSaveIntervalRef:Wi,hasChangesSinceLastAutoSaveRef:Yr,prevAutoSaveEnabledRef:ic}=Xs,Go=I.useRef(null),Eo=I.useRef(null),Sc=I.useRef(null),mo=I.useRef(null),Cc=I.useRef(null),fa=I.useRef(null),Tc=I.useRef(null),[ds,ps]=I.useState(!1),Es=I.useRef(null),yl=I.useRef(null),[ml,rc]=I.useState(!1),[Ro,Rs]=I.useState({}),[Il,Ja]=I.useState(!1),xo=I.useRef(null),[ja,Qa]=I.useState(!1),[Ua,Mo]=I.useState(null),[ka,Bo]=I.useState(null),[xl,Lu]=I.useState({width:960,height:600}),Bc=I.useRef(null),zu=I.useRef(null),Xo=I.useRef(null),nr=I.useRef(null),hi=I.useRef(null),da=I.useRef(null),Rr=I.useRef(null),hs=I.useRef(null),[Aa,$o]=I.useState(!0),[pa,Yi]=I.useState(!0),[kr,es]=I.useState(!0),[eo,Fa]=I.useState(!0),[Mr,uo]=I.useState(!0),[Gr,Xr]=I.useState(!0),[fo,Ko]=I.useState(!0),[bo,gs]=I.useState(!0),[vo,yr]=I.useState(!0),[Zo,ts]=I.useState(!0),[qa,ys]=I.useState(!0),[ms,Ai]=I.useState(!0),kn=w,_n=ye,[Oc,Ul]=I.useState(!1),[d,g]=I.useState(null),[j,L]=I.useState(!1),[Y,Z]=I.useState(void 0),[ne,le]=I.useState(!1),[fe,me]=I.useState(!1),[Pe,Ye]=I.useState(null),[ve,Me]=I.useState(new Set),Fe=I.useCallback(()=>{wt(new Set),Kt(new Set),bn(new Set),tn(new Set),Me(new Set)},[wt,Kt,bn,tn,Me]),[at,We]=I.useState(!1),[ot,pt]=I.useState(null),[St,st]=I.useState(!1),[Bt,Ot]=I.useState(null),[An,Yt]=I.useState(!0),[ti,Ki]=I.useState(!1),[Qn,qt]=I.useState(!1),zt=I.useRef({}),[Ci,Zt]=I.useState(!0),[En,gi]=I.useState(!0),[Br,wo]=I.useState(!0),[yi,Ar]=I.useState(null),[Oo,to]=I.useState(!1),[ni,Pi]=I.useState(null),[mr,ci]=I.useState(!1),[Nr,pr]=I.useState(null),[Ni,$r]=I.useState(!1),[Oi,no]=I.useState(null),[_r,Gi]=I.useState([]),[Ti,So]=I.useState(!1),[sr,dn]=I.useState(null),[vn,_i]=I.useState(!1),[Jo,Ha]=I.useState(null),[Na,Kr]=I.useState(null),[Fl,Ms]=I.useState(!1);_t.useEffect(()=>{fn.length===0&&as([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[fn.length,as]);const ns=I.useCallback((c,y)=>{const _=kn.find(re=>re.pointId===c);if(_){const re=y.find(U=>U.id===_.powerBusId);return`Via (${re?re.voltage:_.type||"Power Node"})`}const G=_n.find(re=>re.pointId===c);return G?`Via (${G.type||"Ground"})`:"Via"},[kn,_n]),ji=I.useCallback((c,y)=>{const _=kn.find(re=>re.pointId===c);if(_){const re=y.find(U=>U.id===_.powerBusId);return`Pad (${re?re.voltage:_.type||"Power Node"})`}const G=_n.find(re=>re.pointId===c);return G?`Pad (${G.type||"Ground"})`:"Pad"},[kn,_n]),Bs=I.useCallback((c,y)=>{const _=kn.find(re=>re.pointId===c);if(_){const re=y.find(U=>U.id===_.powerBusId);return`Test Point (${re?re.voltage:_.type||"Power Node"})`}const G=_n.find(re=>re.pointId===c);return G?`Test Point (${G.type||"Ground"})`:"Test Point"},[kn,_n]),Pu=I.useCallback(()=>{const c=ct.filter(y=>y.type==="via").map(y=>y.id);wt(new Set(c)),Kt(new Set),bn(new Set),tn(new Set),Me(new Set)},[ct,wt,Kt,bn,tn]),eu=I.useCallback(()=>{const c=ct.filter(y=>y.type==="trace").map(y=>y.id);wt(new Set(c)),Kt(new Set),bn(new Set),tn(new Set),Me(new Set)},[ct,wt,Kt,bn,tn]),bl=I.useCallback(()=>{const c=ct.filter(y=>y.type==="pad").map(y=>y.id);wt(new Set(c)),Kt(new Set),bn(new Set),tn(new Set),Me(new Set)},[ct,wt,Kt,bn,tn]),Yf=I.useCallback(()=>{const c=[...Ut,...Ft].map(y=>y.id);Kt(new Set(c)),wt(new Set),bn(new Set),tn(new Set),Me(new Set)},[Ut,Ft,Kt,wt,bn,tn]),Du=I.useCallback(()=>{const c=[...Ut,...Ft].filter(y=>{const _=y.pinConnections||[];return!(_.length>0&&_.length===y.pinCount&&_.every(re=>re&&re.trim()!==""))}).map(y=>y.id);Kt(new Set(c)),wt(new Set),bn(new Set),tn(new Set),Me(new Set),Wo({visible:!0,text:""})},[Ut,Ft,Kt,wt,bn,tn,Wo]),Eu=I.useCallback(()=>{const c=new Set;let y=0;for(const _ of[...Ut,...Ft]){const G=_.pinConnections||[];for(const re of G)if(re&&re.trim()!==""){const Se=parseInt(re.trim(),10);if(!isNaN(Se)&&Se>0){const U=`${_.id}:${Se}`;c.add(U),y++}}}if(console.log(`Component connections: ${y} connection lines found`),c.size===0){console.log("No component connections found - components may not have pins connected"),alert("No component connections found. Please connect component pins to vias or pads first.");return}Me(c),wt(new Set),Kt(new Set),bn(new Set),tn(new Set),console.log(`Selected ${c.size} component connection lines`)},[Ut,Ft,wt,Kt,bn,tn]),Ic=I.useCallback(()=>{Ta?(Sr(!1),co(!1),x(0)):(Sr(!0),co(!0),x(100))},[Ta,Sr,co,x]),Co=I.useCallback(c=>{cr(y=>y0(y,c))},[cr]),er=I.useCallback((c,y)=>{const _=ut.current;if(!_)return;const G=_.width-10,re=_.height-10,Se=G/2,U=re/2,xe=Se-c*vt,ee=U-y*vt;Fo({x:xe,y:ee})},[vt,Fo]),Uc=I.useCallback((c,y,_)=>{er(y,_),Kt(new Set([c])),wt(new Set),bn(new Set),tn(new Set),Me(new Set)},[er,Kt,wt,bn,tn]),ql=I.useCallback((c,y,_)=>{er(y,_),wt(new Set([c])),Kt(new Set),bn(new Set),tn(new Set),Me(new Set)},[er,wt,Kt,bn,tn]),jc=I.useCallback((c,y,_)=>{er(y,_),bn(new Set([c])),wt(new Set),Kt(new Set),tn(new Set),Me(new Set)},[er,bn,wt,Kt,tn]),oc=I.useCallback((c,y,_)=>{er(y,_),tn(new Set([c])),wt(new Set),Kt(new Set),bn(new Set),Me(new Set)},[er,tn,wt,Kt,bn]),Qs=_t.useMemo(()=>{const c=new Set(kn.map(_=>_.powerBusId).filter(_=>typeof _=="string"&&_.length>0)),y=fn.filter(_=>c.has(_.id)).map(_=>_.name);return Array.from(new Set(y)).sort()},[kn,fn]),tu=_t.useMemo(()=>{const c=new Set(_n.map(_=>_.groundBusId).filter(_=>typeof _=="string"&&_.length>0)),y=vi.filter(_=>c.has(_.id)).map(_=>_.name);return Array.from(new Set(y)).sort()},[_n,vi]),kc=I.useCallback(()=>{const c=kn.map(y=>y.id);bn(new Set(c)),wt(new Set),Kt(new Set),tn(new Set),Me(new Set)},[kn,bn,wt,Kt,tn]),nu=I.useCallback(()=>{const c=_n.map(y=>y.id);tn(new Set(c)),wt(new Set),Kt(new Set),bn(new Set),Me(new Set)},[_n,tn,wt,Kt,bn]),iu=I.useCallback(c=>{const y=fn.filter(G=>G.name===c).map(G=>G.id);if(y.length===0)return;const _=kn.filter(G=>G.powerBusId&&y.includes(G.powerBusId)).map(G=>G.id);bn(new Set(_)),wt(new Set),Kt(new Set),tn(new Set)},[fn,kn,bn,wt,Kt,tn]),vl=I.useCallback(c=>{const y=vi.filter(G=>G.name===c).map(G=>G.id);if(y.length===0)return;const _=_n.filter(G=>G.groundBusId&&y.includes(G.groundBusId)).map(G=>G.id);tn(new Set(_)),wt(new Set),Kt(new Set),bn(new Set)},[vi,_n,tn,wt,Kt,bn]);I.useCallback(c=>{switch(c.componentType){case"Resistor":case"ResistorNetwork":case"Thermistor":case"VariableResistor":if("resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit)return`${c.resistance} ${c.resistanceUnit}`;break;case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":if("capacitance"in c&&c.capacitance&&"capacitanceUnit"in c&&c.capacitanceUnit)return`${c.capacitance} ${c.capacitanceUnit}`;break;case"Inductor":if("inductance"in c&&c.inductance&&"inductanceUnit"in c&&c.inductanceUnit)return`${c.inductance} ${c.inductanceUnit}`;break;case"Battery":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"Diode":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"Fuse":if("current"in c&&c.current&&"currentUnit"in c&&c.currentUnit)return`${c.current} ${c.currentUnit}`;break;case"FerriteBead":if("impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit)return`${c.impedance} ${c.impedanceUnit}`;break;case"Relay":if("coilVoltage"in c&&c.coilVoltage&&"coilVoltageUnit"in c&&c.coilVoltageUnit)return`${c.coilVoltage} ${c.coilVoltageUnit}`;break;case"Speaker":if("impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit)return`${c.impedance} ${c.impedanceUnit}`;break;case"Motor":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"PowerSupply":if("outputVoltage"in c&&c.outputVoltage&&"outputVoltageUnit"in c&&c.outputVoltageUnit)return`${c.outputVoltage} ${c.outputVoltageUnit}`;break;case"Transistor":if("partNumber"in c&&c.partNumber)return c.partNumber;break;case"IntegratedCircuit":if("partNumber"in c&&c.partNumber)return c.partNumber;break}return null},[]);const Ru=I.useCallback(c=>{const y=[];switch(c.componentType){case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":"capacitance"in c&&c.capacitance&&"capacitanceUnit"in c&&c.capacitanceUnit&&y.push(`Capacitance: ${c.capacitance} ${c.capacitanceUnit}`),"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"dielectric"in c&&c.dielectric&&y.push(`Dielectric: ${c.dielectric}`);break;case"Resistor":case"ResistorNetwork":case"Thermistor":"resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit&&y.push(`Resistance: ${c.resistance} ${c.resistanceUnit}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"VariableResistor":"resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit&&y.push(`Resistance: ${c.resistance} ${c.resistanceUnit}`),"vrType"in c&&c.vrType&&y.push(`Type: ${c.vrType}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`),"taper"in c&&c.taper&&y.push(`Taper: ${c.taper}`);break;case"Inductor":"inductance"in c&&c.inductance&&"inductanceUnit"in c&&c.inductanceUnit&&y.push(`Inductance: ${c.inductance} ${c.inductanceUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"Battery":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"capacity"in c&&c.capacity&&"capacityUnit"in c&&c.capacityUnit&&y.push(`Capacity: ${c.capacity} ${c.capacityUnit}`);break;case"Diode":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`);break;case"Fuse":"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`),"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`);break;case"FerriteBead":"impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit&&y.push(`Impedance: ${c.impedance} ${c.impedanceUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`);break;case"Relay":"coilVoltage"in c&&c.coilVoltage&&"coilVoltageUnit"in c&&c.coilVoltageUnit&&y.push(`Coil Voltage: ${c.coilVoltage} ${c.coilVoltageUnit}`),"contactRating"in c&&c.contactRating&&y.push(`Contact Rating: ${c.contactRating}`);break;case"Speaker":"impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit&&y.push(`Impedance: ${c.impedance} ${c.impedanceUnit}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`);break;case"Motor":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"speed"in c&&c.speed&&"speedUnit"in c&&c.speedUnit&&y.push(`Speed: ${c.speed} ${c.speedUnit}`);break;case"PowerSupply":"outputVoltage"in c&&c.outputVoltage&&"outputVoltageUnit"in c&&c.outputVoltageUnit&&y.push(`Output Voltage: ${c.outputVoltage} ${c.outputVoltageUnit}`),"outputCurrent"in c&&c.outputCurrent&&"outputCurrentUnit"in c&&c.outputCurrentUnit&&y.push(`Output Current: ${c.outputCurrent} ${c.outputCurrentUnit}`);break;case"Transistor":"partNumber"in c&&c.partNumber&&y.push(`Part Number: ${c.partNumber}`),"transistorType"in c&&c.transistorType&&y.push(`Type: ${c.transistorType}`);break;case"Crystal":"frequency"in c&&c.frequency&&y.push(`Frequency: ${c.frequency}`),"loadCapacitance"in c&&c.loadCapacitance&&y.push(`Load Capacitance: ${c.loadCapacitance}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"VacuumTube":"tubeType"in c&&c.tubeType&&y.push(`Tube Type: ${c.tubeType}`),"partNumber"in c&&c.partNumber&&y.push(`Part Number: ${c.partNumber}`);break}return y},[]),[ac,sc]=I.useState(!1),Hl=I.useRef(null),[Os,Ac]=I.useState(!1),[ru,Nc]=I.useState(!1),lc=I.useRef(null),_c=I.useRef(null),el=I.useRef(null),cc=I.useRef(null),[Fc,xs]=I.useState(!1),[io,Is]=I.useState(null),[ou,au]=I.useState(null),[Or,sf]=I.useState(null),Vl=_t.useRef(null),wl=I.useRef(null),Mu=I.useRef(null),su=I.useRef(null),Kp=I.useRef(null),lf=I.useRef(null),cf=I.useRef(null),[Bd,Od]=I.useState(null),[Sl,uf]=I.useState(!1),[qc,Gf]=I.useState(null),[Wl,ff]=I.useState(null),Xf=I.useCallback(async(c,y)=>{if(!y)throw new Error("No project directory available. Please create or open a project before loading images. The project directory is needed to store image files.");try{let _;try{_=await y.getDirectoryHandle("images",{create:!0})}catch(Se){throw new Error(`Failed to create images directory in project folder. This may be due to insufficient permissions. Please ensure you have write access to the project directory. Error details: ${Se.message}`)}const G=c.name,re=`images/${G}`;try{const U=await(await _.getFileHandle(G,{create:!0})).createWritable();return await U.write(c),await U.close(),console.log(`Image copied to project directory: ${re}`),re}catch(Se){throw new Error(`Failed to copy image file "${G}" to project images directory. The file may be locked by another application, or there may be insufficient disk space. Please try again or check your disk space. Error details: ${Se.message}`)}}catch(_){throw _ instanceof Error&&_.message.includes("No project directory")||_ instanceof Error&&_.message.includes("Failed to")?_:new Error(`An unexpected error occurred while copying the image to the project directory. This may be due to file system permissions or disk space issues. Please try again. Technical details: ${_.message}`)}},[]),Id=I.useCallback(async(c,y)=>{try{const _=c.name.toLowerCase(),re=[".png",".jpg",".jpeg"].some(Oe=>_.endsWith(Oe)),U=["image/png","image/jpeg","image/jpg"].includes(c.type);if(!re&&!U){alert(`Error: Unsupported image format.

The software only accepts PNG and JPEG image files.

File selected: ${c.name}
File type: ${c.type||"unknown"}

Please select a .png, .jpg, or .jpeg image file.`);return}let xe;if(zi)try{xe=await Xf(c,zi)}catch(Oe){const we=Oe instanceof Error?Oe.message:"Unknown error occurred while copying image to project directory.";alert(`Error: ${we}

The image could not be loaded. Please ensure you have a project open and have write permissions to the project directory.`);return}else{if(!confirm(`Warning: No project directory is currently open. The image will be loaded, but you must create or open a project and save it before the image will be stored in the project directory.

Do you want to continue loading the ${y==="top"?"top":"bottom"} image?`))return;xe=c.name}const ee=await createImageBitmap(c),ue=URL.createObjectURL(c),Te=ut.current;let Ce=0,Ne=0;Te&&(Ce=xi.x,Ne=xi.y);const Re={url:ue,name:c.name,width:ee.width,height:ee.height,filePath:xe,x:Ce,y:Ne,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:ee};y==="top"?s(Re):f(Re)}catch(_){const G=_ instanceof Error?_.message:"Unknown error occurred while loading the image.";alert(`Error: Failed to load image file "${c.name}".

${G}

Please ensure the file is a valid image format (PNG, JPEG, etc.) and is not corrupted.`),console.error("Failed to load image",_)}},[xi,vt,zi,Xf]),$f=I.useCallback(c=>{c.stopPropagation(),c.preventDefault();const y=ut.current;if(!y)return;document.activeElement!==y&&y.focus();const _=y.getBoundingClientRect(),G=y.width/_.width,re=y.height/_.height,Se=c.nativeEvent.offsetX,U=c.nativeEvent.offsetY,xe=typeof Se=="number"?Se:c.clientX-_.left,ee=typeof U=="number"?U:c.clientY-_.top,ue=xe*G,Te=ee*re,Ce=ue-5,Ne=Te-5,Re=Cd(Ce,Ne,Sn,vt,Xn,$i),Oe=Re.x,we=Re.y;if(z==="center"){Ja(!0),xo.current&&clearTimeout(xo.current),xo.current=setTimeout(()=>{Ja(!1),V("select"),Ri(void 0)},2e3);return}if(z==="select"){if(Pr){let Ue=1/0,et=null,nt=null;const Ct=Math.max(6/vt,4),pn=[...Ut,...Ft].find(Bn=>Bn.id===Pr.componentId)?.layer||"top";for(const Bn of ct)if((Bn.type==="via"||Bn.type==="pad")&&Bn.points.length>0){if(Bn.type==="pad"&&(Bn.layer||"top")!==pn)continue;const sn=Bn.points[0],On=Math.max(1,Bn.size/2),$n=Math.hypot(sn.x-Oe,sn.y-we),hn=Math.max(On,Ct);$n<=hn&&$n<Ue&&(Ue=$n,et=sn.id??null,nt=Bn)}if(nt?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${nt.id}`),console.log(`  Point ID: ${et}`),console.log(`  Point coordinates: x=${nt.points[0].x.toFixed(2)}, y=${nt.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${Oe.toFixed(2)}, y=${we.toFixed(2)}`),console.log(`  Distance: ${Ue.toFixed(2)}`),console.log(`  Via size: ${nt.size}, radius: ${Math.max(1,nt.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${Oe.toFixed(2)}, y=${we.toFixed(2)}`),console.log(`  Hit tolerance: ${Ct.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${ct.filter(Bn=>Bn.type==="via").length}`)),et!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${et} (type: ${typeof et})`);const Bn=String(et),sn=Pr.pinIndex,On=Pr.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${sn} (Pin ${sn+1}) of component ${On} to point ID ${Bn}`);const $n=Ut.find(At=>At.id===On),hn=Ft.find(At=>At.id===On);$n?(console.log("Component found in TOP layer"),Mi(At=>{const ln=At.find(Gn=>Gn.id===On);if(!ln)return console.error(`Component ${On} not found in TOP layer during update!`),At;console.log("BEFORE update: pinConnections =",ln.pinConnections);const ir=ln.pinConnections||[],Ir=ir.length>0?[...ir]:new Array(ln.pinCount).fill("");let rr;if(Ir.length!==ln.pinCount){rr=new Array(ln.pinCount).fill("");for(let Gn=0;Gn<Math.min(Ir.length,ln.pinCount);Gn++)rr[Gn]=Ir[Gn]||""}else rr=[...Ir];rr[sn]=Bn,console.log(`Updating pin ${sn} with value: ${Bn}`),console.log("New pinConnections array:",rr);const To=At.map(Gn=>Gn.id===On?{...Gn,pinConnections:rr}:Gn),ro=To.find(Gn=>Gn.id===On);return console.log("AFTER update: pinConnections =",ro?.pinConnections),console.log(`Pin ${sn} value: ${ro?.pinConnections[sn]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),To})):hn?(console.log("Component found in BOTTOM layer"),ki(At=>{const ln=At.find(Gn=>Gn.id===On);if(!ln)return console.error(`Component ${On} not found in BOTTOM layer during update!`),At;console.log("BEFORE update: pinConnections =",ln.pinConnections);const ir=ln.pinConnections||[],Ir=ir.length>0?[...ir]:new Array(ln.pinCount).fill("");let rr;if(Ir.length!==ln.pinCount){rr=new Array(ln.pinCount).fill("");for(let Gn=0;Gn<Math.min(Ir.length,ln.pinCount);Gn++)rr[Gn]=Ir[Gn]||""}else rr=[...Ir];rr[sn]=Bn,console.log(`Updating pin ${sn} with value: ${Bn}`),console.log("New pinConnections array:",rr);const To=At.map(Gn=>Gn.id===On?{...Gn,pinConnections:rr}:Gn),ro=To.find(Gn=>Gn.id===On);return console.log("AFTER update: pinConnections =",ro?.pinConnections),console.log(`Pin ${sn} value: ${ro?.pinConnections[sn]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),To})):(console.error(`Component ${On} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",Ut.map(At=>At.id)),console.log("Available BOTTOM components:",Ft.map(At=>At.id))),setTimeout(()=>{qo(null)},0);return}else qo(null)}const Ee=10,_e=(()=>{for(const Ue of Ut)if(Oe>=Ue.x-Ee&&Oe<=Ue.x+Ee&&we>=Ue.y-Ee&&we<=Ue.y+Ee)return{layer:"top",comp:Ue};for(const Ue of Ft)if(Oe>=Ue.x-Ee&&Oe<=Ue.x+Ee&&we>=Ue.y-Ee&&we<=Ue.y+Ee)return{layer:"bottom",comp:Ue};return null})();if(_e){const{comp:Ue}=_e;c.shiftKey?Kt(et=>{const nt=new Set(et);return nt.has(Ue.id)?nt.delete(Ue.id):nt.add(Ue.id),nt}):(Kt(new Set([Ue.id])),wt(new Set),bn(new Set),tn(new Set));return}const $e=Math.max(6/vt,4);let ft=null;for(const Ue of kn){const et=Math.max(6,Ue.size/2),nt=et*.8,Ct=et+nt,Et=Math.hypot(Ue.x-Oe,Ue.y-we),pn=Math.abs(Oe-Ue.x)<=$e&&Math.abs(we-Ue.y)<=Ct,Bn=Math.abs(we-Ue.y)<=$e&&Math.abs(Oe-Ue.x)<=Ct;if(Et<=Math.max(et,$e)||pn||Bn){ft=Ue;break}}if(ft){c.shiftKey?bn(Ue=>{const et=new Set(Ue);return et.has(ft.id)?et.delete(ft.id):et.add(ft.id),et}):(bn(new Set([ft.id])),wt(new Set),Kt(new Set),tn(new Set));return}let gt=null;for(const Ue of _n){const et=Math.max(6,(Ue.size||18)/2),nt=et*.8,Ct=et+nt,Et=Math.hypot(Ue.x-Oe,Ue.y-we),pn=Math.abs(Oe-Ue.x)<=$e&&Math.abs(we-Ue.y)<=Ct,Bn=Math.abs(we-Ue.y)<=$e&&Math.abs(Oe-Ue.x)<=Ct;if(Et<=Math.max(et,$e)||pn||Bn){gt=Ue;break}}if(gt){c.shiftKey?tn(Ue=>{const et=new Set(Ue);return et.has(gt.id)?et.delete(gt.id):et.add(gt.id),et}):(tn(new Set([gt.id])),wt(new Set),Kt(new Set),bn(new Set));return}const Je=Math.max(6/vt,4/vt),Be=Math.max(Je,.5);let qe=null;for(const Ue of ct)if((Ue.type==="via"||Ue.type==="pad"||Ue.type==="testPoint")&&Ue.points.length>0){let et=!1;if(Ue.type==="via"?et=kr:Ue.type==="pad"?et=(Ue.layer||"top")==="top"?Gr:fo:Ue.type==="testPoint"&&(et=(Ue.layer||"top")==="top"?bo:vo),!et)continue;const nt=Ue.points[0],Ct=Math.max(1,Ue.size/2);if(Math.hypot(nt.x-Oe,nt.y-we)<=Math.max(Ct,Be)){qe=Ue;break}}if(qe){c.shiftKey?wt(Ue=>{const et=new Set(Ue);return et.has(qe.id)?et.delete(qe.id):et.add(qe.id),et}):(wt(new Set([qe.id])),Kt(new Set),bn(new Set),tn(new Set),Me(new Set));return}c.shiftKey||(wt(new Set),Kt(new Set),bn(new Set),tn(new Set),Me(new Set)),Dl(!0),Gf({x:Oe,y:we,shiftKey:c.shiftKey}),ff({x:Oe,y:we,width:0,height:0});return}else if(z==="magnify"){const Ee=c.shiftKey?.5:2,_e=Math.max(.25,Math.min(8,vt*Ee));Pa(Oe,we),ii(_e);return}else if(z==="pan"){const Ee={topImageX:o?.x??0,topImageY:o?.y??0,bottomImageX:u?.x??0,bottomImageY:u?.y??0,componentsTop:Object.fromEntries(Ut.map(_e=>[_e.id,{x:_e.x,y:_e.y}])),componentsBottom:Object.fromEntries(Ft.map(_e=>[_e.id,{x:_e.x,y:_e.y}])),powerSymbols:Object.fromEntries(w.map(_e=>[_e.id,{x:_e.x,y:_e.y}])),groundSymbols:Object.fromEntries(ye.map(_e=>[_e.id,{x:_e.x,y:_e.y}])),drawingStrokes:ct.map(_e=>({points:_e.points.map($e=>({x:$e.x,y:$e.y}))})),vias:va.map(_e=>({x:_e.x,y:_e.y})),pads:wa.map(_e=>({x:_e.x,y:_e.y}))};Es.current={startCX:Ce,startCY:Ne,panX:Sn.x,panY:Sn.y,objectStartPositions:Ee},yl.current={startClientX:c.clientX,startClientY:c.clientY,panX:Sn.x,panY:Sn.y,objectStartPositions:Ee},ps(!0);return}else if(z==="draw"){const Ee=(ft,gt)=>{let xt=1/0,Je=null;const Be=10/vt,qe=vt>20?Math.max(Be,1e-4):vt>10?Math.max(Be,.001):Math.max(Be,.01);for(const nt of ct)if(nt.type==="via"){const Ct=nt.points[0],Et=Math.hypot(Ct.x-ft,Ct.y-gt);Et<=qe&&Et<xt&&(xt=Et,Je=Ct)}else if(nt.type==="pad"){const Ct=nt.points[0],Et=Math.hypot(Ct.x-ft,Ct.y-gt);Et<=qe&&Et<xt&&(xt=Et,Je=Ct)}for(const nt of kn)if(nt.pointId!==void 0){const Ct=Math.hypot(nt.x-ft,nt.y-gt);Ct<=qe&&Ct<xt&&(xt=Ct,Je={x:nt.x,y:nt.y,id:nt.pointId})}for(const nt of _n)if(nt.pointId!==void 0){const Ct=Math.hypot(nt.x-ft,nt.y-gt);Ct<=qe&&Ct<xt&&(xt=Ct,Je={x:nt.x,y:nt.y,id:nt.pointId})}const et=Zi(Je??{x:ft,y:gt});return{x:et.x,y:et.y,nodeId:Je?.id}};if(rt==="via"){const ft=ei.get("via"),gt=ft.color,xt=ft.size,Lt=Sl?{x:Zi({x:Oe,y:we}).x,y:Zi({x:Oe,y:we}).y}:((nt,Ct)=>{let Et=1/0,pn=null;const sn=10/vt,On=vt>10?Math.max(sn,.001):Math.max(sn,.01);for(const At of ct)if(At.type==="via"||At.type==="pad"){const ln=At.points[0],ir=Math.hypot(ln.x-nt,ln.y-Ct);ir<=On&&ir<Et&&(Et=ir,pn=ln)}for(const At of kn)if(At.pointId!==void 0){const ln=Math.hypot(At.x-nt,At.y-Ct);ln<=On&&ln<Et&&(Et=ln,pn={x:At.x,y:At.y,id:At.pointId})}for(const At of _n)if(At.pointId!==void 0){const ln=Math.hypot(At.x-nt,At.y-Ct);ln<=On&&ln<Et&&(Et=ln,pn={x:At.x,y:At.y,id:At.pointId})}const hn=Zi(pn??{x:nt,y:Ct});return{x:hn.x,y:hn.y,nodeId:pn?.id}})(Oe,we),Be=Lt.nodeId??pc(),qe=ns(Be,fn),Ue={id:Be,x:Lt.x,y:Lt.y};Mt(ct,Ut,Ft,w,ye);const et={id:`${Date.now()}-via`,points:[Ue],color:gt,size:xt,layer:Ht,type:"via",viaType:qe};kt(nt=>[...nt,et]),Ht==="top"?qr(nt=>[...nt,et.id]):sl(nt=>[...nt,et.id]);return}if(rt==="pad"){if(!Si)return;const gt=Sl?{x:Zi({x:Oe,y:we}).x,y:Zi({x:Oe,y:we}).y}:((et,nt)=>{let Ct=1/0,Et=null;const Bn=10/vt,sn=vt>10?Math.max(Bn,.001):Math.max(Bn,.01);for(const hn of ct)if(hn.type==="via"||hn.type==="pad"||hn.type==="testPoint"){const At=hn.points[0],ln=Math.hypot(At.x-et,At.y-nt);ln<=sn&&ln<Ct&&(Ct=ln,Et=At)}for(const hn of kn)if(hn.pointId!==void 0){const At=Math.hypot(hn.x-et,hn.y-nt);At<=sn&&At<Ct&&(Ct=At,Et={x:hn.x,y:hn.y,id:hn.pointId})}for(const hn of _n)if(hn.pointId!==void 0){const At=Math.hypot(hn.x-et,hn.y-nt);At<=sn&&At<Ct&&(Ct=At,Et={x:hn.x,y:hn.y,id:hn.pointId})}const $n=Zi(Et??{x:et,y:nt});return{x:$n.x,y:$n.y,nodeId:Et?.id}})(Oe,we),xt=gt.nodeId??pc(),Je=ji(xt,fn),Lt=se||(Si==="top"?te:je),Be=N||(Si==="top"?F:M),qe={id:xt,x:gt.x,y:gt.y};Mt(ct,Ut,Ft,w,ye);const Ue={id:`${Date.now()}-pad`,points:[qe],color:Lt,size:Be,layer:Si,type:"pad",padType:Je};kt(et=>[...et,Ue]);return}if(rt==="testPoint"){if(!Pn)return;const gt=Sl?{x:Zi({x:Oe,y:we}).x,y:Zi({x:Oe,y:we}).y}:((nt,Ct)=>{let Et=1/0,pn=null;const Bn=15;for(const $n of ct)if($n.type==="via"||$n.type==="pad"||$n.type==="testPoint"){const hn=$n.points[0],At=Math.hypot(hn.x-nt,hn.y-Ct);At<=Bn&&At<Et&&(Et=At,pn=hn)}for(const $n of kn)if($n.pointId!==void 0){const hn=Math.hypot($n.x-nt,$n.y-Ct);hn<=Bn&&hn<Et&&(Et=hn,pn={x:$n.x,y:$n.y,id:$n.pointId})}for(const $n of _n)if($n.pointId!==void 0){const hn=Math.hypot($n.x-nt,$n.y-Ct);hn<=Bn&&hn<Et&&(Et=hn,pn={x:$n.x,y:$n.y,id:$n.pointId})}const On=Zi(pn??{x:nt,y:Ct});return{x:On.x,y:On.y,nodeId:pn?.id}})(Oe,we),xt=gt.nodeId??pc(),Je=Bs(xt,fn),Lt=Je.includes("Power")?"power":Je.includes("Ground")?"ground":Je.includes("Signal")?"signal":"unknown",Be=Zi({x:gt.x,y:gt.y}),qe=se||(Pn==="top"?de:De),Ue=N||(Pn==="top"?ze:Xe);Mt(ct,Ut,Ft,w,ye);const et={id:`${Date.now()}-testPoint`,points:[{id:xt,x:Be.x,y:Be.y}],color:qe,size:Ue,layer:Pn,type:"testPoint",testPointType:Lt};kt(nt=>[...nt,et]);return}if(Un.current)return;const _e=rt==="trace"&&!Sl?Ee(Oe,we):{x:Zi({x:Oe,y:we}).x,y:Zi({x:Oe,y:we}).y},$e=_e.nodeId!==void 0?{id:_e.nodeId,x:_e.x,y:_e.y}:{x:_e.x,y:_e.y};Nn(ft=>ft.length===0?[$e]:[...ft,$e]),Xi.current=Date.now(),xn(null),Gt(!1),ma(!1)}else if(z==="erase"){if(ct.some(_e=>_e.layer===Ht&&(_e.type==="via"&&wi||_e.type==="pad"&&Hi||_e.type==="testPoint"&&gr||_e.type==="trace"&&ur))){const _e=[];wi&&ct.some($e=>$e.layer===Ht&&$e.type==="via")&&_e.push("vias"),Hi&&ct.some($e=>$e.layer===Ht&&$e.type==="pad")&&_e.push("pads"),gr&&ct.some($e=>$e.layer===Ht&&$e.type==="testPoint")&&_e.push("test points"),ur&&ct.some($e=>$e.layer===Ht&&$e.type==="trace")&&_e.push("traces"),_e.length>0&&alert(`Cannot erase: ${_e.join(", ")} are locked on the ${Ht} layer. Unlock them to erase.`)}Gt(!0),Nn([{id:pc(),x:Oe,y:we}]),console.log("Starting erase at:",Oe,we,"selectedDrawingLayer:",Ht,"total strokes:",ct.length)}else if(z==="transform"&&Wt){if(Fn){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}go(!0),Xt({x:Oe,y:we})}else if(z==="component"){if(!io)return;const Ee=Zi({x:Oe,y:we}),$e=(Yn||"top")==="top"?"componentTop":"componentBottom",ft=ei.get($e),gt=ft.color,xt=ft.size,Je=[...Ut,...Ft];let Lt;if(ti?Lt=Mp():Lt={...zt.current},!Yn)return;let Be;try{if(Or?.componentDefinition){const qe=Or.componentDefinition,Ue=`${qe.category}:${qe.subcategory}:${qe.type}`,et=px(Ue);et?Be=cx({definition:et,layer:Yn,x:Ee.x,y:Ee.y,color:gt,size:xt,existingComponents:Je,counters:An?Lt:{}}):Be=Wh(io,Yn,Ee.x,Ee.y,gt,xt,Je,Lt,An,Or||void 0)}else Be=Wh(io,Yn,Ee.x,Ee.y,gt,xt,Je,Lt,An,Or||void 0)}catch(qe){console.error("[Component Creation] Error creating component:",qe),Be=Wh(io,Yn,Ee.x,Ee.y,gt,xt,Je,Lt,An,Or||void 0)}if(Be.abbreviation=g0(io),An&&Be.designator){const qe=Be.designator.match(/^([A-Za-z]+)(\d+)$/);if(qe){const Ue=qe[1],et=parseInt(qe[2],10);if(ti){const nt=Mp();ox(Ue,et,nt)}else zt.current[Ue]=Math.max(zt.current[Ue]||0,et)}}Mt(ct,Ut,Ft,w,ye),Yn==="top"?(ts(!0),Mi(qe=>[...qe,Be])):(ys(!0),ki(qe=>[...qe,Be]));return}else if(z==="power"){if(!Pe)return;const _e=Sl?{x:Zi({x:Oe,y:we}).x,y:Zi({x:Oe,y:we}).y}:((ft,gt)=>{let xt=1/0,Je=null;const Be=10/vt,qe=vt>20?Math.max(Be,1e-4):vt>10?Math.max(Be,.001):Math.max(Be,.01);for(const nt of ct)if(nt.type==="via"||nt.type==="pad"){const Ct=nt.points[0],Et=Math.hypot(Ct.x-ft,Ct.y-gt);Et<=qe&&Et<xt&&(xt=Et,Je=Ct)}else if(nt.type==="trace")for(const Ct of nt.points){const Et=Math.hypot(Ct.x-ft,Ct.y-gt);Et<=qe&&Et<xt&&(xt=Et,Je=Ct)}const et=Zi(Je??{x:ft,y:gt});return{x:et.x,y:et.y,nodeId:Je?.id}})(Oe,we),$e=fn.find(ft=>ft.id===Pe);if($e){const ft=_e.nodeId??pc(),gt=`${$e.voltage} Power Node`;if(_n.find(Lt=>Lt.pointId===ft)){Gs({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${ft}). Power and ground nodes cannot share the same Node ID.`});return}Mt(ct,Ut,Ft,w,ye);const Je={id:`power-${Date.now()}-${Math.random()}`,x:_e.x,y:_e.y,color:"#ff0000",size:N,powerBusId:$e.id,layer:Ht,type:gt,pointId:ft};if(q(Lt=>[...Lt,Je]),_e.nodeId!==void 0){const Lt=ns(_e.nodeId,fn),Be=ji(_e.nodeId,fn),qe=Bs(_e.nodeId,fn),Ue=qe.includes("Power")?"power":qe.includes("Ground")?"ground":qe.includes("Signal")?"signal":"unknown";kt(et=>et.map(nt=>nt.type==="via"&&nt.points.length>0&&nt.points[0].id===_e.nodeId?{...nt,viaType:Lt}:nt.type==="pad"&&nt.points.length>0&&nt.points[0].id===_e.nodeId?{...nt,padType:Be}:nt.type==="testPoint"&&nt.points.length>0&&nt.points[0].id===_e.nodeId?{...nt,testPointType:Ue}:nt))}}return}else if(z==="ground"){if(Bt===null){if(vi.length===0){Gs({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}st(!0);return}const Ee=vi.find(_e=>_e.id===Bt);if(Ee){const $e=Sl?{x:Zi({x:Oe,y:we}).x,y:Zi({x:Oe,y:we}).y}:((Lt,Be)=>{let qe=1/0,Ue=null;const nt=10/vt,Ct=vt>20?Math.max(nt,1e-4):vt>10?Math.max(nt,.001):Math.max(nt,.01);for(const Bn of ct)if(Bn.type==="via"||Bn.type==="pad"){const sn=Bn.points[0],On=Math.hypot(sn.x-Lt,sn.y-Be);On<=Ct&&On<qe&&(qe=On,Ue=sn)}else if(Bn.type==="trace")for(const sn of Bn.points){const On=Math.hypot(sn.x-Lt,sn.y-Be);On<=Ct&&On<qe&&(qe=On,Ue=sn)}const pn=Zi(Ue??{x:Lt,y:Be});return{x:pn.x,y:pn.y,nodeId:Ue?.id}})(Oe,we),ft=$e.nodeId??pc(),gt=`${Ee.name} Ground Node`,xt=kn.find(Lt=>Lt.pointId===ft);if(xt){Gs({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${xt.type||"Power Node"}) already exists at this Node ID (${ft}). Power and ground nodes cannot share the same Node ID.`});return}Mt(ct,Ut,Ft,w,ye);const Je={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:$e.x,y:$e.y,color:Ee.color,size:N||In.get("ground")?.settings.size||18,groundBusId:Ee.id,layer:Ht,type:gt,pointId:ft};if(Ae(Lt=>[...Lt,Je]),$e.nodeId!==void 0){const Lt=ns($e.nodeId,fn),Be=ji($e.nodeId,fn);kt(qe=>qe.map(Ue=>Ue.type==="via"&&Ue.points.length>0&&Ue.points[0].id===$e.nodeId?{...Ue,viaType:Lt}:Ue.type==="pad"&&Ue.points.length>0&&Ue.points[0].id===$e.nodeId?{...Ue,padType:Be}:Ue))}}return}},[z,Wt,N,se,rt,Ht,ct,vt,Sn.x,Sn.y,Xn,$i,Sl,Pe,Bt,fn,vi,io,In,Si,Wn,Pn,kn,_n,ns,ji,Bs,kr,Gr,fo]),Ud=I.useCallback(c=>{if(z!=="magnify")return;c.preventDefault();const y=ut.current;if(!y)return;const _=y.getBoundingClientRect(),G=y.width/_.width,re=y.height/_.height,Se=c.nativeEvent.offsetX,U=c.nativeEvent.offsetY,xe=typeof Se=="number"?Se:c.clientX-_.left,ee=typeof U=="number"?U:c.clientY-_.top,ue=xe*G,Te=ee*re,Ce=ue-5,Ne=Te-5,Re=Cd(Ce,Ne,Sn,vt,Xn,$i),Oe=Re.x,we=Re.y,Ee=1.2,_e=1/Ee,$e=c.deltaY<0?Ee:_e,ft=Math.max(.25,Math.min(8,vt*$e));Pa(Oe,we),ii(ft)},[z,vt,Sn.x,Sn.y,Xn,$i]),Fd=I.useCallback(c=>{if(z==="draw"&&rt==="trace"){Un.current=!0;let $e=zn;if($e.length>1){const ft=[$e[0]];for(let gt=1;gt<$e.length;gt++){const xt=ft[ft.length-1],Je=$e[gt];(Math.abs(xt.x-Je.x)>.001||Math.abs(xt.y-Je.y)>.001)&&ft.push(Je)}$e=ft}if($e.length>=1){Mt(ct,Ut,Ft,w,ye);const ft=Wn||"top",gt=ft==="top"?"traceTop":"traceBottom",xt=ei.get(gt),Je={id:`${Date.now()}-trace`,points:$e,color:xt.color,size:xt.size,layer:ft,type:"trace"};kt(Lt=>[...Lt,Je]),ft==="top"?Ji(Lt=>[...Lt,Je.id]):ao(Lt=>[...Lt,Je.id]),Nn([]),xn(null),setTimeout(()=>{Un.current=!1},300);return}}const y=ut.current;if(!y)return;const _=y.getBoundingClientRect(),G=y.width/_.width,re=y.height/_.height,Se=c.nativeEvent.offsetX,U=c.nativeEvent.offsetY,xe=typeof Se=="number"?Se:c.clientX-_.left,ee=typeof U=="number"?U:c.clientY-_.top,ue=xe*G,Te=ee*re,Ce=ue-5,Ne=Te-5,Re=Cd(Ce,Ne,Sn,vt,Xn,$i),Oe=Re.x,we=Re.y,Ee=Math.max(8/vt,4),_e=(()=>{for(const $e of ct)if($e.type==="testPoint"&&$e.points.length>0){const ft=$e.points[0],gt=Math.hypot(ft.x-Oe,ft.y-we),xt=($e.size||18)/2;if(gt<=xt+Ee)return $e}return null})();if(_e){wt(new Set([_e.id])),Kt(new Set),bn(new Set),tn(new Set),ci(!0);return}if(z==="select"||z==="component"){const ft=(()=>{for(const Je of Ut)if(Oe>=Je.x-10&&Oe<=Je.x+10&&we>=Je.y-10&&we<=Je.y+10)return{layer:"top",comp:Je};for(const Je of Ft)if(Oe>=Je.x-10&&Oe<=Je.x+10&&we>=Je.y-10&&we<=Je.y+10)return{layer:"bottom",comp:Je};return null})(),gt=Math.max(6/vt,4);let xt=null;for(const Je of kn){const Lt=Math.max(6,Je.size/2),Be=Lt*.8,qe=Lt+Be,Ue=Math.hypot(Je.x-Oe,Je.y-we),et=Math.abs(Oe-Je.x)<=gt&&Math.abs(we-Je.y)<=qe,nt=Math.abs(we-Je.y)<=gt&&Math.abs(Oe-Je.x)<=qe;if(Ue<=Math.max(Lt,gt)||et||nt){xt=Je;break}}if(xt){bn(new Set([xt.id])),lt({visible:!0,id:xt.id,layer:xt.layer,x:xt.x,y:xt.y,size:xt.size,color:xt.color,powerBusId:xt.powerBusId});return}if(ft){const{layer:Je,comp:Lt}=ft;bc(Lt,Je)}}},[z,rt,se,N,Ht,Ut,Ft,kn,vt,Sn.x,Sn.y,Xn,$i,io,Sl,ct,Wt,ds,Bd,Pr,In,zn,Wn,W,k,J,ge,ci,wt,Kt,bn,tn,bc]),lu=I.useCallback(()=>{const c=wn.current;if(z==="draw"&&rt==="trace"&&c.length>=2){let y=[c[0]];for(let U=1;U<c.length;U++){const xe=y[y.length-1],ee=c[U];(Math.abs(xe.x-ee.x)>.001||Math.abs(xe.y-ee.y)>.001)&&y.push(ee)}const _=Wn||"top",G=_==="top"?"traceTop":"traceBottom",re=ei.get(G),Se={id:`${Date.now()}-trace`,points:y,color:re.color,size:re.size,layer:_,type:"trace"};Mt(ct,Ut,Ft,w,ye),kt(U=>[...U,Se]),_==="top"?Ji(U=>[...U,Se.id]):ao(U=>[...U,Se.id]),Nn([]),xn(null)}else if(z==="draw"&&rt==="trace"&&c.length===1){const y=Wn||"top",_=y==="top"?"traceTop":"traceBottom",G=ei.get(_),re={id:`${Date.now()}-trace-dot`,points:c,color:G.color,size:G.size,layer:y,type:"trace"};kt(Se=>[...Se,re]),y==="top"?Ji(Se=>[...Se,re.id]):ao(Se=>[...Se,re.id]),Nn([])}},[z,rt,Wn,W,k,J,ge,kt]),Kf=I.useCallback((c,y,_)=>{const G=y-c.x,re=_-c.y;if(G===0&&re===0)return{x:y,y:_};const U=(Jm(G,re)%180+180)%180,xe=[0,45,90];let ee=0,ue=1e9;for(const Te of xe){const Ce=Math.abs(U-Te);Ce<ue&&(ue=Ce,ee=Te)}if(ee===0)return{x:y,y:c.y};if(ee===90)return{x:c.x,y:_};{const Te=Math.min(Math.abs(G),Math.abs(re)),Ce=G>=0?1:-1,Ne=re>=0?1:-1;return{x:c.x+Ce*Te,y:c.y+Ne*Te}}},[]),qd=I.useCallback(c=>{const y=ut.current?.getBoundingClientRect();if(!y)return;const _=c.clientX-y.left,G=c.clientY-y.top,re=ut.current,Se=re.width/y.width,U=re.height/y.height,xe=_*Se,ee=G*U,ue=xe-5,Te=ee-5,Ce=Cd(ue,Te,Sn,vt,Xn,$i),Ne=Ce.x,Re=Ce.y;if($s({x:Ne,y:Re}),z==="draw"&&rt==="trace"&&zn.length>0){const we=Sl?{x:Zi({x:Ne,y:Re}).x,y:Zi({x:Ne,y:Re}).y}:((Ee,_e)=>{let $e=1/0,ft=null;const xt=10/vt,Je=vt>20?Math.max(xt,1e-4):vt>10?Math.max(xt,.001):Math.max(xt,.01);for(const qe of ct)if(qe.type==="via"){const Ue=qe.points[0],et=Math.hypot(Ue.x-Ee,Ue.y-_e);et<=Je&&et<$e&&($e=et,ft=Ue)}else if(qe.type==="pad"){const Ue=qe.points[0],et=Math.hypot(Ue.x-Ee,Ue.y-_e);et<=Je&&et<$e&&($e=et,ft=Ue)}for(const qe of kn)if(qe.pointId!==void 0){const Ue=Math.hypot(qe.x-Ee,qe.y-_e);Ue<=Je&&Ue<$e&&($e=Ue,ft={x:qe.x,y:qe.y,id:qe.pointId})}for(const qe of _n)if(qe.pointId!==void 0){const Ue=Math.hypot(qe.x-Ee,qe.y-_e);Ue<=Je&&Ue<$e&&($e=Ue,ft={x:qe.x,y:qe.y,id:qe.pointId})}const Be=Zi(ft??{x:Ee,y:_e});return{x:Be.x,y:Be.y,nodeId:ft?.id}})(Ne,Re);xn({x:we.x,y:we.y})}else xn(null);if(ja){const we=(()=>{for(const Ee of Ut)if(Ne>=Ee.x-10&&Ne<=Ee.x+10&&Re>=Ee.y-10&&Re<=Ee.y+10)return{layer:"top",comp:Ee};for(const Ee of Ft)if(Ne>=Ee.x-10&&Ne<=Ee.x+10&&Re>=Ee.y-10&&Re<=Ee.y+10)return{layer:"bottom",comp:Ee};return null})();if(we)Mo({component:we.comp,layer:we.layer,x:c.clientX,y:c.clientY}),Bo(null);else{Mo(null);const Ee=Math.max(8/vt,4),_e=(()=>{for(const $e of ct)if($e.type==="testPoint"&&$e.points.length>0){const ft=$e.points[0],gt=Math.hypot(ft.x-Ne,ft.y-Re),xt=($e.size||18)/2;if(gt<=xt+Ee)return $e}return null})();Bo(_e?{stroke:_e,x:c.clientX,y:c.clientY}:null)}}else Mo(null),Bo(null);if(z==="select"&&ec&&qc){const Oe=qc.x,we=qc.y;ff({x:Math.min(Oe,Ne),y:Math.min(we,Re),width:Math.abs(Ne-Oe),height:Math.abs(Re-we)})}else if(z==="pan"&&ds&&Es.current){const{startCX:Oe,startCY:we,objectStartPositions:Ee}=Es.current,_e=ue-Oe,$e=Te-we,ft=r1(_e,$e,vt,Xn,$i),gt=ft.x,xt=ft.y;Ee&&(o&&s({...o,x:Ee.topImageX+gt,y:Ee.topImageY+xt}),u&&f({...u,x:Ee.bottomImageX+gt,y:Ee.bottomImageY+xt}),Mi(Ut.map(Je=>({...Je,x:(Ee.componentsTop?.[Je.id]?.x??Je.x)+gt,y:(Ee.componentsTop?.[Je.id]?.y??Je.y)+xt}))),ki(Ft.map(Je=>({...Je,x:(Ee.componentsBottom?.[Je.id]?.x??Je.x)+gt,y:(Ee.componentsBottom?.[Je.id]?.y??Je.y)+xt}))),q(w.map(Je=>({...Je,x:(Ee.powerSymbols?.[Je.id]?.x??Je.x)+gt,y:(Ee.powerSymbols?.[Je.id]?.y??Je.y)+xt}))),Ae(ye.map(Je=>({...Je,x:(Ee.groundSymbols?.[Je.id]?.x??Je.x)+gt,y:(Ee.groundSymbols?.[Je.id]?.y??Je.y)+xt}))),kt(ct.map((Je,Lt)=>({...Je,points:Je.points.map((Be,qe)=>{const Ue=Ee.drawingStrokes?.[Lt]?.points?.[qe];return{...Be,x:(Ue?.x??Be.x)+gt,y:(Ue?.y??Be.y)+xt}})}))),Hr(va.map((Je,Lt)=>{const Be=Ee.vias?.[Lt];return{...Je,x:(Be?.x??Je.x)+gt,y:(Be?.y??Je.y)+xt}})),Sa(wa.map((Je,Lt)=>{const Be=Ee.pads?.[Lt];return{...Je,x:(Be?.x??Je.x)+gt,y:(Be?.y??Je.y)+xt}})))}else if(Rn&&zn.length>0){if(z==="draw")if(ia){const Oe=zn[0],we=Kf(Oe,Ne,Re),Ee=Zi(we),_e={id:pc(),x:Ee.x,y:Ee.y};Nn([Oe,_e])}else{const Oe=Zi({x:Ne,y:Re});Nn(we=>[...we,{id:pc(),x:Oe.x,y:Oe.y}])}else if(z==="erase"&&(Nn(Oe=>[...Oe,{id:pc(),x:Ne,y:Re}]),kt(Oe=>{const we=Oe.filter(_e=>{if(_e.type==="via"&&wi||_e.type==="pad"&&Hi||_e.type==="testPoint"&&gr||_e.type==="trace"&&ur||_e.layer!==Ht)return!0;const $e=N/2,ft=Ne-$e,gt=Ne+$e,xt=Re-$e,Je=Re+$e,Lt=(Ue,et)=>Ue>=ft&&Ue<=gt&&et>=xt&&et<=Je,Be=(Ue,et,nt,Ct)=>{const $n=(To,ro)=>{let Gn=0;return To<ft?Gn|=1:To>gt&&(Gn|=2),ro<xt?Gn|=4:ro>Je&&(Gn|=8),Gn};let hn=Ue,At=et,ln=nt,ir=Ct,Ir=$n(hn,At),rr=$n(ln,ir);for(;;){if((Ir|rr)===0)return!0;if((Ir&rr)!==0)return!1;const To=Ir!==0?Ir:rr;let ro=0,Gn=0;To&8?(ro=hn+(ln-hn)*(Je-At)/(ir-At),Gn=Je):To&4?(ro=hn+(ln-hn)*(xt-At)/(ir-At),Gn=xt):To&2?(Gn=At+(ir-At)*(gt-hn)/(ln-hn),ro=gt):(Gn=At+(ir-At)*(ft-hn)/(ln-hn),ro=ft),To===Ir?(hn=ro,At=Gn,Ir=$n(hn,At)):(ln=ro,ir=Gn,rr=$n(ln,ir))}};let qe=!1;if(_e.points.length===1){const Ue=_e.points[0];qe=Lt(Ue.x,Ue.y)}else for(let Ue=0;Ue<_e.points.length-1;Ue++){const et=_e.points[Ue],nt=_e.points[Ue+1];if(Be(et.x,et.y,nt.x,nt.y)){qe=!0;break}}return qe&&console.log("Erasing stroke at position:",Ne,Re,"brushSize:",N,"selectedLayer:",Ht),!qe});console.log("Strokes before:",Oe.length,"after:",we.length);const Ee=new Set(we.map(_e=>_e.id));return qr(_e=>_e.filter($e=>Ee.has($e))),sl(_e=>_e.filter($e=>Ee.has($e))),Ji(_e=>_e.filter($e=>Ee.has($e))),ao(_e=>_e.filter($e=>Ee.has($e))),we}),Qi||q(Oe=>{const we=N/2,Ee=Ne-we,_e=Ne+we,$e=Re-we,ft=Re+we,gt=xt=>{const Je=xt.size/2,Lt=xt.x-Je,Be=xt.x+Je,qe=xt.y-Je,Ue=xt.y+Je;return!(_e<Lt||Ee>Be||ft<qe||$e>Ue)};return Oe.filter(xt=>!gt(xt))}),Dr||Ae(Oe=>{const we=N/2,Ee=Ne-we,_e=Ne+we,$e=Re-we,ft=Re+we,gt=Je=>{const Lt=Math.max(6,(Je.size||18)/2),Be=Lt*.8,qe=Lt+Be,Ue=Je.x-qe,et=Je.x+qe,nt=Je.y-qe,Ct=Je.y+qe;return!(_e<Ue||Ee>et||ft<nt||$e>Ct)};return Oe.filter(Je=>!gt(Je))}),!Lo)){const Oe=N/2,we=Ne-Oe,Ee=Ne+Oe,_e=Re-Oe,$e=Re+Oe,ft=gt=>{const Je=(gt.size||18)/2,Lt=gt.x-Je,Be=gt.x+Je,qe=gt.y-Je,Ue=gt.y+Je;return!(Ee<Lt||we>Be||$e<qe||_e>Ue)};Mt(ct,Ut,Ft,w,ye),Mi(gt=>gt.filter(xt=>!ft(xt))),ki(gt=>gt.filter(xt=>!ft(xt)))}}else if(Zr&&Ao&&Wt){if(Fn){go(!1),Xt(null);return}const Oe=Ne-Ao.x,we=Re-Ao.y;if(Wt==="top"){o&&s(Ee=>Ee?{...Ee,x:Ee.x+Oe,y:Ee.y+we}:null),Xt({x:Ne,y:Re});return}if(Wt==="bottom"){u&&f(Ee=>Ee?{...Ee,x:Ee.x+Oe,y:Ee.y+we}:null),Xt({x:Ne,y:Re});return}if(Wt==="both"){o&&s(Ee=>Ee?{...Ee,x:Ee.x+Oe,y:Ee.y+we}:null),u&&f(Ee=>Ee?{...Ee,x:Ee.x+Oe,y:Ee.y+we}:null),Xt({x:Ne,y:Re});return}}},[Rn,zn,z,N,Zr,Ao,Wt,o,u,ia,Kf,Ht,kt,vt,Sn.x,Sn.y,Xn,$i,ec,qc,Fn,wi,Hi,ur,Qi,Dr,Ut,Ft,Mi,ki,ja,Mo,Sl,ct,kn,_n,zn,rt,rn,xn,ds,Es,Fo,5,Sn,pc,Zi,V,Ja,Mt,w,ye,$s]),Hd=I.useCallback(()=>{if($s(null),z==="select"&&ec){const c=Wl,y=qc;if(Dl(!1),Gf(null),ff(null),c&&y){const re=Math.max(3,5/vt),Se=c.width<re&&c.height<re,U=(Be,qe)=>{const Ue=c.x,et=c.y,nt=c.x+c.width,Ct=c.y+c.height;return Be>=Ue&&Be<=nt&&qe>=et&&qe<=Ct},xe=(Be,qe,Ue,et,nt,Ct,Et,pn)=>{const At=(Gn,jl)=>{let tl=0;return Gn<nt?tl|=1:Gn>Et&&(tl|=2),jl<Ct?tl|=4:jl>pn&&(tl|=8),tl};let ln=Be,ir=qe,Ir=Ue,rr=et,To=At(ln,ir),ro=At(Ir,rr);for(;;){if((To|ro)===0)return!0;if((To&ro)!==0)return!1;const Gn=To!==0?To:ro;let jl=0,tl=0;Gn&8?(jl=ln+(Ir-ln)*(pn-ir)/(rr-ir),tl=pn):Gn&4?(jl=ln+(Ir-ln)*(Ct-ir)/(rr-ir),tl=Ct):Gn&2?(tl=ir+(rr-ir)*(Et-ln)/(Ir-ln),jl=Et):(tl=ir+(rr-ir)*(nt-ln)/(Ir-ln),jl=nt),Gn===To?(ln=jl,ir=tl,To=At(ln,ir)):(Ir=jl,rr=tl,ro=At(Ir,rr))}},ee=c.x,ue=c.y,Te=c.x+c.width,Ce=c.y+c.height,Re=Math.max(6/vt,4/vt,.5),Oe=(Be,qe,Ue,et,nt,Ct)=>{const Et=nt-Ue,pn=Ct-et;if(Et===0&&pn===0)return Math.hypot(Be-Ue,qe-et);const Bn=Math.max(0,Math.min(1,((Be-Ue)*Et+(qe-et)*pn)/(Et*Et+pn*pn))),sn=Ue+Bn*Et,On=et+Bn*pn;return Math.hypot(Be-sn,qe-On)},we=y?.shiftKey===!0,Ee=new Set(we?Array.from(Cn):[]),_e=new Set(we?Array.from(Hn):[]),$e=new Set(we?Array.from(Dn):[]),ft=new Set(we?Array.from(ri):[]),gt=y?.hitStrokeId;if(gt){const Be=ct.find(qe=>qe.id===gt);if(Be){let qe=!1;if(Be.type==="via"||Be.type==="pad"?qe=kr:qe=Be.layer==="top"?eo:Mr,qe){we?wt(Ue=>{const et=new Set(Ue);return et.has(gt)?et.delete(gt):et.add(gt),et}):(wt(new Set([gt])),Kt(new Set),bn(new Set),tn(new Set));return}}}if(Se){let Be=null;for(const qe of ct){let Ue=!1;if(qe.type==="via"?Ue=kr:qe.type==="pad"?Ue=(qe.layer||"top")==="top"?Gr:fo:qe.type==="testPoint"?Ue=(qe.layer||"top")==="top"?bo:vo:qe.type==="trace"?Ue=qe.layer==="top"?eo:Mr:Ue=!1,!Ue)continue;let et=1/0;if(qe.type==="via"||qe.type==="pad"||qe.type==="testPoint"){const nt=qe.points[0],Ct=Math.max(1,qe.size/2);et=Math.hypot(nt.x-y.x,nt.y-y.y);const pn=Math.max(6/vt,4/vt,.5);et<=Math.max(Ct,pn)&&(!Be||et<Be.dist)&&(Be={id:qe.id,dist:et})}else for(let nt=0;nt<qe.points.length-1;nt++){const Ct=qe.points[nt],Et=qe.points[nt+1],pn=Oe(y.x,y.y,Ct.x,Ct.y,Et.x,Et.y);if(pn<=Math.max(Re,qe.size/2)){(!Be||pn<Be.dist)&&(Be={id:qe.id,dist:pn});break}}}Be&&(we&&Ee.has(Be.id)?Ee.delete(Be.id):Ee.add(Be.id))}else for(const Be of ct){let qe=!1;if(Be.type==="via"?qe=kr:Be.type==="pad"?qe=(Be.layer||"top")==="top"?Gr:fo:Be.type==="testPoint"?qe=(Be.layer||"top")==="top"?bo:vo:Be.type==="trace"?qe=Be.layer==="top"?eo:Mr:qe=!1,!qe)continue;let Ue=!1;if(Be.type==="via"||Be.type==="pad"||Be.type==="testPoint"){const et=Be.points[0];Ue=U(et.x,et.y)}else for(let et=0;et<Be.points.length-1;et++){const nt=Be.points[et],Ct=Be.points[et+1];if(xe(nt.x,nt.y,Ct.x,Ct.y,ee,ue,Te,Ce)||U(nt.x,nt.y)&&U(Ct.x,Ct.y)){Ue=!0;break}}Ue&&(we&&Ee.has(Be.id)?Ee.delete(Be.id):Ee.add(Be.id))}const xt=Be=>{const Ue=Math.max(10,Be.size||18)/2;return Be.x-Ue<=Te&&Be.x+Ue>=ee&&Be.y-Ue<=Ce&&Be.y+Ue>=ue};if(Se){const Be=qe=>{const et=Math.max(10,qe.size||18)/2;return y.x>=qe.x-et&&y.x<=qe.x+et&&y.y>=qe.y-et&&y.y<=qe.y+et};Zo&&Ut.forEach(qe=>{Be(qe)&&(we&&_e.has(qe.id)?_e.delete(qe.id):_e.add(qe.id))}),qa&&Ft.forEach(qe=>{Be(qe)&&(we&&_e.has(qe.id)?_e.delete(qe.id):_e.add(qe.id))})}else Zo&&Ut.forEach(Be=>{xt(Be)&&(we&&_e.has(Be.id)?_e.delete(Be.id):_e.add(Be.id))}),qa&&Ft.forEach(Be=>{xt(Be)&&(we&&_e.has(Be.id)?_e.delete(Be.id):_e.add(Be.id))});const Je=Be=>{const qe=Math.max(6,Be.size/2),Ue=qe*.8,et=qe+Ue;return Be.x-et<=Te&&Be.x+et>=ee&&Be.y-et<=Ce&&Be.y+et>=ue};if(ms)if(Se){let Be=null;for(const qe of kn){const Ue=Math.max(6,qe.size/2),et=Ue*.8,nt=Ue+et,Ct=Math.hypot(qe.x-y.x,qe.y-y.y),Et=Math.abs(y.x-qe.x)<=Re&&Math.abs(y.y-qe.y)<=nt,pn=Math.abs(y.y-qe.y)<=Re&&Math.abs(y.x-qe.x)<=nt;if(Ct<=Math.max(Ue,Re)||Et||pn){const sn=Math.min(Ct,Math.abs(y.x-qe.x)+Math.abs(y.y-qe.y));(!Be||sn<Be.dist)&&(Be={id:qe.id,dist:sn})}}Be&&(we&&$e.has(Be.id)?$e.delete(Be.id):$e.add(Be.id))}else kn.forEach(Be=>{Je(Be)&&(we&&$e.has(Be.id)?$e.delete(Be.id):$e.add(Be.id))});const Lt=Be=>{const qe=Math.max(6,(Be.size||18)/2),Ue=qe*.8,et=qe+Ue;return Be.x-et<=Te&&Be.x+et>=ee&&Be.y-et<=Ce&&Be.y+et>=ue};if(Ci)if(Se){let Be=null;for(const qe of _n){const Ue=Math.max(6,(qe.size||18)/2),et=Ue*.8,nt=Ue+et,Ct=Math.hypot(qe.x-y.x,qe.y-y.y),Et=Math.abs(y.x-qe.x)<=Re&&Math.abs(y.y-qe.y)<=nt,pn=Math.abs(y.y-qe.y)<=Re&&Math.abs(y.x-qe.x)<=nt;if(Ct<=Math.max(Ue,Re)||Et||pn){const sn=Math.min(Ct,Math.abs(y.x-qe.x)+Math.abs(y.y-qe.y));(!Be||sn<Be.dist)&&(Be={id:qe.id,dist:sn})}}Be&&(we&&ft.has(Be.id)?ft.delete(Be.id):ft.add(Be.id))}else _n.forEach(Be=>{Lt(Be)&&(we&&ft.has(Be.id)?ft.delete(Be.id):ft.add(Be.id))});wt(Ee),Kt(_e),bn($e),tn(ft)}}if(Rn&&zn.length>0){if(z==="draw"&&rt!=="trace"){const c={id:Date.now().toString(),points:zn,color:se,size:N,layer:Ht,type:"trace"};kt(y=>[...y,c]),Ht==="top"?Ji(y=>[...y,c.id]):ao(y=>[...y,c.id])}Nn([])}ds&&(ps(!1),Es.current=null,yl.current=null),Gt(!1),go(!1),Xt(null),ma(!1)},[Rn,zn,z,se,N,Ht,Wl,qc,ec,ct,vt,ml,Cn,kn,_n,Ut,Ft,Hn,Dn,ri,kr,eo,Mr,Zo,qa,ms,Ci,$s]);_t.useEffect(()=>{if(!(z==="pan"&&ds&&yl.current))return;const c=_=>{const G=ut.current;if(!G)return;const re=G.getBoundingClientRect(),Se=G.width/re.width,U=G.height/re.height,{startClientX:xe,startClientY:ee,objectStartPositions:ue}=yl.current,Te=(_.clientX-xe)*Se,Ce=(_.clientY-ee)*U,Ne=r1(Te,Ce,vt,Xn,$i),Re=Ne.x,Oe=Ne.y;ue&&(o&&s({...o,x:ue.topImageX+Re,y:ue.topImageY+Oe}),u&&f({...u,x:ue.bottomImageX+Re,y:ue.bottomImageY+Oe}),Mi(Ut.map(we=>({...we,x:(ue.componentsTop?.[we.id]?.x??we.x)+Re,y:(ue.componentsTop?.[we.id]?.y??we.y)+Oe}))),ki(Ft.map(we=>({...we,x:(ue.componentsBottom?.[we.id]?.x??we.x)+Re,y:(ue.componentsBottom?.[we.id]?.y??we.y)+Oe}))),q(w.map(we=>({...we,x:(ue.powerSymbols?.[we.id]?.x??we.x)+Re,y:(ue.powerSymbols?.[we.id]?.y??we.y)+Oe}))),Ae(ye.map(we=>({...we,x:(ue.groundSymbols?.[we.id]?.x??we.x)+Re,y:(ue.groundSymbols?.[we.id]?.y??we.y)+Oe}))),kt(ct.map((we,Ee)=>({...we,points:we.points.map((_e,$e)=>{const ft=ue.drawingStrokes?.[Ee]?.points?.[$e];return{..._e,x:(ft?.x??_e.x)+Re,y:(ft?.y??_e.y)+Oe}})}))),Hr(va.map((we,Ee)=>{const _e=ue.vias?.[Ee];return{...we,x:(_e?.x??we.x)+Re,y:(_e?.y??we.y)+Oe}})),Sa(wa.map((we,Ee)=>{const _e=ue.pads?.[Ee];return{...we,x:(_e?.x??we.x)+Re,y:(_e?.y??we.y)+Oe}})))},y=()=>{ps(!1),Es.current=null,yl.current=null,window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",y,!0)};return window.addEventListener("mousemove",c,!0),window.addEventListener("mouseup",y,!0),()=>{window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",y,!0)}},[z,ds,vt,Xn,$i,o,u,Ut,Ft,w,ye,ct,va,wa,s,f,Mi,ki,q,Ae,kt,Hr,Sa]);const Bu=I.useCallback(()=>{const c=ut.current;if(!c)return;const y=c.getContext("2d");if(!y)return;y.clearRect(0,0,c.width,c.height),y.fillStyle="#000000",y.fillRect(0,0,c.width,c.height),y.fillStyle="#ffffff",y.fillRect(5,5,c.width-10,c.height-10),y.save(),y.beginPath(),y.rect(5,5,c.width-10,c.height-10),y.clip(),y.translate(5,5);const _=(xe,ee,ue,Te,Ce,Ne,Re,Oe)=>{const we=document.createElement("canvas");we.width=ue,we.height=Te;const Ee=we.getContext("2d",{willReadFrequently:!0});Ee.clearRect(0,0,ue,Te),Ee.drawImage(ee,0,0,ue,Te);let _e=we;if(Math.abs(Ce)>1e-6){const $e=Hp(Ce),ft=Math.max(.2,1-$e),gt=Math.max(.2,1+$e),xt=Math.max(ft,gt),Je=Math.max(1,Math.ceil(ue*xt)),Lt=document.createElement("canvas");Lt.width=Je,Lt.height=Te;const Be=Lt.getContext("2d",{willReadFrequently:!0});Be.clearRect(0,0,Je,Te);for(let qe=0;qe<Te;qe++){const Ue=Te<=1?0:qe/(Te-1),et=ft*(1-Ue)+gt*Ue,nt=Math.max(1,ue*et),Ct=(Je-nt)/2;Be.drawImage(_e,0,qe,ue,1,Ct,qe,nt,1)}_e=Lt}if(Math.abs(Ne)>1e-6){const $e=Hp(Ne),ft=Math.max(.2,1-$e),gt=Math.max(.2,1+$e),xt=Math.max(ft,gt),Je=Math.max(1,Math.ceil(Te*xt)),Lt=document.createElement("canvas");Lt.width=_e.width,Lt.height=Je;const Be=Lt.getContext("2d",{willReadFrequently:!0});Be.clearRect(0,0,Lt.width,Je);for(let qe=0;qe<_e.width;qe++){const Ue=_e.width<=1?0:qe/(_e.width-1),et=ft*(1-Ue)+gt*Ue,nt=Math.max(1,Te*et),Ct=(Je-nt)/2;Be.drawImage(_e,qe,0,1,_e.height,qe,Ct,1,nt)}_e=Lt}xe.drawImage(_e,-Re/2,-Oe/2,Re,Oe)};y.translate(Sn.x,Sn.y),y.scale(vt,vt),Qm(y,Xn,$i);{const xe=Aa&&pa;if(o&&o.bitmap&&Aa){const ee=o.bitmap;y.save(),y.globalAlpha=1;const ue=[];o.brightness!==void 0&&o.brightness!==100&&ue.push(`brightness(${o.brightness}%)`),o.contrast!==void 0&&o.contrast!==100&&ue.push(`contrast(${o.contrast}%)`),K&&ue.push("grayscale(100%)"),y.filter=ue.length>0?ue.join(" "):"none",m0(y,{x:o.x,y:o.y,rotation:o.rotation||0,scale:o.scale||1,flipX:o.flipX||!1,flipY:o.flipY||!1,skewX:o.skewX||0,skewY:o.skewY||0});const Te=ee.width*1,Ce=ee.height*1,Ne=ee;o.keystoneV&&Math.abs(o.keystoneV)>1e-6||o.keystoneH&&Math.abs(o.keystoneH)>1e-6?_(y,Ne,ee.width,ee.height,o.keystoneV||0,o.keystoneH||0,Te,Ce):y.drawImage(Ne,-Te/2,-Ce/2,Te,Ce),y.restore()}if(u&&u.bitmap&&pa){const ee=u.bitmap;y.save(),y.globalAlpha=xe?b/100:1;const ue=[];u.brightness!==void 0&&u.brightness!==100&&ue.push(`brightness(${u.brightness}%)`),u.contrast!==void 0&&u.contrast!==100&&ue.push(`contrast(${u.contrast}%)`),K&&ue.push("grayscale(100%)"),y.filter=ue.length>0?ue.join(" "):"none",m0(y,{x:u.x,y:u.y,rotation:u.rotation||0,scale:u.scale||1,flipX:u.flipX||!1,flipY:u.flipY||!1,skewX:u.skewX||0,skewY:u.skewY||0});const Te=ee.width*1,Ce=ee.height*1,Ne=ee;u.keystoneV&&Math.abs(u.keystoneV)>1e-6||u.keystoneH&&Math.abs(u.keystoneH)>1e-6?_(y,Ne,ee.width,ee.height,u.keystoneV||0,u.keystoneH||0,Te,Ce):y.drawImage(Ne,-Te/2,-Ce/2,Te,Ce),y.restore()}}if(Vd(y),ms&&kn.length>0){const xe=ee=>{y.save(),i1(y,ee.x,ee.y,ee.rotation??0,ee.flipX??!1,!1);const ue=fn.find(Oe=>Oe.id===ee.powerBusId),Te=Dn.has(ee.id),Ce=ue?.color||"#ff0000";y.strokeStyle=Ce,y.lineWidth=Math.max(1,(Te?3:2)/Math.max(vt,.001)),y.lineCap="round";const Ne=Math.max(6,ee.size/2),Re=Ne*.8;if(Te&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(vt,.001)),y.beginPath(),y.arc(0,0,Ne+Re+3,0,La),y.stroke()),y.strokeStyle=Ce,y.lineWidth=Math.max(1,(Te?3:2)/Math.max(vt,.001)),y.beginPath(),y.arc(0,0,Ne,0,La),y.stroke(),y.beginPath(),y.moveTo(0,-Ne-Re),y.lineTo(0,Ne+Re),y.stroke(),y.beginPath(),y.moveTo(-Ne-Re,0),y.lineTo(Ne+Re,0),y.stroke(),ue){y.fillStyle=Ce;const Oe=Math.max(10,Ne*.8);y.font=`${Oe}px sans-serif`,y.textAlign="center",y.textBaseline="top",y.fillText(ue.name,0,Ne+Re+8)}y.restore()};kn.forEach(xe)}if(Ci&&_n.length>0){const xe=ee=>{y.save(),i1(y,ee.x,ee.y,ee.rotation??0,ee.flipX??!1,!1);const ue=ri.has(ee.id),Te=vi.find(Oe=>Oe.id===ee.groundBusId),Ce=Te?.color||ee.color||"#000000",Ne=ee.groundBusId==="groundbus-earth";let Re;if(Ne){const Oe=Math.max(6,ee.size||18),we=Oe*.9,Ee=Oe*.24,_e=Oe*1.6;y.strokeStyle=Ce,y.lineWidth=Math.max(1,(ue?3:2)/Math.max(vt,.001)),y.lineCap="round",ue&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(vt,.001)),y.setLineDash([5,5]),y.strokeRect(-_e/2-3,-3,_e+6,we+Ee*2+6),y.setLineDash([])),y.strokeStyle=Ce,y.lineWidth=Math.max(1,(ue?3:2)/Math.max(vt,.001)),y.beginPath(),y.moveTo(0,0),y.lineTo(0,we),y.stroke();for(let $e=0;$e<3;$e++){const ft=we+$e*Ee,gt=_e*(1-$e*.25);y.beginPath(),y.moveTo(-gt/2,ft),y.lineTo(gt/2,ft),y.stroke()}Re=we+Ee*2}else{const Oe=Math.max(6,(ee.size||18)/2),we=Oe*.8;ue&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(vt,.001)),y.beginPath(),y.arc(0,0,Oe+we+3,0,La),y.stroke()),y.strokeStyle=Ce,y.lineWidth=Math.max(1,(ue?3:2)/Math.max(vt,.001)),y.beginPath(),y.arc(0,0,Oe,0,La),y.stroke(),y.beginPath(),y.moveTo(0,-Oe-we),y.lineTo(0,Oe+we),y.stroke(),y.beginPath(),y.moveTo(-Oe-we,0),y.lineTo(Oe+we,0),y.stroke(),Re=Oe+we}if(Te){y.fillStyle=Ce;const Oe=Math.max(10,(ee.size||18)*.5);y.font=`${Oe}px sans-serif`,y.textAlign="center",y.textBaseline="top",y.fillText(Te.name,0,Re+8)}y.restore()};_n.forEach(xe)}const G=xe=>{const ee=Math.max(10,xe.size||18),ue=ee/2;y.save(),y.translate(xe.x,xe.y),ex(y,Xn,$i),xe.orientation!==void 0&&xe.orientation!==0&&y.rotate(Jc(xe.orientation)),xe.flipX&&y.scale(-1,1),xe.flipY&&y.scale(1,-1),y.strokeStyle=xe.color||"#111",y.lineWidth=Math.max(1,2/Math.max(vt,.001));const Te=xe.pinConnections||[],Ce=Te.length>0&&Te.length===xe.pinCount&&Te.every(Oe=>Oe&&Oe.trim()!=="");y.fillStyle=Ce?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",y.beginPath(),y.rect(-ue,-ue,ee,ee),y.fill(),y.stroke();const Ne=xe.designator?.trim()||"";if(Ne){y.fillStyle=xe.color||"#111";const Oe=Math.max(6,ee*.35),we=ee*.9;let Ee=Oe;y.font=`bold ${Ee}px sans-serif`;const _e=y.measureText(Ne);_e.width>we&&(Ee=we/_e.width*Ee,Ee=Math.max(6,Ee),y.font=`bold ${Ee}px sans-serif`),y.textAlign="center",y.textBaseline="middle",y.fillText(Ne,0,0)}Hn.has(xe.id)&&(y.setLineDash([4,3]),y.strokeStyle="#00bfff",y.lineWidth=1.5,y.strokeRect(-ue-3,-ue-3,ee+6,ee+6),y.setLineDash([])),y.restore()};if(En){const xe=ue=>{const Te=parseInt(ue,10);if(isNaN(Te))return null;for(const Ce of ct)if((Ce.type==="via"||Ce.type==="pad"||Ce.type==="testPoint")&&Ce.points.length>0){const Ne=Ce.points[0];if(Ne.id===Te)return{x:Ne.x,y:Ne.y}}for(const Ce of ct)if(Ce.type==="trace"){for(const Ne of Ce.points)if(Ne.id===Te)return{x:Ne.x,y:Ne.y}}for(const Ce of kn)if(Ce.pointId===Te)return{x:Ce.x,y:Ce.y};for(const Ce of _n)if(Ce.pointId===Te)return{x:Ce.x,y:Ce.y};return null},ee=ue=>{const Te=ue.pinConnections||[],Ce=ue.componentType==="Electrolytic Capacitor"||ue.componentType==="Diode"||ue.componentType==="Battery",Ne=ue.componentType==="Capacitor"&&"dielectric"in ue&&ue.dielectric==="Tantalum",Re=(Ce||Ne)&&ue.pinPolarities,we=Vf(ue)?.category==="Semiconductors"&&ue.componentType==="IntegratedCircuit",Ee=new Map;for(let _e=0;_e<Te.length;_e++){const $e=Te[_e];if($e&&$e.trim()!==""){const ft=$e.trim(),gt=we&&_e===0,xt=!!(Re&&ue.pinPolarities&&_e<ue.pinPolarities.length&&ue.pinPolarities[_e]==="-"),Je=Ee.get(ft);Je!==void 0?Ee.set(ft,{isNegative:Je.isNegative||xt,hasPin1:Je.hasPin1||gt}):Ee.set(ft,{isNegative:xt,hasPin1:gt})}}for(const[_e,$e]of Ee){const{isNegative:ft,hasPin1:gt}=$e,xt=xe(_e);if(xt){const Je={x:ue.x,y:ue.y},Lt=parseInt(_e,10),Be=`${ue.id}:${Lt}`,qe=ve.has(Be);y.save(),qe?(y.strokeStyle="#00bfff",y.lineWidth=Math.max(2,en*1.5/Math.max(vt,.001)),y.setLineDash([4,3])):(ft?y.strokeStyle="rgba(0, 0, 0, 0.8)":gt?y.strokeStyle=tx(Rt,.4):y.strokeStyle=Rt,y.lineWidth=Math.max(1,en/Math.max(vt,.001))),y.beginPath(),y.moveTo(Je.x,Je.y),y.lineTo(xt.x,xt.y),y.stroke(),y.setLineDash([]),y.restore()}}};Zo&&Ut.forEach(ee),qa&&Ft.forEach(ee)}if(Zo&&Ut.forEach(G),qa&&Ft.forEach(G),z==="select"&&Wl){y.save();const xe=Math.max(2,6/Math.max(1e-4,vt));y.strokeStyle="#00bfff",y.fillStyle="rgba(0, 191, 255, 0.15)",y.lineWidth=Math.max(1,1.5/Math.max(1e-4,vt)),y.setLineDash([xe,xe]),y.beginPath(),y.rect(Wl.x,Wl.y,Wl.width,Wl.height),y.fill(),y.stroke(),y.setLineDash([]),y.restore()}y.save();const re=50,U=2/vt;y.strokeStyle="#FF0000",y.lineWidth=U,y.lineCap="round",y.lineJoin="round",y.beginPath(),y.moveTo(-re,0),y.lineTo(re,0),y.stroke(),y.fillStyle="#FF0000",y.font=`${12/vt}px sans-serif`,y.textAlign="left",y.textBaseline="top",y.fillText("+X",re+2/vt,2/vt),y.textAlign="right",y.fillText("-X",-re-2/vt,2/vt),y.strokeStyle="#0000FF",y.lineWidth=U,y.lineCap="round",y.lineJoin="round",y.beginPath(),y.moveTo(0,-re),y.lineTo(0,re),y.stroke(),y.fillStyle="#0000FF",y.font=`${12/vt}px sans-serif`,y.textAlign="left",y.textBaseline="top",y.fillText("+Y",2/vt,re+2/vt),y.textBaseline="bottom",y.fillText("-Y",2/vt,-re-2/vt),y.restore(),y.restore()},[o,u,b,ct,zn,Rn,z,se,N,K,Wt,Ht,vt,Sn.x,Sn.y,Xn,$i,Aa,pa,kr,eo,Mr,Gr,fo,bo,vo,Zo,qa,Ut,Ft,ms,kn,Ci,_n,En,Wl,Cn,Hn,Dn,ri,ve,Wn,W,k,J,ge,rt,rn,Fn,Rt,en,Br,xi]);_t.useEffect(()=>{const c=()=>{const y=Cc.current;if(!y)return;const _=1.6,G=244,re=12,Se=6,U=12,xe=y.clientWidth-G-re,ee=y.getBoundingClientRect(),ue=window.innerHeight,Te=ee.top,Ne=ue-Te-Se-10,Re=Math.min(y.clientHeight-U,Ne),Oe=Math.floor(Re*_),we=Math.floor(xe/_);let Ee,_e;Oe<=xe?(Ee=Oe,_e=Re):(Ee=xe,_e=we),Ee=Math.max(600,Ee),_e=Math.max(375,_e),_e=Math.max(355,_e-20),Lu($e=>{const ft=$e.width===0&&$e.height===0,gt=$e.width!==Ee||$e.height!==_e;return ft&&gt&&setTimeout(()=>{di({x:0,y:0})},0),$e.width===Ee&&$e.height===_e?$e:{width:Ee,height:_e}})};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[Fo,di]),_t.useEffect(()=>{Fn&&(Zr&&(go(!1),Xt(null)),ko(null))},[Fn,Zr,go,Xt,ko]);const Vd=I.useCallback(c=>{if(ct.forEach(y=>{if(y.type==="via"||y.type==="pad"||y.type==="testPoint"||y.testPointType!==void 0||y.type!=="trace")return;let _=!1;if(y.layer==="top"?_=eo:y.layer==="bottom"&&(_=Mr),!!_){if(y.points.length===1){const G=y.points[0],re=Math.max(.5,y.size/2);Cn.has(y.id)&&(c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.arc(G.x,G.y,re+3,0,La),c.stroke(),c.setLineDash([])),c.fillStyle=y.color,c.beginPath(),c.arc(G.x,G.y,re,0,La),c.fill()}else if(Cn.has(y.id)&&(c.strokeStyle="#00bfff",c.lineWidth=y.size+4,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.6,c.beginPath(),y.points.forEach((G,re)=>{re===0?c.moveTo(G.x,G.y):c.lineTo(G.x,G.y)}),c.stroke(),c.globalAlpha=1),c.strokeStyle=y.color,c.lineWidth=y.size,c.lineCap="round",c.lineJoin="round",c.globalAlpha=1,c.beginPath(),y.points.forEach((G,re)=>{re===0?c.moveTo(G.x,G.y):c.lineTo(G.x,G.y)}),c.stroke(),Br){c.fillStyle="#000000";for(const G of y.points)c.beginPath(),c.arc(G.x,G.y,y.size/2,0,La),c.fill()}}}),ct.forEach(y=>{if(y.type==="via"){if(!kr)return}else if(y.type==="pad"){const G=y.layer||"top";if(G==="top"&&!Gr||G==="bottom"&&!fo)return}else if(y.type==="testPoint"){const G=y.layer||"top";if(G==="top"&&!bo||G==="bottom"&&!vo)return}else return;const _=y.points[0];if(Cn.has(y.id)){if(y.type==="via"){const G=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.arc(_.x,_.y,G,0,La),c.stroke(),c.setLineDash([])}else if(y.type==="pad"){const G=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.strokeRect(_.x-G,_.y-G,y.size+6,y.size+6),c.setLineDash([])}else if(y.type==="testPoint"){const G=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.moveTo(_.x,_.y-G),c.lineTo(_.x+G,_.y),c.lineTo(_.x,_.y+G),c.lineTo(_.x-G,_.y),c.closePath(),c.stroke(),c.setLineDash([])}}if(y.type==="via"){const G=Math.max(.5,y.size/2),re=G*.5,Se=G*.7;c.fillStyle=y.color,c.beginPath(),c.arc(_.x,_.y,G,0,La),c.arc(_.x,_.y,re,0,La),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(_.x-Se,_.y),c.lineTo(_.x+Se,_.y),c.stroke(),c.beginPath(),c.moveTo(_.x,_.y-Se),c.lineTo(_.x,_.y+Se),c.stroke()}else if(y.type==="pad"){const G=Math.max(.5,y.size/2),re=y.size,Se=re*.5,U=G*.7;c.fillStyle=y.color,c.beginPath(),c.rect(_.x-G,_.y-G,re,re),c.rect(_.x-Se/2,_.y-Se/2,Se,Se),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(_.x-U,_.y),c.lineTo(_.x+U,_.y),c.stroke(),c.beginPath(),c.moveTo(_.x,_.y-U),c.lineTo(_.x,_.y+U),c.stroke()}else if(y.type==="testPoint"){const G=Math.max(.5,y.size/2),re=G*.7;c.fillStyle=y.color||"#FFFF00",c.strokeStyle="#000000",c.lineWidth=2,c.beginPath(),c.moveTo(_.x,_.y-G),c.lineTo(_.x+G,_.y),c.lineTo(_.x,_.y+G),c.lineTo(_.x-G,_.y),c.closePath(),c.fill(),c.stroke(),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(_.x-re,_.y),c.lineTo(_.x+re,_.y),c.stroke(),c.beginPath(),c.moveTo(_.x,_.y-re),c.lineTo(_.x,_.y+re),c.stroke()}}),zn.length>0){const y=Ht;let _=!0;if(z==="draw"&&(rt==="via"?_=kr:_=y==="top"?eo:Mr),_)if(z==="draw")if(rt==="via"){const G=zn[zn.length-1],re=Math.max(.5,N/2),Se=re*.5,U=re*.7;c.fillStyle=se,c.beginPath(),c.arc(G.x,G.y,re,0,La),c.arc(G.x,G.y,Se,0,La),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(G.x-U,G.y),c.lineTo(G.x+U,G.y),c.stroke(),c.beginPath(),c.moveTo(G.x,G.y-U),c.lineTo(G.x,G.y+U),c.stroke()}else if(rt==="pad"){const G=zn[zn.length-1],re=Math.max(.5,N/2),Se=N,U=Se*.5,xe=re*.7;c.fillStyle=se,c.beginPath(),c.rect(G.x-re,G.y-re,Se,Se),c.rect(G.x-U/2,G.y-U/2,U,U),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(G.x-xe,G.y),c.lineTo(G.x+xe,G.y),c.stroke(),c.beginPath(),c.moveTo(G.x,G.y-xe),c.lineTo(G.x,G.y+xe),c.stroke()}else if(rt==="testPoint"){const G=zn[zn.length-1],re=Math.max(.5,N/2),Se=re*.7;c.fillStyle=se,c.beginPath(),c.moveTo(G.x,G.y-re),c.lineTo(G.x+re,G.y),c.lineTo(G.x,G.y+re),c.lineTo(G.x-re,G.y),c.closePath(),c.fill(),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(G.x-Se,G.y),c.lineTo(G.x+Se,G.y),c.stroke(),c.beginPath(),c.moveTo(G.x,G.y-Se),c.lineTo(G.x,G.y+Se),c.stroke()}else{const G=Wn||"top",re=G==="top"?W:k,Se=G==="top"?J:ge;if(zn.length===1){const U=zn[0],xe=Math.max(.5,Se/2);c.fillStyle=re,c.beginPath(),c.arc(U.x,U.y,xe,0,La),c.fill(),rn&&(c.strokeStyle=re,c.lineWidth=Se,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.6,c.beginPath(),c.moveTo(U.x,U.y),c.lineTo(rn.x,rn.y),c.stroke(),c.globalAlpha=1)}else if(c.strokeStyle=re,c.lineWidth=Se,c.lineCap="round",c.lineJoin="round",c.globalAlpha=1,c.beginPath(),zn.forEach((U,xe)=>{xe===0?c.moveTo(U.x,U.y):c.lineTo(U.x,U.y)}),c.stroke(),rn&&zn.length>0){const U=zn[zn.length-1];c.globalAlpha=.6,c.beginPath(),c.moveTo(U.x,U.y),c.lineTo(rn.x,rn.y),c.stroke(),c.globalAlpha=1}}else z==="erase"&&(c.strokeStyle="rgba(255, 0, 0, 0.5)",c.lineWidth=N,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.5,c.beginPath(),zn.forEach((G,re)=>{re===0?c.moveTo(G.x,G.y):c.lineTo(G.x,G.y)}),c.stroke())}},[ct,Cn,eo,Mr,kr,Gr,fo,bo,vo,zn,z,rt,se,N,Ht,Wn,W,k,J,ge,rn,Br]),Hc=I.useCallback((c,y)=>{if(Fn){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}c==="top"&&o?s(_=>_?{..._,...y}:null):c==="bottom"&&u?f(_=>_?{..._,...y}:null):c==="both"&&(o&&s(_=>_?{..._,...y}:null),u&&f(_=>_?{..._,...y}:null))},[o,u,Fn]),df=I.useCallback(()=>{Wt&&(Hc(Wt,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,brightness:100,contrast:100}),O(!1))},[Hc,Wt]),cu=I.useCallback(()=>{if(Cn.size>0||Hn.size>0||Dn.size>0||ri.size>0){if(Cn.size>0){const c=ct.filter(re=>Cn.has(re.id)),y=wi&&c.some(re=>re.type==="via"),_=ur&&c.some(re=>re.type==="trace"),G=Hi&&c.some(re=>re.type==="pad");if(y){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(_){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(G){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(Hn.size>0&&Lo){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(Dn.size>0&&Qi){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(ri.size>0&&Dr){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(kt(c=>c.map(y=>{if(Cn.has(y.id)){const _=y.size+1;return y.type==="via"?Nt("via",_):y.type==="pad"?Nt("pad",_):y.type==="trace"&&Nt("trace",_,y.layer),{...y,size:_}}return y})),Hn.size>0){const c=(Hn.size>0&&Ut.find(y=>Hn.has(y.id))?.size||18)+1;Nt("component",c),Mi(y=>y.map(_=>Hn.has(_.id)?{..._,size:(_.size||18)+1}:_)),ki(y=>y.map(_=>Hn.has(_.id)?{..._,size:(_.size||18)+1}:_))}if(Dn.size>0){const c=(kn.find(y=>Dn.has(y.id))?.size||18)+1;Nt("power",c),q(y=>y.map(_=>Dn.has(_.id)?{..._,size:_.size+1}:_))}if(ri.size>0){const c=(_n.find(y=>ri.has(y.id))?.size||18)+1;Nt("ground",c),Ae(y=>y.map(_=>ri.has(_.id)?{..._,size:(_.size||18)+1}:_))}}else{let c=null;if(z==="draw"&&rt==="via"?c="via":z==="draw"&&rt==="pad"?c=js.current==="bottom"?"padBottom":"padTop":z==="draw"&&rt==="testPoint"?c=ks.current==="bottom"?"testPointBottom":"testPointTop":z==="draw"&&rt==="trace"?c=ba.current==="bottom"?"traceBottom":"traceTop":z==="component"?c=Hs.current==="bottom"?"componentBottom":"componentTop":z==="power"?c="power":z==="ground"&&(c="ground"),c){const y=ei.get(c),_=Math.min(40,y.size+1);ei.setSize(c,_)}}},[Cn,Hn,Dn,ri,ct,wi,ur,Hi,gr,Lo,Qi,Dr,z,rt,Nt]),pf=I.useCallback(()=>{if(Cn.size>0||Hn.size>0||Dn.size>0||ri.size>0){if(Cn.size>0){const c=ct.filter(Se=>Cn.has(Se.id)),y=wi&&c.some(Se=>Se.type==="via"),_=ur&&c.some(Se=>Se.type==="trace"),G=Hi&&c.some(Se=>Se.type==="pad"),re=gr&&c.some(Se=>Se.type==="testPoint");if(y){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(_){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(G){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}if(re){alert("Cannot change size: Test Points are locked. Unlock test points to change their size.");return}}if(Hn.size>0&&Lo){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(Dn.size>0&&Qi){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(ri.size>0&&Dr){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(kt(c=>c.map(y=>{if(Cn.has(y.id)){const _=Math.max(1,y.size-1);return y.type==="via"?Nt("via",_):y.type==="pad"?Nt("pad",_,y.layer):y.type==="testPoint"?Nt("testPoint",_,y.layer):y.type==="trace"&&Nt("trace",_,y.layer),{...y,size:_}}return y})),Hn.size>0){const c=Math.max(1,(Ut.find(y=>Hn.has(y.id))?.size||18)-1);Nt("component",c),Mi(y=>y.map(_=>Hn.has(_.id)?{..._,size:Math.max(1,(_.size||18)-1)}:_)),ki(y=>y.map(_=>Hn.has(_.id)?{..._,size:Math.max(1,(_.size||18)-1)}:_))}if(Dn.size>0){const c=Math.max(1,(kn.find(y=>Dn.has(y.id))?.size||18)-1);Nt("power",c),q(y=>y.map(_=>Dn.has(_.id)?{..._,size:Math.max(1,_.size-1)}:_))}if(ri.size>0){const c=Math.max(1,(_n.find(y=>ri.has(y.id))?.size||18)-1);Nt("ground",c),Ae(y=>y.map(_=>ri.has(_.id)?{..._,size:Math.max(1,(_.size||18)-1)}:_))}}else{let c=null;if(z==="draw"&&rt==="via"?c="via":z==="draw"&&rt==="pad"?c=(Ht||Si||"top")==="bottom"?"padBottom":"padTop":z==="draw"&&rt==="testPoint"?c=(Ht||Pn||"top")==="bottom"?"testPointBottom":"testPointTop":z==="draw"&&rt==="trace"?c=(Ht||Wn||"top")==="bottom"?"traceBottom":"traceTop":z==="component"?c=(Ht||Yn||"top")==="bottom"?"componentBottom":"componentTop":z==="power"?c="power":z==="ground"&&(c="ground"),c){const y=ei.get(c),_=Math.max(1,y.size-1);ei.setSize(c,_)}}},[Cn,Hn,Dn,ri,ct,wi,ur,Hi,gr,Lo,Qi,Dr,z,rt,Ht,Si,Pn,Wn,Yn,Nt]),Wd=I.useCallback(()=>{const c=fl.size;if(Cn.size>0||Hn.size>0||Dn.size>0||ri.size>0){if(Cn.size>0){const y=ct.filter(U=>Cn.has(U.id)),_=wi&&y.some(U=>U.type==="via"),G=Hi&&y.some(U=>U.type==="pad"),re=ur&&y.some(U=>U.type==="trace"),Se=gr&&y.some(U=>U.type==="testPoint");if(_||G||re||Se){alert("Cannot change size: selected items are locked.");return}}if(Hn.size>0&&Lo){alert("Cannot change size: selected components are locked.");return}if(Dn.size>0&&Qi){alert("Cannot change size: selected power nodes are locked.");return}if(ri.size>0&&Dr){alert("Cannot change size: selected ground nodes are locked.");return}kt(y=>y.map(_=>Cn.has(_.id)?(_.type==="via"?(Nt("via",c),Mn(G=>{const re=new Map(G),Se=re.get("via");return Se&&re.set("via",{...Se,settings:{...Se.settings,size:c}}),re})):_.type==="pad"?(Nt("pad",c,_.layer),Mn(G=>{const re=new Map(G),Se=re.get("pad");if(Se){const U=new Map(Se.layerSettings);U.set(_.layer,{...U.get(_.layer)||{color:Se.settings.color,size:c},size:c}),re.set("pad",{...Se,layerSettings:U})}return re})):_.type==="testPoint"?(Nt("testPoint",c,_.layer),Mn(G=>{const re=new Map(G),Se=re.get("testPoint");if(Se){const U=new Map(Se.layerSettings);U.set(_.layer,{...U.get(_.layer)||{color:Se.settings.color,size:c},size:c}),re.set("testPoint",{...Se,layerSettings:U})}return re})):_.type==="trace"&&Nt("trace",c,_.layer),{..._,size:c}):_)),Hn.size>0&&(Nt("component",c),Mi(y=>y.map(_=>Hn.has(_.id)?{..._,size:c}:_)),ki(y=>y.map(_=>Hn.has(_.id)?{..._,size:c}:_))),Dn.size>0&&(Nt("power",c),q(y=>y.map(_=>Dn.has(_.id)?{..._,size:c}:_))),ri.size>0&&(Nt("ground",c),Ae(y=>y.map(_=>ri.has(_.id)?{..._,size:c}:_)))}else R(c),z==="draw"&&rt==="trace"?Ht==="top"?(ie(c),Nt("trace",c,"top")):($(c),Nt("trace",c,"bottom")):z==="draw"&&rt==="via"?Nt("via",c):z==="draw"&&rt==="pad"?Nt("pad",c,Ht):z==="draw"&&rt==="testPoint"?Nt("testPoint",c,Ht):Nt(z==="component"?"component":z==="power"?"power":z==="ground"?"ground":"brush",c);Xa({visible:!1,size:6})},[fl.size,Cn,Hn,Dn,ri,ct,wi,ur,Lo,Qi,Dr,z,rt,Ht,Nt,In,Mn]),Ou=I.useCallback(()=>{Ca({visible:!1,source:null,interval:5})},[]),Zf=I.useCallback(async(c,y=!1)=>{if(c===null){Vr(!1),Ia(null),Wi.current&&(clearInterval(Wi.current),Wi.current=null),aa({visible:!1,interval:5}),y&&Ca({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!Wr){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let _=zi;if(!_){const U=window;if(typeof U.showDirectoryPicker=="function")try{_=await U.showDirectoryPicker(),Qr(_)}catch(xe){xe?.name!=="AbortError"&&(console.error("Failed to get directory:",xe),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}hl(_);const G=Wr.replace(/\.json$/i,""),Se=zf(G).replace(/[^a-zA-Z0-9_-]/g,"_");fs(Se),dc.current=_,Cl.current=Se,Ia(c),Vr(!0),Yr.current=!0,aa({visible:!1,interval:5}),y&&Ca({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${c} minutes`),Sc.current&&Sc.current()},200)},[Wr,zi,Vr,Ia,hl,fs,aa,Ca,Qr]),Vc=I.useCallback(()=>{Fe(),V("select")},[Fe]),hf=I.useCallback(c=>{if(c.key==="Escape"){const U=document.activeElement;if(U&&(U.tagName==="INPUT"&&U.type==="checkbox"||U.tagName==="INPUT"&&U.type==="radio")){U.blur(),c.preventDefault(),c.stopPropagation();return}}const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)||Wc.current>0&&c.key!=="m"&&c.key!=="M")return;const G=parseInt(c.key);if(!isNaN(G)&&G>=0&&G<=9){if(c.preventDefault(),c.stopPropagation(),z==="center"&&Il){if(xo.current&&(clearTimeout(xo.current),xo.current=null),ut.current){let ee=0,ue=0;o?(ee=o.x,ue=o.y):u&&(ee=u.x,ue=u.y),Rs(Te=>({...Te,[G]:{pcbReferenceX:ee,pcbReferenceY:ue,x:0,y:0,zoom:vt,viewRotation:Xn,viewFlipX:$i,isBottomView:Ta,transparency:b,showTopImage:Aa,showBottomImage:pa,showViasLayer:kr,showTopTracesLayer:eo,showBottomTracesLayer:Mr,showTopPadsLayer:Gr,showBottomPadsLayer:fo,showTopTestPointsLayer:bo,showBottomTestPointsLayer:vo,showTopComponents:Zo,showBottomComponents:qa,showPowerLayer:ms,showGroundLayer:Ci,showConnectionsLayer:En}}))}Ja(!1),V("select"),Ri(void 0);return}const U=Ro[G];if(U){ii(U.zoom),cr(U.viewRotation??0),Sr(U.viewFlipX??!1),co(U.isBottomView??!1),x(U.transparency??50);const xe=U.pcbReferenceX??U.x??0,ee=U.pcbReferenceY??U.y??0;let ue=0,Te=0;o?(ue=o.x,Te=o.y):u&&(ue=u.x,Te=u.y);const Ce=xe-ue,Ne=ee-Te;(Math.abs(Ce)>.001||Math.abs(Ne)>.001)&&(o&&s({...o,x:o.x+Ce,y:o.y+Ne}),u&&f({...u,x:u.x+Ce,y:u.y+Ne}),Mi(Ut.map(Re=>({...Re,x:Re.x+Ce,y:Re.y+Ne}))),ki(Ft.map(Re=>({...Re,x:Re.x+Ce,y:Re.y+Ne}))),q(w.map(Re=>({...Re,x:Re.x+Ce,y:Re.y+Ne}))),Ae(ye.map(Re=>({...Re,x:Re.x+Ce,y:Re.y+Ne}))),kt(ct.map(Re=>({...Re,points:Re.points.map(Oe=>({...Oe,x:Oe.x+Ce,y:Oe.y+Ne}))}))),Hr(va.map(Re=>({...Re,x:Re.x+Ce,y:Re.y+Ne}))),Sa(wa.map(Re=>({...Re,x:Re.x+Ce,y:Re.y+Ne})))),di({x:0,y:0}),$o(U.showTopImage),Yi(U.showBottomImage),es(U.showViasLayer),Fa(U.showTopTracesLayer),uo(U.showBottomTracesLayer),Xr(U.showTopPadsLayer),Ko(U.showBottomPadsLayer),gs(U.showTopTestPointsLayer),yr(U.showBottomTestPointsLayer),ts(U.showTopComponents),ys(U.showBottomComponents),Ai(U.showPowerLayer),Zt(U.showGroundLayer),gi(U.showConnectionsLayer)}return}if(c.key==="+"||c.key==="="){c.preventDefault(),c.stopPropagation(),cu();return}if(c.key==="-"||c.key==="_"){c.preventDefault(),c.stopPropagation(),pf();return}const re=c.shiftKey||c.getModifierState("CapsLock"),Se=z==="transform"&&Wt;if(c.key==="ArrowUp"||c.key==="ArrowDown"||c.key==="ArrowLeft"||c.key==="ArrowRight"){if(Hn.size>0){c.preventDefault(),c.stopPropagation();const U=c.shiftKey?10:1;let xe=0,ee=0;c.key==="ArrowUp"?ee=-U:c.key==="ArrowDown"?ee=U:c.key==="ArrowLeft"?xe=-U:c.key==="ArrowRight"&&(xe=U);for(const ue of Hn){const Te=Ut.find(Ce=>Ce.id===ue);if(Te){const Ce=Te.x+xe,Ne=Te.y+ee,Re=Zi({x:Ce,y:Ne});Mi(Oe=>Oe.map(we=>we.id===ue?{...we,x:Re.x,y:Re.y}:we))}else{const Ce=Ft.find(Ne=>Ne.id===ue);if(Ce){const Ne=Ce.x+xe,Re=Ce.y+ee,Oe=Zi({x:Ne,y:Re});ki(we=>we.map(Ee=>Ee.id===ue?{...Ee,x:Oe.x,y:Oe.y}:Ee))}}}return}if(re&&!Se&&Hn.size===0){if(c.key==="ArrowUp"||c.key==="ArrowDown"){c.preventDefault(),c.stopPropagation();const U=c.key==="ArrowUp"?-90:90;Co(U);return}else if(c.key==="ArrowLeft"||c.key==="ArrowRight"){c.preventDefault(),c.stopPropagation(),Ic();return}}}if((c.key==="I"||c.key==="i")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const U=document.activeElement;if(!!U&&(U.tagName==="INPUT"&&U.type!=="range"&&U.type!=="checkbox"&&U.type!=="radio"||U.tagName==="TEXTAREA"||U.isContentEditable))return;c.preventDefault(),c.stopPropagation();const ee=[];Cn.size>0,Cn.size===0&&Hn.size===0&&Dn.size===0&&ri.size===0&&ee.push(`
No objects selected.`);const ue=ee.join(`
`);console.log(ue),Wo({visible:!0,text:ue});return}if((c.key==="N"||c.key==="n")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const U=document.activeElement;if(!!U&&(U.tagName==="INPUT"&&U.type!=="range"&&U.type!=="checkbox"&&U.type!=="radio"||U.tagName==="TEXTAREA"||U.isContentEditable))return;c.preventDefault(),c.stopPropagation(),ci(!0);return}if((c.key==="L"||c.key==="l")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const U=document.activeElement;if(!!U&&(U.tagName==="INPUT"&&U.type!=="range"&&U.type!=="checkbox"&&U.type!=="radio"||U.tagName==="TEXTAREA"||U.isContentEditable))return;c.preventDefault(),c.stopPropagation(),Iu();return}if((c.key==="E"||c.key==="e")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const U=document.activeElement;if(!!U&&(U.tagName==="INPUT"&&U.type!=="range"&&U.type!=="checkbox"&&U.type!=="radio"||U.tagName==="TEXTAREA"||U.isContentEditable))return;c.preventDefault(),c.stopPropagation(),Jt||pl(!0);return}if(c.key==="O"||c.key==="o"){const U=document.activeElement;if(!!U&&(U.tagName==="INPUT"&&U.type!=="range"&&U.type!=="checkbox"&&U.type!=="radio"||U.tagName==="TEXTAREA"||U.isContentEditable))return;c.preventDefault(),c.stopPropagation();const ee=Ro[0];if(ee){ii(ee.zoom),cr(ee.viewRotation??0),Sr(ee.viewFlipX??!1),co(ee.isBottomView??!1),x(ee.transparency??50);const ue=ee.pcbReferenceX??ee.x??0,Te=ee.pcbReferenceY??ee.y??0;let Ce=0,Ne=0;o?(Ce=o.x,Ne=o.y):u&&(Ce=u.x,Ne=u.y);const Re=ue-Ce,Oe=Te-Ne;(Math.abs(Re)>.001||Math.abs(Oe)>.001)&&(o&&s({...o,x:o.x+Re,y:o.y+Oe}),u&&f({...u,x:u.x+Re,y:u.y+Oe}),Mi(Ut.map(we=>({...we,x:we.x+Re,y:we.y+Oe}))),ki(Ft.map(we=>({...we,x:we.x+Re,y:we.y+Oe}))),q(w.map(we=>({...we,x:we.x+Re,y:we.y+Oe}))),Ae(ye.map(we=>({...we,x:we.x+Re,y:we.y+Oe}))),kt(ct.map(we=>({...we,points:we.points.map(Ee=>({...Ee,x:Ee.x+Re,y:Ee.y+Oe}))}))),Hr(va.map(we=>({...we,x:we.x+Re,y:we.y+Oe}))),Sa(wa.map(we=>({...we,x:we.x+Re,y:we.y+Oe})))),$o(ee.showTopImage),Yi(ee.showBottomImage),es(ee.showViasLayer),Fa(ee.showTopTracesLayer),uo(ee.showBottomTracesLayer),Xr(ee.showTopPadsLayer),Ko(ee.showBottomPadsLayer),gs(ee.showTopTestPointsLayer),yr(ee.showBottomTestPointsLayer),ts(ee.showTopComponents),ys(ee.showBottomComponents),Ai(ee.showPowerLayer),Zt(ee.showGroundLayer),gi(ee.showConnectionsLayer)}else ii(1),cr(0),Sr(!1),co(!1),x(0);di({x:0,y:0}),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),h("overlay"),wt(new Set),Kt(new Set),bn(new Set),tn(new Set),V("select");return}if((c.key==="Alt"||c.altKey)&&(uf(!0),Qa(!0)),c.key==="Escape"){c.preventDefault(),c.stopPropagation(),Vc(),sc(!1),Ac(!1),Nc(!1),me(!1),fr(!1),Od(null);return}if(c.key==="Enter"&&z==="draw"&&rt==="trace"){lu();return}if((c.key==="Delete"||c.key==="Backspace")&&(Cn.size>0||Hn.size>0||Dn.size>0||ri.size>0)){if(c.preventDefault(),c.stopPropagation(),Mt(ct,Ut,Ft,w,ye),Cn.size>0){const U=ct.filter(Ce=>Cn.has(Ce.id)),xe=wi&&U.some(Ce=>Ce.type==="via"),ee=ur&&U.some(Ce=>Ce.type==="trace"),ue=Hi&&U.some(Ce=>Ce.type==="pad"),Te=gr&&U.some(Ce=>Ce.type==="testPoint");xe?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):ee?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):ue?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):Te?alert("Cannot delete: Test points are locked. Unlock test points to delete them."):(kt(Ce=>Ce.filter(Ne=>!Cn.has(Ne.id))),wt(new Set))}Hn.size>0&&(Lo?alert("Cannot delete: Components are locked. Unlock components to delete them."):(Mi(U=>U.filter(xe=>!Hn.has(xe.id))),ki(U=>U.filter(xe=>!Hn.has(xe.id))),Kt(new Set))),Dn.size>0&&(Qi?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(q(U=>U.filter(xe=>!Dn.has(xe.id))),bn(new Set))),ri.size>0&&(Dr?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(Ae(U=>U.filter(xe=>!ri.has(xe.id))),tn(new Set)));return}if((c.key==="z"||c.key==="Z")&&(c.ctrlKey||c.metaKey)&&!c.shiftKey&&!c.altKey){const U=document.activeElement;if(!!U&&(U.tagName==="INPUT"&&U.type!=="range"&&U.type!=="checkbox"&&U.type!=="radio"||U.tagName==="TEXTAREA"||U.isContentEditable))return;c.preventDefault(),c.stopPropagation();const ee=an();if(ee){const ue=new Set(ee.drawingStrokes.map(Re=>Re.id));for(const Re of ct)if(!ue.has(Re.id))for(const Oe of Re.points)Oe.id&&typeof Oe.id=="number"&&jp(Oe.id);const Te=new Set([...ee.componentsTop.map(Re=>Re.id),...ee.componentsBottom.map(Re=>Re.id)]);for(const Re of[...Ut,...Ft])if(!Te.has(Re.id)){for(const Oe of Re.pinConnections)if(Oe&&Oe.trim()!==""){const we=parseInt(Oe,10);!isNaN(we)&&we>0&&jp(we)}}const Ce=new Set(ee.powerSymbols.map(Re=>Re.id));for(const Re of w)!Ce.has(Re.id)&&Re.pointId&&typeof Re.pointId=="number"&&jp(Re.pointId);const Ne=new Set(ee.groundSymbols.map(Re=>Re.id));for(const Re of ye)!Ne.has(Re.id)&&Re.pointId&&typeof Re.pointId=="number"&&jp(Re.pointId);kt(ee.drawingStrokes),Mi(ee.componentsTop),ki(ee.componentsBottom),q(ee.powerSymbols),Ae(ee.groundSymbols),Nn([])}return}if(!c.ctrlKey&&!c.altKey){const U=document.activeElement;if(!(!!U&&(U.tagName==="INPUT"&&U.type!=="range"&&U.type!=="checkbox"&&U.type!=="radio"||U.tagName==="TEXTAREA"||U.isContentEditable)))switch(c.key){case"s":case"S":c.preventDefault(),Fe(),Vc();return;case"b":case"B":c.preventDefault(),Fe(),fn.length===1?(Ye(fn[0].id),V("power"),me(!1),Ai(!0)):fn.length>1?me(!0):(me(!0),V("power"),Ai(!0));return;case"g":case"G":c.preventDefault(),Fe(),vi.length===1?(Ot(vi[0].id),V("ground"),st(!1),Zt(!0)):vi.length>1?st(!0):(st(!0),V("ground"),Zt(!0));return;case"v":case"V":c.preventDefault(),Fe(),$t("via"),V("draw"),es(!0);return;case"p":case"P":c.preventDefault(),Fe(),$t("pad"),V("draw");return;case"y":case"Y":c.preventDefault(),Fe(),$t("testPoint"),V("draw");return;case"t":case"T":c.preventDefault(),Fe(),$t("trace"),V("draw");return;case"c":case"C":c.preventDefault(),Fe(),V("component"),Vl.current?Is(Vl.current):Is(null);return;case"e":case"E":c.preventDefault(),Fe(),V("erase");return;case"h":case"H":c.preventDefault(),Fe(),V("pan");return;case"x":case"X":c.preventDefault(),Fe(),V("center"),Ja(!0),xo.current&&clearTimeout(xo.current),xo.current=setTimeout(()=>{Ja(!1),V("select"),Ri(void 0)},2e3);return;case"m":case"M":if(!c.ctrlKey){c.preventDefault(),Fe(),rc(!1),V("magnify");return}break}}if(z==="transform"&&Wt){if(!(c.key==="ArrowLeft"||c.key==="ArrowRight"||c.key==="ArrowUp"||c.key==="ArrowDown"))return;c.preventDefault(),c.stopPropagation();const xe=document.activeElement;if(xe&&xe.tagName==="INPUT"){const ee=xe;ee.type==="radio"&&ee.blur()}if(Fn)return;if(No==="nudge"){let ee=0,ue=0;switch(c.key){case"ArrowLeft":ee=-1;break;case"ArrowRight":ee=1;break;case"ArrowUp":ue=-1;break;case"ArrowDown":ue=1;break;default:return}Wt==="top"&&o?s(Te=>Te?{...Te,x:Te.x+ee,y:Te.y+ue}:null):Wt==="bottom"&&u?f(Te=>Te?{...Te,x:Te.x+ee,y:Te.y+ue}:null):Wt==="both"&&(o&&s(Te=>Te?{...Te,x:Te.x+ee,y:Te.y+ue}:null),u&&f(Te=>Te?{...Te,x:Te.x+ee,y:Te.y+ue}:null))}else if(No==="scale"){let ee=0;switch(c.key){case"ArrowUp":ee=.01;break;case"ArrowDown":ee=-.01;break;case"ArrowRight":ee=.001;break;case"ArrowLeft":ee=-.001;break;default:return}if(Wt==="top"){o&&s(ue=>ue?{...ue,scale:Math.max(.1,Math.min(3,ue.scale+ee))}:null);return}if(Wt==="bottom"){u&&f(ue=>ue?{...ue,scale:Math.max(.1,Math.min(3,ue.scale+ee))}:null);return}if(Wt==="both"){o&&s(ue=>ue?{...ue,scale:Math.max(.1,Math.min(3,ue.scale+ee))}:null),u&&f(ue=>ue?{...ue,scale:Math.max(.1,Math.min(3,ue.scale+ee))}:null);return}}else if(No==="rotate"){let ee=0;switch(c.key){case"ArrowUp":ee=1;break;case"ArrowDown":ee=-1;break;case"ArrowRight":ee=.1;break;case"ArrowLeft":ee=-.1;break;default:return}if(Wt==="top"){o&&s(ue=>ue?{...ue,rotation:ue.rotation+ee}:null);return}if(Wt==="bottom"){u&&f(ue=>ue?{...ue,rotation:ue.rotation+ee}:null);return}if(Wt==="both"){o&&s(ue=>ue?{...ue,rotation:ue.rotation+ee}:null),u&&f(ue=>ue?{...ue,rotation:ue.rotation+ee}:null);return}}else if(No==="slant"){let ee=0,ue=0;switch(c.key){case"ArrowUp":ue=-.5;break;case"ArrowDown":ue=.5;break;case"ArrowLeft":ee=-.5;break;case"ArrowRight":ee=.5;break}if(ee!==0||ue!==0){const Te=Jc,Ce=Ne=>Math.max(-.7,Math.min(.7,Ne));if(Wt==="top"){o&&s(Ne=>Ne?{...Ne,skewX:Ce((Ne.skewX||0)+Te(ee)),skewY:Ce((Ne.skewY||0)+Te(ue))}:null);return}if(Wt==="bottom"){u&&f(Ne=>Ne?{...Ne,skewX:Ce((Ne.skewX||0)+Te(ee)),skewY:Ce((Ne.skewY||0)+Te(ue))}:null);return}if(Wt==="both"){o&&s(Ne=>Ne?{...Ne,skewX:Ce((Ne.skewX||0)+Te(ee)),skewY:Ce((Ne.skewY||0)+Te(ue))}:null),u&&f(Ne=>Ne?{...Ne,skewX:Ce((Ne.skewX||0)+Te(ee)),skewY:Ce((Ne.skewY||0)+Te(ue))}:null);return}}}else if(No==="keystone"){let ee=0,ue=0;switch(c.key){case"ArrowUp":ue=-.5;break;case"ArrowDown":ue=.5;break;case"ArrowLeft":ee=-.5;break;case"ArrowRight":ee=.5;break}if(ee!==0||ue!==0){const Te=Jc,Ce=Ne=>Math.max(-.35,Math.min(.35,Ne));if(Wt==="top"){o&&s(Ne=>Ne?{...Ne,keystoneH:Ce((Ne.keystoneH||0)+Te(ee)),keystoneV:Ce((Ne.keystoneV||0)+Te(ue))}:null);return}if(Wt==="bottom"){u&&f(Ne=>Ne?{...Ne,keystoneH:Ce((Ne.keystoneH||0)+Te(ee)),keystoneV:Ce((Ne.keystoneV||0)+Te(ue))}:null);return}if(Wt==="both"){o&&s(Ne=>Ne?{...Ne,keystoneH:Ce((Ne.keystoneH||0)+Te(ee)),keystoneV:Ce((Ne.keystoneV||0)+Te(ue))}:null),u&&f(Ne=>Ne?{...Ne,keystoneH:Ce((Ne.keystoneH||0)+Te(ee)),keystoneV:Ce((Ne.keystoneV||0)+Te(ue))}:null);return}}}}else{const U=c.target;if(U.tagName==="INPUT"&&U.type==="range"){const xe=U,ee=Number(xe.value),ue=Number(xe.min),Te=Number(xe.max),Ce=Number(xe.step)||1;switch(c.key){case"ArrowLeft":c.preventDefault();const Ne=Math.max(ue,ee-Ce);xe.value=Ne.toString(),xe.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":c.preventDefault();const Re=Math.min(Te,ee+Ce);xe.value=Re.toString(),xe.dispatchEvent(new Event("input",{bubbles:!0}));break}}}},[z,Wt,No,o,u,Cn,Hn,Dn,ri,ct,Ut,Ft,kn,_n,fn,rt,lu,Wn,W,k,J,ge,Vc,Mi,ki,an,kt,q,Ae,w,ye,Ic,Co,Ro,vt,Xn,$i,Ta,b,ii,cr,Sr,co,x,s,f,Hr,Sa,di,h,wt,Kt,bn,tn,V,va,wa,Aa,pa,kr,eo,Mr,Gr,fo,bo,vo,Zo,qa,ms,Ci,En,$o,Yi,es,Fa,uo,Xr,Ko,gs,yr,ts,ys,Ai,Zt,gi]);_t.useEffect(()=>{z!=="transform"&&ko(null)},[z]),_t.useEffect(()=>{window.addEventListener("keydown",hf,!0);const c=y=>{y.key==="Alt"&&(uf(!1),Qa(!1),Mo(null))};return window.addEventListener("keyup",c,!0),()=>{window.removeEventListener("keydown",hf,!0),window.removeEventListener("keyup",c,!0)}},[hf,Dn,ri,Qi,Qi,kn,_n,cu,pf,Vc,Hn,Ut,Ft,Mi,ki,Ro,Il,z]);const uc=I.useCallback(()=>{zt.current={},X("#AA4499"),S("#F781BF"),ie(6),$(6),Dt("trace","#AA4499","top"),Dt("trace","#F781BF","bottom"),Nt("trace",6,"top"),Nt("trace",6,"bottom"),he("#0072B2"),be("#56B4E9"),A(18),B(18),Dt("pad","#0072B2","top"),Dt("pad","#56B4E9","bottom"),Nt("pad",18,"top"),Nt("pad",18,"bottom"),It("#6A3D9A"),Pt("#9467BD"),Qt(18),nn(18),Dt("component","#6A3D9A","top"),Dt("component","#9467BD","bottom"),Nt("component",18,"top"),Nt("component",18,"bottom"),_o("top"),Q("#AA4499"),R(6),as([{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),Ys([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),Nt("power",18),Nt("ground",18),tr(!1),qi(!1),Ra(!1),Ps(!1),oa(!1),Ma(!1),Vt("top"),V("select"),x(50),D(!1),h("overlay"),a1(),jn()},[Dt,Nt,jn]),uu=I.useCallback(()=>{Qr(null),hl(null),Gl&&(Gl.current=null),dc&&(dc.current=null),Do(""),Er("pcb_project"),Vr(!1),Ia(null),fs(""),Js([]),Ol(-1),Cl&&(Cl.current=""),Yr.current=!1,ca(!1),co(!1),Ks(null),Za(null),Wi.current&&(clearInterval(Wi.current),Wi.current=null),s(null),f(null),jn(),kt([]),Hr([]),Sa([]),Vs([]),Pl([]),Nn([]),wn.current=[],Mi([]),ki([]),so(null),qo(null),q([]),Ae([]),lt(null),as([{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),Ys([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),wt(new Set),Kt(new Set),bn(new Set),tn(new Set),Dl(!1),Gi([]),h("overlay"),ii(1),Pa(0,0),za(!0),Vt("top"),Rs({}),Ja(!1),xo.current&&(clearTimeout(xo.current),xo.current=null),ko(null),go(!1),Xt(null),ya("nudge"),O(!1),x(50),D(!1),C(2e3),tr(!1),qi(!1),Tr(!1),zs(!1),Ra(!1),Ps(!1),oa(!1),Ma(!1),$o(!0),Yi(!0),es(!0),Fa(!0),uo(!0),Xr(!0),Ko(!0),gs(!0),yr(!0),ts(!0),ys(!0),Ai(!0),Zt(!0),gi(!0),wo(!0),V("select"),$t("trace"),_o("top"),xa("top"),Ts("top"),ra("top"),ba.current="top",js.current="top",ks.current="top",Hs.current="top",zt.current={},Yt(!0),Ki(!1),a1(),ss(null),Wo({visible:!1,text:""}),Gs({visible:!1,title:"",message:""}),Ba({visible:!1}),lo({visible:!1}),la({visible:!1,projectName:"",locationPath:"",locationHandle:null}),ls({visible:!1,filename:"",locationPath:"",locationHandle:null}),aa({visible:!1,interval:null}),Ca({visible:!1,source:"new",interval:5}),fr(!1),Ul(!1),We(!1),qt(!1),Ms(!1),ci(!1),So(!1),cs(!1),Kr(null),Mo(null),Bo(null),ps(!1),Es.current=null,yl.current=null,Gt(!1),xn(null),Xi.current=0,Un.current=!1,console.log("Project closed: All state cleared and browser permissions released")},[Qr,hl,Do,Er,Vr,Ia,fs,Js,Ol,s,f,kt,Nn,Hr,Sa,Vs,Pl,Mi,ki,so,qo,q,Ae,lt,as,Ys,wt,Kt,bn,tn,Dl,Gi,h,ii,Fo,za,Vt,Rs,Ja,ko,go,Xt,ya,O,x,D,C,tr,qi,Tr,zs,Ra,Ps,oa,Ma,$o,Yi,es,Fa,uo,Xr,Ko,gs,yr,ts,ys,Ai,Zt,gi,V,$t,_o,xa,Ts,ra,Yt,Ki,ss,Wo,Gs,Ba,la,ls,aa,Ca,jn,fr,Ul,We,qt,Ms,ci,So,Kr,Mo,Bo,ps,Gt,xn]),Yl=I.useCallback(()=>{uc(),setTimeout(()=>{ii(1),di({x:0,y:0}),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),wt(new Set),Kt(new Set),bn(new Set),tn(new Set)},200)},[uc,ii,di]);_t.useEffect(()=>{Yl()},[]),_t.useEffect(()=>{if(!Po.visible)return;const c=[];Cn.size>0,Cn.size===0&&Hn.size===0&&Dn.size===0&&ri.size===0&&c.push(`
No objects selected.`);const y=c.join(`
`);Wo(_=>({..._,text:y}))},[Po.visible,Cn,Hn,Dn,ri,ct,Ut,Ft,kn,_n,fn]),_t.useEffect(()=>{const c=y=>{const _=ut.current;if(_&&!(y.target instanceof Node&&_.contains(y.target))){if(lu(),ac){const G=Hl.current;(!G||!(y.target instanceof Node)||!G.contains(y.target))&&sc(!1)}if(Ml){const G=hs.current;!y.target?.closest('button[title="Color Picker"]')&&(!G||!(y.target instanceof Node)||!G.contains(y.target))&&fr(!1)}}};return document.addEventListener("mousedown",c,!0),()=>document.removeEventListener("mousedown",c,!0)},[lu,ac,Os,Ml]);const fu=c=>{if(!c.current)return{top:0,left:0};const y=c.current.getBoundingClientRect(),_=Cc.current?.getBoundingClientRect();return _?{top:y.top-_.top,left:y.left-_.left+y.width+4}:{top:0,left:0}},fc=I.useCallback(()=>{Hl.current&&wl.current&&requestAnimationFrame(()=>{if(Hl.current&&wl.current){const c=fu(wl);Hl.current.style.top=`${c.top}px`,Hl.current.style.left=`${c.left}px`}})},[]),gf=I.useCallback(()=>{lc.current&&Mu.current&&requestAnimationFrame(()=>{if(lc.current&&Mu.current){const c=fu(Mu);lc.current.style.top=`${c.top}px`,lc.current.style.left=`${c.left}px`}})},[]),yf=I.useCallback(()=>{_c.current&&su.current&&requestAnimationFrame(()=>{if(_c.current&&su.current){const c=fu(su);_c.current.style.top=`${c.top}px`,_c.current.style.left=`${c.left}px`}})},[]);_t.useEffect(()=>{ac&&fc()},[ac,fc]),_t.useEffect(()=>{Os&&gf()},[Os,gf]),_t.useEffect(()=>{ru&&yf()},[ru,yf]),_t.useEffect(()=>{if(fe&&el.current&&lf.current){const c=fu(lf);el.current.style.top=`${c.top}px`,el.current.style.left=`${c.left}px`}},[fe]),_t.useEffect(()=>{if(St&&cc.current&&cf.current){const c=fu(cf);cc.current.style.top=`${c.top}px`,cc.current.style.left=`${c.left}px`}},[St]),_t.useEffect(()=>{const c=y=>{if(!Pr)return;const _=document.querySelector("[data-component-editor-dialog]");if(_&&y.target instanceof Node&&_.contains(y.target)){const Be=y.target;if(Be.tagName==="BUTTON"||Be.tagName==="INPUT"||Be.closest("button")||Be.closest("input"))return}const G=ut.current;if(!G)return;const re=G.getBoundingClientRect(),Se=y.clientX,U=y.clientY;if(Se<re.left||Se>re.right||U<re.top||U>re.bottom)return;const xe=G.width/re.width,ee=G.height/re.height,ue=Se-re.left,Te=U-re.top,Ce=ue*xe,Ne=Te*ee,Re=Ce-5,Oe=Ne-5,we=Cd(Re,Oe,Sn,vt,Xn,$i),Ee=we.x,_e=we.y;let $e=1/0,ft=null,gt=null;const xt=Math.max(6/vt,4),Lt=[...Ut,...Ft].find(Be=>Be.id===Pr.componentId)?.layer||"top";for(const Be of ct)if((Be.type==="via"||Be.type==="pad")&&Be.points.length>0){if(Be.type==="pad"&&(Be.layer||"top")!==Lt)continue;const qe=Be.points[0],Ue=Math.max(1,Be.size/2),et=Math.hypot(qe.x-Ee,qe.y-_e),nt=Math.max(Ue,xt);et<=nt&&et<$e&&($e=et,ft=qe.id??null,gt=Be)}if(ft!=null&&gt){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${ft}`),console.log(`  Connecting pin ${Pr.pinIndex+1} of component ${Pr.componentId}`);const Be=String(ft),qe=Pr.pinIndex,Ue=Pr.componentId,et=Ut.find(Ct=>Ct.id===Ue),nt=Ft.find(Ct=>Ct.id===Ue);if(et){const Ct=ct;Mi(Et=>{const pn=Et.find(At=>At.id===Ue);if(!pn)return Et;const Bn=pn.pinConnections||[],sn=Bn.length>0?[...Bn]:new Array(pn.pinCount).fill("");let On;if(sn.length!==pn.pinCount){On=new Array(pn.pinCount).fill("");for(let At=0;At<Math.min(sn.length,pn.pinCount);At++)On[At]=sn[At]||""}else On=[...sn];On[qe]=Be,console.log(`Updated pin ${qe} with value: ${Be}`),console.log("New pinConnections:",On);const $n=Et.find(At=>At.id===Ue),hn=$n?x0($n,On,Ct):null;return Et.map(At=>{if(At.id===Ue){const ln={...At,pinConnections:On};return hn&&(ln.pinPolarities=hn),ln}return At})})}else if(nt){const Ct=ct;ki(Et=>{const pn=Et.find(At=>At.id===Ue);if(!pn)return Et;const Bn=pn.pinConnections||[],sn=Bn.length>0?[...Bn]:new Array(pn.pinCount).fill("");let On;if(sn.length!==pn.pinCount){On=new Array(pn.pinCount).fill("");for(let At=0;At<Math.min(sn.length,pn.pinCount);At++)On[At]=sn[At]||""}else On=[...sn];On[qe]=Be,console.log(`Updated pin ${qe} with value: ${Be}`),console.log("New pinConnections:",On);const $n=Et.find(At=>At.id===Ue),hn=$n?x0($n,On,Ct):null;return Et.map(At=>{if(At.id===Ue){const ln={...At,pinConnections:On};return hn&&(ln.pinPolarities=hn),ln}return At})})}setTimeout(()=>{qo(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Pr)return document.addEventListener("mousedown",c,!0),()=>document.removeEventListener("mousedown",c,!0)},[Pr,Ut,Ft,ct,vt,Sn.x,Sn.y,Xn,$i]);const Va=I.useCallback((c,y,_,G)=>{const re=window.innerWidth,Se=window.innerHeight,U=10;let xe=Math.max(U,Math.min(c,re-_-U)),ee=Math.max(U,Math.min(y,Se-G-U));return{x:xe,y:ee}},[]);_t.useEffect(()=>{if(!cl)return;const c=_=>{if(!Ga)return;const G={x:_.clientX-Ga.x,y:_.clientY-Ga.y},re=Va(G.x,G.y,250,window.innerHeight*.4);Ls(re),localStorage.setItem("componentDialogPosition",JSON.stringify(re))},y=()=>{Ws(!1),El(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[cl,Ga,Va]),_t.useEffect(()=>{if(!Oo)return;const c=_=>{if(!ni)return;const G={x:_.clientX-ni.x,y:_.clientY-ni.y},re=Va(G.x,G.y,250,window.innerHeight*.4);Ar(re),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(re))},y=()=>{to(!1),Pi(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[Oo,ni,Va]),_t.useEffect(()=>{if(!Ni)return;const c=_=>{if(!Oi)return;const G={x:_.clientX-Oi.x,y:_.clientY-Oi.y};pr(G),localStorage.setItem("notesDialogPosition",JSON.stringify(G))},y=()=>{$r(!1),no(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[Ni,Oi]),_t.useEffect(()=>{if(mr&&Nr===null){const c=localStorage.getItem("notesDialogPosition");if(c)try{const y=JSON.parse(c);pr(y)}catch{pr({x:window.innerWidth-550,y:100})}else pr({x:window.innerWidth-550,y:100})}},[mr,Nr]),_t.useEffect(()=>{if(!vn)return;const c=_=>{if(!Jo)return;const G={x:_.clientX-Jo.x,y:_.clientY-Jo.y};dn(G),localStorage.setItem("projectNotesDialogPosition",JSON.stringify(G))},y=()=>{_i(!1),Ha(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[vn,Jo]),_t.useEffect(()=>{if(Ti&&sr===null){const c=localStorage.getItem("projectNotesDialogPosition");if(c)try{const y=JSON.parse(c);dn(y)}catch{dn({x:100,y:100})}else dn({x:100,y:100})}},[Ti,sr]);const Iu=I.useCallback(()=>{So(!0)},[]);_t.useEffect(()=>{if(Ea&&Ea.visible&&Ho===null){const c=localStorage.getItem("componentDialogPosition");let y;if(c)try{const _=JSON.parse(c);y=Va(_.x,_.y,250,window.innerHeight*.4),Ls(y)}catch{y=Va(window.innerWidth-280,90,250,window.innerHeight*.4),Ls(y)}else y=Va(window.innerWidth-280,90,250,window.innerHeight*.4),Ls(y)}else!Ea||Ea.visible},[Ea,Ho,Va]),_t.useEffect(()=>{if(Po.visible&&yi===null){const c=localStorage.getItem("detailedInfoDialogPosition");let y;if(c)try{const _=JSON.parse(c);y=Va(_.x,_.y,400,window.innerHeight*.8),Ar(y)}catch{y=Va(window.innerWidth-450,90,400,window.innerHeight*.8),Ar(y)}else y=Va(window.innerWidth-450,90,400,window.innerHeight*.8),Ar(y)}else Po.visible},[Po.visible,yi,Va]),_t.useEffect(()=>{const c=()=>{if(Ho){const y=Va(Ho.x,Ho.y,250,window.innerHeight*.4);(y.x!==Ho.x||y.y!==Ho.y)&&(Ls(y),localStorage.setItem("componentDialogPosition",JSON.stringify(y)))}if(yi){const y=Va(yi.x,yi.y,400,window.innerHeight*.8);(y.x!==yi.x||y.y!==yi.y)&&(Ar(y),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(y)))}};return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[Ho,yi,Va]);const Yd=I.useCallback(c=>{switch(c){case"transparency":x(50);break;case"brushSize":R(3);break}},[]),mf=_t.useRef(E);_t.useEffect(()=>{mf.current=E},[E]),_t.useEffect(()=>{if(T){Tc.current=performance.now(),x(0);const c=y=>{const _=Tc.current||y,G=mf.current,re=(y-_)%G/G,Se=1-Math.abs(1-2*re);x(Math.round(Se*100)),fa.current=requestAnimationFrame(c)};fa.current=requestAnimationFrame(c)}return()=>{fa.current&&(cancelAnimationFrame(fa.current),fa.current=null)}},[T]),_t.useEffect(()=>{if(z==="center"){Ri(hx());return}const c=z==="erase"?"erase":z==="magnify"?"magnify":z==="ground"?"ground":z==="power"?"power":z==="component"?"component":z==="draw"?rt==="via"?"via":rt==="pad"?"pad":rt==="testPoint"?"testPoint":"trace":"default";if(c==="default"){Ri(void 0);return}const y=vt,_=c==="magnify"?18:Math.max(c==="component"?16:c==="power"||c==="ground"?12:6,Math.round(N*y)),re=_+4*2+(c==="magnify"?8:0),Se=document.createElement("canvas");Se.width=re,Se.height=re;const U=Se.getContext("2d");if(!U){Ri(void 0);return}const xe=re/2,ee=re/2,ue=_/2;if(U.clearRect(0,0,re,re),c==="via"){const Ce=ue,Ne=ue*.5,Re=ue*.7,we=ei.get("via").color;U.fillStyle=we,U.beginPath(),U.arc(xe,ee,Ce,0,La),U.arc(xe,ee,Ne,0,La),U.fill("evenodd"),U.strokeStyle="#808080",U.lineWidth=1,U.beginPath(),U.moveTo(xe-Re,ee),U.lineTo(xe+Re,ee),U.stroke(),U.beginPath(),U.moveTo(xe,ee-Re),U.lineTo(xe,ee+Re),U.stroke()}else if(c==="pad"){const Ce=Si==="top"?"padTop":"padBottom",Ne=ei.get(Ce),Re=Ne.color,we=Math.max(6,Math.round(Ne.size*y))/2,Ee=we*2,_e=Ee*.5,$e=we*.7;U.fillStyle=Re,U.beginPath(),U.rect(xe-we,ee-we,Ee,Ee),U.rect(xe-_e/2,ee-_e/2,_e,_e),U.fill("evenodd"),U.strokeStyle="#808080",U.lineWidth=1,U.beginPath(),U.moveTo(xe-$e,ee),U.lineTo(xe+$e,ee),U.stroke(),U.beginPath(),U.moveTo(xe,ee-$e),U.lineTo(xe,ee+$e),U.stroke()}else if(c==="trace"){const Ce=Wn==="top"?"traceTop":"traceBottom",Re=ei.get(Ce).color;U.fillStyle=Re,U.beginPath(),U.arc(xe,ee,ue,0,La),U.fill()}else if(c==="testPoint"){const Ce=Pn==="top"?"testPointTop":"testPointBottom",Re=ei.get(Ce).size*y;Ri(gx(Re));return}else if(c==="erase"){const Ce=N*y,Ne=Math.max(Ce*.75,8),Re=Math.max(Ce*.5,6),Oe=Math.max(Ce*.2,2);U.save(),U.translate(xe,ee),U.rotate(Jc(-35)),U.fillStyle="#f5a3b3",U.strokeStyle="#111",U.lineWidth=1.5;const we=1.5,Ee=-Ne/2,_e=-Re/2;U.beginPath(),U.moveTo(Ee+we,_e),U.lineTo(Ee+Ne-we,_e),U.quadraticCurveTo(Ee+Ne,_e,Ee+Ne,_e+we),U.lineTo(Ee+Ne,_e+Re-we),U.quadraticCurveTo(Ee+Ne,_e+Re,Ee+Ne-we,_e+Re),U.lineTo(Ee+we,_e+Re),U.quadraticCurveTo(Ee,_e+Re,Ee,_e+Re-we),U.lineTo(Ee,_e+we),U.quadraticCurveTo(Ee,_e,Ee+we,_e),U.closePath(),U.fill(),U.stroke(),U.fillStyle="#f18ea4",U.beginPath(),U.rect(-Ne/2,Re/2-Oe,Ne,Oe),U.fill(),U.restore()}else if(c==="magnify"){const Ce=ue;U.strokeStyle="#111",U.lineWidth=2,U.beginPath(),U.arc(xe-2,ee-2,Ce,0,La),U.stroke();const Ne=xe+Ce*.6,Re=ee+Ce*.6,Oe=Ne+6,we=Re+6;U.beginPath(),U.moveTo(Ne,Re),U.lineTo(Oe,we),U.stroke(),U.beginPath(),U.moveTo(xe-6,ee-2),U.lineTo(xe+2,ee-2),U.stroke(),ml||(U.beginPath(),U.moveTo(xe-2,ee-6),U.lineTo(xe-2,ee+2),U.stroke())}else if(c==="ground"){const Ne=(Bt?vi.find(Oe=>Oe.id===Bt):null)?.color||"#000000";if(U.strokeStyle=Ne,U.lineWidth=2,U.lineCap="round",Bt==="groundbus-earth"){const Oe=ue*1.5,we=Oe*.9,Ee=Oe*.24,_e=Oe*1.6;U.beginPath(),U.moveTo(xe,ee-we/2),U.lineTo(xe,ee+we/2),U.stroke();for(let $e=0;$e<3;$e++){const ft=ee+we/2+$e*Ee,gt=_e*(1-$e*.25);U.beginPath(),U.moveTo(xe-gt/2,ft),U.lineTo(xe+gt/2,ft),U.stroke()}}else{const Oe=ue*.8;U.beginPath(),U.arc(xe,ee,ue,0,La),U.stroke(),U.beginPath(),U.moveTo(xe,ee-ue-Oe),U.lineTo(xe,ee+ue+Oe),U.stroke(),U.beginPath(),U.moveTo(xe-ue-Oe,ee),U.lineTo(xe+ue+Oe,ee),U.stroke()}}else if(c==="power"){const Ne=(Pe?fn.find(Oe=>Oe.id===Pe):null)?.color||"#ff0000";U.strokeStyle=Ne,U.lineWidth=2,U.lineCap="round";const Re=ue*.8;U.beginPath(),U.arc(xe,ee,ue,0,La),U.stroke(),U.beginPath(),U.moveTo(xe,ee-ue-Re),U.lineTo(xe,ee+ue+Re),U.stroke(),U.beginPath(),U.moveTo(xe-ue-Re,ee),U.lineTo(xe+ue+Re,ee),U.stroke()}else if(c==="component"){const Ne=(Yn||"top")==="top"?"componentTop":"componentBottom",Oe=ei.get(Ne).color,we=_,Ee=we/2;U.strokeStyle=Oe,U.lineWidth=2,U.fillStyle="rgba(255,255,255,0.9)",U.beginPath(),U.rect(xe-Ee,ee-Ee,we,we),U.fill(),U.stroke();const _e=(()=>{if(Or?.componentDefinition?.designators?.[0]){const $e=Or.componentDefinition.designators[0];return $e.length<=3?$e:$e.substring(0,3)}return Or?.designator?Or.designator.length<=3?Or.designator:Or.designator.substring(0,3):io?g0(io):"?"})();U.fillStyle=Oe,U.font=`bold ${Math.max(8,we*.35)}px sans-serif`,U.textAlign="center",U.textBaseline="middle",U.fillText(_e,xe,ee)}const Te=`url(${Se.toDataURL()}) ${Math.round(xe)} ${Math.round(ee)}, crosshair`;Ri(Te)},[z,rt,se,N,vt,ml,io,Or,Pe,Bt,fn,vi,In,Wn,Si,Pn,Yn,Fi.toolInstanceId,Fi.color,Fi.size]),_t.useEffect(()=>{Bu()},[Bu]),_t.useEffect(()=>{Bu()},[xl.width,xl.height]),_t.useEffect(()=>{Cn.size===0&&z==="draw"&&rt==="trace"&&N>=1&&(Ht==="top"?ie(N):$(N))},[N,z,rt,Ht,Cn]),_t.useEffect(()=>{kt(c=>c.map(y=>{if(y.type==="via"&&y.points.length>0&&y.points[0].id!==void 0){const _=y.points[0].id,G=ns(_,fn);if(y.viaType!==G)return{...y,viaType:G}}else if(y.type==="pad"&&y.points.length>0&&y.points[0].id!==void 0){const _=y.points[0].id,G=ji(_,fn);if(y.padType!==G)return{...y,padType:G}}else if(y.type==="testPoint"&&y.points.length>0&&y.points[0].id!==void 0){const _=y.points[0].id,G=Bs(_,fn),re=G.includes("Power")?"power":G.includes("Ground")?"ground":G.includes("Signal")?"signal":"unknown";if(y.testPointType!==re)return{...y,testPointType:re}}return y}))},[kn,_n,fn,ns,ji,Bs]);const Gd=I.useCallback(()=>{const c=ut.current;if(!c)return;const y=c.toDataURL("image/png"),_=window.open("","_blank");if(!_){alert("Please allow popups to print the canvas.");return}_.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${y}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),_.document.close()},[]);_t.useEffect(()=>{const c=_=>{_.key==="Shift"&&rc(!0)},y=_=>{_.key==="Shift"&&rc(!1)};return window.addEventListener("keydown",c),window.addEventListener("keyup",y),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",y)}},[]);const Jf=I.useCallback(c=>{if(c.size===0)return;const y=Array.from(c).map(_=>String(_));kt(_=>_.map(G=>{if(G.type==="trace"){const re=G.points.filter(Se=>Se.id===void 0?!0:!c.has(Se.id));return re.length<2?null:{...G,points:re}}return G}).filter(G=>G!==null)),Mi(_=>_.map(G=>{const re=G.pinConnections||[];if(re.some(U=>U&&y.includes(U))){const U=re.map(xe=>xe&&y.includes(xe)?"":xe);return{...G,pinConnections:U}}return G})),ki(_=>_.map(G=>{const re=G.pinConnections||[];if(re.some(U=>U&&y.includes(U))){const U=re.map(xe=>xe&&y.includes(xe)?"":xe);return{...G,pinConnections:U}}return G}))},[kt,Mi,ki]),Xd=I.useRef(new Set);_t.useEffect(()=>{const c=new Set;for(const _ of ct)if((_.type==="via"||_.type==="pad")&&_.points.length>0){const G=_.points[0].id;G!==void 0&&c.add(G)}const y=new Set;for(const _ of Xd.current)c.has(_)||y.add(_);y.size>0&&Jf(y),Xd.current=c},[ct,Jf]),_t.useEffect(()=>{kt(c=>c.map(y=>{if(y.type==="via"&&y.points.length>0&&y.points[0].id!==void 0){const _=y.points[0].id,G=ns(_,fn);if(y.viaType!==G)return{...y,viaType:G}}else if(y.type==="pad"&&y.points.length>0&&y.points[0].id!==void 0){const _=y.points[0].id,G=ji(_,fn);if(y.padType!==G)return{...y,padType:G}}else if(y.type==="testPoint"&&y.points.length>0&&y.points[0].id!==void 0){const _=y.points[0].id,G=Bs(_,fn),re=G.includes("Power")?"power":G.includes("Ground")?"ground":G.includes("Signal")?"signal":"unknown";if(y.testPointType!==re)return{...y,testPointType:re}}return y}))},[kn,_n,fn,ns,ji,Bs]),_t.useEffect(()=>{const c=y=>{hi.current&&(hi.current.contains(y.target)||ss(null))};return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[]),_t.useEffect(()=>{const c=(y,_)=>{const G=y.current;if(!G)return;const re=G.getContext("2d");if(!re)return;const Se=G.width,U=G.height;if(re.clearRect(0,0,Se,U),re.fillStyle="#fff",re.fillRect(0,0,Se,U),_?.bitmap){const xe=_.bitmap,ee=Math.min(Se/xe.width,U/xe.height),ue=Math.max(1,Math.floor(xe.width*ee)),Te=Math.max(1,Math.floor(xe.height*ee)),Ce=Math.floor((Se-ue)/2),Ne=Math.floor((U-Te)/2);re.drawImage(xe,Ce,Ne,ue,Te)}re.strokeStyle="#ddd",re.lineWidth=1,re.strokeRect(.5,.5,Se-1,U-1)};c(da,o),c(Rr,u)},[o,u]),_t.useEffect(()=>{const c=[],y=[],_=[],G=[];for(const re of ct)if(re.type==="via"&&re.points.length>=1){const Se=re.points[0],U={id:re.id,pointId:Se.id,x:Se.x,y:Se.y,size:re.size,color:re.color};c.push(U)}else if(re.type==="pad"&&re.points.length>=1){const Se=re.points[0],U={id:re.id,pointId:Se.id,x:Se.x,y:Se.y,size:re.size,color:re.color,layer:re.layer||"top"};y.push(U)}else if(re.type==="trace"&&re.points.length>=2)for(let Se=0;Se<re.points.length-1;Se++){const U=re.points[Se],xe=re.points[Se+1],ee={id:re.id,startPointId:U.id,endPointId:xe.id,x1:U.x,y1:U.y,x2:xe.x,y2:xe.y,size:re.size,color:re.color};re.layer==="top"?_.push(ee):G.push(ee)}Hr(c),Sa(y),Vs(_),Pl(G)},[ct]);const du=I.useRef(ct);du.current=ct;const hr=I.useCallback(()=>{const y=new Date().toISOString(),_=l1();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:y,view:{currentView:v,viewScale:vt,cameraWorldCenter:xi,showBothLayers:qs,selectedDrawingLayer:Ht},images:{top:o?{name:o.name,width:o.width,height:o.height,filePath:o.filePath||o.name,x:o.x,y:o.y,scale:o.scale,rotation:o.rotation,flipX:o.flipX,flipY:o.flipY,skewX:o.skewX,skewY:o.skewY,keystoneV:o.keystoneV,keystoneH:o.keystoneH,brightness:o.brightness??100,contrast:o.contrast??100}:null,bottom:u?{name:u.name,width:u.width,height:u.height,filePath:u.filePath||u.name,x:u.x,y:u.y,scale:u.scale,rotation:u.rotation,flipX:u.flipX,flipY:u.flipY,skewX:u.skewX,skewY:u.skewY,keystoneV:u.keystoneV,keystoneH:u.keystoneH,brightness:u.brightness??100,contrast:u.contrast??100}:null},projectDirectoryName:Gl.current?Gl.current.name||null:zi&&zi.name||null,drawing:{drawingStrokes:du.current.filter(re=>!(re.type==="trace"&&re.points.length<2)),vias:va,tracesTop:_s,tracesBottom:zl,componentsTop:Ut,componentsBottom:Ft,grounds:_n,powers:kn},powerBuses:fn,groundBuses:vi,pointIdCounter:o1(),designatorCounters:{...zt.current},autoAssignDesignators:An,useGlobalDesignatorCounters:ti,traceColors:{top:In.get("trace")?.layerSettings.get("top")?.color||W,bottom:In.get("trace")?.layerSettings.get("bottom")?.color||k},traceSizes:{top:In.get("trace")?.layerSettings.get("top")?.size||J,bottom:In.get("trace")?.layerSettings.get("bottom")?.size||ge},padColors:{top:In.get("pad")?.layerSettings.get("top")?.color||te,bottom:In.get("pad")?.layerSettings.get("bottom")?.color||je},padSizes:{top:In.get("pad")?.layerSettings.get("top")?.size||F,bottom:In.get("pad")?.layerSettings.get("bottom")?.size||M},componentColors:{top:In.get("component")?.layerSettings.get("top")?.color||jt,bottom:In.get("component")?.layerSettings.get("bottom")?.color||pe},componentSizes:{top:In.get("component")?.layerSettings.get("top")?.size||gn,bottom:In.get("component")?.layerSettings.get("bottom")?.size||ht},testPointColors:{top:In.get("testPoint")?.layerSettings.get("top")?.color||de,bottom:In.get("testPoint")?.layerSettings.get("bottom")?.color||De},testPointSizes:{top:In.get("testPoint")?.layerSettings.get("top")?.size||ze,bottom:In.get("testPoint")?.layerSettings.get("bottom")?.size||Xe},componentConnectionColor:Rt,componentConnectionSize:en,toolLayerDefaults:{trace:Wn,pad:Si,testPoint:Pn,component:Yn},toolSettings:{trace:In.get("trace")?.settings||{color:"#ff0000",size:6},via:In.get("via")?.settings||{color:"#ff0000",size:18},pad:In.get("pad")?.settings||{color:"#ff0000",size:18},component:In.get("component")?.settings||{color:"#ff0000",size:18},ground:In.get("ground")?.settings||{color:"#000000",size:18},power:In.get("power")?.settings||{color:"#ff0000",size:18},erase:In.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:Fn,areViasLocked:wi,arePadsLocked:Hi,areTracesLocked:ur,areComponentsLocked:Lo,areGroundNodesLocked:Dr,arePowerNodesLocked:Qi},visibility:{showViasLayer:kr,showTopPadsLayer:Gr,showBottomPadsLayer:fo,showTopTracesLayer:eo,showBottomTracesLayer:Mr,showTopComponents:Zo,showBottomComponents:qa,showPowerLayer:ms,showGroundLayer:Ci,showConnectionsLayer:En,showTraceCornerDots:Br},autoSave:{enabled:jr,interval:Oa,baseName:gl},projectInfo:{name:Wr},projectNotes:_r,homeViews:Ro,toolInstances:ei.getAll()},timestamp:_}},[v,vt,xi,qs,Ht,o,u,ct,va,_s,zl,Ut,Ft,_n,In,Fn,wi,Hi,ur,Lo,Dr,Qi,fn,vi,o1,W,k,J,ge,te,je,F,M,jt,pe,gn,ht,Wn,Si,Pn,Yn,jr,Oa,gl,Wr,kr,Gr,fo,eo,Mr,Zo,qa,ms,Ci,En,An,ti,_r,Ro]),ha=I.useRef(hr);ha.current=hr;const dc=I.useRef(Zs);dc.current=Zs;const Cl=I.useRef(gl);Cl.current=gl;const Qf=I.useRef(Do);Qf.current=Do;const ed=I.useRef(vc);ed.current=vc;const ga=I.useRef([]);ga.current=nc;const Wc=I.useRef(-1);Wc.current=wc;const Gl=I.useRef(null),Uu=I.useRef(!1);_t.useEffect(()=>{Uu.current||(Gl.current=zi)},[zi]);const td=I.useCallback(async()=>{console.log("Auto save: performAutoSave called");let c=Gl.current,y=Cl.current;if(console.log(`Auto save: projectDirHandle=${c?`set (${c.name})`:"missing"}, baseName=${y||"missing"}`),!c||!y){console.warn(`Auto save: Missing project directory handle (${!c}) or base name (${!y}). Please create a new project or open an existing project first.`),Vr(!1),Wi.current&&(clearInterval(Wi.current),Wi.current=null);return}if(!Yr.current){console.log("Auto save: Skipping - no changes since last save");return}const _=du.current,G=_.filter(Te=>Te.type==="trace"&&Te.points.length<2);if(G.length>0){console.log(`Auto save: Cleaning up ${G.length} single-point trace(s) before save`),G.forEach(Ce=>console.log(`  - Removing single-point trace ${Ce.id}`));const Te=_.filter(Ce=>!(Ce.type==="trace"&&Ce.points.length<2));kt(Te),du.current=Te}console.log("Auto save: Starting save...");const{project:re,timestamp:Se}=ha.current(),xe=`${zf(y)}_${Se}.json`,ee=JSON.stringify(re,null,2),ue=new Blob([ee],{type:"application/json"});try{let Te;try{Te=await c.getDirectoryHandle("history",{create:!0})}catch(we){console.error("Failed to get/create history directory:",we);return}try{const we=[],Ee=ed.current;for await(const _e of c.keys())try{if(_e==="history"||_e===xe)continue;const ft=await(await c.getFileHandle(_e)).getFile();if(!_e.endsWith(".json"))continue;const gt=await ft.text();try{const xt=JSON.parse(gt);if(xt.version&&(xt.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!xt.fileType)){we.push(_e);const Je=xt.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${_e} (${Je}${_e===Ee?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const _e of we)try{const gt=await(await(await c.getFileHandle(_e)).getFile()).text(),Je=await(await Te.getFileHandle(_e,{create:!0})).createWritable();await Je.write(new Blob([gt],{type:"application/json"})),await Je.close(),await c.removeEntry(_e),console.log(`Auto save: Moved ${_e} from root to history/`)}catch($e){console.warn(`Auto save: Failed to move ${_e} to history:`,$e)}}catch(we){console.warn("Auto save: Error checking for old files in root:",we)}const Ne=await(await c.getFileHandle(xe,{create:!0})).createWritable();await Ne.write(ue),await Ne.close(),console.log(`Auto save: Successfully saved ${xe} to root directory`),Qf.current(xe);const Re=ga.current,Oe=[xe,...Re.filter(we=>we!==xe)].sort((we,Ee)=>Ee.localeCompare(we));Js(Oe),ga.current=Oe,Ol(0),Wc.current=0,Yr.current=!1,ca(!1)}catch(Te){console.error("Auto save failed:",Te)}},[]);Sc.current=td;const Lc=I.useCallback(async()=>{const{project:c}=hr(),y=JSON.stringify(c,null,2),_=new Blob([y],{type:"application/json"});if(zi&&Wr)try{let ue=null;try{ue=await zi.getDirectoryHandle("history",{create:!0})}catch(Ee){console.error("Failed to get/create history directory:",Ee),ue=null}const Te=Wr.replace(/\.json$/i,""),Ce=zf(Te),{timestamp:Ne}=hr(),Re=`${Ce}_${Ne}.json`;if(ue)try{const Ee=[];for await(const _e of zi.keys())try{if(_e==="history"||_e===Re)continue;const ft=await(await zi.getFileHandle(_e)).getFile();if(!_e.endsWith(".json"))continue;const gt=await ft.text();try{JSON.parse(gt).version&&(Ee.push(_e),console.log(`Save: Found PCB project file in root: ${_e}`))}catch{continue}}catch{continue}for(const _e of Ee)try{const gt=await(await(await zi.getFileHandle(_e)).getFile()).text(),Je=await(await ue.getFileHandle(_e,{create:!0})).createWritable();await Je.write(new Blob([gt],{type:"application/json"})),await Je.close(),await zi.removeEntry(_e),console.log(`Save: Moved ${_e} from root to history/`)}catch($e){console.warn(`Save: Failed to move ${_e} to history:`,$e)}}catch(Ee){console.warn("Save: Error checking for old files in root:",Ee)}const we=await(await zi.getFileHandle(Re,{create:!0})).createWritable();await we.write(_),await we.close(),Do(Re),ca(!1),Yr.current=!1,console.log(`Project saved: ${Wr}/${Re}`);return}catch(ue){console.error("Failed to save to project directory:",ue),Qr(null)}if(Wr&&!zi){const ue=window;if(typeof ue.showDirectoryPicker=="function")try{const Te=await ue.showDirectoryPicker();Qr(Te);const Ce=`${Wr}.json`,Re=await(await Te.getFileHandle(Ce,{create:!0})).createWritable();await Re.write(_),await Re.close(),Do(Ce),ca(!1),Yr.current=!1,console.log(`Project saved: ${Ce} in selected directory`);return}catch(Te){Te?.name!=="AbortError"&&console.error("Failed to get directory:",Te)}}const G=ue=>String(ue).padStart(2,"0"),re=new Date,U=`pcb_project_${`${re.getFullYear()}_${G(re.getMonth()+1)}_${G(re.getDate())}_${G(re.getHours())}_${G(re.getMinutes())}_${G(re.getSeconds())}`}.json`,xe=window;if(typeof xe.showSaveFilePicker=="function")try{const ue=await xe.showSaveFilePicker({suggestedName:U,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),Te=await ue.createWritable();await Te.write(_),await Te.close();const Ce=ue.name;try{const Oe=await ue.getFile();Do(Oe.name)}catch{Do(Ce)}const Re=Ce.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");Re&&Er(Re);try{const Oe=ue.name.replace(/\.json$/i,""),Ee=zf(Oe).replace(/[^a-zA-Z0-9_-]/g,"_");fs(Ee),Zs||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(Oe){console.warn("Could not set up auto save for new file:",Oe)}return}catch(ue){if(ue?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",ue)}const ee=document.createElement("a");ee.href=URL.createObjectURL(_),ee.download=U,document.body.appendChild(ee),ee.click(),setTimeout(()=>{URL.revokeObjectURL(ee.href),document.body.removeChild(ee)},0)},[hr]),xf=I.useCallback(c=>{const y=new Tn,_=y.internal.pageSize.getWidth(),G=y.internal.pageSize.getHeight(),re=20;let Se=re;const U=7,xe=60;y.setFontSize(18),y.setFont("helvetica","bold"),y.text("Bill of Materials",_/2,Se,{align:"center"}),Se+=U*2,y.setFontSize(10),y.setFont("helvetica","normal"),c.projectName&&(y.text(`Project: ${c.projectName}`,re,Se),Se+=U),y.text(`Exported: ${new Date(c.exportedAt).toLocaleString()}`,re,Se),Se+=U,y.text(`Total Components: ${c.totalComponents} | Unique Components: ${c.uniqueComponents}`,re,Se),Se=xe,y.setFontSize(9),y.setFont("helvetica","bold");const ee=[15,50,30,20,25,30,20],ue=["Qty","Component Type","Value","Package","Manufacturer","Part Number","Layer"];let Te=re;return ue.forEach((Ne,Re)=>{y.text(Ne,Te,Se),Te+=ee[Re]}),Se+=U,y.setLineWidth(.5),y.line(re,Se,_-re,Se),Se+=U*.5,y.setFont("helvetica","normal"),y.setFontSize(8),c.items.forEach(Ne=>{Se>G-re-U*3&&(y.addPage(),Se=re+U),Te=re,[Ne.quantity.toString(),Ne.componentType,Ne.value||"-",Ne.packageType||"-",Ne.manufacturer||"-",Ne.partNumber||"-",Ne.layer].forEach((Oe,we)=>{const Ee=ee[we]-2,_e=y.splitTextToSize(Oe,Ee);y.text(_e[0]||"-",Te,Se),Te+=ee[we]}),Se+=U*1.2}),y.output("blob")},[]),$d=I.useCallback(async()=>{if(console.log("handleExportBOM called, format:",ae),!zi){alert("Please create or open a project before exporting BOM.");return}try{console.log("Generating BOM data...");const c=xx(Ut,Ft,Wr);console.log("BOM data generated:",c),console.log("Creating/getting BOM directory...");let y;try{y=await zi.getDirectoryHandle("BOM",{create:!0}),console.log("BOM directory obtained")}catch(xe){console.error("Failed to get/create BOM directory:",xe),alert("Failed to create BOM directory. See console for details.");return}const _=l1();let G,re;if(ae==="pdf")console.log("Generating PDF..."),G=xf(c),re=`BOM_${_}.pdf`;else{console.log("Generating JSON...");const xe=JSON.stringify(c,null,2);G=new Blob([xe],{type:"application/json"}),re=`BOM_${_}.json`}console.log("Saving file:",re);const U=await(await y.getFileHandle(re,{create:!0})).createWritable();await U.write(G),await U.close(),console.log("BOM file saved successfully"),alert(`BOM exported successfully to ${re} in BOM directory!`)}catch(c){console.error("Failed to export BOM:",c),alert(`Failed to export BOM: ${c instanceof Error?c.message:String(c)}. See console for details.`)}},[zi,Ut,Ft,Wr,ae,xf]);_t.useEffect(()=>{Wi.current&&(clearInterval(Wi.current),Wi.current=null);const c=ic.current;if(ic.current=jr,jr&&Oa){const y=Oa*60*1e3;Zs&&gl?(console.log(`Auto save: Setting up interval for ${Oa} minute(s) (${y}ms)`),c||(Yr.current=!0,setTimeout(()=>{td()},100)),Wi.current&&(clearInterval(Wi.current),Wi.current=null),Wi.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${Yr.current}`),console.log(`  - dirHandle: ${dc.current?"set":"missing"}`),console.log(`  - baseName: ${Cl.current||"missing"}`),td()},y),console.log(`Auto save: Interval set up for ${y}ms (${Oa} minutes)`),console.log(`  - Directory handle: ${Zs?"set":"missing"}`),console.log(`  - Base name: ${gl||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!Zs}) or base name (${!gl}). Disabling auto save.`),Vr(!1),Wi.current&&(clearInterval(Wi.current),Wi.current=null))}else jr||(ic.current=!1);return()=>{Wi.current&&(clearInterval(Wi.current),Wi.current=null)}},[jr,Oa,Zs,gl]);const Fu=I.useRef(!1),qu=I.useRef(!1),[nd,id]=_t.useState(0);_t.useEffect(()=>{const y=Object.keys(ei.getAll()).map(_=>ei.subscribe(_,()=>{id(G=>G+1)}));return()=>y.forEach(_=>_())},[]),_t.useEffect(()=>{if(qu.current){console.log("Change tracking: Skipping - project is being loaded");return}if(jr&&Fu.current){Fu.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}Yr.current=!0,ca(!0),console.log("Change detected, marking as unsaved",{autoSaveEnabled:jr,topImage:!!o,bottomImage:!!u,drawingStrokesCount:ct.length,componentsTopCount:Ut.length,componentsBottomCount:Ft.length,powersCount:kn.length,groundsCount:_n.length,powerBusesCount:fn.length,projectNotesCount:_r.length,areImagesLocked:Fn,areViasLocked:wi,areTracesLocked:ur,areComponentsLocked:Lo,areGroundNodesLocked:Dr,arePowerNodesLocked:Qi})},[o,u,ct,Ut,Ft,kn,_n,fn,_r,W,k,J,ge,Fn,wi,ur,Lo,Dr,Qi,vi,jr,te,je,F,M,jt,pe,gn,ht,de,De,ze,Xe,Rt,en,Wn,An,ti,Ro,In,nd]),_t.useEffect(()=>{jr?(Fu.current=!0,console.log("Auto save: Enabled, marking first run")):Fu.current=!1},[jr]),_t.useEffect(()=>{jr||(Yr.current=!1)},[jr]);const Hu=I.useCallback(()=>!!(o||u||ct.length>0||Ut.length>0||Ft.length>0||kn.length>0||_n.length>0),[o,u,ct,Ut,Ft,kn,_n]),pu=I.useCallback(()=>{la({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),rd=I.useCallback(async()=>{const c=window;if(typeof c.showDirectoryPicker=="function")try{const y=await c.showDirectoryPicker({mode:"readwrite"});la(_=>({..._,locationHandle:y,locationPath:y.name||"Selected folder"}))}catch(y){y?.name!=="AbortError"&&(console.error("Failed to get directory:",y),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),Vu=I.useCallback(async()=>{const c=pi.projectName.trim();if(!c){alert("Please enter a project name.");return}const y=c.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!pi.locationHandle){alert("Please select a location for the project.");return}const _=pi.locationHandle;let G,re;if(_.name===y)G=_,re=_;else{re=_;try{G=await re.getDirectoryHandle(y,{create:!0})}catch(Se){console.error("Failed to create project folder:",Se),alert(`Failed to create project folder "${y}". See console for details.`);return}}uu(),la({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Er(y),Qr(G),uc(),yo(),co(!1),x(0);try{const{project:Se,timestamp:U}=hr(),ee=`${zf(y)}_${U}.json`,ue=JSON.stringify(Se,null,2),Te=new Blob([ue],{type:"application/json"}),Ne=await(await G.getFileHandle(ee,{create:!0})).createWritable();await Ne.write(Te),await Ne.close(),Do(ee),console.log(`New project created: ${y}/${ee}`),Ca({visible:!0,source:"new",interval:5})}catch(Se){console.error("Failed to save new project:",Se),alert("Failed to save new project file. See console for details.")}},[uc,hr,pi,uu,yo,co,x]),Wu=I.useCallback(()=>{la({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Kd=I.useCallback(()=>{const c=Wr?`${Wr}.json`:"";ls({visible:!0,filename:c,locationPath:"",locationHandle:null}),setTimeout(()=>{if(nr.current?.focus(),nr.current&&c){const y=c.replace(/\.json$/i,"");nr.current.setSelectionRange(0,y.length)}},100)},[Wr]),od=I.useCallback(async()=>{const c=window;if(typeof c.showDirectoryPicker=="function")try{const y=await c.showDirectoryPicker();ls(_=>({..._,locationHandle:y,locationPath:y.name||"Selected folder"}))}catch(y){y?.name!=="AbortError"&&(console.error("Failed to get directory:",y),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),ad=I.useCallback(async()=>{const c=Bi.filename.trim();if(!c){alert("Please enter a file name.");return}const _=(c.endsWith(".json")?c:`${c}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!Bi.locationHandle){alert("Please select a location for the file.");return}const G=Bi.locationHandle;try{const{project:re}=hr(),Se=JSON.stringify(re,null,2),U=new Blob([Se],{type:"application/json"}),ee=await(await G.getFileHandle(_,{create:!0})).createWritable();await ee.write(U),await ee.close(),Do(_);const ue=_.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");ue&&Er(ue),Qr(G),ca(!1),Yr.current=!1,ls({visible:!1,filename:"",locationPath:"",locationHandle:null}),ss(null),console.log(`Project saved as: ${_} in selected directory`)}catch(re){console.error("Failed to save project:",re),alert(`Failed to save project file "${_}". See console for details.`)}},[Bi,hr]),Tl=I.useCallback(()=>{ls({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),Yu=I.useCallback(async()=>{Ba({visible:!1}),await Lc(),pu(),Yl()},[Lc,pu,Yl]),Zp=I.useCallback(()=>{Ba({visible:!1}),pu(),Yl()},[pu,Yl]),Zd=I.useCallback(()=>{Ba({visible:!1})},[]);_t.useEffect(()=>{if($a.visible){setTimeout(()=>{Bc.current?.focus()},0);const c=y=>{y.key==="Enter"?(y.preventDefault(),Yu()):y.key==="Escape"&&(y.preventDefault(),Ba({visible:!1}))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}}},[$a.visible,Yu]);const is=I.useCallback(async(c,y)=>{qu.current=!0;try{if(jn(),c.toolInstances?ei.initializeFromProject(c):ei.initialize(),c.projectInfo&&c.projectInfo.name&&Er(c.projectInfo.name),c.view){if(c.view.currentView&&h(c.view.currentView),c.view.viewScale!=null&&ii(c.view.viewScale),c.view.cameraWorldCenter)di(c.view.cameraWorldCenter);else if(c.view.viewPan){const xe=ut.current;if(xe){const ee=(xe.width-10)/2,ue=(xe.height-10)/2,Te=c.view.viewScale??1,Ce=(ee-c.view.viewPan.x)/Te,Ne=(ue-c.view.viewPan.y)/Te;di({x:Ce,y:Ne})}else di({x:0,y:0})}c.view.showBothLayers!=null&&za(c.view.showBothLayers),c.view.selectedDrawingLayer&&Vt(c.view.selectedDrawingLayer)}if(c.homeViews){const xe={};for(const[ee,ue]of Object.entries(c.homeViews)){const Te=parseInt(ee,10),Ce=ue;let Ne=Ce.pcbReferenceX,Re=Ce.pcbReferenceY;(Ne===void 0||Re===void 0)&&(Ne=Ce.x??0,Re=Ce.y??0),Ce.showTopImage===void 0?xe[Te]={pcbReferenceX:Ne,pcbReferenceY:Re,x:0,y:0,zoom:Ce.zoom,viewRotation:Xn,viewFlipX:$i,isBottomView:Ta,transparency:b,showTopImage:Aa,showBottomImage:pa,showViasLayer:kr,showTopTracesLayer:eo,showBottomTracesLayer:Mr,showTopPadsLayer:Gr,showBottomPadsLayer:fo,showTopTestPointsLayer:bo,showBottomTestPointsLayer:vo,showTopComponents:Zo,showBottomComponents:qa,showPowerLayer:ms,showGroundLayer:Ci,showConnectionsLayer:En}:xe[Te]={...Ce,pcbReferenceX:Ne,pcbReferenceY:Re,x:0,y:0,viewRotation:Ce.viewRotation??0,viewFlipX:Ce.viewFlipX??!1,isBottomView:Ce.isBottomView??!1,transparency:Ce.transparency??50}}Rs(xe)}else Rs({});if(c.projectNotes&&Array.isArray(c.projectNotes)?Gi(c.projectNotes):Gi([]),c.traceColors&&(c.traceColors.top&&(X(c.traceColors.top),Dt("trace",c.traceColors.top,"top")),c.traceColors.bottom&&(S(c.traceColors.bottom),Dt("trace",c.traceColors.bottom,"bottom"))),c.traceSizes){const xe=c.traceSizes.top!=null&&c.traceSizes.top>0?c.traceSizes.top:6;let ee=c.traceSizes.bottom!=null&&c.traceSizes.bottom>0?c.traceSizes.bottom:6;ee<6&&(ee=6),ie(xe),$(ee),Nt("trace",xe,"top"),Nt("trace",ee,"bottom")}else ie(6),$(6);if(c.padColors&&(c.padColors.top&&(he(c.padColors.top),Dt("pad",c.padColors.top,"top")),c.padColors.bottom&&(be(c.padColors.bottom),Dt("pad",c.padColors.bottom,"bottom"))),c.padSizes){const xe=c.padSizes.top!=null&&c.padSizes.top>0?c.padSizes.top:18,ee=c.padSizes.bottom!=null&&c.padSizes.bottom>0?c.padSizes.bottom:18;A(xe),B(ee),Nt("pad",xe,"top"),Nt("pad",ee,"bottom")}if(c.componentColors&&(c.componentColors.top&&(It(c.componentColors.top),Dt("component",c.componentColors.top,"top")),c.componentColors.bottom&&(Pt(c.componentColors.bottom),Dt("component",c.componentColors.bottom,"bottom"))),c.componentSizes){const xe=c.componentSizes.top!=null&&c.componentSizes.top>0?c.componentSizes.top:18,ee=c.componentSizes.bottom!=null&&c.componentSizes.bottom>0?c.componentSizes.bottom:18;Qt(xe),nn(ee),Nt("component",xe,"top"),Nt("component",ee,"bottom")}c.toolLayerDefaults?(c.toolLayerDefaults.trace&&_o(c.toolLayerDefaults.trace),c.toolLayerDefaults.pad&&xa(c.toolLayerDefaults.pad),c.toolLayerDefaults.testPoint&&Ts(c.toolLayerDefaults.testPoint),c.toolLayerDefaults.component&&ra(c.toolLayerDefaults.component)):c.traceToolLayer&&_o(c.traceToolLayer),c.toolSettings&&Mn(xe=>{const ee=new Map(xe);if(c.toolSettings.trace){const Te=ee.get("trace");if(Te){const Ce={...Te,settings:c.toolSettings.trace},Ne=new Map(Te.layerSettings);c.traceSizes&&c.traceColors&&(Ne.set("top",{color:c.traceColors.top||Te.layerSettings.get("top")?.color||"#AA4499",size:c.traceSizes.top||Te.layerSettings.get("top")?.size||6}),Ne.set("bottom",{color:c.traceColors.bottom||Te.layerSettings.get("bottom")?.color||"#F781BF",size:c.traceSizes.bottom||Te.layerSettings.get("bottom")?.size||6})),ee.set("trace",{...Ce,layerSettings:Ne})}}if(c.toolSettings.via){const Te=ee.get("via");Te&&ee.set("via",{...Te,settings:c.toolSettings.via})}if(c.toolSettings.pad){const Te=ee.get("pad");if(Te){const Ce={...Te,settings:c.toolSettings.pad},Ne=new Map(Te.layerSettings);c.padSizes&&c.padColors&&(Ne.set("top",{color:c.padColors.top||Te.layerSettings.get("top")?.color||"#0072B2",size:c.padSizes.top||Te.layerSettings.get("top")?.size||18}),Ne.set("bottom",{color:c.padColors.bottom||Te.layerSettings.get("bottom")?.color||"#56B4E9",size:c.padSizes.bottom||Te.layerSettings.get("bottom")?.size||18})),ee.set("pad",{...Ce,layerSettings:Ne})}}if(c.toolSettings.component){const Te=ee.get("component");if(Te){const Ce={...Te,settings:c.toolSettings.component},Ne=new Map(Te.layerSettings);c.componentSizes&&c.componentColors&&(Ne.set("top",{color:c.componentColors.top||Te.layerSettings.get("top")?.color||"#6A3D9A",size:c.componentSizes.top||Te.layerSettings.get("top")?.size||18}),Ne.set("bottom",{color:c.componentColors.bottom||Te.layerSettings.get("bottom")?.color||"#9467BD",size:c.componentSizes.bottom||Te.layerSettings.get("bottom")?.size||18})),ee.set("component",{...Ce,layerSettings:Ne})}}if(c.testPointSizes&&c.testPointColors){ke(c.testPointColors.top||de),Ge(c.testPointColors.bottom||De),tt(c.testPointSizes.top||ze),Tt(c.testPointSizes.bottom||Xe);const Te=ee.get("testPoint");if(Te){const Ce=new Map(Te.layerSettings);Ce.set("top",{color:c.testPointColors.top||Te.layerSettings.get("top")?.color||"#E69F00",size:c.testPointSizes.top||Te.layerSettings.get("top")?.size||6}),Ce.set("bottom",{color:c.testPointColors.bottom||Te.layerSettings.get("bottom")?.color||"#F0E442",size:c.testPointSizes.bottom||Te.layerSettings.get("bottom")?.size||6}),ee.set("testPoint",{...Te,layerSettings:Ce})}}if(c.componentConnectionColor!==void 0&&mn(c.componentConnectionColor),c.componentConnectionSize!==void 0&&Vn(c.componentConnectionSize),c.toolSettings.ground){const Te=ee.get("ground");Te&&ee.set("ground",{...Te,settings:c.toolSettings.ground})}if(c.toolSettings.power){const Te=ee.get("power");Te&&ee.set("power",{...Te,settings:c.toolSettings.power})}if(c.toolSettings.erase){const Te=ee.get("erase");Te&&ee.set("erase",{...Te,settings:c.toolSettings.erase})}const ue=z==="draw"&&rt==="trace"?ee.get("trace"):z==="draw"&&rt==="via"?ee.get("via"):z==="draw"&&rt==="pad"?ee.get("pad"):z==="draw"&&rt==="testPoint"?ee.get("testPoint"):z==="component"?ee.get("component"):z==="power"?ee.get("power"):z==="ground"?ee.get("ground"):null;if(ue)if(z==="draw"&&rt==="trace"){const Te=Wn||"top",Ce=ue.layerSettings.get(Te);Ce?(Q(Ce.color),R(Ce.size),Te==="top"?(X(Ce.color),ie(Ce.size)):(S(Ce.color),$(Ce.size))):(Q(ue.settings.color),R(ue.settings.size))}else if(z==="draw"&&rt==="pad"){const Te=Si||"top",Ce=ue.layerSettings.get(Te);Ce?(Q(Ce.color),R(Ce.size),Te==="top"?(he(Ce.color),A(Ce.size)):(be(Ce.color),B(Ce.size))):(Q(ue.settings.color),R(ue.settings.size))}else if(z==="component"){const Te=Yn||"top",Ce=ue.layerSettings.get(Te);Ce?(Q(Ce.color),R(Ce.size),Te==="top"?(It(Ce.color),Qt(Ce.size)):(Pt(Ce.color),nn(Ce.size))):(Q(ue.settings.color),R(ue.settings.size))}else if(z==="draw"&&rt==="testPoint"){const Te=Pn||"top",Ce=ue.layerSettings.get(Te);Ce?(Q(Ce.color),R(Ce.size),Te==="top"?(ke(Ce.color),tt(Ce.size)):(Ge(Ce.color),Tt(Ce.size))):(Q(ue.settings.color),R(ue.settings.size))}else Q(ue.settings.color),R(ue.settings.size);return ee});const _=async(xe,ee)=>{if(!xe)return null;let ue=null,Te="",Ce=xe.filePath||xe.name;if(!ee){const Ne=xe.name||"image";return alert(`Error: Cannot load image "${Ne}" because no project directory is available.

Please ensure you opened the project file from its project directory. The project directory is required to access the image files stored in the images/ subdirectory.`),null}if(Ce)try{let Ne=Ce;!Ce.startsWith("images/")&&!Ce.startsWith("Images/")?Ne=Ce:Ce.startsWith("Images/")?Ne=Ce.replace("Images/",""):Ce.startsWith("images/")&&(Ne=Ce.replace("images/",""));let Re;try{Re=await ee.getDirectoryHandle("images")}catch{try{Re=await ee.getDirectoryHandle("Images")}catch{throw new Error("Neither 'images' nor 'Images' directory found in project folder.")}}const we=await(await Re.getFileHandle(Ne)).getFile();ue=await createImageBitmap(we),Te=URL.createObjectURL(we),console.log(`Loaded image from file path: images/${Ne}`),Ce.startsWith("images/")||(Ce=`images/${Ce.replace("Images/","")}`)}catch(Ne){const Re=Ne instanceof Error?Ne.message:"Unknown error",Oe=xe.name||"image",we=Ce.startsWith("images/")||Ce.startsWith("Images/")?Ce.replace("Images/","images/"):`images/${Ce}`;return alert(`Error: Failed to load image "${Oe}" from project directory.

Expected location: ${we}

This may occur if:
- The image file was moved or deleted
- The project directory structure was modified
- File permissions are insufficient

Please ensure the image file exists in the images/ subdirectory of your project folder.

Technical details: ${Re}`),null}else{const Ne=xe.name||"image";return alert(`Error: Image "${Ne}" has no file path specified in the project file.

The project file is missing the image file path information. This may indicate the project file is corrupted or was created with an older version of the software.`),null}if(!ue){const Ne=xe.name||"image";return alert(`Error: Could not create image bitmap for "${Ne}".

The image file may be corrupted or in an unsupported format. Please ensure the image is a valid PNG, JPEG, or other supported image format.`),null}return{url:Te,name:xe.name??"image",width:xe.width??ue.width,height:xe.height??ue.height,filePath:Ce,x:xe.x??0,y:xe.y??0,scale:xe.scale??1,rotation:xe.rotation??0,flipX:!!xe.flipX,flipY:!!xe.flipY,skewX:xe.skewX??0,skewY:xe.skewY??0,keystoneV:xe.keystoneV??0,keystoneH:xe.keystoneH??0,brightness:xe.brightness??100,contrast:xe.contrast??100,bitmap:ue}},G=y!==void 0?y:zi,re=await _(c.images?.top,G),Se=await _(c.images?.bottom,G);if(s(re),f(Se),c.pointIdCounter&&typeof c.pointIdCounter=="number"?Hh(c.pointIdCounter):(console.warn("Project file missing pointIdCounter. Starting from 1."),Hh(1)),c.locks&&(typeof c.locks.areImagesLocked=="boolean"&&tr(c.locks.areImagesLocked),typeof c.locks.areViasLocked=="boolean"&&qi(c.locks.areViasLocked),typeof c.locks.arePadsLocked=="boolean"&&Tr(c.locks.arePadsLocked),typeof c.locks.areTracesLocked=="boolean"&&Ra(c.locks.areTracesLocked),typeof c.locks.areComponentsLocked=="boolean"&&Ps(c.locks.areComponentsLocked),typeof c.locks.areGroundNodesLocked=="boolean"&&oa(c.locks.areGroundNodesLocked),typeof c.locks.arePowerNodesLocked=="boolean"&&Ma(c.locks.arePowerNodesLocked)),c.visibility&&(typeof c.visibility.showViasLayer=="boolean"&&es(c.visibility.showViasLayer),typeof c.visibility.showTopPadsLayer=="boolean"&&Xr(c.visibility.showTopPadsLayer),typeof c.visibility.showBottomPadsLayer=="boolean"&&Ko(c.visibility.showBottomPadsLayer),typeof c.visibility.showTopTracesLayer=="boolean"&&Fa(c.visibility.showTopTracesLayer),typeof c.visibility.showBottomTracesLayer=="boolean"&&uo(c.visibility.showBottomTracesLayer),typeof c.visibility.showTopComponents=="boolean"&&ts(c.visibility.showTopComponents),typeof c.visibility.showBottomComponents=="boolean"&&ys(c.visibility.showBottomComponents),typeof c.visibility.showPowerLayer=="boolean"&&Ai(c.visibility.showPowerLayer),typeof c.visibility.showGroundLayer=="boolean"&&Zt(c.visibility.showGroundLayer),typeof c.visibility.showConnectionsLayer=="boolean"&&gi(c.visibility.showConnectionsLayer),typeof c.visibility.showTraceCornerDots=="boolean"&&wo(c.visibility.showTraceCornerDots)),c.autoSave?(typeof c.autoSave.enabled=="boolean"&&Vr(c.autoSave.enabled),typeof c.autoSave.interval=="number"&&Ia(c.autoSave.interval),typeof c.autoSave.baseName=="string"&&c.autoSave.baseName?(fs(c.autoSave.baseName),Cl.current=c.autoSave.baseName,c.autoSave.enabled&&!Zs&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),Vr(!1),Ia(null))):c.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),Vr(!1),Ia(null),fs(""),Cl.current="")):(Vr(!1),Ia(null),hl(null),fs(""),dc.current=null,Cl.current="",Wi.current&&(clearInterval(Wi.current),Wi.current=null)),c.drawing?.drawingStrokes&&Array.isArray(c.drawing.drawingStrokes)){const xe=c.drawing.drawingStrokes.map(ee=>({...ee,points:ee.points.map(ue=>({...ue,...Zi(ue)}))})).filter(ee=>!(ee.type==="trace"&&ee.points.length<2));kt(xe);for(const ee of xe)for(const ue of ee.points)ue.id&&typeof ue.id=="number"&&Vh(ue.id)}else console.warn("Project file missing drawingStrokes. Starting with empty strokes."),kt([]);if(c.drawing?.componentsTop){const xe=c.drawing.componentsTop.map(ee=>{const ue=Zi({x:ee.x,y:ee.y});return{...ee,x:ue.x,y:ue.y,layer:ee.layer||"top",pinConnections:ee.pinConnections||new Array(ee.pinCount||0).fill("")}});Mi(xe)}if(c.drawing?.componentsBottom){const xe=c.drawing.componentsBottom.map(ee=>{const ue=Zi({x:ee.x,y:ee.y});return{...ee,x:ue.x,y:ue.y,layer:ee.layer||"bottom",pinConnections:ee.pinConnections||new Array(ee.pinCount||0).fill("")}});ki(xe)}if(c.designatorCounters&&typeof c.designatorCounters=="object"){const xe=c.designatorCounters;zt.current={...xe}}else zt.current={};if(typeof c.autoAssignDesignators=="boolean"&&Yt(c.autoAssignDesignators),typeof c.useGlobalDesignatorCounters=="boolean"?Ki(c.useGlobalDesignatorCounters):Ki(!1),c.drawing?.grounds){const ee=c.drawing.grounds.map(ue=>{ue.pointId||console.warn("Ground symbol missing pointId - this may cause issues");const Te=Zi({x:ue.x,y:ue.y});return{...ue,x:Te.x,y:Te.y}}).filter(ue=>{const Te=typeof ue.x=="number"&&typeof ue.y=="number"&&!isNaN(ue.x)&&!isNaN(ue.y)&&isFinite(ue.x)&&isFinite(ue.y);return Te||console.warn(`Filtered out invalid ground symbol at (${ue.x}, ${ue.y})`),Te});Ae(ee);for(const ue of ee)ue.pointId&&typeof ue.pointId=="number"&&Vh(ue.pointId)}else Ae([]);let U;if(c.powerBuses&&Array.isArray(c.powerBuses)&&c.powerBuses.length>0?(U=c.powerBuses,as(U)):(U=[{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}],as(U)),c.groundBuses&&Array.isArray(c.groundBuses)&&c.groundBuses.length>0?Ys(c.groundBuses):Ys([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),c.drawing?.powers){const ee=c.drawing.powers.map(ue=>{ue.pointId||console.warn("Power symbol missing pointId - this may cause issues");const Te=Zi({x:ue.x,y:ue.y});return{...ue,x:Te.x,y:Te.y}}).filter(ue=>{const Te=typeof ue.x=="number"&&typeof ue.y=="number"&&!isNaN(ue.x)&&!isNaN(ue.y)&&isFinite(ue.x)&&isFinite(ue.y);return Te||console.warn(`Filtered out invalid power node at (${ue.x}, ${ue.y})`),Te});q(ee);for(const ue of ee)ue.pointId&&typeof ue.pointId=="number"&&Vh(ue.pointId)}else q([]);Yr.current=!1,ca(!1),co(!1),setTimeout(()=>{qu.current=!1},100)}catch(_){console.error("Failed to open project",_),alert("Failed to open project file. See console for details."),qu.current=!1}},[z,rt,zi,s,f,Hh,tr,qi,Tr,Ra,Ps,oa,Ma,es,Xr,Ko,Fa,uo,ts,ys,Ai,Zt,gi,Vr,Ia,hl,fs,kt,Mi,ki,Ae,as,Ys,q,pc,Zi,D2,ix,Mp,Yt,Ki,jn]),zc=I.useCallback(async()=>{},[vc]),Gu=I.useCallback(async c=>{const y=dc.current;if(!y){console.warn("Cannot load file: no directory handle");return}try{const G=await(await y.getFileHandle(c)).getFile();if(G.size===0){console.warn(`File ${c} is empty, skipping`);const ue=ga.current.filter(Te=>Te!==c);Js(ue),ga.current=ue;return}const re=await G.text();if(!re||re.trim().length===0){console.warn(`File ${c} contains no data, skipping`);const ue=ga.current.filter(Te=>Te!==c);Js(ue),ga.current=ue;return}let Se;try{Se=JSON.parse(re)}catch(ee){console.error(`Failed to parse JSON from file ${c}:`,ee);const Te=ga.current.filter(Ce=>Ce!==c);Js(Te),ga.current=Te,await zc();return}uc(),ii(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),wt(new Set),Kt(new Set),bn(new Set),tn(new Set),Yl(),await is(Se),Do(c);const xe=ga.current.indexOf(c);xe>=0?(Ol(xe),Wc.current=xe):await zc(),Yr.current=!1,ca(!1)}catch(_){console.error("Failed to load file from history:",_);const G=ga.current;if(G.includes(c)){const re=G.filter(Se=>Se!==c);Js(re),ga.current=re,await zc()}}},[is,zc,Yl]),bf=I.useCallback(async c=>{if(!zi){console.warn("Cannot restore file: no project directory handle"),alert("No project directory available. Please open or create a project first.");return}try{let y;try{y=await zi.getDirectoryHandle("history")}catch(U){console.error("History directory not found:",U),alert("History directory not found.");return}const G=await(await y.getFileHandle(c)).getFile();if(G.size===0){alert(`File ${c} is empty.`);return}const re=await G.text();if(!re||re.trim().length===0){alert(`File ${c} contains no data.`);return}let Se;try{Se=JSON.parse(re)}catch(U){console.error(`Failed to parse JSON from file ${c}:`,U),alert(`Failed to parse file ${c}. It may be corrupted.`);return}uc(),ii(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),wt(new Set),Kt(new Set),bn(new Set),tn(new Set),Yl(),await is(Se),Do(c),Yr.current=!1,console.log(`Successfully restored file: ${c}`)}catch(y){console.error("Failed to restore file from history:",y),alert(`Failed to restore file ${c}. Please try again.`)}},[zi,is,wt,Kt,bn,tn,Do,ii,uc,Yl]);_t.useEffect(()=>{j&&!Y&&Z({x:window.innerWidth/2-300,y:window.innerHeight/2-250})},[j,Y]);const Xu=I.useCallback(c=>{if(!Y)return;le(!0);const y=c.clientX-Y.x,_=c.clientY-Y.y,G=Se=>{Z({x:Se.clientX-y,y:Se.clientY-_})},re=()=>{le(!1),document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",re)};document.addEventListener("mousemove",G),document.addEventListener("mouseup",re)},[Y]);I.useCallback(async()=>{const c=Wc.current,y=ga.current;if(c>=0&&c<y.length-1){const _=c+1,G=y[_];G&&await Gu(G)}},[Gu]),I.useCallback(async()=>{const c=Wc.current,y=ga.current;if(c<=0||c>=y.length||y.length===0){console.warn("Cannot navigate to newer file: index is",c,"history length is",y.length);return}if(c>0&&c<y.length&&y.length>0){const _=c-1;if(_>=0&&_<y.length){const G=y[_];G?await Gu(G):(console.warn("No newer file found at index",_),await zc())}else console.warn("Cannot navigate to newer file: prevIndex",_,"is out of bounds")}},[Gu,zc]),_t.useEffect(()=>{wn.current=zn},[zn]);const xr=_t.useRef(rt),sd=_t.useRef(Ht);_t.useEffect(()=>{const c=rt!==xr.current;if(z==="draw"&&xr.current==="trace"&&c){if(wn.current.length>=2){Mt(ct,Ut,Ft,w,ye);const y={id:`${Date.now()}-trace-autofinalize`,points:wn.current,color:se,size:N,layer:sd.current,type:"trace"};kt(_=>[..._,y]),sd.current==="top"?Ji(_=>[..._,y.id]):ao(_=>[..._,y.id])}Nn([]),Gt(!1)}xr.current=rt,sd.current=Ht},[rt,Ht,z,se,N]);const Jd=_t.useRef(z);_t.useEffect(()=>{if(Jd.current==="draw"&&z!=="draw"&&rt==="trace"&&wn.current.length>=2){const c={id:`${Date.now()}-trace-autofinalize`,points:wn.current,color:se,size:N,layer:Ht,type:"trace"};kt(y=>[...y,c]),Ht==="top"?Ji(y=>[...y,c.id]):ao(y=>[...y,c.id]),Nn([]),Gt(!1)}Jd.current=z},[z,rt,se,N,Ht]);const ld=_t.useMemo(()=>qm,[]);_t.useEffect(()=>{Bu()},[ct]),_t.useEffect(()=>{Bu()},[Ut,Ft,_n,Ci]);const Jt=wc>0,Us=I.useCallback(async()=>{const c=window;if(typeof c.showOpenFilePicker=="function")try{const[y]=await c.showOpenFilePicker({multiple:!1}),_=await y.getFile();if(!_.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}Uu.current=!0,uu(),await new Promise(ee=>setTimeout(ee,0)),Do(_.name);const G=await _.text(),re=JSON.parse(G);Uu.current=!0;let Se=null;try{if(typeof y.getParent=="function")Se=await y.getParent();else{console.warn("getParent() not available. Prompting user for directory access...");const ee=window;if(typeof ee.showDirectoryPicker=="function")Se=await ee.showDirectoryPicker({startIn:y});else throw new Error("Directory picker not available in this browser")}if(Se)try{if((await(await Se.getFileHandle(_.name)).getFile()).name!==_.name)throw new Error("Directory verification failed: file name mismatch")}catch(ee){throw console.error("Directory verification failed:",ee),console.error("The selected directory might not contain the opened file"),new Error("Directory verification failed - selected directory does not contain the opened file")}Qr(Se),Gl.current=Se}catch(ee){console.error("Failed to get directory handle from file handle:",ee)}finally{setTimeout(()=>{Uu.current=!1},1e3)}const U=re.autoSave?.enabled===!0;await is(re,Se);let xe;if(re.projectInfo?.name?xe=re.projectInfo.name:(xe=_.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Er(xe)),Wr||Er(xe),U&&Se){const ee=xe.replace(/\.json$/i,""),Te=zf(ee).replace(/[^a-zA-Z0-9_-]/g,"_");hl(Se),fs(Te),dc.current=Se,Cl.current=Te,Wi.current&&(clearInterval(Wi.current),Wi.current=null)}setTimeout(()=>{Ca({visible:!0,source:"open",interval:5})},100)}catch(y){if(y?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",y),mo.current?.click()}else mo.current?.click()},[is,Wr,Do,Er,Qr,Ca,jr,hl,fs,uu]),vf=I.useCallback(async()=>{lo({visible:!1}),await Lc(),await Us()},[Lc,Us]),Qd=I.useCallback(async()=>{lo({visible:!1}),await Us()},[Us]),$u=I.useCallback(()=>{lo({visible:!1})},[]);_t.useEffect(()=>{if(sa.visible){setTimeout(()=>{zu.current?.focus()},0);const c=y=>{y.key==="Enter"?(y.preventDefault(),vf()):y.key==="Escape"&&(y.preventDefault(),lo({visible:!1}))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}}},[sa.visible,vf]);const Xl=I.useCallback(async()=>{Hu()?lo({visible:!0}):await Us()},[Hu,Us]);return a.jsxs("div",{className:"app",children:[a.jsx("header",{className:"app-header",children:a.jsx("h1",{children:" PCB Tracer (v2.8)"})}),a.jsx(pv,{openMenu:Rl,setOpenMenu:ss,isReadOnlyMode:Jt,currentProjectFilePath:vc,isProjectActive:!!zi,autoSaveEnabled:jr,autoSaveInterval:Oa,hasUnsavedChangesState:Yo,onNewProject:pu,onOpenProject:Xl,onSaveProject:Lc,onSaveAs:Kd,onPrint:Gd,onExportBOM:$d,bomExportFormat:ae,setBomExportFormat:ce,hasUnsavedChanges:Hu,setNewProjectDialog:Ba,setAutoSaveDialog:aa,topImage:o,bottomImage:u,setCurrentTool:V,resetImageTransform:df,areImagesLocked:Fn,setAreImagesLocked:tr,onEnterBoardDimensions:()=>Ms(!0),fileInputTopRef:Go,fileInputBottomRef:Eo,openProjectRef:mo,increaseSize:cu,decreaseSize:pf,brushSize:N,drawingStrokes:ct,selectedIds:Cn,selectedComponentIds:Hn,selectedPowerIds:Dn,selectedGroundIds:ri,componentsTop:Ut,componentsBottom:Ft,powers:kn,grounds:_n,powerNodeNames:Qs,groundNodeNames:tu,setSetSizeDialog:Xa,areViasLocked:wi,setAreViasLocked:qi,arePadsLocked:Hi,setArePadsLocked:Tr,areTestPointsLocked:gr,setAreTestPointsLocked:zs,areTracesLocked:ur,setAreTracesLocked:Ra,areComponentsLocked:Lo,setAreComponentsLocked:Ps,areGroundNodesLocked:Dr,setAreGroundNodesLocked:oa,arePowerNodesLocked:Qi,setArePowerNodesLocked:Ma,showTraceCornerDots:Br,setShowTraceCornerDots:wo,setSelectedIds:wt,setSelectedComponentIds:Kt,setSelectedPowerIds:bn,setSelectedGroundIds:tn,selectAllVias:Pu,selectAllTraces:eu,selectAllPads:bl,selectAllComponents:Yf,selectDisconnectedComponents:Du,selectAllComponentConnections:Eu,selectAllPowerNodes:kc,selectAllGroundNodes:nu,selectPowerNodesByName:iu,selectGroundNodesByName:vl,setShowPowerBusManager:Ul,setShowGroundBusManager:We,setShowDesignatorManager:qt,setShowPastMachine:L,toolRegistry:In,updateToolSettings:Ya,updateToolLayerSettings:Da,setBrushSize:R,setBrushColor:Q,saveToolSettings:T2,saveToolLayerSettings:Rf,colorPalette:ld,currentTool:z,drawingMode:rt,traceToolLayer:Wn,padToolLayer:Si,testPointToolLayer:Pn,componentToolLayer:Yn,setTopTraceSize:ie,setBottomTraceSize:$,setTopPadSize:A,setBottomPadSize:B,setTopTestPointSize:tt,setBottomTestPointSize:Tt,setTopComponentSize:Qt,setBottomComponentSize:nn,setComponentConnectionSize:Vn,topTraceColor:W,bottomTraceColor:k,topPadColor:te,bottomPadColor:je,topTestPointColor:de,bottomTestPointColor:De,topComponentColor:jt,bottomComponentColor:pe,setTopTraceColor:X,setBottomTraceColor:S,setTopPadColor:he,setBottomPadColor:be,setTopTestPointColor:ke,setBottomTestPointColor:Ge,setTopComponentColor:It,setBottomComponentColor:Pt,setComponentConnectionColor:mn,saveDefaultSize:Nt,saveDefaultColor:Dt,menuBarRef:hi,onOpenProjectNotes:Iu,onOpenTransformImages:()=>cs(!0),onOpenTransformAll:()=>pl(!0)}),a.jsx("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:a.jsxs("div",{ref:Cc,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[a.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[a.jsxs("button",{onClick:()=>{Jt||Vc()},onMouseDown:c=>c.currentTarget.blur(),disabled:Jt,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="select"?"2px solid #000":"1px solid #ddd",background:z==="select"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",outline:"none",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsx(Om,{size:14}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("button",{onClick:()=>{Jt||(console.log("Via tool clicked"),Fe(),$t("via"),V("draw"),es(!0))},disabled:Jt,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="draw"&&rt==="via"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&rt==="via"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const c=ei.get("via").color;return a.jsxs(a.Fragment,{children:[a.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:c,strokeWidth:"3"}),a.jsx("circle",{cx:"12",cy:"12",r:"4",fill:c})]})})()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:ei.get("via").size})]})]}),a.jsxs("button",{ref:Mu,onClick:()=>{Jt||(console.log("Pad tool clicked"),Fe(),$t("pad"),V("draw"),setTimeout(()=>gf(),0))},disabled:Jt,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="draw"&&rt==="pad"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&rt==="pad"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const y=Si==="top"?"padTop":"padBottom",_=ei.get(y).color,G=14,re=(24-G)/2,Se=(24-G)/2;return a.jsx("rect",{x:re,y:Se,width:G,height:G,fill:_})})()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(z==="draw"&&rt==="pad"&&Fi.toolInstanceId&&(Fi.toolInstanceId==="padTop"||Fi.toolInstanceId==="padBottom"))return Fi.size;const c=Si==="top"?"padTop":"padBottom";return ei.get(c).size})()})]})]}),a.jsxs("button",{ref:su,onClick:()=>{Jt||(console.log("Test Point tool clicked"),Fe(),$t("testPoint"),V("draw"),setTimeout(()=>yf(),0))},disabled:Jt,title:"Draw Test Points (Y)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="draw"&&rt==="testPoint"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&rt==="testPoint"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const y=Pn==="top"?"testPointTop":"testPointBottom",_=ei.get(y).color,G=14,re=12,Se=12;return a.jsx("path",{d:`M ${re} ${Se-G/2} L ${re+G/2} ${Se} L ${re} ${Se+G/2} L ${re-G/2} ${Se} Z`,fill:_,stroke:"#000",strokeWidth:"1.5"})})()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Y"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(z==="draw"&&rt==="testPoint"&&Fi.toolInstanceId&&(Fi.toolInstanceId==="testPointTop"||Fi.toolInstanceId==="testPointBottom"))return Fi.size;const c=Pn==="top"?"testPointTop":"testPointBottom";return ei.get(c).size})()})]})]}),a.jsxs("button",{ref:wl,onClick:()=>{Jt||(console.log("Trace tool clicked"),Fe(),$t("trace"),V("draw"),setTimeout(()=>fc(),0))},disabled:Jt,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="draw"&&rt==="trace"?"2px solid #000":"1px solid #ddd",background:z==="draw"&&rt==="trace"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsx(Um,{size:14,color:(()=>{const y=Wn==="top"?"traceTop":"traceBottom";return ei.get(y).color})()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const c=Wn==="top"?"traceTop":"traceBottom";return ei.get(c).size})()})]})]}),a.jsxs("button",{ref:Kp,onClick:()=>{Jt||(console.log("Component tool clicked"),Fe(),V("component"))},disabled:Jt,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="component"?"2px solid #000":"1px solid #ddd",background:z==="component"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[(()=>{const y=(Yn||"top")==="top"?"componentTop":"componentBottom",_=ei.get(y).color;return io?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:_,strokeWidth:"1.5"}),a.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:_,fontWeight:"bold",fontFamily:"monospace",children:(()=>{const G=Or?.componentDefinition?.designators?.[0];return G?G.length<=3?G:G.substring(0,3):Or?.designator?Or.designator.length<=3?Or.designator:Or.designator.substring(0,3):g0(io)})()})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:_,stroke:_,strokeWidth:"0.5"}),a.jsxs("g",{stroke:_,fill:"none",strokeWidth:"1.5",children:[a.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),a.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:_})]})]})})(),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const c=Yn==="top"?"componentTop":"componentBottom";return ei.get(c).size})()})]})]}),a.jsxs("button",{ref:lf,onClick:()=>{Jt||(console.log("Power tool clicked"),Fe(),st(!1),fn.length===1?(Ye(fn[0].id),V("power"),me(!1),Ai(!0)):fn.length>1?me(!0):(me(!0),V("power"),Ai(!0)))},disabled:Jt,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="power"?"2px solid #000":"1px solid #ddd",background:z==="power"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsx("span",{style:{color:(Pe?fn.find(c=>c.id===Pe)?.color:null)||"#ff0000",fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:ei.get("power").size})]})]}),a.jsxs("button",{ref:cf,onClick:()=>{Jt||(console.log("Ground tool clicked"),me(!1),vi.length===1?(Ot(vi[0].id),V("ground"),st(!1),Zt(!0)):vi.length>1?st(!0):(st(!0),V("ground"),Zt(!0)))},disabled:Jt,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="ground"?"2px solid #000":"1px solid #ddd",background:z==="ground"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:a.jsxs("g",{stroke:(Bt?vi.find(c=>c.id===Bt)?.color:null)||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[a.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),a.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),a.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),a.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:ei.get("ground").size})]})]}),a.jsx("div",{style:{height:72}}),a.jsxs("button",{onClick:()=>{Jt||(Fe(),V(c=>c==="pan"?"draw":"pan"))},disabled:Jt,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:z==="pan"?"2px solid #000":"1px solid #ddd",background:z==="pan"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:a.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),a.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),a.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("button",{onClick:()=>{Fe(),rc(!1),V(c=>c==="magnify"?"draw":"magnify")},title:"Magnify (M)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="magnify"?"2px solid #000":"1px solid #ddd",background:z==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),a.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),ml?a.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):a.jsxs(a.Fragment,{children:[a.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),a.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"M"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("button",{onClick:()=>{Jt||pl(!0)},disabled:Jt,title:"Change Perspective (E) - Open Change Perspective Dialog",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:Bl?"2px solid #000":"1px solid #ddd",background:Bl?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("ellipse",{cx:"12",cy:"12",rx:"9",ry:"6",fill:"none",stroke:"#111",strokeWidth:"2"}),a.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"none",stroke:"#111",strokeWidth:"2"}),a.jsx("circle",{cx:"11",cy:"11",r:"1.5",fill:"#111",stroke:"none"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("button",{onClick:()=>{Jt||(Fe(),V("center"),Ja(!0),xo.current&&clearTimeout(xo.current),xo.current=setTimeout(()=>{Ja(!1),V("select"),Ri(void 0)},2e3))},disabled:Jt,title:"Set View (X) - Press 0-9 to Set View",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:z==="center"?"2px solid #000":"1px solid #ddd",background:z==="center"?"#e6f0ff":"#fff",color:Jt?"#999":"#222",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),a.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"22",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),a.jsx("line",{x1:"2",y1:"12",x2:"10",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),a.jsx("line",{x1:"14",y1:"12",x2:"22",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"X"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:()=>{Jt||fr(c=>!c)},disabled:Jt,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:Jt?"not-allowed":"pointer",opacity:Jt?.5:1},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[a.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Ml&&a.jsx("div",{ref:hs,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:ld.map(c=>a.jsx("div",{onClick:()=>{Q(c),fr(!1);try{let _=null;z==="draw"&&rt==="via"?_="via":z==="draw"&&rt==="pad"?_=(Si||"top")==="bottom"?"padBottom":"padTop":z==="draw"&&rt==="testPoint"?_=(Pn||"top")==="bottom"?"testPointBottom":"testPointTop":z==="draw"&&rt==="trace"?_=(Wn||"top")==="bottom"?"traceBottom":"traceTop":z==="component"?_=(Yn||"top")==="bottom"?"componentBottom":"componentTop":z==="power"?_="power":z==="ground"&&(_="ground"),_&&ei.setColor(_,c)}catch(_){console.error("Error updating tool instance color:",_)}const y=Ns(In);if(y)if(z==="draw"&&rt==="trace"){const _=Wn||"top",re=y.layerSettings.get(_)?.size||y.settings.size,Se={color:c,size:re};Da(y.id,_,Se),Rf(y.id),_==="top"?(X(c),Dt("trace",c,"top")):(S(c),Dt("trace",c,"bottom"))}else if(z==="draw"&&rt==="pad"){const _=Si||"top",re=y.layerSettings.get(_)?.size||y.settings.size,Se={color:c,size:re};Da(y.id,_,Se),Rf(y.id),_==="top"?(he(c),Dt("pad",c,"top")):(be(c),Dt("pad",c,"bottom"))}else if(z==="draw"&&rt==="testPoint"){const _=Pn||"top",re=y.layerSettings.get(_)?.size||y.settings.size,Se={color:c,size:re};Da(y.id,_,Se),Rf(y.id),_==="top"?(ke(c),Dt("testPoint",c,"top")):(Ge(c),Dt("testPoint",c,"bottom"))}else if(z==="component"){const _=Yn||"top",re=y.layerSettings.get(_)?.size||y.settings.size,Se={color:c,size:re};Da(y.id,_,Se),Rf(y.id),_==="top"?(It(c),Dt("component",c,"top")):(Pt(c),Dt("component",c,"bottom"))}else{const _={...y.settings,color:c};Ya(y.id,_),T2(y.id,c,y.settings.size),z==="draw"&&rt==="via"&&Dt("via",c)}Dt("brush",c),Cn.size>0&&kt(_=>_.map(G=>Cn.has(G.id)?(G.type==="via"?(Dt("via",c),Mn(re=>{const Se=new Map(re),U=Se.get("via");return U&&Se.set("via",{...U,settings:{...U.settings,color:c}}),Se})):G.type==="pad"?(Dt("pad",c),Mn(re=>{const Se=new Map(re),U=Se.get("pad");return U&&Se.set("pad",{...U,settings:{...U.settings,color:c}}),Se})):G.type==="trace"&&Dt("trace",c,G.layer),{...G,color:c}):G)),Hn.size>0&&(Dt("component",c),Mi(_=>_.map(G=>Hn.has(G.id)?{...G,color:c}:G)),ki(_=>_.map(G=>Hn.has(G.id)?{...G,color:c}:G))),Dn.size>0&&q(_=>_.map(G=>Dn.has(G.id)?{...G,color:c}:G)),ri.size>0&&Ae(_=>_.map(G=>ri.has(G.id)?{...G,color:c}:G))},title:c,style:{width:22,height:22,backgroundColor:c,border:c===se?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},c))})})]})]}),z==="draw"&&rt==="trace"&&ac&&a.jsxs("div",{ref:Hl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[a.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[a.jsx("input",{type:"radio",name:"traceToolLayer",checked:Wn==="top",onChange:()=>{console.log("Trace tool Top clicked"),ba.current="top",_o("top"),Vt("top"),Q(W),R(J),Mn(c=>{const y=new Map(c),_=y.get("trace");return _&&y.set("trace",{..._,settings:{color:W,size:J}}),y}),sc(!1),$o(!0),Fa(!0)}}),a.jsx("span",{children:"Top"})]}),a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"traceToolLayer",checked:Wn==="bottom",onChange:()=>{console.log("Trace tool Bottom clicked"),ba.current="bottom",_o("bottom"),Vt("bottom"),Q(k),R(ge),Mn(c=>{const y=new Map(c),_=y.get("trace");return _&&y.set("trace",{..._,settings:{color:k,size:ge}}),y}),sc(!1),Yi(!0),uo(!0)}}),a.jsx("span",{children:"Bottom"})]})]}),z==="draw"&&rt==="pad"&&Os&&a.jsxs("div",{ref:lc,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[a.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[a.jsx("input",{type:"radio",name:"padToolLayer",checked:Si==="top",onChange:()=>{console.log("Pad tool Top clicked"),js.current="top",xa("top"),Vt("top");const c=ei.get("padTop");Q(c.color),R(c.size),Mn(y=>{const _=new Map(y),G=_.get("pad");return G&&_.set("pad",{...G,settings:{color:c.color,size:c.size}}),_}),Ac(!1),$o(!0),Xr(!0)}}),a.jsx("span",{children:"Top"})]}),a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"padToolLayer",checked:Si==="bottom",onChange:()=>{console.log("Pad tool Bottom clicked"),js.current="bottom",xa("bottom"),Vt("bottom");const c=ei.get("padBottom");Q(c.color),R(c.size),Mn(y=>{const _=new Map(y),G=_.get("pad");return G&&_.set("pad",{...G,settings:{color:c.color,size:c.size}}),_}),Ac(!1),Yi(!0),Ko(!0)}}),a.jsx("span",{children:"Bottom"})]})]}),z==="draw"&&rt==="testPoint"&&ru&&a.jsxs("div",{ref:_c,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[a.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[a.jsx("input",{type:"radio",name:"testPointToolLayer",checked:Pn==="top",onChange:()=>{console.log("Test Point tool Top clicked"),ks.current="top",Ts("top"),Vt("top"),Q(de),R(ze),Mn(c=>{const y=new Map(c),_=y.get("testPoint");return _&&y.set("testPoint",{..._,settings:{color:de,size:ze}}),y}),Nc(!1),$o(!0),gs(!0)}}),a.jsx("span",{children:"Top"})]}),a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"testPointToolLayer",checked:Pn==="bottom",onChange:()=>{console.log("Test Point tool Bottom clicked"),ks.current="bottom",Ts("bottom"),Vt("bottom"),Q(De),R(Xe),Mn(c=>{const y=new Map(c),_=y.get("testPoint");return _&&y.set("testPoint",{..._,settings:{color:De,size:Xe}}),y}),Nc(!1),Yi(!0),yr(!0)}}),a.jsx("span",{children:"Bottom"})]})]}),fe&&a.jsxs("div",{ref:el,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[a.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),fn.length===0?a.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...fn].sort((c,y)=>{const _=Se=>{const U=Se.match(/([+-]?)(\d+\.?\d*)/);if(U){const xe=U[1]||"+",ee=parseFloat(U[2]);return{absValue:Math.abs(ee),isNegative:xe==="-",original:Se}}return{absValue:1/0,isNegative:!1,original:Se}},G=_(c.voltage),re=_(y.voltage);return G.absValue!==re.absValue?G.absValue-re.absValue:G.isNegative!==re.isNegative?G.isNegative?-1:1:0}).map(c=>a.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),Ye(c.id),z!=="power"&&(Fe(),V("power"),Ai(!0)),me(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:c.color,border:"1px solid #ccc"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:c.name}),a.jsx("div",{style:{fontSize:"11px",color:"#666"},children:c.voltage})]})]})},c.id)),a.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),a.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),me(!1),Ul(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),a.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),me(!1),Ye(null),V("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),St&&a.jsxs("div",{ref:cc,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[a.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),vi.length===0?a.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...vi].sort((c,y)=>c.name.localeCompare(y.name)).map(c=>{const y=c.id==="groundbus-earth",_=Bt===c.id;return a.jsx("button",{onClick:G=>{G.preventDefault(),G.stopPropagation(),Ot(c.id),z!=="ground"&&(Fe(),V("ground"),Zt(!0)),st(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:_?"#e0e0e0":"#f5f5f5",border:_?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:y?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[a.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[a.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),a.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),a.jsx("div",{children:a.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:c.name})})]})},c.id)}),a.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),a.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),st(!1),We(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),a.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),st(!1),Ot(null),V("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),a.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[a.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),a.jsxs("div",{onClick:()=>Vt("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Wt==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[a.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),a.jsx("label",{className:"radio-label",style:{margin:0},children:a.jsx("input",{type:"checkbox",checked:Aa,onChange:c=>$o(c.target.checked)})})]}),a.jsx("canvas",{ref:da,width:60,height:40,style:{width:"60px",height:"40px"}})]}),a.jsxs("div",{onClick:()=>Vt("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Wt==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[a.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),a.jsx("label",{className:"radio-label",style:{margin:0},children:a.jsx("input",{type:"checkbox",checked:pa,onChange:c=>Yi(c.target.checked)})})]}),a.jsx("canvas",{ref:Rr,width:60,height:40,style:{width:"60px",height:"40px"}})]}),a.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:kr,onChange:c=>es(c.target.checked)}),a.jsx("span",{children:"Vias"})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:eo,onChange:c=>Fa(c.target.checked)}),a.jsx("span",{children:"Traces (Top)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Zo,onChange:c=>ts(c.target.checked)}),a.jsx("span",{children:"Components (Top)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Gr,onChange:c=>Xr(c.target.checked)}),a.jsx("span",{children:"Pads (Top)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:bo,onChange:c=>gs(c.target.checked)}),a.jsx("span",{children:"Test Points (Top)"})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Mr,onChange:c=>uo(c.target.checked)}),a.jsx("span",{children:"Traces (Bottom)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:qa,onChange:c=>ys(c.target.checked)}),a.jsx("span",{children:"Components (Bottom)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:fo,onChange:c=>Ko(c.target.checked)}),a.jsx("span",{children:"Pads (Bottom)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:vo,onChange:c=>yr(c.target.checked)}),a.jsx("span",{children:"Test Points (Bottom)"})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:ms,onChange:c=>Ai(c.target.checked)}),a.jsx("span",{children:"Power"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Ci,onChange:c=>Zt(c.target.checked)}),a.jsx("span",{children:"Ground"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:En,onChange:c=>gi(c.target.checked)}),a.jsx("span",{children:"Connections"})]}),a.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:kr&&Gr&&fo&&bo&&vo&&eo&&Mr&&Zo&&qa&&ms&&Ci&&En,onChange:c=>{const y=c.target.checked;es(y),Xr(y),Ko(y),gs(y),yr(y),Fa(y),uo(y),ts(y),ys(y),Ai(y),Zt(y),gi(y)}}),a.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),a.jsxs("div",{style:{marginTop:6},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",b,"%"]}),a.jsxs("label",{className:"radio-label",style:{margin:0},children:[a.jsx("input",{type:"checkbox",checked:T,onChange:c=>{const y=c.target.checked;y?($o(!0),Yi(!0)):(x(50),V("select")),D(y)}}),a.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:b,onChange:c=>x(Number(c.target.value)),onDoubleClick:()=>Yd("transparency"),className:"slider",style:{width:"100%",marginTop:3}}),T&&a.jsxs("div",{style:{marginTop:6},children:[a.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Cycle Speed: ",(E/1e3).toFixed(1),"s"]}),a.jsx("input",{type:"range",min:"500",max:"8000",step:"100",value:8500-E,onChange:c=>C(8500-Number(c.target.value)),onDoubleClick:()=>C(2e3),className:"slider",style:{width:"100%",marginTop:3}})]})]})]}),a.jsx(hv,{visible:!o&&!u}),a.jsx("canvas",{ref:ut,width:xl.width,height:xl.height,tabIndex:0,onMouseDown:$f,onMouseMove:qd,onMouseUp:Hd,onMouseLeave:Hd,onWheel:Ud,onDoubleClick:Fd,className:`pcb-canvas ${z==="transform"?"transform-cursor":z==="draw"?"draw-cursor":z==="erase"?"erase-cursor":"default-cursor"}`,style:{position:"absolute",left:"244px",top:"6px",...Cr?{cursor:Cr}:z==="pan"?{cursor:ds?"grabbing":"grab"}:{},width:`${xl.width}px`,height:`${xl.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),us&&a.jsxs("div",{style:{position:"absolute",left:`${244+xl.width-120}px`,top:`${6+xl.height+4}px`,fontSize:"11px",fontFamily:"monospace",color:"#333",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"2px 6px",borderRadius:"3px",border:"1px solid #ccc",pointerEvents:"none",zIndex:1e3},children:["(",us.x.toFixed(1),"mm, ",us.y.toFixed(1),"mm)"]}),a.jsx(Tv,{componentEditor:Ea,setComponentEditor:so,componentsTop:Ut,componentsBottom:Ft,setComponentsTop:Mi,setComponentsBottom:ki,connectingPin:Pr,setConnectingPin:qo,componentDialogPosition:Ho,setComponentDialogPosition:Ls,isDraggingDialog:cl,setIsDraggingDialog:Ws,dialogDragOffset:Ga,setDialogDragOffset:El,areComponentsLocked:Lo,setSelectedComponentIds:Kt,setNotesDialogVisible:ci,componentDefinition:Ea?(()=>{const c=Ut.find(y=>y.id===Ea.id)||Ft.find(y=>y.id===Ea.id);return c?Vf(c):void 0})():void 0}),Ua&&ja&&(()=>{const c=Ua.component,y=Ua.layer;if(!c)return null;const _=c.componentType||"Component",G=c.componentType==="IntegratedCircuit"&&"icType"in c?c.icType:null,re=Ru(c),Se=8,U=8,xe=200,ee=150,ue=10;let Te=Ua.x+Se,Ce=Ua.y+U;return Te+xe+ue>window.innerWidth&&(Te=Ua.x-xe-Se),Ce+ee+ue>window.innerHeight&&(Ce=Ua.y-ee-U),Te=Math.max(ue,Math.min(Te,window.innerWidth-xe-ue)),Ce=Math.max(ue,Math.min(Ce,window.innerHeight-ee-ue)),a.jsxs("div",{style:{position:"fixed",left:`${Te}px`,top:`${Ce}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[a.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:rl(_)}),a.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["Layer: ",y==="top"?"Top":"Bottom"]}),G&&a.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["IC Type: ",G]}),re.length>0&&a.jsx("div",{style:{marginBottom:"4px"},children:re.map((Ne,Re)=>a.jsx("div",{style:{color:"#e0e0e0",fontSize:"11px",marginBottom:"2px"},children:Ne},Re))}),c.description&&a.jsx("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:c.description}),c.notes&&a.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c.notes})]})})(),ka&&ja&&(()=>{const c=ka.stroke;return c.notes?a.jsxs("div",{style:{position:"fixed",left:`${ka.x+10}px`,top:`${ka.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[a.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"Test Point"}),a.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c.notes})]}):null})(),He&&He.visible&&(()=>{if(!kn.find(_=>_.id===He.id))return null;const y=fn.find(_=>_.id===He.powerBusId);return a.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[a.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),a.jsx("button",{onClick:()=>lt(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),a.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:y?`${y.name} (${y.voltage})`:"Unknown"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:`power-layer-${He.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),a.jsxs("select",{id:`power-layer-${He.id}`,name:`power-layer-${He.id}`,value:He.layer,onChange:_=>lt({...He,layer:_.target.value}),disabled:Qi,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:Qi?.6:1},children:[a.jsx("option",{value:"top",children:"Top"}),a.jsx("option",{value:"bottom",children:"Bottom"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),a.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:He.x.toFixed(2)})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),a.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:He.y.toFixed(2)})]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[a.jsx("button",{onClick:()=>lt(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),a.jsx("button",{onClick:()=>{Qi||(q(_=>_.map(G=>G.id===He.id?{...G,layer:He.layer}:G)),lt(null))},disabled:Qi,style:{padding:"2px 5px",background:Qi?"#f5f5f5":"#0b5fff",color:Qi?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Qi?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!o&&!u&&a.jsx("div",{className:"placeholder"})]})}),a.jsx(kv,{visible:Oc,onClose:()=>Ul(!1),powerBuses:fn,setPowerBuses:as,editingPowerBusId:d,setEditingPowerBusId:g,powers:kn}),a.jsx(Av,{visible:at,onClose:()=>We(!1),groundBuses:vi,setGroundBuses:Ys,editingGroundBusId:ot,setEditingGroundBusId:pt,grounds:_n}),a.jsx(Pv,{visible:j,projectDirHandle:zi,onClose:()=>{L(!1),Z(void 0)},onRestore:bf,position:Y,isDragging:ne,onDragStart:Xu}),a.jsx(Nv,{visible:Qn,onClose:()=>qt(!1),autoAssignDesignators:An,setAutoAssignDesignators:Yt,useGlobalDesignatorCounters:ti,setUseGlobalDesignatorCounters:Ki}),a.jsx("input",{ref:Go,type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",style:{display:"none"},onChange:c=>{const y=c.target.files?.[0];y&&Id(y,"top"),c.target.value=""}}),a.jsx("input",{ref:Eo,type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",style:{display:"none"},onChange:c=>{const y=c.target.files?.[0];y&&Id(y,"bottom"),c.target.value=""}}),a.jsx("input",{ref:mo,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async c=>{const y=c.target.files?.[0];if(y)try{Do(y.name);const _=await y.text(),G=JSON.parse(_);await is(G);let re;G.projectInfo?.name?re=G.projectInfo.name:(re=y.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Er(re)),Wr||Er(re),setTimeout(()=>{Ca({visible:!0,source:"open",interval:5})},100)}catch(_){console.error("Failed to open project",_),alert("Failed to open project file. See console for details.")}c.target.value=""}}),a.jsx(yv,{visible:Po.visible,selectedIds:Cn,selectedComponentIds:Hn,selectedPowerIds:Dn,selectedGroundIds:ri,drawingStrokes:ct,componentsTop:Ut,componentsBottom:Ft,powers:kn,grounds:_n,powerBuses:fn,onClose:()=>{Wo({visible:!1,text:""})},setComponentsTop:Mi,setComponentsBottom:ki,determineViaType:ns,determinePadType:ji,determineTestPointType:Bs,onFindComponent:Uc,onFindStroke:ql,onFindPower:jc,onFindGround:oc,onOpenNotesDialog:()=>ci(!0),position:yi,isDragging:Oo,onDragStart:c=>{yi&&(Pi({x:c.clientX-yi.x,y:c.clientY-yi.y}),to(!0),c.preventDefault())}}),a.jsx(mv,{visible:mr,selectedIds:Cn,selectedComponentIds:Hn,selectedPowerIds:Dn,selectedGroundIds:ri,drawingStrokes:ct,componentsTop:Ut,componentsBottom:Ft,powers:kn,grounds:_n,powerBuses:fn,onClose:()=>{ci(!1)},setComponentsTop:Mi,setComponentsBottom:ki,setDrawingStrokes:kt,setPowerSymbols:q,setGroundSymbols:Ae,determineViaType:ns,determinePadType:ji,determineTestPointType:Bs,position:Nr,isDragging:Ni,onDragStart:c=>{Nr&&(no({x:c.clientX-Nr.x,y:c.clientY-Nr.y}),$r(!0),c.preventDefault())}}),a.jsx(xv,{visible:Ti,projectNotes:_r,setProjectNotes:Gi,onClose:()=>{So(!1)},position:sr,isDragging:vn,onDragStart:c=>{sr?(Ha({x:c.clientX-sr.x,y:c.clientY-sr.y}),_i(!0),c.preventDefault()):(dn({x:c.clientX-300,y:c.clientY-200}),Ha({x:300,y:200}),_i(!0),c.preventDefault())}}),a.jsx(A2,{visible:$a.visible,title:"New Project",message:"You have unsaved changes. Do you want to save your project before creating a new one?",onYes:Yu,onNo:Zp,onCancel:Zd,yesButtonRef:Bc}),a.jsx(A2,{visible:sa.visible,title:"Open Project",message:"You have unsaved changes. Do you want to save your project before opening another one?",onYes:vf,onNo:Qd,onCancel:$u,yesButtonRef:zu}),pi.visible&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:c=>{c.target===c.currentTarget&&Wu()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:c=>c.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),a.jsx("input",{ref:Xo,type:"text",value:pi.projectName,onChange:c=>{la(y=>({...y,projectName:c.target.value}))},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),Vu()):c.key==="Escape"&&(c.preventDefault(),Wu())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),pi.projectName&&(()=>{const c=pi.projectName.match(/[^a-zA-Z0-9_-]/g);if(c){const y=[...new Set(c)];return a.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",y.map(_=>`"${_}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[a.jsx("input",{type:"text",value:pi.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:pi.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),a.jsx("button",{onClick:rd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),pi.projectName&&pi.locationPath&&a.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[a.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),a.jsx("div",{style:{color:"#4CAF50"},children:(()=>{if(!pi.projectName||!pi.locationPath)return"";const y=pi.projectName.trim().replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",_=`${y}.json`;return pi.locationPath===y?`${pi.locationPath}/${_}`:`${pi.locationPath}/${y}/${_}`})()})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:Wu,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:Vu,disabled:!pi.projectName.trim()||!pi.locationHandle,style:{padding:"8px 16px",background:!pi.projectName.trim()||!pi.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!pi.projectName.trim()||!pi.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!pi.projectName.trim()||!pi.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!pi.projectName.trim()||!pi.locationHandle?.6:1},children:"Create"})]})]})}),Bi.visible&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:c=>{c.target===c.currentTarget&&Tl()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:c=>c.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),a.jsx("input",{ref:nr,type:"text",value:Bi.filename,onChange:c=>{ls(y=>({...y,filename:c.target.value}))},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),ad()):c.key==="Escape"&&(c.preventDefault(),Tl())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[a.jsx("input",{type:"text",value:Bi.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Bi.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),a.jsx("button",{onClick:od,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Bi.filename&&Bi.locationPath&&a.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[a.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),a.jsxs("div",{style:{color:"#4CAF50"},children:[Bi.locationPath,"/",Bi.filename.endsWith(".json")?Bi.filename:`${Bi.filename}.json`]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:Tl,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:ad,disabled:!Bi.filename.trim()||!Bi.locationHandle,style:{padding:"8px 16px",background:!Bi.filename.trim()||!Bi.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Bi.filename.trim()||!Bi.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Bi.filename.trim()||!Bi.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Bi.filename.trim()||!Bi.locationHandle?.6:1},children:"Save"})]})]})}),a.jsx(gv,{visible:Ds.visible,title:Ds.title,message:Ds.message,onClose:()=>Gs({visible:!1,title:"",message:""})}),a.jsx(bv,{visible:Fl,dimensions:Na,onSave:c=>{Kr(c)},onClose:()=>Ms(!1)}),a.jsx(vv,{visible:Qc,onClose:()=>{let c=0,y=0;o?(c=o.x,y=o.y):u&&(c=u.x,y=u.y),Rs(_=>({..._,0:{pcbReferenceX:c,pcbReferenceY:y,x:0,y:0,zoom:vt,viewRotation:Xn,viewFlipX:$i,isBottomView:Ta,transparency:b,showTopImage:Aa,showBottomImage:pa,showViasLayer:kr,showTopTracesLayer:eo,showBottomTracesLayer:Mr,showTopPadsLayer:Gr,showBottomPadsLayer:fo,showTopTestPointsLayer:bo,showBottomTestPointsLayer:vo,showTopComponents:Zo,showBottomComponents:qa,showPowerLayer:ms,showGroundLayer:Ci,showConnectionsLayer:En}})),cs(!1)},topImage:o,bottomImage:u,selectedImageForTransform:Wt,setSelectedImageForTransform:ko,transformMode:No,setTransformMode:ya,updateImageTransform:Hc,resetImageTransform:df,setCurrentTool:V,isGrayscale:K,setIsGrayscale:O,areImagesLocked:Fn}),a.jsx(wv,{visible:Bl,onClose:()=>pl(!1),topImage:o,bottomImage:u,setTopImage:s,setBottomImage:f,componentsTop:Ut,componentsBottom:Ft,setComponentsTop:Mi,setComponentsBottom:ki,drawingStrokes:ct,setDrawingStrokes:kt,powerSymbols:kn,groundSymbols:_n,setPowerSymbols:q,setGroundSymbols:Ae,canvasRef:ut,isBottomView:Ta,setIsBottomView:co,originalTopFlipX:Ka,setOriginalTopFlipX:Ks,originalBottomFlipX:ua,setOriginalBottomFlipX:Za,originalTopFlipY:Vi,setOriginalTopFlipY:Li,originalBottomFlipY:dr,setOriginalBottomFlipY:Jr,cameraWorldCenter:xi,setCameraWorldCenter:di,viewScale:vt,viewRotation:Xn,setViewRotation:cr,viewFlipX:$i,setViewFlipX:Sr,contentBorder:5,setTransparency:x}),a.jsx(jv,{visible:Fc,selectedLayer:Yn,selectedComponentType:io,selectedComponentKey:ou,onLayerChange:c=>{ra(c),Hs.current=c,Vt(c),Q(c==="top"?jt:pe),R(c==="top"?gn:ht),c==="top"?($o(!0),ts(!0)):(Yi(!0),ys(!0))},onComponentTypeChange:(c,y,_)=>{Is(c),au(y),sf(_||null),Vl.current=c},onClose:()=>{xs(!1)}}),a.jsx(_v,{visible:fl.visible,size:fl.size,onSizeChange:c=>Xa(y=>({...y,size:c})),onApply:Wd,onCancel:()=>Xa({visible:!1,size:6})}),a.jsx(Lv,{visible:Vo.visible,interval:Vo.interval,onIntervalChange:c=>aa({visible:!0,interval:c}),onApply:()=>Zf(Vo.interval,!1),onCancel:()=>aa({visible:!1,interval:5})}),a.jsx(zv,{visible:dl.visible,interval:dl.interval,onIntervalChange:c=>Ca({...dl,interval:c}),onEnable:()=>Zf(dl.interval,!0),onSkip:Ou}),a.jsx("div",{style:{position:"fixed",bottom:8,left:8,zIndex:100},children:a.jsxs("button",{onClick:()=>{window.open("https://github.com/sponsors/pgiacalo","_blank","noopener,noreferrer")},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)",border:"1px solid rgba(27, 31, 36, 0.15)",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:500,color:"#24292f",boxShadow:"0 1px 0 rgba(27, 31, 36, 0.04)",transition:"background 0.2s"},onMouseEnter:c=>{c.currentTarget.style.background="linear-gradient(180deg, #f3f4f6 0%, #e5e6e9 100%)"},onMouseLeave:c=>{c.currentTarget.style.background="linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)"},title:"Donate to support this project",children:[a.jsx("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"#bf3989","aria-hidden":"true",children:a.jsx("path",{d:"M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.749.749 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5z"})}),"Donate"]})})]})}zm.createRoot(document.getElementById("root")).render(a.jsx(I.StrictMode,{children:a.jsx(Yv,{})}));export{wr as _,Gv as c,wm as g};
