(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const v of f.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&s(v)}).observe(document,{childList:!0,subtree:!0});function o(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(u){if(u.ep)return;u.ep=!0;const f=o(u);fetch(u.href,f)}})();var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Eh={exports:{}},_d={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function Sm(){if(Yg)return _d;Yg=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function o(s,u,f){var v=null;if(f!==void 0&&(v=""+f),u.key!==void 0&&(v=""+u.key),"key"in u){f={};for(var h in u)h!=="key"&&(f[h]=u[h])}else f=u;return u=f.ref,{$$typeof:n,type:s,key:v,ref:u!==void 0?u:null,props:f}}return _d.Fragment=i,_d.jsx=o,_d.jsxs=o,_d}var Gg;function Cm(){return Gg||(Gg=1,Eh.exports=Sm()),Eh.exports}var a=Cm(),Rh={exports:{}},si={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function Tm(){if($g)return si;$g=1;var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),v=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),R=Symbol.iterator;function C(F){return F===null||typeof F!="object"?null:(F=R&&F[R]||F["@@iterator"],typeof F=="function"?F:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,P={};function H(F,A,M){this.props=F,this.context=A,this.refs=P,this.updater=M||Z}H.prototype.isReactComponent={},H.prototype.setState=function(F,A){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,A,"setState")},H.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function ae(){}ae.prototype=H.prototype;function ce(F,A,M){this.props=F,this.context=A,this.refs=P,this.updater=M||Z}var q=ce.prototype=new ae;q.constructor=ce,O(q,H.prototype),q.isPureReactComponent=!0;var se=Array.isArray;function X(){}var _={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function V(F,A,M){var B=M.ref;return{$$typeof:n,type:F,key:A,ref:B!==void 0?B:null,props:M}}function $(F,A){return V(F.type,A,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function S(F){var A={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(M){return A[M]})}var J=/\/+/g;function re(F,A){return typeof F=="object"&&F!==null&&F.key!=null?S(""+F.key):A.toString(36)}function ye(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(X,X):(F.status="pending",F.then(function(A){F.status==="pending"&&(F.status="fulfilled",F.value=A)},function(A){F.status==="pending"&&(F.status="rejected",F.reason=A)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function K(F,A,M,B,de){var Ae=typeof F;(Ae==="undefined"||Ae==="boolean")&&(F=null);var Ee=!1;if(F===null)Ee=!0;else switch(Ae){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(F.$$typeof){case n:case i:Ee=!0;break;case T:return Ee=F._init,K(Ee(F._payload),A,M,B,de)}}if(Ee)return de=de(F),Ee=B===""?"."+re(F,0):B,se(de)?(M="",Ee!=null&&(M=Ee.replace(J,"$&/")+"/"),K(de,A,M,"",function(nt){return nt})):de!=null&&(k(de)&&(de=$(de,M+(de.key==null||F&&F.key===de.key?"":(""+de.key).replace(J,"$&/")+"/")+Ee)),A.push(de)),1;Ee=0;var Ge=B===""?".":B+":";if(se(F))for(var Pe=0;Pe<F.length;Pe++)B=F[Pe],Ae=Ge+re(B,Pe),Ee+=K(B,A,M,Ae,de);else if(Pe=C(F),typeof Pe=="function")for(F=Pe.call(F),Pe=0;!(B=F.next()).done;)B=B.value,Ae=Ge+re(B,Pe++),Ee+=K(B,A,M,Ae,de);else if(Ae==="object"){if(typeof F.then=="function")return K(ye(F),A,M,B,de);throw A=String(F),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function te(F,A,M){if(F==null)return F;var B=[],de=0;return K(F,B,"","",function(Ae){return A.call(M,Ae,de++)}),B}function ge(F){if(F._status===-1){var A=F._result;A=A(),A.then(function(M){(F._status===0||F._status===-1)&&(F._status=1,F._result=M)},function(M){(F._status===0||F._status===-1)&&(F._status=2,F._result=M)}),F._status===-1&&(F._status=0,F._result=A)}if(F._status===1)return F._result.default;throw F._result}var je=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},be={map:te,forEach:function(F,A,M){te(F,function(){A.apply(this,arguments)},M)},count:function(F){var A=0;return te(F,function(){A++}),A},toArray:function(F){return te(F,function(A){return A})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return si.Activity=D,si.Children=be,si.Component=H,si.Fragment=o,si.Profiler=u,si.PureComponent=ce,si.StrictMode=s,si.Suspense=b,si.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,si.__COMPILER_RUNTIME={__proto__:null,c:function(F){return _.H.useMemoCache(F)}},si.cache=function(F){return function(){return F.apply(null,arguments)}},si.cacheSignal=function(){return null},si.cloneElement=function(F,A,M){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var B=O({},F.props),de=F.key;if(A!=null)for(Ae in A.key!==void 0&&(de=""+A.key),A)!E.call(A,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&A.ref===void 0||(B[Ae]=A[Ae]);var Ae=arguments.length-2;if(Ae===1)B.children=M;else if(1<Ae){for(var Ee=Array(Ae),Ge=0;Ge<Ae;Ge++)Ee[Ge]=arguments[Ge+2];B.children=Ee}return V(F.type,de,B)},si.createContext=function(F){return F={$$typeof:v,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:f,_context:F},F},si.createElement=function(F,A,M){var B,de={},Ae=null;if(A!=null)for(B in A.key!==void 0&&(Ae=""+A.key),A)E.call(A,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(de[B]=A[B]);var Ee=arguments.length-2;if(Ee===1)de.children=M;else if(1<Ee){for(var Ge=Array(Ee),Pe=0;Pe<Ee;Pe++)Ge[Pe]=arguments[Pe+2];de.children=Ge}if(F&&F.defaultProps)for(B in Ee=F.defaultProps,Ee)de[B]===void 0&&(de[B]=Ee[B]);return V(F,Ae,de)},si.createRef=function(){return{current:null}},si.forwardRef=function(F){return{$$typeof:h,render:F}},si.isValidElement=k,si.lazy=function(F){return{$$typeof:T,_payload:{_status:-1,_result:F},_init:ge}},si.memo=function(F,A){return{$$typeof:x,type:F,compare:A===void 0?null:A}},si.startTransition=function(F){var A=_.T,M={};_.T=M;try{var B=F(),de=_.S;de!==null&&de(M,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(X,je)}catch(Ae){je(Ae)}finally{A!==null&&M.types!==null&&(A.types=M.types),_.T=A}},si.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},si.use=function(F){return _.H.use(F)},si.useActionState=function(F,A,M){return _.H.useActionState(F,A,M)},si.useCallback=function(F,A){return _.H.useCallback(F,A)},si.useContext=function(F){return _.H.useContext(F)},si.useDebugValue=function(){},si.useDeferredValue=function(F,A){return _.H.useDeferredValue(F,A)},si.useEffect=function(F,A){return _.H.useEffect(F,A)},si.useEffectEvent=function(F){return _.H.useEffectEvent(F)},si.useId=function(){return _.H.useId()},si.useImperativeHandle=function(F,A,M){return _.H.useImperativeHandle(F,A,M)},si.useInsertionEffect=function(F,A){return _.H.useInsertionEffect(F,A)},si.useLayoutEffect=function(F,A){return _.H.useLayoutEffect(F,A)},si.useMemo=function(F,A){return _.H.useMemo(F,A)},si.useOptimistic=function(F,A){return _.H.useOptimistic(F,A)},si.useReducer=function(F,A,M){return _.H.useReducer(F,A,M)},si.useRef=function(F){return _.H.useRef(F)},si.useState=function(F){return _.H.useState(F)},si.useSyncExternalStore=function(F,A,M){return _.H.useSyncExternalStore(F,A,M)},si.useTransition=function(){return _.H.useTransition()},si.version="19.2.0",si}var Xg;function z0(){return Xg||(Xg=1,Rh.exports=Tm()),Rh.exports}var U=z0();const Nt=wm(U);var Mh={exports:{}},Ld={},Bh={exports:{}},Oh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function jm(){return Kg||(Kg=1,(function(n){function i(K,te){var ge=K.length;K.push(te);e:for(;0<ge;){var je=ge-1>>>1,be=K[je];if(0<u(be,te))K[je]=te,K[ge]=be,ge=je;else break e}}function o(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var te=K[0],ge=K.pop();if(ge!==te){K[0]=ge;e:for(var je=0,be=K.length,F=be>>>1;je<F;){var A=2*(je+1)-1,M=K[A],B=A+1,de=K[B];if(0>u(M,ge))B<be&&0>u(de,M)?(K[je]=de,K[B]=ge,je=B):(K[je]=M,K[A]=ge,je=A);else if(B<be&&0>u(de,ge))K[je]=de,K[B]=ge,je=B;else break e}}return te}function u(K,te){var ge=K.sortIndex-te.sortIndex;return ge!==0?ge:K.id-te.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var v=Date,h=v.now();n.unstable_now=function(){return v.now()-h}}var b=[],x=[],T=1,D=null,R=3,C=!1,Z=!1,O=!1,P=!1,H=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function q(K){for(var te=o(x);te!==null;){if(te.callback===null)s(x);else if(te.startTime<=K)s(x),te.sortIndex=te.expirationTime,i(b,te);else break;te=o(x)}}function se(K){if(O=!1,q(K),!Z)if(o(b)!==null)Z=!0,X||(X=!0,S());else{var te=o(x);te!==null&&ye(se,te.startTime-K)}}var X=!1,_=-1,E=5,V=-1;function $(){return P?!0:!(n.unstable_now()-V<E)}function k(){if(P=!1,X){var K=n.unstable_now();V=K;var te=!0;try{e:{Z=!1,O&&(O=!1,ae(_),_=-1),C=!0;var ge=R;try{t:{for(q(K),D=o(b);D!==null&&!(D.expirationTime>K&&$());){var je=D.callback;if(typeof je=="function"){D.callback=null,R=D.priorityLevel;var be=je(D.expirationTime<=K);if(K=n.unstable_now(),typeof be=="function"){D.callback=be,q(K),te=!0;break t}D===o(b)&&s(b),q(K)}else s(b);D=o(b)}if(D!==null)te=!0;else{var F=o(x);F!==null&&ye(se,F.startTime-K),te=!1}}break e}finally{D=null,R=ge,C=!1}te=void 0}}finally{te?S():X=!1}}}var S;if(typeof ce=="function")S=function(){ce(k)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,re=J.port2;J.port1.onmessage=k,S=function(){re.postMessage(null)}}else S=function(){H(k,0)};function ye(K,te){_=H(function(){K(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return R},n.unstable_next=function(K){switch(R){case 1:case 2:case 3:var te=3;break;default:te=R}var ge=R;R=te;try{return K()}finally{R=ge}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ge=R;R=K;try{return te()}finally{R=ge}},n.unstable_scheduleCallback=function(K,te,ge){var je=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?je+ge:je):ge=je,K){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ge+be,K={id:T++,callback:te,priorityLevel:K,startTime:ge,expirationTime:be,sortIndex:-1},ge>je?(K.sortIndex=ge,i(x,K),o(b)===null&&K===o(x)&&(O?(ae(_),_=-1):O=!0,ye(se,ge-je))):(K.sortIndex=be,i(b,K),Z||C||(Z=!0,X||(X=!0,S()))),K},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(K){var te=R;return function(){var ge=R;R=te;try{return K.apply(this,arguments)}finally{R=ge}}}})(Oh)),Oh}var Zg;function km(){return Zg||(Zg=1,Bh.exports=jm()),Bh.exports}var Ih={exports:{}},Ts={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function Am(){if(Jg)return Ts;Jg=1;var n=z0();function i(b){var x="https://react.dev/errors/"+b;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)x+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+b+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(i(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(b,x,T){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:D==null?null:""+D,children:b,containerInfo:x,implementation:T}}var v=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(b,x){if(b==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ts.createPortal=function(b,x){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(i(299));return f(b,x,null,T)},Ts.flushSync=function(b){var x=v.T,T=s.p;try{if(v.T=null,s.p=2,b)return b()}finally{v.T=x,s.p=T,s.d.f()}},Ts.preconnect=function(b,x){typeof b=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(b,x))},Ts.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},Ts.preinit=function(b,x){if(typeof b=="string"&&x&&typeof x.as=="string"){var T=x.as,D=h(T,x.crossOrigin),R=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;T==="style"?s.d.S(b,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:D,integrity:R,fetchPriority:C}):T==="script"&&s.d.X(b,{crossOrigin:D,integrity:R,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Ts.preinitModule=function(b,x){if(typeof b=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var T=h(x.as,x.crossOrigin);s.d.M(b,{crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(b)},Ts.preload=function(b,x){if(typeof b=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var T=x.as,D=h(T,x.crossOrigin);s.d.L(b,T,{crossOrigin:D,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Ts.preloadModule=function(b,x){if(typeof b=="string")if(x){var T=h(x.as,x.crossOrigin);s.d.m(b,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:T,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(b)},Ts.requestFormReset=function(b){s.d.r(b)},Ts.unstable_batchedUpdates=function(b,x){return b(x)},Ts.useFormState=function(b,x,T){return v.H.useFormState(b,x,T)},Ts.useFormStatus=function(){return v.H.useHostTransitionStatus()},Ts.version="19.2.0",Ts}var Qg;function Nm(){if(Qg)return Ih.exports;Qg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),Ih.exports=Am(),Ih.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function _m(){if(e1)return Ld;e1=1;var n=km(),i=z0(),o=Nm();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function v(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(f(e)!==e)throw Error(s(188))}function x(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,l=t;;){var p=r.return;if(p===null)break;var m=p.alternate;if(m===null){if(l=p.return,l!==null){r=l;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===r)return b(p),e;if(m===l)return b(p),t;m=m.sibling}throw Error(s(188))}if(r.return!==l.return)r=p,l=m;else{for(var z=!1,oe=p.child;oe;){if(oe===r){z=!0,r=p,l=m;break}if(oe===l){z=!0,l=p,r=m;break}oe=oe.sibling}if(!z){for(oe=m.child;oe;){if(oe===r){z=!0,r=m,l=p;break}if(oe===l){z=!0,l=m,r=p;break}oe=oe.sibling}if(!z)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function T(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=T(e),t!==null)return t;e=e.sibling}return null}var D=Object.assign,R=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function S(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var J=Symbol.for("react.client.reference");function re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===J?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O:return"Fragment";case H:return"Profiler";case P:return"StrictMode";case se:return"Suspense";case X:return"SuspenseList";case V:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Z:return"Portal";case ce:return e.displayName||"Context";case ae:return(e._context.displayName||"Context")+".Consumer";case q:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _:return t=e.displayName||null,t!==null?t:re(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return re(e(t))}catch{}}return null}var ye=Array.isArray,K=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},je=[],be=-1;function F(e){return{current:e}}function A(e){0>be||(e.current=je[be],je[be]=null,be--)}function M(e,t){be++,je[be]=e.current,e.current=t}var B=F(null),de=F(null),Ae=F(null),Ee=F(null);function Ge(e,t){switch(M(Ae,t),M(de,e),M(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?gg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=gg(t),e=yg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(B),M(B,e)}function Pe(){A(B),A(de),A(Ae)}function nt(e){e.memoizedState!==null&&M(Ee,e);var t=B.current,r=yg(t,e.type);t!==r&&(M(de,e),M(B,r))}function Ke(e){de.current===e&&(A(B),A(de)),Ee.current===e&&(A(Ee),jd._currentValue=ge)}var wt,St;function Bt(e){if(wt===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);wt=t&&t[1]||"",St=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+e+St}var pe=!1;function _t(e,t){if(!e||pe)return"";pe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(ot){var et=ot}Reflect.construct(e,[],xt)}else{try{xt.call()}catch(ot){et=ot}e.call(xt.prototype)}}else{try{throw Error()}catch(ot){et=ot}(xt=e())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(ot){if(ot&&et&&typeof ot.stack=="string")return[ot.stack,et.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),z=m[0],oe=m[1];if(z&&oe){var ze=z.split(`
`),Je=oe.split(`
`);for(p=l=0;l<ze.length&&!ze[l].includes("DetermineComponentFrameRoot");)l++;for(;p<Je.length&&!Je[p].includes("DetermineComponentFrameRoot");)p++;if(l===ze.length||p===Je.length)for(l=ze.length-1,p=Je.length-1;1<=l&&0<=p&&ze[l]!==Je[p];)p--;for(;1<=l&&0<=p;l--,p--)if(ze[l]!==Je[p]){if(l!==1||p!==1)do if(l--,p--,0>p||ze[l]!==Je[p]){var ft=`
`+ze[l].replace(" at new "," at ");return e.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",e.displayName)),ft}while(1<=l&&0<=p);break}}}finally{pe=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Bt(r):""}function pn(e,t){switch(e.tag){case 26:case 27:case 5:return Bt(e.type);case 16:return Bt("Lazy");case 13:return e.child!==t&&t!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return _t(e.type,!1);case 11:return _t(e.type.render,!1);case 1:return _t(e.type,!0);case 31:return Bt("Activity");default:return""}}function Zt(e){try{var t="",r=null;do t+=pn(e,r),r=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var dt=Object.prototype.hasOwnProperty,Qt=n.unstable_scheduleCallback,Et=n.unstable_cancelCallback,vn=n.unstable_shouldYield,Jt=n.unstable_requestPaint,Wn=n.unstable_now,kt=n.unstable_getCurrentPriorityLevel,Pt=n.unstable_ImmediatePriority,fi=n.unstable_UserBlockingPriority,ut=n.unstable_NormalPriority,Ct=n.unstable_LowPriority,Mn=n.unstable_IdlePriority,Gt=n.log,Dn=n.unstable_setDisableYieldValue,Nn=null,en=null;function wn(e){if(typeof Gt=="function"&&Dn(e),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(Nn,e)}catch{}}var at=Math.clz32?Math.clz32:qt,$t=Math.log,Ft=Math.LN2;function qt(e){return e>>>=0,e===0?32:31-($t(e)/Ft|0)|0}var Sn=256,Oi=262144,In=4194304;function cn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ht(e,t,r){var l=e.pendingLanes;if(l===0)return 0;var p=0,m=e.suspendedLanes,z=e.pingedLanes;e=e.warmLanes;var oe=l&134217727;return oe!==0?(l=oe&~m,l!==0?p=cn(l):(z&=oe,z!==0?p=cn(z):r||(r=oe&~e,r!==0&&(p=cn(r))))):(oe=l&~m,oe!==0?p=cn(oe):z!==0?p=cn(z):r||(r=l&~e,r!==0&&(p=cn(r)))),p===0?0:t!==0&&t!==p&&(t&m)===0&&(m=p&-p,r=t&-t,m>=r||m===32&&(r&4194048)!==0)?t:p}function yo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Wr(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _o(){var e=In;return In<<=1,(In&62914560)===0&&(In=4194304),e}function Lo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Vt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function zo(e,t,r,l,p,m){var z=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var oe=e.entanglements,ze=e.expirationTimes,Je=e.hiddenUpdates;for(r=z&~r;0<r;){var ft=31-at(r),xt=1<<ft;oe[ft]=0,ze[ft]=-1;var et=Je[ft];if(et!==null)for(Je[ft]=null,ft=0;ft<et.length;ft++){var ot=et[ft];ot!==null&&(ot.lane&=-536870913)}r&=~xt}l!==0&&da(e,l,0),m!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=m&~(z&~t))}function da(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-at(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|r&261930}function Jo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var l=31-at(r),p=1<<l;p&t|e[l]&t&&(e[l]|=t),r&=~p}}function bt(e,t){var r=t&-t;return r=(r&42)!==0?1:ui(r),(r&(e.suspendedLanes|t))!==0?0:r}function ui(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Jn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ur(){var e=te.p;return e!==0?e:(e=window.event,e===void 0?32:Ig(e.type))}function Hi(e,t){var r=te.p;try{return te.p=e,t()}finally{te.p=r}}var jr=Math.random().toString(36).slice(2),vi="__reactFiber$"+jr,yi="__reactProps$"+jr,mo="__reactContainer$"+jr,Qo="__reactEvents$"+jr,_a="__reactListeners$"+jr,hl="__reactHandles$"+jr,La="__reactResources$"+jr,za="__reactMarker$"+jr;function ls(e){delete e[vi],delete e[yi],delete e[Qo],delete e[_a],delete e[hl]}function Yn(e){var t=e[vi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[mo]||r[vi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Cg(e);e!==null;){if(r=e[vi])return r;e=Cg(e)}return t}e=r,r=e.parentNode}return null}function Po(e){if(e=e[vi]||e[mo]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ti(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function ea(e){var t=e[La];return t||(t=e[La]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ln(e){e[za]=!0}var _s=new Set,Hn={};function ta(e,t){pa(e,t),pa(e+"Capture",t)}function pa(e,t){for(Hn[e]=t,e=0;e<t.length;e++)_s.add(t[e])}var Ls=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zs={},Ks={};function hc(e){return dt.call(Ks,e)?!0:dt.call(zs,e)?!1:Ls.test(e)?Ks[e]=!0:(zs[e]=!0,!1)}function Xi(e,t,r){if(hc(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Ps(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function On(e,t,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+l)}}function Bn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ds(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pa(e,t,r){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return p.call(this)},set:function(z){r=""+z,m.call(this,z)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(z){r=""+z},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pr(e){if(!e._valueTracker){var t=Ds(e)?"checked":"value";e._valueTracker=Pa(e,t,""+e[t])}}function xo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),l="";return e&&(l=Ds(e)?e.checked?"true":"false":e.value),e=l,e!==r?(t.setValue(e),!0):!1}function tr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Un=/[\n"\\]/g;function di(e){return e.replace(Un,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function gl(e,t,r,l,p,m,z,oe){e.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?e.type=z:e.removeAttribute("type"),t!=null?z==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Bn(t)):e.value!==""+Bn(t)&&(e.value=""+Bn(t)):z!=="submit"&&z!=="reset"||e.removeAttribute("value"),t!=null?ha(e,z,Bn(t)):r!=null?ha(e,z,Bn(r)):l!=null&&e.removeAttribute("value"),p==null&&m!=null&&(e.defaultChecked=!!m),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?e.name=""+Bn(oe):e.removeAttribute("name")}function Ml(e,t,r,l,p,m,z,oe){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),t!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||t!=null)){Pr(e);return}r=r!=null?""+Bn(r):"",t=t!=null?""+Bn(t):r,oe||t===e.value||(e.value=t),e.defaultValue=t}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=oe?e.checked:!!l,e.defaultChecked=!!l,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(e.name=z),Pr(e)}function ha(e,t,r){t==="number"&&tr(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function bo(e,t,r,l){if(e=e.options,t){t={};for(var p=0;p<r.length;p++)t["$"+r[p]]=!0;for(r=0;r<e.length;r++)p=t.hasOwnProperty("$"+e[r].value),e[r].selected!==p&&(e[r].selected=p),p&&l&&(e[r].defaultSelected=!0)}else{for(r=""+Bn(r),t=null,p=0;p<e.length;p++){if(e[p].value===r){e[p].selected=!0,l&&(e[p].defaultSelected=!0);return}t!==null||e[p].disabled||(t=e[p])}t!==null&&(t.selected=!0)}}function Es(e,t,r){if(t!=null&&(t=""+Bn(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+Bn(r):""}function Da(e,t,r,l){if(t==null){if(l!=null){if(r!=null)throw Error(s(92));if(ye(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),t=r}r=Bn(t),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l),Pr(e)}function vo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function At(e,t,r){var l=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,r):typeof r!="number"||r===0||Vo.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Vi(e,t,r){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var p in t)l=t[p],t.hasOwnProperty(p)&&r[p]!==l&&At(e,p,l)}else for(var m in t)t.hasOwnProperty(m)&&At(e,m,t[m])}function so(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ea=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ga(e){return Ea.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ka(){}var nr=null;function Wi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cs=null,En=null;function Qn(e){var t=Po(e);if(t&&(e=t.stateNode)){var r=e[yi]||null;e:switch(e=t.stateNode,t.type){case"input":if(gl(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+di(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var l=r[t];if(l!==e&&l.form===e.form){var p=l[yi]||null;if(!p)throw Error(s(90));gl(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(t=0;t<r.length;t++)l=r[t],l.form===e.form&&xo(l)}break e;case"textarea":Es(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&bo(e,!!r.multiple,t,!1)}}}var Cn=!1;function Ql(e,t,r){if(Cn)return e(t,r);Cn=!0;try{var l=e(t);return l}finally{if(Cn=!1,(cs!==null||En!==null)&&(ip(),cs&&(t=cs,e=En,En=cs=null,Qn(t),e)))for(t=0;t<e.length;t++)Qn(e[t])}}function na(e,t){var r=e.stateNode;if(r===null)return null;var l=r[yi]||null;if(l===null)return null;r=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tn=!1;if(rn)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){Tn=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{Tn=!1}var Kt=null,ii=null,on=null;function nu(){if(on)return on;var e,t=ii,r=t.length,l,p="value"in Kt?Kt.value:Kt.textContent,m=p.length;for(e=0;e<r&&t[e]===p[e];e++);var z=r-e;for(l=1;l<=z&&t[r-l]===p[m-l];l++);return on=p.slice(e,1<l?1-l:void 0)}function Rt(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ai(){return!0}function Wt(){return!1}function Vn(e){function t(r,l,p,m,z){this._reactName=r,this._targetInst=p,this.type=l,this.nativeEvent=m,this.target=z,this.currentTarget=null;for(var oe in e)e.hasOwnProperty(oe)&&(r=e[oe],this[oe]=r?r(m):m[oe]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ai:Wt,this.isPropagationStopped=Wt,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),t}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=Vn(Do),Yr=D({},Do,{view:0,detail:0}),Rs=Vn(Yr),ya,Ma,Ms,Bl=D({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ln,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ms&&(Ms&&e.type==="mousemove"?(ya=e.screenX-Ms.screenX,Ma=e.screenY-Ms.screenY):Ma=ya=0,Ms=e),ya)},movementY:function(e){return"movementY"in e?e.movementY:Ma}}),yl=Vn(Bl),Js=D({},Bl,{dataTransfer:0}),Qs=Vn(Js),iu=D({},Yr,{relatedTarget:0}),an=Vn(iu),us=D({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),w=Vn(us),W=D({},Do,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),me=Vn(W),Ne=D({},Do,{data:0}),Ue=Vn(Ne),it={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ut={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ut[e])?!!t[e]:!1}function ln(){return sn}var Xn=D({},Yr,{key:function(e){if(e.key){var t=it[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rt(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ln,charCode:function(e){return e.type==="keypress"?Rt(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rt(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pi=Vn(Xn),Dr=D({},Bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ji=Vn(Dr),Ii=D({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ln}),Ni=Vn(Ii),mr=D({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ki=Vn(mr),Za=D({},Bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wo=Vn(Za),Bs=D({},Do,{newState:0,oldState:0}),lo=Vn(Bs),Os=[9,13,27,32],Er=rn&&"CompositionEvent"in window,ia=null;rn&&"documentMode"in document&&(ia=document.documentMode);var co=rn&&"TextEvent"in window&&!ia,Ba=rn&&(!Er||ia&&8<ia&&11>=ia),ri=" ",Ja=!1;function Ol(e,t){switch(e){case"keyup":return Os.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oa=!1;function Eo(e,t){switch(e){case"compositionend":return gc(t);case"keypress":return t.which!==32?null:(Ja=!0,ri);case"textInput":return e=t.data,e===ri&&Ja?null:e;default:return null}}function fs(e,t){if(Oa)return e==="compositionend"||!Er&&Ol(e,t)?(e=nu(),on=ii=Kt=null,Oa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ba&&t.locale!=="ko"?null:t.data;default:return null}}var Il={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ds(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Il[e.type]:t==="textarea"}function ra(e,t,r,l){cs?En?En.push(l):En=[l]:cs=l,t=up(t,"onChange"),0<t.length&&(r=new Ra("onChange","change",null,r,l),e.push({event:r,listeners:t}))}var Jr=null,Ia=null;function Is(e){cg(e,0)}function Qa(e){var t=Ti(e);if(xo(t))return e}function es(e,t){if(e==="change")return t}var oa=!1;if(rn){var Qr;if(rn){var ps="oninput"in document;if(!ps){var ma=document.createElement("div");ma.setAttribute("oninput","return;"),ps=typeof ma.oninput=="function"}Qr=ps}else Qr=!1;oa=Qr&&(!document.documentMode||9<document.documentMode)}function wi(){Jr&&(Jr.detachEvent("onpropertychange",hs),Ia=Jr=null)}function hs(e){if(e.propertyName==="value"&&Qa(Ia)){var t=[];ra(t,Ia,e,Wi(e)),Ql(Is,t)}}function Zi(e,t,r){e==="focusin"?(wi(),Jr=t,Ia=r,Jr.attachEvent("onpropertychange",hs)):e==="focusout"&&wi()}function fr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qa(Ia)}function yc(e,t){if(e==="click")return Qa(t)}function xa(e,t){if(e==="input"||e==="change")return Qa(t)}function el(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var So=typeof Object.is=="function"?Object.is:el;function ml(e,t){if(So(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var p=r[l];if(!dt.call(t,p)||!So(e[p],t[p]))return!1}return!0}function mc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ua(e,t){var r=mc(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=t&&l>=t)return{node:r,offset:t-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mc(r)}}function Us(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Us(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gs(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=tr(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=tr(e.document)}return t}function aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ro=rn&&"documentMode"in document&&11>=document.documentMode,ba=null,ys=null,sa=null,ts=!1;function Ui(e,t,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ts||ba==null||ba!==tr(l)||(l=ba,"selectionStart"in l&&aa(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),sa&&ml(sa,l)||(sa=l,l=up(ys,"onSelect"),0<l.length&&(t=new Ra("onSelect","select",null,t,r),e.push({event:t,listeners:l}),t.target=ba)))}function _i(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var dr={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionrun:_i("Transition","TransitionRun"),transitionstart:_i("Transition","TransitionStart"),transitioncancel:_i("Transition","TransitionCancel"),transitionend:_i("Transition","TransitionEnd")},eo={},tl={};rn&&(tl=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function Fs(e){if(eo[e])return eo[e];if(!dr[e])return e;var t=dr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in tl)return eo[e]=t[r];return e}var to=Fs("animationend"),la=Fs("animationiteration"),nl=Fs("animationstart"),qs=Fs("transitionrun"),il=Fs("transitionstart"),xl=Fs("transitioncancel"),rl=Fs("transitionend"),Fa=new Map,ol="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ol.push("scrollEnd");function ir(e,t){Fa.set(e,t),ta(t,[e])}var Si=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rr=[],Mr=0,va=0;function Rc(){for(var e=Mr,t=va=Mr=0;t<e;){var r=Rr[t];Rr[t++]=null;var l=Rr[t];Rr[t++]=null;var p=Rr[t];Rr[t++]=null;var m=Rr[t];if(Rr[t++]=null,l!==null&&p!==null){var z=l.pending;z===null?p.next=p:(p.next=z.next,z.next=p),l.pending=p}m!==0&&Di(r,p,m)}}function Hs(e,t,r,l){Rr[Mr++]=e,Rr[Mr++]=t,Rr[Mr++]=r,Rr[Mr++]=l,va|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Mc(e,t,r,l){return Hs(e,t,r,l),Ji(e)}function ms(e,t){return Hs(e,null,null,t),Ji(e)}function Di(e,t,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var p=!1,m=e.return;m!==null;)m.childLanes|=r,l=m.alternate,l!==null&&(l.childLanes|=r),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(p=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,p&&t!==null&&(p=31-at(r),e=m.hiddenUpdates,l=e[p],l===null?e[p]=[t]:l.push(t),t.lane=r|536870912),m):null}function Ji(e){if(50<xd)throw xd=0,rh=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Co={};function Bc(e,t,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wo(e,t,r,l){return new Bc(e,t,r,l)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wa(e,t){var r=e.alternate;return r===null?(r=Wo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function ec(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function al(e,t,r,l,p,m){var z=0;if(l=e,typeof e=="function")xc(e)&&(z=1);else if(typeof e=="string")z=cm(e,r,B.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case V:return e=Wo(31,r,t,p),e.elementType=V,e.lanes=m,e;case O:return bl(r.children,p,m,t);case P:z=8,p|=24;break;case H:return e=Wo(12,r,t,p|2),e.elementType=H,e.lanes=m,e;case se:return e=Wo(13,r,t,p),e.elementType=se,e.lanes=m,e;case X:return e=Wo(19,r,t,p),e.elementType=X,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:z=10;break e;case ae:z=9;break e;case q:z=11;break e;case _:z=14;break e;case E:z=16,l=null;break e}z=29,r=Error(s(130,e===null?"null":typeof e,"")),l=null}return t=Wo(z,r,t,p),t.elementType=e,t.type=l,t.lanes=m,t}function bl(e,t,r,l){return e=Wo(7,e,l,t),e.lanes=r,e}function Vs(e,t,r){return e=Wo(6,e,null,t),e.lanes=r,e}function Ul(e){var t=Wo(18,null,null,0);return t.stateNode=e,t}function xs(e,t,r){return t=Wo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var vl=new WeakMap;function Sa(e,t){if(typeof e=="object"&&e!==null){var r=vl.get(e);return r!==void 0?r:(t={value:e,source:t,stack:Zt(t)},vl.set(e,t),t)}return{value:e,source:t,stack:Zt(t)}}var wl=[],ns=0,Sl=null,bc=0,no=[],pr=0,Ws=null,is=1,Mo="";function To(e,t){wl[ns++]=bc,wl[ns++]=Sl,Sl=e,bc=t}function Oc(e,t,r){no[pr++]=is,no[pr++]=Mo,no[pr++]=Ws,Ws=e;var l=is;e=Mo;var p=32-at(l)-1;l&=~(1<<p),r+=1;var m=32-at(t)+p;if(30<m){var z=p-p%5;m=(l&(1<<z)-1).toString(32),l>>=z,p-=z,is=1<<32-at(t)+p|r<<p|l,Mo=m+e}else is=1<<m|r<<p|l,Mo=e}function Fl(e){e.return!==null&&(To(e,1),Oc(e,1,0))}function Ys(e){for(;e===Sl;)Sl=wl[--ns],wl[ns]=null,bc=wl[--ns],wl[ns]=null;for(;e===Ws;)Ws=no[--pr],no[pr]=null,Mo=no[--pr],no[pr]=null,is=no[--pr],no[pr]=null}function uf(e,t){no[pr++]=is,no[pr++]=Mo,no[pr++]=Ws,is=t.id,Mo=t.overflow,Ws=e}var Bo=null,hr=null,ki=!1,Ca=null,kr=!1,bs=Error(s(519));function Cl(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Br(Sa(t,e)),bs}function ru(e){var t=e.stateNode,r=e.type,l=e.memoizedProps;switch(t[vi]=e,t[yi]=l,r){case"dialog":Pi("cancel",t),Pi("close",t);break;case"iframe":case"object":case"embed":Pi("load",t);break;case"video":case"audio":for(r=0;r<vd.length;r++)Pi(vd[r],t);break;case"source":Pi("error",t);break;case"img":case"image":case"link":Pi("error",t),Pi("load",t);break;case"details":Pi("toggle",t);break;case"input":Pi("invalid",t),Ml(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Pi("invalid",t);break;case"textarea":Pi("invalid",t),Da(t,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||l.suppressHydrationWarning===!0||pg(t.textContent,r)?(l.popover!=null&&(Pi("beforetoggle",t),Pi("toggle",t)),l.onScroll!=null&&Pi("scroll",t),l.onScrollEnd!=null&&Pi("scrollend",t),l.onClick!=null&&(t.onclick=Ka),t=!0):t=!1,t||Cl(e,!0)}function ca(e){for(Bo=e.return;Bo;)switch(Bo.tag){case 5:case 31:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:Bo=Bo.return}}function Fi(e){if(e!==Bo)return!1;if(!ki)return ca(e),ki=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||bh(e.type,e.memoizedProps)),r=!r),r&&hr&&Cl(e),ca(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));hr=Sg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));hr=Sg(e)}else t===27?(t=hr,ju(e.type)?(e=Th,Th=null,hr=e):hr=t):hr=Bo?$l(e.stateNode.nextSibling):null;return!0}function qa(){hr=Bo=null,ki=!1}function Yo(){var e=Ca;return e!==null&&(ul===null?ul=e:ul.push.apply(ul,e),Ca=null),e}function Br(e){Ca===null?Ca=[e]:Ca.push(e)}var Ha=F(null),Or=null,uo=null;function Ir(e,t,r){M(Ha,t._currentValue),t._currentValue=r}function Gr(e){e._currentValue=Ha.current,A(Ha)}function fo(e,t,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===r)break;e=e.return}}function Go(e,t,r,l){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var m=p.dependencies;if(m!==null){var z=p.child;m=m.firstContext;e:for(;m!==null;){var oe=m;m=p;for(var ze=0;ze<t.length;ze++)if(oe.context===t[ze]){m.lanes|=r,oe=m.alternate,oe!==null&&(oe.lanes|=r),fo(m.return,r,e),l||(z=null);break e}m=oe.next}}else if(p.tag===18){if(z=p.return,z===null)throw Error(s(341));z.lanes|=r,m=z.alternate,m!==null&&(m.lanes|=r),fo(z,r,e),z=null}else z=p.child;if(z!==null)z.return=p;else for(z=p;z!==null;){if(z===e){z=null;break}if(p=z.sibling,p!==null){p.return=z.return,z=p;break}z=z.return}p=z}}function $r(e,t,r,l){e=null;for(var p=t,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var z=p.alternate;if(z===null)throw Error(s(387));if(z=z.memoizedProps,z!==null){var oe=p.type;So(p.pendingProps.value,z.value)||(e!==null?e.push(oe):e=[oe])}}else if(p===Ee.current){if(z=p.alternate,z===null)throw Error(s(387));z.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(jd):e=[jd])}p=p.return}e!==null&&Go(t,e,r,l),t.flags|=262144}function Va(e){for(e=e.firstContext;e!==null;){if(!So(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function jo(e){Or=e,uo=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xr(e){return sl(Or,e)}function Ta(e,t){return Or===null&&jo(e),sl(e,t)}function sl(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},uo===null){if(e===null)throw Error(s(308));uo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else uo=uo.next=t;return r}var Wa=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},vs=n.unstable_scheduleCallback,Ya=n.unstable_NormalPriority,Ei={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $o(){return{controller:new Wa,data:new Map,refCount:0}}function Oo(e){e.refCount--,e.refCount===0&&vs(Ya,function(){e.controller.abort()})}var _n=null,Rn=0,d=0,g=null;function j(e,t){if(_n===null){var r=_n=[];Rn=0,d=uh(),g={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Rn++,t.then(L,L),t}function L(){if(--Rn===0&&_n!==null){g!==null&&(g.status="fulfilled");var e=_n;_n=null,d=0,g=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function G(e,t){var r=[],l={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var p=0;p<r.length;p++)(0,r[p])(t)},function(p){for(l.status="rejected",l.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),l}var Q=K.S;K.S=function(e,t){B0=Wn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&j(e,t),Q!==null&&Q(e,t)};var ee=F(null);function le(){var e=ee.current;return e!==null?e:Hr.pooledCache}function fe(e,t){t===null?M(ee,ee.current):M(ee,t.pool)}function ve(){var e=le();return e===null?null:{parent:Ei._currentValue,pool:e}}var Re=Error(s(460)),Ve=Error(s(474)),xe=Error(s(542)),Oe={then:function(){}};function Ye(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tt(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(Ka,Ka),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Tt(e),e;default:if(typeof t.status=="string")t.then(Ka,Ka);else{if(e=Hr,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var p=t;p.status="fulfilled",p.value=l}},function(l){if(t.status==="pending"){var p=t;p.status="rejected",p.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Tt(e),e}throw st=t,Re}}function qe(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(st=r,Re):r}}var st=null;function ct(){if(st===null)throw Error(s(459));var e=st;return st=null,e}function Tt(e){if(e===Re||e===xe)throw Error(s(483))}var mt=null,Xt=0;function zt(e){var t=Xt;return Xt+=1,mt===null&&(mt=[]),tt(mt,e,t)}function hn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function It(e,t){throw t.$$typeof===R?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Gn(e){function t(We,Ie){if(e){var Ze=We.deletions;Ze===null?(We.deletions=[Ie],We.flags|=16):Ze.push(Ie)}}function r(We,Ie){if(!e)return null;for(;Ie!==null;)t(We,Ie),Ie=Ie.sibling;return null}function l(We){for(var Ie=new Map;We!==null;)We.key!==null?Ie.set(We.key,We):Ie.set(We.index,We),We=We.sibling;return Ie}function p(We,Ie){return We=wa(We,Ie),We.index=0,We.sibling=null,We}function m(We,Ie,Ze){return We.index=Ze,e?(Ze=We.alternate,Ze!==null?(Ze=Ze.index,Ze<Ie?(We.flags|=67108866,Ie):Ze):(We.flags|=67108866,Ie)):(We.flags|=1048576,Ie)}function z(We){return e&&We.alternate===null&&(We.flags|=67108866),We}function oe(We,Ie,Ze,yt){return Ie===null||Ie.tag!==6?(Ie=Vs(Ze,We.mode,yt),Ie.return=We,Ie):(Ie=p(Ie,Ze),Ie.return=We,Ie)}function ze(We,Ie,Ze,yt){var Pn=Ze.type;return Pn===O?ft(We,Ie,Ze.props.children,yt,Ze.key):Ie!==null&&(Ie.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===E&&qe(Pn)===Ie.type)?(Ie=p(Ie,Ze.props),hn(Ie,Ze),Ie.return=We,Ie):(Ie=al(Ze.type,Ze.key,Ze.props,null,We.mode,yt),hn(Ie,Ze),Ie.return=We,Ie)}function Je(We,Ie,Ze,yt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ze.containerInfo||Ie.stateNode.implementation!==Ze.implementation?(Ie=xs(Ze,We.mode,yt),Ie.return=We,Ie):(Ie=p(Ie,Ze.children||[]),Ie.return=We,Ie)}function ft(We,Ie,Ze,yt,Pn){return Ie===null||Ie.tag!==7?(Ie=bl(Ze,We.mode,yt,Pn),Ie.return=We,Ie):(Ie=p(Ie,Ze),Ie.return=We,Ie)}function xt(We,Ie,Ze){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=Vs(""+Ie,We.mode,Ze),Ie.return=We,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:return Ze=al(Ie.type,Ie.key,Ie.props,null,We.mode,Ze),hn(Ze,Ie),Ze.return=We,Ze;case Z:return Ie=xs(Ie,We.mode,Ze),Ie.return=We,Ie;case E:return Ie=qe(Ie),xt(We,Ie,Ze)}if(ye(Ie)||S(Ie))return Ie=bl(Ie,We.mode,Ze,null),Ie.return=We,Ie;if(typeof Ie.then=="function")return xt(We,zt(Ie),Ze);if(Ie.$$typeof===ce)return xt(We,Ta(We,Ie),Ze);It(We,Ie)}return null}function et(We,Ie,Ze,yt){var Pn=Ie!==null?Ie.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Pn!==null?null:oe(We,Ie,""+Ze,yt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case C:return Ze.key===Pn?ze(We,Ie,Ze,yt):null;case Z:return Ze.key===Pn?Je(We,Ie,Ze,yt):null;case E:return Ze=qe(Ze),et(We,Ie,Ze,yt)}if(ye(Ze)||S(Ze))return Pn!==null?null:ft(We,Ie,Ze,yt,null);if(typeof Ze.then=="function")return et(We,Ie,zt(Ze),yt);if(Ze.$$typeof===ce)return et(We,Ie,Ta(We,Ze),yt);It(We,Ze)}return null}function ot(We,Ie,Ze,yt,Pn){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return We=We.get(Ze)||null,oe(Ie,We,""+yt,Pn);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case C:return We=We.get(yt.key===null?Ze:yt.key)||null,ze(Ie,We,yt,Pn);case Z:return We=We.get(yt.key===null?Ze:yt.key)||null,Je(Ie,We,yt,Pn);case E:return yt=qe(yt),ot(We,Ie,Ze,yt,Pn)}if(ye(yt)||S(yt))return We=We.get(Ze)||null,ft(Ie,We,yt,Pn,null);if(typeof yt.then=="function")return ot(We,Ie,Ze,zt(yt),Pn);if(yt.$$typeof===ce)return ot(We,Ie,Ze,Ta(Ie,yt),Pn);It(Ie,yt)}return null}function tn(We,Ie,Ze,yt){for(var Pn=null,sr=null,xn=Ie,bi=Ie=0,Bi=null;xn!==null&&bi<Ze.length;bi++){xn.index>bi?(Bi=xn,xn=null):Bi=xn.sibling;var lr=et(We,xn,Ze[bi],yt);if(lr===null){xn===null&&(xn=Bi);break}e&&xn&&lr.alternate===null&&t(We,xn),Ie=m(lr,Ie,bi),sr===null?Pn=lr:sr.sibling=lr,sr=lr,xn=Bi}if(bi===Ze.length)return r(We,xn),ki&&To(We,bi),Pn;if(xn===null){for(;bi<Ze.length;bi++)xn=xt(We,Ze[bi],yt),xn!==null&&(Ie=m(xn,Ie,bi),sr===null?Pn=xn:sr.sibling=xn,sr=xn);return ki&&To(We,bi),Pn}for(xn=l(xn);bi<Ze.length;bi++)Bi=ot(xn,We,bi,Ze[bi],yt),Bi!==null&&(e&&Bi.alternate!==null&&xn.delete(Bi.key===null?bi:Bi.key),Ie=m(Bi,Ie,bi),sr===null?Pn=Bi:sr.sibling=Bi,sr=Bi);return e&&xn.forEach(function(Lu){return t(We,Lu)}),ki&&To(We,bi),Pn}function qn(We,Ie,Ze,yt){if(Ze==null)throw Error(s(151));for(var Pn=null,sr=null,xn=Ie,bi=Ie=0,Bi=null,lr=Ze.next();xn!==null&&!lr.done;bi++,lr=Ze.next()){xn.index>bi?(Bi=xn,xn=null):Bi=xn.sibling;var Lu=et(We,xn,lr.value,yt);if(Lu===null){xn===null&&(xn=Bi);break}e&&xn&&Lu.alternate===null&&t(We,xn),Ie=m(Lu,Ie,bi),sr===null?Pn=Lu:sr.sibling=Lu,sr=Lu,xn=Bi}if(lr.done)return r(We,xn),ki&&To(We,bi),Pn;if(xn===null){for(;!lr.done;bi++,lr=Ze.next())lr=xt(We,lr.value,yt),lr!==null&&(Ie=m(lr,Ie,bi),sr===null?Pn=lr:sr.sibling=lr,sr=lr);return ki&&To(We,bi),Pn}for(xn=l(xn);!lr.done;bi++,lr=Ze.next())lr=ot(xn,We,bi,lr.value,yt),lr!==null&&(e&&lr.alternate!==null&&xn.delete(lr.key===null?bi:lr.key),Ie=m(lr,Ie,bi),sr===null?Pn=lr:sr.sibling=lr,sr=lr);return e&&xn.forEach(function(vm){return t(We,vm)}),ki&&To(We,bi),Pn}function zr(We,Ie,Ze,yt){if(typeof Ze=="object"&&Ze!==null&&Ze.type===O&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case C:e:{for(var Pn=Ze.key;Ie!==null;){if(Ie.key===Pn){if(Pn=Ze.type,Pn===O){if(Ie.tag===7){r(We,Ie.sibling),yt=p(Ie,Ze.props.children),yt.return=We,We=yt;break e}}else if(Ie.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===E&&qe(Pn)===Ie.type){r(We,Ie.sibling),yt=p(Ie,Ze.props),hn(yt,Ze),yt.return=We,We=yt;break e}r(We,Ie);break}else t(We,Ie);Ie=Ie.sibling}Ze.type===O?(yt=bl(Ze.props.children,We.mode,yt,Ze.key),yt.return=We,We=yt):(yt=al(Ze.type,Ze.key,Ze.props,null,We.mode,yt),hn(yt,Ze),yt.return=We,We=yt)}return z(We);case Z:e:{for(Pn=Ze.key;Ie!==null;){if(Ie.key===Pn)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ze.containerInfo&&Ie.stateNode.implementation===Ze.implementation){r(We,Ie.sibling),yt=p(Ie,Ze.children||[]),yt.return=We,We=yt;break e}else{r(We,Ie);break}else t(We,Ie);Ie=Ie.sibling}yt=xs(Ze,We.mode,yt),yt.return=We,We=yt}return z(We);case E:return Ze=qe(Ze),zr(We,Ie,Ze,yt)}if(ye(Ze))return tn(We,Ie,Ze,yt);if(S(Ze)){if(Pn=S(Ze),typeof Pn!="function")throw Error(s(150));return Ze=Pn.call(Ze),qn(We,Ie,Ze,yt)}if(typeof Ze.then=="function")return zr(We,Ie,zt(Ze),yt);if(Ze.$$typeof===ce)return zr(We,Ie,Ta(We,Ze),yt);It(We,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint"?(Ze=""+Ze,Ie!==null&&Ie.tag===6?(r(We,Ie.sibling),yt=p(Ie,Ze),yt.return=We,We=yt):(r(We,Ie),yt=Vs(Ze,We.mode,yt),yt.return=We,We=yt),z(We)):r(We,Ie)}return function(We,Ie,Ze,yt){try{Xt=0;var Pn=zr(We,Ie,Ze,yt);return mt=null,Pn}catch(xn){if(xn===Re||xn===xe)throw xn;var sr=Wo(29,xn,null,We.mode);return sr.lanes=yt,sr.return=We,sr}finally{}}}var Qi=Gn(!0),Fn=Gn(!1),Mt=!1;function Dt(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function br(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function gn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function kn(e,t,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ai&2)!==0){var p=l.pending;return p===null?t.next=t:(t.next=p.next,p.next=t),l.pending=t,t=Ji(e),Di(e,null,r),t}return Hs(e,l,t,r),Ji(e)}function ei(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,Jo(e,r)}}function rr(e,t){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var p=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var z={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?p=m=z:m=m.next=z,r=r.next}while(r!==null);m===null?p=m=t:m=m.next=t}else p=m=t;r={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var vr=!1;function Yi(){if(vr){var e=g;if(e!==null)throw e}}function Xr(e,t,r,l){vr=!1;var p=e.updateQueue;Mt=!1;var m=p.firstBaseUpdate,z=p.lastBaseUpdate,oe=p.shared.pending;if(oe!==null){p.shared.pending=null;var ze=oe,Je=ze.next;ze.next=null,z===null?m=Je:z.next=Je,z=ze;var ft=e.alternate;ft!==null&&(ft=ft.updateQueue,oe=ft.lastBaseUpdate,oe!==z&&(oe===null?ft.firstBaseUpdate=Je:oe.next=Je,ft.lastBaseUpdate=ze))}if(m!==null){var xt=p.baseState;z=0,ft=Je=ze=null,oe=m;do{var et=oe.lane&-536870913,ot=et!==oe.lane;if(ot?(Mi&et)===et:(l&et)===et){et!==0&&et===d&&(vr=!0),ft!==null&&(ft=ft.next={lane:0,tag:oe.tag,payload:oe.payload,callback:null,next:null});e:{var tn=e,qn=oe;et=t;var zr=r;switch(qn.tag){case 1:if(tn=qn.payload,typeof tn=="function"){xt=tn.call(zr,xt,et);break e}xt=tn;break e;case 3:tn.flags=tn.flags&-65537|128;case 0:if(tn=qn.payload,et=typeof tn=="function"?tn.call(zr,xt,et):tn,et==null)break e;xt=D({},xt,et);break e;case 2:Mt=!0}}et=oe.callback,et!==null&&(e.flags|=64,ot&&(e.flags|=8192),ot=p.callbacks,ot===null?p.callbacks=[et]:ot.push(et))}else ot={lane:et,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},ft===null?(Je=ft=ot,ze=xt):ft=ft.next=ot,z|=et;if(oe=oe.next,oe===null){if(oe=p.shared.pending,oe===null)break;ot=oe,oe=ot.next,ot.next=null,p.lastBaseUpdate=ot,p.shared.pending=null}}while(!0);ft===null&&(ze=xt),p.baseState=ze,p.firstBaseUpdate=Je,p.lastBaseUpdate=ft,m===null&&(p.shared.lanes=0),vu|=z,e.lanes=z,e.memoizedState=xt}}function cr(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Ar(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)cr(r[e],t)}var oi=F(null),Li=F(0);function gr(e,t){e=Xc,M(Li,e),M(oi,t),Xc=e|t.baseLanes}function Ri(){M(Li,Xc),M(oi,oi.current)}function io(){Xc=Li.current,A(oi),A(Li)}var Gi=F(null),mi=null;function Nr(e){var t=e.alternate;M(xi,xi.current&1),M(Gi,e),mi===null&&(t===null||oi.current!==null||t.memoizedState!==null)&&(mi=e)}function qi(e){M(xi,xi.current),M(Gi,e),mi===null&&(mi=e)}function ro(e){e.tag===22?(M(xi,xi.current),M(Gi,e),mi===null&&(mi=e)):Ur()}function Ur(){M(xi,xi.current),M(Gi,Gi.current)}function or(e){A(Gi),mi===e&&(mi=null),A(xi)}var xi=F(0);function po(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Sh(r)||Ch(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _r=0,yn=null,un=null,Ci=null,ua=!1,Ga=!1,Io=!1,Kr=0,ql=0,ll=null,ou=0;function er(){throw Error(s(321))}function ws(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!So(e[r],t[r]))return!1;return!0}function Ss(e,t,r,l,p,m){return _r=m,yn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,K.H=e===null||e.memoizedState===null?Gd:rd,Io=!1,m=r(l,p),Io=!1,Ga&&(m=Tl(t,r,l,p)),Cs(e),m}function Cs(e){K.H=Fc;var t=un!==null&&un.next!==null;if(_r=0,Ci=un=yn=null,ua=!1,ql=0,ll=null,t)throw Error(s(300));e===null||ko||(e=e.dependencies,e!==null&&Va(e)&&(ko=!0))}function Tl(e,t,r,l){yn=e;var p=0;do{if(Ga&&(ll=null),ql=0,Ga=!1,25<=p)throw Error(s(301));if(p+=1,Ci=un=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=od,m=t(r,l)}while(Ga);return m}function $f(){var e=K.H,t=e.useState()[0];return t=typeof t.then=="function"?ja(t):t,e=e.useState()[0],(un!==null?un.memoizedState:null)!==e&&(yn.flags|=1024),t}function Ru(){var e=Kr!==0;return Kr=0,e}function Mu(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function au(e){if(ua){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ua=!1}_r=0,Ci=un=yn=null,Ga=!1,ql=Kr=0,ll=null}function Uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?yn.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function Fr(){if(un===null){var e=yn.alternate;e=e!==null?e.memoizedState:null}else e=un.next;var t=Ci===null?yn.memoizedState:Ci.next;if(t!==null)Ci=t,un=e;else{if(e===null)throw yn.alternate===null?Error(s(467)):Error(s(310));un=e,e={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},Ci===null?yn.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ja(e){var t=ql;return ql+=1,ll===null&&(ll=[]),e=tt(ll,e,t),t=yn,(Ci===null?t.memoizedState:Ci.next)===null&&(t=t.alternate,K.H=t===null||t.memoizedState===null?Gd:rd),e}function wc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ja(e);if(e.$$typeof===ce)return xr(e)}throw Error(s(438,String(e)))}function tc(e){var t=null,r=yn.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var l=yn.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(p){return p.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=vc(),yn.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),l=0;l<e;l++)r[l]=$;return t.index++,r}function cl(e,t){return typeof t=="function"?t(e):t}function su(e){var t=Fr();return Sc(t,un,e)}function Sc(e,t,r){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var p=e.baseQueue,m=l.pending;if(m!==null){if(p!==null){var z=p.next;p.next=m.next,m.next=z}t.baseQueue=p=m,l.pending=null}if(m=e.baseState,p===null)e.memoizedState=m;else{t=p.next;var oe=z=null,ze=null,Je=t,ft=!1;do{var xt=Je.lane&-536870913;if(xt!==Je.lane?(Mi&xt)===xt:(_r&xt)===xt){var et=Je.revertLane;if(et===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),xt===d&&(ft=!0);else if((_r&et)===et){Je=Je.next,et===d&&(ft=!0);continue}else xt={lane:0,revertLane:Je.revertLane,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},ze===null?(oe=ze=xt,z=m):ze=ze.next=xt,yn.lanes|=et,vu|=et;xt=Je.action,Io&&r(m,xt),m=Je.hasEagerState?Je.eagerState:r(m,xt)}else et={lane:xt,revertLane:Je.revertLane,gesture:Je.gesture,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},ze===null?(oe=ze=et,z=m):ze=ze.next=et,yn.lanes|=xt,vu|=xt;Je=Je.next}while(Je!==null&&Je!==t);if(ze===null?z=m:ze.next=oe,!So(m,e.memoizedState)&&(ko=!0,ft&&(r=g,r!==null)))throw r;e.memoizedState=m,e.baseState=z,e.baseQueue=ze,l.lastRenderedState=m}return p===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function lu(e){var t=Fr(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var l=r.dispatch,p=r.pending,m=t.memoizedState;if(p!==null){r.pending=null;var z=p=p.next;do m=e(m,z.action),z=z.next;while(z!==p);So(m,t.memoizedState)||(ko=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),r.lastRenderedState=m}return[m,l]}function cu(e,t,r){var l=yn,p=Fr(),m=ki;if(m){if(r===void 0)throw Error(s(407));r=r()}else r=t();var z=!So((un||p).memoizedState,r);if(z&&(p.memoizedState=r,ko=!0),p=p.queue,uu(Ou.bind(null,l,p,e),[e]),p.getSnapshot!==t||z||Ci!==null&&Ci.memoizedState.tag&1){if(l.flags|=2048,rc(9,{destroy:void 0},Bu.bind(null,l,p,r,t),null),Hr===null)throw Error(s(349));m||(_r&127)!==0||jl(l,t,r)}return r}function jl(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=yn.updateQueue,t===null?(t=vc(),yn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Bu(e,t,r,l){t.value=r,t.getSnapshot=l,ff(t)&&nc(e)}function Ou(e,t,r){return r(function(){ff(t)&&nc(e)})}function ff(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!So(e,r)}catch{return!0}}function nc(e){var t=ms(e,2);t!==null&&fl(t,e,2)}function rs(e){var t=Uo();if(typeof e=="function"){var r=e;if(e=r(),Io){wn(!0);try{r()}finally{wn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:e},t}function ic(e,t,r,l){return e.baseState=r,Sc(e,un,typeof l=="function"?l:cl)}function Ic(e,t,r,l,p){if(fu(e))throw Error(s(485));if(e=t.action,e!==null){var m={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){m.listeners.push(z)}};K.T!==null?r(!0):m.isTransition=!1,l(m),r=t.pending,r===null?(m.next=t.pending=m,Cc(t,m)):(m.next=r.next,t.pending=r.next=m)}}function Cc(e,t){var r=t.action,l=t.payload,p=e.state;if(t.isTransition){var m=K.T,z={};K.T=z;try{var oe=r(p,l),ze=K.S;ze!==null&&ze(z,oe),Uc(e,t,oe)}catch(Je){Gs(e,t,Je)}finally{m!==null&&z.types!==null&&(m.types=z.types),K.T=m}}else try{m=r(p,l),Uc(e,t,m)}catch(Je){Gs(e,t,Je)}}function Uc(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Tc(e,t,l)},function(l){return Gs(e,t,l)}):Tc(e,t,r)}function Tc(e,t,r){t.status="fulfilled",t.value=r,Hl(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,Cc(e,r)))}function Gs(e,t,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=r,Hl(t),t=t.next;while(t!==l)}e.action=null}function Hl(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Vl(e,t){return t}function os(e,t){if(ki){var r=Hr.formState;if(r!==null){e:{var l=yn;if(ki){if(hr){t:{for(var p=hr,m=kr;p.nodeType!==8;){if(!m){p=null;break t}if(p=$l(p.nextSibling),p===null){p=null;break t}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){hr=$l(p.nextSibling),l=p.data==="F!";break e}}Cl(l)}l=!1}l&&(t=r[0])}}return r=Uo(),r.memoizedState=r.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:t},r.queue=l,r=td.bind(null,yn,l),l.dispatch=r,l=rs(!1),m=nd.bind(null,yn,!1,l.queue),l=Uo(),p={state:t,dispatch:null,action:e,pending:null},l.queue=p,r=Ic.bind(null,yn,p,m,r),p.dispatch=r,l.memoizedState=e,[t,r,!1]}function kl(e){var t=Fr();return $s(t,un,e)}function $s(e,t,r){if(t=Sc(e,t,Vl)[0],e=su(cl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=ja(t)}catch(z){throw z===Re?xe:z}else l=t;t=Fr();var p=t.queue,m=p.dispatch;return r!==t.memoizedState&&(yn.flags|=2048,rc(9,{destroy:void 0},fa.bind(null,p,r),null)),[l,m,e]}function fa(e,t){e.action=t}function jc(e){var t=Fr(),r=un;if(r!==null)return $s(t,r,e);Fr(),t=t.memoizedState,r=Fr();var l=r.queue.dispatch;return r.memoizedState=e,[t,l,!1]}function rc(e,t,r,l){return e={tag:e,create:r,deps:l,inst:t,next:null},t=yn.updateQueue,t===null&&(t=vc(),yn.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,t.lastEffect=e),e}function df(){return Fr().memoizedState}function Zr(e,t,r,l){var p=Uo();yn.flags|=e,p.memoizedState=rc(1|t,{destroy:void 0},r,l===void 0?null:l)}function kc(e,t,r,l){var p=Fr();l=l===void 0?null:l;var m=p.memoizedState.inst;un!==null&&l!==null&&ws(l,un.memoizedState.deps)?p.memoizedState=rc(t,m,r,l):(yn.flags|=e,p.memoizedState=rc(1|t,m,r,l))}function pf(e,t){Zr(8390656,8,e,t)}function uu(e,t){kc(2048,8,e,t)}function hf(e){yn.flags|=4;var t=yn.updateQueue;if(t===null)t=vc(),yn.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function Iu(e){var t=Fr().memoizedState;return hf({ref:t,nextImpl:e}),function(){if((ai&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function qd(e,t){return kc(4,2,e,t)}function gf(e,t){return kc(4,4,e,t)}function yf(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hd(e,t,r){r=r!=null?r.concat([e]):null,kc(4,4,yf.bind(null,t,e),r)}function Xf(){}function Al(e,t){var r=Fr();t=t===void 0?null:t;var l=r.memoizedState;return t!==null&&ws(t,l[1])?l[0]:(r.memoizedState=[e,t],e)}function Kf(e,t){var r=Fr();t=t===void 0?null:t;var l=r.memoizedState;if(t!==null&&ws(t,l[1]))return l[0];if(l=e(),Io){wn(!0);try{e()}finally{wn(!1)}}return r.memoizedState=[l,t],l}function Ac(e,t,r){return r===void 0||(_r&1073741824)!==0&&(Mi&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=I0(),yn.lanes|=e,vu|=e,r)}function Zf(e,t,r,l){return So(r,t)?r:oi.current!==null?(e=Ac(e,r,l),So(e,t)||(ko=!0),e):(_r&42)===0||(_r&1073741824)!==0&&(Mi&261930)===0?(ko=!0,e.memoizedState=r):(e=I0(),yn.lanes|=e,vu|=e,t)}function oc(e,t,r,l,p){var m=te.p;te.p=m!==0&&8>m?m:8;var z=K.T,oe={};K.T=oe,nd(e,!1,t,r);try{var ze=p(),Je=K.S;if(Je!==null&&Je(oe,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var ft=G(ze,l);ac(e,t,ft,Dl(e))}else ac(e,t,l,Dl(e))}catch(xt){ac(e,t,{then:function(){},status:"rejected",reason:xt},Dl())}finally{te.p=m,z!==null&&oe.types!==null&&(z.types=oe.types),K.T=z}}function Jf(){}function mf(e,t,r,l){if(e.tag!==5)throw Error(s(476));var p=Qf(e).queue;oc(e,p,t,ge,r===null?Jf:function(){return Vd(e),r(l)})}function Qf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:ge},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Vd(e){var t=Qf(e);t.next===null&&(t=e.alternate.memoizedState),ac(e,t.next.queue,{},Dl())}function ed(){return xr(jd)}function Wd(){return Fr().memoizedState}function Uu(){return Fr().memoizedState}function Yd(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=Dl();e=gn(r);var l=kn(t,e,r);l!==null&&(fl(l,t,r),ei(l,t,r)),t={cache:$o()},e.payload=t;return}t=t.return}}function Zp(e,t,r){var l=Dl();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fu(e)?id(t,r):(r=Mc(e,t,r,l),r!==null&&(fl(r,e,l),xf(r,t,l)))}function td(e,t,r){var l=Dl();ac(e,t,r,l)}function ac(e,t,r,l){var p={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(fu(e))id(t,p);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var z=t.lastRenderedState,oe=m(z,r);if(p.hasEagerState=!0,p.eagerState=oe,So(oe,z))return Hs(e,t,p,0),Hr===null&&Rc(),!1}catch{}finally{}if(r=Mc(e,t,p,l),r!==null)return fl(r,e,l),xf(r,t,l),!0}return!1}function nd(e,t,r,l){if(l={lane:2,revertLane:uh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fu(e)){if(t)throw Error(s(479))}else t=Mc(e,r,l,2),t!==null&&fl(t,e,2)}function fu(e){var t=e.alternate;return e===yn||t!==null&&t===yn}function id(e,t){Ga=ua=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function xf(e,t,r){if((r&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,r|=l,t.lanes=r,Jo(e,r)}}var Fc={readContext:xr,use:wc,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useLayoutEffect:er,useInsertionEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useSyncExternalStore:er,useId:er,useHostTransitionStatus:er,useFormState:er,useActionState:er,useOptimistic:er,useMemoCache:er,useCacheRefresh:er};Fc.useEffectEvent=er;var Gd={readContext:xr,use:wc,useCallback:function(e,t){return Uo().memoizedState=[e,t===void 0?null:t],e},useContext:xr,useEffect:pf,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,Zr(4194308,4,yf.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zr(4194308,4,e,t)},useInsertionEffect:function(e,t){Zr(4,2,e,t)},useMemo:function(e,t){var r=Uo();t=t===void 0?null:t;var l=e();if(Io){wn(!0);try{e()}finally{wn(!1)}}return r.memoizedState=[l,t],l},useReducer:function(e,t,r){var l=Uo();if(r!==void 0){var p=r(t);if(Io){wn(!0);try{r(t)}finally{wn(!1)}}}else p=t;return l.memoizedState=l.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},l.queue=e,e=e.dispatch=Zp.bind(null,yn,e),[l.memoizedState,e]},useRef:function(e){var t=Uo();return e={current:e},t.memoizedState=e},useState:function(e){e=rs(e);var t=e.queue,r=td.bind(null,yn,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Xf,useDeferredValue:function(e,t){var r=Uo();return Ac(r,e,t)},useTransition:function(){var e=rs(!1);return e=oc.bind(null,yn,e.queue,!0,!1),Uo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var l=yn,p=Uo();if(ki){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),Hr===null)throw Error(s(349));(Mi&127)!==0||jl(l,t,r)}p.memoizedState=r;var m={value:r,getSnapshot:t};return p.queue=m,pf(Ou.bind(null,l,m,e),[e]),l.flags|=2048,rc(9,{destroy:void 0},Bu.bind(null,l,m,r,t),null),r},useId:function(){var e=Uo(),t=Hr.identifierPrefix;if(ki){var r=Mo,l=is;r=(l&~(1<<32-at(l)-1)).toString(32)+r,t="_"+t+"R_"+r,r=Kr++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=ou++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ed,useFormState:os,useActionState:os,useOptimistic:function(e){var t=Uo();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=nd.bind(null,yn,!0,r),r.dispatch=t,[e,t]},useMemoCache:tc,useCacheRefresh:function(){return Uo().memoizedState=Yd.bind(null,yn)},useEffectEvent:function(e){var t=Uo(),r={impl:e};return t.memoizedState=r,function(){if((ai&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},rd={readContext:xr,use:wc,useCallback:Al,useContext:xr,useEffect:uu,useImperativeHandle:Hd,useInsertionEffect:qd,useLayoutEffect:gf,useMemo:Kf,useReducer:su,useRef:df,useState:function(){return su(cl)},useDebugValue:Xf,useDeferredValue:function(e,t){var r=Fr();return Zf(r,un.memoizedState,e,t)},useTransition:function(){var e=su(cl)[0],t=Fr().memoizedState;return[typeof e=="boolean"?e:ja(e),t]},useSyncExternalStore:cu,useId:Wd,useHostTransitionStatus:ed,useFormState:kl,useActionState:kl,useOptimistic:function(e,t){var r=Fr();return ic(r,un,e,t)},useMemoCache:tc,useCacheRefresh:Uu};rd.useEffectEvent=Iu;var od={readContext:xr,use:wc,useCallback:Al,useContext:xr,useEffect:uu,useImperativeHandle:Hd,useInsertionEffect:qd,useLayoutEffect:gf,useMemo:Kf,useReducer:lu,useRef:df,useState:function(){return lu(cl)},useDebugValue:Xf,useDeferredValue:function(e,t){var r=Fr();return un===null?Ac(r,e,t):Zf(r,un.memoizedState,e,t)},useTransition:function(){var e=lu(cl)[0],t=Fr().memoizedState;return[typeof e=="boolean"?e:ja(e),t]},useSyncExternalStore:cu,useId:Wd,useHostTransitionStatus:ed,useFormState:jc,useActionState:jc,useOptimistic:function(e,t){var r=Fr();return un!==null?ic(r,un,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:tc,useCacheRefresh:Uu};od.useEffectEvent=Iu;function qc(e,t,r,l){t=e.memoizedState,r=r(l,t),r=r==null?t:D({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Fu={enqueueSetState:function(e,t,r){e=e._reactInternals;var l=Dl(),p=gn(l);p.payload=t,r!=null&&(p.callback=r),t=kn(e,p,l),t!==null&&(fl(t,e,l),ei(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var l=Dl(),p=gn(l);p.tag=1,p.payload=t,r!=null&&(p.callback=r),t=kn(e,p,l),t!==null&&(fl(t,e,l),ei(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Dl(),l=gn(r);l.tag=2,t!=null&&(l.callback=t),t=kn(e,l,r),t!==null&&(fl(t,e,r),ei(t,e,r))}};function Nc(e,t,r,l,p,m,z){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,m,z):t.prototype&&t.prototype.isPureReactComponent?!ml(r,l)||!ml(p,m):!0}function qu(e,t,r,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,l),t.state!==e&&Fu.enqueueReplaceState(t,t.state,null)}function as(e,t){var r=t;if("ref"in t){r={};for(var l in t)l!=="ref"&&(r[l]=t[l])}if(e=e.defaultProps){r===t&&(r=D({},r));for(var p in e)r[p]===void 0&&(r[p]=e[p])}return r}function du(e){Si(e)}function bf(e){console.error(e)}function vf(e){Si(e)}function pu(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function $a(e,t,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function wf(e,t,r){return r=gn(r),r.tag=3,r.payload={element:null},r.callback=function(){pu(e,t)},r}function $d(e){return e=gn(e),e.tag=3,e}function ad(e,t,r,l){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var m=l.value;e.payload=function(){return p(m)},e.callback=function(){$a(t,r,l)}}var z=r.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(e.callback=function(){$a(t,r,l),typeof p!="function"&&(wu===null?wu=new Set([this]):wu.add(this));var oe=l.stack;this.componentDidCatch(l.value,{componentStack:oe!==null?oe:""})})}function Jp(e,t,r,l,p){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=r.alternate,t!==null&&$r(t,r,p,!0),r=Gi.current,r!==null){switch(r.tag){case 31:case 13:return mi===null?rp():r.alternate===null&&qo===0&&(qo=3),r.flags&=-257,r.flags|=65536,r.lanes=p,l===Oe?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([l]):t.add(l),sh(e,l,p)),!1;case 22:return r.flags|=65536,l===Oe?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([l]):r.add(l)),sh(e,l,p)),!1}throw Error(s(435,r.tag))}return sh(e,l,p),rp(),!1}if(ki)return t=Gi.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=p,l!==bs&&(e=Error(s(422),{cause:l}),Br(Sa(e,r)))):(l!==bs&&(t=Error(s(423),{cause:l}),Br(Sa(t,r))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,l=Sa(l,r),p=wf(e.stateNode,l,p),rr(e,p),qo!==4&&(qo=2)),!1;var m=Error(s(520),{cause:l});if(m=Sa(m,r),md===null?md=[m]:md.push(m),qo!==4&&(qo=2),t===null)return!0;l=Sa(l,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=p&-p,r.lanes|=e,e=wf(r.stateNode,l,e),rr(r,e),!1;case 1:if(t=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(wu===null||!wu.has(m))))return r.flags|=65536,p&=-p,r.lanes|=p,p=$d(p),ad(p,e,r,l),rr(r,p),!1}r=r.return}while(r!==null);return!1}var Sf=Error(s(461)),ko=!1;function Fo(e,t,r,l){t.child=e===null?Fn(t,null,r,l):Qi(t,e.child,r,l)}function Wl(e,t,r,l,p){r=r.render;var m=t.ref;if("ref"in l){var z={};for(var oe in l)oe!=="ref"&&(z[oe]=l[oe])}else z=l;return jo(t),l=Ss(e,t,r,z,m,p),oe=Ru(),e!==null&&!ko?(Mu(e,t,p),Yl(e,t,p)):(ki&&oe&&Fl(t),t.flags|=1,Fo(e,t,l,p),t.child)}function sd(e,t,r,l,p){if(e===null){var m=r.type;return typeof m=="function"&&!xc(m)&&m.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=m,Nl(e,t,m,l,p)):(e=al(r.type,null,l,t,t.mode,p),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!Yu(e,p)){var z=m.memoizedProps;if(r=r.compare,r=r!==null?r:ml,r(z,l)&&e.ref===t.ref)return Yl(e,t,p)}return t.flags|=1,e=wa(m,l),e.ref=t.ref,e.return=t,t.child=e}function Nl(e,t,r,l,p){if(e!==null){var m=e.memoizedProps;if(ml(m,l)&&e.ref===t.ref)if(ko=!1,t.pendingProps=l=m,Yu(e,p))(e.flags&131072)!==0&&(ko=!0);else return t.lanes=e.lanes,Yl(e,t,p)}return Hu(e,t,r,l,p)}function _l(e,t,r,l){var p=l.children,m=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,e!==null){for(l=t.child=e.child,p=0;l!==null;)p=p|l.lanes|l.childLanes,l=l.sibling;l=p&~m}else l=0,t.child=null;return ld(e,t,m,r,l)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&fe(t,m!==null?m.cachePool:null),m!==null?gr(t,m):Ri(),ro(t);else return l=t.lanes=536870912,ld(e,t,m!==null?m.baseLanes|r:r,r,l)}else m!==null?(fe(t,m.cachePool),gr(t,m),Ur(),t.memoizedState=null):(e!==null&&fe(t,null),Ri(),Ur());return Fo(e,t,p,r),t.child}function hu(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ld(e,t,r,l,p){var m=le();return m=m===null?null:{parent:Ei._currentValue,pool:m},t.memoizedState={baseLanes:r,cachePool:m},e!==null&&fe(t,null),Ri(),ro(t),e!==null&&$r(e,t,l,!0),t.childLanes=p,null}function ka(e,t){return t=_c({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Hc(e,t,r){return Qi(t,e.child,null,r),e=ka(t,t.pendingProps),e.flags|=2,or(t),t.memoizedState=null,e}function Vc(e,t,r){var l=t.pendingProps,p=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ki){if(l.mode==="hidden")return e=ka(t,l),t.lanes=536870912,hu(null,e);if(qi(t),(e=hr)?(e=wg(e,kr),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ws!==null?{id:is,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},r=Ul(e),r.return=t,t.child=r,Bo=t,hr=null)):e=null,e===null)throw Cl(t);return t.lanes=536870912,null}return ka(t,l)}var m=e.memoizedState;if(m!==null){var z=m.dehydrated;if(qi(t),p)if(t.flags&256)t.flags&=-257,t=Hc(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(ko||$r(e,t,r,!1),p=(r&e.childLanes)!==0,ko||p){if(l=Hr,l!==null&&(z=bt(l,r),z!==0&&z!==m.retryLane))throw m.retryLane=z,ms(e,z),fl(l,e,z),Sf;rp(),t=Hc(e,t,r)}else e=m.treeContext,hr=$l(z.nextSibling),Bo=t,ki=!0,Ca=null,kr=!1,e!==null&&uf(t,e),t=ka(t,l),t.flags|=4096;return t}return e=wa(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Wc(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Hu(e,t,r,l,p){return jo(t),r=Ss(e,t,r,l,void 0,p),l=Ru(),e!==null&&!ko?(Mu(e,t,p),Yl(e,t,p)):(ki&&l&&Fl(t),t.flags|=1,Fo(e,t,r,p),t.child)}function gu(e,t,r,l,p,m){return jo(t),t.updateQueue=null,r=Tl(t,l,r,p),Cs(e),l=Ru(),e!==null&&!ko?(Mu(e,t,m),Yl(e,t,m)):(ki&&l&&Fl(t),t.flags|=1,Fo(e,t,r,m),t.child)}function cd(e,t,r,l,p){if(jo(t),t.stateNode===null){var m=Co,z=r.contextType;typeof z=="object"&&z!==null&&(m=xr(z)),m=new r(l,m),t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Fu,t.stateNode=m,m._reactInternals=t,m=t.stateNode,m.props=l,m.state=t.memoizedState,m.refs={},Dt(t),z=r.contextType,m.context=typeof z=="object"&&z!==null?xr(z):Co,m.state=t.memoizedState,z=r.getDerivedStateFromProps,typeof z=="function"&&(qc(t,r,z,l),m.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(z=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),z!==m.state&&Fu.enqueueReplaceState(m,m.state,null),Xr(t,l,m,p),Yi(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){m=t.stateNode;var oe=t.memoizedProps,ze=as(r,oe);m.props=ze;var Je=m.context,ft=r.contextType;z=Co,typeof ft=="object"&&ft!==null&&(z=xr(ft));var xt=r.getDerivedStateFromProps;ft=typeof xt=="function"||typeof m.getSnapshotBeforeUpdate=="function",oe=t.pendingProps!==oe,ft||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(oe||Je!==z)&&qu(t,m,l,z),Mt=!1;var et=t.memoizedState;m.state=et,Xr(t,l,m,p),Yi(),Je=t.memoizedState,oe||et!==Je||Mt?(typeof xt=="function"&&(qc(t,r,xt,l),Je=t.memoizedState),(ze=Mt||Nc(t,r,ze,l,et,Je,z))?(ft||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=Je),m.props=l,m.state=Je,m.context=z,l=ze):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{m=t.stateNode,br(e,t),z=t.memoizedProps,ft=as(r,z),m.props=ft,xt=t.pendingProps,et=m.context,Je=r.contextType,ze=Co,typeof Je=="object"&&Je!==null&&(ze=xr(Je)),oe=r.getDerivedStateFromProps,(Je=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(z!==xt||et!==ze)&&qu(t,m,l,ze),Mt=!1,et=t.memoizedState,m.state=et,Xr(t,l,m,p),Yi();var ot=t.memoizedState;z!==xt||et!==ot||Mt||e!==null&&e.dependencies!==null&&Va(e.dependencies)?(typeof oe=="function"&&(qc(t,r,oe,l),ot=t.memoizedState),(ft=Mt||Nc(t,r,ft,l,et,ot,ze)||e!==null&&e.dependencies!==null&&Va(e.dependencies))?(Je||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ot,ze),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ot,ze)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||z===e.memoizedProps&&et===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||z===e.memoizedProps&&et===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ot),m.props=l,m.state=ot,m.context=ze,l=ft):(typeof m.componentDidUpdate!="function"||z===e.memoizedProps&&et===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||z===e.memoizedProps&&et===e.memoizedState||(t.flags|=1024),l=!1)}return m=l,Wc(e,t),l=(t.flags&128)!==0,m||l?(m=t.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:m.render(),t.flags|=1,e!==null&&l?(t.child=Qi(t,e.child,null,p),t.child=Qi(t,null,r,p)):Fo(e,t,r,p),t.memoizedState=m.state,e=t.child):e=Yl(e,t,p),e}function Xd(e,t,r,l){return qa(),t.flags|=256,Fo(e,t,r,l),t.child}var yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mu(e){return{baseLanes:e,cachePool:ve()}}function ud(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=Pl),e}function Kd(e,t,r){var l=t.pendingProps,p=!1,m=(t.flags&128)!==0,z;if((z=m)||(z=e!==null&&e.memoizedState===null?!1:(xi.current&2)!==0),z&&(p=!0,t.flags&=-129),z=(t.flags&32)!==0,t.flags&=-33,e===null){if(ki){if(p?Nr(t):Ur(),(e=hr)?(e=wg(e,kr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ws!==null?{id:is,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},r=Ul(e),r.return=t,t.child=r,Bo=t,hr=null)):e=null,e===null)throw Cl(t);return Ch(e)?t.lanes=32:t.lanes=536870912,null}var oe=l.children;return l=l.fallback,p?(Ur(),p=t.mode,oe=_c({mode:"hidden",children:oe},p),l=bl(l,p,r,null),oe.return=t,l.return=t,oe.sibling=l,t.child=oe,l=t.child,l.memoizedState=mu(r),l.childLanes=ud(e,z,r),t.memoizedState=yu,hu(null,l)):(Nr(t),Vu(t,oe))}var ze=e.memoizedState;if(ze!==null&&(oe=ze.dehydrated,oe!==null)){if(m)t.flags&256?(Nr(t),t.flags&=-257,t=fd(e,t,r)):t.memoizedState!==null?(Ur(),t.child=e.child,t.flags|=128,t=null):(Ur(),oe=l.fallback,p=t.mode,l=_c({mode:"visible",children:l.children},p),oe=bl(oe,p,r,null),oe.flags|=2,l.return=t,oe.return=t,l.sibling=oe,t.child=l,Qi(t,e.child,null,r),l=t.child,l.memoizedState=mu(r),l.childLanes=ud(e,z,r),t.memoizedState=yu,t=hu(null,l));else if(Nr(t),Ch(oe)){if(z=oe.nextSibling&&oe.nextSibling.dataset,z)var Je=z.dgst;z=Je,l=Error(s(419)),l.stack="",l.digest=z,Br({value:l,source:null,stack:null}),t=fd(e,t,r)}else if(ko||$r(e,t,r,!1),z=(r&e.childLanes)!==0,ko||z){if(z=Hr,z!==null&&(l=bt(z,r),l!==0&&l!==ze.retryLane))throw ze.retryLane=l,ms(e,l),fl(z,e,l),Sf;Sh(oe)||rp(),t=fd(e,t,r)}else Sh(oe)?(t.flags|=192,t.child=e.child,t=null):(e=ze.treeContext,hr=$l(oe.nextSibling),Bo=t,ki=!0,Ca=null,kr=!1,e!==null&&uf(t,e),t=Vu(t,l.children),t.flags|=4096);return t}return p?(Ur(),oe=l.fallback,p=t.mode,ze=e.child,Je=ze.sibling,l=wa(ze,{mode:"hidden",children:l.children}),l.subtreeFlags=ze.subtreeFlags&65011712,Je!==null?oe=wa(Je,oe):(oe=bl(oe,p,r,null),oe.flags|=2),oe.return=t,l.return=t,l.sibling=oe,t.child=l,hu(null,l),l=t.child,oe=e.child.memoizedState,oe===null?oe=mu(r):(p=oe.cachePool,p!==null?(ze=Ei._currentValue,p=p.parent!==ze?{parent:ze,pool:ze}:p):p=ve(),oe={baseLanes:oe.baseLanes|r,cachePool:p}),l.memoizedState=oe,l.childLanes=ud(e,z,r),t.memoizedState=yu,hu(e.child,l)):(Nr(t),r=e.child,e=r.sibling,r=wa(r,{mode:"visible",children:l.children}),r.return=t,r.sibling=null,e!==null&&(z=t.deletions,z===null?(t.deletions=[e],t.flags|=16):z.push(e)),t.child=r,t.memoizedState=null,r)}function Vu(e,t){return t=_c({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function _c(e,t){return e=Wo(22,e,null,t),e.lanes=0,e}function fd(e,t,r){return Qi(t,e.child,null,r),e=Vu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dd(e,t,r){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),fo(e.return,t,r)}function Wu(e,t,r,l,p,m){var z=e.memoizedState;z===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:p,treeForkCount:m}:(z.isBackwards=t,z.rendering=null,z.renderingStartTime=0,z.last=l,z.tail=r,z.tailMode=p,z.treeForkCount=m)}function Zd(e,t,r){var l=t.pendingProps,p=l.revealOrder,m=l.tail;l=l.children;var z=xi.current,oe=(z&2)!==0;if(oe?(z=z&1|2,t.flags|=128):z&=1,M(xi,z),Fo(e,t,l,r),l=ki?bc:0,!oe&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dd(e,r,t);else if(e.tag===19)dd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(r=t.child,p=null;r!==null;)e=r.alternate,e!==null&&po(e)===null&&(p=r),r=r.sibling;r=p,r===null?(p=t.child,t.child=null):(p=r.sibling,r.sibling=null),Wu(t,!1,p,r,m,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=t.child,t.child=null;p!==null;){if(e=p.alternate,e!==null&&po(e)===null){t.child=p;break}e=p.sibling,p.sibling=r,r=p,p=e}Wu(t,!0,r,null,m,l);break;case"together":Wu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Yl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vu|=t.lanes,(r&t.childLanes)===0)if(e!==null){if($r(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=wa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Yu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Va(e)))}function pd(e,t,r){switch(t.tag){case 3:Ge(t,t.stateNode.containerInfo),Ir(t,Ei,e.memoizedState.cache),qa();break;case 27:case 5:nt(t);break;case 4:Ge(t,t.stateNode.containerInfo);break;case 10:Ir(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,qi(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Nr(t),t.flags|=128,null):(r&t.child.childLanes)!==0?Kd(e,t,r):(Nr(t),e=Yl(e,t,r),e!==null?e.sibling:null);Nr(t);break;case 19:var p=(e.flags&128)!==0;if(l=(r&t.childLanes)!==0,l||($r(e,t,r,!1),l=(r&t.childLanes)!==0),p){if(l)return Zd(e,t,r);t.flags|=128}if(p=t.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),M(xi,xi.current),l)break;return null;case 22:return t.lanes=0,_l(e,t,r,t.pendingProps);case 24:Ir(t,Ei,e.memoizedState.cache)}return Yl(e,t,r)}function Jd(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)ko=!0;else{if(!Yu(e,r)&&(t.flags&128)===0)return ko=!1,pd(e,t,r);ko=(e.flags&131072)!==0}else ko=!1,ki&&(t.flags&1048576)!==0&&Oc(t,bc,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=qe(t.elementType),t.type=e,typeof e=="function")xc(e)?(l=as(e,l),t.tag=1,t=cd(null,t,e,l,r)):(t.tag=0,t=Hu(null,t,e,l,r));else{if(e!=null){var p=e.$$typeof;if(p===q){t.tag=11,t=Wl(null,t,e,l,r);break e}else if(p===_){t.tag=14,t=sd(null,t,e,l,r);break e}}throw t=re(e)||e,Error(s(306,t,""))}}return t;case 0:return Hu(e,t,t.type,t.pendingProps,r);case 1:return l=t.type,p=as(l,t.pendingProps),cd(e,t,l,p,r);case 3:e:{if(Ge(t,t.stateNode.containerInfo),e===null)throw Error(s(387));l=t.pendingProps;var m=t.memoizedState;p=m.element,br(e,t),Xr(t,l,null,r);var z=t.memoizedState;if(l=z.cache,Ir(t,Ei,l),l!==m.cache&&Go(t,[Ei],r,!0),Yi(),l=z.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:z.cache},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){t=Xd(e,t,l,r);break e}else if(l!==p){p=Sa(Error(s(424)),t),Br(p),t=Xd(e,t,l,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(hr=$l(e.firstChild),Bo=t,ki=!0,Ca=null,kr=!0,r=Fn(t,null,l,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(qa(),l===p){t=Yl(e,t,r);break e}Fo(e,t,l,r)}t=t.child}return t;case 26:return Wc(e,t),e===null?(r=Ag(t.type,null,t.pendingProps,null))?t.memoizedState=r:ki||(r=t.type,e=t.pendingProps,l=fp(Ae.current).createElement(r),l[vi]=t,l[yi]=e,ss(l,r,e),Ln(l),t.stateNode=l):t.memoizedState=Ag(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return nt(t),e===null&&ki&&(l=t.stateNode=Tg(t.type,t.pendingProps,Ae.current),Bo=t,kr=!0,p=hr,ju(t.type)?(Th=p,hr=$l(l.firstChild)):hr=p),Fo(e,t,t.pendingProps.children,r),Wc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ki&&((p=l=hr)&&(l=K2(l,t.type,t.pendingProps,kr),l!==null?(t.stateNode=l,Bo=t,hr=$l(l.firstChild),kr=!1,p=!0):p=!1),p||Cl(t)),nt(t),p=t.type,m=t.pendingProps,z=e!==null?e.memoizedProps:null,l=m.children,bh(p,m)?l=null:z!==null&&bh(p,z)&&(t.flags|=32),t.memoizedState!==null&&(p=Ss(e,t,$f,null,null,r),jd._currentValue=p),Wc(e,t),Fo(e,t,l,r),t.child;case 6:return e===null&&ki&&((e=r=hr)&&(r=Z2(r,t.pendingProps,kr),r!==null?(t.stateNode=r,Bo=t,hr=null,e=!0):e=!1),e||Cl(t)),null;case 13:return Kd(e,t,r);case 4:return Ge(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Qi(t,null,l,r):Fo(e,t,l,r),t.child;case 11:return Wl(e,t,t.type,t.pendingProps,r);case 7:return Fo(e,t,t.pendingProps,r),t.child;case 8:return Fo(e,t,t.pendingProps.children,r),t.child;case 12:return Fo(e,t,t.pendingProps.children,r),t.child;case 10:return l=t.pendingProps,Ir(t,t.type,l.value),Fo(e,t,l.children,r),t.child;case 9:return p=t.type._context,l=t.pendingProps.children,jo(t),p=xr(p),l=l(p),t.flags|=1,Fo(e,t,l,r),t.child;case 14:return sd(e,t,t.type,t.pendingProps,r);case 15:return Nl(e,t,t.type,t.pendingProps,r);case 19:return Zd(e,t,r);case 31:return Vc(e,t,r);case 22:return _l(e,t,r,t.pendingProps);case 24:return jo(t),l=xr(Ei),e===null?(p=le(),p===null&&(p=Hr,m=$o(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=r),p=m),t.memoizedState={parent:l,cache:p},Dt(t),Ir(t,Ei,p)):((e.lanes&r)!==0&&(br(e,t),Xr(t,null,null,r),Yi()),p=e.memoizedState,m=t.memoizedState,p.parent!==l?(p={parent:l,cache:l},t.memoizedState=p,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=p),Ir(t,Ei,l)):(l=m.cache,Ir(t,Ei,l),l!==p.cache&&Go(t,[Ei],r,!0))),Fo(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function sc(e){e.flags|=4}function lc(e,t,r,l,p){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(H0())e.flags|=8192;else throw st=Oe,Ve}else e.flags&=-16777217}function Yc(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pg(t))if(H0())e.flags|=8192;else throw st=Oe,Ve}function Gc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?_o():536870912,e.lanes|=t,jf|=t)}function Gu(e,t){if(!ki)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(t)for(var p=e.child;p!==null;)r|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)r|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=l,e.childLanes=r,t}function hd(e,t,r){var l=t.pendingProps;switch(Ys(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qr(t),null;case 1:return qr(t),null;case 3:return r=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Gr(Ei),Pe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fi(t)?sc(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Yo())),qr(t),null;case 26:var p=t.type,m=t.memoizedState;return e===null?(sc(t),m!==null?(qr(t),Yc(t,m)):(qr(t),lc(t,p,null,l,r))):m?m!==e.memoizedState?(sc(t),qr(t),Yc(t,m)):(qr(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&sc(t),qr(t),lc(t,p,e,l,r)),null;case 27:if(Ke(t),r=Ae.current,p=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&sc(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return qr(t),null}e=B.current,Fi(t)?ru(t):(e=Tg(p,l,r),t.stateNode=e,sc(t))}return qr(t),null;case 5:if(Ke(t),p=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&sc(t);else{if(!l){if(t.stateNode===null)throw Error(s(166));return qr(t),null}if(m=B.current,Fi(t))ru(t);else{var z=fp(Ae.current);switch(m){case 1:m=z.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=z.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=z.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=z.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=z.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?z.createElement("select",{is:l.is}):z.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?z.createElement(p,{is:l.is}):z.createElement(p)}}m[vi]=t,m[yi]=l;e:for(z=t.child;z!==null;){if(z.tag===5||z.tag===6)m.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===t)break e;for(;z.sibling===null;){if(z.return===null||z.return===t)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}t.stateNode=m;e:switch(ss(m,p,l),p){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&sc(t)}}return qr(t),lc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&sc(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(s(166));if(e=Ae.current,Fi(t)){if(e=t.stateNode,r=t.memoizedProps,l=null,p=Bo,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}e[vi]=t,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||pg(e.nodeValue,r)),e||Cl(t,!0)}else e=fp(e).createTextNode(l),e[vi]=t,t.stateNode=e}return qr(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(l=Fi(t),r!==null){if(e===null){if(!l)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[vi]=t}else qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qr(t),e=!1}else r=Yo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(or(t),t):(or(t),null);if((t.flags&128)!==0)throw Error(s(558))}return qr(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=Fi(t),l!==null&&l.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[vi]=t}else qa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qr(t),p=!1}else p=Yo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return t.flags&256?(or(t),t):(or(t),null)}return or(t),(t.flags&128)!==0?(t.lanes=r,t):(r=l!==null,e=e!==null&&e.memoizedState!==null,r&&(l=t.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==p&&(l.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),Gc(t,t.updateQueue),qr(t),null);case 4:return Pe(),e===null&&hh(t.stateNode.containerInfo),qr(t),null;case 10:return Gr(t.type),qr(t),null;case 19:if(A(xi),l=t.memoizedState,l===null)return qr(t),null;if(p=(t.flags&128)!==0,m=l.rendering,m===null)if(p)Gu(l,!1);else{if(qo!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=po(e),m!==null){for(t.flags|=128,Gu(l,!1),e=m.updateQueue,t.updateQueue=e,Gc(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)ec(r,e),r=r.sibling;return M(xi,xi.current&1|2),ki&&To(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Wn()>tp&&(t.flags|=128,p=!0,Gu(l,!1),t.lanes=4194304)}else{if(!p)if(e=po(m),e!==null){if(t.flags|=128,p=!0,e=e.updateQueue,t.updateQueue=e,Gc(t,e),Gu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!ki)return qr(t),null}else 2*Wn()-l.renderingStartTime>tp&&r!==536870912&&(t.flags|=128,p=!0,Gu(l,!1),t.lanes=4194304);l.isBackwards?(m.sibling=t.child,t.child=m):(e=l.last,e!==null?e.sibling=m:t.child=m,l.last=m)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Wn(),e.sibling=null,r=xi.current,M(xi,p?r&1|2:r&1),ki&&To(t,l.treeForkCount),e):(qr(t),null);case 22:case 23:return or(t),io(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(r&536870912)!==0&&(t.flags&128)===0&&(qr(t),t.subtreeFlags&6&&(t.flags|=8192)):qr(t),r=t.updateQueue,r!==null&&Gc(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==r&&(t.flags|=2048),e!==null&&A(ee),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Gr(Ei),qr(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function gd(e,t){switch(Ys(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gr(Ei),Pe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ke(t),null;case 31:if(t.memoizedState!==null){if(or(t),t.alternate===null)throw Error(s(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(or(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(xi),null;case 4:return Pe(),null;case 10:return Gr(t.type),null;case 22:case 23:return or(t),io(),e!==null&&A(ee),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Gr(Ei),null;case 25:return null;default:return null}}function yd(e,t){switch(Ys(t),t.tag){case 3:Gr(Ei),Pe();break;case 26:case 27:case 5:Ke(t);break;case 4:Pe();break;case 31:t.memoizedState!==null&&or(t);break;case 13:or(t);break;case 19:A(xi);break;case 10:Gr(t.type);break;case 22:case 23:or(t),io(),e!==null&&A(ee);break;case 24:Gr(Ei)}}function xu(e,t){try{var r=t.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var p=l.next;r=p;do{if((r.tag&e)===e){l=void 0;var m=r.create,z=r.inst;l=m(),z.destroy=l}r=r.next}while(r!==p)}}catch(oe){Cr(t,t.return,oe)}}function Yt(e,t,r){try{var l=t.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var m=p.next;l=m;do{if((l.tag&e)===e){var z=l.inst,oe=z.destroy;if(oe!==void 0){z.destroy=void 0,p=t;var ze=r,Je=oe;try{Je()}catch(ft){Cr(p,ze,ft)}}}l=l.next}while(l!==m)}}catch(ft){Cr(t,t.return,ft)}}function $c(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{Ar(t,r)}catch(l){Cr(e,e.return,l)}}}function Cf(e,t,r){r.props=as(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){Cr(e,t,l)}}function $u(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(p){Cr(e,t,p)}}function Gl(e,t){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(p){Cr(e,t,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Cr(e,t,p)}else r.current=null}function Qd(e){var t=e.type,r=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(p){Cr(e,e.return,p)}}function c(e,t,r){try{var l=e.stateNode;V2(l,e.type,r,t),l[yi]=t}catch(p){Cr(e,e.return,p)}}function y(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ju(e.type)||e.tag===4}function N(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||y(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ju(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Y(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ka));else if(l!==4&&(l===27&&ju(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(Y(e,t,r),e=e.sibling;e!==null;)Y(e,t,r),e=e.sibling}function ie(e,t,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(l!==4&&(l===27&&ju(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(ie(e,t,r),e=e.sibling;e!==null;)ie(e,t,r),e=e.sibling}function Se(e){var t=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,p=t.attributes;p.length;)t.removeAttributeNode(p[0]);ss(t,l,r),t[vi]=e,t[yi]=r}catch(m){Cr(e,e.return,m)}}var I=!1,he=!1,ne=!1,ue=typeof WeakSet=="function"?WeakSet:Set,we=null;function Te(e,t){if(e=e.containerInfo,mh=xp,e=gs(e),aa(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var p=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var z=0,oe=-1,ze=-1,Je=0,ft=0,xt=e,et=null;t:for(;;){for(var ot;xt!==r||p!==0&&xt.nodeType!==3||(oe=z+p),xt!==m||l!==0&&xt.nodeType!==3||(ze=z+l),xt.nodeType===3&&(z+=xt.nodeValue.length),(ot=xt.firstChild)!==null;)et=xt,xt=ot;for(;;){if(xt===e)break t;if(et===r&&++Je===p&&(oe=z),et===m&&++ft===l&&(ze=z),(ot=xt.nextSibling)!==null)break;xt=et,et=xt.parentNode}xt=ot}r=oe===-1||ze===-1?null:{start:oe,end:ze}}else r=null}r=r||{start:0,end:0}}else r=null;for(xh={focusedElem:e,selectionRange:r},xp=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){switch(t=we,m=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)p=e[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,r=t,p=m.memoizedProps,m=m.memoizedState,l=r.stateNode;try{var tn=as(r.type,p);e=l.getSnapshotBeforeUpdate(tn,m),l.__reactInternalSnapshotBeforeUpdate=e}catch(qn){Cr(r,r.return,qn)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)wh(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}}function ke(e,t,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Qe(e,r),l&4&&xu(5,r);break;case 1:if(Qe(e,r),l&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(z){Cr(r,r.return,z)}else{var p=as(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(p,t,e.__reactInternalSnapshotBeforeUpdate)}catch(z){Cr(r,r.return,z)}}l&64&&$c(r),l&512&&$u(r,r.return);break;case 3:if(Qe(e,r),l&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{Ar(e,t)}catch(z){Cr(r,r.return,z)}}break;case 27:t===null&&l&4&&Se(r);case 26:case 5:Qe(e,r),t===null&&l&4&&Qd(r),l&512&&$u(r,r.return);break;case 12:Qe(e,r);break;case 31:Qe(e,r),l&4&&$e(e,r);break;case 13:Qe(e,r),l&4&&lt(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=P2.bind(null,r),J2(e,r))));break;case 22:if(l=r.memoizedState!==null||I,!l){t=t!==null&&t.memoizedState!==null||he,p=I;var m=he;I=l,(he=t)&&!m?vt(e,r,(r.subtreeFlags&8772)!==0):Qe(e,r),I=p,he=m}break;case 30:break;default:Qe(e,r)}}function De(e){var t=e.alternate;t!==null&&(e.alternate=null,De(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ls(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Le=null,Ce=!1;function Me(e,t,r){for(r=r.child;r!==null;)_e(e,t,r),r=r.sibling}function _e(e,t,r){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Nn,r)}catch{}switch(r.tag){case 26:he||Gl(r,t),Me(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:he||Gl(r,t);var l=Le,p=Ce;ju(r.type)&&(Le=r.stateNode,Ce=!1),Me(e,t,r),Sd(r.stateNode),Le=l,Ce=p;break;case 5:he||Gl(r,t);case 6:if(l=Le,p=Ce,Le=null,Me(e,t,r),Le=l,Ce=p,Le!==null)if(Ce)try{(Le.nodeType===9?Le.body:Le.nodeName==="HTML"?Le.ownerDocument.body:Le).removeChild(r.stateNode)}catch(m){Cr(r,t,m)}else try{Le.removeChild(r.stateNode)}catch(m){Cr(r,t,m)}break;case 18:Le!==null&&(Ce?(e=Le,bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Df(e)):bg(Le,r.stateNode));break;case 4:l=Le,p=Ce,Le=r.stateNode.containerInfo,Ce=!0,Me(e,t,r),Le=l,Ce=p;break;case 0:case 11:case 14:case 15:Yt(2,r,t),he||Yt(4,r,t),Me(e,t,r);break;case 1:he||(Gl(r,t),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Cf(r,t,l)),Me(e,t,r);break;case 21:Me(e,t,r);break;case 22:he=(l=he)||r.memoizedState!==null,Me(e,t,r),he=l;break;default:Me(e,t,r)}}function $e(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Df(e)}catch(r){Cr(t,t.return,r)}}}function lt(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Df(e)}catch(r){Cr(t,t.return,r)}}function ht(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new ue),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new ue),t;default:throw Error(s(435,e.tag))}}function gt(e,t){var r=ht(e);t.forEach(function(l){if(!r.has(l)){r.add(l);var p=D2.bind(null,e,l);l.then(p,p)}})}function Xe(e,t){var r=t.deletions;if(r!==null)for(var l=0;l<r.length;l++){var p=r[l],m=e,z=t,oe=z;e:for(;oe!==null;){switch(oe.tag){case 27:if(ju(oe.type)){Le=oe.stateNode,Ce=!1;break e}break;case 5:Le=oe.stateNode,Ce=!1;break e;case 3:case 4:Le=oe.stateNode.containerInfo,Ce=!0;break e}oe=oe.return}if(Le===null)throw Error(s(160));_e(m,z,p),Le=null,Ce=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Fe(t,e),t=t.sibling}var Lt=null;function Fe(e,t){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xe(t,e),Be(e),l&4&&(Yt(3,e,e.return),xu(3,e),Yt(5,e,e.return));break;case 1:Xe(t,e),Be(e),l&512&&(he||r===null||Gl(r,r.return)),l&64&&I&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var p=Lt;if(Xe(t,e),Be(e),l&512&&(he||r===null||Gl(r,r.return)),l&4){var m=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){e:{l=e.type,r=e.memoizedProps,p=p.ownerDocument||p;t:switch(l){case"title":m=p.getElementsByTagName("title")[0],(!m||m[za]||m[vi]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(l),p.head.insertBefore(m,p.querySelector("head > title"))),ss(m,l,r),m[vi]=e,Ln(m),l=m;break e;case"link":var z=Lg("link","href",p).get(l+(r.href||""));if(z){for(var oe=0;oe<z.length;oe++)if(m=z[oe],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){z.splice(oe,1);break t}}m=p.createElement(l),ss(m,l,r),p.head.appendChild(m);break;case"meta":if(z=Lg("meta","content",p).get(l+(r.content||""))){for(oe=0;oe<z.length;oe++)if(m=z[oe],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){z.splice(oe,1);break t}}m=p.createElement(l),ss(m,l,r),p.head.appendChild(m);break;default:throw Error(s(468,l))}m[vi]=e,Ln(m),l=m}e.stateNode=l}else zg(p,e.type,e.stateNode);else e.stateNode=_g(p,l,e.memoizedProps);else m!==l?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,l===null?zg(p,e.type,e.stateNode):_g(p,l,e.memoizedProps)):l===null&&e.stateNode!==null&&c(e,e.memoizedProps,r.memoizedProps)}break;case 27:Xe(t,e),Be(e),l&512&&(he||r===null||Gl(r,r.return)),r!==null&&l&4&&c(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Xe(t,e),Be(e),l&512&&(he||r===null||Gl(r,r.return)),e.flags&32){p=e.stateNode;try{vo(p,"")}catch(tn){Cr(e,e.return,tn)}}l&4&&e.stateNode!=null&&(p=e.memoizedProps,c(e,p,r!==null?r.memoizedProps:p)),l&1024&&(ne=!0);break;case 6:if(Xe(t,e),Be(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(tn){Cr(e,e.return,tn)}}break;case 3:if(hp=null,p=Lt,Lt=dp(t.containerInfo),Xe(t,e),Lt=p,Be(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Df(t.containerInfo)}catch(tn){Cr(e,e.return,tn)}ne&&(ne=!1,He(e));break;case 4:l=Lt,Lt=dp(e.stateNode.containerInfo),Xe(t,e),Be(e),Lt=l;break;case 12:Xe(t,e),Be(e);break;case 31:Xe(t,e),Be(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gt(e,l)));break;case 13:Xe(t,e),Be(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ep=Wn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gt(e,l)));break;case 22:p=e.memoizedState!==null;var ze=r!==null&&r.memoizedState!==null,Je=I,ft=he;if(I=Je||p,he=ft||ze,Xe(t,e),he=ft,I=Je,Be(e),l&8192)e:for(t=e.stateNode,t._visibility=p?t._visibility&-2:t._visibility|1,p&&(r===null||ze||I||he||rt(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){ze=r=t;try{if(m=ze.stateNode,p)z=m.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{oe=ze.stateNode;var xt=ze.memoizedProps.style,et=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;oe.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(tn){Cr(ze,ze.return,tn)}}}else if(t.tag===6){if(r===null){ze=t;try{ze.stateNode.nodeValue=p?"":ze.memoizedProps}catch(tn){Cr(ze,ze.return,tn)}}}else if(t.tag===18){if(r===null){ze=t;try{var ot=ze.stateNode;p?vg(ot,!0):vg(ze.stateNode,!1)}catch(tn){Cr(ze,ze.return,tn)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,gt(e,r))));break;case 19:Xe(t,e),Be(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,gt(e,l)));break;case 30:break;case 21:break;default:Xe(t,e),Be(e)}}function Be(e){var t=e.flags;if(t&2){try{for(var r,l=e.return;l!==null;){if(y(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,m=N(e);ie(e,m,p);break;case 5:var z=r.stateNode;r.flags&32&&(vo(z,""),r.flags&=-33);var oe=N(e);ie(e,oe,z);break;case 3:case 4:var ze=r.stateNode.containerInfo,Je=N(e);Y(e,Je,ze);break;default:throw Error(s(161))}}catch(ft){Cr(e,e.return,ft)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function He(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;He(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Qe(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ke(e,t.alternate,t),t=t.sibling}function rt(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Yt(4,t,t.return),rt(t);break;case 1:Gl(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&Cf(t,t.return,r),rt(t);break;case 27:Sd(t.stateNode);case 26:case 5:Gl(t,t.return),rt(t);break;case 22:t.memoizedState===null&&rt(t);break;case 30:rt(t);break;default:rt(t)}e=e.sibling}}function vt(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,p=e,m=t,z=m.flags;switch(m.tag){case 0:case 11:case 15:vt(p,m,r),xu(4,m);break;case 1:if(vt(p,m,r),l=m,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Je){Cr(l,l.return,Je)}if(l=m,p=l.updateQueue,p!==null){var oe=l.stateNode;try{var ze=p.shared.hiddenCallbacks;if(ze!==null)for(p.shared.hiddenCallbacks=null,p=0;p<ze.length;p++)cr(ze[p],oe)}catch(Je){Cr(l,l.return,Je)}}r&&z&64&&$c(m),$u(m,m.return);break;case 27:Se(m);case 26:case 5:vt(p,m,r),r&&l===null&&z&4&&Qd(m),$u(m,m.return);break;case 12:vt(p,m,r);break;case 31:vt(p,m,r),r&&z&4&&$e(p,m);break;case 13:vt(p,m,r),r&&z&4&&lt(p,m);break;case 22:m.memoizedState===null&&vt(p,m,r),$u(m,m.return);break;case 30:break;default:vt(p,m,r)}t=t.sibling}}function Ot(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Oo(r))}function fn(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oo(e))}function mn(e,t,r,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zn(e,t,r,l),t=t.sibling}function zn(e,t,r,l){var p=t.flags;switch(t.tag){case 0:case 11:case 15:mn(e,t,r,l),p&2048&&xu(9,t);break;case 1:mn(e,t,r,l);break;case 3:mn(e,t,r,l),p&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oo(e)));break;case 12:if(p&2048){mn(e,t,r,l),e=t.stateNode;try{var m=t.memoizedProps,z=m.id,oe=m.onPostCommit;typeof oe=="function"&&oe(z,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ze){Cr(t,t.return,ze)}}else mn(e,t,r,l);break;case 31:mn(e,t,r,l);break;case 13:mn(e,t,r,l);break;case 23:break;case 22:m=t.stateNode,z=t.alternate,t.memoizedState!==null?m._visibility&2?mn(e,t,r,l):ti(e,t):m._visibility&2?mn(e,t,r,l):(m._visibility|=2,An(e,t,r,l,(t.subtreeFlags&10256)!==0||!1)),p&2048&&Ot(z,t);break;case 24:mn(e,t,r,l),p&2048&&fn(t.alternate,t);break;default:mn(e,t,r,l)}}function An(e,t,r,l,p){for(p=p&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var m=e,z=t,oe=r,ze=l,Je=z.flags;switch(z.tag){case 0:case 11:case 15:An(m,z,oe,ze,p),xu(8,z);break;case 23:break;case 22:var ft=z.stateNode;z.memoizedState!==null?ft._visibility&2?An(m,z,oe,ze,p):ti(m,z):(ft._visibility|=2,An(m,z,oe,ze,p)),p&&Je&2048&&Ot(z.alternate,z);break;case 24:An(m,z,oe,ze,p),p&&Je&2048&&fn(z.alternate,z);break;default:An(m,z,oe,ze,p)}t=t.sibling}}function ti(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,l=t,p=l.flags;switch(l.tag){case 22:ti(r,l),p&2048&&Ot(l.alternate,l);break;case 24:ti(r,l),p&2048&&fn(l.alternate,l);break;default:ti(r,l)}t=t.sibling}}var dn=8192;function jt(e,t,r){if(e.subtreeFlags&dn)for(e=e.child;e!==null;)bn(e,t,r),e=e.sibling}function bn(e,t,r){switch(e.tag){case 26:jt(e,t,r),e.flags&dn&&e.memoizedState!==null&&um(r,Lt,e.memoizedState,e.memoizedProps);break;case 5:jt(e,t,r);break;case 3:case 4:var l=Lt;Lt=dp(e.stateNode.containerInfo),jt(e,t,r),Lt=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=dn,dn=16777216,jt(e,t,r),dn=l):jt(e,t,r));break;default:jt(e,t,r)}}function ar(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function yr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];we=l,Ao(l,e)}ar(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)wr(e),e=e.sibling}function wr(e){switch(e.tag){case 0:case 11:case 15:yr(e),e.flags&2048&&Yt(9,e,e.return);break;case 3:yr(e);break;case 12:yr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,oo(e)):yr(e);break;default:yr(e)}}function oo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];we=l,Ao(l,e)}ar(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Yt(8,t,t.return),oo(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,oo(t));break;default:oo(t)}e=e.sibling}}function Ao(e,t){for(;we!==null;){var r=we;switch(r.tag){case 0:case 11:case 15:Yt(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Oo(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,we=l;else e:for(r=e;we!==null;){l=we;var p=l.sibling,m=l.return;if(De(l),l===r){we=null;break e}if(p!==null){p.return=m,we=p;break e}we=m}}}var $n={getCacheForType:function(e){var t=xr(Ei),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return xr(Ei).controller.signal}},Ll=typeof WeakMap=="function"?WeakMap:Map,ai=0,Hr=null,zi=null,Mi=0,Sr=0,zl=null,bu=!1,Tf=!1,Qp=!1,Xc=0,qo=0,vu=0,Xu=0,eh=0,Pl=0,jf=0,md=null,ul=null,th=!1,ep=0,B0=0,tp=1/0,np=null,wu=null,Aa=0,Su=null,kf=null,Kc=0,nh=0,ih=null,O0=null,xd=0,rh=null;function Dl(){return(ai&2)!==0&&Mi!==0?Mi&-Mi:K.T!==null?uh():ur()}function I0(){if(Pl===0)if((Mi&536870912)===0||ki){var e=Oi;Oi<<=1,(Oi&3932160)===0&&(Oi=262144),Pl=e}else Pl=536870912;return e=Gi.current,e!==null&&(e.flags|=32),Pl}function fl(e,t,r){(e===Hr&&(Sr===2||Sr===9)||e.cancelPendingCommit!==null)&&(Af(e,0),Cu(e,Mi,Pl,!1)),Vt(e,r),((ai&2)===0||e!==Hr)&&(e===Hr&&((ai&2)===0&&(Xu|=r),qo===4&&Cu(e,Mi,Pl,!1)),Lc(e))}function U0(e,t,r){if((ai&6)!==0)throw Error(s(327));var l=!r&&(t&127)===0&&(t&e.expiredLanes)===0||yo(e,t),p=l?_2(e,t):ah(e,t,!0),m=l;do{if(p===0){Tf&&!l&&Cu(e,t,0,!1);break}else{if(r=e.current.alternate,m&&!A2(r)){p=ah(e,t,!1),m=!1;continue}if(p===2){if(m=t,e.errorRecoveryDisabledLanes&m)var z=0;else z=e.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){t=z;e:{var oe=e;p=md;var ze=oe.current.memoizedState.isDehydrated;if(ze&&(Af(oe,z).flags|=256),z=ah(oe,z,!1),z!==2){if(Qp&&!ze){oe.errorRecoveryDisabledLanes|=m,Xu|=m,p=4;break e}m=ul,ul=p,m!==null&&(ul===null?ul=m:ul.push.apply(ul,m))}p=z}if(m=!1,p!==2)continue}}if(p===1){Af(e,0),Cu(e,t,0,!0);break}e:{switch(l=e,m=p,m){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Cu(l,t,Pl,!bu);break e;case 2:ul=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(p=ep+300-Wn(),10<p)){if(Cu(l,t,Pl,!bu),Ht(l,0,!0)!==0)break e;Kc=t,l.timeoutHandle=mg(F0.bind(null,l,r,ul,np,th,t,Pl,Xu,jf,bu,m,"Throttled",-0,0),p);break e}F0(l,r,ul,np,th,t,Pl,Xu,jf,bu,m,null,-0,0)}}break}while(!0);Lc(e)}function F0(e,t,r,l,p,m,z,oe,ze,Je,ft,xt,et,ot){if(e.timeoutHandle=-1,xt=t.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ka},bn(t,m,xt);var tn=(m&62914560)===m?ep-Wn():(m&4194048)===m?B0-Wn():0;if(tn=fm(xt,tn),tn!==null){Kc=m,e.cancelPendingCommit=tn(X0.bind(null,e,t,m,r,l,p,z,oe,ze,ft,xt,null,et,ot)),Cu(e,m,z,!Je);return}}X0(e,t,m,r,l,p,z,oe,ze)}function A2(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var p=r[l],m=p.getSnapshot;p=p.value;try{if(!So(m(),p))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cu(e,t,r,l){t&=~eh,t&=~Xu,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var p=t;0<p;){var m=31-at(p),z=1<<m;l[m]=-1,p&=~z}r!==0&&da(e,r,t)}function ip(){return(ai&6)===0?(bd(0),!1):!0}function oh(){if(zi!==null){if(Sr===0)var e=zi.return;else e=zi,uo=Or=null,au(e),mt=null,Xt=0,e=zi;for(;e!==null;)yd(e.alternate,e),e=e.return;zi=null}}function Af(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,G2(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Kc=0,oh(),Hr=e,zi=r=wa(e.current,null),Mi=t,Sr=0,zl=null,bu=!1,Tf=yo(e,t),Qp=!1,jf=Pl=eh=Xu=vu=qo=0,ul=md=null,th=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var p=31-at(l),m=1<<p;t|=e[p],l&=~m}return Xc=t,Rc(),r}function q0(e,t){yn=null,K.H=Fc,t===Re||t===xe?(t=ct(),Sr=3):t===Ve?(t=ct(),Sr=4):Sr=t===Sf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,zl=t,zi===null&&(qo=1,pu(e,Sa(t,e.current)))}function H0(){var e=Gi.current;return e===null?!0:(Mi&4194048)===Mi?mi===null:(Mi&62914560)===Mi||(Mi&536870912)!==0?e===mi:!1}function V0(){var e=K.H;return K.H=Fc,e===null?Fc:e}function W0(){var e=K.A;return K.A=$n,e}function rp(){qo=4,bu||(Mi&4194048)!==Mi&&Gi.current!==null||(Tf=!0),(vu&134217727)===0&&(Xu&134217727)===0||Hr===null||Cu(Hr,Mi,Pl,!1)}function ah(e,t,r){var l=ai;ai|=2;var p=V0(),m=W0();(Hr!==e||Mi!==t)&&(np=null,Af(e,t)),t=!1;var z=qo;e:do try{if(Sr!==0&&zi!==null){var oe=zi,ze=zl;switch(Sr){case 8:oh(),z=6;break e;case 3:case 2:case 9:case 6:Gi.current===null&&(t=!0);var Je=Sr;if(Sr=0,zl=null,Nf(e,oe,ze,Je),r&&Tf){z=0;break e}break;default:Je=Sr,Sr=0,zl=null,Nf(e,oe,ze,Je)}}N2(),z=qo;break}catch(ft){q0(e,ft)}while(!0);return t&&e.shellSuspendCounter++,uo=Or=null,ai=l,K.H=p,K.A=m,zi===null&&(Hr=null,Mi=0,Rc()),z}function N2(){for(;zi!==null;)Y0(zi)}function _2(e,t){var r=ai;ai|=2;var l=V0(),p=W0();Hr!==e||Mi!==t?(np=null,tp=Wn()+500,Af(e,t)):Tf=yo(e,t);e:do try{if(Sr!==0&&zi!==null){t=zi;var m=zl;t:switch(Sr){case 1:Sr=0,zl=null,Nf(e,t,m,1);break;case 2:case 9:if(Ye(m)){Sr=0,zl=null,G0(t);break}t=function(){Sr!==2&&Sr!==9||Hr!==e||(Sr=7),Lc(e)},m.then(t,t);break e;case 3:Sr=7;break e;case 4:Sr=5;break e;case 7:Ye(m)?(Sr=0,zl=null,G0(t)):(Sr=0,zl=null,Nf(e,t,m,7));break;case 5:var z=null;switch(zi.tag){case 26:z=zi.memoizedState;case 5:case 27:var oe=zi;if(z?Pg(z):oe.stateNode.complete){Sr=0,zl=null;var ze=oe.sibling;if(ze!==null)zi=ze;else{var Je=oe.return;Je!==null?(zi=Je,op(Je)):zi=null}break t}}Sr=0,zl=null,Nf(e,t,m,5);break;case 6:Sr=0,zl=null,Nf(e,t,m,6);break;case 8:oh(),qo=6;break e;default:throw Error(s(462))}}L2();break}catch(ft){q0(e,ft)}while(!0);return uo=Or=null,K.H=l,K.A=p,ai=r,zi!==null?0:(Hr=null,Mi=0,Rc(),qo)}function L2(){for(;zi!==null&&!vn();)Y0(zi)}function Y0(e){var t=Jd(e.alternate,e,Xc);e.memoizedProps=e.pendingProps,t===null?op(e):zi=t}function G0(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=gu(r,t,t.pendingProps,t.type,void 0,Mi);break;case 11:t=gu(r,t,t.pendingProps,t.type.render,t.ref,Mi);break;case 5:au(t);default:yd(r,t),t=zi=ec(t,Xc),t=Jd(r,t,Xc)}e.memoizedProps=e.pendingProps,t===null?op(e):zi=t}function Nf(e,t,r,l){uo=Or=null,au(t),mt=null,Xt=0;var p=t.return;try{if(Jp(e,p,t,r,Mi)){qo=1,pu(e,Sa(r,e.current)),zi=null;return}}catch(m){if(p!==null)throw zi=p,m;qo=1,pu(e,Sa(r,e.current)),zi=null;return}t.flags&32768?(ki||l===1?e=!0:Tf||(Mi&536870912)!==0?e=!1:(bu=e=!0,(l===2||l===9||l===3||l===6)&&(l=Gi.current,l!==null&&l.tag===13&&(l.flags|=16384))),$0(t,e)):op(t)}function op(e){var t=e;do{if((t.flags&32768)!==0){$0(t,bu);return}e=t.return;var r=hd(t.alternate,t,Xc);if(r!==null){zi=r;return}if(t=t.sibling,t!==null){zi=t;return}zi=t=e}while(t!==null);qo===0&&(qo=5)}function $0(e,t){do{var r=gd(e.alternate,e);if(r!==null){r.flags&=32767,zi=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){zi=e;return}zi=e=r}while(e!==null);qo=6,zi=null}function X0(e,t,r,l,p,m,z,oe,ze){e.cancelPendingCommit=null;do ap();while(Aa!==0);if((ai&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(m=t.lanes|t.childLanes,m|=va,zo(e,r,m,z,oe,ze),e===Hr&&(zi=Hr=null,Mi=0),kf=t,Su=e,Kc=r,nh=m,ih=p,O0=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,E2(ut,function(){return eg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,p=te.p,te.p=2,z=ai,ai|=4;try{Te(e,t,r)}finally{ai=z,te.p=p,K.T=l}}Aa=1,K0(),Z0(),J0()}}function K0(){if(Aa===1){Aa=0;var e=Su,t=kf,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=K.T,K.T=null;var l=te.p;te.p=2;var p=ai;ai|=4;try{Fe(t,e);var m=xh,z=gs(e.containerInfo),oe=m.focusedElem,ze=m.selectionRange;if(z!==oe&&oe&&oe.ownerDocument&&Us(oe.ownerDocument.documentElement,oe)){if(ze!==null&&aa(oe)){var Je=ze.start,ft=ze.end;if(ft===void 0&&(ft=Je),"selectionStart"in oe)oe.selectionStart=Je,oe.selectionEnd=Math.min(ft,oe.value.length);else{var xt=oe.ownerDocument||document,et=xt&&xt.defaultView||window;if(et.getSelection){var ot=et.getSelection(),tn=oe.textContent.length,qn=Math.min(ze.start,tn),zr=ze.end===void 0?qn:Math.min(ze.end,tn);!ot.extend&&qn>zr&&(z=zr,zr=qn,qn=z);var We=Ua(oe,qn),Ie=Ua(oe,zr);if(We&&Ie&&(ot.rangeCount!==1||ot.anchorNode!==We.node||ot.anchorOffset!==We.offset||ot.focusNode!==Ie.node||ot.focusOffset!==Ie.offset)){var Ze=xt.createRange();Ze.setStart(We.node,We.offset),ot.removeAllRanges(),qn>zr?(ot.addRange(Ze),ot.extend(Ie.node,Ie.offset)):(Ze.setEnd(Ie.node,Ie.offset),ot.addRange(Ze))}}}}for(xt=[],ot=oe;ot=ot.parentNode;)ot.nodeType===1&&xt.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<xt.length;oe++){var yt=xt[oe];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}xp=!!mh,xh=mh=null}finally{ai=p,te.p=l,K.T=r}}e.current=t,Aa=2}}function Z0(){if(Aa===2){Aa=0;var e=Su,t=kf,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=K.T,K.T=null;var l=te.p;te.p=2;var p=ai;ai|=4;try{ke(e,t.alternate,t)}finally{ai=p,te.p=l,K.T=r}}Aa=3}}function J0(){if(Aa===4||Aa===3){Aa=0,Jt();var e=Su,t=kf,r=Kc,l=O0;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Aa=5:(Aa=0,kf=Su=null,Q0(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(wu=null),Jn(r),t=t.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Nn,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=K.T,p=te.p,te.p=2,K.T=null;try{for(var m=e.onRecoverableError,z=0;z<l.length;z++){var oe=l[z];m(oe.value,{componentStack:oe.stack})}}finally{K.T=t,te.p=p}}(Kc&3)!==0&&ap(),Lc(e),p=e.pendingLanes,(r&261930)!==0&&(p&42)!==0?e===rh?xd++:(xd=0,rh=e):xd=0,bd(0)}}function Q0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Oo(t)))}function ap(){return K0(),Z0(),J0(),eg()}function eg(){if(Aa!==5)return!1;var e=Su,t=nh;nh=0;var r=Jn(Kc),l=K.T,p=te.p;try{te.p=32>r?32:r,K.T=null,r=ih,ih=null;var m=Su,z=Kc;if(Aa=0,kf=Su=null,Kc=0,(ai&6)!==0)throw Error(s(331));var oe=ai;if(ai|=4,wr(m.current),zn(m,m.current,z,r),ai=oe,bd(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Nn,m)}catch{}return!0}finally{te.p=p,K.T=l,Q0(e,t)}}function tg(e,t,r){t=Sa(r,t),t=wf(e.stateNode,t,2),e=kn(e,t,2),e!==null&&(Vt(e,2),Lc(e))}function Cr(e,t,r){if(e.tag===3)tg(e,e,r);else for(;t!==null;){if(t.tag===3){tg(t,e,r);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(wu===null||!wu.has(l))){e=Sa(r,e),r=$d(2),l=kn(t,r,2),l!==null&&(ad(r,l,t,e),Vt(l,2),Lc(l));break}}t=t.return}}function sh(e,t,r){var l=e.pingCache;if(l===null){l=e.pingCache=new Ll;var p=new Set;l.set(t,p)}else p=l.get(t),p===void 0&&(p=new Set,l.set(t,p));p.has(r)||(Qp=!0,p.add(r),e=z2.bind(null,e,t,r),t.then(e,e))}function z2(e,t,r){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Hr===e&&(Mi&r)===r&&(qo===4||qo===3&&(Mi&62914560)===Mi&&300>Wn()-ep?(ai&2)===0&&Af(e,0):eh|=r,jf===Mi&&(jf=0)),Lc(e)}function ng(e,t){t===0&&(t=_o()),e=ms(e,t),e!==null&&(Vt(e,t),Lc(e))}function P2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ng(e,r)}function D2(e,t){var r=0;switch(e.tag){case 31:case 13:var l=e.stateNode,p=e.memoizedState;p!==null&&(r=p.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(t),ng(e,r)}function E2(e,t){return Qt(e,t)}var sp=null,_f=null,lh=!1,lp=!1,ch=!1,Tu=0;function Lc(e){e!==_f&&e.next===null&&(_f===null?sp=_f=e:_f=_f.next=e),lp=!0,lh||(lh=!0,M2())}function bd(e,t){if(!ch&&lp){ch=!0;do for(var r=!1,l=sp;l!==null;){if(e!==0){var p=l.pendingLanes;if(p===0)var m=0;else{var z=l.suspendedLanes,oe=l.pingedLanes;m=(1<<31-at(42|e)+1)-1,m&=p&~(z&~oe),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,ag(l,m))}else m=Mi,m=Ht(l,l===Hr?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||yo(l,m)||(r=!0,ag(l,m));l=l.next}while(r);ch=!1}}function R2(){ig()}function ig(){lp=lh=!1;var e=0;Tu!==0&&Y2()&&(e=Tu);for(var t=Wn(),r=null,l=sp;l!==null;){var p=l.next,m=rg(l,t);m===0?(l.next=null,r===null?sp=p:r.next=p,p===null&&(_f=r)):(r=l,(e!==0||(m&3)!==0)&&(lp=!0)),l=p}Aa!==0&&Aa!==5||bd(e),Tu!==0&&(Tu=0)}function rg(e,t){for(var r=e.suspendedLanes,l=e.pingedLanes,p=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var z=31-at(m),oe=1<<z,ze=p[z];ze===-1?((oe&r)===0||(oe&l)!==0)&&(p[z]=Wr(oe,t)):ze<=t&&(e.expiredLanes|=oe),m&=~oe}if(t=Hr,r=Mi,r=Ht(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===t&&(Sr===2||Sr===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Et(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||yo(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(l!==null&&Et(l),Jn(r)){case 2:case 8:r=fi;break;case 32:r=ut;break;case 268435456:r=Mn;break;default:r=ut}return l=og.bind(null,e),r=Qt(r,l),e.callbackPriority=t,e.callbackNode=r,t}return l!==null&&l!==null&&Et(l),e.callbackPriority=2,e.callbackNode=null,2}function og(e,t){if(Aa!==0&&Aa!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(ap()&&e.callbackNode!==r)return null;var l=Mi;return l=Ht(e,e===Hr?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(U0(e,l,t),rg(e,Wn()),e.callbackNode!=null&&e.callbackNode===r?og.bind(null,e):null)}function ag(e,t){if(ap())return null;U0(e,t,!0)}function M2(){$2(function(){(ai&6)!==0?Qt(Pt,R2):ig()})}function uh(){if(Tu===0){var e=d;e===0&&(e=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),Tu=e}return Tu}function sg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ga(""+e)}function lg(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function B2(e,t,r,l,p){if(t==="submit"&&r&&r.stateNode===p){var m=sg((p[yi]||null).action),z=l.submitter;z&&(t=(t=z[yi]||null)?sg(t.formAction):z.getAttribute("formAction"),t!==null&&(m=t,z=null));var oe=new Ra("action","action",null,l,p);e.push({event:oe,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Tu!==0){var ze=z?lg(p,z):new FormData(p);mf(r,{pending:!0,data:ze,method:p.method,action:m},null,ze)}}else typeof m=="function"&&(oe.preventDefault(),ze=z?lg(p,z):new FormData(p),mf(r,{pending:!0,data:ze,method:p.method,action:m},m,ze))},currentTarget:p}]})}}for(var fh=0;fh<ol.length;fh++){var dh=ol[fh],O2=dh.toLowerCase(),I2=dh[0].toUpperCase()+dh.slice(1);ir(O2,"on"+I2)}ir(to,"onAnimationEnd"),ir(la,"onAnimationIteration"),ir(nl,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(qs,"onTransitionRun"),ir(il,"onTransitionStart"),ir(xl,"onTransitionCancel"),ir(rl,"onTransitionEnd"),pa("onMouseEnter",["mouseout","mouseover"]),pa("onMouseLeave",["mouseout","mouseover"]),pa("onPointerEnter",["pointerout","pointerover"]),pa("onPointerLeave",["pointerout","pointerover"]),ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vd));function cg(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],p=l.event;l=l.listeners;e:{var m=void 0;if(t)for(var z=l.length-1;0<=z;z--){var oe=l[z],ze=oe.instance,Je=oe.currentTarget;if(oe=oe.listener,ze!==m&&p.isPropagationStopped())break e;m=oe,p.currentTarget=Je;try{m(p)}catch(ft){Si(ft)}p.currentTarget=null,m=ze}else for(z=0;z<l.length;z++){if(oe=l[z],ze=oe.instance,Je=oe.currentTarget,oe=oe.listener,ze!==m&&p.isPropagationStopped())break e;m=oe,p.currentTarget=Je;try{m(p)}catch(ft){Si(ft)}p.currentTarget=null,m=ze}}}}function Pi(e,t){var r=t[Qo];r===void 0&&(r=t[Qo]=new Set);var l=e+"__bubble";r.has(l)||(ug(t,e,2,!1),r.add(l))}function ph(e,t,r){var l=0;t&&(l|=4),ug(r,e,l,t)}var cp="_reactListening"+Math.random().toString(36).slice(2);function hh(e){if(!e[cp]){e[cp]=!0,_s.forEach(function(r){r!=="selectionchange"&&(U2.has(r)||ph(r,!1,e),ph(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cp]||(t[cp]=!0,ph("selectionchange",!1,t))}}function ug(e,t,r,l){switch(Ig(t)){case 2:var p=hm;break;case 8:p=gm;break;default:p=_h}r=p.bind(null,t,r,e),p=void 0,!Tn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(p=!0),l?p!==void 0?e.addEventListener(t,r,{capture:!0,passive:p}):e.addEventListener(t,r,!0):p!==void 0?e.addEventListener(t,r,{passive:p}):e.addEventListener(t,r,!1)}function gh(e,t,r,l,p){var m=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var z=l.tag;if(z===3||z===4){var oe=l.stateNode.containerInfo;if(oe===p)break;if(z===4)for(z=l.return;z!==null;){var ze=z.tag;if((ze===3||ze===4)&&z.stateNode.containerInfo===p)return;z=z.return}for(;oe!==null;){if(z=Yn(oe),z===null)return;if(ze=z.tag,ze===5||ze===6||ze===26||ze===27){l=m=z;continue e}oe=oe.parentNode}}l=l.return}Ql(function(){var Je=m,ft=Wi(r),xt=[];e:{var et=Fa.get(e);if(et!==void 0){var ot=Ra,tn=e;switch(e){case"keypress":if(Rt(r)===0)break e;case"keydown":case"keyup":ot=pi;break;case"focusin":tn="focus",ot=an;break;case"focusout":tn="blur",ot=an;break;case"beforeblur":case"afterblur":ot=an;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Qs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Ni;break;case to:case la:case nl:ot=w;break;case rl:ot=Ki;break;case"scroll":case"scrollend":ot=Rs;break;case"wheel":ot=wo;break;case"copy":case"cut":case"paste":ot=me;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=ji;break;case"toggle":case"beforetoggle":ot=lo}var qn=(t&4)!==0,zr=!qn&&(e==="scroll"||e==="scrollend"),We=qn?et!==null?et+"Capture":null:et;qn=[];for(var Ie=Je,Ze;Ie!==null;){var yt=Ie;if(Ze=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||Ze===null||We===null||(yt=na(Ie,We),yt!=null&&qn.push(wd(Ie,yt,Ze))),zr)break;Ie=Ie.return}0<qn.length&&(et=new ot(et,tn,null,r,ft),xt.push({event:et,listeners:qn}))}}if((t&7)===0){e:{if(et=e==="mouseover"||e==="pointerover",ot=e==="mouseout"||e==="pointerout",et&&r!==nr&&(tn=r.relatedTarget||r.fromElement)&&(Yn(tn)||tn[mo]))break e;if((ot||et)&&(et=ft.window===ft?ft:(et=ft.ownerDocument)?et.defaultView||et.parentWindow:window,ot?(tn=r.relatedTarget||r.toElement,ot=Je,tn=tn?Yn(tn):null,tn!==null&&(zr=f(tn),qn=tn.tag,tn!==zr||qn!==5&&qn!==27&&qn!==6)&&(tn=null)):(ot=null,tn=Je),ot!==tn)){if(qn=yl,yt="onMouseLeave",We="onMouseEnter",Ie="mouse",(e==="pointerout"||e==="pointerover")&&(qn=ji,yt="onPointerLeave",We="onPointerEnter",Ie="pointer"),zr=ot==null?et:Ti(ot),Ze=tn==null?et:Ti(tn),et=new qn(yt,Ie+"leave",ot,r,ft),et.target=zr,et.relatedTarget=Ze,yt=null,Yn(ft)===Je&&(qn=new qn(We,Ie+"enter",tn,r,ft),qn.target=Ze,qn.relatedTarget=zr,yt=qn),zr=yt,ot&&tn)t:{for(qn=F2,We=ot,Ie=tn,Ze=0,yt=We;yt;yt=qn(yt))Ze++;yt=0;for(var Pn=Ie;Pn;Pn=qn(Pn))yt++;for(;0<Ze-yt;)We=qn(We),Ze--;for(;0<yt-Ze;)Ie=qn(Ie),yt--;for(;Ze--;){if(We===Ie||Ie!==null&&We===Ie.alternate){qn=We;break t}We=qn(We),Ie=qn(Ie)}qn=null}else qn=null;ot!==null&&fg(xt,et,ot,qn,!1),tn!==null&&zr!==null&&fg(xt,zr,tn,qn,!0)}}e:{if(et=Je?Ti(Je):window,ot=et.nodeName&&et.nodeName.toLowerCase(),ot==="select"||ot==="input"&&et.type==="file")var sr=es;else if(ds(et))if(oa)sr=xa;else{sr=fr;var xn=Zi}else ot=et.nodeName,!ot||ot.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?Je&&so(Je.elementType)&&(sr=es):sr=yc;if(sr&&(sr=sr(e,Je))){ra(xt,sr,r,ft);break e}xn&&xn(e,et,Je),e==="focusout"&&Je&&et.type==="number"&&Je.memoizedProps.value!=null&&ha(et,"number",et.value)}switch(xn=Je?Ti(Je):window,e){case"focusin":(ds(xn)||xn.contentEditable==="true")&&(ba=xn,ys=Je,sa=null);break;case"focusout":sa=ys=ba=null;break;case"mousedown":ts=!0;break;case"contextmenu":case"mouseup":case"dragend":ts=!1,Ui(xt,r,ft);break;case"selectionchange":if(Ro)break;case"keydown":case"keyup":Ui(xt,r,ft)}var bi;if(Er)e:{switch(e){case"compositionstart":var Bi="onCompositionStart";break e;case"compositionend":Bi="onCompositionEnd";break e;case"compositionupdate":Bi="onCompositionUpdate";break e}Bi=void 0}else Oa?Ol(e,r)&&(Bi="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Bi="onCompositionStart");Bi&&(Ba&&r.locale!=="ko"&&(Oa||Bi!=="onCompositionStart"?Bi==="onCompositionEnd"&&Oa&&(bi=nu()):(Kt=ft,ii="value"in Kt?Kt.value:Kt.textContent,Oa=!0)),xn=up(Je,Bi),0<xn.length&&(Bi=new Ue(Bi,e,null,r,ft),xt.push({event:Bi,listeners:xn}),bi?Bi.data=bi:(bi=gc(r),bi!==null&&(Bi.data=bi)))),(bi=co?Eo(e,r):fs(e,r))&&(Bi=up(Je,"onBeforeInput"),0<Bi.length&&(xn=new Ue("onBeforeInput","beforeinput",null,r,ft),xt.push({event:xn,listeners:Bi}),xn.data=bi)),B2(xt,e,Je,r,ft)}cg(xt,t)})}function wd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function up(e,t){for(var r=t+"Capture",l=[];e!==null;){var p=e,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=na(e,r),p!=null&&l.unshift(wd(e,p,m)),p=na(e,t),p!=null&&l.push(wd(e,p,m))),e.tag===3)return l;e=e.return}return[]}function F2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function fg(e,t,r,l,p){for(var m=t._reactName,z=[];r!==null&&r!==l;){var oe=r,ze=oe.alternate,Je=oe.stateNode;if(oe=oe.tag,ze!==null&&ze===l)break;oe!==5&&oe!==26&&oe!==27||Je===null||(ze=Je,p?(Je=na(r,m),Je!=null&&z.unshift(wd(r,Je,ze))):p||(Je=na(r,m),Je!=null&&z.push(wd(r,Je,ze)))),r=r.return}z.length!==0&&e.push({event:t,listeners:z})}var q2=/\r\n?/g,H2=/\u0000|\uFFFD/g;function dg(e){return(typeof e=="string"?e:""+e).replace(q2,`
`).replace(H2,"")}function pg(e,t){return t=dg(t),dg(e)===t}function Lr(e,t,r,l,p,m){switch(r){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||vo(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&vo(e,""+l);break;case"className":Ps(e,"class",l);break;case"tabIndex":Ps(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ps(e,r,l);break;case"style":Vi(e,l,m);break;case"data":if(t!=="object"){Ps(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=ga(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(t!=="input"&&Lr(e,t,"name",p.name,p,null),Lr(e,t,"formEncType",p.formEncType,p,null),Lr(e,t,"formMethod",p.formMethod,p,null),Lr(e,t,"formTarget",p.formTarget,p,null)):(Lr(e,t,"encType",p.encType,p,null),Lr(e,t,"method",p.method,p,null),Lr(e,t,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=ga(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=Ka);break;case"onScroll":l!=null&&Pi("scroll",e);break;case"onScrollEnd":l!=null&&Pi("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=ga(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":Pi("beforetoggle",e),Pi("toggle",e),Xi(e,"popover",l);break;case"xlinkActuate":On(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":On(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":On(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":On(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":On(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":On(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":On(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":On(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":On(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xi(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Zs.get(r)||r,Xi(e,r,l))}}function yh(e,t,r,l,p,m){switch(r){case"style":Vi(e,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(p.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof l=="string"?vo(e,l):(typeof l=="number"||typeof l=="bigint")&&vo(e,""+l);break;case"onScroll":l!=null&&Pi("scroll",e);break;case"onScrollEnd":l!=null&&Pi("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hn.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),t=r.slice(2,p?r.length-7:void 0),m=e[yi]||null,m=m!=null?m[r]:null,typeof m=="function"&&e.removeEventListener(t,m,p),typeof l=="function")){typeof m!="function"&&m!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,l,p);break e}r in e?e[r]=l:l===!0?e.setAttribute(r,""):Xi(e,r,l)}}}function ss(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pi("error",e),Pi("load",e);var l=!1,p=!1,m;for(m in r)if(r.hasOwnProperty(m)){var z=r[m];if(z!=null)switch(m){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Lr(e,t,m,z,r,null)}}p&&Lr(e,t,"srcSet",r.srcSet,r,null),l&&Lr(e,t,"src",r.src,r,null);return;case"input":Pi("invalid",e);var oe=m=z=p=null,ze=null,Je=null;for(l in r)if(r.hasOwnProperty(l)){var ft=r[l];if(ft!=null)switch(l){case"name":p=ft;break;case"type":z=ft;break;case"checked":ze=ft;break;case"defaultChecked":Je=ft;break;case"value":m=ft;break;case"defaultValue":oe=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(s(137,t));break;default:Lr(e,t,l,ft,r,null)}}Ml(e,m,oe,ze,Je,z,p,!1);return;case"select":Pi("invalid",e),l=z=m=null;for(p in r)if(r.hasOwnProperty(p)&&(oe=r[p],oe!=null))switch(p){case"value":m=oe;break;case"defaultValue":z=oe;break;case"multiple":l=oe;default:Lr(e,t,p,oe,r,null)}t=m,r=z,e.multiple=!!l,t!=null?bo(e,!!l,t,!1):r!=null&&bo(e,!!l,r,!0);return;case"textarea":Pi("invalid",e),m=p=l=null;for(z in r)if(r.hasOwnProperty(z)&&(oe=r[z],oe!=null))switch(z){case"value":l=oe;break;case"defaultValue":p=oe;break;case"children":m=oe;break;case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(91));break;default:Lr(e,t,z,oe,r,null)}Da(e,l,p,m);return;case"option":for(ze in r)if(r.hasOwnProperty(ze)&&(l=r[ze],l!=null))switch(ze){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Lr(e,t,ze,l,r,null)}return;case"dialog":Pi("beforetoggle",e),Pi("toggle",e),Pi("cancel",e),Pi("close",e);break;case"iframe":case"object":Pi("load",e);break;case"video":case"audio":for(l=0;l<vd.length;l++)Pi(vd[l],e);break;case"image":Pi("error",e),Pi("load",e);break;case"details":Pi("toggle",e);break;case"embed":case"source":case"link":Pi("error",e),Pi("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in r)if(r.hasOwnProperty(Je)&&(l=r[Je],l!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Lr(e,t,Je,l,r,null)}return;default:if(so(t)){for(ft in r)r.hasOwnProperty(ft)&&(l=r[ft],l!==void 0&&yh(e,t,ft,l,r,void 0));return}}for(oe in r)r.hasOwnProperty(oe)&&(l=r[oe],l!=null&&Lr(e,t,oe,l,r,null))}function V2(e,t,r,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,z=null,oe=null,ze=null,Je=null,ft=null;for(ot in r){var xt=r[ot];if(r.hasOwnProperty(ot)&&xt!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":ze=xt;default:l.hasOwnProperty(ot)||Lr(e,t,ot,null,l,xt)}}for(var et in l){var ot=l[et];if(xt=r[et],l.hasOwnProperty(et)&&(ot!=null||xt!=null))switch(et){case"type":m=ot;break;case"name":p=ot;break;case"checked":Je=ot;break;case"defaultChecked":ft=ot;break;case"value":z=ot;break;case"defaultValue":oe=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(s(137,t));break;default:ot!==xt&&Lr(e,t,et,ot,l,xt)}}gl(e,z,oe,ze,Je,ft,m,p);return;case"select":ot=z=oe=et=null;for(m in r)if(ze=r[m],r.hasOwnProperty(m)&&ze!=null)switch(m){case"value":break;case"multiple":ot=ze;default:l.hasOwnProperty(m)||Lr(e,t,m,null,l,ze)}for(p in l)if(m=l[p],ze=r[p],l.hasOwnProperty(p)&&(m!=null||ze!=null))switch(p){case"value":et=m;break;case"defaultValue":oe=m;break;case"multiple":z=m;default:m!==ze&&Lr(e,t,p,m,l,ze)}t=oe,r=z,l=ot,et!=null?bo(e,!!r,et,!1):!!l!=!!r&&(t!=null?bo(e,!!r,t,!0):bo(e,!!r,r?[]:"",!1));return;case"textarea":ot=et=null;for(oe in r)if(p=r[oe],r.hasOwnProperty(oe)&&p!=null&&!l.hasOwnProperty(oe))switch(oe){case"value":break;case"children":break;default:Lr(e,t,oe,null,l,p)}for(z in l)if(p=l[z],m=r[z],l.hasOwnProperty(z)&&(p!=null||m!=null))switch(z){case"value":et=p;break;case"defaultValue":ot=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==m&&Lr(e,t,z,p,l,m)}Es(e,et,ot);return;case"option":for(var tn in r)if(et=r[tn],r.hasOwnProperty(tn)&&et!=null&&!l.hasOwnProperty(tn))switch(tn){case"selected":e.selected=!1;break;default:Lr(e,t,tn,null,l,et)}for(ze in l)if(et=l[ze],ot=r[ze],l.hasOwnProperty(ze)&&et!==ot&&(et!=null||ot!=null))switch(ze){case"selected":e.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:Lr(e,t,ze,et,l,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qn in r)et=r[qn],r.hasOwnProperty(qn)&&et!=null&&!l.hasOwnProperty(qn)&&Lr(e,t,qn,null,l,et);for(Je in l)if(et=l[Je],ot=r[Je],l.hasOwnProperty(Je)&&et!==ot&&(et!=null||ot!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,t));break;default:Lr(e,t,Je,et,l,ot)}return;default:if(so(t)){for(var zr in r)et=r[zr],r.hasOwnProperty(zr)&&et!==void 0&&!l.hasOwnProperty(zr)&&yh(e,t,zr,void 0,l,et);for(ft in l)et=l[ft],ot=r[ft],!l.hasOwnProperty(ft)||et===ot||et===void 0&&ot===void 0||yh(e,t,ft,et,l,ot);return}}for(var We in r)et=r[We],r.hasOwnProperty(We)&&et!=null&&!l.hasOwnProperty(We)&&Lr(e,t,We,null,l,et);for(xt in l)et=l[xt],ot=r[xt],!l.hasOwnProperty(xt)||et===ot||et==null&&ot==null||Lr(e,t,xt,et,l,ot)}function hg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function W2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var p=r[l],m=p.transferSize,z=p.initiatorType,oe=p.duration;if(m&&oe&&hg(z)){for(z=0,oe=p.responseEnd,l+=1;l<r.length;l++){var ze=r[l],Je=ze.startTime;if(Je>oe)break;var ft=ze.transferSize,xt=ze.initiatorType;ft&&hg(xt)&&(ze=ze.responseEnd,z+=ft*(ze<oe?1:(oe-Je)/(ze-Je)))}if(--l,t+=8*(m+z)/(p.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var mh=null,xh=null;function fp(e){return e.nodeType===9?e:e.ownerDocument}function gg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var vh=null;function Y2(){var e=window.event;return e&&e.type==="popstate"?e===vh?!1:(vh=e,!0):(vh=null,!1)}var mg=typeof setTimeout=="function"?setTimeout:void 0,G2=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,$2=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(e){return xg.resolve(null).then(e).catch(X2)}:mg;function X2(e){setTimeout(function(){throw e})}function ju(e){return e==="head"}function bg(e,t){var r=t,l=0;do{var p=r.nextSibling;if(e.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(l===0){e.removeChild(p),Df(t);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Sd(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Sd(r);for(var m=r.firstChild;m;){var z=m.nextSibling,oe=m.nodeName;m[za]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=z}}else r==="body"&&Sd(e.ownerDocument.body);r=p}while(r);Df(t)}function vg(e,t){var r=e;e=0;do{var l=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=l}while(r)}function wh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":wh(r),ls(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function K2(e,t,r,l){for(;e.nodeType===1;){var p=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[za])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=$l(e.nextSibling),e===null)break}return null}function Z2(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=$l(e.nextSibling),e===null))return null;return e}function wg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=$l(e.nextSibling),e===null))return null;return e}function Sh(e){return e.data==="$?"||e.data==="$~"}function Ch(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function J2(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var l=function(){t(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $l(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Th=null;function Sg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return $l(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function Cg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function Tg(e,t,r){switch(t=fp(r),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ls(e)}var Xl=new Map,jg=new Set;function dp(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zc=te.d;te.d={f:Q2,r:em,D:tm,C:nm,L:im,m:rm,X:am,S:om,M:sm};function Q2(){var e=Zc.f(),t=ip();return e||t}function em(e){var t=Po(e);t!==null&&t.tag===5&&t.type==="form"?Vd(t):Zc.r(e)}var Lf=typeof document>"u"?null:document;function kg(e,t,r){var l=Lf;if(l&&typeof t=="string"&&t){var p=di(t);p='link[rel="'+e+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),jg.has(p)||(jg.add(p),e={rel:e,crossOrigin:r,href:t},l.querySelector(p)===null&&(t=l.createElement("link"),ss(t,"link",e),Ln(t),l.head.appendChild(t)))}}function tm(e){Zc.D(e),kg("dns-prefetch",e,null)}function nm(e,t){Zc.C(e,t),kg("preconnect",e,t)}function im(e,t,r){Zc.L(e,t,r);var l=Lf;if(l&&e&&t){var p='link[rel="preload"][as="'+di(t)+'"]';t==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+di(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+di(r.imageSizes)+'"]')):p+='[href="'+di(e)+'"]';var m=p;switch(t){case"style":m=zf(e);break;case"script":m=Pf(e)}Xl.has(m)||(e=D({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),Xl.set(m,e),l.querySelector(p)!==null||t==="style"&&l.querySelector(Cd(m))||t==="script"&&l.querySelector(Td(m))||(t=l.createElement("link"),ss(t,"link",e),Ln(t),l.head.appendChild(t)))}}function rm(e,t){Zc.m(e,t);var r=Lf;if(r&&e){var l=t&&typeof t.as=="string"?t.as:"script",p='link[rel="modulepreload"][as="'+di(l)+'"][href="'+di(e)+'"]',m=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Pf(e)}if(!Xl.has(m)&&(e=D({rel:"modulepreload",href:e},t),Xl.set(m,e),r.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Td(m)))return}l=r.createElement("link"),ss(l,"link",e),Ln(l),r.head.appendChild(l)}}}function om(e,t,r){Zc.S(e,t,r);var l=Lf;if(l&&e){var p=ea(l).hoistableStyles,m=zf(e);t=t||"default";var z=p.get(m);if(!z){var oe={loading:0,preload:null};if(z=l.querySelector(Cd(m)))oe.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Xl.get(m))&&jh(e,r);var ze=z=l.createElement("link");Ln(ze),ss(ze,"link",e),ze._p=new Promise(function(Je,ft){ze.onload=Je,ze.onerror=ft}),ze.addEventListener("load",function(){oe.loading|=1}),ze.addEventListener("error",function(){oe.loading|=2}),oe.loading|=4,pp(z,t,l)}z={type:"stylesheet",instance:z,count:1,state:oe},p.set(m,z)}}}function am(e,t){Zc.X(e,t);var r=Lf;if(r&&e){var l=ea(r).hoistableScripts,p=Pf(e),m=l.get(p);m||(m=r.querySelector(Td(p)),m||(e=D({src:e,async:!0},t),(t=Xl.get(p))&&kh(e,t),m=r.createElement("script"),Ln(m),ss(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function sm(e,t){Zc.M(e,t);var r=Lf;if(r&&e){var l=ea(r).hoistableScripts,p=Pf(e),m=l.get(p);m||(m=r.querySelector(Td(p)),m||(e=D({src:e,async:!0,type:"module"},t),(t=Xl.get(p))&&kh(e,t),m=r.createElement("script"),Ln(m),ss(m,"link",e),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(p,m))}}function Ag(e,t,r,l){var p=(p=Ae.current)?dp(p):null;if(!p)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=zf(r.href),r=ea(p).hoistableStyles,l=r.get(t),l||(l={type:"style",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=zf(r.href);var m=ea(p).hoistableStyles,z=m.get(e);if(z||(p=p.ownerDocument||p,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,z),(m=p.querySelector(Cd(e)))&&!m._p&&(z.instance=m,z.state.loading=5),Xl.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Xl.set(e,r),m||lm(p,e,r,z.state))),t&&l===null)throw Error(s(528,""));return z}if(t&&l!==null)throw Error(s(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Pf(r),r=ea(p).hoistableScripts,l=r.get(t),l||(l={type:"script",instance:null,count:0,state:null},r.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function zf(e){return'href="'+di(e)+'"'}function Cd(e){return'link[rel="stylesheet"]['+e+"]"}function Ng(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function lm(e,t,r,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ss(t,"link",r),Ln(t),e.head.appendChild(t))}function Pf(e){return'[src="'+di(e)+'"]'}function Td(e){return"script[async]"+e}function _g(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+di(r.href)+'"]');if(l)return t.instance=l,Ln(l),l;var p=D({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ln(l),ss(l,"style",p),pp(l,r.precedence,e),t.instance=l;case"stylesheet":p=zf(r.href);var m=e.querySelector(Cd(p));if(m)return t.state.loading|=4,t.instance=m,Ln(m),m;l=Ng(r),(p=Xl.get(p))&&jh(l,p),m=(e.ownerDocument||e).createElement("link"),Ln(m);var z=m;return z._p=new Promise(function(oe,ze){z.onload=oe,z.onerror=ze}),ss(m,"link",l),t.state.loading|=4,pp(m,r.precedence,e),t.instance=m;case"script":return m=Pf(r.src),(p=e.querySelector(Td(m)))?(t.instance=p,Ln(p),p):(l=r,(p=Xl.get(m))&&(l=D({},r),kh(l,p)),e=e.ownerDocument||e,p=e.createElement("script"),Ln(p),ss(p,"link",l),e.head.appendChild(p),t.instance=p);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,pp(l,r.precedence,e));return t.instance}function pp(e,t,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,m=p,z=0;z<l.length;z++){var oe=l[z];if(oe.dataset.precedence===t)m=oe;else if(m!==p)break}m?m.parentNode.insertBefore(e,m.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function jh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function kh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var hp=null;function Lg(e,t,r){if(hp===null){var l=new Map,p=hp=new Map;p.set(r,l)}else p=hp,l=p.get(r),l||(l=new Map,p.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),p=0;p<r.length;p++){var m=r[p];if(!(m[za]||m[vi]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var z=m.getAttribute(t)||"";z=e+z;var oe=l.get(z);oe?oe.push(m):l.set(z,[m])}}return l}function zg(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function cm(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Pg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function um(e,t,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=zf(l.href),m=t.querySelector(Cd(p));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=gp.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=m,Ln(m);return}m=t.ownerDocument||t,l=Ng(l),(p=Xl.get(p))&&jh(l,p),m=m.createElement("link"),Ln(m);var z=m;z._p=new Promise(function(oe,ze){z.onload=oe,z.onerror=ze}),ss(m,"link",l),r.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=gp.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var Ah=0;function fm(e,t){return e.stylesheets&&e.count===0&&mp(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var l=setTimeout(function(){if(e.stylesheets&&mp(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+t);0<e.imgBytes&&Ah===0&&(Ah=62500*W2());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&mp(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Ah?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(p)}}:null}function gp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yp=null;function mp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yp=new Map,t.forEach(dm,e),yp=null,gp.call(e))}function dm(e,t){if(!(t.state.loading&4)){var r=yp.get(e);if(r)var l=r.get(null);else{r=new Map,yp.set(e,r);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var z=p[m];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(r.set(z.dataset.precedence,z),l=z)}l&&r.set(null,l)}p=t.instance,z=p.getAttribute("data-precedence"),m=r.get(z)||l,m===l&&r.set(null,p),r.set(z,p),this.count++,l=gp.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),m?m.parentNode.insertBefore(p,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),t.state.loading|=4}}var jd={$$typeof:ce,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function pm(e,t,r,l,p,m,z,oe,ze){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.hiddenUpdates=Lo(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function Dg(e,t,r,l,p,m,z,oe,ze,Je,ft,xt){return e=new pm(e,t,r,z,ze,Je,ft,xt,oe),t=1,m===!0&&(t|=24),m=Wo(3,null,null,t),e.current=m,m.stateNode=e,t=$o(),t.refCount++,e.pooledCache=t,t.refCount++,m.memoizedState={element:l,isDehydrated:r,cache:t},Dt(m),e}function Eg(e){return e?(e=Co,e):Co}function Rg(e,t,r,l,p,m){p=Eg(p),l.context===null?l.context=p:l.pendingContext=p,l=gn(t),l.payload={element:r},m=m===void 0?null:m,m!==null&&(l.callback=m),r=kn(e,l,t),r!==null&&(fl(r,e,t),ei(r,e,t))}function Mg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Nh(e,t){Mg(e,t),(e=e.alternate)&&Mg(e,t)}function Bg(e){if(e.tag===13||e.tag===31){var t=ms(e,67108864);t!==null&&fl(t,e,67108864),Nh(e,67108864)}}function Og(e){if(e.tag===13||e.tag===31){var t=Dl();t=ui(t);var r=ms(e,t);r!==null&&fl(r,e,t),Nh(e,t)}}var xp=!0;function hm(e,t,r,l){var p=K.T;K.T=null;var m=te.p;try{te.p=2,_h(e,t,r,l)}finally{te.p=m,K.T=p}}function gm(e,t,r,l){var p=K.T;K.T=null;var m=te.p;try{te.p=8,_h(e,t,r,l)}finally{te.p=m,K.T=p}}function _h(e,t,r,l){if(xp){var p=Lh(l);if(p===null)gh(e,t,l,bp,r),Ug(e,l);else if(mm(p,e,t,r,l))l.stopPropagation();else if(Ug(e,l),t&4&&-1<ym.indexOf(e)){for(;p!==null;){var m=Po(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var z=cn(m.pendingLanes);if(z!==0){var oe=m;for(oe.pendingLanes|=2,oe.entangledLanes|=2;z;){var ze=1<<31-at(z);oe.entanglements[1]|=ze,z&=~ze}Lc(m),(ai&6)===0&&(tp=Wn()+500,bd(0))}}break;case 31:case 13:oe=ms(m,2),oe!==null&&fl(oe,m,2),ip(),Nh(m,2)}if(m=Lh(l),m===null&&gh(e,t,l,bp,r),m===p)break;p=m}p!==null&&l.stopPropagation()}else gh(e,t,l,null,r)}}function Lh(e){return e=Wi(e),zh(e)}var bp=null;function zh(e){if(bp=null,e=Yn(e),e!==null){var t=f(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=v(t),e!==null)return e;e=null}else if(r===31){if(e=h(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bp=e,null}function Ig(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kt()){case Pt:return 2;case fi:return 8;case ut:case Ct:return 32;case Mn:return 268435456;default:return 32}default:return 32}}var Ph=!1,ku=null,Au=null,Nu=null,kd=new Map,Ad=new Map,_u=[],ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ug(e,t){switch(e){case"focusin":case"focusout":ku=null;break;case"dragenter":case"dragleave":Au=null;break;case"mouseover":case"mouseout":Nu=null;break;case"pointerover":case"pointerout":kd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ad.delete(t.pointerId)}}function Nd(e,t,r,l,p,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:r,eventSystemFlags:l,nativeEvent:m,targetContainers:[p]},t!==null&&(t=Po(t),t!==null&&Bg(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,p!==null&&t.indexOf(p)===-1&&t.push(p),e)}function mm(e,t,r,l,p){switch(t){case"focusin":return ku=Nd(ku,e,t,r,l,p),!0;case"dragenter":return Au=Nd(Au,e,t,r,l,p),!0;case"mouseover":return Nu=Nd(Nu,e,t,r,l,p),!0;case"pointerover":var m=p.pointerId;return kd.set(m,Nd(kd.get(m)||null,e,t,r,l,p)),!0;case"gotpointercapture":return m=p.pointerId,Ad.set(m,Nd(Ad.get(m)||null,e,t,r,l,p)),!0}return!1}function Fg(e){var t=Yn(e.target);if(t!==null){var r=f(t);if(r!==null){if(t=r.tag,t===13){if(t=v(r),t!==null){e.blockedOn=t,Hi(e.priority,function(){Og(r)});return}}else if(t===31){if(t=h(r),t!==null){e.blockedOn=t,Hi(e.priority,function(){Og(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Lh(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);nr=l,r.target.dispatchEvent(l),nr=null}else return t=Po(r),t!==null&&Bg(t),e.blockedOn=r,!1;t.shift()}return!0}function qg(e,t,r){vp(e)&&r.delete(t)}function xm(){Ph=!1,ku!==null&&vp(ku)&&(ku=null),Au!==null&&vp(Au)&&(Au=null),Nu!==null&&vp(Nu)&&(Nu=null),kd.forEach(qg),Ad.forEach(qg)}function wp(e,t){e.blockedOn===t&&(e.blockedOn=null,Ph||(Ph=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,xm)))}var Sp=null;function Hg(e){Sp!==e&&(Sp=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sp===e&&(Sp=null);for(var t=0;t<e.length;t+=3){var r=e[t],l=e[t+1],p=e[t+2];if(typeof l!="function"){if(zh(l||r)===null)continue;break}var m=Po(r);m!==null&&(e.splice(t,3),t-=3,mf(m,{pending:!0,data:p,method:r.method,action:l},l,p))}}))}function Df(e){function t(ze){return wp(ze,e)}ku!==null&&wp(ku,e),Au!==null&&wp(Au,e),Nu!==null&&wp(Nu,e),kd.forEach(t),Ad.forEach(t);for(var r=0;r<_u.length;r++){var l=_u[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<_u.length&&(r=_u[0],r.blockedOn===null);)Fg(r),r.blockedOn===null&&_u.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var p=r[l],m=r[l+1],z=p[yi]||null;if(typeof m=="function")z||Hg(r);else if(z){var oe=null;if(m&&m.hasAttribute("formAction")){if(p=m,z=m[yi]||null)oe=z.formAction;else if(zh(p)!==null)continue}else oe=z.action;typeof oe=="function"?r[l+1]=oe:(r.splice(l,3),l-=3),Hg(r)}}}function Vg(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(z){return p=z})},focusReset:"manual",scroll:"manual"})}function t(){p!==null&&(p(),p=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),p!==null&&(p(),p=null)}}}function Dh(e){this._internalRoot=e}Cp.prototype.render=Dh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var r=t.current,l=Dl();Rg(r,l,e,t,null,null)},Cp.prototype.unmount=Dh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rg(e.current,2,null,e,null,null),ip(),t[mo]=null}};function Cp(e){this._internalRoot=e}Cp.prototype.unstable_scheduleHydration=function(e){if(e){var t=ur();e={blockedOn:null,target:e,priority:t};for(var r=0;r<_u.length&&t!==0&&t<_u[r].priority;r++);_u.splice(r,0,e),r===0&&Fg(e)}};var Wg=i.version;if(Wg!=="19.2.0")throw Error(s(527,Wg,"19.2.0"));te.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=x(t),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var bm={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tp.isDisabled&&Tp.supportsFiber)try{Nn=Tp.inject(bm),en=Tp}catch{}}return Ld.createRoot=function(e,t){if(!u(e))throw Error(s(299));var r=!1,l="",p=du,m=bf,z=vf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(p=t.onUncaughtError),t.onCaughtError!==void 0&&(m=t.onCaughtError),t.onRecoverableError!==void 0&&(z=t.onRecoverableError)),t=Dg(e,1,!1,null,null,r,l,null,p,m,z,Vg),e[mo]=t.current,hh(e),new Dh(t)},Ld.hydrateRoot=function(e,t,r){if(!u(e))throw Error(s(299));var l=!1,p="",m=du,z=bf,oe=vf,ze=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(z=r.onCaughtError),r.onRecoverableError!==void 0&&(oe=r.onRecoverableError),r.formState!==void 0&&(ze=r.formState)),t=Dg(e,1,!0,t,r??null,l,p,ze,m,z,oe,Vg),t.context=Eg(null),r=t.current,l=Dl(),l=ui(l),p=gn(l),p.callback=null,kn(r,p,l),r=l,t.current.lanes=r,Vt(t,r),Lc(t),e[mo]=t.current,hh(e),new Cp(t)},Ld.version="19.2.0",Ld}var t1;function Lm(){if(t1)return Mh.exports;t1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),Mh.exports=_m(),Mh.exports}var zm=Lm();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dm=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,o,s)=>s?s.toUpperCase():o.toLowerCase()),n1=n=>{const i=Dm(n);return i.charAt(0).toUpperCase()+i.slice(1)},Ny=(...n)=>n.filter((i,o,s)=>!!i&&i.trim()!==""&&s.indexOf(i)===o).join(" ").trim(),Em=n=>{for(const i in n)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=U.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:u="",children:f,iconNode:v,...h},b)=>U.createElement("svg",{ref:b,...Rm,width:i,height:i,stroke:n,strokeWidth:s?Number(o)*24/Number(i):o,className:Ny("lucide",u),...!f&&!Em(h)&&{"aria-hidden":"true"},...h},[...v.map(([x,T])=>U.createElement(x,T)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=(n,i)=>{const o=U.forwardRef(({className:s,...u},f)=>U.createElement(Mm,{ref:f,iconNode:i,className:Ny(`lucide-${Pm(n1(n))}`,`lucide-${n}`,s),...u}));return o.displayName=n1(n),o};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Om=_y("mouse-pointer",Bm);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Um=_y("pen-line",Im),Fm=JSON.parse('[{"category":"Capacitors","subcategory":"General","type":"Capacitor","displayName":"Capacitor","description":"General purpose capacitor","searchText":"capacitor general","designators":["C"],"defaultPins":2,"properties":{"capacitorType":"General"},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"dielectric","label":"Dielectric","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Electrolytic","type":"Capacitor","displayName":"Electrolytic","description":"Electrolytic capacitor","searchText":"electrolytic capacitor","designators":["CE"],"defaultPins":2,"properties":{"capacitorType":"Electrolytic","polarized":true},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"20%","required":false},{"name":"polarized","label":"Polarized","type":"boolean","required":false},{"name":"esr","label":"ESR","type":"number","units":["m",""],"defaultUnit":"","required":false},{"name":"temperature","label":"Temperature Range","type":"string","required":false},{"name":"ripple","label":"Ripple Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"leakageCurrent","label":"Leakage Current","type":"number","units":["A","mA"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Film","type":"Capacitor","displayName":"Film","description":"Film capacitor","searchText":"film capacitor","designators":["CF"],"defaultPins":2,"properties":{"capacitorType":"Film"},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"nF","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"10%","required":false},{"name":"filmType","label":"Film Type","type":"enum","enumValues":["Polyester","Polypropylene","Polyethylene","Polystyrene","Teflon"],"defaultValue":"Polyester","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Capacitors","subcategory":"Tantalum","type":"Capacitor","displayName":"Tantalum","description":"Tantalum capacitor","searchText":"tantalum capacitor","designators":["C"],"defaultPins":2,"properties":{"capacitorType":"Tantalum","dielectric":"Tantalum","polarized":true},"fields":[{"name":"capacitance","label":"Capacitance","type":"number","units":["pF","nF","F","mF","F"],"defaultUnit":"F","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"polarized","label":"Polarized","type":"boolean","required":false},{"name":"esr","label":"ESR","type":"number","units":["m",""],"defaultUnit":"","required":false},{"name":"leakageCurrent","label":"Leakage Current","type":"number","units":["A","mA"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Diodes","subcategory":"Standard","type":"Diode","displayName":"Diode","description":"Standard diode","searchText":"diode standard","designators":["D"],"defaultPins":2,"subtype":"Standard","properties":{"diodeType":"Standard","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Zener","type":"Diode","displayName":"Zener","description":"Zener diode","searchText":"zener diode","designators":["Z"],"defaultPins":2,"subtype":"Zener","properties":{"diodeType":"Zener","polarized":true},"fields":[{"name":"voltage","label":"Zener Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"mA","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"LED","type":"Diode","displayName":"LED","description":"LED diode","searchText":"led diode","designators":["LED"],"defaultPins":2,"subtype":"LED","properties":{"diodeType":"LED","polarized":true},"fields":[{"name":"voltage","label":"Forward Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Forward Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"ledColor","label":"Color","type":"string","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Schottky","type":"Diode","displayName":"Schottky","description":"Schottky diode","searchText":"schottky diode","designators":["D"],"defaultPins":2,"subtype":"Schottky","properties":{"diodeType":"Schottky","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Infrared","type":"Diode","displayName":"Infrared","description":"Infrared diode","searchText":"infrared diode","designators":["IR"],"defaultPins":2,"subtype":"Infrared","properties":{"diodeType":"Infrared","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["mA","A"],"defaultUnit":"mA","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Diodes","subcategory":"Photodiode","type":"Diode","displayName":"Photodiode","description":"Photodiode","searchText":"photodiode diode","designators":["PD"],"defaultPins":2,"subtype":"Photodiode","properties":{"diodeType":"Photodiode","polarized":true},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"wavelength","label":"Wavelength","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Resistors","subcategory":"Standard","type":"Resistor","displayName":"Resistor","description":"Standard resistor","searchText":"resistor standard","designators":["R"],"defaultPins":2,"properties":{"resistorType":"Standard"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"tolerance","label":"Tolerance","type":"string","defaultValue":"5%","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Network","type":"Resistor","displayName":"Resistor Network","description":"Resistor network","searchText":"resistor network","designators":["RN"],"defaultPins":8,"properties":{"resistorType":"Network"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"configuration","label":"Configuration","type":"enum","enumValues":["Isolated","Bussed","Dual Terminator"],"defaultValue":"Isolated","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Thermistor","type":"Resistor","displayName":"Thermistor","description":"Thermistor resistor","searchText":"thermistor resistor","designators":["RT"],"defaultPins":2,"properties":{"resistorType":"Thermistor"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"thermistorType","label":"Thermistor Type","type":"enum","enumValues":["NTC","PTC"],"defaultValue":"NTC","required":false},{"name":"beta","label":"Beta Value","type":"number","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Resistors","subcategory":"Variable","type":"Resistor","displayName":"Variable Resistor","description":"Variable resistor","searchText":"variable resistor","designators":["VR"],"defaultPins":3,"subtype":"Potentiometer","properties":{"resistorType":"Variable","vrType":"Potentiometer"},"fields":[{"name":"resistance","label":"Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"taper","label":"Taper","type":"enum","enumValues":["Linear","Logarithmic"],"defaultValue":"Linear","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Resistors","subcategory":"Varistor","type":"Resistor","displayName":"Varistor","description":"Varistor resistor","searchText":"varistor resistor","designators":["RV"],"defaultPins":3,"subtype":"Varistor","properties":{"resistorType":"Variable","vrType":"Varistor"},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"Transistor","type":"Semiconductor","displayName":"Transistor","description":"Transistor","searchText":"transistor","designators":["Q"],"defaultPins":3,"properties":{"semiconductorType":"Transistor"},"fields":[{"name":"transistorType","label":"Transistor Type","type":"enum","enumValues":["BJT","FET","MOSFET","JFET"],"defaultValue":"BJT","required":false},{"name":"polarized","label":"Polarized","type":"boolean","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Semiconductors","subcategory":"Integrated Circuit","type":"Semiconductor","displayName":"Integrated Circuit","description":"Integrated circuit","searchText":"integrated circuit semiconductor ic","designators":["U"],"defaultPins":8,"properties":{"semiconductorType":"IntegratedCircuit"},"fields":[{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"icType","label":"IC Type","type":"string","required":false},{"name":"packageType","label":"Package Type","type":"enum","enumValues":["DIP","SOIC","QFP","BGA","TQFP","SSOP","TSOP"],"required":false},{"name":"description","label":"Description","type":"string","required":false},{"name":"datasheet","label":"Datasheet URL","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Passive Components","subcategory":"Inductor","type":"Inductor","displayName":"Inductor","description":"Inductor","searchText":"inductor","designators":["L"],"defaultPins":2,"properties":{"passiveType":"Inductor"},"fields":[{"name":"inductance","label":"Inductance","type":"number","units":["nH","H","mH","H"],"defaultUnit":"H","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"resistance","label":"DC Resistance","type":"number","units":["","m","k","M"],"defaultUnit":"","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Passive Components","subcategory":"Ferrite Bead","type":"FerriteBead","displayName":"Ferrite Bead","description":"Ferrite bead","searchText":"ferrite bead passive","designators":["FB"],"defaultPins":2,"properties":{"passiveType":"FerriteBead"},"fields":[{"name":"impedance","label":"Impedance","type":"number","units":["","m","k"],"defaultUnit":"","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Passive Components","subcategory":"Crystal","type":"Crystal","displayName":"Crystal","description":"Crystal oscillator","searchText":"crystal oscillator passive","designators":["X"],"defaultPins":2,"properties":{"passiveType":"Crystal"},"fields":[{"name":"frequency","label":"Frequency","type":"string","required":false},{"name":"loadCapacitance","label":"Load Capacitance","type":"string","required":false},{"name":"tolerance","label":"Tolerance","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Battery","type":"PowerEnergy","displayName":"Battery","description":"Battery or battery holder","searchText":"battery power energy","designators":["B"],"defaultPins":2,"properties":{"powerType":"Battery"},"fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"capacity","label":"Capacity","type":"number","units":["mAh","Ah"],"defaultUnit":"mAh","required":false},{"name":"chemistry","label":"Chemistry","type":"enum","enumValues":["Li-ion","Alkaline","NiMH","NiCd","Lead-acid"],"required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Power Supply","type":"PowerEnergy","displayName":"Power Supply","description":"Power supply","searchText":"power supply energy","designators":["PS"],"defaultPins":4,"properties":{"powerType":"PowerSupply"},"fields":[{"name":"inputVoltage","label":"Input Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"outputVoltage","label":"Output Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"efficiency","label":"Efficiency","type":"number","required":false},{"name":"ripple","label":"Ripple","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Power & Energy","subcategory":"Fuse","type":"PowerEnergy","displayName":"Fuse","description":"Fuse","searchText":"fuse power energy","designators":["F"],"defaultPins":2,"properties":{"powerType":"Fuse"},"fields":[{"name":"current","label":"Current Rating","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"voltage","label":"Voltage Rating","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"fuseType","label":"Fuse Type","type":"enum","enumValues":["Fast-blow","Slow-blow","Time-delay"],"defaultValue":"Fast-blow","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"operatingTemperature","label":"Operating Temp","type":"string","required":false}]},{"category":"Connectors & Switches","subcategory":"Connector","type":"Connector","displayName":"Connector","description":"Connector","searchText":"connector","designators":["J"],"defaultPins":4,"properties":{"connectorType":"Connector"},"fields":[{"name":"connectorType","label":"Connector Type","type":"string","required":false},{"name":"gender","label":"Gender","type":"enum","enumValues":["Male","Female","N/A"],"defaultValue":"N/A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Jumper","type":"Jumper","displayName":"Jumper","description":"Jumper link","searchText":"jumper link","designators":["JP"],"defaultPins":3,"properties":{"connectorType":"Jumper"},"fields":[{"name":"positions","label":"Positions","type":"number","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Switch","type":"Switch","displayName":"Switch","description":"Switch","searchText":"switch","designators":["S"],"defaultPins":2,"properties":{"switchType":"Switch"},"fields":[{"name":"switchType","label":"Switch Type","type":"string","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Connectors & Switches","subcategory":"Relay","type":"Relay","displayName":"Relay","description":"Relay or contactor","searchText":"relay contactor","designators":["K"],"defaultPins":5,"properties":{"switchType":"Relay"},"fields":[{"name":"coilVoltage","label":"Coil Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"contactType","label":"Contact Type","type":"string","required":false},{"name":"current","label":"Contact Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false},{"name":"mountingType","label":"Mounting Type","type":"enum","enumValues":["Through-hole","SMD","Surface mount"],"required":false}]},{"category":"Other","subcategory":"Transformer","type":"Transformer","displayName":"Transformer","description":"Transformer","searchText":"transformer","designators":["TR"],"defaultPins":4,"fields":[{"name":"primaryVoltage","label":"Primary Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"secondaryVoltage","label":"Secondary Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"turns","label":"Turns Ratio","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Speaker","type":"Speaker","displayName":"Speaker","description":"Loudspeaker or buzzer","searchText":"speaker loudspeaker buzzer","designators":["LS"],"defaultPins":2,"fields":[{"name":"impedance","label":"Impedance","type":"number","units":["","m","k"],"defaultUnit":"","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Motor","type":"Motor","displayName":"Motor","description":"Motor","searchText":"motor","designators":["M"],"defaultPins":2,"fields":[{"name":"motorType","label":"Motor Type","type":"string","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Test Point","type":"TestPoint","displayName":"Test Point","description":"Test point","searchText":"test point","designators":["TP"],"defaultPins":1,"fields":[{"name":"signal","label":"Signal","type":"string","required":false}]},{"category":"Other","subcategory":"Vacuum Tube","type":"VacuumTube","displayName":"Vacuum Tube","description":"Vacuum tube","searchText":"vacuum tube","designators":["V"],"defaultPins":5,"fields":[{"name":"tubeType","label":"Tube Type","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Attenuator","type":"GenericComponent","displayName":"Attenuator","description":"Attenuator or isolator","searchText":"attenuator isolator component","designators":["AT"],"defaultPins":2,"subtype":"Attenuator","fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Circuit Breaker","type":"GenericComponent","displayName":"Circuit Breaker","description":"Circuit breaker","searchText":"circuit breaker component","designators":["CB"],"defaultPins":2,"subtype":"CircuitBreaker","fields":[{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"current","label":"Current","type":"number","units":["A","mA","A"],"defaultUnit":"A","required":false},{"name":"power","label":"Power","type":"number","units":["W","mW","kW"],"defaultUnit":"W","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Thermocouple","type":"GenericComponent","displayName":"Thermocouple","description":"Thermocouple","searchText":"thermocouple component","designators":["TC"],"defaultPins":2,"subtype":"Thermocouple","fields":[{"name":"model","label":"Model","type":"string","required":false},{"name":"voltage","label":"Voltage","type":"number","units":["mV","V","kV"],"defaultUnit":"V","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]},{"category":"Other","subcategory":"Tuner","type":"GenericComponent","displayName":"Tuner","description":"Tuner","searchText":"tuner component","designators":["TUN"],"defaultPins":2,"subtype":"Tuner","fields":[{"name":"frequency","label":"Frequency","type":"string","required":false},{"name":"partNumber","label":"Part Number","type":"string","required":false},{"name":"manufacturer","label":"Manufacturer","type":"string","required":false}]}]'),Ud={components:Fm},qm=["#FFFFFF","#BFBFBF","#7F7F7F","#3C3C3C","#000000","#A6CEE3","#56B4E9","#17BECF","#00BFC4","#1F77B4","#0072B2","#332288","#B2DF8A","#B3DE69","#2CA02C","#009E73","#FFED6F","#F0E442","#BCBD22","#E69F00","#FF7F0E","#FB9A99","#F781BF","#E15759","#D62728","#CAB2D6","#CC79A7","#AA4499","#6A3D9A","#9467BD","#9C755F","#8C564B"],Uh="#2CA02C",Hm="#F0E442",Vm="#00BFC4",Fh="#000000",Wm="#00008b",qh="#FF0000",$p={DEFAULT_SIZE:18},Rd={};Ud.components.forEach(n=>{if(!Rd[n.type])Rd[n.type]={prefix:n.designators,defaultPins:n.defaultPins};else{const i=Rd[n.type],o=[...new Set([...i.prefix,...n.designators])];Rd[n.type]={prefix:o,defaultPins:i.defaultPins}}});const of=Rd,ef={};Ud.components.forEach(n=>{if(ef[n.category]||(ef[n.category]={}),!ef[n.category][n.subcategory])ef[n.category][n.subcategory]=[n.type];else{const i=ef[n.category][n.subcategory];i.includes(n.type)||(ef[n.category][n.subcategory]=[...i,n.type])}});const Ym=ef,Hh={DEFAULT_SIZE:18},Gm={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function hi(n){return Gm[n]?.defaultUnit||""}function dl(n){return n.includes(" ")?n:n.replace(/([a-z])([A-Z])/g,"$1 $2")}const Na=Math.PI*2;function Ly(n){return(n%360+360)%360}function tu(n){return n*Math.PI/180}function $m(n){return n*180/Math.PI}function m0(n,i){return Ly(n+i)}function Hp(n){return Math.tan(n)}function Xm(n){return Math.cos(n)}function Km(n){return Math.sin(n)}function Zm(n,i){return Math.atan2(n,i)}function Jm(n,i){return $m(Zm(i,n))}function x0(n,i){const{x:o,y:s,rotation:u=0,scale:f=1,flipX:v=!1,flipY:h=!1,skewX:b=0,skewY:x=0}=i;if(n.translate(o,s),u!==0&&n.rotate(tu(u)),b!==0||x!==0){const R=Hp(b),C=Hp(x);n.transform(1,C,R,1,0,0)}const T=f*(v?-1:1),D=f*(h?-1:1);(T!==1||D!==1)&&n.scale(T,D)}function i1(n,i,o,s=0,u=!1,f=!1){x0(n,{x:i,y:o,rotation:s,flipX:u,flipY:f})}function zy(n,i,o){const s=tu(o),u=Xm(s),f=Km(s);return{x:n*u-i*f,y:n*f+i*u}}function Qm(n,i=0,o=!1){o&&n.scale(-1,1),i!==0&&n.rotate(tu(i))}function ex(n,i=0,o=!1){const s=Ly(i),u=s===90||s===270;o&&n.scale(-1,1),i!==0&&n.rotate(tu(-i)),o&&u&&n.rotate(tu(180))}function r1(n,i,o,s=0,u=!1){let f=n/o,v=i/o;if(s!==0){const h=zy(f,v,-s);f=h.x,v=h.y}return u&&(f=-f),{x:f,y:v}}function zd(n,i,o,s,u=0,f=!1){let v=n-o.x,h=i-o.y;if(v=v/s,h=h/s,f&&(v=-v),u!==0){const b=zy(v,h,-u);v=b.x,h=b.y}return{x:v,y:h}}function tx(n,i=.4){if(n.startsWith("#")){const s=n.slice(1),u=parseInt(s.slice(0,2),16),f=parseInt(s.slice(2,4),16),v=parseInt(s.slice(4,6),16),h=Math.max(0,Math.floor(u*(1-i))),b=Math.max(0,Math.floor(f*(1-i))),x=Math.max(0,Math.floor(v*(1-i)));return`#${h.toString(16).padStart(2,"0")}${b.toString(16).padStart(2,"0")}${x.toString(16).padStart(2,"0")}`}const o=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(o){const s=parseInt(o[1],10),u=parseInt(o[2],10),f=parseInt(o[3],10),v=o[4]?o[4].trim():"",h=Math.max(0,Math.floor(s*(1-i))),b=Math.max(0,Math.floor(u*(1-i))),x=Math.max(0,Math.floor(f*(1-i)));return n.includes("rgba")?`rgba(${h}, ${b}, ${x}${v?`, ${v}`:", 1"})`:`rgb(${h}, ${b}, ${x})`}return n}let Xs=1;const Zl=new Set;function cc(){const n=Xs;if(Xs++,Zl.has(n)){for(console.error(`CRITICAL ERROR: Duplicate Node ID ${n} would be allocated!`),console.error(`Current counter: ${Xs}, Allocated IDs count: ${Zl.size}`);Zl.has(Xs);)Xs++;const i=Xs;return Xs++,Zl.add(i),console.error(`Recovered by allocating ID ${i} instead`),i}return Zl.add(n),n}function Vh(n){n<1&&(console.warn(`setPointIdCounter called with invalid value ${n}, using 1`),n=1),Xs=n,Zl.clear()}function o1(){return Xs}function a1(){Xs=1,Zl.clear()}function Wh(n){n>0&&(Zl.add(n),n>=Xs&&(Xs=n+1))}function jp(n){if(n>0&&Zl.has(n))if(Zl.delete(n),Zl.size>0){const i=Math.max(...Array.from(Zl));i<Xs&&(Xs=Math.max(1,i+1))}else Xs=1}function Py(n="id"){return`${n}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function s1(n){return Math.round(n*1e4)/1e4}function $i(n){return{x:s1(n.x),y:s1(n.y)}}function nx(n){return of[n]?.defaultPins||2}function Dy(n){return(of[n]?.prefix||["?"])[0]}function Yh(n,i,o,s,u,f=void 0,v=[],h=Mp(),b=!0,x){const T=f!==void 0&&f>0?f:$p.DEFAULT_SIZE;let D="";if(b){const O=x?.designator||Dy(n),P=rx(O,v,h);D=`${O}${P}`}const R={id:Py("comp"),componentType:n,designator:D,layer:i,x:o,y:s,color:u,size:T,pinCount:nx(n),pinConnections:[],orientation:0,flipX:!1,flipY:!1};if(x?.componentDefinition){const O=x.componentDefinition,P=`${O.category}:${O.subcategory}:${O.type}`;R.componentDefinitionKey=P}R.pinConnections=new Array(R.pinCount).fill(""),(x?.componentDefinition?.properties?.polarized!==void 0?x.componentDefinition.properties.polarized:n==="Electrolytic Capacitor"||n==="Diode"||n==="Battery")&&(R.pinPolarities=new Array(R.pinCount).fill(""));const Z=x?.componentDefinition;switch(Z?.properties&&Object.assign(R,Z.properties),Z?.fields&&Z.fields.forEach(O=>{O.defaultValue!==void 0&&O.defaultValue!==""&&(R[O.name]=O.defaultValue),O.units&&O.defaultUnit&&(R[`${O.name}Unit`]=O.defaultUnit)}),n){case"Battery":return{...R,componentType:"Battery"};case"Capacitor":return{...R,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...R,componentType:"Electrolytic Capacitor",polarized:!0};case"Film Capacitor":return{...R,componentType:"Film Capacitor",filmType:"Polyester"};case"Diode":{const O=x?.subtype==="LED"?"LED":x?.subtype==="Infrared"?"Infrared":x?.subtype==="Photodiode"?"Photodiode":x?.subtype==="Schottky"?"Schottky":x?.subtype==="Zener"?"Zener":"Standard";return{...R,componentType:"Diode",diodeType:O}}case"Fuse":return{...R,componentType:"Fuse"};case"FerriteBead":return{...R,componentType:"FerriteBead"};case"Connector":return{...R,componentType:"Connector",gender:"N/A"};case"Jumper":return{...R,componentType:"Jumper"};case"Relay":return{...R,componentType:"Relay"};case"Inductor":return{...R,componentType:"Inductor"};case"Speaker":return{...R,componentType:"Speaker"};case"Motor":return{...R,componentType:"Motor"};case"PowerSupply":return{...R,componentType:"PowerSupply"};case"Transistor":return{...R,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...R,componentType:"Resistor"};case"ResistorNetwork":return{...R,componentType:"ResistorNetwork"};case"Thermistor":return{...R,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...R,componentType:"Switch"};case"Transformer":return{...R,componentType:"Transformer"};case"TestPoint":return{...R,componentType:"TestPoint"};case"IntegratedCircuit":return{...R,componentType:"IntegratedCircuit"};case"VacuumTube":return{...R,componentType:"VacuumTube"};case"VariableResistor":{const O=x?.subtype==="Varistor"?"Varistor":x?.subtype==="VoltageRegulator"?"VoltageRegulator":"Potentiometer";return{...R,componentType:"VariableResistor",vrType:O}}case"Crystal":return{...R,componentType:"Crystal"};case"GenericComponent":{let O="Attenuator";return x?.subtype?O=x.subtype:D&&(D.startsWith("AT")?O="Attenuator":D.startsWith("CB")?O="CircuitBreaker":D.startsWith("TC")?O="Thermocouple":D.startsWith("TUN")&&(O="Tuner")),{...R,componentType:"GenericComponent",genericType:O}}default:return console.warn(`Unknown component type: ${n}, defaulting to Resistor`),{...R,componentType:"Resistor"}}}function b0(n,i,o){const s=n.componentType==="Electrolytic Capacitor"||n.componentType==="Diode"||n.componentType==="Battery",u=n.componentType==="Capacitor"&&"dielectric"in n&&n.dielectric==="Tantalum";if(!(s||u)||n.pinCount!==2||!(i.length===2&&i[0]&&i[0].trim()!==""&&i[1]&&i[1].trim()!==""))return null;const v=R=>{const C=parseInt(R,10);if(isNaN(C))return null;for(const Z of o)if((Z.type==="via"||Z.type==="pad")&&Z.points.length>0){const O=Z.points[0];if(O.id===C)return{x:O.x,y:O.y}}return null},h=v(i[0]),b=v(i[1]);if(!h||!b)return null;const x=Math.hypot(n.x-h.x,n.y-h.y),T=Math.hypot(n.x-b.x,n.y-b.y),D=["",""];return x<T?(D[0]="-",D[1]="+"):(D[0]="+",D[1]="-"),D}function Mp(){return{}}function ix(n){}function rx(n,i,o){let s=0;for(const f of i)if(f.designator){const v=f.designator.match(new RegExp(`^${n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(v){const h=parseInt(v[1],10);h>s&&(s=h)}}const u=o[n]||0;return Math.max(s,u)+1}function ox(n,i,o){const s={...o};return s[n]=Math.max(s[n]||0,i),s}function ax(n){if(n.designators&&n.designators.length>0)return n.designators[0];switch(n.baseType){case"Capacitor":return"C";case"Diode":return"D";case"Resistor":return"R";case"Semiconductor":return"Q";case"Passive":return"L";case"PowerEnergy":return"PS";case"Connector":return"J";case"Switch":return"S";case"Transformer":return"T";case"Other":default:return"?"}}function sx(n,i,o){let s=0;for(const v of i){if(!v.designator||!v.designator.startsWith(n))continue;const h=parseInt(v.designator.slice(n.length),10);!isNaN(h)&&h>s&&(s=h)}const f=(o[n]??s)+1;return o[n]=f,f}function lx(n,i,o){const s=ax(n),u=sx(s,i,o);return`${s}${u}`}function cx(n){const{definition:i,layer:o,x:s,y:u,color:f,size:v,designator:h,existingComponents:b=[],counters:x={}}=n,T=v&&v>0?v:$p.DEFAULT_SIZE,D=h||lx(i,b,x),R={id:Py("comp"),componentType:i.type,designator:D,layer:o,x:s,y:u,color:f,size:T,pinCount:i.defaultPins,pinConnections:new Array(i.defaultPins).fill(""),pinPolarities:void 0,notes:null,orientation:0,flipX:!1,flipY:!1,description:i.description};return R.componentDefinitionKey=i.key,i.properties&&Object.assign(R,i.properties),i.fields&&i.fields.length>0&&i.fields.forEach(C=>{C.defaultValue!==void 0&&C.defaultValue!==""&&(R[C.name]=C.defaultValue),C.units&&C.defaultUnit&&(R[`${C.name}Unit`]=C.defaultUnit)}),R}function ux(n){if(n.baseType)return n.baseType;switch(n.category){case"Capacitors":return"Capacitor";case"Diodes":return"Diode";case"Resistors":return"Resistor";case"Semiconductors":return"Semiconductor";case"Passive Components":return"Passive";case"Power & Energy":return"PowerEnergy";case"Connectors & Switches":return n.type==="Switch"||n.subcategory==="Switch"?"Switch":"Connector";case"Other":return n.type==="Transformer"?"Transformer":"Other";default:return"Other"}}const fx=Ud.components,dx=fx.map(n=>{const i=`${n.category}:${n.subcategory}:${n.type}`,o=ux(n);return{...n,key:i,baseType:o}}),Ey=new Map;dx.forEach(n=>{Ey.set(n.key,n)});function px(n){if(n)return Ey.get(n)}function hx(){const n=document.createElement("canvas"),i=24;n.width=i,n.height=i;const o=n.getContext("2d");o.strokeStyle="#000",o.lineWidth=3,o.lineCap="round";const s=i/2,u=8;return o.beginPath(),o.moveTo(s,s-u),o.lineTo(s,s-2),o.moveTo(s,s+2),o.lineTo(s,s+u),o.moveTo(s-u,s),o.lineTo(s-2,s),o.moveTo(s+2,s),o.lineTo(s+u,s),o.stroke(),`url(${n.toDataURL()}) ${s} ${s}, crosshair`}function gx(n){const i=document.createElement("canvas"),o=Math.max(12,Math.min(n,32)),u=o+4*2;i.width=u,i.height=u;const f=i.getContext("2d"),v=u/2,h=u/2,b=o/2;return f.fillStyle="#FFFF00",f.strokeStyle="#000000",f.lineWidth=2,f.beginPath(),f.moveTo(v,h-b),f.lineTo(v+b,h),f.lineTo(v,h+b),f.lineTo(v-b,h),f.closePath(),f.fill(),f.stroke(),`url(${i.toDataURL()}) ${v} ${h}, crosshair`}function l1(){const n=new Date,i=n.getFullYear(),o=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),u=String(n.getHours()).padStart(2,"0"),f=String(n.getMinutes()).padStart(2,"0"),v=String(n.getSeconds()).padStart(2,"0");return`${i}_${o}_${s}-${u}-${f}-${v}`}function Ku(n){let i=n.replace(/\.json$/i,""),o="";for(;o!==i;)o=i,i=i.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),i=i.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return i}const Ff=Ud.components,Gh=Ud.components.flatMap(n=>n.designators.map(i=>({designators:[i],componentType:n.description})));function li(n,i,o,s){if(i==="power"){const f=n[i]||"";return typeof f=="string"&&f.trim()!==""?{value:f.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(n[i]!==void 0||n[o]!==void 0)return{value:n[i]||"",unit:n[o]||s};const u=n[i]||"";return typeof u=="string"&&u.trim()!==""?Ry(u):{value:"",unit:s}}function Ry(n){if(!n||n.trim()==="")return{value:"",unit:""};const i=n.trim(),o=i.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(o)return{value:o[1],unit:o[2]||""};const s=i.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return s?{value:s[1],unit:s[2]||""}:{value:i,unit:""}}function Zu(n,i){return!n||n.trim()===""?"":!i||i.trim()===""?n.trim():`${n.trim()}${i.trim()}`}function yx(){const[n,i]=U.useState([]),[o,s]=U.useState([]),[u,f]=U.useState(null),[v,h]=U.useState(null),[b,x]=U.useState(null),[T,D]=U.useState(!1),[R,C]=U.useState(null),Z=U.useCallback((ce,q)=>{q==="top"?i(se=>[...se,ce]):s(se=>[...se,ce])},[]),O=U.useCallback((ce,q,se)=>{se==="top"?i(X=>X.map(_=>_.id===ce?{..._,...q}:_)):s(X=>X.map(_=>_.id===ce?{..._,...q}:_))},[]),P=U.useCallback((ce,q)=>{q==="top"?i(se=>se.filter(X=>X.id!==ce)):s(se=>se.filter(X=>X.id!==ce))},[]),H=U.useCallback((ce,q)=>{const se=ce.designator||"",X=ce.abbreviation||(se.length>0?se.charAt(0).toUpperCase():""),_=ce.componentType,E={visible:!0,layer:q,id:ce.id,designator:se,abbreviation:X,manufacturer:"manufacturer"in ce&&ce.manufacturer||"",partNumber:"partNumber"in ce&&ce.partNumber||"",pinCount:ce.pinCount,x:ce.x,y:ce.y,orientation:ce.orientation??0,description:ce.description||"",componentDefinitionKey:ce.componentDefinitionKey||""};if(_==="Resistor"){const $=ce,k=li($,"resistance","resistanceUnit",hi("resistance"));E.resistance=k.value,E.resistanceUnit=k.unit;const S=li($,"power","powerUnit","W");E.power=S.value||"1/4",E.tolerance=$.tolerance||"5%"}else if(_==="Capacitor"){const $=ce,k=li($,"capacitance","capacitanceUnit",hi("capacitance"));E.capacitance=k.value,E.capacitanceUnit=k.unit;const S=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=S.value,E.voltageUnit=S.unit,E.tolerance=$.tolerance||"10%",E.dielectric=$.dielectric||"Ceramic"}else if(_==="Electrolytic Capacitor"){const $=ce,k=li($,"capacitance","capacitanceUnit",hi("capacitance"));E.capacitance=k.value,E.capacitanceUnit=k.unit;const S=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=S.value,E.voltageUnit=S.unit,E.tolerance=$.tolerance||"20%",E.polarized=$.polarized!==void 0?$.polarized:!0;const J=li($,"esr","esrUnit",hi("esr"));E.esr=J.value,E.esrUnit=J.unit,E.temperature=$.temperature||""}else if(_==="Film Capacitor"){const $=ce,k=li($,"capacitance","capacitanceUnit",hi("capacitance"));E.capacitance=k.value,E.capacitanceUnit=k.unit;const S=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=S.value,E.voltageUnit=S.unit,E.tolerance=$.tolerance||"10%",E.filmType=$.filmType||"Polyester"}else if(_==="Diode"){const $=ce;E.diodeType=$.diodeType||"Standard";const k=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=k.value,E.voltageUnit=k.unit;const S=li($,"current","currentUnit",hi("current"));E.current=S.value,E.currentUnit=S.unit,E.ledColor=$.ledColor||""}else if(_==="Battery"){const $=ce,k=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=k.value,E.voltageUnit=k.unit;const S=li($,"capacity","capacityUnit",hi("capacity"));E.capacity=S.value,E.capacityUnit=S.unit,E.chemistry=$.chemistry||"Li-ion"}else if(_==="Fuse"){const $=ce,k=li($,"current","currentUnit",hi("current"));E.current=k.value,E.currentUnit=k.unit;const S=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=S.value,E.voltageUnit=S.unit,E.fuseType=$.fuseType||"Fast-blow"}else if(_==="FerriteBead"){const $=ce,k=li($,"impedance","impedanceUnit",hi("impedance"));E.impedance=k.value,E.impedanceUnit=k.unit;const S=li($,"current","currentUnit",hi("current"));E.current=S.value,E.currentUnit=S.unit}else if(_==="Connector"){const $=ce;E.connectorType=$.connectorType||"",E.gender=$.gender||"N/A"}else if(_==="Jumper"){const $=ce;E.positions=$.positions||3}else if(_==="Relay"){const $=ce,k=li($,"coilVoltage","coilVoltageUnit",hi("coilVoltage"));E.coilVoltage=k.value,E.coilVoltageUnit=k.unit,E.contactType=$.contactType||"SPST";const S=li($,"current","currentUnit",hi("current"));E.current=S.value,E.currentUnit=S.unit}else if(_==="Inductor"){const $=ce,k=li($,"inductance","inductanceUnit",hi("inductance"));E.inductance=k.value,E.inductanceUnit=k.unit;const S=li($,"current","currentUnit",hi("current"));E.current=S.value,E.currentUnit=S.unit;const J=li($,"resistance","resistanceUnit",hi("resistance"));E.resistance=J.value,E.resistanceUnit=J.unit}else if(_==="Speaker"){const $=ce,k=li($,"impedance","impedanceUnit",hi("impedance"));E.impedance=k.value,E.impedanceUnit=k.unit;const S=li($,"power","powerUnit","W");E.power=S.value||"1"}else if(_==="Motor"){const $=ce;E.motorType=$.motorType||"DC";const k=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=k.value,E.voltageUnit=k.unit;const S=li($,"current","currentUnit",hi("current"));E.current=S.value,E.currentUnit=S.unit}else if(_==="PowerSupply"){const $=ce,k=li($,"inputVoltage","inputVoltageUnit",hi("inputVoltage"));E.inputVoltage=k.value,E.inputVoltageUnit=k.unit;const S=li($,"outputVoltage","outputVoltageUnit",hi("outputVoltage"));E.outputVoltage=S.value,E.outputVoltageUnit=S.unit;const J=li($,"current","currentUnit",hi("current"));E.current=J.value,E.currentUnit=J.unit}else if(_==="Transistor"){const $=ce;E.transistorType=$.transistorType||"BJT",E.polarity=$.polarity||"NPN";const k=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=k.value,E.voltageUnit=k.unit;const S=li($,"current","currentUnit",hi("current"));E.current=S.value,E.currentUnit=S.unit}else if(_==="ResistorNetwork"){const $=ce,k=li($,"resistance","resistanceUnit",hi("resistance"));E.resistance=k.value,E.resistanceUnit=k.unit,E.configuration=$.configuration||""}else if(_==="Thermistor"){const $=ce,k=li($,"resistance","resistanceUnit",hi("resistance"));E.resistance=k.value,E.resistanceUnit=k.unit,E.thermistorType=$.thermistorType||"NTC",E.beta=$.beta||""}else if(_==="Switch"){const $=ce;E.switchType=$.switchType||"Toggle";const k=li($,"current","currentUnit",hi("current"));E.current=k.value,E.currentUnit=k.unit;const S=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=S.value,E.voltageUnit=S.unit}else if(_==="Transformer"){const $=ce,k=li($,"primaryVoltage","primaryVoltageUnit",hi("primaryVoltage"));E.primaryVoltage=k.value,E.primaryVoltageUnit=k.unit;const S=li($,"secondaryVoltage","secondaryVoltageUnit",hi("secondaryVoltage"));E.secondaryVoltage=S.value,E.secondaryVoltageUnit=S.unit;const J=li($,"power","powerUnit",hi("power"));E.power=J.value||"1",E.turns=$.turns||""}else if(_==="TestPoint"){const $=ce;E.signal=$.signal||""}else if(_==="IntegratedCircuit"){const $=ce;E.description=$.description||ce.designator||"",E.datasheet=$.datasheet||"",E.icType=$.icType||"Op-Amp"}else if(_==="VacuumTube"){const $=ce;E.tubeType=$.tubeType||""}else if(_==="VariableResistor"){const $=ce;E.vrType=$.vrType||"Potentiometer";const k=li($,"resistance","resistanceUnit",hi("resistance"));E.resistance=k.value,E.resistanceUnit=k.unit;const S=li($,"power","powerUnit",hi("power"));E.power=S.value||"1/4",E.taper=$.taper||""}else if(_==="Crystal"){const $=ce;E.frequency=$.frequency||"",E.loadCapacitance=$.loadCapacitance||"",E.tolerance=$.tolerance||""}else if(_==="Diode"){const $=ce;E.diodeType=$.diodeType||"Standard";const k=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=k.value,E.voltageUnit=k.unit;const S=li($,"current","currentUnit",hi("current"));E.current=S.value,E.currentUnit=S.unit,E.ledColor=$.ledColor||""}else if(_==="GenericComponent"){const $=ce;E.genericType=$.genericType||"Attenuator";const k=li($,"voltage","voltageUnit",hi("voltage"));E.voltage=k.value,E.voltageUnit=k.unit;const S=li($,"current","currentUnit",hi("current"));E.current=S.value,E.currentUnit=S.unit,E.power=$.power||"",E.frequency=$.frequency||"",E.model=$.model||""}const V=ce.componentDefinitionKey;if(V){const $=Ff.find(k=>`${k.category}:${k.subcategory}:${k.type}`===V);$&&(E.componentDefinition=$,E.componentDefinitionKey=V)}f(E)},[]),ae=U.useCallback(()=>{f(null),h(null)},[]);return{componentsTop:n,setComponentsTop:i,componentsBottom:o,setComponentsBottom:s,componentEditor:u,setComponentEditor:f,connectingPin:v,setConnectingPin:h,componentDialogPosition:b,setComponentDialogPosition:x,isDraggingDialog:T,setIsDraggingDialog:D,dialogDragOffset:R,setDialogDragOffset:C,addComponent:Z,updateComponent:O,removeComponent:P,openComponentEditor:H,closeComponentEditor:ae}}function Ju(n){return{resistance:"",capacitance:"F",inductance:"H",voltage:"V",current:"A",power:"W",impedance:"",capacity:"mAh",esr:"",coilVoltage:"V",inputVoltage:"V",outputVoltage:"V"}[n]||""}function Qu(n,i,o,s){if(i==="power"){const f=n[i]||"";return typeof f=="string"&&f.trim()!==""?{value:f.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(n[i]!==void 0||n[o]!==void 0)return{value:n[i]||"",unit:n[o]||s};const u=n[i]||"";return typeof u=="string"&&u.trim()!==""?Ry(u):{value:"",unit:s}}function mx(n){if((n.componentType==="Resistor"||n.componentType==="ResistorNetwork"||n.componentType==="Thermistor"||n.componentType==="VariableResistor")&&"resistance"in n){const{value:s,unit:u}=Qu(n,"resistance","resistanceUnit",Ju("resistance"));if(s&&s.trim()!=="")return Zu(s,u)}if((n.componentType==="Capacitor"||n.componentType==="Electrolytic Capacitor"||n.componentType==="Film Capacitor")&&"capacitance"in n){const{value:s,unit:u}=Qu(n,"capacitance","capacitanceUnit",Ju("capacitance"));if(s&&s.trim()!=="")return Zu(s,u)}if(n.componentType==="Inductor"&&"inductance"in n){const{value:s,unit:u}=Qu(n,"inductance","inductanceUnit",Ju("inductance"));if(s&&s.trim()!=="")return Zu(s,u)}if(n.componentType==="Fuse"&&"current"in n){const{value:s,unit:u}=Qu(n,"current","currentUnit",Ju("current"));if(s&&s.trim()!=="")return Zu(s,u)}if(n.componentType==="Battery"){const{value:s,unit:u}=Qu(n,"capacity","capacityUnit",Ju("capacity"));if(s&&s.trim()!=="")return Zu(s,u);const{value:f,unit:v}=Qu(n,"voltage","voltageUnit",Ju("voltage"));if(f&&f.trim()!=="")return Zu(f,v)}if(n.componentType==="PowerSupply"){const{value:s,unit:u}=Qu(n,"outputVoltage","outputVoltageUnit",Ju("voltage"));if(s&&s.trim()!=="")return Zu(s,u)}const i=n.partName?.trim();if(i&&i!=="")return i;const o=n.partNumber?.trim();return o&&o!==""?o:dl(n.componentType)}function xx(n,i,o){const s=[...n,...i],u=s.length,f=new Map;for(const h of s){const b=dl(h.componentType),x=mx(h),T=`${b}|${x}`;if(!f.has(T)){const R=n.some(O=>O.id===h.id),C=i.some(O=>O.id===h.id),Z=R&&C?"both":R?"top":"bottom";f.set(T,{componentType:b,value:x,quantity:0,designators:[],packageType:h.packageType,manufacturer:h.manufacturer,partNumber:h.partNumber,description:h.description,notes:h.notes,datasheet:h.datasheet,layer:Z})}const D=f.get(T);D.quantity++,h.designator&&h.designator.trim()!==""&&D.designators.push(h.designator.trim())}const v=Array.from(f.values()).sort((h,b)=>h.componentType!==b.componentType?h.componentType.localeCompare(b.componentType):h.value.localeCompare(b.value));return{version:"1.0",exportedAt:new Date().toISOString(),projectName:o,totalComponents:u,uniqueComponents:v.length,items:v}}const bx="modulepreload",vx=function(n){return"/PCB_Reverse_Engineering_Tool/"+n},c1={},$h=function(i,o,s){let u=Promise.resolve();if(o&&o.length>0){let b=function(x){return Promise.all(x.map(T=>Promise.resolve(T).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),h=v?.nonce||v?.getAttribute("nonce");u=b(o.map(x=>{if(x=vx(x),x in c1)return;c1[x]=!0;const T=x.endsWith(".css"),D=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${D}`))return;const R=document.createElement("link");if(R.rel=T?"stylesheet":bx,T||(R.as="script"),R.crossOrigin="",R.href=x,h&&R.setAttribute("nonce",h),document.head.appendChild(R),T)return new Promise((C,Z)=>{R.addEventListener("load",C),R.addEventListener("error",()=>Z(new Error(`Unable to preload CSS for ${x}`)))})}))}function f(v){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=v,window.dispatchEvent(h),!h.defaultPrevented)throw v}return u.then(v=>{for(const h of v||[])h.status==="rejected"&&f(h.reason);return i().catch(f)})};function Tr(n){"@babel/helpers - typeof";return Tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Tr(n)}var fc=Uint8Array,Rl=Uint16Array,P0=Int32Array,D0=new fc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),E0=new fc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u1=new fc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),My=function(n,i){for(var o=new Rl(31),s=0;s<31;++s)o[s]=i+=1<<n[s-1];for(var u=new P0(o[30]),s=1;s<30;++s)for(var f=o[s];f<o[s+1];++f)u[f]=f-o[s]<<5|s;return{b:o,r:u}},By=My(D0,2),wx=By.b,v0=By.r;wx[28]=258,v0[258]=28;var Sx=My(E0,0),f1=Sx.r,w0=new Rl(32768);for(var ao=0;ao<32768;++ao){var zu=(ao&43690)>>1|(ao&21845)<<1;zu=(zu&52428)>>2|(zu&13107)<<2,zu=(zu&61680)>>4|(zu&3855)<<4,w0[ao]=((zu&65280)>>8|(zu&255)<<8)>>1}var Md=(function(n,i,o){for(var s=n.length,u=0,f=new Rl(i);u<s;++u)n[u]&&++f[n[u]-1];var v=new Rl(i);for(u=1;u<i;++u)v[u]=v[u-1]+f[u-1]<<1;var h;if(o){h=new Rl(1<<i);var b=15-i;for(u=0;u<s;++u)if(n[u])for(var x=u<<4|n[u],T=i-n[u],D=v[n[u]-1]++<<T,R=D|(1<<T)-1;D<=R;++D)h[w0[D]>>b]=x}else for(h=new Rl(s),u=0;u<s;++u)n[u]&&(h[u]=w0[v[n[u]-1]++]>>15-n[u]);return h}),af=new fc(288);for(var ao=0;ao<144;++ao)af[ao]=8;for(var ao=144;ao<256;++ao)af[ao]=9;for(var ao=256;ao<280;++ao)af[ao]=7;for(var ao=280;ao<288;++ao)af[ao]=8;var Vp=new fc(32);for(var ao=0;ao<32;++ao)Vp[ao]=5;var Cx=Md(af,9,0),Tx=Md(Vp,5,0),Oy=function(n){return(n+7)/8|0},jx=function(n,i,o){return(o==null||o>n.length)&&(o=n.length),new fc(n.subarray(i,o))},Jc=function(n,i,o){o<<=i&7;var s=i/8|0;n[s]|=o,n[s+1]|=o>>8},Pd=function(n,i,o){o<<=i&7;var s=i/8|0;n[s]|=o,n[s+1]|=o>>8,n[s+2]|=o>>16},Xh=function(n,i){for(var o=[],s=0;s<n.length;++s)n[s]&&o.push({s,f:n[s]});var u=o.length,f=o.slice();if(!u)return{t:Uy,l:0};if(u==1){var v=new fc(o[0].s+1);return v[o[0].s]=1,{t:v,l:1}}o.sort(function(se,X){return se.f-X.f}),o.push({s:-1,f:25001});var h=o[0],b=o[1],x=0,T=1,D=2;for(o[0]={s:-1,f:h.f+b.f,l:h,r:b};T!=u-1;)h=o[o[x].f<o[D].f?x++:D++],b=o[x!=T&&o[x].f<o[D].f?x++:D++],o[T++]={s:-1,f:h.f+b.f,l:h,r:b};for(var R=f[0].s,s=1;s<u;++s)f[s].s>R&&(R=f[s].s);var C=new Rl(R+1),Z=S0(o[T-1],C,0);if(Z>i){var s=0,O=0,P=Z-i,H=1<<P;for(f.sort(function(X,_){return C[_.s]-C[X.s]||X.f-_.f});s<u;++s){var ae=f[s].s;if(C[ae]>i)O+=H-(1<<Z-C[ae]),C[ae]=i;else break}for(O>>=P;O>0;){var ce=f[s].s;C[ce]<i?O-=1<<i-C[ce]++-1:++s}for(;s>=0&&O;--s){var q=f[s].s;C[q]==i&&(--C[q],++O)}Z=i}return{t:new fc(C),l:Z}},S0=function(n,i,o){return n.s==-1?Math.max(S0(n.l,i,o+1),S0(n.r,i,o+1)):i[n.s]=o},d1=function(n){for(var i=n.length;i&&!n[--i];);for(var o=new Rl(++i),s=0,u=n[0],f=1,v=function(b){o[s++]=b},h=1;h<=i;++h)if(n[h]==u&&h!=i)++f;else{if(!u&&f>2){for(;f>138;f-=138)v(32754);f>2&&(v(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(v(u),--f;f>6;f-=6)v(8304);f>2&&(v(f-3<<5|8208),f=0)}for(;f--;)v(u);f=1,u=n[h]}return{c:o.subarray(0,s),n:i}},Dd=function(n,i){for(var o=0,s=0;s<i.length;++s)o+=n[s]*i[s];return o},Iy=function(n,i,o){var s=o.length,u=Oy(i+2);n[u]=s&255,n[u+1]=s>>8,n[u+2]=n[u]^255,n[u+3]=n[u+1]^255;for(var f=0;f<s;++f)n[u+f+4]=o[f];return(u+4+s)*8},p1=function(n,i,o,s,u,f,v,h,b,x,T){Jc(i,T++,o),++u[256];for(var D=Xh(u,15),R=D.t,C=D.l,Z=Xh(f,15),O=Z.t,P=Z.l,H=d1(R),ae=H.c,ce=H.n,q=d1(O),se=q.c,X=q.n,_=new Rl(19),E=0;E<ae.length;++E)++_[ae[E]&31];for(var E=0;E<se.length;++E)++_[se[E]&31];for(var V=Xh(_,7),$=V.t,k=V.l,S=19;S>4&&!$[u1[S-1]];--S);var J=x+5<<3,re=Dd(u,af)+Dd(f,Vp)+v,ye=Dd(u,R)+Dd(f,O)+v+14+3*S+Dd(_,$)+2*_[16]+3*_[17]+7*_[18];if(b>=0&&J<=re&&J<=ye)return Iy(i,T,n.subarray(b,b+x));var K,te,ge,je;if(Jc(i,T,1+(ye<re)),T+=2,ye<re){K=Md(R,C,0),te=R,ge=Md(O,P,0),je=O;var be=Md($,k,0);Jc(i,T,ce-257),Jc(i,T+5,X-1),Jc(i,T+10,S-4),T+=14;for(var E=0;E<S;++E)Jc(i,T+3*E,$[u1[E]]);T+=3*S;for(var F=[ae,se],A=0;A<2;++A)for(var M=F[A],E=0;E<M.length;++E){var B=M[E]&31;Jc(i,T,be[B]),T+=$[B],B>15&&(Jc(i,T,M[E]>>5&127),T+=M[E]>>12)}}else K=Cx,te=af,ge=Tx,je=Vp;for(var E=0;E<h;++E){var de=s[E];if(de>255){var B=de>>18&31;Pd(i,T,K[B+257]),T+=te[B+257],B>7&&(Jc(i,T,de>>23&31),T+=D0[B]);var Ae=de&31;Pd(i,T,ge[Ae]),T+=je[Ae],Ae>3&&(Pd(i,T,de>>5&8191),T+=E0[Ae])}else Pd(i,T,K[de]),T+=te[de]}return Pd(i,T,K[256]),T+te[256]},kx=new P0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Uy=new fc(0),Ax=function(n,i,o,s,u,f){var v=f.z||n.length,h=new fc(s+v+5*(1+Math.ceil(v/7e3))+u),b=h.subarray(s,h.length-u),x=f.l,T=(f.r||0)&7;if(i){T&&(b[0]=f.r>>3);for(var D=kx[i-1],R=D>>13,C=D&8191,Z=(1<<o)-1,O=f.p||new Rl(32768),P=f.h||new Rl(Z+1),H=Math.ceil(o/3),ae=2*H,ce=function(Bt){return(n[Bt]^n[Bt+1]<<H^n[Bt+2]<<ae)&Z},q=new P0(25e3),se=new Rl(288),X=new Rl(32),_=0,E=0,V=f.i||0,$=0,k=f.w||0,S=0;V+2<v;++V){var J=ce(V),re=V&32767,ye=P[J];if(O[re]=ye,P[J]=re,k<=V){var K=v-V;if((_>7e3||$>24576)&&(K>423||!x)){T=p1(n,b,0,q,se,X,E,$,S,V-S,T),$=_=E=0,S=V;for(var te=0;te<286;++te)se[te]=0;for(var te=0;te<30;++te)X[te]=0}var ge=2,je=0,be=C,F=re-ye&32767;if(K>2&&J==ce(V-F))for(var A=Math.min(R,K)-1,M=Math.min(32767,V),B=Math.min(258,K);F<=M&&--be&&re!=ye;){if(n[V+ge]==n[V+ge-F]){for(var de=0;de<B&&n[V+de]==n[V+de-F];++de);if(de>ge){if(ge=de,je=F,de>A)break;for(var Ae=Math.min(F,de-2),Ee=0,te=0;te<Ae;++te){var Ge=V-F+te&32767,Pe=O[Ge],nt=Ge-Pe&32767;nt>Ee&&(Ee=nt,ye=Ge)}}}re=ye,ye=O[re],F+=re-ye&32767}if(je){q[$++]=268435456|v0[ge]<<18|f1[je];var Ke=v0[ge]&31,wt=f1[je]&31;E+=D0[Ke]+E0[wt],++se[257+Ke],++X[wt],k=V+ge,++_}else q[$++]=n[V],++se[n[V]]}}for(V=Math.max(V,k);V<v;++V)q[$++]=n[V],++se[n[V]];T=p1(n,b,x,q,se,X,E,$,S,V-S,T),x||(f.r=T&7|b[T/8|0]<<3,T-=7,f.h=P,f.p=O,f.i=V,f.w=k)}else{for(var V=f.w||0;V<v+x;V+=65535){var St=V+65535;St>=v&&(b[T/8|0]=x,St=v),T=Iy(b,T+1,n.subarray(V,St))}f.i=v}return jx(h,0,s+Oy(T)+u)},Fy=function(){var n=1,i=0;return{p:function(o){for(var s=n,u=i,f=o.length|0,v=0;v!=f;){for(var h=Math.min(v+2655,f);v<h;++v)u+=s+=o[v];s=(s&65535)+15*(s>>16),u=(u&65535)+15*(u>>16)}n=s,i=u},d:function(){return n%=65521,i%=65521,(n&255)<<24|(n&65280)<<8|(i&255)<<8|i>>8}}},Nx=function(n,i,o,s,u){if(!u&&(u={l:1},i.dictionary)){var f=i.dictionary.subarray(-32768),v=new fc(f.length+n.length);v.set(f),v.set(n,f.length),n=v,u.w=f.length}return Ax(n,i.level==null?6:i.level,i.mem==null?u.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+i.mem,o,s,u)},qy=function(n,i,o){for(;o;++i)n[i]=o,o>>>=8},_x=function(n,i){var o=i.level,s=o==0?0:o<6?1:o==9?3:2;if(n[0]=120,n[1]=s<<6|(i.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,i.dictionary){var u=Fy();u.p(i.dictionary),qy(n,2,u.d())}};function C0(n,i){i||(i={});var o=Fy();o.p(n);var s=Nx(n,i,i.dictionary?6:2,4);return _x(s,i),qy(s,s.length-4,o.d()),s}var Lx=typeof TextDecoder<"u"&&new TextDecoder,zx=0;try{Lx.decode(Uy,{stream:!0}),zx=1}catch{}function Px(n){if(Array.isArray(n))return n}function Dx(n,i){var o=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(o!=null){var s,u,f,v,h=[],b=!0,x=!1;try{if(f=(o=o.call(n)).next,i!==0)for(;!(b=(s=f.call(o)).done)&&(h.push(s.value),h.length!==i);b=!0);}catch(T){x=!0,u=T}finally{try{if(!b&&o.return!=null&&(v=o.return(),Object(v)!==v))return}finally{if(x)throw u}}return h}}function h1(n,i){(i==null||i>n.length)&&(i=n.length);for(var o=0,s=Array(i);o<i;o++)s[o]=n[o];return s}function Ex(n,i){if(n){if(typeof n=="string")return h1(n,i);var o={}.toString.call(n).slice(8,-1);return o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set"?Array.from(n):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h1(n,i):void 0}}function Rx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g1(n,i){return Px(n)||Dx(n,i)||Ex(n,i)||Rx()}function y1(n,i="utf8"){return new TextDecoder(i).decode(n)}const Mx=new TextEncoder;function Bx(n){return Mx.encode(n)}const Ox=1024*8,Ix=(()=>{const n=new Uint8Array(4),i=new Uint32Array(n.buffer);return!((i[0]=1)&n[0])})(),Kh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class R0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(i=Ox,o={}){let s=!1;typeof i=="number"?i=new ArrayBuffer(i):(s=!0,this.lastWrittenByte=i.byteLength);const u=o.offset?o.offset>>>0:0,f=i.byteLength-u;let v=u;(ArrayBuffer.isView(i)||i instanceof R0)&&(i.byteLength!==i.buffer.byteLength&&(v=i.byteOffset+u),i=i.buffer),s?this.lastWrittenByte=f:this.lastWrittenByte=0,this.buffer=i,this.length=f,this.byteLength=f,this.byteOffset=v,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,v,f),this._mark=0,this._marks=[]}available(i=1){return this.offset+i<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(i=1){return this.offset+=i,this}back(i=1){return this.offset-=i,this}seek(i){return this.offset=i,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const i=this._marks.pop();if(i===void 0)throw new Error("Mark stack empty");return this.seek(i),this}rewind(){return this.offset=0,this}ensureAvailable(i=1){if(!this.available(i)){const s=(this.offset+i)*2,u=new Uint8Array(s);u.set(new Uint8Array(this.buffer)),this.buffer=u.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(i=1){return this.readArray(i,"uint8")}readArray(i,o){const s=Kh[o].BYTES_PER_ELEMENT*i,u=this.byteOffset+this.offset,f=this.buffer.slice(u,u+s);if(this.littleEndian===Ix&&o!=="uint8"&&o!=="int8"){const h=new Uint8Array(this.buffer.slice(u,u+s));h.reverse();const b=new Kh[o](h.buffer);return this.offset+=s,b.reverse(),b}const v=new Kh[o](f);return this.offset+=s,v}readInt16(){const i=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,i}readUint16(){const i=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,i}readInt32(){const i=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,i}readUint32(){const i=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,i}readFloat32(){const i=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,i}readFloat64(){const i=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,i}readBigInt64(){const i=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,i}readBigUint64(){const i=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,i}readChar(){return String.fromCharCode(this.readInt8())}readChars(i=1){let o="";for(let s=0;s<i;s++)o+=this.readChar();return o}readUtf8(i=1){return y1(this.readBytes(i))}decodeText(i=1,o="utf8"){return y1(this.readBytes(i),o)}writeBoolean(i){return this.writeUint8(i?255:0),this}writeInt8(i){return this.ensureAvailable(1),this._data.setInt8(this.offset++,i),this._updateLastWrittenByte(),this}writeUint8(i){return this.ensureAvailable(1),this._data.setUint8(this.offset++,i),this._updateLastWrittenByte(),this}writeByte(i){return this.writeUint8(i)}writeBytes(i){this.ensureAvailable(i.length);for(let o=0;o<i.length;o++)this._data.setUint8(this.offset++,i[o]);return this._updateLastWrittenByte(),this}writeInt16(i){return this.ensureAvailable(2),this._data.setInt16(this.offset,i,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(i){return this.ensureAvailable(2),this._data.setUint16(this.offset,i,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(i){return this.ensureAvailable(4),this._data.setInt32(this.offset,i,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(i){return this.ensureAvailable(4),this._data.setUint32(this.offset,i,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(i){return this.ensureAvailable(4),this._data.setFloat32(this.offset,i,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(i){return this.ensureAvailable(8),this._data.setFloat64(this.offset,i,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(i){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,i,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(i){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,i,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(i){return this.writeUint8(i.charCodeAt(0))}writeChars(i){for(let o=0;o<i.length;o++)this.writeUint8(i.charCodeAt(o));return this}writeUtf8(i){return this.writeBytes(Bx(i))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Gf(n){let i=n.length;for(;--i>=0;)n[i]=0}const Ux=3,Fx=258,Hy=29,qx=256,Hx=qx+1+Hy,Vy=30,Vx=512,Wx=new Array((Hx+2)*2);Gf(Wx);const Yx=new Array(Vy*2);Gf(Yx);const Gx=new Array(Vx);Gf(Gx);const $x=new Array(Fx-Ux+1);Gf($x);const Xx=new Array(Hy);Gf(Xx);const Kx=new Array(Vy);Gf(Kx);const Zx=(n,i,o,s)=>{let u=n&65535|0,f=n>>>16&65535|0,v=0;for(;o!==0;){v=o>2e3?2e3:o,o-=v;do u=u+i[s++]|0,f=f+u|0;while(--v);u%=65521,f%=65521}return u|f<<16|0};var T0=Zx;const Jx=()=>{let n,i=[];for(var o=0;o<256;o++){n=o;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;i[o]=n}return i},Qx=new Uint32Array(Jx()),eb=(n,i,o,s)=>{const u=Qx,f=s+o;n^=-1;for(let v=s;v<f;v++)n=n>>>8^u[(n^i[v])&255];return n^-1};var zc=eb,j0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Wy={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const tb=(n,i)=>Object.prototype.hasOwnProperty.call(n,i);var nb=function(n){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const o=i.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(const s in o)tb(o,s)&&(n[s]=o[s])}}return n},ib=n=>{let i=0;for(let s=0,u=n.length;s<u;s++)i+=n[s].length;const o=new Uint8Array(i);for(let s=0,u=0,f=n.length;s<f;s++){let v=n[s];o.set(v,u),u+=v.length}return o},Yy={assign:nb,flattenChunks:ib};let Gy=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Gy=!1}const Od=new Uint8Array(256);for(let n=0;n<256;n++)Od[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Od[254]=Od[254]=1;var rb=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let i,o,s,u,f,v=n.length,h=0;for(u=0;u<v;u++)o=n.charCodeAt(u),(o&64512)===55296&&u+1<v&&(s=n.charCodeAt(u+1),(s&64512)===56320&&(o=65536+(o-55296<<10)+(s-56320),u++)),h+=o<128?1:o<2048?2:o<65536?3:4;for(i=new Uint8Array(h),f=0,u=0;f<h;u++)o=n.charCodeAt(u),(o&64512)===55296&&u+1<v&&(s=n.charCodeAt(u+1),(s&64512)===56320&&(o=65536+(o-55296<<10)+(s-56320),u++)),o<128?i[f++]=o:o<2048?(i[f++]=192|o>>>6,i[f++]=128|o&63):o<65536?(i[f++]=224|o>>>12,i[f++]=128|o>>>6&63,i[f++]=128|o&63):(i[f++]=240|o>>>18,i[f++]=128|o>>>12&63,i[f++]=128|o>>>6&63,i[f++]=128|o&63);return i};const ob=(n,i)=>{if(i<65534&&n.subarray&&Gy)return String.fromCharCode.apply(null,n.length===i?n:n.subarray(0,i));let o="";for(let s=0;s<i;s++)o+=String.fromCharCode(n[s]);return o};var ab=(n,i)=>{const o=i||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,i));let s,u;const f=new Array(o*2);for(u=0,s=0;s<o;){let v=n[s++];if(v<128){f[u++]=v;continue}let h=Od[v];if(h>4){f[u++]=65533,s+=h-1;continue}for(v&=h===2?31:h===3?15:7;h>1&&s<o;)v=v<<6|n[s++]&63,h--;if(h>1){f[u++]=65533;continue}v<65536?f[u++]=v:(v-=65536,f[u++]=55296|v>>10&1023,f[u++]=56320|v&1023)}return ob(f,u)},sb=(n,i)=>{i=i||n.length,i>n.length&&(i=n.length);let o=i-1;for(;o>=0&&(n[o]&192)===128;)o--;return o<0||o===0?i:o+Od[n[o]]>i?o:i},k0={string2buf:rb,buf2string:ab,utf8border:sb};function lb(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var cb=lb;const kp=16209,ub=16191;var fb=function(i,o){let s,u,f,v,h,b,x,T,D,R,C,Z,O,P,H,ae,ce,q,se,X,_,E,V,$;const k=i.state;s=i.next_in,V=i.input,u=s+(i.avail_in-5),f=i.next_out,$=i.output,v=f-(o-i.avail_out),h=f+(i.avail_out-257),b=k.dmax,x=k.wsize,T=k.whave,D=k.wnext,R=k.window,C=k.hold,Z=k.bits,O=k.lencode,P=k.distcode,H=(1<<k.lenbits)-1,ae=(1<<k.distbits)-1;e:do{Z<15&&(C+=V[s++]<<Z,Z+=8,C+=V[s++]<<Z,Z+=8),ce=O[C&H];t:for(;;){if(q=ce>>>24,C>>>=q,Z-=q,q=ce>>>16&255,q===0)$[f++]=ce&65535;else if(q&16){se=ce&65535,q&=15,q&&(Z<q&&(C+=V[s++]<<Z,Z+=8),se+=C&(1<<q)-1,C>>>=q,Z-=q),Z<15&&(C+=V[s++]<<Z,Z+=8,C+=V[s++]<<Z,Z+=8),ce=P[C&ae];n:for(;;){if(q=ce>>>24,C>>>=q,Z-=q,q=ce>>>16&255,q&16){if(X=ce&65535,q&=15,Z<q&&(C+=V[s++]<<Z,Z+=8,Z<q&&(C+=V[s++]<<Z,Z+=8)),X+=C&(1<<q)-1,X>b){i.msg="invalid distance too far back",k.mode=kp;break e}if(C>>>=q,Z-=q,q=f-v,X>q){if(q=X-q,q>T&&k.sane){i.msg="invalid distance too far back",k.mode=kp;break e}if(_=0,E=R,D===0){if(_+=x-q,q<se){se-=q;do $[f++]=R[_++];while(--q);_=f-X,E=$}}else if(D<q){if(_+=x+D-q,q-=D,q<se){se-=q;do $[f++]=R[_++];while(--q);if(_=0,D<se){q=D,se-=q;do $[f++]=R[_++];while(--q);_=f-X,E=$}}}else if(_+=D-q,q<se){se-=q;do $[f++]=R[_++];while(--q);_=f-X,E=$}for(;se>2;)$[f++]=E[_++],$[f++]=E[_++],$[f++]=E[_++],se-=3;se&&($[f++]=E[_++],se>1&&($[f++]=E[_++]))}else{_=f-X;do $[f++]=$[_++],$[f++]=$[_++],$[f++]=$[_++],se-=3;while(se>2);se&&($[f++]=$[_++],se>1&&($[f++]=$[_++]))}}else if((q&64)===0){ce=P[(ce&65535)+(C&(1<<q)-1)];continue n}else{i.msg="invalid distance code",k.mode=kp;break e}break}}else if((q&64)===0){ce=O[(ce&65535)+(C&(1<<q)-1)];continue t}else if(q&32){k.mode=ub;break e}else{i.msg="invalid literal/length code",k.mode=kp;break e}break}}while(s<u&&f<h);se=Z>>3,s-=se,Z-=se<<3,C&=(1<<Z)-1,i.next_in=s,i.next_out=f,i.avail_in=s<u?5+(u-s):5-(s-u),i.avail_out=f<h?257+(h-f):257-(f-h),k.hold=C,k.bits=Z};const Ef=15,m1=852,x1=592,b1=0,Zh=1,v1=2,db=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),pb=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hb=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gb=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yb=(n,i,o,s,u,f,v,h)=>{const b=h.bits;let x=0,T=0,D=0,R=0,C=0,Z=0,O=0,P=0,H=0,ae=0,ce,q,se,X,_,E=null,V;const $=new Uint16Array(Ef+1),k=new Uint16Array(Ef+1);let S=null,J,re,ye;for(x=0;x<=Ef;x++)$[x]=0;for(T=0;T<s;T++)$[i[o+T]]++;for(C=b,R=Ef;R>=1&&$[R]===0;R--);if(C>R&&(C=R),R===0)return u[f++]=1<<24|64<<16|0,u[f++]=1<<24|64<<16|0,h.bits=1,0;for(D=1;D<R&&$[D]===0;D++);for(C<D&&(C=D),P=1,x=1;x<=Ef;x++)if(P<<=1,P-=$[x],P<0)return-1;if(P>0&&(n===b1||R!==1))return-1;for(k[1]=0,x=1;x<Ef;x++)k[x+1]=k[x]+$[x];for(T=0;T<s;T++)i[o+T]!==0&&(v[k[i[o+T]]++]=T);if(n===b1?(E=S=v,V=20):n===Zh?(E=db,S=pb,V=257):(E=hb,S=gb,V=0),ae=0,T=0,x=D,_=f,Z=C,O=0,se=-1,H=1<<C,X=H-1,n===Zh&&H>m1||n===v1&&H>x1)return 1;for(;;){J=x-O,v[T]+1<V?(re=0,ye=v[T]):v[T]>=V?(re=S[v[T]-V],ye=E[v[T]-V]):(re=96,ye=0),ce=1<<x-O,q=1<<Z,D=q;do q-=ce,u[_+(ae>>O)+q]=J<<24|re<<16|ye|0;while(q!==0);for(ce=1<<x-1;ae&ce;)ce>>=1;if(ce!==0?(ae&=ce-1,ae+=ce):ae=0,T++,--$[x]===0){if(x===R)break;x=i[o+v[T]]}if(x>C&&(ae&X)!==se){for(O===0&&(O=C),_+=D,Z=x-O,P=1<<Z;Z+O<R&&(P-=$[Z+O],!(P<=0));)Z++,P<<=1;if(H+=1<<Z,n===Zh&&H>m1||n===v1&&H>x1)return 1;se=ae&X,u[se]=C<<24|Z<<16|_-f|0}}return ae!==0&&(u[_+ae]=x-O<<24|64<<16|0),h.bits=C,0};var Bd=yb;const mb=0,$y=1,Xy=2,{Z_FINISH:w1,Z_BLOCK:xb,Z_TREES:Ap,Z_OK:sf,Z_STREAM_END:bb,Z_NEED_DICT:vb,Z_STREAM_ERROR:Jl,Z_DATA_ERROR:Ky,Z_MEM_ERROR:Zy,Z_BUF_ERROR:wb,Z_DEFLATED:S1}=Wy,Xp=16180,C1=16181,T1=16182,j1=16183,k1=16184,A1=16185,N1=16186,_1=16187,L1=16188,z1=16189,Wp=16190,Qc=16191,Jh=16192,P1=16193,Qh=16194,D1=16195,E1=16196,R1=16197,M1=16198,Np=16199,_p=16200,B1=16201,O1=16202,I1=16203,U1=16204,F1=16205,e0=16206,q1=16207,H1=16208,ho=16209,Jy=16210,Qy=16211,Sb=852,Cb=592,Tb=15,jb=Tb,V1=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function kb(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const lf=n=>{if(!n)return 1;const i=n.state;return!i||i.strm!==n||i.mode<Xp||i.mode>Qy?1:0},e2=n=>{if(lf(n))return Jl;const i=n.state;return n.total_in=n.total_out=i.total=0,n.msg="",i.wrap&&(n.adler=i.wrap&1),i.mode=Xp,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(Sb),i.distcode=i.distdyn=new Int32Array(Cb),i.sane=1,i.back=-1,sf},t2=n=>{if(lf(n))return Jl;const i=n.state;return i.wsize=0,i.whave=0,i.wnext=0,e2(n)},n2=(n,i)=>{let o;if(lf(n))return Jl;const s=n.state;return i<0?(o=0,i=-i):(o=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?Jl:(s.window!==null&&s.wbits!==i&&(s.window=null),s.wrap=o,s.wbits=i,t2(n))},i2=(n,i)=>{if(!n)return Jl;const o=new kb;n.state=o,o.strm=n,o.window=null,o.mode=Xp;const s=n2(n,i);return s!==sf&&(n.state=null),s},Ab=n=>i2(n,jb);let W1=!0,t0,n0;const Nb=n=>{if(W1){t0=new Int32Array(512),n0=new Int32Array(32);let i=0;for(;i<144;)n.lens[i++]=8;for(;i<256;)n.lens[i++]=9;for(;i<280;)n.lens[i++]=7;for(;i<288;)n.lens[i++]=8;for(Bd($y,n.lens,0,288,t0,0,n.work,{bits:9}),i=0;i<32;)n.lens[i++]=5;Bd(Xy,n.lens,0,32,n0,0,n.work,{bits:5}),W1=!1}n.lencode=t0,n.lenbits=9,n.distcode=n0,n.distbits=5},r2=(n,i,o,s)=>{let u;const f=n.state;return f.window===null&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new Uint8Array(f.wsize)),s>=f.wsize?(f.window.set(i.subarray(o-f.wsize,o),0),f.wnext=0,f.whave=f.wsize):(u=f.wsize-f.wnext,u>s&&(u=s),f.window.set(i.subarray(o-s,o-s+u),f.wnext),s-=u,s?(f.window.set(i.subarray(o-s,o),0),f.wnext=s,f.whave=f.wsize):(f.wnext+=u,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=u))),0},_b=(n,i)=>{let o,s,u,f,v,h,b,x,T,D,R,C,Z,O,P=0,H,ae,ce,q,se,X,_,E;const V=new Uint8Array(4);let $,k;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(lf(n)||!n.output||!n.input&&n.avail_in!==0)return Jl;o=n.state,o.mode===Qc&&(o.mode=Jh),v=n.next_out,u=n.output,b=n.avail_out,f=n.next_in,s=n.input,h=n.avail_in,x=o.hold,T=o.bits,D=h,R=b,E=sf;e:for(;;)switch(o.mode){case Xp:if(o.wrap===0){o.mode=Jh;break}for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.wrap&2&&x===35615){o.wbits===0&&(o.wbits=15),o.check=0,V[0]=x&255,V[1]=x>>>8&255,o.check=zc(o.check,V,2,0),x=0,T=0,o.mode=C1;break}if(o.head&&(o.head.done=!1),!(o.wrap&1)||(((x&255)<<8)+(x>>8))%31){n.msg="incorrect header check",o.mode=ho;break}if((x&15)!==S1){n.msg="unknown compression method",o.mode=ho;break}if(x>>>=4,T-=4,_=(x&15)+8,o.wbits===0&&(o.wbits=_),_>15||_>o.wbits){n.msg="invalid window size",o.mode=ho;break}o.dmax=1<<o.wbits,o.flags=0,n.adler=o.check=1,o.mode=x&512?z1:Qc,x=0,T=0;break;case C1:for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.flags=x,(o.flags&255)!==S1){n.msg="unknown compression method",o.mode=ho;break}if(o.flags&57344){n.msg="unknown header flags set",o.mode=ho;break}o.head&&(o.head.text=x>>8&1),o.flags&512&&o.wrap&4&&(V[0]=x&255,V[1]=x>>>8&255,o.check=zc(o.check,V,2,0)),x=0,T=0,o.mode=T1;case T1:for(;T<32;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.head&&(o.head.time=x),o.flags&512&&o.wrap&4&&(V[0]=x&255,V[1]=x>>>8&255,V[2]=x>>>16&255,V[3]=x>>>24&255,o.check=zc(o.check,V,4,0)),x=0,T=0,o.mode=j1;case j1:for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.head&&(o.head.xflags=x&255,o.head.os=x>>8),o.flags&512&&o.wrap&4&&(V[0]=x&255,V[1]=x>>>8&255,o.check=zc(o.check,V,2,0)),x=0,T=0,o.mode=k1;case k1:if(o.flags&1024){for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.length=x,o.head&&(o.head.extra_len=x),o.flags&512&&o.wrap&4&&(V[0]=x&255,V[1]=x>>>8&255,o.check=zc(o.check,V,2,0)),x=0,T=0}else o.head&&(o.head.extra=null);o.mode=A1;case A1:if(o.flags&1024&&(C=o.length,C>h&&(C=h),C&&(o.head&&(_=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Uint8Array(o.head.extra_len)),o.head.extra.set(s.subarray(f,f+C),_)),o.flags&512&&o.wrap&4&&(o.check=zc(o.check,s,C,f)),h-=C,f+=C,o.length-=C),o.length))break e;o.length=0,o.mode=N1;case N1:if(o.flags&2048){if(h===0)break e;C=0;do _=s[f+C++],o.head&&_&&o.length<65536&&(o.head.name+=String.fromCharCode(_));while(_&&C<h);if(o.flags&512&&o.wrap&4&&(o.check=zc(o.check,s,C,f)),h-=C,f+=C,_)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=_1;case _1:if(o.flags&4096){if(h===0)break e;C=0;do _=s[f+C++],o.head&&_&&o.length<65536&&(o.head.comment+=String.fromCharCode(_));while(_&&C<h);if(o.flags&512&&o.wrap&4&&(o.check=zc(o.check,s,C,f)),h-=C,f+=C,_)break e}else o.head&&(o.head.comment=null);o.mode=L1;case L1:if(o.flags&512){for(;T<16;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.wrap&4&&x!==(o.check&65535)){n.msg="header crc mismatch",o.mode=ho;break}x=0,T=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),n.adler=o.check=0,o.mode=Qc;break;case z1:for(;T<32;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}n.adler=o.check=V1(x),x=0,T=0,o.mode=Wp;case Wp:if(o.havedict===0)return n.next_out=v,n.avail_out=b,n.next_in=f,n.avail_in=h,o.hold=x,o.bits=T,vb;n.adler=o.check=1,o.mode=Qc;case Qc:if(i===xb||i===Ap)break e;case Jh:if(o.last){x>>>=T&7,T-=T&7,o.mode=e0;break}for(;T<3;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}switch(o.last=x&1,x>>>=1,T-=1,x&3){case 0:o.mode=P1;break;case 1:if(Nb(o),o.mode=Np,i===Ap){x>>>=2,T-=2;break e}break;case 2:o.mode=E1;break;case 3:n.msg="invalid block type",o.mode=ho}x>>>=2,T-=2;break;case P1:for(x>>>=T&7,T-=T&7;T<32;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if((x&65535)!==(x>>>16^65535)){n.msg="invalid stored block lengths",o.mode=ho;break}if(o.length=x&65535,x=0,T=0,o.mode=Qh,i===Ap)break e;case Qh:o.mode=D1;case D1:if(C=o.length,C){if(C>h&&(C=h),C>b&&(C=b),C===0)break e;u.set(s.subarray(f,f+C),v),h-=C,f+=C,b-=C,v+=C,o.length-=C;break}o.mode=Qc;break;case E1:for(;T<14;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.nlen=(x&31)+257,x>>>=5,T-=5,o.ndist=(x&31)+1,x>>>=5,T-=5,o.ncode=(x&15)+4,x>>>=4,T-=4,o.nlen>286||o.ndist>30){n.msg="too many length or distance symbols",o.mode=ho;break}o.have=0,o.mode=R1;case R1:for(;o.have<o.ncode;){for(;T<3;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.lens[S[o.have++]]=x&7,x>>>=3,T-=3}for(;o.have<19;)o.lens[S[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,$={bits:o.lenbits},E=Bd(mb,o.lens,0,19,o.lencode,0,o.work,$),o.lenbits=$.bits,E){n.msg="invalid code lengths set",o.mode=ho;break}o.have=0,o.mode=M1;case M1:for(;o.have<o.nlen+o.ndist;){for(;P=o.lencode[x&(1<<o.lenbits)-1],H=P>>>24,ae=P>>>16&255,ce=P&65535,!(H<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(ce<16)x>>>=H,T-=H,o.lens[o.have++]=ce;else{if(ce===16){for(k=H+2;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(x>>>=H,T-=H,o.have===0){n.msg="invalid bit length repeat",o.mode=ho;break}_=o.lens[o.have-1],C=3+(x&3),x>>>=2,T-=2}else if(ce===17){for(k=H+3;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}x>>>=H,T-=H,_=0,C=3+(x&7),x>>>=3,T-=3}else{for(k=H+7;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}x>>>=H,T-=H,_=0,C=11+(x&127),x>>>=7,T-=7}if(o.have+C>o.nlen+o.ndist){n.msg="invalid bit length repeat",o.mode=ho;break}for(;C--;)o.lens[o.have++]=_}}if(o.mode===ho)break;if(o.lens[256]===0){n.msg="invalid code -- missing end-of-block",o.mode=ho;break}if(o.lenbits=9,$={bits:o.lenbits},E=Bd($y,o.lens,0,o.nlen,o.lencode,0,o.work,$),o.lenbits=$.bits,E){n.msg="invalid literal/lengths set",o.mode=ho;break}if(o.distbits=6,o.distcode=o.distdyn,$={bits:o.distbits},E=Bd(Xy,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,$),o.distbits=$.bits,E){n.msg="invalid distances set",o.mode=ho;break}if(o.mode=Np,i===Ap)break e;case Np:o.mode=_p;case _p:if(h>=6&&b>=258){n.next_out=v,n.avail_out=b,n.next_in=f,n.avail_in=h,o.hold=x,o.bits=T,fb(n,R),v=n.next_out,u=n.output,b=n.avail_out,f=n.next_in,s=n.input,h=n.avail_in,x=o.hold,T=o.bits,o.mode===Qc&&(o.back=-1);break}for(o.back=0;P=o.lencode[x&(1<<o.lenbits)-1],H=P>>>24,ae=P>>>16&255,ce=P&65535,!(H<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(ae&&(ae&240)===0){for(q=H,se=ae,X=ce;P=o.lencode[X+((x&(1<<q+se)-1)>>q)],H=P>>>24,ae=P>>>16&255,ce=P&65535,!(q+H<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}x>>>=q,T-=q,o.back+=q}if(x>>>=H,T-=H,o.back+=H,o.length=ce,ae===0){o.mode=F1;break}if(ae&32){o.back=-1,o.mode=Qc;break}if(ae&64){n.msg="invalid literal/length code",o.mode=ho;break}o.extra=ae&15,o.mode=B1;case B1:if(o.extra){for(k=o.extra;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.length+=x&(1<<o.extra)-1,x>>>=o.extra,T-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=O1;case O1:for(;P=o.distcode[x&(1<<o.distbits)-1],H=P>>>24,ae=P>>>16&255,ce=P&65535,!(H<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if((ae&240)===0){for(q=H,se=ae,X=ce;P=o.distcode[X+((x&(1<<q+se)-1)>>q)],H=P>>>24,ae=P>>>16&255,ce=P&65535,!(q+H<=T);){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}x>>>=q,T-=q,o.back+=q}if(x>>>=H,T-=H,o.back+=H,ae&64){n.msg="invalid distance code",o.mode=ho;break}o.offset=ce,o.extra=ae&15,o.mode=I1;case I1:if(o.extra){for(k=o.extra;T<k;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}o.offset+=x&(1<<o.extra)-1,x>>>=o.extra,T-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){n.msg="invalid distance too far back",o.mode=ho;break}o.mode=U1;case U1:if(b===0)break e;if(C=R-b,o.offset>C){if(C=o.offset-C,C>o.whave&&o.sane){n.msg="invalid distance too far back",o.mode=ho;break}C>o.wnext?(C-=o.wnext,Z=o.wsize-C):Z=o.wnext-C,C>o.length&&(C=o.length),O=o.window}else O=u,Z=v-o.offset,C=o.length;C>b&&(C=b),b-=C,o.length-=C;do u[v++]=O[Z++];while(--C);o.length===0&&(o.mode=_p);break;case F1:if(b===0)break e;u[v++]=o.length,b--,o.mode=_p;break;case e0:if(o.wrap){for(;T<32;){if(h===0)break e;h--,x|=s[f++]<<T,T+=8}if(R-=b,n.total_out+=R,o.total+=R,o.wrap&4&&R&&(n.adler=o.check=o.flags?zc(o.check,u,R,v-R):T0(o.check,u,R,v-R)),R=b,o.wrap&4&&(o.flags?x:V1(x))!==o.check){n.msg="incorrect data check",o.mode=ho;break}x=0,T=0}o.mode=q1;case q1:if(o.wrap&&o.flags){for(;T<32;){if(h===0)break e;h--,x+=s[f++]<<T,T+=8}if(o.wrap&4&&x!==(o.total&4294967295)){n.msg="incorrect length check",o.mode=ho;break}x=0,T=0}o.mode=H1;case H1:E=bb;break e;case ho:E=Ky;break e;case Jy:return Zy;case Qy:default:return Jl}return n.next_out=v,n.avail_out=b,n.next_in=f,n.avail_in=h,o.hold=x,o.bits=T,(o.wsize||R!==n.avail_out&&o.mode<ho&&(o.mode<e0||i!==w1))&&r2(n,n.output,n.next_out,R-n.avail_out),D-=n.avail_in,R-=n.avail_out,n.total_in+=D,n.total_out+=R,o.total+=R,o.wrap&4&&R&&(n.adler=o.check=o.flags?zc(o.check,u,R,n.next_out-R):T0(o.check,u,R,n.next_out-R)),n.data_type=o.bits+(o.last?64:0)+(o.mode===Qc?128:0)+(o.mode===Np||o.mode===Qh?256:0),(D===0&&R===0||i===w1)&&E===sf&&(E=wb),E},Lb=n=>{if(lf(n))return Jl;let i=n.state;return i.window&&(i.window=null),n.state=null,sf},zb=(n,i)=>{if(lf(n))return Jl;const o=n.state;return(o.wrap&2)===0?Jl:(o.head=i,i.done=!1,sf)},Pb=(n,i)=>{const o=i.length;let s,u,f;return lf(n)||(s=n.state,s.wrap!==0&&s.mode!==Wp)?Jl:s.mode===Wp&&(u=1,u=T0(u,i,o,0),u!==s.check)?Ky:(f=r2(n,i,o,o),f?(s.mode=Jy,Zy):(s.havedict=1,sf))};var Db=t2,Eb=n2,Rb=e2,Mb=Ab,Bb=i2,Ob=_b,Ib=Lb,Ub=zb,Fb=Pb,qb="pako inflate (from Nodeca project)",eu={inflateReset:Db,inflateReset2:Eb,inflateResetKeep:Rb,inflateInit:Mb,inflateInit2:Bb,inflate:Ob,inflateEnd:Ib,inflateGetHeader:Ub,inflateSetDictionary:Fb,inflateInfo:qb};function Hb(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Vb=Hb;const o2=Object.prototype.toString,{Z_NO_FLUSH:Wb,Z_FINISH:Yb,Z_OK:Id,Z_STREAM_END:i0,Z_NEED_DICT:r0,Z_STREAM_ERROR:Gb,Z_DATA_ERROR:Y1,Z_MEM_ERROR:$b}=Wy;function Fd(n){this.options=Yy.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(n&&n.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15)===0&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cb,this.strm.avail_out=0;let o=eu.inflateInit2(this.strm,i.windowBits);if(o!==Id)throw new Error(j0[o]);if(this.header=new Vb,eu.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=k0.string2buf(i.dictionary):o2.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(o=eu.inflateSetDictionary(this.strm,i.dictionary),o!==Id)))throw new Error(j0[o])}Fd.prototype.push=function(n,i){const o=this.strm,s=this.options.chunkSize,u=this.options.dictionary;let f,v,h;if(this.ended)return!1;for(i===~~i?v=i:v=i===!0?Yb:Wb,o2.call(n)==="[object ArrayBuffer]"?o.input=new Uint8Array(n):o.input=n,o.next_in=0,o.avail_in=o.input.length;;){for(o.avail_out===0&&(o.output=new Uint8Array(s),o.next_out=0,o.avail_out=s),f=eu.inflate(o,v),f===r0&&u&&(f=eu.inflateSetDictionary(o,u),f===Id?f=eu.inflate(o,v):f===Y1&&(f=r0));o.avail_in>0&&f===i0&&o.state.wrap>0&&n[o.next_in]!==0;)eu.inflateReset(o),f=eu.inflate(o,v);switch(f){case Gb:case Y1:case r0:case $b:return this.onEnd(f),this.ended=!0,!1}if(h=o.avail_out,o.next_out&&(o.avail_out===0||f===i0))if(this.options.to==="string"){let b=k0.utf8border(o.output,o.next_out),x=o.next_out-b,T=k0.buf2string(o.output,b);o.next_out=x,o.avail_out=s-x,x&&o.output.set(o.output.subarray(b,b+x),0),this.onData(T)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(!(f===Id&&h===0)){if(f===i0)return f=eu.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,!0;if(o.avail_in===0)break}}return!0};Fd.prototype.onData=function(n){this.chunks.push(n)};Fd.prototype.onEnd=function(n){n===Id&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Yy.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Xb(n,i){const o=new Fd(i);if(o.push(n),o.err)throw o.msg||j0[o.err];return o.result}var Kb=Fd,Zb=Xb,Jb={Inflate:Kb,inflate:Zb};const{Inflate:Qb,inflate:e5}=Jb;var G1=Qb,t5=e5;const a2=[];for(let n=0;n<256;n++){let i=n;for(let o=0;o<8;o++)i&1?i=3988292384^i>>>1:i=i>>>1;a2[n]=i}const $1=4294967295;function n5(n,i,o){let s=n;for(let u=0;u<o;u++)s=a2[(s^i[u])&255]^s>>>8;return s}function i5(n,i){return(n5($1,n,i)^$1)>>>0}function X1(n,i,o){const s=n.readUint32(),u=i5(new Uint8Array(n.buffer,n.byteOffset+n.offset-i-4,i),i);if(u!==s)throw new Error(`CRC mismatch for chunk ${o}. Expected ${s}, found ${u}`)}function s2(n,i,o){for(let s=0;s<o;s++)i[s]=n[s]}function l2(n,i,o,s){let u=0;for(;u<s;u++)i[u]=n[u];for(;u<o;u++)i[u]=n[u]+i[u-s]&255}function c2(n,i,o,s){let u=0;if(o.length===0)for(;u<s;u++)i[u]=n[u];else for(;u<s;u++)i[u]=n[u]+o[u]&255}function u2(n,i,o,s,u){let f=0;if(o.length===0){for(;f<u;f++)i[f]=n[f];for(;f<s;f++)i[f]=n[f]+(i[f-u]>>1)&255}else{for(;f<u;f++)i[f]=n[f]+(o[f]>>1)&255;for(;f<s;f++)i[f]=n[f]+(i[f-u]+o[f]>>1)&255}}function f2(n,i,o,s,u){let f=0;if(o.length===0){for(;f<u;f++)i[f]=n[f];for(;f<s;f++)i[f]=n[f]+i[f-u]&255}else{for(;f<u;f++)i[f]=n[f]+o[f]&255;for(;f<s;f++)i[f]=n[f]+r5(i[f-u],o[f],o[f-u])&255}}function r5(n,i,o){const s=n+i-o,u=Math.abs(s-n),f=Math.abs(s-i),v=Math.abs(s-o);return u<=f&&u<=v?n:f<=v?i:o}function o5(n,i,o,s,u,f){switch(n){case 0:s2(i,o,u);break;case 1:l2(i,o,u,f);break;case 2:c2(i,o,s,u);break;case 3:u2(i,o,s,u,f);break;case 4:f2(i,o,s,u,f);break;default:throw new Error(`Unsupported filter: ${n}`)}}const a5=new Uint16Array([255]),s5=new Uint8Array(a5.buffer),l5=s5[0]===255;function c5(n){const{data:i,width:o,height:s,channels:u,depth:f}=n,v=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],h=Math.ceil(f/8)*u,b=new Uint8Array(s*o*h);let x=0;for(let T=0;T<7;T++){const D=v[T],R=Math.ceil((o-D.x)/D.xStep),C=Math.ceil((s-D.y)/D.yStep);if(R<=0||C<=0)continue;const Z=R*h,O=new Uint8Array(Z);for(let P=0;P<C;P++){const H=i[x++],ae=i.subarray(x,x+Z);x+=Z;const ce=new Uint8Array(Z);o5(H,ae,ce,O,Z,h),O.set(ce);for(let q=0;q<R;q++){const se=D.x+q*D.xStep,X=D.y+P*D.yStep;if(!(se>=o||X>=s))for(let _=0;_<h;_++)b[(X*o+se)*h+_]=ce[q*h+_]}}}if(f===16){const T=new Uint16Array(b.buffer);if(l5)for(let D=0;D<T.length;D++)T[D]=u5(T[D]);return T}else return b}function u5(n){return(n&255)<<8|n>>8&255}const f5=new Uint16Array([255]),d5=new Uint8Array(f5.buffer),p5=d5[0]===255,h5=new Uint8Array(0);function K1(n){const{data:i,width:o,height:s,channels:u,depth:f}=n,v=Math.ceil(f/8)*u,h=Math.ceil(f/8*u*o),b=new Uint8Array(s*h);let x=h5,T=0,D,R;for(let C=0;C<s;C++){switch(D=i.subarray(T+1,T+1+h),R=b.subarray(C*h,(C+1)*h),i[T]){case 0:s2(D,R,h);break;case 1:l2(D,R,h,v);break;case 2:c2(D,R,x,h);break;case 3:u2(D,R,x,h,v);break;case 4:f2(D,R,x,h,v);break;default:throw new Error(`Unsupported filter: ${i[T]}`)}x=R,T+=h+1}if(f===16){const C=new Uint16Array(b.buffer);if(p5)for(let Z=0;Z<C.length;Z++)C[Z]=g5(C[Z]);return C}else return b}function g5(n){return(n&255)<<8|n>>8&255}const Bp=Uint8Array.of(137,80,78,71,13,10,26,10);function Z1(n){if(!y5(n.readBytes(Bp.length)))throw new Error("wrong PNG signature")}function y5(n){if(n.length<Bp.length)return!1;for(let i=0;i<Bp.length;i++)if(n[i]!==Bp[i])return!1;return!0}const m5="tEXt",x5=0,d2=new TextDecoder("latin1");function b5(n){if(w5(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const v5=/^[\u0000-\u00FF]*$/;function w5(n){if(!v5.test(n))throw new Error("invalid latin1 text")}function S5(n,i,o){const s=p2(i);n[s]=C5(i,o-s.length-1)}function p2(n){for(n.mark();n.readByte()!==x5;);const i=n.offset;n.reset();const o=d2.decode(n.readBytes(i-n.offset-1));return n.skip(1),b5(o),o}function C5(n,i){return d2.decode(n.readBytes(i))}const El={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},o0={UNKNOWN:-1,DEFLATE:0},J1={UNKNOWN:-1,ADAPTIVE:0},a0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Lp={NONE:0,BACKGROUND:1,PREVIOUS:2},s0={SOURCE:0,OVER:1};class T5 extends R0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(i,o={}){super(i);const{checkCrc:s=!1}=o;this._checkCrc=s,this._inflator=new G1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=o0.UNKNOWN,this._filterMethod=J1.UNKNOWN,this._interlaceMethod=a0.UNKNOWN,this._colorType=El.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Z1(this);!this._end;){const i=this.readUint32(),o=this.readChars(4);this.decodeChunk(i,o)}return this.decodeImage(),this._png}decodeApng(){for(Z1(this);!this._end;){const i=this.readUint32(),o=this.readChars(4);this.decodeApngChunk(i,o)}return this.decodeApngImage(),this._apng}decodeChunk(i,o){const s=this.offset;switch(o){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(i);break;case"IDAT":this.decodeIDAT(i);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(i);break;case"iCCP":this.decodeiCCP(i);break;case m5:S5(this._png.text,this,i);break;case"pHYs":this.decodepHYs();break;default:this.skip(i);break}if(this.offset-s!==i)throw new Error(`Length mismatch while decoding chunk ${o}`);this._checkCrc?X1(this,i+4,o):this.skip(4)}decodeApngChunk(i,o){const s=this.offset;switch(o!=="fdAT"&&o!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),o){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(i);break;default:this.decodeChunk(i,o),this.offset=s+i;break}if(this.offset-s!==i)throw new Error(`Length mismatch while decoding chunk ${o}`);this._checkCrc?X1(this,i+4,o):this.skip(4)}decodeIHDR(){const i=this._png;i.width=this.readUint32(),i.height=this.readUint32(),i.depth=j5(this.readUint8());const o=this.readUint8();this._colorType=o;let s;switch(o){case El.GREYSCALE:s=1;break;case El.TRUECOLOUR:s=3;break;case El.INDEXED_COLOUR:s=1;break;case El.GREYSCALE_ALPHA:s=2;break;case El.TRUECOLOUR_ALPHA:s=4;break;case El.UNKNOWN:default:throw new Error(`Unknown color type: ${o}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==o0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const i={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(i)}decodePLTE(i){if(i%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${i}`);const o=i/3;this._hasPalette=!0;const s=[];this._palette=s;for(let u=0;u<o;u++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(i){this._writingDataChunks=!0;const o=i,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,o)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(i)}decodeFDAT(i){this._writingDataChunks=!0;let o=i,s=this.offset+this.byteOffset;if(s+=4,o-=4,this._inflator.push(new Uint8Array(this.buffer,s,o)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(i)}decodetRNS(i){switch(this._colorType){case El.GREYSCALE:case El.TRUECOLOUR:{if(i%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${i}`);if(i/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${i/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(i/2);for(let o=0;o<i/2;o++)this._transparency[o]=this.readUint16();break}case El.INDEXED_COLOUR:{if(i>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${i} vs ${this._palette.length})`);let o=0;for(;o<i;o++){const s=this.readByte();this._palette[o].push(s)}for(;o<this._palette.length;o++)this._palette[o].push(255);break}case El.UNKNOWN:case El.GREYSCALE_ALPHA:case El.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(i){const o=p2(this),s=this.readUint8();if(s!==o0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const u=this.readBytes(i-o.length-2);this._png.iccEmbeddedProfile={name:o,profile:t5(u)}}decodepHYs(){const i=this.readUint32(),o=this.readUint32(),s=this.readByte();this._png.resolution={x:i,y:o,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let i=0;i<this._numberOfFrames;i++){const o={sequenceNumber:this._frames[i].sequenceNumber,delayNumber:this._frames[i].delayNumber,delayDenominator:this._frames[i].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(i);if(s){if(s.data=K1({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),i===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)o.data=s.data;else{const u=this._apng.frames.at(i-1);this.disposeFrame(s,u,o),this.addFrameDataToCanvas(o,s)}this._apng.frames.push(o)}}return this._apng}disposeFrame(i,o,s){switch(i.disposeOp){case Lp.NONE:break;case Lp.BACKGROUND:for(let u=0;u<this._png.height;u++)for(let f=0;f<this._png.width;f++){const v=(u*i.width+f)*this._png.channels;for(let h=0;h<this._png.channels;h++)s.data[v+h]=0}break;case Lp.PREVIOUS:s.data.set(o.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(i,o){const s=1<<this._png.depth,u=(f,v)=>{const h=((f+o.yOffset)*this._png.width+o.xOffset+v)*this._png.channels,b=(f*o.width+v)*this._png.channels;return{index:h,frameIndex:b}};switch(o.blendOp){case s0.SOURCE:for(let f=0;f<o.height;f++)for(let v=0;v<o.width;v++){const{index:h,frameIndex:b}=u(f,v);for(let x=0;x<this._png.channels;x++)i.data[h+x]=o.data[b+x]}break;case s0.OVER:for(let f=0;f<o.height;f++)for(let v=0;v<o.width;v++){const{index:h,frameIndex:b}=u(f,v);for(let x=0;x<this._png.channels;x++){const T=o.data[b+this._png.channels-1]/s,D=x%(this._png.channels-1)===0?1:o.data[b+x],R=Math.floor(T*D+(1-T)*i.data[h+x]);i.data[h+x]+=R}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const i=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==J1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===a0.NO_INTERLACE)this._png.data=K1({data:i,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===a0.ADAM7)this._png.data=c5({data:i,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const i=this._inflator.result,o=this._frames.at(-1);o?o.data=i:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Lp.NONE,blendOp:s0.SOURCE,data:i}),this._inflator=new G1,this._writingDataChunks=!1}}function j5(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var Q1;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(Q1||(Q1={}));function k5(n,i){return new T5(n,i).decode()}var Zn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function l0(){Zn.console&&typeof Zn.console.log=="function"&&Zn.console.log.apply(Zn.console,arguments)}var Vr={log:l0,warn:function(n){Zn.console&&(typeof Zn.console.warn=="function"?Zn.console.warn.apply(Zn.console,arguments):l0.call(null,arguments))},error:function(n){Zn.console&&(typeof Zn.console.error=="function"?Zn.console.error.apply(Zn.console,arguments):l0(n))}};function c0(n,i,o){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){tf(s.response,i,o)},s.onerror=function(){Vr.error("could not download file")},s.send()}function ey(n){var i=new XMLHttpRequest;i.open("HEAD",n,!1);try{i.send()}catch{}return i.status>=200&&i.status<=299}function zp(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}}var tf=Zn.saveAs||((typeof window>"u"?"undefined":Tr(window))!=="object"||window!==Zn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,i,o){var s=Zn.URL||Zn.webkitURL,u=document.createElement("a");i=i||n.name||"download",u.download=i,u.rel="noopener",typeof n=="string"?(u.href=n,u.origin!==location.origin?ey(u.href)?c0(n,i,o):zp(u,u.target="_blank"):zp(u)):(u.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(u.href)},4e4),setTimeout(function(){zp(u)},0))}:"msSaveOrOpenBlob"in navigator?function(n,i,o){if(i=i||n.name||"download",typeof n=="string")if(ey(n))c0(n,i,o);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){zp(s)})}else navigator.msSaveOrOpenBlob((function(u,f){return f===void 0?f={autoBom:!1}:Tr(f)!=="object"&&(Vr.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u})(n,o),i)}:function(n,i,o,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return c0(n,i,o);var u=n.type==="application/octet-stream",f=/constructor/i.test(Zn.HTMLElement)||Zn.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||u&&f)&&(typeof FileReader>"u"?"undefined":Tr(FileReader))==="object"){var h=new FileReader;h.onloadend=function(){var T=h.result;T=v?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=T:location=T,s=null},h.readAsDataURL(n)}else{var b=Zn.URL||Zn.webkitURL,x=b.createObjectURL(n);s?s.location=x:location.href=x,s=null,setTimeout(function(){b.revokeObjectURL(x)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function h2(n){var i;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var o=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(h){return[parseInt(h[1]),parseInt(h[2]),parseInt(h[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(h){return[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(h){return[parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16),parseInt(h[3]+h[3],16)]}}],s=0;s<o.length;s++){var u=o[s].re,f=o[s].process,v=u.exec(n);v&&(i=f(v),this.r=i[0],this.g=i[1],this.b=i[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var h=this.r.toString(16),b=this.g.toString(16),x=this.b.toString(16);return h.length==1&&(h="0"+h),b.length==1&&(b="0"+b),x.length==1&&(x="0"+x),"#"+h+b+x}}var Op=Zn.atob.bind(Zn),ty=Zn.btoa.bind(Zn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function u0(n,i){var o=n[0],s=n[1],u=n[2],f=n[3];o=js(o,s,u,f,i[0],7,-680876936),f=js(f,o,s,u,i[1],12,-389564586),u=js(u,f,o,s,i[2],17,606105819),s=js(s,u,f,o,i[3],22,-1044525330),o=js(o,s,u,f,i[4],7,-176418897),f=js(f,o,s,u,i[5],12,1200080426),u=js(u,f,o,s,i[6],17,-1473231341),s=js(s,u,f,o,i[7],22,-45705983),o=js(o,s,u,f,i[8],7,1770035416),f=js(f,o,s,u,i[9],12,-1958414417),u=js(u,f,o,s,i[10],17,-42063),s=js(s,u,f,o,i[11],22,-1990404162),o=js(o,s,u,f,i[12],7,1804603682),f=js(f,o,s,u,i[13],12,-40341101),u=js(u,f,o,s,i[14],17,-1502002290),o=ks(o,s=js(s,u,f,o,i[15],22,1236535329),u,f,i[1],5,-165796510),f=ks(f,o,s,u,i[6],9,-1069501632),u=ks(u,f,o,s,i[11],14,643717713),s=ks(s,u,f,o,i[0],20,-373897302),o=ks(o,s,u,f,i[5],5,-701558691),f=ks(f,o,s,u,i[10],9,38016083),u=ks(u,f,o,s,i[15],14,-660478335),s=ks(s,u,f,o,i[4],20,-405537848),o=ks(o,s,u,f,i[9],5,568446438),f=ks(f,o,s,u,i[14],9,-1019803690),u=ks(u,f,o,s,i[3],14,-187363961),s=ks(s,u,f,o,i[8],20,1163531501),o=ks(o,s,u,f,i[13],5,-1444681467),f=ks(f,o,s,u,i[2],9,-51403784),u=ks(u,f,o,s,i[7],14,1735328473),o=As(o,s=ks(s,u,f,o,i[12],20,-1926607734),u,f,i[5],4,-378558),f=As(f,o,s,u,i[8],11,-2022574463),u=As(u,f,o,s,i[11],16,1839030562),s=As(s,u,f,o,i[14],23,-35309556),o=As(o,s,u,f,i[1],4,-1530992060),f=As(f,o,s,u,i[4],11,1272893353),u=As(u,f,o,s,i[7],16,-155497632),s=As(s,u,f,o,i[10],23,-1094730640),o=As(o,s,u,f,i[13],4,681279174),f=As(f,o,s,u,i[0],11,-358537222),u=As(u,f,o,s,i[3],16,-722521979),s=As(s,u,f,o,i[6],23,76029189),o=As(o,s,u,f,i[9],4,-640364487),f=As(f,o,s,u,i[12],11,-421815835),u=As(u,f,o,s,i[15],16,530742520),o=Ns(o,s=As(s,u,f,o,i[2],23,-995338651),u,f,i[0],6,-198630844),f=Ns(f,o,s,u,i[7],10,1126891415),u=Ns(u,f,o,s,i[14],15,-1416354905),s=Ns(s,u,f,o,i[5],21,-57434055),o=Ns(o,s,u,f,i[12],6,1700485571),f=Ns(f,o,s,u,i[3],10,-1894986606),u=Ns(u,f,o,s,i[10],15,-1051523),s=Ns(s,u,f,o,i[1],21,-2054922799),o=Ns(o,s,u,f,i[8],6,1873313359),f=Ns(f,o,s,u,i[15],10,-30611744),u=Ns(u,f,o,s,i[6],15,-1560198380),s=Ns(s,u,f,o,i[13],21,1309151649),o=Ns(o,s,u,f,i[4],6,-145523070),f=Ns(f,o,s,u,i[11],10,-1120210379),u=Ns(u,f,o,s,i[2],15,718787259),s=Ns(s,u,f,o,i[9],21,-343485551),n[0]=Du(o,n[0]),n[1]=Du(s,n[1]),n[2]=Du(u,n[2]),n[3]=Du(f,n[3])}function Kp(n,i,o,s,u,f){return i=Du(Du(i,n),Du(s,f)),Du(i<<u|i>>>32-u,o)}function js(n,i,o,s,u,f,v){return Kp(i&o|~i&s,n,i,u,f,v)}function ks(n,i,o,s,u,f,v){return Kp(i&s|o&~s,n,i,u,f,v)}function As(n,i,o,s,u,f,v){return Kp(i^o^s,n,i,u,f,v)}function Ns(n,i,o,s,u,f,v){return Kp(o^(i|~s),n,i,u,f,v)}function g2(n){var i,o=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=n.length;i+=64)u0(s,A5(n.substring(i-64,i)));n=n.substring(i-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<n.length;i++)u[i>>2]|=n.charCodeAt(i)<<(i%4<<3);if(u[i>>2]|=128<<(i%4<<3),i>55)for(u0(s,u),i=0;i<16;i++)u[i]=0;return u[14]=8*o,u0(s,u),s}function A5(n){var i,o=[];for(i=0;i<64;i+=4)o[i>>2]=n.charCodeAt(i)+(n.charCodeAt(i+1)<<8)+(n.charCodeAt(i+2)<<16)+(n.charCodeAt(i+3)<<24);return o}var ny="0123456789abcdef".split("");function N5(n){for(var i="",o=0;o<4;o++)i+=ny[n>>8*o+4&15]+ny[n>>8*o&15];return i}function _5(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function A0(n){return g2(n).map(_5).join("")}var L5=(function(n){for(var i=0;i<n.length;i++)n[i]=N5(n[i]);return n.join("")})(g2("hello"))!="5d41402abc4b2a76b9719d911017c592";function Du(n,i){if(L5){var o=(65535&n)+(65535&i);return(n>>16)+(i>>16)+(o>>16)<<16|65535&o}return n+i&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function N0(n,i){var o,s,u,f;if(n!==o){for(var v=(u=n,f=1+(256/n.length|0),new Array(f+1).join(u)),h=[],b=0;b<256;b++)h[b]=b;var x=0;for(b=0;b<256;b++){var T=h[b];x=(x+T+v.charCodeAt(b))%256,h[b]=h[x],h[x]=T}o=n,s=h}else h=s;var D=i.length,R=0,C=0,Z="";for(b=0;b<D;b++)C=(C+(T=h[R=(R+1)%256]))%256,h[R]=h[C],h[C]=T,v=h[(h[R]+h[C])%256],Z+=String.fromCharCode(i.charCodeAt(b)^v);return Z}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var iy={print:4,modify:8,copy:16,"annot-forms":32};function Of(n,i,o,s){this.v=1,this.r=2;var u=192;n.forEach(function(h){if(iy.perm!==void 0)throw new Error("Invalid permission: "+h);u+=iy[h]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var f=(i+this.padding).substr(0,32),v=(o+this.padding).substr(0,32);this.O=this.processOwnerPassword(f,v),this.P=-(1+(255^u)),this.encryptionKey=A0(f+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=N0(this.encryptionKey,this.padding)}function If(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var i="",o=n.length,s=0;s<o;s++){var u=n.charCodeAt(s);i+=u<33||u===35||u===37||u===40||u===41||u===47||u===60||u===62||u===91||u===93||u===123||u===125||u>126?"#"+("0"+u.toString(16)).slice(-2):n[s]}return i}function ry(n){if(Tr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var i={};this.subscribe=function(o,s,u){if(u=u||!1,typeof o!="string"||typeof s!="function"||typeof u!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");i.hasOwnProperty(o)||(i[o]={});var f=Math.random().toString(35);return i[o][f]=[s,!!u],f},this.unsubscribe=function(o){for(var s in i)if(i[s][o])return delete i[s][o],Object.keys(i[s]).length===0&&delete i[s],!0;return!1},this.publish=function(o){if(i.hasOwnProperty(o)){var s=Array.prototype.slice.call(arguments,1),u=[];for(var f in i[o]){var v=i[o][f];try{v[0].apply(n,s)}catch(h){Zn.console&&Vr.error("jsPDF PubSub Error",h.message,h)}v[1]&&u.push(f)}u.length&&u.forEach(this.unsubscribe)}},this.getTopics=function(){return i}}function Yp(n){if(!(this instanceof Yp))return new Yp(n);var i="opacity,stroke-opacity".split(",");for(var o in n)n.hasOwnProperty(o)&&i.indexOf(o)>=0&&(this[o]=n[o]);this.id="",this.objectNumber=-1}function y2(n,i){this.gState=n,this.matrix=i,this.id="",this.objectNumber=-1}function nf(n,i,o,s,u){if(!(this instanceof nf))return new nf(n,i,o,s,u);this.type=n==="axial"?2:3,this.coords=i,this.colors=o,y2.call(this,s,u)}function Uf(n,i,o,s,u){if(!(this instanceof Uf))return new Uf(n,i,o,s,u);this.boundingBox=n,this.xStep=i,this.yStep=o,this.stream="",this.cloneIndex=0,y2.call(this,s,u)}function jn(n){var i,o=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],u=arguments[2],f=arguments[3],v=[],h=1,b=16,x="S",T=null;Tr(n=n||{})==="object"&&(o=n.orientation,s=n.unit||s,u=n.format||u,f=n.compress||n.compressPdf||f,(T=n.encryption||null)!==null&&(T.userPassword=T.userPassword||"",T.ownerPassword=T.ownerPassword||"",T.userPermissions=T.userPermissions||[]),h=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(i=n.precision),n.floatPrecision!==void 0&&(b=n.floatPrecision),x=n.defaultPathOperation||"S"),v=n.filters||(f===!0?["FlateEncode"]:v),s=s||"mm",o=(""+(o||"P")).toLowerCase();var D=n.putOnlyUsedFonts||!1,R={},C={internal:{},__private__:{}};C.__private__.PubSub=ry;var Z="1.3",O=C.__private__.getPdfVersion=function(){return Z};C.__private__.setPdfVersion=function(w){Z=w};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return P};var H=C.__private__.getPageFormat=function(w){return P[w]};u=u||"a4";var ae="compat",ce="advanced",q=ae;function se(){this.saveGraphicsState(),pe(new Vt(Mn,0,0,-Mn,0,an()*Mn).toString()+" cm"),this.setFontSize(this.getFontSize()/Mn),x="n",q=ce}function X(){this.restoreGraphicsState(),x="S",q=ae}var _=C.__private__.combineFontStyleAndFontWeight=function(w,W){if(w=="bold"&&W=="normal"||w=="bold"&&W==400||w=="normal"&&W=="italic"||w=="bold"&&W=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return W&&(w=W==400||W==="normal"?w==="italic"?"italic":"normal":W!=700&&W!=="bold"||w!=="normal"?(W==700?"bold":W)+""+w:"bold"),w};C.advancedAPI=function(w){var W=q===ae;return W&&se.call(this),typeof w!="function"||(w(this),W&&X.call(this)),this},C.compatAPI=function(w){var W=q===ce;return W&&X.call(this),typeof w!="function"||(w(this),W&&se.call(this)),this},C.isAdvancedAPI=function(){return q===ce};var E,V=function(w){if(q!==ce)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=C.roundToPrecision=C.__private__.roundToPrecision=function(w,W){var me=i||W;if(isNaN(w)||isNaN(me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(me).replace(/0+$/,"")};E=C.hpf=C.__private__.hpf=typeof b=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return $(w,b)}:b==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return $(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return $(w,16)};var k=C.f2=C.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return $(w,2)},S=C.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return $(w,3)},J=C.scale=C.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return q===ae?w*Mn:q===ce?w:void 0},re=function(w){return J((function(W){return q===ae?an()-W:q===ce?W:void 0})(w))};C.__private__.setPrecision=C.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(i=parseInt(w,10))};var ye,K="00000000000000000000000000000000",te=C.__private__.getFileId=function(){return K},ge=C.__private__.setFileId=function(w){return K=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():K.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),T!==null&&(Un=new Of(T.userPermissions,T.userPassword,T.ownerPassword,K)),K};C.setFileId=function(w){return ge(w),this},C.getFileId=function(){return te()};var je=C.__private__.convertDateToPDFDate=function(w){var W=w.getTimezoneOffset(),me=W<0?"+":"-",Ne=Math.floor(Math.abs(W/60)),Ue=Math.abs(W%60),it=[me,B(Ne),"'",B(Ue),"'"].join("");return["D:",w.getFullYear(),B(w.getMonth()+1),B(w.getDate()),B(w.getHours()),B(w.getMinutes()),B(w.getSeconds()),it].join("")},be=C.__private__.convertPDFDateToDate=function(w){var W=parseInt(w.substr(2,4),10),me=parseInt(w.substr(6,2),10)-1,Ne=parseInt(w.substr(8,2),10),Ue=parseInt(w.substr(10,2),10),it=parseInt(w.substr(12,2),10),pt=parseInt(w.substr(14,2),10);return new Date(W,me,Ne,Ue,it,pt,0)},F=C.__private__.setCreationDate=function(w){var W;if(w===void 0&&(w=new Date),w instanceof Date)W=je(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");W=w}return ye=W},A=C.__private__.getCreationDate=function(w){var W=ye;return w==="jsDate"&&(W=be(ye)),W};C.setCreationDate=function(w){return F(w),this},C.getCreationDate=function(w){return A(w)};var M,B=C.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},de=C.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},Ae=0,Ee=[],Ge=[],Pe=0,nt=[],Ke=[],wt=!1,St=Ge;C.__private__.setCustomOutputDestination=function(w){wt=!0,St=w};var Bt=function(w){wt||(St=w)};C.__private__.resetCustomOutputDestination=function(){wt=!1,St=Ge};var pe=C.__private__.out=function(w){return w=w.toString(),Pe+=w.length+1,St.push(w),St},_t=C.__private__.write=function(w){return pe(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},pn=C.__private__.getArrayBuffer=function(w){for(var W=w.length,me=new ArrayBuffer(W),Ne=new Uint8Array(me);W--;)Ne[W]=w.charCodeAt(W);return me},Zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return Zt};var dt=n.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(w){return dt=q===ce?w/Mn:w,this};var Qt,Et=C.__private__.getFontSize=C.getFontSize=function(){return q===ae?dt:dt*Mn},vn=n.R2L||!1;C.__private__.setR2L=C.setR2L=function(w){return vn=w,this},C.__private__.getR2L=C.getR2L=function(){return vn};var Jt,Wn=C.__private__.setZoomMode=function(w){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))Qt=w;else if(isNaN(w)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');Qt=w}else Qt=parseInt(w,10)};C.__private__.getZoomMode=function(){return Qt};var kt,Pt=C.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Jt=w};C.__private__.getPageMode=function(){return Jt};var fi=C.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');kt=w};C.__private__.getLayoutMode=function(){return kt},C.__private__.setDisplayMode=C.setDisplayMode=function(w,W,me){return Wn(w),fi(W),Pt(me),this};var ut={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(w){if(Object.keys(ut).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ut[w]},C.__private__.getDocumentProperties=function(){return ut},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(w){for(var W in ut)ut.hasOwnProperty(W)&&w[W]&&(ut[W]=w[W]);return this},C.__private__.setDocumentProperty=function(w,W){if(Object.keys(ut).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ut[w]=W};var Ct,Mn,Gt,Dn,Nn,en={},wn={},at=[],$t={},Ft={},qt={},Sn={},Oi=null,In=0,cn=[],Ht=new ry(C),yo=n.hotfixes||[],Wr={},_o={},Lo=[],Vt=function w(W,me,Ne,Ue,it,pt){if(!(this instanceof w))return new w(W,me,Ne,Ue,it,pt);isNaN(W)&&(W=1),isNaN(me)&&(me=0),isNaN(Ne)&&(Ne=0),isNaN(Ue)&&(Ue=1),isNaN(it)&&(it=0),isNaN(pt)&&(pt=0),this._matrix=[W,me,Ne,Ue,it,pt]};Object.defineProperty(Vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(Vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(Vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(Vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(Vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(Vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(Vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Vt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(w)},Vt.prototype.multiply=function(w){var W=w.sx*this.sx+w.shy*this.shx,me=w.sx*this.shy+w.shy*this.sy,Ne=w.shx*this.sx+w.sy*this.shx,Ue=w.shx*this.shy+w.sy*this.sy,it=w.tx*this.sx+w.ty*this.shx+this.tx,pt=w.tx*this.shy+w.ty*this.sy+this.ty;return new Vt(W,me,Ne,Ue,it,pt)},Vt.prototype.decompose=function(){var w=this.sx,W=this.shy,me=this.shx,Ne=this.sy,Ue=this.tx,it=this.ty,pt=Math.sqrt(w*w+W*W),Ut=(w/=pt)*me+(W/=pt)*Ne;me-=w*Ut,Ne-=W*Ut;var sn=Math.sqrt(me*me+Ne*Ne);return Ut/=sn,w*(Ne/=sn)<W*(me/=sn)&&(w=-w,W=-W,Ut=-Ut,pt=-pt),{scale:new Vt(pt,0,0,sn,0,0),translate:new Vt(1,0,0,1,Ue,it),rotate:new Vt(w,W,-W,w,0,0),skew:new Vt(1,0,Ut,1,0,0)}},Vt.prototype.toString=function(w){return this.join(" ")},Vt.prototype.inversed=function(){var w=this.sx,W=this.shy,me=this.shx,Ne=this.sy,Ue=this.tx,it=this.ty,pt=1/(w*Ne-W*me),Ut=Ne*pt,sn=-W*pt,ln=-me*pt,Xn=w*pt;return new Vt(Ut,sn,ln,Xn,-Ut*Ue-ln*it,-sn*Ue-Xn*it)},Vt.prototype.applyToPoint=function(w){var W=w.x*this.sx+w.y*this.shx+this.tx,me=w.x*this.shy+w.y*this.sy+this.ty;return new Ra(W,me)},Vt.prototype.applyToRectangle=function(w){var W=this.applyToPoint(w),me=this.applyToPoint(new Ra(w.x+w.w,w.y+w.h));return new Yr(W.x,W.y,me.x-W.x,me.y-W.y)},Vt.prototype.clone=function(){var w=this.sx,W=this.shy,me=this.shx,Ne=this.sy,Ue=this.tx,it=this.ty;return new Vt(w,W,me,Ne,Ue,it)},C.Matrix=Vt;var zo=C.matrixMult=function(w,W){return W.multiply(w)},da=new Vt(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=da;var Jo=function(w,W){if(!Ft[w]){var me=(W instanceof nf?"Sh":"P")+(Object.keys($t).length+1).toString(10);W.id=me,Ft[w]=me,$t[me]=W,Ht.publish("addPattern",W)}};C.ShadingPattern=nf,C.TilingPattern=Uf,C.addShadingPattern=function(w,W){return V("addShadingPattern()"),Jo(w,W),this},C.beginTilingPattern=function(w){V("beginTilingPattern()"),ya(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},C.endTilingPattern=function(w,W){V("endTilingPattern()"),W.stream=Ke[M].join(`
`),Jo(w,W),Ht.publish("endTilingPattern",W),Lo.pop().restore()};var bt,ui=C.__private__.newObject=function(){var w=Jn();return ur(w,!0),w},Jn=C.__private__.newObjectDeferred=function(){return Ae++,Ee[Ae]=function(){return Pe},Ae},ur=function(w,W){return W=typeof W=="boolean"&&W,Ee[w]=Pe,W&&pe(w+" 0 obj"),w},Hi=C.__private__.newAdditionalObject=function(){var w={objId:Jn(),content:""};return nt.push(w),w},jr=Jn(),vi=Jn(),yi=C.__private__.decodeColorString=function(w){var W=w.split(" ");if(W.length!==2||W[1]!=="g"&&W[1]!=="G")W.length!==5||W[4]!=="k"&&W[4]!=="K"||(W=[(1-W[0])*(1-W[3]),(1-W[1])*(1-W[3]),(1-W[2])*(1-W[3]),"r"]);else{var me=parseFloat(W[0]);W=[me,me,me,"r"]}for(var Ne="#",Ue=0;Ue<3;Ue++)Ne+=("0"+Math.floor(255*parseFloat(W[Ue])).toString(16)).slice(-2);return Ne},mo=C.__private__.encodeColorString=function(w){var W;typeof w=="string"&&(w={ch1:w});var me=w.ch1,Ne=w.ch2,Ue=w.ch3,it=w.ch4,pt=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof me=="string"&&me.charAt(0)!=="#"){var Ut=new h2(me);if(Ut.ok)me=Ut.toHex();else if(!/^\d*\.?\d*$/.test(me))throw new Error('Invalid color "'+me+'" passed to jsPDF.encodeColorString.')}if(typeof me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(me)&&(me="#"+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]),typeof me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(me)){var sn=parseInt(me.substr(1),16);me=sn>>16&255,Ne=sn>>8&255,Ue=255&sn}if(Ne===void 0||it===void 0&&me===Ne&&Ne===Ue)W=typeof me=="string"?me+" "+pt[0]:w.precision===2?k(me/255)+" "+pt[0]:S(me/255)+" "+pt[0];else if(it===void 0||Tr(it)==="object"){if(it&&!isNaN(it.a)&&it.a===0)return["1.","1.","1.",pt[1]].join(" ");W=typeof me=="string"?[me,Ne,Ue,pt[1]].join(" "):w.precision===2?[k(me/255),k(Ne/255),k(Ue/255),pt[1]].join(" "):[S(me/255),S(Ne/255),S(Ue/255),pt[1]].join(" ")}else W=typeof me=="string"?[me,Ne,Ue,it,pt[2]].join(" "):w.precision===2?[k(me),k(Ne),k(Ue),k(it),pt[2]].join(" "):[S(me),S(Ne),S(Ue),S(it),pt[2]].join(" ");return W},Qo=C.__private__.getFilters=function(){return v},_a=C.__private__.putStream=function(w){var W=(w=w||{}).data||"",me=w.filters||Qo(),Ne=w.alreadyAppliedFilters||[],Ue=w.addLength1||!1,it=W.length,pt=w.objectId,Ut=function(Ni){return Ni};if(T!==null&&pt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");T!==null&&(Ut=Un.encryptor(pt,0));var sn={};me===!0&&(me=["FlateEncode"]);var ln=w.additionalKeyValues||[],Xn=(sn=jn.API.processDataByFilters!==void 0?jn.API.processDataByFilters(W,me):{data:W,reverseChain:[]}).reverseChain+(Array.isArray(Ne)?Ne.join(" "):Ne.toString());if(sn.data.length!==0&&(ln.push({key:"Length",value:sn.data.length}),Ue===!0&&ln.push({key:"Length1",value:it})),Xn.length!=0)if(Xn.split("/").length-1==1)ln.push({key:"Filter",value:Xn});else{ln.push({key:"Filter",value:"["+Xn+"]"});for(var pi=0;pi<ln.length;pi+=1)if(ln[pi].key==="DecodeParms"){for(var Dr=[],ji=0;ji<sn.reverseChain.split("/").length-1;ji+=1)Dr.push("null");Dr.push(ln[pi].value),ln[pi].value="["+Dr.join(" ")+"]"}}pe("<<");for(var Ii=0;Ii<ln.length;Ii++)pe("/"+ln[Ii].key+" "+ln[Ii].value);pe(">>"),sn.data.length!==0&&(pe("stream"),pe(Ut(sn.data)),pe("endstream"))},hl=C.__private__.putPage=function(w){var W=w.number,me=w.data,Ne=w.objId,Ue=w.contentsObjId;ur(Ne,!0),pe("<</Type /Page"),pe("/Parent "+w.rootDictionaryObjId+" 0 R"),pe("/Resources "+w.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(E(w.mediaBox.bottomLeftX))+" "+parseFloat(E(w.mediaBox.bottomLeftY))+" "+E(w.mediaBox.topRightX)+" "+E(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&pe("/CropBox ["+E(w.cropBox.bottomLeftX)+" "+E(w.cropBox.bottomLeftY)+" "+E(w.cropBox.topRightX)+" "+E(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&pe("/BleedBox ["+E(w.bleedBox.bottomLeftX)+" "+E(w.bleedBox.bottomLeftY)+" "+E(w.bleedBox.topRightX)+" "+E(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&pe("/TrimBox ["+E(w.trimBox.bottomLeftX)+" "+E(w.trimBox.bottomLeftY)+" "+E(w.trimBox.topRightX)+" "+E(w.trimBox.topRightY)+"]"),w.artBox!==null&&pe("/ArtBox ["+E(w.artBox.bottomLeftX)+" "+E(w.artBox.bottomLeftY)+" "+E(w.artBox.topRightX)+" "+E(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&pe("/UserUnit "+w.userUnit),Ht.publish("putPage",{objId:Ne,pageContext:cn[W],pageNumber:W,page:me}),pe("/Contents "+Ue+" 0 R"),pe(">>"),pe("endobj");var it=me.join(`
`);return q===ce&&(it+=`
Q`),ur(Ue,!0),_a({data:it,filters:Qo(),objectId:Ue}),pe("endobj"),Ne},La=C.__private__.putPages=function(){var w,W,me=[];for(w=1;w<=In;w++)cn[w].objId=Jn(),cn[w].contentsObjId=Jn();for(w=1;w<=In;w++)me.push(hl({number:w,data:Ke[w],objId:cn[w].objId,contentsObjId:cn[w].contentsObjId,mediaBox:cn[w].mediaBox,cropBox:cn[w].cropBox,bleedBox:cn[w].bleedBox,trimBox:cn[w].trimBox,artBox:cn[w].artBox,userUnit:cn[w].userUnit,rootDictionaryObjId:jr,resourceDictionaryObjId:vi}));ur(jr,!0),pe("<</Type /Pages");var Ne="/Kids [";for(W=0;W<In;W++)Ne+=me[W]+" 0 R ";pe(Ne+"]"),pe("/Count "+In),pe(">>"),pe("endobj"),Ht.publish("postPutPages")},za=function(w){Ht.publish("putFont",{font:w,out:pe,newObject:ui,putStream:_a}),w.isAlreadyPutted!==!0&&(w.objectNumber=ui(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+If(w.postScriptName)),pe("/Subtype /Type1"),typeof w.encoding=="string"&&pe("/Encoding /"+w.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},ls=function(w){w.objectNumber=ui();var W=[];W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Form"}),W.push({key:"BBox",value:"["+[E(w.x),E(w.y),E(w.x+w.width),E(w.y+w.height)].join(" ")+"]"}),W.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var me=w.pages[1].join(`
`);_a({data:me,additionalKeyValues:W,objectId:w.objectNumber}),pe("endobj")},Yn=function(w,W){W||(W=21);var me=ui(),Ne=(function(pt,Ut){var sn,ln=[],Xn=1/(Ut-1);for(sn=0;sn<1;sn+=Xn)ln.push(sn);if(ln.push(1),pt[0].offset!=0){var pi={offset:0,color:pt[0].color};pt.unshift(pi)}if(pt[pt.length-1].offset!=1){var Dr={offset:1,color:pt[pt.length-1].color};pt.push(Dr)}for(var ji="",Ii=0,Ni=0;Ni<ln.length;Ni++){for(sn=ln[Ni];sn>pt[Ii+1].offset;)Ii++;var mr=pt[Ii].offset,Ki=(sn-mr)/(pt[Ii+1].offset-mr),Za=pt[Ii].color,wo=pt[Ii+1].color;ji+=de(Math.round((1-Ki)*Za[0]+Ki*wo[0]).toString(16))+de(Math.round((1-Ki)*Za[1]+Ki*wo[1]).toString(16))+de(Math.round((1-Ki)*Za[2]+Ki*wo[2]).toString(16))}return ji.trim()})(w.colors,W),Ue=[];Ue.push({key:"FunctionType",value:"0"}),Ue.push({key:"Domain",value:"[0.0 1.0]"}),Ue.push({key:"Size",value:"["+W+"]"}),Ue.push({key:"BitsPerSample",value:"8"}),Ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_a({data:Ne,additionalKeyValues:Ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:me}),pe("endobj"),w.objectNumber=ui(),pe("<< /ShadingType "+w.type),pe("/ColorSpace /DeviceRGB");var it="/Coords ["+E(parseFloat(w.coords[0]))+" "+E(parseFloat(w.coords[1]))+" ";w.type===2?it+=E(parseFloat(w.coords[2]))+" "+E(parseFloat(w.coords[3])):it+=E(parseFloat(w.coords[2]))+" "+E(parseFloat(w.coords[3]))+" "+E(parseFloat(w.coords[4]))+" "+E(parseFloat(w.coords[5])),pe(it+="]"),w.matrix&&pe("/Matrix ["+w.matrix.toString()+"]"),pe("/Function "+me+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},Po=function(w,W){var me=Jn(),Ne=ui();W.push({resourcesOid:me,objectOid:Ne}),w.objectNumber=Ne;var Ue=[];Ue.push({key:"Type",value:"/Pattern"}),Ue.push({key:"PatternType",value:"1"}),Ue.push({key:"PaintType",value:"1"}),Ue.push({key:"TilingType",value:"1"}),Ue.push({key:"BBox",value:"["+w.boundingBox.map(E).join(" ")+"]"}),Ue.push({key:"XStep",value:E(w.xStep)}),Ue.push({key:"YStep",value:E(w.yStep)}),Ue.push({key:"Resources",value:me+" 0 R"}),w.matrix&&Ue.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),_a({data:w.stream,additionalKeyValues:Ue,objectId:w.objectNumber}),pe("endobj")},Ti=function(w){for(var W in w.objectNumber=ui(),pe("<<"),w)switch(W){case"opacity":pe("/ca "+k(w[W]));break;case"stroke-opacity":pe("/CA "+k(w[W]))}pe(">>"),pe("endobj")},ea=function(w){ur(w.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var W in pe("/Font <<"),en)en.hasOwnProperty(W)&&(D===!1||D===!0&&R.hasOwnProperty(W))&&pe("/"+W+" "+en[W].objectNumber+" 0 R");pe(">>")})(),(function(){if(Object.keys($t).length>0){for(var W in pe("/Shading <<"),$t)$t.hasOwnProperty(W)&&$t[W]instanceof nf&&$t[W].objectNumber>=0&&pe("/"+W+" "+$t[W].objectNumber+" 0 R");Ht.publish("putShadingPatternDict"),pe(">>")}})(),(function(W){if(Object.keys($t).length>0){for(var me in pe("/Pattern <<"),$t)$t.hasOwnProperty(me)&&$t[me]instanceof C.TilingPattern&&$t[me].objectNumber>=0&&$t[me].objectNumber<W&&pe("/"+me+" "+$t[me].objectNumber+" 0 R");Ht.publish("putTilingPatternDict"),pe(">>")}})(w.objectOid),(function(){if(Object.keys(qt).length>0){var W;for(W in pe("/ExtGState <<"),qt)qt.hasOwnProperty(W)&&qt[W].objectNumber>=0&&pe("/"+W+" "+qt[W].objectNumber+" 0 R");Ht.publish("putGStateDict"),pe(">>")}})(),(function(){for(var W in pe("/XObject <<"),Wr)Wr.hasOwnProperty(W)&&Wr[W].objectNumber>=0&&pe("/"+W+" "+Wr[W].objectNumber+" 0 R");Ht.publish("putXobjectDict"),pe(">>")})(),pe(">>"),pe("endobj")},Ln=function(w){wn[w.fontName]=wn[w.fontName]||{},wn[w.fontName][w.fontStyle]=w.id},_s=function(w,W,me,Ne,Ue){var it={id:"F"+(Object.keys(en).length+1).toString(10),postScriptName:w,fontName:W,fontStyle:me,encoding:Ne,isStandardFont:Ue||!1,metadata:{}};return Ht.publish("addFont",{font:it,instance:this}),en[it.id]=it,Ln(it),it.id},Hn=C.__private__.pdfEscape=C.pdfEscape=function(w,W){return(function(me,Ne){var Ue,it,pt,Ut,sn,ln,Xn,pi,Dr;if(pt=(Ne=Ne||{}).sourceEncoding||"Unicode",sn=Ne.outputEncoding,(Ne.autoencode||sn)&&en[Ct].metadata&&en[Ct].metadata[pt]&&en[Ct].metadata[pt].encoding&&(Ut=en[Ct].metadata[pt].encoding,!sn&&en[Ct].encoding&&(sn=en[Ct].encoding),!sn&&Ut.codePages&&(sn=Ut.codePages[0]),typeof sn=="string"&&(sn=Ut[sn]),sn)){for(Xn=!1,ln=[],Ue=0,it=me.length;Ue<it;Ue++)(pi=sn[me.charCodeAt(Ue)])?ln.push(String.fromCharCode(pi)):ln.push(me[Ue]),ln[Ue].charCodeAt(0)>>8&&(Xn=!0);me=ln.join("")}for(Ue=me.length;Xn===void 0&&Ue!==0;)me.charCodeAt(Ue-1)>>8&&(Xn=!0),Ue--;if(!Xn)return me;for(ln=Ne.noBOM?[]:[254,255],Ue=0,it=me.length;Ue<it;Ue++){if((Dr=(pi=me.charCodeAt(Ue))>>8)>>8)throw new Error("Character at position "+Ue+" of string '"+me+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ln.push(Dr),ln.push(pi-(Dr<<8))}return String.fromCharCode.apply(void 0,ln)})(w,W).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ta=C.__private__.beginPage=function(w){Ke[++In]=[],cn[In]={objId:0,contentsObjId:0,userUnit:Number(h),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},zs(In),Bt(Ke[M])},pa=function(w,W){var me,Ne,Ue;switch(o=W||o,typeof w=="string"&&(me=H(w.toLowerCase()),Array.isArray(me)&&(Ne=me[0],Ue=me[1])),Array.isArray(w)&&(Ne=w[0]*Mn,Ue=w[1]*Mn),isNaN(Ne)&&(Ne=u[0],Ue=u[1]),(Ne>14400||Ue>14400)&&(Vr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ne=Math.min(14400,Ne),Ue=Math.min(14400,Ue)),u=[Ne,Ue],o.substr(0,1)){case"l":Ue>Ne&&(u=[Ue,Ne]);break;case"p":Ne>Ue&&(u=[Ue,Ne])}ta(u),En(Wi),pe(Kt),Wt!==0&&pe(Wt+" J"),Vn!==0&&pe(Vn+" j"),Ht.publish("addPage",{pageNumber:In})},Ls=function(w){w>0&&w<=In&&(Ke.splice(w,1),cn.splice(w,1),In--,M>In&&(M=In),this.setPage(M))},zs=function(w){w>0&&w<=In&&(M=w)},Ks=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return Ke.length-1},hc=function(w,W,me){var Ne,Ue=void 0;return me=me||{},w=w!==void 0?w:en[Ct].fontName,W=W!==void 0?W:en[Ct].fontStyle,Ne=w.toLowerCase(),wn[Ne]!==void 0&&wn[Ne][W]!==void 0?Ue=wn[Ne][W]:wn[w]!==void 0&&wn[w][W]!==void 0?Ue=wn[w][W]:me.disableWarning===!1&&Vr.warn("Unable to look up font label for font '"+w+"', '"+W+"'. Refer to getFontList() for available fonts."),Ue||me.noFallback||(Ue=wn.times[W])==null&&(Ue=wn.times.normal),Ue},Xi=C.__private__.putInfo=function(){var w=ui(),W=function(Ne){return Ne};for(var me in T!==null&&(W=Un.encryptor(w,0)),pe("<<"),pe("/Producer ("+Hn(W("jsPDF "+jn.version))+")"),ut)ut.hasOwnProperty(me)&&ut[me]&&pe("/"+me.substr(0,1).toUpperCase()+me.substr(1)+" ("+Hn(W(ut[me]))+")");pe("/CreationDate ("+Hn(W(ye))+")"),pe(">>"),pe("endobj")},Ps=C.__private__.putCatalog=function(w){var W=(w=w||{}).rootDictionaryObjId||jr;switch(ui(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+W+" 0 R"),Qt||(Qt="fullwidth"),Qt){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var me=""+Qt;me.substr(me.length-1)==="%"&&(Qt=parseInt(Qt)/100),typeof Qt=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+k(Qt)+"]")}switch(kt||(kt="continuous"),kt){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}Jt&&pe("/PageMode /"+Jt),Ht.publish("putCatalog"),pe(">>"),pe("endobj")},On=C.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(Ae+1)),pe("/Root "+Ae+" 0 R"),pe("/Info "+(Ae-1)+" 0 R"),T!==null&&pe("/Encrypt "+Un.oid+" 0 R"),pe("/ID [ <"+K+"> <"+K+"> ]"),pe(">>")},Bn=C.__private__.putHeader=function(){pe("%PDF-"+Z),pe("%")},Ds=C.__private__.putXRef=function(){var w="0000000000";pe("xref"),pe("0 "+(Ae+1)),pe("0000000000 65535 f ");for(var W=1;W<=Ae;W++)typeof Ee[W]=="function"?pe((w+Ee[W]()).slice(-10)+" 00000 n "):Ee[W]!==void 0?pe((w+Ee[W]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},Pa=C.__private__.buildDocument=function(){var w;Ae=0,Pe=0,Ge=[],Ee=[],nt=[],jr=Jn(),vi=Jn(),Bt(Ge),Ht.publish("buildDocument"),Bn(),La(),(function(){Ht.publish("putAdditionalObjects");for(var me=0;me<nt.length;me++){var Ne=nt[me];ur(Ne.objId,!0),pe(Ne.content),pe("endobj")}Ht.publish("postPutAdditionalObjects")})(),w=[],(function(){for(var me in en)en.hasOwnProperty(me)&&(D===!1||D===!0&&R.hasOwnProperty(me))&&za(en[me])})(),(function(){var me;for(me in qt)qt.hasOwnProperty(me)&&Ti(qt[me])})(),(function(){for(var me in Wr)Wr.hasOwnProperty(me)&&ls(Wr[me])})(),(function(me){var Ne;for(Ne in $t)$t.hasOwnProperty(Ne)&&($t[Ne]instanceof nf?Yn($t[Ne]):$t[Ne]instanceof Uf&&Po($t[Ne],me))})(w),Ht.publish("putResources"),w.forEach(ea),ea({resourcesOid:vi,objectOid:Number.MAX_SAFE_INTEGER}),Ht.publish("postPutResources"),T!==null&&(Un.oid=ui(),pe("<<"),pe("/Filter /Standard"),pe("/V "+Un.v),pe("/R "+Un.r),pe("/U <"+Un.toHexString(Un.U)+">"),pe("/O <"+Un.toHexString(Un.O)+">"),pe("/P "+Un.P),pe(">>"),pe("endobj")),Xi(),Ps();var W=Pe;return Ds(),On(),pe("startxref"),pe(""+W),pe("%%EOF"),Bt(Ke[M]),Ge.join(`
`)},Pr=C.__private__.getBlob=function(w){return new Blob([pn(w)],{type:"application/pdf"})},xo=C.output=C.__private__.output=(bt=function(w,W){switch(typeof(W=W||{})=="string"?W={filename:W}:W.filename=W.filename||"generated.pdf",w){case void 0:return Pa();case"save":C.save(W.filename);break;case"arraybuffer":return pn(Pa());case"blob":return Pr(Pa());case"bloburi":case"bloburl":if(Zn.URL!==void 0&&typeof Zn.URL.createObjectURL=="function")return Zn.URL&&Zn.URL.createObjectURL(Pr(Pa()))||void 0;Vr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var me="",Ne=Pa();try{me=ty(Ne)}catch{me=ty(unescape(encodeURIComponent(Ne)))}return"data:application/pdf;filename="+W.filename+";base64,"+me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Zn)==="[object Window]"){var Ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",it=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';W.pdfObjectUrl&&(Ue=W.pdfObjectUrl,it="");var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ue+'"'+it+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(W)+");<\/script></body></html>",Ut=Zn.open();return Ut!==null&&Ut.document.write(pt),Ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Zn)==="[object Window]"){var sn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(W.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+W.filename+'" width="500px" height="400px" /></body></html>',ln=Zn.open();if(ln!==null){ln.document.write(sn);var Xn=this;ln.document.documentElement.querySelector("#pdfViewer").onload=function(){ln.document.title=W.filename,ln.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Xn.output("bloburl"))}}return ln}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Zn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",W)+'"></iframe></body></html>',Dr=Zn.open();if(Dr!==null&&(Dr.document.write(pi),Dr.document.title=W.filename),Dr||typeof safari>"u")return Dr;break;case"datauri":case"dataurl":return Zn.document.location.href=this.output("datauristring",W);default:return null}},bt.foo=function(){try{return bt.apply(this,arguments)}catch(me){var w=me.stack||"";~w.indexOf(" at ")&&(w=w.split(" at ")[1]);var W="Error in function "+w.split(`
`)[0].split("<")[0]+": "+me.message;if(!Zn.console)throw new Error(W);Zn.console.error(W,me),Zn.alert&&alert(W)}},bt.foo.bar=bt,bt.foo),tr=function(w){return Array.isArray(yo)===!0&&yo.indexOf(w)>-1};switch(s){case"pt":Mn=1;break;case"mm":Mn=72/25.4;break;case"cm":Mn=72/2.54;break;case"in":Mn=72;break;case"px":Mn=tr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Mn=12;break;case"ex":Mn=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Mn=s}var Un=null;F(),ge();var di=C.__private__.getPageInfo=C.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:cn[w].objId,pageNumber:w,pageContext:cn[w]}},gl=C.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var W in cn)if(cn[W].objId===w)break;return di(W)},Ml=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:cn[M].objId,pageNumber:M,pageContext:cn[M]}};C.addPage=function(){return pa.apply(this,arguments),this},C.setPage=function(){return zs.apply(this,arguments),Bt.call(this,Ke[M]),this},C.insertPage=function(w){return this.addPage(),this.movePage(M,w),this},C.movePage=function(w,W){var me,Ne;if(w>W){me=Ke[w],Ne=cn[w];for(var Ue=w;Ue>W;Ue--)Ke[Ue]=Ke[Ue-1],cn[Ue]=cn[Ue-1];Ke[W]=me,cn[W]=Ne,this.setPage(W)}else if(w<W){me=Ke[w],Ne=cn[w];for(var it=w;it<W;it++)Ke[it]=Ke[it+1],cn[it]=cn[it+1];Ke[W]=me,cn[W]=Ne,this.setPage(W)}return this},C.deletePage=function(){return Ls.apply(this,arguments),this},C.__private__.text=C.text=function(w,W,me,Ne,Ue){var it,pt,Ut,sn,ln,Xn,pi,Dr,ji,Ii=(Ne=Ne||{}).scope||this;if(typeof w=="number"&&typeof W=="number"&&(typeof me=="string"||Array.isArray(me))){var Ni=me;me=W,W=w,w=Ni}if(arguments[3]instanceof Vt==0?(Ut=arguments[4],sn=arguments[5],Tr(pi=arguments[3])==="object"&&pi!==null||(typeof Ut=="string"&&(sn=Ut,Ut=null),typeof pi=="string"&&(sn=pi,pi=null),typeof pi=="number"&&(Ut=pi,pi=null),Ne={flags:pi,angle:Ut,align:sn})):(V("The transform parameter of text() with a Matrix value"),ji=Ue),isNaN(W)||isNaN(me)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return Ii;var mr,Ki="",Za=typeof Ne.lineHeightFactor=="number"?Ne.lineHeightFactor:nr,wo=Ii.internal.scaleFactor;function Bs(Ui){return Ui=Ui.split("	").join(Array(Ne.TabLen||9).join(" ")),Hn(Ui,pi)}function lo(Ui){for(var _i,dr=Ui.concat(),eo=[],tl=dr.length;tl--;)typeof(_i=dr.shift())=="string"?eo.push(_i):Array.isArray(Ui)&&(_i.length===1||_i[1]===void 0&&_i[2]===void 0)?eo.push(_i[0]):eo.push([_i[0],_i[1],_i[2]]);return eo}function Os(Ui,_i){var dr;if(typeof Ui=="string")dr=_i(Ui)[0];else if(Array.isArray(Ui)){for(var eo,tl,Fs=Ui.concat(),to=[],la=Fs.length;la--;)typeof(eo=Fs.shift())=="string"?to.push(_i(eo)[0]):Array.isArray(eo)&&typeof eo[0]=="string"&&(tl=_i(eo[0],eo[1],eo[2]),to.push([tl[0],tl[1],tl[2]]));dr=to}return dr}var Er=!1,ia=!0;if(typeof w=="string")Er=!0;else if(Array.isArray(w)){var co=w.concat();pt=[];for(var Ba,ri=co.length;ri--;)(typeof(Ba=co.shift())!="string"||Array.isArray(Ba)&&typeof Ba[0]!="string")&&(ia=!1);Er=ia}if(Er===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Ja=dt/Ii.internal.scaleFactor,Ol=Ja*(Za-1);switch(Ne.baseline){case"bottom":me-=Ol;break;case"top":me+=Ja-Ol;break;case"hanging":me+=Ja-2*Ol;break;case"middle":me+=Ja/2-Ol}if((Xn=Ne.maxWidth||0)>0&&(typeof w=="string"?w=Ii.splitTextToSize(w,Xn):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Ui,_i){return Ui.concat(Ii.splitTextToSize(_i,Xn))},[]))),it={text:w,x:W,y:me,options:Ne,mutex:{pdfEscape:Hn,activeFontKey:Ct,fonts:en,activeFontSize:dt}},Ht.publish("preProcessText",it),w=it.text,Ut=(Ne=it.options).angle,ji instanceof Vt==0&&Ut&&typeof Ut=="number"){Ut*=Math.PI/180,Ne.rotationDirection===0&&(Ut=-Ut),q===ce&&(Ut=-Ut);var gc=Math.cos(Ut),Oa=Math.sin(Ut);ji=new Vt(gc,Oa,-Oa,gc,0,0)}else Ut&&Ut instanceof Vt&&(ji=Ut);q!==ce||ji||(ji=da),(ln=Ne.charSpace||Rt)!==void 0&&(Ki+=E(J(ln))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Dr=Ne.horizontalScale)!==void 0&&(Ki+=E(100*Dr)+` Tz
`),Ne.lang;var Eo=-1,fs=Ne.renderingMode!==void 0?Ne.renderingMode:Ne.stroke,Il=Ii.internal.getCurrentPageInfo().pageContext;switch(fs){case 0:case!1:case"fill":Eo=0;break;case 1:case!0:case"stroke":Eo=1;break;case 2:case"fillThenStroke":Eo=2;break;case 3:case"invisible":Eo=3;break;case 4:case"fillAndAddForClipping":Eo=4;break;case 5:case"strokeAndAddPathForClipping":Eo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Eo=6;break;case 7:case"addToPathForClipping":Eo=7}var ds=Il.usedRenderingMode!==void 0?Il.usedRenderingMode:-1;Eo!==-1?Ki+=Eo+` Tr
`:ds!==-1&&(Ki+=`0 Tr
`),Eo!==-1&&(Il.usedRenderingMode=Eo),sn=Ne.align||"left";var ra,Jr=dt*Za,Ia=Ii.internal.pageSize.getWidth(),Is=en[Ct];ln=Ne.charSpace||Rt,Xn=Ne.maxWidth||0,pi=Object.assign({autoencode:!0,noBOM:!0},Ne.flags);var Qa=[],es=function(Ui){return Ii.getStringUnitWidth(Ui,{font:Is,charSpace:ln,fontSize:dt,doKerning:!1})*dt/wo};if(Object.prototype.toString.call(w)==="[object Array]"){var oa;pt=lo(w),sn!=="left"&&(ra=pt.map(es));var Qr,ps=0;if(sn==="right"){W-=ra[0],w=[],ri=pt.length;for(var ma=0;ma<ri;ma++)ma===0?(Qr=na(W),oa=rn(me)):(Qr=J(ps-ra[ma]),oa=-Jr),w.push([pt[ma],Qr,oa]),ps=ra[ma]}else if(sn==="center"){W-=ra[0]/2,w=[],ri=pt.length;for(var wi=0;wi<ri;wi++)wi===0?(Qr=na(W),oa=rn(me)):(Qr=J((ps-ra[wi])/2),oa=-Jr),w.push([pt[wi],Qr,oa]),ps=ra[wi]}else if(sn==="left"){w=[],ri=pt.length;for(var hs=0;hs<ri;hs++)w.push(pt[hs])}else if(sn==="justify"&&Is.encoding==="Identity-H"){w=[],ri=pt.length,Xn=Xn!==0?Xn:Ia;for(var Zi=0,fr=0;fr<ri;fr++)if(oa=fr===0?rn(me):-Jr,Qr=fr===0?na(W):Zi,fr<ri-1){var yc=J((Xn-ra[fr])/(pt[fr].split(" ").length-1)),xa=pt[fr].split(" ");w.push([xa[0]+" ",Qr,oa]),Zi=0;for(var el=1;el<xa.length;el++){var So=(es(xa[el-1]+" "+xa[el])-es(xa[el]))*wo+yc;el==xa.length-1?w.push([xa[el],So,0]):w.push([xa[el]+" ",So,0]),Zi-=So}}else w.push([pt[fr],Qr,oa]);w.push(["",Zi,0])}else{if(sn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],ri=pt.length,Xn=Xn!==0?Xn:Ia,fr=0;fr<ri;fr++){oa=fr===0?rn(me):-Jr,Qr=fr===0?na(W):0;var ml=pt[fr].split(" ").length-1,mc=ml>0?(Xn-ra[fr])/ml:0;fr<ri-1?Qa.push(E(J(mc))):Qa.push(0),w.push([pt[fr],Qr,oa])}}}(typeof Ne.R2L=="boolean"?Ne.R2L:vn)===!0&&(w=Os(w,function(Ui,_i,dr){return[Ui.split("").reverse().join(""),_i,dr]})),it={text:w,x:W,y:me,options:Ne,mutex:{pdfEscape:Hn,activeFontKey:Ct,fonts:en,activeFontSize:dt}},Ht.publish("postProcessText",it),w=it.text,mr=it.mutex.isHex||!1;var Ua=en[Ct].encoding;Ua!=="WinAnsiEncoding"&&Ua!=="StandardEncoding"||(w=Os(w,function(Ui,_i,dr){return[Bs(Ui),_i,dr]})),pt=lo(w),w=[];for(var Us,gs,aa,Ro=Array.isArray(pt[0])?1:0,ba="",ys=function(Ui,_i,dr){var eo="";return dr instanceof Vt?(dr=typeof Ne.angle=="number"?zo(dr,new Vt(1,0,0,1,Ui,_i)):zo(new Vt(1,0,0,1,Ui,_i),dr),q===ce&&(dr=zo(new Vt(1,0,0,-1,0,0),dr)),eo=dr.join(" ")+` Tm
`):eo=E(Ui)+" "+E(_i)+` Td
`,eo},sa=0;sa<pt.length;sa++){switch(ba="",Ro){case 1:aa=(mr?"<":"(")+pt[sa][0]+(mr?">":")"),Us=parseFloat(pt[sa][1]),gs=parseFloat(pt[sa][2]);break;case 0:aa=(mr?"<":"(")+pt[sa]+(mr?">":")"),Us=na(W),gs=rn(me)}Qa!==void 0&&Qa[sa]!==void 0&&(ba=Qa[sa]+` Tw
`),sa===0?w.push(ba+ys(Us,gs,ji)+aa):Ro===0?w.push(ba+aa):Ro===1&&w.push(ba+ys(Us,gs,ji)+aa)}w=Ro===0?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var ts=`BT
/`;return ts+=Ct+" "+dt+` Tf
`,ts+=E(dt*Za)+` TL
`,ts+=on+`
`,ts+=Ki,ts+=w,pe(ts+="ET"),R[Ct]=!0,Ii};var ha=C.__private__.clip=C.clip=function(w){return pe(w==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return ha("evenodd")},C.__private__.discardPath=C.discardPath=function(){return pe("n"),this};var bo=C.__private__.isValidStyle=function(w){var W=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(W=!0),W};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(w){return bo(w)&&(x=w),this};var Es=C.__private__.getStyle=C.getStyle=function(w){var W=x;switch(w){case"D":case"S":W="S";break;case"F":W="f";break;case"FD":case"DF":W="B";break;case"f":case"f*":case"B":case"B*":W=w}return W},Da=C.close=function(){return pe("h"),this};C.stroke=function(){return pe("S"),this},C.fill=function(w){return vo("f",w),this},C.fillEvenOdd=function(w){return vo("f*",w),this},C.fillStroke=function(w){return vo("B",w),this},C.fillStrokeEvenOdd=function(w){return vo("B*",w),this};var vo=function(w,W){Tr(W)==="object"?Vi(W,w):pe(w)},Vo=function(w){w===null||q===ce&&w===void 0||(w=Es(w),pe(w))};function At(w,W,me,Ne,Ue){var it=new Uf(W||this.boundingBox,me||this.xStep,Ne||this.yStep,this.gState,Ue||this.matrix);it.stream=this.stream;var pt=w+"$$"+this.cloneIndex+++"$$";return Jo(pt,it),it}var Vi=function(w,W){var me=Ft[w.key],Ne=$t[me];if(Ne instanceof nf)pe("q"),pe(so(W)),Ne.gState&&C.setGState(Ne.gState),pe(w.matrix.toString()+" cm"),pe("/"+me+" sh"),pe("Q");else if(Ne instanceof Uf){var Ue=new Vt(1,0,0,-1,0,an());w.matrix&&(Ue=Ue.multiply(w.matrix||da),me=At.call(Ne,w.key,w.boundingBox,w.xStep,w.yStep,Ue).id),pe("q"),pe("/Pattern cs"),pe("/"+me+" scn"),Ne.gState&&C.setGState(Ne.gState),pe(W),pe("Q")}},so=function(w){switch(w){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Zs=C.moveTo=function(w,W){return pe(E(J(w))+" "+E(re(W))+" m"),this},Ea=C.lineTo=function(w,W){return pe(E(J(w))+" "+E(re(W))+" l"),this},ga=C.curveTo=function(w,W,me,Ne,Ue,it){return pe([E(J(w)),E(re(W)),E(J(me)),E(re(Ne)),E(J(Ue)),E(re(it)),"c"].join(" ")),this};C.__private__.line=C.line=function(w,W,me,Ne,Ue){if(isNaN(w)||isNaN(W)||isNaN(me)||isNaN(Ne)||!bo(Ue))throw new Error("Invalid arguments passed to jsPDF.line");return q===ae?this.lines([[me-w,Ne-W]],w,W,[1,1],Ue||"S"):this.lines([[me-w,Ne-W]],w,W,[1,1]).stroke()},C.__private__.lines=C.lines=function(w,W,me,Ne,Ue,it){var pt,Ut,sn,ln,Xn,pi,Dr,ji,Ii,Ni,mr,Ki;if(typeof w=="number"&&(Ki=me,me=W,W=w,w=Ki),Ne=Ne||[1,1],it=it||!1,isNaN(W)||isNaN(me)||!Array.isArray(w)||!Array.isArray(Ne)||!bo(Ue)||typeof it!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zs(W,me),pt=Ne[0],Ut=Ne[1],ln=w.length,Ni=W,mr=me,sn=0;sn<ln;sn++)(Xn=w[sn]).length===2?(Ni=Xn[0]*pt+Ni,mr=Xn[1]*Ut+mr,Ea(Ni,mr)):(pi=Xn[0]*pt+Ni,Dr=Xn[1]*Ut+mr,ji=Xn[2]*pt+Ni,Ii=Xn[3]*Ut+mr,Ni=Xn[4]*pt+Ni,mr=Xn[5]*Ut+mr,ga(pi,Dr,ji,Ii,Ni,mr));return it&&Da(),Vo(Ue),this},C.path=function(w){for(var W=0;W<w.length;W++){var me=w[W],Ne=me.c;switch(me.op){case"m":Zs(Ne[0],Ne[1]);break;case"l":Ea(Ne[0],Ne[1]);break;case"c":ga.apply(this,Ne);break;case"h":Da()}}return this},C.__private__.rect=C.rect=function(w,W,me,Ne,Ue){if(isNaN(w)||isNaN(W)||isNaN(me)||isNaN(Ne)||!bo(Ue))throw new Error("Invalid arguments passed to jsPDF.rect");return q===ae&&(Ne=-Ne),pe([E(J(w)),E(re(W)),E(J(me)),E(J(Ne)),"re"].join(" ")),Vo(Ue),this},C.__private__.triangle=C.triangle=function(w,W,me,Ne,Ue,it,pt){if(isNaN(w)||isNaN(W)||isNaN(me)||isNaN(Ne)||isNaN(Ue)||isNaN(it)||!bo(pt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[me-w,Ne-W],[Ue-me,it-Ne],[w-Ue,W-it]],w,W,[1,1],pt,!0),this},C.__private__.roundedRect=C.roundedRect=function(w,W,me,Ne,Ue,it,pt){if(isNaN(w)||isNaN(W)||isNaN(me)||isNaN(Ne)||isNaN(Ue)||isNaN(it)||!bo(pt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ut=4/3*(Math.SQRT2-1);return Ue=Math.min(Ue,.5*me),it=Math.min(it,.5*Ne),this.lines([[me-2*Ue,0],[Ue*Ut,0,Ue,it-it*Ut,Ue,it],[0,Ne-2*it],[0,it*Ut,-Ue*Ut,it,-Ue,it],[2*Ue-me,0],[-Ue*Ut,0,-Ue,-it*Ut,-Ue,-it],[0,2*it-Ne],[0,-it*Ut,Ue*Ut,-it,Ue,-it]],w+Ue,W,[1,1],pt,!0),this},C.__private__.ellipse=C.ellipse=function(w,W,me,Ne,Ue){if(isNaN(w)||isNaN(W)||isNaN(me)||isNaN(Ne)||!bo(Ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var it=4/3*(Math.SQRT2-1)*me,pt=4/3*(Math.SQRT2-1)*Ne;return Zs(w+me,W),ga(w+me,W-pt,w+it,W-Ne,w,W-Ne),ga(w-it,W-Ne,w-me,W-pt,w-me,W),ga(w-me,W+pt,w-it,W+Ne,w,W+Ne),ga(w+it,W+Ne,w+me,W+pt,w+me,W),Vo(Ue),this},C.__private__.circle=C.circle=function(w,W,me,Ne){if(isNaN(w)||isNaN(W)||isNaN(me)||!bo(Ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,W,me,me,Ne)},C.setFont=function(w,W,me){return me&&(W=_(W,me)),Ct=hc(w,W,{disableWarning:!1}),this};var Ka=C.__private__.getFont=C.getFont=function(){return en[hc.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var w,W,me={};for(w in wn)if(wn.hasOwnProperty(w))for(W in me[w]=[],wn[w])wn[w].hasOwnProperty(W)&&me[w].push(W);return me},C.addFont=function(w,W,me,Ne,Ue){var it=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&it.indexOf(arguments[3])!==-1?Ue=arguments[3]:arguments[3]&&it.indexOf(arguments[3])==-1&&(me=_(me,Ne)),_s.call(this,w,W,me,Ue=Ue||"Identity-H")};var nr,Wi=n.lineWidth||.200025,cs=C.__private__.getLineWidth=C.getLineWidth=function(){return Wi},En=C.__private__.setLineWidth=C.setLineWidth=function(w){return Wi=w,pe(E(J(w))+" w"),this};C.__private__.setLineDash=jn.API.setLineDash=jn.API.setLineDashPattern=function(w,W){if(w=w||[],W=W||0,isNaN(W)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(me){return E(J(me))}).join(" "),W=E(J(W)),pe("["+w+"] "+W+" d"),this};var Qn=C.__private__.getLineHeight=C.getLineHeight=function(){return dt*nr};C.__private__.getLineHeight=C.getLineHeight=function(){return dt*nr};var Cn=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(nr=w),this},Ql=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return nr};Cn(n.lineHeight);var na=C.__private__.getHorizontalCoordinate=function(w){return J(w)},rn=C.__private__.getVerticalCoordinate=function(w){return q===ce?w:cn[M].mediaBox.topRightY-cn[M].mediaBox.bottomLeftY-J(w)},Tn=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(w){return E(na(w))},ni=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(w){return E(rn(w))},Kt=n.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return yi(Kt)},C.__private__.setStrokeColor=C.setDrawColor=function(w,W,me,Ne){return Kt=mo({ch1:w,ch2:W,ch3:me,ch4:Ne,pdfColorType:"draw",precision:2}),pe(Kt),this};var ii=n.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return yi(ii)},C.__private__.setFillColor=C.setFillColor=function(w,W,me,Ne){return ii=mo({ch1:w,ch2:W,ch3:me,ch4:Ne,pdfColorType:"fill",precision:2}),pe(ii),this};var on=n.textColor||"0 g",nu=C.__private__.getTextColor=C.getTextColor=function(){return yi(on)};C.__private__.setTextColor=C.setTextColor=function(w,W,me,Ne){return on=mo({ch1:w,ch2:W,ch3:me,ch4:Ne,pdfColorType:"text",precision:3}),this};var Rt=n.charSpace,Ai=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(Rt||0)};C.__private__.setCharSpace=C.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Rt=w,this};var Wt=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(w){var W=C.CapJoinStyles[w];if(W===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wt=W,pe(W+" J"),this};var Vn=0;C.__private__.setLineJoin=C.setLineJoin=function(w){var W=C.CapJoinStyles[w];if(W===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vn=W,pe(W+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(E(J(w))+" M"),this},C.GState=Yp,C.setGState=function(w){(w=typeof w=="string"?qt[Sn[w]]:Do(null,w)).equals(Oi)||(pe("/"+w.id+" gs"),Oi=w)};var Do=function(w,W){if(!w||!Sn[w]){var me=!1;for(var Ne in qt)if(qt.hasOwnProperty(Ne)&&qt[Ne].equals(W)){me=!0;break}if(me)W=qt[Ne];else{var Ue="GS"+(Object.keys(qt).length+1).toString(10);qt[Ue]=W,W.id=Ue}return w&&(Sn[w]=W.id),Ht.publish("addGState",W),W}};C.addGState=function(w,W){return Do(w,W),this},C.saveGraphicsState=function(){return pe("q"),at.push({key:Ct,size:dt,color:on}),this},C.restoreGraphicsState=function(){pe("Q");var w=at.pop();return Ct=w.key,dt=w.size,on=w.color,Oi=null,this},C.setCurrentTransformationMatrix=function(w){return pe(w.toString()+" cm"),this},C.comment=function(w){return pe("#"+w),this};var Ra=function(w,W){var me=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(it){isNaN(it)||(me=parseFloat(it))}});var Ne=W||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ne},set:function(it){isNaN(it)||(Ne=parseFloat(it))}});var Ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ue},set:function(it){Ue=it.toString()}}),this},Yr=function(w,W,me,Ne){Ra.call(this,w,W),this.type="rect";var Ue=me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ue},set:function(pt){isNaN(pt)||(Ue=parseFloat(pt))}});var it=Ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return it},set:function(pt){isNaN(pt)||(it=parseFloat(pt))}}),this},Rs=function(){this.page=In,this.currentPage=M,this.pages=Ke.slice(0),this.pagesContext=cn.slice(0),this.x=Gt,this.y=Dn,this.matrix=Nn,this.width=Ms(M),this.height=yl(M),this.outputDestination=St,this.id="",this.objectNumber=-1};Rs.prototype.restore=function(){In=this.page,M=this.currentPage,cn=this.pagesContext,Ke=this.pages,Gt=this.x,Dn=this.y,Nn=this.matrix,Bl(M,this.width),Js(M,this.height),St=this.outputDestination};var ya=function(w,W,me,Ne,Ue){Lo.push(new Rs),In=M=0,Ke=[],Gt=w,Dn=W,Nn=Ue,ta([me,Ne])};for(var Ma in C.beginFormObject=function(w,W,me,Ne,Ue){return ya(w,W,me,Ne,Ue),this},C.endFormObject=function(w){return(function(W){if(_o[W])Lo.pop().restore();else{var me=new Rs,Ne="Xo"+(Object.keys(Wr).length+1).toString(10);me.id=Ne,_o[W]=Ne,Wr[Ne]=me,Ht.publish("addFormObject",me),Lo.pop().restore()}})(w),this},C.doFormObject=function(w,W){var me=Wr[_o[w]];return pe("q"),pe(W.toString()+" cm"),pe("/"+me.id+" Do"),pe("Q"),this},C.getFormObject=function(w){var W=Wr[_o[w]];return{x:W.x,y:W.y,width:W.width,height:W.height,matrix:W.matrix}},C.save=function(w,W){return w=w||"generated.pdf",(W=W||{}).returnPromise=W.returnPromise||!1,W.returnPromise===!1?(tf(Pr(Pa()),w),typeof tf.unload=="function"&&Zn.setTimeout&&setTimeout(tf.unload,911),this):new Promise(function(me,Ne){try{var Ue=tf(Pr(Pa()),w);typeof tf.unload=="function"&&Zn.setTimeout&&setTimeout(tf.unload,911),me(Ue)}catch(it){Ne(it.message)}})},jn.API)jn.API.hasOwnProperty(Ma)&&(Ma==="events"&&jn.API.events.length?(function(w,W){var me,Ne,Ue;for(Ue=W.length-1;Ue!==-1;Ue--)me=W[Ue][0],Ne=W[Ue][1],w.subscribe.apply(w,[me].concat(typeof Ne=="function"?[Ne]:Ne))})(Ht,jn.API.events):C[Ma]=jn.API[Ma]);function Ms(w){return cn[w].mediaBox.topRightX-cn[w].mediaBox.bottomLeftX}function Bl(w,W){cn[w].mediaBox.topRightX=W+cn[w].mediaBox.bottomLeftX}function yl(w){return cn[w].mediaBox.topRightY-cn[w].mediaBox.bottomLeftY}function Js(w,W){cn[w].mediaBox.topRightY=W+cn[w].mediaBox.bottomLeftY}var Qs=C.getPageWidth=function(w){return Ms(w=w||M)/Mn},iu=C.setPageWidth=function(w,W){Bl(w,W*Mn)},an=C.getPageHeight=function(w){return yl(w=w||M)/Mn},us=C.setPageHeight=function(w,W){Js(w,W*Mn)};return C.internal={pdfEscape:Hn,getStyle:Es,getFont:Ka,getFontSize:Et,getCharSpace:Ai,getTextColor:nu,getLineHeight:Qn,getLineHeightFactor:Ql,getLineWidth:cs,write:_t,getHorizontalCoordinate:na,getVerticalCoordinate:rn,getCoordinateString:Tn,getVerticalCoordinateString:ni,collections:{},newObject:ui,newAdditionalObject:Hi,newObjectDeferred:Jn,newObjectDeferredBegin:ur,getFilters:Qo,putStream:_a,events:Ht,scaleFactor:Mn,pageSize:{getWidth:function(){return Qs(M)},setWidth:function(w){iu(M,w)},getHeight:function(){return an(M)},setHeight:function(w){us(M,w)}},encryptionOptions:T,encryption:Un,getEncryptor:function(w){return T!==null?Un.encryptor(w,0):function(W){return W}},output:xo,getNumberOfPages:Ks,get pages(){return Ke},out:pe,f2:k,f3:S,getPageInfo:di,getPageInfoByObjId:gl,getCurrentPageInfo:Ml,getPDFVersion:O,Point:Ra,Rectangle:Yr,Matrix:Vt,hasHotfix:tr},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return Qs(M)},set:function(w){iu(M,w)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return an(M)},set:function(w){us(M,w)},enumerable:!0,configurable:!0}),(function(w){for(var W=0,me=Zt.length;W<me;W++){var Ne=_s.call(this,w[W][0],w[W][1],w[W][2],Zt[W][3],!0);D===!1&&(R[Ne]=!0);var Ue=w[W][0].split("-");Ln({id:Ne,fontName:Ue[0],fontStyle:Ue[1]||""})}Ht.publish("addFonts",{fonts:en,dictionary:wn})}).call(C,Zt),Ct="F1",pa(u,o),Ht.publish("initialized"),C}Of.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Of.prototype.toHexString=function(n){return n.split("").map(function(i){return("0"+(255&i.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Of.prototype.hexToBytes=function(n){for(var i=[],o=0;o<n.length;o+=2)i.push(String.fromCharCode(parseInt(n.substr(o,2),16)));return i.join("")},Of.prototype.processOwnerPassword=function(n,i){return N0(A0(i).substr(0,5),n)},Of.prototype.encryptor=function(n,i){var o=A0(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&i,i>>8&255)).substr(0,10);return function(s){return N0(o,s)}},Yp.prototype.equals=function(n){var i,o="id,objectNumber,equals";if(!n||Tr(n)!==Tr(this))return!1;var s=0;for(i in this)if(!(o.indexOf(i)>=0)){if(this.hasOwnProperty(i)&&!n.hasOwnProperty(i)||this[i]!==n[i])return!1;s++}for(i in n)n.hasOwnProperty(i)&&o.indexOf(i)<0&&s--;return s===0},jn.API={events:[]},jn.version="3.0.4";var Ho=jn.API,M0=1,cf=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rf=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ci=function(n){return n.toFixed(2)},Pu=function(n){return n.toFixed(5)};Ho.__acroform__={};var pl=function(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n},oy=function(n){return n*M0},Pc=function(n){var i=new x2,o=nn.internal.getHeight(n)||0,s=nn.internal.getWidth(n)||0;return i.BBox=[0,0,Number(ci(s)),Number(ci(o))],i},z5=Ho.__acroform__.setBit=function(n,i){if(n=n||0,i=i||0,isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<i},P5=Ho.__acroform__.clearBit=function(n,i){if(n=n||0,i=i||0,isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<i)},D5=Ho.__acroform__.getBit=function(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<i?1:0},Xo=Ho.__acroform__.getBitForPdf=function(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return D5(n,i-1)},Ko=Ho.__acroform__.setBitForPdf=function(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return z5(n,i-1)},Zo=Ho.__acroform__.clearBitForPdf=function(n,i){if(isNaN(n)||isNaN(i))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return P5(n,i-1)},E5=Ho.__acroform__.calculateCoordinates=function(n,i){var o=i.internal.getHorizontalCoordinate,s=i.internal.getVerticalCoordinate,u=n[0],f=n[1],v=n[2],h=n[3],b={};return b.lowerLeft_X=o(u)||0,b.lowerLeft_Y=s(f+h)||0,b.upperRight_X=o(u+v)||0,b.upperRight_Y=s(f)||0,[Number(ci(b.lowerLeft_X)),Number(ci(b.lowerLeft_Y)),Number(ci(b.upperRight_X)),Number(ci(b.upperRight_Y))]},R5=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var i=[],o=n._V||n.DV,s=_0(n,o),u=n.scope.internal.getFont(n.fontName,n.fontStyle).id;i.push("/Tx BMC"),i.push("q"),i.push("BT"),i.push(n.scope.__private__.encodeColorString(n.color)),i.push("/"+u+" "+ci(s.fontSize)+" Tf"),i.push("1 0 0 1 0 0 Tm"),i.push(s.text),i.push("ET"),i.push("Q"),i.push("EMC");var f=Pc(n);return f.scope=n.scope,f.stream=i.join(`
`),f}},_0=function(n,i){var o=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},u=(i=(i=i.substr(0,1)=="("?i.substr(1):i).substr(i.length-1)==")"?i.substr(0,i.length-1):i).split(" ");u=n.multiline?u.map(function(k){return k.split(`
`)}):u.map(function(k){return[k]});var f=o,v=nn.internal.getHeight(n)||0;v=v<0?-v:v;var h=nn.internal.getWidth(n)||0;h=h<0?-h:h;var b=function(k,S,J){if(k+1<u.length){var re=S+" "+u[k+1][0];return Pp(re,n,J).width<=h-4}return!1};f++;e:for(;f>0;){i="",f--;var x,T,D=Pp("3",n,f).height,R=n.multiline?v-f:(v-D)/2,C=R+=2,Z=0,O=0,P=0;if(f<=0){i=`(...) Tj
`,i+="% Width of Text: "+Pp(i,n,f=12).width+", FieldWidth:"+h+`
`;break}for(var H="",ae=0,ce=0;ce<u.length;ce++)if(u.hasOwnProperty(ce)){var q=!1;if(u[ce].length!==1&&P!==u[ce].length-1){if((D+2)*(ae+2)+2>v)continue e;H+=u[ce][P],q=!0,O=ce,ce--}else{H=(H+=u[ce][P]+" ").substr(H.length-1)==" "?H.substr(0,H.length-1):H;var se=parseInt(ce),X=b(se,H,f),_=ce>=u.length-1;if(X&&!_){H+=" ",P=0;continue}if(X||_){if(_)O=se;else if(n.multiline&&(D+2)*(ae+2)+2>v)continue e}else{if(!n.multiline||(D+2)*(ae+2)+2>v)continue e;O=se}}for(var E="",V=Z;V<=O;V++){var $=u[V];if(n.multiline){if(V===O){E+=$[P]+" ",P=(P+1)%$.length;continue}if(V===Z){E+=$[$.length-1]+" ";continue}}E+=$[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,T=Pp(E,n,f).width,n.textAlign){case"right":x=h-T-2;break;case"center":x=(h-T)/2;break;default:x=2}i+=ci(x)+" "+ci(C)+` Td
`,i+="("+cf(E)+`) Tj
`,i+=-ci(x)+` 0 Td
`,C=-(f+2),T=0,Z=q?O:O+1,ae++,H=""}break}return s.text=i,s.fontSize=f,s},Pp=function(n,i,o){var s=i.scope.internal.getFont(i.fontName,i.fontStyle),u=i.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(o),charSpace:0})*parseFloat(o);return{height:i.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(o),charSpace:0})*parseFloat(o)*1.5,width:u}},M5={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},B5=function(n,i){var o={type:"reference",object:n};i.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===o.type&&s.object===o.object})===void 0&&i.internal.getPageInfo(n.page).pageContext.annotations.push(o)},O5=function(n,i){if(i.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(dc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(M5)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");M0=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new b2,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(o){o.internal.events.unsubscribe(o.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete o.internal.acroformPlugin.acroFormDictionaryRoot._eventID,o.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(o){o.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=o.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var u in s)if(s.hasOwnProperty(u)){var f=s[u];f.objId=void 0,f.hasAnnotation&&B5(f,o)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(o){if(o.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");o.internal.write("/AcroForm "+o.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(o){(function(s,u){var f=!s;for(var v in s||(u.internal.newObjectDeferredBegin(u.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),u.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||u.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(v)){var h=s[v],b=[],x=h.Rect;if(h.Rect&&(h.Rect=E5(h.Rect,u)),u.internal.newObjectDeferredBegin(h.objId,!0),h.DA=nn.createDefaultAppearanceStream(h),Tr(h)==="object"&&typeof h.getKeyValueListForStream=="function"&&(b=h.getKeyValueListForStream()),h.Rect=x,h.hasAppearanceStream&&!h.appearanceStreamContent){var T=R5(h);b.push({key:"AP",value:"<</N "+T+">>"}),u.internal.acroformPlugin.xForms.push(T)}if(h.appearanceStreamContent){var D="";for(var R in h.appearanceStreamContent)if(h.appearanceStreamContent.hasOwnProperty(R)){var C=h.appearanceStreamContent[R];if(D+="/"+R+" ",D+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var v in C)if(C.hasOwnProperty(v)){var Z=C[v];typeof Z=="function"&&(Z=Z.call(u,h)),D+="/"+v+" "+Z+" ",u.internal.acroformPlugin.xForms.indexOf(Z)>=0||u.internal.acroformPlugin.xForms.push(Z)}}else typeof(Z=C)=="function"&&(Z=Z.call(u,h)),D+="/"+v+" "+Z,u.internal.acroformPlugin.xForms.indexOf(Z)>=0||u.internal.acroformPlugin.xForms.push(Z);D+=">>"}b.push({key:"AP",value:`<<
`+D+">>"})}u.internal.putStream({additionalKeyValues:b,objectId:h.objId}),u.internal.out("endobj")}f&&(function(O,P){for(var H in O)if(O.hasOwnProperty(H)){var ae=H,ce=O[H];P.internal.newObjectDeferredBegin(ce.objId,!0),Tr(ce)==="object"&&typeof ce.putStream=="function"&&ce.putStream(),delete O[ae]}})(u.internal.acroformPlugin.xForms,u)})(o,n)}),n.internal.acroformPlugin.isInitialized=!0}},m2=Ho.__acroform__.arrayToPdfArray=function(n,i,o){var s=function(v){return v};if(Array.isArray(n)){for(var u="[",f=0;f<n.length;f++)switch(f!==0&&(u+=" "),Tr(n[f])){case"boolean":case"number":case"object":u+=n[f].toString();break;case"string":n[f].substr(0,1)!=="/"?(i!==void 0&&o&&(s=o.internal.getEncryptor(i)),u+="("+cf(s(n[f].toString()))+")"):u+=n[f].toString()}return u+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},f0=function(n,i,o){var s=function(u){return u};return i!==void 0&&o&&(s=o.internal.getEncryptor(i)),(n=n||"").toString(),"("+cf(s(n))+")"},Dc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Dc.prototype.toString=function(){return this.objId+" 0 R"},Dc.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Dc.prototype.getKeyValueListForStream=function(){var n=[],i=Object.getOwnPropertyNames(this).filter(function(f){return f!="content"&&f!="appearanceStreamContent"&&f!="scope"&&f!="objId"&&f.substring(0,1)!="_"});for(var o in i)if(Object.getOwnPropertyDescriptor(this,i[o]).configurable===!1){var s=i[o],u=this[s];u&&(Array.isArray(u)?n.push({key:s,value:m2(u,this.objId,this.scope)}):u instanceof Dc?(u.scope=this.scope,n.push({key:s,value:u.objId+" 0 R"})):typeof u!="function"&&n.push({key:s,value:u}))}return n};var x2=function(){Dc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,i=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(o){n=o.trim()},get:function(){return n||null}})};pl(x2,Dc);var b2=function(){Dc.call(this);var n,i=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return i.length>0?i:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return i}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var o=function(s){return s};return this.scope&&(o=this.scope.internal.getEncryptor(this.objId)),"("+cf(o(n))+")"}},set:function(o){n=o}})};pl(b2,Dc);var dc=function n(){Dc.call(this);var i=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return i},set:function(H){if(isNaN(H))throw new Error('Invalid value "'+H+'" for attribute F supplied.');i=H}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xo(i,3)},set:function(H){H?this.F=Ko(i,3):this.F=Zo(i,3)}});var o=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return o},set:function(H){if(isNaN(H))throw new Error('Invalid value "'+H+'" for attribute Ff supplied.');o=H}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(H){s=H!==void 0?H:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(H){s[0]=H}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(H){s[1]=H}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(H){s[2]=H}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(H){s[3]=H}});var u="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return u},set:function(H){switch(H){case"/Btn":case"/Tx":case"/Ch":case"/Sig":u=H;break;default:throw new Error('Invalid value "'+H+'" for attribute FT supplied.')}}});var f=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!f||f.length<1){if(this instanceof Gp)return;f="FieldObject"+n.FieldNum++}var H=function(ae){return ae};return this.scope&&(H=this.scope.internal.getEncryptor(this.objId)),"("+cf(H(f))+")"},set:function(H){f=H.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return f},set:function(H){f=H}});var v="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return v},set:function(H){v=H}});var h="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return h},set:function(H){h=H}});var b=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return b},set:function(H){b=H}});var x=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return x===void 0?50/M0:x},set:function(H){x=H}});var T="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return T},set:function(H){T=H}});var D="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!D||this instanceof Gp||this instanceof rf))return f0(D,this.objId,this.scope)},set:function(H){H=H.toString(),D=H}});var R=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(R)return this instanceof Xa==0?f0(R,this.objId,this.scope):R},set:function(H){H=H.toString(),R=this instanceof Xa==0?H.substr(0,1)==="("?Rf(H.substr(1,H.length-2)):Rf(H):H}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xa==1?Rf(R.substr(1,R.length-1)):R},set:function(H){H=H.toString(),R=this instanceof Xa==1?"/"+H:H}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(H){this.V=H}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof Xa==0?f0(C,this.objId,this.scope):C},set:function(H){H=H.toString(),C=this instanceof Xa==0?H.substr(0,1)==="("?Rf(H.substr(1,H.length-2)):Rf(H):H}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xa==1?Rf(C.substr(1,C.length-1)):C},set:function(H){H=H.toString(),C=this instanceof Xa==1?"/"+H:H}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Z,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(H){H=!!H,O=H}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Z)return Z},set:function(H){Z=H}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,1)},set:function(H){H?this.Ff=Ko(this.Ff,1):this.Ff=Zo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,2)},set:function(H){H?this.Ff=Ko(this.Ff,2):this.Ff=Zo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,3)},set:function(H){H?this.Ff=Ko(this.Ff,3):this.Ff=Zo(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(H){if([0,1,2].indexOf(H)===-1)throw new Error('Invalid value "'+H+'" for attribute Q supplied.');P=H}}),Object.defineProperty(this,"textAlign",{get:function(){var H;switch(P){case 0:default:H="left";break;case 1:H="center";break;case 2:H="right"}return H},configurable:!0,enumerable:!0,set:function(H){switch(H){case"right":case 2:P=2;break;case"center":case 1:P=1;break;default:P=0}}})};pl(dc,Dc);var qf=function(){dc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(o){n=o}});var i=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return m2(i,this.objId,this.scope)},set:function(o){var s,u;u=[],typeof(s=o)=="string"&&(u=(function(f,v,h){h||(h=1);for(var b,x=[];b=v.exec(f);)x.push(b[h]);return x})(s,/\((.*?)\)/g)),i=u}}),this.getOptions=function(){return i},this.setOptions=function(o){i=o,this.sort&&i.sort()},this.addOption=function(o){o=(o=o||"").toString(),i.push(o),this.sort&&i.sort()},this.removeOption=function(o,s){for(s=s||!1,o=(o=o||"").toString();i.indexOf(o)!==-1&&(i.splice(i.indexOf(o),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,18)},set:function(o){o?this.Ff=Ko(this.Ff,18):this.Ff=Zo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,19)},set:function(o){this.combo===!0&&(o?this.Ff=Ko(this.Ff,19):this.Ff=Zo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,20)},set:function(o){o?(this.Ff=Ko(this.Ff,20),i.sort()):this.Ff=Zo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,22)},set:function(o){o?this.Ff=Ko(this.Ff,22):this.Ff=Zo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,23)},set:function(o){o?this.Ff=Ko(this.Ff,23):this.Ff=Zo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,27)},set:function(o){o?this.Ff=Ko(this.Ff,27):this.Ff=Zo(this.Ff,27)}}),this.hasAppearanceStream=!1};pl(qf,dc);var Hf=function(){qf.call(this),this.fontName="helvetica",this.combo=!1};pl(Hf,qf);var Vf=function(){Hf.call(this),this.combo=!0};pl(Vf,Hf);var Ip=function(){Vf.call(this),this.edit=!0};pl(Ip,Vf);var Xa=function(){dc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,15)},set:function(o){o?this.Ff=Ko(this.Ff,15):this.Ff=Zo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,16)},set:function(o){o?this.Ff=Ko(this.Ff,16):this.Ff=Zo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,17)},set:function(o){o?this.Ff=Ko(this.Ff,17):this.Ff=Zo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,26)},set:function(o){o?this.Ff=Ko(this.Ff,26):this.Ff=Zo(this.Ff,26)}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};if(this.scope&&(o=this.scope.internal.getEncryptor(this.objId)),Object.keys(i).length!==0){var s,u=[];for(s in u.push("<<"),i)u.push("/"+s+" ("+cf(o(i[s]))+")");return u.push(">>"),u.join(`
`)}},set:function(o){Tr(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}})};pl(Xa,dc);var Up=function(){Xa.call(this),this.pushButton=!0};pl(Up,Xa);var Wf=function(){Xa.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(i){n=i!==void 0?i:[]}})};pl(Wf,Xa);var Gp=function(){var n,i;dc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(u){n=u}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return i},set:function(u){i=u}});var o,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var u=function(h){return h};this.scope&&(u=this.scope.internal.getEncryptor(this.objId));var f,v=[];for(f in v.push("<<"),s)v.push("/"+f+" ("+cf(u(s[f]))+")");return v.push(">>"),v.join(`
`)},set:function(u){Tr(u)==="object"&&(s=u)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(u){typeof u=="string"&&(s.CA=u)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return o.substr(1,o.length-1)},set:function(u){o="/"+u}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};pl(Gp,dc),Wf.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var i in this.Kids)if(this.Kids.hasOwnProperty(i)){var o=this.Kids[i];o.appearanceStreamContent=n.createAppearanceStream(o.optionName),o.caption=n.getCA()}},Wf.prototype.createOption=function(n){var i=new Gp;return i.Parent=this,i.optionName=n,this.Kids.push(i),I5.call(this.scope,i),i};var Fp=function(){Xa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nn.CheckBox.createAppearanceStream()};pl(Fp,Xa);var rf=function(){dc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,13)},set:function(i){i?this.Ff=Ko(this.Ff,13):this.Ff=Zo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,21)},set:function(i){i?this.Ff=Ko(this.Ff,21):this.Ff=Zo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,23)},set:function(i){i?this.Ff=Ko(this.Ff,23):this.Ff=Zo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,24)},set:function(i){i?this.Ff=Ko(this.Ff,24):this.Ff=Zo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,25)},set:function(i){i?this.Ff=Ko(this.Ff,25):this.Ff=Zo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,26)},set:function(i){i?this.Ff=Ko(this.Ff,26):this.Ff=Zo(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(i){Number.isInteger(i)&&(n=i)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};pl(rf,dc);var qp=function(){rf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xo(this.Ff,14)},set:function(n){n?this.Ff=Ko(this.Ff,14):this.Ff=Zo(this.Ff,14)}}),this.password=!0};pl(qp,rf);var nn={CheckBox:{createAppearanceStream:function(){return{N:{On:nn.CheckBox.YesNormal},D:{On:nn.CheckBox.YesPushDown,Off:nn.CheckBox.OffPushDown}}},YesPushDown:function(n){var i=Pc(n);i.scope=n.scope;var o=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,u=n.scope.__private__.encodeColorString(n.color),f=_0(n,n.caption);return o.push("0.749023 g"),o.push("0 0 "+ci(nn.internal.getWidth(n))+" "+ci(nn.internal.getHeight(n))+" re"),o.push("f"),o.push("BMC"),o.push("q"),o.push("0 0 1 rg"),o.push("/"+s+" "+ci(f.fontSize)+" Tf "+u),o.push("BT"),o.push(f.text),o.push("ET"),o.push("Q"),o.push("EMC"),i.stream=o.join(`
`),i},YesNormal:function(n){var i=Pc(n);i.scope=n.scope;var o=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),u=[],f=nn.internal.getHeight(n),v=nn.internal.getWidth(n),h=_0(n,n.caption);return u.push("1 g"),u.push("0 0 "+ci(v)+" "+ci(f)+" re"),u.push("f"),u.push("q"),u.push("0 0 1 rg"),u.push("0 0 "+ci(v-1)+" "+ci(f-1)+" re"),u.push("W"),u.push("n"),u.push("0 g"),u.push("BT"),u.push("/"+o+" "+ci(h.fontSize)+" Tf "+s),u.push(h.text),u.push("ET"),u.push("Q"),i.stream=u.join(`
`),i},OffPushDown:function(n){var i=Pc(n);i.scope=n.scope;var o=[];return o.push("0.749023 g"),o.push("0 0 "+ci(nn.internal.getWidth(n))+" "+ci(nn.internal.getHeight(n))+" re"),o.push("f"),i.stream=o.join(`
`),i}},RadioButton:{Circle:{createAppearanceStream:function(n){var i={D:{Off:nn.RadioButton.Circle.OffPushDown},N:{}};return i.N[n]=nn.RadioButton.Circle.YesNormal,i.D[n]=nn.RadioButton.Circle.YesPushDown,i},getCA:function(){return"l"},YesNormal:function(n){var i=Pc(n);i.scope=n.scope;var o=[],s=nn.internal.getWidth(n)<=nn.internal.getHeight(n)?nn.internal.getWidth(n)/4:nn.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var u=nn.internal.Bezier_C,f=Number((s*u).toFixed(5));return o.push("q"),o.push("1 0 0 1 "+Pu(nn.internal.getWidth(n)/2)+" "+Pu(nn.internal.getHeight(n)/2)+" cm"),o.push(s+" 0 m"),o.push(s+" "+f+" "+f+" "+s+" 0 "+s+" c"),o.push("-"+f+" "+s+" -"+s+" "+f+" -"+s+" 0 c"),o.push("-"+s+" -"+f+" -"+f+" -"+s+" 0 -"+s+" c"),o.push(f+" -"+s+" "+s+" -"+f+" "+s+" 0 c"),o.push("f"),o.push("Q"),i.stream=o.join(`
`),i},YesPushDown:function(n){var i=Pc(n);i.scope=n.scope;var o=[],s=nn.internal.getWidth(n)<=nn.internal.getHeight(n)?nn.internal.getWidth(n)/4:nn.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var u=Number((2*s).toFixed(5)),f=Number((u*nn.internal.Bezier_C).toFixed(5)),v=Number((s*nn.internal.Bezier_C).toFixed(5));return o.push("0.749023 g"),o.push("q"),o.push("1 0 0 1 "+Pu(nn.internal.getWidth(n)/2)+" "+Pu(nn.internal.getHeight(n)/2)+" cm"),o.push(u+" 0 m"),o.push(u+" "+f+" "+f+" "+u+" 0 "+u+" c"),o.push("-"+f+" "+u+" -"+u+" "+f+" -"+u+" 0 c"),o.push("-"+u+" -"+f+" -"+f+" -"+u+" 0 -"+u+" c"),o.push(f+" -"+u+" "+u+" -"+f+" "+u+" 0 c"),o.push("f"),o.push("Q"),o.push("0 g"),o.push("q"),o.push("1 0 0 1 "+Pu(nn.internal.getWidth(n)/2)+" "+Pu(nn.internal.getHeight(n)/2)+" cm"),o.push(s+" 0 m"),o.push(s+" "+v+" "+v+" "+s+" 0 "+s+" c"),o.push("-"+v+" "+s+" -"+s+" "+v+" -"+s+" 0 c"),o.push("-"+s+" -"+v+" -"+v+" -"+s+" 0 -"+s+" c"),o.push(v+" -"+s+" "+s+" -"+v+" "+s+" 0 c"),o.push("f"),o.push("Q"),i.stream=o.join(`
`),i},OffPushDown:function(n){var i=Pc(n);i.scope=n.scope;var o=[],s=nn.internal.getWidth(n)<=nn.internal.getHeight(n)?nn.internal.getWidth(n)/4:nn.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var u=Number((2*s).toFixed(5)),f=Number((u*nn.internal.Bezier_C).toFixed(5));return o.push("0.749023 g"),o.push("q"),o.push("1 0 0 1 "+Pu(nn.internal.getWidth(n)/2)+" "+Pu(nn.internal.getHeight(n)/2)+" cm"),o.push(u+" 0 m"),o.push(u+" "+f+" "+f+" "+u+" 0 "+u+" c"),o.push("-"+f+" "+u+" -"+u+" "+f+" -"+u+" 0 c"),o.push("-"+u+" -"+f+" -"+f+" -"+u+" 0 -"+u+" c"),o.push(f+" -"+u+" "+u+" -"+f+" "+u+" 0 c"),o.push("f"),o.push("Q"),i.stream=o.join(`
`),i}},Cross:{createAppearanceStream:function(n){var i={D:{Off:nn.RadioButton.Cross.OffPushDown},N:{}};return i.N[n]=nn.RadioButton.Cross.YesNormal,i.D[n]=nn.RadioButton.Cross.YesPushDown,i},getCA:function(){return"8"},YesNormal:function(n){var i=Pc(n);i.scope=n.scope;var o=[],s=nn.internal.calculateCross(n);return o.push("q"),o.push("1 1 "+ci(nn.internal.getWidth(n)-2)+" "+ci(nn.internal.getHeight(n)-2)+" re"),o.push("W"),o.push("n"),o.push(ci(s.x1.x)+" "+ci(s.x1.y)+" m"),o.push(ci(s.x2.x)+" "+ci(s.x2.y)+" l"),o.push(ci(s.x4.x)+" "+ci(s.x4.y)+" m"),o.push(ci(s.x3.x)+" "+ci(s.x3.y)+" l"),o.push("s"),o.push("Q"),i.stream=o.join(`
`),i},YesPushDown:function(n){var i=Pc(n);i.scope=n.scope;var o=nn.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+ci(nn.internal.getWidth(n))+" "+ci(nn.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+ci(nn.internal.getWidth(n)-2)+" "+ci(nn.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(ci(o.x1.x)+" "+ci(o.x1.y)+" m"),s.push(ci(o.x2.x)+" "+ci(o.x2.y)+" l"),s.push(ci(o.x4.x)+" "+ci(o.x4.y)+" m"),s.push(ci(o.x3.x)+" "+ci(o.x3.y)+" l"),s.push("s"),s.push("Q"),i.stream=s.join(`
`),i},OffPushDown:function(n){var i=Pc(n);i.scope=n.scope;var o=[];return o.push("0.749023 g"),o.push("0 0 "+ci(nn.internal.getWidth(n))+" "+ci(nn.internal.getHeight(n))+" re"),o.push("f"),i.stream=o.join(`
`),i}}},createDefaultAppearanceStream:function(n){var i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color);return"/"+i+" "+n.fontSize+" Tf "+o}};nn.internal={Bezier_C:.551915024494,calculateCross:function(n){var i=nn.internal.getWidth(n),o=nn.internal.getHeight(n),s=Math.min(i,o);return{x1:{x:(i-s)/2,y:(o-s)/2+s},x2:{x:(i-s)/2+s,y:(o-s)/2},x3:{x:(i-s)/2,y:(o-s)/2},x4:{x:(i-s)/2+s,y:(o-s)/2+s}}}},nn.internal.getWidth=function(n){var i=0;return Tr(n)==="object"&&(i=oy(n.Rect[2])),i},nn.internal.getHeight=function(n){var i=0;return Tr(n)==="object"&&(i=oy(n.Rect[3])),i};var I5=Ho.addField=function(n){if(O5(this,n),!(n instanceof dc))throw new Error("Invalid argument passed to jsPDF.addField.");var i;return(i=n).scope.internal.acroformPlugin.printedOut&&(i.scope.internal.acroformPlugin.printedOut=!1,i.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),i.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(i),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ho.AcroFormChoiceField=qf,Ho.AcroFormListBox=Hf,Ho.AcroFormComboBox=Vf,Ho.AcroFormEditBox=Ip,Ho.AcroFormButton=Xa,Ho.AcroFormPushButton=Up,Ho.AcroFormRadioButton=Wf,Ho.AcroFormCheckBox=Fp,Ho.AcroFormTextField=rf,Ho.AcroFormPasswordField=qp,Ho.AcroFormAppearance=nn,Ho.AcroForm={ChoiceField:qf,ListBox:Hf,ComboBox:Vf,EditBox:Ip,Button:Xa,PushButton:Up,RadioButton:Wf,CheckBox:Fp,TextField:rf,PasswordField:qp,Appearance:nn},jn.AcroForm={ChoiceField:qf,ListBox:Hf,ComboBox:Vf,EditBox:Ip,Button:Xa,PushButton:Up,RadioButton:Wf,CheckBox:Fp,TextField:rf,PasswordField:qp,Appearance:nn};jn.AcroForm;function v2(n){return n.reduce(function(i,o,s){return i[o]=s,i},{})}(function(n){var i="addImage_";n.__addimage__={};var o="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},u=n.__addimage__.getImageFileTypeByImageData=function(k,S){var J,re,ye,K,te,ge=o;if((S=S||o)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(X(k))for(te in s)for(ye=s[te],J=0;J<ye.length;J+=1){for(K=!0,re=0;re<ye[J].length;re+=1)if(ye[J][re]!==void 0&&ye[J][re]!==k[re]){K=!1;break}if(K===!0){ge=te;break}}else for(te in s)for(ye=s[te],J=0;J<ye.length;J+=1){for(K=!0,re=0;re<ye[J].length;re+=1)if(ye[J][re]!==void 0&&ye[J][re]!==k.charCodeAt(re)){K=!1;break}if(K===!0){ge=te;break}}return ge===o&&S!==o&&(ge=S),ge},f=function k(S){for(var J=this.internal.write,re=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var K=[];if(K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Image"}),K.push({key:"Width",value:S.width}),K.push({key:"Height",value:S.height}),S.colorSpace===H.INDEXED?K.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(K.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===H.DEVICE_CMYK&&K.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),K.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&K.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var te="",ge=0,je=S.transparency.length;ge<je;ge++)te+=S.transparency[ge]+" "+S.transparency[ge]+" ";K.push({key:"Mask",value:"["+te+"]"})}S.sMask!==void 0&&K.push({key:"SMask",value:S.objectId+1+" 0 R"});var be=S.filter!==void 0?["/"+S.filter]:void 0;if(re({data:S.data,additionalKeyValues:K,alreadyAppliedFilters:be,objectId:S.objectId}),J("endobj"),"sMask"in S&&S.sMask!==void 0){var F,A=(F=S.sMaskBitsPerComponent)!==null&&F!==void 0?F:S.bitsPerComponent,M={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:A,data:S.sMask};"filter"in S&&(M.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(A," /Columns ").concat(S.width),M.filter=S.filter),k.call(this,M)}if(S.colorSpace===H.INDEXED){var B=this.internal.newObject();re({data:E(new Uint8Array(S.palette)),objectId:B}),J("endobj")}},v=function(){var k=this.internal.collections[i+"images"];for(var S in k)f.call(this,k[S])},h=function(){var k,S=this.internal.collections[i+"images"],J=this.internal.write;for(var re in S)J("/I"+(k=S[re]).index,k.objectId,"0","R")},b=function(){this.internal.collections[i+"images"]||(this.internal.collections[i+"images"]={},this.internal.events.subscribe("putResources",v),this.internal.events.subscribe("putXobjectDict",h))},x=function(){var k=this.internal.collections[i+"images"];return b.call(this),k},T=function(){return Object.keys(this.internal.collections[i+"images"]).length},D=function(k){return typeof n["process"+k.toUpperCase()]=="function"},R=function(k){return Tr(k)==="object"&&k.nodeType===1},C=function(k,S){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var J=""+k.getAttribute("src");if(J.indexOf("data:image/")===0)return Op(unescape(J).split("base64,").pop());var re=n.loadFile(J,!0);if(re!==void 0)return re}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var ye;switch(S){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;default:ye="image/jpeg"}return Op(k.toDataURL(ye,1).split("base64,").pop())}},Z=function(k){var S=this.internal.collections[i+"images"];if(S){for(var J in S)if(k===S[J].alias)return S[J]}},O=function(k,S,J){return k||S||(k=-96,S=-96),k<0&&(k=-1*J.width*72/k/this.internal.scaleFactor),S<0&&(S=-1*J.height*72/S/this.internal.scaleFactor),k===0&&(k=S*J.width/J.height),S===0&&(S=k*J.height/J.width),[k,S]},P=function(k,S,J,re,ye,K){var te=O.call(this,J,re,ye),ge=this.internal.getCoordinateString,je=this.internal.getVerticalCoordinateString,be=x.call(this);if(J=te[0],re=te[1],be[ye.index]=ye,K){K*=Math.PI/180;var F=Math.cos(K),A=Math.sin(K),M=function(de){return de.toFixed(4)},B=[M(F),M(A),M(-1*A),M(F),0,0,"cm"]}this.internal.write("q"),K?(this.internal.write([1,"0","0",1,ge(k),je(S+re),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([ge(J),"0","0",ge(re),"0","0","cm"].join(" "))):this.internal.write([ge(J),"0","0",ge(re),ge(k),je(S+re),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},H=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ae=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ce=n.__addimage__.sHashCode=function(k){var S,J,re=0;if(typeof k=="string")for(J=k.length,S=0;S<J;S++)re=(re<<5)-re+k.charCodeAt(S),re|=0;else if(X(k))for(J=k.byteLength/2,S=0;S<J;S++)re=(re<<5)-re+k[S],re|=0;return re},q=n.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var S=!0;return k.length===0&&(S=!1),k.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(S=!1),S},se=n.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var S=k.indexOf(",");return S<0?null:k.substring(0,S).trim().endsWith("base64")?k.substring(S+1):null};n.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var X=n.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},_=n.__addimage__.binaryStringToUint8Array=function(k){for(var S=k.length,J=new Uint8Array(S),re=0;re<S;re++)J[re]=k.charCodeAt(re);return J},E=n.__addimage__.arrayBufferToBinaryString=function(k){for(var S="",J=X(k)?k:new Uint8Array(k),re=0;re<J.length;re+=8192)S+=String.fromCharCode.apply(null,J.subarray(re,re+8192));return S};n.addImage=function(){var k,S,J,re,ye,K,te,ge,je;if(typeof arguments[1]=="number"?(S=o,J=arguments[1],re=arguments[2],ye=arguments[3],K=arguments[4],te=arguments[5],ge=arguments[6],je=arguments[7]):(S=arguments[1],J=arguments[2],re=arguments[3],ye=arguments[4],K=arguments[5],te=arguments[6],ge=arguments[7],je=arguments[8]),Tr(k=arguments[0])==="object"&&!R(k)&&"imageData"in k){var be=k;k=be.imageData,S=be.format||S||o,J=be.x||J||0,re=be.y||re||0,ye=be.w||be.width||ye,K=be.h||be.height||K,te=be.alias||te,ge=be.compression||ge,je=be.rotation||be.angle||je}var F=this.internal.getFilters();if(ge===void 0&&F.indexOf("FlateEncode")!==-1&&(ge="SLOW"),isNaN(J)||isNaN(re))throw new Error("Invalid coordinates passed to jsPDF.addImage");b.call(this);var A=V.call(this,k,S,te,ge);return P.call(this,J,re,ye,K,A,je),this};var V=function(k,S,J,re){var ye,K,te;if(typeof k=="string"&&u(k)===o){k=unescape(k);var ge=$(k,!1);(ge!==""||(ge=n.loadFile(k,!0))!==void 0)&&(k=ge)}if(R(k)&&(k=C(k,S)),S=u(k,S),!D(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((te=J)==null||te.length===0)&&(J=(function(je){return typeof je=="string"||X(je)?ce(je):X(je.data)?ce(je.data):null})(k)),(ye=Z.call(this,J))||(k instanceof Uint8Array||S==="RGBA"||(K=k,k=_(k)),ye=this["process"+S.toUpperCase()](k,T.call(this),J,(function(je){return je&&typeof je=="string"&&(je=je.toUpperCase()),je in n.image_compression?je:ae.NONE})(re),K)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},$=n.__addimage__.convertBase64ToBinaryString=function(k,S){S=typeof S!="boolean"||S;var J,re="";if(typeof k=="string"){var ye;J=(ye=se(k))!==null&&ye!==void 0?ye:k;try{re=Op(J)}catch(K){if(S)throw q(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+K.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};n.getImageProperties=function(k){var S,J,re="";if(R(k)&&(k=C(k)),typeof k=="string"&&u(k)===o&&((re=$(k,!1))===""&&(re=n.loadFile(k)||""),k=re),J=u(k),!D(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(k instanceof Uint8Array||(k=_(k)),!(S=this["process"+J.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=J,S}})(jn.API),(function(n){var i=function(o){if(o!==void 0&&o!="")return!0};jn.API.events.push(["addPage",function(o){this.internal.getPageInfo(o.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(o){for(var s,u,f,v=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString,b=this.internal.getPageInfoByObjId(o.objId),x=o.pageContext.annotations,T=!1,D=0;D<x.length&&!T;D++)switch((s=x[D]).type){case"link":(i(s.options.url)||i(s.options.pageNumber))&&(T=!0);break;case"reference":case"text":case"freetext":T=!0}if(T!=0){this.internal.write("/Annots [");for(var R=0;R<x.length;R++){s=x[R];var C=this.internal.pdfEscape,Z=this.internal.getEncryptor(o.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),H=this.internal.getEncryptor(O.objId),ae=s.title||"Note";f="<</Type /Annot /Subtype /Text "+(u="/Rect ["+v(s.bounds.x)+" "+h(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w)+" "+h(s.bounds.y)+"] ")+"/Contents ("+C(H(s.contents))+")",f+=" /Popup "+P.objId+" 0 R",f+=" /P "+b.objId+" 0 R",f+=" /T ("+C(H(ae))+") >>",O.content=f;var ce=O.objId+" 0 R";f="<</Type /Annot /Subtype /Popup "+(u="/Rect ["+v(s.bounds.x+30)+" "+h(s.bounds.y+s.bounds.h)+" "+v(s.bounds.x+s.bounds.w+30)+" "+h(s.bounds.y)+"] ")+" /Parent "+ce,s.open&&(f+=" /Open true"),f+=" >>",P.content=f,this.internal.write(O.objId,"0 R",P.objId,"0 R");break;case"freetext":u="/Rect ["+v(s.bounds.x)+" "+h(s.bounds.y)+" "+v(s.bounds.x+s.bounds.w)+" "+h(s.bounds.y+s.bounds.h)+"] ";var q=s.color||"#000000";f="<</Type /Annot /Subtype /FreeText "+u+"/Contents ("+C(Z(s.contents))+")",f+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",f+=" /Border [0 0 0]",f+=" >>",this.internal.write(f);break;case"link":if(s.options.name){var se=this.annotations._nameMap[s.options.name];s.options.pageNumber=se.page,s.options.top=se.y}else s.options.top||(s.options.top=0);if(u="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",f="",s.options.url)f="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /A <</S /URI /URI ("+C(Z(s.options.url))+") >>";else if(s.options.pageNumber)switch(f="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":f+=" /Fit]";break;case"FitH":f+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,f+=" /FitV "+s.options.left+"]";break;default:var X=h(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),f+=" /XYZ "+s.options.left+" "+X+" "+s.options.zoom+"]"}f!=""&&(f+=" >>",this.internal.write(f))}}this.internal.write("]")}}]),n.createAnnotation=function(o){var s=this.internal.getCurrentPageInfo();switch(o.type){case"link":this.link(o.bounds.x,o.bounds.y,o.bounds.w,o.bounds.h,o);break;case"text":case"freetext":s.pageContext.annotations.push(o)}},n.link=function(o,s,u,f,v){var h=this.internal.getCurrentPageInfo(),b=this.internal.getCoordinateString,x=this.internal.getVerticalCoordinateString;h.pageContext.annotations.push({finalBounds:{x:b(o),y:x(s),w:b(o+u),h:x(s+f)},options:v,type:"link"})},n.textWithLink=function(o,s,u,f){var v,h,b=this.getTextWidth(o),x=this.internal.getLineHeight()/this.internal.scaleFactor;if(f.maxWidth!==void 0){h=f.maxWidth;var T=this.splitTextToSize(o,h).length;v=Math.ceil(x*T)}else h=b,v=x;return this.text(o,s,u,f),u+=.2*x,f.align==="center"&&(s-=b/2),f.align==="right"&&(s-=b),this.link(s,u-x,h,v,f),b},n.getTextWidth=function(o){var s=this.internal.getFontSize();return this.getStringUnitWidth(o)*s/this.internal.scaleFactor}})(jn.API),(function(n){var i={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},o={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},u=[1570,1571,1573,1575];n.__arabicParser__={};var f=n.__arabicParser__.isInArabicSubstitutionA=function(O){return i[O.charCodeAt(0)]!==void 0},v=n.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},h=n.__arabicParser__.isArabicEndLetter=function(O){return v(O)&&f(O)&&i[O.charCodeAt(0)].length<=2},b=n.__arabicParser__.isArabicAlfLetter=function(O){return v(O)&&u.indexOf(O.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return v(O)&&f(O)&&i[O.charCodeAt(0)].length>=1};var x=n.__arabicParser__.arabicLetterHasFinalForm=function(O){return v(O)&&f(O)&&i[O.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(O){return v(O)&&f(O)&&i[O.charCodeAt(0)].length>=3};var T=n.__arabicParser__.arabicLetterHasMedialForm=function(O){return v(O)&&f(O)&&i[O.charCodeAt(0)].length==4},D=n.__arabicParser__.resolveLigatures=function(O){var P=0,H=o,ae="",ce=0;for(P=0;P<O.length;P+=1)H[O.charCodeAt(P)]!==void 0?(ce++,typeof(H=H[O.charCodeAt(P)])=="number"&&(ae+=String.fromCharCode(H),H=o,ce=0),P===O.length-1&&(H=o,ae+=O.charAt(P-(ce-1)),P-=ce-1,ce=0)):(H=o,ae+=O.charAt(P-ce),P-=ce,ce=0);return ae};n.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&s[O.charCodeAt(0)]!==void 0};var R=n.__arabicParser__.getCorrectForm=function(O,P,H){return v(O)?f(O)===!1?-1:!x(O)||!v(P)&&!v(H)||!v(H)&&h(P)||h(O)&&!v(P)||h(O)&&b(P)||h(O)&&h(P)?0:T(O)&&v(P)&&!h(P)&&v(H)&&x(H)?3:h(O)||!v(H)?1:2:-1},C=function(O){var P=0,H=0,ae=0,ce="",q="",se="",X=(O=O||"").split("\\s+"),_=[];for(P=0;P<X.length;P+=1){for(_.push(""),H=0;H<X[P].length;H+=1)ce=X[P][H],q=X[P][H-1],se=X[P][H+1],v(ce)?(ae=R(ce,q,se),_[P]+=ae!==-1?String.fromCharCode(i[ce.charCodeAt(0)][ae]):ce):_[P]+=ce;_[P]=D(_[P])}return _.join(" ")},Z=n.__arabicParser__.processArabic=n.processArabic=function(){var O,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,H=[];if(Array.isArray(P)){var ae=0;for(H=[],ae=0;ae<P.length;ae+=1)Array.isArray(P[ae])?H.push([C(P[ae][0]),P[ae][1],P[ae][2]]):H.push([C(P[ae])]);O=H}else O=C(P);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};n.events.push(["preProcessText",Z])})(jn.API),jn.API.autoPrint=function(n){var i;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){i=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+i+" 0 R")})),this},(function(n){var i=function(){var o=void 0;Object.defineProperty(this,"pdf",{get:function(){return o},set:function(h){o=h}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(h){s=isNaN(h)||Number.isInteger(h)===!1||h<0?150:h,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var u=300;Object.defineProperty(this,"height",{get:function(){return u},set:function(h){u=isNaN(h)||Number.isInteger(h)===!1||h<0?300:h,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=u+1)}});var f=[];Object.defineProperty(this,"childNodes",{get:function(){return f},set:function(h){f=h}});var v={};Object.defineProperty(this,"style",{get:function(){return v},set:function(h){v=h}}),Object.defineProperty(this,"parentNode",{})};i.prototype.getContext=function(o,s){var u;if((o=o||"2d")!=="2d")return null;for(u in s)this.pdf.context2d.hasOwnProperty(u)&&(this.pdf.context2d[u]=s[u]);return this.pdf.context2d._canvas=this,this.pdf.context2d},i.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new i,this.canvas.pdf=this}])})(jn.API),(function(n){var i={left:0,top:0,bottom:0,right:0},o=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},i),this.internal.__cell__.margins.width=this.getPageWidth(),u.call(this))},u=function(){this.internal.__cell__.lastCell=new f,this.internal.__cell__.pages=1},f=function(){var b=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return b},set:function(O){b=O}});var x=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return x},set:function(O){x=O}});var T=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return T},set:function(O){T=O}});var D=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return D},set:function(O){D=O}});var R=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return R},set:function(O){R=O}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(O){C=O}});var Z=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Z},set:function(O){Z=O}}),this};f.prototype.clone=function(){return new f(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},f.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(b){return s.call(this),this.internal.__cell__.headerFunction=typeof b=="function"?b:void 0,this},n.getTextDimensions=function(b,x){s.call(this);var T=(x=x||{}).fontSize||this.getFontSize(),D=x.font||this.getFont(),R=x.scaleFactor||this.internal.scaleFactor,C=0,Z=0,O=0,P=this;if(!Array.isArray(b)&&typeof b!="string"){if(typeof b!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");b=String(b)}var H=x.maxWidth;H>0?typeof b=="string"?b=this.splitTextToSize(b,H):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(ce,q){return ce.concat(P.splitTextToSize(q,H))},[])):b=Array.isArray(b)?b:[b];for(var ae=0;ae<b.length;ae++)C<(O=this.getStringUnitWidth(b[ae],{font:D})*T)&&(C=O);return C!==0&&(Z=b.length),{w:C/=R,h:Math.max((Z*T*this.getLineHeightFactor()-T*(this.getLineHeightFactor()-1))/R,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var b=this.internal.__cell__.margins||i;return this.internal.__cell__.lastCell=new f(b.left,b.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var v=n.cell=function(){var b;b=arguments[0]instanceof f?arguments[0]:new f(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var x=this.internal.__cell__.lastCell,T=this.internal.__cell__.padding,D=this.internal.__cell__.margins||i,R=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return x.lineNumber!==void 0&&(x.lineNumber===b.lineNumber?(b.x=(x.x||0)+(x.width||0),b.y=x.y||0):x.y+x.height+b.height+D.bottom>this.getPageHeight()?(this.cellAddPage(),b.y=D.top,C&&R&&(this.printHeaderRow(b.lineNumber,!0),b.y+=R[0].height)):b.y=x.y+x.height||b.y),b.text[0]!==void 0&&(this.rect(b.x,b.y,b.width,b.height,o===!0?"FD":void 0),b.align==="right"?this.text(b.text,b.x+b.width-T,b.y+T,{align:"right",baseline:"top"}):b.align==="center"?this.text(b.text,b.x+b.width/2,b.y+T,{align:"center",baseline:"top",maxWidth:b.width-T-T}):this.text(b.text,b.x+T,b.y+T,{align:"left",baseline:"top",maxWidth:b.width-T-T})),this.internal.__cell__.lastCell=b,this};n.table=function(b,x,T,D,R){if(s.call(this),!T)throw new Error("No data for PDF table.");var C,Z,O,P,H=[],ae=[],ce=[],q={},se={},X=[],_=[],E=(R=R||{}).autoSize||!1,V=R.printHeaders!==!1,$=R.css&&R.css["font-size"]!==void 0?16*R.css["font-size"]:R.fontSize||12,k=R.margins||Object.assign({width:this.getPageWidth()},i),S=typeof R.padding=="number"?R.padding:3,J=R.headerBackgroundColor||"#c8c8c8",re=R.headerTextColor||"#000";if(u.call(this),this.internal.__cell__.printHeaders=V,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=re,this.setFontSize($),D==null)ae=H=Object.keys(T[0]),ce=H.map(function(){return"left"});else if(Array.isArray(D)&&Tr(D[0])==="object")for(H=D.map(function(be){return be.name}),ae=D.map(function(be){return be.prompt||be.name||""}),ce=D.map(function(be){return be.align||"left"}),C=0;C<D.length;C+=1)se[D[C].name]=.7499990551181103*D[C].width;else Array.isArray(D)&&typeof D[0]=="string"&&(ae=H=D,ce=H.map(function(){return"left"}));if(E||Array.isArray(D)&&typeof D[0]=="string")for(C=0;C<H.length;C+=1){for(q[P=H[C]]=T.map(function(be){return be[P]}),this.setFont(void 0,"bold"),X.push(this.getTextDimensions(ae[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Z=q[P],this.setFont(void 0,"normal"),O=0;O<Z.length;O+=1)X.push(this.getTextDimensions(Z[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[P]=Math.max.apply(null,X)+S+S,X=[]}if(V){var ye={};for(C=0;C<H.length;C+=1)ye[H[C]]={},ye[H[C]].text=ae[C],ye[H[C]].align=ce[C];var K=h.call(this,ye,se);_=H.map(function(be){return new f(b,x,se[be],K,ye[be].text,void 0,ye[be].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var te=D.reduce(function(be,F){return be[F.name]=F.align,be},{});for(C=0;C<T.length;C+=1){"rowStart"in R&&R.rowStart instanceof Function&&R.rowStart({row:C,data:T[C]},this);var ge=h.call(this,T[C],se);for(O=0;O<H.length;O+=1){var je=T[C][H[O]];"cellStart"in R&&R.cellStart instanceof Function&&R.cellStart({row:C,col:O,data:je},this),v.call(this,new f(b,x,se[H[O]],ge,je,C+2,te[H[O]]))}}return this.internal.__cell__.table_x=b,this.internal.__cell__.table_y=x,this};var h=function(b,x){var T=this.internal.__cell__.padding,D=this.internal.__cell__.table_font_size,R=this.internal.scaleFactor;return Object.keys(b).map(function(C){var Z=b[C];return this.splitTextToSize(Z.hasOwnProperty("text")?Z.text:Z,x[C]-T-T)},this).map(function(C){return this.getLineHeightFactor()*C.length*D/R+T+T},this).reduce(function(C,Z){return Math.max(C,Z)},0)};n.setTableHeaderRow=function(b){s.call(this),this.internal.__cell__.tableHeaderRow=b},n.printHeaderRow=function(b,x){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var T;if(o=!0,typeof this.internal.__cell__.headerFunction=="function"){var D=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new f(D[0],D[1],D[2],D[3],void 0,-1)}this.setFont(void 0,"bold");for(var R=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){T=this.internal.__cell__.tableHeaderRow[C].clone(),x&&(T.y=this.internal.__cell__.margins.top||0,R.push(T)),T.lineNumber=b;var Z=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),v.call(this,T),this.setTextColor(Z)}R.length>0&&this.setTableHeaderRow(R),this.setFont(void 0,"normal"),o=!1}})(jn.API);var w2={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},S2=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],L0=v2(S2),C2=[100,200,300,400,500,600,700,800,900],U5=v2(C2);function d0(n){var i=n.family.replace(/"|'/g,"").toLowerCase(),o=(function(f){return w2[f=f||"normal"]?f:"normal"})(n.style),s=(function(f){return f?typeof f=="number"?f>=100&&f<=900&&f%100==0?f:400:/^\d00$/.test(f)?parseInt(f):f==="bold"?700:400:400})(n.weight),u=(function(f){return typeof L0[f=f||"normal"]=="number"?f:"normal"})(n.stretch);return{family:i,style:o,weight:s,stretch:u,src:n.src||[],ref:n.ref||{name:i,style:[u,o,s].join(" ")}}}function ay(n,i,o,s){var u;for(u=o;u>=0&&u<i.length;u+=s)if(n[i[u]])return n[i[u]];for(u=o;u>=0&&u<i.length;u-=s)if(n[i[u]])return n[i[u]]}var F5={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},sy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ly(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function cy(n){return n.trimLeft()}function q5(n,i){for(var o=0;o<n.length;){if(n.charAt(o)===i)return[n.substring(0,o),n.substring(o+1)];o+=1}return null}function H5(n){var i=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return i===null?null:[i[0],n.substring(i[0].length)]}var Dp,uy,fy,Mf,Ep,dy,py,hy,p0=["times"];function gy(n,i,o,s,u){var f=4,v=my;switch(u){case jn.API.image_compression.FAST:f=1,v=yy;break;case jn.API.image_compression.MEDIUM:f=6,v=xy;break;case jn.API.image_compression.SLOW:f=9,v=by}n=(function(b,x,T,D){for(var R,C=b.length/x,Z=new Uint8Array(b.length+C),O=[V5,yy,my,xy,by],P=0;P<C;P+=1){var H=P*x,ae=b.subarray(H,H+x);if(D)Z.set(D(ae,T,R),H+P);else{for(var ce=O.length,q=[],se=0;se<ce;se+=1)q[se]=O[se](ae,T,R);var X=Y5(q.concat());Z.set(q[X],H+P)}R=ae}return Z})(n,i,Math.ceil(o*s/8),v);var h=C0(n,{level:f});return jn.API.__addimage__.arrayBufferToBinaryString(h)}function V5(n){var i=Array.apply([],n);return i.unshift(0),i}function yy(n,i){var o=n.length,s=[];s[0]=1;for(var u=0;u<o;u+=1){var f=n[u-i]||0;s[u+1]=n[u]-f+256&255}return s}function my(n,i,o){var s=n.length,u=[];u[0]=2;for(var f=0;f<s;f+=1){var v=o&&o[f]||0;u[f+1]=n[f]-v+256&255}return u}function xy(n,i,o){var s=n.length,u=[];u[0]=3;for(var f=0;f<s;f+=1){var v=n[f-i]||0,h=o&&o[f]||0;u[f+1]=n[f]+256-(v+h>>>1)&255}return u}function by(n,i,o){var s=n.length,u=[];u[0]=4;for(var f=0;f<s;f+=1){var v=W5(n[f-i]||0,o&&o[f]||0,o&&o[f-i]||0);u[f+1]=n[f]-v+256&255}return u}function W5(n,i,o){if(n===i&&i===o)return n;var s=Math.abs(i-o),u=Math.abs(n-o),f=Math.abs(n+i-o-o);return s<=u&&s<=f?n:u<=f?i:o}function Y5(n){var i=n.map(function(o){return o.reduce(function(s,u){return s+Math.abs(u)},0)});return i.indexOf(Math.min.apply(null,i))}function h0(n,i,o){var s=i*o,u=Math.floor(s/8),f=16-(s-8*u+o),v=(1<<o)-1;return T2(n,u)>>f&v}function vy(n,i,o,s){var u=o*s,f=Math.floor(u/8),v=16-(u-8*f+s),h=(1<<s)-1,b=(i&h)<<v;(function(x,T,D){if(T+1<x.byteLength)x.setUint16(T,D,!1);else{var R=D>>8&255;x.setUint8(T,R)}})(n,f,T2(n,f)&~(h<<v)&65535|b)}function T2(n,i){return i+1<n.byteLength?n.getUint16(i,!1):n.getUint8(i)<<8}function G5(n){var i=0;if(n[i++]!==71||n[i++]!==73||n[i++]!==70||n[i++]!==56||(n[i++]+1&253)!=56||n[i++]!==97)throw new Error("Invalid GIF 87a/89a header.");var o=n[i++]|n[i++]<<8,s=n[i++]|n[i++]<<8,u=n[i++],f=u>>7,v=1<<1+(7&u);n[i++],n[i++];var h=null,b=null;f&&(h=i,b=v,i+=3*v);var x=!0,T=[],D=0,R=null,C=0,Z=null;for(this.width=o,this.height=s;x&&i<n.length;)switch(n[i++]){case 33:switch(n[i++]){case 255:if(n[i]!==11||n[i+1]==78&&n[i+2]==69&&n[i+3]==84&&n[i+4]==83&&n[i+5]==67&&n[i+6]==65&&n[i+7]==80&&n[i+8]==69&&n[i+9]==50&&n[i+10]==46&&n[i+11]==48&&n[i+12]==3&&n[i+13]==1&&n[i+16]==0)i+=14,Z=n[i++]|n[i++]<<8,i++;else for(i+=12;;){if(!((k=n[i++])>=0))throw Error("Invalid block size");if(k===0)break;i+=k}break;case 249:if(n[i++]!==4||n[i+4]!==0)throw new Error("Invalid graphics extension block.");var O=n[i++];D=n[i++]|n[i++]<<8,R=n[i++],1&O||(R=null),C=O>>2&7,i++;break;case 254:for(;;){if(!((k=n[i++])>=0))throw Error("Invalid block size");if(k===0)break;i+=k}break;default:throw new Error("Unknown graphic control label: 0x"+n[i-1].toString(16))}break;case 44:var P=n[i++]|n[i++]<<8,H=n[i++]|n[i++]<<8,ae=n[i++]|n[i++]<<8,ce=n[i++]|n[i++]<<8,q=n[i++],se=q>>6&1,X=1<<1+(7&q),_=h,E=b,V=!1;q>>7&&(V=!0,_=i,E=X,i+=3*X);var $=i;for(i++;;){var k;if(!((k=n[i++])>=0))throw Error("Invalid block size");if(k===0)break;i+=k}T.push({x:P,y:H,width:ae,height:ce,has_local_palette:V,palette_offset:_,palette_size:E,data_offset:$,data_length:i-$,transparent_index:R,interlaced:!!se,delay:D,disposal:C});break;case 59:x=!1;break;default:throw new Error("Unknown gif block: 0x"+n[i-1].toString(16))}this.numFrames=function(){return T.length},this.loopCount=function(){return Z},this.frameInfo=function(S){if(S<0||S>=T.length)throw new Error("Frame index out of range.");return T[S]},this.decodeAndBlitFrameBGRA=function(S,J){var re=this.frameInfo(S),ye=re.width*re.height,K=new Uint8Array(ye);wy(n,re.data_offset,K,ye);var te=re.palette_offset,ge=re.transparent_index;ge===null&&(ge=256);var je=re.width,be=o-je,F=je,A=4*(re.y*o+re.x),M=4*((re.y+re.height)*o+re.x),B=A,de=4*be;re.interlaced===!0&&(de+=4*o*7);for(var Ae=8,Ee=0,Ge=K.length;Ee<Ge;++Ee){var Pe=K[Ee];if(F===0&&(F=je,(B+=de)>=M&&(de=4*be+4*o*(Ae-1),B=A+(je+be)*(Ae<<1),Ae>>=1)),Pe===ge)B+=4;else{var nt=n[te+3*Pe],Ke=n[te+3*Pe+1],wt=n[te+3*Pe+2];J[B++]=wt,J[B++]=Ke,J[B++]=nt,J[B++]=255}--F}},this.decodeAndBlitFrameRGBA=function(S,J){var re=this.frameInfo(S),ye=re.width*re.height,K=new Uint8Array(ye);wy(n,re.data_offset,K,ye);var te=re.palette_offset,ge=re.transparent_index;ge===null&&(ge=256);var je=re.width,be=o-je,F=je,A=4*(re.y*o+re.x),M=4*((re.y+re.height)*o+re.x),B=A,de=4*be;re.interlaced===!0&&(de+=4*o*7);for(var Ae=8,Ee=0,Ge=K.length;Ee<Ge;++Ee){var Pe=K[Ee];if(F===0&&(F=je,(B+=de)>=M&&(de=4*be+4*o*(Ae-1),B=A+(je+be)*(Ae<<1),Ae>>=1)),Pe===ge)B+=4;else{var nt=n[te+3*Pe],Ke=n[te+3*Pe+1],wt=n[te+3*Pe+2];J[B++]=nt,J[B++]=Ke,J[B++]=wt,J[B++]=255}--F}}}function wy(n,i,o,s){for(var u=n[i++],f=1<<u,v=f+1,h=v+1,b=u+1,x=(1<<b)-1,T=0,D=0,R=0,C=n[i++],Z=new Int32Array(4096),O=null;;){for(;T<16&&C!==0;)D|=n[i++]<<T,T+=8,C===1?C=n[i++]:--C;if(T<b)break;var P=D&x;if(D>>=b,T-=b,P!==f){if(P===v)break;for(var H=P<h?P:O,ae=0,ce=H;ce>f;)ce=Z[ce]>>8,++ae;var q=ce;if(R+ae+(H!==P?1:0)>s)return void Vr.log("Warning, gif stream longer than expected.");o[R++]=q;var se=R+=ae;for(H!==P&&(o[R++]=q),ce=H;ae--;)ce=Z[ce],o[--se]=255&ce,ce>>=8;O!==null&&h<4096&&(Z[h++]=O<<8|q,h>=x+1&&b<12&&(++b,x=x<<1|1)),O=P}else h=v+1,x=(1<<(b=u+1))-1,O=null}return R!==s&&Vr.log("Warning, gif stream shorter than expected."),o}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function g0(n){var i,o,s,u,f,v=Math.floor,h=new Array(64),b=new Array(64),x=new Array(64),T=new Array(64),D=new Array(65535),R=new Array(65535),C=new Array(64),Z=new Array(64),O=[],P=0,H=7,ae=new Array(64),ce=new Array(64),q=new Array(64),se=new Array(256),X=new Array(2048),_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function K(A,M){for(var B=0,de=0,Ae=new Array,Ee=1;Ee<=16;Ee++){for(var Ge=1;Ge<=A[Ee];Ge++)Ae[M[de]]=[],Ae[M[de]][0]=B,Ae[M[de]][1]=Ee,de++,B++;B*=2}return Ae}function te(A){for(var M=A[0],B=A[1]-1;B>=0;)M&1<<B&&(P|=1<<H),B--,--H<0&&(P==255?(ge(255),ge(0)):ge(P),H=7,P=0)}function ge(A){O.push(A)}function je(A){ge(A>>8&255),ge(255&A)}function be(A,M,B,de,Ae){for(var Ee,Ge=Ae[0],Pe=Ae[240],nt=(function(dt,Qt){var Et,vn,Jt,Wn,kt,Pt,fi,ut,Ct,Mn,Gt=0;for(Ct=0;Ct<8;++Ct){Et=dt[Gt],vn=dt[Gt+1],Jt=dt[Gt+2],Wn=dt[Gt+3],kt=dt[Gt+4],Pt=dt[Gt+5],fi=dt[Gt+6];var Dn=Et+(ut=dt[Gt+7]),Nn=Et-ut,en=vn+fi,wn=vn-fi,at=Jt+Pt,$t=Jt-Pt,Ft=Wn+kt,qt=Wn-kt,Sn=Dn+Ft,Oi=Dn-Ft,In=en+at,cn=en-at;dt[Gt]=Sn+In,dt[Gt+4]=Sn-In;var Ht=.707106781*(cn+Oi);dt[Gt+2]=Oi+Ht,dt[Gt+6]=Oi-Ht;var yo=.382683433*((Sn=qt+$t)-(cn=wn+Nn)),Wr=.5411961*Sn+yo,_o=1.306562965*cn+yo,Lo=.707106781*(In=$t+wn),Vt=Nn+Lo,zo=Nn-Lo;dt[Gt+5]=zo+Wr,dt[Gt+3]=zo-Wr,dt[Gt+1]=Vt+_o,dt[Gt+7]=Vt-_o,Gt+=8}for(Gt=0,Ct=0;Ct<8;++Ct){Et=dt[Gt],vn=dt[Gt+8],Jt=dt[Gt+16],Wn=dt[Gt+24],kt=dt[Gt+32],Pt=dt[Gt+40],fi=dt[Gt+48];var da=Et+(ut=dt[Gt+56]),Jo=Et-ut,bt=vn+fi,ui=vn-fi,Jn=Jt+Pt,ur=Jt-Pt,Hi=Wn+kt,jr=Wn-kt,vi=da+Hi,yi=da-Hi,mo=bt+Jn,Qo=bt-Jn;dt[Gt]=vi+mo,dt[Gt+32]=vi-mo;var _a=.707106781*(Qo+yi);dt[Gt+16]=yi+_a,dt[Gt+48]=yi-_a;var hl=.382683433*((vi=jr+ur)-(Qo=ui+Jo)),La=.5411961*vi+hl,za=1.306562965*Qo+hl,ls=.707106781*(mo=ur+ui),Yn=Jo+ls,Po=Jo-ls;dt[Gt+40]=Po+La,dt[Gt+24]=Po-La,dt[Gt+8]=Yn+za,dt[Gt+56]=Yn-za,Gt++}for(Ct=0;Ct<64;++Ct)Mn=dt[Ct]*Qt[Ct],C[Ct]=Mn>0?Mn+.5|0:Mn-.5|0;return C})(A,M),Ke=0;Ke<64;++Ke)Z[_[Ke]]=nt[Ke];var wt=Z[0]-B;B=Z[0],wt==0?te(de[0]):(te(de[R[Ee=32767+wt]]),te(D[Ee]));for(var St=63;St>0&&Z[St]==0;)St--;if(St==0)return te(Ge),B;for(var Bt,pe=1;pe<=St;){for(var _t=pe;Z[pe]==0&&pe<=St;)++pe;var pn=pe-_t;if(pn>=16){Bt=pn>>4;for(var Zt=1;Zt<=Bt;++Zt)te(Pe);pn&=15}Ee=32767+Z[pe],te(Ae[(pn<<4)+R[Ee]]),te(D[Ee]),pe++}return St!=63&&te(Ge),B}function F(A){A=Math.min(Math.max(A,1),100),f!=A&&((function(M){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var Ae=v((B[de]*M+50)/100);Ae=Math.min(Math.max(Ae,1),255),h[_[de]]=Ae}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ge=0;Ge<64;Ge++){var Pe=v((Ee[Ge]*M+50)/100);Pe=Math.min(Math.max(Pe,1),255),b[_[Ge]]=Pe}for(var nt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ke=0,wt=0;wt<8;wt++)for(var St=0;St<8;St++)x[Ke]=1/(h[_[Ke]]*nt[wt]*nt[St]*8),T[Ke]=1/(b[_[Ke]]*nt[wt]*nt[St]*8),Ke++})(A<50?Math.floor(5e3/A):Math.floor(200-2*A)),f=A)}this.encode=function(A,M){M&&F(M),O=new Array,P=0,H=7,je(65496),je(65504),je(16),ge(74),ge(70),ge(73),ge(70),ge(0),ge(1),ge(1),ge(0),je(1),je(1),ge(0),ge(0),(function(){je(65499),je(132),ge(0);for(var vn=0;vn<64;vn++)ge(h[vn]);ge(1);for(var Jt=0;Jt<64;Jt++)ge(b[Jt])})(),(function(vn,Jt){je(65472),je(17),ge(8),je(Jt),je(vn),ge(3),ge(1),ge(17),ge(0),ge(2),ge(17),ge(1),ge(3),ge(17),ge(1)})(A.width,A.height),(function(){je(65476),je(418),ge(0);for(var vn=0;vn<16;vn++)ge(E[vn+1]);for(var Jt=0;Jt<=11;Jt++)ge(V[Jt]);ge(16);for(var Wn=0;Wn<16;Wn++)ge($[Wn+1]);for(var kt=0;kt<=161;kt++)ge(k[kt]);ge(1);for(var Pt=0;Pt<16;Pt++)ge(S[Pt+1]);for(var fi=0;fi<=11;fi++)ge(J[fi]);ge(17);for(var ut=0;ut<16;ut++)ge(re[ut+1]);for(var Ct=0;Ct<=161;Ct++)ge(ye[Ct])})(),je(65498),je(12),ge(3),ge(1),ge(0),ge(2),ge(17),ge(3),ge(17),ge(0),ge(63),ge(0);var B=0,de=0,Ae=0;P=0,H=7,this.encode.displayName="_encode_";for(var Ee,Ge,Pe,nt,Ke,wt,St,Bt,pe,_t=A.data,pn=A.width,Zt=A.height,dt=4*pn,Qt=0;Qt<Zt;){for(Ee=0;Ee<dt;){for(Ke=dt*Qt+Ee,St=-1,Bt=0,pe=0;pe<64;pe++)wt=Ke+(Bt=pe>>3)*dt+(St=4*(7&pe)),Qt+Bt>=Zt&&(wt-=dt*(Qt+1+Bt-Zt)),Ee+St>=dt&&(wt-=Ee+St-dt+4),Ge=_t[wt++],Pe=_t[wt++],nt=_t[wt++],ae[pe]=(X[Ge]+X[Pe+256|0]+X[nt+512|0]>>16)-128,ce[pe]=(X[Ge+768|0]+X[Pe+1024|0]+X[nt+1280|0]>>16)-128,q[pe]=(X[Ge+1280|0]+X[Pe+1536|0]+X[nt+1792|0]>>16)-128;B=be(ae,x,B,i,s),de=be(ce,T,de,o,u),Ae=be(q,T,Ae,o,u),Ee+=32}Qt+=8}if(H>=0){var Et=[];Et[1]=H+1,Et[0]=(1<<H+1)-1,te(Et)}return je(65497),new Uint8Array(O)},n=n||50,(function(){for(var A=String.fromCharCode,M=0;M<256;M++)se[M]=A(M)})(),i=K(E,V),o=K(S,J),s=K($,k),u=K(re,ye),(function(){for(var A=1,M=2,B=1;B<=15;B++){for(var de=A;de<M;de++)R[32767+de]=B,D[32767+de]=[],D[32767+de][1]=B,D[32767+de][0]=de;for(var Ae=-(M-1);Ae<=-A;Ae++)R[32767+Ae]=B,D[32767+Ae]=[],D[32767+Ae][1]=B,D[32767+Ae][0]=M-1+Ae;A<<=1,M<<=1}})(),(function(){for(var A=0;A<256;A++)X[A]=19595*A,X[A+256|0]=38470*A,X[A+512|0]=7471*A+32768,X[A+768|0]=-11059*A,X[A+1024|0]=-21709*A,X[A+1280|0]=32768*A+8421375,X[A+1536|0]=-27439*A,X[A+1792|0]=-5329*A})(),F(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function uc(n,i){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!i,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Sy(n){function i(V){if(!V)throw Error("assert :P")}function o(V,$,k){for(var S=0;4>S;S++)if(V[$+S]!=k.charCodeAt(S))return!0;return!1}function s(V,$,k,S,J){for(var re=0;re<J;re++)V[$+re]=k[S+re]}function u(V,$,k,S){for(var J=0;J<S;J++)V[$+J]=k}function f(V){return new Int32Array(V)}function v(V,$){for(var k=[],S=0;S<V;S++)k.push(new $);return k}function h(V,$){var k=[];return(function S(J,re,ye){for(var K=ye[re],te=0;te<K&&(J.push(ye.length>re+1?[]:new $),!(ye.length<re+1));te++)S(J[te],re+1,ye)})(k,0,V),k}var b=function(){var V=this;function $(d,g){for(var j=1<<g-1>>>0;d&j;)j>>>=1;return j?(d&j-1)+j:d}function k(d,g,j,L,G){i(!(L%j));do d[g+(L-=j)]=G;while(0<L)}function S(d,g,j,L,G){if(i(2328>=G),512>=G)var Q=f(512);else if((Q=f(G))==null)return 0;return(function(ee,le,fe,ve,Re,Ve){var xe,Oe,Ye=le,tt=1<<fe,qe=f(16),st=f(16);for(i(Re!=0),i(ve!=null),i(ee!=null),i(0<fe),Oe=0;Oe<Re;++Oe){if(15<ve[Oe])return 0;++qe[ve[Oe]]}if(qe[0]==Re)return 0;for(st[1]=0,xe=1;15>xe;++xe){if(qe[xe]>1<<xe)return 0;st[xe+1]=st[xe]+qe[xe]}for(Oe=0;Oe<Re;++Oe)xe=ve[Oe],0<ve[Oe]&&(Ve[st[xe]++]=Oe);if(st[15]==1)return(ve=new J).g=0,ve.value=Ve[0],k(ee,Ye,1,tt,ve),tt;var ct,Tt=-1,mt=tt-1,Xt=0,zt=1,hn=1,It=1<<fe;for(Oe=0,xe=1,Re=2;xe<=fe;++xe,Re<<=1){if(zt+=hn<<=1,0>(hn-=qe[xe]))return 0;for(;0<qe[xe];--qe[xe])(ve=new J).g=xe,ve.value=Ve[Oe++],k(ee,Ye+Xt,Re,It,ve),Xt=$(Xt,xe)}for(xe=fe+1,Re=2;15>=xe;++xe,Re<<=1){if(zt+=hn<<=1,0>(hn-=qe[xe]))return 0;for(;0<qe[xe];--qe[xe]){if(ve=new J,(Xt&mt)!=Tt){for(Ye+=It,ct=1<<(Tt=xe)-fe;15>Tt&&!(0>=(ct-=qe[Tt]));)++Tt,ct<<=1;tt+=It=1<<(ct=Tt-fe),ee[le+(Tt=Xt&mt)].g=ct+fe,ee[le+Tt].value=Ye-le-Tt}ve.g=xe-fe,ve.value=Ve[Oe++],k(ee,Ye+(Xt>>fe),Re,It,ve),Xt=$(Xt,xe)}}return zt!=2*st[15]-1?0:tt})(d,g,j,L,G,Q)}function J(){this.value=this.g=0}function re(){this.value=this.g=0}function ye(){this.G=v(5,J),this.H=f(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=v(es,re)}function K(d,g,j,L){i(d!=null),i(g!=null),i(2147483648>L),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=j,d.Jd=g,d.Yc=j+L,d.Zc=4<=L?j+L-4+1:j,Ge(d)}function te(d,g){for(var j=0;0<g--;)j|=nt(d,128)<<g;return j}function ge(d,g){var j=te(d,g);return Pe(d)?-j:j}function je(d,g,j,L){var G,Q=0;for(i(d!=null),i(g!=null),i(4294967288>L),d.Sb=L,d.Ra=0,d.u=0,d.h=0,4<L&&(L=4),G=0;G<L;++G)Q+=g[j+G]<<8*G;d.Ra=Q,d.bb=L,d.oa=g,d.pa=j}function be(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<ps-8>>>0,++d.bb,d.u-=8;de(d)&&(d.h=1,d.u=0)}function F(d,g){if(i(0<=g),!d.h&&g<=Qr){var j=B(d)&oa[g];return d.u+=g,be(d),j}return d.h=1,d.u=0}function A(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(d){return d.Ra>>>(d.u&ps-1)>>>0}function de(d){return i(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>ps}function Ae(d,g){d.u=g,d.h=de(d)}function Ee(d){d.u>=ma&&(i(d.u>=ma),be(d))}function Ge(d){i(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(i(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function Pe(d){return te(d,1)}function nt(d,g){var j=d.Ca;0>d.b&&Ge(d);var L=d.b,G=j*g>>>8,Q=(d.I>>>L>G)+0;for(Q?(j-=G,d.I-=G+1<<L>>>0):j=G+1,L=j,G=0;256<=L;)G+=8,L>>=8;return L=7^G+wi[L],d.b-=L,d.Ca=(j<<L)-1,Q}function Ke(d,g,j){d[g+0]=j>>24&255,d[g+1]=j>>16&255,d[g+2]=j>>8&255,d[g+3]=255&j}function wt(d,g){return d[g+0]|d[g+1]<<8}function St(d,g){return wt(d,g)|d[g+2]<<16}function Bt(d,g){return wt(d,g)|wt(d,g+2)<<16}function pe(d,g){var j=1<<g;return i(d!=null),i(0<g),d.X=f(j),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function _t(d,g){i(d!=null),i(g!=null),i(d.Xa==g.Xa),s(g.X,0,d.X,0,1<<g.Xa)}function pn(){this.X=[],this.Xa=this.Mb=0}function Zt(d,g,j,L){i(j!=null),i(L!=null);var G=j[0],Q=L[0];return G==0&&(G=(d*Q+g/2)/g),Q==0&&(Q=(g*G+d/2)/d),0>=G||0>=Q?0:(j[0]=G,L[0]=Q,1)}function dt(d,g){return d+(1<<g)-1>>>g}function Qt(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Et(d,g){V[g]=function(j,L,G,Q,ee,le,fe){var ve;for(ve=0;ve<ee;++ve){var Re=V[d](le[fe+ve-1],G,Q+ve);le[fe+ve]=Qt(j[L+ve],Re)}}}function vn(){this.ud=this.hd=this.jd=0}function Jt(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function Wn(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function kt(d,g){return Wn(d+(d-g+.5>>1))}function Pt(d,g,j){return Math.abs(g-j)-Math.abs(d-j)}function fi(d,g,j,L,G,Q,ee){for(L=Q[ee-1],j=0;j<G;++j)Q[ee+j]=L=Qt(d[g+j],L)}function ut(d,g,j,L,G){var Q;for(Q=0;Q<j;++Q){var ee=d[g+Q],le=ee>>8&255,fe=16711935&(fe=(fe=16711935&ee)+((le<<16)+le));L[G+Q]=(4278255360&ee)+fe>>>0}}function Ct(d,g){g.jd=255&d,g.hd=d>>8&255,g.ud=d>>16&255}function Mn(d,g,j,L,G,Q){var ee;for(ee=0;ee<L;++ee){var le=g[j+ee],fe=le>>>8,ve=le,Re=255&(Re=(Re=le>>>16)+((d.jd<<24>>24)*(fe<<24>>24)>>>5));ve=255&(ve=(ve+=(d.hd<<24>>24)*(fe<<24>>24)>>>5)+((d.ud<<24>>24)*(Re<<24>>24)>>>5)),G[Q+ee]=(4278255360&le)+(Re<<16)+ve}}function Gt(d,g,j,L,G){V[g]=function(Q,ee,le,fe,ve,Re,Ve,xe,Oe){for(fe=Ve;fe<xe;++fe)for(Ve=0;Ve<Oe;++Ve)ve[Re++]=G(le[L(Q[ee++])])},V[d]=function(Q,ee,le,fe,ve,Re,Ve){var xe=8>>Q.b,Oe=Q.Ea,Ye=Q.K[0],tt=Q.w;if(8>xe)for(Q=(1<<Q.b)-1,tt=(1<<xe)-1;ee<le;++ee){var qe,st=0;for(qe=0;qe<Oe;++qe)qe&Q||(st=L(fe[ve++])),Re[Ve++]=G(Ye[st&tt]),st>>=xe}else V["VP8LMapColor"+j](fe,ve,Ye,tt,Re,Ve,ee,le,Oe)}}function Dn(d,g,j,L,G){for(j=g+j;g<j;){var Q=d[g++];L[G++]=Q>>16&255,L[G++]=Q>>8&255,L[G++]=255&Q}}function Nn(d,g,j,L,G){for(j=g+j;g<j;){var Q=d[g++];L[G++]=Q>>16&255,L[G++]=Q>>8&255,L[G++]=255&Q,L[G++]=Q>>24&255}}function en(d,g,j,L,G){for(j=g+j;g<j;){var Q=(ee=d[g++])>>16&240|ee>>12&15,ee=240&ee|ee>>28&15;L[G++]=Q,L[G++]=ee}}function wn(d,g,j,L,G){for(j=g+j;g<j;){var Q=(ee=d[g++])>>16&248|ee>>13&7,ee=ee>>5&224|ee>>3&31;L[G++]=Q,L[G++]=ee}}function at(d,g,j,L,G){for(j=g+j;g<j;){var Q=d[g++];L[G++]=255&Q,L[G++]=Q>>8&255,L[G++]=Q>>16&255}}function $t(d,g,j,L,G,Q){if(Q==0)for(j=g+j;g<j;)Ke(L,((Q=d[g++])[0]>>24|Q[1]>>8&65280|Q[2]<<8&16711680|Q[3]<<24)>>>0),G+=32;else s(L,G,d,g,j)}function Ft(d,g){V[g][0]=V[d+"0"],V[g][1]=V[d+"1"],V[g][2]=V[d+"2"],V[g][3]=V[d+"3"],V[g][4]=V[d+"4"],V[g][5]=V[d+"5"],V[g][6]=V[d+"6"],V[g][7]=V[d+"7"],V[g][8]=V[d+"8"],V[g][9]=V[d+"9"],V[g][10]=V[d+"10"],V[g][11]=V[d+"11"],V[g][12]=V[d+"12"],V[g][13]=V[d+"13"],V[g][14]=V[d+"0"],V[g][15]=V[d+"0"]}function qt(d){return d==Vs||d==Ul||d==xs||d==vl}function Sn(){this.eb=[],this.size=this.A=this.fb=0}function Oi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function In(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Sn,this.f.kb=new Oi,this.sd=null}function cn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ht(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yo(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Wr(d,g){var j=d.T,L=g.ba.f.RGBA,G=L.eb,Q=L.fb+d.ka*L.A,ee=Fi[g.ba.S],le=d.y,fe=d.O,ve=d.f,Re=d.N,Ve=d.ea,xe=d.W,Oe=g.cc,Ye=g.dc,tt=g.Mc,qe=g.Nc,st=d.ka,ct=d.ka+d.T,Tt=d.U,mt=Tt+1>>1;for(st==0?ee(le,fe,null,null,ve,Re,Ve,xe,ve,Re,Ve,xe,G,Q,null,null,Tt):(ee(g.ec,g.fc,le,fe,Oe,Ye,tt,qe,ve,Re,Ve,xe,G,Q-L.A,G,Q,Tt),++j);st+2<ct;st+=2)Oe=ve,Ye=Re,tt=Ve,qe=xe,Re+=d.Rc,xe+=d.Rc,Q+=2*L.A,ee(le,(fe+=2*d.fa)-d.fa,le,fe,Oe,Ye,tt,qe,ve,Re,Ve,xe,G,Q-L.A,G,Q,Tt);return fe+=d.fa,d.j+ct<d.o?(s(g.ec,g.fc,le,fe,Tt),s(g.cc,g.dc,ve,Re,mt),s(g.Mc,g.Nc,Ve,xe,mt),j--):1&ct||ee(le,fe,null,null,ve,Re,Ve,xe,ve,Re,Ve,xe,G,Q+L.A,null,null,Tt),j}function _o(d,g,j){var L=d.F,G=[d.J];if(L!=null){var Q=d.U,ee=g.ba.S,le=ee==ec||ee==xs;g=g.ba.f.RGBA;var fe=[0],ve=d.ka;fe[0]=d.T,d.Kb&&(ve==0?--fe[0]:(--ve,G[0]-=d.width),d.j+d.ka+d.T==d.o&&(fe[0]=d.o-d.j-ve));var Re=g.eb;ve=g.fb+ve*g.A,d=Si(L,G[0],d.width,Q,fe,Re,ve+(le?0:3),g.A),i(j==fe),d&&qt(ee)&&ol(Re,ve,le,Q,fe,g.A)}return 0}function Lo(d){var g=d.ma,j=g.ba.S,L=11>j,G=j==Wo||j==wa||j==ec||j==al||j==12||qt(j);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Ia(g.Oa,d,G?11:12))return 0;if(G&&qt(j)&&lo(),d.da)alert("todo:use_scaling");else{if(L){if(g.Ib=yo,d.Kb){if(j=d.U+1>>1,g.memory=f(d.U+2*j),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+j,g.Ib=Wr,lo()}}else alert("todo:EmitYUV");G&&(g.Jb=_o,L&&wo())}if(L&&!jo){for(d=0;256>d;++d)xr[d]=89858*(d-128)+fo>>Gr,Wa[d]=-22014*(d-128)+fo,sl[d]=-45773*(d-128),Ta[d]=113618*(d-128)+fo>>Gr;for(d=Go;d<$r;++d)g=76283*(d-16)+fo>>Gr,vs[d-Go]=Xi(g,255),Ya[d-Go]=Xi(g+8>>4,15);jo=1}return 1}function Vt(d){var g=d.ma,j=d.U,L=d.T;return i(!(1&d.ka)),0>=j||0>=L?0:(j=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,j),g.Dc+=j,1)}function zo(d){d.ma.memory=null}function da(d,g,j,L){return F(d,8)!=47?0:(g[0]=F(d,14)+1,j[0]=F(d,14)+1,L[0]=F(d,1),F(d,3)!=0?0:!d.h)}function Jo(d,g){if(4>d)return d+1;var j=d-2>>1;return(2+(1&d)<<j)+F(g,j)+1}function bt(d,g){return 120<g?g-120:1<=(j=((j=no[g-1])>>4)*d+(8-(15&j)))?j:1;var j}function ui(d,g,j){var L=B(j),G=d[g+=255&L].g-8;return 0<G&&(Ae(j,j.u+8),L=B(j),g+=d[g].value,g+=L&(1<<G)-1),Ae(j,j.u+d[g].g),d[g].value}function Jn(d,g,j){return j.g+=d.g,j.value+=d.value<<g>>>0,i(8>=j.g),d.g}function ur(d,g,j){var L=d.xc;return i((g=L==0?0:d.vc[d.md*(j>>L)+(g>>L)])<d.Wb),d.Ya[g]}function Hi(d,g,j,L){var G=d.ab,Q=d.c*g,ee=d.C;g=ee+g;var le=j,fe=L;for(L=d.Ta,j=d.Ua;0<G--;){var ve=d.gc[G],Re=ee,Ve=g,xe=le,Oe=fe,Ye=(fe=L,le=j,ve.Ea);switch(i(Re<Ve),i(Ve<=ve.nc),ve.hc){case 2:fr(xe,Oe,(Ve-Re)*Ye,fe,le);break;case 0:var tt=Re,qe=Ve,st=fe,ct=le,Tt=(It=ve).Ea;tt==0&&(hs(xe,Oe,null,null,1,st,ct),fi(xe,Oe+1,0,0,Tt-1,st,ct+1),Oe+=Tt,ct+=Tt,++tt);for(var mt=1<<It.b,Xt=mt-1,zt=dt(Tt,It.b),hn=It.K,It=It.w+(tt>>It.b)*zt;tt<qe;){var Gn=hn,Qi=It,Fn=1;for(Zi(xe,Oe,st,ct-Tt,1,st,ct);Fn<Tt;){var Mt=(Fn&~Xt)+mt;Mt>Tt&&(Mt=Tt),(0,ml[Gn[Qi++]>>8&15])(xe,Oe+ +Fn,st,ct+Fn-Tt,Mt-Fn,st,ct+Fn),Fn=Mt}Oe+=Tt,ct+=Tt,++tt&Xt||(It+=zt)}Ve!=ve.nc&&s(fe,le-Ye,fe,le+(Ve-Re-1)*Ye,Ye);break;case 1:for(Ye=xe,qe=Oe,Tt=(xe=ve.Ea)-(ct=xe&~(st=(Oe=1<<ve.b)-1)),tt=dt(xe,ve.b),mt=ve.K,ve=ve.w+(Re>>ve.b)*tt;Re<Ve;){for(Xt=mt,zt=ve,hn=new vn,It=qe+ct,Gn=qe+xe;qe<It;)Ct(Xt[zt++],hn),mc(hn,Ye,qe,Oe,fe,le),qe+=Oe,le+=Oe;qe<Gn&&(Ct(Xt[zt++],hn),mc(hn,Ye,qe,Tt,fe,le),qe+=Tt,le+=Tt),++Re&st||(ve+=tt)}break;case 3:if(xe==fe&&Oe==le&&0<ve.b){for(qe=fe,xe=Ye=le+(Ve-Re)*Ye-(ct=(Ve-Re)*dt(ve.Ea,ve.b)),Oe=fe,st=le,tt=[],ct=(Tt=ct)-1;0<=ct;--ct)tt[ct]=Oe[st+ct];for(ct=Tt-1;0<=ct;--ct)qe[xe+ct]=tt[ct];yc(ve,Re,Ve,fe,Ye,fe,le)}else yc(ve,Re,Ve,xe,Oe,fe,le)}le=L,fe=j}fe!=j&&s(L,j,le,fe,Q)}function jr(d,g){var j=d.V,L=d.Ba+d.c*d.C,G=g-d.C;if(i(g<=d.l.o),i(16>=G),0<G){var Q=d.l,ee=d.Ta,le=d.Ua,fe=Q.width;if(Hi(d,G,j,L),G=le=[le],i((j=d.C)<(L=g)),i(Q.v<Q.va),L>Q.o&&(L=Q.o),j<Q.j){var ve=Q.j-j;j=Q.j,G[0]+=ve*fe}if(j>=L?j=0:(G[0]+=4*Q.v,Q.ka=j-Q.j,Q.U=Q.va-Q.v,Q.T=L-j,j=1),j){if(le=le[0],11>(j=d.ca).S){var Re=j.f.RGBA,Ve=(L=j.S,G=Q.U,Q=Q.T,ve=Re.eb,Re.A),xe=Q;for(Re=Re.fb+d.Ma*Re.A;0<xe--;){var Oe=ee,Ye=le,tt=G,qe=ve,st=Re;switch(L){case Bc:Ua(Oe,Ye,tt,qe,st);break;case Wo:Us(Oe,Ye,tt,qe,st);break;case Vs:Us(Oe,Ye,tt,qe,st),ol(qe,st,0,tt,1,0);break;case xc:Ro(Oe,Ye,tt,qe,st);break;case wa:$t(Oe,Ye,tt,qe,st,1);break;case Ul:$t(Oe,Ye,tt,qe,st,1),ol(qe,st,0,tt,1,0);break;case ec:$t(Oe,Ye,tt,qe,st,0);break;case xs:$t(Oe,Ye,tt,qe,st,0),ol(qe,st,1,tt,1,0);break;case al:gs(Oe,Ye,tt,qe,st);break;case vl:gs(Oe,Ye,tt,qe,st),ir(qe,st,tt,1,0);break;case bl:aa(Oe,Ye,tt,qe,st);break;default:i(0)}le+=fe,Re+=Ve}d.Ma+=Q}else alert("todo:EmitRescaledRowsYUVA");i(d.Ma<=j.height)}}d.C=g,i(d.C<=d.i)}function vi(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var j=d.Ya[g].G,L=d.Ya[g].H;if(0<j[1][L[1]+0].g||0<j[2][L[2]+0].g||0<j[3][L[3]+0].g)return 0}return 1}function yi(d,g,j,L,G,Q){if(d.Z!=0){var ee=d.qd,le=d.rd;for(i(ca[d.Z]!=null);g<j;++g)ca[d.Z](ee,le,L,G,L,G,Q),ee=L,le=G,G+=Q;d.qd=ee,d.rd=le}}function mo(d,g){var j=d.l.ma,L=j.Z==0||j.Z==1?d.l.j:d.C;if(L=d.C<L?L:d.C,i(g<=d.l.o),g>L){var G=d.l.width,Q=j.ca,ee=j.tb+G*L,le=d.V,fe=d.Ba+d.c*L,ve=d.gc;i(d.ab==1),i(ve[0].hc==3),el(ve[0],L,g,le,fe,Q,ee),yi(j,L,g,Q,ee,G)}d.C=d.Ma=g}function Qo(d,g,j,L,G,Q,ee){var le=d.$/L,fe=d.$%L,ve=d.m,Re=d.s,Ve=j+d.$,xe=Ve;G=j+L*G;var Oe=j+L*Q,Ye=280+Re.ua,tt=d.Pb?le:16777216,qe=0<Re.ua?Re.Wa:null,st=Re.wc,ct=Ve<Oe?ur(Re,fe,le):null;i(d.C<Q),i(Oe<=G);var Tt=!1;e:for(;;){for(;Tt||Ve<Oe;){var mt=0;if(le>=tt){var Xt=Ve-j;i((tt=d).Pb),tt.wd=tt.m,tt.xd=Xt,0<tt.s.ua&&_t(tt.s.Wa,tt.s.vb),tt=le+Ws}if(fe&st||(ct=ur(Re,fe,le)),i(ct!=null),ct.Qb&&(g[Ve]=ct.qb,Tt=!0),!Tt)if(Ee(ve),ct.jc){mt=ve,Xt=g;var zt=Ve,hn=ct.pd[B(mt)&es-1];i(ct.jc),256>hn.g?(Ae(mt,mt.u+hn.g),Xt[zt]=hn.value,mt=0):(Ae(mt,mt.u+hn.g-256),i(256<=hn.value),mt=hn.value),mt==0&&(Tt=!0)}else mt=ui(ct.G[0],ct.H[0],ve);if(ve.h)break;if(Tt||256>mt){if(!Tt)if(ct.nd)g[Ve]=(ct.qb|mt<<8)>>>0;else{if(Ee(ve),Tt=ui(ct.G[1],ct.H[1],ve),Ee(ve),Xt=ui(ct.G[2],ct.H[2],ve),zt=ui(ct.G[3],ct.H[3],ve),ve.h)break;g[Ve]=(zt<<24|Tt<<16|mt<<8|Xt)>>>0}if(Tt=!1,++Ve,++fe>=L&&(fe=0,++le,ee!=null&&le<=Q&&!(le%16)&&ee(d,le),qe!=null))for(;xe<Ve;)mt=g[xe++],qe.X[(506832829*mt&4294967295)>>>qe.Mb]=mt}else if(280>mt){if(mt=Jo(mt-256,ve),Xt=ui(ct.G[4],ct.H[4],ve),Ee(ve),Xt=bt(L,Xt=Jo(Xt,ve)),ve.h)break;if(Ve-j<Xt||G-Ve<mt)break e;for(zt=0;zt<mt;++zt)g[Ve+zt]=g[Ve+zt-Xt];for(Ve+=mt,fe+=mt;fe>=L;)fe-=L,++le,ee!=null&&le<=Q&&!(le%16)&&ee(d,le);if(i(Ve<=G),fe&st&&(ct=ur(Re,fe,le)),qe!=null)for(;xe<Ve;)mt=g[xe++],qe.X[(506832829*mt&4294967295)>>>qe.Mb]=mt}else{if(!(mt<Ye))break e;for(Tt=mt-280,i(qe!=null);xe<Ve;)mt=g[xe++],qe.X[(506832829*mt&4294967295)>>>qe.Mb]=mt;mt=Ve,i(!(Tt>>>(Xt=qe).Xa)),g[mt]=Xt.X[Tt],Tt=!0}Tt||i(ve.h==de(ve))}if(d.Pb&&ve.h&&Ve<G)i(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&_t(d.s.vb,d.s.Wa);else{if(ve.h)break e;ee?.(d,le>Q?Q:le),d.a=0,d.$=Ve-j}return 1}return d.a=3,0}function _a(d){i(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,i(d!=null)}function hl(){var d=new ln;return d==null?null:(d.a=0,d.xb=ru,Ft("Predictor","VP8LPredictors"),Ft("Predictor","VP8LPredictors_C"),Ft("PredictorAdd","VP8LPredictorsAdd"),Ft("PredictorAdd","VP8LPredictorsAdd_C"),fr=ut,mc=Mn,Ua=Dn,Us=Nn,gs=en,aa=wn,Ro=at,V.VP8LMapColor32b=xa,V.VP8LMapColor8b=So,d)}function La(d,g,j,L,G){var Q=1,ee=[d],le=[g],fe=L.m,ve=L.s,Re=null,Ve=0;e:for(;;){if(j)for(;Q&&F(fe,1);){var xe=ee,Oe=le,Ye=L,tt=1,qe=Ye.m,st=Ye.gc[Ye.ab],ct=F(qe,2);if(Ye.Oc&1<<ct)Q=0;else{switch(Ye.Oc|=1<<ct,st.hc=ct,st.Ea=xe[0],st.nc=Oe[0],st.K=[null],++Ye.ab,i(4>=Ye.ab),ct){case 0:case 1:st.b=F(qe,3)+2,tt=La(dt(st.Ea,st.b),dt(st.nc,st.b),0,Ye,st.K),st.K=st.K[0];break;case 3:var Tt,mt=F(qe,8)+1,Xt=16<mt?0:4<mt?1:2<mt?2:3;if(xe[0]=dt(st.Ea,Xt),st.b=Xt,Tt=tt=La(mt,1,0,Ye,st.K)){var zt,hn=mt,It=st,Gn=1<<(8>>It.b),Qi=f(Gn);if(Qi==null)Tt=0;else{var Fn=It.K[0],Mt=It.w;for(Qi[0]=It.K[0][0],zt=1;zt<1*hn;++zt)Qi[zt]=Qt(Fn[Mt+zt],Qi[zt-1]);for(;zt<4*Gn;++zt)Qi[zt]=0;It.K[0]=null,It.K[0]=Qi,Tt=1}}tt=Tt;break;case 2:break;default:i(0)}Q=tt}}if(ee=ee[0],le=le[0],Q&&F(fe,1)&&!(Q=1<=(Ve=F(fe,4))&&11>=Ve)){L.a=3;break e}var Dt;if(Dt=Q)t:{var br,gn,kn,ei=L,rr=ee,vr=le,Yi=Ve,Xr=j,cr=ei.m,Ar=ei.s,oi=[null],Li=1,gr=0,Ri=pr[Yi];n:for(;;){if(Xr&&F(cr,1)){var io=F(cr,3)+2,Gi=dt(rr,io),mi=dt(vr,io),Nr=Gi*mi;if(!La(Gi,mi,0,ei,oi))break n;for(oi=oi[0],Ar.xc=io,br=0;br<Nr;++br){var qi=oi[br]>>8&65535;oi[br]=qi,qi>=Li&&(Li=qi+1)}}if(cr.h)break n;for(gn=0;5>gn;++gn){var ro=ns[gn];!gn&&0<Yi&&(ro+=1<<Yi),gr<ro&&(gr=ro)}var Ur=v(Li*Ri,J),or=Li,xi=v(or,ye);if(xi==null)var po=null;else i(65536>=or),po=xi;var _r=f(gr);if(po==null||_r==null||Ur==null){ei.a=1;break n}var yn=Ur;for(br=kn=0;br<Li;++br){var un=po[br],Ci=un.G,ua=un.H,Ga=0,Io=1,Kr=0;for(gn=0;5>gn;++gn){ro=ns[gn],Ci[gn]=yn,ua[gn]=kn,!gn&&0<Yi&&(ro+=1<<Yi);r:{var ql,ll=ro,ou=ei,er=_r,ws=yn,Ss=kn,Cs=0,Tl=ou.m,$f=F(Tl,1);if(u(er,0,0,ll),$f){var Ru=F(Tl,1)+1,Mu=F(Tl,1),au=F(Tl,Mu==0?1:8);er[au]=1,Ru==2&&(er[au=F(Tl,8)]=1);var Uo=1}else{var Fr=f(19),vc=F(Tl,4)+4;if(19<vc){ou.a=3;var ja=0;break r}for(ql=0;ql<vc;++ql)Fr[bc[ql]]=F(Tl,3);var wc=void 0,tc=void 0,cl=ou,su=Fr,Sc=ll,lu=er,cu=0,jl=cl.m,Bu=8,Ou=v(128,J);i:for(;S(Ou,0,7,su,19);){if(F(jl,1)){var ff=2+2*F(jl,3);if((wc=2+F(jl,ff))>Sc)break i}else wc=Sc;for(tc=0;tc<Sc&&wc--;){Ee(jl);var nc=Ou[0+(127&B(jl))];Ae(jl,jl.u+nc.g);var rs=nc.value;if(16>rs)lu[tc++]=rs,rs!=0&&(Bu=rs);else{var ic=rs==16,Ic=rs-16,Cc=wl[Ic],Uc=F(jl,Sa[Ic])+Cc;if(tc+Uc>Sc)break i;for(var Tc=ic?Bu:0;0<Uc--;)lu[tc++]=Tc}}cu=1;break i}cu||(cl.a=3),Uo=cu}(Uo=Uo&&!Tl.h)&&(Cs=S(ws,Ss,8,er,ll)),Uo&&Cs!=0?ja=Cs:(ou.a=3,ja=0)}if(ja==0)break n;if(Io&&Sl[gn]==1&&(Io=yn[kn].g==0),Ga+=yn[kn].g,kn+=ja,3>=gn){var Gs,Hl=_r[0];for(Gs=1;Gs<ro;++Gs)_r[Gs]>Hl&&(Hl=_r[Gs]);Kr+=Hl}}if(un.nd=Io,un.Qb=0,Io&&(un.qb=(Ci[3][ua[3]+0].value<<24|Ci[1][ua[1]+0].value<<16|Ci[2][ua[2]+0].value)>>>0,Ga==0&&256>Ci[0][ua[0]+0].value&&(un.Qb=1,un.qb+=Ci[0][ua[0]+0].value<<8)),un.jc=!un.Qb&&6>Kr,un.jc){var Vl,os=un;for(Vl=0;Vl<es;++Vl){var kl=Vl,$s=os.pd[kl],fa=os.G[0][os.H[0]+kl];256<=fa.value?($s.g=fa.g+256,$s.value=fa.value):($s.g=0,$s.value=0,kl>>=Jn(fa,8,$s),kl>>=Jn(os.G[1][os.H[1]+kl],16,$s),kl>>=Jn(os.G[2][os.H[2]+kl],0,$s),Jn(os.G[3][os.H[3]+kl],24,$s))}}}Ar.vc=oi,Ar.Wb=Li,Ar.Ya=po,Ar.yc=Ur,Dt=1;break t}Dt=0}if(!(Q=Dt)){L.a=3;break e}if(0<Ve){if(ve.ua=1<<Ve,!pe(ve.Wa,Ve)){L.a=1,Q=0;break e}}else ve.ua=0;var jc=L,rc=ee,df=le,Zr=jc.s,kc=Zr.xc;if(jc.c=rc,jc.i=df,Zr.md=dt(rc,kc),Zr.wc=kc==0?-1:(1<<kc)-1,j){L.xb=Cl;break e}if((Re=f(ee*le))==null){L.a=1,Q=0;break e}Q=(Q=Qo(L,Re,0,ee,le,le,null))&&!fe.h;break e}return Q?(G!=null?G[0]=Re:(i(Re==null),i(j)),L.$=0,j||_a(ve)):_a(ve),Q}function za(d,g){var j=d.c*d.i,L=j+g+16*g;return i(d.c<=g),d.V=f(L),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+j+g,1)}function ls(d,g){var j=d.C,L=g-j,G=d.V,Q=d.Ba+d.c*j;for(i(g<=d.l.o);0<L;){var ee=16<L?16:L,le=d.l.ma,fe=d.l.width,ve=fe*ee,Re=le.ca,Ve=le.tb+fe*j,xe=d.Ta,Oe=d.Ua;Hi(d,ee,G,Q),Rr(xe,Oe,Re,Ve,ve),yi(le,j,j+ee,Re,Ve,fe),L-=ee,G+=ee*d.c,j+=ee}i(j==g),d.C=d.Ma=g}function Yn(){this.ub=this.yd=this.td=this.Rb=0}function Po(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ti(){this.Fb=this.Bb=this.Cb=0,this.Zb=f(4),this.Lb=f(4)}function ea(){this.Yb=(function(){var d=[];return(function g(j,L,G){for(var Q=G[L],ee=0;ee<Q&&(j.push(G.length>L+1?[]:0),!(G.length<L+1));ee++)g(j[ee],L+1,G)})(d,0,[3,11]),d})()}function Ln(){this.jb=f(3),this.Wc=h([4,8],ea),this.Xc=h([4,17],ea)}function _s(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new f(4),this.od=new f(4)}function Hn(){this.ld=this.La=this.dd=this.tc=0}function ta(){this.Na=this.la=0}function pa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ls(){this.ad=f(384),this.Za=0,this.Ob=f(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zs(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hn),this.Y=0,this.ya=Array(new Ls),this.aa=0,this.l=new Ps}function Ks(){this.y=f(16),this.f=f(8),this.ea=f(8)}function hc(){this.cb=this.a=0,this.sc="",this.m=new A,this.Od=new Yn,this.Kc=new Po,this.ed=new _s,this.Qa=new Ti,this.Ic=this.$c=this.Aa=0,this.D=new zs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=v(8,A),this.ia=0,this.pb=v(4,pa),this.Pa=new Ln,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ks),this.Hd=0,this.rb=Array(new ta),this.sb=0,this.wa=Array(new Hn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ls),this.L=this.aa=0,this.gd=h([4,2],Hn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xi(d,g){return 0>d?0:d>g?g:d}function Ps(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function On(){var d=new hc;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,To||(To=Pr)),d}function Bn(d,g,j){return d.a==0&&(d.a=g,d.sc=j,d.cb=0),0}function Ds(d,g,j){return 3<=j&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function Pa(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return Bn(d,2,"null VP8Io passed to VP8GetHeaders()");var j=g.data,L=g.w,G=g.ha;if(4>G)return Bn(d,7,"Truncated header.");var Q=j[L+0]|j[L+1]<<8|j[L+2]<<16,ee=d.Od;if(ee.Rb=!(1&Q),ee.td=Q>>1&7,ee.yd=Q>>4&1,ee.ub=Q>>5,3<ee.td)return Bn(d,3,"Incorrect keyframe parameters.");if(!ee.yd)return Bn(d,4,"Frame not displayable.");L+=3,G-=3;var le=d.Kc;if(ee.Rb){if(7>G)return Bn(d,7,"cannot parse picture header");if(!Ds(j,L,G))return Bn(d,3,"Bad code word");le.c=16383&(j[L+4]<<8|j[L+3]),le.Td=j[L+4]>>6,le.i=16383&(j[L+6]<<8|j[L+5]),le.Ud=j[L+6]>>6,L+=7,G-=7,d.za=le.c+15>>4,d.Ub=le.i+15>>4,g.width=le.c,g.height=le.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,u((Q=d.Pa).jb,0,255,Q.jb.length),i((Q=d.Qa)!=null),Q.Cb=0,Q.Bb=0,Q.Fb=1,u(Q.Zb,0,0,Q.Zb.length),u(Q.Lb,0,0,Q.Lb)}if(ee.ub>G)return Bn(d,7,"bad partition length");K(Q=d.m,j,L,ee.ub),L+=ee.ub,G-=ee.ub,ee.Rb&&(le.Ld=Pe(Q),le.Kd=Pe(Q)),le=d.Qa;var fe,ve=d.Pa;if(i(Q!=null),i(le!=null),le.Cb=Pe(Q),le.Cb){if(le.Bb=Pe(Q),Pe(Q)){for(le.Fb=Pe(Q),fe=0;4>fe;++fe)le.Zb[fe]=Pe(Q)?ge(Q,7):0;for(fe=0;4>fe;++fe)le.Lb[fe]=Pe(Q)?ge(Q,6):0}if(le.Bb)for(fe=0;3>fe;++fe)ve.jb[fe]=Pe(Q)?te(Q,8):255}else le.Bb=0;if(Q.Ka)return Bn(d,3,"cannot parse segment header");if((le=d.ed).zd=Pe(Q),le.Tb=te(Q,6),le.wb=te(Q,3),le.Pc=Pe(Q),le.Pc&&Pe(Q)){for(ve=0;4>ve;++ve)Pe(Q)&&(le.vd[ve]=ge(Q,6));for(ve=0;4>ve;++ve)Pe(Q)&&(le.od[ve]=ge(Q,6))}if(d.L=le.Tb==0?0:le.zd?1:2,Q.Ka)return Bn(d,3,"cannot parse filter header");var Re=G;if(G=fe=L,L=fe+Re,le=Re,d.Xb=(1<<te(d.m,2))-1,Re<3*(ve=d.Xb))j=7;else{for(fe+=3*ve,le-=3*ve,Re=0;Re<ve;++Re){var Ve=j[G+0]|j[G+1]<<8|j[G+2]<<16;Ve>le&&(Ve=le),K(d.Jc[+Re],j,fe,Ve),fe+=Ve,le-=Ve,G+=3}K(d.Jc[+ve],j,fe,le),j=fe<L?0:5}if(j!=0)return Bn(d,j,"cannot parse partitions");for(j=te(fe=d.m,7),G=Pe(fe)?ge(fe,4):0,L=Pe(fe)?ge(fe,4):0,le=Pe(fe)?ge(fe,4):0,ve=Pe(fe)?ge(fe,4):0,fe=Pe(fe)?ge(fe,4):0,Re=d.Qa,Ve=0;4>Ve;++Ve){if(Re.Cb){var xe=Re.Zb[Ve];Re.Fb||(xe+=j)}else{if(0<Ve){d.pb[Ve]=d.pb[0];continue}xe=j}var Oe=d.pb[Ve];Oe.Sc[0]=is[Xi(xe+G,127)],Oe.Sc[1]=Mo[Xi(xe+0,127)],Oe.Eb[0]=2*is[Xi(xe+L,127)],Oe.Eb[1]=101581*Mo[Xi(xe+le,127)]>>16,8>Oe.Eb[1]&&(Oe.Eb[1]=8),Oe.Qc[0]=is[Xi(xe+ve,117)],Oe.Qc[1]=Mo[Xi(xe+fe,127)],Oe.lc=xe+fe}if(!ee.Rb)return Bn(d,4,"Not a key frame.");for(Pe(Q),ee=d.Pa,j=0;4>j;++j){for(G=0;8>G;++G)for(L=0;3>L;++L)for(le=0;11>le;++le)ve=nt(Q,hr[j][G][L][le])?te(Q,8):uf[j][G][L][le],ee.Wc[j][G].Yb[L][le]=ve;for(G=0;17>G;++G)ee.Xc[j][G]=ee.Wc[j][ki[G]]}return d.kc=Pe(Q),d.kc&&(d.Bd=te(Q,8)),d.cb=1}function Pr(d,g,j,L,G,Q,ee){var le=g[G].Yb[j];for(j=0;16>G;++G){if(!nt(d,le[j+0]))return G;for(;!nt(d,le[j+1]);)if(le=g[++G].Yb[0],j=0,G==16)return 16;var fe=g[G+1].Yb;if(nt(d,le[j+2])){var ve=d,Re=0;if(nt(ve,(xe=le)[(Ve=j)+3]))if(nt(ve,xe[Ve+6])){for(le=0,Ve=2*(Re=nt(ve,xe[Ve+8]))+(xe=nt(ve,xe[Ve+9+Re])),Re=0,xe=Oc[Ve];xe[le];++le)Re+=Re+nt(ve,xe[le]);Re+=3+(8<<Ve)}else nt(ve,xe[Ve+7])?(Re=7+2*nt(ve,165),Re+=nt(ve,145)):Re=5+nt(ve,159);else Re=nt(ve,xe[Ve+4])?3+nt(ve,xe[Ve+5]):2;le=fe[2]}else Re=1,le=fe[1];fe=ee+Fl[G],0>(ve=d).b&&Ge(ve);var Ve,xe=ve.b,Oe=(Ve=ve.Ca>>1)-(ve.I>>xe)>>31;--ve.b,ve.Ca+=Oe,ve.Ca|=1,ve.I-=(Ve+1&Oe)<<xe,Q[fe]=((Re^Oe)-Oe)*L[(0<G)+0]}return 16}function xo(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,u(d.zc,0,0,d.zc.length),d.ja=0}function tr(d,g,j,L,G){G=d[g+j+32*L]+(G>>3),d[g+j+32*L]=-256&G?0>G?0:255:G}function Un(d,g,j,L,G,Q){tr(d,g,0,j,L+G),tr(d,g,1,j,L+Q),tr(d,g,2,j,L-Q),tr(d,g,3,j,L-G)}function di(d){return(20091*d>>16)+d}function gl(d,g,j,L){var G,Q=0,ee=f(16);for(G=0;4>G;++G){var le=d[g+0]+d[g+8],fe=d[g+0]-d[g+8],ve=(35468*d[g+4]>>16)-di(d[g+12]),Re=di(d[g+4])+(35468*d[g+12]>>16);ee[Q+0]=le+Re,ee[Q+1]=fe+ve,ee[Q+2]=fe-ve,ee[Q+3]=le-Re,Q+=4,g++}for(G=Q=0;4>G;++G)le=(d=ee[Q+0]+4)+ee[Q+8],fe=d-ee[Q+8],ve=(35468*ee[Q+4]>>16)-di(ee[Q+12]),tr(j,L,0,0,le+(Re=di(ee[Q+4])+(35468*ee[Q+12]>>16))),tr(j,L,1,0,fe+ve),tr(j,L,2,0,fe-ve),tr(j,L,3,0,le-Re),Q++,L+=32}function Ml(d,g,j,L){var G=d[g+0]+4,Q=35468*d[g+4]>>16,ee=di(d[g+4]),le=35468*d[g+1]>>16;Un(j,L,0,G+ee,d=di(d[g+1]),le),Un(j,L,1,G+Q,d,le),Un(j,L,2,G-Q,d,le),Un(j,L,3,G-ee,d,le)}function ha(d,g,j,L,G){gl(d,g,j,L),G&&gl(d,g+16,j,L+4)}function bo(d,g,j,L){ys(d,g+0,j,L,1),ys(d,g+32,j,L+128,1)}function Es(d,g,j,L){var G;for(d=d[g+0]+4,G=0;4>G;++G)for(g=0;4>g;++g)tr(j,L,g,G,d)}function Da(d,g,j,L){d[g+0]&&Ui(d,g+0,j,L),d[g+16]&&Ui(d,g+16,j,L+4),d[g+32]&&Ui(d,g+32,j,L+128),d[g+48]&&Ui(d,g+48,j,L+128+4)}function vo(d,g,j,L){var G,Q=f(16);for(G=0;4>G;++G){var ee=d[g+0+G]+d[g+12+G],le=d[g+4+G]+d[g+8+G],fe=d[g+4+G]-d[g+8+G],ve=d[g+0+G]-d[g+12+G];Q[0+G]=ee+le,Q[8+G]=ee-le,Q[4+G]=ve+fe,Q[12+G]=ve-fe}for(G=0;4>G;++G)ee=(d=Q[0+4*G]+3)+Q[3+4*G],le=Q[1+4*G]+Q[2+4*G],fe=Q[1+4*G]-Q[2+4*G],ve=d-Q[3+4*G],j[L+0]=ee+le>>3,j[L+16]=ve+fe>>3,j[L+32]=ee-le>>3,j[L+48]=ve-fe>>3,L+=64}function Vo(d,g,j){var L,G=g-32,Q=Ji,ee=255-d[G-1];for(L=0;L<j;++L){var le,fe=Q,ve=ee+d[g-1];for(le=0;le<j;++le)d[g+le]=fe[ve+d[G+le]];g+=32}}function At(d,g){Vo(d,g,4)}function Vi(d,g){Vo(d,g,8)}function so(d,g){Vo(d,g,16)}function Zs(d,g){var j;for(j=0;16>j;++j)s(d,g+32*j,d,g-32,16)}function Ea(d,g){var j;for(j=16;0<j;--j)u(d,g,d[g-1],16),g+=32}function ga(d,g,j){var L;for(L=0;16>L;++L)u(g,j+32*L,d,16)}function Ka(d,g){var j,L=16;for(j=0;16>j;++j)L+=d[g-1+32*j]+d[g+j-32];ga(L>>5,d,g)}function nr(d,g){var j,L=8;for(j=0;16>j;++j)L+=d[g-1+32*j];ga(L>>4,d,g)}function Wi(d,g){var j,L=8;for(j=0;16>j;++j)L+=d[g+j-32];ga(L>>4,d,g)}function cs(d,g){ga(128,d,g)}function En(d,g,j){return d+2*g+j+2>>2}function Qn(d,g){var j,L=g-32;for(L=new Uint8Array([En(d[L-1],d[L+0],d[L+1]),En(d[L+0],d[L+1],d[L+2]),En(d[L+1],d[L+2],d[L+3]),En(d[L+2],d[L+3],d[L+4])]),j=0;4>j;++j)s(d,g+32*j,L,0,L.length)}function Cn(d,g){var j=d[g-1],L=d[g-1+32],G=d[g-1+64],Q=d[g-1+96];Ke(d,g+0,16843009*En(d[g-1-32],j,L)),Ke(d,g+32,16843009*En(j,L,G)),Ke(d,g+64,16843009*En(L,G,Q)),Ke(d,g+96,16843009*En(G,Q,Q))}function Ql(d,g){var j,L=4;for(j=0;4>j;++j)L+=d[g+j-32]+d[g-1+32*j];for(L>>=3,j=0;4>j;++j)u(d,g+32*j,L,4)}function na(d,g){var j=d[g-1+0],L=d[g-1+32],G=d[g-1+64],Q=d[g-1-32],ee=d[g+0-32],le=d[g+1-32],fe=d[g+2-32],ve=d[g+3-32];d[g+0+96]=En(L,G,d[g-1+96]),d[g+1+96]=d[g+0+64]=En(j,L,G),d[g+2+96]=d[g+1+64]=d[g+0+32]=En(Q,j,L),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=En(ee,Q,j),d[g+3+64]=d[g+2+32]=d[g+1+0]=En(le,ee,Q),d[g+3+32]=d[g+2+0]=En(fe,le,ee),d[g+3+0]=En(ve,fe,le)}function rn(d,g){var j=d[g+1-32],L=d[g+2-32],G=d[g+3-32],Q=d[g+4-32],ee=d[g+5-32],le=d[g+6-32],fe=d[g+7-32];d[g+0+0]=En(d[g+0-32],j,L),d[g+1+0]=d[g+0+32]=En(j,L,G),d[g+2+0]=d[g+1+32]=d[g+0+64]=En(L,G,Q),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=En(G,Q,ee),d[g+3+32]=d[g+2+64]=d[g+1+96]=En(Q,ee,le),d[g+3+64]=d[g+2+96]=En(ee,le,fe),d[g+3+96]=En(le,fe,fe)}function Tn(d,g){var j=d[g-1+0],L=d[g-1+32],G=d[g-1+64],Q=d[g-1-32],ee=d[g+0-32],le=d[g+1-32],fe=d[g+2-32],ve=d[g+3-32];d[g+0+0]=d[g+1+64]=Q+ee+1>>1,d[g+1+0]=d[g+2+64]=ee+le+1>>1,d[g+2+0]=d[g+3+64]=le+fe+1>>1,d[g+3+0]=fe+ve+1>>1,d[g+0+96]=En(G,L,j),d[g+0+64]=En(L,j,Q),d[g+0+32]=d[g+1+96]=En(j,Q,ee),d[g+1+32]=d[g+2+96]=En(Q,ee,le),d[g+2+32]=d[g+3+96]=En(ee,le,fe),d[g+3+32]=En(le,fe,ve)}function ni(d,g){var j=d[g+0-32],L=d[g+1-32],G=d[g+2-32],Q=d[g+3-32],ee=d[g+4-32],le=d[g+5-32],fe=d[g+6-32],ve=d[g+7-32];d[g+0+0]=j+L+1>>1,d[g+1+0]=d[g+0+64]=L+G+1>>1,d[g+2+0]=d[g+1+64]=G+Q+1>>1,d[g+3+0]=d[g+2+64]=Q+ee+1>>1,d[g+0+32]=En(j,L,G),d[g+1+32]=d[g+0+96]=En(L,G,Q),d[g+2+32]=d[g+1+96]=En(G,Q,ee),d[g+3+32]=d[g+2+96]=En(Q,ee,le),d[g+3+64]=En(ee,le,fe),d[g+3+96]=En(le,fe,ve)}function Kt(d,g){var j=d[g-1+0],L=d[g-1+32],G=d[g-1+64],Q=d[g-1+96];d[g+0+0]=j+L+1>>1,d[g+2+0]=d[g+0+32]=L+G+1>>1,d[g+2+32]=d[g+0+64]=G+Q+1>>1,d[g+1+0]=En(j,L,G),d[g+3+0]=d[g+1+32]=En(L,G,Q),d[g+3+32]=d[g+1+64]=En(G,Q,Q),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=Q}function ii(d,g){var j=d[g-1+0],L=d[g-1+32],G=d[g-1+64],Q=d[g-1+96],ee=d[g-1-32],le=d[g+0-32],fe=d[g+1-32],ve=d[g+2-32];d[g+0+0]=d[g+2+32]=j+ee+1>>1,d[g+0+32]=d[g+2+64]=L+j+1>>1,d[g+0+64]=d[g+2+96]=G+L+1>>1,d[g+0+96]=Q+G+1>>1,d[g+3+0]=En(le,fe,ve),d[g+2+0]=En(ee,le,fe),d[g+1+0]=d[g+3+32]=En(j,ee,le),d[g+1+32]=d[g+3+64]=En(L,j,ee),d[g+1+64]=d[g+3+96]=En(G,L,j),d[g+1+96]=En(Q,G,L)}function on(d,g){var j;for(j=0;8>j;++j)s(d,g+32*j,d,g-32,8)}function nu(d,g){var j;for(j=0;8>j;++j)u(d,g,d[g-1],8),g+=32}function Rt(d,g,j){var L;for(L=0;8>L;++L)u(g,j+32*L,d,8)}function Ai(d,g){var j,L=8;for(j=0;8>j;++j)L+=d[g+j-32]+d[g-1+32*j];Rt(L>>4,d,g)}function Wt(d,g){var j,L=4;for(j=0;8>j;++j)L+=d[g+j-32];Rt(L>>3,d,g)}function Vn(d,g){var j,L=4;for(j=0;8>j;++j)L+=d[g-1+32*j];Rt(L>>3,d,g)}function Do(d,g){Rt(128,d,g)}function Ra(d,g,j){var L=d[g-j],G=d[g+0],Q=3*(G-L)+ms[1020+d[g-2*j]-d[g+j]],ee=Di[112+(Q+4>>3)];d[g-j]=Ji[255+L+Di[112+(Q+3>>3)]],d[g+0]=Ji[255+G-ee]}function Yr(d,g,j,L){var G=d[g+0],Q=d[g+j];return Co[255+d[g-2*j]-d[g-j]]>L||Co[255+Q-G]>L}function Rs(d,g,j,L){return 4*Co[255+d[g-j]-d[g+0]]+Co[255+d[g-2*j]-d[g+j]]<=L}function ya(d,g,j,L,G){var Q=d[g-3*j],ee=d[g-2*j],le=d[g-j],fe=d[g+0],ve=d[g+j],Re=d[g+2*j],Ve=d[g+3*j];return 4*Co[255+le-fe]+Co[255+ee-ve]>L?0:Co[255+d[g-4*j]-Q]<=G&&Co[255+Q-ee]<=G&&Co[255+ee-le]<=G&&Co[255+Ve-Re]<=G&&Co[255+Re-ve]<=G&&Co[255+ve-fe]<=G}function Ma(d,g,j,L){var G=2*L+1;for(L=0;16>L;++L)Rs(d,g+L,j,G)&&Ra(d,g+L,j)}function Ms(d,g,j,L){var G=2*L+1;for(L=0;16>L;++L)Rs(d,g+L*j,1,G)&&Ra(d,g+L*j,1)}function Bl(d,g,j,L){var G;for(G=3;0<G;--G)Ma(d,g+=4*j,j,L)}function yl(d,g,j,L){var G;for(G=3;0<G;--G)Ms(d,g+=4,j,L)}function Js(d,g,j,L,G,Q,ee,le){for(Q=2*Q+1;0<G--;){if(ya(d,g,j,Q,ee))if(Yr(d,g,j,le))Ra(d,g,j);else{var fe=d,ve=g,Re=j,Ve=fe[ve-2*Re],xe=fe[ve-Re],Oe=fe[ve+0],Ye=fe[ve+Re],tt=fe[ve+2*Re],qe=27*(ct=ms[1020+3*(Oe-xe)+ms[1020+Ve-Ye]])+63>>7,st=18*ct+63>>7,ct=9*ct+63>>7;fe[ve-3*Re]=Ji[255+fe[ve-3*Re]+ct],fe[ve-2*Re]=Ji[255+Ve+st],fe[ve-Re]=Ji[255+xe+qe],fe[ve+0]=Ji[255+Oe-qe],fe[ve+Re]=Ji[255+Ye-st],fe[ve+2*Re]=Ji[255+tt-ct]}g+=L}}function Qs(d,g,j,L,G,Q,ee,le){for(Q=2*Q+1;0<G--;){if(ya(d,g,j,Q,ee))if(Yr(d,g,j,le))Ra(d,g,j);else{var fe=d,ve=g,Re=j,Ve=fe[ve-Re],xe=fe[ve+0],Oe=fe[ve+Re],Ye=Di[112+(4+(tt=3*(xe-Ve))>>3)],tt=Di[112+(tt+3>>3)],qe=Ye+1>>1;fe[ve-2*Re]=Ji[255+fe[ve-2*Re]+qe],fe[ve-Re]=Ji[255+Ve+tt],fe[ve+0]=Ji[255+xe-Ye],fe[ve+Re]=Ji[255+Oe-qe]}g+=L}}function iu(d,g,j,L,G,Q){Js(d,g,j,1,16,L,G,Q)}function an(d,g,j,L,G,Q){Js(d,g,1,j,16,L,G,Q)}function us(d,g,j,L,G,Q){var ee;for(ee=3;0<ee;--ee)Qs(d,g+=4*j,j,1,16,L,G,Q)}function w(d,g,j,L,G,Q){var ee;for(ee=3;0<ee;--ee)Qs(d,g+=4,1,j,16,L,G,Q)}function W(d,g,j,L,G,Q,ee,le){Js(d,g,G,1,8,Q,ee,le),Js(j,L,G,1,8,Q,ee,le)}function me(d,g,j,L,G,Q,ee,le){Js(d,g,1,G,8,Q,ee,le),Js(j,L,1,G,8,Q,ee,le)}function Ne(d,g,j,L,G,Q,ee,le){Qs(d,g+4*G,G,1,8,Q,ee,le),Qs(j,L+4*G,G,1,8,Q,ee,le)}function Ue(d,g,j,L,G,Q,ee,le){Qs(d,g+4,1,G,8,Q,ee,le),Qs(j,L+4,1,G,8,Q,ee,le)}function it(){this.ba=new In,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ht,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ut(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new pn,this.vb=new pn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ye,this.yc=new J}function ln(){this.xb=this.a=0,this.l=new Ps,this.ca=new In,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=v(4,Ut),this.Oc=0}function Xn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ps,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function pi(d,g,j,L,G,Q,ee){for(d=d==null?0:d[g+0],g=0;g<ee;++g)G[Q+g]=d+j[L+g]&255,d=G[Q+g]}function Dr(d,g,j,L,G,Q,ee){var le;if(d==null)pi(null,null,j,L,G,Q,ee);else for(le=0;le<ee;++le)G[Q+le]=d[g+le]+j[L+le]&255}function ji(d,g,j,L,G,Q,ee){if(d==null)pi(null,null,j,L,G,Q,ee);else{var le,fe=d[g+0],ve=fe,Re=fe;for(le=0;le<ee;++le)ve=Re+(fe=d[g+le])-ve,Re=j[L+le]+(-256&ve?0>ve?0:255:ve)&255,ve=fe,G[Q+le]=Re}}function Ii(d,g,j,L){var G=g.width,Q=g.o;if(i(d!=null&&g!=null),0>j||0>=L||j+L>Q)return null;if(!d.Cc){if(d.ga==null){var ee;if(d.ga=new Xn,(ee=d.ga==null)||(ee=g.width*g.o,i(d.Gb.length==0),d.Gb=f(ee),d.Uc=0,d.Gb==null?ee=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,ee=1),ee=!ee),!ee){ee=d.ga;var le=d.Fa,fe=d.P,ve=d.qc,Re=d.mb,Ve=d.nb,xe=fe+1,Oe=ve-1,Ye=ee.l;if(i(le!=null&&Re!=null&&g!=null),ca[0]=null,ca[1]=pi,ca[2]=Dr,ca[3]=ji,ee.ca=Re,ee.tb=Ve,ee.c=g.width,ee.i=g.height,i(0<ee.c&&0<ee.i),1>=ve)g=0;else if(ee.$a=3&le[fe+0],ee.Z=le[fe+0]>>2&3,ee.Lc=le[fe+0]>>4&3,fe=le[fe+0]>>6&3,0>ee.$a||1<ee.$a||4<=ee.Z||1<ee.Lc||fe)g=0;else if(Ye.put=Vt,Ye.ac=Lo,Ye.bc=zo,Ye.ma=ee,Ye.width=g.width,Ye.height=g.height,Ye.Da=g.Da,Ye.v=g.v,Ye.va=g.va,Ye.j=g.j,Ye.o=g.o,ee.$a)e:{i(ee.$a==1),g=hl();t:for(;;){if(g==null){g=0;break e}if(i(ee!=null),ee.mc=g,g.c=ee.c,g.i=ee.i,g.l=ee.l,g.l.ma=ee,g.l.width=ee.c,g.l.height=ee.i,g.a=0,je(g.m,le,xe,Oe),!La(ee.c,ee.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&vi(g.s)?(ee.ic=1,le=g.c*g.i,g.Ta=null,g.Ua=0,g.V=f(le),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(ee.ic=0,g=za(g,ee.c)),!g))break t;g=1;break e}ee.mc=null,g=0}else g=Oe>=ee.c*ee.i;ee=!g}if(ee)return null;d.ga.Lc!=1?d.Ga=0:L=Q-j}i(d.ga!=null),i(j+L<=Q);e:{if(g=(le=d.ga).c,Q=le.l.o,le.$a==0){if(xe=d.rc,Oe=d.Vc,Ye=d.Fa,fe=d.P+1+j*g,ve=d.mb,Re=d.nb+j*g,i(fe<=d.P+d.qc),le.Z!=0)for(i(ca[le.Z]!=null),ee=0;ee<L;++ee)ca[le.Z](xe,Oe,Ye,fe,ve,Re,g),xe=ve,Oe=Re,Re+=g,fe+=g;else for(ee=0;ee<L;++ee)s(ve,Re,Ye,fe,g),xe=ve,Oe=Re,Re+=g,fe+=g;d.rc=xe,d.Vc=Oe}else{if(i(le.mc!=null),g=j+L,i((ee=le.mc)!=null),i(g<=ee.i),ee.C>=g)g=1;else if(le.ic||wo(),le.ic){le=ee.V,xe=ee.Ba,Oe=ee.c;var tt=ee.i,qe=(Ye=1,fe=ee.$/Oe,ve=ee.$%Oe,Re=ee.m,Ve=ee.s,ee.$),st=Oe*tt,ct=Oe*g,Tt=Ve.wc,mt=qe<ct?ur(Ve,ve,fe):null;i(qe<=st),i(g<=tt),i(vi(Ve));t:for(;;){for(;!Re.h&&qe<ct;){if(ve&Tt||(mt=ur(Ve,ve,fe)),i(mt!=null),Ee(Re),256>(tt=ui(mt.G[0],mt.H[0],Re)))le[xe+qe]=tt,++qe,++ve>=Oe&&(ve=0,++fe<=g&&!(fe%16)&&mo(ee,fe));else{if(!(280>tt)){Ye=0;break t}tt=Jo(tt-256,Re);var Xt,zt=ui(mt.G[4],mt.H[4],Re);if(Ee(Re),!(qe>=(zt=bt(Oe,zt=Jo(zt,Re)))&&st-qe>=tt)){Ye=0;break t}for(Xt=0;Xt<tt;++Xt)le[xe+qe+Xt]=le[xe+qe+Xt-zt];for(qe+=tt,ve+=tt;ve>=Oe;)ve-=Oe,++fe<=g&&!(fe%16)&&mo(ee,fe);qe<ct&&ve&Tt&&(mt=ur(Ve,ve,fe))}i(Re.h==de(Re))}mo(ee,fe>g?g:fe);break t}!Ye||Re.h&&qe<st?(Ye=0,ee.a=Re.h?5:3):ee.$=qe,g=Ye}else g=Qo(ee,ee.V,ee.Ba,ee.c,ee.i,g,ls);if(!g){L=0;break e}}j+L>=Q&&(d.Cc=1),L=1}if(!L)return null;if(d.Cc&&((L=d.ga)!=null&&(L.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+j*G}function Ni(d,g,j,L,G,Q){for(;0<G--;){var ee,le=d,fe=g+(j?1:0),ve=d,Re=g+(j?0:3);for(ee=0;ee<L;++ee){var Ve=ve[Re+4*ee];Ve!=255&&(Ve*=32897,le[fe+4*ee+0]=le[fe+4*ee+0]*Ve>>23,le[fe+4*ee+1]=le[fe+4*ee+1]*Ve>>23,le[fe+4*ee+2]=le[fe+4*ee+2]*Ve>>23)}g+=Q}}function mr(d,g,j,L,G){for(;0<L--;){var Q;for(Q=0;Q<j;++Q){var ee=d[g+2*Q+0],le=15&(ve=d[g+2*Q+1]),fe=4369*le,ve=(240&ve|ve>>4)*fe>>16;d[g+2*Q+0]=(240&ee|ee>>4)*fe>>16&240|(15&ee|ee<<4)*fe>>16>>4&15,d[g+2*Q+1]=240&ve|le}g+=G}}function Ki(d,g,j,L,G,Q,ee,le){var fe,ve,Re=255;for(ve=0;ve<G;++ve){for(fe=0;fe<L;++fe){var Ve=d[g+fe];Q[ee+4*fe]=Ve,Re&=Ve}g+=j,ee+=le}return Re!=255}function Za(d,g,j,L,G){var Q;for(Q=0;Q<G;++Q)j[L+Q]=d[g+Q]>>8}function wo(){ol=Ni,ir=mr,Si=Ki,Rr=Za}function Bs(d,g,j){V[d]=function(L,G,Q,ee,le,fe,ve,Re,Ve,xe,Oe,Ye,tt,qe,st,ct,Tt){var mt,Xt=Tt-1>>1,zt=le[fe+0]|ve[Re+0]<<16,hn=Ve[xe+0]|Oe[Ye+0]<<16;i(L!=null);var It=3*zt+hn+131074>>2;for(g(L[G+0],255&It,It>>16,tt,qe),Q!=null&&(It=3*hn+zt+131074>>2,g(Q[ee+0],255&It,It>>16,st,ct)),mt=1;mt<=Xt;++mt){var Gn=le[fe+mt]|ve[Re+mt]<<16,Qi=Ve[xe+mt]|Oe[Ye+mt]<<16,Fn=zt+Gn+hn+Qi+524296,Mt=Fn+2*(Gn+hn)>>3;It=Mt+zt>>1,zt=(Fn=Fn+2*(zt+Qi)>>3)+Gn>>1,g(L[G+2*mt-1],255&It,It>>16,tt,qe+(2*mt-1)*j),g(L[G+2*mt-0],255&zt,zt>>16,tt,qe+(2*mt-0)*j),Q!=null&&(It=Fn+hn>>1,zt=Mt+Qi>>1,g(Q[ee+2*mt-1],255&It,It>>16,st,ct+(2*mt-1)*j),g(Q[ee+2*mt+0],255&zt,zt>>16,st,ct+(2*mt+0)*j)),zt=Gn,hn=Qi}1&Tt||(It=3*zt+hn+131074>>2,g(L[G+Tt-1],255&It,It>>16,tt,qe+(Tt-1)*j),Q!=null&&(It=3*hn+zt+131074>>2,g(Q[ee+Tt-1],255&It,It>>16,st,ct+(Tt-1)*j)))}}function lo(){Fi[Bc]=qa,Fi[Wo]=Br,Fi[xc]=Yo,Fi[wa]=Ha,Fi[ec]=Or,Fi[al]=uo,Fi[bl]=Ir,Fi[Vs]=Br,Fi[Ul]=Ha,Fi[xs]=Or,Fi[vl]=uo}function Os(d){return d&-16384?0>d?0:255:d>>Va}function Er(d,g){return Os((19077*d>>8)+(26149*g>>8)-14234)}function ia(d,g,j){return Os((19077*d>>8)-(6419*g>>8)-(13320*j>>8)+8708)}function co(d,g){return Os((19077*d>>8)+(33050*g>>8)-17685)}function Ba(d,g,j,L,G){L[G+0]=Er(d,j),L[G+1]=ia(d,g,j),L[G+2]=co(d,g)}function ri(d,g,j,L,G){L[G+0]=co(d,g),L[G+1]=ia(d,g,j),L[G+2]=Er(d,j)}function Ja(d,g,j,L,G){var Q=ia(d,g,j);g=Q<<3&224|co(d,g)>>3,L[G+0]=248&Er(d,j)|Q>>5,L[G+1]=g}function Ol(d,g,j,L,G){var Q=240&co(d,g)|15;L[G+0]=240&Er(d,j)|ia(d,g,j)>>4,L[G+1]=Q}function gc(d,g,j,L,G){L[G+0]=255,Ba(d,g,j,L,G+1)}function Oa(d,g,j,L,G){ri(d,g,j,L,G),L[G+3]=255}function Eo(d,g,j,L,G){Ba(d,g,j,L,G),L[G+3]=255}function fs(d,g,j){V[d]=function(L,G,Q,ee,le,fe,ve,Re,Ve){for(var xe=Re+(-2&Ve)*j;Re!=xe;)g(L[G+0],Q[ee+0],le[fe+0],ve,Re),g(L[G+1],Q[ee+0],le[fe+0],ve,Re+j),G+=2,++ee,++fe,Re+=2*j;1&Ve&&g(L[G+0],Q[ee+0],le[fe+0],ve,Re)}}function Il(d,g,j){return j==0?d==0?g==0?6:5:g==0?4:0:j}function ds(d,g,j,L,G){switch(d>>>30){case 3:ys(g,j,L,G,0);break;case 2:sa(g,j,L,G);break;case 1:Ui(g,j,L,G)}}function ra(d,g){var j,L,G=g.M,Q=g.Nb,ee=d.oc,le=d.pc+40,fe=d.oc,ve=d.pc+584,Re=d.oc,Ve=d.pc+600;for(j=0;16>j;++j)ee[le+32*j-1]=129;for(j=0;8>j;++j)fe[ve+32*j-1]=129,Re[Ve+32*j-1]=129;for(0<G?ee[le-1-32]=fe[ve-1-32]=Re[Ve-1-32]=129:(u(ee,le-32-1,127,21),u(fe,ve-32-1,127,9),u(Re,Ve-32-1,127,9)),L=0;L<d.za;++L){var xe=g.ya[g.aa+L];if(0<L){for(j=-1;16>j;++j)s(ee,le+32*j-4,ee,le+32*j+12,4);for(j=-1;8>j;++j)s(fe,ve+32*j-4,fe,ve+32*j+4,4),s(Re,Ve+32*j-4,Re,Ve+32*j+4,4)}var Oe=d.Gd,Ye=d.Hd+L,tt=xe.ad,qe=xe.Hc;if(0<G&&(s(ee,le-32,Oe[Ye].y,0,16),s(fe,ve-32,Oe[Ye].f,0,8),s(Re,Ve-32,Oe[Ye].ea,0,8)),xe.Za){var st=ee,ct=le-32+16;for(0<G&&(L>=d.za-1?u(st,ct,Oe[Ye].y[15],4):s(st,ct,Oe[Ye+1].y,0,4)),j=0;4>j;j++)st[ct+128+j]=st[ct+256+j]=st[ct+384+j]=st[ct+0+j];for(j=0;16>j;++j,qe<<=2)st=ee,ct=le+Ei[j],kr[xe.Ob[j]](st,ct),ds(qe,tt,16*+j,st,ct)}else if(st=Il(L,G,xe.Ob[0]),Ca[st](ee,le),qe!=0)for(j=0;16>j;++j,qe<<=2)ds(qe,tt,16*+j,ee,le+Ei[j]);for(j=xe.Gc,st=Il(L,G,xe.Dd),bs[st](fe,ve),bs[st](Re,Ve),qe=tt,st=fe,ct=ve,255&(xe=0|j)&&(170&xe?ts(qe,256,st,ct):_i(qe,256,st,ct)),xe=Re,qe=Ve,255&(j>>=8)&&(170&j?ts(tt,320,xe,qe):_i(tt,320,xe,qe)),G<d.Ub-1&&(s(Oe[Ye].y,0,ee,le+480,16),s(Oe[Ye].f,0,fe,ve+224,8),s(Oe[Ye].ea,0,Re,Ve+224,8)),j=8*Q*d.B,Oe=d.sa,Ye=d.ta+16*L+16*Q*d.R,tt=d.qa,xe=d.ra+8*L+j,qe=d.Ha,st=d.Ia+8*L+j,j=0;16>j;++j)s(Oe,Ye+j*d.R,ee,le+32*j,16);for(j=0;8>j;++j)s(tt,xe+j*d.B,fe,ve+32*j,8),s(qe,st+j*d.B,Re,Ve+32*j,8)}}function Jr(d,g,j,L,G,Q,ee,le,fe){var ve=[0],Re=[0],Ve=0,xe=fe!=null?fe.kd:0,Oe=fe??new pt;if(d==null||12>j)return 7;Oe.data=d,Oe.w=g,Oe.ha=j,g=[g],j=[j],Oe.gb=[Oe.gb];e:{var Ye=g,tt=j,qe=Oe.gb;if(i(d!=null),i(tt!=null),i(qe!=null),qe[0]=0,12<=tt[0]&&!o(d,Ye[0],"RIFF")){if(o(d,Ye[0]+8,"WEBP")){qe=3;break e}var st=Bt(d,Ye[0]+4);if(12>st||4294967286<st){qe=3;break e}if(xe&&st>tt[0]-8){qe=7;break e}qe[0]=st,Ye[0]+=12,tt[0]-=12}qe=0}if(qe!=0)return qe;for(st=0<Oe.gb[0],j=j[0];;){e:{var ct=d;tt=g,qe=j;var Tt=ve,mt=Re,Xt=Ye=[0];if((It=Ve=[Ve])[0]=0,8>qe[0])qe=7;else{if(!o(ct,tt[0],"VP8X")){if(Bt(ct,tt[0]+4)!=10){qe=3;break e}if(18>qe[0]){qe=7;break e}var zt=Bt(ct,tt[0]+8),hn=1+St(ct,tt[0]+12);if(2147483648<=hn*(ct=1+St(ct,tt[0]+15))){qe=3;break e}Xt!=null&&(Xt[0]=zt),Tt!=null&&(Tt[0]=hn),mt!=null&&(mt[0]=ct),tt[0]+=18,qe[0]-=18,It[0]=1}qe=0}}if(Ve=Ve[0],Ye=Ye[0],qe!=0)return qe;if(tt=!!(2&Ye),!st&&Ve)return 3;if(Q!=null&&(Q[0]=!!(16&Ye)),ee!=null&&(ee[0]=tt),le!=null&&(le[0]=0),ee=ve[0],Ye=Re[0],Ve&&tt&&fe==null){qe=0;break}if(4>j){qe=7;break}if(st&&Ve||!st&&!Ve&&!o(d,g[0],"ALPH")){j=[j],Oe.na=[Oe.na],Oe.P=[Oe.P],Oe.Sa=[Oe.Sa];e:{zt=d,qe=g,st=j;var It=Oe.gb;Tt=Oe.na,mt=Oe.P,Xt=Oe.Sa,hn=22,i(zt!=null),i(st!=null),ct=qe[0];var Gn=st[0];for(i(Tt!=null),i(Xt!=null),Tt[0]=null,mt[0]=null,Xt[0]=0;;){if(qe[0]=ct,st[0]=Gn,8>Gn){qe=7;break e}var Qi=Bt(zt,ct+4);if(4294967286<Qi){qe=3;break e}var Fn=8+Qi+1&-2;if(hn+=Fn,0<It&&hn>It){qe=3;break e}if(!o(zt,ct,"VP8 ")||!o(zt,ct,"VP8L")){qe=0;break e}if(Gn[0]<Fn){qe=7;break e}o(zt,ct,"ALPH")||(Tt[0]=zt,mt[0]=ct+8,Xt[0]=Qi),ct+=Fn,Gn-=Fn}}if(j=j[0],Oe.na=Oe.na[0],Oe.P=Oe.P[0],Oe.Sa=Oe.Sa[0],qe!=0)break}j=[j],Oe.Ja=[Oe.Ja],Oe.xa=[Oe.xa];e:if(It=d,qe=g,st=j,Tt=Oe.gb[0],mt=Oe.Ja,Xt=Oe.xa,zt=qe[0],ct=!o(It,zt,"VP8 "),hn=!o(It,zt,"VP8L"),i(It!=null),i(st!=null),i(mt!=null),i(Xt!=null),8>st[0])qe=7;else{if(ct||hn){if(It=Bt(It,zt+4),12<=Tt&&It>Tt-12){qe=3;break e}if(xe&&It>st[0]-8){qe=7;break e}mt[0]=It,qe[0]+=8,st[0]-=8,Xt[0]=hn}else Xt[0]=5<=st[0]&&It[zt+0]==47&&!(It[zt+4]>>5),mt[0]=st[0];qe=0}if(j=j[0],Oe.Ja=Oe.Ja[0],Oe.xa=Oe.xa[0],g=g[0],qe!=0)break;if(4294967286<Oe.Ja)return 3;if(le==null||tt||(le[0]=Oe.xa?2:1),ee=[ee],Ye=[Ye],Oe.xa){if(5>j){qe=7;break}le=ee,xe=Ye,tt=Q,d==null||5>j?d=0:5<=j&&d[g+0]==47&&!(d[g+4]>>5)?(st=[0],It=[0],Tt=[0],je(mt=new M,d,g,j),da(mt,st,It,Tt)?(le!=null&&(le[0]=st[0]),xe!=null&&(xe[0]=It[0]),tt!=null&&(tt[0]=Tt[0]),d=1):d=0):d=0}else{if(10>j){qe=7;break}le=Ye,d==null||10>j||!Ds(d,g+3,j-3)?d=0:(xe=d[g+0]|d[g+1]<<8|d[g+2]<<16,tt=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&xe||3<(xe>>1&7)||!(xe>>4&1)||xe>>5>=Oe.Ja||!tt||!d?d=0:(ee&&(ee[0]=tt),le&&(le[0]=d),d=1))}if(!d||(ee=ee[0],Ye=Ye[0],Ve&&(ve[0]!=ee||Re[0]!=Ye)))return 3;fe!=null&&(fe[0]=Oe,fe.offset=g-fe.w,i(4294967286>g-fe.w),i(fe.offset==fe.ha-j));break}return qe==0||qe==7&&Ve&&fe==null?(Q!=null&&(Q[0]|=Oe.na!=null&&0<Oe.na.length),L!=null&&(L[0]=ee),G!=null&&(G[0]=Ye),0):qe}function Ia(d,g,j){var L=g.width,G=g.height,Q=0,ee=0,le=L,fe=G;if(g.Da=d!=null&&0<d.Da,g.Da&&(le=d.cd,fe=d.bd,Q=d.v,ee=d.j,11>j||(Q&=-2,ee&=-2),0>Q||0>ee||0>=le||0>=fe||Q+le>L||ee+fe>G))return 0;if(g.v=Q,g.j=ee,g.va=Q+le,g.o=ee+fe,g.U=le,g.T=fe,g.da=d!=null&&0<d.da,g.da){if(!Zt(le,fe,j=[d.ib],Q=[d.hb]))return 0;g.ib=j[0],g.hb=Q[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*L/4&&g.hb<3*G/4,g.Kb=0),1}function Is(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function Qa(d,g,j,L){if(L==null||0>=d||0>=g)return 2;if(j!=null){if(j.Da){var G=j.cd,Q=j.bd,ee=-2&j.v,le=-2&j.j;if(0>ee||0>le||0>=G||0>=Q||ee+G>d||le+Q>g)return 2;d=G,g=Q}if(j.da){if(!Zt(d,g,G=[j.ib],Q=[j.hb]))return 2;d=G[0],g=Q[0]}}L.width=d,L.height=g;e:{var fe=L.width,ve=L.height;if(d=L.S,0>=fe||0>=ve||!(d>=Bc&&13>d))d=2;else{if(0>=L.Rd&&L.sd==null){ee=Q=G=g=0;var Re=(le=fe*Rn[d])*ve;if(11>d||(Q=(ve+1)/2*(g=(fe+1)/2),d==12&&(ee=(G=fe)*ve)),(ve=f(Re+2*Q+ee))==null){d=1;break e}L.sd=ve,11>d?((fe=L.f.RGBA).eb=ve,fe.fb=0,fe.A=le,fe.size=Re):((fe=L.f.kb).y=ve,fe.O=0,fe.fa=le,fe.Fd=Re,fe.f=ve,fe.N=0+Re,fe.Ab=g,fe.Cd=Q,fe.ea=ve,fe.W=0+Re+Q,fe.Db=g,fe.Ed=Q,d==12&&(fe.F=ve,fe.J=0+Re+2*Q),fe.Tc=ee,fe.lb=G)}if(g=1,G=L.S,Q=L.width,ee=L.height,G>=Bc&&13>G)if(11>G)d=L.f.RGBA,g&=(le=Math.abs(d.A))*(ee-1)+Q<=d.size,g&=le>=Q*Rn[G],g&=d.eb!=null;else{d=L.f.kb,le=(Q+1)/2,Re=(ee+1)/2,fe=Math.abs(d.fa),ve=Math.abs(d.Ab);var Ve=Math.abs(d.Db),xe=Math.abs(d.lb),Oe=xe*(ee-1)+Q;g&=fe*(ee-1)+Q<=d.Fd,g&=ve*(Re-1)+le<=d.Cd,g=(g&=Ve*(Re-1)+le<=d.Ed)&fe>=Q&ve>=le&Ve>=le,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,G==12&&(g&=xe>=Q,g&=Oe<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||j!=null&&j.fd&&(d=Is(L)),d}var es=64,oa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Qr=24,ps=32,ma=8,wi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Et("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(d){return d},V.Predictor2=function(d,g,j){return g[j+0]},V.Predictor3=function(d,g,j){return g[j+1]},V.Predictor4=function(d,g,j){return g[j-1]},V.Predictor5=function(d,g,j){return Jt(Jt(d,g[j+1]),g[j+0])},V.Predictor6=function(d,g,j){return Jt(d,g[j-1])},V.Predictor7=function(d,g,j){return Jt(d,g[j+0])},V.Predictor8=function(d,g,j){return Jt(g[j-1],g[j+0])},V.Predictor9=function(d,g,j){return Jt(g[j+0],g[j+1])},V.Predictor10=function(d,g,j){return Jt(Jt(d,g[j-1]),Jt(g[j+0],g[j+1]))},V.Predictor11=function(d,g,j){var L=g[j+0];return 0>=Pt(L>>24&255,d>>24&255,(g=g[j-1])>>24&255)+Pt(L>>16&255,d>>16&255,g>>16&255)+Pt(L>>8&255,d>>8&255,g>>8&255)+Pt(255&L,255&d,255&g)?L:d},V.Predictor12=function(d,g,j){var L=g[j+0];return(Wn((d>>24&255)+(L>>24&255)-((g=g[j-1])>>24&255))<<24|Wn((d>>16&255)+(L>>16&255)-(g>>16&255))<<16|Wn((d>>8&255)+(L>>8&255)-(g>>8&255))<<8|Wn((255&d)+(255&L)-(255&g)))>>>0},V.Predictor13=function(d,g,j){var L=g[j-1];return(kt((d=Jt(d,g[j+0]))>>24&255,L>>24&255)<<24|kt(d>>16&255,L>>16&255)<<16|kt(d>>8&255,L>>8&255)<<8|kt(255&d,255&L))>>>0};var hs=V.PredictorAdd0;V.PredictorAdd1=fi,Et("Predictor2","PredictorAdd2"),Et("Predictor3","PredictorAdd3"),Et("Predictor4","PredictorAdd4"),Et("Predictor5","PredictorAdd5"),Et("Predictor6","PredictorAdd6"),Et("Predictor7","PredictorAdd7"),Et("Predictor8","PredictorAdd8"),Et("Predictor9","PredictorAdd9"),Et("Predictor10","PredictorAdd10"),Et("Predictor11","PredictorAdd11"),Et("Predictor12","PredictorAdd12"),Et("Predictor13","PredictorAdd13");var Zi=V.PredictorAdd2;Gt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Gt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var fr,yc=V.ColorIndexInverseTransform,xa=V.MapARGB,el=V.VP8LColorIndexInverseTransformAlpha,So=V.MapAlpha,ml=V.VP8LPredictorsAdd=[];ml.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var mc,Ua,Us,gs,aa,Ro,ba,ys,sa,ts,Ui,_i,dr,eo,tl,Fs,to,la,nl,qs,il,xl,rl,Fa,ol,ir,Si,Rr,Mr=f(511),va=f(2041),Rc=f(225),Hs=f(767),Mc=0,ms=va,Di=Rc,Ji=Hs,Co=Mr,Bc=0,Wo=1,xc=2,wa=3,ec=4,al=5,bl=6,Vs=7,Ul=8,xs=9,vl=10,Sa=[2,3,7],wl=[3,3,11],ns=[280,256,256,256,40],Sl=[0,1,1,1,0],bc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],no=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],pr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ws=8,is=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Mo=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],To=null,Oc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Fl=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ys=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],uf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Bo=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ki=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ca=[],kr=[],bs=[],Cl=1,ru=2,ca=[],Fi=[];Bs("UpsampleRgbLinePair",Ba,3),Bs("UpsampleBgrLinePair",ri,3),Bs("UpsampleRgbaLinePair",Eo,4),Bs("UpsampleBgraLinePair",Oa,4),Bs("UpsampleArgbLinePair",gc,4),Bs("UpsampleRgba4444LinePair",Ol,2),Bs("UpsampleRgb565LinePair",Ja,2);var qa=V.UpsampleRgbLinePair,Yo=V.UpsampleBgrLinePair,Br=V.UpsampleRgbaLinePair,Ha=V.UpsampleBgraLinePair,Or=V.UpsampleArgbLinePair,uo=V.UpsampleRgba4444LinePair,Ir=V.UpsampleRgb565LinePair,Gr=16,fo=1<<Gr-1,Go=-227,$r=482,Va=6,jo=0,xr=f(256),Ta=f(256),sl=f(256),Wa=f(256),vs=f($r-Go),Ya=f($r-Go);fs("YuvToRgbRow",Ba,3),fs("YuvToBgrRow",ri,3),fs("YuvToRgbaRow",Eo,4),fs("YuvToBgraRow",Oa,4),fs("YuvToArgbRow",gc,4),fs("YuvToRgba4444Row",Ol,2),fs("YuvToRgb565Row",Ja,2);var Ei=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$o=[0,2,8],Oo=[8,7,6,4,4,2,2,2,1,1,1,1],_n=1;this.WebPDecodeRGBA=function(d,g,j,L,G){var Q=Wo,ee=new it,le=new In;ee.ba=le,le.S=Q,le.width=[le.width],le.height=[le.height];var fe=le.width,ve=le.height,Re=new cn;if(Re==null||d==null)var Ve=2;else i(Re!=null),Ve=Jr(d,g,j,Re.width,Re.height,Re.Pd,Re.Qd,Re.format,null);if(Ve!=0?fe=0:(fe!=null&&(fe[0]=Re.width[0]),ve!=null&&(ve[0]=Re.height[0]),fe=1),fe){le.width=le.width[0],le.height=le.height[0],L!=null&&(L[0]=le.width),G!=null&&(G[0]=le.height);e:{if(L=new Ps,(G=new pt).data=d,G.w=g,G.ha=j,G.kd=1,g=[0],i(G!=null),((d=Jr(G.data,G.w,G.ha,null,null,null,g,null,G))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(i(ee!=null),L.data=G.data,L.w=G.w+G.offset,L.ha=G.ha-G.offset,L.put=Vt,L.ac=Lo,L.bc=zo,L.ma=ee,G.xa){if((d=hl())==null){ee=1;break e}if((function(xe,Oe){var Ye=[0],tt=[0],qe=[0];t:for(;;){if(xe==null)return 0;if(Oe==null)return xe.a=2,0;if(xe.l=Oe,xe.a=0,je(xe.m,Oe.data,Oe.w,Oe.ha),!da(xe.m,Ye,tt,qe)){xe.a=3;break t}if(xe.xb=ru,Oe.width=Ye[0],Oe.height=tt[0],!La(Ye[0],tt[0],1,xe,null))break t;return 1}return i(xe.a!=0),0})(d,L)){if(L=(g=Qa(L.width,L.height,ee.Oa,ee.ba))==0){t:{L=d;n:for(;;){if(L==null){L=0;break t}if(i(L.s.yc!=null),i(L.s.Ya!=null),i(0<L.s.Wb),i((j=L.l)!=null),i((G=j.ma)!=null),L.xb!=0){if(L.ca=G.ba,L.tb=G.tb,i(L.ca!=null),!Ia(G.Oa,j,wa)){L.a=2;break n}if(!za(L,j.width)||j.da)break n;if((j.da||qt(L.ca.S))&&wo(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&wo()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!pe(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!Qo(L,L.V,L.Ba,L.c,L.i,j.o,jr))break n;G.Dc=L.Ma,L=1;break t}i(L.a!=0),L=0}L=!L}L&&(g=d.a)}else g=d.a}else{if((d=new On)==null){ee=1;break e}if(d.Fa=G.na,d.P=G.P,d.qc=G.Sa,Pa(d,L)){if((g=Qa(L.width,L.height,ee.Oa,ee.ba))==0){if(d.Aa=0,j=ee.Oa,i((G=d)!=null),j!=null){if(0<(fe=0>(fe=j.Md)?0:100<fe?255:255*fe/100)){for(ve=Re=0;4>ve;++ve)12>(Ve=G.pb[ve]).lc&&(Ve.ia=fe*Oo[0>Ve.lc?0:Ve.lc]>>3),Re|=Ve.ia;Re&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=j.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}(function(xe,Oe){if(xe==null)return 0;if(Oe==null)return Bn(xe,2,"NULL VP8Io parameter in VP8Decode().");if(!xe.cb&&!Pa(xe,Oe))return 0;if(i(xe.cb),Oe.ac==null||Oe.ac(Oe)){Oe.ob&&(xe.L=0);var Ye=$o[xe.L];if(xe.L==2?(xe.yb=0,xe.zb=0):(xe.yb=Oe.v-Ye>>4,xe.zb=Oe.j-Ye>>4,0>xe.yb&&(xe.yb=0),0>xe.zb&&(xe.zb=0)),xe.Va=Oe.o+15+Ye>>4,xe.Hb=Oe.va+15+Ye>>4,xe.Hb>xe.za&&(xe.Hb=xe.za),xe.Va>xe.Ub&&(xe.Va=xe.Ub),0<xe.L){var tt=xe.ed;for(Ye=0;4>Ye;++Ye){var qe;if(xe.Qa.Cb){var st=xe.Qa.Lb[Ye];xe.Qa.Fb||(st+=tt.Tb)}else st=tt.Tb;for(qe=0;1>=qe;++qe){var ct=xe.gd[Ye][qe],Tt=st;if(tt.Pc&&(Tt+=tt.vd[0],qe&&(Tt+=tt.od[0])),0<(Tt=0>Tt?0:63<Tt?63:Tt)){var mt=Tt;0<tt.wb&&(mt=4<tt.wb?mt>>2:mt>>1)>9-tt.wb&&(mt=9-tt.wb),1>mt&&(mt=1),ct.dd=mt,ct.tc=2*Tt+mt,ct.ld=40<=Tt?2:15<=Tt?1:0}else ct.tc=0;ct.La=qe}}}Ye=0}else Bn(xe,6,"Frame setup failed"),Ye=xe.a;if(Ye=Ye==0){if(Ye){xe.$c=0,0<xe.Aa||(xe.Ic=_n);t:{Ye=xe.Ic,tt=4*(mt=xe.za);var Xt=32*mt,zt=mt+1,hn=0<xe.L?mt*(0<xe.Aa?2:1):0,It=(xe.Aa==2?2:1)*mt;if((ct=tt+832+(qe=3*(16*Ye+$o[xe.L])/2*Xt)+(st=xe.Fa!=null&&0<xe.Fa.length?xe.Kc.c*xe.Kc.i:0))!=ct)Ye=0;else{if(ct>xe.Vb){if(xe.Vb=0,xe.Ec=f(ct),xe.Fc=0,xe.Ec==null){Ye=Bn(xe,1,"no memory during frame initialization.");break t}xe.Vb=ct}ct=xe.Ec,Tt=xe.Fc,xe.Ac=ct,xe.Bc=Tt,Tt+=tt,xe.Gd=v(Xt,Ks),xe.Hd=0,xe.rb=v(zt+1,ta),xe.sb=1,xe.wa=hn?v(hn,Hn):null,xe.Y=0,xe.D.Nb=0,xe.D.wa=xe.wa,xe.D.Y=xe.Y,0<xe.Aa&&(xe.D.Y+=mt),i(!0),xe.oc=ct,xe.pc=Tt,Tt+=832,xe.ya=v(It,Ls),xe.aa=0,xe.D.ya=xe.ya,xe.D.aa=xe.aa,xe.Aa==2&&(xe.D.aa+=mt),xe.R=16*mt,xe.B=8*mt,mt=(Xt=$o[xe.L])*xe.R,Xt=Xt/2*xe.B,xe.sa=ct,xe.ta=Tt+mt,xe.qa=xe.sa,xe.ra=xe.ta+16*Ye*xe.R+Xt,xe.Ha=xe.qa,xe.Ia=xe.ra+8*Ye*xe.B+Xt,xe.$c=0,Tt+=qe,xe.mb=st?ct:null,xe.nb=st?Tt:null,i(Tt+st<=xe.Fc+xe.Vb),xo(xe),u(xe.Ac,xe.Bc,0,tt),Ye=1}}if(Ye){if(Oe.ka=0,Oe.y=xe.sa,Oe.O=xe.ta,Oe.f=xe.qa,Oe.N=xe.ra,Oe.ea=xe.Ha,Oe.Vd=xe.Ia,Oe.fa=xe.R,Oe.Rc=xe.B,Oe.F=null,Oe.J=0,!Mc){for(Ye=-255;255>=Ye;++Ye)Mr[255+Ye]=0>Ye?-Ye:Ye;for(Ye=-1020;1020>=Ye;++Ye)va[1020+Ye]=-128>Ye?-128:127<Ye?127:Ye;for(Ye=-112;112>=Ye;++Ye)Rc[112+Ye]=-16>Ye?-16:15<Ye?15:Ye;for(Ye=-255;510>=Ye;++Ye)Hs[255+Ye]=0>Ye?0:255<Ye?255:Ye;Mc=1}ba=vo,ys=ha,ts=bo,Ui=Es,_i=Da,sa=Ml,dr=iu,eo=an,tl=W,Fs=me,to=us,la=w,nl=Ne,qs=Ue,il=Ma,xl=Ms,rl=Bl,Fa=yl,kr[0]=Ql,kr[1]=At,kr[2]=Qn,kr[3]=Cn,kr[4]=na,kr[5]=Tn,kr[6]=rn,kr[7]=ni,kr[8]=ii,kr[9]=Kt,Ca[0]=Ka,Ca[1]=so,Ca[2]=Zs,Ca[3]=Ea,Ca[4]=nr,Ca[5]=Wi,Ca[6]=cs,bs[0]=Ai,bs[1]=Vi,bs[2]=on,bs[3]=nu,bs[4]=Vn,bs[5]=Wt,bs[6]=Do,Ye=1}else Ye=0}Ye&&(Ye=(function(Gn,Qi){for(Gn.M=0;Gn.M<Gn.Va;++Gn.M){var Fn,Mt=Gn.Jc[Gn.M&Gn.Xb],Dt=Gn.m,br=Gn;for(Fn=0;Fn<br.za;++Fn){var gn=Dt,kn=br,ei=kn.Ac,rr=kn.Bc+4*Fn,vr=kn.zc,Yi=kn.ya[kn.aa+Fn];if(kn.Qa.Bb?Yi.$b=nt(gn,kn.Pa.jb[0])?2+nt(gn,kn.Pa.jb[2]):nt(gn,kn.Pa.jb[1]):Yi.$b=0,kn.kc&&(Yi.Ad=nt(gn,kn.Bd)),Yi.Za=!nt(gn,145)+0,Yi.Za){var Xr=Yi.Ob,cr=0;for(kn=0;4>kn;++kn){var Ar,oi=vr[0+kn];for(Ar=0;4>Ar;++Ar){oi=Bo[ei[rr+Ar]][oi];for(var Li=Ys[nt(gn,oi[0])];0<Li;)Li=Ys[2*Li+nt(gn,oi[Li])];oi=-Li,ei[rr+Ar]=oi}s(Xr,cr,ei,rr,4),cr+=4,vr[0+kn]=oi}}else oi=nt(gn,156)?nt(gn,128)?1:3:nt(gn,163)?2:0,Yi.Ob[0]=oi,u(ei,rr,oi,4),u(vr,0,oi,4);Yi.Dd=nt(gn,142)?nt(gn,114)?nt(gn,183)?1:3:2:0}if(br.m.Ka)return Bn(Gn,7,"Premature end-of-partition0 encountered.");for(;Gn.ja<Gn.za;++Gn.ja){if(br=Mt,gn=(Dt=Gn).rb[Dt.sb-1],ei=Dt.rb[Dt.sb+Dt.ja],Fn=Dt.ya[Dt.aa+Dt.ja],rr=Dt.kc?Fn.Ad:0)gn.la=ei.la=0,Fn.Za||(gn.Na=ei.Na=0),Fn.Hc=0,Fn.Gc=0,Fn.ia=0;else{var gr,Ri;if(gn=ei,ei=br,rr=Dt.Pa.Xc,vr=Dt.ya[Dt.aa+Dt.ja],Yi=Dt.pb[vr.$b],kn=vr.ad,Xr=0,cr=Dt.rb[Dt.sb-1],oi=Ar=0,u(kn,Xr,0,384),vr.Za)var io=0,Gi=rr[3];else{Li=f(16);var mi=gn.Na+cr.Na;if(mi=To(ei,rr[1],mi,Yi.Eb,0,Li,0),gn.Na=cr.Na=(0<mi)+0,1<mi)ba(Li,0,kn,Xr);else{var Nr=Li[0]+3>>3;for(Li=0;256>Li;Li+=16)kn[Xr+Li]=Nr}io=1,Gi=rr[0]}var qi=15&gn.la,ro=15&cr.la;for(Li=0;4>Li;++Li){var Ur=1&ro;for(Nr=Ri=0;4>Nr;++Nr)qi=qi>>1|(Ur=(mi=To(ei,Gi,mi=Ur+(1&qi),Yi.Sc,io,kn,Xr))>io)<<7,Ri=Ri<<2|(3<mi?3:1<mi?2:kn[Xr+0]!=0),Xr+=16;qi>>=4,ro=ro>>1|Ur<<7,Ar=(Ar<<8|Ri)>>>0}for(Gi=qi,io=ro>>4,gr=0;4>gr;gr+=2){for(Ri=0,qi=gn.la>>4+gr,ro=cr.la>>4+gr,Li=0;2>Li;++Li){for(Ur=1&ro,Nr=0;2>Nr;++Nr)mi=Ur+(1&qi),qi=qi>>1|(Ur=0<(mi=To(ei,rr[2],mi,Yi.Qc,0,kn,Xr)))<<3,Ri=Ri<<2|(3<mi?3:1<mi?2:kn[Xr+0]!=0),Xr+=16;qi>>=2,ro=ro>>1|Ur<<5}oi|=Ri<<4*gr,Gi|=qi<<4<<gr,io|=(240&ro)<<gr}gn.la=Gi,cr.la=io,vr.Hc=Ar,vr.Gc=oi,vr.ia=43690&oi?0:Yi.ia,rr=!(Ar|oi)}if(0<Dt.L&&(Dt.wa[Dt.Y+Dt.ja]=Dt.gd[Fn.$b][Fn.Za],Dt.wa[Dt.Y+Dt.ja].La|=!rr),br.Ka)return Bn(Gn,7,"Premature end-of-file encountered.")}if(xo(Gn),Dt=Qi,br=1,Fn=(Mt=Gn).D,gn=0<Mt.L&&Mt.M>=Mt.zb&&Mt.M<=Mt.Va,Mt.Aa==0)t:{if(Fn.M=Mt.M,Fn.uc=gn,ra(Mt,Fn),br=1,Fn=(Ri=Mt.D).Nb,gn=(oi=$o[Mt.L])*Mt.R,ei=oi/2*Mt.B,Li=16*Fn*Mt.R,Nr=8*Fn*Mt.B,rr=Mt.sa,vr=Mt.ta-gn+Li,Yi=Mt.qa,kn=Mt.ra-ei+Nr,Xr=Mt.Ha,cr=Mt.Ia-ei+Nr,ro=(qi=Ri.M)==0,Ar=qi>=Mt.Va-1,Mt.Aa==2&&ra(Mt,Ri),Ri.uc)for(Ur=(mi=Mt).D.M,i(mi.D.uc),Ri=mi.yb;Ri<mi.Hb;++Ri){io=Ri,Gi=Ur;var or=(xi=(Kr=mi).D).Nb;gr=Kr.R;var xi=xi.wa[xi.Y+io],po=Kr.sa,_r=Kr.ta+16*or*gr+16*io,yn=xi.dd,un=xi.tc;if(un!=0)if(i(3<=un),Kr.L==1)0<io&&xl(po,_r,gr,un+4),xi.La&&Fa(po,_r,gr,un),0<Gi&&il(po,_r,gr,un+4),xi.La&&rl(po,_r,gr,un);else{var Ci=Kr.B,ua=Kr.qa,Ga=Kr.ra+8*or*Ci+8*io,Io=Kr.Ha,Kr=Kr.Ia+8*or*Ci+8*io;or=xi.ld,0<io&&(eo(po,_r,gr,un+4,yn,or),Fs(ua,Ga,Io,Kr,Ci,un+4,yn,or)),xi.La&&(la(po,_r,gr,un,yn,or),qs(ua,Ga,Io,Kr,Ci,un,yn,or)),0<Gi&&(dr(po,_r,gr,un+4,yn,or),tl(ua,Ga,Io,Kr,Ci,un+4,yn,or)),xi.La&&(to(po,_r,gr,un,yn,or),nl(ua,Ga,Io,Kr,Ci,un,yn,or))}}if(Mt.ia&&alert("todo:DitherRow"),Dt.put!=null){if(Ri=16*qi,qi=16*(qi+1),ro?(Dt.y=Mt.sa,Dt.O=Mt.ta+Li,Dt.f=Mt.qa,Dt.N=Mt.ra+Nr,Dt.ea=Mt.Ha,Dt.W=Mt.Ia+Nr):(Ri-=oi,Dt.y=rr,Dt.O=vr,Dt.f=Yi,Dt.N=kn,Dt.ea=Xr,Dt.W=cr),Ar||(qi-=oi),qi>Dt.o&&(qi=Dt.o),Dt.F=null,Dt.J=null,Mt.Fa!=null&&0<Mt.Fa.length&&Ri<qi&&(Dt.J=Ii(Mt,Dt,Ri,qi-Ri),Dt.F=Mt.mb,Dt.F==null&&Dt.F.length==0)){br=Bn(Mt,3,"Could not decode alpha data.");break t}Ri<Dt.j&&(oi=Dt.j-Ri,Ri=Dt.j,i(!(1&oi)),Dt.O+=Mt.R*oi,Dt.N+=Mt.B*(oi>>1),Dt.W+=Mt.B*(oi>>1),Dt.F!=null&&(Dt.J+=Dt.width*oi)),Ri<qi&&(Dt.O+=Dt.v,Dt.N+=Dt.v>>1,Dt.W+=Dt.v>>1,Dt.F!=null&&(Dt.J+=Dt.v),Dt.ka=Ri-Dt.j,Dt.U=Dt.va-Dt.v,Dt.T=qi-Ri,br=Dt.put(Dt))}Fn+1!=Mt.Ic||Ar||(s(Mt.sa,Mt.ta-gn,rr,vr+16*Mt.R,gn),s(Mt.qa,Mt.ra-ei,Yi,kn+8*Mt.B,ei),s(Mt.Ha,Mt.Ia-ei,Xr,cr+8*Mt.B,ei))}if(!br)return Bn(Gn,6,"Output aborted.")}return 1})(xe,Oe)),Oe.bc!=null&&Oe.bc(Oe),Ye&=1}return Ye?(xe.cb=0,Ye):0})(d,L)||(g=d.a)}}else g=d.a}g==0&&ee.Oa!=null&&ee.Oa.fd&&(g=Is(ee.ba))}ee=g}Q=ee!=0?null:11>Q?le.f.RGBA.eb:le.f.kb.y}else Q=null;return Q};var Rn=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function x(V,$){for(var k="",S=0;S<4;S++)k+=String.fromCharCode(V[$++]);return k}function T(V,$){return V[$+0]|V[$+1]<<8}function D(V,$){return(V[$+0]|V[$+1]<<8|V[$+2]<<16)>>>0}function R(V,$){return(V[$+0]|V[$+1]<<8|V[$+2]<<16|V[$+3]<<24)>>>0}new b;var C=[0],Z=[0],O=[],P=new b,H=n,ae=(function(V,$){var k={},S=0,J=!1,re=0,ye=0;if(k.frames=[],!(function(A,M){for(var B=0;B<4;B++)if(A[M+B]!="RIFF".charCodeAt(B))return!0;return!1})(V,$)){for(R(V,$+=4),$+=8;$<V.length;){var K=x(V,$),te=R(V,$+=4);$+=4;var ge=te+(1&te);switch(K){case"VP8 ":case"VP8L":k.frames[S]===void 0&&(k.frames[S]={}),(F=k.frames[S]).src_off=J?ye:$-8,F.src_size=re+te+8,S++,J&&(J=!1,re=0,ye=0);break;case"VP8X":(F=k.header={}).feature_flags=V[$];var je=$+4;F.canvas_width=1+D(V,je),je+=3,F.canvas_height=1+D(V,je),je+=3;break;case"ALPH":J=!0,re=ge+8,ye=$-8;break;case"ANIM":(F=k.header).bgcolor=R(V,$),je=$+4,F.loop_count=T(V,je),je+=2;break;case"ANMF":var be,F;(F=k.frames[S]={}).offset_x=2*D(V,$),$+=3,F.offset_y=2*D(V,$),$+=3,F.width=1+D(V,$),$+=3,F.height=1+D(V,$),$+=3,F.duration=D(V,$),$+=3,be=V[$++],F.dispose=1&be,F.blend=be>>1&1}K!="ANMF"&&($+=ge)}return k}})(H,0);ae.response=H,ae.rgbaoutput=!0,ae.dataurl=!1;var ce=ae.header?ae.header:null,q=ae.frames?ae.frames:null;if(ce){ce.loop_counter=ce.loop_count,C=[ce.canvas_height],Z=[ce.canvas_width];for(var se=0;se<q.length&&q[se].blend!=0;se++);}var X=q[0],_=P.WebPDecodeRGBA(H,X.src_off,X.src_size,Z,C);X.rgba=_,X.imgwidth=Z[0],X.imgheight=C[0];for(var E=0;E<Z[0]*C[0]*4;E++)O[E]=_[E];return this.width=Z,this.height=C,this.data=O,this}(function(n){var i,o,s,u,f,v,h,b,x,T=function(A){return A=A||{},this.isStrokeTransparent=A.isStrokeTransparent||!1,this.strokeOpacity=A.strokeOpacity||1,this.strokeStyle=A.strokeStyle||"#000000",this.fillStyle=A.fillStyle||"#000000",this.isFillTransparent=A.isFillTransparent||!1,this.fillOpacity=A.fillOpacity||1,this.font=A.font||"10px sans-serif",this.textBaseline=A.textBaseline||"alphabetic",this.textAlign=A.textAlign||"left",this.lineWidth=A.lineWidth||1,this.lineJoin=A.lineJoin||"miter",this.lineCap=A.lineCap||"butt",this.path=A.path||[],this.transform=A.transform!==void 0?A.transform.clone():new b,this.globalCompositeOperation=A.globalCompositeOperation||"normal",this.globalAlpha=A.globalAlpha||1,this.clip_path=A.clip_path||[],this.currentPoint=A.currentPoint||new v,this.miterLimit=A.miterLimit||10,this.lastPoint=A.lastPoint||new v,this.lineDashOffset=A.lineDashOffset||0,this.lineDash=A.lineDash||[],this.margin=A.margin||[0,0,0,0],this.prevPageLastElemOffset=A.prevPageLastElemOffset||0,this.ignoreClearRect=typeof A.ignoreClearRect!="boolean"||A.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new D(this),i=this.internal.f2,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,u=this.internal.getHorizontalCoordinate,f=this.internal.getVerticalCoordinate,v=this.internal.Point,h=this.internal.Rectangle,b=this.internal.Matrix,x=new T}]);var D=function(A){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var M=A;Object.defineProperty(this,"pdf",{get:function(){return M}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(pe){B=!!pe}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(pe){de=!!pe}});var Ae=0;Object.defineProperty(this,"posX",{get:function(){return Ae},set:function(pe){isNaN(pe)||(Ae=pe)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(pe){isNaN(pe)||(Ee=pe)}}),Object.defineProperty(this,"margin",{get:function(){return x.margin},set:function(pe){var _t;typeof pe=="number"?_t=[pe,pe,pe,pe]:((_t=new Array(4))[0]=pe[0],_t[1]=pe.length>=2?pe[1]:_t[0],_t[2]=pe.length>=3?pe[2]:_t[0],_t[3]=pe.length>=4?pe[3]:_t[1]),x.margin=_t}});var Ge=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ge},set:function(pe){Ge=pe}});var Pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Pe},set:function(pe){Pe=pe}});var nt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return nt},set:function(pe){nt=pe}}),Object.defineProperty(this,"ctx",{get:function(){return x},set:function(pe){pe instanceof T&&(x=pe)}}),Object.defineProperty(this,"path",{get:function(){return x.path},set:function(pe){x.path=pe}});var Ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ke},set:function(pe){Ke=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var _t;_t=R(pe),this.ctx.fillStyle=_t.style,this.ctx.isFillTransparent=_t.a===0,this.ctx.fillOpacity=_t.a,this.pdf.setFillColor(_t.r,_t.g,_t.b,{a:_t.a}),this.pdf.setTextColor(_t.r,_t.g,_t.b,{a:_t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var _t=R(pe);this.ctx.strokeStyle=_t.style,this.ctx.isStrokeTransparent=_t.a===0,this.ctx.strokeOpacity=_t.a,_t.a===0?this.pdf.setDrawColor(255,255,255):(_t.a,this.pdf.setDrawColor(_t.r,_t.g,_t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var wt=null,St=null,Bt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Bt},set:function(pe){wt=null,St=null,Bt=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var _t;if(this.ctx.font=pe,(_t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(pe))!==null){var pn=_t[1];_t[2];var Zt=_t[3],dt=_t[4];_t[5];var Qt=_t[6],Et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(dt)[2];dt=Math.floor(Et==="px"?parseFloat(dt)*this.pdf.internal.scaleFactor:Et==="em"?parseFloat(dt)*this.pdf.getFontSize():parseFloat(dt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(dt);var vn=(function(Gt){var Dn,Nn,en=[],wn=Gt.trim();if(wn==="")return p0;if(wn in sy)return[sy[wn]];for(;wn!=="";){switch(Nn=null,Dn=(wn=cy(wn)).charAt(0)){case'"':case"'":Nn=q5(wn.substring(1),Dn);break;default:Nn=H5(wn)}if(Nn===null||(en.push(Nn[0]),(wn=cy(Nn[1]))!==""&&wn.charAt(0)!==","))return p0;wn=wn.replace(/^,/,"")}return en})(Qt);if(this.fontFaces){var Jt=(function(Gt,Dn){var Nn=Gt.getFontList(),en=JSON.stringify(Nn);if(wt===null||St!==en){var wn=(function(at){var $t=[];return Object.keys(at).forEach(function(Ft){at[Ft].forEach(function(qt){var Sn=null;switch(qt){case"bold":Sn={family:Ft,weight:"bold"};break;case"italic":Sn={family:Ft,style:"italic"};break;case"bolditalic":Sn={family:Ft,weight:"bold",style:"italic"};break;case"":case"normal":Sn={family:Ft}}Sn!==null&&(Sn.ref={name:Ft,style:qt},$t.push(Sn))})}),$t})(Nn);wt=(function(at){for(var $t={},Ft=0;Ft<at.length;++Ft){var qt=d0(at[Ft]),Sn=qt.family,Oi=qt.stretch,In=qt.style,cn=qt.weight;$t[Sn]=$t[Sn]||{},$t[Sn][Oi]=$t[Sn][Oi]||{},$t[Sn][Oi][In]=$t[Sn][Oi][In]||{},$t[Sn][Oi][In][cn]=qt}return $t})(wn.concat(Dn)),St=en}return wt})(this.pdf,this.fontFaces),Wn=vn.map(function(Gt){return{family:Gt,stretch:"normal",weight:Zt,style:pn}}),kt=(function(Gt,Dn,Nn){for(var en=(Nn=Nn||{}).defaultFontFamily||"times",wn=Object.assign({},F5,Nn.genericFontFamilies||{}),at=null,$t=null,Ft=0;Ft<Dn.length;++Ft)if(wn[(at=d0(Dn[Ft])).family]&&(at.family=wn[at.family]),Gt.hasOwnProperty(at.family)){$t=Gt[at.family];break}if(!($t=$t||Gt[en]))throw new Error("Could not find a font-family for the rule '"+ly(at)+"' and default family '"+en+"'.");if($t=(function(qt,Sn){if(Sn[qt])return Sn[qt];var Oi=L0[qt],In=Oi<=L0.normal?-1:1,cn=ay(Sn,S2,Oi,In);if(!cn)throw new Error("Could not find a matching font-stretch value for "+qt);return cn})(at.stretch,$t),$t=(function(qt,Sn){if(Sn[qt])return Sn[qt];for(var Oi=w2[qt],In=0;In<Oi.length;++In)if(Sn[Oi[In]])return Sn[Oi[In]];throw new Error("Could not find a matching font-style for "+qt)})(at.style,$t),!($t=(function(qt,Sn){if(Sn[qt])return Sn[qt];if(qt===400&&Sn[500])return Sn[500];if(qt===500&&Sn[400])return Sn[400];var Oi=U5[qt],In=ay(Sn,C2,Oi,qt<400?-1:1);if(!In)throw new Error("Could not find a matching font-weight for value "+qt);return In})(at.weight,$t)))throw new Error("Failed to resolve a font for the rule '"+ly(at)+"'.");return $t})(Jt,Wn);this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var Pt="";(Zt==="bold"||parseInt(Zt,10)>=700||pn==="bold")&&(Pt="bold"),pn==="italic"&&(Pt+="italic"),Pt.length===0&&(Pt="normal");for(var fi="",ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ct=0;Ct<vn.length;Ct++){if(this.pdf.internal.getFont(vn[Ct],Pt,{noFallback:!0,disableWarning:!0})!==void 0){fi=vn[Ct];break}if(Pt==="bolditalic"&&this.pdf.internal.getFont(vn[Ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)fi=vn[Ct],Pt="bold";else if(this.pdf.internal.getFont(vn[Ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){fi=vn[Ct],Pt="normal";break}}if(fi===""){for(var Mn=0;Mn<vn.length;Mn++)if(ut[vn[Mn]]){fi=ut[vn[Mn]];break}}fi=fi===""?"Times":fi,this.pdf.setFont(fi,Pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};D.prototype.setLineDash=function(A){this.lineDash=A},D.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},D.prototype.fill=function(){q.call(this,"fill",!1)},D.prototype.stroke=function(){q.call(this,"stroke",!1)},D.prototype.beginPath=function(){this.path=[{type:"begin"}]},D.prototype.moveTo=function(A,M){if(isNaN(A)||isNaN(M))throw Vr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new v(A,M));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new v(A,M)},D.prototype.closePath=function(){var A=new v(0,0),M=0;for(M=this.path.length-1;M!==-1;M--)if(this.path[M].type==="begin"&&Tr(this.path[M+1])==="object"&&typeof this.path[M+1].x=="number"){A=new v(this.path[M+1].x,this.path[M+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new v(A.x,A.y)},D.prototype.lineTo=function(A,M){if(isNaN(A)||isNaN(M))throw Vr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new v(A,M));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new v(B.x,B.y)},D.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),q.call(this,null,!0)},D.prototype.quadraticCurveTo=function(A,M,B,de){if(isNaN(B)||isNaN(de)||isNaN(A)||isNaN(M))throw Vr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ae=this.ctx.transform.applyToPoint(new v(B,de)),Ee=this.ctx.transform.applyToPoint(new v(A,M));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new v(Ae.x,Ae.y)},D.prototype.bezierCurveTo=function(A,M,B,de,Ae,Ee){if(isNaN(Ae)||isNaN(Ee)||isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Vr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ge=this.ctx.transform.applyToPoint(new v(Ae,Ee)),Pe=this.ctx.transform.applyToPoint(new v(A,M)),nt=this.ctx.transform.applyToPoint(new v(B,de));this.path.push({type:"bct",x1:Pe.x,y1:Pe.y,x2:nt.x,y2:nt.y,x:Ge.x,y:Ge.y}),this.ctx.lastPoint=new v(Ge.x,Ge.y)},D.prototype.arc=function(A,M,B,de,Ae,Ee){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de)||isNaN(Ae))throw Vr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var Ge=this.ctx.transform.applyToPoint(new v(A,M));A=Ge.x,M=Ge.y;var Pe=this.ctx.transform.applyToPoint(new v(0,B)),nt=this.ctx.transform.applyToPoint(new v(0,0));B=Math.sqrt(Math.pow(Pe.x-nt.x,2)+Math.pow(Pe.y-nt.y,2))}Math.abs(Ae-de)>=2*Math.PI&&(de=0,Ae=2*Math.PI),this.path.push({type:"arc",x:A,y:M,radius:B,startAngle:de,endAngle:Ae,counterclockwise:Ee})},D.prototype.arcTo=function(A,M,B,de,Ae){throw new Error("arcTo not implemented.")},D.prototype.rect=function(A,M,B,de){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Vr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(A,M),this.lineTo(A+B,M),this.lineTo(A+B,M+de),this.lineTo(A,M+de),this.lineTo(A,M),this.lineTo(A+B,M),this.lineTo(A,M)},D.prototype.fillRect=function(A,M,B,de){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Vr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var Ae={};this.lineCap!=="butt"&&(Ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(A,M,B,de),this.fill(),Ae.hasOwnProperty("lineCap")&&(this.lineCap=Ae.lineCap),Ae.hasOwnProperty("lineJoin")&&(this.lineJoin=Ae.lineJoin)}},D.prototype.strokeRect=function(A,M,B,de){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Vr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Z.call(this)||(this.beginPath(),this.rect(A,M,B,de),this.stroke())},D.prototype.clearRect=function(A,M,B,de){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de))throw Vr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(A,M,B,de))},D.prototype.save=function(A){A=typeof A!="boolean"||A;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(M),A){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new T(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},D.prototype.restore=function(A){A=typeof A!="boolean"||A;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(M),A&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},D.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var R=function(A){var M,B,de,Ae;if(A.isCanvasGradient===!0&&(A=A.getColor()),!A)return{r:0,g:0,b:0,a:0,style:A};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(A))M=0,B=0,de=0,Ae=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(A);if(Ee!==null)M=parseInt(Ee[1]),B=parseInt(Ee[2]),de=parseInt(Ee[3]),Ae=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(A))!==null)M=parseInt(Ee[1]),B=parseInt(Ee[2]),de=parseInt(Ee[3]),Ae=parseFloat(Ee[4]);else{if(Ae=1,typeof A=="string"&&A.charAt(0)!=="#"){var Ge=new h2(A);A=Ge.ok?Ge.toHex():"#000000"}A.length===4?(M=A.substring(1,2),M+=M,B=A.substring(2,3),B+=B,de=A.substring(3,4),de+=de):(M=A.substring(1,3),B=A.substring(3,5),de=A.substring(5,7)),M=parseInt(M,16),B=parseInt(B,16),de=parseInt(de,16)}}return{r:M,g:B,b:de,a:Ae,style:A}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Z=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};D.prototype.fillText=function(A,M,B,de){if(isNaN(M)||isNaN(B)||typeof A!="string")throw Vr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!C.call(this)){var Ae=ge(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;S.call(this,{text:A,x:M,y:B,scale:Ee,angle:Ae,align:this.textAlign,maxWidth:de})}},D.prototype.strokeText=function(A,M,B,de){if(isNaN(M)||isNaN(B)||typeof A!="string")throw Vr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Z.call(this)){de=isNaN(de)?void 0:de;var Ae=ge(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;S.call(this,{text:A,x:M,y:B,scale:Ee,renderingMode:"stroke",angle:Ae,align:this.textAlign,maxWidth:de})}},D.prototype.measureText=function(A){if(typeof A!="string")throw Vr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var M=this.pdf,B=this.pdf.internal.scaleFactor,de=M.internal.getFontSize(),Ae=M.getStringUnitWidth(A)*de/M.internal.scaleFactor;return new function(Ee){var Ge=(Ee=Ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ge}}),this}({width:Ae*=Math.round(96*B/72*1e4)/1e4})},D.prototype.scale=function(A,M){if(isNaN(A)||isNaN(M))throw Vr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new b(A,0,0,M,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},D.prototype.rotate=function(A){if(isNaN(A))throw Vr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var M=new b(Math.cos(A),Math.sin(A),-Math.sin(A),Math.cos(A),0,0);this.ctx.transform=this.ctx.transform.multiply(M)},D.prototype.translate=function(A,M){if(isNaN(A)||isNaN(M))throw Vr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new b(1,0,0,1,A,M);this.ctx.transform=this.ctx.transform.multiply(B)},D.prototype.transform=function(A,M,B,de,Ae,Ee){if(isNaN(A)||isNaN(M)||isNaN(B)||isNaN(de)||isNaN(Ae)||isNaN(Ee))throw Vr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ge=new b(A,M,B,de,Ae,Ee);this.ctx.transform=this.ctx.transform.multiply(Ge)},D.prototype.setTransform=function(A,M,B,de,Ae,Ee){A=isNaN(A)?1:A,M=isNaN(M)?0:M,B=isNaN(B)?0:B,de=isNaN(de)?1:de,Ae=isNaN(Ae)?0:Ae,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new b(A,M,B,de,Ae,Ee)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};D.prototype.drawImage=function(A,M,B,de,Ae,Ee,Ge,Pe,nt){var Ke=this.pdf.getImageProperties(A),wt=1,St=1,Bt=1,pe=1;de!==void 0&&Pe!==void 0&&(Bt=Pe/de,pe=nt/Ae,wt=Ke.width/de*Pe/de,St=Ke.height/Ae*nt/Ae),Ee===void 0&&(Ee=M,Ge=B,M=0,B=0),de!==void 0&&Pe===void 0&&(Pe=de,nt=Ae),de===void 0&&Pe===void 0&&(Pe=Ke.width,nt=Ke.height);var _t=this.ctx.transform.decompose(),pn=ge(_t.rotate.shx),Zt=new b,dt=(Zt=(Zt=(Zt=Zt.multiply(_t.translate)).multiply(_t.skew)).multiply(_t.scale)).applyToRectangle(new h(Ee-M*Bt,Ge-B*pe,de*wt,Ae*St));if(this.autoPaging){for(var Qt,Et=P.call(this,dt),vn=[],Jt=0;Jt<Et.length;Jt+=1)vn.indexOf(Et[Jt])===-1&&vn.push(Et[Jt]);ce(vn);for(var Wn=vn[0],kt=vn[vn.length-1],Pt=Wn;Pt<kt+1;Pt++){this.pdf.setPage(Pt);var fi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ut=Pt===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=Pt===1?0:Ct+(Pt-2)*Mn;if(this.ctx.clip_path.length!==0){var Dn=this.path;Qt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ae(Qt,this.posX+this.margin[3],-Gt+ut+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=Dn}var Nn=JSON.parse(JSON.stringify(dt));Nn=ae([Nn],this.posX+this.margin[3],-Gt+ut+this.ctx.prevPageLastElemOffset)[0];var en=(Pt>Wn||Pt<kt)&&O.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fi,Mn,null).clip().discardPath()),this.pdf.addImage(A,"JPEG",Nn.x,Nn.y,Nn.w,Nn.h,null,null,pn),en&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(A,"JPEG",dt.x,dt.y,dt.w,dt.h,null,null,pn)};var P=function(A,M,B){var de=[];M=M||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ae=this.posY+this.ctx.prevPageLastElemOffset;switch(A.type){default:case"mt":case"lt":de.push(Math.floor((A.y+Ae)/B)+1);break;case"arc":de.push(Math.floor((A.y+Ae-A.radius)/B)+1),de.push(Math.floor((A.y+Ae+A.radius)/B)+1);break;case"qct":var Ee=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x,A.y);de.push(Math.floor((Ee.y+Ae)/B)+1),de.push(Math.floor((Ee.y+Ee.h+Ae)/B)+1);break;case"bct":var Ge=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,A.x1,A.y1,A.x2,A.y2,A.x,A.y);de.push(Math.floor((Ge.y+Ae)/B)+1),de.push(Math.floor((Ge.y+Ge.h+Ae)/B)+1);break;case"rect":de.push(Math.floor((A.y+Ae)/B)+1),de.push(Math.floor((A.y+A.h+Ae)/B)+1)}for(var Pe=0;Pe<de.length;Pe+=1)for(;this.pdf.internal.getNumberOfPages()<de[Pe];)H.call(this);return de},H=function(){var A=this.fillStyle,M=this.strokeStyle,B=this.font,de=this.lineCap,Ae=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=A,this.strokeStyle=M,this.font=B,this.lineCap=de,this.lineWidth=Ae,this.lineJoin=Ee},ae=function(A,M,B){for(var de=0;de<A.length;de++)switch(A[de].type){case"bct":A[de].x2+=M,A[de].y2+=B;case"qct":A[de].x1+=M,A[de].y1+=B;default:A[de].x+=M,A[de].y+=B}return A},ce=function(A){return A.sort(function(M,B){return M-B})},q=function(A,M){var B=this.fillStyle,de=this.strokeStyle,Ae=this.lineCap,Ee=this.lineWidth,Ge=Math.abs(Ee*this.ctx.transform.scaleX),Pe=this.lineJoin;if(this.autoPaging){for(var nt,Ke,wt=JSON.parse(JSON.stringify(this.path)),St=JSON.parse(JSON.stringify(this.path)),Bt=[],pe=0;pe<St.length;pe++)if(St[pe].x!==void 0)for(var _t=P.call(this,St[pe]),pn=0;pn<_t.length;pn+=1)Bt.indexOf(_t[pn])===-1&&Bt.push(_t[pn]);for(var Zt=0;Zt<Bt.length;Zt++)for(;this.pdf.internal.getNumberOfPages()<Bt[Zt];)H.call(this);ce(Bt);for(var dt=Bt[0],Qt=Bt[Bt.length-1],Et=dt;Et<Qt+1;Et++){this.pdf.setPage(Et),this.fillStyle=B,this.strokeStyle=de,this.lineCap=Ae,this.lineWidth=Ge,this.lineJoin=Pe;var vn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Jt=Et===1?this.posY+this.margin[0]:this.margin[0],Wn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=Et===1?0:Wn+(Et-2)*kt;if(this.ctx.clip_path.length!==0){var fi=this.path;nt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ae(nt,this.posX+this.margin[3],-Pt+Jt+this.ctx.prevPageLastElemOffset),se.call(this,A,!0),this.path=fi}if(Ke=JSON.parse(JSON.stringify(wt)),this.path=ae(Ke,this.posX+this.margin[3],-Pt+Jt+this.ctx.prevPageLastElemOffset),M===!1||Et===0){var ut=(Et>dt||Et<Qt)&&O.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vn,kt,null).clip().discardPath()),se.call(this,A,M),ut&&this.pdf.restoreGraphicsState()}this.lineWidth=Ee}this.path=wt}else this.lineWidth=Ge,se.call(this,A,M),this.lineWidth=Ee},se=function(A,M){if((A!=="stroke"||M||!Z.call(this))&&(A==="stroke"||M||!C.call(this))){for(var B,de,Ae=[],Ee=this.path,Ge=0;Ge<Ee.length;Ge++){var Pe=Ee[Ge];switch(Pe.type){case"begin":Ae.push({begin:!0});break;case"close":Ae.push({close:!0});break;case"mt":Ae.push({start:Pe,deltas:[],abs:[]});break;case"lt":var nt=Ae.length;if(Ee[Ge-1]&&!isNaN(Ee[Ge-1].x)&&(B=[Pe.x-Ee[Ge-1].x,Pe.y-Ee[Ge-1].y],nt>0)){for(;nt>=0;nt--)if(Ae[nt-1].close!==!0&&Ae[nt-1].begin!==!0){Ae[nt-1].deltas.push(B),Ae[nt-1].abs.push(Pe);break}}break;case"bct":B=[Pe.x1-Ee[Ge-1].x,Pe.y1-Ee[Ge-1].y,Pe.x2-Ee[Ge-1].x,Pe.y2-Ee[Ge-1].y,Pe.x-Ee[Ge-1].x,Pe.y-Ee[Ge-1].y],Ae[Ae.length-1].deltas.push(B);break;case"qct":var Ke=Ee[Ge-1].x+2/3*(Pe.x1-Ee[Ge-1].x),wt=Ee[Ge-1].y+2/3*(Pe.y1-Ee[Ge-1].y),St=Pe.x+2/3*(Pe.x1-Pe.x),Bt=Pe.y+2/3*(Pe.y1-Pe.y),pe=Pe.x,_t=Pe.y;B=[Ke-Ee[Ge-1].x,wt-Ee[Ge-1].y,St-Ee[Ge-1].x,Bt-Ee[Ge-1].y,pe-Ee[Ge-1].x,_t-Ee[Ge-1].y],Ae[Ae.length-1].deltas.push(B);break;case"arc":Ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ae[Ae.length-1].abs)&&Ae[Ae.length-1].abs.push(Pe)}}de=M?null:A==="stroke"?"stroke":"fill";for(var pn=!1,Zt=0;Zt<Ae.length;Zt++)if(Ae[Zt].arc)for(var dt=Ae[Zt].abs,Qt=0;Qt<dt.length;Qt++){var Et=dt[Qt];Et.type==="arc"?E.call(this,Et.x,Et.y,Et.radius,Et.startAngle,Et.endAngle,Et.counterclockwise,void 0,M,!pn):J.call(this,Et.x,Et.y),pn=!0}else if(Ae[Zt].close===!0)this.pdf.internal.out("h"),pn=!1;else if(Ae[Zt].begin!==!0){var vn=Ae[Zt].start.x,Jt=Ae[Zt].start.y;re.call(this,Ae[Zt].deltas,vn,Jt),pn=!0}de&&V.call(this,de),M&&$.call(this)}},X=function(A){var M=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=M*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return A-B;case"top":return A+M-B;case"hanging":return A+M-2*B;case"middle":return A+M/2-B;default:return A}},_=function(A){return A+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};D.prototype.createLinearGradient=function(){var A=function(){};return A.colorStops=[],A.addColorStop=function(M,B){this.colorStops.push([M,B])},A.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},A.isCanvasGradient=!0,A},D.prototype.createPattern=function(){return this.createLinearGradient()},D.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(A,M,B,de,Ae,Ee,Ge,Pe,nt){for(var Ke=K.call(this,B,de,Ae,Ee),wt=0;wt<Ke.length;wt++){var St=Ke[wt];wt===0&&(nt?k.call(this,St.x1+A,St.y1+M):J.call(this,St.x1+A,St.y1+M)),ye.call(this,A,M,St.x2,St.y2,St.x3,St.y3,St.x4,St.y4)}Pe?$.call(this):V.call(this,Ge)},V=function(A){switch(A){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(A,M){this.pdf.internal.out(o(A)+" "+s(M)+" m")},S=function(A){var M;switch(A.align){case"right":case"end":M="right";break;case"center":M="center";break;default:M="left"}var B,de,Ae,Ee=this.pdf.getTextDimensions(A.text),Ge=X.call(this,A.y),Pe=_.call(this,Ge)-Ee.h,nt=this.ctx.transform.applyToPoint(new v(A.x,Ge));if(this.autoPaging){var Ke=this.ctx.transform.decompose(),wt=new b;wt=(wt=(wt=wt.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale);for(var St=this.ctx.transform.applyToRectangle(new h(A.x,Ge,Ee.w,Ee.h)),Bt=wt.applyToRectangle(new h(A.x,Pe,Ee.w,Ee.h)),pe=P.call(this,Bt),_t=[],pn=0;pn<pe.length;pn+=1)_t.indexOf(pe[pn])===-1&&_t.push(pe[pn]);ce(_t);for(var Zt=_t[0],dt=_t[_t.length-1],Qt=Zt;Qt<dt+1;Qt++){this.pdf.setPage(Qt);var Et=Qt===1?this.posY+this.margin[0]:this.margin[0],vn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jt=this.pdf.internal.pageSize.height-this.margin[2],Wn=Jt-this.margin[0],kt=this.pdf.internal.pageSize.width-this.margin[1],Pt=kt-this.margin[3],fi=Qt===1?0:vn+(Qt-2)*Wn;if(this.ctx.clip_path.length!==0){var ut=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ae(B,this.posX+this.margin[3],-1*fi+Et),se.call(this,"fill",!0),this.path=ut}var Ct=ae([JSON.parse(JSON.stringify(Bt))],this.posX+this.margin[3],-fi+Et+this.ctx.prevPageLastElemOffset)[0];A.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*A.scale),Ae=this.lineWidth,this.lineWidth=Ae*A.scale);var Mn=this.autoPaging!=="text";if(Mn||Ct.y+Ct.h<=Jt){if(Mn||Ct.y>=Et&&Ct.x<=kt){var Gt=Mn?A.text:this.pdf.splitTextToSize(A.text,A.maxWidth||kt-Ct.x)[0],Dn=ae([JSON.parse(JSON.stringify(St))],this.posX+this.margin[3],-fi+Et+this.ctx.prevPageLastElemOffset)[0],Nn=Mn&&(Qt>Zt||Qt<dt)&&O.call(this);Nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,Wn,null).clip().discardPath()),this.pdf.text(Gt,Dn.x,Dn.y,{angle:A.angle,align:M,renderingMode:A.renderingMode}),Nn&&this.pdf.restoreGraphicsState()}}else Ct.y<Jt&&(this.ctx.prevPageLastElemOffset+=Jt-Ct.y);A.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=Ae)}}else A.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*A.scale),Ae=this.lineWidth,this.lineWidth=Ae*A.scale),this.pdf.text(A.text,nt.x+this.posX,nt.y+this.posY,{angle:A.angle,align:M,renderingMode:A.renderingMode,maxWidth:A.maxWidth}),A.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=Ae)},J=function(A,M,B,de){B=B||0,de=de||0,this.pdf.internal.out(o(A+B)+" "+s(M+de)+" l")},re=function(A,M,B){return this.pdf.lines(A,M,B,null,null)},ye=function(A,M,B,de,Ae,Ee,Ge,Pe){this.pdf.internal.out([i(u(B+A)),i(f(de+M)),i(u(Ae+A)),i(f(Ee+M)),i(u(Ge+A)),i(f(Pe+M)),"c"].join(" "))},K=function(A,M,B,de){for(var Ae=2*Math.PI,Ee=Math.PI/2;M>B;)M-=Ae;var Ge=Math.abs(B-M);Ge<Ae&&de&&(Ge=Ae-Ge);for(var Pe=[],nt=de?-1:1,Ke=M;Ge>1e-5;){var wt=Ke+nt*Math.min(Ge,Ee);Pe.push(te.call(this,A,Ke,wt)),Ge-=Math.abs(wt-Ke),Ke=wt}return Pe},te=function(A,M,B){var de=(B-M)/2,Ae=A*Math.cos(de),Ee=A*Math.sin(de),Ge=Ae,Pe=-Ee,nt=Ge*Ge+Pe*Pe,Ke=nt+Ge*Ae+Pe*Ee,wt=4/3*(Math.sqrt(2*nt*Ke)-Ke)/(Ge*Ee-Pe*Ae),St=Ge-wt*Pe,Bt=Pe+wt*Ge,pe=St,_t=-Bt,pn=de+M,Zt=Math.cos(pn),dt=Math.sin(pn);return{x1:A*Math.cos(M),y1:A*Math.sin(M),x2:St*Zt-Bt*dt,y2:St*dt+Bt*Zt,x3:pe*Zt-_t*dt,y3:pe*dt+_t*Zt,x4:A*Math.cos(B),y4:A*Math.sin(B)}},ge=function(A){return 180*A/Math.PI},je=function(A,M,B,de,Ae,Ee){var Ge=A+.5*(B-A),Pe=M+.5*(de-M),nt=Ae+.5*(B-Ae),Ke=Ee+.5*(de-Ee),wt=Math.min(A,Ae,Ge,nt),St=Math.max(A,Ae,Ge,nt),Bt=Math.min(M,Ee,Pe,Ke),pe=Math.max(M,Ee,Pe,Ke);return new h(wt,Bt,St-wt,pe-Bt)},be=function(A,M,B,de,Ae,Ee,Ge,Pe){var nt,Ke,wt,St,Bt,pe,_t,pn,Zt,dt,Qt,Et,vn,Jt,Wn=B-A,kt=de-M,Pt=Ae-B,fi=Ee-de,ut=Ge-Ae,Ct=Pe-Ee;for(Ke=0;Ke<41;Ke++)Zt=(_t=(wt=A+(nt=Ke/40)*Wn)+nt*((Bt=B+nt*Pt)-wt))+nt*(Bt+nt*(Ae+nt*ut-Bt)-_t),dt=(pn=(St=M+nt*kt)+nt*((pe=de+nt*fi)-St))+nt*(pe+nt*(Ee+nt*Ct-pe)-pn),Ke==0?(Qt=Zt,Et=dt,vn=Zt,Jt=dt):(Qt=Math.min(Qt,Zt),Et=Math.min(Et,dt),vn=Math.max(vn,Zt),Jt=Math.max(Jt,dt));return new h(Math.round(Qt),Math.round(Et),Math.round(vn-Qt),Math.round(Jt-Et))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var A,M,B=(A=this.ctx.lineDash,M=this.ctx.lineDashOffset,JSON.stringify({lineDash:A,lineDashOffset:M}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(jn.API),(function(n){var i=function(v){var h,b,x,T,D,R,C,Z,O,P;for(b=[],x=0,T=(v+=h="\0\0\0\0".slice(v.length%4||4)).length;T>x;x+=4)(D=(v.charCodeAt(x)<<24)+(v.charCodeAt(x+1)<<16)+(v.charCodeAt(x+2)<<8)+v.charCodeAt(x+3))!==0?(R=(D=((D=((D=((D=(D-(P=D%85))/85)-(O=D%85))/85)-(Z=D%85))/85)-(C=D%85))/85)%85,b.push(R+33,C+33,Z+33,O+33,P+33)):b.push(122);return(function(H,ae){for(var ce=ae;ce>0;ce--)H.pop()})(b,h.length),String.fromCharCode.apply(String,b)+"~>"},o=function(v){var h,b,x,T,D,R=String,C="length",Z=255,O="charCodeAt",P="slice",H="replace";for(v[P](-2),v=v[P](0,-2)[H](/\s/g,"")[H]("z","!!!!!"),x=[],T=0,D=(v+=h="uuuuu"[P](v[C]%5||5))[C];D>T;T+=5)b=52200625*(v[O](T)-33)+614125*(v[O](T+1)-33)+7225*(v[O](T+2)-33)+85*(v[O](T+3)-33)+(v[O](T+4)-33),x.push(Z&b>>24,Z&b>>16,Z&b>>8,Z&b);return(function(ae,ce){for(var q=ce;q>0;q--)ae.pop()})(x,h[C]),R.fromCharCode.apply(R,x)},s=function(v){return v.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">"},u=function(v){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((v=v.replace(/\s/g,"")).indexOf(">")!==-1&&(v=v.substr(0,v.indexOf(">"))),v.length%2&&(v+="0"),h.test(v)===!1)return"";for(var b="",x=0;x<v.length;x+=2)b+=String.fromCharCode("0x"+(v[x]+v[x+1]));return b},f=function(v){for(var h=new Uint8Array(v.length),b=v.length;b--;)h[b]=v.charCodeAt(b);return(h=C0(h)).reduce(function(x,T){return x+String.fromCharCode(T)},"")};n.processDataByFilters=function(v,h){var b=0,x=v||"",T=[];for(typeof(h=h||[])=="string"&&(h=[h]),b=0;b<h.length;b+=1)switch(h[b]){case"ASCII85Decode":case"/ASCII85Decode":x=o(x),T.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":x=i(x),T.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":x=u(x),T.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":x=s(x),T.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":x=f(x),T.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[b]+'" is not implemented')}return{data:x,reverseChain:T.reverse().join(" ")}}})(jn.API),(function(n){n.loadFile=function(i,o,s){return(function(u,f,v){f=f!==!1,v=typeof v=="function"?v:function(){};var h=void 0;try{h=(function(b,x,T){var D=new XMLHttpRequest,R=0,C=function(Z){var O=Z.length,P=[],H=String.fromCharCode;for(R=0;R<O;R+=1)P.push(H(255&Z.charCodeAt(R)));return P.join("")};if(D.open("GET",b,!x),D.overrideMimeType("text/plain; charset=x-user-defined"),x===!1&&(D.onload=function(){D.status===200?T(C(this.responseText)):T(void 0)}),D.send(null),x&&D.status===200)return C(D.responseText)})(u,f,v)}catch{}return h})(i,o,s)},n.loadImageFile=n.loadFile})(jn.API),(function(n){function i(){return(Zn.html2canvas?Promise.resolve(Zn.html2canvas):$h(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function o(){return(Zn.DOMPurify?Promise.resolve(Zn.DOMPurify):$h(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var s=function(h){var b=Tr(h);return b==="undefined"?"undefined":b==="string"||h instanceof String?"string":b==="number"||h instanceof Number?"number":b==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":b==="object"?"object":"unknown"},u=function(h,b){var x=document.createElement(h);for(var T in b.className&&(x.className=b.className),b.innerHTML&&b.dompurify&&(x.innerHTML=b.dompurify.sanitize(b.innerHTML)),b.style)x.style[T]=b.style[T];return x},f=function h(b,x){for(var T=b.nodeType===3?document.createTextNode(b.nodeValue):b.cloneNode(!1),D=b.firstChild;D;D=D.nextSibling)x!==!0&&D.nodeType===1&&D.nodeName==="SCRIPT"||T.appendChild(h(D,x));return b.nodeType===1&&(b.nodeName==="CANVAS"?(T.width=b.width,T.height=b.height,T.getContext("2d").drawImage(b,0,0)):b.nodeName!=="TEXTAREA"&&b.nodeName!=="SELECT"||(T.value=b.value),T.addEventListener("load",function(){T.scrollTop=b.scrollTop,T.scrollLeft=b.scrollLeft},!0)),T},v=function h(b){var x=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),T=h.convert(Promise.resolve(),x);return(T=T.setProgress(1,h,1,[h])).set(b)};(v.prototype=Object.create(Promise.prototype)).constructor=v,v.convert=function(h,b){return h.__proto__=b||v.prototype,h},v.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},v.prototype.from=function(h,b){return this.then(function(){switch(b=b||(function(x){switch(s(x)){case"string":return"string";case"element":return x.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(h),b){case"string":return this.then(o).then(function(x){return this.set({src:u("div",{innerHTML:h,dompurify:x})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},v.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},v.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},b=f(this.prop.src,this.opt.html2canvas.javascriptEnabled);b.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=u("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=u("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(b),this.prop.container.firstChild.appendChild(u("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},v.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(i).then(function(b){var x=Object.assign({},this.opt.html2canvas);return delete x.onrendered,b(this.prop.container,x)}).then(function(b){(this.opt.html2canvas.onrendered||function(){})(b),this.prop.canvas=b,document.body.removeChild(this.prop.overlay)})},v.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(i).then(function(b){var x=this.opt.jsPDF,T=this.opt.fontFaces,D=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,R=Object.assign({async:!0,allowTaint:!0,scale:D,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete R.onrendered,x.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,x.context2d.posX=this.opt.x,x.context2d.posY=this.opt.y,x.context2d.margin=this.opt.margin,x.context2d.fontFaces=T,T)for(var C=0;C<T.length;++C){var Z=T[C],O=Z.src.find(function(P){return P.format==="truetype"});O&&x.addFont(O.url,Z.ref.name,Z.ref.style)}return R.windowHeight=R.windowHeight||0,R.windowHeight=R.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):R.windowHeight,x.context2d.save(!0),b(this.prop.container,R)}).then(function(b){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(b),this.prop.canvas=b,document.body.removeChild(this.prop.overlay)})},v.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},v.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},v.prototype.output=function(h,b,x){return(x=x||"pdf").toLowerCase()==="img"||x.toLowerCase()==="image"?this.outputImg(h,b):this.outputPdf(h,b)},v.prototype.outputPdf=function(h,b){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,b)})},v.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},v.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},v.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},v.prototype.set=function(h){if(s(h)!=="object")return this;var b=Object.keys(h||{}).map(function(x){if(x in v.template.prop)return function(){this.prop[x]=h[x]};switch(x){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[x]=h[x]}}},this);return this.then(function(){return this.thenList(b)})},v.prototype.get=function(h,b){return this.then(function(){var x=h in v.template.prop?this.prop[h]:this.opt[h];return b?b(x):x})},v.prototype.setMargin=function(h){return this.then(function(){switch(s(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},v.prototype.setPageSize=function(h){function b(x,T){return Math.floor(x*T/72*96)}return this.then(function(){(h=h||jn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:b(h.inner.width,h.k),height:b(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},v.prototype.setProgress=function(h,b,x,T){return h!=null&&(this.progress.val=h),b!=null&&(this.progress.state=b),x!=null&&(this.progress.n=x),T!=null&&(this.progress.stack=T),this.progress.ratio=this.progress.val/this.progress.state,this},v.prototype.updateProgress=function(h,b,x,T){return this.setProgress(h?this.progress.val+h:null,b||null,x?this.progress.n+x:null,T?this.progress.stack.concat(T):null)},v.prototype.then=function(h,b){var x=this;return this.thenCore(h,b,function(T,D){return x.updateProgress(null,null,1,[T]),Promise.prototype.then.call(this,function(R){return x.updateProgress(null,T),R}).then(T,D).then(function(R){return x.updateProgress(1),R})})},v.prototype.thenCore=function(h,b,x){x=x||Promise.prototype.then;var T=this;h&&(h=h.bind(T)),b&&(b=b.bind(T));var D=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?T:v.convert(Object.assign({},T),Promise.prototype),R=x.call(D,h,b);return v.convert(R,T.__proto__)},v.prototype.thenExternal=function(h,b){return Promise.prototype.then.call(this,h,b)},v.prototype.thenList=function(h){var b=this;return h.forEach(function(x){b=b.thenCore(x)}),b},v.prototype.catch=function(h){h&&(h=h.bind(this));var b=Promise.prototype.catch.call(this,h);return v.convert(b,this)},v.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},v.prototype.error=function(h){return this.then(function(){throw new Error(h)})},v.prototype.using=v.prototype.set,v.prototype.saveAs=v.prototype.save,v.prototype.export=v.prototype.output,v.prototype.run=v.prototype.then,jn.getPageSize=function(h,b,x){if(Tr(h)==="object"){var T=h;h=T.orientation,b=T.unit||b,x=T.format||x}b=b||"mm",x=x||"a4",h=(""+(h||"P")).toLowerCase();var D,R=(""+x).toLowerCase(),C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(b){case"pt":D=1;break;case"mm":D=72/25.4;break;case"cm":D=72/2.54;break;case"in":D=72;break;case"px":D=.75;break;case"pc":case"em":D=12;break;case"ex":D=6;break;default:throw"Invalid unit: "+b}var Z,O=0,P=0;if(C.hasOwnProperty(R))O=C[R][1]/D,P=C[R][0]/D;else try{O=x[1],P=x[0]}catch{throw new Error("Invalid format: "+x)}if(h==="p"||h==="portrait")h="p",P>O&&(Z=P,P=O,O=Z);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",O>P&&(Z=P,P=O,O=Z)}return{width:P,height:O,unit:b,k:D,orientation:h}},n.html=function(h,b){(b=b||{}).callback=b.callback||function(){},b.html2canvas=b.html2canvas||{},b.html2canvas.canvas=b.html2canvas.canvas||this.canvas,b.jsPDF=b.jsPDF||this,b.fontFaces=b.fontFaces?b.fontFaces.map(d0):null;var x=new v(b);return b.worker?x:x.from(h).doCallback()}})(jn.API),jn.API.addJS=function(n){return fy=n,this.internal.events.subscribe("postPutResources",function(){Dp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Dp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),uy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fy+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Dp!==void 0&&uy!==void 0&&this.internal.out("/Names <</JavaScript "+Dp+" 0 R>>")}),this},(function(n){var i;n.events.push(["postPutResources",function(){var o=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var u=o.outline.render().split(/\r\n/),f=0;f<u.length;f++){var v=u[f],h=s.exec(v);if(h!=null){var b=h[1];o.internal.newObjectDeferredBegin(b,!1)}o.internal.write(v)}if(this.outline.createNamedDestinations){var x=this.internal.pages.length,T=[];for(f=0;f<x;f++){var D=o.internal.newObject();T.push(D);var R=o.internal.getPageInfo(f+1);o.internal.write("<< /D["+R.objId+" 0 R /XYZ null null null]>> endobj")}var C=o.internal.newObject();for(o.internal.write("<< /Names [ "),f=0;f<T.length;f++)o.internal.write("(page_"+(f+1)+")"+T[f]+" 0 R");o.internal.write(" ] >>","endobj"),i=o.internal.newObject(),o.internal.write("<< /Dests "+C+" 0 R"),o.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var o=this;o.outline.root.children.length>0&&(o.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&o.internal.write("/Names "+i+" 0 R"))}]),n.events.push(["initialized",function(){var o=this;o.outline={createNamedDestinations:!1,root:{children:[]}},o.outline.add=function(s,u,f){var v={title:u,options:f,children:[]};return s==null&&(s=this.root),s.children.push(v),v},o.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=o,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},o.outline.genIds_r=function(s){s.id=o.internal.newObjectDeferred();for(var u=0;u<s.children.length;u++)this.genIds_r(s.children[u])},o.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},o.outline.renderItems=function(s){for(var u=this.ctx.pdf.internal.getVerticalCoordinateString,f=0;f<s.children.length;f++){var v=s.children[f];this.objStart(v),this.line("/Title "+this.makeString(v.title)),this.line("/Parent "+this.makeRef(s)),f>0&&this.line("/Prev "+this.makeRef(s.children[f-1])),f<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[f+1])),v.children.length>0&&(this.line("/First "+this.makeRef(v.children[0])),this.line("/Last "+this.makeRef(v.children[v.children.length-1])));var h=this.count=this.count_r({count:0},v);if(h>0&&this.line("/Count "+h),v.options&&v.options.pageNumber){var b=o.internal.getPageInfo(v.options.pageNumber);this.line("/Dest ["+b.objId+" 0 R /XYZ 0 "+u(0)+" 0]")}this.objEnd()}for(var x=0;x<s.children.length;x++)this.renderItems(s.children[x])},o.outline.line=function(s){this.ctx.val+=s+`\r
`},o.outline.makeRef=function(s){return s.id+" 0 R"},o.outline.makeString=function(s){return"("+o.internal.pdfEscape(s)+")"},o.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},o.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},o.outline.count_r=function(s,u){for(var f=0;f<u.children.length;f++)s.count++,this.count_r(s,u.children[f]);return s.count}}])})(jn.API),(function(n){var i=[192,193,194,195,196,197,198,199];n.processJPEG=function(o,s,u,f,v,h){var b,x=this.decode.DCT_DECODE,T=null;if(typeof o=="string"||this.__addimage__.isArrayBuffer(o)||this.__addimage__.isArrayBufferView(o)){switch(o=v||o,o=this.__addimage__.isArrayBuffer(o)?new Uint8Array(o):o,b=(function(D){for(var R,C=256*D.charCodeAt(4)+D.charCodeAt(5),Z=D.length,O={width:0,height:0,numcomponents:1},P=4;P<Z;P+=2){if(P+=C,i.indexOf(D.charCodeAt(P+1))!==-1){R=256*D.charCodeAt(P+5)+D.charCodeAt(P+6),O={width:256*D.charCodeAt(P+7)+D.charCodeAt(P+8),height:R,numcomponents:D.charCodeAt(P+9)};break}C=256*D.charCodeAt(P+2)+D.charCodeAt(P+3)}return O})(o=this.__addimage__.isArrayBufferView(o)?this.__addimage__.arrayBufferToBinaryString(o):o),b.numcomponents){case 1:h=this.color_spaces.DEVICE_GRAY;break;case 4:h=this.color_spaces.DEVICE_CMYK;break;case 3:h=this.color_spaces.DEVICE_RGB}T={data:o,width:b.width,height:b.height,colorSpace:h,bitsPerComponent:8,filter:x,index:s,alias:u}}return T}})(jn.API),jn.API.processPNG=function(n,i,o,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var u,f=k5(n,{checkCrc:!0}),v=f.width,h=f.height,b=f.channels,x=f.palette,T=f.depth;u=x&&b===1?(function(E){for(var V=E.width,$=E.height,k=E.data,S=E.palette,J=E.depth,re=!1,ye=[],K=[],te=void 0,ge=!1,je=0,be=0;be<S.length;be++){var F=g1(S[be],4),A=F[0],M=F[1],B=F[2],de=F[3];ye.push(A,M,B),de!=null&&(de===0?(je++,K.length<1&&K.push(be)):de<255&&(ge=!0))}if(ge||je>1){re=!0,K=void 0;var Ae=V*$;te=new Uint8Array(Ae);for(var Ee=new DataView(k.buffer),Ge=0;Ge<Ae;Ge++){var Pe=h0(Ee,Ge,J),nt=g1(S[Pe],4)[3];te[Ge]=nt}}else je===0&&(K=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:re?8:void 0,colorBytes:k,alphaBytes:te,needSMask:re,palette:ye,mask:K}})(f):b===2||b===4?(function(E){for(var V=E.data,$=E.width,k=E.height,S=E.channels,J=E.depth,re=S===2?"DeviceGray":"DeviceRGB",ye=S-1,K=$*k,te=ye,ge=K*te,je=1*K,be=Math.ceil(ge*J/8),F=Math.ceil(je*J/8),A=new Uint8Array(be),M=new Uint8Array(F),B=new DataView(V.buffer),de=new DataView(A.buffer),Ae=new DataView(M.buffer),Ee=!1,Ge=0;Ge<K;Ge++){for(var Pe=Ge*S,nt=0;nt<te;nt++)vy(de,h0(B,Pe+nt,J),Ge*te+nt,J);var Ke=h0(B,Pe+te,J);Ke<(1<<J)-1&&(Ee=!0),vy(Ae,Ke,1*Ge,J)}return{colorSpace:re,colorsPerPixel:ye,sMaskBitsPerComponent:Ee?J:void 0,colorBytes:A,alphaBytes:M,needSMask:Ee}})(f):(function(E){var V=E.data,$=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:$,colorsPerPixel:$==="DeviceGray"?1:3,colorBytes:V instanceof Uint16Array?(function(k){for(var S=k.length,J=new Uint8Array(2*S),re=new DataView(J.buffer,J.byteOffset,J.byteLength),ye=0;ye<S;ye++)re.setUint16(2*ye,k[ye],!1);return J})(V):V,needSMask:!1}})(f);var D,R,C,Z=u,O=Z.colorSpace,P=Z.colorsPerPixel,H=Z.sMaskBitsPerComponent,ae=Z.colorBytes,ce=Z.alphaBytes,q=Z.needSMask,se=Z.palette,X=Z.mask,_=null;return s!==jn.API.image_compression.NONE&&typeof C0=="function"?(_=(function(E){var V;switch(E){case jn.API.image_compression.FAST:V=11;break;case jn.API.image_compression.MEDIUM:V=13;break;case jn.API.image_compression.SLOW:V=14;break;default:V=12}return V})(s),D=this.decode.FLATE_DECODE,R="/Predictor ".concat(_," /Colors ").concat(P," /BitsPerComponent ").concat(T," /Columns ").concat(v),n=gy(ae,Math.ceil(v*P*T/8),P,T,s),q&&(C=gy(ce,Math.ceil(v*H/8),1,H,s))):(D=void 0,R=void 0,n=ae,q&&(C=ce)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(C&&this.__addimage__.isArrayBuffer(C)||this.__addimage__.isArrayBufferView(C))&&(C=this.__addimage__.arrayBufferToBinaryString(C)),{alias:o,data:n,index:i,filter:D,decodeParameters:R,transparency:X,palette:se,sMask:C,predictor:_,width:v,height:h,bitsPerComponent:T,sMaskBitsPerComponent:H,colorSpace:O}}},(function(n){n.processGIF89A=function(i,o,s,u){var f=new G5(i),v=f.width,h=f.height,b=[];f.decodeAndBlitFrameRGBA(0,b);var x={data:b,width:v,height:h},T=new g0(100).encode(x,100);return n.processJPEG.call(this,T,o,s,u)},n.processGIF87A=n.processGIF89A})(jn.API),uc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0);this.palette[i]={red:u,green:s,blue:o,quad:f}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},uc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,i=this.width*this.height*4;this.data=new Uint8Array(i),this[n]()}catch(o){Vr.log("bit decode error:"+o)}},uc.prototype.bit1=function(){var n,i=Math.ceil(this.width/8),o=i%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,u=0;u<i;u++)for(var f=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+8*u*4,h=0;h<8&&8*u+h<this.width;h++){var b=this.palette[f>>7-h&1];this.data[v+4*h]=b.blue,this.data[v+4*h+1]=b.green,this.data[v+4*h+2]=b.red,this.data[v+4*h+3]=255}o!==0&&(this.pos+=4-o)}},uc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),i=n%4,o=this.height-1;o>=0;o--){for(var s=this.bottom_up?o:this.height-1-o,u=0;u<n;u++){var f=this.datav.getUint8(this.pos++,!0),v=s*this.width*4+2*u*4,h=f>>4,b=15&f,x=this.palette[h];if(this.data[v]=x.blue,this.data[v+1]=x.green,this.data[v+2]=x.red,this.data[v+3]=255,2*u+1>=this.width)break;x=this.palette[b],this.data[v+4]=x.blue,this.data[v+4+1]=x.green,this.data[v+4+2]=x.red,this.data[v+4+3]=255}i!==0&&(this.pos+=4-i)}},uc.prototype.bit8=function(){for(var n=this.width%4,i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var u=this.datav.getUint8(this.pos++,!0),f=o*this.width*4+4*s;if(u<this.palette.length){var v=this.palette[u];this.data[f]=v.red,this.data[f+1]=v.green,this.data[f+2]=v.blue,this.data[f+3]=255}else this.data[f]=255,this.data[f+1]=255,this.data[f+2]=255,this.data[f+3]=255}n!==0&&(this.pos+=4-n)}},uc.prototype.bit15=function(){for(var n=this.width%3,i=parseInt("11111",2),o=this.height-1;o>=0;o--){for(var s=this.bottom_up?o:this.height-1-o,u=0;u<this.width;u++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var v=(f&i)/i*255|0,h=(f>>5&i)/i*255|0,b=(f>>10&i)/i*255|0,x=f>>15?255:0,T=s*this.width*4+4*u;this.data[T]=b,this.data[T+1]=h,this.data[T+2]=v,this.data[T+3]=x}this.pos+=n}},uc.prototype.bit16=function(){for(var n=this.width%3,i=parseInt("11111",2),o=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var u=this.bottom_up?s:this.height-1-s,f=0;f<this.width;f++){var v=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(v&i)/i*255|0,b=(v>>5&o)/o*255|0,x=(v>>11)/i*255|0,T=u*this.width*4+4*f;this.data[T]=x,this.data[T+1]=b,this.data[T+2]=h,this.data[T+3]=255}this.pos+=n}},uc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),v=i*this.width*4+4*o;this.data[v]=f,this.data[v+1]=u,this.data[v+2]=s,this.data[v+3]=255}this.pos+=this.width%4}},uc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var s=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),v=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+4*o;this.data[h]=f,this.data[h+1]=u,this.data[h+2]=s,this.data[h+3]=v}},uc.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(i,o,s,u){var f=new uc(i,!1),v=f.width,h=f.height,b={data:f.getData(),width:v,height:h},x=new g0(100).encode(b,100);return n.processJPEG.call(this,x,o,s,u)}})(jn.API),Sy.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(i,o,s,u){var f=new Sy(i),v=f.width,h=f.height,b={data:f.getData(),width:v,height:h},x=new g0(100).encode(b,100);return n.processJPEG.call(this,x,o,s,u)}})(jn.API),jn.API.processRGBA=function(n,i,o){for(var s=n.data,u=s.length,f=new Uint8Array(u/4*3),v=new Uint8Array(u/4),h=0,b=0,x=0;x<u;x+=4){var T=s[x],D=s[x+1],R=s[x+2],C=s[x+3];f[h++]=T,f[h++]=D,f[h++]=R,v[b++]=C}var Z=this.__addimage__.arrayBufferToBinaryString(f);return{alpha:this.__addimage__.arrayBufferToBinaryString(v),data:Z,index:i,alias:o,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},jn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Mf=jn.API,Ep=Mf.getCharWidthsArray=function(n,i){var o,s,u=(i=i||{}).font||this.internal.getFont(),f=i.fontSize||this.internal.getFontSize(),v=i.charSpace||this.internal.getCharSpace(),h=i.widths?i.widths:u.metadata.Unicode.widths,b=h.fof?h.fof:1,x=i.kerning?i.kerning:u.metadata.Unicode.kerning,T=x.fof?x.fof:1,D=i.doKerning!==!1,R=0,C=n.length,Z=0,O=h[0]||b,P=[];for(o=0;o<C;o++)s=n.charCodeAt(o),typeof u.metadata.widthOfString=="function"?P.push((u.metadata.widthOfGlyph(u.metadata.characterToGlyph(s))+v*(1e3/f)||0)/1e3):(R=D&&Tr(x[s])==="object"&&!isNaN(parseInt(x[s][Z],10))?x[s][Z]/T:0,P.push((h[s]||O)/b+R)),Z=s;return P},dy=Mf.getStringUnitWidth=function(n,i){var o=(i=i||{}).fontSize||this.internal.getFontSize(),s=i.font||this.internal.getFont(),u=i.charSpace||this.internal.getCharSpace();return Mf.processArabic&&(n=Mf.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,o,u)/o:Ep.apply(this,arguments).reduce(function(f,v){return f+v},0)},py=function(n,i,o,s){for(var u=[],f=0,v=n.length,h=0;f!==v&&h+i[f]<o;)h+=i[f],f++;u.push(n.slice(0,f));var b=f;for(h=0;f!==v;)h+i[f]>s&&(u.push(n.slice(b,f)),h=0,b=f),h+=i[f],f++;return b!==f&&u.push(n.slice(b,f)),u},hy=function(n,i,o){o||(o={});var s,u,f,v,h,b,x,T=[],D=[T],R=o.textIndent||0,C=0,Z=0,O=n.split(" "),P=Ep.apply(this,[" ",o])[0];if(b=o.lineIndent===-1?O[0].length+2:o.lineIndent||0){var H=Array(b).join(" "),ae=[];O.map(function(q){(q=q.split(/\s*\n/)).length>1?ae=ae.concat(q.map(function(se,X){return(X&&se.length?`
`:"")+se})):ae.push(q[0])}),O=ae,b=dy.apply(this,[H,o])}for(f=0,v=O.length;f<v;f++){var ce=0;if(s=O[f],b&&s[0]==`
`&&(s=s.substr(1),ce=1),R+C+(Z=(u=Ep.apply(this,[s,o])).reduce(function(q,se){return q+se},0))>i||ce){if(Z>i){for(h=py.apply(this,[s,u,i-(R+C),i]),T.push(h.shift()),T=[h.pop()];h.length;)D.push([h.shift()]);Z=u.slice(s.length-(T[0]?T[0].length:0)).reduce(function(q,se){return q+se},0)}else T=[s];D.push(T),R=Z+b,C=P}else T.push(s),R+=C+Z,C=P}return x=b?function(q,se){return(se?H:"")+q.join(" ")}:function(q){return q.join(" ")},D.map(x)},Mf.splitTextToSize=function(n,i,o){var s,u=(o=o||{}).fontSize||this.internal.getFontSize(),f=(function(T){if(T.widths&&T.kerning)return{widths:T.widths,kerning:T.kerning};var D=this.internal.getFont(T.fontName,T.fontStyle),R="Unicode";return D.metadata[R]?{widths:D.metadata[R].widths||{0:1},kerning:D.metadata[R].kerning||{}}:{font:D.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,o);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var v=1*this.internal.scaleFactor*i/u;f.textIndent=o.textIndent?1*o.textIndent*this.internal.scaleFactor/u:0,f.lineIndent=o.lineIndent;var h,b,x=[];for(h=0,b=s.length;h<b;h++)x=x.concat(hy.apply(this,[s[h],v,f]));return x},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var i="0123456789abcdef",o="klmnopqrstuvwxyz",s={},u={},f=0;f<16;f++)s[o[f]]=i[f],u[i[f]]=o[f];var v=function(R){return"0x"+parseInt(R,10).toString(16)},h=n.__fontmetrics__.compress=function(R){var C,Z,O,P,H=["{"];for(var ae in R){if(C=R[ae],isNaN(parseInt(ae,10))?Z="'"+ae+"'":(ae=parseInt(ae,10),Z=(Z=v(ae).slice(2)).slice(0,-1)+u[Z.slice(-1)]),typeof C=="number")C<0?(O=v(C).slice(3),P="-"):(O=v(C).slice(2),P=""),O=P+O.slice(0,-1)+u[O.slice(-1)];else{if(Tr(C)!=="object")throw new Error("Don't know what to do with value type "+Tr(C)+".");O=h(C)}H.push(Z+O)}return H.push("}"),H.join("")},b=n.__fontmetrics__.uncompress=function(R){if(typeof R!="string")throw new Error("Invalid argument passed to uncompress.");for(var C,Z,O,P,H={},ae=1,ce=H,q=[],se="",X="",_=R.length-1,E=1;E<_;E+=1)(P=R[E])=="'"?C?(O=C.join(""),C=void 0):C=[]:C?C.push(P):P=="{"?(q.push([ce,O]),ce={},O=void 0):P=="}"?((Z=q.pop())[0][Z[1]]=ce,O=void 0,ce=Z[0]):P=="-"?ae=-1:O===void 0?s.hasOwnProperty(P)?(se+=s[P],O=parseInt(se,16)*ae,ae=1,se=""):se+=P:s.hasOwnProperty(P)?(X+=s[P],ce[O]=parseInt(X,16)*ae,ae=1,O=void 0,X=""):X+=P;return H},x={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},T={Unicode:{Courier:x,"Courier-Bold":x,"Courier-BoldOblique":x,"Courier-Oblique":x,Helvetica:x,"Helvetica-Bold":x,"Helvetica-BoldOblique":x,"Helvetica-Oblique":x,"Times-Roman":x,"Times-Bold":x,"Times-BoldItalic":x,"Times-Italic":x}},D={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:b("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:b("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(R){var C=R.font,Z=D.Unicode[C.postScriptName];Z&&(C.metadata.Unicode={},C.metadata.Unicode.widths=Z.widths,C.metadata.Unicode.kerning=Z.kerning);var O=T.Unicode[C.postScriptName];O&&(C.metadata.Unicode.encoding=O,C.encoding=O.codePages[0])}])})(jn.API),(function(n){var i=function(o){for(var s=o.length,u=new Uint8Array(s),f=0;f<s;f++)u[f]=o.charCodeAt(f);return u};n.API.events.push(["addFont",function(o){var s=void 0,u=o.font,f=o.instance;if(!u.isStandardFont){if(f===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");if(typeof(s=f.existsFileInVFS(u.postScriptName)===!1?f.loadFile(u.postScriptName):f.getFileFromVFS(u.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");(function(v,h){h=/^\x00\x01\x00\x00/.test(h)?i(h):i(Op(h)),v.metadata=n.API.TTFFont.open(h),v.metadata.Unicode=v.metadata.Unicode||{encoding:{},kerning:{},widths:[]},v.metadata.glyIdsUsed=[0]})(u,s)}}])})(jn),jn.API.addSvgAsImage=function(n,i,o,s,u,f,v,h){if(isNaN(i)||isNaN(o))throw Vr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(u))throw Vr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=s,b.height=u;var x=b.getContext("2d");x.fillStyle="#fff",x.fillRect(0,0,b.width,b.height);var T={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},D=this;return(Zn.canvg?Promise.resolve(Zn.canvg):$h(()=>import("./index.es-BQwefa8q.js"),[])).catch(function(R){return Promise.reject(new Error("Could not load canvg: "+R))}).then(function(R){return R.default?R.default:R}).then(function(R){return R.fromString(x,n,T)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(R){return R.render(T)}).then(function(){D.addImage(b.toDataURL("image/jpeg",1),i,o,s,u,v,h)})},jn.API.putTotalPages=function(n){var i,o=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(i=new RegExp(n,"g"),o=this.internal.getNumberOfPages()):(i=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),o=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var u=0;u<this.internal.pages[s].length;u++)this.internal.pages[s][u]=this.internal.pages[s][u].replace(i,o);return this},jn.API.viewerPreferences=function(n,i){var o;n=n||{},i=i||!1;var s,u,f,v={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(v),b=[],x=0,T=0,D=0;function R(Z,O){var P,H=!1;for(P=0;P<Z.length;P+=1)Z[P]===O&&(H=!0);return H}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(v)),this.internal.viewerpreferences.isSubscribed=!1),o=this.internal.viewerpreferences.configuration,n==="reset"||i===!0){var C=h.length;for(D=0;D<C;D+=1)o[h[D]].value=o[h[D]].defaultValue,o[h[D]].explicitSet=!1}if(Tr(n)==="object"){for(u in n)if(f=n[u],R(h,u)&&f!==void 0){if(o[u].type==="boolean"&&typeof f=="boolean")o[u].value=f;else if(o[u].type==="name"&&R(o[u].valueSet,f))o[u].value=f;else if(o[u].type==="integer"&&Number.isInteger(f))o[u].value=f;else if(o[u].type==="array"){for(x=0;x<f.length;x+=1)if(s=!0,f[x].length===1&&typeof f[x][0]=="number")b.push(String(f[x]-1));else if(f[x].length>1){for(T=0;T<f[x].length;T+=1)typeof f[x][T]!="number"&&(s=!1);s===!0&&b.push([f[x][0]-1,f[x][1]-1].join(" "))}o[u].value="["+b.join(" ")+"]"}else o[u].value=o[u].defaultValue;o[u].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Z,O=[];for(Z in o)o[Z].explicitSet===!0&&(o[Z].type==="name"?O.push("/"+Z+" /"+o[Z].value):O.push("/"+Z+" "+o[Z].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=o,this},(function(n){var i=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',u=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),f=unescape(encodeURIComponent(s)),v=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),h=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),b=unescape(encodeURIComponent("</x:xmpmeta>")),x=f.length+v.length+h.length+u.length+b.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+x+" >>"),this.internal.write("stream"),this.internal.write(u+f+v+h+b),this.internal.write("endstream"),this.internal.write("endobj")},o=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,u){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:u||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",o),this.internal.events.subscribe("postPutResources",i)),this}})(jn.API),(function(n){var i=n.API,o=i.pdfEscape16=function(f,v){for(var h,b=v.metadata.Unicode.widths,x=["","0","00","000","0000"],T=[""],D=0,R=f.length;D<R;++D){if(h=v.metadata.characterToGlyph(f.charCodeAt(D)),v.metadata.glyIdsUsed.push(h),v.metadata.toUnicode[h]=f.charCodeAt(D),b.indexOf(h)==-1&&(b.push(h),b.push([parseInt(v.metadata.widthOfGlyph(h),10)])),h=="0")return T.join("");h=h.toString(16),T.push(x[4-h.length],h)}return T.join("")},s=function(f){var v,h,b,x,T,D,R;for(T=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,b=[],D=0,R=(h=Object.keys(f).sort(function(C,Z){return C-Z})).length;D<R;D++)v=h[D],b.length>=100&&(T+=`
`+b.length+` beginbfchar
`+b.join(`
`)+`
endbfchar`,b=[]),f[v]!==void 0&&f[v]!==null&&typeof f[v].toString=="function"&&(x=("0000"+f[v].toString(16)).slice(-4),v=("0000"+(+v).toString(16)).slice(-4),b.push("<"+v+"><"+x+">"));return b.length&&(T+=`
`+b.length+` beginbfchar
`+b.join(`
`)+`
endbfchar
`),T+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};i.events.push(["putFont",function(f){(function(v){var h=v.font,b=v.out,x=v.newObject,T=v.putStream;if(h.metadata instanceof n.API.TTFFont&&h.encoding==="Identity-H"){for(var D=h.metadata.Unicode.widths,R=h.metadata.subset.encode(h.metadata.glyIdsUsed,1),C="",Z=0;Z<R.length;Z++)C+=String.fromCharCode(R[Z]);var O=x();T({data:C,addLength1:!0,objectId:O}),b("endobj");var P=x();T({data:s(h.metadata.toUnicode),addLength1:!0,objectId:P}),b("endobj");var H=x();b("<<"),b("/Type /FontDescriptor"),b("/FontName /"+If(h.fontName)),b("/FontFile2 "+O+" 0 R"),b("/FontBBox "+n.API.PDFObject.convert(h.metadata.bbox)),b("/Flags "+h.metadata.flags),b("/StemV "+h.metadata.stemV),b("/ItalicAngle "+h.metadata.italicAngle),b("/Ascent "+h.metadata.ascender),b("/Descent "+h.metadata.decender),b("/CapHeight "+h.metadata.capHeight),b(">>"),b("endobj");var ae=x();b("<<"),b("/Type /Font"),b("/BaseFont /"+If(h.fontName)),b("/FontDescriptor "+H+" 0 R"),b("/W "+n.API.PDFObject.convert(D)),b("/CIDToGIDMap /Identity"),b("/DW 1000"),b("/Subtype /CIDFontType2"),b("/CIDSystemInfo"),b("<<"),b("/Supplement 0"),b("/Registry (Adobe)"),b("/Ordering ("+h.encoding+")"),b(">>"),b(">>"),b("endobj"),h.objectNumber=x(),b("<<"),b("/Type /Font"),b("/Subtype /Type0"),b("/ToUnicode "+P+" 0 R"),b("/BaseFont /"+If(h.fontName)),b("/Encoding /"+h.encoding),b("/DescendantFonts ["+ae+" 0 R]"),b(">>"),b("endobj"),h.isAlreadyPutted=!0}})(f)}]),i.events.push(["putFont",function(f){(function(v){var h=v.font,b=v.out,x=v.newObject,T=v.putStream;if(h.metadata instanceof n.API.TTFFont&&h.encoding==="WinAnsiEncoding"){for(var D=h.metadata.rawData,R="",C=0;C<D.length;C++)R+=String.fromCharCode(D[C]);var Z=x();T({data:R,addLength1:!0,objectId:Z}),b("endobj");var O=x();T({data:s(h.metadata.toUnicode),addLength1:!0,objectId:O}),b("endobj");var P=x();b("<<"),b("/Descent "+h.metadata.decender),b("/CapHeight "+h.metadata.capHeight),b("/StemV "+h.metadata.stemV),b("/Type /FontDescriptor"),b("/FontFile2 "+Z+" 0 R"),b("/Flags 96"),b("/FontBBox "+n.API.PDFObject.convert(h.metadata.bbox)),b("/FontName /"+If(h.fontName)),b("/ItalicAngle "+h.metadata.italicAngle),b("/Ascent "+h.metadata.ascender),b(">>"),b("endobj"),h.objectNumber=x();for(var H=0;H<h.metadata.hmtx.widths.length;H++)h.metadata.hmtx.widths[H]=parseInt(h.metadata.hmtx.widths[H]*(1e3/h.metadata.head.unitsPerEm));b("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+If(h.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+h.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(h.metadata.hmtx.widths)+">>"),b("endobj"),h.isAlreadyPutted=!0}})(f)}]);var u=function(f){var v,h=f.text||"",b=f.x,x=f.y,T=f.options||{},D=f.mutex||{},R=D.pdfEscape,C=D.activeFontKey,Z=D.fonts,O=C,P="",H=0,ae="",ce=Z[O].encoding;if(Z[O].encoding!=="Identity-H")return{text:h,x:b,y:x,options:T,mutex:D};for(ae=h,O=C,Array.isArray(h)&&(ae=h[0]),H=0;H<ae.length;H+=1)Z[O].metadata.hasOwnProperty("cmap")&&(v=Z[O].metadata.cmap.unicode.codeMap[ae[H].charCodeAt(0)]),v||ae[H].charCodeAt(0)<256&&Z[O].metadata.hasOwnProperty("Unicode")?P+=ae[H]:P+="";var q="";return parseInt(O.slice(1))<14||ce==="WinAnsiEncoding"?q=R(P,O).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):ce==="Identity-H"&&(q=o(P,Z[O])),D.isHex=!0,{text:q,x:b,y:x,options:T,mutex:D}};i.events.push(["postProcessText",function(f){var v=f.text||"",h=[],b={text:v,x:f.x,y:f.y,options:f.options,mutex:f.mutex};if(Array.isArray(v)){var x=0;for(x=0;x<v.length;x+=1)Array.isArray(v[x])&&v[x].length===3?h.push([u(Object.assign({},b,{text:v[x][0]})).text,v[x][1],v[x][2]]):h.push(u(Object.assign({},b,{text:v[x]})).text);f.text=h}else f.text=u(Object.assign({},b,{text:v})).text}])})(jn),(function(n){var i=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(o){return i.call(this),this.internal.vFS[o]!==void 0},n.addFileToVFS=function(o,s){return i.call(this),this.internal.vFS[o]=s,this},n.getFileFromVFS=function(o){return i.call(this),this.internal.vFS[o]!==void 0?this.internal.vFS[o]:null}})(jn.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var u,f,v,h,b,x,T,D=i,R=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Z={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],H=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ae=!1,ce=0;this.__bidiEngine__={};var q=function(k){var S=k.charCodeAt(),J=S>>8,re=O[J];return re!==void 0?D[256*re+(255&S)]:J===252||J===253?"AL":H.test(J)?"L":J===8?"R":"N"},se=function(k){for(var S,J=0;J<k.length;J++){if((S=q(k.charAt(J)))==="L")return!1;if(S==="R")return!0}return!1},X=function(k,S,J,re){var ye,K,te,ge,je=S[re];switch(je){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ae=!1;break;case"N":case"AN":break;case"EN":ae&&(je="AN");break;case"AL":ae=!0,je="R";break;case"WS":case"BN":je="N";break;case"CS":re<1||re+1>=S.length||(ye=J[re-1])!=="EN"&&ye!=="AN"||(K=S[re+1])!=="EN"&&K!=="AN"?je="N":ae&&(K="AN"),je=K===ye?K:"N";break;case"ES":je=(ye=re>0?J[re-1]:"B")==="EN"&&re+1<S.length&&S[re+1]==="EN"?"EN":"N";break;case"ET":if(re>0&&J[re-1]==="EN"){je="EN";break}if(ae){je="N";break}for(te=re+1,ge=S.length;te<ge&&S[te]==="ET";)te++;je=te<ge&&S[te]==="EN"?"EN":"N";break;case"NSM":if(v&&!h){for(ge=S.length,te=re+1;te<ge&&S[te]==="NSM";)te++;if(te<ge){var be=k[re],F=be>=1425&&be<=2303||be===64286;if(ye=S[te],F&&(ye==="R"||ye==="AL")){je="R";break}}}je=re<1||(ye=S[re-1])==="B"?"N":J[re-1];break;case"B":ae=!1,u=!0,je=ce;break;case"S":f=!0,je="N"}return je},_=function(k,S,J){var re=k.split("");return J&&E(re,J,{hiLevel:ce}),re.reverse(),S&&S.reverse(),re.join("")},E=function(k,S,J){var re,ye,K,te,ge,je=-1,be=k.length,F=0,A=[],M=ce?C:R,B=[];for(ae=!1,u=!1,f=!1,ye=0;ye<be;ye++)B[ye]=q(k[ye]);for(K=0;K<be;K++){if(ge=F,A[K]=X(k,B,A,K),re=240&(F=M[ge][Z[A[K]]]),F&=15,S[K]=te=M[F][5],re>0)if(re===16){for(ye=je;ye<K;ye++)S[ye]=1;je=-1}else je=-1;if(M[F][6])je===-1&&(je=K);else if(je>-1){for(ye=je;ye<K;ye++)S[ye]=te;je=-1}B[K]==="B"&&(S[K]=0),J.hiLevel|=te}f&&(function(de,Ae,Ee){for(var Ge=0;Ge<Ee;Ge++)if(de[Ge]==="S"){Ae[Ge]=ce;for(var Pe=Ge-1;Pe>=0&&de[Pe]==="WS";Pe--)Ae[Pe]=ce}})(B,S,be)},V=function(k,S,J,re,ye){if(!(ye.hiLevel<k)){if(k===1&&ce===1&&!u)return S.reverse(),void(J&&J.reverse());for(var K,te,ge,je,be=S.length,F=0;F<be;){if(re[F]>=k){for(ge=F+1;ge<be&&re[ge]>=k;)ge++;for(je=F,te=ge-1;je<te;je++,te--)K=S[je],S[je]=S[te],S[te]=K,J&&(K=J[je],J[je]=J[te],J[te]=K);F=ge}F++}}},$=function(k,S,J){var re=k.split(""),ye={hiLevel:ce};return J||(J=[]),E(re,J,ye),(function(K,te,ge){if(ge.hiLevel!==0&&T)for(var je,be=0;be<K.length;be++)te[be]===1&&(je=P.indexOf(K[be]))>=0&&(K[be]=P[je+1])})(re,J,ye),V(2,re,S,J,ye),V(1,re,S,J,ye),re.join("")};return this.__bidiEngine__.doBidiReorder=function(k,S,J){if((function(ye,K){if(K)for(var te=0;te<ye.length;te++)K[te]=te;h===void 0&&(h=se(ye)),x===void 0&&(x=se(ye))})(k,S),v||!b||x)if(v&&b&&h^x)ce=h?1:0,k=_(k,S,J);else if(!v&&b&&x)ce=h?1:0,k=$(k,S,J),k=_(k,S);else if(!v||h||b||x){if(v&&!b&&h^x)k=_(k,S),h?(ce=0,k=$(k,S,J)):(ce=1,k=$(k,S,J),k=_(k,S));else if(v&&h&&!b&&x)ce=1,k=$(k,S,J),k=_(k,S);else if(!v&&!b&&h^x){var re=T;h?(ce=1,k=$(k,S,J),ce=0,T=!1,k=$(k,S,J),T=re):(ce=0,k=$(k,S,J),k=_(k,S),ce=1,T=!1,k=$(k,S,J),T=re,k=_(k,S))}}else ce=0,k=$(k,S,J);else ce=h?1:0,k=$(k,S,J);return k},this.__bidiEngine__.setOptions=function(k){k&&(v=k.isInputVisual,b=k.isOutputVisual,h=k.isInputRtl,x=k.isOutputRtl,T=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var i=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],o=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var u=s.text;s.x,s.y;var f=s.options||{};s.mutex,f.lang;var v=[];if(f.isInputVisual=typeof f.isInputVisual!="boolean"||f.isInputVisual,o.setOptions(f),Object.prototype.toString.call(u)==="[object Array]"){var h=0;for(v=[],h=0;h<u.length;h+=1)Object.prototype.toString.call(u[h])==="[object Array]"?v.push([o.doBidiReorder(u[h][0]),u[h][1],u[h][2]]):v.push([o.doBidiReorder(u[h])]);s.text=v}else s.text=o.doBidiReorder(u);o.setOptions({isInputVisual:!0})}])})(jn),jn.API.TTFFont=(function(){function n(i){var o;if(this.rawData=i,o=this.contents=new Eu(i),this.contents.pos=4,o.readString(4)==="ttcf")throw new Error("TTCF not supported.");o.pos=0,this.parse(),this.subset=new lv(this),this.registerTTF()}return n.open=function(i){return new n(i)},n.prototype.parse=function(){return this.directory=new $5(this.contents),this.head=new K5(this),this.name=new tv(this),this.cmap=new j2(this),this.toUnicode={},this.hhea=new Z5(this),this.maxp=new nv(this),this.hmtx=new iv(this),this.post=new Q5(this),this.os2=new J5(this),this.loca=new sv(this),this.glyf=new rv(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var i,o,s,u,f;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var v,h,b,x;for(x=[],v=0,h=(b=this.bbox).length;v<h;v++)i=b[v],x.push(Math.round(i*this.scaleFactor));return x}).call(this),this.stemV=0,this.post.exists?(s=255&(u=this.post.italic_angle),32768&(o=u>>16)&&(o=-(1+(65535^o))),this.italicAngle=+(o+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(f=this.familyClass)===1||f===2||f===3||f===4||f===5||f===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(i){var o;return((o=this.cmap.unicode)!=null?o.codeMap[i]:void 0)||0},n.prototype.widthOfGlyph=function(i){var o;return o=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(i).advance*o},n.prototype.widthOfString=function(i,o,s){var u,f,v,h;for(v=0,f=0,h=(i=""+i).length;0<=h?f<h:f>h;f=0<=h?++f:--f)u=i.charCodeAt(f),v+=this.widthOfGlyph(this.characterToGlyph(u))+s*(1e3/o)||0;return v*(o/1e3)},n.prototype.lineHeight=function(i,o){var s;return o==null&&(o=!1),s=o?this.lineGap:0,(this.ascender+s-this.decender)/1e3*i},n})();var pc,Eu=(function(){function n(i){this.data=i??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(i){return this.data[this.pos++]=i},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(i){return this.writeByte(i>>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt32=function(){var i;return(i=this.readUInt32())>=2147483648?i-4294967296:i},n.prototype.writeInt32=function(i){return i<0&&(i+=4294967296),this.writeUInt32(i)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(i){return this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt16=function(){var i;return(i=this.readUInt16())>=32768?i-65536:i},n.prototype.writeInt16=function(i){return i<0&&(i+=65536),this.writeUInt16(i)},n.prototype.readString=function(i){var o,s;for(s=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)s[o]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(i){var o,s,u;for(u=[],o=0,s=i.length;0<=s?o<s:o>s;o=0<=s?++o:--o)u.push(this.writeByte(i.charCodeAt(o)));return u},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(i){return this.writeInt16(i)},n.prototype.readLongLong=function(){var i,o,s,u,f,v,h,b;return i=this.readByte(),o=this.readByte(),s=this.readByte(),u=this.readByte(),f=this.readByte(),v=this.readByte(),h=this.readByte(),b=this.readByte(),128&i?-1*(72057594037927940*(255^i)+281474976710656*(255^o)+1099511627776*(255^s)+4294967296*(255^u)+16777216*(255^f)+65536*(255^v)+256*(255^h)+(255^b)+1):72057594037927940*i+281474976710656*o+1099511627776*s+4294967296*u+16777216*f+65536*v+256*h+b},n.prototype.writeLongLong=function(i){var o,s;return o=Math.floor(i/4294967296),s=4294967295&i,this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(i){return this.writeInt32(i)},n.prototype.read=function(i){var o,s;for(o=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)o.push(this.readByte());return o},n.prototype.write=function(i){var o,s,u,f;for(f=[],s=0,u=i.length;s<u;s++)o=i[s],f.push(this.writeByte(o));return f},n})(),$5=(function(){var n;function i(o){var s,u,f;for(this.scalarType=o.readInt(),this.tableCount=o.readShort(),this.searchRange=o.readShort(),this.entrySelector=o.readShort(),this.rangeShift=o.readShort(),this.tables={},u=0,f=this.tableCount;0<=f?u<f:u>f;u=0<=f?++u:--u)s={tag:o.readString(4),checksum:o.readInt(),offset:o.readInt(),length:o.readInt()},this.tables[s.tag]=s}return i.prototype.encode=function(o){var s,u,f,v,h,b,x,T,D,R,C,Z,O;for(O in C=Object.keys(o).length,b=Math.log(2),D=16*Math.floor(Math.log(C)/b),v=Math.floor(D/b),T=16*C-D,(u=new Eu).writeInt(this.scalarType),u.writeShort(C),u.writeShort(D),u.writeShort(v),u.writeShort(T),f=16*C,x=u.pos+f,h=null,Z=[],o)for(R=o[O],u.writeString(O),u.writeInt(n(R)),u.writeInt(x),u.writeInt(R.length),Z=Z.concat(R),O==="head"&&(h=x),x+=R.length;x%4;)Z.push(0),x++;return u.write(Z),s=2981146554-n(u.data),u.pos=h+8,u.writeUInt32(s),u.data},n=function(o){var s,u,f,v;for(o=k2.call(o);o.length%4;)o.push(0);for(f=new Eu(o),u=0,s=0,v=o.length;s<v;s=s+=4)u+=f.readUInt32();return 4294967295&u},i})(),X5={}.hasOwnProperty,Ec=function(n,i){for(var o in i)X5.call(i,o)&&(n[o]=i[o]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n};pc=(function(){function n(i){var o;this.file=i,o=this.file.directory.tables[this.tag],this.exists=!!o,o&&(this.offset=o.offset,this.length=o.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var K5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="head",n.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},n.prototype.encode=function(i){var o;return(o=new Eu).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(i),o.writeShort(this.glyphDataFormat),o.data},n})(),Cy=(function(){function n(i,o){var s,u,f,v,h,b,x,T,D,R,C,Z,O,P,H,ae,ce;switch(this.platformID=i.readUInt16(),this.encodingID=i.readShort(),this.offset=o+i.readInt(),D=i.pos,i.pos=this.offset,this.format=i.readUInt16(),this.length=i.readUInt16(),this.language=i.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(b=0;b<256;++b)this.codeMap[b]=i.readByte();break;case 4:for(C=i.readUInt16(),R=C/2,i.pos+=6,f=(function(){var q,se;for(se=[],b=q=0;0<=R?q<R:q>R;b=0<=R?++q:--q)se.push(i.readUInt16());return se})(),i.pos+=2,O=(function(){var q,se;for(se=[],b=q=0;0<=R?q<R:q>R;b=0<=R?++q:--q)se.push(i.readUInt16());return se})(),x=(function(){var q,se;for(se=[],b=q=0;0<=R?q<R:q>R;b=0<=R?++q:--q)se.push(i.readUInt16());return se})(),T=(function(){var q,se;for(se=[],b=q=0;0<=R?q<R:q>R;b=0<=R?++q:--q)se.push(i.readUInt16());return se})(),u=(this.length-i.pos+this.offset)/2,h=(function(){var q,se;for(se=[],b=q=0;0<=u?q<u:q>u;b=0<=u?++q:--q)se.push(i.readUInt16());return se})(),b=H=0,ce=f.length;H<ce;b=++H)for(P=f[b],s=ae=Z=O[b];Z<=P?ae<=P:ae>=P;s=Z<=P?++ae:--ae)T[b]===0?v=s+x[b]:(v=h[T[b]/2+(s-Z)-(R-b)]||0)!==0&&(v+=x[b]),this.codeMap[s]=65535&v}i.pos=D}return n.encode=function(i,o){var s,u,f,v,h,b,x,T,D,R,C,Z,O,P,H,ae,ce,q,se,X,_,E,V,$,k,S,J,re,ye,K,te,ge,je,be,F,A,M,B,de,Ae,Ee,Ge,Pe,nt,Ke,wt;switch(re=new Eu,v=Object.keys(i).sort(function(St,Bt){return St-Bt}),o){case"macroman":for(O=0,P=(function(){var St=[];for(Z=0;Z<256;++Z)St.push(0);return St})(),ae={0:0},f={},ye=0,je=v.length;ye<je;ye++)ae[Pe=i[u=v[ye]]]==null&&(ae[Pe]=++O),f[u]={old:i[u],new:ae[i[u]]},P[u]=ae[i[u]];return re.writeUInt16(1),re.writeUInt16(0),re.writeUInt32(12),re.writeUInt16(0),re.writeUInt16(262),re.writeUInt16(0),re.write(P),{charMap:f,subtable:re.data,maxGlyphID:O+1};case"unicode":for(S=[],D=[],ce=0,ae={},s={},H=x=null,K=0,be=v.length;K<be;K++)ae[se=i[u=v[K]]]==null&&(ae[se]=++ce),s[u]={old:se,new:ae[se]},h=ae[se]-u,H!=null&&h===x||(H&&D.push(H),S.push(u),x=h),H=u;for(H&&D.push(H),D.push(65535),S.push(65535),$=2*(V=S.length),E=2*Math.pow(Math.log(V)/Math.LN2,2),R=Math.log(E/2)/Math.LN2,_=2*V-E,b=[],X=[],C=[],Z=te=0,F=S.length;te<F;Z=++te){if(k=S[Z],T=D[Z],k===65535){b.push(0),X.push(0);break}if(k-(J=s[k].new)>=32768)for(b.push(0),X.push(2*(C.length+V-Z)),u=ge=k;k<=T?ge<=T:ge>=T;u=k<=T?++ge:--ge)C.push(s[u].new);else b.push(J-k),X.push(0)}for(re.writeUInt16(3),re.writeUInt16(1),re.writeUInt32(12),re.writeUInt16(4),re.writeUInt16(16+8*V+2*C.length),re.writeUInt16(0),re.writeUInt16($),re.writeUInt16(E),re.writeUInt16(R),re.writeUInt16(_),Ee=0,A=D.length;Ee<A;Ee++)u=D[Ee],re.writeUInt16(u);for(re.writeUInt16(0),Ge=0,M=S.length;Ge<M;Ge++)u=S[Ge],re.writeUInt16(u);for(nt=0,B=b.length;nt<B;nt++)h=b[nt],re.writeUInt16(h);for(Ke=0,de=X.length;Ke<de;Ke++)q=X[Ke],re.writeUInt16(q);for(wt=0,Ae=C.length;wt<Ae;wt++)O=C[wt],re.writeUInt16(O);return{charMap:s,subtable:re.data,maxGlyphID:ce+1}}},n})(),j2=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="cmap",n.prototype.parse=function(i){var o,s,u;for(i.pos=this.offset,this.version=i.readUInt16(),u=i.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=u?s<u:s>u;s=0<=u?++s:--s)o=new Cy(i,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},n.encode=function(i,o){var s,u;return o==null&&(o="macroman"),s=Cy.encode(i,o),(u=new Eu).writeUInt16(0),u.writeUInt16(1),s.table=u.data.concat(s.subtable),s},n})(),Z5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="hhea",n.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},n})(),J5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="OS/2",n.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=(function(){var o,s;for(s=[],o=0;o<10;++o)s.push(i.readByte());return s})(),this.charRange=(function(){var o,s;for(s=[],o=0;o<4;++o)s.push(i.readInt());return s})(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=(function(){var o,s;for(s=[],o=0;o<2;o=++o)s.push(i.readInt());return s})(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},n})(),Q5=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="post",n.prototype.parse=function(i){var o,s,u;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:case 196608:break;case 131072:var f;for(s=i.readUInt16(),this.glyphNameIndex=[],f=0;0<=s?f<s:f>s;f=0<=s?++f:--f)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],u=[];i.pos<this.offset+this.length;)o=i.readByte(),u.push(this.names.push(i.readString(o)));return u;case 151552:return s=i.readUInt16(),this.offsets=i.read(s);case 262144:return this.map=(function(){var v,h,b;for(b=[],f=v=0,h=this.file.maxp.numGlyphs;0<=h?v<h:v>h;f=0<=h?++v:--v)b.push(i.readUInt32());return b}).call(this)}},n})(),ev=function(n,i){this.raw=n,this.length=n.length,this.platformID=i.platformID,this.encodingID=i.encodingID,this.languageID=i.languageID},tv=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="name",n.prototype.parse=function(i){var o,s,u,f,v,h,b,x,T,D,R;for(i.pos=this.offset,i.readShort(),o=i.readShort(),h=i.readShort(),s=[],f=0;0<=o?f<o:f>o;f=0<=o?++f:--f)s.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+h+i.readShort()});for(b={},f=T=0,D=s.length;T<D;f=++T)u=s[f],i.pos=u.offset,x=i.readString(u.length),v=new ev(x,u),b[R=u.nameID]==null&&(b[R]=[]),b[u.nameID].push(v);this.strings=b,this.copyright=b[0],this.fontFamily=b[1],this.fontSubfamily=b[2],this.uniqueSubfamily=b[3],this.fontName=b[4],this.version=b[5];try{this.postscriptName=b[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=b[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=b[7],this.manufacturer=b[8],this.designer=b[9],this.description=b[10],this.vendorUrl=b[11],this.designerUrl=b[12],this.license=b[13],this.licenseUrl=b[14],this.preferredFamily=b[15],this.preferredSubfamily=b[17],this.compatibleFull=b[18],this.sampleText=b[19]},n})(),nv=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="maxp",n.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},n})(),iv=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="hmtx",n.prototype.parse=function(i){var o,s,u,f,v,h,b;for(i.pos=this.offset,this.metrics=[],o=0,h=this.file.hhea.numberOfMetrics;0<=h?o<h:o>h;o=0<=h?++o:--o)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var x,T;for(T=[],o=x=0;0<=u?x<u:x>u;o=0<=u?++x:--x)T.push(i.readInt16());return T})(),this.widths=(function(){var x,T,D,R;for(R=[],x=0,T=(D=this.metrics).length;x<T;x++)f=D[x],R.push(f.advance);return R}).call(this),s=this.widths[this.widths.length-1],b=[],o=v=0;0<=u?v<u:v>u;o=0<=u?++v:--v)b.push(this.widths.push(s));return b},n.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},n})(),k2=[].slice,rv=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(i){var o,s,u,f,v,h,b,x,T,D;return i in this.cache?this.cache[i]:(f=this.file.loca,o=this.file.contents,s=f.indexOf(i),(u=f.lengthOf(i))===0?this.cache[i]=null:(o.pos=this.offset+s,v=(h=new Eu(o.read(u))).readShort(),x=h.readShort(),D=h.readShort(),b=h.readShort(),T=h.readShort(),this.cache[i]=v===-1?new av(h,x,D,b,T):new ov(h,v,x,D,b,T),this.cache[i]))},n.prototype.encode=function(i,o,s){var u,f,v,h,b;for(v=[],f=[],h=0,b=o.length;h<b;h++)u=i[o[h]],f.push(v.length),u&&(v=v.concat(u.encode(s)));return f.push(v.length),{table:v,offsets:f}},n})(),ov=(function(){function n(i,o,s,u,f,v){this.raw=i,this.numberOfContours=o,this.xMin=s,this.yMin=u,this.xMax=f,this.yMax=v,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),av=(function(){function n(i,o,s,u,f){var v,h;for(this.raw=i,this.xMin=o,this.yMin=s,this.xMax=u,this.yMax=f,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],v=this.raw;h=v.readShort(),this.glyphOffsets.push(v.pos),this.glyphIDs.push(v.readUInt16()),32&h;)v.pos+=1&h?4:2,128&h?v.pos+=8:64&h?v.pos+=4:8&h&&(v.pos+=2)}return n.prototype.encode=function(){var i,o,s;for(o=new Eu(k2.call(this.raw.data)),i=0,s=this.glyphIDs.length;i<s;++i)o.pos=this.glyphOffsets[i];return o.data},n})(),sv=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ec(n,pc),n.prototype.tag="loca",n.prototype.parse=function(i){var o,s;return i.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?(function(){var u,f;for(f=[],s=0,u=this.length;s<u;s+=2)f.push(2*i.readUInt16());return f}).call(this):(function(){var u,f;for(f=[],s=0,u=this.length;s<u;s+=4)f.push(i.readUInt32());return f}).call(this)},n.prototype.indexOf=function(i){return this.offsets[i]},n.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},n.prototype.encode=function(i,o){for(var s=new Uint32Array(this.offsets.length),u=0,f=0,v=0;v<s.length;++v)if(s[v]=u,f<o.length&&o[f]==v){++f,s[v]=u;var h=this.offsets[v],b=this.offsets[v+1]-h;b>0&&(u+=b)}for(var x=new Array(4*s.length),T=0;T<s.length;++T)x[4*T+3]=255&s[T],x[4*T+2]=(65280&s[T])>>8,x[4*T+1]=(16711680&s[T])>>16,x[4*T]=(4278190080&s[T])>>24;return x},n})(),lv=(function(){function n(i){this.font=i,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var i,o,s,u,f;for(o in u=this.font.cmap.tables[0].codeMap,i={},f=this.subset)s=f[o],i[o]=u[s];return i},n.prototype.glyphsFor=function(i){var o,s,u,f,v,h,b;for(u={},v=0,h=i.length;v<h;v++)u[f=i[v]]=this.font.glyf.glyphFor(f);for(f in o=[],u)(s=u[f])!=null&&s.compound&&o.push.apply(o,s.glyphIDs);if(o.length>0)for(f in b=this.glyphsFor(o))s=b[f],u[f]=s;return u},n.prototype.encode=function(i,o){var s,u,f,v,h,b,x,T,D,R,C,Z,O,P,H;for(u in s=j2.encode(this.generateCmap(),"unicode"),v=this.glyphsFor(i),C={0:0},H=s.charMap)C[(b=H[u]).old]=b.new;for(Z in R=s.maxGlyphID,v)Z in C||(C[Z]=R++);return T=(function(ae){var ce,q;for(ce in q={},ae)q[ae[ce]]=ce;return q})(C),D=Object.keys(T).sort(function(ae,ce){return ae-ce}),O=(function(){var ae,ce,q;for(q=[],ae=0,ce=D.length;ae<ce;ae++)h=D[ae],q.push(T[h]);return q})(),f=this.font.glyf.encode(v,O,C),x=this.font.loca.encode(f.offsets,O),P={cmap:this.font.cmap.raw(),glyf:f.table,loca:x,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(o)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},n})();jn.API.PDFObject=(function(){var n;function i(){}return n=function(o,s){return(Array(s+1).join("0")+o).slice(-s)},i.convert=function(o){var s,u,f,v;if(Array.isArray(o))return"["+(function(){var h,b,x;for(x=[],h=0,b=o.length;h<b;h++)s=o[h],x.push(i.convert(s));return x})().join(" ")+"]";if(typeof o=="string")return"/"+o;if(o?.isString)return"("+o+")";if(o instanceof Date)return"(D:"+n(o.getUTCFullYear(),4)+n(o.getUTCMonth(),2)+n(o.getUTCDate(),2)+n(o.getUTCHours(),2)+n(o.getUTCMinutes(),2)+n(o.getUTCSeconds(),2)+"Z)";if({}.toString.call(o)==="[object Object]"){for(u in f=["<<"],o)v=o[u],f.push("/"+u+" "+i.convert(v));return f.push(">>"),f.join(`
`)}return""+o},i})();const y0=n=>{const i=of[n];return!i||!i.prefix||i.prefix.length<1?"?":i.prefix[0].substring(0,1).toUpperCase()},Kl=(n,i,o)=>({color:i,size:o}),Ty=(n,i,o)=>{},go=(n,i,o,s)=>({color:o,size:s}),Bf=(n,i,o,s)=>{},cv=()=>{const n=new Map,i={top:"#0072B2",bottom:"#56B4E9"},o={top:18,bottom:18},s={top:"#FFFF00",bottom:"#FFFF00"},u={top:18,bottom:18},f={top:"#AA4499",bottom:"#F781BF"},v={top:6,bottom:6},h={top:"#6A3D9A",bottom:"#9467BD"},b={top:18,bottom:18};return n.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:Kl("select","#ff0000",10),layerSettings:new Map([["top",go("select","top","#ff0000",10)],["bottom",go("select","bottom","#ff0000",10)]])}),n.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:Kl("via",Uh,Hh.DEFAULT_SIZE),layerSettings:new Map([["top",go("via","top",Uh,Hh.DEFAULT_SIZE)],["bottom",go("via","bottom",Uh,Hh.DEFAULT_SIZE)]]),defaultLayer:"top"}),n.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:Kl("pad",Wm,18),layerSettings:new Map([["top",go("pad","top",i.top,o.top)],["bottom",go("pad","bottom",i.bottom,o.bottom)]]),defaultLayer:"top"}),n.set("testPoint",{id:"testPoint",name:"Test Point",toolType:"draw",drawingMode:"testPoint",icon:"",shortcut:"Y",tooltip:"Place test point",colorReflective:!0,settings:Kl("testPoint","#FFFF00",18),layerSettings:new Map([["top",go("testPoint","top",s.top,u.top)],["bottom",go("testPoint","bottom",s.bottom,u.bottom)]]),defaultLayer:"top"}),n.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:Kl("trace",Hm,6),layerSettings:new Map([["top",go("trace","top",f.top,v.top)],["bottom",go("trace","bottom",f.bottom,v.bottom)]]),defaultLayer:"top"}),n.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:Kl("component",Vm,$p.DEFAULT_SIZE),layerSettings:new Map([["top",go("component","top",h.top,b.top)],["bottom",go("component","bottom",h.bottom,b.bottom)]]),defaultLayer:"top"}),n.set("componentConnection",{id:"componentConnection",name:"Component Connections",toolType:"componentConnection",icon:"",shortcut:"",tooltip:"Component connection lines",colorReflective:!1,settings:Kl("componentConnection","#E69F00",3),layerSettings:new Map([["top",go("componentConnection","top","#E69F00",3)],["bottom",go("componentConnection","bottom","#E69F00",3)]])}),n.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:Kl("power",qh,18),layerSettings:new Map([["top",go("power","top",qh,18)],["bottom",go("power","bottom",qh,18)]]),defaultLayer:"top"}),n.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:Kl("ground",Fh,18),layerSettings:new Map([["top",go("ground","top",Fh,18)],["bottom",go("ground","bottom",Fh,18)]]),defaultLayer:"top"}),n.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:Kl("erase","#f5a3b3",18),layerSettings:new Map([["top",go("erase","top","#f5a3b3",18)],["bottom",go("erase","bottom","#f5a3b3",18)]])}),n.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:Kl("pan","#ff0000",10),layerSettings:new Map([["top",go("pan","top","#ff0000",10)],["bottom",go("pan","bottom","#ff0000",10)]])}),n.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"M",tooltip:"Magnify",colorReflective:!1,settings:Kl("magnify","#ff0000",10),layerSettings:new Map([["top",go("magnify","top","#ff0000",10)],["bottom",go("magnify","bottom","#ff0000",10)]])}),n},jy={via:{color:"#2CA02C",size:18},padTop:{color:"#0072B2",size:18},padBottom:{color:"#56B4E9",size:18},testPointTop:{color:"#FFFF00",size:18},testPointBottom:{color:"#FFFF00",size:18},traceTop:{color:"#AA4499",size:6},traceBottom:{color:"#F781BF",size:6},componentTop:{color:"#6A3D9A",size:18},componentBottom:{color:"#9467BD",size:18},power:{color:"#ff0000",size:18},ground:{color:"#000000",size:18}},Ed={via:"Via",padTop:"Pad (Top)",padBottom:"Pad (Bottom)",testPointTop:"Test Point (Top)",testPointBottom:"Test Point (Bottom)",traceTop:"Trace (Top)",traceBottom:"Trace (Bottom)",componentTop:"Component (Top)",componentBottom:"Component (Bottom)",power:"Power",ground:"Ground"};class uv{instances=new Map;listeners=new Map;initialize(){for(const i of Object.keys(jy)){const o=jy[i];this.instances.set(i,{id:i,name:Ed[i],color:o.color,size:o.size}),this.listeners.set(i,new Set)}}initializeFromProject(i){if(this.initialize(),i?.toolInstances)for(const[o,s]of Object.entries(i.toolInstances))this.instances.has(o)&&this.instances.set(o,s)}get(i){const o=this.instances.get(i);if(!o)throw new Error(`Tool instance ${i} not found`);return o}getColor(i){const o=this.instances.get(i);if(!o)throw new Error(`Tool instance ${i} not found`);const s=Ed[i];return console.log(`${s}, returning color value=${o.color}`),o.color}getSize(i){const o=this.instances.get(i);if(!o)throw new Error(`Tool instance ${i} not found`);const s=Ed[i];return console.log(`${s}, returning size value=${o.size}`),o.size}setColor(i,o){const s=this.instances.get(i);if(s){const u=Ed[i];console.log(`${u}, setting color value=${o}`),s.color=o,this.notifyListeners(i)}}setSize(i,o){const s=this.instances.get(i);if(s){const u=Ed[i];console.log(`${u}, setting size value=${o}`),s.size=o,this.notifyListeners(i)}}getAll(){const i={};for(const[o,s]of this.instances.entries())i[o]=s;return i}subscribe(i,o){const s=this.listeners.get(i);return s?(s.add(o),()=>{s.delete(o)}):()=>{}}notifyListeners(i){const o=this.listeners.get(i);o&&o.forEach(s=>s())}}const Kn=new uv;Kn.initialize();function Rp(n,i){switch(n){case"via":return"via";case"pad":return i==="bottom"?"padBottom":"padTop";case"testPoint":return i==="bottom"?"testPointBottom":"testPointTop";case"trace":return i==="bottom"?"traceBottom":"traceTop";case"component":return i==="bottom"?"componentBottom":"componentTop";case"power":return"power";case"ground":return"ground";default:throw new Error(`Unknown tool: ${n}`)}}const fv=({visible:n,toolRegistry:i,currentTool:o,drawingMode:s,traceToolLayer:u,padToolLayer:f,testPointToolLayer:v,componentToolLayer:h,updateToolSettings:b,updateToolLayerSettings:x,setBrushSize:T,saveToolSettings:D,saveToolLayerSettings:R,setTopTraceSize:C,setBottomTraceSize:Z,setTopPadSize:O,setBottomPadSize:P,setTopTestPointSize:H,setBottomTestPointSize:ae,setTopComponentSize:ce,setBottomComponentSize:q,setComponentConnectionSize:se,saveDefaultSize:X,onClose:_})=>{const[E,V]=U.useState({}),$=[{id:"via",name:"Via",instanceId:"via"},{id:"pad",name:"Pad",layer:"top",instanceId:"padTop"},{id:"pad",name:"Pad",layer:"bottom",instanceId:"padBottom"},{id:"testPoint",name:"Test Point",layer:"top",instanceId:"testPointTop"},{id:"testPoint",name:"Test Point",layer:"bottom",instanceId:"testPointBottom"},{id:"trace",name:"Trace",layer:"top",instanceId:"traceTop"},{id:"trace",name:"Trace",layer:"bottom",instanceId:"traceBottom"},{id:"component",name:"Component",layer:"top",instanceId:"componentTop"},{id:"component",name:"Component",layer:"bottom",instanceId:"componentBottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power",instanceId:"power"},{id:"ground",name:"Ground",instanceId:"ground"},{id:"erase",name:"Erase"}];U.useEffect(()=>{if(n){const J={};for(const re of $){const ye=re.instanceId||re.id;if(re.instanceId)try{const K=Kn.get(re.instanceId);J[ye]=K.size}catch{const K=i.get(re.id);K&&(J[ye]=re.layer?K.layerSettings.get(re.layer)?.size??K.settings.size??10:K.settings.size??10)}else{const K=i.get(re.id);K&&(J[ye]=K.settings.size??10)}}V(J)}},[n]);const k=U.useCallback((J,re,ye,K)=>{if(!i.get(J)&&J!=="componentConnection")return;const ge=K||J;V(be=>({...be,[ge]:re})),["trace","pad","testPoint","component"].includes(J)&&ye&&K?(Kn.setSize(K,re),(J==="trace"&&o==="draw"&&s==="trace"||J==="pad"&&o==="draw"&&s==="pad"||J==="testPoint"&&o==="draw"&&s==="testPoint"||J==="component"&&o==="component")&&((J==="trace"?u:J==="pad"?f:J==="testPoint"?v:h)||"top")===ye&&T(re)):K?(Kn.setSize(K,re),(J==="via"&&o==="draw"&&s==="via"||J==="power"&&o==="power"||J==="ground"&&o==="ground")&&T(re)):(J==="componentConnection"&&(se(re),X("componentConnection",re)),J==="erase"&&o==="erase"&&T(re))},[i,o,s,u,f,v,h,T,se,X]);if(!n)return null;const S=Array.from({length:50},(J,re)=>re+1);return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:J=>{J.target===J.currentTarget&&_()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",maxWidth:"400px",maxHeight:"85vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:J=>J.stopPropagation(),children:[a.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Size"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:$.map((J,re)=>{if(!i.get(J.id)&&J.id!=="componentConnection")return null;const K=J.layer?`${J.name} (${J.layer==="top"?"Top":"Bottom"})`:J.name,te=J.instanceId||J.id,ge=E[te]??10;return a.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[a.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[K,":"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[a.jsx("select",{value:ge,onChange:je=>{const be=parseInt(je.target.value,10);k(J.id,be,J.layer,J.instanceId)},style:{width:"50px",padding:"4px 6px",background:"#2b2b31",border:"1px solid #3a3a44",borderRadius:4,color:"#f2f2f2",fontSize:"12px",cursor:"pointer"},children:S.map(je=>a.jsx("option",{value:je,style:{background:"#2b2b31",color:"#f2f2f2"},children:je},je))}),a.jsx("span",{style:{color:"#f2f2f2",fontSize:"12px"},children:"px"})]})]},`${J.id}-${J.layer||"default"}-${re}`)})}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:a.jsx("button",{onClick:_,style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},dv=({visible:n,toolRegistry:i,currentTool:o,drawingMode:s,traceToolLayer:u,padToolLayer:f,testPointToolLayer:v,componentToolLayer:h,updateToolSettings:b,updateToolLayerSettings:x,saveToolSettings:T,saveToolLayerSettings:D,setBrushColor:R,setTopTraceColor:C,setBottomTraceColor:Z,setTopPadColor:O,setBottomPadColor:P,setTopTestPointColor:H,setBottomTestPointColor:ae,setTopComponentColor:ce,setBottomComponentColor:q,setComponentConnectionColor:se,saveDefaultColor:X,colorPalette:_,onClose:E})=>{const[V,$]=Nt.useState(null),[k,S]=Nt.useState(0);if(Nt.useEffect(()=>{const te=[];return[{id:"via"},{id:"pad",layer:"top"},{id:"pad",layer:"bottom"},{id:"testPoint",layer:"top"},{id:"testPoint",layer:"bottom"},{id:"trace",layer:"top"},{id:"trace",layer:"bottom"},{id:"component",layer:"top"},{id:"component",layer:"bottom"},{id:"power"},{id:"ground"}].forEach(({id:je,layer:be})=>{try{const F=Rp(je,be),A=Kn.subscribe(F,()=>{S(M=>M+1)});te.push(A)}catch{}}),()=>{te.forEach(je=>je())}},[]),!n)return null;const J=["pad","testPoint","trace","component"],re=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],ye=(te,ge,je)=>{if(te==="componentConnection"){se(ge),X("componentConnection",ge),$(null);return}if(te==="erase"){const be=i.get(te);be&&(b(te,{...be.settings,color:ge}),T(te,ge,be.settings.size)),$(null);return}try{let be;je&&J.includes(te)?be=Rp(te,je):be=Rp(te),Kn.setColor(be,ge),(te==="via"&&o==="draw"&&s==="via"||te==="trace"&&o==="draw"&&s==="trace"||te==="pad"&&o==="draw"&&s==="pad"||te==="testPoint"&&o==="draw"&&s==="testPoint"||te==="component"&&o==="component"||te==="power"&&o==="power"||te==="ground"&&o==="ground")&&(je&&J.includes(te)?((te==="trace"?u:te==="pad"?f:te==="testPoint"?v:h)||"top")===je&&R(ge):R(ge))}catch(be){console.error(`Error updating color for tool ${te}:`,be);const F=i.get(te);F&&(je&&J.includes(te)?(x(te,je,{...F.layerSettings.get(je),color:ge}),D(te,je,ge,F.layerSettings.get(je)?.size||F.settings.size)):(b(te,{...F.settings,color:ge}),T(te,ge,F.settings.size)))}$(null)},K=(te,ge)=>{let je;try{const A=Rp(te,ge);je=Kn.get(A).color}catch{const A=i.get(te);if(!A)return null;je=A.settings.color??"#000000"}const be=ge?`${te}-${ge}`:te,F=V?.toolId===te&&V?.layer===ge;return a.jsxs("div",{style:{position:"relative",display:"inline-block",zIndex:10005},children:[a.jsx("button",{className:"color-swatch-button",onClick:A=>{A.stopPropagation(),$(F?null:{toolId:te,layer:ge})},style:{width:"40px",height:"24px",background:je,backgroundColor:je,backgroundImage:"none",border:"1px solid #3a3a44",borderRadius:3,cursor:"pointer",padding:0,margin:0,display:"block","--swatch-color":je},title:je},`${be}-button-${je}-${k}`),F&&a.jsx("div",{onClick:A=>{A.stopPropagation()},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:100},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:_.map(A=>a.jsx("div",{onClick:()=>ye(te,A,ge),title:A,style:{width:22,height:22,backgroundColor:A,border:A===je?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},A))})})]},`${be}-${je}-${k}`)};return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:te=>{te.target===te.currentTarget&&(E(),$(null))},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",minWidth:"450px",maxWidth:"600px",maxHeight:"85vh",overflowY:"auto",overflowX:"visible",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:te=>te.stopPropagation(),children:[a.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Color"}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:re.map((te,ge)=>{if(!i.get(te.id))return null;const be=te.layer?`${te.name} (${te.layer==="top"?"Top":"Bottom"})`:te.name;return a.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[a.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[be,":"]}),K(te.id,te.layer)]},`${te.id}-${te.layer||"default"}-${ge}`)})}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:a.jsx("button",{onClick:()=>{E(),$(null)},style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},pv=({openMenu:n,setOpenMenu:i,isReadOnlyMode:o,currentProjectFilePath:s,isProjectActive:u,autoSaveEnabled:f,autoSaveInterval:v,hasUnsavedChangesState:h,onNewProject:b,onOpenProject:x,onSaveProject:T,onPrint:D,onExportBOM:R,hasUnsavedChanges:C,bomExportFormat:Z,setBomExportFormat:O,setNewProjectDialog:P,setAutoSaveDialog:H,topImage:ae,bottomImage:ce,setCurrentTool:q,resetImageTransform:se,areImagesLocked:X,setAreImagesLocked:_,onEnterBoardDimensions:E,fileInputTopRef:V,fileInputBottomRef:$,openProjectRef:k,increaseSize:S,decreaseSize:J,brushSize:re,drawingStrokes:ye,selectedIds:K,selectedComponentIds:te,selectedPowerIds:ge,selectedGroundIds:je,componentsTop:be,componentsBottom:F,powers:A,grounds:M,powerNodeNames:B,groundNodeNames:de,setSetSizeDialog:Ae,areViasLocked:Ee,setAreViasLocked:Ge,arePadsLocked:Pe,setArePadsLocked:nt,areTestPointsLocked:Ke,setAreTestPointsLocked:wt,areTracesLocked:St,setAreTracesLocked:Bt,areComponentsLocked:pe,setAreComponentsLocked:_t,areGroundNodesLocked:pn,setAreGroundNodesLocked:Zt,arePowerNodesLocked:dt,setArePowerNodesLocked:Qt,showTraceCornerDots:Et,setShowTraceCornerDots:vn,setSelectedIds:Jt,setSelectedComponentIds:Wn,setSelectedPowerIds:kt,setSelectedGroundIds:Pt,selectAllVias:fi,selectAllTraces:ut,selectAllPads:Ct,selectAllComponents:Mn,selectDisconnectedComponents:Gt,selectAllComponentConnections:Dn,selectAllPowerNodes:Nn,selectAllGroundNodes:en,selectPowerNodesByName:wn,selectGroundNodesByName:at,setShowPowerBusManager:$t,setShowGroundBusManager:Ft,setShowPastMachine:qt,toolRegistry:Sn,updateToolSettings:Oi,updateToolLayerSettings:In,setBrushSize:cn,setBrushColor:Ht,saveToolSettings:yo,saveToolLayerSettings:Wr,colorPalette:_o,currentTool:Lo,drawingMode:Vt,traceToolLayer:zo,padToolLayer:da,testPointToolLayer:Jo,componentToolLayer:bt,setTopTraceSize:ui,setBottomTraceSize:Jn,setTopPadSize:ur,setBottomPadSize:Hi,setTopTestPointSize:jr,setBottomTestPointSize:vi,setTopComponentSize:yi,setBottomComponentSize:mo,setComponentConnectionSize:Qo,topTraceColor:_a,bottomTraceColor:hl,topPadColor:La,bottomPadColor:za,topTestPointColor:ls,bottomTestPointColor:Yn,topComponentColor:Po,bottomComponentColor:Ti,setTopTraceColor:ea,setBottomTraceColor:Ln,setTopPadColor:_s,setBottomPadColor:Hn,setTopTestPointColor:ta,setBottomTestPointColor:pa,setTopComponentColor:Ls,setBottomComponentColor:zs,setComponentConnectionColor:Ks,saveDefaultSize:hc,saveDefaultColor:Xi,menuBarRef:Ps,onOpenProjectNotes:On,onOpenTransformImages:Bn,onOpenTransformAll:Ds})=>{const[Pa,Pr]=Nt.useState(null),xo=Nt.useRef(null),[tr,Un]=Nt.useState(null),di=Nt.useRef(null),[gl,Ml]=Nt.useState(!1),[ha,bo]=Nt.useState(!1),Es=At=>{if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),i(null);return}const Vi=At();Vi instanceof Promise&&Vi.catch(so=>{const Zs=so instanceof Error?so.message:String(so);console.error("Error in requireProject action:",so),alert(`An error occurred:

${Zs}

See console for details.`)})},Da=At=>{const Vi=At==="power"?B:de,so=Vi.length>0,Zs=At==="power"?"Select Power Nodes":"Select Ground Nodes";return a.jsxs("div",{onMouseEnter:()=>{xo.current&&(clearTimeout(xo.current),xo.current=null),Pr(At)},onMouseLeave:()=>{xo.current=window.setTimeout(()=>{Pr(Ea=>Ea===At?null:Ea)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[a.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[Zs," by Name"]}),a.jsxs("button",{onClick:()=>{At==="power"?Nn():en(),Pr(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",At==="power"?"Power Nodes":"Ground Nodes"]}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),so?Vi.map(Ea=>a.jsx("button",{onClick:()=>{At==="power"?wn(Ea):at(Ea),Pr(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:Ea},Ea)):a.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",At==="power"?"power":"ground"," nodes available."]})]})},vo=()=>a.jsxs("div",{onMouseEnter:()=>{di.current&&(clearTimeout(di.current),di.current=null),Un("lock")},onMouseLeave:()=>{di.current=window.setTimeout(()=>{Un(At=>At==="lock"?null:At)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[a.jsxs("label",{onClick:At=>{At.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:Ee,onChange:()=>{Ge(At=>!At)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Vias"})]}),a.jsxs("label",{onClick:At=>{At.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:Pe,onChange:()=>{nt(At=>!At)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Pads"})]}),a.jsxs("label",{onClick:At=>{At.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:Ke,onChange:()=>{wt(At=>!At)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Test Points"})]}),a.jsxs("label",{onClick:At=>{At.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:St,onChange:()=>{Bt(At=>!At)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Traces"})]}),a.jsxs("label",{onClick:At=>{At.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:pe,onChange:()=>{_t(At=>!At)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Components"})]}),a.jsxs("label",{onClick:At=>{At.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:pn,onChange:()=>{Zt(At=>!At)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Ground Node"})]}),a.jsxs("label",{onClick:At=>{At.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[a.jsx("input",{type:"checkbox",checked:dt,onChange:()=>{Qt(At=>!At)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),a.jsx("span",{children:"Lock Power Nodes"})]})]}),Vo=()=>a.jsxs("div",{onMouseEnter:()=>{di.current&&(clearTimeout(di.current),di.current=null),Un("select")},onMouseLeave:()=>{di.current=window.setTimeout(()=>{Un(At=>At==="select"?null:At)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[a.jsx("button",{onClick:()=>{fi(),Un(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Vias"}),a.jsx("button",{onClick:()=>{ut(),Un(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Traces"}),a.jsx("button",{onClick:()=>{Ct(),Un(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Pads"}),a.jsx("button",{onClick:()=>{const At=new Set(ye.filter(Vi=>Vi.type==="testPoint").map(Vi=>Vi.id));Jt(At),Wn(new Set),kt(new Set),Pt(new Set),Un(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Test Points"}),a.jsx("button",{onClick:()=>{Mn(),Un(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Components"}),a.jsx("button",{onClick:()=>{Dn(),Un(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Component Connections"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{xo.current&&(clearTimeout(xo.current),xo.current=null),Pr("power")},onMouseLeave:()=>{xo.current=window.setTimeout(()=>{Pr(At=>At==="power"?null:At)},200)},onClick:()=>{Pr(At=>At==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Power Nodes "}),Pa==="power"&&Da("power")]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{xo.current&&(clearTimeout(xo.current),xo.current=null),Pr("ground")},onMouseLeave:()=>{xo.current=window.setTimeout(()=>{Pr(At=>At==="ground"?null:At)},200)},onClick:()=>{Pr(At=>At==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Ground Nodes "}),Pa==="ground"&&Da("ground")]}),a.jsx("button",{onClick:()=>{Gt(),Un(null),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Disconnected Components"})]});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{ref:Ps,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:At=>{At.stopPropagation(),i(Vi=>Vi==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:n==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),n==="file"&&a.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[a.jsx("button",{onClick:()=>{o||(i(null),C()?P({visible:!0}):b())},disabled:o,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o?"not-allowed":"pointer"},children:"New Project"}),a.jsx("button",{onClick:async()=>{await x(),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{o||Es(()=>{T(),i(null)})},disabled:o||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||!u?"not-allowed":"pointer"},children:"Save Project"}),a.jsx("button",{onClick:()=>{o||Es(()=>{H({visible:!0,interval:5}),i(null)})},disabled:o||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||!u?"not-allowed":"pointer"},children:"Auto Save"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{qt(!0),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Restore from History"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:async()=>{if(!o){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),i(null);return}try{await R(),i(null)}catch(At){console.error("Error exporting BOM:",At)}}},disabled:o||!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||!u?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||!u?"not-allowed":"pointer"},children:"Export BOM"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{Es(()=>{D(),i(null)})},disabled:!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:u?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:u?"pointer":"not-allowed"},children:"Print"}),a.jsx("button",{onClick:()=>{Es(()=>{D(),i(null)})},disabled:!u,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:u?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:u?"pointer":"not-allowed"},children:"Printer Settings"})]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:At=>{if(!o){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature.");return}At.stopPropagation(),i(Vi=>Vi==="transform"?null:"transform")}},disabled:o||!u,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:n==="transform"?"#eef3ff":"#fff",fontWeight:600,color:o||!u?"#999":"#222",cursor:o||!u?"not-allowed":"pointer",opacity:o||!u?.5:1},children:"Images "}),n==="transform"&&a.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[a.jsx("button",{onClick:()=>{!o&&!X&&(V.current?.click(),i(null))},disabled:o||X,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||X?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||X?"not-allowed":"pointer"},children:"Load Top PCB"}),a.jsx("button",{onClick:()=>{!o&&!X&&($.current?.click(),i(null))},disabled:o||X,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:o||X?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:o||X?"not-allowed":"pointer"},children:"Load Bottom PCB"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{X||(E(),i(null))},disabled:X,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:X?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:X?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{Bn(),i(null)},disabled:!ae&&!ce||X,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!ae&&!ce||X?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!ae&&!ce||X?"not-allowed":"pointer"},children:"Transform Images"}),a.jsx("button",{onClick:()=>{X||(q("transform"),se(),i(null))},disabled:X||!ae&&!ce,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:X||!ae&&!ce?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:X||!ae&&!ce?"not-allowed":"pointer"},children:"Reset Transform"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{_(At=>!At),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:X?"Unlock Images ":"Lock Images"})]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:At=>{if(!o){if(!u){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature.");return}At.stopPropagation(),i(Vi=>Vi==="tools"?null:"tools")}},disabled:o||!u,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:n==="tools"?"#eef3ff":"#fff",fontWeight:600,color:o||!u?"#999":"#222",cursor:o||!u?"not-allowed":"pointer",opacity:o||!u?.5:1},children:"Tools "}),n==="tools"&&a.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[a.jsx("button",{onClick:()=>{Ds(),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Change Perspective"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{S(),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),a.jsx("button",{onClick:()=>{J(),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{di.current&&(clearTimeout(di.current),di.current=null),Un("lock")},onMouseLeave:()=>{di.current=window.setTimeout(()=>{Un(At=>At==="lock"?null:At)},200)},onClick:()=>{Un(At=>At==="lock"?null:"lock")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Lock "}),tr==="lock"&&vo()]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onMouseEnter:()=>{di.current&&(clearTimeout(di.current),di.current=null),Un("select")},onMouseLeave:()=>{di.current=window.setTimeout(()=>{Un(At=>At==="select"?null:At)},200)},onClick:()=>{Un(At=>At==="select"?null:"select")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select "}),tr==="select"&&Vo()]}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{On(),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Open Project Notes"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{Ml(!0),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Sizes"}),a.jsx("button",{onClick:()=>{bo(!0),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Colors"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsx("button",{onClick:()=>{$t(!0),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),a.jsx("button",{onClick:()=>{Ft(!0),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"}),a.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),a.jsxs("button",{onClick:()=>{vn(!Et),i(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:[Et?" ":"   ","Show Trace Corner Dots"]})]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:At=>{At.stopPropagation(),i(Vi=>Vi==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:n==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),n==="about"&&a.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:a.jsxs("div",{style:{marginBottom:16},children:[a.jsx("h2",{style:{margin:"0 0 16px 0",color:"#f2f2f2",fontSize:"20px",fontWeight:700},children:"PCB Tracer"}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"About"}),a.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool useful for both reverse engineering and troubleshooting electronics by tracing and documenting circuit connections from PCB images. This application supports typical 2 to 4 layer PCBs and enables comprehensive PCB analysis and documentation."}),a.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"This tool can assist in troubleshooting by tracing circuits, holding contextual notes, comparing test results, and documenting findings during the debugging process."})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Technology"}),a.jsx("p",{style:{margin:"0 0 12px 0",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:"The application runs entirely client-side in the browser, to provide a responsive, interactive drawing experience with no backend server requirements."})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Features"}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Tools & Shortcuts"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#f2f2f2"},children:[a.jsx("div",{children:a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Select"}),"  ",a.jsx("code",{children:"S"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Via"}),"  ",a.jsx("code",{children:"V"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Pad"}),"  ",a.jsx("code",{children:"P"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Test Point"}),"  ",a.jsx("code",{children:"Y"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Trace"}),"  ",a.jsx("code",{children:"T"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Component"}),"  ",a.jsx("code",{children:"C"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Component Properties"}),"  double-click component"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Resize Icons"}),"  ",a.jsx("code",{children:"+"})," / ",a.jsx("code",{children:"-"})]})]})}),a.jsx("div",{children:a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Power"}),"  ",a.jsx("code",{children:"B"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Ground"}),"  ",a.jsx("code",{children:"G"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Move (Pan)"}),"  ",a.jsx("code",{children:"H"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Magnify"}),"  ",a.jsx("code",{children:"M"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Set View"}),"  ",a.jsx("code",{children:"X"})," then ",a.jsx("code",{children:"0-9"})," to save view"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Recall View"}),"  ",a.jsx("code",{children:"0-9"})," to recall saved view"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Information Dialog"}),"  ",a.jsx("code",{children:"I"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Notes Dialog"}),"  ",a.jsx("code",{children:"N"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Project Notes / TODO"}),"  ",a.jsx("code",{children:"L"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Undo"}),"  ",a.jsx("code",{children:"Ctrl"})," + ",a.jsx("code",{children:"Z"})]})]})})]}),a.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#f2f2f2"},children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Arrow Keys"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components (1 unit per press, ",a.jsx("code",{children:"Shift"})," = 10 units)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Switch Perspective"}),"  ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," to switch between top/bottom view"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Rotate Perspective"}),"  ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," to rotate in 90 increments (",a.jsx("code",{children:""})," = counter-clockwise, ",a.jsx("code",{children:""})," = clockwise)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Image Transformations"}),"  Arrow keys for scaling, rotating, and adjusting image transformations (when image is selected for transform)"]}),a.jsx("li",{children:"Click a slider first, then use arrow keys for precise adjustment"})]})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 20px"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Image Management"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Load top and bottom PCB images"}),a.jsx("li",{children:"Image alignment and transformation"}),a.jsx("li",{children:"Transform modes: nudge, scale, rotate, slant, keystone"}),a.jsx("li",{children:"Horizontal and vertical flip controls"}),a.jsx("li",{children:"Brightness and contrast controls"}),a.jsx("li",{children:"Grayscale mode"}),a.jsx("li",{children:"Automated transparency slider"}),a.jsx("li",{children:"Board dimensions configuration"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Drawing Tools"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Draw copper traces (top and bottom layers)"}),a.jsx("li",{children:"Place vias for layer connections"}),a.jsx("li",{children:"Place component pads (SMD and through-hole)"}),a.jsx("li",{children:"Place test points for circuit testing"}),a.jsx("li",{children:"Place and annotate components"}),a.jsx("li",{children:"Place power and ground nodes"}),a.jsx("li",{children:"Erase tool for removing elements"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Layer Management"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"14 independent layers to manage PCB element types"}),a.jsx("li",{children:"Separate top and bottom layer support"}),a.jsx("li",{children:"Layer-specific color customization"}),a.jsx("li",{children:"Layer-specific size controls"}),a.jsx("li",{children:"Layer visibility toggles"}),a.jsx("li",{children:"Overlay view mode"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Component Management"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Component placement with pin counts"}),a.jsx("li",{children:"Pin connection tracking"}),a.jsx("li",{children:"Component type classification"}),a.jsx("li",{children:"Designator and value annotation"}),a.jsx("li",{children:"Component editor dialog"}),a.jsx("li",{children:"Find and center component"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Selection & Locking"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Select individual elements or groups"}),a.jsx("li",{children:"Select all vias, traces, pads, or components"}),a.jsx("li",{children:"Select power/ground nodes by name"}),a.jsx("li",{children:"Select disconnected components"}),a.jsx("li",{children:"Lock/unlock elements by type"}),a.jsx("li",{children:"Image locking for protection"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Power & Ground"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Multiple voltage power nodes"}),a.jsx("li",{children:"Power bus management"}),a.jsx("li",{children:"Ground node placement"}),a.jsx("li",{children:"Ground bus management"}),a.jsx("li",{children:"Node naming and organization"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Customization"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Customizable colors per layer"}),a.jsx("li",{children:"Adjustable brush/tool sizes"}),a.jsx("li",{children:"Size presets for common tools"}),a.jsx("li",{children:"Color palette management"}),a.jsx("li",{children:"Tool settings persistence"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"Project Management"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Create, open, and save projects"}),a.jsx("li",{children:"Auto-save with configurable intervals"}),a.jsx("li",{children:"File history automatically saved in history subdirectory when Auto Save is enabled"}),a.jsx("li",{children:"Project Notes / TODO list with spreadsheet-like editing"}),a.jsx("li",{children:"Project file format (JSON)"}),a.jsx("li",{children:"Print functionality"}),a.jsx("li",{children:"Export to KiCad schematic format (future feature, not yet implemented)"})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",color:"#f2f2f2",fontSize:"14px",fontWeight:600},children:"View Controls"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Zoom in/out with mouse wheel"}),a.jsx("li",{children:"Pan view with hand tool"}),a.jsx("li",{children:"Zoom to fit"}),a.jsx("li",{children:"View mode switching (top/bottom/overlay)"}),a.jsx("li",{children:"Save up to 10 view locations (X + 0-9)"}),a.jsx("li",{children:"Recall saved views instantly (0-9 keys)"}),a.jsx("li",{children:"Change Perspective (Tools menu) - switch between top/bottom view and rotate all elements"}),a.jsx("li",{children:"Detailed information dialog"})]})]})]})]}),a.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:a.jsxs("p",{style:{margin:"0 0 8px 0",color:"#bbb",fontSize:"12px",lineHeight:"1.5"},children:["Use the ",a.jsx("strong",{children:"File"})," menu to manage projects, the ",a.jsx("strong",{children:"Images"})," menu for image loading and transformation, and the ",a.jsx("strong",{children:"Tools"})," menu for selection, locking, and customization options."]})}),a.jsxs("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Future / TODO List"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"A searchable list of common components"}),a.jsx("li",{children:"Output schematics (perhaps as KiCad files)"}),a.jsx("li",{children:"Dynamic layers"}),a.jsx("li",{children:"Create a desktop version of this application using Electron"})]})]})]})})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:At=>{At.stopPropagation(),i(Vi=>Vi==="help"?null:"help")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:n==="help"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"Help "}),n==="help"&&a.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:a.jsxs("div",{style:{marginBottom:16},children:[a.jsx("h2",{style:{margin:"0 0 16px 0",color:"#f2f2f2",fontSize:"20px",fontWeight:700},children:"Help: Typical Usage Steps"}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 1: Create or Open a Project"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"New Project:"})," File  New Project. Choose a project name and location."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Open Project:"})," File  Open Project. Select an existing project file (.json)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Auto-Save:"})," File  Auto Save  Enable to automatically save your work at regular intervals."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 2: Load PCB Images"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Load Top Image:"})," Images  Load Top Image. Select your top-side PCB photo (.png or .jpeg)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Load Bottom Image:"})," Images  Load Bottom Image. Select your bottom-side PCB photo."]}),a.jsxs("li",{children:["Images are automatically copied to the ",a.jsx("code",{style:{background:"#1f1f24",padding:"2px 4px",borderRadius:3,color:"#fff"},children:"images/"})," subdirectory."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 3: Align and Transform Images"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Enter Transform Mode:"})," Images  Transform Images. Select which image (Top or Bottom) to transform."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Transform Operations:"})," Use Move, Nudge, Scale, Rotate, Slant, or Keystone to align images."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Image Adjustments:"})," Adjust brightness, contrast, sharpness, and grayscale as needed."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Flip Images:"})," Use horizontal or vertical flip if your images are mirrored."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Arrow Keys:"})," When transform tool is active, use arrow keys for precise image adjustments."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Move Components:"})," Select components, then use arrow keys to move them (1 unit per press, ",a.jsx("code",{children:"Shift"})," = 10 units for larger steps)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Change Perspective:"})," Tools  Change Perspective (or press ",a.jsx("code",{children:"E"}),") to switch between top/bottom view or rotate all elements (images, components, traces) together by 90, 180, or 270."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Quick Perspective Switch:"})," Press ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," to quickly switch between top/bottom view."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Quick Perspective Rotation:"})," Press ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," to rotate perspective in 90 increments (",a.jsx("code",{children:""})," = counter-clockwise, ",a.jsx("code",{children:""})," = clockwise)."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 4: Set Board Dimensions"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Enter Dimensions:"})," Images  Enter Board Dimensions. Specify the actual physical dimensions of your PCB."]}),a.jsx("li",{children:"This helps ensure accurate measurements and scaling for your reverse engineering work."})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 5: Trace Connections"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Place Vias:"})," Click the Via tool (",a.jsx("code",{children:"V"}),") and click on the PCB where vias connect layers."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Place Pads:"})," Click the Pad tool (",a.jsx("code",{children:"P"}),") and mark component pad locations."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Place Test Points:"})," Click the Test Point tool (",a.jsx("code",{children:"Y"}),") to mark test points."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Draw Traces:"})," Click the Trace tool (",a.jsx("code",{children:"T"}),"), select Top or Bottom layer, then click to start a trace. Click again to add segments. Press ",a.jsx("code",{children:"Enter"})," or click outside to finish."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Snapping:"})," Traces automatically snap to nearby vias, pads, power nodes, and ground nodes."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 6: Place Components"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Place Component:"})," Click the Component tool (",a.jsx("code",{children:"C"}),"), select component type, then click on the PCB."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Edit Component:"})," Double-click a component to open the Component Editor dialog."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Set Properties:"})," Enter designator (e.g., R1, C2), value, and other component details."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Connect Pins:"})," Click on pads or vias to connect component pins to the circuit."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 7: Add Power and Ground Nodes"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Manage Power Buses:"})," Tools  Manage Power Buses to create and configure voltage buses (e.g., +5V, +3.3V)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Place Power Nodes:"})," Click the Power tool (",a.jsx("code",{children:"B"}),"), select a voltage bus, then click on the PCB."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Manage Ground Buses:"})," Tools  Manage Ground Buses to configure ground connections."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Place Ground Nodes:"})," Click the Ground tool (",a.jsx("code",{children:"G"}),"), select a ground bus, then click on the PCB."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 8: Add Notes and Documentation"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Element Notes:"})," Press ",a.jsx("code",{children:"N"})," to open the Notes dialog for selected elements (vias, pads, traces, etc.)."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Project Notes:"})," Press ",a.jsx("code",{children:"L"})," to open Project Notes / TODO list for general project documentation."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Information Dialog:"})," Press ",a.jsx("code",{children:"I"})," to see detailed information about selected elements."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Find Elements:"})," Use the Find button in the Information dialog to center and highlight specific elements."]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Step 9: Save Your Work"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"14px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Manual Save:"})," File  Save Project to save your work manually."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Auto-Save:"})," If enabled, your project is automatically saved at regular intervals."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"History:"})," Auto-saved versions are stored in the ",a.jsx("code",{style:{background:"#1f1f24",padding:"2px 4px",borderRadius:3,color:"#fff"},children:"history/"})," subdirectory."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Restore from History:"})," File  Restore from History to access previous versions."]})]})]}),a.jsxs("div",{style:{marginBottom:20,paddingTop:16,borderTop:"1px solid #444"},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Keyboard Shortcuts"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#f2f2f2"},children:[a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Drawing Tools"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Select"}),"  ",a.jsx("code",{children:"S"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Via"}),"  ",a.jsx("code",{children:"V"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Pad"}),"  ",a.jsx("code",{children:"P"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Test Point"}),"  ",a.jsx("code",{children:"Y"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Trace"}),"  ",a.jsx("code",{children:"T"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Component"}),"  ",a.jsx("code",{children:"C"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Power"}),"  ",a.jsx("code",{children:"B"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Ground"}),"  ",a.jsx("code",{children:"G"})]})]})]}),a.jsxs("div",{children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"View & Navigation"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Move (Pan)"}),"  ",a.jsx("code",{children:"H"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Magnify"}),"  ",a.jsx("code",{children:"M"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Set View"}),"  ",a.jsx("code",{children:"X"})," then ",a.jsx("code",{children:"0-9"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Recall View"}),"  ",a.jsx("code",{children:"0-9"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Information"}),"  ",a.jsx("code",{children:"I"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Notes"}),"  ",a.jsx("code",{children:"N"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Project Notes"}),"  ",a.jsx("code",{children:"L"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Undo"}),"  ",a.jsx("code",{children:"Ctrl+Z"})," / ",a.jsx("code",{children:"Cmd+Z"})]})]})]})]}),a.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#f2f2f2"},children:[a.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600,color:"#f2f2f2"},children:"Arrow Keys"}),a.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components (1 unit per press, ",a.jsx("code",{children:"Shift"})," = 10 units)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Switch Perspective"}),"  ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Rotate Perspective"}),"  ",a.jsx("code",{children:"Shift"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," or ",a.jsx("code",{children:"Caps Lock"})," + ",a.jsx("code",{children:""})," / ",a.jsx("code",{children:""})," (",a.jsx("code",{children:""})," = counter-clockwise, ",a.jsx("code",{children:""})," = clockwise)"]}),a.jsx("li",{children:"Use arrow keys to adjust image transformations (when transform tool is active)"}),a.jsx("li",{children:"Click a slider first, then use arrow keys for precise adjustment"})]})]})]}),a.jsxs("div",{style:{marginBottom:20},children:[a.jsx("h3",{style:{margin:"0 0 10px 0",color:"#f2f2f2",fontSize:"16px",fontWeight:600},children:"Tips & Tricks"}),a.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#f2f2f2",fontSize:"13px",lineHeight:"1.6"},children:[a.jsx("li",{children:"Double-click any slider to reset it to the default value"}),a.jsx("li",{children:"Double-click a component to edit its properties"}),a.jsxs("li",{children:["Hold ",a.jsx("code",{children:"Shift"})," while clicking to add to selection"]}),a.jsxs("li",{children:["Use the Information dialog (",a.jsx("code",{children:"I"}),") to see details about selected elements"]}),a.jsx("li",{children:"Lock layers (Tools  Lock) to prevent accidental modifications"}),a.jsx("li",{children:"Use the Find button in the Information dialog to center elements in view"}),a.jsxs("li",{children:["Save views with ",a.jsx("code",{children:"X"})," + number key for quick navigation"]}),a.jsxs("li",{children:["Use ",a.jsx("code",{children:"+"})," and ",a.jsx("code",{children:"-"})," keys to resize tool icons"]})]})]}),a.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #444"},children:a.jsxs("p",{style:{margin:"0 0 8px 0",color:"#bbb",fontSize:"12px",lineHeight:"1.5"},children:["For more detailed feature information, see the ",a.jsx("strong",{children:"About"})," menu."]})})]})})]}),s&&a.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:s,children:s}),a.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"1px solid #666",backgroundColor:h?f?"#ffaa00":"#ff0000":"#00ff00",flexShrink:0},title:h?f?`Changes detected  Auto Save: ON  Will be saved automatically every ${v||1} minute${v===1?"":"s"}`:"Changes detected  Auto Save: OFF  You need to save manually (File  Save Project)":"Project saved  No unsaved changes  Auto Save: "+(f?"ON":"OFF")})]})]}),a.jsx(fv,{visible:gl,toolRegistry:Sn,currentTool:Lo,drawingMode:Vt,traceToolLayer:zo,padToolLayer:da,testPointToolLayer:Jo,componentToolLayer:bt,updateToolSettings:Oi,updateToolLayerSettings:In,setBrushSize:cn,saveToolSettings:yo,saveToolLayerSettings:Wr,setTopTraceSize:ui,setBottomTraceSize:Jn,setTopPadSize:ur,setBottomPadSize:Hi,setTopTestPointSize:jr,setBottomTestPointSize:vi,setTopComponentSize:yi,setBottomComponentSize:mo,setComponentConnectionSize:Qo,saveDefaultSize:hc,onClose:()=>Ml(!1)}),a.jsx(dv,{visible:ha,toolRegistry:Sn,currentTool:Lo,drawingMode:Vt,traceToolLayer:zo,padToolLayer:da,testPointToolLayer:Jo,componentToolLayer:bt,updateToolSettings:Oi,updateToolLayerSettings:In,saveToolSettings:yo,saveToolLayerSettings:Wr,setBrushColor:Ht,setTopTraceColor:ea,setBottomTraceColor:Ln,setTopPadColor:_s,setBottomPadColor:Hn,setTopTestPointColor:ta,setBottomTestPointColor:pa,setTopComponentColor:Ls,setBottomComponentColor:zs,setComponentConnectionColor:Ks,saveDefaultColor:Xi,colorPalette:_o,onClose:()=>bo(!1)})]})},hv=({visible:n})=>n?a.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.85)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[a.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Tracer"}),a.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Multilayer PCBs"}),a.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"1) Use the File menu to start a new project."}),a.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"2) Use the Images menu to load and align PCB photos."}),a.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5",textAlign:"left"},children:"3) Use the tools to draw vias, pads, traces, etc."}),a.jsx("div",{style:{fontSize:"13px",color:"#555",marginTop:"16px",lineHeight:"1.5",textAlign:"center",fontWeight:"bold"},children:"Best viewed in browser's Full Screen Mode"})]}):null,gv=({visible:n,title:i,message:o,onClose:s})=>n?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:u=>{u.target===u.currentTarget&&s()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:u=>u.stopPropagation(),children:[a.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[a.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),a.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:i})]}),a.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:o}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:a.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null;function Yf(n){if(!n)return;const i=n.componentDefinitionKey;if(i){const s=Ff.find(u=>`${u.category}:${u.subcategory}:${u.type}`===i);if(s)return s}if(typeof n.designator=="string"&&n.designator.trim()!==""){const s=n.designator.trim().match(/^[A-Za-z]+/),u=s?s[0]:null;if(u){const f=Ff.find(v=>Array.isArray(v.designators)&&v.designators.includes(u));if(f)return f}}const o=n.componentType==="Electrolytic Capacitor"||n.componentType==="Film Capacitor"?"Capacitor":n.componentType;return Ff.find(s=>{if(s.type!==o)return!1;if(s.category==="Capacitors"){const u=n.capacitorType||n.dielectric;return!!(u&&s.properties?.capacitorType===u||!u)}if(s.category==="Diodes"){const u=n.diodeType;return!!(u&&s.properties?.diodeType===u||!s.properties?.diodeType)}if(s.category==="Resistors"){const u=n.resistorType,f=n.vrType;return!!(u&&s.properties?.resistorType===u||f&&s.properties?.vrType===f||!s.properties?.resistorType&&!s.properties?.vrType)}if(s.category==="Semiconductors"){const u=n.semiconductorType;return!!(u&&s.properties?.semiconductorType===u||!s.properties?.semiconductorType)}if(s.category==="Passive Components"){const u=n.passiveType;return!!(u&&s.properties?.passiveType===u||!s.properties?.passiveType)}if(s.category==="Power & Energy"){const u=n.powerType;return!!(u&&s.properties?.powerType===u||!s.properties?.powerType)}if(s.category==="Connectors & Switches"){const u=n.connectorType,f=n.switchType;return!!(u&&s.properties?.connectorType===u||f&&s.properties?.switchType===f||!s.properties?.connectorType&&!s.properties?.switchType)}if(n.componentType==="GenericComponent"){const u=n.genericType;return!!(u&&s.subtype===u)}return!0})}const yv=({visible:n,selectedIds:i,selectedComponentIds:o,selectedPowerIds:s,selectedGroundIds:u,drawingStrokes:f,componentsTop:v,componentsBottom:h,powers:b,grounds:x,powerBuses:T,onClose:D,setComponentsTop:R,setComponentsBottom:C,determineViaType:Z,determinePadType:O,determineTestPointType:P,onFindComponent:H,onFindStroke:ae,onFindPower:ce,onFindGround:q,position:se,isDragging:X,onDragStart:_,onOpenNotesDialog:E})=>{if(!n)return null;const V=se?{position:"fixed",left:`${se.x}px`,top:`${se.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:X?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},$={padding:"20px",overflow:"auto",flex:1};return a.jsxs("div",{style:V,children:[a.jsxs("div",{onMouseDown:k=>{const S=k.target;S.tagName==="BUTTON"||S.closest("button")||se&&_(k)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:X?"grabbing":se?"grab":"default",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (I)"}),a.jsx("button",{onClick:D,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:$,children:a.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const k=f.filter(K=>i.has(K.id)).length,S=[...v,...h].filter(K=>o.has(K.id)).length,J=b.filter(K=>s.has(K.id)).length,re=x.filter(K=>u.has(K.id)).length,ye=k+S+J+re;return a.jsx("div",{style:{padding:"12px 16px",backgroundColor:ye>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:ye>0?"#333":"#856404",marginBottom:"8px"},children:ye>0?`${ye} Object${ye!==1?"s":""} Selected`:"Zero Objects Selected"})})(),o.size>0&&(()=>{const k=f.some(S=>i.has(S.id)&&(S.type==="via"||S.type==="pad"));return[...v,...h].filter(S=>o.has(S.id)).map(S=>{const J=Yf(S),re=J?.fields,ye=re&&re.length>0?a.jsx("div",{style:{marginTop:"6px",marginBottom:"6px",padding:"4px 0"},children:re.map(K=>{const te=S[K.name];if(te==null||te==="")return null;const ge=S[`${K.name}Unit`],je=typeof te=="boolean"?te?"Yes":"No":te;return a.jsxs("div",{style:{fontSize:"11px",color:"#444",marginBottom:"2px"},children:[K.label,": ",je,ge?` ${ge}`:""]},K.name)})}):a.jsx("div",{style:{padding:"6px 0",fontSize:"11px",color:"#856404",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:4,marginTop:"6px",marginBottom:"6px"},children:"Component definition missing for this instance. Please ensure componentDefinitions.json entry and componentDefinitionKey are set."});return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",flexDirection:"column",gap:"4px",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Category:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J?.category||"N/A"})]})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J?.displayName?S.componentType==="Capacitor"&&!J.displayName.toLowerCase().includes("capacitor")?`${J.displayName} Capacitor`:J.displayName:S.componentType==="GenericComponent"&&S.genericType?dl(S.genericType):S.componentType==="Diode"&&S.diodeType&&S.diodeType!=="Standard"?dl(S.diodeType):S.componentType==="VariableResistor"&&S.vrType&&S.vrType!=="Potentiometer"?dl(S.vrType):S.componentType==="Capacitor"&&S.dielectric==="Tantalum"?"Tantalum Capacitor":S.componentType==="Capacitor"&&S.capacitorType==="Electrolytic"?"Electrolytic Capacitor":S.componentType==="Capacitor"&&S.capacitorType==="Film"?"Film Capacitor":dl(S.componentType)})]}),H&&a.jsx("button",{onClick:()=>{H(S.id,S.x,S.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:K=>{K.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:K=>{K.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[ye,a.jsxs("div",{children:["Layer: ",S.layer]}),S.componentType==="IntegratedCircuit"&&a.jsxs(a.Fragment,{children:[S.description&&a.jsxs("div",{children:["Description: ",S.description]}),S.icType&&a.jsxs("div",{children:["IC Type: ",S.icType]})]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:S.notes||"",readOnly:!0,onClick:E,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsxs("span",{children:["Designator: ",S.designator||"(empty)"]}),k&&a.jsx("button",{onClick:()=>{const K=[...v,...h].filter(B=>o.has(B.id)&&B.componentType===S.componentType),te=K.length,ge=f.filter(B=>i.has(B.id)&&B.type==="pad"&&B.points.length>0&&B.points[0].id!==void 0).map(B=>{const de=B.points[0].id;if(de===void 0)throw new Error("Unexpected undefined id");return{stroke:B,nodeId:de}}).sort((B,de)=>B.nodeId-de.nodeId),je=ge.length>0?ge:f.filter(B=>i.has(B.id)&&B.type==="via"&&B.points.length>0&&B.points[0].id!==void 0).map(B=>{const de=B.points[0].id;if(de===void 0)throw new Error("Unexpected undefined id");return{stroke:B,nodeId:de}}).sort((B,de)=>B.nodeId-de.nodeId),be=je.length;if(be===0){console.warn("No vias or pads with Node IDs found in selection");return}const F=Math.floor(be/te);if(F===0){console.warn(`Not enough ${ge.length>0?"pads":"vias"} (${be}) for ${te} components`);return}[...K].sort((B,de)=>B.id.localeCompare(de.id)).forEach((B,de)=>{const Ae=de*F,Ee=Ae+F,Pe=je.slice(Ae,Ee).map(Ke=>Ke.nodeId.toString()),nt=b0(B,Pe,f);B.layer==="top"?R(Ke=>Ke.map(wt=>{if(wt.id===B.id){const St={...wt,pinCount:F,pinConnections:Pe};return nt&&(St.pinPolarities=nt),St}return wt})):C(Ke=>Ke.map(wt=>{if(wt.id===B.id){const St={...wt,pinCount:F,pinConnections:Pe};return nt&&(St.pinPolarities=nt),St}return wt}))});const M=ge.length>0?"pads":"vias";console.log(`Connected ${te} components of type ${S.componentType} to ${be} ${M} (${F} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:K=>{K.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:K=>{K.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:S.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:S.color})]}),a.jsxs("div",{children:["Size: ",S.size]}),a.jsxs("div",{children:["Pin Count: ",S.pinCount]}),S.componentType==="Resistor"&&a.jsxs(a.Fragment,{children:[S.resistance&&a.jsxs("div",{children:["Resistance: ",S.resistance]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]}),S.tolerance&&a.jsxs("div",{children:["Tolerance: ",S.tolerance]})]}),S.componentType==="Capacitor"&&a.jsxs(a.Fragment,{children:[S.capacitance&&a.jsxs("div",{children:["Capacitance: ",S.capacitance]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.dielectric&&a.jsxs("div",{children:["Dielectric: ",S.dielectric]}),S.tolerance&&a.jsxs("div",{children:["Tolerance: ",S.tolerance]})]}),S.componentType==="Electrolytic Capacitor"&&a.jsxs(a.Fragment,{children:[S.capacitance&&a.jsxs("div",{children:["Capacitance: ",S.capacitance]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.tolerance&&a.jsxs("div",{children:["Tolerance: ",S.tolerance]}),S.polarized!==void 0&&a.jsxs("div",{children:["Polarized: ",S.polarized?"Yes":"No"]}),S.esr&&a.jsxs("div",{children:["ESR: ",S.esr]}),S.temperature&&a.jsxs("div",{children:["Temperature: ",S.temperature]})]}),S.pinConnections&&S.pinConnections.length>0&&(()=>{const K=S.componentType==="Electrolytic Capacitor"||S.componentType==="Diode"||S.componentType==="Battery",te=S.componentType==="Capacitor"&&"dielectric"in S&&S.dielectric==="Tantalum",ge=K||te;return a.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[a.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),ge&&a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),a.jsx("tbody",{children:S.pinConnections.map((je,be)=>{const F=S.pinPolarities&&S.pinPolarities.length>be?S.pinPolarities[be]:"";return a.jsxs("tr",{style:{backgroundColor:be%2===0?"#fff":"#f9f9f9"},children:[a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:be+1}),ge&&a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:F==="+"?"#d32f2f":F==="-"?"#1976d2":"#999"},children:F||"-"}),a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:je||"(not connected)"})]},be)})})]})]})})(),"manufacturer"in S&&S.manufacturer&&a.jsxs("div",{children:["Manufacturer: ",S.manufacturer]}),"partNumber"in S&&S.partNumber&&a.jsxs("div",{children:["Part Number: ",S.partNumber]}),S.componentType==="Diode"&&a.jsxs(a.Fragment,{children:[S.diodeType&&a.jsxs("div",{children:["Type: ",S.diodeType]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]}),S.ledColor&&a.jsxs("div",{children:["LED Color: ",S.ledColor]})]}),S.componentType==="Battery"&&a.jsxs(a.Fragment,{children:[S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.capacity&&a.jsxs("div",{children:["Capacity: ",S.capacity]}),S.chemistry&&a.jsxs("div",{children:["Chemistry: ",S.chemistry]})]}),S.componentType==="Fuse"&&a.jsxs(a.Fragment,{children:[S.current&&a.jsxs("div",{children:["Current: ",S.current]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.fuseType&&a.jsxs("div",{children:["Type: ",S.fuseType]})]}),S.componentType==="FerriteBead"&&a.jsxs(a.Fragment,{children:[S.impedance&&a.jsxs("div",{children:["Impedance: ",S.impedance]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="Connector"&&a.jsxs(a.Fragment,{children:[S.connectorType&&a.jsxs("div",{children:["Type: ",S.connectorType]}),S.gender&&a.jsxs("div",{children:["Gender: ",S.gender]})]}),S.componentType==="Jumper"&&a.jsx(a.Fragment,{children:S.positions&&a.jsxs("div",{children:["Positions: ",S.positions]})}),S.componentType==="Relay"&&a.jsxs(a.Fragment,{children:[S.coilVoltage&&a.jsxs("div",{children:["Coil Voltage: ",S.coilVoltage]}),S.contactType&&a.jsxs("div",{children:["Contact Type: ",S.contactType]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="Inductor"&&a.jsxs(a.Fragment,{children:[S.inductance&&a.jsxs("div",{children:["Inductance: ",S.inductance]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]}),S.resistance&&a.jsxs("div",{children:["DC Resistance: ",S.resistance]})]}),S.componentType==="Speaker"&&a.jsxs(a.Fragment,{children:[S.impedance&&a.jsxs("div",{children:["Impedance: ",S.impedance]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]})]}),S.componentType==="Motor"&&a.jsxs(a.Fragment,{children:[S.motorType&&a.jsxs("div",{children:["Type: ",S.motorType]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="PowerSupply"&&a.jsxs(a.Fragment,{children:[S.inputVoltage&&a.jsxs("div",{children:["Input Voltage: ",S.inputVoltage]}),S.outputVoltage&&a.jsxs("div",{children:["Output Voltage: ",S.outputVoltage]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="Transistor"&&a.jsxs(a.Fragment,{children:[S.transistorType&&a.jsxs("div",{children:["Type: ",S.transistorType]}),S.polarized!==void 0&&a.jsxs("div",{children:["Polarized: ",S.polarized?"Yes":"No"]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]})]}),S.componentType==="ResistorNetwork"&&a.jsxs(a.Fragment,{children:[S.resistance&&a.jsxs("div",{children:["Resistance: ",S.resistance]}),S.configuration&&a.jsxs("div",{children:["Configuration: ",S.configuration]})]}),S.componentType==="Thermistor"&&a.jsxs(a.Fragment,{children:[S.resistance&&a.jsxs("div",{children:["Resistance: ",S.resistance]}),S.thermistorType&&a.jsxs("div",{children:["Type: ",S.thermistorType]}),S.beta&&a.jsxs("div",{children:["Beta: ",S.beta]})]}),S.componentType==="Switch"&&a.jsxs(a.Fragment,{children:[S.switchType&&a.jsxs("div",{children:["Type: ",S.switchType]}),S.current&&a.jsxs("div",{children:["Current: ",S.current]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage]})]}),S.componentType==="Transformer"&&a.jsxs(a.Fragment,{children:[S.primaryVoltage&&a.jsxs("div",{children:["Primary Voltage: ",S.primaryVoltage]}),S.secondaryVoltage&&a.jsxs("div",{children:["Secondary Voltage: ",S.secondaryVoltage]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]}),S.turns&&a.jsxs("div",{children:["Turns Ratio: ",S.turns]})]}),S.componentType==="TestPoint"&&a.jsx(a.Fragment,{children:S.signal&&a.jsxs("div",{children:["Signal: ",S.signal]})}),S.componentType==="IntegratedCircuit"&&a.jsx(a.Fragment,{children:S.datasheet&&a.jsxs("div",{children:["Datasheet: ",a.jsx("a",{href:S.datasheet,target:"_blank",rel:"noopener noreferrer",children:S.datasheet})]})}),S.componentType==="VacuumTube"&&a.jsx(a.Fragment,{children:S.tubeType&&a.jsxs("div",{children:["Type: ",S.tubeType]})}),S.componentType==="VariableResistor"&&a.jsxs(a.Fragment,{children:[S.vrType&&a.jsxs("div",{children:["Type: ",S.vrType]}),S.resistance&&a.jsxs("div",{children:["Resistance: ",S.resistance]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]}),S.taper&&a.jsxs("div",{children:["Taper: ",S.taper]})]}),S.componentType==="Crystal"&&a.jsxs(a.Fragment,{children:[S.frequency&&a.jsxs("div",{children:["Frequency: ",S.frequency]}),S.loadCapacitance&&a.jsxs("div",{children:["Load Capacitance: ",S.loadCapacitance]}),S.tolerance&&a.jsxs("div",{children:["Tolerance: ",S.tolerance]})]}),S.componentType==="GenericComponent"&&a.jsxs(a.Fragment,{children:[S.genericType&&a.jsxs("div",{children:["Type: ",S.genericType]}),S.voltage&&a.jsxs("div",{children:["Voltage: ",S.voltage," ",S.voltageUnit||"V"]}),S.current&&a.jsxs("div",{children:["Current: ",S.current," ",S.currentUnit||"A"]}),S.power&&a.jsxs("div",{children:["Power: ",S.power]}),S.frequency&&a.jsxs("div",{children:["Frequency: ",S.frequency]}),S.model&&a.jsxs("div",{children:["Model: ",S.model]})]}),a.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:a.jsxs("div",{children:["Position: x=",S.x.toFixed(2),", y=",S.y.toFixed(2)]})})]})]},S.id)})})(),i.size>0&&f.filter(k=>i.has(k.id)&&k.type==="via"&&k.points.length>0).map(k=>{const S=k.points[0],J=k.viaType||(S.id!==void 0?Z(S.id,T):"Via");return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J})]}),ae&&a.jsx("button",{onClick:()=>{ae(k.id,S.x,S.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:re=>{re.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:re=>{re.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[S.id&&a.jsxs("div",{children:["Node ID: ",S.id]}),a.jsx("div",{children:"Layer: Top and Bottom"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Position: x=",S.x.toFixed(2),", y=",S.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:E,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),i.size>0&&f.filter(k=>i.has(k.id)&&k.type==="pad"&&k.points.length>0).map(k=>{const S=k.points[0],J=k.padType||(S.id!==void 0?O(S.id,T):"Pad");return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J})]}),ae&&a.jsx("button",{onClick:()=>{ae(k.id,S.x,S.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:re=>{re.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:re=>{re.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[S.id&&a.jsxs("div",{children:["Node ID: ",S.id]}),a.jsxs("div",{children:["Layer: ",k.layer]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Position: x=",S.x.toFixed(2),", y=",S.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:E,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),i.size>0&&f.filter(k=>i.has(k.id)&&k.type==="testPoint"&&k.points.length>0).map(k=>{const S=k.points[0],J=S.id!==void 0?P(S.id,T):"Test Point";return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J})]}),ae&&a.jsx("button",{onClick:()=>{ae(k.id,S.x,S.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:re=>{re.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:re=>{re.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[S.id&&a.jsxs("div",{children:["Node ID: ",S.id]}),a.jsxs("div",{children:["Layer: ",k.layer]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Position: x=",S.x.toFixed(2),", y=",S.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:E,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),i.size>0&&f.filter(k=>i.has(k.id)&&k.type==="trace").map(k=>{const S=k.points.length>0?k.points.reduce((re,ye)=>re+ye.x,0)/k.points.length:0,J=k.points.length>0?k.points.reduce((re,ye)=>re+ye.y,0)/k.points.length:0;return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k.type||"unknown"})]}),ae&&k.points.length>0&&a.jsx("button",{onClick:()=>{ae(k.id,S,J)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:re=>{re.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:re=>{re.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[k.points.length>0&&a.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[a.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",k.points.length]}),a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),a.jsx("tbody",{children:k.points.map((re,ye)=>a.jsxs("tr",{style:{backgroundColor:ye%2===0?"#fff":"#f9f9f9"},children:[a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ye}),a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:re.x.toFixed(2)}),a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:re.y.toFixed(2)}),a.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:re.id||"(none)"})]},ye))})]})]}),a.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",k.layer]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:E,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),s.size>0&&b.filter(k=>s.has(k.id)).map(k=>{const S=T.find(J=>J.id===k.powerBusId);return a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k.type||(S?`${S.name} Power Node`:"Power Node")})]}),ce&&a.jsx("button",{onClick:()=>{ce(k.id,k.x,k.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[a.jsxs("div",{children:["Node ID: ",k.pointId||"(not assigned)"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Layer: ",k.layer]}),a.jsxs("div",{children:["Power Bus: ",S?.name||k.powerBusId||"(unknown)"]}),a.jsxs("div",{children:["Position: x=",k.x.toFixed(2),", y=",k.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:E,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id)}),u.size>0&&x.filter(k=>u.has(k.id)).map(k=>a.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k.type||"Ground Node"})]}),q&&a.jsx("button",{onClick:()=>{q(k.id,k.x,k.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:S=>{S.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:S=>{S.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),a.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[a.jsxs("div",{children:["Node ID: ",k.pointId||"(not assigned)"]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("span",{children:"Color:"}),a.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:k.color,border:"1px solid #ccc",borderRadius:2}}),a.jsx("span",{children:k.color})]}),a.jsxs("div",{children:["Size: ",k.size]}),a.jsxs("div",{children:["Position: x=",k.x.toFixed(2),", y=",k.y.toFixed(2)]}),a.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),a.jsx("input",{type:"text",value:k.notes||"",readOnly:!0,onClick:E,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},k.id))]})})]})},No=200,mv=({visible:n,selectedIds:i,selectedComponentIds:o,selectedPowerIds:s,selectedGroundIds:u,drawingStrokes:f,componentsTop:v,componentsBottom:h,powers:b,grounds:x,powerBuses:T,onClose:D,setComponentsTop:R,setComponentsBottom:C,setDrawingStrokes:Z,setPowerSymbols:O,setGroundSymbols:P,determineViaType:H,determinePadType:ae,determineTestPointType:ce,position:q,isDragging:se,onDragStart:X})=>{const[_,E]=U.useState(new Map),V=U.useRef(""),$=()=>[...Array.from(i).sort(),...Array.from(o).sort(),...Array.from(s).sort(),...Array.from(u).sort()].join(",");if(U.useEffect(()=>{if(!n)return;const be=$();be!==V.current&&(V.current=be,E(F=>{const A=new Map;return[...v,...h].filter(M=>o.has(M.id)).forEach(M=>{const B=F.get(M.id);A.set(M.id,B!==void 0?B:M.notes||"")}),f.filter(M=>i.has(M.id)).forEach(M=>{const B=F.get(M.id);A.set(M.id,B!==void 0?B:M.notes||"")}),b.filter(M=>s.has(M.id)).forEach(M=>{const B=F.get(M.id);A.set(M.id,B!==void 0?B:M.notes||"")}),x.filter(M=>u.has(M.id)).forEach(M=>{const B=F.get(M.id);A.set(M.id,B!==void 0?B:M.notes||"")}),A}))},[n,i,o,s,u,f,v,h,b,x]),!n)return null;const k=q?{position:"fixed",left:`${q.x}px`,top:`${q.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:se?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},S={padding:"20px",overflow:"auto",flex:1},J=f.filter(be=>i.has(be.id)).length,re=[...v,...h].filter(be=>o.has(be.id)).length,ye=b.filter(be=>s.has(be.id)).length,K=x.filter(be=>u.has(be.id)).length,te=J+re+ye+K,ge=(be,F)=>{const A=F.length>No?F.substring(0,No):F;E(M=>{const B=new Map(M);return B.set(be,A),B})},je=()=>{R(be=>be.map(F=>{if(o.has(F.id)&&_.has(F.id)){const A=_.get(F.id)||"";return{...F,notes:A.trim()===""?void 0:A.trim()}}return F})),C(be=>be.map(F=>{if(o.has(F.id)&&_.has(F.id)){const A=_.get(F.id)||"";return{...F,notes:A.trim()===""?void 0:A.trim()}}return F})),Z(be=>be.map(F=>{if(i.has(F.id)&&_.has(F.id)){const A=_.get(F.id)||"";return{...F,notes:A.trim()===""?null:A.trim()}}return F})),O(be=>be.map(F=>{if(s.has(F.id)&&_.has(F.id)){const A=_.get(F.id)||"";return{...F,notes:A.trim()===""?null:A.trim()}}return F})),P(be=>be.map(F=>{if(u.has(F.id)&&_.has(F.id)){const A=_.get(F.id)||"";return{...F,notes:A.trim()===""?null:A.trim()}}return F}))};return a.jsxs("div",{style:k,children:[a.jsxs("div",{onMouseDown:be=>{const F=be.target;F.tagName==="BUTTON"||F.closest("button")||q&&X(be)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:se?"grabbing":q?"grab":"default",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (N)"}),a.jsx("button",{onClick:D,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:S,children:a.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[a.jsx("div",{style:{padding:"12px 16px",backgroundColor:te>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:te>0?"#333":"#856404",marginBottom:"8px"},children:te>0?`${te} Object${te!==1?"s":""} Selected`:"Zero Objects Selected"}),te===0?a.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):a.jsxs(a.Fragment,{children:[[...v,...h].filter(be=>o.has(be.id)).map(be=>{const F=_.get(be.id)||"",A=F.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsxs("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:[dl(be.componentType),be.designator&&be.designator.trim()?` (${be.designator.trim()})`:""]})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("textarea",{value:F,onChange:M=>ge(be.id,M.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:No,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:A>=No?"#d32f2f":"#666",textAlign:"right"},children:[A," / ",No]})]})]},be.id)}),f.filter(be=>i.has(be.id)&&be.type==="via"&&be.points.length>0).map(be=>{const F=be.points[0],A=be.viaType||(F.id!==void 0?H(F.id,T):"Via"),M=_.get(be.id)||"",B=M.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:F.id&&a.jsxs("div",{children:["Node ID: ",F.id]})}),a.jsx("textarea",{value:M,onChange:de=>ge(be.id,de.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:No,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:B>=No?"#d32f2f":"#666",textAlign:"right"},children:[B," / ",No]})]})]},be.id)}),f.filter(be=>i.has(be.id)&&be.type==="pad"&&be.points.length>0).map(be=>{const F=be.points[0],A=be.padType||(F.id!==void 0?ae(F.id,T):"Pad"),M=_.get(be.id)||"",B=M.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:F.id&&a.jsxs("div",{children:["Node ID: ",F.id]})}),a.jsx("textarea",{value:M,onChange:de=>ge(be.id,de.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:No,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:B>=No?"#d32f2f":"#666",textAlign:"right"},children:[B," / ",No]})]})]},be.id)}),f.filter(be=>i.has(be.id)&&be.type==="testPoint"&&be.points.length>0).map(be=>{const F=be.points[0],A=F.id!==void 0?ce(F.id,T):"Test Point",M=_.get(be.id)||"",B=M.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:F.id&&a.jsxs("div",{children:["Node ID: ",F.id]})}),a.jsx("textarea",{value:M,onChange:de=>ge(be.id,de.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:No,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:B>=No?"#d32f2f":"#666",textAlign:"right"},children:[B," / ",No]})]})]},be.id)}),f.filter(be=>i.has(be.id)&&be.type==="trace").map(be=>{const F=_.get(be.id)||"",A=F.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:be.type||"unknown"})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("textarea",{value:F,onChange:M=>ge(be.id,M.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:No,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:A>=No?"#d32f2f":"#666",textAlign:"right"},children:[A," / ",No]})]})]},be.id)}),b.filter(be=>s.has(be.id)).map(be=>{const F=T.find(de=>de.id===be.powerBusId),A=be.type||(F?`${F.name} Power Node`:"Power Node"),M=_.get(be.id)||"",B=M.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:A})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:a.jsxs("div",{children:["Node ID: ",be.pointId||"(not assigned)"]})}),a.jsx("textarea",{value:M,onChange:de=>ge(be.id,de.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:No,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:B>=No?"#d32f2f":"#666",textAlign:"right"},children:[B," / ",No]})]})]},be.id)}),x.filter(be=>u.has(be.id)).map(be=>{const F=be.type||"Ground Node",A=_.get(be.id)||"",M=A.length;return a.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[a.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[a.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),a.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:F})]}),a.jsxs("div",{style:{padding:"8px"},children:[a.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:a.jsxs("div",{children:["Node ID: ",be.pointId||"(not assigned)"]})}),a.jsx("textarea",{value:A,onChange:B=>ge(be.id,B.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:No,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),a.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:M>=No?"#d32f2f":"#666",textAlign:"right"},children:[M," / ",No]})]})]},be.id)}),a.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[a.jsx("button",{onClick:D,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:be=>{be.currentTarget.style.backgroundColor="#616161"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor="#757575"},children:"Close"}),a.jsx("button",{onClick:je,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:be=>{be.currentTarget.style.backgroundColor="#1976D2"},onMouseLeave:be=>{be.currentTarget.style.backgroundColor="#2196F3"},children:"Save"})]})]})]})})]})},xv=({visible:n,projectNotes:i,setProjectNotes:o,onClose:s,position:u,isDragging:f,onDragStart:v})=>{const[h,b]=U.useState([]),[x,T]=U.useState(null),[D,R]=U.useState(null),C=U.useRef(new Map),[Z,O]=U.useState({width:Math.min(window.innerWidth*.85,1400),height:window.innerHeight*.7}),[P,H]=U.useState(!1),[ae,ce]=U.useState({x:0,y:0,width:0,height:0});U.useEffect(()=>{n&&(b([...i]),T(null),R(null))},[n,i]),U.useEffect(()=>{if(!P)return;const ye=te=>{const ge=te.clientX-ae.x,je=te.clientY-ae.y,be=Math.max(400,Math.min(window.innerWidth-20,ae.width+ge)),F=Math.max(300,Math.min(window.innerHeight-20,ae.height+je));O({width:be,height:F})},K=()=>{H(!1)};return document.addEventListener("mousemove",ye),document.addEventListener("mouseup",K),()=>{document.removeEventListener("mousemove",ye),document.removeEventListener("mouseup",K)}},[P,ae]);const q=ye=>{ye.preventDefault(),ye.stopPropagation(),H(!0),ce({x:ye.clientX,y:ye.clientY,width:Z.width,height:Z.height})};if(!n)return null;const se=()=>{const ye={name:"",value:"",checked:!1};b([...h,ye]),T(h.length),R("name")},X=ye=>{const K=h.filter((te,ge)=>ge!==ye);b(K),x===ye?(T(null),R(null)):x!==null&&x>ye&&T(x-1)},_=()=>{const ye=h.filter(K=>K.name.trim()!==""||K.value.trim()!=="");o(ye),s()},E=()=>{b([...i]),T(null),R(null),s()},V=(ye,K,te)=>{const ge=[...h];ge[ye]={...ge[ye],[K]:te},b(ge)},$=(ye,K)=>{const te=[...h];te[ye]={...te[ye],checked:K},b(te)},k=(ye,K,te)=>{ye.stopPropagation();const ge=ye.currentTarget,je=ge.selectionStart,be=ge.value.length,F=ge.selectionStart!==ge.selectionEnd;if(!(ye.key==="Enter"&&ye.altKey)){if(ye.key==="ArrowRight"&&!ye.ctrlKey&&!ye.shiftKey&&!ye.altKey){if(je===be&&!F&&te==="name"){ye.preventDefault();const A=`${K}-value`,M=C.current.get(A);M&&(M.focus(),M.setSelectionRange(0,0))}return}if(ye.key==="ArrowLeft"&&!ye.ctrlKey&&!ye.shiftKey&&!ye.altKey){if(je===0&&!F&&te==="value"){ye.preventDefault();const A=`${K}-name`,M=C.current.get(A);M&&(M.focus(),M.setSelectionRange(M.value.length,M.value.length))}return}if(ye.key==="ArrowDown"&&!ye.ctrlKey&&!ye.shiftKey&&!ye.altKey){if(ye.preventDefault(),K<h.length-1){const A=`${K+1}-${te}`,M=C.current.get(A);if(M){M.focus();const B=Math.min(je,M.value.length);M.setSelectionRange(B,B)}}else{const A=h.length;se(),setTimeout(()=>{const M=`${A}-${te}`,B=C.current.get(M);B&&(B.focus(),B.setSelectionRange(0,0))},0)}return}if(ye.key==="ArrowUp"&&!ye.ctrlKey&&!ye.shiftKey&&!ye.altKey){if(ye.preventDefault(),K>0){const A=`${K-1}-${te}`,M=C.current.get(A);if(M){M.focus();const B=Math.min(je,M.value.length);M.setSelectionRange(B,B)}}return}if(ye.key==="Enter"&&!ye.altKey&&!ye.shiftKey){if(ye.preventDefault(),te==="name"){const A=`${K}-value`,M=C.current.get(A);M&&(M.focus(),M.setSelectionRange(0,0))}else if(te==="value")if(K<h.length-1){const A=`${K+1}-name`,M=C.current.get(A);M&&(M.focus(),M.setSelectionRange(0,0))}else{const A=h.length;se(),setTimeout(()=>{const M=`${A}-name`,B=C.current.get(M);B&&(B.focus(),B.setSelectionRange(0,0))},0)}return}if(ye.key==="Tab"&&!ye.shiftKey){if(ye.preventDefault(),te==="name"){const A=`${K}-value`,M=C.current.get(A);M&&(M.focus(),M.select())}else if(te==="value")if(K<h.length-1){const A=`${K+1}-name`,M=C.current.get(A);M&&(M.focus(),M.select())}else{const A=h.length;se(),setTimeout(()=>{const M=`${A}-name`,B=C.current.get(M);B&&B.focus()},0)}return}if(ye.key==="Tab"&&ye.shiftKey){if(ye.preventDefault(),te==="value"){const A=`${K}-name`,M=C.current.get(A);M&&(M.focus(),M.select())}else if(te==="name"&&K>0){const A=`${K-1}-value`,M=C.current.get(A);M&&(M.focus(),M.select())}return}}},S=(ye,K)=>{T(ye),R(K)},J=()=>{},re={position:"fixed",top:u?.y??100,left:u?.x??(window.innerWidth-Z.width)/2,width:`${Z.width}px`,height:`${Z.height}px`,backgroundColor:"#fff",borderRadius:8,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:f?"grabbing":"default",overflow:"hidden"};return a.jsxs("div",{style:re,children:[a.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e0e0e0",background:"#888",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none"},onMouseDown:v,children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Project Notes / TODO List (L)"}),a.jsx("button",{onClick:E,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),a.jsxs("div",{className:"project-notes-content",style:{padding:0,flex:1,overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",minHeight:0,scrollbarWidth:"thin",scrollbarColor:"#888 #f0f0f0"},children:[a.jsxs("div",{style:{border:"none",borderTop:"1px solid #ccc",borderRadius:0,overflow:"visible",marginBottom:"16px",backgroundColor:"#e0e0e0",flexShrink:0},children:[a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",backgroundColor:"#e0e0e0",borderBottom:"1px solid #ccc",position:"sticky",top:0,zIndex:10},children:[a.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:a.jsx("label",{className:"radio-label",style:{margin:0,cursor:"default"},children:a.jsx("input",{type:"checkbox",disabled:!0,style:{opacity:.5}})})}),a.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Item"}),a.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Notes"}),a.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",color:"#000"}})]}),a.jsx("div",{children:h.length===0?a.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:'No notes. Click "Add Note" to create one.'}):h.map((ye,K)=>a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",borderBottom:"1px solid #ccc",backgroundColor:"#fff"},children:[a.jsx("div",{style:{padding:"8px 12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("label",{className:"radio-label",style:{margin:0,cursor:"pointer"},children:a.jsx("input",{type:"checkbox",checked:ye.checked||!1,onChange:te=>$(K,te.target.checked)})})}),a.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:a.jsx("textarea",{ref:te=>{te?C.current.set(`${K}-name`,te):C.current.delete(`${K}-name`)},value:ye.name,onChange:te=>V(K,"name",te.target.value),onFocus:()=>S(K,"name"),onBlur:J,onKeyDown:te=>k(te,K,"name"),placeholder:"Item name...",rows:1,style:{width:"100%",padding:"4px 6px",border:x===K&&D==="name"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:te=>{const ge=te.target;ge.style.height="auto",ge.style.height=`${ge.scrollHeight}px`}})}),a.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:a.jsx("textarea",{ref:te=>{te?C.current.set(`${K}-value`,te):C.current.delete(`${K}-value`)},value:ye.value,onChange:te=>V(K,"value",te.target.value),onFocus:()=>S(K,"value"),onBlur:J,onKeyDown:te=>k(te,K,"value"),placeholder:"Notes...",rows:1,style:{width:"100%",padding:"4px 6px",border:x===K&&D==="value"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:te=>{const ge=te.target;ge.style.height="auto",ge.style.height=`${ge.scrollHeight}px`}})}),a.jsx("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx("button",{onClick:()=>X(K),style:{background:"#f44336",color:"#fff",border:"none",borderRadius:3,padding:"4px 8px",cursor:"pointer",fontSize:"11px"},title:"Delete note",children:"Delete"})})]},K))})]}),a.jsx("div",{style:{padding:"16px",flexShrink:0},children:a.jsx("button",{onClick:se,style:{background:"#888",color:"#fff",border:"none",borderRadius:4,padding:"8px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500,alignSelf:"flex-start"},children:"+ Add Note"})})]}),a.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px",flexShrink:0},children:[a.jsx("button",{onClick:E,style:{background:"#f5f5f5",color:"#000",border:"1px solid #ddd",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),a.jsx("button",{onClick:_,style:{background:"#0b5fff",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500},children:"Save"})]}),a.jsx("div",{onMouseDown:q,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:10001},title:"Drag to resize"})]})},bv=({visible:n,dimensions:i,onSave:o,onClose:s})=>{const[u,f]=U.useState(""),[v,h]=U.useState(""),[b,x]=U.useState("inches");U.useEffect(()=>{n&&i?(f(i.width.toString()),h(i.height.toString()),x(i.unit)):n&&(f(""),h(""),x("inches"))},[n,i]);const T=()=>{const R=parseFloat(u),C=parseFloat(v);if(isNaN(R)||R<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(C)||C<=0){alert("Please enter a valid height greater than 0");return}o({width:R,height:C,unit:b}),s()},D=()=>{s()};return n?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:R=>{R.target===R.currentTarget&&D()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:R=>R.stopPropagation(),children:[a.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"number",step:"0.001",min:"0.001",value:u,onChange:R=>f(R.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),a.jsxs("select",{value:b,onChange:R=>x(R.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[a.jsx("option",{value:"inches",children:"inches"}),a.jsx("option",{value:"mm",children:"mm"})]})]})]}),a.jsxs("div",{style:{marginBottom:"20px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),a.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[a.jsx("input",{type:"number",step:"0.001",min:"0.001",value:v,onChange:R=>h(R.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),a.jsxs("select",{value:b,onChange:R=>x(R.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[a.jsx("option",{value:"inches",children:"inches"}),a.jsx("option",{value:"mm",children:"mm"})]})]})]}),a.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[a.jsx("button",{onClick:D,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),a.jsx("button",{onClick:T,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},vv=({visible:n,onClose:i,topImage:o,bottomImage:s,selectedImageForTransform:u,setSelectedImageForTransform:f,transformMode:v,setTransformMode:h,updateImageTransform:b,resetImageTransform:x,setCurrentTool:T,isGrayscale:D,setIsGrayscale:R,areImagesLocked:C})=>{const[Z,O]=U.useState(null),[P,H]=U.useState(!1),ae=U.useRef({x:0,y:0}),ce=U.useRef(null);U.useEffect(()=>{n&&Z===null&&O({x:window.innerWidth-320-20,y:80})},[n,Z]),U.useEffect(()=>{n||O(null)},[n]);const q=U.useCallback(B=>{if(ce.current){const de=ce.current.getBoundingClientRect();ae.current={x:B.clientX-de.left,y:B.clientY-de.top},H(!0)}},[]);if(U.useEffect(()=>{if(!P)return;const B=Ae=>{const Ee=Ae.clientX-ae.current.x,Ge=Ae.clientY-ae.current.y,Pe=ce.current?.offsetWidth||320,nt=ce.current?.offsetHeight||600,Ke=Math.max(0,Math.min(Ee,window.innerWidth-Pe)),wt=Math.max(0,Math.min(Ge,window.innerHeight-nt));O({x:Ke,y:wt})},de=()=>{H(!1)};return document.addEventListener("mousemove",B),document.addEventListener("mouseup",de),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",de)}},[P]),!n)return null;const se=o!==null,X=s!==null,_=se||X,E=se&&X,V=u||(se?"top":X?"bottom":null),$=()=>V==="top"&&o?o.brightness??100:V==="bottom"&&s?s.brightness??100:V==="both"&&o?o.brightness??100:100,k=()=>V==="top"&&o?o.contrast??100:V==="bottom"&&s?s.contrast??100:V==="both"&&o?o.contrast??100:100,S=$(),J=k(),re=!_||C,ye=()=>{if(!(!V||re))if(V==="both"){const B=!o?.flipX;b("both",{flipX:B})}else{const B=V==="top"?o?.flipX||!1:s?.flipX||!1;b(V,{flipX:!B})}},K=()=>{if(!(!V||re))if(V==="both"){const B=!o?.flipY;b("both",{flipY:B})}else{const B=V==="top"?o?.flipY||!1:s?.flipY||!1;b(V,{flipY:!B})}},te=B=>{re||(V&&f(V),h(B),T("transform"))},ge=B=>{!V||re||b(V,{brightness:B})},je=B=>{!V||re||b(V,{contrast:B})},be=()=>{re||(V&&f(V),T("transform"),R(!D))},F=()=>{re||(T("transform"),x())},A=(B,de=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:B?"#666":"#f2f2f2",background:de?"#3a3a42":"transparent",border:"none",borderRadius:4,cursor:B?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"}),M=(B,de)=>({display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",color:B?"#666":"#f2f2f2",cursor:B?"not-allowed":"pointer",fontSize:"13px",background:de?"#3a3a42":"transparent",borderRadius:4,transition:"background 0.15s"});return a.jsxs("div",{ref:ce,style:{position:"fixed",top:Z?.y??80,left:Z?.x??window.innerWidth-340,backgroundColor:"#2b2b31",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24",zIndex:10001},children:[a.jsxs("div",{onMouseDown:q,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(to bottom, #3a3a42, #2b2b31)",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottom:"1px solid #1f1f24",cursor:P?"grabbing":"grab",userSelect:"none"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{style:{color:"#888",fontSize:"14px"},children:""}),a.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#f2f2f2"},children:"Transform Images"})]}),a.jsx("button",{onClick:i,style:{background:"transparent",border:"none",color:"#888",fontSize:"16px",cursor:"pointer",padding:"2px 6px",lineHeight:1,borderRadius:4},onMouseEnter:B=>{B.currentTarget.style.background="#444",B.currentTarget.style.color="#fff"},onMouseLeave:B=>{B.currentTarget.style.background="transparent",B.currentTarget.style.color="#888"},children:""})]}),a.jsxs("div",{style:{padding:"16px"},children:[a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"Apply to:"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[a.jsxs("label",{style:M(!se,V==="top"),children:[a.jsx("input",{type:"radio",name:"imageSelection",checked:V==="top",onChange:()=>f("top"),disabled:!se,style:{accentColor:"#6b9fff"}}),"Top Image",!se&&a.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),a.jsxs("label",{style:M(!X,V==="bottom"),children:[a.jsx("input",{type:"radio",name:"imageSelection",checked:V==="bottom",onChange:()=>f("bottom"),disabled:!X,style:{accentColor:"#6b9fff"}}),"Bottom Image",!X&&a.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),a.jsxs("label",{style:M(!E,V==="both"),children:[a.jsx("input",{type:"radio",name:"imageSelection",checked:V==="both",onChange:()=>f("both"),disabled:!E,style:{accentColor:"#6b9fff"}}),"Both Images",!E&&a.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(need both)"})]})]})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("button",{onClick:ye,disabled:re,style:A(re),onMouseEnter:B=>!re&&(B.currentTarget.style.background="#3a3a42"),onMouseLeave:B=>B.currentTarget.style.background="transparent",children:"Horizontal Flip"}),a.jsx("button",{onClick:K,disabled:re,style:A(re),onMouseEnter:B=>!re&&(B.currentTarget.style.background="#3a3a42"),onMouseLeave:B=>B.currentTarget.style.background="transparent",children:"Vertical Flip"})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsx("div",{style:{marginBottom:"12px"},children:["nudge","scale","rotate","slant","keystone"].map(B=>a.jsxs("button",{onClick:()=>te(B),disabled:re,style:A(re,v===B),onMouseEnter:de=>!re&&v!==B&&(de.currentTarget.style.background="#3a3a42"),onMouseLeave:de=>v!==B&&(de.currentTarget.style.background="transparent"),children:[v===B?" ":"","Mode: ",B.charAt(0).toUpperCase()+B.slice(1)]},B))}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[a.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Brightness"}),a.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[S,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:S,onChange:B=>ge(parseInt(B.target.value,10)),disabled:re,style:{width:"100%",cursor:re?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[a.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Contrast"}),a.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[J,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:J,onChange:B=>je(parseInt(B.target.value,10)),disabled:re,style:{width:"100%",cursor:re?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsx("div",{style:{marginBottom:"12px"},children:a.jsxs("button",{onClick:be,disabled:re,style:A(re,D),onMouseEnter:B=>!re&&!D&&(B.currentTarget.style.background="#3a3a42"),onMouseLeave:B=>!D&&(B.currentTarget.style.background="transparent"),children:[D?" ":"","Grayscale Mode"]})}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:[a.jsx("button",{onClick:F,disabled:re,style:{padding:"8px 16px",background:re?"#444":"#555",color:re?"#777":"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:re?"not-allowed":"pointer",fontSize:"13px",fontWeight:500},children:"Reset Transform"}),a.jsx("button",{onClick:i,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:B=>B.currentTarget.style.background="#3a8ee6",onMouseLeave:B=>B.currentTarget.style.background="#4a9eff",children:"Close"})]}),C&&a.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",background:"#3d2b2b",border:"1px solid #5a3a3a",borderRadius:4,fontSize:"12px",color:"#e88"},children:" Images are locked. Unlock via Images  Lock Images to make changes."})]})]})},wv=({visible:n,onClose:i,topImage:o,bottomImage:s,setTopImage:u,setBottomImage:f,componentsTop:v,componentsBottom:h,setComponentsTop:b,setComponentsBottom:x,drawingStrokes:T,setDrawingStrokes:D,powerSymbols:R,groundSymbols:C,setPowerSymbols:Z,setGroundSymbols:O,canvasRef:P,isBottomView:H,setIsBottomView:ae,originalTopFlipX:ce,setOriginalTopFlipX:q,originalBottomFlipX:se,setOriginalBottomFlipX:X,originalTopFlipY:_,setOriginalTopFlipY:E,originalBottomFlipY:V,setOriginalBottomFlipY:$,cameraWorldCenter:k,setCameraWorldCenter:S,viewScale:J,viewRotation:re,setViewRotation:ye,viewFlipX:K,setViewFlipX:te,contentBorder:ge,setTransparency:je})=>{const[be,F]=U.useState(null),[A,M]=U.useState(!1),B=U.useRef({x:0,y:0}),de=U.useRef(null);U.useEffect(()=>{n&&be===null&&F({x:window.innerWidth-320-20,y:80})},[n,be]),U.useEffect(()=>{n||F(null)},[n]);const Ae=U.useCallback(Ke=>{if(de.current){const wt=de.current.getBoundingClientRect();B.current={x:Ke.clientX-wt.left,y:Ke.clientY-wt.top},M(!0)}},[]);U.useEffect(()=>{if(!A)return;const Ke=St=>{const Bt=St.clientX-B.current.x,pe=St.clientY-B.current.y,_t=de.current?.offsetWidth||320,pn=de.current?.offsetHeight||400,Zt=Math.max(0,Math.min(Bt,window.innerWidth-_t)),dt=Math.max(0,Math.min(pe,window.innerHeight-pn));F({x:Zt,y:dt})},wt=()=>{M(!1)};return document.addEventListener("mousemove",Ke),document.addEventListener("mouseup",wt),()=>{document.removeEventListener("mousemove",Ke),document.removeEventListener("mouseup",wt)}},[A]);const Ee=U.useCallback(()=>{H||(te(!0),ae(!0),je(100))},[H,te,ae,je]),Ge=U.useCallback(()=>{H&&(te(!1),ae(!1),je(0))},[H,te,ae,je]),Pe=U.useCallback(Ke=>{ye(wt=>m0(wt,Ke))},[ye,m0]);if(!n)return null;const nt=(Ke=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:Ke?"#666":"#f2f2f2",background:"transparent",border:"none",borderRadius:4,cursor:Ke?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"});return a.jsxs("div",{ref:de,style:{position:"fixed",top:be?.y??80,left:be?.x??window.innerWidth-340,backgroundColor:"#2b2b31",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24",zIndex:10001},children:[a.jsxs("div",{onMouseDown:Ae,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(to bottom, #3a3a42, #2b2b31)",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottom:"1px solid #1f1f24",cursor:A?"grabbing":"grab",userSelect:"none"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("span",{style:{color:"#888",fontSize:"14px"},children:""}),a.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#f2f2f2"},children:"Change Perspective"})]}),a.jsx("button",{onClick:i,style:{background:"transparent",border:"none",color:"#888",fontSize:"16px",cursor:"pointer",padding:"2px 6px",lineHeight:1,borderRadius:4},onMouseEnter:Ke=>{Ke.currentTarget.style.background="#444",Ke.currentTarget.style.color="#fff"},onMouseLeave:Ke=>{Ke.currentTarget.style.background="transparent",Ke.currentTarget.style.color="#888"},children:""})]}),a.jsxs("div",{style:{padding:"16px"},children:[a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"View:"}),a.jsx("button",{onClick:H?Ge:Ee,style:nt(!1),onMouseEnter:Ke=>Ke.currentTarget.style.background="#3a3a42",onMouseLeave:Ke=>Ke.currentTarget.style.background="transparent",children:H?"Switch to Top View":"Switch to Bottom View"}),a.jsx("div",{style:{fontSize:"10px",color:"#666",marginTop:"6px",fontStyle:"italic"},children:"Shortcut: Shift-Left/Right Arrow Keys"})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"Rotate (clockwise):"}),a.jsx("button",{onClick:()=>Pe(90),style:nt(),onMouseEnter:Ke=>Ke.currentTarget.style.background="#3a3a42",onMouseLeave:Ke=>Ke.currentTarget.style.background="transparent",children:"Rotate 90"}),a.jsx("button",{onClick:()=>Pe(180),style:nt(),onMouseEnter:Ke=>Ke.currentTarget.style.background="#3a3a42",onMouseLeave:Ke=>Ke.currentTarget.style.background="transparent",children:"Rotate 180"}),a.jsx("button",{onClick:()=>Pe(270),style:nt(),onMouseEnter:Ke=>Ke.currentTarget.style.background="#3a3a42",onMouseLeave:Ke=>Ke.currentTarget.style.background="transparent",children:"Rotate 270"}),a.jsx("div",{style:{fontSize:"10px",color:"#666",marginTop:"6px",fontStyle:"italic"},children:"Shortcut: Shift-Up/Down Arrow Keys"})]}),a.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:a.jsx("button",{onClick:i,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:Ke=>Ke.currentTarget.style.background="#3a8ee6",onMouseLeave:Ke=>Ke.currentTarget.style.background="#4a9eff",children:"Close"})})]})]})},Sv=({component:n,componentEditor:i,componentDefinition:o,setComponentEditor:s,areComponentsLocked:u,componentsTop:f,componentsBottom:v,setComponentsTop:h,setComponentsBottom:b})=>{const T=(o||i?.componentDefinition||Yf(n))?.fields;if(T&&T.length>0){const D=(C,Z,O)=>O?C==="capacitance"||C==="resistance"||C==="voltage"||C==="current"?"80px":C==="power"||C==="inductance"||C==="impedance"||C==="esr"||C==="ripple"||C==="leakageCurrent"?"70px":"80px":C==="tolerance"||C==="pinCount"?"60px":C==="partNumber"||C==="manufacturer"?"150px":C==="description"||C==="operatingTemperature"?"180px":Z==="string"&&!C.includes("Unit")?"150px":"120px",R=C=>{const Z=C.name,O=`${C.name}Unit`,P=i[Z]??n[Z]??C.defaultValue??"",H=i[O]??n[O]??(C.units&&C.defaultUnit?C.defaultUnit:""),ae=X=>{s({...i,[Z]:X})},ce=X=>{s({...i,[O]:X})},q=!!(C.units&&C.units.length>0),se=D(C.name,C.type,q);return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[a.jsxs("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:[C.label,":"]}),C.type==="enum"?a.jsx("select",{value:P,onChange:X=>ae(X.target.value),disabled:u,style:{width:se,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:u?.6:1,marginRight:"8px"},children:(C.enumValues||[]).map(X=>a.jsx("option",{value:X,children:X},X))}):a.jsx("input",{type:"text",value:P,onChange:X=>ae(X.target.value),disabled:u,style:{width:se,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:u?.6:1,marginRight:q?"8px":"0"},placeholder:C.defaultValue!==void 0?String(C.defaultValue):""}),q&&C.units&&a.jsx("select",{value:H||C.defaultUnit||C.units[0],onChange:X=>ce(X.target.value),disabled:u,style:{width:"70px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:u?.6:1,flexShrink:0},children:C.units.map(X=>a.jsx("option",{value:X,children:X},X))})]},C.name)};return a.jsx(a.Fragment,{children:T.map(R)})}return a.jsx("div",{style:{padding:"8px",background:"#fff3cd",border:"1px solid #ffeeba",borderRadius:4,color:"#856404",marginBottom:"8px",fontSize:"12px"},children:"Component definition missing for this instance. Using legacy fields. Please ensure the component has a definition in componentDefinitions.json and a valid componentDefinitionKey."})},Cv=n=>{const i=of[n];return!i||!i.prefix||i.prefix.length<1?"?":i.prefix[0].substring(0,1).toUpperCase()},Tv=({componentEditor:n,componentDefinition:i,setComponentEditor:o,componentsTop:s,componentsBottom:u,setComponentsTop:f,setComponentsBottom:v,connectingPin:h,setConnectingPin:b,componentDialogPosition:x,setComponentDialogPosition:T,isDraggingDialog:D,setIsDraggingDialog:R,dialogDragOffset:C,setDialogDragOffset:Z,areComponentsLocked:O,setSelectedComponentIds:P,setNotesDialogVisible:H})=>{if(!n||!n.visible)return null;let ae=s.find(X=>X.id===n.id),ce="top";if(ae||(ae=u.find(X=>X.id===n.id),ce="bottom"),!ae)return null;n.layer!==ce&&o({...n,layer:ce});const q=X=>{const _={...X},E=n.designator?.trim()||"";_.designator=E,_.x=n.x,_.y=n.y,_.layer=n.layer,_.orientation=n.orientation??0;const V=E.length>0?E.charAt(0).toUpperCase():Cv(X.componentType);if(_.abbreviation=V,"manufacturer"in _&&(_.manufacturer=n.manufacturer?.trim()||void 0),"partNumber"in _&&(_.partNumber=n.partNumber?.trim()||void 0),n.pinCount!==X.pinCount){_.pinCount=n.pinCount;const $=X.pinConnections||[];if(_.pinConnections=new Array(n.pinCount).fill("").map((k,S)=>S<$.length?$[S]:""),X.pinPolarities){const k=X.pinPolarities||[];_.pinPolarities=new Array(n.pinCount).fill("").map((S,J)=>J<k.length?k[J]:"")}}else _.pinConnections=X.pinConnections||[],X.pinPolarities&&(_.pinPolarities=X.pinPolarities);return X.componentType==="Resistor"?(_.resistance=n.resistance||void 0,_.resistanceUnit=n.resistanceUnit||void 0,_.power=n.power?`${n.power}W`:void 0,_.tolerance=n.tolerance||void 0):X.componentType==="Capacitor"?(_.capacitance=n.capacitance||void 0,_.capacitanceUnit=n.capacitanceUnit||void 0,_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.tolerance=n.tolerance||void 0,_.dielectric=n.dielectric||void 0):X.componentType==="Electrolytic Capacitor"?(_.capacitance=n.capacitance||void 0,_.capacitanceUnit=n.capacitanceUnit||void 0,_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.tolerance=n.tolerance||void 0,_.polarized=n.polarized!==void 0?n.polarized:void 0,_.esr=n.esr||void 0,_.esrUnit=n.esrUnit||void 0,_.temperature=n.temperature||void 0):X.componentType==="Film Capacitor"?(_.capacitance=n.capacitance||void 0,_.capacitanceUnit=n.capacitanceUnit||void 0,_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.tolerance=n.tolerance||void 0,_.filmType=n.filmType||void 0):X.componentType==="Diode"?(_.diodeType=n.diodeType||X.diodeType||"Standard",_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0,_.ledColor=n.ledColor||void 0):X.componentType==="Battery"?(_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.capacity=n.capacity||void 0,_.capacityUnit=n.capacityUnit||void 0,_.chemistry=n.chemistry||void 0):X.componentType==="Fuse"?(_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0,_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.fuseType=n.fuseType||void 0):X.componentType==="FerriteBead"?(_.impedance=n.impedance||void 0,_.impedanceUnit=n.impedanceUnit||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0):X.componentType==="Connector"?(_.connectorType=n.connectorType||void 0,_.gender=n.gender||void 0):X.componentType==="Jumper"?_.positions=n.positions||void 0:X.componentType==="Relay"?(_.coilVoltage=n.coilVoltage||void 0,_.coilVoltageUnit=n.coilVoltageUnit||void 0,_.contactType=n.contactType||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0):X.componentType==="Inductor"?(_.inductance=n.inductance||void 0,_.inductanceUnit=n.inductanceUnit||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0,_.resistance=n.resistance||void 0,_.resistanceUnit=n.resistanceUnit||void 0):X.componentType==="Speaker"?(_.impedance=n.impedance||void 0,_.impedanceUnit=n.impedanceUnit||void 0,_.power=n.power?`${n.power}W`:void 0):X.componentType==="Motor"?(_.motorType=n.motorType||void 0,_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0):X.componentType==="PowerSupply"?(_.inputVoltage=n.inputVoltage||void 0,_.inputVoltageUnit=n.inputVoltageUnit||void 0,_.outputVoltage=n.outputVoltage||void 0,_.outputVoltageUnit=n.outputVoltageUnit||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0):X.componentType==="Transistor"?(_.transistorType=n.transistorType||void 0,_.polarity=n.polarity||void 0,_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0):X.componentType==="ResistorNetwork"?(_.resistance=n.resistance||void 0,_.resistanceUnit=n.resistanceUnit||void 0,_.configuration=n.configuration||void 0):X.componentType==="Thermistor"?(_.resistance=n.resistance||void 0,_.resistanceUnit=n.resistanceUnit||void 0,_.thermistorType=n.thermistorType||void 0,_.beta=n.beta||void 0):X.componentType==="Switch"?(_.switchType=n.switchType||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0,_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0):X.componentType==="Transformer"?(_.primaryVoltage=n.primaryVoltage||void 0,_.primaryVoltageUnit=n.primaryVoltageUnit||void 0,_.secondaryVoltage=n.secondaryVoltage||void 0,_.secondaryVoltageUnit=n.secondaryVoltageUnit||void 0,_.power=n.power?`${n.power}W`:void 0,_.turns=n.turns||void 0):X.componentType==="TestPoint"?_.signal=n.signal||void 0:X.componentType==="Film Capacitor"?(_.capacitance=n.capacitance||void 0,_.capacitanceUnit=n.capacitanceUnit||void 0,_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.tolerance=n.tolerance||void 0,_.filmType=n.filmType||void 0):X.componentType==="IntegratedCircuit"?(_.description=n.description?.trim()||void 0,_.datasheet=n.datasheet?.trim()||void 0,_.icType=n.icType||void 0):_.description=n.description?.trim()||void 0,X.componentType==="VacuumTube"?_.tubeType=n.tubeType||void 0:X.componentType==="VariableResistor"?(_.vrType=n.vrType||void 0,_.resistance=n.resistance||void 0,_.resistanceUnit=n.resistanceUnit||void 0,_.power=n.power?`${n.power}W`:void 0,_.taper=n.taper||void 0):X.componentType==="Crystal"?(_.frequency=n.frequency||void 0,_.loadCapacitance=n.loadCapacitance||void 0,_.tolerance=n.tolerance||void 0):X.componentType==="GenericComponent"&&(_.genericType=n.genericType||"Attenuator",_.voltage=n.voltage||void 0,_.voltageUnit=n.voltageUnit||void 0,_.current=n.current||void 0,_.currentUnit=n.currentUnit||void 0,_.power=n.power||void 0,_.frequency=n.frequency||void 0,_.model=n.model||void 0),_},se=()=>{if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const X=s.find(V=>V.id===n.id),_=u.find(V=>V.id===n.id),E=X||_;if(E){const V=q(E),$=E.layer,k=n.layer;$!==k?$==="top"?(f(S=>S.filter(J=>J.id!==n.id)),v(S=>[...S,V])):(v(S=>S.filter(J=>J.id!==n.id)),f(S=>[...S,V])):k==="top"?f(S=>S.map(J=>J.id===n.id?V:J)):v(S=>S.map(J=>J.id===n.id?V:J))}else if(console.warn(`Component ${n.id} not found in either layer array`),n.layer==="top"){const V=u.find($=>$.id===n.id);if(V){const $=q(V);v(k=>k.filter(S=>S.id!==n.id)),f(k=>[...k,$])}}else{const V=s.find($=>$.id===n.id);if(V){const $=q(V);f(k=>k.filter(S=>S.id!==n.id)),v(k=>[...k,$])}}o(null),b(null)};return a.jsxs("div",{"data-component-editor-dialog":!0,onClick:X=>{if(h&&h.componentId===ae.id){const _=X.target;(_.tagName==="BUTTON"||_.tagName==="INPUT"||_.closest("button")||_.closest("input"))&&X.stopPropagation()}},style:{position:"fixed",top:x?`${x.y}px`:"90px",left:x?`${x.x}px`:`${window.innerWidth-280}px`,transform:"none",background:h&&h.componentId===ae.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"350px",width:"350px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:D?"grabbing":"default"},children:[a.jsxs("div",{onMouseDown:X=>{const _=X.target;_.tagName==="BUTTON"||_.tagName==="INPUT"||_.closest("button")||_.closest("input")||x&&(Z({x:X.clientX-x.x,y:X.clientY-x.y}),R(!0),X.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:D?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[a.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),a.jsx("button",{onClick:()=>{o(null),b(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[(()=>{const X=i||Yf(ae);return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Category:"}),a.jsx("div",{style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#000"},children:X?.category||"N/A"})]})})(),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Type:"}),a.jsx("div",{style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#000"},children:(()=>{const X=i||Yf(ae);return X?.displayName?ae.componentType==="Capacitor"&&!X.displayName.toLowerCase().includes("capacitor")?`${X.displayName} Capacitor`:X.displayName:ae.componentType==="GenericComponent"&&ae.genericType?dl(ae.genericType):ae.componentType==="Diode"&&ae.diodeType&&ae.diodeType!=="Standard"?dl(ae.diodeType):ae.componentType==="VariableResistor"&&ae.vrType&&ae.vrType!=="Potentiometer"?dl(ae.vrType):ae.componentType==="Capacitor"&&ae.dielectric==="Tantalum"?"Tantalum Capacitor":ae.componentType==="Capacitor"&&ae.capacitorType==="Electrolytic"?"Electrolytic Capacitor":ae.componentType==="Capacitor"&&ae.capacitorType==="Film"?"Film Capacitor":dl(ae.componentType)})()})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-layer-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Layer:"}),a.jsxs("select",{id:`component-layer-${ae.id}`,name:`component-layer-${ae.id}`,value:n.layer,onChange:X=>o({...n,layer:X.target.value}),disabled:O,style:{width:"80px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1},children:[a.jsx("option",{value:"top",children:"Top"}),a.jsx("option",{value:"bottom",children:"Bottom"})]})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-orientation-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Orientation:"}),a.jsxs("select",{id:`component-orientation-${ae.id}`,name:`component-orientation-${ae.id}`,value:n.orientation??0,onChange:X=>{const _=parseInt(X.target.value)||0;if(o({...n,orientation:_}),!O){const V=(n.layer==="top"?s:u).find($=>$.id===n.id);if(V){const $={...V,orientation:_};n.layer==="top"?f(k=>k.map(S=>S.id===n.id?$:S)):v(k=>k.map(S=>S.id===n.id?$:S))}}},disabled:O,style:{width:"70px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1},children:[a.jsx("option",{value:"0",children:"0"}),a.jsx("option",{value:"90",children:"90"}),a.jsx("option",{value:"180",children:"180"}),a.jsx("option",{value:"270",children:"270"})]})]}),a.jsx(Sv,{component:ae,componentEditor:n,componentDefinition:i,setComponentEditor:o,areComponentsLocked:O,componentsTop:s,componentsBottom:u,setComponentsTop:f,setComponentsBottom:v}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[a.jsx("label",{htmlFor:`component-designator-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Designator:"}),a.jsx("input",{id:`component-designator-${ae.id}`,name:`component-designator-${ae.id}`,type:"text",value:n.designator||"",onChange:X=>{const _=X.target.value,E=_.length>0?_.charAt(0).toUpperCase():n.abbreviation;o({...n,designator:_,abbreviation:E})},disabled:O,style:{width:"80px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",fontFamily:"monospace",textTransform:"uppercase",opacity:O?.6:1},placeholder:"e.g., U2, R7, C1"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-description-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Description:"}),a.jsx("input",{id:`component-description-${ae.id}`,name:`component-description-${ae.id}`,type:"text",value:n.description||"",onChange:X=>{o({...n,description:X.target.value})},disabled:O,style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1},placeholder:""})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-notes-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Notes:"}),a.jsx("input",{id:`component-notes-${ae.id}`,name:`component-notes-${ae.id}`,type:"text",readOnly:!0,value:ae.notes||"",onClick:()=>{O||(P(new Set([ae.id])),H(!0))},disabled:O,style:{width:"180px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1,cursor:O?"not-allowed":"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Click to edit notes...",title:ae.notes||"Click to edit notes..."})]}),ae.componentType!=="IntegratedCircuit"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-pincount-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Pin Count:"}),a.jsx("input",{id:`component-pincount-${ae.id}`,name:`component-pincount-${ae.id}`,type:"number",min:"1",value:n.pinCount,onChange:X=>{const _=Math.max(1,parseInt(X.target.value)||1);o({...n,pinCount:_})},onBlur:X=>{if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const _=Math.max(1,parseInt(X.target.value)||1),V=(n.layer==="top"?s:u).find($=>$.id===n.id);if(V&&_!==V.pinCount){const $=V.pinConnections||[],k=new Array(_).fill("").map((ye,K)=>K<$.length?$[K]:""),S=V.pinPolarities||[],J=V.pinPolarities?new Array(_).fill("").map((ye,K)=>K<S.length?S[K]:""):void 0,re={...V,pinCount:_,pinConnections:k,...J!==void 0&&{pinPolarities:J}};n.layer==="top"?f(ye=>ye.map(K=>K.id===n.id?re:K)):v(ye=>ye.map(K=>K.id===n.id?re:K)),o({...n,pinCount:_})}},disabled:O,style:{width:"60px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-x-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"X:"}),a.jsx("input",{id:`component-x-${ae.id}`,name:`component-x-${ae.id}`,type:"number",value:n.x.toFixed(2),onChange:X=>{const _=parseFloat(X.target.value)||0;o({...n,x:_})},disabled:O,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-y-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Y:"}),a.jsx("input",{id:`component-y-${ae.id}`,name:`component-y-${ae.id}`,type:"number",value:n.y.toFixed(2),onChange:X=>{const _=parseFloat(X.target.value)||0;o({...n,y:_})},disabled:O,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-manufacturer-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Manufacturer:"}),a.jsx("input",{id:`component-manufacturer-${ae.id}`,name:`component-manufacturer-${ae.id}`,type:"text",value:n.manufacturer,onChange:X=>o({...n,manufacturer:X.target.value}),disabled:O,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{htmlFor:`component-partnumber-${ae.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"110px",flexShrink:0},children:"Part Number:"}),a.jsx("input",{id:`component-partnumber-${ae.id}`,name:`component-partnumber-${ae.id}`,type:"text",value:n.partNumber,onChange:X=>o({...n,partNumber:X.target.value}),disabled:O,style:{width:"150px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#000",opacity:O?.6:1}})]}),a.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[a.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),h&&h.componentId===ae.id&&a.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",h.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const X=ae.componentType==="Electrolytic Capacitor"||ae.componentType==="Diode"||ae.componentType==="Battery",_=ae.componentType==="Capacitor"&&"dielectric"in ae&&ae.dielectric==="Tantalum",E=X||_;return a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[a.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),a.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),E&&a.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),a.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),a.jsx("tbody",{children:Array.from({length:n.pinCount},(V,$)=>{const S=(n.layer==="top"?s:u).find(K=>K.id===n.id),J=S?.pinConnections&&S.pinConnections.length>$?S.pinConnections[$]:"",re=S?.pinPolarities&&S.pinPolarities.length>$&&S.pinPolarities[$]||"",ye=h&&h.componentId===ae.id&&h.pinIndex===$;return a.jsxs("tr",{style:{cursor:O?"not-allowed":"pointer",background:ye?"#e6f0ff":J?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:K=>{if(K.target.tagName!=="SELECT"){if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}b(ye?null:{componentId:ae.id,pinIndex:$})}},title:J?`Connected to: ${J}`:"Select this pin, then click on a via or pad to connect",children:[a.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:a.jsx("input",{id:`pin-radio-${ae.id}-${$}`,name:`pin-radio-${ae.id}`,type:"radio",checked:!!ye,onChange:()=>{if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}b(ye?null:{componentId:ae.id,pinIndex:$})},disabled:O,style:{margin:0,cursor:O?"not-allowed":"pointer",opacity:O?.6:1,width:"10px",height:"10px"}})}),a.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:ye?600:400,fontFamily:"monospace"},children:$+1}),E&&a.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:a.jsxs("select",{value:re??"",onChange:K=>{if(O){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const te=K.target.value,je=(n.layer==="top"?s:u).find(be=>be.id===n.id);if(je){const F=[...je.pinPolarities||new Array(je.pinCount).fill("")];for(;F.length<je.pinCount;)F.push("");F[$]=te;const A={...je,pinPolarities:F};n.layer==="top"?f(M=>M.map(B=>B.id===n.id?A:B)):v(M=>M.map(B=>B.id===n.id?A:B))}},disabled:O,onClick:K=>K.stopPropagation(),onFocus:K=>K.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:O?"not-allowed":"pointer",opacity:O?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[a.jsx("option",{value:"",children:"-"}),a.jsx("option",{value:"+",children:"+"}),a.jsx("option",{value:"-",children:"-"})]},`polarity-${ae.id}-${$}-${re}`)}),a.jsx("td",{style:{padding:"2px 4px",color:J?"#28a745":"#999",fontWeight:J?600:400,fontFamily:"monospace"},children:J||"-"})]},$)})})]})})()]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[a.jsx("button",{onClick:()=>{o(null),b(null)},disabled:O,style:{padding:"2px 5px",background:O?"#f5f5f5":"#fff",color:O?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:O?"not-allowed":"pointer",fontSize:"10px",opacity:O?.6:1},children:"Cancel"}),a.jsx("button",{onClick:se,disabled:O,style:{padding:"2px 5px",background:O?"#f5f5f5":"#0b5fff",color:O?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:O?"not-allowed":"pointer",fontSize:"10px",opacity:O?.6:1},children:"Save"})]})]})},ky=n=>{const i={};Object.entries(of).forEach(([o,s])=>{s.prefix.forEach(u=>{i[u]||(i[u]=o)})});for(const o of n)if(i[o]){const s=i[o];let u;return s==="Diode"?o==="LED"?u="LED":o==="IR"?u="Infrared":o==="PD"?u="Photodiode":o==="D"&&(u="Standard"):s==="VariableResistor"?o==="RV"?u="Varistor":o==="VR"&&(u="Potentiometer"):s==="GenericComponent"&&(o==="AT"?u="Attenuator":o==="CB"?u="CircuitBreaker":o==="TC"?u="Thermocouple":o==="TUN"&&(u="Tuner")),{componentType:s,designator:o,subtype:u}}return n.includes("CE")?{componentType:"Electrolytic Capacitor",designator:"CE"}:n.includes("CF")?{componentType:"Film Capacitor",designator:"CF"}:n.includes("TR")?{componentType:"Transformer",designator:"TR"}:n.includes("VR")?{componentType:"VariableResistor",designator:"VR",subtype:"Potentiometer"}:n.includes("AT")?{componentType:"GenericComponent",designator:"AT",subtype:"Attenuator"}:n.includes("CB")?{componentType:"GenericComponent",designator:"CB",subtype:"CircuitBreaker"}:n.includes("TC")?{componentType:"GenericComponent",designator:"TC",subtype:"Thermocouple"}:n.includes("TUN")?{componentType:"GenericComponent",designator:"TUN",subtype:"Tuner"}:n.includes("LED")?{componentType:"Diode",designator:"LED",subtype:"LED"}:n.includes("IR")?{componentType:"Diode",designator:"IR",subtype:"Infrared"}:n.includes("PD")?{componentType:"Diode",designator:"PD",subtype:"Photodiode"}:n.includes("RV")?{componentType:"VariableResistor",designator:"RV",subtype:"Varistor"}:n.includes("RN")?{componentType:"ResistorNetwork",designator:"RN"}:n.includes("RT")?{componentType:"Thermistor",designator:"RT"}:n.includes("PS")?{componentType:"PowerSupply",designator:"PS"}:n.includes("B")?{componentType:"Battery",designator:"B"}:n.includes("JP")?{componentType:"Jumper",designator:"JP"}:n.includes("TP")?{componentType:"TestPoint",designator:"TP"}:n.includes("FB")?{componentType:"FerriteBead",designator:"FB"}:n.includes("D")?{componentType:"Diode",designator:"D",subtype:"Standard"}:n.includes("C")?{componentType:"Capacitor",designator:"C"}:n.includes("R")?{componentType:"Resistor",designator:"R"}:n.includes("Q")?{componentType:"Transistor",designator:"Q"}:n.includes("U")?{componentType:"IntegratedCircuit",designator:"U"}:n.includes("J")?{componentType:"Connector",designator:"J"}:n.includes("S")?{componentType:"Switch",designator:"S"}:n.includes("Z")?{componentType:"Diode",designator:"Z",subtype:"Zener"}:n.includes("V")&&!n.includes("VR")?{componentType:"VacuumTube",designator:"V"}:n.includes("K")?{componentType:"Relay",designator:"K"}:n.includes("F")?{componentType:"Fuse",designator:"F"}:n.includes("L")?{componentType:"Inductor",designator:"L"}:n.includes("M")?{componentType:"Motor",designator:"M"}:n.includes("X")?{componentType:"Crystal",designator:"X"}:n.includes("LS")?{componentType:"Speaker",designator:"LS"}:null},jv=({visible:n,selectedLayer:i,selectedComponentType:o,selectedComponentKey:s,onLayerChange:u,onComponentTypeChange:f,onClose:v})=>{const[h,b]=U.useState(""),[x,T]=U.useState(null),[D,R]=U.useState(!1),C=U.useRef({x:0,y:0}),Z=U.useRef(null);U.useEffect(()=>{n&&x===null&&T({x:window.innerWidth-400-8,y:130})},[n,x]);const O=U.useCallback(q=>{const se=q.target;if(!(se.tagName==="BUTTON"||se.tagName==="INPUT"||se.closest("button")||se.closest("input"))&&Z.current){const X=Z.current.getBoundingClientRect();C.current={x:q.clientX-X.left,y:q.clientY-X.top},R(!0),q.preventDefault()}},[]);U.useEffect(()=>{if(!D)return;const q=X=>{const _=X.clientX-C.current.x,E=X.clientY-C.current.y,V=Z.current?.offsetWidth||400,$=Z.current?.offsetHeight||600,k=Math.max(0,Math.min(_,window.innerWidth-V)),S=Math.max(0,Math.min(E,window.innerHeight-$));T({x:k,y:S})},se=()=>{R(!1)};return document.addEventListener("mousemove",q),document.addEventListener("mouseup",se),()=>{document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",se)}},[D]);const P=U.useMemo(()=>{if(!h.trim())return()=>!0;const q=h.toLowerCase();return se=>{if(se.type){const X=dl(se.type).toLowerCase(),_=se.type.toLowerCase();if(X.includes(q)||_.includes(q))return!0}return!!(se.subcategory&&se.subcategory.toLowerCase().includes(q)||se.designator&&se.designator.toLowerCase().includes(q)||se.designators&&se.designators.some(X=>X.toLowerCase().includes(q))||se.componentType&&se.componentType.toLowerCase().includes(q))}},[h]),H=U.useMemo(()=>h.trim()?Gh.filter(q=>{if(P({componentType:q.componentType,designators:q.designators}))return!0;const se=ky(q.designators);return se?P({type:se.componentType,designator:se.designator,subtype:se.subtype}):!1}):Gh,[h,P]);if(!n)return null;const ae={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",zIndex:10005,pointerEvents:"none"},ce={padding:"20px",overflow:"auto",flex:1};return a.jsx("div",{style:ae,onClick:q=>q.stopPropagation(),children:a.jsxs("div",{ref:Z,onClick:q=>q.stopPropagation(),style:{position:"fixed",top:x?`${x.y}px`:void 0,left:x?`${x.x}px`:void 0,backgroundColor:"#fff",borderRadius:8,minWidth:"300px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:10005,display:"flex",flexDirection:"column",pointerEvents:"auto",transform:"none"},children:[a.jsxs("div",{onMouseDown:O,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:D?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Select Component"}),a.jsx("button",{type:"button",onMouseDown:q=>{q.stopPropagation()},onClick:q=>{q.stopPropagation(),v()},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:ce,children:[a.jsx("div",{style:{marginBottom:"16px"},onClick:q=>q.stopPropagation(),children:a.jsx("input",{type:"text",placeholder:"Search by Component Type...",value:h,onChange:q=>b(q.target.value),onClick:q=>q.stopPropagation(),onMouseDown:q=>q.stopPropagation(),style:{width:"100%",padding:"8px 12px",fontSize:"13px",border:"1px solid #ddd",borderRadius:4,color:"#333",backgroundColor:"#fff",boxSizing:"border-box"}})}),a.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"16px",borderBottom:"2px solid #eee"},onClick:q=>q.stopPropagation(),children:[a.jsx("div",{style:{marginBottom:"8px",fontSize:"14px",fontWeight:600,color:"#333"},children:"Layer:"}),a.jsxs("div",{style:{display:"flex",gap:"16px"},children:[a.jsxs("label",{onClick:q=>q.stopPropagation(),onMouseDown:q=>q.stopPropagation(),style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px",color:"#333"},children:[a.jsx("input",{type:"radio",name:"componentLayer",checked:i==="top",onChange:()=>u("top"),onClick:q=>q.stopPropagation(),onMouseDown:q=>q.stopPropagation(),style:{marginRight:"8px",width:"20px",height:"20px",cursor:"pointer",accentColor:"#0066cc",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:i==="top"?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:i==="top"?"#0066cc":"transparent",position:"relative"}}),"Top"]}),a.jsxs("label",{onClick:q=>q.stopPropagation(),onMouseDown:q=>q.stopPropagation(),style:{display:"flex",alignItems:"center",cursor:"pointer",fontSize:"14px",color:"#333"},children:[a.jsx("input",{type:"radio",name:"componentLayer",checked:i==="bottom",onChange:()=>u("bottom"),onClick:q=>q.stopPropagation(),onMouseDown:q=>q.stopPropagation(),style:{marginRight:"8px",width:"20px",height:"20px",cursor:"pointer",accentColor:"#0066cc",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:i==="bottom"?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:i==="bottom"?"#0066cc":"transparent",position:"relative"}}),"Bottom"]})]})]}),a.jsxs("div",{children:[a.jsx("div",{style:{marginBottom:"12px",fontSize:"14px",fontWeight:600,color:"#333"},children:"Component Type:"}),a.jsx("div",{style:{maxHeight:"calc(80vh - 280px)",overflowY:"auto"},children:h.trim()?H.length>0?H.map((q,se)=>{const X=ky(q.designators),_=X?`${q.designators[0]}-${X.componentType}`:null,E=X&&_?s===_:!1,V=q.designators.join(", "),$=X?Ff.find(S=>S.designators.includes(X.designator||"")):void 0,k=X?{...X,componentDefinition:$}:void 0;return a.jsxs("label",{onClick:S=>{S.stopPropagation(),k&&_&&f(k.componentType,_,k)},onMouseDown:S=>S.stopPropagation(),style:{display:"block",width:"100%",textAlign:"left",padding:"8px 12px",marginBottom:"4px",background:E?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:X?"pointer":"default",fontSize:"12px",color:X?"#333":"#999"},children:[a.jsx("input",{type:"radio",name:"componentType-search",checked:E,onChange:()=>{k&&_&&f(k.componentType,_,k)},onClick:S=>S.stopPropagation(),onMouseDown:S=>S.stopPropagation(),disabled:!X,style:{marginRight:"10px",width:"20px",height:"20px",cursor:X?"pointer":"default",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:E?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:E?"#0066cc":"transparent",position:"relative",flexShrink:0}}),a.jsx("strong",{children:V})," - ",q.componentType,!X&&a.jsx("span",{style:{color:"#999",fontSize:"11px",marginLeft:"8px"},children:"(Not available)"})]},se)}):a.jsxs("div",{style:{padding:"12px",color:"#666",fontSize:"12px",textAlign:"center"},children:['No matches found for "',h,'"']}):Object.entries(Ym).filter(([q])=>(!h.trim()||q.toLowerCase().includes(h.toLowerCase()),!0)).map(([q,se])=>{const X=[];return Object.entries(se).forEach(([_,E])=>{E.forEach(V=>{const $=of[V];if(!$)return;let k=$.prefix[0],S;V==="Capacitor"||V==="Electrolytic Capacitor"||V==="Film Capacitor"?_==="Electrolytic"?k="CE":_==="Film"?k="CF":_==="Tantalum"?(k="C",S="Tantalum"):k="C":V==="Diode"?_==="LED"?(k="LED",S="LED"):_==="Infrared"?(k="IR",S="Infrared"):_==="Photodiode"?(k="PD",S="Photodiode"):_==="Schottky"?(k="D",S="Schottky"):(k="D",S="Standard"):q==="Resistors"&&V==="Resistor"?_==="Network"?(k="RN",S="Network"):_==="Thermistor"?(k="RT",S="Thermistor"):_==="Variable"?(k="VR",S="Potentiometer"):_==="Varistor"?(k="RV",S="Varistor"):k="R":V==="PowerEnergy"?_==="Power Supply"?(k="PS",S="PowerSupply"):_==="Fuse"?(k="F",S="Fuse"):_==="Battery"?(k="B",S="Battery"):k=$.prefix[0]:V==="GenericComponent"?_==="Attenuator"?(k="AT",S="Attenuator"):_==="Circuit Breaker"?(k="CB",S="CircuitBreaker"):_==="Thermocouple"?(k="TC",S="Thermocouple"):_==="Tuner"&&(k="TUN",S="Tuner"):k=$.prefix[0];let J;const re=Gh.find(ye=>ye.designators.includes(k));re&&(J=re.componentType),!(h.trim()&&!P({type:V,subcategory:_,designator:k,subtype:S,componentType:J,designators:[k]}))&&X.push({type:V,subcategory:_,designator:k,subtype:S})})}),X.length===0?null:a.jsxs("div",{style:{marginBottom:"12px"},children:[a.jsx("div",{style:{fontSize:"13px",fontWeight:600,color:"#333",padding:"6px 8px",marginBottom:"4px",backgroundColor:"#f5f5f5",borderRadius:4},children:q}),a.jsx("div",{style:{marginLeft:"8px"},children:X.map(({type:_,subcategory:E,designator:V,subtype:$},k)=>{if(!of[_])return null;const J=`${V}-${_}-${E}`,re=s===J,ye=dl(_);let K=`${V} - ${ye}`;E!=="Standard"&&E!=="General"&&E!==ye&&(K=`${V} - ${E}`);const te=Ff.find(je=>je.category===q&&je.subcategory===E&&je.type===_),ge={componentType:_,designator:V,subtype:$,uniqueKey:J,componentDefinition:te};return a.jsxs("label",{onClick:je=>{je.stopPropagation(),f(_,J,ge)},onMouseDown:je=>je.stopPropagation(),style:{display:"block",width:"100%",textAlign:"left",padding:"6px 12px",marginBottom:"2px",background:re?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",color:"#333"},children:[a.jsx("input",{type:"radio",name:`componentType-${q}`,checked:re,onChange:()=>f(_,J,ge),onMouseDown:je=>je.stopPropagation(),style:{marginRight:"10px",width:"20px",height:"20px",cursor:"pointer",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",border:re?"2px solid #0066cc":"2px solid #999",borderRadius:"50%",backgroundColor:re?"#0066cc":"transparent",position:"relative",flexShrink:0}}),K]},`${_}-${E}-${k}`)})})]},q)})})]})]})]})})},kv=({visible:n,onClose:i,powerBuses:o,setPowerBuses:s,editingPowerBusId:u,setEditingPowerBusId:f,powers:v})=>{const[h,b]=U.useState(null),[x,T]=U.useState(!1),[D,R]=U.useState(null),C=U.useRef(null);U.useEffect(()=>{n&&!h&&b({x:window.innerWidth/2-140,y:window.innerHeight/2-200})},[n,h]),U.useEffect(()=>{if(!x)return;const q=X=>{h&&D&&b({x:X.clientX-D.x,y:X.clientY-D.y})},se=()=>{T(!1),R(null)};return window.addEventListener("mousemove",q),window.addEventListener("mouseup",se),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",se)}},[x,h,D]);const Z=o.filter(q=>q.id!==u),O=o.find(q=>q.id===u);if(!n)return null;const P=[...Z].sort((q,se)=>{const X=V=>{const $=V.match(/([+-]?)(\d+\.?\d*)/);if($){const k=$[1]||"+",S=parseFloat($[2]);return{absValue:Math.abs(S),isNegative:k==="-"}}return{absValue:1/0,isNegative:!1}},_=X(q.voltage),E=X(se.voltage);return _.absValue!==E.absValue?_.absValue-E.absValue:_.isNegative!==E.isNegative?_.isNegative?-1:1:0}),H=O?[...P,O]:P,ae=()=>{const q={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};s(se=>[...se,q]),f(q.id)},ce=q=>{const se=q.target;se.tagName==="BUTTON"||se.tagName==="INPUT"||se.closest("button")||se.closest("input")||h&&(R({x:q.clientX-h.x,y:q.clientY-h.y}),T(!0),q.preventDefault())};return a.jsxs("div",{ref:C,style:{position:"fixed",top:h?`${h.y}px`:"50%",left:h?`${h.x}px`:"50%",transform:h?"none":"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",display:"flex",flexDirection:"column",cursor:x?"grabbing":"default"},children:[a.jsxs("div",{onMouseDown:ce,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:x?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Manage Power Buses"}),a.jsx("button",{onClick:i,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:H.map(q=>{const se=o.find(V=>V.id===q.id)||q,X=o.findIndex(V=>V.id===q.id),_=o.some(V=>V.name===se.name&&V.id!==q.id),E=o.some(V=>V.voltage===se.voltage&&V.id!==q.id);return a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Name:"}),a.jsx("input",{type:"text",value:se.name,onChange:V=>{const $=V.target.value;if(!o.some(S=>S.name===$&&S.id!==q.id)){const S=[...o];X>=0&&(S[X]={...se,name:$},s(S))}},placeholder:"e.g., +5VDC",style:{flex:1,padding:"2px 3px",border:_?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Value:"}),a.jsx("input",{type:"text",inputMode:"decimal",value:se.voltage,onChange:V=>{const $=V.target.value;if($===""||/^[+-]?\d*\.?\d*$/.test($)){const k=[...o];X>=0&&(k[X]={...se,voltage:$},s(k))}},onBlur:V=>{const $=V.target.value.trim();if($==="")return;const k=parseFloat($);if(!isNaN(k)){const S=k>=0?"+":"-",J=Math.abs(k),re=`${S}${J.toFixed(1).replace(/\.?0+$/,"")}`,ye=[...o];X>=0&&(ye[X]={...se,voltage:re},s(ye))}},placeholder:"e.g., +5.0",style:{flex:1,padding:"2px 3px",border:E?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]})]}),a.jsx("input",{type:"color",value:se.color,onChange:V=>{const $=[...o];X>=0&&($[X]={...se,color:V.target.value},s($))},style:{width:"24px",height:"24px",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",flexShrink:0},title:"Color"}),a.jsx("button",{onClick:()=>{const V=v.filter($=>$.powerBusId===q.id);if(V.length>0){alert(`Cannot delete: ${V.length} power node(s) are using this bus. Remove or reassign them first.`);return}s($=>$.filter(k=>k.id!==q.id))},style:{padding:"2px 6px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"9px",flexShrink:0},children:"Delete"})]})},q.id)})}),a.jsxs("div",{style:{padding:"6px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"4px",flexShrink:0},children:[a.jsx("button",{onClick:ae,style:{flex:1,padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",fontSize:"10px"},children:"+ Add Power Bus"}),a.jsx("button",{onClick:i,style:{flex:1,padding:"4px 8px",background:"#0b5fff",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",fontSize:"10px",fontWeight:500},children:"Close"})]})]})},Av=({visible:n,onClose:i,groundBuses:o,setGroundBuses:s,editingGroundBusId:u,setEditingGroundBusId:f,grounds:v})=>{const[h,b]=U.useState(null),[x,T]=U.useState(!1),[D,R]=U.useState(null),C=U.useRef(null);U.useEffect(()=>{n&&!h&&b({x:window.innerWidth/2-140,y:window.innerHeight/2-200})},[n,h]),U.useEffect(()=>{if(!x)return;const q=X=>{h&&D&&b({x:X.clientX-D.x,y:X.clientY-D.y})},se=()=>{T(!1),R(null)};return window.addEventListener("mousemove",q),window.addEventListener("mouseup",se),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",se)}},[x,h,D]);const Z=o.filter(q=>q.id!==u),O=o.find(q=>q.id===u);if(!n)return null;const P=[...Z].sort((q,se)=>q.name.localeCompare(se.name)),H=O?[...P,O]:P,ae=()=>{const q={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};s(se=>[...se,q]),f(q.id)},ce=q=>{const se=q.target;se.tagName==="BUTTON"||se.tagName==="INPUT"||se.closest("button")||se.closest("input")||h&&(R({x:q.clientX-h.x,y:q.clientY-h.y}),T(!0),q.preventDefault())};return a.jsxs("div",{ref:C,style:{position:"fixed",top:h?`${h.y}px`:"50%",left:h?`${h.x}px`:"50%",transform:h?"none":"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",display:"flex",flexDirection:"column",cursor:x?"grabbing":"default"},children:[a.jsxs("div",{onMouseDown:ce,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:x?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[a.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Manage Ground Buses"}),a.jsx("button",{onClick:i,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:H.map(q=>{const se=o.find(E=>E.id===q.id)||q,X=o.findIndex(E=>E.id===q.id),_=o.some(E=>E.name===se.name&&E.id!==q.id);return a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[a.jsx("div",{style:{flex:1,minWidth:0},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[a.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"50px",flexShrink:0},children:"Name:"}),a.jsx("input",{type:"text",value:se.name,onChange:E=>{const V=E.target.value;if(!o.some(k=>k.name===V&&k.id!==q.id)){const k=[...o];X>=0&&(k[X]={...se,name:V},s(k))}},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 3px",border:_?"1px solid #ff0000":"1px solid #ddd",borderRadius:2,fontSize:"10px",background:"#f5f5f5",color:"#000"}})]})}),a.jsx("input",{type:"color",value:se.color,onChange:E=>{const V=[...o];X>=0&&(V[X]={...se,color:E.target.value},s(V))},style:{width:"24px",height:"24px",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",flexShrink:0},title:"Color"}),a.jsx("button",{onClick:()=>{const E=v.filter(V=>V.groundBusId===q.id);if(E.length>0){alert(`Cannot delete: ${E.length} ground node(s) are using this bus. Remove or reassign them first.`);return}s(V=>V.filter($=>$.id!==q.id))},style:{padding:"2px 6px",background:"#f5f5f5",color:"#333",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"9px",flexShrink:0},children:"Delete"})]},q.id)})}),a.jsxs("div",{style:{padding:"6px",borderTop:"1px solid #e0e0e0",display:"flex",gap:"4px",flexShrink:0},children:[a.jsx("button",{onClick:ae,style:{flex:1,padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:2,cursor:"pointer",fontSize:"10px"},children:"+ Add Ground Bus"}),a.jsx("button",{onClick:i,style:{flex:1,padding:"4px 8px",background:"#0b5fff",color:"#fff",border:"none",borderRadius:2,cursor:"pointer",fontSize:"10px",fontWeight:500},children:"Close"})]})]})},Nv=({visible:n,onClose:i,autoAssignDesignators:o,setAutoAssignDesignators:s,useGlobalDesignatorCounters:u,setUseGlobalDesignatorCounters:f})=>n?a.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"16px",zIndex:1e3,minWidth:"300px",maxWidth:"400px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[a.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Designators"}),a.jsx("button",{onClick:i,style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:{marginBottom:"16px"},children:[a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333",marginBottom:"12px"},children:[a.jsx("input",{type:"checkbox",checked:o,onChange:v=>{s(v.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),a.jsx("span",{children:"Automatically assign designators"})]}),a.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4",marginBottom:"12px"},children:o?a.jsx("div",{children:"When enabled, new components automatically receive sequential designators (e.g., C1, C2, C3 for Capacitors; R1, R2, R3 for Resistors)."}):a.jsx("div",{children:"When disabled, you must manually assign designators to each component. The designator field will be empty when components are created."})}),a.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333"},children:[a.jsx("input",{type:"checkbox",checked:u,onChange:v=>{f(v.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),a.jsx("span",{children:"Use global designator counters"})]}),a.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4"},children:u?a.jsx("div",{children:"When ON, designators continue from global counters across all projects. New components start with the next value from the global counter (e.g., if global counter is C10, new capacitor will be C11)."}):a.jsx("div",{children:"When OFF (default), designators start at 1 for each project. Each project maintains its own independent designator sequence (e.g., C1, C2, C3...)."})})]}),a.jsx("button",{onClick:i,style:{width:"100%",padding:"6px 12px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}):null,Ay=({visible:n,title:i,message:o,onYes:s,onNo:u,onCancel:f,yesButtonRef:v})=>n?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:h=>{h.target===h.currentTarget&&f()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:h=>h.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:i}),a.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:o}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:f,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),a.jsx("button",{ref:v,onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}):null,_v=({visible:n,size:i,onSizeChange:o,onApply:s,onCancel:u})=>{const f=U.useRef(null);if(U.useEffect(()=>{n&&f.current&&(f.current.focus(),f.current.select())},[n]),!n)return null;const v=[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32];return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:h=>{h.target===h.currentTarget&&u()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:h=>h.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),a.jsx("input",{ref:f,type:"number",min:"1",max:"99",value:i,onChange:h=>{const b=parseInt(h.target.value)||1,x=Math.max(1,Math.min(99,b));o(x)},onKeyDown:h=>{if(h.key==="Enter"?s():h.key==="Escape"&&u(),h.key.length===1&&/[0-9]/.test(h.key)){const b=i.toString();b.length>=2&&f.current?.selectionStart===f.current?.selectionEnd&&f.current?.selectionStart===b.length&&h.preventDefault()}},onInput:h=>{const b=h.target,x=b.value;if(x.length>2){b.value=x.slice(0,2);const T=parseInt(b.value)||1;o(Math.max(1,Math.min(99,T)))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),a.jsxs("select",{value:v.includes(i)?i:"",onChange:h=>{const b=parseInt(h.target.value);!isNaN(b)&&b>0&&o(b)},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[a.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),v.map(h=>a.jsxs("option",{value:h,style:{background:"#1f1f24",color:"#f2f2f2"},children:[h," pixels"]},h))]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})})},Lv=({visible:n,interval:i,onIntervalChange:o,onApply:s,onCancel:u})=>n?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:f=>{f.target===f.currentTarget&&u()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:f=>f.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),a.jsxs("select",{value:i===null?"disable":(i||5).toString(),onChange:f=>{const v=f.target.value;if(v==="disable")o(null);else{const h=parseFloat(v);!isNaN(h)&&h>0&&o(h)}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[a.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),a.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),a.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),a.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),a.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),a.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}):null,zv=({visible:n,interval:i,onIntervalChange:o,onEnable:s,onSkip:u})=>n?a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:f=>{f.target===f.currentTarget&&u()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:f=>f.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),a.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),a.jsxs("select",{value:i===null?"disable":(i||5).toString(),onChange:f=>{const v=f.target.value;if(v==="disable")o(null);else{const h=parseFloat(v);!isNaN(h)&&h>0&&o(h)}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[a.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),a.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),a.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),a.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),a.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),a.jsx("button",{onClick:s,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})}):null,Pv=({visible:n,projectDirHandle:i,onClose:o,onRestore:s,position:u,isDragging:f=!1,onDragStart:v})=>{const[h,b]=U.useState([]),[x,T]=U.useState(!1),[D,R]=U.useState(null),[C,Z]=U.useState(null),O=U.useRef(null);U.useEffect(()=>{if(!n||!i){b([]),R(null),Z(null);return}(async()=>{T(!0),Z(null);try{let se;try{se=await i.getDirectoryHandle("history")}catch{b([]),T(!1);return}const X=E=>{const V=E.match(/_(\d{4})_(\d{2})_(\d{2})-(\d{2})-(\d{2})-(\d{2})\.json$/);if(V){const[,k,S,J,re,ye,K]=V;return new Date(parseInt(k),parseInt(S)-1,parseInt(J),parseInt(re),parseInt(ye),parseInt(K))}const $=E.match(/_(\d{4})_(\d{2})_(\d{2})_(\d{2})_(\d{2})_(\d{2})\.json$/);if($){const[,k,S,J,re,ye,K]=$;return new Date(parseInt(k),parseInt(S)-1,parseInt(J),parseInt(re),parseInt(ye),parseInt(K))}return null},_=[];for await(const E of se.keys())if(E.endsWith(".json"))try{const $=await(await se.getFileHandle(E)).getFile(),k=X(E);_.push({name:E,lastModified:new Date($.lastModified),size:$.size,timestamp:k||new Date($.lastModified)})}catch(V){console.warn(`Failed to read file ${E}:`,V)}_.sort((E,V)=>V.timestamp.getTime()-E.timestamp.getTime()),b(_)}catch(se){console.error("Failed to load history files:",se),Z("Failed to load history files. Please try again.")}finally{T(!1)}})()},[n,i]);const P=async()=>{if(D)try{await s(D),o()}catch(q){console.error("Failed to restore file:",q),Z("Failed to restore file. Please try again.")}},H=q=>q.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),ae=q=>q<1024?`${q} B`:q<1024*1024?`${(q/1024).toFixed(1)} KB`:`${(q/(1024*1024)).toFixed(1)} MB`;if(!n)return null;const ce=u?{position:"fixed",left:`${u.x}px`,top:`${u.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"500px",maxWidth:"700px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:f?"grabbing":"default"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#fff",borderRadius:8,minWidth:"500px",maxWidth:"700px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column"};return a.jsxs("div",{style:ce,children:[a.jsxs("div",{onMouseDown:v,style:{backgroundColor:"#f5f5f5",padding:"12px 16px",borderBottom:"1px solid #ddd",borderRadius:"8px 8px 0 0",cursor:f?"grabbing":"move",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h2",{style:{margin:0,fontSize:"16px",fontWeight:600,color:"#000"},children:"PastTime"}),a.jsx("button",{onClick:o,style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),a.jsxs("div",{style:{padding:"16px",display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[C&&a.jsx("div",{style:{padding:"12px",backgroundColor:"#fee",color:"#c00",borderRadius:4,marginBottom:"12px"},children:C}),x?a.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"Loading history files..."}):h.length===0?a.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666"},children:"No history files found."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{marginBottom:"12px",color:"#333",fontSize:"14px"},children:"Select a file to restore:"}),a.jsx("div",{ref:O,style:{border:"1px solid #ddd",borderRadius:4,overflowY:"auto",maxHeight:"400px",backgroundColor:"#fafafa"},children:h.map((q,se)=>a.jsxs("div",{onClick:()=>R(q.name),style:{padding:"12px 16px",borderBottom:se<h.length-1?"1px solid #eee":"none",backgroundColor:D===q.name?"#e6f0ff":"transparent",cursor:"pointer",transition:"background-color 0.1s"},onMouseEnter:X=>{D!==q.name&&(X.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:X=>{D!==q.name&&(X.currentTarget.style.backgroundColor="transparent")},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"},children:[a.jsx("div",{style:{fontWeight:600,color:"#000",fontSize:"13px",wordBreak:"break-word",flex:1},children:q.name}),a.jsx("div",{style:{color:"#666",fontSize:"12px",marginLeft:"12px",whiteSpace:"nowrap"},children:ae(q.size)})]}),a.jsx("div",{style:{color:"#666",fontSize:"12px"},children:H(q.lastModified)})]},q.name))})]})]}),a.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px"},children:[a.jsx("button",{onClick:o,style:{padding:"6px 16px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"13px"},children:"Cancel"}),a.jsx("button",{onClick:P,disabled:!D||x,style:{padding:"6px 16px",background:D&&!x?"#0066cc":"#ccc",border:"none",borderRadius:4,cursor:D&&!x?"pointer":"not-allowed",color:"#fff",fontSize:"13px",fontWeight:500},children:"Restore"})]})]})};function Dv(){const[n,i]=U.useState([]),[o,s]=U.useState(!1),[u,f]=U.useState([]),[v,h]=U.useState(null),[b,x]=U.useState("trace"),[T,D]=U.useState("top"),R=U.useRef([]),C=U.useRef(0),Z=U.useRef(!1),O=U.useCallback(()=>{s(!0),f([]),R.current=[]},[]),P=U.useCallback(()=>{s(!1),f([]),R.current=[]},[]),H=U.useCallback(ce=>{f(q=>[...q,ce]),R.current=[...R.current,ce]},[]),ae=U.useCallback(ce=>{i(q=>[...q,ce]),f([]),R.current=[]},[]);return{drawingStrokes:n,setDrawingStrokes:i,isDrawing:o,setIsDrawing:s,currentStroke:u,setCurrentStroke:f,tracePreviewMousePos:v,setTracePreviewMousePos:h,drawingMode:b,setDrawingMode:x,selectedDrawingLayer:T,setSelectedDrawingLayer:D,currentStrokeRef:R,lastTraceClickTimeRef:C,isDoubleClickingTraceRef:Z,startDrawing:O,stopDrawing:P,addPointToStroke:H,finishStroke:ae}}function Ev(){const[n,i]=U.useState(new Set),[o,s]=U.useState(!1),[u,f]=U.useState(new Set),[v,h]=U.useState(new Set),[b,x]=U.useState(new Set),T=U.useCallback(()=>{i(new Set),f(new Set),h(new Set),x(new Set)},[]),D=U.useCallback((Z,O="stroke")=>{O==="stroke"?i(P=>new Set([...P,Z])):O==="component"?f(P=>new Set([...P,Z])):O==="power"?h(P=>new Set([...P,Z])):O==="ground"&&x(P=>new Set([...P,Z]))},[]),R=U.useCallback((Z,O="stroke")=>{O==="stroke"?i(P=>{const H=new Set(P);return H.delete(Z),H}):O==="component"?f(P=>{const H=new Set(P);return H.delete(Z),H}):O==="power"?h(P=>{const H=new Set(P);return H.delete(Z),H}):O==="ground"&&x(P=>{const H=new Set(P);return H.delete(Z),H})},[]),C=U.useCallback((Z,O="stroke")=>{O==="stroke"?i(Z):O==="component"?f(Z):O==="power"?h(Z):O==="ground"&&x(Z)},[]);return{selectedIds:n,setSelectedIds:i,isSelecting:o,setIsSelecting:s,selectedComponentIds:u,setSelectedComponentIds:f,selectedPowerIds:v,setSelectedPowerIds:h,selectedGroundIds:b,setSelectedGroundIds:x,clearSelection:T,addToSelection:D,removeFromSelection:R,setSelection:C}}function Rv(){const[n,i]=U.useState(null),[o,s]=U.useState(!1),[u,f]=U.useState(null),[v,h]=U.useState("nudge"),b=U.useCallback((T,D)=>{i(T),s(!0),f(D)},[]),x=U.useCallback(()=>{s(!1),i(null),f(null)},[]);return{selectedImageForTransform:n,setSelectedImageForTransform:i,isTransforming:o,setIsTransforming:s,transformStartPos:u,setTransformStartPos:f,transformMode:v,setTransformMode:h,startTransform:b,stopTransform:x}}function Mv(){const[n,i]=U.useState(null),[o,s]=U.useState(null),[u,f]=U.useState("overlay"),[v,h]=U.useState(50),[b,x]=U.useState(!1),[T,D]=U.useState(2e3),[R,C]=U.useState(!1),Z=U.useCallback(H=>{i(H)},[]),O=U.useCallback(H=>{s(H)},[]),P=U.useCallback(()=>{i(null),s(null)},[]);return{topImage:n,setTopImage:i,bottomImage:o,setBottomImage:s,currentView:u,setCurrentView:f,transparency:v,setTransparency:h,isTransparencyCycling:b,setIsTransparencyCycling:x,transparencyCycleSpeed:T,setTransparencyCycleSpeed:D,isGrayscale:R,setIsGrayscale:C,loadTopImage:Z,loadBottomImage:O,clearImages:P}}function Bv(){const[n,i]=U.useState(1),[o,s]=U.useState({x:0,y:0}),[u,f]=U.useState(0),[v,h]=U.useState(!1),[b,x]=U.useState(!1),[T,D]=U.useState(!1),R=U.useCallback(()=>{i(1),s({x:0,y:0}),f(0),h(!1)},[]),C=U.useCallback((ce=1.2)=>{i(q=>q*ce)},[]),Z=U.useCallback((ce=1.2)=>{i(q=>q/ce)},[]),O=U.useCallback(ce=>{i(ce)},[]),P=U.useCallback((ce,q,se)=>{const X=ce/se,_=q/se;s(E=>({x:E.x-X,y:E.y-_}))},[]),H=U.useCallback((ce,q)=>{s({x:ce,y:q})},[]),ae=U.useCallback((ce,q)=>({x:ce-o.x*n,y:q-o.y*n}),[o,n]);return{viewScale:n,setViewScale:i,cameraWorldCenter:o,setCameraWorldCenter:s,viewRotation:u,setViewRotation:f,viewFlipX:v,setViewFlipX:h,isShiftConstrained:b,setIsShiftConstrained:x,showBothLayers:T,setShowBothLayers:D,resetView:R,zoomIn:C,zoomOut:Z,setZoom:O,pan:P,setCameraCenter:H,getViewPan:ae}}function Ov(){const[n,i]=U.useState(()=>[{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),[o,s]=U.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"}]),[u,f]=U.useState([]),[v,h]=U.useState([]),[b,x]=U.useState(null),[T,D]=U.useState(null),R=U.useCallback(X=>{i(_=>[..._,X])},[]),C=U.useCallback((X,_)=>{i(E=>E.map(V=>V.id===X?{...V,..._}:V))},[]),Z=U.useCallback(X=>{i(_=>_.filter(E=>E.id!==X)),f(_=>_.filter(E=>E.powerBusId!==X))},[]),O=U.useCallback(X=>{f(_=>[..._,X])},[]),P=U.useCallback(X=>{f(_=>_.filter(E=>E.id!==X))},[]),H=U.useCallback(X=>{h(_=>[..._,X])},[]),ae=U.useCallback(X=>{h(_=>_.filter(E=>E.id!==X))},[]),ce=U.useCallback(X=>{s(_=>[..._,X])},[]),q=U.useCallback((X,_)=>{s(E=>E.map(V=>V.id===X?{...V,..._}:V))},[]),se=U.useCallback(X=>{s(_=>_.filter(E=>E.id!==X)),h(_=>_.filter(E=>E.groundBusId===X))},[]);return{powerBuses:n,setPowerBuses:i,groundBuses:o,setGroundBuses:s,powerSymbols:u,setPowerSymbols:f,groundSymbols:v,setGroundSymbols:h,powerEditor:b,setPowerEditor:x,groundEditor:T,setGroundEditor:D,addPowerBus:R,updatePowerBus:C,removePowerBus:Z,addPowerSymbol:O,removePowerSymbol:P,addGroundSymbol:H,removeGroundSymbol:ae,addGroundBus:ce,updateGroundBus:q,removeGroundBus:se}}const gi={brushColor:"#008080",brushSize:6,topTraceColor:"#AA4499",bottomTraceColor:"#F781BF",topTraceSize:6,bottomTraceSize:6,viaSize:18,viaColor:"#ff0000",topPadColor:"#0072B2",bottomPadColor:"#56B4E9",topPadSize:18,bottomPadSize:18,topTestPointColor:"#FFFF00",bottomTestPointColor:"#FFFF00",topTestPointSize:18,bottomTestPointSize:18,topComponentColor:"#8C564B",bottomComponentColor:"#9C755F",topComponentSize:18,bottomComponentSize:18,componentConnectionColor:"#E69F00",componentConnectionSize:3};function Iv(){const[n,i]=U.useState(gi.brushColor),[o,s]=U.useState(gi.brushSize),[u,f]=U.useState(gi.topTraceColor),[v,h]=U.useState(gi.bottomTraceColor),[b,x]=U.useState(gi.topTraceSize),[T,D]=U.useState(gi.bottomTraceSize),[R,C]=U.useState(gi.topPadColor),[Z,O]=U.useState(gi.bottomPadColor),[P,H]=U.useState(gi.topPadSize),[ae,ce]=U.useState(gi.bottomPadSize),[q,se]=U.useState(gi.topTestPointColor),[X,_]=U.useState(gi.bottomTestPointColor),[E,V]=U.useState(gi.topTestPointSize),[$,k]=U.useState(gi.bottomTestPointSize),[S,J]=U.useState(gi.topComponentColor),[re,ye]=U.useState(gi.bottomComponentColor),[K,te]=U.useState(gi.topComponentSize),[ge,je]=U.useState(gi.bottomComponentSize),[be,F]=U.useState(gi.componentConnectionColor),[A,M]=U.useState(gi.componentConnectionSize),B=U.useCallback(()=>{i(gi.brushColor),s(gi.brushSize),f(gi.topTraceColor),h(gi.bottomTraceColor),x(gi.topTraceSize),D(gi.bottomTraceSize),C(gi.topPadColor),O(gi.bottomPadColor),H(gi.topPadSize),ce(gi.bottomPadSize),se(gi.topTestPointColor),_(gi.bottomTestPointColor),V(gi.topTestPointSize),k(gi.bottomTestPointSize),J(gi.topComponentColor),ye(gi.bottomComponentColor),te(gi.topComponentSize),je(gi.bottomComponentSize),F(gi.componentConnectionColor),M(gi.componentConnectionSize)},[]),de=U.useCallback(Pe=>{Pe.brushColor!==void 0&&i(Pe.brushColor),Pe.brushSize!==void 0&&s(Pe.brushSize),Pe.topTraceColor!==void 0&&f(Pe.topTraceColor),Pe.bottomTraceColor!==void 0&&h(Pe.bottomTraceColor),Pe.topTraceSize!==void 0&&x(Pe.topTraceSize),Pe.bottomTraceSize!==void 0&&D(Pe.bottomTraceSize),Pe.topPadColor!==void 0&&C(Pe.topPadColor),Pe.bottomPadColor!==void 0&&O(Pe.bottomPadColor),Pe.topPadSize!==void 0&&H(Pe.topPadSize),Pe.bottomPadSize!==void 0&&ce(Pe.bottomPadSize),Pe.topTestPointColor!==void 0&&se(Pe.topTestPointColor),Pe.bottomTestPointColor!==void 0&&_(Pe.bottomTestPointColor),Pe.topTestPointSize!==void 0&&V(Pe.topTestPointSize),Pe.bottomTestPointSize!==void 0&&k(Pe.bottomTestPointSize),Pe.topComponentColor!==void 0&&J(Pe.topComponentColor),Pe.bottomComponentColor!==void 0&&ye(Pe.bottomComponentColor),Pe.topComponentSize!==void 0&&te(Pe.topComponentSize),Pe.bottomComponentSize!==void 0&&je(Pe.bottomComponentSize),Pe.componentConnectionColor!==void 0&&F(Pe.componentConnectionColor),Pe.componentConnectionSize!==void 0&&M(Pe.componentConnectionSize)},[]),Ae=U.useCallback((Pe,nt,Ke)=>{},[]),Ee=U.useCallback((Pe,nt,Ke)=>{},[]),Ge=U.useCallback(()=>({brushColor:n,brushSize:o,topTraceColor:u,bottomTraceColor:v,topTraceSize:b,bottomTraceSize:T,viaSize:gi.viaSize,viaColor:gi.viaColor,topPadColor:R,bottomPadColor:Z,topPadSize:P,bottomPadSize:ae,topTestPointColor:q,bottomTestPointColor:X,topTestPointSize:E,bottomTestPointSize:$,topComponentColor:S,bottomComponentColor:re,topComponentSize:K,bottomComponentSize:ge,componentConnectionColor:be,componentConnectionSize:A}),[n,o,u,v,b,T,R,Z,P,ae,q,X,E,$,S,re,K,ge,be,A]);return{brushColor:n,setBrushColor:i,brushSize:o,setBrushSize:s,topTraceColor:u,setTopTraceColor:f,bottomTraceColor:v,setBottomTraceColor:h,topTraceSize:b,setTopTraceSize:x,bottomTraceSize:T,setBottomTraceSize:D,topPadColor:R,setTopPadColor:C,bottomPadColor:Z,setBottomPadColor:O,topPadSize:P,setTopPadSize:H,bottomPadSize:ae,setBottomPadSize:ce,topTestPointColor:q,setTopTestPointColor:se,bottomTestPointColor:X,setBottomTestPointColor:_,topTestPointSize:E,setTopTestPointSize:V,bottomTestPointSize:$,setBottomTestPointSize:k,topComponentColor:S,setTopComponentColor:J,bottomComponentColor:re,setBottomComponentColor:ye,topComponentSize:K,setTopComponentSize:te,bottomComponentSize:ge,setBottomComponentSize:je,componentConnectionColor:be,setComponentConnectionColor:F,componentConnectionSize:A,setComponentConnectionSize:M,resetToDefaults:B,loadFromProject:de,getCurrentSettings:Ge,saveDefaultSize:Ae,saveDefaultColor:Ee}}function Uv(n,i,o,s,u,f,v,h,b,x,T,D,R,C,Z,O,P,H,ae,ce,q,se,X,_,E){const[V,$]=U.useState(()=>n()),k=U.useRef(null),S=U.useRef(s),J=U.useRef(u),re=U.useCallback(te=>i==="draw"&&o==="trace"?te.get("trace"):i==="draw"&&o==="via"?te.get("via"):i==="draw"&&o==="pad"?te.get("pad"):i==="component"?te.get("component"):i==="power"?te.get("power"):i==="ground"?te.get("ground"):null,[i,o]);U.useEffect(()=>{$(te=>{const ge=re(te),je=ge?.id||null,be=k.current,F=new Map(te);if(be&&be!==je){const A=te.get(be);A&&F.set(be,{...A,settings:{color:S.current,size:J.current}})}if(ge&&je!==be)if(i==="draw"&&o==="trace"){const A=se||"top",M=A==="top"?f:v,B=A==="top"?h:b;S.current=M,J.current=B,F.set("trace",{...ge,settings:{color:M,size:B}})}else if(i==="draw"&&o==="pad"){const A=X||"top",M=A==="top"?x:T,B=A==="top"?D:R;S.current=M,J.current=B,F.set("pad",{...ge,settings:{color:M,size:B}})}else if(i==="component"){const A=E||"top",M=A==="top"?H:ae,B=A==="top"?ce:q;S.current=M,J.current=B,F.set("component",{...ge,settings:{color:M,size:B}})}else S.current=ge.settings.color,J.current=ge.settings.size;return k.current=je,F})},[i,o,f,v,h,b,x,T,D,R,H,ae,ce,q,se,X,E,re]);const ye=U.useCallback((te,ge)=>{$(je=>{const be=new Map(je),F=be.get(te);return F&&be.set(te,{...F,settings:ge}),be})},[]),K=U.useCallback((te,ge,je)=>{$(be=>{const F=new Map(be),A=F.get(te);if(A){const M=new Map(A.layerSettings);M.set(ge,je),F.set(te,{...A,layerSettings:M})}return F})},[]);return{toolRegistry:V,setToolRegistry:$,updateToolSettings:ye,updateToolLayerSettings:K,getCurrentToolDef:re}}function Fv(n){const{currentTool:i,drawingMode:o,traceToolLayer:s,padToolLayer:u,testPointToolLayer:f,componentToolLayer:v}=n,[h,b]=U.useState(0),x=U.useCallback(()=>i==="draw"&&o==="via"?"via":i==="draw"&&o==="pad"?u==="bottom"?"padBottom":"padTop":i==="draw"&&o==="testPoint"?f==="bottom"?"testPointBottom":"testPointTop":i==="draw"&&o==="trace"?s==="bottom"?"traceBottom":"traceTop":i==="component"?v==="bottom"?"componentBottom":"componentTop":i==="power"?"power":i==="ground"?"ground":null,[i,o,u,f,s,v]),T=U.useCallback(()=>{const Z=x();if(Z){const O=Kn.get(Z);return{currentTool:i,drawingMode:o,layer:i==="draw"&&o==="pad"?u||"top":i==="draw"&&o==="testPoint"?f||"top":i==="draw"&&o==="trace"?s||"top":i==="component"?v||"top":void 0,toolInstanceId:Z,color:O.color,size:O.size}}return{currentTool:i,drawingMode:o,layer:void 0,toolInstanceId:null,color:"#000000",size:10}},[i,o,u,f,s,v,x]);U.useEffect(()=>{const Z=x();return Z?Kn.subscribe(Z,()=>{b(P=>P+1)}):void 0},[x]);const D=T(),R=U.useCallback(Z=>{const O=x();O&&Kn.setColor(O,Z)},[x]),C=U.useCallback(Z=>{const O=x();O&&Kn.setSize(O,Z)},[x]);return{toolState:D,setColor:R,setSize:C,getCurrentToolInstanceId:x}}function qv(){const[n,i]=U.useState(!1),[o,s]=U.useState(!1),[u,f]=U.useState(!1),[v,h]=U.useState(!1),[b,x]=U.useState(!1),[T,D]=U.useState(!1),[R,C]=U.useState(!1),[Z,O]=U.useState(!1),P=U.useCallback(()=>{i(!0),s(!0),f(!0),h(!0),x(!0),D(!0),C(!0),O(!0)},[]),H=U.useCallback(()=>{i(!1),s(!1),f(!1),h(!1),x(!1),D(!1),C(!1),O(!1)},[]);return{areImagesLocked:n,setAreImagesLocked:i,areViasLocked:o,setAreViasLocked:s,arePadsLocked:u,setArePadsLocked:f,areTestPointsLocked:v,setAreTestPointsLocked:h,areTracesLocked:b,setAreTracesLocked:x,areComponentsLocked:T,setAreComponentsLocked:D,areGroundNodesLocked:R,setAreGroundNodesLocked:C,arePowerNodesLocked:Z,setArePowerNodesLocked:O,lockAll:P,unlockAll:H}}function Hv(){const[n,i]=U.useState(null),[o,s]=U.useState({visible:!1,size:6}),[u,f]=U.useState({visible:!1,interval:5}),[v,h]=U.useState({visible:!1,source:null,interval:5}),[b,x]=U.useState({visible:!1,text:""}),[T,D]=U.useState({visible:!1,title:"",message:""}),[R,C]=U.useState({visible:!1}),[Z,O]=U.useState({visible:!1}),[P,H]=U.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[ae,ce]=U.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[q,se]=U.useState(!1),[X,_]=U.useState(!0),[E,V]=U.useState(!1);return{openMenu:n,setOpenMenu:i,setSizeDialog:o,setSetSizeDialog:s,autoSaveDialog:u,setAutoSaveDialog:f,autoSavePromptDialog:v,setAutoSavePromptDialog:h,debugDialog:b,setDebugDialog:x,errorDialog:T,setErrorDialog:D,newProjectDialog:R,setNewProjectDialog:C,openProjectDialog:Z,setOpenProjectDialog:O,newProjectSetupDialog:P,setNewProjectSetupDialog:H,saveAsDialog:ae,setSaveAsDialog:ce,showColorPicker:q,setShowColorPicker:se,showWelcomeDialog:X,setShowWelcomeDialog:_,transformImagesDialogVisible:E,setTransformImagesDialogVisible:V}}function Vv(){const[n,i]=U.useState(!1),[o,s]=U.useState(1),[u,f]=U.useState(null),[v,h]=U.useState(""),[b,x]=U.useState(""),[T,D]=U.useState(null),[R,C]=U.useState("pcb_project"),[Z,O]=U.useState([]),[P,H]=U.useState(-1),ae=U.useRef(null),ce=U.useRef(!1),q=U.useRef(!1);return{autoSaveEnabled:n,setAutoSaveEnabled:i,autoSaveInterval:o,setAutoSaveInterval:s,autoSaveDirHandle:u,setAutoSaveDirHandle:f,autoSaveBaseName:v,setAutoSaveBaseName:h,currentProjectFilePath:b,setCurrentProjectFilePath:x,projectDirHandle:T,setProjectDirHandle:D,projectName:R,setProjectName:C,autoSaveFileHistory:Z,setAutoSaveFileHistory:O,currentFileIndex:P,setCurrentFileIndex:H,autoSaveIntervalRef:ae,hasChangesSinceLastAutoSaveRef:ce,prevAutoSaveEnabledRef:q}}function Wv(){const[n,i]=U.useState(null),o=U.useRef(!1),s=U.useCallback((h,b,x,T,D)=>{if(o.current)return;const R={drawingStrokes:JSON.parse(JSON.stringify(h)),componentsTop:JSON.parse(JSON.stringify(b)),componentsBottom:JSON.parse(JSON.stringify(x)),powerSymbols:JSON.parse(JSON.stringify(T)),groundSymbols:JSON.parse(JSON.stringify(D))};i(R)},[]),u=U.useCallback(()=>{if(!n)return null;o.current=!0;const h=n;return i(null),setTimeout(()=>{o.current=!1},100),h},[n]),f=n!==null,v=U.useCallback(()=>{i(null)},[]);return{saveSnapshot:s,undo:u,canUndo:f,clearSnapshot:v}}function Yv(){const i=Mv(),{topImage:o,setTopImage:s,bottomImage:u,setBottomImage:f,currentView:v,setCurrentView:h,transparency:b,setTransparency:x,isTransparencyCycling:T,setIsTransparencyCycling:D,transparencyCycleSpeed:R,setTransparencyCycleSpeed:C,isGrayscale:Z,setIsGrayscale:O}=i,[P,H]=U.useState("none"),[ae,ce]=U.useState(()=>{const c=localStorage.getItem("bomExportFormat");return c==="json"||c==="pdf"?c:"pdf"});Nt.useEffect(()=>{localStorage.setItem("bomExportFormat",ae)},[ae]);const q=Iv(),{brushColor:se,setBrushColor:X,brushSize:_,setBrushSize:E,topTraceColor:V,setTopTraceColor:$,bottomTraceColor:k,setBottomTraceColor:S,topTraceSize:J,setTopTraceSize:re,bottomTraceSize:ye,setBottomTraceSize:K,topPadColor:te,setTopPadColor:ge,bottomPadColor:je,setBottomPadColor:be,topPadSize:F,setTopPadSize:A,bottomPadSize:M,setBottomPadSize:B,topTestPointColor:de,setTopTestPointColor:Ae,bottomTestPointColor:Ee,setBottomTestPointColor:Ge,topTestPointSize:Pe,setTopTestPointSize:nt,bottomTestPointSize:Ke,setBottomTestPointSize:wt,topComponentColor:St,setTopComponentColor:Bt,bottomComponentColor:pe,setBottomComponentColor:_t,topComponentSize:pn,setTopComponentSize:Zt,bottomComponentSize:dt,setBottomComponentSize:Qt,componentConnectionColor:Et,setComponentConnectionColor:vn,componentConnectionSize:Jt,setComponentConnectionSize:Wn,saveDefaultSize:kt,saveDefaultColor:Pt}=q,fi=Dv(),{drawingStrokes:ut,setDrawingStrokes:Ct,isDrawing:Mn,setIsDrawing:Gt,currentStroke:Dn,setCurrentStroke:Nn,tracePreviewMousePos:en,setTracePreviewMousePos:wn,drawingMode:at,setDrawingMode:$t,selectedDrawingLayer:Ft,setSelectedDrawingLayer:qt,currentStrokeRef:Sn,lastTraceClickTimeRef:Oi,isDoubleClickingTraceRef:In}=fi,cn=Rv(),{selectedImageForTransform:Ht,setSelectedImageForTransform:yo,isTransforming:Wr,setIsTransforming:_o,transformStartPos:Lo,setTransformStartPos:Vt,transformMode:zo,setTransformMode:da}=cn,Jo=Bv(),{viewScale:bt,setViewScale:ui,viewRotation:Jn,setViewRotation:ur,viewFlipX:Hi,setViewFlipX:jr,cameraWorldCenter:vi,setCameraWorldCenter:yi,resetView:mo,isShiftConstrained:Qo,setIsShiftConstrained:_a,showBothLayers:hl,setShowBothLayers:La,setCameraCenter:za,getViewPan:ls}=Jo,[Yn,Po]=U.useState("top"),[Ti,ea]=U.useState("top"),[Ln,_s]=U.useState("top"),[Hn,ta]=U.useState("top"),pa=Nt.useRef("top"),Ls=Nt.useRef("top"),zs=Nt.useRef("top"),Ks=Nt.useRef("top");Nt.useEffect(()=>{pa.current=Yn},[Yn]),Nt.useEffect(()=>{Ls.current=Ti},[Ti]),Nt.useEffect(()=>{zs.current=Ln},[Ln]),Nt.useEffect(()=>{Ks.current=Hn},[Hn]);const hc=Fv({currentTool:P,drawingMode:at,traceToolLayer:Yn,padToolLayer:Ti,testPointToolLayer:Ln,componentToolLayer:Hn}),{toolState:Xi}=hc,Ps=Uv(cv,P,at,se,_,V,k,J,ye,te,je,F,M,de,Ee,Pe,Ke,St,pe,pn,dt,Yn,Ti,Ln,Hn),{toolRegistry:On,setToolRegistry:Bn,getCurrentToolDef:Ds,updateToolSettings:Pa,updateToolLayerSettings:Pr}=Ps,xo=Nt.useRef(null),tr=Nt.useRef(se),Un=Nt.useRef(_);Nt.useEffect(()=>{Bn(c=>{const y=Ds(c),N=y?.id||null,Y=xo.current,ie=new Map(c);if(Y&&Y!==N){const Se=c.get(Y);Se&&ie.set(Y,{...Se,settings:{color:tr.current,size:Un.current}})}if(y&&N!==Y)if(P==="draw"&&at==="trace"){const Se=Yn||"top",I=Se==="top"?V:k,he=Se==="top"?J:ye;X(I),E(he),tr.current=I,Un.current=he;const ne=new Map(y.layerSettings);ne.set("top",{color:V,size:J}),ne.set("bottom",{color:k,size:ye}),ie.set("trace",{...y,settings:{color:I,size:he},layerSettings:ne})}else if(P==="draw"&&at==="pad"){const Se=Ti||"top",I=Se==="top"?te:je,he=Se==="top"?F:M;X(I),E(he),tr.current=I,Un.current=he;const ne=new Map(y.layerSettings);ne.set("top",{color:te,size:F}),ne.set("bottom",{color:je,size:M}),ie.set("pad",{...y,settings:{color:I,size:he},layerSettings:ne})}else if(P==="draw"&&at==="testPoint"){const Se=Ln||"top",I=Se==="top"?de:Ee,he=Se==="top"?Pe:Ke;X(I),E(he),tr.current=I,Un.current=he;const ne=new Map(y.layerSettings);ne.set("top",{color:de,size:Pe}),ne.set("bottom",{color:Ee,size:Ke}),ie.set("testPoint",{...y,settings:{color:I,size:he},layerSettings:ne})}else if(P==="component"){const Se=Hn||"top",I=Se==="top"?St:pe,he=Se==="top"?pn:dt;X(I),E(he),tr.current=I,Un.current=he;const ne=new Map(y.layerSettings);ne.set("top",{color:St,size:pn}),ne.set("bottom",{color:pe,size:dt}),ie.set("component",{...y,settings:{color:I,size:he},layerSettings:ne})}else{const Se=y.settings;X(Se.color),E(Se.size),tr.current=Se.color,Un.current=Se.size}return xo.current=N,ie})},[P,at,Ds,V,k,J,ye,te,je,F,M,de,Ee,Pe,Ke,Ln,St,pe,pn,dt]),Nt.useEffect(()=>{const c=On.get("trace");if(c){const ie=c.layerSettings.get("top"),Se=c.layerSettings.get("bottom");ie&&($(ie.color),re(ie.size)),Se&&(S(Se.color),K(Se.size))}const y=On.get("pad");if(y){const ie=y.layerSettings.get("top"),Se=y.layerSettings.get("bottom");ie&&(ge(ie.color),A(ie.size)),Se&&(be(Se.color),B(Se.size))}const N=On.get("testPoint");if(N){const ie=N.layerSettings.get("top"),Se=N.layerSettings.get("bottom");ie&&(Ae(ie.color),nt(ie.size)),Se&&(Ge(Se.color),wt(Se.size))}const Y=On.get("component");if(Y){const ie=Y.layerSettings.get("top"),Se=Y.layerSettings.get("bottom");ie&&(Bt(ie.color),Zt(ie.size)),Se&&(_t(Se.color),Qt(Se.size))}},[]),Nt.useEffect(()=>{Bn(c=>{const y=new Map(c),N=c.get("trace");if(N){const he=new Map(N.layerSettings);he.set("top",{color:V,size:J}),he.set("bottom",{color:k,size:ye}),y.set("trace",{...N,layerSettings:he})}const Y=c.get("pad");if(Y){const he=new Map(Y.layerSettings);he.set("top",{color:te,size:F}),he.set("bottom",{color:je,size:M}),y.set("pad",{...Y,layerSettings:he})}const ie=c.get("testPoint");if(ie){const he=new Map(ie.layerSettings);he.set("top",{color:de,size:Pe}),he.set("bottom",{color:Ee,size:Ke}),y.set("testPoint",{...ie,layerSettings:he})}const Se=c.get("component");if(Se){const he=new Map(Se.layerSettings);he.set("top",{color:St,size:pn}),he.set("bottom",{color:pe,size:dt}),y.set("component",{...Se,layerSettings:he})}const I=c.get("componentConnection");return I&&y.set("componentConnection",{...I,settings:{color:Et,size:Jt}}),y})},[V,k,J,ye,te,je,F,M,de,Ee,Pe,Ke,St,pe,pn,dt,Et,Jt,Bn]),Nt.useEffect(()=>{Bn(c=>{const y=Ds(c);if(y)if(P==="draw"&&at==="trace"){const N=Yn||"top";N==="top"?($(se),re(_),Pt("trace",se,"top"),kt("trace",_,"top")):(S(se),K(_),Pt("trace",se,"bottom"),kt("trace",_,"bottom"));const Y=new Map(c),ie=new Map(y.layerSettings);return ie.set(N,{color:se,size:_}),Y.set(y.id,{...y,layerSettings:ie,settings:{color:se,size:_}}),tr.current=se,Un.current=_,Y}else if(P==="draw"&&at==="pad"){const N=Ti||"top";N==="top"?(ge(se),A(_),Pt("pad",se,"top"),kt("pad",_,"top")):(be(se),B(_),Pt("pad",se,"bottom"),kt("pad",_,"bottom"));const Y=new Map(c),ie=new Map(y.layerSettings);return ie.set(N,{color:se,size:_}),Y.set(y.id,{...y,layerSettings:ie,settings:{color:se,size:_}}),tr.current=se,Un.current=_,Y}else if(P==="draw"&&at==="testPoint"){const N=Ln||"top";N==="top"?(Ae(se),nt(_),Pt("testPoint",se,"top"),kt("testPoint",_,"top")):(Ge(se),wt(_),Pt("testPoint",se,"bottom"),kt("testPoint",_,"bottom"));const Y=new Map(c),ie=new Map(y.layerSettings);return ie.set(N,{color:se,size:_}),Y.set(y.id,{...y,layerSettings:ie,settings:{color:se,size:_}}),tr.current=se,Un.current=_,Y}else if(P==="component"){const N=Hn||"top";N==="top"?(Bt(se),Zt(_),Pt("component",se,"top"),kt("component",_,"top")):(_t(se),Qt(_),Pt("component",se,"bottom"),kt("component",_,"bottom"));const Y=new Map(c),ie=new Map(y.layerSettings);return ie.set(N,{color:se,size:_}),Y.set(y.id,{...y,layerSettings:ie,settings:{color:se,size:_}}),tr.current=se,Un.current=_,Y}else{const N=new Map(c);return N.set(y.id,{...y,settings:{color:se,size:_}}),tr.current=se,Un.current=_,N}return c})},[se,_,P,at,Yn,Ti,Ln,Hn,Ds,Pt,kt,Bf,$,S,re,K,ge,be,A,B,Ae,Ge,nt,wt,Bt,_t,Zt,Qt]),Nt.useEffect(()=>{if(P==="draw"&&at==="trace"){const c=Yn;qt(c),X(c==="top"?V:k),E(c==="top"?J:ye),c==="top"?(Fi(!0),uo(!0)):(Yo(!0),Gr(!0)),rs(!0)}else rs(!1)},[P,at,Yn,V,k,J,ye]),Nt.useEffect(()=>{if(P==="draw"&&at==="pad"){const c=Ti;qt(c);const y=Kn.get(c==="top"?"padTop":"padBottom");X(y.color),E(y.size),c==="top"?(Fi(!0),Go(!0)):(Yo(!0),Va(!0)),Cc(!0)}else Cc(!1)},[P,at,Ti]),Nt.useEffect(()=>{if(P==="draw"&&at==="testPoint"){const c=Ln;qt(c),X(c==="top"?de:Ee),E(c==="top"?Pe:Ke),c==="top"?(Fi(!0),xr(!0)):(Yo(!0),sl(!0)),Tc(!0)}else Tc(!1)},[P,at,Ln,de,Ee,Pe,Ke]);const[di,gl]=U.useState(!1);Nt.useEffect(()=>{if(P==="component"){const c=Hn;qt(c),X(c==="top"?St:pe),E(c==="top"?pn:dt),c==="top"?(Fi(!0),vs(!0)):(Yo(!0),Ei(!0)),di||$s(!0)}else $s(!1),gl(!1)},[P,Hn,St,pe,pn,dt,di]),Nt.useEffect(()=>{if(P==="component"){const c=Hn;qt(c),X(c==="top"?St:pe),E(c==="top"?pn:dt)}},[Hn,P,St,pe,pn,dt]),Nt.useEffect(()=>{Xi.toolInstanceId&&(X(Xi.color),E(Xi.size))},[Xi.toolInstanceId,Xi.color,Xi.size,X,E,P,at]);const[Ml,ha]=U.useState(void 0),[,bo]=U.useState([]),[,Es]=U.useState([]),[,Da]=U.useState([]),[,vo]=U.useState([]),[Vo,At]=U.useState([]),[Vi,so]=U.useState([]),[Zs,Ea]=U.useState([]),[ga,Ka]=U.useState([]),nr=U.useRef(null),Wi=Nt.useMemo(()=>{const c=nr.current;if(!c)return{x:0,y:0};const y=(c.width-10)/2,N=(c.height-10)/2;return ls(y,N)},[nr.current?.width,nr.current?.height,vi,bt,ls]),cs=Nt.useCallback(c=>{const y=nr.current;if(!y)return;const N=(y.width-10)/2,Y=(y.height-10)/2,ie=ls(N,Y),Se=typeof c=="function"?c(ie):c,I=(N-Se.x)/bt,he=(Y-Se.y)/bt;yi({x:I,y:he})},[ls,bt,yi]),En=Ev(),{selectedIds:Qn,setSelectedIds:Cn,isSelecting:Ql,setIsSelecting:na,selectedComponentIds:rn,setSelectedComponentIds:Tn,selectedPowerIds:ni,setSelectedPowerIds:Kt,selectedGroundIds:ii,setSelectedGroundIds:on}=En,nu=yx(),{componentsTop:Rt,setComponentsTop:Ai,componentsBottom:Wt,setComponentsBottom:Vn,componentEditor:Do,setComponentEditor:Ra,connectingPin:Yr,setConnectingPin:Rs,componentDialogPosition:ya,setComponentDialogPosition:Ma,isDraggingDialog:Ms,setIsDraggingDialog:Bl,dialogDragOffset:yl,setDialogDragOffset:Js,openComponentEditor:Qs}=nu,iu=Ov(),{powerBuses:an,setPowerBuses:us,groundBuses:w,setGroundBuses:W,powerSymbols:me,setPowerSymbols:Ne,groundSymbols:Ue,setGroundSymbols:it,powerEditor:pt,setPowerEditor:Ut}=iu,sn=Wv(),{saveSnapshot:ln,undo:Xn,clearSnapshot:pi}=sn;Nt.useEffect(()=>{P==="power"?(zt(!1),an.length>1?xe&&an.some(y=>y.id===xe)?Ve(!1):(Ve(!0),xe!==null&&Oe(null)):an.length===1?(Oe(an[0].id),Ve(!1)):(Ve(!0),Oe(null))):Ve(!1)},[P,an]),Nt.useEffect(()=>{P==="ground"?(Ve(!1),w.length>1?hn&&w.some(y=>y.id===hn)?zt(!1):(zt(!0),hn!==null&&It(null)):w.length===1?(It(w[0].id),zt(!1)):(zt(!0),It(null))):zt(!1)},[P,w]),Nt.useEffect(()=>{P!=="power"&&P!=="ground"&&(Ve(!1),zt(!1))},[P]);const Dr=qv(),{areImagesLocked:ji,setAreImagesLocked:Ii,areViasLocked:Ni,setAreViasLocked:mr,arePadsLocked:Ki,setArePadsLocked:Za,areTestPointsLocked:wo,setAreTestPointsLocked:Bs,areTracesLocked:lo,setAreTracesLocked:Os,areComponentsLocked:Er,setAreComponentsLocked:ia,areGroundNodesLocked:co,setAreGroundNodesLocked:Ba,arePowerNodesLocked:ri,setArePowerNodesLocked:Ja}=Dr,Ol=Hv(),{openMenu:gc,setOpenMenu:Oa,setSizeDialog:Eo,setSetSizeDialog:fs,autoSaveDialog:Il,setAutoSaveDialog:ds,autoSavePromptDialog:ra,setAutoSavePromptDialog:Jr,debugDialog:Ia,setDebugDialog:Is,errorDialog:Qa,setErrorDialog:es,newProjectDialog:oa,setNewProjectDialog:Qr,openProjectDialog:ps,setOpenProjectDialog:ma,newProjectSetupDialog:wi,setNewProjectSetupDialog:hs,saveAsDialog:Zi,setSaveAsDialog:fr,showColorPicker:yc,setShowColorPicker:xa,transformImagesDialogVisible:el,setTransformImagesDialogVisible:So}=Ol,ml=Vv(),[mc,Ua]=U.useState(!1),[Us,gs]=U.useState(!1),[aa,Ro]=U.useState(!1),[ba,ys]=U.useState(null),[sa,ts]=U.useState(null),[Ui,_i]=U.useState(null),[dr,eo]=U.useState(null),[tl,Fs]=U.useState(null),{autoSaveEnabled:to,setAutoSaveEnabled:la,autoSaveInterval:nl,setAutoSaveInterval:qs,autoSaveDirHandle:il,setAutoSaveDirHandle:xl,autoSaveBaseName:rl,setAutoSaveBaseName:Fa,currentProjectFilePath:ol,setCurrentProjectFilePath:ir,projectDirHandle:Si,setProjectDirHandle:Rr,projectName:Mr,setProjectName:va,autoSaveFileHistory:Rc,setAutoSaveFileHistory:Hs,currentFileIndex:Mc,setCurrentFileIndex:ms,autoSaveIntervalRef:Di,hasChangesSinceLastAutoSaveRef:Ji,prevAutoSaveEnabledRef:Co}=ml,Bc=U.useRef(null),Wo=U.useRef(null),xc=U.useRef(null),wa=U.useRef(null),ec=U.useRef(null),al=U.useRef(null),bl=U.useRef(null),[Vs,Ul]=U.useState(!1),xs=U.useRef(null),vl=U.useRef(null),[Sa,wl]=U.useState(!1),[ns,Sl]=U.useState({}),[bc,no]=U.useState(!1),pr=U.useRef(null),[Ws,is]=U.useState(!1),[Mo,To]=U.useState(null),[Oc,Fl]=U.useState(null),[Ys,uf]=U.useState({width:960,height:600}),Bo=U.useRef(null),hr=U.useRef(null),ki=U.useRef(null),Ca=U.useRef(null),kr=U.useRef(null),bs=U.useRef(null),Cl=U.useRef(null),ru=U.useRef(null),[ca,Fi]=U.useState(!0),[qa,Yo]=U.useState(!0),[Br,Ha]=U.useState(!0),[Or,uo]=U.useState(!0),[Ir,Gr]=U.useState(!0),[fo,Go]=U.useState(!0),[$r,Va]=U.useState(!0),[jo,xr]=U.useState(!0),[Ta,sl]=U.useState(!0),[Wa,vs]=U.useState(!0),[Ya,Ei]=U.useState(!0),[$o,Oo]=U.useState(!0),_n=me,Rn=Ue,[d,g]=U.useState(!1),[j,L]=U.useState(null),[G,Q]=U.useState(!1),[ee,le]=U.useState(void 0),[fe,ve]=U.useState(!1),[Re,Ve]=U.useState(!1),[xe,Oe]=U.useState(null),[Ye,tt]=U.useState(new Set),qe=U.useCallback(()=>{Cn(new Set),Tn(new Set),Kt(new Set),on(new Set),tt(new Set)},[Cn,Tn,Kt,on,tt]),[st,ct]=U.useState(!1),[Tt,mt]=U.useState(null),[Xt,zt]=U.useState(!1),[hn,It]=U.useState(null),[Gn,Qi]=U.useState(!0),[Fn,Mt]=U.useState(!1),[Dt,br]=U.useState(!1),gn=U.useRef({}),[kn,ei]=U.useState(!0),[rr,vr]=U.useState(!0),[Yi,Xr]=U.useState(!0),[cr,Ar]=U.useState(null),[oi,Li]=U.useState(!1),[gr,Ri]=U.useState(null),[io,Gi]=U.useState(!1),[mi,Nr]=U.useState(null),[qi,ro]=U.useState(!1),[Ur,or]=U.useState(null),[xi,po]=U.useState([]),[_r,yn]=U.useState(!1),[un,Ci]=U.useState(null),[ua,Ga]=U.useState(!1),[Io,Kr]=U.useState(null),[ql,ll]=U.useState(null),[ou,er]=U.useState(!1);Nt.useEffect(()=>{an.length===0&&us([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[an.length,us]);const ws=U.useCallback((c,y)=>{const N=_n.find(ie=>ie.pointId===c);if(N){const ie=y.find(I=>I.id===N.powerBusId);return`Via (${ie?ie.voltage:N.type||"Power Node"})`}const Y=Rn.find(ie=>ie.pointId===c);return Y?`Via (${Y.type||"Ground"})`:"Via"},[_n,Rn]),Ss=U.useCallback((c,y)=>{const N=_n.find(ie=>ie.pointId===c);if(N){const ie=y.find(I=>I.id===N.powerBusId);return`Pad (${ie?ie.voltage:N.type||"Power Node"})`}const Y=Rn.find(ie=>ie.pointId===c);return Y?`Pad (${Y.type||"Ground"})`:"Pad"},[_n,Rn]),Cs=U.useCallback((c,y)=>{const N=_n.find(ie=>ie.pointId===c);if(N){const ie=y.find(I=>I.id===N.powerBusId);return`Test Point (${ie?ie.voltage:N.type||"Power Node"})`}const Y=Rn.find(ie=>ie.pointId===c);return Y?`Test Point (${Y.type||"Ground"})`:"Test Point"},[_n,Rn]),Tl=U.useCallback(()=>{const c=ut.filter(y=>y.type==="via").map(y=>y.id);Cn(new Set(c)),Tn(new Set),Kt(new Set),on(new Set),tt(new Set)},[ut,Cn,Tn,Kt,on]),$f=U.useCallback(()=>{const c=ut.filter(y=>y.type==="trace").map(y=>y.id);Cn(new Set(c)),Tn(new Set),Kt(new Set),on(new Set),tt(new Set)},[ut,Cn,Tn,Kt,on]),Ru=U.useCallback(()=>{const c=ut.filter(y=>y.type==="pad").map(y=>y.id);Cn(new Set(c)),Tn(new Set),Kt(new Set),on(new Set),tt(new Set)},[ut,Cn,Tn,Kt,on]),Mu=U.useCallback(()=>{const c=[...Rt,...Wt].map(y=>y.id);Tn(new Set(c)),Cn(new Set),Kt(new Set),on(new Set),tt(new Set)},[Rt,Wt,Tn,Cn,Kt,on]),au=U.useCallback(()=>{const c=[...Rt,...Wt].filter(y=>{const N=y.pinConnections||[];return!(N.length>0&&N.length===y.pinCount&&N.every(ie=>ie&&ie.trim()!==""))}).map(y=>y.id);Tn(new Set(c)),Cn(new Set),Kt(new Set),on(new Set),tt(new Set),Is({visible:!0,text:""})},[Rt,Wt,Tn,Cn,Kt,on,Is]),Uo=U.useCallback(()=>{const c=new Set;let y=0;for(const N of[...Rt,...Wt]){const Y=N.pinConnections||[];for(const ie of Y)if(ie&&ie.trim()!==""){const Se=parseInt(ie.trim(),10);if(!isNaN(Se)&&Se>0){const I=`${N.id}:${Se}`;c.add(I),y++}}}if(console.log(`Component connections: ${y} connection lines found`),c.size===0){console.log("No component connections found - components may not have pins connected"),alert("No component connections found. Please connect component pins to vias or pads first.");return}tt(c),Cn(new Set),Tn(new Set),Kt(new Set),on(new Set),console.log(`Selected ${c.size} component connection lines`)},[Rt,Wt,Cn,Tn,Kt,on]),Fr=U.useCallback(()=>{aa?(jr(!1),Ro(!1),x(0)):(jr(!0),Ro(!0),x(100))},[aa,jr,Ro,x]),vc=U.useCallback(c=>{ur(y=>m0(y,c))},[ur]),ja=U.useCallback((c,y)=>{const N=nr.current;if(!N)return;const Y=N.width-10,ie=N.height-10,Se=Y/2,I=ie/2,he=Se-c*bt,ne=I-y*bt;cs({x:he,y:ne})},[bt,cs]),wc=U.useCallback((c,y,N)=>{ja(y,N),Tn(new Set([c])),Cn(new Set),Kt(new Set),on(new Set),tt(new Set)},[ja,Tn,Cn,Kt,on]),tc=U.useCallback((c,y,N)=>{ja(y,N),Cn(new Set([c])),Tn(new Set),Kt(new Set),on(new Set),tt(new Set)},[ja,Cn,Tn,Kt,on]),cl=U.useCallback((c,y,N)=>{ja(y,N),Kt(new Set([c])),Cn(new Set),Tn(new Set),on(new Set),tt(new Set)},[ja,Kt,Cn,Tn,on]),su=U.useCallback((c,y,N)=>{ja(y,N),on(new Set([c])),Cn(new Set),Tn(new Set),Kt(new Set),tt(new Set)},[ja,on,Cn,Tn,Kt]),Sc=Nt.useMemo(()=>{const c=new Set(_n.map(N=>N.powerBusId).filter(N=>typeof N=="string"&&N.length>0)),y=an.filter(N=>c.has(N.id)).map(N=>N.name);return Array.from(new Set(y)).sort()},[_n,an]),lu=Nt.useMemo(()=>{const c=new Set(Rn.map(N=>N.groundBusId).filter(N=>typeof N=="string"&&N.length>0)),y=w.filter(N=>c.has(N.id)).map(N=>N.name);return Array.from(new Set(y)).sort()},[Rn,w]),cu=U.useCallback(()=>{const c=_n.map(y=>y.id);Kt(new Set(c)),Cn(new Set),Tn(new Set),on(new Set),tt(new Set)},[_n,Kt,Cn,Tn,on]),jl=U.useCallback(()=>{const c=Rn.map(y=>y.id);on(new Set(c)),Cn(new Set),Tn(new Set),Kt(new Set),tt(new Set)},[Rn,on,Cn,Tn,Kt]),Bu=U.useCallback(c=>{const y=an.filter(Y=>Y.name===c).map(Y=>Y.id);if(y.length===0)return;const N=_n.filter(Y=>Y.powerBusId&&y.includes(Y.powerBusId)).map(Y=>Y.id);Kt(new Set(N)),Cn(new Set),Tn(new Set),on(new Set)},[an,_n,Kt,Cn,Tn,on]),Ou=U.useCallback(c=>{const y=w.filter(Y=>Y.name===c).map(Y=>Y.id);if(y.length===0)return;const N=Rn.filter(Y=>Y.groundBusId&&y.includes(Y.groundBusId)).map(Y=>Y.id);on(new Set(N)),Cn(new Set),Tn(new Set),Kt(new Set)},[w,Rn,on,Cn,Tn,Kt]);U.useCallback(c=>{switch(c.componentType){case"Resistor":case"ResistorNetwork":case"Thermistor":case"VariableResistor":if("resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit)return`${c.resistance} ${c.resistanceUnit}`;break;case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":if("capacitance"in c&&c.capacitance&&"capacitanceUnit"in c&&c.capacitanceUnit)return`${c.capacitance} ${c.capacitanceUnit}`;break;case"Inductor":if("inductance"in c&&c.inductance&&"inductanceUnit"in c&&c.inductanceUnit)return`${c.inductance} ${c.inductanceUnit}`;break;case"Battery":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"Diode":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"Fuse":if("current"in c&&c.current&&"currentUnit"in c&&c.currentUnit)return`${c.current} ${c.currentUnit}`;break;case"FerriteBead":if("impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit)return`${c.impedance} ${c.impedanceUnit}`;break;case"Relay":if("coilVoltage"in c&&c.coilVoltage&&"coilVoltageUnit"in c&&c.coilVoltageUnit)return`${c.coilVoltage} ${c.coilVoltageUnit}`;break;case"Speaker":if("impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit)return`${c.impedance} ${c.impedanceUnit}`;break;case"Motor":if("voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit)return`${c.voltage} ${c.voltageUnit}`;break;case"PowerSupply":if("outputVoltage"in c&&c.outputVoltage&&"outputVoltageUnit"in c&&c.outputVoltageUnit)return`${c.outputVoltage} ${c.outputVoltageUnit}`;break;case"Transistor":if("partNumber"in c&&c.partNumber)return c.partNumber;break;case"IntegratedCircuit":if("partNumber"in c&&c.partNumber)return c.partNumber;break}return null},[]);const ff=U.useCallback(c=>{const y=[];switch(c.componentType){case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":"capacitance"in c&&c.capacitance&&"capacitanceUnit"in c&&c.capacitanceUnit&&y.push(`Capacitance: ${c.capacitance} ${c.capacitanceUnit}`),"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"dielectric"in c&&c.dielectric&&y.push(`Dielectric: ${c.dielectric}`);break;case"Resistor":case"ResistorNetwork":case"Thermistor":"resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit&&y.push(`Resistance: ${c.resistance} ${c.resistanceUnit}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"VariableResistor":"resistance"in c&&c.resistance&&"resistanceUnit"in c&&c.resistanceUnit&&y.push(`Resistance: ${c.resistance} ${c.resistanceUnit}`),"vrType"in c&&c.vrType&&y.push(`Type: ${c.vrType}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`),"taper"in c&&c.taper&&y.push(`Taper: ${c.taper}`);break;case"Inductor":"inductance"in c&&c.inductance&&"inductanceUnit"in c&&c.inductanceUnit&&y.push(`Inductance: ${c.inductance} ${c.inductanceUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"Battery":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"capacity"in c&&c.capacity&&"capacityUnit"in c&&c.capacityUnit&&y.push(`Capacity: ${c.capacity} ${c.capacityUnit}`);break;case"Diode":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`);break;case"Fuse":"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`),"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`);break;case"FerriteBead":"impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit&&y.push(`Impedance: ${c.impedance} ${c.impedanceUnit}`),"current"in c&&c.current&&"currentUnit"in c&&c.currentUnit&&y.push(`Current: ${c.current} ${c.currentUnit}`);break;case"Relay":"coilVoltage"in c&&c.coilVoltage&&"coilVoltageUnit"in c&&c.coilVoltageUnit&&y.push(`Coil Voltage: ${c.coilVoltage} ${c.coilVoltageUnit}`),"contactRating"in c&&c.contactRating&&y.push(`Contact Rating: ${c.contactRating}`);break;case"Speaker":"impedance"in c&&c.impedance&&"impedanceUnit"in c&&c.impedanceUnit&&y.push(`Impedance: ${c.impedance} ${c.impedanceUnit}`),"power"in c&&c.power&&y.push(`Power: ${c.power}`);break;case"Motor":"voltage"in c&&c.voltage&&"voltageUnit"in c&&c.voltageUnit&&y.push(`Voltage: ${c.voltage} ${c.voltageUnit}`),"speed"in c&&c.speed&&"speedUnit"in c&&c.speedUnit&&y.push(`Speed: ${c.speed} ${c.speedUnit}`);break;case"PowerSupply":"outputVoltage"in c&&c.outputVoltage&&"outputVoltageUnit"in c&&c.outputVoltageUnit&&y.push(`Output Voltage: ${c.outputVoltage} ${c.outputVoltageUnit}`),"outputCurrent"in c&&c.outputCurrent&&"outputCurrentUnit"in c&&c.outputCurrentUnit&&y.push(`Output Current: ${c.outputCurrent} ${c.outputCurrentUnit}`);break;case"Transistor":"partNumber"in c&&c.partNumber&&y.push(`Part Number: ${c.partNumber}`),"transistorType"in c&&c.transistorType&&y.push(`Type: ${c.transistorType}`);break;case"Crystal":"frequency"in c&&c.frequency&&y.push(`Frequency: ${c.frequency}`),"loadCapacitance"in c&&c.loadCapacitance&&y.push(`Load Capacitance: ${c.loadCapacitance}`),"tolerance"in c&&c.tolerance&&y.push(`Tolerance: ${c.tolerance}`);break;case"VacuumTube":"tubeType"in c&&c.tubeType&&y.push(`Tube Type: ${c.tubeType}`),"partNumber"in c&&c.partNumber&&y.push(`Part Number: ${c.partNumber}`);break}return y},[]),[nc,rs]=U.useState(!1),ic=U.useRef(null),[Ic,Cc]=U.useState(!1),[Uc,Tc]=U.useState(!1),Gs=U.useRef(null),Hl=U.useRef(null),Vl=U.useRef(null),os=U.useRef(null),[kl,$s]=U.useState(!1),[fa,jc]=U.useState(null),[rc,df]=U.useState(null),[Zr,kc]=U.useState(null),pf=Nt.useRef(null),uu=U.useRef(null),hf=U.useRef(null),Iu=U.useRef(null),qd=U.useRef(null),gf=U.useRef(null),yf=U.useRef(null),[Hd,Xf]=U.useState(null),[Al,Kf]=U.useState(!1),[Ac,Zf]=U.useState(null),[oc,Jf]=U.useState(null),mf=U.useCallback(async(c,y)=>{if(!y)throw new Error("No project directory available. Please create or open a project before loading images. The project directory is needed to store image files.");try{let N;try{N=await y.getDirectoryHandle("images",{create:!0})}catch(Se){throw new Error(`Failed to create images directory in project folder. This may be due to insufficient permissions. Please ensure you have write access to the project directory. Error details: ${Se.message}`)}const Y=c.name,ie=`images/${Y}`;try{const I=await(await N.getFileHandle(Y,{create:!0})).createWritable();return await I.write(c),await I.close(),console.log(`Image copied to project directory: ${ie}`),ie}catch(Se){throw new Error(`Failed to copy image file "${Y}" to project images directory. The file may be locked by another application, or there may be insufficient disk space. Please try again or check your disk space. Error details: ${Se.message}`)}}catch(N){throw N instanceof Error&&N.message.includes("No project directory")||N instanceof Error&&N.message.includes("Failed to")?N:new Error(`An unexpected error occurred while copying the image to the project directory. This may be due to file system permissions or disk space issues. Please try again. Technical details: ${N.message}`)}},[]),Qf=U.useCallback(async(c,y)=>{try{const N=c.name.toLowerCase(),ie=[".png",".jpg",".jpeg"].some(Le=>N.endsWith(Le)),I=["image/png","image/jpeg","image/jpg"].includes(c.type);if(!ie&&!I){alert(`Error: Unsupported image format.

The software only accepts PNG and JPEG image files.

File selected: ${c.name}
File type: ${c.type||"unknown"}

Please select a .png, .jpg, or .jpeg image file.`);return}let he;if(Si)try{he=await mf(c,Si)}catch(Le){const Ce=Le instanceof Error?Le.message:"Unknown error occurred while copying image to project directory.";alert(`Error: ${Ce}

The image could not be loaded. Please ensure you have a project open and have write permissions to the project directory.`);return}else{if(!confirm(`Warning: No project directory is currently open. The image will be loaded, but you must create or open a project and save it before the image will be stored in the project directory.

Do you want to continue loading the ${y==="top"?"top":"bottom"} image?`))return;he=c.name}const ne=await createImageBitmap(c),ue=URL.createObjectURL(c),we=nr.current;let Te=0,ke=0;we&&(Te=vi.x,ke=vi.y);const De={url:ue,name:c.name,width:ne.width,height:ne.height,filePath:he,x:Te,y:ke,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:ne};y==="top"?s(De):f(De)}catch(N){const Y=N instanceof Error?N.message:"Unknown error occurred while loading the image.";alert(`Error: Failed to load image file "${c.name}".

${Y}

Please ensure the file is a valid image format (PNG, JPEG, etc.) and is not corrupted.`),console.error("Failed to load image",N)}},[vi,bt,Si,mf]),Vd=U.useCallback(c=>{c.stopPropagation(),c.preventDefault();const y=nr.current;if(!y)return;document.activeElement!==y&&y.focus();const N=y.getBoundingClientRect(),Y=y.width/N.width,ie=y.height/N.height,Se=c.nativeEvent.offsetX,I=c.nativeEvent.offsetY,he=typeof Se=="number"?Se:c.clientX-N.left,ne=typeof I=="number"?I:c.clientY-N.top,ue=he*Y,we=ne*ie,Te=ue-5,ke=we-5,De=zd(Te,ke,Wi,bt,Jn,Hi),Le=De.x,Ce=De.y;if(P==="center"){no(!0),pr.current&&clearTimeout(pr.current),pr.current=setTimeout(()=>{no(!1),H("select"),ha(void 0)},2e3);return}if(P==="select"){if(Yr){let He=1/0,Qe=null,rt=null;const vt=Math.max(6/bt,4),fn=[...Rt,...Wt].find(mn=>mn.id===Yr.componentId)?.layer||"top";for(const mn of ut)if((mn.type==="via"||mn.type==="pad")&&mn.points.length>0){if(mn.type==="pad"&&(mn.layer||"top")!==fn)continue;const zn=mn.points[0],An=Math.max(1,mn.size/2),ti=Math.hypot(zn.x-Le,zn.y-Ce),dn=Math.max(An,vt);ti<=dn&&ti<He&&(He=ti,Qe=zn.id??null,rt=mn)}if(rt?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${rt.id}`),console.log(`  Point ID: ${Qe}`),console.log(`  Point coordinates: x=${rt.points[0].x.toFixed(2)}, y=${rt.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${Le.toFixed(2)}, y=${Ce.toFixed(2)}`),console.log(`  Distance: ${He.toFixed(2)}`),console.log(`  Via size: ${rt.size}, radius: ${Math.max(1,rt.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${Le.toFixed(2)}, y=${Ce.toFixed(2)}`),console.log(`  Hit tolerance: ${vt.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${ut.filter(mn=>mn.type==="via").length}`)),Qe!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${Qe} (type: ${typeof Qe})`);const mn=String(Qe),zn=Yr.pinIndex,An=Yr.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${zn} (Pin ${zn+1}) of component ${An} to point ID ${mn}`);const ti=Rt.find(jt=>jt.id===An),dn=Wt.find(jt=>jt.id===An);ti?(console.log("Component found in TOP layer"),Ai(jt=>{const bn=jt.find($n=>$n.id===An);if(!bn)return console.error(`Component ${An} not found in TOP layer during update!`),jt;console.log("BEFORE update: pinConnections =",bn.pinConnections);const ar=bn.pinConnections||[],yr=ar.length>0?[...ar]:new Array(bn.pinCount).fill("");let wr;if(yr.length!==bn.pinCount){wr=new Array(bn.pinCount).fill("");for(let $n=0;$n<Math.min(yr.length,bn.pinCount);$n++)wr[$n]=yr[$n]||""}else wr=[...yr];wr[zn]=mn,console.log(`Updating pin ${zn} with value: ${mn}`),console.log("New pinConnections array:",wr);const oo=jt.map($n=>$n.id===An?{...$n,pinConnections:wr}:$n),Ao=oo.find($n=>$n.id===An);return console.log("AFTER update: pinConnections =",Ao?.pinConnections),console.log(`Pin ${zn} value: ${Ao?.pinConnections[zn]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),oo})):dn?(console.log("Component found in BOTTOM layer"),Vn(jt=>{const bn=jt.find($n=>$n.id===An);if(!bn)return console.error(`Component ${An} not found in BOTTOM layer during update!`),jt;console.log("BEFORE update: pinConnections =",bn.pinConnections);const ar=bn.pinConnections||[],yr=ar.length>0?[...ar]:new Array(bn.pinCount).fill("");let wr;if(yr.length!==bn.pinCount){wr=new Array(bn.pinCount).fill("");for(let $n=0;$n<Math.min(yr.length,bn.pinCount);$n++)wr[$n]=yr[$n]||""}else wr=[...yr];wr[zn]=mn,console.log(`Updating pin ${zn} with value: ${mn}`),console.log("New pinConnections array:",wr);const oo=jt.map($n=>$n.id===An?{...$n,pinConnections:wr}:$n),Ao=oo.find($n=>$n.id===An);return console.log("AFTER update: pinConnections =",Ao?.pinConnections),console.log(`Pin ${zn} value: ${Ao?.pinConnections[zn]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),oo})):(console.error(`Component ${An} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",Rt.map(jt=>jt.id)),console.log("Available BOTTOM components:",Wt.map(jt=>jt.id))),setTimeout(()=>{Rs(null)},0);return}else Rs(null)}const Me=10,_e=(()=>{for(const He of Rt)if(Le>=He.x-Me&&Le<=He.x+Me&&Ce>=He.y-Me&&Ce<=He.y+Me)return{layer:"top",comp:He};for(const He of Wt)if(Le>=He.x-Me&&Le<=He.x+Me&&Ce>=He.y-Me&&Ce<=He.y+Me)return{layer:"bottom",comp:He};return null})();if(_e){const{comp:He}=_e;c.shiftKey?Tn(Qe=>{const rt=new Set(Qe);return rt.has(He.id)?rt.delete(He.id):rt.add(He.id),rt}):(Tn(new Set([He.id])),Cn(new Set),Kt(new Set),on(new Set));return}const $e=Math.max(6/bt,4);let lt=null;for(const He of _n){const Qe=Math.max(6,He.size/2),rt=Qe*.8,vt=Qe+rt,Ot=Math.hypot(He.x-Le,He.y-Ce),fn=Math.abs(Le-He.x)<=$e&&Math.abs(Ce-He.y)<=vt,mn=Math.abs(Ce-He.y)<=$e&&Math.abs(Le-He.x)<=vt;if(Ot<=Math.max(Qe,$e)||fn||mn){lt=He;break}}if(lt){c.shiftKey?Kt(He=>{const Qe=new Set(He);return Qe.has(lt.id)?Qe.delete(lt.id):Qe.add(lt.id),Qe}):(Kt(new Set([lt.id])),Cn(new Set),Tn(new Set),on(new Set));return}let ht=null;for(const He of Rn){const Qe=Math.max(6,(He.size||18)/2),rt=Qe*.8,vt=Qe+rt,Ot=Math.hypot(He.x-Le,He.y-Ce),fn=Math.abs(Le-He.x)<=$e&&Math.abs(Ce-He.y)<=vt,mn=Math.abs(Ce-He.y)<=$e&&Math.abs(Le-He.x)<=vt;if(Ot<=Math.max(Qe,$e)||fn||mn){ht=He;break}}if(ht){c.shiftKey?on(He=>{const Qe=new Set(He);return Qe.has(ht.id)?Qe.delete(ht.id):Qe.add(ht.id),Qe}):(on(new Set([ht.id])),Cn(new Set),Tn(new Set),Kt(new Set));return}const Xe=Math.max(6/bt,4/bt),Fe=Math.max(Xe,.5);let Be=null;for(const He of ut)if((He.type==="via"||He.type==="pad"||He.type==="testPoint")&&He.points.length>0){let Qe=!1;if(He.type==="via"?Qe=Br:He.type==="pad"?Qe=(He.layer||"top")==="top"?fo:$r:He.type==="testPoint"&&(Qe=(He.layer||"top")==="top"?jo:Ta),!Qe)continue;const rt=He.points[0],vt=Math.max(1,He.size/2);if(Math.hypot(rt.x-Le,rt.y-Ce)<=Math.max(vt,Fe)){Be=He;break}}if(Be){c.shiftKey?Cn(He=>{const Qe=new Set(He);return Qe.has(Be.id)?Qe.delete(Be.id):Qe.add(Be.id),Qe}):(Cn(new Set([Be.id])),Tn(new Set),Kt(new Set),on(new Set),tt(new Set));return}c.shiftKey||(Cn(new Set),Tn(new Set),Kt(new Set),on(new Set),tt(new Set)),na(!0),Zf({x:Le,y:Ce,shiftKey:c.shiftKey}),Jf({x:Le,y:Ce,width:0,height:0});return}else if(P==="magnify"){const Me=c.shiftKey?.5:2,_e=Math.max(.25,Math.min(8,bt*Me));za(Le,Ce),ui(_e);return}else if(P==="pan"){const Me={topImageX:o?.x??0,topImageY:o?.y??0,bottomImageX:u?.x??0,bottomImageY:u?.y??0,componentsTop:Object.fromEntries(Rt.map(_e=>[_e.id,{x:_e.x,y:_e.y}])),componentsBottom:Object.fromEntries(Wt.map(_e=>[_e.id,{x:_e.x,y:_e.y}])),powerSymbols:Object.fromEntries(me.map(_e=>[_e.id,{x:_e.x,y:_e.y}])),groundSymbols:Object.fromEntries(Ue.map(_e=>[_e.id,{x:_e.x,y:_e.y}])),drawingStrokes:ut.map(_e=>({points:_e.points.map($e=>({x:$e.x,y:$e.y}))})),vias:Vo.map(_e=>({x:_e.x,y:_e.y})),pads:Vi.map(_e=>({x:_e.x,y:_e.y}))};xs.current={startCX:Te,startCY:ke,panX:Wi.x,panY:Wi.y,objectStartPositions:Me},vl.current={startClientX:c.clientX,startClientY:c.clientY,panX:Wi.x,panY:Wi.y,objectStartPositions:Me},Ul(!0);return}else if(P==="draw"){const Me=(lt,ht)=>{let gt=1/0,Xe=null;const Fe=10/bt,Be=bt>20?Math.max(Fe,1e-4):bt>10?Math.max(Fe,.001):Math.max(Fe,.01);for(const rt of ut)if(rt.type==="via"){const vt=rt.points[0],Ot=Math.hypot(vt.x-lt,vt.y-ht);Ot<=Be&&Ot<gt&&(gt=Ot,Xe=vt)}else if(rt.type==="pad"){const vt=rt.points[0],Ot=Math.hypot(vt.x-lt,vt.y-ht);Ot<=Be&&Ot<gt&&(gt=Ot,Xe=vt)}for(const rt of _n)if(rt.pointId!==void 0){const vt=Math.hypot(rt.x-lt,rt.y-ht);vt<=Be&&vt<gt&&(gt=vt,Xe={x:rt.x,y:rt.y,id:rt.pointId})}for(const rt of Rn)if(rt.pointId!==void 0){const vt=Math.hypot(rt.x-lt,rt.y-ht);vt<=Be&&vt<gt&&(gt=vt,Xe={x:rt.x,y:rt.y,id:rt.pointId})}const Qe=$i(Xe??{x:lt,y:ht});return{x:Qe.x,y:Qe.y,nodeId:Xe?.id}};if(at==="via"){const lt=Kn.get("via"),ht=lt.color,gt=lt.size,Lt=Al?{x:$i({x:Le,y:Ce}).x,y:$i({x:Le,y:Ce}).y}:((rt,vt)=>{let Ot=1/0,fn=null;const zn=10/bt,An=bt>10?Math.max(zn,.001):Math.max(zn,.01);for(const jt of ut)if(jt.type==="via"||jt.type==="pad"){const bn=jt.points[0],ar=Math.hypot(bn.x-rt,bn.y-vt);ar<=An&&ar<Ot&&(Ot=ar,fn=bn)}for(const jt of _n)if(jt.pointId!==void 0){const bn=Math.hypot(jt.x-rt,jt.y-vt);bn<=An&&bn<Ot&&(Ot=bn,fn={x:jt.x,y:jt.y,id:jt.pointId})}for(const jt of Rn)if(jt.pointId!==void 0){const bn=Math.hypot(jt.x-rt,jt.y-vt);bn<=An&&bn<Ot&&(Ot=bn,fn={x:jt.x,y:jt.y,id:jt.pointId})}const dn=$i(fn??{x:rt,y:vt});return{x:dn.x,y:dn.y,nodeId:fn?.id}})(Le,Ce),Fe=Lt.nodeId??cc(),Be=ws(Fe,an),He={id:Fe,x:Lt.x,y:Lt.y};ln(ut,Rt,Wt,me,Ue);const Qe={id:`${Date.now()}-via`,points:[He],color:ht,size:gt,layer:Ft,type:"via",viaType:Be};Ct(rt=>[...rt,Qe]),Ft==="top"?bo(rt=>[...rt,Qe.id]):Es(rt=>[...rt,Qe.id]);return}if(at==="pad"){if(!Ti)return;const ht=Al?{x:$i({x:Le,y:Ce}).x,y:$i({x:Le,y:Ce}).y}:((Qe,rt)=>{let vt=1/0,Ot=null;const mn=10/bt,zn=bt>10?Math.max(mn,.001):Math.max(mn,.01);for(const dn of ut)if(dn.type==="via"||dn.type==="pad"||dn.type==="testPoint"){const jt=dn.points[0],bn=Math.hypot(jt.x-Qe,jt.y-rt);bn<=zn&&bn<vt&&(vt=bn,Ot=jt)}for(const dn of _n)if(dn.pointId!==void 0){const jt=Math.hypot(dn.x-Qe,dn.y-rt);jt<=zn&&jt<vt&&(vt=jt,Ot={x:dn.x,y:dn.y,id:dn.pointId})}for(const dn of Rn)if(dn.pointId!==void 0){const jt=Math.hypot(dn.x-Qe,dn.y-rt);jt<=zn&&jt<vt&&(vt=jt,Ot={x:dn.x,y:dn.y,id:dn.pointId})}const ti=$i(Ot??{x:Qe,y:rt});return{x:ti.x,y:ti.y,nodeId:Ot?.id}})(Le,Ce),gt=ht.nodeId??cc(),Xe=Ss(gt,an),Lt=se||(Ti==="top"?te:je),Fe=_||(Ti==="top"?F:M),Be={id:gt,x:ht.x,y:ht.y};ln(ut,Rt,Wt,me,Ue);const He={id:`${Date.now()}-pad`,points:[Be],color:Lt,size:Fe,layer:Ti,type:"pad",padType:Xe};Ct(Qe=>[...Qe,He]);return}if(at==="testPoint"){if(!Ln)return;const ht=Al?{x:$i({x:Le,y:Ce}).x,y:$i({x:Le,y:Ce}).y}:((rt,vt)=>{let Ot=1/0,fn=null;const mn=15;for(const ti of ut)if(ti.type==="via"||ti.type==="pad"||ti.type==="testPoint"){const dn=ti.points[0],jt=Math.hypot(dn.x-rt,dn.y-vt);jt<=mn&&jt<Ot&&(Ot=jt,fn=dn)}for(const ti of _n)if(ti.pointId!==void 0){const dn=Math.hypot(ti.x-rt,ti.y-vt);dn<=mn&&dn<Ot&&(Ot=dn,fn={x:ti.x,y:ti.y,id:ti.pointId})}for(const ti of Rn)if(ti.pointId!==void 0){const dn=Math.hypot(ti.x-rt,ti.y-vt);dn<=mn&&dn<Ot&&(Ot=dn,fn={x:ti.x,y:ti.y,id:ti.pointId})}const An=$i(fn??{x:rt,y:vt});return{x:An.x,y:An.y,nodeId:fn?.id}})(Le,Ce),gt=ht.nodeId??cc(),Xe=Cs(gt,an),Lt=Xe.includes("Power")?"power":Xe.includes("Ground")?"ground":Xe.includes("Signal")?"signal":"unknown",Fe=$i({x:ht.x,y:ht.y}),Be=se||(Ln==="top"?de:Ee),He=_||(Ln==="top"?Pe:Ke);ln(ut,Rt,Wt,me,Ue);const Qe={id:`${Date.now()}-testPoint`,points:[{id:gt,x:Fe.x,y:Fe.y}],color:Be,size:He,layer:Ln,type:"testPoint",testPointType:Lt};Ct(rt=>[...rt,Qe]);return}if(In.current)return;const _e=at==="trace"&&!Al?Me(Le,Ce):{x:$i({x:Le,y:Ce}).x,y:$i({x:Le,y:Ce}).y},$e=_e.nodeId!==void 0?{id:_e.nodeId,x:_e.x,y:_e.y}:{x:_e.x,y:_e.y};Nn(lt=>lt.length===0?[$e]:[...lt,$e]),Oi.current=Date.now(),wn(null),Gt(!1),_a(!1)}else if(P==="erase"){if(ut.some(_e=>_e.layer===Ft&&(_e.type==="via"&&Ni||_e.type==="pad"&&Ki||_e.type==="testPoint"&&wo||_e.type==="trace"&&lo))){const _e=[];Ni&&ut.some($e=>$e.layer===Ft&&$e.type==="via")&&_e.push("vias"),Ki&&ut.some($e=>$e.layer===Ft&&$e.type==="pad")&&_e.push("pads"),wo&&ut.some($e=>$e.layer===Ft&&$e.type==="testPoint")&&_e.push("test points"),lo&&ut.some($e=>$e.layer===Ft&&$e.type==="trace")&&_e.push("traces"),_e.length>0&&alert(`Cannot erase: ${_e.join(", ")} are locked on the ${Ft} layer. Unlock them to erase.`)}Gt(!0),Nn([{id:cc(),x:Le,y:Ce}]),console.log("Starting erase at:",Le,Ce,"selectedDrawingLayer:",Ft,"total strokes:",ut.length)}else if(P==="transform"&&Ht){if(ji){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}_o(!0),Vt({x:Le,y:Ce})}else if(P==="component"){if(!fa)return;const Me=$i({x:Le,y:Ce}),$e=(Hn||"top")==="top"?"componentTop":"componentBottom",lt=Kn.get($e),ht=lt.color,gt=lt.size,Xe=[...Rt,...Wt];let Lt;if(Fn?Lt=Mp():Lt={...gn.current},!Hn)return;let Fe;try{if(Zr?.componentDefinition){const Be=Zr.componentDefinition,He=`${Be.category}:${Be.subcategory}:${Be.type}`,Qe=px(He);Qe?Fe=cx({definition:Qe,layer:Hn,x:Me.x,y:Me.y,color:ht,size:gt,existingComponents:Xe,counters:Gn?Lt:{}}):Fe=Yh(fa,Hn,Me.x,Me.y,ht,gt,Xe,Lt,Gn,Zr||void 0)}else Fe=Yh(fa,Hn,Me.x,Me.y,ht,gt,Xe,Lt,Gn,Zr||void 0)}catch(Be){console.error("[Component Creation] Error creating component:",Be),Fe=Yh(fa,Hn,Me.x,Me.y,ht,gt,Xe,Lt,Gn,Zr||void 0)}if(Fe.abbreviation=y0(fa),Gn&&Fe.designator){const Be=Fe.designator.match(/^([A-Za-z]+)(\d+)$/);if(Be){const He=Be[1],Qe=parseInt(Be[2],10);if(Fn){const rt=Mp();ox(He,Qe,rt)}else gn.current[He]=Math.max(gn.current[He]||0,Qe)}}ln(ut,Rt,Wt,me,Ue),Hn==="top"?(vs(!0),Ai(Be=>[...Be,Fe])):(Ei(!0),Vn(Be=>[...Be,Fe]));return}else if(P==="power"){if(!xe)return;const _e=Al?{x:$i({x:Le,y:Ce}).x,y:$i({x:Le,y:Ce}).y}:((lt,ht)=>{let gt=1/0,Xe=null;const Fe=10/bt,Be=bt>20?Math.max(Fe,1e-4):bt>10?Math.max(Fe,.001):Math.max(Fe,.01);for(const rt of ut)if(rt.type==="via"||rt.type==="pad"){const vt=rt.points[0],Ot=Math.hypot(vt.x-lt,vt.y-ht);Ot<=Be&&Ot<gt&&(gt=Ot,Xe=vt)}else if(rt.type==="trace")for(const vt of rt.points){const Ot=Math.hypot(vt.x-lt,vt.y-ht);Ot<=Be&&Ot<gt&&(gt=Ot,Xe=vt)}const Qe=$i(Xe??{x:lt,y:ht});return{x:Qe.x,y:Qe.y,nodeId:Xe?.id}})(Le,Ce),$e=an.find(lt=>lt.id===xe);if($e){const lt=_e.nodeId??cc(),ht=`${$e.voltage} Power Node`;if(Rn.find(Lt=>Lt.pointId===lt)){es({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${lt}). Power and ground nodes cannot share the same Node ID.`});return}ln(ut,Rt,Wt,me,Ue);const Xe={id:`power-${Date.now()}-${Math.random()}`,x:_e.x,y:_e.y,color:"#ff0000",size:_,powerBusId:$e.id,layer:Ft,type:ht,pointId:lt};if(Ne(Lt=>[...Lt,Xe]),_e.nodeId!==void 0){const Lt=ws(_e.nodeId,an),Fe=Ss(_e.nodeId,an),Be=Cs(_e.nodeId,an),He=Be.includes("Power")?"power":Be.includes("Ground")?"ground":Be.includes("Signal")?"signal":"unknown";Ct(Qe=>Qe.map(rt=>rt.type==="via"&&rt.points.length>0&&rt.points[0].id===_e.nodeId?{...rt,viaType:Lt}:rt.type==="pad"&&rt.points.length>0&&rt.points[0].id===_e.nodeId?{...rt,padType:Fe}:rt.type==="testPoint"&&rt.points.length>0&&rt.points[0].id===_e.nodeId?{...rt,testPointType:He}:rt))}}return}else if(P==="ground"){if(hn===null){if(w.length===0){es({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}zt(!0);return}const Me=w.find(_e=>_e.id===hn);if(Me){const $e=Al?{x:$i({x:Le,y:Ce}).x,y:$i({x:Le,y:Ce}).y}:((Lt,Fe)=>{let Be=1/0,He=null;const rt=10/bt,vt=bt>20?Math.max(rt,1e-4):bt>10?Math.max(rt,.001):Math.max(rt,.01);for(const mn of ut)if(mn.type==="via"||mn.type==="pad"){const zn=mn.points[0],An=Math.hypot(zn.x-Lt,zn.y-Fe);An<=vt&&An<Be&&(Be=An,He=zn)}else if(mn.type==="trace")for(const zn of mn.points){const An=Math.hypot(zn.x-Lt,zn.y-Fe);An<=vt&&An<Be&&(Be=An,He=zn)}const fn=$i(He??{x:Lt,y:Fe});return{x:fn.x,y:fn.y,nodeId:He?.id}})(Le,Ce),lt=$e.nodeId??cc(),ht=`${Me.name} Ground Node`,gt=_n.find(Lt=>Lt.pointId===lt);if(gt){es({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${gt.type||"Power Node"}) already exists at this Node ID (${lt}). Power and ground nodes cannot share the same Node ID.`});return}ln(ut,Rt,Wt,me,Ue);const Xe={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:$e.x,y:$e.y,color:Me.color,size:_||On.get("ground")?.settings.size||18,groundBusId:Me.id,layer:Ft,type:ht,pointId:lt};if(it(Lt=>[...Lt,Xe]),$e.nodeId!==void 0){const Lt=ws($e.nodeId,an),Fe=Ss($e.nodeId,an);Ct(Be=>Be.map(He=>He.type==="via"&&He.points.length>0&&He.points[0].id===$e.nodeId?{...He,viaType:Lt}:He.type==="pad"&&He.points.length>0&&He.points[0].id===$e.nodeId?{...He,padType:Fe}:He))}}return}},[P,Ht,_,se,at,Ft,ut,bt,Wi.x,Wi.y,Jn,Hi,Al,xe,hn,an,w,fa,On,Ti,Yn,Ln,_n,Rn,ws,Ss,Cs,Br,fo,$r]),ed=U.useCallback(c=>{if(P!=="magnify")return;c.preventDefault();const y=nr.current;if(!y)return;const N=y.getBoundingClientRect(),Y=y.width/N.width,ie=y.height/N.height,Se=c.nativeEvent.offsetX,I=c.nativeEvent.offsetY,he=typeof Se=="number"?Se:c.clientX-N.left,ne=typeof I=="number"?I:c.clientY-N.top,ue=he*Y,we=ne*ie,Te=ue-5,ke=we-5,De=zd(Te,ke,Wi,bt,Jn,Hi),Le=De.x,Ce=De.y,Me=1.2,_e=1/Me,$e=c.deltaY<0?Me:_e,lt=Math.max(.25,Math.min(8,bt*$e));za(Le,Ce),ui(lt)},[P,bt,Wi.x,Wi.y,Jn,Hi]),Wd=U.useCallback(c=>{if(P==="draw"&&at==="trace"){In.current=!0;let $e=Dn;if($e.length>1){const lt=[$e[0]];for(let ht=1;ht<$e.length;ht++){const gt=lt[lt.length-1],Xe=$e[ht];(Math.abs(gt.x-Xe.x)>.001||Math.abs(gt.y-Xe.y)>.001)&&lt.push(Xe)}$e=lt}if($e.length>=1){ln(ut,Rt,Wt,me,Ue);const lt=Yn||"top",ht=lt==="top"?"traceTop":"traceBottom",gt=Kn.get(ht),Xe={id:`${Date.now()}-trace`,points:$e,color:gt.color,size:gt.size,layer:lt,type:"trace"};Ct(Lt=>[...Lt,Xe]),lt==="top"?Da(Lt=>[...Lt,Xe.id]):vo(Lt=>[...Lt,Xe.id]),Nn([]),wn(null),setTimeout(()=>{In.current=!1},300);return}}const y=nr.current;if(!y)return;const N=y.getBoundingClientRect(),Y=y.width/N.width,ie=y.height/N.height,Se=c.nativeEvent.offsetX,I=c.nativeEvent.offsetY,he=typeof Se=="number"?Se:c.clientX-N.left,ne=typeof I=="number"?I:c.clientY-N.top,ue=he*Y,we=ne*ie,Te=ue-5,ke=we-5,De=zd(Te,ke,Wi,bt,Jn,Hi),Le=De.x,Ce=De.y,Me=Math.max(8/bt,4),_e=(()=>{for(const $e of ut)if($e.type==="testPoint"&&$e.points.length>0){const lt=$e.points[0],ht=Math.hypot(lt.x-Le,lt.y-Ce),gt=($e.size||18)/2;if(ht<=gt+Me)return $e}return null})();if(_e){Cn(new Set([_e.id])),Tn(new Set),Kt(new Set),on(new Set),Gi(!0);return}if(P==="select"||P==="component"){const lt=(()=>{for(const Xe of Rt)if(Le>=Xe.x-10&&Le<=Xe.x+10&&Ce>=Xe.y-10&&Ce<=Xe.y+10)return{layer:"top",comp:Xe};for(const Xe of Wt)if(Le>=Xe.x-10&&Le<=Xe.x+10&&Ce>=Xe.y-10&&Ce<=Xe.y+10)return{layer:"bottom",comp:Xe};return null})(),ht=Math.max(6/bt,4);let gt=null;for(const Xe of _n){const Lt=Math.max(6,Xe.size/2),Fe=Lt*.8,Be=Lt+Fe,He=Math.hypot(Xe.x-Le,Xe.y-Ce),Qe=Math.abs(Le-Xe.x)<=ht&&Math.abs(Ce-Xe.y)<=Be,rt=Math.abs(Ce-Xe.y)<=ht&&Math.abs(Le-Xe.x)<=Be;if(He<=Math.max(Lt,ht)||Qe||rt){gt=Xe;break}}if(gt){Kt(new Set([gt.id])),Ut({visible:!0,id:gt.id,layer:gt.layer,x:gt.x,y:gt.y,size:gt.size,color:gt.color,powerBusId:gt.powerBusId});return}if(lt){const{layer:Xe,comp:Lt}=lt;Qs(Lt,Xe)}}},[P,at,se,_,Ft,Rt,Wt,_n,bt,Wi.x,Wi.y,Jn,Hi,fa,Al,ut,Ht,Vs,Hd,Yr,On,Dn,Yn,V,k,J,ye,Gi,Cn,Tn,Kt,on,Qs]),Uu=U.useCallback(()=>{const c=Sn.current;if(P==="draw"&&at==="trace"&&c.length>=2){let y=[c[0]];for(let I=1;I<c.length;I++){const he=y[y.length-1],ne=c[I];(Math.abs(he.x-ne.x)>.001||Math.abs(he.y-ne.y)>.001)&&y.push(ne)}const N=Yn||"top",Y=N==="top"?"traceTop":"traceBottom",ie=Kn.get(Y),Se={id:`${Date.now()}-trace`,points:y,color:ie.color,size:ie.size,layer:N,type:"trace"};ln(ut,Rt,Wt,me,Ue),Ct(I=>[...I,Se]),N==="top"?Da(I=>[...I,Se.id]):vo(I=>[...I,Se.id]),Nn([]),wn(null)}else if(P==="draw"&&at==="trace"&&c.length===1){const y=Yn||"top",N=y==="top"?"traceTop":"traceBottom",Y=Kn.get(N),ie={id:`${Date.now()}-trace-dot`,points:c,color:Y.color,size:Y.size,layer:y,type:"trace"};Ct(Se=>[...Se,ie]),y==="top"?Da(Se=>[...Se,ie.id]):vo(Se=>[...Se,ie.id]),Nn([])}},[P,at,Yn,V,k,J,ye,Ct]),Yd=U.useCallback((c,y,N)=>{const Y=y-c.x,ie=N-c.y;if(Y===0&&ie===0)return{x:y,y:N};const I=(Jm(Y,ie)%180+180)%180,he=[0,45,90];let ne=0,ue=1e9;for(const we of he){const Te=Math.abs(I-we);Te<ue&&(ue=Te,ne=we)}if(ne===0)return{x:y,y:c.y};if(ne===90)return{x:c.x,y:N};{const we=Math.min(Math.abs(Y),Math.abs(ie)),Te=Y>=0?1:-1,ke=ie>=0?1:-1;return{x:c.x+Te*we,y:c.y+ke*we}}},[]),Zp=U.useCallback(c=>{const y=nr.current?.getBoundingClientRect();if(!y)return;const N=c.clientX-y.left,Y=c.clientY-y.top,ie=nr.current,Se=ie.width/y.width,I=ie.height/y.height,he=N*Se,ne=Y*I,ue=he-5,we=ne-5,Te=zd(ue,we,Wi,bt,Jn,Hi),ke=Te.x,De=Te.y;if(ys({x:ke,y:De}),P==="draw"&&at==="trace"&&Dn.length>0){const Ce=Al?{x:$i({x:ke,y:De}).x,y:$i({x:ke,y:De}).y}:((Me,_e)=>{let $e=1/0,lt=null;const gt=10/bt,Xe=bt>20?Math.max(gt,1e-4):bt>10?Math.max(gt,.001):Math.max(gt,.01);for(const Be of ut)if(Be.type==="via"){const He=Be.points[0],Qe=Math.hypot(He.x-Me,He.y-_e);Qe<=Xe&&Qe<$e&&($e=Qe,lt=He)}else if(Be.type==="pad"){const He=Be.points[0],Qe=Math.hypot(He.x-Me,He.y-_e);Qe<=Xe&&Qe<$e&&($e=Qe,lt=He)}for(const Be of _n)if(Be.pointId!==void 0){const He=Math.hypot(Be.x-Me,Be.y-_e);He<=Xe&&He<$e&&($e=He,lt={x:Be.x,y:Be.y,id:Be.pointId})}for(const Be of Rn)if(Be.pointId!==void 0){const He=Math.hypot(Be.x-Me,Be.y-_e);He<=Xe&&He<$e&&($e=He,lt={x:Be.x,y:Be.y,id:Be.pointId})}const Fe=$i(lt??{x:Me,y:_e});return{x:Fe.x,y:Fe.y,nodeId:lt?.id}})(ke,De);wn({x:Ce.x,y:Ce.y})}else wn(null);if(Ws){const Ce=(()=>{for(const Me of Rt)if(ke>=Me.x-10&&ke<=Me.x+10&&De>=Me.y-10&&De<=Me.y+10)return{layer:"top",comp:Me};for(const Me of Wt)if(ke>=Me.x-10&&ke<=Me.x+10&&De>=Me.y-10&&De<=Me.y+10)return{layer:"bottom",comp:Me};return null})();if(Ce)To({component:Ce.comp,layer:Ce.layer,x:c.clientX,y:c.clientY}),Fl(null);else{To(null);const Me=Math.max(8/bt,4),_e=(()=>{for(const $e of ut)if($e.type==="testPoint"&&$e.points.length>0){const lt=$e.points[0],ht=Math.hypot(lt.x-ke,lt.y-De),gt=($e.size||18)/2;if(ht<=gt+Me)return $e}return null})();Fl(_e?{stroke:_e,x:c.clientX,y:c.clientY}:null)}}else To(null),Fl(null);if(P==="select"&&Ql&&Ac){const Le=Ac.x,Ce=Ac.y;Jf({x:Math.min(Le,ke),y:Math.min(Ce,De),width:Math.abs(ke-Le),height:Math.abs(De-Ce)})}else if(P==="pan"&&Vs&&xs.current){const{startCX:Le,startCY:Ce,objectStartPositions:Me}=xs.current,_e=ue-Le,$e=we-Ce,lt=r1(_e,$e,bt,Jn,Hi),ht=lt.x,gt=lt.y;Me&&(o&&s({...o,x:Me.topImageX+ht,y:Me.topImageY+gt}),u&&f({...u,x:Me.bottomImageX+ht,y:Me.bottomImageY+gt}),Ai(Rt.map(Xe=>({...Xe,x:(Me.componentsTop?.[Xe.id]?.x??Xe.x)+ht,y:(Me.componentsTop?.[Xe.id]?.y??Xe.y)+gt}))),Vn(Wt.map(Xe=>({...Xe,x:(Me.componentsBottom?.[Xe.id]?.x??Xe.x)+ht,y:(Me.componentsBottom?.[Xe.id]?.y??Xe.y)+gt}))),Ne(me.map(Xe=>({...Xe,x:(Me.powerSymbols?.[Xe.id]?.x??Xe.x)+ht,y:(Me.powerSymbols?.[Xe.id]?.y??Xe.y)+gt}))),it(Ue.map(Xe=>({...Xe,x:(Me.groundSymbols?.[Xe.id]?.x??Xe.x)+ht,y:(Me.groundSymbols?.[Xe.id]?.y??Xe.y)+gt}))),Ct(ut.map((Xe,Lt)=>({...Xe,points:Xe.points.map((Fe,Be)=>{const He=Me.drawingStrokes?.[Lt]?.points?.[Be];return{...Fe,x:(He?.x??Fe.x)+ht,y:(He?.y??Fe.y)+gt}})}))),At(Vo.map((Xe,Lt)=>{const Fe=Me.vias?.[Lt];return{...Xe,x:(Fe?.x??Xe.x)+ht,y:(Fe?.y??Xe.y)+gt}})),so(Vi.map((Xe,Lt)=>{const Fe=Me.pads?.[Lt];return{...Xe,x:(Fe?.x??Xe.x)+ht,y:(Fe?.y??Xe.y)+gt}})))}else if(Mn&&Dn.length>0){if(P==="draw")if(Qo){const Le=Dn[0],Ce=Yd(Le,ke,De),Me=$i(Ce),_e={id:cc(),x:Me.x,y:Me.y};Nn([Le,_e])}else{const Le=$i({x:ke,y:De});Nn(Ce=>[...Ce,{id:cc(),x:Le.x,y:Le.y}])}else if(P==="erase"&&(Nn(Le=>[...Le,{id:cc(),x:ke,y:De}]),Ct(Le=>{const Ce=Le.filter(_e=>{if(_e.type==="via"&&Ni||_e.type==="pad"&&Ki||_e.type==="testPoint"&&wo||_e.type==="trace"&&lo||_e.layer!==Ft)return!0;const $e=_/2,lt=ke-$e,ht=ke+$e,gt=De-$e,Xe=De+$e,Lt=(He,Qe)=>He>=lt&&He<=ht&&Qe>=gt&&Qe<=Xe,Fe=(He,Qe,rt,vt)=>{const ti=(oo,Ao)=>{let $n=0;return oo<lt?$n|=1:oo>ht&&($n|=2),Ao<gt?$n|=4:Ao>Xe&&($n|=8),$n};let dn=He,jt=Qe,bn=rt,ar=vt,yr=ti(dn,jt),wr=ti(bn,ar);for(;;){if((yr|wr)===0)return!0;if((yr&wr)!==0)return!1;const oo=yr!==0?yr:wr;let Ao=0,$n=0;oo&8?(Ao=dn+(bn-dn)*(Xe-jt)/(ar-jt),$n=Xe):oo&4?(Ao=dn+(bn-dn)*(gt-jt)/(ar-jt),$n=gt):oo&2?($n=jt+(ar-jt)*(ht-dn)/(bn-dn),Ao=ht):($n=jt+(ar-jt)*(lt-dn)/(bn-dn),Ao=lt),oo===yr?(dn=Ao,jt=$n,yr=ti(dn,jt)):(bn=Ao,ar=$n,wr=ti(bn,ar))}};let Be=!1;if(_e.points.length===1){const He=_e.points[0];Be=Lt(He.x,He.y)}else for(let He=0;He<_e.points.length-1;He++){const Qe=_e.points[He],rt=_e.points[He+1];if(Fe(Qe.x,Qe.y,rt.x,rt.y)){Be=!0;break}}return Be&&console.log("Erasing stroke at position:",ke,De,"brushSize:",_,"selectedLayer:",Ft),!Be});console.log("Strokes before:",Le.length,"after:",Ce.length);const Me=new Set(Ce.map(_e=>_e.id));return bo(_e=>_e.filter($e=>Me.has($e))),Es(_e=>_e.filter($e=>Me.has($e))),Da(_e=>_e.filter($e=>Me.has($e))),vo(_e=>_e.filter($e=>Me.has($e))),Ce}),ri||Ne(Le=>{const Ce=_/2,Me=ke-Ce,_e=ke+Ce,$e=De-Ce,lt=De+Ce,ht=gt=>{const Xe=gt.size/2,Lt=gt.x-Xe,Fe=gt.x+Xe,Be=gt.y-Xe,He=gt.y+Xe;return!(_e<Lt||Me>Fe||lt<Be||$e>He)};return Le.filter(gt=>!ht(gt))}),co||it(Le=>{const Ce=_/2,Me=ke-Ce,_e=ke+Ce,$e=De-Ce,lt=De+Ce,ht=Xe=>{const Lt=Math.max(6,(Xe.size||18)/2),Fe=Lt*.8,Be=Lt+Fe,He=Xe.x-Be,Qe=Xe.x+Be,rt=Xe.y-Be,vt=Xe.y+Be;return!(_e<He||Me>Qe||lt<rt||$e>vt)};return Le.filter(Xe=>!ht(Xe))}),!Er)){const Le=_/2,Ce=ke-Le,Me=ke+Le,_e=De-Le,$e=De+Le,lt=ht=>{const Xe=(ht.size||18)/2,Lt=ht.x-Xe,Fe=ht.x+Xe,Be=ht.y-Xe,He=ht.y+Xe;return!(Me<Lt||Ce>Fe||$e<Be||_e>He)};ln(ut,Rt,Wt,me,Ue),Ai(ht=>ht.filter(gt=>!lt(gt))),Vn(ht=>ht.filter(gt=>!lt(gt)))}}else if(Wr&&Lo&&Ht){if(ji){_o(!1),Vt(null);return}const Le=ke-Lo.x,Ce=De-Lo.y;if(Ht==="top"){o&&s(Me=>Me?{...Me,x:Me.x+Le,y:Me.y+Ce}:null),Vt({x:ke,y:De});return}if(Ht==="bottom"){u&&f(Me=>Me?{...Me,x:Me.x+Le,y:Me.y+Ce}:null),Vt({x:ke,y:De});return}if(Ht==="both"){o&&s(Me=>Me?{...Me,x:Me.x+Le,y:Me.y+Ce}:null),u&&f(Me=>Me?{...Me,x:Me.x+Le,y:Me.y+Ce}:null),Vt({x:ke,y:De});return}}},[Mn,Dn,P,_,Wr,Lo,Ht,o,u,Qo,Yd,Ft,Ct,bt,Wi.x,Wi.y,Jn,Hi,Ql,Ac,ji,Ni,Ki,lo,ri,co,Rt,Wt,Ai,Vn,Ws,To,Al,ut,_n,Rn,Dn,at,en,wn,Vs,xs,cs,5,Wi,cc,$i,H,no,ln,me,Ue,ys]),td=U.useCallback(()=>{if(ys(null),P==="select"&&Ql){const c=oc,y=Ac;if(na(!1),Zf(null),Jf(null),c&&y){const ie=Math.max(3,5/bt),Se=c.width<ie&&c.height<ie,I=(Fe,Be)=>{const He=c.x,Qe=c.y,rt=c.x+c.width,vt=c.y+c.height;return Fe>=He&&Fe<=rt&&Be>=Qe&&Be<=vt},he=(Fe,Be,He,Qe,rt,vt,Ot,fn)=>{const jt=($n,Ll)=>{let ai=0;return $n<rt?ai|=1:$n>Ot&&(ai|=2),Ll<vt?ai|=4:Ll>fn&&(ai|=8),ai};let bn=Fe,ar=Be,yr=He,wr=Qe,oo=jt(bn,ar),Ao=jt(yr,wr);for(;;){if((oo|Ao)===0)return!0;if((oo&Ao)!==0)return!1;const $n=oo!==0?oo:Ao;let Ll=0,ai=0;$n&8?(Ll=bn+(yr-bn)*(fn-ar)/(wr-ar),ai=fn):$n&4?(Ll=bn+(yr-bn)*(vt-ar)/(wr-ar),ai=vt):$n&2?(ai=ar+(wr-ar)*(Ot-bn)/(yr-bn),Ll=Ot):(ai=ar+(wr-ar)*(rt-bn)/(yr-bn),Ll=rt),$n===oo?(bn=Ll,ar=ai,oo=jt(bn,ar)):(yr=Ll,wr=ai,Ao=jt(yr,wr))}},ne=c.x,ue=c.y,we=c.x+c.width,Te=c.y+c.height,De=Math.max(6/bt,4/bt,.5),Le=(Fe,Be,He,Qe,rt,vt)=>{const Ot=rt-He,fn=vt-Qe;if(Ot===0&&fn===0)return Math.hypot(Fe-He,Be-Qe);const mn=Math.max(0,Math.min(1,((Fe-He)*Ot+(Be-Qe)*fn)/(Ot*Ot+fn*fn))),zn=He+mn*Ot,An=Qe+mn*fn;return Math.hypot(Fe-zn,Be-An)},Ce=y?.shiftKey===!0,Me=new Set(Ce?Array.from(Qn):[]),_e=new Set(Ce?Array.from(rn):[]),$e=new Set(Ce?Array.from(ni):[]),lt=new Set(Ce?Array.from(ii):[]),ht=y?.hitStrokeId;if(ht){const Fe=ut.find(Be=>Be.id===ht);if(Fe){let Be=!1;if(Fe.type==="via"||Fe.type==="pad"?Be=Br:Be=Fe.layer==="top"?Or:Ir,Be){Ce?Cn(He=>{const Qe=new Set(He);return Qe.has(ht)?Qe.delete(ht):Qe.add(ht),Qe}):(Cn(new Set([ht])),Tn(new Set),Kt(new Set),on(new Set));return}}}if(Se){let Fe=null;for(const Be of ut){let He=!1;if(Be.type==="via"?He=Br:Be.type==="pad"?He=(Be.layer||"top")==="top"?fo:$r:Be.type==="testPoint"?He=(Be.layer||"top")==="top"?jo:Ta:Be.type==="trace"?He=Be.layer==="top"?Or:Ir:He=!1,!He)continue;let Qe=1/0;if(Be.type==="via"||Be.type==="pad"||Be.type==="testPoint"){const rt=Be.points[0],vt=Math.max(1,Be.size/2);Qe=Math.hypot(rt.x-y.x,rt.y-y.y);const fn=Math.max(6/bt,4/bt,.5);Qe<=Math.max(vt,fn)&&(!Fe||Qe<Fe.dist)&&(Fe={id:Be.id,dist:Qe})}else for(let rt=0;rt<Be.points.length-1;rt++){const vt=Be.points[rt],Ot=Be.points[rt+1],fn=Le(y.x,y.y,vt.x,vt.y,Ot.x,Ot.y);if(fn<=Math.max(De,Be.size/2)){(!Fe||fn<Fe.dist)&&(Fe={id:Be.id,dist:fn});break}}}Fe&&(Ce&&Me.has(Fe.id)?Me.delete(Fe.id):Me.add(Fe.id))}else for(const Fe of ut){let Be=!1;if(Fe.type==="via"?Be=Br:Fe.type==="pad"?Be=(Fe.layer||"top")==="top"?fo:$r:Fe.type==="testPoint"?Be=(Fe.layer||"top")==="top"?jo:Ta:Fe.type==="trace"?Be=Fe.layer==="top"?Or:Ir:Be=!1,!Be)continue;let He=!1;if(Fe.type==="via"||Fe.type==="pad"||Fe.type==="testPoint"){const Qe=Fe.points[0];He=I(Qe.x,Qe.y)}else for(let Qe=0;Qe<Fe.points.length-1;Qe++){const rt=Fe.points[Qe],vt=Fe.points[Qe+1];if(he(rt.x,rt.y,vt.x,vt.y,ne,ue,we,Te)||I(rt.x,rt.y)&&I(vt.x,vt.y)){He=!0;break}}He&&(Ce&&Me.has(Fe.id)?Me.delete(Fe.id):Me.add(Fe.id))}const gt=Fe=>{const He=Math.max(10,Fe.size||18)/2;return Fe.x-He<=we&&Fe.x+He>=ne&&Fe.y-He<=Te&&Fe.y+He>=ue};if(Se){const Fe=Be=>{const Qe=Math.max(10,Be.size||18)/2;return y.x>=Be.x-Qe&&y.x<=Be.x+Qe&&y.y>=Be.y-Qe&&y.y<=Be.y+Qe};Wa&&Rt.forEach(Be=>{Fe(Be)&&(Ce&&_e.has(Be.id)?_e.delete(Be.id):_e.add(Be.id))}),Ya&&Wt.forEach(Be=>{Fe(Be)&&(Ce&&_e.has(Be.id)?_e.delete(Be.id):_e.add(Be.id))})}else Wa&&Rt.forEach(Fe=>{gt(Fe)&&(Ce&&_e.has(Fe.id)?_e.delete(Fe.id):_e.add(Fe.id))}),Ya&&Wt.forEach(Fe=>{gt(Fe)&&(Ce&&_e.has(Fe.id)?_e.delete(Fe.id):_e.add(Fe.id))});const Xe=Fe=>{const Be=Math.max(6,Fe.size/2),He=Be*.8,Qe=Be+He;return Fe.x-Qe<=we&&Fe.x+Qe>=ne&&Fe.y-Qe<=Te&&Fe.y+Qe>=ue};if($o)if(Se){let Fe=null;for(const Be of _n){const He=Math.max(6,Be.size/2),Qe=He*.8,rt=He+Qe,vt=Math.hypot(Be.x-y.x,Be.y-y.y),Ot=Math.abs(y.x-Be.x)<=De&&Math.abs(y.y-Be.y)<=rt,fn=Math.abs(y.y-Be.y)<=De&&Math.abs(y.x-Be.x)<=rt;if(vt<=Math.max(He,De)||Ot||fn){const zn=Math.min(vt,Math.abs(y.x-Be.x)+Math.abs(y.y-Be.y));(!Fe||zn<Fe.dist)&&(Fe={id:Be.id,dist:zn})}}Fe&&(Ce&&$e.has(Fe.id)?$e.delete(Fe.id):$e.add(Fe.id))}else _n.forEach(Fe=>{Xe(Fe)&&(Ce&&$e.has(Fe.id)?$e.delete(Fe.id):$e.add(Fe.id))});const Lt=Fe=>{const Be=Math.max(6,(Fe.size||18)/2),He=Be*.8,Qe=Be+He;return Fe.x-Qe<=we&&Fe.x+Qe>=ne&&Fe.y-Qe<=Te&&Fe.y+Qe>=ue};if(kn)if(Se){let Fe=null;for(const Be of Rn){const He=Math.max(6,(Be.size||18)/2),Qe=He*.8,rt=He+Qe,vt=Math.hypot(Be.x-y.x,Be.y-y.y),Ot=Math.abs(y.x-Be.x)<=De&&Math.abs(y.y-Be.y)<=rt,fn=Math.abs(y.y-Be.y)<=De&&Math.abs(y.x-Be.x)<=rt;if(vt<=Math.max(He,De)||Ot||fn){const zn=Math.min(vt,Math.abs(y.x-Be.x)+Math.abs(y.y-Be.y));(!Fe||zn<Fe.dist)&&(Fe={id:Be.id,dist:zn})}}Fe&&(Ce&&lt.has(Fe.id)?lt.delete(Fe.id):lt.add(Fe.id))}else Rn.forEach(Fe=>{Lt(Fe)&&(Ce&&lt.has(Fe.id)?lt.delete(Fe.id):lt.add(Fe.id))});Cn(Me),Tn(_e),Kt($e),on(lt)}}if(Mn&&Dn.length>0){if(P==="draw"&&at!=="trace"){const c={id:Date.now().toString(),points:Dn,color:se,size:_,layer:Ft,type:"trace"};Ct(y=>[...y,c]),Ft==="top"?Da(y=>[...y,c.id]):vo(y=>[...y,c.id])}Nn([])}Vs&&(Ul(!1),xs.current=null,vl.current=null),Gt(!1),_o(!1),Vt(null),_a(!1)},[Mn,Dn,P,se,_,Ft,oc,Ac,Ql,ut,bt,Sa,Qn,_n,Rn,Rt,Wt,rn,ni,ii,Br,Or,Ir,Wa,Ya,$o,kn,ys]);Nt.useEffect(()=>{if(!(P==="pan"&&Vs&&vl.current))return;const c=N=>{const Y=nr.current;if(!Y)return;const ie=Y.getBoundingClientRect(),Se=Y.width/ie.width,I=Y.height/ie.height,{startClientX:he,startClientY:ne,objectStartPositions:ue}=vl.current,we=(N.clientX-he)*Se,Te=(N.clientY-ne)*I,ke=r1(we,Te,bt,Jn,Hi),De=ke.x,Le=ke.y;ue&&(o&&s({...o,x:ue.topImageX+De,y:ue.topImageY+Le}),u&&f({...u,x:ue.bottomImageX+De,y:ue.bottomImageY+Le}),Ai(Rt.map(Ce=>({...Ce,x:(ue.componentsTop?.[Ce.id]?.x??Ce.x)+De,y:(ue.componentsTop?.[Ce.id]?.y??Ce.y)+Le}))),Vn(Wt.map(Ce=>({...Ce,x:(ue.componentsBottom?.[Ce.id]?.x??Ce.x)+De,y:(ue.componentsBottom?.[Ce.id]?.y??Ce.y)+Le}))),Ne(me.map(Ce=>({...Ce,x:(ue.powerSymbols?.[Ce.id]?.x??Ce.x)+De,y:(ue.powerSymbols?.[Ce.id]?.y??Ce.y)+Le}))),it(Ue.map(Ce=>({...Ce,x:(ue.groundSymbols?.[Ce.id]?.x??Ce.x)+De,y:(ue.groundSymbols?.[Ce.id]?.y??Ce.y)+Le}))),Ct(ut.map((Ce,Me)=>({...Ce,points:Ce.points.map((_e,$e)=>{const lt=ue.drawingStrokes?.[Me]?.points?.[$e];return{..._e,x:(lt?.x??_e.x)+De,y:(lt?.y??_e.y)+Le}})}))),At(Vo.map((Ce,Me)=>{const _e=ue.vias?.[Me];return{...Ce,x:(_e?.x??Ce.x)+De,y:(_e?.y??Ce.y)+Le}})),so(Vi.map((Ce,Me)=>{const _e=ue.pads?.[Me];return{...Ce,x:(_e?.x??Ce.x)+De,y:(_e?.y??Ce.y)+Le}})))},y=()=>{Ul(!1),xs.current=null,vl.current=null,window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",y,!0)};return window.addEventListener("mousemove",c,!0),window.addEventListener("mouseup",y,!0),()=>{window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",y,!0)}},[P,Vs,bt,Jn,Hi,o,u,Rt,Wt,me,Ue,ut,Vo,Vi,s,f,Ai,Vn,Ne,it,Ct,At,so]);const ac=U.useCallback(()=>{const c=nr.current;if(!c)return;const y=c.getContext("2d");if(!y)return;y.clearRect(0,0,c.width,c.height),y.fillStyle="#000000",y.fillRect(0,0,c.width,c.height),y.fillStyle="#ffffff",y.fillRect(5,5,c.width-10,c.height-10),y.save(),y.beginPath(),y.rect(5,5,c.width-10,c.height-10),y.clip(),y.translate(5,5);const N=(he,ne,ue,we,Te,ke,De,Le)=>{const Ce=document.createElement("canvas");Ce.width=ue,Ce.height=we;const Me=Ce.getContext("2d",{willReadFrequently:!0});Me.clearRect(0,0,ue,we),Me.drawImage(ne,0,0,ue,we);let _e=Ce;if(Math.abs(Te)>1e-6){const $e=Hp(Te),lt=Math.max(.2,1-$e),ht=Math.max(.2,1+$e),gt=Math.max(lt,ht),Xe=Math.max(1,Math.ceil(ue*gt)),Lt=document.createElement("canvas");Lt.width=Xe,Lt.height=we;const Fe=Lt.getContext("2d",{willReadFrequently:!0});Fe.clearRect(0,0,Xe,we);for(let Be=0;Be<we;Be++){const He=we<=1?0:Be/(we-1),Qe=lt*(1-He)+ht*He,rt=Math.max(1,ue*Qe),vt=(Xe-rt)/2;Fe.drawImage(_e,0,Be,ue,1,vt,Be,rt,1)}_e=Lt}if(Math.abs(ke)>1e-6){const $e=Hp(ke),lt=Math.max(.2,1-$e),ht=Math.max(.2,1+$e),gt=Math.max(lt,ht),Xe=Math.max(1,Math.ceil(we*gt)),Lt=document.createElement("canvas");Lt.width=_e.width,Lt.height=Xe;const Fe=Lt.getContext("2d",{willReadFrequently:!0});Fe.clearRect(0,0,Lt.width,Xe);for(let Be=0;Be<_e.width;Be++){const He=_e.width<=1?0:Be/(_e.width-1),Qe=lt*(1-He)+ht*He,rt=Math.max(1,we*Qe),vt=(Xe-rt)/2;Fe.drawImage(_e,Be,0,1,_e.height,Be,vt,1,rt)}_e=Lt}he.drawImage(_e,-De/2,-Le/2,De,Le)};y.translate(Wi.x,Wi.y),y.scale(bt,bt),Qm(y,Jn,Hi);{const he=ca&&qa;if(o&&o.bitmap&&ca){const ne=o.bitmap;y.save(),y.globalAlpha=1;const ue=[];o.brightness!==void 0&&o.brightness!==100&&ue.push(`brightness(${o.brightness}%)`),o.contrast!==void 0&&o.contrast!==100&&ue.push(`contrast(${o.contrast}%)`),Z&&ue.push("grayscale(100%)"),y.filter=ue.length>0?ue.join(" "):"none",x0(y,{x:o.x,y:o.y,rotation:o.rotation||0,scale:o.scale||1,flipX:o.flipX||!1,flipY:o.flipY||!1,skewX:o.skewX||0,skewY:o.skewY||0});const we=ne.width*1,Te=ne.height*1,ke=ne;o.keystoneV&&Math.abs(o.keystoneV)>1e-6||o.keystoneH&&Math.abs(o.keystoneH)>1e-6?N(y,ke,ne.width,ne.height,o.keystoneV||0,o.keystoneH||0,we,Te):y.drawImage(ke,-we/2,-Te/2,we,Te),y.restore()}if(u&&u.bitmap&&qa){const ne=u.bitmap;y.save(),y.globalAlpha=he?b/100:1;const ue=[];u.brightness!==void 0&&u.brightness!==100&&ue.push(`brightness(${u.brightness}%)`),u.contrast!==void 0&&u.contrast!==100&&ue.push(`contrast(${u.contrast}%)`),Z&&ue.push("grayscale(100%)"),y.filter=ue.length>0?ue.join(" "):"none",x0(y,{x:u.x,y:u.y,rotation:u.rotation||0,scale:u.scale||1,flipX:u.flipX||!1,flipY:u.flipY||!1,skewX:u.skewX||0,skewY:u.skewY||0});const we=ne.width*1,Te=ne.height*1,ke=ne;u.keystoneV&&Math.abs(u.keystoneV)>1e-6||u.keystoneH&&Math.abs(u.keystoneH)>1e-6?N(y,ke,ne.width,ne.height,u.keystoneV||0,u.keystoneH||0,we,Te):y.drawImage(ke,-we/2,-Te/2,we,Te),y.restore()}}if(nd(y),$o&&_n.length>0){const he=ne=>{y.save(),i1(y,ne.x,ne.y,ne.rotation??0,ne.flipX??!1,!1);const ue=an.find(Le=>Le.id===ne.powerBusId),we=ni.has(ne.id),Te=ue?.color||"#ff0000";y.strokeStyle=Te,y.lineWidth=Math.max(1,(we?3:2)/Math.max(bt,.001)),y.lineCap="round";const ke=Math.max(6,ne.size/2),De=ke*.8;if(we&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(bt,.001)),y.beginPath(),y.arc(0,0,ke+De+3,0,Na),y.stroke()),y.strokeStyle=Te,y.lineWidth=Math.max(1,(we?3:2)/Math.max(bt,.001)),y.beginPath(),y.arc(0,0,ke,0,Na),y.stroke(),y.beginPath(),y.moveTo(0,-ke-De),y.lineTo(0,ke+De),y.stroke(),y.beginPath(),y.moveTo(-ke-De,0),y.lineTo(ke+De,0),y.stroke(),ue){y.fillStyle=Te;const Le=Math.max(10,ke*.8);y.font=`${Le}px sans-serif`,y.textAlign="center",y.textBaseline="top",y.fillText(ue.name,0,ke+De+8)}y.restore()};_n.forEach(he)}if(kn&&Rn.length>0){const he=ne=>{y.save(),i1(y,ne.x,ne.y,ne.rotation??0,ne.flipX??!1,!1);const ue=ii.has(ne.id),we=w.find(Le=>Le.id===ne.groundBusId),Te=we?.color||ne.color||"#000000",ke=ne.groundBusId==="groundbus-earth";let De;if(ke){const Le=Math.max(6,ne.size||18),Ce=Le*.9,Me=Le*.24,_e=Le*1.6;y.strokeStyle=Te,y.lineWidth=Math.max(1,(ue?3:2)/Math.max(bt,.001)),y.lineCap="round",ue&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(bt,.001)),y.setLineDash([5,5]),y.strokeRect(-_e/2-3,-3,_e+6,Ce+Me*2+6),y.setLineDash([])),y.strokeStyle=Te,y.lineWidth=Math.max(1,(ue?3:2)/Math.max(bt,.001)),y.beginPath(),y.moveTo(0,0),y.lineTo(0,Ce),y.stroke();for(let $e=0;$e<3;$e++){const lt=Ce+$e*Me,ht=_e*(1-$e*.25);y.beginPath(),y.moveTo(-ht/2,lt),y.lineTo(ht/2,lt),y.stroke()}De=Ce+Me*2}else{const Le=Math.max(6,(ne.size||18)/2),Ce=Le*.8;ue&&(y.strokeStyle="#0066ff",y.lineWidth=Math.max(1,4/Math.max(bt,.001)),y.beginPath(),y.arc(0,0,Le+Ce+3,0,Na),y.stroke()),y.strokeStyle=Te,y.lineWidth=Math.max(1,(ue?3:2)/Math.max(bt,.001)),y.beginPath(),y.arc(0,0,Le,0,Na),y.stroke(),y.beginPath(),y.moveTo(0,-Le-Ce),y.lineTo(0,Le+Ce),y.stroke(),y.beginPath(),y.moveTo(-Le-Ce,0),y.lineTo(Le+Ce,0),y.stroke(),De=Le+Ce}if(we){y.fillStyle=Te;const Le=Math.max(10,(ne.size||18)*.5);y.font=`${Le}px sans-serif`,y.textAlign="center",y.textBaseline="top",y.fillText(we.name,0,De+8)}y.restore()};Rn.forEach(he)}const Y=he=>{const ne=Math.max(10,he.size||18),ue=ne/2;y.save(),y.translate(he.x,he.y),ex(y,Jn,Hi),he.orientation!==void 0&&he.orientation!==0&&y.rotate(tu(he.orientation)),he.flipX&&y.scale(-1,1),he.flipY&&y.scale(1,-1),y.strokeStyle=he.color||"#111",y.lineWidth=Math.max(1,2/Math.max(bt,.001));const we=he.pinConnections||[],Te=we.length>0&&we.length===he.pinCount&&we.every(Le=>Le&&Le.trim()!=="");y.fillStyle=Te?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",y.beginPath(),y.rect(-ue,-ue,ne,ne),y.fill(),y.stroke();const ke=he.designator?.trim()||"";if(ke){y.fillStyle=he.color||"#111";const Le=Math.max(6,ne*.35),Ce=ne*.9;let Me=Le;y.font=`bold ${Me}px sans-serif`;const _e=y.measureText(ke);_e.width>Ce&&(Me=Ce/_e.width*Me,Me=Math.max(6,Me),y.font=`bold ${Me}px sans-serif`),y.textAlign="center",y.textBaseline="middle",y.fillText(ke,0,0)}rn.has(he.id)&&(y.setLineDash([4,3]),y.strokeStyle="#00bfff",y.lineWidth=1.5,y.strokeRect(-ue-3,-ue-3,ne+6,ne+6),y.setLineDash([])),y.restore()};if(rr){const he=ue=>{const we=parseInt(ue,10);if(isNaN(we))return null;for(const Te of ut)if((Te.type==="via"||Te.type==="pad"||Te.type==="testPoint")&&Te.points.length>0){const ke=Te.points[0];if(ke.id===we)return{x:ke.x,y:ke.y}}for(const Te of ut)if(Te.type==="trace"){for(const ke of Te.points)if(ke.id===we)return{x:ke.x,y:ke.y}}for(const Te of _n)if(Te.pointId===we)return{x:Te.x,y:Te.y};for(const Te of Rn)if(Te.pointId===we)return{x:Te.x,y:Te.y};return null},ne=ue=>{const we=ue.pinConnections||[],Te=ue.componentType==="Electrolytic Capacitor"||ue.componentType==="Diode"||ue.componentType==="Battery",ke=ue.componentType==="Capacitor"&&"dielectric"in ue&&ue.dielectric==="Tantalum",De=(Te||ke)&&ue.pinPolarities,Ce=Yf(ue)?.category==="Semiconductors"&&ue.componentType==="IntegratedCircuit",Me=new Map;for(let _e=0;_e<we.length;_e++){const $e=we[_e];if($e&&$e.trim()!==""){const lt=$e.trim(),ht=Ce&&_e===0,gt=!!(De&&ue.pinPolarities&&_e<ue.pinPolarities.length&&ue.pinPolarities[_e]==="-"),Xe=Me.get(lt);Xe!==void 0?Me.set(lt,{isNegative:Xe.isNegative||gt,hasPin1:Xe.hasPin1||ht}):Me.set(lt,{isNegative:gt,hasPin1:ht})}}for(const[_e,$e]of Me){const{isNegative:lt,hasPin1:ht}=$e,gt=he(_e);if(gt){const Xe={x:ue.x,y:ue.y},Lt=parseInt(_e,10),Fe=`${ue.id}:${Lt}`,Be=Ye.has(Fe);y.save(),Be?(y.strokeStyle="#00bfff",y.lineWidth=Math.max(2,Jt*1.5/Math.max(bt,.001)),y.setLineDash([4,3])):(lt?y.strokeStyle="rgba(0, 0, 0, 0.8)":ht?y.strokeStyle=tx(Et,.4):y.strokeStyle=Et,y.lineWidth=Math.max(1,Jt/Math.max(bt,.001))),y.beginPath(),y.moveTo(Xe.x,Xe.y),y.lineTo(gt.x,gt.y),y.stroke(),y.setLineDash([]),y.restore()}}};Wa&&Rt.forEach(ne),Ya&&Wt.forEach(ne)}if(Wa&&Rt.forEach(Y),Ya&&Wt.forEach(Y),P==="select"&&oc){y.save();const he=Math.max(2,6/Math.max(1e-4,bt));y.strokeStyle="#00bfff",y.fillStyle="rgba(0, 191, 255, 0.15)",y.lineWidth=Math.max(1,1.5/Math.max(1e-4,bt)),y.setLineDash([he,he]),y.beginPath(),y.rect(oc.x,oc.y,oc.width,oc.height),y.fill(),y.stroke(),y.setLineDash([]),y.restore()}y.save();const ie=50,I=2/bt;y.strokeStyle="#FF0000",y.lineWidth=I,y.lineCap="round",y.lineJoin="round",y.beginPath(),y.moveTo(-ie,0),y.lineTo(ie,0),y.stroke(),y.fillStyle="#FF0000",y.font=`${12/bt}px sans-serif`,y.textAlign="left",y.textBaseline="top",y.fillText("+X",ie+2/bt,2/bt),y.textAlign="right",y.fillText("-X",-ie-2/bt,2/bt),y.strokeStyle="#0000FF",y.lineWidth=I,y.lineCap="round",y.lineJoin="round",y.beginPath(),y.moveTo(0,-ie),y.lineTo(0,ie),y.stroke(),y.fillStyle="#0000FF",y.font=`${12/bt}px sans-serif`,y.textAlign="left",y.textBaseline="top",y.fillText("+Y",2/bt,ie+2/bt),y.textBaseline="bottom",y.fillText("-Y",2/bt,-ie-2/bt),y.restore(),y.restore()},[o,u,b,ut,Dn,Mn,P,se,_,Z,Ht,Ft,bt,Wi.x,Wi.y,Jn,Hi,ca,qa,Br,Or,Ir,fo,$r,jo,Ta,Wa,Ya,Rt,Wt,$o,_n,kn,Rn,rr,oc,Qn,rn,ni,ii,Ye,Yn,V,k,J,ye,at,en,ji,Et,Jt,Yi,vi]);Nt.useEffect(()=>{const c=()=>{const y=ec.current;if(!y)return;const N=1.6,Y=244,ie=12,Se=6,I=12,he=y.clientWidth-Y-ie,ne=y.getBoundingClientRect(),ue=window.innerHeight,we=ne.top,ke=ue-we-Se-10,De=Math.min(y.clientHeight-I,ke),Le=Math.floor(De*N),Ce=Math.floor(he/N);let Me,_e;Le<=he?(Me=Le,_e=De):(Me=he,_e=Ce),Me=Math.max(600,Me),_e=Math.max(375,_e),_e=Math.max(355,_e-20),uf($e=>{const lt=$e.width===0&&$e.height===0,ht=$e.width!==Me||$e.height!==_e;return lt&&ht&&setTimeout(()=>{yi({x:0,y:0})},0),$e.width===Me&&$e.height===_e?$e:{width:Me,height:_e}})};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[cs,yi]),Nt.useEffect(()=>{ji&&(Wr&&(_o(!1),Vt(null)),yo(null))},[ji,Wr,_o,Vt,yo]);const nd=U.useCallback(c=>{if(ut.forEach(y=>{if(y.type==="via"||y.type==="pad"||y.type==="testPoint"||y.testPointType!==void 0||y.type!=="trace")return;let N=!1;if(y.layer==="top"?N=Or:y.layer==="bottom"&&(N=Ir),!!N){if(y.points.length===1){const Y=y.points[0],ie=Math.max(.5,y.size/2);Qn.has(y.id)&&(c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.arc(Y.x,Y.y,ie+3,0,Na),c.stroke(),c.setLineDash([])),c.fillStyle=y.color,c.beginPath(),c.arc(Y.x,Y.y,ie,0,Na),c.fill()}else if(Qn.has(y.id)&&(c.strokeStyle="#00bfff",c.lineWidth=y.size+4,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.6,c.beginPath(),y.points.forEach((Y,ie)=>{ie===0?c.moveTo(Y.x,Y.y):c.lineTo(Y.x,Y.y)}),c.stroke(),c.globalAlpha=1),c.strokeStyle=y.color,c.lineWidth=y.size,c.lineCap="round",c.lineJoin="round",c.globalAlpha=1,c.beginPath(),y.points.forEach((Y,ie)=>{ie===0?c.moveTo(Y.x,Y.y):c.lineTo(Y.x,Y.y)}),c.stroke(),Yi){c.fillStyle="#000000";for(const Y of y.points)c.beginPath(),c.arc(Y.x,Y.y,y.size/2,0,Na),c.fill()}}}),ut.forEach(y=>{if(y.type==="via"){if(!Br)return}else if(y.type==="pad"){const Y=y.layer||"top";if(Y==="top"&&!fo||Y==="bottom"&&!$r)return}else if(y.type==="testPoint"){const Y=y.layer||"top";if(Y==="top"&&!jo||Y==="bottom"&&!Ta)return}else return;const N=y.points[0];if(Qn.has(y.id)){if(y.type==="via"){const Y=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.arc(N.x,N.y,Y,0,Na),c.stroke(),c.setLineDash([])}else if(y.type==="pad"){const Y=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.strokeRect(N.x-Y,N.y-Y,y.size+6,y.size+6),c.setLineDash([])}else if(y.type==="testPoint"){const Y=Math.max(.5,y.size/2)+3;c.strokeStyle="#00bfff",c.lineWidth=2,c.setLineDash([4,3]),c.beginPath(),c.moveTo(N.x,N.y-Y),c.lineTo(N.x+Y,N.y),c.lineTo(N.x,N.y+Y),c.lineTo(N.x-Y,N.y),c.closePath(),c.stroke(),c.setLineDash([])}}if(y.type==="via"){const Y=Math.max(.5,y.size/2),ie=Y*.5,Se=Y*.7;c.fillStyle=y.color,c.beginPath(),c.arc(N.x,N.y,Y,0,Na),c.arc(N.x,N.y,ie,0,Na),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(N.x-Se,N.y),c.lineTo(N.x+Se,N.y),c.stroke(),c.beginPath(),c.moveTo(N.x,N.y-Se),c.lineTo(N.x,N.y+Se),c.stroke()}else if(y.type==="pad"){const Y=Math.max(.5,y.size/2),ie=y.size,Se=ie*.5,I=Y*.7;c.fillStyle=y.color,c.beginPath(),c.rect(N.x-Y,N.y-Y,ie,ie),c.rect(N.x-Se/2,N.y-Se/2,Se,Se),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(N.x-I,N.y),c.lineTo(N.x+I,N.y),c.stroke(),c.beginPath(),c.moveTo(N.x,N.y-I),c.lineTo(N.x,N.y+I),c.stroke()}else if(y.type==="testPoint"){const Y=Math.max(.5,y.size/2),ie=Y*.7;c.fillStyle=y.color||"#FFFF00",c.strokeStyle="#000000",c.lineWidth=2,c.beginPath(),c.moveTo(N.x,N.y-Y),c.lineTo(N.x+Y,N.y),c.lineTo(N.x,N.y+Y),c.lineTo(N.x-Y,N.y),c.closePath(),c.fill(),c.stroke(),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(N.x-ie,N.y),c.lineTo(N.x+ie,N.y),c.stroke(),c.beginPath(),c.moveTo(N.x,N.y-ie),c.lineTo(N.x,N.y+ie),c.stroke()}}),Dn.length>0){const y=Ft;let N=!0;if(P==="draw"&&(at==="via"?N=Br:N=y==="top"?Or:Ir),N)if(P==="draw")if(at==="via"){const Y=Dn[Dn.length-1],ie=Math.max(.5,_/2),Se=ie*.5,I=ie*.7;c.fillStyle=se,c.beginPath(),c.arc(Y.x,Y.y,ie,0,Na),c.arc(Y.x,Y.y,Se,0,Na),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(Y.x-I,Y.y),c.lineTo(Y.x+I,Y.y),c.stroke(),c.beginPath(),c.moveTo(Y.x,Y.y-I),c.lineTo(Y.x,Y.y+I),c.stroke()}else if(at==="pad"){const Y=Dn[Dn.length-1],ie=Math.max(.5,_/2),Se=_,I=Se*.5,he=ie*.7;c.fillStyle=se,c.beginPath(),c.rect(Y.x-ie,Y.y-ie,Se,Se),c.rect(Y.x-I/2,Y.y-I/2,I,I),c.fill("evenodd"),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(Y.x-he,Y.y),c.lineTo(Y.x+he,Y.y),c.stroke(),c.beginPath(),c.moveTo(Y.x,Y.y-he),c.lineTo(Y.x,Y.y+he),c.stroke()}else if(at==="testPoint"){const Y=Dn[Dn.length-1],ie=Math.max(.5,_/2),Se=ie*.7;c.fillStyle=se,c.beginPath(),c.moveTo(Y.x,Y.y-ie),c.lineTo(Y.x+ie,Y.y),c.lineTo(Y.x,Y.y+ie),c.lineTo(Y.x-ie,Y.y),c.closePath(),c.fill(),c.strokeStyle="#808080",c.lineWidth=1,c.beginPath(),c.moveTo(Y.x-Se,Y.y),c.lineTo(Y.x+Se,Y.y),c.stroke(),c.beginPath(),c.moveTo(Y.x,Y.y-Se),c.lineTo(Y.x,Y.y+Se),c.stroke()}else{const Y=Yn||"top",ie=Y==="top"?V:k,Se=Y==="top"?J:ye;if(Dn.length===1){const I=Dn[0],he=Math.max(.5,Se/2);c.fillStyle=ie,c.beginPath(),c.arc(I.x,I.y,he,0,Na),c.fill(),en&&(c.strokeStyle=ie,c.lineWidth=Se,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.6,c.beginPath(),c.moveTo(I.x,I.y),c.lineTo(en.x,en.y),c.stroke(),c.globalAlpha=1)}else if(c.strokeStyle=ie,c.lineWidth=Se,c.lineCap="round",c.lineJoin="round",c.globalAlpha=1,c.beginPath(),Dn.forEach((I,he)=>{he===0?c.moveTo(I.x,I.y):c.lineTo(I.x,I.y)}),c.stroke(),en&&Dn.length>0){const I=Dn[Dn.length-1];c.globalAlpha=.6,c.beginPath(),c.moveTo(I.x,I.y),c.lineTo(en.x,en.y),c.stroke(),c.globalAlpha=1}}else P==="erase"&&(c.strokeStyle="rgba(255, 0, 0, 0.5)",c.lineWidth=_,c.lineCap="round",c.lineJoin="round",c.globalAlpha=.5,c.beginPath(),Dn.forEach((Y,ie)=>{ie===0?c.moveTo(Y.x,Y.y):c.lineTo(Y.x,Y.y)}),c.stroke())}},[ut,Qn,Or,Ir,Br,fo,$r,jo,Ta,Dn,P,at,se,_,Ft,Yn,V,k,J,ye,en,Yi]),fu=U.useCallback((c,y)=>{if(ji){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}c==="top"&&o?s(N=>N?{...N,...y}:null):c==="bottom"&&u?f(N=>N?{...N,...y}:null):c==="both"&&(o&&s(N=>N?{...N,...y}:null),u&&f(N=>N?{...N,...y}:null))},[o,u,ji]),id=U.useCallback(()=>{Ht&&(fu(Ht,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,brightness:100,contrast:100}),O(!1))},[fu,Ht]),xf=U.useCallback(()=>{if(Qn.size>0||rn.size>0||ni.size>0||ii.size>0){if(Qn.size>0){const c=ut.filter(ie=>Qn.has(ie.id)),y=Ni&&c.some(ie=>ie.type==="via"),N=lo&&c.some(ie=>ie.type==="trace"),Y=Ki&&c.some(ie=>ie.type==="pad");if(y){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(N){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(Y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(rn.size>0&&Er){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(ni.size>0&&ri){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(ii.size>0&&co){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Ct(c=>c.map(y=>{if(Qn.has(y.id)){const N=y.size+1;return y.type==="via"?kt("via",N):y.type==="pad"?kt("pad",N):y.type==="trace"&&kt("trace",N,y.layer),{...y,size:N}}return y})),rn.size>0){const c=(rn.size>0&&Rt.find(y=>rn.has(y.id))?.size||18)+1;kt("component",c),Ai(y=>y.map(N=>rn.has(N.id)?{...N,size:(N.size||18)+1}:N)),Vn(y=>y.map(N=>rn.has(N.id)?{...N,size:(N.size||18)+1}:N))}if(ni.size>0){const c=(_n.find(y=>ni.has(y.id))?.size||18)+1;kt("power",c),Ne(y=>y.map(N=>ni.has(N.id)?{...N,size:N.size+1}:N))}if(ii.size>0){const c=(Rn.find(y=>ii.has(y.id))?.size||18)+1;kt("ground",c),it(y=>y.map(N=>ii.has(N.id)?{...N,size:(N.size||18)+1}:N))}}else{let c=null;if(P==="draw"&&at==="via"?c="via":P==="draw"&&at==="pad"?c=Ls.current==="bottom"?"padBottom":"padTop":P==="draw"&&at==="testPoint"?c=zs.current==="bottom"?"testPointBottom":"testPointTop":P==="draw"&&at==="trace"?c=pa.current==="bottom"?"traceBottom":"traceTop":P==="component"?c=Ks.current==="bottom"?"componentBottom":"componentTop":P==="power"?c="power":P==="ground"&&(c="ground"),c){const y=Kn.get(c),N=Math.min(40,y.size+1);Kn.setSize(c,N)}}},[Qn,rn,ni,ii,ut,Ni,lo,Ki,wo,Er,ri,co,P,at,kt]),Fc=U.useCallback(()=>{if(Qn.size>0||rn.size>0||ni.size>0||ii.size>0){if(Qn.size>0){const c=ut.filter(Se=>Qn.has(Se.id)),y=Ni&&c.some(Se=>Se.type==="via"),N=lo&&c.some(Se=>Se.type==="trace"),Y=Ki&&c.some(Se=>Se.type==="pad"),ie=wo&&c.some(Se=>Se.type==="testPoint");if(y){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(N){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(Y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}if(ie){alert("Cannot change size: Test Points are locked. Unlock test points to change their size.");return}}if(rn.size>0&&Er){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(ni.size>0&&ri){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(ii.size>0&&co){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Ct(c=>c.map(y=>{if(Qn.has(y.id)){const N=Math.max(1,y.size-1);return y.type==="via"?kt("via",N):y.type==="pad"?kt("pad",N,y.layer):y.type==="testPoint"?kt("testPoint",N,y.layer):y.type==="trace"&&kt("trace",N,y.layer),{...y,size:N}}return y})),rn.size>0){const c=Math.max(1,(Rt.find(y=>rn.has(y.id))?.size||18)-1);kt("component",c),Ai(y=>y.map(N=>rn.has(N.id)?{...N,size:Math.max(1,(N.size||18)-1)}:N)),Vn(y=>y.map(N=>rn.has(N.id)?{...N,size:Math.max(1,(N.size||18)-1)}:N))}if(ni.size>0){const c=Math.max(1,(_n.find(y=>ni.has(y.id))?.size||18)-1);kt("power",c),Ne(y=>y.map(N=>ni.has(N.id)?{...N,size:Math.max(1,N.size-1)}:N))}if(ii.size>0){const c=Math.max(1,(Rn.find(y=>ii.has(y.id))?.size||18)-1);kt("ground",c),it(y=>y.map(N=>ii.has(N.id)?{...N,size:Math.max(1,(N.size||18)-1)}:N))}}else{let c=null;if(P==="draw"&&at==="via"?c="via":P==="draw"&&at==="pad"?c=(Ft||Ti||"top")==="bottom"?"padBottom":"padTop":P==="draw"&&at==="testPoint"?c=(Ft||Ln||"top")==="bottom"?"testPointBottom":"testPointTop":P==="draw"&&at==="trace"?c=(Ft||Yn||"top")==="bottom"?"traceBottom":"traceTop":P==="component"?c=(Ft||Hn||"top")==="bottom"?"componentBottom":"componentTop":P==="power"?c="power":P==="ground"&&(c="ground"),c){const y=Kn.get(c),N=Math.max(1,y.size-1);Kn.setSize(c,N)}}},[Qn,rn,ni,ii,ut,Ni,lo,Ki,wo,Er,ri,co,P,at,Ft,Ti,Ln,Yn,Hn,kt]),Gd=U.useCallback(()=>{const c=Eo.size;if(Qn.size>0||rn.size>0||ni.size>0||ii.size>0){if(Qn.size>0){const y=ut.filter(I=>Qn.has(I.id)),N=Ni&&y.some(I=>I.type==="via"),Y=Ki&&y.some(I=>I.type==="pad"),ie=lo&&y.some(I=>I.type==="trace"),Se=wo&&y.some(I=>I.type==="testPoint");if(N||Y||ie||Se){alert("Cannot change size: selected items are locked.");return}}if(rn.size>0&&Er){alert("Cannot change size: selected components are locked.");return}if(ni.size>0&&ri){alert("Cannot change size: selected power nodes are locked.");return}if(ii.size>0&&co){alert("Cannot change size: selected ground nodes are locked.");return}Ct(y=>y.map(N=>Qn.has(N.id)?(N.type==="via"?(kt("via",c),Bn(Y=>{const ie=new Map(Y),Se=ie.get("via");return Se&&ie.set("via",{...Se,settings:{...Se.settings,size:c}}),ie})):N.type==="pad"?(kt("pad",c,N.layer),Bn(Y=>{const ie=new Map(Y),Se=ie.get("pad");if(Se){const I=new Map(Se.layerSettings);I.set(N.layer,{...I.get(N.layer)||{color:Se.settings.color,size:c},size:c}),ie.set("pad",{...Se,layerSettings:I})}return ie})):N.type==="testPoint"?(kt("testPoint",c,N.layer),Bn(Y=>{const ie=new Map(Y),Se=ie.get("testPoint");if(Se){const I=new Map(Se.layerSettings);I.set(N.layer,{...I.get(N.layer)||{color:Se.settings.color,size:c},size:c}),ie.set("testPoint",{...Se,layerSettings:I})}return ie})):N.type==="trace"&&kt("trace",c,N.layer),{...N,size:c}):N)),rn.size>0&&(kt("component",c),Ai(y=>y.map(N=>rn.has(N.id)?{...N,size:c}:N)),Vn(y=>y.map(N=>rn.has(N.id)?{...N,size:c}:N))),ni.size>0&&(kt("power",c),Ne(y=>y.map(N=>ni.has(N.id)?{...N,size:c}:N))),ii.size>0&&(kt("ground",c),it(y=>y.map(N=>ii.has(N.id)?{...N,size:c}:N)))}else E(c),P==="draw"&&at==="trace"?Ft==="top"?(re(c),kt("trace",c,"top")):(K(c),kt("trace",c,"bottom")):P==="draw"&&at==="via"?kt("via",c):P==="draw"&&at==="pad"?kt("pad",c,Ft):P==="draw"&&at==="testPoint"?kt("testPoint",c,Ft):kt(P==="component"?"component":P==="power"?"power":P==="ground"?"ground":"brush",c);fs({visible:!1,size:6})},[Eo.size,Qn,rn,ni,ii,ut,Ni,lo,Er,ri,co,P,at,Ft,kt,On,Bn]),rd=U.useCallback(()=>{Jr({visible:!1,source:null,interval:5})},[]),od=U.useCallback(async(c,y=!1)=>{if(c===null){la(!1),qs(null),Di.current&&(clearInterval(Di.current),Di.current=null),ds({visible:!1,interval:5}),y&&Jr({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!Mr){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let N=Si;if(!N){const I=window;if(typeof I.showDirectoryPicker=="function")try{N=await I.showDirectoryPicker(),Rr(N)}catch(he){he?.name!=="AbortError"&&(console.error("Failed to get directory:",he),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}xl(N);const Y=Mr.replace(/\.json$/i,""),Se=Ku(Y).replace(/[^a-zA-Z0-9_-]/g,"_");Fa(Se),Nl.current=N,_l.current=Se,qs(c),la(!0),Ji.current=!0,ds({visible:!1,interval:5}),y&&Jr({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${c} minutes`),xc.current&&xc.current()},200)},[Mr,Si,la,qs,xl,Fa,ds,Jr,Rr]),qc=U.useCallback(()=>{qe(),H("select")},[qe]),Fu=U.useCallback(c=>{if(c.key==="Escape"){const I=document.activeElement;if(I&&(I.tagName==="INPUT"&&I.type==="checkbox"||I.tagName==="INPUT"&&I.type==="radio")){I.blur(),c.preventDefault(),c.stopPropagation();return}}const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)||Hc.current>0&&c.key!=="m"&&c.key!=="M")return;const Y=parseInt(c.key);if(!isNaN(Y)&&Y>=0&&Y<=9){if(c.preventDefault(),c.stopPropagation(),P==="center"&&bc){if(pr.current&&(clearTimeout(pr.current),pr.current=null),nr.current){let ne=0,ue=0;o?(ne=o.x,ue=o.y):u&&(ne=u.x,ue=u.y),Sl(we=>({...we,[Y]:{pcbReferenceX:ne,pcbReferenceY:ue,x:0,y:0,zoom:bt,viewRotation:Jn,viewFlipX:Hi,isBottomView:aa,transparency:b,showTopImage:ca,showBottomImage:qa,showViasLayer:Br,showTopTracesLayer:Or,showBottomTracesLayer:Ir,showTopPadsLayer:fo,showBottomPadsLayer:$r,showTopTestPointsLayer:jo,showBottomTestPointsLayer:Ta,showTopComponents:Wa,showBottomComponents:Ya,showPowerLayer:$o,showGroundLayer:kn,showConnectionsLayer:rr}}))}no(!1),H("select"),ha(void 0);return}const I=ns[Y];if(I){ui(I.zoom),ur(I.viewRotation??0),jr(I.viewFlipX??!1),Ro(I.isBottomView??!1),x(I.transparency??50);const he=I.pcbReferenceX??I.x??0,ne=I.pcbReferenceY??I.y??0;let ue=0,we=0;o?(ue=o.x,we=o.y):u&&(ue=u.x,we=u.y);const Te=he-ue,ke=ne-we;(Math.abs(Te)>.001||Math.abs(ke)>.001)&&(o&&s({...o,x:o.x+Te,y:o.y+ke}),u&&f({...u,x:u.x+Te,y:u.y+ke}),Ai(Rt.map(De=>({...De,x:De.x+Te,y:De.y+ke}))),Vn(Wt.map(De=>({...De,x:De.x+Te,y:De.y+ke}))),Ne(me.map(De=>({...De,x:De.x+Te,y:De.y+ke}))),it(Ue.map(De=>({...De,x:De.x+Te,y:De.y+ke}))),Ct(ut.map(De=>({...De,points:De.points.map(Le=>({...Le,x:Le.x+Te,y:Le.y+ke}))}))),At(Vo.map(De=>({...De,x:De.x+Te,y:De.y+ke}))),so(Vi.map(De=>({...De,x:De.x+Te,y:De.y+ke})))),yi({x:0,y:0}),Fi(I.showTopImage),Yo(I.showBottomImage),Ha(I.showViasLayer),uo(I.showTopTracesLayer),Gr(I.showBottomTracesLayer),Go(I.showTopPadsLayer),Va(I.showBottomPadsLayer),xr(I.showTopTestPointsLayer),sl(I.showBottomTestPointsLayer),vs(I.showTopComponents),Ei(I.showBottomComponents),Oo(I.showPowerLayer),ei(I.showGroundLayer),vr(I.showConnectionsLayer)}return}if(c.key==="+"||c.key==="="){c.preventDefault(),c.stopPropagation(),xf();return}if(c.key==="-"||c.key==="_"){c.preventDefault(),c.stopPropagation(),Fc();return}const ie=c.shiftKey||c.getModifierState("CapsLock"),Se=P==="transform"&&Ht;if(c.key==="ArrowUp"||c.key==="ArrowDown"||c.key==="ArrowLeft"||c.key==="ArrowRight"){if(rn.size>0){c.preventDefault(),c.stopPropagation();const I=c.shiftKey?10:1;let he=0,ne=0;c.key==="ArrowUp"?ne=-I:c.key==="ArrowDown"?ne=I:c.key==="ArrowLeft"?he=-I:c.key==="ArrowRight"&&(he=I);for(const ue of rn){const we=Rt.find(Te=>Te.id===ue);if(we){const Te=we.x+he,ke=we.y+ne,De=$i({x:Te,y:ke});Ai(Le=>Le.map(Ce=>Ce.id===ue?{...Ce,x:De.x,y:De.y}:Ce))}else{const Te=Wt.find(ke=>ke.id===ue);if(Te){const ke=Te.x+he,De=Te.y+ne,Le=$i({x:ke,y:De});Vn(Ce=>Ce.map(Me=>Me.id===ue?{...Me,x:Le.x,y:Le.y}:Me))}}}return}if(ie&&!Se&&rn.size===0){if(c.key==="ArrowUp"||c.key==="ArrowDown"){c.preventDefault(),c.stopPropagation();const I=c.key==="ArrowUp"?-90:90;vc(I);return}else if(c.key==="ArrowLeft"||c.key==="ArrowRight"){c.preventDefault(),c.stopPropagation(),Fr();return}}}if((c.key==="I"||c.key==="i")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const I=document.activeElement;if(!!I&&(I.tagName==="INPUT"&&I.type!=="range"&&I.type!=="checkbox"&&I.type!=="radio"||I.tagName==="TEXTAREA"||I.isContentEditable))return;c.preventDefault(),c.stopPropagation();const ne=[];Qn.size>0,Qn.size===0&&rn.size===0&&ni.size===0&&ii.size===0&&ne.push(`
No objects selected.`);const ue=ne.join(`
`);console.log(ue),Is({visible:!0,text:ue});return}if((c.key==="N"||c.key==="n")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const I=document.activeElement;if(!!I&&(I.tagName==="INPUT"&&I.type!=="range"&&I.type!=="checkbox"&&I.type!=="radio"||I.tagName==="TEXTAREA"||I.isContentEditable))return;c.preventDefault(),c.stopPropagation(),Gi(!0);return}if((c.key==="L"||c.key==="l")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const I=document.activeElement;if(!!I&&(I.tagName==="INPUT"&&I.type!=="range"&&I.type!=="checkbox"&&I.type!=="radio"||I.tagName==="TEXTAREA"||I.isContentEditable))return;c.preventDefault(),c.stopPropagation(),wf();return}if((c.key==="E"||c.key==="e")&&!c.ctrlKey&&!c.shiftKey&&!c.altKey){const I=document.activeElement;if(!!I&&(I.tagName==="INPUT"&&I.type!=="range"&&I.type!=="checkbox"&&I.type!=="radio"||I.tagName==="TEXTAREA"||I.isContentEditable))return;c.preventDefault(),c.stopPropagation(),Yt||gs(!0);return}if(c.key==="O"||c.key==="o"){const I=document.activeElement;if(!!I&&(I.tagName==="INPUT"&&I.type!=="range"&&I.type!=="checkbox"&&I.type!=="radio"||I.tagName==="TEXTAREA"||I.isContentEditable))return;c.preventDefault(),c.stopPropagation();const ne=ns[0];if(ne){ui(ne.zoom),ur(ne.viewRotation??0),jr(ne.viewFlipX??!1),Ro(ne.isBottomView??!1),x(ne.transparency??50);const ue=ne.pcbReferenceX??ne.x??0,we=ne.pcbReferenceY??ne.y??0;let Te=0,ke=0;o?(Te=o.x,ke=o.y):u&&(Te=u.x,ke=u.y);const De=ue-Te,Le=we-ke;(Math.abs(De)>.001||Math.abs(Le)>.001)&&(o&&s({...o,x:o.x+De,y:o.y+Le}),u&&f({...u,x:u.x+De,y:u.y+Le}),Ai(Rt.map(Ce=>({...Ce,x:Ce.x+De,y:Ce.y+Le}))),Vn(Wt.map(Ce=>({...Ce,x:Ce.x+De,y:Ce.y+Le}))),Ne(me.map(Ce=>({...Ce,x:Ce.x+De,y:Ce.y+Le}))),it(Ue.map(Ce=>({...Ce,x:Ce.x+De,y:Ce.y+Le}))),Ct(ut.map(Ce=>({...Ce,points:Ce.points.map(Me=>({...Me,x:Me.x+De,y:Me.y+Le}))}))),At(Vo.map(Ce=>({...Ce,x:Ce.x+De,y:Ce.y+Le}))),so(Vi.map(Ce=>({...Ce,x:Ce.x+De,y:Ce.y+Le})))),Fi(ne.showTopImage),Yo(ne.showBottomImage),Ha(ne.showViasLayer),uo(ne.showTopTracesLayer),Gr(ne.showBottomTracesLayer),Go(ne.showTopPadsLayer),Va(ne.showBottomPadsLayer),xr(ne.showTopTestPointsLayer),sl(ne.showBottomTestPointsLayer),vs(ne.showTopComponents),Ei(ne.showBottomComponents),Oo(ne.showPowerLayer),ei(ne.showGroundLayer),vr(ne.showConnectionsLayer)}else ui(1),ur(0),jr(!1),Ro(!1),x(0);yi({x:0,y:0}),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),h("overlay"),Cn(new Set),Tn(new Set),Kt(new Set),on(new Set),H("select");return}if((c.key==="Alt"||c.altKey)&&(Kf(!0),is(!0)),c.key==="Escape"){c.preventDefault(),c.stopPropagation(),qc(),rs(!1),Cc(!1),Tc(!1),Ve(!1),xa(!1),Xf(null);return}if(c.key==="Enter"&&P==="draw"&&at==="trace"){Uu();return}if((c.key==="Delete"||c.key==="Backspace")&&(Qn.size>0||rn.size>0||ni.size>0||ii.size>0)){if(c.preventDefault(),c.stopPropagation(),ln(ut,Rt,Wt,me,Ue),Qn.size>0){const I=ut.filter(Te=>Qn.has(Te.id)),he=Ni&&I.some(Te=>Te.type==="via"),ne=lo&&I.some(Te=>Te.type==="trace"),ue=Ki&&I.some(Te=>Te.type==="pad"),we=wo&&I.some(Te=>Te.type==="testPoint");he?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):ne?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):ue?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):we?alert("Cannot delete: Test points are locked. Unlock test points to delete them."):(Ct(Te=>Te.filter(ke=>!Qn.has(ke.id))),Cn(new Set))}rn.size>0&&(Er?alert("Cannot delete: Components are locked. Unlock components to delete them."):(Ai(I=>I.filter(he=>!rn.has(he.id))),Vn(I=>I.filter(he=>!rn.has(he.id))),Tn(new Set))),ni.size>0&&(ri?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Ne(I=>I.filter(he=>!ni.has(he.id))),Kt(new Set))),ii.size>0&&(co?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(it(I=>I.filter(he=>!ii.has(he.id))),on(new Set)));return}if((c.key==="z"||c.key==="Z")&&(c.ctrlKey||c.metaKey)&&!c.shiftKey&&!c.altKey){const I=document.activeElement;if(!!I&&(I.tagName==="INPUT"&&I.type!=="range"&&I.type!=="checkbox"&&I.type!=="radio"||I.tagName==="TEXTAREA"||I.isContentEditable))return;c.preventDefault(),c.stopPropagation();const ne=Xn();if(ne){const ue=new Set(ne.drawingStrokes.map(De=>De.id));for(const De of ut)if(!ue.has(De.id))for(const Le of De.points)Le.id&&typeof Le.id=="number"&&jp(Le.id);const we=new Set([...ne.componentsTop.map(De=>De.id),...ne.componentsBottom.map(De=>De.id)]);for(const De of[...Rt,...Wt])if(!we.has(De.id)){for(const Le of De.pinConnections)if(Le&&Le.trim()!==""){const Ce=parseInt(Le,10);!isNaN(Ce)&&Ce>0&&jp(Ce)}}const Te=new Set(ne.powerSymbols.map(De=>De.id));for(const De of me)!Te.has(De.id)&&De.pointId&&typeof De.pointId=="number"&&jp(De.pointId);const ke=new Set(ne.groundSymbols.map(De=>De.id));for(const De of Ue)!ke.has(De.id)&&De.pointId&&typeof De.pointId=="number"&&jp(De.pointId);Ct(ne.drawingStrokes),Ai(ne.componentsTop),Vn(ne.componentsBottom),Ne(ne.powerSymbols),it(ne.groundSymbols),Nn([])}return}if(!c.ctrlKey&&!c.altKey){const I=document.activeElement;if(!(!!I&&(I.tagName==="INPUT"&&I.type!=="range"&&I.type!=="checkbox"&&I.type!=="radio"||I.tagName==="TEXTAREA"||I.isContentEditable)))switch(c.key){case"s":case"S":c.preventDefault(),qe(),qc();return;case"b":case"B":c.preventDefault(),qe(),an.length===1?(Oe(an[0].id),H("power"),Ve(!1),Oo(!0)):an.length>1?Ve(!0):(Ve(!0),H("power"),Oo(!0));return;case"g":case"G":c.preventDefault(),qe(),w.length===1?(It(w[0].id),H("ground"),zt(!1),ei(!0)):w.length>1?zt(!0):(zt(!0),H("ground"),ei(!0));return;case"v":case"V":c.preventDefault(),qe(),$t("via"),H("draw"),Ha(!0);return;case"p":case"P":c.preventDefault(),qe(),$t("pad"),H("draw");return;case"y":case"Y":c.preventDefault(),qe(),$t("testPoint"),H("draw");return;case"t":case"T":c.preventDefault(),qe(),$t("trace"),H("draw");return;case"c":case"C":c.preventDefault(),qe(),H("component"),pf.current?jc(pf.current):jc(null);return;case"e":case"E":c.preventDefault(),qe(),H("erase");return;case"h":case"H":c.preventDefault(),qe(),H("pan");return;case"x":case"X":c.preventDefault(),qe(),H("center"),no(!0),pr.current&&clearTimeout(pr.current),pr.current=setTimeout(()=>{no(!1),H("select"),ha(void 0)},2e3);return;case"m":case"M":if(!c.ctrlKey){c.preventDefault(),qe(),wl(!1),H("magnify");return}break}}if(P==="transform"&&Ht){if(!(c.key==="ArrowLeft"||c.key==="ArrowRight"||c.key==="ArrowUp"||c.key==="ArrowDown"))return;c.preventDefault(),c.stopPropagation();const he=document.activeElement;if(he&&he.tagName==="INPUT"){const ne=he;ne.type==="radio"&&ne.blur()}if(ji)return;if(zo==="nudge"){let ne=0,ue=0;switch(c.key){case"ArrowLeft":ne=-1;break;case"ArrowRight":ne=1;break;case"ArrowUp":ue=-1;break;case"ArrowDown":ue=1;break;default:return}Ht==="top"&&o?s(we=>we?{...we,x:we.x+ne,y:we.y+ue}:null):Ht==="bottom"&&u?f(we=>we?{...we,x:we.x+ne,y:we.y+ue}:null):Ht==="both"&&(o&&s(we=>we?{...we,x:we.x+ne,y:we.y+ue}:null),u&&f(we=>we?{...we,x:we.x+ne,y:we.y+ue}:null))}else if(zo==="scale"){let ne=0;switch(c.key){case"ArrowUp":ne=.01;break;case"ArrowDown":ne=-.01;break;case"ArrowRight":ne=.001;break;case"ArrowLeft":ne=-.001;break;default:return}if(Ht==="top"){o&&s(ue=>ue?{...ue,scale:Math.max(.1,Math.min(3,ue.scale+ne))}:null);return}if(Ht==="bottom"){u&&f(ue=>ue?{...ue,scale:Math.max(.1,Math.min(3,ue.scale+ne))}:null);return}if(Ht==="both"){o&&s(ue=>ue?{...ue,scale:Math.max(.1,Math.min(3,ue.scale+ne))}:null),u&&f(ue=>ue?{...ue,scale:Math.max(.1,Math.min(3,ue.scale+ne))}:null);return}}else if(zo==="rotate"){let ne=0;switch(c.key){case"ArrowUp":ne=1;break;case"ArrowDown":ne=-1;break;case"ArrowRight":ne=.1;break;case"ArrowLeft":ne=-.1;break;default:return}if(Ht==="top"){o&&s(ue=>ue?{...ue,rotation:ue.rotation+ne}:null);return}if(Ht==="bottom"){u&&f(ue=>ue?{...ue,rotation:ue.rotation+ne}:null);return}if(Ht==="both"){o&&s(ue=>ue?{...ue,rotation:ue.rotation+ne}:null),u&&f(ue=>ue?{...ue,rotation:ue.rotation+ne}:null);return}}else if(zo==="slant"){let ne=0,ue=0;switch(c.key){case"ArrowUp":ue=-.5;break;case"ArrowDown":ue=.5;break;case"ArrowLeft":ne=-.5;break;case"ArrowRight":ne=.5;break}if(ne!==0||ue!==0){const we=tu,Te=ke=>Math.max(-.7,Math.min(.7,ke));if(Ht==="top"){o&&s(ke=>ke?{...ke,skewX:Te((ke.skewX||0)+we(ne)),skewY:Te((ke.skewY||0)+we(ue))}:null);return}if(Ht==="bottom"){u&&f(ke=>ke?{...ke,skewX:Te((ke.skewX||0)+we(ne)),skewY:Te((ke.skewY||0)+we(ue))}:null);return}if(Ht==="both"){o&&s(ke=>ke?{...ke,skewX:Te((ke.skewX||0)+we(ne)),skewY:Te((ke.skewY||0)+we(ue))}:null),u&&f(ke=>ke?{...ke,skewX:Te((ke.skewX||0)+we(ne)),skewY:Te((ke.skewY||0)+we(ue))}:null);return}}}else if(zo==="keystone"){let ne=0,ue=0;switch(c.key){case"ArrowUp":ue=-.5;break;case"ArrowDown":ue=.5;break;case"ArrowLeft":ne=-.5;break;case"ArrowRight":ne=.5;break}if(ne!==0||ue!==0){const we=tu,Te=ke=>Math.max(-.35,Math.min(.35,ke));if(Ht==="top"){o&&s(ke=>ke?{...ke,keystoneH:Te((ke.keystoneH||0)+we(ne)),keystoneV:Te((ke.keystoneV||0)+we(ue))}:null);return}if(Ht==="bottom"){u&&f(ke=>ke?{...ke,keystoneH:Te((ke.keystoneH||0)+we(ne)),keystoneV:Te((ke.keystoneV||0)+we(ue))}:null);return}if(Ht==="both"){o&&s(ke=>ke?{...ke,keystoneH:Te((ke.keystoneH||0)+we(ne)),keystoneV:Te((ke.keystoneV||0)+we(ue))}:null),u&&f(ke=>ke?{...ke,keystoneH:Te((ke.keystoneH||0)+we(ne)),keystoneV:Te((ke.keystoneV||0)+we(ue))}:null);return}}}}else{const I=c.target;if(I.tagName==="INPUT"&&I.type==="range"){const he=I,ne=Number(he.value),ue=Number(he.min),we=Number(he.max),Te=Number(he.step)||1;switch(c.key){case"ArrowLeft":c.preventDefault();const ke=Math.max(ue,ne-Te);he.value=ke.toString(),he.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":c.preventDefault();const De=Math.min(we,ne+Te);he.value=De.toString(),he.dispatchEvent(new Event("input",{bubbles:!0}));break}}}},[P,Ht,zo,o,u,Qn,rn,ni,ii,ut,Rt,Wt,_n,Rn,an,at,Uu,Yn,V,k,J,ye,qc,Ai,Vn,Xn,Ct,Ne,it,me,Ue,Fr,vc,ns,bt,Jn,Hi,aa,b,ui,ur,jr,Ro,x,s,f,At,so,yi,h,Cn,Tn,Kt,on,H,Vo,Vi,ca,qa,Br,Or,Ir,fo,$r,jo,Ta,Wa,Ya,$o,kn,rr,Fi,Yo,Ha,uo,Gr,Go,Va,xr,sl,vs,Ei,Oo,ei,vr]);Nt.useEffect(()=>{P!=="transform"&&yo(null)},[P]),Nt.useEffect(()=>{window.addEventListener("keydown",Fu,!0);const c=y=>{y.key==="Alt"&&(Kf(!1),is(!1),To(null))};return window.addEventListener("keyup",c,!0),()=>{window.removeEventListener("keydown",Fu,!0),window.removeEventListener("keyup",c,!0)}},[Fu,ni,ii,ri,ri,_n,Rn,xf,Fc,qc,rn,Rt,Wt,Ai,Vn,ns,bc,P]);const Nc=U.useCallback(()=>{gn.current={},$("#AA4499"),S("#F781BF"),re(6),K(6),Pt("trace","#AA4499","top"),Pt("trace","#F781BF","bottom"),kt("trace",6,"top"),kt("trace",6,"bottom"),ge("#0072B2"),be("#56B4E9"),A(18),B(18),Pt("pad","#0072B2","top"),Pt("pad","#56B4E9","bottom"),kt("pad",18,"top"),kt("pad",18,"bottom"),Bt("#6A3D9A"),_t("#9467BD"),Zt(18),Qt(18),Pt("component","#6A3D9A","top"),Pt("component","#9467BD","bottom"),kt("component",18,"top"),kt("component",18,"bottom"),Po("top"),X("#AA4499"),E(6),us([{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),W([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),kt("power",18),kt("ground",18),Ii(!1),mr(!1),Os(!1),ia(!1),Ba(!1),Ja(!1),qt("top"),H("select"),x(50),D(!1),h("overlay"),a1(),pi()},[Pt,kt,pi]),qu=U.useCallback(()=>{Rr(null),xl(null),Vc&&(Vc.current=null),Nl&&(Nl.current=null),ir(""),va("pcb_project"),la(!1),qs(null),Fa(""),Hs([]),ms(-1),_l&&(_l.current=""),Ji.current=!1,Ua(!1),Ro(!1),ts(null),_i(null),Di.current&&(clearInterval(Di.current),Di.current=null),s(null),f(null),pi(),Ct([]),At([]),so([]),Ea([]),Ka([]),Nn([]),Sn.current=[],Ai([]),Vn([]),Ra(null),Rs(null),Ne([]),it([]),Ut(null),us([{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}]),W([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),Cn(new Set),Tn(new Set),Kt(new Set),on(new Set),na(!1),po([]),h("overlay"),ui(1),za(0,0),La(!0),qt("top"),Sl({}),no(!1),pr.current&&(clearTimeout(pr.current),pr.current=null),yo(null),_o(!1),Vt(null),da("nudge"),O(!1),x(50),D(!1),C(2e3),Ii(!1),mr(!1),Za(!1),Bs(!1),Os(!1),ia(!1),Ba(!1),Ja(!1),Fi(!0),Yo(!0),Ha(!0),uo(!0),Gr(!0),Go(!0),Va(!0),xr(!0),sl(!0),vs(!0),Ei(!0),Oo(!0),ei(!0),vr(!0),Xr(!0),H("select"),$t("trace"),Po("top"),ea("top"),_s("top"),ta("top"),pa.current="top",Ls.current="top",zs.current="top",Ks.current="top",gn.current={},Qi(!0),Mt(!1),a1(),Oa(null),Is({visible:!1,text:""}),es({visible:!1,title:"",message:""}),Qr({visible:!1}),ma({visible:!1}),hs({visible:!1,projectName:"",locationPath:"",locationHandle:null}),fr({visible:!1,filename:"",locationPath:"",locationHandle:null}),ds({visible:!1,interval:null}),Jr({visible:!1,source:"new",interval:5}),xa(!1),g(!1),ct(!1),br(!1),er(!1),Gi(!1),yn(!1),So(!1),ll(null),To(null),Fl(null),Ul(!1),xs.current=null,vl.current=null,Gt(!1),wn(null),Oi.current=0,In.current=!1,console.log("Project closed: All state cleared and browser permissions released")},[Rr,xl,ir,va,la,qs,Fa,Hs,ms,s,f,Ct,Nn,At,so,Ea,Ka,Ai,Vn,Ra,Rs,Ne,it,Ut,us,W,Cn,Tn,Kt,on,na,po,h,ui,cs,La,qt,Sl,no,yo,_o,Vt,da,O,x,D,C,Ii,mr,Za,Bs,Os,ia,Ba,Ja,Fi,Yo,Ha,uo,Gr,Go,Va,xr,sl,vs,Ei,Oo,ei,vr,H,$t,Po,ea,_s,ta,Qi,Mt,Oa,Is,es,Qr,hs,fr,ds,Jr,pi,xa,g,ct,br,er,Gi,yn,ll,To,Fl,Ul,Gt,wn]),as=U.useCallback(()=>{Nc(),setTimeout(()=>{ui(1),yi({x:0,y:0}),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Cn(new Set),Tn(new Set),Kt(new Set),on(new Set)},200)},[Nc,ui,yi]);Nt.useEffect(()=>{as()},[]),Nt.useEffect(()=>{if(!Ia.visible)return;const c=[];Qn.size>0,Qn.size===0&&rn.size===0&&ni.size===0&&ii.size===0&&c.push(`
No objects selected.`);const y=c.join(`
`);Is(N=>({...N,text:y}))},[Ia.visible,Qn,rn,ni,ii,ut,Rt,Wt,_n,Rn,an]),Nt.useEffect(()=>{const c=y=>{const N=nr.current;if(N&&!(y.target instanceof Node&&N.contains(y.target))){if(Uu(),nc){const Y=ic.current;(!Y||!(y.target instanceof Node)||!Y.contains(y.target))&&rs(!1)}if(yc){const Y=ru.current;!y.target?.closest('button[title="Color Picker"]')&&(!Y||!(y.target instanceof Node)||!Y.contains(y.target))&&xa(!1)}}};return document.addEventListener("mousedown",c,!0),()=>document.removeEventListener("mousedown",c,!0)},[Uu,nc,Ic,yc]);const du=c=>{if(!c.current)return{top:0,left:0};const y=c.current.getBoundingClientRect(),N=ec.current?.getBoundingClientRect();return N?{top:y.top-N.top,left:y.left-N.left+y.width+4}:{top:0,left:0}},bf=U.useCallback(()=>{ic.current&&uu.current&&requestAnimationFrame(()=>{if(ic.current&&uu.current){const c=du(uu);ic.current.style.top=`${c.top}px`,ic.current.style.left=`${c.left}px`}})},[]),vf=U.useCallback(()=>{Gs.current&&hf.current&&requestAnimationFrame(()=>{if(Gs.current&&hf.current){const c=du(hf);Gs.current.style.top=`${c.top}px`,Gs.current.style.left=`${c.left}px`}})},[]),pu=U.useCallback(()=>{Hl.current&&Iu.current&&requestAnimationFrame(()=>{if(Hl.current&&Iu.current){const c=du(Iu);Hl.current.style.top=`${c.top}px`,Hl.current.style.left=`${c.left}px`}})},[]);Nt.useEffect(()=>{nc&&bf()},[nc,bf]),Nt.useEffect(()=>{Ic&&vf()},[Ic,vf]),Nt.useEffect(()=>{Uc&&pu()},[Uc,pu]),Nt.useEffect(()=>{if(Re&&Vl.current&&gf.current){const c=du(gf);Vl.current.style.top=`${c.top}px`,Vl.current.style.left=`${c.left}px`}},[Re]),Nt.useEffect(()=>{if(Xt&&os.current&&yf.current){const c=du(yf);os.current.style.top=`${c.top}px`,os.current.style.left=`${c.left}px`}},[Xt]),Nt.useEffect(()=>{const c=y=>{if(!Yr)return;const N=document.querySelector("[data-component-editor-dialog]");if(N&&y.target instanceof Node&&N.contains(y.target)){const Fe=y.target;if(Fe.tagName==="BUTTON"||Fe.tagName==="INPUT"||Fe.closest("button")||Fe.closest("input"))return}const Y=nr.current;if(!Y)return;const ie=Y.getBoundingClientRect(),Se=y.clientX,I=y.clientY;if(Se<ie.left||Se>ie.right||I<ie.top||I>ie.bottom)return;const he=Y.width/ie.width,ne=Y.height/ie.height,ue=Se-ie.left,we=I-ie.top,Te=ue*he,ke=we*ne,De=Te-5,Le=ke-5,Ce=zd(De,Le,Wi,bt,Jn,Hi),Me=Ce.x,_e=Ce.y;let $e=1/0,lt=null,ht=null;const gt=Math.max(6/bt,4),Lt=[...Rt,...Wt].find(Fe=>Fe.id===Yr.componentId)?.layer||"top";for(const Fe of ut)if((Fe.type==="via"||Fe.type==="pad")&&Fe.points.length>0){if(Fe.type==="pad"&&(Fe.layer||"top")!==Lt)continue;const Be=Fe.points[0],He=Math.max(1,Fe.size/2),Qe=Math.hypot(Be.x-Me,Be.y-_e),rt=Math.max(He,gt);Qe<=rt&&Qe<$e&&($e=Qe,lt=Be.id??null,ht=Fe)}if(lt!=null&&ht){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${lt}`),console.log(`  Connecting pin ${Yr.pinIndex+1} of component ${Yr.componentId}`);const Fe=String(lt),Be=Yr.pinIndex,He=Yr.componentId,Qe=Rt.find(vt=>vt.id===He),rt=Wt.find(vt=>vt.id===He);if(Qe){const vt=ut;Ai(Ot=>{const fn=Ot.find(jt=>jt.id===He);if(!fn)return Ot;const mn=fn.pinConnections||[],zn=mn.length>0?[...mn]:new Array(fn.pinCount).fill("");let An;if(zn.length!==fn.pinCount){An=new Array(fn.pinCount).fill("");for(let jt=0;jt<Math.min(zn.length,fn.pinCount);jt++)An[jt]=zn[jt]||""}else An=[...zn];An[Be]=Fe,console.log(`Updated pin ${Be} with value: ${Fe}`),console.log("New pinConnections:",An);const ti=Ot.find(jt=>jt.id===He),dn=ti?b0(ti,An,vt):null;return Ot.map(jt=>{if(jt.id===He){const bn={...jt,pinConnections:An};return dn&&(bn.pinPolarities=dn),bn}return jt})})}else if(rt){const vt=ut;Vn(Ot=>{const fn=Ot.find(jt=>jt.id===He);if(!fn)return Ot;const mn=fn.pinConnections||[],zn=mn.length>0?[...mn]:new Array(fn.pinCount).fill("");let An;if(zn.length!==fn.pinCount){An=new Array(fn.pinCount).fill("");for(let jt=0;jt<Math.min(zn.length,fn.pinCount);jt++)An[jt]=zn[jt]||""}else An=[...zn];An[Be]=Fe,console.log(`Updated pin ${Be} with value: ${Fe}`),console.log("New pinConnections:",An);const ti=Ot.find(jt=>jt.id===He),dn=ti?b0(ti,An,vt):null;return Ot.map(jt=>{if(jt.id===He){const bn={...jt,pinConnections:An};return dn&&(bn.pinPolarities=dn),bn}return jt})})}setTimeout(()=>{Rs(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Yr)return document.addEventListener("mousedown",c,!0),()=>document.removeEventListener("mousedown",c,!0)},[Yr,Rt,Wt,ut,bt,Wi.x,Wi.y,Jn,Hi]);const $a=U.useCallback((c,y,N,Y)=>{const ie=window.innerWidth,Se=window.innerHeight,I=10;let he=Math.max(I,Math.min(c,ie-N-I)),ne=Math.max(I,Math.min(y,Se-Y-I));return{x:he,y:ne}},[]);Nt.useEffect(()=>{if(!Ms)return;const c=N=>{if(!yl)return;const Y={x:N.clientX-yl.x,y:N.clientY-yl.y},ie=$a(Y.x,Y.y,250,window.innerHeight*.4);Ma(ie),localStorage.setItem("componentDialogPosition",JSON.stringify(ie))},y=()=>{Bl(!1),Js(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[Ms,yl,$a]),Nt.useEffect(()=>{if(!oi)return;const c=N=>{if(!gr)return;const Y={x:N.clientX-gr.x,y:N.clientY-gr.y},ie=$a(Y.x,Y.y,250,window.innerHeight*.4);Ar(ie),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(ie))},y=()=>{Li(!1),Ri(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[oi,gr,$a]),Nt.useEffect(()=>{if(!qi)return;const c=N=>{if(!Ur)return;const Y={x:N.clientX-Ur.x,y:N.clientY-Ur.y};Nr(Y),localStorage.setItem("notesDialogPosition",JSON.stringify(Y))},y=()=>{ro(!1),or(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[qi,Ur]),Nt.useEffect(()=>{if(io&&mi===null){const c=localStorage.getItem("notesDialogPosition");if(c)try{const y=JSON.parse(c);Nr(y)}catch{Nr({x:window.innerWidth-550,y:100})}else Nr({x:window.innerWidth-550,y:100})}},[io,mi]),Nt.useEffect(()=>{if(!ua)return;const c=N=>{if(!Io)return;const Y={x:N.clientX-Io.x,y:N.clientY-Io.y};Ci(Y),localStorage.setItem("projectNotesDialogPosition",JSON.stringify(Y))},y=()=>{Ga(!1),Kr(null)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",y)}},[ua,Io]),Nt.useEffect(()=>{if(_r&&un===null){const c=localStorage.getItem("projectNotesDialogPosition");if(c)try{const y=JSON.parse(c);Ci(y)}catch{Ci({x:100,y:100})}else Ci({x:100,y:100})}},[_r,un]);const wf=U.useCallback(()=>{yn(!0)},[]);Nt.useEffect(()=>{if(Do&&Do.visible&&ya===null){const c=localStorage.getItem("componentDialogPosition");let y;if(c)try{const N=JSON.parse(c);y=$a(N.x,N.y,250,window.innerHeight*.4),Ma(y)}catch{y=$a(window.innerWidth-280,90,250,window.innerHeight*.4),Ma(y)}else y=$a(window.innerWidth-280,90,250,window.innerHeight*.4),Ma(y)}else!Do||Do.visible},[Do,ya,$a]),Nt.useEffect(()=>{if(Ia.visible&&cr===null){const c=localStorage.getItem("detailedInfoDialogPosition");let y;if(c)try{const N=JSON.parse(c);y=$a(N.x,N.y,400,window.innerHeight*.8),Ar(y)}catch{y=$a(window.innerWidth-450,90,400,window.innerHeight*.8),Ar(y)}else y=$a(window.innerWidth-450,90,400,window.innerHeight*.8),Ar(y)}else Ia.visible},[Ia.visible,cr,$a]),Nt.useEffect(()=>{const c=()=>{if(ya){const y=$a(ya.x,ya.y,250,window.innerHeight*.4);(y.x!==ya.x||y.y!==ya.y)&&(Ma(y),localStorage.setItem("componentDialogPosition",JSON.stringify(y)))}if(cr){const y=$a(cr.x,cr.y,400,window.innerHeight*.8);(y.x!==cr.x||y.y!==cr.y)&&(Ar(y),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(y)))}};return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[ya,cr,$a]);const $d=U.useCallback(c=>{switch(c){case"transparency":x(50);break;case"brushSize":E(3);break}},[]),ad=Nt.useRef(R);Nt.useEffect(()=>{ad.current=R},[R]),Nt.useEffect(()=>{if(T){bl.current=performance.now(),x(0);const c=y=>{const N=bl.current||y,Y=ad.current,ie=(y-N)%Y/Y,Se=1-Math.abs(1-2*ie);x(Math.round(Se*100)),al.current=requestAnimationFrame(c)};al.current=requestAnimationFrame(c)}return()=>{al.current&&(cancelAnimationFrame(al.current),al.current=null)}},[T]),Nt.useEffect(()=>{if(P==="center"){ha(hx());return}const c=P==="erase"?"erase":P==="magnify"?"magnify":P==="ground"?"ground":P==="power"?"power":P==="component"?"component":P==="draw"?at==="via"?"via":at==="pad"?"pad":at==="testPoint"?"testPoint":"trace":"default";if(c==="default"){ha(void 0);return}const y=bt;let N;if(c==="magnify")N=18;else if(c==="component"){const ke=(Hn||"top")==="top"?"componentTop":"componentBottom",Le=Kn.get(ke).size||$p.DEFAULT_SIZE;N=Math.max(16,Math.round(Le*y))}else c==="power"||c==="ground"?N=Math.max(12,Math.round(_*y)):N=Math.max(6,Math.round(_*y));const ie=N+4*2+(c==="magnify"?8:0),Se=document.createElement("canvas");Se.width=ie,Se.height=ie;const I=Se.getContext("2d");if(!I){ha(void 0);return}const he=ie/2,ne=ie/2,ue=N/2;if(I.clearRect(0,0,ie,ie),c==="via"){const Te=ue,ke=ue*.5,De=ue*.7,Ce=Kn.get("via").color;I.fillStyle=Ce,I.beginPath(),I.arc(he,ne,Te,0,Na),I.arc(he,ne,ke,0,Na),I.fill("evenodd"),I.strokeStyle="#808080",I.lineWidth=1,I.beginPath(),I.moveTo(he-De,ne),I.lineTo(he+De,ne),I.stroke(),I.beginPath(),I.moveTo(he,ne-De),I.lineTo(he,ne+De),I.stroke()}else if(c==="pad"){const Te=Ti==="top"?"padTop":"padBottom",ke=Kn.get(Te),De=ke.color,Ce=Math.max(6,Math.round(ke.size*y))/2,Me=Ce*2,_e=Me*.5,$e=Ce*.7;I.fillStyle=De,I.beginPath(),I.rect(he-Ce,ne-Ce,Me,Me),I.rect(he-_e/2,ne-_e/2,_e,_e),I.fill("evenodd"),I.strokeStyle="#808080",I.lineWidth=1,I.beginPath(),I.moveTo(he-$e,ne),I.lineTo(he+$e,ne),I.stroke(),I.beginPath(),I.moveTo(he,ne-$e),I.lineTo(he,ne+$e),I.stroke()}else if(c==="trace"){const Te=Yn==="top"?"traceTop":"traceBottom",De=Kn.get(Te).color;I.fillStyle=De,I.beginPath(),I.arc(he,ne,ue,0,Na),I.fill()}else if(c==="testPoint"){const Te=Ln==="top"?"testPointTop":"testPointBottom",De=Kn.get(Te).size*y;ha(gx(De));return}else if(c==="erase"){const Te=_*y,ke=Math.max(Te*.75,8),De=Math.max(Te*.5,6),Le=Math.max(Te*.2,2);I.save(),I.translate(he,ne),I.rotate(tu(-35)),I.fillStyle="#f5a3b3",I.strokeStyle="#111",I.lineWidth=1.5;const Ce=1.5,Me=-ke/2,_e=-De/2;I.beginPath(),I.moveTo(Me+Ce,_e),I.lineTo(Me+ke-Ce,_e),I.quadraticCurveTo(Me+ke,_e,Me+ke,_e+Ce),I.lineTo(Me+ke,_e+De-Ce),I.quadraticCurveTo(Me+ke,_e+De,Me+ke-Ce,_e+De),I.lineTo(Me+Ce,_e+De),I.quadraticCurveTo(Me,_e+De,Me,_e+De-Ce),I.lineTo(Me,_e+Ce),I.quadraticCurveTo(Me,_e,Me+Ce,_e),I.closePath(),I.fill(),I.stroke(),I.fillStyle="#f18ea4",I.beginPath(),I.rect(-ke/2,De/2-Le,ke,Le),I.fill(),I.restore()}else if(c==="magnify"){const Te=ue;I.strokeStyle="#111",I.lineWidth=2,I.beginPath(),I.arc(he-2,ne-2,Te,0,Na),I.stroke();const ke=he+Te*.6,De=ne+Te*.6,Le=ke+6,Ce=De+6;I.beginPath(),I.moveTo(ke,De),I.lineTo(Le,Ce),I.stroke(),I.beginPath(),I.moveTo(he-6,ne-2),I.lineTo(he+2,ne-2),I.stroke(),Sa||(I.beginPath(),I.moveTo(he-2,ne-6),I.lineTo(he-2,ne+2),I.stroke())}else if(c==="ground"){const ke=(hn?w.find(Le=>Le.id===hn):null)?.color||"#000000";if(I.strokeStyle=ke,I.lineWidth=2,I.lineCap="round",hn==="groundbus-earth"){const Le=ue*1.5,Ce=Le*.9,Me=Le*.24,_e=Le*1.6;I.beginPath(),I.moveTo(he,ne-Ce/2),I.lineTo(he,ne+Ce/2),I.stroke();for(let $e=0;$e<3;$e++){const lt=ne+Ce/2+$e*Me,ht=_e*(1-$e*.25);I.beginPath(),I.moveTo(he-ht/2,lt),I.lineTo(he+ht/2,lt),I.stroke()}}else{const Le=ue*.8;I.beginPath(),I.arc(he,ne,ue,0,Na),I.stroke(),I.beginPath(),I.moveTo(he,ne-ue-Le),I.lineTo(he,ne+ue+Le),I.stroke(),I.beginPath(),I.moveTo(he-ue-Le,ne),I.lineTo(he+ue+Le,ne),I.stroke()}}else if(c==="power"){const ke=(xe?an.find(Le=>Le.id===xe):null)?.color||"#ff0000";I.strokeStyle=ke,I.lineWidth=2,I.lineCap="round";const De=ue*.8;I.beginPath(),I.arc(he,ne,ue,0,Na),I.stroke(),I.beginPath(),I.moveTo(he,ne-ue-De),I.lineTo(he,ne+ue+De),I.stroke(),I.beginPath(),I.moveTo(he-ue-De,ne),I.lineTo(he+ue+De,ne),I.stroke()}else if(c==="component"){const ke=(Hn||"top")==="top"?"componentTop":"componentBottom",Le=Kn.get(ke).color,Ce=N,Me=Ce/2;I.strokeStyle=Le,I.lineWidth=2,I.fillStyle="rgba(255,255,255,0.9)",I.beginPath(),I.rect(he-Me,ne-Me,Ce,Ce),I.fill(),I.stroke();const _e=(()=>{if(Zr?.componentDefinition?.designators?.[0]){const $e=Zr.componentDefinition.designators[0];return $e.length<=3?$e:$e.substring(0,3)}return Zr?.designator?Zr.designator.length<=3?Zr.designator:Zr.designator.substring(0,3):fa?y0(fa):"?"})();I.fillStyle=Le,I.font=`bold ${Math.max(8,Ce*.35)}px sans-serif`,I.textAlign="center",I.textBaseline="middle",I.fillText(_e,he,ne)}const we=`url(${Se.toDataURL()}) ${Math.round(he)} ${Math.round(ne)}, crosshair`;ha(we)},[P,at,se,_,bt,Sa,fa,Zr,xe,hn,an,w,On,Yn,Ti,Ln,Hn,Xi.toolInstanceId]),Nt.useEffect(()=>{ac()},[ac]),Nt.useEffect(()=>{ac()},[Ys.width,Ys.height]),Nt.useEffect(()=>{Qn.size===0&&P==="draw"&&at==="trace"&&_>=1&&(Ft==="top"?re(_):K(_))},[_,P,at,Ft,Qn]),Nt.useEffect(()=>{Ct(c=>c.map(y=>{if(y.type==="via"&&y.points.length>0&&y.points[0].id!==void 0){const N=y.points[0].id,Y=ws(N,an);if(y.viaType!==Y)return{...y,viaType:Y}}else if(y.type==="pad"&&y.points.length>0&&y.points[0].id!==void 0){const N=y.points[0].id,Y=Ss(N,an);if(y.padType!==Y)return{...y,padType:Y}}else if(y.type==="testPoint"&&y.points.length>0&&y.points[0].id!==void 0){const N=y.points[0].id,Y=Cs(N,an),ie=Y.includes("Power")?"power":Y.includes("Ground")?"ground":Y.includes("Signal")?"signal":"unknown";if(y.testPointType!==ie)return{...y,testPointType:ie}}return y}))},[_n,Rn,an,ws,Ss,Cs]);const Jp=U.useCallback(()=>{const c=nr.current;if(!c)return;const y=c.toDataURL("image/png"),N=window.open("","_blank");if(!N){alert("Please allow popups to print the canvas.");return}N.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${y}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),N.document.close()},[]);Nt.useEffect(()=>{const c=N=>{N.key==="Shift"&&wl(!0)},y=N=>{N.key==="Shift"&&wl(!1)};return window.addEventListener("keydown",c),window.addEventListener("keyup",y),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",y)}},[]);const Sf=U.useCallback(c=>{if(c.size===0)return;const y=Array.from(c).map(N=>String(N));Ct(N=>N.map(Y=>{if(Y.type==="trace"){const ie=Y.points.filter(Se=>Se.id===void 0?!0:!c.has(Se.id));return ie.length<2?null:{...Y,points:ie}}return Y}).filter(Y=>Y!==null)),Ai(N=>N.map(Y=>{const ie=Y.pinConnections||[];if(ie.some(I=>I&&y.includes(I))){const I=ie.map(he=>he&&y.includes(he)?"":he);return{...Y,pinConnections:I}}return Y})),Vn(N=>N.map(Y=>{const ie=Y.pinConnections||[];if(ie.some(I=>I&&y.includes(I))){const I=ie.map(he=>he&&y.includes(he)?"":he);return{...Y,pinConnections:I}}return Y}))},[Ct,Ai,Vn]),ko=U.useRef(new Set);Nt.useEffect(()=>{const c=new Set;for(const N of ut)if((N.type==="via"||N.type==="pad")&&N.points.length>0){const Y=N.points[0].id;Y!==void 0&&c.add(Y)}const y=new Set;for(const N of ko.current)c.has(N)||y.add(N);y.size>0&&Sf(y),ko.current=c},[ut,Sf]),Nt.useEffect(()=>{Ct(c=>c.map(y=>{if(y.type==="via"&&y.points.length>0&&y.points[0].id!==void 0){const N=y.points[0].id,Y=ws(N,an);if(y.viaType!==Y)return{...y,viaType:Y}}else if(y.type==="pad"&&y.points.length>0&&y.points[0].id!==void 0){const N=y.points[0].id,Y=Ss(N,an);if(y.padType!==Y)return{...y,padType:Y}}else if(y.type==="testPoint"&&y.points.length>0&&y.points[0].id!==void 0){const N=y.points[0].id,Y=Cs(N,an),ie=Y.includes("Power")?"power":Y.includes("Ground")?"ground":Y.includes("Signal")?"signal":"unknown";if(y.testPointType!==ie)return{...y,testPointType:ie}}return y}))},[_n,Rn,an,ws,Ss,Cs]),Nt.useEffect(()=>{const c=y=>{kr.current&&(kr.current.contains(y.target)||Oa(null))};return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[]),Nt.useEffect(()=>{const c=(y,N)=>{const Y=y.current;if(!Y)return;const ie=Y.getContext("2d");if(!ie)return;const Se=Y.width,I=Y.height;if(ie.clearRect(0,0,Se,I),ie.fillStyle="#fff",ie.fillRect(0,0,Se,I),N?.bitmap){const he=N.bitmap,ne=Math.min(Se/he.width,I/he.height),ue=Math.max(1,Math.floor(he.width*ne)),we=Math.max(1,Math.floor(he.height*ne)),Te=Math.floor((Se-ue)/2),ke=Math.floor((I-we)/2);ie.drawImage(he,Te,ke,ue,we)}ie.strokeStyle="#ddd",ie.lineWidth=1,ie.strokeRect(.5,.5,Se-1,I-1)};c(bs,o),c(Cl,u)},[o,u]),Nt.useEffect(()=>{const c=[],y=[],N=[],Y=[];for(const ie of ut)if(ie.type==="via"&&ie.points.length>=1){const Se=ie.points[0],I={id:ie.id,pointId:Se.id,x:Se.x,y:Se.y,size:ie.size,color:ie.color};c.push(I)}else if(ie.type==="pad"&&ie.points.length>=1){const Se=ie.points[0],I={id:ie.id,pointId:Se.id,x:Se.x,y:Se.y,size:ie.size,color:ie.color,layer:ie.layer||"top"};y.push(I)}else if(ie.type==="trace"&&ie.points.length>=2)for(let Se=0;Se<ie.points.length-1;Se++){const I=ie.points[Se],he=ie.points[Se+1],ne={id:ie.id,startPointId:I.id,endPointId:he.id,x1:I.x,y1:I.y,x2:he.x,y2:he.y,size:ie.size,color:ie.color};ie.layer==="top"?N.push(ne):Y.push(ne)}At(c),so(y),Ea(N),Ka(Y)},[ut]);const Fo=U.useRef(ut);Fo.current=ut;const Wl=U.useCallback(()=>{const y=new Date().toISOString(),N=l1();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:y,view:{currentView:v,viewScale:bt,cameraWorldCenter:vi,showBothLayers:hl,selectedDrawingLayer:Ft},images:{top:o?{name:o.name,width:o.width,height:o.height,filePath:o.filePath||o.name,x:o.x,y:o.y,scale:o.scale,rotation:o.rotation,flipX:o.flipX,flipY:o.flipY,skewX:o.skewX,skewY:o.skewY,keystoneV:o.keystoneV,keystoneH:o.keystoneH,brightness:o.brightness??100,contrast:o.contrast??100}:null,bottom:u?{name:u.name,width:u.width,height:u.height,filePath:u.filePath||u.name,x:u.x,y:u.y,scale:u.scale,rotation:u.rotation,flipX:u.flipX,flipY:u.flipY,skewX:u.skewX,skewY:u.skewY,keystoneV:u.keystoneV,keystoneH:u.keystoneH,brightness:u.brightness??100,contrast:u.contrast??100}:null},projectDirectoryName:Vc.current?Vc.current.name||null:Si&&Si.name||null,drawing:{drawingStrokes:Fo.current.filter(ie=>!(ie.type==="trace"&&ie.points.length<2)),vias:Vo,tracesTop:Zs,tracesBottom:ga,componentsTop:Rt,componentsBottom:Wt,grounds:Rn,powers:_n},powerBuses:an,groundBuses:w,pointIdCounter:o1(),designatorCounters:{...gn.current},autoAssignDesignators:Gn,useGlobalDesignatorCounters:Fn,traceColors:{top:On.get("trace")?.layerSettings.get("top")?.color||V,bottom:On.get("trace")?.layerSettings.get("bottom")?.color||k},traceSizes:{top:On.get("trace")?.layerSettings.get("top")?.size||J,bottom:On.get("trace")?.layerSettings.get("bottom")?.size||ye},padColors:{top:On.get("pad")?.layerSettings.get("top")?.color||te,bottom:On.get("pad")?.layerSettings.get("bottom")?.color||je},padSizes:{top:On.get("pad")?.layerSettings.get("top")?.size||F,bottom:On.get("pad")?.layerSettings.get("bottom")?.size||M},componentColors:{top:On.get("component")?.layerSettings.get("top")?.color||St,bottom:On.get("component")?.layerSettings.get("bottom")?.color||pe},componentSizes:{top:On.get("component")?.layerSettings.get("top")?.size||pn,bottom:On.get("component")?.layerSettings.get("bottom")?.size||dt},testPointColors:{top:On.get("testPoint")?.layerSettings.get("top")?.color||de,bottom:On.get("testPoint")?.layerSettings.get("bottom")?.color||Ee},testPointSizes:{top:On.get("testPoint")?.layerSettings.get("top")?.size||Pe,bottom:On.get("testPoint")?.layerSettings.get("bottom")?.size||Ke},componentConnectionColor:Et,componentConnectionSize:Jt,toolLayerDefaults:{trace:Yn,pad:Ti,testPoint:Ln,component:Hn},toolSettings:{trace:On.get("trace")?.settings||{color:"#ff0000",size:6},via:On.get("via")?.settings||{color:"#ff0000",size:18},pad:On.get("pad")?.settings||{color:"#ff0000",size:18},component:On.get("component")?.settings||{color:"#ff0000",size:18},ground:On.get("ground")?.settings||{color:"#000000",size:18},power:On.get("power")?.settings||{color:"#ff0000",size:18},erase:On.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:ji,areViasLocked:Ni,arePadsLocked:Ki,areTracesLocked:lo,areComponentsLocked:Er,areGroundNodesLocked:co,arePowerNodesLocked:ri},visibility:{showViasLayer:Br,showTopPadsLayer:fo,showBottomPadsLayer:$r,showTopTracesLayer:Or,showBottomTracesLayer:Ir,showTopComponents:Wa,showBottomComponents:Ya,showPowerLayer:$o,showGroundLayer:kn,showConnectionsLayer:rr,showTraceCornerDots:Yi},autoSave:{enabled:to,interval:nl,baseName:rl},projectInfo:{name:Mr},projectNotes:xi,homeViews:ns,toolInstances:Kn.getAll()},timestamp:N}},[v,bt,vi,hl,Ft,o,u,ut,Vo,Zs,ga,Rt,Wt,Rn,On,ji,Ni,Ki,lo,Er,co,ri,an,w,o1,V,k,J,ye,te,je,F,M,St,pe,pn,dt,Yn,Ti,Ln,Hn,to,nl,rl,Mr,Br,fo,$r,Or,Ir,Wa,Ya,$o,kn,rr,Gn,Fn,xi,ns]),sd=U.useRef(Wl);sd.current=Wl;const Nl=U.useRef(il);Nl.current=il;const _l=U.useRef(rl);_l.current=rl;const hu=U.useRef(ir);hu.current=ir;const ld=U.useRef(ol);ld.current=ol;const ka=U.useRef([]);ka.current=Rc;const Hc=U.useRef(-1);Hc.current=Mc;const Vc=U.useRef(null),Wc=U.useRef(!1);Nt.useEffect(()=>{Wc.current||(Vc.current=Si)},[Si]);const Hu=U.useCallback(async()=>{console.log("Auto save: performAutoSave called");let c=Nl.current||Vc.current,y=_l.current;if(console.log(`Auto save: dirHandle=${c?`set (using ${Nl.current?"autoSaveDirHandle":"projectDirHandle"})`:"missing"}, baseName=${y||"missing"}`),!c||!y){console.warn(`Auto save: Missing project directory handle (${!c}) or base name (${!y}). Please create a new project or open an existing project first.`),la(!1),Di.current&&(clearInterval(Di.current),Di.current=null);return}if(!Ji.current){console.log("Auto save: Skipping - no changes since last save");return}const N=Fo.current,Y=N.filter(we=>we.type==="trace"&&we.points.length<2);if(Y.length>0){console.log(`Auto save: Cleaning up ${Y.length} single-point trace(s) before save`),Y.forEach(Te=>console.log(`  - Removing single-point trace ${Te.id}`));const we=N.filter(Te=>!(Te.type==="trace"&&Te.points.length<2));Ct(we),Fo.current=we}console.log("Auto save: Starting save...");const{project:ie,timestamp:Se}=sd.current(),he=`${Ku(y)}_${Se}.json`,ne=JSON.stringify(ie,null,2),ue=new Blob([ne],{type:"application/json"});try{let we;try{we=await c.getDirectoryHandle("history",{create:!0})}catch(Ce){console.error("Failed to get/create history directory:",Ce);return}try{const Ce=[],Me=ld.current;for await(const _e of c.keys())try{if(_e==="history"||_e===he)continue;const lt=await(await c.getFileHandle(_e)).getFile();if(!_e.endsWith(".json"))continue;const ht=await lt.text();try{const gt=JSON.parse(ht);if(gt.version&&(gt.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!gt.fileType)){Ce.push(_e);const Xe=gt.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${_e} (${Xe}${_e===Me?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const _e of Ce)try{const ht=await(await(await c.getFileHandle(_e)).getFile()).text(),Xe=await(await we.getFileHandle(_e,{create:!0})).createWritable();await Xe.write(new Blob([ht],{type:"application/json"})),await Xe.close(),await c.removeEntry(_e),console.log(`Auto save: Moved ${_e} from root to history/`)}catch($e){console.warn(`Auto save: Failed to move ${_e} to history:`,$e)}}catch(Ce){console.warn("Auto save: Error checking for old files in root:",Ce)}const ke=await(await c.getFileHandle(he,{create:!0})).createWritable();await ke.write(ue),await ke.close(),console.log(`Auto save: Successfully saved ${he} to root directory`),hu.current(he);const De=ka.current,Le=[he,...De.filter(Ce=>Ce!==he)].sort((Ce,Me)=>Me.localeCompare(Ce));Hs(Le),ka.current=Le,ms(0),Hc.current=0,Ji.current=!1,Ua(!1)}catch(we){console.error("Auto save failed:",we)}},[]);xc.current=Hu;const gu=U.useCallback(async()=>{const{project:c}=Wl(),y=JSON.stringify(c,null,2),N=new Blob([y],{type:"application/json"});if(Si&&Mr)try{let ue=null;try{ue=await Si.getDirectoryHandle("history",{create:!0})}catch(Me){console.error("Failed to get/create history directory:",Me),ue=null}const we=Mr.replace(/\.json$/i,""),Te=Ku(we),{timestamp:ke}=Wl(),De=`${Te}_${ke}.json`;if(ue)try{const Me=[];for await(const _e of Si.keys())try{if(_e==="history"||_e===De)continue;const lt=await(await Si.getFileHandle(_e)).getFile();if(!_e.endsWith(".json"))continue;const ht=await lt.text();try{JSON.parse(ht).version&&(Me.push(_e),console.log(`Save: Found PCB project file in root: ${_e}`))}catch{continue}}catch{continue}for(const _e of Me)try{const ht=await(await(await Si.getFileHandle(_e)).getFile()).text(),Xe=await(await ue.getFileHandle(_e,{create:!0})).createWritable();await Xe.write(new Blob([ht],{type:"application/json"})),await Xe.close(),await Si.removeEntry(_e),console.log(`Save: Moved ${_e} from root to history/`)}catch($e){console.warn(`Save: Failed to move ${_e} to history:`,$e)}}catch(Me){console.warn("Save: Error checking for old files in root:",Me)}const Ce=await(await Si.getFileHandle(De,{create:!0})).createWritable();await Ce.write(N),await Ce.close(),ir(De),Ua(!1),Ji.current=!1,console.log(`Project saved successfully: ${Mr}/${De}`),alert(`Project saved successfully!

File: ${De}
Location: ${Mr}`);return}catch(ue){const we=ue instanceof Error?ue.message:String(ue);console.error("Failed to save to project directory:",ue),alert(`Failed to save project to directory.

Error: ${we}

Please try saving again or use Save As...`),Rr(null)}if(Mr&&!Si){const ue=window;if(typeof ue.showDirectoryPicker=="function")try{const we=await ue.showDirectoryPicker();Rr(we);const Te=`${Mr}.json`,De=await(await we.getFileHandle(Te,{create:!0})).createWritable();await De.write(N),await De.close(),ir(Te),Ua(!1),Ji.current=!1,console.log(`Project saved successfully: ${Te} in selected directory`),alert(`Project saved successfully!

File: ${Te}`);return}catch(we){if(we?.name!=="AbortError"){const Te=we instanceof Error?we.message:String(we);console.error("Failed to get directory:",we),alert(`Failed to select directory.

Error: ${Te}

Falling back to file picker...`)}}}const Y=ue=>String(ue).padStart(2,"0"),ie=new Date,I=`pcb_project_${`${ie.getFullYear()}_${Y(ie.getMonth()+1)}_${Y(ie.getDate())}_${Y(ie.getHours())}_${Y(ie.getMinutes())}_${Y(ie.getSeconds())}`}.json`,he=window;if(typeof he.showSaveFilePicker=="function")try{const ue=await he.showSaveFilePicker({suggestedName:I,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),we=await ue.createWritable();await we.write(N),await we.close();const Te=ue.name;try{const Le=await ue.getFile();ir(Le.name)}catch{ir(Te)}const De=Te.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");De&&va(De);try{const Le=ue.name.replace(/\.json$/i,""),Me=Ku(Le).replace(/[^a-zA-Z0-9_-]/g,"_");Fa(Me),il||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(Le){console.warn("Could not set up auto save for new file:",Le)}console.log(`Project saved successfully: ${Te}`),alert(`Project saved successfully!

File: ${Te}`);return}catch(ue){if(ue?.name==="AbortError")return;const we=ue instanceof Error?ue.message:String(ue);console.warn("showSaveFilePicker failed, falling back to download",ue),alert(`File picker unavailable.

Error: ${we}

Falling back to browser download...`)}const ne=document.createElement("a");ne.href=URL.createObjectURL(N),ne.download=I,document.body.appendChild(ne),ne.click(),setTimeout(()=>{URL.revokeObjectURL(ne.href),document.body.removeChild(ne)},0),console.log(`Project downloaded: ${I}`),alert(`Project downloaded successfully!

File: ${I}

Note: For better project management, use File  New Project or File  Open Project.`)},[Wl,Si,Mr,ir,Rr,Ua,va,Fa,il,Ku]),cd=U.useCallback(c=>{const y=new jn,N=y.internal.pageSize.getWidth(),Y=y.internal.pageSize.getHeight(),ie=20;let Se=ie;const I=7,he=60;y.setFontSize(18),y.setFont("helvetica","bold"),y.text("Bill of Materials",N/2,Se,{align:"center"}),Se+=I*2,y.setFontSize(10),y.setFont("helvetica","normal"),c.projectName&&(y.text(`Project: ${c.projectName}`,ie,Se),Se+=I),y.text(`Exported: ${new Date(c.exportedAt).toLocaleString()}`,ie,Se),Se+=I,y.text(`Total Components: ${c.totalComponents} | Unique Components: ${c.uniqueComponents}`,ie,Se),Se=he,y.setFontSize(9),y.setFont("helvetica","bold");const ne=[15,50,30,20,25,30,20],ue=["Qty","Component Type","Value","Package","Manufacturer","Part Number","Layer"];let we=ie;return ue.forEach((ke,De)=>{y.text(ke,we,Se),we+=ne[De]}),Se+=I,y.setLineWidth(.5),y.line(ie,Se,N-ie,Se),Se+=I*.5,y.setFont("helvetica","normal"),y.setFontSize(8),c.items.forEach(ke=>{const De=$e=>{Se>Y-ie-I*$e&&(y.addPage(),Se=ie+I)};De(3),we=ie,[ke.quantity.toString(),ke.componentType,ke.value||"-",ke.packageType||"-",ke.manufacturer||"-",ke.partNumber||"-",ke.layer].forEach(($e,lt)=>{const ht=ne[lt]-2,gt=y.splitTextToSize($e,ht);y.text(gt[0]||"-",we,Se),we+=ne[lt]}),Se+=I*1.2;const Ce=(ke.notes||"").toString().trim(),Me=ke.datasheet?ke.datasheet.toString().trim():"",_e=[];if(Ce&&_e.push(`Notes: ${Ce}`),Me&&_e.push(`Spec Sheet URL: ${Me}`),_e.length>0){const $e=ie+ne[0]+2,lt=N-ie-$e;_e.forEach(ht=>{y.splitTextToSize(ht,lt).forEach(Xe=>{De(2),y.text(Xe,$e,Se),Se+=I*.9})})}De(1),y.setLineWidth(.2),y.line(ie,Se,N-ie,Se),Se+=I*.5}),y.output("blob")},[]),Xd=U.useCallback(async()=>{if(console.log("handleExportBOM called, format:",ae),!Si){alert("Please create or open a project before exporting BOM.");return}try{console.log("Generating BOM data...");const c=xx(Rt,Wt,Mr);console.log("BOM data generated:",c),console.log("Creating/getting BOM directory...");let y;try{y=await Si.getDirectoryHandle("BOM",{create:!0}),console.log("BOM directory obtained")}catch(he){console.error("Failed to get/create BOM directory:",he),alert("Failed to create BOM directory. See console for details.");return}const N=l1();let Y,ie;if(ae==="pdf")console.log("Generating PDF..."),Y=cd(c),ie=`BOM_${N}.pdf`;else{console.log("Generating JSON...");const he=JSON.stringify(c,null,2);Y=new Blob([he],{type:"application/json"}),ie=`BOM_${N}.json`}console.log("Saving file:",ie);const I=await(await y.getFileHandle(ie,{create:!0})).createWritable();await I.write(Y),await I.close(),console.log("BOM file saved successfully"),alert(`BOM exported successfully to ${ie} in BOM directory!`)}catch(c){console.error("Failed to export BOM:",c),alert(`Failed to export BOM: ${c instanceof Error?c.message:String(c)}. See console for details.`)}},[Si,Rt,Wt,Mr,ae,cd]);Nt.useEffect(()=>{Di.current&&(clearInterval(Di.current),Di.current=null);const c=Co.current;if(Co.current=to,to&&nl){const y=nl*60*1e3;(il||Si)&&rl?(console.log(`Auto save: Setting up interval for ${nl} minute(s) (${y}ms)`),c||(Ji.current=!0,setTimeout(()=>{Hu()},100)),Di.current&&(clearInterval(Di.current),Di.current=null),Di.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${Ji.current}`),console.log(`  - dirHandle: ${Nl.current?"set":"missing"}`),console.log(`  - baseName: ${_l.current||"missing"}`),Hu()},y),console.log(`Auto save: Interval set up for ${y}ms (${nl} minutes)`),console.log(`  - Auto save directory handle: ${il?"set":"missing"}`),console.log(`  - Project directory handle: ${Si?"set":"missing"}`),console.log(`  - Base name: ${rl||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (autoSaveDirHandle: ${!!il}, projectDirHandle: ${!!Si}) or base name (${!rl}). Disabling auto save.`),la(!1),Di.current&&(clearInterval(Di.current),Di.current=null))}else to||(Co.current=!1);return()=>{Di.current&&(clearInterval(Di.current),Di.current=null)}},[to,nl,il,rl,Si]);const yu=U.useRef(!1),mu=U.useRef(!1),[ud,Kd]=Nt.useState(0);Nt.useEffect(()=>{const y=Object.keys(Kn.getAll()).map(N=>Kn.subscribe(N,()=>{Kd(Y=>Y+1)}));return()=>y.forEach(N=>N())},[]),Nt.useEffect(()=>{if(mu.current){console.log("Change tracking: Skipping - project is being loaded");return}if(to&&yu.current){yu.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}Ji.current=!0,Ua(!0),console.log("Change detected, marking as unsaved",{autoSaveEnabled:to,topImage:!!o,bottomImage:!!u,drawingStrokesCount:ut.length,componentsTopCount:Rt.length,componentsBottomCount:Wt.length,powersCount:_n.length,groundsCount:Rn.length,powerBusesCount:an.length,projectNotesCount:xi.length,areImagesLocked:ji,areViasLocked:Ni,areTracesLocked:lo,areComponentsLocked:Er,areGroundNodesLocked:co,arePowerNodesLocked:ri})},[o,u,ut,Rt,Wt,_n,Rn,an,xi,V,k,J,ye,ji,Ni,lo,Er,co,ri,w,to,te,je,F,M,St,pe,pn,dt,de,Ee,Pe,Ke,Et,Jt,Yn,Gn,Fn,ns,On,ud]),Nt.useEffect(()=>{to?(yu.current=!0,console.log("Auto save: Enabled, marking first run")):yu.current=!1},[to]),Nt.useEffect(()=>{to||(Ji.current=!1)},[to]);const Vu=U.useCallback(()=>!!(o||u||ut.length>0||Rt.length>0||Wt.length>0||_n.length>0||Rn.length>0),[o,u,ut,Rt,Wt,_n,Rn]),_c=U.useCallback(()=>{hs({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),fd=U.useCallback(async()=>{const c=window;if(typeof c.showDirectoryPicker=="function")try{const y=await c.showDirectoryPicker({mode:"readwrite"});hs(N=>({...N,locationHandle:y,locationPath:y.name||"Selected folder"}))}catch(y){y?.name!=="AbortError"&&(console.error("Failed to get directory:",y),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),dd=U.useCallback(async()=>{const c=wi.projectName.trim();if(!c){alert("Please enter a project name.");return}const y=c.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!wi.locationHandle){alert("Please select a location for the project.");return}const N=wi.locationHandle;let Y,ie;if(N.name===y)Y=N,ie=N;else{ie=N;try{Y=await ie.getDirectoryHandle(y,{create:!0})}catch(Se){console.error("Failed to create project folder:",Se),alert(`Failed to create project folder "${y}". See console for details.`);return}}qu(),hs({visible:!1,projectName:"",locationPath:"",locationHandle:null}),va(y),Rr(Y),Nc(),mo(),Ro(!1),x(0);try{const{project:Se,timestamp:I}=Wl(),ne=`${Ku(y)}_${I}.json`,ue=JSON.stringify(Se,null,2),we=new Blob([ue],{type:"application/json"}),ke=await(await Y.getFileHandle(ne,{create:!0})).createWritable();await ke.write(we),await ke.close(),ir(ne),console.log(`New project created: ${y}/${ne}`),Jr({visible:!0,source:"new",interval:5})}catch(Se){console.error("Failed to save new project:",Se),alert("Failed to save new project file. See console for details.")}},[Nc,Wl,wi,qu,mo,Ro,x]),Wu=U.useCallback(()=>{hs({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Zd=U.useCallback(async()=>{const c=window;if(typeof c.showDirectoryPicker=="function")try{const y=await c.showDirectoryPicker();fr(N=>({...N,locationHandle:y,locationPath:y.name||"Selected folder"}))}catch(y){y?.name!=="AbortError"&&(console.error("Failed to get directory:",y),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Yl=U.useCallback(async()=>{const c=Zi.filename.trim();if(!c){alert("Please enter a file name.");return}const N=(c.endsWith(".json")?c:`${c}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!Zi.locationHandle){alert("Please select a location for the file.");return}const Y=Zi.locationHandle;try{const{project:ie}=Wl(),Se=JSON.stringify(ie,null,2),I=new Blob([Se],{type:"application/json"}),ne=await(await Y.getFileHandle(N,{create:!0})).createWritable();await ne.write(I),await ne.close(),ir(N);const ue=N.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");ue&&va(ue),Rr(Y),Ua(!1),Ji.current=!1,fr({visible:!1,filename:"",locationPath:"",locationHandle:null}),Oa(null),console.log(`Project saved as: ${N} in selected directory`)}catch(ie){console.error("Failed to save project:",ie),alert(`Failed to save project file "${N}". See console for details.`)}},[Zi,Wl]),Yu=U.useCallback(()=>{fr({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),pd=U.useCallback(async()=>{Qr({visible:!1}),await gu(),_c(),as()},[gu,_c,as]),Jd=U.useCallback(()=>{Qr({visible:!1}),_c(),as()},[_c,as]),sc=U.useCallback(()=>{Qr({visible:!1})},[]);Nt.useEffect(()=>{if(oa.visible){setTimeout(()=>{Bo.current?.focus()},0);const c=y=>{y.key==="Enter"?(y.preventDefault(),pd()):y.key==="Escape"&&(y.preventDefault(),Qr({visible:!1}))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}}},[oa.visible,pd]);const lc=U.useCallback(async(c,y)=>{mu.current=!0;try{if(pi(),c.toolInstances?Kn.initializeFromProject(c):Kn.initialize(),c.projectInfo&&c.projectInfo.name&&va(c.projectInfo.name),c.view){if(c.view.currentView&&h(c.view.currentView),c.view.viewScale!=null&&ui(c.view.viewScale),c.view.cameraWorldCenter)yi(c.view.cameraWorldCenter);else if(c.view.viewPan){const he=nr.current;if(he){const ne=(he.width-10)/2,ue=(he.height-10)/2,we=c.view.viewScale??1,Te=(ne-c.view.viewPan.x)/we,ke=(ue-c.view.viewPan.y)/we;yi({x:Te,y:ke})}else yi({x:0,y:0})}c.view.showBothLayers!=null&&La(c.view.showBothLayers),c.view.selectedDrawingLayer&&qt(c.view.selectedDrawingLayer)}if(c.homeViews){const he={};for(const[ne,ue]of Object.entries(c.homeViews)){const we=parseInt(ne,10),Te=ue;let ke=Te.pcbReferenceX,De=Te.pcbReferenceY;(ke===void 0||De===void 0)&&(ke=Te.x??0,De=Te.y??0),Te.showTopImage===void 0?he[we]={pcbReferenceX:ke,pcbReferenceY:De,x:0,y:0,zoom:Te.zoom,viewRotation:Jn,viewFlipX:Hi,isBottomView:aa,transparency:b,showTopImage:ca,showBottomImage:qa,showViasLayer:Br,showTopTracesLayer:Or,showBottomTracesLayer:Ir,showTopPadsLayer:fo,showBottomPadsLayer:$r,showTopTestPointsLayer:jo,showBottomTestPointsLayer:Ta,showTopComponents:Wa,showBottomComponents:Ya,showPowerLayer:$o,showGroundLayer:kn,showConnectionsLayer:rr}:he[we]={...Te,pcbReferenceX:ke,pcbReferenceY:De,x:0,y:0,viewRotation:Te.viewRotation??0,viewFlipX:Te.viewFlipX??!1,isBottomView:Te.isBottomView??!1,transparency:Te.transparency??50}}Sl(he)}else Sl({});if(c.projectNotes&&Array.isArray(c.projectNotes)?po(c.projectNotes):po([]),c.traceColors&&(c.traceColors.top&&($(c.traceColors.top),Pt("trace",c.traceColors.top,"top")),c.traceColors.bottom&&(S(c.traceColors.bottom),Pt("trace",c.traceColors.bottom,"bottom"))),c.traceSizes){const he=c.traceSizes.top!=null&&c.traceSizes.top>0?c.traceSizes.top:6;let ne=c.traceSizes.bottom!=null&&c.traceSizes.bottom>0?c.traceSizes.bottom:6;ne<6&&(ne=6),re(he),K(ne),kt("trace",he,"top"),kt("trace",ne,"bottom")}else re(6),K(6);if(c.padColors&&(c.padColors.top&&(ge(c.padColors.top),Pt("pad",c.padColors.top,"top")),c.padColors.bottom&&(be(c.padColors.bottom),Pt("pad",c.padColors.bottom,"bottom"))),c.padSizes){const he=c.padSizes.top!=null&&c.padSizes.top>0?c.padSizes.top:18,ne=c.padSizes.bottom!=null&&c.padSizes.bottom>0?c.padSizes.bottom:18;A(he),B(ne),kt("pad",he,"top"),kt("pad",ne,"bottom")}if(c.componentColors&&(c.componentColors.top&&(Bt(c.componentColors.top),Pt("component",c.componentColors.top,"top")),c.componentColors.bottom&&(_t(c.componentColors.bottom),Pt("component",c.componentColors.bottom,"bottom"))),c.componentSizes){const he=c.componentSizes.top!=null&&c.componentSizes.top>0?c.componentSizes.top:18,ne=c.componentSizes.bottom!=null&&c.componentSizes.bottom>0?c.componentSizes.bottom:18;Zt(he),Qt(ne),kt("component",he,"top"),kt("component",ne,"bottom")}c.toolLayerDefaults?(c.toolLayerDefaults.trace&&Po(c.toolLayerDefaults.trace),c.toolLayerDefaults.pad&&ea(c.toolLayerDefaults.pad),c.toolLayerDefaults.testPoint&&_s(c.toolLayerDefaults.testPoint),c.toolLayerDefaults.component&&ta(c.toolLayerDefaults.component)):c.traceToolLayer&&Po(c.traceToolLayer),c.toolSettings&&Bn(he=>{const ne=new Map(he);if(c.toolSettings.trace){const we=ne.get("trace");if(we){const Te={...we,settings:c.toolSettings.trace},ke=new Map(we.layerSettings);c.traceSizes&&c.traceColors&&(ke.set("top",{color:c.traceColors.top||we.layerSettings.get("top")?.color||"#AA4499",size:c.traceSizes.top||we.layerSettings.get("top")?.size||6}),ke.set("bottom",{color:c.traceColors.bottom||we.layerSettings.get("bottom")?.color||"#F781BF",size:c.traceSizes.bottom||we.layerSettings.get("bottom")?.size||6})),ne.set("trace",{...Te,layerSettings:ke})}}if(c.toolSettings.via){const we=ne.get("via");we&&ne.set("via",{...we,settings:c.toolSettings.via})}if(c.toolSettings.pad){const we=ne.get("pad");if(we){const Te={...we,settings:c.toolSettings.pad},ke=new Map(we.layerSettings);c.padSizes&&c.padColors&&(ke.set("top",{color:c.padColors.top||we.layerSettings.get("top")?.color||"#0072B2",size:c.padSizes.top||we.layerSettings.get("top")?.size||18}),ke.set("bottom",{color:c.padColors.bottom||we.layerSettings.get("bottom")?.color||"#56B4E9",size:c.padSizes.bottom||we.layerSettings.get("bottom")?.size||18})),ne.set("pad",{...Te,layerSettings:ke})}}if(c.toolSettings.component){const we=ne.get("component");if(we){const Te={...we,settings:c.toolSettings.component},ke=new Map(we.layerSettings);c.componentSizes&&c.componentColors&&(ke.set("top",{color:c.componentColors.top||we.layerSettings.get("top")?.color||"#6A3D9A",size:c.componentSizes.top||we.layerSettings.get("top")?.size||18}),ke.set("bottom",{color:c.componentColors.bottom||we.layerSettings.get("bottom")?.color||"#9467BD",size:c.componentSizes.bottom||we.layerSettings.get("bottom")?.size||18})),ne.set("component",{...Te,layerSettings:ke})}}if(c.testPointSizes&&c.testPointColors){Ae(c.testPointColors.top||de),Ge(c.testPointColors.bottom||Ee),nt(c.testPointSizes.top||Pe),wt(c.testPointSizes.bottom||Ke);const we=ne.get("testPoint");if(we){const Te=new Map(we.layerSettings);Te.set("top",{color:c.testPointColors.top||we.layerSettings.get("top")?.color||"#E69F00",size:c.testPointSizes.top||we.layerSettings.get("top")?.size||6}),Te.set("bottom",{color:c.testPointColors.bottom||we.layerSettings.get("bottom")?.color||"#F0E442",size:c.testPointSizes.bottom||we.layerSettings.get("bottom")?.size||6}),ne.set("testPoint",{...we,layerSettings:Te})}}if(c.componentConnectionColor!==void 0&&vn(c.componentConnectionColor),c.componentConnectionSize!==void 0&&Wn(c.componentConnectionSize),c.toolSettings.ground){const we=ne.get("ground");we&&ne.set("ground",{...we,settings:c.toolSettings.ground})}if(c.toolSettings.power){const we=ne.get("power");we&&ne.set("power",{...we,settings:c.toolSettings.power})}if(c.toolSettings.erase){const we=ne.get("erase");we&&ne.set("erase",{...we,settings:c.toolSettings.erase})}const ue=P==="draw"&&at==="trace"?ne.get("trace"):P==="draw"&&at==="via"?ne.get("via"):P==="draw"&&at==="pad"?ne.get("pad"):P==="draw"&&at==="testPoint"?ne.get("testPoint"):P==="component"?ne.get("component"):P==="power"?ne.get("power"):P==="ground"?ne.get("ground"):null;if(ue)if(P==="draw"&&at==="trace"){const we=Yn||"top",Te=ue.layerSettings.get(we);Te?(X(Te.color),E(Te.size),we==="top"?($(Te.color),re(Te.size)):(S(Te.color),K(Te.size))):(X(ue.settings.color),E(ue.settings.size))}else if(P==="draw"&&at==="pad"){const we=Ti||"top",Te=ue.layerSettings.get(we);Te?(X(Te.color),E(Te.size),we==="top"?(ge(Te.color),A(Te.size)):(be(Te.color),B(Te.size))):(X(ue.settings.color),E(ue.settings.size))}else if(P==="component"){const we=Hn||"top",Te=ue.layerSettings.get(we);Te?(X(Te.color),E(Te.size),we==="top"?(Bt(Te.color),Zt(Te.size)):(_t(Te.color),Qt(Te.size))):(X(ue.settings.color),E(ue.settings.size))}else if(P==="draw"&&at==="testPoint"){const we=Ln||"top",Te=ue.layerSettings.get(we);Te?(X(Te.color),E(Te.size),we==="top"?(Ae(Te.color),nt(Te.size)):(Ge(Te.color),wt(Te.size))):(X(ue.settings.color),E(ue.settings.size))}else X(ue.settings.color),E(ue.settings.size);return ne});const N=async(he,ne)=>{if(!he)return null;let ue=null,we="",Te=he.filePath||he.name;if(!ne){const ke=he.name||"image";return alert(`Error: Cannot load image "${ke}" because no project directory is available.

Please ensure you opened the project file from its project directory. The project directory is required to access the image files stored in the images/ subdirectory.`),null}if(Te)try{let ke=Te;!Te.startsWith("images/")&&!Te.startsWith("Images/")?ke=Te:Te.startsWith("Images/")?ke=Te.replace("Images/",""):Te.startsWith("images/")&&(ke=Te.replace("images/",""));let De;try{De=await ne.getDirectoryHandle("images")}catch{try{De=await ne.getDirectoryHandle("Images")}catch{throw new Error("Neither 'images' nor 'Images' directory found in project folder.")}}const Ce=await(await De.getFileHandle(ke)).getFile();ue=await createImageBitmap(Ce),we=URL.createObjectURL(Ce),console.log(`Loaded image from file path: images/${ke}`),Te.startsWith("images/")||(Te=`images/${Te.replace("Images/","")}`)}catch(ke){const De=ke instanceof Error?ke.message:"Unknown error",Le=he.name||"image",Ce=Te.startsWith("images/")||Te.startsWith("Images/")?Te.replace("Images/","images/"):`images/${Te}`;return alert(`Error: Failed to load image "${Le}" from project directory.

Expected location: ${Ce}

This may occur if:
- The image file was moved or deleted
- The project directory structure was modified
- File permissions are insufficient

Please ensure the image file exists in the images/ subdirectory of your project folder.

Technical details: ${De}`),null}else{const ke=he.name||"image";return alert(`Error: Image "${ke}" has no file path specified in the project file.

The project file is missing the image file path information. This may indicate the project file is corrupted or was created with an older version of the software.`),null}if(!ue){const ke=he.name||"image";return alert(`Error: Could not create image bitmap for "${ke}".

The image file may be corrupted or in an unsupported format. Please ensure the image is a valid PNG, JPEG, or other supported image format.`),null}return{url:we,name:he.name??"image",width:he.width??ue.width,height:he.height??ue.height,filePath:Te,x:he.x??0,y:he.y??0,scale:he.scale??1,rotation:he.rotation??0,flipX:!!he.flipX,flipY:!!he.flipY,skewX:he.skewX??0,skewY:he.skewY??0,keystoneV:he.keystoneV??0,keystoneH:he.keystoneH??0,brightness:he.brightness??100,contrast:he.contrast??100,bitmap:ue}},Y=y!==void 0?y:Si,ie=await N(c.images?.top,Y),Se=await N(c.images?.bottom,Y);if(s(ie),f(Se),c.pointIdCounter&&typeof c.pointIdCounter=="number"?Vh(c.pointIdCounter):(console.warn("Project file missing pointIdCounter. Starting from 1."),Vh(1)),c.locks&&(typeof c.locks.areImagesLocked=="boolean"&&Ii(c.locks.areImagesLocked),typeof c.locks.areViasLocked=="boolean"&&mr(c.locks.areViasLocked),typeof c.locks.arePadsLocked=="boolean"&&Za(c.locks.arePadsLocked),typeof c.locks.areTracesLocked=="boolean"&&Os(c.locks.areTracesLocked),typeof c.locks.areComponentsLocked=="boolean"&&ia(c.locks.areComponentsLocked),typeof c.locks.areGroundNodesLocked=="boolean"&&Ba(c.locks.areGroundNodesLocked),typeof c.locks.arePowerNodesLocked=="boolean"&&Ja(c.locks.arePowerNodesLocked)),c.visibility&&(typeof c.visibility.showViasLayer=="boolean"&&Ha(c.visibility.showViasLayer),typeof c.visibility.showTopPadsLayer=="boolean"&&Go(c.visibility.showTopPadsLayer),typeof c.visibility.showBottomPadsLayer=="boolean"&&Va(c.visibility.showBottomPadsLayer),typeof c.visibility.showTopTracesLayer=="boolean"&&uo(c.visibility.showTopTracesLayer),typeof c.visibility.showBottomTracesLayer=="boolean"&&Gr(c.visibility.showBottomTracesLayer),typeof c.visibility.showTopComponents=="boolean"&&vs(c.visibility.showTopComponents),typeof c.visibility.showBottomComponents=="boolean"&&Ei(c.visibility.showBottomComponents),typeof c.visibility.showPowerLayer=="boolean"&&Oo(c.visibility.showPowerLayer),typeof c.visibility.showGroundLayer=="boolean"&&ei(c.visibility.showGroundLayer),typeof c.visibility.showConnectionsLayer=="boolean"&&vr(c.visibility.showConnectionsLayer),typeof c.visibility.showTraceCornerDots=="boolean"&&Xr(c.visibility.showTraceCornerDots)),c.autoSave?(typeof c.autoSave.enabled=="boolean"&&la(c.autoSave.enabled),typeof c.autoSave.interval=="number"&&qs(c.autoSave.interval),typeof c.autoSave.baseName=="string"&&c.autoSave.baseName?(Fa(c.autoSave.baseName),_l.current=c.autoSave.baseName,c.autoSave.enabled&&!il&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),la(!1),qs(null))):c.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),la(!1),qs(null),Fa(""),_l.current="")):(la(!1),qs(null),xl(null),Fa(""),Nl.current=null,_l.current="",Di.current&&(clearInterval(Di.current),Di.current=null)),c.drawing?.drawingStrokes&&Array.isArray(c.drawing.drawingStrokes)){const he=c.drawing.drawingStrokes.map(ne=>({...ne,points:ne.points.map(ue=>({...ue,...$i(ue)}))})).filter(ne=>!(ne.type==="trace"&&ne.points.length<2));Ct(he);for(const ne of he)for(const ue of ne.points)ue.id&&typeof ue.id=="number"&&Wh(ue.id)}else console.warn("Project file missing drawingStrokes. Starting with empty strokes."),Ct([]);if(c.drawing?.componentsTop){const he=c.drawing.componentsTop.map(ne=>{const ue=$i({x:ne.x,y:ne.y});return{...ne,x:ue.x,y:ue.y,layer:ne.layer||"top",pinConnections:ne.pinConnections||new Array(ne.pinCount||0).fill("")}});Ai(he)}if(c.drawing?.componentsBottom){const he=c.drawing.componentsBottom.map(ne=>{const ue=$i({x:ne.x,y:ne.y});return{...ne,x:ue.x,y:ue.y,layer:ne.layer||"bottom",pinConnections:ne.pinConnections||new Array(ne.pinCount||0).fill("")}});Vn(he)}if(c.designatorCounters&&typeof c.designatorCounters=="object"){const he=c.designatorCounters;gn.current={...he}}else gn.current={};if(typeof c.autoAssignDesignators=="boolean"&&Qi(c.autoAssignDesignators),typeof c.useGlobalDesignatorCounters=="boolean"?Mt(c.useGlobalDesignatorCounters):Mt(!1),c.drawing?.grounds){const ne=c.drawing.grounds.map(ue=>{ue.pointId||console.warn("Ground symbol missing pointId - this may cause issues");const we=$i({x:ue.x,y:ue.y});return{...ue,x:we.x,y:we.y}}).filter(ue=>{const we=typeof ue.x=="number"&&typeof ue.y=="number"&&!isNaN(ue.x)&&!isNaN(ue.y)&&isFinite(ue.x)&&isFinite(ue.y);return we||console.warn(`Filtered out invalid ground symbol at (${ue.x}, ${ue.y})`),we});it(ne);for(const ue of ne)ue.pointId&&typeof ue.pointId=="number"&&Wh(ue.pointId)}else it([]);let I;if(c.powerBuses&&Array.isArray(c.powerBuses)&&c.powerBuses.length>0?(I=c.powerBuses,us(I)):(I=[{id:"powerbus-default",name:"+5VDC",voltage:"+5",color:"#ff0000"}],us(I)),c.groundBuses&&Array.isArray(c.groundBuses)&&c.groundBuses.length>0?W(c.groundBuses):W([{id:"groundbus-circuit",name:"GND",color:"#000000"}]),c.drawing?.powers){const ne=c.drawing.powers.map(ue=>{ue.pointId||console.warn("Power symbol missing pointId - this may cause issues");const we=$i({x:ue.x,y:ue.y});return{...ue,x:we.x,y:we.y}}).filter(ue=>{const we=typeof ue.x=="number"&&typeof ue.y=="number"&&!isNaN(ue.x)&&!isNaN(ue.y)&&isFinite(ue.x)&&isFinite(ue.y);return we||console.warn(`Filtered out invalid power node at (${ue.x}, ${ue.y})`),we});Ne(ne);for(const ue of ne)ue.pointId&&typeof ue.pointId=="number"&&Wh(ue.pointId)}else Ne([]);Ji.current=!1,Ua(!1),Ro(!1),setTimeout(()=>{mu.current=!1},100)}catch(N){console.error("Failed to open project",N),alert("Failed to open project file. See console for details."),mu.current=!1}},[P,at,Si,s,f,Vh,Ii,mr,Za,Os,ia,Ba,Ja,Ha,Go,Va,uo,Gr,vs,Ei,Oo,ei,vr,la,qs,xl,Fa,Ct,Ai,Vn,it,us,W,Ne,cc,$i,Dy,ix,Mp,Qi,Mt,pi]),Yc=U.useCallback(async()=>{},[ol]),Gc=U.useCallback(async c=>{const y=Nl.current;if(!y){console.warn("Cannot load file: no directory handle");return}try{const Y=await(await y.getFileHandle(c)).getFile();if(Y.size===0){console.warn(`File ${c} is empty, skipping`);const ue=ka.current.filter(we=>we!==c);Hs(ue),ka.current=ue;return}const ie=await Y.text();if(!ie||ie.trim().length===0){console.warn(`File ${c} contains no data, skipping`);const ue=ka.current.filter(we=>we!==c);Hs(ue),ka.current=ue;return}let Se;try{Se=JSON.parse(ie)}catch(ne){console.error(`Failed to parse JSON from file ${c}:`,ne);const we=ka.current.filter(Te=>Te!==c);Hs(we),ka.current=we,await Yc();return}Nc(),ui(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Cn(new Set),Tn(new Set),Kt(new Set),on(new Set),as(),await lc(Se),ir(c);const he=ka.current.indexOf(c);he>=0?(ms(he),Hc.current=he):await Yc(),Ji.current=!1,Ua(!1)}catch(N){console.error("Failed to load file from history:",N);const Y=ka.current;if(Y.includes(c)){const ie=Y.filter(Se=>Se!==c);Hs(ie),ka.current=ie,await Yc()}}},[lc,Yc,as]),Gu=U.useCallback(async c=>{if(!Si){console.warn("Cannot restore file: no project directory handle"),alert("No project directory available. Please open or create a project first.");return}try{let y;try{y=await Si.getDirectoryHandle("history")}catch(I){console.error("History directory not found:",I),alert("History directory not found.");return}const Y=await(await y.getFileHandle(c)).getFile();if(Y.size===0){alert(`File ${c} is empty.`);return}const ie=await Y.text();if(!ie||ie.trim().length===0){alert(`File ${c} contains no data.`);return}let Se;try{Se=JSON.parse(ie)}catch(I){console.error(`Failed to parse JSON from file ${c}:`,I),alert(`Failed to parse file ${c}. It may be corrupted.`);return}Nc(),ui(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Cn(new Set),Tn(new Set),Kt(new Set),on(new Set),as(),await lc(Se),ir(c),Ji.current=!1,console.log(`Successfully restored file: ${c}`)}catch(y){console.error("Failed to restore file from history:",y),alert(`Failed to restore file ${c}. Please try again.`)}},[Si,lc,Cn,Tn,Kt,on,ir,ui,Nc,as]);Nt.useEffect(()=>{G&&!ee&&le({x:window.innerWidth/2-300,y:window.innerHeight/2-250})},[G,ee]);const qr=U.useCallback(c=>{if(!ee)return;ve(!0);const y=c.clientX-ee.x,N=c.clientY-ee.y,Y=Se=>{le({x:Se.clientX-y,y:Se.clientY-N})},ie=()=>{ve(!1),document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",ie)};document.addEventListener("mousemove",Y),document.addEventListener("mouseup",ie)},[ee]);U.useCallback(async()=>{const c=Hc.current,y=ka.current;if(c>=0&&c<y.length-1){const N=c+1,Y=y[N];Y&&await Gc(Y)}},[Gc]),U.useCallback(async()=>{const c=Hc.current,y=ka.current;if(c<=0||c>=y.length||y.length===0){console.warn("Cannot navigate to newer file: index is",c,"history length is",y.length);return}if(c>0&&c<y.length&&y.length>0){const N=c-1;if(N>=0&&N<y.length){const Y=y[N];Y?await Gc(Y):(console.warn("No newer file found at index",N),await Yc())}else console.warn("Cannot navigate to newer file: prevIndex",N,"is out of bounds")}},[Gc,Yc]),Nt.useEffect(()=>{Sn.current=Dn},[Dn]);const hd=Nt.useRef(at),gd=Nt.useRef(Ft);Nt.useEffect(()=>{const c=at!==hd.current;if(P==="draw"&&hd.current==="trace"&&c){if(Sn.current.length>=2){ln(ut,Rt,Wt,me,Ue);const y={id:`${Date.now()}-trace-autofinalize`,points:Sn.current,color:se,size:_,layer:gd.current,type:"trace"};Ct(N=>[...N,y]),gd.current==="top"?Da(N=>[...N,y.id]):vo(N=>[...N,y.id])}Nn([]),Gt(!1)}hd.current=at,gd.current=Ft},[at,Ft,P,se,_]);const yd=Nt.useRef(P);Nt.useEffect(()=>{if(yd.current==="draw"&&P!=="draw"&&at==="trace"&&Sn.current.length>=2){const c={id:`${Date.now()}-trace-autofinalize`,points:Sn.current,color:se,size:_,layer:Ft,type:"trace"};Ct(y=>[...y,c]),Ft==="top"?Da(y=>[...y,c.id]):vo(y=>[...y,c.id]),Nn([]),Gt(!1)}yd.current=P},[P,at,se,_,Ft]);const xu=Nt.useMemo(()=>qm,[]);Nt.useEffect(()=>{ac()},[ut]),Nt.useEffect(()=>{ac()},[Rt,Wt,Rn,kn]);const Yt=Mc>0,$c=U.useCallback(async()=>{const c=window;if(typeof c.showOpenFilePicker=="function")try{const[y]=await c.showOpenFilePicker({multiple:!1}),N=await y.getFile();if(!N.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}Wc.current=!0,qu(),await new Promise(ne=>setTimeout(ne,0)),ir(N.name);const Y=await N.text(),ie=JSON.parse(Y);Wc.current=!0;let Se=null;try{if(typeof y.getParent=="function")Se=await y.getParent();else{console.warn("getParent() not available. Prompting user for directory access...");const ne=window;if(typeof ne.showDirectoryPicker=="function")Se=await ne.showDirectoryPicker({startIn:y});else throw new Error("Directory picker not available in this browser")}if(Se)try{if((await(await Se.getFileHandle(N.name)).getFile()).name!==N.name)throw new Error("Directory verification failed: file name mismatch")}catch(ne){throw console.error("Directory verification failed:",ne),console.error("The selected directory might not contain the opened file"),new Error("Directory verification failed - selected directory does not contain the opened file")}Rr(Se),Vc.current=Se}catch(ne){console.error("Failed to get directory handle from file handle:",ne)}finally{setTimeout(()=>{Wc.current=!1},1e3)}const I=ie.autoSave?.enabled===!0;await lc(ie,Se);let he;if(ie.projectInfo?.name?he=ie.projectInfo.name:(he=N.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",va(he)),Mr||va(he),I&&Se){const ne=he.replace(/\.json$/i,""),we=Ku(ne).replace(/[^a-zA-Z0-9_-]/g,"_");xl(Se),Fa(we),Nl.current=Se,_l.current=we,Di.current&&(clearInterval(Di.current),Di.current=null)}setTimeout(()=>{Jr({visible:!0,source:"open",interval:5})},100)}catch(y){if(y?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",y),wa.current?.click()}else wa.current?.click()},[lc,Mr,ir,va,Rr,Jr,to,xl,Fa,qu]),Cf=U.useCallback(async()=>{ma({visible:!1}),await gu(),await $c()},[gu,$c]),$u=U.useCallback(async()=>{ma({visible:!1}),await $c()},[$c]),Gl=U.useCallback(()=>{ma({visible:!1})},[]);Nt.useEffect(()=>{if(ps.visible){setTimeout(()=>{hr.current?.focus()},0);const c=y=>{y.key==="Enter"?(y.preventDefault(),Cf()):y.key==="Escape"&&(y.preventDefault(),ma({visible:!1}))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}}},[ps.visible,Cf]);const Qd=U.useCallback(async()=>{Vu()?ma({visible:!0}):await $c()},[Vu,$c]);return a.jsxs("div",{className:"app",children:[a.jsx("header",{className:"app-header",children:a.jsx("h1",{children:" PCB Tracer (v2.8)"})}),a.jsx(pv,{openMenu:gc,setOpenMenu:Oa,isReadOnlyMode:Yt,currentProjectFilePath:ol,isProjectActive:!!Si,autoSaveEnabled:to,autoSaveInterval:nl,hasUnsavedChangesState:mc,onNewProject:_c,onOpenProject:Qd,onSaveProject:gu,onPrint:Jp,onExportBOM:Xd,bomExportFormat:ae,setBomExportFormat:ce,hasUnsavedChanges:Vu,setNewProjectDialog:Qr,setAutoSaveDialog:ds,topImage:o,bottomImage:u,setCurrentTool:H,resetImageTransform:id,areImagesLocked:ji,setAreImagesLocked:Ii,onEnterBoardDimensions:()=>er(!0),fileInputTopRef:Bc,fileInputBottomRef:Wo,openProjectRef:wa,increaseSize:xf,decreaseSize:Fc,brushSize:_,drawingStrokes:ut,selectedIds:Qn,selectedComponentIds:rn,selectedPowerIds:ni,selectedGroundIds:ii,componentsTop:Rt,componentsBottom:Wt,powers:_n,grounds:Rn,powerNodeNames:Sc,groundNodeNames:lu,setSetSizeDialog:fs,areViasLocked:Ni,setAreViasLocked:mr,arePadsLocked:Ki,setArePadsLocked:Za,areTestPointsLocked:wo,setAreTestPointsLocked:Bs,areTracesLocked:lo,setAreTracesLocked:Os,areComponentsLocked:Er,setAreComponentsLocked:ia,areGroundNodesLocked:co,setAreGroundNodesLocked:Ba,arePowerNodesLocked:ri,setArePowerNodesLocked:Ja,showTraceCornerDots:Yi,setShowTraceCornerDots:Xr,setSelectedIds:Cn,setSelectedComponentIds:Tn,setSelectedPowerIds:Kt,setSelectedGroundIds:on,selectAllVias:Tl,selectAllTraces:$f,selectAllPads:Ru,selectAllComponents:Mu,selectDisconnectedComponents:au,selectAllComponentConnections:Uo,selectAllPowerNodes:cu,selectAllGroundNodes:jl,selectPowerNodesByName:Bu,selectGroundNodesByName:Ou,setShowPowerBusManager:g,setShowGroundBusManager:ct,setShowPastMachine:Q,toolRegistry:On,updateToolSettings:Pa,updateToolLayerSettings:Pr,setBrushSize:E,setBrushColor:X,saveToolSettings:Ty,saveToolLayerSettings:Bf,colorPalette:xu,currentTool:P,drawingMode:at,traceToolLayer:Yn,padToolLayer:Ti,testPointToolLayer:Ln,componentToolLayer:Hn,setTopTraceSize:re,setBottomTraceSize:K,setTopPadSize:A,setBottomPadSize:B,setTopTestPointSize:nt,setBottomTestPointSize:wt,setTopComponentSize:Zt,setBottomComponentSize:Qt,setComponentConnectionSize:Wn,topTraceColor:V,bottomTraceColor:k,topPadColor:te,bottomPadColor:je,topTestPointColor:de,bottomTestPointColor:Ee,topComponentColor:St,bottomComponentColor:pe,setTopTraceColor:$,setBottomTraceColor:S,setTopPadColor:ge,setBottomPadColor:be,setTopTestPointColor:Ae,setBottomTestPointColor:Ge,setTopComponentColor:Bt,setBottomComponentColor:_t,setComponentConnectionColor:vn,saveDefaultSize:kt,saveDefaultColor:Pt,menuBarRef:kr,onOpenProjectNotes:wf,onOpenTransformImages:()=>So(!0),onOpenTransformAll:()=>gs(!0)}),a.jsx("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:a.jsxs("div",{ref:ec,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[a.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[a.jsxs("button",{onClick:()=>{Yt||qc()},onMouseDown:c=>c.currentTarget.blur(),disabled:Yt,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="select"?"2px solid #000":"1px solid #ddd",background:P==="select"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",outline:"none",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsx(Om,{size:14}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("button",{onClick:()=>{Yt||(console.log("Via tool clicked"),qe(),$t("via"),H("draw"),Ha(!0))},disabled:Yt,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="draw"&&at==="via"?"2px solid #000":"1px solid #ddd",background:P==="draw"&&at==="via"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const c=Kn.get("via").color;return a.jsxs(a.Fragment,{children:[a.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:c,strokeWidth:"3"}),a.jsx("circle",{cx:"12",cy:"12",r:"4",fill:c})]})})()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Kn.get("via").size})]})]}),a.jsxs("button",{ref:hf,onClick:()=>{Yt||(console.log("Pad tool clicked"),qe(),$t("pad"),H("draw"),setTimeout(()=>vf(),0))},disabled:Yt,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="draw"&&at==="pad"?"2px solid #000":"1px solid #ddd",background:P==="draw"&&at==="pad"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const y=Ti==="top"?"padTop":"padBottom",N=Kn.get(y).color,Y=14,ie=(24-Y)/2,Se=(24-Y)/2;return a.jsx("rect",{x:ie,y:Se,width:Y,height:Y,fill:N})})()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(P==="draw"&&at==="pad"&&Xi.toolInstanceId&&(Xi.toolInstanceId==="padTop"||Xi.toolInstanceId==="padBottom"))return Xi.size;const c=Ti==="top"?"padTop":"padBottom";return Kn.get(c).size})()})]})]}),a.jsxs("button",{ref:Iu,onClick:()=>{Yt||(console.log("Test Point tool clicked"),qe(),$t("testPoint"),H("draw"),setTimeout(()=>pu(),0))},disabled:Yt,title:"Draw Test Points (Y)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="draw"&&at==="testPoint"?"2px solid #000":"1px solid #ddd",background:P==="draw"&&at==="testPoint"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const y=Ln==="top"?"testPointTop":"testPointBottom",N=Kn.get(y).color,Y=14,ie=12,Se=12;return a.jsx("path",{d:`M ${ie} ${Se-Y/2} L ${ie+Y/2} ${Se} L ${ie} ${Se+Y/2} L ${ie-Y/2} ${Se} Z`,fill:N,stroke:"#000",strokeWidth:"1.5"})})()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Y"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(P==="draw"&&at==="testPoint"&&Xi.toolInstanceId&&(Xi.toolInstanceId==="testPointTop"||Xi.toolInstanceId==="testPointBottom"))return Xi.size;const c=Ln==="top"?"testPointTop":"testPointBottom";return Kn.get(c).size})()})]})]}),a.jsxs("button",{ref:uu,onClick:()=>{Yt||(console.log("Trace tool clicked"),qe(),$t("trace"),H("draw"),setTimeout(()=>bf(),0))},disabled:Yt,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="draw"&&at==="trace"?"2px solid #000":"1px solid #ddd",background:P==="draw"&&at==="trace"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsx(Um,{size:14,color:(()=>{const y=Yn==="top"?"traceTop":"traceBottom";return Kn.get(y).color})()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const c=Yn==="top"?"traceTop":"traceBottom";return Kn.get(c).size})()})]})]}),a.jsxs("button",{ref:qd,onClick:()=>{Yt||(console.log("Component tool clicked"),qe(),H("component"))},disabled:Yt,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="component"?"2px solid #000":"1px solid #ddd",background:P==="component"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[(()=>{const y=(Hn||"top")==="top"?"componentTop":"componentBottom",N=Kn.get(y).color;return fa?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:N,strokeWidth:"1.5"}),a.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:N,fontWeight:"bold",fontFamily:"monospace",children:(()=>{const Y=Zr?.componentDefinition?.designators?.[0];return Y?Y.length<=3?Y:Y.substring(0,3):Zr?.designator?Zr.designator.length<=3?Zr.designator:Zr.designator.substring(0,3):y0(fa)})()})]}):a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:N,stroke:N,strokeWidth:"0.5"}),a.jsxs("g",{stroke:N,fill:"none",strokeWidth:"1.5",children:[a.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),a.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:N})]})]})})(),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const c=Hn==="top"?"componentTop":"componentBottom";return Kn.get(c).size})()})]})]}),a.jsxs("button",{ref:gf,onClick:()=>{Yt||(console.log("Power tool clicked"),qe(),zt(!1),an.length===1?(Oe(an[0].id),H("power"),Ve(!1),Oo(!0)):an.length>1?Ve(!0):(Ve(!0),H("power"),Oo(!0)))},disabled:Yt,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="power"?"2px solid #000":"1px solid #ddd",background:P==="power"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsx("span",{style:{color:(xe?an.find(c=>c.id===xe)?.color:null)||"#ff0000",fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Kn.get("power").size})]})]}),a.jsxs("button",{ref:yf,onClick:()=>{Yt||(console.log("Ground tool clicked"),Ve(!1),w.length===1?(It(w[0].id),H("ground"),zt(!1),ei(!0)):w.length>1?zt(!0):(zt(!0),H("ground"),ei(!0)))},disabled:Yt,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="ground"?"2px solid #000":"1px solid #ddd",background:P==="ground"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:a.jsxs("g",{stroke:(hn?w.find(c=>c.id===hn)?.color:null)||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[a.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),a.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),a.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),a.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Kn.get("ground").size})]})]}),a.jsx("div",{style:{height:72}}),a.jsxs("button",{onClick:()=>{Yt||(qe(),H(c=>c==="pan"?"draw":"pan"))},disabled:Yt,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:P==="pan"?"2px solid #000":"1px solid #ddd",background:P==="pan"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:a.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),a.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),a.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("button",{onClick:()=>{qe(),wl(!1),H(c=>c==="magnify"?"draw":"magnify")},title:"Magnify (M)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="magnify"?"2px solid #000":"1px solid #ddd",background:P==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),a.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),Sa?a.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):a.jsxs(a.Fragment,{children:[a.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),a.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"M"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("button",{onClick:()=>{Yt||gs(!0)},disabled:Yt,title:"Change Perspective (E) - Open Change Perspective Dialog",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:Us?"2px solid #000":"1px solid #ddd",background:Us?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("ellipse",{cx:"12",cy:"12",rx:"9",ry:"6",fill:"none",stroke:"#111",strokeWidth:"2"}),a.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"none",stroke:"#111",strokeWidth:"2"}),a.jsx("circle",{cx:"11",cy:"11",r:"1.5",fill:"#111",stroke:"none"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("button",{onClick:()=>{Yt||(qe(),H("center"),no(!0),pr.current&&clearTimeout(pr.current),pr.current=setTimeout(()=>{no(!1),H("select"),ha(void 0)},2e3))},disabled:Yt,title:"Set View (X) - Press 0-9 to Set View",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:P==="center"?"2px solid #000":"1px solid #ddd",background:P==="center"?"#e6f0ff":"#fff",color:Yt?"#999":"#222",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[a.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),a.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"22",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),a.jsx("line",{x1:"2",y1:"12",x2:"10",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),a.jsx("line",{x1:"14",y1:"12",x2:"22",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[a.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"X"}),a.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:()=>{Yt||xa(c=>!c)},disabled:Yt,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:Yt?"not-allowed":"pointer",opacity:Yt?.5:1},children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[a.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),a.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),yc&&a.jsx("div",{ref:ru,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:xu.map(c=>a.jsx("div",{onClick:()=>{X(c),xa(!1);try{let N=null;P==="draw"&&at==="via"?N="via":P==="draw"&&at==="pad"?N=(Ti||"top")==="bottom"?"padBottom":"padTop":P==="draw"&&at==="testPoint"?N=(Ln||"top")==="bottom"?"testPointBottom":"testPointTop":P==="draw"&&at==="trace"?N=(Yn||"top")==="bottom"?"traceBottom":"traceTop":P==="component"?N=(Hn||"top")==="bottom"?"componentBottom":"componentTop":P==="power"?N="power":P==="ground"&&(N="ground"),N&&Kn.setColor(N,c)}catch(N){console.error("Error updating tool instance color:",N)}const y=Ds(On);if(y)if(P==="draw"&&at==="trace"){const N=Yn||"top",ie=y.layerSettings.get(N)?.size||y.settings.size,Se={color:c,size:ie};Pr(y.id,N,Se),Bf(y.id),N==="top"?($(c),Pt("trace",c,"top")):(S(c),Pt("trace",c,"bottom"))}else if(P==="draw"&&at==="pad"){const N=Ti||"top",ie=y.layerSettings.get(N)?.size||y.settings.size,Se={color:c,size:ie};Pr(y.id,N,Se),Bf(y.id),N==="top"?(ge(c),Pt("pad",c,"top")):(be(c),Pt("pad",c,"bottom"))}else if(P==="draw"&&at==="testPoint"){const N=Ln||"top",ie=y.layerSettings.get(N)?.size||y.settings.size,Se={color:c,size:ie};Pr(y.id,N,Se),Bf(y.id),N==="top"?(Ae(c),Pt("testPoint",c,"top")):(Ge(c),Pt("testPoint",c,"bottom"))}else if(P==="component"){const N=Hn||"top",ie=y.layerSettings.get(N)?.size||y.settings.size,Se={color:c,size:ie};Pr(y.id,N,Se),Bf(y.id),N==="top"?(Bt(c),Pt("component",c,"top")):(_t(c),Pt("component",c,"bottom"))}else{const N={...y.settings,color:c};Pa(y.id,N),Ty(y.id,c,y.settings.size),P==="draw"&&at==="via"&&Pt("via",c)}Pt("brush",c),Qn.size>0&&Ct(N=>N.map(Y=>Qn.has(Y.id)?(Y.type==="via"?(Pt("via",c),Bn(ie=>{const Se=new Map(ie),I=Se.get("via");return I&&Se.set("via",{...I,settings:{...I.settings,color:c}}),Se})):Y.type==="pad"?(Pt("pad",c),Bn(ie=>{const Se=new Map(ie),I=Se.get("pad");return I&&Se.set("pad",{...I,settings:{...I.settings,color:c}}),Se})):Y.type==="trace"&&Pt("trace",c,Y.layer),{...Y,color:c}):Y)),rn.size>0&&(Pt("component",c),Ai(N=>N.map(Y=>rn.has(Y.id)?{...Y,color:c}:Y)),Vn(N=>N.map(Y=>rn.has(Y.id)?{...Y,color:c}:Y))),ni.size>0&&Ne(N=>N.map(Y=>ni.has(Y.id)?{...Y,color:c}:Y)),ii.size>0&&it(N=>N.map(Y=>ii.has(Y.id)?{...Y,color:c}:Y))},title:c,style:{width:22,height:22,backgroundColor:c,border:c===se?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},c))})})]})]}),P==="draw"&&at==="trace"&&nc&&a.jsxs("div",{ref:ic,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[a.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[a.jsx("input",{type:"radio",name:"traceToolLayer",checked:Yn==="top",onChange:()=>{console.log("Trace tool Top clicked"),pa.current="top",Po("top"),qt("top"),X(V),E(J),Bn(c=>{const y=new Map(c),N=y.get("trace");return N&&y.set("trace",{...N,settings:{color:V,size:J}}),y}),rs(!1),Fi(!0),uo(!0)}}),a.jsx("span",{children:"Top"})]}),a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"traceToolLayer",checked:Yn==="bottom",onChange:()=>{console.log("Trace tool Bottom clicked"),pa.current="bottom",Po("bottom"),qt("bottom"),X(k),E(ye),Bn(c=>{const y=new Map(c),N=y.get("trace");return N&&y.set("trace",{...N,settings:{color:k,size:ye}}),y}),rs(!1),Yo(!0),Gr(!0)}}),a.jsx("span",{children:"Bottom"})]})]}),P==="draw"&&at==="pad"&&Ic&&a.jsxs("div",{ref:Gs,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[a.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[a.jsx("input",{type:"radio",name:"padToolLayer",checked:Ti==="top",onChange:()=>{console.log("Pad tool Top clicked"),Ls.current="top",ea("top"),qt("top");const c=Kn.get("padTop");X(c.color),E(c.size),Bn(y=>{const N=new Map(y),Y=N.get("pad");return Y&&N.set("pad",{...Y,settings:{color:c.color,size:c.size}}),N}),Cc(!1),Fi(!0),Go(!0)}}),a.jsx("span",{children:"Top"})]}),a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"padToolLayer",checked:Ti==="bottom",onChange:()=>{console.log("Pad tool Bottom clicked"),Ls.current="bottom",ea("bottom"),qt("bottom");const c=Kn.get("padBottom");X(c.color),E(c.size),Bn(y=>{const N=new Map(y),Y=N.get("pad");return Y&&N.set("pad",{...Y,settings:{color:c.color,size:c.size}}),N}),Cc(!1),Yo(!0),Va(!0)}}),a.jsx("span",{children:"Bottom"})]})]}),P==="draw"&&at==="testPoint"&&Uc&&a.jsxs("div",{ref:Hl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[a.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[a.jsx("input",{type:"radio",name:"testPointToolLayer",checked:Ln==="top",onChange:()=>{console.log("Test Point tool Top clicked"),zs.current="top",_s("top"),qt("top"),X(de),E(Pe),Bn(c=>{const y=new Map(c),N=y.get("testPoint");return N&&y.set("testPoint",{...N,settings:{color:de,size:Pe}}),y}),Tc(!1),Fi(!0),xr(!0)}}),a.jsx("span",{children:"Top"})]}),a.jsxs("label",{className:"radio-label",children:[a.jsx("input",{type:"radio",name:"testPointToolLayer",checked:Ln==="bottom",onChange:()=>{console.log("Test Point tool Bottom clicked"),zs.current="bottom",_s("bottom"),qt("bottom"),X(Ee),E(Ke),Bn(c=>{const y=new Map(c),N=y.get("testPoint");return N&&y.set("testPoint",{...N,settings:{color:Ee,size:Ke}}),y}),Tc(!1),Yo(!0),sl(!0)}}),a.jsx("span",{children:"Bottom"})]})]}),Re&&a.jsxs("div",{ref:Vl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[a.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),an.length===0?a.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...an].sort((c,y)=>{const N=Se=>{const I=Se.match(/([+-]?)(\d+\.?\d*)/);if(I){const he=I[1]||"+",ne=parseFloat(I[2]);return{absValue:Math.abs(ne),isNegative:he==="-",original:Se}}return{absValue:1/0,isNegative:!1,original:Se}},Y=N(c.voltage),ie=N(y.voltage);return Y.absValue!==ie.absValue?Y.absValue-ie.absValue:Y.isNegative!==ie.isNegative?Y.isNegative?-1:1:0}).map(c=>a.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),Oe(c.id),P!=="power"&&(qe(),H("power"),Oo(!0)),Ve(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:c.color,border:"1px solid #ccc"}}),a.jsxs("div",{children:[a.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:c.name}),a.jsx("div",{style:{fontSize:"11px",color:"#666"},children:c.voltage})]})]})},c.id)),a.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),a.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),Ve(!1),g(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),a.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),Ve(!1),Oe(null),H("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),Xt&&a.jsxs("div",{ref:os,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[a.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),w.length===0?a.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...w].sort((c,y)=>c.name.localeCompare(y.name)).map(c=>{const y=c.id==="groundbus-earth",N=hn===c.id;return a.jsx("button",{onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),It(c.id),P!=="ground"&&(qe(),H("ground"),ei(!0)),zt(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:N?"#e0e0e0":"#f5f5f5",border:N?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[a.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:y?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[a.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[a.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),a.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),a.jsx("div",{children:a.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:c.name})})]})},c.id)}),a.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),a.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),zt(!1),ct(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),a.jsx("button",{onClick:c=>{c.preventDefault(),c.stopPropagation(),zt(!1),It(null),H("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),a.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[a.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),a.jsxs("div",{onClick:()=>qt("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Ht==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[a.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),a.jsx("label",{className:"radio-label",style:{margin:0},children:a.jsx("input",{type:"checkbox",checked:ca,onChange:c=>Fi(c.target.checked)})})]}),a.jsx("canvas",{ref:bs,width:60,height:40,style:{width:"60px",height:"40px"}})]}),a.jsxs("div",{onClick:()=>qt("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Ht==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[a.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),a.jsx("label",{className:"radio-label",style:{margin:0},children:a.jsx("input",{type:"checkbox",checked:qa,onChange:c=>Yo(c.target.checked)})})]}),a.jsx("canvas",{ref:Cl,width:60,height:40,style:{width:"60px",height:"40px"}})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Br,onChange:c=>Ha(c.target.checked)}),a.jsx("span",{children:"Vias"})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Or,onChange:c=>uo(c.target.checked)}),a.jsx("span",{children:"Traces (Top)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Wa,onChange:c=>vs(c.target.checked)}),a.jsx("span",{children:"Components (Top)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:fo,onChange:c=>Go(c.target.checked)}),a.jsx("span",{children:"Pads (Top)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:jo,onChange:c=>xr(c.target.checked)}),a.jsx("span",{children:"Test Points (Top)"})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Ir,onChange:c=>Gr(c.target.checked)}),a.jsx("span",{children:"Traces (Bottom)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Ya,onChange:c=>Ei(c.target.checked)}),a.jsx("span",{children:"Components (Bottom)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:$r,onChange:c=>Va(c.target.checked)}),a.jsx("span",{children:"Pads (Bottom)"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Ta,onChange:c=>sl(c.target.checked)}),a.jsx("span",{children:"Test Points (Bottom)"})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:$o,onChange:c=>Oo(c.target.checked)}),a.jsx("span",{children:"Power"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:kn,onChange:c=>ei(c.target.checked)}),a.jsx("span",{children:"Ground"})]}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:rr,onChange:c=>vr(c.target.checked)}),a.jsx("span",{children:"Connections"})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("input",{type:"checkbox",checked:Br&&fo&&$r&&jo&&Ta&&Or&&Ir&&Wa&&Ya&&$o&&kn&&rr,onChange:c=>{const y=c.target.checked;Ha(y),Go(y),Va(y),xr(y),sl(y),uo(y),Gr(y),vs(y),Ei(y),Oo(y),ei(y),vr(y)}}),a.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),a.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),a.jsxs("div",{style:{marginTop:6},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",b,"%"]}),a.jsxs("label",{className:"radio-label",style:{margin:0},children:[a.jsx("input",{type:"checkbox",checked:T,onChange:c=>{const y=c.target.checked;y?(Fi(!0),Yo(!0)):(x(50),H("select")),D(y)}}),a.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:b,onChange:c=>x(Number(c.target.value)),onDoubleClick:()=>$d("transparency"),className:"slider",style:{width:"100%",marginTop:3}}),T&&a.jsxs("div",{style:{marginTop:6},children:[a.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Cycle Speed: ",(R/1e3).toFixed(1),"s"]}),a.jsx("input",{type:"range",min:"500",max:"8000",step:"100",value:8500-R,onChange:c=>C(8500-Number(c.target.value)),onDoubleClick:()=>C(2e3),className:"slider",style:{width:"100%",marginTop:3}})]})]})]}),a.jsx(hv,{visible:!o&&!u}),a.jsx("canvas",{ref:nr,width:Ys.width,height:Ys.height,tabIndex:0,onMouseDown:Vd,onMouseMove:Zp,onMouseUp:td,onMouseLeave:td,onWheel:ed,onDoubleClick:Wd,className:`pcb-canvas ${P==="transform"?"transform-cursor":P==="draw"?"draw-cursor":P==="erase"?"erase-cursor":"default-cursor"}`,style:{position:"absolute",left:"244px",top:"6px",...Ml?{cursor:Ml}:P==="pan"?{cursor:Vs?"grabbing":"grab"}:{},width:`${Ys.width}px`,height:`${Ys.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),ba&&a.jsxs("div",{style:{position:"absolute",left:`${244+Ys.width-120}px`,top:`${6+Ys.height+4}px`,fontSize:"11px",fontFamily:"monospace",color:"#333",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"2px 6px",borderRadius:"3px",border:"1px solid #ccc",pointerEvents:"none",zIndex:1e3},children:["(",ba.x.toFixed(1),"mm, ",ba.y.toFixed(1),"mm)"]}),a.jsx(Tv,{componentEditor:Do,setComponentEditor:Ra,componentsTop:Rt,componentsBottom:Wt,setComponentsTop:Ai,setComponentsBottom:Vn,connectingPin:Yr,setConnectingPin:Rs,componentDialogPosition:ya,setComponentDialogPosition:Ma,isDraggingDialog:Ms,setIsDraggingDialog:Bl,dialogDragOffset:yl,setDialogDragOffset:Js,areComponentsLocked:Er,setSelectedComponentIds:Tn,setNotesDialogVisible:Gi,componentDefinition:Do?(()=>{const c=Rt.find(y=>y.id===Do.id)||Wt.find(y=>y.id===Do.id);return c?Yf(c):void 0})():void 0}),Mo&&Ws&&(()=>{const c=Mo.component,y=Mo.layer;if(!c)return null;const N=c.componentType||"Component",Y=c.componentType==="IntegratedCircuit"&&"icType"in c?c.icType:null,ie=ff(c),Se=8,I=8,he=200,ne=150,ue=10;let we=Mo.x+Se,Te=Mo.y+I;return we+he+ue>window.innerWidth&&(we=Mo.x-he-Se),Te+ne+ue>window.innerHeight&&(Te=Mo.y-ne-I),we=Math.max(ue,Math.min(we,window.innerWidth-he-ue)),Te=Math.max(ue,Math.min(Te,window.innerHeight-ne-ue)),a.jsxs("div",{style:{position:"fixed",left:`${we}px`,top:`${Te}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[a.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:dl(N)}),a.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["Layer: ",y==="top"?"Top":"Bottom"]}),Y&&a.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["IC Type: ",Y]}),ie.length>0&&a.jsx("div",{style:{marginBottom:"4px"},children:ie.map((ke,De)=>a.jsx("div",{style:{color:"#e0e0e0",fontSize:"11px",marginBottom:"2px"},children:ke},De))}),c.description&&a.jsx("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:c.description}),c.notes&&a.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c.notes})]})})(),Oc&&Ws&&(()=>{const c=Oc.stroke;return c.notes?a.jsxs("div",{style:{position:"fixed",left:`${Oc.x+10}px`,top:`${Oc.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[a.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"Test Point"}),a.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:c.notes})]}):null})(),pt&&pt.visible&&(()=>{if(!_n.find(N=>N.id===pt.id))return null;const y=an.find(N=>N.id===pt.powerBusId);return a.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[a.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),a.jsx("button",{onClick:()=>Ut(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),a.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:y?`${y.name} (${y.voltage})`:"Unknown"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:`power-layer-${pt.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),a.jsxs("select",{id:`power-layer-${pt.id}`,name:`power-layer-${pt.id}`,value:pt.layer,onChange:N=>Ut({...pt,layer:N.target.value}),disabled:ri,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:ri?.6:1},children:[a.jsx("option",{value:"top",children:"Top"}),a.jsx("option",{value:"bottom",children:"Bottom"})]})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),a.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:pt.x.toFixed(2)})]}),a.jsxs("div",{children:[a.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),a.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:pt.y.toFixed(2)})]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[a.jsx("button",{onClick:()=>Ut(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),a.jsx("button",{onClick:()=>{ri||(Ne(N=>N.map(Y=>Y.id===pt.id?{...Y,layer:pt.layer}:Y)),Ut(null))},disabled:ri,style:{padding:"2px 5px",background:ri?"#f5f5f5":"#0b5fff",color:ri?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:ri?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!o&&!u&&a.jsx("div",{className:"placeholder"})]})}),a.jsx(kv,{visible:d,onClose:()=>g(!1),powerBuses:an,setPowerBuses:us,editingPowerBusId:j,setEditingPowerBusId:L,powers:_n}),a.jsx(Av,{visible:st,onClose:()=>ct(!1),groundBuses:w,setGroundBuses:W,editingGroundBusId:Tt,setEditingGroundBusId:mt,grounds:Rn}),a.jsx(Pv,{visible:G,projectDirHandle:Si,onClose:()=>{Q(!1),le(void 0)},onRestore:Gu,position:ee,isDragging:fe,onDragStart:qr}),a.jsx(Nv,{visible:Dt,onClose:()=>br(!1),autoAssignDesignators:Gn,setAutoAssignDesignators:Qi,useGlobalDesignatorCounters:Fn,setUseGlobalDesignatorCounters:Mt}),a.jsx("input",{ref:Bc,type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",style:{display:"none"},onChange:c=>{const y=c.target.files?.[0];y&&Qf(y,"top"),c.target.value=""}}),a.jsx("input",{ref:Wo,type:"file",accept:".png,.jpg,.jpeg,image/png,image/jpeg",style:{display:"none"},onChange:c=>{const y=c.target.files?.[0];y&&Qf(y,"bottom"),c.target.value=""}}),a.jsx("input",{ref:wa,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async c=>{const y=c.target.files?.[0];if(y)try{ir(y.name);const N=await y.text(),Y=JSON.parse(N);await lc(Y);let ie;Y.projectInfo?.name?ie=Y.projectInfo.name:(ie=y.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",va(ie)),Mr||va(ie),setTimeout(()=>{Jr({visible:!0,source:"open",interval:5})},100)}catch(N){console.error("Failed to open project",N),alert("Failed to open project file. See console for details.")}c.target.value=""}}),a.jsx(yv,{visible:Ia.visible,selectedIds:Qn,selectedComponentIds:rn,selectedPowerIds:ni,selectedGroundIds:ii,drawingStrokes:ut,componentsTop:Rt,componentsBottom:Wt,powers:_n,grounds:Rn,powerBuses:an,onClose:()=>{Is({visible:!1,text:""})},setComponentsTop:Ai,setComponentsBottom:Vn,determineViaType:ws,determinePadType:Ss,determineTestPointType:Cs,onFindComponent:wc,onFindStroke:tc,onFindPower:cl,onFindGround:su,onOpenNotesDialog:()=>Gi(!0),position:cr,isDragging:oi,onDragStart:c=>{cr&&(Ri({x:c.clientX-cr.x,y:c.clientY-cr.y}),Li(!0),c.preventDefault())}}),a.jsx(mv,{visible:io,selectedIds:Qn,selectedComponentIds:rn,selectedPowerIds:ni,selectedGroundIds:ii,drawingStrokes:ut,componentsTop:Rt,componentsBottom:Wt,powers:_n,grounds:Rn,powerBuses:an,onClose:()=>{Gi(!1)},setComponentsTop:Ai,setComponentsBottom:Vn,setDrawingStrokes:Ct,setPowerSymbols:Ne,setGroundSymbols:it,determineViaType:ws,determinePadType:Ss,determineTestPointType:Cs,position:mi,isDragging:qi,onDragStart:c=>{mi&&(or({x:c.clientX-mi.x,y:c.clientY-mi.y}),ro(!0),c.preventDefault())}}),a.jsx(xv,{visible:_r,projectNotes:xi,setProjectNotes:po,onClose:()=>{yn(!1)},position:un,isDragging:ua,onDragStart:c=>{un?(Kr({x:c.clientX-un.x,y:c.clientY-un.y}),Ga(!0),c.preventDefault()):(Ci({x:c.clientX-300,y:c.clientY-200}),Kr({x:300,y:200}),Ga(!0),c.preventDefault())}}),a.jsx(Ay,{visible:oa.visible,title:"New Project",message:"You have unsaved changes. Do you want to save your project before creating a new one?",onYes:pd,onNo:Jd,onCancel:sc,yesButtonRef:Bo}),a.jsx(Ay,{visible:ps.visible,title:"Open Project",message:"You have unsaved changes. Do you want to save your project before opening another one?",onYes:Cf,onNo:$u,onCancel:Gl,yesButtonRef:hr}),wi.visible&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:c=>{c.target===c.currentTarget&&Wu()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:c=>c.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),a.jsx("input",{ref:ki,type:"text",value:wi.projectName,onChange:c=>{hs(y=>({...y,projectName:c.target.value}))},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),dd()):c.key==="Escape"&&(c.preventDefault(),Wu())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),wi.projectName&&(()=>{const c=wi.projectName.match(/[^a-zA-Z0-9_-]/g);if(c){const y=[...new Set(c)];return a.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",y.map(N=>`"${N}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[a.jsx("input",{type:"text",value:wi.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:wi.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),a.jsx("button",{onClick:fd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),wi.projectName&&wi.locationPath&&a.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[a.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),a.jsx("div",{style:{color:"#4CAF50"},children:(()=>{if(!wi.projectName||!wi.locationPath)return"";const y=wi.projectName.trim().replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",N=`${y}.json`;return wi.locationPath===y?`${wi.locationPath}/${N}`:`${wi.locationPath}/${y}/${N}`})()})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:Wu,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:dd,disabled:!wi.projectName.trim()||!wi.locationHandle,style:{padding:"8px 16px",background:!wi.projectName.trim()||!wi.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!wi.projectName.trim()||!wi.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!wi.projectName.trim()||!wi.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!wi.projectName.trim()||!wi.locationHandle?.6:1},children:"Create"})]})]})}),Zi.visible&&a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:c=>{c.target===c.currentTarget&&Yu()},children:a.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:c=>c.stopPropagation(),children:[a.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),a.jsx("input",{ref:Ca,type:"text",value:Zi.filename,onChange:c=>{fr(y=>({...y,filename:c.target.value}))},onKeyDown:c=>{c.key==="Enter"?(c.preventDefault(),Yl()):c.key==="Escape"&&(c.preventDefault(),Yu())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),a.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),a.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[a.jsx("input",{type:"text",value:Zi.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Zi.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),a.jsx("button",{onClick:Zd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Zi.filename&&Zi.locationPath&&a.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[a.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),a.jsxs("div",{style:{color:"#4CAF50"},children:[Zi.locationPath,"/",Zi.filename.endsWith(".json")?Zi.filename:`${Zi.filename}.json`]})]}),a.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[a.jsx("button",{onClick:Yu,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),a.jsx("button",{onClick:Yl,disabled:!Zi.filename.trim()||!Zi.locationHandle,style:{padding:"8px 16px",background:!Zi.filename.trim()||!Zi.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Zi.filename.trim()||!Zi.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Zi.filename.trim()||!Zi.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Zi.filename.trim()||!Zi.locationHandle?.6:1},children:"Save"})]})]})}),a.jsx(gv,{visible:Qa.visible,title:Qa.title,message:Qa.message,onClose:()=>es({visible:!1,title:"",message:""})}),a.jsx(bv,{visible:ou,dimensions:ql,onSave:c=>{ll(c)},onClose:()=>er(!1)}),a.jsx(vv,{visible:el,onClose:()=>{let c=0,y=0;o?(c=o.x,y=o.y):u&&(c=u.x,y=u.y),Sl(N=>({...N,0:{pcbReferenceX:c,pcbReferenceY:y,x:0,y:0,zoom:bt,viewRotation:Jn,viewFlipX:Hi,isBottomView:aa,transparency:b,showTopImage:ca,showBottomImage:qa,showViasLayer:Br,showTopTracesLayer:Or,showBottomTracesLayer:Ir,showTopPadsLayer:fo,showBottomPadsLayer:$r,showTopTestPointsLayer:jo,showBottomTestPointsLayer:Ta,showTopComponents:Wa,showBottomComponents:Ya,showPowerLayer:$o,showGroundLayer:kn,showConnectionsLayer:rr}})),So(!1)},topImage:o,bottomImage:u,selectedImageForTransform:Ht,setSelectedImageForTransform:yo,transformMode:zo,setTransformMode:da,updateImageTransform:fu,resetImageTransform:id,setCurrentTool:H,isGrayscale:Z,setIsGrayscale:O,areImagesLocked:ji}),a.jsx(wv,{visible:Us,onClose:()=>gs(!1),topImage:o,bottomImage:u,setTopImage:s,setBottomImage:f,componentsTop:Rt,componentsBottom:Wt,setComponentsTop:Ai,setComponentsBottom:Vn,drawingStrokes:ut,setDrawingStrokes:Ct,powerSymbols:_n,groundSymbols:Rn,setPowerSymbols:Ne,setGroundSymbols:it,canvasRef:nr,isBottomView:aa,setIsBottomView:Ro,originalTopFlipX:sa,setOriginalTopFlipX:ts,originalBottomFlipX:Ui,setOriginalBottomFlipX:_i,originalTopFlipY:dr,setOriginalTopFlipY:eo,originalBottomFlipY:tl,setOriginalBottomFlipY:Fs,cameraWorldCenter:vi,setCameraWorldCenter:yi,viewScale:bt,viewRotation:Jn,setViewRotation:ur,viewFlipX:Hi,setViewFlipX:jr,contentBorder:5,setTransparency:x}),a.jsx(jv,{visible:kl,selectedLayer:Hn,selectedComponentType:fa,selectedComponentKey:rc,onLayerChange:c=>{ta(c),Ks.current=c,qt(c),X(c==="top"?St:pe),E(c==="top"?pn:dt),c==="top"?(Fi(!0),vs(!0)):(Yo(!0),Ei(!0))},onComponentTypeChange:(c,y,N)=>{jc(c),df(y),kc(N||null),pf.current=c},onClose:()=>{$s(!1),gl(!0)}}),a.jsx(_v,{visible:Eo.visible,size:Eo.size,onSizeChange:c=>fs(y=>({...y,size:c})),onApply:Gd,onCancel:()=>fs({visible:!1,size:6})}),a.jsx(Lv,{visible:Il.visible,interval:Il.interval,onIntervalChange:c=>ds({visible:!0,interval:c}),onApply:()=>od(Il.interval,!1),onCancel:()=>ds({visible:!1,interval:5})}),a.jsx(zv,{visible:ra.visible,interval:ra.interval,onIntervalChange:c=>Jr({...ra,interval:c}),onEnable:()=>od(ra.interval,!0),onSkip:rd}),a.jsx("div",{style:{position:"fixed",bottom:8,left:8,zIndex:100},children:a.jsxs("button",{onClick:()=>{window.open("https://github.com/sponsors/pgiacalo","_blank","noopener,noreferrer")},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)",border:"1px solid rgba(27, 31, 36, 0.15)",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:500,color:"#24292f",boxShadow:"0 1px 0 rgba(27, 31, 36, 0.04)",transition:"background 0.2s"},onMouseEnter:c=>{c.currentTarget.style.background="linear-gradient(180deg, #f3f4f6 0%, #e5e6e9 100%)"},onMouseLeave:c=>{c.currentTarget.style.background="linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)"},title:"Donate to support this project",children:[a.jsx("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"#bf3989","aria-hidden":"true",children:a.jsx("path",{d:"M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.749.749 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5z"})}),"Donate"]})})]})}zm.createRoot(document.getElementById("root")).render(a.jsx(U.StrictMode,{children:a.jsx(Yv,{})}));export{Tr as _,Gv as c,wm as g};
