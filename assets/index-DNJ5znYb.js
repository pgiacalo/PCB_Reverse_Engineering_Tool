(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))g(d);new MutationObserver(d=>{for(const $ of d)if($.type==="childList")for(const oe of $.addedNodes)oe.tagName==="LINK"&&oe.rel==="modulepreload"&&g(oe)}).observe(document,{childList:!0,subtree:!0});function S(d){const $={};return d.integrity&&($.integrity=d.integrity),d.referrerPolicy&&($.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?$.credentials="include":d.crossOrigin==="anonymous"?$.credentials="omit":$.credentials="same-origin",$}function g(d){if(d.ep)return;d.ep=!0;const $=S(d);fetch(d.href,$)}})();function zx(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Od={exports:{}},wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function Cx(){if(Jp)return wc;Jp=1;var c=Symbol.for("react.transitional.element"),x=Symbol.for("react.fragment");function S(g,d,$){var oe=null;if($!==void 0&&(oe=""+$),d.key!==void 0&&(oe=""+d.key),"key"in d){$={};for(var Ce in d)Ce!=="key"&&($[Ce]=d[Ce])}else $=d;return d=$.ref,{$$typeof:c,type:g,key:oe,ref:d!==void 0?d:null,props:$}}return wc.Fragment=x,wc.jsx=S,wc.jsxs=S,wc}var eh;function Rx(){return eh||(eh=1,Od.exports=Cx()),Od.exports}var i=Rx(),Hd={exports:{}},yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th;function Dx(){if(th)return yt;th=1;var c=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),Y=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),me=Symbol.for("react.activity"),we=Symbol.iterator;function Oe(R){return R===null||typeof R!="object"?null:(R=we&&R[we]||R["@@iterator"],typeof R=="function"?R:null)}var ne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,Me={};function He(R,E,ue){this.props=R,this.context=E,this.refs=Me,this.updater=ue||ne}He.prototype.isReactComponent={},He.prototype.setState=function(R,E){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,E,"setState")},He.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function H(){}H.prototype=He.prototype;function k(R,E,ue){this.props=R,this.context=E,this.refs=Me,this.updater=ue||ne}var M=k.prototype=new H;M.constructor=k,ee(M,He.prototype),M.isPureReactComponent=!0;var N=Array.isArray;function T(){}var p={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function he(R,E,ue){var Re=ue.ref;return{$$typeof:c,type:R,key:E,ref:Re!==void 0?Re:null,props:ue}}function Le(R,E){return he(R.type,E,R.props)}function je(R){return typeof R=="object"&&R!==null&&R.$$typeof===c}function Ee(R){var E={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ue){return E[ue]})}var Ne=/\/+/g;function _t(R,E){return typeof R=="object"&&R!==null&&R.key!=null?Ee(""+R.key):E.toString(36)}function et(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(T,T):(R.status="pending",R.then(function(E){R.status==="pending"&&(R.status="fulfilled",R.value=E)},function(E){R.status==="pending"&&(R.status="rejected",R.reason=E)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function U(R,E,ue,Re,Xe){var ht=typeof R;(ht==="undefined"||ht==="boolean")&&(R=null);var gt=!1;if(R===null)gt=!0;else switch(ht){case"bigint":case"string":case"number":gt=!0;break;case"object":switch(R.$$typeof){case c:case x:gt=!0;break;case De:return gt=R._init,U(gt(R._payload),E,ue,Re,Xe)}}if(gt)return Xe=Xe(R),gt=Re===""?"."+_t(R,0):Re,N(Xe)?(ue="",gt!=null&&(ue=gt.replace(Ne,"$&/")+"/"),U(Xe,E,ue,"",function(oi){return oi})):Xe!=null&&(je(Xe)&&(Xe=Le(Xe,ue+(Xe.key==null||R&&R.key===Xe.key?"":(""+Xe.key).replace(Ne,"$&/")+"/")+gt)),E.push(Xe)),1;gt=0;var yn=Re===""?".":Re+":";if(N(R))for(var Ot=0;Ot<R.length;Ot++)Re=R[Ot],ht=yn+_t(Re,Ot),gt+=U(Re,E,ue,ht,Xe);else if(Ot=Oe(R),typeof Ot=="function")for(R=Ot.call(R),Ot=0;!(Re=R.next()).done;)Re=Re.value,ht=yn+_t(Re,Ot++),gt+=U(Re,E,ue,ht,Xe);else if(ht==="object"){if(typeof R.then=="function")return U(et(R),E,ue,Re,Xe);throw E=String(R),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.")}return gt}function Z(R,E,ue){if(R==null)return R;var Re=[],Xe=0;return U(R,Re,"","",function(ht){return E.call(ue,ht,Xe++)}),Re}function Te(R){if(R._status===-1){var E=R._result;E=E(),E.then(function(ue){(R._status===0||R._status===-1)&&(R._status=1,R._result=ue)},function(ue){(R._status===0||R._status===-1)&&(R._status=2,R._result=ue)}),R._status===-1&&(R._status=0,R._result=E)}if(R._status===1)return R._result.default;throw R._result}var K=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},ve={map:Z,forEach:function(R,E,ue){Z(R,function(){E.apply(this,arguments)},ue)},count:function(R){var E=0;return Z(R,function(){E++}),E},toArray:function(R){return Z(R,function(E){return E})||[]},only:function(R){if(!je(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return yt.Activity=me,yt.Children=ve,yt.Component=He,yt.Fragment=S,yt.Profiler=d,yt.PureComponent=k,yt.StrictMode=g,yt.Suspense=de,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,yt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return p.H.useMemoCache(R)}},yt.cache=function(R){return function(){return R.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(R,E,ue){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var Re=ee({},R.props),Xe=R.key;if(E!=null)for(ht in E.key!==void 0&&(Xe=""+E.key),E)!W.call(E,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&E.ref===void 0||(Re[ht]=E[ht]);var ht=arguments.length-2;if(ht===1)Re.children=ue;else if(1<ht){for(var gt=Array(ht),yn=0;yn<ht;yn++)gt[yn]=arguments[yn+2];Re.children=gt}return he(R.type,Xe,Re)},yt.createContext=function(R){return R={$$typeof:oe,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:$,_context:R},R},yt.createElement=function(R,E,ue){var Re,Xe={},ht=null;if(E!=null)for(Re in E.key!==void 0&&(ht=""+E.key),E)W.call(E,Re)&&Re!=="key"&&Re!=="__self"&&Re!=="__source"&&(Xe[Re]=E[Re]);var gt=arguments.length-2;if(gt===1)Xe.children=ue;else if(1<gt){for(var yn=Array(gt),Ot=0;Ot<gt;Ot++)yn[Ot]=arguments[Ot+2];Xe.children=yn}if(R&&R.defaultProps)for(Re in gt=R.defaultProps,gt)Xe[Re]===void 0&&(Xe[Re]=gt[Re]);return he(R,ht,Xe)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(R){return{$$typeof:Ce,render:R}},yt.isValidElement=je,yt.lazy=function(R){return{$$typeof:De,_payload:{_status:-1,_result:R},_init:Te}},yt.memo=function(R,E){return{$$typeof:Y,type:R,compare:E===void 0?null:E}},yt.startTransition=function(R){var E=p.T,ue={};p.T=ue;try{var Re=R(),Xe=p.S;Xe!==null&&Xe(ue,Re),typeof Re=="object"&&Re!==null&&typeof Re.then=="function"&&Re.then(T,K)}catch(ht){K(ht)}finally{E!==null&&ue.types!==null&&(E.types=ue.types),p.T=E}},yt.unstable_useCacheRefresh=function(){return p.H.useCacheRefresh()},yt.use=function(R){return p.H.use(R)},yt.useActionState=function(R,E,ue){return p.H.useActionState(R,E,ue)},yt.useCallback=function(R,E){return p.H.useCallback(R,E)},yt.useContext=function(R){return p.H.useContext(R)},yt.useDebugValue=function(){},yt.useDeferredValue=function(R,E){return p.H.useDeferredValue(R,E)},yt.useEffect=function(R,E){return p.H.useEffect(R,E)},yt.useEffectEvent=function(R){return p.H.useEffectEvent(R)},yt.useId=function(){return p.H.useId()},yt.useImperativeHandle=function(R,E,ue){return p.H.useImperativeHandle(R,E,ue)},yt.useInsertionEffect=function(R,E){return p.H.useInsertionEffect(R,E)},yt.useLayoutEffect=function(R,E){return p.H.useLayoutEffect(R,E)},yt.useMemo=function(R,E){return p.H.useMemo(R,E)},yt.useOptimistic=function(R,E){return p.H.useOptimistic(R,E)},yt.useReducer=function(R,E,ue){return p.H.useReducer(R,E,ue)},yt.useRef=function(R){return p.H.useRef(R)},yt.useState=function(R){return p.H.useState(R)},yt.useSyncExternalStore=function(R,E,ue){return p.H.useSyncExternalStore(R,E,ue)},yt.useTransition=function(){return p.H.useTransition()},yt.version="19.2.0",yt}var nh;function Pd(){return nh||(nh=1,Hd.exports=Dx()),Hd.exports}var j=Pd();const Ie=zx(j);var Ed={exports:{}},jc={},Vd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh;function Ax(){return lh||(lh=1,(function(c){function x(U,Z){var Te=U.length;U.push(Z);e:for(;0<Te;){var K=Te-1>>>1,ve=U[K];if(0<d(ve,Z))U[K]=Z,U[Te]=ve,Te=K;else break e}}function S(U){return U.length===0?null:U[0]}function g(U){if(U.length===0)return null;var Z=U[0],Te=U.pop();if(Te!==Z){U[0]=Te;e:for(var K=0,ve=U.length,R=ve>>>1;K<R;){var E=2*(K+1)-1,ue=U[E],Re=E+1,Xe=U[Re];if(0>d(ue,Te))Re<ve&&0>d(Xe,ue)?(U[K]=Xe,U[Re]=Te,K=Re):(U[K]=ue,U[E]=Te,K=E);else if(Re<ve&&0>d(Xe,Te))U[K]=Xe,U[Re]=Te,K=Re;else break e}}return Z}function d(U,Z){var Te=U.sortIndex-Z.sortIndex;return Te!==0?Te:U.id-Z.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var $=performance;c.unstable_now=function(){return $.now()}}else{var oe=Date,Ce=oe.now();c.unstable_now=function(){return oe.now()-Ce}}var de=[],Y=[],De=1,me=null,we=3,Oe=!1,ne=!1,ee=!1,Me=!1,He=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function M(U){for(var Z=S(Y);Z!==null;){if(Z.callback===null)g(Y);else if(Z.startTime<=U)g(Y),Z.sortIndex=Z.expirationTime,x(de,Z);else break;Z=S(Y)}}function N(U){if(ee=!1,M(U),!ne)if(S(de)!==null)ne=!0,T||(T=!0,Ee());else{var Z=S(Y);Z!==null&&et(N,Z.startTime-U)}}var T=!1,p=-1,W=5,he=-1;function Le(){return Me?!0:!(c.unstable_now()-he<W)}function je(){if(Me=!1,T){var U=c.unstable_now();he=U;var Z=!0;try{e:{ne=!1,ee&&(ee=!1,H(p),p=-1),Oe=!0;var Te=we;try{t:{for(M(U),me=S(de);me!==null&&!(me.expirationTime>U&&Le());){var K=me.callback;if(typeof K=="function"){me.callback=null,we=me.priorityLevel;var ve=K(me.expirationTime<=U);if(U=c.unstable_now(),typeof ve=="function"){me.callback=ve,M(U),Z=!0;break t}me===S(de)&&g(de),M(U)}else g(de);me=S(de)}if(me!==null)Z=!0;else{var R=S(Y);R!==null&&et(N,R.startTime-U),Z=!1}}break e}finally{me=null,we=Te,Oe=!1}Z=void 0}}finally{Z?Ee():T=!1}}}var Ee;if(typeof k=="function")Ee=function(){k(je)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,_t=Ne.port2;Ne.port1.onmessage=je,Ee=function(){_t.postMessage(null)}}else Ee=function(){He(je,0)};function et(U,Z){p=He(function(){U(c.unstable_now())},Z)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(U){U.callback=null},c.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<U?Math.floor(1e3/U):5},c.unstable_getCurrentPriorityLevel=function(){return we},c.unstable_next=function(U){switch(we){case 1:case 2:case 3:var Z=3;break;default:Z=we}var Te=we;we=Z;try{return U()}finally{we=Te}},c.unstable_requestPaint=function(){Me=!0},c.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Te=we;we=U;try{return Z()}finally{we=Te}},c.unstable_scheduleCallback=function(U,Z,Te){var K=c.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?K+Te:K):Te=K,U){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Te+ve,U={id:De++,callback:Z,priorityLevel:U,startTime:Te,expirationTime:ve,sortIndex:-1},Te>K?(U.sortIndex=Te,x(Y,U),S(de)===null&&U===S(Y)&&(ee?(H(p),p=-1):ee=!0,et(N,Te-K))):(U.sortIndex=ve,x(de,U),ne||Oe||(ne=!0,T||(T=!0,Ee()))),U},c.unstable_shouldYield=Le,c.unstable_wrapCallback=function(U){var Z=we;return function(){var Te=we;we=Z;try{return U.apply(this,arguments)}finally{we=Te}}}})(Yd)),Yd}var ih;function kx(){return ih||(ih=1,Vd.exports=Ax()),Vd.exports}var Wd={exports:{}},vl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ah;function Nx(){if(ah)return vl;ah=1;var c=Pd();function x(de){var Y="https://react.dev/errors/"+de;if(1<arguments.length){Y+="?args[]="+encodeURIComponent(arguments[1]);for(var De=2;De<arguments.length;De++)Y+="&args[]="+encodeURIComponent(arguments[De])}return"Minified React error #"+de+"; visit "+Y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(){}var g={d:{f:S,r:function(){throw Error(x(522))},D:S,C:S,L:S,m:S,X:S,S,M:S},p:0,findDOMNode:null},d=Symbol.for("react.portal");function $(de,Y,De){var me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:me==null?null:""+me,children:de,containerInfo:Y,implementation:De}}var oe=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ce(de,Y){if(de==="font")return"";if(typeof Y=="string")return Y==="use-credentials"?Y:""}return vl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=g,vl.createPortal=function(de,Y){var De=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Y||Y.nodeType!==1&&Y.nodeType!==9&&Y.nodeType!==11)throw Error(x(299));return $(de,Y,null,De)},vl.flushSync=function(de){var Y=oe.T,De=g.p;try{if(oe.T=null,g.p=2,de)return de()}finally{oe.T=Y,g.p=De,g.d.f()}},vl.preconnect=function(de,Y){typeof de=="string"&&(Y?(Y=Y.crossOrigin,Y=typeof Y=="string"?Y==="use-credentials"?Y:"":void 0):Y=null,g.d.C(de,Y))},vl.prefetchDNS=function(de){typeof de=="string"&&g.d.D(de)},vl.preinit=function(de,Y){if(typeof de=="string"&&Y&&typeof Y.as=="string"){var De=Y.as,me=Ce(De,Y.crossOrigin),we=typeof Y.integrity=="string"?Y.integrity:void 0,Oe=typeof Y.fetchPriority=="string"?Y.fetchPriority:void 0;De==="style"?g.d.S(de,typeof Y.precedence=="string"?Y.precedence:void 0,{crossOrigin:me,integrity:we,fetchPriority:Oe}):De==="script"&&g.d.X(de,{crossOrigin:me,integrity:we,fetchPriority:Oe,nonce:typeof Y.nonce=="string"?Y.nonce:void 0})}},vl.preinitModule=function(de,Y){if(typeof de=="string")if(typeof Y=="object"&&Y!==null){if(Y.as==null||Y.as==="script"){var De=Ce(Y.as,Y.crossOrigin);g.d.M(de,{crossOrigin:De,integrity:typeof Y.integrity=="string"?Y.integrity:void 0,nonce:typeof Y.nonce=="string"?Y.nonce:void 0})}}else Y==null&&g.d.M(de)},vl.preload=function(de,Y){if(typeof de=="string"&&typeof Y=="object"&&Y!==null&&typeof Y.as=="string"){var De=Y.as,me=Ce(De,Y.crossOrigin);g.d.L(de,De,{crossOrigin:me,integrity:typeof Y.integrity=="string"?Y.integrity:void 0,nonce:typeof Y.nonce=="string"?Y.nonce:void 0,type:typeof Y.type=="string"?Y.type:void 0,fetchPriority:typeof Y.fetchPriority=="string"?Y.fetchPriority:void 0,referrerPolicy:typeof Y.referrerPolicy=="string"?Y.referrerPolicy:void 0,imageSrcSet:typeof Y.imageSrcSet=="string"?Y.imageSrcSet:void 0,imageSizes:typeof Y.imageSizes=="string"?Y.imageSizes:void 0,media:typeof Y.media=="string"?Y.media:void 0})}},vl.preloadModule=function(de,Y){if(typeof de=="string")if(Y){var De=Ce(Y.as,Y.crossOrigin);g.d.m(de,{as:typeof Y.as=="string"&&Y.as!=="script"?Y.as:void 0,crossOrigin:De,integrity:typeof Y.integrity=="string"?Y.integrity:void 0})}else g.d.m(de)},vl.requestFormReset=function(de){g.d.r(de)},vl.unstable_batchedUpdates=function(de,Y){return de(Y)},vl.useFormState=function(de,Y,De){return oe.H.useFormState(de,Y,De)},vl.useFormStatus=function(){return oe.H.useHostTransitionStatus()},vl.version="19.2.0",vl}var oh;function Mx(){if(oh)return Wd.exports;oh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(x){console.error(x)}}return c(),Wd.exports=Nx(),Wd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh;function Bx(){if(sh)return jc;sh=1;var c=kx(),x=Pd(),S=Mx();function g(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function oe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ce(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function de(e){if($(e)!==e)throw Error(g(188))}function Y(e){var t=e.alternate;if(!t){if(t=$(e),t===null)throw Error(g(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return de(o),e;if(s===l)return de(o),t;s=s.sibling}throw Error(g(188))}if(n.return!==l.return)n=o,l=s;else{for(var f=!1,m=o.child;m;){if(m===n){f=!0,n=o,l=s;break}if(m===l){f=!0,l=o,n=s;break}m=m.sibling}if(!f){for(m=s.child;m;){if(m===n){f=!0,n=s,l=o;break}if(m===l){f=!0,l=s,n=o;break}m=m.sibling}if(!f)throw Error(g(189))}}if(n.alternate!==l)throw Error(g(190))}if(n.tag!==3)throw Error(g(188));return n.stateNode.current===n?e:t}function De(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=De(e),t!==null)return t;e=e.sibling}return null}var me=Object.assign,we=Symbol.for("react.element"),Oe=Symbol.for("react.transitional.element"),ne=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),Me=Symbol.for("react.strict_mode"),He=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),k=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),he=Symbol.for("react.activity"),Le=Symbol.for("react.memo_cache_sentinel"),je=Symbol.iterator;function Ee(e){return e===null||typeof e!="object"?null:(e=je&&e[je]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Symbol.for("react.client.reference");function _t(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ne?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case He:return"Profiler";case Me:return"StrictMode";case N:return"Suspense";case T:return"SuspenseList";case he:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ne:return"Portal";case k:return e.displayName||"Context";case H:return(e._context.displayName||"Context")+".Consumer";case M:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case p:return t=e.displayName||null,t!==null?t:_t(e.type)||"Memo";case W:t=e._payload,e=e._init;try{return _t(e(t))}catch{}}return null}var et=Array.isArray,U=x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=S.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},K=[],ve=-1;function R(e){return{current:e}}function E(e){0>ve||(e.current=K[ve],K[ve]=null,ve--)}function ue(e,t){ve++,K[ve]=e.current,e.current=t}var Re=R(null),Xe=R(null),ht=R(null),gt=R(null);function yn(e,t){switch(ue(ht,t),ue(Xe,e),ue(Re,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?wp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=wp(t),e=jp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}E(Re),ue(Re,e)}function Ot(){E(Re),E(Xe),E(ht)}function oi(e){e.memoizedState!==null&&ue(gt,e);var t=Re.current,n=jp(t,e.type);t!==n&&(ue(Xe,e),ue(Re,n))}function al(e){Xe.current===e&&(E(Re),E(Xe)),gt.current===e&&(E(gt),vc._currentValue=Te)}var Pi,qe;function mt(e){if(Pi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Pi=t&&t[1]||"",qe=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pi+e+qe}var Ho=!1;function Ve(e,t){if(!e||Ho)return"";Ho=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(J){var L=J}Reflect.construct(e,[],fe)}else{try{fe.call()}catch(J){L=J}e.call(fe.prototype)}}else{try{throw Error()}catch(J){L=J}(fe=e())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(J){if(J&&L&&typeof J.stack=="string")return[J.stack,L.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),f=s[0],m=s[1];if(f&&m){var A=f.split(`
`),P=m.split(`
`);for(o=l=0;l<A.length&&!A[l].includes("DetermineComponentFrameRoot");)l++;for(;o<P.length&&!P[o].includes("DetermineComponentFrameRoot");)o++;if(l===A.length||o===P.length)for(l=A.length-1,o=P.length-1;1<=l&&0<=o&&A[l]!==P[o];)o--;for(;1<=l&&0<=o;l--,o--)if(A[l]!==P[o]){if(l!==1||o!==1)do if(l--,o--,0>o||A[l]!==P[o]){var ae=`
`+A[l].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=l&&0<=o);break}}}finally{Ho=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?mt(n):""}function Vt(e,t){switch(e.tag){case 26:case 27:case 5:return mt(e.type);case 16:return mt("Lazy");case 13:return e.child!==t&&t!==null?mt("Suspense Fallback"):mt("Suspense");case 19:return mt("SuspenseList");case 0:case 15:return Ve(e.type,!1);case 11:return Ve(e.type.render,!1);case 1:return Ve(e.type,!0);case 31:return mt("Activity");default:return""}}function Ti(e){try{var t="",n=null;do t+=Vt(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Fi=Object.prototype.hasOwnProperty,Ht=c.unstable_scheduleCallback,_n=c.unstable_cancelCallback,si=c.unstable_shouldYield,ga=c.unstable_requestPaint,ke=c.unstable_now,ya=c.unstable_getCurrentPriorityLevel,jt=c.unstable_ImmediatePriority,$n=c.unstable_UserBlockingPriority,ri=c.unstable_NormalPriority,dr=c.unstable_LowPriority,Za=c.unstable_IdlePriority,fr=c.log,Nt=c.unstable_setDisableYieldValue,ci=null,On=null;function ol(e){if(typeof fr=="function"&&Nt(e),On&&typeof On.setStrictMode=="function")try{On.setStrictMode(ci,e)}catch{}}var Hn=Math.clz32?Math.clz32:pr,Gi=Math.log,zi=Math.LN2;function pr(e){return e>>>=0,e===0?32:31-(Gi(e)/zi|0)|0}var Li=256,Se=262144,Kt=4194304;function Je(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Lt(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,s=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var m=l&134217727;return m!==0?(l=m&~s,l!==0?o=Je(l):(f&=m,f!==0?o=Je(f):n||(n=m&~e,n!==0&&(o=Je(n))))):(m=l&~s,m!==0?o=Je(m):f!==0?o=Je(f):n||(n=l&~e,n!==0&&(o=Je(n)))),o===0?0:t!==0&&t!==o&&(t&s)===0&&(s=o&-o,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:o}function An(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Qa(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ka(){var e=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),e}function Eo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pe(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qt(e,t,n,l,o,s){var f=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var m=e.entanglements,A=e.expirationTimes,P=e.hiddenUpdates;for(n=f&~n;0<n;){var ae=31-Hn(n),fe=1<<ae;m[ae]=0,A[ae]=-1;var L=P[ae];if(L!==null)for(P[ae]=null,ae=0;ae<L.length;ae++){var J=L[ae];J!==null&&(J.lane&=-536870913)}n&=~fe}l!==0&&rn(e,l,0),s!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=s&~(f&~t))}function rn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Hn(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Ja(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Hn(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function cn(e,t){var n=t&-t;return n=(n&42)!==0?1:Vo(n),(n&(e.suspendedLanes|t))!==0?0:n}function Vo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Cs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pe(){var e=Z.p;return e!==0?e:(e=window.event,e===void 0?32:Gp(e.type))}function ln(e,t){var n=Z.p;try{return Z.p=e,t()}finally{Z.p=n}}var Dl=Math.random().toString(36).slice(2),En="__reactFiber$"+Dl,un="__reactProps$"+Dl,Jn="__reactContainer$"+Dl,Rs="__reactEvents$"+Dl,hr="__reactListeners$"+Dl,Cc="__reactHandles$"+Dl,xr="__reactResources$"+Dl,ui="__reactMarker$"+Dl;function qi(e){delete e[En],delete e[un],delete e[Rs],delete e[hr],delete e[Cc]}function va(e){var t=e[En];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jn]||n[En]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kp(e);e!==null;){if(n=e[En])return n;e=kp(e)}return t}e=n,n=e.parentNode}return null}function eo(e){if(e=e[En]||e[Jn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ds(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(g(33))}function to(e){var t=e[xr];return t||(t=e[xr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function kn(e){e[ui]=!0}var Rc=new Set,gr={};function ba(e,t){vn(e,t),vn(e+"Capture",t)}function vn(e,t){for(gr[e]=t,e=0;e<t.length;e++)Rc.add(t[e])}var Cu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vt={},Rt={};function As(e){return Fi.call(Rt,e)?!0:Fi.call(vt,e)?!1:Cu.test(e)?Rt[e]=!0:(vt[e]=!0,!1)}function Yo(e,t,n){if(As(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function it(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ct(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function at(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Dt(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(f){n=""+f,s.call(this,f)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zt(e){if(!e._valueTracker){var t=Tt(e)?"checked":"value";e._valueTracker=Dt(e,t,""+e[t])}}function Dc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Tt(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function St(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var wn=/[\n"\\]/g;function ot(e){return e.replace(wn,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function hn(e,t,n,l,o,s,f,m){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+at(t)):e.value!==""+at(t)&&(e.value=""+at(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?yr(e,f,at(t)):n!=null?yr(e,f,at(n)):l!=null&&e.removeAttribute("value"),o==null&&s!=null&&(e.defaultChecked=!!s),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+at(m):e.removeAttribute("name")}function ma(e,t,n,l,o,s,f,m){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){zt(e);return}n=n!=null?""+at(n):"",t=t!=null?""+at(t):n,m||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=m?e.checked:!!l,e.defaultChecked=!!l,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),zt(e)}function yr(e,t,n){t==="number"&&St(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Nn(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+at(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Wo(e,t,n){if(t!=null&&(t=""+at(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+at(n):""}function ks(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(g(92));if(et(l)){if(1<l.length)throw Error(g(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=at(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),zt(e)}function di(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function br(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||vr.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function no(e,t,n){if(t!=null&&typeof t!="object")throw Error(g(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&br(e,o,l)}else for(var s in t)t.hasOwnProperty(s)&&br(e,s,t[s])}function Ns(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ru=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Du=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ut(e){return Du.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mn(){}var Vn=null;function Ci(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lo=null,Fn=null;function Ac(e){var t=eo(e);if(t&&(e=t.stateNode)){var n=e[un]||null;e:switch(e=t.stateNode,t.type){case"input":if(hn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ot(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[un]||null;if(!o)throw Error(g(90));hn(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&Dc(l)}break e;case"textarea":Wo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Nn(e,!!n.multiple,t,!1)}}}var bl=!1;function sl(e,t,n){if(bl)return e(t,n);bl=!0;try{var l=e(t);return l}finally{if(bl=!1,(lo!==null||Fn!==null)&&(Kc(),lo&&(t=lo,e=Fn,Fn=lo=null,Ac(t),e)))for(t=0;t<e.length;t++)Ac(e[t])}}function Ri(e,t){var n=e.stateNode;if(n===null)return null;var l=n[un]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(g(231,t,typeof n));return n}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(Di)try{var $i={};Object.defineProperty($i,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{Zn=!1}var dn=null,Io=null,rl=null;function mr(){if(rl)return rl;var e,t=Io,n=t.length,l,o="value"in dn?dn.value:dn.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var f=n-e;for(l=1;l<=f&&t[n-l]===o[s-l];l++);return rl=o.slice(e,1<l?1-l:void 0)}function Bn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function io(){return!0}function el(){return!1}function Qn(e){function t(n,l,o,s,f){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=s,this.target=f,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(n=e[m],this[m]=n?n(s):s[m]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?io:el,this.isPropagationStopped=el,this}return me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=io)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=io)},persist:function(){},isPersistent:io}),t}var bn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Qn(bn),Jt=me({},bn,{view:0,detail:0}),Sr=Qn(Jt),wr,jr,wa,fi=me({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Go,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wa&&(wa&&e.type==="mousemove"?(wr=e.screenX-wa.screenX,jr=e.screenY-wa.screenY):jr=wr=0,wa=e),wr)},movementY:function(e){return"movementY"in e?e.movementY:jr}}),Ai=Qn(fi),Ms=me({},fi,{dataTransfer:0}),Zi=Qn(Ms),ao=me({},Jt,{relatedTarget:0}),Al=Qn(ao),oo=me({},bn,{animationName:0,elapsedTime:0,pseudoElement:0}),Xo=Qn(oo),Tr=me({},bn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bs=Qn(Tr),zr=me({},bn,{data:0}),so=Qn(zr),on={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Po={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fo(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sn[e])?!!t[e]:!1}function Go(){return Fo}var Us=me({},Jt,{key:function(e){if(e.key){var t=on[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Po[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Go,charCode:function(e){return e.type==="keypress"?Bn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Au=Qn(Us),kl=me({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pl=Qn(kl),ja=me({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Go}),Qi=Qn(ja),Ki=me({},bn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_s=Qn(Ki),Ji=me({},fi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ta=Qn(Ji),Os=me({},bn,{newState:0,oldState:0}),ml=Qn(Os),pi=[9,13,27,32],hi=Di&&"CompositionEvent"in window,jn=null;Di&&"documentMode"in document&&(jn=document.documentMode);var Fl=Di&&"TextEvent"in window&&!jn,kc=Di&&(!hi||jn&&8<jn&&11>=jn),ro=" ",Cr=!1;function Rr(e,t){switch(e){case"keyup":return pi.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function en(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var tl=!1;function Dr(e,t){switch(e){case"compositionend":return en(t);case"keypress":return t.which!==32?null:(Cr=!0,ro);case"textInput":return e=t.data,e===ro&&Cr?null:e;default:return null}}function Ar(e,t){if(tl)return e==="compositionend"||!hi&&Rr(e,t)?(e=mr(),rl=Io=dn=null,tl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kc&&t.locale!=="ko"?null:t.data;default:return null}}var kr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kr[e.type]:t==="textarea"}function Mr(e,t,n,l){lo?Fn?Fn.push(l):Fn=[l]:lo=l,t=au(t,"onChange"),0<t.length&&(n=new Sa("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var co=null,uo=null;function Br(e){gp(e,0)}function za(e){var t=Ds(e);if(Dc(t))return e}function Ca(e,t){if(e==="change")return t}var fo=!1;if(Di){var Hs;if(Di){var ea="oninput"in document;if(!ea){var Lo=document.createElement("div");Lo.setAttribute("oninput","return;"),ea=typeof Lo.oninput=="function"}Hs=ea}else Hs=!1;fo=Hs&&(!document.documentMode||9<document.documentMode)}function qo(){co&&(co.detachEvent("onpropertychange",Ra),uo=co=null)}function Ra(e){if(e.propertyName==="value"&&za(uo)){var t=[];Mr(t,uo,e,Ci(e)),sl(Br,t)}}function Ur(e,t,n){e==="focusin"?(qo(),co=t,uo=n,co.attachEvent("onpropertychange",Ra)):e==="focusout"&&qo()}function $o(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return za(uo)}function Zo(e,t){if(e==="click")return za(t)}function Qo(e,t){if(e==="input"||e==="change")return za(t)}function Es(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tn=typeof Object.is=="function"?Object.is:Es;function Ko(e,t){if(Tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!Fi.call(t,o)||!Tn(e[o],t[o]))return!1}return!0}function Jo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _r(e,t){var n=Jo(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jo(n)}}function Nc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function es(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=St(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=St(e.document)}return t}function ts(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Mc=Di&&"documentMode"in document&&11>=document.documentMode,Da=null,Vs=null,ta=null,Aa=!1;function ns(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Aa||Da==null||Da!==St(l)||(l=Da,"selectionStart"in l&&ts(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ta&&Ko(ta,l)||(ta=l,l=au(Vs,"onSelect"),0<l.length&&(t=new Sa("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=Da)))}function Gl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Un={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionrun:Gl("Transition","TransitionRun"),transitionstart:Gl("Transition","TransitionStart"),transitioncancel:Gl("Transition","TransitionCancel"),transitionend:Gl("Transition","TransitionEnd")},ls={},Sl={};Di&&(Sl=document.createElement("div").style,"AnimationEvent"in window||(delete Un.animationend.animation,delete Un.animationiteration.animation,delete Un.animationstart.animation),"TransitionEvent"in window||delete Un.transitionend.transition);function ki(e){if(ls[e])return ls[e];if(!Un[e])return e;var t=Un[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sl)return ls[e]=t[n];return e}var wl=ki("animationend"),Ys=ki("animationiteration"),Ll=ki("animationstart"),Or=ki("transitionrun"),xi=ki("transitionstart"),Hr=ki("transitioncancel"),ql=ki("transitionend"),is=new Map,Nl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nl.push("scrollEnd");function cl(e,t){is.set(e,t),ba(t,[e])}var $l=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ul=[],lt=0,dt=0;function Ws(){for(var e=lt,t=dt=lt=0;t<e;){var n=ul[t];ul[t++]=null;var l=ul[t];ul[t++]=null;var o=ul[t];ul[t++]=null;var s=ul[t];if(ul[t++]=null,l!==null&&o!==null){var f=l.pending;f===null?o.next=o:(o.next=f.next,f.next=o),l.pending=o}s!==0&&os(n,o,s)}}function ka(e,t,n,l){ul[lt++]=e,ul[lt++]=t,ul[lt++]=n,ul[lt++]=l,dt|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function as(e,t,n,l){return ka(e,t,n,l),Na(e)}function Ml(e,t){return ka(e,null,null,t),Na(e)}function os(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,s=e.return;s!==null;)s.childLanes|=n,l=s.alternate,l!==null&&(l.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(o=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,o&&t!==null&&(o=31-Hn(n),e=s.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),s):null}function Na(e){if(50<dc)throw dc=0,od=null,Error(g(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var po={};function Is(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nl(e,t,n,l){return new Is(e,t,n,l)}function na(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dl(e,t){var n=e.alternate;return n===null?(n=nl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ss(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bl(e,t,n,l,o,s){var f=0;if(l=e,typeof e=="function")na(e)&&(f=1);else if(typeof e=="string")f=px(e,n,Re.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case he:return e=nl(31,n,t,o),e.elementType=he,e.lanes=s,e;case ee:return Ni(n.children,o,s,t);case Me:f=8,o|=24;break;case He:return e=nl(12,n,t,o|2),e.elementType=He,e.lanes=s,e;case N:return e=nl(13,n,t,o),e.elementType=N,e.lanes=s,e;case T:return e=nl(19,n,t,o),e.elementType=T,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:f=10;break e;case H:f=9;break e;case M:f=11;break e;case p:f=14;break e;case W:f=16,l=null;break e}f=29,n=Error(g(130,e===null?"null":typeof e,"")),l=null}return t=nl(f,n,t,o),t.elementType=e,t.type=l,t.lanes=s,t}function Ni(e,t,n,l){return e=nl(7,e,l,t),e.lanes=n,e}function la(e,t,n){return e=nl(6,e,null,t),e.lanes=n,e}function Xs(e){var t=nl(18,null,null,0);return t.stateNode=e,t}function ia(e,t,n){return t=nl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var rs=new WeakMap;function fl(e,t){if(typeof e=="object"&&e!==null){var n=rs.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ti(t)},rs.set(e,t),t)}return{value:e,source:t,stack:Ti(t)}}var Ma=[],Mi=0,cs=null,Ba=0,jl=[],Gn=0,Zl=null,Ul=1,Ql="";function _l(e,t){Ma[Mi++]=Ba,Ma[Mi++]=cs,cs=e,Ba=t}function Er(e,t,n){jl[Gn++]=Ul,jl[Gn++]=Ql,jl[Gn++]=Zl,Zl=e;var l=Ul;e=Ql;var o=32-Hn(l)-1;l&=~(1<<o),n+=1;var s=32-Hn(t)+o;if(30<s){var f=o-o%5;s=(l&(1<<f)-1).toString(32),l>>=f,o-=f,Ul=1<<32-Hn(t)+o|n<<o|l,Ql=s+e}else Ul=1<<s|n<<o|l,Ql=e}function Vr(e){e.return!==null&&(_l(e,1),Er(e,1,0))}function Yr(e){for(;e===cs;)cs=Ma[--Mi],Ma[Mi]=null,Ba=Ma[--Mi],Ma[Mi]=null;for(;e===Zl;)Zl=jl[--Gn],jl[Gn]=null,Ql=jl[--Gn],jl[Gn]=null,Ul=jl[--Gn],jl[Gn]=null}function Bc(e,t){jl[Gn++]=Ul,jl[Gn++]=Ql,jl[Gn++]=Zl,Ul=t.id,Ql=t.overflow,Zl=e}var Yn=null,Mt=null,ft=!1,aa=null,Ol=!1,Wr=Error(g(519));function oa(e){var t=Error(g(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw us(fl(t,e)),Wr}function Uc(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[En]=e,t[un]=l,n){case"dialog":kt("cancel",t),kt("close",t);break;case"iframe":case"object":case"embed":kt("load",t);break;case"video":case"audio":for(n=0;n<pc.length;n++)kt(pc[n],t);break;case"source":kt("error",t);break;case"img":case"image":case"link":kt("error",t),kt("load",t);break;case"details":kt("toggle",t);break;case"input":kt("invalid",t),ma(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":kt("invalid",t);break;case"textarea":kt("invalid",t),ks(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||mp(t.textContent,n)?(l.popover!=null&&(kt("beforetoggle",t),kt("toggle",t)),l.onScroll!=null&&kt("scroll",t),l.onScrollEnd!=null&&kt("scrollend",t),l.onClick!=null&&(t.onclick=Mn),t=!0):t=!1,t||oa(e,!0)}function _c(e){for(Yn=e.return;Yn;)switch(Yn.tag){case 5:case 31:case 13:Ol=!1;return;case 27:case 3:Ol=!0;return;default:Yn=Yn.return}}function ho(e){if(e!==Yn)return!1;if(!ft)return _c(e),ft=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Sd(e.type,e.memoizedProps)),n=!n),n&&Mt&&oa(e),_c(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(g(317));Mt=Ap(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(g(317));Mt=Ap(e)}else t===27?(t=Mt,No(e.type)?(e=Cd,Cd=null,Mt=e):Mt=t):Mt=Yn?wi(e.stateNode.nextSibling):null;return!0}function Ua(){Mt=Yn=null,ft=!1}function Ir(){var e=aa;return e!==null&&(Il===null?Il=e:Il.push.apply(Il,e),aa=null),e}function us(e){aa===null?aa=[e]:aa.push(e)}var Xr=R(null),_a=null,Tl=null;function zl(e,t,n){ue(Xr,t._currentValue),t._currentValue=n}function pl(e){e._currentValue=Xr.current,E(Xr)}function xo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Oa(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){var f=o.child;s=s.firstContext;e:for(;s!==null;){var m=s;s=o;for(var A=0;A<t.length;A++)if(m.context===t[A]){s.lanes|=n,m=s.alternate,m!==null&&(m.lanes|=n),xo(s.return,n,e),l||(f=null);break e}s=m.next}}else if(o.tag===18){if(f=o.return,f===null)throw Error(g(341));f.lanes|=n,s=f.alternate,s!==null&&(s.lanes|=n),xo(f,n,e),f=null}else f=o.child;if(f!==null)f.return=o;else for(f=o;f!==null;){if(f===e){f=null;break}if(o=f.sibling,o!==null){o.return=f.return,f=o;break}f=f.return}o=f}}function gi(e,t,n,l){e=null;for(var o=t,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var f=o.alternate;if(f===null)throw Error(g(387));if(f=f.memoizedProps,f!==null){var m=o.type;Tn(o.pendingProps.value,f.value)||(e!==null?e.push(m):e=[m])}}else if(o===gt.current){if(f=o.alternate,f===null)throw Error(g(387));f.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(vc):e=[vc])}o=o.return}e!==null&&Oa(t,e,n,l),t.flags|=262144}function Ha(e){for(e=e.firstContext;e!==null;){if(!Tn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function yi(e){_a=e,Tl=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function zn(e){return go(_a,e)}function Kl(e,t){return _a===null&&yi(e),go(e,t)}function go(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Tl===null){if(e===null)throw Error(g(308));Tl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Tl=Tl.next=t;return n}var yo=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Jl=c.unstable_scheduleCallback,Pr=c.unstable_NormalPriority,Cn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fr(){return{controller:new yo,data:new Map,refCount:0}}function vo(e){e.refCount--,e.refCount===0&&Jl(Pr,function(){e.controller.abort()})}var ei=null,bo=0,Bi=0,sa=null;function Gr(e,t){if(ei===null){var n=ei=[];bo=0,Bi=fd(),sa={status:"pending",value:void 0,then:function(l){n.push(l)}}}return bo++,t.then(Ps,Ps),t}function Ps(){if(--bo===0&&ei!==null){sa!==null&&(sa.status="fulfilled");var e=ei;ei=null,Bi=0,sa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ku(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var Lr=U.S;U.S=function(e,t){Pf=ke(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Gr(e,t),Lr!==null&&Lr(e,t)};var hl=R(null);function Fs(){var e=hl.current;return e!==null?e:an.pooledCache}function Ui(e,t){t===null?ue(hl,hl.current):ue(hl,t.pool)}function qr(){var e=Fs();return e===null?null:{parent:Cn._currentValue,pool:e}}var Cl=Error(g(460)),ds=Error(g(474)),fs=Error(g(542)),Gs={then:function(){}};function Oc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hc(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Mn,Mn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$r(e),e;default:if(typeof t.status=="string")t.then(Mn,Mn);else{if(e=an,e!==null&&100<e.shellSuspendCounter)throw Error(g(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$r(e),e}throw ra=t,Cl}}function vi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ra=n,Cl):n}}var ra=null;function Ec(){if(ra===null)throw Error(g(459));var e=ra;return ra=null,e}function $r(e){if(e===Cl||e===fs)throw Error(g(483))}var bi=null,ps=0;function mo(e){var t=ps;return ps+=1,bi===null&&(bi=[]),Hc(bi,e,t)}function hs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function So(e,t){throw t.$$typeof===we?Error(g(525)):(e=Object.prototype.toString.call(t),Error(g(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ls(e){function t(O,B){if(e){var X=O.deletions;X===null?(O.deletions=[B],O.flags|=16):X.push(B)}}function n(O,B){if(!e)return null;for(;B!==null;)t(O,B),B=B.sibling;return null}function l(O){for(var B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function o(O,B){return O=dl(O,B),O.index=0,O.sibling=null,O}function s(O,B,X){return O.index=X,e?(X=O.alternate,X!==null?(X=X.index,X<B?(O.flags|=67108866,B):X):(O.flags|=67108866,B)):(O.flags|=1048576,B)}function f(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function m(O,B,X,ce){return B===null||B.tag!==6?(B=la(X,O.mode,ce),B.return=O,B):(B=o(B,X),B.return=O,B)}function A(O,B,X,ce){var Ze=X.type;return Ze===ee?ae(O,B,X.props.children,ce,X.key):B!==null&&(B.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===W&&vi(Ze)===B.type)?(B=o(B,X.props),hs(B,X),B.return=O,B):(B=Bl(X.type,X.key,X.props,null,O.mode,ce),hs(B,X),B.return=O,B)}function P(O,B,X,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==X.containerInfo||B.stateNode.implementation!==X.implementation?(B=ia(X,O.mode,ce),B.return=O,B):(B=o(B,X.children||[]),B.return=O,B)}function ae(O,B,X,ce,Ze){return B===null||B.tag!==7?(B=Ni(X,O.mode,ce,Ze),B.return=O,B):(B=o(B,X),B.return=O,B)}function fe(O,B,X){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=la(""+B,O.mode,X),B.return=O,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Oe:return X=Bl(B.type,B.key,B.props,null,O.mode,X),hs(X,B),X.return=O,X;case ne:return B=ia(B,O.mode,X),B.return=O,B;case W:return B=vi(B),fe(O,B,X)}if(et(B)||Ee(B))return B=Ni(B,O.mode,X,null),B.return=O,B;if(typeof B.then=="function")return fe(O,mo(B),X);if(B.$$typeof===k)return fe(O,Kl(O,B),X);So(O,B)}return null}function L(O,B,X,ce){var Ze=B!==null?B.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ze!==null?null:m(O,B,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Oe:return X.key===Ze?A(O,B,X,ce):null;case ne:return X.key===Ze?P(O,B,X,ce):null;case W:return X=vi(X),L(O,B,X,ce)}if(et(X)||Ee(X))return Ze!==null?null:ae(O,B,X,ce,null);if(typeof X.then=="function")return L(O,B,mo(X),ce);if(X.$$typeof===k)return L(O,B,Kl(O,X),ce);So(O,X)}return null}function J(O,B,X,ce,Ze){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return O=O.get(X)||null,m(B,O,""+ce,Ze);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Oe:return O=O.get(ce.key===null?X:ce.key)||null,A(B,O,ce,Ze);case ne:return O=O.get(ce.key===null?X:ce.key)||null,P(B,O,ce,Ze);case W:return ce=vi(ce),J(O,B,X,ce,Ze)}if(et(ce)||Ee(ce))return O=O.get(X)||null,ae(B,O,ce,Ze,null);if(typeof ce.then=="function")return J(O,B,X,mo(ce),Ze);if(ce.$$typeof===k)return J(O,B,X,Kl(B,ce),Ze);So(B,ce)}return null}function We(O,B,X,ce){for(var Ze=null,It=null,Ge=B,wt=B=0,Ut=null;Ge!==null&&wt<X.length;wt++){Ge.index>wt?(Ut=Ge,Ge=null):Ut=Ge.sibling;var Xt=L(O,Ge,X[wt],ce);if(Xt===null){Ge===null&&(Ge=Ut);break}e&&Ge&&Xt.alternate===null&&t(O,Ge),B=s(Xt,B,wt),It===null?Ze=Xt:It.sibling=Xt,It=Xt,Ge=Ut}if(wt===X.length)return n(O,Ge),ft&&_l(O,wt),Ze;if(Ge===null){for(;wt<X.length;wt++)Ge=fe(O,X[wt],ce),Ge!==null&&(B=s(Ge,B,wt),It===null?Ze=Ge:It.sibling=Ge,It=Ge);return ft&&_l(O,wt),Ze}for(Ge=l(Ge);wt<X.length;wt++)Ut=J(Ge,O,wt,X[wt],ce),Ut!==null&&(e&&Ut.alternate!==null&&Ge.delete(Ut.key===null?wt:Ut.key),B=s(Ut,B,wt),It===null?Ze=Ut:It.sibling=Ut,It=Ut);return e&&Ge.forEach(function(Oo){return t(O,Oo)}),ft&&_l(O,wt),Ze}function nt(O,B,X,ce){if(X==null)throw Error(g(151));for(var Ze=null,It=null,Ge=B,wt=B=0,Ut=null,Xt=X.next();Ge!==null&&!Xt.done;wt++,Xt=X.next()){Ge.index>wt?(Ut=Ge,Ge=null):Ut=Ge.sibling;var Oo=L(O,Ge,Xt.value,ce);if(Oo===null){Ge===null&&(Ge=Ut);break}e&&Ge&&Oo.alternate===null&&t(O,Ge),B=s(Oo,B,wt),It===null?Ze=Oo:It.sibling=Oo,It=Oo,Ge=Ut}if(Xt.done)return n(O,Ge),ft&&_l(O,wt),Ze;if(Ge===null){for(;!Xt.done;wt++,Xt=X.next())Xt=fe(O,Xt.value,ce),Xt!==null&&(B=s(Xt,B,wt),It===null?Ze=Xt:It.sibling=Xt,It=Xt);return ft&&_l(O,wt),Ze}for(Ge=l(Ge);!Xt.done;wt++,Xt=X.next())Xt=J(Ge,O,wt,Xt.value,ce),Xt!==null&&(e&&Xt.alternate!==null&&Ge.delete(Xt.key===null?wt:Xt.key),B=s(Xt,B,wt),It===null?Ze=Xt:It.sibling=Xt,It=Xt);return e&&Ge.forEach(function(Tx){return t(O,Tx)}),ft&&_l(O,wt),Ze}function nn(O,B,X,ce){if(typeof X=="object"&&X!==null&&X.type===ee&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case Oe:e:{for(var Ze=X.key;B!==null;){if(B.key===Ze){if(Ze=X.type,Ze===ee){if(B.tag===7){n(O,B.sibling),ce=o(B,X.props.children),ce.return=O,O=ce;break e}}else if(B.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===W&&vi(Ze)===B.type){n(O,B.sibling),ce=o(B,X.props),hs(ce,X),ce.return=O,O=ce;break e}n(O,B);break}else t(O,B);B=B.sibling}X.type===ee?(ce=Ni(X.props.children,O.mode,ce,X.key),ce.return=O,O=ce):(ce=Bl(X.type,X.key,X.props,null,O.mode,ce),hs(ce,X),ce.return=O,O=ce)}return f(O);case ne:e:{for(Ze=X.key;B!==null;){if(B.key===Ze)if(B.tag===4&&B.stateNode.containerInfo===X.containerInfo&&B.stateNode.implementation===X.implementation){n(O,B.sibling),ce=o(B,X.children||[]),ce.return=O,O=ce;break e}else{n(O,B);break}else t(O,B);B=B.sibling}ce=ia(X,O.mode,ce),ce.return=O,O=ce}return f(O);case W:return X=vi(X),nn(O,B,X,ce)}if(et(X))return We(O,B,X,ce);if(Ee(X)){if(Ze=Ee(X),typeof Ze!="function")throw Error(g(150));return X=Ze.call(X),nt(O,B,X,ce)}if(typeof X.then=="function")return nn(O,B,mo(X),ce);if(X.$$typeof===k)return nn(O,B,Kl(O,X),ce);So(O,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,B!==null&&B.tag===6?(n(O,B.sibling),ce=o(B,X),ce.return=O,O=ce):(n(O,B),ce=la(X,O.mode,ce),ce.return=O,O=ce),f(O)):n(O,B)}return function(O,B,X,ce){try{ps=0;var Ze=nn(O,B,X,ce);return bi=null,Ze}catch(Ge){if(Ge===Cl||Ge===fs)throw Ge;var It=nl(29,Ge,null,O.mode);return It.lanes=ce,It.return=O,It}finally{}}}var ca=Ls(!0),Zr=Ls(!1),_i=!1;function Ea(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Hl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xl(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ft&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=Na(e),os(e,null,n),t}return ka(e,l,t,n),Na(e)}function Oi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Ja(e,n)}}function gs(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var f={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=f:s=s.next=f,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ys=!1;function vs(){if(ys){var e=sa;if(e!==null)throw e}}function bs(e,t,n,l){ys=!1;var o=e.updateQueue;_i=!1;var s=o.firstBaseUpdate,f=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var A=m,P=A.next;A.next=null,f===null?s=P:f.next=P,f=A;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,m=ae.lastBaseUpdate,m!==f&&(m===null?ae.firstBaseUpdate=P:m.next=P,ae.lastBaseUpdate=A))}if(s!==null){var fe=o.baseState;f=0,ae=P=A=null,m=s;do{var L=m.lane&-536870913,J=L!==m.lane;if(J?(Bt&L)===L:(l&L)===L){L!==0&&L===Bi&&(ys=!0),ae!==null&&(ae=ae.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var We=e,nt=m;L=t;var nn=n;switch(nt.tag){case 1:if(We=nt.payload,typeof We=="function"){fe=We.call(nn,fe,L);break e}fe=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=nt.payload,L=typeof We=="function"?We.call(nn,fe,L):We,L==null)break e;fe=me({},fe,L);break e;case 2:_i=!0}}L=m.callback,L!==null&&(e.flags|=64,J&&(e.flags|=8192),J=o.callbacks,J===null?o.callbacks=[L]:J.push(L))}else J={lane:L,tag:m.tag,payload:m.payload,callback:m.callback,next:null},ae===null?(P=ae=J,A=fe):ae=ae.next=J,f|=L;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;J=m,m=J.next,J.next=null,o.lastBaseUpdate=J,o.shared.pending=null}}while(!0);ae===null&&(A=fe),o.baseState=A,o.firstBaseUpdate=P,o.lastBaseUpdate=ae,s===null&&(o.shared.lanes=0),Co|=f,e.lanes=f,e.memoizedState=fe}}function Qr(e,t){if(typeof e!="function")throw Error(g(191,e));e.call(t)}function Kr(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Qr(n[e],t)}var Hi=R(null),El=R(0);function Jr(e,t){e=La,ue(El,e),ue(Hi,t),La=e|t.baseLanes}function ua(){ue(El,La),ue(Hi,Hi.current)}function Ei(){La=El.current,E(Hi),E(El)}var gl=R(null),yl=null;function mn(e){var t=e.alternate;ue(Sn,Sn.current&1),ue(gl,e),yl===null&&(t===null||Hi.current!==null||t.memoizedState!==null)&&(yl=e)}function da(e){ue(Sn,Sn.current),ue(gl,e),yl===null&&(yl=e)}function qs(e){e.tag===22?(ue(Sn,Sn.current),ue(gl,e),yl===null&&(yl=e)):mi()}function mi(){ue(Sn,Sn.current),ue(gl,gl.current)}function Ln(e){E(gl),yl===e&&(yl=null),E(Sn)}var Sn=R(0);function fa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Td(n)||zd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vi=0,xt=null,Yt=null,Rn=null,$s=!1,Va=!1,Yi=!1,wo=0,ms=0,Ya=null,Ss=0;function $t(){throw Error(g(321))}function jo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Tn(e[n],t[n]))return!1;return!0}function ws(e,t,n,l,o,s){return Vi=s,xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?ef:_u,Yi=!1,s=n(l,o),Yi=!1,Va&&(s=Vc(t,n,l,o)),Zs(e),s}function Zs(e){U.H=nc;var t=Yt!==null&&Yt.next!==null;if(Vi=0,Rn=Yt=xt=null,$s=!1,ms=0,Ya=null,t)throw Error(g(300));e===null||Wn||(e=e.dependencies,e!==null&&Ha(e)&&(Wn=!0))}function Vc(e,t,n,l){xt=e;var o=0;do{if(Va&&(Ya=null),ms=0,Va=!1,25<=o)throw Error(g(301));if(o+=1,Rn=Yt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}U.H=tf,s=t(n,l)}while(Va);return s}function tt(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?v(t):t,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(xt.flags|=1024),t}function ec(){var e=wo!==0;return wo=0,e}function a(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function r(e){if($s){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}$s=!1}Vi=0,Rn=Yt=xt=null,Va=!1,ms=wo=0,Ya=null}function h(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?xt.memoizedState=Rn=e:Rn=Rn.next=e,Rn}function y(){if(Yt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var t=Rn===null?xt.memoizedState:Rn.next;if(t!==null)Rn=t,Yt=e;else{if(e===null)throw xt.alternate===null?Error(g(467)):Error(g(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Rn===null?xt.memoizedState=Rn=e:Rn=Rn.next=e}return Rn}function b(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function v(e){var t=ms;return ms+=1,Ya===null&&(Ya=[]),e=Hc(Ya,e,t),t=xt,(Rn===null?t.memoizedState:Rn.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?ef:_u),e}function u(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return v(e);if(e.$$typeof===k)return zn(e)}throw Error(g(438,String(e)))}function w(e){var t=null,n=xt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=xt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=b(),xt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=Le;return t.index++,n}function z(e,t){return typeof t=="function"?t(e):t}function C(e){var t=y();return q(t,Yt,e)}function q(e,t,n){var l=e.queue;if(l===null)throw Error(g(311));l.lastRenderedReducer=n;var o=e.baseQueue,s=l.pending;if(s!==null){if(o!==null){var f=o.next;o.next=s.next,s.next=f}t.baseQueue=o=s,l.pending=null}if(s=e.baseState,o===null)e.memoizedState=s;else{t=o.next;var m=f=null,A=null,P=t,ae=!1;do{var fe=P.lane&-536870913;if(fe!==P.lane?(Bt&fe)===fe:(Vi&fe)===fe){var L=P.revertLane;if(L===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),fe===Bi&&(ae=!0);else if((Vi&L)===L){P=P.next,L===Bi&&(ae=!0);continue}else fe={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(m=A=fe,f=s):A=A.next=fe,xt.lanes|=L,Co|=L;fe=P.action,Yi&&n(s,fe),s=P.hasEagerState?P.eagerState:n(s,fe)}else L={lane:fe,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(m=A=L,f=s):A=A.next=L,xt.lanes|=fe,Co|=fe;P=P.next}while(P!==null&&P!==t);if(A===null?f=s:A.next=m,!Tn(s,e.memoizedState)&&(Wn=!0,ae&&(n=sa,n!==null)))throw n;e.memoizedState=s,e.baseState=f,e.baseQueue=A,l.lastRenderedState=s}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function G(e){var t=y(),n=t.queue;if(n===null)throw Error(g(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do s=e(s,f.action),f=f.next;while(f!==o);Tn(s,t.memoizedState)||(Wn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function re(e,t,n){var l=xt,o=y(),s=ft;if(s){if(n===void 0)throw Error(g(407));n=n()}else n=t();var f=!Tn((Yt||o).memoizedState,n);if(f&&(o.memoizedState=n,Wn=!0),o=o.queue,st(F.bind(null,l,o,e),[e]),o.getSnapshot!==t||f||Rn!==null&&Rn.memoizedState.tag&1){if(l.flags|=2048,Fe(9,{destroy:void 0},Q.bind(null,l,o,n,t),null),an===null)throw Error(g(349));s||(Vi&127)!==0||I(l,t,n)}return n}function I(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xt.updateQueue,t===null?(t=b(),xt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Q(e,t,n,l){t.value=n,t.getSnapshot=l,V(t)&&le(e)}function F(e,t,n){return n(function(){V(t)&&le(e)})}function V(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Tn(e,n)}catch{return!0}}function le(e){var t=Ml(e,2);t!==null&&Xl(t,e,2)}function ie(e){var t=h();if(typeof e=="function"){var n=e;if(e=n(),Yi){ol(!0);try{n()}finally{ol(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z,lastRenderedState:e},t}function ge(e,t,n,l){return e.baseState=n,q(e,Yt,typeof l=="function"?l:z)}function ye(e,t,n,l,o){if(Yc(e))throw Error(g(485));if(e=t.action,e!==null){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){s.listeners.push(f)}};U.T!==null?n(!0):s.isTransition=!1,l(s),n=t.pending,n===null?(s.next=t.pending=s,xe(t,s)):(s.next=n.next,t.pending=n.next=s)}}function xe(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var s=U.T,f={};U.T=f;try{var m=n(o,l),A=U.S;A!==null&&A(f,m),_e(e,t,m)}catch(P){_(e,t,P)}finally{s!==null&&f.types!==null&&(s.types=f.types),U.T=s}}else try{s=n(o,l),_e(e,t,s)}catch(P){_(e,t,P)}}function _e(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){ze(e,t,l)},function(l){return _(e,t,l)}):ze(e,t,n)}function ze(e,t,n){t.status="fulfilled",t.value=n,D(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,xe(e,n)))}function _(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,D(t),t=t.next;while(t!==l)}e.action=null}function D(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function te(e,t){return t}function se(e,t){if(ft){var n=an.formState;if(n!==null){e:{var l=xt;if(ft){if(Mt){t:{for(var o=Mt,s=Ol;o.nodeType!==8;){if(!s){o=null;break t}if(o=wi(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){Mt=wi(o.nextSibling),l=o.data==="F!";break e}}oa(l)}l=!1}l&&(t=n[0])}}return n=h(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:te,lastRenderedState:t},n.queue=l,n=Qd.bind(null,xt,l),l.dispatch=n,l=ie(!1),s=Uu.bind(null,xt,!1,l.queue),l=h(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=ye.bind(null,xt,o,s,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function be(e){var t=y();return Ae(t,Yt,e)}function Ae(e,t,n){if(t=q(e,t,te)[0],e=C(z)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=v(t)}catch(f){throw f===Cl?fs:f}else l=t;t=y();var o=t.queue,s=o.dispatch;return n!==t.memoizedState&&(xt.flags|=2048,Fe(9,{destroy:void 0},Qe.bind(null,o,n),null)),[l,s,e]}function Qe(e,t){e.action=t}function Be(e){var t=y(),n=Yt;if(n!==null)return Ae(t,n,e);y(),t=t.memoizedState,n=y();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function Fe(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=xt.updateQueue,t===null&&(t=b(),xt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function $e(){return y().memoizedState}function Wt(e,t,n,l){var o=h();xt.flags|=e,o.memoizedState=Fe(1|t,{destroy:void 0},n,l===void 0?null:l)}function Ke(e,t,n,l){var o=y();l=l===void 0?null:l;var s=o.memoizedState.inst;Yt!==null&&l!==null&&jo(l,Yt.memoizedState.deps)?o.memoizedState=Fe(t,s,n,l):(xt.flags|=e,o.memoizedState=Fe(1|t,s,n,l))}function Ue(e,t){Wt(8390656,8,e,t)}function st(e,t){Ke(2048,8,e,t)}function rt(e){xt.flags|=4;var t=xt.updateQueue;if(t===null)t=b(),xt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function bt(e){var t=y().memoizedState;return rt({ref:t,nextImpl:e}),function(){if((Ft&2)!==0)throw Error(g(440));return t.impl.apply(void 0,arguments)}}function Et(e,t){return Ke(4,2,e,t)}function xn(e,t){return Ke(4,4,e,t)}function fn(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pt(e,t,n){n=n!=null?n.concat([e]):null,Ke(4,4,fn.bind(null,t,e),n)}function ti(){}function Si(e,t){var n=y();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&jo(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Rl(e,t){var n=y();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&jo(t,l[1]))return l[0];if(l=e(),Yi){ol(!0);try{e()}finally{ol(!1)}}return n.memoizedState=[l,t],l}function Nu(e,t,n){return n===void 0||(Vi&1073741824)!==0&&(Bt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Gf(),xt.lanes|=e,Co|=e,n)}function Fd(e,t,n,l){return Tn(n,t)?n:Hi.current!==null?(e=Nu(e,n,l),Tn(e,t)||(Wn=!0),e):(Vi&42)===0||(Vi&1073741824)!==0&&(Bt&261930)===0?(Wn=!0,e.memoizedState=n):(e=Gf(),xt.lanes|=e,Co|=e,t)}function Gd(e,t,n,l,o){var s=Z.p;Z.p=s!==0&&8>s?s:8;var f=U.T,m={};U.T=m,Uu(e,!1,t,n);try{var A=o(),P=U.S;if(P!==null&&P(m,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var ae=ku(A,l);tc(e,t,ae,ii(e))}else tc(e,t,l,ii(e))}catch(fe){tc(e,t,{then:function(){},status:"rejected",reason:fe},ii())}finally{Z.p=s,f!==null&&m.types!==null&&(f.types=m.types),U.T=f}}function bh(){}function Mu(e,t,n,l){if(e.tag!==5)throw Error(g(476));var o=Ld(e).queue;Gd(e,o,t,Te,n===null?bh:function(){return qd(e),n(l)})}function Ld(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:z,lastRenderedState:Te},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:z,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function qd(e){var t=Ld(e);t.next===null&&(t=e.alternate.memoizedState),tc(e,t.next.queue,{},ii())}function Bu(){return zn(vc)}function $d(){return y().memoizedState}function Zd(){return y().memoizedState}function mh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ii();e=Hl(n);var l=xl(t,e,n);l!==null&&(Xl(l,t,n),Oi(l,t,n)),t={cache:Fr()},e.payload=t;return}t=t.return}}function Sh(e,t,n){var l=ii();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Yc(e)?Kd(t,n):(n=as(e,t,n,l),n!==null&&(Xl(n,e,l),Jd(n,t,l)))}function Qd(e,t,n){var l=ii();tc(e,t,n,l)}function tc(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yc(e))Kd(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var f=t.lastRenderedState,m=s(f,n);if(o.hasEagerState=!0,o.eagerState=m,Tn(m,f))return ka(e,t,o,0),an===null&&Ws(),!1}catch{}finally{}if(n=as(e,t,o,l),n!==null)return Xl(n,e,l),Jd(n,t,l),!0}return!1}function Uu(e,t,n,l){if(l={lane:2,revertLane:fd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yc(e)){if(t)throw Error(g(479))}else t=as(e,n,l,2),t!==null&&Xl(t,e,2)}function Yc(e){var t=e.alternate;return e===xt||t!==null&&t===xt}function Kd(e,t){Va=$s=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jd(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Ja(e,n)}}var nc={readContext:zn,use:u,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};nc.useEffectEvent=$t;var ef={readContext:zn,use:u,useCallback:function(e,t){return h().memoizedState=[e,t===void 0?null:t],e},useContext:zn,useEffect:Ue,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Wt(4194308,4,fn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wt(4194308,4,e,t)},useInsertionEffect:function(e,t){Wt(4,2,e,t)},useMemo:function(e,t){var n=h();t=t===void 0?null:t;var l=e();if(Yi){ol(!0);try{e()}finally{ol(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=h();if(n!==void 0){var o=n(t);if(Yi){ol(!0);try{n(t)}finally{ol(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=Sh.bind(null,xt,e),[l.memoizedState,e]},useRef:function(e){var t=h();return e={current:e},t.memoizedState=e},useState:function(e){e=ie(e);var t=e.queue,n=Qd.bind(null,xt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ti,useDeferredValue:function(e,t){var n=h();return Nu(n,e,t)},useTransition:function(){var e=ie(!1);return e=Gd.bind(null,xt,e.queue,!0,!1),h().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=xt,o=h();if(ft){if(n===void 0)throw Error(g(407));n=n()}else{if(n=t(),an===null)throw Error(g(349));(Bt&127)!==0||I(l,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Ue(F.bind(null,l,s,e),[e]),l.flags|=2048,Fe(9,{destroy:void 0},Q.bind(null,l,s,n,t),null),n},useId:function(){var e=h(),t=an.identifierPrefix;if(ft){var n=Ql,l=Ul;n=(l&~(1<<32-Hn(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=wo++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Ss++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Bu,useFormState:se,useActionState:se,useOptimistic:function(e){var t=h();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Uu.bind(null,xt,!0,n),n.dispatch=t,[e,t]},useMemoCache:w,useCacheRefresh:function(){return h().memoizedState=mh.bind(null,xt)},useEffectEvent:function(e){var t=h(),n={impl:e};return t.memoizedState=n,function(){if((Ft&2)!==0)throw Error(g(440));return n.impl.apply(void 0,arguments)}}},_u={readContext:zn,use:u,useCallback:Si,useContext:zn,useEffect:st,useImperativeHandle:pt,useInsertionEffect:Et,useLayoutEffect:xn,useMemo:Rl,useReducer:C,useRef:$e,useState:function(){return C(z)},useDebugValue:ti,useDeferredValue:function(e,t){var n=y();return Fd(n,Yt.memoizedState,e,t)},useTransition:function(){var e=C(z)[0],t=y().memoizedState;return[typeof e=="boolean"?e:v(e),t]},useSyncExternalStore:re,useId:$d,useHostTransitionStatus:Bu,useFormState:be,useActionState:be,useOptimistic:function(e,t){var n=y();return ge(n,Yt,e,t)},useMemoCache:w,useCacheRefresh:Zd};_u.useEffectEvent=bt;var tf={readContext:zn,use:u,useCallback:Si,useContext:zn,useEffect:st,useImperativeHandle:pt,useInsertionEffect:Et,useLayoutEffect:xn,useMemo:Rl,useReducer:G,useRef:$e,useState:function(){return G(z)},useDebugValue:ti,useDeferredValue:function(e,t){var n=y();return Yt===null?Nu(n,e,t):Fd(n,Yt.memoizedState,e,t)},useTransition:function(){var e=G(z)[0],t=y().memoizedState;return[typeof e=="boolean"?e:v(e),t]},useSyncExternalStore:re,useId:$d,useHostTransitionStatus:Bu,useFormState:Be,useActionState:Be,useOptimistic:function(e,t){var n=y();return Yt!==null?ge(n,Yt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:w,useCacheRefresh:Zd};tf.useEffectEvent=bt;function Ou(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hu={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=ii(),o=Hl(l);o.payload=t,n!=null&&(o.callback=n),t=xl(e,o,l),t!==null&&(Xl(t,e,l),Oi(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=ii(),o=Hl(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=xl(e,o,l),t!==null&&(Xl(t,e,l),Oi(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ii(),l=Hl(n);l.tag=2,t!=null&&(l.callback=t),t=xl(e,l,n),t!==null&&(Xl(t,e,n),Oi(t,e,n))}};function nf(e,t,n,l,o,s,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,f):t.prototype&&t.prototype.isPureReactComponent?!Ko(n,l)||!Ko(o,s):!0}function lf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Hu.enqueueReplaceState(t,t.state,null)}function js(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=me({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function af(e){$l(e)}function of(e){console.error(e)}function sf(e){$l(e)}function Wc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function rf(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Eu(e,t,n){return n=Hl(n),n.tag=3,n.payload={element:null},n.callback=function(){Wc(e,t)},n}function cf(e){return e=Hl(e),e.tag=3,e}function uf(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=l.value;e.payload=function(){return o(s)},e.callback=function(){rf(t,n,l)}}var f=n.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){rf(t,n,l),typeof o!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var m=l.stack;this.componentDidCatch(l.value,{componentStack:m!==null?m:""})})}function wh(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&gi(t,n,o,!0),n=gl.current,n!==null){switch(n.tag){case 31:case 13:return yl===null?Jc():n.alternate===null&&Dn===0&&(Dn=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===Gs?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),cd(e,l,o)),!1;case 22:return n.flags|=65536,l===Gs?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),cd(e,l,o)),!1}throw Error(g(435,n.tag))}return cd(e,l,o),Jc(),!1}if(ft)return t=gl.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==Wr&&(e=Error(g(422),{cause:l}),us(fl(e,n)))):(l!==Wr&&(t=Error(g(423),{cause:l}),us(fl(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=fl(l,n),o=Eu(e.stateNode,l,o),gs(e,o),Dn!==4&&(Dn=2)),!1;var s=Error(g(520),{cause:l});if(s=fl(s,n),uc===null?uc=[s]:uc.push(s),Dn!==4&&(Dn=2),t===null)return!0;l=fl(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Eu(n.stateNode,l,e),gs(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ro===null||!Ro.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=cf(o),uf(o,e,n,l),gs(n,o),!1}n=n.return}while(n!==null);return!1}var Vu=Error(g(461)),Wn=!1;function ll(e,t,n,l){t.child=e===null?Zr(t,null,n,l):ca(t,e.child,n,l)}function df(e,t,n,l,o){n=n.render;var s=t.ref;if("ref"in l){var f={};for(var m in l)m!=="ref"&&(f[m]=l[m])}else f=l;return yi(t),l=ws(e,t,n,f,s,o),m=ec(),e!==null&&!Wn?(a(e,t,o),Wa(e,t,o)):(ft&&m&&Vr(t),t.flags|=1,ll(e,t,l,o),t.child)}function ff(e,t,n,l,o){if(e===null){var s=n.type;return typeof s=="function"&&!na(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,pf(e,t,s,l,o)):(e=Bl(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Lu(e,o)){var f=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ko,n(f,l)&&e.ref===t.ref)return Wa(e,t,o)}return t.flags|=1,e=dl(s,l),e.ref=t.ref,e.return=t,t.child=e}function pf(e,t,n,l,o){if(e!==null){var s=e.memoizedProps;if(Ko(s,l)&&e.ref===t.ref)if(Wn=!1,t.pendingProps=l=s,Lu(e,o))(e.flags&131072)!==0&&(Wn=!0);else return t.lanes=e.lanes,Wa(e,t,o)}return Yu(e,t,n,l,o)}function hf(e,t,n,l){var o=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~s}else l=0,t.child=null;return xf(e,t,s,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ui(t,s!==null?s.cachePool:null),s!==null?Jr(t,s):ua(),qs(t);else return l=t.lanes=536870912,xf(e,t,s!==null?s.baseLanes|n:n,n,l)}else s!==null?(Ui(t,s.cachePool),Jr(t,s),mi(),t.memoizedState=null):(e!==null&&Ui(t,null),ua(),mi());return ll(e,t,o,n),t.child}function lc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function xf(e,t,n,l,o){var s=Fs();return s=s===null?null:{parent:Cn._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Ui(t,null),ua(),qs(t),e!==null&&gi(e,t,l,!0),t.childLanes=o,null}function Ic(e,t){return t=Pc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function gf(e,t,n){return ca(t,e.child,null,n),e=Ic(t,t.pendingProps),e.flags|=2,Ln(t),t.memoizedState=null,e}function jh(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ft){if(l.mode==="hidden")return e=Ic(t,l),t.lanes=536870912,lc(null,e);if(da(t),(e=Mt)?(e=Dp(e,Ol),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zl!==null?{id:Ul,overflow:Ql}:null,retryLane:536870912,hydrationErrors:null},n=Xs(e),n.return=t,t.child=n,Yn=t,Mt=null)):e=null,e===null)throw oa(t);return t.lanes=536870912,null}return Ic(t,l)}var s=e.memoizedState;if(s!==null){var f=s.dehydrated;if(da(t),o)if(t.flags&256)t.flags&=-257,t=gf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(g(558));else if(Wn||gi(e,t,n,!1),o=(n&e.childLanes)!==0,Wn||o){if(l=an,l!==null&&(f=cn(l,n),f!==0&&f!==s.retryLane))throw s.retryLane=f,Ml(e,f),Xl(l,e,f),Vu;Jc(),t=gf(e,t,n)}else e=s.treeContext,Mt=wi(f.nextSibling),Yn=t,ft=!0,aa=null,Ol=!1,e!==null&&Bc(t,e),t=Ic(t,l),t.flags|=4096;return t}return e=dl(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Xc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(g(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Yu(e,t,n,l,o){return yi(t),n=ws(e,t,n,l,void 0,o),l=ec(),e!==null&&!Wn?(a(e,t,o),Wa(e,t,o)):(ft&&l&&Vr(t),t.flags|=1,ll(e,t,n,o),t.child)}function yf(e,t,n,l,o,s){return yi(t),t.updateQueue=null,n=Vc(t,l,n,o),Zs(e),l=ec(),e!==null&&!Wn?(a(e,t,s),Wa(e,t,s)):(ft&&l&&Vr(t),t.flags|=1,ll(e,t,n,s),t.child)}function vf(e,t,n,l,o){if(yi(t),t.stateNode===null){var s=po,f=n.contextType;typeof f=="object"&&f!==null&&(s=zn(f)),s=new n(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Hu,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},Ea(t),f=n.contextType,s.context=typeof f=="object"&&f!==null?zn(f):po,s.state=t.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(Ou(t,n,f,l),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(f=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),f!==s.state&&Hu.enqueueReplaceState(s,s.state,null),bs(t,l,s,o),vs(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var m=t.memoizedProps,A=js(n,m);s.props=A;var P=s.context,ae=n.contextType;f=po,typeof ae=="object"&&ae!==null&&(f=zn(ae));var fe=n.getDerivedStateFromProps;ae=typeof fe=="function"||typeof s.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,ae||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(m||P!==f)&&lf(t,s,l,f),_i=!1;var L=t.memoizedState;s.state=L,bs(t,l,s,o),vs(),P=t.memoizedState,m||L!==P||_i?(typeof fe=="function"&&(Ou(t,n,fe,l),P=t.memoizedState),(A=_i||nf(t,n,A,l,L,P,f))?(ae||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=P),s.props=l,s.state=P,s.context=f,l=A):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,xs(e,t),f=t.memoizedProps,ae=js(n,f),s.props=ae,fe=t.pendingProps,L=s.context,P=n.contextType,A=po,typeof P=="object"&&P!==null&&(A=zn(P)),m=n.getDerivedStateFromProps,(P=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(f!==fe||L!==A)&&lf(t,s,l,A),_i=!1,L=t.memoizedState,s.state=L,bs(t,l,s,o),vs();var J=t.memoizedState;f!==fe||L!==J||_i||e!==null&&e.dependencies!==null&&Ha(e.dependencies)?(typeof m=="function"&&(Ou(t,n,m,l),J=t.memoizedState),(ae=_i||nf(t,n,ae,l,L,J,A)||e!==null&&e.dependencies!==null&&Ha(e.dependencies))?(P||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,J,A),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,J,A)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||f===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=J),s.props=l,s.state=J,s.context=A,l=ae):(typeof s.componentDidUpdate!="function"||f===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,Xc(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=ca(t,e.child,null,o),t.child=ca(t,null,n,o)):ll(e,t,n,o),t.memoizedState=s.state,e=t.child):e=Wa(e,t,o),e}function bf(e,t,n,l){return Ua(),t.flags|=256,ll(e,t,n,l),t.child}var Wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Iu(e){return{baseLanes:e,cachePool:qr()}}function Xu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=li),e}function mf(e,t,n){var l=t.pendingProps,o=!1,s=(t.flags&128)!==0,f;if((f=s)||(f=e!==null&&e.memoizedState===null?!1:(Sn.current&2)!==0),f&&(o=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(ft){if(o?mn(t):mi(),(e=Mt)?(e=Dp(e,Ol),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Zl!==null?{id:Ul,overflow:Ql}:null,retryLane:536870912,hydrationErrors:null},n=Xs(e),n.return=t,t.child=n,Yn=t,Mt=null)):e=null,e===null)throw oa(t);return zd(e)?t.lanes=32:t.lanes=536870912,null}var m=l.children;return l=l.fallback,o?(mi(),o=t.mode,m=Pc({mode:"hidden",children:m},o),l=Ni(l,o,n,null),m.return=t,l.return=t,m.sibling=l,t.child=m,l=t.child,l.memoizedState=Iu(n),l.childLanes=Xu(e,f,n),t.memoizedState=Wu,lc(null,l)):(mn(t),Pu(t,m))}var A=e.memoizedState;if(A!==null&&(m=A.dehydrated,m!==null)){if(s)t.flags&256?(mn(t),t.flags&=-257,t=Fu(e,t,n)):t.memoizedState!==null?(mi(),t.child=e.child,t.flags|=128,t=null):(mi(),m=l.fallback,o=t.mode,l=Pc({mode:"visible",children:l.children},o),m=Ni(m,o,n,null),m.flags|=2,l.return=t,m.return=t,l.sibling=m,t.child=l,ca(t,e.child,null,n),l=t.child,l.memoizedState=Iu(n),l.childLanes=Xu(e,f,n),t.memoizedState=Wu,t=lc(null,l));else if(mn(t),zd(m)){if(f=m.nextSibling&&m.nextSibling.dataset,f)var P=f.dgst;f=P,l=Error(g(419)),l.stack="",l.digest=f,us({value:l,source:null,stack:null}),t=Fu(e,t,n)}else if(Wn||gi(e,t,n,!1),f=(n&e.childLanes)!==0,Wn||f){if(f=an,f!==null&&(l=cn(f,n),l!==0&&l!==A.retryLane))throw A.retryLane=l,Ml(e,l),Xl(f,e,l),Vu;Td(m)||Jc(),t=Fu(e,t,n)}else Td(m)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,Mt=wi(m.nextSibling),Yn=t,ft=!0,aa=null,Ol=!1,e!==null&&Bc(t,e),t=Pu(t,l.children),t.flags|=4096);return t}return o?(mi(),m=l.fallback,o=t.mode,A=e.child,P=A.sibling,l=dl(A,{mode:"hidden",children:l.children}),l.subtreeFlags=A.subtreeFlags&65011712,P!==null?m=dl(P,m):(m=Ni(m,o,n,null),m.flags|=2),m.return=t,l.return=t,l.sibling=m,t.child=l,lc(null,l),l=t.child,m=e.child.memoizedState,m===null?m=Iu(n):(o=m.cachePool,o!==null?(A=Cn._currentValue,o=o.parent!==A?{parent:A,pool:A}:o):o=qr(),m={baseLanes:m.baseLanes|n,cachePool:o}),l.memoizedState=m,l.childLanes=Xu(e,f,n),t.memoizedState=Wu,lc(e.child,l)):(mn(t),n=e.child,e=n.sibling,n=dl(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=n,t.memoizedState=null,n)}function Pu(e,t){return t=Pc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Pc(e,t){return e=nl(22,e,null,t),e.lanes=0,e}function Fu(e,t,n){return ca(t,e.child,null,n),e=Pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Sf(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),xo(e.return,t,n)}function Gu(e,t,n,l,o,s){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:s}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=n,f.tailMode=o,f.treeForkCount=s)}function wf(e,t,n){var l=t.pendingProps,o=l.revealOrder,s=l.tail;l=l.children;var f=Sn.current,m=(f&2)!==0;if(m?(f=f&1|2,t.flags|=128):f&=1,ue(Sn,f),ll(e,t,l,n),l=ft?Ba:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sf(e,n,t);else if(e.tag===19)Sf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&fa(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Gu(t,!1,o,n,s,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&fa(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Gu(t,!0,n,null,s,l);break;case"together":Gu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Wa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Co|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(gi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(g(153));if(t.child!==null){for(e=t.child,n=dl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Lu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ha(e)))}function Th(e,t,n){switch(t.tag){case 3:yn(t,t.stateNode.containerInfo),zl(t,Cn,e.memoizedState.cache),Ua();break;case 27:case 5:oi(t);break;case 4:yn(t,t.stateNode.containerInfo);break;case 10:zl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,da(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(mn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?mf(e,t,n):(mn(t),e=Wa(e,t,n),e!==null?e.sibling:null);mn(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(gi(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return wf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ue(Sn,Sn.current),l)break;return null;case 22:return t.lanes=0,hf(e,t,n,t.pendingProps);case 24:zl(t,Cn,e.memoizedState.cache)}return Wa(e,t,n)}function jf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Wn=!0;else{if(!Lu(e,n)&&(t.flags&128)===0)return Wn=!1,Th(e,t,n);Wn=(e.flags&131072)!==0}else Wn=!1,ft&&(t.flags&1048576)!==0&&Er(t,Ba,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=vi(t.elementType),t.type=e,typeof e=="function")na(e)?(l=js(e,l),t.tag=1,t=vf(null,t,e,l,n)):(t.tag=0,t=Yu(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===M){t.tag=11,t=df(null,t,e,l,n);break e}else if(o===p){t.tag=14,t=ff(null,t,e,l,n);break e}}throw t=_t(e)||e,Error(g(306,t,""))}}return t;case 0:return Yu(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=js(l,t.pendingProps),vf(e,t,l,o,n);case 3:e:{if(yn(t,t.stateNode.containerInfo),e===null)throw Error(g(387));l=t.pendingProps;var s=t.memoizedState;o=s.element,xs(e,t),bs(t,l,null,n);var f=t.memoizedState;if(l=f.cache,zl(t,Cn,l),l!==s.cache&&Oa(t,[Cn],n,!0),vs(),l=f.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=bf(e,t,l,n);break e}else if(l!==o){o=fl(Error(g(424)),t),us(o),t=bf(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Mt=wi(e.firstChild),Yn=t,ft=!0,aa=null,Ol=!0,n=Zr(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ua(),l===o){t=Wa(e,t,n);break e}ll(e,t,l,n)}t=t.child}return t;case 26:return Xc(e,t),e===null?(n=Up(t.type,null,t.pendingProps,null))?t.memoizedState=n:ft||(n=t.type,e=t.pendingProps,l=ou(ht.current).createElement(n),l[En]=t,l[un]=e,il(l,n,e),kn(l),t.stateNode=l):t.memoizedState=Up(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return oi(t),e===null&&ft&&(l=t.stateNode=Np(t.type,t.pendingProps,ht.current),Yn=t,Ol=!0,o=Mt,No(t.type)?(Cd=o,Mt=wi(l.firstChild)):Mt=o),ll(e,t,t.pendingProps.children,n),Xc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ft&&((o=l=Mt)&&(l=ex(l,t.type,t.pendingProps,Ol),l!==null?(t.stateNode=l,Yn=t,Mt=wi(l.firstChild),Ol=!1,o=!0):o=!1),o||oa(t)),oi(t),o=t.type,s=t.pendingProps,f=e!==null?e.memoizedProps:null,l=s.children,Sd(o,s)?l=null:f!==null&&Sd(o,f)&&(t.flags|=32),t.memoizedState!==null&&(o=ws(e,t,tt,null,null,n),vc._currentValue=o),Xc(e,t),ll(e,t,l,n),t.child;case 6:return e===null&&ft&&((e=n=Mt)&&(n=tx(n,t.pendingProps,Ol),n!==null?(t.stateNode=n,Yn=t,Mt=null,e=!0):e=!1),e||oa(t)),null;case 13:return mf(e,t,n);case 4:return yn(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ca(t,null,l,n):ll(e,t,l,n),t.child;case 11:return df(e,t,t.type,t.pendingProps,n);case 7:return ll(e,t,t.pendingProps,n),t.child;case 8:return ll(e,t,t.pendingProps.children,n),t.child;case 12:return ll(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,zl(t,t.type,l.value),ll(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,yi(t),o=zn(o),l=l(o),t.flags|=1,ll(e,t,l,n),t.child;case 14:return ff(e,t,t.type,t.pendingProps,n);case 15:return pf(e,t,t.type,t.pendingProps,n);case 19:return wf(e,t,n);case 31:return jh(e,t,n);case 22:return hf(e,t,n,t.pendingProps);case 24:return yi(t),l=zn(Cn),e===null?(o=Fs(),o===null&&(o=an,s=Fr(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:l,cache:o},Ea(t),zl(t,Cn,o)):((e.lanes&n)!==0&&(xs(e,t),bs(t,null,null,n),vs()),o=e.memoizedState,s=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),zl(t,Cn,l)):(l=s.cache,zl(t,Cn,l),l!==o.cache&&Oa(t,[Cn],n,!0))),ll(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(g(156,t.tag))}function Ia(e){e.flags|=4}function qu(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Zf())e.flags|=8192;else throw ra=Gs,ds}else e.flags&=-16777217}function Tf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Vp(t))if(Zf())e.flags|=8192;else throw ra=Gs,ds}function Fc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ka():536870912,e.lanes|=t,er|=t)}function ic(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function pn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function zh(e,t,n){var l=t.pendingProps;switch(Yr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(t),null;case 1:return pn(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),pl(Cn),Ot(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ho(t)?Ia(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ir())),pn(t),null;case 26:var o=t.type,s=t.memoizedState;return e===null?(Ia(t),s!==null?(pn(t),Tf(t,s)):(pn(t),qu(t,o,null,l,n))):s?s!==e.memoizedState?(Ia(t),pn(t),Tf(t,s)):(pn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Ia(t),pn(t),qu(t,o,e,l,n)),null;case 27:if(al(t),n=ht.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ia(t);else{if(!l){if(t.stateNode===null)throw Error(g(166));return pn(t),null}e=Re.current,ho(t)?Uc(t):(e=Np(o,l,n),t.stateNode=e,Ia(t))}return pn(t),null;case 5:if(al(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Ia(t);else{if(!l){if(t.stateNode===null)throw Error(g(166));return pn(t),null}if(s=Re.current,ho(t))Uc(t);else{var f=ou(ht.current);switch(s){case 1:s=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=f.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?f.createElement(o,{is:l.is}):f.createElement(o)}}s[En]=t,s[un]=l;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)s.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=s;e:switch(il(s,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ia(t)}}return pn(t),qu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Ia(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(g(166));if(e=ht.current,ho(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=Yn,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[En]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||mp(e.nodeValue,n)),e||oa(t,!0)}else e=ou(e).createTextNode(l),e[En]=t,t.stateNode=e}return pn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=ho(t),n!==null){if(e===null){if(!l)throw Error(g(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(g(557));e[En]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pn(t),e=!1}else n=Ir(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Ln(t),t):(Ln(t),null);if((t.flags&128)!==0)throw Error(g(558))}return pn(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=ho(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(g(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(g(317));o[En]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pn(t),o=!1}else o=Ir(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Ln(t),t):(Ln(t),null)}return Ln(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Fc(t,t.updateQueue),pn(t),null);case 4:return Ot(),e===null&&gd(t.stateNode.containerInfo),pn(t),null;case 10:return pl(t.type),pn(t),null;case 19:if(E(Sn),l=t.memoizedState,l===null)return pn(t),null;if(o=(t.flags&128)!==0,s=l.rendering,s===null)if(o)ic(l,!1);else{if(Dn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=fa(e),s!==null){for(t.flags|=128,ic(l,!1),e=s.updateQueue,t.updateQueue=e,Fc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ss(n,e),n=n.sibling;return ue(Sn,Sn.current&1|2),ft&&_l(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&ke()>Zc&&(t.flags|=128,o=!0,ic(l,!1),t.lanes=4194304)}else{if(!o)if(e=fa(s),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Fc(t,e),ic(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!ft)return pn(t),null}else 2*ke()-l.renderingStartTime>Zc&&n!==536870912&&(t.flags|=128,o=!0,ic(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ke(),e.sibling=null,n=Sn.current,ue(Sn,o?n&1|2:n&1),ft&&_l(t,l.treeForkCount),e):(pn(t),null);case 22:case 23:return Ln(t),Ei(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(pn(t),t.subtreeFlags&6&&(t.flags|=8192)):pn(t),n=t.updateQueue,n!==null&&Fc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&E(hl),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),pl(Cn),pn(t),null;case 25:return null;case 30:return null}throw Error(g(156,t.tag))}function Ch(e,t){switch(Yr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pl(Cn),Ot(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return al(t),null;case 31:if(t.memoizedState!==null){if(Ln(t),t.alternate===null)throw Error(g(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ln(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(g(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return E(Sn),null;case 4:return Ot(),null;case 10:return pl(t.type),null;case 22:case 23:return Ln(t),Ei(),e!==null&&E(hl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return pl(Cn),null;case 25:return null;default:return null}}function zf(e,t){switch(Yr(t),t.tag){case 3:pl(Cn),Ot();break;case 26:case 27:case 5:al(t);break;case 4:Ot();break;case 31:t.memoizedState!==null&&Ln(t);break;case 13:Ln(t);break;case 19:E(Sn);break;case 10:pl(t.type);break;case 22:case 23:Ln(t),Ei(),e!==null&&E(hl);break;case 24:pl(Cn)}}function ac(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var s=n.create,f=n.inst;l=s(),f.destroy=l}n=n.next}while(n!==o)}}catch(m){Qt(t,t.return,m)}}function To(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var s=o.next;l=s;do{if((l.tag&e)===e){var f=l.inst,m=f.destroy;if(m!==void 0){f.destroy=void 0,o=t;var A=n,P=m;try{P()}catch(ae){Qt(o,A,ae)}}}l=l.next}while(l!==s)}}catch(ae){Qt(t,t.return,ae)}}function Cf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Kr(t,n)}catch(l){Qt(e,e.return,l)}}}function Rf(e,t,n){n.props=js(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Qt(e,t,l)}}function oc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){Qt(e,t,o)}}function pa(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){Qt(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Qt(e,t,o)}else n.current=null}function Df(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){Qt(e,e.return,o)}}function $u(e,t,n){try{var l=e.stateNode;qh(l,e.type,n,t),l[un]=t}catch(o){Qt(e,e.return,o)}}function Af(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&No(e.type)||e.tag===4}function Zu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Af(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&No(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qu(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Mn));else if(l!==4&&(l===27&&No(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Qu(e,t,n),e=e.sibling;e!==null;)Qu(e,t,n),e=e.sibling}function Gc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&No(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Gc(e,t,n),e=e.sibling;e!==null;)Gc(e,t,n),e=e.sibling}function kf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);il(t,l,n),t[En]=e,t[un]=n}catch(s){Qt(e,e.return,s)}}var Xa=!1,In=!1,Ku=!1,Nf=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function Rh(e,t){if(e=e.containerInfo,bd=pu,e=es(e),ts(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var f=0,m=-1,A=-1,P=0,ae=0,fe=e,L=null;t:for(;;){for(var J;fe!==n||o!==0&&fe.nodeType!==3||(m=f+o),fe!==s||l!==0&&fe.nodeType!==3||(A=f+l),fe.nodeType===3&&(f+=fe.nodeValue.length),(J=fe.firstChild)!==null;)L=fe,fe=J;for(;;){if(fe===e)break t;if(L===n&&++P===o&&(m=f),L===s&&++ae===l&&(A=f),(J=fe.nextSibling)!==null)break;fe=L,L=fe.parentNode}fe=J}n=m===-1||A===-1?null:{start:m,end:A}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},pu=!1,Kn=t;Kn!==null;)if(t=Kn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Kn=e;else for(;Kn!==null;){switch(t=Kn,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,o=s.memoizedProps,s=s.memoizedState,l=n.stateNode;try{var We=js(n.type,o);e=l.getSnapshotBeforeUpdate(We,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(nt){Qt(n,n.return,nt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)jd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(g(163))}if(e=t.sibling,e!==null){e.return=t.return,Kn=e;break}Kn=t.return}}function Mf(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Fa(e,n),l&4&&ac(5,n);break;case 1:if(Fa(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(f){Qt(n,n.return,f)}else{var o=js(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Qt(n,n.return,f)}}l&64&&Cf(n),l&512&&oc(n,n.return);break;case 3:if(Fa(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Kr(e,t)}catch(f){Qt(n,n.return,f)}}break;case 27:t===null&&l&4&&kf(n);case 26:case 5:Fa(e,n),t===null&&l&4&&Df(n),l&512&&oc(n,n.return);break;case 12:Fa(e,n);break;case 31:Fa(e,n),l&4&&_f(e,n);break;case 13:Fa(e,n),l&4&&Of(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Oh.bind(null,n),nx(e,n))));break;case 22:if(l=n.memoizedState!==null||Xa,!l){t=t!==null&&t.memoizedState!==null||In,o=Xa;var s=In;Xa=l,(In=t)&&!s?Ga(e,n,(n.subtreeFlags&8772)!==0):Fa(e,n),Xa=o,In=s}break;case 30:break;default:Fa(e,n)}}function Bf(e){var t=e.alternate;t!==null&&(e.alternate=null,Bf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&qi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var gn=null,Vl=!1;function Pa(e,t,n){for(n=n.child;n!==null;)Uf(e,t,n),n=n.sibling}function Uf(e,t,n){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(ci,n)}catch{}switch(n.tag){case 26:In||pa(n,t),Pa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:In||pa(n,t);var l=gn,o=Vl;No(n.type)&&(gn=n.stateNode,Vl=!1),Pa(e,t,n),xc(n.stateNode),gn=l,Vl=o;break;case 5:In||pa(n,t);case 6:if(l=gn,o=Vl,gn=null,Pa(e,t,n),gn=l,Vl=o,gn!==null)if(Vl)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(n.stateNode)}catch(s){Qt(n,t,s)}else try{gn.removeChild(n.stateNode)}catch(s){Qt(n,t,s)}break;case 18:gn!==null&&(Vl?(e=gn,Cp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),rr(e)):Cp(gn,n.stateNode));break;case 4:l=gn,o=Vl,gn=n.stateNode.containerInfo,Vl=!0,Pa(e,t,n),gn=l,Vl=o;break;case 0:case 11:case 14:case 15:To(2,n,t),In||To(4,n,t),Pa(e,t,n);break;case 1:In||(pa(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Rf(n,t,l)),Pa(e,t,n);break;case 21:Pa(e,t,n);break;case 22:In=(l=In)||n.memoizedState!==null,Pa(e,t,n),In=l;break;default:Pa(e,t,n)}}function _f(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{rr(e)}catch(n){Qt(t,t.return,n)}}}function Of(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{rr(e)}catch(n){Qt(t,t.return,n)}}function Dh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nf),t;default:throw Error(g(435,e.tag))}}function Lc(e,t){var n=Dh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=Hh.bind(null,e,l);l.then(o,o)}})}function Yl(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],s=e,f=t,m=f;e:for(;m!==null;){switch(m.tag){case 27:if(No(m.type)){gn=m.stateNode,Vl=!1;break e}break;case 5:gn=m.stateNode,Vl=!1;break e;case 3:case 4:gn=m.stateNode.containerInfo,Vl=!0;break e}m=m.return}if(gn===null)throw Error(g(160));Uf(s,f,o),gn=null,Vl=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Hf(t,e),t=t.sibling}var Wi=null;function Hf(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Yl(t,e),Wl(e),l&4&&(To(3,e,e.return),ac(3,e),To(5,e,e.return));break;case 1:Yl(t,e),Wl(e),l&512&&(In||n===null||pa(n,n.return)),l&64&&Xa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=Wi;if(Yl(t,e),Wl(e),l&512&&(In||n===null||pa(n,n.return)),l&4){var s=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":s=o.getElementsByTagName("title")[0],(!s||s[ui]||s[En]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(l),o.head.insertBefore(s,o.querySelector("head > title"))),il(s,l,n),s[En]=e,kn(s),l=s;break e;case"link":var f=Hp("link","href",o).get(l+(n.href||""));if(f){for(var m=0;m<f.length;m++)if(s=f[m],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){f.splice(m,1);break t}}s=o.createElement(l),il(s,l,n),o.head.appendChild(s);break;case"meta":if(f=Hp("meta","content",o).get(l+(n.content||""))){for(m=0;m<f.length;m++)if(s=f[m],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){f.splice(m,1);break t}}s=o.createElement(l),il(s,l,n),o.head.appendChild(s);break;default:throw Error(g(468,l))}s[En]=e,kn(s),l=s}e.stateNode=l}else Ep(o,e.type,e.stateNode);else e.stateNode=Op(o,l,e.memoizedProps);else s!==l?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,l===null?Ep(o,e.type,e.stateNode):Op(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&$u(e,e.memoizedProps,n.memoizedProps)}break;case 27:Yl(t,e),Wl(e),l&512&&(In||n===null||pa(n,n.return)),n!==null&&l&4&&$u(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Yl(t,e),Wl(e),l&512&&(In||n===null||pa(n,n.return)),e.flags&32){o=e.stateNode;try{di(o,"")}catch(We){Qt(e,e.return,We)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,$u(e,o,n!==null?n.memoizedProps:o)),l&1024&&(Ku=!0);break;case 6:if(Yl(t,e),Wl(e),l&4){if(e.stateNode===null)throw Error(g(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(We){Qt(e,e.return,We)}}break;case 3:if(cu=null,o=Wi,Wi=su(t.containerInfo),Yl(t,e),Wi=o,Wl(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{rr(t.containerInfo)}catch(We){Qt(e,e.return,We)}Ku&&(Ku=!1,Ef(e));break;case 4:l=Wi,Wi=su(e.stateNode.containerInfo),Yl(t,e),Wl(e),Wi=l;break;case 12:Yl(t,e),Wl(e);break;case 31:Yl(t,e),Wl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lc(e,l)));break;case 13:Yl(t,e),Wl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&($c=ke()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lc(e,l)));break;case 22:o=e.memoizedState!==null;var A=n!==null&&n.memoizedState!==null,P=Xa,ae=In;if(Xa=P||o,In=ae||A,Yl(t,e),In=ae,Xa=P,Wl(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||A||Xa||In||Ts(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){A=n=t;try{if(s=A.stateNode,o)f=s.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{m=A.stateNode;var fe=A.memoizedProps.style,L=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;m.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(We){Qt(A,A.return,We)}}}else if(t.tag===6){if(n===null){A=t;try{A.stateNode.nodeValue=o?"":A.memoizedProps}catch(We){Qt(A,A.return,We)}}}else if(t.tag===18){if(n===null){A=t;try{var J=A.stateNode;o?Rp(J,!0):Rp(A.stateNode,!1)}catch(We){Qt(A,A.return,We)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Lc(e,n))));break;case 19:Yl(t,e),Wl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Lc(e,l)));break;case 30:break;case 21:break;default:Yl(t,e),Wl(e)}}function Wl(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Af(l)){n=l;break}l=l.return}if(n==null)throw Error(g(160));switch(n.tag){case 27:var o=n.stateNode,s=Zu(e);Gc(e,s,o);break;case 5:var f=n.stateNode;n.flags&32&&(di(f,""),n.flags&=-33);var m=Zu(e);Gc(e,m,f);break;case 3:case 4:var A=n.stateNode.containerInfo,P=Zu(e);Qu(e,P,A);break;default:throw Error(g(161))}}catch(ae){Qt(e,e.return,ae)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ef(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ef(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Fa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Mf(e,t.alternate,t),t=t.sibling}function Ts(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:To(4,t,t.return),Ts(t);break;case 1:pa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Rf(t,t.return,n),Ts(t);break;case 27:xc(t.stateNode);case 26:case 5:pa(t,t.return),Ts(t);break;case 22:t.memoizedState===null&&Ts(t);break;case 30:Ts(t);break;default:Ts(t)}e=e.sibling}}function Ga(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,s=t,f=s.flags;switch(s.tag){case 0:case 11:case 15:Ga(o,s,n),ac(4,s);break;case 1:if(Ga(o,s,n),l=s,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(P){Qt(l,l.return,P)}if(l=s,o=l.updateQueue,o!==null){var m=l.stateNode;try{var A=o.shared.hiddenCallbacks;if(A!==null)for(o.shared.hiddenCallbacks=null,o=0;o<A.length;o++)Qr(A[o],m)}catch(P){Qt(l,l.return,P)}}n&&f&64&&Cf(s),oc(s,s.return);break;case 27:kf(s);case 26:case 5:Ga(o,s,n),n&&l===null&&f&4&&Df(s),oc(s,s.return);break;case 12:Ga(o,s,n);break;case 31:Ga(o,s,n),n&&f&4&&_f(o,s);break;case 13:Ga(o,s,n),n&&f&4&&Of(o,s);break;case 22:s.memoizedState===null&&Ga(o,s,n),oc(s,s.return);break;case 30:break;default:Ga(o,s,n)}t=t.sibling}}function Ju(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&vo(n))}function ed(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vo(e))}function Ii(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vf(e,t,n,l),t=t.sibling}function Vf(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Ii(e,t,n,l),o&2048&&ac(9,t);break;case 1:Ii(e,t,n,l);break;case 3:Ii(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&vo(e)));break;case 12:if(o&2048){Ii(e,t,n,l),e=t.stateNode;try{var s=t.memoizedProps,f=s.id,m=s.onPostCommit;typeof m=="function"&&m(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Qt(t,t.return,A)}}else Ii(e,t,n,l);break;case 31:Ii(e,t,n,l);break;case 13:Ii(e,t,n,l);break;case 23:break;case 22:s=t.stateNode,f=t.alternate,t.memoizedState!==null?s._visibility&2?Ii(e,t,n,l):sc(e,t):s._visibility&2?Ii(e,t,n,l):(s._visibility|=2,Qs(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Ju(f,t);break;case 24:Ii(e,t,n,l),o&2048&&ed(t.alternate,t);break;default:Ii(e,t,n,l)}}function Qs(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,f=t,m=n,A=l,P=f.flags;switch(f.tag){case 0:case 11:case 15:Qs(s,f,m,A,o),ac(8,f);break;case 23:break;case 22:var ae=f.stateNode;f.memoizedState!==null?ae._visibility&2?Qs(s,f,m,A,o):sc(s,f):(ae._visibility|=2,Qs(s,f,m,A,o)),o&&P&2048&&Ju(f.alternate,f);break;case 24:Qs(s,f,m,A,o),o&&P&2048&&ed(f.alternate,f);break;default:Qs(s,f,m,A,o)}t=t.sibling}}function sc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:sc(n,l),o&2048&&Ju(l.alternate,l);break;case 24:sc(n,l),o&2048&&ed(l.alternate,l);break;default:sc(n,l)}t=t.sibling}}var rc=8192;function Ks(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;e!==null;)Yf(e,t,n),e=e.sibling}function Yf(e,t,n){switch(e.tag){case 26:Ks(e,t,n),e.flags&rc&&e.memoizedState!==null&&hx(n,Wi,e.memoizedState,e.memoizedProps);break;case 5:Ks(e,t,n);break;case 3:case 4:var l=Wi;Wi=su(e.stateNode.containerInfo),Ks(e,t,n),Wi=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=rc,rc=16777216,Ks(e,t,n),rc=l):Ks(e,t,n));break;default:Ks(e,t,n)}}function Wf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function cc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Kn=l,Xf(l,e)}Wf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)If(e),e=e.sibling}function If(e){switch(e.tag){case 0:case 11:case 15:cc(e),e.flags&2048&&To(9,e,e.return);break;case 3:cc(e);break;case 12:cc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,qc(e)):cc(e);break;default:cc(e)}}function qc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Kn=l,Xf(l,e)}Wf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:To(8,t,t.return),qc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,qc(t));break;default:qc(t)}e=e.sibling}}function Xf(e,t){for(;Kn!==null;){var n=Kn;switch(n.tag){case 0:case 11:case 15:To(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:vo(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,Kn=l;else e:for(n=e;Kn!==null;){l=Kn;var o=l.sibling,s=l.return;if(Bf(l),l===n){Kn=null;break e}if(o!==null){o.return=s,Kn=o;break e}Kn=s}}}var Ah={getCacheForType:function(e){var t=zn(Cn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return zn(Cn).controller.signal}},kh=typeof WeakMap=="function"?WeakMap:Map,Ft=0,an=null,At=null,Bt=0,Zt=0,ni=null,zo=!1,Js=!1,td=!1,La=0,Dn=0,Co=0,zs=0,nd=0,li=0,er=0,uc=null,Il=null,ld=!1,$c=0,Pf=0,Zc=1/0,Qc=null,Ro=null,qn=0,Do=null,tr=null,qa=0,id=0,ad=null,Ff=null,dc=0,od=null;function ii(){return(Ft&2)!==0&&Bt!==0?Bt&-Bt:U.T!==null?fd():Pe()}function Gf(){if(li===0)if((Bt&536870912)===0||ft){var e=Se;Se<<=1,(Se&3932160)===0&&(Se=262144),li=e}else li=536870912;return e=gl.current,e!==null&&(e.flags|=32),li}function Xl(e,t,n){(e===an&&(Zt===2||Zt===9)||e.cancelPendingCommit!==null)&&(nr(e,0),Ao(e,Bt,li,!1)),pe(e,n),((Ft&2)===0||e!==an)&&(e===an&&((Ft&2)===0&&(zs|=n),Dn===4&&Ao(e,Bt,li,!1)),ha(e))}function Lf(e,t,n){if((Ft&6)!==0)throw Error(g(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||An(e,t),o=l?Bh(e,t):rd(e,t,!0),s=l;do{if(o===0){Js&&!l&&Ao(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Nh(n)){o=rd(e,t,!1),s=!1;continue}if(o===2){if(s=t,e.errorRecoveryDisabledLanes&s)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var m=e;o=uc;var A=m.current.memoizedState.isDehydrated;if(A&&(nr(m,f).flags|=256),f=rd(m,f,!1),f!==2){if(td&&!A){m.errorRecoveryDisabledLanes|=s,zs|=s,o=4;break e}s=Il,Il=o,s!==null&&(Il===null?Il=s:Il.push.apply(Il,s))}o=f}if(s=!1,o!==2)continue}}if(o===1){nr(e,0),Ao(e,t,0,!0);break}e:{switch(l=e,s=o,s){case 0:case 1:throw Error(g(345));case 4:if((t&4194048)!==t)break;case 6:Ao(l,t,li,!zo);break e;case 2:Il=null;break;case 3:case 5:break;default:throw Error(g(329))}if((t&62914560)===t&&(o=$c+300-ke(),10<o)){if(Ao(l,t,li,!zo),Lt(l,0,!0)!==0)break e;qa=t,l.timeoutHandle=Tp(qf.bind(null,l,n,Il,Qc,ld,t,li,zs,er,zo,s,"Throttled",-0,0),o);break e}qf(l,n,Il,Qc,ld,t,li,zs,er,zo,s,null,-0,0)}}break}while(!0);ha(e)}function qf(e,t,n,l,o,s,f,m,A,P,ae,fe,L,J){if(e.timeoutHandle=-1,fe=t.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mn},Yf(t,s,fe);var We=(s&62914560)===s?$c-ke():(s&4194048)===s?Pf-ke():0;if(We=xx(fe,We),We!==null){qa=s,e.cancelPendingCommit=We(np.bind(null,e,t,s,n,l,o,f,m,A,ae,fe,null,L,J)),Ao(e,s,f,!P);return}}np(e,t,s,n,l,o,f,m,A)}function Nh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],s=o.getSnapshot;o=o.value;try{if(!Tn(s(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ao(e,t,n,l){t&=~nd,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var s=31-Hn(o),f=1<<s;l[s]=-1,o&=~f}n!==0&&rn(e,n,t)}function Kc(){return(Ft&6)===0?(fc(0),!1):!0}function sd(){if(At!==null){if(Zt===0)var e=At.return;else e=At,Tl=_a=null,r(e),bi=null,ps=0,e=At;for(;e!==null;)zf(e.alternate,e),e=e.return;At=null}}function nr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Qh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),qa=0,sd(),an=e,At=n=dl(e.current,null),Bt=t,Zt=0,ni=null,zo=!1,Js=An(e,t),td=!1,er=li=nd=zs=Co=Dn=0,Il=uc=null,ld=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-Hn(l),s=1<<o;t|=e[o],l&=~s}return La=t,Ws(),n}function $f(e,t){xt=null,U.H=nc,t===Cl||t===fs?(t=Ec(),Zt=3):t===ds?(t=Ec(),Zt=4):Zt=t===Vu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ni=t,At===null&&(Dn=1,Wc(e,fl(t,e.current)))}function Zf(){var e=gl.current;return e===null?!0:(Bt&4194048)===Bt?yl===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?e===yl:!1}function Qf(){var e=U.H;return U.H=nc,e===null?nc:e}function Kf(){var e=U.A;return U.A=Ah,e}function Jc(){Dn=4,zo||(Bt&4194048)!==Bt&&gl.current!==null||(Js=!0),(Co&134217727)===0&&(zs&134217727)===0||an===null||Ao(an,Bt,li,!1)}function rd(e,t,n){var l=Ft;Ft|=2;var o=Qf(),s=Kf();(an!==e||Bt!==t)&&(Qc=null,nr(e,t)),t=!1;var f=Dn;e:do try{if(Zt!==0&&At!==null){var m=At,A=ni;switch(Zt){case 8:sd(),f=6;break e;case 3:case 2:case 9:case 6:gl.current===null&&(t=!0);var P=Zt;if(Zt=0,ni=null,lr(e,m,A,P),n&&Js){f=0;break e}break;default:P=Zt,Zt=0,ni=null,lr(e,m,A,P)}}Mh(),f=Dn;break}catch(ae){$f(e,ae)}while(!0);return t&&e.shellSuspendCounter++,Tl=_a=null,Ft=l,U.H=o,U.A=s,At===null&&(an=null,Bt=0,Ws()),f}function Mh(){for(;At!==null;)Jf(At)}function Bh(e,t){var n=Ft;Ft|=2;var l=Qf(),o=Kf();an!==e||Bt!==t?(Qc=null,Zc=ke()+500,nr(e,t)):Js=An(e,t);e:do try{if(Zt!==0&&At!==null){t=At;var s=ni;t:switch(Zt){case 1:Zt=0,ni=null,lr(e,t,s,1);break;case 2:case 9:if(Oc(s)){Zt=0,ni=null,ep(t);break}t=function(){Zt!==2&&Zt!==9||an!==e||(Zt=7),ha(e)},s.then(t,t);break e;case 3:Zt=7;break e;case 4:Zt=5;break e;case 7:Oc(s)?(Zt=0,ni=null,ep(t)):(Zt=0,ni=null,lr(e,t,s,7));break;case 5:var f=null;switch(At.tag){case 26:f=At.memoizedState;case 5:case 27:var m=At;if(f?Vp(f):m.stateNode.complete){Zt=0,ni=null;var A=m.sibling;if(A!==null)At=A;else{var P=m.return;P!==null?(At=P,eu(P)):At=null}break t}}Zt=0,ni=null,lr(e,t,s,5);break;case 6:Zt=0,ni=null,lr(e,t,s,6);break;case 8:sd(),Dn=6;break e;default:throw Error(g(462))}}Uh();break}catch(ae){$f(e,ae)}while(!0);return Tl=_a=null,U.H=l,U.A=o,Ft=n,At!==null?0:(an=null,Bt=0,Ws(),Dn)}function Uh(){for(;At!==null&&!si();)Jf(At)}function Jf(e){var t=jf(e.alternate,e,La);e.memoizedProps=e.pendingProps,t===null?eu(e):At=t}function ep(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=yf(n,t,t.pendingProps,t.type,void 0,Bt);break;case 11:t=yf(n,t,t.pendingProps,t.type.render,t.ref,Bt);break;case 5:r(t);default:zf(n,t),t=At=ss(t,La),t=jf(n,t,La)}e.memoizedProps=e.pendingProps,t===null?eu(e):At=t}function lr(e,t,n,l){Tl=_a=null,r(t),bi=null,ps=0;var o=t.return;try{if(wh(e,o,t,n,Bt)){Dn=1,Wc(e,fl(n,e.current)),At=null;return}}catch(s){if(o!==null)throw At=o,s;Dn=1,Wc(e,fl(n,e.current)),At=null;return}t.flags&32768?(ft||l===1?e=!0:Js||(Bt&536870912)!==0?e=!1:(zo=e=!0,(l===2||l===9||l===3||l===6)&&(l=gl.current,l!==null&&l.tag===13&&(l.flags|=16384))),tp(t,e)):eu(t)}function eu(e){var t=e;do{if((t.flags&32768)!==0){tp(t,zo);return}e=t.return;var n=zh(t.alternate,t,La);if(n!==null){At=n;return}if(t=t.sibling,t!==null){At=t;return}At=t=e}while(t!==null);Dn===0&&(Dn=5)}function tp(e,t){do{var n=Ch(e.alternate,e);if(n!==null){n.flags&=32767,At=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){At=e;return}At=e=n}while(e!==null);Dn=6,At=null}function np(e,t,n,l,o,s,f,m,A){e.cancelPendingCommit=null;do tu();while(qn!==0);if((Ft&6)!==0)throw Error(g(327));if(t!==null){if(t===e.current)throw Error(g(177));if(s=t.lanes|t.childLanes,s|=dt,qt(e,n,s,f,m,A),e===an&&(At=an=null,Bt=0),tr=t,Do=e,qa=n,id=s,ad=o,Ff=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Eh(ri,function(){return sp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=U.T,U.T=null,o=Z.p,Z.p=2,f=Ft,Ft|=4;try{Rh(e,t,n)}finally{Ft=f,Z.p=o,U.T=l}}qn=1,lp(),ip(),ap()}}function lp(){if(qn===1){qn=0;var e=Do,t=tr,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=U.T,U.T=null;var l=Z.p;Z.p=2;var o=Ft;Ft|=4;try{Hf(t,e);var s=md,f=es(e.containerInfo),m=s.focusedElem,A=s.selectionRange;if(f!==m&&m&&m.ownerDocument&&Nc(m.ownerDocument.documentElement,m)){if(A!==null&&ts(m)){var P=A.start,ae=A.end;if(ae===void 0&&(ae=P),"selectionStart"in m)m.selectionStart=P,m.selectionEnd=Math.min(ae,m.value.length);else{var fe=m.ownerDocument||document,L=fe&&fe.defaultView||window;if(L.getSelection){var J=L.getSelection(),We=m.textContent.length,nt=Math.min(A.start,We),nn=A.end===void 0?nt:Math.min(A.end,We);!J.extend&&nt>nn&&(f=nn,nn=nt,nt=f);var O=_r(m,nt),B=_r(m,nn);if(O&&B&&(J.rangeCount!==1||J.anchorNode!==O.node||J.anchorOffset!==O.offset||J.focusNode!==B.node||J.focusOffset!==B.offset)){var X=fe.createRange();X.setStart(O.node,O.offset),J.removeAllRanges(),nt>nn?(J.addRange(X),J.extend(B.node,B.offset)):(X.setEnd(B.node,B.offset),J.addRange(X))}}}}for(fe=[],J=m;J=J.parentNode;)J.nodeType===1&&fe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<fe.length;m++){var ce=fe[m];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}pu=!!bd,md=bd=null}finally{Ft=o,Z.p=l,U.T=n}}e.current=t,qn=2}}function ip(){if(qn===2){qn=0;var e=Do,t=tr,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=U.T,U.T=null;var l=Z.p;Z.p=2;var o=Ft;Ft|=4;try{Mf(e,t.alternate,t)}finally{Ft=o,Z.p=l,U.T=n}}qn=3}}function ap(){if(qn===4||qn===3){qn=0,ga();var e=Do,t=tr,n=qa,l=Ff;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?qn=5:(qn=0,tr=Do=null,op(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Ro=null),Cs(n),t=t.stateNode,On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(ci,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=U.T,o=Z.p,Z.p=2,U.T=null;try{for(var s=e.onRecoverableError,f=0;f<l.length;f++){var m=l[f];s(m.value,{componentStack:m.stack})}}finally{U.T=t,Z.p=o}}(qa&3)!==0&&tu(),ha(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===od?dc++:(dc=0,od=e):dc=0,fc(0)}}function op(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,vo(t)))}function tu(){return lp(),ip(),ap(),sp()}function sp(){if(qn!==5)return!1;var e=Do,t=id;id=0;var n=Cs(qa),l=U.T,o=Z.p;try{Z.p=32>n?32:n,U.T=null,n=ad,ad=null;var s=Do,f=qa;if(qn=0,tr=Do=null,qa=0,(Ft&6)!==0)throw Error(g(331));var m=Ft;if(Ft|=4,If(s.current),Vf(s,s.current,f,n),Ft=m,fc(0,!1),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(ci,s)}catch{}return!0}finally{Z.p=o,U.T=l,op(e,t)}}function rp(e,t,n){t=fl(n,t),t=Eu(e.stateNode,t,2),e=xl(e,t,2),e!==null&&(pe(e,2),ha(e))}function Qt(e,t,n){if(e.tag===3)rp(e,e,n);else for(;t!==null;){if(t.tag===3){rp(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ro===null||!Ro.has(l))){e=fl(n,e),n=cf(2),l=xl(t,n,2),l!==null&&(uf(n,l,t,e),pe(l,2),ha(l));break}}t=t.return}}function cd(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new kh;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(td=!0,o.add(n),e=_h.bind(null,e,t,n),t.then(e,e))}function _h(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,an===e&&(Bt&n)===n&&(Dn===4||Dn===3&&(Bt&62914560)===Bt&&300>ke()-$c?(Ft&2)===0&&nr(e,0):nd|=n,er===Bt&&(er=0)),ha(e)}function cp(e,t){t===0&&(t=Ka()),e=Ml(e,t),e!==null&&(pe(e,t),ha(e))}function Oh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cp(e,n)}function Hh(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(g(314))}l!==null&&l.delete(t),cp(e,n)}function Eh(e,t){return Ht(e,t)}var nu=null,ir=null,ud=!1,lu=!1,dd=!1,ko=0;function ha(e){e!==ir&&e.next===null&&(ir===null?nu=ir=e:ir=ir.next=e),lu=!0,ud||(ud=!0,Yh())}function fc(e,t){if(!dd&&lu){dd=!0;do for(var n=!1,l=nu;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var s=0;else{var f=l.suspendedLanes,m=l.pingedLanes;s=(1<<31-Hn(42|e)+1)-1,s&=o&~(f&~m),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,pp(l,s))}else s=Bt,s=Lt(l,l===an?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||An(l,s)||(n=!0,pp(l,s));l=l.next}while(n);dd=!1}}function Vh(){up()}function up(){lu=ud=!1;var e=0;ko!==0&&Zh()&&(e=ko);for(var t=ke(),n=null,l=nu;l!==null;){var o=l.next,s=dp(l,t);s===0?(l.next=null,n===null?nu=o:n.next=o,o===null&&(ir=n)):(n=l,(e!==0||(s&3)!==0)&&(lu=!0)),l=o}qn!==0&&qn!==5||fc(e),ko!==0&&(ko=0)}function dp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var f=31-Hn(s),m=1<<f,A=o[f];A===-1?((m&n)===0||(m&l)!==0)&&(o[f]=Qa(m,t)):A<=t&&(e.expiredLanes|=m),s&=~m}if(t=an,n=Bt,n=Lt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Zt===2||Zt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&_n(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||An(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&_n(l),Cs(n)){case 2:case 8:n=$n;break;case 32:n=ri;break;case 268435456:n=Za;break;default:n=ri}return l=fp.bind(null,e),n=Ht(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&_n(l),e.callbackPriority=2,e.callbackNode=null,2}function fp(e,t){if(qn!==0&&qn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var l=Bt;return l=Lt(e,e===an?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Lf(e,l,t),dp(e,ke()),e.callbackNode!=null&&e.callbackNode===n?fp.bind(null,e):null)}function pp(e,t){if(tu())return null;Lf(e,t,!0)}function Yh(){Kh(function(){(Ft&6)!==0?Ht(jt,Vh):up()})}function fd(){if(ko===0){var e=Bi;e===0&&(e=Li,Li<<=1,(Li&261888)===0&&(Li=256)),ko=e}return ko}function hp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ut(""+e)}function xp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Wh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var s=hp((o[un]||null).action),f=l.submitter;f&&(t=(t=f[un]||null)?hp(t.formAction):f.getAttribute("formAction"),t!==null&&(s=t,f=null));var m=new Sa("action","action",null,l,o);e.push({event:m,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ko!==0){var A=f?xp(o,f):new FormData(o);Mu(n,{pending:!0,data:A,method:o.method,action:s},null,A)}}else typeof s=="function"&&(m.preventDefault(),A=f?xp(o,f):new FormData(o),Mu(n,{pending:!0,data:A,method:o.method,action:s},s,A))},currentTarget:o}]})}}for(var pd=0;pd<Nl.length;pd++){var hd=Nl[pd],Ih=hd.toLowerCase(),Xh=hd[0].toUpperCase()+hd.slice(1);cl(Ih,"on"+Xh)}cl(wl,"onAnimationEnd"),cl(Ys,"onAnimationIteration"),cl(Ll,"onAnimationStart"),cl("dblclick","onDoubleClick"),cl("focusin","onFocus"),cl("focusout","onBlur"),cl(Or,"onTransitionRun"),cl(xi,"onTransitionStart"),cl(Hr,"onTransitionCancel"),cl(ql,"onTransitionEnd"),vn("onMouseEnter",["mouseout","mouseover"]),vn("onMouseLeave",["mouseout","mouseover"]),vn("onPointerEnter",["pointerout","pointerover"]),vn("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ph=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function gp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var f=l.length-1;0<=f;f--){var m=l[f],A=m.instance,P=m.currentTarget;if(m=m.listener,A!==s&&o.isPropagationStopped())break e;s=m,o.currentTarget=P;try{s(o)}catch(ae){$l(ae)}o.currentTarget=null,s=A}else for(f=0;f<l.length;f++){if(m=l[f],A=m.instance,P=m.currentTarget,m=m.listener,A!==s&&o.isPropagationStopped())break e;s=m,o.currentTarget=P;try{s(o)}catch(ae){$l(ae)}o.currentTarget=null,s=A}}}}function kt(e,t){var n=t[Rs];n===void 0&&(n=t[Rs]=new Set);var l=e+"__bubble";n.has(l)||(yp(t,e,2,!1),n.add(l))}function xd(e,t,n){var l=0;t&&(l|=4),yp(n,e,l,t)}var iu="_reactListening"+Math.random().toString(36).slice(2);function gd(e){if(!e[iu]){e[iu]=!0,Rc.forEach(function(n){n!=="selectionchange"&&(Ph.has(n)||xd(n,!1,e),xd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[iu]||(t[iu]=!0,xd("selectionchange",!1,t))}}function yp(e,t,n,l){switch(Gp(t)){case 2:var o=vx;break;case 8:o=bx;break;default:o=Nd}n=o.bind(null,t,n,e),o=void 0,!Zn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function yd(e,t,n,l,o){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var f=l.tag;if(f===3||f===4){var m=l.stateNode.containerInfo;if(m===o)break;if(f===4)for(f=l.return;f!==null;){var A=f.tag;if((A===3||A===4)&&f.stateNode.containerInfo===o)return;f=f.return}for(;m!==null;){if(f=va(m),f===null)return;if(A=f.tag,A===5||A===6||A===26||A===27){l=s=f;continue e}m=m.parentNode}}l=l.return}sl(function(){var P=s,ae=Ci(n),fe=[];e:{var L=is.get(e);if(L!==void 0){var J=Sa,We=e;switch(e){case"keypress":if(Bn(n)===0)break e;case"keydown":case"keyup":J=Au;break;case"focusin":We="focus",J=Al;break;case"focusout":We="blur",J=Al;break;case"beforeblur":case"afterblur":J=Al;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Ai;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Zi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Qi;break;case wl:case Ys:case Ll:J=Xo;break;case ql:J=_s;break;case"scroll":case"scrollend":J=Sr;break;case"wheel":J=Ta;break;case"copy":case"cut":case"paste":J=Bs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Pl;break;case"toggle":case"beforetoggle":J=ml}var nt=(t&4)!==0,nn=!nt&&(e==="scroll"||e==="scrollend"),O=nt?L!==null?L+"Capture":null:L;nt=[];for(var B=P,X;B!==null;){var ce=B;if(X=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||X===null||O===null||(ce=Ri(B,O),ce!=null&&nt.push(hc(B,ce,X))),nn)break;B=B.return}0<nt.length&&(L=new J(L,We,null,n,ae),fe.push({event:L,listeners:nt}))}}if((t&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",L&&n!==Vn&&(We=n.relatedTarget||n.fromElement)&&(va(We)||We[Jn]))break e;if((J||L)&&(L=ae.window===ae?ae:(L=ae.ownerDocument)?L.defaultView||L.parentWindow:window,J?(We=n.relatedTarget||n.toElement,J=P,We=We?va(We):null,We!==null&&(nn=$(We),nt=We.tag,We!==nn||nt!==5&&nt!==27&&nt!==6)&&(We=null)):(J=null,We=P),J!==We)){if(nt=Ai,ce="onMouseLeave",O="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(nt=Pl,ce="onPointerLeave",O="onPointerEnter",B="pointer"),nn=J==null?L:Ds(J),X=We==null?L:Ds(We),L=new nt(ce,B+"leave",J,n,ae),L.target=nn,L.relatedTarget=X,ce=null,va(ae)===P&&(nt=new nt(O,B+"enter",We,n,ae),nt.target=X,nt.relatedTarget=nn,ce=nt),nn=ce,J&&We)t:{for(nt=Fh,O=J,B=We,X=0,ce=O;ce;ce=nt(ce))X++;ce=0;for(var Ze=B;Ze;Ze=nt(Ze))ce++;for(;0<X-ce;)O=nt(O),X--;for(;0<ce-X;)B=nt(B),ce--;for(;X--;){if(O===B||B!==null&&O===B.alternate){nt=O;break t}O=nt(O),B=nt(B)}nt=null}else nt=null;J!==null&&vp(fe,L,J,nt,!1),We!==null&&nn!==null&&vp(fe,nn,We,nt,!0)}}e:{if(L=P?Ds(P):window,J=L.nodeName&&L.nodeName.toLowerCase(),J==="select"||J==="input"&&L.type==="file")var It=Ca;else if(Nr(L))if(fo)It=Qo;else{It=$o;var Ge=Ur}else J=L.nodeName,!J||J.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?P&&Ns(P.elementType)&&(It=Ca):It=Zo;if(It&&(It=It(e,P))){Mr(fe,It,n,ae);break e}Ge&&Ge(e,L,P),e==="focusout"&&P&&L.type==="number"&&P.memoizedProps.value!=null&&yr(L,"number",L.value)}switch(Ge=P?Ds(P):window,e){case"focusin":(Nr(Ge)||Ge.contentEditable==="true")&&(Da=Ge,Vs=P,ta=null);break;case"focusout":ta=Vs=Da=null;break;case"mousedown":Aa=!0;break;case"contextmenu":case"mouseup":case"dragend":Aa=!1,ns(fe,n,ae);break;case"selectionchange":if(Mc)break;case"keydown":case"keyup":ns(fe,n,ae)}var wt;if(hi)e:{switch(e){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else tl?Rr(e,n)&&(Ut="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ut="onCompositionStart");Ut&&(kc&&n.locale!=="ko"&&(tl||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&tl&&(wt=mr()):(dn=ae,Io="value"in dn?dn.value:dn.textContent,tl=!0)),Ge=au(P,Ut),0<Ge.length&&(Ut=new so(Ut,e,null,n,ae),fe.push({event:Ut,listeners:Ge}),wt?Ut.data=wt:(wt=en(n),wt!==null&&(Ut.data=wt)))),(wt=Fl?Dr(e,n):Ar(e,n))&&(Ut=au(P,"onBeforeInput"),0<Ut.length&&(Ge=new so("onBeforeInput","beforeinput",null,n,ae),fe.push({event:Ge,listeners:Ut}),Ge.data=wt)),Wh(fe,e,P,n,ae)}gp(fe,t)})}function hc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function au(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=Ri(e,n),o!=null&&l.unshift(hc(e,o,s)),o=Ri(e,t),o!=null&&l.push(hc(e,o,s))),e.tag===3)return l;e=e.return}return[]}function Fh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vp(e,t,n,l,o){for(var s=t._reactName,f=[];n!==null&&n!==l;){var m=n,A=m.alternate,P=m.stateNode;if(m=m.tag,A!==null&&A===l)break;m!==5&&m!==26&&m!==27||P===null||(A=P,o?(P=Ri(n,s),P!=null&&f.unshift(hc(n,P,A))):o||(P=Ri(n,s),P!=null&&f.push(hc(n,P,A)))),n=n.return}f.length!==0&&e.push({event:t,listeners:f})}var Gh=/\r\n?/g,Lh=/\u0000|\uFFFD/g;function bp(e){return(typeof e=="string"?e:""+e).replace(Gh,`
`).replace(Lh,"")}function mp(e,t){return t=bp(t),bp(e)===t}function tn(e,t,n,l,o,s){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||di(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&di(e,""+l);break;case"className":it(e,"class",l);break;case"tabIndex":it(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":it(e,n,l);break;case"style":no(e,l,s);break;case"data":if(t!=="object"){it(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=ut(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&tn(e,t,"name",o.name,o,null),tn(e,t,"formEncType",o.formEncType,o,null),tn(e,t,"formMethod",o.formMethod,o,null),tn(e,t,"formTarget",o.formTarget,o,null)):(tn(e,t,"encType",o.encType,o,null),tn(e,t,"method",o.method,o,null),tn(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=ut(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=Mn);break;case"onScroll":l!=null&&kt("scroll",e);break;case"onScrollEnd":l!=null&&kt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(g(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(g(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=ut(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":kt("beforetoggle",e),kt("toggle",e),Yo(e,"popover",l);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Yo(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ru.get(n)||n,Yo(e,n,l))}}function vd(e,t,n,l,o,s){switch(n){case"style":no(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(g(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(g(60));e.innerHTML=n}}break;case"children":typeof l=="string"?di(e,l):(typeof l=="number"||typeof l=="bigint")&&di(e,""+l);break;case"onScroll":l!=null&&kt("scroll",e);break;case"onScrollEnd":l!=null&&kt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gr.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),s=e[un]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,o),typeof l=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Yo(e,n,l)}}}function il(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",e),kt("load",e);var l=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var f=n[s];if(f!=null)switch(s){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(g(137,t));default:tn(e,t,s,f,n,null)}}o&&tn(e,t,"srcSet",n.srcSet,n,null),l&&tn(e,t,"src",n.src,n,null);return;case"input":kt("invalid",e);var m=s=f=o=null,A=null,P=null;for(l in n)if(n.hasOwnProperty(l)){var ae=n[l];if(ae!=null)switch(l){case"name":o=ae;break;case"type":f=ae;break;case"checked":A=ae;break;case"defaultChecked":P=ae;break;case"value":s=ae;break;case"defaultValue":m=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(g(137,t));break;default:tn(e,t,l,ae,n,null)}}ma(e,s,m,A,P,f,o,!1);return;case"select":kt("invalid",e),l=f=s=null;for(o in n)if(n.hasOwnProperty(o)&&(m=n[o],m!=null))switch(o){case"value":s=m;break;case"defaultValue":f=m;break;case"multiple":l=m;default:tn(e,t,o,m,n,null)}t=s,n=f,e.multiple=!!l,t!=null?Nn(e,!!l,t,!1):n!=null&&Nn(e,!!l,n,!0);return;case"textarea":kt("invalid",e),s=o=l=null;for(f in n)if(n.hasOwnProperty(f)&&(m=n[f],m!=null))switch(f){case"value":l=m;break;case"defaultValue":o=m;break;case"children":s=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(g(91));break;default:tn(e,t,f,m,n,null)}ks(e,l,o,s);return;case"option":for(A in n)if(n.hasOwnProperty(A)&&(l=n[A],l!=null))switch(A){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:tn(e,t,A,l,n,null)}return;case"dialog":kt("beforetoggle",e),kt("toggle",e),kt("cancel",e),kt("close",e);break;case"iframe":case"object":kt("load",e);break;case"video":case"audio":for(l=0;l<pc.length;l++)kt(pc[l],e);break;case"image":kt("error",e),kt("load",e);break;case"details":kt("toggle",e);break;case"embed":case"source":case"link":kt("error",e),kt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in n)if(n.hasOwnProperty(P)&&(l=n[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(g(137,t));default:tn(e,t,P,l,n,null)}return;default:if(Ns(t)){for(ae in n)n.hasOwnProperty(ae)&&(l=n[ae],l!==void 0&&vd(e,t,ae,l,n,void 0));return}}for(m in n)n.hasOwnProperty(m)&&(l=n[m],l!=null&&tn(e,t,m,l,n,null))}function qh(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,f=null,m=null,A=null,P=null,ae=null;for(J in n){var fe=n[J];if(n.hasOwnProperty(J)&&fe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":A=fe;default:l.hasOwnProperty(J)||tn(e,t,J,null,l,fe)}}for(var L in l){var J=l[L];if(fe=n[L],l.hasOwnProperty(L)&&(J!=null||fe!=null))switch(L){case"type":s=J;break;case"name":o=J;break;case"checked":P=J;break;case"defaultChecked":ae=J;break;case"value":f=J;break;case"defaultValue":m=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(g(137,t));break;default:J!==fe&&tn(e,t,L,J,l,fe)}}hn(e,f,m,A,P,ae,s,o);return;case"select":J=f=m=L=null;for(s in n)if(A=n[s],n.hasOwnProperty(s)&&A!=null)switch(s){case"value":break;case"multiple":J=A;default:l.hasOwnProperty(s)||tn(e,t,s,null,l,A)}for(o in l)if(s=l[o],A=n[o],l.hasOwnProperty(o)&&(s!=null||A!=null))switch(o){case"value":L=s;break;case"defaultValue":m=s;break;case"multiple":f=s;default:s!==A&&tn(e,t,o,s,l,A)}t=m,n=f,l=J,L!=null?Nn(e,!!n,L,!1):!!l!=!!n&&(t!=null?Nn(e,!!n,t,!0):Nn(e,!!n,n?[]:"",!1));return;case"textarea":J=L=null;for(m in n)if(o=n[m],n.hasOwnProperty(m)&&o!=null&&!l.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:tn(e,t,m,null,l,o)}for(f in l)if(o=l[f],s=n[f],l.hasOwnProperty(f)&&(o!=null||s!=null))switch(f){case"value":L=o;break;case"defaultValue":J=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(g(91));break;default:o!==s&&tn(e,t,f,o,l,s)}Wo(e,L,J);return;case"option":for(var We in n)if(L=n[We],n.hasOwnProperty(We)&&L!=null&&!l.hasOwnProperty(We))switch(We){case"selected":e.selected=!1;break;default:tn(e,t,We,null,l,L)}for(A in l)if(L=l[A],J=n[A],l.hasOwnProperty(A)&&L!==J&&(L!=null||J!=null))switch(A){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:tn(e,t,A,L,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in n)L=n[nt],n.hasOwnProperty(nt)&&L!=null&&!l.hasOwnProperty(nt)&&tn(e,t,nt,null,l,L);for(P in l)if(L=l[P],J=n[P],l.hasOwnProperty(P)&&L!==J&&(L!=null||J!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(g(137,t));break;default:tn(e,t,P,L,l,J)}return;default:if(Ns(t)){for(var nn in n)L=n[nn],n.hasOwnProperty(nn)&&L!==void 0&&!l.hasOwnProperty(nn)&&vd(e,t,nn,void 0,l,L);for(ae in l)L=l[ae],J=n[ae],!l.hasOwnProperty(ae)||L===J||L===void 0&&J===void 0||vd(e,t,ae,L,l,J);return}}for(var O in n)L=n[O],n.hasOwnProperty(O)&&L!=null&&!l.hasOwnProperty(O)&&tn(e,t,O,null,l,L);for(fe in l)L=l[fe],J=n[fe],!l.hasOwnProperty(fe)||L===J||L==null&&J==null||tn(e,t,fe,L,l,J)}function Sp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $h(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],s=o.transferSize,f=o.initiatorType,m=o.duration;if(s&&m&&Sp(f)){for(f=0,m=o.responseEnd,l+=1;l<n.length;l++){var A=n[l],P=A.startTime;if(P>m)break;var ae=A.transferSize,fe=A.initiatorType;ae&&Sp(fe)&&(A=A.responseEnd,f+=ae*(A<m?1:(m-P)/(A-P)))}if(--l,t+=8*(s+f)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var bd=null,md=null;function ou(e){return e.nodeType===9?e:e.ownerDocument}function wp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Sd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wd=null;function Zh(){var e=window.event;return e&&e.type==="popstate"?e===wd?!1:(wd=e,!0):(wd=null,!1)}var Tp=typeof setTimeout=="function"?setTimeout:void 0,Qh=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,Kh=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(e){return zp.resolve(null).then(e).catch(Jh)}:Tp;function Jh(e){setTimeout(function(){throw e})}function No(e){return e==="head"}function Cp(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),rr(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")xc(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,xc(n);for(var s=n.firstChild;s;){var f=s.nextSibling,m=s.nodeName;s[ui]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=f}}else n==="body"&&xc(e.ownerDocument.body);n=o}while(n);rr(t)}function Rp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function jd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jd(n),qi(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function ex(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ui])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=wi(e.nextSibling),e===null)break}return null}function tx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=wi(e.nextSibling),e===null))return null;return e}function Dp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=wi(e.nextSibling),e===null))return null;return e}function Td(e){return e.data==="$?"||e.data==="$~"}function zd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function nx(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function wi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Cd=null;function Ap(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return wi(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function kp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Np(e,t,n){switch(t=ou(n),e){case"html":if(e=t.documentElement,!e)throw Error(g(452));return e;case"head":if(e=t.head,!e)throw Error(g(453));return e;case"body":if(e=t.body,!e)throw Error(g(454));return e;default:throw Error(g(451))}}function xc(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qi(e)}var ji=new Map,Mp=new Set;function su(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $a=Z.d;Z.d={f:lx,r:ix,D:ax,C:ox,L:sx,m:rx,X:ux,S:cx,M:dx};function lx(){var e=$a.f(),t=Kc();return e||t}function ix(e){var t=eo(e);t!==null&&t.tag===5&&t.type==="form"?qd(t):$a.r(e)}var ar=typeof document>"u"?null:document;function Bp(e,t,n){var l=ar;if(l&&typeof t=="string"&&t){var o=ot(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Mp.has(o)||(Mp.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),il(t,"link",e),kn(t),l.head.appendChild(t)))}}function ax(e){$a.D(e),Bp("dns-prefetch",e,null)}function ox(e,t){$a.C(e,t),Bp("preconnect",e,t)}function sx(e,t,n){$a.L(e,t,n);var l=ar;if(l&&e&&t){var o='link[rel="preload"][as="'+ot(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+ot(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+ot(n.imageSizes)+'"]')):o+='[href="'+ot(e)+'"]';var s=o;switch(t){case"style":s=or(e);break;case"script":s=sr(e)}ji.has(s)||(e=me({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ji.set(s,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(gc(s))||t==="script"&&l.querySelector(yc(s))||(t=l.createElement("link"),il(t,"link",e),kn(t),l.head.appendChild(t)))}}function rx(e,t){$a.m(e,t);var n=ar;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+ot(l)+'"][href="'+ot(e)+'"]',s=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=sr(e)}if(!ji.has(s)&&(e=me({rel:"modulepreload",href:e},t),ji.set(s,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(yc(s)))return}l=n.createElement("link"),il(l,"link",e),kn(l),n.head.appendChild(l)}}}function cx(e,t,n){$a.S(e,t,n);var l=ar;if(l&&e){var o=to(l).hoistableStyles,s=or(e);t=t||"default";var f=o.get(s);if(!f){var m={loading:0,preload:null};if(f=l.querySelector(gc(s)))m.loading=5;else{e=me({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ji.get(s))&&Rd(e,n);var A=f=l.createElement("link");kn(A),il(A,"link",e),A._p=new Promise(function(P,ae){A.onload=P,A.onerror=ae}),A.addEventListener("load",function(){m.loading|=1}),A.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ru(f,t,l)}f={type:"stylesheet",instance:f,count:1,state:m},o.set(s,f)}}}function ux(e,t){$a.X(e,t);var n=ar;if(n&&e){var l=to(n).hoistableScripts,o=sr(e),s=l.get(o);s||(s=n.querySelector(yc(o)),s||(e=me({src:e,async:!0},t),(t=ji.get(o))&&Dd(e,t),s=n.createElement("script"),kn(s),il(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function dx(e,t){$a.M(e,t);var n=ar;if(n&&e){var l=to(n).hoistableScripts,o=sr(e),s=l.get(o);s||(s=n.querySelector(yc(o)),s||(e=me({src:e,async:!0,type:"module"},t),(t=ji.get(o))&&Dd(e,t),s=n.createElement("script"),kn(s),il(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function Up(e,t,n,l){var o=(o=ht.current)?su(o):null;if(!o)throw Error(g(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=or(n.href),n=to(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=or(n.href);var s=to(o).hoistableStyles,f=s.get(e);if(f||(o=o.ownerDocument||o,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,f),(s=o.querySelector(gc(e)))&&!s._p&&(f.instance=s,f.state.loading=5),ji.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ji.set(e,n),s||fx(o,e,n,f.state))),t&&l===null)throw Error(g(528,""));return f}if(t&&l!==null)throw Error(g(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=sr(n),n=to(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(g(444,e))}}function or(e){return'href="'+ot(e)+'"'}function gc(e){return'link[rel="stylesheet"]['+e+"]"}function _p(e){return me({},e,{"data-precedence":e.precedence,precedence:null})}function fx(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),il(t,"link",n),kn(t),e.head.appendChild(t))}function sr(e){return'[src="'+ot(e)+'"]'}function yc(e){return"script[async]"+e}function Op(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+ot(n.href)+'"]');if(l)return t.instance=l,kn(l),l;var o=me({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),kn(l),il(l,"style",o),ru(l,n.precedence,e),t.instance=l;case"stylesheet":o=or(n.href);var s=e.querySelector(gc(o));if(s)return t.state.loading|=4,t.instance=s,kn(s),s;l=_p(n),(o=ji.get(o))&&Rd(l,o),s=(e.ownerDocument||e).createElement("link"),kn(s);var f=s;return f._p=new Promise(function(m,A){f.onload=m,f.onerror=A}),il(s,"link",l),t.state.loading|=4,ru(s,n.precedence,e),t.instance=s;case"script":return s=sr(n.src),(o=e.querySelector(yc(s)))?(t.instance=o,kn(o),o):(l=n,(o=ji.get(s))&&(l=me({},n),Dd(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),kn(o),il(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(g(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ru(l,n.precedence,e));return t.instance}function ru(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,s=o,f=0;f<l.length;f++){var m=l[f];if(m.dataset.precedence===t)s=m;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Rd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Dd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var cu=null;function Hp(e,t,n){if(cu===null){var l=new Map,o=cu=new Map;o.set(n,l)}else o=cu,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var s=n[o];if(!(s[ui]||s[En]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var f=s.getAttribute(t)||"";f=e+f;var m=l.get(f);m?m.push(s):l.set(f,[s])}}return l}function Ep(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function px(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Vp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function hx(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=or(l.href),s=t.querySelector(gc(o));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=uu.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,kn(s);return}s=t.ownerDocument||t,l=_p(l),(o=ji.get(o))&&Rd(l,o),s=s.createElement("link"),kn(s);var f=s;f._p=new Promise(function(m,A){f.onload=m,f.onerror=A}),il(s,"link",l),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=uu.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Ad=0;function xx(e,t){return e.stylesheets&&e.count===0&&fu(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&fu(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Ad===0&&(Ad=62500*$h());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&fu(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Ad?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function uu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var du=null;function fu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,du=new Map,t.forEach(gx,e),du=null,uu.call(e))}function gx(e,t){if(!(t.state.loading&4)){var n=du.get(e);if(n)var l=n.get(null);else{n=new Map,du.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var f=o[s];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(n.set(f.dataset.precedence,f),l=f)}l&&n.set(null,l)}o=t.instance,f=o.getAttribute("data-precedence"),s=n.get(f)||l,s===l&&n.set(null,o),n.set(f,o),this.count++,l=uu.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),s?s.parentNode.insertBefore(o,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var vc={$$typeof:k,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function yx(e,t,n,l,o,s,f,m,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.hiddenUpdates=Eo(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Yp(e,t,n,l,o,s,f,m,A,P,ae,fe){return e=new yx(e,t,n,f,A,P,ae,fe,m),t=1,s===!0&&(t|=24),s=nl(3,null,null,t),e.current=s,s.stateNode=e,t=Fr(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:n,cache:t},Ea(s),e}function Wp(e){return e?(e=po,e):po}function Ip(e,t,n,l,o,s){o=Wp(o),l.context===null?l.context=o:l.pendingContext=o,l=Hl(t),l.payload={element:n},s=s===void 0?null:s,s!==null&&(l.callback=s),n=xl(e,l,t),n!==null&&(Xl(n,e,t),Oi(n,e,t))}function Xp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kd(e,t){Xp(e,t),(e=e.alternate)&&Xp(e,t)}function Pp(e){if(e.tag===13||e.tag===31){var t=Ml(e,67108864);t!==null&&Xl(t,e,67108864),kd(e,67108864)}}function Fp(e){if(e.tag===13||e.tag===31){var t=ii();t=Vo(t);var n=Ml(e,t);n!==null&&Xl(n,e,t),kd(e,t)}}var pu=!0;function vx(e,t,n,l){var o=U.T;U.T=null;var s=Z.p;try{Z.p=2,Nd(e,t,n,l)}finally{Z.p=s,U.T=o}}function bx(e,t,n,l){var o=U.T;U.T=null;var s=Z.p;try{Z.p=8,Nd(e,t,n,l)}finally{Z.p=s,U.T=o}}function Nd(e,t,n,l){if(pu){var o=Md(l);if(o===null)yd(e,t,l,hu,n),Lp(e,l);else if(Sx(o,e,t,n,l))l.stopPropagation();else if(Lp(e,l),t&4&&-1<mx.indexOf(e)){for(;o!==null;){var s=eo(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var f=Je(s.pendingLanes);if(f!==0){var m=s;for(m.pendingLanes|=2,m.entangledLanes|=2;f;){var A=1<<31-Hn(f);m.entanglements[1]|=A,f&=~A}ha(s),(Ft&6)===0&&(Zc=ke()+500,fc(0))}}break;case 31:case 13:m=Ml(s,2),m!==null&&Xl(m,s,2),Kc(),kd(s,2)}if(s=Md(l),s===null&&yd(e,t,l,hu,n),s===o)break;o=s}o!==null&&l.stopPropagation()}else yd(e,t,l,null,n)}}function Md(e){return e=Ci(e),Bd(e)}var hu=null;function Bd(e){if(hu=null,e=va(e),e!==null){var t=$(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=oe(t),e!==null)return e;e=null}else if(n===31){if(e=Ce(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return hu=e,null}function Gp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ya()){case jt:return 2;case $n:return 8;case ri:case dr:return 32;case Za:return 268435456;default:return 32}default:return 32}}var Ud=!1,Mo=null,Bo=null,Uo=null,bc=new Map,mc=new Map,_o=[],mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lp(e,t){switch(e){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":Uo=null;break;case"pointerover":case"pointerout":bc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(t.pointerId)}}function Sc(e,t,n,l,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[o]},t!==null&&(t=eo(t),t!==null&&Pp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Sx(e,t,n,l,o){switch(t){case"focusin":return Mo=Sc(Mo,e,t,n,l,o),!0;case"dragenter":return Bo=Sc(Bo,e,t,n,l,o),!0;case"mouseover":return Uo=Sc(Uo,e,t,n,l,o),!0;case"pointerover":var s=o.pointerId;return bc.set(s,Sc(bc.get(s)||null,e,t,n,l,o)),!0;case"gotpointercapture":return s=o.pointerId,mc.set(s,Sc(mc.get(s)||null,e,t,n,l,o)),!0}return!1}function qp(e){var t=va(e.target);if(t!==null){var n=$(t);if(n!==null){if(t=n.tag,t===13){if(t=oe(n),t!==null){e.blockedOn=t,ln(e.priority,function(){Fp(n)});return}}else if(t===31){if(t=Ce(n),t!==null){e.blockedOn=t,ln(e.priority,function(){Fp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Md(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Vn=l,n.target.dispatchEvent(l),Vn=null}else return t=eo(n),t!==null&&Pp(t),e.blockedOn=n,!1;t.shift()}return!0}function $p(e,t,n){xu(e)&&n.delete(t)}function wx(){Ud=!1,Mo!==null&&xu(Mo)&&(Mo=null),Bo!==null&&xu(Bo)&&(Bo=null),Uo!==null&&xu(Uo)&&(Uo=null),bc.forEach($p),mc.forEach($p)}function gu(e,t){e.blockedOn===t&&(e.blockedOn=null,Ud||(Ud=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,wx)))}var yu=null;function Zp(e){yu!==e&&(yu=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){yu===e&&(yu=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(Bd(l||n)===null)continue;break}var s=eo(n);s!==null&&(e.splice(t,3),t-=3,Mu(s,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function rr(e){function t(A){return gu(A,e)}Mo!==null&&gu(Mo,e),Bo!==null&&gu(Bo,e),Uo!==null&&gu(Uo,e),bc.forEach(t),mc.forEach(t);for(var n=0;n<_o.length;n++){var l=_o[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<_o.length&&(n=_o[0],n.blockedOn===null);)qp(n),n.blockedOn===null&&_o.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],s=n[l+1],f=o[un]||null;if(typeof s=="function")f||Zp(n);else if(f){var m=null;if(s&&s.hasAttribute("formAction")){if(o=s,f=s[un]||null)m=f.formAction;else if(Bd(o)!==null)continue}else m=f.action;typeof m=="function"?n[l+1]=m:(n.splice(l,3),l-=3),Zp(n)}}}function Qp(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(f){return o=f})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function _d(e){this._internalRoot=e}vu.prototype.render=_d.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(g(409));var n=t.current,l=ii();Ip(n,l,e,t,null,null)},vu.prototype.unmount=_d.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ip(e.current,2,null,e,null,null),Kc(),t[Jn]=null}};function vu(e){this._internalRoot=e}vu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_o.length&&t!==0&&t<_o[n].priority;n++);_o.splice(n,0,e),n===0&&qp(e)}};var Kp=x.version;if(Kp!=="19.2.0")throw Error(g(527,Kp,"19.2.0"));Z.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(g(188)):(e=Object.keys(e).join(","),Error(g(268,e)));return e=Y(t),e=e!==null?De(e):null,e=e===null?null:e.stateNode,e};var jx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{ci=bu.inject(jx),On=bu}catch{}}return jc.createRoot=function(e,t){if(!d(e))throw Error(g(299));var n=!1,l="",o=af,s=of,f=sf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Yp(e,1,!1,null,null,n,l,null,o,s,f,Qp),e[Jn]=t.current,gd(e),new _d(t)},jc.hydrateRoot=function(e,t,n){if(!d(e))throw Error(g(299));var l=!1,o="",s=af,f=of,m=sf,A=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(m=n.onRecoverableError),n.formState!==void 0&&(A=n.formState)),t=Yp(e,1,!0,t,n??null,l,o,A,s,f,m,Qp),t.context=Wp(null),n=t.current,l=ii(),l=Vo(l),o=Hl(l),o.callback=null,xl(n,o,l),n=l,t.current.lanes=n,pe(t,n),ha(t),e[Jn]=t.current,gd(e),new vu(t)},jc.version="19.2.0",jc}var rh;function Ux(){if(rh)return Ed.exports;rh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(x){console.error(x)}}return c(),Ed.exports=Bx(),Ed.exports}var _x=Ux();function Ox(c,x){return c?x?{minX:Math.min(c.minX,x.minX),minY:Math.min(c.minY,x.minY),maxX:Math.max(c.maxX,x.maxX),maxY:Math.max(c.maxY,x.maxY)}:c:x}function Hx(c,x,S,g,d,$,oe,Ce,de){const Y=c/2,De=x/2,me=[{x:-Y,y:-De},{x:Y,y:-De},{x:Y,y:De},{x:-Y,y:De}],we=de*Math.PI/180,Oe=Math.sin(we),ne=Math.cos(we);let ee=1/0,Me=1/0,He=-1/0,H=-1/0;for(const k of me){const M=k.x*oe,N=k.y*Ce,T=M*ne-N*Oe,p=M*Oe+N*ne,W=S+d+T,he=g+$+p;W<ee&&(ee=W),he<Me&&(Me=he),W>He&&(He=W),he>H&&(H=he)}return{minX:ee,minY:Me,maxX:He,maxY:H}}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vx=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(x,S,g)=>g?g.toUpperCase():S.toLowerCase()),ch=c=>{const x=Vx(c);return x.charAt(0).toUpperCase()+x.slice(1)},fh=(...c)=>c.filter((x,S,g)=>!!x&&x.trim()!==""&&g.indexOf(x)===S).join(" ").trim(),Yx=c=>{for(const x in c)if(x.startsWith("aria-")||x==="role"||x==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=j.forwardRef(({color:c="currentColor",size:x=24,strokeWidth:S=2,absoluteStrokeWidth:g,className:d="",children:$,iconNode:oe,...Ce},de)=>j.createElement("svg",{ref:de,...Wx,width:x,height:x,stroke:c,strokeWidth:g?Number(S)*24/Number(x):S,className:fh("lucide",d),...!$&&!Yx(Ce)&&{"aria-hidden":"true"},...Ce},[...oe.map(([Y,De])=>j.createElement(Y,De)),...Array.isArray($)?$:[$]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=(c,x)=>{const S=j.forwardRef(({className:g,...d},$)=>j.createElement(Ix,{ref:$,iconNode:x,className:fh(`lucide-${Ex(ch(c))}`,`lucide-${c}`,g),...d}));return S.displayName=ch(c),S};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Px=ph("mouse-pointer",Xx);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Gx=ph("pen-line",Fx),Su="#2CA02C",hh="#F0E442",xh="#00BFC4",wu="#000000",gh="#00008b",zc="#FF0000",yh={DEFAULT_SIZE:18},zu={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},Lx={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},ju={DEFAULT_SIZE:18},vh={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function Pt(c){return vh[c]?.validUnits||[]}function Ye(c){return vh[c]?.defaultUnit||""}let ur=1,Tu=Promise.resolve(0);function ai(){let c;Tu=Tu.then(S=>(c=S+1,ur=c+1,c));const x=ur;return ur=x+1,x}function Id(c){Tu=Tu.then(()=>(ur=c,c-1)),ur=c}function uh(){return ur}function qx(c="id"){return`${c}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function dh(c){return Math.round(c*1e4)/1e4}function Gt(c){return{x:dh(c.x),y:dh(c.y)}}function $x(c){return zu[c]?.defaultPins||2}function Zx(c,x,S,g,d,$=yh.DEFAULT_SIZE){const oe={id:qx("comp"),componentType:c,designator:"",layer:x,x:S,y:g,color:d,size:$,pinCount:$x(c),pinConnections:[],orientation:0};switch(oe.pinConnections=new Array(oe.pinCount).fill(""),(c==="Electrolytic Capacitor"||c==="Diode"||c==="Battery"||c==="ZenerDiode")&&(oe.pinPolarities=new Array(oe.pinCount).fill("")),c){case"Battery":return{...oe,componentType:"Battery"};case"Capacitor":return{...oe,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...oe,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Diode":return{...oe,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...oe,componentType:"Fuse"};case"FerriteBead":return{...oe,componentType:"FerriteBead"};case"Connector":return{...oe,componentType:"Connector",gender:"N/A"};case"Jumper":return{...oe,componentType:"Jumper"};case"Relay":return{...oe,componentType:"Relay"};case"Inductor":return{...oe,componentType:"Inductor"};case"Speaker":return{...oe,componentType:"Speaker"};case"Motor":return{...oe,componentType:"Motor"};case"PowerSupply":return{...oe,componentType:"PowerSupply"};case"Transistor":return{...oe,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...oe,componentType:"Resistor"};case"ResistorNetwork":return{...oe,componentType:"ResistorNetwork"};case"Thermistor":return{...oe,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...oe,componentType:"Switch"};case"Transformer":return{...oe,componentType:"Transformer"};case"TestPoint":return{...oe,componentType:"TestPoint"};case"IntegratedCircuit":return{...oe,componentType:"IntegratedCircuit"};case"VacuumTube":return{...oe,componentType:"VacuumTube"};case"VariableResistor":return{...oe,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...oe,componentType:"Crystal"};case"ZenerDiode":return{...oe,componentType:"ZenerDiode"};default:return{...oe,componentType:"Resistor"}}}function Xd(c,x,S){const g=c.componentType==="Electrolytic Capacitor"||c.componentType==="Diode"||c.componentType==="Battery"||c.componentType==="ZenerDiode",d=c.componentType==="Capacitor"&&"dielectric"in c&&c.dielectric==="Tantalum";if(!(g||d)||c.pinCount!==2||!(x.length===2&&x[0]&&x[0].trim()!==""&&x[1]&&x[1].trim()!==""))return null;const oe=we=>{const Oe=parseInt(we,10);if(isNaN(Oe))return null;for(const ne of S)if((ne.type==="via"||ne.type==="pad")&&ne.points.length>0){const ee=ne.points[0];if(ee.id===Oe)return{x:ee.x,y:ee.y}}return null},Ce=oe(x[0]),de=oe(x[1]);if(!Ce||!de)return null;const Y=Math.hypot(c.x-Ce.x,c.y-Ce.y),De=Math.hypot(c.x-de.x,c.y-de.y),me=["",""];return Y<De?(me[0]="-",me[1]="+"):(me[0]="+",me[1]="-"),me}function Qx(){const c=new Date,x=c.getFullYear(),S=String(c.getMonth()+1).padStart(2,"0"),g=String(c.getDate()).padStart(2,"0"),d=String(c.getHours()).padStart(2,"0"),$=String(c.getMinutes()).padStart(2,"0"),oe=String(c.getSeconds()).padStart(2,"0");return`${x}_${S}_${g}-${d}-${$}-${oe}`}function Tc(c){let x=c.replace(/\.json$/i,""),S="";for(;S!==x;)S=x,x=x.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),x=x.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return x}const Kx=({openMenu:c,setOpenMenu:x,isReadOnlyMode:S,currentProjectFilePath:g,onNewProject:d,onOpenProject:$,onSaveProject:oe,onSaveAs:Ce,onPrint:de,hasUnsavedChanges:Y,setNewProjectDialog:De,setAutoSaveDialog:me,topImage:we,bottomImage:Oe,selectedImageForTransform:ne,setSelectedImageForTransform:ee,setCurrentTool:Me,transformMode:He,setTransformMode:H,updateImageTransform:k,resetImageTransform:M,isGrayscale:N,setIsGrayscale:T,isBlackAndWhiteEdges:p,setIsBlackAndWhiteEdges:W,isBlackAndWhiteInverted:he,setIsBlackAndWhiteInverted:Le,areImagesLocked:je,setAreImagesLocked:Ee,onEnterBoardDimensions:Ne,fileInputTopRef:_t,fileInputBottomRef:et,openProjectRef:U,increaseSize:Z,decreaseSize:Te,brushSize:K,drawingStrokes:ve,selectedIds:R,selectedComponentIds:E,selectedPowerIds:ue,selectedGroundIds:Re,componentsTop:Xe,componentsBottom:ht,powers:gt,grounds:yn,powerNodeNames:Ot,groundNodeNames:oi,setSetSizeDialog:al,areViasLocked:Pi,setAreViasLocked:qe,arePadsLocked:mt,setArePadsLocked:Ho,areTracesLocked:Ve,setAreTracesLocked:Vt,areComponentsLocked:Ti,setAreComponentsLocked:Fi,areGroundNodesLocked:Ht,setAreGroundNodesLocked:_n,arePowerNodesLocked:si,setArePowerNodesLocked:ga,setSelectedIds:ke,setSelectedComponentIds:ya,setSelectedPowerIds:jt,setSelectedGroundIds:$n,selectAllVias:ri,selectAllTraces:dr,selectAllPads:Za,selectAllComponents:fr,selectDisconnectedComponents:Nt,selectAllPowerNodes:ci,selectAllGroundNodes:On,selectPowerNodesByName:ol,selectGroundNodesByName:Hn,setShowPowerBusManager:Gi,setShowGroundBusManager:zi,menuBarRef:pr})=>{const[Li,Se]=Ie.useState(null),Kt=Ie.useRef(null),[Je,Lt]=Ie.useState(null),An=Ie.useRef(null),Qa=(pe,qt)=>{const rn=pe==="top",Pe=!(pe==="both"?we&&Oe:(rn?we:pe==="bottom"?Oe:null)!==null)||je;return i.jsxs("div",{onMouseEnter:()=>{qt.current&&(clearTimeout(qt.current),qt.current=null),Se(pe)},onMouseLeave:()=>{Se(null)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{if(pe==="both"){const ln=!we?.flipX;k("both",{flipX:ln})}else{const ln=rn?we?.flipX||!1:Oe?.flipX||!1;k(pe,{flipX:!ln})}Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:"Toggle Horizontal Flip"}),i.jsx("button",{onClick:()=>{if(pe==="both"){const ln=!we?.flipY;k("both",{flipY:ln})}else{const ln=rn?we?.flipY||!1:Oe?.flipY||!1;k(pe,{flipY:!ln})}Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:"Toggle Vertical Flip"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{ee(pe),H("nudge"),Me("transform"),Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:[He==="nudge"&&ne===pe?" ":"","Mode: Nudge"]}),i.jsxs("button",{onClick:()=>{ee(pe),H("scale"),Me("transform"),Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:[He==="scale"&&ne===pe?" ":"","Mode: Scale"]}),i.jsxs("button",{onClick:()=>{ee(pe),H("rotate"),Me("transform"),Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:[He==="rotate"&&ne===pe?" ":"","Mode: Rotate"]}),i.jsxs("button",{onClick:()=>{ee(pe),H("slant"),Me("transform"),Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:[He==="slant"&&ne===pe?" ":"","Mode: Slant"]}),i.jsxs("button",{onClick:()=>{ee(pe),H("keystone"),Me("transform"),Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:[He==="keystone"&&ne===pe?" ":"","Mode: Keystone"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{ee(pe),Me("transform"),N||p?(T(!1),W(!1),Le(!1)):T(!0),Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:N||p?"Color Mode":"Grayscale Mode"}),i.jsx("button",{onClick:()=>{ee(pe),Me("transform"),p?Le(ln=>!ln):(W(!0),Le(!1)),Se(null),x(null)},disabled:Pe,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Pe?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Pe?"not-allowed":"pointer"},children:p?"Invert Edges":"Black & White Edges"})]})},Ka=pe=>{const qt=pe==="power"?Ot:oi,rn=qt.length>0,Ja=pe==="power"?"Select Power Nodes":"Select Ground Nodes";return i.jsxs("div",{onMouseEnter:()=>{An.current&&(clearTimeout(An.current),An.current=null),Lt(pe)},onMouseLeave:()=>{An.current=window.setTimeout(()=>{Lt(cn=>cn===pe?null:cn)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[Ja," by Name"]}),i.jsxs("button",{onClick:()=>{pe==="power"?ci():On(),Lt(null),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",pe==="power"?"Power Nodes":"Ground Nodes"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),rn?qt.map(cn=>i.jsx("button",{onClick:()=>{pe==="power"?ol(cn):Hn(cn),Lt(null),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:cn},cn)):i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",pe==="power"?"power":"ground"," nodes available."]})]})},Eo=()=>{if(R.size>0){const pe=ve.filter(qt=>R.has(qt.id));if(pe.length>0)return pe[0].size}else if(E.size>0){const pe=[...Xe,...ht].find(qt=>E.has(qt.id));if(pe)return pe.size||18}else if(ue.size>0){const pe=gt.find(qt=>ue.has(qt.id));if(pe)return pe.size}else if(Re.size>0){const pe=yn.find(qt=>Re.has(qt.id));if(pe)return pe.size||18}return K};return i.jsxs("div",{ref:pr,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:pe=>{pe.stopPropagation(),x(qt=>qt==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),c==="file"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{S||(x(null),Y()?De({visible:!0}):d())},disabled:S,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:S?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:S?"not-allowed":"pointer"},children:"New Project"}),i.jsx("button",{onClick:async()=>{await $(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{S||(oe(),x(null))},disabled:S,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:S?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:S?"not-allowed":"pointer"},children:"Save Project"}),i.jsx("button",{onClick:()=>{S||(Ce(),x(null))},disabled:S,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:S?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:S?"not-allowed":"pointer"},children:"Save As"}),i.jsx("button",{onClick:()=>{S||(me({visible:!0,interval:5}),x(null))},disabled:S,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:S?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:S?"not-allowed":"pointer"},children:"Auto Save"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{de(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),i.jsx("button",{onClick:()=>{de(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:pe=>{S||(pe.stopPropagation(),x(qt=>qt==="transform"?null:"transform"))},disabled:S,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="transform"?"#eef3ff":"#fff",fontWeight:600,color:S?"#999":"#222",cursor:S?"not-allowed":"pointer",opacity:S?.5:1},children:"Images "}),c==="transform"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),i.jsx("button",{onClick:()=>{!S&&!je&&(_t.current?.click(),x(null))},disabled:S||je,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:S||je?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:S||je?"not-allowed":"pointer"},children:"Load Top PCB"}),i.jsx("button",{onClick:()=>{!S&&!je&&(et.current?.click(),x(null))},disabled:S||je,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:S||je?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:S||je?"not-allowed":"pointer"},children:"Load Bottom PCB"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{je||(Ne(),x(null))},disabled:je,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:je?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:je?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!we||je,onMouseEnter:()=>{je||(Kt.current&&(clearTimeout(Kt.current),Kt.current=null),Se("top"))},onMouseLeave:()=>{Kt.current=setTimeout(()=>{Se(pe=>pe==="top"?null:pe)},300)},onClick:()=>{je||(ee("top"),Me("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!we||je?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!we||je?"not-allowed":"pointer"},children:[ne==="top"?" ":"","Top Image "]}),Li==="top"&&!je&&Qa("top",Kt)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!Oe||je,onMouseEnter:()=>{je||(Kt.current&&(clearTimeout(Kt.current),Kt.current=null),Se("bottom"))},onMouseLeave:()=>{Kt.current=setTimeout(()=>{Se(pe=>pe==="bottom"?null:pe)},300)},onClick:()=>{je||(ee("bottom"),Me("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!Oe||je?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!Oe||je?"not-allowed":"pointer"},children:[ne==="bottom"?" ":"","Bottom Image "]}),Li==="bottom"&&!je&&Qa("bottom",Kt)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!we||!Oe||je,onMouseEnter:()=>{je||(Kt.current&&(clearTimeout(Kt.current),Kt.current=null),Se("both"))},onMouseLeave:()=>{Kt.current=setTimeout(()=>{Se(pe=>pe==="both"?null:pe)},300)},onClick:()=>{je||(ee("both"),Me("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!we||!Oe||je?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!we||!Oe||je?"not-allowed":"pointer"},children:[ne==="both"?" ":"","Both Images "]}),Li==="both"&&!je&&Qa("both",Kt)]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{je||(Me("transform"),M(),x(null))},disabled:je,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:je?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:je?"not-allowed":"pointer"},children:"Reset Transform"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ee(pe=>!pe),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:je?"Unlock Images ":"Lock Images"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:pe=>{S||(pe.stopPropagation(),x(qt=>qt==="tools"?null:"tools"))},disabled:S,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="tools"?"#eef3ff":"#fff",fontWeight:600,color:S?"#999":"#222",cursor:S?"not-allowed":"pointer",opacity:S?.5:1},children:"Tools "}),c==="tools"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{Z(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),i.jsx("button",{onClick:()=>{Te(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{al({visible:!0,size:Eo()}),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Set Size"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{qe(pe=>!pe),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Vias ",Pi?"":""]}),i.jsxs("button",{onClick:()=>{Ho(pe=>!pe),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Pads ",mt?"":""]}),i.jsxs("button",{onClick:()=>{Vt(pe=>!pe),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Traces ",Ve?"":""]}),i.jsxs("button",{onClick:()=>{Fi(pe=>!pe),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Components ",Ti?"":""]}),i.jsxs("button",{onClick:()=>{_n(pe=>!pe),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Ground Node ",Ht?"":""]}),i.jsxs("button",{onClick:()=>{ga(pe=>!pe),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Power Nodes ",si?"":""]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select All"}),i.jsx("button",{onClick:()=>{ri(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Vias"}),i.jsx("button",{onClick:()=>{dr(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Traces"}),i.jsx("button",{onClick:()=>{Za(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Pads"}),i.jsx("button",{onClick:()=>{fr(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select All Components"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{An.current&&(clearTimeout(An.current),An.current=null),Lt("power")},onMouseLeave:()=>{An.current=window.setTimeout(()=>{Lt(pe=>pe==="power"?null:pe)},200)},onClick:()=>{Lt(pe=>pe==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select Power Nodes "}),Je==="power"&&Ka("power")]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{An.current&&(clearTimeout(An.current),An.current=null),Lt("ground")},onMouseLeave:()=>{An.current=window.setTimeout(()=>{Lt(pe=>pe==="ground"?null:pe)},200)},onClick:()=>{Lt(pe=>pe==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select Ground Nodes "}),Je==="ground"&&Ka("ground")]}),i.jsx("button",{onClick:()=>{Nt(),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select Disconnected"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Gi(!0),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>{zi(!0),x(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:pe=>{pe.stopPropagation(),x(qt=>qt==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),c==="about"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:400,maxWidth:600,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:16,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 12px 0",color:"#000",fontSize:"18px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"This application supports typical 4-layer PCBs and allows you to load top and bottom PCB images, trace connections, and place components."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:i.jsx("strong",{children:"Key Features:"})}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Load and align top and bottom PCB images"}),i.jsx("li",{children:"Trace connections with automatic node snapping"}),i.jsx("li",{children:"Place and annotate components with pin connections"}),i.jsx("li",{children:"Manage power buses and ground connections"}),i.jsx("li",{children:"Auto-save functionality for project management"})]}),i.jsxs("p",{style:{margin:"0 0 0 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to create new projects and save your work. The ",i.jsx("strong",{children:"Images"})," menu provides tools for aligning and transforming PCB images. The ",i.jsx("strong",{children:"Tools"})," menu offers size adjustments and locking controls for different PCB elements."]})]})})]}),g&&i.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:i.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:g,children:g})})]})},Jx=({visible:c})=>c?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),i.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to start a new project."]}),i.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"Images"})," menu to load PCB photos."]})]}):null,eg=({visible:c,title:x,message:S,onClose:g})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:d=>{d.target===d.currentTarget&&g()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:d=>d.stopPropagation(),children:[i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),i.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:x})]}),i.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:S}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:i.jsx("button",{onClick:g,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,tg=({visible:c,selectedIds:x,selectedComponentIds:S,selectedPowerIds:g,selectedGroundIds:d,drawingStrokes:$,componentsTop:oe,componentsBottom:Ce,powers:de,grounds:Y,powerBuses:De,onClose:me,setComponentsTop:we,setComponentsBottom:Oe,determineViaType:ne,determinePadType:ee,onFindComponent:Me,position:He,isDragging:H,onDragStart:k})=>{if(!c)return null;const M=He?{position:"fixed",left:`${He.x}px`,top:`${He.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:H?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},N={padding:"20px",overflow:"auto",flex:1};return i.jsxs("div",{style:M,children:[i.jsxs("div",{onMouseDown:T=>{const p=T.target;p.tagName==="BUTTON"||p.closest("button")||He&&k(T)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:H?"grabbing":He?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (Ctrl+I)"}),i.jsx("button",{onClick:me,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:N,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const T=$.filter(je=>x.has(je.id)).length,p=[...oe,...Ce].filter(je=>S.has(je.id)).length,W=de.filter(je=>g.has(je.id)).length,he=Y.filter(je=>d.has(je.id)).length,Le=T+p+W+he;return i.jsx("div",{style:{padding:"12px 16px",backgroundColor:Le>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:Le>0?"#333":"#856404",marginBottom:"8px"},children:Le>0?`${Le} Object${Le!==1?"s":""} Selected`:"Zero Objects Selected"})})(),S.size>0&&(()=>{const T=$.some(p=>x.has(p.id)&&(p.type==="via"||p.type==="pad"));return[...oe,...Ce].filter(p=>S.has(p.id)).map(p=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:p.componentType})]}),Me&&i.jsx("button",{onClick:()=>{Me(p.id,p.x,p.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Layer: ",p.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("span",{children:["Designator: ",p.designator||"(empty)"]}),T&&i.jsx("button",{onClick:()=>{const W=[...oe,...Ce].filter(U=>S.has(U.id)&&U.componentType===p.componentType),he=W.length,Le=$.filter(U=>x.has(U.id)&&U.type==="pad"&&U.points.length>0&&U.points[0].id!==void 0).map(U=>{const Z=U.points[0].id;if(Z===void 0)throw new Error("Unexpected undefined id");return{stroke:U,nodeId:Z}}).sort((U,Z)=>U.nodeId-Z.nodeId),je=Le.length>0?Le:$.filter(U=>x.has(U.id)&&U.type==="via"&&U.points.length>0&&U.points[0].id!==void 0).map(U=>{const Z=U.points[0].id;if(Z===void 0)throw new Error("Unexpected undefined id");return{stroke:U,nodeId:Z}}).sort((U,Z)=>U.nodeId-Z.nodeId),Ee=je.length;if(Ee===0){console.warn("No vias or pads with Node IDs found in selection");return}const Ne=Math.floor(Ee/he);if(Ne===0){console.warn(`Not enough ${Le.length>0?"pads":"vias"} (${Ee}) for ${he} components`);return}[...W].sort((U,Z)=>U.id.localeCompare(Z.id)).forEach((U,Z)=>{const Te=Z*Ne,K=Te+Ne,R=je.slice(Te,K).map(ue=>ue.nodeId.toString()),E=Xd(U,R,$);U.layer==="top"?we(ue=>ue.map(Re=>{if(Re.id===U.id){const Xe={...Re,pinCount:Ne,pinConnections:R};return E&&(Xe.pinPolarities=E),Xe}return Re})):Oe(ue=>ue.map(Re=>{if(Re.id===U.id){const Xe={...Re,pinCount:Ne,pinConnections:R};return E&&(Xe.pinPolarities=E),Xe}return Re}))});const et=Le.length>0?"pads":"vias";console.log(`Connected ${he} components of type ${p.componentType} to ${Ee} ${et} (${Ne} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),i.jsxs("div",{children:["Abbreviation: ",p.abbreviation||"(empty)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:p.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:p.color})]}),i.jsxs("div",{children:["Size: ",p.size]}),i.jsxs("div",{children:["Pin Count: ",p.pinCount]}),p.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[p.resistance&&i.jsxs("div",{children:["Resistance: ",p.resistance]}),p.power&&i.jsxs("div",{children:["Power: ",p.power]}),p.tolerance&&i.jsxs("div",{children:["Tolerance: ",p.tolerance]})]}),p.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[p.capacitance&&i.jsxs("div",{children:["Capacitance: ",p.capacitance]}),p.voltage&&i.jsxs("div",{children:["Voltage: ",p.voltage]}),p.dielectric&&i.jsxs("div",{children:["Dielectric: ",p.dielectric]}),p.tolerance&&i.jsxs("div",{children:["Tolerance: ",p.tolerance]})]}),p.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[p.capacitance&&i.jsxs("div",{children:["Capacitance: ",p.capacitance]}),p.voltage&&i.jsxs("div",{children:["Voltage: ",p.voltage]}),p.tolerance&&i.jsxs("div",{children:["Tolerance: ",p.tolerance]}),p.polarity&&i.jsxs("div",{children:["Polarity: ",p.polarity]}),p.esr&&i.jsxs("div",{children:["ESR: ",p.esr]}),p.temperature&&i.jsxs("div",{children:["Temperature: ",p.temperature]})]}),p.orientation!==void 0&&p.orientation!==null&&i.jsxs("div",{children:["Orientation: ",p.orientation,""]}),p.pinConnections&&p.pinConnections.length>0&&(()=>{const W=p.componentType==="Electrolytic Capacitor"||p.componentType==="Diode"||p.componentType==="Battery"||p.componentType==="ZenerDiode",he=p.componentType==="Capacitor"&&"dielectric"in p&&p.dielectric==="Tantalum",Le=W||he;return i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),Le&&i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:p.pinConnections.map((je,Ee)=>{const Ne=p.pinPolarities&&p.pinPolarities.length>Ee?p.pinPolarities[Ee]:"";return i.jsxs("tr",{style:{backgroundColor:Ee%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Ee+1}),Le&&i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:Ne==="+"?"#d32f2f":Ne==="-"?"#1976d2":"#999"},children:Ne||"-"}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:je||"(not connected)"})]},Ee)})})]})]})})(),"manufacturer"in p&&p.manufacturer&&i.jsxs("div",{children:["Manufacturer: ",p.manufacturer]}),"partNumber"in p&&p.partNumber&&i.jsxs("div",{children:["Part Number: ",p.partNumber]}),p.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[p.diodeType&&i.jsxs("div",{children:["Type: ",p.diodeType]}),p.voltage&&i.jsxs("div",{children:["Voltage: ",p.voltage]}),p.current&&i.jsxs("div",{children:["Current: ",p.current]}),p.ledColor&&i.jsxs("div",{children:["LED Color: ",p.ledColor]})]}),p.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[p.voltage&&i.jsxs("div",{children:["Voltage: ",p.voltage]}),p.capacity&&i.jsxs("div",{children:["Capacity: ",p.capacity]}),p.chemistry&&i.jsxs("div",{children:["Chemistry: ",p.chemistry]})]}),p.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[p.current&&i.jsxs("div",{children:["Current: ",p.current]}),p.voltage&&i.jsxs("div",{children:["Voltage: ",p.voltage]}),p.fuseType&&i.jsxs("div",{children:["Type: ",p.fuseType]})]}),p.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[p.impedance&&i.jsxs("div",{children:["Impedance: ",p.impedance]}),p.current&&i.jsxs("div",{children:["Current: ",p.current]})]}),p.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[p.connectorType&&i.jsxs("div",{children:["Type: ",p.connectorType]}),p.gender&&i.jsxs("div",{children:["Gender: ",p.gender]})]}),p.componentType==="Jumper"&&i.jsx(i.Fragment,{children:p.positions&&i.jsxs("div",{children:["Positions: ",p.positions]})}),p.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[p.coilVoltage&&i.jsxs("div",{children:["Coil Voltage: ",p.coilVoltage]}),p.contactType&&i.jsxs("div",{children:["Contact Type: ",p.contactType]}),p.current&&i.jsxs("div",{children:["Current: ",p.current]})]}),p.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[p.inductance&&i.jsxs("div",{children:["Inductance: ",p.inductance]}),p.current&&i.jsxs("div",{children:["Current: ",p.current]}),p.resistance&&i.jsxs("div",{children:["DC Resistance: ",p.resistance]})]}),p.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[p.impedance&&i.jsxs("div",{children:["Impedance: ",p.impedance]}),p.power&&i.jsxs("div",{children:["Power: ",p.power]})]}),p.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[p.motorType&&i.jsxs("div",{children:["Type: ",p.motorType]}),p.voltage&&i.jsxs("div",{children:["Voltage: ",p.voltage]}),p.current&&i.jsxs("div",{children:["Current: ",p.current]})]}),p.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[p.inputVoltage&&i.jsxs("div",{children:["Input Voltage: ",p.inputVoltage]}),p.outputVoltage&&i.jsxs("div",{children:["Output Voltage: ",p.outputVoltage]}),p.current&&i.jsxs("div",{children:["Current: ",p.current]})]}),p.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[p.transistorType&&i.jsxs("div",{children:["Type: ",p.transistorType]}),p.polarity&&i.jsxs("div",{children:["Polarity: ",p.polarity]}),p.voltage&&i.jsxs("div",{children:["Voltage: ",p.voltage]}),p.current&&i.jsxs("div",{children:["Current: ",p.current]})]}),p.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[p.resistance&&i.jsxs("div",{children:["Resistance: ",p.resistance]}),p.configuration&&i.jsxs("div",{children:["Configuration: ",p.configuration]})]}),p.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[p.resistance&&i.jsxs("div",{children:["Resistance: ",p.resistance]}),p.thermistorType&&i.jsxs("div",{children:["Type: ",p.thermistorType]}),p.beta&&i.jsxs("div",{children:["Beta: ",p.beta]})]}),p.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[p.switchType&&i.jsxs("div",{children:["Type: ",p.switchType]}),p.current&&i.jsxs("div",{children:["Current: ",p.current]}),p.voltage&&i.jsxs("div",{children:["Voltage: ",p.voltage]})]}),p.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[p.primaryVoltage&&i.jsxs("div",{children:["Primary Voltage: ",p.primaryVoltage]}),p.secondaryVoltage&&i.jsxs("div",{children:["Secondary Voltage: ",p.secondaryVoltage]}),p.power&&i.jsxs("div",{children:["Power: ",p.power]}),p.turns&&i.jsxs("div",{children:["Turns Ratio: ",p.turns]})]}),p.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:p.signal&&i.jsxs("div",{children:["Signal: ",p.signal]})}),p.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[p.description&&i.jsxs("div",{children:["Description: ",p.description]}),p.icType&&i.jsxs("div",{children:["IC Type: ",p.icType]}),p.datasheet&&i.jsxs("div",{children:["Datasheet: ",i.jsx("a",{href:p.datasheet,target:"_blank",rel:"noopener noreferrer",children:p.datasheet})]})]}),p.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:p.tubeType&&i.jsxs("div",{children:["Type: ",p.tubeType]})}),p.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[p.vrType&&i.jsxs("div",{children:["Type: ",p.vrType]}),p.resistance&&i.jsxs("div",{children:["Resistance: ",p.resistance]}),p.power&&i.jsxs("div",{children:["Power: ",p.power]}),p.taper&&i.jsxs("div",{children:["Taper: ",p.taper]})]}),p.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[p.frequency&&i.jsxs("div",{children:["Frequency: ",p.frequency]}),p.loadCapacitance&&i.jsxs("div",{children:["Load Capacitance: ",p.loadCapacitance]}),p.tolerance&&i.jsxs("div",{children:["Tolerance: ",p.tolerance]})]}),p.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[p.voltage&&i.jsxs("div",{children:["Zener Voltage: ",p.voltage]}),p.power&&i.jsxs("div",{children:["Power: ",p.power]}),p.tolerance&&i.jsxs("div",{children:["Tolerance: ",p.tolerance]})]}),i.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:i.jsxs("div",{children:["Position: x=",p.x.toFixed(2),", y=",p.y.toFixed(2)]})})]})]},p.id))})(),x.size>0&&$.filter(T=>x.has(T.id)&&T.type==="via"&&T.points.length>0).map(T=>{const p=T.points[0],W=T.viaType||(p.id!==void 0?ne(p.id,De):"Via (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:W})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[p.id&&i.jsxs("div",{children:["Node ID: ",p.id]}),i.jsx("div",{children:"Layer: Top and Bottom"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",p.x.toFixed(2),", y=",p.y.toFixed(2)]})]})]},T.id)}),x.size>0&&$.filter(T=>x.has(T.id)&&T.type==="pad"&&T.points.length>0).map(T=>{const p=T.points[0],W=T.padType||(p.id!==void 0?ee(p.id,De):"Pad (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:W})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[p.id&&i.jsxs("div",{children:["Node ID: ",p.id]}),i.jsxs("div",{children:["Layer: ",T.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",p.x.toFixed(2),", y=",p.y.toFixed(2)]})]})]},T.id)}),x.size>0&&$.filter(T=>x.has(T.id)&&T.type==="trace").map(T=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||"unknown"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[T.points.length>0&&i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",T.points.length]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:T.points.map((p,W)=>i.jsxs("tr",{style:{backgroundColor:W%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:W}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:p.x.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:p.y.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:p.id||"(none)"})]},W))})]})]}),i.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",T.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]})]})]},T.id)),g.size>0&&de.filter(T=>g.has(T.id)).map(T=>{const p=De.find(W=>W.id===T.powerBusId);return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||(p?`${p.name} Power Node`:"Power Node")})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",T.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Layer: ",T.layer]}),i.jsxs("div",{children:["Power Bus: ",p?.name||T.powerBusId||"(unknown)"]}),i.jsxs("div",{children:["Position: x=",T.x.toFixed(2),", y=",T.y.toFixed(2)]})]})]},T.id)}),d.size>0&&Y.filter(T=>d.has(T.id)).map(T=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T.type||"Ground Node"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",T.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:T.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:T.color})]}),i.jsxs("div",{children:["Size: ",T.size]}),i.jsxs("div",{children:["Position: x=",T.x.toFixed(2),", y=",T.y.toFixed(2)]})]})]},T.id))]})})]})},Xn=200,ng=({visible:c,selectedIds:x,selectedComponentIds:S,selectedPowerIds:g,selectedGroundIds:d,drawingStrokes:$,componentsTop:oe,componentsBottom:Ce,powers:de,grounds:Y,powerBuses:De,onClose:me,setComponentsTop:we,setComponentsBottom:Oe,setDrawingStrokes:ne,setPowerSymbols:ee,setGroundSymbols:Me,determineViaType:He,determinePadType:H,position:k,isDragging:M,onDragStart:N})=>{const[T,p]=j.useState(new Map),W=j.useRef(""),he=()=>[...Array.from(x).sort(),...Array.from(S).sort(),...Array.from(g).sort(),...Array.from(d).sort()].join(",");if(j.useEffect(()=>{if(!c)return;const K=he();K!==W.current&&(W.current=K,p(ve=>{const R=new Map;return[...oe,...Ce].filter(E=>S.has(E.id)).forEach(E=>{const ue=ve.get(E.id);R.set(E.id,ue!==void 0?ue:E.notes||"")}),$.filter(E=>x.has(E.id)).forEach(E=>{const ue=ve.get(E.id);R.set(E.id,ue!==void 0?ue:E.notes||"")}),de.filter(E=>g.has(E.id)).forEach(E=>{const ue=ve.get(E.id);R.set(E.id,ue!==void 0?ue:E.notes||"")}),Y.filter(E=>d.has(E.id)).forEach(E=>{const ue=ve.get(E.id);R.set(E.id,ue!==void 0?ue:E.notes||"")}),R}))},[c,x,S,g,d,$,oe,Ce,de,Y]),!c)return null;const Le=k?{position:"fixed",left:`${k.x}px`,top:`${k.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:M?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},je={padding:"20px",overflow:"auto",flex:1},Ee=$.filter(K=>x.has(K.id)).length,Ne=[...oe,...Ce].filter(K=>S.has(K.id)).length,_t=de.filter(K=>g.has(K.id)).length,et=Y.filter(K=>d.has(K.id)).length,U=Ee+Ne+_t+et,Z=(K,ve)=>{const R=ve.length>Xn?ve.substring(0,Xn):ve;p(E=>{const ue=new Map(E);return ue.set(K,R),ue})},Te=()=>{we(K=>K.map(ve=>{if(S.has(ve.id)&&T.has(ve.id)){const R=T.get(ve.id)||"";return{...ve,notes:R.trim()===""?null:R.trim()}}return ve})),Oe(K=>K.map(ve=>{if(S.has(ve.id)&&T.has(ve.id)){const R=T.get(ve.id)||"";return{...ve,notes:R.trim()===""?null:R.trim()}}return ve})),ne(K=>K.map(ve=>{if(x.has(ve.id)&&T.has(ve.id)){const R=T.get(ve.id)||"";return{...ve,notes:R.trim()===""?null:R.trim()}}return ve})),ee(K=>K.map(ve=>{if(g.has(ve.id)&&T.has(ve.id)){const R=T.get(ve.id)||"";return{...ve,notes:R.trim()===""?null:R.trim()}}return ve})),Me(K=>K.map(ve=>{if(d.has(ve.id)&&T.has(ve.id)){const R=T.get(ve.id)||"";return{...ve,notes:R.trim()===""?null:R.trim()}}return ve}))};return i.jsxs("div",{style:Le,children:[i.jsxs("div",{onMouseDown:K=>{const ve=K.target;ve.tagName==="BUTTON"||ve.closest("button")||k&&N(K)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:M?"grabbing":k?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (Ctrl+N)"}),i.jsx("button",{onClick:me,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:je,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[i.jsx("div",{style:{padding:"12px 16px",backgroundColor:U>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:U>0?"#333":"#856404",marginBottom:"8px"},children:U>0?`${U} Object${U!==1?"s":""} Selected`:"Zero Objects Selected"}),U===0?i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):i.jsxs(i.Fragment,{children:[[...oe,...Ce].filter(K=>S.has(K.id)).map(K=>{const ve=T.get(K.id)||"",R=ve.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:K.componentType})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:ve,onChange:E=>Z(K.id,E.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Xn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:R>=Xn?"#d32f2f":"#666",textAlign:"right"},children:[R," / ",Xn]})]})]},K.id)}),$.filter(K=>x.has(K.id)&&K.type==="via"&&K.points.length>0).map(K=>{const ve=K.points[0],R=K.viaType||(ve.id!==void 0?He(ve.id,De):"Via (Signal)"),E=T.get(K.id)||"",ue=E.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:ve.id&&i.jsxs("div",{children:["Node ID: ",ve.id]})}),i.jsx("textarea",{value:E,onChange:Re=>Z(K.id,Re.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Xn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Xn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Xn]})]})]},K.id)}),$.filter(K=>x.has(K.id)&&K.type==="pad"&&K.points.length>0).map(K=>{const ve=K.points[0],R=K.padType||(ve.id!==void 0?H(ve.id,De):"Pad (Signal)"),E=T.get(K.id)||"",ue=E.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:ve.id&&i.jsxs("div",{children:["Node ID: ",ve.id]})}),i.jsx("textarea",{value:E,onChange:Re=>Z(K.id,Re.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Xn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Xn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Xn]})]})]},K.id)}),$.filter(K=>x.has(K.id)&&K.type==="trace").map(K=>{const ve=T.get(K.id)||"",R=ve.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:K.type||"unknown"})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:ve,onChange:E=>Z(K.id,E.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Xn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:R>=Xn?"#d32f2f":"#666",textAlign:"right"},children:[R," / ",Xn]})]})]},K.id)}),de.filter(K=>g.has(K.id)).map(K=>{const ve=De.find(Re=>Re.id===K.powerBusId),R=K.type||(ve?`${ve.name} Power Node`:"Power Node"),E=T.get(K.id)||"",ue=E.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",K.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:E,onChange:Re=>Z(K.id,Re.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Xn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ue>=Xn?"#d32f2f":"#666",textAlign:"right"},children:[ue," / ",Xn]})]})]},K.id)}),Y.filter(K=>d.has(K.id)).map(K=>{const ve=K.type||"Ground Node",R=T.get(K.id)||"",E=R.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ve})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",K.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:R,onChange:ue=>Z(K.id,ue.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Xn,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:E>=Xn?"#d32f2f":"#666",textAlign:"right"},children:[E," / ",Xn]})]})]},K.id)}),i.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[i.jsx("button",{onClick:Te,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:K=>{K.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:K=>{K.currentTarget.style.backgroundColor="#4CAF50"},children:"Save Notes"}),i.jsx("button",{onClick:me,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:K=>{K.currentTarget.style.backgroundColor="#616161"},onMouseLeave:K=>{K.currentTarget.style.backgroundColor="#757575"},children:"Close"})]})]})]})})]})},lg=({visible:c,dimensions:x,onSave:S,onClose:g})=>{const[d,$]=j.useState(""),[oe,Ce]=j.useState(""),[de,Y]=j.useState("inches");j.useEffect(()=>{c&&x?($(x.width.toString()),Ce(x.height.toString()),Y(x.unit)):c&&($(""),Ce(""),Y("inches"))},[c,x]);const De=()=>{const we=parseFloat(d),Oe=parseFloat(oe);if(isNaN(we)||we<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(Oe)||Oe<=0){alert("Please enter a valid height greater than 0");return}S({width:we,height:Oe,unit:de}),g()},me=()=>{g()};return c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:we=>{we.target===we.currentTarget&&me()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:we=>we.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:d,onChange:we=>$(we.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:de,onChange:we=>Y(we.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:oe,onChange:we=>Ce(we.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:de,onChange:we=>Y(we.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:me,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),i.jsx("button",{onClick:De,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},ig=({component:c,componentEditor:x,setComponentEditor:S,areComponentsLocked:g})=>i.jsxs(i.Fragment,{children:[c.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:x.resistance||"",onChange:d=>S({...x,resistance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:x.resistanceUnit||Ye("resistance"),onChange:d=>S({...x,resistanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:x.power||"1/4",onChange:d=>S({...x,power:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:x.tolerance||"5%",onChange:d=>S({...x,tolerance:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.05%",children:"0.05%"}),i.jsx("option",{value:"0.1%",children:"0.1%"}),i.jsx("option",{value:"0.25%",children:"0.25%"}),i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:x.capacitance||"",onChange:d=>S({...x,capacitance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:x.capacitanceUnit||Ye("capacitance"),onChange:d=>S({...x,capacitanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("capacitance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:x.voltageUnit||Ye("voltage"),onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-dielectric-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),i.jsxs("select",{id:`component-dielectric-${c.id}`,value:x.dielectric||"Ceramic",onChange:d=>S({...x,dielectric:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Ceramic",children:"Ceramic"}),i.jsx("option",{value:"Tantalum",children:"Tantalum"}),i.jsx("option",{value:"Film",children:"Film"}),i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Mica",children:"Mica"}),i.jsx("option",{value:"Paper",children:"Paper"}),i.jsx("option",{value:"Glass",children:"Glass"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:x.tolerance||"10%",onChange:d=>S({...x,tolerance:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:x.capacitance||"",onChange:d=>S({...x,capacitance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 100"}),i.jsxs("select",{value:x.capacitanceUnit||"F",onChange:d=>S({...x,capacitanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:[i.jsx("option",{value:"pF",children:"pF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"mF",children:"mF"}),i.jsx("option",{value:"F",children:"F"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 25"}),i.jsx("select",{value:x.voltageUnit||Ye("voltage"),onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:x.tolerance||"20%",onChange:d=>S({...x,tolerance:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:x.polarityCapacitor||c.polarity||"Positive",onChange:d=>S({...x,polarityCapacitor:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Positive",children:"Positive"}),i.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),c.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inductance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),i.jsx("input",{id:`component-inductance-${c.id}`,type:"text",value:x.inductance||"",onChange:d=>S({...x,inductance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:x.inductanceUnit||Ye("inductance"),onChange:d=>S({...x,inductanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("inductance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:x.currentUnit||Ye("current"),onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:x.resistance||"",onChange:d=>S({...x,resistance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:x.resistanceUnit||"",onChange:d=>S({...x,resistanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-diodetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),i.jsxs("select",{id:`component-diodetype-${c.id}`,value:x.diodeType||"Standard",onChange:d=>S({...x,diodeType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Standard",children:"Standard"}),i.jsx("option",{value:"Zener",children:"Zener"}),i.jsx("option",{value:"LED",children:"LED"}),i.jsx("option",{value:"Schottky",children:"Schottky"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),x.diodeType==="LED"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ledcolor-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),i.jsxs("select",{id:`component-ledcolor-${c.id}`,value:x.ledColor||"",onChange:d=>S({...x,ledColor:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"Red",children:"Red"}),i.jsx("option",{value:"Green",children:"Green"}),i.jsx("option",{value:"Blue",children:"Blue"}),i.jsx("option",{value:"Yellow",children:"Yellow"}),i.jsx("option",{value:"Orange",children:"Orange"}),i.jsx("option",{value:"White",children:"White"}),i.jsx("option",{value:"RGB",children:"RGB"}),i.jsx("option",{value:"IR",children:"IR (Infrared)"}),i.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:x.voltageUnit||Ye("voltage"),onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:x.currentUnit||Ye("current"),onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 3.7"}),i.jsx("select",{value:x.voltageUnit||"V",onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),i.jsx("input",{id:`component-capacity-${c.id}`,type:"text",value:x.capacity||"",onChange:d=>S({...x,capacity:d.target.value}),disabled:g,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 2000mAh"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-chemistry-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),i.jsxs("select",{id:`component-chemistry-${c.id}`,value:x.chemistry||"Li-ion",onChange:d=>S({...x,chemistry:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Li-ion",children:"Li-ion"}),i.jsx("option",{value:"LiPo",children:"LiPo"}),i.jsx("option",{value:"NiMH",children:"NiMH"}),i.jsx("option",{value:"NiCd",children:"NiCd"}),i.jsx("option",{value:"Alkaline",children:"Alkaline"}),i.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),i.jsx("option",{value:"Lithium",children:"Lithium"}),i.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),c.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:x.currentUnit||"A",onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:x.voltageUnit||"V",onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-fusetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),i.jsxs("select",{id:`component-fusetype-${c.id}`,value:x.fuseType||"Fast-blow",onChange:d=>S({...x,fuseType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),i.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),i.jsx("option",{value:"Time-delay",children:"Time-delay"}),i.jsx("option",{value:"Resettable",children:"Resettable"}),i.jsx("option",{value:"Cartridge",children:"Cartridge"}),i.jsx("option",{value:"Glass",children:"Glass"}),i.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),c.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-coilvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),i.jsx("input",{id:`component-coilvoltage-${c.id}`,type:"text",value:x.coilVoltage||"",onChange:d=>S({...x,coilVoltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:x.coilVoltageUnit||Ye("voltage"),onChange:d=>S({...x,coilVoltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-contacttype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),i.jsxs("select",{id:`component-contacttype-${c.id}`,value:x.contactType||"SPST",onChange:d=>S({...x,contactType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),i.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),i.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),i.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),i.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),i.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:x.currentUnit||Ye("current"),onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-motortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),i.jsxs("select",{id:`component-motortype-${c.id}`,value:x.motorType||"DC",onChange:d=>S({...x,motorType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"DC",children:"DC Motor"}),i.jsx("option",{value:"Stepper",children:"Stepper Motor"}),i.jsx("option",{value:"Servo",children:"Servo Motor"}),i.jsx("option",{value:"Brushless",children:"Brushless DC"}),i.jsx("option",{value:"AC",children:"AC Motor"}),i.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:x.voltageUnit||Ye("voltage"),onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:x.currentUnit||Ye("current"),onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-switchtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),i.jsxs("select",{id:`component-switchtype-${c.id}`,value:x.switchType||"Toggle",onChange:d=>S({...x,switchType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Toggle",children:"Toggle"}),i.jsx("option",{value:"Push-button",children:"Push-button"}),i.jsx("option",{value:"Slide",children:"Slide"}),i.jsx("option",{value:"Rotary",children:"Rotary"}),i.jsx("option",{value:"DIP",children:"DIP Switch"}),i.jsx("option",{value:"Momentary",children:"Momentary"}),i.jsx("option",{value:"Latching",children:"Latching"}),i.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:x.currentUnit||Ye("current"),onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:x.voltageUnit||Ye("voltage"),onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:x.impedance||"",onChange:d=>S({...x,impedance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:x.impedanceUnit||Ye("impedance"),onChange:d=>S({...x,impedanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("impedance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:x.currentUnit||Ye("current"),onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-connectortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),i.jsx("input",{id:`component-connectortype-${c.id}`,type:"text",value:x.connectorType||"",onChange:d=>S({...x,connectorType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-gender-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),i.jsxs("select",{id:`component-gender-${c.id}`,value:x.gender||"N/A",onChange:d=>S({...x,gender:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),c.componentType==="Jumper"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-positions-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),i.jsx("input",{id:`component-positions-${c.id}`,type:"number",min:"2",value:x.positions||3,onChange:d=>S({...x,positions:parseInt(d.target.value)||3}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"}})]})}),c.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:x.impedance||"",onChange:d=>S({...x,impedance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 8"}),i.jsx("select",{value:x.impedanceUnit||Ye("impedance"),onChange:d=>S({...x,impedanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("impedance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:x.power||"1/4",onChange:d=>S({...x,power:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]})]}),c.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),i.jsx("input",{id:`component-inputvoltage-${c.id}`,type:"text",value:x.inputVoltage||"",onChange:d=>S({...x,inputVoltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:x.inputVoltageUnit||Ye("voltage"),onChange:d=>S({...x,inputVoltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-outputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),i.jsx("input",{id:`component-outputvoltage-${c.id}`,type:"text",value:x.outputVoltage||"",onChange:d=>S({...x,outputVoltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:x.outputVoltageUnit||Ye("voltage"),onChange:d=>S({...x,outputVoltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:x.currentUnit||Ye("current"),onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-transistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),i.jsxs("select",{id:`component-transistortype-${c.id}`,value:x.transistorType||"BJT",onChange:d=>S({...x,transistorType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),i.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),i.jsx("option",{value:"MOSFET",children:"MOSFET"}),i.jsx("option",{value:"IGBT",children:"IGBT"}),i.jsx("option",{value:"JFET",children:"JFET"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:x.polarity||"NPN",onChange:d=>S({...x,polarity:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NPN",children:"NPN"}),i.jsx("option",{value:"PNP",children:"PNP"}),i.jsx("option",{value:"N-Channel",children:"N-Channel"}),i.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:x.voltageUnit||Ye("voltage"),onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:x.current||"",onChange:d=>S({...x,current:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:x.currentUnit||Ye("current"),onChange:d=>S({...x,currentUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("current").map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),c.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:x.resistance||"",onChange:d=>S({...x,resistance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:x.resistanceUnit||Ye("resistance"),onChange:d=>S({...x,resistanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-configuration-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),i.jsx("input",{id:`component-configuration-${c.id}`,type:"text",value:x.configuration||"",onChange:d=>S({...x,configuration:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),c.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:x.resistance||"",onChange:d=>S({...x,resistance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:x.resistanceUnit||Ye("resistance"),onChange:d=>S({...x,resistanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-thermistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),i.jsxs("select",{id:`component-thermistortype-${c.id}`,value:x.thermistorType||"NTC",onChange:d=>S({...x,thermistorType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),i.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-beta-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),i.jsx("input",{id:`component-beta-${c.id}`,type:"text",value:x.beta||"",onChange:d=>S({...x,beta:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),c.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-primaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),i.jsx("input",{id:`component-primaryvoltage-${c.id}`,type:"text",value:x.primaryVoltage||"",onChange:d=>S({...x,primaryVoltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:x.primaryVoltageUnit||Ye("voltage"),onChange:d=>S({...x,primaryVoltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-secondaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),i.jsx("input",{id:`component-secondaryvoltage-${c.id}`,type:"text",value:x.secondaryVoltage||"",onChange:d=>S({...x,secondaryVoltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:x.secondaryVoltageUnit||Ye("voltage"),onChange:d=>S({...x,secondaryVoltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:x.power||"1/4",onChange:d=>S({...x,power:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-turns-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),i.jsx("input",{id:`component-turns-${c.id}`,type:"text",value:x.turns||"",onChange:d=>S({...x,turns:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),c.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-signal-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),i.jsx("input",{id:`component-signal-${c.id}`,type:"text",value:x.signal||"",onChange:d=>S({...x,signal:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),c.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ictype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),i.jsxs("select",{id:`component-ictype-${c.id}`,value:x.icType||"Op-Amp",onChange:d=>S({...x,icType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),i.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),i.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),i.jsx("option",{value:"Logic",children:"Logic"}),i.jsx("option",{value:"Memory",children:"Memory"}),i.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),i.jsx("option",{value:"Timer",children:"Timer"}),i.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),i.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),i.jsx("option",{value:"Comparator",children:"Comparator"}),i.jsx("option",{value:"Transceiver",children:"Transceiver"}),i.jsx("option",{value:"Driver",children:"Driver"}),i.jsx("option",{value:"Amplifier",children:"Amplifier"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-datasheet-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),i.jsx("input",{id:`component-datasheet-${c.id}`,type:"text",value:x.datasheet||"",onChange:d=>S({...x,datasheet:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"URL"})]})]}),c.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tubetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),i.jsx("input",{id:`component-tubetype-${c.id}`,type:"text",value:x.tubeType||"",onChange:d=>S({...x,tubeType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),c.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-vrtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),i.jsxs("select",{id:`component-vrtype-${c.id}`,value:x.vrType||"Potentiometer",onChange:d=>S({...x,vrType:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),i.jsx("option",{value:"Rheostat",children:"Rheostat"}),i.jsx("option",{value:"Trimmer",children:"Trimmer"}),i.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:x.resistance||"",onChange:d=>S({...x,resistance:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:x.resistanceUnit||Ye("resistance"),onChange:d=>S({...x,resistanceUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("resistance").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:x.power||"1/4",onChange:d=>S({...x,power:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-taper-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),i.jsxs("select",{id:`component-taper-${c.id}`,value:x.taper||"Linear",onChange:d=>S({...x,taper:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Linear",children:"Linear"}),i.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),i.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),c.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-frequency-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),i.jsx("input",{id:`component-frequency-${c.id}`,type:"text",value:x.frequency||"",onChange:d=>S({...x,frequency:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-loadcapacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),i.jsx("input",{id:`component-loadcapacitance-${c.id}`,type:"text",value:x.loadCapacitance||"",onChange:d=>S({...x,loadCapacitance:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:x.tolerance||"10ppm",onChange:d=>S({...x,tolerance:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"10ppm",children:"10ppm"}),i.jsx("option",{value:"20ppm",children:"20ppm"}),i.jsx("option",{value:"30ppm",children:"30ppm"}),i.jsx("option",{value:"50ppm",children:"50ppm"}),i.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),c.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:x.voltage||"",onChange:d=>S({...x,voltage:d.target.value}),disabled:g,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1},placeholder:"e.g., 5.1"}),i.jsx("select",{value:x.voltageUnit||Ye("voltage"),onChange:d=>S({...x,voltageUnit:d.target.value}),disabled:g,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,width:"60px",marginRight:"12px"},children:Pt("voltage").map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:x.power||"1/4",onChange:d=>S({...x,power:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:x.tolerance||"5%",onChange:d=>S({...x,tolerance:d.target.value}),disabled:g,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:g?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),ag=c=>{const x=zu[c];return!x||!x.prefix||x.prefix.length<1?"?":x.prefix[0].substring(0,1).toUpperCase()},og=({componentEditor:c,setComponentEditor:x,componentsTop:S,componentsBottom:g,setComponentsTop:d,setComponentsBottom:$,connectingPin:oe,setConnectingPin:Ce,componentDialogPosition:de,setComponentDialogPosition:Y,isDraggingDialog:De,setIsDraggingDialog:me,dialogDragOffset:we,setDialogDragOffset:Oe,areComponentsLocked:ne})=>{if(!c||!c.visible)return null;let ee=S.find(k=>k.id===c.id),Me="top";if(ee||(ee=g.find(k=>k.id===c.id),Me="bottom"),!ee)return null;c.layer!==Me&&x({...c,layer:Me});const He=k=>{const M={...k},N=c.abbreviation?.trim()||"",T=c.designator?.trim()||"";if(M.designator=T&&T!=="?"&&T!=="??"&&T!=="***"&&T!=="****"&&T!=="*"?T:N||c.designator||"",M.x=c.x,M.y=c.y,M.layer=c.layer,M.orientation=c.orientation??0,M.abbreviation=c.abbreviation.trim()||ag(k.componentType),"manufacturer"in M&&(M.manufacturer=c.manufacturer),"partNumber"in M&&(M.partNumber=c.partNumber),c.pinCount!==k.pinCount){M.pinCount=c.pinCount;const p=k.pinConnections||[];if(M.pinConnections=new Array(c.pinCount).fill("").map((W,he)=>he<p.length?p[he]:""),k.pinPolarities){const W=k.pinPolarities||[];M.pinPolarities=new Array(c.pinCount).fill("").map((he,Le)=>Le<W.length?W[Le]:"")}}else M.pinConnections=k.pinConnections||[],k.pinPolarities&&(M.pinPolarities=k.pinPolarities);return k.componentType==="Resistor"?(M.resistance=c.resistance||void 0,M.resistanceUnit=c.resistanceUnit||void 0,M.power=c.power?`${c.power}W`:void 0,M.tolerance=c.tolerance||void 0):k.componentType==="Capacitor"?(M.capacitance=c.capacitance||void 0,M.capacitanceUnit=c.capacitanceUnit||void 0,M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0,M.tolerance=c.tolerance||void 0,M.dielectric=c.dielectric||void 0):k.componentType==="Electrolytic Capacitor"?(M.capacitance=c.capacitance||void 0,M.capacitanceUnit=c.capacitanceUnit||void 0,M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0,M.tolerance=c.tolerance||void 0,M.polarity=c.polarityCapacitor||void 0,M.esr=c.esr||void 0,M.esrUnit=c.esrUnit||void 0,M.temperature=c.temperature||void 0):k.componentType==="Diode"?(M.diodeType=c.diodeType||void 0,M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0,M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0,M.ledColor=c.ledColor||void 0):k.componentType==="Battery"?(M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0,M.capacity=c.capacity||void 0,M.capacityUnit=c.capacityUnit||void 0,M.chemistry=c.chemistry||void 0):k.componentType==="Fuse"?(M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0,M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0,M.fuseType=c.fuseType||void 0):k.componentType==="FerriteBead"?(M.impedance=c.impedance||void 0,M.impedanceUnit=c.impedanceUnit||void 0,M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0):k.componentType==="Connector"?(M.connectorType=c.connectorType||void 0,M.gender=c.gender||void 0):k.componentType==="Jumper"?M.positions=c.positions||void 0:k.componentType==="Relay"?(M.coilVoltage=c.coilVoltage||void 0,M.coilVoltageUnit=c.coilVoltageUnit||void 0,M.contactType=c.contactType||void 0,M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0):k.componentType==="Inductor"?(M.inductance=c.inductance||void 0,M.inductanceUnit=c.inductanceUnit||void 0,M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0,M.resistance=c.resistance||void 0,M.resistanceUnit=c.resistanceUnit||void 0):k.componentType==="Speaker"?(M.impedance=c.impedance||void 0,M.impedanceUnit=c.impedanceUnit||void 0,M.power=c.power?`${c.power}W`:void 0):k.componentType==="Motor"?(M.motorType=c.motorType||void 0,M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0,M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0):k.componentType==="PowerSupply"?(M.inputVoltage=c.inputVoltage||void 0,M.inputVoltageUnit=c.inputVoltageUnit||void 0,M.outputVoltage=c.outputVoltage||void 0,M.outputVoltageUnit=c.outputVoltageUnit||void 0,M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0):k.componentType==="Transistor"?(M.transistorType=c.transistorType||void 0,M.polarity=c.polarity||void 0,M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0,M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0):k.componentType==="ResistorNetwork"?(M.resistance=c.resistance||void 0,M.resistanceUnit=c.resistanceUnit||void 0,M.configuration=c.configuration||void 0):k.componentType==="Thermistor"?(M.resistance=c.resistance||void 0,M.resistanceUnit=c.resistanceUnit||void 0,M.thermistorType=c.thermistorType||void 0,M.beta=c.beta||void 0):k.componentType==="Switch"?(M.switchType=c.switchType||void 0,M.current=c.current||void 0,M.currentUnit=c.currentUnit||void 0,M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0):k.componentType==="Transformer"?(M.primaryVoltage=c.primaryVoltage||void 0,M.primaryVoltageUnit=c.primaryVoltageUnit||void 0,M.secondaryVoltage=c.secondaryVoltage||void 0,M.secondaryVoltageUnit=c.secondaryVoltageUnit||void 0,M.power=c.power?`${c.power}W`:void 0,M.turns=c.turns||void 0):k.componentType==="TestPoint"?M.signal=c.signal||void 0:k.componentType==="IntegratedCircuit"?(M.description=c.description||c.designator||void 0,M.datasheet=c.datasheet||void 0,M.icType=c.icType||void 0,c.description&&(M.designator=c.description)):k.componentType==="VacuumTube"?M.tubeType=c.tubeType||void 0:k.componentType==="VariableResistor"?(M.vrType=c.vrType||void 0,M.resistance=c.resistance||void 0,M.resistanceUnit=c.resistanceUnit||void 0,M.power=c.power?`${c.power}W`:void 0,M.taper=c.taper||void 0):k.componentType==="Crystal"?(M.frequency=c.frequency||void 0,M.loadCapacitance=c.loadCapacitance||void 0,M.tolerance=c.tolerance||void 0):k.componentType==="ZenerDiode"&&(M.voltage=c.voltage||void 0,M.voltageUnit=c.voltageUnit||void 0,M.power=c.power?`${c.power}W`:void 0,M.tolerance=c.tolerance||void 0),M},H=()=>{if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const k=S.find(T=>T.id===c.id),M=g.find(T=>T.id===c.id),N=k||M;if(N){const T=He(N),p=N.layer,W=c.layer;p!==W?p==="top"?(d(he=>he.filter(Le=>Le.id!==c.id)),$(he=>[...he,T])):($(he=>he.filter(Le=>Le.id!==c.id)),d(he=>[...he,T])):W==="top"?d(he=>he.map(Le=>Le.id===c.id?T:Le)):$(he=>he.map(Le=>Le.id===c.id?T:Le))}else if(console.warn(`Component ${c.id} not found in either layer array`),c.layer==="top"){const T=g.find(p=>p.id===c.id);if(T){const p=He(T);$(W=>W.filter(he=>he.id!==c.id)),d(W=>[...W,p])}}else{const T=S.find(p=>p.id===c.id);if(T){const p=He(T);d(W=>W.filter(he=>he.id!==c.id)),$(W=>[...W,p])}}x(null),Ce(null)};return i.jsxs("div",{"data-component-editor-dialog":!0,onClick:k=>{if(oe&&oe.componentId===ee.id){const M=k.target;(M.tagName==="BUTTON"||M.tagName==="INPUT"||M.closest("button")||M.closest("input"))&&k.stopPropagation()}},style:{position:"fixed",top:de?`${de.y}px`:"50%",left:de?`${de.x}px`:"50%",transform:"translate(-50%, -50%)",background:oe&&oe.componentId===ee.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:De?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:k=>{const M=k.target;M.tagName==="BUTTON"||M.tagName==="INPUT"||M.closest("button")||M.closest("input")||de&&(Oe({x:k.clientX-de.x,y:k.clientY-de.y}),me(!0),k.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:De?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),i.jsx("button",{onClick:()=>{x(null),Ce(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),i.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:ee.componentType})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-layer-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),i.jsxs("select",{id:`component-layer-${ee.id}`,name:`component-layer-${ee.id}`,value:c.layer,onChange:k=>x({...c,layer:k.target.value}),disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-orientation-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),i.jsxs("select",{id:`component-orientation-${ee.id}`,name:`component-orientation-${ee.id}`,value:c.orientation??0,onChange:k=>{const M=parseInt(k.target.value)||0;if(x({...c,orientation:M}),!ne){const T=(c.layer==="top"?S:g).find(p=>p.id===c.id);if(T){const p={...T,orientation:M};c.layer==="top"?d(W=>W.map(he=>he.id===c.id?p:he)):$(W=>W.map(he=>he.id===c.id?p:he))}}},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0",children:"0"}),i.jsx("option",{value:"90",children:"90"}),i.jsx("option",{value:"180",children:"180"}),i.jsx("option",{value:"270",children:"270"})]})]}),i.jsx(ig,{component:ee,componentEditor:c,setComponentEditor:x,areComponentsLocked:ne}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{htmlFor:`component-abbreviation-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),i.jsx("input",{id:`component-abbreviation-${ee.id}`,name:`component-abbreviation-${ee.id}`,type:"text",maxLength:4,value:c.abbreviation.replace(/\*/g,""),onChange:k=>{const M=k.target.value.substring(0,4).toUpperCase();x({...c,abbreviation:M})},onBlur:k=>{const M=k.target.value.substring(0,4).toUpperCase();x({...c,abbreviation:M})},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:ne?.6:1},placeholder:"e.g., U2, R7, C1"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-description-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),i.jsx("input",{id:`component-description-${ee.id}`,name:`component-description-${ee.id}`,type:"text",value:ee.componentType==="IntegratedCircuit"?c.description||c.designator||"":c.designator||"",onChange:k=>{ee.componentType==="IntegratedCircuit"?x({...c,description:k.target.value,designator:k.target.value}):x({...c,designator:k.target.value})},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1},placeholder:ee.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-x-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),i.jsx("input",{id:`component-x-${ee.id}`,name:`component-x-${ee.id}`,type:"number",value:c.x.toFixed(2),onChange:k=>{const M=parseFloat(k.target.value)||0;x({...c,x:M})},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-y-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),i.jsx("input",{id:`component-y-${ee.id}`,name:`component-y-${ee.id}`,type:"number",value:c.y.toFixed(2),onChange:k=>{const M=parseFloat(k.target.value)||0;x({...c,y:M})},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-manufacturer-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),i.jsx("input",{id:`component-manufacturer-${ee.id}`,name:`component-manufacturer-${ee.id}`,type:"text",value:c.manufacturer,onChange:k=>x({...c,manufacturer:k.target.value}),disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-partnumber-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),i.jsx("input",{id:`component-partnumber-${ee.id}`,name:`component-partnumber-${ee.id}`,type:"text",value:c.partNumber,onChange:k=>x({...c,partNumber:k.target.value}),disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${ee.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${ee.id}`,name:`component-pincount-${ee.id}`,type:"number",min:"1",value:c.pinCount,onChange:k=>{const M=Math.max(1,parseInt(k.target.value)||1);x({...c,pinCount:M})},onBlur:k=>{if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const M=Math.max(1,parseInt(k.target.value)||1),T=(c.layer==="top"?S:g).find(p=>p.id===c.id);if(T&&M!==T.pinCount){const p=T.pinConnections||[],W=new Array(M).fill("").map((Ee,Ne)=>Ne<p.length?p[Ne]:""),he=T.pinPolarities||[],Le=T.pinPolarities?new Array(M).fill("").map((Ee,Ne)=>Ne<he.length?he[Ne]:""):void 0,je={...T,pinCount:M,pinConnections:W,...Le!==void 0&&{pinPolarities:Le}};c.layer==="top"?d(Ee=>Ee.map(Ne=>Ne.id===c.id?je:Ne)):$(Ee=>Ee.map(Ne=>Ne.id===c.id?je:Ne)),x({...c,pinCount:M})}},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),oe&&oe.componentId===ee.id&&i.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",oe.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const k=ee.componentType==="Electrolytic Capacitor"||ee.componentType==="Diode"||ee.componentType==="Battery"||ee.componentType==="ZenerDiode",M=ee.componentType==="Capacitor"&&"dielectric"in ee&&ee.dielectric==="Tantalum",N=k||M;return i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),N&&i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),i.jsx("tbody",{children:Array.from({length:c.pinCount},(T,p)=>{const he=(c.layer==="top"?S:g).find(Ne=>Ne.id===c.id),Le=he?.pinConnections&&he.pinConnections.length>p?he.pinConnections[p]:"",je=he?.pinPolarities&&he.pinPolarities.length>p&&he.pinPolarities[p]||"",Ee=oe&&oe.componentId===ee.id&&oe.pinIndex===p;return i.jsxs("tr",{style:{cursor:ne?"not-allowed":"pointer",background:Ee?"#e6f0ff":Le?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:Ne=>{if(Ne.target.tagName!=="SELECT"){if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}Ce(Ee?null:{componentId:ee.id,pinIndex:p})}},title:Le?`Connected to: ${Le}`:"Select this pin, then click on a via or pad to connect",children:[i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsx("input",{id:`pin-radio-${ee.id}-${p}`,name:`pin-radio-${ee.id}`,type:"radio",checked:!!Ee,onChange:()=>{if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}Ce(Ee?null:{componentId:ee.id,pinIndex:p})},disabled:ne,style:{margin:0,cursor:ne?"not-allowed":"pointer",opacity:ne?.6:1,width:"10px",height:"10px"}})}),i.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:Ee?600:400,fontFamily:"monospace"},children:p+1}),N&&i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsxs("select",{value:je??"",onChange:Ne=>{if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const _t=Ne.target.value,U=(c.layer==="top"?S:g).find(Z=>Z.id===c.id);if(U){const Te=[...U.pinPolarities||new Array(U.pinCount).fill("")];for(;Te.length<U.pinCount;)Te.push("");Te[p]=_t;const K={...U,pinPolarities:Te};c.layer==="top"?d(ve=>ve.map(R=>R.id===c.id?K:R)):$(ve=>ve.map(R=>R.id===c.id?K:R))}},disabled:ne,onClick:Ne=>Ne.stopPropagation(),onFocus:Ne=>Ne.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:ne?"not-allowed":"pointer",opacity:ne?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[i.jsx("option",{value:"",children:"-"}),i.jsx("option",{value:"+",children:"+"}),i.jsx("option",{value:"-",children:"-"})]},`polarity-${ee.id}-${p}-${je}`)}),i.jsx("td",{style:{padding:"2px 4px",color:Le?"#28a745":"#999",fontWeight:Le?600:400,fontFamily:"monospace"},children:Le||"-"})]},p)})})]})})()]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[i.jsx("button",{onClick:()=>{x(null),Ce(null)},disabled:ne,style:{padding:"2px 5px",background:ne?"#f5f5f5":"#fff",color:ne?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:ne?"not-allowed":"pointer",fontSize:"10px",opacity:ne?.6:1},children:"Cancel"}),i.jsx("button",{onClick:H,disabled:ne,style:{padding:"2px 5px",background:ne?"#f5f5f5":"#0b5fff",color:ne?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:ne?"not-allowed":"pointer",fontSize:"10px",opacity:ne?.6:1},children:"Save"})]})]})};function sg(){const[c,x]=j.useState([]),[S,g]=j.useState(!1),[d,$]=j.useState([]),[oe,Ce]=j.useState(null),[de,Y]=j.useState("trace"),[De,me]=j.useState("top"),we=j.useRef([]),Oe=j.useRef(0),ne=j.useRef(!1),ee=j.useCallback(()=>{g(!0),$([]),we.current=[]},[]),Me=j.useCallback(()=>{g(!1),$([]),we.current=[]},[]),He=j.useCallback(k=>{$(M=>[...M,k]),we.current=[...we.current,k]},[]),H=j.useCallback(k=>{x(M=>[...M,k]),$([]),we.current=[]},[]);return{drawingStrokes:c,setDrawingStrokes:x,isDrawing:S,setIsDrawing:g,currentStroke:d,setCurrentStroke:$,tracePreviewMousePos:oe,setTracePreviewMousePos:Ce,drawingMode:de,setDrawingMode:Y,selectedDrawingLayer:De,setSelectedDrawingLayer:me,currentStrokeRef:we,lastTraceClickTimeRef:Oe,isDoubleClickingTraceRef:ne,startDrawing:ee,stopDrawing:Me,addPointToStroke:He,finishStroke:H}}function rg(){const[c,x]=j.useState(new Set),[S,g]=j.useState(!1),[d,$]=j.useState(new Set),[oe,Ce]=j.useState(new Set),[de,Y]=j.useState(new Set),De=j.useCallback(()=>{x(new Set),$(new Set),Ce(new Set),Y(new Set)},[]),me=j.useCallback((ne,ee="stroke")=>{ee==="stroke"?x(Me=>new Set([...Me,ne])):ee==="component"?$(Me=>new Set([...Me,ne])):ee==="power"?Ce(Me=>new Set([...Me,ne])):ee==="ground"&&Y(Me=>new Set([...Me,ne]))},[]),we=j.useCallback((ne,ee="stroke")=>{ee==="stroke"?x(Me=>{const He=new Set(Me);return He.delete(ne),He}):ee==="component"?$(Me=>{const He=new Set(Me);return He.delete(ne),He}):ee==="power"?Ce(Me=>{const He=new Set(Me);return He.delete(ne),He}):ee==="ground"&&Y(Me=>{const He=new Set(Me);return He.delete(ne),He})},[]),Oe=j.useCallback((ne,ee="stroke")=>{ee==="stroke"?x(ne):ee==="component"?$(ne):ee==="power"?Ce(ne):ee==="ground"&&Y(ne)},[]);return{selectedIds:c,setSelectedIds:x,isSelecting:S,setIsSelecting:g,selectedComponentIds:d,setSelectedComponentIds:$,selectedPowerIds:oe,setSelectedPowerIds:Ce,selectedGroundIds:de,setSelectedGroundIds:Y,clearSelection:De,addToSelection:me,removeFromSelection:we,setSelection:Oe}}function cg(){const[c,x]=j.useState(null),[S,g]=j.useState(!1),[d,$]=j.useState(null),[oe,Ce]=j.useState("nudge"),de=j.useCallback((De,me)=>{x(De),g(!0),$(me)},[]),Y=j.useCallback(()=>{g(!1),x(null),$(null)},[]);return{selectedImageForTransform:c,setSelectedImageForTransform:x,isTransforming:S,setIsTransforming:g,transformStartPos:d,setTransformStartPos:$,transformMode:oe,setTransformMode:Ce,startTransform:de,stopTransform:Y}}function ug(){const[c,x]=j.useState(null),[S,g]=j.useState(null),[d,$]=j.useState("overlay"),[oe,Ce]=j.useState(50),[de,Y]=j.useState(!1),[De,me]=j.useState(!1),[we,Oe]=j.useState(!1),[ne,ee]=j.useState(!1),Me=j.useCallback(k=>{x(k)},[]),He=j.useCallback(k=>{g(k)},[]),H=j.useCallback(()=>{x(null),g(null)},[]);return{topImage:c,setTopImage:x,bottomImage:S,setBottomImage:g,currentView:d,setCurrentView:$,transparency:oe,setTransparency:Ce,isTransparencyCycling:de,setIsTransparencyCycling:Y,isGrayscale:De,setIsGrayscale:me,isBlackAndWhiteEdges:we,setIsBlackAndWhiteEdges:Oe,isBlackAndWhiteInverted:ne,setIsBlackAndWhiteInverted:ee,loadTopImage:Me,loadBottomImage:He,clearImages:H}}function dg(){const[c,x]=j.useState(1),[S,g]=j.useState({x:0,y:0}),[d,$]=j.useState(!1),[oe,Ce]=j.useState(!1),de=j.useCallback(()=>{x(1),g({x:0,y:0})},[]),Y=j.useCallback((ne=1.2)=>{x(ee=>ee*ne)},[]),De=j.useCallback((ne=1.2)=>{x(ee=>ee/ne)},[]),me=j.useCallback(ne=>{x(ne)},[]),we=j.useCallback((ne,ee)=>{g(Me=>({x:Me.x+ne,y:Me.y+ee}))},[]),Oe=j.useCallback((ne,ee)=>{g({x:ne,y:ee})},[]);return{viewScale:c,setViewScale:x,viewPan:S,setViewPan:g,isShiftConstrained:d,setIsShiftConstrained:$,showBothLayers:oe,setShowBothLayers:Ce,resetView:de,zoomIn:Y,zoomOut:De,setZoom:me,pan:we,setPan:Oe}}function Ct(c,x,S,g){if(x==="power"){const $=c[x]||"";return typeof $=="string"&&$.trim()!==""?{value:$.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[x]!==void 0||c[S]!==void 0)return{value:c[x]||"",unit:c[S]||g};const d=c[x]||"";return typeof d=="string"&&d.trim()!==""?fg(d):{value:"",unit:g}}function fg(c){if(!c||c.trim()==="")return{value:"",unit:""};const x=c.trim(),S=x.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(S)return{value:S[1],unit:S[2]||""};const g=x.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return g?{value:g[1],unit:g[2]||""}:{value:x,unit:""}}function pg(){const[c,x]=j.useState([]),[S,g]=j.useState([]),[d,$]=j.useState(null),[oe,Ce]=j.useState(null),[de,Y]=j.useState(null),[De,me]=j.useState(!1),[we,Oe]=j.useState(null),ne=j.useCallback((k,M)=>{M==="top"?x(N=>[...N,k]):g(N=>[...N,k])},[]),ee=j.useCallback((k,M,N)=>{N==="top"?x(T=>T.map(p=>p.id===k?{...p,...M}:p)):g(T=>T.map(p=>p.id===k?{...p,...M}:p))},[]),Me=j.useCallback((k,M)=>{M==="top"?x(N=>N.filter(T=>T.id!==k)):g(N=>N.filter(T=>T.id!==k))},[]),He=j.useCallback((k,M)=>{const N={visible:!0,layer:M,id:k.id,designator:k.designator||"",abbreviation:k.abbreviation||"",manufacturer:"manufacturer"in k&&k.manufacturer||"",partNumber:"partNumber"in k&&k.partNumber||"",pinCount:k.pinCount,x:k.x,y:k.y,orientation:k.orientation??0};if(k.componentType==="Resistor"){const T=k,p=Ct(T,"resistance","resistanceUnit",Ye("resistance"));N.resistance=p.value,N.resistanceUnit=p.unit;const W=Ct(T,"power","powerUnit","W");N.power=W.value||"1/4",N.tolerance=T.tolerance||"5%"}else if(k.componentType==="Capacitor"){const T=k,p=Ct(T,"capacitance","capacitanceUnit",Ye("capacitance"));N.capacitance=p.value,N.capacitanceUnit=p.unit;const W=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=W.value,N.voltageUnit=W.unit,N.tolerance=T.tolerance||"10%",N.dielectric=T.dielectric||"Ceramic"}else if(k.componentType==="Electrolytic Capacitor"){const T=k,p=Ct(T,"capacitance","capacitanceUnit",Ye("capacitance"));N.capacitance=p.value,N.capacitanceUnit=p.unit;const W=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=W.value,N.voltageUnit=W.unit,N.tolerance=T.tolerance||"20%",N.polarityCapacitor=T.polarity||"Positive";const he=Ct(T,"esr","esrUnit",Ye("esr"));N.esr=he.value,N.esrUnit=he.unit,N.temperature=T.temperature||""}else if(k.componentType==="Diode"){const T=k;N.diodeType=T.diodeType||"Standard";const p=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=p.value,N.voltageUnit=p.unit;const W=Ct(T,"current","currentUnit",Ye("current"));N.current=W.value,N.currentUnit=W.unit,N.ledColor=T.ledColor||""}else if(k.componentType==="Battery"){const T=k,p=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=p.value,N.voltageUnit=p.unit;const W=Ct(T,"capacity","capacityUnit",Ye("capacity"));N.capacity=W.value,N.capacityUnit=W.unit,N.chemistry=T.chemistry||"Li-ion"}else if(k.componentType==="Fuse"){const T=k,p=Ct(T,"current","currentUnit",Ye("current"));N.current=p.value,N.currentUnit=p.unit;const W=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=W.value,N.voltageUnit=W.unit,N.fuseType=T.fuseType||"Fast-blow"}else if(k.componentType==="FerriteBead"){const T=k,p=Ct(T,"impedance","impedanceUnit",Ye("impedance"));N.impedance=p.value,N.impedanceUnit=p.unit;const W=Ct(T,"current","currentUnit",Ye("current"));N.current=W.value,N.currentUnit=W.unit}else if(k.componentType==="Connector"){const T=k;N.connectorType=T.connectorType||"",N.gender=T.gender||"N/A"}else if(k.componentType==="Jumper"){const T=k;N.positions=T.positions||3}else if(k.componentType==="Relay"){const T=k,p=Ct(T,"coilVoltage","coilVoltageUnit",Ye("coilVoltage"));N.coilVoltage=p.value,N.coilVoltageUnit=p.unit,N.contactType=T.contactType||"SPST";const W=Ct(T,"current","currentUnit",Ye("current"));N.current=W.value,N.currentUnit=W.unit}else if(k.componentType==="Inductor"){const T=k,p=Ct(T,"inductance","inductanceUnit",Ye("inductance"));N.inductance=p.value,N.inductanceUnit=p.unit;const W=Ct(T,"current","currentUnit",Ye("current"));N.current=W.value,N.currentUnit=W.unit;const he=Ct(T,"resistance","resistanceUnit",Ye("resistance"));N.resistance=he.value,N.resistanceUnit=he.unit}else if(k.componentType==="Speaker"){const T=k,p=Ct(T,"impedance","impedanceUnit",Ye("impedance"));N.impedance=p.value,N.impedanceUnit=p.unit;const W=Ct(T,"power","powerUnit","W");N.power=W.value||"1"}else if(k.componentType==="Motor"){const T=k;N.motorType=T.motorType||"DC";const p=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=p.value,N.voltageUnit=p.unit;const W=Ct(T,"current","currentUnit",Ye("current"));N.current=W.value,N.currentUnit=W.unit}else if(k.componentType==="PowerSupply"){const T=k,p=Ct(T,"inputVoltage","inputVoltageUnit",Ye("inputVoltage"));N.inputVoltage=p.value,N.inputVoltageUnit=p.unit;const W=Ct(T,"outputVoltage","outputVoltageUnit",Ye("outputVoltage"));N.outputVoltage=W.value,N.outputVoltageUnit=W.unit;const he=Ct(T,"current","currentUnit",Ye("current"));N.current=he.value,N.currentUnit=he.unit}else if(k.componentType==="Transistor"){const T=k;N.transistorType=T.transistorType||"BJT",N.polarity=T.polarity||"NPN";const p=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=p.value,N.voltageUnit=p.unit;const W=Ct(T,"current","currentUnit",Ye("current"));N.current=W.value,N.currentUnit=W.unit}else if(k.componentType==="ResistorNetwork"){const T=k,p=Ct(T,"resistance","resistanceUnit",Ye("resistance"));N.resistance=p.value,N.resistanceUnit=p.unit,N.configuration=T.configuration||""}else if(k.componentType==="Thermistor"){const T=k,p=Ct(T,"resistance","resistanceUnit",Ye("resistance"));N.resistance=p.value,N.resistanceUnit=p.unit,N.thermistorType=T.thermistorType||"NTC",N.beta=T.beta||""}else if(k.componentType==="Switch"){const T=k;N.switchType=T.switchType||"Toggle";const p=Ct(T,"current","currentUnit",Ye("current"));N.current=p.value,N.currentUnit=p.unit;const W=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=W.value,N.voltageUnit=W.unit}else if(k.componentType==="Transformer"){const T=k,p=Ct(T,"primaryVoltage","primaryVoltageUnit",Ye("primaryVoltage"));N.primaryVoltage=p.value,N.primaryVoltageUnit=p.unit;const W=Ct(T,"secondaryVoltage","secondaryVoltageUnit",Ye("secondaryVoltage"));N.secondaryVoltage=W.value,N.secondaryVoltageUnit=W.unit;const he=Ct(T,"power","powerUnit",Ye("power"));N.power=he.value||"1",N.turns=T.turns||""}else if(k.componentType==="TestPoint"){const T=k;N.signal=T.signal||""}else if(k.componentType==="IntegratedCircuit"){const T=k;N.description=T.description||"",N.datasheet=T.datasheet||"",N.icType=T.icType||"Op-Amp"}else if(k.componentType==="VacuumTube"){const T=k;N.tubeType=T.tubeType||""}else if(k.componentType==="VariableResistor"){const T=k;N.vrType=T.vrType||"Potentiometer";const p=Ct(T,"resistance","resistanceUnit",Ye("resistance"));N.resistance=p.value,N.resistanceUnit=p.unit;const W=Ct(T,"power","powerUnit",Ye("power"));N.power=W.value||"1/4",N.taper=T.taper||""}else if(k.componentType==="Crystal"){const T=k;N.frequency=T.frequency||"",N.loadCapacitance=T.loadCapacitance||"",N.tolerance=T.tolerance||""}else if(k.componentType==="ZenerDiode"){const T=k,p=Ct(T,"voltage","voltageUnit",Ye("voltage"));N.voltage=p.value,N.voltageUnit=p.unit;const W=Ct(T,"power","powerUnit",Ye("power"));N.power=W.value||"1/4",N.tolerance=T.tolerance||"5%"}$(N)},[]),H=j.useCallback(()=>{$(null),Ce(null)},[]);return{componentsTop:c,setComponentsTop:x,componentsBottom:S,setComponentsBottom:g,componentEditor:d,setComponentEditor:$,connectingPin:oe,setConnectingPin:Ce,componentDialogPosition:de,setComponentDialogPosition:Y,isDraggingDialog:De,setIsDraggingDialog:me,dialogDragOffset:we,setDialogDragOffset:Oe,addComponent:ne,updateComponent:ee,removeComponent:Me,openComponentEditor:He,closeComponentEditor:H}}function hg(){const[c,x]=j.useState([]),[S,g]=j.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),[d,$]=j.useState([]),[oe,Ce]=j.useState([]),[de,Y]=j.useState(null),[De,me]=j.useState(null),we=j.useCallback(T=>{x(p=>[...p,T])},[]),Oe=j.useCallback((T,p)=>{x(W=>W.map(he=>he.id===T?{...he,...p}:he))},[]),ne=j.useCallback(T=>{x(p=>p.filter(W=>W.id!==T)),$(p=>p.filter(W=>W.powerBusId!==T))},[]),ee=j.useCallback(T=>{$(p=>[...p,T])},[]),Me=j.useCallback(T=>{$(p=>p.filter(W=>W.id!==T))},[]),He=j.useCallback(T=>{Ce(p=>[...p,T])},[]),H=j.useCallback(T=>{Ce(p=>p.filter(W=>W.id!==T))},[]),k=j.useCallback(T=>{g(p=>[...p,T])},[]),M=j.useCallback((T,p)=>{g(W=>W.map(he=>he.id===T?{...he,...p}:he))},[]),N=j.useCallback(T=>{g(p=>p.filter(W=>W.id!==T)),Ce(p=>p.filter(W=>W.groundBusId===T))},[]);return{powerBuses:c,setPowerBuses:x,groundBuses:S,setGroundBuses:g,powerSymbols:d,setPowerSymbols:$,groundSymbols:oe,setGroundSymbols:Ce,powerEditor:de,setPowerEditor:Y,groundEditor:De,setGroundEditor:me,addPowerBus:we,updatePowerBus:Oe,removePowerBus:ne,addPowerSymbol:ee,removePowerSymbol:Me,addGroundSymbol:He,removeGroundSymbol:H,addGroundBus:k,updateGroundBus:M,removeGroundBus:N}}function xg(){const x=j.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"18",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"18",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"18",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[])(),[S,g]=j.useState(x.brushColor),[d,$]=j.useState(x.brushSize),[oe,Ce]=j.useState(x.topTraceColor),[de,Y]=j.useState(x.bottomTraceColor),[De,me]=j.useState(x.topTraceSize),[we,Oe]=j.useState(x.bottomTraceSize),[ne,ee]=j.useState(x.topPadColor),[Me,He]=j.useState(x.bottomPadColor),[H,k]=j.useState(x.topPadSize),[M,N]=j.useState(x.bottomPadSize),[T,p]=j.useState(x.topComponentColor),[W,he]=j.useState(x.bottomComponentColor),[Le,je]=j.useState(x.topComponentSize),[Ee,Ne]=j.useState(x.bottomComponentSize),_t=j.useCallback((U,Z,Te)=>{U==="trace"&&Te?Te==="top"?localStorage.setItem("defaultTopTraceSize",String(Z)):localStorage.setItem("defaultBottomTraceSize",String(Z)):U==="pad"&&Te?Te==="top"?localStorage.setItem("defaultTopPadSize",String(Z)):localStorage.setItem("defaultBottomPadSize",String(Z)):U==="component"&&Te?Te==="top"?localStorage.setItem("defaultTopComponentSize",String(Z)):localStorage.setItem("defaultBottomComponentSize",String(Z)):U==="via"?localStorage.setItem("defaultViaSize",String(Z)):U==="power"?localStorage.setItem("defaultPowerSize",String(Z)):U==="ground"?localStorage.setItem("defaultGroundSize",String(Z)):U==="brush"&&localStorage.setItem("defaultBrushSize",String(Z))},[]),et=j.useCallback((U,Z,Te)=>{U==="trace"&&Te?Te==="top"?localStorage.setItem("defaultTopTraceColor",Z):localStorage.setItem("defaultBottomTraceColor",Z):U==="pad"&&Te?Te==="top"?localStorage.setItem("defaultTopPadColor",Z):localStorage.setItem("defaultBottomPadColor",Z):U==="component"&&Te?Te==="top"?localStorage.setItem("defaultTopComponentColor",Z):localStorage.setItem("defaultBottomComponentColor",Z):U==="via"?localStorage.setItem("defaultViaColor",Z):U==="brush"&&localStorage.setItem("defaultBrushColor",Z)},[]);return{brushColor:S,setBrushColor:g,brushSize:d,setBrushSize:$,topTraceColor:oe,setTopTraceColor:Ce,bottomTraceColor:de,setBottomTraceColor:Y,topTraceSize:De,setTopTraceSize:me,bottomTraceSize:we,setBottomTraceSize:Oe,topPadColor:ne,setTopPadColor:ee,bottomPadColor:Me,setBottomPadColor:He,topPadSize:H,setTopPadSize:k,bottomPadSize:M,setBottomPadSize:N,topComponentColor:T,setTopComponentColor:p,bottomComponentColor:W,setBottomComponentColor:he,topComponentSize:Le,setTopComponentSize:je,bottomComponentSize:Ee,setBottomComponentSize:Ne,saveDefaultSize:_t,saveDefaultColor:et}}const gg=(c,x,S)=>{const g=`tool_${c}_color`,d=`tool_${c}_size`;localStorage.setItem(g,x),localStorage.setItem(d,String(S))};function yg(c,x,S,g,d,$,oe,Ce,de,Y,De,me,we,Oe,ne,ee,Me,He,H,k){const[M,N]=j.useState(()=>c()),T=j.useRef(null),p=j.useRef(g),W=j.useRef(d),he=j.useCallback(Ee=>x==="draw"&&S==="trace"?Ee.get("trace"):x==="draw"&&S==="via"?Ee.get("via"):x==="draw"&&S==="pad"?Ee.get("pad"):x==="component"?Ee.get("component"):x==="power"?Ee.get("power"):x==="ground"?Ee.get("ground"):null,[x,S]);j.useEffect(()=>{N(Ee=>{const Ne=he(Ee),_t=Ne?.id||null,et=T.current,U=new Map(Ee);if(et&&et!==_t){const Z=Ee.get(et);Z&&(gg(et,p.current,W.current),U.set(et,{...Z,settings:{color:p.current,size:W.current}}))}if(Ne&&_t!==et)if(x==="draw"&&S==="trace"){const Z=He||"top",Te=Z==="top"?$:oe,K=Z==="top"?Ce:de;p.current=Te,W.current=K,U.set("trace",{...Ne,settings:{color:Te,size:K}})}else if(x==="draw"&&S==="pad"){const Z=H||"top",Te=Z==="top"?Y:De,K=Z==="top"?me:we;p.current=Te,W.current=K,U.set("pad",{...Ne,settings:{color:Te,size:K}})}else if(x==="component"){const Z=k||"top",Te=Z==="top"?Oe:ne,K=Z==="top"?ee:Me;p.current=Te,W.current=K,U.set("component",{...Ne,settings:{color:Te,size:K}})}else p.current=Ne.settings.color,W.current=Ne.settings.size;return T.current=_t,U})},[x,S,g,d,$,oe,Ce,de,Y,De,me,we,Oe,ne,ee,Me,He,H,k,he]);const Le=j.useCallback((Ee,Ne)=>{N(_t=>{const et=new Map(_t),U=et.get(Ee);return U&&et.set(Ee,{...U,settings:Ne}),et})},[]),je=j.useCallback((Ee,Ne,_t)=>{N(et=>{const U=new Map(et),Z=U.get(Ee);if(Z){const Te=new Map(Z.layerSettings);Te.set(Ne,_t),U.set(Ee,{...Z,layerSettings:Te})}return U})},[]);return{toolRegistry:M,setToolRegistry:N,updateToolSettings:Le,updateToolLayerSettings:je,getCurrentToolDef:he}}function vg(){const[c,x]=j.useState(!1),[S,g]=j.useState(!1),[d,$]=j.useState(!1),[oe,Ce]=j.useState(!1),[de,Y]=j.useState(!1),[De,me]=j.useState(!1),[we,Oe]=j.useState(!1),ne=j.useCallback(()=>{x(!0),g(!0),$(!0),Ce(!0),Y(!0),me(!0),Oe(!0)},[]),ee=j.useCallback(()=>{x(!1),g(!1),$(!1),Ce(!1),Y(!1),me(!1),Oe(!1)},[]);return{areImagesLocked:c,setAreImagesLocked:x,areViasLocked:S,setAreViasLocked:g,arePadsLocked:d,setArePadsLocked:$,areTracesLocked:oe,setAreTracesLocked:Ce,areComponentsLocked:de,setAreComponentsLocked:Y,areGroundNodesLocked:De,setAreGroundNodesLocked:me,arePowerNodesLocked:we,setArePowerNodesLocked:Oe,lockAll:ne,unlockAll:ee}}function bg(){const[c,x]=j.useState(null),[S,g]=j.useState({visible:!1,size:6}),[d,$]=j.useState({visible:!1,interval:5}),[oe,Ce]=j.useState({visible:!1,source:null,interval:5}),[de,Y]=j.useState({visible:!1,text:""}),[De,me]=j.useState({visible:!1,title:"",message:""}),[we,Oe]=j.useState({visible:!1}),[ne,ee]=j.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[Me,He]=j.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[H,k]=j.useState(!1),[M,N]=j.useState(!0);return{openMenu:c,setOpenMenu:x,setSizeDialog:S,setSetSizeDialog:g,autoSaveDialog:d,setAutoSaveDialog:$,autoSavePromptDialog:oe,setAutoSavePromptDialog:Ce,debugDialog:de,setDebugDialog:Y,errorDialog:De,setErrorDialog:me,newProjectDialog:we,setNewProjectDialog:Oe,newProjectSetupDialog:ne,setNewProjectSetupDialog:ee,saveAsDialog:Me,setSaveAsDialog:He,showColorPicker:H,setShowColorPicker:k,showWelcomeDialog:M,setShowWelcomeDialog:N}}function mg(){const[c,x]=j.useState(!1),[S,g]=j.useState(1),[d,$]=j.useState(null),[oe,Ce]=j.useState(""),[de,Y]=j.useState(""),[De,me]=j.useState(null),[we,Oe]=j.useState("pcb_project"),[ne,ee]=j.useState([]),[Me,He]=j.useState(-1),H=j.useRef(null),k=j.useRef(!1),M=j.useRef(!1);return{autoSaveEnabled:c,setAutoSaveEnabled:x,autoSaveInterval:S,setAutoSaveInterval:g,autoSaveDirHandle:d,setAutoSaveDirHandle:$,autoSaveBaseName:oe,setAutoSaveBaseName:Ce,currentProjectFilePath:de,setCurrentProjectFilePath:Y,projectDirHandle:De,setProjectDirHandle:me,projectName:we,setProjectName:Oe,autoSaveFileHistory:ne,setAutoSaveFileHistory:ee,currentFileIndex:Me,setCurrentFileIndex:He,autoSaveIntervalRef:H,hasChangesSinceLastAutoSaveRef:k,prevAutoSaveEnabledRef:M}}const mu=c=>{const x=zu[c];return!x||!x.prefix||x.prefix.length<1?"?":x.prefix[0].substring(0,1).toUpperCase()},xa=(c,x,S)=>{const g=`tool_${c}_color`,d=`tool_${c}_size`,$=localStorage.getItem(g),oe=localStorage.getItem(d);return{color:$||x,size:oe?parseInt(oe,10):S}},cr=(c,x,S)=>{localStorage.setItem(`tool_${c}_color`,x),localStorage.setItem(`tool_${c}_size`,String(S))},Pn=(c,x,S,g)=>{const d=`tool_${c}_${x}_color`,$=`tool_${c}_${x}_size`,oe=localStorage.getItem(d),Ce=localStorage.getItem($);return{color:oe||S,size:Ce?parseInt(Ce,10):g}},Xi=(c,x,S,g)=>{localStorage.setItem(`tool_${c}_${x}_color`,S),localStorage.setItem(`tool_${c}_${x}_size`,String(g))},Sg=()=>{const c=new Map,x={top:"#0072B2",bottom:"#56B4E9"},S={top:18,bottom:18},g={top:"#AA4499",bottom:"#F781BF"},d={top:6,bottom:6},$={top:"#6A3D9A",bottom:"#9467BD"},oe={top:18,bottom:18};return c.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:xa("select","#ff0000",10),layerSettings:new Map([["top",Pn("select","top","#ff0000",10)],["bottom",Pn("select","bottom","#ff0000",10)]])}),c.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:xa("via",Su,ju.DEFAULT_SIZE),layerSettings:new Map([["top",Pn("via","top",Su,ju.DEFAULT_SIZE)],["bottom",Pn("via","bottom",Su,ju.DEFAULT_SIZE)]]),defaultLayer:"top"}),c.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:xa("pad",gh,18),layerSettings:new Map([["top",Pn("pad","top",x.top,S.top)],["bottom",Pn("pad","bottom",x.bottom,S.bottom)]]),defaultLayer:"top"}),c.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:xa("trace",hh,6),layerSettings:new Map([["top",Pn("trace","top",g.top,d.top)],["bottom",Pn("trace","bottom",g.bottom,d.bottom)]]),defaultLayer:"top"}),c.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:xa("component",xh,yh.DEFAULT_SIZE),layerSettings:new Map([["top",Pn("component","top",$.top,oe.top)],["bottom",Pn("component","bottom",$.bottom,oe.bottom)]]),defaultLayer:"top"}),c.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:xa("power",zc,18),layerSettings:new Map([["top",Pn("power","top",zc,18)],["bottom",Pn("power","bottom",zc,18)]]),defaultLayer:"top"}),c.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:xa("ground",wu,18),layerSettings:new Map([["top",Pn("ground","top",wu,18)],["bottom",Pn("ground","bottom",wu,18)]]),defaultLayer:"top"}),c.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:xa("erase","#f5a3b3",18),layerSettings:new Map([["top",Pn("erase","top","#f5a3b3",18)],["bottom",Pn("erase","bottom","#f5a3b3",18)]])}),c.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:xa("pan","#ff0000",10),layerSettings:new Map([["top",Pn("pan","top","#ff0000",10)],["bottom",Pn("pan","bottom","#ff0000",10)]])}),c.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:xa("magnify","#ff0000",10),layerSettings:new Map([["top",Pn("magnify","top","#ff0000",10)],["bottom",Pn("magnify","bottom","#ff0000",10)]])}),c};function wg(){const x=ug(),{topImage:S,setTopImage:g,bottomImage:d,setBottomImage:$,currentView:oe,setCurrentView:Ce,transparency:de,setTransparency:Y,isTransparencyCycling:De,setIsTransparencyCycling:me,isGrayscale:we,setIsGrayscale:Oe,isBlackAndWhiteEdges:ne,setIsBlackAndWhiteEdges:ee,isBlackAndWhiteInverted:Me,setIsBlackAndWhiteInverted:He}=x,[H,k]=j.useState("none"),M=xg(),{brushColor:N,setBrushColor:T,brushSize:p,setBrushSize:W,topTraceColor:he,setTopTraceColor:Le,bottomTraceColor:je,setBottomTraceColor:Ee,topTraceSize:Ne,setTopTraceSize:_t,bottomTraceSize:et,setBottomTraceSize:U,topPadColor:Z,setTopPadColor:Te,bottomPadColor:K,setBottomPadColor:ve,topPadSize:R,setTopPadSize:E,bottomPadSize:ue,setBottomPadSize:Re,topComponentColor:Xe,setTopComponentColor:ht,bottomComponentColor:gt,setBottomComponentColor:yn,topComponentSize:Ot,setTopComponentSize:oi,bottomComponentSize:al,setBottomComponentSize:Pi,saveDefaultSize:qe,saveDefaultColor:mt}=M,Ho=sg(),{drawingStrokes:Ve,setDrawingStrokes:Vt,isDrawing:Ti,setIsDrawing:Fi,currentStroke:Ht,setCurrentStroke:_n,tracePreviewMousePos:si,setTracePreviewMousePos:ga,drawingMode:ke,setDrawingMode:ya,selectedDrawingLayer:jt,setSelectedDrawingLayer:$n,currentStrokeRef:ri,lastTraceClickTimeRef:dr,isDoubleClickingTraceRef:Za}=Ho,fr=cg(),{selectedImageForTransform:Nt,setSelectedImageForTransform:ci,isTransforming:On,setIsTransforming:ol,transformStartPos:Hn,setTransformStartPos:Gi,transformMode:zi,setTransformMode:pr}=fr,Li=dg(),{viewScale:Se,setViewScale:Kt,viewPan:Je,setViewPan:Lt,isShiftConstrained:An,setIsShiftConstrained:Qa,showBothLayers:Ka,setShowBothLayers:Eo}=Li,[pe,qt]=j.useState("top"),[rn,Ja]=j.useState("top"),[cn,Vo]=j.useState("top"),Cs=yg(Sg,H,ke,N,p,he,je,Ne,et,Z,K,R,ue,Xe,gt,Ot,al,pe,rn,cn),{toolRegistry:Pe,setToolRegistry:ln,getCurrentToolDef:Dl}=Cs,En=Ie.useRef(null),un=Ie.useRef(N),Jn=Ie.useRef(p);Ie.useEffect(()=>{ln(a=>{const r=Dl(a),h=r?.id||null,y=En.current,b=new Map(a);if(y&&y!==h){const v=a.get(y);v&&(cr(y,un.current,Jn.current),b.set(y,{...v,settings:{color:un.current,size:Jn.current}}))}if(r&&h!==y)if(H==="draw"&&ke==="trace"){const v=pe||"top",u=v==="top"?he:je,w=v==="top"?Ne:et;T(u),W(w),un.current=u,Jn.current=w,b.set("trace",{...r,settings:{color:u,size:w}})}else if(H==="draw"&&ke==="pad"){const v=rn||"top",u=v==="top"?Z:K,w=v==="top"?R:ue;T(u),W(w),un.current=u,Jn.current=w,b.set("pad",{...r,settings:{color:u,size:w}})}else if(H==="component"){const v=cn||"top",u=v==="top"?Xe:gt,w=v==="top"?Ot:al;T(u),W(w),un.current=u,Jn.current=w,b.set("component",{...r,settings:{color:u,size:w}})}else{const v=r.settings;T(v.color),W(v.size),un.current=v.color,Jn.current=v.size}return En.current=h,b})},[H,ke,Dl,he,je,Ne,et,Z,K,R,ue,Xe,gt,Ot,al]),Ie.useEffect(()=>{ln(a=>{const r=Dl(a);if(r)if(H==="draw"&&ke==="trace"){const h=pe||"top";Xi(r.id,h,N,p),h==="top"?(Le(N),_t(p),mt("trace",N,"top"),qe("trace",p,"top")):(Ee(N),U(p),mt("trace",N,"bottom"),qe("trace",p,"bottom"));const y=new Map(a),b=new Map(r.layerSettings);return b.set(h,{color:N,size:p}),y.set(r.id,{...r,layerSettings:b,settings:{color:N,size:p}}),un.current=N,Jn.current=p,y}else if(H==="draw"&&ke==="pad"){const h=rn||"top";Xi(r.id,h,N,p),h==="top"?(Te(N),E(p),mt("pad",N,"top"),qe("pad",p,"top")):(ve(N),Re(p),mt("pad",N,"bottom"),qe("pad",p,"bottom"));const y=new Map(a),b=new Map(r.layerSettings);return b.set(h,{color:N,size:p}),y.set(r.id,{...r,layerSettings:b,settings:{color:N,size:p}}),un.current=N,Jn.current=p,y}else if(H==="component"){const h=cn||"top";Xi(r.id,h,N,p),h==="top"?(ht(N),oi(p),mt("component",N,"top"),qe("component",p,"top")):(yn(N),Pi(p),mt("component",N,"bottom"),qe("component",p,"bottom"));const y=new Map(a),b=new Map(r.layerSettings);return b.set(h,{color:N,size:p}),y.set(r.id,{...r,layerSettings:b,settings:{color:N,size:p}}),un.current=N,Jn.current=p,y}else{cr(r.id,N,p);const h=new Map(a);return h.set(r.id,{...r,settings:{color:N,size:p}}),un.current=N,Jn.current=p,h}return a})},[N,p,H,ke,pe,rn,cn,Dl,mt,qe,Xi,Le,Ee,_t,U,Te,ve,E,Re,ht,yn,oi,Pi]),Ie.useEffect(()=>{H==="power"?(Ml(!0),Na(null)):(Ml(!1),Na(null))},[H]),Ie.useEffect(()=>{H==="ground"?(na(!0),ss(null)):(na(!1),ss(null))},[H]),Ie.useEffect(()=>{zl(H==="draw"&&ke==="trace")},[H,ke]),Ie.useEffect(()=>{Oa(H==="draw"&&ke==="pad")},[H,ke]);const[Rs,hr]=j.useState(void 0),[,Cc]=j.useState([]),[,xr]=j.useState([]),[,ui]=j.useState([]),[,qi]=j.useState([]),[va,eo]=j.useState([]),[Ds,to]=j.useState([]),[kn,Rc]=j.useState([]),[gr,ba]=j.useState([]),vn=j.useRef(null),Cu=rg(),{selectedIds:vt,setSelectedIds:Rt,isSelecting:As,setIsSelecting:Yo,selectedComponentIds:it,setSelectedComponentIds:ct,selectedPowerIds:at,setSelectedPowerIds:Tt,selectedGroundIds:Dt,setSelectedGroundIds:zt}=Cu,Dc=pg(),{componentsTop:St,setComponentsTop:wn,componentsBottom:ot,setComponentsBottom:hn,componentEditor:ma,setComponentEditor:yr,connectingPin:Nn,setConnectingPin:Wo,componentDialogPosition:ks,setComponentDialogPosition:di,isDraggingDialog:vr,setIsDraggingDialog:br,dialogDragOffset:no,setDialogDragOffset:Ns,openComponentEditor:Ru}=Dc,Du=hg(),{powerBuses:ut,setPowerBuses:Mn,groundBuses:Vn,setGroundBuses:Ci,powerSymbols:lo,setPowerSymbols:Fn,groundSymbols:Ac,setGroundSymbols:bl,powerEditor:sl,setPowerEditor:Ri}=Du,Di=vg(),{areImagesLocked:Zn,setAreImagesLocked:$i,areViasLocked:dn,setAreViasLocked:Io,arePadsLocked:rl,setArePadsLocked:mr,areTracesLocked:Bn,setAreTracesLocked:io,areComponentsLocked:el,setAreComponentsLocked:Qn,areGroundNodesLocked:bn,setAreGroundNodesLocked:Sa,arePowerNodesLocked:Jt,setArePowerNodesLocked:Sr}=Di,wr=bg(),{openMenu:jr,setOpenMenu:wa,setSizeDialog:fi,setSetSizeDialog:Ai,autoSaveDialog:Ms,setAutoSaveDialog:Zi,autoSavePromptDialog:ao,setAutoSavePromptDialog:Al,debugDialog:oo,setDebugDialog:Xo,errorDialog:Tr,setErrorDialog:Bs,newProjectDialog:zr,setNewProjectDialog:so,newProjectSetupDialog:on,setNewProjectSetupDialog:Po,saveAsDialog:sn,setSaveAsDialog:Fo,showColorPicker:Go,setShowColorPicker:Us}=wr,Au=mg(),{autoSaveEnabled:kl,setAutoSaveEnabled:Pl,autoSaveInterval:ja,setAutoSaveInterval:Qi,autoSaveDirHandle:Ki,setAutoSaveDirHandle:_s,autoSaveBaseName:Ji,setAutoSaveBaseName:Ta,currentProjectFilePath:Os,setCurrentProjectFilePath:ml,projectDirHandle:pi,setProjectDirHandle:hi,projectName:jn,setProjectName:Fl,autoSaveFileHistory:kc,setAutoSaveFileHistory:ro,currentFileIndex:Cr,setCurrentFileIndex:Rr,autoSaveIntervalRef:en,hasChangesSinceLastAutoSaveRef:tl,prevAutoSaveEnabledRef:Dr}=Au,Ar=j.useRef(null),kr=j.useRef(null),Nr=j.useRef(null),Mr=j.useRef(null),co=j.useRef(null),uo=j.useRef(null),Br=j.useRef(null),za=j.useRef(null),Ca=j.useRef(null),fo=j.useRef(null),Hs=j.useRef(null),ea=j.useRef(!1),Lo=j.useRef(0),qo=j.useRef(0),[Ra,Ur]=j.useState(!1),$o=j.useRef(null),Zo=j.useRef(null),[Qo,Es]=j.useState(!1),[Tn,Ko]=j.useState({width:960,height:600}),Jo=j.useRef(null),_r=j.useRef(null),Nc=j.useRef(null),es=j.useRef(null),ts=j.useRef(null),Mc=j.useRef(null),Da=j.useRef(null),Vs=j.useRef(null),[ta,Aa]=j.useState(!0),[ns,Gl]=j.useState(!0),[Un,ls]=j.useState(!0),[Sl,ki]=j.useState(!0),[wl,Ys]=j.useState(!0),[Ll,Or]=j.useState(!0),[xi,Hr]=j.useState(!0),[ql,is]=j.useState(!0),[Nl,cl]=j.useState(!0),[$l,ul]=j.useState(!0),lt=lo,dt=Ac,[Ws,ka]=j.useState(!1),[as,Ml]=j.useState(!1),[os,Na]=j.useState(null),[po,Is]=j.useState(!1),[nl,na]=j.useState(!1),[dl,ss]=j.useState(null),[Bl,Ni]=j.useState(!0),[la,Xs]=j.useState(!0),[ia,rs]=j.useState(null),[fl,Ma]=j.useState(!1),[Mi,cs]=j.useState(null),[Ba,jl]=j.useState(!1),[Gn,Zl]=j.useState(null),[Ul,Ql]=j.useState(!1),[_l,Er]=j.useState(null),[Vr,Yr]=j.useState(()=>{const a=localStorage.getItem("boardDimensions");if(a)try{return JSON.parse(a)}catch{return null}return null}),[Bc,Yn]=j.useState(!1);Ie.useEffect(()=>{ut.length===0&&Mn([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[ut.length,Mn]);const Mt=j.useCallback((a,r)=>{const h=lt.find(b=>b.pointId===a);if(h){const b=r.find(u=>u.id===h.powerBusId);return`Via (${b?b.voltage:h.type||"Power Node"})`}const y=dt.find(b=>b.pointId===a);return y?`Via (${y.type||"Ground"})`:"Via (Signal)"},[lt,dt]),ft=j.useCallback((a,r)=>{const h=lt.find(b=>b.pointId===a);if(h){const b=r.find(u=>u.id===h.powerBusId);return`Pad (${b?b.voltage:h.type||"Power Node"})`}const y=dt.find(b=>b.pointId===a);return y?`Pad (${y.type||"Ground"})`:"Pad (Signal)"},[lt,dt]),aa=j.useCallback(()=>{const a=Ve.filter(r=>r.type==="via").map(r=>r.id);Rt(new Set(a)),ct(new Set),Tt(new Set),zt(new Set)},[Ve,Rt,ct,Tt,zt]),Ol=j.useCallback(()=>{const a=Ve.filter(r=>r.type==="trace").map(r=>r.id);Rt(new Set(a)),ct(new Set),Tt(new Set),zt(new Set)},[Ve,Rt,ct,Tt,zt]),Wr=j.useCallback(()=>{const a=Ve.filter(r=>r.type==="pad").map(r=>r.id);Rt(new Set(a)),ct(new Set),Tt(new Set),zt(new Set)},[Ve,Rt,ct,Tt,zt]),oa=j.useCallback(()=>{const a=[...St,...ot].map(r=>r.id);ct(new Set(a)),Rt(new Set),Tt(new Set),zt(new Set)},[St,ot,ct,Rt,Tt,zt]),Uc=j.useCallback(()=>{const a=[...St,...ot].filter(r=>{const h=r.pinConnections||[];return!(h.length>0&&h.length===r.pinCount&&h.every(b=>b&&b.trim()!==""))}).map(r=>r.id);ct(new Set(a)),Rt(new Set),Tt(new Set),zt(new Set),Xo({visible:!0,text:""})},[St,ot,ct,Rt,Tt,zt,Xo]),_c=j.useCallback((a,r,h)=>{const y=vn.current;if(!y)return;const b=y.width-80,v=y.height-80,u=b/2,w=v/2,z=u-r*Se,C=w-h*Se;Lt({x:z,y:C}),ct(new Set([a])),Rt(new Set),Tt(new Set),zt(new Set)},[Se,Lt,ct,Rt,Tt,zt]),ho=Ie.useMemo(()=>{const a=new Set(lt.map(h=>h.powerBusId).filter(h=>typeof h=="string"&&h.length>0)),r=ut.filter(h=>a.has(h.id)).map(h=>h.name);return Array.from(new Set(r)).sort()},[lt,ut]),Ua=Ie.useMemo(()=>{const a=new Set(dt.map(h=>h.groundBusId).filter(h=>typeof h=="string"&&h.length>0)),r=Vn.filter(h=>a.has(h.id)).map(h=>h.name);return Array.from(new Set(r)).sort()},[dt,Vn]),Ir=j.useCallback(()=>{const a=lt.map(r=>r.id);Tt(new Set(a)),Rt(new Set),ct(new Set),zt(new Set)},[lt,Tt,Rt,ct,zt]),us=j.useCallback(()=>{const a=dt.map(r=>r.id);zt(new Set(a)),Rt(new Set),ct(new Set),Tt(new Set)},[dt,zt,Rt,ct,Tt]),Xr=j.useCallback(a=>{const r=ut.filter(y=>y.name===a).map(y=>y.id);if(r.length===0)return;const h=lt.filter(y=>y.powerBusId&&r.includes(y.powerBusId)).map(y=>y.id);Tt(new Set(h)),Rt(new Set),ct(new Set),zt(new Set)},[ut,lt,Tt,Rt,ct,zt]),_a=j.useCallback(a=>{const r=Vn.filter(y=>y.name===a).map(y=>y.id);if(r.length===0)return;const h=dt.filter(y=>y.groundBusId&&r.includes(y.groundBusId)).map(y=>y.id);zt(new Set(h)),Rt(new Set),ct(new Set),Tt(new Set)},[Vn,dt,zt,Rt,ct,Tt]),[Tl,zl]=j.useState(!1),pl=j.useRef(null),[xo,Oa]=j.useState(!1),gi=j.useRef(null),Ha=j.useRef(null),yi=j.useRef(null),[zn,Kl]=j.useState(!1),[go,yo]=j.useState(!1),[Jl,Pr]=j.useState(null),[Cn,Fr]=j.useState(new Set),vo=j.useRef(null),ei=j.useRef(null),bo=j.useRef(null),Bi=j.useRef(null),sa=j.useRef(null),Gr=j.useRef(null),Ps=j.useRef(null),[ku,Lr]=j.useState(null),[hl,Fs]=j.useState(!1),[Ui,qr]=j.useState(null),[Cl,ds]=j.useState(null),fs=j.useCallback(async(a,r)=>{try{const h=await createImageBitmap(a),y=URL.createObjectURL(a),b=await new Promise((C,q)=>{const G=new FileReader;G.onload=()=>C(G.result),G.onerror=q,G.readAsDataURL(a)}),v=vn.current;let u=0,w=0;if(v){const C=v.width-80,q=v.height-80,G=C/2,re=q/2;u=(G-Je.x)/Se,w=(re-Je.y)/Se}const z={url:y,name:a.name,width:h.width,height:h.height,dataUrl:b,x:u,y:w,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:h};r==="top"?g(z):$(z)}catch(h){console.error("Failed to load image",h)}},[Je.x,Je.y,Se,S,d]),Gs=j.useCallback(a=>{a.stopPropagation(),a.preventDefault();const r=vn.current;if(!r)return;document.activeElement!==r&&r.focus();const h=r.getBoundingClientRect(),y=r.width/h.width,b=r.height/h.height,v=a.nativeEvent.offsetX,u=a.nativeEvent.offsetY,w=typeof v=="number"?v:a.clientX-h.left,z=typeof u=="number"?u:a.clientY-h.top,C=w*y,q=z*b,G=C-40,re=q-40,I=(G-Je.x)/Se,Q=(re-Je.y)/Se;if(H==="select"){if(Nn){let D=1/0,te=null,se=null;const be=Math.max(6/Se,4),Qe=[...St,...ot].find(Be=>Be.id===Nn.componentId)?.layer||"top";for(const Be of Ve)if((Be.type==="via"||Be.type==="pad")&&Be.points.length>0){if(Be.type==="pad"&&(Be.layer||"top")!==Qe)continue;const Fe=Be.points[0],$e=Math.max(1,Be.size/2),Wt=Math.hypot(Fe.x-I,Fe.y-Q),Ke=Math.max($e,be);Wt<=Ke&&Wt<D&&(D=Wt,te=Fe.id??null,se=Be)}if(se?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${se.id}`),console.log(`  Point ID: ${te}`),console.log(`  Point coordinates: x=${se.points[0].x.toFixed(2)}, y=${se.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${I.toFixed(2)}, y=${Q.toFixed(2)}`),console.log(`  Distance: ${D.toFixed(2)}`),console.log(`  Via size: ${se.size}, radius: ${Math.max(1,se.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${I.toFixed(2)}, y=${Q.toFixed(2)}`),console.log(`  Hit tolerance: ${be.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${Ve.filter(Be=>Be.type==="via").length}`)),te!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${te} (type: ${typeof te})`);const Be=String(te),Fe=Nn.pinIndex,$e=Nn.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${Fe} (Pin ${Fe+1}) of component ${$e} to point ID ${Be}`);const Wt=St.find(Ue=>Ue.id===$e),Ke=ot.find(Ue=>Ue.id===$e);Wt?(console.log("Component found in TOP layer"),wn(Ue=>{const st=Ue.find(pt=>pt.id===$e);if(!st)return console.error(`Component ${$e} not found in TOP layer during update!`),Ue;console.log("BEFORE update: pinConnections =",st.pinConnections);const rt=st.pinConnections||[],bt=rt.length>0?[...rt]:new Array(st.pinCount).fill("");let Et;if(bt.length!==st.pinCount){Et=new Array(st.pinCount).fill("");for(let pt=0;pt<Math.min(bt.length,st.pinCount);pt++)Et[pt]=bt[pt]||""}else Et=[...bt];Et[Fe]=Be,console.log(`Updating pin ${Fe} with value: ${Be}`),console.log("New pinConnections array:",Et);const xn=Ue.map(pt=>pt.id===$e?{...pt,pinConnections:Et}:pt),fn=xn.find(pt=>pt.id===$e);return console.log("AFTER update: pinConnections =",fn?.pinConnections),console.log(`Pin ${Fe} value: ${fn?.pinConnections[Fe]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),xn})):Ke?(console.log("Component found in BOTTOM layer"),hn(Ue=>{const st=Ue.find(pt=>pt.id===$e);if(!st)return console.error(`Component ${$e} not found in BOTTOM layer during update!`),Ue;console.log("BEFORE update: pinConnections =",st.pinConnections);const rt=st.pinConnections||[],bt=rt.length>0?[...rt]:new Array(st.pinCount).fill("");let Et;if(bt.length!==st.pinCount){Et=new Array(st.pinCount).fill("");for(let pt=0;pt<Math.min(bt.length,st.pinCount);pt++)Et[pt]=bt[pt]||""}else Et=[...bt];Et[Fe]=Be,console.log(`Updating pin ${Fe} with value: ${Be}`),console.log("New pinConnections array:",Et);const xn=Ue.map(pt=>pt.id===$e?{...pt,pinConnections:Et}:pt),fn=xn.find(pt=>pt.id===$e);return console.log("AFTER update: pinConnections =",fn?.pinConnections),console.log(`Pin ${Fe} value: ${fn?.pinConnections[Fe]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),xn})):(console.error(`Component ${$e} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",St.map(Ue=>Ue.id)),console.log("Available BOTTOM components:",ot.map(Ue=>Ue.id))),setTimeout(()=>{Wo(null)},0);return}else Wo(null)}const F=10,V=(()=>{for(const D of St)if(I>=D.x-F&&I<=D.x+F&&Q>=D.y-F&&Q<=D.y+F)return{layer:"top",comp:D};for(const D of ot)if(I>=D.x-F&&I<=D.x+F&&Q>=D.y-F&&Q<=D.y+F)return{layer:"bottom",comp:D};return null})();if(V){const{comp:D}=V;let te;if(a.shiftKey){const se=new Set(it);se.has(D.id)?se.delete(D.id):se.add(D.id),te=se,ct(te)}else te=new Set([D.id]),ct(te),Rt(new Set),Tt(new Set),zt(new Set);return}const le=Math.max(6/Se,4);let ie=null;for(const D of lt){const te=Math.max(6,D.size/2),se=te*.8,be=te+se,Ae=Math.hypot(D.x-I,D.y-Q),Qe=Math.abs(I-D.x)<=le&&Math.abs(Q-D.y)<=be,Be=Math.abs(Q-D.y)<=le&&Math.abs(I-D.x)<=be;if(Ae<=Math.max(te,le)||Qe||Be){ie=D;break}}if(ie){let D;if(a.shiftKey){const te=new Set(at);te.has(ie.id)?te.delete(ie.id):te.add(ie.id),D=te,Tt(D)}else D=new Set([ie.id]),Tt(D);Rt(new Set),ct(new Set),zt(new Set);return}let ge=null;for(const D of dt){const te=Math.max(6,(D.size||18)/2),se=te*.8,be=te+se,Ae=Math.hypot(D.x-I,D.y-Q),Qe=Math.abs(I-D.x)<=le&&Math.abs(Q-D.y)<=be,Be=Math.abs(Q-D.y)<=le&&Math.abs(I-D.x)<=be;if(Ae<=Math.max(te,le)||Qe||Be){ge=D;break}}if(ge){let D;if(a.shiftKey){const te=new Set(Dt);te.has(ge.id)?te.delete(ge.id):te.add(ge.id),D=te,zt(D)}else D=new Set([ge.id]),zt(D),Rt(new Set),ct(new Set),Tt(new Set);return}const xe=Math.max(6/Se,4/Se),ze=Math.max(xe,.5);let _=null;for(const D of Ve)if((D.type==="via"||D.type==="pad")&&D.points.length>0){let te=!1;if(D.type==="via"?te=Un:D.type==="pad"&&(te=(D.layer||"top")==="top"?Ll:xi),!te)continue;const se=D.points[0],be=Math.max(1,D.size/2);if(Math.hypot(se.x-I,se.y-Q)<=Math.max(be,ze)){_=D;break}}if(_){let D;if(a.shiftKey){const te=new Set(vt);te.has(_.id)?te.delete(_.id):te.add(_.id),D=te,Rt(D)}else D=new Set([_.id]),Rt(D),ct(new Set),Tt(new Set),zt(new Set);return}a.shiftKey||(Rt(new Set),ct(new Set),Tt(new Set),zt(new Set)),Yo(!0),qr({x:I,y:Q,shiftKey:a.shiftKey}),ds({x:I,y:Q,width:0,height:0});return}else if(H==="magnify"){const F=a.shiftKey?.5:2,V=Math.max(.25,Math.min(8,Se*F)),le=G-V*I,ie=re-V*Q;Kt(V),Lt({x:le,y:ie});return}else if(H==="pan"){$o.current={startCX:G,startCY:re,panX:Je.x,panY:Je.y},Zo.current={startClientX:a.clientX,startClientY:a.clientY,panX:Je.x,panY:Je.y},Ur(!0);return}else if(H==="draw"){const F=(ie,ge)=>{let ye=1/0,xe=null;const ze=10/Se,_=Se>20?Math.max(ze,1e-4):Se>10?Math.max(ze,.001):Math.max(ze,.01);for(const se of Ve)if(se.type==="via"){const be=se.points[0],Ae=Math.hypot(be.x-ie,be.y-ge);Ae<=_&&Ae<ye&&(ye=Ae,xe=be)}else if(se.type==="pad"){const be=se.points[0],Ae=Math.hypot(be.x-ie,be.y-ge);Ae<=_&&Ae<ye&&(ye=Ae,xe=be)}for(const se of lt)if(se.pointId!==void 0){const be=Math.hypot(se.x-ie,se.y-ge);be<=_&&be<ye&&(ye=be,xe={x:se.x,y:se.y,id:se.pointId})}for(const se of dt)if(se.pointId!==void 0){const be=Math.hypot(se.x-ie,se.y-ge);be<=_&&be<ye&&(ye=be,xe={x:se.x,y:se.y,id:se.pointId})}const te=Gt(xe??{x:ie,y:ge});return{x:te.x,y:te.y,nodeId:xe?.id}};if(ke==="via"){const ie=Pe.get("via"),ge=localStorage.getItem("tool_via_color"),ye=localStorage.getItem("tool_via_size"),xe=ge||ie?.settings.color||Su,_e=ye?parseInt(ye,10):ie?.settings.size||ju.DEFAULT_SIZE,_=hl?{x:Gt({x:I,y:Q}).x,y:Gt({x:I,y:Q}).y}:((Ae,Qe)=>{let Be=1/0,Fe=null;const Wt=10/Se,Ke=Se>10?Math.max(Wt,.001):Math.max(Wt,.01);for(const rt of Ve)if(rt.type==="via"||rt.type==="pad"){const bt=rt.points[0],Et=Math.hypot(bt.x-Ae,bt.y-Qe);Et<=Ke&&Et<Be&&(Be=Et,Fe=bt)}for(const rt of lt)if(rt.pointId!==void 0){const bt=Math.hypot(rt.x-Ae,rt.y-Qe);bt<=Ke&&bt<Be&&(Be=bt,Fe={x:rt.x,y:rt.y,id:rt.pointId})}for(const rt of dt)if(rt.pointId!==void 0){const bt=Math.hypot(rt.x-Ae,rt.y-Qe);bt<=Ke&&bt<Be&&(Be=bt,Fe={x:rt.x,y:rt.y,id:rt.pointId})}const st=Gt(Fe??{x:Ae,y:Qe});return{x:st.x,y:st.y,nodeId:Fe?.id}})(I,Q),D=_.nodeId??ai(),te=Mt(D,ut),se={id:D,x:_.x,y:_.y},be={id:`${Date.now()}-via`,points:[se],color:xe,size:_e,layer:jt,type:"via",viaType:te};Vt(Ae=>[...Ae,be]),jt==="top"?Cc(Ae=>[...Ae,be.id]):xr(Ae=>[...Ae,be.id]);return}if(ke==="pad"){if(!rn)return;const ge=hl?{x:Gt({x:I,y:Q}).x,y:Gt({x:I,y:Q}).y}:((te,se)=>{let be=1/0,Ae=null;const Be=10/Se,Fe=Se>10?Math.max(Be,.001):Math.max(Be,.01);for(const Ke of Ve)if(Ke.type==="via"||Ke.type==="pad"){const Ue=Ke.points[0],st=Math.hypot(Ue.x-te,Ue.y-se);st<=Fe&&st<be&&(be=st,Ae=Ue)}for(const Ke of lt)if(Ke.pointId!==void 0){const Ue=Math.hypot(Ke.x-te,Ke.y-se);Ue<=Fe&&Ue<be&&(be=Ue,Ae={x:Ke.x,y:Ke.y,id:Ke.pointId})}for(const Ke of dt)if(Ke.pointId!==void 0){const Ue=Math.hypot(Ke.x-te,Ke.y-se);Ue<=Fe&&Ue<be&&(be=Ue,Ae={x:Ke.x,y:Ke.y,id:Ke.pointId})}const Wt=Gt(Ae??{x:te,y:se});return{x:Wt.x,y:Wt.y,nodeId:Ae?.id}})(I,Q),ye=ge.nodeId??ai(),xe=ft(ye,ut),_e=rn==="top"?Z:K,ze=rn==="top"?R:ue,_={id:ye,x:ge.x,y:ge.y},D={id:`${Date.now()}-pad`,points:[_],color:_e,size:ze,layer:rn,type:"pad",padType:xe};Vt(te=>[...te,D]);return}if(Za.current)return;const V=ke==="trace"&&!hl?F(I,Q):{x:Gt({x:I,y:Q}).x,y:Gt({x:I,y:Q}).y},le=V.nodeId!==void 0?{id:V.nodeId,x:V.x,y:V.y}:{x:V.x,y:V.y};_n(ie=>ie.length===0?[le]:[...ie,le]),dr.current=Date.now(),ga(null),Fi(!1),Qa(!1)}else if(H==="erase"){if(Ve.some(V=>V.layer===jt&&(V.type==="via"&&dn||V.type==="pad"&&rl||V.type==="trace"&&Bn))){const V=[];dn&&Ve.some(le=>le.layer===jt&&le.type==="via")&&V.push("vias"),rl&&Ve.some(le=>le.layer===jt&&le.type==="pad")&&V.push("pads"),Bn&&Ve.some(le=>le.layer===jt&&le.type==="trace")&&V.push("traces"),V.length>0&&alert(`Cannot erase: ${V.join(", ")} are locked on the ${jt} layer. Unlock them to erase.`)}Fi(!0),_n([{id:ai(),x:I,y:Q}]),console.log("Starting erase at:",I,Q,"selectedDrawingLayer:",jt,"total strokes:",Ve.length)}else if(H==="transform"&&Nt){if(Zn){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}ol(!0),Gi({x:I,y:Q})}else if(H==="component"){if(!Jl)return;const F=Gt({x:I,y:Q}),V=cn==="top"?Xe:gt,le=cn==="top"?Ot:al,ie=Zx(Jl,cn,F.x,F.y,V,le);ie.abbreviation=mu(Jl),cn==="top"?(is(!0),wn(ge=>[...ge,ie])):(cl(!0),hn(ge=>[...ge,ie]));return}else if(H==="power"){if(!os)return;const V=hl?{x:Gt({x:I,y:Q}).x,y:Gt({x:I,y:Q}).y}:((ie,ge)=>{let ye=1/0,xe=null;const ze=10/Se,_=Se>20?Math.max(ze,1e-4):Se>10?Math.max(ze,.001):Math.max(ze,.01);for(const se of Ve)if(se.type==="via"||se.type==="pad"){const be=se.points[0],Ae=Math.hypot(be.x-ie,be.y-ge);Ae<=_&&Ae<ye&&(ye=Ae,xe=be)}else if(se.type==="trace")for(const be of se.points){const Ae=Math.hypot(be.x-ie,be.y-ge);Ae<=_&&Ae<ye&&(ye=Ae,xe=be)}const te=Gt(xe??{x:ie,y:ge});return{x:te.x,y:te.y,nodeId:xe?.id}})(I,Q),le=ut.find(ie=>ie.id===os);if(le){const ie=V.nodeId??ai(),ge=`${le.voltage} Power Node`;if(dt.find(_e=>_e.pointId===ie)){Bs({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${ie}). Power and ground nodes cannot share the same Node ID.`});return}const xe={id:`power-${Date.now()}-${Math.random()}`,x:V.x,y:V.y,color:"#ff0000",size:p,powerBusId:le.id,layer:jt,type:ge,pointId:ie};if(Fn(_e=>[..._e,xe]),V.nodeId!==void 0){const _e=Mt(V.nodeId,ut),ze=ft(V.nodeId,ut);Vt(_=>_.map(D=>D.type==="via"&&D.points.length>0&&D.points[0].id===V.nodeId?{...D,viaType:_e}:D.type==="pad"&&D.points.length>0&&D.points[0].id===V.nodeId?{...D,padType:ze}:D))}}return}else if(H==="ground"){if(dl===null){if(Vn.length===0){Bs({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}na(!0);return}const F=Vn.find(V=>V.id===dl);if(F){const le=hl?{x:Gt({x:I,y:Q}).x,y:Gt({x:I,y:Q}).y}:((_e,ze)=>{let _=1/0,D=null;const se=10/Se,be=Se>20?Math.max(se,1e-4):Se>10?Math.max(se,.001):Math.max(se,.01);for(const Be of Ve)if(Be.type==="via"||Be.type==="pad"){const Fe=Be.points[0],$e=Math.hypot(Fe.x-_e,Fe.y-ze);$e<=be&&$e<_&&(_=$e,D=Fe)}else if(Be.type==="trace")for(const Fe of Be.points){const $e=Math.hypot(Fe.x-_e,Fe.y-ze);$e<=be&&$e<_&&(_=$e,D=Fe)}const Qe=Gt(D??{x:_e,y:ze});return{x:Qe.x,y:Qe.y,nodeId:D?.id}})(I,Q),ie=le.nodeId??ai(),ge=`${F.name} Ground Node`,ye=lt.find(_e=>_e.pointId===ie);if(ye){Bs({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${ye.type||"Power Node"}) already exists at this Node ID (${ie}). Power and ground nodes cannot share the same Node ID.`});return}const xe={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:le.x,y:le.y,color:F.color,size:Pe.get("ground")?.settings.size||18,groundBusId:F.id,layer:jt,type:ge,pointId:ie};if(bl(_e=>[..._e,xe]),le.nodeId!==void 0){const _e=Mt(le.nodeId,ut),ze=ft(le.nodeId,ut);Vt(_=>_.map(D=>D.type==="via"&&D.points.length>0&&D.points[0].id===le.nodeId?{...D,viaType:_e}:D.type==="pad"&&D.points.length>0&&D.points[0].id===le.nodeId?{...D,padType:ze}:D))}}return}},[H,Nt,p,N,ke,jt,Ve,Se,Je.x,Je.y,hl,os,dl,ut,Vn,Jl,Pe,rn,pe,lt,dt,Mt,ft,Un,Ll,xi]),Oc=j.useCallback(a=>{if(H!=="magnify")return;a.preventDefault();const r=vn.current;if(!r)return;const h=r.getBoundingClientRect(),y=r.width/h.width,b=r.height/h.height,v=a.nativeEvent.offsetX,u=a.nativeEvent.offsetY,w=typeof v=="number"?v:a.clientX-h.left,z=typeof u=="number"?u:a.clientY-h.top,C=w*y,q=z*b,G=(C-40-Je.x)/Se,re=(q-40-Je.y)/Se,I=1.2,Q=1/I,F=a.deltaY<0?I:Q,V=Math.max(.25,Math.min(8,Se*F)),le=C-40-V*G,ie=q-40-V*re;Kt(V),Lt({x:le,y:ie})},[H,Se,Je.x,Je.y]),Hc=j.useCallback(a=>{if(H==="draw"&&ke==="trace"){Za.current=!0;let r=Ht;if(r.length>1){const h=[r[0]];for(let y=1;y<r.length;y++){const b=h[h.length-1],v=r[y];(Math.abs(b.x-v.x)>.001||Math.abs(b.y-v.y)>.001)&&h.push(v)}r=h}if(r.length>=1){const h=pe||"top",y=h==="top"?he:je,b=h==="top"?Ne:et,v={id:`${Date.now()}-trace`,points:r,color:y,size:b,layer:h,type:"trace"};Vt(u=>[...u,v]),h==="top"?ui(u=>[...u,v.id]):qi(u=>[...u,v.id]),_n([]),ga(null),setTimeout(()=>{Za.current=!1},300);return}}if(H==="select"||H==="component"){const r=vn.current;if(!r)return;const h=r.getBoundingClientRect(),y=r.width/h.width,b=r.height/h.height,v=a.nativeEvent.offsetX,u=a.nativeEvent.offsetY,w=typeof v=="number"?v:a.clientX-h.left,z=typeof u=="number"?u:a.clientY-h.top,C=w*y,q=z*b,G=C-40,re=q-40,I=(G-Je.x)/Se,Q=(re-Je.y)/Se,F=10,V=(()=>{for(const ge of St)if(I>=ge.x-F&&I<=ge.x+F&&Q>=ge.y-F&&Q<=ge.y+F)return{layer:"top",comp:ge};for(const ge of ot)if(I>=ge.x-F&&I<=ge.x+F&&Q>=ge.y-F&&Q<=ge.y+F)return{layer:"bottom",comp:ge};return null})(),le=Math.max(6/Se,4);let ie=null;for(const ge of lt){const ye=Math.max(6,ge.size/2),xe=ye*.8,_e=ye+xe,ze=Math.hypot(ge.x-I,ge.y-Q),_=Math.abs(I-ge.x)<=le&&Math.abs(Q-ge.y)<=_e,D=Math.abs(Q-ge.y)<=le&&Math.abs(I-ge.x)<=_e;if(ze<=Math.max(ye,le)||_||D){ie=ge;break}}if(ie){Tt(new Set([ie.id])),Ri({visible:!0,id:ie.id,layer:ie.layer,x:ie.x,y:ie.y,size:ie.size,color:ie.color,powerBusId:ie.powerBusId});return}if(V){const{layer:ge,comp:ye}=V;Ru(ye,ge)}}},[H,ke,N,p,jt,St,ot,lt,Se,Je.x,Je.y,Jl,zn,hl,Ve,Nt,Ra,ku,Nn,Pe,Ht,pe,he,je,Ne,et]),vi=j.useCallback(()=>{const a=ri.current;if(H==="draw"&&ke==="trace"&&a.length>=2){let r=[a[0]];for(let u=1;u<a.length;u++){const w=r[r.length-1],z=a[u];(Math.abs(w.x-z.x)>.001||Math.abs(w.y-z.y)>.001)&&r.push(z)}const h=pe||"top",y=h==="top"?he:je,b=h==="top"?Ne:et,v={id:`${Date.now()}-trace`,points:r,color:y,size:b,layer:h,type:"trace"};Vt(u=>[...u,v]),h==="top"?ui(u=>[...u,v.id]):qi(u=>[...u,v.id]),_n([]),ga(null)}else if(H==="draw"&&ke==="trace"&&a.length===1){const r=pe||"top",h=r==="top"?he:je,y=r==="top"?Ne:et,b={id:`${Date.now()}-trace-dot`,points:a,color:h,size:y,layer:r,type:"trace"};Vt(v=>[...v,b]),r==="top"?ui(v=>[...v,b.id]):qi(v=>[...v,b.id]),_n([])}},[H,ke,pe,he,je,Ne,et,Vt]),ra=j.useCallback((a,r,h)=>{const y=r-a.x,b=h-a.y;if(y===0&&b===0)return{x:r,y:h};const u=(Math.atan2(b,y)*180/Math.PI%180+180)%180,w=[0,45,90];let z=0,C=1e9;for(const q of w){const G=Math.abs(u-q);G<C&&(C=G,z=q)}if(z===0)return{x:r,y:a.y};if(z===90)return{x:a.x,y:h};{const q=Math.min(Math.abs(y),Math.abs(b)),G=y>=0?1:-1,re=b>=0?1:-1;return{x:a.x+G*q,y:a.y+re*q}}},[]),Ec=j.useCallback(a=>{const r=vn.current?.getBoundingClientRect();if(!r)return;const h=a.clientX-r.left,y=a.clientY-r.top,b=vn.current,v=b.width/r.width,u=b.height/r.height,w=h*v,z=y*u,C=w-40,q=z-40,G=(C-Je.x)/Se,re=(q-Je.y)/Se;if(H==="draw"&&ke==="trace"&&Ht.length>0){const Q=hl?{x:Gt({x:G,y:re}).x,y:Gt({x:G,y:re}).y}:((F,V)=>{let le=1/0,ie=null;const ye=10/Se,xe=Se>20?Math.max(ye,1e-4):Se>10?Math.max(ye,.001):Math.max(ye,.01);for(const _ of Ve)if(_.type==="via"){const D=_.points[0],te=Math.hypot(D.x-F,D.y-V);te<=xe&&te<le&&(le=te,ie=D)}else if(_.type==="pad"){const D=_.points[0],te=Math.hypot(D.x-F,D.y-V);te<=xe&&te<le&&(le=te,ie=D)}for(const _ of lt)if(_.pointId!==void 0){const D=Math.hypot(_.x-F,_.y-V);D<=xe&&D<le&&(le=D,ie={x:_.x,y:_.y,id:_.pointId})}for(const _ of dt)if(_.pointId!==void 0){const D=Math.hypot(_.x-F,_.y-V);D<=xe&&D<le&&(le=D,ie={x:_.x,y:_.y,id:_.pointId})}const ze=Gt(ie??{x:F,y:V});return{x:ze.x,y:ze.y,nodeId:ie?.id}})(G,re);ga({x:Q.x,y:Q.y})}else ga(null);if(H==="select"&&As&&Ui){const I=Ui.x,Q=Ui.y;ds({x:Math.min(I,G),y:Math.min(Q,re),width:Math.abs(G-I),height:Math.abs(re-Q)})}else if(H==="pan"&&Ra&&$o.current){const{startCX:I,startCY:Q,panX:F,panY:V}=$o.current,le=C-I,ie=q-Q;Lt({x:F+le,y:V+ie})}else if(Ti&&Ht.length>0){if(H==="draw")if(An){const I=Ht[0],Q=ra(I,G,re),F=Gt(Q),V={id:ai(),x:F.x,y:F.y};_n([I,V])}else{const I=Gt({x:G,y:re});_n(Q=>[...Q,{id:ai(),x:I.x,y:I.y}])}else if(H==="erase"&&(_n(I=>[...I,{id:ai(),x:G,y:re}]),Vt(I=>{const Q=I.filter(V=>{if(V.type==="via"&&dn||V.type==="pad"&&rl||V.type==="trace"&&Bn||V.layer!==jt)return!0;const le=p/2,ie=G-le,ge=G+le,ye=re-le,xe=re+le,_e=(D,te)=>D>=ie&&D<=ge&&te>=ye&&te<=xe,ze=(D,te,se,be)=>{const Wt=(xn,fn)=>{let pt=0;return xn<ie?pt|=1:xn>ge&&(pt|=2),fn<ye?pt|=4:fn>xe&&(pt|=8),pt};let Ke=D,Ue=te,st=se,rt=be,bt=Wt(Ke,Ue),Et=Wt(st,rt);for(;;){if((bt|Et)===0)return!0;if((bt&Et)!==0)return!1;const xn=bt!==0?bt:Et;let fn=0,pt=0;xn&8?(fn=Ke+(st-Ke)*(xe-Ue)/(rt-Ue),pt=xe):xn&4?(fn=Ke+(st-Ke)*(ye-Ue)/(rt-Ue),pt=ye):xn&2?(pt=Ue+(rt-Ue)*(ge-Ke)/(st-Ke),fn=ge):(pt=Ue+(rt-Ue)*(ie-Ke)/(st-Ke),fn=ie),xn===bt?(Ke=fn,Ue=pt,bt=Wt(Ke,Ue)):(st=fn,rt=pt,Et=Wt(st,rt))}};let _=!1;if(V.points.length===1){const D=V.points[0];_=_e(D.x,D.y)}else for(let D=0;D<V.points.length-1;D++){const te=V.points[D],se=V.points[D+1];if(ze(te.x,te.y,se.x,se.y)){_=!0;break}}return _&&console.log("Erasing stroke at position:",G,re,"brushSize:",p,"selectedLayer:",jt),!_});console.log("Strokes before:",I.length,"after:",Q.length);const F=new Set(Q.map(V=>V.id));return Cc(V=>V.filter(le=>F.has(le))),xr(V=>V.filter(le=>F.has(le))),ui(V=>V.filter(le=>F.has(le))),qi(V=>V.filter(le=>F.has(le))),Q}),Jt||Fn(I=>{const Q=p/2,F=G-Q,V=G+Q,le=re-Q,ie=re+Q,ge=ye=>{const xe=ye.size/2,_e=ye.x-xe,ze=ye.x+xe,_=ye.y-xe,D=ye.y+xe;return!(V<_e||F>ze||ie<_||le>D)};return I.filter(ye=>!ge(ye))}),bn||bl(I=>{const Q=p/2,F=G-Q,V=G+Q,le=re-Q,ie=re+Q,ge=xe=>{const _e=Math.max(6,(xe.size||18)/2),ze=_e*.8,_=_e+ze,D=xe.x-_,te=xe.x+_,se=xe.y-_,be=xe.y+_;return!(V<D||F>te||ie<se||le>be)};return I.filter(xe=>!ge(xe))}),!el)){const I=p/2,Q=G-I,F=G+I,V=re-I,le=re+I,ie=ge=>{const xe=(ge.size||18)/2,_e=ge.x-xe,ze=ge.x+xe,_=ge.y-xe,D=ge.y+xe;return!(F<_e||Q>ze||le<_||V>D)};wn(ge=>ge.filter(ye=>!ie(ye))),hn(ge=>ge.filter(ye=>!ie(ye)))}}else if(On&&Hn&&Nt){if(Zn){ol(!1),Gi(null);return}const I=G-Hn.x,Q=re-Hn.y;Nt==="top"&&S?g(F=>F?{...F,x:F.x+I,y:F.y+Q}:null):Nt==="bottom"&&d?$(F=>F?{...F,x:F.x+I,y:F.y+Q}:null):Nt==="both"&&(S&&g(F=>F?{...F,x:F.x+I,y:F.y+Q}:null),d&&$(F=>F?{...F,x:F.x+I,y:F.y+Q}:null)),Gi({x:G,y:re})}},[Ti,Ht,H,p,On,Hn,Nt,S,d,An,ra,jt,Vt,Se,Je.x,Je.y,As,Ui,Zn,dn,rl,Bn,Jt,bn,St,ot,wn,hn]),$r=j.useCallback(()=>{if(H==="select"&&As){const a=Cl,r=Ui;if(Yo(!1),qr(null),ds(null),a&&r){const b=Math.max(3,5/Se),v=a.width<b&&a.height<b,u=(_,D)=>{const te=a.x,se=a.y,be=a.x+a.width,Ae=a.y+a.height;return _>=te&&_<=be&&D>=se&&D<=Ae},w=(_,D,te,se,be,Ae,Qe,Be)=>{const st=(ti,Si)=>{let Rl=0;return ti<be?Rl|=1:ti>Qe&&(Rl|=2),Si<Ae?Rl|=4:Si>Be&&(Rl|=8),Rl};let rt=_,bt=D,Et=te,xn=se,fn=st(rt,bt),pt=st(Et,xn);for(;;){if((fn|pt)===0)return!0;if((fn&pt)!==0)return!1;const ti=fn!==0?fn:pt;let Si=0,Rl=0;ti&8?(Si=rt+(Et-rt)*(Be-bt)/(xn-bt),Rl=Be):ti&4?(Si=rt+(Et-rt)*(Ae-bt)/(xn-bt),Rl=Ae):ti&2?(Rl=bt+(xn-bt)*(Qe-rt)/(Et-rt),Si=Qe):(Rl=bt+(xn-bt)*(be-rt)/(Et-rt),Si=be),ti===fn?(rt=Si,bt=Rl,fn=st(rt,bt)):(Et=Si,xn=Rl,pt=st(Et,xn))}},z=a.x,C=a.y,q=a.x+a.width,G=a.y+a.height,I=Math.max(6/Se,4/Se,.5),Q=(_,D,te,se,be,Ae)=>{const Qe=be-te,Be=Ae-se;if(Qe===0&&Be===0)return Math.hypot(_-te,D-se);const Fe=Math.max(0,Math.min(1,((_-te)*Qe+(D-se)*Be)/(Qe*Qe+Be*Be))),$e=te+Fe*Qe,Wt=se+Fe*Be;return Math.hypot(_-$e,D-Wt)},F=r?.shiftKey===!0,V=new Set(F?Array.from(vt):[]),le=new Set(F?Array.from(it):[]),ie=new Set(F?Array.from(at):[]),ge=new Set(F?Array.from(Dt):[]),ye=r?.hitStrokeId;if(ye){const _=Ve.find(D=>D.id===ye);if(_){let D=!1;if(_.type==="via"||_.type==="pad"?D=Un:D=_.layer==="top"?Sl:wl,D){F?V.has(ye)?V.delete(ye):V.add(ye):(V.clear(),V.add(ye)),Rt(V),ct(le),Tt(ie),zt(ge);return}}}if(v){let _=null;for(const D of Ve){let te=!1;if(D.type==="via"||D.type==="pad"?te=Un:te=D.layer==="top"?Sl:wl,!te)continue;let se=1/0;if(D.type==="via"||D.type==="pad"){const be=D.points[0],Ae=Math.max(1,D.size/2);se=Math.hypot(be.x-r.x,be.y-r.y);const Be=Math.max(6/Se,4/Se,.5);se<=Math.max(Ae,Be)&&(!_||se<_.dist)&&(_={id:D.id,dist:se})}else for(let be=0;be<D.points.length-1;be++){const Ae=D.points[be],Qe=D.points[be+1],Be=Q(r.x,r.y,Ae.x,Ae.y,Qe.x,Qe.y);if(Be<=Math.max(I,D.size/2)){(!_||Be<_.dist)&&(_={id:D.id,dist:Be});break}}}_&&V.add(_.id)}else for(const _ of Ve){let D=!1;if(_.type==="via"?D=Un:_.type==="pad"?D=(_.layer||"top")==="top"?Ll:xi:D=_.layer==="top"?Sl:wl,!D)continue;let te=!1;if(_.type==="via"||_.type==="pad"){const se=_.points[0];te=u(se.x,se.y)}else for(let se=0;se<_.points.length-1;se++){const be=_.points[se],Ae=_.points[se+1];if(w(be.x,be.y,Ae.x,Ae.y,z,C,q,G)||u(be.x,be.y)&&u(Ae.x,Ae.y)){te=!0;break}}te&&V.add(_.id)}const xe=_=>{const te=Math.max(10,_.size||18)/2;return _.x-te<=q&&_.x+te>=z&&_.y-te<=G&&_.y+te>=C};if(v){const _=D=>{const se=Math.max(10,D.size||18)/2;return r.x>=D.x-se&&r.x<=D.x+se&&r.y>=D.y-se&&r.y<=D.y+se};ql&&St.forEach(D=>{_(D)&&le.add(D.id)}),Nl&&ot.forEach(D=>{_(D)&&le.add(D.id)})}else ql&&St.forEach(_=>{xe(_)&&le.add(_.id)}),Nl&&ot.forEach(_=>{xe(_)&&le.add(_.id)});const _e=_=>{const D=Math.max(6,_.size/2),te=D*.8,se=D+te;return _.x-se<=q&&_.x+se>=z&&_.y-se<=G&&_.y+se>=C};if($l)if(v){let _=null;for(const D of lt){const te=Math.max(6,D.size/2),se=te*.8,be=te+se,Ae=Math.hypot(D.x-r.x,D.y-r.y),Qe=Math.abs(r.x-D.x)<=I&&Math.abs(r.y-D.y)<=be,Be=Math.abs(r.y-D.y)<=I&&Math.abs(r.x-D.x)<=be;if(Ae<=Math.max(te,I)||Qe||Be){const $e=Math.min(Ae,Math.abs(r.x-D.x)+Math.abs(r.y-D.y));(!_||$e<_.dist)&&(_={id:D.id,dist:$e})}}_&&ie.add(_.id)}else lt.forEach(_=>{_e(_)&&ie.add(_.id)});const ze=_=>{const D=Math.max(6,(_.size||18)/2),te=D*.8,se=D+te;return _.x-se<=q&&_.x+se>=z&&_.y-se<=G&&_.y+se>=C};if(Bl)if(v){let _=null;for(const D of dt){const te=Math.max(6,(D.size||18)/2),se=te*.8,be=te+se,Ae=Math.hypot(D.x-r.x,D.y-r.y),Qe=Math.abs(r.x-D.x)<=I&&Math.abs(r.y-D.y)<=be,Be=Math.abs(r.y-D.y)<=I&&Math.abs(r.x-D.x)<=be;if(Ae<=Math.max(te,I)||Qe||Be){const $e=Math.min(Ae,Math.abs(r.x-D.x)+Math.abs(r.y-D.y));(!_||$e<_.dist)&&(_={id:D.id,dist:$e})}}_&&ge.add(_.id)}else dt.forEach(_=>{ze(_)&&ge.add(_.id)});Rt(V),ct(le),Tt(ie),zt(ge)}}if(Ti&&Ht.length>0){if(H==="draw"&&ke!=="trace"){const a={id:Date.now().toString(),points:Ht,color:N,size:p,layer:jt,type:"trace"};Vt(r=>[...r,a]),jt==="top"?ui(r=>[...r,a.id]):qi(r=>[...r,a.id])}_n([])}Ra&&(Ur(!1),$o.current=null,Zo.current=null),Fi(!1),ol(!1),Gi(null),Qa(!1)},[Ti,Ht,H,N,p,jt,Cl,Ui,As,Ve,Se,Qo,vt,lt,dt,St,ot,it,at,Dt,Un,Sl,wl,ql,Nl,$l,Bl]);Ie.useEffect(()=>{if(!(H==="pan"&&Ra&&Zo.current))return;const a=h=>{const y=vn.current;if(!y)return;const b=y.getBoundingClientRect(),v=y.width/b.width,u=y.height/b.height,{startClientX:w,startClientY:z,panX:C,panY:q}=Zo.current,G=(h.clientX-w)*v,re=(h.clientY-z)*u;Lt({x:C+G,y:q+re})},r=()=>{Ur(!1),$o.current=null,Zo.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",r,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)}},[H,Ra]);const bi=j.useCallback(()=>{const a=vn.current;if(!a)return;const r=a.getContext("2d");if(!r)return;r.clearRect(0,0,a.width,a.height),r.save(),r.beginPath(),r.rect(40,40,a.width-80,a.height-80),r.clip(),r.translate(40,40);const h=(v,u)=>{const w=v.width,z=v.height,C=document.createElement("canvas");C.width=w,C.height=z;const q=C.getContext("2d");if(!q)return C;q.drawImage(v,0,0,w,z);const re=q.getImageData(0,0,w,z).data,I=new Uint8ClampedArray(w*z);for(let xe=0;xe<w*z;xe++){const _e=re[xe*4+0],ze=re[xe*4+1],_=re[xe*4+2];I[xe]=Math.round(.299*_e+.587*ze+.114*_)}const Q=[-1,0,1,-2,0,2,-1,0,1],F=[-1,-2,-1,0,0,0,1,2,1],V=new Float32Array(w*z);for(let xe=1;xe<z-1;xe++)for(let _e=1;_e<w-1;_e++){let ze=0,_=0,D=0;for(let se=-1;se<=1;se++)for(let be=-1;be<=1;be++){const Ae=_e+be,Qe=xe+se,Be=I[Qe*w+Ae];ze+=Be*Q[D],_+=Be*F[D],D++}const te=Math.sqrt(ze*ze+_*_);V[xe*w+_e]=te}let le=0;for(let xe=0;xe<V.length;xe++)V[xe]>le&&(le=V[xe]);const ie=q.createImageData(w,z),ge=ie.data,ye=.2;for(let xe=0;xe<w*z;xe++){const ze=(le>0?V[xe]/le:0)>=ye?255:0,_=u?255-ze:ze;ge[xe*4+0]=_,ge[xe*4+1]=_,ge[xe*4+2]=_,ge[xe*4+3]=255}return q.putImageData(ie,0,0),C},y=(v,u,w,z,C,q,G,re)=>{const I=document.createElement("canvas");I.width=w,I.height=z;const Q=I.getContext("2d",{willReadFrequently:!0});Q.clearRect(0,0,w,z),Q.drawImage(u,0,0,w,z);let F=I;if(Math.abs(C)>1e-6){const V=Math.tan(C),le=Math.max(.2,1-V),ie=Math.max(.2,1+V),ge=Math.max(le,ie),ye=Math.max(1,Math.ceil(w*ge)),xe=document.createElement("canvas");xe.width=ye,xe.height=z;const _e=xe.getContext("2d",{willReadFrequently:!0});_e.clearRect(0,0,ye,z);for(let ze=0;ze<z;ze++){const _=z<=1?0:ze/(z-1),D=le*(1-_)+ie*_,te=Math.max(1,w*D),se=(ye-te)/2;_e.drawImage(F,0,ze,w,1,se,ze,te,1)}F=xe}if(Math.abs(q)>1e-6){const V=Math.tan(q),le=Math.max(.2,1-V),ie=Math.max(.2,1+V),ge=Math.max(le,ie),ye=Math.max(1,Math.ceil(z*ge)),xe=document.createElement("canvas");xe.width=F.width,xe.height=ye;const _e=xe.getContext("2d",{willReadFrequently:!0});_e.clearRect(0,0,xe.width,ye);for(let ze=0;ze<F.width;ze++){const _=F.width<=1?0:ze/(F.width-1),D=le*(1-_)+ie*_,te=Math.max(1,z*D),se=(ye-te)/2;_e.drawImage(F,ze,0,1,F.height,ze,se,1,te)}F=xe}v.drawImage(F,-G/2,-re/2,G,re)};r.translate(Je.x,Je.y),r.scale(Se,Se);{const v=ta&&ns;if(S&&S.bitmap&&ta){const u=S.bitmap;if(r.save(),r.globalAlpha=1,we&&!ne?r.filter="grayscale(100%)":r.filter="none",r.translate(S.x,S.y),r.rotate(S.rotation*Math.PI/180),S.skewX||S.skewY){const q=Math.tan(S.skewX||0),G=Math.tan(S.skewY||0);r.transform(1,G,q,1,0,0)}r.scale(S.scale*(S.flipX?-1:1),S.scale*(S.flipY?-1:1));const w=u.width*1,z=u.height*1,C=ne?h(u,Me):u;S.keystoneV&&Math.abs(S.keystoneV)>1e-6||S.keystoneH&&Math.abs(S.keystoneH)>1e-6?y(r,C,u.width,u.height,S.keystoneV||0,S.keystoneH||0,w,z):r.drawImage(C,-w/2,-z/2,w,z),r.restore()}if(d&&d.bitmap&&ns){const u=d.bitmap;if(r.save(),r.globalAlpha=v?de/100:1,we&&!ne?r.filter="grayscale(100%)":r.filter="none",r.translate(d.x,d.y),r.rotate(d.rotation*Math.PI/180),d.skewX||d.skewY){const q=Math.tan(d.skewX||0),G=Math.tan(d.skewY||0);r.transform(1,G,q,1,0,0)}r.scale(d.scale*(d.flipX?-1:1),d.scale*(d.flipY?-1:1));const w=u.width*1,z=u.height*1,C=ne?h(u,Me):u;d.keystoneV&&Math.abs(d.keystoneV)>1e-6||d.keystoneH&&Math.abs(d.keystoneH)>1e-6?y(r,C,u.width,u.height,d.keystoneV||0,d.keystoneH||0,w,z):r.drawImage(C,-w/2,-z/2,w,z),r.restore()}}if(ps(r),$l&&lt.length>0){const v=u=>{r.save();const w=ut.find(re=>re.id===u.powerBusId),z=at.has(u.id),C="#ff0000";r.strokeStyle=C,r.lineWidth=Math.max(1,(z?3:2)/Math.max(Se,.001)),r.lineCap="round";const q=Math.max(6,u.size/2),G=q*.8;z&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Se,.001)),r.beginPath(),r.arc(u.x,u.y,q+G+3,0,Math.PI*2),r.stroke()),r.strokeStyle=C,r.lineWidth=Math.max(1,(z?3:2)/Math.max(Se,.001)),r.beginPath(),r.arc(u.x,u.y,q,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(u.x,u.y-q-G),r.lineTo(u.x,u.y+q+G),r.stroke(),r.beginPath(),r.moveTo(u.x-q-G,u.y),r.lineTo(u.x+q+G,u.y),r.stroke(),w&&(r.fillStyle=C,r.font=`${Math.max(10,q*.8)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(w.voltage,u.x,u.y+q+G+12)),r.restore()};lt.forEach(v)}if(Bl&&dt.length>0){const v=u=>{r.save();const w=Dt.has(u.id),z=u.color||"#000000";if(u.groundBusId==="groundbus-earth"){const q=Math.max(6,u.size||18),G=q*.9,re=q*.24,I=q*1.6;r.strokeStyle=z,r.lineWidth=Math.max(1,(w?3:2)/Math.max(Se,.001)),r.lineCap="round",w&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Se,.001)),r.setLineDash([5,5]),r.strokeRect(u.x-I/2-3,u.y-3,I+6,G+re*2+6),r.setLineDash([])),r.strokeStyle=z,r.lineWidth=Math.max(1,(w?3:2)/Math.max(Se,.001)),r.beginPath(),r.moveTo(u.x,u.y),r.lineTo(u.x,u.y+G),r.stroke();for(let Q=0;Q<3;Q++){const F=u.y+G+Q*re,V=I*(1-Q*.25);r.beginPath(),r.moveTo(u.x-V/2,F),r.lineTo(u.x+V/2,F),r.stroke()}}else{const q=Math.max(6,(u.size||18)/2),G=q*.8;w&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Se,.001)),r.beginPath(),r.arc(u.x,u.y,q+G+3,0,Math.PI*2),r.stroke()),r.strokeStyle=z,r.lineWidth=Math.max(1,(w?3:2)/Math.max(Se,.001)),r.beginPath(),r.arc(u.x,u.y,q,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(u.x,u.y-q-G),r.lineTo(u.x,u.y+q+G),r.stroke(),r.beginPath(),r.moveTo(u.x-q-G,u.y),r.lineTo(u.x+q+G,u.y),r.stroke()}r.restore()};dt.forEach(v)}const b=v=>{const u=Math.max(10,v.size||18),w=u/2;r.save(),r.strokeStyle=v.color||"#111",r.lineWidth=Math.max(1,2/Math.max(Se,.001));const z=v.pinConnections||[],C=z.length>0&&z.length===v.pinCount&&z.every(re=>re&&re.trim()!=="");r.fillStyle=C?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",r.beginPath(),r.rect(v.x-w,v.y-w,u,u),r.fill(),r.stroke();let q="abbreviation"in v&&v.abbreviation?String(v.abbreviation).trim():"";(!q||q===""||q==="****"||q==="*"||q==="?")&&(q=mu(v.componentType)),r.fillStyle=v.color||"#111",r.font=`bold ${Math.max(8,u*.35)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(q,v.x,v.y),it.has(v.id)&&(r.setLineDash([4,3]),r.strokeStyle="#00bfff",r.lineWidth=1.5,r.strokeRect(v.x-w-3,v.y-w-3,u+6,u+6),r.setLineDash([])),r.restore()};if(la){const v=w=>{const z=parseInt(w,10);if(isNaN(z))return null;for(const C of Ve)if((C.type==="via"||C.type==="pad")&&C.points.length>0){const q=C.points[0];if(q.id===z)return{x:q.x,y:q.y}}for(const C of Ve)if(C.type==="trace"){for(const q of C.points)if(q.id===z)return{x:q.x,y:q.y}}for(const C of lt)if(C.pointId===z)return{x:C.x,y:C.y};for(const C of dt)if(C.pointId===z)return{x:C.x,y:C.y};return null},u=w=>{const z=w.pinConnections||[],C=w.componentType==="Electrolytic Capacitor"||w.componentType==="Diode"||w.componentType==="Battery"||w.componentType==="ZenerDiode",q=w.componentType==="Capacitor"&&"dielectric"in w&&w.dielectric==="Tantalum",G=(C||q)&&w.pinPolarities,re=new Map;for(let I=0;I<z.length;I++){const Q=z[I];if(Q&&Q.trim()!==""){const F=Q.trim(),V=!!(G&&w.pinPolarities&&I<w.pinPolarities.length&&w.pinPolarities[I]==="-"),le=re.get(F);le!==void 0?re.set(F,le||V):re.set(F,V)}}for(const[I,Q]of re){const F=v(I);if(F){const V={x:w.x,y:w.y};r.save(),r.strokeStyle=Q?"rgba(0, 0, 0, 0.8)":"rgba(0, 150, 255, 0.6)",r.lineWidth=Math.max(1,3/Math.max(Se,.001)),r.beginPath(),r.moveTo(V.x,V.y),r.lineTo(F.x,F.y),r.stroke(),r.restore()}}};ql&&St.forEach(u),Nl&&ot.forEach(u)}if(ql&&St.forEach(b),Nl&&ot.forEach(b),H==="select"&&Cl){r.save();const v=Math.max(2,6/Math.max(1e-4,Se));r.strokeStyle="#00bfff",r.fillStyle="rgba(0, 191, 255, 0.15)",r.lineWidth=Math.max(1,1.5/Math.max(1e-4,Se)),r.setLineDash([v,v]),r.beginPath(),r.rect(Cl.x,Cl.y,Cl.width,Cl.height),r.fill(),r.stroke(),r.setLineDash([]),r.restore()}r.restore()},[S,d,de,Ve,Ht,Ti,H,N,p,we,ne,Me,Nt,jt,Se,Je.x,Je.y,ta,ns,Un,Sl,wl,Ll,xi,ql,Nl,St,ot,$l,lt,Bl,dt,la,Cl,vt,it,at,Dt,pe,he,je,Ne,et,ke,si,Zn]);Ie.useEffect(()=>{const a=vn.current,r=Ca.current,h=Nr.current,y=Mr.current;if(!a||!r||!h||!y)return;let b=null;const v=a.width-80,u=a.height-80,w=v/2,z=u/2,C=ye=>{if(!ye||!ye.bitmap)return;const xe=ye.bitmap.width,_e=ye.bitmap.height,ze=ye.keystoneV?Math.tan(ye.keystoneV):0,_=ye.keystoneH?Math.tan(ye.keystoneH):0,D=Math.max(.2,1-ze),te=Math.max(.2,1+ze),se=Math.max(.2,1-_),be=Math.max(.2,1+_),Ae=Math.max(D,te),Qe=Math.max(se,be),Be=xe*Ae,Fe=_e*Qe,$e=ye.skewX?Math.tan(ye.skewX):0,Wt=ye.skewY?Math.tan(ye.skewY):0,Ke=Math.abs(ye.scale),Ue=Math.abs(Ke)*Be+Math.abs($e)*Math.abs(Ke)*Fe,st=Math.abs(Wt)*Math.abs(Ke)*Be+Math.abs(Ke)*Fe,rt=Hx(Ue,st,w,z,ye.x,ye.y,1,1,ye.rotation);b=Ox(b,rt)};if(C(S),C(d),!b){h.style.width=`${r.clientWidth}px`,y.style.height=`${r.clientHeight}px`;return}const q=b,G=q.maxX-q.minX,re=q.maxY-q.minY,I=G*Se,Q=re*Se,F=8,V=Math.max(r.clientWidth,Math.ceil(I)+F*2),le=Math.max(r.clientHeight,Math.ceil(Q)+F*2);h.style.width=`${V}px`,y.style.height=`${le}px`,Lo.current=q.minX*Se-F,qo.current=q.minY*Se-F;const ie=Ar.current,ge=kr.current;if(ea.current=!0,ie){const ye=Math.max(0,ie.scrollWidth-ie.clientWidth),xe=Math.max(0,Math.min(ye,-(Je.x+Lo.current)));ie.scrollLeft=xe}if(ge){const ye=Math.max(0,ge.scrollHeight-ge.clientHeight),xe=Math.max(0,Math.min(ye,-(Je.y+qo.current)));ge.scrollTop=xe}requestAnimationFrame(()=>{ea.current=!1})},[S,d,Se,Je.x,Je.y,Tn.width,Tn.height]),Ie.useEffect(()=>{const a=()=>{const r=Ca.current;if(!r)return;const h=1.6,y=24,b=r.clientWidth-y,v=r.clientHeight-y,u=Math.floor(v*h),w=Math.floor(b/h);let z,C;u<=b?(z=u,C=v):(z=b,C=w),z=Math.max(600,z),C=Math.max(375,C),Ko(q=>{if(q.width!==z||q.height!==C){const G=q.width-80,re=q.height-80,I=z-80,Q=C-80,F=G>0?I/G:1,V=re>0?Q/re:1;Lt(le=>({x:le.x*F,y:le.y*V}))}return q.width===z&&q.height===C?q:{width:z,height:C}})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[Lt]),Ie.useEffect(()=>{Zn&&(On&&(ol(!1),Gi(null)),ci(null))},[Zn,On,ol,Gi,ci]);const ps=j.useCallback(a=>{if(Ve.forEach(r=>{if(r.type==="via"||r.type==="pad")return;let h=!1;if(r.layer==="top"?h=Sl:r.layer==="bottom"&&(h=wl),!!h)if(r.points.length===1){const y=r.points[0],b=Math.max(.5,r.size/2);vt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(y.x,y.y,b+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=r.color,a.beginPath(),a.arc(y.x,y.y,b,0,Math.PI*2),a.fill()}else{vt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=r.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),r.points.forEach((y,b)=>{b===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=r.color,a.lineWidth=r.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),r.points.forEach((y,b)=>{b===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke();for(const y of r.points)a.beginPath(),a.arc(y.x,y.y,r.size/2,0,Math.PI*2),a.fill()}}),Ve.forEach(r=>{if(r.type==="via"){if(!Un)return}else if(r.type==="pad"){if(r.layer==="top"&&!Ll||r.layer==="bottom"&&!xi)return}else return;const h=r.points[0];if(vt.has(r.id)){if(r.type==="via"){const y=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(h.x,h.y,y,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(r.type==="pad"){const y=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(h.x-y,h.y-y,r.size+6,r.size+6),a.setLineDash([])}}if(r.type==="via"){const y=Math.max(.5,r.size/2),b=y*.5,v=y*.7;a.fillStyle=r.color,a.beginPath(),a.arc(h.x,h.y,y,0,Math.PI*2),a.arc(h.x,h.y,b,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(h.x-v,h.y),a.lineTo(h.x+v,h.y),a.stroke(),a.beginPath(),a.moveTo(h.x,h.y-v),a.lineTo(h.x,h.y+v),a.stroke()}else if(r.type==="pad"){const y=Math.max(.5,r.size/2),b=r.size,v=b*.5,u=y*.7;a.fillStyle=r.color,a.beginPath(),a.rect(h.x-y,h.y-y,b,b),a.rect(h.x-v/2,h.y-v/2,v,v),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(h.x-u,h.y),a.lineTo(h.x+u,h.y),a.stroke(),a.beginPath(),a.moveTo(h.x,h.y-u),a.lineTo(h.x,h.y+u),a.stroke()}}),Ht.length>0){const r=jt;let h=!0;if(H==="draw"&&(ke==="via"?h=Un:h=r==="top"?Sl:wl),h)if(H==="draw")if(ke==="via"){const y=Ht[Ht.length-1],b=Math.max(.5,p/2),v=b*.5,u=b*.7;a.fillStyle=N,a.beginPath(),a.arc(y.x,y.y,b,0,Math.PI*2),a.arc(y.x,y.y,v,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(y.x-u,y.y),a.lineTo(y.x+u,y.y),a.stroke(),a.beginPath(),a.moveTo(y.x,y.y-u),a.lineTo(y.x,y.y+u),a.stroke()}else if(ke==="pad"){const y=Ht[Ht.length-1],b=Math.max(.5,p/2),v=p,u=v*.5,w=b*.7;a.fillStyle=N,a.beginPath(),a.rect(y.x-b,y.y-b,v,v),a.rect(y.x-u/2,y.y-u/2,u,u),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(y.x-w,y.y),a.lineTo(y.x+w,y.y),a.stroke(),a.beginPath(),a.moveTo(y.x,y.y-w),a.lineTo(y.x,y.y+w),a.stroke()}else{const y=pe||"top",b=y==="top"?he:je,v=y==="top"?Ne:et;if(Ht.length===1){const u=Ht[0],w=Math.max(.5,v/2);a.fillStyle=b,a.beginPath(),a.arc(u.x,u.y,w,0,Math.PI*2),a.fill(),si&&(a.strokeStyle=b,a.lineWidth=v,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(u.x,u.y),a.lineTo(si.x,si.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=b,a.lineWidth=v,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),Ht.forEach((u,w)=>{w===0?a.moveTo(u.x,u.y):a.lineTo(u.x,u.y)}),a.stroke(),si&&Ht.length>0){const u=Ht[Ht.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(u.x,u.y),a.lineTo(si.x,si.y),a.stroke(),a.globalAlpha=1}}else H==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=p,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),Ht.forEach((y,b)=>{b===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke())}},[Ve,vt,Sl,wl,Un,Ll,xi,Ht,H,ke,N,p,jt,pe,he,je,Ne,et,si]),mo=j.useCallback((a,r)=>{if(Zn){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&S?g(h=>h?{...h,...r}:null):a==="bottom"&&d?$(h=>h?{...h,...r}:null):a==="both"&&(S&&g(h=>h?{...h,...r}:null),d&&$(h=>h?{...h,...r}:null))},[S,d,Zn]),hs=j.useCallback(()=>{Nt&&(mo(Nt,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),Oe(!1),ee(!1),He(!1))},[mo,Nt]),So=j.useCallback(()=>{if(vt.size>0||it.size>0||at.size>0||Dt.size>0){if(vt.size>0){const a=Ve.filter(b=>vt.has(b.id)),r=dn&&a.some(b=>b.type==="via"),h=Bn&&a.some(b=>b.type==="trace"),y=rl&&a.some(b=>b.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(h){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(it.size>0&&el){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(at.size>0&&Jt){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Dt.size>0&&bn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Vt(a=>a.map(r=>{if(vt.has(r.id)){const h=r.size+1;return r.type==="via"?qe("via",h):r.type==="pad"?qe("pad",h):r.type==="trace"&&qe("trace",h,r.layer),{...r,size:h}}return r})),it.size>0){const a=(it.size>0&&St.find(r=>it.has(r.id))?.size||18)+1;qe("component",a),wn(r=>r.map(h=>it.has(h.id)?{...h,size:(h.size||18)+1}:h)),hn(r=>r.map(h=>it.has(h.id)?{...h,size:(h.size||18)+1}:h))}if(at.size>0){const a=(lt.find(r=>at.has(r.id))?.size||18)+1;qe("power",a),Fn(r=>r.map(h=>at.has(h.id)?{...h,size:h.size+1}:h))}if(Dt.size>0){const a=(dt.find(r=>Dt.has(r.id))?.size||18)+1;qe("ground",a),bl(r=>r.map(h=>Dt.has(h.id)?{...h,size:(h.size||18)+1}:h))}}else W(a=>Math.min(40,a+1))},[vt,it,at,Dt,Ve,dn,Bn,el,Jt,bn,H,ke,jt,qe]),Ls=j.useCallback(()=>{if(vt.size>0||it.size>0||at.size>0||Dt.size>0){if(vt.size>0){const a=Ve.filter(b=>vt.has(b.id)),r=dn&&a.some(b=>b.type==="via"),h=Bn&&a.some(b=>b.type==="trace"),y=rl&&a.some(b=>b.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(h){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(it.size>0&&el){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(at.size>0&&Jt){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Dt.size>0&&bn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Vt(a=>a.map(r=>{if(vt.has(r.id)){const h=Math.max(1,r.size-1);return r.type==="via"?qe("via",h):r.type==="pad"?qe("pad",h):r.type==="trace"&&qe("trace",h,r.layer),{...r,size:h}}return r})),it.size>0){const a=Math.max(1,(St.find(r=>it.has(r.id))?.size||18)-1);qe("component",a),wn(r=>r.map(h=>it.has(h.id)?{...h,size:Math.max(1,(h.size||18)-1)}:h)),hn(r=>r.map(h=>it.has(h.id)?{...h,size:Math.max(1,(h.size||18)-1)}:h))}if(at.size>0){const a=Math.max(1,(lt.find(r=>at.has(r.id))?.size||18)-1);qe("power",a),Fn(r=>r.map(h=>at.has(h.id)?{...h,size:Math.max(1,h.size-1)}:h))}if(Dt.size>0){const a=Math.max(1,(dt.find(r=>Dt.has(r.id))?.size||18)-1);qe("ground",a),bl(r=>r.map(h=>Dt.has(h.id)?{...h,size:Math.max(1,(h.size||18)-1)}:h))}}else W(a=>Math.max(1,a-1))},[vt,it,at,Dt,Ve,dn,Bn,el,Jt,bn,H,ke,jt,qe]),ca=j.useCallback(()=>{const a=fi.size;if(vt.size>0||it.size>0||at.size>0||Dt.size>0){if(vt.size>0){const r=Ve.filter(v=>vt.has(v.id)),h=dn&&r.some(v=>v.type==="via"),y=rl&&r.some(v=>v.type==="pad"),b=Bn&&r.some(v=>v.type==="trace");if(h||y||b){alert("Cannot change size: selected items are locked.");return}}if(it.size>0&&el){alert("Cannot change size: selected components are locked.");return}if(at.size>0&&Jt){alert("Cannot change size: selected power nodes are locked.");return}if(Dt.size>0&&bn){alert("Cannot change size: selected ground nodes are locked.");return}Vt(r=>r.map(h=>vt.has(h.id)?(h.type==="via"?(qe("via",a),ln(y=>{const b=new Map(y),v=b.get("via");return v&&b.set("via",{...v,settings:{...v.settings,size:a}}),b})):h.type==="pad"?(qe("pad",a),ln(y=>{const b=new Map(y),v=b.get("pad");return v&&b.set("pad",{...v,settings:{...v.settings,size:a}}),b})):h.type==="trace"&&qe("trace",a,h.layer),{...h,size:a}):h)),it.size>0&&(qe("component",a),wn(r=>r.map(h=>it.has(h.id)?{...h,size:a}:h)),hn(r=>r.map(h=>it.has(h.id)?{...h,size:a}:h))),at.size>0&&(qe("power",a),Fn(r=>r.map(h=>at.has(h.id)?{...h,size:a}:h))),Dt.size>0&&(qe("ground",a),bl(r=>r.map(h=>Dt.has(h.id)?{...h,size:a}:h)))}else W(a),H==="draw"&&ke==="trace"?jt==="top"?(_t(a),qe("trace",a,"top")):(U(a),qe("trace",a,"bottom")):qe(H==="draw"&&ke==="via"?"via":H==="draw"&&ke==="pad"?"pad":H==="component"?"component":H==="power"?"power":H==="ground"?"ground":"brush",a);Ai({visible:!1,size:6})},[fi.size,vt,it,at,Dt,Ve,dn,Bn,el,Jt,bn,H,ke,jt,qe,Pe,ln]),Zr=j.useCallback(()=>{Al({visible:!1,source:null,interval:5})},[]),_i=j.useCallback(async(a,r=!1)=>{if(a===null){Pl(!1),Qi(null),en.current&&(clearInterval(en.current),en.current=null),Zi({visible:!1,interval:5}),r&&Al({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!jn){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let h=pi;if(!h){const u=window;if(typeof u.showDirectoryPicker=="function")try{h=await u.showDirectoryPicker(),hi(h)}catch(w){w?.name!=="AbortError"&&(console.error("Failed to get directory:",w),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}_s(h);const y=jn.replace(/\.json$/i,""),v=Tc(y).replace(/[^a-zA-Z0-9_-]/g,"_");Ta(v),ua.current=h,Ei.current=v,Qi(a),Pl(!0),tl.current=!0,Zi({visible:!1,interval:5}),r&&Al({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),Br.current&&Br.current()},200)},[jn,pi,Pl,Qi,_s,Ta,Zi,Al,hi]),Ea=j.useCallback(()=>{k("select"),Rt(new Set),ct(new Set),Tt(new Set),zt(new Set)},[Rt,ct,Tt,zt]),xs=j.useCallback(a=>{if(a.key==="Escape"){const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type==="checkbox"||y.tagName==="INPUT"&&y.type==="radio")){y.blur(),a.preventDefault(),a.stopPropagation();return}}const r=document.activeElement;if(!(r&&(r.tagName==="INPUT"&&r.type!=="checkbox"&&r.type!=="radio"||r.tagName==="TEXTAREA"||r.isContentEditable)||da.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),So();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),Ls();return}if((a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="ArrowLeft"||a.key==="ArrowRight")&&it.size>0){a.preventDefault(),a.stopPropagation();const y=a.shiftKey?10:1;let b=0,v=0;a.key==="ArrowUp"?v=-y:a.key==="ArrowDown"?v=y:a.key==="ArrowLeft"?b=-y:a.key==="ArrowRight"&&(b=y);for(const u of it){const w=St.find(z=>z.id===u);if(w){const z=w.x+b,C=w.y+v,q=Gt({x:z,y:C});wn(G=>G.map(re=>re.id===u?{...re,x:q.x,y:q.y}:re))}else{const z=ot.find(C=>C.id===u);if(z){const C=z.x+b,q=z.y+v,G=Gt({x:C,y:q});hn(re=>re.map(I=>I.id===u?{...I,x:G.x,y:G.y}:I))}}}return}if((a.key==="I"||a.key==="i")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation();const y=[];vt.size>0,vt.size===0&&it.size===0&&at.size===0&&Dt.size===0&&y.push(`
No objects selected.`);const b=y.join(`
`);console.log(b),Xo({visible:!0,text:b});return}if((a.key==="N"||a.key==="n")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation(),jl(!0);return}if(a.key==="O"||a.key==="o"){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Kt(1);const v=vn.current,u=Ca.current;let w=0,z=0;if(v&&u){const C=v.getBoundingClientRect(),q=u.getBoundingClientRect(),G=v.width-80,re=v.height-80,F=60+168+6,V=C.left-q.left,le=F-V,ie=C.width-Math.max(0,le),ge=le+ie/2,ye=C.height/2,xe=G/2,_e=re/2,ze=C.width/v.width,_=C.height/v.height,D=ge/ze,te=ye/_,se=D-40,be=te-40;w=se-xe,z=be-_e}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Lt({x:w,y:z}),Ce("overlay"),Rt(new Set),ct(new Set),Tt(new Set),zt(new Set),k("select");return}if((a.key==="Alt"||a.altKey)&&Fs(!0),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),Ea(),zl(!1),Oa(!1),yo(!1),Kl(!1),Ml(!1),Us(!1),Lr(null);return}if(a.key==="Enter"&&H==="draw"&&ke==="trace"){vi();return}if((a.key==="Delete"||a.key==="Backspace")&&(vt.size>0||it.size>0||at.size>0||Dt.size>0)){if(a.preventDefault(),a.stopPropagation(),vt.size>0){const y=Ve.filter(w=>vt.has(w.id)),b=dn&&y.some(w=>w.type==="via"),v=Bn&&y.some(w=>w.type==="trace"),u=rl&&y.some(w=>w.type==="pad");b?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):v?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):u?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):(Vt(w=>w.filter(z=>!vt.has(z.id))),Rt(new Set))}it.size>0&&(el?alert("Cannot delete: Components are locked. Unlock components to delete them."):(wn(y=>y.filter(b=>!it.has(b.id))),hn(y=>y.filter(b=>!it.has(b.id))),ct(new Set))),at.size>0&&(Jt?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Fn(y=>y.filter(b=>!at.has(b.id))),Tt(new Set))),Dt.size>0&&(bn?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(bl(y=>y.filter(b=>!Dt.has(b.id))),zt(new Set)));return}if((H==="draw"||H==="erase"||H==="power"||H==="ground")&&(a.key==="z"||a.key==="Z")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),H==="power"){Fn(y=>y.length===0?y:y.slice(0,-1));return}if(H==="ground"){bl(y=>y.length===0?y:y.slice(0,-1));return}if(H==="draw"&&ke==="trace"){const y=Ht,b=ri.current,v=y.length>0?y:b;if(v.length>0){v.length>1?_n(u=>u.slice(0,-1)):_n([]);return}Vt(u=>{for(let w=u.length-1;w>=0;w--){const z=u[w];if(z.type==="trace"&&z.layer===jt&&z.points.length>=2)if(z.points.length>2){const C=z.points.slice(0,-1);return _n(C),[...u.slice(0,w),...u.slice(w+1)]}else return[...u.slice(0,w),...u.slice(w+1)]}return u});return}if(Ti&&Ht.length>0){_n([]);return}H==="draw"&&(ke==="via"||ke==="pad")&&Vt(y=>{for(let b=y.length-1;b>=0;b--){const v=y[b];if(v.layer===jt&&v.type===ke)return[...y.slice(0,b),...y.slice(b+1)]}return y});return}if(!a.ctrlKey&&!a.altKey){const y=document.activeElement;if(!(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),Ea();return;case"b":case"B":a.preventDefault(),k("power");return;case"g":case"G":a.preventDefault(),k("ground");return;case"v":case"V":a.preventDefault(),ya("via"),k("draw");return;case"p":case"P":a.preventDefault(),ya("pad"),k("draw"),$n(rn||"top");return;case"t":case"T":a.preventDefault(),ya("trace"),k("draw"),$n(pe||"top");return;case"c":case"C":a.preventDefault(),k("component"),yo(!0),Kl(!1),Pr(null);return;case"e":case"E":a.preventDefault(),k("erase");return;case"h":case"H":a.preventDefault(),k("pan");return;case"z":case"Z":if(!a.ctrlKey){a.preventDefault(),Es(!1),k("magnify");return}break}}if(H==="transform"&&Nt){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const b=document.activeElement;if(b&&b.tagName==="INPUT"){const v=b;v.type==="radio"&&v.blur()}if(Zn)return;if(zi==="nudge"){let v=0,u=0;switch(a.key){case"ArrowLeft":v=-1;break;case"ArrowRight":v=1;break;case"ArrowUp":u=-1;break;case"ArrowDown":u=1;break;default:return}Nt==="top"&&S?g(w=>w?{...w,x:w.x+v,y:w.y+u}:null):Nt==="bottom"&&d?$(w=>w?{...w,x:w.x+v,y:w.y+u}:null):Nt==="both"&&(S&&g(w=>w?{...w,x:w.x+v,y:w.y+u}:null),d&&$(w=>w?{...w,x:w.x+v,y:w.y+u}:null))}else if(zi==="scale"){let v=0;switch(a.key){case"ArrowUp":v=.01;break;case"ArrowDown":v=-.01;break;case"ArrowRight":v=.001;break;case"ArrowLeft":v=-.001;break;default:return}Nt==="top"&&S?g(u=>u?{...u,scale:Math.max(.1,Math.min(3,u.scale+v))}:null):Nt==="bottom"&&d?$(u=>u?{...u,scale:Math.max(.1,Math.min(3,u.scale+v))}:null):Nt==="both"&&(S&&g(u=>u?{...u,scale:Math.max(.1,Math.min(3,u.scale+v))}:null),d&&$(u=>u?{...u,scale:Math.max(.1,Math.min(3,u.scale+v))}:null))}else if(zi==="rotate"){let v=0;switch(a.key){case"ArrowUp":v=1;break;case"ArrowDown":v=-1;break;case"ArrowRight":v=.1;break;case"ArrowLeft":v=-.1;break;default:return}Nt==="top"&&S?g(u=>u?{...u,rotation:u.rotation+v}:null):Nt==="bottom"&&d?$(u=>u?{...u,rotation:u.rotation+v}:null):Nt==="both"&&(S&&g(u=>u?{...u,rotation:u.rotation+v}:null),d&&$(u=>u?{...u,rotation:u.rotation+v}:null))}else if(zi==="slant"){let v=0,u=0;switch(a.key){case"ArrowUp":u=-.5;break;case"ArrowDown":u=.5;break;case"ArrowLeft":v=-.5;break;case"ArrowRight":v=.5;break}if(v!==0||u!==0){const w=C=>C*Math.PI/180,z=C=>Math.max(-.7,Math.min(.7,C));Nt==="top"&&S?g(C=>C?{...C,skewX:z((C.skewX||0)+w(v)),skewY:z((C.skewY||0)+w(u))}:null):Nt==="bottom"&&d?$(C=>C?{...C,skewX:z((C.skewX||0)+w(v)),skewY:z((C.skewY||0)+w(u))}:null):Nt==="both"&&(S&&g(C=>C?{...C,skewX:z((C.skewX||0)+w(v)),skewY:z((C.skewY||0)+w(u))}:null),d&&$(C=>C?{...C,skewX:z((C.skewX||0)+w(v)),skewY:z((C.skewY||0)+w(u))}:null))}}else if(zi==="keystone"){let v=0,u=0;switch(a.key){case"ArrowUp":u=-.5;break;case"ArrowDown":u=.5;break;case"ArrowLeft":v=-.5;break;case"ArrowRight":v=.5;break}if(v!==0||u!==0){const w=C=>C*Math.PI/180,z=C=>Math.max(-.35,Math.min(.35,C));Nt==="top"&&S?g(C=>C?{...C,keystoneH:z((C.keystoneH||0)+w(v)),keystoneV:z((C.keystoneV||0)+w(u))}:null):Nt==="bottom"&&d?$(C=>C?{...C,keystoneH:z((C.keystoneH||0)+w(v)),keystoneV:z((C.keystoneV||0)+w(u))}:null):Nt==="both"&&(S&&g(C=>C?{...C,keystoneH:z((C.keystoneH||0)+w(v)),keystoneV:z((C.keystoneV||0)+w(u))}:null),d&&$(C=>C?{...C,keystoneH:z((C.keystoneH||0)+w(v)),keystoneV:z((C.keystoneV||0)+w(u))}:null))}}}else{const y=a.target;if(y.tagName==="INPUT"&&y.type==="range"){const b=y,v=Number(b.value),u=Number(b.min),w=Number(b.max),z=Number(b.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const C=Math.max(u,v-z);b.value=C.toString(),b.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const q=Math.min(w,v+z);b.value=q.toString(),b.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[H,Nt,zi,S,d,vt,it,at,Dt,Ve,St,ot,lt,dt,ut,ke,vi,pe,he,je,Ne,et,Ea,wn,hn]);Ie.useEffect(()=>{H!=="transform"&&ci(null)},[H]),Ie.useEffect(()=>{window.addEventListener("keydown",xs,!0);const a=r=>{r.key==="Alt"&&Fs(!1)};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",xs,!0),window.removeEventListener("keyup",a,!0)}},[xs,at,Dt,Jt,bn,lt,dt,So,Ls,Ea,it,St,ot,wn,hn]);const Hl=j.useCallback(()=>{Le("#AA4499"),Ee("#F781BF"),_t(6),U(6),mt("trace","#AA4499","top"),mt("trace","#F781BF","bottom"),qe("trace",6,"top"),qe("trace",6,"bottom"),Te("#0072B2"),ve("#56B4E9"),E(18),Re(18),mt("pad","#0072B2","top"),mt("pad","#56B4E9","bottom"),qe("pad",18,"top"),qe("pad",18,"bottom"),ht("#6A3D9A"),yn("#9467BD"),oi(18),Pi(18),mt("component","#6A3D9A","top"),mt("component","#9467BD","bottom"),qe("component",18,"top"),qe("component",18,"bottom"),qt("top"),T("#AA4499"),W(6),Mn([{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}]),Ci([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),cr("pad",gh,18),cr("power",zc,18),cr("ground",wu,18),qe("power",18),qe("ground",18),$i(!1),Io(!1),io(!1),Qn(!1),Sa(!1),Sr(!1),$n("top"),k("select"),Y(50),me(!1),Ce("overlay"),Id(1)},[mt,qe]),xl=j.useCallback(()=>{Hl(),setTimeout(()=>{Kt(1);const a=vn.current,r=Ca.current;let h=0,y=0;if(a&&r){const b=a.getBoundingClientRect(),v=r.getBoundingClientRect(),u=a.width-80,w=a.height-80,q=60+168+6,G=b.left-v.left,re=q-G,I=b.width-Math.max(0,re),Q=re+I/2,F=b.height/2,V=u/2,le=w/2,ie=b.width/a.width,ge=b.height/a.height,ye=Q/ie,xe=F/ge,_e=ye-40,ze=xe-40;h=_e-V,y=ze-le}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Lt({x:h,y}),Rt(new Set),ct(new Set),Tt(new Set),zt(new Set)},100)},[Hl]);Ie.useEffect(()=>{xl()},[]),Ie.useEffect(()=>{if(!oo.visible)return;const a=[];vt.size>0,vt.size===0&&it.size===0&&at.size===0&&Dt.size===0&&a.push(`
No objects selected.`);const r=a.join(`
`);Xo(h=>({...h,text:r}))},[oo.visible,vt,it,at,Dt,Ve,St,ot,lt,dt,ut]),Ie.useEffect(()=>{const a=r=>{const h=vn.current;if(h&&!(ei.current&&ei.current.contains(r.target))&&!(r.target instanceof Node&&h.contains(r.target))){if(vi(),Tl){const y=pl.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&zl(!1)}if(go){const y=ei.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(yo(!1),k("select"))}if(zn){const y=vo.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(Kl(!1),Lr(null))}if(Go){const y=Vs.current;!r.target?.closest('button[title="Color Picker"]')&&(!y||!(r.target instanceof Node)||!y.contains(r.target))&&Us(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[vi,Tl,xo,go,zn,Go]);const Oi=a=>{if(!a.current)return{top:0,left:0};const r=a.current.getBoundingClientRect(),h=Ca.current?.getBoundingClientRect();return h?{top:r.top-h.top,left:r.left-h.left+r.width+4}:{top:0,left:0}},gs=j.useCallback(()=>{pl.current&&bo.current&&requestAnimationFrame(()=>{if(pl.current&&bo.current){const a=Oi(bo);pl.current.style.top=`${a.top}px`,pl.current.style.left=`${a.left}px`}})},[]),ys=j.useCallback(()=>{gi.current&&Bi.current&&requestAnimationFrame(()=>{if(gi.current&&Bi.current){const a=Oi(Bi);gi.current.style.top=`${a.top}px`,gi.current.style.left=`${a.left}px`}})},[]);Ie.useEffect(()=>{Tl&&gs()},[Tl,gs]),Ie.useEffect(()=>{xo&&ys()},[xo,ys]),Ie.useEffect(()=>{if(go&&ei.current&&sa.current){const a=Oi(sa);ei.current.style.top=`${a.top}px`,ei.current.style.left=`${a.left}px`}},[go]),Ie.useEffect(()=>{if(as&&Ha.current&&Gr.current){const a=Oi(Gr);Ha.current.style.top=`${a.top}px`,Ha.current.style.left=`${a.left}px`}},[as]),Ie.useEffect(()=>{if(nl&&yi.current&&Ps.current){const a=Oi(Ps);yi.current.style.top=`${a.top}px`,yi.current.style.left=`${a.left}px`}},[nl]),Ie.useEffect(()=>{const a=r=>{if(!Nn)return;const h=document.querySelector("[data-component-editor-dialog]");if(h&&r.target instanceof Node&&h.contains(r.target)){const ze=r.target;if(ze.tagName==="BUTTON"||ze.tagName==="INPUT"||ze.closest("button")||ze.closest("input"))return}const y=vn.current;if(!y)return;const b=y.getBoundingClientRect(),v=r.clientX,u=r.clientY;if(v<b.left||v>b.right||u<b.top||u>b.bottom)return;const w=y.width/b.width,z=y.height/b.height,C=v-b.left,q=u-b.top,G=C*w,re=q*z,I=G-40,Q=re-40,F=(I-Je.x)/Se,V=(Q-Je.y)/Se;let le=1/0,ie=null,ge=null;const ye=Math.max(6/Se,4),_e=[...St,...ot].find(ze=>ze.id===Nn.componentId)?.layer||"top";for(const ze of Ve)if((ze.type==="via"||ze.type==="pad")&&ze.points.length>0){if(ze.type==="pad"&&(ze.layer||"top")!==_e)continue;const _=ze.points[0],D=Math.max(1,ze.size/2),te=Math.hypot(_.x-F,_.y-V),se=Math.max(D,ye);te<=se&&te<le&&(le=te,ie=_.id??null,ge=ze)}if(ie!=null&&ge){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${ie}`),console.log(`  Connecting pin ${Nn.pinIndex+1} of component ${Nn.componentId}`);const ze=String(ie),_=Nn.pinIndex,D=Nn.componentId,te=St.find(be=>be.id===D),se=ot.find(be=>be.id===D);if(te){const be=Ve;wn(Ae=>{const Qe=Ae.find(Ue=>Ue.id===D);if(!Qe)return Ae;const Be=Qe.pinConnections||[],Fe=Be.length>0?[...Be]:new Array(Qe.pinCount).fill("");let $e;if(Fe.length!==Qe.pinCount){$e=new Array(Qe.pinCount).fill("");for(let Ue=0;Ue<Math.min(Fe.length,Qe.pinCount);Ue++)$e[Ue]=Fe[Ue]||""}else $e=[...Fe];$e[_]=ze,console.log(`Updated pin ${_} with value: ${ze}`),console.log("New pinConnections:",$e);const Wt=Ae.find(Ue=>Ue.id===D),Ke=Wt?Xd(Wt,$e,be):null;return Ae.map(Ue=>{if(Ue.id===D){const st={...Ue,pinConnections:$e};return Ke&&(st.pinPolarities=Ke),st}return Ue})})}else if(se){const be=Ve;hn(Ae=>{const Qe=Ae.find(Ue=>Ue.id===D);if(!Qe)return Ae;const Be=Qe.pinConnections||[],Fe=Be.length>0?[...Be]:new Array(Qe.pinCount).fill("");let $e;if(Fe.length!==Qe.pinCount){$e=new Array(Qe.pinCount).fill("");for(let Ue=0;Ue<Math.min(Fe.length,Qe.pinCount);Ue++)$e[Ue]=Fe[Ue]||""}else $e=[...Fe];$e[_]=ze,console.log(`Updated pin ${_} with value: ${ze}`),console.log("New pinConnections:",$e);const Wt=Ae.find(Ue=>Ue.id===D),Ke=Wt?Xd(Wt,$e,be):null;return Ae.map(Ue=>{if(Ue.id===D){const st={...Ue,pinConnections:$e};return Ke&&(st.pinPolarities=Ke),st}return Ue})})}setTimeout(()=>{Wo(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Nn)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[Nn,St,ot,Ve,Se,Je.x,Je.y]),Ie.useEffect(()=>{if(!vr)return;const a=h=>{if(!no)return;const y={x:h.clientX-no.x,y:h.clientY-no.y};di(y),localStorage.setItem("componentDialogPosition",JSON.stringify(y))},r=()=>{br(!1),Ns(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[vr,no]),Ie.useEffect(()=>{if(!fl)return;const a=h=>{if(!Mi)return;const y={x:h.clientX-Mi.x,y:h.clientY-Mi.y};rs(y),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(y))},r=()=>{Ma(!1),cs(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[fl,Mi]),Ie.useEffect(()=>{if(!Ul)return;const a=h=>{if(!_l)return;const y={x:h.clientX-_l.x,y:h.clientY-_l.y};Zl(y),localStorage.setItem("notesDialogPosition",JSON.stringify(y))},r=()=>{Ql(!1),Er(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Ul,_l]),Ie.useEffect(()=>{if(Ba&&Gn===null){const a=localStorage.getItem("notesDialogPosition");if(a)try{const r=JSON.parse(a);Zl(r)}catch{Zl({x:window.innerWidth-550,y:100})}else Zl({x:window.innerWidth-550,y:100})}},[Ba,Gn]),Ie.useEffect(()=>{if(ma&&ma.visible&&ks===null){const a=localStorage.getItem("componentDialogPosition");if(a)try{const r=JSON.parse(a);di(r)}catch{di({x:window.innerWidth/2,y:window.innerHeight/2})}else di({x:window.innerWidth/2,y:window.innerHeight/2})}else!ma||ma.visible},[ma,ks]),Ie.useEffect(()=>{if(oo.visible&&ia===null){const a=localStorage.getItem("detailedInfoDialogPosition");if(a)try{const r=JSON.parse(a);rs(r)}catch{rs({x:window.innerWidth-450,y:80})}else rs({x:window.innerWidth-450,y:80})}else oo.visible},[oo.visible,ia]);const vs=j.useCallback(a=>{switch(a){case"transparency":Y(50);break;case"brushSize":W(3);break}},[]);Ie.useEffect(()=>{if(De){Hs.current=performance.now(),Y(0);const a=r=>{const h=Hs.current||r,y=1e3,b=(r-h)%y/y,v=1-Math.abs(1-2*b);Y(Math.round(v*100)),fo.current=requestAnimationFrame(a)};fo.current=requestAnimationFrame(a)}return()=>{fo.current&&(cancelAnimationFrame(fo.current),fo.current=null)}},[De]),Ie.useEffect(()=>{const a=H==="erase"?"erase":H==="magnify"?"magnify":H==="ground"?"ground":H==="power"?"power":H==="component"?"component":H==="draw"?ke==="via"?"via":ke==="pad"?"pad":"trace":"default";if(a==="default"){hr(void 0);return}const r=Math.max(1,Se),h=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(p*r)),b=h+4*2+(a==="magnify"?8:0),v=document.createElement("canvas");v.width=b,v.height=b;const u=v.getContext("2d");if(!u){hr(void 0);return}const w=b/2,z=b/2,C=h/2;if(u.clearRect(0,0,b,b),a==="via"){const G=C,re=C*.5,I=C*.7,F=Pe.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";u.fillStyle=F,u.beginPath(),u.arc(w,z,G,0,Math.PI*2),u.arc(w,z,re,0,Math.PI*2),u.fill("evenodd"),u.strokeStyle="#808080",u.lineWidth=1,u.beginPath(),u.moveTo(w-I,z),u.lineTo(w+I,z),u.stroke(),u.beginPath(),u.moveTo(w,z-I),u.lineTo(w,z+I),u.stroke()}else if(a==="pad"){const re=Pe.get("pad")?.settings.color||Z||N,I=C*2,Q=I*.5,F=C*.7;u.fillStyle=re,u.beginPath(),u.rect(w-C,z-C,I,I),u.rect(w-Q/2,z-Q/2,Q,Q),u.fill("evenodd"),u.strokeStyle="#808080",u.lineWidth=1,u.beginPath(),u.moveTo(w-F,z),u.lineTo(w+F,z),u.stroke(),u.beginPath(),u.moveTo(w,z-F),u.lineTo(w,z+F),u.stroke()}else if(a==="trace"){const re=Pe.get("trace")?.settings.color||(pe==="top"?he:je)||N;u.fillStyle=re,u.beginPath(),u.arc(w,z,C,0,Math.PI*2),u.fill()}else if(a==="erase"){const G=Math.max(p*.75,8),re=Math.max(p*.5,6),I=Math.max(p*.2,2);u.save(),u.translate(w,z),u.rotate(-35*Math.PI/180),u.fillStyle="#f5a3b3",u.strokeStyle="#111",u.lineWidth=1.5;const Q=1.5,F=-G/2,V=-re/2;u.beginPath(),u.moveTo(F+Q,V),u.lineTo(F+G-Q,V),u.quadraticCurveTo(F+G,V,F+G,V+Q),u.lineTo(F+G,V+re-Q),u.quadraticCurveTo(F+G,V+re,F+G-Q,V+re),u.lineTo(F+Q,V+re),u.quadraticCurveTo(F,V+re,F,V+re-Q),u.lineTo(F,V+Q),u.quadraticCurveTo(F,V,F+Q,V),u.closePath(),u.fill(),u.stroke(),u.fillStyle="#f18ea4",u.beginPath(),u.rect(-G/2,re/2-I,G,I),u.fill(),u.restore()}else if(a==="magnify"){const G=C;u.strokeStyle="#111",u.lineWidth=2,u.beginPath(),u.arc(w-2,z-2,G,0,Math.PI*2),u.stroke();const re=w+G*.6,I=z+G*.6,Q=re+6,F=I+6;u.beginPath(),u.moveTo(re,I),u.lineTo(Q,F),u.stroke(),u.beginPath(),u.moveTo(w-6,z-2),u.lineTo(w+2,z-2),u.stroke(),Qo||(u.beginPath(),u.moveTo(w-2,z-6),u.lineTo(w-2,z+2),u.stroke())}else if(a==="ground")if(u.strokeStyle="#000000",u.lineWidth=2,u.lineCap="round",dl==="groundbus-earth"){const re=C*1.5,I=re*.9,Q=re*.24,F=re*1.6;u.beginPath(),u.moveTo(w,z-I/2),u.lineTo(w,z+I/2),u.stroke();for(let V=0;V<3;V++){const le=z+I/2+V*Q,ie=F*(1-V*.25);u.beginPath(),u.moveTo(w-ie/2,le),u.lineTo(w+ie/2,le),u.stroke()}}else{const re=C*.8;u.beginPath(),u.arc(w,z,C,0,Math.PI*2),u.stroke(),u.beginPath(),u.moveTo(w,z-C-re),u.lineTo(w,z+C+re),u.stroke(),u.beginPath(),u.moveTo(w-C-re,z),u.lineTo(w+C+re,z),u.stroke()}else if(a==="power"){u.strokeStyle="#ff0000",u.lineWidth=2,u.lineCap="round";const G=C*.8;u.beginPath(),u.arc(w,z,C,0,Math.PI*2),u.stroke(),u.beginPath(),u.moveTo(w,z-C-G),u.lineTo(w,z+C+G),u.stroke(),u.beginPath(),u.moveTo(w-C-G,z),u.lineTo(w+C+G,z),u.stroke()}else if(a==="component"){const G=cn||"top",re=Pe.get("component"),I=(G==="top"?Xe:gt)||re?.settings.color||N,Q=h,F=Q/2;u.strokeStyle=I,u.lineWidth=2,u.fillStyle="rgba(255,255,255,0.9)",u.beginPath(),u.rect(w-F,z-F,Q,Q),u.fill(),u.stroke();const V=Jl?mu(Jl):"?";u.fillStyle=I,u.font=`bold ${Math.max(8,Q*.35)}px sans-serif`,u.textAlign="center",u.textBaseline="middle",u.fillText(V,w,z)}const q=`url(${v.toDataURL()}) ${Math.round(w)} ${Math.round(z)}, crosshair`;hr(q)},[H,ke,N,p,Se,Qo,Jl,os,dl,ut,Pe,pe,he,je,cn,Xe,gt]),Ie.useEffect(()=>{bi()},[bi]),Ie.useEffect(()=>{bi()},[Tn.width,Tn.height]),Ie.useEffect(()=>{vt.size===0&&H==="draw"&&ke==="trace"&&p>=1&&(jt==="top"?_t(p):U(p))},[p,H,ke,jt,vt]),Ie.useEffect(()=>{Vt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const h=r.points[0].id,y=Mt(h,ut);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const h=r.points[0].id,y=ft(h,ut);if(r.padType!==y)return{...r,padType:y}}return r}))},[lt,dt,ut,Mt,ft]);const bs=j.useCallback(()=>{const a=vn.current;if(!a)return;const r=a.toDataURL("image/png"),h=window.open("","_blank");if(!h){alert("Please allow popups to print the canvas.");return}h.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${r}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),h.document.close()},[]);Ie.useEffect(()=>{const a=h=>{h.key==="Shift"&&Es(!0)},r=h=>{h.key==="Shift"&&Es(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}},[]);const Qr=j.useCallback(a=>{if(a.size===0)return;const r=Array.from(a).map(h=>String(h));Vt(h=>h.map(y=>{if(y.type==="trace"){const b=y.points.filter(v=>v.id===void 0?!0:!a.has(v.id));return b.length<2?null:{...y,points:b}}return y}).filter(y=>y!==null)),wn(h=>h.map(y=>{const b=y.pinConnections||[];if(b.some(u=>u&&r.includes(u))){const u=b.map(w=>w&&r.includes(w)?"":w);return{...y,pinConnections:u}}return y})),hn(h=>h.map(y=>{const b=y.pinConnections||[];if(b.some(u=>u&&r.includes(u))){const u=b.map(w=>w&&r.includes(w)?"":w);return{...y,pinConnections:u}}return y}))},[Vt,wn,hn]),Kr=j.useRef(new Set);Ie.useEffect(()=>{const a=new Set;for(const h of Ve)if((h.type==="via"||h.type==="pad")&&h.points.length>0){const y=h.points[0].id;y!==void 0&&a.add(y)}const r=new Set;for(const h of Kr.current)a.has(h)||r.add(h);r.size>0&&Qr(r),Kr.current=a},[Ve,Qr]),Ie.useEffect(()=>{Vt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const h=r.points[0].id,y=Mt(h,ut);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const h=r.points[0].id,y=ft(h,ut);if(r.padType!==y)return{...r,padType:y}}return r}))},[lt,dt,ut,Mt,ft]),Ie.useEffect(()=>{const a=r=>{ts.current&&(ts.current.contains(r.target)||wa(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),Ie.useEffect(()=>{const a=(r,h)=>{const y=r.current;if(!y)return;const b=y.getContext("2d");if(!b)return;const v=y.width,u=y.height;if(b.clearRect(0,0,v,u),b.fillStyle="#fff",b.fillRect(0,0,v,u),h?.bitmap){const w=h.bitmap,z=Math.min(v/w.width,u/w.height),C=Math.max(1,Math.floor(w.width*z)),q=Math.max(1,Math.floor(w.height*z)),G=Math.floor((v-C)/2),re=Math.floor((u-q)/2);b.drawImage(w,G,re,C,q)}b.strokeStyle="#ddd",b.lineWidth=1,b.strokeRect(.5,.5,v-1,u-1)};a(Mc,S),a(Da,d)},[S,d]),Ie.useEffect(()=>{const a=[],r=[],h=[],y=[];for(const b of Ve)if(b.type==="via"&&b.points.length>=1){const v=b.points[0],u={id:b.id,pointId:v.id,x:v.x,y:v.y,size:b.size,color:b.color};a.push(u)}else if(b.type==="pad"&&b.points.length>=1){const v=b.points[0],u={id:b.id,pointId:v.id,x:v.x,y:v.y,size:b.size,color:b.color,layer:b.layer||"top"};r.push(u)}else if(b.type==="trace"&&b.points.length>=2)for(let v=0;v<b.points.length-1;v++){const u=b.points[v],w=b.points[v+1],z={id:b.id,startPointId:u.id,endPointId:w.id,x1:u.x,y1:u.y,x2:w.x,y2:w.y,size:b.size,color:b.color};b.layer==="top"?h.push(z):y.push(z)}eo(a),to(r),Rc(h),ba(y)},[Ve]);const Hi=j.useRef(Ve);Hi.current=Ve;const El=j.useCallback(()=>{const r=new Date().toISOString(),h=Qx();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:r,view:{currentView:oe,viewScale:Se,viewPan:Je,showBothLayers:Ka,selectedDrawingLayer:jt},images:{top:S?{name:S.name,width:S.width,height:S.height,dataUrl:S.dataUrl??S.url,x:S.x,y:S.y,scale:S.scale,rotation:S.rotation,flipX:S.flipX,flipY:S.flipY,skewX:S.skewX,skewY:S.skewY,keystoneV:S.keystoneV,keystoneH:S.keystoneH}:null,bottom:d?{name:d.name,width:d.width,height:d.height,dataUrl:d.dataUrl??d.url,x:d.x,y:d.y,scale:d.scale,rotation:d.rotation,flipX:d.flipX,flipY:d.flipY,skewX:d.skewX,skewY:d.skewY,keystoneV:d.keystoneV,keystoneH:d.keystoneH}:null},drawing:{drawingStrokes:Hi.current.filter(b=>!(b.type==="trace"&&b.points.length<2)),vias:va,tracesTop:kn,tracesBottom:gr,componentsTop:St,componentsBottom:ot,grounds:dt,powers:lt},powerBuses:ut,groundBuses:Vn,pointIdCounter:uh(),traceColors:{top:he,bottom:je},traceSizes:{top:Ne,bottom:et},padColors:{top:Z,bottom:K},padSizes:{top:R,bottom:ue},componentColors:{top:Xe,bottom:gt},componentSizes:{top:Ot,bottom:al},traceToolLayer:pe,toolSettings:{trace:Pe.get("trace")?.settings||{color:"#ff0000",size:6},via:Pe.get("via")?.settings||{color:"#ff0000",size:18},pad:Pe.get("pad")?.settings||{color:"#ff0000",size:18},component:Pe.get("component")?.settings||{color:"#ff0000",size:18},ground:Pe.get("ground")?.settings||{color:"#000000",size:18},power:Pe.get("power")?.settings||{color:"#ff0000",size:18},erase:Pe.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:Zn,areViasLocked:dn,arePadsLocked:rl,areTracesLocked:Bn,areComponentsLocked:el,areGroundNodesLocked:bn,arePowerNodesLocked:Jt},visibility:{showViasLayer:Un,showTopPadsLayer:Ll,showBottomPadsLayer:xi,showTopTracesLayer:Sl,showBottomTracesLayer:wl,showTopComponents:ql,showBottomComponents:Nl,showPowerLayer:$l,showGroundLayer:Bl,showConnectionsLayer:la},autoSave:{enabled:kl,interval:ja,baseName:Ji},projectInfo:{name:jn}},timestamp:h}},[oe,Se,Je,Ka,jt,S,d,Ve,va,kn,gr,St,ot,dt,Pe,Zn,dn,rl,Bn,el,bn,Jt,ut,Vn,uh,he,je,Ne,et,Z,K,R,ue,Xe,gt,Ot,al,pe,kl,ja,Ji,jn,Un,Ll,xi,Sl,wl,ql,Nl,$l,Bl,la]),Jr=j.useRef(El);Jr.current=El;const ua=j.useRef(Ki);ua.current=Ki;const Ei=j.useRef(Ji);Ei.current=Ji;const gl=j.useRef(ml);gl.current=ml;const yl=j.useRef(Os);yl.current=Os;const mn=j.useRef([]);mn.current=kc;const da=j.useRef(-1);da.current=Cr;const qs=j.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=ua.current,r=Ei.current;console.log(`Auto save: dirHandle=${a?"set":"missing"}, baseName=${r||"missing"}`);const h=yl.current;if(console.log(`Auto save: currentFilePath=${h||"none"}`),!a||!r){console.warn(`Auto save: Missing directory handle (${!a}) or base name (${!r}). Please use File -> Auto Save -> Enable to set up auto save.`),Pl(!1),en.current&&(clearInterval(en.current),en.current=null);return}if(!tl.current){console.log("Auto save: Skipping - no changes since last save");return}const y=Hi.current,b=y.filter(G=>G.type==="trace"&&G.points.length<2);if(b.length>0){console.log(`Auto save: Cleaning up ${b.length} single-point trace(s) before save`),b.forEach(re=>console.log(`  - Removing single-point trace ${re.id}`));const G=y.filter(re=>!(re.type==="trace"&&re.points.length<2));Vt(G),Hi.current=G}console.log("Auto save: Starting save...");const{project:v,timestamp:u}=Jr.current(),z=`${Tc(r)}_${u}.json`,C=JSON.stringify(v,null,2),q=new Blob([C],{type:"application/json"});try{let G;try{G=await a.getDirectoryHandle("history",{create:!0})}catch(V){console.error("Failed to get/create history directory:",V);return}try{const V=[],le=yl.current;for await(const ie of a.keys())try{if(ie==="history"||ie===z)continue;const ye=await(await a.getFileHandle(ie)).getFile();if(!ie.endsWith(".json"))continue;const xe=await ye.text();try{const _e=JSON.parse(xe);if(_e.version&&(_e.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!_e.fileType)){V.push(ie);const ze=_e.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${ie} (${ze}${ie===le?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const ie of V)try{const xe=await(await(await a.getFileHandle(ie)).getFile()).text(),ze=await(await G.getFileHandle(ie,{create:!0})).createWritable();await ze.write(new Blob([xe],{type:"application/json"})),await ze.close(),await a.removeEntry(ie),console.log(`Auto save: Moved ${ie} from root to history/`)}catch(ge){console.warn(`Auto save: Failed to move ${ie} to history:`,ge)}}catch(V){console.warn("Auto save: Error checking for old files in root:",V)}const I=await(await a.getFileHandle(z,{create:!0})).createWritable();await I.write(q),await I.close(),console.log(`Auto save: Successfully saved ${z} to root directory`),gl.current(z);const Q=mn.current,F=[z,...Q.filter(V=>V!==z)].sort((V,le)=>le.localeCompare(V));ro(F),mn.current=F,Rr(0),da.current=0,tl.current=!1}catch(G){console.error("Auto save failed:",G)}},[]);Br.current=qs;const mi=j.useCallback(async()=>{const{project:a}=El(),r=JSON.stringify(a,null,2),h=new Blob([r],{type:"application/json"});if(pi&&jn)try{let C=null;try{C=await pi.getDirectoryHandle("history",{create:!0})}catch(V){console.error("Failed to get/create history directory:",V),C=null}const q=jn.replace(/\.json$/i,""),G=Tc(q),{timestamp:re}=El(),I=`${G}_${re}.json`;if(C)try{const V=[];for await(const le of pi.keys())try{if(le==="history"||le===I)continue;const ge=await(await pi.getFileHandle(le)).getFile();if(!le.endsWith(".json"))continue;const ye=await ge.text();try{JSON.parse(ye).version&&(V.push(le),console.log(`Save: Found PCB project file in root: ${le}`))}catch{continue}}catch{continue}for(const le of V)try{const ye=await(await(await pi.getFileHandle(le)).getFile()).text(),_e=await(await C.getFileHandle(le,{create:!0})).createWritable();await _e.write(new Blob([ye],{type:"application/json"})),await _e.close(),await pi.removeEntry(le),console.log(`Save: Moved ${le} from root to history/`)}catch(ie){console.warn(`Save: Failed to move ${le} to history:`,ie)}}catch(V){console.warn("Save: Error checking for old files in root:",V)}const F=await(await pi.getFileHandle(I,{create:!0})).createWritable();await F.write(h),await F.close(),ml(I),console.log(`Project saved: ${jn}/${I}`);return}catch(C){console.error("Failed to save to project directory:",C),hi(null)}if(jn&&!pi){const C=window;if(typeof C.showDirectoryPicker=="function")try{const q=await C.showDirectoryPicker();hi(q);const G=`${jn}.json`,I=await(await q.getFileHandle(G,{create:!0})).createWritable();await I.write(h),await I.close(),ml(G),console.log(`Project saved: ${G} in selected directory`);return}catch(q){q?.name!=="AbortError"&&console.error("Failed to get directory:",q)}}const y=C=>String(C).padStart(2,"0"),b=new Date,u=`pcb_project_${`${b.getFullYear()}_${y(b.getMonth()+1)}_${y(b.getDate())}_${y(b.getHours())}_${y(b.getMinutes())}_${y(b.getSeconds())}`}.json`,w=window;if(typeof w.showSaveFilePicker=="function")try{const C=await w.showSaveFilePicker({suggestedName:u,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),q=await C.createWritable();await q.write(h),await q.close();const G=C.name;try{const Q=await C.getFile();ml(Q.name)}catch{ml(G)}const I=G.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");I&&(Fl(I),localStorage.setItem("pcb_project_name",I));try{const Q=C.name.replace(/\.json$/i,""),V=Tc(Q).replace(/[^a-zA-Z0-9_-]/g,"_");Ta(V),Ki||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(Q){console.warn("Could not set up auto save for new file:",Q)}return}catch(C){if(C?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",C)}const z=document.createElement("a");z.href=URL.createObjectURL(h),z.download=u,document.body.appendChild(z),z.click(),setTimeout(()=>{URL.revokeObjectURL(z.href),document.body.removeChild(z)},0)},[El]);Ie.useEffect(()=>{en.current&&(clearInterval(en.current),en.current=null);const a=Dr.current;if(Dr.current=kl,kl&&ja){const r=ja*60*1e3;Ki&&Ji?(console.log(`Auto save: Setting up interval for ${ja} minute(s) (${r}ms)`),a||(tl.current=!0,setTimeout(()=>{qs()},100)),en.current&&(clearInterval(en.current),en.current=null),en.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${tl.current}`),console.log(`  - dirHandle: ${ua.current?"set":"missing"}`),console.log(`  - baseName: ${Ei.current||"missing"}`),qs()},r),console.log(`Auto save: Interval set up for ${r}ms (${ja} minutes)`),console.log(`  - Directory handle: ${Ki?"set":"missing"}`),console.log(`  - Base name: ${Ji||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!Ki}) or base name (${!Ji}). Disabling auto save.`),Pl(!1),en.current&&(clearInterval(en.current),en.current=null))}else kl||(Dr.current=!1);return()=>{en.current&&(clearInterval(en.current),en.current=null)}},[kl,ja,Ki,Ji]);const Ln=j.useRef(!1);Ie.useEffect(()=>{if(!kl){Ln.current=!1;return}if(Ln.current){Ln.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}tl.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!S,bottomImage:!!d,drawingStrokesCount:Ve.length,componentsTopCount:St.length,componentsBottomCount:ot.length,powersCount:lt.length,groundsCount:dt.length,powerBusesCount:ut.length,areImagesLocked:Zn,areViasLocked:dn,areTracesLocked:Bn,areComponentsLocked:el,areGroundNodesLocked:bn,arePowerNodesLocked:Jt})},[S,d,Ve,St,ot,lt,dt,ut,he,je,Ne,et,Zn,dn,Bn,el,bn,Jt,kl]),Ie.useEffect(()=>{kl?(Ln.current=!0,console.log("Auto save: Enabled, marking first run")):Ln.current=!1},[kl]),Ie.useEffect(()=>{kl||(tl.current=!1)},[kl]);const Sn=j.useCallback(()=>!!(S||d||Ve.length>0||St.length>0||ot.length>0||lt.length>0||dt.length>0),[S,d,Ve,St,ot,lt,dt]);Ie.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&Fl(a)},[]);const fa=j.useCallback(()=>{Po({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Vi=j.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Po(h=>({...h,locationHandle:r,locationPath:r.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",r.name||"")}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),xt=j.useCallback(async()=>{const a=on.projectName.trim();if(!a){alert("Please enter a project name.");return}const r=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!on.locationHandle){alert("Please select a location for the project.");return}const h=on.locationHandle;let y;try{y=await h.getDirectoryHandle(r,{create:!0})}catch(b){console.error("Failed to create project folder:",b),alert(`Failed to create project folder "${r}". See console for details.`);return}Po({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Fl(r),hi(y),localStorage.setItem("pcb_project_name",r),localStorage.setItem("pcb_project_location_path",h.name||""),g(null),$(null),Vt([]),wn([]),hn([]),Fn([]),bl([]),Rt(new Set),ct(new Set),Tt(new Set),zt(new Set),Ce("overlay"),Kt(1),Lt({x:0,y:0}),tl.current=!1,ml(""),Pl(!1),Qi(null),_s(null),Ta(""),en.current&&(clearInterval(en.current),en.current=null),Hl();try{const{project:b,timestamp:v}=El(),w=`${Tc(r)}_${v}.json`,z=JSON.stringify(b,null,2),C=new Blob([z],{type:"application/json"}),G=await(await y.getFileHandle(w,{create:!0})).createWritable();await G.write(C),await G.close(),ml(w),console.log(`New project created: ${r}/${w}`),Al({visible:!0,source:"new",interval:5})}catch(b){console.error("Failed to save new project:",b),alert("Failed to save new project file. See console for details.")}},[Hl,El,on]),Yt=j.useCallback(()=>{Po({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Rn=j.useCallback(()=>{const a=jn?`${jn}.json`:"";Fo({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(es.current?.focus(),es.current&&a){const r=a.replace(/\.json$/i,"");es.current.setSelectionRange(0,r.length)}},100)},[jn]),$s=j.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Fo(h=>({...h,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Va=j.useCallback(async()=>{const a=sn.filename.trim();if(!a){alert("Please enter a file name.");return}const h=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!sn.locationHandle){alert("Please select a location for the file.");return}const y=sn.locationHandle;try{const{project:b}=El(),v=JSON.stringify(b,null,2),u=new Blob([v],{type:"application/json"}),z=await(await y.getFileHandle(h,{create:!0})).createWritable();await z.write(u),await z.close(),ml(h);const C=h.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");C&&(Fl(C),localStorage.setItem("pcb_project_name",C)),hi(y),Fo({visible:!1,filename:"",locationPath:"",locationHandle:null}),wa(null),console.log(`Project saved as: ${h} in selected directory`)}catch(b){console.error("Failed to save project:",b),alert(`Failed to save project file "${h}". See console for details.`)}},[sn,El]),Yi=j.useCallback(()=>{Fo({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),wo=j.useCallback(async()=>{so({visible:!1}),await mi(),fa(),xl()},[mi,fa,xl]),ms=j.useCallback(()=>{so({visible:!1}),fa(),xl()},[fa,xl]),Ya=j.useCallback(()=>{so({visible:!1})},[]);Ie.useEffect(()=>{if(zr.visible){setTimeout(()=>{_r.current?.focus()},0);const a=r=>{r.key==="Enter"?(r.preventDefault(),wo()):r.key==="Escape"&&(r.preventDefault(),so({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[zr.visible,wo]);const Ss=j.useCallback(async a=>{try{if(a.projectInfo)a.projectInfo.name&&(Fl(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const v=localStorage.getItem("pcb_project_name");v&&Fl(v)}if(a.view&&(a.view.currentView&&Ce(a.view.currentView),a.view.viewScale!=null&&Kt(a.view.viewScale),a.view.viewPan&&Lt(a.view.viewPan),a.view.showBothLayers!=null&&Eo(a.view.showBothLayers),a.view.selectedDrawingLayer&&$n(a.view.selectedDrawingLayer)),a.traceColors&&(a.traceColors.top&&(Le(a.traceColors.top),mt("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(Ee(a.traceColors.bottom),mt("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const v=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let u=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;u<6&&(u=6),_t(v),U(u),qe("trace",v,"top"),qe("trace",u,"bottom"),Xi("trace","top",a.traceColors?.top||he,v),Xi("trace","bottom",a.traceColors?.bottom||je,u)}else _t(6),U(6),Xi("trace","top",he,6),Xi("trace","bottom",je,6);if(a.padColors&&(a.padColors.top&&(Te(a.padColors.top),mt("pad",a.padColors.top,"top")),a.padColors.bottom&&(ve(a.padColors.bottom),mt("pad",a.padColors.bottom,"bottom"))),a.padSizes){const v=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:18,u=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:18;E(v),Re(u),qe("pad",v,"top"),qe("pad",u,"bottom")}if(a.componentColors&&(a.componentColors.top&&(ht(a.componentColors.top),mt("component",a.componentColors.top,"top")),a.componentColors.bottom&&(yn(a.componentColors.bottom),mt("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const v=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,u=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;oi(v),Pi(u),qe("component",v,"top"),qe("component",u,"bottom")}if(a.traceToolLayer&&(qt(a.traceToolLayer),H==="draw"&&ke==="trace")){const v=a.traceToolLayer;T(v==="top"?a.traceColors?.top||he:a.traceColors?.bottom||je);const u=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let w=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;w<6&&(w=6),W(v==="top"?u:w)}a.toolSettings&&ln(v=>{const u=new Map(v);if(a.toolSettings.trace){const z=u.get("trace");if(z){const C={...z,settings:a.toolSettings.trace},q=new Map(z.layerSettings);a.traceSizes&&a.traceColors&&(q.set("top",{color:a.traceColors.top||z.layerSettings.get("top")?.color||"#AA4499",size:a.traceSizes.top||z.layerSettings.get("top")?.size||6}),q.set("bottom",{color:a.traceColors.bottom||z.layerSettings.get("bottom")?.color||"#F781BF",size:a.traceSizes.bottom||z.layerSettings.get("bottom")?.size||6})),u.set("trace",{...C,layerSettings:q})}}if(a.toolSettings.via){const z=u.get("via");z&&u.set("via",{...z,settings:a.toolSettings.via})}if(a.toolSettings.pad){const z=u.get("pad");z&&u.set("pad",{...z,settings:a.toolSettings.pad})}if(a.toolSettings.component){const z=u.get("component");z&&u.set("component",{...z,settings:a.toolSettings.component})}if(a.toolSettings.ground){const z=u.get("ground");z&&u.set("ground",{...z,settings:a.toolSettings.ground})}if(a.toolSettings.power){const z=u.get("power");z&&u.set("power",{...z,settings:a.toolSettings.power})}if(a.toolSettings.erase){const z=u.get("erase");z&&u.set("erase",{...z,settings:a.toolSettings.erase})}const w=H==="draw"&&ke==="trace"?u.get("trace"):H==="draw"&&ke==="via"?u.get("via"):H==="draw"&&ke==="pad"?u.get("pad"):H==="component"?u.get("component"):H==="power"?u.get("power"):H==="ground"?u.get("ground"):null;return w&&(T(w.settings.color),W(w.settings.size)),u});const r=async v=>{if(!v)return null;let u=null;if(v.dataUrl){const w=await(await fetch(v.dataUrl)).blob();u=await createImageBitmap(w)}return{url:v.dataUrl??"",name:v.name??"image",width:v.width??(u?u.width:0),height:v.height??(u?u.height:0),dataUrl:v.dataUrl,x:v.x??0,y:v.y??0,scale:v.scale??1,rotation:v.rotation??0,flipX:!!v.flipX,flipY:!!v.flipY,skewX:v.skewX??0,skewY:v.skewY??0,keystoneV:v.keystoneV??0,keystoneH:v.keystoneH??0,bitmap:u}},h=await r(a.images?.top),y=await r(a.images?.bottom);if(g(h),$(y),a.pointIdCounter&&typeof a.pointIdCounter=="number")Id(a.pointIdCounter);else{let v=0;if(a.drawing?.drawingStrokes){for(const w of a.drawing.drawingStrokes)if(w.points)for(const z of w.points)z.id&&typeof z.id=="number"&&z.id>v&&(v=z.id)}const u=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]];for(const w of u)if(w.pinConnections){for(const z of w.pinConnections)if(z){const C=parseInt(z.trim(),10);!isNaN(C)&&C>v&&(v=C)}}if(a.drawing?.powers)for(const w of a.drawing.powers)w.pointId&&typeof w.pointId=="number"&&w.pointId>v&&(v=w.pointId);if(a.drawing?.grounds)for(const w of a.drawing.grounds)w.pointId&&typeof w.pointId=="number"&&w.pointId>v&&(v=w.pointId);Id(v+1)}if(a.locks&&(typeof a.locks.areImagesLocked=="boolean"?$i(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&$i(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&Io(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&mr(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&io(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&Qn(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?Sa(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&Sa(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&Sr(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&ls(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&Or(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&Hr(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&ki(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&Ys(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&is(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&cl(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&ul(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Ni(a.visibility.showGroundLayer),typeof a.visibility.showConnectionsLayer=="boolean"&&Xs(a.visibility.showConnectionsLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&Pl(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&Qi(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(Ta(a.autoSave.baseName),Ei.current=a.autoSave.baseName,a.autoSave.enabled&&!Ki&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),Pl(!1),Qi(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),Pl(!1),Qi(null),Ta(""),Ei.current="")):(Pl(!1),Qi(null),_s(null),Ta(""),ua.current=null,Ei.current="",en.current&&(clearInterval(en.current),en.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const v=a.drawing.drawingStrokes.map(u=>({...u,points:u.points.map(w=>({...w,...Gt(w)}))})).filter(u=>!(u.type==="trace"&&u.points.length<2));Vt(v)}else{const v=[],u=(C,q)=>{const G=Gt({x:C.x,y:C.y});v.push({id:C.id||`${Date.now()}-via-${Math.random()}`,points:[{id:C.pointId||ai(),x:G.x,y:G.y}],color:C.color,size:C.size,layer:q,type:"via"})},w=(C,q)=>{const G=Gt({x:C.x1,y:C.y1}),re=Gt({x:C.x2,y:C.y2});v.push({id:C.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:C.startPointId||ai(),x:G.x,y:G.y},{id:C.endPointId||ai(),x:re.x,y:re.y}],color:C.color,size:C.size,layer:q,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(C=>u(C,"top")):((a.drawing?.viasTop??[]).forEach(C=>u(C,"top")),(a.drawing?.viasBottom??[]).forEach(C=>u(C,"bottom"))),(a.drawing?.tracesTop??[]).forEach(C=>w(C,"top")),(a.drawing?.tracesBottom??[]).forEach(C=>w(C,"bottom"));const z=v.filter(C=>!(C.type==="trace"&&C.points.length<2));Vt(z)}if(a.drawing?.componentsTop){const v=a.drawing.componentsTop.map(u=>{const w=Gt({x:u.x,y:u.y});return{...u,x:w.x,y:w.y,layer:u.layer||"top",pinConnections:u.pinConnections||new Array(u.pinCount||0).fill("")}});wn(v)}if(a.drawing?.componentsBottom){const v=a.drawing.componentsBottom.map(u=>{const w=Gt({x:u.x,y:u.y});return{...u,x:w.x,y:w.y,layer:u.layer||"bottom",pinConnections:u.pinConnections||new Array(u.pinCount||0).fill("")}});hn(v)}if(a.drawing?.grounds){const u=a.drawing.grounds.map(w=>{const z=w.pointId||ai(),C=Gt({x:w.x,y:w.y});return{...w,pointId:z,x:C.x,y:C.y}}).filter(w=>{const z=w.y>=0&&w.x>=0&&typeof w.x=="number"&&typeof w.y=="number"&&!isNaN(w.x)&&!isNaN(w.y)&&isFinite(w.x)&&isFinite(w.y);return z||console.warn(`Filtered out invalid ground symbol at (${w.x}, ${w.y}) - likely in border area or invalid coordinates`),z});bl(u)}let b;if(a.powerBuses&&Array.isArray(a.powerBuses)&&a.powerBuses.length>0?(b=a.powerBuses,Mn(b)):(b=[{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}],Mn(b)),a.groundBuses&&Array.isArray(a.groundBuses)&&a.groundBuses.length>0){const v=a.groundBuses.map(u=>{const{value:w,...z}=u;return z});Ci(v)}else Ci([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]);if(a.drawing?.powers){const u=a.drawing.powers.map(w=>{const z=w.pointId||ai(),C=Gt({x:w.x,y:w.y});return w.powerBusId?{...w,pointId:z,x:C.x,y:C.y,layer:w.layer||"top"}:{...w,pointId:z,x:C.x,y:C.y,powerBusId:b.length>0?b[0].id:"default-5v",layer:w.layer||"top"}}).filter(w=>{const z=w.y>=0&&w.x>=0&&typeof w.x=="number"&&typeof w.y=="number"&&!isNaN(w.x)&&!isNaN(w.y)&&isFinite(w.x)&&isFinite(w.y);return z||console.warn(`Filtered out invalid power node at (${w.x}, ${w.y}) - likely in border area or invalid coordinates`),z});Fn(u)}tl.current=!1}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}},[H,ke]),$t=j.useCallback(async()=>{},[Os]),jo=j.useCallback(async a=>{const r=ua.current;if(!r){console.warn("Cannot load file: no directory handle");return}try{const y=await(await r.getFileHandle(a)).getFile();if(y.size===0){console.warn(`File ${a} is empty, skipping`);const C=mn.current.filter(q=>q!==a);ro(C),mn.current=C;return}const b=await y.text();if(!b||b.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const C=mn.current.filter(q=>q!==a);ro(C),mn.current=C;return}let v;try{v=JSON.parse(b)}catch(z){console.error(`Failed to parse JSON from file ${a}:`,z);const q=mn.current.filter(G=>G!==a);ro(q),mn.current=q,await $t();return}Hl(),Kt(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Rt(new Set),ct(new Set),Tt(new Set),zt(new Set),xl(),await Ss(v),ml(a);const w=mn.current.indexOf(a);w>=0?(Rr(w),da.current=w):await $t(),tl.current=!1}catch(h){console.error("Failed to load file from history:",h);const y=mn.current;if(y.includes(a)){const b=y.filter(v=>v!==a);ro(b),mn.current=b,await $t()}}},[Ss,$t,xl]);j.useCallback(async()=>{const a=da.current,r=mn.current;if(a>=0&&a<r.length-1){const h=a+1,y=r[h];y&&await jo(y)}},[jo]),j.useCallback(async()=>{const a=da.current,r=mn.current;if(a<=0||a>=r.length||r.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",r.length);return}if(a>0&&a<r.length&&r.length>0){const h=a-1;if(h>=0&&h<r.length){const y=r[h];y?await jo(y):(console.warn("No newer file found at index",h),await $t())}else console.warn("Cannot navigate to newer file: prevIndex",h,"is out of bounds")}},[jo,$t]),Ie.useEffect(()=>{ri.current=Ht},[Ht]);const ws=Ie.useRef(ke),Zs=Ie.useRef(jt);Ie.useEffect(()=>{const a=ke!==ws.current;if(H==="draw"&&ws.current==="trace"&&a){if(ri.current.length>=2){const r={id:`${Date.now()}-trace-autofinalize`,points:ri.current,color:N,size:p,layer:Zs.current,type:"trace"};Vt(h=>[...h,r]),Zs.current==="top"?ui(h=>[...h,r.id]):qi(h=>[...h,r.id])}_n([]),Fi(!1)}ws.current=ke,Zs.current=jt},[ke,jt,H,N,p]);const Vc=Ie.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);Ie.useEffect(()=>{bi()},[Ve]),Ie.useEffect(()=>{bi()},[St,ot,dt,Bl]),Ie.useEffect(()=>{const a=Ar.current,r=kr.current;if(ea.current=!0,a){const h=Math.max(0,a.scrollWidth-a.clientWidth),y=Lo.current,b=Math.max(0,Math.min(h,-(Je.x+y)));Math.abs(a.scrollLeft-b)>.5&&(a.scrollLeft=b)}if(r){const h=Math.max(0,r.scrollHeight-r.clientHeight),y=qo.current,b=Math.max(0,Math.min(h,-(Je.y+y)));Math.abs(r.scrollTop-b)>.5&&(r.scrollTop=b)}requestAnimationFrame(()=>{ea.current=!1})},[Je.x,Je.y]);const tt=Cr>0,ec=j.useCallback(async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[r]=await a.showOpenFilePicker({multiple:!1}),h=await r.getFile();if(!h.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}ml(h.name);const y=await h.text(),b=JSON.parse(y);try{const u=await r.getParent();hi(u),console.log(`Opened project file: ${h.name} in directory (auto-save will use this directory)`)}catch(u){console.warn("Could not get directory handle from file handle:",u)}await Ss(b);let v;b.projectInfo?.name?v=b.projectInfo.name:(v=h.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Fl(v),localStorage.setItem("pcb_project_name",v)),jn||(Fl(v),localStorage.setItem("pcb_project_name",v)),setTimeout(()=>{Al({visible:!0,source:"open",interval:5})},100)}catch(r){if(r?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",r),za.current?.click()}else za.current?.click()},[Ss,jn,ml,Fl,hi,Al]);return i.jsxs("div",{className:"app",children:[i.jsx("header",{className:"app-header",children:i.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.1)"})}),i.jsx(Kx,{openMenu:jr,setOpenMenu:wa,isReadOnlyMode:tt,currentProjectFilePath:Os,onNewProject:fa,onOpenProject:ec,onSaveProject:mi,onSaveAs:Rn,onPrint:bs,hasUnsavedChanges:Sn,setNewProjectDialog:so,setAutoSaveDialog:Zi,topImage:S,bottomImage:d,selectedImageForTransform:Nt,setSelectedImageForTransform:ci,setCurrentTool:k,transformMode:zi,setTransformMode:pr,updateImageTransform:mo,resetImageTransform:hs,isGrayscale:we,setIsGrayscale:Oe,isBlackAndWhiteEdges:ne,setIsBlackAndWhiteEdges:ee,isBlackAndWhiteInverted:Me,setIsBlackAndWhiteInverted:He,areImagesLocked:Zn,setAreImagesLocked:$i,onEnterBoardDimensions:()=>Yn(!0),fileInputTopRef:co,fileInputBottomRef:uo,openProjectRef:za,increaseSize:So,decreaseSize:Ls,brushSize:p,drawingStrokes:Ve,selectedIds:vt,selectedComponentIds:it,selectedPowerIds:at,selectedGroundIds:Dt,componentsTop:St,componentsBottom:ot,powers:lt,grounds:dt,powerNodeNames:ho,groundNodeNames:Ua,setSetSizeDialog:Ai,areViasLocked:dn,setAreViasLocked:Io,arePadsLocked:rl,setArePadsLocked:mr,areTracesLocked:Bn,setAreTracesLocked:io,areComponentsLocked:el,setAreComponentsLocked:Qn,areGroundNodesLocked:bn,setAreGroundNodesLocked:Sa,arePowerNodesLocked:Jt,setArePowerNodesLocked:Sr,setSelectedIds:Rt,setSelectedComponentIds:ct,setSelectedPowerIds:Tt,setSelectedGroundIds:zt,selectAllVias:aa,selectAllTraces:Ol,selectAllPads:Wr,selectAllComponents:oa,selectDisconnectedComponents:Uc,selectAllPowerNodes:Ir,selectAllGroundNodes:us,selectPowerNodesByName:Xr,selectGroundNodesByName:_a,setShowPowerBusManager:ka,setShowGroundBusManager:Is,menuBarRef:ts}),i.jsxs("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:[i.jsxs("div",{ref:Ca,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[i.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[i.jsxs("button",{onClick:()=>{tt||Ea()},onMouseDown:a=>a.currentTarget.blur(),disabled:tt,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="select"?"2px solid #000":"1px solid #ddd",background:H==="select"?"#e6f0ff":"#fff",color:tt?"#999":"#222",outline:"none",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[i.jsx(Px,{size:14}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{tt||(ya("via"),k("draw"))},disabled:tt,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="draw"&&ke==="via"?"2px solid #000":"1px solid #ddd",background:H==="draw"&&ke==="via"?"#e6f0ff":"#fff",color:tt?"#999":"#222",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=Pe.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";return i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:r,strokeWidth:"3"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:r})]})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Pe.get("via")?.settings.size||26})]})]}),i.jsxs("button",{ref:Bi,onClick:()=>{tt||(ya("pad"),k("draw"),$n(rn||"top"),setTimeout(()=>ys(),0))},disabled:tt,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="draw"&&ke==="pad"?"2px solid #000":"1px solid #ddd",background:H==="draw"&&ke==="pad"?"#e6f0ff":"#fff",color:tt?"#999":"#222",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const a=Pe.get("pad"),r=rn||"top",h=a?.settings.color||(r==="top"?Z:K)||N,y=10,b=(24-y)/2,v=(24-y)/2;return i.jsx("rect",{x:b,y:v,width:y,height:y,fill:h})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=Pe.get("pad"),r=rn||"top";return a?.settings.size||(r==="top"?R:ue)||18})()})]})]}),i.jsxs("button",{ref:bo,onClick:()=>{tt||(ya("trace"),k("draw"),$n(pe||"top"),setTimeout(()=>gs(),0))},disabled:tt,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="draw"&&ke==="trace"?"2px solid #000":"1px solid #ddd",background:H==="draw"&&ke==="trace"?"#e6f0ff":"#fff",color:tt?"#999":"#222",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[i.jsx(Gx,{size:14,color:Pe.get("trace")?.settings.color||(pe==="top"?he:je)||hh}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:pe==="top"?Ne:et})]})]}),i.jsxs("button",{ref:sa,onClick:()=>{tt||(k("component"),yo(!0),Kl(!1),Pr(null))},disabled:tt,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="component"?"2px solid #000":"1px solid #ddd",background:H==="component"?"#e6f0ff":"#fff",color:tt?"#999":"#222",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[(()=>{const a=cn||"top",r=Pe.get("component"),h=(a==="top"?Xe:gt)||r?.settings.color||xh;return Jl?i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:h,strokeWidth:"1.5"}),i.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:h,fontWeight:"bold",fontFamily:"monospace",children:mu(Jl)})]}):i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:h,stroke:h,strokeWidth:"0.5"}),i.jsxs("g",{stroke:h,fill:"none",strokeWidth:"1.5",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),i.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:h})]})]})})(),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(cn||"top")==="top"?Ot:al})]})]}),i.jsxs("button",{ref:Gr,onClick:()=>{tt||k("power")},disabled:tt,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="power"?"2px solid #000":"1px solid #ddd",background:H==="power"?"#e6f0ff":"#fff",color:tt?"#999":"#222",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[i.jsx("span",{style:{color:Pe.get("power")?.settings.color||zc,fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Pe.get("power")?.settings.size||18})]})]}),i.jsxs("button",{ref:Ps,onClick:()=>{tt||k("ground")},disabled:tt,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="ground"?"2px solid #000":"1px solid #ddd",background:H==="ground"?"#e6f0ff":"#fff",color:tt?"#999":"#222",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:i.jsxs("g",{stroke:Pe.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),i.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),i.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),i.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Pe.get("ground")?.settings.size||18})]})]}),i.jsxs("button",{onClick:()=>{tt||k(a=>a==="pan"?"draw":"pan")},disabled:tt,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:H==="pan"?"2px solid #000":"1px solid #ddd",background:H==="pan"?"#e6f0ff":"#fff",color:tt?"#999":"#222",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),i.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),i.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Es(!1),k(a=>a==="magnify"?"draw":"magnify")},title:`${Qo?"Zoom Out":"Zoom In"} (Z)`,style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="magnify"?"2px solid #000":"1px solid #ddd",background:H==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),Qo?i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),i.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Z"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{tt||k("erase")},disabled:tt,title:"Erase (E)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:H==="erase"?"2px solid #000":"1px solid #ddd",background:H==="erase"?"#ffecec":"#fff",color:tt?"#999":"#222",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{transform:"rotate(-35 12 12)",children:[i.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),i.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Pe.get("erase")?.settings.size||18})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>{tt||Us(a=>!a)},disabled:tt,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:tt?"not-allowed":"pointer",opacity:tt?.5:1},children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[i.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Go&&i.jsx("div",{ref:Vs,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:Vc.map(a=>i.jsx("div",{onClick:()=>{T(a),Us(!1);const r=Dl(Pe);if(r)if(H==="draw"&&ke==="trace"){const h=pe||"top";Xi(r.id,h,a,p),h==="top"?(Le(a),mt("trace",a,"top")):(Ee(a),mt("trace",a,"bottom"))}else if(H==="draw"&&ke==="pad"){const h=rn||"top";Xi(r.id,h,a,p),h==="top"?(Te(a),mt("pad",a,"top")):(ve(a),mt("pad",a,"bottom"))}else if(H==="component"){const h=cn||"top";Xi(r.id,h,a,p),h==="top"?(ht(a),mt("component",a,"top")):(yn(a),mt("component",a,"bottom"))}else cr(r.id,a,p),H==="draw"&&ke==="via"&&mt("via",a);mt("brush",a),vt.size>0&&Vt(h=>h.map(y=>vt.has(y.id)?(y.type==="via"?(mt("via",a),ln(b=>{const v=new Map(b),u=v.get("via");return u&&v.set("via",{...u,settings:{...u.settings,color:a}}),v})):y.type==="pad"?(mt("pad",a),ln(b=>{const v=new Map(b),u=v.get("pad");return u&&v.set("pad",{...u,settings:{...u.settings,color:a}}),v})):y.type==="trace"&&mt("trace",a,y.layer),{...y,color:a}):y)),it.size>0&&(mt("component",a),wn(h=>h.map(y=>it.has(y.id)?{...y,color:a}:y)),hn(h=>h.map(y=>it.has(y.id)?{...y,color:a}:y))),at.size>0&&Fn(h=>h.map(y=>at.has(y.id)?{...y,color:a}:y)),Dt.size>0&&bl(h=>h.map(y=>Dt.has(y.id)?{...y,color:a}:y))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===N?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),H==="draw"&&ke==="trace"&&Tl&&i.jsxs("div",{ref:pl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:pe==="top",onChange:()=>{qt("top"),$n("top"),T(he),W(Ne),ln(a=>{const r=new Map(a),h=r.get("trace");return h&&r.set("trace",{...h,settings:{color:he,size:Ne}}),r}),zl(!1),Aa(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:pe==="bottom",onChange:()=>{qt("bottom"),$n("bottom"),T(je),W(et),ln(a=>{const r=new Map(a),h=r.get("trace");return h&&r.set("trace",{...h,settings:{color:je,size:et}}),r}),zl(!1),Gl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),H==="draw"&&ke==="pad"&&xo&&i.jsxs("div",{ref:gi,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:rn==="top",onChange:()=>{Ja("top"),$n("top"),T(Z),W(R),ln(a=>{const r=new Map(a),h=r.get("pad");return h&&r.set("pad",{...h,settings:{color:Z,size:R}}),r}),Oa(!1),Aa(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:rn==="bottom",onChange:()=>{Ja("bottom"),$n("bottom"),T(K),W(ue),ln(a=>{const r=new Map(a),h=r.get("pad");return h&&r.set("pad",{...h,settings:{color:K,size:ue}}),r}),Oa(!1),Gl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),as&&H==="power"&&i.jsxs("div",{ref:Ha,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),ut.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...ut].sort((a,r)=>{const h=v=>{const u=v.match(/([+-]?)(\d+\.?\d*)/);if(u){const w=u[1]||"+",z=parseFloat(u[2]);return{absValue:Math.abs(z),isNegative:w==="-",original:v}}return{absValue:1/0,isNegative:!1,original:v}},y=h(a.voltage),b=h(r.voltage);return y.absValue!==b.absValue?y.absValue-b.absValue:y.isNegative!==b.isNegative?y.isNegative?-1:1:0}).map(a=>i.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),Na(a.id),Ml(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),i.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Ml(!1),ka(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Ml(!1),Na(null),k("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),nl&&H==="ground"&&i.jsxs("div",{ref:yi,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),Vn.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...Vn].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=a.id==="groundbus-earth",h=dl===a.id;return i.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),ss(a.id),na(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:h?"#e0e0e0":"#f5f5f5",border:h?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),i.jsx("div",{children:i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name})})]})},a.id)}),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),na(!1),Is(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),na(!1),ss(null),k("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),H==="component"&&go&&i.jsxs("div",{ref:ei,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:jt==="top",onClick:()=>{Vo("top"),$n("top"),T(Xe),W(Ot),ln(a=>{const r=new Map(a),h=r.get("component");return h&&r.set("component",{...h,settings:{color:Xe,size:Ot}}),r}),yo(!1),Aa(!0),Kl(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:jt==="bottom",onClick:()=>{Vo("bottom"),$n("bottom"),T(gt),W(al),ln(a=>{const r=new Map(a),h=r.get("component");return h&&r.set("component",{...h,settings:{color:gt,size:al}}),r}),yo(!1),Gl(!0),Kl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),H==="component"&&zn&&i.jsxs("div",{ref:vo,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(Lx).map(([a,r])=>{const h=Cn.has(a);return i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),Fr(b=>{const v=new Set(b);return v.has(a)?v.delete(a):v.add(a),v})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:h?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[i.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:h?"":""}),a]}),h&&i.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(r).map(([y,b])=>i.jsxs("div",{style:{marginBottom:"2px"},children:[i.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[y,":"]}),b.map(v=>{const u=zu[v];return u?i.jsxs("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),Pr(v),Kl(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:Jl===v?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[u.prefix.join(", ")," - ",v," (",u.defaultPins," pins)"]},v):null})]},y))})]},a)}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Kl(!1),k("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),i.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[i.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),i.jsxs("div",{onClick:()=>$n("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Nt==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:ta,onChange:a=>Aa(a.target.checked)})})]}),i.jsx("canvas",{ref:Mc,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsxs("div",{onClick:()=>$n("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Nt==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:ns,onChange:a=>Gl(a.target.checked)})})]}),i.jsx("canvas",{ref:Da,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Un,onChange:a=>ls(a.target.checked)}),i.jsx("span",{children:"Vias"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Ll,onChange:a=>Or(a.target.checked)}),i.jsx("span",{children:"Pads (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Sl,onChange:a=>ki(a.target.checked)}),i.jsx("span",{children:"Traces (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ql,onChange:a=>is(a.target.checked)}),i.jsx("span",{children:"Components (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:xi,onChange:a=>Hr(a.target.checked)}),i.jsx("span",{children:"Pads (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:wl,onChange:a=>Ys(a.target.checked)}),i.jsx("span",{children:"Traces (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Nl,onChange:a=>cl(a.target.checked)}),i.jsx("span",{children:"Components (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:$l,onChange:a=>ul(a.target.checked)}),i.jsx("span",{children:"Power"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Bl,onChange:a=>Ni(a.target.checked)}),i.jsx("span",{children:"Ground"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:la,onChange:a=>Xs(a.target.checked)}),i.jsx("span",{children:"Connections"})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Un&&Ll&&xi&&Sl&&wl&&ql&&Nl&&$l&&Bl&&la,onChange:a=>{const r=a.target.checked;ls(r),Or(r),Hr(r),ki(r),Ys(r),is(r),cl(r),ul(r),Ni(r),Xs(r)}}),i.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",de,"%"]}),i.jsxs("label",{className:"radio-label",style:{margin:0},children:[i.jsx("input",{type:"checkbox",checked:De,onChange:a=>{const r=a.target.checked;r?(Aa(!0),Gl(!0)):(Y(50),k("select")),me(r)}}),i.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:de,onChange:a=>Y(Number(a.target.value)),onDoubleClick:()=>vs("transparency"),className:"slider",style:{width:"100%",marginTop:3}})]})]}),i.jsx(Jx,{visible:!S&&!d}),i.jsx("canvas",{ref:vn,width:Tn.width,height:Tn.height,tabIndex:0,onMouseDown:Gs,onMouseMove:Ec,onMouseUp:$r,onMouseLeave:$r,onWheel:Oc,onDoubleClick:Hc,className:`pcb-canvas ${H==="transform"?"transform-cursor":H==="draw"?"draw-cursor":H==="erase"?"erase-cursor":"default-cursor"}`,style:{...Rs?{cursor:Rs}:H==="pan"?{cursor:Ra?"grabbing":"grab"}:{},width:`${Tn.width}px`,height:`${Tn.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),i.jsx(og,{componentEditor:ma,setComponentEditor:yr,componentsTop:St,componentsBottom:ot,setComponentsTop:wn,setComponentsBottom:hn,connectingPin:Nn,setConnectingPin:Wo,componentDialogPosition:ks,setComponentDialogPosition:di,isDraggingDialog:vr,setIsDraggingDialog:br,dialogDragOffset:no,setDialogDragOffset:Ns,areComponentsLocked:el}),sl&&sl.visible&&(()=>{if(!lt.find(h=>h.id===sl.id))return null;const r=ut.find(h=>h.id===sl.powerBusId);return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),i.jsx("button",{onClick:()=>Ri(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:r?`${r.name} (${r.voltage})`:"Unknown"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`power-layer-${sl.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),i.jsxs("select",{id:`power-layer-${sl.id}`,name:`power-layer-${sl.id}`,value:sl.layer,onChange:h=>Ri({...sl,layer:h.target.value}),disabled:Jt,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:Jt?.6:1},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:sl.x.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:sl.y.toFixed(2)})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[i.jsx("button",{onClick:()=>Ri(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),i.jsx("button",{onClick:()=>{Jt||(Fn(h=>h.map(y=>y.id===sl.id?{...y,layer:sl.layer}:y)),Ri(null))},disabled:Jt,style:{padding:"2px 5px",background:Jt?"#f5f5f5":"#0b5fff",color:Jt?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Jt?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!S&&!d&&i.jsx("div",{className:"placeholder"}),i.jsx("div",{ref:Ar,className:"scrollbar-horizontal",onScroll:a=>{if(ea.current)return;const r=a.currentTarget,h=Lo.current;Lt(y=>({x:-r.scrollLeft-h,y:y.y}))},"aria-label":"Horizontal pan",children:i.jsx("div",{className:"scrollbar-horizontal-content",ref:Nr})}),i.jsx("div",{ref:kr,className:"scrollbar-vertical",onScroll:a=>{if(ea.current)return;const r=a.currentTarget,h=qo.current;Lt(y=>({x:y.x,y:-r.scrollTop-h}))},"aria-label":"Vertical pan",children:i.jsx("div",{className:"scrollbar-vertical-content",ref:Mr})})]}),Ws&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>ka(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:[...ut].sort((a,r)=>{const h=v=>{const u=v.match(/([+-]?)(\d+\.?\d*)/);if(u){const w=u[1]||"+",z=parseFloat(u[2]);return{absValue:Math.abs(z),isNegative:w==="-",original:v}}return{absValue:1/0,isNegative:!1,original:v}},y=h(a.voltage),b=h(r.voltage);return y.absValue!==b.absValue?y.absValue-b.absValue:y.isNegative!==b.isNegative?y.isNegative?-1:1:0}).map(a=>{const r=ut.findIndex(b=>b.id===a.id),h=ut.some(b=>b.name===a.name&&b.id!==a.id),y=ut.some(b=>b.voltage===a.voltage&&b.id!==a.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:a.name,onChange:b=>{const v=[...ut];v[r]={...a,name:b.target.value},Mn(v)},placeholder:"e.g., +3V3, -3V3",style:{flex:1,padding:"2px 4px",border:h?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Value"}),i.jsx("input",{type:"text",inputMode:"decimal",value:a.voltage,onChange:b=>{const v=b.target.value;if(v===""||/^[+-]?\d*\.?\d*$/.test(v)){const u=[...ut];u[r]={...a,voltage:v},Mn(u)}},onBlur:b=>{const v=b.target.value.trim();if(v==="")return;const u=parseFloat(v);if(!isNaN(u)){const w=u>=0?"+":"-",z=Math.abs(u),C=`${w}${z.toFixed(1).replace(/\.?0+$/,"")}`,q=[...ut];q[r]={...a,voltage:C},Mn(q)}},placeholder:"e.g., +3.3, -3.3",style:{flex:1,padding:"2px 4px",border:y?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})]}),i.jsx("input",{type:"color",value:a.color,onChange:b=>{const v=[...ut];v[r]={...a,color:b.target.value},Mn(v)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const b=lt.filter(v=>v.powerBusId===a.id);if(b.length>0){alert(`Cannot delete: ${b.length} power node(s) are using this bus. Remove or reassign them first.`);return}Mn(v=>v.filter(u=>u.id!==a.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},a.id)})}),i.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};Mn(r=>[...r,a])},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Power Bus"}),i.jsx("button",{onClick:()=>ka(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),po&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:()=>Is(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:[...Vn].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=Vn.findIndex(y=>y.id===a.id),h=Vn.some(y=>y.name===a.name&&y.id!==a.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc",flexShrink:0}}),i.jsx("div",{style:{flex:1,minWidth:0},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:a.name,onChange:y=>{const b=[...Vn];b[r]={...a,name:y.target.value},Ci(b)},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 4px",border:h?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})}),i.jsx("input",{type:"color",value:a.color,onChange:y=>{const b=[...Vn];b[r]={...a,color:y.target.value},Ci(b)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const y=dt.filter(b=>b.groundBusId===a.id);if(y.length>0){alert(`Cannot delete: ${y.length} ground node(s) are using this bus. Remove or reassign them first.`);return}Ci(b=>b.filter(v=>v.id!==a.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},a.id)})}),i.jsx("button",{onClick:()=>{const a={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};Ci(r=>[...r,a])},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Ground Bus"}),i.jsx("button",{onClick:()=>Is(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),i.jsx("input",{ref:co,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&fs(r,"top"),a.target.value=""}}),i.jsx("input",{ref:uo,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&fs(r,"bottom"),a.target.value=""}}),i.jsx("input",{ref:za,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const r=a.target.files?.[0];if(r)try{ml(r.name);const h=await r.text(),y=JSON.parse(h);await Ss(y);let b;y.projectInfo?.name?b=y.projectInfo.name:(b=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Fl(b),localStorage.setItem("pcb_project_name",b)),jn||(Fl(b),localStorage.setItem("pcb_project_name",b)),setTimeout(()=>{Al({visible:!0,source:"open",interval:5})},100)}catch(h){console.error("Failed to open project",h),alert("Failed to open project file. See console for details.")}a.target.value=""}}),i.jsx(tg,{visible:oo.visible,selectedIds:vt,selectedComponentIds:it,selectedPowerIds:at,selectedGroundIds:Dt,drawingStrokes:Ve,componentsTop:St,componentsBottom:ot,powers:lt,grounds:dt,powerBuses:ut,onClose:()=>{Xo({visible:!1,text:""})},setComponentsTop:wn,setComponentsBottom:hn,determineViaType:Mt,determinePadType:ft,onFindComponent:_c,position:ia,isDragging:fl,onDragStart:a=>{ia&&(cs({x:a.clientX-ia.x,y:a.clientY-ia.y}),Ma(!0),a.preventDefault())}}),i.jsx(ng,{visible:Ba,selectedIds:vt,selectedComponentIds:it,selectedPowerIds:at,selectedGroundIds:Dt,drawingStrokes:Ve,componentsTop:St,componentsBottom:ot,powers:lt,grounds:dt,powerBuses:ut,onClose:()=>{jl(!1)},setComponentsTop:wn,setComponentsBottom:hn,setDrawingStrokes:Vt,setPowerSymbols:Fn,setGroundSymbols:bl,determineViaType:Mt,determinePadType:ft,position:Gn,isDragging:Ul,onDragStart:a=>{Gn&&(Er({x:a.clientX-Gn.x,y:a.clientY-Gn.y}),Ql(!0),a.preventDefault())}}),zr.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&Ya()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Ya,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:ms,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),i.jsx("button",{ref:_r,onClick:wo,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),on.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Yt()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),i.jsx("input",{ref:Nc,type:"text",value:on.projectName,onChange:a=>{Po(r=>({...r,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),xt()):a.key==="Escape"&&(a.preventDefault(),Yt())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),on.projectName&&(()=>{const a=on.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const r=[...new Set(a)];return i.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",r.map(h=>`"${h}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:on.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:on.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Vi,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),on.projectName&&on.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[on.locationPath,"/",on.projectName,"/project.json"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Yt,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:xt,disabled:!on.projectName.trim()||!on.locationHandle,style:{padding:"8px 16px",background:!on.projectName.trim()||!on.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!on.projectName.trim()||!on.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!on.projectName.trim()||!on.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!on.projectName.trim()||!on.locationHandle?.6:1},children:"Create"})]})]})}),sn.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Yi()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),i.jsx("input",{ref:es,type:"text",value:sn.filename,onChange:a=>{Fo(r=>({...r,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Va()):a.key==="Escape"&&(a.preventDefault(),Yi())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:sn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:sn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:$s,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),sn.filename&&sn.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[sn.locationPath,"/",sn.filename.endsWith(".json")?sn.filename:`${sn.filename}.json`]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Yi,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Va,disabled:!sn.filename.trim()||!sn.locationHandle,style:{padding:"8px 16px",background:!sn.filename.trim()||!sn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!sn.filename.trim()||!sn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!sn.filename.trim()||!sn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!sn.filename.trim()||!sn.locationHandle?.6:1},children:"Save"})]})]})}),i.jsx(eg,{visible:Tr.visible,title:Tr.title,message:Tr.message,onClose:()=>Bs({visible:!1,title:"",message:""})}),i.jsx(lg,{visible:Bc,dimensions:Vr,onSave:a=>{Yr(a),localStorage.setItem("boardDimensions",JSON.stringify(a))},onClose:()=>Yn(!1)}),fi.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Ai({visible:!1,size:6})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),i.jsx("input",{ref:Jo,type:"number",min:"1",max:"99",value:fi.size,onChange:a=>{const r=parseInt(a.target.value)||1,h=Math.max(1,Math.min(99,r));Ai(y=>({...y,size:h}))},onKeyDown:a=>{if(a.key==="Enter"?ca():a.key==="Escape"&&Ai({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const r=fi.size.toString();r.length>=2&&Jo.current?.selectionStart===Jo.current?.selectionEnd&&Jo.current?.selectionStart===r.length&&a.preventDefault()}},onInput:a=>{const r=a.target,h=r.value;if(h.length>2){r.value=h.slice(0,2);const y=parseInt(r.value)||1;Ai(b=>({...b,size:Math.max(1,Math.min(99,y))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),i.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(fi.size)?fi.size:"",onChange:a=>{const r=parseInt(a.target.value);!isNaN(r)&&r>0&&Ai(h=>({...h,size:r}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[i.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>i.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Ai({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:ca,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Ms.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Zi({visible:!1,interval:5})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:Ms.interval===null?"disable":(Ms.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")Zi({visible:!0,interval:null});else{const h=parseFloat(r);!isNaN(h)&&h>0&&Zi({visible:!0,interval:h})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),i.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Zi({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:()=>_i(Ms.interval,!1),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),ao.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&Zr()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),i.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:ao.interval===null?"disable":(ao.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")Al({...ao,interval:null});else{const h=parseFloat(r);!isNaN(h)&&h>0&&Al({...ao,interval:h})}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Zr,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),i.jsx("button",{onClick:()=>_i(ao.interval,!0),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})})]})]})}_x.createRoot(document.getElementById("root")).render(i.jsx(j.StrictMode,{children:i.jsx(wg,{})}));
