(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const U of document.querySelectorAll('link[rel="modulepreload"]'))u(U);new MutationObserver(U=>{for(const L of U)if(L.type==="childList")for(const je of L.addedNodes)je.tagName==="LINK"&&je.rel==="modulepreload"&&u(je)}).observe(document,{childList:!0,subtree:!0});function y(U){const L={};return U.integrity&&(L.integrity=U.integrity),U.referrerPolicy&&(L.referrerPolicy=U.referrerPolicy),U.crossOrigin==="use-credentials"?L.credentials="include":U.crossOrigin==="anonymous"?L.credentials="omit":L.credentials="same-origin",L}function u(U){if(U.ep)return;U.ep=!0;const L=y(U);fetch(U.href,L)}})();function Ng(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var gf={exports:{}},rd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function Bg(){if(dh)return rd;dh=1;var c=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function y(u,U,L){var je=null;if(L!==void 0&&(je=""+L),U.key!==void 0&&(je=""+U.key),"key"in U){L={};for(var ze in U)ze!=="key"&&(L[ze]=U[ze])}else L=U;return U=L.ref,{$$typeof:c,type:u,key:je,ref:U!==void 0?U:null,props:L}}return rd.Fragment=d,rd.jsx=y,rd.jsxs=y,rd}var uh;function Ug(){return uh||(uh=1,gf.exports=Bg()),gf.exports}var i=Ug(),xf={exports:{}},Tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function Mg(){if(fh)return Tt;fh=1;var c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),je=Symbol.for("react.context"),ze=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),O=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),Te=Symbol.iterator;function We(z){return z===null||typeof z!="object"?null:(z=Te&&z[Te]||z["@@iterator"],typeof z=="function"?z:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ke=Object.assign,_e={};function he(z,_,ie){this.props=z,this.context=_,this.refs=_e,this.updater=ie||K}he.prototype.isReactComponent={},he.prototype.setState=function(z,_){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,_,"setState")},he.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function N(){}N.prototype=he.prototype;function Z(z,_,ie){this.props=z,this.context=_,this.refs=_e,this.updater=ie||K}var st=Z.prototype=new N;st.constructor=Z,ke(st,he.prototype),st.isPureReactComponent=!0;var F=Array.isArray;function D(){}var k={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function m(z,_,ie){var xe=ie.ref;return{$$typeof:c,type:z,key:_,ref:xe!==void 0?xe:null,props:ie}}function de(z,_){return m(z.type,_,z.props)}function G(z){return typeof z=="object"&&z!==null&&z.$$typeof===c}function Ne(z){var _={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ie){return _[ie]})}var $e=/\/+/g;function Ke(z,_){return typeof z=="object"&&z!==null&&z.key!=null?Ne(""+z.key):_.toString(36)}function Oe(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(D,D):(z.status="pending",z.then(function(_){z.status==="pending"&&(z.status="fulfilled",z.value=_)},function(_){z.status==="pending"&&(z.status="rejected",z.reason=_)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function ne(z,_,ie,xe,Ve){var lt=typeof z;(lt==="undefined"||lt==="boolean")&&(z=null);var ut=!1;if(z===null)ut=!0;else switch(lt){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(z.$$typeof){case c:case d:ut=!0;break;case pe:return ut=z._init,ne(ut(z._payload),_,ie,xe,Ve)}}if(ut)return Ve=Ve(z),ut=xe===""?"."+Ke(z,0):xe,F(Ve)?(ie="",ut!=null&&(ie=ut.replace($e,"$&/")+"/"),ne(Ve,_,ie,"",function(Jt){return Jt})):Ve!=null&&(G(Ve)&&(Ve=de(Ve,ie+(Ve.key==null||z&&z.key===Ve.key?"":(""+Ve.key).replace($e,"$&/")+"/")+ut)),_.push(Ve)),1;ut=0;var Dt=xe===""?".":xe+":";if(F(z))for(var et=0;et<z.length;et++)xe=z[et],lt=Dt+Ke(xe,et),ut+=ne(xe,_,ie,lt,Ve);else if(et=We(z),typeof et=="function")for(z=et.call(z),et=0;!(xe=z.next()).done;)xe=xe.value,lt=Dt+Ke(xe,et++),ut+=ne(xe,_,ie,lt,Ve);else if(lt==="object"){if(typeof z.then=="function")return ne(Oe(z),_,ie,xe,Ve);throw _=String(z),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.")}return ut}function Y(z,_,ie){if(z==null)return z;var xe=[],Ve=0;return ne(z,xe,"","",function(lt){return _.call(ie,lt,Ve++)}),xe}function oe(z){if(z._status===-1){var _=z._result;_=_(),_.then(function(ie){(z._status===0||z._status===-1)&&(z._status=1,z._result=ie)},function(ie){(z._status===0||z._status===-1)&&(z._status=2,z._result=ie)}),z._status===-1&&(z._status=0,z._result=_)}if(z._status===1)return z._result.default;throw z._result}var De=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var _=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(_))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},V={map:Y,forEach:function(z,_,ie){Y(z,function(){_.apply(this,arguments)},ie)},count:function(z){var _=0;return Y(z,function(){_++}),_},toArray:function(z){return Y(z,function(_){return _})||[]},only:function(z){if(!G(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Tt.Activity=we,Tt.Children=V,Tt.Component=he,Tt.Fragment=y,Tt.Profiler=U,Tt.PureComponent=Z,Tt.StrictMode=u,Tt.Suspense=g,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return k.H.useMemoCache(z)}},Tt.cache=function(z){return function(){return z.apply(null,arguments)}},Tt.cacheSignal=function(){return null},Tt.cloneElement=function(z,_,ie){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var xe=ke({},z.props),Ve=z.key;if(_!=null)for(lt in _.key!==void 0&&(Ve=""+_.key),_)!R.call(_,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&_.ref===void 0||(xe[lt]=_[lt]);var lt=arguments.length-2;if(lt===1)xe.children=ie;else if(1<lt){for(var ut=Array(lt),Dt=0;Dt<lt;Dt++)ut[Dt]=arguments[Dt+2];xe.children=ut}return m(z.type,Ve,xe)},Tt.createContext=function(z){return z={$$typeof:je,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:L,_context:z},z},Tt.createElement=function(z,_,ie){var xe,Ve={},lt=null;if(_!=null)for(xe in _.key!==void 0&&(lt=""+_.key),_)R.call(_,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(Ve[xe]=_[xe]);var ut=arguments.length-2;if(ut===1)Ve.children=ie;else if(1<ut){for(var Dt=Array(ut),et=0;et<ut;et++)Dt[et]=arguments[et+2];Ve.children=Dt}if(z&&z.defaultProps)for(xe in ut=z.defaultProps,ut)Ve[xe]===void 0&&(Ve[xe]=ut[xe]);return m(z,lt,Ve)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(z){return{$$typeof:ze,render:z}},Tt.isValidElement=G,Tt.lazy=function(z){return{$$typeof:pe,_payload:{_status:-1,_result:z},_init:oe}},Tt.memo=function(z,_){return{$$typeof:O,type:z,compare:_===void 0?null:_}},Tt.startTransition=function(z){var _=k.T,ie={};k.T=ie;try{var xe=z(),Ve=k.S;Ve!==null&&Ve(ie,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(D,De)}catch(lt){De(lt)}finally{_!==null&&ie.types!==null&&(_.types=ie.types),k.T=_}},Tt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Tt.use=function(z){return k.H.use(z)},Tt.useActionState=function(z,_,ie){return k.H.useActionState(z,_,ie)},Tt.useCallback=function(z,_){return k.H.useCallback(z,_)},Tt.useContext=function(z){return k.H.useContext(z)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(z,_){return k.H.useDeferredValue(z,_)},Tt.useEffect=function(z,_){return k.H.useEffect(z,_)},Tt.useEffectEvent=function(z){return k.H.useEffectEvent(z)},Tt.useId=function(){return k.H.useId()},Tt.useImperativeHandle=function(z,_,ie){return k.H.useImperativeHandle(z,_,ie)},Tt.useInsertionEffect=function(z,_){return k.H.useInsertionEffect(z,_)},Tt.useLayoutEffect=function(z,_){return k.H.useLayoutEffect(z,_)},Tt.useMemo=function(z,_){return k.H.useMemo(z,_)},Tt.useOptimistic=function(z,_){return k.H.useOptimistic(z,_)},Tt.useReducer=function(z,_,ie){return k.H.useReducer(z,_,ie)},Tt.useRef=function(z){return k.H.useRef(z)},Tt.useState=function(z){return k.H.useState(z)},Tt.useSyncExternalStore=function(z,_,ie){return k.H.useSyncExternalStore(z,_,ie)},Tt.useTransition=function(){return k.H.useTransition()},Tt.version="19.2.0",Tt}var ph;function kf(){return ph||(ph=1,xf.exports=Mg()),xf.exports}var j=kf();const Ue=Ng(j);var yf={exports:{}},cd={},bf={exports:{}},vf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh;function Pg(){return hh||(hh=1,(function(c){function d(ne,Y){var oe=ne.length;ne.push(Y);e:for(;0<oe;){var De=oe-1>>>1,V=ne[De];if(0<U(V,Y))ne[De]=Y,ne[oe]=V,oe=De;else break e}}function y(ne){return ne.length===0?null:ne[0]}function u(ne){if(ne.length===0)return null;var Y=ne[0],oe=ne.pop();if(oe!==Y){ne[0]=oe;e:for(var De=0,V=ne.length,z=V>>>1;De<z;){var _=2*(De+1)-1,ie=ne[_],xe=_+1,Ve=ne[xe];if(0>U(ie,oe))xe<V&&0>U(Ve,ie)?(ne[De]=Ve,ne[xe]=oe,De=xe):(ne[De]=ie,ne[_]=oe,De=_);else if(xe<V&&0>U(Ve,oe))ne[De]=Ve,ne[xe]=oe,De=xe;else break e}}return Y}function U(ne,Y){var oe=ne.sortIndex-Y.sortIndex;return oe!==0?oe:ne.id-Y.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var L=performance;c.unstable_now=function(){return L.now()}}else{var je=Date,ze=je.now();c.unstable_now=function(){return je.now()-ze}}var g=[],O=[],pe=1,we=null,Te=3,We=!1,K=!1,ke=!1,_e=!1,he=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function st(ne){for(var Y=y(O);Y!==null;){if(Y.callback===null)u(O);else if(Y.startTime<=ne)u(O),Y.sortIndex=Y.expirationTime,d(g,Y);else break;Y=y(O)}}function F(ne){if(ke=!1,st(ne),!K)if(y(g)!==null)K=!0,D||(D=!0,Ne());else{var Y=y(O);Y!==null&&Oe(F,Y.startTime-ne)}}var D=!1,k=-1,R=5,m=-1;function de(){return _e?!0:!(c.unstable_now()-m<R)}function G(){if(_e=!1,D){var ne=c.unstable_now();m=ne;var Y=!0;try{e:{K=!1,ke&&(ke=!1,N(k),k=-1),We=!0;var oe=Te;try{t:{for(st(ne),we=y(g);we!==null&&!(we.expirationTime>ne&&de());){var De=we.callback;if(typeof De=="function"){we.callback=null,Te=we.priorityLevel;var V=De(we.expirationTime<=ne);if(ne=c.unstable_now(),typeof V=="function"){we.callback=V,st(ne),Y=!0;break t}we===y(g)&&u(g),st(ne)}else u(g);we=y(g)}if(we!==null)Y=!0;else{var z=y(O);z!==null&&Oe(F,z.startTime-ne),Y=!1}}break e}finally{we=null,Te=oe,We=!1}Y=void 0}}finally{Y?Ne():D=!1}}}var Ne;if(typeof Z=="function")Ne=function(){Z(G)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,Ke=$e.port2;$e.port1.onmessage=G,Ne=function(){Ke.postMessage(null)}}else Ne=function(){he(G,0)};function Oe(ne,Y){k=he(function(){ne(c.unstable_now())},Y)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(ne){ne.callback=null},c.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ne?Math.floor(1e3/ne):5},c.unstable_getCurrentPriorityLevel=function(){return Te},c.unstable_next=function(ne){switch(Te){case 1:case 2:case 3:var Y=3;break;default:Y=Te}var oe=Te;Te=Y;try{return ne()}finally{Te=oe}},c.unstable_requestPaint=function(){_e=!0},c.unstable_runWithPriority=function(ne,Y){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var oe=Te;Te=ne;try{return Y()}finally{Te=oe}},c.unstable_scheduleCallback=function(ne,Y,oe){var De=c.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?De+oe:De):oe=De,ne){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=oe+V,ne={id:pe++,callback:Y,priorityLevel:ne,startTime:oe,expirationTime:V,sortIndex:-1},oe>De?(ne.sortIndex=oe,d(O,ne),y(g)===null&&ne===y(O)&&(ke?(N(k),k=-1):ke=!0,Oe(F,oe-De))):(ne.sortIndex=V,d(g,ne),K||We||(K=!0,D||(D=!0,Ne()))),ne},c.unstable_shouldYield=de,c.unstable_wrapCallback=function(ne){var Y=Te;return function(){var oe=Te;Te=Y;try{return ne.apply(this,arguments)}finally{Te=oe}}}})(vf)),vf}var gh;function _g(){return gh||(gh=1,bf.exports=Pg()),bf.exports}var mf={exports:{}},Ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function Og(){if(xh)return Ei;xh=1;var c=kf();function d(g){var O="https://react.dev/errors/"+g;if(1<arguments.length){O+="?args[]="+encodeURIComponent(arguments[1]);for(var pe=2;pe<arguments.length;pe++)O+="&args[]="+encodeURIComponent(arguments[pe])}return"Minified React error #"+g+"; visit "+O+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(){}var u={d:{f:y,r:function(){throw Error(d(522))},D:y,C:y,L:y,m:y,X:y,S:y,M:y},p:0,findDOMNode:null},U=Symbol.for("react.portal");function L(g,O,pe){var we=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:we==null?null:""+we,children:g,containerInfo:O,implementation:pe}}var je=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ze(g,O){if(g==="font")return"";if(typeof O=="string")return O==="use-credentials"?O:""}return Ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Ei.createPortal=function(g,O){var pe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O||O.nodeType!==1&&O.nodeType!==9&&O.nodeType!==11)throw Error(d(299));return L(g,O,null,pe)},Ei.flushSync=function(g){var O=je.T,pe=u.p;try{if(je.T=null,u.p=2,g)return g()}finally{je.T=O,u.p=pe,u.d.f()}},Ei.preconnect=function(g,O){typeof g=="string"&&(O?(O=O.crossOrigin,O=typeof O=="string"?O==="use-credentials"?O:"":void 0):O=null,u.d.C(g,O))},Ei.prefetchDNS=function(g){typeof g=="string"&&u.d.D(g)},Ei.preinit=function(g,O){if(typeof g=="string"&&O&&typeof O.as=="string"){var pe=O.as,we=ze(pe,O.crossOrigin),Te=typeof O.integrity=="string"?O.integrity:void 0,We=typeof O.fetchPriority=="string"?O.fetchPriority:void 0;pe==="style"?u.d.S(g,typeof O.precedence=="string"?O.precedence:void 0,{crossOrigin:we,integrity:Te,fetchPriority:We}):pe==="script"&&u.d.X(g,{crossOrigin:we,integrity:Te,fetchPriority:We,nonce:typeof O.nonce=="string"?O.nonce:void 0})}},Ei.preinitModule=function(g,O){if(typeof g=="string")if(typeof O=="object"&&O!==null){if(O.as==null||O.as==="script"){var pe=ze(O.as,O.crossOrigin);u.d.M(g,{crossOrigin:pe,integrity:typeof O.integrity=="string"?O.integrity:void 0,nonce:typeof O.nonce=="string"?O.nonce:void 0})}}else O==null&&u.d.M(g)},Ei.preload=function(g,O){if(typeof g=="string"&&typeof O=="object"&&O!==null&&typeof O.as=="string"){var pe=O.as,we=ze(pe,O.crossOrigin);u.d.L(g,pe,{crossOrigin:we,integrity:typeof O.integrity=="string"?O.integrity:void 0,nonce:typeof O.nonce=="string"?O.nonce:void 0,type:typeof O.type=="string"?O.type:void 0,fetchPriority:typeof O.fetchPriority=="string"?O.fetchPriority:void 0,referrerPolicy:typeof O.referrerPolicy=="string"?O.referrerPolicy:void 0,imageSrcSet:typeof O.imageSrcSet=="string"?O.imageSrcSet:void 0,imageSizes:typeof O.imageSizes=="string"?O.imageSizes:void 0,media:typeof O.media=="string"?O.media:void 0})}},Ei.preloadModule=function(g,O){if(typeof g=="string")if(O){var pe=ze(O.as,O.crossOrigin);u.d.m(g,{as:typeof O.as=="string"&&O.as!=="script"?O.as:void 0,crossOrigin:pe,integrity:typeof O.integrity=="string"?O.integrity:void 0})}else u.d.m(g)},Ei.requestFormReset=function(g){u.d.r(g)},Ei.unstable_batchedUpdates=function(g,O){return g(O)},Ei.useFormState=function(g,O,pe){return je.H.useFormState(g,O,pe)},Ei.useFormStatus=function(){return je.H.useHostTransitionStatus()},Ei.version="19.2.0",Ei}var yh;function Hg(){if(yh)return mf.exports;yh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),mf.exports=Og(),mf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh;function Eg(){if(bh)return cd;bh=1;var c=_g(),d=kf(),y=Hg();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function U(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function L(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function je(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ze(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(L(e)!==e)throw Error(u(188))}function O(e){var t=e.alternate;if(!t){if(t=L(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return g(o),e;if(s===l)return g(o),t;s=s.sibling}throw Error(u(188))}if(n.return!==l.return)n=o,l=s;else{for(var h=!1,w=o.child;w;){if(w===n){h=!0,n=o,l=s;break}if(w===l){h=!0,l=o,n=s;break}w=w.sibling}if(!h){for(w=s.child;w;){if(w===n){h=!0,n=s,l=o;break}if(w===l){h=!0,l=s,n=o;break}w=w.sibling}if(!h)throw Error(u(189))}}if(n.alternate!==l)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function pe(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=pe(e),t!==null)return t;e=e.sibling}return null}var we=Object.assign,Te=Symbol.for("react.element"),We=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),ke=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function Ne(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var $e=Symbol.for("react.client.reference");function Ke(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$e?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ke:return"Fragment";case he:return"Profiler";case _e:return"StrictMode";case F:return"Suspense";case D:return"SuspenseList";case m:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case K:return"Portal";case Z:return e.displayName||"Context";case N:return(e._context.displayName||"Context")+".Consumer";case st:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:Ke(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return Ke(e(t))}catch{}}return null}var Oe=Array.isArray,ne=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=y.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},De=[],V=-1;function z(e){return{current:e}}function _(e){0>V||(e.current=De[V],De[V]=null,V--)}function ie(e,t){V++,De[V]=e.current,e.current=t}var xe=z(null),Ve=z(null),lt=z(null),ut=z(null);function Dt(e,t){switch(ie(lt,t),ie(Ve,e),ie(xe,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Up(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Up(t),e=Mp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}_(xe),ie(xe,e)}function et(){_(xe),_(Ve),_(lt)}function Jt(e){e.memoizedState!==null&&ie(ut,e);var t=xe.current,n=Mp(t,e.type);t!==n&&(ie(Ve,e),ie(xe,n))}function Ii(e){Ve.current===e&&(_(xe),_(Ve)),ut.current===e&&(_(ut),ld._currentValue=oe)}var Va,fi;function Qn(e){if(Va===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Va=t&&t[1]||"",fi=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Va+e+fi}var Kn=!1;function el(e,t){if(!e||Kn)return"";Kn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(re){var le=re}Reflect.construct(e,[],ye)}else{try{ye.call()}catch(re){le=re}e.call(ye.prototype)}}else{try{throw Error()}catch(re){le=re}(ye=e())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(re){if(re&&le&&typeof re.stack=="string")return[re.stack,le.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),h=s[0],w=s[1];if(h&&w){var B=h.split(`
`),te=w.split(`
`);for(o=l=0;l<B.length&&!B[l].includes("DetermineComponentFrameRoot");)l++;for(;o<te.length&&!te[o].includes("DetermineComponentFrameRoot");)o++;if(l===B.length||o===te.length)for(l=B.length-1,o=te.length-1;1<=l&&0<=o&&B[l]!==te[o];)o--;for(;1<=l&&0<=o;l--,o--)if(B[l]!==te[o]){if(l!==1||o!==1)do if(l--,o--,0>o||B[l]!==te[o]){var fe=`
`+B[l].replace(" at new "," at ");return e.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",e.displayName)),fe}while(1<=l&&0<=o);break}}}finally{Kn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Qn(n):""}function Wi(e,t){switch(e.tag){case 26:case 27:case 5:return Qn(e.type);case 16:return Qn("Lazy");case 13:return e.child!==t&&t!==null?Qn("Suspense Fallback"):Qn("Suspense");case 19:return Qn("SuspenseList");case 0:case 15:return el(e.type,!1);case 11:return el(e.type.render,!1);case 1:return el(e.type,!0);case 31:return Qn("Activity");default:return""}}function Ol(e){try{var t="",n=null;do t+=Wi(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var pi=Object.prototype.hasOwnProperty,bl=c.unstable_scheduleCallback,Ia=c.unstable_cancelCallback,Sc=c.unstable_shouldYield,Fo=c.unstable_requestPaint,hi=c.unstable_now,qe=c.unstable_getCurrentPriorityLevel,jt=c.unstable_ImmediatePriority,br=c.unstable_UserBlockingPriority,Ie=c.unstable_NormalPriority,Vt=c.unstable_LowPriority,pa=c.unstable_IdlePriority,Yo=c.log,It=c.unstable_setDisableYieldValue,Nn=null,gn=null;function gi(e){if(typeof Yo=="function"&&It(e),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Nn,e)}catch{}}var be=Math.clz32?Math.clz32:Bn,Hl=Math.log,gt=Math.LN2;function Bn(e){return e>>>=0,e===0?32:31-(Hl(e)/gt|0)|0}var El=256,Lo=262144,ha=4194304;function Vl(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function At(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,s=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~s,l!==0?o=Vl(l):(h&=w,h!==0?o=Vl(h):n||(n=w&~e,n!==0&&(o=Vl(n))))):(w=l&~s,w!==0?o=Vl(w):h!==0?o=Vl(h):n||(n=l&~e,n!==0&&(o=Vl(n)))),o===0?0:t!==0&&t!==o&&(t&s)===0&&(s=o&-o,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:o}function Il(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xo(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ga(){var e=ha;return ha<<=1,(ha&62914560)===0&&(ha=4194304),e}function xa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zi(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Wl(e,t,n,l,o,s){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var w=e.entanglements,B=e.expirationTimes,te=e.hiddenUpdates;for(n=h&~n;0<n;){var fe=31-be(n),ye=1<<fe;w[fe]=0,B[fe]=-1;var le=te[fe];if(le!==null)for(te[fe]=null,fe=0;fe<le.length;fe++){var re=le[fe];re!==null&&(re.lane&=-536870913)}n&=~ye}l!==0&&_s(e,l,0),s!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=s&~(h&~t))}function _s(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-be(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Os(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-be(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function Pe(e,t){var n=t&-t;return n=(n&42)!==0?1:$i(n),(n&(e.suspendedLanes|t))!==0?0:n}function $i(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function vt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Yn(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:ih(e.type))}function Hs(e,t){var n=Y.p;try{return Y.p=e,t()}finally{Y.p=n}}var vl=Math.random().toString(36).slice(2),Un="__reactFiber$"+vl,Jn="__reactProps$"+vl,zt="__reactContainer$"+vl,Wa="__reactEvents$"+vl,en="__reactListeners$"+vl,vr="__reactHandles$"+vl,tn="__reactResources$"+vl,uo="__reactMarker$"+vl;function hn(e){delete e[Un],delete e[Jn],delete e[Wa],delete e[en],delete e[vr]}function $a(e){var t=e[Un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zt]||n[Un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ip(e);e!==null;){if(n=e[Un])return n;e=Ip(e)}return t}e=n,n=e.parentNode}return null}function $l(e){if(e=e[Un]||e[zt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ya(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function Fl(e){var t=e[tn];return t||(t=e[tn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function mn(e){e[uo]=!0}var mr=new Set,Mn={};function ba(e,t){kt(e,t),kt(e+"Capture",t)}function kt(e,t){for(Mn[e]=t,e=0;e<t.length;e++)mr.add(t[e])}var Cn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fa={},Es={};function fo(e){return pi.call(Es,e)?!0:pi.call(Fa,e)?!1:Cn.test(e)?Es[e]=!0:(Fa[e]=!0,!1)}function po(e,t,n){if(fo(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ei(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function kn(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function xi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ml(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pn(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){n=""+h,s.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _n(e){if(!e._valueTracker){var t=ml(e)?"checked":"value";e._valueTracker=Pn(e,t,""+e[t])}}function Yl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=ml(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function On(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var yi=/[\n"\\]/g;function bi(e){return e.replace(yi,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function En(e,t,n,l,o,s,h,w){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+xi(t)):e.value!==""+xi(t)&&(e.value=""+xi(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?Go(e,h,xi(t)):n!=null?Go(e,h,xi(n)):l!=null&&e.removeAttribute("value"),o==null&&s!=null&&(e.defaultChecked=!!s),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+xi(w):e.removeAttribute("name")}function Vn(e,t,n,l,o,s,h,w){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){_n(e);return}n=n!=null?""+xi(n):"",t=t!=null?""+xi(t):n,w||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),_n(e)}function Go(e,t,n){t==="number"&&On(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function va(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+xi(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Vs(e,t,n){if(t!=null&&(t=""+xi(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+xi(n):""}function Is(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(u(92));if(Oe(l)){if(1<l.length)throw Error(u(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=xi(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),_n(e)}function rn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mt(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Sr.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function St(e,t,n){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&mt(e,o,l)}else for(var s in t)t.hasOwnProperty(s)&&mt(e,s,t[s])}function ve(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ht(e){return pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function at(){}var wt=null;function Ut(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ee=null,ti=null;function ft(e){var t=$l(e);if(t&&(e=t.stateNode)){var n=e[Jn]||null;e:switch(e=t.stateNode,t.type){case"input":if(En(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+bi(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[Jn]||null;if(!o)throw Error(u(90));En(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&Yl(l)}break e;case"textarea":Vs(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&va(e,!!n.multiple,t,!1)}}}var xn=!1;function Nt(e,t,n){if(xn)return e(t,n);xn=!0;try{var l=e(t);return l}finally{if(xn=!1,(Ee!==null||ti!==null)&&(Ed(),Ee&&(t=Ee,e=ti,ti=Ee=null,ft(t),e)))for(t=0;t<e.length;t++)ft(e[t])}}function cn(e,t){var n=e.stateNode;if(n===null)return null;var l=n[Jn]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wc=!1;if(Ci)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){wc=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{wc=!1}var Sl=null,wl=null,ma=null;function wr(){if(ma)return ma;var e,t=wl,n=t.length,l,o="value"in Sl?Sl.value:Sl.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var h=n-e;for(l=1;l<=h&&t[n-l]===o[s-l];l++);return ma=o.slice(e,1<l?1-l:void 0)}function Ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ya(){return!0}function Tc(){return!1}function vi(e){function t(n,l,o,s,h){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=s,this.target=h,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(n=e[w],this[w]=n?n(s):s[w]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ya:Tc,this.isPropagationStopped=Tc,this}return we(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ya)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ya)},persist:function(){},isPersistent:Ya}),t}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rt=vi(ho),ni=we({},ho,{view:0,detail:0}),Ln=vi(ni),Ll,jc,Xn,Tr=we({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xn&&(Xn&&e.type==="mousemove"?(Ll=e.screenX-Xn.screenX,jc=e.screenY-Xn.screenY):jc=Ll=0,Xn=e),Ll)},movementY:function(e){return"movementY"in e?e.movementY:jc}}),Fi=vi(Tr),Yi=we({},Tr,{dataTransfer:0}),$s=vi(Yi),uu=we({},ni,{relatedTarget:0}),ii=vi(uu),Fs=we({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),li=vi(Fs),jr=we({},ho,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Li=vi(jr),zc=we({},ho,{data:0}),Xl=vi(zc),fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ai={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ki(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zr[e])?!!t[e]:!1}function qo(){return ki}var Ri=we({},ni,{key:function(e){if(e.key){var t=fu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ai[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(e){return e.type==="keypress"?Ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ys=vi(Ri),yn=we({},Tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ls=vi(yn),pu=we({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),hu=vi(pu),Cc=we({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),go=vi(Cc),La=we({},Tr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cr=vi(La),Xa=we({},ho,{newState:0,oldState:0}),Zo=vi(Xa),Gl=[9,13,27,32],Ga=Ci&&"CompositionEvent"in window,Sa=null;Ci&&"documentMode"in document&&(Sa=document.documentMode);var kc=Ci&&"TextEvent"in window&&!Sa,Xs=Ci&&(!Ga||Sa&&8<Sa&&11>=Sa),kr=" ",Qo=!1;function dn(e,t){switch(e){case"keyup":return Gl.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ko(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zt=!1;function Gs(e,t){switch(e){case"compositionend":return Ko(t);case"keypress":return t.which!==32?null:(Qo=!0,kr);case"textInput":return e=t.data,e===kr&&Qo?null:e;default:return null}}function Rc(e,t){if(Zt)return e==="compositionend"||!Ga&&dn(e,t)?(e=wr(),ma=wl=Sl=null,Zt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xs&&t.locale!=="ko"?null:t.data;default:return null}}var Rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rr[e.type]:t==="textarea"}function Di(e,t,n,l){Ee?ti?ti.push(l):ti=[l]:Ee=l,t=Ld(t,"onChange"),0<t.length&&(n=new rt("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var mi=null,Tl=null;function wa(e){kp(e,0)}function jl(e){var t=ya(e);if(Yl(t))return e}function qa(e,t){if(e==="change")return t}var Ta=!1;if(Ci){var tl;if(Ci){var Jo="oninput"in document;if(!Jo){var Ai=document.createElement("div");Ai.setAttribute("oninput","return;"),Jo=typeof Ai.oninput=="function"}tl=Jo}else tl=!1;Ta=tl&&(!document.documentMode||9<document.documentMode)}function $n(){mi&&(mi.detachEvent("onpropertychange",ja),Tl=mi=null)}function ja(e){if(e.propertyName==="value"&&jl(Tl)){var t=[];Di(t,Tl,e,Ut(e)),Nt(wa,t)}}function oi(e,t,n){e==="focusin"?($n(),mi=t,Tl=n,mi.attachEvent("onpropertychange",ja)):e==="focusout"&&$n()}function zl(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jl(Tl)}function gu(e,t){if(e==="click")return jl(t)}function qs(e,t){if(e==="input"||e==="change")return jl(t)}function hd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ni=typeof Object.is=="function"?Object.is:hd;function Wt(e,t){if(Ni(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!pi.call(t,o)||!Ni(e[o],t[o]))return!1}return!0}function Cl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dr(e,t){var n=Cl(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cl(n)}}function Dc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ac(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=On(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=On(e.document)}return t}function Zs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ar=Ci&&"documentMode"in document&&11>=document.documentMode,za=null,xo=null,es=null,Ca=!1;function Nr(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ca||za==null||za!==On(l)||(l=za,"selectionStart"in l&&Zs(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),es&&Wt(es,l)||(es=l,l=Ld(xo,"onSelect"),0<l.length&&(t=new rt("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=za)))}function nl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ql={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionrun:nl("Transition","TransitionRun"),transitionstart:nl("Transition","TransitionStart"),transitioncancel:nl("Transition","TransitionCancel"),transitionend:nl("Transition","TransitionEnd")},yo={},Qs={};Ci&&(Qs=document.createElement("div").style,"AnimationEvent"in window||(delete ql.animationend.animation,delete ql.animationiteration.animation,delete ql.animationstart.animation),"TransitionEvent"in window||delete ql.transitionend.transition);function Bi(e){if(yo[e])return yo[e];if(!ql[e])return e;var t=ql[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Qs)return yo[e]=t[n];return e}var Ks=Bi("animationend"),Js=Bi("animationiteration"),Nc=Bi("animationstart"),er=Bi("transitionrun"),tr=Bi("transitionstart"),Br=Bi("transitioncancel"),nr=Bi("transitionend"),bo=new Map,Bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bc.push("scrollEnd");function Ui(e,t){bo.set(e,t),ba(t,[e])}var ir=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},il=[],ka=0,lr=0;function ar(){for(var e=ka,t=lr=ka=0;t<e;){var n=il[t];il[t++]=null;var l=il[t];il[t++]=null;var o=il[t];il[t++]=null;var s=il[t];if(il[t++]=null,l!==null&&o!==null){var h=l.pending;h===null?o.next=o:(o.next=h.next,h.next=o),l.pending=o}s!==0&&vo(n,o,s)}}function or(e,t,n,l){il[ka++]=e,il[ka++]=t,il[ka++]=n,il[ka++]=l,lr|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ur(e,t,n,l){return or(e,t,n,l),mo(e)}function Zl(e,t){return or(e,null,null,t),mo(e)}function vo(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,s=e.return;s!==null;)s.childLanes|=n,l=s.alternate,l!==null&&(l.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(o=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,o&&t!==null&&(o=31-be(n),e=s.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),s):null}function mo(e){if(50<Qc)throw Qc=0,Hu=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var kl={};function Mi(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,t,n,l){return new Mi(e,t,n,l)}function Pi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ll(e,t){var n=e.alternate;return n===null?(n=si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Xi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function So(e,t,n,l,o,s){var h=0;if(l=e,typeof e=="function")Pi(e)&&(h=1);else if(typeof e=="string")h=vg(e,n,xe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case m:return e=si(31,n,t,o),e.elementType=m,e.lanes=s,e;case ke:return Gn(n.children,o,s,t);case _e:h=8,o|=24;break;case he:return e=si(12,n,t,o|2),e.elementType=he,e.lanes=s,e;case F:return e=si(13,n,t,o),e.elementType=F,e.lanes=s,e;case D:return e=si(19,n,t,o),e.elementType=D,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:h=10;break e;case N:h=9;break e;case st:h=11;break e;case k:h=14;break e;case R:h=16,l=null;break e}h=29,n=Error(u(130,e===null?"null":typeof e,"")),l=null}return t=si(h,n,t,o),t.elementType=e,t.type=l,t.lanes=s,t}function Gn(e,t,n,l){return e=si(7,e,l,t),e.lanes=n,e}function ts(e,t,n){return e=si(6,e,null,t),e.lanes=n,e}function al(e){var t=si(18,null,null,0);return t.stateNode=e,t}function ns(e,t,n){return t=si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ra=new WeakMap;function Gi(e,t){if(typeof e=="object"&&e!==null){var n=Ra.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Ol(t)},Ra.set(e,t),t)}return{value:e,source:t,stack:Ol(t)}}var qi=[],wo=0,Zi=null,Da=0,Dn=[],ri=0,Si=null,Qi=1,tt="";function nt(e,t){qi[wo++]=Da,qi[wo++]=Zi,Zi=e,Da=t}function gd(e,t,n){Dn[ri++]=Qi,Dn[ri++]=tt,Dn[ri++]=Si,Si=e;var l=Qi;e=tt;var o=32-be(l)-1;l&=~(1<<o),n+=1;var s=32-be(t)+o;if(30<s){var h=o-o%5;s=(l&(1<<h)-1).toString(32),l>>=h,o-=h,Qi=1<<32-be(t)+o|n<<o|l,tt=s+e}else Qi=1<<s|n<<o|l,tt=e}function is(e){e.return!==null&&(nt(e,1),gd(e,1,0))}function ls(e){for(;e===Zi;)Zi=qi[--wo],qi[wo]=null,Da=qi[--wo],qi[wo]=null;for(;e===Si;)Si=Dn[--ri],Dn[ri]=null,tt=Dn[--ri],Dn[ri]=null,Qi=Dn[--ri],Dn[ri]=null}function as(e,t){Dn[ri++]=Qi,Dn[ri++]=tt,Dn[ri++]=Si,Qi=t.id,tt=t.overflow,Si=e}var In=null,Ft=null,Bt=!1,Rl=null,ol=!1,os=Error(u(519));function Ql(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl(Gi(t,e)),os}function Mr(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[Un]=e,t[Jn]=l,n){case"dialog":_t("cancel",t),_t("close",t);break;case"iframe":case"object":case"embed":_t("load",t);break;case"video":case"audio":for(n=0;n<Jc.length;n++)_t(Jc[n],t);break;case"source":_t("error",t);break;case"img":case"image":case"link":_t("error",t),_t("load",t);break;case"details":_t("toggle",t);break;case"input":_t("invalid",t),Vn(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":_t("invalid",t);break;case"textarea":_t("invalid",t),Is(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Np(t.textContent,n)?(l.popover!=null&&(_t("beforetoggle",t),_t("toggle",t)),l.onScroll!=null&&_t("scroll",t),l.onScrollEnd!=null&&_t("scrollend",t),l.onClick!=null&&(t.onclick=at),t=!0):t=!1,t||Ql(e,!0)}function Pr(e){for(In=e.return;In;)switch(In.tag){case 5:case 31:case 13:ol=!1;return;case 27:case 3:ol=!0;return;default:In=In.return}}function Dl(e){if(e!==In)return!1;if(!Bt)return Pr(e),Bt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ju(e.type,e.memoizedProps)),n=!n),n&&Ft&&Ql(e),Pr(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ft=Vp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ft=Vp(e)}else t===27?(t=Ft,As(e.type)?(e=af,af=null,Ft=e):Ft=t):Ft=In?da(e.stateNode.nextSibling):null;return!0}function sl(){Ft=In=null,Bt=!1}function ss(){var e=Rl;return e!==null&&(xl===null?xl=e:xl.push.apply(xl,e),Rl=null),e}function Kl(e){Rl===null?Rl=[e]:Rl.push(e)}var sr=z(null),rl=null,cl=null;function Za(e,t,n){ie(sr,t._currentValue),t._currentValue=n}function Al(e){e._currentValue=sr.current,_(sr)}function To(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Nl(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){var h=o.child;s=s.firstContext;e:for(;s!==null;){var w=s;s=o;for(var B=0;B<t.length;B++)if(w.context===t[B]){s.lanes|=n,w=s.alternate,w!==null&&(w.lanes|=n),To(s.return,n,e),l||(h=null);break e}s=w.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(u(341));h.lanes|=n,s=h.alternate,s!==null&&(s.lanes|=n),To(h,n,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function Aa(e,t,n,l){e=null;for(var o=t,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(u(387));if(h=h.memoizedProps,h!==null){var w=o.type;Ni(o.pendingProps.value,h.value)||(e!==null?e.push(w):e=[w])}}else if(o===ut.current){if(h=o.alternate,h===null)throw Error(u(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(ld):e=[ld])}o=o.return}e!==null&&Nl(t,e,n,l),t.flags|=262144}function Na(e){for(e=e.firstContext;e!==null;){if(!Ni(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Jl(e){rl=e,cl=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function nn(e){return _r(rl,e)}function Qa(e,t){return rl===null&&Jl(e),_r(e,t)}function _r(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},cl===null){if(e===null)throw Error(u(308));cl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else cl=cl.next=t;return n}var xd=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Or=c.unstable_scheduleCallback,yd=c.unstable_NormalPriority,Sn={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ka(){return{controller:new xd,data:new Map,refCount:0}}function ea(e){e.refCount--,e.refCount===0&&Or(yd,function(){e.controller.abort()})}var Ja=null,rr=0,jo=0,Ba=null;function bd(e,t){if(Ja===null){var n=Ja=[];rr=0,jo=Fu(),Ba={status:"pending",value:void 0,then:function(l){n.push(l)}}}return rr++,t.then(vd,vd),t}function vd(){if(--rr===0&&Ja!==null){Ba!==null&&(Ba.status="fulfilled");var e=Ja;Ja=null,jo=0,Ba=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function xu(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var md=ne.S;ne.S=function(e,t){tp=hi(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&bd(e,t),md!==null&&md(e,t)};var eo=z(null);function dl(){var e=eo.current;return e!==null?e:pn.pooledCache}function Ki(e,t){t===null?ie(eo,eo.current):ie(eo,t.pool)}function ta(){var e=dl();return e===null?null:{parent:Sn._currentValue,pool:e}}var rs=Error(u(460)),Uc=Error(u(474)),Hr=Error(u(542)),Er={then:function(){}};function Sd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(at,at),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jd(e),e;default:if(typeof t.status=="string")t.then(at,at);else{if(e=pn,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,jd(e),e}throw Co=t,rs}}function zo(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Co=n,rs):n}}var Co=null;function Td(){if(Co===null)throw Error(u(459));var e=Co;return Co=null,e}function jd(e){if(e===rs||e===Hr)throw Error(u(483))}var cs=null,cr=0;function Vr(e){var t=cr;return cr+=1,cs===null&&(cs=[]),wd(cs,e,t)}function Ua(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function na(e,t){throw t.$$typeof===Te?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ko(e){function t(I,P){if(e){var ee=I.deletions;ee===null?(I.deletions=[P],I.flags|=16):ee.push(P)}}function n(I,P){if(!e)return null;for(;P!==null;)t(I,P),P=P.sibling;return null}function l(I){for(var P=new Map;I!==null;)I.key!==null?P.set(I.key,I):P.set(I.index,I),I=I.sibling;return P}function o(I,P){return I=ll(I,P),I.index=0,I.sibling=null,I}function s(I,P,ee){return I.index=ee,e?(ee=I.alternate,ee!==null?(ee=ee.index,ee<P?(I.flags|=67108866,P):ee):(I.flags|=67108866,P)):(I.flags|=1048576,P)}function h(I){return e&&I.alternate===null&&(I.flags|=67108866),I}function w(I,P,ee,ge){return P===null||P.tag!==6?(P=ts(ee,I.mode,ge),P.return=I,P):(P=o(P,ee),P.return=I,P)}function B(I,P,ee,ge){var it=ee.type;return it===ke?fe(I,P,ee.props.children,ge,ee.key):P!==null&&(P.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===R&&zo(it)===P.type)?(P=o(P,ee.props),Ua(P,ee),P.return=I,P):(P=So(ee.type,ee.key,ee.props,null,I.mode,ge),Ua(P,ee),P.return=I,P)}function te(I,P,ee,ge){return P===null||P.tag!==4||P.stateNode.containerInfo!==ee.containerInfo||P.stateNode.implementation!==ee.implementation?(P=ns(ee,I.mode,ge),P.return=I,P):(P=o(P,ee.children||[]),P.return=I,P)}function fe(I,P,ee,ge,it){return P===null||P.tag!==7?(P=Gn(ee,I.mode,ge,it),P.return=I,P):(P=o(P,ee),P.return=I,P)}function ye(I,P,ee){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=ts(""+P,I.mode,ee),P.return=I,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case We:return ee=So(P.type,P.key,P.props,null,I.mode,ee),Ua(ee,P),ee.return=I,ee;case K:return P=ns(P,I.mode,ee),P.return=I,P;case R:return P=zo(P),ye(I,P,ee)}if(Oe(P)||Ne(P))return P=Gn(P,I.mode,ee,null),P.return=I,P;if(typeof P.then=="function")return ye(I,Vr(P),ee);if(P.$$typeof===Z)return ye(I,Qa(I,P),ee);na(I,P)}return null}function le(I,P,ee,ge){var it=P!==null?P.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return it!==null?null:w(I,P,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case We:return ee.key===it?B(I,P,ee,ge):null;case K:return ee.key===it?te(I,P,ee,ge):null;case R:return ee=zo(ee),le(I,P,ee,ge)}if(Oe(ee)||Ne(ee))return it!==null?null:fe(I,P,ee,ge,null);if(typeof ee.then=="function")return le(I,P,Vr(ee),ge);if(ee.$$typeof===Z)return le(I,P,Qa(I,ee),ge);na(I,ee)}return null}function re(I,P,ee,ge,it){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return I=I.get(ee)||null,w(P,I,""+ge,it);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case We:return I=I.get(ge.key===null?ee:ge.key)||null,B(P,I,ge,it);case K:return I=I.get(ge.key===null?ee:ge.key)||null,te(P,I,ge,it);case R:return ge=zo(ge),re(I,P,ee,ge,it)}if(Oe(ge)||Ne(ge))return I=I.get(ee)||null,fe(P,I,ge,it,null);if(typeof ge.then=="function")return re(I,P,ee,Vr(ge),it);if(ge.$$typeof===Z)return re(I,P,ee,Qa(P,ge),it);na(P,ge)}return null}function Le(I,P,ee,ge){for(var it=null,Gt=null,Qe=P,Rt=P=0,Et=null;Qe!==null&&Rt<ee.length;Rt++){Qe.index>Rt?(Et=Qe,Qe=null):Et=Qe.sibling;var qt=le(I,Qe,ee[Rt],ge);if(qt===null){Qe===null&&(Qe=Et);break}e&&Qe&&qt.alternate===null&&t(I,Qe),P=s(qt,P,Rt),Gt===null?it=qt:Gt.sibling=qt,Gt=qt,Qe=Et}if(Rt===ee.length)return n(I,Qe),Bt&&nt(I,Rt),it;if(Qe===null){for(;Rt<ee.length;Rt++)Qe=ye(I,ee[Rt],ge),Qe!==null&&(P=s(Qe,P,Rt),Gt===null?it=Qe:Gt.sibling=Qe,Gt=Qe);return Bt&&nt(I,Rt),it}for(Qe=l(Qe);Rt<ee.length;Rt++)Et=re(Qe,I,Rt,ee[Rt],ge),Et!==null&&(e&&Et.alternate!==null&&Qe.delete(Et.key===null?Rt:Et.key),P=s(Et,P,Rt),Gt===null?it=Et:Gt.sibling=Et,Gt=Et);return e&&Qe.forEach(function(Ps){return t(I,Ps)}),Bt&&nt(I,Rt),it}function dt(I,P,ee,ge){if(ee==null)throw Error(u(151));for(var it=null,Gt=null,Qe=P,Rt=P=0,Et=null,qt=ee.next();Qe!==null&&!qt.done;Rt++,qt=ee.next()){Qe.index>Rt?(Et=Qe,Qe=null):Et=Qe.sibling;var Ps=le(I,Qe,qt.value,ge);if(Ps===null){Qe===null&&(Qe=Et);break}e&&Qe&&Ps.alternate===null&&t(I,Qe),P=s(Ps,P,Rt),Gt===null?it=Ps:Gt.sibling=Ps,Gt=Ps,Qe=Et}if(qt.done)return n(I,Qe),Bt&&nt(I,Rt),it;if(Qe===null){for(;!qt.done;Rt++,qt=ee.next())qt=ye(I,qt.value,ge),qt!==null&&(P=s(qt,P,Rt),Gt===null?it=qt:Gt.sibling=qt,Gt=qt);return Bt&&nt(I,Rt),it}for(Qe=l(Qe);!qt.done;Rt++,qt=ee.next())qt=re(Qe,I,Rt,qt.value,ge),qt!==null&&(e&&qt.alternate!==null&&Qe.delete(qt.key===null?Rt:qt.key),P=s(qt,P,Rt),Gt===null?it=qt:Gt.sibling=qt,Gt=qt);return e&&Qe.forEach(function(Ag){return t(I,Ag)}),Bt&&nt(I,Rt),it}function sn(I,P,ee,ge){if(typeof ee=="object"&&ee!==null&&ee.type===ke&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case We:e:{for(var it=ee.key;P!==null;){if(P.key===it){if(it=ee.type,it===ke){if(P.tag===7){n(I,P.sibling),ge=o(P,ee.props.children),ge.return=I,I=ge;break e}}else if(P.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===R&&zo(it)===P.type){n(I,P.sibling),ge=o(P,ee.props),Ua(ge,ee),ge.return=I,I=ge;break e}n(I,P);break}else t(I,P);P=P.sibling}ee.type===ke?(ge=Gn(ee.props.children,I.mode,ge,ee.key),ge.return=I,I=ge):(ge=So(ee.type,ee.key,ee.props,null,I.mode,ge),Ua(ge,ee),ge.return=I,I=ge)}return h(I);case K:e:{for(it=ee.key;P!==null;){if(P.key===it)if(P.tag===4&&P.stateNode.containerInfo===ee.containerInfo&&P.stateNode.implementation===ee.implementation){n(I,P.sibling),ge=o(P,ee.children||[]),ge.return=I,I=ge;break e}else{n(I,P);break}else t(I,P);P=P.sibling}ge=ns(ee,I.mode,ge),ge.return=I,I=ge}return h(I);case R:return ee=zo(ee),sn(I,P,ee,ge)}if(Oe(ee))return Le(I,P,ee,ge);if(Ne(ee)){if(it=Ne(ee),typeof it!="function")throw Error(u(150));return ee=it.call(ee),dt(I,P,ee,ge)}if(typeof ee.then=="function")return sn(I,P,Vr(ee),ge);if(ee.$$typeof===Z)return sn(I,P,Qa(I,ee),ge);na(I,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,P!==null&&P.tag===6?(n(I,P.sibling),ge=o(P,ee),ge.return=I,I=ge):(n(I,P),ge=ts(ee,I.mode,ge),ge.return=I,I=ge),h(I)):n(I,P)}return function(I,P,ee,ge){try{cr=0;var it=sn(I,P,ee,ge);return cs=null,it}catch(Qe){if(Qe===rs||Qe===Hr)throw Qe;var Gt=si(29,Qe,null,I.mode);return Gt.lanes=ge,Gt.return=I,Gt}finally{}}}var ia=ko(!0),Ro=ko(!1),la=!1;function to(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ul(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Bl(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=mo(e),vo(e,null,n),t}return or(e,l,t,n),mo(e)}function no(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Os(e,n)}}function ds(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=h:s=s.next=h,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var aa=!1;function Ma(){if(aa){var e=Ba;if(e!==null)throw e}}function oa(e,t,n,l){aa=!1;var o=e.updateQueue;la=!1;var s=o.firstBaseUpdate,h=o.lastBaseUpdate,w=o.shared.pending;if(w!==null){o.shared.pending=null;var B=w,te=B.next;B.next=null,h===null?s=te:h.next=te,h=B;var fe=e.alternate;fe!==null&&(fe=fe.updateQueue,w=fe.lastBaseUpdate,w!==h&&(w===null?fe.firstBaseUpdate=te:w.next=te,fe.lastBaseUpdate=B))}if(s!==null){var ye=o.baseState;h=0,fe=te=B=null,w=s;do{var le=w.lane&-536870913,re=le!==w.lane;if(re?(Ht&le)===le:(l&le)===le){le!==0&&le===jo&&(aa=!0),fe!==null&&(fe=fe.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Le=e,dt=w;le=t;var sn=n;switch(dt.tag){case 1:if(Le=dt.payload,typeof Le=="function"){ye=Le.call(sn,ye,le);break e}ye=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=dt.payload,le=typeof Le=="function"?Le.call(sn,ye,le):Le,le==null)break e;ye=we({},ye,le);break e;case 2:la=!0}}le=w.callback,le!==null&&(e.flags|=64,re&&(e.flags|=8192),re=o.callbacks,re===null?o.callbacks=[le]:re.push(le))}else re={lane:le,tag:w.tag,payload:w.payload,callback:w.callback,next:null},fe===null?(te=fe=re,B=ye):fe=fe.next=re,h|=le;if(w=w.next,w===null){if(w=o.shared.pending,w===null)break;re=w,w=re.next,re.next=null,o.lastBaseUpdate=re,o.shared.pending=null}}while(!0);fe===null&&(B=ye),o.baseState=B,o.firstBaseUpdate=te,o.lastBaseUpdate=fe,s===null&&(o.shared.lanes=0),zs|=h,e.lanes=h,e.memoizedState=ye}}function Ji(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Ir(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ji(n[e],t)}var us=z(null),Wr=z(0);function Mc(e,t){e=Io,ie(Wr,e),ie(us,t),Io=e|t.baseLanes}function Pa(){ie(Wr,Io),ie(us,us.current)}function fs(){Io=Wr.current,_(us),_(Wr)}var ci=z(null),wi=null;function sa(e){var t=e.alternate;ie(Yt,Yt.current&1),ie(ci,e),wi===null&&(t===null||us.current!==null||t.memoizedState!==null)&&(wi=e)}function dr(e){ie(Yt,Yt.current),ie(ci,e),wi===null&&(wi=e)}function $r(e){e.tag===22?(ie(Yt,Yt.current),ie(ci,e),wi===null&&(wi=e)):io()}function io(){ie(Yt,Yt.current),ie(ci,ci.current)}function _i(e){_(ci),wi===e&&(wi=null),_(Yt)}var Yt=z(0);function ur(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||nf(n)||lf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oi=0,yt=null,Mt=null,wn=null,fr=!1,ps=!1,Ao=!1,Fr=0,lo=0,No=null,yu=0;function bn(){throw Error(u(321))}function Bo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ni(e[n],t[n]))return!1;return!0}function Pc(e,t,n,l,o,s){return Oi=s,yt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ne.H=e===null||e.memoizedState===null?q:$,Ao=!1,s=n(l,o),Ao=!1,ps&&(s=zd(t,n,l,o)),Yr(e),s}function Yr(e){ne.H=H;var t=Mt!==null&&Mt.next!==null;if(Oi=0,wn=Mt=yt=null,fr=!1,lo=0,No=null,t)throw Error(u(300));e===null||Ge||(e=e.dependencies,e!==null&&Na(e)&&(Ge=!0))}function zd(e,t,n,l){yt=e;var o=0;do{if(ps&&(No=null),lo=0,ps=!1,25<=o)throw Error(u(301));if(o+=1,wn=Mt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}ne.H=ue,s=t(n,l)}while(ps);return s}function _c(){var e=ne.H,t=e.useState()[0];return t=typeof t.then=="function"?_a(t):t,e=e.useState()[0],(Mt!==null?Mt.memoizedState:null)!==e&&(yt.flags|=1024),t}function pr(){var e=Fr!==0;return Fr=0,e}function Lr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Xr(e){if(fr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fr=!1}Oi=0,wn=Mt=yt=null,ps=!1,lo=Fr=0,No=null}function di(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?yt.memoizedState=wn=e:wn=wn.next=e,wn}function un(){if(Mt===null){var e=yt.alternate;e=e!==null?e.memoizedState:null}else e=Mt.next;var t=wn===null?yt.memoizedState:wn.next;if(t!==null)wn=t,Mt=e;else{if(e===null)throw yt.alternate===null?Error(u(467)):Error(u(310));Mt=e,e={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},wn===null?yt.memoizedState=wn=e:wn=wn.next=e}return wn}function hs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _a(e){var t=lo;return lo+=1,No===null&&(No=[]),e=wd(No,e,t),t=yt,(wn===null?t.memoizedState:wn.next)===null&&(t=t.alternate,ne.H=t===null||t.memoizedState===null?q:$),e}function ra(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _a(e);if(e.$$typeof===Z)return nn(e)}throw Error(u(438,String(e)))}function ao(e){var t=null,n=yt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=yt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=hs(),yt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=de;return t.index++,n}function Ul(e,t){return typeof t=="function"?t(e):t}function gs(e){var t=un();return hr(t,Mt,e)}function hr(e,t,n){var l=e.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=n;var o=e.baseQueue,s=l.pending;if(s!==null){if(o!==null){var h=o.next;o.next=s.next,s.next=h}t.baseQueue=o=s,l.pending=null}if(s=e.baseState,o===null)e.memoizedState=s;else{t=o.next;var w=h=null,B=null,te=t,fe=!1;do{var ye=te.lane&-536870913;if(ye!==te.lane?(Ht&ye)===ye:(Oi&ye)===ye){var le=te.revertLane;if(le===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),ye===jo&&(fe=!0);else if((Oi&le)===le){te=te.next,le===jo&&(fe=!0);continue}else ye={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},B===null?(w=B=ye,h=s):B=B.next=ye,yt.lanes|=le,zs|=le;ye=te.action,Ao&&n(s,ye),s=te.hasEagerState?te.eagerState:n(s,ye)}else le={lane:ye,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},B===null?(w=B=le,h=s):B=B.next=le,yt.lanes|=ye,zs|=ye;te=te.next}while(te!==null&&te!==t);if(B===null?h=s:B.next=w,!Ni(s,e.memoizedState)&&(Ge=!0,fe&&(n=Ba,n!==null)))throw n;e.memoizedState=s,e.baseState=h,e.baseQueue=B,l.lastRenderedState=s}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function qn(e){var t=un(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do s=e(s,h.action),h=h.next;while(h!==o);Ni(s,t.memoizedState)||(Ge=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function Cd(e,t,n){var l=yt,o=un(),s=Bt;if(s){if(n===void 0)throw Error(u(407));n=n()}else n=t();var h=!Ni((Mt||o).memoizedState,n);if(h&&(o.memoizedState=n,Ge=!0),o=o.queue,Jr(Hc.bind(null,l,o,e),[e]),o.getSnapshot!==t||h||wn!==null&&wn.memoizedState.tag&1){if(l.flags|=2048,vs(9,{destroy:void 0},Oc.bind(null,l,o,n,t),null),pn===null)throw Error(u(349));s||(Oi&127)!==0||kd(l,t,n)}return n}function kd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=yt.updateQueue,t===null?(t=hs(),yt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Oc(e,t,n,l){t.value=n,t.getSnapshot=l,gr(t)&&ca(e)}function Hc(e,t,n){return n(function(){gr(t)&&ca(e)})}function gr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ni(e,n)}catch{return!0}}function ca(e){var t=Zl(e,2);t!==null&&yl(t,e,2)}function Gr(e){var t=di();if(typeof e=="function"){var n=e;if(e=n(),Ao){gi(!0);try{n()}finally{gi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:e},t}function Uo(e,t,n,l){return e.baseState=n,hr(e,Mt,typeof l=="function"?l:Ul)}function oo(e,t,n,l,o){if(se(e))throw Error(u(485));if(e=t.action,e!==null){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){s.listeners.push(h)}};ne.T!==null?n(!0):s.isTransition=!1,l(s),n=t.pending,n===null?(s.next=t.pending=s,Ec(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ec(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var s=ne.T,h={};ne.T=h;try{var w=n(o,l),B=ne.S;B!==null&&B(h,w),Vc(e,t,w)}catch(te){so(e,t,te)}finally{s!==null&&h.types!==null&&(s.types=h.types),ne.T=s}}else try{s=n(o,l),Vc(e,t,s)}catch(te){so(e,t,te)}}function Vc(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Ti(e,t,l)},function(l){return so(e,t,l)}):Ti(e,t,n)}function Ti(e,t,n){t.status="fulfilled",t.value=n,xs(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ec(e,n)))}function so(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,xs(t),t=t.next;while(t!==l)}e.action=null}function xs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qr(e,t){return t}function Zr(e,t){if(Bt){var n=pn.formState;if(n!==null){e:{var l=yt;if(Bt){if(Ft){t:{for(var o=Ft,s=ol;o.nodeType!==8;){if(!s){o=null;break t}if(o=da(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){Ft=da(o.nextSibling),l=o.data==="F!";break e}}Ql(l)}l=!1}l&&(t=n[0])}}return n=di(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:t},n.queue=l,n=C.bind(null,yt,l),l.dispatch=n,l=Gr(!1),s=X.bind(null,yt,!1,l.queue),l=di(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=oo.bind(null,yt,o,s,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function Qr(e){var t=un();return ys(t,Mt,e)}function ys(e,t,n){if(t=hr(e,t,qr)[0],e=gs(Ul)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=_a(t)}catch(h){throw h===rs?Hr:h}else l=t;t=un();var o=t.queue,s=o.dispatch;return n!==t.memoizedState&&(yt.flags|=2048,vs(9,{destroy:void 0},bu.bind(null,o,n),null)),[l,s,e]}function bu(e,t){e.action=t}function bs(e){var t=un(),n=Mt;if(n!==null)return ys(t,n,e);un(),t=t.memoizedState,n=un();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function vs(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=yt.updateQueue,t===null&&(t=hs(),yt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Ic(){return un().memoizedState}function ms(e,t,n,l){var o=di();yt.flags|=e,o.memoizedState=vs(1|t,{destroy:void 0},n,l===void 0?null:l)}function Kr(e,t,n,l){var o=un();l=l===void 0?null:l;var s=o.memoizedState.inst;Mt!==null&&l!==null&&Bo(l,Mt.memoizedState.deps)?o.memoizedState=vs(t,s,n,l):(yt.flags|=e,o.memoizedState=vs(1|t,s,n,l))}function Rd(e,t){ms(8390656,8,e,t)}function Jr(e,t){Kr(2048,8,e,t)}function Wc(e){yt.flags|=4;var t=yt.updateQueue;if(t===null)t=hs(),yt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ec(e){var t=un().memoizedState;return Wc({ref:t,nextImpl:e}),function(){if((Kt&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function Dd(e,t){return Kr(4,2,e,t)}function $c(e,t){return Kr(4,4,e,t)}function Ss(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mo(e,t,n){n=n!=null?n.concat([e]):null,Kr(4,4,Ss.bind(null,t,e),n)}function ws(){}function tc(e,t){var n=un();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Bo(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function nc(e,t){var n=un();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Bo(t,l[1]))return l[0];if(l=e(),Ao){gi(!0);try{e()}finally{gi(!1)}}return n.memoizedState=[l,t],l}function ic(e,t,n){return n===void 0||(Oi&1073741824)!==0&&(Ht&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=ip(),yt.lanes|=e,zs|=e,n)}function Xe(e,t,n,l){return Ni(n,t)?n:us.current!==null?(e=ic(e,n,l),Ni(e,t)||(Ge=!0),e):(Oi&42)===0||(Oi&1073741824)!==0&&(Ht&261930)===0?(Ge=!0,e.memoizedState=n):(e=ip(),yt.lanes|=e,zs|=e,t)}function Ad(e,t,n,l,o){var s=Y.p;Y.p=s!==0&&8>s?s:8;var h=ne.T,w={};ne.T=w,X(e,!1,t,n);try{var B=o(),te=ne.S;if(te!==null&&te(w,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var fe=xu(B,l);E(e,t,fe,_l(e))}else E(e,t,l,_l(e))}catch(ye){E(e,t,{then:function(){},status:"rejected",reason:ye},_l())}finally{Y.p=s,h!==null&&w.types!==null&&(h.types=w.types),ne.T=h}}function a(){}function r(e,t,n,l){if(e.tag!==5)throw Error(u(476));var o=p(e).queue;Ad(e,o,t,oe,n===null?a:function(){return x(e),n(l)})}function p(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:oe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function x(e){var t=p(e);t.next===null&&(t=e.alternate.memoizedState),E(e,t.next.queue,{},_l())}function v(){return nn(ld)}function b(){return un().memoizedState}function f(){return un().memoizedState}function S(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=_l();e=ul(n);var l=Bl(t,e,n);l!==null&&(yl(l,t,n),no(l,t,n)),t={cache:Ka()},e.payload=t;return}t=t.return}}function T(e,t,n){var l=_l();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},se(e)?W(t,n):(n=Ur(e,t,n,l),n!==null&&(yl(n,e,l),Q(n,t,l)))}function C(e,t,n){var l=_l();E(e,t,n,l)}function E(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(se(e))W(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var h=t.lastRenderedState,w=s(h,n);if(o.hasEagerState=!0,o.eagerState=w,Ni(w,h))return or(e,t,o,0),pn===null&&ar(),!1}catch{}finally{}if(n=Ur(e,t,o,l),n!==null)return yl(n,e,l),Q(n,t,l),!0}return!1}function X(e,t,n,l){if(l={lane:2,revertLane:Fu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},se(e)){if(t)throw Error(u(479))}else t=Ur(e,n,l,2),t!==null&&yl(t,e,2)}function se(e){var t=e.alternate;return e===yt||t!==null&&t===yt}function W(e,t){ps=fr=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Q(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Os(e,n)}}var H={readContext:nn,use:ra,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn};H.useEffectEvent=bn;var q={readContext:nn,use:ra,useCallback:function(e,t){return di().memoizedState=[e,t===void 0?null:t],e},useContext:nn,useEffect:Rd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ms(4194308,4,Ss.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ms(4194308,4,e,t)},useInsertionEffect:function(e,t){ms(4,2,e,t)},useMemo:function(e,t){var n=di();t=t===void 0?null:t;var l=e();if(Ao){gi(!0);try{e()}finally{gi(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=di();if(n!==void 0){var o=n(t);if(Ao){gi(!0);try{n(t)}finally{gi(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=T.bind(null,yt,e),[l.memoizedState,e]},useRef:function(e){var t=di();return e={current:e},t.memoizedState=e},useState:function(e){e=Gr(e);var t=e.queue,n=C.bind(null,yt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ws,useDeferredValue:function(e,t){var n=di();return ic(n,e,t)},useTransition:function(){var e=Gr(!1);return e=Ad.bind(null,yt,e.queue,!0,!1),di().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=yt,o=di();if(Bt){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),pn===null)throw Error(u(349));(Ht&127)!==0||kd(l,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Rd(Hc.bind(null,l,s,e),[e]),l.flags|=2048,vs(9,{destroy:void 0},Oc.bind(null,l,s,n,t),null),n},useId:function(){var e=di(),t=pn.identifierPrefix;if(Bt){var n=tt,l=Qi;n=(l&~(1<<32-be(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Fr++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=yu++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:v,useFormState:Zr,useActionState:Zr,useOptimistic:function(e){var t=di();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=X.bind(null,yt,!0,n),n.dispatch=t,[e,t]},useMemoCache:ao,useCacheRefresh:function(){return di().memoizedState=S.bind(null,yt)},useEffectEvent:function(e){var t=di(),n={impl:e};return t.memoizedState=n,function(){if((Kt&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}},$={readContext:nn,use:ra,useCallback:tc,useContext:nn,useEffect:Jr,useImperativeHandle:Mo,useInsertionEffect:Dd,useLayoutEffect:$c,useMemo:nc,useReducer:gs,useRef:Ic,useState:function(){return gs(Ul)},useDebugValue:ws,useDeferredValue:function(e,t){var n=un();return Xe(n,Mt.memoizedState,e,t)},useTransition:function(){var e=gs(Ul)[0],t=un().memoizedState;return[typeof e=="boolean"?e:_a(e),t]},useSyncExternalStore:Cd,useId:b,useHostTransitionStatus:v,useFormState:Qr,useActionState:Qr,useOptimistic:function(e,t){var n=un();return Uo(n,Mt,e,t)},useMemoCache:ao,useCacheRefresh:f};$.useEffectEvent=ec;var ue={readContext:nn,use:ra,useCallback:tc,useContext:nn,useEffect:Jr,useImperativeHandle:Mo,useInsertionEffect:Dd,useLayoutEffect:$c,useMemo:nc,useReducer:qn,useRef:Ic,useState:function(){return qn(Ul)},useDebugValue:ws,useDeferredValue:function(e,t){var n=un();return Mt===null?ic(n,e,t):Xe(n,Mt.memoizedState,e,t)},useTransition:function(){var e=qn(Ul)[0],t=un().memoizedState;return[typeof e=="boolean"?e:_a(e),t]},useSyncExternalStore:Cd,useId:b,useHostTransitionStatus:v,useFormState:bs,useActionState:bs,useOptimistic:function(e,t){var n=un();return Mt!==null?Uo(n,Mt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ao,useCacheRefresh:f};ue.useEffectEvent=ec;function Se(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:we({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var me={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=_l(),o=ul(l);o.payload=t,n!=null&&(o.callback=n),t=Bl(e,o,l),t!==null&&(yl(t,e,l),no(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=_l(),o=ul(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Bl(e,o,l),t!==null&&(yl(t,e,l),no(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_l(),l=ul(n);l.tag=2,t!=null&&(l.callback=t),t=Bl(e,l,n),t!==null&&(yl(t,e,n),no(t,e,n))}};function ae(e,t,n,l,o,s,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,h):t.prototype&&t.prototype.isPureReactComponent?!Wt(n,l)||!Wt(o,s):!0}function Me(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&me.enqueueReplaceState(t,t.state,null)}function Re(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=we({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function M(e){ir(e)}function A(e){console.error(e)}function ce(e){ir(e)}function J(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Ce(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Be(e,t,n){return n=ul(n),n.tag=3,n.payload={element:null},n.callback=function(){J(e,t)},n}function Ze(e){return e=ul(e),e.tag=3,e}function Ye(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=l.value;e.payload=function(){return o(s)},e.callback=function(){Ce(t,n,l)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){Ce(t,n,l),typeof o!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function ct(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Aa(t,n,o,!0),n=ci.current,n!==null){switch(n.tag){case 31:case 13:return wi===null?Vd():n.alternate===null&&Hn===0&&(Hn=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===Er?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),Iu(e,l,o)),!1;case 22:return n.flags|=65536,l===Er?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),Iu(e,l,o)),!1}throw Error(u(435,n.tag))}return Iu(e,l,o),Vd(),!1}if(Bt)return t=ci.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==os&&(e=Error(u(422),{cause:l}),Kl(Gi(e,n)))):(l!==os&&(t=Error(u(423),{cause:l}),Kl(Gi(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=Gi(l,n),o=Be(e.stateNode,l,o),ds(e,o),Hn!==4&&(Hn=2)),!1;var s=Error(u(520),{cause:l});if(s=Gi(s,n),Zc===null?Zc=[s]:Zc.push(s),Hn!==4&&(Hn=2),t===null)return!0;l=Gi(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Be(n.stateNode,l,e),ds(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Cs===null||!Cs.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Ze(o),Ye(o,e,n,l),ds(n,o),!1}n=n.return}while(n!==null);return!1}var Je=Error(u(461)),Ge=!1;function He(e,t,n,l){t.child=e===null?Ro(t,null,n,l):ia(t,e.child,n,l)}function Ae(e,t,n,l,o){n=n.render;var s=t.ref;if("ref"in l){var h={};for(var w in l)w!=="ref"&&(h[w]=l[w])}else h=l;return Jl(t),l=Pc(e,t,n,h,s,o),w=pr(),e!==null&&!Ge?(Lr(e,t,o),Po(e,t,o)):(Bt&&w&&is(t),t.flags|=1,He(e,t,l,o),t.child)}function ot(e,t,n,l,o){if(e===null){var s=n.type;return typeof s=="function"&&!Pi(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,Lt(e,t,s,l,o)):(e=So(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!zu(e,o)){var h=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wt,n(h,l)&&e.ref===t.ref)return Po(e,t,o)}return t.flags|=1,e=ll(s,l),e.ref=t.ref,e.return=t,t.child=e}function Lt(e,t,n,l,o){if(e!==null){var s=e.memoizedProps;if(Wt(s,l)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=l=s,zu(e,o))(e.flags&131072)!==0&&(Ge=!0);else return t.lanes=e.lanes,Po(e,t,o)}return Hi(e,t,n,l,o)}function Qt(e,t,n,l){var o=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~s}else l=0,t.child=null;return Tn(e,t,s,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ki(t,s!==null?s.cachePool:null),s!==null?Mc(t,s):Pa(),$r(t);else return l=t.lanes=536870912,Tn(e,t,s!==null?s.baseLanes|n:n,n,l)}else s!==null?(Ki(t,s.cachePool),Mc(t,s),io(),t.memoizedState=null):(e!==null&&Ki(t,null),Pa(),io());return He(e,t,o,n),t.child}function Xt(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Tn(e,t,n,l,o){var s=dl();return s=s===null?null:{parent:Sn._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Ki(t,null),Pa(),$r(t),e!==null&&Aa(e,t,l,!0),t.childLanes=o,null}function fn(e,t){return t=Nd({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function xt(e,t,n){return ia(t,e.child,null,n),e=fn(t,t.pendingProps),e.flags|=2,_i(t),t.memoizedState=null,e}function Oa(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Bt){if(l.mode==="hidden")return e=fn(t,l),t.lanes=536870912,Xt(null,e);if(dr(t),(e=Ft)?(e=Ep(e,ol),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Si!==null?{id:Qi,overflow:tt}:null,retryLane:536870912,hydrationErrors:null},n=al(e),n.return=t,t.child=n,In=t,Ft=null)):e=null,e===null)throw Ql(t);return t.lanes=536870912,null}return fn(t,l)}var s=e.memoizedState;if(s!==null){var h=s.dehydrated;if(dr(t),o)if(t.flags&256)t.flags&=-257,t=xt(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(Ge||Aa(e,t,n,!1),o=(n&e.childLanes)!==0,Ge||o){if(l=pn,l!==null&&(h=Pe(l,n),h!==0&&h!==s.retryLane))throw s.retryLane=h,Zl(e,h),yl(l,e,h),Je;Vd(),t=xt(e,t,n)}else e=s.treeContext,Ft=da(h.nextSibling),In=t,Bt=!0,Rl=null,ol=!1,e!==null&&as(t,e),t=fn(t,l),t.flags|=4096;return t}return e=ll(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function fl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(u(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Hi(e,t,n,l,o){return Jl(t),n=Pc(e,t,n,l,void 0,o),l=pr(),e!==null&&!Ge?(Lr(e,t,o),Po(e,t,o)):(Bt&&l&&is(t),t.flags|=1,He(e,t,n,o),t.child)}function Rf(e,t,n,l,o,s){return Jl(t),t.updateQueue=null,n=zd(t,l,n,o),Yr(e),l=pr(),e!==null&&!Ge?(Lr(e,t,s),Po(e,t,s)):(Bt&&l&&is(t),t.flags|=1,He(e,t,n,s),t.child)}function Df(e,t,n,l,o){if(Jl(t),t.stateNode===null){var s=kl,h=n.contextType;typeof h=="object"&&h!==null&&(s=nn(h)),s=new n(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=me,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},to(t),h=n.contextType,s.context=typeof h=="object"&&h!==null?nn(h):kl,s.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Se(t,n,h,l),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(h=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),h!==s.state&&me.enqueueReplaceState(s,s.state,null),oa(t,l,s,o),Ma(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var w=t.memoizedProps,B=Re(n,w);s.props=B;var te=s.context,fe=n.contextType;h=kl,typeof fe=="object"&&fe!==null&&(h=nn(fe));var ye=n.getDerivedStateFromProps;fe=typeof ye=="function"||typeof s.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,fe||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(w||te!==h)&&Me(t,s,l,h),la=!1;var le=t.memoizedState;s.state=le,oa(t,l,s,o),Ma(),te=t.memoizedState,w||le!==te||la?(typeof ye=="function"&&(Se(t,n,ye,l),te=t.memoizedState),(B=la||ae(t,n,B,l,le,te,h))?(fe||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=te),s.props=l,s.state=te,s.context=h,l=B):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,Do(e,t),h=t.memoizedProps,fe=Re(n,h),s.props=fe,ye=t.pendingProps,le=s.context,te=n.contextType,B=kl,typeof te=="object"&&te!==null&&(B=nn(te)),w=n.getDerivedStateFromProps,(te=typeof w=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(h!==ye||le!==B)&&Me(t,s,l,B),la=!1,le=t.memoizedState,s.state=le,oa(t,l,s,o),Ma();var re=t.memoizedState;h!==ye||le!==re||la||e!==null&&e.dependencies!==null&&Na(e.dependencies)?(typeof w=="function"&&(Se(t,n,w,l),re=t.memoizedState),(fe=la||ae(t,n,fe,l,le,re,B)||e!==null&&e.dependencies!==null&&Na(e.dependencies))?(te||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,re,B),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,re,B)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=re),s.props=l,s.state=re,s.context=B,l=fe):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,fl(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=ia(t,e.child,null,o),t.child=ia(t,null,n,o)):He(e,t,n,o),t.memoizedState=s.state,e=t.child):e=Po(e,t,o),e}function Af(e,t,n,l){return sl(),t.flags|=256,He(e,t,n,l),t.child}var vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mu(e){return{baseLanes:e,cachePool:ta()}}function Su(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Pl),e}function Nf(e,t,n){var l=t.pendingProps,o=!1,s=(t.flags&128)!==0,h;if((h=s)||(h=e!==null&&e.memoizedState===null?!1:(Yt.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Bt){if(o?sa(t):io(),(e=Ft)?(e=Ep(e,ol),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Si!==null?{id:Qi,overflow:tt}:null,retryLane:536870912,hydrationErrors:null},n=al(e),n.return=t,t.child=n,In=t,Ft=null)):e=null,e===null)throw Ql(t);return lf(e)?t.lanes=32:t.lanes=536870912,null}var w=l.children;return l=l.fallback,o?(io(),o=t.mode,w=Nd({mode:"hidden",children:w},o),l=Gn(l,o,n,null),w.return=t,l.return=t,w.sibling=l,t.child=w,l=t.child,l.memoizedState=mu(n),l.childLanes=Su(e,h,n),t.memoizedState=vu,Xt(null,l)):(sa(t),wu(t,w))}var B=e.memoizedState;if(B!==null&&(w=B.dehydrated,w!==null)){if(s)t.flags&256?(sa(t),t.flags&=-257,t=Tu(e,t,n)):t.memoizedState!==null?(io(),t.child=e.child,t.flags|=128,t=null):(io(),w=l.fallback,o=t.mode,l=Nd({mode:"visible",children:l.children},o),w=Gn(w,o,n,null),w.flags|=2,l.return=t,w.return=t,l.sibling=w,t.child=l,ia(t,e.child,null,n),l=t.child,l.memoizedState=mu(n),l.childLanes=Su(e,h,n),t.memoizedState=vu,t=Xt(null,l));else if(sa(t),lf(w)){if(h=w.nextSibling&&w.nextSibling.dataset,h)var te=h.dgst;h=te,l=Error(u(419)),l.stack="",l.digest=h,Kl({value:l,source:null,stack:null}),t=Tu(e,t,n)}else if(Ge||Aa(e,t,n,!1),h=(n&e.childLanes)!==0,Ge||h){if(h=pn,h!==null&&(l=Pe(h,n),l!==0&&l!==B.retryLane))throw B.retryLane=l,Zl(e,l),yl(h,e,l),Je;nf(w)||Vd(),t=Tu(e,t,n)}else nf(w)?(t.flags|=192,t.child=e.child,t=null):(e=B.treeContext,Ft=da(w.nextSibling),In=t,Bt=!0,Rl=null,ol=!1,e!==null&&as(t,e),t=wu(t,l.children),t.flags|=4096);return t}return o?(io(),w=l.fallback,o=t.mode,B=e.child,te=B.sibling,l=ll(B,{mode:"hidden",children:l.children}),l.subtreeFlags=B.subtreeFlags&65011712,te!==null?w=ll(te,w):(w=Gn(w,o,n,null),w.flags|=2),w.return=t,l.return=t,l.sibling=w,t.child=l,Xt(null,l),l=t.child,w=e.child.memoizedState,w===null?w=mu(n):(o=w.cachePool,o!==null?(B=Sn._currentValue,o=o.parent!==B?{parent:B,pool:B}:o):o=ta(),w={baseLanes:w.baseLanes|n,cachePool:o}),l.memoizedState=w,l.childLanes=Su(e,h,n),t.memoizedState=vu,Xt(e.child,l)):(sa(t),n=e.child,e=n.sibling,n=ll(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function wu(e,t){return t=Nd({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Nd(e,t){return e=si(22,e,null,t),e.lanes=0,e}function Tu(e,t,n){return ia(t,e.child,null,n),e=wu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bf(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),To(e.return,t,n)}function ju(e,t,n,l,o,s){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:s}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=n,h.tailMode=o,h.treeForkCount=s)}function Uf(e,t,n){var l=t.pendingProps,o=l.revealOrder,s=l.tail;l=l.children;var h=Yt.current,w=(h&2)!==0;if(w?(h=h&1|2,t.flags|=128):h&=1,ie(Yt,h),He(e,t,l,n),l=Bt?Da:0,!w&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bf(e,n,t);else if(e.tag===19)Bf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ur(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ju(t,!1,o,n,s,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ur(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ju(t,!0,n,null,s,l);break;case"together":ju(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Po(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),zs|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Aa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=ll(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ll(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Na(e)))}function Ah(e,t,n){switch(t.tag){case 3:Dt(t,t.stateNode.containerInfo),Za(t,Sn,e.memoizedState.cache),sl();break;case 27:case 5:Jt(t);break;case 4:Dt(t,t.stateNode.containerInfo);break;case 10:Za(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,dr(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(sa(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Nf(e,t,n):(sa(t),e=Po(e,t,n),e!==null?e.sibling:null);sa(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Aa(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return Uf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ie(Yt,Yt.current),l)break;return null;case 22:return t.lanes=0,Qt(e,t,n,t.pendingProps);case 24:Za(t,Sn,e.memoizedState.cache)}return Po(e,t,n)}function Mf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ge=!0;else{if(!zu(e,n)&&(t.flags&128)===0)return Ge=!1,Ah(e,t,n);Ge=(e.flags&131072)!==0}else Ge=!1,Bt&&(t.flags&1048576)!==0&&gd(t,Da,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=zo(t.elementType),t.type=e,typeof e=="function")Pi(e)?(l=Re(e,l),t.tag=1,t=Df(null,t,e,l,n)):(t.tag=0,t=Hi(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===st){t.tag=11,t=Ae(null,t,e,l,n);break e}else if(o===k){t.tag=14,t=ot(null,t,e,l,n);break e}}throw t=Ke(e)||e,Error(u(306,t,""))}}return t;case 0:return Hi(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=Re(l,t.pendingProps),Df(e,t,l,o,n);case 3:e:{if(Dt(t,t.stateNode.containerInfo),e===null)throw Error(u(387));l=t.pendingProps;var s=t.memoizedState;o=s.element,Do(e,t),oa(t,l,null,n);var h=t.memoizedState;if(l=h.cache,Za(t,Sn,l),l!==s.cache&&Nl(t,[Sn],n,!0),Ma(),l=h.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Af(e,t,l,n);break e}else if(l!==o){o=Gi(Error(u(424)),t),Kl(o),t=Af(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ft=da(e.firstChild),In=t,Bt=!0,Rl=null,ol=!0,n=Ro(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(sl(),l===o){t=Po(e,t,n);break e}He(e,t,l,n)}t=t.child}return t;case 26:return fl(e,t),e===null?(n=Yp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Bt||(n=t.type,e=t.pendingProps,l=Xd(lt.current).createElement(n),l[Un]=t,l[Jn]=e,ji(l,n,e),mn(l),t.stateNode=l):t.memoizedState=Yp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Jt(t),e===null&&Bt&&(l=t.stateNode=Wp(t.type,t.pendingProps,lt.current),In=t,ol=!0,o=Ft,As(t.type)?(af=o,Ft=da(l.firstChild)):Ft=o),He(e,t,t.pendingProps.children,n),fl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Bt&&((o=l=Ft)&&(l=og(l,t.type,t.pendingProps,ol),l!==null?(t.stateNode=l,In=t,Ft=da(l.firstChild),ol=!1,o=!0):o=!1),o||Ql(t)),Jt(t),o=t.type,s=t.pendingProps,h=e!==null?e.memoizedProps:null,l=s.children,Ju(o,s)?l=null:h!==null&&Ju(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=Pc(e,t,_c,null,null,n),ld._currentValue=o),fl(e,t),He(e,t,l,n),t.child;case 6:return e===null&&Bt&&((e=n=Ft)&&(n=sg(n,t.pendingProps,ol),n!==null?(t.stateNode=n,In=t,Ft=null,e=!0):e=!1),e||Ql(t)),null;case 13:return Nf(e,t,n);case 4:return Dt(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ia(t,null,l,n):He(e,t,l,n),t.child;case 11:return Ae(e,t,t.type,t.pendingProps,n);case 7:return He(e,t,t.pendingProps,n),t.child;case 8:return He(e,t,t.pendingProps.children,n),t.child;case 12:return He(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,Za(t,t.type,l.value),He(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,Jl(t),o=nn(o),l=l(o),t.flags|=1,He(e,t,l,n),t.child;case 14:return ot(e,t,t.type,t.pendingProps,n);case 15:return Lt(e,t,t.type,t.pendingProps,n);case 19:return Uf(e,t,n);case 31:return Oa(e,t,n);case 22:return Qt(e,t,n,t.pendingProps);case 24:return Jl(t),l=nn(Sn),e===null?(o=dl(),o===null&&(o=pn,s=Ka(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:l,cache:o},to(t),Za(t,Sn,o)):((e.lanes&n)!==0&&(Do(e,t),oa(t,null,null,n),Ma()),o=e.memoizedState,s=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Za(t,Sn,l)):(l=s.cache,Za(t,Sn,l),l!==o.cache&&Nl(t,[Sn],n,!0))),He(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function _o(e){e.flags|=4}function Cu(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(sp())e.flags|=8192;else throw Co=Er,Uc}else e.flags&=-16777217}function Pf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Zp(t))if(sp())e.flags|=8192;else throw Co=Er,Uc}function Bd(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ga():536870912,e.lanes|=t,sc|=t)}function Fc(e,t){if(!Bt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function vn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Nh(e,t,n){var l=t.pendingProps;switch(ls(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(t),null;case 1:return vn(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Al(Sn),et(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Dl(t)?_o(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ss())),vn(t),null;case 26:var o=t.type,s=t.memoizedState;return e===null?(_o(t),s!==null?(vn(t),Pf(t,s)):(vn(t),Cu(t,o,null,l,n))):s?s!==e.memoizedState?(_o(t),vn(t),Pf(t,s)):(vn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&_o(t),vn(t),Cu(t,o,e,l,n)),null;case 27:if(Ii(t),n=lt.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_o(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return vn(t),null}e=xe.current,Dl(t)?Mr(t):(e=Wp(o,l,n),t.stateNode=e,_o(t))}return vn(t),null;case 5:if(Ii(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_o(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return vn(t),null}if(s=xe.current,Dl(t))Mr(t);else{var h=Xd(lt.current);switch(s){case 1:s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=h.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?h.createElement(o,{is:l.is}):h.createElement(o)}}s[Un]=t,s[Jn]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=s;e:switch(ji(s,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&_o(t)}}return vn(t),Cu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&_o(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(u(166));if(e=lt.current,Dl(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=In,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[Un]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Np(e.nodeValue,n)),e||Ql(t,!0)}else e=Xd(e).createTextNode(l),e[Un]=t,t.stateNode=e}return vn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Dl(t),n!==null){if(e===null){if(!l)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[Un]=t}else sl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vn(t),e=!1}else n=ss(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(_i(t),t):(_i(t),null);if((t.flags&128)!==0)throw Error(u(558))}return vn(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Dl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(u(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(u(317));o[Un]=t}else sl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vn(t),o=!1}else o=ss(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(_i(t),t):(_i(t),null)}return _i(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Bd(t,t.updateQueue),vn(t),null);case 4:return et(),e===null&&Gu(t.stateNode.containerInfo),vn(t),null;case 10:return Al(t.type),vn(t),null;case 19:if(_(Yt),l=t.memoizedState,l===null)return vn(t),null;if(o=(t.flags&128)!==0,s=l.rendering,s===null)if(o)Fc(l,!1);else{if(Hn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=ur(e),s!==null){for(t.flags|=128,Fc(l,!1),e=s.updateQueue,t.updateQueue=e,Bd(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Xi(n,e),n=n.sibling;return ie(Yt,Yt.current&1|2),Bt&&nt(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&hi()>Od&&(t.flags|=128,o=!0,Fc(l,!1),t.lanes=4194304)}else{if(!o)if(e=ur(s),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Bd(t,e),Fc(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!Bt)return vn(t),null}else 2*hi()-l.renderingStartTime>Od&&n!==536870912&&(t.flags|=128,o=!0,Fc(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=hi(),e.sibling=null,n=Yt.current,ie(Yt,o?n&1|2:n&1),Bt&&nt(t,l.treeForkCount),e):(vn(t),null);case 22:case 23:return _i(t),fs(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(vn(t),t.subtreeFlags&6&&(t.flags|=8192)):vn(t),n=t.updateQueue,n!==null&&Bd(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&_(eo),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Al(Sn),vn(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function Bh(e,t){switch(ls(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Al(Sn),et(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ii(t),null;case 31:if(t.memoizedState!==null){if(_i(t),t.alternate===null)throw Error(u(340));sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(_i(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _(Yt),null;case 4:return et(),null;case 10:return Al(t.type),null;case 22:case 23:return _i(t),fs(),e!==null&&_(eo),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Al(Sn),null;case 25:return null;default:return null}}function _f(e,t){switch(ls(t),t.tag){case 3:Al(Sn),et();break;case 26:case 27:case 5:Ii(t);break;case 4:et();break;case 31:t.memoizedState!==null&&_i(t);break;case 13:_i(t);break;case 19:_(Yt);break;case 10:Al(t.type);break;case 22:case 23:_i(t),fs(),e!==null&&_(eo);break;case 24:Al(Sn)}}function Yc(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var s=n.create,h=n.inst;l=s(),h.destroy=l}n=n.next}while(n!==o)}}catch(w){an(t,t.return,w)}}function Ts(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var s=o.next;l=s;do{if((l.tag&e)===e){var h=l.inst,w=h.destroy;if(w!==void 0){h.destroy=void 0,o=t;var B=n,te=w;try{te()}catch(fe){an(o,B,fe)}}}l=l.next}while(l!==s)}}catch(fe){an(t,t.return,fe)}}function Of(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ir(t,n)}catch(l){an(e,e.return,l)}}}function Hf(e,t,n){n.props=Re(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){an(e,t,l)}}function Lc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){an(e,t,o)}}function ro(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){an(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){an(e,t,o)}else n.current=null}function Ef(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){an(e,e.return,o)}}function ku(e,t,n){try{var l=e.stateNode;eg(l,e.type,n,t),l[Jn]=t}catch(o){an(e,e.return,o)}}function Vf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&As(e.type)||e.tag===4}function Ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&As(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Du(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=at));else if(l!==4&&(l===27&&As(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Du(e,t,n),e=e.sibling;e!==null;)Du(e,t,n),e=e.sibling}function Ud(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&As(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ud(e,t,n),e=e.sibling;e!==null;)Ud(e,t,n),e=e.sibling}function If(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ji(t,l,n),t[Un]=e,t[Jn]=n}catch(s){an(e,e.return,s)}}var Oo=!1,Fn=!1,Au=!1,Wf=typeof WeakSet=="function"?WeakSet:Set,ui=null;function Uh(e,t){if(e=e.containerInfo,Qu=eu,e=Ac(e),Zs(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var h=0,w=-1,B=-1,te=0,fe=0,ye=e,le=null;t:for(;;){for(var re;ye!==n||o!==0&&ye.nodeType!==3||(w=h+o),ye!==s||l!==0&&ye.nodeType!==3||(B=h+l),ye.nodeType===3&&(h+=ye.nodeValue.length),(re=ye.firstChild)!==null;)le=ye,ye=re;for(;;){if(ye===e)break t;if(le===n&&++te===o&&(w=h),le===s&&++fe===l&&(B=h),(re=ye.nextSibling)!==null)break;ye=le,le=ye.parentNode}ye=re}n=w===-1||B===-1?null:{start:w,end:B}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ku={focusedElem:e,selectionRange:n},eu=!1,ui=t;ui!==null;)if(t=ui,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ui=e;else for(;ui!==null;){switch(t=ui,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,o=s.memoizedProps,s=s.memoizedState,l=n.stateNode;try{var Le=Re(n.type,o);e=l.getSnapshotBeforeUpdate(Le,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(dt){an(n,n.return,dt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)tf(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,ui=e;break}ui=t.return}}function $f(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Eo(e,n),l&4&&Yc(5,n);break;case 1:if(Eo(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){an(n,n.return,h)}else{var o=Re(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){an(n,n.return,h)}}l&64&&Of(n),l&512&&Lc(n,n.return);break;case 3:if(Eo(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ir(e,t)}catch(h){an(n,n.return,h)}}break;case 27:t===null&&l&4&&If(n);case 26:case 5:Eo(e,n),t===null&&l&4&&Ef(n),l&512&&Lc(n,n.return);break;case 12:Eo(e,n);break;case 31:Eo(e,n),l&4&&Lf(e,n);break;case 13:Eo(e,n),l&4&&Xf(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Wh.bind(null,n),rg(e,n))));break;case 22:if(l=n.memoizedState!==null||Oo,!l){t=t!==null&&t.memoizedState!==null||Fn,o=Oo;var s=Fn;Oo=l,(Fn=t)&&!s?Vo(e,n,(n.subtreeFlags&8772)!==0):Eo(e,n),Oo=o,Fn=s}break;case 30:break;default:Eo(e,n)}}function Ff(e){var t=e.alternate;t!==null&&(e.alternate=null,Ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&hn(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jn=null,pl=!1;function Ho(e,t,n){for(n=n.child;n!==null;)Yf(e,t,n),n=n.sibling}function Yf(e,t,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Nn,n)}catch{}switch(n.tag){case 26:Fn||ro(n,t),Ho(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Fn||ro(n,t);var l=jn,o=pl;As(n.type)&&(jn=n.stateNode,pl=!1),Ho(e,t,n),td(n.stateNode),jn=l,pl=o;break;case 5:Fn||ro(n,t);case 6:if(l=jn,o=pl,jn=null,Ho(e,t,n),jn=l,pl=o,jn!==null)if(pl)try{(jn.nodeType===9?jn.body:jn.nodeName==="HTML"?jn.ownerDocument.body:jn).removeChild(n.stateNode)}catch(s){an(n,t,s)}else try{jn.removeChild(n.stateNode)}catch(s){an(n,t,s)}break;case 18:jn!==null&&(pl?(e=jn,Op(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),gc(e)):Op(jn,n.stateNode));break;case 4:l=jn,o=pl,jn=n.stateNode.containerInfo,pl=!0,Ho(e,t,n),jn=l,pl=o;break;case 0:case 11:case 14:case 15:Ts(2,n,t),Fn||Ts(4,n,t),Ho(e,t,n);break;case 1:Fn||(ro(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Hf(n,t,l)),Ho(e,t,n);break;case 21:Ho(e,t,n);break;case 22:Fn=(l=Fn)||n.memoizedState!==null,Ho(e,t,n),Fn=l;break;default:Ho(e,t,n)}}function Lf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{gc(e)}catch(n){an(t,t.return,n)}}}function Xf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gc(e)}catch(n){an(t,t.return,n)}}function Mh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Wf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Wf),t;default:throw Error(u(435,e.tag))}}function Md(e,t){var n=Mh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=$h.bind(null,e,l);l.then(o,o)}})}function hl(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],s=e,h=t,w=h;e:for(;w!==null;){switch(w.tag){case 27:if(As(w.type)){jn=w.stateNode,pl=!1;break e}break;case 5:jn=w.stateNode,pl=!1;break e;case 3:case 4:jn=w.stateNode.containerInfo,pl=!0;break e}w=w.return}if(jn===null)throw Error(u(160));Yf(s,h,o),jn=null,pl=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Gf(t,e),t=t.sibling}var Ha=null;function Gf(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),gl(e),l&4&&(Ts(3,e,e.return),Yc(3,e),Ts(5,e,e.return));break;case 1:hl(t,e),gl(e),l&512&&(Fn||n===null||ro(n,n.return)),l&64&&Oo&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=Ha;if(hl(t,e),gl(e),l&512&&(Fn||n===null||ro(n,n.return)),l&4){var s=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":s=o.getElementsByTagName("title")[0],(!s||s[uo]||s[Un]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(l),o.head.insertBefore(s,o.querySelector("head > title"))),ji(s,l,n),s[Un]=e,mn(s),l=s;break e;case"link":var h=Gp("link","href",o).get(l+(n.href||""));if(h){for(var w=0;w<h.length;w++)if(s=h[w],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(w,1);break t}}s=o.createElement(l),ji(s,l,n),o.head.appendChild(s);break;case"meta":if(h=Gp("meta","content",o).get(l+(n.content||""))){for(w=0;w<h.length;w++)if(s=h[w],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(w,1);break t}}s=o.createElement(l),ji(s,l,n),o.head.appendChild(s);break;default:throw Error(u(468,l))}s[Un]=e,mn(s),l=s}e.stateNode=l}else qp(o,e.type,e.stateNode);else e.stateNode=Xp(o,l,e.memoizedProps);else s!==l?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,l===null?qp(o,e.type,e.stateNode):Xp(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ku(e,e.memoizedProps,n.memoizedProps)}break;case 27:hl(t,e),gl(e),l&512&&(Fn||n===null||ro(n,n.return)),n!==null&&l&4&&ku(e,e.memoizedProps,n.memoizedProps);break;case 5:if(hl(t,e),gl(e),l&512&&(Fn||n===null||ro(n,n.return)),e.flags&32){o=e.stateNode;try{rn(o,"")}catch(Le){an(e,e.return,Le)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,ku(e,o,n!==null?n.memoizedProps:o)),l&1024&&(Au=!0);break;case 6:if(hl(t,e),gl(e),l&4){if(e.stateNode===null)throw Error(u(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(Le){an(e,e.return,Le)}}break;case 3:if(Zd=null,o=Ha,Ha=Gd(t.containerInfo),hl(t,e),Ha=o,gl(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{gc(t.containerInfo)}catch(Le){an(e,e.return,Le)}Au&&(Au=!1,qf(e));break;case 4:l=Ha,Ha=Gd(e.stateNode.containerInfo),hl(t,e),gl(e),Ha=l;break;case 12:hl(t,e),gl(e);break;case 31:hl(t,e),gl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Md(e,l)));break;case 13:hl(t,e),gl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(_d=hi()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Md(e,l)));break;case 22:o=e.memoizedState!==null;var B=n!==null&&n.memoizedState!==null,te=Oo,fe=Fn;if(Oo=te||o,Fn=fe||B,hl(t,e),Fn=fe,Oo=te,gl(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||B||Oo||Fn||xr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){B=n=t;try{if(s=B.stateNode,o)h=s.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{w=B.stateNode;var ye=B.memoizedProps.style,le=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;w.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(Le){an(B,B.return,Le)}}}else if(t.tag===6){if(n===null){B=t;try{B.stateNode.nodeValue=o?"":B.memoizedProps}catch(Le){an(B,B.return,Le)}}}else if(t.tag===18){if(n===null){B=t;try{var re=B.stateNode;o?Hp(re,!0):Hp(B.stateNode,!1)}catch(Le){an(B,B.return,Le)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Md(e,n))));break;case 19:hl(t,e),gl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Md(e,l)));break;case 30:break;case 21:break;default:hl(t,e),gl(e)}}function gl(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Vf(l)){n=l;break}l=l.return}if(n==null)throw Error(u(160));switch(n.tag){case 27:var o=n.stateNode,s=Ru(e);Ud(e,s,o);break;case 5:var h=n.stateNode;n.flags&32&&(rn(h,""),n.flags&=-33);var w=Ru(e);Ud(e,w,h);break;case 3:case 4:var B=n.stateNode.containerInfo,te=Ru(e);Du(e,te,B);break;default:throw Error(u(161))}}catch(fe){an(e,e.return,fe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Eo(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)$f(e,t.alternate,t),t=t.sibling}function xr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ts(4,t,t.return),xr(t);break;case 1:ro(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Hf(t,t.return,n),xr(t);break;case 27:td(t.stateNode);case 26:case 5:ro(t,t.return),xr(t);break;case 22:t.memoizedState===null&&xr(t);break;case 30:xr(t);break;default:xr(t)}e=e.sibling}}function Vo(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,s=t,h=s.flags;switch(s.tag){case 0:case 11:case 15:Vo(o,s,n),Yc(4,s);break;case 1:if(Vo(o,s,n),l=s,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(te){an(l,l.return,te)}if(l=s,o=l.updateQueue,o!==null){var w=l.stateNode;try{var B=o.shared.hiddenCallbacks;if(B!==null)for(o.shared.hiddenCallbacks=null,o=0;o<B.length;o++)Ji(B[o],w)}catch(te){an(l,l.return,te)}}n&&h&64&&Of(s),Lc(s,s.return);break;case 27:If(s);case 26:case 5:Vo(o,s,n),n&&l===null&&h&4&&Ef(s),Lc(s,s.return);break;case 12:Vo(o,s,n);break;case 31:Vo(o,s,n),n&&h&4&&Lf(o,s);break;case 13:Vo(o,s,n),n&&h&4&&Xf(o,s);break;case 22:s.memoizedState===null&&Vo(o,s,n),Lc(s,s.return);break;case 30:break;default:Vo(o,s,n)}t=t.sibling}}function Nu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ea(n))}function Bu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ea(e))}function Ea(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zf(e,t,n,l),t=t.sibling}function Zf(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Ea(e,t,n,l),o&2048&&Yc(9,t);break;case 1:Ea(e,t,n,l);break;case 3:Ea(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ea(e)));break;case 12:if(o&2048){Ea(e,t,n,l),e=t.stateNode;try{var s=t.memoizedProps,h=s.id,w=s.onPostCommit;typeof w=="function"&&w(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){an(t,t.return,B)}}else Ea(e,t,n,l);break;case 31:Ea(e,t,n,l);break;case 13:Ea(e,t,n,l);break;case 23:break;case 22:s=t.stateNode,h=t.alternate,t.memoizedState!==null?s._visibility&2?Ea(e,t,n,l):Xc(e,t):s._visibility&2?Ea(e,t,n,l):(s._visibility|=2,lc(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Nu(h,t);break;case 24:Ea(e,t,n,l),o&2048&&Bu(t.alternate,t);break;default:Ea(e,t,n,l)}}function lc(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,h=t,w=n,B=l,te=h.flags;switch(h.tag){case 0:case 11:case 15:lc(s,h,w,B,o),Yc(8,h);break;case 23:break;case 22:var fe=h.stateNode;h.memoizedState!==null?fe._visibility&2?lc(s,h,w,B,o):Xc(s,h):(fe._visibility|=2,lc(s,h,w,B,o)),o&&te&2048&&Nu(h.alternate,h);break;case 24:lc(s,h,w,B,o),o&&te&2048&&Bu(h.alternate,h);break;default:lc(s,h,w,B,o)}t=t.sibling}}function Xc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:Xc(n,l),o&2048&&Nu(l.alternate,l);break;case 24:Xc(n,l),o&2048&&Bu(l.alternate,l);break;default:Xc(n,l)}t=t.sibling}}var Gc=8192;function ac(e,t,n){if(e.subtreeFlags&Gc)for(e=e.child;e!==null;)Qf(e,t,n),e=e.sibling}function Qf(e,t,n){switch(e.tag){case 26:ac(e,t,n),e.flags&Gc&&e.memoizedState!==null&&mg(n,Ha,e.memoizedState,e.memoizedProps);break;case 5:ac(e,t,n);break;case 3:case 4:var l=Ha;Ha=Gd(e.stateNode.containerInfo),ac(e,t,n),Ha=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Gc,Gc=16777216,ac(e,t,n),Gc=l):ac(e,t,n));break;default:ac(e,t,n)}}function Kf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function qc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ui=l,ep(l,e)}Kf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jf(e),e=e.sibling}function Jf(e){switch(e.tag){case 0:case 11:case 15:qc(e),e.flags&2048&&Ts(9,e,e.return);break;case 3:qc(e);break;case 12:qc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Pd(e)):qc(e);break;default:qc(e)}}function Pd(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ui=l,ep(l,e)}Kf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ts(8,t,t.return),Pd(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Pd(t));break;default:Pd(t)}e=e.sibling}}function ep(e,t){for(;ui!==null;){var n=ui;switch(n.tag){case 0:case 11:case 15:Ts(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ea(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,ui=l;else e:for(n=e;ui!==null;){l=ui;var o=l.sibling,s=l.return;if(Ff(l),l===n){ui=null;break e}if(o!==null){o.return=s,ui=o;break e}ui=s}}}var Ph={getCacheForType:function(e){var t=nn(Sn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return nn(Sn).controller.signal}},_h=typeof WeakMap=="function"?WeakMap:Map,Kt=0,pn=null,Pt=null,Ht=0,ln=0,Ml=null,js=!1,oc=!1,Uu=!1,Io=0,Hn=0,zs=0,yr=0,Mu=0,Pl=0,sc=0,Zc=null,xl=null,Pu=!1,_d=0,tp=0,Od=1/0,Hd=null,Cs=null,Zn=0,ks=null,rc=null,Wo=0,_u=0,Ou=null,np=null,Qc=0,Hu=null;function _l(){return(Kt&2)!==0&&Ht!==0?Ht&-Ht:ne.T!==null?Fu():Yn()}function ip(){if(Pl===0)if((Ht&536870912)===0||Bt){var e=Lo;Lo<<=1,(Lo&3932160)===0&&(Lo=262144),Pl=e}else Pl=536870912;return e=ci.current,e!==null&&(e.flags|=32),Pl}function yl(e,t,n){(e===pn&&(ln===2||ln===9)||e.cancelPendingCommit!==null)&&(cc(e,0),Rs(e,Ht,Pl,!1)),zi(e,n),((Kt&2)===0||e!==pn)&&(e===pn&&((Kt&2)===0&&(yr|=n),Hn===4&&Rs(e,Ht,Pl,!1)),co(e))}function lp(e,t,n){if((Kt&6)!==0)throw Error(u(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Il(e,t),o=l?Eh(e,t):Vu(e,t,!0),s=l;do{if(o===0){oc&&!l&&Rs(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Oh(n)){o=Vu(e,t,!1),s=!1;continue}if(o===2){if(s=t,e.errorRecoveryDisabledLanes&s)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var w=e;o=Zc;var B=w.current.memoizedState.isDehydrated;if(B&&(cc(w,h).flags|=256),h=Vu(w,h,!1),h!==2){if(Uu&&!B){w.errorRecoveryDisabledLanes|=s,yr|=s,o=4;break e}s=xl,xl=o,s!==null&&(xl===null?xl=s:xl.push.apply(xl,s))}o=h}if(s=!1,o!==2)continue}}if(o===1){cc(e,0),Rs(e,t,0,!0);break}e:{switch(l=e,s=o,s){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:Rs(l,t,Pl,!js);break e;case 2:xl=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(o=_d+300-hi(),10<o)){if(Rs(l,t,Pl,!js),At(l,0,!0)!==0)break e;Wo=t,l.timeoutHandle=Pp(ap.bind(null,l,n,xl,Hd,Pu,t,Pl,yr,sc,js,s,"Throttled",-0,0),o);break e}ap(l,n,xl,Hd,Pu,t,Pl,yr,sc,js,s,null,-0,0)}}break}while(!0);co(e)}function ap(e,t,n,l,o,s,h,w,B,te,fe,ye,le,re){if(e.timeoutHandle=-1,ye=t.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:at},Qf(t,s,ye);var Le=(s&62914560)===s?_d-hi():(s&4194048)===s?tp-hi():0;if(Le=Sg(ye,Le),Le!==null){Wo=s,e.cancelPendingCommit=Le(pp.bind(null,e,t,s,n,l,o,h,w,B,fe,ye,null,le,re)),Rs(e,s,h,!te);return}}pp(e,t,s,n,l,o,h,w,B)}function Oh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],s=o.getSnapshot;o=o.value;try{if(!Ni(s(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rs(e,t,n,l){t&=~Mu,t&=~yr,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var s=31-be(o),h=1<<s;l[s]=-1,o&=~h}n!==0&&_s(e,n,t)}function Ed(){return(Kt&6)===0?(Kc(0),!1):!0}function Eu(){if(Pt!==null){if(ln===0)var e=Pt.return;else e=Pt,cl=rl=null,Xr(e),cs=null,cr=0,e=Pt;for(;e!==null;)_f(e.alternate,e),e=e.return;Pt=null}}function cc(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,ig(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Wo=0,Eu(),pn=e,Pt=n=ll(e.current,null),Ht=t,ln=0,Ml=null,js=!1,oc=Il(e,t),Uu=!1,sc=Pl=Mu=yr=zs=Hn=0,xl=Zc=null,Pu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-be(l),s=1<<o;t|=e[o],l&=~s}return Io=t,ar(),n}function op(e,t){yt=null,ne.H=H,t===rs||t===Hr?(t=Td(),ln=3):t===Uc?(t=Td(),ln=4):ln=t===Je?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ml=t,Pt===null&&(Hn=1,J(e,Gi(t,e.current)))}function sp(){var e=ci.current;return e===null?!0:(Ht&4194048)===Ht?wi===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?e===wi:!1}function rp(){var e=ne.H;return ne.H=H,e===null?H:e}function cp(){var e=ne.A;return ne.A=Ph,e}function Vd(){Hn=4,js||(Ht&4194048)!==Ht&&ci.current!==null||(oc=!0),(zs&134217727)===0&&(yr&134217727)===0||pn===null||Rs(pn,Ht,Pl,!1)}function Vu(e,t,n){var l=Kt;Kt|=2;var o=rp(),s=cp();(pn!==e||Ht!==t)&&(Hd=null,cc(e,t)),t=!1;var h=Hn;e:do try{if(ln!==0&&Pt!==null){var w=Pt,B=Ml;switch(ln){case 8:Eu(),h=6;break e;case 3:case 2:case 9:case 6:ci.current===null&&(t=!0);var te=ln;if(ln=0,Ml=null,dc(e,w,B,te),n&&oc){h=0;break e}break;default:te=ln,ln=0,Ml=null,dc(e,w,B,te)}}Hh(),h=Hn;break}catch(fe){op(e,fe)}while(!0);return t&&e.shellSuspendCounter++,cl=rl=null,Kt=l,ne.H=o,ne.A=s,Pt===null&&(pn=null,Ht=0,ar()),h}function Hh(){for(;Pt!==null;)dp(Pt)}function Eh(e,t){var n=Kt;Kt|=2;var l=rp(),o=cp();pn!==e||Ht!==t?(Hd=null,Od=hi()+500,cc(e,t)):oc=Il(e,t);e:do try{if(ln!==0&&Pt!==null){t=Pt;var s=Ml;t:switch(ln){case 1:ln=0,Ml=null,dc(e,t,s,1);break;case 2:case 9:if(Sd(s)){ln=0,Ml=null,up(t);break}t=function(){ln!==2&&ln!==9||pn!==e||(ln=7),co(e)},s.then(t,t);break e;case 3:ln=7;break e;case 4:ln=5;break e;case 7:Sd(s)?(ln=0,Ml=null,up(t)):(ln=0,Ml=null,dc(e,t,s,7));break;case 5:var h=null;switch(Pt.tag){case 26:h=Pt.memoizedState;case 5:case 27:var w=Pt;if(h?Zp(h):w.stateNode.complete){ln=0,Ml=null;var B=w.sibling;if(B!==null)Pt=B;else{var te=w.return;te!==null?(Pt=te,Id(te)):Pt=null}break t}}ln=0,Ml=null,dc(e,t,s,5);break;case 6:ln=0,Ml=null,dc(e,t,s,6);break;case 8:Eu(),Hn=6;break e;default:throw Error(u(462))}}Vh();break}catch(fe){op(e,fe)}while(!0);return cl=rl=null,ne.H=l,ne.A=o,Kt=n,Pt!==null?0:(pn=null,Ht=0,ar(),Hn)}function Vh(){for(;Pt!==null&&!Sc();)dp(Pt)}function dp(e){var t=Mf(e.alternate,e,Io);e.memoizedProps=e.pendingProps,t===null?Id(e):Pt=t}function up(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Rf(n,t,t.pendingProps,t.type,void 0,Ht);break;case 11:t=Rf(n,t,t.pendingProps,t.type.render,t.ref,Ht);break;case 5:Xr(t);default:_f(n,t),t=Pt=Xi(t,Io),t=Mf(n,t,Io)}e.memoizedProps=e.pendingProps,t===null?Id(e):Pt=t}function dc(e,t,n,l){cl=rl=null,Xr(t),cs=null,cr=0;var o=t.return;try{if(ct(e,o,t,n,Ht)){Hn=1,J(e,Gi(n,e.current)),Pt=null;return}}catch(s){if(o!==null)throw Pt=o,s;Hn=1,J(e,Gi(n,e.current)),Pt=null;return}t.flags&32768?(Bt||l===1?e=!0:oc||(Ht&536870912)!==0?e=!1:(js=e=!0,(l===2||l===9||l===3||l===6)&&(l=ci.current,l!==null&&l.tag===13&&(l.flags|=16384))),fp(t,e)):Id(t)}function Id(e){var t=e;do{if((t.flags&32768)!==0){fp(t,js);return}e=t.return;var n=Nh(t.alternate,t,Io);if(n!==null){Pt=n;return}if(t=t.sibling,t!==null){Pt=t;return}Pt=t=e}while(t!==null);Hn===0&&(Hn=5)}function fp(e,t){do{var n=Bh(e.alternate,e);if(n!==null){n.flags&=32767,Pt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Pt=e;return}Pt=e=n}while(e!==null);Hn=6,Pt=null}function pp(e,t,n,l,o,s,h,w,B){e.cancelPendingCommit=null;do Wd();while(Zn!==0);if((Kt&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(s=t.lanes|t.childLanes,s|=lr,Wl(e,n,s,h,w,B),e===pn&&(Pt=pn=null,Ht=0),rc=t,ks=e,Wo=n,_u=s,Ou=o,np=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Fh(Ie,function(){return bp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=ne.T,ne.T=null,o=Y.p,Y.p=2,h=Kt,Kt|=4;try{Uh(e,t,n)}finally{Kt=h,Y.p=o,ne.T=l}}Zn=1,hp(),gp(),xp()}}function hp(){if(Zn===1){Zn=0;var e=ks,t=rc,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=ne.T,ne.T=null;var l=Y.p;Y.p=2;var o=Kt;Kt|=4;try{Gf(t,e);var s=Ku,h=Ac(e.containerInfo),w=s.focusedElem,B=s.selectionRange;if(h!==w&&w&&w.ownerDocument&&Dc(w.ownerDocument.documentElement,w)){if(B!==null&&Zs(w)){var te=B.start,fe=B.end;if(fe===void 0&&(fe=te),"selectionStart"in w)w.selectionStart=te,w.selectionEnd=Math.min(fe,w.value.length);else{var ye=w.ownerDocument||document,le=ye&&ye.defaultView||window;if(le.getSelection){var re=le.getSelection(),Le=w.textContent.length,dt=Math.min(B.start,Le),sn=B.end===void 0?dt:Math.min(B.end,Le);!re.extend&&dt>sn&&(h=sn,sn=dt,dt=h);var I=Dr(w,dt),P=Dr(w,sn);if(I&&P&&(re.rangeCount!==1||re.anchorNode!==I.node||re.anchorOffset!==I.offset||re.focusNode!==P.node||re.focusOffset!==P.offset)){var ee=ye.createRange();ee.setStart(I.node,I.offset),re.removeAllRanges(),dt>sn?(re.addRange(ee),re.extend(P.node,P.offset)):(ee.setEnd(P.node,P.offset),re.addRange(ee))}}}}for(ye=[],re=w;re=re.parentNode;)re.nodeType===1&&ye.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ye.length;w++){var ge=ye[w];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}eu=!!Qu,Ku=Qu=null}finally{Kt=o,Y.p=l,ne.T=n}}e.current=t,Zn=2}}function gp(){if(Zn===2){Zn=0;var e=ks,t=rc,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=ne.T,ne.T=null;var l=Y.p;Y.p=2;var o=Kt;Kt|=4;try{$f(e,t.alternate,t)}finally{Kt=o,Y.p=l,ne.T=n}}Zn=3}}function xp(){if(Zn===4||Zn===3){Zn=0,Fo();var e=ks,t=rc,n=Wo,l=np;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Zn=5:(Zn=0,rc=ks=null,yp(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Cs=null),vt(n),t=t.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Nn,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=ne.T,o=Y.p,Y.p=2,ne.T=null;try{for(var s=e.onRecoverableError,h=0;h<l.length;h++){var w=l[h];s(w.value,{componentStack:w.stack})}}finally{ne.T=t,Y.p=o}}(Wo&3)!==0&&Wd(),co(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===Hu?Qc++:(Qc=0,Hu=e):Qc=0,Kc(0)}}function yp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ea(t)))}function Wd(){return hp(),gp(),xp(),bp()}function bp(){if(Zn!==5)return!1;var e=ks,t=_u;_u=0;var n=vt(Wo),l=ne.T,o=Y.p;try{Y.p=32>n?32:n,ne.T=null,n=Ou,Ou=null;var s=ks,h=Wo;if(Zn=0,rc=ks=null,Wo=0,(Kt&6)!==0)throw Error(u(331));var w=Kt;if(Kt|=4,Jf(s.current),Zf(s,s.current,h,n),Kt=w,Kc(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Nn,s)}catch{}return!0}finally{Y.p=o,ne.T=l,yp(e,t)}}function vp(e,t,n){t=Gi(n,t),t=Be(e.stateNode,t,2),e=Bl(e,t,2),e!==null&&(zi(e,2),co(e))}function an(e,t,n){if(e.tag===3)vp(e,e,n);else for(;t!==null;){if(t.tag===3){vp(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Cs===null||!Cs.has(l))){e=Gi(n,e),n=Ze(2),l=Bl(t,n,2),l!==null&&(Ye(n,l,t,e),zi(l,2),co(l));break}}t=t.return}}function Iu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new _h;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(Uu=!0,o.add(n),e=Ih.bind(null,e,t,n),t.then(e,e))}function Ih(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pn===e&&(Ht&n)===n&&(Hn===4||Hn===3&&(Ht&62914560)===Ht&&300>hi()-_d?(Kt&2)===0&&cc(e,0):Mu|=n,sc===Ht&&(sc=0)),co(e)}function mp(e,t){t===0&&(t=ga()),e=Zl(e,t),e!==null&&(zi(e,t),co(e))}function Wh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mp(e,n)}function $h(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(u(314))}l!==null&&l.delete(t),mp(e,n)}function Fh(e,t){return bl(e,t)}var $d=null,uc=null,Wu=!1,Fd=!1,$u=!1,Ds=0;function co(e){e!==uc&&e.next===null&&(uc===null?$d=uc=e:uc=uc.next=e),Fd=!0,Wu||(Wu=!0,Lh())}function Kc(e,t){if(!$u&&Fd){$u=!0;do for(var n=!1,l=$d;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var s=0;else{var h=l.suspendedLanes,w=l.pingedLanes;s=(1<<31-be(42|e)+1)-1,s&=o&~(h&~w),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,jp(l,s))}else s=Ht,s=At(l,l===pn?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||Il(l,s)||(n=!0,jp(l,s));l=l.next}while(n);$u=!1}}function Yh(){Sp()}function Sp(){Fd=Wu=!1;var e=0;Ds!==0&&ng()&&(e=Ds);for(var t=hi(),n=null,l=$d;l!==null;){var o=l.next,s=wp(l,t);s===0?(l.next=null,n===null?$d=o:n.next=o,o===null&&(uc=n)):(n=l,(e!==0||(s&3)!==0)&&(Fd=!0)),l=o}Zn!==0&&Zn!==5||Kc(e),Ds!==0&&(Ds=0)}function wp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var h=31-be(s),w=1<<h,B=o[h];B===-1?((w&n)===0||(w&l)!==0)&&(o[h]=Xo(w,t)):B<=t&&(e.expiredLanes|=w),s&=~w}if(t=pn,n=Ht,n=At(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(ln===2||ln===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ia(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Il(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Ia(l),vt(n)){case 2:case 8:n=br;break;case 32:n=Ie;break;case 268435456:n=pa;break;default:n=Ie}return l=Tp.bind(null,e),n=bl(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Ia(l),e.callbackPriority=2,e.callbackNode=null,2}function Tp(e,t){if(Zn!==0&&Zn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Wd()&&e.callbackNode!==n)return null;var l=Ht;return l=At(e,e===pn?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(lp(e,l,t),wp(e,hi()),e.callbackNode!=null&&e.callbackNode===n?Tp.bind(null,e):null)}function jp(e,t){if(Wd())return null;lp(e,t,!0)}function Lh(){lg(function(){(Kt&6)!==0?bl(jt,Yh):Sp()})}function Fu(){if(Ds===0){var e=jo;e===0&&(e=El,El<<=1,(El&261888)===0&&(El=256)),Ds=e}return Ds}function zp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ht(""+e)}function Cp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Xh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var s=zp((o[Jn]||null).action),h=l.submitter;h&&(t=(t=h[Jn]||null)?zp(t.formAction):h.getAttribute("formAction"),t!==null&&(s=t,h=null));var w=new rt("action","action",null,l,o);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ds!==0){var B=h?Cp(o,h):new FormData(o);r(n,{pending:!0,data:B,method:o.method,action:s},null,B)}}else typeof s=="function"&&(w.preventDefault(),B=h?Cp(o,h):new FormData(o),r(n,{pending:!0,data:B,method:o.method,action:s},s,B))},currentTarget:o}]})}}for(var Yu=0;Yu<Bc.length;Yu++){var Lu=Bc[Yu],Gh=Lu.toLowerCase(),qh=Lu[0].toUpperCase()+Lu.slice(1);Ui(Gh,"on"+qh)}Ui(Ks,"onAnimationEnd"),Ui(Js,"onAnimationIteration"),Ui(Nc,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(er,"onTransitionRun"),Ui(tr,"onTransitionStart"),Ui(Br,"onTransitionCancel"),Ui(nr,"onTransitionEnd"),kt("onMouseEnter",["mouseout","mouseover"]),kt("onMouseLeave",["mouseout","mouseover"]),kt("onPointerEnter",["pointerout","pointerover"]),kt("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jc));function kp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var h=l.length-1;0<=h;h--){var w=l[h],B=w.instance,te=w.currentTarget;if(w=w.listener,B!==s&&o.isPropagationStopped())break e;s=w,o.currentTarget=te;try{s(o)}catch(fe){ir(fe)}o.currentTarget=null,s=B}else for(h=0;h<l.length;h++){if(w=l[h],B=w.instance,te=w.currentTarget,w=w.listener,B!==s&&o.isPropagationStopped())break e;s=w,o.currentTarget=te;try{s(o)}catch(fe){ir(fe)}o.currentTarget=null,s=B}}}}function _t(e,t){var n=t[Wa];n===void 0&&(n=t[Wa]=new Set);var l=e+"__bubble";n.has(l)||(Rp(t,e,2,!1),n.add(l))}function Xu(e,t,n){var l=0;t&&(l|=4),Rp(n,e,l,t)}var Yd="_reactListening"+Math.random().toString(36).slice(2);function Gu(e){if(!e[Yd]){e[Yd]=!0,mr.forEach(function(n){n!=="selectionchange"&&(Zh.has(n)||Xu(n,!1,e),Xu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yd]||(t[Yd]=!0,Xu("selectionchange",!1,t))}}function Rp(e,t,n,l){switch(ih(t)){case 2:var o=jg;break;case 8:o=zg;break;default:o=df}n=o.bind(null,t,n,e),o=void 0,!wc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function qu(e,t,n,l,o){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var w=l.stateNode.containerInfo;if(w===o)break;if(h===4)for(h=l.return;h!==null;){var B=h.tag;if((B===3||B===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;w!==null;){if(h=$a(w),h===null)return;if(B=h.tag,B===5||B===6||B===26||B===27){l=s=h;continue e}w=w.parentNode}}l=l.return}Nt(function(){var te=s,fe=Ut(n),ye=[];e:{var le=bo.get(e);if(le!==void 0){var re=rt,Le=e;switch(e){case"keypress":if(Ws(n)===0)break e;case"keydown":case"keyup":re=Ys;break;case"focusin":Le="focus",re=ii;break;case"focusout":Le="blur",re=ii;break;case"beforeblur":case"afterblur":re=ii;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Fi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=$s;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=hu;break;case Ks:case Js:case Nc:re=li;break;case nr:re=go;break;case"scroll":case"scrollend":re=Ln;break;case"wheel":re=Cr;break;case"copy":case"cut":case"paste":re=Li;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ls;break;case"toggle":case"beforetoggle":re=Zo}var dt=(t&4)!==0,sn=!dt&&(e==="scroll"||e==="scrollend"),I=dt?le!==null?le+"Capture":null:le;dt=[];for(var P=te,ee;P!==null;){var ge=P;if(ee=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ee===null||I===null||(ge=cn(P,I),ge!=null&&dt.push(ed(P,ge,ee))),sn)break;P=P.return}0<dt.length&&(le=new re(le,Le,null,n,fe),ye.push({event:le,listeners:dt}))}}if((t&7)===0){e:{if(le=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",le&&n!==wt&&(Le=n.relatedTarget||n.fromElement)&&($a(Le)||Le[zt]))break e;if((re||le)&&(le=fe.window===fe?fe:(le=fe.ownerDocument)?le.defaultView||le.parentWindow:window,re?(Le=n.relatedTarget||n.toElement,re=te,Le=Le?$a(Le):null,Le!==null&&(sn=L(Le),dt=Le.tag,Le!==sn||dt!==5&&dt!==27&&dt!==6)&&(Le=null)):(re=null,Le=te),re!==Le)){if(dt=Fi,ge="onMouseLeave",I="onMouseEnter",P="mouse",(e==="pointerout"||e==="pointerover")&&(dt=Ls,ge="onPointerLeave",I="onPointerEnter",P="pointer"),sn=re==null?le:ya(re),ee=Le==null?le:ya(Le),le=new dt(ge,P+"leave",re,n,fe),le.target=sn,le.relatedTarget=ee,ge=null,$a(fe)===te&&(dt=new dt(I,P+"enter",Le,n,fe),dt.target=ee,dt.relatedTarget=sn,ge=dt),sn=ge,re&&Le)t:{for(dt=Qh,I=re,P=Le,ee=0,ge=I;ge;ge=dt(ge))ee++;ge=0;for(var it=P;it;it=dt(it))ge++;for(;0<ee-ge;)I=dt(I),ee--;for(;0<ge-ee;)P=dt(P),ge--;for(;ee--;){if(I===P||P!==null&&I===P.alternate){dt=I;break t}I=dt(I),P=dt(P)}dt=null}else dt=null;re!==null&&Dp(ye,le,re,dt,!1),Le!==null&&sn!==null&&Dp(ye,sn,Le,dt,!0)}}e:{if(le=te?ya(te):window,re=le.nodeName&&le.nodeName.toLowerCase(),re==="select"||re==="input"&&le.type==="file")var Gt=qa;else if(pd(le))if(Ta)Gt=qs;else{Gt=zl;var Qe=oi}else re=le.nodeName,!re||re.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?te&&ve(te.elementType)&&(Gt=qa):Gt=gu;if(Gt&&(Gt=Gt(e,te))){Di(ye,Gt,n,fe);break e}Qe&&Qe(e,le,te),e==="focusout"&&te&&le.type==="number"&&te.memoizedProps.value!=null&&Go(le,"number",le.value)}switch(Qe=te?ya(te):window,e){case"focusin":(pd(Qe)||Qe.contentEditable==="true")&&(za=Qe,xo=te,es=null);break;case"focusout":es=xo=za=null;break;case"mousedown":Ca=!0;break;case"contextmenu":case"mouseup":case"dragend":Ca=!1,Nr(ye,n,fe);break;case"selectionchange":if(Ar)break;case"keydown":case"keyup":Nr(ye,n,fe)}var Rt;if(Ga)e:{switch(e){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else Zt?dn(e,n)&&(Et="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Et="onCompositionStart");Et&&(Xs&&n.locale!=="ko"&&(Zt||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Zt&&(Rt=wr()):(Sl=fe,wl="value"in Sl?Sl.value:Sl.textContent,Zt=!0)),Qe=Ld(te,Et),0<Qe.length&&(Et=new Xl(Et,e,null,n,fe),ye.push({event:Et,listeners:Qe}),Rt?Et.data=Rt:(Rt=Ko(n),Rt!==null&&(Et.data=Rt)))),(Rt=kc?Gs(e,n):Rc(e,n))&&(Et=Ld(te,"onBeforeInput"),0<Et.length&&(Qe=new Xl("onBeforeInput","beforeinput",null,n,fe),ye.push({event:Qe,listeners:Et}),Qe.data=Rt)),Xh(ye,e,te,n,fe)}kp(ye,t)})}function ed(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ld(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=cn(e,n),o!=null&&l.unshift(ed(e,o,s)),o=cn(e,t),o!=null&&l.push(ed(e,o,s))),e.tag===3)return l;e=e.return}return[]}function Qh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dp(e,t,n,l,o){for(var s=t._reactName,h=[];n!==null&&n!==l;){var w=n,B=w.alternate,te=w.stateNode;if(w=w.tag,B!==null&&B===l)break;w!==5&&w!==26&&w!==27||te===null||(B=te,o?(te=cn(n,s),te!=null&&h.unshift(ed(n,te,B))):o||(te=cn(n,s),te!=null&&h.push(ed(n,te,B)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var Kh=/\r\n?/g,Jh=/\u0000|\uFFFD/g;function Ap(e){return(typeof e=="string"?e:""+e).replace(Kh,`
`).replace(Jh,"")}function Np(e,t){return t=Ap(t),Ap(e)===t}function on(e,t,n,l,o,s){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||rn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&rn(e,""+l);break;case"className":ei(e,"class",l);break;case"tabIndex":ei(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(e,n,l);break;case"style":St(e,l,s);break;case"data":if(t!=="object"){ei(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=ht(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&on(e,t,"name",o.name,o,null),on(e,t,"formEncType",o.formEncType,o,null),on(e,t,"formMethod",o.formMethod,o,null),on(e,t,"formTarget",o.formTarget,o,null)):(on(e,t,"encType",o.encType,o,null),on(e,t,"method",o.method,o,null),on(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=ht(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=at);break;case"onScroll":l!=null&&_t("scroll",e);break;case"onScrollEnd":l!=null&&_t("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=ht(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":_t("beforetoggle",e),_t("toggle",e),po(e,"popover",l);break;case"xlinkActuate":kn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":kn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":kn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":kn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":kn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":kn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":kn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":kn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":kn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":po(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Rn.get(n)||n,po(e,n,l))}}function Zu(e,t,n,l,o,s){switch(n){case"style":St(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"children":typeof l=="string"?rn(e,l):(typeof l=="number"||typeof l=="bigint")&&rn(e,""+l);break;case"onScroll":l!=null&&_t("scroll",e);break;case"onScrollEnd":l!=null&&_t("scrollend",e);break;case"onClick":l!=null&&(e.onclick=at);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mn.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),s=e[Jn]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,o),typeof l=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):po(e,n,l)}}}function ji(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",e),_t("load",e);var l=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:on(e,t,s,h,n,null)}}o&&on(e,t,"srcSet",n.srcSet,n,null),l&&on(e,t,"src",n.src,n,null);return;case"input":_t("invalid",e);var w=s=h=o=null,B=null,te=null;for(l in n)if(n.hasOwnProperty(l)){var fe=n[l];if(fe!=null)switch(l){case"name":o=fe;break;case"type":h=fe;break;case"checked":B=fe;break;case"defaultChecked":te=fe;break;case"value":s=fe;break;case"defaultValue":w=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(u(137,t));break;default:on(e,t,l,fe,n,null)}}Vn(e,s,w,B,te,h,o,!1);return;case"select":_t("invalid",e),l=h=s=null;for(o in n)if(n.hasOwnProperty(o)&&(w=n[o],w!=null))switch(o){case"value":s=w;break;case"defaultValue":h=w;break;case"multiple":l=w;default:on(e,t,o,w,n,null)}t=s,n=h,e.multiple=!!l,t!=null?va(e,!!l,t,!1):n!=null&&va(e,!!l,n,!0);return;case"textarea":_t("invalid",e),s=o=l=null;for(h in n)if(n.hasOwnProperty(h)&&(w=n[h],w!=null))switch(h){case"value":l=w;break;case"defaultValue":o=w;break;case"children":s=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(u(91));break;default:on(e,t,h,w,n,null)}Is(e,l,o,s);return;case"option":for(B in n)if(n.hasOwnProperty(B)&&(l=n[B],l!=null))switch(B){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:on(e,t,B,l,n,null)}return;case"dialog":_t("beforetoggle",e),_t("toggle",e),_t("cancel",e),_t("close",e);break;case"iframe":case"object":_t("load",e);break;case"video":case"audio":for(l=0;l<Jc.length;l++)_t(Jc[l],e);break;case"image":_t("error",e),_t("load",e);break;case"details":_t("toggle",e);break;case"embed":case"source":case"link":_t("error",e),_t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in n)if(n.hasOwnProperty(te)&&(l=n[te],l!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:on(e,t,te,l,n,null)}return;default:if(ve(t)){for(fe in n)n.hasOwnProperty(fe)&&(l=n[fe],l!==void 0&&Zu(e,t,fe,l,n,void 0));return}}for(w in n)n.hasOwnProperty(w)&&(l=n[w],l!=null&&on(e,t,w,l,n,null))}function eg(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,h=null,w=null,B=null,te=null,fe=null;for(re in n){var ye=n[re];if(n.hasOwnProperty(re)&&ye!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":B=ye;default:l.hasOwnProperty(re)||on(e,t,re,null,l,ye)}}for(var le in l){var re=l[le];if(ye=n[le],l.hasOwnProperty(le)&&(re!=null||ye!=null))switch(le){case"type":s=re;break;case"name":o=re;break;case"checked":te=re;break;case"defaultChecked":fe=re;break;case"value":h=re;break;case"defaultValue":w=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(u(137,t));break;default:re!==ye&&on(e,t,le,re,l,ye)}}En(e,h,w,B,te,fe,s,o);return;case"select":re=h=w=le=null;for(s in n)if(B=n[s],n.hasOwnProperty(s)&&B!=null)switch(s){case"value":break;case"multiple":re=B;default:l.hasOwnProperty(s)||on(e,t,s,null,l,B)}for(o in l)if(s=l[o],B=n[o],l.hasOwnProperty(o)&&(s!=null||B!=null))switch(o){case"value":le=s;break;case"defaultValue":w=s;break;case"multiple":h=s;default:s!==B&&on(e,t,o,s,l,B)}t=w,n=h,l=re,le!=null?va(e,!!n,le,!1):!!l!=!!n&&(t!=null?va(e,!!n,t,!0):va(e,!!n,n?[]:"",!1));return;case"textarea":re=le=null;for(w in n)if(o=n[w],n.hasOwnProperty(w)&&o!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:on(e,t,w,null,l,o)}for(h in l)if(o=l[h],s=n[h],l.hasOwnProperty(h)&&(o!=null||s!=null))switch(h){case"value":le=o;break;case"defaultValue":re=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(u(91));break;default:o!==s&&on(e,t,h,o,l,s)}Vs(e,le,re);return;case"option":for(var Le in n)if(le=n[Le],n.hasOwnProperty(Le)&&le!=null&&!l.hasOwnProperty(Le))switch(Le){case"selected":e.selected=!1;break;default:on(e,t,Le,null,l,le)}for(B in l)if(le=l[B],re=n[B],l.hasOwnProperty(B)&&le!==re&&(le!=null||re!=null))switch(B){case"selected":e.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:on(e,t,B,le,l,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in n)le=n[dt],n.hasOwnProperty(dt)&&le!=null&&!l.hasOwnProperty(dt)&&on(e,t,dt,null,l,le);for(te in l)if(le=l[te],re=n[te],l.hasOwnProperty(te)&&le!==re&&(le!=null||re!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(u(137,t));break;default:on(e,t,te,le,l,re)}return;default:if(ve(t)){for(var sn in n)le=n[sn],n.hasOwnProperty(sn)&&le!==void 0&&!l.hasOwnProperty(sn)&&Zu(e,t,sn,void 0,l,le);for(fe in l)le=l[fe],re=n[fe],!l.hasOwnProperty(fe)||le===re||le===void 0&&re===void 0||Zu(e,t,fe,le,l,re);return}}for(var I in n)le=n[I],n.hasOwnProperty(I)&&le!=null&&!l.hasOwnProperty(I)&&on(e,t,I,null,l,le);for(ye in l)le=l[ye],re=n[ye],!l.hasOwnProperty(ye)||le===re||le==null&&re==null||on(e,t,ye,le,l,re)}function Bp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],s=o.transferSize,h=o.initiatorType,w=o.duration;if(s&&w&&Bp(h)){for(h=0,w=o.responseEnd,l+=1;l<n.length;l++){var B=n[l],te=B.startTime;if(te>w)break;var fe=B.transferSize,ye=B.initiatorType;fe&&Bp(ye)&&(B=B.responseEnd,h+=fe*(B<w?1:(w-te)/(B-te)))}if(--l,t+=8*(s+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Qu=null,Ku=null;function Xd(e){return e.nodeType===9?e:e.ownerDocument}function Up(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ju(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ef=null;function ng(){var e=window.event;return e&&e.type==="popstate"?e===ef?!1:(ef=e,!0):(ef=null,!1)}var Pp=typeof setTimeout=="function"?setTimeout:void 0,ig=typeof clearTimeout=="function"?clearTimeout:void 0,_p=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof _p<"u"?function(e){return _p.resolve(null).then(e).catch(ag)}:Pp;function ag(e){setTimeout(function(){throw e})}function As(e){return e==="head"}function Op(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),gc(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")td(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,td(n);for(var s=n.firstChild;s;){var h=s.nextSibling,w=s.nodeName;s[uo]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=h}}else n==="body"&&td(e.ownerDocument.body);n=o}while(n);gc(t)}function Hp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function tf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":tf(n),hn(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function og(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[uo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=da(e.nextSibling),e===null)break}return null}function sg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=da(e.nextSibling),e===null))return null;return e}function Ep(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=da(e.nextSibling),e===null))return null;return e}function nf(e){return e.data==="$?"||e.data==="$~"}function lf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function da(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var af=null;function Vp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return da(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Ip(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Wp(e,t,n){switch(t=Xd(n),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function td(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);hn(e)}var ua=new Map,$p=new Set;function Gd(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $o=Y.d;Y.d={f:cg,r:dg,D:ug,C:fg,L:pg,m:hg,X:xg,S:gg,M:yg};function cg(){var e=$o.f(),t=Ed();return e||t}function dg(e){var t=$l(e);t!==null&&t.tag===5&&t.type==="form"?x(t):$o.r(e)}var fc=typeof document>"u"?null:document;function Fp(e,t,n){var l=fc;if(l&&typeof t=="string"&&t){var o=bi(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),$p.has(o)||($p.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),ji(t,"link",e),mn(t),l.head.appendChild(t)))}}function ug(e){$o.D(e),Fp("dns-prefetch",e,null)}function fg(e,t){$o.C(e,t),Fp("preconnect",e,t)}function pg(e,t,n){$o.L(e,t,n);var l=fc;if(l&&e&&t){var o='link[rel="preload"][as="'+bi(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+bi(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+bi(n.imageSizes)+'"]')):o+='[href="'+bi(e)+'"]';var s=o;switch(t){case"style":s=pc(e);break;case"script":s=hc(e)}ua.has(s)||(e=we({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ua.set(s,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(nd(s))||t==="script"&&l.querySelector(id(s))||(t=l.createElement("link"),ji(t,"link",e),mn(t),l.head.appendChild(t)))}}function hg(e,t){$o.m(e,t);var n=fc;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+bi(l)+'"][href="'+bi(e)+'"]',s=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=hc(e)}if(!ua.has(s)&&(e=we({rel:"modulepreload",href:e},t),ua.set(s,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(id(s)))return}l=n.createElement("link"),ji(l,"link",e),mn(l),n.head.appendChild(l)}}}function gg(e,t,n){$o.S(e,t,n);var l=fc;if(l&&e){var o=Fl(l).hoistableStyles,s=pc(e);t=t||"default";var h=o.get(s);if(!h){var w={loading:0,preload:null};if(h=l.querySelector(nd(s)))w.loading=5;else{e=we({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ua.get(s))&&of(e,n);var B=h=l.createElement("link");mn(B),ji(B,"link",e),B._p=new Promise(function(te,fe){B.onload=te,B.onerror=fe}),B.addEventListener("load",function(){w.loading|=1}),B.addEventListener("error",function(){w.loading|=2}),w.loading|=4,qd(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:w},o.set(s,h)}}}function xg(e,t){$o.X(e,t);var n=fc;if(n&&e){var l=Fl(n).hoistableScripts,o=hc(e),s=l.get(o);s||(s=n.querySelector(id(o)),s||(e=we({src:e,async:!0},t),(t=ua.get(o))&&sf(e,t),s=n.createElement("script"),mn(s),ji(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function yg(e,t){$o.M(e,t);var n=fc;if(n&&e){var l=Fl(n).hoistableScripts,o=hc(e),s=l.get(o);s||(s=n.querySelector(id(o)),s||(e=we({src:e,async:!0,type:"module"},t),(t=ua.get(o))&&sf(e,t),s=n.createElement("script"),mn(s),ji(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function Yp(e,t,n,l){var o=(o=lt.current)?Gd(o):null;if(!o)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=pc(n.href),n=Fl(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=pc(n.href);var s=Fl(o).hoistableStyles,h=s.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,h),(s=o.querySelector(nd(e)))&&!s._p&&(h.instance=s,h.state.loading=5),ua.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ua.set(e,n),s||bg(o,e,n,h.state))),t&&l===null)throw Error(u(528,""));return h}if(t&&l!==null)throw Error(u(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=hc(n),n=Fl(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function pc(e){return'href="'+bi(e)+'"'}function nd(e){return'link[rel="stylesheet"]['+e+"]"}function Lp(e){return we({},e,{"data-precedence":e.precedence,precedence:null})}function bg(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ji(t,"link",n),mn(t),e.head.appendChild(t))}function hc(e){return'[src="'+bi(e)+'"]'}function id(e){return"script[async]"+e}function Xp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+bi(n.href)+'"]');if(l)return t.instance=l,mn(l),l;var o=we({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),mn(l),ji(l,"style",o),qd(l,n.precedence,e),t.instance=l;case"stylesheet":o=pc(n.href);var s=e.querySelector(nd(o));if(s)return t.state.loading|=4,t.instance=s,mn(s),s;l=Lp(n),(o=ua.get(o))&&of(l,o),s=(e.ownerDocument||e).createElement("link"),mn(s);var h=s;return h._p=new Promise(function(w,B){h.onload=w,h.onerror=B}),ji(s,"link",l),t.state.loading|=4,qd(s,n.precedence,e),t.instance=s;case"script":return s=hc(n.src),(o=e.querySelector(id(s)))?(t.instance=o,mn(o),o):(l=n,(o=ua.get(s))&&(l=we({},n),sf(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),mn(o),ji(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,qd(l,n.precedence,e));return t.instance}function qd(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,s=o,h=0;h<l.length;h++){var w=l[h];if(w.dataset.precedence===t)s=w;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function of(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Zd=null;function Gp(e,t,n){if(Zd===null){var l=new Map,o=Zd=new Map;o.set(n,l)}else o=Zd,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var s=n[o];if(!(s[uo]||s[Un]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var h=s.getAttribute(t)||"";h=e+h;var w=l.get(h);w?w.push(s):l.set(h,[s])}}return l}function qp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function vg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Zp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mg(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=pc(l.href),s=t.querySelector(nd(o));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Qd.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,mn(s);return}s=t.ownerDocument||t,l=Lp(l),(o=ua.get(o))&&of(l,o),s=s.createElement("link"),mn(s);var h=s;h._p=new Promise(function(w,B){h.onload=w,h.onerror=B}),ji(s,"link",l),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Qd.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var rf=0;function Sg(e,t){return e.stylesheets&&e.count===0&&Jd(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&Jd(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&rf===0&&(rf=62500*tg());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Jd(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>rf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function Qd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kd=null;function Jd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kd=new Map,t.forEach(wg,e),Kd=null,Qd.call(e))}function wg(e,t){if(!(t.state.loading&4)){var n=Kd.get(e);if(n)var l=n.get(null);else{n=new Map,Kd.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var h=o[s];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),l=h)}l&&n.set(null,l)}o=t.instance,h=o.getAttribute("data-precedence"),s=n.get(h)||l,s===l&&n.set(null,o),n.set(h,o),this.count++,l=Qd.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),s?s.parentNode.insertBefore(o,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var ld={$$typeof:Z,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function Tg(e,t,n,l,o,s,h,w,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xa(0),this.hiddenUpdates=xa(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Qp(e,t,n,l,o,s,h,w,B,te,fe,ye){return e=new Tg(e,t,n,h,B,te,fe,ye,w),t=1,s===!0&&(t|=24),s=si(3,null,null,t),e.current=s,s.stateNode=e,t=Ka(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:n,cache:t},to(s),e}function Kp(e){return e?(e=kl,e):kl}function Jp(e,t,n,l,o,s){o=Kp(o),l.context===null?l.context=o:l.pendingContext=o,l=ul(t),l.payload={element:n},s=s===void 0?null:s,s!==null&&(l.callback=s),n=Bl(e,l,t),n!==null&&(yl(n,e,t),no(n,e,t))}function eh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function cf(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function th(e){if(e.tag===13||e.tag===31){var t=Zl(e,67108864);t!==null&&yl(t,e,67108864),cf(e,67108864)}}function nh(e){if(e.tag===13||e.tag===31){var t=_l();t=$i(t);var n=Zl(e,t);n!==null&&yl(n,e,t),cf(e,t)}}var eu=!0;function jg(e,t,n,l){var o=ne.T;ne.T=null;var s=Y.p;try{Y.p=2,df(e,t,n,l)}finally{Y.p=s,ne.T=o}}function zg(e,t,n,l){var o=ne.T;ne.T=null;var s=Y.p;try{Y.p=8,df(e,t,n,l)}finally{Y.p=s,ne.T=o}}function df(e,t,n,l){if(eu){var o=uf(l);if(o===null)qu(e,t,l,tu,n),lh(e,l);else if(kg(o,e,t,n,l))l.stopPropagation();else if(lh(e,l),t&4&&-1<Cg.indexOf(e)){for(;o!==null;){var s=$l(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var h=Vl(s.pendingLanes);if(h!==0){var w=s;for(w.pendingLanes|=2,w.entangledLanes|=2;h;){var B=1<<31-be(h);w.entanglements[1]|=B,h&=~B}co(s),(Kt&6)===0&&(Od=hi()+500,Kc(0))}}break;case 31:case 13:w=Zl(s,2),w!==null&&yl(w,s,2),Ed(),cf(s,2)}if(s=uf(l),s===null&&qu(e,t,l,tu,n),s===o)break;o=s}o!==null&&l.stopPropagation()}else qu(e,t,l,null,n)}}function uf(e){return e=Ut(e),ff(e)}var tu=null;function ff(e){if(tu=null,e=$a(e),e!==null){var t=L(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=je(t),e!==null)return e;e=null}else if(n===31){if(e=ze(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return tu=e,null}function ih(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case jt:return 2;case br:return 8;case Ie:case Vt:return 32;case pa:return 268435456;default:return 32}default:return 32}}var pf=!1,Ns=null,Bs=null,Us=null,ad=new Map,od=new Map,Ms=[],Cg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lh(e,t){switch(e){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":ad.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":od.delete(t.pointerId)}}function sd(e,t,n,l,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[o]},t!==null&&(t=$l(t),t!==null&&th(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function kg(e,t,n,l,o){switch(t){case"focusin":return Ns=sd(Ns,e,t,n,l,o),!0;case"dragenter":return Bs=sd(Bs,e,t,n,l,o),!0;case"mouseover":return Us=sd(Us,e,t,n,l,o),!0;case"pointerover":var s=o.pointerId;return ad.set(s,sd(ad.get(s)||null,e,t,n,l,o)),!0;case"gotpointercapture":return s=o.pointerId,od.set(s,sd(od.get(s)||null,e,t,n,l,o)),!0}return!1}function ah(e){var t=$a(e.target);if(t!==null){var n=L(t);if(n!==null){if(t=n.tag,t===13){if(t=je(n),t!==null){e.blockedOn=t,Hs(e.priority,function(){nh(n)});return}}else if(t===31){if(t=ze(n),t!==null){e.blockedOn=t,Hs(e.priority,function(){nh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=uf(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);wt=l,n.target.dispatchEvent(l),wt=null}else return t=$l(n),t!==null&&th(t),e.blockedOn=n,!1;t.shift()}return!0}function oh(e,t,n){nu(e)&&n.delete(t)}function Rg(){pf=!1,Ns!==null&&nu(Ns)&&(Ns=null),Bs!==null&&nu(Bs)&&(Bs=null),Us!==null&&nu(Us)&&(Us=null),ad.forEach(oh),od.forEach(oh)}function iu(e,t){e.blockedOn===t&&(e.blockedOn=null,pf||(pf=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Rg)))}var lu=null;function sh(e){lu!==e&&(lu=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){lu===e&&(lu=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(ff(l||n)===null)continue;break}var s=$l(n);s!==null&&(e.splice(t,3),t-=3,r(s,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function gc(e){function t(B){return iu(B,e)}Ns!==null&&iu(Ns,e),Bs!==null&&iu(Bs,e),Us!==null&&iu(Us,e),ad.forEach(t),od.forEach(t);for(var n=0;n<Ms.length;n++){var l=Ms[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ms.length&&(n=Ms[0],n.blockedOn===null);)ah(n),n.blockedOn===null&&Ms.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],s=n[l+1],h=o[Jn]||null;if(typeof s=="function")h||sh(n);else if(h){var w=null;if(s&&s.hasAttribute("formAction")){if(o=s,h=s[Jn]||null)w=h.formAction;else if(ff(o)!==null)continue}else w=h.action;typeof w=="function"?n[l+1]=w:(n.splice(l,3),l-=3),sh(n)}}}function rh(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function hf(e){this._internalRoot=e}au.prototype.render=hf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var n=t.current,l=_l();Jp(n,l,e,t,null,null)},au.prototype.unmount=hf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jp(e.current,2,null,e,null,null),Ed(),t[zt]=null}};function au(e){this._internalRoot=e}au.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ms.length&&t!==0&&t<Ms[n].priority;n++);Ms.splice(n,0,e),n===0&&ah(e)}};var ch=d.version;if(ch!=="19.2.0")throw Error(u(527,ch,"19.2.0"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=O(t),e=e!==null?pe(e):null,e=e===null?null:e.stateNode,e};var Dg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{Nn=ou.inject(Dg),gn=ou}catch{}}return cd.createRoot=function(e,t){if(!U(e))throw Error(u(299));var n=!1,l="",o=M,s=A,h=ce;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Qp(e,1,!1,null,null,n,l,null,o,s,h,rh),e[zt]=t.current,Gu(e),new hf(t)},cd.hydrateRoot=function(e,t,n){if(!U(e))throw Error(u(299));var l=!1,o="",s=M,h=A,w=ce,B=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(w=n.onRecoverableError),n.formState!==void 0&&(B=n.formState)),t=Qp(e,1,!0,t,n??null,l,o,B,s,h,w,rh),t.context=Kp(null),n=t.current,l=_l(),l=$i(l),o=ul(l),o.callback=null,Bl(n,o,l),n=l,t.current.lanes=n,zi(t,n),co(t),e[zt]=t.current,Gu(e),new au(t)},cd.version="19.2.0",cd}var vh;function Vg(){if(vh)return yf.exports;vh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),yf.exports=Eg(),yf.exports}var Ig=Vg();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$g=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(d,y,u)=>u?u.toUpperCase():y.toLowerCase()),mh=c=>{const d=$g(c);return d.charAt(0).toUpperCase()+d.slice(1)},zh=(...c)=>c.filter((d,y,u)=>!!d&&d.trim()!==""&&u.indexOf(d)===y).join(" ").trim(),Fg=c=>{for(const d in c)if(d.startsWith("aria-")||d==="role"||d==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=j.forwardRef(({color:c="currentColor",size:d=24,strokeWidth:y=2,absoluteStrokeWidth:u,className:U="",children:L,iconNode:je,...ze},g)=>j.createElement("svg",{ref:g,...Yg,width:d,height:d,stroke:c,strokeWidth:u?Number(y)*24/Number(d):y,className:zh("lucide",U),...!L&&!Fg(ze)&&{"aria-hidden":"true"},...ze},[...je.map(([O,pe])=>j.createElement(O,pe)),...Array.isArray(L)?L:[L]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=(c,d)=>{const y=j.forwardRef(({className:u,...U},L)=>j.createElement(Lg,{ref:L,iconNode:d,className:zh(`lucide-${Wg(mh(c))}`,`lucide-${c}`,u),...U}));return y.displayName=mh(c),y};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Gg=Ch("mouse-pointer",Xg);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Zg=Ch("pen-line",qg),Sf="#2CA02C",Qg="#F0E442",Kg="#00BFC4",wf="#000000",Jg="#00008b",Tf="#FF0000",kh={DEFAULT_SIZE:18},fd={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},"Film Capacitor":{prefix:["C","CF"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},ex={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Film:["Film Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},jf={DEFAULT_SIZE:18},Rh={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function $t(c){return Rh[c]?.validUnits||[]}function Fe(c){return Rh[c]?.defaultUnit||""}function ud(c){return c.includes(" ")?c:c.replace(/([a-z])([A-Z])/g,"$1 $2")}let mc=1,du=Promise.resolve(0);function Vi(){let c;du=du.then(y=>(c=y+1,mc=c+1,c));const d=mc;return mc=d+1,d}function su(c){du=du.then(()=>(mc=c,c-1)),mc=c}function Sh(){return mc}function tx(c="id"){return`${c}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function wh(c){return Math.round(c*1e4)/1e4}function Ot(c){return{x:wh(c.x),y:wh(c.y)}}function nx(c){return fd[c]?.defaultPins||2}function cu(c){return(fd[c]?.prefix||["?"])[0]}function ix(c,d,y,u,U,L=kh.DEFAULT_SIZE,je=[],ze=bc(),g=!0){let O="";if(g){const Te=cu(c),We=lx(Te,je,ze);O=`${Te}${We}`}const pe={id:tx("comp"),componentType:c,designator:O,layer:d,x:y,y:u,color:U,size:L,pinCount:nx(c),pinConnections:[],orientation:0};switch(pe.pinConnections=new Array(pe.pinCount).fill(""),(c==="Electrolytic Capacitor"||c==="Diode"||c==="Battery"||c==="ZenerDiode")&&(pe.pinPolarities=new Array(pe.pinCount).fill("")),c){case"Battery":return{...pe,componentType:"Battery"};case"Capacitor":return{...pe,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...pe,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Diode":return{...pe,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...pe,componentType:"Fuse"};case"FerriteBead":return{...pe,componentType:"FerriteBead"};case"Connector":return{...pe,componentType:"Connector",gender:"N/A"};case"Jumper":return{...pe,componentType:"Jumper"};case"Relay":return{...pe,componentType:"Relay"};case"Inductor":return{...pe,componentType:"Inductor"};case"Speaker":return{...pe,componentType:"Speaker"};case"Motor":return{...pe,componentType:"Motor"};case"PowerSupply":return{...pe,componentType:"PowerSupply"};case"Transistor":return{...pe,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...pe,componentType:"Resistor"};case"ResistorNetwork":return{...pe,componentType:"ResistorNetwork"};case"Thermistor":return{...pe,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...pe,componentType:"Switch"};case"Transformer":return{...pe,componentType:"Transformer"};case"TestPoint":return{...pe,componentType:"TestPoint"};case"IntegratedCircuit":return{...pe,componentType:"IntegratedCircuit"};case"VacuumTube":return{...pe,componentType:"VacuumTube"};case"VariableResistor":return{...pe,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...pe,componentType:"Crystal"};case"ZenerDiode":return{...pe,componentType:"ZenerDiode"};default:return{...pe,componentType:"Resistor"}}}function Cf(c,d,y){const u=c.componentType==="Electrolytic Capacitor"||c.componentType==="Diode"||c.componentType==="Battery"||c.componentType==="ZenerDiode",U=c.componentType==="Capacitor"&&"dielectric"in c&&c.dielectric==="Tantalum";if(!(u||U)||c.pinCount!==2||!(d.length===2&&d[0]&&d[0].trim()!==""&&d[1]&&d[1].trim()!==""))return null;const je=Te=>{const We=parseInt(Te,10);if(isNaN(We))return null;for(const K of y)if((K.type==="via"||K.type==="pad")&&K.points.length>0){const ke=K.points[0];if(ke.id===We)return{x:ke.x,y:ke.y}}return null},ze=je(d[0]),g=je(d[1]);if(!ze||!g)return null;const O=Math.hypot(c.x-ze.x,c.y-ze.y),pe=Math.hypot(c.x-g.x,c.y-g.y),we=["",""];return O<pe?(we[0]="-",we[1]="+"):(we[0]="+",we[1]="-"),we}const Dh="designatorCounters";function bc(){try{const c=localStorage.getItem(Dh);if(c)return JSON.parse(c)}catch(c){console.warn("Failed to load designator counters from localStorage:",c)}return{}}function ru(c){try{localStorage.setItem(Dh,JSON.stringify(c))}catch(d){console.warn("Failed to save designator counters to localStorage:",d)}}function lx(c,d,y){let u=0;for(const L of d)if(L.designator){const je=L.designator.match(new RegExp(`^${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(je){const ze=parseInt(je[1],10);ze>u&&(u=ze)}}const U=y[c]||0;return Math.max(u,U)+1}function ax(c,d,y){const u={...y};return u[c]=Math.max(u[c]||0,d),u}function ox(){const c=document.createElement("canvas"),d=24;c.width=d,c.height=d;const y=c.getContext("2d");y.strokeStyle="#000",y.lineWidth=3,y.lineCap="round";const u=d/2,U=8;return y.beginPath(),y.moveTo(u,u-U),y.lineTo(u,u-2),y.moveTo(u,u+2),y.lineTo(u,u+U),y.moveTo(u-U,u),y.lineTo(u-2,u),y.moveTo(u+2,u),y.lineTo(u+U,u),y.stroke(),`url(${c.toDataURL()}) ${u} ${u}, crosshair`}function sx(c){const d=document.createElement("canvas"),y=Math.max(12,Math.min(c,32)),U=y+4*2;d.width=U,d.height=U;const L=d.getContext("2d"),je=U/2,ze=U/2,g=y/2;return L.fillStyle="#FFFF00",L.strokeStyle="#000000",L.lineWidth=2,L.beginPath(),L.moveTo(je,ze-g),L.lineTo(je+g,ze),L.lineTo(je,ze+g),L.lineTo(je-g,ze),L.closePath(),L.fill(),L.stroke(),`url(${d.toDataURL()}) ${je} ${ze}, crosshair`}function rx(){const c=new Date,d=c.getFullYear(),y=String(c.getMonth()+1).padStart(2,"0"),u=String(c.getDate()).padStart(2,"0"),U=String(c.getHours()).padStart(2,"0"),L=String(c.getMinutes()).padStart(2,"0"),je=String(c.getSeconds()).padStart(2,"0");return`${d}_${y}_${u}-${U}-${L}-${je}`}function xc(c){let d=c.replace(/\.json$/i,""),y="";for(;y!==d;)y=d,d=d.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),d=d.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return d}const zf=c=>{const d=fd[c];return!d||!d.prefix||d.prefix.length<1?"?":d.prefix[0].substring(0,1).toUpperCase()},fa=(c,d,y)=>({color:d,size:y}),Th=(c,d,y)=>{},zn=(c,d,y,u)=>({color:y,size:u}),yc=(c,d,y,u)=>{},cx=()=>{const c=new Map,d={top:"#0072B2",bottom:"#56B4E9"},y={top:18,bottom:18},u={top:"#FFFF00",bottom:"#FFFF00"},U={top:18,bottom:18},L={top:"#AA4499",bottom:"#F781BF"},je={top:6,bottom:6},ze={top:"#6A3D9A",bottom:"#9467BD"},g={top:18,bottom:18};return c.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:fa("select","#ff0000",10),layerSettings:new Map([["top",zn("select","top","#ff0000",10)],["bottom",zn("select","bottom","#ff0000",10)]])}),c.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:fa("via",Sf,jf.DEFAULT_SIZE),layerSettings:new Map([["top",zn("via","top",Sf,jf.DEFAULT_SIZE)],["bottom",zn("via","bottom",Sf,jf.DEFAULT_SIZE)]]),defaultLayer:"top"}),c.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:fa("pad",Jg,18),layerSettings:new Map([["top",zn("pad","top",d.top,y.top)],["bottom",zn("pad","bottom",d.bottom,y.bottom)]]),defaultLayer:"top"}),c.set("testPoint",{id:"testPoint",name:"Test Point",toolType:"draw",drawingMode:"testPoint",icon:"",shortcut:"Y",tooltip:"Place test point",colorReflective:!0,settings:fa("testPoint","#FFFF00",18),layerSettings:new Map([["top",zn("testPoint","top",u.top,U.top)],["bottom",zn("testPoint","bottom",u.bottom,U.bottom)]]),defaultLayer:"top"}),c.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:fa("trace",Qg,6),layerSettings:new Map([["top",zn("trace","top",L.top,je.top)],["bottom",zn("trace","bottom",L.bottom,je.bottom)]]),defaultLayer:"top"}),c.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:fa("component",Kg,kh.DEFAULT_SIZE),layerSettings:new Map([["top",zn("component","top",ze.top,g.top)],["bottom",zn("component","bottom",ze.bottom,g.bottom)]]),defaultLayer:"top"}),c.set("componentConnection",{id:"componentConnection",name:"Component Connections",toolType:"componentConnection",icon:"",shortcut:"",tooltip:"Component connection lines",colorReflective:!1,settings:fa("componentConnection","#E69F00",3),layerSettings:new Map([["top",zn("componentConnection","top","#E69F00",3)],["bottom",zn("componentConnection","bottom","#E69F00",3)]])}),c.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:fa("power",Tf,18),layerSettings:new Map([["top",zn("power","top",Tf,18)],["bottom",zn("power","bottom",Tf,18)]]),defaultLayer:"top"}),c.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:fa("ground",wf,18),layerSettings:new Map([["top",zn("ground","top",wf,18)],["bottom",zn("ground","bottom",wf,18)]]),defaultLayer:"top"}),c.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:fa("erase","#f5a3b3",18),layerSettings:new Map([["top",zn("erase","top","#f5a3b3",18)],["bottom",zn("erase","bottom","#f5a3b3",18)]])}),c.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:fa("pan","#ff0000",10),layerSettings:new Map([["top",zn("pan","top","#ff0000",10)],["bottom",zn("pan","bottom","#ff0000",10)]])}),c.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:fa("magnify","#ff0000",10),layerSettings:new Map([["top",zn("magnify","top","#ff0000",10)],["bottom",zn("magnify","bottom","#ff0000",10)]])}),c},jh={via:{color:"#2CA02C",size:18},padTop:{color:"#0072B2",size:18},padBottom:{color:"#56B4E9",size:18},testPointTop:{color:"#FFFF00",size:18},testPointBottom:{color:"#FFFF00",size:18},traceTop:{color:"#AA4499",size:6},traceBottom:{color:"#F781BF",size:6},componentTop:{color:"#6A3D9A",size:18},componentBottom:{color:"#9467BD",size:18},power:{color:"#ff0000",size:18},ground:{color:"#000000",size:18}},dd={via:"Via",padTop:"Pad (Top)",padBottom:"Pad (Bottom)",testPointTop:"Test Point (Top)",testPointBottom:"Test Point (Bottom)",traceTop:"Trace (Top)",traceBottom:"Trace (Bottom)",componentTop:"Component (Top)",componentBottom:"Component (Bottom)",power:"Power",ground:"Ground"};class dx{instances=new Map;listeners=new Map;initialize(){for(const d of Object.keys(jh)){const y=jh[d];this.instances.set(d,{id:d,name:dd[d],color:y.color,size:y.size}),this.listeners.set(d,new Set)}}initializeFromProject(d){if(this.initialize(),d?.toolInstances)for(const[y,u]of Object.entries(d.toolInstances))this.instances.has(y)&&this.instances.set(y,u)}get(d){const y=this.instances.get(d);if(!y)throw new Error(`Tool instance ${d} not found`);return y}getColor(d){const y=this.instances.get(d);if(!y)throw new Error(`Tool instance ${d} not found`);const u=dd[d];return console.log(`${u}, returning color value=${y.color}`),y.color}getSize(d){const y=this.instances.get(d);if(!y)throw new Error(`Tool instance ${d} not found`);const u=dd[d];return console.log(`${u}, returning size value=${y.size}`),y.size}setColor(d,y){const u=this.instances.get(d);if(u){const U=dd[d];console.log(`${U}, setting color value=${y}`),u.color=y,this.notifyListeners(d)}}setSize(d,y){const u=this.instances.get(d);if(u){const U=dd[d];console.log(`${U}, setting size value=${y}`),u.size=y,this.notifyListeners(d)}}getAll(){const d={};for(const[y,u]of this.instances.entries())d[y]=u;return d}subscribe(d,y){const u=this.listeners.get(d);return u?(u.add(y),()=>{u.delete(y)}):()=>{}}notifyListeners(d){const y=this.listeners.get(d);y&&y.forEach(u=>u())}}const bt=new dx;bt.initialize();function vc(c,d){switch(c){case"via":return"via";case"pad":return d==="bottom"?"padBottom":"padTop";case"testPoint":return d==="bottom"?"testPointBottom":"testPointTop";case"trace":return d==="bottom"?"traceBottom":"traceTop";case"component":return d==="bottom"?"componentBottom":"componentTop";case"power":return"power";case"ground":return"ground";default:throw new Error(`Unknown tool: ${c}`)}}const ux=({visible:c,toolRegistry:d,currentTool:y,drawingMode:u,traceToolLayer:U,padToolLayer:L,testPointToolLayer:je,componentToolLayer:ze,updateToolSettings:g,updateToolLayerSettings:O,setBrushSize:pe,saveToolSettings:we,saveToolLayerSettings:Te,setTopTraceSize:We,setBottomTraceSize:K,setTopPadSize:ke,setBottomPadSize:_e,setTopTestPointSize:he,setBottomTestPointSize:N,setTopComponentSize:Z,setBottomComponentSize:st,setComponentConnectionSize:F,saveDefaultSize:D,onClose:k})=>{if(!c)return null;const R=Array.from({length:50},(G,Ne)=>Ne+1),m=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],de=(G,Ne,$e)=>{const Ke=d.get(G);if(!Ke)return;if(["trace","pad","testPoint","component"].includes(G)&&$e){Ke.layerSettings.get($e);const ne=vc(G,$e);bt.setSize(ne,Ne),(G==="trace"&&y==="draw"&&u==="trace"||G==="pad"&&y==="draw"&&u==="pad"||G==="testPoint"&&y==="draw"&&u==="testPoint"||G==="component"&&y==="component")&&((G==="trace"?U:G==="pad"?L:G==="testPoint"?je:ze)||"top")===$e&&pe(Ne)}else{const ne=vc(G);ne&&(bt.setSize(ne,Ne),(G==="via"&&y==="draw"&&u==="via"||G==="power"&&y==="power"||G==="ground"&&y==="ground")&&pe(Ne)),G==="componentConnection"&&(F(Ne),D("componentConnection",Ne)),G==="erase"&&y==="erase"&&pe(Ne)}};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:G=>{G.target===G.currentTarget&&k()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",maxWidth:"400px",maxHeight:"70vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:G=>G.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Size"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:m.map((G,Ne)=>{const $e=d.get(G.id);if(!$e)return null;const Ke=G.layer?`${G.name} (${G.layer==="top"?"Top":"Bottom"})`:G.name,Oe=G.layer?$e.layerSettings.get(G.layer)?.size??$e.settings.size??10:$e.settings.size??10;return i.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[i.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[Ke,":"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("select",{value:Oe,onChange:ne=>{const Y=parseInt(ne.target.value,10);de(G.id,Y,G.layer)},style:{width:"50px",padding:"4px 6px",background:"#2b2b31",border:"1px solid #3a3a44",borderRadius:4,color:"#f2f2f2",fontSize:"12px",cursor:"pointer"},children:R.map(ne=>i.jsx("option",{value:ne,style:{background:"#2b2b31",color:"#f2f2f2"},children:ne},ne))}),i.jsx("span",{style:{color:"#f2f2f2",fontSize:"12px"},children:"px"})]})]},`${G.id}-${G.layer||"default"}-${Ne}`)})}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:k,style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},fx=({visible:c,toolRegistry:d,currentTool:y,drawingMode:u,traceToolLayer:U,padToolLayer:L,testPointToolLayer:je,componentToolLayer:ze,updateToolSettings:g,updateToolLayerSettings:O,saveToolSettings:pe,saveToolLayerSettings:we,setBrushColor:Te,setTopTraceColor:We,setBottomTraceColor:K,setTopPadColor:ke,setBottomPadColor:_e,setTopTestPointColor:he,setBottomTestPointColor:N,setTopComponentColor:Z,setBottomComponentColor:st,setComponentConnectionColor:F,saveDefaultColor:D,colorPalette:k,onClose:R})=>{const[m,de]=Ue.useState(null),[G,Ne]=Ue.useState(0);if(Ue.useEffect(()=>{const Y=[];return[{id:"via"},{id:"pad",layer:"top"},{id:"pad",layer:"bottom"},{id:"testPoint",layer:"top"},{id:"testPoint",layer:"bottom"},{id:"trace",layer:"top"},{id:"trace",layer:"bottom"},{id:"component",layer:"top"},{id:"component",layer:"bottom"},{id:"power"},{id:"ground"}].forEach(({id:De,layer:V})=>{try{const z=vc(De,V),_=bt.subscribe(z,()=>{Ne(ie=>ie+1)});Y.push(_)}catch{}}),()=>{Y.forEach(De=>De())}},[]),!c)return null;const $e=["pad","testPoint","trace","component"],Ke=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],Oe=(Y,oe,De)=>{if(Y==="componentConnection"){F(oe),D("componentConnection",oe),de(null);return}if(Y==="erase"){const V=d.get(Y);V&&(g(Y,{...V.settings,color:oe}),pe(Y,oe,V.settings.size)),de(null);return}try{let V;De&&$e.includes(Y)?V=vc(Y,De):V=vc(Y),bt.setColor(V,oe),(Y==="via"&&y==="draw"&&u==="via"||Y==="trace"&&y==="draw"&&u==="trace"||Y==="pad"&&y==="draw"&&u==="pad"||Y==="testPoint"&&y==="draw"&&u==="testPoint"||Y==="component"&&y==="component"||Y==="power"&&y==="power"||Y==="ground"&&y==="ground")&&(De&&$e.includes(Y)?((Y==="trace"?U:Y==="pad"?L:Y==="testPoint"?je:ze)||"top")===De&&Te(oe):Te(oe))}catch(V){console.error(`Error updating color for tool ${Y}:`,V);const z=d.get(Y);z&&(De&&$e.includes(Y)?(O(Y,De,{...z.layerSettings.get(De),color:oe}),we(Y,De,oe,z.layerSettings.get(De)?.size||z.settings.size)):(g(Y,{...z.settings,color:oe}),pe(Y,oe,z.settings.size)))}de(null)},ne=(Y,oe)=>{let De;try{const _=vc(Y,oe);De=bt.get(_).color}catch{const _=d.get(Y);if(!_)return null;De=_.settings.color??"#000000"}const V=oe?`${Y}-${oe}`:Y,z=m?.toolId===Y&&m?.layer===oe;return i.jsxs("div",{style:{position:"relative",display:"inline-block",zIndex:10005},children:[i.jsx("button",{className:"color-swatch-button",onClick:_=>{_.stopPropagation(),de(z?null:{toolId:Y,layer:oe})},style:{width:"40px",height:"24px",background:De,backgroundColor:De,backgroundImage:"none",border:"1px solid #3a3a44",borderRadius:3,cursor:"pointer",padding:0,margin:0,display:"block","--swatch-color":De},title:De},`${V}-button-${De}-${G}`),z&&i.jsx("div",{onClick:_=>{_.stopPropagation()},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:100},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:k.map(_=>i.jsx("div",{onClick:()=>Oe(Y,_,oe),title:_,style:{width:22,height:22,backgroundColor:_,border:_===De?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},_))})})]},`${V}-${De}-${G}`)};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:Y=>{Y.target===Y.currentTarget&&(R(),de(null))},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",minWidth:"450px",maxWidth:"600px",maxHeight:"70vh",overflowY:"auto",overflowX:"visible",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:Y=>Y.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Color"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Ke.map((Y,oe)=>{if(!d.get(Y.id))return null;const V=Y.layer?`${Y.name} (${Y.layer==="top"?"Top":"Bottom"})`:Y.name;return i.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[i.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[V,":"]}),ne(Y.id,Y.layer)]},`${Y.id}-${Y.layer||"default"}-${oe}`)})}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:()=>{R(),de(null)},style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},px=({openMenu:c,setOpenMenu:d,isReadOnlyMode:y,currentProjectFilePath:u,onNewProject:U,onOpenProject:L,onSaveProject:je,onSaveAs:ze,onPrint:g,hasUnsavedChanges:O,setNewProjectDialog:pe,setAutoSaveDialog:we,topImage:Te,bottomImage:We,selectedImageForTransform:K,setSelectedImageForTransform:ke,setCurrentTool:_e,transformMode:he,setTransformMode:N,updateImageTransform:Z,resetImageTransform:st,isGrayscale:F,setIsGrayscale:D,isBlackAndWhiteEdges:k,setIsBlackAndWhiteEdges:R,isBlackAndWhiteInverted:m,setIsBlackAndWhiteInverted:de,areImagesLocked:G,setAreImagesLocked:Ne,onEnterBoardDimensions:$e,fileInputTopRef:Ke,fileInputBottomRef:Oe,openProjectRef:ne,increaseSize:Y,decreaseSize:oe,brushSize:De,drawingStrokes:V,selectedIds:z,selectedComponentIds:_,selectedPowerIds:ie,selectedGroundIds:xe,componentsTop:Ve,componentsBottom:lt,powers:ut,grounds:Dt,powerNodeNames:et,groundNodeNames:Jt,setSetSizeDialog:Ii,areViasLocked:Va,setAreViasLocked:fi,arePadsLocked:Qn,setArePadsLocked:Kn,areTestPointsLocked:el,setAreTestPointsLocked:Wi,areTracesLocked:Ol,setAreTracesLocked:pi,areComponentsLocked:bl,setAreComponentsLocked:Ia,areGroundNodesLocked:Sc,setAreGroundNodesLocked:Fo,arePowerNodesLocked:hi,setArePowerNodesLocked:qe,setSelectedIds:jt,setSelectedComponentIds:br,setSelectedPowerIds:Ie,setSelectedGroundIds:Vt,selectAllVias:pa,selectAllTraces:Yo,selectAllPads:It,selectAllComponents:Nn,selectDisconnectedComponents:gn,selectAllPowerNodes:gi,selectAllGroundNodes:be,selectPowerNodesByName:Hl,selectGroundNodesByName:gt,setShowPowerBusManager:Bn,setShowGroundBusManager:El,setShowDesignatorManager:Lo,toolRegistry:ha,updateToolSettings:Vl,updateToolLayerSettings:At,setBrushSize:Il,setBrushColor:Xo,saveToolSettings:ga,saveToolLayerSettings:xa,colorPalette:zi,currentTool:Wl,drawingMode:_s,traceToolLayer:Os,padToolLayer:Pe,testPointToolLayer:$i,componentToolLayer:vt,setTopTraceSize:Yn,setBottomTraceSize:Hs,setTopPadSize:vl,setBottomPadSize:Un,setTopTestPointSize:Jn,setBottomTestPointSize:zt,setTopComponentSize:Wa,setBottomComponentSize:en,setComponentConnectionSize:vr,topTraceColor:tn,bottomTraceColor:uo,topPadColor:hn,bottomPadColor:$a,topTestPointColor:$l,bottomTestPointColor:ya,topComponentColor:Fl,bottomComponentColor:mn,setTopTraceColor:mr,setBottomTraceColor:Mn,setTopPadColor:ba,setBottomPadColor:kt,setTopTestPointColor:Cn,setBottomTestPointColor:Fa,setTopComponentColor:Es,setBottomComponentColor:fo,setComponentConnectionColor:po,saveDefaultSize:ei,saveDefaultColor:kn,menuBarRef:xi})=>{const[ml,Pn]=Ue.useState(null),_n=Ue.useRef(null),[Yl,On]=Ue.useState(null),yi=Ue.useRef(null),[bi,En]=Ue.useState(null),Vn=Ue.useRef(null),[Go,va]=Ue.useState(!1),[Vs,Is]=Ue.useState(!1),rn=(ve,Rn)=>{const Ee=!(ve==="both"?Te&&We:(ve==="top"?Te:ve==="bottom"?We:null)!==null)||G;return i.jsxs("div",{onMouseEnter:()=>{Rn.current&&(clearTimeout(Rn.current),Rn.current=null),Pn(ve)},onMouseLeave:()=>{Pn(null)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{const ti=K==="top"||K==="bottom"?K:ve;if(ti==="both"){const ft=!Te?.flipX;Z("both",{flipX:ft})}else{const ft=ti==="top"?Te?.flipX||!1:We?.flipX||!1;Z(ti,{flipX:!ft})}Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:"Horizontal Flip"}),i.jsx("button",{onClick:()=>{const ti=K==="top"||K==="bottom"?K:ve;if(ti==="both"){const ft=!Te?.flipY;Z("both",{flipY:ft})}else{const ft=ti==="top"?Te?.flipY||!1:We?.flipY||!1;Z(ti,{flipY:!ft})}Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:"Vertical Flip"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{K==="top"||K==="bottom"||ke(ve),N("nudge"),_e("transform"),Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:[he==="nudge"&&K===ve?" ":"","Mode: Nudge"]}),i.jsxs("button",{onClick:()=>{K==="top"||K==="bottom"||ke(ve),N("scale"),_e("transform"),Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:[he==="scale"&&K===ve?" ":"","Mode: Scale"]}),i.jsxs("button",{onClick:()=>{K==="top"||K==="bottom"||ke(ve),N("rotate"),_e("transform"),Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:[he==="rotate"&&K===ve?" ":"","Mode: Rotate"]}),i.jsxs("button",{onClick:()=>{K==="top"||K==="bottom"||ke(ve),N("slant"),_e("transform"),Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:[he==="slant"&&K===ve?" ":"","Mode: Slant"]}),i.jsxs("button",{onClick:()=>{K==="top"||K==="bottom"||ke(ve),N("keystone"),_e("transform"),Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:[he==="keystone"&&K===ve?" ":"","Mode: Keystone"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{ke(ve),_e("transform"),F||k?(D(!1),R(!1),de(!1)):D(!0),Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:F||k?"Color Mode":"Grayscale Mode"}),i.jsx("button",{onClick:()=>{ke(ve),_e("transform"),k?de(ti=>!ti):(R(!0),de(!1)),Pn(null),d(null)},disabled:Ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ee?"not-allowed":"pointer"},children:k?"Invert Edges":"Black & White Edges"})]})},Sr=ve=>{const Rn=ve==="power"?et:Jt,pt=Rn.length>0,ht=ve==="power"?"Select Power Nodes":"Select Ground Nodes";return i.jsxs("div",{onMouseEnter:()=>{yi.current&&(clearTimeout(yi.current),yi.current=null),On(ve)},onMouseLeave:()=>{yi.current=window.setTimeout(()=>{On(at=>at===ve?null:at)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[ht," by Name"]}),i.jsxs("button",{onClick:()=>{ve==="power"?gi():be(),On(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",ve==="power"?"Power Nodes":"Ground Nodes"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),pt?Rn.map(at=>i.jsx("button",{onClick:()=>{ve==="power"?Hl(at):gt(at),On(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:at},at)):i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",ve==="power"?"power":"ground"," nodes available."]})]})},mt=()=>i.jsxs("div",{onMouseEnter:()=>{Vn.current&&(clearTimeout(Vn.current),Vn.current=null),En("lock")},onMouseLeave:()=>{Vn.current=window.setTimeout(()=>{En(ve=>ve==="lock"?null:ve)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("label",{onClick:ve=>{ve.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Va,onChange:()=>{fi(ve=>!ve)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Vias"})]}),i.jsxs("label",{onClick:ve=>{ve.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Qn,onChange:()=>{Kn(ve=>!ve)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Pads"})]}),i.jsxs("label",{onClick:ve=>{ve.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:el,onChange:()=>{Wi(ve=>!ve)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Test Points"})]}),i.jsxs("label",{onClick:ve=>{ve.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Ol,onChange:()=>{pi(ve=>!ve)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Traces"})]}),i.jsxs("label",{onClick:ve=>{ve.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:bl,onChange:()=>{Ia(ve=>!ve)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Components"})]}),i.jsxs("label",{onClick:ve=>{ve.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Sc,onChange:()=>{Fo(ve=>!ve)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Ground Node"})]}),i.jsxs("label",{onClick:ve=>{ve.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:hi,onChange:()=>{qe(ve=>!ve)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Power Nodes"})]})]}),St=()=>i.jsxs("div",{onMouseEnter:()=>{Vn.current&&(clearTimeout(Vn.current),Vn.current=null),En("select")},onMouseLeave:()=>{Vn.current=window.setTimeout(()=>{En(ve=>ve==="select"?null:ve)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{pa(),En(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Vias"}),i.jsx("button",{onClick:()=>{Yo(),En(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Traces"}),i.jsx("button",{onClick:()=>{It(),En(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Pads"}),i.jsx("button",{onClick:()=>{const ve=new Set(V.filter(Rn=>Rn.type==="testPoint").map(Rn=>Rn.id));jt(ve),br(new Set),Ie(new Set),Vt(new Set),En(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Test Points"}),i.jsx("button",{onClick:()=>{Nn(),En(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Components"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{yi.current&&(clearTimeout(yi.current),yi.current=null),On("power")},onMouseLeave:()=>{yi.current=window.setTimeout(()=>{On(ve=>ve==="power"?null:ve)},200)},onClick:()=>{On(ve=>ve==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Power Nodes "}),Yl==="power"&&Sr("power")]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{yi.current&&(clearTimeout(yi.current),yi.current=null),On("ground")},onMouseLeave:()=>{yi.current=window.setTimeout(()=>{On(ve=>ve==="ground"?null:ve)},200)},onClick:()=>{On(ve=>ve==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Ground Nodes "}),Yl==="ground"&&Sr("ground")]}),i.jsx("button",{onClick:()=>{gn(),En(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Disconnected Components"})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{ref:xi,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ve=>{ve.stopPropagation(),d(Rn=>Rn==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),c==="file"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{y||(d(null),O()?pe({visible:!0}):U())},disabled:y,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y?"not-allowed":"pointer"},children:"New Project"}),i.jsx("button",{onClick:async()=>{await L(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{y||(je(),d(null))},disabled:y,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y?"not-allowed":"pointer"},children:"Save Project"}),i.jsx("button",{onClick:()=>{y||(ze(),d(null))},disabled:y,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y?"not-allowed":"pointer"},children:"Save As"}),i.jsx("button",{onClick:()=>{y||(we({visible:!0,interval:5}),d(null))},disabled:y,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y?"not-allowed":"pointer"},children:"Auto Save"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{g(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),i.jsx("button",{onClick:()=>{g(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ve=>{y||(ve.stopPropagation(),d(Rn=>Rn==="transform"?null:"transform"))},disabled:y,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="transform"?"#eef3ff":"#fff",fontWeight:600,color:y?"#999":"#222",cursor:y?"not-allowed":"pointer",opacity:y?.5:1},children:"Images "}),c==="transform"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),i.jsx("button",{onClick:()=>{!y&&!G&&(Ke.current?.click(),d(null))},disabled:y||G,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y||G?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y||G?"not-allowed":"pointer"},children:"Load Top PCB"}),i.jsx("button",{onClick:()=>{!y&&!G&&(Oe.current?.click(),d(null))},disabled:y||G,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y||G?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y||G?"not-allowed":"pointer"},children:"Load Bottom PCB"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{G||($e(),d(null))},disabled:G,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:G?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:G?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!Te||G,onMouseEnter:()=>{G||(_n.current&&(clearTimeout(_n.current),_n.current=null),Pn("top"))},onMouseLeave:()=>{_n.current=setTimeout(()=>{Pn(ve=>ve==="top"?null:ve)},300)},onClick:()=>{G||(ke("top"),_e("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!Te||G?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!Te||G?"not-allowed":"pointer"},children:[K==="top"?" ":"","Top Image "]}),ml==="top"&&!G&&rn("top",_n)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!We||G,onMouseEnter:()=>{G||(_n.current&&(clearTimeout(_n.current),_n.current=null),Pn("bottom"))},onMouseLeave:()=>{_n.current=setTimeout(()=>{Pn(ve=>ve==="bottom"?null:ve)},300)},onClick:()=>{G||(ke("bottom"),_e("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!We||G?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!We||G?"not-allowed":"pointer"},children:[K==="bottom"?" ":"","Bottom Image "]}),ml==="bottom"&&!G&&rn("bottom",_n)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!Te||!We||G,onMouseEnter:()=>{G||(_n.current&&(clearTimeout(_n.current),_n.current=null),Pn("both"))},onMouseLeave:()=>{_n.current=setTimeout(()=>{Pn(ve=>ve==="both"?null:ve)},300)},onClick:()=>{G||(ke("both"),_e("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!Te||!We||G?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!Te||!We||G?"not-allowed":"pointer"},children:[K==="both"?" ":"","Both Images "]}),ml==="both"&&!G&&rn("both",_n)]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{G||(_e("transform"),st(),d(null))},disabled:G,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:G?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:G?"not-allowed":"pointer"},children:"Reset Transform"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ne(ve=>!ve),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:G?"Unlock Images ":"Lock Images"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ve=>{y||(ve.stopPropagation(),d(Rn=>Rn==="tools"?null:"tools"))},disabled:y,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="tools"?"#eef3ff":"#fff",fontWeight:600,color:y?"#999":"#222",cursor:y?"not-allowed":"pointer",opacity:y?.5:1},children:"Tools "}),c==="tools"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{Y(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),i.jsx("button",{onClick:()=>{oe(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{va(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Size"}),i.jsx("button",{onClick:()=>{Is(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Color"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{Vn.current&&(clearTimeout(Vn.current),Vn.current=null),En("lock")},onMouseLeave:()=>{Vn.current=window.setTimeout(()=>{En(ve=>ve==="lock"?null:ve)},200)},onClick:()=>{En(ve=>ve==="lock"?null:"lock")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Lock "}),bi==="lock"&&mt()]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{Vn.current&&(clearTimeout(Vn.current),Vn.current=null),En("select")},onMouseLeave:()=>{Vn.current=window.setTimeout(()=>{En(ve=>ve==="select"?null:ve)},200)},onClick:()=>{En(ve=>ve==="select"?null:"select")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select "}),bi==="select"&&St()]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Bn(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>{El(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Lo(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Designators"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ve=>{ve.stopPropagation(),d(Rn=>Rn==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),c==="about"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 16px 0",color:"#000",fontSize:"20px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"About"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images. This application supports typical 2 to 4 layer PCBs and enables comprehensive PCB analysis and documentation."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"This tool can also be used to assist in troubleshooting electronics by tracing circuits, holding contextual notes, comparing test results, and documenting findings during the debugging process."})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Technology"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"The application runs entirely client-side in the browser, to provide a responsive, interactive drawing experience with no backend server requirements."})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Features"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Tools & Shortcuts"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#222"},children:[i.jsx("div",{children:i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Select"}),"  ",i.jsx("code",{children:"S"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Via"}),"  ",i.jsx("code",{children:"V"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Pad"}),"  ",i.jsx("code",{children:"P"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Test Point"}),"  ",i.jsx("code",{children:"Y"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Trace"}),"  ",i.jsx("code",{children:"T"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component"}),"  ",i.jsx("code",{children:"C"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component Properties"}),"  double-click component"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Resize Icons"}),"  ",i.jsx("code",{children:"+"})," / ",i.jsx("code",{children:"-"})]})]})}),i.jsx("div",{children:i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Power"}),"  ",i.jsx("code",{children:"B"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Ground"}),"  ",i.jsx("code",{children:"G"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Erase"}),"  ",i.jsx("code",{children:"E"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Move (Pan)"}),"  ",i.jsx("code",{children:"H"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Zoom"}),"  ",i.jsx("code",{children:"Z"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Center"}),"  ",i.jsx("code",{children:"X"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Information Dialog"}),"  ",i.jsx("code",{children:"I"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Notes Dialog"}),"  ",i.jsx("code",{children:"N"})]})]})})]}),i.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#222"},children:[i.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600},children:"Arrow Keys"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Image Transformations"}),"  Arrow keys for scaling, rotating, and adjusting image transformations (when image is selected for transform)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components"]})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 20px"},children:[i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Image Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Load top and bottom PCB images"}),i.jsx("li",{children:"Image alignment and transformation"}),i.jsx("li",{children:"Transform modes: nudge, scale, rotate, slant, keystone"}),i.jsx("li",{children:"Horizontal and vertical flip controls"}),i.jsx("li",{children:"Grayscale and edge detection modes"}),i.jsx("li",{children:"Board dimensions configuration"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Drawing Tools"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Draw copper traces (top and bottom layers)"}),i.jsx("li",{children:"Place vias for layer connections"}),i.jsx("li",{children:"Place component pads (SMD and through-hole)"}),i.jsx("li",{children:"Place test points for circuit testing"}),i.jsx("li",{children:"Place and annotate components"}),i.jsx("li",{children:"Place power and ground nodes"}),i.jsx("li",{children:"Erase tool for removing elements"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Layer Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Separate top and bottom layer support"}),i.jsx("li",{children:"Layer-specific color customization"}),i.jsx("li",{children:"Layer-specific size controls"}),i.jsx("li",{children:"Layer visibility toggles"}),i.jsx("li",{children:"Overlay view mode"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Component Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Component placement with pin counts"}),i.jsx("li",{children:"Pin connection tracking"}),i.jsx("li",{children:"Component type classification"}),i.jsx("li",{children:"Designator and value annotation"}),i.jsx("li",{children:"Component editor dialog"}),i.jsx("li",{children:"Find and center component"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Selection & Locking"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Select individual elements or groups"}),i.jsx("li",{children:"Select all vias, traces, pads, or components"}),i.jsx("li",{children:"Select power/ground nodes by name"}),i.jsx("li",{children:"Select disconnected components"}),i.jsx("li",{children:"Lock/unlock elements by type"}),i.jsx("li",{children:"Image locking for protection"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Power & Ground"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Multiple voltage power nodes"}),i.jsx("li",{children:"Power bus management"}),i.jsx("li",{children:"Ground node placement"}),i.jsx("li",{children:"Ground bus management"}),i.jsx("li",{children:"Node naming and organization"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Customization"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Customizable colors per layer"}),i.jsx("li",{children:"Adjustable brush/tool sizes"}),i.jsx("li",{children:"Size presets for common tools"}),i.jsx("li",{children:"Color palette management"}),i.jsx("li",{children:"Tool settings persistence"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Project Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Create, open, and save projects"}),i.jsx("li",{children:"Auto-save with configurable intervals"}),i.jsx("li",{children:"File history automatically saved in history subdirectory when Auto Save is enabled"}),i.jsx("li",{children:"Project file format (JSON)"}),i.jsx("li",{children:"Print functionality"}),i.jsx("li",{children:"Export to KiCad schematic format (future feature, not yet implemented)"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"View Controls"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Zoom in/out with mouse wheel"}),i.jsx("li",{children:"Pan view with hand tool"}),i.jsx("li",{children:"Zoom to fit"}),i.jsx("li",{children:"View mode switching (top/bottom/overlay)"}),i.jsx("li",{children:"Detailed information dialog"})]})]})]})]}),i.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #ddd"},children:i.jsxs("p",{style:{margin:"0 0 8px 0",color:"#666",fontSize:"12px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to manage projects, the ",i.jsx("strong",{children:"Images"})," menu for image loading and transformation, and the ",i.jsx("strong",{children:"Tools"})," menu for selection, locking, and customization options."]})}),i.jsxs("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #ddd"},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Future / TODO List"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"A searchable list of common components"}),i.jsx("li",{children:"Output schematics (perhaps as KiCad files)"}),i.jsx("li",{children:"Multiple shortcuts to different views"}),i.jsx("li",{children:"Dynamic layers"})]})]})]})})]}),u&&i.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:i.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:u,children:u})})]}),i.jsx(ux,{visible:Go,toolRegistry:ha,currentTool:Wl,drawingMode:_s,traceToolLayer:Os,padToolLayer:Pe,testPointToolLayer:$i,componentToolLayer:vt,updateToolSettings:Vl,updateToolLayerSettings:At,setBrushSize:Il,saveToolSettings:ga,saveToolLayerSettings:xa,setTopTraceSize:Yn,setBottomTraceSize:Hs,setTopPadSize:vl,setBottomPadSize:Un,setTopTestPointSize:Jn,setBottomTestPointSize:zt,setTopComponentSize:Wa,setBottomComponentSize:en,setComponentConnectionSize:vr,saveDefaultSize:ei,onClose:()=>va(!1)}),i.jsx(fx,{visible:Vs,toolRegistry:ha,currentTool:Wl,drawingMode:_s,traceToolLayer:Os,padToolLayer:Pe,testPointToolLayer:$i,componentToolLayer:vt,updateToolSettings:Vl,updateToolLayerSettings:At,saveToolSettings:ga,saveToolLayerSettings:xa,setBrushColor:Xo,setTopTraceColor:mr,setBottomTraceColor:Mn,setTopPadColor:ba,setBottomPadColor:kt,setTopTestPointColor:Cn,setBottomTestPointColor:Fa,setTopComponentColor:Es,setBottomComponentColor:fo,setComponentConnectionColor:po,saveDefaultColor:kn,colorPalette:zi,onClose:()=>Is(!1)})]})},hx=({visible:c})=>c?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"1) Use the File menu to start a new project."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"2) Use the Images menu to load PCB photos."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5",textAlign:"left"},children:"3) Use the tools to draw vias, pads, traces, etc."})]}):null,gx=({visible:c,title:d,message:y,onClose:u})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:U=>{U.target===U.currentTarget&&u()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:U=>U.stopPropagation(),children:[i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),i.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:d})]}),i.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:y}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:i.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,xx=({visible:c,selectedIds:d,selectedComponentIds:y,selectedPowerIds:u,selectedGroundIds:U,drawingStrokes:L,componentsTop:je,componentsBottom:ze,powers:g,grounds:O,powerBuses:pe,onClose:we,setComponentsTop:Te,setComponentsBottom:We,determineViaType:K,determinePadType:ke,determineTestPointType:_e,onFindComponent:he,position:N,isDragging:Z,onDragStart:st,onOpenNotesDialog:F})=>{if(!c)return null;const D=N?{position:"fixed",left:`${N.x}px`,top:`${N.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:Z?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},k={padding:"20px",overflow:"auto",flex:1};return i.jsxs("div",{style:D,children:[i.jsxs("div",{onMouseDown:R=>{const m=R.target;m.tagName==="BUTTON"||m.closest("button")||N&&st(R)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:Z?"grabbing":N?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (I)"}),i.jsx("button",{onClick:we,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:k,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const R=L.filter($e=>d.has($e.id)).length,m=[...je,...ze].filter($e=>y.has($e.id)).length,de=g.filter($e=>u.has($e.id)).length,G=O.filter($e=>U.has($e.id)).length,Ne=R+m+de+G;return i.jsx("div",{style:{padding:"12px 16px",backgroundColor:Ne>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:Ne>0?"#333":"#856404",marginBottom:"8px"},children:Ne>0?`${Ne} Object${Ne!==1?"s":""} Selected`:"Zero Objects Selected"})})(),y.size>0&&(()=>{const R=L.some(m=>d.has(m.id)&&(m.type==="via"||m.type==="pad"));return[...je,...ze].filter(m=>y.has(m.id)).map(m=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ud(m.componentType)})]}),he&&i.jsx("button",{onClick:()=>{he(m.id,m.x,m.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:de=>{de.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:de=>{de.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Layer: ",m.layer]}),m.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[m.description&&i.jsxs("div",{children:["Description: ",m.description]}),m.icType&&i.jsxs("div",{children:["IC Type: ",m.icType]})]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:m.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("span",{children:["Designator: ",m.designator||"(empty)"]}),R&&i.jsx("button",{onClick:()=>{const de=[...je,...ze].filter(oe=>y.has(oe.id)&&oe.componentType===m.componentType),G=de.length,Ne=L.filter(oe=>d.has(oe.id)&&oe.type==="pad"&&oe.points.length>0&&oe.points[0].id!==void 0).map(oe=>{const De=oe.points[0].id;if(De===void 0)throw new Error("Unexpected undefined id");return{stroke:oe,nodeId:De}}).sort((oe,De)=>oe.nodeId-De.nodeId),$e=Ne.length>0?Ne:L.filter(oe=>d.has(oe.id)&&oe.type==="via"&&oe.points.length>0&&oe.points[0].id!==void 0).map(oe=>{const De=oe.points[0].id;if(De===void 0)throw new Error("Unexpected undefined id");return{stroke:oe,nodeId:De}}).sort((oe,De)=>oe.nodeId-De.nodeId),Ke=$e.length;if(Ke===0){console.warn("No vias or pads with Node IDs found in selection");return}const Oe=Math.floor(Ke/G);if(Oe===0){console.warn(`Not enough ${Ne.length>0?"pads":"vias"} (${Ke}) for ${G} components`);return}[...de].sort((oe,De)=>oe.id.localeCompare(De.id)).forEach((oe,De)=>{const V=De*Oe,z=V+Oe,ie=$e.slice(V,z).map(Ve=>Ve.nodeId.toString()),xe=Cf(oe,ie,L);oe.layer==="top"?Te(Ve=>Ve.map(lt=>{if(lt.id===oe.id){const ut={...lt,pinCount:Oe,pinConnections:ie};return xe&&(ut.pinPolarities=xe),ut}return lt})):We(Ve=>Ve.map(lt=>{if(lt.id===oe.id){const ut={...lt,pinCount:Oe,pinConnections:ie};return xe&&(ut.pinPolarities=xe),ut}return lt}))});const Y=Ne.length>0?"pads":"vias";console.log(`Connected ${G} components of type ${m.componentType} to ${Ke} ${Y} (${Oe} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:de=>{de.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:de=>{de.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),i.jsxs("div",{children:["Abbreviation: ",m.abbreviation||"(empty)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:m.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:m.color})]}),i.jsxs("div",{children:["Size: ",m.size]}),i.jsxs("div",{children:["Pin Count: ",m.pinCount]}),m.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[m.resistance&&i.jsxs("div",{children:["Resistance: ",m.resistance]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),m.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[m.capacitance&&i.jsxs("div",{children:["Capacitance: ",m.capacitance]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.dielectric&&i.jsxs("div",{children:["Dielectric: ",m.dielectric]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),m.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[m.capacitance&&i.jsxs("div",{children:["Capacitance: ",m.capacitance]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]}),m.polarity&&i.jsxs("div",{children:["Polarity: ",m.polarity]}),m.esr&&i.jsxs("div",{children:["ESR: ",m.esr]}),m.temperature&&i.jsxs("div",{children:["Temperature: ",m.temperature]})]}),m.pinConnections&&m.pinConnections.length>0&&(()=>{const de=m.componentType==="Electrolytic Capacitor"||m.componentType==="Diode"||m.componentType==="Battery"||m.componentType==="ZenerDiode",G=m.componentType==="Capacitor"&&"dielectric"in m&&m.dielectric==="Tantalum",Ne=de||G;return i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),Ne&&i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:m.pinConnections.map(($e,Ke)=>{const Oe=m.pinPolarities&&m.pinPolarities.length>Ke?m.pinPolarities[Ke]:"";return i.jsxs("tr",{style:{backgroundColor:Ke%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Ke+1}),Ne&&i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:Oe==="+"?"#d32f2f":Oe==="-"?"#1976d2":"#999"},children:Oe||"-"}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:$e||"(not connected)"})]},Ke)})})]})]})})(),"manufacturer"in m&&m.manufacturer&&i.jsxs("div",{children:["Manufacturer: ",m.manufacturer]}),"partNumber"in m&&m.partNumber&&i.jsxs("div",{children:["Part Number: ",m.partNumber]}),m.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[m.diodeType&&i.jsxs("div",{children:["Type: ",m.diodeType]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]}),m.ledColor&&i.jsxs("div",{children:["LED Color: ",m.ledColor]})]}),m.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.capacity&&i.jsxs("div",{children:["Capacity: ",m.capacity]}),m.chemistry&&i.jsxs("div",{children:["Chemistry: ",m.chemistry]})]}),m.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[m.current&&i.jsxs("div",{children:["Current: ",m.current]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.fuseType&&i.jsxs("div",{children:["Type: ",m.fuseType]})]}),m.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[m.impedance&&i.jsxs("div",{children:["Impedance: ",m.impedance]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[m.connectorType&&i.jsxs("div",{children:["Type: ",m.connectorType]}),m.gender&&i.jsxs("div",{children:["Gender: ",m.gender]})]}),m.componentType==="Jumper"&&i.jsx(i.Fragment,{children:m.positions&&i.jsxs("div",{children:["Positions: ",m.positions]})}),m.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[m.coilVoltage&&i.jsxs("div",{children:["Coil Voltage: ",m.coilVoltage]}),m.contactType&&i.jsxs("div",{children:["Contact Type: ",m.contactType]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[m.inductance&&i.jsxs("div",{children:["Inductance: ",m.inductance]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]}),m.resistance&&i.jsxs("div",{children:["DC Resistance: ",m.resistance]})]}),m.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[m.impedance&&i.jsxs("div",{children:["Impedance: ",m.impedance]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]})]}),m.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[m.motorType&&i.jsxs("div",{children:["Type: ",m.motorType]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[m.inputVoltage&&i.jsxs("div",{children:["Input Voltage: ",m.inputVoltage]}),m.outputVoltage&&i.jsxs("div",{children:["Output Voltage: ",m.outputVoltage]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[m.transistorType&&i.jsxs("div",{children:["Type: ",m.transistorType]}),m.polarity&&i.jsxs("div",{children:["Polarity: ",m.polarity]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[m.resistance&&i.jsxs("div",{children:["Resistance: ",m.resistance]}),m.configuration&&i.jsxs("div",{children:["Configuration: ",m.configuration]})]}),m.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[m.resistance&&i.jsxs("div",{children:["Resistance: ",m.resistance]}),m.thermistorType&&i.jsxs("div",{children:["Type: ",m.thermistorType]}),m.beta&&i.jsxs("div",{children:["Beta: ",m.beta]})]}),m.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[m.switchType&&i.jsxs("div",{children:["Type: ",m.switchType]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]})]}),m.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[m.primaryVoltage&&i.jsxs("div",{children:["Primary Voltage: ",m.primaryVoltage]}),m.secondaryVoltage&&i.jsxs("div",{children:["Secondary Voltage: ",m.secondaryVoltage]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]}),m.turns&&i.jsxs("div",{children:["Turns Ratio: ",m.turns]})]}),m.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:m.signal&&i.jsxs("div",{children:["Signal: ",m.signal]})}),m.componentType==="IntegratedCircuit"&&i.jsx(i.Fragment,{children:m.datasheet&&i.jsxs("div",{children:["Datasheet: ",i.jsx("a",{href:m.datasheet,target:"_blank",rel:"noopener noreferrer",children:m.datasheet})]})}),m.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:m.tubeType&&i.jsxs("div",{children:["Type: ",m.tubeType]})}),m.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[m.vrType&&i.jsxs("div",{children:["Type: ",m.vrType]}),m.resistance&&i.jsxs("div",{children:["Resistance: ",m.resistance]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]}),m.taper&&i.jsxs("div",{children:["Taper: ",m.taper]})]}),m.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[m.frequency&&i.jsxs("div",{children:["Frequency: ",m.frequency]}),m.loadCapacitance&&i.jsxs("div",{children:["Load Capacitance: ",m.loadCapacitance]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),m.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[m.voltage&&i.jsxs("div",{children:["Zener Voltage: ",m.voltage]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),i.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:i.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]})})]})]},m.id))})(),d.size>0&&L.filter(R=>d.has(R.id)&&R.type==="via"&&R.points.length>0).map(R=>{const m=R.points[0],de=R.viaType||(m.id!==void 0?K(m.id,pe):"Via (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:de})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[m.id&&i.jsxs("div",{children:["Node ID: ",m.id]}),i.jsx("div",{children:"Layer: Top and Bottom"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)}),d.size>0&&L.filter(R=>d.has(R.id)&&R.type==="pad"&&R.points.length>0).map(R=>{const m=R.points[0],de=R.padType||(m.id!==void 0?ke(m.id,pe):"Pad (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:de})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[m.id&&i.jsxs("div",{children:["Node ID: ",m.id]}),i.jsxs("div",{children:["Layer: ",R.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)}),d.size>0&&L.filter(R=>d.has(R.id)&&R.type==="testPoint"&&R.points.length>0).map(R=>{const m=R.points[0],de=R.testPointType||(m.id!==void 0?_e(m.id,pe):"Test Point (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:de})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[m.id&&i.jsxs("div",{children:["Node ID: ",m.id]}),i.jsxs("div",{children:["Layer: ",R.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)}),d.size>0&&L.filter(R=>d.has(R.id)&&R.type==="trace").map(R=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R.type||"unknown"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[R.points.length>0&&i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",R.points.length]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:R.points.map((m,de)=>i.jsxs("tr",{style:{backgroundColor:de%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:de}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.x.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.y.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.id||"(none)"})]},de))})]})]}),i.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",R.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)),u.size>0&&g.filter(R=>u.has(R.id)).map(R=>{const m=pe.find(de=>de.id===R.powerBusId);return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R.type||(m?`${m.name} Power Node`:"Power Node")})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",R.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Layer: ",R.layer]}),i.jsxs("div",{children:["Power Bus: ",m?.name||R.powerBusId||"(unknown)"]}),i.jsxs("div",{children:["Position: x=",R.x.toFixed(2),", y=",R.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)}),U.size>0&&O.filter(R=>U.has(R.id)).map(R=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R.type||"Ground Node"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",R.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Position: x=",R.x.toFixed(2),", y=",R.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:F,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id))]})})]})},An=200,yx=({visible:c,selectedIds:d,selectedComponentIds:y,selectedPowerIds:u,selectedGroundIds:U,drawingStrokes:L,componentsTop:je,componentsBottom:ze,powers:g,grounds:O,powerBuses:pe,onClose:we,setComponentsTop:Te,setComponentsBottom:We,setDrawingStrokes:K,setPowerSymbols:ke,setGroundSymbols:_e,determineViaType:he,determinePadType:N,determineTestPointType:Z,position:st,isDragging:F,onDragStart:D})=>{const[k,R]=j.useState(new Map),m=j.useRef(""),de=()=>[...Array.from(d).sort(),...Array.from(y).sort(),...Array.from(u).sort(),...Array.from(U).sort()].join(",");if(j.useEffect(()=>{if(!c)return;const V=de();V!==m.current&&(m.current=V,R(z=>{const _=new Map;return[...je,...ze].filter(ie=>y.has(ie.id)).forEach(ie=>{const xe=z.get(ie.id);_.set(ie.id,xe!==void 0?xe:ie.notes||"")}),L.filter(ie=>d.has(ie.id)).forEach(ie=>{const xe=z.get(ie.id);_.set(ie.id,xe!==void 0?xe:ie.notes||"")}),g.filter(ie=>u.has(ie.id)).forEach(ie=>{const xe=z.get(ie.id);_.set(ie.id,xe!==void 0?xe:ie.notes||"")}),O.filter(ie=>U.has(ie.id)).forEach(ie=>{const xe=z.get(ie.id);_.set(ie.id,xe!==void 0?xe:ie.notes||"")}),_}))},[c,d,y,u,U,L,je,ze,g,O]),!c)return null;const G=st?{position:"fixed",left:`${st.x}px`,top:`${st.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:F?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},Ne={padding:"20px",overflow:"auto",flex:1},$e=L.filter(V=>d.has(V.id)).length,Ke=[...je,...ze].filter(V=>y.has(V.id)).length,Oe=g.filter(V=>u.has(V.id)).length,ne=O.filter(V=>U.has(V.id)).length,Y=$e+Ke+Oe+ne,oe=(V,z)=>{const _=z.length>An?z.substring(0,An):z;R(ie=>{const xe=new Map(ie);return xe.set(V,_),xe})},De=()=>{Te(V=>V.map(z=>{if(y.has(z.id)&&k.has(z.id)){const _=k.get(z.id)||"";return{...z,notes:_.trim()===""?null:_.trim()}}return z})),We(V=>V.map(z=>{if(y.has(z.id)&&k.has(z.id)){const _=k.get(z.id)||"";return{...z,notes:_.trim()===""?null:_.trim()}}return z})),K(V=>V.map(z=>{if(d.has(z.id)&&k.has(z.id)){const _=k.get(z.id)||"";return{...z,notes:_.trim()===""?null:_.trim()}}return z})),ke(V=>V.map(z=>{if(u.has(z.id)&&k.has(z.id)){const _=k.get(z.id)||"";return{...z,notes:_.trim()===""?null:_.trim()}}return z})),_e(V=>V.map(z=>{if(U.has(z.id)&&k.has(z.id)){const _=k.get(z.id)||"";return{...z,notes:_.trim()===""?null:_.trim()}}return z}))};return i.jsxs("div",{style:G,children:[i.jsxs("div",{onMouseDown:V=>{const z=V.target;z.tagName==="BUTTON"||z.closest("button")||st&&D(V)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:F?"grabbing":st?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (N)"}),i.jsx("button",{onClick:we,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:Ne,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[i.jsx("div",{style:{padding:"12px 16px",backgroundColor:Y>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:Y>0?"#333":"#856404",marginBottom:"8px"},children:Y>0?`${Y} Object${Y!==1?"s":""} Selected`:"Zero Objects Selected"}),Y===0?i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):i.jsxs(i.Fragment,{children:[[...je,...ze].filter(V=>y.has(V.id)).map(V=>{const z=k.get(V.id)||"",_=z.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsxs("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:[ud(V.componentType),V.designator&&V.designator.trim()?` (${V.designator.trim()})`:""]})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:z,onChange:ie=>oe(V.id,ie.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:An,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:_>=An?"#d32f2f":"#666",textAlign:"right"},children:[_," / ",An]})]})]},V.id)}),L.filter(V=>d.has(V.id)&&V.type==="via"&&V.points.length>0).map(V=>{const z=V.points[0],_=V.viaType||(z.id!==void 0?he(z.id,pe):"Via (Signal)"),ie=k.get(V.id)||"",xe=ie.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:_})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:z.id&&i.jsxs("div",{children:["Node ID: ",z.id]})}),i.jsx("textarea",{value:ie,onChange:Ve=>oe(V.id,Ve.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:An,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:xe>=An?"#d32f2f":"#666",textAlign:"right"},children:[xe," / ",An]})]})]},V.id)}),L.filter(V=>d.has(V.id)&&V.type==="pad"&&V.points.length>0).map(V=>{const z=V.points[0],_=V.padType||(z.id!==void 0?N(z.id,pe):"Pad (Signal)"),ie=k.get(V.id)||"",xe=ie.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:_})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:z.id&&i.jsxs("div",{children:["Node ID: ",z.id]})}),i.jsx("textarea",{value:ie,onChange:Ve=>oe(V.id,Ve.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:An,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:xe>=An?"#d32f2f":"#666",textAlign:"right"},children:[xe," / ",An]})]})]},V.id)}),L.filter(V=>d.has(V.id)&&V.type==="testPoint"&&V.points.length>0).map(V=>{const z=V.points[0],_=V.testPointType||(z.id!==void 0?Z(z.id,pe):"Test Point (Signal)"),ie=k.get(V.id)||"",xe=ie.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:_})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:z.id&&i.jsxs("div",{children:["Node ID: ",z.id]})}),i.jsx("textarea",{value:ie,onChange:Ve=>oe(V.id,Ve.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:An,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:xe>=An?"#d32f2f":"#666",textAlign:"right"},children:[xe," / ",An]})]})]},V.id)}),L.filter(V=>d.has(V.id)&&V.type==="trace").map(V=>{const z=k.get(V.id)||"",_=z.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:V.type||"unknown"})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:z,onChange:ie=>oe(V.id,ie.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:An,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:_>=An?"#d32f2f":"#666",textAlign:"right"},children:[_," / ",An]})]})]},V.id)}),g.filter(V=>u.has(V.id)).map(V=>{const z=pe.find(Ve=>Ve.id===V.powerBusId),_=V.type||(z?`${z.name} Power Node`:"Power Node"),ie=k.get(V.id)||"",xe=ie.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:_})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",V.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:ie,onChange:Ve=>oe(V.id,Ve.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:An,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:xe>=An?"#d32f2f":"#666",textAlign:"right"},children:[xe," / ",An]})]})]},V.id)}),O.filter(V=>U.has(V.id)).map(V=>{const z=V.type||"Ground Node",_=k.get(V.id)||"",ie=_.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:z})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",V.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:_,onChange:xe=>oe(V.id,xe.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:An,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:ie>=An?"#d32f2f":"#666",textAlign:"right"},children:[ie," / ",An]})]})]},V.id)}),i.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[i.jsx("button",{onClick:De,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#4CAF50"},children:"Save Notes"}),i.jsx("button",{onClick:we,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#616161"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#757575"},children:"Close"})]})]})]})})]})},bx=({visible:c,dimensions:d,onSave:y,onClose:u})=>{const[U,L]=j.useState(""),[je,ze]=j.useState(""),[g,O]=j.useState("inches");j.useEffect(()=>{c&&d?(L(d.width.toString()),ze(d.height.toString()),O(d.unit)):c&&(L(""),ze(""),O("inches"))},[c,d]);const pe=()=>{const Te=parseFloat(U),We=parseFloat(je);if(isNaN(Te)||Te<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(We)||We<=0){alert("Please enter a valid height greater than 0");return}y({width:Te,height:We,unit:g}),u()},we=()=>{u()};return c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:Te=>{Te.target===Te.currentTarget&&we()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:Te=>Te.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:U,onChange:Te=>L(Te.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:g,onChange:Te=>O(Te.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:je,onChange:Te=>ze(Te.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:g,onChange:Te=>O(Te.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:we,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),i.jsx("button",{onClick:pe,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},vx=({component:c,componentEditor:d,setComponentEditor:y,areComponentsLocked:u,componentsTop:U,componentsBottom:L,setComponentsTop:je,setComponentsBottom:ze})=>i.jsxs(i.Fragment,{children:[c.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||Fe("resistance"),onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"5%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.05%",children:"0.05%"}),i.jsx("option",{value:"0.1%",children:"0.1%"}),i.jsx("option",{value:"0.25%",children:"0.25%"}),i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:d.capacitance||"",onChange:g=>y({...d,capacitance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:d.capacitanceUnit||Fe("capacitance"),onChange:g=>y({...d,capacitanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("capacitance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||Fe("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-dielectric-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),i.jsxs("select",{id:`component-dielectric-${c.id}`,value:d.dielectric||"Ceramic",onChange:g=>y({...d,dielectric:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Ceramic",children:"Ceramic"}),i.jsx("option",{value:"Tantalum",children:"Tantalum"}),i.jsx("option",{value:"Film",children:"Film"}),i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Mica",children:"Mica"}),i.jsx("option",{value:"Paper",children:"Paper"}),i.jsx("option",{value:"Glass",children:"Glass"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"10%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Film Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:d.capacitance||"",onChange:g=>y({...d,capacitance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:d.capacitanceUnit||Fe("capacitance"),onChange:g=>y({...d,capacitanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("capacitance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||Fe("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-filmtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Film Type:"}),i.jsxs("select",{id:`component-filmtype-${c.id}`,value:d.filmType||"Polyester",onChange:g=>y({...d,filmType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Polyethylene",children:"Polyethylene"}),i.jsx("option",{value:"Polystyrene",children:"Polystyrene"}),i.jsx("option",{value:"Polycarbonate",children:"Polycarbonate"}),i.jsx("option",{value:"PTFE",children:"PTFE (Teflon)"}),i.jsx("option",{value:"PPS",children:"PPS (Polyphenylene Sulfide)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"10%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:d.capacitance||"",onChange:g=>y({...d,capacitance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 100"}),i.jsxs("select",{value:d.capacitanceUnit||"F",onChange:g=>y({...d,capacitanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:[i.jsx("option",{value:"pF",children:"pF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"mF",children:"mF"}),i.jsx("option",{value:"F",children:"F"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 25"}),i.jsx("select",{value:d.voltageUnit||Fe("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"20%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:d.polarityCapacitor||c.polarity||"Positive",onChange:g=>y({...d,polarityCapacitor:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Positive",children:"Positive"}),i.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),c.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inductance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),i.jsx("input",{id:`component-inductance-${c.id}`,type:"text",value:d.inductance||"",onChange:g=>y({...d,inductance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.inductanceUnit||Fe("inductance"),onChange:g=>y({...d,inductanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("inductance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Fe("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.resistanceUnit||"",onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-diodetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),i.jsxs("select",{id:`component-diodetype-${c.id}`,value:d.diodeType||"Standard",onChange:g=>y({...d,diodeType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Standard",children:"Standard"}),i.jsx("option",{value:"Zener",children:"Zener"}),i.jsx("option",{value:"LED",children:"LED"}),i.jsx("option",{value:"Schottky",children:"Schottky"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),d.diodeType==="LED"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ledcolor-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),i.jsxs("select",{id:`component-ledcolor-${c.id}`,value:d.ledColor||"",onChange:g=>y({...d,ledColor:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"Red",children:"Red"}),i.jsx("option",{value:"Green",children:"Green"}),i.jsx("option",{value:"Blue",children:"Blue"}),i.jsx("option",{value:"Yellow",children:"Yellow"}),i.jsx("option",{value:"Orange",children:"Orange"}),i.jsx("option",{value:"White",children:"White"}),i.jsx("option",{value:"RGB",children:"RGB"}),i.jsx("option",{value:"IR",children:"IR (Infrared)"}),i.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||Fe("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Fe("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 3.7"}),i.jsx("select",{value:d.voltageUnit||"V",onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),i.jsx("input",{id:`component-capacity-${c.id}`,type:"text",value:d.capacity||"",onChange:g=>y({...d,capacity:g.target.value}),disabled:u,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 2000mAh"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-chemistry-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),i.jsxs("select",{id:`component-chemistry-${c.id}`,value:d.chemistry||"Li-ion",onChange:g=>y({...d,chemistry:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Li-ion",children:"Li-ion"}),i.jsx("option",{value:"LiPo",children:"LiPo"}),i.jsx("option",{value:"NiMH",children:"NiMH"}),i.jsx("option",{value:"NiCd",children:"NiCd"}),i.jsx("option",{value:"Alkaline",children:"Alkaline"}),i.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),i.jsx("option",{value:"Lithium",children:"Lithium"}),i.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),c.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:d.currentUnit||"A",onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:d.voltageUnit||"V",onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-fusetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),i.jsxs("select",{id:`component-fusetype-${c.id}`,value:d.fuseType||"Fast-blow",onChange:g=>y({...d,fuseType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),i.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),i.jsx("option",{value:"Time-delay",children:"Time-delay"}),i.jsx("option",{value:"Resettable",children:"Resettable"}),i.jsx("option",{value:"Cartridge",children:"Cartridge"}),i.jsx("option",{value:"Glass",children:"Glass"}),i.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),c.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-coilvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),i.jsx("input",{id:`component-coilvoltage-${c.id}`,type:"text",value:d.coilVoltage||"",onChange:g=>y({...d,coilVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.coilVoltageUnit||Fe("voltage"),onChange:g=>y({...d,coilVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-contacttype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),i.jsxs("select",{id:`component-contacttype-${c.id}`,value:d.contactType||"SPST",onChange:g=>y({...d,contactType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),i.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),i.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),i.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),i.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),i.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.currentUnit||Fe("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-motortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),i.jsxs("select",{id:`component-motortype-${c.id}`,value:d.motorType||"DC",onChange:g=>y({...d,motorType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"DC",children:"DC Motor"}),i.jsx("option",{value:"Stepper",children:"Stepper Motor"}),i.jsx("option",{value:"Servo",children:"Servo Motor"}),i.jsx("option",{value:"Brushless",children:"Brushless DC"}),i.jsx("option",{value:"AC",children:"AC Motor"}),i.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.voltageUnit||Fe("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Fe("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-switchtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),i.jsxs("select",{id:`component-switchtype-${c.id}`,value:d.switchType||"Toggle",onChange:g=>y({...d,switchType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Toggle",children:"Toggle"}),i.jsx("option",{value:"Push-button",children:"Push-button"}),i.jsx("option",{value:"Slide",children:"Slide"}),i.jsx("option",{value:"Rotary",children:"Rotary"}),i.jsx("option",{value:"DIP",children:"DIP Switch"}),i.jsx("option",{value:"Momentary",children:"Momentary"}),i.jsx("option",{value:"Latching",children:"Latching"}),i.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:d.currentUnit||Fe("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:d.voltageUnit||Fe("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:d.impedance||"",onChange:g=>y({...d,impedance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:d.impedanceUnit||Fe("impedance"),onChange:g=>y({...d,impedanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("impedance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Fe("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-connectortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),i.jsx("input",{id:`component-connectortype-${c.id}`,type:"text",value:d.connectorType||"",onChange:g=>y({...d,connectorType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-gender-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),i.jsxs("select",{id:`component-gender-${c.id}`,value:d.gender||"N/A",onChange:g=>y({...d,gender:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),c.componentType==="Jumper"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-positions-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),i.jsx("input",{id:`component-positions-${c.id}`,type:"number",min:"2",value:d.positions||3,onChange:g=>y({...d,positions:parseInt(g.target.value)||3}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"}})]})}),c.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:d.impedance||"",onChange:g=>y({...d,impedance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 8"}),i.jsx("select",{value:d.impedanceUnit||Fe("impedance"),onChange:g=>y({...d,impedanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("impedance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]})]}),c.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),i.jsx("input",{id:`component-inputvoltage-${c.id}`,type:"text",value:d.inputVoltage||"",onChange:g=>y({...d,inputVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:d.inputVoltageUnit||Fe("voltage"),onChange:g=>y({...d,inputVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-outputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),i.jsx("input",{id:`component-outputvoltage-${c.id}`,type:"text",value:d.outputVoltage||"",onChange:g=>y({...d,outputVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.outputVoltageUnit||Fe("voltage"),onChange:g=>y({...d,outputVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Fe("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-transistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),i.jsxs("select",{id:`component-transistortype-${c.id}`,value:d.transistorType||"BJT",onChange:g=>y({...d,transistorType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),i.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),i.jsx("option",{value:"MOSFET",children:"MOSFET"}),i.jsx("option",{value:"IGBT",children:"IGBT"}),i.jsx("option",{value:"JFET",children:"JFET"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:d.polarity||"NPN",onChange:g=>y({...d,polarity:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NPN",children:"NPN"}),i.jsx("option",{value:"PNP",children:"PNP"}),i.jsx("option",{value:"N-Channel",children:"N-Channel"}),i.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||Fe("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||Fe("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||Fe("resistance"),onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-configuration-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),i.jsx("input",{id:`component-configuration-${c.id}`,type:"text",value:d.configuration||"",onChange:g=>y({...d,configuration:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),c.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||Fe("resistance"),onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-thermistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),i.jsxs("select",{id:`component-thermistortype-${c.id}`,value:d.thermistorType||"NTC",onChange:g=>y({...d,thermistorType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),i.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-beta-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),i.jsx("input",{id:`component-beta-${c.id}`,type:"text",value:d.beta||"",onChange:g=>y({...d,beta:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),c.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-primaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),i.jsx("input",{id:`component-primaryvoltage-${c.id}`,type:"text",value:d.primaryVoltage||"",onChange:g=>y({...d,primaryVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:d.primaryVoltageUnit||Fe("voltage"),onChange:g=>y({...d,primaryVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-secondaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),i.jsx("input",{id:`component-secondaryvoltage-${c.id}`,type:"text",value:d.secondaryVoltage||"",onChange:g=>y({...d,secondaryVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.secondaryVoltageUnit||Fe("voltage"),onChange:g=>y({...d,secondaryVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-turns-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),i.jsx("input",{id:`component-turns-${c.id}`,type:"text",value:d.turns||"",onChange:g=>y({...d,turns:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),c.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-signal-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),i.jsx("input",{id:`component-signal-${c.id}`,type:"text",value:d.signal||"",onChange:g=>y({...d,signal:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),c.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ictype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),i.jsxs("select",{id:`component-ictype-${c.id}`,value:d.icType||"Op-Amp",onChange:g=>y({...d,icType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),i.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),i.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),i.jsx("option",{value:"Logic",children:"Logic"}),i.jsx("option",{value:"Memory",children:"Memory"}),i.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),i.jsx("option",{value:"Timer",children:"Timer"}),i.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),i.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),i.jsx("option",{value:"Comparator",children:"Comparator"}),i.jsx("option",{value:"Transceiver",children:"Transceiver"}),i.jsx("option",{value:"Driver",children:"Driver"}),i.jsx("option",{value:"Amplifier",children:"Amplifier"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-datasheet-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1},children:[i.jsx("input",{id:`component-datasheet-${c.id}`,type:"text",value:d.datasheet||"",onChange:g=>y({...d,datasheet:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"URL"}),d.datasheet&&d.datasheet.trim()&&i.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation();const O=d.datasheet.trim(),pe=O.match(/^https?:\/\//)?O:`https://${O}`;window.open(pe,"_blank","noopener,noreferrer")},style:{background:"transparent",border:"none",cursor:"pointer",padding:"2px",display:"flex",alignItems:"center",justifyContent:"center",opacity:u?.4:1,flexShrink:0},title:"Open URL in new tab",disabled:u,children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#4a9eff"},children:[i.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),i.jsx("polyline",{points:"15 3 21 3 21 9"}),i.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${c.id}`,name:`component-pincount-${c.id}`,type:"number",min:"1",value:d.pinCount,onChange:g=>{const O=Math.max(1,parseInt(g.target.value)||1);y({...d,pinCount:O})},onBlur:g=>{if(u){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const O=Math.max(1,parseInt(g.target.value)||1),we=(d.layer==="top"?U:L).find(Te=>Te.id===d.id);if(we&&O!==we.pinCount){const Te=we.pinConnections||[],We=new Array(O).fill("").map((he,N)=>N<Te.length?Te[N]:""),K=we.pinPolarities||[],ke=we.pinPolarities?new Array(O).fill("").map((he,N)=>N<K.length?K[N]:""):void 0,_e={...we,pinCount:O,pinConnections:We,...ke!==void 0&&{pinPolarities:ke}};d.layer==="top"?je(he=>he.map(N=>N.id===d.id?_e:N)):ze(he=>he.map(N=>N.id===d.id?_e:N)),y({...d,pinCount:O})}},disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"}})]})]}),c.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tubetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),i.jsx("input",{id:`component-tubetype-${c.id}`,type:"text",value:d.tubeType||"",onChange:g=>y({...d,tubeType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),c.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-vrtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),i.jsxs("select",{id:`component-vrtype-${c.id}`,value:d.vrType||"Potentiometer",onChange:g=>y({...d,vrType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),i.jsx("option",{value:"Rheostat",children:"Rheostat"}),i.jsx("option",{value:"Trimmer",children:"Trimmer"}),i.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||Fe("resistance"),onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-taper-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),i.jsxs("select",{id:`component-taper-${c.id}`,value:d.taper||"Linear",onChange:g=>y({...d,taper:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Linear",children:"Linear"}),i.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),i.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),c.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-frequency-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),i.jsx("input",{id:`component-frequency-${c.id}`,type:"text",value:d.frequency||"",onChange:g=>y({...d,frequency:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-loadcapacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),i.jsx("input",{id:`component-loadcapacitance-${c.id}`,type:"text",value:d.loadCapacitance||"",onChange:g=>y({...d,loadCapacitance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"10ppm",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"10ppm",children:"10ppm"}),i.jsx("option",{value:"20ppm",children:"20ppm"}),i.jsx("option",{value:"30ppm",children:"30ppm"}),i.jsx("option",{value:"50ppm",children:"50ppm"}),i.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),c.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 5.1"}),i.jsx("select",{value:d.voltageUnit||Fe("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:$t("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"5%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),mx=c=>{const d=fd[c];return!d||!d.prefix||d.prefix.length<1?"?":d.prefix[0].substring(0,1).toUpperCase()},Sx=({componentEditor:c,setComponentEditor:d,componentsTop:y,componentsBottom:u,setComponentsTop:U,setComponentsBottom:L,connectingPin:je,setConnectingPin:ze,componentDialogPosition:g,setComponentDialogPosition:O,isDraggingDialog:pe,setIsDraggingDialog:we,dialogDragOffset:Te,setDialogDragOffset:We,areComponentsLocked:K,setSelectedComponentIds:ke,setNotesDialogVisible:_e})=>{if(!c||!c.visible)return null;let he=y.find(F=>F.id===c.id),N="top";if(he||(he=u.find(F=>F.id===c.id),N="bottom"),!he)return null;c.layer!==N&&d({...c,layer:N});const Z=F=>{const D={...F},k=c.designator?.trim()||"";D.designator=k,D.x=c.x,D.y=c.y,D.layer=c.layer,D.orientation=c.orientation??0;const R=k.length>0?k.charAt(0).toUpperCase():mx(F.componentType);if(D.abbreviation=R,"manufacturer"in D&&(D.manufacturer=c.manufacturer?.trim()||void 0),"partNumber"in D&&(D.partNumber=c.partNumber?.trim()||void 0),c.pinCount!==F.pinCount){D.pinCount=c.pinCount;const m=F.pinConnections||[];if(D.pinConnections=new Array(c.pinCount).fill("").map((de,G)=>G<m.length?m[G]:""),F.pinPolarities){const de=F.pinPolarities||[];D.pinPolarities=new Array(c.pinCount).fill("").map((G,Ne)=>Ne<de.length?de[Ne]:"")}}else D.pinConnections=F.pinConnections||[],F.pinPolarities&&(D.pinPolarities=F.pinPolarities);return F.componentType==="Resistor"?(D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0,D.power=c.power?`${c.power}W`:void 0,D.tolerance=c.tolerance||void 0):F.componentType==="Capacitor"?(D.capacitance=c.capacitance||void 0,D.capacitanceUnit=c.capacitanceUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.tolerance=c.tolerance||void 0,D.dielectric=c.dielectric||void 0):F.componentType==="Electrolytic Capacitor"?(D.capacitance=c.capacitance||void 0,D.capacitanceUnit=c.capacitanceUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.tolerance=c.tolerance||void 0,D.polarity=c.polarityCapacitor||void 0,D.esr=c.esr||void 0,D.esrUnit=c.esrUnit||void 0,D.temperature=c.temperature||void 0):F.componentType==="Film Capacitor"?(D.capacitance=c.capacitance||void 0,D.capacitanceUnit=c.capacitanceUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.tolerance=c.tolerance||void 0,D.filmType=c.filmType||void 0):F.componentType==="Diode"?(D.diodeType=c.diodeType||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0,D.ledColor=c.ledColor||void 0):F.componentType==="Battery"?(D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.capacity=c.capacity||void 0,D.capacityUnit=c.capacityUnit||void 0,D.chemistry=c.chemistry||void 0):F.componentType==="Fuse"?(D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.fuseType=c.fuseType||void 0):F.componentType==="FerriteBead"?(D.impedance=c.impedance||void 0,D.impedanceUnit=c.impedanceUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):F.componentType==="Connector"?(D.connectorType=c.connectorType||void 0,D.gender=c.gender||void 0):F.componentType==="Jumper"?D.positions=c.positions||void 0:F.componentType==="Relay"?(D.coilVoltage=c.coilVoltage||void 0,D.coilVoltageUnit=c.coilVoltageUnit||void 0,D.contactType=c.contactType||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):F.componentType==="Inductor"?(D.inductance=c.inductance||void 0,D.inductanceUnit=c.inductanceUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0,D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0):F.componentType==="Speaker"?(D.impedance=c.impedance||void 0,D.impedanceUnit=c.impedanceUnit||void 0,D.power=c.power?`${c.power}W`:void 0):F.componentType==="Motor"?(D.motorType=c.motorType||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):F.componentType==="PowerSupply"?(D.inputVoltage=c.inputVoltage||void 0,D.inputVoltageUnit=c.inputVoltageUnit||void 0,D.outputVoltage=c.outputVoltage||void 0,D.outputVoltageUnit=c.outputVoltageUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):F.componentType==="Transistor"?(D.transistorType=c.transistorType||void 0,D.polarity=c.polarity||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):F.componentType==="ResistorNetwork"?(D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0,D.configuration=c.configuration||void 0):F.componentType==="Thermistor"?(D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0,D.thermistorType=c.thermistorType||void 0,D.beta=c.beta||void 0):F.componentType==="Switch"?(D.switchType=c.switchType||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0):F.componentType==="Transformer"?(D.primaryVoltage=c.primaryVoltage||void 0,D.primaryVoltageUnit=c.primaryVoltageUnit||void 0,D.secondaryVoltage=c.secondaryVoltage||void 0,D.secondaryVoltageUnit=c.secondaryVoltageUnit||void 0,D.power=c.power?`${c.power}W`:void 0,D.turns=c.turns||void 0):F.componentType==="TestPoint"?D.signal=c.signal||void 0:F.componentType==="Film Capacitor"?(D.capacitance=c.capacitance||void 0,D.capacitanceUnit=c.capacitanceUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.tolerance=c.tolerance||void 0,D.filmType=c.filmType||void 0):F.componentType==="IntegratedCircuit"?(D.description=c.description?.trim()||void 0,D.datasheet=c.datasheet?.trim()||void 0,D.icType=c.icType||void 0):D.description=c.description?.trim()||void 0,F.componentType==="VacuumTube"?D.tubeType=c.tubeType||void 0:F.componentType==="VariableResistor"?(D.vrType=c.vrType||void 0,D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0,D.power=c.power?`${c.power}W`:void 0,D.taper=c.taper||void 0):F.componentType==="Crystal"?(D.frequency=c.frequency||void 0,D.loadCapacitance=c.loadCapacitance||void 0,D.tolerance=c.tolerance||void 0):F.componentType==="ZenerDiode"&&(D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.power=c.power?`${c.power}W`:void 0,D.tolerance=c.tolerance||void 0),D},st=()=>{if(K){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const F=y.find(R=>R.id===c.id),D=u.find(R=>R.id===c.id),k=F||D;if(k){const R=Z(k),m=k.layer,de=c.layer;m!==de?m==="top"?(U(G=>G.filter(Ne=>Ne.id!==c.id)),L(G=>[...G,R])):(L(G=>G.filter(Ne=>Ne.id!==c.id)),U(G=>[...G,R])):de==="top"?U(G=>G.map(Ne=>Ne.id===c.id?R:Ne)):L(G=>G.map(Ne=>Ne.id===c.id?R:Ne))}else if(console.warn(`Component ${c.id} not found in either layer array`),c.layer==="top"){const R=u.find(m=>m.id===c.id);if(R){const m=Z(R);L(de=>de.filter(G=>G.id!==c.id)),U(de=>[...de,m])}}else{const R=y.find(m=>m.id===c.id);if(R){const m=Z(R);U(de=>de.filter(G=>G.id!==c.id)),L(de=>[...de,m])}}d(null),ze(null)};return i.jsxs("div",{"data-component-editor-dialog":!0,onClick:F=>{if(je&&je.componentId===he.id){const D=F.target;(D.tagName==="BUTTON"||D.tagName==="INPUT"||D.closest("button")||D.closest("input"))&&F.stopPropagation()}},style:{position:"fixed",top:g?`${g.y}px`:"90px",left:g?`${g.x}px`:`${window.innerWidth-280}px`,transform:"none",background:je&&je.componentId===he.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:pe?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:F=>{const D=F.target;D.tagName==="BUTTON"||D.tagName==="INPUT"||D.closest("button")||D.closest("input")||g&&(We({x:F.clientX-g.x,y:F.clientY-g.y}),we(!0),F.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:pe?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),i.jsx("button",{onClick:()=>{d(null),ze(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),i.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:ud(he.componentType)})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-layer-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),i.jsxs("select",{id:`component-layer-${he.id}`,name:`component-layer-${he.id}`,value:c.layer,onChange:F=>d({...c,layer:F.target.value}),disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-orientation-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),i.jsxs("select",{id:`component-orientation-${he.id}`,name:`component-orientation-${he.id}`,value:c.orientation??0,onChange:F=>{const D=parseInt(F.target.value)||0;if(d({...c,orientation:D}),!K){const R=(c.layer==="top"?y:u).find(m=>m.id===c.id);if(R){const m={...R,orientation:D};c.layer==="top"?U(de=>de.map(G=>G.id===c.id?m:G)):L(de=>de.map(G=>G.id===c.id?m:G))}}},disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0",children:"0"}),i.jsx("option",{value:"90",children:"90"}),i.jsx("option",{value:"180",children:"180"}),i.jsx("option",{value:"270",children:"270"})]})]}),i.jsx(vx,{component:he,componentEditor:c,setComponentEditor:d,areComponentsLocked:K,componentsTop:y,componentsBottom:u,setComponentsTop:U,setComponentsBottom:L}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{htmlFor:`component-designator-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),i.jsx("input",{id:`component-designator-${he.id}`,name:`component-designator-${he.id}`,type:"text",value:c.designator||"",onChange:F=>{const D=F.target.value,k=D.length>0?D.charAt(0).toUpperCase():c.abbreviation;d({...c,designator:D,abbreviation:k})},disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:K?.6:1},placeholder:"e.g., U2, R7, C1"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-description-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),i.jsx("input",{id:`component-description-${he.id}`,name:`component-description-${he.id}`,type:"text",value:c.description||"",onChange:F=>{d({...c,description:F.target.value})},disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1},placeholder:he.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-notes-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Notes:"}),i.jsx("input",{id:`component-notes-${he.id}`,name:`component-notes-${he.id}`,type:"text",readOnly:!0,value:he.notes||"",onClick:()=>{K||(ke(new Set([he.id])),_e(!0))},disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1,cursor:K?"not-allowed":"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Click to edit notes...",title:he.notes||"Click to edit notes..."})]}),he.componentType!=="IntegratedCircuit"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${he.id}`,name:`component-pincount-${he.id}`,type:"number",min:"1",value:c.pinCount,onChange:F=>{const D=Math.max(1,parseInt(F.target.value)||1);d({...c,pinCount:D})},onBlur:F=>{if(K){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const D=Math.max(1,parseInt(F.target.value)||1),R=(c.layer==="top"?y:u).find(m=>m.id===c.id);if(R&&D!==R.pinCount){const m=R.pinConnections||[],de=new Array(D).fill("").map((Ke,Oe)=>Oe<m.length?m[Oe]:""),G=R.pinPolarities||[],Ne=R.pinPolarities?new Array(D).fill("").map((Ke,Oe)=>Oe<G.length?G[Oe]:""):void 0,$e={...R,pinCount:D,pinConnections:de,...Ne!==void 0&&{pinPolarities:Ne}};c.layer==="top"?U(Ke=>Ke.map(Oe=>Oe.id===c.id?$e:Oe)):L(Ke=>Ke.map(Oe=>Oe.id===c.id?$e:Oe)),d({...c,pinCount:D})}},disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-x-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),i.jsx("input",{id:`component-x-${he.id}`,name:`component-x-${he.id}`,type:"number",value:c.x.toFixed(2),onChange:F=>{const D=parseFloat(F.target.value)||0;d({...c,x:D})},disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-y-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),i.jsx("input",{id:`component-y-${he.id}`,name:`component-y-${he.id}`,type:"number",value:c.y.toFixed(2),onChange:F=>{const D=parseFloat(F.target.value)||0;d({...c,y:D})},disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-manufacturer-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),i.jsx("input",{id:`component-manufacturer-${he.id}`,name:`component-manufacturer-${he.id}`,type:"text",value:c.manufacturer,onChange:F=>d({...c,manufacturer:F.target.value}),disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-partnumber-${he.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),i.jsx("input",{id:`component-partnumber-${he.id}`,name:`component-partnumber-${he.id}`,type:"text",value:c.partNumber,onChange:F=>d({...c,partNumber:F.target.value}),disabled:K,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:K?.6:1}})]}),i.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),je&&je.componentId===he.id&&i.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",je.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const F=he.componentType==="Electrolytic Capacitor"||he.componentType==="Diode"||he.componentType==="Battery"||he.componentType==="ZenerDiode",D=he.componentType==="Capacitor"&&"dielectric"in he&&he.dielectric==="Tantalum",k=F||D;return i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),k&&i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),i.jsx("tbody",{children:Array.from({length:c.pinCount},(R,m)=>{const G=(c.layer==="top"?y:u).find(Oe=>Oe.id===c.id),Ne=G?.pinConnections&&G.pinConnections.length>m?G.pinConnections[m]:"",$e=G?.pinPolarities&&G.pinPolarities.length>m&&G.pinPolarities[m]||"",Ke=je&&je.componentId===he.id&&je.pinIndex===m;return i.jsxs("tr",{style:{cursor:K?"not-allowed":"pointer",background:Ke?"#e6f0ff":Ne?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:Oe=>{if(Oe.target.tagName!=="SELECT"){if(K){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}ze(Ke?null:{componentId:he.id,pinIndex:m})}},title:Ne?`Connected to: ${Ne}`:"Select this pin, then click on a via or pad to connect",children:[i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsx("input",{id:`pin-radio-${he.id}-${m}`,name:`pin-radio-${he.id}`,type:"radio",checked:!!Ke,onChange:()=>{if(K){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}ze(Ke?null:{componentId:he.id,pinIndex:m})},disabled:K,style:{margin:0,cursor:K?"not-allowed":"pointer",opacity:K?.6:1,width:"10px",height:"10px"}})}),i.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:Ke?600:400,fontFamily:"monospace"},children:m+1}),k&&i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsxs("select",{value:$e??"",onChange:Oe=>{if(K){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const ne=Oe.target.value,oe=(c.layer==="top"?y:u).find(De=>De.id===c.id);if(oe){const V=[...oe.pinPolarities||new Array(oe.pinCount).fill("")];for(;V.length<oe.pinCount;)V.push("");V[m]=ne;const z={...oe,pinPolarities:V};c.layer==="top"?U(_=>_.map(ie=>ie.id===c.id?z:ie)):L(_=>_.map(ie=>ie.id===c.id?z:ie))}},disabled:K,onClick:Oe=>Oe.stopPropagation(),onFocus:Oe=>Oe.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:K?"not-allowed":"pointer",opacity:K?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[i.jsx("option",{value:"",children:"-"}),i.jsx("option",{value:"+",children:"+"}),i.jsx("option",{value:"-",children:"-"})]},`polarity-${he.id}-${m}-${$e}`)}),i.jsx("td",{style:{padding:"2px 4px",color:Ne?"#28a745":"#999",fontWeight:Ne?600:400,fontFamily:"monospace"},children:Ne||"-"})]},m)})})]})})()]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[i.jsx("button",{onClick:()=>{d(null),ze(null)},disabled:K,style:{padding:"2px 5px",background:K?"#f5f5f5":"#fff",color:K?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:K?"not-allowed":"pointer",fontSize:"10px",opacity:K?.6:1},children:"Cancel"}),i.jsx("button",{onClick:st,disabled:K,style:{padding:"2px 5px",background:K?"#f5f5f5":"#0b5fff",color:K?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:K?"not-allowed":"pointer",fontSize:"10px",opacity:K?.6:1},children:"Save"})]})]})};function wx(){const[c,d]=j.useState([]),[y,u]=j.useState(!1),[U,L]=j.useState([]),[je,ze]=j.useState(null),[g,O]=j.useState("trace"),[pe,we]=j.useState("top"),Te=j.useRef([]),We=j.useRef(0),K=j.useRef(!1),ke=j.useCallback(()=>{u(!0),L([]),Te.current=[]},[]),_e=j.useCallback(()=>{u(!1),L([]),Te.current=[]},[]),he=j.useCallback(Z=>{L(st=>[...st,Z]),Te.current=[...Te.current,Z]},[]),N=j.useCallback(Z=>{d(st=>[...st,Z]),L([]),Te.current=[]},[]);return{drawingStrokes:c,setDrawingStrokes:d,isDrawing:y,setIsDrawing:u,currentStroke:U,setCurrentStroke:L,tracePreviewMousePos:je,setTracePreviewMousePos:ze,drawingMode:g,setDrawingMode:O,selectedDrawingLayer:pe,setSelectedDrawingLayer:we,currentStrokeRef:Te,lastTraceClickTimeRef:We,isDoubleClickingTraceRef:K,startDrawing:ke,stopDrawing:_e,addPointToStroke:he,finishStroke:N}}function Tx(){const[c,d]=j.useState(new Set),[y,u]=j.useState(!1),[U,L]=j.useState(new Set),[je,ze]=j.useState(new Set),[g,O]=j.useState(new Set),pe=j.useCallback(()=>{d(new Set),L(new Set),ze(new Set),O(new Set)},[]),we=j.useCallback((K,ke="stroke")=>{ke==="stroke"?d(_e=>new Set([..._e,K])):ke==="component"?L(_e=>new Set([..._e,K])):ke==="power"?ze(_e=>new Set([..._e,K])):ke==="ground"&&O(_e=>new Set([..._e,K]))},[]),Te=j.useCallback((K,ke="stroke")=>{ke==="stroke"?d(_e=>{const he=new Set(_e);return he.delete(K),he}):ke==="component"?L(_e=>{const he=new Set(_e);return he.delete(K),he}):ke==="power"?ze(_e=>{const he=new Set(_e);return he.delete(K),he}):ke==="ground"&&O(_e=>{const he=new Set(_e);return he.delete(K),he})},[]),We=j.useCallback((K,ke="stroke")=>{ke==="stroke"?d(K):ke==="component"?L(K):ke==="power"?ze(K):ke==="ground"&&O(K)},[]);return{selectedIds:c,setSelectedIds:d,isSelecting:y,setIsSelecting:u,selectedComponentIds:U,setSelectedComponentIds:L,selectedPowerIds:je,setSelectedPowerIds:ze,selectedGroundIds:g,setSelectedGroundIds:O,clearSelection:pe,addToSelection:we,removeFromSelection:Te,setSelection:We}}function jx(){const[c,d]=j.useState(null),[y,u]=j.useState(!1),[U,L]=j.useState(null),[je,ze]=j.useState("nudge"),g=j.useCallback((pe,we)=>{d(pe),u(!0),L(we)},[]),O=j.useCallback(()=>{u(!1),d(null),L(null)},[]);return{selectedImageForTransform:c,setSelectedImageForTransform:d,isTransforming:y,setIsTransforming:u,transformStartPos:U,setTransformStartPos:L,transformMode:je,setTransformMode:ze,startTransform:g,stopTransform:O}}function zx(){const[c,d]=j.useState(null),[y,u]=j.useState(null),[U,L]=j.useState("overlay"),[je,ze]=j.useState(50),[g,O]=j.useState(!1),[pe,we]=j.useState(!1),[Te,We]=j.useState(!1),[K,ke]=j.useState(!1),_e=j.useCallback(Z=>{d(Z)},[]),he=j.useCallback(Z=>{u(Z)},[]),N=j.useCallback(()=>{d(null),u(null)},[]);return{topImage:c,setTopImage:d,bottomImage:y,setBottomImage:u,currentView:U,setCurrentView:L,transparency:je,setTransparency:ze,isTransparencyCycling:g,setIsTransparencyCycling:O,isGrayscale:pe,setIsGrayscale:we,isBlackAndWhiteEdges:Te,setIsBlackAndWhiteEdges:We,isBlackAndWhiteInverted:K,setIsBlackAndWhiteInverted:ke,loadTopImage:_e,loadBottomImage:he,clearImages:N}}function Cx(){const[c,d]=j.useState(1),[y,u]=j.useState({x:0,y:0}),[U,L]=j.useState(!1),[je,ze]=j.useState(!1),g=j.useCallback(()=>{d(1),u({x:0,y:0})},[]),O=j.useCallback((K=1.2)=>{d(ke=>ke*K)},[]),pe=j.useCallback((K=1.2)=>{d(ke=>ke/K)},[]),we=j.useCallback(K=>{d(K)},[]),Te=j.useCallback((K,ke)=>{u(_e=>({x:_e.x+K,y:_e.y+ke}))},[]),We=j.useCallback((K,ke)=>{u({x:K,y:ke})},[]);return{viewScale:c,setViewScale:d,viewPan:y,setViewPan:u,isShiftConstrained:U,setIsShiftConstrained:L,showBothLayers:je,setShowBothLayers:ze,resetView:g,zoomIn:O,zoomOut:pe,setZoom:we,pan:Te,setPan:We}}function Ct(c,d,y,u){if(d==="power"){const L=c[d]||"";return typeof L=="string"&&L.trim()!==""?{value:L.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[d]!==void 0||c[y]!==void 0)return{value:c[d]||"",unit:c[y]||u};const U=c[d]||"";return typeof U=="string"&&U.trim()!==""?kx(U):{value:"",unit:u}}function kx(c){if(!c||c.trim()==="")return{value:"",unit:""};const d=c.trim(),y=d.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(y)return{value:y[1],unit:y[2]||""};const u=d.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return u?{value:u[1],unit:u[2]||""}:{value:d,unit:""}}function Rx(){const[c,d]=j.useState([]),[y,u]=j.useState([]),[U,L]=j.useState(null),[je,ze]=j.useState(null),[g,O]=j.useState(null),[pe,we]=j.useState(!1),[Te,We]=j.useState(null),K=j.useCallback((Z,st)=>{st==="top"?d(F=>[...F,Z]):u(F=>[...F,Z])},[]),ke=j.useCallback((Z,st,F)=>{F==="top"?d(D=>D.map(k=>k.id===Z?{...k,...st}:k)):u(D=>D.map(k=>k.id===Z?{...k,...st}:k))},[]),_e=j.useCallback((Z,st)=>{st==="top"?d(F=>F.filter(D=>D.id!==Z)):u(F=>F.filter(D=>D.id!==Z))},[]),he=j.useCallback((Z,st)=>{const F=Z.designator||"",D=Z.abbreviation||(F.length>0?F.charAt(0).toUpperCase():""),k={visible:!0,layer:st,id:Z.id,designator:F,abbreviation:D,manufacturer:"manufacturer"in Z&&Z.manufacturer||"",partNumber:"partNumber"in Z&&Z.partNumber||"",pinCount:Z.pinCount,x:Z.x,y:Z.y,orientation:Z.orientation??0,description:Z.description||""};if(Z.componentType==="Resistor"){const R=Z,m=Ct(R,"resistance","resistanceUnit",Fe("resistance"));k.resistance=m.value,k.resistanceUnit=m.unit;const de=Ct(R,"power","powerUnit","W");k.power=de.value||"1/4",k.tolerance=R.tolerance||"5%"}else if(Z.componentType==="Capacitor"){const R=Z,m=Ct(R,"capacitance","capacitanceUnit",Fe("capacitance"));k.capacitance=m.value,k.capacitanceUnit=m.unit;const de=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=de.value,k.voltageUnit=de.unit,k.tolerance=R.tolerance||"10%",k.dielectric=R.dielectric||"Ceramic"}else if(Z.componentType==="Electrolytic Capacitor"){const R=Z,m=Ct(R,"capacitance","capacitanceUnit",Fe("capacitance"));k.capacitance=m.value,k.capacitanceUnit=m.unit;const de=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=de.value,k.voltageUnit=de.unit,k.tolerance=R.tolerance||"20%",k.polarityCapacitor=R.polarity||"Positive";const G=Ct(R,"esr","esrUnit",Fe("esr"));k.esr=G.value,k.esrUnit=G.unit,k.temperature=R.temperature||""}else if(Z.componentType==="Film Capacitor"){const R=Z,m=Ct(R,"capacitance","capacitanceUnit",Fe("capacitance"));k.capacitance=m.value,k.capacitanceUnit=m.unit;const de=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=de.value,k.voltageUnit=de.unit,k.tolerance=R.tolerance||"10%",k.filmType=R.filmType||"Polyester"}else if(Z.componentType==="Diode"){const R=Z;k.diodeType=R.diodeType||"Standard";const m=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const de=Ct(R,"current","currentUnit",Fe("current"));k.current=de.value,k.currentUnit=de.unit,k.ledColor=R.ledColor||""}else if(Z.componentType==="Battery"){const R=Z,m=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const de=Ct(R,"capacity","capacityUnit",Fe("capacity"));k.capacity=de.value,k.capacityUnit=de.unit,k.chemistry=R.chemistry||"Li-ion"}else if(Z.componentType==="Fuse"){const R=Z,m=Ct(R,"current","currentUnit",Fe("current"));k.current=m.value,k.currentUnit=m.unit;const de=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=de.value,k.voltageUnit=de.unit,k.fuseType=R.fuseType||"Fast-blow"}else if(Z.componentType==="FerriteBead"){const R=Z,m=Ct(R,"impedance","impedanceUnit",Fe("impedance"));k.impedance=m.value,k.impedanceUnit=m.unit;const de=Ct(R,"current","currentUnit",Fe("current"));k.current=de.value,k.currentUnit=de.unit}else if(Z.componentType==="Connector"){const R=Z;k.connectorType=R.connectorType||"",k.gender=R.gender||"N/A"}else if(Z.componentType==="Jumper"){const R=Z;k.positions=R.positions||3}else if(Z.componentType==="Relay"){const R=Z,m=Ct(R,"coilVoltage","coilVoltageUnit",Fe("coilVoltage"));k.coilVoltage=m.value,k.coilVoltageUnit=m.unit,k.contactType=R.contactType||"SPST";const de=Ct(R,"current","currentUnit",Fe("current"));k.current=de.value,k.currentUnit=de.unit}else if(Z.componentType==="Inductor"){const R=Z,m=Ct(R,"inductance","inductanceUnit",Fe("inductance"));k.inductance=m.value,k.inductanceUnit=m.unit;const de=Ct(R,"current","currentUnit",Fe("current"));k.current=de.value,k.currentUnit=de.unit;const G=Ct(R,"resistance","resistanceUnit",Fe("resistance"));k.resistance=G.value,k.resistanceUnit=G.unit}else if(Z.componentType==="Speaker"){const R=Z,m=Ct(R,"impedance","impedanceUnit",Fe("impedance"));k.impedance=m.value,k.impedanceUnit=m.unit;const de=Ct(R,"power","powerUnit","W");k.power=de.value||"1"}else if(Z.componentType==="Motor"){const R=Z;k.motorType=R.motorType||"DC";const m=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const de=Ct(R,"current","currentUnit",Fe("current"));k.current=de.value,k.currentUnit=de.unit}else if(Z.componentType==="PowerSupply"){const R=Z,m=Ct(R,"inputVoltage","inputVoltageUnit",Fe("inputVoltage"));k.inputVoltage=m.value,k.inputVoltageUnit=m.unit;const de=Ct(R,"outputVoltage","outputVoltageUnit",Fe("outputVoltage"));k.outputVoltage=de.value,k.outputVoltageUnit=de.unit;const G=Ct(R,"current","currentUnit",Fe("current"));k.current=G.value,k.currentUnit=G.unit}else if(Z.componentType==="Transistor"){const R=Z;k.transistorType=R.transistorType||"BJT",k.polarity=R.polarity||"NPN";const m=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const de=Ct(R,"current","currentUnit",Fe("current"));k.current=de.value,k.currentUnit=de.unit}else if(Z.componentType==="ResistorNetwork"){const R=Z,m=Ct(R,"resistance","resistanceUnit",Fe("resistance"));k.resistance=m.value,k.resistanceUnit=m.unit,k.configuration=R.configuration||""}else if(Z.componentType==="Thermistor"){const R=Z,m=Ct(R,"resistance","resistanceUnit",Fe("resistance"));k.resistance=m.value,k.resistanceUnit=m.unit,k.thermistorType=R.thermistorType||"NTC",k.beta=R.beta||""}else if(Z.componentType==="Switch"){const R=Z;k.switchType=R.switchType||"Toggle";const m=Ct(R,"current","currentUnit",Fe("current"));k.current=m.value,k.currentUnit=m.unit;const de=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=de.value,k.voltageUnit=de.unit}else if(Z.componentType==="Transformer"){const R=Z,m=Ct(R,"primaryVoltage","primaryVoltageUnit",Fe("primaryVoltage"));k.primaryVoltage=m.value,k.primaryVoltageUnit=m.unit;const de=Ct(R,"secondaryVoltage","secondaryVoltageUnit",Fe("secondaryVoltage"));k.secondaryVoltage=de.value,k.secondaryVoltageUnit=de.unit;const G=Ct(R,"power","powerUnit",Fe("power"));k.power=G.value||"1",k.turns=R.turns||""}else if(Z.componentType==="TestPoint"){const R=Z;k.signal=R.signal||""}else if(Z.componentType==="IntegratedCircuit"){const R=Z;k.description=R.description||Z.designator||"",k.datasheet=R.datasheet||"",k.icType=R.icType||"Op-Amp"}else if(Z.componentType==="VacuumTube"){const R=Z;k.tubeType=R.tubeType||""}else if(Z.componentType==="VariableResistor"){const R=Z;k.vrType=R.vrType||"Potentiometer";const m=Ct(R,"resistance","resistanceUnit",Fe("resistance"));k.resistance=m.value,k.resistanceUnit=m.unit;const de=Ct(R,"power","powerUnit",Fe("power"));k.power=de.value||"1/4",k.taper=R.taper||""}else if(Z.componentType==="Crystal"){const R=Z;k.frequency=R.frequency||"",k.loadCapacitance=R.loadCapacitance||"",k.tolerance=R.tolerance||""}else if(Z.componentType==="ZenerDiode"){const R=Z,m=Ct(R,"voltage","voltageUnit",Fe("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const de=Ct(R,"power","powerUnit",Fe("power"));k.power=de.value||"1/4",k.tolerance=R.tolerance||"5%"}L(k)},[]),N=j.useCallback(()=>{L(null),ze(null)},[]);return{componentsTop:c,setComponentsTop:d,componentsBottom:y,setComponentsBottom:u,componentEditor:U,setComponentEditor:L,connectingPin:je,setConnectingPin:ze,componentDialogPosition:g,setComponentDialogPosition:O,isDraggingDialog:pe,setIsDraggingDialog:we,dialogDragOffset:Te,setDialogDragOffset:We,addComponent:K,updateComponent:ke,removeComponent:_e,openComponentEditor:he,closeComponentEditor:N}}function Dx(){const[c,d]=j.useState([]),[y,u]=j.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),[U,L]=j.useState([]),[je,ze]=j.useState([]),[g,O]=j.useState(null),[pe,we]=j.useState(null),Te=j.useCallback(D=>{d(k=>[...k,D])},[]),We=j.useCallback((D,k)=>{d(R=>R.map(m=>m.id===D?{...m,...k}:m))},[]),K=j.useCallback(D=>{d(k=>k.filter(R=>R.id!==D)),L(k=>k.filter(R=>R.powerBusId!==D))},[]),ke=j.useCallback(D=>{L(k=>[...k,D])},[]),_e=j.useCallback(D=>{L(k=>k.filter(R=>R.id!==D))},[]),he=j.useCallback(D=>{ze(k=>[...k,D])},[]),N=j.useCallback(D=>{ze(k=>k.filter(R=>R.id!==D))},[]),Z=j.useCallback(D=>{u(k=>[...k,D])},[]),st=j.useCallback((D,k)=>{u(R=>R.map(m=>m.id===D?{...m,...k}:m))},[]),F=j.useCallback(D=>{u(k=>k.filter(R=>R.id!==D)),ze(k=>k.filter(R=>R.groundBusId===D))},[]);return{powerBuses:c,setPowerBuses:d,groundBuses:y,setGroundBuses:u,powerSymbols:U,setPowerSymbols:L,groundSymbols:je,setGroundSymbols:ze,powerEditor:g,setPowerEditor:O,groundEditor:pe,setGroundEditor:we,addPowerBus:Te,updatePowerBus:We,removePowerBus:K,addPowerSymbol:ke,removePowerSymbol:_e,addGroundSymbol:he,removeGroundSymbol:N,addGroundBus:Z,updateGroundBus:st,removeGroundBus:F}}function Ax(){const d=j.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"18",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"18",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"18",10),topTestPointColor:localStorage.getItem("defaultTopTestPointColor")||"#FFFF00",bottomTestPointColor:localStorage.getItem("defaultBottomTestPointColor")||"#FFFF00",topTestPointSize:parseInt(localStorage.getItem("defaultTopTestPointSize")||"18",10),bottomTestPointSize:parseInt(localStorage.getItem("defaultBottomTestPointSize")||"18",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),componentConnectionColor:localStorage.getItem("defaultComponentConnectionColor")||"#E69F00",componentConnectionSize:parseInt(localStorage.getItem("defaultComponentConnectionSize")||"3",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[])(),[y,u]=j.useState(d.brushColor),[U,L]=j.useState(d.brushSize),[je,ze]=j.useState(d.topTraceColor),[g,O]=j.useState(d.bottomTraceColor),[pe,we]=j.useState(d.topTraceSize),[Te,We]=j.useState(d.bottomTraceSize),[K,ke]=j.useState(d.topPadColor),[_e,he]=j.useState(d.bottomPadColor),[N,Z]=j.useState(d.topPadSize),[st,F]=j.useState(d.bottomPadSize),[D,k]=j.useState(d.topTestPointColor),[R,m]=j.useState(d.bottomTestPointColor),[de,G]=j.useState(d.topTestPointSize),[Ne,$e]=j.useState(d.bottomTestPointSize),[Ke,Oe]=j.useState(d.topComponentColor),[ne,Y]=j.useState(d.bottomComponentColor),[oe,De]=j.useState(d.topComponentSize),[V,z]=j.useState(d.bottomComponentSize),[_,ie]=j.useState(d.componentConnectionColor),[xe,Ve]=j.useState(d.componentConnectionSize),lt=j.useCallback((Dt,et,Jt)=>{Dt==="trace"&&Jt?Jt==="top"?localStorage.setItem("defaultTopTraceSize",String(et)):localStorage.setItem("defaultBottomTraceSize",String(et)):Dt==="pad"&&Jt?Jt==="top"?localStorage.setItem("defaultTopPadSize",String(et)):localStorage.setItem("defaultBottomPadSize",String(et)):Dt==="testPoint"&&Jt?Jt==="top"?localStorage.setItem("defaultTopTestPointSize",String(et)):localStorage.setItem("defaultBottomTestPointSize",String(et)):Dt==="component"&&Jt?Jt==="top"?localStorage.setItem("defaultTopComponentSize",String(et)):localStorage.setItem("defaultBottomComponentSize",String(et)):Dt==="componentConnection"?localStorage.setItem("defaultComponentConnectionSize",String(et)):Dt==="via"?localStorage.setItem("defaultViaSize",String(et)):Dt==="power"?localStorage.setItem("defaultPowerSize",String(et)):Dt==="ground"?localStorage.setItem("defaultGroundSize",String(et)):Dt==="brush"&&localStorage.setItem("defaultBrushSize",String(et))},[]),ut=j.useCallback((Dt,et,Jt)=>{Dt==="trace"&&Jt?Jt==="top"?localStorage.setItem("defaultTopTraceColor",et):localStorage.setItem("defaultBottomTraceColor",et):Dt==="pad"&&Jt?Jt==="top"?localStorage.setItem("defaultTopPadColor",et):localStorage.setItem("defaultBottomPadColor",et):Dt==="testPoint"&&Jt?Jt==="top"?localStorage.setItem("defaultTopTestPointColor",et):localStorage.setItem("defaultBottomTestPointColor",et):Dt==="component"&&Jt?Jt==="top"?localStorage.setItem("defaultTopComponentColor",et):localStorage.setItem("defaultBottomComponentColor",et):Dt==="componentConnection"?localStorage.setItem("defaultComponentConnectionColor",et):Dt==="via"?localStorage.setItem("defaultViaColor",et):Dt==="brush"&&localStorage.setItem("defaultBrushColor",et)},[]);return{brushColor:y,setBrushColor:u,brushSize:U,setBrushSize:L,topTraceColor:je,setTopTraceColor:ze,bottomTraceColor:g,setBottomTraceColor:O,topTraceSize:pe,setTopTraceSize:we,bottomTraceSize:Te,setBottomTraceSize:We,topPadColor:K,setTopPadColor:ke,bottomPadColor:_e,setBottomPadColor:he,topPadSize:N,setTopPadSize:Z,bottomPadSize:st,setBottomPadSize:F,topTestPointColor:D,setTopTestPointColor:k,bottomTestPointColor:R,setBottomTestPointColor:m,topTestPointSize:de,setTopTestPointSize:G,bottomTestPointSize:Ne,setBottomTestPointSize:$e,topComponentColor:Ke,setTopComponentColor:Oe,bottomComponentColor:ne,setBottomComponentColor:Y,topComponentSize:oe,setTopComponentSize:De,bottomComponentSize:V,setBottomComponentSize:z,componentConnectionColor:_,setComponentConnectionColor:ie,componentConnectionSize:xe,setComponentConnectionSize:Ve,saveDefaultSize:lt,saveDefaultColor:ut}}const Nx=(c,d,y)=>{const u=`tool_${c}_color`,U=`tool_${c}_size`;localStorage.setItem(u,d),localStorage.setItem(U,String(y))};function Bx(c,d,y,u,U,L,je,ze,g,O,pe,we,Te,We,K,ke,_e,he,N,Z,st,F,D,k,R){const[m,de]=j.useState(()=>c()),G=j.useRef(null),Ne=j.useRef(u),$e=j.useRef(U),Ke=j.useCallback(Y=>d==="draw"&&y==="trace"?Y.get("trace"):d==="draw"&&y==="via"?Y.get("via"):d==="draw"&&y==="pad"?Y.get("pad"):d==="component"?Y.get("component"):d==="power"?Y.get("power"):d==="ground"?Y.get("ground"):null,[d,y]);j.useEffect(()=>{de(Y=>{const oe=Ke(Y),De=oe?.id||null,V=G.current,z=new Map(Y);if(V&&V!==De){const _=Y.get(V);_&&(Nx(V,Ne.current,$e.current),z.set(V,{..._,settings:{color:Ne.current,size:$e.current}}))}if(oe&&De!==V)if(d==="draw"&&y==="trace"){const _=F||"top",ie=_==="top"?L:je,xe=_==="top"?ze:g;Ne.current=ie,$e.current=xe,z.set("trace",{...oe,settings:{color:ie,size:xe}})}else if(d==="draw"&&y==="pad"){const _=D||"top",ie=_==="top"?O:pe,xe=_==="top"?we:Te;Ne.current=ie,$e.current=xe,z.set("pad",{...oe,settings:{color:ie,size:xe}})}else if(d==="component"){const _=R||"top",ie=_==="top"?he:N,xe=_==="top"?Z:st;Ne.current=ie,$e.current=xe,z.set("component",{...oe,settings:{color:ie,size:xe}})}else Ne.current=oe.settings.color,$e.current=oe.settings.size;return G.current=De,z})},[d,y,u,U,L,je,ze,g,O,pe,we,Te,he,N,Z,st,F,D,R,Ke]);const Oe=j.useCallback((Y,oe)=>{de(De=>{const V=new Map(De),z=V.get(Y);return z&&V.set(Y,{...z,settings:oe}),V})},[]),ne=j.useCallback((Y,oe,De)=>{de(V=>{const z=new Map(V),_=z.get(Y);if(_){const ie=new Map(_.layerSettings);ie.set(oe,De),z.set(Y,{..._,layerSettings:ie})}return z})},[]);return{toolRegistry:m,setToolRegistry:de,updateToolSettings:Oe,updateToolLayerSettings:ne,getCurrentToolDef:Ke}}function Ux(c){const{currentTool:d,drawingMode:y,traceToolLayer:u,padToolLayer:U,testPointToolLayer:L,componentToolLayer:je}=c,[ze,g]=j.useState(0),O=j.useCallback(()=>d==="draw"&&y==="via"?"via":d==="draw"&&y==="pad"?U==="bottom"?"padBottom":"padTop":d==="draw"&&y==="testPoint"?L==="bottom"?"testPointBottom":"testPointTop":d==="draw"&&y==="trace"?u==="bottom"?"traceBottom":"traceTop":d==="component"?je==="bottom"?"componentBottom":"componentTop":d==="power"?"power":d==="ground"?"ground":null,[d,y,U,L,u,je]),pe=j.useCallback(()=>{const K=O();if(K){const ke=bt.get(K);return{currentTool:d,drawingMode:y,layer:d==="draw"&&y==="pad"?U||"top":d==="draw"&&y==="testPoint"?L||"top":d==="draw"&&y==="trace"?u||"top":d==="component"?je||"top":void 0,toolInstanceId:K,color:ke.color,size:ke.size}}return{currentTool:d,drawingMode:y,layer:void 0,toolInstanceId:null,color:"#000000",size:10}},[d,y,U,L,u,je,O]);j.useEffect(()=>{const K=O();return K?bt.subscribe(K,()=>{g(_e=>_e+1)}):void 0},[O]);const we=pe(),Te=j.useCallback(K=>{const ke=O();ke&&bt.setColor(ke,K)},[O]),We=j.useCallback(K=>{const ke=O();ke&&bt.setSize(ke,K)},[O]);return{toolState:we,setColor:Te,setSize:We,getCurrentToolInstanceId:O}}function Mx(){const[c,d]=j.useState(!1),[y,u]=j.useState(!1),[U,L]=j.useState(!1),[je,ze]=j.useState(!1),[g,O]=j.useState(!1),[pe,we]=j.useState(!1),[Te,We]=j.useState(!1),[K,ke]=j.useState(!1),_e=j.useCallback(()=>{d(!0),u(!0),L(!0),ze(!0),O(!0),we(!0),We(!0),ke(!0)},[]),he=j.useCallback(()=>{d(!1),u(!1),L(!1),ze(!1),O(!1),we(!1),We(!1),ke(!1)},[]);return{areImagesLocked:c,setAreImagesLocked:d,areViasLocked:y,setAreViasLocked:u,arePadsLocked:U,setArePadsLocked:L,areTestPointsLocked:je,setAreTestPointsLocked:ze,areTracesLocked:g,setAreTracesLocked:O,areComponentsLocked:pe,setAreComponentsLocked:we,areGroundNodesLocked:Te,setAreGroundNodesLocked:We,arePowerNodesLocked:K,setArePowerNodesLocked:ke,lockAll:_e,unlockAll:he}}function Px(){const[c,d]=j.useState(null),[y,u]=j.useState({visible:!1,size:6}),[U,L]=j.useState({visible:!1,interval:5}),[je,ze]=j.useState({visible:!1,source:null,interval:5}),[g,O]=j.useState({visible:!1,text:""}),[pe,we]=j.useState({visible:!1,title:"",message:""}),[Te,We]=j.useState({visible:!1}),[K,ke]=j.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[_e,he]=j.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[N,Z]=j.useState(!1),[st,F]=j.useState(!0);return{openMenu:c,setOpenMenu:d,setSizeDialog:y,setSetSizeDialog:u,autoSaveDialog:U,setAutoSaveDialog:L,autoSavePromptDialog:je,setAutoSavePromptDialog:ze,debugDialog:g,setDebugDialog:O,errorDialog:pe,setErrorDialog:we,newProjectDialog:Te,setNewProjectDialog:We,newProjectSetupDialog:K,setNewProjectSetupDialog:ke,saveAsDialog:_e,setSaveAsDialog:he,showColorPicker:N,setShowColorPicker:Z,showWelcomeDialog:st,setShowWelcomeDialog:F}}function _x(){const[c,d]=j.useState(!1),[y,u]=j.useState(1),[U,L]=j.useState(null),[je,ze]=j.useState(""),[g,O]=j.useState(""),[pe,we]=j.useState(null),[Te,We]=j.useState("pcb_project"),[K,ke]=j.useState([]),[_e,he]=j.useState(-1),N=j.useRef(null),Z=j.useRef(!1),st=j.useRef(!1);return{autoSaveEnabled:c,setAutoSaveEnabled:d,autoSaveInterval:y,setAutoSaveInterval:u,autoSaveDirHandle:U,setAutoSaveDirHandle:L,autoSaveBaseName:je,setAutoSaveBaseName:ze,currentProjectFilePath:g,setCurrentProjectFilePath:O,projectDirHandle:pe,setProjectDirHandle:we,projectName:Te,setProjectName:We,autoSaveFileHistory:K,setAutoSaveFileHistory:ke,currentFileIndex:_e,setCurrentFileIndex:he,autoSaveIntervalRef:N,hasChangesSinceLastAutoSaveRef:Z,prevAutoSaveEnabledRef:st}}function Ox(){const d=zx(),{topImage:y,setTopImage:u,bottomImage:U,setBottomImage:L,currentView:je,setCurrentView:ze,transparency:g,setTransparency:O,isTransparencyCycling:pe,setIsTransparencyCycling:we,isGrayscale:Te,setIsGrayscale:We,isBlackAndWhiteEdges:K,setIsBlackAndWhiteEdges:ke,isBlackAndWhiteInverted:_e,setIsBlackAndWhiteInverted:he}=d,[N,Z]=j.useState("none"),st=Ax(),{brushColor:F,setBrushColor:D,brushSize:k,setBrushSize:R,topTraceColor:m,setTopTraceColor:de,bottomTraceColor:G,setBottomTraceColor:Ne,topTraceSize:$e,setTopTraceSize:Ke,bottomTraceSize:Oe,setBottomTraceSize:ne,topPadColor:Y,setTopPadColor:oe,bottomPadColor:De,setBottomPadColor:V,topPadSize:z,setTopPadSize:_,bottomPadSize:ie,setBottomPadSize:xe,topTestPointColor:Ve,setTopTestPointColor:lt,bottomTestPointColor:ut,setBottomTestPointColor:Dt,topTestPointSize:et,setTopTestPointSize:Jt,bottomTestPointSize:Ii,setBottomTestPointSize:Va,topComponentColor:fi,setTopComponentColor:Qn,bottomComponentColor:Kn,setBottomComponentColor:el,topComponentSize:Wi,setTopComponentSize:Ol,bottomComponentSize:pi,setBottomComponentSize:bl,componentConnectionColor:Ia,setComponentConnectionColor:Sc,componentConnectionSize:Fo,setComponentConnectionSize:hi,saveDefaultSize:qe,saveDefaultColor:jt}=st,br=wx(),{drawingStrokes:Ie,setDrawingStrokes:Vt,isDrawing:pa,setIsDrawing:Yo,currentStroke:It,setCurrentStroke:Nn,tracePreviewMousePos:gn,setTracePreviewMousePos:gi,drawingMode:be,setDrawingMode:Hl,selectedDrawingLayer:gt,setSelectedDrawingLayer:Bn,currentStrokeRef:El,lastTraceClickTimeRef:Lo,isDoubleClickingTraceRef:ha}=br,Vl=jx(),{selectedImageForTransform:At,setSelectedImageForTransform:Il,isTransforming:Xo,setIsTransforming:ga,transformStartPos:xa,setTransformStartPos:zi,transformMode:Wl,setTransformMode:_s}=Vl,Os=Cx(),{viewScale:Pe,setViewScale:$i,viewPan:vt,setViewPan:Yn,isShiftConstrained:Hs,setIsShiftConstrained:vl,showBothLayers:Un,setShowBothLayers:Jn}=Os,[zt,Wa]=j.useState("top"),[en,vr]=j.useState("top"),[tn,uo]=j.useState("top"),[hn,$a]=j.useState("top"),$l=Ue.useRef("top"),ya=Ue.useRef("top"),Fl=Ue.useRef("top"),mn=Ue.useRef("top");Ue.useEffect(()=>{$l.current=zt},[zt]),Ue.useEffect(()=>{ya.current=en},[en]),Ue.useEffect(()=>{Fl.current=tn},[tn]),Ue.useEffect(()=>{mn.current=hn},[hn]);const mr=Ux({currentTool:N,drawingMode:be,traceToolLayer:zt,padToolLayer:en,testPointToolLayer:tn,componentToolLayer:hn}),{toolState:Mn}=mr,ba=Bx(cx,N,be,F,k,m,G,$e,Oe,Y,De,z,ie,Ve,ut,et,Ii,fi,Kn,Wi,pi,zt,en,tn,hn),{toolRegistry:kt,setToolRegistry:Cn,getCurrentToolDef:Fa,updateToolSettings:Es,updateToolLayerSettings:fo}=ba,po=Ue.useRef(null),ei=Ue.useRef(F),kn=Ue.useRef(k);Ue.useEffect(()=>{Cn(a=>{const r=Fa(a),p=r?.id||null,x=po.current,v=new Map(a);if(x&&x!==p){const b=a.get(x);b&&v.set(x,{...b,settings:{color:ei.current,size:kn.current}})}if(r&&p!==x)if(N==="draw"&&be==="trace"){const b=zt||"top",f=b==="top"?m:G,S=b==="top"?$e:Oe;D(f),R(S),ei.current=f,kn.current=S;const T=new Map(r.layerSettings);T.set("top",{color:m,size:$e}),T.set("bottom",{color:G,size:Oe}),v.set("trace",{...r,settings:{color:f,size:S},layerSettings:T})}else if(N==="draw"&&be==="pad"){const b=en||"top",f=b==="top"?Y:De,S=b==="top"?z:ie;D(f),R(S),ei.current=f,kn.current=S;const T=new Map(r.layerSettings);T.set("top",{color:Y,size:z}),T.set("bottom",{color:De,size:ie}),v.set("pad",{...r,settings:{color:f,size:S},layerSettings:T})}else if(N==="draw"&&be==="testPoint"){const b=tn||"top",f=b==="top"?Ve:ut,S=b==="top"?et:Ii;D(f),R(S),ei.current=f,kn.current=S;const T=new Map(r.layerSettings);T.set("top",{color:Ve,size:et}),T.set("bottom",{color:ut,size:Ii}),v.set("testPoint",{...r,settings:{color:f,size:S},layerSettings:T})}else if(N==="component"){const b=hn||"top",f=b==="top"?fi:Kn,S=b==="top"?Wi:pi;D(f),R(S),ei.current=f,kn.current=S;const T=new Map(r.layerSettings);T.set("top",{color:fi,size:Wi}),T.set("bottom",{color:Kn,size:pi}),v.set("component",{...r,settings:{color:f,size:S},layerSettings:T})}else{const b=r.settings;D(b.color),R(b.size),ei.current=b.color,kn.current=b.size}return po.current=p,v})},[N,be,Fa,m,G,$e,Oe,Y,De,z,ie,Ve,ut,et,Ii,tn,fi,Kn,Wi,pi]),Ue.useEffect(()=>{const a=kt.get("trace");if(a){const v=a.layerSettings.get("top"),b=a.layerSettings.get("bottom");v&&(de(v.color),Ke(v.size)),b&&(Ne(b.color),ne(b.size))}const r=kt.get("pad");if(r){const v=r.layerSettings.get("top"),b=r.layerSettings.get("bottom");v&&(oe(v.color),_(v.size)),b&&(V(b.color),xe(b.size))}const p=kt.get("testPoint");if(p){const v=p.layerSettings.get("top"),b=p.layerSettings.get("bottom");v&&(lt(v.color),Jt(v.size)),b&&(Dt(b.color),Va(b.size))}const x=kt.get("component");if(x){const v=x.layerSettings.get("top"),b=x.layerSettings.get("bottom");v&&(Qn(v.color),Ol(v.size)),b&&(el(b.color),bl(b.size))}},[]),Ue.useEffect(()=>{Cn(a=>{const r=new Map(a),p=a.get("trace");if(p){const S=new Map(p.layerSettings);S.set("top",{color:m,size:$e}),S.set("bottom",{color:G,size:Oe}),r.set("trace",{...p,layerSettings:S})}const x=a.get("pad");if(x){const S=new Map(x.layerSettings);S.set("top",{color:Y,size:z}),S.set("bottom",{color:De,size:ie}),r.set("pad",{...x,layerSettings:S})}const v=a.get("testPoint");if(v){const S=new Map(v.layerSettings);S.set("top",{color:Ve,size:et}),S.set("bottom",{color:ut,size:Ii}),r.set("testPoint",{...v,layerSettings:S})}const b=a.get("component");if(b){const S=new Map(b.layerSettings);S.set("top",{color:fi,size:Wi}),S.set("bottom",{color:Kn,size:pi}),r.set("component",{...b,layerSettings:S})}const f=a.get("componentConnection");return f&&r.set("componentConnection",{...f,settings:{color:Ia,size:Fo}}),r})},[m,G,$e,Oe,Y,De,z,ie,Ve,ut,et,Ii,fi,Kn,Wi,pi,Ia,Fo,Cn]),Ue.useEffect(()=>{Cn(a=>{const r=Fa(a);if(r)if(N==="draw"&&be==="trace"){const p=zt||"top";p==="top"?(de(F),Ke(k),jt("trace",F,"top"),qe("trace",k,"top")):(Ne(F),ne(k),jt("trace",F,"bottom"),qe("trace",k,"bottom"));const x=new Map(a),v=new Map(r.layerSettings);return v.set(p,{color:F,size:k}),x.set(r.id,{...r,layerSettings:v,settings:{color:F,size:k}}),ei.current=F,kn.current=k,x}else if(N==="draw"&&be==="pad"){const p=en||"top";p==="top"?(oe(F),_(k),jt("pad",F,"top"),qe("pad",k,"top")):(V(F),xe(k),jt("pad",F,"bottom"),qe("pad",k,"bottom"));const x=new Map(a),v=new Map(r.layerSettings);return v.set(p,{color:F,size:k}),x.set(r.id,{...r,layerSettings:v,settings:{color:F,size:k}}),ei.current=F,kn.current=k,x}else if(N==="draw"&&be==="testPoint"){const p=tn||"top";p==="top"?(lt(F),Jt(k),jt("testPoint",F,"top"),qe("testPoint",k,"top")):(Dt(F),Va(k),jt("testPoint",F,"bottom"),qe("testPoint",k,"bottom"));const x=new Map(a),v=new Map(r.layerSettings);return v.set(p,{color:F,size:k}),x.set(r.id,{...r,layerSettings:v,settings:{color:F,size:k}}),ei.current=F,kn.current=k,x}else if(N==="component"){const p=hn||"top";p==="top"?(Qn(F),Ol(k),jt("component",F,"top"),qe("component",k,"top")):(el(F),bl(k),jt("component",F,"bottom"),qe("component",k,"bottom"));const x=new Map(a),v=new Map(r.layerSettings);return v.set(p,{color:F,size:k}),x.set(r.id,{...r,layerSettings:v,settings:{color:F,size:k}}),ei.current=F,kn.current=k,x}else{const p=new Map(a);return p.set(r.id,{...r,settings:{color:F,size:k}}),ei.current=F,kn.current=k,p}return a})},[F,k,N,be,zt,en,tn,hn,Fa,jt,qe,yc,de,Ne,Ke,ne,oe,V,_,xe,lt,Dt,Jt,Va,Qn,el,Ol,bl]),Ue.useEffect(()=>{N==="power"?(Ft(!0),Rl(null)):(Ft(!1),Rl(null))},[N]),Ue.useEffect(()=>{N==="ground"?(Dl(!0),ss(null)):(Dl(!1),ss(null))},[N]),Ue.useEffect(()=>{na(N==="draw"&&be==="trace")},[N,be]),Ue.useEffect(()=>{Ro(N==="draw"&&be==="pad")},[N,be]),Ue.useEffect(()=>{to(N==="draw"&&be==="testPoint")},[N,be]),Ue.useEffect(()=>{Mn.toolInstanceId&&(D(Mn.color),R(Mn.size))},[Mn.toolInstanceId,Mn.color,Mn.size,D,R,N,be]);const[xi,ml]=j.useState(void 0),[,Pn]=j.useState([]),[,_n]=j.useState([]),[,Yl]=j.useState([]),[,On]=j.useState([]),[yi,bi]=j.useState([]),[En,Vn]=j.useState([]),[Go,va]=j.useState([]),[Vs,Is]=j.useState([]),rn=j.useRef(null),Sr=Tx(),{selectedIds:mt,setSelectedIds:St,isSelecting:ve,setIsSelecting:Rn,selectedComponentIds:pt,setSelectedComponentIds:ht,selectedPowerIds:at,setSelectedPowerIds:wt,selectedGroundIds:Ut,setSelectedGroundIds:Ee}=Sr,ti=Rx(),{componentsTop:ft,setComponentsTop:xn,componentsBottom:Nt,setComponentsBottom:cn,componentEditor:Ci,setComponentEditor:wc,connectingPin:Wn,setConnectingPin:Sl,componentDialogPosition:wl,setComponentDialogPosition:ma,isDraggingDialog:wr,setIsDraggingDialog:Ws,dialogDragOffset:Ya,setDialogDragOffset:Tc,openComponentEditor:vi}=ti,ho=Dx(),{powerBuses:rt,setPowerBuses:ni,groundBuses:Ln,setGroundBuses:Ll,powerSymbols:jc,setPowerSymbols:Xn,groundSymbols:Tr,setGroundSymbols:Fi,powerEditor:Yi,setPowerEditor:$s}=ho,uu=Mx(),{areImagesLocked:ii,setAreImagesLocked:Fs,areViasLocked:li,setAreViasLocked:jr,arePadsLocked:Li,setArePadsLocked:zc,areTestPointsLocked:Xl,setAreTestPointsLocked:fu,areTracesLocked:ai,setAreTracesLocked:zr,areComponentsLocked:ki,setAreComponentsLocked:qo,areGroundNodesLocked:Ri,setAreGroundNodesLocked:Ys,arePowerNodesLocked:yn,setArePowerNodesLocked:Ls}=uu,pu=Px(),{openMenu:hu,setOpenMenu:Cc,setSizeDialog:go,setSetSizeDialog:La,autoSaveDialog:Cr,setAutoSaveDialog:Xa,autoSavePromptDialog:Zo,setAutoSavePromptDialog:Gl,debugDialog:Ga,setDebugDialog:Sa,errorDialog:kc,setErrorDialog:Xs,newProjectDialog:kr,setNewProjectDialog:Qo,newProjectSetupDialog:dn,setNewProjectSetupDialog:Ko,saveAsDialog:Zt,setSaveAsDialog:Gs,showColorPicker:Rc,setShowColorPicker:Rr}=pu,pd=_x(),{autoSaveEnabled:Di,setAutoSaveEnabled:mi,autoSaveInterval:Tl,setAutoSaveInterval:wa,autoSaveDirHandle:jl,setAutoSaveDirHandle:qa,autoSaveBaseName:Ta,setAutoSaveBaseName:tl,currentProjectFilePath:Jo,setCurrentProjectFilePath:Ai,projectDirHandle:$n,setProjectDirHandle:ja,projectName:oi,setProjectName:zl,autoSaveFileHistory:gu,setAutoSaveFileHistory:qs,currentFileIndex:hd,setCurrentFileIndex:Ni,autoSaveIntervalRef:Wt,hasChangesSinceLastAutoSaveRef:Cl,prevAutoSaveEnabledRef:Dr}=pd,Dc=j.useRef(null),Ac=j.useRef(null),Zs=j.useRef(null),Ar=j.useRef(null),za=j.useRef(null),xo=j.useRef(null),es=j.useRef(null),[Ca,Nr]=j.useState(!1),nl=j.useRef(null),ql=j.useRef(null),[yo,Qs]=j.useState(!1),[Bi,Ks]=j.useState(null),[Js,Nc]=j.useState(!1),[er,tr]=j.useState(null),[Br,nr]=j.useState(null),[bo,Bc]=j.useState({width:960,height:600}),Ui=j.useRef(null),ir=j.useRef(null),il=j.useRef(null),ka=j.useRef(null),lr=j.useRef(null),ar=j.useRef(null),or=j.useRef(null),Ur=j.useRef(null),[Zl,vo]=j.useState(!0),[mo,kl]=j.useState(!0),[Mi,si]=j.useState(!0),[Pi,ll]=j.useState(!0),[Xi,So]=j.useState(!0),[Gn,ts]=j.useState(!0),[al,ns]=j.useState(!0),[Ra,Gi]=j.useState(!0),[qi,wo]=j.useState(!0),[Zi,Da]=j.useState(!0),[Dn,ri]=j.useState(!0),[Si,Qi]=j.useState(!0),tt=jc,nt=Tr,[gd,is]=j.useState(!1),[ls,as]=j.useState(null),[In,Ft]=j.useState(!1),[Bt,Rl]=j.useState(null),[ol,os]=j.useState(!1),[Ql,Mr]=j.useState(null),[Pr,Dl]=j.useState(!1),[sl,ss]=j.useState(null),[Kl,sr]=j.useState(()=>{const a=localStorage.getItem("autoAssignDesignators");return a!==null?a==="true":!0}),[rl,cl]=j.useState(!1),[Za,Al]=j.useState(!1),To=j.useRef({}),[Nl,Aa]=j.useState(!0),[Na,Jl]=j.useState(!0),[nn,Qa]=j.useState(null),[_r,xd]=j.useState(!1),[Or,yd]=j.useState(null),[Sn,Ka]=j.useState(!1),[ea,Ja]=j.useState(null),[rr,jo]=j.useState(!1),[Ba,bd]=j.useState(null),[vd,xu]=j.useState(()=>{const a=localStorage.getItem("boardDimensions");if(a)try{return JSON.parse(a)}catch{return null}return null}),[md,eo]=j.useState(!1);Ue.useEffect(()=>{rt.length===0&&ni([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[rt.length,ni]);const dl=j.useCallback((a,r)=>{const p=tt.find(v=>v.pointId===a);if(p){const v=r.find(f=>f.id===p.powerBusId);return`Via (${v?v.voltage:p.type||"Power Node"})`}const x=nt.find(v=>v.pointId===a);return x?`Via (${x.type||"Ground"})`:"Via (Signal)"},[tt,nt]),Ki=j.useCallback((a,r)=>{const p=tt.find(v=>v.pointId===a);if(p){const v=r.find(f=>f.id===p.powerBusId);return`Pad (${v?v.voltage:p.type||"Power Node"})`}const x=nt.find(v=>v.pointId===a);return x?`Pad (${x.type||"Ground"})`:"Pad (Signal)"},[tt,nt]),ta=j.useCallback((a,r)=>{const p=tt.find(v=>v.pointId===a);if(p){const v=r.find(f=>f.id===p.powerBusId);return`Test Point (${v?v.voltage:p.type||"Power Node"})`}const x=nt.find(v=>v.pointId===a);return x?`Test Point (${x.type||"Ground"})`:"Test Point (Signal)"},[tt,nt]),rs=j.useCallback(()=>{const a=Ie.filter(r=>r.type==="via").map(r=>r.id);St(new Set(a)),ht(new Set),wt(new Set),Ee(new Set)},[Ie,St,ht,wt,Ee]),Uc=j.useCallback(()=>{const a=Ie.filter(r=>r.type==="trace").map(r=>r.id);St(new Set(a)),ht(new Set),wt(new Set),Ee(new Set)},[Ie,St,ht,wt,Ee]),Hr=j.useCallback(()=>{const a=Ie.filter(r=>r.type==="pad").map(r=>r.id);St(new Set(a)),ht(new Set),wt(new Set),Ee(new Set)},[Ie,St,ht,wt,Ee]),Er=j.useCallback(()=>{const a=[...ft,...Nt].map(r=>r.id);ht(new Set(a)),St(new Set),wt(new Set),Ee(new Set)},[ft,Nt,ht,St,wt,Ee]),Sd=j.useCallback(()=>{const a=[...ft,...Nt].filter(r=>{const p=r.pinConnections||[];return!(p.length>0&&p.length===r.pinCount&&p.every(v=>v&&v.trim()!==""))}).map(r=>r.id);ht(new Set(a)),St(new Set),wt(new Set),Ee(new Set),Sa({visible:!0,text:""})},[ft,Nt,ht,St,wt,Ee,Sa]),wd=j.useCallback((a,r,p)=>{const x=rn.current;if(!x)return;const v=x.width-80,b=x.height-80,f=v/2,S=b/2,T=f-r*Pe,C=S-p*Pe;Yn({x:T,y:C}),ht(new Set([a])),St(new Set),wt(new Set),Ee(new Set)},[Pe,Yn,ht,St,wt,Ee]),zo=Ue.useMemo(()=>{const a=new Set(tt.map(p=>p.powerBusId).filter(p=>typeof p=="string"&&p.length>0)),r=rt.filter(p=>a.has(p.id)).map(p=>p.name);return Array.from(new Set(r)).sort()},[tt,rt]),Co=Ue.useMemo(()=>{const a=new Set(nt.map(p=>p.groundBusId).filter(p=>typeof p=="string"&&p.length>0)),r=Ln.filter(p=>a.has(p.id)).map(p=>p.name);return Array.from(new Set(r)).sort()},[nt,Ln]),Td=j.useCallback(()=>{const a=tt.map(r=>r.id);wt(new Set(a)),St(new Set),ht(new Set),Ee(new Set)},[tt,wt,St,ht,Ee]),jd=j.useCallback(()=>{const a=nt.map(r=>r.id);Ee(new Set(a)),St(new Set),ht(new Set),wt(new Set)},[nt,Ee,St,ht,wt]),cs=j.useCallback(a=>{const r=rt.filter(x=>x.name===a).map(x=>x.id);if(r.length===0)return;const p=tt.filter(x=>x.powerBusId&&r.includes(x.powerBusId)).map(x=>x.id);wt(new Set(p)),St(new Set),ht(new Set),Ee(new Set)},[rt,tt,wt,St,ht,Ee]),cr=j.useCallback(a=>{const r=Ln.filter(x=>x.name===a).map(x=>x.id);if(r.length===0)return;const p=nt.filter(x=>x.groundBusId&&r.includes(x.groundBusId)).map(x=>x.id);Ee(new Set(p)),St(new Set),ht(new Set),wt(new Set)},[Ln,nt,Ee,St,ht,wt]);j.useCallback(a=>{switch(a.componentType){case"Resistor":case"ResistorNetwork":case"Thermistor":case"VariableResistor":if("resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit)return`${a.resistance} ${a.resistanceUnit}`;break;case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":if("capacitance"in a&&a.capacitance&&"capacitanceUnit"in a&&a.capacitanceUnit)return`${a.capacitance} ${a.capacitanceUnit}`;break;case"Inductor":if("inductance"in a&&a.inductance&&"inductanceUnit"in a&&a.inductanceUnit)return`${a.inductance} ${a.inductanceUnit}`;break;case"Battery":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"Diode":case"ZenerDiode":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"Fuse":if("current"in a&&a.current&&"currentUnit"in a&&a.currentUnit)return`${a.current} ${a.currentUnit}`;break;case"FerriteBead":if("impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit)return`${a.impedance} ${a.impedanceUnit}`;break;case"Relay":if("coilVoltage"in a&&a.coilVoltage&&"coilVoltageUnit"in a&&a.coilVoltageUnit)return`${a.coilVoltage} ${a.coilVoltageUnit}`;break;case"Speaker":if("impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit)return`${a.impedance} ${a.impedanceUnit}`;break;case"Motor":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"PowerSupply":if("outputVoltage"in a&&a.outputVoltage&&"outputVoltageUnit"in a&&a.outputVoltageUnit)return`${a.outputVoltage} ${a.outputVoltageUnit}`;break;case"Transistor":if("partNumber"in a&&a.partNumber)return a.partNumber;break;case"IntegratedCircuit":if("partNumber"in a&&a.partNumber)return a.partNumber;break}return null},[]);const Vr=j.useCallback(a=>{const r=[];switch(a.componentType){case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":"capacitance"in a&&a.capacitance&&"capacitanceUnit"in a&&a.capacitanceUnit&&r.push(`Capacitance: ${a.capacitance} ${a.capacitanceUnit}`),"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"dielectric"in a&&a.dielectric&&r.push(`Dielectric: ${a.dielectric}`);break;case"Resistor":case"ResistorNetwork":case"Thermistor":"resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit&&r.push(`Resistance: ${a.resistance} ${a.resistanceUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"VariableResistor":"resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit&&r.push(`Resistance: ${a.resistance} ${a.resistanceUnit}`),"vrType"in a&&a.vrType&&r.push(`Type: ${a.vrType}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"taper"in a&&a.taper&&r.push(`Taper: ${a.taper}`);break;case"Inductor":"inductance"in a&&a.inductance&&"inductanceUnit"in a&&a.inductanceUnit&&r.push(`Inductance: ${a.inductance} ${a.inductanceUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"Battery":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"capacity"in a&&a.capacity&&"capacityUnit"in a&&a.capacityUnit&&r.push(`Capacity: ${a.capacity} ${a.capacityUnit}`);break;case"Diode":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`);break;case"ZenerDiode":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"Fuse":"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`),"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`);break;case"FerriteBead":"impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit&&r.push(`Impedance: ${a.impedance} ${a.impedanceUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`);break;case"Relay":"coilVoltage"in a&&a.coilVoltage&&"coilVoltageUnit"in a&&a.coilVoltageUnit&&r.push(`Coil Voltage: ${a.coilVoltage} ${a.coilVoltageUnit}`),"contactRating"in a&&a.contactRating&&r.push(`Contact Rating: ${a.contactRating}`);break;case"Speaker":"impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit&&r.push(`Impedance: ${a.impedance} ${a.impedanceUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`);break;case"Motor":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"speed"in a&&a.speed&&"speedUnit"in a&&a.speedUnit&&r.push(`Speed: ${a.speed} ${a.speedUnit}`);break;case"PowerSupply":"outputVoltage"in a&&a.outputVoltage&&"outputVoltageUnit"in a&&a.outputVoltageUnit&&r.push(`Output Voltage: ${a.outputVoltage} ${a.outputVoltageUnit}`),"outputCurrent"in a&&a.outputCurrent&&"outputCurrentUnit"in a&&a.outputCurrentUnit&&r.push(`Output Current: ${a.outputCurrent} ${a.outputCurrentUnit}`);break;case"Transistor":"partNumber"in a&&a.partNumber&&r.push(`Part Number: ${a.partNumber}`),"transistorType"in a&&a.transistorType&&r.push(`Type: ${a.transistorType}`);break;case"Crystal":"frequency"in a&&a.frequency&&r.push(`Frequency: ${a.frequency}`),"loadCapacitance"in a&&a.loadCapacitance&&r.push(`Load Capacitance: ${a.loadCapacitance}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"VacuumTube":"tubeType"in a&&a.tubeType&&r.push(`Tube Type: ${a.tubeType}`),"partNumber"in a&&a.partNumber&&r.push(`Part Number: ${a.partNumber}`);break}return r},[]),[Ua,na]=j.useState(!1),ko=j.useRef(null),[ia,Ro]=j.useState(!1),[la,to]=j.useState(!1),Do=j.useRef(null),ul=j.useRef(null),Bl=j.useRef(null),no=j.useRef(null),[ds,aa]=j.useState(!1),[Ma,oa]=j.useState(!1),[Ji,Ir]=j.useState(null),[us,Wr]=j.useState(new Set),Mc=j.useRef(null),Pa=j.useRef(null),fs=j.useRef(null),ci=j.useRef(null),wi=j.useRef(null),sa=j.useRef(null),dr=j.useRef(null),$r=j.useRef(null),[io,_i]=j.useState(null),[Yt,ur]=j.useState(!1),[Oi,yt]=j.useState(null),[Mt,wn]=j.useState(null),fr=j.useCallback(async(a,r)=>{try{const p=await createImageBitmap(a),x=URL.createObjectURL(a),v=await new Promise((E,X)=>{const se=new FileReader;se.onload=()=>E(se.result),se.onerror=X,se.readAsDataURL(a)}),b=rn.current;let f=0,S=0;if(b){const E=b.width-80,X=b.height-80,se=E/2,W=X/2;f=(se-vt.x)/Pe,S=(W-vt.y)/Pe}const T=a.name,C={url:x,name:a.name,width:p.width,height:p.height,dataUrl:v,filePath:T,x:f,y:S,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:p};r==="top"?u(C):L(C)}catch(p){console.error("Failed to load image",p)}},[vt.x,vt.y,Pe,y,U]),ps=j.useCallback(a=>{a.stopPropagation(),a.preventDefault();const r=rn.current;if(!r)return;document.activeElement!==r&&r.focus();const p=r.getBoundingClientRect(),x=r.width/p.width,v=r.height/p.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,S=typeof b=="number"?b:a.clientX-p.left,T=typeof f=="number"?f:a.clientY-p.top,C=S*x,E=T*v,X=C-40,se=E-40,W=(X-vt.x)/Pe,Q=(se-vt.y)/Pe;if(N==="center"){const H=r.width-80,q=r.height-80,$=H/2,ue=q/2,Se=($-vt.x)/Pe,me=(ue-vt.y)/Pe;Ks({x:Se,y:me,zoom:Pe}),Z("select"),ml(void 0);return}if(N==="select"){if(Wn){let A=1/0,ce=null,J=null;const Ce=Math.max(6/Pe,4),Ze=[...ft,...Nt].find(Ye=>Ye.id===Wn.componentId)?.layer||"top";for(const Ye of Ie)if((Ye.type==="via"||Ye.type==="pad")&&Ye.points.length>0){if(Ye.type==="pad"&&(Ye.layer||"top")!==Ze)continue;const ct=Ye.points[0],Je=Math.max(1,Ye.size/2),Ge=Math.hypot(ct.x-W,ct.y-Q),He=Math.max(Je,Ce);Ge<=He&&Ge<A&&(A=Ge,ce=ct.id??null,J=Ye)}if(J?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${J.id}`),console.log(`  Point ID: ${ce}`),console.log(`  Point coordinates: x=${J.points[0].x.toFixed(2)}, y=${J.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${W.toFixed(2)}, y=${Q.toFixed(2)}`),console.log(`  Distance: ${A.toFixed(2)}`),console.log(`  Via size: ${J.size}, radius: ${Math.max(1,J.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${W.toFixed(2)}, y=${Q.toFixed(2)}`),console.log(`  Hit tolerance: ${Ce.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${Ie.filter(Ye=>Ye.type==="via").length}`)),ce!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${ce} (type: ${typeof ce})`);const Ye=String(ce),ct=Wn.pinIndex,Je=Wn.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${ct} (Pin ${ct+1}) of component ${Je} to point ID ${Ye}`);const Ge=ft.find(Ae=>Ae.id===Je),He=Nt.find(Ae=>Ae.id===Je);Ge?(console.log("Component found in TOP layer"),xn(Ae=>{const ot=Ae.find(xt=>xt.id===Je);if(!ot)return console.error(`Component ${Je} not found in TOP layer during update!`),Ae;console.log("BEFORE update: pinConnections =",ot.pinConnections);const Lt=ot.pinConnections||[],Qt=Lt.length>0?[...Lt]:new Array(ot.pinCount).fill("");let Xt;if(Qt.length!==ot.pinCount){Xt=new Array(ot.pinCount).fill("");for(let xt=0;xt<Math.min(Qt.length,ot.pinCount);xt++)Xt[xt]=Qt[xt]||""}else Xt=[...Qt];Xt[ct]=Ye,console.log(`Updating pin ${ct} with value: ${Ye}`),console.log("New pinConnections array:",Xt);const Tn=Ae.map(xt=>xt.id===Je?{...xt,pinConnections:Xt}:xt),fn=Tn.find(xt=>xt.id===Je);return console.log("AFTER update: pinConnections =",fn?.pinConnections),console.log(`Pin ${ct} value: ${fn?.pinConnections[ct]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),Tn})):He?(console.log("Component found in BOTTOM layer"),cn(Ae=>{const ot=Ae.find(xt=>xt.id===Je);if(!ot)return console.error(`Component ${Je} not found in BOTTOM layer during update!`),Ae;console.log("BEFORE update: pinConnections =",ot.pinConnections);const Lt=ot.pinConnections||[],Qt=Lt.length>0?[...Lt]:new Array(ot.pinCount).fill("");let Xt;if(Qt.length!==ot.pinCount){Xt=new Array(ot.pinCount).fill("");for(let xt=0;xt<Math.min(Qt.length,ot.pinCount);xt++)Xt[xt]=Qt[xt]||""}else Xt=[...Qt];Xt[ct]=Ye,console.log(`Updating pin ${ct} with value: ${Ye}`),console.log("New pinConnections array:",Xt);const Tn=Ae.map(xt=>xt.id===Je?{...xt,pinConnections:Xt}:xt),fn=Tn.find(xt=>xt.id===Je);return console.log("AFTER update: pinConnections =",fn?.pinConnections),console.log(`Pin ${ct} value: ${fn?.pinConnections[ct]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),Tn})):(console.error(`Component ${Je} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",ft.map(Ae=>Ae.id)),console.log("Available BOTTOM components:",Nt.map(Ae=>Ae.id))),setTimeout(()=>{Sl(null)},0);return}else Sl(null)}const H=10,q=(()=>{for(const A of ft)if(W>=A.x-H&&W<=A.x+H&&Q>=A.y-H&&Q<=A.y+H)return{layer:"top",comp:A};for(const A of Nt)if(W>=A.x-H&&W<=A.x+H&&Q>=A.y-H&&Q<=A.y+H)return{layer:"bottom",comp:A};return null})();if(q){const{comp:A}=q;a.shiftKey?ht(ce=>{const J=new Set(ce);return J.has(A.id)?J.delete(A.id):J.add(A.id),J}):(ht(new Set([A.id])),St(new Set),wt(new Set),Ee(new Set));return}const $=Math.max(6/Pe,4);let ue=null;for(const A of tt){const ce=Math.max(6,A.size/2),J=ce*.8,Ce=ce+J,Be=Math.hypot(A.x-W,A.y-Q),Ze=Math.abs(W-A.x)<=$&&Math.abs(Q-A.y)<=Ce,Ye=Math.abs(Q-A.y)<=$&&Math.abs(W-A.x)<=Ce;if(Be<=Math.max(ce,$)||Ze||Ye){ue=A;break}}if(ue){a.shiftKey?wt(A=>{const ce=new Set(A);return ce.has(ue.id)?ce.delete(ue.id):ce.add(ue.id),ce}):(wt(new Set([ue.id])),St(new Set),ht(new Set),Ee(new Set));return}let Se=null;for(const A of nt){const ce=Math.max(6,(A.size||18)/2),J=ce*.8,Ce=ce+J,Be=Math.hypot(A.x-W,A.y-Q),Ze=Math.abs(W-A.x)<=$&&Math.abs(Q-A.y)<=Ce,Ye=Math.abs(Q-A.y)<=$&&Math.abs(W-A.x)<=Ce;if(Be<=Math.max(ce,$)||Ze||Ye){Se=A;break}}if(Se){a.shiftKey?Ee(A=>{const ce=new Set(A);return ce.has(Se.id)?ce.delete(Se.id):ce.add(Se.id),ce}):(Ee(new Set([Se.id])),St(new Set),ht(new Set),wt(new Set));return}const ae=Math.max(6/Pe,4/Pe),Re=Math.max(ae,.5);let M=null;for(const A of Ie)if((A.type==="via"||A.type==="pad"||A.type==="testPoint")&&A.points.length>0){let ce=!1;if(A.type==="via"?ce=Mi:A.type==="pad"?ce=(A.layer||"top")==="top"?Gn:al:A.type==="testPoint"&&(ce=(A.layer||"top")==="top"?Ra:qi),!ce)continue;const J=A.points[0],Ce=Math.max(1,A.size/2);if(Math.hypot(J.x-W,J.y-Q)<=Math.max(Ce,Re)){M=A;break}}if(M){a.shiftKey?St(A=>{const ce=new Set(A);return ce.has(M.id)?ce.delete(M.id):ce.add(M.id),ce}):(St(new Set([M.id])),ht(new Set),wt(new Set),Ee(new Set));return}a.shiftKey||(St(new Set),ht(new Set),wt(new Set),Ee(new Set)),Rn(!0),yt({x:W,y:Q,shiftKey:a.shiftKey}),wn({x:W,y:Q,width:0,height:0});return}else if(N==="magnify"){const H=a.shiftKey?.5:2,q=Math.max(.25,Math.min(8,Pe*H)),$=X-q*W,ue=se-q*Q;$i(q),Yn({x:$,y:ue});return}else if(N==="pan"){nl.current={startCX:X,startCY:se,panX:vt.x,panY:vt.y},ql.current={startClientX:a.clientX,startClientY:a.clientY,panX:vt.x,panY:vt.y},Nr(!0);return}else if(N==="draw"){const H=(ue,Se)=>{let me=1/0,ae=null;const Re=10/Pe,M=Pe>20?Math.max(Re,1e-4):Pe>10?Math.max(Re,.001):Math.max(Re,.01);for(const J of Ie)if(J.type==="via"){const Ce=J.points[0],Be=Math.hypot(Ce.x-ue,Ce.y-Se);Be<=M&&Be<me&&(me=Be,ae=Ce)}else if(J.type==="pad"){const Ce=J.points[0],Be=Math.hypot(Ce.x-ue,Ce.y-Se);Be<=M&&Be<me&&(me=Be,ae=Ce)}for(const J of tt)if(J.pointId!==void 0){const Ce=Math.hypot(J.x-ue,J.y-Se);Ce<=M&&Ce<me&&(me=Ce,ae={x:J.x,y:J.y,id:J.pointId})}for(const J of nt)if(J.pointId!==void 0){const Ce=Math.hypot(J.x-ue,J.y-Se);Ce<=M&&Ce<me&&(me=Ce,ae={x:J.x,y:J.y,id:J.pointId})}const ce=Ot(ae??{x:ue,y:Se});return{x:ce.x,y:ce.y,nodeId:ae?.id}};if(be==="via"){const ue=bt.get("via"),Se=ue.color,me=ue.size,Me=Yt?{x:Ot({x:W,y:Q}).x,y:Ot({x:W,y:Q}).y}:((J,Ce)=>{let Be=1/0,Ze=null;const ct=10/Pe,Je=Pe>10?Math.max(ct,.001):Math.max(ct,.01);for(const Ae of Ie)if(Ae.type==="via"||Ae.type==="pad"){const ot=Ae.points[0],Lt=Math.hypot(ot.x-J,ot.y-Ce);Lt<=Je&&Lt<Be&&(Be=Lt,Ze=ot)}for(const Ae of tt)if(Ae.pointId!==void 0){const ot=Math.hypot(Ae.x-J,Ae.y-Ce);ot<=Je&&ot<Be&&(Be=ot,Ze={x:Ae.x,y:Ae.y,id:Ae.pointId})}for(const Ae of nt)if(Ae.pointId!==void 0){const ot=Math.hypot(Ae.x-J,Ae.y-Ce);ot<=Je&&ot<Be&&(Be=ot,Ze={x:Ae.x,y:Ae.y,id:Ae.pointId})}const He=Ot(Ze??{x:J,y:Ce});return{x:He.x,y:He.y,nodeId:Ze?.id}})(W,Q),Re=Me.nodeId??Vi(),M=dl(Re,rt),A={id:Re,x:Me.x,y:Me.y},ce={id:`${Date.now()}-via`,points:[A],color:Se,size:me,layer:gt,type:"via",viaType:M};Vt(J=>[...J,ce]),gt==="top"?Pn(J=>[...J,ce.id]):_n(J=>[...J,ce.id]);return}if(be==="pad"){if(!en)return;const Se=Yt?{x:Ot({x:W,y:Q}).x,y:Ot({x:W,y:Q}).y}:((ce,J)=>{let Ce=1/0,Be=null;const Ye=10/Pe,ct=Pe>10?Math.max(Ye,.001):Math.max(Ye,.01);for(const He of Ie)if(He.type==="via"||He.type==="pad"||He.type==="testPoint"){const Ae=He.points[0],ot=Math.hypot(Ae.x-ce,Ae.y-J);ot<=ct&&ot<Ce&&(Ce=ot,Be=Ae)}for(const He of tt)if(He.pointId!==void 0){const Ae=Math.hypot(He.x-ce,He.y-J);Ae<=ct&&Ae<Ce&&(Ce=Ae,Be={x:He.x,y:He.y,id:He.pointId})}for(const He of nt)if(He.pointId!==void 0){const Ae=Math.hypot(He.x-ce,He.y-J);Ae<=ct&&Ae<Ce&&(Ce=Ae,Be={x:He.x,y:He.y,id:He.pointId})}const Ge=Ot(Be??{x:ce,y:J});return{x:Ge.x,y:Ge.y,nodeId:Be?.id}})(W,Q),me=Se.nodeId??Vi(),ae=Ki(me,rt),Me=F||(en==="top"?Y:De),Re=k||(en==="top"?z:ie),M={id:me,x:Se.x,y:Se.y},A={id:`${Date.now()}-pad`,points:[M],color:Me,size:Re,layer:en,type:"pad",padType:ae};Vt(ce=>[...ce,A]);return}if(be==="testPoint"){if(!tn)return;const Se=Yt?{x:Ot({x:W,y:Q}).x,y:Ot({x:W,y:Q}).y}:((J,Ce)=>{let Be=1/0,Ze=null;const Ye=15;for(const Ge of Ie)if(Ge.type==="via"||Ge.type==="pad"||Ge.type==="testPoint"){const He=Ge.points[0],Ae=Math.hypot(He.x-J,He.y-Ce);Ae<=Ye&&Ae<Be&&(Be=Ae,Ze=He)}for(const Ge of tt)if(Ge.pointId!==void 0){const He=Math.hypot(Ge.x-J,Ge.y-Ce);He<=Ye&&He<Be&&(Be=He,Ze={x:Ge.x,y:Ge.y,id:Ge.pointId})}for(const Ge of nt)if(Ge.pointId!==void 0){const He=Math.hypot(Ge.x-J,Ge.y-Ce);He<=Ye&&He<Be&&(Be=He,Ze={x:Ge.x,y:Ge.y,id:Ge.pointId})}const Je=Ot(Ze??{x:J,y:Ce});return{x:Je.x,y:Je.y,nodeId:Ze?.id}})(W,Q),me=Se.nodeId??Vi(),ae=ta(me,rt),Me=ae.includes("Power")?"power":ae.includes("Ground")?"ground":ae.includes("Signal")?"signal":"unknown",Re=Ot({x:Se.x,y:Se.y}),M=F||(tn==="top"?Ve:ut),A=k||(tn==="top"?et:Ii),ce={id:`${Date.now()}-testPoint`,points:[{id:me,x:Re.x,y:Re.y}],color:M,size:A,layer:tn,type:"testPoint",testPointType:Me};Vt(J=>[...J,ce]);return}if(ha.current)return;const q=be==="trace"&&!Yt?H(W,Q):{x:Ot({x:W,y:Q}).x,y:Ot({x:W,y:Q}).y},$=q.nodeId!==void 0?{id:q.nodeId,x:q.x,y:q.y}:{x:q.x,y:q.y};Nn(ue=>ue.length===0?[$]:[...ue,$]),Lo.current=Date.now(),gi(null),Yo(!1),vl(!1)}else if(N==="erase"){if(Ie.some(q=>q.layer===gt&&(q.type==="via"&&li||q.type==="pad"&&Li||q.type==="testPoint"&&Xl||q.type==="trace"&&ai))){const q=[];li&&Ie.some($=>$.layer===gt&&$.type==="via")&&q.push("vias"),Li&&Ie.some($=>$.layer===gt&&$.type==="pad")&&q.push("pads"),Xl&&Ie.some($=>$.layer===gt&&$.type==="testPoint")&&q.push("test points"),ai&&Ie.some($=>$.layer===gt&&$.type==="trace")&&q.push("traces"),q.length>0&&alert(`Cannot erase: ${q.join(", ")} are locked on the ${gt} layer. Unlock them to erase.`)}Yo(!0),Nn([{id:Vi(),x:W,y:Q}]),console.log("Starting erase at:",W,Q,"selectedDrawingLayer:",gt,"total strokes:",Ie.length)}else if(N==="transform"&&At){if(ii){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}ga(!0),zi({x:W,y:Q})}else if(N==="component"){if(!Ji)return;const H=Ot({x:W,y:Q}),q=F||(hn==="top"?fi:Kn),$=k||(hn==="top"?Wi:pi),ue=[...ft,...Nt];let Se;rl?Se=bc():Se={...To.current};const me=ix(Ji,hn,H.x,H.y,q,$,ue,Se,Kl);if(me.abbreviation=zf(Ji),Kl&&me.designator){const ae=cu(Ji),Me=me.designator.match(new RegExp(`^${ae.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(Me){const Re=parseInt(Me[1],10);if(rl){const M=bc(),A=ax(ae,Re,M);ru(A)}else To.current[ae]=Math.max(To.current[ae]||0,Re)}}hn==="top"?(Da(!0),xn(ae=>[...ae,me])):(ri(!0),cn(ae=>[...ae,me]));return}else if(N==="power"){if(!Bt)return;const q=Yt?{x:Ot({x:W,y:Q}).x,y:Ot({x:W,y:Q}).y}:((ue,Se)=>{let me=1/0,ae=null;const Re=10/Pe,M=Pe>20?Math.max(Re,1e-4):Pe>10?Math.max(Re,.001):Math.max(Re,.01);for(const J of Ie)if(J.type==="via"||J.type==="pad"){const Ce=J.points[0],Be=Math.hypot(Ce.x-ue,Ce.y-Se);Be<=M&&Be<me&&(me=Be,ae=Ce)}else if(J.type==="trace")for(const Ce of J.points){const Be=Math.hypot(Ce.x-ue,Ce.y-Se);Be<=M&&Be<me&&(me=Be,ae=Ce)}const ce=Ot(ae??{x:ue,y:Se});return{x:ce.x,y:ce.y,nodeId:ae?.id}})(W,Q),$=rt.find(ue=>ue.id===Bt);if($){const ue=q.nodeId??Vi(),Se=`${$.voltage} Power Node`;if(nt.find(Me=>Me.pointId===ue)){Xs({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${ue}). Power and ground nodes cannot share the same Node ID.`});return}const ae={id:`power-${Date.now()}-${Math.random()}`,x:q.x,y:q.y,color:"#ff0000",size:k,powerBusId:$.id,layer:gt,type:Se,pointId:ue};if(Xn(Me=>[...Me,ae]),q.nodeId!==void 0){const Me=dl(q.nodeId,rt),Re=Ki(q.nodeId,rt),M=ta(q.nodeId,rt),A=M.includes("Power")?"power":M.includes("Ground")?"ground":M.includes("Signal")?"signal":"unknown";Vt(ce=>ce.map(J=>J.type==="via"&&J.points.length>0&&J.points[0].id===q.nodeId?{...J,viaType:Me}:J.type==="pad"&&J.points.length>0&&J.points[0].id===q.nodeId?{...J,padType:Re}:J.type==="testPoint"&&J.points.length>0&&J.points[0].id===q.nodeId?{...J,testPointType:A}:J))}}return}else if(N==="ground"){if(sl===null){if(Ln.length===0){Xs({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}Dl(!0);return}const H=Ln.find(q=>q.id===sl);if(H){const $=Yt?{x:Ot({x:W,y:Q}).x,y:Ot({x:W,y:Q}).y}:((Me,Re)=>{let M=1/0,A=null;const J=10/Pe,Ce=Pe>20?Math.max(J,1e-4):Pe>10?Math.max(J,.001):Math.max(J,.01);for(const Ye of Ie)if(Ye.type==="via"||Ye.type==="pad"){const ct=Ye.points[0],Je=Math.hypot(ct.x-Me,ct.y-Re);Je<=Ce&&Je<M&&(M=Je,A=ct)}else if(Ye.type==="trace")for(const ct of Ye.points){const Je=Math.hypot(ct.x-Me,ct.y-Re);Je<=Ce&&Je<M&&(M=Je,A=ct)}const Ze=Ot(A??{x:Me,y:Re});return{x:Ze.x,y:Ze.y,nodeId:A?.id}})(W,Q),ue=$.nodeId??Vi(),Se=`${H.name} Ground Node`,me=tt.find(Me=>Me.pointId===ue);if(me){Xs({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${me.type||"Power Node"}) already exists at this Node ID (${ue}). Power and ground nodes cannot share the same Node ID.`});return}const ae={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:$.x,y:$.y,color:H.color,size:k||kt.get("ground")?.settings.size||18,groundBusId:H.id,layer:gt,type:Se,pointId:ue};if(Fi(Me=>[...Me,ae]),$.nodeId!==void 0){const Me=dl($.nodeId,rt),Re=Ki($.nodeId,rt);Vt(M=>M.map(A=>A.type==="via"&&A.points.length>0&&A.points[0].id===$.nodeId?{...A,viaType:Me}:A.type==="pad"&&A.points.length>0&&A.points[0].id===$.nodeId?{...A,padType:Re}:A))}}return}},[N,At,k,F,be,gt,Ie,Pe,vt.x,vt.y,Yt,Bt,sl,rt,Ln,Ji,kt,en,zt,tn,tt,nt,dl,Ki,ta,Mi,Gn,al]),Ao=j.useCallback(a=>{if(N!=="magnify")return;a.preventDefault();const r=rn.current;if(!r)return;const p=r.getBoundingClientRect(),x=r.width/p.width,v=r.height/p.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,S=typeof b=="number"?b:a.clientX-p.left,T=typeof f=="number"?f:a.clientY-p.top,C=S*x,E=T*v,X=(C-40-vt.x)/Pe,se=(E-40-vt.y)/Pe,W=1.2,Q=1/W,H=a.deltaY<0?W:Q,q=Math.max(.25,Math.min(8,Pe*H)),$=C-40-q*X,ue=E-40-q*se;$i(q),Yn({x:$,y:ue})},[N,Pe,vt.x,vt.y]),Fr=j.useCallback(a=>{if(N==="draw"&&be==="trace"){ha.current=!0;let $=It;if($.length>1){const ue=[$[0]];for(let Se=1;Se<$.length;Se++){const me=ue[ue.length-1],ae=$[Se];(Math.abs(me.x-ae.x)>.001||Math.abs(me.y-ae.y)>.001)&&ue.push(ae)}$=ue}if($.length>=1){const ue=zt||"top",Se=ue==="top"?"traceTop":"traceBottom",me=bt.get(Se),ae={id:`${Date.now()}-trace`,points:$,color:me.color,size:me.size,layer:ue,type:"trace"};Vt(Me=>[...Me,ae]),ue==="top"?Yl(Me=>[...Me,ae.id]):On(Me=>[...Me,ae.id]),Nn([]),gi(null),setTimeout(()=>{ha.current=!1},300);return}}const r=rn.current;if(!r)return;const p=r.getBoundingClientRect(),x=r.width/p.width,v=r.height/p.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,S=typeof b=="number"?b:a.clientX-p.left,T=typeof f=="number"?f:a.clientY-p.top,C=S*x,E=T*v,X=C-40,se=E-40,W=(X-vt.x)/Pe,Q=(se-vt.y)/Pe,H=Math.max(8/Pe,4),q=(()=>{for(const $ of Ie)if($.type==="testPoint"&&$.points.length>0){const ue=$.points[0],Se=Math.hypot(ue.x-W,ue.y-Q),me=($.size||18)/2;if(Se<=me+H)return $}return null})();if(q){St(new Set([q.id])),ht(new Set),wt(new Set),Ee(new Set),Ka(!0);return}if(N==="select"||N==="component"){const ue=(()=>{for(const ae of ft)if(W>=ae.x-10&&W<=ae.x+10&&Q>=ae.y-10&&Q<=ae.y+10)return{layer:"top",comp:ae};for(const ae of Nt)if(W>=ae.x-10&&W<=ae.x+10&&Q>=ae.y-10&&Q<=ae.y+10)return{layer:"bottom",comp:ae};return null})(),Se=Math.max(6/Pe,4);let me=null;for(const ae of tt){const Me=Math.max(6,ae.size/2),Re=Me*.8,M=Me+Re,A=Math.hypot(ae.x-W,ae.y-Q),ce=Math.abs(W-ae.x)<=Se&&Math.abs(Q-ae.y)<=M,J=Math.abs(Q-ae.y)<=Se&&Math.abs(W-ae.x)<=M;if(A<=Math.max(Me,Se)||ce||J){me=ae;break}}if(me){wt(new Set([me.id])),$s({visible:!0,id:me.id,layer:me.layer,x:me.x,y:me.y,size:me.size,color:me.color,powerBusId:me.powerBusId});return}if(ue){const{layer:ae,comp:Me}=ue;vi(Me,ae)}}},[N,be,F,k,gt,ft,Nt,tt,Pe,vt.x,vt.y,Ji,ds,Yt,Ie,At,Ca,io,Wn,kt,It,zt,m,G,$e,Oe,Ka,St,ht,wt,Ee,vi]),lo=j.useCallback(()=>{const a=El.current;if(N==="draw"&&be==="trace"&&a.length>=2){let r=[a[0]];for(let f=1;f<a.length;f++){const S=r[r.length-1],T=a[f];(Math.abs(S.x-T.x)>.001||Math.abs(S.y-T.y)>.001)&&r.push(T)}const p=zt||"top",x=p==="top"?"traceTop":"traceBottom",v=bt.get(x),b={id:`${Date.now()}-trace`,points:r,color:v.color,size:v.size,layer:p,type:"trace"};Vt(f=>[...f,b]),p==="top"?Yl(f=>[...f,b.id]):On(f=>[...f,b.id]),Nn([]),gi(null)}else if(N==="draw"&&be==="trace"&&a.length===1){const r=zt||"top",p=r==="top"?"traceTop":"traceBottom",x=bt.get(p),v={id:`${Date.now()}-trace-dot`,points:a,color:x.color,size:x.size,layer:r,type:"trace"};Vt(b=>[...b,v]),r==="top"?Yl(b=>[...b,v.id]):On(b=>[...b,v.id]),Nn([])}},[N,be,zt,m,G,$e,Oe,Vt]),No=j.useCallback((a,r,p)=>{const x=r-a.x,v=p-a.y;if(x===0&&v===0)return{x:r,y:p};const f=(Math.atan2(v,x)*180/Math.PI%180+180)%180,S=[0,45,90];let T=0,C=1e9;for(const E of S){const X=Math.abs(f-E);X<C&&(C=X,T=E)}if(T===0)return{x:r,y:a.y};if(T===90)return{x:a.x,y:p};{const E=Math.min(Math.abs(x),Math.abs(v)),X=x>=0?1:-1,se=v>=0?1:-1;return{x:a.x+X*E,y:a.y+se*E}}},[]),yu=j.useCallback(a=>{const r=rn.current?.getBoundingClientRect();if(!r)return;const p=a.clientX-r.left,x=a.clientY-r.top,v=rn.current,b=v.width/r.width,f=v.height/r.height,S=p*b,T=x*f,C=S-40,E=T-40,X=(C-vt.x)/Pe,se=(E-vt.y)/Pe;if(N==="draw"&&be==="trace"&&It.length>0){const Q=Yt?{x:Ot({x:X,y:se}).x,y:Ot({x:X,y:se}).y}:((H,q)=>{let $=1/0,ue=null;const me=10/Pe,ae=Pe>20?Math.max(me,1e-4):Pe>10?Math.max(me,.001):Math.max(me,.01);for(const M of Ie)if(M.type==="via"){const A=M.points[0],ce=Math.hypot(A.x-H,A.y-q);ce<=ae&&ce<$&&($=ce,ue=A)}else if(M.type==="pad"){const A=M.points[0],ce=Math.hypot(A.x-H,A.y-q);ce<=ae&&ce<$&&($=ce,ue=A)}for(const M of tt)if(M.pointId!==void 0){const A=Math.hypot(M.x-H,M.y-q);A<=ae&&A<$&&($=A,ue={x:M.x,y:M.y,id:M.pointId})}for(const M of nt)if(M.pointId!==void 0){const A=Math.hypot(M.x-H,M.y-q);A<=ae&&A<$&&($=A,ue={x:M.x,y:M.y,id:M.pointId})}const Re=Ot(ue??{x:H,y:q});return{x:Re.x,y:Re.y,nodeId:ue?.id}})(X,se);gi({x:Q.x,y:Q.y})}else gi(null);if(Js){const Q=(()=>{for(const H of ft)if(X>=H.x-10&&X<=H.x+10&&se>=H.y-10&&se<=H.y+10)return{layer:"top",comp:H};for(const H of Nt)if(X>=H.x-10&&X<=H.x+10&&se>=H.y-10&&se<=H.y+10)return{layer:"bottom",comp:H};return null})();if(Q)tr({component:Q.comp,layer:Q.layer,x:a.clientX,y:a.clientY}),nr(null);else{tr(null);const H=Math.max(8/Pe,4),q=(()=>{for(const $ of Ie)if($.type==="testPoint"&&$.points.length>0){const ue=$.points[0],Se=Math.hypot(ue.x-X,ue.y-se),me=($.size||18)/2;if(Se<=me+H)return $}return null})();nr(q?{stroke:q,x:a.clientX,y:a.clientY}:null)}}else tr(null),nr(null);if(N==="select"&&ve&&Oi){const W=Oi.x,Q=Oi.y;wn({x:Math.min(W,X),y:Math.min(Q,se),width:Math.abs(X-W),height:Math.abs(se-Q)})}else if(N==="pan"&&Ca&&nl.current){const{startCX:W,startCY:Q,panX:H,panY:q}=nl.current,$=C-W,ue=E-Q;Yn({x:H+$,y:q+ue})}else if(pa&&It.length>0){if(N==="draw")if(Hs){const W=It[0],Q=No(W,X,se),H=Ot(Q),q={id:Vi(),x:H.x,y:H.y};Nn([W,q])}else{const W=Ot({x:X,y:se});Nn(Q=>[...Q,{id:Vi(),x:W.x,y:W.y}])}else if(N==="erase"&&(Nn(W=>[...W,{id:Vi(),x:X,y:se}]),Vt(W=>{const Q=W.filter(q=>{if(q.type==="via"&&li||q.type==="pad"&&Li||q.type==="testPoint"&&Xl||q.type==="trace"&&ai||q.layer!==gt)return!0;const $=k/2,ue=X-$,Se=X+$,me=se-$,ae=se+$,Me=(A,ce)=>A>=ue&&A<=Se&&ce>=me&&ce<=ae,Re=(A,ce,J,Ce)=>{const Ge=(Tn,fn)=>{let xt=0;return Tn<ue?xt|=1:Tn>Se&&(xt|=2),fn<me?xt|=4:fn>ae&&(xt|=8),xt};let He=A,Ae=ce,ot=J,Lt=Ce,Qt=Ge(He,Ae),Xt=Ge(ot,Lt);for(;;){if((Qt|Xt)===0)return!0;if((Qt&Xt)!==0)return!1;const Tn=Qt!==0?Qt:Xt;let fn=0,xt=0;Tn&8?(fn=He+(ot-He)*(ae-Ae)/(Lt-Ae),xt=ae):Tn&4?(fn=He+(ot-He)*(me-Ae)/(Lt-Ae),xt=me):Tn&2?(xt=Ae+(Lt-Ae)*(Se-He)/(ot-He),fn=Se):(xt=Ae+(Lt-Ae)*(ue-He)/(ot-He),fn=ue),Tn===Qt?(He=fn,Ae=xt,Qt=Ge(He,Ae)):(ot=fn,Lt=xt,Xt=Ge(ot,Lt))}};let M=!1;if(q.points.length===1){const A=q.points[0];M=Me(A.x,A.y)}else for(let A=0;A<q.points.length-1;A++){const ce=q.points[A],J=q.points[A+1];if(Re(ce.x,ce.y,J.x,J.y)){M=!0;break}}return M&&console.log("Erasing stroke at position:",X,se,"brushSize:",k,"selectedLayer:",gt),!M});console.log("Strokes before:",W.length,"after:",Q.length);const H=new Set(Q.map(q=>q.id));return Pn(q=>q.filter($=>H.has($))),_n(q=>q.filter($=>H.has($))),Yl(q=>q.filter($=>H.has($))),On(q=>q.filter($=>H.has($))),Q}),yn||Xn(W=>{const Q=k/2,H=X-Q,q=X+Q,$=se-Q,ue=se+Q,Se=me=>{const ae=me.size/2,Me=me.x-ae,Re=me.x+ae,M=me.y-ae,A=me.y+ae;return!(q<Me||H>Re||ue<M||$>A)};return W.filter(me=>!Se(me))}),Ri||Fi(W=>{const Q=k/2,H=X-Q,q=X+Q,$=se-Q,ue=se+Q,Se=ae=>{const Me=Math.max(6,(ae.size||18)/2),Re=Me*.8,M=Me+Re,A=ae.x-M,ce=ae.x+M,J=ae.y-M,Ce=ae.y+M;return!(q<A||H>ce||ue<J||$>Ce)};return W.filter(ae=>!Se(ae))}),!ki)){const W=k/2,Q=X-W,H=X+W,q=se-W,$=se+W,ue=Se=>{const ae=(Se.size||18)/2,Me=Se.x-ae,Re=Se.x+ae,M=Se.y-ae,A=Se.y+ae;return!(H<Me||Q>Re||$<M||q>A)};xn(Se=>Se.filter(me=>!ue(me))),cn(Se=>Se.filter(me=>!ue(me)))}}else if(Xo&&xa&&At){if(ii){ga(!1),zi(null);return}const W=X-xa.x,Q=se-xa.y;if(At==="top"){y&&u(H=>H?{...H,x:H.x+W,y:H.y+Q}:null),zi({x:X,y:se});return}if(At==="bottom"){U&&L(H=>H?{...H,x:H.x+W,y:H.y+Q}:null),zi({x:X,y:se});return}if(At==="both"){y&&u(H=>H?{...H,x:H.x+W,y:H.y+Q}:null),U&&L(H=>H?{...H,x:H.x+W,y:H.y+Q}:null),zi({x:X,y:se});return}}},[pa,It,N,k,Xo,xa,At,y,U,Hs,No,gt,Vt,Pe,vt.x,vt.y,ve,Oi,ii,li,Li,ai,yn,Ri,ft,Nt,xn,cn,Js,tr,Yt,Ie,tt,nt,It,be,gn,gi,Ca,nl,Yn,40,vt,Vi,Ot,Ks,Z]),bn=j.useCallback(()=>{if(N==="select"&&ve){const a=Mt,r=Oi;if(Rn(!1),yt(null),wn(null),a&&r){const v=Math.max(3,5/Pe),b=a.width<v&&a.height<v,f=(M,A)=>{const ce=a.x,J=a.y,Ce=a.x+a.width,Be=a.y+a.height;return M>=ce&&M<=Ce&&A>=J&&A<=Be},S=(M,A,ce,J,Ce,Be,Ze,Ye)=>{const ot=(Oa,fl)=>{let Hi=0;return Oa<Ce?Hi|=1:Oa>Ze&&(Hi|=2),fl<Be?Hi|=4:fl>Ye&&(Hi|=8),Hi};let Lt=M,Qt=A,Xt=ce,Tn=J,fn=ot(Lt,Qt),xt=ot(Xt,Tn);for(;;){if((fn|xt)===0)return!0;if((fn&xt)!==0)return!1;const Oa=fn!==0?fn:xt;let fl=0,Hi=0;Oa&8?(fl=Lt+(Xt-Lt)*(Ye-Qt)/(Tn-Qt),Hi=Ye):Oa&4?(fl=Lt+(Xt-Lt)*(Be-Qt)/(Tn-Qt),Hi=Be):Oa&2?(Hi=Qt+(Tn-Qt)*(Ze-Lt)/(Xt-Lt),fl=Ze):(Hi=Qt+(Tn-Qt)*(Ce-Lt)/(Xt-Lt),fl=Ce),Oa===fn?(Lt=fl,Qt=Hi,fn=ot(Lt,Qt)):(Xt=fl,Tn=Hi,xt=ot(Xt,Tn))}},T=a.x,C=a.y,E=a.x+a.width,X=a.y+a.height,W=Math.max(6/Pe,4/Pe,.5),Q=(M,A,ce,J,Ce,Be)=>{const Ze=Ce-ce,Ye=Be-J;if(Ze===0&&Ye===0)return Math.hypot(M-ce,A-J);const ct=Math.max(0,Math.min(1,((M-ce)*Ze+(A-J)*Ye)/(Ze*Ze+Ye*Ye))),Je=ce+ct*Ze,Ge=J+ct*Ye;return Math.hypot(M-Je,A-Ge)},H=r?.shiftKey===!0,q=new Set(H?Array.from(mt):[]),$=new Set(H?Array.from(pt):[]),ue=new Set(H?Array.from(at):[]),Se=new Set(H?Array.from(Ut):[]),me=r?.hitStrokeId;if(me){const M=Ie.find(A=>A.id===me);if(M){let A=!1;if(M.type==="via"||M.type==="pad"?A=Mi:A=M.layer==="top"?Pi:Xi,A){H?St(ce=>{const J=new Set(ce);return J.has(me)?J.delete(me):J.add(me),J}):(St(new Set([me])),ht(new Set),wt(new Set),Ee(new Set));return}}}if(b){let M=null;for(const A of Ie){let ce=!1;if(A.type==="via"?ce=Mi:A.type==="pad"?ce=(A.layer||"top")==="top"?Gn:al:A.type==="testPoint"?ce=(A.layer||"top")==="top"?Ra:qi:A.type==="trace"?ce=A.layer==="top"?Pi:Xi:ce=!1,!ce)continue;let J=1/0;if(A.type==="via"||A.type==="pad"||A.type==="testPoint"){const Ce=A.points[0],Be=Math.max(1,A.size/2);J=Math.hypot(Ce.x-r.x,Ce.y-r.y);const Ye=Math.max(6/Pe,4/Pe,.5);J<=Math.max(Be,Ye)&&(!M||J<M.dist)&&(M={id:A.id,dist:J})}else for(let Ce=0;Ce<A.points.length-1;Ce++){const Be=A.points[Ce],Ze=A.points[Ce+1],Ye=Q(r.x,r.y,Be.x,Be.y,Ze.x,Ze.y);if(Ye<=Math.max(W,A.size/2)){(!M||Ye<M.dist)&&(M={id:A.id,dist:Ye});break}}}M&&(H&&q.has(M.id)?q.delete(M.id):q.add(M.id))}else for(const M of Ie){let A=!1;if(M.type==="via"?A=Mi:M.type==="pad"?A=(M.layer||"top")==="top"?Gn:al:M.type==="testPoint"?A=(M.layer||"top")==="top"?Ra:qi:M.type==="trace"?A=M.layer==="top"?Pi:Xi:A=!1,!A)continue;let ce=!1;if(M.type==="via"||M.type==="pad"||M.type==="testPoint"){const J=M.points[0];ce=f(J.x,J.y)}else for(let J=0;J<M.points.length-1;J++){const Ce=M.points[J],Be=M.points[J+1];if(S(Ce.x,Ce.y,Be.x,Be.y,T,C,E,X)||f(Ce.x,Ce.y)&&f(Be.x,Be.y)){ce=!0;break}}ce&&(H&&q.has(M.id)?q.delete(M.id):q.add(M.id))}const ae=M=>{const ce=Math.max(10,M.size||18)/2;return M.x-ce<=E&&M.x+ce>=T&&M.y-ce<=X&&M.y+ce>=C};if(b){const M=A=>{const J=Math.max(10,A.size||18)/2;return r.x>=A.x-J&&r.x<=A.x+J&&r.y>=A.y-J&&r.y<=A.y+J};Zi&&ft.forEach(A=>{M(A)&&(H&&$.has(A.id)?$.delete(A.id):$.add(A.id))}),Dn&&Nt.forEach(A=>{M(A)&&(H&&$.has(A.id)?$.delete(A.id):$.add(A.id))})}else Zi&&ft.forEach(M=>{ae(M)&&(H&&$.has(M.id)?$.delete(M.id):$.add(M.id))}),Dn&&Nt.forEach(M=>{ae(M)&&(H&&$.has(M.id)?$.delete(M.id):$.add(M.id))});const Me=M=>{const A=Math.max(6,M.size/2),ce=A*.8,J=A+ce;return M.x-J<=E&&M.x+J>=T&&M.y-J<=X&&M.y+J>=C};if(Si)if(b){let M=null;for(const A of tt){const ce=Math.max(6,A.size/2),J=ce*.8,Ce=ce+J,Be=Math.hypot(A.x-r.x,A.y-r.y),Ze=Math.abs(r.x-A.x)<=W&&Math.abs(r.y-A.y)<=Ce,Ye=Math.abs(r.y-A.y)<=W&&Math.abs(r.x-A.x)<=Ce;if(Be<=Math.max(ce,W)||Ze||Ye){const Je=Math.min(Be,Math.abs(r.x-A.x)+Math.abs(r.y-A.y));(!M||Je<M.dist)&&(M={id:A.id,dist:Je})}}M&&(H&&ue.has(M.id)?ue.delete(M.id):ue.add(M.id))}else tt.forEach(M=>{Me(M)&&(H&&ue.has(M.id)?ue.delete(M.id):ue.add(M.id))});const Re=M=>{const A=Math.max(6,(M.size||18)/2),ce=A*.8,J=A+ce;return M.x-J<=E&&M.x+J>=T&&M.y-J<=X&&M.y+J>=C};if(Nl)if(b){let M=null;for(const A of nt){const ce=Math.max(6,(A.size||18)/2),J=ce*.8,Ce=ce+J,Be=Math.hypot(A.x-r.x,A.y-r.y),Ze=Math.abs(r.x-A.x)<=W&&Math.abs(r.y-A.y)<=Ce,Ye=Math.abs(r.y-A.y)<=W&&Math.abs(r.x-A.x)<=Ce;if(Be<=Math.max(ce,W)||Ze||Ye){const Je=Math.min(Be,Math.abs(r.x-A.x)+Math.abs(r.y-A.y));(!M||Je<M.dist)&&(M={id:A.id,dist:Je})}}M&&(H&&Se.has(M.id)?Se.delete(M.id):Se.add(M.id))}else nt.forEach(M=>{Re(M)&&(H&&Se.has(M.id)?Se.delete(M.id):Se.add(M.id))});St(q),ht($),wt(ue),Ee(Se)}}if(pa&&It.length>0){if(N==="draw"&&be!=="trace"){const a={id:Date.now().toString(),points:It,color:F,size:k,layer:gt,type:"trace"};Vt(r=>[...r,a]),gt==="top"?Yl(r=>[...r,a.id]):On(r=>[...r,a.id])}Nn([])}Ca&&(Nr(!1),nl.current=null,ql.current=null),Yo(!1),ga(!1),zi(null),vl(!1)},[pa,It,N,F,k,gt,Mt,Oi,ve,Ie,Pe,yo,mt,tt,nt,ft,Nt,pt,at,Ut,Mi,Pi,Xi,Zi,Dn,Si,Nl]);Ue.useEffect(()=>{if(!(N==="pan"&&Ca&&ql.current))return;const a=p=>{const x=rn.current;if(!x)return;const v=x.getBoundingClientRect(),b=x.width/v.width,f=x.height/v.height,{startClientX:S,startClientY:T,panX:C,panY:E}=ql.current,X=(p.clientX-S)*b,se=(p.clientY-T)*f;Yn({x:C+X,y:E+se})},r=()=>{Nr(!1),nl.current=null,ql.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",r,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)}},[N,Ca]);const Bo=j.useCallback(()=>{const a=rn.current;if(!a)return;const r=a.getContext("2d");if(!r)return;r.clearRect(0,0,a.width,a.height),r.save(),r.beginPath(),r.rect(40,40,a.width-80,a.height-80),r.clip(),r.translate(40,40);const p=(b,f)=>{const S=b.width,T=b.height,C=document.createElement("canvas");C.width=S,C.height=T;const E=C.getContext("2d");if(!E)return C;E.drawImage(b,0,0,S,T);const se=E.getImageData(0,0,S,T).data,W=new Uint8ClampedArray(S*T);for(let ae=0;ae<S*T;ae++){const Me=se[ae*4+0],Re=se[ae*4+1],M=se[ae*4+2];W[ae]=Math.round(.299*Me+.587*Re+.114*M)}const Q=[-1,0,1,-2,0,2,-1,0,1],H=[-1,-2,-1,0,0,0,1,2,1],q=new Float32Array(S*T);for(let ae=1;ae<T-1;ae++)for(let Me=1;Me<S-1;Me++){let Re=0,M=0,A=0;for(let J=-1;J<=1;J++)for(let Ce=-1;Ce<=1;Ce++){const Be=Me+Ce,Ze=ae+J,Ye=W[Ze*S+Be];Re+=Ye*Q[A],M+=Ye*H[A],A++}const ce=Math.sqrt(Re*Re+M*M);q[ae*S+Me]=ce}let $=0;for(let ae=0;ae<q.length;ae++)q[ae]>$&&($=q[ae]);const ue=E.createImageData(S,T),Se=ue.data,me=.2;for(let ae=0;ae<S*T;ae++){const Re=($>0?q[ae]/$:0)>=me?255:0,M=f?255-Re:Re;Se[ae*4+0]=M,Se[ae*4+1]=M,Se[ae*4+2]=M,Se[ae*4+3]=255}return E.putImageData(ue,0,0),C},x=(b,f,S,T,C,E,X,se)=>{const W=document.createElement("canvas");W.width=S,W.height=T;const Q=W.getContext("2d",{willReadFrequently:!0});Q.clearRect(0,0,S,T),Q.drawImage(f,0,0,S,T);let H=W;if(Math.abs(C)>1e-6){const q=Math.tan(C),$=Math.max(.2,1-q),ue=Math.max(.2,1+q),Se=Math.max($,ue),me=Math.max(1,Math.ceil(S*Se)),ae=document.createElement("canvas");ae.width=me,ae.height=T;const Me=ae.getContext("2d",{willReadFrequently:!0});Me.clearRect(0,0,me,T);for(let Re=0;Re<T;Re++){const M=T<=1?0:Re/(T-1),A=$*(1-M)+ue*M,ce=Math.max(1,S*A),J=(me-ce)/2;Me.drawImage(H,0,Re,S,1,J,Re,ce,1)}H=ae}if(Math.abs(E)>1e-6){const q=Math.tan(E),$=Math.max(.2,1-q),ue=Math.max(.2,1+q),Se=Math.max($,ue),me=Math.max(1,Math.ceil(T*Se)),ae=document.createElement("canvas");ae.width=H.width,ae.height=me;const Me=ae.getContext("2d",{willReadFrequently:!0});Me.clearRect(0,0,ae.width,me);for(let Re=0;Re<H.width;Re++){const M=H.width<=1?0:Re/(H.width-1),A=$*(1-M)+ue*M,ce=Math.max(1,T*A),J=(me-ce)/2;Me.drawImage(H,Re,0,1,H.height,Re,J,1,ce)}H=ae}b.drawImage(H,-X/2,-se/2,X,se)};r.translate(vt.x,vt.y),r.scale(Pe,Pe);{const b=Zl&&mo;if(y&&y.bitmap&&Zl){const f=y.bitmap;if(r.save(),r.globalAlpha=1,Te&&!K?r.filter="grayscale(100%)":r.filter="none",r.translate(y.x,y.y),r.rotate(y.rotation*Math.PI/180),y.skewX||y.skewY){const E=Math.tan(y.skewX||0),X=Math.tan(y.skewY||0);r.transform(1,X,E,1,0,0)}r.scale(y.scale*(y.flipX?-1:1),y.scale*(y.flipY?-1:1));const S=f.width*1,T=f.height*1,C=K?p(f,_e):f;y.keystoneV&&Math.abs(y.keystoneV)>1e-6||y.keystoneH&&Math.abs(y.keystoneH)>1e-6?x(r,C,f.width,f.height,y.keystoneV||0,y.keystoneH||0,S,T):r.drawImage(C,-S/2,-T/2,S,T),r.restore()}if(U&&U.bitmap&&mo){const f=U.bitmap;if(r.save(),r.globalAlpha=b?g/100:1,Te&&!K?r.filter="grayscale(100%)":r.filter="none",r.translate(U.x,U.y),r.rotate(U.rotation*Math.PI/180),U.skewX||U.skewY){const E=Math.tan(U.skewX||0),X=Math.tan(U.skewY||0);r.transform(1,X,E,1,0,0)}r.scale(U.scale*(U.flipX?-1:1),U.scale*(U.flipY?-1:1));const S=f.width*1,T=f.height*1,C=K?p(f,_e):f;U.keystoneV&&Math.abs(U.keystoneV)>1e-6||U.keystoneH&&Math.abs(U.keystoneH)>1e-6?x(r,C,f.width,f.height,U.keystoneV||0,U.keystoneH||0,S,T):r.drawImage(C,-S/2,-T/2,S,T),r.restore()}}if(Pc(r),Si&&tt.length>0){const b=f=>{r.save();const S=rt.find(se=>se.id===f.powerBusId),T=at.has(f.id),C="#ff0000";r.strokeStyle=C,r.lineWidth=Math.max(1,(T?3:2)/Math.max(Pe,.001)),r.lineCap="round";const E=Math.max(6,f.size/2),X=E*.8;T&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Pe,.001)),r.beginPath(),r.arc(f.x,f.y,E+X+3,0,Math.PI*2),r.stroke()),r.strokeStyle=C,r.lineWidth=Math.max(1,(T?3:2)/Math.max(Pe,.001)),r.beginPath(),r.arc(f.x,f.y,E,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(f.x,f.y-E-X),r.lineTo(f.x,f.y+E+X),r.stroke(),r.beginPath(),r.moveTo(f.x-E-X,f.y),r.lineTo(f.x+E+X,f.y),r.stroke(),S&&(r.fillStyle=C,r.font=`${Math.max(10,E*.8)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(S.voltage,f.x,f.y+E+X+12)),r.restore()};tt.forEach(b)}if(Nl&&nt.length>0){const b=f=>{r.save();const S=Ut.has(f.id),T=f.color||"#000000";if(f.groundBusId==="groundbus-earth"){const E=Math.max(6,f.size||18),X=E*.9,se=E*.24,W=E*1.6;r.strokeStyle=T,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Pe,.001)),r.lineCap="round",S&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Pe,.001)),r.setLineDash([5,5]),r.strokeRect(f.x-W/2-3,f.y-3,W+6,X+se*2+6),r.setLineDash([])),r.strokeStyle=T,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Pe,.001)),r.beginPath(),r.moveTo(f.x,f.y),r.lineTo(f.x,f.y+X),r.stroke();for(let Q=0;Q<3;Q++){const H=f.y+X+Q*se,q=W*(1-Q*.25);r.beginPath(),r.moveTo(f.x-q/2,H),r.lineTo(f.x+q/2,H),r.stroke()}}else{const E=Math.max(6,(f.size||18)/2),X=E*.8;S&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Pe,.001)),r.beginPath(),r.arc(f.x,f.y,E+X+3,0,Math.PI*2),r.stroke()),r.strokeStyle=T,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Pe,.001)),r.beginPath(),r.arc(f.x,f.y,E,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(f.x,f.y-E-X),r.lineTo(f.x,f.y+E+X),r.stroke(),r.beginPath(),r.moveTo(f.x-E-X,f.y),r.lineTo(f.x+E+X,f.y),r.stroke()}r.restore()};nt.forEach(b)}const v=b=>{const f=Math.max(10,b.size||18),S=f/2;r.save(),r.strokeStyle=b.color||"#111",r.lineWidth=Math.max(1,2/Math.max(Pe,.001));const T=b.pinConnections||[],C=T.length>0&&T.length===b.pinCount&&T.every(se=>se&&se.trim()!=="");r.fillStyle=C?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",r.beginPath(),r.rect(b.x-S,b.y-S,f,f),r.fill(),r.stroke();const E=b.designator?.trim()||"";if(E){r.fillStyle=b.color||"#111";const se=Math.max(6,f*.35),W=f*.9;let Q=se;r.font=`bold ${Q}px sans-serif`;const H=r.measureText(E);H.width>W&&(Q=W/H.width*Q,Q=Math.max(6,Q),r.font=`bold ${Q}px sans-serif`),r.textAlign="center",r.textBaseline="middle",r.fillText(E,b.x,b.y)}pt.has(b.id)&&(r.setLineDash([4,3]),r.strokeStyle="#00bfff",r.lineWidth=1.5,r.strokeRect(b.x-S-3,b.y-S-3,f+6,f+6),r.setLineDash([])),r.restore()};if(Na){const b=S=>{const T=parseInt(S,10);if(isNaN(T))return null;for(const C of Ie)if((C.type==="via"||C.type==="pad"||C.type==="testPoint")&&C.points.length>0){const E=C.points[0];if(E.id===T)return{x:E.x,y:E.y}}for(const C of Ie)if(C.type==="trace"){for(const E of C.points)if(E.id===T)return{x:E.x,y:E.y}}for(const C of tt)if(C.pointId===T)return{x:C.x,y:C.y};for(const C of nt)if(C.pointId===T)return{x:C.x,y:C.y};return null},f=S=>{const T=S.pinConnections||[],C=S.componentType==="Electrolytic Capacitor"||S.componentType==="Diode"||S.componentType==="Battery"||S.componentType==="ZenerDiode",E=S.componentType==="Capacitor"&&"dielectric"in S&&S.dielectric==="Tantalum",X=(C||E)&&S.pinPolarities,se=new Map;for(let W=0;W<T.length;W++){const Q=T[W];if(Q&&Q.trim()!==""){const H=Q.trim(),q=!!(X&&S.pinPolarities&&W<S.pinPolarities.length&&S.pinPolarities[W]==="-"),$=se.get(H);$!==void 0?se.set(H,$||q):se.set(H,q)}}for(const[W,Q]of se){const H=b(W);if(H){const q={x:S.x,y:S.y};r.save(),r.strokeStyle=Q?"rgba(0, 0, 0, 0.8)":Ia,r.lineWidth=Math.max(1,Fo/Math.max(Pe,.001)),r.beginPath(),r.moveTo(q.x,q.y),r.lineTo(H.x,H.y),r.stroke(),r.restore()}}};Zi&&ft.forEach(f),Dn&&Nt.forEach(f)}if(Zi&&ft.forEach(v),Dn&&Nt.forEach(v),N==="select"&&Mt){r.save();const b=Math.max(2,6/Math.max(1e-4,Pe));r.strokeStyle="#00bfff",r.fillStyle="rgba(0, 191, 255, 0.15)",r.lineWidth=Math.max(1,1.5/Math.max(1e-4,Pe)),r.setLineDash([b,b]),r.beginPath(),r.rect(Mt.x,Mt.y,Mt.width,Mt.height),r.fill(),r.stroke(),r.setLineDash([]),r.restore()}r.restore()},[y,U,g,Ie,It,pa,N,F,k,Te,K,_e,At,gt,Pe,vt.x,vt.y,Zl,mo,Mi,Pi,Xi,Gn,al,Ra,qi,Zi,Dn,ft,Nt,Si,tt,Nl,nt,Na,Mt,mt,pt,at,Ut,zt,m,G,$e,Oe,be,gn,ii,Ia,Fo]);Ue.useEffect(()=>{const a=()=>{const r=za.current;if(!r)return;const p=1.6,x=244,v=12,b=12,f=r.clientWidth-x-v,S=r.clientHeight-b,T=Math.floor(S*p),C=Math.floor(f/p);let E,X;T<=f?(E=T,X=S):(E=f,X=C),E=Math.max(600,E),X=Math.max(375,X),Bc(se=>{if(se.width!==E||se.height!==X){const W=se.width-80,Q=se.height-80,H=E-80,q=X-80,$=W>0?H/W:1,ue=Q>0?q/Q:1;Yn(Se=>({x:Se.x*$,y:Se.y*ue}))}return se.width===E&&se.height===X?se:{width:E,height:X}})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[Yn]),Ue.useEffect(()=>{ii&&(Xo&&(ga(!1),zi(null)),Il(null))},[ii,Xo,ga,zi,Il]);const Pc=j.useCallback(a=>{if(Ie.forEach(r=>{if(r.type==="via"||r.type==="pad"||r.type==="testPoint"||r.testPointType!==void 0||r.type!=="trace")return;let p=!1;if(r.layer==="top"?p=Pi:r.layer==="bottom"&&(p=Xi),!!p)if(r.points.length===1){const x=r.points[0],v=Math.max(.5,r.size/2);mt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(x.x,x.y,v+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=r.color,a.beginPath(),a.arc(x.x,x.y,v,0,Math.PI*2),a.fill()}else{mt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=r.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),r.points.forEach((x,v)=>{v===0?a.moveTo(x.x,x.y):a.lineTo(x.x,x.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=r.color,a.lineWidth=r.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),r.points.forEach((x,v)=>{v===0?a.moveTo(x.x,x.y):a.lineTo(x.x,x.y)}),a.stroke();for(const x of r.points)a.beginPath(),a.arc(x.x,x.y,r.size/2,0,Math.PI*2),a.fill()}}),Ie.forEach(r=>{if(r.type==="via"){if(!Mi)return}else if(r.type==="pad"){const x=r.layer||"top";if(x==="top"&&!Gn||x==="bottom"&&!al)return}else if(r.type==="testPoint"){const x=r.layer||"top";if(x==="top"&&!Ra||x==="bottom"&&!qi)return}else return;const p=r.points[0];if(mt.has(r.id)){if(r.type==="via"){const x=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(p.x,p.y,x,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(r.type==="pad"){const x=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(p.x-x,p.y-x,r.size+6,r.size+6),a.setLineDash([])}else if(r.type==="testPoint"){const x=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.moveTo(p.x,p.y-x),a.lineTo(p.x+x,p.y),a.lineTo(p.x,p.y+x),a.lineTo(p.x-x,p.y),a.closePath(),a.stroke(),a.setLineDash([])}}if(r.type==="via"){const x=Math.max(.5,r.size/2),v=x*.5,b=x*.7;a.fillStyle=r.color,a.beginPath(),a.arc(p.x,p.y,x,0,Math.PI*2),a.arc(p.x,p.y,v,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(p.x-b,p.y),a.lineTo(p.x+b,p.y),a.stroke(),a.beginPath(),a.moveTo(p.x,p.y-b),a.lineTo(p.x,p.y+b),a.stroke()}else if(r.type==="pad"){const x=Math.max(.5,r.size/2),v=r.size,b=v*.5,f=x*.7;a.fillStyle=r.color,a.beginPath(),a.rect(p.x-x,p.y-x,v,v),a.rect(p.x-b/2,p.y-b/2,b,b),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(p.x-f,p.y),a.lineTo(p.x+f,p.y),a.stroke(),a.beginPath(),a.moveTo(p.x,p.y-f),a.lineTo(p.x,p.y+f),a.stroke()}else if(r.type==="testPoint"){const x=Math.max(.5,r.size/2),v=x*.7;a.fillStyle=r.color||"#FFFF00",a.strokeStyle="#000000",a.lineWidth=2,a.beginPath(),a.moveTo(p.x,p.y-x),a.lineTo(p.x+x,p.y),a.lineTo(p.x,p.y+x),a.lineTo(p.x-x,p.y),a.closePath(),a.fill(),a.stroke(),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(p.x-v,p.y),a.lineTo(p.x+v,p.y),a.stroke(),a.beginPath(),a.moveTo(p.x,p.y-v),a.lineTo(p.x,p.y+v),a.stroke()}}),It.length>0){const r=gt;let p=!0;if(N==="draw"&&(be==="via"?p=Mi:p=r==="top"?Pi:Xi),p)if(N==="draw")if(be==="via"){const x=It[It.length-1],v=Math.max(.5,k/2),b=v*.5,f=v*.7;a.fillStyle=F,a.beginPath(),a.arc(x.x,x.y,v,0,Math.PI*2),a.arc(x.x,x.y,b,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-f,x.y),a.lineTo(x.x+f,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-f),a.lineTo(x.x,x.y+f),a.stroke()}else if(be==="pad"){const x=It[It.length-1],v=Math.max(.5,k/2),b=k,f=b*.5,S=v*.7;a.fillStyle=F,a.beginPath(),a.rect(x.x-v,x.y-v,b,b),a.rect(x.x-f/2,x.y-f/2,f,f),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-S,x.y),a.lineTo(x.x+S,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-S),a.lineTo(x.x,x.y+S),a.stroke()}else if(be==="testPoint"){const x=It[It.length-1],v=Math.max(.5,k/2),b=v*.7;a.fillStyle=F,a.beginPath(),a.moveTo(x.x,x.y-v),a.lineTo(x.x+v,x.y),a.lineTo(x.x,x.y+v),a.lineTo(x.x-v,x.y),a.closePath(),a.fill(),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-b,x.y),a.lineTo(x.x+b,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-b),a.lineTo(x.x,x.y+b),a.stroke()}else{const x=zt||"top",v=x==="top"?m:G,b=x==="top"?$e:Oe;if(It.length===1){const f=It[0],S=Math.max(.5,b/2);a.fillStyle=v,a.beginPath(),a.arc(f.x,f.y,S,0,Math.PI*2),a.fill(),gn&&(a.strokeStyle=v,a.lineWidth=b,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(gn.x,gn.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=v,a.lineWidth=b,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),It.forEach((f,S)=>{S===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y)}),a.stroke(),gn&&It.length>0){const f=It[It.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(gn.x,gn.y),a.stroke(),a.globalAlpha=1}}else N==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=k,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),It.forEach((x,v)=>{v===0?a.moveTo(x.x,x.y):a.lineTo(x.x,x.y)}),a.stroke())}},[Ie,mt,Pi,Xi,Mi,Gn,al,Ra,qi,It,N,be,F,k,gt,zt,m,G,$e,Oe,gn]),Yr=j.useCallback((a,r)=>{if(ii){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&y?u(p=>p?{...p,...r}:null):a==="bottom"&&U?L(p=>p?{...p,...r}:null):a==="both"&&(y&&u(p=>p?{...p,...r}:null),U&&L(p=>p?{...p,...r}:null))},[y,U,ii]),zd=j.useCallback(()=>{At&&(Yr(At,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),We(!1),ke(!1),he(!1))},[Yr,At]),_c=j.useCallback(()=>{if(mt.size>0||pt.size>0||at.size>0||Ut.size>0){if(mt.size>0){const a=Ie.filter(v=>mt.has(v.id)),r=li&&a.some(v=>v.type==="via"),p=ai&&a.some(v=>v.type==="trace"),x=Li&&a.some(v=>v.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(p){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(x){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(pt.size>0&&ki){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(at.size>0&&yn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Ut.size>0&&Ri){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Vt(a=>a.map(r=>{if(mt.has(r.id)){const p=r.size+1;return r.type==="via"?qe("via",p):r.type==="pad"?qe("pad",p):r.type==="trace"&&qe("trace",p,r.layer),{...r,size:p}}return r})),pt.size>0){const a=(pt.size>0&&ft.find(r=>pt.has(r.id))?.size||18)+1;qe("component",a),xn(r=>r.map(p=>pt.has(p.id)?{...p,size:(p.size||18)+1}:p)),cn(r=>r.map(p=>pt.has(p.id)?{...p,size:(p.size||18)+1}:p))}if(at.size>0){const a=(tt.find(r=>at.has(r.id))?.size||18)+1;qe("power",a),Xn(r=>r.map(p=>at.has(p.id)?{...p,size:p.size+1}:p))}if(Ut.size>0){const a=(nt.find(r=>Ut.has(r.id))?.size||18)+1;qe("ground",a),Fi(r=>r.map(p=>Ut.has(p.id)?{...p,size:(p.size||18)+1}:p))}}else{let a=null;if(N==="draw"&&be==="via"?a="via":N==="draw"&&be==="pad"?a=ya.current==="bottom"?"padBottom":"padTop":N==="draw"&&be==="testPoint"?a=Fl.current==="bottom"?"testPointBottom":"testPointTop":N==="draw"&&be==="trace"?a=$l.current==="bottom"?"traceBottom":"traceTop":N==="component"?a=mn.current==="bottom"?"componentBottom":"componentTop":N==="power"?a="power":N==="ground"&&(a="ground"),a){const r=bt.get(a),p=Math.min(40,r.size+1);bt.setSize(a,p)}}},[mt,pt,at,Ut,Ie,li,ai,Li,Xl,ki,yn,Ri,N,be,qe]),pr=j.useCallback(()=>{if(mt.size>0||pt.size>0||at.size>0||Ut.size>0){if(mt.size>0){const a=Ie.filter(b=>mt.has(b.id)),r=li&&a.some(b=>b.type==="via"),p=ai&&a.some(b=>b.type==="trace"),x=Li&&a.some(b=>b.type==="pad"),v=Xl&&a.some(b=>b.type==="testPoint");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(p){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(x){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}if(v){alert("Cannot change size: Test Points are locked. Unlock test points to change their size.");return}}if(pt.size>0&&ki){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(at.size>0&&yn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Ut.size>0&&Ri){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Vt(a=>a.map(r=>{if(mt.has(r.id)){const p=Math.max(1,r.size-1);return r.type==="via"?qe("via",p):r.type==="pad"?qe("pad",p,r.layer):r.type==="testPoint"?qe("testPoint",p,r.layer):r.type==="trace"&&qe("trace",p,r.layer),{...r,size:p}}return r})),pt.size>0){const a=Math.max(1,(ft.find(r=>pt.has(r.id))?.size||18)-1);qe("component",a),xn(r=>r.map(p=>pt.has(p.id)?{...p,size:Math.max(1,(p.size||18)-1)}:p)),cn(r=>r.map(p=>pt.has(p.id)?{...p,size:Math.max(1,(p.size||18)-1)}:p))}if(at.size>0){const a=Math.max(1,(tt.find(r=>at.has(r.id))?.size||18)-1);qe("power",a),Xn(r=>r.map(p=>at.has(p.id)?{...p,size:Math.max(1,p.size-1)}:p))}if(Ut.size>0){const a=Math.max(1,(nt.find(r=>Ut.has(r.id))?.size||18)-1);qe("ground",a),Fi(r=>r.map(p=>Ut.has(p.id)?{...p,size:Math.max(1,(p.size||18)-1)}:p))}}else{let a=null;if(N==="draw"&&be==="via"?a="via":N==="draw"&&be==="pad"?a=(gt||en||"top")==="bottom"?"padBottom":"padTop":N==="draw"&&be==="testPoint"?a=(gt||tn||"top")==="bottom"?"testPointBottom":"testPointTop":N==="draw"&&be==="trace"?a=(gt||zt||"top")==="bottom"?"traceBottom":"traceTop":N==="component"?a=(gt||hn||"top")==="bottom"?"componentBottom":"componentTop":N==="power"?a="power":N==="ground"&&(a="ground"),a){const r=bt.get(a),p=Math.max(1,r.size-1);bt.setSize(a,p)}}},[mt,pt,at,Ut,Ie,li,ai,Li,Xl,ki,yn,Ri,N,be,gt,en,tn,zt,hn,qe]),Lr=j.useCallback(()=>{const a=go.size;if(mt.size>0||pt.size>0||at.size>0||Ut.size>0){if(mt.size>0){const r=Ie.filter(f=>mt.has(f.id)),p=li&&r.some(f=>f.type==="via"),x=Li&&r.some(f=>f.type==="pad"),v=ai&&r.some(f=>f.type==="trace"),b=Xl&&r.some(f=>f.type==="testPoint");if(p||x||v||b){alert("Cannot change size: selected items are locked.");return}}if(pt.size>0&&ki){alert("Cannot change size: selected components are locked.");return}if(at.size>0&&yn){alert("Cannot change size: selected power nodes are locked.");return}if(Ut.size>0&&Ri){alert("Cannot change size: selected ground nodes are locked.");return}Vt(r=>r.map(p=>mt.has(p.id)?(p.type==="via"?(qe("via",a),Cn(x=>{const v=new Map(x),b=v.get("via");return b&&v.set("via",{...b,settings:{...b.settings,size:a}}),v})):p.type==="pad"?(qe("pad",a,p.layer),Cn(x=>{const v=new Map(x),b=v.get("pad");if(b){const f=new Map(b.layerSettings);f.set(p.layer,{...f.get(p.layer)||{color:b.settings.color,size:a},size:a}),v.set("pad",{...b,layerSettings:f})}return v})):p.type==="testPoint"?(qe("testPoint",a,p.layer),Cn(x=>{const v=new Map(x),b=v.get("testPoint");if(b){const f=new Map(b.layerSettings);f.set(p.layer,{...f.get(p.layer)||{color:b.settings.color,size:a},size:a}),v.set("testPoint",{...b,layerSettings:f})}return v})):p.type==="trace"&&qe("trace",a,p.layer),{...p,size:a}):p)),pt.size>0&&(qe("component",a),xn(r=>r.map(p=>pt.has(p.id)?{...p,size:a}:p)),cn(r=>r.map(p=>pt.has(p.id)?{...p,size:a}:p))),at.size>0&&(qe("power",a),Xn(r=>r.map(p=>at.has(p.id)?{...p,size:a}:p))),Ut.size>0&&(qe("ground",a),Fi(r=>r.map(p=>Ut.has(p.id)?{...p,size:a}:p)))}else R(a),N==="draw"&&be==="trace"?gt==="top"?(Ke(a),qe("trace",a,"top")):(ne(a),qe("trace",a,"bottom")):N==="draw"&&be==="via"?qe("via",a):N==="draw"&&be==="pad"?qe("pad",a,gt):N==="draw"&&be==="testPoint"?qe("testPoint",a,gt):qe(N==="component"?"component":N==="power"?"power":N==="ground"?"ground":"brush",a);La({visible:!1,size:6})},[go.size,mt,pt,at,Ut,Ie,li,ai,ki,yn,Ri,N,be,gt,qe,kt,Cn]),Xr=j.useCallback(()=>{Gl({visible:!1,source:null,interval:5})},[]),di=j.useCallback(async(a,r=!1)=>{if(a===null){mi(!1),wa(null),Wt.current&&(clearInterval(Wt.current),Wt.current=null),Xa({visible:!1,interval:5}),r&&Gl({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!oi){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let p=$n;if(!p){const f=window;if(typeof f.showDirectoryPicker=="function")try{p=await f.showDirectoryPicker(),ja(p)}catch(S){S?.name!=="AbortError"&&(console.error("Failed to get directory:",S),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}qa(p);const x=oi.replace(/\.json$/i,""),b=xc(x).replace(/[^a-zA-Z0-9_-]/g,"_");tl(b),Uo.current=p,oo.current=b,wa(a),mi(!0),Cl.current=!0,Xa({visible:!1,interval:5}),r&&Gl({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),Zs.current&&Zs.current()},200)},[oi,$n,mi,wa,qa,tl,Xa,Gl,ja]),un=j.useCallback(()=>{Z("select"),St(new Set),ht(new Set),wt(new Set),Ee(new Set)},[St,ht,wt,Ee]),hs=j.useCallback(a=>{if(a.key==="Escape"){const x=document.activeElement;if(x&&(x.tagName==="INPUT"&&x.type==="checkbox"||x.tagName==="INPUT"&&x.type==="radio")){x.blur(),a.preventDefault(),a.stopPropagation();return}}const r=document.activeElement;if(!(r&&(r.tagName==="INPUT"&&r.type!=="checkbox"&&r.type!=="radio"||r.tagName==="TEXTAREA"||r.isContentEditable)||so.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),_c();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),pr();return}if((a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="ArrowLeft"||a.key==="ArrowRight")&&pt.size>0){a.preventDefault(),a.stopPropagation();const x=a.shiftKey?10:1;let v=0,b=0;a.key==="ArrowUp"?b=-x:a.key==="ArrowDown"?b=x:a.key==="ArrowLeft"?v=-x:a.key==="ArrowRight"&&(v=x);for(const f of pt){const S=ft.find(T=>T.id===f);if(S){const T=S.x+v,C=S.y+b,E=Ot({x:T,y:C});xn(X=>X.map(se=>se.id===f?{...se,x:E.x,y:E.y}:se))}else{const T=Nt.find(C=>C.id===f);if(T){const C=T.x+v,E=T.y+b,X=Ot({x:C,y:E});cn(se=>se.map(W=>W.id===f?{...W,x:X.x,y:X.y}:W))}}}return}if((a.key==="I"||a.key==="i")&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){const x=document.activeElement;if(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable))return;a.preventDefault(),a.stopPropagation();const b=[];mt.size>0,mt.size===0&&pt.size===0&&at.size===0&&Ut.size===0&&b.push(`
No objects selected.`);const f=b.join(`
`);console.log(f),Sa({visible:!0,text:f});return}if((a.key==="N"||a.key==="n")&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){const x=document.activeElement;if(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Ka(!0);return}if(a.key==="O"||a.key==="o"){const x=document.activeElement;if(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable))return;if(a.preventDefault(),a.stopPropagation(),Bi){$i(Bi.zoom);const b=rn.current;let f=0,S=0;if(b){const T=b.width-80,C=b.height-80,E=T/2,X=C/2,se=Bi.x,W=Bi.y,Q=Bi.zoom;f=E-se*Q,S=X-W*Q}Yn({x:f,y:S})}else{$i(1);const b=rn.current;let f=0,S=0;if(b){const T=b.width-80,C=b.height-80,E=T/2,X=C/2,se=0,W=0;f=E-se*1,S=X-W*1}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Yn({x:f,y:S})}ze("overlay"),St(new Set),ht(new Set),wt(new Set),Ee(new Set),Z("select");return}if((a.key==="Alt"||a.altKey)&&(ur(!0),Nc(!0)),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),un(),na(!1),Ro(!1),to(!1),oa(!1),aa(!1),Ft(!1),Rr(!1),_i(null);return}if(a.key==="Enter"&&N==="draw"&&be==="trace"){lo();return}if((a.key==="Delete"||a.key==="Backspace")&&(mt.size>0||pt.size>0||at.size>0||Ut.size>0)){if(a.preventDefault(),a.stopPropagation(),mt.size>0){const x=Ie.filter(T=>mt.has(T.id)),v=li&&x.some(T=>T.type==="via"),b=ai&&x.some(T=>T.type==="trace"),f=Li&&x.some(T=>T.type==="pad"),S=Xl&&x.some(T=>T.type==="testPoint");v?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):b?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):f?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):S?alert("Cannot delete: Test points are locked. Unlock test points to delete them."):(Vt(T=>T.filter(C=>!mt.has(C.id))),St(new Set))}pt.size>0&&(ki?alert("Cannot delete: Components are locked. Unlock components to delete them."):(xn(x=>x.filter(v=>!pt.has(v.id))),cn(x=>x.filter(v=>!pt.has(v.id))),ht(new Set))),at.size>0&&(yn?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Xn(x=>x.filter(v=>!at.has(v.id))),wt(new Set))),Ut.size>0&&(Ri?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(Fi(x=>x.filter(v=>!Ut.has(v.id))),Ee(new Set)));return}if((N==="draw"||N==="erase"||N==="power"||N==="ground")&&(a.key==="z"||a.key==="Z")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),N==="power"){Xn(x=>x.length===0?x:x.slice(0,-1));return}if(N==="ground"){Fi(x=>x.length===0?x:x.slice(0,-1));return}if(N==="draw"&&be==="trace"){const x=It,v=El.current,b=x.length>0?x:v;if(b.length>0){b.length>1?Nn(f=>f.slice(0,-1)):Nn([]);return}Vt(f=>{for(let S=f.length-1;S>=0;S--){const T=f[S];if(T.type==="trace"&&T.layer===gt&&T.points.length>=2)if(T.points.length>2){const C=T.points.slice(0,-1);return Nn(C),[...f.slice(0,S),...f.slice(S+1)]}else return[...f.slice(0,S),...f.slice(S+1)]}return f});return}if(pa&&It.length>0){Nn([]);return}N==="draw"&&(be==="via"||be==="pad"||be==="testPoint")&&Vt(x=>{for(let v=x.length-1;v>=0;v--){const b=x[v];if(b.layer===gt&&b.type===be)return[...x.slice(0,v),...x.slice(v+1)]}return x});return}if(!a.ctrlKey&&!a.altKey){const x=document.activeElement;if(!(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),un();return;case"b":case"B":a.preventDefault(),Z("power");return;case"g":case"G":a.preventDefault(),Z("ground");return;case"v":case"V":a.preventDefault(),Hl("via"),Z("draw");return;case"p":case"P":a.preventDefault(),Hl("pad"),Z("draw"),Bn(en||"top");return;case"y":case"Y":a.preventDefault(),Hl("testPoint"),Z("draw"),Bn(tn||"top");return;case"t":case"T":a.preventDefault(),Hl("trace"),Z("draw"),Bn(zt||"top");return;case"c":case"C":a.preventDefault(),Z("component"),oa(!0),aa(!1),Ir(null);return;case"e":case"E":a.preventDefault(),Z("erase");return;case"h":case"H":a.preventDefault(),Z("pan");return;case"x":case"X":a.preventDefault(),Z("center");return;case"z":case"Z":if(!a.ctrlKey){a.preventDefault(),Qs(!1),Z("magnify");return}break}}if(N==="transform"&&At){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const v=document.activeElement;if(v&&v.tagName==="INPUT"){const b=v;b.type==="radio"&&b.blur()}if(ii)return;if(Wl==="nudge"){let b=0,f=0;switch(a.key){case"ArrowLeft":b=-1;break;case"ArrowRight":b=1;break;case"ArrowUp":f=-1;break;case"ArrowDown":f=1;break;default:return}At==="top"&&y?u(S=>S?{...S,x:S.x+b,y:S.y+f}:null):At==="bottom"&&U?L(S=>S?{...S,x:S.x+b,y:S.y+f}:null):At==="both"&&(y&&u(S=>S?{...S,x:S.x+b,y:S.y+f}:null),U&&L(S=>S?{...S,x:S.x+b,y:S.y+f}:null))}else if(Wl==="scale"){let b=0;switch(a.key){case"ArrowUp":b=.01;break;case"ArrowDown":b=-.01;break;case"ArrowRight":b=.001;break;case"ArrowLeft":b=-.001;break;default:return}if(At==="top"){y&&u(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null);return}if(At==="bottom"){U&&L(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null);return}if(At==="both"){y&&u(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null),U&&L(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null);return}}else if(Wl==="rotate"){let b=0;switch(a.key){case"ArrowUp":b=1;break;case"ArrowDown":b=-1;break;case"ArrowRight":b=.1;break;case"ArrowLeft":b=-.1;break;default:return}if(At==="top"){y&&u(f=>f?{...f,rotation:f.rotation+b}:null);return}if(At==="bottom"){U&&L(f=>f?{...f,rotation:f.rotation+b}:null);return}if(At==="both"){y&&u(f=>f?{...f,rotation:f.rotation+b}:null),U&&L(f=>f?{...f,rotation:f.rotation+b}:null);return}}else if(Wl==="slant"){let b=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":b=-.5;break;case"ArrowRight":b=.5;break}if(b!==0||f!==0){const S=C=>C*Math.PI/180,T=C=>Math.max(-.7,Math.min(.7,C));if(At==="top"){y&&u(C=>C?{...C,skewX:T((C.skewX||0)+S(b)),skewY:T((C.skewY||0)+S(f))}:null);return}if(At==="bottom"){U&&L(C=>C?{...C,skewX:T((C.skewX||0)+S(b)),skewY:T((C.skewY||0)+S(f))}:null);return}if(At==="both"){y&&u(C=>C?{...C,skewX:T((C.skewX||0)+S(b)),skewY:T((C.skewY||0)+S(f))}:null),U&&L(C=>C?{...C,skewX:T((C.skewX||0)+S(b)),skewY:T((C.skewY||0)+S(f))}:null);return}}}else if(Wl==="keystone"){let b=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":b=-.5;break;case"ArrowRight":b=.5;break}if(b!==0||f!==0){const S=C=>C*Math.PI/180,T=C=>Math.max(-.35,Math.min(.35,C));if(At==="top"){y&&u(C=>C?{...C,keystoneH:T((C.keystoneH||0)+S(b)),keystoneV:T((C.keystoneV||0)+S(f))}:null);return}if(At==="bottom"){U&&L(C=>C?{...C,keystoneH:T((C.keystoneH||0)+S(b)),keystoneV:T((C.keystoneV||0)+S(f))}:null);return}if(At==="both"){y&&u(C=>C?{...C,keystoneH:T((C.keystoneH||0)+S(b)),keystoneV:T((C.keystoneV||0)+S(f))}:null),U&&L(C=>C?{...C,keystoneH:T((C.keystoneH||0)+S(b)),keystoneV:T((C.keystoneV||0)+S(f))}:null);return}}}}else{const x=a.target;if(x.tagName==="INPUT"&&x.type==="range"){const v=x,b=Number(v.value),f=Number(v.min),S=Number(v.max),T=Number(v.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const C=Math.max(f,b-T);v.value=C.toString(),v.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const E=Math.min(S,b+T);v.value=E.toString(),v.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[N,At,Wl,y,U,mt,pt,at,Ut,Ie,ft,Nt,tt,nt,rt,be,lo,zt,m,G,$e,Oe,un,xn,cn]);Ue.useEffect(()=>{N!=="transform"&&Il(null)},[N]),Ue.useEffect(()=>{window.addEventListener("keydown",hs,!0);const a=r=>{r.key==="Alt"&&(ur(!1),Nc(!1),tr(null))};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",hs,!0),window.removeEventListener("keyup",a,!0)}},[hs,at,Ut,yn,yn,tt,nt,_c,pr,un,pt,ft,Nt,xn,cn,Bi]);const _a=j.useCallback(()=>{To.current={},de("#AA4499"),Ne("#F781BF"),Ke(6),ne(6),jt("trace","#AA4499","top"),jt("trace","#F781BF","bottom"),qe("trace",6,"top"),qe("trace",6,"bottom"),oe("#0072B2"),V("#56B4E9"),_(18),xe(18),jt("pad","#0072B2","top"),jt("pad","#56B4E9","bottom"),qe("pad",18,"top"),qe("pad",18,"bottom"),Qn("#6A3D9A"),el("#9467BD"),Ol(18),bl(18),jt("component","#6A3D9A","top"),jt("component","#9467BD","bottom"),qe("component",18,"top"),qe("component",18,"bottom"),Wa("top"),D("#AA4499"),R(6),ni([{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}]),Ll([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),qe("power",18),qe("ground",18),Fs(!1),jr(!1),zr(!1),qo(!1),Ys(!1),Ls(!1),Bn("top"),Z("select"),O(50),we(!1),ze("overlay"),su(1)},[jt,qe]),ra=j.useCallback(()=>{_a(),setTimeout(()=>{$i(1);const a=rn.current,r=za.current;let p=0,x=0;if(a&&r){const v=a.getBoundingClientRect(),b=r.getBoundingClientRect(),f=a.width-80,S=a.height-80,E=60+168+6,X=v.left-b.left,se=E-X,W=v.width-Math.max(0,se),Q=se+W/2,H=v.height/2,q=f/2,$=S/2,ue=v.width/a.width,Se=v.height/a.height,me=Q/ue,ae=H/Se,Me=me-40,Re=ae-40;p=Me-q,x=Re-$}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Yn({x:p,y:x}),St(new Set),ht(new Set),wt(new Set),Ee(new Set)},100)},[_a]);Ue.useEffect(()=>{ra()},[]),Ue.useEffect(()=>{if(!Ga.visible)return;const a=[];mt.size>0,mt.size===0&&pt.size===0&&at.size===0&&Ut.size===0&&a.push(`
No objects selected.`);const r=a.join(`
`);Sa(p=>({...p,text:r}))},[Ga.visible,mt,pt,at,Ut,Ie,ft,Nt,tt,nt,rt]),Ue.useEffect(()=>{const a=r=>{const p=rn.current;if(p&&!(Pa.current&&Pa.current.contains(r.target))&&!(r.target instanceof Node&&p.contains(r.target))){if(lo(),Ua){const x=ko.current;(!x||!(r.target instanceof Node)||!x.contains(r.target))&&na(!1)}if(Ma){const x=Pa.current;(!x||!(r.target instanceof Node)||!x.contains(r.target))&&(oa(!1),Z("select"))}if(ds){const x=Mc.current;(!x||!(r.target instanceof Node)||!x.contains(r.target))&&(aa(!1),_i(null))}if(Rc){const x=Ur.current;!r.target?.closest('button[title="Color Picker"]')&&(!x||!(r.target instanceof Node)||!x.contains(r.target))&&Rr(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[lo,Ua,ia,Ma,ds,Rc]);const ao=a=>{if(!a.current)return{top:0,left:0};const r=a.current.getBoundingClientRect(),p=za.current?.getBoundingClientRect();return p?{top:r.top-p.top,left:r.left-p.left+r.width+4}:{top:0,left:0}},Ul=j.useCallback(()=>{ko.current&&fs.current&&requestAnimationFrame(()=>{if(ko.current&&fs.current){const a=ao(fs);ko.current.style.top=`${a.top}px`,ko.current.style.left=`${a.left}px`}})},[]),gs=j.useCallback(()=>{Do.current&&ci.current&&requestAnimationFrame(()=>{if(Do.current&&ci.current){const a=ao(ci);Do.current.style.top=`${a.top}px`,Do.current.style.left=`${a.left}px`}})},[]),hr=j.useCallback(()=>{ul.current&&wi.current&&requestAnimationFrame(()=>{if(ul.current&&wi.current){const a=ao(wi);ul.current.style.top=`${a.top}px`,ul.current.style.left=`${a.left}px`}})},[]);Ue.useEffect(()=>{Ua&&Ul()},[Ua,Ul]),Ue.useEffect(()=>{ia&&gs()},[ia,gs]),Ue.useEffect(()=>{la&&hr()},[la,hr]),Ue.useEffect(()=>{if(Ma&&Pa.current&&sa.current){const a=ao(sa);Pa.current.style.top=`${a.top}px`,Pa.current.style.left=`${a.left}px`}},[Ma]),Ue.useEffect(()=>{if(In&&Bl.current&&dr.current){const a=ao(dr);Bl.current.style.top=`${a.top}px`,Bl.current.style.left=`${a.left}px`}},[In]),Ue.useEffect(()=>{if(Pr&&no.current&&$r.current){const a=ao($r);no.current.style.top=`${a.top}px`,no.current.style.left=`${a.left}px`}},[Pr]),Ue.useEffect(()=>{const a=r=>{if(!Wn)return;const p=document.querySelector("[data-component-editor-dialog]");if(p&&r.target instanceof Node&&p.contains(r.target)){const Re=r.target;if(Re.tagName==="BUTTON"||Re.tagName==="INPUT"||Re.closest("button")||Re.closest("input"))return}const x=rn.current;if(!x)return;const v=x.getBoundingClientRect(),b=r.clientX,f=r.clientY;if(b<v.left||b>v.right||f<v.top||f>v.bottom)return;const S=x.width/v.width,T=x.height/v.height,C=b-v.left,E=f-v.top,X=C*S,se=E*T,W=X-40,Q=se-40,H=(W-vt.x)/Pe,q=(Q-vt.y)/Pe;let $=1/0,ue=null,Se=null;const me=Math.max(6/Pe,4),Me=[...ft,...Nt].find(Re=>Re.id===Wn.componentId)?.layer||"top";for(const Re of Ie)if((Re.type==="via"||Re.type==="pad")&&Re.points.length>0){if(Re.type==="pad"&&(Re.layer||"top")!==Me)continue;const M=Re.points[0],A=Math.max(1,Re.size/2),ce=Math.hypot(M.x-H,M.y-q),J=Math.max(A,me);ce<=J&&ce<$&&($=ce,ue=M.id??null,Se=Re)}if(ue!=null&&Se){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${ue}`),console.log(`  Connecting pin ${Wn.pinIndex+1} of component ${Wn.componentId}`);const Re=String(ue),M=Wn.pinIndex,A=Wn.componentId,ce=ft.find(Ce=>Ce.id===A),J=Nt.find(Ce=>Ce.id===A);if(ce){const Ce=Ie;xn(Be=>{const Ze=Be.find(Ae=>Ae.id===A);if(!Ze)return Be;const Ye=Ze.pinConnections||[],ct=Ye.length>0?[...Ye]:new Array(Ze.pinCount).fill("");let Je;if(ct.length!==Ze.pinCount){Je=new Array(Ze.pinCount).fill("");for(let Ae=0;Ae<Math.min(ct.length,Ze.pinCount);Ae++)Je[Ae]=ct[Ae]||""}else Je=[...ct];Je[M]=Re,console.log(`Updated pin ${M} with value: ${Re}`),console.log("New pinConnections:",Je);const Ge=Be.find(Ae=>Ae.id===A),He=Ge?Cf(Ge,Je,Ce):null;return Be.map(Ae=>{if(Ae.id===A){const ot={...Ae,pinConnections:Je};return He&&(ot.pinPolarities=He),ot}return Ae})})}else if(J){const Ce=Ie;cn(Be=>{const Ze=Be.find(Ae=>Ae.id===A);if(!Ze)return Be;const Ye=Ze.pinConnections||[],ct=Ye.length>0?[...Ye]:new Array(Ze.pinCount).fill("");let Je;if(ct.length!==Ze.pinCount){Je=new Array(Ze.pinCount).fill("");for(let Ae=0;Ae<Math.min(ct.length,Ze.pinCount);Ae++)Je[Ae]=ct[Ae]||""}else Je=[...ct];Je[M]=Re,console.log(`Updated pin ${M} with value: ${Re}`),console.log("New pinConnections:",Je);const Ge=Be.find(Ae=>Ae.id===A),He=Ge?Cf(Ge,Je,Ce):null;return Be.map(Ae=>{if(Ae.id===A){const ot={...Ae,pinConnections:Je};return He&&(ot.pinPolarities=He),ot}return Ae})})}setTimeout(()=>{Sl(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Wn)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[Wn,ft,Nt,Ie,Pe,vt.x,vt.y]);const qn=j.useCallback((a,r,p,x)=>{const v=window.innerWidth,b=window.innerHeight,f=10;let S=Math.max(f,Math.min(a,v-p-f)),T=Math.max(f,Math.min(r,b-x-f));return{x:S,y:T}},[]);Ue.useEffect(()=>{if(!wr)return;const a=p=>{if(!Ya)return;const x={x:p.clientX-Ya.x,y:p.clientY-Ya.y},v=qn(x.x,x.y,250,window.innerHeight*.4);ma(v),localStorage.setItem("componentDialogPosition",JSON.stringify(v))},r=()=>{Ws(!1),Tc(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[wr,Ya,qn]),Ue.useEffect(()=>{if(!_r)return;const a=p=>{if(!Or)return;const x={x:p.clientX-Or.x,y:p.clientY-Or.y},v=qn(x.x,x.y,250,window.innerHeight*.4);Qa(v),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(v))},r=()=>{xd(!1),yd(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[_r,Or,qn]),Ue.useEffect(()=>{if(!rr)return;const a=p=>{if(!Ba)return;const x={x:p.clientX-Ba.x,y:p.clientY-Ba.y};Ja(x),localStorage.setItem("notesDialogPosition",JSON.stringify(x))},r=()=>{jo(!1),bd(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[rr,Ba]),Ue.useEffect(()=>{if(Sn&&ea===null){const a=localStorage.getItem("notesDialogPosition");if(a)try{const r=JSON.parse(a);Ja(r)}catch{Ja({x:window.innerWidth-550,y:100})}else Ja({x:window.innerWidth-550,y:100})}},[Sn,ea]),Ue.useEffect(()=>{if(Ci&&Ci.visible&&wl===null){const a=localStorage.getItem("componentDialogPosition");let r;if(a)try{const p=JSON.parse(a);r=qn(p.x,p.y,250,window.innerHeight*.4),ma(r)}catch{r=qn(window.innerWidth-280,90,250,window.innerHeight*.4),ma(r)}else r=qn(window.innerWidth-280,90,250,window.innerHeight*.4),ma(r)}else!Ci||Ci.visible},[Ci,wl,qn]),Ue.useEffect(()=>{if(Ga.visible&&nn===null){const a=localStorage.getItem("detailedInfoDialogPosition");let r;if(a)try{const p=JSON.parse(a);r=qn(p.x,p.y,400,window.innerHeight*.8),Qa(r)}catch{r=qn(window.innerWidth-450,90,400,window.innerHeight*.8),Qa(r)}else r=qn(window.innerWidth-450,90,400,window.innerHeight*.8),Qa(r)}else Ga.visible},[Ga.visible,nn,qn]),Ue.useEffect(()=>{const a=()=>{if(wl){const r=qn(wl.x,wl.y,250,window.innerHeight*.4);(r.x!==wl.x||r.y!==wl.y)&&(ma(r),localStorage.setItem("componentDialogPosition",JSON.stringify(r)))}if(nn){const r=qn(nn.x,nn.y,400,window.innerHeight*.8);(r.x!==nn.x||r.y!==nn.y)&&(Qa(r),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(r)))}};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[wl,nn,qn]);const Cd=j.useCallback(a=>{switch(a){case"transparency":O(50);break;case"brushSize":R(3);break}},[]);Ue.useEffect(()=>{if(pe){es.current=performance.now(),O(0);const a=r=>{const p=es.current||r,x=2e3,v=(r-p)%x/x,b=1-Math.abs(1-2*v);O(Math.round(b*100)),xo.current=requestAnimationFrame(a)};xo.current=requestAnimationFrame(a)}return()=>{xo.current&&(cancelAnimationFrame(xo.current),xo.current=null)}},[pe]),Ue.useEffect(()=>{if(N==="center"){ml(ox());return}const a=N==="erase"?"erase":N==="magnify"?"magnify":N==="ground"?"ground":N==="power"?"power":N==="component"?"component":N==="draw"?be==="via"?"via":be==="pad"?"pad":be==="testPoint"?"testPoint":"trace":"default";if(a==="default"){ml(void 0);return}const r=Math.max(1,Pe),p=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(k*r)),v=p+4*2+(a==="magnify"?8:0),b=document.createElement("canvas");b.width=v,b.height=v;const f=b.getContext("2d");if(!f){ml(void 0);return}const S=v/2,T=v/2,C=p/2;if(f.clearRect(0,0,v,v),a==="via"){const X=C,se=C*.5,W=C*.7,H=bt.get("via").color;f.fillStyle=H,f.beginPath(),f.arc(S,T,X,0,Math.PI*2),f.arc(S,T,se,0,Math.PI*2),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(S-W,T),f.lineTo(S+W,T),f.stroke(),f.beginPath(),f.moveTo(S,T-W),f.lineTo(S,T+W),f.stroke()}else if(a==="pad"){const X=en==="top"?"padTop":"padBottom",se=bt.get(X),W=se.color,H=Math.max(6,Math.round(se.size*r))/2,q=H*2,$=q*.5,ue=H*.7;f.fillStyle=W,f.beginPath(),f.rect(S-H,T-H,q,q),f.rect(S-$/2,T-$/2,$,$),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(S-ue,T),f.lineTo(S+ue,T),f.stroke(),f.beginPath(),f.moveTo(S,T-ue),f.lineTo(S,T+ue),f.stroke()}else if(a==="trace"){const X=zt==="top"?"traceTop":"traceBottom",W=bt.get(X).color;f.fillStyle=W,f.beginPath(),f.arc(S,T,C,0,Math.PI*2),f.fill()}else if(a==="testPoint"){const X=tn==="top"?"testPointTop":"testPointBottom",se=bt.get(X);ml(sx(se.size));return}else if(a==="erase"){const X=Math.max(k*.75,8),se=Math.max(k*.5,6),W=Math.max(k*.2,2);f.save(),f.translate(S,T),f.rotate(-35*Math.PI/180),f.fillStyle="#f5a3b3",f.strokeStyle="#111",f.lineWidth=1.5;const Q=1.5,H=-X/2,q=-se/2;f.beginPath(),f.moveTo(H+Q,q),f.lineTo(H+X-Q,q),f.quadraticCurveTo(H+X,q,H+X,q+Q),f.lineTo(H+X,q+se-Q),f.quadraticCurveTo(H+X,q+se,H+X-Q,q+se),f.lineTo(H+Q,q+se),f.quadraticCurveTo(H,q+se,H,q+se-Q),f.lineTo(H,q+Q),f.quadraticCurveTo(H,q,H+Q,q),f.closePath(),f.fill(),f.stroke(),f.fillStyle="#f18ea4",f.beginPath(),f.rect(-X/2,se/2-W,X,W),f.fill(),f.restore()}else if(a==="magnify"){const X=C;f.strokeStyle="#111",f.lineWidth=2,f.beginPath(),f.arc(S-2,T-2,X,0,Math.PI*2),f.stroke();const se=S+X*.6,W=T+X*.6,Q=se+6,H=W+6;f.beginPath(),f.moveTo(se,W),f.lineTo(Q,H),f.stroke(),f.beginPath(),f.moveTo(S-6,T-2),f.lineTo(S+2,T-2),f.stroke(),yo||(f.beginPath(),f.moveTo(S-2,T-6),f.lineTo(S-2,T+2),f.stroke())}else if(a==="ground"){const X=bt.get("ground");if(f.strokeStyle=X.color,f.lineWidth=2,f.lineCap="round",sl==="groundbus-earth"){const W=C*1.5,Q=W*.9,H=W*.24,q=W*1.6;f.beginPath(),f.moveTo(S,T-Q/2),f.lineTo(S,T+Q/2),f.stroke();for(let $=0;$<3;$++){const ue=T+Q/2+$*H,Se=q*(1-$*.25);f.beginPath(),f.moveTo(S-Se/2,ue),f.lineTo(S+Se/2,ue),f.stroke()}}else{const W=C*.8;f.beginPath(),f.arc(S,T,C,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(S,T-C-W),f.lineTo(S,T+C+W),f.stroke(),f.beginPath(),f.moveTo(S-C-W,T),f.lineTo(S+C+W,T),f.stroke()}}else if(a==="power"){const X=bt.get("power");f.strokeStyle=X.color,f.lineWidth=2,f.lineCap="round";const se=C*.8;f.beginPath(),f.arc(S,T,C,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(S,T-C-se),f.lineTo(S,T+C+se),f.stroke(),f.beginPath(),f.moveTo(S-C-se,T),f.lineTo(S+C+se,T),f.stroke()}else if(a==="component"){const se=(hn||"top")==="top"?"componentTop":"componentBottom",Q=bt.get(se).color,H=p,q=H/2;f.strokeStyle=Q,f.lineWidth=2,f.fillStyle="rgba(255,255,255,0.9)",f.beginPath(),f.rect(S-q,T-q,H,H),f.fill(),f.stroke();const $=Ji?zf(Ji):"?";f.fillStyle=Q,f.font=`bold ${Math.max(8,H*.35)}px sans-serif`,f.textAlign="center",f.textBaseline="middle",f.fillText($,S,T)}const E=`url(${b.toDataURL()}) ${Math.round(S)} ${Math.round(T)}, crosshair`;ml(E)},[N,be,F,k,Pe,yo,Ji,Bt,sl,rt,kt,zt,en,tn,hn,Mn.toolInstanceId,Mn.color,Mn.size]),Ue.useEffect(()=>{Bo()},[Bo]),Ue.useEffect(()=>{Bo()},[bo.width,bo.height]),Ue.useEffect(()=>{mt.size===0&&N==="draw"&&be==="trace"&&k>=1&&(gt==="top"?Ke(k):ne(k))},[k,N,be,gt,mt]),Ue.useEffect(()=>{Vt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=dl(p,rt);if(r.viaType!==x)return{...r,viaType:x}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=Ki(p,rt);if(r.padType!==x)return{...r,padType:x}}else if(r.type==="testPoint"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=ta(p,rt),v=x.includes("Power")?"power":x.includes("Ground")?"ground":x.includes("Signal")?"signal":"unknown";if(r.testPointType!==v)return{...r,testPointType:v}}return r}))},[tt,nt,rt,dl,Ki,ta]);const kd=j.useCallback(()=>{const a=rn.current;if(!a)return;const r=a.toDataURL("image/png"),p=window.open("","_blank");if(!p){alert("Please allow popups to print the canvas.");return}p.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${r}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),p.document.close()},[]);Ue.useEffect(()=>{const a=p=>{p.key==="Shift"&&Qs(!0)},r=p=>{p.key==="Shift"&&Qs(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}},[]);const Oc=j.useCallback(a=>{if(a.size===0)return;const r=Array.from(a).map(p=>String(p));Vt(p=>p.map(x=>{if(x.type==="trace"){const v=x.points.filter(b=>b.id===void 0?!0:!a.has(b.id));return v.length<2?null:{...x,points:v}}return x}).filter(x=>x!==null)),xn(p=>p.map(x=>{const v=x.pinConnections||[];if(v.some(f=>f&&r.includes(f))){const f=v.map(S=>S&&r.includes(S)?"":S);return{...x,pinConnections:f}}return x})),cn(p=>p.map(x=>{const v=x.pinConnections||[];if(v.some(f=>f&&r.includes(f))){const f=v.map(S=>S&&r.includes(S)?"":S);return{...x,pinConnections:f}}return x}))},[Vt,xn,cn]),Hc=j.useRef(new Set);Ue.useEffect(()=>{const a=new Set;for(const p of Ie)if((p.type==="via"||p.type==="pad")&&p.points.length>0){const x=p.points[0].id;x!==void 0&&a.add(x)}const r=new Set;for(const p of Hc.current)a.has(p)||r.add(p);r.size>0&&Oc(r),Hc.current=a},[Ie,Oc]),Ue.useEffect(()=>{Vt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=dl(p,rt);if(r.viaType!==x)return{...r,viaType:x}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=Ki(p,rt);if(r.padType!==x)return{...r,padType:x}}else if(r.type==="testPoint"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=ta(p,rt),v=x.includes("Power")?"power":x.includes("Ground")?"ground":x.includes("Signal")?"signal":"unknown";if(r.testPointType!==v)return{...r,testPointType:v}}return r}))},[tt,nt,rt,dl,Ki,ta]),Ue.useEffect(()=>{const a=r=>{lr.current&&(lr.current.contains(r.target)||Cc(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),Ue.useEffect(()=>{const a=(r,p)=>{const x=r.current;if(!x)return;const v=x.getContext("2d");if(!v)return;const b=x.width,f=x.height;if(v.clearRect(0,0,b,f),v.fillStyle="#fff",v.fillRect(0,0,b,f),p?.bitmap){const S=p.bitmap,T=Math.min(b/S.width,f/S.height),C=Math.max(1,Math.floor(S.width*T)),E=Math.max(1,Math.floor(S.height*T)),X=Math.floor((b-C)/2),se=Math.floor((f-E)/2);v.drawImage(S,X,se,C,E)}v.strokeStyle="#ddd",v.lineWidth=1,v.strokeRect(.5,.5,b-1,f-1)};a(ar,y),a(or,U)},[y,U]),Ue.useEffect(()=>{const a=[],r=[],p=[],x=[];for(const v of Ie)if(v.type==="via"&&v.points.length>=1){const b=v.points[0],f={id:v.id,pointId:b.id,x:b.x,y:b.y,size:v.size,color:v.color};a.push(f)}else if(v.type==="pad"&&v.points.length>=1){const b=v.points[0],f={id:v.id,pointId:b.id,x:b.x,y:b.y,size:v.size,color:v.color,layer:v.layer||"top"};r.push(f)}else if(v.type==="trace"&&v.points.length>=2)for(let b=0;b<v.points.length-1;b++){const f=v.points[b],S=v.points[b+1],T={id:v.id,startPointId:f.id,endPointId:S.id,x1:f.x,y1:f.y,x2:S.x,y2:S.y,size:v.size,color:v.color};v.layer==="top"?p.push(T):x.push(T)}bi(a),Vn(r),va(p),Is(x)},[Ie]);const gr=j.useRef(Ie);gr.current=Ie;const ca=j.useCallback(()=>{const r=new Date().toISOString(),p=rx();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:r,view:{currentView:je,viewScale:Pe,viewPan:vt,showBothLayers:Un,selectedDrawingLayer:gt},images:{top:y?{name:y.name,width:y.width,height:y.height,filePath:y.filePath||y.name,dataUrl:y.dataUrl,x:y.x,y:y.y,scale:y.scale,rotation:y.rotation,flipX:y.flipX,flipY:y.flipY,skewX:y.skewX,skewY:y.skewY,keystoneV:y.keystoneV,keystoneH:y.keystoneH}:null,bottom:U?{name:U.name,width:U.width,height:U.height,filePath:U.filePath||U.name,dataUrl:U.dataUrl,x:U.x,y:U.y,scale:U.scale,rotation:U.rotation,flipX:U.flipX,flipY:U.flipY,skewX:U.skewX,skewY:U.skewY,keystoneV:U.keystoneV,keystoneH:U.keystoneH}:null},projectDirectoryName:xs.current?xs.current.name||null:$n&&$n.name||null,drawing:{drawingStrokes:gr.current.filter(v=>!(v.type==="trace"&&v.points.length<2)),vias:yi,tracesTop:Go,tracesBottom:Vs,componentsTop:ft,componentsBottom:Nt,grounds:nt,powers:tt},powerBuses:rt,groundBuses:Ln,pointIdCounter:Sh(),designatorCounters:bc(),autoAssignDesignators:Kl,useGlobalDesignatorCounters:rl,traceColors:{top:kt.get("trace")?.layerSettings.get("top")?.color||m,bottom:kt.get("trace")?.layerSettings.get("bottom")?.color||G},traceSizes:{top:kt.get("trace")?.layerSettings.get("top")?.size||$e,bottom:kt.get("trace")?.layerSettings.get("bottom")?.size||Oe},padColors:{top:kt.get("pad")?.layerSettings.get("top")?.color||Y,bottom:kt.get("pad")?.layerSettings.get("bottom")?.color||De},padSizes:{top:kt.get("pad")?.layerSettings.get("top")?.size||z,bottom:kt.get("pad")?.layerSettings.get("bottom")?.size||ie},componentColors:{top:kt.get("component")?.layerSettings.get("top")?.color||fi,bottom:kt.get("component")?.layerSettings.get("bottom")?.color||Kn},componentSizes:{top:kt.get("component")?.layerSettings.get("top")?.size||Wi,bottom:kt.get("component")?.layerSettings.get("bottom")?.size||pi},traceToolLayer:zt,toolSettings:{trace:kt.get("trace")?.settings||{color:"#ff0000",size:6},via:kt.get("via")?.settings||{color:"#ff0000",size:18},pad:kt.get("pad")?.settings||{color:"#ff0000",size:18},component:kt.get("component")?.settings||{color:"#ff0000",size:18},ground:kt.get("ground")?.settings||{color:"#000000",size:18},power:kt.get("power")?.settings||{color:"#ff0000",size:18},erase:kt.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:ii,areViasLocked:li,arePadsLocked:Li,areTracesLocked:ai,areComponentsLocked:ki,areGroundNodesLocked:Ri,arePowerNodesLocked:yn},visibility:{showViasLayer:Mi,showTopPadsLayer:Gn,showBottomPadsLayer:al,showTopTracesLayer:Pi,showBottomTracesLayer:Xi,showTopComponents:Zi,showBottomComponents:Dn,showPowerLayer:Si,showGroundLayer:Nl,showConnectionsLayer:Na},autoSave:{enabled:Di,interval:Tl,baseName:Ta},projectInfo:{name:oi},savedCenterLocation:Bi,toolInstances:bt.getAll()},timestamp:p}},[je,Pe,vt,Un,gt,y,U,Ie,yi,Go,Vs,ft,Nt,nt,kt,ii,li,Li,ai,ki,Ri,yn,rt,Ln,Sh,m,G,$e,Oe,Y,De,z,ie,fi,Kn,Wi,pi,zt,Di,Tl,Ta,oi,Mi,Gn,al,Pi,Xi,Zi,Dn,Si,Nl,Na,Kl,rl,Bi]),Gr=j.useRef(ca);Gr.current=ca;const Uo=j.useRef(jl);Uo.current=jl;const oo=j.useRef(Ta);oo.current=Ta;const Ec=j.useRef(Ai);Ec.current=Ai;const Vc=j.useRef(Jo);Vc.current=Jo;const Ti=j.useRef([]);Ti.current=gu;const so=j.useRef(-1);so.current=hd;const xs=j.useRef(null),qr=j.useRef(!1);Ue.useEffect(()=>{qr.current||(xs.current=$n)},[$n]);const Zr=j.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=xs.current,r=oo.current;if(console.log(`Auto save: projectDirHandle=${a?`set (${a.name})`:"missing"}, baseName=${r||"missing"}`),!a||!r){console.warn(`Auto save: Missing project directory handle (${!a}) or base name (${!r}). Please create a new project or open an existing project first.`),mi(!1),Wt.current&&(clearInterval(Wt.current),Wt.current=null);return}if(!Cl.current){console.log("Auto save: Skipping - no changes since last save");return}const p=gr.current,x=p.filter(E=>E.type==="trace"&&E.points.length<2);if(x.length>0){console.log(`Auto save: Cleaning up ${x.length} single-point trace(s) before save`),x.forEach(X=>console.log(`  - Removing single-point trace ${X.id}`));const E=p.filter(X=>!(X.type==="trace"&&X.points.length<2));Vt(E),gr.current=E}console.log("Auto save: Starting save...");const{project:v,timestamp:b}=Gr.current(),S=`${xc(r)}_${b}.json`,T=JSON.stringify(v,null,2),C=new Blob([T],{type:"application/json"});try{let E;try{E=await a.getDirectoryHandle("history",{create:!0})}catch(H){console.error("Failed to get/create history directory:",H);return}try{const H=[],q=Vc.current;for await(const $ of a.keys())try{if($==="history"||$===S)continue;const Se=await(await a.getFileHandle($)).getFile();if(!$.endsWith(".json"))continue;const me=await Se.text();try{const ae=JSON.parse(me);if(ae.version&&(ae.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!ae.fileType)){H.push($);const Me=ae.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${$} (${Me}${$===q?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const $ of H)try{const me=await(await(await a.getFileHandle($)).getFile()).text(),Me=await(await E.getFileHandle($,{create:!0})).createWritable();await Me.write(new Blob([me],{type:"application/json"})),await Me.close(),await a.removeEntry($),console.log(`Auto save: Moved ${$} from root to history/`)}catch(ue){console.warn(`Auto save: Failed to move ${$} to history:`,ue)}}catch(H){console.warn("Auto save: Error checking for old files in root:",H)}const se=await(await a.getFileHandle(S,{create:!0})).createWritable();await se.write(C),await se.close(),console.log(`Auto save: Successfully saved ${S} to root directory`),Ec.current(S);const W=Ti.current,Q=[S,...W.filter(H=>H!==S)].sort((H,q)=>q.localeCompare(H));qs(Q),Ti.current=Q,Ni(0),so.current=0,Cl.current=!1}catch(E){console.error("Auto save failed:",E)}},[]);Zs.current=Zr;const Qr=j.useCallback(async()=>{const{project:a}=ca(),r=JSON.stringify(a,null,2),p=new Blob([r],{type:"application/json"});if($n&&oi)try{let C=null;try{C=await $n.getDirectoryHandle("history",{create:!0})}catch(q){console.error("Failed to get/create history directory:",q),C=null}const E=oi.replace(/\.json$/i,""),X=xc(E),{timestamp:se}=ca(),W=`${X}_${se}.json`;if(C)try{const q=[];for await(const $ of $n.keys())try{if($==="history"||$===W)continue;const Se=await(await $n.getFileHandle($)).getFile();if(!$.endsWith(".json"))continue;const me=await Se.text();try{JSON.parse(me).version&&(q.push($),console.log(`Save: Found PCB project file in root: ${$}`))}catch{continue}}catch{continue}for(const $ of q)try{const me=await(await(await $n.getFileHandle($)).getFile()).text(),Me=await(await C.getFileHandle($,{create:!0})).createWritable();await Me.write(new Blob([me],{type:"application/json"})),await Me.close(),await $n.removeEntry($),console.log(`Save: Moved ${$} from root to history/`)}catch(ue){console.warn(`Save: Failed to move ${$} to history:`,ue)}}catch(q){console.warn("Save: Error checking for old files in root:",q)}const H=await(await $n.getFileHandle(W,{create:!0})).createWritable();await H.write(p),await H.close(),Ai(W),console.log(`Project saved: ${oi}/${W}`);return}catch(C){console.error("Failed to save to project directory:",C),ja(null)}if(oi&&!$n){const C=window;if(typeof C.showDirectoryPicker=="function")try{const E=await C.showDirectoryPicker();ja(E);const X=`${oi}.json`,W=await(await E.getFileHandle(X,{create:!0})).createWritable();await W.write(p),await W.close(),Ai(X),console.log(`Project saved: ${X} in selected directory`);return}catch(E){E?.name!=="AbortError"&&console.error("Failed to get directory:",E)}}const x=C=>String(C).padStart(2,"0"),v=new Date,f=`pcb_project_${`${v.getFullYear()}_${x(v.getMonth()+1)}_${x(v.getDate())}_${x(v.getHours())}_${x(v.getMinutes())}_${x(v.getSeconds())}`}.json`,S=window;if(typeof S.showSaveFilePicker=="function")try{const C=await S.showSaveFilePicker({suggestedName:f,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),E=await C.createWritable();await E.write(p),await E.close();const X=C.name;try{const Q=await C.getFile();Ai(Q.name)}catch{Ai(X)}const W=X.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");W&&(zl(W),localStorage.setItem("pcb_project_name",W));try{const Q=C.name.replace(/\.json$/i,""),q=xc(Q).replace(/[^a-zA-Z0-9_-]/g,"_");tl(q),jl||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(Q){console.warn("Could not set up auto save for new file:",Q)}return}catch(C){if(C?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",C)}const T=document.createElement("a");T.href=URL.createObjectURL(p),T.download=f,document.body.appendChild(T),T.click(),setTimeout(()=>{URL.revokeObjectURL(T.href),document.body.removeChild(T)},0)},[ca]);Ue.useEffect(()=>{Wt.current&&(clearInterval(Wt.current),Wt.current=null);const a=Dr.current;if(Dr.current=Di,Di&&Tl){const r=Tl*60*1e3;jl&&Ta?(console.log(`Auto save: Setting up interval for ${Tl} minute(s) (${r}ms)`),a||(Cl.current=!0,setTimeout(()=>{Zr()},100)),Wt.current&&(clearInterval(Wt.current),Wt.current=null),Wt.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${Cl.current}`),console.log(`  - dirHandle: ${Uo.current?"set":"missing"}`),console.log(`  - baseName: ${oo.current||"missing"}`),Zr()},r),console.log(`Auto save: Interval set up for ${r}ms (${Tl} minutes)`),console.log(`  - Directory handle: ${jl?"set":"missing"}`),console.log(`  - Base name: ${Ta||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!jl}) or base name (${!Ta}). Disabling auto save.`),mi(!1),Wt.current&&(clearInterval(Wt.current),Wt.current=null))}else Di||(Dr.current=!1);return()=>{Wt.current&&(clearInterval(Wt.current),Wt.current=null)}},[Di,Tl,jl,Ta]);const ys=j.useRef(!1);Ue.useEffect(()=>{if(!Di){ys.current=!1;return}if(ys.current){ys.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}Cl.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!y,bottomImage:!!U,drawingStrokesCount:Ie.length,componentsTopCount:ft.length,componentsBottomCount:Nt.length,powersCount:tt.length,groundsCount:nt.length,powerBusesCount:rt.length,areImagesLocked:ii,areViasLocked:li,areTracesLocked:ai,areComponentsLocked:ki,areGroundNodesLocked:Ri,arePowerNodesLocked:yn})},[y,U,Ie,ft,Nt,tt,nt,rt,m,G,$e,Oe,ii,li,ai,ki,Ri,yn,Di]),Ue.useEffect(()=>{Di?(ys.current=!0,console.log("Auto save: Enabled, marking first run")):ys.current=!1},[Di]),Ue.useEffect(()=>{Di||(Cl.current=!1)},[Di]);const bu=j.useCallback(()=>!!(y||U||Ie.length>0||ft.length>0||Nt.length>0||tt.length>0||nt.length>0),[y,U,Ie,ft,Nt,tt,nt]);Ue.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&zl(a)},[]);const bs=j.useCallback(()=>{Ko({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),vs=j.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Ko(p=>({...p,locationHandle:r,locationPath:r.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",r.name||"")}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),Ic=j.useCallback(async()=>{const a=dn.projectName.trim();if(!a){alert("Please enter a project name.");return}const r=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!dn.locationHandle){alert("Please select a location for the project.");return}const p=dn.locationHandle;let x;try{x=await p.getDirectoryHandle(r,{create:!0})}catch(v){console.error("Failed to create project folder:",v),alert(`Failed to create project folder "${r}". See console for details.`);return}Ko({visible:!1,projectName:"",locationPath:"",locationHandle:null}),zl(r),ja(x),localStorage.setItem("pcb_project_name",r),localStorage.setItem("pcb_project_location_path",p.name||""),u(null),L(null),Vt([]),xn([]),cn([]),Xn([]),Fi([]),St(new Set),ht(new Set),wt(new Set),Ee(new Set),ze("overlay"),$i(1),Yn({x:0,y:0}),Cl.current=!1,Ai(""),mi(!1),wa(null),qa(null),tl(""),Wt.current&&(clearInterval(Wt.current),Wt.current=null),_a();try{const{project:v,timestamp:b}=ca(),S=`${xc(r)}_${b}.json`,T=JSON.stringify(v,null,2),C=new Blob([T],{type:"application/json"}),X=await(await x.getFileHandle(S,{create:!0})).createWritable();await X.write(C),await X.close(),Ai(S),console.log(`New project created: ${r}/${S}`),Gl({visible:!0,source:"new",interval:5})}catch(v){console.error("Failed to save new project:",v),alert("Failed to save new project file. See console for details.")}},[_a,ca,dn]),ms=j.useCallback(()=>{Ko({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Kr=j.useCallback(()=>{const a=oi?`${oi}.json`:"";Gs({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(ka.current?.focus(),ka.current&&a){const r=a.replace(/\.json$/i,"");ka.current.setSelectionRange(0,r.length)}},100)},[oi]),Rd=j.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Gs(p=>({...p,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Jr=j.useCallback(async()=>{const a=Zt.filename.trim();if(!a){alert("Please enter a file name.");return}const p=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!Zt.locationHandle){alert("Please select a location for the file.");return}const x=Zt.locationHandle;try{const{project:v}=ca(),b=JSON.stringify(v,null,2),f=new Blob([b],{type:"application/json"}),T=await(await x.getFileHandle(p,{create:!0})).createWritable();await T.write(f),await T.close(),Ai(p);const C=p.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");C&&(zl(C),localStorage.setItem("pcb_project_name",C)),ja(x),Gs({visible:!1,filename:"",locationPath:"",locationHandle:null}),Cc(null),console.log(`Project saved as: ${p} in selected directory`)}catch(v){console.error("Failed to save project:",v),alert(`Failed to save project file "${p}". See console for details.`)}},[Zt,ca]),Wc=j.useCallback(()=>{Gs({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),ec=j.useCallback(async()=>{Qo({visible:!1}),await Qr(),bs(),ra()},[Qr,bs,ra]),Dd=j.useCallback(()=>{Qo({visible:!1}),bs(),ra()},[bs,ra]),$c=j.useCallback(()=>{Qo({visible:!1})},[]);Ue.useEffect(()=>{if(kr.visible){setTimeout(()=>{ir.current?.focus()},0);const a=r=>{r.key==="Enter"?(r.preventDefault(),ec()):r.key==="Escape"&&(r.preventDefault(),Qo({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[kr.visible,ec]);const Ss=j.useCallback(async a=>{try{if(a.toolInstances?bt.initializeFromProject(a):bt.initialize(),a.projectInfo)a.projectInfo.name&&(zl(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const b=localStorage.getItem("pcb_project_name");b&&zl(b)}if(a.view&&(a.view.currentView&&ze(a.view.currentView),a.view.viewScale!=null&&$i(a.view.viewScale),a.view.viewPan&&Yn(a.view.viewPan),a.view.showBothLayers!=null&&Jn(a.view.showBothLayers),a.view.selectedDrawingLayer&&Bn(a.view.selectedDrawingLayer)),a.savedCenterLocation?Ks(a.savedCenterLocation):Ks(null),a.traceColors&&(a.traceColors.top&&(de(a.traceColors.top),jt("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(Ne(a.traceColors.bottom),jt("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const b=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let f=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;f<6&&(f=6),Ke(b),ne(f),qe("trace",b,"top"),qe("trace",f,"bottom")}else Ke(6),ne(6);if(a.padColors&&(a.padColors.top&&(oe(a.padColors.top),jt("pad",a.padColors.top,"top")),a.padColors.bottom&&(V(a.padColors.bottom),jt("pad",a.padColors.bottom,"bottom"))),a.padSizes){const b=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:18,f=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:18;_(b),xe(f),qe("pad",b,"top"),qe("pad",f,"bottom")}if(a.componentColors&&(a.componentColors.top&&(Qn(a.componentColors.top),jt("component",a.componentColors.top,"top")),a.componentColors.bottom&&(el(a.componentColors.bottom),jt("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const b=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,f=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;Ol(b),bl(f),qe("component",b,"top"),qe("component",f,"bottom")}if(a.traceToolLayer&&(Wa(a.traceToolLayer),N==="draw"&&be==="trace")){const b=a.traceToolLayer;D(b==="top"?a.traceColors?.top||m:a.traceColors?.bottom||G);const f=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let S=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;S<6&&(S=6),R(b==="top"?f:S)}a.toolSettings&&Cn(b=>{const f=new Map(b);if(a.toolSettings.trace){const T=f.get("trace");if(T){const C={...T,settings:a.toolSettings.trace},E=new Map(T.layerSettings);a.traceSizes&&a.traceColors&&(E.set("top",{color:a.traceColors.top||T.layerSettings.get("top")?.color||"#AA4499",size:a.traceSizes.top||T.layerSettings.get("top")?.size||6}),E.set("bottom",{color:a.traceColors.bottom||T.layerSettings.get("bottom")?.color||"#F781BF",size:a.traceSizes.bottom||T.layerSettings.get("bottom")?.size||6})),f.set("trace",{...C,layerSettings:E})}}if(a.toolSettings.via){const T=f.get("via");T&&f.set("via",{...T,settings:a.toolSettings.via})}if(a.toolSettings.pad){const T=f.get("pad");if(T){const C={...T,settings:a.toolSettings.pad},E=new Map(T.layerSettings);a.padSizes&&a.padColors&&(E.set("top",{color:a.padColors.top||T.layerSettings.get("top")?.color||"#0072B2",size:a.padSizes.top||T.layerSettings.get("top")?.size||18}),E.set("bottom",{color:a.padColors.bottom||T.layerSettings.get("bottom")?.color||"#56B4E9",size:a.padSizes.bottom||T.layerSettings.get("bottom")?.size||18})),f.set("pad",{...C,layerSettings:E})}}if(a.toolSettings.component){const T=f.get("component");if(T){const C={...T,settings:a.toolSettings.component},E=new Map(T.layerSettings);a.componentSizes&&a.componentColors&&(E.set("top",{color:a.componentColors.top||T.layerSettings.get("top")?.color||"#6A3D9A",size:a.componentSizes.top||T.layerSettings.get("top")?.size||18}),E.set("bottom",{color:a.componentColors.bottom||T.layerSettings.get("bottom")?.color||"#9467BD",size:a.componentSizes.bottom||T.layerSettings.get("bottom")?.size||18})),f.set("component",{...C,layerSettings:E})}}if(a.toolSettings.ground){const T=f.get("ground");T&&f.set("ground",{...T,settings:a.toolSettings.ground})}if(a.toolSettings.power){const T=f.get("power");T&&f.set("power",{...T,settings:a.toolSettings.power})}if(a.toolSettings.erase){const T=f.get("erase");T&&f.set("erase",{...T,settings:a.toolSettings.erase})}const S=N==="draw"&&be==="trace"?f.get("trace"):N==="draw"&&be==="via"?f.get("via"):N==="draw"&&be==="pad"?f.get("pad"):N==="component"?f.get("component"):N==="power"?f.get("power"):N==="ground"?f.get("ground"):null;if(S)if(N==="draw"&&be==="trace"){const T=zt||"top",C=S.layerSettings.get(T);C?(D(C.color),R(C.size),T==="top"?(de(C.color),Ke(C.size)):(Ne(C.color),ne(C.size))):(D(S.settings.color),R(S.settings.size))}else if(N==="draw"&&be==="pad"){const T=en||"top",C=S.layerSettings.get(T);C?(D(C.color),R(C.size),T==="top"?(oe(C.color),_(C.size)):(V(C.color),xe(C.size))):(D(S.settings.color),R(S.settings.size))}else if(N==="component"){const T=hn||"top",C=S.layerSettings.get(T);C?(D(C.color),R(C.size),T==="top"?(Qn(C.color),Ol(C.size)):(el(C.color),bl(C.size))):(D(S.settings.color),R(S.settings.size))}else D(S.settings.color),R(S.settings.size);return f});const r=async(b,f)=>{if(!b)return null;let S=null,T="",C=b.filePath||b.name;if(C&&f)try{const X=await(await f.getFileHandle(C)).getFile();S=await createImageBitmap(X),T=URL.createObjectURL(X),console.log(`Loaded image from file path: ${C}`)}catch(E){console.warn(`Failed to load image from file path ${C}, falling back to dataUrl:`,E)}if(!S&&b.dataUrl)try{const E=await(await fetch(b.dataUrl)).blob();S=await createImageBitmap(E),T=b.dataUrl,console.log("Loaded image from dataUrl (backward compatibility)")}catch(E){console.error("Failed to load image from dataUrl:",E)}return S?{url:T,name:b.name??"image",width:b.width??S.width,height:b.height??S.height,dataUrl:b.dataUrl,filePath:C,x:b.x??0,y:b.y??0,scale:b.scale??1,rotation:b.rotation??0,flipX:!!b.flipX,flipY:!!b.flipY,skewX:b.skewX??0,skewY:b.skewY??0,keystoneV:b.keystoneV??0,keystoneH:b.keystoneH??0,bitmap:S}:(console.warn("Could not load image bitmap"),null)},p=await r(a.images?.top,$n),x=await r(a.images?.bottom,$n);if(u(p),L(x),a.pointIdCounter&&typeof a.pointIdCounter=="number")su(a.pointIdCounter);else{let b=0;if(a.drawing?.drawingStrokes){for(const S of a.drawing.drawingStrokes)if(S.points)for(const T of S.points)T.id&&typeof T.id=="number"&&T.id>b&&(b=T.id)}const f=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]];for(const S of f)if(S.pinConnections){for(const T of S.pinConnections)if(T){const C=parseInt(T.trim(),10);!isNaN(C)&&C>b&&(b=C)}}if(a.drawing?.powers)for(const S of a.drawing.powers)S.pointId&&typeof S.pointId=="number"&&S.pointId>b&&(b=S.pointId);if(a.drawing?.grounds)for(const S of a.drawing.grounds)S.pointId&&typeof S.pointId=="number"&&S.pointId>b&&(b=S.pointId);su(b+1)}if(a.locks&&(typeof a.locks.areImagesLocked=="boolean"?Fs(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&Fs(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&jr(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&zc(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&zr(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&qo(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?Ys(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&Ys(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&Ls(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&si(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&ts(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&ns(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&ll(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&So(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&Da(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&ri(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&Qi(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Aa(a.visibility.showGroundLayer),typeof a.visibility.showConnectionsLayer=="boolean"&&Jl(a.visibility.showConnectionsLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&mi(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&wa(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(tl(a.autoSave.baseName),oo.current=a.autoSave.baseName,a.autoSave.enabled&&!jl&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),mi(!1),wa(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),mi(!1),wa(null),tl(""),oo.current="")):(mi(!1),wa(null),qa(null),tl(""),Uo.current=null,oo.current="",Wt.current&&(clearInterval(Wt.current),Wt.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const b=a.drawing.drawingStrokes.map(f=>({...f,points:f.points.map(S=>({...S,...Ot(S)}))})).filter(f=>!(f.type==="trace"&&f.points.length<2));Vt(b)}else{const b=[],f=(C,E)=>{const X=Ot({x:C.x,y:C.y});b.push({id:C.id||`${Date.now()}-via-${Math.random()}`,points:[{id:C.pointId||Vi(),x:X.x,y:X.y}],color:C.color,size:C.size,layer:E,type:"via"})},S=(C,E)=>{const X=Ot({x:C.x1,y:C.y1}),se=Ot({x:C.x2,y:C.y2});b.push({id:C.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:C.startPointId||Vi(),x:X.x,y:X.y},{id:C.endPointId||Vi(),x:se.x,y:se.y}],color:C.color,size:C.size,layer:E,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(C=>f(C,"top")):((a.drawing?.viasTop??[]).forEach(C=>f(C,"top")),(a.drawing?.viasBottom??[]).forEach(C=>f(C,"bottom"))),(a.drawing?.tracesTop??[]).forEach(C=>S(C,"top")),(a.drawing?.tracesBottom??[]).forEach(C=>S(C,"bottom"));const T=b.filter(C=>!(C.type==="trace"&&C.points.length<2));Vt(T)}if(a.drawing?.componentsTop){const b=a.drawing.componentsTop.map(f=>{const S=Ot({x:f.x,y:f.y});return{...f,x:S.x,y:S.y,layer:f.layer||"top",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});xn(b)}if(a.drawing?.componentsBottom){const b=a.drawing.componentsBottom.map(f=>{const S=Ot({x:f.x,y:f.y});return{...f,x:S.x,y:S.y,layer:f.layer||"bottom",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});cn(b)}if(a.designatorCounters&&typeof a.designatorCounters=="object"){const b=a.designatorCounters;ru(b)}else{const b=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]],f={};for(const T of b)if(T.designator&&T.designator.trim()){const C=cu(T.componentType),E=T.designator.match(new RegExp(`^${C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(E){const X=parseInt(E[1],10);(!f[C]||X>f[C])&&(f[C]=X)}}const S=bc();for(const[T,C]of Object.entries(f))f[T]=Math.max(C,S[T]||0);ru(f)}if(typeof a.autoAssignDesignators=="boolean"&&(sr(a.autoAssignDesignators),localStorage.setItem("autoAssignDesignators",String(a.autoAssignDesignators))),typeof a.useGlobalDesignatorCounters=="boolean"?cl(a.useGlobalDesignatorCounters):cl(!1),To.current={},a.drawing?.grounds){const f=a.drawing.grounds.map(S=>{const T=S.pointId||Vi(),C=Ot({x:S.x,y:S.y});return{...S,pointId:T,x:C.x,y:C.y}}).filter(S=>{const T=S.y>=0&&S.x>=0&&typeof S.x=="number"&&typeof S.y=="number"&&!isNaN(S.x)&&!isNaN(S.y)&&isFinite(S.x)&&isFinite(S.y);return T||console.warn(`Filtered out invalid ground symbol at (${S.x}, ${S.y}) - likely in border area or invalid coordinates`),T});Fi(f)}let v;if(a.powerBuses&&Array.isArray(a.powerBuses)&&a.powerBuses.length>0?(v=a.powerBuses,ni(v)):(v=[{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}],ni(v)),a.groundBuses&&Array.isArray(a.groundBuses)&&a.groundBuses.length>0){const b=a.groundBuses.map(f=>{const{value:S,...T}=f;return T});Ll(b)}else Ll([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]);if(a.drawing?.powers){const f=a.drawing.powers.map(S=>{const T=S.pointId||Vi(),C=Ot({x:S.x,y:S.y});return S.powerBusId?{...S,pointId:T,x:C.x,y:C.y,layer:S.layer||"top"}:{...S,pointId:T,x:C.x,y:C.y,powerBusId:v.length>0?v[0].id:"default-5v",layer:S.layer||"top"}}).filter(S=>{const T=S.y>=0&&S.x>=0&&typeof S.x=="number"&&typeof S.y=="number"&&!isNaN(S.x)&&!isNaN(S.y)&&isFinite(S.x)&&isFinite(S.y);return T||console.warn(`Filtered out invalid power node at (${S.x}, ${S.y}) - likely in border area or invalid coordinates`),T});Xn(f)}Cl.current=!1}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}},[N,be,$n,u,L,su,Fs,jr,zc,zr,qo,Ys,Ls,si,ts,ns,ll,So,Da,ri,Qi,Aa,Jl,mi,wa,qa,tl,Vt,xn,cn,Fi,ni,Ll,Xn,Vi,Ot,cu,ru,bc,sr,cl]),Mo=j.useCallback(async()=>{},[Jo]),ws=j.useCallback(async a=>{const r=Uo.current;if(!r){console.warn("Cannot load file: no directory handle");return}try{const x=await(await r.getFileHandle(a)).getFile();if(x.size===0){console.warn(`File ${a} is empty, skipping`);const C=Ti.current.filter(E=>E!==a);qs(C),Ti.current=C;return}const v=await x.text();if(!v||v.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const C=Ti.current.filter(E=>E!==a);qs(C),Ti.current=C;return}let b;try{b=JSON.parse(v)}catch(T){console.error(`Failed to parse JSON from file ${a}:`,T);const E=Ti.current.filter(X=>X!==a);qs(E),Ti.current=E,await Mo();return}_a(),$i(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),St(new Set),ht(new Set),wt(new Set),Ee(new Set),ra(),await Ss(b),Ai(a);const S=Ti.current.indexOf(a);S>=0?(Ni(S),so.current=S):await Mo(),Cl.current=!1}catch(p){console.error("Failed to load file from history:",p);const x=Ti.current;if(x.includes(a)){const v=x.filter(b=>b!==a);qs(v),Ti.current=v,await Mo()}}},[Ss,Mo,ra]);j.useCallback(async()=>{const a=so.current,r=Ti.current;if(a>=0&&a<r.length-1){const p=a+1,x=r[p];x&&await ws(x)}},[ws]),j.useCallback(async()=>{const a=so.current,r=Ti.current;if(a<=0||a>=r.length||r.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",r.length);return}if(a>0&&a<r.length&&r.length>0){const p=a-1;if(p>=0&&p<r.length){const x=r[p];x?await ws(x):(console.warn("No newer file found at index",p),await Mo())}else console.warn("Cannot navigate to newer file: prevIndex",p,"is out of bounds")}},[ws,Mo]),Ue.useEffect(()=>{El.current=It},[It]);const tc=Ue.useRef(be),nc=Ue.useRef(gt);Ue.useEffect(()=>{const a=be!==tc.current;if(N==="draw"&&tc.current==="trace"&&a){if(El.current.length>=2){const r={id:`${Date.now()}-trace-autofinalize`,points:El.current,color:F,size:k,layer:nc.current,type:"trace"};Vt(p=>[...p,r]),nc.current==="top"?Yl(p=>[...p,r.id]):On(p=>[...p,r.id])}Nn([]),Yo(!1)}tc.current=be,nc.current=gt},[be,gt,N,F,k]);const ic=Ue.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);Ue.useEffect(()=>{Bo()},[Ie]),Ue.useEffect(()=>{Bo()},[ft,Nt,nt,Nl]);const Xe=hd>0,Ad=j.useCallback(async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[r]=await a.showOpenFilePicker({multiple:!1}),p=await r.getFile();if(!p.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}Ai(p.name);const x=await p.text(),v=JSON.parse(x);qr.current=!0;let b=null;try{if(typeof r.getParent=="function")b=await r.getParent();else{console.warn("getParent() not available. Prompting user for directory access...");const T=window;if(typeof T.showDirectoryPicker=="function")b=await T.showDirectoryPicker({startIn:"documents"});else throw new Error("Directory picker not available in this browser")}if(b)try{if((await(await b.getFileHandle(p.name)).getFile()).name!==p.name)throw new Error("Directory verification failed: file name mismatch")}catch(T){throw console.error("Directory verification failed:",T),console.error("The selected directory might not contain the opened file"),new Error("Directory verification failed - selected directory does not contain the opened file")}ja(b),xs.current=b}catch(T){console.error("Failed to get directory handle from file handle:",T),alert("Failed to get directory access. Auto-save will not work until you enable it manually via File -> Auto Save.")}finally{setTimeout(()=>{qr.current=!1},1e3)}const f=v.autoSave?.enabled===!0;await Ss(v);let S;if(v.projectInfo?.name?S=v.projectInfo.name:(S=p.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",zl(S),localStorage.setItem("pcb_project_name",S)),oi||(zl(S),localStorage.setItem("pcb_project_name",S)),f&&b){const T=S.replace(/\.json$/i,""),E=xc(T).replace(/[^a-zA-Z0-9_-]/g,"_");qa(b),tl(E),Uo.current=b,oo.current=E,Wt.current&&(clearInterval(Wt.current),Wt.current=null)}setTimeout(()=>{Gl({visible:!0,source:"open",interval:5})},100)}catch(r){if(r?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",r),Ar.current?.click()}else Ar.current?.click()},[Ss,oi,Ai,zl,ja,Gl,Di,qa,tl]);return i.jsxs("div",{className:"app",children:[i.jsx("header",{className:"app-header",children:i.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.1)"})}),i.jsx(px,{openMenu:hu,setOpenMenu:Cc,isReadOnlyMode:Xe,currentProjectFilePath:Jo,onNewProject:bs,onOpenProject:Ad,onSaveProject:Qr,onSaveAs:Kr,onPrint:kd,hasUnsavedChanges:bu,setNewProjectDialog:Qo,setAutoSaveDialog:Xa,topImage:y,bottomImage:U,selectedImageForTransform:At,setSelectedImageForTransform:Il,setCurrentTool:Z,transformMode:Wl,setTransformMode:_s,updateImageTransform:Yr,resetImageTransform:zd,isGrayscale:Te,setIsGrayscale:We,isBlackAndWhiteEdges:K,setIsBlackAndWhiteEdges:ke,isBlackAndWhiteInverted:_e,setIsBlackAndWhiteInverted:he,areImagesLocked:ii,setAreImagesLocked:Fs,onEnterBoardDimensions:()=>eo(!0),fileInputTopRef:Dc,fileInputBottomRef:Ac,openProjectRef:Ar,increaseSize:_c,decreaseSize:pr,brushSize:k,drawingStrokes:Ie,selectedIds:mt,selectedComponentIds:pt,selectedPowerIds:at,selectedGroundIds:Ut,componentsTop:ft,componentsBottom:Nt,powers:tt,grounds:nt,powerNodeNames:zo,groundNodeNames:Co,setSetSizeDialog:La,areViasLocked:li,setAreViasLocked:jr,arePadsLocked:Li,setArePadsLocked:zc,areTestPointsLocked:Xl,setAreTestPointsLocked:fu,areTracesLocked:ai,setAreTracesLocked:zr,areComponentsLocked:ki,setAreComponentsLocked:qo,areGroundNodesLocked:Ri,setAreGroundNodesLocked:Ys,arePowerNodesLocked:yn,setArePowerNodesLocked:Ls,setSelectedIds:St,setSelectedComponentIds:ht,setSelectedPowerIds:wt,setSelectedGroundIds:Ee,selectAllVias:rs,selectAllTraces:Uc,selectAllPads:Hr,selectAllComponents:Er,selectDisconnectedComponents:Sd,selectAllPowerNodes:Td,selectAllGroundNodes:jd,selectPowerNodesByName:cs,selectGroundNodesByName:cr,setShowPowerBusManager:is,setShowGroundBusManager:os,setShowDesignatorManager:Al,toolRegistry:kt,updateToolSettings:Es,updateToolLayerSettings:fo,setBrushSize:R,setBrushColor:D,saveToolSettings:Th,saveToolLayerSettings:yc,colorPalette:ic,currentTool:N,drawingMode:be,traceToolLayer:zt,padToolLayer:en,testPointToolLayer:tn,componentToolLayer:hn,setTopTraceSize:Ke,setBottomTraceSize:ne,setTopPadSize:_,setBottomPadSize:xe,setTopTestPointSize:Jt,setBottomTestPointSize:Va,setTopComponentSize:Ol,setBottomComponentSize:bl,setComponentConnectionSize:hi,topTraceColor:m,bottomTraceColor:G,topPadColor:Y,bottomPadColor:De,topTestPointColor:Ve,bottomTestPointColor:ut,topComponentColor:fi,bottomComponentColor:Kn,setTopTraceColor:de,setBottomTraceColor:Ne,setTopPadColor:oe,setBottomPadColor:V,setTopTestPointColor:lt,setBottomTestPointColor:Dt,setTopComponentColor:Qn,setBottomComponentColor:el,setComponentConnectionColor:Sc,saveDefaultSize:qe,saveDefaultColor:jt,menuBarRef:lr}),i.jsx("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:i.jsxs("div",{ref:za,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[i.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[i.jsxs("button",{onClick:()=>{Xe||un()},onMouseDown:a=>a.currentTarget.blur(),disabled:Xe,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="select"?"2px solid #000":"1px solid #ddd",background:N==="select"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",outline:"none",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx(Gg,{size:14}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Xe||(console.log("Via tool clicked"),Hl("via"),Z("draw"))},disabled:Xe,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="draw"&&be==="via"?"2px solid #000":"1px solid #ddd",background:N==="draw"&&be==="via"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const a=bt.get("via").color;return i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:a,strokeWidth:"3"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:a})]})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:bt.get("via").size})]})]}),i.jsxs("button",{ref:ci,onClick:()=>{Xe||(console.log("Pad tool clicked"),Hl("pad"),Z("draw"),Ro(!0),Bn(en||"top"),setTimeout(()=>gs(),0))},disabled:Xe,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="draw"&&be==="pad"?"2px solid #000":"1px solid #ddd",background:N==="draw"&&be==="pad"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=(en||"top")==="top"?"padTop":"padBottom",p=bt.get(r).color,x=14,v=(24-x)/2,b=(24-x)/2;return i.jsx("rect",{x:v,y:b,width:x,height:x,fill:p})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(N==="draw"&&be==="pad"&&Mn.toolInstanceId&&(Mn.toolInstanceId==="padTop"||Mn.toolInstanceId==="padBottom"))return Mn.size;const a=en==="top"?"padTop":"padBottom";return bt.get(a).size})()})]})]}),i.jsxs("button",{ref:wi,onClick:()=>{Xe||(console.log("Test Point tool clicked"),Hl("testPoint"),Z("draw"),to(!0),Bn(tn||"top"),setTimeout(()=>hr(),0))},disabled:Xe,title:"Draw Test Points (Y)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="draw"&&be==="testPoint"?"2px solid #000":"1px solid #ddd",background:N==="draw"&&be==="testPoint"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=(tn||"top")==="top"?"testPointTop":"testPointBottom",p=bt.get(r).color,x=14,v=12,b=12;return i.jsx("path",{d:`M ${v} ${b-x/2} L ${v+x/2} ${b} L ${v} ${b+x/2} L ${v-x/2} ${b} Z`,fill:p,stroke:"#000",strokeWidth:"1.5"})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Y"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(N==="draw"&&be==="testPoint"&&Mn.toolInstanceId&&(Mn.toolInstanceId==="testPointTop"||Mn.toolInstanceId==="testPointBottom"))return Mn.size;const a=tn==="top"?"testPointTop":"testPointBottom";return bt.get(a).size})()})]})]}),i.jsxs("button",{ref:fs,onClick:()=>{Xe||(console.log("Trace tool clicked"),Hl("trace"),Z("draw"),na(!0),Bn(zt||"top"),setTimeout(()=>Ul(),0))},disabled:Xe,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="draw"&&be==="trace"?"2px solid #000":"1px solid #ddd",background:N==="draw"&&be==="trace"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx(Zg,{size:14,color:(()=>{const r=(zt||"top")==="top"?"traceTop":"traceBottom";return bt.get(r).color})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=zt==="top"?"traceTop":"traceBottom";return bt.get(a).size})()})]})]}),i.jsxs("button",{ref:sa,onClick:()=>{Xe||(console.log("Component tool clicked"),Z("component"),oa(!0),aa(!1),Ir(null))},disabled:Xe,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="component"?"2px solid #000":"1px solid #ddd",background:N==="component"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[(()=>{const r=(hn||"top")==="top"?"componentTop":"componentBottom",p=bt.get(r).color;return Ji?i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:p,strokeWidth:"1.5"}),i.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:p,fontWeight:"bold",fontFamily:"monospace",children:zf(Ji)})]}):i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:p,stroke:p,strokeWidth:"0.5"}),i.jsxs("g",{stroke:p,fill:"none",strokeWidth:"1.5",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),i.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:p})]})]})})(),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=hn==="top"?"componentTop":"componentBottom";return bt.get(a).size})()})]})]}),i.jsxs("button",{ref:dr,onClick:()=>{Xe||(console.log("Power tool clicked"),Z("power"))},disabled:Xe,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="power"?"2px solid #000":"1px solid #ddd",background:N==="power"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx("span",{style:{color:bt.get("power").color,fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:bt.get("power").size})]})]}),i.jsxs("button",{ref:$r,onClick:()=>{Xe||(console.log("Ground tool clicked"),Z("ground"))},disabled:Xe,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="ground"?"2px solid #000":"1px solid #ddd",background:N==="ground"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:i.jsxs("g",{stroke:bt.get("ground").color,strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),i.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),i.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),i.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:bt.get("ground").size})]})]}),i.jsxs("button",{onClick:()=>{Xe||Z("center")},disabled:Xe,title:"Set Home View (X)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="center"?"2px solid #000":"1px solid #ddd",background:N==="center"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"22",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"12",x2:"10",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"14",y1:"12",x2:"22",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"X"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Xe||Z(a=>a==="pan"?"draw":"pan")},disabled:Xe,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:N==="pan"?"2px solid #000":"1px solid #ddd",background:N==="pan"?"#e6f0ff":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),i.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),i.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Qs(!1),Z(a=>a==="magnify"?"draw":"magnify")},title:`${yo?"Zoom Out":"Zoom In"} (Z)`,style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="magnify"?"2px solid #000":"1px solid #ddd",background:N==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),yo?i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),i.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Z"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Xe||Z("erase")},disabled:Xe,title:"Erase (E)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:N==="erase"?"2px solid #000":"1px solid #ddd",background:N==="erase"?"#ffecec":"#fff",color:Xe?"#999":"#222",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{transform:"rotate(-35 12 12)",children:[i.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),i.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:kt.get("erase")?.settings.size??18})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>{Xe||Rr(a=>!a)},disabled:Xe,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:Xe?"not-allowed":"pointer",opacity:Xe?.5:1},children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[i.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Rc&&i.jsx("div",{ref:Ur,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:ic.map(a=>i.jsx("div",{onClick:()=>{D(a),Rr(!1);try{let p=null;N==="draw"&&be==="via"?p="via":N==="draw"&&be==="pad"?p=(en||"top")==="bottom"?"padBottom":"padTop":N==="draw"&&be==="testPoint"?p=(tn||"top")==="bottom"?"testPointBottom":"testPointTop":N==="draw"&&be==="trace"?p=(zt||"top")==="bottom"?"traceBottom":"traceTop":N==="component"?p=(hn||"top")==="bottom"?"componentBottom":"componentTop":N==="power"?p="power":N==="ground"&&(p="ground"),p&&bt.setColor(p,a)}catch(p){console.error("Error updating tool instance color:",p)}const r=Fa(kt);if(r)if(N==="draw"&&be==="trace"){const p=zt||"top",v=r.layerSettings.get(p)?.size||r.settings.size,b={color:a,size:v};fo(r.id,p,b),yc(r.id),p==="top"?(de(a),jt("trace",a,"top")):(Ne(a),jt("trace",a,"bottom"))}else if(N==="draw"&&be==="pad"){const p=en||"top",v=r.layerSettings.get(p)?.size||r.settings.size,b={color:a,size:v};fo(r.id,p,b),yc(r.id),p==="top"?(oe(a),jt("pad",a,"top")):(V(a),jt("pad",a,"bottom"))}else if(N==="draw"&&be==="testPoint"){const p=tn||"top",v=r.layerSettings.get(p)?.size||r.settings.size,b={color:a,size:v};fo(r.id,p,b),yc(r.id),p==="top"?(lt(a),jt("testPoint",a,"top")):(Dt(a),jt("testPoint",a,"bottom"))}else if(N==="component"){const p=hn||"top",v=r.layerSettings.get(p)?.size||r.settings.size,b={color:a,size:v};fo(r.id,p,b),yc(r.id),p==="top"?(Qn(a),jt("component",a,"top")):(el(a),jt("component",a,"bottom"))}else{const p={...r.settings,color:a};Es(r.id,p),Th(r.id,a,r.settings.size),N==="draw"&&be==="via"&&jt("via",a)}jt("brush",a),mt.size>0&&Vt(p=>p.map(x=>mt.has(x.id)?(x.type==="via"?(jt("via",a),Cn(v=>{const b=new Map(v),f=b.get("via");return f&&b.set("via",{...f,settings:{...f.settings,color:a}}),b})):x.type==="pad"?(jt("pad",a),Cn(v=>{const b=new Map(v),f=b.get("pad");return f&&b.set("pad",{...f,settings:{...f.settings,color:a}}),b})):x.type==="trace"&&jt("trace",a,x.layer),{...x,color:a}):x)),pt.size>0&&(jt("component",a),xn(p=>p.map(x=>pt.has(x.id)?{...x,color:a}:x)),cn(p=>p.map(x=>pt.has(x.id)?{...x,color:a}:x))),at.size>0&&Xn(p=>p.map(x=>at.has(x.id)?{...x,color:a}:x)),Ut.size>0&&Fi(p=>p.map(x=>Ut.has(x.id)?{...x,color:a}:x))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===F?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),N==="draw"&&be==="trace"&&Ua&&i.jsxs("div",{ref:ko,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:zt==="top",onChange:()=>{console.log("Trace tool Top clicked"),$l.current="top",Wa("top"),Bn("top"),D(m),R($e),Cn(a=>{const r=new Map(a),p=r.get("trace");return p&&r.set("trace",{...p,settings:{color:m,size:$e}}),r}),na(!1),vo(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:zt==="bottom",onChange:()=>{console.log("Trace tool Bottom clicked"),$l.current="bottom",Wa("bottom"),Bn("bottom"),D(G),R(Oe),Cn(a=>{const r=new Map(a),p=r.get("trace");return p&&r.set("trace",{...p,settings:{color:G,size:Oe}}),r}),na(!1),kl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),N==="draw"&&be==="pad"&&ia&&i.jsxs("div",{ref:Do,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:en==="top",onChange:()=>{console.log("Pad tool Top clicked"),ya.current="top",vr("top"),Bn("top");const a=bt.get("padTop");D(a.color),R(a.size),Cn(r=>{const p=new Map(r),x=p.get("pad");return x&&p.set("pad",{...x,settings:{color:a.color,size:a.size}}),p}),Ro(!1),vo(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:en==="bottom",onChange:()=>{console.log("Pad tool Bottom clicked"),ya.current="bottom",vr("bottom"),Bn("bottom");const a=bt.get("padBottom");D(a.color),R(a.size),Cn(r=>{const p=new Map(r),x=p.get("pad");return x&&p.set("pad",{...x,settings:{color:a.color,size:a.size}}),p}),Ro(!1),kl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),N==="draw"&&be==="testPoint"&&la&&i.jsxs("div",{ref:ul,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"testPointToolLayer",checked:tn==="top",onChange:()=>{console.log("Test Point tool Top clicked"),Fl.current="top",uo("top"),Bn("top"),D(Ve),R(et),Cn(a=>{const r=new Map(a),p=r.get("testPoint");return p&&r.set("testPoint",{...p,settings:{color:Ve,size:et}}),r}),to(!1),vo(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"testPointToolLayer",checked:tn==="bottom",onChange:()=>{console.log("Test Point tool Bottom clicked"),Fl.current="bottom",uo("bottom"),Bn("bottom"),D(ut),R(Ii),Cn(a=>{const r=new Map(a),p=r.get("testPoint");return p&&r.set("testPoint",{...p,settings:{color:ut,size:Ii}}),r}),to(!1),kl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),In&&N==="power"&&i.jsxs("div",{ref:Bl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),rt.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...rt].sort((a,r)=>{const p=b=>{const f=b.match(/([+-]?)(\d+\.?\d*)/);if(f){const S=f[1]||"+",T=parseFloat(f[2]);return{absValue:Math.abs(T),isNegative:S==="-",original:b}}return{absValue:1/0,isNegative:!1,original:b}},x=p(a.voltage),v=p(r.voltage);return x.absValue!==v.absValue?x.absValue-v.absValue:x.isNegative!==v.isNegative?x.isNegative?-1:1:0}).map(a=>i.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),Rl(a.id),Ft(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),i.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Ft(!1),is(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Ft(!1),Rl(null),Z("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),Pr&&N==="ground"&&i.jsxs("div",{ref:no,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),Ln.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...Ln].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=a.id==="groundbus-earth",p=sl===a.id;return i.jsx("button",{onClick:x=>{x.preventDefault(),x.stopPropagation(),ss(a.id),Dl(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:p?"#e0e0e0":"#f5f5f5",border:p?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),i.jsx("div",{children:i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name})})]})},a.id)}),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Dl(!1),os(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Dl(!1),ss(null),Z("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),N==="component"&&Ma&&i.jsxs("div",{ref:Pa,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:gt==="top",onClick:()=>{console.log("Component tool Top clicked"),mn.current="top",$a("top"),Bn("top"),D(fi),R(Wi),Cn(a=>{const r=new Map(a),p=r.get("component");return p&&r.set("component",{...p,settings:{color:fi,size:Wi}}),r}),oa(!1),vo(!0),aa(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:gt==="bottom",onClick:()=>{console.log("Component tool Bottom clicked"),mn.current="bottom",$a("bottom"),Bn("bottom"),D(Kn),R(pi),Cn(a=>{const r=new Map(a),p=r.get("component");return p&&r.set("component",{...p,settings:{color:Kn,size:pi}}),r}),oa(!1),kl(!0),aa(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),N==="component"&&ds&&i.jsxs("div",{ref:Mc,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(ex).map(([a,r])=>{const p=us.has(a);return i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:x=>{x.preventDefault(),x.stopPropagation(),Wr(v=>{const b=new Set(v);return b.has(a)?b.delete(a):b.add(a),b})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:p?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[i.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:p?"":""}),a]}),p&&i.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(r).map(([x,v])=>i.jsxs("div",{style:{marginBottom:"2px"},children:[i.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[x,":"]}),v.map(b=>{const f=fd[b];return f?i.jsxs("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),Ir(b),aa(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:Ji===b?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[f.prefix.join(", ")," - ",ud(b)]},b):null})]},x))})]},a)}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),aa(!1),Z("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),i.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[i.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),i.jsxs("div",{onClick:()=>Bn("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:At==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:Zl,onChange:a=>vo(a.target.checked)})})]}),i.jsx("canvas",{ref:ar,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsxs("div",{onClick:()=>Bn("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:At==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:mo,onChange:a=>kl(a.target.checked)})})]}),i.jsx("canvas",{ref:or,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Mi,onChange:a=>si(a.target.checked)}),i.jsx("span",{children:"Vias"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Gn,onChange:a=>ts(a.target.checked)}),i.jsx("span",{children:"Pads (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Ra,onChange:a=>Gi(a.target.checked)}),i.jsx("span",{children:"Test Points (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Pi,onChange:a=>ll(a.target.checked)}),i.jsx("span",{children:"Traces (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Zi,onChange:a=>Da(a.target.checked)}),i.jsx("span",{children:"Components (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:al,onChange:a=>ns(a.target.checked)}),i.jsx("span",{children:"Pads (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:qi,onChange:a=>wo(a.target.checked)}),i.jsx("span",{children:"Test Points (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Xi,onChange:a=>So(a.target.checked)}),i.jsx("span",{children:"Traces (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Dn,onChange:a=>ri(a.target.checked)}),i.jsx("span",{children:"Components (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Si,onChange:a=>Qi(a.target.checked)}),i.jsx("span",{children:"Power"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Nl,onChange:a=>Aa(a.target.checked)}),i.jsx("span",{children:"Ground"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Na,onChange:a=>Jl(a.target.checked)}),i.jsx("span",{children:"Connections"})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Mi&&Gn&&al&&Ra&&qi&&Pi&&Xi&&Zi&&Dn&&Si&&Nl&&Na,onChange:a=>{const r=a.target.checked;si(r),ts(r),ns(r),Gi(r),wo(r),ll(r),So(r),Da(r),ri(r),Qi(r),Aa(r),Jl(r)}}),i.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",g,"%"]}),i.jsxs("label",{className:"radio-label",style:{margin:0},children:[i.jsx("input",{type:"checkbox",checked:pe,onChange:a=>{const r=a.target.checked;r?(vo(!0),kl(!0)):(O(50),Z("select")),we(r)}}),i.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:g,onChange:a=>O(Number(a.target.value)),onDoubleClick:()=>Cd("transparency"),className:"slider",style:{width:"100%",marginTop:3}})]})]}),i.jsx(hx,{visible:!y&&!U}),i.jsx("canvas",{ref:rn,width:bo.width,height:bo.height,tabIndex:0,onMouseDown:ps,onMouseMove:yu,onMouseUp:bn,onMouseLeave:bn,onWheel:Ao,onDoubleClick:Fr,className:`pcb-canvas ${N==="transform"?"transform-cursor":N==="draw"?"draw-cursor":N==="erase"?"erase-cursor":"default-cursor"}`,style:{position:"absolute",left:"244px",top:"6px",...xi?{cursor:xi}:N==="pan"?{cursor:Ca?"grabbing":"grab"}:{},width:`${bo.width}px`,height:`${bo.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),i.jsx(Sx,{componentEditor:Ci,setComponentEditor:wc,componentsTop:ft,componentsBottom:Nt,setComponentsTop:xn,setComponentsBottom:cn,connectingPin:Wn,setConnectingPin:Sl,componentDialogPosition:wl,setComponentDialogPosition:ma,isDraggingDialog:wr,setIsDraggingDialog:Ws,dialogDragOffset:Ya,setDialogDragOffset:Tc,areComponentsLocked:ki,setSelectedComponentIds:ht,setNotesDialogVisible:Ka}),er&&Js&&(()=>{const a=er.component,r=er.layer;if(!a)return null;const p=a.componentType||"Component",x=a.componentType==="IntegratedCircuit"&&"icType"in a?a.icType:null,v=Vr(a);return i.jsxs("div",{style:{position:"fixed",left:`${er.x+10}px`,top:`${er.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:ud(p)}),i.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["Layer: ",r==="top"?"Top":"Bottom"]}),x&&i.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["IC Type: ",x]}),v.length>0&&i.jsx("div",{style:{marginBottom:"4px"},children:v.map((b,f)=>i.jsx("div",{style:{color:"#e0e0e0",fontSize:"11px",marginBottom:"2px"},children:b},f))}),a.description&&i.jsx("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:a.description}),a.notes&&i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.notes})]})})(),Br&&Js&&(()=>{const a=Br.stroke;return a.notes?i.jsxs("div",{style:{position:"fixed",left:`${Br.x+10}px`,top:`${Br.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"Test Point"}),i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.notes})]}):null})(),Yi&&Yi.visible&&(()=>{if(!tt.find(p=>p.id===Yi.id))return null;const r=rt.find(p=>p.id===Yi.powerBusId);return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),i.jsx("button",{onClick:()=>$s(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:r?`${r.name} (${r.voltage})`:"Unknown"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`power-layer-${Yi.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),i.jsxs("select",{id:`power-layer-${Yi.id}`,name:`power-layer-${Yi.id}`,value:Yi.layer,onChange:p=>$s({...Yi,layer:p.target.value}),disabled:yn,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:yn?.6:1},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:Yi.x.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:Yi.y.toFixed(2)})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[i.jsx("button",{onClick:()=>$s(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),i.jsx("button",{onClick:()=>{yn||(Xn(p=>p.map(x=>x.id===Yi.id?{...x,layer:Yi.layer}:x)),$s(null))},disabled:yn,style:{padding:"2px 5px",background:yn?"#f5f5f5":"#0b5fff",color:yn?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:yn?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!y&&!U&&i.jsx("div",{className:"placeholder"})]})}),gd&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>is(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:(()=>{const a=rt.filter(v=>v.id!==ls),r=rt.find(v=>v.id===ls),p=[...a].sort((v,b)=>{const f=C=>{const E=C.match(/([+-]?)(\d+\.?\d*)/);if(E){const X=E[1]||"+",se=parseFloat(E[2]);return{absValue:Math.abs(se),isNegative:X==="-",original:C}}return{absValue:1/0,isNegative:!1,original:C}},S=f(v.voltage),T=f(b.voltage);return S.absValue!==T.absValue?S.absValue-T.absValue:S.isNegative!==T.isNegative?S.isNegative?-1:1:0});return(r?[...p,r]:p).map(v=>{const b=rt.findIndex(T=>T.id===v.id),f=rt.some(T=>T.name===v.name&&T.id!==v.id),S=rt.some(T=>T.voltage===v.voltage&&T.id!==v.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:v.color,border:"1px solid #ccc",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:v.name,onChange:T=>{const C=[...rt];C[b]={...v,name:T.target.value},ni(C)},onFocus:()=>{as(v.id)},placeholder:"e.g., +3V3, -3V3",style:{flex:1,padding:"2px 4px",border:f?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Value"}),i.jsx("input",{type:"text",inputMode:"decimal",value:v.voltage,onChange:T=>{const C=T.target.value;if(C===""||/^[+-]?\d*\.?\d*$/.test(C)){const E=[...rt];E[b]={...v,voltage:C},ni(E)}},onBlur:T=>{const C=T.target.value.trim();if(C===""){ls===v.id&&as(null);return}const E=parseFloat(C);if(!isNaN(E)){const X=E>=0?"+":"-",se=Math.abs(E),W=`${X}${se.toFixed(1).replace(/\.?0+$/,"")}`,Q=[...rt];Q[b]={...v,voltage:W},ni(Q),ls===v.id&&as(null)}},onFocus:()=>{as(v.id)},placeholder:"e.g., +3.3, -3.3",style:{flex:1,padding:"2px 4px",border:S?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})]}),i.jsx("input",{type:"color",value:v.color,onChange:T=>{const C=[...rt];C[b]={...v,color:T.target.value},ni(C)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const T=tt.filter(C=>C.powerBusId===v.id);if(T.length>0){alert(`Cannot delete: ${T.length} power node(s) are using this bus. Remove or reassign them first.`);return}ni(C=>C.filter(E=>E.id!==v.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},v.id)})})()}),i.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};ni(r=>[...r,a]),as(a.id)},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Power Bus"}),i.jsx("button",{onClick:()=>is(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),ol&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:()=>os(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:(()=>{const a=Ln.filter(v=>v.id!==Ql),r=Ln.find(v=>v.id===Ql),p=[...a].sort((v,b)=>v.name.localeCompare(b.name));return(r?[...p,r]:p).map(v=>{const b=Ln.findIndex(S=>S.id===v.id),f=Ln.some(S=>S.name===v.name&&S.id!==v.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:v.color,border:"1px solid #ccc",flexShrink:0}}),i.jsx("div",{style:{flex:1,minWidth:0},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:v.name,onChange:S=>{const T=[...Ln];T[b]={...v,name:S.target.value},Ll(T)},onFocus:()=>{Mr(v.id)},onBlur:()=>{Ql===v.id&&Mr(null)},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 4px",border:f?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})}),i.jsx("input",{type:"color",value:v.color,onChange:S=>{const T=[...Ln];T[b]={...v,color:S.target.value},Ll(T)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const S=nt.filter(T=>T.groundBusId===v.id);if(S.length>0){alert(`Cannot delete: ${S.length} ground node(s) are using this bus. Remove or reassign them first.`);return}Ll(T=>T.filter(C=>C.id!==v.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},v.id)})})()}),i.jsx("button",{onClick:()=>{const a={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};Ll(r=>[...r,a]),Mr(a.id)},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Ground Bus"}),i.jsx("button",{onClick:()=>os(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),Za&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"16px",zIndex:1e3,minWidth:"300px",maxWidth:"400px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Designators"}),i.jsx("button",{onClick:()=>Al(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333",marginBottom:"12px"},children:[i.jsx("input",{type:"checkbox",checked:Kl,onChange:a=>{const r=a.target.checked;sr(r),localStorage.setItem("autoAssignDesignators",String(r))},style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{children:"Automatically assign designators"})]}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4",marginBottom:"12px"},children:Kl?i.jsx("div",{children:"When enabled, new components automatically receive sequential designators (e.g., C1, C2, C3 for Capacitors; R1, R2, R3 for Resistors)."}):i.jsx("div",{children:"When disabled, you must manually assign designators to each component. The designator field will be empty when components are created."})}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333"},children:[i.jsx("input",{type:"checkbox",checked:rl,onChange:a=>{const r=a.target.checked;cl(r)},style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{children:"Use global designator counters"})]}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4"},children:rl?i.jsx("div",{children:"When ON, designators continue from global counters across all projects. New components start with the next value from the global counter (e.g., if global counter is C10, new capacitor will be C11)."}):i.jsx("div",{children:"When OFF (default), designators start at 1 for each project. Each project maintains its own independent designator sequence (e.g., C1, C2, C3...)."})})]}),i.jsx("button",{onClick:()=>Al(!1),style:{width:"100%",padding:"6px 12px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}),i.jsx("input",{ref:Dc,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&fr(r,"top"),a.target.value=""}}),i.jsx("input",{ref:Ac,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&fr(r,"bottom"),a.target.value=""}}),i.jsx("input",{ref:Ar,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const r=a.target.files?.[0];if(r)try{Ai(r.name);const p=await r.text(),x=JSON.parse(p);await Ss(x);let v;x.projectInfo?.name?v=x.projectInfo.name:(v=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",zl(v),localStorage.setItem("pcb_project_name",v)),oi||(zl(v),localStorage.setItem("pcb_project_name",v)),setTimeout(()=>{Gl({visible:!0,source:"open",interval:5})},100)}catch(p){console.error("Failed to open project",p),alert("Failed to open project file. See console for details.")}a.target.value=""}}),i.jsx(xx,{visible:Ga.visible,selectedIds:mt,selectedComponentIds:pt,selectedPowerIds:at,selectedGroundIds:Ut,drawingStrokes:Ie,componentsTop:ft,componentsBottom:Nt,powers:tt,grounds:nt,powerBuses:rt,onClose:()=>{Sa({visible:!1,text:""})},setComponentsTop:xn,setComponentsBottom:cn,determineViaType:dl,determinePadType:Ki,determineTestPointType:ta,onFindComponent:wd,onOpenNotesDialog:()=>Ka(!0),position:nn,isDragging:_r,onDragStart:a=>{nn&&(yd({x:a.clientX-nn.x,y:a.clientY-nn.y}),xd(!0),a.preventDefault())}}),i.jsx(yx,{visible:Sn,selectedIds:mt,selectedComponentIds:pt,selectedPowerIds:at,selectedGroundIds:Ut,drawingStrokes:Ie,componentsTop:ft,componentsBottom:Nt,powers:tt,grounds:nt,powerBuses:rt,onClose:()=>{Ka(!1)},setComponentsTop:xn,setComponentsBottom:cn,setDrawingStrokes:Vt,setPowerSymbols:Xn,setGroundSymbols:Fi,determineViaType:dl,determinePadType:Ki,determineTestPointType:ta,position:ea,isDragging:rr,onDragStart:a=>{ea&&(bd({x:a.clientX-ea.x,y:a.clientY-ea.y}),jo(!0),a.preventDefault())}}),kr.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&$c()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:$c,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Dd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),i.jsx("button",{ref:ir,onClick:ec,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),dn.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&ms()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),i.jsx("input",{ref:il,type:"text",value:dn.projectName,onChange:a=>{Ko(r=>({...r,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Ic()):a.key==="Escape"&&(a.preventDefault(),ms())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),dn.projectName&&(()=>{const a=dn.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const r=[...new Set(a)];return i.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",r.map(p=>`"${p}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:dn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:dn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:vs,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),dn.projectName&&dn.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[dn.locationPath,"/",dn.projectName,"/project.json"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:ms,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Ic,disabled:!dn.projectName.trim()||!dn.locationHandle,style:{padding:"8px 16px",background:!dn.projectName.trim()||!dn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!dn.projectName.trim()||!dn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!dn.projectName.trim()||!dn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!dn.projectName.trim()||!dn.locationHandle?.6:1},children:"Create"})]})]})}),Zt.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Wc()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),i.jsx("input",{ref:ka,type:"text",value:Zt.filename,onChange:a=>{Gs(r=>({...r,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Jr()):a.key==="Escape"&&(a.preventDefault(),Wc())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:Zt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Zt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Rd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Zt.filename&&Zt.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[Zt.locationPath,"/",Zt.filename.endsWith(".json")?Zt.filename:`${Zt.filename}.json`]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Wc,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Jr,disabled:!Zt.filename.trim()||!Zt.locationHandle,style:{padding:"8px 16px",background:!Zt.filename.trim()||!Zt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Zt.filename.trim()||!Zt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Zt.filename.trim()||!Zt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Zt.filename.trim()||!Zt.locationHandle?.6:1},children:"Save"})]})]})}),i.jsx(gx,{visible:kc.visible,title:kc.title,message:kc.message,onClose:()=>Xs({visible:!1,title:"",message:""})}),i.jsx(bx,{visible:md,dimensions:vd,onSave:a=>{xu(a),localStorage.setItem("boardDimensions",JSON.stringify(a))},onClose:()=>eo(!1)}),go.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&La({visible:!1,size:6})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),i.jsx("input",{ref:Ui,type:"number",min:"1",max:"99",value:go.size,onChange:a=>{const r=parseInt(a.target.value)||1,p=Math.max(1,Math.min(99,r));La(x=>({...x,size:p}))},onKeyDown:a=>{if(a.key==="Enter"?Lr():a.key==="Escape"&&La({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const r=go.size.toString();r.length>=2&&Ui.current?.selectionStart===Ui.current?.selectionEnd&&Ui.current?.selectionStart===r.length&&a.preventDefault()}},onInput:a=>{const r=a.target,p=r.value;if(p.length>2){r.value=p.slice(0,2);const x=parseInt(r.value)||1;La(v=>({...v,size:Math.max(1,Math.min(99,x))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),i.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(go.size)?go.size:"",onChange:a=>{const r=parseInt(a.target.value);!isNaN(r)&&r>0&&La(p=>({...p,size:r}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[i.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>i.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>La({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Lr,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Cr.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Xa({visible:!1,interval:5})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:Cr.interval===null?"disable":(Cr.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")Xa({visible:!0,interval:null});else{const p=parseFloat(r);!isNaN(p)&&p>0&&Xa({visible:!0,interval:p})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),i.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Xa({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:()=>di(Cr.interval,!1),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Zo.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&Xr()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),i.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:Zo.interval===null?"disable":(Zo.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")Gl({...Zo,interval:null});else{const p=parseFloat(r);!isNaN(p)&&p>0&&Gl({...Zo,interval:p})}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Xr,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),i.jsx("button",{onClick:()=>di(Zo.interval,!0),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})})]})}Ig.createRoot(document.getElementById("root")).render(i.jsx(j.StrictMode,{children:i.jsx(Ox,{})}));
