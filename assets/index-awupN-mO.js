(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const D of document.querySelectorAll('link[rel="modulepreload"]'))d(D);new MutationObserver(D=>{for(const P of D)if(P.type==="childList")for(const pe of P.addedNodes)pe.tagName==="LINK"&&pe.rel==="modulepreload"&&d(pe)}).observe(document,{childList:!0,subtree:!0});function x(D){const P={};return D.integrity&&(P.integrity=D.integrity),D.referrerPolicy&&(P.referrerPolicy=D.referrerPolicy),D.crossOrigin==="use-credentials"?P.credentials="include":D.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function d(D){if(D.ep)return;D.ep=!0;const P=x(D);fetch(D.href,P)}})();function Ug(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var jf={exports:{}},Rd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph;function Bg(){if(ph)return Rd;ph=1;var c=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function x(d,D,P){var pe=null;if(P!==void 0&&(pe=""+P),D.key!==void 0&&(pe=""+D.key),"key"in D){P={};for(var J in D)J!=="key"&&(P[J]=D[J])}else P=D;return D=P.ref,{$$typeof:c,type:d,key:pe,ref:D!==void 0?D:null,props:P}}return Rd.Fragment=u,Rd.jsx=x,Rd.jsxs=x,Rd}var hh;function Pg(){return hh||(hh=1,jf.exports=Bg()),jf.exports}var i=Pg(),Tf={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh;function Og(){if(gh)return St;gh=1;var c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),xe=Symbol.for("react.activity"),te=Symbol.iterator;function ze(T){return T===null||typeof T!="object"?null:(T=te&&T[te]||T["@@iterator"],typeof T=="function"?T:null)}var ne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Se=Object.assign,R={};function W(T,N,_){this.props=T,this.context=N,this.refs=R,this.updater=_||ne}W.prototype.isReactComponent={},W.prototype.setState=function(T,N){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,N,"setState")},W.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function Ie(){}Ie.prototype=W.prototype;function X(T,N,_){this.props=T,this.context=N,this.refs=R,this.updater=_||ne}var Be=X.prototype=new Ie;Be.constructor=X,Se(Be,W.prototype),Be.isPureReactComponent=!0;var V=Array.isArray;function k(){}var A={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function b(T,N,_){var $=_.ref;return{$$typeof:c,type:T,key:N,ref:$!==void 0?$:null,props:_}}function de(T,N){return b(T.type,N,T.props)}function Ae(T){return typeof T=="object"&&T!==null&&T.$$typeof===c}function Pe(T){var N={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(_){return N[_]})}var Ce=/\/+/g;function ke(T,N){return typeof T=="object"&&T!==null&&T.key!=null?Pe(""+T.key):N.toString(36)}function fe(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(k,k):(T.status="pending",T.then(function(N){T.status==="pending"&&(T.status="fulfilled",T.value=N)},function(N){T.status==="pending"&&(T.status="rejected",T.reason=N)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function I(T,N,_,$,Ue){var Ke=typeof T;(Ke==="undefined"||Ke==="boolean")&&(T=null);var ct=!1;if(T===null)ct=!0;else switch(Ke){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(T.$$typeof){case c:case u:ct=!0;break;case ce:return ct=T._init,I(ct(T._payload),N,_,$,Ue)}}if(ct)return Ue=Ue(T),ct=$===""?"."+ke(T,0):$,V(Ue)?(_="",ct!=null&&(_=ct.replace(Ce,"$&/")+"/"),I(Ue,N,_,"",function(ki){return ki})):Ue!=null&&(Ae(Ue)&&(Ue=de(Ue,_+(Ue.key==null||T&&T.key===Ue.key?"":(""+Ue.key).replace(Ce,"$&/")+"/")+ct)),N.push(Ue)),1;ct=0;var gn=$===""?".":$+":";if(V(T))for(var We=0;We<T.length;We++)$=T[We],Ke=gn+ke($,We),ct+=I($,N,_,Ke,Ue);else if(We=ze(T),typeof We=="function")for(T=We.call(T),We=0;!($=T.next()).done;)$=$.value,Ke=gn+ke($,We++),ct+=I($,N,_,Ke,Ue);else if(Ke==="object"){if(typeof T.then=="function")return I(fe(T),N,_,$,Ue);throw N=String(T),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.")}return ct}function O(T,N,_){if(T==null)return T;var $=[],Ue=0;return I(T,$,"","",function(Ke){return N.call(_,Ke,Ue++)}),$}function Q(T){if(T._status===-1){var N=T._result;N=N(),N.then(function(_){(T._status===0||T._status===-1)&&(T._status=1,T._result=_)},function(_){(T._status===0||T._status===-1)&&(T._status=2,T._result=_)}),T._status===-1&&(T._status=0,T._result=N)}if(T._status===1)return T._result.default;throw T._result}var Te=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var N=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(N))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},Y={map:O,forEach:function(T,N,_){O(T,function(){N.apply(this,arguments)},_)},count:function(T){var N=0;return O(T,function(){N++}),N},toArray:function(T){return O(T,function(N){return N})||[]},only:function(T){if(!Ae(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return St.Activity=xe,St.Children=Y,St.Component=W,St.Fragment=x,St.Profiler=D,St.PureComponent=X,St.StrictMode=d,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,St.__COMPILER_RUNTIME={__proto__:null,c:function(T){return A.H.useMemoCache(T)}},St.cache=function(T){return function(){return T.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(T,N,_){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var $=Se({},T.props),Ue=T.key;if(N!=null)for(Ke in N.key!==void 0&&(Ue=""+N.key),N)!z.call(N,Ke)||Ke==="key"||Ke==="__self"||Ke==="__source"||Ke==="ref"&&N.ref===void 0||($[Ke]=N[Ke]);var Ke=arguments.length-2;if(Ke===1)$.children=_;else if(1<Ke){for(var ct=Array(Ke),gn=0;gn<Ke;gn++)ct[gn]=arguments[gn+2];$.children=ct}return b(T.type,Ue,$)},St.createContext=function(T){return T={$$typeof:pe,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:P,_context:T},T},St.createElement=function(T,N,_){var $,Ue={},Ke=null;if(N!=null)for($ in N.key!==void 0&&(Ke=""+N.key),N)z.call(N,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(Ue[$]=N[$]);var ct=arguments.length-2;if(ct===1)Ue.children=_;else if(1<ct){for(var gn=Array(ct),We=0;We<ct;We++)gn[We]=arguments[We+2];Ue.children=gn}if(T&&T.defaultProps)for($ in ct=T.defaultProps,ct)Ue[$]===void 0&&(Ue[$]=ct[$]);return b(T,Ke,Ue)},St.createRef=function(){return{current:null}},St.forwardRef=function(T){return{$$typeof:J,render:T}},St.isValidElement=Ae,St.lazy=function(T){return{$$typeof:ce,_payload:{_status:-1,_result:T},_init:Q}},St.memo=function(T,N){return{$$typeof:E,type:T,compare:N===void 0?null:N}},St.startTransition=function(T){var N=A.T,_={};A.T=_;try{var $=T(),Ue=A.S;Ue!==null&&Ue(_,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(k,Te)}catch(Ke){Te(Ke)}finally{N!==null&&_.types!==null&&(N.types=_.types),A.T=N}},St.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},St.use=function(T){return A.H.use(T)},St.useActionState=function(T,N,_){return A.H.useActionState(T,N,_)},St.useCallback=function(T,N){return A.H.useCallback(T,N)},St.useContext=function(T){return A.H.useContext(T)},St.useDebugValue=function(){},St.useDeferredValue=function(T,N){return A.H.useDeferredValue(T,N)},St.useEffect=function(T,N){return A.H.useEffect(T,N)},St.useEffectEvent=function(T){return A.H.useEffectEvent(T)},St.useId=function(){return A.H.useId()},St.useImperativeHandle=function(T,N,_){return A.H.useImperativeHandle(T,N,_)},St.useInsertionEffect=function(T,N){return A.H.useInsertionEffect(T,N)},St.useLayoutEffect=function(T,N){return A.H.useLayoutEffect(T,N)},St.useMemo=function(T,N){return A.H.useMemo(T,N)},St.useOptimistic=function(T,N){return A.H.useOptimistic(T,N)},St.useReducer=function(T,N,_){return A.H.useReducer(T,N,_)},St.useRef=function(T){return A.H.useRef(T)},St.useState=function(T){return A.H.useState(T)},St.useSyncExternalStore=function(T,N,_){return A.H.useSyncExternalStore(T,N,_)},St.useTransition=function(){return A.H.useTransition()},St.version="19.2.0",St}var xh;function Hf(){return xh||(xh=1,Tf.exports=Og()),Tf.exports}var S=Hf();const Oe=Ug(S);var Cf={exports:{}},Dd={},zf={exports:{}},kf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh;function _g(){return yh||(yh=1,(function(c){function u(I,O){var Q=I.length;I.push(O);e:for(;0<Q;){var Te=Q-1>>>1,Y=I[Te];if(0<D(Y,O))I[Te]=O,I[Q]=Y,Q=Te;else break e}}function x(I){return I.length===0?null:I[0]}function d(I){if(I.length===0)return null;var O=I[0],Q=I.pop();if(Q!==O){I[0]=Q;e:for(var Te=0,Y=I.length,T=Y>>>1;Te<T;){var N=2*(Te+1)-1,_=I[N],$=N+1,Ue=I[$];if(0>D(_,Q))$<Y&&0>D(Ue,_)?(I[Te]=Ue,I[$]=Q,Te=$):(I[Te]=_,I[N]=Q,Te=N);else if($<Y&&0>D(Ue,Q))I[Te]=Ue,I[$]=Q,Te=$;else break e}}return O}function D(I,O){var Q=I.sortIndex-O.sortIndex;return Q!==0?Q:I.id-O.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var P=performance;c.unstable_now=function(){return P.now()}}else{var pe=Date,J=pe.now();c.unstable_now=function(){return pe.now()-J}}var p=[],E=[],ce=1,xe=null,te=3,ze=!1,ne=!1,Se=!1,R=!1,W=typeof setTimeout=="function"?setTimeout:null,Ie=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function Be(I){for(var O=x(E);O!==null;){if(O.callback===null)d(E);else if(O.startTime<=I)d(E),O.sortIndex=O.expirationTime,u(p,O);else break;O=x(E)}}function V(I){if(Se=!1,Be(I),!ne)if(x(p)!==null)ne=!0,k||(k=!0,Pe());else{var O=x(E);O!==null&&fe(V,O.startTime-I)}}var k=!1,A=-1,z=5,b=-1;function de(){return R?!0:!(c.unstable_now()-b<z)}function Ae(){if(R=!1,k){var I=c.unstable_now();b=I;var O=!0;try{e:{ne=!1,Se&&(Se=!1,Ie(A),A=-1),ze=!0;var Q=te;try{t:{for(Be(I),xe=x(p);xe!==null&&!(xe.expirationTime>I&&de());){var Te=xe.callback;if(typeof Te=="function"){xe.callback=null,te=xe.priorityLevel;var Y=Te(xe.expirationTime<=I);if(I=c.unstable_now(),typeof Y=="function"){xe.callback=Y,Be(I),O=!0;break t}xe===x(p)&&d(p),Be(I)}else d(p);xe=x(p)}if(xe!==null)O=!0;else{var T=x(E);T!==null&&fe(V,T.startTime-I),O=!1}}break e}finally{xe=null,te=Q,ze=!1}O=void 0}}finally{O?Pe():k=!1}}}var Pe;if(typeof X=="function")Pe=function(){X(Ae)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,ke=Ce.port2;Ce.port1.onmessage=Ae,Pe=function(){ke.postMessage(null)}}else Pe=function(){W(Ae,0)};function fe(I,O){A=W(function(){I(c.unstable_now())},O)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(I){I.callback=null},c.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<I?Math.floor(1e3/I):5},c.unstable_getCurrentPriorityLevel=function(){return te},c.unstable_next=function(I){switch(te){case 1:case 2:case 3:var O=3;break;default:O=te}var Q=te;te=O;try{return I()}finally{te=Q}},c.unstable_requestPaint=function(){R=!0},c.unstable_runWithPriority=function(I,O){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Q=te;te=I;try{return O()}finally{te=Q}},c.unstable_scheduleCallback=function(I,O,Q){var Te=c.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Te+Q:Te):Q=Te,I){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Q+Y,I={id:ce++,callback:O,priorityLevel:I,startTime:Q,expirationTime:Y,sortIndex:-1},Q>Te?(I.sortIndex=Q,u(E,I),x(p)===null&&I===x(E)&&(Se?(Ie(A),A=-1):Se=!0,fe(V,Q-Te))):(I.sortIndex=Y,u(p,I),ne||ze||(ne=!0,k||(k=!0,Pe()))),I},c.unstable_shouldYield=de,c.unstable_wrapCallback=function(I){var O=te;return function(){var Q=te;te=O;try{return I.apply(this,arguments)}finally{te=Q}}}})(kf)),kf}var bh;function Hg(){return bh||(bh=1,zf.exports=_g()),zf.exports}var Rf={exports:{}},Ei={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh;function Eg(){if(vh)return Ei;vh=1;var c=Hf();function u(p){var E="https://react.dev/errors/"+p;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var ce=2;ce<arguments.length;ce++)E+="&args[]="+encodeURIComponent(arguments[ce])}return"Minified React error #"+p+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(){}var d={d:{f:x,r:function(){throw Error(u(522))},D:x,C:x,L:x,m:x,X:x,S:x,M:x},p:0,findDOMNode:null},D=Symbol.for("react.portal");function P(p,E,ce){var xe=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:xe==null?null:""+xe,children:p,containerInfo:E,implementation:ce}}var pe=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function J(p,E){if(p==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return Ei.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Ei.createPortal=function(p,E){var ce=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(u(299));return P(p,E,null,ce)},Ei.flushSync=function(p){var E=pe.T,ce=d.p;try{if(pe.T=null,d.p=2,p)return p()}finally{pe.T=E,d.p=ce,d.d.f()}},Ei.preconnect=function(p,E){typeof p=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,d.d.C(p,E))},Ei.prefetchDNS=function(p){typeof p=="string"&&d.d.D(p)},Ei.preinit=function(p,E){if(typeof p=="string"&&E&&typeof E.as=="string"){var ce=E.as,xe=J(ce,E.crossOrigin),te=typeof E.integrity=="string"?E.integrity:void 0,ze=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;ce==="style"?d.d.S(p,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:xe,integrity:te,fetchPriority:ze}):ce==="script"&&d.d.X(p,{crossOrigin:xe,integrity:te,fetchPriority:ze,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},Ei.preinitModule=function(p,E){if(typeof p=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var ce=J(E.as,E.crossOrigin);d.d.M(p,{crossOrigin:ce,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&d.d.M(p)},Ei.preload=function(p,E){if(typeof p=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var ce=E.as,xe=J(ce,E.crossOrigin);d.d.L(p,ce,{crossOrigin:xe,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},Ei.preloadModule=function(p,E){if(typeof p=="string")if(E){var ce=J(E.as,E.crossOrigin);d.d.m(p,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:ce,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else d.d.m(p)},Ei.requestFormReset=function(p){d.d.r(p)},Ei.unstable_batchedUpdates=function(p,E){return p(E)},Ei.useFormState=function(p,E,ce){return pe.H.useFormState(p,E,ce)},Ei.useFormStatus=function(){return pe.H.useHostTransitionStatus()},Ei.version="19.2.0",Ei}var mh;function Vg(){if(mh)return Rf.exports;mh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(u){console.error(u)}}return c(),Rf.exports=Eg(),Rf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh;function Ig(){if(Sh)return Dd;Sh=1;var c=Hg(),u=Hf(),x=Vg();function d(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function D(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function P(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function pe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function J(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(P(e)!==e)throw Error(d(188))}function E(e){var t=e.alternate;if(!t){if(t=P(e),t===null)throw Error(d(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return p(o),e;if(s===l)return p(o),t;s=s.sibling}throw Error(d(188))}if(n.return!==l.return)n=o,l=s;else{for(var h=!1,j=o.child;j;){if(j===n){h=!0,n=o,l=s;break}if(j===l){h=!0,l=o,n=s;break}j=j.sibling}if(!h){for(j=s.child;j;){if(j===n){h=!0,n=s,l=o;break}if(j===l){h=!0,l=s,n=o;break}j=j.sibling}if(!h)throw Error(d(189))}}if(n.alternate!==l)throw Error(d(190))}if(n.tag!==3)throw Error(d(188));return n.stateNode.current===n?e:t}function ce(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=ce(e),t!==null)return t;e=e.sibling}return null}var xe=Object.assign,te=Symbol.for("react.element"),ze=Symbol.for("react.transitional.element"),ne=Symbol.for("react.portal"),Se=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),Ie=Symbol.for("react.consumer"),X=Symbol.for("react.context"),Be=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),Ae=Symbol.iterator;function Pe(e){return e===null||typeof e!="object"?null:(e=Ae&&e[Ae]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Symbol.for("react.client.reference");function ke(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ce?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Se:return"Fragment";case W:return"Profiler";case R:return"StrictMode";case V:return"Suspense";case k:return"SuspenseList";case b:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ne:return"Portal";case X:return e.displayName||"Context";case Ie:return(e._context.displayName||"Context")+".Consumer";case Be:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case A:return t=e.displayName||null,t!==null?t:ke(e.type)||"Memo";case z:t=e._payload,e=e._init;try{return ke(e(t))}catch{}}return null}var fe=Array.isArray,I=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=x.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Te=[],Y=-1;function T(e){return{current:e}}function N(e){0>Y||(e.current=Te[Y],Te[Y]=null,Y--)}function _(e,t){Y++,Te[Y]=e.current,e.current=t}var $=T(null),Ue=T(null),Ke=T(null),ct=T(null);function gn(e,t){switch(_(Ke,t),_(Ue,e),_($,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Op(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Op(t),e=_p(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}N($),_($,e)}function We(){N($),N(Ue),N(Ke)}function ki(e){e.memoizedState!==null&&_(ct,e);var t=$.current,n=_p(t,e.type);t!==n&&(_(Ue,e),_($,n))}function Nn(e){Ue.current===e&&(N($),N(Ue)),ct.current===e&&(N(ct),Td._currentValue=Q)}var Ri,hi;function ii(e){if(Ri===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ri=t&&t[1]||"",hi=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ri+e+hi}var gi=!1;function Qi(e,t){if(!e||gi)return"";gi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ue){var se=ue}Reflect.construct(e,[],we)}else{try{we.call()}catch(ue){se=ue}e.call(we.prototype)}}else{try{throw Error()}catch(ue){se=ue}(we=e())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ue){if(ue&&se&&typeof ue.stack=="string")return[ue.stack,se.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),h=s[0],j=s[1];if(h&&j){var B=h.split(`
`),ae=j.split(`
`);for(o=l=0;l<B.length&&!B[l].includes("DetermineComponentFrameRoot");)l++;for(;o<ae.length&&!ae[o].includes("DetermineComponentFrameRoot");)o++;if(l===B.length||o===ae.length)for(l=B.length-1,o=ae.length-1;1<=l&&0<=o&&B[l]!==ae[o];)o--;for(;1<=l&&0<=o;l--,o--)if(B[l]!==ae[o]){if(l!==1||o!==1)do if(l--,o--,0>o||B[l]!==ae[o]){var be=`
`+B[l].replace(" at new "," at ");return e.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",e.displayName)),be}while(1<=l&&0<=o);break}}}finally{gi=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ii(n):""}function Vi(e,t){switch(e.tag){case 26:case 27:case 5:return ii(e.type);case 16:return ii("Lazy");case 13:return e.child!==t&&t!==null?ii("Suspense Fallback"):ii("Suspense");case 19:return ii("SuspenseList");case 0:case 15:return Qi(e.type,!1);case 11:return Qi(e.type.render,!1);case 1:return Qi(e.type,!0);case 31:return ii("Activity");default:return""}}function Wl(e){try{var t="",n=null;do t+=Vi(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Pa=Object.prototype.hasOwnProperty,Ls=c.unstable_scheduleCallback,Oa=c.unstable_cancelCallback,Mc=c.unstable_shouldYield,qe=c.unstable_requestPaint,ot=c.unstable_now,Uc=c.unstable_getCurrentPriorityLevel,$e=c.unstable_ImmediatePriority,Pt=c.unstable_UserBlockingPriority,yl=c.unstable_NormalPriority,_a=c.unstable_LowPriority,Wt=c.unstable_IdlePriority,Fn=c.log,bl=c.unstable_setDisableYieldValue,Di=null,je=null;function Bn(e){if(typeof Fn=="function"&&bl(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Di,e)}catch{}}var Je=Math.clz32?Math.clz32:Ys,jn=Math.log,Ha=Math.LN2;function Ys(e){return e>>>=0,e===0?32:31-(jn(e)/Ha|0)|0}var Fl=256,ns=262144,At=4194304;function xi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $l(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,s=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var j=l&134217727;return j!==0?(l=j&~s,l!==0?o=xi(l):(h&=j,h!==0?o=xi(h):n||(n=j&~e,n!==0&&(o=xi(n))))):(j=l&~s,j!==0?o=xi(j):h!==0?o=xi(h):n||(n=l&~e,n!==0&&(o=xi(n)))),o===0?0:t!==0&&t!==o&&(t&s)===0&&(s=o&-o,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:o}function Ai(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ho(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ni(){var e=At;return At<<=1,(At&62914560)===0&&(At=4194304),e}function vl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ga(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Bc(e,t,n,l,o,s){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var j=e.entanglements,B=e.expirationTimes,ae=e.hiddenUpdates;for(n=h&~n;0<n;){var be=31-Je(n),we=1<<be;j[be]=0,B[be]=-1;var se=ae[be];if(se!==null)for(ae[be]=null,be=0;be<se.length;be++){var ue=se[be];ue!==null&&(ue.lane&=-536870913)}n&=~we}l!==0&&Ve(e,l,0),s!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=s&~(h&~t))}function Ve(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Je(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Ii(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Je(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function jt(e,t){var n=t&-t;return n=(n&42)!==0?1:Pn(n),(n&(e.suspendedLanes|t))!==0?0:n}function Pn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function is(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Xs(){var e=O.p;return e!==0?e:(e=window.event,e===void 0?32:oh(e.type))}function Er(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}var ml=Math.random().toString(36).slice(2),dt="__reactFiber$"+ml,On="__reactProps$"+ml,$t="__reactContainer$"+ml,go="__reactEvents$"+ml,an="__reactListeners$"+ml,Gs="__reactHandles$"+ml,xn="__reactResources$"+ml,Ll="__reactMarker$"+ml;function xa(e){delete e[dt],delete e[On],delete e[go],delete e[an],delete e[Gs]}function Ki(e){var t=e[dt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$t]||n[dt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$p(e);e!==null;){if(n=e[dt])return n;e=$p(e)}return t}e=n,n=e.parentNode}return null}function Ji(e){if(e=e[dt]||e[$t]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Sl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(d(33))}function Ea(e){var t=e[xn];return t||(t=e[xn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Mt(e){e[Ll]=!0}var Vr=new Set,Ot={};function on(e,t){el(e,t),el(e+"Capture",t)}function el(e,t){for(Ot[e]=t,e=0;e<t.length;e++)Vr.add(t[e])}var Ir=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Va={},ls={};function Tn(e){return Pa.call(ls,e)?!0:Pa.call(Va,e)?!1:Ir.test(e)?ls[e]=!0:(Va[e]=!0,!1)}function sn(e,t,n){if(Tn(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ia(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function _t(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function Xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qs(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ya(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){n=""+h,s.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yl(e){if(!e._valueTracker){var t=qs(e)?"checked":"value";e._valueTracker=ya(e,t,""+e[t])}}function as(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=qs(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function tl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Pc=/[\n"\\]/g;function li(e){return e.replace(Pc,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function os(e,t,n,l,o,s,h,j){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Xt(t)):e.value!==""+Xt(t)&&(e.value=""+Xt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?En(e,h,Xt(t)):n!=null?En(e,h,Xt(n)):l!=null&&e.removeAttribute("value"),o==null&&s!=null&&(e.defaultChecked=!!s),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+Xt(j):e.removeAttribute("name")}function _e(e,t,n,l,o,s,h,j){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Yl(e);return}n=n!=null?""+Xt(n):"",t=t!=null?""+Xt(t):n,j||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=j?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),Yl(e)}function En(e,t,n){t==="number"&&tl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Xl(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+Xt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Mn(e,t,n){if(t!=null&&(t=""+Xt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Xt(n):""}function Gl(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(d(92));if(fe(l)){if(1<l.length)throw Error(d(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=Xt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),Yl(e)}function ht(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zs(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Tt.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Qs(e,t,n){if(t!=null&&typeof t!="object")throw Error(d(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&Zs(e,o,l)}else for(var s in t)t.hasOwnProperty(s)&&Zs(e,s,t[s])}function gt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ht=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vt(e){return Ht.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function mt(){}var wt=null;function Oc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xt=null,rn=null;function Nt(e){var t=Ji(e);if(t&&(e=t.stateNode)){var n=e[On]||null;e:switch(e=t.stateNode,t.type){case"input":if(os(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+li(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[On]||null;if(!o)throw Error(d(90));os(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&as(l)}break e;case"textarea":Mn(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Xl(e,!!n.multiple,t,!1)}}}var yn=!1;function xo(e,t,n){if(yn)return e(t,n);yn=!0;try{var l=e(t);return l}finally{if(yn=!1,(xt!==null||rn!==null)&&(ru(),xt&&(t=xt,e=rn,rn=xt=null,Nt(t),e)))for(t=0;t<e.length;t++)Nt(e[t])}}function yo(e,t){var n=e.stateNode;if(n===null)return null;var l=n[On]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(d(231,t,typeof n));return n}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(Cn)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{Wa=!1}var Fi=null,Ks=null,Js=null;function ss(){if(Js)return Js;var e,t=Ks,n=t.length,l,o="value"in Fi?Fi.value:Fi.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var h=n-e;for(l=1;l<=h&&t[n-l]===o[s-l];l++);return Js=o.slice(e,1<l?1-l:void 0)}function er(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tr(){return!0}function Bd(){return!1}function st(e){function t(n,l,o,s,h){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=s,this.target=h,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(n=e[j],this[j]=n?n(s):s[j]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tr:Bd,this.isPropagationStopped=Bd,this}return xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),t}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=st(yi),wl=xe({},yi,{view:0,detail:0}),Nu=st(wl),ai,_c,Gn,oi=xe({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gn&&(Gn&&e.type==="mousemove"?(ai=e.screenX-Gn.screenX,_c=e.screenY-Gn.screenY):_c=ai=0,Gn=e),ai)},movementY:function(e){return"movementY"in e?e.movementY:_c}}),Fa=st(oi),Mu=xe({},oi,{dataTransfer:0}),vi=st(Mu),rs=xe({},wl,{relatedTarget:0}),$n=st(rs),cs=xe({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),$i=st(cs),nr=xe({},yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ba=st(nr),Hc=xe({},yi,{data:0}),qn=st(Hc),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},us={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ui(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=us[e])?!!t[e]:!1}function $a(){return Ui}var vn=xe({},wl,{key:function(e){if(e.key){var t=ds[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=er(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(e){return e.type==="keypress"?er(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?er(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fs=st(vn),Uu=xe({},oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pd=st(Uu),ir=xe({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),Wr=st(ir),Fr=xe({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ec=st(Fr),La=xe({},oi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$r=st(La),jl=xe({},yi,{newState:0,oldState:0}),ps=st(jl),bo=[9,13,27,32],lr=Cn&&"CompositionEvent"in window,ql=null;Cn&&"documentMode"in document&&(ql=document.documentMode);var Vc=Cn&&"TextEvent"in window&&!ql,Ya=Cn&&(!lr||ql&&8<ql&&11>=ql),Lr=" ",vo=!1;function Qt(e,t){switch(e){case"keyup":return bo.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kt=!1;function mo(e,t){switch(e){case"compositionend":return Xa(t);case"keypress":return t.which!==32?null:(vo=!0,Lr);case"textInput":return e=t.data,e===Lr&&vo?null:e;default:return null}}function Ic(e,t){if(Kt)return e==="compositionend"||!lr&&Qt(e,t)?(e=ss(),Js=Ks=Fi=null,Kt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ya&&t.locale!=="ko"?null:t.data;default:return null}}var hs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Od(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hs[e.type]:t==="textarea"}function Yr(e,t,n,l){xt?rn?rn.push(l):rn=[l]:xt=l,t=gu(t,"onChange"),0<t.length&&(n=new bi("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var ar=null,Zn=null;function nl(e){Ap(e,0)}function Zl(e){var t=Sl(e);if(as(t))return e}function Tl(e,t){if(e==="change")return t}var va=!1;if(Cn){var Ql;if(Cn){var Kl="oninput"in document;if(!Kl){var il=document.createElement("div");il.setAttribute("oninput","return;"),Kl=typeof il.oninput=="function"}Ql=Kl}else Ql=!1;va=Ql&&(!document.documentMode||9<document.documentMode)}function or(){ar&&(ar.detachEvent("onpropertychange",mi),Zn=ar=null)}function mi(e){if(e.propertyName==="value"&&Zl(Zn)){var t=[];Yr(t,Zn,e,Oc(e)),xo(nl,t)}}function Ln(e,t,n){e==="focusin"?(or(),ar=t,Zn=n,ar.attachEvent("onpropertychange",mi)):e==="focusout"&&or()}function Jl(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zl(Zn)}function si(e,t){if(e==="click")return Zl(t)}function Cl(e,t){if(e==="input"||e==="change")return Zl(t)}function Bu(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vn=typeof Object.is=="function"?Object.is:Bu;function gs(e,t){if(Vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!Pa.call(t,o)||!Vn(e[o],t[o]))return!1}return!0}function sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jt(e,t){var n=sr(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sr(n)}}function zl(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zl(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=tl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=tl(e.document)}return t}function Gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var _d=Cn&&"documentMode"in document&&11>=document.documentMode,Ga=null,xs=null,qa=null,So=!1;function Wc(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;So||Ga==null||Ga!==tl(l)||(l=Ga,"selectionStart"in l&&Gr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),qa&&gs(qa,l)||(qa=l,l=gu(xs,"onSelect"),0<l.length&&(t=new bi("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=Ga)))}function Li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ea={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionrun:Li("Transition","TransitionRun"),transitionstart:Li("Transition","TransitionStart"),transitioncancel:Li("Transition","TransitionCancel"),transitionend:Li("Transition","TransitionEnd")},ma={},wo={};Cn&&(wo=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function kl(e){if(ma[e])return ma[e];if(!ea[e])return e;var t=ea[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wo)return ma[e]=t[n];return e}var rr=kl("animationend"),ys=kl("animationiteration"),bs=kl("animationstart"),Hd=kl("transitionrun"),ta=kl("transitionstart"),Si=kl("transitioncancel"),cr=kl("transitionend"),Fc=new Map,jo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jo.push("scrollEnd");function Qn(e,t){Fc.set(e,t),on(t,[e])}var To=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Kn=[],Rl=0,$c=0;function dr(){for(var e=Rl,t=$c=Rl=0;t<e;){var n=Kn[t];Kn[t++]=null;var l=Kn[t];Kn[t++]=null;var o=Kn[t];Kn[t++]=null;var s=Kn[t];if(Kn[t++]=null,l!==null&&o!==null){var h=l.pending;h===null?o.next=o:(o.next=h.next,h.next=o),l.pending=o}s!==0&&qr(n,o,s)}}function ur(e,t,n,l){Kn[Rl++]=e,Kn[Rl++]=t,Kn[Rl++]=n,Kn[Rl++]=l,$c|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Lc(e,t,n,l){return ur(e,t,n,l),fr(e)}function na(e,t){return ur(e,null,null,t),fr(e)}function qr(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,s=e.return;s!==null;)s.childLanes|=n,l=s.alternate,l!==null&&(l.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(o=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,o&&t!==null&&(o=31-Je(n),e=s.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),s):null}function fr(e){if(50<yd)throw yd=0,Yu=null,Error(d(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Co={};function Ed(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(e,t,n,l){return new Ed(e,t,n,l)}function ia(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ll(e,t){var n=e.alternate;return n===null?(n=ri(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Sa(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Jn(e,t,n,l,o,s){var h=0;if(l=e,typeof e=="function")ia(e)&&(h=1);else if(typeof e=="string")h=Sg(e,n,$.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case b:return e=ri(31,n,t,o),e.elementType=b,e.lanes=s,e;case Se:return al(n.children,o,s,t);case R:h=8,o|=24;break;case W:return e=ri(12,n,t,o|2),e.elementType=W,e.lanes=s,e;case V:return e=ri(13,n,t,o),e.elementType=V,e.lanes=s,e;case k:return e=ri(19,n,t,o),e.elementType=k,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:h=10;break e;case Ie:h=9;break e;case Be:h=11;break e;case A:h=14;break e;case z:h=16,l=null;break e}h=29,n=Error(d(130,e===null?"null":typeof e,"")),l=null}return t=ri(h,n,t,o),t.elementType=e,t.type=l,t.lanes=s,t}function al(e,t,n,l){return e=ri(7,e,l,t),e.lanes=n,e}function Bi(e,t,n){return e=ri(6,e,null,t),e.lanes=n,e}function zo(e){var t=ri(18,null,null,0);return t.stateNode=e,t}function Pi(e,t,n){return t=ri(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ko=new WeakMap;function zn(e,t){if(typeof e=="object"&&e!==null){var n=ko.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Wl(t)},ko.set(e,t),t)}return{value:e,source:t,stack:Wl(t)}}var Dl=[],ci=0,wa=null,ol=0,wi=[],In=0,Al=null,Wn=1,di="";function Yn(e,t){Dl[ci++]=ol,Dl[ci++]=wa,wa=e,ol=t}function Za(e,t,n){wi[In++]=Wn,wi[In++]=di,wi[In++]=Al,Al=e;var l=Wn;e=di;var o=32-Je(l)-1;l&=~(1<<o),n+=1;var s=32-Je(t)+o;if(30<s){var h=o-o%5;s=(l&(1<<h)-1).toString(32),l>>=h,o-=h,Wn=1<<32-Je(t)+o|n<<o|l,di=s+e}else Wn=1<<s|n<<o|l,di=e}function la(e){e.return!==null&&(Yn(e,1),Za(e,1,0))}function Qa(e){for(;e===wa;)wa=Dl[--ci],Dl[ci]=null,ol=Dl[--ci],Dl[ci]=null;for(;e===Al;)Al=wi[--In],wi[In]=null,di=wi[--In],wi[In]=null,Wn=wi[--In],wi[In]=null}function ft(e,t){wi[In++]=Wn,wi[In++]=di,wi[In++]=Al,Wn=t.id,di=t.overflow,Al=e}var Ge=null,pn=null,Rt=!1,Ka=null,sl=!1,pr=Error(d(519));function Yi(e){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xr(zn(t,e)),pr}function hr(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[dt]=e,t[On]=l,n){case"dialog":Bt("cancel",t),Bt("close",t);break;case"iframe":case"object":case"embed":Bt("load",t);break;case"video":case"audio":for(n=0;n<vd.length;n++)Bt(vd[n],t);break;case"source":Bt("error",t);break;case"img":case"image":case"link":Bt("error",t),Bt("load",t);break;case"details":Bt("toggle",t);break;case"input":Bt("invalid",t),_e(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Bt("invalid",t);break;case"textarea":Bt("invalid",t),Gl(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Bp(t.textContent,n)?(l.popover!=null&&(Bt("beforetoggle",t),Bt("toggle",t)),l.onScroll!=null&&Bt("scroll",t),l.onScrollEnd!=null&&Bt("scrollend",t),l.onClick!=null&&(t.onclick=mt),t=!0):t=!1,t||Yi(e,!0)}function gr(e){for(Ge=e.return;Ge;)switch(Ge.tag){case 5:case 31:case 13:sl=!1;return;case 27:case 3:sl=!0;return;default:Ge=Ge.return}}function vs(e){if(e!==Ge)return!1;if(!Rt)return gr(e),Rt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||rf(e.type,e.memoizedProps)),n=!n),n&&pn&&Yi(e),gr(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));pn=Fp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));pn=Fp(e)}else t===27?(t=pn,Hs(e.type)?(e=pf,pf=null,pn=e):pn=t):pn=Ge?ua(e.stateNode.nextSibling):null;return!0}function Nl(){pn=Ge=null,Rt=!1}function Yc(){var e=Ka;return e!==null&&(gl===null?gl=e:gl.push.apply(gl,e),Ka=null),e}function xr(e){Ka===null?Ka=[e]:Ka.push(e)}var yr=T(null),rl=null,Oi=null;function Ml(e,t,n){_(yr,t._currentValue),t._currentValue=n}function Xi(e){e._currentValue=yr.current,N(yr)}function Ro(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Do(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){var h=o.child;s=s.firstContext;e:for(;s!==null;){var j=s;s=o;for(var B=0;B<t.length;B++)if(j.context===t[B]){s.lanes|=n,j=s.alternate,j!==null&&(j.lanes|=n),Ro(s.return,n,e),l||(h=null);break e}s=j.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(d(341));h.lanes|=n,s=h.alternate,s!==null&&(s.lanes|=n),Ro(h,n,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function Ul(e,t,n,l){e=null;for(var o=t,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(d(387));if(h=h.memoizedProps,h!==null){var j=o.type;Vn(o.pendingProps.value,h.value)||(e!==null?e.push(j):e=[j])}}else if(o===ct.current){if(h=o.alternate,h===null)throw Error(d(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Td):e=[Td])}o=o.return}e!==null&&Do(t,e,n,l),t.flags|=262144}function Zr(e){for(e=e.firstContext;e!==null;){if(!Vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function aa(e){rl=e,Oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mn(e){return Ao(rl,e)}function cl(e,t){return rl===null&&aa(e),Ao(e,t)}function Ao(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Oi===null){if(e===null)throw Error(d(308));Oi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Oi=Oi.next=t;return n}var ms=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Ss=c.unstable_scheduleCallback,br=c.unstable_NormalPriority,kn={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _i(){return{controller:new ms,data:new Map,refCount:0}}function ja(e){e.refCount--,e.refCount===0&&Ss(br,function(){e.controller.abort()})}var No=null,Qr=0,Ta=0,Mo=null;function Xc(e,t){if(No===null){var n=No=[];Qr=0,Ta=Ku(),Mo={status:"pending",value:void 0,then:function(l){n.push(l)}}}return Qr++,t.then(Ca,Ca),t}function Ca(){if(--Qr===0&&No!==null){Mo!==null&&(Mo.status="fulfilled");var e=No;No=null,Ta=0,Mo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ws(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var vr=I.S;I.S=function(e,t){lp=ot(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Xc(e,t),vr!==null&&vr(e,t)};var za=T(null);function Kr(){var e=za.current;return e!==null?e:hn.pooledCache}function Uo(e,t){t===null?_(za,za.current):_(za,t.pool)}function Gc(){var e=Kr();return e===null?null:{parent:kn._currentValue,pool:e}}var oa=Error(d(460)),Bo=Error(d(474)),js=Error(d(542)),Po={then:function(){}};function Oo(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ts(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(mt,mt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Jr(e),e;default:if(typeof t.status=="string")t.then(mt,mt);else{if(e=hn,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Jr(e),e}throw Ra=t,oa}}function ka(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ra=n,oa):n}}var Ra=null;function mr(){if(Ra===null)throw Error(d(459));var e=Ra;return Ra=null,e}function Jr(e){if(e===oa||e===js)throw Error(d(483))}var Cs=null,_o=0;function ec(e){var t=_o;return _o+=1,Cs===null&&(Cs=[]),Ts(Cs,e,t)}function Ja(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Gi(e,t){throw t.$$typeof===te?Error(d(525)):(e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Bl(e){function t(G,F){if(e){var le=G.deletions;le===null?(G.deletions=[F],G.flags|=16):le.push(F)}}function n(G,F){if(!e)return null;for(;F!==null;)t(G,F),F=F.sibling;return null}function l(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function o(G,F){return G=ll(G,F),G.index=0,G.sibling=null,G}function s(G,F,le){return G.index=le,e?(le=G.alternate,le!==null?(le=le.index,le<F?(G.flags|=67108866,F):le):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function h(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function j(G,F,le,me){return F===null||F.tag!==6?(F=Bi(le,G.mode,me),F.return=G,F):(F=o(F,le),F.return=G,F)}function B(G,F,le,me){var lt=le.type;return lt===Se?be(G,F,le.props.children,me,le.key):F!==null&&(F.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===z&&ka(lt)===F.type)?(F=o(F,le.props),Ja(F,le),F.return=G,F):(F=Jn(le.type,le.key,le.props,null,G.mode,me),Ja(F,le),F.return=G,F)}function ae(G,F,le,me){return F===null||F.tag!==4||F.stateNode.containerInfo!==le.containerInfo||F.stateNode.implementation!==le.implementation?(F=Pi(le,G.mode,me),F.return=G,F):(F=o(F,le.children||[]),F.return=G,F)}function be(G,F,le,me,lt){return F===null||F.tag!==7?(F=al(le,G.mode,me,lt),F.return=G,F):(F=o(F,le),F.return=G,F)}function we(G,F,le){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Bi(""+F,G.mode,le),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ze:return le=Jn(F.type,F.key,F.props,null,G.mode,le),Ja(le,F),le.return=G,le;case ne:return F=Pi(F,G.mode,le),F.return=G,F;case z:return F=ka(F),we(G,F,le)}if(fe(F)||Pe(F))return F=al(F,G.mode,le,null),F.return=G,F;if(typeof F.then=="function")return we(G,ec(F),le);if(F.$$typeof===X)return we(G,cl(G,F),le);Gi(G,F)}return null}function se(G,F,le,me){var lt=F!==null?F.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return lt!==null?null:j(G,F,""+le,me);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case ze:return le.key===lt?B(G,F,le,me):null;case ne:return le.key===lt?ae(G,F,le,me):null;case z:return le=ka(le),se(G,F,le,me)}if(fe(le)||Pe(le))return lt!==null?null:be(G,F,le,me,null);if(typeof le.then=="function")return se(G,F,ec(le),me);if(le.$$typeof===X)return se(G,F,cl(G,le),me);Gi(G,le)}return null}function ue(G,F,le,me,lt){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return G=G.get(le)||null,j(F,G,""+me,lt);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case ze:return G=G.get(me.key===null?le:me.key)||null,B(F,G,me,lt);case ne:return G=G.get(me.key===null?le:me.key)||null,ae(F,G,me,lt);case z:return me=ka(me),ue(G,F,le,me,lt)}if(fe(me)||Pe(me))return G=G.get(le)||null,be(F,G,me,lt,null);if(typeof me.then=="function")return ue(G,F,le,ec(me),lt);if(me.$$typeof===X)return ue(G,F,le,cl(F,me),lt);Gi(F,me)}return null}function Xe(G,F,le,me){for(var lt=null,qt=null,Ze=F,Dt=F=0,It=null;Ze!==null&&Dt<le.length;Dt++){Ze.index>Dt?(It=Ze,Ze=null):It=Ze.sibling;var Zt=se(G,Ze,le[Dt],me);if(Zt===null){Ze===null&&(Ze=It);break}e&&Ze&&Zt.alternate===null&&t(G,Ze),F=s(Zt,F,Dt),qt===null?lt=Zt:qt.sibling=Zt,qt=Zt,Ze=It}if(Dt===le.length)return n(G,Ze),Rt&&Yn(G,Dt),lt;if(Ze===null){for(;Dt<le.length;Dt++)Ze=we(G,le[Dt],me),Ze!==null&&(F=s(Ze,F,Dt),qt===null?lt=Ze:qt.sibling=Ze,qt=Ze);return Rt&&Yn(G,Dt),lt}for(Ze=l(Ze);Dt<le.length;Dt++)It=ue(Ze,G,Dt,le[Dt],me),It!==null&&(e&&It.alternate!==null&&Ze.delete(It.key===null?Dt:It.key),F=s(It,F,Dt),qt===null?lt=It:qt.sibling=It,qt=It);return e&&Ze.forEach(function(Fs){return t(G,Fs)}),Rt&&Yn(G,Dt),lt}function ut(G,F,le,me){if(le==null)throw Error(d(151));for(var lt=null,qt=null,Ze=F,Dt=F=0,It=null,Zt=le.next();Ze!==null&&!Zt.done;Dt++,Zt=le.next()){Ze.index>Dt?(It=Ze,Ze=null):It=Ze.sibling;var Fs=se(G,Ze,Zt.value,me);if(Fs===null){Ze===null&&(Ze=It);break}e&&Ze&&Fs.alternate===null&&t(G,Ze),F=s(Fs,F,Dt),qt===null?lt=Fs:qt.sibling=Fs,qt=Fs,Ze=It}if(Zt.done)return n(G,Ze),Rt&&Yn(G,Dt),lt;if(Ze===null){for(;!Zt.done;Dt++,Zt=le.next())Zt=we(G,Zt.value,me),Zt!==null&&(F=s(Zt,F,Dt),qt===null?lt=Zt:qt.sibling=Zt,qt=Zt);return Rt&&Yn(G,Dt),lt}for(Ze=l(Ze);!Zt.done;Dt++,Zt=le.next())Zt=ue(Ze,G,Dt,Zt.value,me),Zt!==null&&(e&&Zt.alternate!==null&&Ze.delete(Zt.key===null?Dt:Zt.key),F=s(Zt,F,Dt),qt===null?lt=Zt:qt.sibling=Zt,qt=Zt);return e&&Ze.forEach(function(Mg){return t(G,Mg)}),Rt&&Yn(G,Dt),lt}function fn(G,F,le,me){if(typeof le=="object"&&le!==null&&le.type===Se&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case ze:e:{for(var lt=le.key;F!==null;){if(F.key===lt){if(lt=le.type,lt===Se){if(F.tag===7){n(G,F.sibling),me=o(F,le.props.children),me.return=G,G=me;break e}}else if(F.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===z&&ka(lt)===F.type){n(G,F.sibling),me=o(F,le.props),Ja(me,le),me.return=G,G=me;break e}n(G,F);break}else t(G,F);F=F.sibling}le.type===Se?(me=al(le.props.children,G.mode,me,le.key),me.return=G,G=me):(me=Jn(le.type,le.key,le.props,null,G.mode,me),Ja(me,le),me.return=G,G=me)}return h(G);case ne:e:{for(lt=le.key;F!==null;){if(F.key===lt)if(F.tag===4&&F.stateNode.containerInfo===le.containerInfo&&F.stateNode.implementation===le.implementation){n(G,F.sibling),me=o(F,le.children||[]),me.return=G,G=me;break e}else{n(G,F);break}else t(G,F);F=F.sibling}me=Pi(le,G.mode,me),me.return=G,G=me}return h(G);case z:return le=ka(le),fn(G,F,le,me)}if(fe(le))return Xe(G,F,le,me);if(Pe(le)){if(lt=Pe(le),typeof lt!="function")throw Error(d(150));return le=lt.call(le),ut(G,F,le,me)}if(typeof le.then=="function")return fn(G,F,ec(le),me);if(le.$$typeof===X)return fn(G,F,cl(G,le),me);Gi(G,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,F!==null&&F.tag===6?(n(G,F.sibling),me=o(F,le),me.return=G,G=me):(n(G,F),me=Bi(le,G.mode,me),me.return=G,G=me),h(G)):n(G,F)}return function(G,F,le,me){try{_o=0;var lt=fn(G,F,le,me);return Cs=null,lt}catch(Ze){if(Ze===oa||Ze===js)throw Ze;var qt=ri(29,Ze,null,G.mode);return qt.lanes=me,qt.return=G,qt}finally{}}}var ji=Bl(!0),Vd=Bl(!1),eo=!1;function qc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function to(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function no(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(nn&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=fr(e),qr(e,null,n),t}return ur(e,l,t,n),fr(e)}function Sr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Ii(e,n)}}function Qc(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=h:s=s.next=h,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Kc=!1;function wr(){if(Kc){var e=Mo;if(e!==null)throw e}}function jr(e,t,n,l){Kc=!1;var o=e.updateQueue;eo=!1;var s=o.firstBaseUpdate,h=o.lastBaseUpdate,j=o.shared.pending;if(j!==null){o.shared.pending=null;var B=j,ae=B.next;B.next=null,h===null?s=ae:h.next=ae,h=B;var be=e.alternate;be!==null&&(be=be.updateQueue,j=be.lastBaseUpdate,j!==h&&(j===null?be.firstBaseUpdate=ae:j.next=ae,be.lastBaseUpdate=B))}if(s!==null){var we=o.baseState;h=0,be=ae=B=null,j=s;do{var se=j.lane&-536870913,ue=se!==j.lane;if(ue?(Vt&se)===se:(l&se)===se){se!==0&&se===Ta&&(Kc=!0),be!==null&&(be=be.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Xe=e,ut=j;se=t;var fn=n;switch(ut.tag){case 1:if(Xe=ut.payload,typeof Xe=="function"){we=Xe.call(fn,we,se);break e}we=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=ut.payload,se=typeof Xe=="function"?Xe.call(fn,we,se):Xe,se==null)break e;we=xe({},we,se);break e;case 2:eo=!0}}se=j.callback,se!==null&&(e.flags|=64,ue&&(e.flags|=8192),ue=o.callbacks,ue===null?o.callbacks=[se]:ue.push(se))}else ue={lane:se,tag:j.tag,payload:j.payload,callback:j.callback,next:null},be===null?(ae=be=ue,B=we):be=be.next=ue,h|=se;if(j=j.next,j===null){if(j=o.shared.pending,j===null)break;ue=j,j=ue.next,ue.next=null,o.lastBaseUpdate=ue,o.shared.pending=null}}while(!0);be===null&&(B=we),o.baseState=B,o.firstBaseUpdate=ae,o.lastBaseUpdate=be,s===null&&(o.shared.lanes=0),Us|=h,e.lanes=h,e.memoizedState=we}}function Id(e,t){if(typeof e!="function")throw Error(d(191,e));e.call(t)}function Wd(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Id(n[e],t)}var sa=T(null),ra=T(0);function Ho(e,t){e=Jo,_(ra,e),_(sa,t),Jo=e|t.baseLanes}function zs(){_(ra,Jo),_(sa,sa.current)}function io(){Jo=ra.current,N(sa),N(ra)}var Ti=T(null),ei=null;function dl(e){var t=e.alternate;_(ln,ln.current&1),_(Ti,e),ei===null&&(t===null||sa.current!==null||t.memoizedState!==null)&&(ei=e)}function Eo(e){_(ln,ln.current),_(Ti,e),ei===null&&(ei=e)}function Tr(e){e.tag===22?(_(ln,ln.current),_(Ti,e),ei===null&&(ei=e)):Pl()}function Pl(){_(ln,ln.current),_(Ti,Ti.current)}function ui(e){N(Ti),ei===e&&(ei=null),N(ln)}var ln=T(0);function lo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||uf(n)||ff(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hi=0,it=null,Gt=null,_n=null,tc=!1,Vo=!1,qi=!1,Io=0,ao=0,Da=null,Jc=0;function bn(){throw Error(d(321))}function Cr(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vn(e[n],t[n]))return!1;return!0}function ed(e,t,n,l,o,s){return Hi=s,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?xc:yc,qi=!1,s=n(l,o),qi=!1,Vo&&(s=Ol(t,n,l,o)),td(e),s}function td(e){I.H=Xo;var t=Gt!==null&&Gt.next!==null;if(Hi=0,_n=Gt=it=null,tc=!1,ao=0,Da=null,t)throw Error(d(300));e===null||H||(e=e.dependencies,e!==null&&Zr(e)&&(H=!0))}function Ol(e,t,n,l){it=e;var o=0;do{if(Vo&&(Da=null),ao=0,Vo=!1,25<=o)throw Error(d(301));if(o+=1,_n=Gt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}I.H=nt,s=t(n,l)}while(Vo);return s}function Fd(){var e=I.H,t=e.useState()[0];return t=typeof t.then=="function"?zr(t):t,e=e.useState()[0],(Gt!==null?Gt.memoizedState:null)!==e&&(it.flags|=1024),t}function oo(){var e=Io!==0;return Io=0,e}function nc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ca(e){if(tc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}tc=!1}Hi=0,_n=Gt=it=null,Vo=!1,ao=Io=0,Da=null}function ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?it.memoizedState=_n=e:_n=_n.next=e,_n}function Rn(){if(Gt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=Gt.next;var t=_n===null?it.memoizedState:_n.next;if(t!==null)_n=t,Gt=e;else{if(e===null)throw it.alternate===null?Error(d(467)):Error(d(310));Gt=e,e={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},_n===null?it.memoizedState=_n=e:_n=_n.next=e}return _n}function ic(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zr(e){var t=ao;return ao+=1,Da===null&&(Da=[]),e=Ts(Da,e,t),t=it,(_n===null?t.memoizedState:_n.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?xc:yc),e}function lc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zr(e);if(e.$$typeof===X)return mn(e)}throw Error(d(438,String(e)))}function ks(e){var t=null,n=it.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=it.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=ic(),it.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=de;return t.index++,n}function da(e,t){return typeof t=="function"?t(e):t}function ac(e){var t=Rn();return oc(t,Gt,e)}function oc(e,t,n){var l=e.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=n;var o=e.baseQueue,s=l.pending;if(s!==null){if(o!==null){var h=o.next;o.next=s.next,s.next=h}t.baseQueue=o=s,l.pending=null}if(s=e.baseState,o===null)e.memoizedState=s;else{t=o.next;var j=h=null,B=null,ae=t,be=!1;do{var we=ae.lane&-536870913;if(we!==ae.lane?(Vt&we)===we:(Hi&we)===we){var se=ae.revertLane;if(se===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),we===Ta&&(be=!0);else if((Hi&se)===se){ae=ae.next,se===Ta&&(be=!0);continue}else we={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},B===null?(j=B=we,h=s):B=B.next=we,it.lanes|=se,Us|=se;we=ae.action,qi&&n(s,we),s=ae.hasEagerState?ae.eagerState:n(s,we)}else se={lane:we,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},B===null?(j=B=se,h=s):B=B.next=se,it.lanes|=we,Us|=we;ae=ae.next}while(ae!==null&&ae!==t);if(B===null?h=s:B.next=j,!Vn(s,e.memoizedState)&&(H=!0,be&&(n=Mo,n!==null)))throw n;e.memoizedState=s,e.baseState=h,e.baseQueue=B,l.lastRenderedState=s}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Wo(e){var t=Rn(),n=t.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do s=e(s,h.action),h=h.next;while(h!==o);Vn(s,t.memoizedState)||(H=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function $d(e,t,n){var l=it,o=Rn(),s=Rt;if(s){if(n===void 0)throw Error(d(407));n=n()}else n=t();var h=!Vn((Gt||o).memoizedState,n);if(h&&(o.memoizedState=n,H=!0),o=o.queue,_l(rc.bind(null,l,o,e),[e]),o.getSnapshot!==t||h||_n!==null&&_n.memoizedState.tag&1){if(l.flags|=2048,$o(9,{destroy:void 0},nd.bind(null,l,o,n,t),null),hn===null)throw Error(d(349));s||(Hi&127)!==0||sc(l,t,n)}return n}function sc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=it.updateQueue,t===null?(t=ic(),it.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nd(e,t,n,l){t.value=n,t.getSnapshot=l,cc(t)&&Ld(e)}function rc(e,t,n){return n(function(){cc(t)&&Ld(e)})}function cc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vn(e,n)}catch{return!0}}function Ld(e){var t=na(e,2);t!==null&&xl(t,e,2)}function id(e){var t=ti();if(typeof e=="function"){var n=e;if(e=n(),qi){Bn(!0);try{n()}finally{Bn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t}function ld(e,t,n,l){return e.baseState=n,oc(e,Gt,typeof l=="function"?l:da)}function kr(e,t,n,l,o){if(co(e))throw Error(d(485));if(e=t.action,e!==null){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){s.listeners.push(h)}};I.T!==null?n(!0):s.isTransition=!1,l(s),n=t.pending,n===null?(s.next=t.pending=s,dc(t,s)):(s.next=n.next,t.pending=n.next=s)}}function dc(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var s=I.T,h={};I.T=h;try{var j=n(o,l),B=I.S;B!==null&&B(h,j),Rs(e,t,j)}catch(ae){Aa(e,t,ae)}finally{s!==null&&h.types!==null&&(s.types=h.types),I.T=s}}else try{s=n(o,l),Rs(e,t,s)}catch(ae){Aa(e,t,ae)}}function Rs(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Rr(e,t,l)},function(l){return Aa(e,t,l)}):Rr(e,t,n)}function Rr(e,t,n){t.status="fulfilled",t.value=n,Fo(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,dc(e,n)))}function Aa(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Fo(t),t=t.next;while(t!==l)}e.action=null}function Fo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function uc(e,t){return t}function fc(e,t){if(Rt){var n=hn.formState;if(n!==null){e:{var l=it;if(Rt){if(pn){t:{for(var o=pn,s=sl;o.nodeType!==8;){if(!s){o=null;break t}if(o=ua(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){pn=ua(o.nextSibling),l=o.data==="F!";break e}}Yi(l)}l=!1}l&&(t=n[0])}}return n=ti(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uc,lastRenderedState:t},n.queue=l,n=gc.bind(null,it,l),l.dispatch=n,l=id(!1),s=dd.bind(null,it,!1,l.queue),l=ti(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=kr.bind(null,it,o,s,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function pc(e){var t=Rn();return fi(t,Gt,e)}function fi(e,t,n){if(t=oc(e,t,uc)[0],e=ac(da)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=zr(t)}catch(h){throw h===oa?js:h}else l=t;t=Rn();var o=t.queue,s=o.dispatch;return n!==t.memoizedState&&(it.flags|=2048,$o(9,{destroy:void 0},Yd.bind(null,o,n),null)),[l,s,e]}function Yd(e,t){e.action=t}function Xd(e){var t=Rn(),n=Gt;if(n!==null)return fi(t,n,e);Rn(),t=t.memoizedState,n=Rn();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function $o(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=it.updateQueue,t===null&&(t=ic(),it.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Gd(){return Rn().memoizedState}function Dr(e,t,n,l){var o=ti();it.flags|=e,o.memoizedState=$o(1|t,{destroy:void 0},n,l===void 0?null:l)}function Ar(e,t,n,l){var o=Rn();l=l===void 0?null:l;var s=o.memoizedState.inst;Gt!==null&&l!==null&&Cr(l,Gt.memoizedState.deps)?o.memoizedState=$o(t,s,n,l):(it.flags|=e,o.memoizedState=$o(1|t,s,n,l))}function Nr(e,t){Dr(8390656,8,e,t)}function _l(e,t){Ar(2048,8,e,t)}function qd(e){it.flags|=4;var t=it.updateQueue;if(t===null)t=ic(),it.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Na(e){var t=Rn().memoizedState;return qd({ref:t,nextImpl:e}),function(){if((nn&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function Hl(e,t){return Ar(4,2,e,t)}function ad(e,t){return Ar(4,4,e,t)}function od(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ci(e,t,n){n=n!=null?n.concat([e]):null,Ar(4,4,od.bind(null,t,e),n)}function so(){}function ro(e,t){var n=Rn();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Cr(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function hc(e,t){var n=Rn();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Cr(t,l[1]))return l[0];if(l=e(),qi){Bn(!0);try{e()}finally{Bn(!1)}}return n.memoizedState=[l,t],l}function Mr(e,t,n){return n===void 0||(Hi&1073741824)!==0&&(Vt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=op(),it.lanes|=e,Us|=e,n)}function Ds(e,t,n,l){return Vn(n,t)?n:sa.current!==null?(e=Mr(e,n,l),Vn(e,t)||(H=!0),e):(Hi&42)===0||(Hi&1073741824)!==0&&(Vt&261930)===0?(H=!0,e.memoizedState=n):(e=op(),it.lanes|=e,Us|=e,t)}function As(e,t,n,l,o){var s=O.p;O.p=s!==0&&8>s?s:8;var h=I.T,j={};I.T=j,dd(e,!1,t,n);try{var B=o(),ae=I.S;if(ae!==null&&ae(j,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var be=ws(B,l);Br(e,t,be,Il(e))}else Br(e,t,l,Il(e))}catch(we){Br(e,t,{then:function(){},status:"rejected",reason:we},Il())}finally{O.p=s,h!==null&&j.types!==null&&(h.types=j.types),I.T=h}}function sd(){}function Lo(e,t,n,l){if(e.tag!==5)throw Error(d(476));var o=Zd(e).queue;As(e,o,t,Q,n===null?sd:function(){return rd(e),n(l)})}function Zd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:Q},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function rd(e){var t=Zd(e);t.next===null&&(t=e.alternate.memoizedState),Br(e,t.next.queue,{},Il())}function Ur(){return mn(Td)}function Qd(){return Rn().memoizedState}function Kd(){return Rn().memoizedState}function Jd(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Il();e=to(n);var l=no(t,e,n);l!==null&&(xl(l,t,n),Sr(l,t,n)),t={cache:_i()},e.payload=t;return}t=t.return}}function cd(e,t,n){var l=Il();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},co(e)?Yo(t,n):(n=Lc(e,t,n,l),n!==null&&(xl(n,e,l),Pr(n,t,l)))}function gc(e,t,n){var l=Il();Br(e,t,n,l)}function Br(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(co(e))Yo(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var h=t.lastRenderedState,j=s(h,n);if(o.hasEagerState=!0,o.eagerState=j,Vn(j,h))return ur(e,t,o,0),hn===null&&dr(),!1}catch{}finally{}if(n=Lc(e,t,o,l),n!==null)return xl(n,e,l),Pr(n,t,l),!0}return!1}function dd(e,t,n,l){if(l={lane:2,revertLane:Ku(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},co(e)){if(t)throw Error(d(479))}else t=Lc(e,n,l,2),t!==null&&xl(t,e,2)}function co(e){var t=e.alternate;return e===it||t!==null&&t===it}function Yo(e,t){Vo=tc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Pr(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Ii(e,n)}}var Xo={readContext:mn,use:lc,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn};Xo.useEffectEvent=bn;var xc={readContext:mn,use:lc,useCallback:function(e,t){return ti().memoizedState=[e,t===void 0?null:t],e},useContext:mn,useEffect:Nr,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Dr(4194308,4,od.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Dr(4194308,4,e,t)},useInsertionEffect:function(e,t){Dr(4,2,e,t)},useMemo:function(e,t){var n=ti();t=t===void 0?null:t;var l=e();if(qi){Bn(!0);try{e()}finally{Bn(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=ti();if(n!==void 0){var o=n(t);if(qi){Bn(!0);try{n(t)}finally{Bn(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=cd.bind(null,it,e),[l.memoizedState,e]},useRef:function(e){var t=ti();return e={current:e},t.memoizedState=e},useState:function(e){e=id(e);var t=e.queue,n=gc.bind(null,it,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:so,useDeferredValue:function(e,t){var n=ti();return Mr(n,e,t)},useTransition:function(){var e=id(!1);return e=As.bind(null,it,e.queue,!0,!1),ti().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=it,o=ti();if(Rt){if(n===void 0)throw Error(d(407));n=n()}else{if(n=t(),hn===null)throw Error(d(349));(Vt&127)!==0||sc(l,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Nr(rc.bind(null,l,s,e),[e]),l.flags|=2048,$o(9,{destroy:void 0},nd.bind(null,l,s,n,t),null),n},useId:function(){var e=ti(),t=hn.identifierPrefix;if(Rt){var n=di,l=Wn;n=(l&~(1<<32-Je(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Io++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Jc++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ur,useFormState:fc,useActionState:fc,useOptimistic:function(e){var t=ti();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=dd.bind(null,it,!0,n),n.dispatch=t,[e,t]},useMemoCache:ks,useCacheRefresh:function(){return ti().memoizedState=Jd.bind(null,it)},useEffectEvent:function(e){var t=ti(),n={impl:e};return t.memoizedState=n,function(){if((nn&2)!==0)throw Error(d(440));return n.impl.apply(void 0,arguments)}}},yc={readContext:mn,use:lc,useCallback:ro,useContext:mn,useEffect:_l,useImperativeHandle:Ci,useInsertionEffect:Hl,useLayoutEffect:ad,useMemo:hc,useReducer:ac,useRef:Gd,useState:function(){return ac(da)},useDebugValue:so,useDeferredValue:function(e,t){var n=Rn();return Ds(n,Gt.memoizedState,e,t)},useTransition:function(){var e=ac(da)[0],t=Rn().memoizedState;return[typeof e=="boolean"?e:zr(e),t]},useSyncExternalStore:$d,useId:Qd,useHostTransitionStatus:Ur,useFormState:pc,useActionState:pc,useOptimistic:function(e,t){var n=Rn();return ld(n,Gt,e,t)},useMemoCache:ks,useCacheRefresh:Kd};yc.useEffectEvent=Na;var nt={readContext:mn,use:lc,useCallback:ro,useContext:mn,useEffect:_l,useImperativeHandle:Ci,useInsertionEffect:Hl,useLayoutEffect:ad,useMemo:hc,useReducer:Wo,useRef:Gd,useState:function(){return Wo(da)},useDebugValue:so,useDeferredValue:function(e,t){var n=Rn();return Gt===null?Mr(n,e,t):Ds(n,Gt.memoizedState,e,t)},useTransition:function(){var e=Wo(da)[0],t=Rn().memoizedState;return[typeof e=="boolean"?e:zr(e),t]},useSyncExternalStore:$d,useId:Qd,useHostTransitionStatus:Ur,useFormState:Xd,useActionState:Xd,useOptimistic:function(e,t){var n=Rn();return Gt!==null?ld(n,Gt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ks,useCacheRefresh:Kd};nt.useEffectEvent=Na;function uo(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Or={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Il(),o=to(l);o.payload=t,n!=null&&(o.callback=n),t=no(e,o,l),t!==null&&(xl(t,e,l),Sr(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Il(),o=to(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=no(e,o,l),t!==null&&(xl(t,e,l),Sr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Il(),l=to(n);l.tag=2,t!=null&&(l.callback=t),t=no(e,l,n),t!==null&&(xl(t,e,n),Sr(t,e,n))}};function eu(e,t,n,l,o,s,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,h):t.prototype&&t.prototype.isPureReactComponent?!gs(n,l)||!gs(o,s):!0}function tu(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Or.enqueueReplaceState(t,t.state,null)}function Go(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=xe({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function a(e){To(e)}function r(e){console.error(e)}function f(e){To(e)}function m(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function y(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function v(e,t,n){return n=to(n),n.tag=3,n.payload={element:null},n.callback=function(){m(e,t)},n}function g(e){return e=to(e),e.tag=3,e}function w(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=l.value;e.payload=function(){return o(s)},e.callback=function(){y(t,n,l)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){y(t,n,l),typeof o!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var j=l.stack;this.componentDidCatch(l.value,{componentStack:j!==null?j:""})})}function C(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Ul(t,n,o,!0),n=Ti.current,n!==null){switch(n.tag){case 31:case 13:return ei===null?cu():n.alternate===null&&Hn===0&&(Hn=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===Po?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),qu(e,l,o)),!1;case 22:return n.flags|=65536,l===Po?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),qu(e,l,o)),!1}throw Error(d(435,n.tag))}return qu(e,l,o),cu(),!1}if(Rt)return t=Ti.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==pr&&(e=Error(d(422),{cause:l}),xr(zn(e,n)))):(l!==pr&&(t=Error(d(423),{cause:l}),xr(zn(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=zn(l,n),o=v(e.stateNode,l,o),Qc(e,o),Hn!==4&&(Hn=2)),!1;var s=Error(d(520),{cause:l});if(s=zn(s,n),xd===null?xd=[s]:xd.push(s),Hn!==4&&(Hn=2),t===null)return!0;l=zn(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=v(n.stateNode,l,e),Qc(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Bs===null||!Bs.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=g(o),w(o,e,n,l),Qc(n,o),!1}n=n.return}while(n!==null);return!1}var M=Error(d(461)),H=!1;function Z(e,t,n,l){t.child=e===null?Vd(t,null,n,l):ji(t,e.child,n,l)}function ge(e,t,n,l,o){n=n.render;var s=t.ref;if("ref"in l){var h={};for(var j in l)j!=="ref"&&(h[j]=l[j])}else h=l;return aa(t),l=ed(e,t,n,h,s,o),j=oo(),e!==null&&!H?(nc(e,t,o),Me(e,t,o)):(Rt&&j&&la(t),t.flags|=1,Z(e,t,l,o),t.child)}function q(e,t,n,l,o){if(e===null){var s=n.type;return typeof s=="function"&&!ia(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,ie(e,t,s,l,o)):(e=Jn(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!at(e,o)){var h=s.memoizedProps;if(n=n.compare,n=n!==null?n:gs,n(h,l)&&e.ref===t.ref)return Me(e,t,o)}return t.flags|=1,e=ll(s,l),e.ref=t.ref,e.return=t,t.child=e}function ie(e,t,n,l,o){if(e!==null){var s=e.memoizedProps;if(gs(s,l)&&e.ref===t.ref)if(H=!1,t.pendingProps=l=s,at(e,o))(e.flags&131072)!==0&&(H=!0);else return t.lanes=e.lanes,Me(e,t,o)}return He(e,t,n,l,o)}function K(e,t,n,l){var o=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~s}else l=0,t.child=null;return ee(e,t,s,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Uo(t,s!==null?s.cachePool:null),s!==null?Ho(t,s):zs(),Tr(t);else return l=t.lanes=536870912,ee(e,t,s!==null?s.baseLanes|n:n,n,l)}else s!==null?(Uo(t,s.cachePool),Ho(t,s),Pl(),t.memoizedState=null):(e!==null&&Uo(t,null),zs(),Pl());return Z(e,t,o,n),t.child}function oe(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ee(e,t,n,l,o){var s=Kr();return s=s===null?null:{parent:kn._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Uo(t,null),zs(),Tr(t),e!==null&&Ul(e,t,l,!0),t.childLanes=o,null}function ye(e,t){return t=Ye({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function De(e,t,n){return ji(t,e.child,null,n),e=ye(t,t.pendingProps),e.flags|=2,ui(t),t.memoizedState=null,e}function Re(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Rt){if(l.mode==="hidden")return e=ye(t,l),t.lanes=536870912,oe(null,e);if(Eo(t),(e=pn)?(e=Wp(e,sl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Al!==null?{id:Wn,overflow:di}:null,retryLane:536870912,hydrationErrors:null},n=zo(e),n.return=t,t.child=n,Ge=t,pn=null)):e=null,e===null)throw Yi(t);return t.lanes=536870912,null}return ye(t,l)}var s=e.memoizedState;if(s!==null){var h=s.dehydrated;if(Eo(t),o)if(t.flags&256)t.flags&=-257,t=De(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(d(558));else if(H||Ul(e,t,n,!1),o=(n&e.childLanes)!==0,H||o){if(l=hn,l!==null&&(h=jt(l,n),h!==0&&h!==s.retryLane))throw s.retryLane=h,na(e,h),xl(l,e,h),M;cu(),t=De(e,t,n)}else e=s.treeContext,pn=ua(h.nextSibling),Ge=t,Rt=!0,Ka=null,sl=!1,e!==null&&ft(t,e),t=ye(t,l),t.flags|=4096;return t}return e=ll(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ve(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(d(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function He(e,t,n,l,o){return aa(t),n=ed(e,t,n,l,void 0,o),l=oo(),e!==null&&!H?(nc(e,t,o),Me(e,t,o)):(Rt&&l&&la(t),t.flags|=1,Z(e,t,n,o),t.child)}function Fe(e,t,n,l,o,s){return aa(t),t.updateQueue=null,n=Ol(t,l,n,o),td(e),l=oo(),e!==null&&!H?(nc(e,t,s),Me(e,t,s)):(Rt&&l&&la(t),t.flags|=1,Z(e,t,n,s),t.child)}function L(e,t,n,l,o){if(aa(t),t.stateNode===null){var s=Co,h=n.contextType;typeof h=="object"&&h!==null&&(s=mn(h)),s=new n(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Or,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},qc(t),h=n.contextType,s.context=typeof h=="object"&&h!==null?mn(h):Co,s.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(uo(t,n,h,l),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(h=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),h!==s.state&&Or.enqueueReplaceState(s,s.state,null),jr(t,l,s,o),wr(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var j=t.memoizedProps,B=Go(n,j);s.props=B;var ae=s.context,be=n.contextType;h=Co,typeof be=="object"&&be!==null&&(h=mn(be));var we=n.getDerivedStateFromProps;be=typeof we=="function"||typeof s.getSnapshotBeforeUpdate=="function",j=t.pendingProps!==j,be||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(j||ae!==h)&&tu(t,s,l,h),eo=!1;var se=t.memoizedState;s.state=se,jr(t,l,s,o),wr(),ae=t.memoizedState,j||se!==ae||eo?(typeof we=="function"&&(uo(t,n,we,l),ae=t.memoizedState),(B=eo||eu(t,n,B,l,se,ae,h))?(be||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=ae),s.props=l,s.state=ae,s.context=h,l=B):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,Zc(e,t),h=t.memoizedProps,be=Go(n,h),s.props=be,we=t.pendingProps,se=s.context,ae=n.contextType,B=Co,typeof ae=="object"&&ae!==null&&(B=mn(ae)),j=n.getDerivedStateFromProps,(ae=typeof j=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(h!==we||se!==B)&&tu(t,s,l,B),eo=!1,se=t.memoizedState,s.state=se,jr(t,l,s,o),wr();var ue=t.memoizedState;h!==we||se!==ue||eo||e!==null&&e.dependencies!==null&&Zr(e.dependencies)?(typeof j=="function"&&(uo(t,n,j,l),ue=t.memoizedState),(be=eo||eu(t,n,be,l,se,ue,B)||e!==null&&e.dependencies!==null&&Zr(e.dependencies))?(ae||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,ue,B),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,ue,B)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&se===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&se===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ue),s.props=l,s.state=ue,s.context=B,l=be):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&se===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&se===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,ve(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=ji(t,e.child,null,o),t.child=ji(t,null,n,o)):Z(e,t,n,o),t.memoizedState=s.state,e=t.child):e=Me(e,t,o),e}function U(e,t,n,l){return Nl(),t.flags|=256,Z(e,t,n,l),t.child}var he={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function re(e){return{baseLanes:e,cachePool:Gc()}}function Ne(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Vl),e}function Ee(e,t,n){var l=t.pendingProps,o=!1,s=(t.flags&128)!==0,h;if((h=s)||(h=e!==null&&e.memoizedState===null?!1:(ln.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Rt){if(o?dl(t):Pl(),(e=pn)?(e=Wp(e,sl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Al!==null?{id:Wn,overflow:di}:null,retryLane:536870912,hydrationErrors:null},n=zo(e),n.return=t,t.child=n,Ge=t,pn=null)):e=null,e===null)throw Yi(t);return ff(e)?t.lanes=32:t.lanes=536870912,null}var j=l.children;return l=l.fallback,o?(Pl(),o=t.mode,j=Ye({mode:"hidden",children:j},o),l=al(l,o,n,null),j.return=t,l.return=t,j.sibling=l,t.child=j,l=t.child,l.memoizedState=re(n),l.childLanes=Ne(e,h,n),t.memoizedState=he,oe(null,l)):(dl(t),Qe(t,j))}var B=e.memoizedState;if(B!==null&&(j=B.dehydrated,j!==null)){if(s)t.flags&256?(dl(t),t.flags&=-257,t=rt(e,t,n)):t.memoizedState!==null?(Pl(),t.child=e.child,t.flags|=128,t=null):(Pl(),j=l.fallback,o=t.mode,l=Ye({mode:"visible",children:l.children},o),j=al(j,o,n,null),j.flags|=2,l.return=t,j.return=t,l.sibling=j,t.child=l,ji(t,e.child,null,n),l=t.child,l.memoizedState=re(n),l.childLanes=Ne(e,h,n),t.memoizedState=he,t=oe(null,l));else if(dl(t),ff(j)){if(h=j.nextSibling&&j.nextSibling.dataset,h)var ae=h.dgst;h=ae,l=Error(d(419)),l.stack="",l.digest=h,xr({value:l,source:null,stack:null}),t=rt(e,t,n)}else if(H||Ul(e,t,n,!1),h=(n&e.childLanes)!==0,H||h){if(h=hn,h!==null&&(l=jt(h,n),l!==0&&l!==B.retryLane))throw B.retryLane=l,na(e,l),xl(h,e,l),M;uf(j)||cu(),t=rt(e,t,n)}else uf(j)?(t.flags|=192,t.child=e.child,t=null):(e=B.treeContext,pn=ua(j.nextSibling),Ge=t,Rt=!0,Ka=null,sl=!1,e!==null&&ft(t,e),t=Qe(t,l.children),t.flags|=4096);return t}return o?(Pl(),j=l.fallback,o=t.mode,B=e.child,ae=B.sibling,l=ll(B,{mode:"hidden",children:l.children}),l.subtreeFlags=B.subtreeFlags&65011712,ae!==null?j=ll(ae,j):(j=al(j,o,n,null),j.flags|=2),j.return=t,l.return=t,l.sibling=j,t.child=l,oe(null,l),l=t.child,j=e.child.memoizedState,j===null?j=re(n):(o=j.cachePool,o!==null?(B=kn._currentValue,o=o.parent!==B?{parent:B,pool:B}:o):o=Gc(),j={baseLanes:j.baseLanes|n,cachePool:o}),l.memoizedState=j,l.childLanes=Ne(e,h,n),t.memoizedState=he,oe(e.child,l)):(dl(t),n=e.child,e=n.sibling,n=ll(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function Qe(e,t){return t=Ye({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ye(e,t){return e=ri(22,e,null,t),e.lanes=0,e}function rt(e,t,n){return ji(t,e.child,null,n),e=Qe(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function et(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ro(e.return,t,n)}function yt(e,t,n,l,o,s){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:s}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=n,h.tailMode=o,h.treeForkCount=s)}function tt(e,t,n){var l=t.pendingProps,o=l.revealOrder,s=l.tail;l=l.children;var h=ln.current,j=(h&2)!==0;if(j?(h=h&1|2,t.flags|=128):h&=1,_(ln,h),Z(e,t,l,n),l=Rt?ol:0,!j&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&et(e,n,t);else if(e.tag===19)et(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&lo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),yt(t,!1,o,n,s,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&lo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}yt(t,!0,n,null,s,l);break;case"together":yt(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Me(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Us|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ul(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,n=ll(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ll(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function at(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Zr(e)))}function en(e,t,n){switch(t.tag){case 3:gn(t,t.stateNode.containerInfo),Ml(t,kn,e.memoizedState.cache),Nl();break;case 27:case 5:ki(t);break;case 4:gn(t,t.stateNode.containerInfo);break;case 10:Ml(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Eo(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(dl(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Ee(e,t,n):(dl(t),e=Me(e,t,n),e!==null?e.sibling:null);dl(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Ul(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return tt(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),_(ln,ln.current),l)break;return null;case 22:return t.lanes=0,K(e,t,n,t.pendingProps);case 24:Ml(t,kn,e.memoizedState.cache)}return Me(e,t,n)}function tn(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)H=!0;else{if(!at(e,n)&&(t.flags&128)===0)return H=!1,en(e,t,n);H=(e.flags&131072)!==0}else H=!1,Rt&&(t.flags&1048576)!==0&&Za(t,ol,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=ka(t.elementType),t.type=e,typeof e=="function")ia(e)?(l=Go(e,l),t.tag=1,t=L(null,t,e,l,n)):(t.tag=0,t=He(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===Be){t.tag=11,t=ge(null,t,e,l,n);break e}else if(o===A){t.tag=14,t=q(null,t,e,l,n);break e}}throw t=ke(e)||e,Error(d(306,t,""))}}return t;case 0:return He(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=Go(l,t.pendingProps),L(e,t,l,o,n);case 3:e:{if(gn(t,t.stateNode.containerInfo),e===null)throw Error(d(387));l=t.pendingProps;var s=t.memoizedState;o=s.element,Zc(e,t),jr(t,l,null,n);var h=t.memoizedState;if(l=h.cache,Ml(t,kn,l),l!==s.cache&&Do(t,[kn],n,!0),wr(),l=h.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=U(e,t,l,n);break e}else if(l!==o){o=zn(Error(d(424)),t),xr(o),t=U(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(pn=ua(e.firstChild),Ge=t,Rt=!0,Ka=null,sl=!0,n=Vd(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Nl(),l===o){t=Me(e,t,n);break e}Z(e,t,l,n)}t=t.child}return t;case 26:return ve(e,t),e===null?(n=Gp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Rt||(n=t.type,e=t.pendingProps,l=xu(Ke.current).createElement(n),l[dt]=t,l[On]=e,zi(l,n,e),Mt(l),t.stateNode=l):t.memoizedState=Gp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ki(t),e===null&&Rt&&(l=t.stateNode=Lp(t.type,t.pendingProps,Ke.current),Ge=t,sl=!0,o=pn,Hs(t.type)?(pf=o,pn=ua(l.firstChild)):pn=o),Z(e,t,t.pendingProps.children,n),ve(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Rt&&((o=l=pn)&&(l=rg(l,t.type,t.pendingProps,sl),l!==null?(t.stateNode=l,Ge=t,pn=ua(l.firstChild),sl=!1,o=!0):o=!1),o||Yi(t)),ki(t),o=t.type,s=t.pendingProps,h=e!==null?e.memoizedProps:null,l=s.children,rf(o,s)?l=null:h!==null&&rf(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=ed(e,t,Fd,null,null,n),Td._currentValue=o),ve(e,t),Z(e,t,l,n),t.child;case 6:return e===null&&Rt&&((e=n=pn)&&(n=cg(n,t.pendingProps,sl),n!==null?(t.stateNode=n,Ge=t,pn=null,e=!0):e=!1),e||Yi(t)),null;case 13:return Ee(e,t,n);case 4:return gn(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ji(t,null,l,n):Z(e,t,l,n),t.child;case 11:return ge(e,t,t.type,t.pendingProps,n);case 7:return Z(e,t,t.pendingProps,n),t.child;case 8:return Z(e,t,t.pendingProps.children,n),t.child;case 12:return Z(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,Ml(t,t.type,l.value),Z(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,aa(t),o=mn(o),l=l(o),t.flags|=1,Z(e,t,l,n),t.child;case 14:return q(e,t,t.type,t.pendingProps,n);case 15:return ie(e,t,t.type,t.pendingProps,n);case 19:return tt(e,t,n);case 31:return Re(e,t,n);case 22:return K(e,t,n,t.pendingProps);case 24:return aa(t),l=mn(kn),e===null?(o=Kr(),o===null&&(o=hn,s=_i(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:l,cache:o},qc(t),Ml(t,kn,o)):((e.lanes&n)!==0&&(Zc(e,t),jr(t,null,null,n),wr()),o=e.memoizedState,s=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ml(t,kn,l)):(l=s.cache,Ml(t,kn,l),l!==o.cache&&Do(t,[kn],n,!0))),Z(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function Et(e){e.flags|=4}function Sn(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(dp())e.flags|=8192;else throw Ra=Po,Bo}else e.flags&=-16777217}function wn(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jp(t))if(dp())e.flags|=8192;else throw Ra=Po,Bo}function pt(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ni():536870912,e.lanes|=t,Sc|=t)}function Zi(e,t){if(!Rt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function ul(e,t,n){var l=t.pendingProps;switch(Qa(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return Ft(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Xi(kn),We(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(vs(t)?Et(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Yc())),Ft(t),null;case 26:var o=t.type,s=t.memoizedState;return e===null?(Et(t),s!==null?(Ft(t),wn(t,s)):(Ft(t),Sn(t,o,null,l,n))):s?s!==e.memoizedState?(Et(t),Ft(t),wn(t,s)):(Ft(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&Et(t),Ft(t),Sn(t,o,e,l,n)),null;case 27:if(Nn(t),n=Ke.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Et(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ft(t),null}e=$.current,vs(t)?hr(t):(e=Lp(o,l,n),t.stateNode=e,Et(t))}return Ft(t),null;case 5:if(Nn(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Et(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return Ft(t),null}if(s=$.current,vs(t))hr(t);else{var h=xu(Ke.current);switch(s){case 1:s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=h.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?h.createElement(o,{is:l.is}):h.createElement(o)}}s[dt]=t,s[On]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=s;e:switch(zi(s,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Et(t)}}return Ft(t),Sn(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Et(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(e=Ke.current,vs(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=Ge,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[dt]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Bp(e.nodeValue,n)),e||Yi(t,!0)}else e=xu(e).createTextNode(l),e[dt]=t,t.stateNode=e}return Ft(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=vs(t),n!==null){if(e===null){if(!l)throw Error(d(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[dt]=t}else Nl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ft(t),e=!1}else n=Yc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(ui(t),t):(ui(t),null);if((t.flags&128)!==0)throw Error(d(558))}return Ft(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=vs(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(d(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(d(317));o[dt]=t}else Nl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ft(t),o=!1}else o=Yc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(ui(t),t):(ui(t),null)}return ui(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),pt(t,t.updateQueue),Ft(t),null);case 4:return We(),e===null&&nf(t.stateNode.containerInfo),Ft(t),null;case 10:return Xi(t.type),Ft(t),null;case 19:if(N(ln),l=t.memoizedState,l===null)return Ft(t),null;if(o=(t.flags&128)!==0,s=l.rendering,s===null)if(o)Zi(l,!1);else{if(Hn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=lo(e),s!==null){for(t.flags|=128,Zi(l,!1),e=s.updateQueue,t.updateQueue=e,pt(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Sa(n,e),n=n.sibling;return _(ln,ln.current&1|2),Rt&&Yn(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&ot()>ou&&(t.flags|=128,o=!0,Zi(l,!1),t.lanes=4194304)}else{if(!o)if(e=lo(s),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,pt(t,e),Zi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!Rt)return Ft(t),null}else 2*ot()-l.renderingStartTime>ou&&n!==536870912&&(t.flags|=128,o=!0,Zi(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ot(),e.sibling=null,n=ln.current,_(ln,o?n&1|2:n&1),Rt&&Yn(t,l.treeForkCount),e):(Ft(t),null);case 22:case 23:return ui(t),io(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),n=t.updateQueue,n!==null&&pt(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&N(za),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Xi(kn),Ft(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function Bh(e,t){switch(Qa(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xi(kn),We(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Nn(t),null;case 31:if(t.memoizedState!==null){if(ui(t),t.alternate===null)throw Error(d(340));Nl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ui(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));Nl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return N(ln),null;case 4:return We(),null;case 10:return Xi(t.type),null;case 22:case 23:return ui(t),io(),e!==null&&N(za),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Xi(kn),null;case 25:return null;default:return null}}function Ef(e,t){switch(Qa(t),t.tag){case 3:Xi(kn),We();break;case 26:case 27:case 5:Nn(t);break;case 4:We();break;case 31:t.memoizedState!==null&&ui(t);break;case 13:ui(t);break;case 19:N(ln);break;case 10:Xi(t.type);break;case 22:case 23:ui(t),io(),e!==null&&N(za);break;case 24:Xi(kn)}}function ud(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var s=n.create,h=n.inst;l=s(),h.destroy=l}n=n.next}while(n!==o)}}catch(j){dn(t,t.return,j)}}function Ns(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var s=o.next;l=s;do{if((l.tag&e)===e){var h=l.inst,j=h.destroy;if(j!==void 0){h.destroy=void 0,o=t;var B=n,ae=j;try{ae()}catch(be){dn(o,B,be)}}}l=l.next}while(l!==s)}}catch(be){dn(t,t.return,be)}}function Vf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Wd(t,n)}catch(l){dn(e,e.return,l)}}}function If(e,t,n){n.props=Go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){dn(e,t,l)}}function fd(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){dn(e,t,o)}}function fo(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){dn(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){dn(e,t,o)}else n.current=null}function Wf(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){dn(e,e.return,o)}}function Pu(e,t,n){try{var l=e.stateNode;ng(l,e.type,n,t),l[On]=t}catch(o){dn(e,e.return,o)}}function Ff(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hs(e.type)||e.tag===4}function Ou(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ff(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _u(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=mt));else if(l!==4&&(l===27&&Hs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(_u(e,t,n),e=e.sibling;e!==null;)_u(e,t,n),e=e.sibling}function nu(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&Hs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(nu(e,t,n),e=e.sibling;e!==null;)nu(e,t,n),e=e.sibling}function $f(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);zi(t,l,n),t[dt]=e,t[On]=n}catch(s){dn(e,e.return,s)}}var qo=!1,Xn=!1,Hu=!1,Lf=typeof WeakSet=="function"?WeakSet:Set,pi=null;function Ph(e,t){if(e=e.containerInfo,of=ju,e=Xr(e),Gr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var h=0,j=-1,B=-1,ae=0,be=0,we=e,se=null;t:for(;;){for(var ue;we!==n||o!==0&&we.nodeType!==3||(j=h+o),we!==s||l!==0&&we.nodeType!==3||(B=h+l),we.nodeType===3&&(h+=we.nodeValue.length),(ue=we.firstChild)!==null;)se=we,we=ue;for(;;){if(we===e)break t;if(se===n&&++ae===o&&(j=h),se===s&&++be===l&&(B=h),(ue=we.nextSibling)!==null)break;we=se,se=we.parentNode}we=ue}n=j===-1||B===-1?null:{start:j,end:B}}else n=null}n=n||{start:0,end:0}}else n=null;for(sf={focusedElem:e,selectionRange:n},ju=!1,pi=t;pi!==null;)if(t=pi,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pi=e;else for(;pi!==null;){switch(t=pi,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,o=s.memoizedProps,s=s.memoizedState,l=n.stateNode;try{var Xe=Go(n.type,o);e=l.getSnapshotBeforeUpdate(Xe,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(ut){dn(n,n.return,ut)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)df(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":df(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=t.sibling,e!==null){e.return=t.return,pi=e;break}pi=t.return}}function Yf(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Qo(e,n),l&4&&ud(5,n);break;case 1:if(Qo(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){dn(n,n.return,h)}else{var o=Go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){dn(n,n.return,h)}}l&64&&Vf(n),l&512&&fd(n,n.return);break;case 3:if(Qo(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Wd(e,t)}catch(h){dn(n,n.return,h)}}break;case 27:t===null&&l&4&&$f(n);case 26:case 5:Qo(e,n),t===null&&l&4&&Wf(n),l&512&&fd(n,n.return);break;case 12:Qo(e,n);break;case 31:Qo(e,n),l&4&&qf(e,n);break;case 13:Qo(e,n),l&4&&Zf(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=$h.bind(null,n),dg(e,n))));break;case 22:if(l=n.memoizedState!==null||qo,!l){t=t!==null&&t.memoizedState!==null||Xn,o=qo;var s=Xn;qo=l,(Xn=t)&&!s?Ko(e,n,(n.subtreeFlags&8772)!==0):Qo(e,n),qo=o,Xn=s}break;case 30:break;default:Qo(e,n)}}function Xf(e){var t=e.alternate;t!==null&&(e.alternate=null,Xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&xa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dn=null,fl=!1;function Zo(e,t,n){for(n=n.child;n!==null;)Gf(e,t,n),n=n.sibling}function Gf(e,t,n){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Di,n)}catch{}switch(n.tag){case 26:Xn||fo(n,t),Zo(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Xn||fo(n,t);var l=Dn,o=fl;Hs(n.type)&&(Dn=n.stateNode,fl=!1),Zo(e,t,n),Sd(n.stateNode),Dn=l,fl=o;break;case 5:Xn||fo(n,t);case 6:if(l=Dn,o=fl,Dn=null,Zo(e,t,n),Dn=l,fl=o,Dn!==null)if(fl)try{(Dn.nodeType===9?Dn.body:Dn.nodeName==="HTML"?Dn.ownerDocument.body:Dn).removeChild(n.stateNode)}catch(s){dn(n,t,s)}else try{Dn.removeChild(n.stateNode)}catch(s){dn(n,t,s)}break;case 18:Dn!==null&&(fl?(e=Dn,Vp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Dc(e)):Vp(Dn,n.stateNode));break;case 4:l=Dn,o=fl,Dn=n.stateNode.containerInfo,fl=!0,Zo(e,t,n),Dn=l,fl=o;break;case 0:case 11:case 14:case 15:Ns(2,n,t),Xn||Ns(4,n,t),Zo(e,t,n);break;case 1:Xn||(fo(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&If(n,t,l)),Zo(e,t,n);break;case 21:Zo(e,t,n);break;case 22:Xn=(l=Xn)||n.memoizedState!==null,Zo(e,t,n),Xn=l;break;default:Zo(e,t,n)}}function qf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Dc(e)}catch(n){dn(t,t.return,n)}}}function Zf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Dc(e)}catch(n){dn(t,t.return,n)}}function Oh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Lf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Lf),t;default:throw Error(d(435,e.tag))}}function iu(e,t){var n=Oh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=Lh.bind(null,e,l);l.then(o,o)}})}function pl(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],s=e,h=t,j=h;e:for(;j!==null;){switch(j.tag){case 27:if(Hs(j.type)){Dn=j.stateNode,fl=!1;break e}break;case 5:Dn=j.stateNode,fl=!1;break e;case 3:case 4:Dn=j.stateNode.containerInfo,fl=!0;break e}j=j.return}if(Dn===null)throw Error(d(160));Gf(s,h,o),Dn=null,fl=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Qf(t,e),t=t.sibling}var Ma=null;function Qf(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pl(t,e),hl(e),l&4&&(Ns(3,e,e.return),ud(3,e),Ns(5,e,e.return));break;case 1:pl(t,e),hl(e),l&512&&(Xn||n===null||fo(n,n.return)),l&64&&qo&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=Ma;if(pl(t,e),hl(e),l&512&&(Xn||n===null||fo(n,n.return)),l&4){var s=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":s=o.getElementsByTagName("title")[0],(!s||s[Ll]||s[dt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(l),o.head.insertBefore(s,o.querySelector("head > title"))),zi(s,l,n),s[dt]=e,Mt(s),l=s;break e;case"link":var h=Qp("link","href",o).get(l+(n.href||""));if(h){for(var j=0;j<h.length;j++)if(s=h[j],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(j,1);break t}}s=o.createElement(l),zi(s,l,n),o.head.appendChild(s);break;case"meta":if(h=Qp("meta","content",o).get(l+(n.content||""))){for(j=0;j<h.length;j++)if(s=h[j],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(j,1);break t}}s=o.createElement(l),zi(s,l,n),o.head.appendChild(s);break;default:throw Error(d(468,l))}s[dt]=e,Mt(s),l=s}e.stateNode=l}else Kp(o,e.type,e.stateNode);else e.stateNode=Zp(o,l,e.memoizedProps);else s!==l?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,l===null?Kp(o,e.type,e.stateNode):Zp(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Pu(e,e.memoizedProps,n.memoizedProps)}break;case 27:pl(t,e),hl(e),l&512&&(Xn||n===null||fo(n,n.return)),n!==null&&l&4&&Pu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(pl(t,e),hl(e),l&512&&(Xn||n===null||fo(n,n.return)),e.flags&32){o=e.stateNode;try{ht(o,"")}catch(Xe){dn(e,e.return,Xe)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,Pu(e,o,n!==null?n.memoizedProps:o)),l&1024&&(Hu=!0);break;case 6:if(pl(t,e),hl(e),l&4){if(e.stateNode===null)throw Error(d(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(Xe){dn(e,e.return,Xe)}}break;case 3:if(vu=null,o=Ma,Ma=yu(t.containerInfo),pl(t,e),Ma=o,hl(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{Dc(t.containerInfo)}catch(Xe){dn(e,e.return,Xe)}Hu&&(Hu=!1,Kf(e));break;case 4:l=Ma,Ma=yu(e.stateNode.containerInfo),pl(t,e),hl(e),Ma=l;break;case 12:pl(t,e),hl(e);break;case 31:pl(t,e),hl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,iu(e,l)));break;case 13:pl(t,e),hl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(au=ot()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,iu(e,l)));break;case 22:o=e.memoizedState!==null;var B=n!==null&&n.memoizedState!==null,ae=qo,be=Xn;if(qo=ae||o,Xn=be||B,pl(t,e),Xn=be,qo=ae,hl(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||B||qo||Xn||_r(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){B=n=t;try{if(s=B.stateNode,o)h=s.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{j=B.stateNode;var we=B.memoizedProps.style,se=we!=null&&we.hasOwnProperty("display")?we.display:null;j.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Xe){dn(B,B.return,Xe)}}}else if(t.tag===6){if(n===null){B=t;try{B.stateNode.nodeValue=o?"":B.memoizedProps}catch(Xe){dn(B,B.return,Xe)}}}else if(t.tag===18){if(n===null){B=t;try{var ue=B.stateNode;o?Ip(ue,!0):Ip(B.stateNode,!1)}catch(Xe){dn(B,B.return,Xe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,iu(e,n))));break;case 19:pl(t,e),hl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,iu(e,l)));break;case 30:break;case 21:break;default:pl(t,e),hl(e)}}function hl(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Ff(l)){n=l;break}l=l.return}if(n==null)throw Error(d(160));switch(n.tag){case 27:var o=n.stateNode,s=Ou(e);nu(e,s,o);break;case 5:var h=n.stateNode;n.flags&32&&(ht(h,""),n.flags&=-33);var j=Ou(e);nu(e,j,h);break;case 3:case 4:var B=n.stateNode.containerInfo,ae=Ou(e);_u(e,ae,B);break;default:throw Error(d(161))}}catch(be){dn(e,e.return,be)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Kf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Qo(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Yf(e,t.alternate,t),t=t.sibling}function _r(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ns(4,t,t.return),_r(t);break;case 1:fo(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&If(t,t.return,n),_r(t);break;case 27:Sd(t.stateNode);case 26:case 5:fo(t,t.return),_r(t);break;case 22:t.memoizedState===null&&_r(t);break;case 30:_r(t);break;default:_r(t)}e=e.sibling}}function Ko(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,s=t,h=s.flags;switch(s.tag){case 0:case 11:case 15:Ko(o,s,n),ud(4,s);break;case 1:if(Ko(o,s,n),l=s,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(ae){dn(l,l.return,ae)}if(l=s,o=l.updateQueue,o!==null){var j=l.stateNode;try{var B=o.shared.hiddenCallbacks;if(B!==null)for(o.shared.hiddenCallbacks=null,o=0;o<B.length;o++)Id(B[o],j)}catch(ae){dn(l,l.return,ae)}}n&&h&64&&Vf(s),fd(s,s.return);break;case 27:$f(s);case 26:case 5:Ko(o,s,n),n&&l===null&&h&4&&Wf(s),fd(s,s.return);break;case 12:Ko(o,s,n);break;case 31:Ko(o,s,n),n&&h&4&&qf(o,s);break;case 13:Ko(o,s,n),n&&h&4&&Zf(o,s);break;case 22:s.memoizedState===null&&Ko(o,s,n),fd(s,s.return);break;case 30:break;default:Ko(o,s,n)}t=t.sibling}}function Eu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ja(n))}function Vu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ja(e))}function Ua(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jf(e,t,n,l),t=t.sibling}function Jf(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Ua(e,t,n,l),o&2048&&ud(9,t);break;case 1:Ua(e,t,n,l);break;case 3:Ua(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ja(e)));break;case 12:if(o&2048){Ua(e,t,n,l),e=t.stateNode;try{var s=t.memoizedProps,h=s.id,j=s.onPostCommit;typeof j=="function"&&j(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){dn(t,t.return,B)}}else Ua(e,t,n,l);break;case 31:Ua(e,t,n,l);break;case 13:Ua(e,t,n,l);break;case 23:break;case 22:s=t.stateNode,h=t.alternate,t.memoizedState!==null?s._visibility&2?Ua(e,t,n,l):pd(e,t):s._visibility&2?Ua(e,t,n,l):(s._visibility|=2,bc(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&Eu(h,t);break;case 24:Ua(e,t,n,l),o&2048&&Vu(t.alternate,t);break;default:Ua(e,t,n,l)}}function bc(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,h=t,j=n,B=l,ae=h.flags;switch(h.tag){case 0:case 11:case 15:bc(s,h,j,B,o),ud(8,h);break;case 23:break;case 22:var be=h.stateNode;h.memoizedState!==null?be._visibility&2?bc(s,h,j,B,o):pd(s,h):(be._visibility|=2,bc(s,h,j,B,o)),o&&ae&2048&&Eu(h.alternate,h);break;case 24:bc(s,h,j,B,o),o&&ae&2048&&Vu(h.alternate,h);break;default:bc(s,h,j,B,o)}t=t.sibling}}function pd(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:pd(n,l),o&2048&&Eu(l.alternate,l);break;case 24:pd(n,l),o&2048&&Vu(l.alternate,l);break;default:pd(n,l)}t=t.sibling}}var hd=8192;function vc(e,t,n){if(e.subtreeFlags&hd)for(e=e.child;e!==null;)ep(e,t,n),e=e.sibling}function ep(e,t,n){switch(e.tag){case 26:vc(e,t,n),e.flags&hd&&e.memoizedState!==null&&wg(n,Ma,e.memoizedState,e.memoizedProps);break;case 5:vc(e,t,n);break;case 3:case 4:var l=Ma;Ma=yu(e.stateNode.containerInfo),vc(e,t,n),Ma=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=hd,hd=16777216,vc(e,t,n),hd=l):vc(e,t,n));break;default:vc(e,t,n)}}function tp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function gd(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];pi=l,ip(l,e)}tp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)np(e),e=e.sibling}function np(e){switch(e.tag){case 0:case 11:case 15:gd(e),e.flags&2048&&Ns(9,e,e.return);break;case 3:gd(e);break;case 12:gd(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,lu(e)):gd(e);break;default:gd(e)}}function lu(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];pi=l,ip(l,e)}tp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ns(8,t,t.return),lu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,lu(t));break;default:lu(t)}e=e.sibling}}function ip(e,t){for(;pi!==null;){var n=pi;switch(n.tag){case 0:case 11:case 15:Ns(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ja(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,pi=l;else e:for(n=e;pi!==null;){l=pi;var o=l.sibling,s=l.return;if(Xf(l),l===n){pi=null;break e}if(o!==null){o.return=s,pi=o;break e}pi=s}}}var _h={getCacheForType:function(e){var t=mn(kn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return mn(kn).controller.signal}},Hh=typeof WeakMap=="function"?WeakMap:Map,nn=0,hn=null,Ut=null,Vt=0,cn=0,El=null,Ms=!1,mc=!1,Iu=!1,Jo=0,Hn=0,Us=0,Hr=0,Wu=0,Vl=0,Sc=0,xd=null,gl=null,Fu=!1,au=0,lp=0,ou=1/0,su=null,Bs=null,ni=0,Ps=null,wc=null,es=0,$u=0,Lu=null,ap=null,yd=0,Yu=null;function Il(){return(nn&2)!==0&&Vt!==0?Vt&-Vt:I.T!==null?Ku():Xs()}function op(){if(Vl===0)if((Vt&536870912)===0||Rt){var e=ns;ns<<=1,(ns&3932160)===0&&(ns=262144),Vl=e}else Vl=536870912;return e=Ti.current,e!==null&&(e.flags|=32),Vl}function xl(e,t,n){(e===hn&&(cn===2||cn===9)||e.cancelPendingCommit!==null)&&(jc(e,0),Os(e,Vt,Vl,!1)),ga(e,n),((nn&2)===0||e!==hn)&&(e===hn&&((nn&2)===0&&(Hr|=n),Hn===4&&Os(e,Vt,Vl,!1)),po(e))}function sp(e,t,n){if((nn&6)!==0)throw Error(d(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Ai(e,t),o=l?Ih(e,t):Gu(e,t,!0),s=l;do{if(o===0){mc&&!l&&Os(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Eh(n)){o=Gu(e,t,!1),s=!1;continue}if(o===2){if(s=t,e.errorRecoveryDisabledLanes&s)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var j=e;o=xd;var B=j.current.memoizedState.isDehydrated;if(B&&(jc(j,h).flags|=256),h=Gu(j,h,!1),h!==2){if(Iu&&!B){j.errorRecoveryDisabledLanes|=s,Hr|=s,o=4;break e}s=gl,gl=o,s!==null&&(gl===null?gl=s:gl.push.apply(gl,s))}o=h}if(s=!1,o!==2)continue}}if(o===1){jc(e,0),Os(e,t,0,!0);break}e:{switch(l=e,s=o,s){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:Os(l,t,Vl,!Ms);break e;case 2:gl=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(o=au+300-ot(),10<o)){if(Os(l,t,Vl,!Ms),$l(l,0,!0)!==0)break e;es=t,l.timeoutHandle=Hp(rp.bind(null,l,n,gl,su,Fu,t,Vl,Hr,Sc,Ms,s,"Throttled",-0,0),o);break e}rp(l,n,gl,su,Fu,t,Vl,Hr,Sc,Ms,s,null,-0,0)}}break}while(!0);po(e)}function rp(e,t,n,l,o,s,h,j,B,ae,be,we,se,ue){if(e.timeoutHandle=-1,we=t.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mt},ep(t,s,we);var Xe=(s&62914560)===s?au-ot():(s&4194048)===s?lp-ot():0;if(Xe=jg(we,Xe),Xe!==null){es=s,e.cancelPendingCommit=Xe(xp.bind(null,e,t,s,n,l,o,h,j,B,be,we,null,se,ue)),Os(e,s,h,!ae);return}}xp(e,t,s,n,l,o,h,j,B)}function Eh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],s=o.getSnapshot;o=o.value;try{if(!Vn(s(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Os(e,t,n,l){t&=~Wu,t&=~Hr,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var s=31-Je(o),h=1<<s;l[s]=-1,o&=~h}n!==0&&Ve(e,n,t)}function ru(){return(nn&6)===0?(bd(0),!1):!0}function Xu(){if(Ut!==null){if(cn===0)var e=Ut.return;else e=Ut,Oi=rl=null,ca(e),Cs=null,_o=0,e=Ut;for(;e!==null;)Ef(e.alternate,e),e=e.return;Ut=null}}function jc(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,ag(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),es=0,Xu(),hn=e,Ut=n=ll(e.current,null),Vt=t,cn=0,El=null,Ms=!1,mc=Ai(e,t),Iu=!1,Sc=Vl=Wu=Hr=Us=Hn=0,gl=xd=null,Fu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-Je(l),s=1<<o;t|=e[o],l&=~s}return Jo=t,dr(),n}function cp(e,t){it=null,I.H=Xo,t===oa||t===js?(t=mr(),cn=3):t===Bo?(t=mr(),cn=4):cn=t===M?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,El=t,Ut===null&&(Hn=1,m(e,zn(t,e.current)))}function dp(){var e=Ti.current;return e===null?!0:(Vt&4194048)===Vt?ei===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?e===ei:!1}function up(){var e=I.H;return I.H=Xo,e===null?Xo:e}function fp(){var e=I.A;return I.A=_h,e}function cu(){Hn=4,Ms||(Vt&4194048)!==Vt&&Ti.current!==null||(mc=!0),(Us&134217727)===0&&(Hr&134217727)===0||hn===null||Os(hn,Vt,Vl,!1)}function Gu(e,t,n){var l=nn;nn|=2;var o=up(),s=fp();(hn!==e||Vt!==t)&&(su=null,jc(e,t)),t=!1;var h=Hn;e:do try{if(cn!==0&&Ut!==null){var j=Ut,B=El;switch(cn){case 8:Xu(),h=6;break e;case 3:case 2:case 9:case 6:Ti.current===null&&(t=!0);var ae=cn;if(cn=0,El=null,Tc(e,j,B,ae),n&&mc){h=0;break e}break;default:ae=cn,cn=0,El=null,Tc(e,j,B,ae)}}Vh(),h=Hn;break}catch(be){cp(e,be)}while(!0);return t&&e.shellSuspendCounter++,Oi=rl=null,nn=l,I.H=o,I.A=s,Ut===null&&(hn=null,Vt=0,dr()),h}function Vh(){for(;Ut!==null;)pp(Ut)}function Ih(e,t){var n=nn;nn|=2;var l=up(),o=fp();hn!==e||Vt!==t?(su=null,ou=ot()+500,jc(e,t)):mc=Ai(e,t);e:do try{if(cn!==0&&Ut!==null){t=Ut;var s=El;t:switch(cn){case 1:cn=0,El=null,Tc(e,t,s,1);break;case 2:case 9:if(Oo(s)){cn=0,El=null,hp(t);break}t=function(){cn!==2&&cn!==9||hn!==e||(cn=7),po(e)},s.then(t,t);break e;case 3:cn=7;break e;case 4:cn=5;break e;case 7:Oo(s)?(cn=0,El=null,hp(t)):(cn=0,El=null,Tc(e,t,s,7));break;case 5:var h=null;switch(Ut.tag){case 26:h=Ut.memoizedState;case 5:case 27:var j=Ut;if(h?Jp(h):j.stateNode.complete){cn=0,El=null;var B=j.sibling;if(B!==null)Ut=B;else{var ae=j.return;ae!==null?(Ut=ae,du(ae)):Ut=null}break t}}cn=0,El=null,Tc(e,t,s,5);break;case 6:cn=0,El=null,Tc(e,t,s,6);break;case 8:Xu(),Hn=6;break e;default:throw Error(d(462))}}Wh();break}catch(be){cp(e,be)}while(!0);return Oi=rl=null,I.H=l,I.A=o,nn=n,Ut!==null?0:(hn=null,Vt=0,dr(),Hn)}function Wh(){for(;Ut!==null&&!Mc();)pp(Ut)}function pp(e){var t=tn(e.alternate,e,Jo);e.memoizedProps=e.pendingProps,t===null?du(e):Ut=t}function hp(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fe(n,t,t.pendingProps,t.type,void 0,Vt);break;case 11:t=Fe(n,t,t.pendingProps,t.type.render,t.ref,Vt);break;case 5:ca(t);default:Ef(n,t),t=Ut=Sa(t,Jo),t=tn(n,t,Jo)}e.memoizedProps=e.pendingProps,t===null?du(e):Ut=t}function Tc(e,t,n,l){Oi=rl=null,ca(t),Cs=null,_o=0;var o=t.return;try{if(C(e,o,t,n,Vt)){Hn=1,m(e,zn(n,e.current)),Ut=null;return}}catch(s){if(o!==null)throw Ut=o,s;Hn=1,m(e,zn(n,e.current)),Ut=null;return}t.flags&32768?(Rt||l===1?e=!0:mc||(Vt&536870912)!==0?e=!1:(Ms=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ti.current,l!==null&&l.tag===13&&(l.flags|=16384))),gp(t,e)):du(t)}function du(e){var t=e;do{if((t.flags&32768)!==0){gp(t,Ms);return}e=t.return;var n=ul(t.alternate,t,Jo);if(n!==null){Ut=n;return}if(t=t.sibling,t!==null){Ut=t;return}Ut=t=e}while(t!==null);Hn===0&&(Hn=5)}function gp(e,t){do{var n=Bh(e.alternate,e);if(n!==null){n.flags&=32767,Ut=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ut=e;return}Ut=e=n}while(e!==null);Hn=6,Ut=null}function xp(e,t,n,l,o,s,h,j,B){e.cancelPendingCommit=null;do uu();while(ni!==0);if((nn&6)!==0)throw Error(d(327));if(t!==null){if(t===e.current)throw Error(d(177));if(s=t.lanes|t.childLanes,s|=$c,Bc(e,n,s,h,j,B),e===hn&&(Ut=hn=null,Vt=0),wc=t,Ps=e,es=n,$u=s,Lu=o,ap=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Yh(yl,function(){return Sp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=I.T,I.T=null,o=O.p,O.p=2,h=nn,nn|=4;try{Ph(e,t,n)}finally{nn=h,O.p=o,I.T=l}}ni=1,yp(),bp(),vp()}}function yp(){if(ni===1){ni=0;var e=Ps,t=wc,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=I.T,I.T=null;var l=O.p;O.p=2;var o=nn;nn|=4;try{Qf(t,e);var s=sf,h=Xr(e.containerInfo),j=s.focusedElem,B=s.selectionRange;if(h!==j&&j&&j.ownerDocument&&zl(j.ownerDocument.documentElement,j)){if(B!==null&&Gr(j)){var ae=B.start,be=B.end;if(be===void 0&&(be=ae),"selectionStart"in j)j.selectionStart=ae,j.selectionEnd=Math.min(be,j.value.length);else{var we=j.ownerDocument||document,se=we&&we.defaultView||window;if(se.getSelection){var ue=se.getSelection(),Xe=j.textContent.length,ut=Math.min(B.start,Xe),fn=B.end===void 0?ut:Math.min(B.end,Xe);!ue.extend&&ut>fn&&(h=fn,fn=ut,ut=h);var G=Jt(j,ut),F=Jt(j,fn);if(G&&F&&(ue.rangeCount!==1||ue.anchorNode!==G.node||ue.anchorOffset!==G.offset||ue.focusNode!==F.node||ue.focusOffset!==F.offset)){var le=we.createRange();le.setStart(G.node,G.offset),ue.removeAllRanges(),ut>fn?(ue.addRange(le),ue.extend(F.node,F.offset)):(le.setEnd(F.node,F.offset),ue.addRange(le))}}}}for(we=[],ue=j;ue=ue.parentNode;)ue.nodeType===1&&we.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<we.length;j++){var me=we[j];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}ju=!!of,sf=of=null}finally{nn=o,O.p=l,I.T=n}}e.current=t,ni=2}}function bp(){if(ni===2){ni=0;var e=Ps,t=wc,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=I.T,I.T=null;var l=O.p;O.p=2;var o=nn;nn|=4;try{Yf(e,t.alternate,t)}finally{nn=o,O.p=l,I.T=n}}ni=3}}function vp(){if(ni===4||ni===3){ni=0,qe();var e=Ps,t=wc,n=es,l=ap;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ni=5:(ni=0,wc=Ps=null,mp(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Bs=null),is(n),t=t.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Di,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=I.T,o=O.p,O.p=2,I.T=null;try{for(var s=e.onRecoverableError,h=0;h<l.length;h++){var j=l[h];s(j.value,{componentStack:j.stack})}}finally{I.T=t,O.p=o}}(es&3)!==0&&uu(),po(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===Yu?yd++:(yd=0,Yu=e):yd=0,bd(0)}}function mp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ja(t)))}function uu(){return yp(),bp(),vp(),Sp()}function Sp(){if(ni!==5)return!1;var e=Ps,t=$u;$u=0;var n=is(es),l=I.T,o=O.p;try{O.p=32>n?32:n,I.T=null,n=Lu,Lu=null;var s=Ps,h=es;if(ni=0,wc=Ps=null,es=0,(nn&6)!==0)throw Error(d(331));var j=nn;if(nn|=4,np(s.current),Jf(s,s.current,h,n),nn=j,bd(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Di,s)}catch{}return!0}finally{O.p=o,I.T=l,mp(e,t)}}function wp(e,t,n){t=zn(n,t),t=v(e.stateNode,t,2),e=no(e,t,2),e!==null&&(ga(e,2),po(e))}function dn(e,t,n){if(e.tag===3)wp(e,e,n);else for(;t!==null;){if(t.tag===3){wp(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Bs===null||!Bs.has(l))){e=zn(n,e),n=g(2),l=no(t,n,2),l!==null&&(w(n,l,t,e),ga(l,2),po(l));break}}t=t.return}}function qu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new Hh;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(Iu=!0,o.add(n),e=Fh.bind(null,e,t,n),t.then(e,e))}function Fh(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,hn===e&&(Vt&n)===n&&(Hn===4||Hn===3&&(Vt&62914560)===Vt&&300>ot()-au?(nn&2)===0&&jc(e,0):Wu|=n,Sc===Vt&&(Sc=0)),po(e)}function jp(e,t){t===0&&(t=Ni()),e=na(e,t),e!==null&&(ga(e,t),po(e))}function $h(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),jp(e,n)}function Lh(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),jp(e,n)}function Yh(e,t){return Ls(e,t)}var fu=null,Cc=null,Zu=!1,pu=!1,Qu=!1,_s=0;function po(e){e!==Cc&&e.next===null&&(Cc===null?fu=Cc=e:Cc=Cc.next=e),pu=!0,Zu||(Zu=!0,Gh())}function bd(e,t){if(!Qu&&pu){Qu=!0;do for(var n=!1,l=fu;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var s=0;else{var h=l.suspendedLanes,j=l.pingedLanes;s=(1<<31-Je(42|e)+1)-1,s&=o&~(h&~j),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,kp(l,s))}else s=Vt,s=$l(l,l===hn?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||Ai(l,s)||(n=!0,kp(l,s));l=l.next}while(n);Qu=!1}}function Xh(){Tp()}function Tp(){pu=Zu=!1;var e=0;_s!==0&&lg()&&(e=_s);for(var t=ot(),n=null,l=fu;l!==null;){var o=l.next,s=Cp(l,t);s===0?(l.next=null,n===null?fu=o:n.next=o,o===null&&(Cc=n)):(n=l,(e!==0||(s&3)!==0)&&(pu=!0)),l=o}ni!==0&&ni!==5||bd(e),_s!==0&&(_s=0)}function Cp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var h=31-Je(s),j=1<<h,B=o[h];B===-1?((j&n)===0||(j&l)!==0)&&(o[h]=ho(j,t)):B<=t&&(e.expiredLanes|=j),s&=~j}if(t=hn,n=Vt,n=$l(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(cn===2||cn===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Oa(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Ai(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Oa(l),is(n)){case 2:case 8:n=Pt;break;case 32:n=yl;break;case 268435456:n=Wt;break;default:n=yl}return l=zp.bind(null,e),n=Ls(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Oa(l),e.callbackPriority=2,e.callbackNode=null,2}function zp(e,t){if(ni!==0&&ni!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(uu()&&e.callbackNode!==n)return null;var l=Vt;return l=$l(e,e===hn?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(sp(e,l,t),Cp(e,ot()),e.callbackNode!=null&&e.callbackNode===n?zp.bind(null,e):null)}function kp(e,t){if(uu())return null;sp(e,t,!0)}function Gh(){og(function(){(nn&6)!==0?Ls($e,Xh):Tp()})}function Ku(){if(_s===0){var e=Ta;e===0&&(e=Fl,Fl<<=1,(Fl&261888)===0&&(Fl=256)),_s=e}return _s}function Rp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:vt(""+e)}function Dp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function qh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var s=Rp((o[On]||null).action),h=l.submitter;h&&(t=(t=h[On]||null)?Rp(t.formAction):h.getAttribute("formAction"),t!==null&&(s=t,h=null));var j=new bi("action","action",null,l,o);e.push({event:j,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(_s!==0){var B=h?Dp(o,h):new FormData(o);Lo(n,{pending:!0,data:B,method:o.method,action:s},null,B)}}else typeof s=="function"&&(j.preventDefault(),B=h?Dp(o,h):new FormData(o),Lo(n,{pending:!0,data:B,method:o.method,action:s},s,B))},currentTarget:o}]})}}for(var Ju=0;Ju<jo.length;Ju++){var ef=jo[Ju],Zh=ef.toLowerCase(),Qh=ef[0].toUpperCase()+ef.slice(1);Qn(Zh,"on"+Qh)}Qn(rr,"onAnimationEnd"),Qn(ys,"onAnimationIteration"),Qn(bs,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(Hd,"onTransitionRun"),Qn(ta,"onTransitionStart"),Qn(Si,"onTransitionCancel"),Qn(cr,"onTransitionEnd"),el("onMouseEnter",["mouseout","mouseover"]),el("onMouseLeave",["mouseout","mouseover"]),el("onPointerEnter",["pointerout","pointerover"]),el("onPointerLeave",["pointerout","pointerover"]),on("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),on("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),on("onBeforeInput",["compositionend","keypress","textInput","paste"]),on("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),on("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),on("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vd));function Ap(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var h=l.length-1;0<=h;h--){var j=l[h],B=j.instance,ae=j.currentTarget;if(j=j.listener,B!==s&&o.isPropagationStopped())break e;s=j,o.currentTarget=ae;try{s(o)}catch(be){To(be)}o.currentTarget=null,s=B}else for(h=0;h<l.length;h++){if(j=l[h],B=j.instance,ae=j.currentTarget,j=j.listener,B!==s&&o.isPropagationStopped())break e;s=j,o.currentTarget=ae;try{s(o)}catch(be){To(be)}o.currentTarget=null,s=B}}}}function Bt(e,t){var n=t[go];n===void 0&&(n=t[go]=new Set);var l=e+"__bubble";n.has(l)||(Np(t,e,2,!1),n.add(l))}function tf(e,t,n){var l=0;t&&(l|=4),Np(n,e,l,t)}var hu="_reactListening"+Math.random().toString(36).slice(2);function nf(e){if(!e[hu]){e[hu]=!0,Vr.forEach(function(n){n!=="selectionchange"&&(Kh.has(n)||tf(n,!1,e),tf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hu]||(t[hu]=!0,tf("selectionchange",!1,t))}}function Np(e,t,n,l){switch(oh(t)){case 2:var o=zg;break;case 8:o=kg;break;default:o=bf}n=o.bind(null,t,n,e),o=void 0,!Wa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function lf(e,t,n,l,o){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var j=l.stateNode.containerInfo;if(j===o)break;if(h===4)for(h=l.return;h!==null;){var B=h.tag;if((B===3||B===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;j!==null;){if(h=Ki(j),h===null)return;if(B=h.tag,B===5||B===6||B===26||B===27){l=s=h;continue e}j=j.parentNode}}l=l.return}xo(function(){var ae=s,be=Oc(n),we=[];e:{var se=Fc.get(e);if(se!==void 0){var ue=bi,Xe=e;switch(e){case"keypress":if(er(n)===0)break e;case"keydown":case"keyup":ue=fs;break;case"focusin":Xe="focus",ue=$n;break;case"focusout":Xe="blur",ue=$n;break;case"beforeblur":case"afterblur":ue=$n;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=vi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=Wr;break;case rr:case ys:case bs:ue=$i;break;case cr:ue=Ec;break;case"scroll":case"scrollend":ue=Nu;break;case"wheel":ue=$r;break;case"copy":case"cut":case"paste":ue=ba;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Pd;break;case"toggle":case"beforetoggle":ue=ps}var ut=(t&4)!==0,fn=!ut&&(e==="scroll"||e==="scrollend"),G=ut?se!==null?se+"Capture":null:se;ut=[];for(var F=ae,le;F!==null;){var me=F;if(le=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||le===null||G===null||(me=yo(F,G),me!=null&&ut.push(md(F,me,le))),fn)break;F=F.return}0<ut.length&&(se=new ue(se,Xe,null,n,be),we.push({event:se,listeners:ut}))}}if((t&7)===0){e:{if(se=e==="mouseover"||e==="pointerover",ue=e==="mouseout"||e==="pointerout",se&&n!==wt&&(Xe=n.relatedTarget||n.fromElement)&&(Ki(Xe)||Xe[$t]))break e;if((ue||se)&&(se=be.window===be?be:(se=be.ownerDocument)?se.defaultView||se.parentWindow:window,ue?(Xe=n.relatedTarget||n.toElement,ue=ae,Xe=Xe?Ki(Xe):null,Xe!==null&&(fn=P(Xe),ut=Xe.tag,Xe!==fn||ut!==5&&ut!==27&&ut!==6)&&(Xe=null)):(ue=null,Xe=ae),ue!==Xe)){if(ut=Fa,me="onMouseLeave",G="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(ut=Pd,me="onPointerLeave",G="onPointerEnter",F="pointer"),fn=ue==null?se:Sl(ue),le=Xe==null?se:Sl(Xe),se=new ut(me,F+"leave",ue,n,be),se.target=fn,se.relatedTarget=le,me=null,Ki(be)===ae&&(ut=new ut(G,F+"enter",Xe,n,be),ut.target=le,ut.relatedTarget=fn,me=ut),fn=me,ue&&Xe)t:{for(ut=Jh,G=ue,F=Xe,le=0,me=G;me;me=ut(me))le++;me=0;for(var lt=F;lt;lt=ut(lt))me++;for(;0<le-me;)G=ut(G),le--;for(;0<me-le;)F=ut(F),me--;for(;le--;){if(G===F||F!==null&&G===F.alternate){ut=G;break t}G=ut(G),F=ut(F)}ut=null}else ut=null;ue!==null&&Mp(we,se,ue,ut,!1),Xe!==null&&fn!==null&&Mp(we,fn,Xe,ut,!0)}}e:{if(se=ae?Sl(ae):window,ue=se.nodeName&&se.nodeName.toLowerCase(),ue==="select"||ue==="input"&&se.type==="file")var qt=Tl;else if(Od(se))if(va)qt=Cl;else{qt=Jl;var Ze=Ln}else ue=se.nodeName,!ue||ue.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ae&&gt(ae.elementType)&&(qt=Tl):qt=si;if(qt&&(qt=qt(e,ae))){Yr(we,qt,n,be);break e}Ze&&Ze(e,se,ae),e==="focusout"&&ae&&se.type==="number"&&ae.memoizedProps.value!=null&&En(se,"number",se.value)}switch(Ze=ae?Sl(ae):window,e){case"focusin":(Od(Ze)||Ze.contentEditable==="true")&&(Ga=Ze,xs=ae,qa=null);break;case"focusout":qa=xs=Ga=null;break;case"mousedown":So=!0;break;case"contextmenu":case"mouseup":case"dragend":So=!1,Wc(we,n,be);break;case"selectionchange":if(_d)break;case"keydown":case"keyup":Wc(we,n,be)}var Dt;if(lr)e:{switch(e){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else Kt?Qt(e,n)&&(It="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(It="onCompositionStart");It&&(Ya&&n.locale!=="ko"&&(Kt||It!=="onCompositionStart"?It==="onCompositionEnd"&&Kt&&(Dt=ss()):(Fi=be,Ks="value"in Fi?Fi.value:Fi.textContent,Kt=!0)),Ze=gu(ae,It),0<Ze.length&&(It=new qn(It,e,null,n,be),we.push({event:It,listeners:Ze}),Dt?It.data=Dt:(Dt=Xa(n),Dt!==null&&(It.data=Dt)))),(Dt=Vc?mo(e,n):Ic(e,n))&&(It=gu(ae,"onBeforeInput"),0<It.length&&(Ze=new qn("onBeforeInput","beforeinput",null,n,be),we.push({event:Ze,listeners:It}),Ze.data=Dt)),qh(we,e,ae,n,be)}Ap(we,t)})}function md(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gu(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=yo(e,n),o!=null&&l.unshift(md(e,o,s)),o=yo(e,t),o!=null&&l.push(md(e,o,s))),e.tag===3)return l;e=e.return}return[]}function Jh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Mp(e,t,n,l,o){for(var s=t._reactName,h=[];n!==null&&n!==l;){var j=n,B=j.alternate,ae=j.stateNode;if(j=j.tag,B!==null&&B===l)break;j!==5&&j!==26&&j!==27||ae===null||(B=ae,o?(ae=yo(n,s),ae!=null&&h.unshift(md(n,ae,B))):o||(ae=yo(n,s),ae!=null&&h.push(md(n,ae,B)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var eg=/\r\n?/g,tg=/\u0000|\uFFFD/g;function Up(e){return(typeof e=="string"?e:""+e).replace(eg,`
`).replace(tg,"")}function Bp(e,t){return t=Up(t),Up(e)===t}function un(e,t,n,l,o,s){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||ht(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&ht(e,""+l);break;case"className":Ia(e,"class",l);break;case"tabIndex":Ia(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ia(e,n,l);break;case"style":Qs(e,l,s);break;case"data":if(t!=="object"){Ia(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=vt(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&un(e,t,"name",o.name,o,null),un(e,t,"formEncType",o.formEncType,o,null),un(e,t,"formMethod",o.formMethod,o,null),un(e,t,"formTarget",o.formTarget,o,null)):(un(e,t,"encType",o.encType,o,null),un(e,t,"method",o.method,o,null),un(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=vt(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=mt);break;case"onScroll":l!=null&&Bt("scroll",e);break;case"onScrollEnd":l!=null&&Bt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(d(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=vt(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Bt("beforetoggle",e),Bt("toggle",e),sn(e,"popover",l);break;case"xlinkActuate":_t(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":_t(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":_t(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":_t(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":_t(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":_t(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":_t(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":_t(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":_t(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":sn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Ct.get(n)||n,sn(e,n,l))}}function af(e,t,n,l,o,s){switch(n){case"style":Qs(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(d(60));e.innerHTML=n}}break;case"children":typeof l=="string"?ht(e,l):(typeof l=="number"||typeof l=="bigint")&&ht(e,""+l);break;case"onScroll":l!=null&&Bt("scroll",e);break;case"onScrollEnd":l!=null&&Bt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=mt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ot.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),s=e[On]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,o),typeof l=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):sn(e,n,l)}}}function zi(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",e),Bt("load",e);var l=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:un(e,t,s,h,n,null)}}o&&un(e,t,"srcSet",n.srcSet,n,null),l&&un(e,t,"src",n.src,n,null);return;case"input":Bt("invalid",e);var j=s=h=o=null,B=null,ae=null;for(l in n)if(n.hasOwnProperty(l)){var be=n[l];if(be!=null)switch(l){case"name":o=be;break;case"type":h=be;break;case"checked":B=be;break;case"defaultChecked":ae=be;break;case"value":s=be;break;case"defaultValue":j=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(d(137,t));break;default:un(e,t,l,be,n,null)}}_e(e,s,j,B,ae,h,o,!1);return;case"select":Bt("invalid",e),l=h=s=null;for(o in n)if(n.hasOwnProperty(o)&&(j=n[o],j!=null))switch(o){case"value":s=j;break;case"defaultValue":h=j;break;case"multiple":l=j;default:un(e,t,o,j,n,null)}t=s,n=h,e.multiple=!!l,t!=null?Xl(e,!!l,t,!1):n!=null&&Xl(e,!!l,n,!0);return;case"textarea":Bt("invalid",e),s=o=l=null;for(h in n)if(n.hasOwnProperty(h)&&(j=n[h],j!=null))switch(h){case"value":l=j;break;case"defaultValue":o=j;break;case"children":s=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(d(91));break;default:un(e,t,h,j,n,null)}Gl(e,l,o,s);return;case"option":for(B in n)if(n.hasOwnProperty(B)&&(l=n[B],l!=null))switch(B){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:un(e,t,B,l,n,null)}return;case"dialog":Bt("beforetoggle",e),Bt("toggle",e),Bt("cancel",e),Bt("close",e);break;case"iframe":case"object":Bt("load",e);break;case"video":case"audio":for(l=0;l<vd.length;l++)Bt(vd[l],e);break;case"image":Bt("error",e),Bt("load",e);break;case"details":Bt("toggle",e);break;case"embed":case"source":case"link":Bt("error",e),Bt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in n)if(n.hasOwnProperty(ae)&&(l=n[ae],l!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:un(e,t,ae,l,n,null)}return;default:if(gt(t)){for(be in n)n.hasOwnProperty(be)&&(l=n[be],l!==void 0&&af(e,t,be,l,n,void 0));return}}for(j in n)n.hasOwnProperty(j)&&(l=n[j],l!=null&&un(e,t,j,l,n,null))}function ng(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,h=null,j=null,B=null,ae=null,be=null;for(ue in n){var we=n[ue];if(n.hasOwnProperty(ue)&&we!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":B=we;default:l.hasOwnProperty(ue)||un(e,t,ue,null,l,we)}}for(var se in l){var ue=l[se];if(we=n[se],l.hasOwnProperty(se)&&(ue!=null||we!=null))switch(se){case"type":s=ue;break;case"name":o=ue;break;case"checked":ae=ue;break;case"defaultChecked":be=ue;break;case"value":h=ue;break;case"defaultValue":j=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(d(137,t));break;default:ue!==we&&un(e,t,se,ue,l,we)}}os(e,h,j,B,ae,be,s,o);return;case"select":ue=h=j=se=null;for(s in n)if(B=n[s],n.hasOwnProperty(s)&&B!=null)switch(s){case"value":break;case"multiple":ue=B;default:l.hasOwnProperty(s)||un(e,t,s,null,l,B)}for(o in l)if(s=l[o],B=n[o],l.hasOwnProperty(o)&&(s!=null||B!=null))switch(o){case"value":se=s;break;case"defaultValue":j=s;break;case"multiple":h=s;default:s!==B&&un(e,t,o,s,l,B)}t=j,n=h,l=ue,se!=null?Xl(e,!!n,se,!1):!!l!=!!n&&(t!=null?Xl(e,!!n,t,!0):Xl(e,!!n,n?[]:"",!1));return;case"textarea":ue=se=null;for(j in n)if(o=n[j],n.hasOwnProperty(j)&&o!=null&&!l.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:un(e,t,j,null,l,o)}for(h in l)if(o=l[h],s=n[h],l.hasOwnProperty(h)&&(o!=null||s!=null))switch(h){case"value":se=o;break;case"defaultValue":ue=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(d(91));break;default:o!==s&&un(e,t,h,o,l,s)}Mn(e,se,ue);return;case"option":for(var Xe in n)if(se=n[Xe],n.hasOwnProperty(Xe)&&se!=null&&!l.hasOwnProperty(Xe))switch(Xe){case"selected":e.selected=!1;break;default:un(e,t,Xe,null,l,se)}for(B in l)if(se=l[B],ue=n[B],l.hasOwnProperty(B)&&se!==ue&&(se!=null||ue!=null))switch(B){case"selected":e.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:un(e,t,B,se,l,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in n)se=n[ut],n.hasOwnProperty(ut)&&se!=null&&!l.hasOwnProperty(ut)&&un(e,t,ut,null,l,se);for(ae in l)if(se=l[ae],ue=n[ae],l.hasOwnProperty(ae)&&se!==ue&&(se!=null||ue!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(d(137,t));break;default:un(e,t,ae,se,l,ue)}return;default:if(gt(t)){for(var fn in n)se=n[fn],n.hasOwnProperty(fn)&&se!==void 0&&!l.hasOwnProperty(fn)&&af(e,t,fn,void 0,l,se);for(be in l)se=l[be],ue=n[be],!l.hasOwnProperty(be)||se===ue||se===void 0&&ue===void 0||af(e,t,be,se,l,ue);return}}for(var G in n)se=n[G],n.hasOwnProperty(G)&&se!=null&&!l.hasOwnProperty(G)&&un(e,t,G,null,l,se);for(we in l)se=l[we],ue=n[we],!l.hasOwnProperty(we)||se===ue||se==null&&ue==null||un(e,t,we,se,l,ue)}function Pp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ig(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],s=o.transferSize,h=o.initiatorType,j=o.duration;if(s&&j&&Pp(h)){for(h=0,j=o.responseEnd,l+=1;l<n.length;l++){var B=n[l],ae=B.startTime;if(ae>j)break;var be=B.transferSize,we=B.initiatorType;be&&Pp(we)&&(B=B.responseEnd,h+=be*(B<j?1:(j-ae)/(B-ae)))}if(--l,t+=8*(s+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var of=null,sf=null;function xu(e){return e.nodeType===9?e:e.ownerDocument}function Op(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _p(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function rf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cf=null;function lg(){var e=window.event;return e&&e.type==="popstate"?e===cf?!1:(cf=e,!0):(cf=null,!1)}var Hp=typeof setTimeout=="function"?setTimeout:void 0,ag=typeof clearTimeout=="function"?clearTimeout:void 0,Ep=typeof Promise=="function"?Promise:void 0,og=typeof queueMicrotask=="function"?queueMicrotask:typeof Ep<"u"?function(e){return Ep.resolve(null).then(e).catch(sg)}:Hp;function sg(e){setTimeout(function(){throw e})}function Hs(e){return e==="head"}function Vp(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),Dc(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")Sd(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Sd(n);for(var s=n.firstChild;s;){var h=s.nextSibling,j=s.nodeName;s[Ll]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=h}}else n==="body"&&Sd(e.ownerDocument.body);n=o}while(n);Dc(t)}function Ip(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function df(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":df(n),xa(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function rg(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ll])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=ua(e.nextSibling),e===null)break}return null}function cg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ua(e.nextSibling),e===null))return null;return e}function Wp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ua(e.nextSibling),e===null))return null;return e}function uf(e){return e.data==="$?"||e.data==="$~"}function ff(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function dg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ua(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var pf=null;function Fp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return ua(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function $p(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Lp(e,t,n){switch(t=xu(n),e){case"html":if(e=t.documentElement,!e)throw Error(d(452));return e;case"head":if(e=t.head,!e)throw Error(d(453));return e;case"body":if(e=t.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);xa(e)}var fa=new Map,Yp=new Set;function yu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ts=O.d;O.d={f:ug,r:fg,D:pg,C:hg,L:gg,m:xg,X:bg,S:yg,M:vg};function ug(){var e=ts.f(),t=ru();return e||t}function fg(e){var t=Ji(e);t!==null&&t.tag===5&&t.type==="form"?rd(t):ts.r(e)}var zc=typeof document>"u"?null:document;function Xp(e,t,n){var l=zc;if(l&&typeof t=="string"&&t){var o=li(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Yp.has(o)||(Yp.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),zi(t,"link",e),Mt(t),l.head.appendChild(t)))}}function pg(e){ts.D(e),Xp("dns-prefetch",e,null)}function hg(e,t){ts.C(e,t),Xp("preconnect",e,t)}function gg(e,t,n){ts.L(e,t,n);var l=zc;if(l&&e&&t){var o='link[rel="preload"][as="'+li(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+li(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+li(n.imageSizes)+'"]')):o+='[href="'+li(e)+'"]';var s=o;switch(t){case"style":s=kc(e);break;case"script":s=Rc(e)}fa.has(s)||(e=xe({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),fa.set(s,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(wd(s))||t==="script"&&l.querySelector(jd(s))||(t=l.createElement("link"),zi(t,"link",e),Mt(t),l.head.appendChild(t)))}}function xg(e,t){ts.m(e,t);var n=zc;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+li(l)+'"][href="'+li(e)+'"]',s=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Rc(e)}if(!fa.has(s)&&(e=xe({rel:"modulepreload",href:e},t),fa.set(s,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(jd(s)))return}l=n.createElement("link"),zi(l,"link",e),Mt(l),n.head.appendChild(l)}}}function yg(e,t,n){ts.S(e,t,n);var l=zc;if(l&&e){var o=Ea(l).hoistableStyles,s=kc(e);t=t||"default";var h=o.get(s);if(!h){var j={loading:0,preload:null};if(h=l.querySelector(wd(s)))j.loading=5;else{e=xe({rel:"stylesheet",href:e,"data-precedence":t},n),(n=fa.get(s))&&hf(e,n);var B=h=l.createElement("link");Mt(B),zi(B,"link",e),B._p=new Promise(function(ae,be){B.onload=ae,B.onerror=be}),B.addEventListener("load",function(){j.loading|=1}),B.addEventListener("error",function(){j.loading|=2}),j.loading|=4,bu(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:j},o.set(s,h)}}}function bg(e,t){ts.X(e,t);var n=zc;if(n&&e){var l=Ea(n).hoistableScripts,o=Rc(e),s=l.get(o);s||(s=n.querySelector(jd(o)),s||(e=xe({src:e,async:!0},t),(t=fa.get(o))&&gf(e,t),s=n.createElement("script"),Mt(s),zi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function vg(e,t){ts.M(e,t);var n=zc;if(n&&e){var l=Ea(n).hoistableScripts,o=Rc(e),s=l.get(o);s||(s=n.querySelector(jd(o)),s||(e=xe({src:e,async:!0,type:"module"},t),(t=fa.get(o))&&gf(e,t),s=n.createElement("script"),Mt(s),zi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function Gp(e,t,n,l){var o=(o=Ke.current)?yu(o):null;if(!o)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=kc(n.href),n=Ea(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=kc(n.href);var s=Ea(o).hoistableStyles,h=s.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,h),(s=o.querySelector(wd(e)))&&!s._p&&(h.instance=s,h.state.loading=5),fa.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},fa.set(e,n),s||mg(o,e,n,h.state))),t&&l===null)throw Error(d(528,""));return h}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Rc(n),n=Ea(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function kc(e){return'href="'+li(e)+'"'}function wd(e){return'link[rel="stylesheet"]['+e+"]"}function qp(e){return xe({},e,{"data-precedence":e.precedence,precedence:null})}function mg(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),zi(t,"link",n),Mt(t),e.head.appendChild(t))}function Rc(e){return'[src="'+li(e)+'"]'}function jd(e){return"script[async]"+e}function Zp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+li(n.href)+'"]');if(l)return t.instance=l,Mt(l),l;var o=xe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Mt(l),zi(l,"style",o),bu(l,n.precedence,e),t.instance=l;case"stylesheet":o=kc(n.href);var s=e.querySelector(wd(o));if(s)return t.state.loading|=4,t.instance=s,Mt(s),s;l=qp(n),(o=fa.get(o))&&hf(l,o),s=(e.ownerDocument||e).createElement("link"),Mt(s);var h=s;return h._p=new Promise(function(j,B){h.onload=j,h.onerror=B}),zi(s,"link",l),t.state.loading|=4,bu(s,n.precedence,e),t.instance=s;case"script":return s=Rc(n.src),(o=e.querySelector(jd(s)))?(t.instance=o,Mt(o),o):(l=n,(o=fa.get(s))&&(l=xe({},n),gf(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),Mt(o),zi(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,bu(l,n.precedence,e));return t.instance}function bu(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,s=o,h=0;h<l.length;h++){var j=l[h];if(j.dataset.precedence===t)s=j;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function hf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function gf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var vu=null;function Qp(e,t,n){if(vu===null){var l=new Map,o=vu=new Map;o.set(n,l)}else o=vu,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var s=n[o];if(!(s[Ll]||s[dt]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var h=s.getAttribute(t)||"";h=e+h;var j=l.get(h);j?j.push(s):l.set(h,[s])}}return l}function Kp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Sg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Jp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function wg(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=kc(l.href),s=t.querySelector(wd(o));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=mu.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,Mt(s);return}s=t.ownerDocument||t,l=qp(l),(o=fa.get(o))&&hf(l,o),s=s.createElement("link"),Mt(s);var h=s;h._p=new Promise(function(j,B){h.onload=j,h.onerror=B}),zi(s,"link",l),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=mu.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var xf=0;function jg(e,t){return e.stylesheets&&e.count===0&&wu(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&wu(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&xf===0&&(xf=62500*ig());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&wu(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>xf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Su=null;function wu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Su=new Map,t.forEach(Tg,e),Su=null,mu.call(e))}function Tg(e,t){if(!(t.state.loading&4)){var n=Su.get(e);if(n)var l=n.get(null);else{n=new Map,Su.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var h=o[s];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),l=h)}l&&n.set(null,l)}o=t.instance,h=o.getAttribute("data-precedence"),s=n.get(h)||l,s===l&&n.set(null,o),n.set(h,o),this.count++,l=mu.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),s?s.parentNode.insertBefore(o,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Td={$$typeof:X,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Cg(e,t,n,l,o,s,h,j,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.hiddenUpdates=vl(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function eh(e,t,n,l,o,s,h,j,B,ae,be,we){return e=new Cg(e,t,n,h,B,ae,be,we,j),t=1,s===!0&&(t|=24),s=ri(3,null,null,t),e.current=s,s.stateNode=e,t=_i(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:n,cache:t},qc(s),e}function th(e){return e?(e=Co,e):Co}function nh(e,t,n,l,o,s){o=th(o),l.context===null?l.context=o:l.pendingContext=o,l=to(t),l.payload={element:n},s=s===void 0?null:s,s!==null&&(l.callback=s),n=no(e,l,t),n!==null&&(xl(n,e,t),Sr(n,e,t))}function ih(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yf(e,t){ih(e,t),(e=e.alternate)&&ih(e,t)}function lh(e){if(e.tag===13||e.tag===31){var t=na(e,67108864);t!==null&&xl(t,e,67108864),yf(e,67108864)}}function ah(e){if(e.tag===13||e.tag===31){var t=Il();t=Pn(t);var n=na(e,t);n!==null&&xl(n,e,t),yf(e,t)}}var ju=!0;function zg(e,t,n,l){var o=I.T;I.T=null;var s=O.p;try{O.p=2,bf(e,t,n,l)}finally{O.p=s,I.T=o}}function kg(e,t,n,l){var o=I.T;I.T=null;var s=O.p;try{O.p=8,bf(e,t,n,l)}finally{O.p=s,I.T=o}}function bf(e,t,n,l){if(ju){var o=vf(l);if(o===null)lf(e,t,l,Tu,n),sh(e,l);else if(Dg(o,e,t,n,l))l.stopPropagation();else if(sh(e,l),t&4&&-1<Rg.indexOf(e)){for(;o!==null;){var s=Ji(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var h=xi(s.pendingLanes);if(h!==0){var j=s;for(j.pendingLanes|=2,j.entangledLanes|=2;h;){var B=1<<31-Je(h);j.entanglements[1]|=B,h&=~B}po(s),(nn&6)===0&&(ou=ot()+500,bd(0))}}break;case 31:case 13:j=na(s,2),j!==null&&xl(j,s,2),ru(),yf(s,2)}if(s=vf(l),s===null&&lf(e,t,l,Tu,n),s===o)break;o=s}o!==null&&l.stopPropagation()}else lf(e,t,l,null,n)}}function vf(e){return e=Oc(e),mf(e)}var Tu=null;function mf(e){if(Tu=null,e=Ki(e),e!==null){var t=P(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=pe(t),e!==null)return e;e=null}else if(n===31){if(e=J(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Tu=e,null}function oh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uc()){case $e:return 2;case Pt:return 8;case yl:case _a:return 32;case Wt:return 268435456;default:return 32}default:return 32}}var Sf=!1,Es=null,Vs=null,Is=null,Cd=new Map,zd=new Map,Ws=[],Rg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sh(e,t){switch(e){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Cd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zd.delete(t.pointerId)}}function kd(e,t,n,l,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Ji(t),t!==null&&lh(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Dg(e,t,n,l,o){switch(t){case"focusin":return Es=kd(Es,e,t,n,l,o),!0;case"dragenter":return Vs=kd(Vs,e,t,n,l,o),!0;case"mouseover":return Is=kd(Is,e,t,n,l,o),!0;case"pointerover":var s=o.pointerId;return Cd.set(s,kd(Cd.get(s)||null,e,t,n,l,o)),!0;case"gotpointercapture":return s=o.pointerId,zd.set(s,kd(zd.get(s)||null,e,t,n,l,o)),!0}return!1}function rh(e){var t=Ki(e.target);if(t!==null){var n=P(t);if(n!==null){if(t=n.tag,t===13){if(t=pe(n),t!==null){e.blockedOn=t,Er(e.priority,function(){ah(n)});return}}else if(t===31){if(t=J(n),t!==null){e.blockedOn=t,Er(e.priority,function(){ah(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vf(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);wt=l,n.target.dispatchEvent(l),wt=null}else return t=Ji(n),t!==null&&lh(t),e.blockedOn=n,!1;t.shift()}return!0}function ch(e,t,n){Cu(e)&&n.delete(t)}function Ag(){Sf=!1,Es!==null&&Cu(Es)&&(Es=null),Vs!==null&&Cu(Vs)&&(Vs=null),Is!==null&&Cu(Is)&&(Is=null),Cd.forEach(ch),zd.forEach(ch)}function zu(e,t){e.blockedOn===t&&(e.blockedOn=null,Sf||(Sf=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Ag)))}var ku=null;function dh(e){ku!==e&&(ku=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){ku===e&&(ku=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(mf(l||n)===null)continue;break}var s=Ji(n);s!==null&&(e.splice(t,3),t-=3,Lo(s,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function Dc(e){function t(B){return zu(B,e)}Es!==null&&zu(Es,e),Vs!==null&&zu(Vs,e),Is!==null&&zu(Is,e),Cd.forEach(t),zd.forEach(t);for(var n=0;n<Ws.length;n++){var l=Ws[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)rh(n),n.blockedOn===null&&Ws.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],s=n[l+1],h=o[On]||null;if(typeof s=="function")h||dh(n);else if(h){var j=null;if(s&&s.hasAttribute("formAction")){if(o=s,h=s[On]||null)j=h.formAction;else if(mf(o)!==null)continue}else j=h.action;typeof j=="function"?n[l+1]=j:(n.splice(l,3),l-=3),dh(n)}}}function uh(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function wf(e){this._internalRoot=e}Ru.prototype.render=wf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(d(409));var n=t.current,l=Il();nh(n,l,e,t,null,null)},Ru.prototype.unmount=wf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nh(e.current,2,null,e,null,null),ru(),t[$t]=null}};function Ru(e){this._internalRoot=e}Ru.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xs();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ws.length&&t!==0&&t<Ws[n].priority;n++);Ws.splice(n,0,e),n===0&&rh(e)}};var fh=u.version;if(fh!=="19.2.0")throw Error(d(527,fh,"19.2.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=E(t),e=e!==null?ce(e):null,e=e===null?null:e.stateNode,e};var Ng={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{Di=Du.inject(Ng),je=Du}catch{}}return Dd.createRoot=function(e,t){if(!D(e))throw Error(d(299));var n=!1,l="",o=a,s=r,h=f;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=eh(e,1,!1,null,null,n,l,null,o,s,h,uh),e[$t]=t.current,nf(e),new wf(t)},Dd.hydrateRoot=function(e,t,n){if(!D(e))throw Error(d(299));var l=!1,o="",s=a,h=r,j=f,B=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(j=n.onRecoverableError),n.formState!==void 0&&(B=n.formState)),t=eh(e,1,!0,t,n??null,l,o,B,s,h,j,uh),t.context=th(null),n=t.current,l=Il(),l=Pn(l),o=to(l),o.callback=null,no(n,o,l),n=l,t.current.lanes=n,ga(t,n),po(t),e[$t]=t.current,nf(e),new Ru(t)},Dd.version="19.2.0",Dd}var wh;function Wg(){if(wh)return Cf.exports;wh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(u){console.error(u)}}return c(),Cf.exports=Ig(),Cf.exports}var Fg=Wg();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lg=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,x,d)=>d?d.toUpperCase():x.toLowerCase()),jh=c=>{const u=Lg(c);return u.charAt(0).toUpperCase()+u.slice(1)},Ah=(...c)=>c.filter((u,x,d)=>!!u&&u.trim()!==""&&d.indexOf(u)===x).join(" ").trim(),Yg=c=>{for(const u in c)if(u.startsWith("aria-")||u==="role"||u==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=S.forwardRef(({color:c="currentColor",size:u=24,strokeWidth:x=2,absoluteStrokeWidth:d,className:D="",children:P,iconNode:pe,...J},p)=>S.createElement("svg",{ref:p,...Xg,width:u,height:u,stroke:c,strokeWidth:d?Number(x)*24/Number(u):x,className:Ah("lucide",D),...!P&&!Yg(J)&&{"aria-hidden":"true"},...J},[...pe.map(([E,ce])=>S.createElement(E,ce)),...Array.isArray(P)?P:[P]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=(c,u)=>{const x=S.forwardRef(({className:d,...D},P)=>S.createElement(Gg,{ref:P,iconNode:u,className:Ah(`lucide-${$g(jh(c))}`,`lucide-${c}`,d),...D}));return x.displayName=jh(c),x};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Zg=Nh("mouse-pointer",qg);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Kg=Nh("pen-line",Qg),Df="#2CA02C",Jg="#F0E442",ex="#00BFC4",Af="#000000",tx="#00008b",Nf="#FF0000",Mh={DEFAULT_SIZE:18},Ud={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},"Film Capacitor":{prefix:["C","CF"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},nx={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Film:["Film Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},Mf={DEFAULT_SIZE:18},Uh={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function Lt(c){return Uh[c]?.validUnits||[]}function Le(c){return Uh[c]?.defaultUnit||""}function Md(c){return c.includes(" ")?c:c.replace(/([a-z])([A-Z])/g,"$1 $2")}let ha=1;const $s=new Set;function Ba(){const c=ha;if(ha++,$s.has(c)){for(console.error(`CRITICAL ERROR: Duplicate Node ID ${c} would be allocated!`),console.error(`Current counter: ${ha}, Allocated IDs count: ${$s.size}`);$s.has(ha);)ha++;const u=ha;return ha++,$s.add(u),console.error(`Recovered by allocating ID ${u} instead`),u}return $s.add(c),c}function Uf(c){c<1&&(console.warn(`setPointIdCounter called with invalid value ${c}, using 1`),c=1),ha=c,$s.clear()}function Th(){return ha}function Ch(){ha=1,$s.clear()}function Bf(c){c>0&&($s.add(c),c>=ha&&(ha=c+1))}function ix(c="id"){return`${c}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function zh(c){return Math.round(c*1e4)/1e4}function Yt(c){return{x:zh(c.x),y:zh(c.y)}}function lx(c){return Ud[c]?.defaultPins||2}function Of(c){return(Ud[c]?.prefix||["?"])[0]}function ax(c,u,x,d,D,P=Mh.DEFAULT_SIZE,pe=[],J=Nd(),p=!0){let E="";if(p){const te=Of(c),ze=sx(te,pe,J);E=`${te}${ze}`}const ce={id:ix("comp"),componentType:c,designator:E,layer:u,x,y:d,color:D,size:P,pinCount:lx(c),pinConnections:[],orientation:0};switch(ce.pinConnections=new Array(ce.pinCount).fill(""),(c==="Electrolytic Capacitor"||c==="Diode"||c==="Battery"||c==="ZenerDiode")&&(ce.pinPolarities=new Array(ce.pinCount).fill("")),c){case"Battery":return{...ce,componentType:"Battery"};case"Capacitor":return{...ce,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...ce,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Film Capacitor":return{...ce,componentType:"Film Capacitor",filmType:"Polyester"};case"Diode":return{...ce,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...ce,componentType:"Fuse"};case"FerriteBead":return{...ce,componentType:"FerriteBead"};case"Connector":return{...ce,componentType:"Connector",gender:"N/A"};case"Jumper":return{...ce,componentType:"Jumper"};case"Relay":return{...ce,componentType:"Relay"};case"Inductor":return{...ce,componentType:"Inductor"};case"Speaker":return{...ce,componentType:"Speaker"};case"Motor":return{...ce,componentType:"Motor"};case"PowerSupply":return{...ce,componentType:"PowerSupply"};case"Transistor":return{...ce,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...ce,componentType:"Resistor"};case"ResistorNetwork":return{...ce,componentType:"ResistorNetwork"};case"Thermistor":return{...ce,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...ce,componentType:"Switch"};case"Transformer":return{...ce,componentType:"Transformer"};case"TestPoint":return{...ce,componentType:"TestPoint"};case"IntegratedCircuit":return{...ce,componentType:"IntegratedCircuit"};case"VacuumTube":return{...ce,componentType:"VacuumTube"};case"VariableResistor":return{...ce,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...ce,componentType:"Crystal"};case"ZenerDiode":return{...ce,componentType:"ZenerDiode"};default:return{...ce,componentType:"Resistor"}}}function _f(c,u,x){const d=c.componentType==="Electrolytic Capacitor"||c.componentType==="Diode"||c.componentType==="Battery"||c.componentType==="ZenerDiode",D=c.componentType==="Capacitor"&&"dielectric"in c&&c.dielectric==="Tantalum";if(!(d||D)||c.pinCount!==2||!(u.length===2&&u[0]&&u[0].trim()!==""&&u[1]&&u[1].trim()!==""))return null;const pe=te=>{const ze=parseInt(te,10);if(isNaN(ze))return null;for(const ne of x)if((ne.type==="via"||ne.type==="pad")&&ne.points.length>0){const Se=ne.points[0];if(Se.id===ze)return{x:Se.x,y:Se.y}}return null},J=pe(u[0]),p=pe(u[1]);if(!J||!p)return null;const E=Math.hypot(c.x-J.x,c.y-J.y),ce=Math.hypot(c.x-p.x,c.y-p.y),xe=["",""];return E<ce?(xe[0]="-",xe[1]="+"):(xe[0]="+",xe[1]="-"),xe}function Nd(){return{}}function ox(c){}function sx(c,u,x){let d=0;for(const P of u)if(P.designator){const pe=P.designator.match(new RegExp(`^${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(pe){const J=parseInt(pe[1],10);J>d&&(d=J)}}const D=x[c]||0;return Math.max(d,D)+1}function rx(c,u,x){const d={...x};return d[c]=Math.max(d[c]||0,u),d}function cx(){const c=document.createElement("canvas"),u=24;c.width=u,c.height=u;const x=c.getContext("2d");x.strokeStyle="#000",x.lineWidth=3,x.lineCap="round";const d=u/2,D=8;return x.beginPath(),x.moveTo(d,d-D),x.lineTo(d,d-2),x.moveTo(d,d+2),x.lineTo(d,d+D),x.moveTo(d-D,d),x.lineTo(d-2,d),x.moveTo(d+2,d),x.lineTo(d+D,d),x.stroke(),`url(${c.toDataURL()}) ${d} ${d}, crosshair`}function dx(c){const u=document.createElement("canvas"),x=Math.max(12,Math.min(c,32)),D=x+4*2;u.width=D,u.height=D;const P=u.getContext("2d"),pe=D/2,J=D/2,p=x/2;return P.fillStyle="#FFFF00",P.strokeStyle="#000000",P.lineWidth=2,P.beginPath(),P.moveTo(pe,J-p),P.lineTo(pe+p,J),P.lineTo(pe,J+p),P.lineTo(pe-p,J),P.closePath(),P.fill(),P.stroke(),`url(${u.toDataURL()}) ${pe} ${J}, crosshair`}function ux(){const c=new Date,u=c.getFullYear(),x=String(c.getMonth()+1).padStart(2,"0"),d=String(c.getDate()).padStart(2,"0"),D=String(c.getHours()).padStart(2,"0"),P=String(c.getMinutes()).padStart(2,"0"),pe=String(c.getSeconds()).padStart(2,"0");return`${u}_${x}_${d}-${D}-${P}-${pe}`}function Ac(c){let u=c.replace(/\.json$/i,""),x="";for(;x!==u;)x=u,u=u.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),u=u.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return u}const Pf=c=>{const u=Ud[c];return!u||!u.prefix||u.prefix.length<1?"?":u.prefix[0].substring(0,1).toUpperCase()},pa=(c,u,x)=>({color:u,size:x}),kh=(c,u,x)=>{},An=(c,u,x,d)=>({color:x,size:d}),Nc=(c,u,x,d)=>{},fx=()=>{const c=new Map,u={top:"#0072B2",bottom:"#56B4E9"},x={top:18,bottom:18},d={top:"#FFFF00",bottom:"#FFFF00"},D={top:18,bottom:18},P={top:"#AA4499",bottom:"#F781BF"},pe={top:6,bottom:6},J={top:"#6A3D9A",bottom:"#9467BD"},p={top:18,bottom:18};return c.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:pa("select","#ff0000",10),layerSettings:new Map([["top",An("select","top","#ff0000",10)],["bottom",An("select","bottom","#ff0000",10)]])}),c.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:pa("via",Df,Mf.DEFAULT_SIZE),layerSettings:new Map([["top",An("via","top",Df,Mf.DEFAULT_SIZE)],["bottom",An("via","bottom",Df,Mf.DEFAULT_SIZE)]]),defaultLayer:"top"}),c.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:pa("pad",tx,18),layerSettings:new Map([["top",An("pad","top",u.top,x.top)],["bottom",An("pad","bottom",u.bottom,x.bottom)]]),defaultLayer:"top"}),c.set("testPoint",{id:"testPoint",name:"Test Point",toolType:"draw",drawingMode:"testPoint",icon:"",shortcut:"Y",tooltip:"Place test point",colorReflective:!0,settings:pa("testPoint","#FFFF00",18),layerSettings:new Map([["top",An("testPoint","top",d.top,D.top)],["bottom",An("testPoint","bottom",d.bottom,D.bottom)]]),defaultLayer:"top"}),c.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:pa("trace",Jg,6),layerSettings:new Map([["top",An("trace","top",P.top,pe.top)],["bottom",An("trace","bottom",P.bottom,pe.bottom)]]),defaultLayer:"top"}),c.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:pa("component",ex,Mh.DEFAULT_SIZE),layerSettings:new Map([["top",An("component","top",J.top,p.top)],["bottom",An("component","bottom",J.bottom,p.bottom)]]),defaultLayer:"top"}),c.set("componentConnection",{id:"componentConnection",name:"Component Connections",toolType:"componentConnection",icon:"",shortcut:"",tooltip:"Component connection lines",colorReflective:!1,settings:pa("componentConnection","#E69F00",3),layerSettings:new Map([["top",An("componentConnection","top","#E69F00",3)],["bottom",An("componentConnection","bottom","#E69F00",3)]])}),c.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:pa("power",Nf,18),layerSettings:new Map([["top",An("power","top",Nf,18)],["bottom",An("power","bottom",Nf,18)]]),defaultLayer:"top"}),c.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:pa("ground",Af,18),layerSettings:new Map([["top",An("ground","top",Af,18)],["bottom",An("ground","bottom",Af,18)]]),defaultLayer:"top"}),c.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:pa("erase","#f5a3b3",18),layerSettings:new Map([["top",An("erase","top","#f5a3b3",18)],["bottom",An("erase","bottom","#f5a3b3",18)]])}),c.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:pa("pan","#ff0000",10),layerSettings:new Map([["top",An("pan","top","#ff0000",10)],["bottom",An("pan","bottom","#ff0000",10)]])}),c.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:pa("magnify","#ff0000",10),layerSettings:new Map([["top",An("magnify","top","#ff0000",10)],["bottom",An("magnify","bottom","#ff0000",10)]])}),c},Rh={via:{color:"#2CA02C",size:18},padTop:{color:"#0072B2",size:18},padBottom:{color:"#56B4E9",size:18},testPointTop:{color:"#FFFF00",size:18},testPointBottom:{color:"#FFFF00",size:18},traceTop:{color:"#AA4499",size:6},traceBottom:{color:"#F781BF",size:6},componentTop:{color:"#6A3D9A",size:18},componentBottom:{color:"#9467BD",size:18},power:{color:"#ff0000",size:18},ground:{color:"#000000",size:18}},Ad={via:"Via",padTop:"Pad (Top)",padBottom:"Pad (Bottom)",testPointTop:"Test Point (Top)",testPointBottom:"Test Point (Bottom)",traceTop:"Trace (Top)",traceBottom:"Trace (Bottom)",componentTop:"Component (Top)",componentBottom:"Component (Bottom)",power:"Power",ground:"Ground"};class px{instances=new Map;listeners=new Map;initialize(){for(const u of Object.keys(Rh)){const x=Rh[u];this.instances.set(u,{id:u,name:Ad[u],color:x.color,size:x.size}),this.listeners.set(u,new Set)}}initializeFromProject(u){if(this.initialize(),u?.toolInstances)for(const[x,d]of Object.entries(u.toolInstances))this.instances.has(x)&&this.instances.set(x,d)}get(u){const x=this.instances.get(u);if(!x)throw new Error(`Tool instance ${u} not found`);return x}getColor(u){const x=this.instances.get(u);if(!x)throw new Error(`Tool instance ${u} not found`);const d=Ad[u];return console.log(`${d}, returning color value=${x.color}`),x.color}getSize(u){const x=this.instances.get(u);if(!x)throw new Error(`Tool instance ${u} not found`);const d=Ad[u];return console.log(`${d}, returning size value=${x.size}`),x.size}setColor(u,x){const d=this.instances.get(u);if(d){const D=Ad[u];console.log(`${D}, setting color value=${x}`),d.color=x,this.notifyListeners(u)}}setSize(u,x){const d=this.instances.get(u);if(d){const D=Ad[u];console.log(`${D}, setting size value=${x}`),d.size=x,this.notifyListeners(u)}}getAll(){const u={};for(const[x,d]of this.instances.entries())u[x]=d;return u}subscribe(u,x){const d=this.listeners.get(u);return d?(d.add(x),()=>{d.delete(x)}):()=>{}}notifyListeners(u){const x=this.listeners.get(u);x&&x.forEach(d=>d())}}const bt=new px;bt.initialize();function Au(c,u){switch(c){case"via":return"via";case"pad":return u==="bottom"?"padBottom":"padTop";case"testPoint":return u==="bottom"?"testPointBottom":"testPointTop";case"trace":return u==="bottom"?"traceBottom":"traceTop";case"component":return u==="bottom"?"componentBottom":"componentTop";case"power":return"power";case"ground":return"ground";default:throw new Error(`Unknown tool: ${c}`)}}const hx=({visible:c,toolRegistry:u,currentTool:x,drawingMode:d,traceToolLayer:D,padToolLayer:P,testPointToolLayer:pe,componentToolLayer:J,updateToolSettings:p,updateToolLayerSettings:E,setBrushSize:ce,saveToolSettings:xe,saveToolLayerSettings:te,setTopTraceSize:ze,setBottomTraceSize:ne,setTopPadSize:Se,setBottomPadSize:R,setTopTestPointSize:W,setBottomTestPointSize:Ie,setTopComponentSize:X,setBottomComponentSize:Be,setComponentConnectionSize:V,saveDefaultSize:k,onClose:A})=>{const[z,b]=S.useState({}),de=[{id:"via",name:"Via",instanceId:"via"},{id:"pad",name:"Pad",layer:"top",instanceId:"padTop"},{id:"pad",name:"Pad",layer:"bottom",instanceId:"padBottom"},{id:"testPoint",name:"Test Point",layer:"top",instanceId:"testPointTop"},{id:"testPoint",name:"Test Point",layer:"bottom",instanceId:"testPointBottom"},{id:"trace",name:"Trace",layer:"top",instanceId:"traceTop"},{id:"trace",name:"Trace",layer:"bottom",instanceId:"traceBottom"},{id:"component",name:"Component",layer:"top",instanceId:"componentTop"},{id:"component",name:"Component",layer:"bottom",instanceId:"componentBottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power",instanceId:"power"},{id:"ground",name:"Ground",instanceId:"ground"},{id:"erase",name:"Erase"}];S.useEffect(()=>{if(c){const Ce={};for(const ke of de){const fe=ke.instanceId||ke.id;if(ke.instanceId)try{const I=bt.get(ke.instanceId);Ce[fe]=I.size}catch{const I=u.get(ke.id);I&&(Ce[fe]=ke.layer?I.layerSettings.get(ke.layer)?.size??I.settings.size??10:I.settings.size??10)}else{const I=u.get(ke.id);I&&(Ce[fe]=I.settings.size??10)}}b(Ce)}},[c]);const Ae=S.useCallback((Ce,ke,fe,I)=>{if(!u.get(Ce)&&Ce!=="componentConnection")return;const Q=I||Ce;b(Y=>({...Y,[Q]:ke})),["trace","pad","testPoint","component"].includes(Ce)&&fe&&I?(bt.setSize(I,ke),(Ce==="trace"&&x==="draw"&&d==="trace"||Ce==="pad"&&x==="draw"&&d==="pad"||Ce==="testPoint"&&x==="draw"&&d==="testPoint"||Ce==="component"&&x==="component")&&((Ce==="trace"?D:Ce==="pad"?P:Ce==="testPoint"?pe:J)||"top")===fe&&ce(ke)):I?(bt.setSize(I,ke),(Ce==="via"&&x==="draw"&&d==="via"||Ce==="power"&&x==="power"||Ce==="ground"&&x==="ground")&&ce(ke)):(Ce==="componentConnection"&&(V(ke),k("componentConnection",ke)),Ce==="erase"&&x==="erase"&&ce(ke))},[u,x,d,D,P,pe,J,ce,V,k]);if(!c)return null;const Pe=Array.from({length:50},(Ce,ke)=>ke+1);return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:Ce=>{Ce.target===Ce.currentTarget&&A()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",maxWidth:"400px",maxHeight:"70vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:Ce=>Ce.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Size"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:de.map((Ce,ke)=>{if(!u.get(Ce.id)&&Ce.id!=="componentConnection")return null;const I=Ce.layer?`${Ce.name} (${Ce.layer==="top"?"Top":"Bottom"})`:Ce.name,O=Ce.instanceId||Ce.id,Q=z[O]??10;return i.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[i.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[I,":"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("select",{value:Q,onChange:Te=>{const Y=parseInt(Te.target.value,10);Ae(Ce.id,Y,Ce.layer,Ce.instanceId)},style:{width:"50px",padding:"4px 6px",background:"#2b2b31",border:"1px solid #3a3a44",borderRadius:4,color:"#f2f2f2",fontSize:"12px",cursor:"pointer"},children:Pe.map(Te=>i.jsx("option",{value:Te,style:{background:"#2b2b31",color:"#f2f2f2"},children:Te},Te))}),i.jsx("span",{style:{color:"#f2f2f2",fontSize:"12px"},children:"px"})]})]},`${Ce.id}-${Ce.layer||"default"}-${ke}`)})}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:A,style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},gx=({visible:c,toolRegistry:u,currentTool:x,drawingMode:d,traceToolLayer:D,padToolLayer:P,testPointToolLayer:pe,componentToolLayer:J,updateToolSettings:p,updateToolLayerSettings:E,saveToolSettings:ce,saveToolLayerSettings:xe,setBrushColor:te,setTopTraceColor:ze,setBottomTraceColor:ne,setTopPadColor:Se,setBottomPadColor:R,setTopTestPointColor:W,setBottomTestPointColor:Ie,setTopComponentColor:X,setBottomComponentColor:Be,setComponentConnectionColor:V,saveDefaultColor:k,colorPalette:A,onClose:z})=>{const[b,de]=Oe.useState(null),[Ae,Pe]=Oe.useState(0);if(Oe.useEffect(()=>{const O=[];return[{id:"via"},{id:"pad",layer:"top"},{id:"pad",layer:"bottom"},{id:"testPoint",layer:"top"},{id:"testPoint",layer:"bottom"},{id:"trace",layer:"top"},{id:"trace",layer:"bottom"},{id:"component",layer:"top"},{id:"component",layer:"bottom"},{id:"power"},{id:"ground"}].forEach(({id:Te,layer:Y})=>{try{const T=Au(Te,Y),N=bt.subscribe(T,()=>{Pe(_=>_+1)});O.push(N)}catch{}}),()=>{O.forEach(Te=>Te())}},[]),!c)return null;const Ce=["pad","testPoint","trace","component"],ke=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],fe=(O,Q,Te)=>{if(O==="componentConnection"){V(Q),k("componentConnection",Q),de(null);return}if(O==="erase"){const Y=u.get(O);Y&&(p(O,{...Y.settings,color:Q}),ce(O,Q,Y.settings.size)),de(null);return}try{let Y;Te&&Ce.includes(O)?Y=Au(O,Te):Y=Au(O),bt.setColor(Y,Q),(O==="via"&&x==="draw"&&d==="via"||O==="trace"&&x==="draw"&&d==="trace"||O==="pad"&&x==="draw"&&d==="pad"||O==="testPoint"&&x==="draw"&&d==="testPoint"||O==="component"&&x==="component"||O==="power"&&x==="power"||O==="ground"&&x==="ground")&&(Te&&Ce.includes(O)?((O==="trace"?D:O==="pad"?P:O==="testPoint"?pe:J)||"top")===Te&&te(Q):te(Q))}catch(Y){console.error(`Error updating color for tool ${O}:`,Y);const T=u.get(O);T&&(Te&&Ce.includes(O)?(E(O,Te,{...T.layerSettings.get(Te),color:Q}),xe(O,Te,Q,T.layerSettings.get(Te)?.size||T.settings.size)):(p(O,{...T.settings,color:Q}),ce(O,Q,T.settings.size)))}de(null)},I=(O,Q)=>{let Te;try{const N=Au(O,Q);Te=bt.get(N).color}catch{const N=u.get(O);if(!N)return null;Te=N.settings.color??"#000000"}const Y=Q?`${O}-${Q}`:O,T=b?.toolId===O&&b?.layer===Q;return i.jsxs("div",{style:{position:"relative",display:"inline-block",zIndex:10005},children:[i.jsx("button",{className:"color-swatch-button",onClick:N=>{N.stopPropagation(),de(T?null:{toolId:O,layer:Q})},style:{width:"40px",height:"24px",background:Te,backgroundColor:Te,backgroundImage:"none",border:"1px solid #3a3a44",borderRadius:3,cursor:"pointer",padding:0,margin:0,display:"block","--swatch-color":Te},title:Te},`${Y}-button-${Te}-${Ae}`),T&&i.jsx("div",{onClick:N=>{N.stopPropagation()},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:100},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:A.map(N=>i.jsx("div",{onClick:()=>fe(O,N,Q),title:N,style:{width:22,height:22,backgroundColor:N,border:N===Te?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},N))})})]},`${Y}-${Te}-${Ae}`)};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:O=>{O.target===O.currentTarget&&(z(),de(null))},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",minWidth:"450px",maxWidth:"600px",maxHeight:"70vh",overflowY:"auto",overflowX:"visible",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:O=>O.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Color"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ke.map((O,Q)=>{if(!u.get(O.id))return null;const Y=O.layer?`${O.name} (${O.layer==="top"?"Top":"Bottom"})`:O.name;return i.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[i.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[Y,":"]}),I(O.id,O.layer)]},`${O.id}-${O.layer||"default"}-${Q}`)})}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:()=>{z(),de(null)},style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},xx=({openMenu:c,setOpenMenu:u,isReadOnlyMode:x,currentProjectFilePath:d,isProjectActive:D,onNewProject:P,onOpenProject:pe,onSaveProject:J,onSaveAs:p,onPrint:E,hasUnsavedChanges:ce,setNewProjectDialog:xe,setAutoSaveDialog:te,topImage:ze,bottomImage:ne,setCurrentTool:Se,resetImageTransform:R,areImagesLocked:W,setAreImagesLocked:Ie,onEnterBoardDimensions:X,fileInputTopRef:Be,fileInputBottomRef:V,openProjectRef:k,increaseSize:A,decreaseSize:z,brushSize:b,drawingStrokes:de,selectedIds:Ae,selectedComponentIds:Pe,selectedPowerIds:Ce,selectedGroundIds:ke,componentsTop:fe,componentsBottom:I,powers:O,grounds:Q,powerNodeNames:Te,groundNodeNames:Y,setSetSizeDialog:T,areViasLocked:N,setAreViasLocked:_,arePadsLocked:$,setArePadsLocked:Ue,areTestPointsLocked:Ke,setAreTestPointsLocked:ct,areTracesLocked:gn,setAreTracesLocked:We,areComponentsLocked:ki,setAreComponentsLocked:Nn,areGroundNodesLocked:Ri,setAreGroundNodesLocked:hi,arePowerNodesLocked:ii,setArePowerNodesLocked:gi,showTraceCornerDots:Qi,setShowTraceCornerDots:Vi,setSelectedIds:Wl,setSelectedComponentIds:Pa,setSelectedPowerIds:Ls,setSelectedGroundIds:Oa,selectAllVias:Mc,selectAllTraces:qe,selectAllPads:ot,selectAllComponents:Uc,selectDisconnectedComponents:$e,selectAllPowerNodes:Pt,selectAllGroundNodes:yl,selectPowerNodesByName:_a,selectGroundNodesByName:Wt,setShowPowerBusManager:Fn,setShowGroundBusManager:bl,setShowDesignatorManager:Di,toolRegistry:je,updateToolSettings:Bn,updateToolLayerSettings:Je,setBrushSize:jn,setBrushColor:Ha,saveToolSettings:Ys,saveToolLayerSettings:Fl,colorPalette:ns,currentTool:At,drawingMode:xi,traceToolLayer:$l,padToolLayer:Ai,testPointToolLayer:ho,componentToolLayer:Ni,setTopTraceSize:vl,setBottomTraceSize:ga,setTopPadSize:Bc,setBottomPadSize:Ve,setTopTestPointSize:Ii,setBottomTestPointSize:jt,setTopComponentSize:Pn,setBottomComponentSize:is,setComponentConnectionSize:Xs,topTraceColor:Er,bottomTraceColor:ml,topPadColor:dt,bottomPadColor:On,topTestPointColor:$t,bottomTestPointColor:go,topComponentColor:an,bottomComponentColor:Gs,setTopTraceColor:xn,setBottomTraceColor:Ll,setTopPadColor:xa,setBottomPadColor:Ki,setTopTestPointColor:Ji,setBottomTestPointColor:Sl,setTopComponentColor:Ea,setBottomComponentColor:Mt,setComponentConnectionColor:Vr,saveDefaultSize:Ot,saveDefaultColor:on,menuBarRef:el,onOpenProjectNotes:Ir,onOpenTransformImages:Va})=>{const[ls,Tn]=Oe.useState(null),sn=Oe.useRef(null),[Ia,_t]=Oe.useState(null),Xt=Oe.useRef(null),[qs,ya]=Oe.useState(!1),[Yl,as]=Oe.useState(!1),tl=_e=>{if(!D){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature."),u(null);return}_e()},Pc=_e=>{const En=_e==="power"?Te:Y,Xl=En.length>0,Mn=_e==="power"?"Select Power Nodes":"Select Ground Nodes";return i.jsxs("div",{onMouseEnter:()=>{sn.current&&(clearTimeout(sn.current),sn.current=null),Tn(_e)},onMouseLeave:()=>{sn.current=window.setTimeout(()=>{Tn(Gl=>Gl===_e?null:Gl)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[Mn," by Name"]}),i.jsxs("button",{onClick:()=>{_e==="power"?Pt():yl(),Tn(null),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",_e==="power"?"Power Nodes":"Ground Nodes"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),Xl?En.map(Gl=>i.jsx("button",{onClick:()=>{_e==="power"?_a(Gl):Wt(Gl),Tn(null),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:Gl},Gl)):i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",_e==="power"?"power":"ground"," nodes available."]})]})},li=()=>i.jsxs("div",{onMouseEnter:()=>{Xt.current&&(clearTimeout(Xt.current),Xt.current=null),_t("lock")},onMouseLeave:()=>{Xt.current=window.setTimeout(()=>{_t(_e=>_e==="lock"?null:_e)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("label",{onClick:_e=>{_e.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:N,onChange:()=>{_(_e=>!_e)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Vias"})]}),i.jsxs("label",{onClick:_e=>{_e.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:$,onChange:()=>{Ue(_e=>!_e)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Pads"})]}),i.jsxs("label",{onClick:_e=>{_e.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Ke,onChange:()=>{ct(_e=>!_e)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Test Points"})]}),i.jsxs("label",{onClick:_e=>{_e.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:gn,onChange:()=>{We(_e=>!_e)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Traces"})]}),i.jsxs("label",{onClick:_e=>{_e.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:ki,onChange:()=>{Nn(_e=>!_e)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Components"})]}),i.jsxs("label",{onClick:_e=>{_e.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Ri,onChange:()=>{hi(_e=>!_e)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Ground Node"})]}),i.jsxs("label",{onClick:_e=>{_e.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:ii,onChange:()=>{gi(_e=>!_e)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Power Nodes"})]})]}),os=()=>i.jsxs("div",{onMouseEnter:()=>{Xt.current&&(clearTimeout(Xt.current),Xt.current=null),_t("select")},onMouseLeave:()=>{Xt.current=window.setTimeout(()=>{_t(_e=>_e==="select"?null:_e)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{Mc(),_t(null),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Vias"}),i.jsx("button",{onClick:()=>{qe(),_t(null),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Traces"}),i.jsx("button",{onClick:()=>{ot(),_t(null),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Pads"}),i.jsx("button",{onClick:()=>{const _e=new Set(de.filter(En=>En.type==="testPoint").map(En=>En.id));Wl(_e),Pa(new Set),Ls(new Set),Oa(new Set),_t(null),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Test Points"}),i.jsx("button",{onClick:()=>{Uc(),_t(null),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Components"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{sn.current&&(clearTimeout(sn.current),sn.current=null),Tn("power")},onMouseLeave:()=>{sn.current=window.setTimeout(()=>{Tn(_e=>_e==="power"?null:_e)},200)},onClick:()=>{Tn(_e=>_e==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Power Nodes "}),ls==="power"&&Pc("power")]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{sn.current&&(clearTimeout(sn.current),sn.current=null),Tn("ground")},onMouseLeave:()=>{sn.current=window.setTimeout(()=>{Tn(_e=>_e==="ground"?null:_e)},200)},onClick:()=>{Tn(_e=>_e==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Ground Nodes "}),ls==="ground"&&Pc("ground")]}),i.jsx("button",{onClick:()=>{$e(),_t(null),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Disconnected Components"})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{ref:el,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:_e=>{_e.stopPropagation(),u(En=>En==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),c==="file"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{x||(u(null),ce()?xe({visible:!0}):P())},disabled:x,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:x?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:x?"not-allowed":"pointer"},children:"New Project"}),i.jsx("button",{onClick:async()=>{await pe(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{x||tl(()=>{J(),u(null)})},disabled:x||!D,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:x||!D?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:x||!D?"not-allowed":"pointer"},children:"Save Project"}),i.jsx("button",{onClick:()=>{x||tl(()=>{p(),u(null)})},disabled:x||!D,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:x||!D?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:x||!D?"not-allowed":"pointer"},children:"Save As"}),i.jsx("button",{onClick:()=>{x||tl(()=>{te({visible:!0,interval:5}),u(null)})},disabled:x||!D,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:x||!D?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:x||!D?"not-allowed":"pointer"},children:"Auto Save"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{tl(()=>{E(),u(null)})},disabled:!D,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:D?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:D?"pointer":"not-allowed"},children:"Print"}),i.jsx("button",{onClick:()=>{tl(()=>{E(),u(null)})},disabled:!D,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:D?"#f2f2f2":"#777",background:"transparent",border:"none",cursor:D?"pointer":"not-allowed"},children:"Printer Settings"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:_e=>{if(!x){if(!D){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature.");return}_e.stopPropagation(),u(En=>En==="transform"?null:"transform")}},disabled:x||!D,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="transform"?"#eef3ff":"#fff",fontWeight:600,color:x||!D?"#999":"#222",cursor:x||!D?"not-allowed":"pointer",opacity:x||!D?.5:1},children:"Images "}),c==="transform"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{!x&&!W&&(Be.current?.click(),u(null))},disabled:x||W,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:x||W?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:x||W?"not-allowed":"pointer"},children:"Load Top PCB"}),i.jsx("button",{onClick:()=>{!x&&!W&&(V.current?.click(),u(null))},disabled:x||W,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:x||W?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:x||W?"not-allowed":"pointer"},children:"Load Bottom PCB"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{W||(X(),u(null))},disabled:W,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:W?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:W?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Va(),u(null)},disabled:!ze&&!ne||W,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!ze&&!ne||W?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!ze&&!ne||W?"not-allowed":"pointer"},children:"Transform Images"}),i.jsx("button",{onClick:()=>{W||(Se("transform"),R(),u(null))},disabled:W||!ze&&!ne,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:W||!ze&&!ne?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:W||!ze&&!ne?"not-allowed":"pointer"},children:"Reset Transform"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ie(_e=>!_e),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:W?"Unlock Images ":"Lock Images"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:_e=>{if(!x){if(!D){alert("Please create a new project (File  New Project) or open an existing project (File  Open Project) before using this feature.");return}_e.stopPropagation(),u(En=>En==="tools"?null:"tools")}},disabled:x||!D,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="tools"?"#eef3ff":"#fff",fontWeight:600,color:x||!D?"#999":"#222",cursor:x||!D?"not-allowed":"pointer",opacity:x||!D?.5:1},children:"Tools "}),c==="tools"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{A(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),i.jsx("button",{onClick:()=>{z(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{ya(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Size"}),i.jsx("button",{onClick:()=>{as(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Color"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{Xt.current&&(clearTimeout(Xt.current),Xt.current=null),_t("lock")},onMouseLeave:()=>{Xt.current=window.setTimeout(()=>{_t(_e=>_e==="lock"?null:_e)},200)},onClick:()=>{_t(_e=>_e==="lock"?null:"lock")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Lock "}),Ia==="lock"&&li()]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{Xt.current&&(clearTimeout(Xt.current),Xt.current=null),_t("select")},onMouseLeave:()=>{Xt.current=window.setTimeout(()=>{_t(_e=>_e==="select"?null:_e)},200)},onClick:()=>{_t(_e=>_e==="select"?null:"select")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select "}),Ia==="select"&&os()]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ir(),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Project Notes"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Fn(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>{bl(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Di(!0),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Designators"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{Vi(!Qi),u(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:[Qi?" ":"   ","Show Trace Corner Dots"]})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:_e=>{_e.stopPropagation(),u(En=>En==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),c==="about"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 16px 0",color:"#000",fontSize:"20px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"About"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images. This application supports typical 2 to 4 layer PCBs and enables comprehensive PCB analysis and documentation."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"This tool can also be used to assist in troubleshooting electronics by tracing circuits, holding contextual notes, comparing test results, and documenting findings during the debugging process."})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Technology"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"The application runs entirely client-side in the browser, to provide a responsive, interactive drawing experience with no backend server requirements."})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Features"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Tools & Shortcuts"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#222"},children:[i.jsx("div",{children:i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Select"}),"  ",i.jsx("code",{children:"S"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Via"}),"  ",i.jsx("code",{children:"V"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Pad"}),"  ",i.jsx("code",{children:"P"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Test Point"}),"  ",i.jsx("code",{children:"Y"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Trace"}),"  ",i.jsx("code",{children:"T"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component"}),"  ",i.jsx("code",{children:"C"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component Properties"}),"  double-click component"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Resize Icons"}),"  ",i.jsx("code",{children:"+"})," / ",i.jsx("code",{children:"-"})]})]})}),i.jsx("div",{children:i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Power"}),"  ",i.jsx("code",{children:"B"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Ground"}),"  ",i.jsx("code",{children:"G"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Erase"}),"  ",i.jsx("code",{children:"E"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Move (Pan)"}),"  ",i.jsx("code",{children:"H"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Zoom"}),"  ",i.jsx("code",{children:"Z"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Set View"}),"  ",i.jsx("code",{children:"X"})," then ",i.jsx("code",{children:"0-9"})," to save view"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Recall View"}),"  ",i.jsx("code",{children:"0-9"})," to recall saved view"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Information Dialog"}),"  ",i.jsx("code",{children:"I"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Notes Dialog"}),"  ",i.jsx("code",{children:"N"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Project Notes / TODO"}),"  ",i.jsx("code",{children:"L"})]})]})})]}),i.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#222"},children:[i.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600},children:"Arrow Keys"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Image Transformations"}),"  Arrow keys for scaling, rotating, and adjusting image transformations (when image is selected for transform)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components"]})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 20px"},children:[i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Image Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Load top and bottom PCB images"}),i.jsx("li",{children:"Image alignment and transformation"}),i.jsx("li",{children:"Transform modes: nudge, scale, rotate, slant, keystone"}),i.jsx("li",{children:"Horizontal and vertical flip controls"}),i.jsx("li",{children:"Grayscale and edge detection modes"}),i.jsx("li",{children:"Board dimensions configuration"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Drawing Tools"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Draw copper traces (top and bottom layers)"}),i.jsx("li",{children:"Place vias for layer connections"}),i.jsx("li",{children:"Place component pads (SMD and through-hole)"}),i.jsx("li",{children:"Place test points for circuit testing"}),i.jsx("li",{children:"Place and annotate components"}),i.jsx("li",{children:"Place power and ground nodes"}),i.jsx("li",{children:"Erase tool for removing elements"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Layer Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Separate top and bottom layer support"}),i.jsx("li",{children:"Layer-specific color customization"}),i.jsx("li",{children:"Layer-specific size controls"}),i.jsx("li",{children:"Layer visibility toggles"}),i.jsx("li",{children:"Overlay view mode"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Component Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Component placement with pin counts"}),i.jsx("li",{children:"Pin connection tracking"}),i.jsx("li",{children:"Component type classification"}),i.jsx("li",{children:"Designator and value annotation"}),i.jsx("li",{children:"Component editor dialog"}),i.jsx("li",{children:"Find and center component"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Selection & Locking"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Select individual elements or groups"}),i.jsx("li",{children:"Select all vias, traces, pads, or components"}),i.jsx("li",{children:"Select power/ground nodes by name"}),i.jsx("li",{children:"Select disconnected components"}),i.jsx("li",{children:"Lock/unlock elements by type"}),i.jsx("li",{children:"Image locking for protection"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Power & Ground"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Multiple voltage power nodes"}),i.jsx("li",{children:"Power bus management"}),i.jsx("li",{children:"Ground node placement"}),i.jsx("li",{children:"Ground bus management"}),i.jsx("li",{children:"Node naming and organization"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Customization"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Customizable colors per layer"}),i.jsx("li",{children:"Adjustable brush/tool sizes"}),i.jsx("li",{children:"Size presets for common tools"}),i.jsx("li",{children:"Color palette management"}),i.jsx("li",{children:"Tool settings persistence"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Project Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Create, open, and save projects"}),i.jsx("li",{children:"Auto-save with configurable intervals"}),i.jsx("li",{children:"File history automatically saved in history subdirectory when Auto Save is enabled"}),i.jsx("li",{children:"Project Notes / TODO list with spreadsheet-like editing"}),i.jsx("li",{children:"Project file format (JSON)"}),i.jsx("li",{children:"Print functionality"}),i.jsx("li",{children:"Export to KiCad schematic format (future feature, not yet implemented)"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"View Controls"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Zoom in/out with mouse wheel"}),i.jsx("li",{children:"Pan view with hand tool"}),i.jsx("li",{children:"Zoom to fit"}),i.jsx("li",{children:"View mode switching (top/bottom/overlay)"}),i.jsx("li",{children:"Save up to 10 view locations (X + 0-9)"}),i.jsx("li",{children:"Recall saved views instantly (0-9 keys)"}),i.jsx("li",{children:"Detailed information dialog"})]})]})]})]}),i.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #ddd"},children:i.jsxs("p",{style:{margin:"0 0 8px 0",color:"#666",fontSize:"12px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to manage projects, the ",i.jsx("strong",{children:"Images"})," menu for image loading and transformation, and the ",i.jsx("strong",{children:"Tools"})," menu for selection, locking, and customization options."]})}),i.jsxs("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #ddd"},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Future / TODO List"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"A searchable list of common components"}),i.jsx("li",{children:"Output schematics (perhaps as KiCad files)"}),i.jsx("li",{children:"Dynamic layers"})]})]})]})})]}),d&&i.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:i.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:d,children:d})})]}),i.jsx(hx,{visible:qs,toolRegistry:je,currentTool:At,drawingMode:xi,traceToolLayer:$l,padToolLayer:Ai,testPointToolLayer:ho,componentToolLayer:Ni,updateToolSettings:Bn,updateToolLayerSettings:Je,setBrushSize:jn,saveToolSettings:Ys,saveToolLayerSettings:Fl,setTopTraceSize:vl,setBottomTraceSize:ga,setTopPadSize:Bc,setBottomPadSize:Ve,setTopTestPointSize:Ii,setBottomTestPointSize:jt,setTopComponentSize:Pn,setBottomComponentSize:is,setComponentConnectionSize:Xs,saveDefaultSize:Ot,onClose:()=>ya(!1)}),i.jsx(gx,{visible:Yl,toolRegistry:je,currentTool:At,drawingMode:xi,traceToolLayer:$l,padToolLayer:Ai,testPointToolLayer:ho,componentToolLayer:Ni,updateToolSettings:Bn,updateToolLayerSettings:Je,saveToolSettings:Ys,saveToolLayerSettings:Fl,setBrushColor:Ha,setTopTraceColor:xn,setBottomTraceColor:Ll,setTopPadColor:xa,setBottomPadColor:Ki,setTopTestPointColor:Ji,setBottomTestPointColor:Sl,setTopComponentColor:Ea,setBottomComponentColor:Mt,setComponentConnectionColor:Vr,saveDefaultColor:on,colorPalette:ns,onClose:()=>as(!1)})]})},yx=({visible:c})=>c?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"1) Use the File menu to start a new project."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"2) Use the Images menu to load PCB photos."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5",textAlign:"left"},children:"3) Use the tools to draw vias, pads, traces, etc."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginTop:"16px",lineHeight:"1.5",textAlign:"left",fontWeight:"bold"},children:"Best viewed in browser's Full Screen Mode"})]}):null,bx=({visible:c,title:u,message:x,onClose:d})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:D=>{D.target===D.currentTarget&&d()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:D=>D.stopPropagation(),children:[i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),i.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:u})]}),i.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:x}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:i.jsx("button",{onClick:d,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,vx=({visible:c,selectedIds:u,selectedComponentIds:x,selectedPowerIds:d,selectedGroundIds:D,drawingStrokes:P,componentsTop:pe,componentsBottom:J,powers:p,grounds:E,powerBuses:ce,onClose:xe,setComponentsTop:te,setComponentsBottom:ze,determineViaType:ne,determinePadType:Se,determineTestPointType:R,onFindComponent:W,position:Ie,isDragging:X,onDragStart:Be,onOpenNotesDialog:V})=>{if(!c)return null;const k=Ie?{position:"fixed",left:`${Ie.x}px`,top:`${Ie.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:X?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},A={padding:"20px",overflow:"auto",flex:1};return i.jsxs("div",{style:k,children:[i.jsxs("div",{onMouseDown:z=>{const b=z.target;b.tagName==="BUTTON"||b.closest("button")||Ie&&Be(z)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:X?"grabbing":Ie?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (I)"}),i.jsx("button",{onClick:xe,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:A,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const z=P.filter(Ce=>u.has(Ce.id)).length,b=[...pe,...J].filter(Ce=>x.has(Ce.id)).length,de=p.filter(Ce=>d.has(Ce.id)).length,Ae=E.filter(Ce=>D.has(Ce.id)).length,Pe=z+b+de+Ae;return i.jsx("div",{style:{padding:"12px 16px",backgroundColor:Pe>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:Pe>0?"#333":"#856404",marginBottom:"8px"},children:Pe>0?`${Pe} Object${Pe!==1?"s":""} Selected`:"Zero Objects Selected"})})(),x.size>0&&(()=>{const z=P.some(b=>u.has(b.id)&&(b.type==="via"||b.type==="pad"));return[...pe,...J].filter(b=>x.has(b.id)).map(b=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:Md(b.componentType)})]}),W&&i.jsx("button",{onClick:()=>{W(b.id,b.x,b.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:de=>{de.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:de=>{de.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Layer: ",b.layer]}),b.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[b.description&&i.jsxs("div",{children:["Description: ",b.description]}),b.icType&&i.jsxs("div",{children:["IC Type: ",b.icType]})]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:b.notes||"",readOnly:!0,onClick:V,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("span",{children:["Designator: ",b.designator||"(empty)"]}),z&&i.jsx("button",{onClick:()=>{const de=[...pe,...J].filter(Q=>x.has(Q.id)&&Q.componentType===b.componentType),Ae=de.length,Pe=P.filter(Q=>u.has(Q.id)&&Q.type==="pad"&&Q.points.length>0&&Q.points[0].id!==void 0).map(Q=>{const Te=Q.points[0].id;if(Te===void 0)throw new Error("Unexpected undefined id");return{stroke:Q,nodeId:Te}}).sort((Q,Te)=>Q.nodeId-Te.nodeId),Ce=Pe.length>0?Pe:P.filter(Q=>u.has(Q.id)&&Q.type==="via"&&Q.points.length>0&&Q.points[0].id!==void 0).map(Q=>{const Te=Q.points[0].id;if(Te===void 0)throw new Error("Unexpected undefined id");return{stroke:Q,nodeId:Te}}).sort((Q,Te)=>Q.nodeId-Te.nodeId),ke=Ce.length;if(ke===0){console.warn("No vias or pads with Node IDs found in selection");return}const fe=Math.floor(ke/Ae);if(fe===0){console.warn(`Not enough ${Pe.length>0?"pads":"vias"} (${ke}) for ${Ae} components`);return}[...de].sort((Q,Te)=>Q.id.localeCompare(Te.id)).forEach((Q,Te)=>{const Y=Te*fe,T=Y+fe,_=Ce.slice(Y,T).map(Ue=>Ue.nodeId.toString()),$=_f(Q,_,P);Q.layer==="top"?te(Ue=>Ue.map(Ke=>{if(Ke.id===Q.id){const ct={...Ke,pinCount:fe,pinConnections:_};return $&&(ct.pinPolarities=$),ct}return Ke})):ze(Ue=>Ue.map(Ke=>{if(Ke.id===Q.id){const ct={...Ke,pinCount:fe,pinConnections:_};return $&&(ct.pinPolarities=$),ct}return Ke}))});const O=Pe.length>0?"pads":"vias";console.log(`Connected ${Ae} components of type ${b.componentType} to ${ke} ${O} (${fe} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:de=>{de.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:de=>{de.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),i.jsxs("div",{children:["Abbreviation: ",b.abbreviation||"(empty)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:b.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:b.color})]}),i.jsxs("div",{children:["Size: ",b.size]}),i.jsxs("div",{children:["Pin Count: ",b.pinCount]}),b.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[b.resistance&&i.jsxs("div",{children:["Resistance: ",b.resistance]}),b.power&&i.jsxs("div",{children:["Power: ",b.power]}),b.tolerance&&i.jsxs("div",{children:["Tolerance: ",b.tolerance]})]}),b.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[b.capacitance&&i.jsxs("div",{children:["Capacitance: ",b.capacitance]}),b.voltage&&i.jsxs("div",{children:["Voltage: ",b.voltage]}),b.dielectric&&i.jsxs("div",{children:["Dielectric: ",b.dielectric]}),b.tolerance&&i.jsxs("div",{children:["Tolerance: ",b.tolerance]})]}),b.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[b.capacitance&&i.jsxs("div",{children:["Capacitance: ",b.capacitance]}),b.voltage&&i.jsxs("div",{children:["Voltage: ",b.voltage]}),b.tolerance&&i.jsxs("div",{children:["Tolerance: ",b.tolerance]}),b.polarity&&i.jsxs("div",{children:["Polarity: ",b.polarity]}),b.esr&&i.jsxs("div",{children:["ESR: ",b.esr]}),b.temperature&&i.jsxs("div",{children:["Temperature: ",b.temperature]})]}),b.pinConnections&&b.pinConnections.length>0&&(()=>{const de=b.componentType==="Electrolytic Capacitor"||b.componentType==="Diode"||b.componentType==="Battery"||b.componentType==="ZenerDiode",Ae=b.componentType==="Capacitor"&&"dielectric"in b&&b.dielectric==="Tantalum",Pe=de||Ae;return i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),Pe&&i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:b.pinConnections.map((Ce,ke)=>{const fe=b.pinPolarities&&b.pinPolarities.length>ke?b.pinPolarities[ke]:"";return i.jsxs("tr",{style:{backgroundColor:ke%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ke+1}),Pe&&i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:fe==="+"?"#d32f2f":fe==="-"?"#1976d2":"#999"},children:fe||"-"}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Ce||"(not connected)"})]},ke)})})]})]})})(),"manufacturer"in b&&b.manufacturer&&i.jsxs("div",{children:["Manufacturer: ",b.manufacturer]}),"partNumber"in b&&b.partNumber&&i.jsxs("div",{children:["Part Number: ",b.partNumber]}),b.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[b.diodeType&&i.jsxs("div",{children:["Type: ",b.diodeType]}),b.voltage&&i.jsxs("div",{children:["Voltage: ",b.voltage]}),b.current&&i.jsxs("div",{children:["Current: ",b.current]}),b.ledColor&&i.jsxs("div",{children:["LED Color: ",b.ledColor]})]}),b.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[b.voltage&&i.jsxs("div",{children:["Voltage: ",b.voltage]}),b.capacity&&i.jsxs("div",{children:["Capacity: ",b.capacity]}),b.chemistry&&i.jsxs("div",{children:["Chemistry: ",b.chemistry]})]}),b.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[b.current&&i.jsxs("div",{children:["Current: ",b.current]}),b.voltage&&i.jsxs("div",{children:["Voltage: ",b.voltage]}),b.fuseType&&i.jsxs("div",{children:["Type: ",b.fuseType]})]}),b.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[b.impedance&&i.jsxs("div",{children:["Impedance: ",b.impedance]}),b.current&&i.jsxs("div",{children:["Current: ",b.current]})]}),b.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[b.connectorType&&i.jsxs("div",{children:["Type: ",b.connectorType]}),b.gender&&i.jsxs("div",{children:["Gender: ",b.gender]})]}),b.componentType==="Jumper"&&i.jsx(i.Fragment,{children:b.positions&&i.jsxs("div",{children:["Positions: ",b.positions]})}),b.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[b.coilVoltage&&i.jsxs("div",{children:["Coil Voltage: ",b.coilVoltage]}),b.contactType&&i.jsxs("div",{children:["Contact Type: ",b.contactType]}),b.current&&i.jsxs("div",{children:["Current: ",b.current]})]}),b.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[b.inductance&&i.jsxs("div",{children:["Inductance: ",b.inductance]}),b.current&&i.jsxs("div",{children:["Current: ",b.current]}),b.resistance&&i.jsxs("div",{children:["DC Resistance: ",b.resistance]})]}),b.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[b.impedance&&i.jsxs("div",{children:["Impedance: ",b.impedance]}),b.power&&i.jsxs("div",{children:["Power: ",b.power]})]}),b.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[b.motorType&&i.jsxs("div",{children:["Type: ",b.motorType]}),b.voltage&&i.jsxs("div",{children:["Voltage: ",b.voltage]}),b.current&&i.jsxs("div",{children:["Current: ",b.current]})]}),b.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[b.inputVoltage&&i.jsxs("div",{children:["Input Voltage: ",b.inputVoltage]}),b.outputVoltage&&i.jsxs("div",{children:["Output Voltage: ",b.outputVoltage]}),b.current&&i.jsxs("div",{children:["Current: ",b.current]})]}),b.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[b.transistorType&&i.jsxs("div",{children:["Type: ",b.transistorType]}),b.polarity&&i.jsxs("div",{children:["Polarity: ",b.polarity]}),b.voltage&&i.jsxs("div",{children:["Voltage: ",b.voltage]}),b.current&&i.jsxs("div",{children:["Current: ",b.current]})]}),b.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[b.resistance&&i.jsxs("div",{children:["Resistance: ",b.resistance]}),b.configuration&&i.jsxs("div",{children:["Configuration: ",b.configuration]})]}),b.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[b.resistance&&i.jsxs("div",{children:["Resistance: ",b.resistance]}),b.thermistorType&&i.jsxs("div",{children:["Type: ",b.thermistorType]}),b.beta&&i.jsxs("div",{children:["Beta: ",b.beta]})]}),b.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[b.switchType&&i.jsxs("div",{children:["Type: ",b.switchType]}),b.current&&i.jsxs("div",{children:["Current: ",b.current]}),b.voltage&&i.jsxs("div",{children:["Voltage: ",b.voltage]})]}),b.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[b.primaryVoltage&&i.jsxs("div",{children:["Primary Voltage: ",b.primaryVoltage]}),b.secondaryVoltage&&i.jsxs("div",{children:["Secondary Voltage: ",b.secondaryVoltage]}),b.power&&i.jsxs("div",{children:["Power: ",b.power]}),b.turns&&i.jsxs("div",{children:["Turns Ratio: ",b.turns]})]}),b.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:b.signal&&i.jsxs("div",{children:["Signal: ",b.signal]})}),b.componentType==="IntegratedCircuit"&&i.jsx(i.Fragment,{children:b.datasheet&&i.jsxs("div",{children:["Datasheet: ",i.jsx("a",{href:b.datasheet,target:"_blank",rel:"noopener noreferrer",children:b.datasheet})]})}),b.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:b.tubeType&&i.jsxs("div",{children:["Type: ",b.tubeType]})}),b.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[b.vrType&&i.jsxs("div",{children:["Type: ",b.vrType]}),b.resistance&&i.jsxs("div",{children:["Resistance: ",b.resistance]}),b.power&&i.jsxs("div",{children:["Power: ",b.power]}),b.taper&&i.jsxs("div",{children:["Taper: ",b.taper]})]}),b.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[b.frequency&&i.jsxs("div",{children:["Frequency: ",b.frequency]}),b.loadCapacitance&&i.jsxs("div",{children:["Load Capacitance: ",b.loadCapacitance]}),b.tolerance&&i.jsxs("div",{children:["Tolerance: ",b.tolerance]})]}),b.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[b.voltage&&i.jsxs("div",{children:["Zener Voltage: ",b.voltage]}),b.power&&i.jsxs("div",{children:["Power: ",b.power]}),b.tolerance&&i.jsxs("div",{children:["Tolerance: ",b.tolerance]})]}),i.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:i.jsxs("div",{children:["Position: x=",b.x.toFixed(2),", y=",b.y.toFixed(2)]})})]})]},b.id))})(),u.size>0&&P.filter(z=>u.has(z.id)&&z.type==="via"&&z.points.length>0).map(z=>{const b=z.points[0],de=z.viaType||(b.id!==void 0?ne(b.id,ce):"Via (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:de})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[b.id&&i.jsxs("div",{children:["Node ID: ",b.id]}),i.jsx("div",{children:"Layer: Top and Bottom"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:z.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:z.color})]}),i.jsxs("div",{children:["Size: ",z.size]}),i.jsxs("div",{children:["Position: x=",b.x.toFixed(2),", y=",b.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:z.notes||"",readOnly:!0,onClick:V,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},z.id)}),u.size>0&&P.filter(z=>u.has(z.id)&&z.type==="pad"&&z.points.length>0).map(z=>{const b=z.points[0],de=z.padType||(b.id!==void 0?Se(b.id,ce):"Pad (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:de})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[b.id&&i.jsxs("div",{children:["Node ID: ",b.id]}),i.jsxs("div",{children:["Layer: ",z.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:z.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:z.color})]}),i.jsxs("div",{children:["Size: ",z.size]}),i.jsxs("div",{children:["Position: x=",b.x.toFixed(2),", y=",b.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:z.notes||"",readOnly:!0,onClick:V,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},z.id)}),u.size>0&&P.filter(z=>u.has(z.id)&&z.type==="testPoint"&&z.points.length>0).map(z=>{const b=z.points[0],de=z.testPointType||(b.id!==void 0?R(b.id,ce):"Test Point (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:de})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[b.id&&i.jsxs("div",{children:["Node ID: ",b.id]}),i.jsxs("div",{children:["Layer: ",z.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:z.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:z.color})]}),i.jsxs("div",{children:["Size: ",z.size]}),i.jsxs("div",{children:["Position: x=",b.x.toFixed(2),", y=",b.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:z.notes||"",readOnly:!0,onClick:V,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},z.id)}),u.size>0&&P.filter(z=>u.has(z.id)&&z.type==="trace").map(z=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:z.type||"unknown"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[z.points.length>0&&i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",z.points.length]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:z.points.map((b,de)=>i.jsxs("tr",{style:{backgroundColor:de%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:de}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:b.x.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:b.y.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:b.id||"(none)"})]},de))})]})]}),i.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",z.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:z.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:z.color})]}),i.jsxs("div",{children:["Size: ",z.size]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:z.notes||"",readOnly:!0,onClick:V,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},z.id)),d.size>0&&p.filter(z=>d.has(z.id)).map(z=>{const b=ce.find(de=>de.id===z.powerBusId);return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:z.type||(b?`${b.name} Power Node`:"Power Node")})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",z.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:z.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:z.color})]}),i.jsxs("div",{children:["Size: ",z.size]}),i.jsxs("div",{children:["Layer: ",z.layer]}),i.jsxs("div",{children:["Power Bus: ",b?.name||z.powerBusId||"(unknown)"]}),i.jsxs("div",{children:["Position: x=",z.x.toFixed(2),", y=",z.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:z.notes||"",readOnly:!0,onClick:V,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},z.id)}),D.size>0&&E.filter(z=>D.has(z.id)).map(z=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:z.type||"Ground Node"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",z.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:z.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:z.color})]}),i.jsxs("div",{children:["Size: ",z.size]}),i.jsxs("div",{children:["Position: x=",z.x.toFixed(2),", y=",z.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:z.notes||"",readOnly:!0,onClick:V,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},z.id))]})})]})},Un=200,mx=({visible:c,selectedIds:u,selectedComponentIds:x,selectedPowerIds:d,selectedGroundIds:D,drawingStrokes:P,componentsTop:pe,componentsBottom:J,powers:p,grounds:E,powerBuses:ce,onClose:xe,setComponentsTop:te,setComponentsBottom:ze,setDrawingStrokes:ne,setPowerSymbols:Se,setGroundSymbols:R,determineViaType:W,determinePadType:Ie,determineTestPointType:X,position:Be,isDragging:V,onDragStart:k})=>{const[A,z]=S.useState(new Map),b=S.useRef(""),de=()=>[...Array.from(u).sort(),...Array.from(x).sort(),...Array.from(d).sort(),...Array.from(D).sort()].join(",");if(S.useEffect(()=>{if(!c)return;const Y=de();Y!==b.current&&(b.current=Y,z(T=>{const N=new Map;return[...pe,...J].filter(_=>x.has(_.id)).forEach(_=>{const $=T.get(_.id);N.set(_.id,$!==void 0?$:_.notes||"")}),P.filter(_=>u.has(_.id)).forEach(_=>{const $=T.get(_.id);N.set(_.id,$!==void 0?$:_.notes||"")}),p.filter(_=>d.has(_.id)).forEach(_=>{const $=T.get(_.id);N.set(_.id,$!==void 0?$:_.notes||"")}),E.filter(_=>D.has(_.id)).forEach(_=>{const $=T.get(_.id);N.set(_.id,$!==void 0?$:_.notes||"")}),N}))},[c,u,x,d,D,P,pe,J,p,E]),!c)return null;const Ae=Be?{position:"fixed",left:`${Be.x}px`,top:`${Be.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:V?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},Pe={padding:"20px",overflow:"auto",flex:1},Ce=P.filter(Y=>u.has(Y.id)).length,ke=[...pe,...J].filter(Y=>x.has(Y.id)).length,fe=p.filter(Y=>d.has(Y.id)).length,I=E.filter(Y=>D.has(Y.id)).length,O=Ce+ke+fe+I,Q=(Y,T)=>{const N=T.length>Un?T.substring(0,Un):T;z(_=>{const $=new Map(_);return $.set(Y,N),$})},Te=()=>{te(Y=>Y.map(T=>{if(x.has(T.id)&&A.has(T.id)){const N=A.get(T.id)||"";return{...T,notes:N.trim()===""?null:N.trim()}}return T})),ze(Y=>Y.map(T=>{if(x.has(T.id)&&A.has(T.id)){const N=A.get(T.id)||"";return{...T,notes:N.trim()===""?null:N.trim()}}return T})),ne(Y=>Y.map(T=>{if(u.has(T.id)&&A.has(T.id)){const N=A.get(T.id)||"";return{...T,notes:N.trim()===""?null:N.trim()}}return T})),Se(Y=>Y.map(T=>{if(d.has(T.id)&&A.has(T.id)){const N=A.get(T.id)||"";return{...T,notes:N.trim()===""?null:N.trim()}}return T})),R(Y=>Y.map(T=>{if(D.has(T.id)&&A.has(T.id)){const N=A.get(T.id)||"";return{...T,notes:N.trim()===""?null:N.trim()}}return T}))};return i.jsxs("div",{style:Ae,children:[i.jsxs("div",{onMouseDown:Y=>{const T=Y.target;T.tagName==="BUTTON"||T.closest("button")||Be&&k(Y)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:V?"grabbing":Be?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (N)"}),i.jsx("button",{onClick:xe,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:Pe,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[i.jsx("div",{style:{padding:"12px 16px",backgroundColor:O>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:O>0?"#333":"#856404",marginBottom:"8px"},children:O>0?`${O} Object${O!==1?"s":""} Selected`:"Zero Objects Selected"}),O===0?i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):i.jsxs(i.Fragment,{children:[[...pe,...J].filter(Y=>x.has(Y.id)).map(Y=>{const T=A.get(Y.id)||"",N=T.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsxs("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:[Md(Y.componentType),Y.designator&&Y.designator.trim()?` (${Y.designator.trim()})`:""]})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:T,onChange:_=>Q(Y.id,_.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:N>=Un?"#d32f2f":"#666",textAlign:"right"},children:[N," / ",Un]})]})]},Y.id)}),P.filter(Y=>u.has(Y.id)&&Y.type==="via"&&Y.points.length>0).map(Y=>{const T=Y.points[0],N=Y.viaType||(T.id!==void 0?W(T.id,ce):"Via (Signal)"),_=A.get(Y.id)||"",$=_.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:N})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:T.id&&i.jsxs("div",{children:["Node ID: ",T.id]})}),i.jsx("textarea",{value:_,onChange:Ue=>Q(Y.id,Ue.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:$>=Un?"#d32f2f":"#666",textAlign:"right"},children:[$," / ",Un]})]})]},Y.id)}),P.filter(Y=>u.has(Y.id)&&Y.type==="pad"&&Y.points.length>0).map(Y=>{const T=Y.points[0],N=Y.padType||(T.id!==void 0?Ie(T.id,ce):"Pad (Signal)"),_=A.get(Y.id)||"",$=_.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:N})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:T.id&&i.jsxs("div",{children:["Node ID: ",T.id]})}),i.jsx("textarea",{value:_,onChange:Ue=>Q(Y.id,Ue.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:$>=Un?"#d32f2f":"#666",textAlign:"right"},children:[$," / ",Un]})]})]},Y.id)}),P.filter(Y=>u.has(Y.id)&&Y.type==="testPoint"&&Y.points.length>0).map(Y=>{const T=Y.points[0],N=Y.testPointType||(T.id!==void 0?X(T.id,ce):"Test Point (Signal)"),_=A.get(Y.id)||"",$=_.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:N})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:T.id&&i.jsxs("div",{children:["Node ID: ",T.id]})}),i.jsx("textarea",{value:_,onChange:Ue=>Q(Y.id,Ue.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:$>=Un?"#d32f2f":"#666",textAlign:"right"},children:[$," / ",Un]})]})]},Y.id)}),P.filter(Y=>u.has(Y.id)&&Y.type==="trace").map(Y=>{const T=A.get(Y.id)||"",N=T.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:Y.type||"unknown"})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:T,onChange:_=>Q(Y.id,_.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:N>=Un?"#d32f2f":"#666",textAlign:"right"},children:[N," / ",Un]})]})]},Y.id)}),p.filter(Y=>d.has(Y.id)).map(Y=>{const T=ce.find(Ue=>Ue.id===Y.powerBusId),N=Y.type||(T?`${T.name} Power Node`:"Power Node"),_=A.get(Y.id)||"",$=_.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:N})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",Y.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:_,onChange:Ue=>Q(Y.id,Ue.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:$>=Un?"#d32f2f":"#666",textAlign:"right"},children:[$," / ",Un]})]})]},Y.id)}),E.filter(Y=>D.has(Y.id)).map(Y=>{const T=Y.type||"Ground Node",N=A.get(Y.id)||"",_=N.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:T})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",Y.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:N,onChange:$=>Q(Y.id,$.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:_>=Un?"#d32f2f":"#666",textAlign:"right"},children:[_," / ",Un]})]})]},Y.id)}),i.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[i.jsx("button",{onClick:xe,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor="#616161"},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="#757575"},children:"Close"}),i.jsx("button",{onClick:Te,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#2196F3",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor="#1976D2"},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="#2196F3"},children:"Save"})]})]})]})})]})},Sx=({visible:c,projectNotes:u,setProjectNotes:x,onClose:d,position:D,isDragging:P,onDragStart:pe})=>{const[J,p]=S.useState([]),[E,ce]=S.useState(null),[xe,te]=S.useState(null),ze=S.useRef(new Map),[ne,Se]=S.useState({width:Math.min(window.innerWidth*.85,1400),height:window.innerHeight*.7}),[R,W]=S.useState(!1),[Ie,X]=S.useState({x:0,y:0,width:0,height:0});S.useEffect(()=>{c&&(p([...u]),ce(null),te(null))},[c,u]),S.useEffect(()=>{if(!R)return;const fe=O=>{const Q=O.clientX-Ie.x,Te=O.clientY-Ie.y,Y=Math.max(400,Math.min(window.innerWidth-20,Ie.width+Q)),T=Math.max(300,Math.min(window.innerHeight-20,Ie.height+Te));Se({width:Y,height:T})},I=()=>{W(!1)};return document.addEventListener("mousemove",fe),document.addEventListener("mouseup",I),()=>{document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",I)}},[R,Ie]);const Be=fe=>{fe.preventDefault(),fe.stopPropagation(),W(!0),X({x:fe.clientX,y:fe.clientY,width:ne.width,height:ne.height})};if(!c)return null;const V=()=>{const fe={name:"",value:"",checked:!1};p([...J,fe]),ce(J.length),te("name")},k=fe=>{const I=J.filter((O,Q)=>Q!==fe);p(I),E===fe?(ce(null),te(null)):E!==null&&E>fe&&ce(E-1)},A=()=>{const fe=J.filter(I=>I.name.trim()!==""||I.value.trim()!=="");x(fe),d()},z=()=>{p([...u]),ce(null),te(null),d()},b=(fe,I,O)=>{const Q=[...J];Q[fe]={...Q[fe],[I]:O},p(Q)},de=(fe,I)=>{const O=[...J];O[fe]={...O[fe],checked:I},p(O)},Ae=(fe,I,O)=>{fe.stopPropagation();const Q=fe.currentTarget,Te=Q.selectionStart,Y=Q.value.length,T=Q.selectionStart!==Q.selectionEnd;if(!(fe.key==="Enter"&&fe.altKey)){if(fe.key==="ArrowRight"&&!fe.ctrlKey&&!fe.shiftKey&&!fe.altKey){if(Te===Y&&!T&&O==="name"){fe.preventDefault();const N=`${I}-value`,_=ze.current.get(N);_&&(_.focus(),_.setSelectionRange(0,0))}return}if(fe.key==="ArrowLeft"&&!fe.ctrlKey&&!fe.shiftKey&&!fe.altKey){if(Te===0&&!T&&O==="value"){fe.preventDefault();const N=`${I}-name`,_=ze.current.get(N);_&&(_.focus(),_.setSelectionRange(_.value.length,_.value.length))}return}if(fe.key==="ArrowDown"&&!fe.ctrlKey&&!fe.shiftKey&&!fe.altKey){if(fe.preventDefault(),I<J.length-1){const N=`${I+1}-${O}`,_=ze.current.get(N);if(_){_.focus();const $=Math.min(Te,_.value.length);_.setSelectionRange($,$)}}else{const N=J.length;V(),setTimeout(()=>{const _=`${N}-${O}`,$=ze.current.get(_);$&&($.focus(),$.setSelectionRange(0,0))},0)}return}if(fe.key==="ArrowUp"&&!fe.ctrlKey&&!fe.shiftKey&&!fe.altKey){if(fe.preventDefault(),I>0){const N=`${I-1}-${O}`,_=ze.current.get(N);if(_){_.focus();const $=Math.min(Te,_.value.length);_.setSelectionRange($,$)}}return}if(fe.key==="Enter"&&!fe.altKey&&!fe.shiftKey){if(fe.preventDefault(),O==="name"){const N=`${I}-value`,_=ze.current.get(N);_&&(_.focus(),_.setSelectionRange(0,0))}else if(O==="value")if(I<J.length-1){const N=`${I+1}-name`,_=ze.current.get(N);_&&(_.focus(),_.setSelectionRange(0,0))}else{const N=J.length;V(),setTimeout(()=>{const _=`${N}-name`,$=ze.current.get(_);$&&($.focus(),$.setSelectionRange(0,0))},0)}return}if(fe.key==="Tab"&&!fe.shiftKey){if(fe.preventDefault(),O==="name"){const N=`${I}-value`,_=ze.current.get(N);_&&(_.focus(),_.select())}else if(O==="value")if(I<J.length-1){const N=`${I+1}-name`,_=ze.current.get(N);_&&(_.focus(),_.select())}else{const N=J.length;V(),setTimeout(()=>{const _=`${N}-name`,$=ze.current.get(_);$&&$.focus()},0)}return}if(fe.key==="Tab"&&fe.shiftKey){if(fe.preventDefault(),O==="value"){const N=`${I}-name`,_=ze.current.get(N);_&&(_.focus(),_.select())}else if(O==="name"&&I>0){const N=`${I-1}-value`,_=ze.current.get(N);_&&(_.focus(),_.select())}return}}},Pe=(fe,I)=>{ce(fe),te(I)},Ce=()=>{},ke={position:"fixed",top:D?.y??100,left:D?.x??(window.innerWidth-ne.width)/2,width:`${ne.width}px`,height:`${ne.height}px`,backgroundColor:"#fff",borderRadius:8,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:P?"grabbing":"default",overflow:"hidden"};return i.jsxs("div",{style:ke,children:[i.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e0e0e0",background:"#888",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none"},onMouseDown:pe,children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Project Notes / TODO List (L)"}),i.jsx("button",{onClick:z,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),i.jsxs("div",{className:"project-notes-content",style:{padding:0,flex:1,overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",minHeight:0,scrollbarWidth:"thin",scrollbarColor:"#888 #f0f0f0"},children:[i.jsxs("div",{style:{border:"none",borderTop:"1px solid #ccc",borderRadius:0,overflow:"visible",marginBottom:"16px",backgroundColor:"#e0e0e0",flexShrink:0},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",backgroundColor:"#e0e0e0",borderBottom:"1px solid #ccc",position:"sticky",top:0,zIndex:10},children:[i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:i.jsx("label",{className:"radio-label",style:{margin:0,cursor:"default"},children:i.jsx("input",{type:"checkbox",disabled:!0,style:{opacity:.5}})})}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Item"}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Notes"}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",color:"#000"}})]}),i.jsx("div",{children:J.length===0?i.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:'No notes. Click "Add Note" to create one.'}):J.map((fe,I)=>i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",borderBottom:"1px solid #ccc",backgroundColor:"#fff"},children:[i.jsx("div",{style:{padding:"8px 12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("label",{className:"radio-label",style:{margin:0,cursor:"pointer"},children:i.jsx("input",{type:"checkbox",checked:fe.checked||!1,onChange:O=>de(I,O.target.checked)})})}),i.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:i.jsx("textarea",{ref:O=>{O?ze.current.set(`${I}-name`,O):ze.current.delete(`${I}-name`)},value:fe.name,onChange:O=>b(I,"name",O.target.value),onFocus:()=>Pe(I,"name"),onBlur:Ce,onKeyDown:O=>Ae(O,I,"name"),placeholder:"Item name...",rows:1,style:{width:"100%",padding:"4px 6px",border:E===I&&xe==="name"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:O=>{const Q=O.target;Q.style.height="auto",Q.style.height=`${Q.scrollHeight}px`}})}),i.jsx("div",{style:{padding:"4px",borderRight:"1px solid #ccc"},children:i.jsx("textarea",{ref:O=>{O?ze.current.set(`${I}-value`,O):ze.current.delete(`${I}-value`)},value:fe.value,onChange:O=>b(I,"value",O.target.value),onFocus:()=>Pe(I,"value"),onBlur:Ce,onKeyDown:O=>Ae(O,I,"value"),placeholder:"Notes...",rows:1,style:{width:"100%",padding:"4px 6px",border:E===I&&xe==="value"?"2px solid #0b5fff":"1px solid transparent",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"none",minHeight:"24px",lineHeight:"1.4",overflow:"hidden",outline:"none",boxSizing:"border-box"},onInput:O=>{const Q=O.target;Q.style.height="auto",Q.style.height=`${Q.scrollHeight}px`}})}),i.jsx("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("button",{onClick:()=>k(I),style:{background:"#f44336",color:"#fff",border:"none",borderRadius:3,padding:"4px 8px",cursor:"pointer",fontSize:"11px"},title:"Delete note",children:"Delete"})})]},I))})]}),i.jsx("div",{style:{padding:"16px",flexShrink:0},children:i.jsx("button",{onClick:V,style:{background:"#888",color:"#fff",border:"none",borderRadius:4,padding:"8px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500,alignSelf:"flex-start"},children:"+ Add Note"})})]}),i.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px",flexShrink:0},children:[i.jsx("button",{onClick:z,style:{background:"#f5f5f5",color:"#000",border:"1px solid #ddd",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),i.jsx("button",{onClick:A,style:{background:"#0b5fff",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500},children:"Save"})]}),i.jsx("div",{onMouseDown:Be,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:10001},title:"Drag to resize"})]})},wx=({visible:c,dimensions:u,onSave:x,onClose:d})=>{const[D,P]=S.useState(""),[pe,J]=S.useState(""),[p,E]=S.useState("inches");S.useEffect(()=>{c&&u?(P(u.width.toString()),J(u.height.toString()),E(u.unit)):c&&(P(""),J(""),E("inches"))},[c,u]);const ce=()=>{const te=parseFloat(D),ze=parseFloat(pe);if(isNaN(te)||te<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(ze)||ze<=0){alert("Please enter a valid height greater than 0");return}x({width:te,height:ze,unit:p}),d()},xe=()=>{d()};return c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:te=>{te.target===te.currentTarget&&xe()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:te=>te.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:D,onChange:te=>P(te.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:p,onChange:te=>E(te.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:pe,onChange:te=>J(te.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:p,onChange:te=>E(te.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:xe,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),i.jsx("button",{onClick:ce,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},jx=({visible:c,onClose:u,topImage:x,bottomImage:d,selectedImageForTransform:D,setSelectedImageForTransform:P,transformMode:pe,setTransformMode:J,updateImageTransform:p,resetImageTransform:E,setCurrentTool:ce,isGrayscale:xe,setIsGrayscale:te,areImagesLocked:ze})=>{const[ne,Se]=S.useState(null),[R,W]=S.useState(!1),Ie=S.useRef({x:0,y:0}),X=S.useRef(null);S.useEffect(()=>{c&&ne===null&&Se({x:window.innerWidth-320-20,y:80})},[c,ne]),S.useEffect(()=>{c||Se(null)},[c]);const Be=S.useCallback($=>{if(X.current){const Ue=X.current.getBoundingClientRect();Ie.current={x:$.clientX-Ue.left,y:$.clientY-Ue.top},W(!0)}},[]);if(S.useEffect(()=>{if(!R)return;const $=Ke=>{const ct=Ke.clientX-Ie.current.x,gn=Ke.clientY-Ie.current.y,We=X.current?.offsetWidth||320,ki=X.current?.offsetHeight||600,Nn=Math.max(0,Math.min(ct,window.innerWidth-We)),Ri=Math.max(0,Math.min(gn,window.innerHeight-ki));Se({x:Nn,y:Ri})},Ue=()=>{W(!1)};return document.addEventListener("mousemove",$),document.addEventListener("mouseup",Ue),()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",Ue)}},[R]),!c)return null;const V=x!==null,k=d!==null,A=V||k,z=V&&k,b=D||(V?"top":k?"bottom":null),de=()=>b==="top"&&x?x.brightness??100:b==="bottom"&&d?d.brightness??100:b==="both"&&x?x.brightness??100:100,Ae=()=>b==="top"&&x?x.contrast??100:b==="bottom"&&d?d.contrast??100:b==="both"&&x?x.contrast??100:100,Pe=de(),Ce=Ae(),ke=!A||ze,fe=()=>{if(!(!b||ke))if(b==="both"){const $=!x?.flipX;p("both",{flipX:$})}else{const $=b==="top"?x?.flipX||!1:d?.flipX||!1;p(b,{flipX:!$})}},I=()=>{if(!(!b||ke))if(b==="both"){const $=!x?.flipY;p("both",{flipY:$})}else{const $=b==="top"?x?.flipY||!1:d?.flipY||!1;p(b,{flipY:!$})}},O=$=>{ke||(b&&P(b),J($),ce("transform"))},Q=$=>{!b||ke||p(b,{brightness:$})},Te=$=>{!b||ke||p(b,{contrast:$})},Y=()=>{ke||(b&&P(b),ce("transform"),te(!xe))},T=()=>{ke||(ce("transform"),E())},N=($,Ue=!1)=>({display:"block",width:"100%",textAlign:"left",padding:"8px 12px",color:$?"#666":"#f2f2f2",background:Ue?"#3a3a42":"transparent",border:"none",borderRadius:4,cursor:$?"not-allowed":"pointer",fontSize:"13px",transition:"background 0.15s"}),_=($,Ue)=>({display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",color:$?"#666":"#f2f2f2",cursor:$?"not-allowed":"pointer",fontSize:"13px",background:Ue?"#3a3a42":"transparent",borderRadius:4,transition:"background 0.15s"});return i.jsxs("div",{ref:X,style:{position:"fixed",top:ne?.y??80,left:ne?.x??window.innerWidth-340,backgroundColor:"#2b2b31",borderRadius:8,minWidth:"320px",maxWidth:"400px",maxHeight:"calc(100vh - 100px)",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24",zIndex:10001},children:[i.jsxs("div",{onMouseDown:Be,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",background:"linear-gradient(to bottom, #3a3a42, #2b2b31)",borderTopLeftRadius:8,borderTopRightRadius:8,borderBottom:"1px solid #1f1f24",cursor:R?"grabbing":"grab",userSelect:"none"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{style:{color:"#888",fontSize:"14px"},children:""}),i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#f2f2f2"},children:"Transform Images"})]}),i.jsx("button",{onClick:u,style:{background:"transparent",border:"none",color:"#888",fontSize:"16px",cursor:"pointer",padding:"2px 6px",lineHeight:1,borderRadius:4},onMouseEnter:$=>{$.currentTarget.style.background="#444",$.currentTarget.style.color="#fff"},onMouseLeave:$=>{$.currentTarget.style.background="transparent",$.currentTarget.style.color="#888"},children:""})]}),i.jsxs("div",{style:{padding:"16px"},children:[i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"#888",marginBottom:"8px",fontWeight:500},children:"Apply to:"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsxs("label",{style:_(!V,b==="top"),children:[i.jsx("input",{type:"radio",name:"imageSelection",checked:b==="top",onChange:()=>P("top"),disabled:!V,style:{accentColor:"#6b9fff"}}),"Top Image",!V&&i.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),i.jsxs("label",{style:_(!k,b==="bottom"),children:[i.jsx("input",{type:"radio",name:"imageSelection",checked:b==="bottom",onChange:()=>P("bottom"),disabled:!k,style:{accentColor:"#6b9fff"}}),"Bottom Image",!k&&i.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(not loaded)"})]}),i.jsxs("label",{style:_(!z,b==="both"),children:[i.jsx("input",{type:"radio",name:"imageSelection",checked:b==="both",onChange:()=>P("both"),disabled:!z,style:{accentColor:"#6b9fff"}}),"Both Images",!z&&i.jsx("span",{style:{fontSize:"11px",color:"#666",marginLeft:"auto"},children:"(need both)"})]})]})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("button",{onClick:fe,disabled:ke,style:N(ke),onMouseEnter:$=>!ke&&($.currentTarget.style.background="#3a3a42"),onMouseLeave:$=>$.currentTarget.style.background="transparent",children:"Horizontal Flip"}),i.jsx("button",{onClick:I,disabled:ke,style:N(ke),onMouseEnter:$=>!ke&&($.currentTarget.style.background="#3a3a42"),onMouseLeave:$=>$.currentTarget.style.background="transparent",children:"Vertical Flip"})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsx("div",{style:{marginBottom:"12px"},children:["nudge","scale","rotate","slant","keystone"].map($=>i.jsxs("button",{onClick:()=>O($),disabled:ke,style:N(ke,pe===$),onMouseEnter:Ue=>!ke&&pe!==$&&(Ue.currentTarget.style.background="#3a3a42"),onMouseLeave:Ue=>pe!==$&&(Ue.currentTarget.style.background="transparent"),children:[pe===$?" ":"","Mode: ",$.charAt(0).toUpperCase()+$.slice(1)]},$))}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[i.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Brightness"}),i.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[Pe,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:Pe,onChange:$=>Q(parseInt($.target.value,10)),disabled:ke,style:{width:"100%",cursor:ke?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[i.jsx("label",{style:{color:"#f2f2f2",fontSize:"13px",fontWeight:500},children:"Contrast"}),i.jsxs("span",{style:{color:"#888",fontSize:"12px",minWidth:"45px",textAlign:"right"},children:[Ce,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:Ce,onChange:$=>Te(parseInt($.target.value,10)),disabled:ke,style:{width:"100%",cursor:ke?"not-allowed":"pointer",accentColor:"#6b9fff"}})]}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsx("div",{style:{marginBottom:"12px"},children:i.jsxs("button",{onClick:Y,disabled:ke,style:N(ke,xe),onMouseEnter:$=>!ke&&!xe&&($.currentTarget.style.background="#3a3a42"),onMouseLeave:$=>!xe&&($.currentTarget.style.background="transparent"),children:[xe?" ":"","Grayscale Mode"]})}),i.jsx("div",{style:{height:1,background:"#444",margin:"16px 0"}}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:[i.jsx("button",{onClick:T,disabled:ke,style:{padding:"8px 16px",background:ke?"#444":"#555",color:ke?"#777":"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:ke?"not-allowed":"pointer",fontSize:"13px",fontWeight:500},children:"Reset Transform"}),i.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#4a9eff",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:500},onMouseEnter:$=>$.currentTarget.style.background="#3a8ee6",onMouseLeave:$=>$.currentTarget.style.background="#4a9eff",children:"Close"})]}),ze&&i.jsx("div",{style:{marginTop:"12px",padding:"8px 12px",background:"#3d2b2b",border:"1px solid #5a3a3a",borderRadius:4,fontSize:"12px",color:"#e88"},children:" Images are locked. Unlock via Images  Lock Images to make changes."})]})]})},Tx=({component:c,componentEditor:u,setComponentEditor:x,areComponentsLocked:d,componentsTop:D,componentsBottom:P,setComponentsTop:pe,setComponentsBottom:J})=>i.jsxs(i.Fragment,{children:[c.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:p=>x({...u,resistance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Le("resistance"),onChange:p=>x({...u,resistanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("resistance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:p=>x({...u,power:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"5%",onChange:p=>x({...u,tolerance:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.05%",children:"0.05%"}),i.jsx("option",{value:"0.1%",children:"0.1%"}),i.jsx("option",{value:"0.25%",children:"0.25%"}),i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:u.capacitance||"",onChange:p=>x({...u,capacitance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:u.capacitanceUnit||Le("capacitance"),onChange:p=>x({...u,capacitanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("capacitance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Le("voltage"),onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-dielectric-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),i.jsxs("select",{id:`component-dielectric-${c.id}`,value:u.dielectric||"Ceramic",onChange:p=>x({...u,dielectric:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Ceramic",children:"Ceramic"}),i.jsx("option",{value:"Tantalum",children:"Tantalum"}),i.jsx("option",{value:"Film",children:"Film"}),i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Mica",children:"Mica"}),i.jsx("option",{value:"Paper",children:"Paper"}),i.jsx("option",{value:"Glass",children:"Glass"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"10%",onChange:p=>x({...u,tolerance:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Film Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:u.capacitance||"",onChange:p=>x({...u,capacitance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:u.capacitanceUnit||Le("capacitance"),onChange:p=>x({...u,capacitanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("capacitance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Le("voltage"),onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-filmtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Film Type:"}),i.jsxs("select",{id:`component-filmtype-${c.id}`,value:u.filmType||"Polyester",onChange:p=>x({...u,filmType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Polyethylene",children:"Polyethylene"}),i.jsx("option",{value:"Polystyrene",children:"Polystyrene"}),i.jsx("option",{value:"Polycarbonate",children:"Polycarbonate"}),i.jsx("option",{value:"PTFE",children:"PTFE (Teflon)"}),i.jsx("option",{value:"PPS",children:"PPS (Polyphenylene Sulfide)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"10%",onChange:p=>x({...u,tolerance:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:u.capacitance||"",onChange:p=>x({...u,capacitance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 100"}),i.jsxs("select",{value:u.capacitanceUnit||"F",onChange:p=>x({...u,capacitanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:[i.jsx("option",{value:"pF",children:"pF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"mF",children:"mF"}),i.jsx("option",{value:"F",children:"F"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 25"}),i.jsx("select",{value:u.voltageUnit||Le("voltage"),onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"20%",onChange:p=>x({...u,tolerance:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:u.polarityCapacitor||c.polarity||"Positive",onChange:p=>x({...u,polarityCapacitor:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Positive",children:"Positive"}),i.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),c.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inductance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),i.jsx("input",{id:`component-inductance-${c.id}`,type:"text",value:u.inductance||"",onChange:p=>x({...u,inductance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.inductanceUnit||Le("inductance"),onChange:p=>x({...u,inductanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("inductance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Le("current"),onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:p=>x({...u,resistance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.resistanceUnit||"",onChange:p=>x({...u,resistanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("resistance").map(p=>i.jsx("option",{value:p,children:p},p))})]})]}),c.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-diodetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),i.jsxs("select",{id:`component-diodetype-${c.id}`,value:u.diodeType||"Standard",onChange:p=>x({...u,diodeType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Standard",children:"Standard"}),i.jsx("option",{value:"Zener",children:"Zener"}),i.jsx("option",{value:"LED",children:"LED"}),i.jsx("option",{value:"Schottky",children:"Schottky"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),u.diodeType==="LED"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ledcolor-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),i.jsxs("select",{id:`component-ledcolor-${c.id}`,value:u.ledColor||"",onChange:p=>x({...u,ledColor:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"Red",children:"Red"}),i.jsx("option",{value:"Green",children:"Green"}),i.jsx("option",{value:"Blue",children:"Blue"}),i.jsx("option",{value:"Yellow",children:"Yellow"}),i.jsx("option",{value:"Orange",children:"Orange"}),i.jsx("option",{value:"White",children:"White"}),i.jsx("option",{value:"RGB",children:"RGB"}),i.jsx("option",{value:"IR",children:"IR (Infrared)"}),i.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Le("voltage"),onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Le("current"),onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]})]}),c.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 3.7"}),i.jsx("select",{value:u.voltageUnit||"V",onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),i.jsx("input",{id:`component-capacity-${c.id}`,type:"text",value:u.capacity||"",onChange:p=>x({...u,capacity:p.target.value}),disabled:d,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 2000mAh"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-chemistry-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),i.jsxs("select",{id:`component-chemistry-${c.id}`,value:u.chemistry||"Li-ion",onChange:p=>x({...u,chemistry:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Li-ion",children:"Li-ion"}),i.jsx("option",{value:"LiPo",children:"LiPo"}),i.jsx("option",{value:"NiMH",children:"NiMH"}),i.jsx("option",{value:"NiCd",children:"NiCd"}),i.jsx("option",{value:"Alkaline",children:"Alkaline"}),i.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),i.jsx("option",{value:"Lithium",children:"Lithium"}),i.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),c.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:u.currentUnit||"A",onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:u.voltageUnit||"V",onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-fusetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),i.jsxs("select",{id:`component-fusetype-${c.id}`,value:u.fuseType||"Fast-blow",onChange:p=>x({...u,fuseType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),i.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),i.jsx("option",{value:"Time-delay",children:"Time-delay"}),i.jsx("option",{value:"Resettable",children:"Resettable"}),i.jsx("option",{value:"Cartridge",children:"Cartridge"}),i.jsx("option",{value:"Glass",children:"Glass"}),i.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),c.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-coilvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),i.jsx("input",{id:`component-coilvoltage-${c.id}`,type:"text",value:u.coilVoltage||"",onChange:p=>x({...u,coilVoltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.coilVoltageUnit||Le("voltage"),onChange:p=>x({...u,coilVoltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-contacttype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),i.jsxs("select",{id:`component-contacttype-${c.id}`,value:u.contactType||"SPST",onChange:p=>x({...u,contactType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),i.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),i.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),i.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),i.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),i.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.currentUnit||Le("current"),onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]})]}),c.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-motortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),i.jsxs("select",{id:`component-motortype-${c.id}`,value:u.motorType||"DC",onChange:p=>x({...u,motorType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"DC",children:"DC Motor"}),i.jsx("option",{value:"Stepper",children:"Stepper Motor"}),i.jsx("option",{value:"Servo",children:"Servo Motor"}),i.jsx("option",{value:"Brushless",children:"Brushless DC"}),i.jsx("option",{value:"AC",children:"AC Motor"}),i.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.voltageUnit||Le("voltage"),onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Le("current"),onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]})]}),c.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-switchtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),i.jsxs("select",{id:`component-switchtype-${c.id}`,value:u.switchType||"Toggle",onChange:p=>x({...u,switchType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Toggle",children:"Toggle"}),i.jsx("option",{value:"Push-button",children:"Push-button"}),i.jsx("option",{value:"Slide",children:"Slide"}),i.jsx("option",{value:"Rotary",children:"Rotary"}),i.jsx("option",{value:"DIP",children:"DIP Switch"}),i.jsx("option",{value:"Momentary",children:"Momentary"}),i.jsx("option",{value:"Latching",children:"Latching"}),i.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:u.currentUnit||Le("current"),onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:u.voltageUnit||Le("voltage"),onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]})]}),c.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:u.impedance||"",onChange:p=>x({...u,impedance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:u.impedanceUnit||Le("impedance"),onChange:p=>x({...u,impedanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("impedance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Le("current"),onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]})]}),c.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-connectortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),i.jsx("input",{id:`component-connectortype-${c.id}`,type:"text",value:u.connectorType||"",onChange:p=>x({...u,connectorType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-gender-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),i.jsxs("select",{id:`component-gender-${c.id}`,value:u.gender||"N/A",onChange:p=>x({...u,gender:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),c.componentType==="Jumper"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-positions-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),i.jsx("input",{id:`component-positions-${c.id}`,type:"number",min:"2",value:u.positions||3,onChange:p=>x({...u,positions:parseInt(p.target.value)||3}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"}})]})}),c.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:u.impedance||"",onChange:p=>x({...u,impedance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 8"}),i.jsx("select",{value:u.impedanceUnit||Le("impedance"),onChange:p=>x({...u,impedanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("impedance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:p=>x({...u,power:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]})]}),c.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),i.jsx("input",{id:`component-inputvoltage-${c.id}`,type:"text",value:u.inputVoltage||"",onChange:p=>x({...u,inputVoltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:u.inputVoltageUnit||Le("voltage"),onChange:p=>x({...u,inputVoltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-outputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),i.jsx("input",{id:`component-outputvoltage-${c.id}`,type:"text",value:u.outputVoltage||"",onChange:p=>x({...u,outputVoltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.outputVoltageUnit||Le("voltage"),onChange:p=>x({...u,outputVoltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Le("current"),onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]})]}),c.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-transistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),i.jsxs("select",{id:`component-transistortype-${c.id}`,value:u.transistorType||"BJT",onChange:p=>x({...u,transistorType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),i.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),i.jsx("option",{value:"MOSFET",children:"MOSFET"}),i.jsx("option",{value:"IGBT",children:"IGBT"}),i.jsx("option",{value:"JFET",children:"JFET"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:u.polarity||"NPN",onChange:p=>x({...u,polarity:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NPN",children:"NPN"}),i.jsx("option",{value:"PNP",children:"PNP"}),i.jsx("option",{value:"N-Channel",children:"N-Channel"}),i.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:u.voltageUnit||Le("voltage"),onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:u.current||"",onChange:p=>x({...u,current:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:u.currentUnit||Le("current"),onChange:p=>x({...u,currentUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("current").map(p=>i.jsx("option",{value:p,children:p},p))})]})]}),c.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:p=>x({...u,resistance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Le("resistance"),onChange:p=>x({...u,resistanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("resistance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-configuration-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),i.jsx("input",{id:`component-configuration-${c.id}`,type:"text",value:u.configuration||"",onChange:p=>x({...u,configuration:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),c.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:p=>x({...u,resistance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Le("resistance"),onChange:p=>x({...u,resistanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("resistance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-thermistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),i.jsxs("select",{id:`component-thermistortype-${c.id}`,value:u.thermistorType||"NTC",onChange:p=>x({...u,thermistorType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),i.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-beta-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),i.jsx("input",{id:`component-beta-${c.id}`,type:"text",value:u.beta||"",onChange:p=>x({...u,beta:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),c.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-primaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),i.jsx("input",{id:`component-primaryvoltage-${c.id}`,type:"text",value:u.primaryVoltage||"",onChange:p=>x({...u,primaryVoltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:u.primaryVoltageUnit||Le("voltage"),onChange:p=>x({...u,primaryVoltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-secondaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),i.jsx("input",{id:`component-secondaryvoltage-${c.id}`,type:"text",value:u.secondaryVoltage||"",onChange:p=>x({...u,secondaryVoltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:u.secondaryVoltageUnit||Le("voltage"),onChange:p=>x({...u,secondaryVoltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:p=>x({...u,power:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-turns-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),i.jsx("input",{id:`component-turns-${c.id}`,type:"text",value:u.turns||"",onChange:p=>x({...u,turns:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),c.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-signal-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),i.jsx("input",{id:`component-signal-${c.id}`,type:"text",value:u.signal||"",onChange:p=>x({...u,signal:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),c.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ictype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),i.jsxs("select",{id:`component-ictype-${c.id}`,value:u.icType||"Op-Amp",onChange:p=>x({...u,icType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),i.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),i.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),i.jsx("option",{value:"Logic",children:"Logic"}),i.jsx("option",{value:"Memory",children:"Memory"}),i.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),i.jsx("option",{value:"Timer",children:"Timer"}),i.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),i.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),i.jsx("option",{value:"Comparator",children:"Comparator"}),i.jsx("option",{value:"Transceiver",children:"Transceiver"}),i.jsx("option",{value:"Driver",children:"Driver"}),i.jsx("option",{value:"Amplifier",children:"Amplifier"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-datasheet-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1},children:[i.jsx("input",{id:`component-datasheet-${c.id}`,type:"text",value:u.datasheet||"",onChange:p=>x({...u,datasheet:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"URL"}),u.datasheet&&u.datasheet.trim()&&i.jsx("button",{onClick:p=>{p.preventDefault(),p.stopPropagation();const E=u.datasheet.trim(),ce=E.match(/^https?:\/\//)?E:`https://${E}`;window.open(ce,"_blank","noopener,noreferrer")},style:{background:"transparent",border:"none",cursor:"pointer",padding:"2px",display:"flex",alignItems:"center",justifyContent:"center",opacity:d?.4:1,flexShrink:0},title:"Open URL in new tab",disabled:d,children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#4a9eff"},children:[i.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),i.jsx("polyline",{points:"15 3 21 3 21 9"}),i.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${c.id}`,name:`component-pincount-${c.id}`,type:"number",min:"1",value:u.pinCount,onChange:p=>{const E=Math.max(1,parseInt(p.target.value)||1);x({...u,pinCount:E})},onBlur:p=>{if(d){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const E=Math.max(1,parseInt(p.target.value)||1),xe=(u.layer==="top"?D:P).find(te=>te.id===u.id);if(xe&&E!==xe.pinCount){const te=xe.pinConnections||[],ze=new Array(E).fill("").map((W,Ie)=>Ie<te.length?te[Ie]:""),ne=xe.pinPolarities||[],Se=xe.pinPolarities?new Array(E).fill("").map((W,Ie)=>Ie<ne.length?ne[Ie]:""):void 0,R={...xe,pinCount:E,pinConnections:ze,...Se!==void 0&&{pinPolarities:Se}};u.layer==="top"?pe(W=>W.map(Ie=>Ie.id===u.id?R:Ie)):J(W=>W.map(Ie=>Ie.id===u.id?R:Ie)),x({...u,pinCount:E})}},disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"}})]})]}),c.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tubetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),i.jsx("input",{id:`component-tubetype-${c.id}`,type:"text",value:u.tubeType||"",onChange:p=>x({...u,tubeType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),c.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-vrtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),i.jsxs("select",{id:`component-vrtype-${c.id}`,value:u.vrType||"Potentiometer",onChange:p=>x({...u,vrType:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),i.jsx("option",{value:"Rheostat",children:"Rheostat"}),i.jsx("option",{value:"Trimmer",children:"Trimmer"}),i.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:u.resistance||"",onChange:p=>x({...u,resistance:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:u.resistanceUnit||Le("resistance"),onChange:p=>x({...u,resistanceUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("resistance").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:p=>x({...u,power:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-taper-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),i.jsxs("select",{id:`component-taper-${c.id}`,value:u.taper||"Linear",onChange:p=>x({...u,taper:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Linear",children:"Linear"}),i.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),i.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),c.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-frequency-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),i.jsx("input",{id:`component-frequency-${c.id}`,type:"text",value:u.frequency||"",onChange:p=>x({...u,frequency:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-loadcapacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),i.jsx("input",{id:`component-loadcapacitance-${c.id}`,type:"text",value:u.loadCapacitance||"",onChange:p=>x({...u,loadCapacitance:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"10ppm",onChange:p=>x({...u,tolerance:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"10ppm",children:"10ppm"}),i.jsx("option",{value:"20ppm",children:"20ppm"}),i.jsx("option",{value:"30ppm",children:"30ppm"}),i.jsx("option",{value:"50ppm",children:"50ppm"}),i.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),c.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:u.voltage||"",onChange:p=>x({...u,voltage:p.target.value}),disabled:d,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1},placeholder:"e.g., 5.1"}),i.jsx("select",{value:u.voltageUnit||Le("voltage"),onChange:p=>x({...u,voltageUnit:p.target.value}),disabled:d,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,width:"60px",marginRight:"12px"},children:Lt("voltage").map(p=>i.jsx("option",{value:p,children:p},p))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:u.power||"1/4",onChange:p=>x({...u,power:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:u.tolerance||"5%",onChange:p=>x({...u,tolerance:p.target.value}),disabled:d,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:d?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),Cx=c=>{const u=Ud[c];return!u||!u.prefix||u.prefix.length<1?"?":u.prefix[0].substring(0,1).toUpperCase()},zx=({componentEditor:c,setComponentEditor:u,componentsTop:x,componentsBottom:d,setComponentsTop:D,setComponentsBottom:P,connectingPin:pe,setConnectingPin:J,componentDialogPosition:p,setComponentDialogPosition:E,isDraggingDialog:ce,setIsDraggingDialog:xe,dialogDragOffset:te,setDialogDragOffset:ze,areComponentsLocked:ne,setSelectedComponentIds:Se,setNotesDialogVisible:R})=>{if(!c||!c.visible)return null;let W=x.find(V=>V.id===c.id),Ie="top";if(W||(W=d.find(V=>V.id===c.id),Ie="bottom"),!W)return null;c.layer!==Ie&&u({...c,layer:Ie});const X=V=>{const k={...V},A=c.designator?.trim()||"";k.designator=A,k.x=c.x,k.y=c.y,k.layer=c.layer,k.orientation=c.orientation??0;const z=A.length>0?A.charAt(0).toUpperCase():Cx(V.componentType);if(k.abbreviation=z,"manufacturer"in k&&(k.manufacturer=c.manufacturer?.trim()||void 0),"partNumber"in k&&(k.partNumber=c.partNumber?.trim()||void 0),c.pinCount!==V.pinCount){k.pinCount=c.pinCount;const b=V.pinConnections||[];if(k.pinConnections=new Array(c.pinCount).fill("").map((de,Ae)=>Ae<b.length?b[Ae]:""),V.pinPolarities){const de=V.pinPolarities||[];k.pinPolarities=new Array(c.pinCount).fill("").map((Ae,Pe)=>Pe<de.length?de[Pe]:"")}}else k.pinConnections=V.pinConnections||[],V.pinPolarities&&(k.pinPolarities=V.pinPolarities);return V.componentType==="Resistor"?(k.resistance=c.resistance||void 0,k.resistanceUnit=c.resistanceUnit||void 0,k.power=c.power?`${c.power}W`:void 0,k.tolerance=c.tolerance||void 0):V.componentType==="Capacitor"?(k.capacitance=c.capacitance||void 0,k.capacitanceUnit=c.capacitanceUnit||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.tolerance=c.tolerance||void 0,k.dielectric=c.dielectric||void 0):V.componentType==="Electrolytic Capacitor"?(k.capacitance=c.capacitance||void 0,k.capacitanceUnit=c.capacitanceUnit||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.tolerance=c.tolerance||void 0,k.polarity=c.polarityCapacitor||void 0,k.esr=c.esr||void 0,k.esrUnit=c.esrUnit||void 0,k.temperature=c.temperature||void 0):V.componentType==="Film Capacitor"?(k.capacitance=c.capacitance||void 0,k.capacitanceUnit=c.capacitanceUnit||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.tolerance=c.tolerance||void 0,k.filmType=c.filmType||void 0):V.componentType==="Diode"?(k.diodeType=c.diodeType||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0,k.ledColor=c.ledColor||void 0):V.componentType==="Battery"?(k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.capacity=c.capacity||void 0,k.capacityUnit=c.capacityUnit||void 0,k.chemistry=c.chemistry||void 0):V.componentType==="Fuse"?(k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.fuseType=c.fuseType||void 0):V.componentType==="FerriteBead"?(k.impedance=c.impedance||void 0,k.impedanceUnit=c.impedanceUnit||void 0,k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0):V.componentType==="Connector"?(k.connectorType=c.connectorType||void 0,k.gender=c.gender||void 0):V.componentType==="Jumper"?k.positions=c.positions||void 0:V.componentType==="Relay"?(k.coilVoltage=c.coilVoltage||void 0,k.coilVoltageUnit=c.coilVoltageUnit||void 0,k.contactType=c.contactType||void 0,k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0):V.componentType==="Inductor"?(k.inductance=c.inductance||void 0,k.inductanceUnit=c.inductanceUnit||void 0,k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0,k.resistance=c.resistance||void 0,k.resistanceUnit=c.resistanceUnit||void 0):V.componentType==="Speaker"?(k.impedance=c.impedance||void 0,k.impedanceUnit=c.impedanceUnit||void 0,k.power=c.power?`${c.power}W`:void 0):V.componentType==="Motor"?(k.motorType=c.motorType||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0):V.componentType==="PowerSupply"?(k.inputVoltage=c.inputVoltage||void 0,k.inputVoltageUnit=c.inputVoltageUnit||void 0,k.outputVoltage=c.outputVoltage||void 0,k.outputVoltageUnit=c.outputVoltageUnit||void 0,k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0):V.componentType==="Transistor"?(k.transistorType=c.transistorType||void 0,k.polarity=c.polarity||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0):V.componentType==="ResistorNetwork"?(k.resistance=c.resistance||void 0,k.resistanceUnit=c.resistanceUnit||void 0,k.configuration=c.configuration||void 0):V.componentType==="Thermistor"?(k.resistance=c.resistance||void 0,k.resistanceUnit=c.resistanceUnit||void 0,k.thermistorType=c.thermistorType||void 0,k.beta=c.beta||void 0):V.componentType==="Switch"?(k.switchType=c.switchType||void 0,k.current=c.current||void 0,k.currentUnit=c.currentUnit||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0):V.componentType==="Transformer"?(k.primaryVoltage=c.primaryVoltage||void 0,k.primaryVoltageUnit=c.primaryVoltageUnit||void 0,k.secondaryVoltage=c.secondaryVoltage||void 0,k.secondaryVoltageUnit=c.secondaryVoltageUnit||void 0,k.power=c.power?`${c.power}W`:void 0,k.turns=c.turns||void 0):V.componentType==="TestPoint"?k.signal=c.signal||void 0:V.componentType==="Film Capacitor"?(k.capacitance=c.capacitance||void 0,k.capacitanceUnit=c.capacitanceUnit||void 0,k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.tolerance=c.tolerance||void 0,k.filmType=c.filmType||void 0):V.componentType==="IntegratedCircuit"?(k.description=c.description?.trim()||void 0,k.datasheet=c.datasheet?.trim()||void 0,k.icType=c.icType||void 0):k.description=c.description?.trim()||void 0,V.componentType==="VacuumTube"?k.tubeType=c.tubeType||void 0:V.componentType==="VariableResistor"?(k.vrType=c.vrType||void 0,k.resistance=c.resistance||void 0,k.resistanceUnit=c.resistanceUnit||void 0,k.power=c.power?`${c.power}W`:void 0,k.taper=c.taper||void 0):V.componentType==="Crystal"?(k.frequency=c.frequency||void 0,k.loadCapacitance=c.loadCapacitance||void 0,k.tolerance=c.tolerance||void 0):V.componentType==="ZenerDiode"&&(k.voltage=c.voltage||void 0,k.voltageUnit=c.voltageUnit||void 0,k.power=c.power?`${c.power}W`:void 0,k.tolerance=c.tolerance||void 0),k},Be=()=>{if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const V=x.find(z=>z.id===c.id),k=d.find(z=>z.id===c.id),A=V||k;if(A){const z=X(A),b=A.layer,de=c.layer;b!==de?b==="top"?(D(Ae=>Ae.filter(Pe=>Pe.id!==c.id)),P(Ae=>[...Ae,z])):(P(Ae=>Ae.filter(Pe=>Pe.id!==c.id)),D(Ae=>[...Ae,z])):de==="top"?D(Ae=>Ae.map(Pe=>Pe.id===c.id?z:Pe)):P(Ae=>Ae.map(Pe=>Pe.id===c.id?z:Pe))}else if(console.warn(`Component ${c.id} not found in either layer array`),c.layer==="top"){const z=d.find(b=>b.id===c.id);if(z){const b=X(z);P(de=>de.filter(Ae=>Ae.id!==c.id)),D(de=>[...de,b])}}else{const z=x.find(b=>b.id===c.id);if(z){const b=X(z);D(de=>de.filter(Ae=>Ae.id!==c.id)),P(de=>[...de,b])}}u(null),J(null)};return i.jsxs("div",{"data-component-editor-dialog":!0,onClick:V=>{if(pe&&pe.componentId===W.id){const k=V.target;(k.tagName==="BUTTON"||k.tagName==="INPUT"||k.closest("button")||k.closest("input"))&&V.stopPropagation()}},style:{position:"fixed",top:p?`${p.y}px`:"90px",left:p?`${p.x}px`:`${window.innerWidth-280}px`,transform:"none",background:pe&&pe.componentId===W.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:ce?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:V=>{const k=V.target;k.tagName==="BUTTON"||k.tagName==="INPUT"||k.closest("button")||k.closest("input")||p&&(ze({x:V.clientX-p.x,y:V.clientY-p.y}),xe(!0),V.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:ce?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),i.jsx("button",{onClick:()=>{u(null),J(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),i.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:Md(W.componentType)})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-layer-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),i.jsxs("select",{id:`component-layer-${W.id}`,name:`component-layer-${W.id}`,value:c.layer,onChange:V=>u({...c,layer:V.target.value}),disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-orientation-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),i.jsxs("select",{id:`component-orientation-${W.id}`,name:`component-orientation-${W.id}`,value:c.orientation??0,onChange:V=>{const k=parseInt(V.target.value)||0;if(u({...c,orientation:k}),!ne){const z=(c.layer==="top"?x:d).find(b=>b.id===c.id);if(z){const b={...z,orientation:k};c.layer==="top"?D(de=>de.map(Ae=>Ae.id===c.id?b:Ae)):P(de=>de.map(Ae=>Ae.id===c.id?b:Ae))}}},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0",children:"0"}),i.jsx("option",{value:"90",children:"90"}),i.jsx("option",{value:"180",children:"180"}),i.jsx("option",{value:"270",children:"270"})]})]}),i.jsx(Tx,{component:W,componentEditor:c,setComponentEditor:u,areComponentsLocked:ne,componentsTop:x,componentsBottom:d,setComponentsTop:D,setComponentsBottom:P}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{htmlFor:`component-designator-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),i.jsx("input",{id:`component-designator-${W.id}`,name:`component-designator-${W.id}`,type:"text",value:c.designator||"",onChange:V=>{const k=V.target.value,A=k.length>0?k.charAt(0).toUpperCase():c.abbreviation;u({...c,designator:k,abbreviation:A})},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:ne?.6:1},placeholder:"e.g., U2, R7, C1"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-description-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),i.jsx("input",{id:`component-description-${W.id}`,name:`component-description-${W.id}`,type:"text",value:c.description||"",onChange:V=>{u({...c,description:V.target.value})},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1},placeholder:W.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-notes-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Notes:"}),i.jsx("input",{id:`component-notes-${W.id}`,name:`component-notes-${W.id}`,type:"text",readOnly:!0,value:W.notes||"",onClick:()=>{ne||(Se(new Set([W.id])),R(!0))},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1,cursor:ne?"not-allowed":"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Click to edit notes...",title:W.notes||"Click to edit notes..."})]}),W.componentType!=="IntegratedCircuit"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${W.id}`,name:`component-pincount-${W.id}`,type:"number",min:"1",value:c.pinCount,onChange:V=>{const k=Math.max(1,parseInt(V.target.value)||1);u({...c,pinCount:k})},onBlur:V=>{if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const k=Math.max(1,parseInt(V.target.value)||1),z=(c.layer==="top"?x:d).find(b=>b.id===c.id);if(z&&k!==z.pinCount){const b=z.pinConnections||[],de=new Array(k).fill("").map((ke,fe)=>fe<b.length?b[fe]:""),Ae=z.pinPolarities||[],Pe=z.pinPolarities?new Array(k).fill("").map((ke,fe)=>fe<Ae.length?Ae[fe]:""):void 0,Ce={...z,pinCount:k,pinConnections:de,...Pe!==void 0&&{pinPolarities:Pe}};c.layer==="top"?D(ke=>ke.map(fe=>fe.id===c.id?Ce:fe)):P(ke=>ke.map(fe=>fe.id===c.id?Ce:fe)),u({...c,pinCount:k})}},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-x-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),i.jsx("input",{id:`component-x-${W.id}`,name:`component-x-${W.id}`,type:"number",value:c.x.toFixed(2),onChange:V=>{const k=parseFloat(V.target.value)||0;u({...c,x:k})},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-y-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),i.jsx("input",{id:`component-y-${W.id}`,name:`component-y-${W.id}`,type:"number",value:c.y.toFixed(2),onChange:V=>{const k=parseFloat(V.target.value)||0;u({...c,y:k})},disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-manufacturer-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),i.jsx("input",{id:`component-manufacturer-${W.id}`,name:`component-manufacturer-${W.id}`,type:"text",value:c.manufacturer,onChange:V=>u({...c,manufacturer:V.target.value}),disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-partnumber-${W.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),i.jsx("input",{id:`component-partnumber-${W.id}`,name:`component-partnumber-${W.id}`,type:"text",value:c.partNumber,onChange:V=>u({...c,partNumber:V.target.value}),disabled:ne,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:ne?.6:1}})]}),i.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),pe&&pe.componentId===W.id&&i.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",pe.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const V=W.componentType==="Electrolytic Capacitor"||W.componentType==="Diode"||W.componentType==="Battery"||W.componentType==="ZenerDiode",k=W.componentType==="Capacitor"&&"dielectric"in W&&W.dielectric==="Tantalum",A=V||k;return i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),A&&i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),i.jsx("tbody",{children:Array.from({length:c.pinCount},(z,b)=>{const Ae=(c.layer==="top"?x:d).find(fe=>fe.id===c.id),Pe=Ae?.pinConnections&&Ae.pinConnections.length>b?Ae.pinConnections[b]:"",Ce=Ae?.pinPolarities&&Ae.pinPolarities.length>b&&Ae.pinPolarities[b]||"",ke=pe&&pe.componentId===W.id&&pe.pinIndex===b;return i.jsxs("tr",{style:{cursor:ne?"not-allowed":"pointer",background:ke?"#e6f0ff":Pe?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:fe=>{if(fe.target.tagName!=="SELECT"){if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}J(ke?null:{componentId:W.id,pinIndex:b})}},title:Pe?`Connected to: ${Pe}`:"Select this pin, then click on a via or pad to connect",children:[i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsx("input",{id:`pin-radio-${W.id}-${b}`,name:`pin-radio-${W.id}`,type:"radio",checked:!!ke,onChange:()=>{if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}J(ke?null:{componentId:W.id,pinIndex:b})},disabled:ne,style:{margin:0,cursor:ne?"not-allowed":"pointer",opacity:ne?.6:1,width:"10px",height:"10px"}})}),i.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:ke?600:400,fontFamily:"monospace"},children:b+1}),A&&i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsxs("select",{value:Ce??"",onChange:fe=>{if(ne){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const I=fe.target.value,Q=(c.layer==="top"?x:d).find(Te=>Te.id===c.id);if(Q){const Y=[...Q.pinPolarities||new Array(Q.pinCount).fill("")];for(;Y.length<Q.pinCount;)Y.push("");Y[b]=I;const T={...Q,pinPolarities:Y};c.layer==="top"?D(N=>N.map(_=>_.id===c.id?T:_)):P(N=>N.map(_=>_.id===c.id?T:_))}},disabled:ne,onClick:fe=>fe.stopPropagation(),onFocus:fe=>fe.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:ne?"not-allowed":"pointer",opacity:ne?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[i.jsx("option",{value:"",children:"-"}),i.jsx("option",{value:"+",children:"+"}),i.jsx("option",{value:"-",children:"-"})]},`polarity-${W.id}-${b}-${Ce}`)}),i.jsx("td",{style:{padding:"2px 4px",color:Pe?"#28a745":"#999",fontWeight:Pe?600:400,fontFamily:"monospace"},children:Pe||"-"})]},b)})})]})})()]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[i.jsx("button",{onClick:()=>{u(null),J(null)},disabled:ne,style:{padding:"2px 5px",background:ne?"#f5f5f5":"#fff",color:ne?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:ne?"not-allowed":"pointer",fontSize:"10px",opacity:ne?.6:1},children:"Cancel"}),i.jsx("button",{onClick:Be,disabled:ne,style:{padding:"2px 5px",background:ne?"#f5f5f5":"#0b5fff",color:ne?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:ne?"not-allowed":"pointer",fontSize:"10px",opacity:ne?.6:1},children:"Save"})]})]})},kx=({visible:c,onClose:u,powerBuses:x,setPowerBuses:d,editingPowerBusId:D,setEditingPowerBusId:P,powers:pe})=>{if(!c)return null;const J=x.filter(te=>te.id!==D),p=x.find(te=>te.id===D),E=[...J].sort((te,ze)=>{const ne=W=>{const Ie=W.match(/([+-]?)(\d+\.?\d*)/);if(Ie){const X=Ie[1]||"+",Be=parseFloat(Ie[2]);return{absValue:Math.abs(Be),isNegative:X==="-"}}return{absValue:1/0,isNegative:!1}},Se=ne(te.voltage),R=ne(ze.voltage);return Se.absValue!==R.absValue?Se.absValue-R.absValue:Se.isNegative!==R.isNegative?Se.isNegative?-1:1:0}),ce=p?[...E,p]:E,xe=()=>{const te={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};d(ze=>[...ze,te]),P(te.id)};return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),i.jsx("button",{onClick:u,style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:ce.map(te=>{const ze=x.findIndex(R=>R.id===te.id),ne=x.some(R=>R.name===te.name&&R.id!==te.id),Se=x.some(R=>R.voltage===te.voltage&&R.id!==te.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:te.color,border:"1px solid #ccc",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:te.name,onChange:R=>{const W=[...x];W[ze]={...te,name:R.target.value},d(W)},onFocus:()=>{P(te.id)},placeholder:"e.g., +3V3, -3V3",style:{flex:1,padding:"2px 4px",border:ne?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Value"}),i.jsx("input",{type:"text",inputMode:"decimal",value:te.voltage,onChange:R=>{const W=R.target.value;if(W===""||/^[+-]?\d*\.?\d*$/.test(W)){const Ie=[...x];Ie[ze]={...te,voltage:W},d(Ie)}},onBlur:R=>{const W=R.target.value.trim();if(W===""){D===te.id&&P(null);return}const Ie=parseFloat(W);if(!isNaN(Ie)){const X=Ie>=0?"+":"-",Be=Math.abs(Ie),V=`${X}${Be.toFixed(1).replace(/\.?0+$/,"")}`,k=[...x];k[ze]={...te,voltage:V},d(k),D===te.id&&P(null)}},onFocus:()=>{P(te.id)},placeholder:"e.g., +3.3, -3.3",style:{flex:1,padding:"2px 4px",border:Se?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})]}),i.jsx("input",{type:"color",value:te.color,onChange:R=>{const W=[...x];W[ze]={...te,color:R.target.value},d(W)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const R=pe.filter(W=>W.powerBusId===te.id);if(R.length>0){alert(`Cannot delete: ${R.length} power node(s) are using this bus. Remove or reassign them first.`);return}d(W=>W.filter(Ie=>Ie.id!==te.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},te.id)})}),i.jsx("button",{onClick:xe,style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Power Bus"}),i.jsx("button",{onClick:u,style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]})},Rx=({visible:c,onClose:u,groundBuses:x,setGroundBuses:d,editingGroundBusId:D,setEditingGroundBusId:P,grounds:pe})=>{if(!c)return null;const J=x.filter(te=>te.id!==D),p=x.find(te=>te.id===D),E=[...J].sort((te,ze)=>te.name.localeCompare(ze.name)),ce=p?[...E,p]:E,xe=()=>{const te={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};d(ze=>[...ze,te]),P(te.id)};return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:u,style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:ce.map(te=>{const ze=x.findIndex(Se=>Se.id===te.id),ne=x.some(Se=>Se.name===te.name&&Se.id!==te.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:te.color,border:"1px solid #ccc",flexShrink:0}}),i.jsx("div",{style:{flex:1,minWidth:0},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:te.name,onChange:Se=>{const R=[...x];R[ze]={...te,name:Se.target.value},d(R)},onFocus:()=>{P(te.id)},onBlur:()=>{D===te.id&&P(null)},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 4px",border:ne?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})}),i.jsx("input",{type:"color",value:te.color,onChange:Se=>{const R=[...x];R[ze]={...te,color:Se.target.value},d(R)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const Se=pe.filter(R=>R.groundBusId===te.id);if(Se.length>0){alert(`Cannot delete: ${Se.length} ground node(s) are using this bus. Remove or reassign them first.`);return}d(R=>R.filter(W=>W.id!==te.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},te.id)})}),i.jsx("button",{onClick:xe,style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Ground Bus"}),i.jsx("button",{onClick:u,style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]})},Dx=({visible:c,onClose:u,autoAssignDesignators:x,setAutoAssignDesignators:d,useGlobalDesignatorCounters:D,setUseGlobalDesignatorCounters:P})=>c?i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"16px",zIndex:1e3,minWidth:"300px",maxWidth:"400px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Designators"}),i.jsx("button",{onClick:u,style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333",marginBottom:"12px"},children:[i.jsx("input",{type:"checkbox",checked:x,onChange:pe=>{d(pe.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{children:"Automatically assign designators"})]}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4",marginBottom:"12px"},children:x?i.jsx("div",{children:"When enabled, new components automatically receive sequential designators (e.g., C1, C2, C3 for Capacitors; R1, R2, R3 for Resistors)."}):i.jsx("div",{children:"When disabled, you must manually assign designators to each component. The designator field will be empty when components are created."})}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333"},children:[i.jsx("input",{type:"checkbox",checked:D,onChange:pe=>{P(pe.target.checked)},style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{children:"Use global designator counters"})]}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4"},children:D?i.jsx("div",{children:"When ON, designators continue from global counters across all projects. New components start with the next value from the global counter (e.g., if global counter is C10, new capacitor will be C11)."}):i.jsx("div",{children:"When OFF (default), designators start at 1 for each project. Each project maintains its own independent designator sequence (e.g., C1, C2, C3...)."})})]}),i.jsx("button",{onClick:u,style:{width:"100%",padding:"6px 12px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}):null,Dh=({visible:c,title:u,message:x,onYes:d,onNo:D,onCancel:P,yesButtonRef:pe})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:J=>{J.target===J.currentTarget&&P()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:J=>J.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:u}),i.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:x}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:P,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:D,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),i.jsx("button",{ref:pe,onClick:d,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}):null,Ax=({visible:c,size:u,onSizeChange:x,onApply:d,onCancel:D})=>{const P=S.useRef(null);if(S.useEffect(()=>{c&&P.current&&(P.current.focus(),P.current.select())},[c]),!c)return null;const pe=[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32];return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:J=>{J.target===J.currentTarget&&D()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:J=>J.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),i.jsx("input",{ref:P,type:"number",min:"1",max:"99",value:u,onChange:J=>{const p=parseInt(J.target.value)||1,E=Math.max(1,Math.min(99,p));x(E)},onKeyDown:J=>{if(J.key==="Enter"?d():J.key==="Escape"&&D(),J.key.length===1&&/[0-9]/.test(J.key)){const p=u.toString();p.length>=2&&P.current?.selectionStart===P.current?.selectionEnd&&P.current?.selectionStart===p.length&&J.preventDefault()}},onInput:J=>{const p=J.target,E=p.value;if(E.length>2){p.value=E.slice(0,2);const ce=parseInt(p.value)||1;x(Math.max(1,Math.min(99,ce)))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),i.jsxs("select",{value:pe.includes(u)?u:"",onChange:J=>{const p=parseInt(J.target.value);!isNaN(p)&&p>0&&x(p)},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[i.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),pe.map(J=>i.jsxs("option",{value:J,style:{background:"#1f1f24",color:"#f2f2f2"},children:[J," pixels"]},J))]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:D,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:d,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})})},Nx=({visible:c,interval:u,onIntervalChange:x,onApply:d,onCancel:D})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:P=>{P.target===P.currentTarget&&D()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:P=>P.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:u===null?"disable":(u||5).toString(),onChange:P=>{const pe=P.target.value;if(pe==="disable")x(null);else{const J=parseFloat(pe);!isNaN(J)&&J>0&&x(J)}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),i.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:D,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:d,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}):null,Mx=({visible:c,interval:u,onIntervalChange:x,onEnable:d,onSkip:D})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:P=>{P.target===P.currentTarget&&D()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:P=>P.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),i.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:u===null?"disable":(u||5).toString(),onChange:P=>{const pe=P.target.value;if(pe==="disable")x(null);else{const J=parseFloat(pe);!isNaN(J)&&J>0&&x(J)}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:D,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),i.jsx("button",{onClick:d,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})}):null;function Ux(){const[c,u]=S.useState([]),[x,d]=S.useState(!1),[D,P]=S.useState([]),[pe,J]=S.useState(null),[p,E]=S.useState("trace"),[ce,xe]=S.useState("top"),te=S.useRef([]),ze=S.useRef(0),ne=S.useRef(!1),Se=S.useCallback(()=>{d(!0),P([]),te.current=[]},[]),R=S.useCallback(()=>{d(!1),P([]),te.current=[]},[]),W=S.useCallback(X=>{P(Be=>[...Be,X]),te.current=[...te.current,X]},[]),Ie=S.useCallback(X=>{u(Be=>[...Be,X]),P([]),te.current=[]},[]);return{drawingStrokes:c,setDrawingStrokes:u,isDrawing:x,setIsDrawing:d,currentStroke:D,setCurrentStroke:P,tracePreviewMousePos:pe,setTracePreviewMousePos:J,drawingMode:p,setDrawingMode:E,selectedDrawingLayer:ce,setSelectedDrawingLayer:xe,currentStrokeRef:te,lastTraceClickTimeRef:ze,isDoubleClickingTraceRef:ne,startDrawing:Se,stopDrawing:R,addPointToStroke:W,finishStroke:Ie}}function Bx(){const[c,u]=S.useState(new Set),[x,d]=S.useState(!1),[D,P]=S.useState(new Set),[pe,J]=S.useState(new Set),[p,E]=S.useState(new Set),ce=S.useCallback(()=>{u(new Set),P(new Set),J(new Set),E(new Set)},[]),xe=S.useCallback((ne,Se="stroke")=>{Se==="stroke"?u(R=>new Set([...R,ne])):Se==="component"?P(R=>new Set([...R,ne])):Se==="power"?J(R=>new Set([...R,ne])):Se==="ground"&&E(R=>new Set([...R,ne]))},[]),te=S.useCallback((ne,Se="stroke")=>{Se==="stroke"?u(R=>{const W=new Set(R);return W.delete(ne),W}):Se==="component"?P(R=>{const W=new Set(R);return W.delete(ne),W}):Se==="power"?J(R=>{const W=new Set(R);return W.delete(ne),W}):Se==="ground"&&E(R=>{const W=new Set(R);return W.delete(ne),W})},[]),ze=S.useCallback((ne,Se="stroke")=>{Se==="stroke"?u(ne):Se==="component"?P(ne):Se==="power"?J(ne):Se==="ground"&&E(ne)},[]);return{selectedIds:c,setSelectedIds:u,isSelecting:x,setIsSelecting:d,selectedComponentIds:D,setSelectedComponentIds:P,selectedPowerIds:pe,setSelectedPowerIds:J,selectedGroundIds:p,setSelectedGroundIds:E,clearSelection:ce,addToSelection:xe,removeFromSelection:te,setSelection:ze}}function Px(){const[c,u]=S.useState(null),[x,d]=S.useState(!1),[D,P]=S.useState(null),[pe,J]=S.useState("nudge"),p=S.useCallback((ce,xe)=>{u(ce),d(!0),P(xe)},[]),E=S.useCallback(()=>{d(!1),u(null),P(null)},[]);return{selectedImageForTransform:c,setSelectedImageForTransform:u,isTransforming:x,setIsTransforming:d,transformStartPos:D,setTransformStartPos:P,transformMode:pe,setTransformMode:J,startTransform:p,stopTransform:E}}function Ox(){const[c,u]=S.useState(null),[x,d]=S.useState(null),[D,P]=S.useState("overlay"),[pe,J]=S.useState(50),[p,E]=S.useState(!1),[ce,xe]=S.useState(2e3),[te,ze]=S.useState(!1),ne=S.useCallback(W=>{u(W)},[]),Se=S.useCallback(W=>{d(W)},[]),R=S.useCallback(()=>{u(null),d(null)},[]);return{topImage:c,setTopImage:u,bottomImage:x,setBottomImage:d,currentView:D,setCurrentView:P,transparency:pe,setTransparency:J,isTransparencyCycling:p,setIsTransparencyCycling:E,transparencyCycleSpeed:ce,setTransparencyCycleSpeed:xe,isGrayscale:te,setIsGrayscale:ze,loadTopImage:ne,loadBottomImage:Se,clearImages:R}}function _x(){const[c,u]=S.useState(1),[x,d]=S.useState({x:0,y:0}),[D,P]=S.useState(!1),[pe,J]=S.useState(!1),p=S.useCallback(()=>{u(1),d({x:0,y:0})},[]),E=S.useCallback((ne=1.2)=>{u(Se=>Se*ne)},[]),ce=S.useCallback((ne=1.2)=>{u(Se=>Se/ne)},[]),xe=S.useCallback(ne=>{u(ne)},[]),te=S.useCallback((ne,Se)=>{d(R=>({x:R.x+ne,y:R.y+Se}))},[]),ze=S.useCallback((ne,Se)=>{d({x:ne,y:Se})},[]);return{viewScale:c,setViewScale:u,viewPan:x,setViewPan:d,isShiftConstrained:D,setIsShiftConstrained:P,showBothLayers:pe,setShowBothLayers:J,resetView:p,zoomIn:E,zoomOut:ce,setZoom:xe,pan:te,setPan:ze}}function zt(c,u,x,d){if(u==="power"){const P=c[u]||"";return typeof P=="string"&&P.trim()!==""?{value:P.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[u]!==void 0||c[x]!==void 0)return{value:c[u]||"",unit:c[x]||d};const D=c[u]||"";return typeof D=="string"&&D.trim()!==""?Hx(D):{value:"",unit:d}}function Hx(c){if(!c||c.trim()==="")return{value:"",unit:""};const u=c.trim(),x=u.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(x)return{value:x[1],unit:x[2]||""};const d=u.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return d?{value:d[1],unit:d[2]||""}:{value:u,unit:""}}function Ex(){const[c,u]=S.useState([]),[x,d]=S.useState([]),[D,P]=S.useState(null),[pe,J]=S.useState(null),[p,E]=S.useState(null),[ce,xe]=S.useState(!1),[te,ze]=S.useState(null),ne=S.useCallback((X,Be)=>{Be==="top"?u(V=>[...V,X]):d(V=>[...V,X])},[]),Se=S.useCallback((X,Be,V)=>{V==="top"?u(k=>k.map(A=>A.id===X?{...A,...Be}:A)):d(k=>k.map(A=>A.id===X?{...A,...Be}:A))},[]),R=S.useCallback((X,Be)=>{Be==="top"?u(V=>V.filter(k=>k.id!==X)):d(V=>V.filter(k=>k.id!==X))},[]),W=S.useCallback((X,Be)=>{const V=X.designator||"",k=X.abbreviation||(V.length>0?V.charAt(0).toUpperCase():""),A={visible:!0,layer:Be,id:X.id,designator:V,abbreviation:k,manufacturer:"manufacturer"in X&&X.manufacturer||"",partNumber:"partNumber"in X&&X.partNumber||"",pinCount:X.pinCount,x:X.x,y:X.y,orientation:X.orientation??0,description:X.description||""};if(X.componentType==="Resistor"){const z=X,b=zt(z,"resistance","resistanceUnit",Le("resistance"));A.resistance=b.value,A.resistanceUnit=b.unit;const de=zt(z,"power","powerUnit","W");A.power=de.value||"1/4",A.tolerance=z.tolerance||"5%"}else if(X.componentType==="Capacitor"){const z=X,b=zt(z,"capacitance","capacitanceUnit",Le("capacitance"));A.capacitance=b.value,A.capacitanceUnit=b.unit;const de=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=de.value,A.voltageUnit=de.unit,A.tolerance=z.tolerance||"10%",A.dielectric=z.dielectric||"Ceramic"}else if(X.componentType==="Electrolytic Capacitor"){const z=X,b=zt(z,"capacitance","capacitanceUnit",Le("capacitance"));A.capacitance=b.value,A.capacitanceUnit=b.unit;const de=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=de.value,A.voltageUnit=de.unit,A.tolerance=z.tolerance||"20%",A.polarityCapacitor=z.polarity||"Positive";const Ae=zt(z,"esr","esrUnit",Le("esr"));A.esr=Ae.value,A.esrUnit=Ae.unit,A.temperature=z.temperature||""}else if(X.componentType==="Film Capacitor"){const z=X,b=zt(z,"capacitance","capacitanceUnit",Le("capacitance"));A.capacitance=b.value,A.capacitanceUnit=b.unit;const de=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=de.value,A.voltageUnit=de.unit,A.tolerance=z.tolerance||"10%",A.filmType=z.filmType||"Polyester"}else if(X.componentType==="Diode"){const z=X;A.diodeType=z.diodeType||"Standard";const b=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=b.value,A.voltageUnit=b.unit;const de=zt(z,"current","currentUnit",Le("current"));A.current=de.value,A.currentUnit=de.unit,A.ledColor=z.ledColor||""}else if(X.componentType==="Battery"){const z=X,b=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=b.value,A.voltageUnit=b.unit;const de=zt(z,"capacity","capacityUnit",Le("capacity"));A.capacity=de.value,A.capacityUnit=de.unit,A.chemistry=z.chemistry||"Li-ion"}else if(X.componentType==="Fuse"){const z=X,b=zt(z,"current","currentUnit",Le("current"));A.current=b.value,A.currentUnit=b.unit;const de=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=de.value,A.voltageUnit=de.unit,A.fuseType=z.fuseType||"Fast-blow"}else if(X.componentType==="FerriteBead"){const z=X,b=zt(z,"impedance","impedanceUnit",Le("impedance"));A.impedance=b.value,A.impedanceUnit=b.unit;const de=zt(z,"current","currentUnit",Le("current"));A.current=de.value,A.currentUnit=de.unit}else if(X.componentType==="Connector"){const z=X;A.connectorType=z.connectorType||"",A.gender=z.gender||"N/A"}else if(X.componentType==="Jumper"){const z=X;A.positions=z.positions||3}else if(X.componentType==="Relay"){const z=X,b=zt(z,"coilVoltage","coilVoltageUnit",Le("coilVoltage"));A.coilVoltage=b.value,A.coilVoltageUnit=b.unit,A.contactType=z.contactType||"SPST";const de=zt(z,"current","currentUnit",Le("current"));A.current=de.value,A.currentUnit=de.unit}else if(X.componentType==="Inductor"){const z=X,b=zt(z,"inductance","inductanceUnit",Le("inductance"));A.inductance=b.value,A.inductanceUnit=b.unit;const de=zt(z,"current","currentUnit",Le("current"));A.current=de.value,A.currentUnit=de.unit;const Ae=zt(z,"resistance","resistanceUnit",Le("resistance"));A.resistance=Ae.value,A.resistanceUnit=Ae.unit}else if(X.componentType==="Speaker"){const z=X,b=zt(z,"impedance","impedanceUnit",Le("impedance"));A.impedance=b.value,A.impedanceUnit=b.unit;const de=zt(z,"power","powerUnit","W");A.power=de.value||"1"}else if(X.componentType==="Motor"){const z=X;A.motorType=z.motorType||"DC";const b=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=b.value,A.voltageUnit=b.unit;const de=zt(z,"current","currentUnit",Le("current"));A.current=de.value,A.currentUnit=de.unit}else if(X.componentType==="PowerSupply"){const z=X,b=zt(z,"inputVoltage","inputVoltageUnit",Le("inputVoltage"));A.inputVoltage=b.value,A.inputVoltageUnit=b.unit;const de=zt(z,"outputVoltage","outputVoltageUnit",Le("outputVoltage"));A.outputVoltage=de.value,A.outputVoltageUnit=de.unit;const Ae=zt(z,"current","currentUnit",Le("current"));A.current=Ae.value,A.currentUnit=Ae.unit}else if(X.componentType==="Transistor"){const z=X;A.transistorType=z.transistorType||"BJT",A.polarity=z.polarity||"NPN";const b=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=b.value,A.voltageUnit=b.unit;const de=zt(z,"current","currentUnit",Le("current"));A.current=de.value,A.currentUnit=de.unit}else if(X.componentType==="ResistorNetwork"){const z=X,b=zt(z,"resistance","resistanceUnit",Le("resistance"));A.resistance=b.value,A.resistanceUnit=b.unit,A.configuration=z.configuration||""}else if(X.componentType==="Thermistor"){const z=X,b=zt(z,"resistance","resistanceUnit",Le("resistance"));A.resistance=b.value,A.resistanceUnit=b.unit,A.thermistorType=z.thermistorType||"NTC",A.beta=z.beta||""}else if(X.componentType==="Switch"){const z=X;A.switchType=z.switchType||"Toggle";const b=zt(z,"current","currentUnit",Le("current"));A.current=b.value,A.currentUnit=b.unit;const de=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=de.value,A.voltageUnit=de.unit}else if(X.componentType==="Transformer"){const z=X,b=zt(z,"primaryVoltage","primaryVoltageUnit",Le("primaryVoltage"));A.primaryVoltage=b.value,A.primaryVoltageUnit=b.unit;const de=zt(z,"secondaryVoltage","secondaryVoltageUnit",Le("secondaryVoltage"));A.secondaryVoltage=de.value,A.secondaryVoltageUnit=de.unit;const Ae=zt(z,"power","powerUnit",Le("power"));A.power=Ae.value||"1",A.turns=z.turns||""}else if(X.componentType==="TestPoint"){const z=X;A.signal=z.signal||""}else if(X.componentType==="IntegratedCircuit"){const z=X;A.description=z.description||X.designator||"",A.datasheet=z.datasheet||"",A.icType=z.icType||"Op-Amp"}else if(X.componentType==="VacuumTube"){const z=X;A.tubeType=z.tubeType||""}else if(X.componentType==="VariableResistor"){const z=X;A.vrType=z.vrType||"Potentiometer";const b=zt(z,"resistance","resistanceUnit",Le("resistance"));A.resistance=b.value,A.resistanceUnit=b.unit;const de=zt(z,"power","powerUnit",Le("power"));A.power=de.value||"1/4",A.taper=z.taper||""}else if(X.componentType==="Crystal"){const z=X;A.frequency=z.frequency||"",A.loadCapacitance=z.loadCapacitance||"",A.tolerance=z.tolerance||""}else if(X.componentType==="ZenerDiode"){const z=X,b=zt(z,"voltage","voltageUnit",Le("voltage"));A.voltage=b.value,A.voltageUnit=b.unit;const de=zt(z,"power","powerUnit",Le("power"));A.power=de.value||"1/4",A.tolerance=z.tolerance||"5%"}P(A)},[]),Ie=S.useCallback(()=>{P(null),J(null)},[]);return{componentsTop:c,setComponentsTop:u,componentsBottom:x,setComponentsBottom:d,componentEditor:D,setComponentEditor:P,connectingPin:pe,setConnectingPin:J,componentDialogPosition:p,setComponentDialogPosition:E,isDraggingDialog:ce,setIsDraggingDialog:xe,dialogDragOffset:te,setDialogDragOffset:ze,addComponent:ne,updateComponent:Se,removeComponent:R,openComponentEditor:W,closeComponentEditor:Ie}}function Vx(){const[c,u]=S.useState([]),[x,d]=S.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),[D,P]=S.useState([]),[pe,J]=S.useState([]),[p,E]=S.useState(null),[ce,xe]=S.useState(null),te=S.useCallback(k=>{u(A=>[...A,k])},[]),ze=S.useCallback((k,A)=>{u(z=>z.map(b=>b.id===k?{...b,...A}:b))},[]),ne=S.useCallback(k=>{u(A=>A.filter(z=>z.id!==k)),P(A=>A.filter(z=>z.powerBusId!==k))},[]),Se=S.useCallback(k=>{P(A=>[...A,k])},[]),R=S.useCallback(k=>{P(A=>A.filter(z=>z.id!==k))},[]),W=S.useCallback(k=>{J(A=>[...A,k])},[]),Ie=S.useCallback(k=>{J(A=>A.filter(z=>z.id!==k))},[]),X=S.useCallback(k=>{d(A=>[...A,k])},[]),Be=S.useCallback((k,A)=>{d(z=>z.map(b=>b.id===k?{...b,...A}:b))},[]),V=S.useCallback(k=>{d(A=>A.filter(z=>z.id!==k)),J(A=>A.filter(z=>z.groundBusId===k))},[]);return{powerBuses:c,setPowerBuses:u,groundBuses:x,setGroundBuses:d,powerSymbols:D,setPowerSymbols:P,groundSymbols:pe,setGroundSymbols:J,powerEditor:p,setPowerEditor:E,groundEditor:ce,setGroundEditor:xe,addPowerBus:te,updatePowerBus:ze,removePowerBus:ne,addPowerSymbol:Se,removePowerSymbol:R,addGroundSymbol:W,removeGroundSymbol:Ie,addGroundBus:X,updateGroundBus:Be,removeGroundBus:V}}const kt={brushColor:"#008080",brushSize:6,topTraceColor:"#AA4499",bottomTraceColor:"#F781BF",topTraceSize:6,bottomTraceSize:6,viaSize:18,viaColor:"#ff0000",topPadColor:"#0072B2",bottomPadColor:"#56B4E9",topPadSize:18,bottomPadSize:18,topTestPointColor:"#FFFF00",bottomTestPointColor:"#FFFF00",topTestPointSize:18,bottomTestPointSize:18,topComponentColor:"#8C564B",bottomComponentColor:"#9C755F",topComponentSize:18,bottomComponentSize:18,componentConnectionColor:"#E69F00",componentConnectionSize:3};function Ix(){const[c,u]=S.useState(kt.brushColor),[x,d]=S.useState(kt.brushSize),[D,P]=S.useState(kt.topTraceColor),[pe,J]=S.useState(kt.bottomTraceColor),[p,E]=S.useState(kt.topTraceSize),[ce,xe]=S.useState(kt.bottomTraceSize),[te,ze]=S.useState(kt.topPadColor),[ne,Se]=S.useState(kt.bottomPadColor),[R,W]=S.useState(kt.topPadSize),[Ie,X]=S.useState(kt.bottomPadSize),[Be,V]=S.useState(kt.topTestPointColor),[k,A]=S.useState(kt.bottomTestPointColor),[z,b]=S.useState(kt.topTestPointSize),[de,Ae]=S.useState(kt.bottomTestPointSize),[Pe,Ce]=S.useState(kt.topComponentColor),[ke,fe]=S.useState(kt.bottomComponentColor),[I,O]=S.useState(kt.topComponentSize),[Q,Te]=S.useState(kt.bottomComponentSize),[Y,T]=S.useState(kt.componentConnectionColor),[N,_]=S.useState(kt.componentConnectionSize),$=S.useCallback(()=>{u(kt.brushColor),d(kt.brushSize),P(kt.topTraceColor),J(kt.bottomTraceColor),E(kt.topTraceSize),xe(kt.bottomTraceSize),ze(kt.topPadColor),Se(kt.bottomPadColor),W(kt.topPadSize),X(kt.bottomPadSize),V(kt.topTestPointColor),A(kt.bottomTestPointColor),b(kt.topTestPointSize),Ae(kt.bottomTestPointSize),Ce(kt.topComponentColor),fe(kt.bottomComponentColor),O(kt.topComponentSize),Te(kt.bottomComponentSize),T(kt.componentConnectionColor),_(kt.componentConnectionSize)},[]),Ue=S.useCallback(We=>{We.brushColor!==void 0&&u(We.brushColor),We.brushSize!==void 0&&d(We.brushSize),We.topTraceColor!==void 0&&P(We.topTraceColor),We.bottomTraceColor!==void 0&&J(We.bottomTraceColor),We.topTraceSize!==void 0&&E(We.topTraceSize),We.bottomTraceSize!==void 0&&xe(We.bottomTraceSize),We.topPadColor!==void 0&&ze(We.topPadColor),We.bottomPadColor!==void 0&&Se(We.bottomPadColor),We.topPadSize!==void 0&&W(We.topPadSize),We.bottomPadSize!==void 0&&X(We.bottomPadSize),We.topTestPointColor!==void 0&&V(We.topTestPointColor),We.bottomTestPointColor!==void 0&&A(We.bottomTestPointColor),We.topTestPointSize!==void 0&&b(We.topTestPointSize),We.bottomTestPointSize!==void 0&&Ae(We.bottomTestPointSize),We.topComponentColor!==void 0&&Ce(We.topComponentColor),We.bottomComponentColor!==void 0&&fe(We.bottomComponentColor),We.topComponentSize!==void 0&&O(We.topComponentSize),We.bottomComponentSize!==void 0&&Te(We.bottomComponentSize),We.componentConnectionColor!==void 0&&T(We.componentConnectionColor),We.componentConnectionSize!==void 0&&_(We.componentConnectionSize)},[]),Ke=S.useCallback((We,ki,Nn)=>{},[]),ct=S.useCallback((We,ki,Nn)=>{},[]),gn=S.useCallback(()=>({brushColor:c,brushSize:x,topTraceColor:D,bottomTraceColor:pe,topTraceSize:p,bottomTraceSize:ce,viaSize:kt.viaSize,viaColor:kt.viaColor,topPadColor:te,bottomPadColor:ne,topPadSize:R,bottomPadSize:Ie,topTestPointColor:Be,bottomTestPointColor:k,topTestPointSize:z,bottomTestPointSize:de,topComponentColor:Pe,bottomComponentColor:ke,topComponentSize:I,bottomComponentSize:Q,componentConnectionColor:Y,componentConnectionSize:N}),[c,x,D,pe,p,ce,te,ne,R,Ie,Be,k,z,de,Pe,ke,I,Q,Y,N]);return{brushColor:c,setBrushColor:u,brushSize:x,setBrushSize:d,topTraceColor:D,setTopTraceColor:P,bottomTraceColor:pe,setBottomTraceColor:J,topTraceSize:p,setTopTraceSize:E,bottomTraceSize:ce,setBottomTraceSize:xe,topPadColor:te,setTopPadColor:ze,bottomPadColor:ne,setBottomPadColor:Se,topPadSize:R,setTopPadSize:W,bottomPadSize:Ie,setBottomPadSize:X,topTestPointColor:Be,setTopTestPointColor:V,bottomTestPointColor:k,setBottomTestPointColor:A,topTestPointSize:z,setTopTestPointSize:b,bottomTestPointSize:de,setBottomTestPointSize:Ae,topComponentColor:Pe,setTopComponentColor:Ce,bottomComponentColor:ke,setBottomComponentColor:fe,topComponentSize:I,setTopComponentSize:O,bottomComponentSize:Q,setBottomComponentSize:Te,componentConnectionColor:Y,setComponentConnectionColor:T,componentConnectionSize:N,setComponentConnectionSize:_,resetToDefaults:$,loadFromProject:Ue,getCurrentSettings:gn,saveDefaultSize:Ke,saveDefaultColor:ct}}function Wx(c,u,x,d,D,P,pe,J,p,E,ce,xe,te,ze,ne,Se,R,W,Ie,X,Be,V,k,A,z){const[b,de]=S.useState(()=>c()),Ae=S.useRef(null),Pe=S.useRef(d),Ce=S.useRef(D),ke=S.useCallback(O=>u==="draw"&&x==="trace"?O.get("trace"):u==="draw"&&x==="via"?O.get("via"):u==="draw"&&x==="pad"?O.get("pad"):u==="component"?O.get("component"):u==="power"?O.get("power"):u==="ground"?O.get("ground"):null,[u,x]);S.useEffect(()=>{de(O=>{const Q=ke(O),Te=Q?.id||null,Y=Ae.current,T=new Map(O);if(Y&&Y!==Te){const N=O.get(Y);N&&T.set(Y,{...N,settings:{color:Pe.current,size:Ce.current}})}if(Q&&Te!==Y)if(u==="draw"&&x==="trace"){const N=V||"top",_=N==="top"?P:pe,$=N==="top"?J:p;Pe.current=_,Ce.current=$,T.set("trace",{...Q,settings:{color:_,size:$}})}else if(u==="draw"&&x==="pad"){const N=k||"top",_=N==="top"?E:ce,$=N==="top"?xe:te;Pe.current=_,Ce.current=$,T.set("pad",{...Q,settings:{color:_,size:$}})}else if(u==="component"){const N=z||"top",_=N==="top"?W:Ie,$=N==="top"?X:Be;Pe.current=_,Ce.current=$,T.set("component",{...Q,settings:{color:_,size:$}})}else Pe.current=Q.settings.color,Ce.current=Q.settings.size;return Ae.current=Te,T})},[u,x,d,D,P,pe,J,p,E,ce,xe,te,W,Ie,X,Be,V,k,z,ke]);const fe=S.useCallback((O,Q)=>{de(Te=>{const Y=new Map(Te),T=Y.get(O);return T&&Y.set(O,{...T,settings:Q}),Y})},[]),I=S.useCallback((O,Q,Te)=>{de(Y=>{const T=new Map(Y),N=T.get(O);if(N){const _=new Map(N.layerSettings);_.set(Q,Te),T.set(O,{...N,layerSettings:_})}return T})},[]);return{toolRegistry:b,setToolRegistry:de,updateToolSettings:fe,updateToolLayerSettings:I,getCurrentToolDef:ke}}function Fx(c){const{currentTool:u,drawingMode:x,traceToolLayer:d,padToolLayer:D,testPointToolLayer:P,componentToolLayer:pe}=c,[J,p]=S.useState(0),E=S.useCallback(()=>u==="draw"&&x==="via"?"via":u==="draw"&&x==="pad"?D==="bottom"?"padBottom":"padTop":u==="draw"&&x==="testPoint"?P==="bottom"?"testPointBottom":"testPointTop":u==="draw"&&x==="trace"?d==="bottom"?"traceBottom":"traceTop":u==="component"?pe==="bottom"?"componentBottom":"componentTop":u==="power"?"power":u==="ground"?"ground":null,[u,x,D,P,d,pe]),ce=S.useCallback(()=>{const ne=E();if(ne){const Se=bt.get(ne);return{currentTool:u,drawingMode:x,layer:u==="draw"&&x==="pad"?D||"top":u==="draw"&&x==="testPoint"?P||"top":u==="draw"&&x==="trace"?d||"top":u==="component"?pe||"top":void 0,toolInstanceId:ne,color:Se.color,size:Se.size}}return{currentTool:u,drawingMode:x,layer:void 0,toolInstanceId:null,color:"#000000",size:10}},[u,x,D,P,d,pe,E]);S.useEffect(()=>{const ne=E();return ne?bt.subscribe(ne,()=>{p(R=>R+1)}):void 0},[E]);const xe=ce(),te=S.useCallback(ne=>{const Se=E();Se&&bt.setColor(Se,ne)},[E]),ze=S.useCallback(ne=>{const Se=E();Se&&bt.setSize(Se,ne)},[E]);return{toolState:xe,setColor:te,setSize:ze,getCurrentToolInstanceId:E}}function $x(){const[c,u]=S.useState(!1),[x,d]=S.useState(!1),[D,P]=S.useState(!1),[pe,J]=S.useState(!1),[p,E]=S.useState(!1),[ce,xe]=S.useState(!1),[te,ze]=S.useState(!1),[ne,Se]=S.useState(!1),R=S.useCallback(()=>{u(!0),d(!0),P(!0),J(!0),E(!0),xe(!0),ze(!0),Se(!0)},[]),W=S.useCallback(()=>{u(!1),d(!1),P(!1),J(!1),E(!1),xe(!1),ze(!1),Se(!1)},[]);return{areImagesLocked:c,setAreImagesLocked:u,areViasLocked:x,setAreViasLocked:d,arePadsLocked:D,setArePadsLocked:P,areTestPointsLocked:pe,setAreTestPointsLocked:J,areTracesLocked:p,setAreTracesLocked:E,areComponentsLocked:ce,setAreComponentsLocked:xe,areGroundNodesLocked:te,setAreGroundNodesLocked:ze,arePowerNodesLocked:ne,setArePowerNodesLocked:Se,lockAll:R,unlockAll:W}}function Lx(){const[c,u]=S.useState(null),[x,d]=S.useState({visible:!1,size:6}),[D,P]=S.useState({visible:!1,interval:5}),[pe,J]=S.useState({visible:!1,source:null,interval:5}),[p,E]=S.useState({visible:!1,text:""}),[ce,xe]=S.useState({visible:!1,title:"",message:""}),[te,ze]=S.useState({visible:!1}),[ne,Se]=S.useState({visible:!1}),[R,W]=S.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[Ie,X]=S.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[Be,V]=S.useState(!1),[k,A]=S.useState(!0),[z,b]=S.useState(!1);return{openMenu:c,setOpenMenu:u,setSizeDialog:x,setSetSizeDialog:d,autoSaveDialog:D,setAutoSaveDialog:P,autoSavePromptDialog:pe,setAutoSavePromptDialog:J,debugDialog:p,setDebugDialog:E,errorDialog:ce,setErrorDialog:xe,newProjectDialog:te,setNewProjectDialog:ze,openProjectDialog:ne,setOpenProjectDialog:Se,newProjectSetupDialog:R,setNewProjectSetupDialog:W,saveAsDialog:Ie,setSaveAsDialog:X,showColorPicker:Be,setShowColorPicker:V,showWelcomeDialog:k,setShowWelcomeDialog:A,transformImagesDialogVisible:z,setTransformImagesDialogVisible:b}}function Yx(){const[c,u]=S.useState(!1),[x,d]=S.useState(1),[D,P]=S.useState(null),[pe,J]=S.useState(""),[p,E]=S.useState(""),[ce,xe]=S.useState(null),[te,ze]=S.useState("pcb_project"),[ne,Se]=S.useState([]),[R,W]=S.useState(-1),Ie=S.useRef(null),X=S.useRef(!1),Be=S.useRef(!1);return{autoSaveEnabled:c,setAutoSaveEnabled:u,autoSaveInterval:x,setAutoSaveInterval:d,autoSaveDirHandle:D,setAutoSaveDirHandle:P,autoSaveBaseName:pe,setAutoSaveBaseName:J,currentProjectFilePath:p,setCurrentProjectFilePath:E,projectDirHandle:ce,setProjectDirHandle:xe,projectName:te,setProjectName:ze,autoSaveFileHistory:ne,setAutoSaveFileHistory:Se,currentFileIndex:R,setCurrentFileIndex:W,autoSaveIntervalRef:Ie,hasChangesSinceLastAutoSaveRef:X,prevAutoSaveEnabledRef:Be}}function Xx(){const u=Ox(),{topImage:x,setTopImage:d,bottomImage:D,setBottomImage:P,currentView:pe,setCurrentView:J,transparency:p,setTransparency:E,isTransparencyCycling:ce,setIsTransparencyCycling:xe,transparencyCycleSpeed:te,setTransparencyCycleSpeed:ze,isGrayscale:ne,setIsGrayscale:Se}=u,[R,W]=S.useState("none"),Ie=Ix(),{brushColor:X,setBrushColor:Be,brushSize:V,setBrushSize:k,topTraceColor:A,setTopTraceColor:z,bottomTraceColor:b,setBottomTraceColor:de,topTraceSize:Ae,setTopTraceSize:Pe,bottomTraceSize:Ce,setBottomTraceSize:ke,topPadColor:fe,setTopPadColor:I,bottomPadColor:O,setBottomPadColor:Q,topPadSize:Te,setTopPadSize:Y,bottomPadSize:T,setBottomPadSize:N,topTestPointColor:_,setTopTestPointColor:$,bottomTestPointColor:Ue,setBottomTestPointColor:Ke,topTestPointSize:ct,setTopTestPointSize:gn,bottomTestPointSize:We,setBottomTestPointSize:ki,topComponentColor:Nn,setTopComponentColor:Ri,bottomComponentColor:hi,setBottomComponentColor:ii,topComponentSize:gi,setTopComponentSize:Qi,bottomComponentSize:Vi,setBottomComponentSize:Wl,componentConnectionColor:Pa,setComponentConnectionColor:Ls,componentConnectionSize:Oa,setComponentConnectionSize:Mc,saveDefaultSize:qe,saveDefaultColor:ot}=Ie,Uc=Ux(),{drawingStrokes:$e,setDrawingStrokes:Pt,isDrawing:yl,setIsDrawing:_a,currentStroke:Wt,setCurrentStroke:Fn,tracePreviewMousePos:bl,setTracePreviewMousePos:Di,drawingMode:je,setDrawingMode:Bn,selectedDrawingLayer:Je,setSelectedDrawingLayer:jn,currentStrokeRef:Ha,lastTraceClickTimeRef:Ys,isDoubleClickingTraceRef:Fl}=Uc,ns=Px(),{selectedImageForTransform:At,setSelectedImageForTransform:xi,isTransforming:$l,setIsTransforming:Ai,transformStartPos:ho,setTransformStartPos:Ni,transformMode:vl,setTransformMode:ga}=ns,Bc=_x(),{viewScale:Ve,setViewScale:Ii,viewPan:jt,setViewPan:Pn,isShiftConstrained:is,setIsShiftConstrained:Xs,showBothLayers:Er,setShowBothLayers:ml}=Bc,[dt,On]=S.useState("top"),[$t,go]=S.useState("top"),[an,Gs]=S.useState("top"),[xn,Ll]=S.useState("top"),xa=Oe.useRef("top"),Ki=Oe.useRef("top"),Ji=Oe.useRef("top"),Sl=Oe.useRef("top");Oe.useEffect(()=>{xa.current=dt},[dt]),Oe.useEffect(()=>{Ki.current=$t},[$t]),Oe.useEffect(()=>{Ji.current=an},[an]),Oe.useEffect(()=>{Sl.current=xn},[xn]);const Ea=Fx({currentTool:R,drawingMode:je,traceToolLayer:dt,padToolLayer:$t,testPointToolLayer:an,componentToolLayer:xn}),{toolState:Mt}=Ea,Vr=Wx(fx,R,je,X,V,A,b,Ae,Ce,fe,O,Te,T,_,Ue,ct,We,Nn,hi,gi,Vi,dt,$t,an,xn),{toolRegistry:Ot,setToolRegistry:on,getCurrentToolDef:el,updateToolSettings:Ir,updateToolLayerSettings:Va}=Vr,ls=Oe.useRef(null),Tn=Oe.useRef(X),sn=Oe.useRef(V);Oe.useEffect(()=>{on(a=>{const r=el(a),f=r?.id||null,m=ls.current,y=new Map(a);if(m&&m!==f){const v=a.get(m);v&&y.set(m,{...v,settings:{color:Tn.current,size:sn.current}})}if(r&&f!==m)if(R==="draw"&&je==="trace"){const v=dt||"top",g=v==="top"?A:b,w=v==="top"?Ae:Ce;Be(g),k(w),Tn.current=g,sn.current=w;const C=new Map(r.layerSettings);C.set("top",{color:A,size:Ae}),C.set("bottom",{color:b,size:Ce}),y.set("trace",{...r,settings:{color:g,size:w},layerSettings:C})}else if(R==="draw"&&je==="pad"){const v=$t||"top",g=v==="top"?fe:O,w=v==="top"?Te:T;Be(g),k(w),Tn.current=g,sn.current=w;const C=new Map(r.layerSettings);C.set("top",{color:fe,size:Te}),C.set("bottom",{color:O,size:T}),y.set("pad",{...r,settings:{color:g,size:w},layerSettings:C})}else if(R==="draw"&&je==="testPoint"){const v=an||"top",g=v==="top"?_:Ue,w=v==="top"?ct:We;Be(g),k(w),Tn.current=g,sn.current=w;const C=new Map(r.layerSettings);C.set("top",{color:_,size:ct}),C.set("bottom",{color:Ue,size:We}),y.set("testPoint",{...r,settings:{color:g,size:w},layerSettings:C})}else if(R==="component"){const v=xn||"top",g=v==="top"?Nn:hi,w=v==="top"?gi:Vi;Be(g),k(w),Tn.current=g,sn.current=w;const C=new Map(r.layerSettings);C.set("top",{color:Nn,size:gi}),C.set("bottom",{color:hi,size:Vi}),y.set("component",{...r,settings:{color:g,size:w},layerSettings:C})}else{const v=r.settings;Be(v.color),k(v.size),Tn.current=v.color,sn.current=v.size}return ls.current=f,y})},[R,je,el,A,b,Ae,Ce,fe,O,Te,T,_,Ue,ct,We,an,Nn,hi,gi,Vi]),Oe.useEffect(()=>{const a=Ot.get("trace");if(a){const y=a.layerSettings.get("top"),v=a.layerSettings.get("bottom");y&&(z(y.color),Pe(y.size)),v&&(de(v.color),ke(v.size))}const r=Ot.get("pad");if(r){const y=r.layerSettings.get("top"),v=r.layerSettings.get("bottom");y&&(I(y.color),Y(y.size)),v&&(Q(v.color),N(v.size))}const f=Ot.get("testPoint");if(f){const y=f.layerSettings.get("top"),v=f.layerSettings.get("bottom");y&&($(y.color),gn(y.size)),v&&(Ke(v.color),ki(v.size))}const m=Ot.get("component");if(m){const y=m.layerSettings.get("top"),v=m.layerSettings.get("bottom");y&&(Ri(y.color),Qi(y.size)),v&&(ii(v.color),Wl(v.size))}},[]),Oe.useEffect(()=>{on(a=>{const r=new Map(a),f=a.get("trace");if(f){const w=new Map(f.layerSettings);w.set("top",{color:A,size:Ae}),w.set("bottom",{color:b,size:Ce}),r.set("trace",{...f,layerSettings:w})}const m=a.get("pad");if(m){const w=new Map(m.layerSettings);w.set("top",{color:fe,size:Te}),w.set("bottom",{color:O,size:T}),r.set("pad",{...m,layerSettings:w})}const y=a.get("testPoint");if(y){const w=new Map(y.layerSettings);w.set("top",{color:_,size:ct}),w.set("bottom",{color:Ue,size:We}),r.set("testPoint",{...y,layerSettings:w})}const v=a.get("component");if(v){const w=new Map(v.layerSettings);w.set("top",{color:Nn,size:gi}),w.set("bottom",{color:hi,size:Vi}),r.set("component",{...v,layerSettings:w})}const g=a.get("componentConnection");return g&&r.set("componentConnection",{...g,settings:{color:Pa,size:Oa}}),r})},[A,b,Ae,Ce,fe,O,Te,T,_,Ue,ct,We,Nn,hi,gi,Vi,Pa,Oa,on]),Oe.useEffect(()=>{on(a=>{const r=el(a);if(r)if(R==="draw"&&je==="trace"){const f=dt||"top";f==="top"?(z(X),Pe(V),ot("trace",X,"top"),qe("trace",V,"top")):(de(X),ke(V),ot("trace",X,"bottom"),qe("trace",V,"bottom"));const m=new Map(a),y=new Map(r.layerSettings);return y.set(f,{color:X,size:V}),m.set(r.id,{...r,layerSettings:y,settings:{color:X,size:V}}),Tn.current=X,sn.current=V,m}else if(R==="draw"&&je==="pad"){const f=$t||"top";f==="top"?(I(X),Y(V),ot("pad",X,"top"),qe("pad",V,"top")):(Q(X),N(V),ot("pad",X,"bottom"),qe("pad",V,"bottom"));const m=new Map(a),y=new Map(r.layerSettings);return y.set(f,{color:X,size:V}),m.set(r.id,{...r,layerSettings:y,settings:{color:X,size:V}}),Tn.current=X,sn.current=V,m}else if(R==="draw"&&je==="testPoint"){const f=an||"top";f==="top"?($(X),gn(V),ot("testPoint",X,"top"),qe("testPoint",V,"top")):(Ke(X),ki(V),ot("testPoint",X,"bottom"),qe("testPoint",V,"bottom"));const m=new Map(a),y=new Map(r.layerSettings);return y.set(f,{color:X,size:V}),m.set(r.id,{...r,layerSettings:y,settings:{color:X,size:V}}),Tn.current=X,sn.current=V,m}else if(R==="component"){const f=xn||"top";f==="top"?(Ri(X),Qi(V),ot("component",X,"top"),qe("component",V,"top")):(ii(X),Wl(V),ot("component",X,"bottom"),qe("component",V,"bottom"));const m=new Map(a),y=new Map(r.layerSettings);return y.set(f,{color:X,size:V}),m.set(r.id,{...r,layerSettings:y,settings:{color:X,size:V}}),Tn.current=X,sn.current=V,m}else{const f=new Map(a);return f.set(r.id,{...r,settings:{color:X,size:V}}),Tn.current=X,sn.current=V,f}return a})},[X,V,R,je,dt,$t,an,xn,el,ot,qe,Nc,z,de,Pe,ke,I,Q,Y,N,$,Ke,gn,ki,Ri,ii,Qi,Wl]),Oe.useEffect(()=>{R==="power"?(Yi(!0),gr(null)):(Yi(!1),gr(null))},[R]),Oe.useEffect(()=>{R==="ground"?(rl(!0),Ml(null)):(rl(!1),Ml(null))},[R]),Oe.useEffect(()=>{ra(R==="draw"&&je==="trace")},[R,je]),Oe.useEffect(()=>{io(R==="draw"&&je==="pad")},[R,je]),Oe.useEffect(()=>{ei(R==="draw"&&je==="testPoint")},[R,je]),Oe.useEffect(()=>{Mt.toolInstanceId&&(Be(Mt.color),k(Mt.size))},[Mt.toolInstanceId,Mt.color,Mt.size,Be,k,R,je]);const[Ia,_t]=S.useState(void 0),[,Xt]=S.useState([]),[,qs]=S.useState([]),[,ya]=S.useState([]),[,Yl]=S.useState([]),[as,tl]=S.useState([]),[Pc,li]=S.useState([]),[os,_e]=S.useState([]),[En,Xl]=S.useState([]),Mn=S.useRef(null),Gl=Bx(),{selectedIds:ht,setSelectedIds:Tt,isSelecting:Zs,setIsSelecting:Qs,selectedComponentIds:gt,setSelectedComponentIds:Ct,selectedPowerIds:Ht,setSelectedPowerIds:vt,selectedGroundIds:mt,setSelectedGroundIds:wt}=Gl,Oc=Ex(),{componentsTop:xt,setComponentsTop:rn,componentsBottom:Nt,setComponentsBottom:yn,componentEditor:xo,setComponentEditor:yo,connectingPin:Cn,setConnectingPin:Wa,componentDialogPosition:Wi,setComponentDialogPosition:Fi,isDraggingDialog:Ks,setIsDraggingDialog:Js,dialogDragOffset:ss,setDialogDragOffset:er,openComponentEditor:tr}=Oc,Bd=Vx(),{powerBuses:st,setPowerBuses:yi,groundBuses:bi,setGroundBuses:wl,powerSymbols:Nu,setPowerSymbols:ai,groundSymbols:_c,setGroundSymbols:Gn,powerEditor:oi,setPowerEditor:Fa}=Bd,Mu=$x(),{areImagesLocked:vi,setAreImagesLocked:rs,areViasLocked:$n,setAreViasLocked:cs,arePadsLocked:$i,setArePadsLocked:nr,areTestPointsLocked:ba,setAreTestPointsLocked:Hc,areTracesLocked:qn,setAreTracesLocked:ds,areComponentsLocked:Mi,setAreComponentsLocked:us,areGroundNodesLocked:Ui,setAreGroundNodesLocked:$a,arePowerNodesLocked:vn,setArePowerNodesLocked:fs}=Mu,Uu=Lx(),{openMenu:Pd,setOpenMenu:ir,setSizeDialog:Wr,setSetSizeDialog:Fr,autoSaveDialog:Ec,setAutoSaveDialog:La,autoSavePromptDialog:$r,setAutoSavePromptDialog:jl,debugDialog:ps,setDebugDialog:bo,errorDialog:lr,setErrorDialog:ql,newProjectDialog:Vc,setNewProjectDialog:Ya,openProjectDialog:Lr,setOpenProjectDialog:vo,newProjectSetupDialog:Qt,setNewProjectSetupDialog:Xa,saveAsDialog:Kt,setSaveAsDialog:mo,showColorPicker:Ic,setShowColorPicker:hs,transformImagesDialogVisible:Od,setTransformImagesDialogVisible:Yr}=Uu,ar=Yx(),{autoSaveEnabled:Zn,setAutoSaveEnabled:nl,autoSaveInterval:Zl,setAutoSaveInterval:Tl,autoSaveDirHandle:va,setAutoSaveDirHandle:Ql,autoSaveBaseName:Kl,setAutoSaveBaseName:il,currentProjectFilePath:or,setCurrentProjectFilePath:mi,projectDirHandle:Ln,setProjectDirHandle:Jl,projectName:si,setProjectName:Cl,autoSaveFileHistory:Bu,setAutoSaveFileHistory:Vn,currentFileIndex:gs,setCurrentFileIndex:sr,autoSaveIntervalRef:Jt,hasChangesSinceLastAutoSaveRef:zl,prevAutoSaveEnabledRef:Xr}=ar,Gr=S.useRef(null),_d=S.useRef(null),Ga=S.useRef(null),xs=S.useRef(null),qa=S.useRef(null),So=S.useRef(null),Wc=S.useRef(null),[Li,ea]=S.useState(!1),ma=S.useRef(null),wo=S.useRef(null),[kl,rr]=S.useState(!1),[ys,bs]=S.useState({}),[Hd,ta]=S.useState(!1),Si=S.useRef(null),[cr,Fc]=S.useState(!1),[jo,Qn]=S.useState(null),[To,Kn]=S.useState(null),[Rl,$c]=S.useState({width:960,height:600}),dr=S.useRef(null),ur=S.useRef(null),Lc=S.useRef(null),na=S.useRef(null),qr=S.useRef(null),fr=S.useRef(null),Co=S.useRef(null),Ed=S.useRef(null),[ri,ia]=S.useState(!0),[ll,Sa]=S.useState(!0),[Jn,al]=S.useState(!0),[Bi,zo]=S.useState(!0),[Pi,ko]=S.useState(!0),[zn,Dl]=S.useState(!0),[ci,wa]=S.useState(!0),[ol,wi]=S.useState(!0),[In,Al]=S.useState(!0),[Wn,di]=S.useState(!0),[Yn,Za]=S.useState(!0),[la,Qa]=S.useState(!0),ft=Nu,Ge=_c,[pn,Rt]=S.useState(!1),[Ka,sl]=S.useState(null),[pr,Yi]=S.useState(!1),[hr,gr]=S.useState(null),[vs,Nl]=S.useState(!1),[Yc,xr]=S.useState(null),[yr,rl]=S.useState(!1),[Oi,Ml]=S.useState(null),[Xi,Ro]=S.useState(!0),[Do,Ul]=S.useState(!1),[Zr,aa]=S.useState(!1),mn=S.useRef({}),[cl,Ao]=S.useState(!0),[ms,Ss]=S.useState(!0),[br,kn]=S.useState(!0),[_i,ja]=S.useState(null),[No,Qr]=S.useState(!1),[Ta,Mo]=S.useState(null),[Xc,Ca]=S.useState(!1),[ws,vr]=S.useState(null),[za,Kr]=S.useState(!1),[Uo,Gc]=S.useState(null),[oa,Bo]=S.useState([]),[js,Po]=S.useState(!1),[Oo,Ts]=S.useState(null),[ka,Ra]=S.useState(!1),[mr,Jr]=S.useState(null),[Cs,_o]=S.useState(null),[ec,Ja]=S.useState(!1);Oe.useEffect(()=>{st.length===0&&yi([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[st.length,yi]);const Gi=S.useCallback((a,r)=>{const f=ft.find(y=>y.pointId===a);if(f){const y=r.find(g=>g.id===f.powerBusId);return`Via (${y?y.voltage:f.type||"Power Node"})`}const m=Ge.find(y=>y.pointId===a);return m?`Via (${m.type||"Ground"})`:"Via (Signal)"},[ft,Ge]),Bl=S.useCallback((a,r)=>{const f=ft.find(y=>y.pointId===a);if(f){const y=r.find(g=>g.id===f.powerBusId);return`Pad (${y?y.voltage:f.type||"Power Node"})`}const m=Ge.find(y=>y.pointId===a);return m?`Pad (${m.type||"Ground"})`:"Pad (Signal)"},[ft,Ge]),ji=S.useCallback((a,r)=>{const f=ft.find(y=>y.pointId===a);if(f){const y=r.find(g=>g.id===f.powerBusId);return`Test Point (${y?y.voltage:f.type||"Power Node"})`}const m=Ge.find(y=>y.pointId===a);return m?`Test Point (${m.type||"Ground"})`:"Test Point (Signal)"},[ft,Ge]),Vd=S.useCallback(()=>{const a=$e.filter(r=>r.type==="via").map(r=>r.id);Tt(new Set(a)),Ct(new Set),vt(new Set),wt(new Set)},[$e,Tt,Ct,vt,wt]),eo=S.useCallback(()=>{const a=$e.filter(r=>r.type==="trace").map(r=>r.id);Tt(new Set(a)),Ct(new Set),vt(new Set),wt(new Set)},[$e,Tt,Ct,vt,wt]),qc=S.useCallback(()=>{const a=$e.filter(r=>r.type==="pad").map(r=>r.id);Tt(new Set(a)),Ct(new Set),vt(new Set),wt(new Set)},[$e,Tt,Ct,vt,wt]),Zc=S.useCallback(()=>{const a=[...xt,...Nt].map(r=>r.id);Ct(new Set(a)),Tt(new Set),vt(new Set),wt(new Set)},[xt,Nt,Ct,Tt,vt,wt]),to=S.useCallback(()=>{const a=[...xt,...Nt].filter(r=>{const f=r.pinConnections||[];return!(f.length>0&&f.length===r.pinCount&&f.every(y=>y&&y.trim()!==""))}).map(r=>r.id);Ct(new Set(a)),Tt(new Set),vt(new Set),wt(new Set),bo({visible:!0,text:""})},[xt,Nt,Ct,Tt,vt,wt,bo]),no=S.useCallback((a,r,f)=>{const m=Mn.current;if(!m)return;const y=m.width-80,v=m.height-80,g=y/2,w=v/2,C=g-r*Ve,M=w-f*Ve;Pn({x:C,y:M}),Ct(new Set([a])),Tt(new Set),vt(new Set),wt(new Set)},[Ve,Pn,Ct,Tt,vt,wt]),Sr=Oe.useMemo(()=>{const a=new Set(ft.map(f=>f.powerBusId).filter(f=>typeof f=="string"&&f.length>0)),r=st.filter(f=>a.has(f.id)).map(f=>f.name);return Array.from(new Set(r)).sort()},[ft,st]),Qc=Oe.useMemo(()=>{const a=new Set(Ge.map(f=>f.groundBusId).filter(f=>typeof f=="string"&&f.length>0)),r=bi.filter(f=>a.has(f.id)).map(f=>f.name);return Array.from(new Set(r)).sort()},[Ge,bi]),Kc=S.useCallback(()=>{const a=ft.map(r=>r.id);vt(new Set(a)),Tt(new Set),Ct(new Set),wt(new Set)},[ft,vt,Tt,Ct,wt]),wr=S.useCallback(()=>{const a=Ge.map(r=>r.id);wt(new Set(a)),Tt(new Set),Ct(new Set),vt(new Set)},[Ge,wt,Tt,Ct,vt]),jr=S.useCallback(a=>{const r=st.filter(m=>m.name===a).map(m=>m.id);if(r.length===0)return;const f=ft.filter(m=>m.powerBusId&&r.includes(m.powerBusId)).map(m=>m.id);vt(new Set(f)),Tt(new Set),Ct(new Set),wt(new Set)},[st,ft,vt,Tt,Ct,wt]),Id=S.useCallback(a=>{const r=bi.filter(m=>m.name===a).map(m=>m.id);if(r.length===0)return;const f=Ge.filter(m=>m.groundBusId&&r.includes(m.groundBusId)).map(m=>m.id);wt(new Set(f)),Tt(new Set),Ct(new Set),vt(new Set)},[bi,Ge,wt,Tt,Ct,vt]);S.useCallback(a=>{switch(a.componentType){case"Resistor":case"ResistorNetwork":case"Thermistor":case"VariableResistor":if("resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit)return`${a.resistance} ${a.resistanceUnit}`;break;case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":if("capacitance"in a&&a.capacitance&&"capacitanceUnit"in a&&a.capacitanceUnit)return`${a.capacitance} ${a.capacitanceUnit}`;break;case"Inductor":if("inductance"in a&&a.inductance&&"inductanceUnit"in a&&a.inductanceUnit)return`${a.inductance} ${a.inductanceUnit}`;break;case"Battery":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"Diode":case"ZenerDiode":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"Fuse":if("current"in a&&a.current&&"currentUnit"in a&&a.currentUnit)return`${a.current} ${a.currentUnit}`;break;case"FerriteBead":if("impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit)return`${a.impedance} ${a.impedanceUnit}`;break;case"Relay":if("coilVoltage"in a&&a.coilVoltage&&"coilVoltageUnit"in a&&a.coilVoltageUnit)return`${a.coilVoltage} ${a.coilVoltageUnit}`;break;case"Speaker":if("impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit)return`${a.impedance} ${a.impedanceUnit}`;break;case"Motor":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"PowerSupply":if("outputVoltage"in a&&a.outputVoltage&&"outputVoltageUnit"in a&&a.outputVoltageUnit)return`${a.outputVoltage} ${a.outputVoltageUnit}`;break;case"Transistor":if("partNumber"in a&&a.partNumber)return a.partNumber;break;case"IntegratedCircuit":if("partNumber"in a&&a.partNumber)return a.partNumber;break}return null},[]);const Wd=S.useCallback(a=>{const r=[];switch(a.componentType){case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":"capacitance"in a&&a.capacitance&&"capacitanceUnit"in a&&a.capacitanceUnit&&r.push(`Capacitance: ${a.capacitance} ${a.capacitanceUnit}`),"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"dielectric"in a&&a.dielectric&&r.push(`Dielectric: ${a.dielectric}`);break;case"Resistor":case"ResistorNetwork":case"Thermistor":"resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit&&r.push(`Resistance: ${a.resistance} ${a.resistanceUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"VariableResistor":"resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit&&r.push(`Resistance: ${a.resistance} ${a.resistanceUnit}`),"vrType"in a&&a.vrType&&r.push(`Type: ${a.vrType}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"taper"in a&&a.taper&&r.push(`Taper: ${a.taper}`);break;case"Inductor":"inductance"in a&&a.inductance&&"inductanceUnit"in a&&a.inductanceUnit&&r.push(`Inductance: ${a.inductance} ${a.inductanceUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"Battery":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"capacity"in a&&a.capacity&&"capacityUnit"in a&&a.capacityUnit&&r.push(`Capacity: ${a.capacity} ${a.capacityUnit}`);break;case"Diode":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`);break;case"ZenerDiode":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"Fuse":"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`),"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`);break;case"FerriteBead":"impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit&&r.push(`Impedance: ${a.impedance} ${a.impedanceUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`);break;case"Relay":"coilVoltage"in a&&a.coilVoltage&&"coilVoltageUnit"in a&&a.coilVoltageUnit&&r.push(`Coil Voltage: ${a.coilVoltage} ${a.coilVoltageUnit}`),"contactRating"in a&&a.contactRating&&r.push(`Contact Rating: ${a.contactRating}`);break;case"Speaker":"impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit&&r.push(`Impedance: ${a.impedance} ${a.impedanceUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`);break;case"Motor":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"speed"in a&&a.speed&&"speedUnit"in a&&a.speedUnit&&r.push(`Speed: ${a.speed} ${a.speedUnit}`);break;case"PowerSupply":"outputVoltage"in a&&a.outputVoltage&&"outputVoltageUnit"in a&&a.outputVoltageUnit&&r.push(`Output Voltage: ${a.outputVoltage} ${a.outputVoltageUnit}`),"outputCurrent"in a&&a.outputCurrent&&"outputCurrentUnit"in a&&a.outputCurrentUnit&&r.push(`Output Current: ${a.outputCurrent} ${a.outputCurrentUnit}`);break;case"Transistor":"partNumber"in a&&a.partNumber&&r.push(`Part Number: ${a.partNumber}`),"transistorType"in a&&a.transistorType&&r.push(`Type: ${a.transistorType}`);break;case"Crystal":"frequency"in a&&a.frequency&&r.push(`Frequency: ${a.frequency}`),"loadCapacitance"in a&&a.loadCapacitance&&r.push(`Load Capacitance: ${a.loadCapacitance}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"VacuumTube":"tubeType"in a&&a.tubeType&&r.push(`Tube Type: ${a.tubeType}`),"partNumber"in a&&a.partNumber&&r.push(`Part Number: ${a.partNumber}`);break}return r},[]),[sa,ra]=S.useState(!1),Ho=S.useRef(null),[zs,io]=S.useState(!1),[Ti,ei]=S.useState(!1),dl=S.useRef(null),Eo=S.useRef(null),Tr=S.useRef(null),Pl=S.useRef(null),[ui,ln]=S.useState(!1),[lo,Hi]=S.useState(!1),[it,Gt]=S.useState(null),[_n,tc]=S.useState(new Set),Vo=S.useRef(null),qi=S.useRef(null),Io=S.useRef(null),ao=S.useRef(null),Da=S.useRef(null),Jc=S.useRef(null),bn=S.useRef(null),Cr=S.useRef(null),[ed,td]=S.useState(null),[Ol,Fd]=S.useState(!1),[oo,nc]=S.useState(null),[ca,ti]=S.useState(null),Rn=S.useCallback(async(a,r)=>{try{const f=await createImageBitmap(a),m=URL.createObjectURL(a),y=await new Promise((H,Z)=>{const ge=new FileReader;ge.onload=()=>H(ge.result),ge.onerror=Z,ge.readAsDataURL(a)}),v=Mn.current;let g=0,w=0;if(v){const H=v.width-80,Z=v.height-80,ge=H/2,q=Z/2;g=(ge-jt.x)/Ve,w=(q-jt.y)/Ve}const C=a.name,M={url:m,name:a.name,width:f.width,height:f.height,dataUrl:y,filePath:C,x:g,y:w,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:f};r==="top"?d(M):P(M)}catch(f){console.error("Failed to load image",f)}},[jt.x,jt.y,Ve,x,D]),ic=S.useCallback(a=>{a.stopPropagation(),a.preventDefault();const r=Mn.current;if(!r)return;document.activeElement!==r&&r.focus();const f=r.getBoundingClientRect(),m=r.width/f.width,y=r.height/f.height,v=a.nativeEvent.offsetX,g=a.nativeEvent.offsetY,w=typeof v=="number"?v:a.clientX-f.left,C=typeof g=="number"?g:a.clientY-f.top,M=w*m,H=C*y,Z=M-40,ge=H-40,q=(Z-jt.x)/Ve,ie=(ge-jt.y)/Ve;if(R==="center"){ta(!0),Si.current&&clearTimeout(Si.current),Si.current=setTimeout(()=>{ta(!1),W("select"),_t(void 0)},2e3);return}if(R==="select"){if(Cn){let U=1/0,he=null,re=null;const Ne=Math.max(6/Ve,4),Qe=[...xt,...Nt].find(Ye=>Ye.id===Cn.componentId)?.layer||"top";for(const Ye of $e)if((Ye.type==="via"||Ye.type==="pad")&&Ye.points.length>0){if(Ye.type==="pad"&&(Ye.layer||"top")!==Qe)continue;const rt=Ye.points[0],et=Math.max(1,Ye.size/2),yt=Math.hypot(rt.x-q,rt.y-ie),tt=Math.max(et,Ne);yt<=tt&&yt<U&&(U=yt,he=rt.id??null,re=Ye)}if(re?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${re.id}`),console.log(`  Point ID: ${he}`),console.log(`  Point coordinates: x=${re.points[0].x.toFixed(2)}, y=${re.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${q.toFixed(2)}, y=${ie.toFixed(2)}`),console.log(`  Distance: ${U.toFixed(2)}`),console.log(`  Via size: ${re.size}, radius: ${Math.max(1,re.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${q.toFixed(2)}, y=${ie.toFixed(2)}`),console.log(`  Hit tolerance: ${Ne.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${$e.filter(Ye=>Ye.type==="via").length}`)),he!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${he} (type: ${typeof he})`);const Ye=String(he),rt=Cn.pinIndex,et=Cn.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${rt} (Pin ${rt+1}) of component ${et} to point ID ${Ye}`);const yt=xt.find(Me=>Me.id===et),tt=Nt.find(Me=>Me.id===et);yt?(console.log("Component found in TOP layer"),rn(Me=>{const at=Me.find(pt=>pt.id===et);if(!at)return console.error(`Component ${et} not found in TOP layer during update!`),Me;console.log("BEFORE update: pinConnections =",at.pinConnections);const en=at.pinConnections||[],tn=en.length>0?[...en]:new Array(at.pinCount).fill("");let Et;if(tn.length!==at.pinCount){Et=new Array(at.pinCount).fill("");for(let pt=0;pt<Math.min(tn.length,at.pinCount);pt++)Et[pt]=tn[pt]||""}else Et=[...tn];Et[rt]=Ye,console.log(`Updating pin ${rt} with value: ${Ye}`),console.log("New pinConnections array:",Et);const Sn=Me.map(pt=>pt.id===et?{...pt,pinConnections:Et}:pt),wn=Sn.find(pt=>pt.id===et);return console.log("AFTER update: pinConnections =",wn?.pinConnections),console.log(`Pin ${rt} value: ${wn?.pinConnections[rt]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),Sn})):tt?(console.log("Component found in BOTTOM layer"),yn(Me=>{const at=Me.find(pt=>pt.id===et);if(!at)return console.error(`Component ${et} not found in BOTTOM layer during update!`),Me;console.log("BEFORE update: pinConnections =",at.pinConnections);const en=at.pinConnections||[],tn=en.length>0?[...en]:new Array(at.pinCount).fill("");let Et;if(tn.length!==at.pinCount){Et=new Array(at.pinCount).fill("");for(let pt=0;pt<Math.min(tn.length,at.pinCount);pt++)Et[pt]=tn[pt]||""}else Et=[...tn];Et[rt]=Ye,console.log(`Updating pin ${rt} with value: ${Ye}`),console.log("New pinConnections array:",Et);const Sn=Me.map(pt=>pt.id===et?{...pt,pinConnections:Et}:pt),wn=Sn.find(pt=>pt.id===et);return console.log("AFTER update: pinConnections =",wn?.pinConnections),console.log(`Pin ${rt} value: ${wn?.pinConnections[rt]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),Sn})):(console.error(`Component ${et} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",xt.map(Me=>Me.id)),console.log("Available BOTTOM components:",Nt.map(Me=>Me.id))),setTimeout(()=>{Wa(null)},0);return}else Wa(null)}const K=10,oe=(()=>{for(const U of xt)if(q>=U.x-K&&q<=U.x+K&&ie>=U.y-K&&ie<=U.y+K)return{layer:"top",comp:U};for(const U of Nt)if(q>=U.x-K&&q<=U.x+K&&ie>=U.y-K&&ie<=U.y+K)return{layer:"bottom",comp:U};return null})();if(oe){const{comp:U}=oe;a.shiftKey?Ct(he=>{const re=new Set(he);return re.has(U.id)?re.delete(U.id):re.add(U.id),re}):(Ct(new Set([U.id])),Tt(new Set),vt(new Set),wt(new Set));return}const ee=Math.max(6/Ve,4);let ye=null;for(const U of ft){const he=Math.max(6,U.size/2),re=he*.8,Ne=he+re,Ee=Math.hypot(U.x-q,U.y-ie),Qe=Math.abs(q-U.x)<=ee&&Math.abs(ie-U.y)<=Ne,Ye=Math.abs(ie-U.y)<=ee&&Math.abs(q-U.x)<=Ne;if(Ee<=Math.max(he,ee)||Qe||Ye){ye=U;break}}if(ye){a.shiftKey?vt(U=>{const he=new Set(U);return he.has(ye.id)?he.delete(ye.id):he.add(ye.id),he}):(vt(new Set([ye.id])),Tt(new Set),Ct(new Set),wt(new Set));return}let De=null;for(const U of Ge){const he=Math.max(6,(U.size||18)/2),re=he*.8,Ne=he+re,Ee=Math.hypot(U.x-q,U.y-ie),Qe=Math.abs(q-U.x)<=ee&&Math.abs(ie-U.y)<=Ne,Ye=Math.abs(ie-U.y)<=ee&&Math.abs(q-U.x)<=Ne;if(Ee<=Math.max(he,ee)||Qe||Ye){De=U;break}}if(De){a.shiftKey?wt(U=>{const he=new Set(U);return he.has(De.id)?he.delete(De.id):he.add(De.id),he}):(wt(new Set([De.id])),Tt(new Set),Ct(new Set),vt(new Set));return}const ve=Math.max(6/Ve,4/Ve),Fe=Math.max(ve,.5);let L=null;for(const U of $e)if((U.type==="via"||U.type==="pad"||U.type==="testPoint")&&U.points.length>0){let he=!1;if(U.type==="via"?he=Jn:U.type==="pad"?he=(U.layer||"top")==="top"?zn:ci:U.type==="testPoint"&&(he=(U.layer||"top")==="top"?ol:In),!he)continue;const re=U.points[0],Ne=Math.max(1,U.size/2);if(Math.hypot(re.x-q,re.y-ie)<=Math.max(Ne,Fe)){L=U;break}}if(L){a.shiftKey?Tt(U=>{const he=new Set(U);return he.has(L.id)?he.delete(L.id):he.add(L.id),he}):(Tt(new Set([L.id])),Ct(new Set),vt(new Set),wt(new Set));return}a.shiftKey||(Tt(new Set),Ct(new Set),vt(new Set),wt(new Set)),Qs(!0),nc({x:q,y:ie,shiftKey:a.shiftKey}),ti({x:q,y:ie,width:0,height:0});return}else if(R==="magnify"){const K=a.shiftKey?.5:2,oe=Math.max(.25,Math.min(8,Ve*K)),ee=Z-oe*q,ye=ge-oe*ie;Ii(oe),Pn({x:ee,y:ye});return}else if(R==="pan"){ma.current={startCX:Z,startCY:ge,panX:jt.x,panY:jt.y},wo.current={startClientX:a.clientX,startClientY:a.clientY,panX:jt.x,panY:jt.y},ea(!0);return}else if(R==="draw"){const K=(ye,De)=>{let Re=1/0,ve=null;const Fe=10/Ve,L=Ve>20?Math.max(Fe,1e-4):Ve>10?Math.max(Fe,.001):Math.max(Fe,.01);for(const re of $e)if(re.type==="via"){const Ne=re.points[0],Ee=Math.hypot(Ne.x-ye,Ne.y-De);Ee<=L&&Ee<Re&&(Re=Ee,ve=Ne)}else if(re.type==="pad"){const Ne=re.points[0],Ee=Math.hypot(Ne.x-ye,Ne.y-De);Ee<=L&&Ee<Re&&(Re=Ee,ve=Ne)}for(const re of ft)if(re.pointId!==void 0){const Ne=Math.hypot(re.x-ye,re.y-De);Ne<=L&&Ne<Re&&(Re=Ne,ve={x:re.x,y:re.y,id:re.pointId})}for(const re of Ge)if(re.pointId!==void 0){const Ne=Math.hypot(re.x-ye,re.y-De);Ne<=L&&Ne<Re&&(Re=Ne,ve={x:re.x,y:re.y,id:re.pointId})}const he=Yt(ve??{x:ye,y:De});return{x:he.x,y:he.y,nodeId:ve?.id}};if(je==="via"){const ye=bt.get("via"),De=ye.color,Re=ye.size,He=Ol?{x:Yt({x:q,y:ie}).x,y:Yt({x:q,y:ie}).y}:((re,Ne)=>{let Ee=1/0,Qe=null;const rt=10/Ve,et=Ve>10?Math.max(rt,.001):Math.max(rt,.01);for(const Me of $e)if(Me.type==="via"||Me.type==="pad"){const at=Me.points[0],en=Math.hypot(at.x-re,at.y-Ne);en<=et&&en<Ee&&(Ee=en,Qe=at)}for(const Me of ft)if(Me.pointId!==void 0){const at=Math.hypot(Me.x-re,Me.y-Ne);at<=et&&at<Ee&&(Ee=at,Qe={x:Me.x,y:Me.y,id:Me.pointId})}for(const Me of Ge)if(Me.pointId!==void 0){const at=Math.hypot(Me.x-re,Me.y-Ne);at<=et&&at<Ee&&(Ee=at,Qe={x:Me.x,y:Me.y,id:Me.pointId})}const tt=Yt(Qe??{x:re,y:Ne});return{x:tt.x,y:tt.y,nodeId:Qe?.id}})(q,ie),Fe=He.nodeId??Ba(),L=Gi(Fe,st),U={id:Fe,x:He.x,y:He.y},he={id:`${Date.now()}-via`,points:[U],color:De,size:Re,layer:Je,type:"via",viaType:L};Pt(re=>[...re,he]),Je==="top"?Xt(re=>[...re,he.id]):qs(re=>[...re,he.id]);return}if(je==="pad"){if(!$t)return;const De=Ol?{x:Yt({x:q,y:ie}).x,y:Yt({x:q,y:ie}).y}:((he,re)=>{let Ne=1/0,Ee=null;const Ye=10/Ve,rt=Ve>10?Math.max(Ye,.001):Math.max(Ye,.01);for(const tt of $e)if(tt.type==="via"||tt.type==="pad"||tt.type==="testPoint"){const Me=tt.points[0],at=Math.hypot(Me.x-he,Me.y-re);at<=rt&&at<Ne&&(Ne=at,Ee=Me)}for(const tt of ft)if(tt.pointId!==void 0){const Me=Math.hypot(tt.x-he,tt.y-re);Me<=rt&&Me<Ne&&(Ne=Me,Ee={x:tt.x,y:tt.y,id:tt.pointId})}for(const tt of Ge)if(tt.pointId!==void 0){const Me=Math.hypot(tt.x-he,tt.y-re);Me<=rt&&Me<Ne&&(Ne=Me,Ee={x:tt.x,y:tt.y,id:tt.pointId})}const yt=Yt(Ee??{x:he,y:re});return{x:yt.x,y:yt.y,nodeId:Ee?.id}})(q,ie),Re=De.nodeId??Ba(),ve=Bl(Re,st),He=X||($t==="top"?fe:O),Fe=V||($t==="top"?Te:T),L={id:Re,x:De.x,y:De.y},U={id:`${Date.now()}-pad`,points:[L],color:He,size:Fe,layer:$t,type:"pad",padType:ve};Pt(he=>[...he,U]);return}if(je==="testPoint"){if(!an)return;const De=Ol?{x:Yt({x:q,y:ie}).x,y:Yt({x:q,y:ie}).y}:((re,Ne)=>{let Ee=1/0,Qe=null;const Ye=15;for(const yt of $e)if(yt.type==="via"||yt.type==="pad"||yt.type==="testPoint"){const tt=yt.points[0],Me=Math.hypot(tt.x-re,tt.y-Ne);Me<=Ye&&Me<Ee&&(Ee=Me,Qe=tt)}for(const yt of ft)if(yt.pointId!==void 0){const tt=Math.hypot(yt.x-re,yt.y-Ne);tt<=Ye&&tt<Ee&&(Ee=tt,Qe={x:yt.x,y:yt.y,id:yt.pointId})}for(const yt of Ge)if(yt.pointId!==void 0){const tt=Math.hypot(yt.x-re,yt.y-Ne);tt<=Ye&&tt<Ee&&(Ee=tt,Qe={x:yt.x,y:yt.y,id:yt.pointId})}const et=Yt(Qe??{x:re,y:Ne});return{x:et.x,y:et.y,nodeId:Qe?.id}})(q,ie),Re=De.nodeId??Ba(),ve=ji(Re,st),He=ve.includes("Power")?"power":ve.includes("Ground")?"ground":ve.includes("Signal")?"signal":"unknown",Fe=Yt({x:De.x,y:De.y}),L=X||(an==="top"?_:Ue),U=V||(an==="top"?ct:We),he={id:`${Date.now()}-testPoint`,points:[{id:Re,x:Fe.x,y:Fe.y}],color:L,size:U,layer:an,type:"testPoint",testPointType:He};Pt(re=>[...re,he]);return}if(Fl.current)return;const oe=je==="trace"&&!Ol?K(q,ie):{x:Yt({x:q,y:ie}).x,y:Yt({x:q,y:ie}).y},ee=oe.nodeId!==void 0?{id:oe.nodeId,x:oe.x,y:oe.y}:{x:oe.x,y:oe.y};Fn(ye=>ye.length===0?[ee]:[...ye,ee]),Ys.current=Date.now(),Di(null),_a(!1),Xs(!1)}else if(R==="erase"){if($e.some(oe=>oe.layer===Je&&(oe.type==="via"&&$n||oe.type==="pad"&&$i||oe.type==="testPoint"&&ba||oe.type==="trace"&&qn))){const oe=[];$n&&$e.some(ee=>ee.layer===Je&&ee.type==="via")&&oe.push("vias"),$i&&$e.some(ee=>ee.layer===Je&&ee.type==="pad")&&oe.push("pads"),ba&&$e.some(ee=>ee.layer===Je&&ee.type==="testPoint")&&oe.push("test points"),qn&&$e.some(ee=>ee.layer===Je&&ee.type==="trace")&&oe.push("traces"),oe.length>0&&alert(`Cannot erase: ${oe.join(", ")} are locked on the ${Je} layer. Unlock them to erase.`)}_a(!0),Fn([{id:Ba(),x:q,y:ie}]),console.log("Starting erase at:",q,ie,"selectedDrawingLayer:",Je,"total strokes:",$e.length)}else if(R==="transform"&&At){if(vi){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}Ai(!0),Ni({x:q,y:ie})}else if(R==="component"){if(!it)return;const K=Yt({x:q,y:ie}),oe=X||(xn==="top"?Nn:hi),ee=V||(xn==="top"?gi:Vi),ye=[...xt,...Nt];let De;Do?De=Nd():De={...mn.current};const Re=ax(it,xn,K.x,K.y,oe,ee,ye,De,Xi);if(Re.abbreviation=Pf(it),Xi&&Re.designator){const ve=Of(it),He=Re.designator.match(new RegExp(`^${ve.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(He){const Fe=parseInt(He[1],10);if(Do){const L=Nd();rx(ve,Fe,L)}else mn.current[ve]=Math.max(mn.current[ve]||0,Fe)}}xn==="top"?(di(!0),rn(ve=>[...ve,Re])):(Za(!0),yn(ve=>[...ve,Re]));return}else if(R==="power"){if(!hr)return;const oe=Ol?{x:Yt({x:q,y:ie}).x,y:Yt({x:q,y:ie}).y}:((ye,De)=>{let Re=1/0,ve=null;const Fe=10/Ve,L=Ve>20?Math.max(Fe,1e-4):Ve>10?Math.max(Fe,.001):Math.max(Fe,.01);for(const re of $e)if(re.type==="via"||re.type==="pad"){const Ne=re.points[0],Ee=Math.hypot(Ne.x-ye,Ne.y-De);Ee<=L&&Ee<Re&&(Re=Ee,ve=Ne)}else if(re.type==="trace")for(const Ne of re.points){const Ee=Math.hypot(Ne.x-ye,Ne.y-De);Ee<=L&&Ee<Re&&(Re=Ee,ve=Ne)}const he=Yt(ve??{x:ye,y:De});return{x:he.x,y:he.y,nodeId:ve?.id}})(q,ie),ee=st.find(ye=>ye.id===hr);if(ee){const ye=oe.nodeId??Ba(),De=`${ee.voltage} Power Node`;if(Ge.find(He=>He.pointId===ye)){ql({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${ye}). Power and ground nodes cannot share the same Node ID.`});return}const ve={id:`power-${Date.now()}-${Math.random()}`,x:oe.x,y:oe.y,color:"#ff0000",size:V,powerBusId:ee.id,layer:Je,type:De,pointId:ye};if(ai(He=>[...He,ve]),oe.nodeId!==void 0){const He=Gi(oe.nodeId,st),Fe=Bl(oe.nodeId,st),L=ji(oe.nodeId,st),U=L.includes("Power")?"power":L.includes("Ground")?"ground":L.includes("Signal")?"signal":"unknown";Pt(he=>he.map(re=>re.type==="via"&&re.points.length>0&&re.points[0].id===oe.nodeId?{...re,viaType:He}:re.type==="pad"&&re.points.length>0&&re.points[0].id===oe.nodeId?{...re,padType:Fe}:re.type==="testPoint"&&re.points.length>0&&re.points[0].id===oe.nodeId?{...re,testPointType:U}:re))}}return}else if(R==="ground"){if(Oi===null){if(bi.length===0){ql({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}rl(!0);return}const K=bi.find(oe=>oe.id===Oi);if(K){const ee=Ol?{x:Yt({x:q,y:ie}).x,y:Yt({x:q,y:ie}).y}:((He,Fe)=>{let L=1/0,U=null;const re=10/Ve,Ne=Ve>20?Math.max(re,1e-4):Ve>10?Math.max(re,.001):Math.max(re,.01);for(const Ye of $e)if(Ye.type==="via"||Ye.type==="pad"){const rt=Ye.points[0],et=Math.hypot(rt.x-He,rt.y-Fe);et<=Ne&&et<L&&(L=et,U=rt)}else if(Ye.type==="trace")for(const rt of Ye.points){const et=Math.hypot(rt.x-He,rt.y-Fe);et<=Ne&&et<L&&(L=et,U=rt)}const Qe=Yt(U??{x:He,y:Fe});return{x:Qe.x,y:Qe.y,nodeId:U?.id}})(q,ie),ye=ee.nodeId??Ba(),De=`${K.name} Ground Node`,Re=ft.find(He=>He.pointId===ye);if(Re){ql({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${Re.type||"Power Node"}) already exists at this Node ID (${ye}). Power and ground nodes cannot share the same Node ID.`});return}const ve={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:ee.x,y:ee.y,color:K.color,size:V||Ot.get("ground")?.settings.size||18,groundBusId:K.id,layer:Je,type:De,pointId:ye};if(Gn(He=>[...He,ve]),ee.nodeId!==void 0){const He=Gi(ee.nodeId,st),Fe=Bl(ee.nodeId,st);Pt(L=>L.map(U=>U.type==="via"&&U.points.length>0&&U.points[0].id===ee.nodeId?{...U,viaType:He}:U.type==="pad"&&U.points.length>0&&U.points[0].id===ee.nodeId?{...U,padType:Fe}:U))}}return}},[R,At,V,X,je,Je,$e,Ve,jt.x,jt.y,Ol,hr,Oi,st,bi,it,Ot,$t,dt,an,ft,Ge,Gi,Bl,ji,Jn,zn,ci]),zr=S.useCallback(a=>{if(R!=="magnify")return;a.preventDefault();const r=Mn.current;if(!r)return;const f=r.getBoundingClientRect(),m=r.width/f.width,y=r.height/f.height,v=a.nativeEvent.offsetX,g=a.nativeEvent.offsetY,w=typeof v=="number"?v:a.clientX-f.left,C=typeof g=="number"?g:a.clientY-f.top,M=w*m,H=C*y,Z=(M-40-jt.x)/Ve,ge=(H-40-jt.y)/Ve,q=1.2,ie=1/q,K=a.deltaY<0?q:ie,oe=Math.max(.25,Math.min(8,Ve*K)),ee=M-40-oe*Z,ye=H-40-oe*ge;Ii(oe),Pn({x:ee,y:ye})},[R,Ve,jt.x,jt.y]),lc=S.useCallback(a=>{if(R==="draw"&&je==="trace"){Fl.current=!0;let ee=Wt;if(ee.length>1){const ye=[ee[0]];for(let De=1;De<ee.length;De++){const Re=ye[ye.length-1],ve=ee[De];(Math.abs(Re.x-ve.x)>.001||Math.abs(Re.y-ve.y)>.001)&&ye.push(ve)}ee=ye}if(ee.length>=1){const ye=dt||"top",De=ye==="top"?"traceTop":"traceBottom",Re=bt.get(De),ve={id:`${Date.now()}-trace`,points:ee,color:Re.color,size:Re.size,layer:ye,type:"trace"};Pt(He=>[...He,ve]),ye==="top"?ya(He=>[...He,ve.id]):Yl(He=>[...He,ve.id]),Fn([]),Di(null),setTimeout(()=>{Fl.current=!1},300);return}}const r=Mn.current;if(!r)return;const f=r.getBoundingClientRect(),m=r.width/f.width,y=r.height/f.height,v=a.nativeEvent.offsetX,g=a.nativeEvent.offsetY,w=typeof v=="number"?v:a.clientX-f.left,C=typeof g=="number"?g:a.clientY-f.top,M=w*m,H=C*y,Z=M-40,ge=H-40,q=(Z-jt.x)/Ve,ie=(ge-jt.y)/Ve,K=Math.max(8/Ve,4),oe=(()=>{for(const ee of $e)if(ee.type==="testPoint"&&ee.points.length>0){const ye=ee.points[0],De=Math.hypot(ye.x-q,ye.y-ie),Re=(ee.size||18)/2;if(De<=Re+K)return ee}return null})();if(oe){Tt(new Set([oe.id])),Ct(new Set),vt(new Set),wt(new Set),Ca(!0);return}if(R==="select"||R==="component"){const ye=(()=>{for(const ve of xt)if(q>=ve.x-10&&q<=ve.x+10&&ie>=ve.y-10&&ie<=ve.y+10)return{layer:"top",comp:ve};for(const ve of Nt)if(q>=ve.x-10&&q<=ve.x+10&&ie>=ve.y-10&&ie<=ve.y+10)return{layer:"bottom",comp:ve};return null})(),De=Math.max(6/Ve,4);let Re=null;for(const ve of ft){const He=Math.max(6,ve.size/2),Fe=He*.8,L=He+Fe,U=Math.hypot(ve.x-q,ve.y-ie),he=Math.abs(q-ve.x)<=De&&Math.abs(ie-ve.y)<=L,re=Math.abs(ie-ve.y)<=De&&Math.abs(q-ve.x)<=L;if(U<=Math.max(He,De)||he||re){Re=ve;break}}if(Re){vt(new Set([Re.id])),Fa({visible:!0,id:Re.id,layer:Re.layer,x:Re.x,y:Re.y,size:Re.size,color:Re.color,powerBusId:Re.powerBusId});return}if(ye){const{layer:ve,comp:He}=ye;tr(He,ve)}}},[R,je,X,V,Je,xt,Nt,ft,Ve,jt.x,jt.y,it,ui,Ol,$e,At,Li,ed,Cn,Ot,Wt,dt,A,b,Ae,Ce,Ca,Tt,Ct,vt,wt,tr]),ks=S.useCallback(()=>{const a=Ha.current;if(R==="draw"&&je==="trace"&&a.length>=2){let r=[a[0]];for(let g=1;g<a.length;g++){const w=r[r.length-1],C=a[g];(Math.abs(w.x-C.x)>.001||Math.abs(w.y-C.y)>.001)&&r.push(C)}const f=dt||"top",m=f==="top"?"traceTop":"traceBottom",y=bt.get(m),v={id:`${Date.now()}-trace`,points:r,color:y.color,size:y.size,layer:f,type:"trace"};Pt(g=>[...g,v]),f==="top"?ya(g=>[...g,v.id]):Yl(g=>[...g,v.id]),Fn([]),Di(null)}else if(R==="draw"&&je==="trace"&&a.length===1){const r=dt||"top",f=r==="top"?"traceTop":"traceBottom",m=bt.get(f),y={id:`${Date.now()}-trace-dot`,points:a,color:m.color,size:m.size,layer:r,type:"trace"};Pt(v=>[...v,y]),r==="top"?ya(v=>[...v,y.id]):Yl(v=>[...v,y.id]),Fn([])}},[R,je,dt,A,b,Ae,Ce,Pt]),da=S.useCallback((a,r,f)=>{const m=r-a.x,y=f-a.y;if(m===0&&y===0)return{x:r,y:f};const g=(Math.atan2(y,m)*180/Math.PI%180+180)%180,w=[0,45,90];let C=0,M=1e9;for(const H of w){const Z=Math.abs(g-H);Z<M&&(M=Z,C=H)}if(C===0)return{x:r,y:a.y};if(C===90)return{x:a.x,y:f};{const H=Math.min(Math.abs(m),Math.abs(y)),Z=m>=0?1:-1,ge=y>=0?1:-1;return{x:a.x+Z*H,y:a.y+ge*H}}},[]),ac=S.useCallback(a=>{const r=Mn.current?.getBoundingClientRect();if(!r)return;const f=a.clientX-r.left,m=a.clientY-r.top,y=Mn.current,v=y.width/r.width,g=y.height/r.height,w=f*v,C=m*g,M=w-40,H=C-40,Z=(M-jt.x)/Ve,ge=(H-jt.y)/Ve;if(R==="draw"&&je==="trace"&&Wt.length>0){const ie=Ol?{x:Yt({x:Z,y:ge}).x,y:Yt({x:Z,y:ge}).y}:((K,oe)=>{let ee=1/0,ye=null;const Re=10/Ve,ve=Ve>20?Math.max(Re,1e-4):Ve>10?Math.max(Re,.001):Math.max(Re,.01);for(const L of $e)if(L.type==="via"){const U=L.points[0],he=Math.hypot(U.x-K,U.y-oe);he<=ve&&he<ee&&(ee=he,ye=U)}else if(L.type==="pad"){const U=L.points[0],he=Math.hypot(U.x-K,U.y-oe);he<=ve&&he<ee&&(ee=he,ye=U)}for(const L of ft)if(L.pointId!==void 0){const U=Math.hypot(L.x-K,L.y-oe);U<=ve&&U<ee&&(ee=U,ye={x:L.x,y:L.y,id:L.pointId})}for(const L of Ge)if(L.pointId!==void 0){const U=Math.hypot(L.x-K,L.y-oe);U<=ve&&U<ee&&(ee=U,ye={x:L.x,y:L.y,id:L.pointId})}const Fe=Yt(ye??{x:K,y:oe});return{x:Fe.x,y:Fe.y,nodeId:ye?.id}})(Z,ge);Di({x:ie.x,y:ie.y})}else Di(null);if(cr){const ie=(()=>{for(const K of xt)if(Z>=K.x-10&&Z<=K.x+10&&ge>=K.y-10&&ge<=K.y+10)return{layer:"top",comp:K};for(const K of Nt)if(Z>=K.x-10&&Z<=K.x+10&&ge>=K.y-10&&ge<=K.y+10)return{layer:"bottom",comp:K};return null})();if(ie)Qn({component:ie.comp,layer:ie.layer,x:a.clientX,y:a.clientY}),Kn(null);else{Qn(null);const K=Math.max(8/Ve,4),oe=(()=>{for(const ee of $e)if(ee.type==="testPoint"&&ee.points.length>0){const ye=ee.points[0],De=Math.hypot(ye.x-Z,ye.y-ge),Re=(ee.size||18)/2;if(De<=Re+K)return ee}return null})();Kn(oe?{stroke:oe,x:a.clientX,y:a.clientY}:null)}}else Qn(null),Kn(null);if(R==="select"&&Zs&&oo){const q=oo.x,ie=oo.y;ti({x:Math.min(q,Z),y:Math.min(ie,ge),width:Math.abs(Z-q),height:Math.abs(ge-ie)})}else if(R==="pan"&&Li&&ma.current){const{startCX:q,startCY:ie,panX:K,panY:oe}=ma.current,ee=M-q,ye=H-ie;Pn({x:K+ee,y:oe+ye})}else if(yl&&Wt.length>0){if(R==="draw")if(is){const q=Wt[0],ie=da(q,Z,ge),K=Yt(ie),oe={id:Ba(),x:K.x,y:K.y};Fn([q,oe])}else{const q=Yt({x:Z,y:ge});Fn(ie=>[...ie,{id:Ba(),x:q.x,y:q.y}])}else if(R==="erase"&&(Fn(q=>[...q,{id:Ba(),x:Z,y:ge}]),Pt(q=>{const ie=q.filter(oe=>{if(oe.type==="via"&&$n||oe.type==="pad"&&$i||oe.type==="testPoint"&&ba||oe.type==="trace"&&qn||oe.layer!==Je)return!0;const ee=V/2,ye=Z-ee,De=Z+ee,Re=ge-ee,ve=ge+ee,He=(U,he)=>U>=ye&&U<=De&&he>=Re&&he<=ve,Fe=(U,he,re,Ne)=>{const yt=(Sn,wn)=>{let pt=0;return Sn<ye?pt|=1:Sn>De&&(pt|=2),wn<Re?pt|=4:wn>ve&&(pt|=8),pt};let tt=U,Me=he,at=re,en=Ne,tn=yt(tt,Me),Et=yt(at,en);for(;;){if((tn|Et)===0)return!0;if((tn&Et)!==0)return!1;const Sn=tn!==0?tn:Et;let wn=0,pt=0;Sn&8?(wn=tt+(at-tt)*(ve-Me)/(en-Me),pt=ve):Sn&4?(wn=tt+(at-tt)*(Re-Me)/(en-Me),pt=Re):Sn&2?(pt=Me+(en-Me)*(De-tt)/(at-tt),wn=De):(pt=Me+(en-Me)*(ye-tt)/(at-tt),wn=ye),Sn===tn?(tt=wn,Me=pt,tn=yt(tt,Me)):(at=wn,en=pt,Et=yt(at,en))}};let L=!1;if(oe.points.length===1){const U=oe.points[0];L=He(U.x,U.y)}else for(let U=0;U<oe.points.length-1;U++){const he=oe.points[U],re=oe.points[U+1];if(Fe(he.x,he.y,re.x,re.y)){L=!0;break}}return L&&console.log("Erasing stroke at position:",Z,ge,"brushSize:",V,"selectedLayer:",Je),!L});console.log("Strokes before:",q.length,"after:",ie.length);const K=new Set(ie.map(oe=>oe.id));return Xt(oe=>oe.filter(ee=>K.has(ee))),qs(oe=>oe.filter(ee=>K.has(ee))),ya(oe=>oe.filter(ee=>K.has(ee))),Yl(oe=>oe.filter(ee=>K.has(ee))),ie}),vn||ai(q=>{const ie=V/2,K=Z-ie,oe=Z+ie,ee=ge-ie,ye=ge+ie,De=Re=>{const ve=Re.size/2,He=Re.x-ve,Fe=Re.x+ve,L=Re.y-ve,U=Re.y+ve;return!(oe<He||K>Fe||ye<L||ee>U)};return q.filter(Re=>!De(Re))}),Ui||Gn(q=>{const ie=V/2,K=Z-ie,oe=Z+ie,ee=ge-ie,ye=ge+ie,De=ve=>{const He=Math.max(6,(ve.size||18)/2),Fe=He*.8,L=He+Fe,U=ve.x-L,he=ve.x+L,re=ve.y-L,Ne=ve.y+L;return!(oe<U||K>he||ye<re||ee>Ne)};return q.filter(ve=>!De(ve))}),!Mi)){const q=V/2,ie=Z-q,K=Z+q,oe=ge-q,ee=ge+q,ye=De=>{const ve=(De.size||18)/2,He=De.x-ve,Fe=De.x+ve,L=De.y-ve,U=De.y+ve;return!(K<He||ie>Fe||ee<L||oe>U)};rn(De=>De.filter(Re=>!ye(Re))),yn(De=>De.filter(Re=>!ye(Re)))}}else if($l&&ho&&At){if(vi){Ai(!1),Ni(null);return}const q=Z-ho.x,ie=ge-ho.y;if(At==="top"){x&&d(K=>K?{...K,x:K.x+q,y:K.y+ie}:null),Ni({x:Z,y:ge});return}if(At==="bottom"){D&&P(K=>K?{...K,x:K.x+q,y:K.y+ie}:null),Ni({x:Z,y:ge});return}if(At==="both"){x&&d(K=>K?{...K,x:K.x+q,y:K.y+ie}:null),D&&P(K=>K?{...K,x:K.x+q,y:K.y+ie}:null),Ni({x:Z,y:ge});return}}},[yl,Wt,R,V,$l,ho,At,x,D,is,da,Je,Pt,Ve,jt.x,jt.y,Zs,oo,vi,$n,$i,qn,vn,Ui,xt,Nt,rn,yn,cr,Qn,Ol,$e,ft,Ge,Wt,je,bl,Di,Li,ma,Pn,40,jt,Ba,Yt,W,ta]),oc=S.useCallback(()=>{if(R==="select"&&Zs){const a=ca,r=oo;if(Qs(!1),nc(null),ti(null),a&&r){const y=Math.max(3,5/Ve),v=a.width<y&&a.height<y,g=(L,U)=>{const he=a.x,re=a.y,Ne=a.x+a.width,Ee=a.y+a.height;return L>=he&&L<=Ne&&U>=re&&U<=Ee},w=(L,U,he,re,Ne,Ee,Qe,Ye)=>{const at=(Zi,Ft)=>{let ul=0;return Zi<Ne?ul|=1:Zi>Qe&&(ul|=2),Ft<Ee?ul|=4:Ft>Ye&&(ul|=8),ul};let en=L,tn=U,Et=he,Sn=re,wn=at(en,tn),pt=at(Et,Sn);for(;;){if((wn|pt)===0)return!0;if((wn&pt)!==0)return!1;const Zi=wn!==0?wn:pt;let Ft=0,ul=0;Zi&8?(Ft=en+(Et-en)*(Ye-tn)/(Sn-tn),ul=Ye):Zi&4?(Ft=en+(Et-en)*(Ee-tn)/(Sn-tn),ul=Ee):Zi&2?(ul=tn+(Sn-tn)*(Qe-en)/(Et-en),Ft=Qe):(ul=tn+(Sn-tn)*(Ne-en)/(Et-en),Ft=Ne),Zi===wn?(en=Ft,tn=ul,wn=at(en,tn)):(Et=Ft,Sn=ul,pt=at(Et,Sn))}},C=a.x,M=a.y,H=a.x+a.width,Z=a.y+a.height,q=Math.max(6/Ve,4/Ve,.5),ie=(L,U,he,re,Ne,Ee)=>{const Qe=Ne-he,Ye=Ee-re;if(Qe===0&&Ye===0)return Math.hypot(L-he,U-re);const rt=Math.max(0,Math.min(1,((L-he)*Qe+(U-re)*Ye)/(Qe*Qe+Ye*Ye))),et=he+rt*Qe,yt=re+rt*Ye;return Math.hypot(L-et,U-yt)},K=r?.shiftKey===!0,oe=new Set(K?Array.from(ht):[]),ee=new Set(K?Array.from(gt):[]),ye=new Set(K?Array.from(Ht):[]),De=new Set(K?Array.from(mt):[]),Re=r?.hitStrokeId;if(Re){const L=$e.find(U=>U.id===Re);if(L){let U=!1;if(L.type==="via"||L.type==="pad"?U=Jn:U=L.layer==="top"?Bi:Pi,U){K?Tt(he=>{const re=new Set(he);return re.has(Re)?re.delete(Re):re.add(Re),re}):(Tt(new Set([Re])),Ct(new Set),vt(new Set),wt(new Set));return}}}if(v){let L=null;for(const U of $e){let he=!1;if(U.type==="via"?he=Jn:U.type==="pad"?he=(U.layer||"top")==="top"?zn:ci:U.type==="testPoint"?he=(U.layer||"top")==="top"?ol:In:U.type==="trace"?he=U.layer==="top"?Bi:Pi:he=!1,!he)continue;let re=1/0;if(U.type==="via"||U.type==="pad"||U.type==="testPoint"){const Ne=U.points[0],Ee=Math.max(1,U.size/2);re=Math.hypot(Ne.x-r.x,Ne.y-r.y);const Ye=Math.max(6/Ve,4/Ve,.5);re<=Math.max(Ee,Ye)&&(!L||re<L.dist)&&(L={id:U.id,dist:re})}else for(let Ne=0;Ne<U.points.length-1;Ne++){const Ee=U.points[Ne],Qe=U.points[Ne+1],Ye=ie(r.x,r.y,Ee.x,Ee.y,Qe.x,Qe.y);if(Ye<=Math.max(q,U.size/2)){(!L||Ye<L.dist)&&(L={id:U.id,dist:Ye});break}}}L&&(K&&oe.has(L.id)?oe.delete(L.id):oe.add(L.id))}else for(const L of $e){let U=!1;if(L.type==="via"?U=Jn:L.type==="pad"?U=(L.layer||"top")==="top"?zn:ci:L.type==="testPoint"?U=(L.layer||"top")==="top"?ol:In:L.type==="trace"?U=L.layer==="top"?Bi:Pi:U=!1,!U)continue;let he=!1;if(L.type==="via"||L.type==="pad"||L.type==="testPoint"){const re=L.points[0];he=g(re.x,re.y)}else for(let re=0;re<L.points.length-1;re++){const Ne=L.points[re],Ee=L.points[re+1];if(w(Ne.x,Ne.y,Ee.x,Ee.y,C,M,H,Z)||g(Ne.x,Ne.y)&&g(Ee.x,Ee.y)){he=!0;break}}he&&(K&&oe.has(L.id)?oe.delete(L.id):oe.add(L.id))}const ve=L=>{const he=Math.max(10,L.size||18)/2;return L.x-he<=H&&L.x+he>=C&&L.y-he<=Z&&L.y+he>=M};if(v){const L=U=>{const re=Math.max(10,U.size||18)/2;return r.x>=U.x-re&&r.x<=U.x+re&&r.y>=U.y-re&&r.y<=U.y+re};Wn&&xt.forEach(U=>{L(U)&&(K&&ee.has(U.id)?ee.delete(U.id):ee.add(U.id))}),Yn&&Nt.forEach(U=>{L(U)&&(K&&ee.has(U.id)?ee.delete(U.id):ee.add(U.id))})}else Wn&&xt.forEach(L=>{ve(L)&&(K&&ee.has(L.id)?ee.delete(L.id):ee.add(L.id))}),Yn&&Nt.forEach(L=>{ve(L)&&(K&&ee.has(L.id)?ee.delete(L.id):ee.add(L.id))});const He=L=>{const U=Math.max(6,L.size/2),he=U*.8,re=U+he;return L.x-re<=H&&L.x+re>=C&&L.y-re<=Z&&L.y+re>=M};if(la)if(v){let L=null;for(const U of ft){const he=Math.max(6,U.size/2),re=he*.8,Ne=he+re,Ee=Math.hypot(U.x-r.x,U.y-r.y),Qe=Math.abs(r.x-U.x)<=q&&Math.abs(r.y-U.y)<=Ne,Ye=Math.abs(r.y-U.y)<=q&&Math.abs(r.x-U.x)<=Ne;if(Ee<=Math.max(he,q)||Qe||Ye){const et=Math.min(Ee,Math.abs(r.x-U.x)+Math.abs(r.y-U.y));(!L||et<L.dist)&&(L={id:U.id,dist:et})}}L&&(K&&ye.has(L.id)?ye.delete(L.id):ye.add(L.id))}else ft.forEach(L=>{He(L)&&(K&&ye.has(L.id)?ye.delete(L.id):ye.add(L.id))});const Fe=L=>{const U=Math.max(6,(L.size||18)/2),he=U*.8,re=U+he;return L.x-re<=H&&L.x+re>=C&&L.y-re<=Z&&L.y+re>=M};if(cl)if(v){let L=null;for(const U of Ge){const he=Math.max(6,(U.size||18)/2),re=he*.8,Ne=he+re,Ee=Math.hypot(U.x-r.x,U.y-r.y),Qe=Math.abs(r.x-U.x)<=q&&Math.abs(r.y-U.y)<=Ne,Ye=Math.abs(r.y-U.y)<=q&&Math.abs(r.x-U.x)<=Ne;if(Ee<=Math.max(he,q)||Qe||Ye){const et=Math.min(Ee,Math.abs(r.x-U.x)+Math.abs(r.y-U.y));(!L||et<L.dist)&&(L={id:U.id,dist:et})}}L&&(K&&De.has(L.id)?De.delete(L.id):De.add(L.id))}else Ge.forEach(L=>{Fe(L)&&(K&&De.has(L.id)?De.delete(L.id):De.add(L.id))});Tt(oe),Ct(ee),vt(ye),wt(De)}}if(yl&&Wt.length>0){if(R==="draw"&&je!=="trace"){const a={id:Date.now().toString(),points:Wt,color:X,size:V,layer:Je,type:"trace"};Pt(r=>[...r,a]),Je==="top"?ya(r=>[...r,a.id]):Yl(r=>[...r,a.id])}Fn([])}Li&&(ea(!1),ma.current=null,wo.current=null),_a(!1),Ai(!1),Ni(null),Xs(!1)},[yl,Wt,R,X,V,Je,ca,oo,Zs,$e,Ve,kl,ht,ft,Ge,xt,Nt,gt,Ht,mt,Jn,Bi,Pi,Wn,Yn,la,cl]);Oe.useEffect(()=>{if(!(R==="pan"&&Li&&wo.current))return;const a=f=>{const m=Mn.current;if(!m)return;const y=m.getBoundingClientRect(),v=m.width/y.width,g=m.height/y.height,{startClientX:w,startClientY:C,panX:M,panY:H}=wo.current,Z=(f.clientX-w)*v,ge=(f.clientY-C)*g;Pn({x:M+Z,y:H+ge})},r=()=>{ea(!1),ma.current=null,wo.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",r,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)}},[R,Li]);const Wo=S.useCallback(()=>{const a=Mn.current;if(!a)return;const r=a.getContext("2d");if(!r)return;r.clearRect(0,0,a.width,a.height),r.save(),r.beginPath(),r.rect(40,40,a.width-80,a.height-80),r.clip(),r.translate(40,40);const f=(y,v,g,w,C,M,H,Z)=>{const ge=document.createElement("canvas");ge.width=g,ge.height=w;const q=ge.getContext("2d",{willReadFrequently:!0});q.clearRect(0,0,g,w),q.drawImage(v,0,0,g,w);let ie=ge;if(Math.abs(C)>1e-6){const K=Math.tan(C),oe=Math.max(.2,1-K),ee=Math.max(.2,1+K),ye=Math.max(oe,ee),De=Math.max(1,Math.ceil(g*ye)),Re=document.createElement("canvas");Re.width=De,Re.height=w;const ve=Re.getContext("2d",{willReadFrequently:!0});ve.clearRect(0,0,De,w);for(let He=0;He<w;He++){const Fe=w<=1?0:He/(w-1),L=oe*(1-Fe)+ee*Fe,U=Math.max(1,g*L),he=(De-U)/2;ve.drawImage(ie,0,He,g,1,he,He,U,1)}ie=Re}if(Math.abs(M)>1e-6){const K=Math.tan(M),oe=Math.max(.2,1-K),ee=Math.max(.2,1+K),ye=Math.max(oe,ee),De=Math.max(1,Math.ceil(w*ye)),Re=document.createElement("canvas");Re.width=ie.width,Re.height=De;const ve=Re.getContext("2d",{willReadFrequently:!0});ve.clearRect(0,0,Re.width,De);for(let He=0;He<ie.width;He++){const Fe=ie.width<=1?0:He/(ie.width-1),L=oe*(1-Fe)+ee*Fe,U=Math.max(1,w*L),he=(De-U)/2;ve.drawImage(ie,He,0,1,ie.height,He,he,1,U)}ie=Re}y.drawImage(ie,-H/2,-Z/2,H,Z)};r.translate(jt.x,jt.y),r.scale(Ve,Ve);{const y=ri&&ll;if(x&&x.bitmap&&ri){const v=x.bitmap;r.save(),r.globalAlpha=1;const g=[];if(x.brightness!==void 0&&x.brightness!==100&&g.push(`brightness(${x.brightness}%)`),x.contrast!==void 0&&x.contrast!==100&&g.push(`contrast(${x.contrast}%)`),ne&&g.push("grayscale(100%)"),r.filter=g.length>0?g.join(" "):"none",r.translate(x.x,x.y),r.rotate(x.rotation*Math.PI/180),x.skewX||x.skewY){const H=Math.tan(x.skewX||0),Z=Math.tan(x.skewY||0);r.transform(1,Z,H,1,0,0)}r.scale(x.scale*(x.flipX?-1:1),x.scale*(x.flipY?-1:1));const w=v.width*1,C=v.height*1,M=v;x.keystoneV&&Math.abs(x.keystoneV)>1e-6||x.keystoneH&&Math.abs(x.keystoneH)>1e-6?f(r,M,v.width,v.height,x.keystoneV||0,x.keystoneH||0,w,C):r.drawImage(M,-w/2,-C/2,w,C),r.restore()}if(D&&D.bitmap&&ll){const v=D.bitmap;r.save(),r.globalAlpha=y?p/100:1;const g=[];if(D.brightness!==void 0&&D.brightness!==100&&g.push(`brightness(${D.brightness}%)`),D.contrast!==void 0&&D.contrast!==100&&g.push(`contrast(${D.contrast}%)`),ne&&g.push("grayscale(100%)"),r.filter=g.length>0?g.join(" "):"none",r.translate(D.x,D.y),r.rotate(D.rotation*Math.PI/180),D.skewX||D.skewY){const H=Math.tan(D.skewX||0),Z=Math.tan(D.skewY||0);r.transform(1,Z,H,1,0,0)}r.scale(D.scale*(D.flipX?-1:1),D.scale*(D.flipY?-1:1));const w=v.width*1,C=v.height*1,M=v;D.keystoneV&&Math.abs(D.keystoneV)>1e-6||D.keystoneH&&Math.abs(D.keystoneH)>1e-6?f(r,M,v.width,v.height,D.keystoneV||0,D.keystoneH||0,w,C):r.drawImage(M,-w/2,-C/2,w,C),r.restore()}}if($d(r),la&&ft.length>0){const y=v=>{r.save();const g=st.find(Z=>Z.id===v.powerBusId),w=Ht.has(v.id),C="#ff0000";r.strokeStyle=C,r.lineWidth=Math.max(1,(w?3:2)/Math.max(Ve,.001)),r.lineCap="round";const M=Math.max(6,v.size/2),H=M*.8;w&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ve,.001)),r.beginPath(),r.arc(v.x,v.y,M+H+3,0,Math.PI*2),r.stroke()),r.strokeStyle=C,r.lineWidth=Math.max(1,(w?3:2)/Math.max(Ve,.001)),r.beginPath(),r.arc(v.x,v.y,M,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(v.x,v.y-M-H),r.lineTo(v.x,v.y+M+H),r.stroke(),r.beginPath(),r.moveTo(v.x-M-H,v.y),r.lineTo(v.x+M+H,v.y),r.stroke(),g&&(r.fillStyle=C,r.font=`${Math.max(10,M*.8)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(g.voltage,v.x,v.y+M+H+12)),r.restore()};ft.forEach(y)}if(cl&&Ge.length>0){const y=v=>{r.save();const g=mt.has(v.id),w=v.color||"#000000";if(v.groundBusId==="groundbus-earth"){const M=Math.max(6,v.size||18),H=M*.9,Z=M*.24,ge=M*1.6;r.strokeStyle=w,r.lineWidth=Math.max(1,(g?3:2)/Math.max(Ve,.001)),r.lineCap="round",g&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ve,.001)),r.setLineDash([5,5]),r.strokeRect(v.x-ge/2-3,v.y-3,ge+6,H+Z*2+6),r.setLineDash([])),r.strokeStyle=w,r.lineWidth=Math.max(1,(g?3:2)/Math.max(Ve,.001)),r.beginPath(),r.moveTo(v.x,v.y),r.lineTo(v.x,v.y+H),r.stroke();for(let q=0;q<3;q++){const ie=v.y+H+q*Z,K=ge*(1-q*.25);r.beginPath(),r.moveTo(v.x-K/2,ie),r.lineTo(v.x+K/2,ie),r.stroke()}}else{const M=Math.max(6,(v.size||18)/2),H=M*.8;g&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ve,.001)),r.beginPath(),r.arc(v.x,v.y,M+H+3,0,Math.PI*2),r.stroke()),r.strokeStyle=w,r.lineWidth=Math.max(1,(g?3:2)/Math.max(Ve,.001)),r.beginPath(),r.arc(v.x,v.y,M,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(v.x,v.y-M-H),r.lineTo(v.x,v.y+M+H),r.stroke(),r.beginPath(),r.moveTo(v.x-M-H,v.y),r.lineTo(v.x+M+H,v.y),r.stroke()}r.restore()};Ge.forEach(y)}const m=y=>{const v=Math.max(10,y.size||18),g=v/2;r.save(),r.strokeStyle=y.color||"#111",r.lineWidth=Math.max(1,2/Math.max(Ve,.001));const w=y.pinConnections||[],C=w.length>0&&w.length===y.pinCount&&w.every(Z=>Z&&Z.trim()!=="");r.fillStyle=C?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",r.beginPath(),r.rect(y.x-g,y.y-g,v,v),r.fill(),r.stroke();const M=y.designator?.trim()||"";if(M){r.fillStyle=y.color||"#111";const Z=Math.max(6,v*.35),ge=v*.9;let q=Z;r.font=`bold ${q}px sans-serif`;const ie=r.measureText(M);ie.width>ge&&(q=ge/ie.width*q,q=Math.max(6,q),r.font=`bold ${q}px sans-serif`),r.textAlign="center",r.textBaseline="middle",r.fillText(M,y.x,y.y)}gt.has(y.id)&&(r.setLineDash([4,3]),r.strokeStyle="#00bfff",r.lineWidth=1.5,r.strokeRect(y.x-g-3,y.y-g-3,v+6,v+6),r.setLineDash([])),r.restore()};if(ms){const y=g=>{const w=parseInt(g,10);if(isNaN(w))return null;for(const C of $e)if((C.type==="via"||C.type==="pad"||C.type==="testPoint")&&C.points.length>0){const M=C.points[0];if(M.id===w)return{x:M.x,y:M.y}}for(const C of $e)if(C.type==="trace"){for(const M of C.points)if(M.id===w)return{x:M.x,y:M.y}}for(const C of ft)if(C.pointId===w)return{x:C.x,y:C.y};for(const C of Ge)if(C.pointId===w)return{x:C.x,y:C.y};return null},v=g=>{const w=g.pinConnections||[],C=g.componentType==="Electrolytic Capacitor"||g.componentType==="Diode"||g.componentType==="Battery"||g.componentType==="ZenerDiode",M=g.componentType==="Capacitor"&&"dielectric"in g&&g.dielectric==="Tantalum",H=(C||M)&&g.pinPolarities,Z=new Map;for(let ge=0;ge<w.length;ge++){const q=w[ge];if(q&&q.trim()!==""){const ie=q.trim(),K=!!(H&&g.pinPolarities&&ge<g.pinPolarities.length&&g.pinPolarities[ge]==="-"),oe=Z.get(ie);oe!==void 0?Z.set(ie,oe||K):Z.set(ie,K)}}for(const[ge,q]of Z){const ie=y(ge);if(ie){const K={x:g.x,y:g.y};r.save(),r.strokeStyle=q?"rgba(0, 0, 0, 0.8)":Pa,r.lineWidth=Math.max(1,Oa/Math.max(Ve,.001)),r.beginPath(),r.moveTo(K.x,K.y),r.lineTo(ie.x,ie.y),r.stroke(),r.restore()}}};Wn&&xt.forEach(v),Yn&&Nt.forEach(v)}if(Wn&&xt.forEach(m),Yn&&Nt.forEach(m),R==="select"&&ca){r.save();const y=Math.max(2,6/Math.max(1e-4,Ve));r.strokeStyle="#00bfff",r.fillStyle="rgba(0, 191, 255, 0.15)",r.lineWidth=Math.max(1,1.5/Math.max(1e-4,Ve)),r.setLineDash([y,y]),r.beginPath(),r.rect(ca.x,ca.y,ca.width,ca.height),r.fill(),r.stroke(),r.setLineDash([]),r.restore()}r.restore()},[x,D,p,$e,Wt,yl,R,X,V,ne,At,Je,Ve,jt.x,jt.y,ri,ll,Jn,Bi,Pi,zn,ci,ol,In,Wn,Yn,xt,Nt,la,ft,cl,Ge,ms,ca,ht,gt,Ht,mt,dt,A,b,Ae,Ce,je,bl,vi,Pa,Oa,br]);Oe.useEffect(()=>{const a=()=>{const r=qa.current;if(!r)return;const f=1.6,m=244,y=12,v=12,g=r.clientWidth-m-y,w=r.clientHeight-v,C=Math.floor(w*f),M=Math.floor(g/f);let H,Z;C<=g?(H=C,Z=w):(H=g,Z=M),H=Math.max(600,H),Z=Math.max(375,Z),$c(ge=>{if(ge.width!==H||ge.height!==Z){const q=ge.width-80,ie=ge.height-80,K=H-80,oe=Z-80,ee=q>0?K/q:1,ye=ie>0?oe/ie:1;Pn(De=>({x:De.x*ee,y:De.y*ye}))}return ge.width===H&&ge.height===Z?ge:{width:H,height:Z}})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[Pn]),Oe.useEffect(()=>{vi&&($l&&(Ai(!1),Ni(null)),xi(null))},[vi,$l,Ai,Ni,xi]);const $d=S.useCallback(a=>{if($e.forEach(r=>{if(r.type==="via"||r.type==="pad"||r.type==="testPoint"||r.testPointType!==void 0||r.type!=="trace")return;let f=!1;if(r.layer==="top"?f=Bi:r.layer==="bottom"&&(f=Pi),!!f){if(r.points.length===1){const m=r.points[0],y=Math.max(.5,r.size/2);ht.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(m.x,m.y,y+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=r.color,a.beginPath(),a.arc(m.x,m.y,y,0,Math.PI*2),a.fill()}else if(ht.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=r.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),r.points.forEach((m,y)=>{y===0?a.moveTo(m.x,m.y):a.lineTo(m.x,m.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=r.color,a.lineWidth=r.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),r.points.forEach((m,y)=>{y===0?a.moveTo(m.x,m.y):a.lineTo(m.x,m.y)}),a.stroke(),br)for(const m of r.points)a.beginPath(),a.arc(m.x,m.y,r.size/2,0,Math.PI*2),a.fill()}}),$e.forEach(r=>{if(r.type==="via"){if(!Jn)return}else if(r.type==="pad"){const m=r.layer||"top";if(m==="top"&&!zn||m==="bottom"&&!ci)return}else if(r.type==="testPoint"){const m=r.layer||"top";if(m==="top"&&!ol||m==="bottom"&&!In)return}else return;const f=r.points[0];if(ht.has(r.id)){if(r.type==="via"){const m=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(f.x,f.y,m,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(r.type==="pad"){const m=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(f.x-m,f.y-m,r.size+6,r.size+6),a.setLineDash([])}else if(r.type==="testPoint"){const m=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.moveTo(f.x,f.y-m),a.lineTo(f.x+m,f.y),a.lineTo(f.x,f.y+m),a.lineTo(f.x-m,f.y),a.closePath(),a.stroke(),a.setLineDash([])}}if(r.type==="via"){const m=Math.max(.5,r.size/2),y=m*.5,v=m*.7;a.fillStyle=r.color,a.beginPath(),a.arc(f.x,f.y,m,0,Math.PI*2),a.arc(f.x,f.y,y,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(f.x-v,f.y),a.lineTo(f.x+v,f.y),a.stroke(),a.beginPath(),a.moveTo(f.x,f.y-v),a.lineTo(f.x,f.y+v),a.stroke()}else if(r.type==="pad"){const m=Math.max(.5,r.size/2),y=r.size,v=y*.5,g=m*.7;a.fillStyle=r.color,a.beginPath(),a.rect(f.x-m,f.y-m,y,y),a.rect(f.x-v/2,f.y-v/2,v,v),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(f.x-g,f.y),a.lineTo(f.x+g,f.y),a.stroke(),a.beginPath(),a.moveTo(f.x,f.y-g),a.lineTo(f.x,f.y+g),a.stroke()}else if(r.type==="testPoint"){const m=Math.max(.5,r.size/2),y=m*.7;a.fillStyle=r.color||"#FFFF00",a.strokeStyle="#000000",a.lineWidth=2,a.beginPath(),a.moveTo(f.x,f.y-m),a.lineTo(f.x+m,f.y),a.lineTo(f.x,f.y+m),a.lineTo(f.x-m,f.y),a.closePath(),a.fill(),a.stroke(),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(f.x-y,f.y),a.lineTo(f.x+y,f.y),a.stroke(),a.beginPath(),a.moveTo(f.x,f.y-y),a.lineTo(f.x,f.y+y),a.stroke()}}),Wt.length>0){const r=Je;let f=!0;if(R==="draw"&&(je==="via"?f=Jn:f=r==="top"?Bi:Pi),f)if(R==="draw")if(je==="via"){const m=Wt[Wt.length-1],y=Math.max(.5,V/2),v=y*.5,g=y*.7;a.fillStyle=X,a.beginPath(),a.arc(m.x,m.y,y,0,Math.PI*2),a.arc(m.x,m.y,v,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(m.x-g,m.y),a.lineTo(m.x+g,m.y),a.stroke(),a.beginPath(),a.moveTo(m.x,m.y-g),a.lineTo(m.x,m.y+g),a.stroke()}else if(je==="pad"){const m=Wt[Wt.length-1],y=Math.max(.5,V/2),v=V,g=v*.5,w=y*.7;a.fillStyle=X,a.beginPath(),a.rect(m.x-y,m.y-y,v,v),a.rect(m.x-g/2,m.y-g/2,g,g),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(m.x-w,m.y),a.lineTo(m.x+w,m.y),a.stroke(),a.beginPath(),a.moveTo(m.x,m.y-w),a.lineTo(m.x,m.y+w),a.stroke()}else if(je==="testPoint"){const m=Wt[Wt.length-1],y=Math.max(.5,V/2),v=y*.7;a.fillStyle=X,a.beginPath(),a.moveTo(m.x,m.y-y),a.lineTo(m.x+y,m.y),a.lineTo(m.x,m.y+y),a.lineTo(m.x-y,m.y),a.closePath(),a.fill(),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(m.x-v,m.y),a.lineTo(m.x+v,m.y),a.stroke(),a.beginPath(),a.moveTo(m.x,m.y-v),a.lineTo(m.x,m.y+v),a.stroke()}else{const m=dt||"top",y=m==="top"?A:b,v=m==="top"?Ae:Ce;if(Wt.length===1){const g=Wt[0],w=Math.max(.5,v/2);a.fillStyle=y,a.beginPath(),a.arc(g.x,g.y,w,0,Math.PI*2),a.fill(),bl&&(a.strokeStyle=y,a.lineWidth=v,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(g.x,g.y),a.lineTo(bl.x,bl.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=y,a.lineWidth=v,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),Wt.forEach((g,w)=>{w===0?a.moveTo(g.x,g.y):a.lineTo(g.x,g.y)}),a.stroke(),bl&&Wt.length>0){const g=Wt[Wt.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(g.x,g.y),a.lineTo(bl.x,bl.y),a.stroke(),a.globalAlpha=1}}else R==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=V,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),Wt.forEach((m,y)=>{y===0?a.moveTo(m.x,m.y):a.lineTo(m.x,m.y)}),a.stroke())}},[$e,ht,Bi,Pi,Jn,zn,ci,ol,In,Wt,R,je,X,V,Je,dt,A,b,Ae,Ce,bl,br]),sc=S.useCallback((a,r)=>{if(vi){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&x?d(f=>f?{...f,...r}:null):a==="bottom"&&D?P(f=>f?{...f,...r}:null):a==="both"&&(x&&d(f=>f?{...f,...r}:null),D&&P(f=>f?{...f,...r}:null))},[x,D,vi]),nd=S.useCallback(()=>{At&&(sc(At,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,brightness:100,contrast:100}),Se(!1))},[sc,At]),rc=S.useCallback(()=>{if(ht.size>0||gt.size>0||Ht.size>0||mt.size>0){if(ht.size>0){const a=$e.filter(y=>ht.has(y.id)),r=$n&&a.some(y=>y.type==="via"),f=qn&&a.some(y=>y.type==="trace"),m=$i&&a.some(y=>y.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(f){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(m){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(gt.size>0&&Mi){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(Ht.size>0&&vn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(mt.size>0&&Ui){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Pt(a=>a.map(r=>{if(ht.has(r.id)){const f=r.size+1;return r.type==="via"?qe("via",f):r.type==="pad"?qe("pad",f):r.type==="trace"&&qe("trace",f,r.layer),{...r,size:f}}return r})),gt.size>0){const a=(gt.size>0&&xt.find(r=>gt.has(r.id))?.size||18)+1;qe("component",a),rn(r=>r.map(f=>gt.has(f.id)?{...f,size:(f.size||18)+1}:f)),yn(r=>r.map(f=>gt.has(f.id)?{...f,size:(f.size||18)+1}:f))}if(Ht.size>0){const a=(ft.find(r=>Ht.has(r.id))?.size||18)+1;qe("power",a),ai(r=>r.map(f=>Ht.has(f.id)?{...f,size:f.size+1}:f))}if(mt.size>0){const a=(Ge.find(r=>mt.has(r.id))?.size||18)+1;qe("ground",a),Gn(r=>r.map(f=>mt.has(f.id)?{...f,size:(f.size||18)+1}:f))}}else{let a=null;if(R==="draw"&&je==="via"?a="via":R==="draw"&&je==="pad"?a=Ki.current==="bottom"?"padBottom":"padTop":R==="draw"&&je==="testPoint"?a=Ji.current==="bottom"?"testPointBottom":"testPointTop":R==="draw"&&je==="trace"?a=xa.current==="bottom"?"traceBottom":"traceTop":R==="component"?a=Sl.current==="bottom"?"componentBottom":"componentTop":R==="power"?a="power":R==="ground"&&(a="ground"),a){const r=bt.get(a),f=Math.min(40,r.size+1);bt.setSize(a,f)}}},[ht,gt,Ht,mt,$e,$n,qn,$i,ba,Mi,vn,Ui,R,je,qe]),cc=S.useCallback(()=>{if(ht.size>0||gt.size>0||Ht.size>0||mt.size>0){if(ht.size>0){const a=$e.filter(v=>ht.has(v.id)),r=$n&&a.some(v=>v.type==="via"),f=qn&&a.some(v=>v.type==="trace"),m=$i&&a.some(v=>v.type==="pad"),y=ba&&a.some(v=>v.type==="testPoint");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(f){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(m){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}if(y){alert("Cannot change size: Test Points are locked. Unlock test points to change their size.");return}}if(gt.size>0&&Mi){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(Ht.size>0&&vn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(mt.size>0&&Ui){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Pt(a=>a.map(r=>{if(ht.has(r.id)){const f=Math.max(1,r.size-1);return r.type==="via"?qe("via",f):r.type==="pad"?qe("pad",f,r.layer):r.type==="testPoint"?qe("testPoint",f,r.layer):r.type==="trace"&&qe("trace",f,r.layer),{...r,size:f}}return r})),gt.size>0){const a=Math.max(1,(xt.find(r=>gt.has(r.id))?.size||18)-1);qe("component",a),rn(r=>r.map(f=>gt.has(f.id)?{...f,size:Math.max(1,(f.size||18)-1)}:f)),yn(r=>r.map(f=>gt.has(f.id)?{...f,size:Math.max(1,(f.size||18)-1)}:f))}if(Ht.size>0){const a=Math.max(1,(ft.find(r=>Ht.has(r.id))?.size||18)-1);qe("power",a),ai(r=>r.map(f=>Ht.has(f.id)?{...f,size:Math.max(1,f.size-1)}:f))}if(mt.size>0){const a=Math.max(1,(Ge.find(r=>mt.has(r.id))?.size||18)-1);qe("ground",a),Gn(r=>r.map(f=>mt.has(f.id)?{...f,size:Math.max(1,(f.size||18)-1)}:f))}}else{let a=null;if(R==="draw"&&je==="via"?a="via":R==="draw"&&je==="pad"?a=(Je||$t||"top")==="bottom"?"padBottom":"padTop":R==="draw"&&je==="testPoint"?a=(Je||an||"top")==="bottom"?"testPointBottom":"testPointTop":R==="draw"&&je==="trace"?a=(Je||dt||"top")==="bottom"?"traceBottom":"traceTop":R==="component"?a=(Je||xn||"top")==="bottom"?"componentBottom":"componentTop":R==="power"?a="power":R==="ground"&&(a="ground"),a){const r=bt.get(a),f=Math.max(1,r.size-1);bt.setSize(a,f)}}},[ht,gt,Ht,mt,$e,$n,qn,$i,ba,Mi,vn,Ui,R,je,Je,$t,an,dt,xn,qe]),Ld=S.useCallback(()=>{const a=Wr.size;if(ht.size>0||gt.size>0||Ht.size>0||mt.size>0){if(ht.size>0){const r=$e.filter(g=>ht.has(g.id)),f=$n&&r.some(g=>g.type==="via"),m=$i&&r.some(g=>g.type==="pad"),y=qn&&r.some(g=>g.type==="trace"),v=ba&&r.some(g=>g.type==="testPoint");if(f||m||y||v){alert("Cannot change size: selected items are locked.");return}}if(gt.size>0&&Mi){alert("Cannot change size: selected components are locked.");return}if(Ht.size>0&&vn){alert("Cannot change size: selected power nodes are locked.");return}if(mt.size>0&&Ui){alert("Cannot change size: selected ground nodes are locked.");return}Pt(r=>r.map(f=>ht.has(f.id)?(f.type==="via"?(qe("via",a),on(m=>{const y=new Map(m),v=y.get("via");return v&&y.set("via",{...v,settings:{...v.settings,size:a}}),y})):f.type==="pad"?(qe("pad",a,f.layer),on(m=>{const y=new Map(m),v=y.get("pad");if(v){const g=new Map(v.layerSettings);g.set(f.layer,{...g.get(f.layer)||{color:v.settings.color,size:a},size:a}),y.set("pad",{...v,layerSettings:g})}return y})):f.type==="testPoint"?(qe("testPoint",a,f.layer),on(m=>{const y=new Map(m),v=y.get("testPoint");if(v){const g=new Map(v.layerSettings);g.set(f.layer,{...g.get(f.layer)||{color:v.settings.color,size:a},size:a}),y.set("testPoint",{...v,layerSettings:g})}return y})):f.type==="trace"&&qe("trace",a,f.layer),{...f,size:a}):f)),gt.size>0&&(qe("component",a),rn(r=>r.map(f=>gt.has(f.id)?{...f,size:a}:f)),yn(r=>r.map(f=>gt.has(f.id)?{...f,size:a}:f))),Ht.size>0&&(qe("power",a),ai(r=>r.map(f=>Ht.has(f.id)?{...f,size:a}:f))),mt.size>0&&(qe("ground",a),Gn(r=>r.map(f=>mt.has(f.id)?{...f,size:a}:f)))}else k(a),R==="draw"&&je==="trace"?Je==="top"?(Pe(a),qe("trace",a,"top")):(ke(a),qe("trace",a,"bottom")):R==="draw"&&je==="via"?qe("via",a):R==="draw"&&je==="pad"?qe("pad",a,Je):R==="draw"&&je==="testPoint"?qe("testPoint",a,Je):qe(R==="component"?"component":R==="power"?"power":R==="ground"?"ground":"brush",a);Fr({visible:!1,size:6})},[Wr.size,ht,gt,Ht,mt,$e,$n,qn,Mi,vn,Ui,R,je,Je,qe,Ot,on]),id=S.useCallback(()=>{jl({visible:!1,source:null,interval:5})},[]),ld=S.useCallback(async(a,r=!1)=>{if(a===null){nl(!1),Tl(null),Jt.current&&(clearInterval(Jt.current),Jt.current=null),La({visible:!1,interval:5}),r&&jl({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!si){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let f=Ln;if(!f){const g=window;if(typeof g.showDirectoryPicker=="function")try{f=await g.showDirectoryPicker(),Jl(f)}catch(w){w?.name!=="AbortError"&&(console.error("Failed to get directory:",w),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}Ql(f);const m=si.replace(/\.json$/i,""),v=Ac(m).replace(/[^a-zA-Z0-9_-]/g,"_");il(v),Na.current=f,Hl.current=v,Tl(a),nl(!0),zl.current=!0,La({visible:!1,interval:5}),r&&jl({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),Ga.current&&Ga.current()},200)},[si,Ln,nl,Tl,Ql,il,La,jl,Jl]),kr=S.useCallback(()=>{W("select"),Tt(new Set),Ct(new Set),vt(new Set),wt(new Set)},[Tt,Ct,vt,wt]),dc=S.useCallback(a=>{if(a.key==="Escape"){const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type==="checkbox"||y.tagName==="INPUT"&&y.type==="radio")){y.blur(),a.preventDefault(),a.stopPropagation();return}}const r=document.activeElement;if(r&&(r.tagName==="INPUT"&&r.type!=="checkbox"&&r.type!=="radio"||r.tagName==="TEXTAREA"||r.isContentEditable)||so.current>0&&a.key!=="z"&&a.key!=="Z")return;const m=parseInt(a.key);if(!isNaN(m)&&m>=0&&m<=9){if(a.preventDefault(),a.stopPropagation(),R==="center"&&Hd){Si.current&&(clearTimeout(Si.current),Si.current=null);const v=Mn.current;if(v){const g=v.width-80,w=v.height-80,C=g/2,M=w/2,H=(C-jt.x)/Ve,Z=(M-jt.y)/Ve;bs(ge=>({...ge,[m]:{x:H,y:Z,zoom:Ve}}))}ta(!1),W("select"),_t(void 0);return}const y=ys[m];if(y){Ii(y.zoom);const v=Mn.current;let g=0,w=0;if(v){const C=v.width-80,M=v.height-80,H=C/2,Z=M/2;g=H-y.x*y.zoom,w=Z-y.y*y.zoom}Pn({x:g,y:w})}return}if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),rc();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),cc();return}if((a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="ArrowLeft"||a.key==="ArrowRight")&&gt.size>0){a.preventDefault(),a.stopPropagation();const y=a.shiftKey?10:1;let v=0,g=0;a.key==="ArrowUp"?g=-y:a.key==="ArrowDown"?g=y:a.key==="ArrowLeft"?v=-y:a.key==="ArrowRight"&&(v=y);for(const w of gt){const C=xt.find(M=>M.id===w);if(C){const M=C.x+v,H=C.y+g,Z=Yt({x:M,y:H});rn(ge=>ge.map(q=>q.id===w?{...q,x:Z.x,y:Z.y}:q))}else{const M=Nt.find(H=>H.id===w);if(M){const H=M.x+v,Z=M.y+g,ge=Yt({x:H,y:Z});yn(q=>q.map(ie=>ie.id===w?{...ie,x:ge.x,y:ge.y}:ie))}}}return}if((a.key==="I"||a.key==="i")&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;a.preventDefault(),a.stopPropagation();const g=[];ht.size>0,ht.size===0&&gt.size===0&&Ht.size===0&&mt.size===0&&g.push(`
No objects selected.`);const w=g.join(`
`);console.log(w),bo({visible:!0,text:w});return}if((a.key==="N"||a.key==="n")&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Ca(!0);return}if((a.key==="L"||a.key==="l")&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Yd();return}if(a.key==="O"||a.key==="o"){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;a.preventDefault(),a.stopPropagation();const g=ys[0];if(g){Ii(g.zoom);const w=Mn.current;let C=0,M=0;if(w){const H=w.width-80,Z=w.height-80,ge=H/2,q=Z/2;C=ge-g.x*g.zoom,M=q-g.y*g.zoom}Pn({x:C,y:M})}else{Ii(1);const w=Mn.current;let C=0,M=0;if(w){const H=w.width-80,Z=w.height-80,ge=H/2,q=Z/2;C=ge,M=q}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Pn({x:C,y:M})}J("overlay"),Tt(new Set),Ct(new Set),vt(new Set),wt(new Set),W("select");return}if((a.key==="Alt"||a.altKey)&&(Fd(!0),Fc(!0)),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),kr(),ra(!1),io(!1),ei(!1),Hi(!1),ln(!1),Yi(!1),hs(!1),td(null);return}if(a.key==="Enter"&&R==="draw"&&je==="trace"){ks();return}if((a.key==="Delete"||a.key==="Backspace")&&(ht.size>0||gt.size>0||Ht.size>0||mt.size>0)){if(a.preventDefault(),a.stopPropagation(),ht.size>0){const y=$e.filter(M=>ht.has(M.id)),v=$n&&y.some(M=>M.type==="via"),g=qn&&y.some(M=>M.type==="trace"),w=$i&&y.some(M=>M.type==="pad"),C=ba&&y.some(M=>M.type==="testPoint");v?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):g?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):w?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):C?alert("Cannot delete: Test points are locked. Unlock test points to delete them."):(Pt(M=>M.filter(H=>!ht.has(H.id))),Tt(new Set))}gt.size>0&&(Mi?alert("Cannot delete: Components are locked. Unlock components to delete them."):(rn(y=>y.filter(v=>!gt.has(v.id))),yn(y=>y.filter(v=>!gt.has(v.id))),Ct(new Set))),Ht.size>0&&(vn?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(ai(y=>y.filter(v=>!Ht.has(v.id))),vt(new Set))),mt.size>0&&(Ui?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(Gn(y=>y.filter(v=>!mt.has(v.id))),wt(new Set)));return}if((R==="draw"||R==="erase"||R==="power"||R==="ground")&&(a.key==="z"||a.key==="Z")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),R==="power"){ai(y=>y.length===0?y:y.slice(0,-1));return}if(R==="ground"){Gn(y=>y.length===0?y:y.slice(0,-1));return}if(R==="draw"&&je==="trace"){const y=Wt,v=Ha.current,g=y.length>0?y:v;if(g.length>0){g.length>1?Fn(w=>w.slice(0,-1)):Fn([]);return}Pt(w=>{for(let C=w.length-1;C>=0;C--){const M=w[C];if(M.type==="trace"&&M.layer===Je&&M.points.length>=2)if(M.points.length>2){const H=M.points.slice(0,-1);return Fn(H),[...w.slice(0,C),...w.slice(C+1)]}else return[...w.slice(0,C),...w.slice(C+1)]}return w});return}if(yl&&Wt.length>0){Fn([]);return}R==="draw"&&(je==="via"||je==="pad"||je==="testPoint")&&Pt(y=>{for(let v=y.length-1;v>=0;v--){const g=y[v];if(g.layer===Je&&g.type===je)return[...y.slice(0,v),...y.slice(v+1)]}return y});return}if(!a.ctrlKey&&!a.altKey){const y=document.activeElement;if(!(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),kr();return;case"b":case"B":a.preventDefault(),W("power");return;case"g":case"G":a.preventDefault(),W("ground");return;case"v":case"V":a.preventDefault(),Bn("via"),W("draw");return;case"p":case"P":a.preventDefault(),Bn("pad"),W("draw"),jn($t||"top");return;case"y":case"Y":a.preventDefault(),Bn("testPoint"),W("draw"),jn(an||"top");return;case"t":case"T":a.preventDefault(),Bn("trace"),W("draw"),jn(dt||"top");return;case"c":case"C":a.preventDefault(),W("component"),Hi(!0),ln(!1),Gt(null);return;case"e":case"E":a.preventDefault(),W("erase");return;case"h":case"H":a.preventDefault(),W("pan");return;case"x":case"X":a.preventDefault(),W("center"),ta(!0),Si.current&&clearTimeout(Si.current),Si.current=setTimeout(()=>{ta(!1),W("select"),_t(void 0)},2e3);return;case"z":case"Z":if(!a.ctrlKey){a.preventDefault(),rr(!1),W("magnify");return}break}}if(R==="transform"&&At){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const v=document.activeElement;if(v&&v.tagName==="INPUT"){const g=v;g.type==="radio"&&g.blur()}if(vi)return;if(vl==="nudge"){let g=0,w=0;switch(a.key){case"ArrowLeft":g=-1;break;case"ArrowRight":g=1;break;case"ArrowUp":w=-1;break;case"ArrowDown":w=1;break;default:return}At==="top"&&x?d(C=>C?{...C,x:C.x+g,y:C.y+w}:null):At==="bottom"&&D?P(C=>C?{...C,x:C.x+g,y:C.y+w}:null):At==="both"&&(x&&d(C=>C?{...C,x:C.x+g,y:C.y+w}:null),D&&P(C=>C?{...C,x:C.x+g,y:C.y+w}:null))}else if(vl==="scale"){let g=0;switch(a.key){case"ArrowUp":g=.01;break;case"ArrowDown":g=-.01;break;case"ArrowRight":g=.001;break;case"ArrowLeft":g=-.001;break;default:return}if(At==="top"){x&&d(w=>w?{...w,scale:Math.max(.1,Math.min(3,w.scale+g))}:null);return}if(At==="bottom"){D&&P(w=>w?{...w,scale:Math.max(.1,Math.min(3,w.scale+g))}:null);return}if(At==="both"){x&&d(w=>w?{...w,scale:Math.max(.1,Math.min(3,w.scale+g))}:null),D&&P(w=>w?{...w,scale:Math.max(.1,Math.min(3,w.scale+g))}:null);return}}else if(vl==="rotate"){let g=0;switch(a.key){case"ArrowUp":g=1;break;case"ArrowDown":g=-1;break;case"ArrowRight":g=.1;break;case"ArrowLeft":g=-.1;break;default:return}if(At==="top"){x&&d(w=>w?{...w,rotation:w.rotation+g}:null);return}if(At==="bottom"){D&&P(w=>w?{...w,rotation:w.rotation+g}:null);return}if(At==="both"){x&&d(w=>w?{...w,rotation:w.rotation+g}:null),D&&P(w=>w?{...w,rotation:w.rotation+g}:null);return}}else if(vl==="slant"){let g=0,w=0;switch(a.key){case"ArrowUp":w=-.5;break;case"ArrowDown":w=.5;break;case"ArrowLeft":g=-.5;break;case"ArrowRight":g=.5;break}if(g!==0||w!==0){const C=H=>H*Math.PI/180,M=H=>Math.max(-.7,Math.min(.7,H));if(At==="top"){x&&d(H=>H?{...H,skewX:M((H.skewX||0)+C(g)),skewY:M((H.skewY||0)+C(w))}:null);return}if(At==="bottom"){D&&P(H=>H?{...H,skewX:M((H.skewX||0)+C(g)),skewY:M((H.skewY||0)+C(w))}:null);return}if(At==="both"){x&&d(H=>H?{...H,skewX:M((H.skewX||0)+C(g)),skewY:M((H.skewY||0)+C(w))}:null),D&&P(H=>H?{...H,skewX:M((H.skewX||0)+C(g)),skewY:M((H.skewY||0)+C(w))}:null);return}}}else if(vl==="keystone"){let g=0,w=0;switch(a.key){case"ArrowUp":w=-.5;break;case"ArrowDown":w=.5;break;case"ArrowLeft":g=-.5;break;case"ArrowRight":g=.5;break}if(g!==0||w!==0){const C=H=>H*Math.PI/180,M=H=>Math.max(-.35,Math.min(.35,H));if(At==="top"){x&&d(H=>H?{...H,keystoneH:M((H.keystoneH||0)+C(g)),keystoneV:M((H.keystoneV||0)+C(w))}:null);return}if(At==="bottom"){D&&P(H=>H?{...H,keystoneH:M((H.keystoneH||0)+C(g)),keystoneV:M((H.keystoneV||0)+C(w))}:null);return}if(At==="both"){x&&d(H=>H?{...H,keystoneH:M((H.keystoneH||0)+C(g)),keystoneV:M((H.keystoneV||0)+C(w))}:null),D&&P(H=>H?{...H,keystoneH:M((H.keystoneH||0)+C(g)),keystoneV:M((H.keystoneV||0)+C(w))}:null);return}}}}else{const y=a.target;if(y.tagName==="INPUT"&&y.type==="range"){const v=y,g=Number(v.value),w=Number(v.min),C=Number(v.max),M=Number(v.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const H=Math.max(w,g-M);v.value=H.toString(),v.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const Z=Math.min(C,g+M);v.value=Z.toString(),v.dispatchEvent(new Event("input",{bubbles:!0}));break}}}},[R,At,vl,x,D,ht,gt,Ht,mt,$e,xt,Nt,ft,Ge,st,je,ks,dt,A,b,Ae,Ce,kr,rn,yn]);Oe.useEffect(()=>{R!=="transform"&&xi(null)},[R]),Oe.useEffect(()=>{window.addEventListener("keydown",dc,!0);const a=r=>{r.key==="Alt"&&(Fd(!1),Fc(!1),Qn(null))};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",dc,!0),window.removeEventListener("keyup",a,!0)}},[dc,Ht,mt,vn,vn,ft,Ge,rc,cc,kr,gt,xt,Nt,rn,yn,ys,Hd,R]);const Rs=S.useCallback(()=>{mn.current={},z("#AA4499"),de("#F781BF"),Pe(6),ke(6),ot("trace","#AA4499","top"),ot("trace","#F781BF","bottom"),qe("trace",6,"top"),qe("trace",6,"bottom"),I("#0072B2"),Q("#56B4E9"),Y(18),N(18),ot("pad","#0072B2","top"),ot("pad","#56B4E9","bottom"),qe("pad",18,"top"),qe("pad",18,"bottom"),Ri("#6A3D9A"),ii("#9467BD"),Qi(18),Wl(18),ot("component","#6A3D9A","top"),ot("component","#9467BD","bottom"),qe("component",18,"top"),qe("component",18,"bottom"),On("top"),Be("#AA4499"),k(6),yi([{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}]),wl([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),qe("power",18),qe("ground",18),rs(!1),cs(!1),ds(!1),us(!1),$a(!1),fs(!1),jn("top"),W("select"),E(50),xe(!1),J("overlay"),Ch()},[ot,qe]),Rr=S.useCallback(()=>{Jl(null),Ql(null),ro&&(ro.current=null),Na&&(Na.current=null),mi(""),Cl("pcb_project"),nl(!1),Tl(null),il(""),Vn([]),sr(-1),Hl&&(Hl.current=""),zl.current=!1,Jt.current&&(clearInterval(Jt.current),Jt.current=null),d(null),P(null),Pt([]),tl([]),li([]),_e([]),Xl([]),Fn([]),Ha.current=[],rn([]),yn([]),yo(null),Wa(null),ai([]),Gn([]),Fa(null),yi([{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}]),wl([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),Tt(new Set),Ct(new Set),vt(new Set),wt(new Set),Qs(!1),Bo([]),J("overlay"),Ii(1),Pn({x:0,y:0}),ml(!0),jn("top"),bs({}),ta(!1),Si.current&&(clearTimeout(Si.current),Si.current=null),xi(null),Ai(!1),Ni(null),ga("nudge"),Se(!1),E(50),xe(!1),ze(2e3),rs(!1),cs(!1),nr(!1),Hc(!1),ds(!1),us(!1),$a(!1),fs(!1),ia(!0),Sa(!0),al(!0),zo(!0),ko(!0),Dl(!0),wa(!0),wi(!0),Al(!0),di(!0),Za(!0),Qa(!0),Ao(!0),Ss(!0),kn(!0),W("select"),Bn("trace"),On("top"),go("top"),Gs("top"),Ll("top"),xa.current="top",Ki.current="top",Ji.current="top",Sl.current="top",mn.current={},Ro(!0),Ul(!1),Ch(),ir(null),bo({visible:!1,text:""}),ql({visible:!1,title:"",message:""}),Ya({visible:!1}),vo({visible:!1}),Xa({visible:!1,projectName:"",locationPath:"",locationHandle:null}),mo({visible:!1,filename:"",locationPath:"",locationHandle:null}),La({visible:!1,interval:null}),jl({visible:!1,source:"new",interval:5}),hs(!1),Rt(!1),Nl(!1),aa(!1),Ja(!1),Ca(!1),Po(!1),Yr(!1),_o(null),Qn(null),Kn(null),ea(!1),ma.current=null,wo.current=null,_a(!1),Di(null),Ys.current=0,Fl.current=!1,console.log("Project closed: All state cleared and browser permissions released")},[Jl,Ql,mi,Cl,nl,Tl,il,Vn,sr,d,P,Pt,Fn,tl,li,_e,Xl,rn,yn,yo,Wa,ai,Gn,Fa,yi,wl,Tt,Ct,vt,wt,Qs,Bo,J,Ii,Pn,ml,jn,bs,ta,xi,Ai,Ni,ga,Se,E,xe,ze,rs,cs,nr,Hc,ds,us,$a,fs,ia,Sa,al,zo,ko,Dl,wa,wi,Al,di,Za,Qa,Ao,Ss,W,Bn,On,go,Gs,Ll,Ro,Ul,ir,bo,ql,Ya,Xa,mo,La,jl,hs,Rt,Nl,aa,Ja,Ca,Po,_o,Qn,Kn,ea,_a,Di]),Aa=S.useCallback(()=>{Rs(),setTimeout(()=>{Ii(1);const a=Mn.current,r=qa.current;let f=0,m=0;if(a&&r){const y=a.getBoundingClientRect(),v=r.getBoundingClientRect(),g=a.width-80,w=a.height-80,H=60+168+6,Z=y.left-v.left,ge=H-Z,q=y.width-Math.max(0,ge),ie=ge+q/2,K=y.height/2,oe=g/2,ee=w/2,ye=y.width/a.width,De=y.height/a.height,Re=ie/ye,ve=K/De,He=Re-40,Fe=ve-40;f=He-oe,m=Fe-ee}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Pn({x:f,y:m}),Tt(new Set),Ct(new Set),vt(new Set),wt(new Set)},100)},[Rs]);Oe.useEffect(()=>{Aa()},[]),Oe.useEffect(()=>{if(!ps.visible)return;const a=[];ht.size>0,ht.size===0&&gt.size===0&&Ht.size===0&&mt.size===0&&a.push(`
No objects selected.`);const r=a.join(`
`);bo(f=>({...f,text:r}))},[ps.visible,ht,gt,Ht,mt,$e,xt,Nt,ft,Ge,st]),Oe.useEffect(()=>{const a=r=>{const f=Mn.current;if(f&&!(qi.current&&qi.current.contains(r.target))&&!(r.target instanceof Node&&f.contains(r.target))){if(ks(),sa){const m=Ho.current;(!m||!(r.target instanceof Node)||!m.contains(r.target))&&ra(!1)}if(lo){const m=qi.current;(!m||!(r.target instanceof Node)||!m.contains(r.target))&&(Hi(!1),W("select"))}if(ui){const m=Vo.current;(!m||!(r.target instanceof Node)||!m.contains(r.target))&&(ln(!1),td(null))}if(Ic){const m=Ed.current;!r.target?.closest('button[title="Color Picker"]')&&(!m||!(r.target instanceof Node)||!m.contains(r.target))&&hs(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[ks,sa,zs,lo,ui,Ic]);const Fo=a=>{if(!a.current)return{top:0,left:0};const r=a.current.getBoundingClientRect(),f=qa.current?.getBoundingClientRect();return f?{top:r.top-f.top,left:r.left-f.left+r.width+4}:{top:0,left:0}},uc=S.useCallback(()=>{Ho.current&&Io.current&&requestAnimationFrame(()=>{if(Ho.current&&Io.current){const a=Fo(Io);Ho.current.style.top=`${a.top}px`,Ho.current.style.left=`${a.left}px`}})},[]),fc=S.useCallback(()=>{dl.current&&ao.current&&requestAnimationFrame(()=>{if(dl.current&&ao.current){const a=Fo(ao);dl.current.style.top=`${a.top}px`,dl.current.style.left=`${a.left}px`}})},[]),pc=S.useCallback(()=>{Eo.current&&Da.current&&requestAnimationFrame(()=>{if(Eo.current&&Da.current){const a=Fo(Da);Eo.current.style.top=`${a.top}px`,Eo.current.style.left=`${a.left}px`}})},[]);Oe.useEffect(()=>{sa&&uc()},[sa,uc]),Oe.useEffect(()=>{zs&&fc()},[zs,fc]),Oe.useEffect(()=>{Ti&&pc()},[Ti,pc]),Oe.useEffect(()=>{if(lo&&qi.current&&Jc.current){const a=Fo(Jc);qi.current.style.top=`${a.top}px`,qi.current.style.left=`${a.left}px`}},[lo]),Oe.useEffect(()=>{if(pr&&Tr.current&&bn.current){const a=Fo(bn);Tr.current.style.top=`${a.top}px`,Tr.current.style.left=`${a.left}px`}},[pr]),Oe.useEffect(()=>{if(yr&&Pl.current&&Cr.current){const a=Fo(Cr);Pl.current.style.top=`${a.top}px`,Pl.current.style.left=`${a.left}px`}},[yr]),Oe.useEffect(()=>{const a=r=>{if(!Cn)return;const f=document.querySelector("[data-component-editor-dialog]");if(f&&r.target instanceof Node&&f.contains(r.target)){const Fe=r.target;if(Fe.tagName==="BUTTON"||Fe.tagName==="INPUT"||Fe.closest("button")||Fe.closest("input"))return}const m=Mn.current;if(!m)return;const y=m.getBoundingClientRect(),v=r.clientX,g=r.clientY;if(v<y.left||v>y.right||g<y.top||g>y.bottom)return;const w=m.width/y.width,C=m.height/y.height,M=v-y.left,H=g-y.top,Z=M*w,ge=H*C,q=Z-40,ie=ge-40,K=(q-jt.x)/Ve,oe=(ie-jt.y)/Ve;let ee=1/0,ye=null,De=null;const Re=Math.max(6/Ve,4),He=[...xt,...Nt].find(Fe=>Fe.id===Cn.componentId)?.layer||"top";for(const Fe of $e)if((Fe.type==="via"||Fe.type==="pad")&&Fe.points.length>0){if(Fe.type==="pad"&&(Fe.layer||"top")!==He)continue;const L=Fe.points[0],U=Math.max(1,Fe.size/2),he=Math.hypot(L.x-K,L.y-oe),re=Math.max(U,Re);he<=re&&he<ee&&(ee=he,ye=L.id??null,De=Fe)}if(ye!=null&&De){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${ye}`),console.log(`  Connecting pin ${Cn.pinIndex+1} of component ${Cn.componentId}`);const Fe=String(ye),L=Cn.pinIndex,U=Cn.componentId,he=xt.find(Ne=>Ne.id===U),re=Nt.find(Ne=>Ne.id===U);if(he){const Ne=$e;rn(Ee=>{const Qe=Ee.find(Me=>Me.id===U);if(!Qe)return Ee;const Ye=Qe.pinConnections||[],rt=Ye.length>0?[...Ye]:new Array(Qe.pinCount).fill("");let et;if(rt.length!==Qe.pinCount){et=new Array(Qe.pinCount).fill("");for(let Me=0;Me<Math.min(rt.length,Qe.pinCount);Me++)et[Me]=rt[Me]||""}else et=[...rt];et[L]=Fe,console.log(`Updated pin ${L} with value: ${Fe}`),console.log("New pinConnections:",et);const yt=Ee.find(Me=>Me.id===U),tt=yt?_f(yt,et,Ne):null;return Ee.map(Me=>{if(Me.id===U){const at={...Me,pinConnections:et};return tt&&(at.pinPolarities=tt),at}return Me})})}else if(re){const Ne=$e;yn(Ee=>{const Qe=Ee.find(Me=>Me.id===U);if(!Qe)return Ee;const Ye=Qe.pinConnections||[],rt=Ye.length>0?[...Ye]:new Array(Qe.pinCount).fill("");let et;if(rt.length!==Qe.pinCount){et=new Array(Qe.pinCount).fill("");for(let Me=0;Me<Math.min(rt.length,Qe.pinCount);Me++)et[Me]=rt[Me]||""}else et=[...rt];et[L]=Fe,console.log(`Updated pin ${L} with value: ${Fe}`),console.log("New pinConnections:",et);const yt=Ee.find(Me=>Me.id===U),tt=yt?_f(yt,et,Ne):null;return Ee.map(Me=>{if(Me.id===U){const at={...Me,pinConnections:et};return tt&&(at.pinPolarities=tt),at}return Me})})}setTimeout(()=>{Wa(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Cn)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[Cn,xt,Nt,$e,Ve,jt.x,jt.y]);const fi=S.useCallback((a,r,f,m)=>{const y=window.innerWidth,v=window.innerHeight,g=10;let w=Math.max(g,Math.min(a,y-f-g)),C=Math.max(g,Math.min(r,v-m-g));return{x:w,y:C}},[]);Oe.useEffect(()=>{if(!Ks)return;const a=f=>{if(!ss)return;const m={x:f.clientX-ss.x,y:f.clientY-ss.y},y=fi(m.x,m.y,250,window.innerHeight*.4);Fi(y),localStorage.setItem("componentDialogPosition",JSON.stringify(y))},r=()=>{Js(!1),er(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Ks,ss,fi]),Oe.useEffect(()=>{if(!No)return;const a=f=>{if(!Ta)return;const m={x:f.clientX-Ta.x,y:f.clientY-Ta.y},y=fi(m.x,m.y,250,window.innerHeight*.4);ja(y),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(y))},r=()=>{Qr(!1),Mo(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[No,Ta,fi]),Oe.useEffect(()=>{if(!za)return;const a=f=>{if(!Uo)return;const m={x:f.clientX-Uo.x,y:f.clientY-Uo.y};vr(m),localStorage.setItem("notesDialogPosition",JSON.stringify(m))},r=()=>{Kr(!1),Gc(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[za,Uo]),Oe.useEffect(()=>{if(Xc&&ws===null){const a=localStorage.getItem("notesDialogPosition");if(a)try{const r=JSON.parse(a);vr(r)}catch{vr({x:window.innerWidth-550,y:100})}else vr({x:window.innerWidth-550,y:100})}},[Xc,ws]),Oe.useEffect(()=>{if(!ka)return;const a=f=>{if(!mr)return;const m={x:f.clientX-mr.x,y:f.clientY-mr.y};Ts(m),localStorage.setItem("projectNotesDialogPosition",JSON.stringify(m))},r=()=>{Ra(!1),Jr(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[ka,mr]),Oe.useEffect(()=>{if(js&&Oo===null){const a=localStorage.getItem("projectNotesDialogPosition");if(a)try{const r=JSON.parse(a);Ts(r)}catch{Ts({x:100,y:100})}else Ts({x:100,y:100})}},[js,Oo]);const Yd=S.useCallback(()=>{Po(!0)},[]);Oe.useEffect(()=>{if(xo&&xo.visible&&Wi===null){const a=localStorage.getItem("componentDialogPosition");let r;if(a)try{const f=JSON.parse(a);r=fi(f.x,f.y,250,window.innerHeight*.4),Fi(r)}catch{r=fi(window.innerWidth-280,90,250,window.innerHeight*.4),Fi(r)}else r=fi(window.innerWidth-280,90,250,window.innerHeight*.4),Fi(r)}else!xo||xo.visible},[xo,Wi,fi]),Oe.useEffect(()=>{if(ps.visible&&_i===null){const a=localStorage.getItem("detailedInfoDialogPosition");let r;if(a)try{const f=JSON.parse(a);r=fi(f.x,f.y,400,window.innerHeight*.8),ja(r)}catch{r=fi(window.innerWidth-450,90,400,window.innerHeight*.8),ja(r)}else r=fi(window.innerWidth-450,90,400,window.innerHeight*.8),ja(r)}else ps.visible},[ps.visible,_i,fi]),Oe.useEffect(()=>{const a=()=>{if(Wi){const r=fi(Wi.x,Wi.y,250,window.innerHeight*.4);(r.x!==Wi.x||r.y!==Wi.y)&&(Fi(r),localStorage.setItem("componentDialogPosition",JSON.stringify(r)))}if(_i){const r=fi(_i.x,_i.y,400,window.innerHeight*.8);(r.x!==_i.x||r.y!==_i.y)&&(ja(r),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(r)))}};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[Wi,_i,fi]);const Xd=S.useCallback(a=>{switch(a){case"transparency":E(50);break;case"brushSize":k(3);break}},[]),$o=Oe.useRef(te);Oe.useEffect(()=>{$o.current=te},[te]),Oe.useEffect(()=>{if(ce){Wc.current=performance.now(),E(0);const a=r=>{const f=Wc.current||r,m=$o.current,y=(r-f)%m/m,v=1-Math.abs(1-2*y);E(Math.round(v*100)),So.current=requestAnimationFrame(a)};So.current=requestAnimationFrame(a)}return()=>{So.current&&(cancelAnimationFrame(So.current),So.current=null)}},[ce]),Oe.useEffect(()=>{if(R==="center"){_t(cx());return}const a=R==="erase"?"erase":R==="magnify"?"magnify":R==="ground"?"ground":R==="power"?"power":R==="component"?"component":R==="draw"?je==="via"?"via":je==="pad"?"pad":je==="testPoint"?"testPoint":"trace":"default";if(a==="default"){_t(void 0);return}const r=Math.max(1,Ve),f=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(V*r)),y=f+4*2+(a==="magnify"?8:0),v=document.createElement("canvas");v.width=y,v.height=y;const g=v.getContext("2d");if(!g){_t(void 0);return}const w=y/2,C=y/2,M=f/2;if(g.clearRect(0,0,y,y),a==="via"){const Z=M,ge=M*.5,q=M*.7,K=bt.get("via").color;g.fillStyle=K,g.beginPath(),g.arc(w,C,Z,0,Math.PI*2),g.arc(w,C,ge,0,Math.PI*2),g.fill("evenodd"),g.strokeStyle="#808080",g.lineWidth=1,g.beginPath(),g.moveTo(w-q,C),g.lineTo(w+q,C),g.stroke(),g.beginPath(),g.moveTo(w,C-q),g.lineTo(w,C+q),g.stroke()}else if(a==="pad"){const Z=$t==="top"?"padTop":"padBottom",ge=bt.get(Z),q=ge.color,K=Math.max(6,Math.round(ge.size*r))/2,oe=K*2,ee=oe*.5,ye=K*.7;g.fillStyle=q,g.beginPath(),g.rect(w-K,C-K,oe,oe),g.rect(w-ee/2,C-ee/2,ee,ee),g.fill("evenodd"),g.strokeStyle="#808080",g.lineWidth=1,g.beginPath(),g.moveTo(w-ye,C),g.lineTo(w+ye,C),g.stroke(),g.beginPath(),g.moveTo(w,C-ye),g.lineTo(w,C+ye),g.stroke()}else if(a==="trace"){const Z=dt==="top"?"traceTop":"traceBottom",q=bt.get(Z).color;g.fillStyle=q,g.beginPath(),g.arc(w,C,M,0,Math.PI*2),g.fill()}else if(a==="testPoint"){const Z=an==="top"?"testPointTop":"testPointBottom",ge=bt.get(Z);_t(dx(ge.size));return}else if(a==="erase"){const Z=Math.max(V*.75,8),ge=Math.max(V*.5,6),q=Math.max(V*.2,2);g.save(),g.translate(w,C),g.rotate(-35*Math.PI/180),g.fillStyle="#f5a3b3",g.strokeStyle="#111",g.lineWidth=1.5;const ie=1.5,K=-Z/2,oe=-ge/2;g.beginPath(),g.moveTo(K+ie,oe),g.lineTo(K+Z-ie,oe),g.quadraticCurveTo(K+Z,oe,K+Z,oe+ie),g.lineTo(K+Z,oe+ge-ie),g.quadraticCurveTo(K+Z,oe+ge,K+Z-ie,oe+ge),g.lineTo(K+ie,oe+ge),g.quadraticCurveTo(K,oe+ge,K,oe+ge-ie),g.lineTo(K,oe+ie),g.quadraticCurveTo(K,oe,K+ie,oe),g.closePath(),g.fill(),g.stroke(),g.fillStyle="#f18ea4",g.beginPath(),g.rect(-Z/2,ge/2-q,Z,q),g.fill(),g.restore()}else if(a==="magnify"){const Z=M;g.strokeStyle="#111",g.lineWidth=2,g.beginPath(),g.arc(w-2,C-2,Z,0,Math.PI*2),g.stroke();const ge=w+Z*.6,q=C+Z*.6,ie=ge+6,K=q+6;g.beginPath(),g.moveTo(ge,q),g.lineTo(ie,K),g.stroke(),g.beginPath(),g.moveTo(w-6,C-2),g.lineTo(w+2,C-2),g.stroke(),kl||(g.beginPath(),g.moveTo(w-2,C-6),g.lineTo(w-2,C+2),g.stroke())}else if(a==="ground"){const Z=bt.get("ground");if(g.strokeStyle=Z.color,g.lineWidth=2,g.lineCap="round",Oi==="groundbus-earth"){const q=M*1.5,ie=q*.9,K=q*.24,oe=q*1.6;g.beginPath(),g.moveTo(w,C-ie/2),g.lineTo(w,C+ie/2),g.stroke();for(let ee=0;ee<3;ee++){const ye=C+ie/2+ee*K,De=oe*(1-ee*.25);g.beginPath(),g.moveTo(w-De/2,ye),g.lineTo(w+De/2,ye),g.stroke()}}else{const q=M*.8;g.beginPath(),g.arc(w,C,M,0,Math.PI*2),g.stroke(),g.beginPath(),g.moveTo(w,C-M-q),g.lineTo(w,C+M+q),g.stroke(),g.beginPath(),g.moveTo(w-M-q,C),g.lineTo(w+M+q,C),g.stroke()}}else if(a==="power"){const Z=bt.get("power");g.strokeStyle=Z.color,g.lineWidth=2,g.lineCap="round";const ge=M*.8;g.beginPath(),g.arc(w,C,M,0,Math.PI*2),g.stroke(),g.beginPath(),g.moveTo(w,C-M-ge),g.lineTo(w,C+M+ge),g.stroke(),g.beginPath(),g.moveTo(w-M-ge,C),g.lineTo(w+M+ge,C),g.stroke()}else if(a==="component"){const ge=(xn||"top")==="top"?"componentTop":"componentBottom",ie=bt.get(ge).color,K=f,oe=K/2;g.strokeStyle=ie,g.lineWidth=2,g.fillStyle="rgba(255,255,255,0.9)",g.beginPath(),g.rect(w-oe,C-oe,K,K),g.fill(),g.stroke();const ee=it?Pf(it):"?";g.fillStyle=ie,g.font=`bold ${Math.max(8,K*.35)}px sans-serif`,g.textAlign="center",g.textBaseline="middle",g.fillText(ee,w,C)}const H=`url(${v.toDataURL()}) ${Math.round(w)} ${Math.round(C)}, crosshair`;_t(H)},[R,je,X,V,Ve,kl,it,hr,Oi,st,Ot,dt,$t,an,xn,Mt.toolInstanceId,Mt.color,Mt.size]),Oe.useEffect(()=>{Wo()},[Wo]),Oe.useEffect(()=>{Wo()},[Rl.width,Rl.height]),Oe.useEffect(()=>{ht.size===0&&R==="draw"&&je==="trace"&&V>=1&&(Je==="top"?Pe(V):ke(V))},[V,R,je,Je,ht]),Oe.useEffect(()=>{Pt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const f=r.points[0].id,m=Gi(f,st);if(r.viaType!==m)return{...r,viaType:m}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const f=r.points[0].id,m=Bl(f,st);if(r.padType!==m)return{...r,padType:m}}else if(r.type==="testPoint"&&r.points.length>0&&r.points[0].id!==void 0){const f=r.points[0].id,m=ji(f,st),y=m.includes("Power")?"power":m.includes("Ground")?"ground":m.includes("Signal")?"signal":"unknown";if(r.testPointType!==y)return{...r,testPointType:y}}return r}))},[ft,Ge,st,Gi,Bl,ji]);const Gd=S.useCallback(()=>{const a=Mn.current;if(!a)return;const r=a.toDataURL("image/png"),f=window.open("","_blank");if(!f){alert("Please allow popups to print the canvas.");return}f.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${r}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),f.document.close()},[]);Oe.useEffect(()=>{const a=f=>{f.key==="Shift"&&rr(!0)},r=f=>{f.key==="Shift"&&rr(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}},[]);const Dr=S.useCallback(a=>{if(a.size===0)return;const r=Array.from(a).map(f=>String(f));Pt(f=>f.map(m=>{if(m.type==="trace"){const y=m.points.filter(v=>v.id===void 0?!0:!a.has(v.id));return y.length<2?null:{...m,points:y}}return m}).filter(m=>m!==null)),rn(f=>f.map(m=>{const y=m.pinConnections||[];if(y.some(g=>g&&r.includes(g))){const g=y.map(w=>w&&r.includes(w)?"":w);return{...m,pinConnections:g}}return m})),yn(f=>f.map(m=>{const y=m.pinConnections||[];if(y.some(g=>g&&r.includes(g))){const g=y.map(w=>w&&r.includes(w)?"":w);return{...m,pinConnections:g}}return m}))},[Pt,rn,yn]),Ar=S.useRef(new Set);Oe.useEffect(()=>{const a=new Set;for(const f of $e)if((f.type==="via"||f.type==="pad")&&f.points.length>0){const m=f.points[0].id;m!==void 0&&a.add(m)}const r=new Set;for(const f of Ar.current)a.has(f)||r.add(f);r.size>0&&Dr(r),Ar.current=a},[$e,Dr]),Oe.useEffect(()=>{Pt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const f=r.points[0].id,m=Gi(f,st);if(r.viaType!==m)return{...r,viaType:m}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const f=r.points[0].id,m=Bl(f,st);if(r.padType!==m)return{...r,padType:m}}else if(r.type==="testPoint"&&r.points.length>0&&r.points[0].id!==void 0){const f=r.points[0].id,m=ji(f,st),y=m.includes("Power")?"power":m.includes("Ground")?"ground":m.includes("Signal")?"signal":"unknown";if(r.testPointType!==y)return{...r,testPointType:y}}return r}))},[ft,Ge,st,Gi,Bl,ji]),Oe.useEffect(()=>{const a=r=>{qr.current&&(qr.current.contains(r.target)||ir(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),Oe.useEffect(()=>{const a=(r,f)=>{const m=r.current;if(!m)return;const y=m.getContext("2d");if(!y)return;const v=m.width,g=m.height;if(y.clearRect(0,0,v,g),y.fillStyle="#fff",y.fillRect(0,0,v,g),f?.bitmap){const w=f.bitmap,C=Math.min(v/w.width,g/w.height),M=Math.max(1,Math.floor(w.width*C)),H=Math.max(1,Math.floor(w.height*C)),Z=Math.floor((v-M)/2),ge=Math.floor((g-H)/2);y.drawImage(w,Z,ge,M,H)}y.strokeStyle="#ddd",y.lineWidth=1,y.strokeRect(.5,.5,v-1,g-1)};a(fr,x),a(Co,D)},[x,D]),Oe.useEffect(()=>{const a=[],r=[],f=[],m=[];for(const y of $e)if(y.type==="via"&&y.points.length>=1){const v=y.points[0],g={id:y.id,pointId:v.id,x:v.x,y:v.y,size:y.size,color:y.color};a.push(g)}else if(y.type==="pad"&&y.points.length>=1){const v=y.points[0],g={id:y.id,pointId:v.id,x:v.x,y:v.y,size:y.size,color:y.color,layer:y.layer||"top"};r.push(g)}else if(y.type==="trace"&&y.points.length>=2)for(let v=0;v<y.points.length-1;v++){const g=y.points[v],w=y.points[v+1],C={id:y.id,startPointId:g.id,endPointId:w.id,x1:g.x,y1:g.y,x2:w.x,y2:w.y,size:y.size,color:y.color};y.layer==="top"?f.push(C):m.push(C)}tl(a),li(r),_e(f),Xl(m)},[$e]);const Nr=S.useRef($e);Nr.current=$e;const _l=S.useCallback(()=>{const r=new Date().toISOString(),f=ux();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:r,view:{currentView:pe,viewScale:Ve,viewPan:jt,showBothLayers:Er,selectedDrawingLayer:Je},images:{top:x?{name:x.name,width:x.width,height:x.height,filePath:x.filePath||x.name,dataUrl:x.dataUrl,x:x.x,y:x.y,scale:x.scale,rotation:x.rotation,flipX:x.flipX,flipY:x.flipY,skewX:x.skewX,skewY:x.skewY,keystoneV:x.keystoneV,keystoneH:x.keystoneH,brightness:x.brightness??100,contrast:x.contrast??100}:null,bottom:D?{name:D.name,width:D.width,height:D.height,filePath:D.filePath||D.name,dataUrl:D.dataUrl,x:D.x,y:D.y,scale:D.scale,rotation:D.rotation,flipX:D.flipX,flipY:D.flipY,skewX:D.skewX,skewY:D.skewY,keystoneV:D.keystoneV,keystoneH:D.keystoneH,brightness:D.brightness??100,contrast:D.contrast??100}:null},projectDirectoryName:ro.current?ro.current.name||null:Ln&&Ln.name||null,drawing:{drawingStrokes:Nr.current.filter(y=>!(y.type==="trace"&&y.points.length<2)),vias:as,tracesTop:os,tracesBottom:En,componentsTop:xt,componentsBottom:Nt,grounds:Ge,powers:ft},powerBuses:st,groundBuses:bi,pointIdCounter:Th(),designatorCounters:Nd(),autoAssignDesignators:Xi,useGlobalDesignatorCounters:Do,traceColors:{top:Ot.get("trace")?.layerSettings.get("top")?.color||A,bottom:Ot.get("trace")?.layerSettings.get("bottom")?.color||b},traceSizes:{top:Ot.get("trace")?.layerSettings.get("top")?.size||Ae,bottom:Ot.get("trace")?.layerSettings.get("bottom")?.size||Ce},padColors:{top:Ot.get("pad")?.layerSettings.get("top")?.color||fe,bottom:Ot.get("pad")?.layerSettings.get("bottom")?.color||O},padSizes:{top:Ot.get("pad")?.layerSettings.get("top")?.size||Te,bottom:Ot.get("pad")?.layerSettings.get("bottom")?.size||T},componentColors:{top:Ot.get("component")?.layerSettings.get("top")?.color||Nn,bottom:Ot.get("component")?.layerSettings.get("bottom")?.color||hi},componentSizes:{top:Ot.get("component")?.layerSettings.get("top")?.size||gi,bottom:Ot.get("component")?.layerSettings.get("bottom")?.size||Vi},traceToolLayer:dt,toolSettings:{trace:Ot.get("trace")?.settings||{color:"#ff0000",size:6},via:Ot.get("via")?.settings||{color:"#ff0000",size:18},pad:Ot.get("pad")?.settings||{color:"#ff0000",size:18},component:Ot.get("component")?.settings||{color:"#ff0000",size:18},ground:Ot.get("ground")?.settings||{color:"#000000",size:18},power:Ot.get("power")?.settings||{color:"#ff0000",size:18},erase:Ot.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:vi,areViasLocked:$n,arePadsLocked:$i,areTracesLocked:qn,areComponentsLocked:Mi,areGroundNodesLocked:Ui,arePowerNodesLocked:vn},visibility:{showViasLayer:Jn,showTopPadsLayer:zn,showBottomPadsLayer:ci,showTopTracesLayer:Bi,showBottomTracesLayer:Pi,showTopComponents:Wn,showBottomComponents:Yn,showPowerLayer:la,showGroundLayer:cl,showConnectionsLayer:ms,showTraceCornerDots:br},autoSave:{enabled:Zn,interval:Zl,baseName:Kl},projectInfo:{name:si},projectNotes:oa,homeViews:ys,toolInstances:bt.getAll()},timestamp:f}},[pe,Ve,jt,Er,Je,x,D,$e,as,os,En,xt,Nt,Ge,Ot,vi,$n,$i,qn,Mi,Ui,vn,st,bi,Th,A,b,Ae,Ce,fe,O,Te,T,Nn,hi,gi,Vi,dt,Zn,Zl,Kl,si,Jn,zn,ci,Bi,Pi,Wn,Yn,la,cl,ms,Xi,Do,oa,ys]),qd=S.useRef(_l);qd.current=_l;const Na=S.useRef(va);Na.current=va;const Hl=S.useRef(Kl);Hl.current=Kl;const ad=S.useRef(mi);ad.current=mi;const od=S.useRef(or);od.current=or;const Ci=S.useRef([]);Ci.current=Bu;const so=S.useRef(-1);so.current=gs;const ro=S.useRef(null),hc=S.useRef(!1);Oe.useEffect(()=>{hc.current||(ro.current=Ln)},[Ln]);const Mr=S.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=ro.current,r=Hl.current;if(console.log(`Auto save: projectDirHandle=${a?`set (${a.name})`:"missing"}, baseName=${r||"missing"}`),!a||!r){console.warn(`Auto save: Missing project directory handle (${!a}) or base name (${!r}). Please create a new project or open an existing project first.`),nl(!1),Jt.current&&(clearInterval(Jt.current),Jt.current=null);return}if(!zl.current){console.log("Auto save: Skipping - no changes since last save");return}const f=Nr.current,m=f.filter(H=>H.type==="trace"&&H.points.length<2);if(m.length>0){console.log(`Auto save: Cleaning up ${m.length} single-point trace(s) before save`),m.forEach(Z=>console.log(`  - Removing single-point trace ${Z.id}`));const H=f.filter(Z=>!(Z.type==="trace"&&Z.points.length<2));Pt(H),Nr.current=H}console.log("Auto save: Starting save...");const{project:y,timestamp:v}=qd.current(),w=`${Ac(r)}_${v}.json`,C=JSON.stringify(y,null,2),M=new Blob([C],{type:"application/json"});try{let H;try{H=await a.getDirectoryHandle("history",{create:!0})}catch(K){console.error("Failed to get/create history directory:",K);return}try{const K=[],oe=od.current;for await(const ee of a.keys())try{if(ee==="history"||ee===w)continue;const De=await(await a.getFileHandle(ee)).getFile();if(!ee.endsWith(".json"))continue;const Re=await De.text();try{const ve=JSON.parse(Re);if(ve.version&&(ve.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!ve.fileType)){K.push(ee);const He=ve.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${ee} (${He}${ee===oe?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const ee of K)try{const Re=await(await(await a.getFileHandle(ee)).getFile()).text(),He=await(await H.getFileHandle(ee,{create:!0})).createWritable();await He.write(new Blob([Re],{type:"application/json"})),await He.close(),await a.removeEntry(ee),console.log(`Auto save: Moved ${ee} from root to history/`)}catch(ye){console.warn(`Auto save: Failed to move ${ee} to history:`,ye)}}catch(K){console.warn("Auto save: Error checking for old files in root:",K)}const ge=await(await a.getFileHandle(w,{create:!0})).createWritable();await ge.write(M),await ge.close(),console.log(`Auto save: Successfully saved ${w} to root directory`),ad.current(w);const q=Ci.current,ie=[w,...q.filter(K=>K!==w)].sort((K,oe)=>oe.localeCompare(K));Vn(ie),Ci.current=ie,sr(0),so.current=0,zl.current=!1}catch(H){console.error("Auto save failed:",H)}},[]);Ga.current=Mr;const Ds=S.useCallback(async()=>{const{project:a}=_l(),r=JSON.stringify(a,null,2),f=new Blob([r],{type:"application/json"});if(Ln&&si)try{let M=null;try{M=await Ln.getDirectoryHandle("history",{create:!0})}catch(oe){console.error("Failed to get/create history directory:",oe),M=null}const H=si.replace(/\.json$/i,""),Z=Ac(H),{timestamp:ge}=_l(),q=`${Z}_${ge}.json`;if(M)try{const oe=[];for await(const ee of Ln.keys())try{if(ee==="history"||ee===q)continue;const De=await(await Ln.getFileHandle(ee)).getFile();if(!ee.endsWith(".json"))continue;const Re=await De.text();try{JSON.parse(Re).version&&(oe.push(ee),console.log(`Save: Found PCB project file in root: ${ee}`))}catch{continue}}catch{continue}for(const ee of oe)try{const Re=await(await(await Ln.getFileHandle(ee)).getFile()).text(),He=await(await M.getFileHandle(ee,{create:!0})).createWritable();await He.write(new Blob([Re],{type:"application/json"})),await He.close(),await Ln.removeEntry(ee),console.log(`Save: Moved ${ee} from root to history/`)}catch(ye){console.warn(`Save: Failed to move ${ee} to history:`,ye)}}catch(oe){console.warn("Save: Error checking for old files in root:",oe)}const K=await(await Ln.getFileHandle(q,{create:!0})).createWritable();await K.write(f),await K.close(),mi(q),console.log(`Project saved: ${si}/${q}`);return}catch(M){console.error("Failed to save to project directory:",M),Jl(null)}if(si&&!Ln){const M=window;if(typeof M.showDirectoryPicker=="function")try{const H=await M.showDirectoryPicker();Jl(H);const Z=`${si}.json`,q=await(await H.getFileHandle(Z,{create:!0})).createWritable();await q.write(f),await q.close(),mi(Z),console.log(`Project saved: ${Z} in selected directory`);return}catch(H){H?.name!=="AbortError"&&console.error("Failed to get directory:",H)}}const m=M=>String(M).padStart(2,"0"),y=new Date,g=`pcb_project_${`${y.getFullYear()}_${m(y.getMonth()+1)}_${m(y.getDate())}_${m(y.getHours())}_${m(y.getMinutes())}_${m(y.getSeconds())}`}.json`,w=window;if(typeof w.showSaveFilePicker=="function")try{const M=await w.showSaveFilePicker({suggestedName:g,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),H=await M.createWritable();await H.write(f),await H.close();const Z=M.name;try{const ie=await M.getFile();mi(ie.name)}catch{mi(Z)}const q=Z.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");q&&Cl(q);try{const ie=M.name.replace(/\.json$/i,""),oe=Ac(ie).replace(/[^a-zA-Z0-9_-]/g,"_");il(oe),va||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(ie){console.warn("Could not set up auto save for new file:",ie)}return}catch(M){if(M?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",M)}const C=document.createElement("a");C.href=URL.createObjectURL(f),C.download=g,document.body.appendChild(C),C.click(),setTimeout(()=>{URL.revokeObjectURL(C.href),document.body.removeChild(C)},0)},[_l]);Oe.useEffect(()=>{Jt.current&&(clearInterval(Jt.current),Jt.current=null);const a=Xr.current;if(Xr.current=Zn,Zn&&Zl){const r=Zl*60*1e3;va&&Kl?(console.log(`Auto save: Setting up interval for ${Zl} minute(s) (${r}ms)`),a||(zl.current=!0,setTimeout(()=>{Mr()},100)),Jt.current&&(clearInterval(Jt.current),Jt.current=null),Jt.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${zl.current}`),console.log(`  - dirHandle: ${Na.current?"set":"missing"}`),console.log(`  - baseName: ${Hl.current||"missing"}`),Mr()},r),console.log(`Auto save: Interval set up for ${r}ms (${Zl} minutes)`),console.log(`  - Directory handle: ${va?"set":"missing"}`),console.log(`  - Base name: ${Kl||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!va}) or base name (${!Kl}). Disabling auto save.`),nl(!1),Jt.current&&(clearInterval(Jt.current),Jt.current=null))}else Zn||(Xr.current=!1);return()=>{Jt.current&&(clearInterval(Jt.current),Jt.current=null)}},[Zn,Zl,va,Kl]);const As=S.useRef(!1);Oe.useEffect(()=>{if(!Zn){As.current=!1;return}if(As.current){As.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}zl.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!x,bottomImage:!!D,drawingStrokesCount:$e.length,componentsTopCount:xt.length,componentsBottomCount:Nt.length,powersCount:ft.length,groundsCount:Ge.length,powerBusesCount:st.length,projectNotesCount:oa.length,areImagesLocked:vi,areViasLocked:$n,areTracesLocked:qn,areComponentsLocked:Mi,areGroundNodesLocked:Ui,arePowerNodesLocked:vn})},[x,D,$e,xt,Nt,ft,Ge,st,oa,A,b,Ae,Ce,vi,$n,qn,Mi,Ui,vn,Zn]),Oe.useEffect(()=>{Zn?(As.current=!0,console.log("Auto save: Enabled, marking first run")):As.current=!1},[Zn]),Oe.useEffect(()=>{Zn||(zl.current=!1)},[Zn]);const sd=S.useCallback(()=>!!(x||D||$e.length>0||xt.length>0||Nt.length>0||ft.length>0||Ge.length>0),[x,D,$e,xt,Nt,ft,Ge]),Lo=S.useCallback(()=>{Xa({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Zd=S.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Xa(f=>({...f,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),rd=S.useCallback(async()=>{const a=Qt.projectName.trim();if(!a){alert("Please enter a project name.");return}const r=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!Qt.locationHandle){alert("Please select a location for the project.");return}const f=Qt.locationHandle;let m,y;if(f.name===r)m=f,y=f;else{y=f;try{m=await y.getDirectoryHandle(r,{create:!0})}catch(v){console.error("Failed to create project folder:",v),alert(`Failed to create project folder "${r}". See console for details.`);return}}Rr(),Xa({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Cl(r),Jl(m),Rs();try{const{project:v,timestamp:g}=_l(),C=`${Ac(r)}_${g}.json`,M=JSON.stringify(v,null,2),H=new Blob([M],{type:"application/json"}),ge=await(await m.getFileHandle(C,{create:!0})).createWritable();await ge.write(H),await ge.close(),mi(C),console.log(`New project created: ${r}/${C}`),jl({visible:!0,source:"new",interval:5})}catch(v){console.error("Failed to save new project:",v),alert("Failed to save new project file. See console for details.")}},[Rs,_l,Qt,Rr]),Ur=S.useCallback(()=>{Xa({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Qd=S.useCallback(()=>{const a=si?`${si}.json`:"";mo({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(na.current?.focus(),na.current&&a){const r=a.replace(/\.json$/i,"");na.current.setSelectionRange(0,r.length)}},100)},[si]),Kd=S.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();mo(f=>({...f,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Jd=S.useCallback(async()=>{const a=Kt.filename.trim();if(!a){alert("Please enter a file name.");return}const f=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!Kt.locationHandle){alert("Please select a location for the file.");return}const m=Kt.locationHandle;try{const{project:y}=_l(),v=JSON.stringify(y,null,2),g=new Blob([v],{type:"application/json"}),C=await(await m.getFileHandle(f,{create:!0})).createWritable();await C.write(g),await C.close(),mi(f);const M=f.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");M&&Cl(M),Jl(m),mo({visible:!1,filename:"",locationPath:"",locationHandle:null}),ir(null),console.log(`Project saved as: ${f} in selected directory`)}catch(y){console.error("Failed to save project:",y),alert(`Failed to save project file "${f}". See console for details.`)}},[Kt,_l]),cd=S.useCallback(()=>{mo({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),gc=S.useCallback(async()=>{Ya({visible:!1}),await Ds(),Lo(),Aa()},[Ds,Lo,Aa]),Br=S.useCallback(()=>{Ya({visible:!1}),Lo(),Aa()},[Lo,Aa]),dd=S.useCallback(()=>{Ya({visible:!1})},[]);Oe.useEffect(()=>{if(Vc.visible){setTimeout(()=>{dr.current?.focus()},0);const a=r=>{r.key==="Enter"?(r.preventDefault(),gc()):r.key==="Escape"&&(r.preventDefault(),Ya({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[Vc.visible,gc]);const co=S.useCallback(async a=>{try{if(a.toolInstances?bt.initializeFromProject(a):bt.initialize(),a.projectInfo&&a.projectInfo.name&&Cl(a.projectInfo.name),a.view&&(a.view.currentView&&J(a.view.currentView),a.view.viewScale!=null&&Ii(a.view.viewScale),a.view.viewPan&&Pn(a.view.viewPan),a.view.showBothLayers!=null&&ml(a.view.showBothLayers),a.view.selectedDrawingLayer&&jn(a.view.selectedDrawingLayer)),a.homeViews?bs(a.homeViews):bs({}),a.projectNotes&&Array.isArray(a.projectNotes)?Bo(a.projectNotes):Bo([]),a.traceColors&&(a.traceColors.top&&(z(a.traceColors.top),ot("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(de(a.traceColors.bottom),ot("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const v=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let g=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;g<6&&(g=6),Pe(v),ke(g),qe("trace",v,"top"),qe("trace",g,"bottom")}else Pe(6),ke(6);if(a.padColors&&(a.padColors.top&&(I(a.padColors.top),ot("pad",a.padColors.top,"top")),a.padColors.bottom&&(Q(a.padColors.bottom),ot("pad",a.padColors.bottom,"bottom"))),a.padSizes){const v=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:18,g=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:18;Y(v),N(g),qe("pad",v,"top"),qe("pad",g,"bottom")}if(a.componentColors&&(a.componentColors.top&&(Ri(a.componentColors.top),ot("component",a.componentColors.top,"top")),a.componentColors.bottom&&(ii(a.componentColors.bottom),ot("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const v=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,g=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;Qi(v),Wl(g),qe("component",v,"top"),qe("component",g,"bottom")}if(a.traceToolLayer&&(On(a.traceToolLayer),R==="draw"&&je==="trace")){const v=a.traceToolLayer;Be(v==="top"?a.traceColors?.top||A:a.traceColors?.bottom||b);const g=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let w=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;w<6&&(w=6),k(v==="top"?g:w)}a.toolSettings&&on(v=>{const g=new Map(v);if(a.toolSettings.trace){const C=g.get("trace");if(C){const M={...C,settings:a.toolSettings.trace},H=new Map(C.layerSettings);a.traceSizes&&a.traceColors&&(H.set("top",{color:a.traceColors.top||C.layerSettings.get("top")?.color||"#AA4499",size:a.traceSizes.top||C.layerSettings.get("top")?.size||6}),H.set("bottom",{color:a.traceColors.bottom||C.layerSettings.get("bottom")?.color||"#F781BF",size:a.traceSizes.bottom||C.layerSettings.get("bottom")?.size||6})),g.set("trace",{...M,layerSettings:H})}}if(a.toolSettings.via){const C=g.get("via");C&&g.set("via",{...C,settings:a.toolSettings.via})}if(a.toolSettings.pad){const C=g.get("pad");if(C){const M={...C,settings:a.toolSettings.pad},H=new Map(C.layerSettings);a.padSizes&&a.padColors&&(H.set("top",{color:a.padColors.top||C.layerSettings.get("top")?.color||"#0072B2",size:a.padSizes.top||C.layerSettings.get("top")?.size||18}),H.set("bottom",{color:a.padColors.bottom||C.layerSettings.get("bottom")?.color||"#56B4E9",size:a.padSizes.bottom||C.layerSettings.get("bottom")?.size||18})),g.set("pad",{...M,layerSettings:H})}}if(a.toolSettings.component){const C=g.get("component");if(C){const M={...C,settings:a.toolSettings.component},H=new Map(C.layerSettings);a.componentSizes&&a.componentColors&&(H.set("top",{color:a.componentColors.top||C.layerSettings.get("top")?.color||"#6A3D9A",size:a.componentSizes.top||C.layerSettings.get("top")?.size||18}),H.set("bottom",{color:a.componentColors.bottom||C.layerSettings.get("bottom")?.color||"#9467BD",size:a.componentSizes.bottom||C.layerSettings.get("bottom")?.size||18})),g.set("component",{...M,layerSettings:H})}}if(a.toolSettings.ground){const C=g.get("ground");C&&g.set("ground",{...C,settings:a.toolSettings.ground})}if(a.toolSettings.power){const C=g.get("power");C&&g.set("power",{...C,settings:a.toolSettings.power})}if(a.toolSettings.erase){const C=g.get("erase");C&&g.set("erase",{...C,settings:a.toolSettings.erase})}const w=R==="draw"&&je==="trace"?g.get("trace"):R==="draw"&&je==="via"?g.get("via"):R==="draw"&&je==="pad"?g.get("pad"):R==="component"?g.get("component"):R==="power"?g.get("power"):R==="ground"?g.get("ground"):null;if(w)if(R==="draw"&&je==="trace"){const C=dt||"top",M=w.layerSettings.get(C);M?(Be(M.color),k(M.size),C==="top"?(z(M.color),Pe(M.size)):(de(M.color),ke(M.size))):(Be(w.settings.color),k(w.settings.size))}else if(R==="draw"&&je==="pad"){const C=$t||"top",M=w.layerSettings.get(C);M?(Be(M.color),k(M.size),C==="top"?(I(M.color),Y(M.size)):(Q(M.color),N(M.size))):(Be(w.settings.color),k(w.settings.size))}else if(R==="component"){const C=xn||"top",M=w.layerSettings.get(C);M?(Be(M.color),k(M.size),C==="top"?(Ri(M.color),Qi(M.size)):(ii(M.color),Wl(M.size))):(Be(w.settings.color),k(w.settings.size))}else Be(w.settings.color),k(w.settings.size);return g});const r=async(v,g)=>{if(!v)return null;let w=null,C="",M=v.filePath||v.name;if(M&&g)try{const Z=await(await g.getFileHandle(M)).getFile();w=await createImageBitmap(Z),C=URL.createObjectURL(Z),console.log(`Loaded image from file path: ${M}`)}catch(H){console.warn(`Failed to load image from file path ${M}:`,H)}if(!w&&v.dataUrl)try{const H=await(await fetch(v.dataUrl)).blob();w=await createImageBitmap(H),C=v.dataUrl,console.log("Loaded image from embedded dataUrl")}catch(H){console.error("Failed to load image from dataUrl:",H)}return w?{url:C,name:v.name??"image",width:v.width??w.width,height:v.height??w.height,dataUrl:v.dataUrl,filePath:M,x:v.x??0,y:v.y??0,scale:v.scale??1,rotation:v.rotation??0,flipX:!!v.flipX,flipY:!!v.flipY,skewX:v.skewX??0,skewY:v.skewY??0,keystoneV:v.keystoneV??0,keystoneH:v.keystoneH??0,brightness:v.brightness??100,contrast:v.contrast??100,bitmap:w}:(console.warn("Could not load image bitmap"),null)},f=await r(a.images?.top,Ln),m=await r(a.images?.bottom,Ln);if(d(f),P(m),a.pointIdCounter&&typeof a.pointIdCounter=="number"?Uf(a.pointIdCounter):(console.warn("Project file missing pointIdCounter. Starting from 1."),Uf(1)),a.locks&&(typeof a.locks.areImagesLocked=="boolean"&&rs(a.locks.areImagesLocked),typeof a.locks.areViasLocked=="boolean"&&cs(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&nr(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&ds(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&us(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"&&$a(a.locks.areGroundNodesLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&fs(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&al(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&Dl(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&wa(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&zo(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&ko(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&di(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&Za(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&Qa(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Ao(a.visibility.showGroundLayer),typeof a.visibility.showConnectionsLayer=="boolean"&&Ss(a.visibility.showConnectionsLayer),typeof a.visibility.showTraceCornerDots=="boolean"&&kn(a.visibility.showTraceCornerDots)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&nl(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&Tl(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(il(a.autoSave.baseName),Hl.current=a.autoSave.baseName,a.autoSave.enabled&&!va&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),nl(!1),Tl(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),nl(!1),Tl(null),il(""),Hl.current="")):(nl(!1),Tl(null),Ql(null),il(""),Na.current=null,Hl.current="",Jt.current&&(clearInterval(Jt.current),Jt.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const v=a.drawing.drawingStrokes.map(g=>({...g,points:g.points.map(w=>({...w,...Yt(w)}))})).filter(g=>!(g.type==="trace"&&g.points.length<2));Pt(v);for(const g of v)for(const w of g.points)w.id&&typeof w.id=="number"&&Bf(w.id)}else console.warn("Project file missing drawingStrokes. Starting with empty strokes."),Pt([]);if(a.drawing?.componentsTop){const v=a.drawing.componentsTop.map(g=>{const w=Yt({x:g.x,y:g.y});return{...g,x:w.x,y:w.y,layer:g.layer||"top",pinConnections:g.pinConnections||new Array(g.pinCount||0).fill("")}});rn(v)}if(a.drawing?.componentsBottom){const v=a.drawing.componentsBottom.map(g=>{const w=Yt({x:g.x,y:g.y});return{...g,x:w.x,y:w.y,layer:g.layer||"bottom",pinConnections:g.pinConnections||new Array(g.pinCount||0).fill("")}});yn(v)}if(a.designatorCounters&&typeof a.designatorCounters=="object"){const v=a.designatorCounters;}else mn.current={};if(typeof a.autoAssignDesignators=="boolean"&&Ro(a.autoAssignDesignators),typeof a.useGlobalDesignatorCounters=="boolean"?Ul(a.useGlobalDesignatorCounters):Ul(!1),mn.current={},a.drawing?.grounds){const g=a.drawing.grounds.map(w=>{w.pointId||console.warn("Ground symbol missing pointId - this may cause issues");const C=Yt({x:w.x,y:w.y});return{...w,x:C.x,y:C.y}}).filter(w=>{const C=w.y>=0&&w.x>=0&&typeof w.x=="number"&&typeof w.y=="number"&&!isNaN(w.x)&&!isNaN(w.y)&&isFinite(w.x)&&isFinite(w.y);return C||console.warn(`Filtered out invalid ground symbol at (${w.x}, ${w.y})`),C});Gn(g);for(const w of g)w.pointId&&typeof w.pointId=="number"&&Bf(w.pointId)}let y;if(a.powerBuses&&Array.isArray(a.powerBuses)&&a.powerBuses.length>0?(y=a.powerBuses,yi(y)):(y=[{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}],yi(y)),a.groundBuses&&Array.isArray(a.groundBuses)&&a.groundBuses.length>0?wl(a.groundBuses):wl([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),a.drawing?.powers){const g=a.drawing.powers.map(w=>{w.pointId||console.warn("Power symbol missing pointId - this may cause issues");const C=Yt({x:w.x,y:w.y});return{...w,x:C.x,y:C.y}}).filter(w=>{const C=w.y>=0&&w.x>=0&&typeof w.x=="number"&&typeof w.y=="number"&&!isNaN(w.x)&&!isNaN(w.y)&&isFinite(w.x)&&isFinite(w.y);return C||console.warn(`Filtered out invalid power node at (${w.x}, ${w.y})`),C});ai(g);for(const w of g)w.pointId&&typeof w.pointId=="number"&&Bf(w.pointId)}zl.current=!1}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}},[R,je,Ln,d,P,Uf,rs,cs,nr,ds,us,$a,fs,al,Dl,wa,zo,ko,di,Za,Qa,Ao,Ss,nl,Tl,Ql,il,Pt,rn,yn,Gn,yi,wl,ai,Ba,Yt,Of,ox,Nd,Ro,Ul]),Yo=S.useCallback(async()=>{},[or]),Pr=S.useCallback(async a=>{const r=Na.current;if(!r){console.warn("Cannot load file: no directory handle");return}try{const m=await(await r.getFileHandle(a)).getFile();if(m.size===0){console.warn(`File ${a} is empty, skipping`);const M=Ci.current.filter(H=>H!==a);Vn(M),Ci.current=M;return}const y=await m.text();if(!y||y.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const M=Ci.current.filter(H=>H!==a);Vn(M),Ci.current=M;return}let v;try{v=JSON.parse(y)}catch(C){console.error(`Failed to parse JSON from file ${a}:`,C);const H=Ci.current.filter(Z=>Z!==a);Vn(H),Ci.current=H,await Yo();return}Rs(),Ii(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Tt(new Set),Ct(new Set),vt(new Set),wt(new Set),Aa(),await co(v),mi(a);const w=Ci.current.indexOf(a);w>=0?(sr(w),so.current=w):await Yo(),zl.current=!1}catch(f){console.error("Failed to load file from history:",f);const m=Ci.current;if(m.includes(a)){const y=m.filter(v=>v!==a);Vn(y),Ci.current=y,await Yo()}}},[co,Yo,Aa]);S.useCallback(async()=>{const a=so.current,r=Ci.current;if(a>=0&&a<r.length-1){const f=a+1,m=r[f];m&&await Pr(m)}},[Pr]),S.useCallback(async()=>{const a=so.current,r=Ci.current;if(a<=0||a>=r.length||r.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",r.length);return}if(a>0&&a<r.length&&r.length>0){const f=a-1;if(f>=0&&f<r.length){const m=r[f];m?await Pr(m):(console.warn("No newer file found at index",f),await Yo())}else console.warn("Cannot navigate to newer file: prevIndex",f,"is out of bounds")}},[Pr,Yo]),Oe.useEffect(()=>{Ha.current=Wt},[Wt]);const Xo=Oe.useRef(je),xc=Oe.useRef(Je);Oe.useEffect(()=>{const a=je!==Xo.current;if(R==="draw"&&Xo.current==="trace"&&a){if(Ha.current.length>=2){const r={id:`${Date.now()}-trace-autofinalize`,points:Ha.current,color:X,size:V,layer:xc.current,type:"trace"};Pt(f=>[...f,r]),xc.current==="top"?ya(f=>[...f,r.id]):Yl(f=>[...f,r.id])}Fn([]),_a(!1)}Xo.current=je,xc.current=Je},[je,Je,R,X,V]);const yc=Oe.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);Oe.useEffect(()=>{Wo()},[$e]),Oe.useEffect(()=>{Wo()},[xt,Nt,Ge,cl]);const nt=gs>0,uo=S.useCallback(async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[r]=await a.showOpenFilePicker({multiple:!1}),f=await r.getFile();if(!f.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}Rr(),mi(f.name);const m=await f.text(),y=JSON.parse(m);hc.current=!0;let v=null;try{if(typeof r.getParent=="function")v=await r.getParent();else{console.warn("getParent() not available. Prompting user for directory access...");const C=window;if(typeof C.showDirectoryPicker=="function")v=await C.showDirectoryPicker({startIn:r});else throw new Error("Directory picker not available in this browser")}if(v)try{if((await(await v.getFileHandle(f.name)).getFile()).name!==f.name)throw new Error("Directory verification failed: file name mismatch")}catch(C){throw console.error("Directory verification failed:",C),console.error("The selected directory might not contain the opened file"),new Error("Directory verification failed - selected directory does not contain the opened file")}Jl(v),ro.current=v}catch(C){console.error("Failed to get directory handle from file handle:",C)}finally{setTimeout(()=>{hc.current=!1},1e3)}const g=y.autoSave?.enabled===!0;await co(y);let w;if(y.projectInfo?.name?w=y.projectInfo.name:(w=f.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Cl(w)),si||Cl(w),g&&v){const C=w.replace(/\.json$/i,""),H=Ac(C).replace(/[^a-zA-Z0-9_-]/g,"_");Ql(v),il(H),Na.current=v,Hl.current=H,Jt.current&&(clearInterval(Jt.current),Jt.current=null)}setTimeout(()=>{jl({visible:!0,source:"open",interval:5})},100)}catch(r){if(r?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",r),xs.current?.click()}else xs.current?.click()},[co,si,mi,Cl,Jl,jl,Zn,Ql,il,Rr]),Or=S.useCallback(async()=>{vo({visible:!1}),await Ds(),await uo()},[Ds,uo]),eu=S.useCallback(async()=>{vo({visible:!1}),await uo()},[uo]),tu=S.useCallback(()=>{vo({visible:!1})},[]);Oe.useEffect(()=>{if(Lr.visible){setTimeout(()=>{ur.current?.focus()},0);const a=r=>{r.key==="Enter"?(r.preventDefault(),Or()):r.key==="Escape"&&(r.preventDefault(),vo({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[Lr.visible,Or]);const Go=S.useCallback(async()=>{sd()?vo({visible:!0}):await uo()},[sd,uo]);return i.jsxs("div",{className:"app",children:[i.jsx("header",{className:"app-header",children:i.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.3)"})}),i.jsx(xx,{openMenu:Pd,setOpenMenu:ir,isReadOnlyMode:nt,currentProjectFilePath:or,isProjectActive:!!Ln,onNewProject:Lo,onOpenProject:Go,onSaveProject:Ds,onSaveAs:Qd,onPrint:Gd,hasUnsavedChanges:sd,setNewProjectDialog:Ya,setAutoSaveDialog:La,topImage:x,bottomImage:D,setCurrentTool:W,resetImageTransform:nd,areImagesLocked:vi,setAreImagesLocked:rs,onEnterBoardDimensions:()=>Ja(!0),fileInputTopRef:Gr,fileInputBottomRef:_d,openProjectRef:xs,increaseSize:rc,decreaseSize:cc,brushSize:V,drawingStrokes:$e,selectedIds:ht,selectedComponentIds:gt,selectedPowerIds:Ht,selectedGroundIds:mt,componentsTop:xt,componentsBottom:Nt,powers:ft,grounds:Ge,powerNodeNames:Sr,groundNodeNames:Qc,setSetSizeDialog:Fr,areViasLocked:$n,setAreViasLocked:cs,arePadsLocked:$i,setArePadsLocked:nr,areTestPointsLocked:ba,setAreTestPointsLocked:Hc,areTracesLocked:qn,setAreTracesLocked:ds,areComponentsLocked:Mi,setAreComponentsLocked:us,areGroundNodesLocked:Ui,setAreGroundNodesLocked:$a,arePowerNodesLocked:vn,setArePowerNodesLocked:fs,showTraceCornerDots:br,setShowTraceCornerDots:kn,setSelectedIds:Tt,setSelectedComponentIds:Ct,setSelectedPowerIds:vt,setSelectedGroundIds:wt,selectAllVias:Vd,selectAllTraces:eo,selectAllPads:qc,selectAllComponents:Zc,selectDisconnectedComponents:to,selectAllPowerNodes:Kc,selectAllGroundNodes:wr,selectPowerNodesByName:jr,selectGroundNodesByName:Id,setShowPowerBusManager:Rt,setShowGroundBusManager:Nl,setShowDesignatorManager:aa,toolRegistry:Ot,updateToolSettings:Ir,updateToolLayerSettings:Va,setBrushSize:k,setBrushColor:Be,saveToolSettings:kh,saveToolLayerSettings:Nc,colorPalette:yc,currentTool:R,drawingMode:je,traceToolLayer:dt,padToolLayer:$t,testPointToolLayer:an,componentToolLayer:xn,setTopTraceSize:Pe,setBottomTraceSize:ke,setTopPadSize:Y,setBottomPadSize:N,setTopTestPointSize:gn,setBottomTestPointSize:ki,setTopComponentSize:Qi,setBottomComponentSize:Wl,setComponentConnectionSize:Mc,topTraceColor:A,bottomTraceColor:b,topPadColor:fe,bottomPadColor:O,topTestPointColor:_,bottomTestPointColor:Ue,topComponentColor:Nn,bottomComponentColor:hi,setTopTraceColor:z,setBottomTraceColor:de,setTopPadColor:I,setBottomPadColor:Q,setTopTestPointColor:$,setBottomTestPointColor:Ke,setTopComponentColor:Ri,setBottomComponentColor:ii,setComponentConnectionColor:Ls,saveDefaultSize:qe,saveDefaultColor:ot,menuBarRef:qr,onOpenProjectNotes:Yd,onOpenTransformImages:()=>Yr(!0)}),i.jsx("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:i.jsxs("div",{ref:qa,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[i.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[i.jsxs("button",{onClick:()=>{nt||kr()},onMouseDown:a=>a.currentTarget.blur(),disabled:nt,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="select"?"2px solid #000":"1px solid #ddd",background:R==="select"?"#e6f0ff":"#fff",color:nt?"#999":"#222",outline:"none",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsx(Zg,{size:14}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{nt||(console.log("Via tool clicked"),Bn("via"),W("draw"))},disabled:nt,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="draw"&&je==="via"?"2px solid #000":"1px solid #ddd",background:R==="draw"&&je==="via"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const a=bt.get("via").color;return i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:a,strokeWidth:"3"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:a})]})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:bt.get("via").size})]})]}),i.jsxs("button",{ref:ao,onClick:()=>{nt||(console.log("Pad tool clicked"),Bn("pad"),W("draw"),io(!0),jn($t||"top"),setTimeout(()=>fc(),0))},disabled:nt,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="draw"&&je==="pad"?"2px solid #000":"1px solid #ddd",background:R==="draw"&&je==="pad"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=($t||"top")==="top"?"padTop":"padBottom",f=bt.get(r).color,m=14,y=(24-m)/2,v=(24-m)/2;return i.jsx("rect",{x:y,y:v,width:m,height:m,fill:f})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(R==="draw"&&je==="pad"&&Mt.toolInstanceId&&(Mt.toolInstanceId==="padTop"||Mt.toolInstanceId==="padBottom"))return Mt.size;const a=$t==="top"?"padTop":"padBottom";return bt.get(a).size})()})]})]}),i.jsxs("button",{ref:Da,onClick:()=>{nt||(console.log("Test Point tool clicked"),Bn("testPoint"),W("draw"),ei(!0),jn(an||"top"),setTimeout(()=>pc(),0))},disabled:nt,title:"Draw Test Points (Y)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="draw"&&je==="testPoint"?"2px solid #000":"1px solid #ddd",background:R==="draw"&&je==="testPoint"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=(an||"top")==="top"?"testPointTop":"testPointBottom",f=bt.get(r).color,m=14,y=12,v=12;return i.jsx("path",{d:`M ${y} ${v-m/2} L ${y+m/2} ${v} L ${y} ${v+m/2} L ${y-m/2} ${v} Z`,fill:f,stroke:"#000",strokeWidth:"1.5"})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Y"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(R==="draw"&&je==="testPoint"&&Mt.toolInstanceId&&(Mt.toolInstanceId==="testPointTop"||Mt.toolInstanceId==="testPointBottom"))return Mt.size;const a=an==="top"?"testPointTop":"testPointBottom";return bt.get(a).size})()})]})]}),i.jsxs("button",{ref:Io,onClick:()=>{nt||(console.log("Trace tool clicked"),Bn("trace"),W("draw"),ra(!0),jn(dt||"top"),setTimeout(()=>uc(),0))},disabled:nt,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="draw"&&je==="trace"?"2px solid #000":"1px solid #ddd",background:R==="draw"&&je==="trace"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsx(Kg,{size:14,color:(()=>{const r=(dt||"top")==="top"?"traceTop":"traceBottom";return bt.get(r).color})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=dt==="top"?"traceTop":"traceBottom";return bt.get(a).size})()})]})]}),i.jsxs("button",{ref:Jc,onClick:()=>{nt||(console.log("Component tool clicked"),W("component"),Hi(!0),ln(!1),Gt(null))},disabled:nt,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="component"?"2px solid #000":"1px solid #ddd",background:R==="component"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[(()=>{const r=(xn||"top")==="top"?"componentTop":"componentBottom",f=bt.get(r).color;return it?i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:f,strokeWidth:"1.5"}),i.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:f,fontWeight:"bold",fontFamily:"monospace",children:Pf(it)})]}):i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:f,stroke:f,strokeWidth:"0.5"}),i.jsxs("g",{stroke:f,fill:"none",strokeWidth:"1.5",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),i.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:f})]})]})})(),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=xn==="top"?"componentTop":"componentBottom";return bt.get(a).size})()})]})]}),i.jsxs("button",{ref:bn,onClick:()=>{nt||(console.log("Power tool clicked"),W("power"))},disabled:nt,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="power"?"2px solid #000":"1px solid #ddd",background:R==="power"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsx("span",{style:{color:bt.get("power").color,fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:bt.get("power").size})]})]}),i.jsxs("button",{ref:Cr,onClick:()=>{nt||(console.log("Ground tool clicked"),W("ground"))},disabled:nt,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="ground"?"2px solid #000":"1px solid #ddd",background:R==="ground"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:i.jsxs("g",{stroke:bt.get("ground").color,strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),i.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),i.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),i.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:bt.get("ground").size})]})]}),i.jsx("div",{style:{height:72}}),i.jsxs("button",{onClick:()=>{nt||W(a=>a==="pan"?"draw":"pan")},disabled:nt,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:R==="pan"?"2px solid #000":"1px solid #ddd",background:R==="pan"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),i.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),i.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{rr(!1),W(a=>a==="magnify"?"draw":"magnify")},title:`${kl?"Zoom Out":"Zoom In"} (Z)`,style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="magnify"?"2px solid #000":"1px solid #ddd",background:R==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),kl?i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),i.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Z"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{nt||(W("center"),ta(!0),Si.current&&clearTimeout(Si.current),Si.current=setTimeout(()=>{ta(!1),W("select"),_t(void 0)},2e3))},disabled:nt,title:"Set View (X) - Press 0-9 to Set View",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:R==="center"?"2px solid #000":"1px solid #ddd",background:R==="center"?"#e6f0ff":"#fff",color:nt?"#999":"#222",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"22",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"12",x2:"10",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"14",y1:"12",x2:"22",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"X"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>{nt||hs(a=>!a)},disabled:nt,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:nt?"not-allowed":"pointer",opacity:nt?.5:1},children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[i.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Ic&&i.jsx("div",{ref:Ed,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:yc.map(a=>i.jsx("div",{onClick:()=>{Be(a),hs(!1);try{let f=null;R==="draw"&&je==="via"?f="via":R==="draw"&&je==="pad"?f=($t||"top")==="bottom"?"padBottom":"padTop":R==="draw"&&je==="testPoint"?f=(an||"top")==="bottom"?"testPointBottom":"testPointTop":R==="draw"&&je==="trace"?f=(dt||"top")==="bottom"?"traceBottom":"traceTop":R==="component"?f=(xn||"top")==="bottom"?"componentBottom":"componentTop":R==="power"?f="power":R==="ground"&&(f="ground"),f&&bt.setColor(f,a)}catch(f){console.error("Error updating tool instance color:",f)}const r=el(Ot);if(r)if(R==="draw"&&je==="trace"){const f=dt||"top",y=r.layerSettings.get(f)?.size||r.settings.size,v={color:a,size:y};Va(r.id,f,v),Nc(r.id),f==="top"?(z(a),ot("trace",a,"top")):(de(a),ot("trace",a,"bottom"))}else if(R==="draw"&&je==="pad"){const f=$t||"top",y=r.layerSettings.get(f)?.size||r.settings.size,v={color:a,size:y};Va(r.id,f,v),Nc(r.id),f==="top"?(I(a),ot("pad",a,"top")):(Q(a),ot("pad",a,"bottom"))}else if(R==="draw"&&je==="testPoint"){const f=an||"top",y=r.layerSettings.get(f)?.size||r.settings.size,v={color:a,size:y};Va(r.id,f,v),Nc(r.id),f==="top"?($(a),ot("testPoint",a,"top")):(Ke(a),ot("testPoint",a,"bottom"))}else if(R==="component"){const f=xn||"top",y=r.layerSettings.get(f)?.size||r.settings.size,v={color:a,size:y};Va(r.id,f,v),Nc(r.id),f==="top"?(Ri(a),ot("component",a,"top")):(ii(a),ot("component",a,"bottom"))}else{const f={...r.settings,color:a};Ir(r.id,f),kh(r.id,a,r.settings.size),R==="draw"&&je==="via"&&ot("via",a)}ot("brush",a),ht.size>0&&Pt(f=>f.map(m=>ht.has(m.id)?(m.type==="via"?(ot("via",a),on(y=>{const v=new Map(y),g=v.get("via");return g&&v.set("via",{...g,settings:{...g.settings,color:a}}),v})):m.type==="pad"?(ot("pad",a),on(y=>{const v=new Map(y),g=v.get("pad");return g&&v.set("pad",{...g,settings:{...g.settings,color:a}}),v})):m.type==="trace"&&ot("trace",a,m.layer),{...m,color:a}):m)),gt.size>0&&(ot("component",a),rn(f=>f.map(m=>gt.has(m.id)?{...m,color:a}:m)),yn(f=>f.map(m=>gt.has(m.id)?{...m,color:a}:m))),Ht.size>0&&ai(f=>f.map(m=>Ht.has(m.id)?{...m,color:a}:m)),mt.size>0&&Gn(f=>f.map(m=>mt.has(m.id)?{...m,color:a}:m))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===X?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),R==="draw"&&je==="trace"&&sa&&i.jsxs("div",{ref:Ho,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:dt==="top",onChange:()=>{console.log("Trace tool Top clicked"),xa.current="top",On("top"),jn("top"),Be(A),k(Ae),on(a=>{const r=new Map(a),f=r.get("trace");return f&&r.set("trace",{...f,settings:{color:A,size:Ae}}),r}),ra(!1),ia(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:dt==="bottom",onChange:()=>{console.log("Trace tool Bottom clicked"),xa.current="bottom",On("bottom"),jn("bottom"),Be(b),k(Ce),on(a=>{const r=new Map(a),f=r.get("trace");return f&&r.set("trace",{...f,settings:{color:b,size:Ce}}),r}),ra(!1),Sa(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),R==="draw"&&je==="pad"&&zs&&i.jsxs("div",{ref:dl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:$t==="top",onChange:()=>{console.log("Pad tool Top clicked"),Ki.current="top",go("top"),jn("top");const a=bt.get("padTop");Be(a.color),k(a.size),on(r=>{const f=new Map(r),m=f.get("pad");return m&&f.set("pad",{...m,settings:{color:a.color,size:a.size}}),f}),io(!1),ia(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:$t==="bottom",onChange:()=>{console.log("Pad tool Bottom clicked"),Ki.current="bottom",go("bottom"),jn("bottom");const a=bt.get("padBottom");Be(a.color),k(a.size),on(r=>{const f=new Map(r),m=f.get("pad");return m&&f.set("pad",{...m,settings:{color:a.color,size:a.size}}),f}),io(!1),Sa(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),R==="draw"&&je==="testPoint"&&Ti&&i.jsxs("div",{ref:Eo,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"testPointToolLayer",checked:an==="top",onChange:()=>{console.log("Test Point tool Top clicked"),Ji.current="top",Gs("top"),jn("top"),Be(_),k(ct),on(a=>{const r=new Map(a),f=r.get("testPoint");return f&&r.set("testPoint",{...f,settings:{color:_,size:ct}}),r}),ei(!1),ia(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"testPointToolLayer",checked:an==="bottom",onChange:()=>{console.log("Test Point tool Bottom clicked"),Ji.current="bottom",Gs("bottom"),jn("bottom"),Be(Ue),k(We),on(a=>{const r=new Map(a),f=r.get("testPoint");return f&&r.set("testPoint",{...f,settings:{color:Ue,size:We}}),r}),ei(!1),Sa(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),pr&&R==="power"&&i.jsxs("div",{ref:Tr,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),st.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...st].sort((a,r)=>{const f=v=>{const g=v.match(/([+-]?)(\d+\.?\d*)/);if(g){const w=g[1]||"+",C=parseFloat(g[2]);return{absValue:Math.abs(C),isNegative:w==="-",original:v}}return{absValue:1/0,isNegative:!1,original:v}},m=f(a.voltage),y=f(r.voltage);return m.absValue!==y.absValue?m.absValue-y.absValue:m.isNegative!==y.isNegative?m.isNegative?-1:1:0}).map(a=>i.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),gr(a.id),Yi(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),i.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Yi(!1),Rt(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Yi(!1),gr(null),W("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),yr&&R==="ground"&&i.jsxs("div",{ref:Pl,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),bi.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...bi].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=a.id==="groundbus-earth",f=Oi===a.id;return i.jsx("button",{onClick:m=>{m.preventDefault(),m.stopPropagation(),Ml(a.id),rl(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:f?"#e0e0e0":"#f5f5f5",border:f?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),i.jsx("div",{children:i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name})})]})},a.id)}),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),rl(!1),Nl(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),rl(!1),Ml(null),W("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),R==="component"&&lo&&i.jsxs("div",{ref:qi,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:Je==="top",onClick:()=>{console.log("Component tool Top clicked"),Sl.current="top",Ll("top"),jn("top"),Be(Nn),k(gi),on(a=>{const r=new Map(a),f=r.get("component");return f&&r.set("component",{...f,settings:{color:Nn,size:gi}}),r}),Hi(!1),ia(!0),ln(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:Je==="bottom",onClick:()=>{console.log("Component tool Bottom clicked"),Sl.current="bottom",Ll("bottom"),jn("bottom"),Be(hi),k(Vi),on(a=>{const r=new Map(a),f=r.get("component");return f&&r.set("component",{...f,settings:{color:hi,size:Vi}}),r}),Hi(!1),Sa(!0),ln(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),R==="component"&&ui&&i.jsxs("div",{ref:Vo,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(nx).map(([a,r])=>{const f=_n.has(a);return i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:m=>{m.preventDefault(),m.stopPropagation(),tc(y=>{const v=new Set(y);return v.has(a)?v.delete(a):v.add(a),v})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:f?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[i.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:f?"":""}),a]}),f&&i.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(r).map(([m,y])=>i.jsxs("div",{style:{marginBottom:"2px"},children:[i.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[m,":"]}),y.map(v=>{const g=Ud[v];return g?i.jsxs("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),Gt(v),ln(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:it===v?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[g.prefix.join(", ")," - ",Md(v)]},v):null})]},m))})]},a)}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),ln(!1),W("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),i.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[i.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),i.jsxs("div",{onClick:()=>jn("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:At==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:ri,onChange:a=>ia(a.target.checked)})})]}),i.jsx("canvas",{ref:fr,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsxs("div",{onClick:()=>jn("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:At==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:ll,onChange:a=>Sa(a.target.checked)})})]}),i.jsx("canvas",{ref:Co,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Jn,onChange:a=>al(a.target.checked)}),i.jsx("span",{children:"Vias"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:zn,onChange:a=>Dl(a.target.checked)}),i.jsx("span",{children:"Pads (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ol,onChange:a=>wi(a.target.checked)}),i.jsx("span",{children:"Test Points (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Bi,onChange:a=>zo(a.target.checked)}),i.jsx("span",{children:"Traces (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Wn,onChange:a=>di(a.target.checked)}),i.jsx("span",{children:"Components (Top)"})]}),i.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ci,onChange:a=>wa(a.target.checked)}),i.jsx("span",{children:"Pads (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:In,onChange:a=>Al(a.target.checked)}),i.jsx("span",{children:"Test Points (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Pi,onChange:a=>ko(a.target.checked)}),i.jsx("span",{children:"Traces (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Yn,onChange:a=>Za(a.target.checked)}),i.jsx("span",{children:"Components (Bottom)"})]}),i.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:la,onChange:a=>Qa(a.target.checked)}),i.jsx("span",{children:"Power"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:cl,onChange:a=>Ao(a.target.checked)}),i.jsx("span",{children:"Ground"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ms,onChange:a=>Ss(a.target.checked)}),i.jsx("span",{children:"Connections"})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Jn&&zn&&ci&&ol&&In&&Bi&&Pi&&Wn&&Yn&&la&&cl&&ms,onChange:a=>{const r=a.target.checked;al(r),Dl(r),wa(r),wi(r),Al(r),zo(r),ko(r),di(r),Za(r),Qa(r),Ao(r),Ss(r)}}),i.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",p,"%"]}),i.jsxs("label",{className:"radio-label",style:{margin:0},children:[i.jsx("input",{type:"checkbox",checked:ce,onChange:a=>{const r=a.target.checked;r?(ia(!0),Sa(!0)):(E(50),W("select")),xe(r)}}),i.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:p,onChange:a=>E(Number(a.target.value)),onDoubleClick:()=>Xd("transparency"),className:"slider",style:{width:"100%",marginTop:3}}),ce&&i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Cycle Speed: ",(te/1e3).toFixed(1),"s"]}),i.jsx("input",{type:"range",min:"500",max:"8000",step:"100",value:8500-te,onChange:a=>ze(8500-Number(a.target.value)),onDoubleClick:()=>ze(2e3),className:"slider",style:{width:"100%",marginTop:3}})]})]})]}),i.jsx(yx,{visible:!x&&!D}),i.jsx("canvas",{ref:Mn,width:Rl.width,height:Rl.height,tabIndex:0,onMouseDown:ic,onMouseMove:ac,onMouseUp:oc,onMouseLeave:oc,onWheel:zr,onDoubleClick:lc,className:`pcb-canvas ${R==="transform"?"transform-cursor":R==="draw"?"draw-cursor":R==="erase"?"erase-cursor":"default-cursor"}`,style:{position:"absolute",left:"244px",top:"6px",...Ia?{cursor:Ia}:R==="pan"?{cursor:Li?"grabbing":"grab"}:{},width:`${Rl.width}px`,height:`${Rl.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),i.jsx(zx,{componentEditor:xo,setComponentEditor:yo,componentsTop:xt,componentsBottom:Nt,setComponentsTop:rn,setComponentsBottom:yn,connectingPin:Cn,setConnectingPin:Wa,componentDialogPosition:Wi,setComponentDialogPosition:Fi,isDraggingDialog:Ks,setIsDraggingDialog:Js,dialogDragOffset:ss,setDialogDragOffset:er,areComponentsLocked:Mi,setSelectedComponentIds:Ct,setNotesDialogVisible:Ca}),jo&&cr&&(()=>{const a=jo.component,r=jo.layer;if(!a)return null;const f=a.componentType||"Component",m=a.componentType==="IntegratedCircuit"&&"icType"in a?a.icType:null,y=Wd(a);return i.jsxs("div",{style:{position:"fixed",left:`${jo.x+10}px`,top:`${jo.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:Md(f)}),i.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["Layer: ",r==="top"?"Top":"Bottom"]}),m&&i.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["IC Type: ",m]}),y.length>0&&i.jsx("div",{style:{marginBottom:"4px"},children:y.map((v,g)=>i.jsx("div",{style:{color:"#e0e0e0",fontSize:"11px",marginBottom:"2px"},children:v},g))}),a.description&&i.jsx("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:a.description}),a.notes&&i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.notes})]})})(),To&&cr&&(()=>{const a=To.stroke;return a.notes?i.jsxs("div",{style:{position:"fixed",left:`${To.x+10}px`,top:`${To.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"Test Point"}),i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.notes})]}):null})(),oi&&oi.visible&&(()=>{if(!ft.find(f=>f.id===oi.id))return null;const r=st.find(f=>f.id===oi.powerBusId);return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),i.jsx("button",{onClick:()=>Fa(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:r?`${r.name} (${r.voltage})`:"Unknown"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`power-layer-${oi.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),i.jsxs("select",{id:`power-layer-${oi.id}`,name:`power-layer-${oi.id}`,value:oi.layer,onChange:f=>Fa({...oi,layer:f.target.value}),disabled:vn,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:vn?.6:1},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:oi.x.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:oi.y.toFixed(2)})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[i.jsx("button",{onClick:()=>Fa(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),i.jsx("button",{onClick:()=>{vn||(ai(f=>f.map(m=>m.id===oi.id?{...m,layer:oi.layer}:m)),Fa(null))},disabled:vn,style:{padding:"2px 5px",background:vn?"#f5f5f5":"#0b5fff",color:vn?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:vn?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!x&&!D&&i.jsx("div",{className:"placeholder"})]})}),i.jsx(kx,{visible:pn,onClose:()=>Rt(!1),powerBuses:st,setPowerBuses:yi,editingPowerBusId:Ka,setEditingPowerBusId:sl,powers:ft}),i.jsx(Rx,{visible:vs,onClose:()=>Nl(!1),groundBuses:bi,setGroundBuses:wl,editingGroundBusId:Yc,setEditingGroundBusId:xr,grounds:Ge}),i.jsx(Dx,{visible:Zr,onClose:()=>aa(!1),autoAssignDesignators:Xi,setAutoAssignDesignators:Ro,useGlobalDesignatorCounters:Do,setUseGlobalDesignatorCounters:Ul}),i.jsx("input",{ref:Gr,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&Rn(r,"top"),a.target.value=""}}),i.jsx("input",{ref:_d,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&Rn(r,"bottom"),a.target.value=""}}),i.jsx("input",{ref:xs,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const r=a.target.files?.[0];if(r)try{mi(r.name);const f=await r.text(),m=JSON.parse(f);await co(m);let y;m.projectInfo?.name?y=m.projectInfo.name:(y=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Cl(y)),si||Cl(y),setTimeout(()=>{jl({visible:!0,source:"open",interval:5})},100)}catch(f){console.error("Failed to open project",f),alert("Failed to open project file. See console for details.")}a.target.value=""}}),i.jsx(vx,{visible:ps.visible,selectedIds:ht,selectedComponentIds:gt,selectedPowerIds:Ht,selectedGroundIds:mt,drawingStrokes:$e,componentsTop:xt,componentsBottom:Nt,powers:ft,grounds:Ge,powerBuses:st,onClose:()=>{bo({visible:!1,text:""})},setComponentsTop:rn,setComponentsBottom:yn,determineViaType:Gi,determinePadType:Bl,determineTestPointType:ji,onFindComponent:no,onOpenNotesDialog:()=>Ca(!0),position:_i,isDragging:No,onDragStart:a=>{_i&&(Mo({x:a.clientX-_i.x,y:a.clientY-_i.y}),Qr(!0),a.preventDefault())}}),i.jsx(mx,{visible:Xc,selectedIds:ht,selectedComponentIds:gt,selectedPowerIds:Ht,selectedGroundIds:mt,drawingStrokes:$e,componentsTop:xt,componentsBottom:Nt,powers:ft,grounds:Ge,powerBuses:st,onClose:()=>{Ca(!1)},setComponentsTop:rn,setComponentsBottom:yn,setDrawingStrokes:Pt,setPowerSymbols:ai,setGroundSymbols:Gn,determineViaType:Gi,determinePadType:Bl,determineTestPointType:ji,position:ws,isDragging:za,onDragStart:a=>{ws&&(Gc({x:a.clientX-ws.x,y:a.clientY-ws.y}),Kr(!0),a.preventDefault())}}),i.jsx(Sx,{visible:js,projectNotes:oa,setProjectNotes:Bo,onClose:()=>{Po(!1)},position:Oo,isDragging:ka,onDragStart:a=>{Oo?(Jr({x:a.clientX-Oo.x,y:a.clientY-Oo.y}),Ra(!0),a.preventDefault()):(Ts({x:a.clientX-300,y:a.clientY-200}),Jr({x:300,y:200}),Ra(!0),a.preventDefault())}}),i.jsx(Dh,{visible:Vc.visible,title:"New Project",message:"You have unsaved changes. Do you want to save your project before creating a new one?",onYes:gc,onNo:Br,onCancel:dd,yesButtonRef:dr}),i.jsx(Dh,{visible:Lr.visible,title:"Open Project",message:"You have unsaved changes. Do you want to save your project before opening another one?",onYes:Or,onNo:eu,onCancel:tu,yesButtonRef:ur}),Qt.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Ur()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),i.jsx("input",{ref:Lc,type:"text",value:Qt.projectName,onChange:a=>{Xa(r=>({...r,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),rd()):a.key==="Escape"&&(a.preventDefault(),Ur())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),Qt.projectName&&(()=>{const a=Qt.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const r=[...new Set(a)];return i.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",r.map(f=>`"${f}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:Qt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Qt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Zd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Qt.projectName&&Qt.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),i.jsx("div",{style:{color:"#4CAF50"},children:(()=>{if(!Qt.projectName||!Qt.locationPath)return"";const r=Qt.projectName.trim().replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",f=`${r}.json`;return Qt.locationPath===r?`${Qt.locationPath}/${f}`:`${Qt.locationPath}/${r}/${f}`})()})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:Ur,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:rd,disabled:!Qt.projectName.trim()||!Qt.locationHandle,style:{padding:"8px 16px",background:!Qt.projectName.trim()||!Qt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Qt.projectName.trim()||!Qt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Qt.projectName.trim()||!Qt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Qt.projectName.trim()||!Qt.locationHandle?.6:1},children:"Create"})]})]})}),Kt.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&cd()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),i.jsx("input",{ref:na,type:"text",value:Kt.filename,onChange:a=>{mo(r=>({...r,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Jd()):a.key==="Escape"&&(a.preventDefault(),cd())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:Kt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Kt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Kd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Kt.filename&&Kt.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[Kt.locationPath,"/",Kt.filename.endsWith(".json")?Kt.filename:`${Kt.filename}.json`]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:cd,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:Jd,disabled:!Kt.filename.trim()||!Kt.locationHandle,style:{padding:"8px 16px",background:!Kt.filename.trim()||!Kt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Kt.filename.trim()||!Kt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Kt.filename.trim()||!Kt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Kt.filename.trim()||!Kt.locationHandle?.6:1},children:"Save"})]})]})}),i.jsx(bx,{visible:lr.visible,title:lr.title,message:lr.message,onClose:()=>ql({visible:!1,title:"",message:""})}),i.jsx(wx,{visible:ec,dimensions:Cs,onSave:a=>{_o(a)},onClose:()=>Ja(!1)}),i.jsx(jx,{visible:Od,onClose:()=>Yr(!1),topImage:x,bottomImage:D,selectedImageForTransform:At,setSelectedImageForTransform:xi,transformMode:vl,setTransformMode:ga,updateImageTransform:sc,resetImageTransform:nd,setCurrentTool:W,isGrayscale:ne,setIsGrayscale:Se,areImagesLocked:vi}),i.jsx(Ax,{visible:Wr.visible,size:Wr.size,onSizeChange:a=>Fr(r=>({...r,size:a})),onApply:Ld,onCancel:()=>Fr({visible:!1,size:6})}),i.jsx(Nx,{visible:Ec.visible,interval:Ec.interval,onIntervalChange:a=>La({visible:!0,interval:a}),onApply:()=>ld(Ec.interval,!1),onCancel:()=>La({visible:!1,interval:5})}),i.jsx(Mx,{visible:$r.visible,interval:$r.interval,onIntervalChange:a=>jl({...$r,interval:a}),onEnable:()=>ld($r.interval,!0),onSkip:id}),i.jsx("div",{style:{position:"fixed",bottom:8,right:8,zIndex:100},children:i.jsxs("button",{onClick:()=>{window.open("https://github.com/sponsors/pgiacalo","_blank","noopener,noreferrer")},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)",border:"1px solid rgba(27, 31, 36, 0.15)",borderRadius:6,cursor:"pointer",fontSize:12,fontWeight:500,color:"#24292f",boxShadow:"0 1px 0 rgba(27, 31, 36, 0.04)",transition:"background 0.2s"},onMouseEnter:a=>{a.currentTarget.style.background="linear-gradient(180deg, #f3f4f6 0%, #e5e6e9 100%)"},onMouseLeave:a=>{a.currentTarget.style.background="linear-gradient(180deg, #f6f8fa 0%, #ebecef 100%)"},title:"Support this project on GitHub Sponsors",children:[i.jsx("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"#bf3989","aria-hidden":"true",children:i.jsx("path",{d:"M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.749.749 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5z"})}),"Sponsor"]})})]})}Fg.createRoot(document.getElementById("root")).render(i.jsx(S.StrictMode,{children:i.jsx(Xx,{})}));
