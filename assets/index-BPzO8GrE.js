(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))f(_);new MutationObserver(_=>{for(const Q of _)if(Q.type==="childList")for(const je of Q.addedNodes)je.tagName==="LINK"&&je.rel==="modulepreload"&&f(je)}).observe(document,{childList:!0,subtree:!0});function v(_){const Q={};return _.integrity&&(Q.integrity=_.integrity),_.referrerPolicy&&(Q.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?Q.credentials="include":_.crossOrigin==="anonymous"?Q.credentials="omit":Q.credentials="same-origin",Q}function f(_){if(_.ep)return;_.ep=!0;const Q=v(_);fetch(_.href,Q)}})();function Dg(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Xu={exports:{}},Hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih;function Ag(){if(ih)return Hc;ih=1;var c=Symbol.for("react.transitional.element"),h=Symbol.for("react.fragment");function v(f,_,Q){var je=null;if(Q!==void 0&&(je=""+Q),_.key!==void 0&&(je=""+_.key),"key"in _){Q={};for(var Te in _)Te!=="key"&&(Q[Te]=_[Te])}else Q=_;return _=Q.ref,{$$typeof:c,type:f,key:je,ref:_!==void 0?_:null,props:Q}}return Hc.Fragment=h,Hc.jsx=v,Hc.jsxs=v,Hc}var ah;function Ng(){return ah||(ah=1,Xu.exports=Ag()),Xu.exports}var l=Ng(),Gu={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh;function Mg(){if(oh)return bt;oh=1;var c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),je=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),me=Symbol.for("react.activity"),we=Symbol.iterator;function He(R){return R===null||typeof R!="object"?null:(R=we&&R[we]||R["@@iterator"],typeof R=="function"?R:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ae=Object.assign,Be={};function de(R,O,pe){this.props=R,this.context=O,this.refs=Be,this.updater=pe||q}de.prototype.isReactComponent={},de.prototype.setState=function(R,O){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,O,"setState")},de.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function B(){}B.prototype=de.prototype;function V(R,O,pe){this.props=R,this.context=O,this.refs=Be,this.updater=pe||q}var it=V.prototype=new B;it.constructor=V,Ae(it,de.prototype),it.isPureReactComponent=!0;var I=Array.isArray;function j(){}var u={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function H(R,O,pe){var Ne=pe.ref;return{$$typeof:c,type:R,key:O,ref:Ne!==void 0?Ne:null,props:pe}}function fe(R,O){return H(R.type,O,R.props)}function ee(R){return typeof R=="object"&&R!==null&&R.$$typeof===c}function ce(R){var O={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(pe){return O[pe]})}var Se=/\/+/g;function Pe(R,O){return typeof R=="object"&&R!==null&&R.key!=null?ce(""+R.key):O.toString(36)}function Re(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(j,j):(R.status="pending",R.then(function(O){R.status==="pending"&&(R.status="fulfilled",R.value=O)},function(O){R.status==="pending"&&(R.status="rejected",R.reason=O)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function U(R,O,pe,Ne,$e){var ut=typeof R;(ut==="undefined"||ut==="boolean")&&(R=null);var ft=!1;if(R===null)ft=!0;else switch(ut){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(R.$$typeof){case c:case h:ft=!0;break;case ye:return ft=R._init,U(ft(R._payload),O,pe,Ne,$e)}}if(ft)return $e=$e(R),ft=Ne===""?"."+Pe(R,0):Ne,I($e)?(pe="",ft!=null&&(pe=ft.replace(Se,"$&/")+"/"),U($e,O,pe,"",function(Rl){return Rl})):$e!=null&&(ee($e)&&($e=fe($e,pe+($e.key==null||R&&R.key===$e.key?"":(""+$e.key).replace(Se,"$&/")+"/")+ft)),O.push($e)),1;ft=0;var fn=Ne===""?".":Ne+":";if(I(R))for(var Ut=0;Ut<R.length;Ut++)Ne=R[Ut],ut=fn+Pe(Ne,Ut),ft+=U(Ne,O,pe,ut,$e);else if(Ut=He(R),typeof Ut=="function")for(R=Ut.call(R),Ut=0;!(Ne=R.next()).done;)Ne=Ne.value,ut=fn+Pe(Ne,Ut++),ft+=U(Ne,O,pe,ut,$e);else if(ut==="object"){if(typeof R.then=="function")return U(Re(R),O,pe,Ne,$e);throw O=String(R),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return ft}function ne(R,O,pe){if(R==null)return R;var Ne=[],$e=0;return U(R,Ne,"","",function(ut){return O.call(pe,ut,$e++)}),Ne}function ze(R){if(R._status===-1){var O=R._result;O=O(),O.then(function(pe){(R._status===0||R._status===-1)&&(R._status=1,R._result=pe)},function(pe){(R._status===0||R._status===-1)&&(R._status=2,R._result=pe)}),R._status===-1&&(R._status=0,R._result=O)}if(R._status===1)return R._result.default;throw R._result}var J=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},he={map:ne,forEach:function(R,O,pe){ne(R,function(){O.apply(this,arguments)},pe)},count:function(R){var O=0;return ne(R,function(){O++}),O},toArray:function(R){return ne(R,function(O){return O})||[]},only:function(R){if(!ee(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return bt.Activity=me,bt.Children=he,bt.Component=de,bt.Fragment=v,bt.Profiler=_,bt.PureComponent=V,bt.StrictMode=f,bt.Suspense=g,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,bt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return u.H.useMemoCache(R)}},bt.cache=function(R){return function(){return R.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(R,O,pe){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var Ne=Ae({},R.props),$e=R.key;if(O!=null)for(ut in O.key!==void 0&&($e=""+O.key),O)!k.call(O,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&O.ref===void 0||(Ne[ut]=O[ut]);var ut=arguments.length-2;if(ut===1)Ne.children=pe;else if(1<ut){for(var ft=Array(ut),fn=0;fn<ut;fn++)ft[fn]=arguments[fn+2];Ne.children=ft}return H(R.type,$e,Ne)},bt.createContext=function(R){return R={$$typeof:je,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:Q,_context:R},R},bt.createElement=function(R,O,pe){var Ne,$e={},ut=null;if(O!=null)for(Ne in O.key!==void 0&&(ut=""+O.key),O)k.call(O,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&($e[Ne]=O[Ne]);var ft=arguments.length-2;if(ft===1)$e.children=pe;else if(1<ft){for(var fn=Array(ft),Ut=0;Ut<ft;Ut++)fn[Ut]=arguments[Ut+2];$e.children=fn}if(R&&R.defaultProps)for(Ne in ft=R.defaultProps,ft)$e[Ne]===void 0&&($e[Ne]=ft[Ne]);return H(R,ut,$e)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(R){return{$$typeof:Te,render:R}},bt.isValidElement=ee,bt.lazy=function(R){return{$$typeof:ye,_payload:{_status:-1,_result:R},_init:ze}},bt.memo=function(R,O){return{$$typeof:P,type:R,compare:O===void 0?null:O}},bt.startTransition=function(R){var O=u.T,pe={};u.T=pe;try{var Ne=R(),$e=u.S;$e!==null&&$e(pe,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(j,J)}catch(ut){J(ut)}finally{O!==null&&pe.types!==null&&(O.types=pe.types),u.T=O}},bt.unstable_useCacheRefresh=function(){return u.H.useCacheRefresh()},bt.use=function(R){return u.H.use(R)},bt.useActionState=function(R,O,pe){return u.H.useActionState(R,O,pe)},bt.useCallback=function(R,O){return u.H.useCallback(R,O)},bt.useContext=function(R){return u.H.useContext(R)},bt.useDebugValue=function(){},bt.useDeferredValue=function(R,O){return u.H.useDeferredValue(R,O)},bt.useEffect=function(R,O){return u.H.useEffect(R,O)},bt.useEffectEvent=function(R){return u.H.useEffectEvent(R)},bt.useId=function(){return u.H.useId()},bt.useImperativeHandle=function(R,O,pe){return u.H.useImperativeHandle(R,O,pe)},bt.useInsertionEffect=function(R,O){return u.H.useInsertionEffect(R,O)},bt.useLayoutEffect=function(R,O){return u.H.useLayoutEffect(R,O)},bt.useMemo=function(R,O){return u.H.useMemo(R,O)},bt.useOptimistic=function(R,O){return u.H.useOptimistic(R,O)},bt.useReducer=function(R,O,pe){return u.H.useReducer(R,O,pe)},bt.useRef=function(R){return u.H.useRef(R)},bt.useState=function(R){return u.H.useState(R)},bt.useSyncExternalStore=function(R,O,pe){return u.H.useSyncExternalStore(R,O,pe)},bt.useTransition=function(){return u.H.useTransition()},bt.version="19.2.0",bt}var sh;function nf(){return sh||(sh=1,Gu.exports=Mg()),Gu.exports}var T=nf();const We=Dg(T);var $u={exports:{}},Ec={},Fu={exports:{}},Lu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh;function Ug(){return rh||(rh=1,(function(c){function h(U,ne){var ze=U.length;U.push(ne);e:for(;0<ze;){var J=ze-1>>>1,he=U[J];if(0<_(he,ne))U[J]=ne,U[ze]=he,ze=J;else break e}}function v(U){return U.length===0?null:U[0]}function f(U){if(U.length===0)return null;var ne=U[0],ze=U.pop();if(ze!==ne){U[0]=ze;e:for(var J=0,he=U.length,R=he>>>1;J<R;){var O=2*(J+1)-1,pe=U[O],Ne=O+1,$e=U[Ne];if(0>_(pe,ze))Ne<he&&0>_($e,pe)?(U[J]=$e,U[Ne]=ze,J=Ne):(U[J]=pe,U[O]=ze,J=O);else if(Ne<he&&0>_($e,ze))U[J]=$e,U[Ne]=ze,J=Ne;else break e}}return ne}function _(U,ne){var ze=U.sortIndex-ne.sortIndex;return ze!==0?ze:U.id-ne.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var Q=performance;c.unstable_now=function(){return Q.now()}}else{var je=Date,Te=je.now();c.unstable_now=function(){return je.now()-Te}}var g=[],P=[],ye=1,me=null,we=3,He=!1,q=!1,Ae=!1,Be=!1,de=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function it(U){for(var ne=v(P);ne!==null;){if(ne.callback===null)f(P);else if(ne.startTime<=U)f(P),ne.sortIndex=ne.expirationTime,h(g,ne);else break;ne=v(P)}}function I(U){if(Ae=!1,it(U),!q)if(v(g)!==null)q=!0,j||(j=!0,ce());else{var ne=v(P);ne!==null&&Re(I,ne.startTime-U)}}var j=!1,u=-1,k=5,H=-1;function fe(){return Be?!0:!(c.unstable_now()-H<k)}function ee(){if(Be=!1,j){var U=c.unstable_now();H=U;var ne=!0;try{e:{q=!1,Ae&&(Ae=!1,B(u),u=-1),He=!0;var ze=we;try{t:{for(it(U),me=v(g);me!==null&&!(me.expirationTime>U&&fe());){var J=me.callback;if(typeof J=="function"){me.callback=null,we=me.priorityLevel;var he=J(me.expirationTime<=U);if(U=c.unstable_now(),typeof he=="function"){me.callback=he,it(U),ne=!0;break t}me===v(g)&&f(g),it(U)}else f(g);me=v(g)}if(me!==null)ne=!0;else{var R=v(P);R!==null&&Re(I,R.startTime-U),ne=!1}}break e}finally{me=null,we=ze,He=!1}ne=void 0}}finally{ne?ce():j=!1}}}var ce;if(typeof V=="function")ce=function(){V(ee)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Pe=Se.port2;Se.port1.onmessage=ee,ce=function(){Pe.postMessage(null)}}else ce=function(){de(ee,0)};function Re(U,ne){u=de(function(){U(c.unstable_now())},ne)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(U){U.callback=null},c.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},c.unstable_getCurrentPriorityLevel=function(){return we},c.unstable_next=function(U){switch(we){case 1:case 2:case 3:var ne=3;break;default:ne=we}var ze=we;we=ne;try{return U()}finally{we=ze}},c.unstable_requestPaint=function(){Be=!0},c.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ze=we;we=U;try{return ne()}finally{we=ze}},c.unstable_scheduleCallback=function(U,ne,ze){var J=c.unstable_now();switch(typeof ze=="object"&&ze!==null?(ze=ze.delay,ze=typeof ze=="number"&&0<ze?J+ze:J):ze=J,U){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ze+he,U={id:ye++,callback:ne,priorityLevel:U,startTime:ze,expirationTime:he,sortIndex:-1},ze>J?(U.sortIndex=ze,h(P,U),v(g)===null&&U===v(P)&&(Ae?(B(u),u=-1):Ae=!0,Re(I,ze-J))):(U.sortIndex=he,h(g,U),q||He||(q=!0,j||(j=!0,ce()))),U},c.unstable_shouldYield=fe,c.unstable_wrapCallback=function(U){var ne=we;return function(){var ze=we;we=ne;try{return U.apply(this,arguments)}finally{we=ze}}}})(Lu)),Lu}var ch;function Bg(){return ch||(ch=1,Fu.exports=Ug()),Fu.exports}var qu={exports:{}},zl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function _g(){if(dh)return zl;dh=1;var c=nf();function h(g){var P="https://react.dev/errors/"+g;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var ye=2;ye<arguments.length;ye++)P+="&args[]="+encodeURIComponent(arguments[ye])}return"Minified React error #"+g+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(){}var f={d:{f:v,r:function(){throw Error(h(522))},D:v,C:v,L:v,m:v,X:v,S:v,M:v},p:0,findDOMNode:null},_=Symbol.for("react.portal");function Q(g,P,ye){var me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:me==null?null:""+me,children:g,containerInfo:P,implementation:ye}}var je=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Te(g,P){if(g==="font")return"";if(typeof P=="string")return P==="use-credentials"?P:""}return zl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,zl.createPortal=function(g,P){var ye=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P||P.nodeType!==1&&P.nodeType!==9&&P.nodeType!==11)throw Error(h(299));return Q(g,P,null,ye)},zl.flushSync=function(g){var P=je.T,ye=f.p;try{if(je.T=null,f.p=2,g)return g()}finally{je.T=P,f.p=ye,f.d.f()}},zl.preconnect=function(g,P){typeof g=="string"&&(P?(P=P.crossOrigin,P=typeof P=="string"?P==="use-credentials"?P:"":void 0):P=null,f.d.C(g,P))},zl.prefetchDNS=function(g){typeof g=="string"&&f.d.D(g)},zl.preinit=function(g,P){if(typeof g=="string"&&P&&typeof P.as=="string"){var ye=P.as,me=Te(ye,P.crossOrigin),we=typeof P.integrity=="string"?P.integrity:void 0,He=typeof P.fetchPriority=="string"?P.fetchPriority:void 0;ye==="style"?f.d.S(g,typeof P.precedence=="string"?P.precedence:void 0,{crossOrigin:me,integrity:we,fetchPriority:He}):ye==="script"&&f.d.X(g,{crossOrigin:me,integrity:we,fetchPriority:He,nonce:typeof P.nonce=="string"?P.nonce:void 0})}},zl.preinitModule=function(g,P){if(typeof g=="string")if(typeof P=="object"&&P!==null){if(P.as==null||P.as==="script"){var ye=Te(P.as,P.crossOrigin);f.d.M(g,{crossOrigin:ye,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0})}}else P==null&&f.d.M(g)},zl.preload=function(g,P){if(typeof g=="string"&&typeof P=="object"&&P!==null&&typeof P.as=="string"){var ye=P.as,me=Te(ye,P.crossOrigin);f.d.L(g,ye,{crossOrigin:me,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0,type:typeof P.type=="string"?P.type:void 0,fetchPriority:typeof P.fetchPriority=="string"?P.fetchPriority:void 0,referrerPolicy:typeof P.referrerPolicy=="string"?P.referrerPolicy:void 0,imageSrcSet:typeof P.imageSrcSet=="string"?P.imageSrcSet:void 0,imageSizes:typeof P.imageSizes=="string"?P.imageSizes:void 0,media:typeof P.media=="string"?P.media:void 0})}},zl.preloadModule=function(g,P){if(typeof g=="string")if(P){var ye=Te(P.as,P.crossOrigin);f.d.m(g,{as:typeof P.as=="string"&&P.as!=="script"?P.as:void 0,crossOrigin:ye,integrity:typeof P.integrity=="string"?P.integrity:void 0})}else f.d.m(g)},zl.requestFormReset=function(g){f.d.r(g)},zl.unstable_batchedUpdates=function(g,P){return g(P)},zl.useFormState=function(g,P,ye){return je.H.useFormState(g,P,ye)},zl.useFormStatus=function(){return je.H.useHostTransitionStatus()},zl.version="19.2.0",zl}var uh;function Og(){if(uh)return qu.exports;uh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(h){console.error(h)}}return c(),qu.exports=_g(),qu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function Hg(){if(fh)return Ec;fh=1;var c=Bg(),h=nf(),v=Og();function f(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Q(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function je(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Te(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(Q(e)!==e)throw Error(f(188))}function P(e){var t=e.alternate;if(!t){if(t=Q(e),t===null)throw Error(f(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return g(o),e;if(s===i)return g(o),t;s=s.sibling}throw Error(f(188))}if(n.return!==i.return)n=o,i=s;else{for(var p=!1,S=o.child;S;){if(S===n){p=!0,n=o,i=s;break}if(S===i){p=!0,i=o,n=s;break}S=S.sibling}if(!p){for(S=s.child;S;){if(S===n){p=!0,n=s,i=o;break}if(S===i){p=!0,i=s,n=o;break}S=S.sibling}if(!p)throw Error(f(189))}}if(n.alternate!==i)throw Error(f(190))}if(n.tag!==3)throw Error(f(188));return n.stateNode.current===n?e:t}function ye(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=ye(e),t!==null)return t;e=e.sibling}return null}var me=Object.assign,we=Symbol.for("react.element"),He=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Ae=Symbol.for("react.fragment"),Be=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),V=Symbol.for("react.context"),it=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=ee&&e[ee]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Symbol.for("react.client.reference");function Pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ae:return"Fragment";case de:return"Profiler";case Be:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList";case H:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case V:return e.displayName||"Context";case B:return(e._context.displayName||"Context")+".Consumer";case it:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case u:return t=e.displayName||null,t!==null?t:Pe(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return Pe(e(t))}catch{}}return null}var Re=Array.isArray,U=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=v.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze={pending:!1,data:null,method:null,action:null},J=[],he=-1;function R(e){return{current:e}}function O(e){0>he||(e.current=J[he],J[he]=null,he--)}function pe(e,t){he++,J[he]=e.current,e.current=t}var Ne=R(null),$e=R(null),ut=R(null),ft=R(null);function fn(e,t){switch(pe(ut,t),pe($e,e),pe(Ne,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Rp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Rp(t),e=kp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}O(Ne),pe(Ne,e)}function Ut(){O(Ne),O($e),O(ut)}function Rl(e){e.memoizedState!==null&&pe(ft,e);var t=Ne.current,n=kp(t,e.type);t!==n&&(pe($e,e),pe(Ne,n))}function fl(e){$e.current===e&&(O(Ne),O($e)),ft.current===e&&(O(ft),Uc._currentValue=ze)}var Jl,Na;function zi(e){if(Jl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jl=t&&t[1]||"",Na=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jl+e+Na}var na=!1;function gs(e,t){if(!e||na)return"";na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(te){var K=te}Reflect.construct(e,[],xe)}else{try{xe.call()}catch(te){K=te}e.call(xe.prototype)}}else{try{throw Error()}catch(te){K=te}(xe=e())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(te){if(te&&K&&typeof te.stack=="string")return[te.stack,K.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),p=s[0],S=s[1];if(p&&S){var A=p.split(`
`),F=S.split(`
`);for(o=i=0;i<A.length&&!A[i].includes("DetermineComponentFrameRoot");)i++;for(;o<F.length&&!F[o].includes("DetermineComponentFrameRoot");)o++;if(i===A.length||o===F.length)for(i=A.length-1,o=F.length-1;1<=i&&0<=o&&A[i]!==F[o];)o--;for(;1<=i&&0<=o;i--,o--)if(A[i]!==F[o]){if(i!==1||o!==1)do if(i--,o--,0>o||A[i]!==F[o]){var ue=`
`+A[i].replace(" at new "," at ");return e.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",e.displayName)),ue}while(1<=i&&0<=o);break}}}finally{na=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?zi(n):""}function Qe(e,t){switch(e.tag){case 26:case 27:case 5:return zi(e.type);case 16:return zi("Lazy");case 13:return e.child!==t&&t!==null?zi("Suspense Fallback"):zi("Suspense");case 19:return zi("SuspenseList");case 0:case 15:return gs(e.type,!1);case 11:return gs(e.type.render,!1);case 1:return gs(e.type,!0);case 31:return zi("Activity");default:return""}}function kt(e){try{var t="",n=null;do t+=Qe(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var xs=Object.prototype.hasOwnProperty,Ie=c.unstable_scheduleCallback,Bt=c.unstable_cancelCallback,la=c.unstable_shouldYield,Co=c.unstable_requestPaint,vt=c.unstable_now,pl=c.unstable_getCurrentPriorityLevel,ei=c.unstable_ImmediatePriority,ia=c.unstable_UserBlockingPriority,Oe=c.unstable_NormalPriority,aa=c.unstable_LowPriority,wt=c.unstable_IdlePriority,tl=c.log,Ma=c.unstable_setDisableYieldValue,Ua=null,Xn=null;function fi(e){if(typeof tl=="function"&&Ma(e),Xn&&typeof Xn.setStrictMode=="function")try{Xn.setStrictMode(Ua,e)}catch{}}var ct=Math.clz32?Math.clz32:Ba,zo=Math.log,Ro=Math.LN2;function Ba(e){return e>>>=0,e===0?32:31-(zo(e)/Ro|0)|0}var pi=256,Sl=262144,kl=4194304;function Ri(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ko(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,s=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var S=i&134217727;return S!==0?(i=S&~s,i!==0?o=Ri(i):(p&=S,p!==0?o=Ri(p):n||(n=S&~e,n!==0&&(o=Ri(n))))):(S=i&~s,S!==0?o=Ri(S):p!==0?o=Ri(p):n||(n=i&~e,n!==0&&(o=Ri(n)))),o===0?0:t!==0&&t!==o&&(t&s)===0&&(s=o&-o,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:o}function Ue(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ti(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var e=kl;return kl<<=1,(kl&62914560)===0&&(kl=4194304),e}function Dn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ki(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ys(e,t,n,i,o,s){var p=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var S=e.entanglements,A=e.expirationTimes,F=e.hiddenUpdates;for(n=p&~n;0<n;){var ue=31-ct(n),xe=1<<ue;S[ue]=0,A[ue]=-1;var K=F[ue];if(K!==null)for(F[ue]=null,ue=0;ue<K.length;ue++){var te=K[ue];te!==null&&(te.lane&=-536870913)}n&=~xe}i!==0&&Do(e,i,0),s!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=s&~(p&~t))}function Do(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-ct(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function bs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ct(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function Ot(e,t){var n=t&-t;return n=(n&42)!==0?1:oa(n),(n&(e.suspendedLanes|t))!==0?0:n}function oa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function vs(){var e=ne.p;return e!==0?e:(e=window.event,e===void 0?32:Qp(e.type))}function Bn(e,t){var n=ne.p;try{return ne.p=e,t()}finally{ne.p=n}}var ni=Math.random().toString(36).slice(2),An="__reactFiber$"+ni,Fe="__reactProps$"+ni,yn="__reactContainer$"+ni,sa="__reactEvents$"+ni,Xr="__reactListeners$"+ni,ms="__reactHandles$"+ni,or="__reactResources$"+ni,hl="__reactMarker$"+ni;function Dl(e){delete e[An],delete e[Fe],delete e[sa],delete e[Xr],delete e[ms]}function Di(e){var t=e[An];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yn]||n[An]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_p(e);e!==null;){if(n=e[An])return n;e=_p(e)}return t}e=n,n=e.parentNode}return null}function _l(e){if(e=e[An]||e[yn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ra(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(f(33))}function Ai(e){var t=e[or];return t||(t=e[or]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function en(e){e[hl]=!0}var Ni=new Set,Ss={};function Mi(e,t){Ui(e,t),Ui(e+"Capture",t)}function Ui(e,t){for(Ss[e]=t,e=0;e<t.length;e++)Ni.add(t[e])}var Nn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mn={},ws={};function Al(e){return xs.call(ws,e)?!0:xs.call(Mn,e)?!1:Nn.test(e)?ws[e]=!0:(Mn[e]=!0,!1)}function Gn(e,t,n){if(Al(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function bn(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function tn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Ve(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function St(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _a(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(p){n=""+p,s.call(this,p)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(p){n=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ao(e){if(!e._valueTracker){var t=St(e)?"checked":"value";e._valueTracker=_a(e,t,""+e[t])}}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=St(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function pt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zt=/[\n"\\]/g;function tt(e){return e.replace(zt,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Tt(e,t,n,i,o,s,p,S){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ve(t)):e.value!==""+Ve(t)&&(e.value=""+Ve(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?_n(e,p,Ve(t)):n!=null?_n(e,p,Ve(n)):i!=null&&e.removeAttribute("value"),o==null&&s!=null&&(e.defaultChecked=!!s),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Ve(S):e.removeAttribute("name")}function le(e,t,n,i,o,s,p,S){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Ao(e);return}n=n!=null?""+Ve(n):"",t=t!=null?""+Ve(t):n,S||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=S?e.checked:!!i,e.defaultChecked=!!i,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Ao(e)}function _n(e,t,n){t==="number"&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function st(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Ve(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function rn(e,t,n){if(t!=null&&(t=""+Ve(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Ve(n):""}function rt(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(f(92));if(Re(i)){if(1<i.length)throw Error(f(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Ve(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Ao(e)}function qt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Oa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ht(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Oa.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function nn(e,t,n){if(t!=null&&typeof t!="object")throw Error(f(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&Ht(e,o,i)}else for(var s in t)t.hasOwnProperty(s)&&Ht(e,s,t[s])}function wl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),No=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(e){return No.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function hi(){}var Ha=null;function sr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Uo=null,Bo=null;function yt(e){var t=_l(e);if(t&&(e=t.stateNode)){var n=e[Fe]||null;e:switch(e=t.stateNode,t.type){case"input":if(Tt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+tt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[Fe]||null;if(!o)throw Error(f(90));Tt(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&dt(i)}break e;case"textarea":rn(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&st(e,!!n.multiple,t,!1)}}}var Nl=!1;function $n(e,t,n){if(Nl)return e(t,n);Nl=!0;try{var i=e(t);return i}finally{if(Nl=!1,(Uo!==null||Bo!==null)&&(ud(),Uo&&(t=Uo,e=Bo,Bo=Uo=null,yt(t),e)))for(t=0;t<e.length;t++)yt(e[t])}}function li(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Fe]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(f(231,t,typeof n));return n}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jl=!1;if(_i)try{var js={};Object.defineProperty(js,"passive",{get:function(){jl=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{jl=!1}var On=null,gl=null,ca=null;function Xc(){if(ca)return ca;var e,t=gl,n=t.length,i,o="value"in On?On.value:On.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var p=n-e;for(i=1;i<=p&&t[n-i]===o[s-i];i++);return ca=o.slice(e,1<i?1-i:void 0)}function Fn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ea(){return!0}function Ln(){return!1}function nl(e){function t(n,i,o,s,p){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=p,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(n=e[S],this[S]=n?n(s):s[S]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ea:Ln,this.isPropagationStopped=Ln,this}return me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),t}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=nl(qn),jn=me({},qn,{view:0,detail:0}),Gr=nl(jn),ll,Cs,Hn,Va=me({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hn&&(Hn&&e.type==="mousemove"?(ll=e.screenX-Hn.screenX,Cs=e.screenY-Hn.screenY):Cs=ll=0,Hn=e),ll)},movementY:function(e){return"movementY"in e?e.movementY:Cs}}),cn=nl(Va),$r=me({},Va,{dataTransfer:0}),Od=nl($r),Hd=me({},jn,{relatedTarget:0}),zs=nl(Hd),Wa=me({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),da=nl(Wa),rr=me({},qn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ua=nl(rr),_o=me({},qn,{data:0}),ii=nl(_o),Oo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fr[e])?!!t[e]:!1}function ks(){return cr}var Ds=me({},jn,{key:function(e){if(e.key){var t=Oo[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(e){return e.type==="keypress"?Fn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dn=nl(Ds),As=me({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ln=nl(As),Ns=me({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),Lr=nl(Ns),dr=me({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ed=nl(dr),Ol=me({},Va,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gi=nl(Ol),Pa=me({},qn,{newState:0,oldState:0}),fa=nl(Pa),pa=[9,13,27,32],Ho=_i&&"CompositionEvent"in window,Hl=null;_i&&"documentMode"in document&&(Hl=document.documentMode);var Ya=_i&&"TextEvent"in window&&!Hl,Ms=_i&&(!Ho||Hl&&8<Hl&&11>=Hl),Tl=" ",ai=!1;function Oi(e,t){switch(e){case"keyup":return pa.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zn(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var il=!1;function Vd(e,t){switch(e){case"compositionend":return Zn(t);case"keypress":return t.which!==32?null:(ai=!0,Tl);case"textInput":return e=t.data,e===Tl&&ai?null:e;default:return null}}function Us(e,t){if(il)return e==="compositionend"||!Ho&&Oi(e,t)?(e=Xc(),ca=gl=On=null,il=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ms&&t.locale!=="ko"?null:t.data;default:return null}}var Gc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Gc[e.type]:t==="textarea"}function Zt(e,t,n,i){Uo?Bo?Bo.push(i):Bo=[i]:Uo=i,t=bd(t,"onChange"),0<t.length&&(n=new Ts("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Cl=null,Ia=null;function $c(e){Sp(e,0)}function Bs(e){var t=ra(e);if(dt(t))return e}function ur(e,t){if(e==="change")return t}var _s=!1;if(_i){var Eo;if(_i){var Xa="oninput"in document;if(!Xa){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xa=typeof Zr.oninput=="function"}Eo=Xa}else Eo=!1;_s=Eo&&(!document.documentMode||9<document.documentMode)}function ha(){Cl&&(Cl.detachEvent("onpropertychange",fr),Ia=Cl=null)}function fr(e){if(e.propertyName==="value"&&Bs(Ia)){var t=[];Zt(t,Ia,e,sr(e)),$n($c,t)}}function Vo(e,t,n){e==="focusin"?(ha(),Cl=t,Ia=n,Cl.attachEvent("onpropertychange",fr)):e==="focusout"&&ha()}function Os(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bs(Ia)}function Hs(e,t){if(e==="click")return Bs(t)}function pr(e,t){if(e==="input"||e==="change")return Bs(t)}function ga(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var al=typeof Object.is=="function"?Object.is:ga;function Ga(e,t){if(al(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!xs.call(t,o)||!al(e[o],t[o]))return!1}return!0}function Qr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Es(e,t){var n=Qr(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qr(n)}}function Wo(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wo(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $a(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=pt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=pt(e.document)}return t}function Kr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hr=_i&&"documentMode"in document&&11>=document.documentMode,Fa=null,Jr=null,xa=null,Vs=!1;function ec(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vs||Fa==null||Fa!==pt(i)||(i=Fa,"selectionStart"in i&&Kr(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),xa&&Ga(xa,i)||(xa=i,i=bd(Jr,"onSelect"),0<i.length&&(t=new Ts("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Fa)))}function ya(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var La={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},Po={},Yo={};_i&&(Yo=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function xi(e){if(Po[e])return Po[e];if(!La[e])return e;var t=La[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yo)return Po[e]=t[n];return e}var Io=xi("animationend"),xl=xi("animationiteration"),gr=xi("animationstart"),El=xi("transitionrun"),tc=xi("transitionstart"),Vl=xi("transitioncancel"),xr=xi("transitionend"),oi=new Map,Ws="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ws.push("scrollEnd");function Tn(e,t){oi.set(e,t),Mi(t,[e])}var Xo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},wn=[],Hi=0,Wl=0;function qa(){for(var e=Hi,t=Wl=Hi=0;t<e;){var n=wn[t];wn[t++]=null;var i=wn[t];wn[t++]=null;var o=wn[t];wn[t++]=null;var s=wn[t];if(wn[t++]=null,i!==null&&o!==null){var p=i.pending;p===null?o.next=o:(o.next=p.next,p.next=o),i.pending=o}s!==0&&ht(n,o,s)}}function si(e,t,n,i){wn[Hi++]=e,wn[Hi++]=t,wn[Hi++]=n,wn[Hi++]=i,Wl|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Ps(e,t,n,i){return si(e,t,n,i),yr(e)}function nt(e,t){return si(e,null,null,t),yr(e)}function ht(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(o=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,o&&t!==null&&(o=31-ct(n),e=s.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),s):null}function yr(e){if(50<zc)throw zc=0,hu=null,Error(f(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ei={};function nc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(e,t,n,i){return new nc(e,t,n,i)}function Go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pl(e,t){var n=e.alternate;return n===null?(n=En(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fc(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Za(e,t,n,i,o,s){var p=0;if(i=e,typeof e=="function")Go(e)&&(p=1);else if(typeof e=="string")p=yg(e,n,Ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case H:return e=En(31,n,t,o),e.elementType=H,e.lanes=s,e;case Ae:return Vi(n.children,o,s,t);case Be:p=8,o|=24;break;case de:return e=En(12,n,t,o|2),e.elementType=de,e.lanes=s,e;case I:return e=En(13,n,t,o),e.elementType=I,e.lanes=s,e;case j:return e=En(19,n,t,o),e.elementType=j,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:p=10;break e;case B:p=9;break e;case it:p=11;break e;case u:p=14;break e;case k:p=16,i=null;break e}p=29,n=Error(f(130,e===null?"null":typeof e,"")),i=null}return t=En(p,n,t,o),t.elementType=e,t.type=i,t.lanes=s,t}function Vi(e,t,n,i){return e=En(7,e,i,t),e.lanes=n,e}function ba(e,t,n){return e=En(6,e,null,t),e.lanes=n,e}function Qa(e){var t=En(18,null,null,0);return t.stateNode=e,t}function $o(e,t,n){return t=En(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ka=new WeakMap;function Ml(e,t){if(typeof e=="object"&&e!==null){var n=Ka.get(e);return n!==void 0?n:(t={value:e,source:t,stack:kt(t)},Ka.set(e,t),t)}return{value:e,source:t,stack:kt(t)}}var ri=[],va=0,br=null,Ja=0,ol=[],Cn=0,yi=null,yl=1,Yl="";function zn(e,t){ri[va++]=Ja,ri[va++]=br,br=e,Ja=t}function Fo(e,t,n){ol[Cn++]=yl,ol[Cn++]=Yl,ol[Cn++]=yi,yi=e;var i=yl;e=Yl;var o=32-ct(i)-1;i&=~(1<<o),n+=1;var s=32-ct(t)+o;if(30<s){var p=o-o%5;s=(i&(1<<p)-1).toString(32),i>>=p,o-=p,yl=1<<32-ct(t)+o|n<<o|i,Yl=s+e}else yl=1<<s|n<<o|i,Yl=e}function Ys(e){e.return!==null&&(zn(e,1),Fo(e,1,0))}function vr(e){for(;e===br;)br=ri[--va],ri[va]=null,Ja=ri[--va],ri[va]=null;for(;e===yi;)yi=ol[--Cn],ol[Cn]=null,Yl=ol[--Cn],ol[Cn]=null,yl=ol[--Cn],ol[Cn]=null}function Is(e,t){ol[Cn++]=yl,ol[Cn++]=Yl,ol[Cn++]=yi,yl=t.id,Yl=t.overflow,yi=e}var Vn=null,$t=null,Rt=!1,Ul=null,bl=!1,Xs=Error(f(519));function Wi(e){var t=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qo(Ml(t,e)),Xs}function Gs(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[An]=e,t[Fe]=i,n){case"dialog":At("cancel",t),At("close",t);break;case"iframe":case"object":case"embed":At("load",t);break;case"video":case"audio":for(n=0;n<kc.length;n++)At(kc[n],t);break;case"source":At("error",t);break;case"img":case"image":case"link":At("error",t),At("load",t);break;case"details":At("toggle",t);break;case"input":At("invalid",t),le(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":At("invalid",t);break;case"textarea":At("invalid",t),rt(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Cp(t.textContent,n)?(i.popover!=null&&(At("beforetoggle",t),At("toggle",t)),i.onScroll!=null&&At("scroll",t),i.onScrollEnd!=null&&At("scrollend",t),i.onClick!=null&&(t.onclick=hi),t=!0):t=!1,t||Wi(e,!0)}function lc(e){for(Vn=e.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:bl=!1;return;case 27:case 3:bl=!0;return;default:Vn=Vn.return}}function Lo(e){if(e!==Vn)return!1;if(!Rt)return lc(e),Rt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Du(e.type,e.memoizedProps)),n=!n),n&&$t&&Wi(e),lc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));$t=Bp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(317));$t=Bp(e)}else t===27?(t=$t,cs(e.type)?(e=Bu,Bu=null,$t=e):$t=t):$t=Vn?Ti(e.stateNode.nextSibling):null;return!0}function eo(){$t=Vn=null,Rt=!1}function ic(){var e=Ul;return e!==null&&(Zl===null?Zl=e:Zl.push.apply(Zl,e),Ul=null),e}function qo(e){Ul===null?Ul=[e]:Ul.push(e)}var Il=R(null),sl=null,Pi=null;function ma(e,t,n){pe(Il,t._currentValue),t._currentValue=n}function Yi(e){e._currentValue=Il.current,O(Il)}function ac(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function oc(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){var p=o.child;s=s.firstContext;e:for(;s!==null;){var S=s;s=o;for(var A=0;A<t.length;A++)if(S.context===t[A]){s.lanes|=n,S=s.alternate,S!==null&&(S.lanes|=n),ac(s.return,n,e),i||(p=null);break e}s=S.next}}else if(o.tag===18){if(p=o.return,p===null)throw Error(f(341));p.lanes|=n,s=p.alternate,s!==null&&(s.lanes|=n),ac(p,n,e),p=null}else p=o.child;if(p!==null)p.return=o;else for(p=o;p!==null;){if(p===e){p=null;break}if(o=p.sibling,o!==null){o.return=p.return,p=o;break}p=p.return}o=p}}function Zo(e,t,n,i){e=null;for(var o=t,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var p=o.alternate;if(p===null)throw Error(f(387));if(p=p.memoizedProps,p!==null){var S=o.type;al(o.pendingProps.value,p.value)||(e!==null?e.push(S):e=[S])}}else if(o===ft.current){if(p=o.alternate,p===null)throw Error(f(387));p.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Uc):e=[Uc])}o=o.return}e!==null&&oc(t,e,n,i),t.flags|=262144}function mr(e){for(e=e.firstContext;e!==null;){if(!al(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function to(e){sl=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qn(e){return Lc(sl,e)}function Sr(e,t){return sl===null&&to(e),Lc(e,t)}function Lc(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Pi===null){if(e===null)throw Error(f(308));Pi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Pi=Pi.next=t;return n}var Wd=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Pd=c.unstable_scheduleCallback,$s=c.unstable_NormalPriority,an={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sa(){return{controller:new Wd,data:new Map,refCount:0}}function wa(e){e.refCount--,e.refCount===0&&Pd($s,function(){e.controller.abort()})}var Ii=null,no=0,Xi=0,Gi=null;function wr(e,t){if(Ii===null){var n=Ii=[];no=0,Xi=mu(),Gi={status:"pending",value:void 0,then:function(i){n.push(i)}}}return no++,t.then($i,$i),t}function $i(){if(--no===0&&Ii!==null){Gi!==null&&(Gi.status="fulfilled");var e=Ii;Ii=null,Xi=0,Gi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Fs(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var lo=U.S;U.S=function(e,t){qf=vt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&wr(e,t),lo!==null&&lo(e,t)};var Wn=R(null);function Ls(){var e=Wn.current;return e!==null?e:sn.pooledCache}function jr(e,t){t===null?pe(Wn,Wn.current):pe(Wn,t.pool)}function qc(){var e=Ls();return e===null?null:{parent:an._currentValue,pool:e}}var io=Error(f(460)),Fi=Error(f(474)),ao=Error(f(542)),oo={then:function(){}};function Tr(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cr(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(hi,hi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,bi(e),e;default:if(typeof t.status=="string")t.then(hi,hi);else{if(e=sn,e!==null&&100<e.shellSuspendCounter)throw Error(f(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,bi(e),e}throw so=t,io}}function Li(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(so=n,io):n}}var so=null;function sc(){if(so===null)throw Error(f(459));var e=so;return so=null,e}function bi(e){if(e===io||e===ao)throw Error(f(483))}var ro=null,vi=0;function qs(e){var t=vi;return vi+=1,ro===null&&(ro=[]),Cr(ro,e,t)}function Xl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Qo(e,t){throw t.$$typeof===we?Error(f(525)):(e=Object.prototype.toString.call(t),Error(f(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function rc(e){function t(E,N){if(e){var $=E.deletions;$===null?(E.deletions=[N],E.flags|=16):$.push(N)}}function n(E,N){if(!e)return null;for(;N!==null;)t(E,N),N=N.sibling;return null}function i(E){for(var N=new Map;E!==null;)E.key!==null?N.set(E.key,E):N.set(E.index,E),E=E.sibling;return N}function o(E,N){return E=Pl(E,N),E.index=0,E.sibling=null,E}function s(E,N,$){return E.index=$,e?($=E.alternate,$!==null?($=$.index,$<N?(E.flags|=67108866,N):$):(E.flags|=67108866,N)):(E.flags|=1048576,N)}function p(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function S(E,N,$,ge){return N===null||N.tag!==6?(N=ba($,E.mode,ge),N.return=E,N):(N=o(N,$),N.return=E,N)}function A(E,N,$,ge){var Je=$.type;return Je===Ae?ue(E,N,$.props.children,ge,$.key):N!==null&&(N.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===k&&Li(Je)===N.type)?(N=o(N,$.props),Xl(N,$),N.return=E,N):(N=Za($.type,$.key,$.props,null,E.mode,ge),Xl(N,$),N.return=E,N)}function F(E,N,$,ge){return N===null||N.tag!==4||N.stateNode.containerInfo!==$.containerInfo||N.stateNode.implementation!==$.implementation?(N=$o($,E.mode,ge),N.return=E,N):(N=o(N,$.children||[]),N.return=E,N)}function ue(E,N,$,ge,Je){return N===null||N.tag!==7?(N=Vi($,E.mode,ge,Je),N.return=E,N):(N=o(N,$),N.return=E,N)}function xe(E,N,$){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=ba(""+N,E.mode,$),N.return=E,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case He:return $=Za(N.type,N.key,N.props,null,E.mode,$),Xl($,N),$.return=E,$;case q:return N=$o(N,E.mode,$),N.return=E,N;case k:return N=Li(N),xe(E,N,$)}if(Re(N)||ce(N))return N=Vi(N,E.mode,$,null),N.return=E,N;if(typeof N.then=="function")return xe(E,qs(N),$);if(N.$$typeof===V)return xe(E,Sr(E,N),$);Qo(E,N)}return null}function K(E,N,$,ge){var Je=N!==null?N.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Je!==null?null:S(E,N,""+$,ge);if(typeof $=="object"&&$!==null){switch($.$$typeof){case He:return $.key===Je?A(E,N,$,ge):null;case q:return $.key===Je?F(E,N,$,ge):null;case k:return $=Li($),K(E,N,$,ge)}if(Re($)||ce($))return Je!==null?null:ue(E,N,$,ge,null);if(typeof $.then=="function")return K(E,N,qs($),ge);if($.$$typeof===V)return K(E,N,Sr(E,$),ge);Qo(E,$)}return null}function te(E,N,$,ge,Je){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return E=E.get($)||null,S(N,E,""+ge,Je);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case He:return E=E.get(ge.key===null?$:ge.key)||null,A(N,E,ge,Je);case q:return E=E.get(ge.key===null?$:ge.key)||null,F(N,E,ge,Je);case k:return ge=Li(ge),te(E,N,$,ge,Je)}if(Re(ge)||ce(ge))return E=E.get($)||null,ue(N,E,ge,Je,null);if(typeof ge.then=="function")return te(E,N,$,qs(ge),Je);if(ge.$$typeof===V)return te(E,N,$,Sr(N,ge),Je);Qo(N,ge)}return null}function Ge(E,N,$,ge){for(var Je=null,Vt=null,Le=N,jt=N=0,Mt=null;Le!==null&&jt<$.length;jt++){Le.index>jt?(Mt=Le,Le=null):Mt=Le.sibling;var Wt=K(E,Le,$[jt],ge);if(Wt===null){Le===null&&(Le=Mt);break}e&&Le&&Wt.alternate===null&&t(E,Le),N=s(Wt,N,jt),Vt===null?Je=Wt:Vt.sibling=Wt,Vt=Wt,Le=Mt}if(jt===$.length)return n(E,Le),Rt&&zn(E,jt),Je;if(Le===null){for(;jt<$.length;jt++)Le=xe(E,$[jt],ge),Le!==null&&(N=s(Le,N,jt),Vt===null?Je=Le:Vt.sibling=Le,Vt=Le);return Rt&&zn(E,jt),Je}for(Le=i(Le);jt<$.length;jt++)Mt=te(Le,E,jt,$[jt],ge),Mt!==null&&(e&&Mt.alternate!==null&&Le.delete(Mt.key===null?jt:Mt.key),N=s(Mt,N,jt),Vt===null?Je=Mt:Vt.sibling=Mt,Vt=Mt);return e&&Le.forEach(function(hs){return t(E,hs)}),Rt&&zn(E,jt),Je}function ot(E,N,$,ge){if($==null)throw Error(f(151));for(var Je=null,Vt=null,Le=N,jt=N=0,Mt=null,Wt=$.next();Le!==null&&!Wt.done;jt++,Wt=$.next()){Le.index>jt?(Mt=Le,Le=null):Mt=Le.sibling;var hs=K(E,Le,Wt.value,ge);if(hs===null){Le===null&&(Le=Mt);break}e&&Le&&hs.alternate===null&&t(E,Le),N=s(hs,N,jt),Vt===null?Je=hs:Vt.sibling=hs,Vt=hs,Le=Mt}if(Wt.done)return n(E,Le),Rt&&zn(E,jt),Je;if(Le===null){for(;!Wt.done;jt++,Wt=$.next())Wt=xe(E,Wt.value,ge),Wt!==null&&(N=s(Wt,N,jt),Vt===null?Je=Wt:Vt.sibling=Wt,Vt=Wt);return Rt&&zn(E,jt),Je}for(Le=i(Le);!Wt.done;jt++,Wt=$.next())Wt=te(Le,E,jt,Wt.value,ge),Wt!==null&&(e&&Wt.alternate!==null&&Le.delete(Wt.key===null?jt:Wt.key),N=s(Wt,N,jt),Vt===null?Je=Wt:Vt.sibling=Wt,Vt=Wt);return e&&Le.forEach(function(kg){return t(E,kg)}),Rt&&zn(E,jt),Je}function Jt(E,N,$,ge){if(typeof $=="object"&&$!==null&&$.type===Ae&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case He:e:{for(var Je=$.key;N!==null;){if(N.key===Je){if(Je=$.type,Je===Ae){if(N.tag===7){n(E,N.sibling),ge=o(N,$.props.children),ge.return=E,E=ge;break e}}else if(N.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===k&&Li(Je)===N.type){n(E,N.sibling),ge=o(N,$.props),Xl(ge,$),ge.return=E,E=ge;break e}n(E,N);break}else t(E,N);N=N.sibling}$.type===Ae?(ge=Vi($.props.children,E.mode,ge,$.key),ge.return=E,E=ge):(ge=Za($.type,$.key,$.props,null,E.mode,ge),Xl(ge,$),ge.return=E,E=ge)}return p(E);case q:e:{for(Je=$.key;N!==null;){if(N.key===Je)if(N.tag===4&&N.stateNode.containerInfo===$.containerInfo&&N.stateNode.implementation===$.implementation){n(E,N.sibling),ge=o(N,$.children||[]),ge.return=E,E=ge;break e}else{n(E,N);break}else t(E,N);N=N.sibling}ge=$o($,E.mode,ge),ge.return=E,E=ge}return p(E);case k:return $=Li($),Jt(E,N,$,ge)}if(Re($))return Ge(E,N,$,ge);if(ce($)){if(Je=ce($),typeof Je!="function")throw Error(f(150));return $=Je.call($),ot(E,N,$,ge)}if(typeof $.then=="function")return Jt(E,N,qs($),ge);if($.$$typeof===V)return Jt(E,N,Sr(E,$),ge);Qo(E,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,N!==null&&N.tag===6?(n(E,N.sibling),ge=o(N,$),ge.return=E,E=ge):(n(E,N),ge=ba($,E.mode,ge),ge.return=E,E=ge),p(E)):n(E,N)}return function(E,N,$,ge){try{vi=0;var Je=Jt(E,N,$,ge);return ro=null,Je}catch(Le){if(Le===io||Le===ao)throw Le;var Vt=En(29,Le,null,E.mode);return Vt.lanes=ge,Vt.return=E,Vt}finally{}}}var co=rc(!0),Zc=rc(!1),ja=!1;function Ko(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Xt&2)!==0){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=yr(e),ht(e,null,n),t}return si(e,i,t,n),yr(e)}function Zi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,bs(e,n)}}function cc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var p={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=p:s=s.next=p,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Zs=!1;function Qs(){if(Zs){var e=Gi;if(e!==null)throw e}}function uo(e,t,n,i){Zs=!1;var o=e.updateQueue;ja=!1;var s=o.firstBaseUpdate,p=o.lastBaseUpdate,S=o.shared.pending;if(S!==null){o.shared.pending=null;var A=S,F=A.next;A.next=null,p===null?s=F:p.next=F,p=A;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,S=ue.lastBaseUpdate,S!==p&&(S===null?ue.firstBaseUpdate=F:S.next=F,ue.lastBaseUpdate=A))}if(s!==null){var xe=o.baseState;p=0,ue=F=A=null,S=s;do{var K=S.lane&-536870913,te=K!==S.lane;if(te?(Nt&K)===K:(i&K)===K){K!==0&&K===Xi&&(Zs=!0),ue!==null&&(ue=ue.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ge=e,ot=S;K=t;var Jt=n;switch(ot.tag){case 1:if(Ge=ot.payload,typeof Ge=="function"){xe=Ge.call(Jt,xe,K);break e}xe=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=ot.payload,K=typeof Ge=="function"?Ge.call(Jt,xe,K):Ge,K==null)break e;xe=me({},xe,K);break e;case 2:ja=!0}}K=S.callback,K!==null&&(e.flags|=64,te&&(e.flags|=8192),te=o.callbacks,te===null?o.callbacks=[K]:te.push(K))}else te={lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ue===null?(F=ue=te,A=xe):ue=ue.next=te,p|=K;if(S=S.next,S===null){if(S=o.shared.pending,S===null)break;te=S,S=te.next,te.next=null,o.lastBaseUpdate=te,o.shared.pending=null}}while(!0);ue===null&&(A=xe),o.baseState=A,o.firstBaseUpdate=F,o.lastBaseUpdate=ue,s===null&&(o.shared.lanes=0),is|=p,e.lanes=p,e.memoizedState=xe}}function Rr(e,t){if(typeof e!="function")throw Error(f(191,e));e.call(t)}function dc(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Rr(n[e],t)}var fo=R(null),Ks=R(0);function Jo(e,t){e=wo,pe(Ks,e),pe(fo,t),wo=e|t.baseLanes}function Js(){pe(Ks,wo),pe(fo,fo.current)}function po(){wo=Ks.current,O(fo),O(Ks)}var Un=R(null),rl=null;function mi(e){var t=e.alternate;pe(vn,vn.current&1),pe(Un,e),rl===null&&(t===null||fo.current!==null||t.memoizedState!==null)&&(rl=e)}function er(e){pe(vn,vn.current),pe(Un,e),rl===null&&(rl=e)}function cl(e){e.tag===22?(pe(vn,vn.current),pe(Un,e),rl===null&&(rl=e)):Ca()}function Ca(){pe(vn,vn.current),pe(Un,Un.current)}function Bl(e){O(Un),rl===e&&(rl=null),O(vn)}var vn=R(0);function tr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Mu(n)||Uu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gl=0,lt=null,Yt=null,on=null,Si=!1,ho=!1,Qi=!1,Kn=0,wi=0,za=null,uc=0;function Qt(){throw Error(f(321))}function fc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!al(e[n],t[n]))return!1;return!0}function go(e,t,n,i,o,s){return Gl=s,lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?of:Id,Qi=!1,s=n(i,o),Qi=!1,ho&&(s=pc(t,n,i,o)),Qc(e),s}function Qc(e){U.H=yc;var t=Yt!==null&&Yt.next!==null;if(Gl=0,on=Yt=lt=null,Si=!1,wi=0,za=null,t)throw Error(f(300));e===null||Pn||(e=e.dependencies,e!==null&&mr(e)&&(Pn=!0))}function pc(e,t,n,i){lt=e;var o=0;do{if(ho&&(za=null),wi=0,ho=!1,25<=o)throw Error(f(301));if(o+=1,on=Yt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}U.H=sf,s=t(n,i)}while(ho);return s}function hc(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?es(t):t,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(lt.flags|=1024),t}function gc(){var e=Kn!==0;return Kn=0,e}function xc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function kr(e){if(Si){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Si=!1}Gl=0,on=Yt=lt=null,ho=!1,wi=Kn=0,za=null}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?lt.memoizedState=on=e:on=on.next=e,on}function pn(){if(Yt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var t=on===null?lt.memoizedState:on.next;if(t!==null)on=t,Yt=e;else{if(e===null)throw lt.alternate===null?Error(f(467)):Error(f(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},on===null?lt.memoizedState=on=e:on=on.next=e}return on}function Dr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function es(e){var t=wi;return wi+=1,za===null&&(za=[]),e=Cr(za,e,t),t=lt,(on===null?t.memoizedState:on.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?of:Id),e}function Ra(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return es(e);if(e.$$typeof===V)return Qn(e)}throw Error(f(438,String(e)))}function ka(e){var t=null,n=lt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=lt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Dr(),lt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=fe;return t.index++,n}function $l(e,t){return typeof t=="function"?t(e):t}function ts(e){var t=pn();return nr(t,Yt,e)}function nr(e,t,n){var i=e.queue;if(i===null)throw Error(f(311));i.lastRenderedReducer=n;var o=e.baseQueue,s=i.pending;if(s!==null){if(o!==null){var p=o.next;o.next=s.next,s.next=p}t.baseQueue=o=s,i.pending=null}if(s=e.baseState,o===null)e.memoizedState=s;else{t=o.next;var S=p=null,A=null,F=t,ue=!1;do{var xe=F.lane&-536870913;if(xe!==F.lane?(Nt&xe)===xe:(Gl&xe)===xe){var K=F.revertLane;if(K===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),xe===Xi&&(ue=!0);else if((Gl&K)===K){F=F.next,K===Xi&&(ue=!0);continue}else xe={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},A===null?(S=A=xe,p=s):A=A.next=xe,lt.lanes|=K,is|=K;xe=F.action,Qi&&n(s,xe),s=F.hasEagerState?F.eagerState:n(s,xe)}else K={lane:xe,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},A===null?(S=A=K,p=s):A=A.next=K,lt.lanes|=xe,is|=xe;F=F.next}while(F!==null&&F!==t);if(A===null?p=s:A.next=S,!al(s,e.memoizedState)&&(Pn=!0,ue&&(n=Gi,n!==null)))throw n;e.memoizedState=s,e.baseState=p,e.baseQueue=A,i.lastRenderedState=s}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Ar(e){var t=pn(),n=t.queue;if(n===null)throw Error(f(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var p=o=o.next;do s=e(s,p.action),p=p.next;while(p!==o);al(s,t.memoizedState)||(Pn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function qe(e,t,n){var i=lt,o=pn(),s=Rt;if(s){if(n===void 0)throw Error(f(407));n=n()}else n=t();var p=!al((Yt||o).memoizedState,n);if(p&&(o.memoizedState=n,Pn=!0),o=o.queue,De(r.bind(null,i,o,e),[e]),o.getSnapshot!==t||p||on!==null&&on.memoizedState.tag&1){if(i.flags|=2048,se(9,{destroy:void 0},a.bind(null,i,o,n,t),null),sn===null)throw Error(f(349));s||(Gl&127)!==0||Kc(i,t,n)}return n}function Kc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=lt.updateQueue,t===null?(t=Dr(),lt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function a(e,t,n,i){t.value=n,t.getSnapshot=i,x(t)&&y(e)}function r(e,t,n){return n(function(){x(t)&&y(e)})}function x(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!al(e,n)}catch{return!0}}function y(e){var t=nt(e,2);t!==null&&Ql(t,e,2)}function m(e){var t=Jn();if(typeof e=="function"){var n=e;if(e=n(),Qi){fi(!0);try{n()}finally{fi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:e},t}function b(e,t,n,i){return e.baseState=n,nr(e,Yt,typeof i=="function"?i:$l)}function d(e,t,n,i,o){if(Jc(e))throw Error(f(485));if(e=t.action,e!==null){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){s.listeners.push(p)}};U.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,w(t,s)):(s.next=n.next,t.pending=n.next=s)}}function w(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var s=U.T,p={};U.T=p;try{var S=n(o,i),A=U.S;A!==null&&A(p,S),C(e,t,S)}catch(F){Z(e,t,F)}finally{s!==null&&p.types!==null&&(s.types=p.types),U.T=s}}else try{s=n(o,i),C(e,t,s)}catch(F){Z(e,t,F)}}function C(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){z(e,t,i)},function(i){return Z(e,t,i)}):z(e,t,n)}function z(e,t,n){t.status="fulfilled",t.value=n,Y(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,w(e,n)))}function Z(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Y(t),t=t.next;while(t!==i)}e.action=null}function Y(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oe(e,t){return t}function X(e,t){if(Rt){var n=sn.formState;if(n!==null){e:{var i=lt;if(Rt){if($t){t:{for(var o=$t,s=bl;o.nodeType!==8;){if(!s){o=null;break t}if(o=Ti(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){$t=Ti(o.nextSibling),i=o.data==="F!";break e}}Wi(i)}i=!1}i&&(t=n[0])}}return n=Jn(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oe,lastRenderedState:t},n.queue=i,n=ji.bind(null,lt,i),i.dispatch=n,i=m(!1),s=Yd.bind(null,lt,!1,i.queue),i=Jn(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=d.bind(null,lt,o,s,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function L(e){var t=pn();return W(t,Yt,e)}function W(e,t,n){if(t=nr(e,t,oe)[0],e=ts($l)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=es(t)}catch(p){throw p===io?ao:p}else i=t;t=pn();var o=t.queue,s=o.dispatch;return n!==t.memoizedState&&(lt.flags|=2048,se(9,{destroy:void 0},G.bind(null,o,n),null)),[i,s,e]}function G(e,t){e.action=t}function ie(e){var t=pn(),n=Yt;if(n!==null)return W(t,n,e);pn(),t=t.memoizedState,n=pn();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function se(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=lt.updateQueue,t===null&&(t=Dr(),lt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function be(){return pn().memoizedState}function ke(e,t,n,i){var o=Jn();lt.flags|=e,o.memoizedState=se(1|t,{destroy:void 0},n,i===void 0?null:i)}function ve(e,t,n,i){var o=pn();i=i===void 0?null:i;var s=o.memoizedState.inst;Yt!==null&&i!==null&&fc(i,Yt.memoizedState.deps)?o.memoizedState=se(t,s,n,i):(lt.flags|=e,o.memoizedState=se(1|t,s,n,i))}function Ee(e,t){ke(8390656,8,e,t)}function De(e,t){ve(2048,8,e,t)}function M(e){lt.flags|=4;var t=lt.updateQueue;if(t===null)t=Dr(),lt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function D(e){var t=pn().memoizedState;return M({ref:t,nextImpl:e}),function(){if((Xt&2)!==0)throw Error(f(440));return t.impl.apply(void 0,arguments)}}function re(e,t){return ve(4,2,e,t)}function ae(e,t){return ve(4,4,e,t)}function Ce(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _e(e,t,n){n=n!=null?n.concat([e]):null,ve(4,4,Ce.bind(null,t,e),n)}function Ke(){}function Xe(e,t){var n=pn();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&fc(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function at(e,t){var n=pn();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&fc(t,i[1]))return i[0];if(i=e(),Qi){fi(!0);try{e()}finally{fi(!1)}}return n.memoizedState=[i,t],i}function Ze(e,t,n){return n===void 0||(Gl&1073741824)!==0&&(Nt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Qf(),lt.lanes|=e,is|=e,n)}function un(e,t,n,i){return al(n,t)?n:fo.current!==null?(e=Ze(e,n,i),al(e,t)||(Pn=!0),e):(Gl&42)===0||(Gl&1073741824)!==0&&(Nt&261930)===0?(Pn=!0,e.memoizedState=n):(e=Qf(),lt.lanes|=e,is|=e,t)}function gt(e,t,n,i,o){var s=ne.p;ne.p=s!==0&&8>s?s:8;var p=U.T,S={};U.T=S,Yd(e,!1,t,n);try{var A=o(),F=U.S;if(F!==null&&F(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var ue=Fs(A,i);dl(e,t,ue,ui(e))}else dl(e,t,i,ui(e))}catch(xe){dl(e,t,{then:function(){},status:"rejected",reason:xe},ui())}finally{ne.p=s,p!==null&&S.types!==null&&(p.types=S.types),U.T=p}}function Me(){}function et(e,t,n,i){if(e.tag!==5)throw Error(f(476));var o=Et(e).queue;gt(e,o,t,ze,n===null?Me:function(){return It(e),n(i)})}function Et(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ze,baseState:ze,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:ze},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function It(e){var t=Et(e);t.next===null&&(t=e.alternate.memoizedState),dl(e,t.next.queue,{},ui())}function Gt(){return Qn(Uc)}function mn(){return pn().memoizedState}function hn(){return pn().memoizedState}function xt(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ui();e=Ta(n);var i=qi(t,e,n);i!==null&&(Ql(i,t,n),Zi(i,t,n)),t={cache:Sa()},e.payload=t;return}t=t.return}}function Ki(e,t,n){var i=ui();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Jc(e)?lf(t,n):(n=Ps(e,t,n,i),n!==null&&(Ql(n,e,i),af(n,t,i)))}function ji(e,t,n){var i=ui();dl(e,t,n,i)}function dl(e,t,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jc(e))lf(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var p=t.lastRenderedState,S=s(p,n);if(o.hasEagerState=!0,o.eagerState=S,al(S,p))return si(e,t,o,0),sn===null&&qa(),!1}catch{}finally{}if(n=Ps(e,t,o,i),n!==null)return Ql(n,e,i),af(n,t,i),!0}return!1}function Yd(e,t,n,i){if(i={lane:2,revertLane:mu(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Jc(e)){if(t)throw Error(f(479))}else t=Ps(e,n,i,2),t!==null&&Ql(t,e,2)}function Jc(e){var t=e.alternate;return e===lt||t!==null&&t===lt}function lf(e,t){ho=Si=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function af(e,t,n){if((n&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,bs(e,n)}}var yc={readContext:Qn,use:Ra,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};yc.useEffectEvent=Qt;var of={readContext:Qn,use:Ra,useCallback:function(e,t){return Jn().memoizedState=[e,t===void 0?null:t],e},useContext:Qn,useEffect:Ee,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ke(4194308,4,Ce.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ke(4194308,4,e,t)},useInsertionEffect:function(e,t){ke(4,2,e,t)},useMemo:function(e,t){var n=Jn();t=t===void 0?null:t;var i=e();if(Qi){fi(!0);try{e()}finally{fi(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Jn();if(n!==void 0){var o=n(t);if(Qi){fi(!0);try{n(t)}finally{fi(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=Ki.bind(null,lt,e),[i.memoizedState,e]},useRef:function(e){var t=Jn();return e={current:e},t.memoizedState=e},useState:function(e){e=m(e);var t=e.queue,n=ji.bind(null,lt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ke,useDeferredValue:function(e,t){var n=Jn();return Ze(n,e,t)},useTransition:function(){var e=m(!1);return e=gt.bind(null,lt,e.queue,!0,!1),Jn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=lt,o=Jn();if(Rt){if(n===void 0)throw Error(f(407));n=n()}else{if(n=t(),sn===null)throw Error(f(349));(Nt&127)!==0||Kc(i,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Ee(r.bind(null,i,s,e),[e]),i.flags|=2048,se(9,{destroy:void 0},a.bind(null,i,s,n,t),null),n},useId:function(){var e=Jn(),t=sn.identifierPrefix;if(Rt){var n=Yl,i=yl;n=(i&~(1<<32-ct(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Kn++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=uc++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Gt,useFormState:X,useActionState:X,useOptimistic:function(e){var t=Jn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Yd.bind(null,lt,!0,n),n.dispatch=t,[e,t]},useMemoCache:ka,useCacheRefresh:function(){return Jn().memoizedState=xt.bind(null,lt)},useEffectEvent:function(e){var t=Jn(),n={impl:e};return t.memoizedState=n,function(){if((Xt&2)!==0)throw Error(f(440));return n.impl.apply(void 0,arguments)}}},Id={readContext:Qn,use:Ra,useCallback:Xe,useContext:Qn,useEffect:De,useImperativeHandle:_e,useInsertionEffect:re,useLayoutEffect:ae,useMemo:at,useReducer:ts,useRef:be,useState:function(){return ts($l)},useDebugValue:Ke,useDeferredValue:function(e,t){var n=pn();return un(n,Yt.memoizedState,e,t)},useTransition:function(){var e=ts($l)[0],t=pn().memoizedState;return[typeof e=="boolean"?e:es(e),t]},useSyncExternalStore:qe,useId:mn,useHostTransitionStatus:Gt,useFormState:L,useActionState:L,useOptimistic:function(e,t){var n=pn();return b(n,Yt,e,t)},useMemoCache:ka,useCacheRefresh:hn};Id.useEffectEvent=D;var sf={readContext:Qn,use:Ra,useCallback:Xe,useContext:Qn,useEffect:De,useImperativeHandle:_e,useInsertionEffect:re,useLayoutEffect:ae,useMemo:at,useReducer:Ar,useRef:be,useState:function(){return Ar($l)},useDebugValue:Ke,useDeferredValue:function(e,t){var n=pn();return Yt===null?Ze(n,e,t):un(n,Yt.memoizedState,e,t)},useTransition:function(){var e=Ar($l)[0],t=pn().memoizedState;return[typeof e=="boolean"?e:es(e),t]},useSyncExternalStore:qe,useId:mn,useHostTransitionStatus:Gt,useFormState:ie,useActionState:ie,useOptimistic:function(e,t){var n=pn();return Yt!==null?b(n,Yt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ka,useCacheRefresh:hn};sf.useEffectEvent=D;function Xd(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ui(),o=Ta(i);o.payload=t,n!=null&&(o.callback=n),t=qi(e,o,i),t!==null&&(Ql(t,e,i),Zi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ui(),o=Ta(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=qi(e,o,i),t!==null&&(Ql(t,e,i),Zi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ui(),i=Ta(n);i.tag=2,t!=null&&(i.callback=t),t=qi(e,i,n),t!==null&&(Ql(t,e,n),Zi(t,e,n))}};function rf(e,t,n,i,o,s,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,p):t.prototype&&t.prototype.isPureReactComponent?!Ga(n,i)||!Ga(o,s):!0}function cf(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Gd.enqueueReplaceState(t,t.state,null)}function lr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=me({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function df(e){Xo(e)}function uf(e){console.error(e)}function ff(e){Xo(e)}function ed(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function pf(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function $d(e,t,n){return n=Ta(n),n.tag=3,n.payload={element:null},n.callback=function(){ed(e,t)},n}function hf(e){return e=Ta(e),e.tag=3,e}function gf(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=i.value;e.payload=function(){return o(s)},e.callback=function(){pf(t,n,i)}}var p=n.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){pf(t,n,i),typeof o!="function"&&(as===null?as=new Set([this]):as.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})})}function zh(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Zo(t,n,o,!0),n=Un.current,n!==null){switch(n.tag){case 31:case 13:return rl===null?fd():n.alternate===null&&Rn===0&&(Rn=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===oo?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),yu(e,i,o)),!1;case 22:return n.flags|=65536,i===oo?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),yu(e,i,o)),!1}throw Error(f(435,n.tag))}return yu(e,i,o),fd(),!1}if(Rt)return t=Un.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Xs&&(e=Error(f(422),{cause:i}),qo(Ml(e,n)))):(i!==Xs&&(t=Error(f(423),{cause:i}),qo(Ml(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Ml(i,n),o=$d(e.stateNode,i,o),cc(e,o),Rn!==4&&(Rn=2)),!1;var s=Error(f(520),{cause:i});if(s=Ml(s,n),Cc===null?Cc=[s]:Cc.push(s),Rn!==4&&(Rn=2),t===null)return!0;i=Ml(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=$d(n.stateNode,i,e),cc(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(as===null||!as.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=hf(o),gf(o,e,n,i),cc(n,o),!1}n=n.return}while(n!==null);return!1}var Fd=Error(f(461)),Pn=!1;function vl(e,t,n,i){t.child=e===null?Zc(t,null,n,i):co(t,e.child,n,i)}function xf(e,t,n,i,o){n=n.render;var s=t.ref;if("ref"in i){var p={};for(var S in i)S!=="ref"&&(p[S]=i[S])}else p=i;return to(t),i=go(e,t,n,p,s,o),S=gc(),e!==null&&!Pn?(xc(e,t,o),xo(e,t,o)):(Rt&&S&&Ys(t),t.flags|=1,vl(e,t,i,o),t.child)}function yf(e,t,n,i,o){if(e===null){var s=n.type;return typeof s=="function"&&!Go(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,bf(e,t,s,i,o)):(e=Za(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!tu(e,o)){var p=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ga,n(p,i)&&e.ref===t.ref)return xo(e,t,o)}return t.flags|=1,e=Pl(s,i),e.ref=t.ref,e.return=t,t.child=e}function bf(e,t,n,i,o){if(e!==null){var s=e.memoizedProps;if(Ga(s,i)&&e.ref===t.ref)if(Pn=!1,t.pendingProps=i=s,tu(e,o))(e.flags&131072)!==0&&(Pn=!0);else return t.lanes=e.lanes,xo(e,t,o)}return Ld(e,t,n,i,o)}function vf(e,t,n,i){var o=i.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~s}else i=0,t.child=null;return mf(e,t,s,n,i)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&jr(t,s!==null?s.cachePool:null),s!==null?Jo(t,s):Js(),cl(t);else return i=t.lanes=536870912,mf(e,t,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(jr(t,s.cachePool),Jo(t,s),Ca(),t.memoizedState=null):(e!==null&&jr(t,null),Js(),Ca());return vl(e,t,o,n),t.child}function bc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function mf(e,t,n,i,o){var s=Ls();return s=s===null?null:{parent:an._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&jr(t,null),Js(),cl(t),e!==null&&Zo(e,t,i,!0),t.childLanes=o,null}function td(e,t){return t=ld({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Sf(e,t,n){return co(t,e.child,null,n),e=td(t,t.pendingProps),e.flags|=2,Bl(t),t.memoizedState=null,e}function Rh(e,t,n){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Rt){if(i.mode==="hidden")return e=td(t,i),t.lanes=536870912,bc(null,e);if(er(t),(e=$t)?(e=Up(e,bl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:yi!==null?{id:yl,overflow:Yl}:null,retryLane:536870912,hydrationErrors:null},n=Qa(e),n.return=t,t.child=n,Vn=t,$t=null)):e=null,e===null)throw Wi(t);return t.lanes=536870912,null}return td(t,i)}var s=e.memoizedState;if(s!==null){var p=s.dehydrated;if(er(t),o)if(t.flags&256)t.flags&=-257,t=Sf(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(f(558));else if(Pn||Zo(e,t,n,!1),o=(n&e.childLanes)!==0,Pn||o){if(i=sn,i!==null&&(p=Ot(i,n),p!==0&&p!==s.retryLane))throw s.retryLane=p,nt(e,p),Ql(i,e,p),Fd;fd(),t=Sf(e,t,n)}else e=s.treeContext,$t=Ti(p.nextSibling),Vn=t,Rt=!0,Ul=null,bl=!1,e!==null&&Is(t,e),t=td(t,i),t.flags|=4096;return t}return e=Pl(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function nd(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(f(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ld(e,t,n,i,o){return to(t),n=go(e,t,n,i,void 0,o),i=gc(),e!==null&&!Pn?(xc(e,t,o),xo(e,t,o)):(Rt&&i&&Ys(t),t.flags|=1,vl(e,t,n,o),t.child)}function wf(e,t,n,i,o,s){return to(t),t.updateQueue=null,n=pc(t,i,n,o),Qc(e),i=gc(),e!==null&&!Pn?(xc(e,t,s),xo(e,t,s)):(Rt&&i&&Ys(t),t.flags|=1,vl(e,t,n,s),t.child)}function jf(e,t,n,i,o){if(to(t),t.stateNode===null){var s=Ei,p=n.contextType;typeof p=="object"&&p!==null&&(s=Qn(p)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Gd,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Ko(t),p=n.contextType,s.context=typeof p=="object"&&p!==null?Qn(p):Ei,s.state=t.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(Xd(t,n,p,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(p=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),p!==s.state&&Gd.enqueueReplaceState(s,s.state,null),uo(t,i,s,o),Qs(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var S=t.memoizedProps,A=lr(n,S);s.props=A;var F=s.context,ue=n.contextType;p=Ei,typeof ue=="object"&&ue!==null&&(p=Qn(ue));var xe=n.getDerivedStateFromProps;ue=typeof xe=="function"||typeof s.getSnapshotBeforeUpdate=="function",S=t.pendingProps!==S,ue||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(S||F!==p)&&cf(t,s,i,p),ja=!1;var K=t.memoizedState;s.state=K,uo(t,i,s,o),Qs(),F=t.memoizedState,S||K!==F||ja?(typeof xe=="function"&&(Xd(t,n,xe,i),F=t.memoizedState),(A=ja||rf(t,n,A,i,K,F,p))?(ue||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=F),s.props=i,s.state=F,s.context=p,i=A):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,zr(e,t),p=t.memoizedProps,ue=lr(n,p),s.props=ue,xe=t.pendingProps,K=s.context,F=n.contextType,A=Ei,typeof F=="object"&&F!==null&&(A=Qn(F)),S=n.getDerivedStateFromProps,(F=typeof S=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(p!==xe||K!==A)&&cf(t,s,i,A),ja=!1,K=t.memoizedState,s.state=K,uo(t,i,s,o),Qs();var te=t.memoizedState;p!==xe||K!==te||ja||e!==null&&e.dependencies!==null&&mr(e.dependencies)?(typeof S=="function"&&(Xd(t,n,S,i),te=t.memoizedState),(ue=ja||rf(t,n,ue,i,K,te,A)||e!==null&&e.dependencies!==null&&mr(e.dependencies))?(F||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,te,A),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,te,A)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||p===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=te),s.props=i,s.state=te,s.context=A,i=ue):(typeof s.componentDidUpdate!="function"||p===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,nd(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=co(t,e.child,null,o),t.child=co(t,null,n,o)):vl(e,t,n,o),t.memoizedState=s.state,e=t.child):e=xo(e,t,o),e}function Tf(e,t,n,i){return eo(),t.flags|=256,vl(e,t,n,i),t.child}var qd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zd(e){return{baseLanes:e,cachePool:qc()}}function Qd(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=di),e}function Cf(e,t,n){var i=t.pendingProps,o=!1,s=(t.flags&128)!==0,p;if((p=s)||(p=e!==null&&e.memoizedState===null?!1:(vn.current&2)!==0),p&&(o=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Rt){if(o?mi(t):Ca(),(e=$t)?(e=Up(e,bl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:yi!==null?{id:yl,overflow:Yl}:null,retryLane:536870912,hydrationErrors:null},n=Qa(e),n.return=t,t.child=n,Vn=t,$t=null)):e=null,e===null)throw Wi(t);return Uu(e)?t.lanes=32:t.lanes=536870912,null}var S=i.children;return i=i.fallback,o?(Ca(),o=t.mode,S=ld({mode:"hidden",children:S},o),i=Vi(i,o,n,null),S.return=t,i.return=t,S.sibling=i,t.child=S,i=t.child,i.memoizedState=Zd(n),i.childLanes=Qd(e,p,n),t.memoizedState=qd,bc(null,i)):(mi(t),Kd(t,S))}var A=e.memoizedState;if(A!==null&&(S=A.dehydrated,S!==null)){if(s)t.flags&256?(mi(t),t.flags&=-257,t=Jd(e,t,n)):t.memoizedState!==null?(Ca(),t.child=e.child,t.flags|=128,t=null):(Ca(),S=i.fallback,o=t.mode,i=ld({mode:"visible",children:i.children},o),S=Vi(S,o,n,null),S.flags|=2,i.return=t,S.return=t,i.sibling=S,t.child=i,co(t,e.child,null,n),i=t.child,i.memoizedState=Zd(n),i.childLanes=Qd(e,p,n),t.memoizedState=qd,t=bc(null,i));else if(mi(t),Uu(S)){if(p=S.nextSibling&&S.nextSibling.dataset,p)var F=p.dgst;p=F,i=Error(f(419)),i.stack="",i.digest=p,qo({value:i,source:null,stack:null}),t=Jd(e,t,n)}else if(Pn||Zo(e,t,n,!1),p=(n&e.childLanes)!==0,Pn||p){if(p=sn,p!==null&&(i=Ot(p,n),i!==0&&i!==A.retryLane))throw A.retryLane=i,nt(e,i),Ql(p,e,i),Fd;Mu(S)||fd(),t=Jd(e,t,n)}else Mu(S)?(t.flags|=192,t.child=e.child,t=null):(e=A.treeContext,$t=Ti(S.nextSibling),Vn=t,Rt=!0,Ul=null,bl=!1,e!==null&&Is(t,e),t=Kd(t,i.children),t.flags|=4096);return t}return o?(Ca(),S=i.fallback,o=t.mode,A=e.child,F=A.sibling,i=Pl(A,{mode:"hidden",children:i.children}),i.subtreeFlags=A.subtreeFlags&65011712,F!==null?S=Pl(F,S):(S=Vi(S,o,n,null),S.flags|=2),S.return=t,i.return=t,i.sibling=S,t.child=i,bc(null,i),i=t.child,S=e.child.memoizedState,S===null?S=Zd(n):(o=S.cachePool,o!==null?(A=an._currentValue,o=o.parent!==A?{parent:A,pool:A}:o):o=qc(),S={baseLanes:S.baseLanes|n,cachePool:o}),i.memoizedState=S,i.childLanes=Qd(e,p,n),t.memoizedState=qd,bc(e.child,i)):(mi(t),n=e.child,e=n.sibling,n=Pl(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=n,t.memoizedState=null,n)}function Kd(e,t){return t=ld({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ld(e,t){return e=En(22,e,null,t),e.lanes=0,e}function Jd(e,t,n){return co(t,e.child,null,n),e=Kd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zf(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),ac(e.return,t,n)}function eu(e,t,n,i,o,s){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:s}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=i,p.tail=n,p.tailMode=o,p.treeForkCount=s)}function Rf(e,t,n){var i=t.pendingProps,o=i.revealOrder,s=i.tail;i=i.children;var p=vn.current,S=(p&2)!==0;if(S?(p=p&1|2,t.flags|=128):p&=1,pe(vn,p),vl(e,t,i,n),i=Rt?Ja:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zf(e,n,t);else if(e.tag===19)zf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&tr(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),eu(t,!1,o,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&tr(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}eu(t,!0,n,null,s,i);break;case"together":eu(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function xo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),is|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Zo(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(f(153));if(t.child!==null){for(e=t.child,n=Pl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Pl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function tu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&mr(e)))}function kh(e,t,n){switch(t.tag){case 3:fn(t,t.stateNode.containerInfo),ma(t,an,e.memoizedState.cache),eo();break;case 27:case 5:Rl(t);break;case 4:fn(t,t.stateNode.containerInfo);break;case 10:ma(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,er(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(mi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Cf(e,t,n):(mi(t),e=xo(e,t,n),e!==null?e.sibling:null);mi(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Zo(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return Rf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),pe(vn,vn.current),i)break;return null;case 22:return t.lanes=0,vf(e,t,n,t.pendingProps);case 24:ma(t,an,e.memoizedState.cache)}return xo(e,t,n)}function kf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Pn=!0;else{if(!tu(e,n)&&(t.flags&128)===0)return Pn=!1,kh(e,t,n);Pn=(e.flags&131072)!==0}else Pn=!1,Rt&&(t.flags&1048576)!==0&&Fo(t,Ja,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=Li(t.elementType),t.type=e,typeof e=="function")Go(e)?(i=lr(e,i),t.tag=1,t=jf(null,t,e,i,n)):(t.tag=0,t=Ld(null,t,e,i,n));else{if(e!=null){var o=e.$$typeof;if(o===it){t.tag=11,t=xf(null,t,e,i,n);break e}else if(o===u){t.tag=14,t=yf(null,t,e,i,n);break e}}throw t=Pe(e)||e,Error(f(306,t,""))}}return t;case 0:return Ld(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=lr(i,t.pendingProps),jf(e,t,i,o,n);case 3:e:{if(fn(t,t.stateNode.containerInfo),e===null)throw Error(f(387));i=t.pendingProps;var s=t.memoizedState;o=s.element,zr(e,t),uo(t,i,null,n);var p=t.memoizedState;if(i=p.cache,ma(t,an,i),i!==s.cache&&oc(t,[an],n,!0),Qs(),i=p.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Tf(e,t,i,n);break e}else if(i!==o){o=Ml(Error(f(424)),t),qo(o),t=Tf(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=Ti(e.firstChild),Vn=t,Rt=!0,Ul=null,bl=!0,n=Zc(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(eo(),i===o){t=xo(e,t,n);break e}vl(e,t,i,n)}t=t.child}return t;case 26:return nd(e,t),e===null?(n=Vp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Rt||(n=t.type,e=t.pendingProps,i=vd(ut.current).createElement(n),i[An]=t,i[Fe]=e,ml(i,n,e),en(i),t.stateNode=i):t.memoizedState=Vp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Rl(t),e===null&&Rt&&(i=t.stateNode=Op(t.type,t.pendingProps,ut.current),Vn=t,bl=!0,o=$t,cs(t.type)?(Bu=o,$t=Ti(i.firstChild)):$t=o),vl(e,t,t.pendingProps.children,n),nd(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Rt&&((o=i=$t)&&(i=ig(i,t.type,t.pendingProps,bl),i!==null?(t.stateNode=i,Vn=t,$t=Ti(i.firstChild),bl=!1,o=!0):o=!1),o||Wi(t)),Rl(t),o=t.type,s=t.pendingProps,p=e!==null?e.memoizedProps:null,i=s.children,Du(o,s)?i=null:p!==null&&Du(o,p)&&(t.flags|=32),t.memoizedState!==null&&(o=go(e,t,hc,null,null,n),Uc._currentValue=o),nd(e,t),vl(e,t,i,n),t.child;case 6:return e===null&&Rt&&((e=n=$t)&&(n=ag(n,t.pendingProps,bl),n!==null?(t.stateNode=n,Vn=t,$t=null,e=!0):e=!1),e||Wi(t)),null;case 13:return Cf(e,t,n);case 4:return fn(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=co(t,null,i,n):vl(e,t,i,n),t.child;case 11:return xf(e,t,t.type,t.pendingProps,n);case 7:return vl(e,t,t.pendingProps,n),t.child;case 8:return vl(e,t,t.pendingProps.children,n),t.child;case 12:return vl(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,ma(t,t.type,i.value),vl(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,to(t),o=Qn(o),i=i(o),t.flags|=1,vl(e,t,i,n),t.child;case 14:return yf(e,t,t.type,t.pendingProps,n);case 15:return bf(e,t,t.type,t.pendingProps,n);case 19:return Rf(e,t,n);case 31:return Rh(e,t,n);case 22:return vf(e,t,n,t.pendingProps);case 24:return to(t),i=Qn(an),e===null?(o=Ls(),o===null&&(o=sn,s=Sa(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:i,cache:o},Ko(t),ma(t,an,o)):((e.lanes&n)!==0&&(zr(e,t),uo(t,null,null,n),Qs()),o=e.memoizedState,s=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),ma(t,an,i)):(i=s.cache,ma(t,an,i),i!==o.cache&&oc(t,[an],n,!0))),vl(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(f(156,t.tag))}function yo(e){e.flags|=4}function nu(e,t,n,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(tp())e.flags|=8192;else throw so=oo,Fi}else e.flags&=-16777217}function Df(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Xp(t))if(tp())e.flags|=8192;else throw so=oo,Fi}function id(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?mt():536870912,e.lanes|=t,Br|=t)}function vc(e,t){if(!Rt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function gn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Dh(e,t,n){var i=t.pendingProps;switch(vr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(t),null;case 1:return gn(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Yi(an),Ut(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Lo(t)?yo(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ic())),gn(t),null;case 26:var o=t.type,s=t.memoizedState;return e===null?(yo(t),s!==null?(gn(t),Df(t,s)):(gn(t),nu(t,o,null,i,n))):s?s!==e.memoizedState?(yo(t),gn(t),Df(t,s)):(gn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&yo(t),gn(t),nu(t,o,e,i,n)),null;case 27:if(fl(t),n=ut.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&yo(t);else{if(!i){if(t.stateNode===null)throw Error(f(166));return gn(t),null}e=Ne.current,Lo(t)?Gs(t):(e=Op(o,i,n),t.stateNode=e,yo(t))}return gn(t),null;case 5:if(fl(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&yo(t);else{if(!i){if(t.stateNode===null)throw Error(f(166));return gn(t),null}if(s=Ne.current,Lo(t))Gs(t);else{var p=vd(ut.current);switch(s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?p.createElement("select",{is:i.is}):p.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?p.createElement(o,{is:i.is}):p.createElement(o)}}s[An]=t,s[Fe]=i;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=s;e:switch(ml(s,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&yo(t)}}return gn(t),nu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&yo(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(f(166));if(e=ut.current,Lo(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=Vn,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[An]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Cp(e.nodeValue,n)),e||Wi(t,!0)}else e=vd(e).createTextNode(i),e[An]=t,t.stateNode=e}return gn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Lo(t),n!==null){if(e===null){if(!i)throw Error(f(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(f(557));e[An]=t}else eo(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gn(t),e=!1}else n=ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Bl(t),t):(Bl(t),null);if((t.flags&128)!==0)throw Error(f(558))}return gn(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Lo(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(f(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(f(317));o[An]=t}else eo(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gn(t),o=!1}else o=ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Bl(t),t):(Bl(t),null)}return Bl(t),(t.flags&128)!==0?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),id(t,t.updateQueue),gn(t),null);case 4:return Ut(),e===null&&Tu(t.stateNode.containerInfo),gn(t),null;case 10:return Yi(t.type),gn(t),null;case 19:if(O(vn),i=t.memoizedState,i===null)return gn(t),null;if(o=(t.flags&128)!==0,s=i.rendering,s===null)if(o)vc(i,!1);else{if(Rn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=tr(e),s!==null){for(t.flags|=128,vc(i,!1),e=s.updateQueue,t.updateQueue=e,id(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Fc(n,e),n=n.sibling;return pe(vn,vn.current&1|2),Rt&&zn(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&vt()>cd&&(t.flags|=128,o=!0,vc(i,!1),t.lanes=4194304)}else{if(!o)if(e=tr(s),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,id(t,e),vc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Rt)return gn(t),null}else 2*vt()-i.renderingStartTime>cd&&n!==536870912&&(t.flags|=128,o=!0,vc(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(e=i.last,e!==null?e.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vt(),e.sibling=null,n=vn.current,pe(vn,o?n&1|2:n&1),Rt&&zn(t,i.treeForkCount),e):(gn(t),null);case 22:case 23:return Bl(t),po(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(n&536870912)!==0&&(t.flags&128)===0&&(gn(t),t.subtreeFlags&6&&(t.flags|=8192)):gn(t),n=t.updateQueue,n!==null&&id(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&O(Wn),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Yi(an),gn(t),null;case 25:return null;case 30:return null}throw Error(f(156,t.tag))}function Ah(e,t){switch(vr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yi(an),Ut(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return fl(t),null;case 31:if(t.memoizedState!==null){if(Bl(t),t.alternate===null)throw Error(f(340));eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Bl(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(f(340));eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return O(vn),null;case 4:return Ut(),null;case 10:return Yi(t.type),null;case 22:case 23:return Bl(t),po(),e!==null&&O(Wn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Yi(an),null;case 25:return null;default:return null}}function Af(e,t){switch(vr(t),t.tag){case 3:Yi(an),Ut();break;case 26:case 27:case 5:fl(t);break;case 4:Ut();break;case 31:t.memoizedState!==null&&Bl(t);break;case 13:Bl(t);break;case 19:O(vn);break;case 10:Yi(t.type);break;case 22:case 23:Bl(t),po(),e!==null&&O(Wn);break;case 24:Yi(an)}}function mc(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var s=n.create,p=n.inst;i=s(),p.destroy=i}n=n.next}while(n!==o)}}catch(S){Lt(t,t.return,S)}}function ns(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&e)===e){var p=i.inst,S=p.destroy;if(S!==void 0){p.destroy=void 0,o=t;var A=n,F=S;try{F()}catch(ue){Lt(o,A,ue)}}}i=i.next}while(i!==s)}}catch(ue){Lt(t,t.return,ue)}}function Nf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{dc(t,n)}catch(i){Lt(e,e.return,i)}}}function Mf(e,t,n){n.props=lr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Lt(e,t,i)}}function Sc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){Lt(e,t,o)}}function Da(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){Lt(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Lt(e,t,o)}else n.current=null}function Uf(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){Lt(e,e.return,o)}}function lu(e,t,n){try{var i=e.stateNode;Kh(i,e.type,n,t),i[Fe]=t}catch(o){Lt(e,e.return,o)}}function Bf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&cs(e.type)||e.tag===4}function iu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&cs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function au(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hi));else if(i!==4&&(i===27&&cs(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(au(e,t,n),e=e.sibling;e!==null;)au(e,t,n),e=e.sibling}function ad(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&cs(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ad(e,t,n),e=e.sibling;e!==null;)ad(e,t,n),e=e.sibling}function _f(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ml(t,i,n),t[An]=e,t[Fe]=n}catch(s){Lt(e,e.return,s)}}var bo=!1,Yn=!1,ou=!1,Of=typeof WeakSet=="function"?WeakSet:Set,ul=null;function Nh(e,t){if(e=e.containerInfo,Ru=zd,e=$a(e),Kr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var p=0,S=-1,A=-1,F=0,ue=0,xe=e,K=null;t:for(;;){for(var te;xe!==n||o!==0&&xe.nodeType!==3||(S=p+o),xe!==s||i!==0&&xe.nodeType!==3||(A=p+i),xe.nodeType===3&&(p+=xe.nodeValue.length),(te=xe.firstChild)!==null;)K=xe,xe=te;for(;;){if(xe===e)break t;if(K===n&&++F===o&&(S=p),K===s&&++ue===i&&(A=p),(te=xe.nextSibling)!==null)break;xe=K,K=xe.parentNode}xe=te}n=S===-1||A===-1?null:{start:S,end:A}}else n=null}n=n||{start:0,end:0}}else n=null;for(ku={focusedElem:e,selectionRange:n},zd=!1,ul=t;ul!==null;)if(t=ul,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ul=e;else for(;ul!==null;){switch(t=ul,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,o=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var Ge=lr(n.type,o);e=i.getSnapshotBeforeUpdate(Ge,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(ot){Lt(n,n.return,ot)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Nu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(f(163))}if(e=t.sibling,e!==null){e.return=t.return,ul=e;break}ul=t.return}}function Hf(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:mo(e,n),i&4&&mc(5,n);break;case 1:if(mo(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(p){Lt(n,n.return,p)}else{var o=lr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Lt(n,n.return,p)}}i&64&&Nf(n),i&512&&Sc(n,n.return);break;case 3:if(mo(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{dc(e,t)}catch(p){Lt(n,n.return,p)}}break;case 27:t===null&&i&4&&_f(n);case 26:case 5:mo(e,n),t===null&&i&4&&Uf(n),i&512&&Sc(n,n.return);break;case 12:mo(e,n);break;case 31:mo(e,n),i&4&&Wf(e,n);break;case 13:mo(e,n),i&4&&Pf(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Wh.bind(null,n),og(e,n))));break;case 22:if(i=n.memoizedState!==null||bo,!i){t=t!==null&&t.memoizedState!==null||Yn,o=bo;var s=Yn;bo=i,(Yn=t)&&!s?So(e,n,(n.subtreeFlags&8772)!==0):mo(e,n),bo=o,Yn=s}break;case 30:break;default:mo(e,n)}}function Ef(e){var t=e.alternate;t!==null&&(e.alternate=null,Ef(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Dl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Sn=null,Fl=!1;function vo(e,t,n){for(n=n.child;n!==null;)Vf(e,t,n),n=n.sibling}function Vf(e,t,n){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(Ua,n)}catch{}switch(n.tag){case 26:Yn||Da(n,t),vo(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Yn||Da(n,t);var i=Sn,o=Fl;cs(n.type)&&(Sn=n.stateNode,Fl=!1),vo(e,t,n),Ac(n.stateNode),Sn=i,Fl=o;break;case 5:Yn||Da(n,t);case 6:if(i=Sn,o=Fl,Sn=null,vo(e,t,n),Sn=i,Fl=o,Sn!==null)if(Fl)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(n.stateNode)}catch(s){Lt(n,t,s)}else try{Sn.removeChild(n.stateNode)}catch(s){Lt(n,t,s)}break;case 18:Sn!==null&&(Fl?(e=Sn,Np(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Yr(e)):Np(Sn,n.stateNode));break;case 4:i=Sn,o=Fl,Sn=n.stateNode.containerInfo,Fl=!0,vo(e,t,n),Sn=i,Fl=o;break;case 0:case 11:case 14:case 15:ns(2,n,t),Yn||ns(4,n,t),vo(e,t,n);break;case 1:Yn||(Da(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Mf(n,t,i)),vo(e,t,n);break;case 21:vo(e,t,n);break;case 22:Yn=(i=Yn)||n.memoizedState!==null,vo(e,t,n),Yn=i;break;default:vo(e,t,n)}}function Wf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Yr(e)}catch(n){Lt(t,t.return,n)}}}function Pf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Yr(e)}catch(n){Lt(t,t.return,n)}}function Mh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Of),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Of),t;default:throw Error(f(435,e.tag))}}function od(e,t){var n=Mh(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var o=Ph.bind(null,e,i);i.then(o,o)}})}function Ll(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],s=e,p=t,S=p;e:for(;S!==null;){switch(S.tag){case 27:if(cs(S.type)){Sn=S.stateNode,Fl=!1;break e}break;case 5:Sn=S.stateNode,Fl=!1;break e;case 3:case 4:Sn=S.stateNode.containerInfo,Fl=!0;break e}S=S.return}if(Sn===null)throw Error(f(160));Vf(s,p,o),Sn=null,Fl=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Yf(t,e),t=t.sibling}var Ji=null;function Yf(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ll(t,e),ql(e),i&4&&(ns(3,e,e.return),mc(3,e),ns(5,e,e.return));break;case 1:Ll(t,e),ql(e),i&512&&(Yn||n===null||Da(n,n.return)),i&64&&bo&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=Ji;if(Ll(t,e),ql(e),i&512&&(Yn||n===null||Da(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":s=o.getElementsByTagName("title")[0],(!s||s[hl]||s[An]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(i),o.head.insertBefore(s,o.querySelector("head > title"))),ml(s,i,n),s[An]=e,en(s),i=s;break e;case"link":var p=Yp("link","href",o).get(i+(n.href||""));if(p){for(var S=0;S<p.length;S++)if(s=p[S],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){p.splice(S,1);break t}}s=o.createElement(i),ml(s,i,n),o.head.appendChild(s);break;case"meta":if(p=Yp("meta","content",o).get(i+(n.content||""))){for(S=0;S<p.length;S++)if(s=p[S],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){p.splice(S,1);break t}}s=o.createElement(i),ml(s,i,n),o.head.appendChild(s);break;default:throw Error(f(468,i))}s[An]=e,en(s),i=s}e.stateNode=i}else Ip(o,e.type,e.stateNode);else e.stateNode=Pp(o,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Ip(o,e.type,e.stateNode):Pp(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&lu(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ll(t,e),ql(e),i&512&&(Yn||n===null||Da(n,n.return)),n!==null&&i&4&&lu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ll(t,e),ql(e),i&512&&(Yn||n===null||Da(n,n.return)),e.flags&32){o=e.stateNode;try{qt(o,"")}catch(Ge){Lt(e,e.return,Ge)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,lu(e,o,n!==null?n.memoizedProps:o)),i&1024&&(ou=!0);break;case 6:if(Ll(t,e),ql(e),i&4){if(e.stateNode===null)throw Error(f(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(Ge){Lt(e,e.return,Ge)}}break;case 3:if(wd=null,o=Ji,Ji=md(t.containerInfo),Ll(t,e),Ji=o,ql(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Yr(t.containerInfo)}catch(Ge){Lt(e,e.return,Ge)}ou&&(ou=!1,If(e));break;case 4:i=Ji,Ji=md(e.stateNode.containerInfo),Ll(t,e),ql(e),Ji=i;break;case 12:Ll(t,e),ql(e);break;case 31:Ll(t,e),ql(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,od(e,i)));break;case 13:Ll(t,e),ql(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(rd=vt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,od(e,i)));break;case 22:o=e.memoizedState!==null;var A=n!==null&&n.memoizedState!==null,F=bo,ue=Yn;if(bo=F||o,Yn=ue||A,Ll(t,e),Yn=ue,bo=F,ql(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||A||bo||Yn||ir(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){A=n=t;try{if(s=A.stateNode,o)p=s.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{S=A.stateNode;var xe=A.memoizedProps.style,K=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;S.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Ge){Lt(A,A.return,Ge)}}}else if(t.tag===6){if(n===null){A=t;try{A.stateNode.nodeValue=o?"":A.memoizedProps}catch(Ge){Lt(A,A.return,Ge)}}}else if(t.tag===18){if(n===null){A=t;try{var te=A.stateNode;o?Mp(te,!0):Mp(A.stateNode,!1)}catch(Ge){Lt(A,A.return,Ge)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,od(e,n))));break;case 19:Ll(t,e),ql(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,od(e,i)));break;case 30:break;case 21:break;default:Ll(t,e),ql(e)}}function ql(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(Bf(i)){n=i;break}i=i.return}if(n==null)throw Error(f(160));switch(n.tag){case 27:var o=n.stateNode,s=iu(e);ad(e,s,o);break;case 5:var p=n.stateNode;n.flags&32&&(qt(p,""),n.flags&=-33);var S=iu(e);ad(e,S,p);break;case 3:case 4:var A=n.stateNode.containerInfo,F=iu(e);au(e,F,A);break;default:throw Error(f(161))}}catch(ue){Lt(e,e.return,ue)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function If(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;If(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function mo(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Hf(e,t.alternate,t),t=t.sibling}function ir(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ns(4,t,t.return),ir(t);break;case 1:Da(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Mf(t,t.return,n),ir(t);break;case 27:Ac(t.stateNode);case 26:case 5:Da(t,t.return),ir(t);break;case 22:t.memoizedState===null&&ir(t);break;case 30:ir(t);break;default:ir(t)}e=e.sibling}}function So(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,s=t,p=s.flags;switch(s.tag){case 0:case 11:case 15:So(o,s,n),mc(4,s);break;case 1:if(So(o,s,n),i=s,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(F){Lt(i,i.return,F)}if(i=s,o=i.updateQueue,o!==null){var S=i.stateNode;try{var A=o.shared.hiddenCallbacks;if(A!==null)for(o.shared.hiddenCallbacks=null,o=0;o<A.length;o++)Rr(A[o],S)}catch(F){Lt(i,i.return,F)}}n&&p&64&&Nf(s),Sc(s,s.return);break;case 27:_f(s);case 26:case 5:So(o,s,n),n&&i===null&&p&4&&Uf(s),Sc(s,s.return);break;case 12:So(o,s,n);break;case 31:So(o,s,n),n&&p&4&&Wf(o,s);break;case 13:So(o,s,n),n&&p&4&&Pf(o,s);break;case 22:s.memoizedState===null&&So(o,s,n),Sc(s,s.return);break;case 30:break;default:So(o,s,n)}t=t.sibling}}function su(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&wa(n))}function ru(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wa(e))}function ea(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xf(e,t,n,i),t=t.sibling}function Xf(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:ea(e,t,n,i),o&2048&&mc(9,t);break;case 1:ea(e,t,n,i);break;case 3:ea(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&wa(e)));break;case 12:if(o&2048){ea(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,p=s.id,S=s.onPostCommit;typeof S=="function"&&S(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Lt(t,t.return,A)}}else ea(e,t,n,i);break;case 31:ea(e,t,n,i);break;case 13:ea(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,p=t.alternate,t.memoizedState!==null?s._visibility&2?ea(e,t,n,i):wc(e,t):s._visibility&2?ea(e,t,n,i):(s._visibility|=2,Nr(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&su(p,t);break;case 24:ea(e,t,n,i),o&2048&&ru(t.alternate,t);break;default:ea(e,t,n,i)}}function Nr(e,t,n,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,p=t,S=n,A=i,F=p.flags;switch(p.tag){case 0:case 11:case 15:Nr(s,p,S,A,o),mc(8,p);break;case 23:break;case 22:var ue=p.stateNode;p.memoizedState!==null?ue._visibility&2?Nr(s,p,S,A,o):wc(s,p):(ue._visibility|=2,Nr(s,p,S,A,o)),o&&F&2048&&su(p.alternate,p);break;case 24:Nr(s,p,S,A,o),o&&F&2048&&ru(p.alternate,p);break;default:Nr(s,p,S,A,o)}t=t.sibling}}function wc(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:wc(n,i),o&2048&&su(i.alternate,i);break;case 24:wc(n,i),o&2048&&ru(i.alternate,i);break;default:wc(n,i)}t=t.sibling}}var jc=8192;function Mr(e,t,n){if(e.subtreeFlags&jc)for(e=e.child;e!==null;)Gf(e,t,n),e=e.sibling}function Gf(e,t,n){switch(e.tag){case 26:Mr(e,t,n),e.flags&jc&&e.memoizedState!==null&&bg(n,Ji,e.memoizedState,e.memoizedProps);break;case 5:Mr(e,t,n);break;case 3:case 4:var i=Ji;Ji=md(e.stateNode.containerInfo),Mr(e,t,n),Ji=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=jc,jc=16777216,Mr(e,t,n),jc=i):Mr(e,t,n));break;default:Mr(e,t,n)}}function $f(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Tc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ul=i,Lf(i,e)}$f(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ff(e),e=e.sibling}function Ff(e){switch(e.tag){case 0:case 11:case 15:Tc(e),e.flags&2048&&ns(9,e,e.return);break;case 3:Tc(e);break;case 12:Tc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,sd(e)):Tc(e);break;default:Tc(e)}}function sd(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];ul=i,Lf(i,e)}$f(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ns(8,t,t.return),sd(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,sd(t));break;default:sd(t)}e=e.sibling}}function Lf(e,t){for(;ul!==null;){var n=ul;switch(n.tag){case 0:case 11:case 15:ns(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:wa(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ul=i;else e:for(n=e;ul!==null;){i=ul;var o=i.sibling,s=i.return;if(Ef(i),i===n){ul=null;break e}if(o!==null){o.return=s,ul=o;break e}ul=s}}}var Uh={getCacheForType:function(e){var t=Qn(an),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Qn(an).controller.signal}},Bh=typeof WeakMap=="function"?WeakMap:Map,Xt=0,sn=null,Dt=null,Nt=0,Ft=0,ci=null,ls=!1,Ur=!1,cu=!1,wo=0,Rn=0,is=0,ar=0,du=0,di=0,Br=0,Cc=null,Zl=null,uu=!1,rd=0,qf=0,cd=1/0,dd=null,as=null,el=0,os=null,_r=null,jo=0,fu=0,pu=null,Zf=null,zc=0,hu=null;function ui(){return(Xt&2)!==0&&Nt!==0?Nt&-Nt:U.T!==null?mu():vs()}function Qf(){if(di===0)if((Nt&536870912)===0||Rt){var e=Sl;Sl<<=1,(Sl&3932160)===0&&(Sl=262144),di=e}else di=536870912;return e=Un.current,e!==null&&(e.flags|=32),di}function Ql(e,t,n){(e===sn&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(Or(e,0),ss(e,Nt,di,!1)),ki(e,n),((Xt&2)===0||e!==sn)&&(e===sn&&((Xt&2)===0&&(ar|=n),Rn===4&&ss(e,Nt,di,!1)),Aa(e))}function Kf(e,t,n){if((Xt&6)!==0)throw Error(f(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Ue(e,t),o=i?Hh(e,t):xu(e,t,!0),s=i;do{if(o===0){Ur&&!i&&ss(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!_h(n)){o=xu(e,t,!1),s=!1;continue}if(o===2){if(s=t,e.errorRecoveryDisabledLanes&s)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var S=e;o=Cc;var A=S.current.memoizedState.isDehydrated;if(A&&(Or(S,p).flags|=256),p=xu(S,p,!1),p!==2){if(cu&&!A){S.errorRecoveryDisabledLanes|=s,ar|=s,o=4;break e}s=Zl,Zl=o,s!==null&&(Zl===null?Zl=s:Zl.push.apply(Zl,s))}o=p}if(s=!1,o!==2)continue}}if(o===1){Or(e,0),ss(e,t,0,!0);break}e:{switch(i=e,s=o,s){case 0:case 1:throw Error(f(345));case 4:if((t&4194048)!==t)break;case 6:ss(i,t,di,!ls);break e;case 2:Zl=null;break;case 3:case 5:break;default:throw Error(f(329))}if((t&62914560)===t&&(o=rd+300-vt(),10<o)){if(ss(i,t,di,!ls),ko(i,0,!0)!==0)break e;jo=t,i.timeoutHandle=Dp(Jf.bind(null,i,n,Zl,dd,uu,t,di,ar,Br,ls,s,"Throttled",-0,0),o);break e}Jf(i,n,Zl,dd,uu,t,di,ar,Br,ls,s,null,-0,0)}}break}while(!0);Aa(e)}function Jf(e,t,n,i,o,s,p,S,A,F,ue,xe,K,te){if(e.timeoutHandle=-1,xe=t.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},Gf(t,s,xe);var Ge=(s&62914560)===s?rd-vt():(s&4194048)===s?qf-vt():0;if(Ge=vg(xe,Ge),Ge!==null){jo=s,e.cancelPendingCommit=Ge(sp.bind(null,e,t,s,n,i,o,p,S,A,ue,xe,null,K,te)),ss(e,s,p,!F);return}}sp(e,t,s,n,i,o,p,S,A)}function _h(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!al(s(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ss(e,t,n,i){t&=~du,t&=~ar,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var s=31-ct(o),p=1<<s;i[s]=-1,o&=~p}n!==0&&Do(e,n,t)}function ud(){return(Xt&6)===0?(Rc(0),!1):!0}function gu(){if(Dt!==null){if(Ft===0)var e=Dt.return;else e=Dt,Pi=sl=null,kr(e),ro=null,vi=0,e=Dt;for(;e!==null;)Af(e.alternate,e),e=e.return;Dt=null}}function Or(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,tg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),jo=0,gu(),sn=e,Dt=n=Pl(e.current,null),Nt=t,Ft=0,ci=null,ls=!1,Ur=Ue(e,t),cu=!1,Br=di=du=ar=is=Rn=0,Zl=Cc=null,uu=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-ct(i),s=1<<o;t|=e[o],i&=~s}return wo=t,qa(),n}function ep(e,t){lt=null,U.H=yc,t===io||t===ao?(t=sc(),Ft=3):t===Fi?(t=sc(),Ft=4):Ft=t===Fd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ci=t,Dt===null&&(Rn=1,ed(e,Ml(t,e.current)))}function tp(){var e=Un.current;return e===null?!0:(Nt&4194048)===Nt?rl===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?e===rl:!1}function np(){var e=U.H;return U.H=yc,e===null?yc:e}function lp(){var e=U.A;return U.A=Uh,e}function fd(){Rn=4,ls||(Nt&4194048)!==Nt&&Un.current!==null||(Ur=!0),(is&134217727)===0&&(ar&134217727)===0||sn===null||ss(sn,Nt,di,!1)}function xu(e,t,n){var i=Xt;Xt|=2;var o=np(),s=lp();(sn!==e||Nt!==t)&&(dd=null,Or(e,t)),t=!1;var p=Rn;e:do try{if(Ft!==0&&Dt!==null){var S=Dt,A=ci;switch(Ft){case 8:gu(),p=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(t=!0);var F=Ft;if(Ft=0,ci=null,Hr(e,S,A,F),n&&Ur){p=0;break e}break;default:F=Ft,Ft=0,ci=null,Hr(e,S,A,F)}}Oh(),p=Rn;break}catch(ue){ep(e,ue)}while(!0);return t&&e.shellSuspendCounter++,Pi=sl=null,Xt=i,U.H=o,U.A=s,Dt===null&&(sn=null,Nt=0,qa()),p}function Oh(){for(;Dt!==null;)ip(Dt)}function Hh(e,t){var n=Xt;Xt|=2;var i=np(),o=lp();sn!==e||Nt!==t?(dd=null,cd=vt()+500,Or(e,t)):Ur=Ue(e,t);e:do try{if(Ft!==0&&Dt!==null){t=Dt;var s=ci;t:switch(Ft){case 1:Ft=0,ci=null,Hr(e,t,s,1);break;case 2:case 9:if(Tr(s)){Ft=0,ci=null,ap(t);break}t=function(){Ft!==2&&Ft!==9||sn!==e||(Ft=7),Aa(e)},s.then(t,t);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:Tr(s)?(Ft=0,ci=null,ap(t)):(Ft=0,ci=null,Hr(e,t,s,7));break;case 5:var p=null;switch(Dt.tag){case 26:p=Dt.memoizedState;case 5:case 27:var S=Dt;if(p?Xp(p):S.stateNode.complete){Ft=0,ci=null;var A=S.sibling;if(A!==null)Dt=A;else{var F=S.return;F!==null?(Dt=F,pd(F)):Dt=null}break t}}Ft=0,ci=null,Hr(e,t,s,5);break;case 6:Ft=0,ci=null,Hr(e,t,s,6);break;case 8:gu(),Rn=6;break e;default:throw Error(f(462))}}Eh();break}catch(ue){ep(e,ue)}while(!0);return Pi=sl=null,U.H=i,U.A=o,Xt=n,Dt!==null?0:(sn=null,Nt=0,qa(),Rn)}function Eh(){for(;Dt!==null&&!la();)ip(Dt)}function ip(e){var t=kf(e.alternate,e,wo);e.memoizedProps=e.pendingProps,t===null?pd(e):Dt=t}function ap(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=wf(n,t,t.pendingProps,t.type,void 0,Nt);break;case 11:t=wf(n,t,t.pendingProps,t.type.render,t.ref,Nt);break;case 5:kr(t);default:Af(n,t),t=Dt=Fc(t,wo),t=kf(n,t,wo)}e.memoizedProps=e.pendingProps,t===null?pd(e):Dt=t}function Hr(e,t,n,i){Pi=sl=null,kr(t),ro=null,vi=0;var o=t.return;try{if(zh(e,o,t,n,Nt)){Rn=1,ed(e,Ml(n,e.current)),Dt=null;return}}catch(s){if(o!==null)throw Dt=o,s;Rn=1,ed(e,Ml(n,e.current)),Dt=null;return}t.flags&32768?(Rt||i===1?e=!0:Ur||(Nt&536870912)!==0?e=!1:(ls=e=!0,(i===2||i===9||i===3||i===6)&&(i=Un.current,i!==null&&i.tag===13&&(i.flags|=16384))),op(t,e)):pd(t)}function pd(e){var t=e;do{if((t.flags&32768)!==0){op(t,ls);return}e=t.return;var n=Dh(t.alternate,t,wo);if(n!==null){Dt=n;return}if(t=t.sibling,t!==null){Dt=t;return}Dt=t=e}while(t!==null);Rn===0&&(Rn=5)}function op(e,t){do{var n=Ah(e.alternate,e);if(n!==null){n.flags&=32767,Dt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Dt=e;return}Dt=e=n}while(e!==null);Rn=6,Dt=null}function sp(e,t,n,i,o,s,p,S,A){e.cancelPendingCommit=null;do hd();while(el!==0);if((Xt&6)!==0)throw Error(f(327));if(t!==null){if(t===e.current)throw Error(f(177));if(s=t.lanes|t.childLanes,s|=Wl,ys(e,n,s,p,S,A),e===sn&&(Dt=sn=null,Nt=0),_r=t,os=e,jo=n,fu=s,pu=o,Zf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Yh(Oe,function(){return fp(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=U.T,U.T=null,o=ne.p,ne.p=2,p=Xt,Xt|=4;try{Nh(e,t,n)}finally{Xt=p,ne.p=o,U.T=i}}el=1,rp(),cp(),dp()}}function rp(){if(el===1){el=0;var e=os,t=_r,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=U.T,U.T=null;var i=ne.p;ne.p=2;var o=Xt;Xt|=4;try{Yf(t,e);var s=ku,p=$a(e.containerInfo),S=s.focusedElem,A=s.selectionRange;if(p!==S&&S&&S.ownerDocument&&Wo(S.ownerDocument.documentElement,S)){if(A!==null&&Kr(S)){var F=A.start,ue=A.end;if(ue===void 0&&(ue=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(ue,S.value.length);else{var xe=S.ownerDocument||document,K=xe&&xe.defaultView||window;if(K.getSelection){var te=K.getSelection(),Ge=S.textContent.length,ot=Math.min(A.start,Ge),Jt=A.end===void 0?ot:Math.min(A.end,Ge);!te.extend&&ot>Jt&&(p=Jt,Jt=ot,ot=p);var E=Es(S,ot),N=Es(S,Jt);if(E&&N&&(te.rangeCount!==1||te.anchorNode!==E.node||te.anchorOffset!==E.offset||te.focusNode!==N.node||te.focusOffset!==N.offset)){var $=xe.createRange();$.setStart(E.node,E.offset),te.removeAllRanges(),ot>Jt?(te.addRange($),te.extend(N.node,N.offset)):($.setEnd(N.node,N.offset),te.addRange($))}}}}for(xe=[],te=S;te=te.parentNode;)te.nodeType===1&&xe.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<xe.length;S++){var ge=xe[S];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}zd=!!Ru,ku=Ru=null}finally{Xt=o,ne.p=i,U.T=n}}e.current=t,el=2}}function cp(){if(el===2){el=0;var e=os,t=_r,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=U.T,U.T=null;var i=ne.p;ne.p=2;var o=Xt;Xt|=4;try{Hf(e,t.alternate,t)}finally{Xt=o,ne.p=i,U.T=n}}el=3}}function dp(){if(el===4||el===3){el=0,Co();var e=os,t=_r,n=jo,i=Zf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?el=5:(el=0,_r=os=null,up(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(as=null),xn(n),t=t.stateNode,Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(Ua,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=U.T,o=ne.p,ne.p=2,U.T=null;try{for(var s=e.onRecoverableError,p=0;p<i.length;p++){var S=i[p];s(S.value,{componentStack:S.stack})}}finally{U.T=t,ne.p=o}}(jo&3)!==0&&hd(),Aa(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===hu?zc++:(zc=0,hu=e):zc=0,Rc(0)}}function up(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,wa(t)))}function hd(){return rp(),cp(),dp(),fp()}function fp(){if(el!==5)return!1;var e=os,t=fu;fu=0;var n=xn(jo),i=U.T,o=ne.p;try{ne.p=32>n?32:n,U.T=null,n=pu,pu=null;var s=os,p=jo;if(el=0,_r=os=null,jo=0,(Xt&6)!==0)throw Error(f(331));var S=Xt;if(Xt|=4,Ff(s.current),Xf(s,s.current,p,n),Xt=S,Rc(0,!1),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(Ua,s)}catch{}return!0}finally{ne.p=o,U.T=i,up(e,t)}}function pp(e,t,n){t=Ml(n,t),t=$d(e.stateNode,t,2),e=qi(e,t,2),e!==null&&(ki(e,2),Aa(e))}function Lt(e,t,n){if(e.tag===3)pp(e,e,n);else for(;t!==null;){if(t.tag===3){pp(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(as===null||!as.has(i))){e=Ml(n,e),n=hf(2),i=qi(t,n,2),i!==null&&(gf(n,i,t,e),ki(i,2),Aa(i));break}}t=t.return}}function yu(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new Bh;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(cu=!0,o.add(n),e=Vh.bind(null,e,t,n),t.then(e,e))}function Vh(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sn===e&&(Nt&n)===n&&(Rn===4||Rn===3&&(Nt&62914560)===Nt&&300>vt()-rd?(Xt&2)===0&&Or(e,0):du|=n,Br===Nt&&(Br=0)),Aa(e)}function hp(e,t){t===0&&(t=mt()),e=nt(e,t),e!==null&&(ki(e,t),Aa(e))}function Wh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hp(e,n)}function Ph(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(f(314))}i!==null&&i.delete(t),hp(e,n)}function Yh(e,t){return Ie(e,t)}var gd=null,Er=null,bu=!1,xd=!1,vu=!1,rs=0;function Aa(e){e!==Er&&e.next===null&&(Er===null?gd=Er=e:Er=Er.next=e),xd=!0,bu||(bu=!0,Xh())}function Rc(e,t){if(!vu&&xd){vu=!0;do for(var n=!1,i=gd;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var s=0;else{var p=i.suspendedLanes,S=i.pingedLanes;s=(1<<31-ct(42|e)+1)-1,s&=o&~(p&~S),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,bp(i,s))}else s=Nt,s=ko(i,i===sn?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(s&3)===0||Ue(i,s)||(n=!0,bp(i,s));i=i.next}while(n);vu=!1}}function Ih(){gp()}function gp(){xd=bu=!1;var e=0;rs!==0&&eg()&&(e=rs);for(var t=vt(),n=null,i=gd;i!==null;){var o=i.next,s=xp(i,t);s===0?(i.next=null,n===null?gd=o:n.next=o,o===null&&(Er=n)):(n=i,(e!==0||(s&3)!==0)&&(xd=!0)),i=o}el!==0&&el!==5||Rc(e),rs!==0&&(rs=0)}function xp(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var p=31-ct(s),S=1<<p,A=o[p];A===-1?((S&n)===0||(S&i)!==0)&&(o[p]=ti(S,t)):A<=t&&(e.expiredLanes|=S),s&=~S}if(t=sn,n=Nt,n=ko(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Bt(i),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Ue(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Bt(i),xn(n)){case 2:case 8:n=ia;break;case 32:n=Oe;break;case 268435456:n=wt;break;default:n=Oe}return i=yp.bind(null,e),n=Ie(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Bt(i),e.callbackPriority=2,e.callbackNode=null,2}function yp(e,t){if(el!==0&&el!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(hd()&&e.callbackNode!==n)return null;var i=Nt;return i=ko(e,e===sn?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Kf(e,i,t),xp(e,vt()),e.callbackNode!=null&&e.callbackNode===n?yp.bind(null,e):null)}function bp(e,t){if(hd())return null;Kf(e,t,!0)}function Xh(){ng(function(){(Xt&6)!==0?Ie(ei,Ih):gp()})}function mu(){if(rs===0){var e=Xi;e===0&&(e=pi,pi<<=1,(pi&261888)===0&&(pi=256)),rs=e}return rs}function vp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Mo(""+e)}function mp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Gh(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var s=vp((o[Fe]||null).action),p=i.submitter;p&&(t=(t=p[Fe]||null)?vp(t.formAction):p.getAttribute("formAction"),t!==null&&(s=t,p=null));var S=new Ts("action","action",null,i,o);e.push({event:S,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(rs!==0){var A=p?mp(o,p):new FormData(o);et(n,{pending:!0,data:A,method:o.method,action:s},null,A)}}else typeof s=="function"&&(S.preventDefault(),A=p?mp(o,p):new FormData(o),et(n,{pending:!0,data:A,method:o.method,action:s},s,A))},currentTarget:o}]})}}for(var Su=0;Su<Ws.length;Su++){var wu=Ws[Su],$h=wu.toLowerCase(),Fh=wu[0].toUpperCase()+wu.slice(1);Tn($h,"on"+Fh)}Tn(Io,"onAnimationEnd"),Tn(xl,"onAnimationIteration"),Tn(gr,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(El,"onTransitionRun"),Tn(tc,"onTransitionStart"),Tn(Vl,"onTransitionCancel"),Tn(xr,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kc));function Sp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var p=i.length-1;0<=p;p--){var S=i[p],A=S.instance,F=S.currentTarget;if(S=S.listener,A!==s&&o.isPropagationStopped())break e;s=S,o.currentTarget=F;try{s(o)}catch(ue){Xo(ue)}o.currentTarget=null,s=A}else for(p=0;p<i.length;p++){if(S=i[p],A=S.instance,F=S.currentTarget,S=S.listener,A!==s&&o.isPropagationStopped())break e;s=S,o.currentTarget=F;try{s(o)}catch(ue){Xo(ue)}o.currentTarget=null,s=A}}}}function At(e,t){var n=t[sa];n===void 0&&(n=t[sa]=new Set);var i=e+"__bubble";n.has(i)||(wp(t,e,2,!1),n.add(i))}function ju(e,t,n){var i=0;t&&(i|=4),wp(n,e,i,t)}var yd="_reactListening"+Math.random().toString(36).slice(2);function Tu(e){if(!e[yd]){e[yd]=!0,Ni.forEach(function(n){n!=="selectionchange"&&(Lh.has(n)||ju(n,!1,e),ju(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yd]||(t[yd]=!0,ju("selectionchange",!1,t))}}function wp(e,t,n,i){switch(Qp(t)){case 2:var o=wg;break;case 8:o=jg;break;default:o=Vu}n=o.bind(null,t,n,e),o=void 0,!jl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Cu(e,t,n,i,o){var s=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var S=i.stateNode.containerInfo;if(S===o)break;if(p===4)for(p=i.return;p!==null;){var A=p.tag;if((A===3||A===4)&&p.stateNode.containerInfo===o)return;p=p.return}for(;S!==null;){if(p=Di(S),p===null)return;if(A=p.tag,A===5||A===6||A===26||A===27){i=s=p;continue e}S=S.parentNode}}i=i.return}$n(function(){var F=s,ue=sr(n),xe=[];e:{var K=oi.get(e);if(K!==void 0){var te=Ts,Ge=e;switch(e){case"keypress":if(Fn(n)===0)break e;case"keydown":case"keyup":te=dn;break;case"focusin":Ge="focus",te=zs;break;case"focusout":Ge="blur",te=zs;break;case"beforeblur":case"afterblur":te=zs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Od;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Lr;break;case Io:case xl:case gr:te=da;break;case xr:te=Ed;break;case"scroll":case"scrollend":te=Gr;break;case"wheel":te=gi;break;case"copy":case"cut":case"paste":te=ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=ln;break;case"toggle":case"beforetoggle":te=fa}var ot=(t&4)!==0,Jt=!ot&&(e==="scroll"||e==="scrollend"),E=ot?K!==null?K+"Capture":null:K;ot=[];for(var N=F,$;N!==null;){var ge=N;if($=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||$===null||E===null||(ge=li(N,E),ge!=null&&ot.push(Dc(N,ge,$))),Jt)break;N=N.return}0<ot.length&&(K=new te(K,Ge,null,n,ue),xe.push({event:K,listeners:ot}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",K&&n!==Ha&&(Ge=n.relatedTarget||n.fromElement)&&(Di(Ge)||Ge[yn]))break e;if((te||K)&&(K=ue.window===ue?ue:(K=ue.ownerDocument)?K.defaultView||K.parentWindow:window,te?(Ge=n.relatedTarget||n.toElement,te=F,Ge=Ge?Di(Ge):null,Ge!==null&&(Jt=Q(Ge),ot=Ge.tag,Ge!==Jt||ot!==5&&ot!==27&&ot!==6)&&(Ge=null)):(te=null,Ge=F),te!==Ge)){if(ot=cn,ge="onMouseLeave",E="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(ot=ln,ge="onPointerLeave",E="onPointerEnter",N="pointer"),Jt=te==null?K:ra(te),$=Ge==null?K:ra(Ge),K=new ot(ge,N+"leave",te,n,ue),K.target=Jt,K.relatedTarget=$,ge=null,Di(ue)===F&&(ot=new ot(E,N+"enter",Ge,n,ue),ot.target=$,ot.relatedTarget=Jt,ge=ot),Jt=ge,te&&Ge)t:{for(ot=qh,E=te,N=Ge,$=0,ge=E;ge;ge=ot(ge))$++;ge=0;for(var Je=N;Je;Je=ot(Je))ge++;for(;0<$-ge;)E=ot(E),$--;for(;0<ge-$;)N=ot(N),ge--;for(;$--;){if(E===N||N!==null&&E===N.alternate){ot=E;break t}E=ot(E),N=ot(N)}ot=null}else ot=null;te!==null&&jp(xe,K,te,ot,!1),Ge!==null&&Jt!==null&&jp(xe,Jt,Ge,ot,!0)}}e:{if(K=F?ra(F):window,te=K.nodeName&&K.nodeName.toLowerCase(),te==="select"||te==="input"&&K.type==="file")var Vt=ur;else if(qr(K))if(_s)Vt=pr;else{Vt=Os;var Le=Vo}else te=K.nodeName,!te||te.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?F&&wl(F.elementType)&&(Vt=ur):Vt=Hs;if(Vt&&(Vt=Vt(e,F))){Zt(xe,Vt,n,ue);break e}Le&&Le(e,K,F),e==="focusout"&&F&&K.type==="number"&&F.memoizedProps.value!=null&&_n(K,"number",K.value)}switch(Le=F?ra(F):window,e){case"focusin":(qr(Le)||Le.contentEditable==="true")&&(Fa=Le,Jr=F,xa=null);break;case"focusout":xa=Jr=Fa=null;break;case"mousedown":Vs=!0;break;case"contextmenu":case"mouseup":case"dragend":Vs=!1,ec(xe,n,ue);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":ec(xe,n,ue)}var jt;if(Ho)e:{switch(e){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else il?Oi(e,n)&&(Mt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Mt="onCompositionStart");Mt&&(Ms&&n.locale!=="ko"&&(il||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&il&&(jt=Xc()):(On=ue,gl="value"in On?On.value:On.textContent,il=!0)),Le=bd(F,Mt),0<Le.length&&(Mt=new ii(Mt,e,null,n,ue),xe.push({event:Mt,listeners:Le}),jt?Mt.data=jt:(jt=Zn(n),jt!==null&&(Mt.data=jt)))),(jt=Ya?Vd(e,n):Us(e,n))&&(Mt=bd(F,"onBeforeInput"),0<Mt.length&&(Le=new ii("onBeforeInput","beforeinput",null,n,ue),xe.push({event:Le,listeners:Mt}),Le.data=jt)),Gh(xe,e,F,n,ue)}Sp(xe,t)})}function Dc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bd(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=li(e,n),o!=null&&i.unshift(Dc(e,o,s)),o=li(e,t),o!=null&&i.push(Dc(e,o,s))),e.tag===3)return i;e=e.return}return[]}function qh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jp(e,t,n,i,o){for(var s=t._reactName,p=[];n!==null&&n!==i;){var S=n,A=S.alternate,F=S.stateNode;if(S=S.tag,A!==null&&A===i)break;S!==5&&S!==26&&S!==27||F===null||(A=F,o?(F=li(n,s),F!=null&&p.unshift(Dc(n,F,A))):o||(F=li(n,s),F!=null&&p.push(Dc(n,F,A)))),n=n.return}p.length!==0&&e.push({event:t,listeners:p})}var Zh=/\r\n?/g,Qh=/\u0000|\uFFFD/g;function Tp(e){return(typeof e=="string"?e:""+e).replace(Zh,`
`).replace(Qh,"")}function Cp(e,t){return t=Tp(t),Tp(e)===t}function Kt(e,t,n,i,o,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||qt(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&qt(e,""+i);break;case"className":bn(e,"class",i);break;case"tabIndex":bn(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(e,n,i);break;case"style":nn(e,i,s);break;case"data":if(t!=="object"){bn(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Mo(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Kt(e,t,"name",o.name,o,null),Kt(e,t,"formEncType",o.formEncType,o,null),Kt(e,t,"formMethod",o.formMethod,o,null),Kt(e,t,"formTarget",o.formTarget,o,null)):(Kt(e,t,"encType",o.encType,o,null),Kt(e,t,"method",o.method,o,null),Kt(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Mo(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=hi);break;case"onScroll":i!=null&&At("scroll",e);break;case"onScrollEnd":i!=null&&At("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(f(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(f(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Mo(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":At("beforetoggle",e),At("toggle",e),Gn(e,"popover",i);break;case"xlinkActuate":tn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":tn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":tn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":tn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":tn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":tn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":tn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":tn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":tn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Gn(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Bi.get(n)||n,Gn(e,n,i))}}function zu(e,t,n,i,o,s){switch(n){case"style":nn(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(f(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(f(60));e.innerHTML=n}}break;case"children":typeof i=="string"?qt(e,i):(typeof i=="number"||typeof i=="bigint")&&qt(e,""+i);break;case"onScroll":i!=null&&At("scroll",e);break;case"onScrollEnd":i!=null&&At("scrollend",e);break;case"onClick":i!=null&&(e.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ss.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),s=e[Fe]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,o),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Gn(e,n,i)}}}function ml(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",e),At("load",e);var i=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var p=n[s];if(p!=null)switch(s){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,t));default:Kt(e,t,s,p,n,null)}}o&&Kt(e,t,"srcSet",n.srcSet,n,null),i&&Kt(e,t,"src",n.src,n,null);return;case"input":At("invalid",e);var S=s=p=o=null,A=null,F=null;for(i in n)if(n.hasOwnProperty(i)){var ue=n[i];if(ue!=null)switch(i){case"name":o=ue;break;case"type":p=ue;break;case"checked":A=ue;break;case"defaultChecked":F=ue;break;case"value":s=ue;break;case"defaultValue":S=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(f(137,t));break;default:Kt(e,t,i,ue,n,null)}}le(e,s,S,A,F,p,o,!1);return;case"select":At("invalid",e),i=p=s=null;for(o in n)if(n.hasOwnProperty(o)&&(S=n[o],S!=null))switch(o){case"value":s=S;break;case"defaultValue":p=S;break;case"multiple":i=S;default:Kt(e,t,o,S,n,null)}t=s,n=p,e.multiple=!!i,t!=null?st(e,!!i,t,!1):n!=null&&st(e,!!i,n,!0);return;case"textarea":At("invalid",e),s=o=i=null;for(p in n)if(n.hasOwnProperty(p)&&(S=n[p],S!=null))switch(p){case"value":i=S;break;case"defaultValue":o=S;break;case"children":s=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(f(91));break;default:Kt(e,t,p,S,n,null)}rt(e,i,o,s);return;case"option":for(A in n)if(n.hasOwnProperty(A)&&(i=n[A],i!=null))switch(A){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Kt(e,t,A,i,n,null)}return;case"dialog":At("beforetoggle",e),At("toggle",e),At("cancel",e),At("close",e);break;case"iframe":case"object":At("load",e);break;case"video":case"audio":for(i=0;i<kc.length;i++)At(kc[i],e);break;case"image":At("error",e),At("load",e);break;case"details":At("toggle",e);break;case"embed":case"source":case"link":At("error",e),At("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in n)if(n.hasOwnProperty(F)&&(i=n[F],i!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,t));default:Kt(e,t,F,i,n,null)}return;default:if(wl(t)){for(ue in n)n.hasOwnProperty(ue)&&(i=n[ue],i!==void 0&&zu(e,t,ue,i,n,void 0));return}}for(S in n)n.hasOwnProperty(S)&&(i=n[S],i!=null&&Kt(e,t,S,i,n,null))}function Kh(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,p=null,S=null,A=null,F=null,ue=null;for(te in n){var xe=n[te];if(n.hasOwnProperty(te)&&xe!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":A=xe;default:i.hasOwnProperty(te)||Kt(e,t,te,null,i,xe)}}for(var K in i){var te=i[K];if(xe=n[K],i.hasOwnProperty(K)&&(te!=null||xe!=null))switch(K){case"type":s=te;break;case"name":o=te;break;case"checked":F=te;break;case"defaultChecked":ue=te;break;case"value":p=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(f(137,t));break;default:te!==xe&&Kt(e,t,K,te,i,xe)}}Tt(e,p,S,A,F,ue,s,o);return;case"select":te=p=S=K=null;for(s in n)if(A=n[s],n.hasOwnProperty(s)&&A!=null)switch(s){case"value":break;case"multiple":te=A;default:i.hasOwnProperty(s)||Kt(e,t,s,null,i,A)}for(o in i)if(s=i[o],A=n[o],i.hasOwnProperty(o)&&(s!=null||A!=null))switch(o){case"value":K=s;break;case"defaultValue":S=s;break;case"multiple":p=s;default:s!==A&&Kt(e,t,o,s,i,A)}t=S,n=p,i=te,K!=null?st(e,!!n,K,!1):!!i!=!!n&&(t!=null?st(e,!!n,t,!0):st(e,!!n,n?[]:"",!1));return;case"textarea":te=K=null;for(S in n)if(o=n[S],n.hasOwnProperty(S)&&o!=null&&!i.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Kt(e,t,S,null,i,o)}for(p in i)if(o=i[p],s=n[p],i.hasOwnProperty(p)&&(o!=null||s!=null))switch(p){case"value":K=o;break;case"defaultValue":te=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(f(91));break;default:o!==s&&Kt(e,t,p,o,i,s)}rn(e,K,te);return;case"option":for(var Ge in n)if(K=n[Ge],n.hasOwnProperty(Ge)&&K!=null&&!i.hasOwnProperty(Ge))switch(Ge){case"selected":e.selected=!1;break;default:Kt(e,t,Ge,null,i,K)}for(A in i)if(K=i[A],te=n[A],i.hasOwnProperty(A)&&K!==te&&(K!=null||te!=null))switch(A){case"selected":e.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Kt(e,t,A,K,i,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in n)K=n[ot],n.hasOwnProperty(ot)&&K!=null&&!i.hasOwnProperty(ot)&&Kt(e,t,ot,null,i,K);for(F in i)if(K=i[F],te=n[F],i.hasOwnProperty(F)&&K!==te&&(K!=null||te!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(f(137,t));break;default:Kt(e,t,F,K,i,te)}return;default:if(wl(t)){for(var Jt in n)K=n[Jt],n.hasOwnProperty(Jt)&&K!==void 0&&!i.hasOwnProperty(Jt)&&zu(e,t,Jt,void 0,i,K);for(ue in i)K=i[ue],te=n[ue],!i.hasOwnProperty(ue)||K===te||K===void 0&&te===void 0||zu(e,t,ue,K,i,te);return}}for(var E in n)K=n[E],n.hasOwnProperty(E)&&K!=null&&!i.hasOwnProperty(E)&&Kt(e,t,E,null,i,K);for(xe in i)K=i[xe],te=n[xe],!i.hasOwnProperty(xe)||K===te||K==null&&te==null||Kt(e,t,xe,K,i,te)}function zp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],s=o.transferSize,p=o.initiatorType,S=o.duration;if(s&&S&&zp(p)){for(p=0,S=o.responseEnd,i+=1;i<n.length;i++){var A=n[i],F=A.startTime;if(F>S)break;var ue=A.transferSize,xe=A.initiatorType;ue&&zp(xe)&&(A=A.responseEnd,p+=ue*(A<S?1:(S-F)/(A-F)))}if(--i,t+=8*(s+p)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ru=null,ku=null;function vd(e){return e.nodeType===9?e:e.ownerDocument}function Rp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Du(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Au=null;function eg(){var e=window.event;return e&&e.type==="popstate"?e===Au?!1:(Au=e,!0):(Au=null,!1)}var Dp=typeof setTimeout=="function"?setTimeout:void 0,tg=typeof clearTimeout=="function"?clearTimeout:void 0,Ap=typeof Promise=="function"?Promise:void 0,ng=typeof queueMicrotask=="function"?queueMicrotask:typeof Ap<"u"?function(e){return Ap.resolve(null).then(e).catch(lg)}:Dp;function lg(e){setTimeout(function(){throw e})}function cs(e){return e==="head"}function Np(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(o),Yr(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Ac(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ac(n);for(var s=n.firstChild;s;){var p=s.nextSibling,S=s.nodeName;s[hl]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=p}}else n==="body"&&Ac(e.ownerDocument.body);n=o}while(n);Yr(t)}function Mp(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Nu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Nu(n),Dl(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function ig(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[hl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Ti(e.nextSibling),e===null)break}return null}function ag(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ti(e.nextSibling),e===null))return null;return e}function Up(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ti(e.nextSibling),e===null))return null;return e}function Mu(e){return e.data==="$?"||e.data==="$~"}function Uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function og(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Ti(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Bu=null;function Bp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Ti(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function _p(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Op(e,t,n){switch(t=vd(n),e){case"html":if(e=t.documentElement,!e)throw Error(f(452));return e;case"head":if(e=t.head,!e)throw Error(f(453));return e;case"body":if(e=t.body,!e)throw Error(f(454));return e;default:throw Error(f(451))}}function Ac(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Dl(e)}var Ci=new Map,Hp=new Set;function md(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var To=ne.d;ne.d={f:sg,r:rg,D:cg,C:dg,L:ug,m:fg,X:hg,S:pg,M:gg};function sg(){var e=To.f(),t=ud();return e||t}function rg(e){var t=_l(e);t!==null&&t.tag===5&&t.type==="form"?It(t):To.r(e)}var Vr=typeof document>"u"?null:document;function Ep(e,t,n){var i=Vr;if(i&&typeof t=="string"&&t){var o=tt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Hp.has(o)||(Hp.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),ml(t,"link",e),en(t),i.head.appendChild(t)))}}function cg(e){To.D(e),Ep("dns-prefetch",e,null)}function dg(e,t){To.C(e,t),Ep("preconnect",e,t)}function ug(e,t,n){To.L(e,t,n);var i=Vr;if(i&&e&&t){var o='link[rel="preload"][as="'+tt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+tt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+tt(n.imageSizes)+'"]')):o+='[href="'+tt(e)+'"]';var s=o;switch(t){case"style":s=Wr(e);break;case"script":s=Pr(e)}Ci.has(s)||(e=me({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ci.set(s,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(Nc(s))||t==="script"&&i.querySelector(Mc(s))||(t=i.createElement("link"),ml(t,"link",e),en(t),i.head.appendChild(t)))}}function fg(e,t){To.m(e,t);var n=Vr;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+tt(i)+'"][href="'+tt(e)+'"]',s=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Pr(e)}if(!Ci.has(s)&&(e=me({rel:"modulepreload",href:e},t),Ci.set(s,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Mc(s)))return}i=n.createElement("link"),ml(i,"link",e),en(i),n.head.appendChild(i)}}}function pg(e,t,n){To.S(e,t,n);var i=Vr;if(i&&e){var o=Ai(i).hoistableStyles,s=Wr(e);t=t||"default";var p=o.get(s);if(!p){var S={loading:0,preload:null};if(p=i.querySelector(Nc(s)))S.loading=5;else{e=me({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ci.get(s))&&_u(e,n);var A=p=i.createElement("link");en(A),ml(A,"link",e),A._p=new Promise(function(F,ue){A.onload=F,A.onerror=ue}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Sd(p,t,i)}p={type:"stylesheet",instance:p,count:1,state:S},o.set(s,p)}}}function hg(e,t){To.X(e,t);var n=Vr;if(n&&e){var i=Ai(n).hoistableScripts,o=Pr(e),s=i.get(o);s||(s=n.querySelector(Mc(o)),s||(e=me({src:e,async:!0},t),(t=Ci.get(o))&&Ou(e,t),s=n.createElement("script"),en(s),ml(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function gg(e,t){To.M(e,t);var n=Vr;if(n&&e){var i=Ai(n).hoistableScripts,o=Pr(e),s=i.get(o);s||(s=n.querySelector(Mc(o)),s||(e=me({src:e,async:!0,type:"module"},t),(t=Ci.get(o))&&Ou(e,t),s=n.createElement("script"),en(s),ml(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function Vp(e,t,n,i){var o=(o=ut.current)?md(o):null;if(!o)throw Error(f(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Wr(n.href),n=Ai(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Wr(n.href);var s=Ai(o).hoistableStyles,p=s.get(e);if(p||(o=o.ownerDocument||o,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,p),(s=o.querySelector(Nc(e)))&&!s._p&&(p.instance=s,p.state.loading=5),Ci.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ci.set(e,n),s||xg(o,e,n,p.state))),t&&i===null)throw Error(f(528,""));return p}if(t&&i!==null)throw Error(f(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Pr(n),n=Ai(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,e))}}function Wr(e){return'href="'+tt(e)+'"'}function Nc(e){return'link[rel="stylesheet"]['+e+"]"}function Wp(e){return me({},e,{"data-precedence":e.precedence,precedence:null})}function xg(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ml(t,"link",n),en(t),e.head.appendChild(t))}function Pr(e){return'[src="'+tt(e)+'"]'}function Mc(e){return"script[async]"+e}function Pp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+tt(n.href)+'"]');if(i)return t.instance=i,en(i),i;var o=me({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),en(i),ml(i,"style",o),Sd(i,n.precedence,e),t.instance=i;case"stylesheet":o=Wr(n.href);var s=e.querySelector(Nc(o));if(s)return t.state.loading|=4,t.instance=s,en(s),s;i=Wp(n),(o=Ci.get(o))&&_u(i,o),s=(e.ownerDocument||e).createElement("link"),en(s);var p=s;return p._p=new Promise(function(S,A){p.onload=S,p.onerror=A}),ml(s,"link",i),t.state.loading|=4,Sd(s,n.precedence,e),t.instance=s;case"script":return s=Pr(n.src),(o=e.querySelector(Mc(s)))?(t.instance=o,en(o),o):(i=n,(o=Ci.get(s))&&(i=me({},n),Ou(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),en(o),ml(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(f(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Sd(i,n.precedence,e));return t.instance}function Sd(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,s=o,p=0;p<i.length;p++){var S=i[p];if(S.dataset.precedence===t)s=S;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function _u(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ou(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var wd=null;function Yp(e,t,n){if(wd===null){var i=new Map,o=wd=new Map;o.set(n,i)}else o=wd,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var s=n[o];if(!(s[hl]||s[An]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var p=s.getAttribute(t)||"";p=e+p;var S=i.get(p);S?S.push(s):i.set(p,[s])}}return i}function Ip(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function yg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Xp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function bg(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=Wr(i.href),s=t.querySelector(Nc(o));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=jd.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,en(s);return}s=t.ownerDocument||t,i=Wp(i),(o=Ci.get(o))&&_u(i,o),s=s.createElement("link"),en(s);var p=s;p._p=new Promise(function(S,A){p.onload=S,p.onerror=A}),ml(s,"link",i),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=jd.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Hu=0;function vg(e,t){return e.stylesheets&&e.count===0&&Cd(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&Cd(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Hu===0&&(Hu=62500*Jh());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Cd(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Hu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function jd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Td=null;function Cd(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Td=new Map,t.forEach(mg,e),Td=null,jd.call(e))}function mg(e,t){if(!(t.state.loading&4)){var n=Td.get(e);if(n)var i=n.get(null);else{n=new Map,Td.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var p=o[s];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(n.set(p.dataset.precedence,p),i=p)}i&&n.set(null,i)}o=t.instance,p=o.getAttribute("data-precedence"),s=n.get(p)||i,s===i&&n.set(null,o),n.set(p,o),this.count++,i=jd.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),s?s.parentNode.insertBefore(o,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Uc={$$typeof:V,Provider:null,Consumer:null,_currentValue:ze,_currentValue2:ze,_threadCount:0};function Sg(e,t,n,i,o,s,p,S,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dn(0),this.hiddenUpdates=Dn(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Gp(e,t,n,i,o,s,p,S,A,F,ue,xe){return e=new Sg(e,t,n,p,A,F,ue,xe,S),t=1,s===!0&&(t|=24),s=En(3,null,null,t),e.current=s,s.stateNode=e,t=Sa(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Ko(s),e}function $p(e){return e?(e=Ei,e):Ei}function Fp(e,t,n,i,o,s){o=$p(o),i.context===null?i.context=o:i.pendingContext=o,i=Ta(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=qi(e,i,t),n!==null&&(Ql(n,e,t),Zi(n,e,t))}function Lp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Eu(e,t){Lp(e,t),(e=e.alternate)&&Lp(e,t)}function qp(e){if(e.tag===13||e.tag===31){var t=nt(e,67108864);t!==null&&Ql(t,e,67108864),Eu(e,67108864)}}function Zp(e){if(e.tag===13||e.tag===31){var t=ui();t=oa(t);var n=nt(e,t);n!==null&&Ql(n,e,t),Eu(e,t)}}var zd=!0;function wg(e,t,n,i){var o=U.T;U.T=null;var s=ne.p;try{ne.p=2,Vu(e,t,n,i)}finally{ne.p=s,U.T=o}}function jg(e,t,n,i){var o=U.T;U.T=null;var s=ne.p;try{ne.p=8,Vu(e,t,n,i)}finally{ne.p=s,U.T=o}}function Vu(e,t,n,i){if(zd){var o=Wu(i);if(o===null)Cu(e,t,i,Rd,n),Kp(e,i);else if(Cg(o,e,t,n,i))i.stopPropagation();else if(Kp(e,i),t&4&&-1<Tg.indexOf(e)){for(;o!==null;){var s=_l(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var p=Ri(s.pendingLanes);if(p!==0){var S=s;for(S.pendingLanes|=2,S.entangledLanes|=2;p;){var A=1<<31-ct(p);S.entanglements[1]|=A,p&=~A}Aa(s),(Xt&6)===0&&(cd=vt()+500,Rc(0))}}break;case 31:case 13:S=nt(s,2),S!==null&&Ql(S,s,2),ud(),Eu(s,2)}if(s=Wu(i),s===null&&Cu(e,t,i,Rd,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else Cu(e,t,i,null,n)}}function Wu(e){return e=sr(e),Pu(e)}var Rd=null;function Pu(e){if(Rd=null,e=Di(e),e!==null){var t=Q(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=je(t),e!==null)return e;e=null}else if(n===31){if(e=Te(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Rd=e,null}function Qp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pl()){case ei:return 2;case ia:return 8;case Oe:case aa:return 32;case wt:return 268435456;default:return 32}default:return 32}}var Yu=!1,ds=null,us=null,fs=null,Bc=new Map,_c=new Map,ps=[],Tg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kp(e,t){switch(e){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":Bc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(t.pointerId)}}function Oc(e,t,n,i,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},t!==null&&(t=_l(t),t!==null&&qp(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Cg(e,t,n,i,o){switch(t){case"focusin":return ds=Oc(ds,e,t,n,i,o),!0;case"dragenter":return us=Oc(us,e,t,n,i,o),!0;case"mouseover":return fs=Oc(fs,e,t,n,i,o),!0;case"pointerover":var s=o.pointerId;return Bc.set(s,Oc(Bc.get(s)||null,e,t,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,_c.set(s,Oc(_c.get(s)||null,e,t,n,i,o)),!0}return!1}function Jp(e){var t=Di(e.target);if(t!==null){var n=Q(t);if(n!==null){if(t=n.tag,t===13){if(t=je(n),t!==null){e.blockedOn=t,Bn(e.priority,function(){Zp(n)});return}}else if(t===31){if(t=Te(n),t!==null){e.blockedOn=t,Bn(e.priority,function(){Zp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wu(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Ha=i,n.target.dispatchEvent(i),Ha=null}else return t=_l(n),t!==null&&qp(t),e.blockedOn=n,!1;t.shift()}return!0}function eh(e,t,n){kd(e)&&n.delete(t)}function zg(){Yu=!1,ds!==null&&kd(ds)&&(ds=null),us!==null&&kd(us)&&(us=null),fs!==null&&kd(fs)&&(fs=null),Bc.forEach(eh),_c.forEach(eh)}function Dd(e,t){e.blockedOn===t&&(e.blockedOn=null,Yu||(Yu=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,zg)))}var Ad=null;function th(e){Ad!==e&&(Ad=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){Ad===e&&(Ad=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(Pu(i||n)===null)continue;break}var s=_l(n);s!==null&&(e.splice(t,3),t-=3,et(s,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Yr(e){function t(A){return Dd(A,e)}ds!==null&&Dd(ds,e),us!==null&&Dd(us,e),fs!==null&&Dd(fs,e),Bc.forEach(t),_c.forEach(t);for(var n=0;n<ps.length;n++){var i=ps[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ps.length&&(n=ps[0],n.blockedOn===null);)Jp(n),n.blockedOn===null&&ps.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],s=n[i+1],p=o[Fe]||null;if(typeof s=="function")p||th(n);else if(p){var S=null;if(s&&s.hasAttribute("formAction")){if(o=s,p=s[Fe]||null)S=p.formAction;else if(Pu(o)!==null)continue}else S=p.action;typeof S=="function"?n[i+1]=S:(n.splice(i,3),i-=3),th(n)}}}function nh(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(p){return o=p})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Iu(e){this._internalRoot=e}Nd.prototype.render=Iu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(f(409));var n=t.current,i=ui();Fp(n,i,e,t,null,null)},Nd.prototype.unmount=Iu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fp(e.current,2,null,e,null,null),ud(),t[yn]=null}};function Nd(e){this._internalRoot=e}Nd.prototype.unstable_scheduleHydration=function(e){if(e){var t=vs();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ps.length&&t!==0&&t<ps[n].priority;n++);ps.splice(n,0,e),n===0&&Jp(e)}};var lh=h.version;if(lh!=="19.2.0")throw Error(f(527,lh,"19.2.0"));ne.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(f(188)):(e=Object.keys(e).join(","),Error(f(268,e)));return e=P(t),e=e!==null?ye(e):null,e=e===null?null:e.stateNode,e};var Rg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{Ua=Md.inject(Rg),Xn=Md}catch{}}return Ec.createRoot=function(e,t){if(!_(e))throw Error(f(299));var n=!1,i="",o=df,s=uf,p=ff;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=Gp(e,1,!1,null,null,n,i,null,o,s,p,nh),e[yn]=t.current,Tu(e),new Iu(t)},Ec.hydrateRoot=function(e,t,n){if(!_(e))throw Error(f(299));var i=!1,o="",s=df,p=uf,S=ff,A=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError),n.formState!==void 0&&(A=n.formState)),t=Gp(e,1,!0,t,n??null,i,o,A,s,p,S,nh),t.context=$p(null),n=t.current,i=ui(),i=oa(i),o=Ta(i),o.callback=null,qi(n,o,i),n=i,t.current.lanes=n,ki(t,n),Aa(t),e[yn]=t.current,Tu(e),new Nd(t)},Ec.version="19.2.0",Ec}var ph;function Eg(){if(ph)return $u.exports;ph=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(h){console.error(h)}}return c(),$u.exports=Hg(),$u.exports}var Vg=Eg();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pg=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(h,v,f)=>f?f.toUpperCase():v.toLowerCase()),hh=c=>{const h=Pg(c);return h.charAt(0).toUpperCase()+h.slice(1)},bh=(...c)=>c.filter((h,v,f)=>!!h&&h.trim()!==""&&f.indexOf(h)===v).join(" ").trim(),Yg=c=>{for(const h in c)if(h.startsWith("aria-")||h==="role"||h==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ig={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=T.forwardRef(({color:c="currentColor",size:h=24,strokeWidth:v=2,absoluteStrokeWidth:f,className:_="",children:Q,iconNode:je,...Te},g)=>T.createElement("svg",{ref:g,...Ig,width:h,height:h,stroke:c,strokeWidth:f?Number(v)*24/Number(h):v,className:bh("lucide",_),...!Q&&!Yg(Te)&&{"aria-hidden":"true"},...Te},[...je.map(([P,ye])=>T.createElement(P,ye)),...Array.isArray(Q)?Q:[Q]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=(c,h)=>{const v=T.forwardRef(({className:f,..._},Q)=>T.createElement(Xg,{ref:Q,iconNode:h,className:bh(`lucide-${Wg(hh(c))}`,`lucide-${c}`,f),..._}));return v.displayName=hh(c),v};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],$g=vh("mouse-pointer",Gg);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Lg=vh("pen-line",Fg),Yc="#2CA02C",mh="#F0E442",Sh="#00BFC4",Zu="#000000",wh="#00008b",Ud="#FF0000",jh={DEFAULT_SIZE:18},Ic={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},"Film Capacitor":{prefix:["C","CF"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},qg={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Film:["Film Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},Bd={DEFAULT_SIZE:18},Th={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function _t(c){return Th[c]?.validUnits||[]}function Ye(c){return Th[c]?.defaultUnit||""}let Ir=1,_d=Promise.resolve(0);function Kl(){let c;_d=_d.then(v=>(c=v+1,Ir=c+1,c));const h=Ir;return Ir=h+1,h}function Qu(c){_d=_d.then(()=>(Ir=c,c-1)),Ir=c}function gh(){return Ir}function Zg(c="id"){return`${c}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function xh(c){return Math.round(c*1e4)/1e4}function Pt(c){return{x:xh(c.x),y:xh(c.y)}}function Qg(c){return Ic[c]?.defaultPins||2}function ef(c){return(Ic[c]?.prefix||["?"])[0]}function Kg(c,h,v,f,_,Q=jh.DEFAULT_SIZE,je=[],Te=Pc(),g=!0){let P="";if(g){const we=ef(c),He=Jg(we,je,Te);P=`${we}${He}`}const ye={id:Zg("comp"),componentType:c,designator:P,layer:h,x:v,y:f,color:_,size:Q,pinCount:Qg(c),pinConnections:[],orientation:0};switch(ye.pinConnections=new Array(ye.pinCount).fill(""),(c==="Electrolytic Capacitor"||c==="Diode"||c==="Battery"||c==="ZenerDiode")&&(ye.pinPolarities=new Array(ye.pinCount).fill("")),c){case"Battery":return{...ye,componentType:"Battery"};case"Capacitor":return{...ye,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...ye,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Diode":return{...ye,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...ye,componentType:"Fuse"};case"FerriteBead":return{...ye,componentType:"FerriteBead"};case"Connector":return{...ye,componentType:"Connector",gender:"N/A"};case"Jumper":return{...ye,componentType:"Jumper"};case"Relay":return{...ye,componentType:"Relay"};case"Inductor":return{...ye,componentType:"Inductor"};case"Speaker":return{...ye,componentType:"Speaker"};case"Motor":return{...ye,componentType:"Motor"};case"PowerSupply":return{...ye,componentType:"PowerSupply"};case"Transistor":return{...ye,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...ye,componentType:"Resistor"};case"ResistorNetwork":return{...ye,componentType:"ResistorNetwork"};case"Thermistor":return{...ye,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...ye,componentType:"Switch"};case"Transformer":return{...ye,componentType:"Transformer"};case"TestPoint":return{...ye,componentType:"TestPoint"};case"IntegratedCircuit":return{...ye,componentType:"IntegratedCircuit"};case"VacuumTube":return{...ye,componentType:"VacuumTube"};case"VariableResistor":return{...ye,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...ye,componentType:"Crystal"};case"ZenerDiode":return{...ye,componentType:"ZenerDiode"};default:return{...ye,componentType:"Resistor"}}}function tf(c,h,v){const f=c.componentType==="Electrolytic Capacitor"||c.componentType==="Diode"||c.componentType==="Battery"||c.componentType==="ZenerDiode",_=c.componentType==="Capacitor"&&"dielectric"in c&&c.dielectric==="Tantalum";if(!(f||_)||c.pinCount!==2||!(h.length===2&&h[0]&&h[0].trim()!==""&&h[1]&&h[1].trim()!==""))return null;const je=we=>{const He=parseInt(we,10);if(isNaN(He))return null;for(const q of v)if((q.type==="via"||q.type==="pad")&&q.points.length>0){const Ae=q.points[0];if(Ae.id===He)return{x:Ae.x,y:Ae.y}}return null},Te=je(h[0]),g=je(h[1]);if(!Te||!g)return null;const P=Math.hypot(c.x-Te.x,c.y-Te.y),ye=Math.hypot(c.x-g.x,c.y-g.y),me=["",""];return P<ye?(me[0]="-",me[1]="+"):(me[0]="+",me[1]="-"),me}const Ch="designatorCounters";function Pc(){try{const c=localStorage.getItem(Ch);if(c)return JSON.parse(c)}catch(c){console.warn("Failed to load designator counters from localStorage:",c)}return{}}function Ku(c){try{localStorage.setItem(Ch,JSON.stringify(c))}catch(h){console.warn("Failed to save designator counters to localStorage:",h)}}function Jg(c,h,v){let f=0;for(const Q of h)if(Q.designator){const je=Q.designator.match(new RegExp(`^${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(je){const Te=parseInt(je[1],10);Te>f&&(f=Te)}}const _=v[c]||0;return Math.max(f,_)+1}function ex(c,h,v){const f={...v};return f[c]=Math.max(f[c]||0,h),f}function tx(){const c=document.createElement("canvas"),h=24;c.width=h,c.height=h;const v=c.getContext("2d");v.strokeStyle="#000",v.lineWidth=3,v.lineCap="round";const f=h/2,_=8;return v.beginPath(),v.moveTo(f,f-_),v.lineTo(f,f-2),v.moveTo(f,f+2),v.lineTo(f,f+_),v.moveTo(f-_,f),v.lineTo(f-2,f),v.moveTo(f+2,f),v.lineTo(f+_,f),v.stroke(),`url(${c.toDataURL()}) ${f} ${f}, crosshair`}function nx(){const c=new Date,h=c.getFullYear(),v=String(c.getMonth()+1).padStart(2,"0"),f=String(c.getDate()).padStart(2,"0"),_=String(c.getHours()).padStart(2,"0"),Q=String(c.getMinutes()).padStart(2,"0"),je=String(c.getSeconds()).padStart(2,"0");return`${h}_${v}_${f}-${_}-${Q}-${je}`}function Vc(c){let h=c.replace(/\.json$/i,""),v="";for(;v!==h;)v=h,h=h.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),h=h.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return h}const Ju=c=>{const h=Ic[c];return!h||!h.prefix||h.prefix.length<1?"?":h.prefix[0].substring(0,1).toUpperCase()},ta=(c,h,v)=>({color:h,size:v}),yh=(c,h,v)=>{},kn=(c,h,v,f)=>({color:v,size:f}),Wc=(c,h,v,f)=>{},lx=()=>{const c=new Map,h={top:"#0072B2",bottom:"#56B4E9"},v={top:18,bottom:18},f={top:"#AA4499",bottom:"#F781BF"},_={top:6,bottom:6},Q={top:"#6A3D9A",bottom:"#9467BD"},je={top:18,bottom:18};return c.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:ta("select","#ff0000",10),layerSettings:new Map([["top",kn("select","top","#ff0000",10)],["bottom",kn("select","bottom","#ff0000",10)]])}),c.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:ta("via",Yc,Bd.DEFAULT_SIZE),layerSettings:new Map([["top",kn("via","top",Yc,Bd.DEFAULT_SIZE)],["bottom",kn("via","bottom",Yc,Bd.DEFAULT_SIZE)]]),defaultLayer:"top"}),c.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:ta("pad",wh,18),layerSettings:new Map([["top",kn("pad","top",h.top,v.top)],["bottom",kn("pad","bottom",h.bottom,v.bottom)]]),defaultLayer:"top"}),c.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:ta("trace",mh,6),layerSettings:new Map([["top",kn("trace","top",f.top,_.top)],["bottom",kn("trace","bottom",f.bottom,_.bottom)]]),defaultLayer:"top"}),c.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:ta("component",Sh,jh.DEFAULT_SIZE),layerSettings:new Map([["top",kn("component","top",Q.top,je.top)],["bottom",kn("component","bottom",Q.bottom,je.bottom)]]),defaultLayer:"top"}),c.set("componentConnection",{id:"componentConnection",name:"Component Connections",toolType:"componentConnection",icon:"",shortcut:"",tooltip:"Component connection lines",colorReflective:!1,settings:ta("componentConnection","rgba(0, 150, 255, 0.6)",3),layerSettings:new Map([["top",kn("componentConnection","top","rgba(0, 150, 255, 0.6)",3)],["bottom",kn("componentConnection","bottom","rgba(0, 150, 255, 0.6)",3)]])}),c.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:ta("power",Ud,18),layerSettings:new Map([["top",kn("power","top",Ud,18)],["bottom",kn("power","bottom",Ud,18)]]),defaultLayer:"top"}),c.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:ta("ground",Zu,18),layerSettings:new Map([["top",kn("ground","top",Zu,18)],["bottom",kn("ground","bottom",Zu,18)]]),defaultLayer:"top"}),c.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:ta("erase","#f5a3b3",18),layerSettings:new Map([["top",kn("erase","top","#f5a3b3",18)],["bottom",kn("erase","bottom","#f5a3b3",18)]])}),c.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:ta("pan","#ff0000",10),layerSettings:new Map([["top",kn("pan","top","#ff0000",10)],["bottom",kn("pan","bottom","#ff0000",10)]])}),c.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:ta("magnify","#ff0000",10),layerSettings:new Map([["top",kn("magnify","top","#ff0000",10)],["bottom",kn("magnify","bottom","#ff0000",10)]])}),c},ix=({visible:c,toolRegistry:h,currentTool:v,drawingMode:f,traceToolLayer:_,padToolLayer:Q,componentToolLayer:je,updateToolSettings:Te,updateToolLayerSettings:g,setBrushSize:P,saveToolSettings:ye,saveToolLayerSettings:me,setTopTraceSize:we,setBottomTraceSize:He,setTopPadSize:q,setBottomPadSize:Ae,setTopComponentSize:Be,setBottomComponentSize:de,setComponentConnectionSize:B,saveDefaultSize:V,onClose:it})=>{if(!c)return null;const I=Array.from({length:50},(k,H)=>H+1),j=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],u=(k,H,fe)=>{const ee=h.get(k);if(!ee)return;if(["trace","pad","component"].includes(k)&&fe){const Se=ee.layerSettings.get(fe),Pe=Se?.color||ee.settings.color;k==="trace"?fe==="top"?(we(H),V("trace",H,"top")):(He(H),V("trace",H,"bottom")):k==="pad"?fe==="top"?(q(H),V("pad",H,"top")):(Ae(H),V("pad",H,"bottom")):k==="component"&&(fe==="top"?(Be(H),V("component",H,"top")):(de(H),V("component",H,"bottom")));const Re={...Se,color:Pe,size:H};g(k,fe,Re),me(k,fe,Pe,H),(k==="trace"&&v==="draw"&&f==="trace"||k==="pad"&&v==="draw"&&f==="pad"||k==="component"&&v==="component")&&((k==="trace"?_:k==="pad"?Q:je)||"top")===fe&&P(H)}else{const Se={...ee.settings,size:H};Te(k,Se),ye(k,ee.settings.color,H),k==="componentConnection"&&(B(H),V("componentConnection",H)),(k==="via"&&v==="draw"&&f==="via"||k==="power"&&v==="power"||k==="ground"&&v==="ground"||k==="erase"&&v==="erase")&&P(H)}};return l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:k=>{k.target===k.currentTarget&&it()},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",maxWidth:"400px",maxHeight:"70vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:k=>k.stopPropagation(),children:[l.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Size"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:j.map((k,H)=>{const fe=h.get(k.id);if(!fe)return null;const ee=k.layer?`${k.name} (${k.layer==="top"?"Top":"Bottom"})`:k.name,ce=k.layer?fe.layerSettings.get(k.layer)?.size??fe.settings.size??10:fe.settings.size??10;return l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[l.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[ee,":"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[l.jsx("select",{value:ce,onChange:Se=>{const Pe=parseInt(Se.target.value,10);u(k.id,Pe,k.layer)},style:{width:"50px",padding:"4px 6px",background:"#2b2b31",border:"1px solid #3a3a44",borderRadius:4,color:"#f2f2f2",fontSize:"12px",cursor:"pointer"},children:I.map(Se=>l.jsx("option",{value:Se,style:{background:"#2b2b31",color:"#f2f2f2"},children:Se},Se))}),l.jsx("span",{style:{color:"#f2f2f2",fontSize:"12px"},children:"px"})]})]},`${k.id}-${k.layer||"default"}-${H}`)})}),l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:l.jsx("button",{onClick:it,style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},ax=({visible:c,toolRegistry:h,currentTool:v,drawingMode:f,traceToolLayer:_,padToolLayer:Q,componentToolLayer:je,updateToolSettings:Te,updateToolLayerSettings:g,saveToolSettings:P,saveToolLayerSettings:ye,setBrushColor:me,setTopTraceColor:we,setBottomTraceColor:He,setTopPadColor:q,setBottomPadColor:Ae,setTopComponentColor:Be,setBottomComponentColor:de,setComponentConnectionColor:B,saveDefaultColor:V,colorPalette:it,onClose:I})=>{const[j,u]=We.useState(null);if(!c)return null;const k=["pad","trace","component"],H=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],fe=(ce,Se,Pe)=>{const Re=h.get(ce);if(Re){if(Pe&&k.includes(ce)){const ne=Re.layerSettings.get(Pe)?.size||Re.settings.size;ce==="trace"?Pe==="top"?(we(Se),V("trace",Se,"top")):(He(Se),V("trace",Se,"bottom")):ce==="pad"?Pe==="top"?(q(Se),V("pad",Se,"top")):(Ae(Se),V("pad",Se,"bottom")):ce==="component"&&(Pe==="top"?(Be(Se),V("component",Se,"top")):(de(Se),V("component",Se,"bottom"))),g(ce,Pe,{color:Se,size:ne}),ye(ce,Pe,Se,ne),(ce==="trace"&&v==="draw"&&f==="trace"||ce==="pad"&&v==="draw"&&f==="pad"||ce==="component"&&v==="component")&&((ce==="trace"?_:ce==="pad"?Q:je)||"top")===Pe&&me(Se)}else{const U={...Re.settings,color:Se};Te(ce,U),P(ce,Se,Re.settings.size),(ce==="via"&&v==="draw"&&f==="via"||ce==="power"&&v==="power"||ce==="ground"&&v==="ground"||ce==="erase"&&v==="erase")&&me(Se),ce==="componentConnection"&&(B(Se),V("componentConnection",Se)),ce==="via"?V("via",Se):ce==="erase"&&V("brush",Se)}u(null)}},ee=(ce,Se)=>{const Pe=h.get(ce);if(!Pe)return null;const Re=Se&&k.includes(ce)?Pe.layerSettings.get(Se)?.color??Pe.settings.color??"#000000":Pe.settings.color??"#000000",U=Se?`${ce}-${Se}`:ce,ne=j?.toolId===ce&&j?.layer===Se;return l.jsxs("div",{style:{position:"relative",display:"inline-block",zIndex:10005},children:[l.jsx("button",{className:"color-swatch-button",onClick:ze=>{ze.stopPropagation(),u(ne?null:{toolId:ce,layer:Se})},style:{width:"40px",height:"24px",background:Re,backgroundColor:Re,backgroundImage:"none",border:"1px solid #3a3a44",borderRadius:3,cursor:"pointer",padding:0,margin:0,display:"block","--swatch-color":Re},title:Re},`${U}-button-${Re}`),ne&&l.jsx("div",{onClick:ze=>{ze.stopPropagation()},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:100},children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:it.map(ze=>l.jsx("div",{onClick:()=>fe(ce,ze,Se),title:ze,style:{width:22,height:22,backgroundColor:ze,border:ze===Re?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},ze))})})]},`${U}-${Re}`)};return l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:ce=>{ce.target===ce.currentTarget&&(I(),u(null))},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",minWidth:"450px",maxWidth:"600px",maxHeight:"70vh",overflowY:"auto",overflowX:"visible",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:ce=>ce.stopPropagation(),children:[l.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Color"}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:H.map((ce,Se)=>{if(!h.get(ce.id))return null;const Re=ce.layer?`${ce.name} (${ce.layer==="top"?"Top":"Bottom"})`:ce.name;return l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[l.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[Re,":"]}),ee(ce.id,ce.layer)]},`${ce.id}-${ce.layer||"default"}-${Se}`)})}),l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:l.jsx("button",{onClick:()=>{I(),u(null)},style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},ox=({openMenu:c,setOpenMenu:h,isReadOnlyMode:v,currentProjectFilePath:f,onNewProject:_,onOpenProject:Q,onSaveProject:je,onSaveAs:Te,onPrint:g,hasUnsavedChanges:P,setNewProjectDialog:ye,setAutoSaveDialog:me,topImage:we,bottomImage:He,selectedImageForTransform:q,setSelectedImageForTransform:Ae,setCurrentTool:Be,transformMode:de,setTransformMode:B,updateImageTransform:V,resetImageTransform:it,isGrayscale:I,setIsGrayscale:j,isBlackAndWhiteEdges:u,setIsBlackAndWhiteEdges:k,isBlackAndWhiteInverted:H,setIsBlackAndWhiteInverted:fe,areImagesLocked:ee,setAreImagesLocked:ce,onEnterBoardDimensions:Se,fileInputTopRef:Pe,fileInputBottomRef:Re,openProjectRef:U,increaseSize:ne,decreaseSize:ze,brushSize:J,drawingStrokes:he,selectedIds:R,selectedComponentIds:O,selectedPowerIds:pe,selectedGroundIds:Ne,componentsTop:$e,componentsBottom:ut,powers:ft,grounds:fn,powerNodeNames:Ut,groundNodeNames:Rl,setSetSizeDialog:fl,areViasLocked:Jl,setAreViasLocked:Na,arePadsLocked:zi,setArePadsLocked:na,areTracesLocked:gs,setAreTracesLocked:Qe,areComponentsLocked:kt,setAreComponentsLocked:xs,areGroundNodesLocked:Ie,setAreGroundNodesLocked:Bt,arePowerNodesLocked:la,setArePowerNodesLocked:Co,setSelectedIds:vt,setSelectedComponentIds:pl,setSelectedPowerIds:ei,setSelectedGroundIds:ia,selectAllVias:Oe,selectAllTraces:aa,selectAllPads:wt,selectAllComponents:tl,selectDisconnectedComponents:Ma,selectAllPowerNodes:Ua,selectAllGroundNodes:Xn,selectPowerNodesByName:fi,selectGroundNodesByName:ct,setShowPowerBusManager:zo,setShowGroundBusManager:Ro,setShowDesignatorManager:Ba,toolRegistry:pi,updateToolSettings:Sl,updateToolLayerSettings:kl,setBrushSize:Ri,setBrushColor:ko,saveToolSettings:Ue,saveToolLayerSettings:ti,colorPalette:mt,currentTool:Dn,drawingMode:ki,traceToolLayer:ys,padToolLayer:Do,componentToolLayer:bs,setTopTraceSize:Ot,setBottomTraceSize:oa,setTopPadSize:xn,setBottomPadSize:vs,setTopComponentSize:Bn,setBottomComponentSize:ni,setComponentConnectionSize:An,topTraceColor:Fe,bottomTraceColor:yn,topPadColor:sa,bottomPadColor:Xr,topComponentColor:ms,bottomComponentColor:or,setTopTraceColor:hl,setBottomTraceColor:Dl,setTopPadColor:Di,setBottomPadColor:_l,setTopComponentColor:ra,setBottomComponentColor:Ai,setComponentConnectionColor:en,saveDefaultSize:Ni,saveDefaultColor:Ss,menuBarRef:Mi})=>{const[Ui,Nn]=We.useState(null),Mn=We.useRef(null),[ws,Al]=We.useState(null),Gn=We.useRef(null),[bn,tn]=We.useState(null),Ve=We.useRef(null),[St,_a]=We.useState(!1),[Ao,dt]=We.useState(!1),pt=(le,_n)=>{const Ht=!(le==="both"?we&&He:(le==="top"?we:le==="bottom"?He:null)!==null)||ee;return l.jsxs("div",{onMouseEnter:()=>{_n.current&&(clearTimeout(_n.current),_n.current=null),Nn(le)},onMouseLeave:()=>{Nn(null)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[l.jsx("button",{onClick:()=>{const nn=q==="top"||q==="bottom"?q:le;if(nn==="both"){const wl=!we?.flipX;V("both",{flipX:wl})}else{const wl=nn==="top"?we?.flipX||!1:He?.flipX||!1;V(nn,{flipX:!wl})}Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:"Horizontal Flip"}),l.jsx("button",{onClick:()=>{const nn=q==="top"||q==="bottom"?q:le;if(nn==="both"){const wl=!we?.flipY;V("both",{flipY:wl})}else{const wl=nn==="top"?we?.flipY||!1:He?.flipY||!1;V(nn,{flipY:!wl})}Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:"Vertical Flip"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsxs("button",{onClick:()=>{q==="top"||q==="bottom"||Ae(le),B("nudge"),Be("transform"),Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:[de==="nudge"&&q===le?" ":"","Mode: Nudge"]}),l.jsxs("button",{onClick:()=>{q==="top"||q==="bottom"||Ae(le),B("scale"),Be("transform"),Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:[de==="scale"&&q===le?" ":"","Mode: Scale"]}),l.jsxs("button",{onClick:()=>{q==="top"||q==="bottom"||Ae(le),B("rotate"),Be("transform"),Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:[de==="rotate"&&q===le?" ":"","Mode: Rotate"]}),l.jsxs("button",{onClick:()=>{q==="top"||q==="bottom"||Ae(le),B("slant"),Be("transform"),Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:[de==="slant"&&q===le?" ":"","Mode: Slant"]}),l.jsxs("button",{onClick:()=>{q==="top"||q==="bottom"||Ae(le),B("keystone"),Be("transform"),Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:[de==="keystone"&&q===le?" ":"","Mode: Keystone"]}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{Ae(le),Be("transform"),I||u?(j(!1),k(!1),fe(!1)):j(!0),Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:I||u?"Color Mode":"Grayscale Mode"}),l.jsx("button",{onClick:()=>{Ae(le),Be("transform"),u?fe(nn=>!nn):(k(!0),fe(!1)),Nn(null),h(null)},disabled:Ht,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ht?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ht?"not-allowed":"pointer"},children:u?"Invert Edges":"Black & White Edges"})]})},zt=le=>{const _n=le==="power"?Ut:Rl,st=_n.length>0,rn=le==="power"?"Select Power Nodes":"Select Ground Nodes";return l.jsxs("div",{onMouseEnter:()=>{Gn.current&&(clearTimeout(Gn.current),Gn.current=null),Al(le)},onMouseLeave:()=>{Gn.current=window.setTimeout(()=>{Al(rt=>rt===le?null:rt)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[l.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[rn," by Name"]}),l.jsxs("button",{onClick:()=>{le==="power"?Ua():Xn(),Al(null),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",le==="power"?"Power Nodes":"Ground Nodes"]}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),st?_n.map(rt=>l.jsx("button",{onClick:()=>{le==="power"?fi(rt):ct(rt),Al(null),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:rt},rt)):l.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",le==="power"?"power":"ground"," nodes available."]})]})},tt=()=>l.jsxs("div",{onMouseEnter:()=>{Ve.current&&(clearTimeout(Ve.current),Ve.current=null),tn("lock")},onMouseLeave:()=>{Ve.current=window.setTimeout(()=>{tn(le=>le==="lock"?null:le)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[l.jsxs("label",{onClick:le=>{le.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[l.jsx("input",{type:"checkbox",checked:Jl,onChange:()=>{Na(le=>!le)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),l.jsx("span",{children:"Lock Vias"})]}),l.jsxs("label",{onClick:le=>{le.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[l.jsx("input",{type:"checkbox",checked:zi,onChange:()=>{na(le=>!le)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),l.jsx("span",{children:"Lock Pads"})]}),l.jsxs("label",{onClick:le=>{le.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[l.jsx("input",{type:"checkbox",checked:gs,onChange:()=>{Qe(le=>!le)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),l.jsx("span",{children:"Lock Traces"})]}),l.jsxs("label",{onClick:le=>{le.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[l.jsx("input",{type:"checkbox",checked:kt,onChange:()=>{xs(le=>!le)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),l.jsx("span",{children:"Lock Components"})]}),l.jsxs("label",{onClick:le=>{le.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[l.jsx("input",{type:"checkbox",checked:Ie,onChange:()=>{Bt(le=>!le)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),l.jsx("span",{children:"Lock Ground Node"})]}),l.jsxs("label",{onClick:le=>{le.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[l.jsx("input",{type:"checkbox",checked:la,onChange:()=>{Co(le=>!le)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),l.jsx("span",{children:"Lock Power Nodes"})]})]}),Tt=()=>l.jsxs("div",{onMouseEnter:()=>{Ve.current&&(clearTimeout(Ve.current),Ve.current=null),tn("select")},onMouseLeave:()=>{Ve.current=window.setTimeout(()=>{tn(le=>le==="select"?null:le)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[l.jsx("button",{onClick:()=>{Oe(),tn(null),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Vias"}),l.jsx("button",{onClick:()=>{aa(),tn(null),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Traces"}),l.jsx("button",{onClick:()=>{wt(),tn(null),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Pads"}),l.jsx("button",{onClick:()=>{tl(),tn(null),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Components"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onMouseEnter:()=>{Gn.current&&(clearTimeout(Gn.current),Gn.current=null),Al("power")},onMouseLeave:()=>{Gn.current=window.setTimeout(()=>{Al(le=>le==="power"?null:le)},200)},onClick:()=>{Al(le=>le==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Power Nodes "}),ws==="power"&&zt("power")]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onMouseEnter:()=>{Gn.current&&(clearTimeout(Gn.current),Gn.current=null),Al("ground")},onMouseLeave:()=>{Gn.current=window.setTimeout(()=>{Al(le=>le==="ground"?null:le)},200)},onClick:()=>{Al(le=>le==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Ground Nodes "}),ws==="ground"&&zt("ground")]}),l.jsx("button",{onClick:()=>{Ma(),tn(null),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Disconnected Components"})]});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:Mi,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:le=>{le.stopPropagation(),h(_n=>_n==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),c==="file"&&l.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[l.jsx("button",{onClick:()=>{v||(h(null),P()?ye({visible:!0}):_())},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"New Project"}),l.jsx("button",{onClick:async()=>{await Q(),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{v||(je(),h(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Save Project"}),l.jsx("button",{onClick:()=>{v||(Te(),h(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Save As"}),l.jsx("button",{onClick:()=>{v||(me({visible:!0,interval:5}),h(null))},disabled:v,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v?"not-allowed":"pointer"},children:"Auto Save"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{g(),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),l.jsx("button",{onClick:()=>{g(),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:le=>{v||(le.stopPropagation(),h(_n=>_n==="transform"?null:"transform"))},disabled:v,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="transform"?"#eef3ff":"#fff",fontWeight:600,color:v?"#999":"#222",cursor:v?"not-allowed":"pointer",opacity:v?.5:1},children:"Images "}),c==="transform"&&l.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[l.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),l.jsx("button",{onClick:()=>{!v&&!ee&&(Pe.current?.click(),h(null))},disabled:v||ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v||ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v||ee?"not-allowed":"pointer"},children:"Load Top PCB"}),l.jsx("button",{onClick:()=>{!v&&!ee&&(Re.current?.click(),h(null))},disabled:v||ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:v||ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:v||ee?"not-allowed":"pointer"},children:"Load Bottom PCB"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{ee||(Se(),h(null))},disabled:ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ee?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsxs("button",{disabled:!we||ee,onMouseEnter:()=>{ee||(Mn.current&&(clearTimeout(Mn.current),Mn.current=null),Nn("top"))},onMouseLeave:()=>{Mn.current=setTimeout(()=>{Nn(le=>le==="top"?null:le)},300)},onClick:()=>{ee||(Ae("top"),Be("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!we||ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!we||ee?"not-allowed":"pointer"},children:[q==="top"?" ":"","Top Image "]}),Ui==="top"&&!ee&&pt("top",Mn)]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsxs("button",{disabled:!He||ee,onMouseEnter:()=>{ee||(Mn.current&&(clearTimeout(Mn.current),Mn.current=null),Nn("bottom"))},onMouseLeave:()=>{Mn.current=setTimeout(()=>{Nn(le=>le==="bottom"?null:le)},300)},onClick:()=>{ee||(Ae("bottom"),Be("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!He||ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!He||ee?"not-allowed":"pointer"},children:[q==="bottom"?" ":"","Bottom Image "]}),Ui==="bottom"&&!ee&&pt("bottom",Mn)]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsxs("button",{disabled:!we||!He||ee,onMouseEnter:()=>{ee||(Mn.current&&(clearTimeout(Mn.current),Mn.current=null),Nn("both"))},onMouseLeave:()=>{Mn.current=setTimeout(()=>{Nn(le=>le==="both"?null:le)},300)},onClick:()=>{ee||(Ae("both"),Be("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!we||!He||ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!we||!He||ee?"not-allowed":"pointer"},children:[q==="both"?" ":"","Both Images "]}),Ui==="both"&&!ee&&pt("both",Mn)]}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{ee||(Be("transform"),it(),h(null))},disabled:ee,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ee?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ee?"not-allowed":"pointer"},children:"Reset Transform"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{ce(le=>!le),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:ee?"Unlock Images ":"Lock Images"})]})]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:le=>{v||(le.stopPropagation(),h(_n=>_n==="tools"?null:"tools"))},disabled:v,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="tools"?"#eef3ff":"#fff",fontWeight:600,color:v?"#999":"#222",cursor:v?"not-allowed":"pointer",opacity:v?.5:1},children:"Tools "}),c==="tools"&&l.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[l.jsx("button",{onClick:()=>{ne(),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),l.jsx("button",{onClick:()=>{ze(),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{_a(!0),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Size"}),l.jsx("button",{onClick:()=>{dt(!0),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Color"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onMouseEnter:()=>{Ve.current&&(clearTimeout(Ve.current),Ve.current=null),tn("lock")},onMouseLeave:()=>{Ve.current=window.setTimeout(()=>{tn(le=>le==="lock"?null:le)},200)},onClick:()=>{tn(le=>le==="lock"?null:"lock")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Lock "}),bn==="lock"&&tt()]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onMouseEnter:()=>{Ve.current&&(clearTimeout(Ve.current),Ve.current=null),tn("select")},onMouseLeave:()=>{Ve.current=window.setTimeout(()=>{tn(le=>le==="select"?null:le)},200)},onClick:()=>{tn(le=>le==="select"?null:"select")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select "}),bn==="select"&&Tt()]}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{zo(!0),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),l.jsx("button",{onClick:()=>{Ro(!0),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"}),l.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),l.jsx("button",{onClick:()=>{Ba(!0),h(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Designators"})]})]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:le=>{le.stopPropagation(),h(_n=>_n==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),c==="about"&&l.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:l.jsxs("div",{style:{marginBottom:16},children:[l.jsx("h2",{style:{margin:"0 0 16px 0",color:"#000",fontSize:"20px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"About"}),l.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images. This application supports typical 4-layer PCBs and enables comprehensive PCB analysis and documentation."})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Technology"}),l.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"The PCB Reverse Engineering Tool is a modern browser-based single-page application (SPA) that enables users to reverse engineer printed circuit boards by tracing connections and placing components. The application runs entirely client-side in the browser, leveraging modern web technologies to provide a responsive, interactive drawing experience with no backend server requirements."})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Features"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 20px"},children:[l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Image Management"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Load top and bottom PCB images"}),l.jsx("li",{children:"Image alignment and transformation"}),l.jsx("li",{children:"Transform modes: nudge, scale, rotate, slant, keystone"}),l.jsx("li",{children:"Horizontal and vertical flip controls"}),l.jsx("li",{children:"Grayscale and edge detection modes"}),l.jsx("li",{children:"Board dimensions configuration"})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Drawing Tools"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Draw copper traces (top and bottom layers)"}),l.jsx("li",{children:"Place vias for layer connections"}),l.jsx("li",{children:"Place component pads (SMD and through-hole)"}),l.jsx("li",{children:"Place and annotate components"}),l.jsx("li",{children:"Place power and ground nodes"}),l.jsx("li",{children:"Erase tool for removing elements"})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Tools & Shortcuts"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#222"},children:[l.jsx("div",{children:l.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Select"}),"  ",l.jsx("code",{children:"S"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Via"}),"  ",l.jsx("code",{children:"V"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Pad"}),"  ",l.jsx("code",{children:"P"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Trace"}),"  ",l.jsx("code",{children:"T"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Component"}),"  ",l.jsx("code",{children:"C"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Component Properties"}),"  double-click component"]})]})}),l.jsx("div",{children:l.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Power"}),"  ",l.jsx("code",{children:"B"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Ground"}),"  ",l.jsx("code",{children:"G"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Erase"}),"  ",l.jsx("code",{children:"E"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Move (Pan)"}),"  ",l.jsx("code",{children:"H"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Zoom"}),"  ",l.jsx("code",{children:"Z"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Center"}),"  ",l.jsx("code",{children:"X"})]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Information Dialog"}),"  ",l.jsx("code",{children:"Ctrl"})," + ",l.jsx("code",{children:"I"})]})]})})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Layer Management"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Separate top and bottom layer support"}),l.jsx("li",{children:"Layer-specific color customization"}),l.jsx("li",{children:"Layer-specific size controls"}),l.jsx("li",{children:"Layer visibility toggles"}),l.jsx("li",{children:"Overlay view mode"})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Component Management"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Component placement with pin counts"}),l.jsx("li",{children:"Pin connection tracking"}),l.jsx("li",{children:"Component type classification"}),l.jsx("li",{children:"Designator and value annotation"}),l.jsx("li",{children:"Component editor dialog"}),l.jsx("li",{children:"Find and center component"})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Selection & Locking"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Select individual elements or groups"}),l.jsx("li",{children:"Select all vias, traces, pads, or components"}),l.jsx("li",{children:"Select power/ground nodes by name"}),l.jsx("li",{children:"Select disconnected components"}),l.jsx("li",{children:"Lock/unlock elements by type"}),l.jsx("li",{children:"Image locking for protection"})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Power & Ground"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Multiple voltage power nodes"}),l.jsx("li",{children:"Power bus management"}),l.jsx("li",{children:"Ground node placement"}),l.jsx("li",{children:"Ground bus management"}),l.jsx("li",{children:"Node naming and organization"})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Customization"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Customizable colors per layer"}),l.jsx("li",{children:"Adjustable brush/tool sizes"}),l.jsx("li",{children:"Size presets for common tools"}),l.jsx("li",{children:"Color palette management"}),l.jsx("li",{children:"Tool settings persistence"})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Project Management"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Create, open, and save projects"}),l.jsx("li",{children:"Auto-save with configurable intervals"}),l.jsx("li",{children:"Project file format (JSON)"}),l.jsx("li",{children:"Print functionality"}),l.jsx("li",{children:"Export to KiCad schematic format"})]})]}),l.jsxs("div",{children:[l.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"View Controls"}),l.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[l.jsx("li",{children:"Zoom in/out with mouse wheel"}),l.jsx("li",{children:"Pan view with hand tool"}),l.jsx("li",{children:"Zoom to fit"}),l.jsx("li",{children:"View mode switching (top/bottom/overlay)"}),l.jsx("li",{children:"Detailed information dialog"})]})]})]})]}),l.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #ddd"},children:l.jsxs("p",{style:{margin:"0 0 8px 0",color:"#666",fontSize:"12px",lineHeight:"1.5"},children:["Use the ",l.jsx("strong",{children:"File"})," menu to manage projects, the ",l.jsx("strong",{children:"Images"})," menu for image loading and transformation, and the ",l.jsx("strong",{children:"Tools"})," menu for selection, locking, and customization options."]})})]})})]}),f&&l.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:l.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:f,children:f})})]}),l.jsx(ix,{visible:St,toolRegistry:pi,currentTool:Dn,drawingMode:ki,traceToolLayer:ys,padToolLayer:Do,componentToolLayer:bs,updateToolSettings:Sl,updateToolLayerSettings:kl,setBrushSize:Ri,saveToolSettings:Ue,saveToolLayerSettings:ti,setTopTraceSize:Ot,setBottomTraceSize:oa,setTopPadSize:xn,setBottomPadSize:vs,setTopComponentSize:Bn,setBottomComponentSize:ni,setComponentConnectionSize:An,saveDefaultSize:Ni,onClose:()=>_a(!1)}),l.jsx(ax,{visible:Ao,toolRegistry:pi,currentTool:Dn,drawingMode:ki,traceToolLayer:ys,padToolLayer:Do,componentToolLayer:bs,updateToolSettings:Sl,updateToolLayerSettings:kl,saveToolSettings:Ue,saveToolLayerSettings:ti,setBrushColor:ko,setTopTraceColor:hl,setBottomTraceColor:Dl,setTopPadColor:Di,setBottomPadColor:_l,setTopComponentColor:ra,setBottomComponentColor:Ai,setComponentConnectionColor:en,saveDefaultColor:Ss,colorPalette:mt,onClose:()=>dt(!1)})]})},sx=({visible:c})=>c?l.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[l.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),l.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),l.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"1) Use the File menu to start a new project."}),l.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"2) Use the Images menu to load PCB photos."}),l.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5",textAlign:"left"},children:"3) Use the tools to draw vias, pads, traces, etc."})]}):null,rx=({visible:c,title:h,message:v,onClose:f})=>c?l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:_=>{_.target===_.currentTarget&&f()},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:_=>_.stopPropagation(),children:[l.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[l.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),l.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:h})]}),l.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:v}),l.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:l.jsx("button",{onClick:f,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,cx=({visible:c,selectedIds:h,selectedComponentIds:v,selectedPowerIds:f,selectedGroundIds:_,drawingStrokes:Q,componentsTop:je,componentsBottom:Te,powers:g,grounds:P,powerBuses:ye,onClose:me,setComponentsTop:we,setComponentsBottom:He,determineViaType:q,determinePadType:Ae,onFindComponent:Be,position:de,isDragging:B,onDragStart:V})=>{if(!c)return null;const it=de?{position:"fixed",left:`${de.x}px`,top:`${de.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:B?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},I={padding:"20px",overflow:"auto",flex:1};return l.jsxs("div",{style:it,children:[l.jsxs("div",{onMouseDown:j=>{const u=j.target;u.tagName==="BUTTON"||u.closest("button")||de&&V(j)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:B?"grabbing":de?"grab":"default",userSelect:"none",flexShrink:0},children:[l.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (Ctrl+I)"}),l.jsx("button",{onClick:me,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),l.jsx("div",{style:I,children:l.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const j=Q.filter(ee=>h.has(ee.id)).length,u=[...je,...Te].filter(ee=>v.has(ee.id)).length,k=g.filter(ee=>f.has(ee.id)).length,H=P.filter(ee=>_.has(ee.id)).length,fe=j+u+k+H;return l.jsx("div",{style:{padding:"12px 16px",backgroundColor:fe>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:fe>0?"#333":"#856404",marginBottom:"8px"},children:fe>0?`${fe} Object${fe!==1?"s":""} Selected`:"Zero Objects Selected"})})(),v.size>0&&(()=>{const j=Q.some(u=>h.has(u.id)&&(u.type==="via"||u.type==="pad"));return[...je,...Te].filter(u=>v.has(u.id)).map(u=>l.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:u.componentType})]}),Be&&l.jsx("button",{onClick:()=>{Be(u.id,u.x,u.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),l.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[l.jsxs("div",{children:["Layer: ",u.layer]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsxs("span",{children:["Designator: ",u.designator||"(empty)"]}),j&&l.jsx("button",{onClick:()=>{const k=[...je,...Te].filter(U=>v.has(U.id)&&U.componentType===u.componentType),H=k.length,fe=Q.filter(U=>h.has(U.id)&&U.type==="pad"&&U.points.length>0&&U.points[0].id!==void 0).map(U=>{const ne=U.points[0].id;if(ne===void 0)throw new Error("Unexpected undefined id");return{stroke:U,nodeId:ne}}).sort((U,ne)=>U.nodeId-ne.nodeId),ee=fe.length>0?fe:Q.filter(U=>h.has(U.id)&&U.type==="via"&&U.points.length>0&&U.points[0].id!==void 0).map(U=>{const ne=U.points[0].id;if(ne===void 0)throw new Error("Unexpected undefined id");return{stroke:U,nodeId:ne}}).sort((U,ne)=>U.nodeId-ne.nodeId),ce=ee.length;if(ce===0){console.warn("No vias or pads with Node IDs found in selection");return}const Se=Math.floor(ce/H);if(Se===0){console.warn(`Not enough ${fe.length>0?"pads":"vias"} (${ce}) for ${H} components`);return}[...k].sort((U,ne)=>U.id.localeCompare(ne.id)).forEach((U,ne)=>{const ze=ne*Se,J=ze+Se,R=ee.slice(ze,J).map(pe=>pe.nodeId.toString()),O=tf(U,R,Q);U.layer==="top"?we(pe=>pe.map(Ne=>{if(Ne.id===U.id){const $e={...Ne,pinCount:Se,pinConnections:R};return O&&($e.pinPolarities=O),$e}return Ne})):He(pe=>pe.map(Ne=>{if(Ne.id===U.id){const $e={...Ne,pinCount:Se,pinConnections:R};return O&&($e.pinPolarities=O),$e}return Ne}))});const Re=fe.length>0?"pads":"vias";console.log(`Connected ${H} components of type ${u.componentType} to ${ce} ${Re} (${Se} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),l.jsxs("div",{children:["Abbreviation: ",u.abbreviation||"(empty)"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("span",{children:"Color:"}),l.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:u.color,border:"1px solid #ccc",borderRadius:2}}),l.jsx("span",{children:u.color})]}),l.jsxs("div",{children:["Size: ",u.size]}),l.jsxs("div",{children:["Pin Count: ",u.pinCount]}),u.componentType==="Resistor"&&l.jsxs(l.Fragment,{children:[u.resistance&&l.jsxs("div",{children:["Resistance: ",u.resistance]}),u.power&&l.jsxs("div",{children:["Power: ",u.power]}),u.tolerance&&l.jsxs("div",{children:["Tolerance: ",u.tolerance]})]}),u.componentType==="Capacitor"&&l.jsxs(l.Fragment,{children:[u.capacitance&&l.jsxs("div",{children:["Capacitance: ",u.capacitance]}),u.voltage&&l.jsxs("div",{children:["Voltage: ",u.voltage]}),u.dielectric&&l.jsxs("div",{children:["Dielectric: ",u.dielectric]}),u.tolerance&&l.jsxs("div",{children:["Tolerance: ",u.tolerance]})]}),u.componentType==="Electrolytic Capacitor"&&l.jsxs(l.Fragment,{children:[u.capacitance&&l.jsxs("div",{children:["Capacitance: ",u.capacitance]}),u.voltage&&l.jsxs("div",{children:["Voltage: ",u.voltage]}),u.tolerance&&l.jsxs("div",{children:["Tolerance: ",u.tolerance]}),u.polarity&&l.jsxs("div",{children:["Polarity: ",u.polarity]}),u.esr&&l.jsxs("div",{children:["ESR: ",u.esr]}),u.temperature&&l.jsxs("div",{children:["Temperature: ",u.temperature]})]}),u.orientation!==void 0&&u.orientation!==null&&l.jsxs("div",{children:["Orientation: ",u.orientation,""]}),u.pinConnections&&u.pinConnections.length>0&&(()=>{const k=u.componentType==="Electrolytic Capacitor"||u.componentType==="Diode"||u.componentType==="Battery"||u.componentType==="ZenerDiode",H=u.componentType==="Capacitor"&&"dielectric"in u&&u.dielectric==="Tantalum",fe=k||H;return l.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[l.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[l.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),fe&&l.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),l.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),l.jsx("tbody",{children:u.pinConnections.map((ee,ce)=>{const Se=u.pinPolarities&&u.pinPolarities.length>ce?u.pinPolarities[ce]:"";return l.jsxs("tr",{style:{backgroundColor:ce%2===0?"#fff":"#f9f9f9"},children:[l.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ce+1}),fe&&l.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:Se==="+"?"#d32f2f":Se==="-"?"#1976d2":"#999"},children:Se||"-"}),l.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ee||"(not connected)"})]},ce)})})]})]})})(),"manufacturer"in u&&u.manufacturer&&l.jsxs("div",{children:["Manufacturer: ",u.manufacturer]}),"partNumber"in u&&u.partNumber&&l.jsxs("div",{children:["Part Number: ",u.partNumber]}),u.componentType==="Diode"&&l.jsxs(l.Fragment,{children:[u.diodeType&&l.jsxs("div",{children:["Type: ",u.diodeType]}),u.voltage&&l.jsxs("div",{children:["Voltage: ",u.voltage]}),u.current&&l.jsxs("div",{children:["Current: ",u.current]}),u.ledColor&&l.jsxs("div",{children:["LED Color: ",u.ledColor]})]}),u.componentType==="Battery"&&l.jsxs(l.Fragment,{children:[u.voltage&&l.jsxs("div",{children:["Voltage: ",u.voltage]}),u.capacity&&l.jsxs("div",{children:["Capacity: ",u.capacity]}),u.chemistry&&l.jsxs("div",{children:["Chemistry: ",u.chemistry]})]}),u.componentType==="Fuse"&&l.jsxs(l.Fragment,{children:[u.current&&l.jsxs("div",{children:["Current: ",u.current]}),u.voltage&&l.jsxs("div",{children:["Voltage: ",u.voltage]}),u.fuseType&&l.jsxs("div",{children:["Type: ",u.fuseType]})]}),u.componentType==="FerriteBead"&&l.jsxs(l.Fragment,{children:[u.impedance&&l.jsxs("div",{children:["Impedance: ",u.impedance]}),u.current&&l.jsxs("div",{children:["Current: ",u.current]})]}),u.componentType==="Connector"&&l.jsxs(l.Fragment,{children:[u.connectorType&&l.jsxs("div",{children:["Type: ",u.connectorType]}),u.gender&&l.jsxs("div",{children:["Gender: ",u.gender]})]}),u.componentType==="Jumper"&&l.jsx(l.Fragment,{children:u.positions&&l.jsxs("div",{children:["Positions: ",u.positions]})}),u.componentType==="Relay"&&l.jsxs(l.Fragment,{children:[u.coilVoltage&&l.jsxs("div",{children:["Coil Voltage: ",u.coilVoltage]}),u.contactType&&l.jsxs("div",{children:["Contact Type: ",u.contactType]}),u.current&&l.jsxs("div",{children:["Current: ",u.current]})]}),u.componentType==="Inductor"&&l.jsxs(l.Fragment,{children:[u.inductance&&l.jsxs("div",{children:["Inductance: ",u.inductance]}),u.current&&l.jsxs("div",{children:["Current: ",u.current]}),u.resistance&&l.jsxs("div",{children:["DC Resistance: ",u.resistance]})]}),u.componentType==="Speaker"&&l.jsxs(l.Fragment,{children:[u.impedance&&l.jsxs("div",{children:["Impedance: ",u.impedance]}),u.power&&l.jsxs("div",{children:["Power: ",u.power]})]}),u.componentType==="Motor"&&l.jsxs(l.Fragment,{children:[u.motorType&&l.jsxs("div",{children:["Type: ",u.motorType]}),u.voltage&&l.jsxs("div",{children:["Voltage: ",u.voltage]}),u.current&&l.jsxs("div",{children:["Current: ",u.current]})]}),u.componentType==="PowerSupply"&&l.jsxs(l.Fragment,{children:[u.inputVoltage&&l.jsxs("div",{children:["Input Voltage: ",u.inputVoltage]}),u.outputVoltage&&l.jsxs("div",{children:["Output Voltage: ",u.outputVoltage]}),u.current&&l.jsxs("div",{children:["Current: ",u.current]})]}),u.componentType==="Transistor"&&l.jsxs(l.Fragment,{children:[u.transistorType&&l.jsxs("div",{children:["Type: ",u.transistorType]}),u.polarity&&l.jsxs("div",{children:["Polarity: ",u.polarity]}),u.voltage&&l.jsxs("div",{children:["Voltage: ",u.voltage]}),u.current&&l.jsxs("div",{children:["Current: ",u.current]})]}),u.componentType==="ResistorNetwork"&&l.jsxs(l.Fragment,{children:[u.resistance&&l.jsxs("div",{children:["Resistance: ",u.resistance]}),u.configuration&&l.jsxs("div",{children:["Configuration: ",u.configuration]})]}),u.componentType==="Thermistor"&&l.jsxs(l.Fragment,{children:[u.resistance&&l.jsxs("div",{children:["Resistance: ",u.resistance]}),u.thermistorType&&l.jsxs("div",{children:["Type: ",u.thermistorType]}),u.beta&&l.jsxs("div",{children:["Beta: ",u.beta]})]}),u.componentType==="Switch"&&l.jsxs(l.Fragment,{children:[u.switchType&&l.jsxs("div",{children:["Type: ",u.switchType]}),u.current&&l.jsxs("div",{children:["Current: ",u.current]}),u.voltage&&l.jsxs("div",{children:["Voltage: ",u.voltage]})]}),u.componentType==="Transformer"&&l.jsxs(l.Fragment,{children:[u.primaryVoltage&&l.jsxs("div",{children:["Primary Voltage: ",u.primaryVoltage]}),u.secondaryVoltage&&l.jsxs("div",{children:["Secondary Voltage: ",u.secondaryVoltage]}),u.power&&l.jsxs("div",{children:["Power: ",u.power]}),u.turns&&l.jsxs("div",{children:["Turns Ratio: ",u.turns]})]}),u.componentType==="TestPoint"&&l.jsx(l.Fragment,{children:u.signal&&l.jsxs("div",{children:["Signal: ",u.signal]})}),u.componentType==="IntegratedCircuit"&&l.jsxs(l.Fragment,{children:[u.description&&l.jsxs("div",{children:["Description: ",u.description]}),u.icType&&l.jsxs("div",{children:["IC Type: ",u.icType]}),u.datasheet&&l.jsxs("div",{children:["Datasheet: ",l.jsx("a",{href:u.datasheet,target:"_blank",rel:"noopener noreferrer",children:u.datasheet})]})]}),u.componentType==="VacuumTube"&&l.jsx(l.Fragment,{children:u.tubeType&&l.jsxs("div",{children:["Type: ",u.tubeType]})}),u.componentType==="VariableResistor"&&l.jsxs(l.Fragment,{children:[u.vrType&&l.jsxs("div",{children:["Type: ",u.vrType]}),u.resistance&&l.jsxs("div",{children:["Resistance: ",u.resistance]}),u.power&&l.jsxs("div",{children:["Power: ",u.power]}),u.taper&&l.jsxs("div",{children:["Taper: ",u.taper]})]}),u.componentType==="Crystal"&&l.jsxs(l.Fragment,{children:[u.frequency&&l.jsxs("div",{children:["Frequency: ",u.frequency]}),u.loadCapacitance&&l.jsxs("div",{children:["Load Capacitance: ",u.loadCapacitance]}),u.tolerance&&l.jsxs("div",{children:["Tolerance: ",u.tolerance]})]}),u.componentType==="ZenerDiode"&&l.jsxs(l.Fragment,{children:[u.voltage&&l.jsxs("div",{children:["Zener Voltage: ",u.voltage]}),u.power&&l.jsxs("div",{children:["Power: ",u.power]}),u.tolerance&&l.jsxs("div",{children:["Tolerance: ",u.tolerance]})]}),l.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:l.jsxs("div",{children:["Position: x=",u.x.toFixed(2),", y=",u.y.toFixed(2)]})})]})]},u.id))})(),h.size>0&&Q.filter(j=>h.has(j.id)&&j.type==="via"&&j.points.length>0).map(j=>{const u=j.points[0],k=j.viaType||(u.id!==void 0?q(u.id,ye):"Via (Signal)");return l.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k})]}),l.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[u.id&&l.jsxs("div",{children:["Node ID: ",u.id]}),l.jsx("div",{children:"Layer: Top and Bottom"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("span",{children:"Color:"}),l.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:j.color,border:"1px solid #ccc",borderRadius:2}}),l.jsx("span",{children:j.color})]}),l.jsxs("div",{children:["Size: ",j.size]}),l.jsxs("div",{children:["Position: x=",u.x.toFixed(2),", y=",u.y.toFixed(2)]})]})]},j.id)}),h.size>0&&Q.filter(j=>h.has(j.id)&&j.type==="pad"&&j.points.length>0).map(j=>{const u=j.points[0],k=j.padType||(u.id!==void 0?Ae(u.id,ye):"Pad (Signal)");return l.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:k})]}),l.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[u.id&&l.jsxs("div",{children:["Node ID: ",u.id]}),l.jsxs("div",{children:["Layer: ",j.layer]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("span",{children:"Color:"}),l.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:j.color,border:"1px solid #ccc",borderRadius:2}}),l.jsx("span",{children:j.color})]}),l.jsxs("div",{children:["Size: ",j.size]}),l.jsxs("div",{children:["Position: x=",u.x.toFixed(2),", y=",u.y.toFixed(2)]})]})]},j.id)}),h.size>0&&Q.filter(j=>h.has(j.id)&&j.type==="trace").map(j=>l.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:j.type||"unknown"})]}),l.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[j.points.length>0&&l.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[l.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",j.points.length]}),l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[l.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),l.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),l.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),l.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),l.jsx("tbody",{children:j.points.map((u,k)=>l.jsxs("tr",{style:{backgroundColor:k%2===0?"#fff":"#f9f9f9"},children:[l.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:k}),l.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:u.x.toFixed(2)}),l.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:u.y.toFixed(2)}),l.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:u.id||"(none)"})]},k))})]})]}),l.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",j.layer]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("span",{children:"Color:"}),l.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:j.color,border:"1px solid #ccc",borderRadius:2}}),l.jsx("span",{children:j.color})]}),l.jsxs("div",{children:["Size: ",j.size]})]})]},j.id)),f.size>0&&g.filter(j=>f.has(j.id)).map(j=>{const u=ye.find(k=>k.id===j.powerBusId);return l.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:j.type||(u?`${u.name} Power Node`:"Power Node")})]}),l.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[l.jsxs("div",{children:["Node ID: ",j.pointId||"(not assigned)"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("span",{children:"Color:"}),l.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:j.color,border:"1px solid #ccc",borderRadius:2}}),l.jsx("span",{children:j.color})]}),l.jsxs("div",{children:["Size: ",j.size]}),l.jsxs("div",{children:["Layer: ",j.layer]}),l.jsxs("div",{children:["Power Bus: ",u?.name||j.powerBusId||"(unknown)"]}),l.jsxs("div",{children:["Position: x=",j.x.toFixed(2),", y=",j.y.toFixed(2)]})]})]},j.id)}),_.size>0&&P.filter(j=>_.has(j.id)).map(j=>l.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:j.type||"Ground Node"})]}),l.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[l.jsxs("div",{children:["Node ID: ",j.pointId||"(not assigned)"]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("span",{children:"Color:"}),l.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:j.color,border:"1px solid #ccc",borderRadius:2}}),l.jsx("span",{children:j.color})]}),l.jsxs("div",{children:["Size: ",j.size]}),l.jsxs("div",{children:["Position: x=",j.x.toFixed(2),", y=",j.y.toFixed(2)]})]})]},j.id))]})})]})},In=200,dx=({visible:c,selectedIds:h,selectedComponentIds:v,selectedPowerIds:f,selectedGroundIds:_,drawingStrokes:Q,componentsTop:je,componentsBottom:Te,powers:g,grounds:P,powerBuses:ye,onClose:me,setComponentsTop:we,setComponentsBottom:He,setDrawingStrokes:q,setPowerSymbols:Ae,setGroundSymbols:Be,determineViaType:de,determinePadType:B,position:V,isDragging:it,onDragStart:I})=>{const[j,u]=T.useState(new Map),k=T.useRef(""),H=()=>[...Array.from(h).sort(),...Array.from(v).sort(),...Array.from(f).sort(),...Array.from(_).sort()].join(",");if(T.useEffect(()=>{if(!c)return;const J=H();J!==k.current&&(k.current=J,u(he=>{const R=new Map;return[...je,...Te].filter(O=>v.has(O.id)).forEach(O=>{const pe=he.get(O.id);R.set(O.id,pe!==void 0?pe:O.notes||"")}),Q.filter(O=>h.has(O.id)).forEach(O=>{const pe=he.get(O.id);R.set(O.id,pe!==void 0?pe:O.notes||"")}),g.filter(O=>f.has(O.id)).forEach(O=>{const pe=he.get(O.id);R.set(O.id,pe!==void 0?pe:O.notes||"")}),P.filter(O=>_.has(O.id)).forEach(O=>{const pe=he.get(O.id);R.set(O.id,pe!==void 0?pe:O.notes||"")}),R}))},[c,h,v,f,_,Q,je,Te,g,P]),!c)return null;const fe=V?{position:"fixed",left:`${V.x}px`,top:`${V.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:it?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},ee={padding:"20px",overflow:"auto",flex:1},ce=Q.filter(J=>h.has(J.id)).length,Se=[...je,...Te].filter(J=>v.has(J.id)).length,Pe=g.filter(J=>f.has(J.id)).length,Re=P.filter(J=>_.has(J.id)).length,U=ce+Se+Pe+Re,ne=(J,he)=>{const R=he.length>In?he.substring(0,In):he;u(O=>{const pe=new Map(O);return pe.set(J,R),pe})},ze=()=>{we(J=>J.map(he=>{if(v.has(he.id)&&j.has(he.id)){const R=j.get(he.id)||"";return{...he,notes:R.trim()===""?null:R.trim()}}return he})),He(J=>J.map(he=>{if(v.has(he.id)&&j.has(he.id)){const R=j.get(he.id)||"";return{...he,notes:R.trim()===""?null:R.trim()}}return he})),q(J=>J.map(he=>{if(h.has(he.id)&&j.has(he.id)){const R=j.get(he.id)||"";return{...he,notes:R.trim()===""?null:R.trim()}}return he})),Ae(J=>J.map(he=>{if(f.has(he.id)&&j.has(he.id)){const R=j.get(he.id)||"";return{...he,notes:R.trim()===""?null:R.trim()}}return he})),Be(J=>J.map(he=>{if(_.has(he.id)&&j.has(he.id)){const R=j.get(he.id)||"";return{...he,notes:R.trim()===""?null:R.trim()}}return he}))};return l.jsxs("div",{style:fe,children:[l.jsxs("div",{onMouseDown:J=>{const he=J.target;he.tagName==="BUTTON"||he.closest("button")||V&&I(J)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:it?"grabbing":V?"grab":"default",userSelect:"none",flexShrink:0},children:[l.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (Ctrl+N)"}),l.jsx("button",{onClick:me,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),l.jsx("div",{style:ee,children:l.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[l.jsx("div",{style:{padding:"12px 16px",backgroundColor:U>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:U>0?"#333":"#856404",marginBottom:"8px"},children:U>0?`${U} Object${U!==1?"s":""} Selected`:"Zero Objects Selected"}),U===0?l.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):l.jsxs(l.Fragment,{children:[[...je,...Te].filter(J=>v.has(J.id)).map(J=>{const he=j.get(J.id)||"",R=he.length;return l.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),l.jsxs("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:[J.componentType,J.designator&&J.designator.trim()?` (${J.designator.trim()})`:""]})]}),l.jsxs("div",{style:{padding:"8px"},children:[l.jsx("textarea",{value:he,onChange:O=>ne(J.id,O.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:In,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),l.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:R>=In?"#d32f2f":"#666",textAlign:"right"},children:[R," / ",In]})]})]},J.id)}),Q.filter(J=>h.has(J.id)&&J.type==="via"&&J.points.length>0).map(J=>{const he=J.points[0],R=J.viaType||(he.id!==void 0?de(he.id,ye):"Via (Signal)"),O=j.get(J.id)||"",pe=O.length;return l.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R})]}),l.jsxs("div",{style:{padding:"8px"},children:[l.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:he.id&&l.jsxs("div",{children:["Node ID: ",he.id]})}),l.jsx("textarea",{value:O,onChange:Ne=>ne(J.id,Ne.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:In,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),l.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:pe>=In?"#d32f2f":"#666",textAlign:"right"},children:[pe," / ",In]})]})]},J.id)}),Q.filter(J=>h.has(J.id)&&J.type==="pad"&&J.points.length>0).map(J=>{const he=J.points[0],R=J.padType||(he.id!==void 0?B(he.id,ye):"Pad (Signal)"),O=j.get(J.id)||"",pe=O.length;return l.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R})]}),l.jsxs("div",{style:{padding:"8px"},children:[l.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:he.id&&l.jsxs("div",{children:["Node ID: ",he.id]})}),l.jsx("textarea",{value:O,onChange:Ne=>ne(J.id,Ne.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:In,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),l.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:pe>=In?"#d32f2f":"#666",textAlign:"right"},children:[pe," / ",In]})]})]},J.id)}),Q.filter(J=>h.has(J.id)&&J.type==="trace").map(J=>{const he=j.get(J.id)||"",R=he.length;return l.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:J.type||"unknown"})]}),l.jsxs("div",{style:{padding:"8px"},children:[l.jsx("textarea",{value:he,onChange:O=>ne(J.id,O.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:In,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),l.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:R>=In?"#d32f2f":"#666",textAlign:"right"},children:[R," / ",In]})]})]},J.id)}),g.filter(J=>f.has(J.id)).map(J=>{const he=ye.find(Ne=>Ne.id===J.powerBusId),R=J.type||(he?`${he.name} Power Node`:"Power Node"),O=j.get(J.id)||"",pe=O.length;return l.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R})]}),l.jsxs("div",{style:{padding:"8px"},children:[l.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:l.jsxs("div",{children:["Node ID: ",J.pointId||"(not assigned)"]})}),l.jsx("textarea",{value:O,onChange:Ne=>ne(J.id,Ne.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:In,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),l.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:pe>=In?"#d32f2f":"#666",textAlign:"right"},children:[pe," / ",In]})]})]},J.id)}),P.filter(J=>_.has(J.id)).map(J=>{const he=J.type||"Ground Node",R=j.get(J.id)||"",O=R.length;return l.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[l.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[l.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),l.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:he})]}),l.jsxs("div",{style:{padding:"8px"},children:[l.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:l.jsxs("div",{children:["Node ID: ",J.pointId||"(not assigned)"]})}),l.jsx("textarea",{value:R,onChange:pe=>ne(J.id,pe.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:In,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),l.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:O>=In?"#d32f2f":"#666",textAlign:"right"},children:[O," / ",In]})]})]},J.id)}),l.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[l.jsx("button",{onClick:ze,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#4CAF50"},children:"Save Notes"}),l.jsx("button",{onClick:me,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#616161"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#757575"},children:"Close"})]})]})]})})]})},ux=({visible:c,dimensions:h,onSave:v,onClose:f})=>{const[_,Q]=T.useState(""),[je,Te]=T.useState(""),[g,P]=T.useState("inches");T.useEffect(()=>{c&&h?(Q(h.width.toString()),Te(h.height.toString()),P(h.unit)):c&&(Q(""),Te(""),P("inches"))},[c,h]);const ye=()=>{const we=parseFloat(_),He=parseFloat(je);if(isNaN(we)||we<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(He)||He<=0){alert("Please enter a valid height greater than 0");return}v({width:we,height:He,unit:g}),f()},me=()=>{f()};return c?l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:we=>{we.target===we.currentTarget&&me()},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:we=>we.stopPropagation(),children:[l.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),l.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[l.jsx("input",{type:"number",step:"0.001",min:"0.001",value:_,onChange:we=>Q(we.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),l.jsxs("select",{value:g,onChange:we=>P(we.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[l.jsx("option",{value:"inches",children:"inches"}),l.jsx("option",{value:"mm",children:"mm"})]})]})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),l.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[l.jsx("input",{type:"number",step:"0.001",min:"0.001",value:je,onChange:we=>Te(we.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),l.jsxs("select",{value:g,onChange:we=>P(we.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[l.jsx("option",{value:"inches",children:"inches"}),l.jsx("option",{value:"mm",children:"mm"})]})]})]}),l.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[l.jsx("button",{onClick:me,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),l.jsx("button",{onClick:ye,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},fx=({component:c,componentEditor:h,setComponentEditor:v,areComponentsLocked:f,componentsTop:_,componentsBottom:Q,setComponentsTop:je,setComponentsBottom:Te})=>l.jsxs(l.Fragment,{children:[c.componentType==="Resistor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),l.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:h.resistance||"",onChange:g=>v({...h,resistance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),l.jsx("select",{value:h.resistanceUnit||Ye("resistance"),onChange:g=>v({...h,resistanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("resistance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),l.jsxs("select",{id:`component-power-${c.id}`,value:h.power||"1/4",onChange:g=>v({...h,power:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[l.jsx("option",{value:"1/20",children:"1/20 W"}),l.jsx("option",{value:"1/16",children:"1/16 W"}),l.jsx("option",{value:"1/10",children:"1/10 W"}),l.jsx("option",{value:"1/8",children:"1/8 W"}),l.jsx("option",{value:"1/4",children:"1/4 W"}),l.jsx("option",{value:"1/2",children:"1/2 W"}),l.jsx("option",{value:"1",children:"1 W"}),l.jsx("option",{value:"2",children:"2 W"}),l.jsx("option",{value:"3",children:"3 W"}),l.jsx("option",{value:"5",children:"5 W"}),l.jsx("option",{value:"10",children:"10 W"}),l.jsx("option",{value:"25",children:"25 W"}),l.jsx("option",{value:"50",children:"50 W"}),l.jsx("option",{value:"100",children:"100 W"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),l.jsxs("select",{id:`component-tolerance-${c.id}`,value:h.tolerance||"5%",onChange:g=>v({...h,tolerance:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"0.05%",children:"0.05%"}),l.jsx("option",{value:"0.1%",children:"0.1%"}),l.jsx("option",{value:"0.25%",children:"0.25%"}),l.jsx("option",{value:"0.5%",children:"0.5%"}),l.jsx("option",{value:"1%",children:"1%"}),l.jsx("option",{value:"2%",children:"2%"}),l.jsx("option",{value:"5%",children:"5%"}),l.jsx("option",{value:"10%",children:"10%"}),l.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Capacitor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),l.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:h.capacitance||"",onChange:g=>v({...h,capacitance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),l.jsx("select",{value:h.capacitanceUnit||Ye("capacitance"),onChange:g=>v({...h,capacitanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("capacitance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),l.jsx("select",{value:h.voltageUnit||Ye("voltage"),onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-dielectric-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),l.jsxs("select",{id:`component-dielectric-${c.id}`,value:h.dielectric||"Ceramic",onChange:g=>v({...h,dielectric:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Ceramic",children:"Ceramic"}),l.jsx("option",{value:"Tantalum",children:"Tantalum"}),l.jsx("option",{value:"Film",children:"Film"}),l.jsx("option",{value:"Polyester",children:"Polyester"}),l.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),l.jsx("option",{value:"Mica",children:"Mica"}),l.jsx("option",{value:"Paper",children:"Paper"}),l.jsx("option",{value:"Glass",children:"Glass"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),l.jsxs("select",{id:`component-tolerance-${c.id}`,value:h.tolerance||"10%",onChange:g=>v({...h,tolerance:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"0.5%",children:"0.5%"}),l.jsx("option",{value:"1%",children:"1%"}),l.jsx("option",{value:"2%",children:"2%"}),l.jsx("option",{value:"5%",children:"5%"}),l.jsx("option",{value:"10%",children:"10%"}),l.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Film Capacitor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),l.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:h.capacitance||"",onChange:g=>v({...h,capacitance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),l.jsx("select",{value:h.capacitanceUnit||Ye("capacitance"),onChange:g=>v({...h,capacitanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("capacitance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),l.jsx("select",{value:h.voltageUnit||Ye("voltage"),onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-filmtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Film Type:"}),l.jsxs("select",{id:`component-filmtype-${c.id}`,value:h.filmType||"Polyester",onChange:g=>v({...h,filmType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Polyester",children:"Polyester"}),l.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),l.jsx("option",{value:"Polyethylene",children:"Polyethylene"}),l.jsx("option",{value:"Polystyrene",children:"Polystyrene"}),l.jsx("option",{value:"Polycarbonate",children:"Polycarbonate"}),l.jsx("option",{value:"PTFE",children:"PTFE (Teflon)"}),l.jsx("option",{value:"PPS",children:"PPS (Polyphenylene Sulfide)"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),l.jsxs("select",{id:`component-tolerance-${c.id}`,value:h.tolerance||"10%",onChange:g=>v({...h,tolerance:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"0.5%",children:"0.5%"}),l.jsx("option",{value:"1%",children:"1%"}),l.jsx("option",{value:"2%",children:"2%"}),l.jsx("option",{value:"5%",children:"5%"}),l.jsx("option",{value:"10%",children:"10%"}),l.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Electrolytic Capacitor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),l.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:h.capacitance||"",onChange:g=>v({...h,capacitance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),l.jsxs("select",{value:h.capacitanceUnit||"F",onChange:g=>v({...h,capacitanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:[l.jsx("option",{value:"pF",children:"pF"}),l.jsx("option",{value:"nF",children:"nF"}),l.jsx("option",{value:"F",children:"F"}),l.jsx("option",{value:"mF",children:"mF"}),l.jsx("option",{value:"F",children:"F"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 25"}),l.jsx("select",{value:h.voltageUnit||Ye("voltage"),onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),l.jsxs("select",{id:`component-tolerance-${c.id}`,value:h.tolerance||"20%",onChange:g=>v({...h,tolerance:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},children:[l.jsx("option",{value:"0.5%",children:"0.5%"}),l.jsx("option",{value:"1%",children:"1%"}),l.jsx("option",{value:"2%",children:"2%"}),l.jsx("option",{value:"5%",children:"5%"}),l.jsx("option",{value:"10%",children:"10%"}),l.jsx("option",{value:"20%",children:"20%"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),l.jsxs("select",{id:`component-polarity-${c.id}`,value:h.polarityCapacitor||c.polarity||"Positive",onChange:g=>v({...h,polarityCapacitor:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Positive",children:"Positive"}),l.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),c.componentType==="Inductor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-inductance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),l.jsx("input",{id:`component-inductance-${c.id}`,type:"text",value:h.inductance||"",onChange:g=>v({...h,inductance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),l.jsx("select",{value:h.inductanceUnit||Ye("inductance"),onChange:g=>v({...h,inductanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("inductance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),l.jsx("select",{value:h.currentUnit||Ye("current"),onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),l.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:h.resistance||"",onChange:g=>v({...h,resistance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),l.jsx("select",{value:h.resistanceUnit||"",onChange:g=>v({...h,resistanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("resistance").map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Diode"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-diodetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),l.jsxs("select",{id:`component-diodetype-${c.id}`,value:h.diodeType||"Standard",onChange:g=>v({...h,diodeType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Standard",children:"Standard"}),l.jsx("option",{value:"Zener",children:"Zener"}),l.jsx("option",{value:"LED",children:"LED"}),l.jsx("option",{value:"Schottky",children:"Schottky"}),l.jsx("option",{value:"Other",children:"Other"})]})]}),h.diodeType==="LED"&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-ledcolor-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),l.jsxs("select",{id:`component-ledcolor-${c.id}`,value:h.ledColor||"",onChange:g=>v({...h,ledColor:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"Red",children:"Red"}),l.jsx("option",{value:"Green",children:"Green"}),l.jsx("option",{value:"Blue",children:"Blue"}),l.jsx("option",{value:"Yellow",children:"Yellow"}),l.jsx("option",{value:"Orange",children:"Orange"}),l.jsx("option",{value:"White",children:"White"}),l.jsx("option",{value:"RGB",children:"RGB"}),l.jsx("option",{value:"IR",children:"IR (Infrared)"}),l.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),l.jsx("select",{value:h.voltageUnit||Ye("voltage"),onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),l.jsx("select",{value:h.currentUnit||Ye("current"),onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Battery"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 3.7"}),l.jsx("select",{value:h.voltageUnit||"V",onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-capacity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),l.jsx("input",{id:`component-capacity-${c.id}`,type:"text",value:h.capacity||"",onChange:g=>v({...h,capacity:g.target.value}),disabled:f,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 2000mAh"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-chemistry-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),l.jsxs("select",{id:`component-chemistry-${c.id}`,value:h.chemistry||"Li-ion",onChange:g=>v({...h,chemistry:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Li-ion",children:"Li-ion"}),l.jsx("option",{value:"LiPo",children:"LiPo"}),l.jsx("option",{value:"NiMH",children:"NiMH"}),l.jsx("option",{value:"NiCd",children:"NiCd"}),l.jsx("option",{value:"Alkaline",children:"Alkaline"}),l.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),l.jsx("option",{value:"Lithium",children:"Lithium"}),l.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),c.componentType==="Fuse"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5"}),l.jsx("select",{value:h.currentUnit||"A",onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 250"}),l.jsx("select",{value:h.voltageUnit||"V",onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-fusetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),l.jsxs("select",{id:`component-fusetype-${c.id}`,value:h.fuseType||"Fast-blow",onChange:g=>v({...h,fuseType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),l.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),l.jsx("option",{value:"Time-delay",children:"Time-delay"}),l.jsx("option",{value:"Resettable",children:"Resettable"}),l.jsx("option",{value:"Cartridge",children:"Cartridge"}),l.jsx("option",{value:"Glass",children:"Glass"}),l.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),c.componentType==="Relay"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-coilvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),l.jsx("input",{id:`component-coilvoltage-${c.id}`,type:"text",value:h.coilVoltage||"",onChange:g=>v({...h,coilVoltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),l.jsx("select",{value:h.coilVoltageUnit||Ye("voltage"),onChange:g=>v({...h,coilVoltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-contacttype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),l.jsxs("select",{id:`component-contacttype-${c.id}`,value:h.contactType||"SPST",onChange:g=>v({...h,contactType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),l.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),l.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),l.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),l.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),l.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),l.jsx("select",{value:h.currentUnit||Ye("current"),onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Motor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-motortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),l.jsxs("select",{id:`component-motortype-${c.id}`,value:h.motorType||"DC",onChange:g=>v({...h,motorType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"DC",children:"DC Motor"}),l.jsx("option",{value:"Stepper",children:"Stepper Motor"}),l.jsx("option",{value:"Servo",children:"Servo Motor"}),l.jsx("option",{value:"Brushless",children:"Brushless DC"}),l.jsx("option",{value:"AC",children:"AC Motor"}),l.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),l.jsx("select",{value:h.voltageUnit||Ye("voltage"),onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),l.jsx("select",{value:h.currentUnit||Ye("current"),onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Switch"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-switchtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),l.jsxs("select",{id:`component-switchtype-${c.id}`,value:h.switchType||"Toggle",onChange:g=>v({...h,switchType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Toggle",children:"Toggle"}),l.jsx("option",{value:"Push-button",children:"Push-button"}),l.jsx("option",{value:"Slide",children:"Slide"}),l.jsx("option",{value:"Rotary",children:"Rotary"}),l.jsx("option",{value:"DIP",children:"DIP Switch"}),l.jsx("option",{value:"Momentary",children:"Momentary"}),l.jsx("option",{value:"Latching",children:"Latching"}),l.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5"}),l.jsx("select",{value:h.currentUnit||Ye("current"),onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 250"}),l.jsx("select",{value:h.voltageUnit||Ye("voltage"),onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="FerriteBead"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),l.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:h.impedance||"",onChange:g=>v({...h,impedance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 100"}),l.jsx("select",{value:h.impedanceUnit||Ye("impedance"),onChange:g=>v({...h,impedanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("impedance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),l.jsx("select",{value:h.currentUnit||Ye("current"),onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Connector"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-connectortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),l.jsx("input",{id:`component-connectortype-${c.id}`,type:"text",value:h.connectorType||"",onChange:g=>v({...h,connectorType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-gender-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),l.jsxs("select",{id:`component-gender-${c.id}`,value:h.gender||"N/A",onChange:g=>v({...h,gender:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Male",children:"Male"}),l.jsx("option",{value:"Female",children:"Female"}),l.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),c.componentType==="Jumper"&&l.jsx(l.Fragment,{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-positions-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),l.jsx("input",{id:`component-positions-${c.id}`,type:"number",min:"2",value:h.positions||3,onChange:g=>v({...h,positions:parseInt(g.target.value)||3}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"}})]})}),c.componentType==="Speaker"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),l.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:h.impedance||"",onChange:g=>v({...h,impedance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 8"}),l.jsx("select",{value:h.impedanceUnit||Ye("impedance"),onChange:g=>v({...h,impedanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("impedance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),l.jsxs("select",{id:`component-power-${c.id}`,value:h.power||"1/4",onChange:g=>v({...h,power:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[l.jsx("option",{value:"1/20",children:"1/20 W"}),l.jsx("option",{value:"1/16",children:"1/16 W"}),l.jsx("option",{value:"1/10",children:"1/10 W"}),l.jsx("option",{value:"1/8",children:"1/8 W"}),l.jsx("option",{value:"1/4",children:"1/4 W"}),l.jsx("option",{value:"1/2",children:"1/2 W"}),l.jsx("option",{value:"1",children:"1 W"}),l.jsx("option",{value:"2",children:"2 W"}),l.jsx("option",{value:"3",children:"3 W"}),l.jsx("option",{value:"5",children:"5 W"}),l.jsx("option",{value:"10",children:"10 W"}),l.jsx("option",{value:"25",children:"25 W"}),l.jsx("option",{value:"50",children:"50 W"}),l.jsx("option",{value:"100",children:"100 W"})]})]})]}),c.componentType==="PowerSupply"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-inputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),l.jsx("input",{id:`component-inputvoltage-${c.id}`,type:"text",value:h.inputVoltage||"",onChange:g=>v({...h,inputVoltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 120"}),l.jsx("select",{value:h.inputVoltageUnit||Ye("voltage"),onChange:g=>v({...h,inputVoltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-outputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),l.jsx("input",{id:`component-outputvoltage-${c.id}`,type:"text",value:h.outputVoltage||"",onChange:g=>v({...h,outputVoltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),l.jsx("select",{value:h.outputVoltageUnit||Ye("voltage"),onChange:g=>v({...h,outputVoltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),l.jsx("select",{value:h.currentUnit||Ye("current"),onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Transistor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-transistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),l.jsxs("select",{id:`component-transistortype-${c.id}`,value:h.transistorType||"BJT",onChange:g=>v({...h,transistorType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),l.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),l.jsx("option",{value:"MOSFET",children:"MOSFET"}),l.jsx("option",{value:"IGBT",children:"IGBT"}),l.jsx("option",{value:"JFET",children:"JFET"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),l.jsxs("select",{id:`component-polarity-${c.id}`,value:h.polarity||"NPN",onChange:g=>v({...h,polarity:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"NPN",children:"NPN"}),l.jsx("option",{value:"PNP",children:"PNP"}),l.jsx("option",{value:"N-Channel",children:"N-Channel"}),l.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 50"}),l.jsx("select",{value:h.voltageUnit||Ye("voltage"),onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),l.jsx("input",{id:`component-current-${c.id}`,type:"text",value:h.current||"",onChange:g=>v({...h,current:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 1"}),l.jsx("select",{value:h.currentUnit||Ye("current"),onChange:g=>v({...h,currentUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("current").map(g=>l.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="ResistorNetwork"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),l.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:h.resistance||"",onChange:g=>v({...h,resistance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),l.jsx("select",{value:h.resistanceUnit||Ye("resistance"),onChange:g=>v({...h,resistanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("resistance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-configuration-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),l.jsx("input",{id:`component-configuration-${c.id}`,type:"text",value:h.configuration||"",onChange:g=>v({...h,configuration:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),c.componentType==="Thermistor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),l.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:h.resistance||"",onChange:g=>v({...h,resistance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),l.jsx("select",{value:h.resistanceUnit||Ye("resistance"),onChange:g=>v({...h,resistanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("resistance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-thermistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),l.jsxs("select",{id:`component-thermistortype-${c.id}`,value:h.thermistorType||"NTC",onChange:g=>v({...h,thermistorType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),l.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-beta-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),l.jsx("input",{id:`component-beta-${c.id}`,type:"text",value:h.beta||"",onChange:g=>v({...h,beta:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),c.componentType==="Transformer"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-primaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),l.jsx("input",{id:`component-primaryvoltage-${c.id}`,type:"text",value:h.primaryVoltage||"",onChange:g=>v({...h,primaryVoltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 120"}),l.jsx("select",{value:h.primaryVoltageUnit||Ye("voltage"),onChange:g=>v({...h,primaryVoltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-secondaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),l.jsx("input",{id:`component-secondaryvoltage-${c.id}`,type:"text",value:h.secondaryVoltage||"",onChange:g=>v({...h,secondaryVoltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 12"}),l.jsx("select",{value:h.secondaryVoltageUnit||Ye("voltage"),onChange:g=>v({...h,secondaryVoltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),l.jsxs("select",{id:`component-power-${c.id}`,value:h.power||"1/4",onChange:g=>v({...h,power:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[l.jsx("option",{value:"1/20",children:"1/20 W"}),l.jsx("option",{value:"1/16",children:"1/16 W"}),l.jsx("option",{value:"1/10",children:"1/10 W"}),l.jsx("option",{value:"1/8",children:"1/8 W"}),l.jsx("option",{value:"1/4",children:"1/4 W"}),l.jsx("option",{value:"1/2",children:"1/2 W"}),l.jsx("option",{value:"1",children:"1 W"}),l.jsx("option",{value:"2",children:"2 W"}),l.jsx("option",{value:"3",children:"3 W"}),l.jsx("option",{value:"5",children:"5 W"}),l.jsx("option",{value:"10",children:"10 W"}),l.jsx("option",{value:"25",children:"25 W"}),l.jsx("option",{value:"50",children:"50 W"}),l.jsx("option",{value:"100",children:"100 W"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-turns-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),l.jsx("input",{id:`component-turns-${c.id}`,type:"text",value:h.turns||"",onChange:g=>v({...h,turns:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),c.componentType==="TestPoint"&&l.jsx(l.Fragment,{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-signal-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),l.jsx("input",{id:`component-signal-${c.id}`,type:"text",value:h.signal||"",onChange:g=>v({...h,signal:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),c.componentType==="IntegratedCircuit"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-ictype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),l.jsxs("select",{id:`component-ictype-${c.id}`,value:h.icType||"Op-Amp",onChange:g=>v({...h,icType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),l.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),l.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),l.jsx("option",{value:"Logic",children:"Logic"}),l.jsx("option",{value:"Memory",children:"Memory"}),l.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),l.jsx("option",{value:"Timer",children:"Timer"}),l.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),l.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),l.jsx("option",{value:"Comparator",children:"Comparator"}),l.jsx("option",{value:"Transceiver",children:"Transceiver"}),l.jsx("option",{value:"Driver",children:"Driver"}),l.jsx("option",{value:"Amplifier",children:"Amplifier"}),l.jsx("option",{value:"Other",children:"Other"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-datasheet-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),l.jsx("input",{id:`component-datasheet-${c.id}`,type:"text",value:h.datasheet||"",onChange:g=>v({...h,datasheet:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"URL"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-pincount-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),l.jsx("input",{id:`component-pincount-${c.id}`,name:`component-pincount-${c.id}`,type:"number",min:"1",value:h.pinCount,onChange:g=>{const P=Math.max(1,parseInt(g.target.value)||1);v({...h,pinCount:P})},onBlur:g=>{if(f){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const P=Math.max(1,parseInt(g.target.value)||1),me=(h.layer==="top"?_:Q).find(we=>we.id===h.id);if(me&&P!==me.pinCount){const we=me.pinConnections||[],He=new Array(P).fill("").map((de,B)=>B<we.length?we[B]:""),q=me.pinPolarities||[],Ae=me.pinPolarities?new Array(P).fill("").map((de,B)=>B<q.length?q[B]:""):void 0,Be={...me,pinCount:P,pinConnections:He,...Ae!==void 0&&{pinPolarities:Ae}};h.layer==="top"?je(de=>de.map(B=>B.id===h.id?Be:B)):Te(de=>de.map(B=>B.id===h.id?Be:B)),v({...h,pinCount:P})}},disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"}})]})]}),c.componentType==="VacuumTube"&&l.jsx(l.Fragment,{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-tubetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),l.jsx("input",{id:`component-tubetype-${c.id}`,type:"text",value:h.tubeType||"",onChange:g=>v({...h,tubeType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),c.componentType==="VariableResistor"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-vrtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),l.jsxs("select",{id:`component-vrtype-${c.id}`,value:h.vrType||"Potentiometer",onChange:g=>v({...h,vrType:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),l.jsx("option",{value:"Rheostat",children:"Rheostat"}),l.jsx("option",{value:"Trimmer",children:"Trimmer"}),l.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),l.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:h.resistance||"",onChange:g=>v({...h,resistance:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 10"}),l.jsx("select",{value:h.resistanceUnit||Ye("resistance"),onChange:g=>v({...h,resistanceUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("resistance").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),l.jsxs("select",{id:`component-power-${c.id}`,value:h.power||"1/4",onChange:g=>v({...h,power:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[l.jsx("option",{value:"1/20",children:"1/20 W"}),l.jsx("option",{value:"1/16",children:"1/16 W"}),l.jsx("option",{value:"1/10",children:"1/10 W"}),l.jsx("option",{value:"1/8",children:"1/8 W"}),l.jsx("option",{value:"1/4",children:"1/4 W"}),l.jsx("option",{value:"1/2",children:"1/2 W"}),l.jsx("option",{value:"1",children:"1 W"}),l.jsx("option",{value:"2",children:"2 W"}),l.jsx("option",{value:"3",children:"3 W"}),l.jsx("option",{value:"5",children:"5 W"}),l.jsx("option",{value:"10",children:"10 W"}),l.jsx("option",{value:"25",children:"25 W"}),l.jsx("option",{value:"50",children:"50 W"}),l.jsx("option",{value:"100",children:"100 W"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-taper-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),l.jsxs("select",{id:`component-taper-${c.id}`,value:h.taper||"Linear",onChange:g=>v({...h,taper:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"Linear",children:"Linear"}),l.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),l.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),c.componentType==="Crystal"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-frequency-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),l.jsx("input",{id:`component-frequency-${c.id}`,type:"text",value:h.frequency||"",onChange:g=>v({...h,frequency:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-loadcapacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),l.jsx("input",{id:`component-loadcapacitance-${c.id}`,type:"text",value:h.loadCapacitance||"",onChange:g=>v({...h,loadCapacitance:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),l.jsxs("select",{id:`component-tolerance-${c.id}`,value:h.tolerance||"10ppm",onChange:g=>v({...h,tolerance:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"10ppm",children:"10ppm"}),l.jsx("option",{value:"20ppm",children:"20ppm"}),l.jsx("option",{value:"30ppm",children:"30ppm"}),l.jsx("option",{value:"50ppm",children:"50ppm"}),l.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),c.componentType==="ZenerDiode"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),l.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:h.voltage||"",onChange:g=>v({...h,voltage:g.target.value}),disabled:f,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1},placeholder:"e.g., 5.1"}),l.jsx("select",{value:h.voltageUnit||Ye("voltage"),onChange:g=>v({...h,voltageUnit:g.target.value}),disabled:f,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,width:"60px",marginRight:"12px"},children:_t("voltage").map(g=>l.jsx("option",{value:g,children:g},g))})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),l.jsxs("select",{id:`component-power-${c.id}`,value:h.power||"1/4",onChange:g=>v({...h,power:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"12px"},children:[l.jsx("option",{value:"1/20",children:"1/20 W"}),l.jsx("option",{value:"1/16",children:"1/16 W"}),l.jsx("option",{value:"1/10",children:"1/10 W"}),l.jsx("option",{value:"1/8",children:"1/8 W"}),l.jsx("option",{value:"1/4",children:"1/4 W"}),l.jsx("option",{value:"1/2",children:"1/2 W"}),l.jsx("option",{value:"1",children:"1 W"}),l.jsx("option",{value:"2",children:"2 W"}),l.jsx("option",{value:"3",children:"3 W"}),l.jsx("option",{value:"5",children:"5 W"}),l.jsx("option",{value:"10",children:"10 W"}),l.jsx("option",{value:"25",children:"25 W"}),l.jsx("option",{value:"50",children:"50 W"}),l.jsx("option",{value:"100",children:"100 W"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),l.jsxs("select",{id:`component-tolerance-${c.id}`,value:h.tolerance||"5%",onChange:g=>v({...h,tolerance:g.target.value}),disabled:f,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:f?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"0.5%",children:"0.5%"}),l.jsx("option",{value:"1%",children:"1%"}),l.jsx("option",{value:"2%",children:"2%"}),l.jsx("option",{value:"5%",children:"5%"}),l.jsx("option",{value:"10%",children:"10%"}),l.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),px=c=>{const h=Ic[c];return!h||!h.prefix||h.prefix.length<1?"?":h.prefix[0].substring(0,1).toUpperCase()},hx=({componentEditor:c,setComponentEditor:h,componentsTop:v,componentsBottom:f,setComponentsTop:_,setComponentsBottom:Q,connectingPin:je,setConnectingPin:Te,componentDialogPosition:g,setComponentDialogPosition:P,isDraggingDialog:ye,setIsDraggingDialog:me,dialogDragOffset:we,setDialogDragOffset:He,areComponentsLocked:q,setSelectedComponentIds:Ae,setNotesDialogVisible:Be})=>{if(!c||!c.visible)return null;let de=v.find(I=>I.id===c.id),B="top";if(de||(de=f.find(I=>I.id===c.id),B="bottom"),!de)return null;c.layer!==B&&h({...c,layer:B});const V=I=>{const j={...I},u=c.designator?.trim()||"";j.designator=u,j.x=c.x,j.y=c.y,j.layer=c.layer,j.orientation=c.orientation??0;const k=u.length>0?u.charAt(0).toUpperCase():px(I.componentType);if(j.abbreviation=k,"manufacturer"in j&&(j.manufacturer=c.manufacturer),"partNumber"in j&&(j.partNumber=c.partNumber),c.pinCount!==I.pinCount){j.pinCount=c.pinCount;const H=I.pinConnections||[];if(j.pinConnections=new Array(c.pinCount).fill("").map((fe,ee)=>ee<H.length?H[ee]:""),I.pinPolarities){const fe=I.pinPolarities||[];j.pinPolarities=new Array(c.pinCount).fill("").map((ee,ce)=>ce<fe.length?fe[ce]:"")}}else j.pinConnections=I.pinConnections||[],I.pinPolarities&&(j.pinPolarities=I.pinPolarities);if(I.componentType==="Resistor")j.resistance=c.resistance||void 0,j.resistanceUnit=c.resistanceUnit||void 0,j.power=c.power?`${c.power}W`:void 0,j.tolerance=c.tolerance||void 0;else if(I.componentType==="Capacitor")j.capacitance=c.capacitance||void 0,j.capacitanceUnit=c.capacitanceUnit||void 0,j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0,j.tolerance=c.tolerance||void 0,j.dielectric=c.dielectric||void 0;else if(I.componentType==="Electrolytic Capacitor")j.capacitance=c.capacitance||void 0,j.capacitanceUnit=c.capacitanceUnit||void 0,j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0,j.tolerance=c.tolerance||void 0,j.polarity=c.polarityCapacitor||void 0,j.esr=c.esr||void 0,j.esrUnit=c.esrUnit||void 0,j.temperature=c.temperature||void 0;else if(I.componentType==="Diode")j.diodeType=c.diodeType||void 0,j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0,j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0,j.ledColor=c.ledColor||void 0;else if(I.componentType==="Battery")j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0,j.capacity=c.capacity||void 0,j.capacityUnit=c.capacityUnit||void 0,j.chemistry=c.chemistry||void 0;else if(I.componentType==="Fuse")j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0,j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0,j.fuseType=c.fuseType||void 0;else if(I.componentType==="FerriteBead")j.impedance=c.impedance||void 0,j.impedanceUnit=c.impedanceUnit||void 0,j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0;else if(I.componentType==="Connector")j.connectorType=c.connectorType||void 0,j.gender=c.gender||void 0;else if(I.componentType==="Jumper")j.positions=c.positions||void 0;else if(I.componentType==="Relay")j.coilVoltage=c.coilVoltage||void 0,j.coilVoltageUnit=c.coilVoltageUnit||void 0,j.contactType=c.contactType||void 0,j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0;else if(I.componentType==="Inductor")j.inductance=c.inductance||void 0,j.inductanceUnit=c.inductanceUnit||void 0,j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0,j.resistance=c.resistance||void 0,j.resistanceUnit=c.resistanceUnit||void 0;else if(I.componentType==="Speaker")j.impedance=c.impedance||void 0,j.impedanceUnit=c.impedanceUnit||void 0,j.power=c.power?`${c.power}W`:void 0;else if(I.componentType==="Motor")j.motorType=c.motorType||void 0,j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0,j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0;else if(I.componentType==="PowerSupply")j.inputVoltage=c.inputVoltage||void 0,j.inputVoltageUnit=c.inputVoltageUnit||void 0,j.outputVoltage=c.outputVoltage||void 0,j.outputVoltageUnit=c.outputVoltageUnit||void 0,j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0;else if(I.componentType==="Transistor")j.transistorType=c.transistorType||void 0,j.polarity=c.polarity||void 0,j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0,j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0;else if(I.componentType==="ResistorNetwork")j.resistance=c.resistance||void 0,j.resistanceUnit=c.resistanceUnit||void 0,j.configuration=c.configuration||void 0;else if(I.componentType==="Thermistor")j.resistance=c.resistance||void 0,j.resistanceUnit=c.resistanceUnit||void 0,j.thermistorType=c.thermistorType||void 0,j.beta=c.beta||void 0;else if(I.componentType==="Switch")j.switchType=c.switchType||void 0,j.current=c.current||void 0,j.currentUnit=c.currentUnit||void 0,j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0;else if(I.componentType==="Transformer")j.primaryVoltage=c.primaryVoltage||void 0,j.primaryVoltageUnit=c.primaryVoltageUnit||void 0,j.secondaryVoltage=c.secondaryVoltage||void 0,j.secondaryVoltageUnit=c.secondaryVoltageUnit||void 0,j.power=c.power?`${c.power}W`:void 0,j.turns=c.turns||void 0;else if(I.componentType==="TestPoint")j.signal=c.signal||void 0;else if(I.componentType==="IntegratedCircuit"){const H=c.designator?.trim()||"";j.description=H||c.description||void 0,j.datasheet=c.datasheet||void 0,j.icType=c.icType||void 0,j.designator=H}else c.description!==void 0&&(j.description=c.description?.trim()||void 0);return I.componentType==="VacuumTube"?j.tubeType=c.tubeType||void 0:I.componentType==="VariableResistor"?(j.vrType=c.vrType||void 0,j.resistance=c.resistance||void 0,j.resistanceUnit=c.resistanceUnit||void 0,j.power=c.power?`${c.power}W`:void 0,j.taper=c.taper||void 0):I.componentType==="Crystal"?(j.frequency=c.frequency||void 0,j.loadCapacitance=c.loadCapacitance||void 0,j.tolerance=c.tolerance||void 0):I.componentType==="ZenerDiode"&&(j.voltage=c.voltage||void 0,j.voltageUnit=c.voltageUnit||void 0,j.power=c.power?`${c.power}W`:void 0,j.tolerance=c.tolerance||void 0),j},it=()=>{if(q){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const I=v.find(k=>k.id===c.id),j=f.find(k=>k.id===c.id),u=I||j;if(u){const k=V(u),H=u.layer,fe=c.layer;H!==fe?H==="top"?(_(ee=>ee.filter(ce=>ce.id!==c.id)),Q(ee=>[...ee,k])):(Q(ee=>ee.filter(ce=>ce.id!==c.id)),_(ee=>[...ee,k])):fe==="top"?_(ee=>ee.map(ce=>ce.id===c.id?k:ce)):Q(ee=>ee.map(ce=>ce.id===c.id?k:ce))}else if(console.warn(`Component ${c.id} not found in either layer array`),c.layer==="top"){const k=f.find(H=>H.id===c.id);if(k){const H=V(k);Q(fe=>fe.filter(ee=>ee.id!==c.id)),_(fe=>[...fe,H])}}else{const k=v.find(H=>H.id===c.id);if(k){const H=V(k);_(fe=>fe.filter(ee=>ee.id!==c.id)),Q(fe=>[...fe,H])}}h(null),Te(null)};return l.jsxs("div",{"data-component-editor-dialog":!0,onClick:I=>{if(je&&je.componentId===de.id){const j=I.target;(j.tagName==="BUTTON"||j.tagName==="INPUT"||j.closest("button")||j.closest("input"))&&I.stopPropagation()}},style:{position:"fixed",top:g?`${g.y}px`:"90px",left:g?`${g.x}px`:`${window.innerWidth-280}px`,transform:"none",background:je&&je.componentId===de.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:ye?"grabbing":"default"},children:[l.jsxs("div",{onMouseDown:I=>{const j=I.target;j.tagName==="BUTTON"||j.tagName==="INPUT"||j.closest("button")||j.closest("input")||g&&(He({x:I.clientX-g.x,y:I.clientY-g.y}),me(!0),I.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:ye?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[l.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),l.jsx("button",{onClick:()=>{h(null),Te(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),l.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:de.componentType})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-layer-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),l.jsxs("select",{id:`component-layer-${de.id}`,name:`component-layer-${de.id}`,value:c.layer,onChange:I=>h({...c,layer:I.target.value}),disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"top",children:"Top"}),l.jsx("option",{value:"bottom",children:"Bottom"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-orientation-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),l.jsxs("select",{id:`component-orientation-${de.id}`,name:`component-orientation-${de.id}`,value:c.orientation??0,onChange:I=>{const j=parseInt(I.target.value)||0;if(h({...c,orientation:j}),!q){const k=(c.layer==="top"?v:f).find(H=>H.id===c.id);if(k){const H={...k,orientation:j};c.layer==="top"?_(fe=>fe.map(ee=>ee.id===c.id?H:ee)):Q(fe=>fe.map(ee=>ee.id===c.id?H:ee))}}},disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1,marginRight:"8px"},children:[l.jsx("option",{value:"0",children:"0"}),l.jsx("option",{value:"90",children:"90"}),l.jsx("option",{value:"180",children:"180"}),l.jsx("option",{value:"270",children:"270"})]})]}),l.jsx(fx,{component:de,componentEditor:c,setComponentEditor:h,areComponentsLocked:q,componentsTop:v,componentsBottom:f,setComponentsTop:_,setComponentsBottom:Q}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[l.jsx("label",{htmlFor:`component-designator-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),l.jsx("input",{id:`component-designator-${de.id}`,name:`component-designator-${de.id}`,type:"text",value:c.designator||"",onChange:I=>{const j=I.target.value,u=j.length>0?j.charAt(0).toUpperCase():c.abbreviation;h({...c,designator:j,abbreviation:u})},disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:q?.6:1},placeholder:"e.g., U2, R7, C1"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-description-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),l.jsx("input",{id:`component-description-${de.id}`,name:`component-description-${de.id}`,type:"text",value:c.description||"",onChange:I=>{de.componentType==="IntegratedCircuit"?h({...c,description:I.target.value,designator:I.target.value}):h({...c,description:I.target.value})},disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1},placeholder:de.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-notes-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Notes:"}),l.jsx("input",{id:`component-notes-${de.id}`,name:`component-notes-${de.id}`,type:"text",readOnly:!0,value:de.notes||"",onClick:()=>{q||(Ae(new Set([de.id])),Be(!0))},disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1,cursor:q?"not-allowed":"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Click to edit notes...",title:de.notes||"Click to edit notes..."})]}),de.componentType!=="IntegratedCircuit"&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-pincount-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),l.jsx("input",{id:`component-pincount-${de.id}`,name:`component-pincount-${de.id}`,type:"number",min:"1",value:c.pinCount,onChange:I=>{const j=Math.max(1,parseInt(I.target.value)||1);h({...c,pinCount:j})},onBlur:I=>{if(q){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const j=Math.max(1,parseInt(I.target.value)||1),k=(c.layer==="top"?v:f).find(H=>H.id===c.id);if(k&&j!==k.pinCount){const H=k.pinConnections||[],fe=new Array(j).fill("").map((Pe,Re)=>Re<H.length?H[Re]:""),ee=k.pinPolarities||[],ce=k.pinPolarities?new Array(j).fill("").map((Pe,Re)=>Re<ee.length?ee[Re]:""):void 0,Se={...k,pinCount:j,pinConnections:fe,...ce!==void 0&&{pinPolarities:ce}};c.layer==="top"?_(Pe=>Pe.map(Re=>Re.id===c.id?Se:Re)):Q(Pe=>Pe.map(Re=>Re.id===c.id?Se:Re)),h({...c,pinCount:j})}},disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1}})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-x-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),l.jsx("input",{id:`component-x-${de.id}`,name:`component-x-${de.id}`,type:"number",value:c.x.toFixed(2),onChange:I=>{const j=parseFloat(I.target.value)||0;h({...c,x:j})},disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1}})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-y-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),l.jsx("input",{id:`component-y-${de.id}`,name:`component-y-${de.id}`,type:"number",value:c.y.toFixed(2),onChange:I=>{const j=parseFloat(I.target.value)||0;h({...c,y:j})},disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1}})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-manufacturer-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),l.jsx("input",{id:`component-manufacturer-${de.id}`,name:`component-manufacturer-${de.id}`,type:"text",value:c.manufacturer,onChange:I=>h({...c,manufacturer:I.target.value}),disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1}})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("label",{htmlFor:`component-partnumber-${de.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),l.jsx("input",{id:`component-partnumber-${de.id}`,name:`component-partnumber-${de.id}`,type:"text",value:c.partNumber,onChange:I=>h({...c,partNumber:I.target.value}),disabled:q,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:q?.6:1}})]}),l.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[l.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),je&&je.componentId===de.id&&l.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",je.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const I=de.componentType==="Electrolytic Capacitor"||de.componentType==="Diode"||de.componentType==="Battery"||de.componentType==="ZenerDiode",j=de.componentType==="Capacitor"&&"dielectric"in de&&de.dielectric==="Tantalum",u=I||j;return l.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[l.jsx("thead",{children:l.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[l.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),l.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),u&&l.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),l.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),l.jsx("tbody",{children:Array.from({length:c.pinCount},(k,H)=>{const ee=(c.layer==="top"?v:f).find(Re=>Re.id===c.id),ce=ee?.pinConnections&&ee.pinConnections.length>H?ee.pinConnections[H]:"",Se=ee?.pinPolarities&&ee.pinPolarities.length>H&&ee.pinPolarities[H]||"",Pe=je&&je.componentId===de.id&&je.pinIndex===H;return l.jsxs("tr",{style:{cursor:q?"not-allowed":"pointer",background:Pe?"#e6f0ff":ce?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:Re=>{if(Re.target.tagName!=="SELECT"){if(q){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}Te(Pe?null:{componentId:de.id,pinIndex:H})}},title:ce?`Connected to: ${ce}`:"Select this pin, then click on a via or pad to connect",children:[l.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:l.jsx("input",{id:`pin-radio-${de.id}-${H}`,name:`pin-radio-${de.id}`,type:"radio",checked:!!Pe,onChange:()=>{if(q){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}Te(Pe?null:{componentId:de.id,pinIndex:H})},disabled:q,style:{margin:0,cursor:q?"not-allowed":"pointer",opacity:q?.6:1,width:"10px",height:"10px"}})}),l.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:Pe?600:400,fontFamily:"monospace"},children:H+1}),u&&l.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:l.jsxs("select",{value:Se??"",onChange:Re=>{if(q){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const U=Re.target.value,ze=(c.layer==="top"?v:f).find(J=>J.id===c.id);if(ze){const he=[...ze.pinPolarities||new Array(ze.pinCount).fill("")];for(;he.length<ze.pinCount;)he.push("");he[H]=U;const R={...ze,pinPolarities:he};c.layer==="top"?_(O=>O.map(pe=>pe.id===c.id?R:pe)):Q(O=>O.map(pe=>pe.id===c.id?R:pe))}},disabled:q,onClick:Re=>Re.stopPropagation(),onFocus:Re=>Re.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:q?"not-allowed":"pointer",opacity:q?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[l.jsx("option",{value:"",children:"-"}),l.jsx("option",{value:"+",children:"+"}),l.jsx("option",{value:"-",children:"-"})]},`polarity-${de.id}-${H}-${Se}`)}),l.jsx("td",{style:{padding:"2px 4px",color:ce?"#28a745":"#999",fontWeight:ce?600:400,fontFamily:"monospace"},children:ce||"-"})]},H)})})]})})()]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[l.jsx("button",{onClick:()=>{h(null),Te(null)},disabled:q,style:{padding:"2px 5px",background:q?"#f5f5f5":"#fff",color:q?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:q?"not-allowed":"pointer",fontSize:"10px",opacity:q?.6:1},children:"Cancel"}),l.jsx("button",{onClick:it,disabled:q,style:{padding:"2px 5px",background:q?"#f5f5f5":"#0b5fff",color:q?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:q?"not-allowed":"pointer",fontSize:"10px",opacity:q?.6:1},children:"Save"})]})]})};function gx(){const[c,h]=T.useState([]),[v,f]=T.useState(!1),[_,Q]=T.useState([]),[je,Te]=T.useState(null),[g,P]=T.useState("trace"),[ye,me]=T.useState("top"),we=T.useRef([]),He=T.useRef(0),q=T.useRef(!1),Ae=T.useCallback(()=>{f(!0),Q([]),we.current=[]},[]),Be=T.useCallback(()=>{f(!1),Q([]),we.current=[]},[]),de=T.useCallback(V=>{Q(it=>[...it,V]),we.current=[...we.current,V]},[]),B=T.useCallback(V=>{h(it=>[...it,V]),Q([]),we.current=[]},[]);return{drawingStrokes:c,setDrawingStrokes:h,isDrawing:v,setIsDrawing:f,currentStroke:_,setCurrentStroke:Q,tracePreviewMousePos:je,setTracePreviewMousePos:Te,drawingMode:g,setDrawingMode:P,selectedDrawingLayer:ye,setSelectedDrawingLayer:me,currentStrokeRef:we,lastTraceClickTimeRef:He,isDoubleClickingTraceRef:q,startDrawing:Ae,stopDrawing:Be,addPointToStroke:de,finishStroke:B}}function xx(){const[c,h]=T.useState(new Set),[v,f]=T.useState(!1),[_,Q]=T.useState(new Set),[je,Te]=T.useState(new Set),[g,P]=T.useState(new Set),ye=T.useCallback(()=>{h(new Set),Q(new Set),Te(new Set),P(new Set)},[]),me=T.useCallback((q,Ae="stroke")=>{Ae==="stroke"?h(Be=>new Set([...Be,q])):Ae==="component"?Q(Be=>new Set([...Be,q])):Ae==="power"?Te(Be=>new Set([...Be,q])):Ae==="ground"&&P(Be=>new Set([...Be,q]))},[]),we=T.useCallback((q,Ae="stroke")=>{Ae==="stroke"?h(Be=>{const de=new Set(Be);return de.delete(q),de}):Ae==="component"?Q(Be=>{const de=new Set(Be);return de.delete(q),de}):Ae==="power"?Te(Be=>{const de=new Set(Be);return de.delete(q),de}):Ae==="ground"&&P(Be=>{const de=new Set(Be);return de.delete(q),de})},[]),He=T.useCallback((q,Ae="stroke")=>{Ae==="stroke"?h(q):Ae==="component"?Q(q):Ae==="power"?Te(q):Ae==="ground"&&P(q)},[]);return{selectedIds:c,setSelectedIds:h,isSelecting:v,setIsSelecting:f,selectedComponentIds:_,setSelectedComponentIds:Q,selectedPowerIds:je,setSelectedPowerIds:Te,selectedGroundIds:g,setSelectedGroundIds:P,clearSelection:ye,addToSelection:me,removeFromSelection:we,setSelection:He}}function yx(){const[c,h]=T.useState(null),[v,f]=T.useState(!1),[_,Q]=T.useState(null),[je,Te]=T.useState("nudge"),g=T.useCallback((ye,me)=>{h(ye),f(!0),Q(me)},[]),P=T.useCallback(()=>{f(!1),h(null),Q(null)},[]);return{selectedImageForTransform:c,setSelectedImageForTransform:h,isTransforming:v,setIsTransforming:f,transformStartPos:_,setTransformStartPos:Q,transformMode:je,setTransformMode:Te,startTransform:g,stopTransform:P}}function bx(){const[c,h]=T.useState(null),[v,f]=T.useState(null),[_,Q]=T.useState("overlay"),[je,Te]=T.useState(50),[g,P]=T.useState(!1),[ye,me]=T.useState(!1),[we,He]=T.useState(!1),[q,Ae]=T.useState(!1),Be=T.useCallback(V=>{h(V)},[]),de=T.useCallback(V=>{f(V)},[]),B=T.useCallback(()=>{h(null),f(null)},[]);return{topImage:c,setTopImage:h,bottomImage:v,setBottomImage:f,currentView:_,setCurrentView:Q,transparency:je,setTransparency:Te,isTransparencyCycling:g,setIsTransparencyCycling:P,isGrayscale:ye,setIsGrayscale:me,isBlackAndWhiteEdges:we,setIsBlackAndWhiteEdges:He,isBlackAndWhiteInverted:q,setIsBlackAndWhiteInverted:Ae,loadTopImage:Be,loadBottomImage:de,clearImages:B}}function vx(){const[c,h]=T.useState(1),[v,f]=T.useState({x:0,y:0}),[_,Q]=T.useState(!1),[je,Te]=T.useState(!1),g=T.useCallback(()=>{h(1),f({x:0,y:0})},[]),P=T.useCallback((q=1.2)=>{h(Ae=>Ae*q)},[]),ye=T.useCallback((q=1.2)=>{h(Ae=>Ae/q)},[]),me=T.useCallback(q=>{h(q)},[]),we=T.useCallback((q,Ae)=>{f(Be=>({x:Be.x+q,y:Be.y+Ae}))},[]),He=T.useCallback((q,Ae)=>{f({x:q,y:Ae})},[]);return{viewScale:c,setViewScale:h,viewPan:v,setViewPan:f,isShiftConstrained:_,setIsShiftConstrained:Q,showBothLayers:je,setShowBothLayers:Te,resetView:g,zoomIn:P,zoomOut:ye,setZoom:me,pan:we,setPan:He}}function Ct(c,h,v,f){if(h==="power"){const Q=c[h]||"";return typeof Q=="string"&&Q.trim()!==""?{value:Q.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[h]!==void 0||c[v]!==void 0)return{value:c[h]||"",unit:c[v]||f};const _=c[h]||"";return typeof _=="string"&&_.trim()!==""?mx(_):{value:"",unit:f}}function mx(c){if(!c||c.trim()==="")return{value:"",unit:""};const h=c.trim(),v=h.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(v)return{value:v[1],unit:v[2]||""};const f=h.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return f?{value:f[1],unit:f[2]||""}:{value:h,unit:""}}function Sx(){const[c,h]=T.useState([]),[v,f]=T.useState([]),[_,Q]=T.useState(null),[je,Te]=T.useState(null),[g,P]=T.useState(null),[ye,me]=T.useState(!1),[we,He]=T.useState(null),q=T.useCallback((V,it)=>{it==="top"?h(I=>[...I,V]):f(I=>[...I,V])},[]),Ae=T.useCallback((V,it,I)=>{I==="top"?h(j=>j.map(u=>u.id===V?{...u,...it}:u)):f(j=>j.map(u=>u.id===V?{...u,...it}:u))},[]),Be=T.useCallback((V,it)=>{it==="top"?h(I=>I.filter(j=>j.id!==V)):f(I=>I.filter(j=>j.id!==V))},[]),de=T.useCallback((V,it)=>{const I=V.designator||"",j=V.abbreviation||(I.length>0?I.charAt(0).toUpperCase():""),u={visible:!0,layer:it,id:V.id,designator:I,abbreviation:j,manufacturer:"manufacturer"in V&&V.manufacturer||"",partNumber:"partNumber"in V&&V.partNumber||"",pinCount:V.pinCount,x:V.x,y:V.y,orientation:V.orientation??0,description:V.description||""};if(V.componentType==="Resistor"){const k=V,H=Ct(k,"resistance","resistanceUnit",Ye("resistance"));u.resistance=H.value,u.resistanceUnit=H.unit;const fe=Ct(k,"power","powerUnit","W");u.power=fe.value||"1/4",u.tolerance=k.tolerance||"5%"}else if(V.componentType==="Capacitor"){const k=V,H=Ct(k,"capacitance","capacitanceUnit",Ye("capacitance"));u.capacitance=H.value,u.capacitanceUnit=H.unit;const fe=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=fe.value,u.voltageUnit=fe.unit,u.tolerance=k.tolerance||"10%",u.dielectric=k.dielectric||"Ceramic"}else if(V.componentType==="Electrolytic Capacitor"){const k=V,H=Ct(k,"capacitance","capacitanceUnit",Ye("capacitance"));u.capacitance=H.value,u.capacitanceUnit=H.unit;const fe=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=fe.value,u.voltageUnit=fe.unit,u.tolerance=k.tolerance||"20%",u.polarityCapacitor=k.polarity||"Positive";const ee=Ct(k,"esr","esrUnit",Ye("esr"));u.esr=ee.value,u.esrUnit=ee.unit,u.temperature=k.temperature||""}else if(V.componentType==="Diode"){const k=V;u.diodeType=k.diodeType||"Standard";const H=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=H.value,u.voltageUnit=H.unit;const fe=Ct(k,"current","currentUnit",Ye("current"));u.current=fe.value,u.currentUnit=fe.unit,u.ledColor=k.ledColor||""}else if(V.componentType==="Battery"){const k=V,H=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=H.value,u.voltageUnit=H.unit;const fe=Ct(k,"capacity","capacityUnit",Ye("capacity"));u.capacity=fe.value,u.capacityUnit=fe.unit,u.chemistry=k.chemistry||"Li-ion"}else if(V.componentType==="Fuse"){const k=V,H=Ct(k,"current","currentUnit",Ye("current"));u.current=H.value,u.currentUnit=H.unit;const fe=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=fe.value,u.voltageUnit=fe.unit,u.fuseType=k.fuseType||"Fast-blow"}else if(V.componentType==="FerriteBead"){const k=V,H=Ct(k,"impedance","impedanceUnit",Ye("impedance"));u.impedance=H.value,u.impedanceUnit=H.unit;const fe=Ct(k,"current","currentUnit",Ye("current"));u.current=fe.value,u.currentUnit=fe.unit}else if(V.componentType==="Connector"){const k=V;u.connectorType=k.connectorType||"",u.gender=k.gender||"N/A"}else if(V.componentType==="Jumper"){const k=V;u.positions=k.positions||3}else if(V.componentType==="Relay"){const k=V,H=Ct(k,"coilVoltage","coilVoltageUnit",Ye("coilVoltage"));u.coilVoltage=H.value,u.coilVoltageUnit=H.unit,u.contactType=k.contactType||"SPST";const fe=Ct(k,"current","currentUnit",Ye("current"));u.current=fe.value,u.currentUnit=fe.unit}else if(V.componentType==="Inductor"){const k=V,H=Ct(k,"inductance","inductanceUnit",Ye("inductance"));u.inductance=H.value,u.inductanceUnit=H.unit;const fe=Ct(k,"current","currentUnit",Ye("current"));u.current=fe.value,u.currentUnit=fe.unit;const ee=Ct(k,"resistance","resistanceUnit",Ye("resistance"));u.resistance=ee.value,u.resistanceUnit=ee.unit}else if(V.componentType==="Speaker"){const k=V,H=Ct(k,"impedance","impedanceUnit",Ye("impedance"));u.impedance=H.value,u.impedanceUnit=H.unit;const fe=Ct(k,"power","powerUnit","W");u.power=fe.value||"1"}else if(V.componentType==="Motor"){const k=V;u.motorType=k.motorType||"DC";const H=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=H.value,u.voltageUnit=H.unit;const fe=Ct(k,"current","currentUnit",Ye("current"));u.current=fe.value,u.currentUnit=fe.unit}else if(V.componentType==="PowerSupply"){const k=V,H=Ct(k,"inputVoltage","inputVoltageUnit",Ye("inputVoltage"));u.inputVoltage=H.value,u.inputVoltageUnit=H.unit;const fe=Ct(k,"outputVoltage","outputVoltageUnit",Ye("outputVoltage"));u.outputVoltage=fe.value,u.outputVoltageUnit=fe.unit;const ee=Ct(k,"current","currentUnit",Ye("current"));u.current=ee.value,u.currentUnit=ee.unit}else if(V.componentType==="Transistor"){const k=V;u.transistorType=k.transistorType||"BJT",u.polarity=k.polarity||"NPN";const H=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=H.value,u.voltageUnit=H.unit;const fe=Ct(k,"current","currentUnit",Ye("current"));u.current=fe.value,u.currentUnit=fe.unit}else if(V.componentType==="ResistorNetwork"){const k=V,H=Ct(k,"resistance","resistanceUnit",Ye("resistance"));u.resistance=H.value,u.resistanceUnit=H.unit,u.configuration=k.configuration||""}else if(V.componentType==="Thermistor"){const k=V,H=Ct(k,"resistance","resistanceUnit",Ye("resistance"));u.resistance=H.value,u.resistanceUnit=H.unit,u.thermistorType=k.thermistorType||"NTC",u.beta=k.beta||""}else if(V.componentType==="Switch"){const k=V;u.switchType=k.switchType||"Toggle";const H=Ct(k,"current","currentUnit",Ye("current"));u.current=H.value,u.currentUnit=H.unit;const fe=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=fe.value,u.voltageUnit=fe.unit}else if(V.componentType==="Transformer"){const k=V,H=Ct(k,"primaryVoltage","primaryVoltageUnit",Ye("primaryVoltage"));u.primaryVoltage=H.value,u.primaryVoltageUnit=H.unit;const fe=Ct(k,"secondaryVoltage","secondaryVoltageUnit",Ye("secondaryVoltage"));u.secondaryVoltage=fe.value,u.secondaryVoltageUnit=fe.unit;const ee=Ct(k,"power","powerUnit",Ye("power"));u.power=ee.value||"1",u.turns=k.turns||""}else if(V.componentType==="TestPoint"){const k=V;u.signal=k.signal||""}else if(V.componentType==="IntegratedCircuit"){const k=V;u.description=k.description||V.designator||"",u.datasheet=k.datasheet||"",u.icType=k.icType||"Op-Amp"}else if(V.componentType==="VacuumTube"){const k=V;u.tubeType=k.tubeType||""}else if(V.componentType==="VariableResistor"){const k=V;u.vrType=k.vrType||"Potentiometer";const H=Ct(k,"resistance","resistanceUnit",Ye("resistance"));u.resistance=H.value,u.resistanceUnit=H.unit;const fe=Ct(k,"power","powerUnit",Ye("power"));u.power=fe.value||"1/4",u.taper=k.taper||""}else if(V.componentType==="Crystal"){const k=V;u.frequency=k.frequency||"",u.loadCapacitance=k.loadCapacitance||"",u.tolerance=k.tolerance||""}else if(V.componentType==="ZenerDiode"){const k=V,H=Ct(k,"voltage","voltageUnit",Ye("voltage"));u.voltage=H.value,u.voltageUnit=H.unit;const fe=Ct(k,"power","powerUnit",Ye("power"));u.power=fe.value||"1/4",u.tolerance=k.tolerance||"5%"}Q(u)},[]),B=T.useCallback(()=>{Q(null),Te(null)},[]);return{componentsTop:c,setComponentsTop:h,componentsBottom:v,setComponentsBottom:f,componentEditor:_,setComponentEditor:Q,connectingPin:je,setConnectingPin:Te,componentDialogPosition:g,setComponentDialogPosition:P,isDraggingDialog:ye,setIsDraggingDialog:me,dialogDragOffset:we,setDialogDragOffset:He,addComponent:q,updateComponent:Ae,removeComponent:Be,openComponentEditor:de,closeComponentEditor:B}}function wx(){const[c,h]=T.useState([]),[v,f]=T.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),[_,Q]=T.useState([]),[je,Te]=T.useState([]),[g,P]=T.useState(null),[ye,me]=T.useState(null),we=T.useCallback(j=>{h(u=>[...u,j])},[]),He=T.useCallback((j,u)=>{h(k=>k.map(H=>H.id===j?{...H,...u}:H))},[]),q=T.useCallback(j=>{h(u=>u.filter(k=>k.id!==j)),Q(u=>u.filter(k=>k.powerBusId!==j))},[]),Ae=T.useCallback(j=>{Q(u=>[...u,j])},[]),Be=T.useCallback(j=>{Q(u=>u.filter(k=>k.id!==j))},[]),de=T.useCallback(j=>{Te(u=>[...u,j])},[]),B=T.useCallback(j=>{Te(u=>u.filter(k=>k.id!==j))},[]),V=T.useCallback(j=>{f(u=>[...u,j])},[]),it=T.useCallback((j,u)=>{f(k=>k.map(H=>H.id===j?{...H,...u}:H))},[]),I=T.useCallback(j=>{f(u=>u.filter(k=>k.id!==j)),Te(u=>u.filter(k=>k.groundBusId===j))},[]);return{powerBuses:c,setPowerBuses:h,groundBuses:v,setGroundBuses:f,powerSymbols:_,setPowerSymbols:Q,groundSymbols:je,setGroundSymbols:Te,powerEditor:g,setPowerEditor:P,groundEditor:ye,setGroundEditor:me,addPowerBus:we,updatePowerBus:He,removePowerBus:q,addPowerSymbol:Ae,removePowerSymbol:Be,addGroundSymbol:de,removeGroundSymbol:B,addGroundBus:V,updateGroundBus:it,removeGroundBus:I}}function jx(){const h=T.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"18",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"18",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"18",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),componentConnectionColor:localStorage.getItem("defaultComponentConnectionColor")||"rgba(0, 150, 255, 0.6)",componentConnectionSize:parseInt(localStorage.getItem("defaultComponentConnectionSize")||"3",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[])(),[v,f]=T.useState(h.brushColor),[_,Q]=T.useState(h.brushSize),[je,Te]=T.useState(h.topTraceColor),[g,P]=T.useState(h.bottomTraceColor),[ye,me]=T.useState(h.topTraceSize),[we,He]=T.useState(h.bottomTraceSize),[q,Ae]=T.useState(h.topPadColor),[Be,de]=T.useState(h.bottomPadColor),[B,V]=T.useState(h.topPadSize),[it,I]=T.useState(h.bottomPadSize),[j,u]=T.useState(h.topComponentColor),[k,H]=T.useState(h.bottomComponentColor),[fe,ee]=T.useState(h.topComponentSize),[ce,Se]=T.useState(h.bottomComponentSize),[Pe,Re]=T.useState(h.componentConnectionColor),[U,ne]=T.useState(h.componentConnectionSize),ze=T.useCallback((he,R,O)=>{he==="trace"&&O?O==="top"?localStorage.setItem("defaultTopTraceSize",String(R)):localStorage.setItem("defaultBottomTraceSize",String(R)):he==="pad"&&O?O==="top"?localStorage.setItem("defaultTopPadSize",String(R)):localStorage.setItem("defaultBottomPadSize",String(R)):he==="component"&&O?O==="top"?localStorage.setItem("defaultTopComponentSize",String(R)):localStorage.setItem("defaultBottomComponentSize",String(R)):he==="componentConnection"?localStorage.setItem("defaultComponentConnectionSize",String(R)):he==="via"?localStorage.setItem("defaultViaSize",String(R)):he==="power"?localStorage.setItem("defaultPowerSize",String(R)):he==="ground"?localStorage.setItem("defaultGroundSize",String(R)):he==="brush"&&localStorage.setItem("defaultBrushSize",String(R))},[]),J=T.useCallback((he,R,O)=>{he==="trace"&&O?O==="top"?localStorage.setItem("defaultTopTraceColor",R):localStorage.setItem("defaultBottomTraceColor",R):he==="pad"&&O?O==="top"?localStorage.setItem("defaultTopPadColor",R):localStorage.setItem("defaultBottomPadColor",R):he==="component"&&O?O==="top"?localStorage.setItem("defaultTopComponentColor",R):localStorage.setItem("defaultBottomComponentColor",R):he==="componentConnection"?localStorage.setItem("defaultComponentConnectionColor",R):he==="via"?localStorage.setItem("defaultViaColor",R):he==="brush"&&localStorage.setItem("defaultBrushColor",R)},[]);return{brushColor:v,setBrushColor:f,brushSize:_,setBrushSize:Q,topTraceColor:je,setTopTraceColor:Te,bottomTraceColor:g,setBottomTraceColor:P,topTraceSize:ye,setTopTraceSize:me,bottomTraceSize:we,setBottomTraceSize:He,topPadColor:q,setTopPadColor:Ae,bottomPadColor:Be,setBottomPadColor:de,topPadSize:B,setTopPadSize:V,bottomPadSize:it,setBottomPadSize:I,topComponentColor:j,setTopComponentColor:u,bottomComponentColor:k,setBottomComponentColor:H,topComponentSize:fe,setTopComponentSize:ee,bottomComponentSize:ce,setBottomComponentSize:Se,componentConnectionColor:Pe,setComponentConnectionColor:Re,componentConnectionSize:U,setComponentConnectionSize:ne,saveDefaultSize:ze,saveDefaultColor:J}}const Tx=(c,h,v)=>{const f=`tool_${c}_color`,_=`tool_${c}_size`;localStorage.setItem(f,h),localStorage.setItem(_,String(v))};function Cx(c,h,v,f,_,Q,je,Te,g,P,ye,me,we,He,q,Ae,Be,de,B,V){const[it,I]=T.useState(()=>c()),j=T.useRef(null),u=T.useRef(f),k=T.useRef(_),H=T.useCallback(ce=>h==="draw"&&v==="trace"?ce.get("trace"):h==="draw"&&v==="via"?ce.get("via"):h==="draw"&&v==="pad"?ce.get("pad"):h==="component"?ce.get("component"):h==="power"?ce.get("power"):h==="ground"?ce.get("ground"):null,[h,v]);T.useEffect(()=>{I(ce=>{const Se=H(ce),Pe=Se?.id||null,Re=j.current,U=new Map(ce);if(Re&&Re!==Pe){const ne=ce.get(Re);ne&&(Tx(Re,u.current,k.current),U.set(Re,{...ne,settings:{color:u.current,size:k.current}}))}if(Se&&Pe!==Re)if(h==="draw"&&v==="trace"){const ne=de||"top",ze=ne==="top"?Q:je,J=ne==="top"?Te:g;u.current=ze,k.current=J,U.set("trace",{...Se,settings:{color:ze,size:J}})}else if(h==="draw"&&v==="pad"){const ne=B||"top",ze=ne==="top"?P:ye,J=ne==="top"?me:we;u.current=ze,k.current=J,U.set("pad",{...Se,settings:{color:ze,size:J}})}else if(h==="component"){const ne=V||"top",ze=ne==="top"?He:q,J=ne==="top"?Ae:Be;u.current=ze,k.current=J,U.set("component",{...Se,settings:{color:ze,size:J}})}else u.current=Se.settings.color,k.current=Se.settings.size;return j.current=Pe,U})},[h,v,f,_,Q,je,Te,g,P,ye,me,we,He,q,Ae,Be,de,B,V,H]);const fe=T.useCallback((ce,Se)=>{I(Pe=>{const Re=new Map(Pe),U=Re.get(ce);return U&&Re.set(ce,{...U,settings:Se}),Re})},[]),ee=T.useCallback((ce,Se,Pe)=>{I(Re=>{const U=new Map(Re),ne=U.get(ce);if(ne){const ze=new Map(ne.layerSettings);ze.set(Se,Pe),U.set(ce,{...ne,layerSettings:ze})}return U})},[]);return{toolRegistry:it,setToolRegistry:I,updateToolSettings:fe,updateToolLayerSettings:ee,getCurrentToolDef:H}}function zx(){const[c,h]=T.useState(!1),[v,f]=T.useState(!1),[_,Q]=T.useState(!1),[je,Te]=T.useState(!1),[g,P]=T.useState(!1),[ye,me]=T.useState(!1),[we,He]=T.useState(!1),q=T.useCallback(()=>{h(!0),f(!0),Q(!0),Te(!0),P(!0),me(!0),He(!0)},[]),Ae=T.useCallback(()=>{h(!1),f(!1),Q(!1),Te(!1),P(!1),me(!1),He(!1)},[]);return{areImagesLocked:c,setAreImagesLocked:h,areViasLocked:v,setAreViasLocked:f,arePadsLocked:_,setArePadsLocked:Q,areTracesLocked:je,setAreTracesLocked:Te,areComponentsLocked:g,setAreComponentsLocked:P,areGroundNodesLocked:ye,setAreGroundNodesLocked:me,arePowerNodesLocked:we,setArePowerNodesLocked:He,lockAll:q,unlockAll:Ae}}function Rx(){const[c,h]=T.useState(null),[v,f]=T.useState({visible:!1,size:6}),[_,Q]=T.useState({visible:!1,interval:5}),[je,Te]=T.useState({visible:!1,source:null,interval:5}),[g,P]=T.useState({visible:!1,text:""}),[ye,me]=T.useState({visible:!1,title:"",message:""}),[we,He]=T.useState({visible:!1}),[q,Ae]=T.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[Be,de]=T.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[B,V]=T.useState(!1),[it,I]=T.useState(!0);return{openMenu:c,setOpenMenu:h,setSizeDialog:v,setSetSizeDialog:f,autoSaveDialog:_,setAutoSaveDialog:Q,autoSavePromptDialog:je,setAutoSavePromptDialog:Te,debugDialog:g,setDebugDialog:P,errorDialog:ye,setErrorDialog:me,newProjectDialog:we,setNewProjectDialog:He,newProjectSetupDialog:q,setNewProjectSetupDialog:Ae,saveAsDialog:Be,setSaveAsDialog:de,showColorPicker:B,setShowColorPicker:V,showWelcomeDialog:it,setShowWelcomeDialog:I}}function kx(){const[c,h]=T.useState(!1),[v,f]=T.useState(1),[_,Q]=T.useState(null),[je,Te]=T.useState(""),[g,P]=T.useState(""),[ye,me]=T.useState(null),[we,He]=T.useState("pcb_project"),[q,Ae]=T.useState([]),[Be,de]=T.useState(-1),B=T.useRef(null),V=T.useRef(!1),it=T.useRef(!1);return{autoSaveEnabled:c,setAutoSaveEnabled:h,autoSaveInterval:v,setAutoSaveInterval:f,autoSaveDirHandle:_,setAutoSaveDirHandle:Q,autoSaveBaseName:je,setAutoSaveBaseName:Te,currentProjectFilePath:g,setCurrentProjectFilePath:P,projectDirHandle:ye,setProjectDirHandle:me,projectName:we,setProjectName:He,autoSaveFileHistory:q,setAutoSaveFileHistory:Ae,currentFileIndex:Be,setCurrentFileIndex:de,autoSaveIntervalRef:B,hasChangesSinceLastAutoSaveRef:V,prevAutoSaveEnabledRef:it}}function Dx(){const h=bx(),{topImage:v,setTopImage:f,bottomImage:_,setBottomImage:Q,currentView:je,setCurrentView:Te,transparency:g,setTransparency:P,isTransparencyCycling:ye,setIsTransparencyCycling:me,isGrayscale:we,setIsGrayscale:He,isBlackAndWhiteEdges:q,setIsBlackAndWhiteEdges:Ae,isBlackAndWhiteInverted:Be,setIsBlackAndWhiteInverted:de}=h,[B,V]=T.useState("none"),it=jx(),{brushColor:I,setBrushColor:j,brushSize:u,setBrushSize:k,topTraceColor:H,setTopTraceColor:fe,bottomTraceColor:ee,setBottomTraceColor:ce,topTraceSize:Se,setTopTraceSize:Pe,bottomTraceSize:Re,setBottomTraceSize:U,topPadColor:ne,setTopPadColor:ze,bottomPadColor:J,setBottomPadColor:he,topPadSize:R,setTopPadSize:O,bottomPadSize:pe,setBottomPadSize:Ne,topComponentColor:$e,setTopComponentColor:ut,bottomComponentColor:ft,setBottomComponentColor:fn,topComponentSize:Ut,setTopComponentSize:Rl,bottomComponentSize:fl,setBottomComponentSize:Jl,componentConnectionColor:Na,setComponentConnectionColor:zi,componentConnectionSize:na,setComponentConnectionSize:gs,saveDefaultSize:Qe,saveDefaultColor:kt}=it,xs=gx(),{drawingStrokes:Ie,setDrawingStrokes:Bt,isDrawing:la,setIsDrawing:Co,currentStroke:vt,setCurrentStroke:pl,tracePreviewMousePos:ei,setTracePreviewMousePos:ia,drawingMode:Oe,setDrawingMode:aa,selectedDrawingLayer:wt,setSelectedDrawingLayer:tl,currentStrokeRef:Ma,lastTraceClickTimeRef:Ua,isDoubleClickingTraceRef:Xn}=xs,fi=yx(),{selectedImageForTransform:ct,setSelectedImageForTransform:zo,isTransforming:Ro,setIsTransforming:Ba,transformStartPos:pi,setTransformStartPos:Sl,transformMode:kl,setTransformMode:Ri}=fi,ko=vx(),{viewScale:Ue,setViewScale:ti,viewPan:mt,setViewPan:Dn,isShiftConstrained:ki,setIsShiftConstrained:ys,showBothLayers:Do,setShowBothLayers:bs}=ko,[Ot,oa]=T.useState("top"),[xn,vs]=T.useState("top"),[Bn,ni]=T.useState("top"),An=Cx(lx,B,Oe,I,u,H,ee,Se,Re,ne,J,R,pe,$e,ft,Ut,fl,Ot,xn,Bn),{toolRegistry:Fe,setToolRegistry:yn,getCurrentToolDef:sa,updateToolSettings:Xr,updateToolLayerSettings:ms}=An,or=We.useRef(null),hl=We.useRef(I),Dl=We.useRef(u);We.useEffect(()=>{yn(a=>{const r=sa(a),x=r?.id||null,y=or.current,m=new Map(a);if(y&&y!==x){const b=a.get(y);b&&m.set(y,{...b,settings:{color:hl.current,size:Dl.current}})}if(r&&x!==y)if(B==="draw"&&Oe==="trace"){const b=Ot||"top",d=b==="top"?H:ee,w=b==="top"?Se:Re;j(d),k(w),hl.current=d,Dl.current=w;const C=new Map(r.layerSettings);C.set("top",{color:H,size:Se}),C.set("bottom",{color:ee,size:Re}),m.set("trace",{...r,settings:{color:d,size:w},layerSettings:C})}else if(B==="draw"&&Oe==="pad"){const b=xn||"top",d=b==="top"?ne:J,w=b==="top"?R:pe;j(d),k(w),hl.current=d,Dl.current=w;const C=new Map(r.layerSettings);C.set("top",{color:ne,size:R}),C.set("bottom",{color:J,size:pe}),m.set("pad",{...r,settings:{color:d,size:w},layerSettings:C})}else if(B==="component"){const b=Bn||"top",d=b==="top"?$e:ft,w=b==="top"?Ut:fl;j(d),k(w),hl.current=d,Dl.current=w;const C=new Map(r.layerSettings);C.set("top",{color:$e,size:Ut}),C.set("bottom",{color:ft,size:fl}),m.set("component",{...r,settings:{color:d,size:w},layerSettings:C})}else{const b=r.settings;j(b.color),k(b.size),hl.current=b.color,Dl.current=b.size}return or.current=x,m})},[B,Oe,sa,H,ee,Se,Re,ne,J,R,pe,$e,ft,Ut,fl]),We.useEffect(()=>{const a=Fe.get("trace");if(a){const y=a.layerSettings.get("top"),m=a.layerSettings.get("bottom");y&&(fe(y.color),Pe(y.size)),m&&(ce(m.color),U(m.size))}const r=Fe.get("pad");if(r){const y=r.layerSettings.get("top"),m=r.layerSettings.get("bottom");y&&(ze(y.color),O(y.size)),m&&(he(m.color),Ne(m.size))}const x=Fe.get("component");if(x){const y=x.layerSettings.get("top"),m=x.layerSettings.get("bottom");y&&(ut(y.color),Rl(y.size)),m&&(fn(m.color),Jl(m.size))}},[]),We.useEffect(()=>{yn(a=>{const r=new Map(a),x=a.get("trace");if(x){const d=new Map(x.layerSettings);d.set("top",{color:H,size:Se}),d.set("bottom",{color:ee,size:Re}),r.set("trace",{...x,layerSettings:d})}const y=a.get("pad");if(y){const d=new Map(y.layerSettings);d.set("top",{color:ne,size:R}),d.set("bottom",{color:J,size:pe}),r.set("pad",{...y,layerSettings:d})}const m=a.get("component");if(m){const d=new Map(m.layerSettings);d.set("top",{color:$e,size:Ut}),d.set("bottom",{color:ft,size:fl}),r.set("component",{...m,layerSettings:d})}const b=a.get("componentConnection");return b&&r.set("componentConnection",{...b,settings:{color:Na,size:na}}),r})},[H,ee,Se,Re,ne,J,R,pe,$e,ft,Ut,fl,Na,na,yn]),We.useEffect(()=>{yn(a=>{const r=sa(a);if(r)if(B==="draw"&&Oe==="trace"){const x=Ot||"top";x==="top"?(fe(I),Pe(u),kt("trace",I,"top"),Qe("trace",u,"top")):(ce(I),U(u),kt("trace",I,"bottom"),Qe("trace",u,"bottom"));const y=new Map(a),m=new Map(r.layerSettings);return m.set(x,{color:I,size:u}),y.set(r.id,{...r,layerSettings:m,settings:{color:I,size:u}}),hl.current=I,Dl.current=u,y}else if(B==="draw"&&Oe==="pad"){const x=xn||"top";x==="top"?(ze(I),O(u),kt("pad",I,"top"),Qe("pad",u,"top")):(he(I),Ne(u),kt("pad",I,"bottom"),Qe("pad",u,"bottom"));const y=new Map(a),m=new Map(r.layerSettings);return m.set(x,{color:I,size:u}),y.set(r.id,{...r,layerSettings:m,settings:{color:I,size:u}}),hl.current=I,Dl.current=u,y}else if(B==="component"){const x=Bn||"top";x==="top"?(ut(I),Rl(u),kt("component",I,"top"),Qe("component",u,"top")):(fn(I),Jl(u),kt("component",I,"bottom"),Qe("component",u,"bottom"));const y=new Map(a),m=new Map(r.layerSettings);return m.set(x,{color:I,size:u}),y.set(r.id,{...r,layerSettings:m,settings:{color:I,size:u}}),hl.current=I,Dl.current=u,y}else{const x=new Map(a);return x.set(r.id,{...r,settings:{color:I,size:u}}),hl.current=I,Dl.current=u,x}return a})},[I,u,B,Oe,Ot,xn,Bn,sa,kt,Qe,Wc,fe,ce,Pe,U,ze,he,O,Ne,ut,fn,Rl,Jl]),We.useEffect(()=>{B==="power"?(En(!0),Pl(null)):(En(!1),Pl(null))},[B]),We.useEffect(()=>{B==="ground"?(ba(!0),$o(null)):(ba(!1),$o(null))},[B]),We.useEffect(()=>{an(B==="draw"&&Oe==="trace")},[B,Oe]),We.useEffect(()=>{Ii(B==="draw"&&Oe==="pad")},[B,Oe]);const[Di,_l]=T.useState(void 0),[,ra]=T.useState([]),[,Ai]=T.useState([]),[,en]=T.useState([]),[,Ni]=T.useState([]),[Ss,Mi]=T.useState([]),[Ui,Nn]=T.useState([]),[Mn,ws]=T.useState([]),[Al,Gn]=T.useState([]),bn=T.useRef(null),tn=xx(),{selectedIds:Ve,setSelectedIds:St,isSelecting:_a,setIsSelecting:Ao,selectedComponentIds:dt,setSelectedComponentIds:pt,selectedPowerIds:zt,setSelectedPowerIds:tt,selectedGroundIds:Tt,setSelectedGroundIds:le}=tn,_n=Sx(),{componentsTop:st,setComponentsTop:rn,componentsBottom:rt,setComponentsBottom:qt,componentEditor:Oa,setComponentEditor:Ht,connectingPin:nn,setConnectingPin:wl,componentDialogPosition:Bi,setComponentDialogPosition:No,isDraggingDialog:Mo,setIsDraggingDialog:hi,dialogDragOffset:Ha,setDialogDragOffset:sr,openComponentEditor:Uo}=_n,Bo=wx(),{powerBuses:yt,setPowerBuses:Nl,groundBuses:$n,setGroundBuses:li,powerSymbols:_i,setPowerSymbols:jl,groundSymbols:js,setGroundSymbols:On,powerEditor:gl,setPowerEditor:ca}=Bo,Xc=zx(),{areImagesLocked:Fn,setAreImagesLocked:Ea,areViasLocked:Ln,setAreViasLocked:nl,arePadsLocked:qn,setArePadsLocked:Ts,areTracesLocked:jn,setAreTracesLocked:Gr,areComponentsLocked:ll,setAreComponentsLocked:Cs,areGroundNodesLocked:Hn,setAreGroundNodesLocked:Va,arePowerNodesLocked:cn,setArePowerNodesLocked:$r}=Xc,Od=Rx(),{openMenu:Hd,setOpenMenu:zs,setSizeDialog:Wa,setSetSizeDialog:da,autoSaveDialog:rr,setAutoSaveDialog:ua,autoSavePromptDialog:_o,setAutoSavePromptDialog:ii,debugDialog:Oo,setDebugDialog:Rs,errorDialog:Fr,setErrorDialog:cr,newProjectDialog:ks,setNewProjectDialog:Ds,newProjectSetupDialog:dn,setNewProjectSetupDialog:As,saveAsDialog:ln,setSaveAsDialog:Ns,showColorPicker:Lr,setShowColorPicker:dr}=Od,Ed=kx(),{autoSaveEnabled:Ol,setAutoSaveEnabled:gi,autoSaveInterval:Pa,setAutoSaveInterval:fa,autoSaveDirHandle:pa,setAutoSaveDirHandle:Ho,autoSaveBaseName:Hl,setAutoSaveBaseName:Ya,currentProjectFilePath:Ms,setCurrentProjectFilePath:Tl,projectDirHandle:ai,setProjectDirHandle:Oi,projectName:Zn,setProjectName:il,autoSaveFileHistory:Vd,setAutoSaveFileHistory:Us,currentFileIndex:Gc,setCurrentFileIndex:qr,autoSaveIntervalRef:Zt,hasChangesSinceLastAutoSaveRef:Cl,prevAutoSaveEnabledRef:Ia}=Ed,$c=T.useRef(null),Bs=T.useRef(null),ur=T.useRef(null),_s=T.useRef(null),Eo=T.useRef(null),Xa=T.useRef(null),Zr=T.useRef(null),[ha,fr]=T.useState(!1),Vo=T.useRef(null),Os=T.useRef(null),[Hs,pr]=T.useState(!1),[ga,al]=T.useState(null),[Ga,Qr]=T.useState(!1),[Es,Wo]=T.useState(null),[$a,Kr]=T.useState({width:960,height:600}),hr=T.useRef(null),Fa=T.useRef(null),Jr=T.useRef(null),xa=T.useRef(null),Vs=T.useRef(null),ec=T.useRef(null),ya=T.useRef(null),La=T.useRef(null),[Po,Yo]=T.useState(!0),[xi,Io]=T.useState(!0),[xl,gr]=T.useState(!0),[El,tc]=T.useState(!0),[Vl,xr]=T.useState(!0),[oi,Ws]=T.useState(!0),[Tn,Xo]=T.useState(!0),[wn,Hi]=T.useState(!0),[Wl,qa]=T.useState(!0),[si,Ps]=T.useState(!0),nt=_i,ht=js,[yr,Ei]=T.useState(!1),[nc,En]=T.useState(!1),[Go,Pl]=T.useState(null),[Fc,Za]=T.useState(!1),[Vi,ba]=T.useState(!1),[Qa,$o]=T.useState(null),[Ka,Ml]=T.useState(()=>{const a=localStorage.getItem("autoAssignDesignators");return a!==null?a==="true":!0}),[ri,va]=T.useState(!1),[br,Ja]=T.useState(!1),ol=T.useRef({}),[Cn,yi]=T.useState(!0),[yl,Yl]=T.useState(!0),[zn,Fo]=T.useState(null),[Ys,vr]=T.useState(!1),[Is,Vn]=T.useState(null),[$t,Rt]=T.useState(!1),[Ul,bl]=T.useState(null),[Xs,Wi]=T.useState(!1),[Gs,lc]=T.useState(null),[Lo,eo]=T.useState(()=>{const a=localStorage.getItem("boardDimensions");if(a)try{return JSON.parse(a)}catch{return null}return null}),[ic,qo]=T.useState(!1);We.useEffect(()=>{yt.length===0&&Nl([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[yt.length,Nl]);const Il=T.useCallback((a,r)=>{const x=nt.find(m=>m.pointId===a);if(x){const m=r.find(d=>d.id===x.powerBusId);return`Via (${m?m.voltage:x.type||"Power Node"})`}const y=ht.find(m=>m.pointId===a);return y?`Via (${y.type||"Ground"})`:"Via (Signal)"},[nt,ht]),sl=T.useCallback((a,r)=>{const x=nt.find(m=>m.pointId===a);if(x){const m=r.find(d=>d.id===x.powerBusId);return`Pad (${m?m.voltage:x.type||"Power Node"})`}const y=ht.find(m=>m.pointId===a);return y?`Pad (${y.type||"Ground"})`:"Pad (Signal)"},[nt,ht]),Pi=T.useCallback(()=>{const a=Ie.filter(r=>r.type==="via").map(r=>r.id);St(new Set(a)),pt(new Set),tt(new Set),le(new Set)},[Ie,St,pt,tt,le]),ma=T.useCallback(()=>{const a=Ie.filter(r=>r.type==="trace").map(r=>r.id);St(new Set(a)),pt(new Set),tt(new Set),le(new Set)},[Ie,St,pt,tt,le]),Yi=T.useCallback(()=>{const a=Ie.filter(r=>r.type==="pad").map(r=>r.id);St(new Set(a)),pt(new Set),tt(new Set),le(new Set)},[Ie,St,pt,tt,le]),ac=T.useCallback(()=>{const a=[...st,...rt].map(r=>r.id);pt(new Set(a)),St(new Set),tt(new Set),le(new Set)},[st,rt,pt,St,tt,le]),oc=T.useCallback(()=>{const a=[...st,...rt].filter(r=>{const x=r.pinConnections||[];return!(x.length>0&&x.length===r.pinCount&&x.every(m=>m&&m.trim()!==""))}).map(r=>r.id);pt(new Set(a)),St(new Set),tt(new Set),le(new Set),Rs({visible:!0,text:""})},[st,rt,pt,St,tt,le,Rs]),Zo=T.useCallback((a,r,x)=>{const y=bn.current;if(!y)return;const m=y.width-80,b=y.height-80,d=m/2,w=b/2,C=d-r*Ue,z=w-x*Ue;Dn({x:C,y:z}),pt(new Set([a])),St(new Set),tt(new Set),le(new Set)},[Ue,Dn,pt,St,tt,le]),mr=We.useMemo(()=>{const a=new Set(nt.map(x=>x.powerBusId).filter(x=>typeof x=="string"&&x.length>0)),r=yt.filter(x=>a.has(x.id)).map(x=>x.name);return Array.from(new Set(r)).sort()},[nt,yt]),to=We.useMemo(()=>{const a=new Set(ht.map(x=>x.groundBusId).filter(x=>typeof x=="string"&&x.length>0)),r=$n.filter(x=>a.has(x.id)).map(x=>x.name);return Array.from(new Set(r)).sort()},[ht,$n]),Qn=T.useCallback(()=>{const a=nt.map(r=>r.id);tt(new Set(a)),St(new Set),pt(new Set),le(new Set)},[nt,tt,St,pt,le]),Sr=T.useCallback(()=>{const a=ht.map(r=>r.id);le(new Set(a)),St(new Set),pt(new Set),tt(new Set)},[ht,le,St,pt,tt]),Lc=T.useCallback(a=>{const r=yt.filter(y=>y.name===a).map(y=>y.id);if(r.length===0)return;const x=nt.filter(y=>y.powerBusId&&r.includes(y.powerBusId)).map(y=>y.id);tt(new Set(x)),St(new Set),pt(new Set),le(new Set)},[yt,nt,tt,St,pt,le]),Wd=T.useCallback(a=>{const r=$n.filter(y=>y.name===a).map(y=>y.id);if(r.length===0)return;const x=ht.filter(y=>y.groundBusId&&r.includes(y.groundBusId)).map(y=>y.id);le(new Set(x)),St(new Set),pt(new Set),tt(new Set)},[$n,ht,le,St,pt,tt]),Pd=T.useCallback(a=>{switch(a.componentType){case"Resistor":case"ResistorNetwork":case"Thermistor":case"VariableResistor":if("resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit)return`${a.resistance} ${a.resistanceUnit}`;break;case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":if("capacitance"in a&&a.capacitance&&"capacitanceUnit"in a&&a.capacitanceUnit)return`${a.capacitance} ${a.capacitanceUnit}`;break;case"Inductor":if("inductance"in a&&a.inductance&&"inductanceUnit"in a&&a.inductanceUnit)return`${a.inductance} ${a.inductanceUnit}`;break;case"Battery":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"Diode":case"ZenerDiode":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"Fuse":if("current"in a&&a.current&&"currentUnit"in a&&a.currentUnit)return`${a.current} ${a.currentUnit}`;break;case"FerriteBead":if("impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit)return`${a.impedance} ${a.impedanceUnit}`;break;case"Relay":if("coilVoltage"in a&&a.coilVoltage&&"coilVoltageUnit"in a&&a.coilVoltageUnit)return`${a.coilVoltage} ${a.coilVoltageUnit}`;break;case"Speaker":if("impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit)return`${a.impedance} ${a.impedanceUnit}`;break;case"Motor":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"PowerSupply":if("outputVoltage"in a&&a.outputVoltage&&"outputVoltageUnit"in a&&a.outputVoltageUnit)return`${a.outputVoltage} ${a.outputVoltageUnit}`;break;case"Transistor":if("partNumber"in a&&a.partNumber)return a.partNumber;break;case"IntegratedCircuit":if("partNumber"in a&&a.partNumber)return a.partNumber;break}return null},[]),[$s,an]=T.useState(!1),Sa=T.useRef(null),[wa,Ii]=T.useState(!1),no=T.useRef(null),Xi=T.useRef(null),Gi=T.useRef(null),[wr,$i]=T.useState(!1),[Fs,lo]=T.useState(!1),[Wn,Ls]=T.useState(null),[jr,qc]=T.useState(new Set),io=T.useRef(null),Fi=T.useRef(null),ao=T.useRef(null),oo=T.useRef(null),Tr=T.useRef(null),Cr=T.useRef(null),Li=T.useRef(null),[so,sc]=T.useState(null),[bi,ro]=T.useState(!1),[vi,qs]=T.useState(null),[Xl,Qo]=T.useState(null),rc=T.useCallback(async(a,r)=>{try{const x=await createImageBitmap(a),y=URL.createObjectURL(a),m=await new Promise((z,Z)=>{const Y=new FileReader;Y.onload=()=>z(Y.result),Y.onerror=Z,Y.readAsDataURL(a)}),b=bn.current;let d=0,w=0;if(b){const z=b.width-80,Z=b.height-80,Y=z/2,oe=Z/2;d=(Y-mt.x)/Ue,w=(oe-mt.y)/Ue}const C={url:y,name:a.name,width:x.width,height:x.height,dataUrl:m,x:d,y:w,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:x};r==="top"?f(C):Q(C)}catch(x){console.error("Failed to load image",x)}},[mt.x,mt.y,Ue,v,_]),co=T.useCallback(a=>{a.stopPropagation(),a.preventDefault();const r=bn.current;if(!r)return;document.activeElement!==r&&r.focus();const x=r.getBoundingClientRect(),y=r.width/x.width,m=r.height/x.height,b=a.nativeEvent.offsetX,d=a.nativeEvent.offsetY,w=typeof b=="number"?b:a.clientX-x.left,C=typeof d=="number"?d:a.clientY-x.top,z=w*y,Z=C*m,Y=z-40,oe=Z-40,X=(Y-mt.x)/Ue,L=(oe-mt.y)/Ue;if(B==="center"){const W=r.width-80,G=r.height-80,ie=W/2,se=G/2,be=(ie-mt.x)/Ue,ke=(se-mt.y)/Ue;al({x:be,y:ke,zoom:Ue}),V("select"),_l(void 0);return}if(B==="select"){if(nn){let D=1/0,re=null,ae=null;const Ce=Math.max(6/Ue,4),Ke=[...st,...rt].find(Xe=>Xe.id===nn.componentId)?.layer||"top";for(const Xe of Ie)if((Xe.type==="via"||Xe.type==="pad")&&Xe.points.length>0){if(Xe.type==="pad"&&(Xe.layer||"top")!==Ke)continue;const at=Xe.points[0],Ze=Math.max(1,Xe.size/2),un=Math.hypot(at.x-X,at.y-L),gt=Math.max(Ze,Ce);un<=gt&&un<D&&(D=un,re=at.id??null,ae=Xe)}if(ae?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${ae.id}`),console.log(`  Point ID: ${re}`),console.log(`  Point coordinates: x=${ae.points[0].x.toFixed(2)}, y=${ae.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${X.toFixed(2)}, y=${L.toFixed(2)}`),console.log(`  Distance: ${D.toFixed(2)}`),console.log(`  Via size: ${ae.size}, radius: ${Math.max(1,ae.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${X.toFixed(2)}, y=${L.toFixed(2)}`),console.log(`  Hit tolerance: ${Ce.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${Ie.filter(Xe=>Xe.type==="via").length}`)),re!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${re} (type: ${typeof re})`);const Xe=String(re),at=nn.pinIndex,Ze=nn.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${at} (Pin ${at+1}) of component ${Ze} to point ID ${Xe}`);const un=st.find(Me=>Me.id===Ze),gt=rt.find(Me=>Me.id===Ze);un?(console.log("Component found in TOP layer"),rn(Me=>{const et=Me.find(xt=>xt.id===Ze);if(!et)return console.error(`Component ${Ze} not found in TOP layer during update!`),Me;console.log("BEFORE update: pinConnections =",et.pinConnections);const Et=et.pinConnections||[],It=Et.length>0?[...Et]:new Array(et.pinCount).fill("");let Gt;if(It.length!==et.pinCount){Gt=new Array(et.pinCount).fill("");for(let xt=0;xt<Math.min(It.length,et.pinCount);xt++)Gt[xt]=It[xt]||""}else Gt=[...It];Gt[at]=Xe,console.log(`Updating pin ${at} with value: ${Xe}`),console.log("New pinConnections array:",Gt);const mn=Me.map(xt=>xt.id===Ze?{...xt,pinConnections:Gt}:xt),hn=mn.find(xt=>xt.id===Ze);return console.log("AFTER update: pinConnections =",hn?.pinConnections),console.log(`Pin ${at} value: ${hn?.pinConnections[at]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),mn})):gt?(console.log("Component found in BOTTOM layer"),qt(Me=>{const et=Me.find(xt=>xt.id===Ze);if(!et)return console.error(`Component ${Ze} not found in BOTTOM layer during update!`),Me;console.log("BEFORE update: pinConnections =",et.pinConnections);const Et=et.pinConnections||[],It=Et.length>0?[...Et]:new Array(et.pinCount).fill("");let Gt;if(It.length!==et.pinCount){Gt=new Array(et.pinCount).fill("");for(let xt=0;xt<Math.min(It.length,et.pinCount);xt++)Gt[xt]=It[xt]||""}else Gt=[...It];Gt[at]=Xe,console.log(`Updating pin ${at} with value: ${Xe}`),console.log("New pinConnections array:",Gt);const mn=Me.map(xt=>xt.id===Ze?{...xt,pinConnections:Gt}:xt),hn=mn.find(xt=>xt.id===Ze);return console.log("AFTER update: pinConnections =",hn?.pinConnections),console.log(`Pin ${at} value: ${hn?.pinConnections[at]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),mn})):(console.error(`Component ${Ze} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",st.map(Me=>Me.id)),console.log("Available BOTTOM components:",rt.map(Me=>Me.id))),setTimeout(()=>{wl(null)},0);return}else wl(null)}const W=10,G=(()=>{for(const D of st)if(X>=D.x-W&&X<=D.x+W&&L>=D.y-W&&L<=D.y+W)return{layer:"top",comp:D};for(const D of rt)if(X>=D.x-W&&X<=D.x+W&&L>=D.y-W&&L<=D.y+W)return{layer:"bottom",comp:D};return null})();if(G){const{comp:D}=G;a.shiftKey?pt(re=>{const ae=new Set(re);return ae.has(D.id)?ae.delete(D.id):ae.add(D.id),ae}):(pt(new Set([D.id])),St(new Set),tt(new Set),le(new Set));return}const ie=Math.max(6/Ue,4);let se=null;for(const D of nt){const re=Math.max(6,D.size/2),ae=re*.8,Ce=re+ae,_e=Math.hypot(D.x-X,D.y-L),Ke=Math.abs(X-D.x)<=ie&&Math.abs(L-D.y)<=Ce,Xe=Math.abs(L-D.y)<=ie&&Math.abs(X-D.x)<=Ce;if(_e<=Math.max(re,ie)||Ke||Xe){se=D;break}}if(se){a.shiftKey?tt(D=>{const re=new Set(D);return re.has(se.id)?re.delete(se.id):re.add(se.id),re}):(tt(new Set([se.id])),St(new Set),pt(new Set),le(new Set));return}let be=null;for(const D of ht){const re=Math.max(6,(D.size||18)/2),ae=re*.8,Ce=re+ae,_e=Math.hypot(D.x-X,D.y-L),Ke=Math.abs(X-D.x)<=ie&&Math.abs(L-D.y)<=Ce,Xe=Math.abs(L-D.y)<=ie&&Math.abs(X-D.x)<=Ce;if(_e<=Math.max(re,ie)||Ke||Xe){be=D;break}}if(be){a.shiftKey?le(D=>{const re=new Set(D);return re.has(be.id)?re.delete(be.id):re.add(be.id),re}):(le(new Set([be.id])),St(new Set),pt(new Set),tt(new Set));return}const ve=Math.max(6/Ue,4/Ue),De=Math.max(ve,.5);let M=null;for(const D of Ie)if((D.type==="via"||D.type==="pad")&&D.points.length>0){let re=!1;if(D.type==="via"?re=xl:D.type==="pad"&&(re=(D.layer||"top")==="top"?oi:Tn),!re)continue;const ae=D.points[0],Ce=Math.max(1,D.size/2);if(Math.hypot(ae.x-X,ae.y-L)<=Math.max(Ce,De)){M=D;break}}if(M){a.shiftKey?St(D=>{const re=new Set(D);return re.has(M.id)?re.delete(M.id):re.add(M.id),re}):(St(new Set([M.id])),pt(new Set),tt(new Set),le(new Set));return}a.shiftKey||(St(new Set),pt(new Set),tt(new Set),le(new Set)),Ao(!0),qs({x:X,y:L,shiftKey:a.shiftKey}),Qo({x:X,y:L,width:0,height:0});return}else if(B==="magnify"){const W=a.shiftKey?.5:2,G=Math.max(.25,Math.min(8,Ue*W)),ie=Y-G*X,se=oe-G*L;ti(G),Dn({x:ie,y:se});return}else if(B==="pan"){Vo.current={startCX:Y,startCY:oe,panX:mt.x,panY:mt.y},Os.current={startClientX:a.clientX,startClientY:a.clientY,panX:mt.x,panY:mt.y},fr(!0);return}else if(B==="draw"){const W=(se,be)=>{let ke=1/0,ve=null;const De=10/Ue,M=Ue>20?Math.max(De,1e-4):Ue>10?Math.max(De,.001):Math.max(De,.01);for(const ae of Ie)if(ae.type==="via"){const Ce=ae.points[0],_e=Math.hypot(Ce.x-se,Ce.y-be);_e<=M&&_e<ke&&(ke=_e,ve=Ce)}else if(ae.type==="pad"){const Ce=ae.points[0],_e=Math.hypot(Ce.x-se,Ce.y-be);_e<=M&&_e<ke&&(ke=_e,ve=Ce)}for(const ae of nt)if(ae.pointId!==void 0){const Ce=Math.hypot(ae.x-se,ae.y-be);Ce<=M&&Ce<ke&&(ke=Ce,ve={x:ae.x,y:ae.y,id:ae.pointId})}for(const ae of ht)if(ae.pointId!==void 0){const Ce=Math.hypot(ae.x-se,ae.y-be);Ce<=M&&Ce<ke&&(ke=Ce,ve={x:ae.x,y:ae.y,id:ae.pointId})}const re=Pt(ve??{x:se,y:be});return{x:re.x,y:re.y,nodeId:ve?.id}};if(Oe==="via"){const se=Fe.get("via"),be=I||se?.settings.color||Yc,ke=u||se?.settings.size||Bd.DEFAULT_SIZE,Ee=bi?{x:Pt({x:X,y:L}).x,y:Pt({x:X,y:L}).y}:((ae,Ce)=>{let _e=1/0,Ke=null;const at=10/Ue,Ze=Ue>10?Math.max(at,.001):Math.max(at,.01);for(const Me of Ie)if(Me.type==="via"||Me.type==="pad"){const et=Me.points[0],Et=Math.hypot(et.x-ae,et.y-Ce);Et<=Ze&&Et<_e&&(_e=Et,Ke=et)}for(const Me of nt)if(Me.pointId!==void 0){const et=Math.hypot(Me.x-ae,Me.y-Ce);et<=Ze&&et<_e&&(_e=et,Ke={x:Me.x,y:Me.y,id:Me.pointId})}for(const Me of ht)if(Me.pointId!==void 0){const et=Math.hypot(Me.x-ae,Me.y-Ce);et<=Ze&&et<_e&&(_e=et,Ke={x:Me.x,y:Me.y,id:Me.pointId})}const gt=Pt(Ke??{x:ae,y:Ce});return{x:gt.x,y:gt.y,nodeId:Ke?.id}})(X,L),De=Ee.nodeId??Kl(),M=Il(De,yt),D={id:De,x:Ee.x,y:Ee.y},re={id:`${Date.now()}-via`,points:[D],color:be,size:ke,layer:wt,type:"via",viaType:M};Bt(ae=>[...ae,re]),wt==="top"?ra(ae=>[...ae,re.id]):Ai(ae=>[...ae,re.id]);return}if(Oe==="pad"){if(!xn)return;const be=bi?{x:Pt({x:X,y:L}).x,y:Pt({x:X,y:L}).y}:((re,ae)=>{let Ce=1/0,_e=null;const Xe=10/Ue,at=Ue>10?Math.max(Xe,.001):Math.max(Xe,.01);for(const gt of Ie)if(gt.type==="via"||gt.type==="pad"){const Me=gt.points[0],et=Math.hypot(Me.x-re,Me.y-ae);et<=at&&et<Ce&&(Ce=et,_e=Me)}for(const gt of nt)if(gt.pointId!==void 0){const Me=Math.hypot(gt.x-re,gt.y-ae);Me<=at&&Me<Ce&&(Ce=Me,_e={x:gt.x,y:gt.y,id:gt.pointId})}for(const gt of ht)if(gt.pointId!==void 0){const Me=Math.hypot(gt.x-re,gt.y-ae);Me<=at&&Me<Ce&&(Ce=Me,_e={x:gt.x,y:gt.y,id:gt.pointId})}const un=Pt(_e??{x:re,y:ae});return{x:un.x,y:un.y,nodeId:_e?.id}})(X,L),ke=be.nodeId??Kl(),ve=sl(ke,yt),Ee=I||(xn==="top"?ne:J),De=u||(xn==="top"?R:pe),M={id:ke,x:be.x,y:be.y},D={id:`${Date.now()}-pad`,points:[M],color:Ee,size:De,layer:xn,type:"pad",padType:ve};Bt(re=>[...re,D]);return}if(Xn.current)return;const G=Oe==="trace"&&!bi?W(X,L):{x:Pt({x:X,y:L}).x,y:Pt({x:X,y:L}).y},ie=G.nodeId!==void 0?{id:G.nodeId,x:G.x,y:G.y}:{x:G.x,y:G.y};pl(se=>se.length===0?[ie]:[...se,ie]),Ua.current=Date.now(),ia(null),Co(!1),ys(!1)}else if(B==="erase"){if(Ie.some(G=>G.layer===wt&&(G.type==="via"&&Ln||G.type==="pad"&&qn||G.type==="trace"&&jn))){const G=[];Ln&&Ie.some(ie=>ie.layer===wt&&ie.type==="via")&&G.push("vias"),qn&&Ie.some(ie=>ie.layer===wt&&ie.type==="pad")&&G.push("pads"),jn&&Ie.some(ie=>ie.layer===wt&&ie.type==="trace")&&G.push("traces"),G.length>0&&alert(`Cannot erase: ${G.join(", ")} are locked on the ${wt} layer. Unlock them to erase.`)}Co(!0),pl([{id:Kl(),x:X,y:L}]),console.log("Starting erase at:",X,L,"selectedDrawingLayer:",wt,"total strokes:",Ie.length)}else if(B==="transform"&&ct){if(Fn){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}Ba(!0),Sl({x:X,y:L})}else if(B==="component"){if(!Wn)return;const W=Pt({x:X,y:L}),G=I||(Bn==="top"?$e:ft),ie=u||(Bn==="top"?Ut:fl),se=[...st,...rt];let be;ri?be=Pc():be={...ol.current};const ke=Kg(Wn,Bn,W.x,W.y,G,ie,se,be,Ka);if(ke.abbreviation=Ju(Wn),Ka&&ke.designator){const ve=ef(Wn),Ee=ke.designator.match(new RegExp(`^${ve.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(Ee){const De=parseInt(Ee[1],10);if(ri){const M=Pc(),D=ex(ve,De,M);Ku(D)}else ol.current[ve]=Math.max(ol.current[ve]||0,De)}}Bn==="top"?(Hi(!0),rn(ve=>[...ve,ke])):(qa(!0),qt(ve=>[...ve,ke]));return}else if(B==="power"){if(!Go)return;const G=bi?{x:Pt({x:X,y:L}).x,y:Pt({x:X,y:L}).y}:((se,be)=>{let ke=1/0,ve=null;const De=10/Ue,M=Ue>20?Math.max(De,1e-4):Ue>10?Math.max(De,.001):Math.max(De,.01);for(const ae of Ie)if(ae.type==="via"||ae.type==="pad"){const Ce=ae.points[0],_e=Math.hypot(Ce.x-se,Ce.y-be);_e<=M&&_e<ke&&(ke=_e,ve=Ce)}else if(ae.type==="trace")for(const Ce of ae.points){const _e=Math.hypot(Ce.x-se,Ce.y-be);_e<=M&&_e<ke&&(ke=_e,ve=Ce)}const re=Pt(ve??{x:se,y:be});return{x:re.x,y:re.y,nodeId:ve?.id}})(X,L),ie=yt.find(se=>se.id===Go);if(ie){const se=G.nodeId??Kl(),be=`${ie.voltage} Power Node`;if(ht.find(Ee=>Ee.pointId===se)){cr({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${se}). Power and ground nodes cannot share the same Node ID.`});return}const ve={id:`power-${Date.now()}-${Math.random()}`,x:G.x,y:G.y,color:"#ff0000",size:u,powerBusId:ie.id,layer:wt,type:be,pointId:se};if(jl(Ee=>[...Ee,ve]),G.nodeId!==void 0){const Ee=Il(G.nodeId,yt),De=sl(G.nodeId,yt);Bt(M=>M.map(D=>D.type==="via"&&D.points.length>0&&D.points[0].id===G.nodeId?{...D,viaType:Ee}:D.type==="pad"&&D.points.length>0&&D.points[0].id===G.nodeId?{...D,padType:De}:D))}}return}else if(B==="ground"){if(Qa===null){if($n.length===0){cr({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}ba(!0);return}const W=$n.find(G=>G.id===Qa);if(W){const ie=bi?{x:Pt({x:X,y:L}).x,y:Pt({x:X,y:L}).y}:((Ee,De)=>{let M=1/0,D=null;const ae=10/Ue,Ce=Ue>20?Math.max(ae,1e-4):Ue>10?Math.max(ae,.001):Math.max(ae,.01);for(const Xe of Ie)if(Xe.type==="via"||Xe.type==="pad"){const at=Xe.points[0],Ze=Math.hypot(at.x-Ee,at.y-De);Ze<=Ce&&Ze<M&&(M=Ze,D=at)}else if(Xe.type==="trace")for(const at of Xe.points){const Ze=Math.hypot(at.x-Ee,at.y-De);Ze<=Ce&&Ze<M&&(M=Ze,D=at)}const Ke=Pt(D??{x:Ee,y:De});return{x:Ke.x,y:Ke.y,nodeId:D?.id}})(X,L),se=ie.nodeId??Kl(),be=`${W.name} Ground Node`,ke=nt.find(Ee=>Ee.pointId===se);if(ke){cr({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${ke.type||"Power Node"}) already exists at this Node ID (${se}). Power and ground nodes cannot share the same Node ID.`});return}const ve={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:ie.x,y:ie.y,color:W.color,size:u||Fe.get("ground")?.settings.size||18,groundBusId:W.id,layer:wt,type:be,pointId:se};if(On(Ee=>[...Ee,ve]),ie.nodeId!==void 0){const Ee=Il(ie.nodeId,yt),De=sl(ie.nodeId,yt);Bt(M=>M.map(D=>D.type==="via"&&D.points.length>0&&D.points[0].id===ie.nodeId?{...D,viaType:Ee}:D.type==="pad"&&D.points.length>0&&D.points[0].id===ie.nodeId?{...D,padType:De}:D))}}return}},[B,ct,u,I,Oe,wt,Ie,Ue,mt.x,mt.y,bi,Go,Qa,yt,$n,Wn,Fe,xn,Ot,nt,ht,Il,sl,xl,oi,Tn]),Zc=T.useCallback(a=>{if(B!=="magnify")return;a.preventDefault();const r=bn.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,m=r.height/x.height,b=a.nativeEvent.offsetX,d=a.nativeEvent.offsetY,w=typeof b=="number"?b:a.clientX-x.left,C=typeof d=="number"?d:a.clientY-x.top,z=w*y,Z=C*m,Y=(z-40-mt.x)/Ue,oe=(Z-40-mt.y)/Ue,X=1.2,L=1/X,W=a.deltaY<0?X:L,G=Math.max(.25,Math.min(8,Ue*W)),ie=z-40-G*Y,se=Z-40-G*oe;ti(G),Dn({x:ie,y:se})},[B,Ue,mt.x,mt.y]),ja=T.useCallback(a=>{if(B==="draw"&&Oe==="trace"){Xn.current=!0;let r=vt;if(r.length>1){const x=[r[0]];for(let y=1;y<r.length;y++){const m=x[x.length-1],b=r[y];(Math.abs(m.x-b.x)>.001||Math.abs(m.y-b.y)>.001)&&x.push(b)}r=x}if(r.length>=1){const x=Ot||"top",y=x==="top"?H:ee,m=x==="top"?Se:Re,b={id:`${Date.now()}-trace`,points:r,color:y,size:m,layer:x,type:"trace"};Bt(d=>[...d,b]),x==="top"?en(d=>[...d,b.id]):Ni(d=>[...d,b.id]),pl([]),ia(null),setTimeout(()=>{Xn.current=!1},300);return}}if(B==="select"||B==="component"){const r=bn.current;if(!r)return;const x=r.getBoundingClientRect(),y=r.width/x.width,m=r.height/x.height,b=a.nativeEvent.offsetX,d=a.nativeEvent.offsetY,w=typeof b=="number"?b:a.clientX-x.left,C=typeof d=="number"?d:a.clientY-x.top,z=w*y,Z=C*m,Y=z-40,oe=Z-40,X=(Y-mt.x)/Ue,L=(oe-mt.y)/Ue,W=10,G=(()=>{for(const be of st)if(X>=be.x-W&&X<=be.x+W&&L>=be.y-W&&L<=be.y+W)return{layer:"top",comp:be};for(const be of rt)if(X>=be.x-W&&X<=be.x+W&&L>=be.y-W&&L<=be.y+W)return{layer:"bottom",comp:be};return null})(),ie=Math.max(6/Ue,4);let se=null;for(const be of nt){const ke=Math.max(6,be.size/2),ve=ke*.8,Ee=ke+ve,De=Math.hypot(be.x-X,be.y-L),M=Math.abs(X-be.x)<=ie&&Math.abs(L-be.y)<=Ee,D=Math.abs(L-be.y)<=ie&&Math.abs(X-be.x)<=Ee;if(De<=Math.max(ke,ie)||M||D){se=be;break}}if(se){tt(new Set([se.id])),ca({visible:!0,id:se.id,layer:se.layer,x:se.x,y:se.y,size:se.size,color:se.color,powerBusId:se.powerBusId});return}if(G){const{layer:be,comp:ke}=G;Uo(ke,be)}}},[B,Oe,I,u,wt,st,rt,nt,Ue,mt.x,mt.y,Wn,wr,bi,Ie,ct,ha,so,nn,Fe,vt,Ot,H,ee,Se,Re]),Ko=T.useCallback(()=>{const a=Ma.current;if(B==="draw"&&Oe==="trace"&&a.length>=2){let r=[a[0]];for(let d=1;d<a.length;d++){const w=r[r.length-1],C=a[d];(Math.abs(w.x-C.x)>.001||Math.abs(w.y-C.y)>.001)&&r.push(C)}const x=Ot||"top",y=x==="top"?H:ee,m=x==="top"?Se:Re,b={id:`${Date.now()}-trace`,points:r,color:y,size:m,layer:x,type:"trace"};Bt(d=>[...d,b]),x==="top"?en(d=>[...d,b.id]):Ni(d=>[...d,b.id]),pl([]),ia(null)}else if(B==="draw"&&Oe==="trace"&&a.length===1){const r=Ot||"top",x=r==="top"?H:ee,y=r==="top"?Se:Re,m={id:`${Date.now()}-trace-dot`,points:a,color:x,size:y,layer:r,type:"trace"};Bt(b=>[...b,m]),r==="top"?en(b=>[...b,m.id]):Ni(b=>[...b,m.id]),pl([])}},[B,Oe,Ot,H,ee,Se,Re,Bt]),zr=T.useCallback((a,r,x)=>{const y=r-a.x,m=x-a.y;if(y===0&&m===0)return{x:r,y:x};const d=(Math.atan2(m,y)*180/Math.PI%180+180)%180,w=[0,45,90];let C=0,z=1e9;for(const Z of w){const Y=Math.abs(d-Z);Y<z&&(z=Y,C=Z)}if(C===0)return{x:r,y:a.y};if(C===90)return{x:a.x,y:x};{const Z=Math.min(Math.abs(y),Math.abs(m)),Y=y>=0?1:-1,oe=m>=0?1:-1;return{x:a.x+Y*Z,y:a.y+oe*Z}}},[]),Ta=T.useCallback(a=>{const r=bn.current?.getBoundingClientRect();if(!r)return;const x=a.clientX-r.left,y=a.clientY-r.top,m=bn.current,b=m.width/r.width,d=m.height/r.height,w=x*b,C=y*d,z=w-40,Z=C-40,Y=(z-mt.x)/Ue,oe=(Z-mt.y)/Ue;if(B==="draw"&&Oe==="trace"&&vt.length>0){const L=bi?{x:Pt({x:Y,y:oe}).x,y:Pt({x:Y,y:oe}).y}:((W,G)=>{let ie=1/0,se=null;const ke=10/Ue,ve=Ue>20?Math.max(ke,1e-4):Ue>10?Math.max(ke,.001):Math.max(ke,.01);for(const M of Ie)if(M.type==="via"){const D=M.points[0],re=Math.hypot(D.x-W,D.y-G);re<=ve&&re<ie&&(ie=re,se=D)}else if(M.type==="pad"){const D=M.points[0],re=Math.hypot(D.x-W,D.y-G);re<=ve&&re<ie&&(ie=re,se=D)}for(const M of nt)if(M.pointId!==void 0){const D=Math.hypot(M.x-W,M.y-G);D<=ve&&D<ie&&(ie=D,se={x:M.x,y:M.y,id:M.pointId})}for(const M of ht)if(M.pointId!==void 0){const D=Math.hypot(M.x-W,M.y-G);D<=ve&&D<ie&&(ie=D,se={x:M.x,y:M.y,id:M.pointId})}const De=Pt(se??{x:W,y:G});return{x:De.x,y:De.y,nodeId:se?.id}})(Y,oe);ia({x:L.x,y:L.y})}else ia(null);if(Ga){const L=(()=>{for(const W of st)if(Y>=W.x-10&&Y<=W.x+10&&oe>=W.y-10&&oe<=W.y+10)return{layer:"top",comp:W};for(const W of rt)if(Y>=W.x-10&&Y<=W.x+10&&oe>=W.y-10&&oe<=W.y+10)return{layer:"bottom",comp:W};return null})();Wo(L?{component:L.comp,layer:L.layer,x:a.clientX,y:a.clientY}:null)}else Wo(null);if(B==="select"&&_a&&vi){const X=vi.x,L=vi.y;Qo({x:Math.min(X,Y),y:Math.min(L,oe),width:Math.abs(Y-X),height:Math.abs(oe-L)})}else if(B==="pan"&&ha&&Vo.current){const{startCX:X,startCY:L,panX:W,panY:G}=Vo.current,ie=z-X,se=Z-L;Dn({x:W+ie,y:G+se})}else if(la&&vt.length>0){if(B==="draw")if(ki){const X=vt[0],L=zr(X,Y,oe),W=Pt(L),G={id:Kl(),x:W.x,y:W.y};pl([X,G])}else{const X=Pt({x:Y,y:oe});pl(L=>[...L,{id:Kl(),x:X.x,y:X.y}])}else if(B==="erase"&&(pl(X=>[...X,{id:Kl(),x:Y,y:oe}]),Bt(X=>{const L=X.filter(G=>{if(G.type==="via"&&Ln||G.type==="pad"&&qn||G.type==="trace"&&jn||G.layer!==wt)return!0;const ie=u/2,se=Y-ie,be=Y+ie,ke=oe-ie,ve=oe+ie,Ee=(D,re)=>D>=se&&D<=be&&re>=ke&&re<=ve,De=(D,re,ae,Ce)=>{const un=(mn,hn)=>{let xt=0;return mn<se?xt|=1:mn>be&&(xt|=2),hn<ke?xt|=4:hn>ve&&(xt|=8),xt};let gt=D,Me=re,et=ae,Et=Ce,It=un(gt,Me),Gt=un(et,Et);for(;;){if((It|Gt)===0)return!0;if((It&Gt)!==0)return!1;const mn=It!==0?It:Gt;let hn=0,xt=0;mn&8?(hn=gt+(et-gt)*(ve-Me)/(Et-Me),xt=ve):mn&4?(hn=gt+(et-gt)*(ke-Me)/(Et-Me),xt=ke):mn&2?(xt=Me+(Et-Me)*(be-gt)/(et-gt),hn=be):(xt=Me+(Et-Me)*(se-gt)/(et-gt),hn=se),mn===It?(gt=hn,Me=xt,It=un(gt,Me)):(et=hn,Et=xt,Gt=un(et,Et))}};let M=!1;if(G.points.length===1){const D=G.points[0];M=Ee(D.x,D.y)}else for(let D=0;D<G.points.length-1;D++){const re=G.points[D],ae=G.points[D+1];if(De(re.x,re.y,ae.x,ae.y)){M=!0;break}}return M&&console.log("Erasing stroke at position:",Y,oe,"brushSize:",u,"selectedLayer:",wt),!M});console.log("Strokes before:",X.length,"after:",L.length);const W=new Set(L.map(G=>G.id));return ra(G=>G.filter(ie=>W.has(ie))),Ai(G=>G.filter(ie=>W.has(ie))),en(G=>G.filter(ie=>W.has(ie))),Ni(G=>G.filter(ie=>W.has(ie))),L}),cn||jl(X=>{const L=u/2,W=Y-L,G=Y+L,ie=oe-L,se=oe+L,be=ke=>{const ve=ke.size/2,Ee=ke.x-ve,De=ke.x+ve,M=ke.y-ve,D=ke.y+ve;return!(G<Ee||W>De||se<M||ie>D)};return X.filter(ke=>!be(ke))}),Hn||On(X=>{const L=u/2,W=Y-L,G=Y+L,ie=oe-L,se=oe+L,be=ve=>{const Ee=Math.max(6,(ve.size||18)/2),De=Ee*.8,M=Ee+De,D=ve.x-M,re=ve.x+M,ae=ve.y-M,Ce=ve.y+M;return!(G<D||W>re||se<ae||ie>Ce)};return X.filter(ve=>!be(ve))}),!ll)){const X=u/2,L=Y-X,W=Y+X,G=oe-X,ie=oe+X,se=be=>{const ve=(be.size||18)/2,Ee=be.x-ve,De=be.x+ve,M=be.y-ve,D=be.y+ve;return!(W<Ee||L>De||ie<M||G>D)};rn(be=>be.filter(ke=>!se(ke))),qt(be=>be.filter(ke=>!se(ke)))}}else if(Ro&&pi&&ct){if(Fn){Ba(!1),Sl(null);return}const X=Y-pi.x,L=oe-pi.y;if(ct==="top"){v&&f(W=>W?{...W,x:W.x+X,y:W.y+L}:null),Sl({x:Y,y:oe});return}if(ct==="bottom"){_&&Q(W=>W?{...W,x:W.x+X,y:W.y+L}:null),Sl({x:Y,y:oe});return}if(ct==="both"){v&&f(W=>W?{...W,x:W.x+X,y:W.y+L}:null),_&&Q(W=>W?{...W,x:W.x+X,y:W.y+L}:null),Sl({x:Y,y:oe});return}}},[la,vt,B,u,Ro,pi,ct,v,_,ki,zr,wt,Bt,Ue,mt.x,mt.y,_a,vi,Fn,Ln,qn,jn,cn,Hn,st,rt,rn,qt,Ga,Wo,bi,Ie,nt,ht,vt,Oe,ei,ia,ha,Vo,Dn,40,mt,Kl,Pt,al,V]),qi=T.useCallback(()=>{if(B==="select"&&_a){const a=Xl,r=vi;if(Ao(!1),qs(null),Qo(null),a&&r){const m=Math.max(3,5/Ue),b=a.width<m&&a.height<m,d=(M,D)=>{const re=a.x,ae=a.y,Ce=a.x+a.width,_e=a.y+a.height;return M>=re&&M<=Ce&&D>=ae&&D<=_e},w=(M,D,re,ae,Ce,_e,Ke,Xe)=>{const et=(Ki,ji)=>{let dl=0;return Ki<Ce?dl|=1:Ki>Ke&&(dl|=2),ji<_e?dl|=4:ji>Xe&&(dl|=8),dl};let Et=M,It=D,Gt=re,mn=ae,hn=et(Et,It),xt=et(Gt,mn);for(;;){if((hn|xt)===0)return!0;if((hn&xt)!==0)return!1;const Ki=hn!==0?hn:xt;let ji=0,dl=0;Ki&8?(ji=Et+(Gt-Et)*(Xe-It)/(mn-It),dl=Xe):Ki&4?(ji=Et+(Gt-Et)*(_e-It)/(mn-It),dl=_e):Ki&2?(dl=It+(mn-It)*(Ke-Et)/(Gt-Et),ji=Ke):(dl=It+(mn-It)*(Ce-Et)/(Gt-Et),ji=Ce),Ki===hn?(Et=ji,It=dl,hn=et(Et,It)):(Gt=ji,mn=dl,xt=et(Gt,mn))}},C=a.x,z=a.y,Z=a.x+a.width,Y=a.y+a.height,X=Math.max(6/Ue,4/Ue,.5),L=(M,D,re,ae,Ce,_e)=>{const Ke=Ce-re,Xe=_e-ae;if(Ke===0&&Xe===0)return Math.hypot(M-re,D-ae);const at=Math.max(0,Math.min(1,((M-re)*Ke+(D-ae)*Xe)/(Ke*Ke+Xe*Xe))),Ze=re+at*Ke,un=ae+at*Xe;return Math.hypot(M-Ze,D-un)},W=r?.shiftKey===!0,G=new Set(W?Array.from(Ve):[]),ie=new Set(W?Array.from(dt):[]),se=new Set(W?Array.from(zt):[]),be=new Set(W?Array.from(Tt):[]),ke=r?.hitStrokeId;if(ke){const M=Ie.find(D=>D.id===ke);if(M){let D=!1;if(M.type==="via"||M.type==="pad"?D=xl:D=M.layer==="top"?El:Vl,D){W?St(re=>{const ae=new Set(re);return ae.has(ke)?ae.delete(ke):ae.add(ke),ae}):(St(new Set([ke])),pt(new Set),tt(new Set),le(new Set));return}}}if(b){let M=null;for(const D of Ie){let re=!1;if(D.type==="via"||D.type==="pad"?re=xl:re=D.layer==="top"?El:Vl,!re)continue;let ae=1/0;if(D.type==="via"||D.type==="pad"){const Ce=D.points[0],_e=Math.max(1,D.size/2);ae=Math.hypot(Ce.x-r.x,Ce.y-r.y);const Xe=Math.max(6/Ue,4/Ue,.5);ae<=Math.max(_e,Xe)&&(!M||ae<M.dist)&&(M={id:D.id,dist:ae})}else for(let Ce=0;Ce<D.points.length-1;Ce++){const _e=D.points[Ce],Ke=D.points[Ce+1],Xe=L(r.x,r.y,_e.x,_e.y,Ke.x,Ke.y);if(Xe<=Math.max(X,D.size/2)){(!M||Xe<M.dist)&&(M={id:D.id,dist:Xe});break}}}M&&(W&&G.has(M.id)?G.delete(M.id):G.add(M.id))}else for(const M of Ie){let D=!1;if(M.type==="via"?D=xl:M.type==="pad"?D=(M.layer||"top")==="top"?oi:Tn:D=M.layer==="top"?El:Vl,!D)continue;let re=!1;if(M.type==="via"||M.type==="pad"){const ae=M.points[0];re=d(ae.x,ae.y)}else for(let ae=0;ae<M.points.length-1;ae++){const Ce=M.points[ae],_e=M.points[ae+1];if(w(Ce.x,Ce.y,_e.x,_e.y,C,z,Z,Y)||d(Ce.x,Ce.y)&&d(_e.x,_e.y)){re=!0;break}}re&&(W&&G.has(M.id)?G.delete(M.id):G.add(M.id))}const ve=M=>{const re=Math.max(10,M.size||18)/2;return M.x-re<=Z&&M.x+re>=C&&M.y-re<=Y&&M.y+re>=z};if(b){const M=D=>{const ae=Math.max(10,D.size||18)/2;return r.x>=D.x-ae&&r.x<=D.x+ae&&r.y>=D.y-ae&&r.y<=D.y+ae};wn&&st.forEach(D=>{M(D)&&(W&&ie.has(D.id)?ie.delete(D.id):ie.add(D.id))}),Wl&&rt.forEach(D=>{M(D)&&(W&&ie.has(D.id)?ie.delete(D.id):ie.add(D.id))})}else wn&&st.forEach(M=>{ve(M)&&(W&&ie.has(M.id)?ie.delete(M.id):ie.add(M.id))}),Wl&&rt.forEach(M=>{ve(M)&&(W&&ie.has(M.id)?ie.delete(M.id):ie.add(M.id))});const Ee=M=>{const D=Math.max(6,M.size/2),re=D*.8,ae=D+re;return M.x-ae<=Z&&M.x+ae>=C&&M.y-ae<=Y&&M.y+ae>=z};if(si)if(b){let M=null;for(const D of nt){const re=Math.max(6,D.size/2),ae=re*.8,Ce=re+ae,_e=Math.hypot(D.x-r.x,D.y-r.y),Ke=Math.abs(r.x-D.x)<=X&&Math.abs(r.y-D.y)<=Ce,Xe=Math.abs(r.y-D.y)<=X&&Math.abs(r.x-D.x)<=Ce;if(_e<=Math.max(re,X)||Ke||Xe){const Ze=Math.min(_e,Math.abs(r.x-D.x)+Math.abs(r.y-D.y));(!M||Ze<M.dist)&&(M={id:D.id,dist:Ze})}}M&&(W&&se.has(M.id)?se.delete(M.id):se.add(M.id))}else nt.forEach(M=>{Ee(M)&&(W&&se.has(M.id)?se.delete(M.id):se.add(M.id))});const De=M=>{const D=Math.max(6,(M.size||18)/2),re=D*.8,ae=D+re;return M.x-ae<=Z&&M.x+ae>=C&&M.y-ae<=Y&&M.y+ae>=z};if(Cn)if(b){let M=null;for(const D of ht){const re=Math.max(6,(D.size||18)/2),ae=re*.8,Ce=re+ae,_e=Math.hypot(D.x-r.x,D.y-r.y),Ke=Math.abs(r.x-D.x)<=X&&Math.abs(r.y-D.y)<=Ce,Xe=Math.abs(r.y-D.y)<=X&&Math.abs(r.x-D.x)<=Ce;if(_e<=Math.max(re,X)||Ke||Xe){const Ze=Math.min(_e,Math.abs(r.x-D.x)+Math.abs(r.y-D.y));(!M||Ze<M.dist)&&(M={id:D.id,dist:Ze})}}M&&(W&&be.has(M.id)?be.delete(M.id):be.add(M.id))}else ht.forEach(M=>{De(M)&&(W&&be.has(M.id)?be.delete(M.id):be.add(M.id))});St(G),pt(ie),tt(se),le(be)}}if(la&&vt.length>0){if(B==="draw"&&Oe!=="trace"){const a={id:Date.now().toString(),points:vt,color:I,size:u,layer:wt,type:"trace"};Bt(r=>[...r,a]),wt==="top"?en(r=>[...r,a.id]):Ni(r=>[...r,a.id])}pl([])}ha&&(fr(!1),Vo.current=null,Os.current=null),Co(!1),Ba(!1),Sl(null),ys(!1)},[la,vt,B,I,u,wt,Xl,vi,_a,Ie,Ue,Hs,Ve,nt,ht,st,rt,dt,zt,Tt,xl,El,Vl,wn,Wl,si,Cn]);We.useEffect(()=>{if(!(B==="pan"&&ha&&Os.current))return;const a=x=>{const y=bn.current;if(!y)return;const m=y.getBoundingClientRect(),b=y.width/m.width,d=y.height/m.height,{startClientX:w,startClientY:C,panX:z,panY:Z}=Os.current,Y=(x.clientX-w)*b,oe=(x.clientY-C)*d;Dn({x:z+Y,y:Z+oe})},r=()=>{fr(!1),Vo.current=null,Os.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",r,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)}},[B,ha]);const Zi=T.useCallback(()=>{const a=bn.current;if(!a)return;const r=a.getContext("2d");if(!r)return;r.clearRect(0,0,a.width,a.height),r.save(),r.beginPath(),r.rect(40,40,a.width-80,a.height-80),r.clip(),r.translate(40,40);const x=(b,d)=>{const w=b.width,C=b.height,z=document.createElement("canvas");z.width=w,z.height=C;const Z=z.getContext("2d");if(!Z)return z;Z.drawImage(b,0,0,w,C);const oe=Z.getImageData(0,0,w,C).data,X=new Uint8ClampedArray(w*C);for(let ve=0;ve<w*C;ve++){const Ee=oe[ve*4+0],De=oe[ve*4+1],M=oe[ve*4+2];X[ve]=Math.round(.299*Ee+.587*De+.114*M)}const L=[-1,0,1,-2,0,2,-1,0,1],W=[-1,-2,-1,0,0,0,1,2,1],G=new Float32Array(w*C);for(let ve=1;ve<C-1;ve++)for(let Ee=1;Ee<w-1;Ee++){let De=0,M=0,D=0;for(let ae=-1;ae<=1;ae++)for(let Ce=-1;Ce<=1;Ce++){const _e=Ee+Ce,Ke=ve+ae,Xe=X[Ke*w+_e];De+=Xe*L[D],M+=Xe*W[D],D++}const re=Math.sqrt(De*De+M*M);G[ve*w+Ee]=re}let ie=0;for(let ve=0;ve<G.length;ve++)G[ve]>ie&&(ie=G[ve]);const se=Z.createImageData(w,C),be=se.data,ke=.2;for(let ve=0;ve<w*C;ve++){const De=(ie>0?G[ve]/ie:0)>=ke?255:0,M=d?255-De:De;be[ve*4+0]=M,be[ve*4+1]=M,be[ve*4+2]=M,be[ve*4+3]=255}return Z.putImageData(se,0,0),z},y=(b,d,w,C,z,Z,Y,oe)=>{const X=document.createElement("canvas");X.width=w,X.height=C;const L=X.getContext("2d",{willReadFrequently:!0});L.clearRect(0,0,w,C),L.drawImage(d,0,0,w,C);let W=X;if(Math.abs(z)>1e-6){const G=Math.tan(z),ie=Math.max(.2,1-G),se=Math.max(.2,1+G),be=Math.max(ie,se),ke=Math.max(1,Math.ceil(w*be)),ve=document.createElement("canvas");ve.width=ke,ve.height=C;const Ee=ve.getContext("2d",{willReadFrequently:!0});Ee.clearRect(0,0,ke,C);for(let De=0;De<C;De++){const M=C<=1?0:De/(C-1),D=ie*(1-M)+se*M,re=Math.max(1,w*D),ae=(ke-re)/2;Ee.drawImage(W,0,De,w,1,ae,De,re,1)}W=ve}if(Math.abs(Z)>1e-6){const G=Math.tan(Z),ie=Math.max(.2,1-G),se=Math.max(.2,1+G),be=Math.max(ie,se),ke=Math.max(1,Math.ceil(C*be)),ve=document.createElement("canvas");ve.width=W.width,ve.height=ke;const Ee=ve.getContext("2d",{willReadFrequently:!0});Ee.clearRect(0,0,ve.width,ke);for(let De=0;De<W.width;De++){const M=W.width<=1?0:De/(W.width-1),D=ie*(1-M)+se*M,re=Math.max(1,C*D),ae=(ke-re)/2;Ee.drawImage(W,De,0,1,W.height,De,ae,1,re)}W=ve}b.drawImage(W,-Y/2,-oe/2,Y,oe)};r.translate(mt.x,mt.y),r.scale(Ue,Ue);{const b=Po&&xi;if(v&&v.bitmap&&Po){const d=v.bitmap;if(r.save(),r.globalAlpha=1,we&&!q?r.filter="grayscale(100%)":r.filter="none",r.translate(v.x,v.y),r.rotate(v.rotation*Math.PI/180),v.skewX||v.skewY){const Z=Math.tan(v.skewX||0),Y=Math.tan(v.skewY||0);r.transform(1,Y,Z,1,0,0)}r.scale(v.scale*(v.flipX?-1:1),v.scale*(v.flipY?-1:1));const w=d.width*1,C=d.height*1,z=q?x(d,Be):d;v.keystoneV&&Math.abs(v.keystoneV)>1e-6||v.keystoneH&&Math.abs(v.keystoneH)>1e-6?y(r,z,d.width,d.height,v.keystoneV||0,v.keystoneH||0,w,C):r.drawImage(z,-w/2,-C/2,w,C),r.restore()}if(_&&_.bitmap&&xi){const d=_.bitmap;if(r.save(),r.globalAlpha=b?g/100:1,we&&!q?r.filter="grayscale(100%)":r.filter="none",r.translate(_.x,_.y),r.rotate(_.rotation*Math.PI/180),_.skewX||_.skewY){const Z=Math.tan(_.skewX||0),Y=Math.tan(_.skewY||0);r.transform(1,Y,Z,1,0,0)}r.scale(_.scale*(_.flipX?-1:1),_.scale*(_.flipY?-1:1));const w=d.width*1,C=d.height*1,z=q?x(d,Be):d;_.keystoneV&&Math.abs(_.keystoneV)>1e-6||_.keystoneH&&Math.abs(_.keystoneH)>1e-6?y(r,z,d.width,d.height,_.keystoneV||0,_.keystoneH||0,w,C):r.drawImage(z,-w/2,-C/2,w,C),r.restore()}}if(cc(r),si&&nt.length>0){const b=d=>{r.save();const w=yt.find(oe=>oe.id===d.powerBusId),C=zt.has(d.id),z="#ff0000";r.strokeStyle=z,r.lineWidth=Math.max(1,(C?3:2)/Math.max(Ue,.001)),r.lineCap="round";const Z=Math.max(6,d.size/2),Y=Z*.8;C&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ue,.001)),r.beginPath(),r.arc(d.x,d.y,Z+Y+3,0,Math.PI*2),r.stroke()),r.strokeStyle=z,r.lineWidth=Math.max(1,(C?3:2)/Math.max(Ue,.001)),r.beginPath(),r.arc(d.x,d.y,Z,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(d.x,d.y-Z-Y),r.lineTo(d.x,d.y+Z+Y),r.stroke(),r.beginPath(),r.moveTo(d.x-Z-Y,d.y),r.lineTo(d.x+Z+Y,d.y),r.stroke(),w&&(r.fillStyle=z,r.font=`${Math.max(10,Z*.8)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(w.voltage,d.x,d.y+Z+Y+12)),r.restore()};nt.forEach(b)}if(Cn&&ht.length>0){const b=d=>{r.save();const w=Tt.has(d.id),C=d.color||"#000000";if(d.groundBusId==="groundbus-earth"){const Z=Math.max(6,d.size||18),Y=Z*.9,oe=Z*.24,X=Z*1.6;r.strokeStyle=C,r.lineWidth=Math.max(1,(w?3:2)/Math.max(Ue,.001)),r.lineCap="round",w&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ue,.001)),r.setLineDash([5,5]),r.strokeRect(d.x-X/2-3,d.y-3,X+6,Y+oe*2+6),r.setLineDash([])),r.strokeStyle=C,r.lineWidth=Math.max(1,(w?3:2)/Math.max(Ue,.001)),r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(d.x,d.y+Y),r.stroke();for(let L=0;L<3;L++){const W=d.y+Y+L*oe,G=X*(1-L*.25);r.beginPath(),r.moveTo(d.x-G/2,W),r.lineTo(d.x+G/2,W),r.stroke()}}else{const Z=Math.max(6,(d.size||18)/2),Y=Z*.8;w&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Ue,.001)),r.beginPath(),r.arc(d.x,d.y,Z+Y+3,0,Math.PI*2),r.stroke()),r.strokeStyle=C,r.lineWidth=Math.max(1,(w?3:2)/Math.max(Ue,.001)),r.beginPath(),r.arc(d.x,d.y,Z,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(d.x,d.y-Z-Y),r.lineTo(d.x,d.y+Z+Y),r.stroke(),r.beginPath(),r.moveTo(d.x-Z-Y,d.y),r.lineTo(d.x+Z+Y,d.y),r.stroke()}r.restore()};ht.forEach(b)}const m=b=>{const d=Math.max(10,b.size||18),w=d/2;r.save(),r.strokeStyle=b.color||"#111",r.lineWidth=Math.max(1,2/Math.max(Ue,.001));const C=b.pinConnections||[],z=C.length>0&&C.length===b.pinCount&&C.every(oe=>oe&&oe.trim()!=="");r.fillStyle=z?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",r.beginPath(),r.rect(b.x-w,b.y-w,d,d),r.fill(),r.stroke();const Z=b.designator?.trim()||"";if(Z){r.fillStyle=b.color||"#111";const oe=Math.max(6,d*.35),X=d*.9;let L=oe;r.font=`bold ${L}px sans-serif`;const W=r.measureText(Z);W.width>X&&(L=X/W.width*L,L=Math.max(6,L),r.font=`bold ${L}px sans-serif`),r.textAlign="center",r.textBaseline="middle",r.fillText(Z,b.x,b.y)}dt.has(b.id)&&(r.setLineDash([4,3]),r.strokeStyle="#00bfff",r.lineWidth=1.5,r.strokeRect(b.x-w-3,b.y-w-3,d+6,d+6),r.setLineDash([])),r.restore()};if(yl){const b=w=>{const C=parseInt(w,10);if(isNaN(C))return null;for(const z of Ie)if((z.type==="via"||z.type==="pad")&&z.points.length>0){const Z=z.points[0];if(Z.id===C)return{x:Z.x,y:Z.y}}for(const z of Ie)if(z.type==="trace"){for(const Z of z.points)if(Z.id===C)return{x:Z.x,y:Z.y}}for(const z of nt)if(z.pointId===C)return{x:z.x,y:z.y};for(const z of ht)if(z.pointId===C)return{x:z.x,y:z.y};return null},d=w=>{const C=w.pinConnections||[],z=w.componentType==="Electrolytic Capacitor"||w.componentType==="Diode"||w.componentType==="Battery"||w.componentType==="ZenerDiode",Z=w.componentType==="Capacitor"&&"dielectric"in w&&w.dielectric==="Tantalum",Y=(z||Z)&&w.pinPolarities,oe=new Map;for(let X=0;X<C.length;X++){const L=C[X];if(L&&L.trim()!==""){const W=L.trim(),G=!!(Y&&w.pinPolarities&&X<w.pinPolarities.length&&w.pinPolarities[X]==="-"),ie=oe.get(W);ie!==void 0?oe.set(W,ie||G):oe.set(W,G)}}for(const[X,L]of oe){const W=b(X);if(W){const G={x:w.x,y:w.y};r.save(),r.strokeStyle=L?"rgba(0, 0, 0, 0.8)":Na,r.lineWidth=Math.max(1,na/Math.max(Ue,.001)),r.beginPath(),r.moveTo(G.x,G.y),r.lineTo(W.x,W.y),r.stroke(),r.restore()}}};wn&&st.forEach(d),Wl&&rt.forEach(d)}if(wn&&st.forEach(m),Wl&&rt.forEach(m),B==="select"&&Xl){r.save();const b=Math.max(2,6/Math.max(1e-4,Ue));r.strokeStyle="#00bfff",r.fillStyle="rgba(0, 191, 255, 0.15)",r.lineWidth=Math.max(1,1.5/Math.max(1e-4,Ue)),r.setLineDash([b,b]),r.beginPath(),r.rect(Xl.x,Xl.y,Xl.width,Xl.height),r.fill(),r.stroke(),r.setLineDash([]),r.restore()}r.restore()},[v,_,g,Ie,vt,la,B,I,u,we,q,Be,ct,wt,Ue,mt.x,mt.y,Po,xi,xl,El,Vl,oi,Tn,wn,Wl,st,rt,si,nt,Cn,ht,yl,Xl,Ve,dt,zt,Tt,Ot,H,ee,Se,Re,Oe,ei,Fn,Na,na]);We.useEffect(()=>{const a=()=>{const r=Eo.current;if(!r)return;const x=1.6,y=244,m=12,b=12,d=r.clientWidth-y-m,w=r.clientHeight-b,C=Math.floor(w*x),z=Math.floor(d/x);let Z,Y;C<=d?(Z=C,Y=w):(Z=d,Y=z),Z=Math.max(600,Z),Y=Math.max(375,Y),Kr(oe=>{if(oe.width!==Z||oe.height!==Y){const X=oe.width-80,L=oe.height-80,W=Z-80,G=Y-80,ie=X>0?W/X:1,se=L>0?G/L:1;Dn(be=>({x:be.x*ie,y:be.y*se}))}return oe.width===Z&&oe.height===Y?oe:{width:Z,height:Y}})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[Dn]),We.useEffect(()=>{Fn&&(Ro&&(Ba(!1),Sl(null)),zo(null))},[Fn,Ro,Ba,Sl,zo]);const cc=T.useCallback(a=>{if(Ie.forEach(r=>{if(r.type==="via"||r.type==="pad")return;let x=!1;if(r.layer==="top"?x=El:r.layer==="bottom"&&(x=Vl),!!x)if(r.points.length===1){const y=r.points[0],m=Math.max(.5,r.size/2);Ve.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(y.x,y.y,m+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=r.color,a.beginPath(),a.arc(y.x,y.y,m,0,Math.PI*2),a.fill()}else{Ve.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=r.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),r.points.forEach((y,m)=>{m===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=r.color,a.lineWidth=r.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),r.points.forEach((y,m)=>{m===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke();for(const y of r.points)a.beginPath(),a.arc(y.x,y.y,r.size/2,0,Math.PI*2),a.fill()}}),Ie.forEach(r=>{if(r.type==="via"){if(!xl)return}else if(r.type==="pad"){if(r.layer==="top"&&!oi||r.layer==="bottom"&&!Tn)return}else return;const x=r.points[0];if(Ve.has(r.id)){if(r.type==="via"){const y=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(x.x,x.y,y,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(r.type==="pad"){const y=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(x.x-y,x.y-y,r.size+6,r.size+6),a.setLineDash([])}}if(r.type==="via"){const y=Math.max(.5,r.size/2),m=y*.5,b=y*.7;a.fillStyle=r.color,a.beginPath(),a.arc(x.x,x.y,y,0,Math.PI*2),a.arc(x.x,x.y,m,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-b,x.y),a.lineTo(x.x+b,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-b),a.lineTo(x.x,x.y+b),a.stroke()}else if(r.type==="pad"){const y=Math.max(.5,r.size/2),m=r.size,b=m*.5,d=y*.7;a.fillStyle=r.color,a.beginPath(),a.rect(x.x-y,x.y-y,m,m),a.rect(x.x-b/2,x.y-b/2,b,b),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-d,x.y),a.lineTo(x.x+d,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-d),a.lineTo(x.x,x.y+d),a.stroke()}}),vt.length>0){const r=wt;let x=!0;if(B==="draw"&&(Oe==="via"?x=xl:x=r==="top"?El:Vl),x)if(B==="draw")if(Oe==="via"){const y=vt[vt.length-1],m=Math.max(.5,u/2),b=m*.5,d=m*.7;a.fillStyle=I,a.beginPath(),a.arc(y.x,y.y,m,0,Math.PI*2),a.arc(y.x,y.y,b,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(y.x-d,y.y),a.lineTo(y.x+d,y.y),a.stroke(),a.beginPath(),a.moveTo(y.x,y.y-d),a.lineTo(y.x,y.y+d),a.stroke()}else if(Oe==="pad"){const y=vt[vt.length-1],m=Math.max(.5,u/2),b=u,d=b*.5,w=m*.7;a.fillStyle=I,a.beginPath(),a.rect(y.x-m,y.y-m,b,b),a.rect(y.x-d/2,y.y-d/2,d,d),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(y.x-w,y.y),a.lineTo(y.x+w,y.y),a.stroke(),a.beginPath(),a.moveTo(y.x,y.y-w),a.lineTo(y.x,y.y+w),a.stroke()}else{const y=Ot||"top",m=y==="top"?H:ee,b=y==="top"?Se:Re;if(vt.length===1){const d=vt[0],w=Math.max(.5,b/2);a.fillStyle=m,a.beginPath(),a.arc(d.x,d.y,w,0,Math.PI*2),a.fill(),ei&&(a.strokeStyle=m,a.lineWidth=b,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(d.x,d.y),a.lineTo(ei.x,ei.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=m,a.lineWidth=b,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),vt.forEach((d,w)=>{w===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke(),ei&&vt.length>0){const d=vt[vt.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(d.x,d.y),a.lineTo(ei.x,ei.y),a.stroke(),a.globalAlpha=1}}else B==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=u,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),vt.forEach((y,m)=>{m===0?a.moveTo(y.x,y.y):a.lineTo(y.x,y.y)}),a.stroke())}},[Ie,Ve,El,Vl,xl,oi,Tn,vt,B,Oe,I,u,wt,Ot,H,ee,Se,Re,ei]),Zs=T.useCallback((a,r)=>{if(Fn){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&v?f(x=>x?{...x,...r}:null):a==="bottom"&&_?Q(x=>x?{...x,...r}:null):a==="both"&&(v&&f(x=>x?{...x,...r}:null),_&&Q(x=>x?{...x,...r}:null))},[v,_,Fn]),Qs=T.useCallback(()=>{ct&&(Zs(ct,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),He(!1),Ae(!1),de(!1))},[Zs,ct]),uo=T.useCallback(()=>{if(Ve.size>0||dt.size>0||zt.size>0||Tt.size>0){if(Ve.size>0){const a=Ie.filter(m=>Ve.has(m.id)),r=Ln&&a.some(m=>m.type==="via"),x=jn&&a.some(m=>m.type==="trace"),y=qn&&a.some(m=>m.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(x){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(dt.size>0&&ll){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(zt.size>0&&cn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Tt.size>0&&Hn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Bt(a=>a.map(r=>{if(Ve.has(r.id)){const x=r.size+1;return r.type==="via"?Qe("via",x):r.type==="pad"?Qe("pad",x):r.type==="trace"&&Qe("trace",x,r.layer),{...r,size:x}}return r})),dt.size>0){const a=(dt.size>0&&st.find(r=>dt.has(r.id))?.size||18)+1;Qe("component",a),rn(r=>r.map(x=>dt.has(x.id)?{...x,size:(x.size||18)+1}:x)),qt(r=>r.map(x=>dt.has(x.id)?{...x,size:(x.size||18)+1}:x))}if(zt.size>0){const a=(nt.find(r=>zt.has(r.id))?.size||18)+1;Qe("power",a),jl(r=>r.map(x=>zt.has(x.id)?{...x,size:x.size+1}:x))}if(Tt.size>0){const a=(ht.find(r=>Tt.has(r.id))?.size||18)+1;Qe("ground",a),On(r=>r.map(x=>Tt.has(x.id)?{...x,size:(x.size||18)+1}:x))}}else k(a=>Math.min(40,a+1))},[Ve,dt,zt,Tt,Ie,Ln,jn,ll,cn,Hn,B,Oe,wt,Qe]),Rr=T.useCallback(()=>{if(Ve.size>0||dt.size>0||zt.size>0||Tt.size>0){if(Ve.size>0){const a=Ie.filter(m=>Ve.has(m.id)),r=Ln&&a.some(m=>m.type==="via"),x=jn&&a.some(m=>m.type==="trace"),y=qn&&a.some(m=>m.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(x){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(y){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(dt.size>0&&ll){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(zt.size>0&&cn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(Tt.size>0&&Hn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Bt(a=>a.map(r=>{if(Ve.has(r.id)){const x=Math.max(1,r.size-1);return r.type==="via"?Qe("via",x):r.type==="pad"?Qe("pad",x):r.type==="trace"&&Qe("trace",x,r.layer),{...r,size:x}}return r})),dt.size>0){const a=Math.max(1,(st.find(r=>dt.has(r.id))?.size||18)-1);Qe("component",a),rn(r=>r.map(x=>dt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x)),qt(r=>r.map(x=>dt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x))}if(zt.size>0){const a=Math.max(1,(nt.find(r=>zt.has(r.id))?.size||18)-1);Qe("power",a),jl(r=>r.map(x=>zt.has(x.id)?{...x,size:Math.max(1,x.size-1)}:x))}if(Tt.size>0){const a=Math.max(1,(ht.find(r=>Tt.has(r.id))?.size||18)-1);Qe("ground",a),On(r=>r.map(x=>Tt.has(x.id)?{...x,size:Math.max(1,(x.size||18)-1)}:x))}}else k(a=>Math.max(1,a-1))},[Ve,dt,zt,Tt,Ie,Ln,jn,ll,cn,Hn,B,Oe,wt,Qe]),dc=T.useCallback(()=>{const a=Wa.size;if(Ve.size>0||dt.size>0||zt.size>0||Tt.size>0){if(Ve.size>0){const r=Ie.filter(b=>Ve.has(b.id)),x=Ln&&r.some(b=>b.type==="via"),y=qn&&r.some(b=>b.type==="pad"),m=jn&&r.some(b=>b.type==="trace");if(x||y||m){alert("Cannot change size: selected items are locked.");return}}if(dt.size>0&&ll){alert("Cannot change size: selected components are locked.");return}if(zt.size>0&&cn){alert("Cannot change size: selected power nodes are locked.");return}if(Tt.size>0&&Hn){alert("Cannot change size: selected ground nodes are locked.");return}Bt(r=>r.map(x=>Ve.has(x.id)?(x.type==="via"?(Qe("via",a),yn(y=>{const m=new Map(y),b=m.get("via");return b&&m.set("via",{...b,settings:{...b.settings,size:a}}),m})):x.type==="pad"?(Qe("pad",a),yn(y=>{const m=new Map(y),b=m.get("pad");return b&&m.set("pad",{...b,settings:{...b.settings,size:a}}),m})):x.type==="trace"&&Qe("trace",a,x.layer),{...x,size:a}):x)),dt.size>0&&(Qe("component",a),rn(r=>r.map(x=>dt.has(x.id)?{...x,size:a}:x)),qt(r=>r.map(x=>dt.has(x.id)?{...x,size:a}:x))),zt.size>0&&(Qe("power",a),jl(r=>r.map(x=>zt.has(x.id)?{...x,size:a}:x))),Tt.size>0&&(Qe("ground",a),On(r=>r.map(x=>Tt.has(x.id)?{...x,size:a}:x)))}else k(a),B==="draw"&&Oe==="trace"?wt==="top"?(Pe(a),Qe("trace",a,"top")):(U(a),Qe("trace",a,"bottom")):Qe(B==="draw"&&Oe==="via"?"via":B==="draw"&&Oe==="pad"?"pad":B==="component"?"component":B==="power"?"power":B==="ground"?"ground":"brush",a);da({visible:!1,size:6})},[Wa.size,Ve,dt,zt,Tt,Ie,Ln,jn,ll,cn,Hn,B,Oe,wt,Qe,Fe,yn]),fo=T.useCallback(()=>{ii({visible:!1,source:null,interval:5})},[]),Ks=T.useCallback(async(a,r=!1)=>{if(a===null){gi(!1),fa(null),Zt.current&&(clearInterval(Zt.current),Zt.current=null),ua({visible:!1,interval:5}),r&&ii({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!Zn){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let x=ai;if(!x){const d=window;if(typeof d.showDirectoryPicker=="function")try{x=await d.showDirectoryPicker(),Oi(x)}catch(w){w?.name!=="AbortError"&&(console.error("Failed to get directory:",w),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}Ho(x);const y=Zn.replace(/\.json$/i,""),b=Vc(y).replace(/[^a-zA-Z0-9_-]/g,"_");Ya(b),on.current=x,Si.current=b,fa(a),gi(!0),Cl.current=!0,ua({visible:!1,interval:5}),r&&ii({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),ur.current&&ur.current()},200)},[Zn,ai,gi,fa,Ho,Ya,ua,ii,Oi]),Jo=T.useCallback(()=>{V("select"),St(new Set),pt(new Set),tt(new Set),le(new Set)},[St,pt,tt,le]),Js=T.useCallback(a=>{if(a.key==="Escape"){const y=document.activeElement;if(y&&(y.tagName==="INPUT"&&y.type==="checkbox"||y.tagName==="INPUT"&&y.type==="radio")){y.blur(),a.preventDefault(),a.stopPropagation();return}}const r=document.activeElement;if(!(r&&(r.tagName==="INPUT"&&r.type!=="checkbox"&&r.type!=="radio"||r.tagName==="TEXTAREA"||r.isContentEditable)||wi.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),uo();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),Rr();return}if((a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="ArrowLeft"||a.key==="ArrowRight")&&dt.size>0){a.preventDefault(),a.stopPropagation();const y=a.shiftKey?10:1;let m=0,b=0;a.key==="ArrowUp"?b=-y:a.key==="ArrowDown"?b=y:a.key==="ArrowLeft"?m=-y:a.key==="ArrowRight"&&(m=y);for(const d of dt){const w=st.find(C=>C.id===d);if(w){const C=w.x+m,z=w.y+b,Z=Pt({x:C,y:z});rn(Y=>Y.map(oe=>oe.id===d?{...oe,x:Z.x,y:Z.y}:oe))}else{const C=rt.find(z=>z.id===d);if(C){const z=C.x+m,Z=C.y+b,Y=Pt({x:z,y:Z});qt(oe=>oe.map(X=>X.id===d?{...X,x:Y.x,y:Y.y}:X))}}}return}if((a.key==="I"||a.key==="i")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation();const y=[];Ve.size>0,Ve.size===0&&dt.size===0&&zt.size===0&&Tt.size===0&&y.push(`
No objects selected.`);const m=y.join(`
`);console.log(m),Rs({visible:!0,text:m});return}if((a.key==="N"||a.key==="n")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation(),Rt(!0);return}if(a.key==="O"||a.key==="o"){const y=document.activeElement;if(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable))return;if(a.preventDefault(),a.stopPropagation(),ga){ti(ga.zoom);const b=bn.current;let d=0,w=0;if(b){const C=b.width-80,z=b.height-80,Z=C/2,Y=z/2,oe=ga.x,X=ga.y,L=ga.zoom;d=Z-oe*L,w=Y-X*L}Dn({x:d,y:w})}else{ti(1);const b=bn.current;let d=0,w=0;if(b){const C=b.width-80,z=b.height-80,Z=C/2,Y=z/2,oe=0,X=0;d=Z-oe*1,w=Y-X*1}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Dn({x:d,y:w})}Te("overlay"),St(new Set),pt(new Set),tt(new Set),le(new Set),V("select");return}if((a.key==="Alt"||a.altKey)&&(ro(!0),Qr(!0)),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),Jo(),an(!1),Ii(!1),lo(!1),$i(!1),En(!1),dr(!1),sc(null);return}if(a.key==="Enter"&&B==="draw"&&Oe==="trace"){Ko();return}if((a.key==="Delete"||a.key==="Backspace")&&(Ve.size>0||dt.size>0||zt.size>0||Tt.size>0)){if(a.preventDefault(),a.stopPropagation(),Ve.size>0){const y=Ie.filter(w=>Ve.has(w.id)),m=Ln&&y.some(w=>w.type==="via"),b=jn&&y.some(w=>w.type==="trace"),d=qn&&y.some(w=>w.type==="pad");m?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):b?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):d?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):(Bt(w=>w.filter(C=>!Ve.has(C.id))),St(new Set))}dt.size>0&&(ll?alert("Cannot delete: Components are locked. Unlock components to delete them."):(rn(y=>y.filter(m=>!dt.has(m.id))),qt(y=>y.filter(m=>!dt.has(m.id))),pt(new Set))),zt.size>0&&(cn?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(jl(y=>y.filter(m=>!zt.has(m.id))),tt(new Set))),Tt.size>0&&(Hn?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(On(y=>y.filter(m=>!Tt.has(m.id))),le(new Set)));return}if((B==="draw"||B==="erase"||B==="power"||B==="ground")&&(a.key==="z"||a.key==="Z")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),B==="power"){jl(y=>y.length===0?y:y.slice(0,-1));return}if(B==="ground"){On(y=>y.length===0?y:y.slice(0,-1));return}if(B==="draw"&&Oe==="trace"){const y=vt,m=Ma.current,b=y.length>0?y:m;if(b.length>0){b.length>1?pl(d=>d.slice(0,-1)):pl([]);return}Bt(d=>{for(let w=d.length-1;w>=0;w--){const C=d[w];if(C.type==="trace"&&C.layer===wt&&C.points.length>=2)if(C.points.length>2){const z=C.points.slice(0,-1);return pl(z),[...d.slice(0,w),...d.slice(w+1)]}else return[...d.slice(0,w),...d.slice(w+1)]}return d});return}if(la&&vt.length>0){pl([]);return}B==="draw"&&(Oe==="via"||Oe==="pad")&&Bt(y=>{for(let m=y.length-1;m>=0;m--){const b=y[m];if(b.layer===wt&&b.type===Oe)return[...y.slice(0,m),...y.slice(m+1)]}return y});return}if(!a.ctrlKey&&!a.altKey){const y=document.activeElement;if(!(!!y&&(y.tagName==="INPUT"&&y.type!=="range"&&y.type!=="checkbox"&&y.type!=="radio"||y.tagName==="TEXTAREA"||y.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),Jo();return;case"b":case"B":a.preventDefault(),V("power");return;case"g":case"G":a.preventDefault(),V("ground");return;case"v":case"V":a.preventDefault(),aa("via"),V("draw");return;case"p":case"P":a.preventDefault(),aa("pad"),V("draw"),tl(xn||"top");return;case"t":case"T":a.preventDefault(),aa("trace"),V("draw"),tl(Ot||"top");return;case"c":case"C":a.preventDefault(),V("component"),lo(!0),$i(!1),Ls(null);return;case"e":case"E":a.preventDefault(),V("erase");return;case"h":case"H":a.preventDefault(),V("pan");return;case"x":case"X":a.preventDefault(),V("center");return;case"z":case"Z":if(!a.ctrlKey){a.preventDefault(),pr(!1),V("magnify");return}break}}if(B==="transform"&&ct){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const m=document.activeElement;if(m&&m.tagName==="INPUT"){const b=m;b.type==="radio"&&b.blur()}if(Fn)return;if(kl==="nudge"){let b=0,d=0;switch(a.key){case"ArrowLeft":b=-1;break;case"ArrowRight":b=1;break;case"ArrowUp":d=-1;break;case"ArrowDown":d=1;break;default:return}ct==="top"&&v?f(w=>w?{...w,x:w.x+b,y:w.y+d}:null):ct==="bottom"&&_?Q(w=>w?{...w,x:w.x+b,y:w.y+d}:null):ct==="both"&&(v&&f(w=>w?{...w,x:w.x+b,y:w.y+d}:null),_&&Q(w=>w?{...w,x:w.x+b,y:w.y+d}:null))}else if(kl==="scale"){let b=0;switch(a.key){case"ArrowUp":b=.01;break;case"ArrowDown":b=-.01;break;case"ArrowRight":b=.001;break;case"ArrowLeft":b=-.001;break;default:return}if(ct==="top"){v&&f(d=>d?{...d,scale:Math.max(.1,Math.min(3,d.scale+b))}:null);return}if(ct==="bottom"){_&&Q(d=>d?{...d,scale:Math.max(.1,Math.min(3,d.scale+b))}:null);return}if(ct==="both"){v&&f(d=>d?{...d,scale:Math.max(.1,Math.min(3,d.scale+b))}:null),_&&Q(d=>d?{...d,scale:Math.max(.1,Math.min(3,d.scale+b))}:null);return}}else if(kl==="rotate"){let b=0;switch(a.key){case"ArrowUp":b=1;break;case"ArrowDown":b=-1;break;case"ArrowRight":b=.1;break;case"ArrowLeft":b=-.1;break;default:return}if(ct==="top"){v&&f(d=>d?{...d,rotation:d.rotation+b}:null);return}if(ct==="bottom"){_&&Q(d=>d?{...d,rotation:d.rotation+b}:null);return}if(ct==="both"){v&&f(d=>d?{...d,rotation:d.rotation+b}:null),_&&Q(d=>d?{...d,rotation:d.rotation+b}:null);return}}else if(kl==="slant"){let b=0,d=0;switch(a.key){case"ArrowUp":d=-.5;break;case"ArrowDown":d=.5;break;case"ArrowLeft":b=-.5;break;case"ArrowRight":b=.5;break}if(b!==0||d!==0){const w=z=>z*Math.PI/180,C=z=>Math.max(-.7,Math.min(.7,z));if(ct==="top"){v&&f(z=>z?{...z,skewX:C((z.skewX||0)+w(b)),skewY:C((z.skewY||0)+w(d))}:null);return}if(ct==="bottom"){_&&Q(z=>z?{...z,skewX:C((z.skewX||0)+w(b)),skewY:C((z.skewY||0)+w(d))}:null);return}if(ct==="both"){v&&f(z=>z?{...z,skewX:C((z.skewX||0)+w(b)),skewY:C((z.skewY||0)+w(d))}:null),_&&Q(z=>z?{...z,skewX:C((z.skewX||0)+w(b)),skewY:C((z.skewY||0)+w(d))}:null);return}}}else if(kl==="keystone"){let b=0,d=0;switch(a.key){case"ArrowUp":d=-.5;break;case"ArrowDown":d=.5;break;case"ArrowLeft":b=-.5;break;case"ArrowRight":b=.5;break}if(b!==0||d!==0){const w=z=>z*Math.PI/180,C=z=>Math.max(-.35,Math.min(.35,z));if(ct==="top"){v&&f(z=>z?{...z,keystoneH:C((z.keystoneH||0)+w(b)),keystoneV:C((z.keystoneV||0)+w(d))}:null);return}if(ct==="bottom"){_&&Q(z=>z?{...z,keystoneH:C((z.keystoneH||0)+w(b)),keystoneV:C((z.keystoneV||0)+w(d))}:null);return}if(ct==="both"){v&&f(z=>z?{...z,keystoneH:C((z.keystoneH||0)+w(b)),keystoneV:C((z.keystoneV||0)+w(d))}:null),_&&Q(z=>z?{...z,keystoneH:C((z.keystoneH||0)+w(b)),keystoneV:C((z.keystoneV||0)+w(d))}:null);return}}}}else{const y=a.target;if(y.tagName==="INPUT"&&y.type==="range"){const m=y,b=Number(m.value),d=Number(m.min),w=Number(m.max),C=Number(m.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const z=Math.max(d,b-C);m.value=z.toString(),m.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const Z=Math.min(w,b+C);m.value=Z.toString(),m.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[B,ct,kl,v,_,Ve,dt,zt,Tt,Ie,st,rt,nt,ht,yt,Oe,Ko,Ot,H,ee,Se,Re,Jo,rn,qt]);We.useEffect(()=>{B!=="transform"&&zo(null)},[B]),We.useEffect(()=>{window.addEventListener("keydown",Js,!0);const a=r=>{r.key==="Alt"&&(ro(!1),Qr(!1),Wo(null))};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",Js,!0),window.removeEventListener("keyup",a,!0)}},[Js,zt,Tt,cn,cn,nt,ht,uo,Rr,Jo,dt,st,rt,rn,qt,ga]);const po=T.useCallback(()=>{ol.current={},fe("#AA4499"),ce("#F781BF"),Pe(6),U(6),kt("trace","#AA4499","top"),kt("trace","#F781BF","bottom"),Qe("trace",6,"top"),Qe("trace",6,"bottom"),ze("#0072B2"),he("#56B4E9"),O(18),Ne(18),kt("pad","#0072B2","top"),kt("pad","#56B4E9","bottom"),Qe("pad",18,"top"),Qe("pad",18,"bottom"),ut("#6A3D9A"),fn("#9467BD"),Rl(18),Jl(18),kt("component","#6A3D9A","top"),kt("component","#9467BD","bottom"),Qe("component",18,"top"),Qe("component",18,"bottom"),oa("top"),j("#AA4499"),k(6),Nl([{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}]),li([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),Qe("power",18),Qe("ground",18),Ea(!1),nl(!1),Gr(!1),Cs(!1),Va(!1),$r(!1),tl("top"),V("select"),P(50),me(!1),Te("overlay"),Qu(1)},[kt,Qe]),Un=T.useCallback(()=>{po(),setTimeout(()=>{ti(1);const a=bn.current,r=Eo.current;let x=0,y=0;if(a&&r){const m=a.getBoundingClientRect(),b=r.getBoundingClientRect(),d=a.width-80,w=a.height-80,Z=60+168+6,Y=m.left-b.left,oe=Z-Y,X=m.width-Math.max(0,oe),L=oe+X/2,W=m.height/2,G=d/2,ie=w/2,se=m.width/a.width,be=m.height/a.height,ke=L/se,ve=W/be,Ee=ke-40,De=ve-40;x=Ee-G,y=De-ie}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Dn({x,y}),St(new Set),pt(new Set),tt(new Set),le(new Set)},100)},[po]);We.useEffect(()=>{Un()},[]),We.useEffect(()=>{if(!Oo.visible)return;const a=[];Ve.size>0,Ve.size===0&&dt.size===0&&zt.size===0&&Tt.size===0&&a.push(`
No objects selected.`);const r=a.join(`
`);Rs(x=>({...x,text:r}))},[Oo.visible,Ve,dt,zt,Tt,Ie,st,rt,nt,ht,yt]),We.useEffect(()=>{const a=r=>{const x=bn.current;if(x&&!(Fi.current&&Fi.current.contains(r.target))&&!(r.target instanceof Node&&x.contains(r.target))){if(Ko(),$s){const y=Sa.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&an(!1)}if(Fs){const y=Fi.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&(lo(!1),V("select"))}if(wr){const y=io.current;(!y||!(r.target instanceof Node)||!y.contains(r.target))&&($i(!1),sc(null))}if(Lr){const y=La.current;!r.target?.closest('button[title="Color Picker"]')&&(!y||!(r.target instanceof Node)||!y.contains(r.target))&&dr(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[Ko,$s,wa,Fs,wr,Lr]);const rl=a=>{if(!a.current)return{top:0,left:0};const r=a.current.getBoundingClientRect(),x=Eo.current?.getBoundingClientRect();return x?{top:r.top-x.top,left:r.left-x.left+r.width+4}:{top:0,left:0}},mi=T.useCallback(()=>{Sa.current&&ao.current&&requestAnimationFrame(()=>{if(Sa.current&&ao.current){const a=rl(ao);Sa.current.style.top=`${a.top}px`,Sa.current.style.left=`${a.left}px`}})},[]),er=T.useCallback(()=>{no.current&&oo.current&&requestAnimationFrame(()=>{if(no.current&&oo.current){const a=rl(oo);no.current.style.top=`${a.top}px`,no.current.style.left=`${a.left}px`}})},[]);We.useEffect(()=>{$s&&mi()},[$s,mi]),We.useEffect(()=>{wa&&er()},[wa,er]),We.useEffect(()=>{if(Fs&&Fi.current&&Tr.current){const a=rl(Tr);Fi.current.style.top=`${a.top}px`,Fi.current.style.left=`${a.left}px`}},[Fs]),We.useEffect(()=>{if(nc&&Xi.current&&Cr.current){const a=rl(Cr);Xi.current.style.top=`${a.top}px`,Xi.current.style.left=`${a.left}px`}},[nc]),We.useEffect(()=>{if(Vi&&Gi.current&&Li.current){const a=rl(Li);Gi.current.style.top=`${a.top}px`,Gi.current.style.left=`${a.left}px`}},[Vi]),We.useEffect(()=>{const a=r=>{if(!nn)return;const x=document.querySelector("[data-component-editor-dialog]");if(x&&r.target instanceof Node&&x.contains(r.target)){const De=r.target;if(De.tagName==="BUTTON"||De.tagName==="INPUT"||De.closest("button")||De.closest("input"))return}const y=bn.current;if(!y)return;const m=y.getBoundingClientRect(),b=r.clientX,d=r.clientY;if(b<m.left||b>m.right||d<m.top||d>m.bottom)return;const w=y.width/m.width,C=y.height/m.height,z=b-m.left,Z=d-m.top,Y=z*w,oe=Z*C,X=Y-40,L=oe-40,W=(X-mt.x)/Ue,G=(L-mt.y)/Ue;let ie=1/0,se=null,be=null;const ke=Math.max(6/Ue,4),Ee=[...st,...rt].find(De=>De.id===nn.componentId)?.layer||"top";for(const De of Ie)if((De.type==="via"||De.type==="pad")&&De.points.length>0){if(De.type==="pad"&&(De.layer||"top")!==Ee)continue;const M=De.points[0],D=Math.max(1,De.size/2),re=Math.hypot(M.x-W,M.y-G),ae=Math.max(D,ke);re<=ae&&re<ie&&(ie=re,se=M.id??null,be=De)}if(se!=null&&be){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${se}`),console.log(`  Connecting pin ${nn.pinIndex+1} of component ${nn.componentId}`);const De=String(se),M=nn.pinIndex,D=nn.componentId,re=st.find(Ce=>Ce.id===D),ae=rt.find(Ce=>Ce.id===D);if(re){const Ce=Ie;rn(_e=>{const Ke=_e.find(Me=>Me.id===D);if(!Ke)return _e;const Xe=Ke.pinConnections||[],at=Xe.length>0?[...Xe]:new Array(Ke.pinCount).fill("");let Ze;if(at.length!==Ke.pinCount){Ze=new Array(Ke.pinCount).fill("");for(let Me=0;Me<Math.min(at.length,Ke.pinCount);Me++)Ze[Me]=at[Me]||""}else Ze=[...at];Ze[M]=De,console.log(`Updated pin ${M} with value: ${De}`),console.log("New pinConnections:",Ze);const un=_e.find(Me=>Me.id===D),gt=un?tf(un,Ze,Ce):null;return _e.map(Me=>{if(Me.id===D){const et={...Me,pinConnections:Ze};return gt&&(et.pinPolarities=gt),et}return Me})})}else if(ae){const Ce=Ie;qt(_e=>{const Ke=_e.find(Me=>Me.id===D);if(!Ke)return _e;const Xe=Ke.pinConnections||[],at=Xe.length>0?[...Xe]:new Array(Ke.pinCount).fill("");let Ze;if(at.length!==Ke.pinCount){Ze=new Array(Ke.pinCount).fill("");for(let Me=0;Me<Math.min(at.length,Ke.pinCount);Me++)Ze[Me]=at[Me]||""}else Ze=[...at];Ze[M]=De,console.log(`Updated pin ${M} with value: ${De}`),console.log("New pinConnections:",Ze);const un=_e.find(Me=>Me.id===D),gt=un?tf(un,Ze,Ce):null;return _e.map(Me=>{if(Me.id===D){const et={...Me,pinConnections:Ze};return gt&&(et.pinPolarities=gt),et}return Me})})}setTimeout(()=>{wl(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(nn)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[nn,st,rt,Ie,Ue,mt.x,mt.y]);const cl=T.useCallback((a,r,x,y)=>{const m=window.innerWidth,b=window.innerHeight,d=10;let w=Math.max(d,Math.min(a,m-x-d)),C=Math.max(d,Math.min(r,b-y-d));return{x:w,y:C}},[]);We.useEffect(()=>{if(!Mo)return;const a=x=>{if(!Ha)return;const y={x:x.clientX-Ha.x,y:x.clientY-Ha.y},m=cl(y.x,y.y,250,window.innerHeight*.4);No(m),localStorage.setItem("componentDialogPosition",JSON.stringify(m))},r=()=>{hi(!1),sr(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Mo,Ha,cl]),We.useEffect(()=>{if(!Ys)return;const a=x=>{if(!Is)return;const y={x:x.clientX-Is.x,y:x.clientY-Is.y},m=cl(y.x,y.y,400,window.innerHeight*.8);Fo(m),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(m))},r=()=>{vr(!1),Vn(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Ys,Is,cl]),We.useEffect(()=>{if(!Xs)return;const a=x=>{if(!Gs)return;const y={x:x.clientX-Gs.x,y:x.clientY-Gs.y};bl(y),localStorage.setItem("notesDialogPosition",JSON.stringify(y))},r=()=>{Wi(!1),lc(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Xs,Gs]),We.useEffect(()=>{if($t&&Ul===null){const a=localStorage.getItem("notesDialogPosition");if(a)try{const r=JSON.parse(a);bl(r)}catch{bl({x:window.innerWidth-550,y:100})}else bl({x:window.innerWidth-550,y:100})}},[$t,Ul]),We.useEffect(()=>{if(Oa&&Oa.visible&&Bi===null){const a=localStorage.getItem("componentDialogPosition");let r;if(a)try{const x=JSON.parse(a);r=cl(x.x,x.y,250,window.innerHeight*.4),No(r)}catch{r=cl(window.innerWidth-280,90,250,window.innerHeight*.4),No(r)}else r=cl(window.innerWidth-280,90,250,window.innerHeight*.4),No(r)}else!Oa||Oa.visible},[Oa,Bi,cl]),We.useEffect(()=>{if(Oo.visible&&zn===null){const a=localStorage.getItem("detailedInfoDialogPosition");let r;if(a)try{const x=JSON.parse(a);r=cl(x.x,x.y,400,window.innerHeight*.8),Fo(r)}catch{r=cl(window.innerWidth-450,90,400,window.innerHeight*.8),Fo(r)}else r=cl(window.innerWidth-450,90,400,window.innerHeight*.8),Fo(r)}else Oo.visible},[Oo.visible,zn,cl]),We.useEffect(()=>{const a=()=>{if(Bi){const r=cl(Bi.x,Bi.y,250,window.innerHeight*.4);(r.x!==Bi.x||r.y!==Bi.y)&&(No(r),localStorage.setItem("componentDialogPosition",JSON.stringify(r)))}if(zn){const r=cl(zn.x,zn.y,400,window.innerHeight*.8);(r.x!==zn.x||r.y!==zn.y)&&(Fo(r),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(r)))}};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[Bi,zn,cl]);const Ca=T.useCallback(a=>{switch(a){case"transparency":P(50);break;case"brushSize":k(3);break}},[]);We.useEffect(()=>{if(ye){Zr.current=performance.now(),P(0);const a=r=>{const x=Zr.current||r,y=2e3,m=(r-x)%y/y,b=1-Math.abs(1-2*m);P(Math.round(b*100)),Xa.current=requestAnimationFrame(a)};Xa.current=requestAnimationFrame(a)}return()=>{Xa.current&&(cancelAnimationFrame(Xa.current),Xa.current=null)}},[ye]),We.useEffect(()=>{if(B==="center"){_l(tx());return}const a=B==="erase"?"erase":B==="magnify"?"magnify":B==="ground"?"ground":B==="power"?"power":B==="component"?"component":B==="draw"?Oe==="via"?"via":Oe==="pad"?"pad":"trace":"default";if(a==="default"){_l(void 0);return}const r=Math.max(1,Ue),x=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(u*r)),m=x+4*2+(a==="magnify"?8:0),b=document.createElement("canvas");b.width=m,b.height=m;const d=b.getContext("2d");if(!d){_l(void 0);return}const w=m/2,C=m/2,z=x/2;if(d.clearRect(0,0,m,m),a==="via"){const Y=z,oe=z*.5,X=z*.7,W=Fe.get("via")?.settings.color||localStorage.getItem("defaultViaColor")||"#ff0000";d.fillStyle=W,d.beginPath(),d.arc(w,C,Y,0,Math.PI*2),d.arc(w,C,oe,0,Math.PI*2),d.fill("evenodd"),d.strokeStyle="#808080",d.lineWidth=1,d.beginPath(),d.moveTo(w-X,C),d.lineTo(w+X,C),d.stroke(),d.beginPath(),d.moveTo(w,C-X),d.lineTo(w,C+X),d.stroke()}else if(a==="pad"){const oe=Fe.get("pad")?.settings.color||ne||I,X=z*2,L=X*.5,W=z*.7;d.fillStyle=oe,d.beginPath(),d.rect(w-z,C-z,X,X),d.rect(w-L/2,C-L/2,L,L),d.fill("evenodd"),d.strokeStyle="#808080",d.lineWidth=1,d.beginPath(),d.moveTo(w-W,C),d.lineTo(w+W,C),d.stroke(),d.beginPath(),d.moveTo(w,C-W),d.lineTo(w,C+W),d.stroke()}else if(a==="trace"){const oe=Fe.get("trace")?.settings.color||(Ot==="top"?H:ee)||I;d.fillStyle=oe,d.beginPath(),d.arc(w,C,z,0,Math.PI*2),d.fill()}else if(a==="erase"){const Y=Math.max(u*.75,8),oe=Math.max(u*.5,6),X=Math.max(u*.2,2);d.save(),d.translate(w,C),d.rotate(-35*Math.PI/180),d.fillStyle="#f5a3b3",d.strokeStyle="#111",d.lineWidth=1.5;const L=1.5,W=-Y/2,G=-oe/2;d.beginPath(),d.moveTo(W+L,G),d.lineTo(W+Y-L,G),d.quadraticCurveTo(W+Y,G,W+Y,G+L),d.lineTo(W+Y,G+oe-L),d.quadraticCurveTo(W+Y,G+oe,W+Y-L,G+oe),d.lineTo(W+L,G+oe),d.quadraticCurveTo(W,G+oe,W,G+oe-L),d.lineTo(W,G+L),d.quadraticCurveTo(W,G,W+L,G),d.closePath(),d.fill(),d.stroke(),d.fillStyle="#f18ea4",d.beginPath(),d.rect(-Y/2,oe/2-X,Y,X),d.fill(),d.restore()}else if(a==="magnify"){const Y=z;d.strokeStyle="#111",d.lineWidth=2,d.beginPath(),d.arc(w-2,C-2,Y,0,Math.PI*2),d.stroke();const oe=w+Y*.6,X=C+Y*.6,L=oe+6,W=X+6;d.beginPath(),d.moveTo(oe,X),d.lineTo(L,W),d.stroke(),d.beginPath(),d.moveTo(w-6,C-2),d.lineTo(w+2,C-2),d.stroke(),Hs||(d.beginPath(),d.moveTo(w-2,C-6),d.lineTo(w-2,C+2),d.stroke())}else if(a==="ground")if(d.strokeStyle="#000000",d.lineWidth=2,d.lineCap="round",Qa==="groundbus-earth"){const oe=z*1.5,X=oe*.9,L=oe*.24,W=oe*1.6;d.beginPath(),d.moveTo(w,C-X/2),d.lineTo(w,C+X/2),d.stroke();for(let G=0;G<3;G++){const ie=C+X/2+G*L,se=W*(1-G*.25);d.beginPath(),d.moveTo(w-se/2,ie),d.lineTo(w+se/2,ie),d.stroke()}}else{const oe=z*.8;d.beginPath(),d.arc(w,C,z,0,Math.PI*2),d.stroke(),d.beginPath(),d.moveTo(w,C-z-oe),d.lineTo(w,C+z+oe),d.stroke(),d.beginPath(),d.moveTo(w-z-oe,C),d.lineTo(w+z+oe,C),d.stroke()}else if(a==="power"){d.strokeStyle="#ff0000",d.lineWidth=2,d.lineCap="round";const Y=z*.8;d.beginPath(),d.arc(w,C,z,0,Math.PI*2),d.stroke(),d.beginPath(),d.moveTo(w,C-z-Y),d.lineTo(w,C+z+Y),d.stroke(),d.beginPath(),d.moveTo(w-z-Y,C),d.lineTo(w+z+Y,C),d.stroke()}else if(a==="component"){const Y=Bn||"top",oe=Fe.get("component"),X=(Y==="top"?$e:ft)||oe?.settings.color||I,L=x,W=L/2;d.strokeStyle=X,d.lineWidth=2,d.fillStyle="rgba(255,255,255,0.9)",d.beginPath(),d.rect(w-W,C-W,L,L),d.fill(),d.stroke();const G=Wn?Ju(Wn):"?";d.fillStyle=X,d.font=`bold ${Math.max(8,L*.35)}px sans-serif`,d.textAlign="center",d.textBaseline="middle",d.fillText(G,w,C)}const Z=`url(${b.toDataURL()}) ${Math.round(w)} ${Math.round(C)}, crosshair`;_l(Z)},[B,Oe,I,u,Ue,Hs,Wn,Go,Qa,yt,Fe,Ot,H,ee,Bn,$e,ft]),We.useEffect(()=>{Zi()},[Zi]),We.useEffect(()=>{Zi()},[$a.width,$a.height]),We.useEffect(()=>{Ve.size===0&&B==="draw"&&Oe==="trace"&&u>=1&&(wt==="top"?Pe(u):U(u))},[u,B,Oe,wt,Ve]),We.useEffect(()=>{Bt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Il(x,yt);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=sl(x,yt);if(r.padType!==y)return{...r,padType:y}}return r}))},[nt,ht,yt,Il,sl]);const Bl=T.useCallback(()=>{const a=bn.current;if(!a)return;const r=a.toDataURL("image/png"),x=window.open("","_blank");if(!x){alert("Please allow popups to print the canvas.");return}x.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${r}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),x.document.close()},[]);We.useEffect(()=>{const a=x=>{x.key==="Shift"&&pr(!0)},r=x=>{x.key==="Shift"&&pr(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}},[]);const vn=T.useCallback(a=>{if(a.size===0)return;const r=Array.from(a).map(x=>String(x));Bt(x=>x.map(y=>{if(y.type==="trace"){const m=y.points.filter(b=>b.id===void 0?!0:!a.has(b.id));return m.length<2?null:{...y,points:m}}return y}).filter(y=>y!==null)),rn(x=>x.map(y=>{const m=y.pinConnections||[];if(m.some(d=>d&&r.includes(d))){const d=m.map(w=>w&&r.includes(w)?"":w);return{...y,pinConnections:d}}return y})),qt(x=>x.map(y=>{const m=y.pinConnections||[];if(m.some(d=>d&&r.includes(d))){const d=m.map(w=>w&&r.includes(w)?"":w);return{...y,pinConnections:d}}return y}))},[Bt,rn,qt]),tr=T.useRef(new Set);We.useEffect(()=>{const a=new Set;for(const x of Ie)if((x.type==="via"||x.type==="pad")&&x.points.length>0){const y=x.points[0].id;y!==void 0&&a.add(y)}const r=new Set;for(const x of tr.current)a.has(x)||r.add(x);r.size>0&&vn(r),tr.current=a},[Ie,vn]),We.useEffect(()=>{Bt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=Il(x,yt);if(r.viaType!==y)return{...r,viaType:y}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const x=r.points[0].id,y=sl(x,yt);if(r.padType!==y)return{...r,padType:y}}return r}))},[nt,ht,yt,Il,sl]),We.useEffect(()=>{const a=r=>{Vs.current&&(Vs.current.contains(r.target)||zs(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),We.useEffect(()=>{const a=(r,x)=>{const y=r.current;if(!y)return;const m=y.getContext("2d");if(!m)return;const b=y.width,d=y.height;if(m.clearRect(0,0,b,d),m.fillStyle="#fff",m.fillRect(0,0,b,d),x?.bitmap){const w=x.bitmap,C=Math.min(b/w.width,d/w.height),z=Math.max(1,Math.floor(w.width*C)),Z=Math.max(1,Math.floor(w.height*C)),Y=Math.floor((b-z)/2),oe=Math.floor((d-Z)/2);m.drawImage(w,Y,oe,z,Z)}m.strokeStyle="#ddd",m.lineWidth=1,m.strokeRect(.5,.5,b-1,d-1)};a(ec,v),a(ya,_)},[v,_]),We.useEffect(()=>{const a=[],r=[],x=[],y=[];for(const m of Ie)if(m.type==="via"&&m.points.length>=1){const b=m.points[0],d={id:m.id,pointId:b.id,x:b.x,y:b.y,size:m.size,color:m.color};a.push(d)}else if(m.type==="pad"&&m.points.length>=1){const b=m.points[0],d={id:m.id,pointId:b.id,x:b.x,y:b.y,size:m.size,color:m.color,layer:m.layer||"top"};r.push(d)}else if(m.type==="trace"&&m.points.length>=2)for(let b=0;b<m.points.length-1;b++){const d=m.points[b],w=m.points[b+1],C={id:m.id,startPointId:d.id,endPointId:w.id,x1:d.x,y1:d.y,x2:w.x,y2:w.y,size:m.size,color:m.color};m.layer==="top"?x.push(C):y.push(C)}Mi(a),Nn(r),ws(x),Gn(y)},[Ie]);const Gl=T.useRef(Ie);Gl.current=Ie;const lt=T.useCallback(()=>{const r=new Date().toISOString(),x=nx();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:r,view:{currentView:je,viewScale:Ue,viewPan:mt,showBothLayers:Do,selectedDrawingLayer:wt},images:{top:v?{name:v.name,width:v.width,height:v.height,dataUrl:v.dataUrl??v.url,x:v.x,y:v.y,scale:v.scale,rotation:v.rotation,flipX:v.flipX,flipY:v.flipY,skewX:v.skewX,skewY:v.skewY,keystoneV:v.keystoneV,keystoneH:v.keystoneH}:null,bottom:_?{name:_.name,width:_.width,height:_.height,dataUrl:_.dataUrl??_.url,x:_.x,y:_.y,scale:_.scale,rotation:_.rotation,flipX:_.flipX,flipY:_.flipY,skewX:_.skewX,skewY:_.skewY,keystoneV:_.keystoneV,keystoneH:_.keystoneH}:null},drawing:{drawingStrokes:Gl.current.filter(m=>!(m.type==="trace"&&m.points.length<2)),vias:Ss,tracesTop:Mn,tracesBottom:Al,componentsTop:st,componentsBottom:rt,grounds:ht,powers:nt},powerBuses:yt,groundBuses:$n,pointIdCounter:gh(),designatorCounters:Pc(),autoAssignDesignators:Ka,useGlobalDesignatorCounters:ri,traceColors:{top:Fe.get("trace")?.layerSettings.get("top")?.color||H,bottom:Fe.get("trace")?.layerSettings.get("bottom")?.color||ee},traceSizes:{top:Fe.get("trace")?.layerSettings.get("top")?.size||Se,bottom:Fe.get("trace")?.layerSettings.get("bottom")?.size||Re},padColors:{top:Fe.get("pad")?.layerSettings.get("top")?.color||ne,bottom:Fe.get("pad")?.layerSettings.get("bottom")?.color||J},padSizes:{top:Fe.get("pad")?.layerSettings.get("top")?.size||R,bottom:Fe.get("pad")?.layerSettings.get("bottom")?.size||pe},componentColors:{top:Fe.get("component")?.layerSettings.get("top")?.color||$e,bottom:Fe.get("component")?.layerSettings.get("bottom")?.color||ft},componentSizes:{top:Fe.get("component")?.layerSettings.get("top")?.size||Ut,bottom:Fe.get("component")?.layerSettings.get("bottom")?.size||fl},traceToolLayer:Ot,toolSettings:{trace:Fe.get("trace")?.settings||{color:"#ff0000",size:6},via:Fe.get("via")?.settings||{color:"#ff0000",size:18},pad:Fe.get("pad")?.settings||{color:"#ff0000",size:18},component:Fe.get("component")?.settings||{color:"#ff0000",size:18},ground:Fe.get("ground")?.settings||{color:"#000000",size:18},power:Fe.get("power")?.settings||{color:"#ff0000",size:18},erase:Fe.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:Fn,areViasLocked:Ln,arePadsLocked:qn,areTracesLocked:jn,areComponentsLocked:ll,areGroundNodesLocked:Hn,arePowerNodesLocked:cn},visibility:{showViasLayer:xl,showTopPadsLayer:oi,showBottomPadsLayer:Tn,showTopTracesLayer:El,showBottomTracesLayer:Vl,showTopComponents:wn,showBottomComponents:Wl,showPowerLayer:si,showGroundLayer:Cn,showConnectionsLayer:yl},autoSave:{enabled:Ol,interval:Pa,baseName:Hl},projectInfo:{name:Zn},savedCenterLocation:ga},timestamp:x}},[je,Ue,mt,Do,wt,v,_,Ie,Ss,Mn,Al,st,rt,ht,Fe,Fn,Ln,qn,jn,ll,Hn,cn,yt,$n,gh,H,ee,Se,Re,ne,J,R,pe,$e,ft,Ut,fl,Ot,Ol,Pa,Hl,Zn,xl,oi,Tn,El,Vl,wn,Wl,si,Cn,yl,Ka,ri,ga]),Yt=T.useRef(lt);Yt.current=lt;const on=T.useRef(pa);on.current=pa;const Si=T.useRef(Hl);Si.current=Hl;const ho=T.useRef(Tl);ho.current=Tl;const Qi=T.useRef(Ms);Qi.current=Ms;const Kn=T.useRef([]);Kn.current=Vd;const wi=T.useRef(-1);wi.current=Gc;const za=T.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=on.current,r=Si.current;console.log(`Auto save: dirHandle=${a?"set":"missing"}, baseName=${r||"missing"}`);const x=Qi.current;if(console.log(`Auto save: currentFilePath=${x||"none"}`),!a||!r){console.warn(`Auto save: Missing directory handle (${!a}) or base name (${!r}). Please use File -> Auto Save -> Enable to set up auto save.`),gi(!1),Zt.current&&(clearInterval(Zt.current),Zt.current=null);return}if(!Cl.current){console.log("Auto save: Skipping - no changes since last save");return}const y=Gl.current,m=y.filter(Y=>Y.type==="trace"&&Y.points.length<2);if(m.length>0){console.log(`Auto save: Cleaning up ${m.length} single-point trace(s) before save`),m.forEach(oe=>console.log(`  - Removing single-point trace ${oe.id}`));const Y=y.filter(oe=>!(oe.type==="trace"&&oe.points.length<2));Bt(Y),Gl.current=Y}console.log("Auto save: Starting save...");const{project:b,timestamp:d}=Yt.current(),C=`${Vc(r)}_${d}.json`,z=JSON.stringify(b,null,2),Z=new Blob([z],{type:"application/json"});try{let Y;try{Y=await a.getDirectoryHandle("history",{create:!0})}catch(G){console.error("Failed to get/create history directory:",G);return}try{const G=[],ie=Qi.current;for await(const se of a.keys())try{if(se==="history"||se===C)continue;const ke=await(await a.getFileHandle(se)).getFile();if(!se.endsWith(".json"))continue;const ve=await ke.text();try{const Ee=JSON.parse(ve);if(Ee.version&&(Ee.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!Ee.fileType)){G.push(se);const De=Ee.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${se} (${De}${se===ie?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const se of G)try{const ve=await(await(await a.getFileHandle(se)).getFile()).text(),De=await(await Y.getFileHandle(se,{create:!0})).createWritable();await De.write(new Blob([ve],{type:"application/json"})),await De.close(),await a.removeEntry(se),console.log(`Auto save: Moved ${se} from root to history/`)}catch(be){console.warn(`Auto save: Failed to move ${se} to history:`,be)}}catch(G){console.warn("Auto save: Error checking for old files in root:",G)}const X=await(await a.getFileHandle(C,{create:!0})).createWritable();await X.write(Z),await X.close(),console.log(`Auto save: Successfully saved ${C} to root directory`),ho.current(C);const L=Kn.current,W=[C,...L.filter(G=>G!==C)].sort((G,ie)=>ie.localeCompare(G));Us(W),Kn.current=W,qr(0),wi.current=0,Cl.current=!1}catch(Y){console.error("Auto save failed:",Y)}},[]);ur.current=za;const uc=T.useCallback(async()=>{const{project:a}=lt(),r=JSON.stringify(a,null,2),x=new Blob([r],{type:"application/json"});if(ai&&Zn)try{let z=null;try{z=await ai.getDirectoryHandle("history",{create:!0})}catch(G){console.error("Failed to get/create history directory:",G),z=null}const Z=Zn.replace(/\.json$/i,""),Y=Vc(Z),{timestamp:oe}=lt(),X=`${Y}_${oe}.json`;if(z)try{const G=[];for await(const ie of ai.keys())try{if(ie==="history"||ie===X)continue;const be=await(await ai.getFileHandle(ie)).getFile();if(!ie.endsWith(".json"))continue;const ke=await be.text();try{JSON.parse(ke).version&&(G.push(ie),console.log(`Save: Found PCB project file in root: ${ie}`))}catch{continue}}catch{continue}for(const ie of G)try{const ke=await(await(await ai.getFileHandle(ie)).getFile()).text(),Ee=await(await z.getFileHandle(ie,{create:!0})).createWritable();await Ee.write(new Blob([ke],{type:"application/json"})),await Ee.close(),await ai.removeEntry(ie),console.log(`Save: Moved ${ie} from root to history/`)}catch(se){console.warn(`Save: Failed to move ${ie} to history:`,se)}}catch(G){console.warn("Save: Error checking for old files in root:",G)}const W=await(await ai.getFileHandle(X,{create:!0})).createWritable();await W.write(x),await W.close(),Tl(X),console.log(`Project saved: ${Zn}/${X}`);return}catch(z){console.error("Failed to save to project directory:",z),Oi(null)}if(Zn&&!ai){const z=window;if(typeof z.showDirectoryPicker=="function")try{const Z=await z.showDirectoryPicker();Oi(Z);const Y=`${Zn}.json`,X=await(await Z.getFileHandle(Y,{create:!0})).createWritable();await X.write(x),await X.close(),Tl(Y),console.log(`Project saved: ${Y} in selected directory`);return}catch(Z){Z?.name!=="AbortError"&&console.error("Failed to get directory:",Z)}}const y=z=>String(z).padStart(2,"0"),m=new Date,d=`pcb_project_${`${m.getFullYear()}_${y(m.getMonth()+1)}_${y(m.getDate())}_${y(m.getHours())}_${y(m.getMinutes())}_${y(m.getSeconds())}`}.json`,w=window;if(typeof w.showSaveFilePicker=="function")try{const z=await w.showSaveFilePicker({suggestedName:d,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),Z=await z.createWritable();await Z.write(x),await Z.close();const Y=z.name;try{const L=await z.getFile();Tl(L.name)}catch{Tl(Y)}const X=Y.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");X&&(il(X),localStorage.setItem("pcb_project_name",X));try{const L=z.name.replace(/\.json$/i,""),G=Vc(L).replace(/[^a-zA-Z0-9_-]/g,"_");Ya(G),pa||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(L){console.warn("Could not set up auto save for new file:",L)}return}catch(z){if(z?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",z)}const C=document.createElement("a");C.href=URL.createObjectURL(x),C.download=d,document.body.appendChild(C),C.click(),setTimeout(()=>{URL.revokeObjectURL(C.href),document.body.removeChild(C)},0)},[lt]);We.useEffect(()=>{Zt.current&&(clearInterval(Zt.current),Zt.current=null);const a=Ia.current;if(Ia.current=Ol,Ol&&Pa){const r=Pa*60*1e3;pa&&Hl?(console.log(`Auto save: Setting up interval for ${Pa} minute(s) (${r}ms)`),a||(Cl.current=!0,setTimeout(()=>{za()},100)),Zt.current&&(clearInterval(Zt.current),Zt.current=null),Zt.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${Cl.current}`),console.log(`  - dirHandle: ${on.current?"set":"missing"}`),console.log(`  - baseName: ${Si.current||"missing"}`),za()},r),console.log(`Auto save: Interval set up for ${r}ms (${Pa} minutes)`),console.log(`  - Directory handle: ${pa?"set":"missing"}`),console.log(`  - Base name: ${Hl||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!pa}) or base name (${!Hl}). Disabling auto save.`),gi(!1),Zt.current&&(clearInterval(Zt.current),Zt.current=null))}else Ol||(Ia.current=!1);return()=>{Zt.current&&(clearInterval(Zt.current),Zt.current=null)}},[Ol,Pa,pa,Hl]);const Qt=T.useRef(!1);We.useEffect(()=>{if(!Ol){Qt.current=!1;return}if(Qt.current){Qt.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}Cl.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!v,bottomImage:!!_,drawingStrokesCount:Ie.length,componentsTopCount:st.length,componentsBottomCount:rt.length,powersCount:nt.length,groundsCount:ht.length,powerBusesCount:yt.length,areImagesLocked:Fn,areViasLocked:Ln,areTracesLocked:jn,areComponentsLocked:ll,areGroundNodesLocked:Hn,arePowerNodesLocked:cn})},[v,_,Ie,st,rt,nt,ht,yt,H,ee,Se,Re,Fn,Ln,jn,ll,Hn,cn,Ol]),We.useEffect(()=>{Ol?(Qt.current=!0,console.log("Auto save: Enabled, marking first run")):Qt.current=!1},[Ol]),We.useEffect(()=>{Ol||(Cl.current=!1)},[Ol]);const fc=T.useCallback(()=>!!(v||_||Ie.length>0||st.length>0||rt.length>0||nt.length>0||ht.length>0),[v,_,Ie,st,rt,nt,ht]);We.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&il(a)},[]);const go=T.useCallback(()=>{As({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Qc=T.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();As(x=>({...x,locationHandle:r,locationPath:r.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",r.name||"")}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),pc=T.useCallback(async()=>{const a=dn.projectName.trim();if(!a){alert("Please enter a project name.");return}const r=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!dn.locationHandle){alert("Please select a location for the project.");return}const x=dn.locationHandle;let y;try{y=await x.getDirectoryHandle(r,{create:!0})}catch(m){console.error("Failed to create project folder:",m),alert(`Failed to create project folder "${r}". See console for details.`);return}As({visible:!1,projectName:"",locationPath:"",locationHandle:null}),il(r),Oi(y),localStorage.setItem("pcb_project_name",r),localStorage.setItem("pcb_project_location_path",x.name||""),f(null),Q(null),Bt([]),rn([]),qt([]),jl([]),On([]),St(new Set),pt(new Set),tt(new Set),le(new Set),Te("overlay"),ti(1),Dn({x:0,y:0}),Cl.current=!1,Tl(""),gi(!1),fa(null),Ho(null),Ya(""),Zt.current&&(clearInterval(Zt.current),Zt.current=null),po();try{const{project:m,timestamp:b}=lt(),w=`${Vc(r)}_${b}.json`,C=JSON.stringify(m,null,2),z=new Blob([C],{type:"application/json"}),Y=await(await y.getFileHandle(w,{create:!0})).createWritable();await Y.write(z),await Y.close(),Tl(w),console.log(`New project created: ${r}/${w}`),ii({visible:!0,source:"new",interval:5})}catch(m){console.error("Failed to save new project:",m),alert("Failed to save new project file. See console for details.")}},[po,lt,dn]),hc=T.useCallback(()=>{As({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),gc=T.useCallback(()=>{const a=Zn?`${Zn}.json`:"";Ns({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(xa.current?.focus(),xa.current&&a){const r=a.replace(/\.json$/i,"");xa.current.setSelectionRange(0,r.length)}},100)},[Zn]),xc=T.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Ns(x=>({...x,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),kr=T.useCallback(async()=>{const a=ln.filename.trim();if(!a){alert("Please enter a file name.");return}const x=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!ln.locationHandle){alert("Please select a location for the file.");return}const y=ln.locationHandle;try{const{project:m}=lt(),b=JSON.stringify(m,null,2),d=new Blob([b],{type:"application/json"}),C=await(await y.getFileHandle(x,{create:!0})).createWritable();await C.write(d),await C.close(),Tl(x);const z=x.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");z&&(il(z),localStorage.setItem("pcb_project_name",z)),Oi(y),Ns({visible:!1,filename:"",locationPath:"",locationHandle:null}),zs(null),console.log(`Project saved as: ${x} in selected directory`)}catch(m){console.error("Failed to save project:",m),alert(`Failed to save project file "${x}". See console for details.`)}},[ln,lt]),Jn=T.useCallback(()=>{Ns({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),pn=T.useCallback(async()=>{Ds({visible:!1}),await uc(),go(),Un()},[uc,go,Un]),Dr=T.useCallback(()=>{Ds({visible:!1}),go(),Un()},[go,Un]),es=T.useCallback(()=>{Ds({visible:!1})},[]);We.useEffect(()=>{if(ks.visible){setTimeout(()=>{Fa.current?.focus()},0);const a=r=>{r.key==="Enter"?(r.preventDefault(),pn()):r.key==="Escape"&&(r.preventDefault(),Ds({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[ks.visible,pn]);const Ra=T.useCallback(async a=>{try{if(a.projectInfo)a.projectInfo.name&&(il(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const b=localStorage.getItem("pcb_project_name");b&&il(b)}if(a.view&&(a.view.currentView&&Te(a.view.currentView),a.view.viewScale!=null&&ti(a.view.viewScale),a.view.viewPan&&Dn(a.view.viewPan),a.view.showBothLayers!=null&&bs(a.view.showBothLayers),a.view.selectedDrawingLayer&&tl(a.view.selectedDrawingLayer)),a.savedCenterLocation?al(a.savedCenterLocation):al(null),a.traceColors&&(a.traceColors.top&&(fe(a.traceColors.top),kt("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(ce(a.traceColors.bottom),kt("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const b=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let d=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;d<6&&(d=6),Pe(b),U(d),Qe("trace",b,"top"),Qe("trace",d,"bottom")}else Pe(6),U(6);if(a.padColors&&(a.padColors.top&&(ze(a.padColors.top),kt("pad",a.padColors.top,"top")),a.padColors.bottom&&(he(a.padColors.bottom),kt("pad",a.padColors.bottom,"bottom"))),a.padSizes){const b=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:18,d=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:18;O(b),Ne(d),Qe("pad",b,"top"),Qe("pad",d,"bottom")}if(a.componentColors&&(a.componentColors.top&&(ut(a.componentColors.top),kt("component",a.componentColors.top,"top")),a.componentColors.bottom&&(fn(a.componentColors.bottom),kt("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const b=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,d=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;Rl(b),Jl(d),Qe("component",b,"top"),Qe("component",d,"bottom")}if(a.traceToolLayer&&(oa(a.traceToolLayer),B==="draw"&&Oe==="trace")){const b=a.traceToolLayer;j(b==="top"?a.traceColors?.top||H:a.traceColors?.bottom||ee);const d=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let w=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;w<6&&(w=6),k(b==="top"?d:w)}a.toolSettings&&yn(b=>{const d=new Map(b);if(a.toolSettings.trace){const C=d.get("trace");if(C){const z={...C,settings:a.toolSettings.trace},Z=new Map(C.layerSettings);a.traceSizes&&a.traceColors&&(Z.set("top",{color:a.traceColors.top||C.layerSettings.get("top")?.color||"#AA4499",size:a.traceSizes.top||C.layerSettings.get("top")?.size||6}),Z.set("bottom",{color:a.traceColors.bottom||C.layerSettings.get("bottom")?.color||"#F781BF",size:a.traceSizes.bottom||C.layerSettings.get("bottom")?.size||6})),d.set("trace",{...z,layerSettings:Z})}}if(a.toolSettings.via){const C=d.get("via");C&&d.set("via",{...C,settings:a.toolSettings.via})}if(a.toolSettings.pad){const C=d.get("pad");if(C){const z={...C,settings:a.toolSettings.pad},Z=new Map(C.layerSettings);a.padSizes&&a.padColors&&(Z.set("top",{color:a.padColors.top||C.layerSettings.get("top")?.color||"#0072B2",size:a.padSizes.top||C.layerSettings.get("top")?.size||18}),Z.set("bottom",{color:a.padColors.bottom||C.layerSettings.get("bottom")?.color||"#56B4E9",size:a.padSizes.bottom||C.layerSettings.get("bottom")?.size||18})),d.set("pad",{...z,layerSettings:Z})}}if(a.toolSettings.component){const C=d.get("component");if(C){const z={...C,settings:a.toolSettings.component},Z=new Map(C.layerSettings);a.componentSizes&&a.componentColors&&(Z.set("top",{color:a.componentColors.top||C.layerSettings.get("top")?.color||"#6A3D9A",size:a.componentSizes.top||C.layerSettings.get("top")?.size||18}),Z.set("bottom",{color:a.componentColors.bottom||C.layerSettings.get("bottom")?.color||"#9467BD",size:a.componentSizes.bottom||C.layerSettings.get("bottom")?.size||18})),d.set("component",{...z,layerSettings:Z})}}if(a.toolSettings.ground){const C=d.get("ground");C&&d.set("ground",{...C,settings:a.toolSettings.ground})}if(a.toolSettings.power){const C=d.get("power");C&&d.set("power",{...C,settings:a.toolSettings.power})}if(a.toolSettings.erase){const C=d.get("erase");C&&d.set("erase",{...C,settings:a.toolSettings.erase})}const w=B==="draw"&&Oe==="trace"?d.get("trace"):B==="draw"&&Oe==="via"?d.get("via"):B==="draw"&&Oe==="pad"?d.get("pad"):B==="component"?d.get("component"):B==="power"?d.get("power"):B==="ground"?d.get("ground"):null;if(w)if(B==="draw"&&Oe==="trace"){const C=Ot||"top",z=w.layerSettings.get(C);z?(j(z.color),k(z.size),C==="top"?(fe(z.color),Pe(z.size)):(ce(z.color),U(z.size))):(j(w.settings.color),k(w.settings.size))}else if(B==="draw"&&Oe==="pad"){const C=xn||"top",z=w.layerSettings.get(C);z?(j(z.color),k(z.size),C==="top"?(ze(z.color),O(z.size)):(he(z.color),Ne(z.size))):(j(w.settings.color),k(w.settings.size))}else if(B==="component"){const C=Bn||"top",z=w.layerSettings.get(C);z?(j(z.color),k(z.size),C==="top"?(ut(z.color),Rl(z.size)):(fn(z.color),Jl(z.size))):(j(w.settings.color),k(w.settings.size))}else j(w.settings.color),k(w.settings.size);return d});const r=async b=>{if(!b)return null;let d=null;if(b.dataUrl){const w=await(await fetch(b.dataUrl)).blob();d=await createImageBitmap(w)}return{url:b.dataUrl??"",name:b.name??"image",width:b.width??(d?d.width:0),height:b.height??(d?d.height:0),dataUrl:b.dataUrl,x:b.x??0,y:b.y??0,scale:b.scale??1,rotation:b.rotation??0,flipX:!!b.flipX,flipY:!!b.flipY,skewX:b.skewX??0,skewY:b.skewY??0,keystoneV:b.keystoneV??0,keystoneH:b.keystoneH??0,bitmap:d}},x=await r(a.images?.top),y=await r(a.images?.bottom);if(f(x),Q(y),a.pointIdCounter&&typeof a.pointIdCounter=="number")Qu(a.pointIdCounter);else{let b=0;if(a.drawing?.drawingStrokes){for(const w of a.drawing.drawingStrokes)if(w.points)for(const C of w.points)C.id&&typeof C.id=="number"&&C.id>b&&(b=C.id)}const d=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]];for(const w of d)if(w.pinConnections){for(const C of w.pinConnections)if(C){const z=parseInt(C.trim(),10);!isNaN(z)&&z>b&&(b=z)}}if(a.drawing?.powers)for(const w of a.drawing.powers)w.pointId&&typeof w.pointId=="number"&&w.pointId>b&&(b=w.pointId);if(a.drawing?.grounds)for(const w of a.drawing.grounds)w.pointId&&typeof w.pointId=="number"&&w.pointId>b&&(b=w.pointId);Qu(b+1)}if(a.locks&&(typeof a.locks.areImagesLocked=="boolean"?Ea(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&Ea(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&nl(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&Ts(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&Gr(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&Cs(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?Va(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&Va(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&$r(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&gr(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&Ws(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&Xo(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&tc(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&xr(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&Hi(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&qa(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&Ps(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&yi(a.visibility.showGroundLayer),typeof a.visibility.showConnectionsLayer=="boolean"&&Yl(a.visibility.showConnectionsLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&gi(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&fa(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(Ya(a.autoSave.baseName),Si.current=a.autoSave.baseName,a.autoSave.enabled&&!pa&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),gi(!1),fa(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),gi(!1),fa(null),Ya(""),Si.current="")):(gi(!1),fa(null),Ho(null),Ya(""),on.current=null,Si.current="",Zt.current&&(clearInterval(Zt.current),Zt.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const b=a.drawing.drawingStrokes.map(d=>({...d,points:d.points.map(w=>({...w,...Pt(w)}))})).filter(d=>!(d.type==="trace"&&d.points.length<2));Bt(b)}else{const b=[],d=(z,Z)=>{const Y=Pt({x:z.x,y:z.y});b.push({id:z.id||`${Date.now()}-via-${Math.random()}`,points:[{id:z.pointId||Kl(),x:Y.x,y:Y.y}],color:z.color,size:z.size,layer:Z,type:"via"})},w=(z,Z)=>{const Y=Pt({x:z.x1,y:z.y1}),oe=Pt({x:z.x2,y:z.y2});b.push({id:z.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:z.startPointId||Kl(),x:Y.x,y:Y.y},{id:z.endPointId||Kl(),x:oe.x,y:oe.y}],color:z.color,size:z.size,layer:Z,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(z=>d(z,"top")):((a.drawing?.viasTop??[]).forEach(z=>d(z,"top")),(a.drawing?.viasBottom??[]).forEach(z=>d(z,"bottom"))),(a.drawing?.tracesTop??[]).forEach(z=>w(z,"top")),(a.drawing?.tracesBottom??[]).forEach(z=>w(z,"bottom"));const C=b.filter(z=>!(z.type==="trace"&&z.points.length<2));Bt(C)}if(a.drawing?.componentsTop){const b=a.drawing.componentsTop.map(d=>{const w=Pt({x:d.x,y:d.y});return{...d,x:w.x,y:w.y,layer:d.layer||"top",pinConnections:d.pinConnections||new Array(d.pinCount||0).fill("")}});rn(b)}if(a.drawing?.componentsBottom){const b=a.drawing.componentsBottom.map(d=>{const w=Pt({x:d.x,y:d.y});return{...d,x:w.x,y:w.y,layer:d.layer||"bottom",pinConnections:d.pinConnections||new Array(d.pinCount||0).fill("")}});qt(b)}if(a.designatorCounters&&typeof a.designatorCounters=="object"){const b=a.designatorCounters;Ku(b)}else{const b=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]],d={};for(const C of b)if(C.designator&&C.designator.trim()){const z=ef(C.componentType),Z=C.designator.match(new RegExp(`^${z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(Z){const Y=parseInt(Z[1],10);(!d[z]||Y>d[z])&&(d[z]=Y)}}const w=Pc();for(const[C,z]of Object.entries(d))d[C]=Math.max(z,w[C]||0);Ku(d)}if(typeof a.autoAssignDesignators=="boolean"&&(Ml(a.autoAssignDesignators),localStorage.setItem("autoAssignDesignators",String(a.autoAssignDesignators))),typeof a.useGlobalDesignatorCounters=="boolean"?va(a.useGlobalDesignatorCounters):va(!1),ol.current={},a.drawing?.grounds){const d=a.drawing.grounds.map(w=>{const C=w.pointId||Kl(),z=Pt({x:w.x,y:w.y});return{...w,pointId:C,x:z.x,y:z.y}}).filter(w=>{const C=w.y>=0&&w.x>=0&&typeof w.x=="number"&&typeof w.y=="number"&&!isNaN(w.x)&&!isNaN(w.y)&&isFinite(w.x)&&isFinite(w.y);return C||console.warn(`Filtered out invalid ground symbol at (${w.x}, ${w.y}) - likely in border area or invalid coordinates`),C});On(d)}let m;if(a.powerBuses&&Array.isArray(a.powerBuses)&&a.powerBuses.length>0?(m=a.powerBuses,Nl(m)):(m=[{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}],Nl(m)),a.groundBuses&&Array.isArray(a.groundBuses)&&a.groundBuses.length>0){const b=a.groundBuses.map(d=>{const{value:w,...C}=d;return C});li(b)}else li([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]);if(a.drawing?.powers){const d=a.drawing.powers.map(w=>{const C=w.pointId||Kl(),z=Pt({x:w.x,y:w.y});return w.powerBusId?{...w,pointId:C,x:z.x,y:z.y,layer:w.layer||"top"}:{...w,pointId:C,x:z.x,y:z.y,powerBusId:m.length>0?m[0].id:"default-5v",layer:w.layer||"top"}}).filter(w=>{const C=w.y>=0&&w.x>=0&&typeof w.x=="number"&&typeof w.y=="number"&&!isNaN(w.x)&&!isNaN(w.y)&&isFinite(w.x)&&isFinite(w.y);return C||console.warn(`Filtered out invalid power node at (${w.x}, ${w.y}) - likely in border area or invalid coordinates`),C});jl(d)}Cl.current=!1}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}},[B,Oe]),ka=T.useCallback(async()=>{},[Ms]),$l=T.useCallback(async a=>{const r=on.current;if(!r){console.warn("Cannot load file: no directory handle");return}try{const y=await(await r.getFileHandle(a)).getFile();if(y.size===0){console.warn(`File ${a} is empty, skipping`);const z=Kn.current.filter(Z=>Z!==a);Us(z),Kn.current=z;return}const m=await y.text();if(!m||m.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const z=Kn.current.filter(Z=>Z!==a);Us(z),Kn.current=z;return}let b;try{b=JSON.parse(m)}catch(C){console.error(`Failed to parse JSON from file ${a}:`,C);const Z=Kn.current.filter(Y=>Y!==a);Us(Z),Kn.current=Z,await ka();return}po(),ti(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),St(new Set),pt(new Set),tt(new Set),le(new Set),Un(),await Ra(b),Tl(a);const w=Kn.current.indexOf(a);w>=0?(qr(w),wi.current=w):await ka(),Cl.current=!1}catch(x){console.error("Failed to load file from history:",x);const y=Kn.current;if(y.includes(a)){const m=y.filter(b=>b!==a);Us(m),Kn.current=m,await ka()}}},[Ra,ka,Un]);T.useCallback(async()=>{const a=wi.current,r=Kn.current;if(a>=0&&a<r.length-1){const x=a+1,y=r[x];y&&await $l(y)}},[$l]),T.useCallback(async()=>{const a=wi.current,r=Kn.current;if(a<=0||a>=r.length||r.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",r.length);return}if(a>0&&a<r.length&&r.length>0){const x=a-1;if(x>=0&&x<r.length){const y=r[x];y?await $l(y):(console.warn("No newer file found at index",x),await ka())}else console.warn("Cannot navigate to newer file: prevIndex",x,"is out of bounds")}},[$l,ka]),We.useEffect(()=>{Ma.current=vt},[vt]);const ts=We.useRef(Oe),nr=We.useRef(wt);We.useEffect(()=>{const a=Oe!==ts.current;if(B==="draw"&&ts.current==="trace"&&a){if(Ma.current.length>=2){const r={id:`${Date.now()}-trace-autofinalize`,points:Ma.current,color:I,size:u,layer:nr.current,type:"trace"};Bt(x=>[...x,r]),nr.current==="top"?en(x=>[...x,r.id]):Ni(x=>[...x,r.id])}pl([]),Co(!1)}ts.current=Oe,nr.current=wt},[Oe,wt,B,I,u]);const Ar=We.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);We.useEffect(()=>{Zi()},[Ie]),We.useEffect(()=>{Zi()},[st,rt,ht,Cn]);const qe=Gc>0,Kc=T.useCallback(async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[r]=await a.showOpenFilePicker({multiple:!1}),x=await r.getFile();if(!x.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}Tl(x.name);const y=await x.text(),m=JSON.parse(y);try{const d=await r.getParent();Oi(d),console.log(`Opened project file: ${x.name} in directory (auto-save will use this directory)`)}catch(d){console.warn("Could not get directory handle from file handle:",d)}await Ra(m);let b;m.projectInfo?.name?b=m.projectInfo.name:(b=x.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",il(b),localStorage.setItem("pcb_project_name",b)),Zn||(il(b),localStorage.setItem("pcb_project_name",b)),setTimeout(()=>{ii({visible:!0,source:"open",interval:5})},100)}catch(r){if(r?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",r),_s.current?.click()}else _s.current?.click()},[Ra,Zn,Tl,il,Oi,ii]);return l.jsxs("div",{className:"app",children:[l.jsx("header",{className:"app-header",children:l.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.1)"})}),l.jsx(ox,{openMenu:Hd,setOpenMenu:zs,isReadOnlyMode:qe,currentProjectFilePath:Ms,onNewProject:go,onOpenProject:Kc,onSaveProject:uc,onSaveAs:gc,onPrint:Bl,hasUnsavedChanges:fc,setNewProjectDialog:Ds,setAutoSaveDialog:ua,topImage:v,bottomImage:_,selectedImageForTransform:ct,setSelectedImageForTransform:zo,setCurrentTool:V,transformMode:kl,setTransformMode:Ri,updateImageTransform:Zs,resetImageTransform:Qs,isGrayscale:we,setIsGrayscale:He,isBlackAndWhiteEdges:q,setIsBlackAndWhiteEdges:Ae,isBlackAndWhiteInverted:Be,setIsBlackAndWhiteInverted:de,areImagesLocked:Fn,setAreImagesLocked:Ea,onEnterBoardDimensions:()=>qo(!0),fileInputTopRef:$c,fileInputBottomRef:Bs,openProjectRef:_s,increaseSize:uo,decreaseSize:Rr,brushSize:u,drawingStrokes:Ie,selectedIds:Ve,selectedComponentIds:dt,selectedPowerIds:zt,selectedGroundIds:Tt,componentsTop:st,componentsBottom:rt,powers:nt,grounds:ht,powerNodeNames:mr,groundNodeNames:to,setSetSizeDialog:da,areViasLocked:Ln,setAreViasLocked:nl,arePadsLocked:qn,setArePadsLocked:Ts,areTracesLocked:jn,setAreTracesLocked:Gr,areComponentsLocked:ll,setAreComponentsLocked:Cs,areGroundNodesLocked:Hn,setAreGroundNodesLocked:Va,arePowerNodesLocked:cn,setArePowerNodesLocked:$r,setSelectedIds:St,setSelectedComponentIds:pt,setSelectedPowerIds:tt,setSelectedGroundIds:le,selectAllVias:Pi,selectAllTraces:ma,selectAllPads:Yi,selectAllComponents:ac,selectDisconnectedComponents:oc,selectAllPowerNodes:Qn,selectAllGroundNodes:Sr,selectPowerNodesByName:Lc,selectGroundNodesByName:Wd,setShowPowerBusManager:Ei,setShowGroundBusManager:Za,setShowDesignatorManager:Ja,toolRegistry:Fe,updateToolSettings:Xr,updateToolLayerSettings:ms,setBrushSize:k,setBrushColor:j,saveToolSettings:yh,saveToolLayerSettings:Wc,colorPalette:Ar,currentTool:B,drawingMode:Oe,traceToolLayer:Ot,padToolLayer:xn,componentToolLayer:Bn,setTopTraceSize:Pe,setBottomTraceSize:U,setTopPadSize:O,setBottomPadSize:Ne,setTopComponentSize:Rl,setBottomComponentSize:Jl,setComponentConnectionSize:gs,topTraceColor:H,bottomTraceColor:ee,topPadColor:ne,bottomPadColor:J,topComponentColor:$e,bottomComponentColor:ft,setTopTraceColor:fe,setBottomTraceColor:ce,setTopPadColor:ze,setBottomPadColor:he,setTopComponentColor:ut,setBottomComponentColor:fn,setComponentConnectionColor:zi,saveDefaultSize:Qe,saveDefaultColor:kt,menuBarRef:Vs}),l.jsx("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:l.jsxs("div",{ref:Eo,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[l.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[l.jsxs("button",{onClick:()=>{qe||Jo()},onMouseDown:a=>a.currentTarget.blur(),disabled:qe,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="select"?"2px solid #000":"1px solid #ddd",background:B==="select"?"#e6f0ff":"#fff",color:qe?"#999":"#222",outline:"none",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsx($g,{size:14}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),l.jsxs("button",{onClick:()=>{qe||(aa("via"),V("draw"))},disabled:qe,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="draw"&&Oe==="via"?"2px solid #000":"1px solid #ddd",background:B==="draw"&&Oe==="via"?"#e6f0ff":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=Fe.get("via")?.settings.color||Yc;return l.jsxs(l.Fragment,{children:[l.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:r,strokeWidth:"3"}),l.jsx("circle",{cx:"12",cy:"12",r:"4",fill:r})]})})()}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Fe.get("via")?.settings.size??26})]})]}),l.jsxs("button",{ref:oo,onClick:()=>{qe||(aa("pad"),V("draw"),tl(xn||"top"),setTimeout(()=>er(),0))},disabled:qe,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="draw"&&Oe==="pad"?"2px solid #000":"1px solid #ddd",background:B==="draw"&&Oe==="pad"?"#e6f0ff":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const a=Fe.get("pad"),r=xn||"top",x=a?.layerSettings.get(r)?.color??a?.settings.color??wh,y=10,m=(24-y)/2,b=(24-y)/2;return l.jsx("rect",{x:m,y:b,width:y,height:y,fill:x})})()}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=Fe.get("pad"),r=xn||"top";return a?.layerSettings.get(r)?.size??a?.settings.size??18})()})]})]}),l.jsxs("button",{ref:ao,onClick:()=>{qe||(aa("trace"),V("draw"),tl(Ot||"top"),setTimeout(()=>mi(),0))},disabled:qe,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="draw"&&Oe==="trace"?"2px solid #000":"1px solid #ddd",background:B==="draw"&&Oe==="trace"?"#e6f0ff":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsx(Lg,{size:14,color:(()=>{const a=Fe.get("trace"),r=Ot||"top";return a?.layerSettings.get(r)?.color??a?.settings.color??mh})()}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=Fe.get("trace"),r=Ot||"top";return a?.layerSettings.get(r)?.size??a?.settings.size??6})()})]})]}),l.jsxs("button",{ref:Tr,onClick:()=>{qe||(V("component"),lo(!0),$i(!1),Ls(null))},disabled:qe,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="component"?"2px solid #000":"1px solid #ddd",background:B==="component"?"#e6f0ff":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[(()=>{const a=Bn||"top",r=Fe.get("component"),x=r?.layerSettings.get(a)?.color??r?.settings.color??Sh;return Wn?l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[l.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:x,strokeWidth:"1.5"}),l.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:x,fontWeight:"bold",fontFamily:"monospace",children:Ju(Wn)})]}):l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[l.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:x,stroke:x,strokeWidth:"0.5"}),l.jsxs("g",{stroke:x,fill:"none",strokeWidth:"1.5",children:[l.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),l.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:x})]})]})})(),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=Fe.get("component"),r=Bn||"top";return a?.layerSettings.get(r)?.size??a?.settings.size??18})()})]})]}),l.jsxs("button",{ref:Cr,onClick:()=>{qe||V("power")},disabled:qe,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="power"?"2px solid #000":"1px solid #ddd",background:B==="power"?"#e6f0ff":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsx("span",{style:{color:Fe.get("power")?.settings.color||Ud,fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Fe.get("power")?.settings.size??18})]})]}),l.jsxs("button",{ref:Li,onClick:()=>{qe||V("ground")},disabled:qe,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="ground"?"2px solid #000":"1px solid #ddd",background:B==="ground"?"#e6f0ff":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:l.jsxs("g",{stroke:Fe.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),l.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),l.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),l.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Fe.get("ground")?.settings.size??18})]})]}),l.jsxs("button",{onClick:()=>{qe||V("center")},disabled:qe,title:"Set Center Location (X)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="center"?"2px solid #000":"1px solid #ddd",background:B==="center"?"#e6f0ff":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"22",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("line",{x1:"2",y1:"12",x2:"10",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("line",{x1:"14",y1:"12",x2:"22",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"X"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),l.jsxs("button",{onClick:()=>{qe||V(a=>a==="pan"?"draw":"pan")},disabled:qe,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:B==="pan"?"2px solid #000":"1px solid #ddd",background:B==="pan"?"#e6f0ff":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:l.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),l.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),l.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),l.jsxs("button",{onClick:()=>{pr(!1),V(a=>a==="magnify"?"draw":"magnify")},title:`${Hs?"Zoom Out":"Zoom In"} (Z)`,style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="magnify"?"2px solid #000":"1px solid #ddd",background:B==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[l.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),l.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),Hs?l.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):l.jsxs(l.Fragment,{children:[l.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),l.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Z"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),l.jsxs("button",{onClick:()=>{qe||V("erase")},disabled:qe,title:"Erase (E)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:B==="erase"?"2px solid #000":"1px solid #ddd",background:B==="erase"?"#ffecec":"#fff",color:qe?"#999":"#222",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:l.jsxs("g",{transform:"rotate(-35 12 12)",children:[l.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),l.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[l.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),l.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Fe.get("erase")?.settings.size??18})]})]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{onClick:()=>{qe||dr(a=>!a)},disabled:qe,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:qe?"not-allowed":"pointer",opacity:qe?.5:1},children:l.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[l.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),l.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Lr&&l.jsx("div",{ref:La,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:Ar.map(a=>l.jsx("div",{onClick:()=>{j(a),dr(!1);const r=sa(Fe);if(r)if(B==="draw"&&Oe==="trace"){const x=Ot||"top",m=r.layerSettings.get(x)?.size||r.settings.size,b={color:a,size:m};ms(r.id,x,b),Wc(r.id),x==="top"?(fe(a),kt("trace",a,"top")):(ce(a),kt("trace",a,"bottom"))}else if(B==="draw"&&Oe==="pad"){const x=xn||"top",m=r.layerSettings.get(x)?.size||r.settings.size,b={color:a,size:m};ms(r.id,x,b),Wc(r.id),x==="top"?(ze(a),kt("pad",a,"top")):(he(a),kt("pad",a,"bottom"))}else if(B==="component"){const x=Bn||"top",m=r.layerSettings.get(x)?.size||r.settings.size,b={color:a,size:m};ms(r.id,x,b),Wc(r.id),x==="top"?(ut(a),kt("component",a,"top")):(fn(a),kt("component",a,"bottom"))}else{const x={...r.settings,color:a};Xr(r.id,x),yh(r.id,a,r.settings.size),B==="draw"&&Oe==="via"&&kt("via",a)}kt("brush",a),Ve.size>0&&Bt(x=>x.map(y=>Ve.has(y.id)?(y.type==="via"?(kt("via",a),yn(m=>{const b=new Map(m),d=b.get("via");return d&&b.set("via",{...d,settings:{...d.settings,color:a}}),b})):y.type==="pad"?(kt("pad",a),yn(m=>{const b=new Map(m),d=b.get("pad");return d&&b.set("pad",{...d,settings:{...d.settings,color:a}}),b})):y.type==="trace"&&kt("trace",a,y.layer),{...y,color:a}):y)),dt.size>0&&(kt("component",a),rn(x=>x.map(y=>dt.has(y.id)?{...y,color:a}:y)),qt(x=>x.map(y=>dt.has(y.id)?{...y,color:a}:y))),zt.size>0&&jl(x=>x.map(y=>zt.has(y.id)?{...y,color:a}:y)),Tt.size>0&&On(x=>x.map(y=>Tt.has(y.id)?{...y,color:a}:y))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===I?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),B==="draw"&&Oe==="trace"&&$s&&l.jsxs("div",{ref:Sa,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[l.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[l.jsx("input",{type:"radio",name:"traceToolLayer",checked:Ot==="top",onChange:()=>{oa("top"),tl("top"),j(H),k(Se),yn(a=>{const r=new Map(a),x=r.get("trace");return x&&r.set("trace",{...x,settings:{color:H,size:Se}}),r}),an(!1),Yo(!0)}}),l.jsx("span",{children:"Top"})]}),l.jsxs("label",{className:"radio-label",children:[l.jsx("input",{type:"radio",name:"traceToolLayer",checked:Ot==="bottom",onChange:()=>{oa("bottom"),tl("bottom"),j(ee),k(Re),yn(a=>{const r=new Map(a),x=r.get("trace");return x&&r.set("trace",{...x,settings:{color:ee,size:Re}}),r}),an(!1),Io(!0)}}),l.jsx("span",{children:"Bottom"})]})]}),B==="draw"&&Oe==="pad"&&wa&&l.jsxs("div",{ref:no,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[l.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[l.jsx("input",{type:"radio",name:"padToolLayer",checked:xn==="top",onChange:()=>{vs("top"),tl("top"),j(ne),k(R),yn(a=>{const r=new Map(a),x=r.get("pad");return x&&r.set("pad",{...x,settings:{color:ne,size:R}}),r}),Ii(!1),Yo(!0)}}),l.jsx("span",{children:"Top"})]}),l.jsxs("label",{className:"radio-label",children:[l.jsx("input",{type:"radio",name:"padToolLayer",checked:xn==="bottom",onChange:()=>{vs("bottom"),tl("bottom"),j(J),k(pe),yn(a=>{const r=new Map(a),x=r.get("pad");return x&&r.set("pad",{...x,settings:{color:J,size:pe}}),r}),Ii(!1),Io(!0)}}),l.jsx("span",{children:"Bottom"})]})]}),nc&&B==="power"&&l.jsxs("div",{ref:Xi,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[l.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),yt.length===0?l.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...yt].sort((a,r)=>{const x=b=>{const d=b.match(/([+-]?)(\d+\.?\d*)/);if(d){const w=d[1]||"+",C=parseFloat(d[2]);return{absValue:Math.abs(C),isNegative:w==="-",original:b}}return{absValue:1/0,isNegative:!1,original:b}},y=x(a.voltage),m=x(r.voltage);return y.absValue!==m.absValue?y.absValue-m.absValue:y.isNegative!==m.isNegative?y.isNegative?-1:1:0}).map(a=>l.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),Pl(a.id),En(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),l.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),l.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),l.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),En(!1),Ei(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),l.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),En(!1),Pl(null),V("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),Vi&&B==="ground"&&l.jsxs("div",{ref:Gi,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[l.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),$n.length===0?l.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...$n].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=a.id==="groundbus-earth",x=Qa===a.id;return l.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),$o(a.id),ba(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:x?"#e0e0e0":"#f5f5f5",border:x?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r?l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[l.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),l.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),l.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),l.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[l.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),l.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),l.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),l.jsx("div",{children:l.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name})})]})},a.id)}),l.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),l.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),ba(!1),Za(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),l.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),ba(!1),$o(null),V("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),B==="component"&&Fs&&l.jsxs("div",{ref:Fi,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[l.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[l.jsx("input",{type:"radio",name:"componentToolLayer",checked:wt==="top",onClick:()=>{ni("top"),tl("top"),j($e),k(Ut),yn(a=>{const r=new Map(a),x=r.get("component");return x&&r.set("component",{...x,settings:{color:$e,size:Ut}}),r}),lo(!1),Yo(!0),$i(!0)}}),l.jsx("span",{children:"Top"})]}),l.jsxs("label",{className:"radio-label",children:[l.jsx("input",{type:"radio",name:"componentToolLayer",checked:wt==="bottom",onClick:()=>{ni("bottom"),tl("bottom"),j(ft),k(fl),yn(a=>{const r=new Map(a),x=r.get("component");return x&&r.set("component",{...x,settings:{color:ft,size:fl}}),r}),lo(!1),Io(!0),$i(!0)}}),l.jsx("span",{children:"Bottom"})]})]}),B==="component"&&wr&&l.jsxs("div",{ref:io,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[l.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(qg).map(([a,r])=>{const x=jr.has(a);return l.jsxs("div",{style:{marginBottom:"4px"},children:[l.jsxs("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),qc(m=>{const b=new Set(m);return b.has(a)?b.delete(a):b.add(a),b})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:x?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[l.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:x?"":""}),a]}),x&&l.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(r).map(([y,m])=>l.jsxs("div",{style:{marginBottom:"2px"},children:[l.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[y,":"]}),m.map(b=>{const d=Ic[b];return d?l.jsxs("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),Ls(b),$i(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:Wn===b?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[d.prefix.join(", ")," - ",b]},b):null})]},y))})]},a)}),l.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),$i(!1),V("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),l.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[l.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),l.jsxs("div",{onClick:()=>tl("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:ct==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[l.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),l.jsx("label",{className:"radio-label",style:{margin:0},children:l.jsx("input",{type:"checkbox",checked:Po,onChange:a=>Yo(a.target.checked)})})]}),l.jsx("canvas",{ref:ec,width:60,height:40,style:{width:"60px",height:"40px"}})]}),l.jsxs("div",{onClick:()=>tl("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:ct==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[l.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),l.jsx("label",{className:"radio-label",style:{margin:0},children:l.jsx("input",{type:"checkbox",checked:xi,onChange:a=>Io(a.target.checked)})})]}),l.jsx("canvas",{ref:ya,width:60,height:40,style:{width:"60px",height:"40px"}})]}),l.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:xl,onChange:a=>gr(a.target.checked)}),l.jsx("span",{children:"Vias"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:oi,onChange:a=>Ws(a.target.checked)}),l.jsx("span",{children:"Pads (Top)"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:El,onChange:a=>tc(a.target.checked)}),l.jsx("span",{children:"Traces (Top)"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:wn,onChange:a=>Hi(a.target.checked)}),l.jsx("span",{children:"Components (Top)"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:Tn,onChange:a=>Xo(a.target.checked)}),l.jsx("span",{children:"Pads (Bottom)"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:Vl,onChange:a=>xr(a.target.checked)}),l.jsx("span",{children:"Traces (Bottom)"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:Wl,onChange:a=>qa(a.target.checked)}),l.jsx("span",{children:"Components (Bottom)"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:si,onChange:a=>Ps(a.target.checked)}),l.jsx("span",{children:"Power"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:Cn,onChange:a=>yi(a.target.checked)}),l.jsx("span",{children:"Ground"})]}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:yl,onChange:a=>Yl(a.target.checked)}),l.jsx("span",{children:"Connections"})]}),l.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),l.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:xl&&oi&&Tn&&El&&Vl&&wn&&Wl&&si&&Cn&&yl,onChange:a=>{const r=a.target.checked;gr(r),Ws(r),Xo(r),tc(r),xr(r),Hi(r),qa(r),Ps(r),yi(r),Yl(r)}}),l.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),l.jsxs("div",{style:{marginTop:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",g,"%"]}),l.jsxs("label",{className:"radio-label",style:{margin:0},children:[l.jsx("input",{type:"checkbox",checked:ye,onChange:a=>{const r=a.target.checked;r?(Yo(!0),Io(!0)):(P(50),V("select")),me(r)}}),l.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),l.jsx("input",{type:"range",min:"0",max:"100",value:g,onChange:a=>P(Number(a.target.value)),onDoubleClick:()=>Ca("transparency"),className:"slider",style:{width:"100%",marginTop:3}})]})]}),l.jsx(sx,{visible:!v&&!_}),l.jsx("canvas",{ref:bn,width:$a.width,height:$a.height,tabIndex:0,onMouseDown:co,onMouseMove:Ta,onMouseUp:qi,onMouseLeave:qi,onWheel:Zc,onDoubleClick:ja,className:`pcb-canvas ${B==="transform"?"transform-cursor":B==="draw"?"draw-cursor":B==="erase"?"erase-cursor":"default-cursor"}`,style:{position:"absolute",left:"244px",top:"6px",...Di?{cursor:Di}:B==="pan"?{cursor:ha?"grabbing":"grab"}:{},width:`${$a.width}px`,height:`${$a.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),l.jsx(hx,{componentEditor:Oa,setComponentEditor:Ht,componentsTop:st,componentsBottom:rt,setComponentsTop:rn,setComponentsBottom:qt,connectingPin:nn,setConnectingPin:wl,componentDialogPosition:Bi,setComponentDialogPosition:No,isDraggingDialog:Mo,setIsDraggingDialog:hi,dialogDragOffset:Ha,setDialogDragOffset:sr,areComponentsLocked:ll,setSelectedComponentIds:pt,setNotesDialogVisible:Rt}),Es&&Ga&&(()=>{const a=Es.component,r=Pd(a);return a?l.jsxs("div",{style:{position:"fixed",left:`${Es.x+10}px`,top:`${Es.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[l.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:a.componentType}),r&&l.jsx("div",{style:{marginBottom:"4px",color:"#e0e0e0"},children:r}),a.notes&&l.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.notes})]}):null})(),gl&&gl.visible&&(()=>{if(!nt.find(x=>x.id===gl.id))return null;const r=yt.find(x=>x.id===gl.powerBusId);return l.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[l.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),l.jsx("button",{onClick:()=>ca(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),l.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:r?`${r.name} (${r.voltage})`:"Unknown"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`power-layer-${gl.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),l.jsxs("select",{id:`power-layer-${gl.id}`,name:`power-layer-${gl.id}`,value:gl.layer,onChange:x=>ca({...gl,layer:x.target.value}),disabled:cn,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:cn?.6:1},children:[l.jsx("option",{value:"top",children:"Top"}),l.jsx("option",{value:"bottom",children:"Bottom"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),l.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:gl.x.toFixed(2)})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),l.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:gl.y.toFixed(2)})]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[l.jsx("button",{onClick:()=>ca(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),l.jsx("button",{onClick:()=>{cn||(jl(x=>x.map(y=>y.id===gl.id?{...y,layer:gl.layer}:y)),ca(null))},disabled:cn,style:{padding:"2px 5px",background:cn?"#f5f5f5":"#0b5fff",color:cn?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:cn?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!v&&!_&&l.jsx("div",{className:"placeholder"})]})}),yr&&l.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[l.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),l.jsx("button",{onClick:()=>Ei(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),l.jsx("div",{style:{marginBottom:"12px"},children:[...yt].sort((a,r)=>{const x=b=>{const d=b.match(/([+-]?)(\d+\.?\d*)/);if(d){const w=d[1]||"+",C=parseFloat(d[2]);return{absValue:Math.abs(C),isNegative:w==="-",original:b}}return{absValue:1/0,isNegative:!1,original:b}},y=x(a.voltage),m=x(r.voltage);return y.absValue!==m.absValue?y.absValue-m.absValue:y.isNegative!==m.isNegative?y.isNegative?-1:1:0}).map(a=>{const r=yt.findIndex(m=>m.id===a.id),x=yt.some(m=>m.name===a.name&&m.id!==a.id),y=yt.some(m=>m.voltage===a.voltage&&m.id!==a.id);return l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[l.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc",flexShrink:0}}),l.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),l.jsx("input",{type:"text",value:a.name,onChange:m=>{const b=[...yt];b[r]={...a,name:m.target.value},Nl(b)},placeholder:"e.g., +3V3, -3V3",style:{flex:1,padding:"2px 4px",border:x?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Value"}),l.jsx("input",{type:"text",inputMode:"decimal",value:a.voltage,onChange:m=>{const b=m.target.value;if(b===""||/^[+-]?\d*\.?\d*$/.test(b)){const d=[...yt];d[r]={...a,voltage:b},Nl(d)}},onBlur:m=>{const b=m.target.value.trim();if(b==="")return;const d=parseFloat(b);if(!isNaN(d)){const w=d>=0?"+":"-",C=Math.abs(d),z=`${w}${C.toFixed(1).replace(/\.?0+$/,"")}`,Z=[...yt];Z[r]={...a,voltage:z},Nl(Z)}},placeholder:"e.g., +3.3, -3.3",style:{flex:1,padding:"2px 4px",border:y?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})]}),l.jsx("input",{type:"color",value:a.color,onChange:m=>{const b=[...yt];b[r]={...a,color:m.target.value},Nl(b)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),l.jsx("button",{onClick:()=>{const m=nt.filter(b=>b.powerBusId===a.id);if(m.length>0){alert(`Cannot delete: ${m.length} power node(s) are using this bus. Remove or reassign them first.`);return}Nl(b=>b.filter(d=>d.id!==a.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},a.id)})}),l.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};Nl(r=>[...r,a])},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Power Bus"}),l.jsx("button",{onClick:()=>Ei(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),Fc&&l.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[l.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Ground Buses"}),l.jsx("button",{onClick:()=>Za(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),l.jsx("div",{style:{marginBottom:"12px"},children:[...$n].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=$n.findIndex(y=>y.id===a.id),x=$n.some(y=>y.name===a.name&&y.id!==a.id);return l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[l.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc",flexShrink:0}}),l.jsx("div",{style:{flex:1,minWidth:0},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[l.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),l.jsx("input",{type:"text",value:a.name,onChange:y=>{const m=[...$n];m[r]={...a,name:y.target.value},li(m)},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 4px",border:x?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})}),l.jsx("input",{type:"color",value:a.color,onChange:y=>{const m=[...$n];m[r]={...a,color:y.target.value},li(m)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),l.jsx("button",{onClick:()=>{const y=ht.filter(m=>m.groundBusId===a.id);if(y.length>0){alert(`Cannot delete: ${y.length} ground node(s) are using this bus. Remove or reassign them first.`);return}li(m=>m.filter(b=>b.id!==a.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},a.id)})}),l.jsx("button",{onClick:()=>{const a={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};li(r=>[...r,a])},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Ground Bus"}),l.jsx("button",{onClick:()=>Za(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),br&&l.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"16px",zIndex:1e3,minWidth:"300px",maxWidth:"400px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[l.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Designators"}),l.jsx("button",{onClick:()=>Ja(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),l.jsxs("div",{style:{marginBottom:"16px"},children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333",marginBottom:"12px"},children:[l.jsx("input",{type:"checkbox",checked:Ka,onChange:a=>{const r=a.target.checked;Ml(r),localStorage.setItem("autoAssignDesignators",String(r))},style:{width:"16px",height:"16px",cursor:"pointer"}}),l.jsx("span",{children:"Automatically assign designators"})]}),l.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4",marginBottom:"12px"},children:Ka?l.jsx("div",{children:"When enabled, new components automatically receive sequential designators (e.g., C1, C2, C3 for Capacitors; R1, R2, R3 for Resistors)."}):l.jsx("div",{children:"When disabled, you must manually assign designators to each component. The designator field will be empty when components are created."})}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333"},children:[l.jsx("input",{type:"checkbox",checked:ri,onChange:a=>{const r=a.target.checked;va(r)},style:{width:"16px",height:"16px",cursor:"pointer"}}),l.jsx("span",{children:"Use global designator counters"})]}),l.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4"},children:ri?l.jsx("div",{children:"When ON, designators continue from global counters across all projects. New components start with the next value from the global counter (e.g., if global counter is C10, new capacitor will be C11)."}):l.jsx("div",{children:"When OFF (default), designators start at 1 for each project. Each project maintains its own independent designator sequence (e.g., C1, C2, C3...)."})})]}),l.jsx("button",{onClick:()=>Ja(!1),style:{width:"100%",padding:"6px 12px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}),l.jsx("input",{ref:$c,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&rc(r,"top"),a.target.value=""}}),l.jsx("input",{ref:Bs,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&rc(r,"bottom"),a.target.value=""}}),l.jsx("input",{ref:_s,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const r=a.target.files?.[0];if(r)try{Tl(r.name);const x=await r.text(),y=JSON.parse(x);await Ra(y);let m;y.projectInfo?.name?m=y.projectInfo.name:(m=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",il(m),localStorage.setItem("pcb_project_name",m)),Zn||(il(m),localStorage.setItem("pcb_project_name",m)),setTimeout(()=>{ii({visible:!0,source:"open",interval:5})},100)}catch(x){console.error("Failed to open project",x),alert("Failed to open project file. See console for details.")}a.target.value=""}}),l.jsx(cx,{visible:Oo.visible,selectedIds:Ve,selectedComponentIds:dt,selectedPowerIds:zt,selectedGroundIds:Tt,drawingStrokes:Ie,componentsTop:st,componentsBottom:rt,powers:nt,grounds:ht,powerBuses:yt,onClose:()=>{Rs({visible:!1,text:""})},setComponentsTop:rn,setComponentsBottom:qt,determineViaType:Il,determinePadType:sl,onFindComponent:Zo,position:zn,isDragging:Ys,onDragStart:a=>{zn&&(Vn({x:a.clientX-zn.x,y:a.clientY-zn.y}),vr(!0),a.preventDefault())}}),l.jsx(dx,{visible:$t,selectedIds:Ve,selectedComponentIds:dt,selectedPowerIds:zt,selectedGroundIds:Tt,drawingStrokes:Ie,componentsTop:st,componentsBottom:rt,powers:nt,grounds:ht,powerBuses:yt,onClose:()=>{Rt(!1)},setComponentsTop:rn,setComponentsBottom:qt,setDrawingStrokes:Bt,setPowerSymbols:jl,setGroundSymbols:On,determineViaType:Il,determinePadType:sl,position:Ul,isDragging:Xs,onDragStart:a=>{Ul&&(lc({x:a.clientX-Ul.x,y:a.clientY-Ul.y}),Wi(!0),a.preventDefault())}}),ks.visible&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&es()},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[l.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),l.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[l.jsx("button",{onClick:es,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),l.jsx("button",{onClick:Dr,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),l.jsx("button",{ref:Fa,onClick:pn,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),dn.visible&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&hc()},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[l.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),l.jsx("input",{ref:Jr,type:"text",value:dn.projectName,onChange:a=>{As(r=>({...r,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),pc()):a.key==="Escape"&&(a.preventDefault(),hc())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),dn.projectName&&(()=>{const a=dn.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const r=[...new Set(a)];return l.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",r.map(x=>`"${x}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),l.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[l.jsx("input",{type:"text",value:dn.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:dn.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),l.jsx("button",{onClick:Qc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),dn.projectName&&dn.locationPath&&l.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[l.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),l.jsxs("div",{style:{color:"#4CAF50"},children:[dn.locationPath,"/",dn.projectName,"/project.json"]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[l.jsx("button",{onClick:hc,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),l.jsx("button",{onClick:pc,disabled:!dn.projectName.trim()||!dn.locationHandle,style:{padding:"8px 16px",background:!dn.projectName.trim()||!dn.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!dn.projectName.trim()||!dn.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!dn.projectName.trim()||!dn.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!dn.projectName.trim()||!dn.locationHandle?.6:1},children:"Create"})]})]})}),ln.visible&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Jn()},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[l.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),l.jsx("input",{ref:xa,type:"text",value:ln.filename,onChange:a=>{Ns(r=>({...r,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),kr()):a.key==="Escape"&&(a.preventDefault(),Jn())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),l.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[l.jsx("input",{type:"text",value:ln.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:ln.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),l.jsx("button",{onClick:xc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),ln.filename&&ln.locationPath&&l.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[l.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),l.jsxs("div",{style:{color:"#4CAF50"},children:[ln.locationPath,"/",ln.filename.endsWith(".json")?ln.filename:`${ln.filename}.json`]})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[l.jsx("button",{onClick:Jn,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),l.jsx("button",{onClick:kr,disabled:!ln.filename.trim()||!ln.locationHandle,style:{padding:"8px 16px",background:!ln.filename.trim()||!ln.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!ln.filename.trim()||!ln.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!ln.filename.trim()||!ln.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!ln.filename.trim()||!ln.locationHandle?.6:1},children:"Save"})]})]})}),l.jsx(rx,{visible:Fr.visible,title:Fr.title,message:Fr.message,onClose:()=>cr({visible:!1,title:"",message:""})}),l.jsx(ux,{visible:ic,dimensions:Lo,onSave:a=>{eo(a),localStorage.setItem("boardDimensions",JSON.stringify(a))},onClose:()=>qo(!1)}),Wa.visible&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&da({visible:!1,size:6})},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[l.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),l.jsx("input",{ref:hr,type:"number",min:"1",max:"99",value:Wa.size,onChange:a=>{const r=parseInt(a.target.value)||1,x=Math.max(1,Math.min(99,r));da(y=>({...y,size:x}))},onKeyDown:a=>{if(a.key==="Enter"?dc():a.key==="Escape"&&da({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const r=Wa.size.toString();r.length>=2&&hr.current?.selectionStart===hr.current?.selectionEnd&&hr.current?.selectionStart===r.length&&a.preventDefault()}},onInput:a=>{const r=a.target,x=r.value;if(x.length>2){r.value=x.slice(0,2);const y=parseInt(r.value)||1;da(m=>({...m,size:Math.max(1,Math.min(99,y))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),l.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(Wa.size)?Wa.size:"",onChange:a=>{const r=parseInt(a.target.value);!isNaN(r)&&r>0&&da(x=>({...x,size:r}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[l.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>l.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[l.jsx("button",{onClick:()=>da({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),l.jsx("button",{onClick:dc,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),rr.visible&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&ua({visible:!1,interval:5})},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[l.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),l.jsxs("select",{value:rr.interval===null?"disable":(rr.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")ua({visible:!0,interval:null});else{const x=parseFloat(r);!isNaN(x)&&x>0&&ua({visible:!0,interval:x})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[l.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),l.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),l.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),l.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),l.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),l.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[l.jsx("button",{onClick:()=>ua({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),l.jsx("button",{onClick:()=>Ks(rr.interval,!1),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),_o.visible&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&fo()},children:l.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[l.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),l.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),l.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),l.jsxs("select",{value:_o.interval===null?"disable":(_o.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")ii({..._o,interval:null});else{const x=parseFloat(r);!isNaN(x)&&x>0&&ii({..._o,interval:x})}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[l.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),l.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),l.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),l.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),l.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[l.jsx("button",{onClick:fo,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),l.jsx("button",{onClick:()=>Ks(_o.interval,!0),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})})]})}Vg.createRoot(document.getElementById("root")).render(l.jsx(T.StrictMode,{children:l.jsx(Dx,{})}));
