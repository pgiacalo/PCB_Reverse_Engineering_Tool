(function(){const D=document.createElement("link").relList;if(D&&D.supports&&D.supports("modulepreload"))return;for(const ie of document.querySelectorAll('link[rel="modulepreload"]'))b(ie);new MutationObserver(ie=>{for(const he of ie)if(he.type==="childList")for(const pe of he.addedNodes)pe.tagName==="LINK"&&pe.rel==="modulepreload"&&b(pe)}).observe(document,{childList:!0,subtree:!0});function oe(ie){const he={};return ie.integrity&&(he.integrity=ie.integrity),ie.referrerPolicy&&(he.referrerPolicy=ie.referrerPolicy),ie.crossOrigin==="use-credentials"?he.credentials="include":ie.crossOrigin==="anonymous"?he.credentials="omit":he.credentials="same-origin",he}function b(ie){if(ie.ep)return;ie.ep=!0;const he=oe(ie);fetch(ie.href,he)}})();function y0(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}var $u={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lp;function g0(){if(Lp)return pc;Lp=1;var B=Symbol.for("react.transitional.element"),D=Symbol.for("react.fragment");function oe(b,ie,he){var pe=null;if(he!==void 0&&(pe=""+he),ie.key!==void 0&&(pe=""+ie.key),"key"in ie){he={};for(var Ke in ie)Ke!=="key"&&(he[Ke]=ie[Ke])}else he=ie;return ie=he.ref,{$$typeof:B,type:b,key:pe,ref:ie!==void 0?ie:null,props:he}}return pc.Fragment=D,pc.jsx=oe,pc.jsxs=oe,pc}var Hp;function m0(){return Hp||(Hp=1,$u.exports=g0()),$u.exports}var c=m0(),Zu={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp;function x0(){if(Yp)return Qe;Yp=1;var B=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),oe=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),Ke=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),$=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),fe=Symbol.iterator;function Ae(m){return m===null||typeof m!="object"?null:(m=fe&&m[fe]||m["@@iterator"],typeof m=="function"?m:null)}var ae={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Se=Object.assign,ct={};function Te(m,j,P){this.props=m,this.context=j,this.refs=ct,this.updater=P||ae}Te.prototype.isReactComponent={},Te.prototype.setState=function(m,j){if(typeof m!="object"&&typeof m!="function"&&m!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,m,j,"setState")},Te.prototype.forceUpdate=function(m){this.updater.enqueueForceUpdate(this,m,"forceUpdate")};function dt(){}dt.prototype=Te.prototype;function xe(m,j,P){this.props=m,this.context=j,this.refs=ct,this.updater=P||ae}var pt=xe.prototype=new dt;pt.constructor=xe,Se(pt,Te.prototype),pt.isPureReactComponent=!0;var ht=Array.isArray;function $t(){}var Me={H:null,A:null,T:null,S:null},_t=Object.prototype.hasOwnProperty;function z(m,j,P){var ue=P.ref;return{$$typeof:B,type:m,key:j,ref:ue!==void 0?ue:null,props:P}}function Jn(m,j){return z(m.type,j,m.props)}function nt(m){return typeof m=="object"&&m!==null&&m.$$typeof===B}function Kt(m){var j={"=":"=0",":":"=2"};return"$"+m.replace(/[=:]/g,function(P){return j[P]})}var wn=/\/+/g;function Pt(m,j){return typeof m=="object"&&m!==null&&m.key!=null?Kt(""+m.key):j.toString(36)}function Ot(m){switch(m.status){case"fulfilled":return m.value;case"rejected":throw m.reason;default:switch(typeof m.status=="string"?m.then($t,$t):(m.status="pending",m.then(function(j){m.status==="pending"&&(m.status="fulfilled",m.value=j)},function(j){m.status==="pending"&&(m.status="rejected",m.reason=j)})),m.status){case"fulfilled":return m.value;case"rejected":throw m.reason}}throw m}function Z(m,j,P,ue,Ce){var Ne=typeof m;(Ne==="undefined"||Ne==="boolean")&&(m=null);var me=!1;if(m===null)me=!0;else switch(Ne){case"bigint":case"string":case"number":me=!0;break;case"object":switch(m.$$typeof){case B:case D:me=!0;break;case ve:return me=m._init,Z(me(m._payload),j,P,ue,Ce)}}if(me)return Ce=Ce(m),me=ue===""?"."+Pt(m,0):ue,ht(Ce)?(P="",me!=null&&(P=me.replace(wn,"$&/")+"/"),Z(Ce,j,P,"",function(Tn){return Tn})):Ce!=null&&(nt(Ce)&&(Ce=Jn(Ce,P+(Ce.key==null||m&&m.key===Ce.key?"":(""+Ce.key).replace(wn,"$&/")+"/")+me)),j.push(Ce)),1;me=0;var Xe=ue===""?".":ue+":";if(ht(m))for(var lt=0;lt<m.length;lt++)ue=m[lt],Ne=Xe+Pt(ue,lt),me+=Z(ue,j,P,Ne,Ce);else if(lt=Ae(m),typeof lt=="function")for(m=lt.call(m),lt=0;!(ue=m.next()).done;)ue=ue.value,Ne=Xe+Pt(ue,lt++),me+=Z(ue,j,P,Ne,Ce);else if(Ne==="object"){if(typeof m.then=="function")return Z(Ot(m),j,P,ue,Ce);throw j=String(m),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return me}function se(m,j,P){if(m==null)return m;var ue=[],Ce=0;return Z(m,ue,"","",function(Ne){return j.call(P,Ne,Ce++)}),ue}function O(m){if(m._status===-1){var j=m._result;j=j(),j.then(function(P){(m._status===0||m._status===-1)&&(m._status=1,m._result=P)},function(P){(m._status===0||m._status===-1)&&(m._status=2,m._result=P)}),m._status===-1&&(m._status=0,m._result=j)}if(m._status===1)return m._result.default;throw m._result}var J=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},re={map:se,forEach:function(m,j,P){se(m,function(){j.apply(this,arguments)},P)},count:function(m){var j=0;return se(m,function(){j++}),j},toArray:function(m){return se(m,function(j){return j})||[]},only:function(m){if(!nt(m))throw Error("React.Children.only expected to receive a single React element child.");return m}};return Qe.Activity=C,Qe.Children=re,Qe.Component=Te,Qe.Fragment=oe,Qe.Profiler=ie,Qe.PureComponent=xe,Qe.StrictMode=b,Qe.Suspense=ye,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Me,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(m){return Me.H.useMemoCache(m)}},Qe.cache=function(m){return function(){return m.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(m,j,P){if(m==null)throw Error("The argument must be a React element, but you passed "+m+".");var ue=Se({},m.props),Ce=m.key;if(j!=null)for(Ne in j.key!==void 0&&(Ce=""+j.key),j)!_t.call(j,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&j.ref===void 0||(ue[Ne]=j[Ne]);var Ne=arguments.length-2;if(Ne===1)ue.children=P;else if(1<Ne){for(var me=Array(Ne),Xe=0;Xe<Ne;Xe++)me[Xe]=arguments[Xe+2];ue.children=me}return z(m.type,Ce,ue)},Qe.createContext=function(m){return m={$$typeof:pe,_currentValue:m,_currentValue2:m,_threadCount:0,Provider:null,Consumer:null},m.Provider=m,m.Consumer={$$typeof:he,_context:m},m},Qe.createElement=function(m,j,P){var ue,Ce={},Ne=null;if(j!=null)for(ue in j.key!==void 0&&(Ne=""+j.key),j)_t.call(j,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ce[ue]=j[ue]);var me=arguments.length-2;if(me===1)Ce.children=P;else if(1<me){for(var Xe=Array(me),lt=0;lt<me;lt++)Xe[lt]=arguments[lt+2];Ce.children=Xe}if(m&&m.defaultProps)for(ue in me=m.defaultProps,me)Ce[ue]===void 0&&(Ce[ue]=me[ue]);return z(m,Ne,Ce)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(m){return{$$typeof:Ke,render:m}},Qe.isValidElement=nt,Qe.lazy=function(m){return{$$typeof:ve,_payload:{_status:-1,_result:m},_init:O}},Qe.memo=function(m,j){return{$$typeof:$,type:m,compare:j===void 0?null:j}},Qe.startTransition=function(m){var j=Me.T,P={};Me.T=P;try{var ue=m(),Ce=Me.S;Ce!==null&&Ce(P,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then($t,J)}catch(Ne){J(Ne)}finally{j!==null&&P.types!==null&&(j.types=P.types),Me.T=j}},Qe.unstable_useCacheRefresh=function(){return Me.H.useCacheRefresh()},Qe.use=function(m){return Me.H.use(m)},Qe.useActionState=function(m,j,P){return Me.H.useActionState(m,j,P)},Qe.useCallback=function(m,j){return Me.H.useCallback(m,j)},Qe.useContext=function(m){return Me.H.useContext(m)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(m,j){return Me.H.useDeferredValue(m,j)},Qe.useEffect=function(m,j){return Me.H.useEffect(m,j)},Qe.useEffectEvent=function(m){return Me.H.useEffectEvent(m)},Qe.useId=function(){return Me.H.useId()},Qe.useImperativeHandle=function(m,j,P){return Me.H.useImperativeHandle(m,j,P)},Qe.useInsertionEffect=function(m,j){return Me.H.useInsertionEffect(m,j)},Qe.useLayoutEffect=function(m,j){return Me.H.useLayoutEffect(m,j)},Qe.useMemo=function(m,j){return Me.H.useMemo(m,j)},Qe.useOptimistic=function(m,j){return Me.H.useOptimistic(m,j)},Qe.useReducer=function(m,j,P){return Me.H.useReducer(m,j,P)},Qe.useRef=function(m){return Me.H.useRef(m)},Qe.useState=function(m){return Me.H.useState(m)},Qe.useSyncExternalStore=function(m,j,P){return Me.H.useSyncExternalStore(m,j,P)},Qe.useTransition=function(){return Me.H.useTransition()},Qe.version="19.2.0",Qe}var Xp;function Ju(){return Xp||(Xp=1,Zu.exports=x0()),Zu.exports}var w=Ju();const tt=y0(w);var Qu={exports:{}},hc={},Ku={exports:{}},Pu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function b0(){return Vp||(Vp=1,(function(B){function D(Z,se){var O=Z.length;Z.push(se);e:for(;0<O;){var J=O-1>>>1,re=Z[J];if(0<ie(re,se))Z[J]=se,Z[O]=re,O=J;else break e}}function oe(Z){return Z.length===0?null:Z[0]}function b(Z){if(Z.length===0)return null;var se=Z[0],O=Z.pop();if(O!==se){Z[0]=O;e:for(var J=0,re=Z.length,m=re>>>1;J<m;){var j=2*(J+1)-1,P=Z[j],ue=j+1,Ce=Z[ue];if(0>ie(P,O))ue<re&&0>ie(Ce,P)?(Z[J]=Ce,Z[ue]=O,J=ue):(Z[J]=P,Z[j]=O,J=j);else if(ue<re&&0>ie(Ce,O))Z[J]=Ce,Z[ue]=O,J=ue;else break e}}return se}function ie(Z,se){var O=Z.sortIndex-se.sortIndex;return O!==0?O:Z.id-se.id}if(B.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var he=performance;B.unstable_now=function(){return he.now()}}else{var pe=Date,Ke=pe.now();B.unstable_now=function(){return pe.now()-Ke}}var ye=[],$=[],ve=1,C=null,fe=3,Ae=!1,ae=!1,Se=!1,ct=!1,Te=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,xe=typeof setImmediate<"u"?setImmediate:null;function pt(Z){for(var se=oe($);se!==null;){if(se.callback===null)b($);else if(se.startTime<=Z)b($),se.sortIndex=se.expirationTime,D(ye,se);else break;se=oe($)}}function ht(Z){if(Se=!1,pt(Z),!ae)if(oe(ye)!==null)ae=!0,$t||($t=!0,Kt());else{var se=oe($);se!==null&&Ot(ht,se.startTime-Z)}}var $t=!1,Me=-1,_t=5,z=-1;function Jn(){return ct?!0:!(B.unstable_now()-z<_t)}function nt(){if(ct=!1,$t){var Z=B.unstable_now();z=Z;var se=!0;try{e:{ae=!1,Se&&(Se=!1,dt(Me),Me=-1),Ae=!0;var O=fe;try{t:{for(pt(Z),C=oe(ye);C!==null&&!(C.expirationTime>Z&&Jn());){var J=C.callback;if(typeof J=="function"){C.callback=null,fe=C.priorityLevel;var re=J(C.expirationTime<=Z);if(Z=B.unstable_now(),typeof re=="function"){C.callback=re,pt(Z),se=!0;break t}C===oe(ye)&&b(ye),pt(Z)}else b(ye);C=oe(ye)}if(C!==null)se=!0;else{var m=oe($);m!==null&&Ot(ht,m.startTime-Z),se=!1}}break e}finally{C=null,fe=O,Ae=!1}se=void 0}}finally{se?Kt():$t=!1}}}var Kt;if(typeof xe=="function")Kt=function(){xe(nt)};else if(typeof MessageChannel<"u"){var wn=new MessageChannel,Pt=wn.port2;wn.port1.onmessage=nt,Kt=function(){Pt.postMessage(null)}}else Kt=function(){Te(nt,0)};function Ot(Z,se){Me=Te(function(){Z(B.unstable_now())},se)}B.unstable_IdlePriority=5,B.unstable_ImmediatePriority=1,B.unstable_LowPriority=4,B.unstable_NormalPriority=3,B.unstable_Profiling=null,B.unstable_UserBlockingPriority=2,B.unstable_cancelCallback=function(Z){Z.callback=null},B.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_t=0<Z?Math.floor(1e3/Z):5},B.unstable_getCurrentPriorityLevel=function(){return fe},B.unstable_next=function(Z){switch(fe){case 1:case 2:case 3:var se=3;break;default:se=fe}var O=fe;fe=se;try{return Z()}finally{fe=O}},B.unstable_requestPaint=function(){ct=!0},B.unstable_runWithPriority=function(Z,se){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var O=fe;fe=Z;try{return se()}finally{fe=O}},B.unstable_scheduleCallback=function(Z,se,O){var J=B.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?J+O:J):O=J,Z){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=O+re,Z={id:ve++,callback:se,priorityLevel:Z,startTime:O,expirationTime:re,sortIndex:-1},O>J?(Z.sortIndex=O,D($,Z),oe(ye)===null&&Z===oe($)&&(Se?(dt(Me),Me=-1):Se=!0,Ot(ht,O-J))):(Z.sortIndex=re,D(ye,Z),ae||Ae||(ae=!0,$t||($t=!0,Kt()))),Z},B.unstable_shouldYield=Jn,B.unstable_wrapCallback=function(Z){var se=fe;return function(){var O=fe;fe=se;try{return Z.apply(this,arguments)}finally{fe=O}}}})(Pu)),Pu}var Gp;function v0(){return Gp||(Gp=1,Ku.exports=b0()),Ku.exports}var Wu={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function S0(){if(Ip)return Fn;Ip=1;var B=Ju();function D(ye){var $="https://react.dev/errors/"+ye;if(1<arguments.length){$+="?args[]="+encodeURIComponent(arguments[1]);for(var ve=2;ve<arguments.length;ve++)$+="&args[]="+encodeURIComponent(arguments[ve])}return"Minified React error #"+ye+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function oe(){}var b={d:{f:oe,r:function(){throw Error(D(522))},D:oe,C:oe,L:oe,m:oe,X:oe,S:oe,M:oe},p:0,findDOMNode:null},ie=Symbol.for("react.portal");function he(ye,$,ve){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:C==null?null:""+C,children:ye,containerInfo:$,implementation:ve}}var pe=B.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ke(ye,$){if(ye==="font")return"";if(typeof $=="string")return $==="use-credentials"?$:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,Fn.createPortal=function(ye,$){var ve=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11)throw Error(D(299));return he(ye,$,null,ve)},Fn.flushSync=function(ye){var $=pe.T,ve=b.p;try{if(pe.T=null,b.p=2,ye)return ye()}finally{pe.T=$,b.p=ve,b.d.f()}},Fn.preconnect=function(ye,$){typeof ye=="string"&&($?($=$.crossOrigin,$=typeof $=="string"?$==="use-credentials"?$:"":void 0):$=null,b.d.C(ye,$))},Fn.prefetchDNS=function(ye){typeof ye=="string"&&b.d.D(ye)},Fn.preinit=function(ye,$){if(typeof ye=="string"&&$&&typeof $.as=="string"){var ve=$.as,C=Ke(ve,$.crossOrigin),fe=typeof $.integrity=="string"?$.integrity:void 0,Ae=typeof $.fetchPriority=="string"?$.fetchPriority:void 0;ve==="style"?b.d.S(ye,typeof $.precedence=="string"?$.precedence:void 0,{crossOrigin:C,integrity:fe,fetchPriority:Ae}):ve==="script"&&b.d.X(ye,{crossOrigin:C,integrity:fe,fetchPriority:Ae,nonce:typeof $.nonce=="string"?$.nonce:void 0})}},Fn.preinitModule=function(ye,$){if(typeof ye=="string")if(typeof $=="object"&&$!==null){if($.as==null||$.as==="script"){var ve=Ke($.as,$.crossOrigin);b.d.M(ye,{crossOrigin:ve,integrity:typeof $.integrity=="string"?$.integrity:void 0,nonce:typeof $.nonce=="string"?$.nonce:void 0})}}else $==null&&b.d.M(ye)},Fn.preload=function(ye,$){if(typeof ye=="string"&&typeof $=="object"&&$!==null&&typeof $.as=="string"){var ve=$.as,C=Ke(ve,$.crossOrigin);b.d.L(ye,ve,{crossOrigin:C,integrity:typeof $.integrity=="string"?$.integrity:void 0,nonce:typeof $.nonce=="string"?$.nonce:void 0,type:typeof $.type=="string"?$.type:void 0,fetchPriority:typeof $.fetchPriority=="string"?$.fetchPriority:void 0,referrerPolicy:typeof $.referrerPolicy=="string"?$.referrerPolicy:void 0,imageSrcSet:typeof $.imageSrcSet=="string"?$.imageSrcSet:void 0,imageSizes:typeof $.imageSizes=="string"?$.imageSizes:void 0,media:typeof $.media=="string"?$.media:void 0})}},Fn.preloadModule=function(ye,$){if(typeof ye=="string")if($){var ve=Ke($.as,$.crossOrigin);b.d.m(ye,{as:typeof $.as=="string"&&$.as!=="script"?$.as:void 0,crossOrigin:ve,integrity:typeof $.integrity=="string"?$.integrity:void 0})}else b.d.m(ye)},Fn.requestFormReset=function(ye){b.d.r(ye)},Fn.unstable_batchedUpdates=function(ye,$){return ye($)},Fn.useFormState=function(ye,$,ve){return pe.H.useFormState(ye,$,ve)},Fn.useFormStatus=function(){return pe.H.useHostTransitionStatus()},Fn.version="19.2.0",Fn}var qp;function C0(){if(qp)return Wu.exports;qp=1;function B(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B)}catch(D){console.error(D)}}return B(),Wu.exports=S0(),Wu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function w0(){if($p)return hc;$p=1;var B=v0(),D=Ju(),oe=C0();function b(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ie(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function he(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function pe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ke(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ye(e){if(he(e)!==e)throw Error(b(188))}function $(e){var t=e.alternate;if(!t){if(t=he(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return ye(o),e;if(i===l)return ye(o),t;i=i.sibling}throw Error(b(188))}if(n.return!==l.return)n=o,l=i;else{for(var r=!1,p=o.child;p;){if(p===n){r=!0,n=o,l=i;break}if(p===l){r=!0,l=o,n=i;break}p=p.sibling}if(!r){for(p=i.child;p;){if(p===n){r=!0,n=i,l=o;break}if(p===l){r=!0,l=i,n=o;break}p=p.sibling}if(!r)throw Error(b(189))}}if(n.alternate!==l)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function ve(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=ve(e),t!==null)return t;e=e.sibling}return null}var C=Object.assign,fe=Symbol.for("react.element"),Ae=Symbol.for("react.transitional.element"),ae=Symbol.for("react.portal"),Se=Symbol.for("react.fragment"),ct=Symbol.for("react.strict_mode"),Te=Symbol.for("react.profiler"),dt=Symbol.for("react.consumer"),xe=Symbol.for("react.context"),pt=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),$t=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),_t=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),Jn=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function Kt(e){return e===null||typeof e!="object"?null:(e=nt&&e[nt]||e["@@iterator"],typeof e=="function"?e:null)}var wn=Symbol.for("react.client.reference");function Pt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===wn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Se:return"Fragment";case Te:return"Profiler";case ct:return"StrictMode";case ht:return"Suspense";case $t:return"SuspenseList";case z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ae:return"Portal";case xe:return e.displayName||"Context";case dt:return(e._context.displayName||"Context")+".Consumer";case pt:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Me:return t=e.displayName||null,t!==null?t:Pt(e.type)||"Memo";case _t:t=e._payload,e=e._init;try{return Pt(e(t))}catch{}}return null}var Ot=Array.isArray,Z=D.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=oe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},J=[],re=-1;function m(e){return{current:e}}function j(e){0>re||(e.current=J[re],J[re]=null,re--)}function P(e,t){re++,J[re]=e.current,e.current=t}var ue=m(null),Ce=m(null),Ne=m(null),me=m(null);function Xe(e,t){switch(P(Ne,t),P(Ce,e),P(ue,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=sp(t),e=cp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(ue),P(ue,e)}function lt(){j(ue),j(Ce),j(Ne)}function Tn(e){e.memoizedState!==null&&P(me,e);var t=ue.current,n=cp(t,e.type);t!==n&&(P(Ce,e),P(ue,n))}function at(e){Ce.current===e&&(j(ue),j(Ce)),me.current===e&&(j(me),rc._currentValue=O)}var nn,De;function wt(e){if(nn===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nn=t&&t[1]||"",De=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nn+e+De}var pa=!1;function po(e,t){if(!e||pa)return"";pa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(X){var L=X}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(X){L=X}e.call(ee.prototype)}}else{try{throw Error()}catch(X){L=X}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(X){if(X&&L&&typeof X.stack=="string")return[X.stack,L.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=l.DetermineComponentFrameRoot(),r=i[0],p=i[1];if(r&&p){var v=r.split(`
`),_=p.split(`
`);for(o=l=0;l<v.length&&!v[l].includes("DetermineComponentFrameRoot");)l++;for(;o<_.length&&!_[o].includes("DetermineComponentFrameRoot");)o++;if(l===v.length||o===_.length)for(l=v.length-1,o=_.length-1;1<=l&&0<=o&&v[l]!==_[o];)o--;for(;1<=l&&0<=o;l--,o--)if(v[l]!==_[o]){if(l!==1||o!==1)do if(l--,o--,0>o||v[l]!==_[o]){var Q=`
`+v[l].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=l&&0<=o);break}}}finally{pa=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?wt(n):""}function Mt(e,t){switch(e.tag){case 26:case 27:case 5:return wt(e.type);case 16:return wt("Lazy");case 13:return e.child!==t&&t!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return po(e.type,!1);case 11:return po(e.type.render,!1);case 1:return po(e.type,!0);case 31:return wt("Activity");default:return""}}function Hn(e){try{var t="",n=null;do t+=Mt(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Xl=Object.prototype.hasOwnProperty,Ha=B.unstable_scheduleCallback,Ge=B.unstable_cancelCallback,zi=B.unstable_shouldYield,yc=B.unstable_requestPaint,$n=B.unstable_now,Ei=B.unstable_getCurrentPriorityLevel,ji=B.unstable_ImmediatePriority,il=B.unstable_UserBlockingPriority,ha=B.unstable_NormalPriority,Wo=B.unstable_LowPriority,Ai=B.unstable_IdlePriority,ta=B.log,gs=B.unstable_setDisableYieldValue,Ya=null,Dn=null;function $e(e){if(typeof ta=="function"&&gs(e),Dn&&typeof Dn.setStrictMode=="function")try{Dn.setStrictMode(Ya,e)}catch{}}var Bt=Math.clz32?Math.clz32:mc,gc=Math.log,Tr=Math.LN2;function mc(e){return e>>>=0,e===0?32:31-(gc(e)/Tr|0)|0}var Fo=256,Ue=262144,Vl=4194304;function Ie(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function el(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,i=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var p=l&134217727;return p!==0?(l=p&~i,l!==0?o=Ie(l):(r&=p,r!==0?o=Ie(r):n||(n=p&~e,n!==0&&(o=Ie(n))))):(p=l&~i,p!==0?o=Ie(p):r!==0?o=Ie(r):n||(n=l&~e,n!==0&&(o=Ie(n)))),o===0?0:t!==0&&t!==o&&(t&i)===0&&(i=o&-o,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:o}function be(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ho(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ms(){var e=Vl;return Vl<<=1,(Vl&62914560)===0&&(Vl=4194304),e}function na(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Sl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jo(e,t,n,l,o,i){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var p=e.entanglements,v=e.expirationTimes,_=e.hiddenUpdates;for(n=r&~n;0<n;){var Q=31-Bt(n),ee=1<<Q;p[Q]=0,v[Q]=-1;var L=_[Q];if(L!==null)for(_[Q]=null,Q=0;Q<L.length;Q++){var X=L[Q];X!==null&&(X.lane&=-536870913)}n&=~ee}l!==0&&xs(e,l,0),i!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=i&~(r&~t))}function xs(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Bt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Mi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Bt(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function bs(e,t){var n=t&-t;return n=(n&42)!==0?1:ki(n),(n&(e.suspendedLanes|t))!==0?0:n}function ki(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ei(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:Dp(e.type))}function zn(e,t){var n=se.p;try{return se.p=e,t()}finally{se.p=n}}var Gl=Math.random().toString(36).slice(2),kt="__reactFiber$"+Gl,Yn="__reactProps$"+Gl,en="__reactContainer$"+Gl,ti="__reactEvents$"+Gl,We="__reactListeners$"+Gl,vs="__reactHandles$"+Gl,Rn="__reactResources$"+Gl,ya="__reactMarker$"+Gl;function Vt(e){delete e[kt],delete e[Yn],delete e[ti],delete e[We],delete e[vs]}function ga(e){var t=e[kt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[en]||n[kt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yp(e);e!==null;){if(n=e[kt])return n;e=yp(e)}return t}e=n,n=e.parentNode}return null}function Cl(e){if(e=e[kt]||e[en]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Il(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(b(33))}function Xa(e){var t=e[Rn];return t||(t=e[Rn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function gn(e){e[ya]=!0}var zr=new Set,xc={};function ma(e,t){yo(e,t),yo(e+"Capture",t)}function yo(e,t){for(xc[e]=t,e=0;e<t.length;e++)zr.add(t[e])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vc={},Xn={};function ni(e){return Xl.call(Xn,e)?!0:Xl.call(vc,e)?!1:bc.test(e)?Xn[e]=!0:(vc[e]=!0,!1)}function Di(e,t,n){if(ni(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function go(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ve(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ot(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function En(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,i=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(r){n=""+r,i.call(this,r)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qe(e){if(!e._valueTracker){var t=ot(e)?"checked":"value";e._valueTracker=En(e,t,""+e[t])}}function ln(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=ot(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Fe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var un=/[\n"\\]/g;function He(e){return e.replace(un,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function an(e,t,n,l,o,i,r,p){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?jn(e,r,At(t)):n!=null?jn(e,r,At(n)):l!=null&&e.removeAttribute("value"),o==null&&i!=null&&(e.defaultChecked=!!i),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+At(p):e.removeAttribute("name")}function ze(e,t,n,l,o,i,r,p){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){qe(e);return}n=n!=null?""+At(n):"",t=t!=null?""+At(t):n,p||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=p?e.checked:!!l,e.defaultChecked=!!l,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),qe(e)}function jn(e,t,n){t==="number"&&Fe(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Tt(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+At(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function la(e,t,n){if(t!=null&&(t=""+At(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+At(n):""}function wl(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(b(92));if(Ot(l)){if(1<l.length)throw Error(b(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=At(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),qe(e)}function xa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ri=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ss(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Ri.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function li(e,t,n){if(t!=null&&typeof t!="object")throw Error(b(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&Ss(e,o,l)}else for(var i in t)t.hasOwnProperty(i)&&Ss(e,i,t[i])}function Ni(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ai=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mo(e){return ai.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Tl(){}var _i=null;function Oi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Va=null,Ga=null;function Cs(e){var t=Cl(e);if(t&&(e=t.stateNode)){var n=e[Yn]||null;e:switch(e=t.stateNode,t.type){case"input":if(an(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+He(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[Yn]||null;if(!o)throw Error(b(90));an(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&ln(l)}break e;case"textarea":la(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Tt(e,!!n.multiple,t,!1)}}}var Ia=!1;function xo(e,t,n){if(Ia)return e(t,n);Ia=!0;try{var l=e(t);return l}finally{if(Ia=!1,(Va!==null||Ga!==null)&&(er(),Va&&(t=Va,e=Ga,Ga=Va=null,Cs(t),e)))for(t=0;t<e.length;t++)Cs(e[t])}}function bo(e,t){var n=e.stateNode;if(n===null)return null;var l=n[Yn]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vo=!1;if(Zn)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){vo=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{vo=!1}var nl=null,oi=null,va=null;function So(){if(va)return va;var e,t=oi,n=t.length,l,o="value"in nl?nl.value:nl.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var r=n-e;for(l=1;l<=r&&t[n-l]===o[i-l];l++);return va=o.slice(e,1<l?1-l:void 0)}function Sa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qa(){return!0}function aa(){return!1}function Qn(e){function t(n,l,o,i,r){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=i,this.target=r,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(i):i[p]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qa:aa,this.isPropagationStopped=aa,this}return C(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qa)},persist:function(){},isPersistent:qa}),t}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_e=Qn(Kn),zl=C({},Kn,{view:0,detail:0}),Ca=Qn(zl),Co,$a,cl,Bi=C({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:El,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cl&&(cl&&e.type==="mousemove"?(Co=e.screenX-cl.screenX,$a=e.screenY-cl.screenY):$a=Co=0,cl=e),Co)},movementY:function(e){return"movementY"in e?e.movementY:$a}}),wo=Qn(Bi),ws=C({},Bi,{dataTransfer:0}),Ts=Qn(ws),zs=C({},zl,{relatedTarget:0}),To=Qn(zs),Es=C({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),ii=Qn(Es),Sc=C({},Kn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gt=Qn(Sc),si=C({},Kn,{data:0}),Cc=Qn(si),It={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ui={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rl(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ui[e])?!!t[e]:!1}function El(){return rl}var Za=C({},zl,{key:function(e){if(e.key){var t=It[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ci[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:El,charCode:function(e){return e.type==="keypress"?Sa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qa=Qn(Za),wa=C({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Li=Qn(wa),Ta=C({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:El}),zo=Qn(Ta),Yt=C({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ql=Qn(Yt),js=C({},Bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Eo=Qn(js),ul=C({},Kn,{newState:0,oldState:0}),ri=Qn(ul),ui=[9,13,27,32],mn=Zn&&"CompositionEvent"in window,Pn=null;Zn&&"documentMode"in document&&(Pn=document.documentMode);var Er=Zn&&"TextEvent"in window&&!Pn,jo=Zn&&(!mn||Pn&&8<Pn&&11>=Pn),As=" ",Ms=!1;function Hi(e,t){switch(e){case"keyup":return ui.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ks(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ka=!1;function wc(e,t){switch(e){case"compositionend":return ks(t);case"keypress":return t.which!==32?null:(Ms=!0,As);case"textInput":return e=t.data,e===As&&Ms?null:e;default:return null}}function Yi(e,t){if(Ka)return e==="compositionend"||!mn&&Hi(e,t)?(e=So(),va=oi=nl=null,Ka=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jo&&t.locale!=="ko"?null:t.data;default:return null}}var fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fi[e.type]:t==="textarea"}function Ao(e,t,n,l){Va?Ga?Ga.push(l):Ga=[l]:Va=l,t=sr(t,"onChange"),0<t.length&&(n=new _e("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Nn=null,Mo=null;function $l(e){tp(e,0)}function pi(e){var t=Il(e);if(ln(t))return e}function jl(e,t){if(e==="change")return t}var Ds=!1;if(Zn){var za;if(Zn){var Xi="oninput"in document;if(!Xi){var Pa=document.createElement("div");Pa.setAttribute("oninput","return;"),Xi=typeof Pa.oninput=="function"}za=Xi}else za=!1;Ds=za&&(!document.documentMode||9<document.documentMode)}function Rs(){Nn&&(Nn.detachEvent("onpropertychange",oa),Mo=Nn=null)}function oa(e){if(e.propertyName==="value"&&pi(Mo)){var t=[];Ao(t,Mo,e,Oi(e)),xo($l,t)}}function Ns(e,t,n){e==="focusin"?(Rs(),Nn=t,Mo=n,Nn.attachEvent("onpropertychange",oa)):e==="focusout"&&Rs()}function Ea(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pi(Mo)}function _s(e,t){if(e==="click")return pi(t)}function Wa(e,t){if(e==="input"||e==="change")return pi(t)}function Tc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ye=typeof Object.is=="function"?Object.is:Tc;function Vn(e,t){if(Ye(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!Xl.call(t,o)||!Ye(e[o],t[o]))return!1}return!0}function St(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ja(e,t){var n=St(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=St(n)}}function zc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vi(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Fe(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Fe(e.document)}return t}function Os(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hi=Zn&&"documentMode"in document&&11>=document.documentMode,ia=null,ko=null,fl=null,Gi=!1;function yt(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gi||ia==null||ia!==Fe(l)||(l=ia,"selectionStart"in l&&Os(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),fl&&Vn(fl,l)||(fl=l,l=sr(ko,"onSelect"),0<l.length&&(t=new _e("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=ia)))}function _n(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Al={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionrun:_n("Transition","TransitionRun"),transitionstart:_n("Transition","TransitionStart"),transitioncancel:_n("Transition","TransitionCancel"),transitionend:_n("Transition","TransitionEnd")},Aa={},Wt={};Zn&&(Wt=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function Zl(e){if(Aa[e])return Aa[e];if(!Al[e])return e;var t=Al[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wt)return Aa[e]=t[n];return e}var Ii=Zl("animationend"),Fa=Zl("animationiteration"),Bs=Zl("animationstart"),Ml=Zl("transitionrun"),Ec=Zl("transitionstart"),jc=Zl("transitioncancel"),Do=Zl("transitionend"),Ac=new Map,Ro="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ro.push("scrollEnd");function xn(e,t){Ac.set(e,t),ma(t,[e])}var No=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},An=[],On=0,yi=0;function gi(){for(var e=On,t=yi=On=0;t<e;){var n=An[t];An[t++]=null;var l=An[t];An[t++]=null;var o=An[t];An[t++]=null;var i=An[t];if(An[t++]=null,l!==null&&o!==null){var r=l.pending;r===null?o.next=o:(o.next=r.next,r.next=o),l.pending=o}i!==0&&Mc(n,o,i)}}function Ja(e,t,n,l){An[On++]=e,An[On++]=t,An[On++]=n,An[On++]=l,yi|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function kl(e,t,n,l){return Ja(e,t,n,l),mi(e)}function Ma(e,t){return Ja(e,null,null,t),mi(e)}function Mc(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,i=e.return;i!==null;)i.childLanes|=n,l=i.alternate,l!==null&&(l.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(o=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,o&&t!==null&&(o=31-Bt(n),e=i.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),i):null}function mi(e){if(50<nc)throw nc=0,gu=null,Error(b(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Dl={};function kc(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ee(e,t,n,l){return new kc(e,t,n,l)}function fn(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dl(e,t){var n=e.alternate;return n===null?(n=Ee(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Us(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function sa(e,t,n,l,o,i){var r=0;if(l=e,typeof e=="function")fn(e)&&(r=1);else if(typeof e=="string")r=l0(e,n,ue.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case z:return e=Ee(31,n,t,o),e.elementType=z,e.lanes=i,e;case Se:return ka(n.children,o,i,t);case ct:r=8,o|=24;break;case Te:return e=Ee(12,n,t,o|2),e.elementType=Te,e.lanes=i,e;case ht:return e=Ee(13,n,t,o),e.elementType=ht,e.lanes=i,e;case $t:return e=Ee(19,n,t,o),e.elementType=$t,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xe:r=10;break e;case dt:r=9;break e;case pt:r=11;break e;case Me:r=14;break e;case _t:r=16,l=null;break e}r=29,n=Error(b(130,e===null?"null":typeof e,"")),l=null}return t=Ee(r,n,t,o),t.elementType=e,t.type=l,t.lanes=i,t}function ka(e,t,n,l){return e=Ee(7,e,l,t),e.lanes=n,e}function Ql(e,t,n){return e=Ee(6,e,null,t),e.lanes=n,e}function qi(e){var t=Ee(18,null,null,0);return t.stateNode=e,t}function $i(e,t,n){return t=Ee(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Dc=new WeakMap;function pl(e,t){if(typeof e=="object"&&e!==null){var n=Dc.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Hn(t)},Dc.set(e,t),t)}return{value:e,source:t,stack:Hn(t)}}var _o=[],ca=0,xi=null,bi=0,ll=[],Bn=0,Da=null,Gn=1,Kl="";function Rl(e,t){_o[ca++]=bi,_o[ca++]=xi,xi=e,bi=t}function Zi(e,t,n){ll[Bn++]=Gn,ll[Bn++]=Kl,ll[Bn++]=Da,Da=e;var l=Gn;e=Kl;var o=32-Bt(l)-1;l&=~(1<<o),n+=1;var i=32-Bt(t)+o;if(30<i){var r=o-o%5;i=(l&(1<<r)-1).toString(32),l>>=r,o-=r,Gn=1<<32-Bt(t)+o|n<<o|l,Kl=i+e}else Gn=1<<i|n<<o|l,Kl=e}function Qi(e){e.return!==null&&(Rl(e,1),Zi(e,1,0))}function Ls(e){for(;e===xi;)xi=_o[--ca],_o[ca]=null,bi=_o[--ca],_o[ca]=null;for(;e===Da;)Da=ll[--Bn],ll[Bn]=null,Kl=ll[--Bn],ll[Bn]=null,Gn=ll[--Bn],ll[Bn]=null}function Hs(e,t){ll[Bn++]=Gn,ll[Bn++]=Kl,ll[Bn++]=Da,Gn=t.id,Kl=t.overflow,Da=e}var Mn=null,Dt=null,Je=!1,Wn=null,hl=!1,Ki=Error(b(519));function Nl(e){var t=Error(b(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(pl(t,e)),Ki}function ra(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[kt]=e,t[Yn]=l,n){case"dialog":ft("cancel",t),ft("close",t);break;case"iframe":case"object":case"embed":ft("load",t);break;case"video":case"audio":for(n=0;n<ac.length;n++)ft(ac[n],t);break;case"source":ft("error",t);break;case"img":case"image":case"link":ft("error",t),ft("load",t);break;case"details":ft("toggle",t);break;case"input":ft("invalid",t),ze(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ft("invalid",t);break;case"textarea":ft("invalid",t),wl(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||op(t.textContent,n)?(l.popover!=null&&(ft("beforetoggle",t),ft("toggle",t)),l.onScroll!=null&&ft("scroll",t),l.onScrollEnd!=null&&ft("scrollend",t),l.onClick!=null&&(t.onclick=Tl),t=!0):t=!1,t||Nl(e,!0)}function Ys(e){for(Mn=e.return;Mn;)switch(Mn.tag){case 5:case 31:case 13:hl=!1;return;case 27:case 3:hl=!0;return;default:Mn=Mn.return}}function _l(e){if(e!==Mn)return!1;if(!Je)return Ys(e),Je=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Du(e.type,e.memoizedProps)),n=!n),n&&Dt&&Nl(e),Ys(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));Dt=hp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));Dt=hp(e)}else t===27?(t=Dt,qo(e.type)?(e=Bu,Bu=null,Dt=e):Dt=t):Dt=Mn?Jl(e.stateNode.nextSibling):null;return!0}function al(){Dt=Mn=null,Je=!1}function Pi(){var e=Wn;return e!==null&&(bl===null?bl=e:bl.push.apply(bl,e),Wn=null),e}function Oo(e){Wn===null?Wn=[e]:Wn.push(e)}var Un=m(null),yl=null,Ol=null;function Pl(e,t,n){P(Un,t._currentValue),t._currentValue=n}function ua(e){e._currentValue=Un.current,j(Un)}function eo(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Xs(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var i=o.dependencies;if(i!==null){var r=o.child;i=i.firstContext;e:for(;i!==null;){var p=i;i=o;for(var v=0;v<t.length;v++)if(p.context===t[v]){i.lanes|=n,p=i.alternate,p!==null&&(p.lanes|=n),eo(i.return,n,e),l||(r=null);break e}i=p.next}}else if(o.tag===18){if(r=o.return,r===null)throw Error(b(341));r.lanes|=n,i=r.alternate,i!==null&&(i.lanes|=n),eo(r,n,e),r=null}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===e){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}}function Wl(e,t,n,l){e=null;for(var o=t,i=!1;o!==null;){if(!i){if((o.flags&524288)!==0)i=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var r=o.alternate;if(r===null)throw Error(b(387));if(r=r.memoizedProps,r!==null){var p=o.type;Ye(o.pendingProps.value,r.value)||(e!==null?e.push(p):e=[p])}}else if(o===me.current){if(r=o.alternate,r===null)throw Error(b(387));r.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(rc):e=[rc])}o=o.return}e!==null&&Xs(t,e,n,l),t.flags|=262144}function Wi(e){for(e=e.firstContext;e!==null;){if(!Ye(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ra(e){yl=e,Ol=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function dn(e){return Rc(yl,e)}function Fi(e,t){return yl===null&&Ra(e),Rc(e,t)}function Rc(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ol===null){if(e===null)throw Error(b(308));Ol=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ol=Ol.next=t;return n}var Nc=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Vs=B.unstable_scheduleCallback,Gs=B.unstable_NormalPriority,on={$$typeof:xe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ji(){return{controller:new Nc,data:new Map,refCount:0}}function Na(e){e.refCount--,e.refCount===0&&Vs(Gs,function(){e.controller.abort()})}var Fl=null,Bo=0,_a=0,Oa=null;function jr(e,t){if(Fl===null){var n=Fl=[];Bo=0,_a=Cu(),Oa={status:"pending",value:void 0,then:function(l){n.push(l)}}}return Bo++,t.then(ce,ce),t}function ce(){if(--Bo===0&&Fl!==null){Oa!==null&&(Oa.status="fulfilled");var e=Fl;Fl=null,_a=0,Oa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function a(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var s=Z.S;Z.S=function(e,t){Md=$n(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&jr(e,t),s!==null&&s(e,t)};var u=m(null);function d(){var e=u.current;return e!==null?e:Xt.pooledCache}function g(e,t){t===null?P(u,u.current):P(u,t.pool)}function y(){var e=d();return e===null?null:{parent:on._currentValue,pool:e}}var f=Error(b(460)),h=Error(b(474)),S=Error(b(542)),x={then:function(){}};function R(e){return e=e.status,e==="fulfilled"||e==="rejected"}function H(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Tl,Tl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,V(e),e;default:if(typeof t.status=="string")t.then(Tl,Tl);else{if(e=Xt,e!==null&&100<e.shellSuspendCounter)throw Error(b(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,V(e),e}throw G=t,f}}function le(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(G=n,f):n}}var G=null;function I(){if(G===null)throw Error(b(459));var e=G;return G=null,e}function V(e){if(e===f||e===S)throw Error(b(483))}var U=null,te=0;function ne(e){var t=te;return te+=1,U===null&&(U=[]),H(U,e,t)}function k(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function M(e,t){throw t.$$typeof===fe?Error(b(525)):(e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function K(e){function t(A,T){if(e){var N=A.deletions;N===null?(A.deletions=[T],A.flags|=16):N.push(T)}}function n(A,T){if(!e)return null;for(;T!==null;)t(A,T),T=T.sibling;return null}function l(A){for(var T=new Map;A!==null;)A.key!==null?T.set(A.key,A):T.set(A.index,A),A=A.sibling;return T}function o(A,T){return A=dl(A,T),A.index=0,A.sibling=null,A}function i(A,T,N){return A.index=N,e?(N=A.alternate,N!==null?(N=N.index,N<T?(A.flags|=67108866,T):N):(A.flags|=67108866,T)):(A.flags|=1048576,T)}function r(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function p(A,T,N,F){return T===null||T.tag!==6?(T=Ql(N,A.mode,F),T.return=A,T):(T=o(T,N),T.return=A,T)}function v(A,T,N,F){var Be=N.type;return Be===Se?Q(A,T,N.props.children,F,N.key):T!==null&&(T.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===_t&&le(Be)===T.type)?(T=o(T,N.props),k(T,N),T.return=A,T):(T=sa(N.type,N.key,N.props,null,A.mode,F),k(T,N),T.return=A,T)}function _(A,T,N,F){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=$i(N,A.mode,F),T.return=A,T):(T=o(T,N.children||[]),T.return=A,T)}function Q(A,T,N,F,Be){return T===null||T.tag!==7?(T=ka(N,A.mode,F,Be),T.return=A,T):(T=o(T,N),T.return=A,T)}function ee(A,T,N){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Ql(""+T,A.mode,N),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ae:return N=sa(T.type,T.key,T.props,null,A.mode,N),k(N,T),N.return=A,N;case ae:return T=$i(T,A.mode,N),T.return=A,T;case _t:return T=le(T),ee(A,T,N)}if(Ot(T)||Kt(T))return T=ka(T,A.mode,N,null),T.return=A,T;if(typeof T.then=="function")return ee(A,ne(T),N);if(T.$$typeof===xe)return ee(A,Fi(A,T),N);M(A,T)}return null}function L(A,T,N,F){var Be=T!==null?T.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return Be!==null?null:p(A,T,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ae:return N.key===Be?v(A,T,N,F):null;case ae:return N.key===Be?_(A,T,N,F):null;case _t:return N=le(N),L(A,T,N,F)}if(Ot(N)||Kt(N))return Be!==null?null:Q(A,T,N,F,null);if(typeof N.then=="function")return L(A,T,ne(N),F);if(N.$$typeof===xe)return L(A,T,Fi(A,N),F);M(A,N)}return null}function X(A,T,N,F,Be){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return A=A.get(N)||null,p(T,A,""+F,Be);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Ae:return A=A.get(F.key===null?N:F.key)||null,v(T,A,F,Be);case ae:return A=A.get(F.key===null?N:F.key)||null,_(T,A,F,Be);case _t:return F=le(F),X(A,T,N,F,Be)}if(Ot(F)||Kt(F))return A=A.get(N)||null,Q(T,A,F,Be,null);if(typeof F.then=="function")return X(A,T,N,ne(F),Be);if(F.$$typeof===xe)return X(A,T,N,Fi(T,F),Be);M(T,F)}return null}function we(A,T,N,F){for(var Be=null,zt=null,ke=T,et=T=0,xt=null;ke!==null&&et<N.length;et++){ke.index>et?(xt=ke,ke=null):xt=ke.sibling;var Et=L(A,ke,N[et],F);if(Et===null){ke===null&&(ke=xt);break}e&&ke&&Et.alternate===null&&t(A,ke),T=i(Et,T,et),zt===null?Be=Et:zt.sibling=Et,zt=Et,ke=xt}if(et===N.length)return n(A,ke),Je&&Rl(A,et),Be;if(ke===null){for(;et<N.length;et++)ke=ee(A,N[et],F),ke!==null&&(T=i(ke,T,et),zt===null?Be=ke:zt.sibling=ke,zt=ke);return Je&&Rl(A,et),Be}for(ke=l(ke);et<N.length;et++)xt=X(ke,A,et,N[et],F),xt!==null&&(e&&xt.alternate!==null&&ke.delete(xt.key===null?et:xt.key),T=i(xt,T,et),zt===null?Be=xt:zt.sibling=xt,zt=xt);return e&&ke.forEach(function(Po){return t(A,Po)}),Je&&Rl(A,et),Be}function Le(A,T,N,F){if(N==null)throw Error(b(151));for(var Be=null,zt=null,ke=T,et=T=0,xt=null,Et=N.next();ke!==null&&!Et.done;et++,Et=N.next()){ke.index>et?(xt=ke,ke=null):xt=ke.sibling;var Po=L(A,ke,Et.value,F);if(Po===null){ke===null&&(ke=xt);break}e&&ke&&Po.alternate===null&&t(A,ke),T=i(Po,T,et),zt===null?Be=Po:zt.sibling=Po,zt=Po,ke=xt}if(Et.done)return n(A,ke),Je&&Rl(A,et),Be;if(ke===null){for(;!Et.done;et++,Et=N.next())Et=ee(A,Et.value,F),Et!==null&&(T=i(Et,T,et),zt===null?Be=Et:zt.sibling=Et,zt=Et);return Je&&Rl(A,et),Be}for(ke=l(ke);!Et.done;et++,Et=N.next())Et=X(ke,A,et,Et.value,F),Et!==null&&(e&&Et.alternate!==null&&ke.delete(Et.key===null?et:Et.key),T=i(Et,T,et),zt===null?Be=Et:zt.sibling=Et,zt=Et);return e&&ke.forEach(function(h0){return t(A,h0)}),Je&&Rl(A,et),Be}function Ht(A,T,N,F){if(typeof N=="object"&&N!==null&&N.type===Se&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ae:e:{for(var Be=N.key;T!==null;){if(T.key===Be){if(Be=N.type,Be===Se){if(T.tag===7){n(A,T.sibling),F=o(T,N.props.children),F.return=A,A=F;break e}}else if(T.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===_t&&le(Be)===T.type){n(A,T.sibling),F=o(T,N.props),k(F,N),F.return=A,A=F;break e}n(A,T);break}else t(A,T);T=T.sibling}N.type===Se?(F=ka(N.props.children,A.mode,F,N.key),F.return=A,A=F):(F=sa(N.type,N.key,N.props,null,A.mode,F),k(F,N),F.return=A,A=F)}return r(A);case ae:e:{for(Be=N.key;T!==null;){if(T.key===Be)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){n(A,T.sibling),F=o(T,N.children||[]),F.return=A,A=F;break e}else{n(A,T);break}else t(A,T);T=T.sibling}F=$i(N,A.mode,F),F.return=A,A=F}return r(A);case _t:return N=le(N),Ht(A,T,N,F)}if(Ot(N))return we(A,T,N,F);if(Kt(N)){if(Be=Kt(N),typeof Be!="function")throw Error(b(150));return N=Be.call(N),Le(A,T,N,F)}if(typeof N.then=="function")return Ht(A,T,ne(N),F);if(N.$$typeof===xe)return Ht(A,T,Fi(A,N),F);M(A,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,T!==null&&T.tag===6?(n(A,T.sibling),F=o(T,N),F.return=A,A=F):(n(A,T),F=Ql(N,A.mode,F),F.return=A,A=F),r(A)):n(A,T)}return function(A,T,N,F){try{te=0;var Be=Ht(A,T,N,F);return U=null,Be}catch(ke){if(ke===f||ke===S)throw ke;var zt=Ee(29,ke,null,A.mode);return zt.lanes=F,zt.return=A,zt}finally{}}}var E=K(!0),Y=K(!1),q=!1;function W(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function de(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function je(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ge(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(jt&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=mi(e),Mc(e,null,n),t}return Ja(e,l,t,n),mi(e)}function Oe(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Mi(e,n)}}function it(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?o=i=r:i=i.next=r,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var qt=!1;function bt(){if(qt){var e=Oa;if(e!==null)throw e}}function Re(e,t,n,l){qt=!1;var o=e.updateQueue;q=!1;var i=o.firstBaseUpdate,r=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var v=p,_=v.next;v.next=null,r===null?i=_:r.next=_,r=v;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,p=Q.lastBaseUpdate,p!==r&&(p===null?Q.firstBaseUpdate=_:p.next=_,Q.lastBaseUpdate=v))}if(i!==null){var ee=o.baseState;r=0,Q=_=v=null,p=i;do{var L=p.lane&-536870913,X=L!==p.lane;if(X?(mt&L)===L:(l&L)===L){L!==0&&L===_a&&(qt=!0),Q!==null&&(Q=Q.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var we=e,Le=p;L=t;var Ht=n;switch(Le.tag){case 1:if(we=Le.payload,typeof we=="function"){ee=we.call(Ht,ee,L);break e}ee=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Le.payload,L=typeof we=="function"?we.call(Ht,ee,L):we,L==null)break e;ee=C({},ee,L);break e;case 2:q=!0}}L=p.callback,L!==null&&(e.flags|=64,X&&(e.flags|=8192),X=o.callbacks,X===null?o.callbacks=[L]:X.push(L))}else X={lane:L,tag:p.tag,payload:p.payload,callback:p.callback,next:null},Q===null?(_=Q=X,v=ee):Q=Q.next=X,r|=L;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;X=p,p=X.next,X.next=null,o.lastBaseUpdate=X,o.shared.pending=null}}while(!0);Q===null&&(v=ee),o.baseState=v,o.firstBaseUpdate=_,o.lastBaseUpdate=Q,i===null&&(o.shared.lanes=0),Yo|=r,e.lanes=r,e.memoizedState=ee}}function rt(e,t){if(typeof e!="function")throw Error(b(191,e));e.call(t)}function Ct(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)rt(n[e],t)}var st=m(null),vt=m(0);function tn(e,t){e=ro,P(vt,e),P(st,t),ro=e|t.baseLanes}function Ft(){P(vt,ro),P(st,st.current)}function Ze(){ro=vt.current,j(st),j(vt)}var gt=m(null),sn=null;function pn(e){var t=e.alternate;P(hn,hn.current&1),P(gt,e),sn===null&&(t===null||st.current!==null||t.memoizedState!==null)&&(sn=e)}function Ar(e){P(hn,hn.current),P(gt,e),sn===null&&(sn=e)}function nf(e){e.tag===22?(P(hn,hn.current),P(gt,e),sn===null&&(sn=e)):Uo()}function Uo(){P(hn,hn.current),P(gt,gt.current)}function Bl(e){j(gt),sn===e&&(sn=null),j(hn)}var hn=m(0);function _c(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||_u(n)||Ou(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=0,Pe=null,Ut=null,bn=null,Oc=!1,es=!1,vi=!1,Bc=0,Is=0,ts=null,ah=0;function cn(){throw Error(b(321))}function Mr(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ye(e[n],t[n]))return!1;return!0}function kr(e,t,n,l,o,i){return to=i,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z.H=e===null||e.memoizedState===null?Yf:qr,vi=!1,i=n(l,o),vi=!1,es&&(i=af(t,n,l,o)),lf(e),i}function lf(e){Z.H=Zs;var t=Ut!==null&&Ut.next!==null;if(to=0,bn=Ut=Pe=null,Oc=!1,Is=0,ts=null,t)throw Error(b(300));e===null||vn||(e=e.dependencies,e!==null&&Wi(e)&&(vn=!0))}function af(e,t,n,l){Pe=e;var o=0;do{if(es&&(ts=null),Is=0,es=!1,25<=o)throw Error(b(301));if(o+=1,bn=Ut=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}Z.H=Xf,i=t(n,l)}while(es);return i}function oh(){var e=Z.H,t=e.useState()[0];return t=typeof t.then=="function"?qs(t):t,e=e.useState()[0],(Ut!==null?Ut.memoizedState:null)!==e&&(Pe.flags|=1024),t}function Dr(){var e=Bc!==0;return Bc=0,e}function Rr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Nr(e){if(Oc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Oc=!1}to=0,bn=Ut=Pe=null,es=!1,Is=Bc=0,ts=null}function ol(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Pe.memoizedState=bn=e:bn=bn.next=e,bn}function yn(){if(Ut===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var t=bn===null?Pe.memoizedState:bn.next;if(t!==null)bn=t,Ut=e;else{if(e===null)throw Pe.alternate===null?Error(b(467)):Error(b(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},bn===null?Pe.memoizedState=bn=e:bn=bn.next=e}return bn}function Uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qs(e){var t=Is;return Is+=1,ts===null&&(ts=[]),e=H(ts,e,t),t=Pe,(bn===null?t.memoizedState:bn.next)===null&&(t=t.alternate,Z.H=t===null||t.memoizedState===null?Yf:qr),e}function Lc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qs(e);if(e.$$typeof===xe)return dn(e)}throw Error(b(438,String(e)))}function _r(e){var t=null,n=Pe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=Pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Uc(),Pe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=Jn;return t.index++,n}function no(e,t){return typeof t=="function"?t(e):t}function Hc(e){var t=yn();return Or(t,Ut,e)}function Or(e,t,n){var l=e.queue;if(l===null)throw Error(b(311));l.lastRenderedReducer=n;var o=e.baseQueue,i=l.pending;if(i!==null){if(o!==null){var r=o.next;o.next=i.next,i.next=r}t.baseQueue=o=i,l.pending=null}if(i=e.baseState,o===null)e.memoizedState=i;else{t=o.next;var p=r=null,v=null,_=t,Q=!1;do{var ee=_.lane&-536870913;if(ee!==_.lane?(mt&ee)===ee:(to&ee)===ee){var L=_.revertLane;if(L===0)v!==null&&(v=v.next={lane:0,revertLane:0,gesture:null,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),ee===_a&&(Q=!0);else if((to&L)===L){_=_.next,L===_a&&(Q=!0);continue}else ee={lane:0,revertLane:_.revertLane,gesture:null,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},v===null?(p=v=ee,r=i):v=v.next=ee,Pe.lanes|=L,Yo|=L;ee=_.action,vi&&n(i,ee),i=_.hasEagerState?_.eagerState:n(i,ee)}else L={lane:ee,revertLane:_.revertLane,gesture:_.gesture,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},v===null?(p=v=L,r=i):v=v.next=L,Pe.lanes|=ee,Yo|=ee;_=_.next}while(_!==null&&_!==t);if(v===null?r=i:v.next=p,!Ye(i,e.memoizedState)&&(vn=!0,Q&&(n=Oa,n!==null)))throw n;e.memoizedState=i,e.baseState=r,e.baseQueue=v,l.lastRenderedState=i}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Br(e){var t=yn(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do i=e(i,r.action),r=r.next;while(r!==o);Ye(i,t.memoizedState)||(vn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,l]}function of(e,t,n){var l=Pe,o=yn(),i=Je;if(i){if(n===void 0)throw Error(b(407));n=n()}else n=t();var r=!Ye((Ut||o).memoizedState,n);if(r&&(o.memoizedState=n,vn=!0),o=o.queue,Hr(rf.bind(null,l,o,e),[e]),o.getSnapshot!==t||r||bn!==null&&bn.memoizedState.tag&1){if(l.flags|=2048,ns(9,{destroy:void 0},cf.bind(null,l,o,n,t),null),Xt===null)throw Error(b(349));i||(to&127)!==0||sf(l,t,n)}return n}function sf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t=Uc(),Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cf(e,t,n,l){t.value=n,t.getSnapshot=l,uf(t)&&ff(e)}function rf(e,t,n){return n(function(){uf(t)&&ff(e)})}function uf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ye(e,n)}catch{return!0}}function ff(e){var t=Ma(e,2);t!==null&&vl(t,e,2)}function Ur(e){var t=ol();if(typeof e=="function"){var n=e;if(e=n(),vi){$e(!0);try{n()}finally{$e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:e},t}function df(e,t,n,l){return e.baseState=n,Or(e,Ut,typeof l=="function"?l:no)}function ih(e,t,n,l,o){if(Vc(e))throw Error(b(485));if(e=t.action,e!==null){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){i.listeners.push(r)}};Z.T!==null?n(!0):i.isTransition=!1,l(i),n=t.pending,n===null?(i.next=t.pending=i,pf(t,i)):(i.next=n.next,t.pending=n.next=i)}}function pf(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var i=Z.T,r={};Z.T=r;try{var p=n(o,l),v=Z.S;v!==null&&v(r,p),hf(e,t,p)}catch(_){Lr(e,t,_)}finally{i!==null&&r.types!==null&&(i.types=r.types),Z.T=i}}else try{i=n(o,l),hf(e,t,i)}catch(_){Lr(e,t,_)}}function hf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){yf(e,t,l)},function(l){return Lr(e,t,l)}):yf(e,t,n)}function yf(e,t,n){t.status="fulfilled",t.value=n,gf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,pf(e,n)))}function Lr(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,gf(t),t=t.next;while(t!==l)}e.action=null}function gf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function mf(e,t){return t}function xf(e,t){if(Je){var n=Xt.formState;if(n!==null){e:{var l=Pe;if(Je){if(Dt){t:{for(var o=Dt,i=hl;o.nodeType!==8;){if(!i){o=null;break t}if(o=Jl(o.nextSibling),o===null){o=null;break t}}i=o.data,o=i==="F!"||i==="F"?o:null}if(o){Dt=Jl(o.nextSibling),l=o.data==="F!";break e}}Nl(l)}l=!1}l&&(t=n[0])}}return n=ol(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:t},n.queue=l,n=Uf.bind(null,Pe,l),l.dispatch=n,l=Ur(!1),i=Ir.bind(null,Pe,!1,l.queue),l=ol(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=ih.bind(null,Pe,o,i,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function bf(e){var t=yn();return vf(t,Ut,e)}function vf(e,t,n){if(t=Or(e,t,mf)[0],e=Hc(no)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=qs(t)}catch(r){throw r===f?S:r}else l=t;t=yn();var o=t.queue,i=o.dispatch;return n!==t.memoizedState&&(Pe.flags|=2048,ns(9,{destroy:void 0},sh.bind(null,o,n),null)),[l,i,e]}function sh(e,t){e.action=t}function Sf(e){var t=yn(),n=Ut;if(n!==null)return vf(t,n,e);yn(),t=t.memoizedState,n=yn();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function ns(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=Pe.updateQueue,t===null&&(t=Uc(),Pe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Cf(){return yn().memoizedState}function Yc(e,t,n,l){var o=ol();Pe.flags|=e,o.memoizedState=ns(1|t,{destroy:void 0},n,l===void 0?null:l)}function Xc(e,t,n,l){var o=yn();l=l===void 0?null:l;var i=o.memoizedState.inst;Ut!==null&&l!==null&&Mr(l,Ut.memoizedState.deps)?o.memoizedState=ns(t,i,n,l):(Pe.flags|=e,o.memoizedState=ns(1|t,i,n,l))}function wf(e,t){Yc(8390656,8,e,t)}function Hr(e,t){Xc(2048,8,e,t)}function ch(e){Pe.flags|=4;var t=Pe.updateQueue;if(t===null)t=Uc(),Pe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Tf(e){var t=yn().memoizedState;return ch({ref:t,nextImpl:e}),function(){if((jt&2)!==0)throw Error(b(440));return t.impl.apply(void 0,arguments)}}function zf(e,t){return Xc(4,2,e,t)}function Ef(e,t){return Xc(4,4,e,t)}function jf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Af(e,t,n){n=n!=null?n.concat([e]):null,Xc(4,4,jf.bind(null,t,e),n)}function Yr(){}function Mf(e,t){var n=yn();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Mr(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function kf(e,t){var n=yn();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Mr(t,l[1]))return l[0];if(l=e(),vi){$e(!0);try{e()}finally{$e(!1)}}return n.memoizedState=[l,t],l}function Xr(e,t,n){return n===void 0||(to&1073741824)!==0&&(mt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Dd(),Pe.lanes|=e,Yo|=e,n)}function Df(e,t,n,l){return Ye(n,t)?n:st.current!==null?(e=Xr(e,n,l),Ye(e,t)||(vn=!0),e):(to&42)===0||(to&1073741824)!==0&&(mt&261930)===0?(vn=!0,e.memoizedState=n):(e=Dd(),Pe.lanes|=e,Yo|=e,t)}function Rf(e,t,n,l,o){var i=se.p;se.p=i!==0&&8>i?i:8;var r=Z.T,p={};Z.T=p,Ir(e,!1,t,n);try{var v=o(),_=Z.S;if(_!==null&&_(p,v),v!==null&&typeof v=="object"&&typeof v.then=="function"){var Q=a(v,l);$s(e,t,Q,Hl(e))}else $s(e,t,l,Hl(e))}catch(ee){$s(e,t,{then:function(){},status:"rejected",reason:ee},Hl())}finally{se.p=i,r!==null&&p.types!==null&&(r.types=p.types),Z.T=r}}function rh(){}function Vr(e,t,n,l){if(e.tag!==5)throw Error(b(476));var o=Nf(e).queue;Rf(e,o,t,O,n===null?rh:function(){return _f(e),n(l)})}function Nf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:O},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function _f(e){var t=Nf(e);t.next===null&&(t=e.alternate.memoizedState),$s(e,t.next.queue,{},Hl())}function Gr(){return dn(rc)}function Of(){return yn().memoizedState}function Bf(){return yn().memoizedState}function uh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Hl();e=je(n);var l=ge(t,e,n);l!==null&&(vl(l,t,n),Oe(l,t,n)),t={cache:Ji()},e.payload=t;return}t=t.return}}function fh(e,t,n){var l=Hl();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Vc(e)?Lf(t,n):(n=kl(e,t,n,l),n!==null&&(vl(n,e,l),Hf(n,t,l)))}function Uf(e,t,n){var l=Hl();$s(e,t,n,l)}function $s(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vc(e))Lf(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var r=t.lastRenderedState,p=i(r,n);if(o.hasEagerState=!0,o.eagerState=p,Ye(p,r))return Ja(e,t,o,0),Xt===null&&gi(),!1}catch{}finally{}if(n=kl(e,t,o,l),n!==null)return vl(n,e,l),Hf(n,t,l),!0}return!1}function Ir(e,t,n,l){if(l={lane:2,revertLane:Cu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Vc(e)){if(t)throw Error(b(479))}else t=kl(e,n,l,2),t!==null&&vl(t,e,2)}function Vc(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function Lf(e,t){es=Oc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Mi(e,n)}}var Zs={readContext:dn,use:Lc,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};Zs.useEffectEvent=cn;var Yf={readContext:dn,use:Lc,useCallback:function(e,t){return ol().memoizedState=[e,t===void 0?null:t],e},useContext:dn,useEffect:wf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Yc(4194308,4,jf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yc(4194308,4,e,t)},useInsertionEffect:function(e,t){Yc(4,2,e,t)},useMemo:function(e,t){var n=ol();t=t===void 0?null:t;var l=e();if(vi){$e(!0);try{e()}finally{$e(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=ol();if(n!==void 0){var o=n(t);if(vi){$e(!0);try{n(t)}finally{$e(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=fh.bind(null,Pe,e),[l.memoizedState,e]},useRef:function(e){var t=ol();return e={current:e},t.memoizedState=e},useState:function(e){e=Ur(e);var t=e.queue,n=Uf.bind(null,Pe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Yr,useDeferredValue:function(e,t){var n=ol();return Xr(n,e,t)},useTransition:function(){var e=Ur(!1);return e=Rf.bind(null,Pe,e.queue,!0,!1),ol().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=Pe,o=ol();if(Je){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),Xt===null)throw Error(b(349));(mt&127)!==0||sf(l,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,wf(rf.bind(null,l,i,e),[e]),l.flags|=2048,ns(9,{destroy:void 0},cf.bind(null,l,i,n,t),null),n},useId:function(){var e=ol(),t=Xt.identifierPrefix;if(Je){var n=Kl,l=Gn;n=(l&~(1<<32-Bt(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Bc++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=ah++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Gr,useFormState:xf,useActionState:xf,useOptimistic:function(e){var t=ol();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ir.bind(null,Pe,!0,n),n.dispatch=t,[e,t]},useMemoCache:_r,useCacheRefresh:function(){return ol().memoizedState=uh.bind(null,Pe)},useEffectEvent:function(e){var t=ol(),n={impl:e};return t.memoizedState=n,function(){if((jt&2)!==0)throw Error(b(440));return n.impl.apply(void 0,arguments)}}},qr={readContext:dn,use:Lc,useCallback:Mf,useContext:dn,useEffect:Hr,useImperativeHandle:Af,useInsertionEffect:zf,useLayoutEffect:Ef,useMemo:kf,useReducer:Hc,useRef:Cf,useState:function(){return Hc(no)},useDebugValue:Yr,useDeferredValue:function(e,t){var n=yn();return Df(n,Ut.memoizedState,e,t)},useTransition:function(){var e=Hc(no)[0],t=yn().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:of,useId:Of,useHostTransitionStatus:Gr,useFormState:bf,useActionState:bf,useOptimistic:function(e,t){var n=yn();return df(n,Ut,e,t)},useMemoCache:_r,useCacheRefresh:Bf};qr.useEffectEvent=Tf;var Xf={readContext:dn,use:Lc,useCallback:Mf,useContext:dn,useEffect:Hr,useImperativeHandle:Af,useInsertionEffect:zf,useLayoutEffect:Ef,useMemo:kf,useReducer:Br,useRef:Cf,useState:function(){return Br(no)},useDebugValue:Yr,useDeferredValue:function(e,t){var n=yn();return Ut===null?Xr(n,e,t):Df(n,Ut.memoizedState,e,t)},useTransition:function(){var e=Br(no)[0],t=yn().memoizedState;return[typeof e=="boolean"?e:qs(e),t]},useSyncExternalStore:of,useId:Of,useHostTransitionStatus:Gr,useFormState:Sf,useActionState:Sf,useOptimistic:function(e,t){var n=yn();return Ut!==null?df(n,Ut,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:_r,useCacheRefresh:Bf};Xf.useEffectEvent=Tf;function $r(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:C({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zr={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Hl(),o=je(l);o.payload=t,n!=null&&(o.callback=n),t=ge(e,o,l),t!==null&&(vl(t,e,l),Oe(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Hl(),o=je(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ge(e,o,l),t!==null&&(vl(t,e,l),Oe(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Hl(),l=je(n);l.tag=2,t!=null&&(l.callback=t),t=ge(e,l,n),t!==null&&(vl(t,e,n),Oe(t,e,n))}};function Vf(e,t,n,l,o,i,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,i,r):t.prototype&&t.prototype.isPureReactComponent?!Vn(n,l)||!Vn(o,i):!0}function Gf(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Zr.enqueueReplaceState(t,t.state,null)}function Si(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=C({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function If(e){No(e)}function qf(e){console.error(e)}function $f(e){No(e)}function Gc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Zf(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Qr(e,t,n){return n=je(n),n.tag=3,n.payload={element:null},n.callback=function(){Gc(e,t)},n}function Qf(e){return e=je(e),e.tag=3,e}function Kf(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var i=l.value;e.payload=function(){return o(i)},e.callback=function(){Zf(t,n,l)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Zf(t,n,l),typeof o!="function"&&(Xo===null?Xo=new Set([this]):Xo.add(this));var p=l.stack;this.componentDidCatch(l.value,{componentStack:p!==null?p:""})})}function dh(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Wl(t,n,o,!0),n=gt.current,n!==null){switch(n.tag){case 31:case 13:return sn===null?tr():n.alternate===null&&rn===0&&(rn=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===x?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),bu(e,l,o)),!1;case 22:return n.flags|=65536,l===x?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),bu(e,l,o)),!1}throw Error(b(435,n.tag))}return bu(e,l,o),tr(),!1}if(Je)return t=gt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==Ki&&(e=Error(b(422),{cause:l}),Oo(pl(e,n)))):(l!==Ki&&(t=Error(b(423),{cause:l}),Oo(pl(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=pl(l,n),o=Qr(e.stateNode,l,o),it(e,o),rn!==4&&(rn=2)),!1;var i=Error(b(520),{cause:l});if(i=pl(i,n),tc===null?tc=[i]:tc.push(i),rn!==4&&(rn=2),t===null)return!0;l=pl(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Qr(n.stateNode,l,e),it(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Xo===null||!Xo.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Qf(o),Kf(o,e,n,l),it(n,o),!1}n=n.return}while(n!==null);return!1}var Kr=Error(b(461)),vn=!1;function In(e,t,n,l){t.child=e===null?Y(t,null,n,l):E(t,e.child,n,l)}function Pf(e,t,n,l,o){n=n.render;var i=t.ref;if("ref"in l){var r={};for(var p in l)p!=="ref"&&(r[p]=l[p])}else r=l;return Ra(t),l=kr(e,t,n,r,i,o),p=Dr(),e!==null&&!vn?(Rr(e,t,o),lo(e,t,o)):(Je&&p&&Qi(t),t.flags|=1,In(e,t,l,o),t.child)}function Wf(e,t,n,l,o){if(e===null){var i=n.type;return typeof i=="function"&&!fn(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,Ff(e,t,i,l,o)):(e=sa(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!lu(e,o)){var r=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vn,n(r,l)&&e.ref===t.ref)return lo(e,t,o)}return t.flags|=1,e=dl(i,l),e.ref=t.ref,e.return=t,t.child=e}function Ff(e,t,n,l,o){if(e!==null){var i=e.memoizedProps;if(Vn(i,l)&&e.ref===t.ref)if(vn=!1,t.pendingProps=l=i,lu(e,o))(e.flags&131072)!==0&&(vn=!0);else return t.lanes=e.lanes,lo(e,t,o)}return Pr(e,t,n,l,o)}function Jf(e,t,n,l){var o=l.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(i=i!==null?i.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~i}else l=0,t.child=null;return ed(e,t,i,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&g(t,i!==null?i.cachePool:null),i!==null?tn(t,i):Ft(),nf(t);else return l=t.lanes=536870912,ed(e,t,i!==null?i.baseLanes|n:n,n,l)}else i!==null?(g(t,i.cachePool),tn(t,i),Uo(),t.memoizedState=null):(e!==null&&g(t,null),Ft(),Uo());return In(e,t,o,n),t.child}function Qs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ed(e,t,n,l,o){var i=d();return i=i===null?null:{parent:on._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&g(t,null),Ft(),nf(t),e!==null&&Wl(e,t,l,!0),t.childLanes=o,null}function Ic(e,t){return t=$c({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function td(e,t,n){return E(t,e.child,null,n),e=Ic(t,t.pendingProps),e.flags|=2,Bl(t),t.memoizedState=null,e}function ph(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Je){if(l.mode==="hidden")return e=Ic(t,l),t.lanes=536870912,Qs(null,e);if(Ar(t),(e=Dt)?(e=pp(e,hl),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Da!==null?{id:Gn,overflow:Kl}:null,retryLane:536870912,hydrationErrors:null},n=qi(e),n.return=t,t.child=n,Mn=t,Dt=null)):e=null,e===null)throw Nl(t);return t.lanes=536870912,null}return Ic(t,l)}var i=e.memoizedState;if(i!==null){var r=i.dehydrated;if(Ar(t),o)if(t.flags&256)t.flags&=-257,t=td(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(b(558));else if(vn||Wl(e,t,n,!1),o=(n&e.childLanes)!==0,vn||o){if(l=Xt,l!==null&&(r=bs(l,n),r!==0&&r!==i.retryLane))throw i.retryLane=r,Ma(e,r),vl(l,e,r),Kr;tr(),t=td(e,t,n)}else e=i.treeContext,Dt=Jl(r.nextSibling),Mn=t,Je=!0,Wn=null,hl=!1,e!==null&&Hs(t,e),t=Ic(t,l),t.flags|=4096;return t}return e=dl(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function qc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(b(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Pr(e,t,n,l,o){return Ra(t),n=kr(e,t,n,l,void 0,o),l=Dr(),e!==null&&!vn?(Rr(e,t,o),lo(e,t,o)):(Je&&l&&Qi(t),t.flags|=1,In(e,t,n,o),t.child)}function nd(e,t,n,l,o,i){return Ra(t),t.updateQueue=null,n=af(t,l,n,o),lf(e),l=Dr(),e!==null&&!vn?(Rr(e,t,i),lo(e,t,i)):(Je&&l&&Qi(t),t.flags|=1,In(e,t,n,i),t.child)}function ld(e,t,n,l,o){if(Ra(t),t.stateNode===null){var i=Dl,r=n.contextType;typeof r=="object"&&r!==null&&(i=dn(r)),i=new n(l,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Zr,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=l,i.state=t.memoizedState,i.refs={},W(t),r=n.contextType,i.context=typeof r=="object"&&r!==null?dn(r):Dl,i.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&($r(t,n,r,l),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(r=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),r!==i.state&&Zr.enqueueReplaceState(i,i.state,null),Re(t,l,i,o),bt(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){i=t.stateNode;var p=t.memoizedProps,v=Si(n,p);i.props=v;var _=i.context,Q=n.contextType;r=Dl,typeof Q=="object"&&Q!==null&&(r=dn(Q));var ee=n.getDerivedStateFromProps;Q=typeof ee=="function"||typeof i.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,Q||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(p||_!==r)&&Gf(t,i,l,r),q=!1;var L=t.memoizedState;i.state=L,Re(t,l,i,o),bt(),_=t.memoizedState,p||L!==_||q?(typeof ee=="function"&&($r(t,n,ee,l),_=t.memoizedState),(v=q||Vf(t,n,v,l,L,_,r))?(Q||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=_),i.props=l,i.state=_,i.context=r,l=v):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,de(e,t),r=t.memoizedProps,Q=Si(n,r),i.props=Q,ee=t.pendingProps,L=i.context,_=n.contextType,v=Dl,typeof _=="object"&&_!==null&&(v=dn(_)),p=n.getDerivedStateFromProps,(_=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r!==ee||L!==v)&&Gf(t,i,l,v),q=!1,L=t.memoizedState,i.state=L,Re(t,l,i,o),bt();var X=t.memoizedState;r!==ee||L!==X||q||e!==null&&e.dependencies!==null&&Wi(e.dependencies)?(typeof p=="function"&&($r(t,n,p,l),X=t.memoizedState),(Q=q||Vf(t,n,Q,l,L,X,v)||e!==null&&e.dependencies!==null&&Wi(e.dependencies))?(_||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,X,v),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,X,v)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=X),i.props=l,i.state=X,i.context=v,l=Q):(typeof i.componentDidUpdate!="function"||r===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),l=!1)}return i=l,qc(e,t),l=(t.flags&128)!==0,i||l?(i=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&l?(t.child=E(t,e.child,null,o),t.child=E(t,null,n,o)):In(e,t,n,o),t.memoizedState=i.state,e=t.child):e=lo(e,t,o),e}function ad(e,t,n,l){return al(),t.flags|=256,In(e,t,n,l),t.child}var Wr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fr(e){return{baseLanes:e,cachePool:y()}}function Jr(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ll),e}function od(e,t,n){var l=t.pendingProps,o=!1,i=(t.flags&128)!==0,r;if((r=i)||(r=e!==null&&e.memoizedState===null?!1:(hn.current&2)!==0),r&&(o=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(Je){if(o?pn(t):Uo(),(e=Dt)?(e=pp(e,hl),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Da!==null?{id:Gn,overflow:Kl}:null,retryLane:536870912,hydrationErrors:null},n=qi(e),n.return=t,t.child=n,Mn=t,Dt=null)):e=null,e===null)throw Nl(t);return Ou(e)?t.lanes=32:t.lanes=536870912,null}var p=l.children;return l=l.fallback,o?(Uo(),o=t.mode,p=$c({mode:"hidden",children:p},o),l=ka(l,o,n,null),p.return=t,l.return=t,p.sibling=l,t.child=p,l=t.child,l.memoizedState=Fr(n),l.childLanes=Jr(e,r,n),t.memoizedState=Wr,Qs(null,l)):(pn(t),eu(t,p))}var v=e.memoizedState;if(v!==null&&(p=v.dehydrated,p!==null)){if(i)t.flags&256?(pn(t),t.flags&=-257,t=tu(e,t,n)):t.memoizedState!==null?(Uo(),t.child=e.child,t.flags|=128,t=null):(Uo(),p=l.fallback,o=t.mode,l=$c({mode:"visible",children:l.children},o),p=ka(p,o,n,null),p.flags|=2,l.return=t,p.return=t,l.sibling=p,t.child=l,E(t,e.child,null,n),l=t.child,l.memoizedState=Fr(n),l.childLanes=Jr(e,r,n),t.memoizedState=Wr,t=Qs(null,l));else if(pn(t),Ou(p)){if(r=p.nextSibling&&p.nextSibling.dataset,r)var _=r.dgst;r=_,l=Error(b(419)),l.stack="",l.digest=r,Oo({value:l,source:null,stack:null}),t=tu(e,t,n)}else if(vn||Wl(e,t,n,!1),r=(n&e.childLanes)!==0,vn||r){if(r=Xt,r!==null&&(l=bs(r,n),l!==0&&l!==v.retryLane))throw v.retryLane=l,Ma(e,l),vl(r,e,l),Kr;_u(p)||tr(),t=tu(e,t,n)}else _u(p)?(t.flags|=192,t.child=e.child,t=null):(e=v.treeContext,Dt=Jl(p.nextSibling),Mn=t,Je=!0,Wn=null,hl=!1,e!==null&&Hs(t,e),t=eu(t,l.children),t.flags|=4096);return t}return o?(Uo(),p=l.fallback,o=t.mode,v=e.child,_=v.sibling,l=dl(v,{mode:"hidden",children:l.children}),l.subtreeFlags=v.subtreeFlags&65011712,_!==null?p=dl(_,p):(p=ka(p,o,n,null),p.flags|=2),p.return=t,l.return=t,l.sibling=p,t.child=l,Qs(null,l),l=t.child,p=e.child.memoizedState,p===null?p=Fr(n):(o=p.cachePool,o!==null?(v=on._currentValue,o=o.parent!==v?{parent:v,pool:v}:o):o=y(),p={baseLanes:p.baseLanes|n,cachePool:o}),l.memoizedState=p,l.childLanes=Jr(e,r,n),t.memoizedState=Wr,Qs(e.child,l)):(pn(t),n=e.child,e=n.sibling,n=dl(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function eu(e,t){return t=$c({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function $c(e,t){return e=Ee(22,e,null,t),e.lanes=0,e}function tu(e,t,n){return E(t,e.child,null,n),e=eu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function id(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),eo(e.return,t,n)}function nu(e,t,n,l,o,i){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=n,r.tailMode=o,r.treeForkCount=i)}function sd(e,t,n){var l=t.pendingProps,o=l.revealOrder,i=l.tail;l=l.children;var r=hn.current,p=(r&2)!==0;if(p?(r=r&1|2,t.flags|=128):r&=1,P(hn,r),In(e,t,l,n),l=Je?bi:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&id(e,n,t);else if(e.tag===19)id(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&_c(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),nu(t,!1,o,n,i,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&_c(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}nu(t,!0,n,null,i,l);break;case"together":nu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function lo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yo|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Wl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=dl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Wi(e)))}function hh(e,t,n){switch(t.tag){case 3:Xe(t,t.stateNode.containerInfo),Pl(t,on,e.memoizedState.cache),al();break;case 27:case 5:Tn(t);break;case 4:Xe(t,t.stateNode.containerInfo);break;case 10:Pl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Ar(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(pn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?od(e,t,n):(pn(t),e=lo(e,t,n),e!==null?e.sibling:null);pn(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Wl(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return sd(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),P(hn,hn.current),l)break;return null;case 22:return t.lanes=0,Jf(e,t,n,t.pendingProps);case 24:Pl(t,on,e.memoizedState.cache)}return lo(e,t,n)}function cd(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)vn=!0;else{if(!lu(e,n)&&(t.flags&128)===0)return vn=!1,hh(e,t,n);vn=(e.flags&131072)!==0}else vn=!1,Je&&(t.flags&1048576)!==0&&Zi(t,bi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=le(t.elementType),t.type=e,typeof e=="function")fn(e)?(l=Si(e,l),t.tag=1,t=ld(null,t,e,l,n)):(t.tag=0,t=Pr(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===pt){t.tag=11,t=Pf(null,t,e,l,n);break e}else if(o===Me){t.tag=14,t=Wf(null,t,e,l,n);break e}}throw t=Pt(e)||e,Error(b(306,t,""))}}return t;case 0:return Pr(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=Si(l,t.pendingProps),ld(e,t,l,o,n);case 3:e:{if(Xe(t,t.stateNode.containerInfo),e===null)throw Error(b(387));l=t.pendingProps;var i=t.memoizedState;o=i.element,de(e,t),Re(t,l,null,n);var r=t.memoizedState;if(l=r.cache,Pl(t,on,l),l!==i.cache&&Xs(t,[on],n,!0),bt(),l=r.element,i.isDehydrated)if(i={element:l,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=ad(e,t,l,n);break e}else if(l!==o){o=pl(Error(b(424)),t),Oo(o),t=ad(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Dt=Jl(e.firstChild),Mn=t,Je=!0,Wn=null,hl=!0,n=Y(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(al(),l===o){t=lo(e,t,n);break e}In(e,t,l,n)}t=t.child}return t;case 26:return qc(e,t),e===null?(n=bp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Je||(n=t.type,e=t.pendingProps,l=cr(Ne.current).createElement(n),l[kt]=t,l[Yn]=e,qn(l,n,e),gn(l),t.stateNode=l):t.memoizedState=bp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Tn(t),e===null&&Je&&(l=t.stateNode=gp(t.type,t.pendingProps,Ne.current),Mn=t,hl=!0,o=Dt,qo(t.type)?(Bu=o,Dt=Jl(l.firstChild)):Dt=o),In(e,t,t.pendingProps.children,n),qc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Je&&((o=l=Dt)&&(l=Ih(l,t.type,t.pendingProps,hl),l!==null?(t.stateNode=l,Mn=t,Dt=Jl(l.firstChild),hl=!1,o=!0):o=!1),o||Nl(t)),Tn(t),o=t.type,i=t.pendingProps,r=e!==null?e.memoizedProps:null,l=i.children,Du(o,i)?l=null:r!==null&&Du(o,r)&&(t.flags|=32),t.memoizedState!==null&&(o=kr(e,t,oh,null,null,n),rc._currentValue=o),qc(e,t),In(e,t,l,n),t.child;case 6:return e===null&&Je&&((e=n=Dt)&&(n=qh(n,t.pendingProps,hl),n!==null?(t.stateNode=n,Mn=t,Dt=null,e=!0):e=!1),e||Nl(t)),null;case 13:return od(e,t,n);case 4:return Xe(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=E(t,null,l,n):In(e,t,l,n),t.child;case 11:return Pf(e,t,t.type,t.pendingProps,n);case 7:return In(e,t,t.pendingProps,n),t.child;case 8:return In(e,t,t.pendingProps.children,n),t.child;case 12:return In(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,Pl(t,t.type,l.value),In(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,Ra(t),o=dn(o),l=l(o),t.flags|=1,In(e,t,l,n),t.child;case 14:return Wf(e,t,t.type,t.pendingProps,n);case 15:return Ff(e,t,t.type,t.pendingProps,n);case 19:return sd(e,t,n);case 31:return ph(e,t,n);case 22:return Jf(e,t,n,t.pendingProps);case 24:return Ra(t),l=dn(on),e===null?(o=d(),o===null&&(o=Xt,i=Ji(),o.pooledCache=i,i.refCount++,i!==null&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:l,cache:o},W(t),Pl(t,on,o)):((e.lanes&n)!==0&&(de(e,t),Re(t,null,null,n),bt()),o=e.memoizedState,i=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Pl(t,on,l)):(l=i.cache,Pl(t,on,l),l!==o.cache&&Xs(t,[on],n,!0))),In(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(b(156,t.tag))}function ao(e){e.flags|=4}function au(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Od())e.flags|=8192;else throw G=x,h}else e.flags&=-16777217}function rd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tp(t))if(Od())e.flags|=8192;else throw G=x,h}function Zc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ms():536870912,e.lanes|=t,is|=t)}function Ks(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function yh(e,t,n){var l=t.pendingProps;switch(Ls(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return Zt(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ua(on),lt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(_l(t)?ao(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Pi())),Zt(t),null;case 26:var o=t.type,i=t.memoizedState;return e===null?(ao(t),i!==null?(Zt(t),rd(t,i)):(Zt(t),au(t,o,null,l,n))):i?i!==e.memoizedState?(ao(t),Zt(t),rd(t,i)):(Zt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ao(t),Zt(t),au(t,o,e,l,n)),null;case 27:if(at(t),n=Ne.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ao(t);else{if(!l){if(t.stateNode===null)throw Error(b(166));return Zt(t),null}e=ue.current,_l(t)?ra(t):(e=gp(o,l,n),t.stateNode=e,ao(t))}return Zt(t),null;case 5:if(at(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ao(t);else{if(!l){if(t.stateNode===null)throw Error(b(166));return Zt(t),null}if(i=ue.current,_l(t))ra(t);else{var r=cr(Ne.current);switch(i){case 1:i=r.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=r.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=r.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof l.is=="string"?r.createElement("select",{is:l.is}):r.createElement("select"),l.multiple?i.multiple=!0:l.size&&(i.size=l.size);break;default:i=typeof l.is=="string"?r.createElement(o,{is:l.is}):r.createElement(o)}}i[kt]=t,i[Yn]=l;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)i.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=i;e:switch(qn(i,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ao(t)}}return Zt(t),au(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ao(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(b(166));if(e=Ne.current,_l(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=Mn,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[kt]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||op(e.nodeValue,n)),e||Nl(t,!0)}else e=cr(e).createTextNode(l),e[kt]=t,t.stateNode=e}return Zt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=_l(t),n!==null){if(e===null){if(!l)throw Error(b(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(557));e[kt]=t}else al(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Zt(t),e=!1}else n=Pi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Bl(t),t):(Bl(t),null);if((t.flags&128)!==0)throw Error(b(558))}return Zt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=_l(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(b(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(b(317));o[kt]=t}else al(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Zt(t),o=!1}else o=Pi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Bl(t),t):(Bl(t),null)}return Bl(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Zc(t,t.updateQueue),Zt(t),null);case 4:return lt(),e===null&&Eu(t.stateNode.containerInfo),Zt(t),null;case 10:return ua(t.type),Zt(t),null;case 19:if(j(hn),l=t.memoizedState,l===null)return Zt(t),null;if(o=(t.flags&128)!==0,i=l.rendering,i===null)if(o)Ks(l,!1);else{if(rn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=_c(e),i!==null){for(t.flags|=128,Ks(l,!1),e=i.updateQueue,t.updateQueue=e,Zc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Us(n,e),n=n.sibling;return P(hn,hn.current&1|2),Je&&Rl(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&$n()>Fc&&(t.flags|=128,o=!0,Ks(l,!1),t.lanes=4194304)}else{if(!o)if(e=_c(i),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Zc(t,e),Ks(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Je)return Zt(t),null}else 2*$n()-l.renderingStartTime>Fc&&n!==536870912&&(t.flags|=128,o=!0,Ks(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(e=l.last,e!==null?e.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=$n(),e.sibling=null,n=hn.current,P(hn,o?n&1|2:n&1),Je&&Rl(t,l.treeForkCount),e):(Zt(t),null);case 22:case 23:return Bl(t),Ze(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),n=t.updateQueue,n!==null&&Zc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&j(u),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ua(on),Zt(t),null;case 25:return null;case 30:return null}throw Error(b(156,t.tag))}function gh(e,t){switch(Ls(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ua(on),lt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return at(t),null;case 31:if(t.memoizedState!==null){if(Bl(t),t.alternate===null)throw Error(b(340));al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Bl(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));al()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return j(hn),null;case 4:return lt(),null;case 10:return ua(t.type),null;case 22:case 23:return Bl(t),Ze(),e!==null&&j(u),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ua(on),null;case 25:return null;default:return null}}function ud(e,t){switch(Ls(t),t.tag){case 3:ua(on),lt();break;case 26:case 27:case 5:at(t);break;case 4:lt();break;case 31:t.memoizedState!==null&&Bl(t);break;case 13:Bl(t);break;case 19:j(hn);break;case 10:ua(t.type);break;case 22:case 23:Bl(t),Ze(),e!==null&&j(u);break;case 24:ua(on)}}function Ps(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var i=n.create,r=n.inst;l=i(),r.destroy=l}n=n.next}while(n!==o)}}catch(p){Nt(t,t.return,p)}}function Lo(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var i=o.next;l=i;do{if((l.tag&e)===e){var r=l.inst,p=r.destroy;if(p!==void 0){r.destroy=void 0,o=t;var v=n,_=p;try{_()}catch(Q){Nt(o,v,Q)}}}l=l.next}while(l!==i)}}catch(Q){Nt(t,t.return,Q)}}function fd(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ct(t,n)}catch(l){Nt(e,e.return,l)}}}function dd(e,t,n){n.props=Si(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Nt(e,t,l)}}function Ws(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){Nt(e,t,o)}}function Ba(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){Nt(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Nt(e,t,o)}else n.current=null}function pd(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){Nt(e,e.return,o)}}function ou(e,t,n){try{var l=e.stateNode;Lh(l,e.type,n,t),l[Yn]=t}catch(o){Nt(e,e.return,o)}}function hd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&qo(e.type)||e.tag===4}function iu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&qo(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function su(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Tl));else if(l!==4&&(l===27&&qo(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(su(e,t,n),e=e.sibling;e!==null;)su(e,t,n),e=e.sibling}function Qc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&qo(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Qc(e,t,n),e=e.sibling;e!==null;)Qc(e,t,n),e=e.sibling}function yd(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);qn(t,l,n),t[kt]=e,t[Yn]=n}catch(i){Nt(e,e.return,i)}}var oo=!1,Sn=!1,cu=!1,gd=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function mh(e,t){if(e=e.containerInfo,Mu=yr,e=Vi(e),Os(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,i=l.focusNode;l=l.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var r=0,p=-1,v=-1,_=0,Q=0,ee=e,L=null;t:for(;;){for(var X;ee!==n||o!==0&&ee.nodeType!==3||(p=r+o),ee!==i||l!==0&&ee.nodeType!==3||(v=r+l),ee.nodeType===3&&(r+=ee.nodeValue.length),(X=ee.firstChild)!==null;)L=ee,ee=X;for(;;){if(ee===e)break t;if(L===n&&++_===o&&(p=r),L===i&&++Q===l&&(v=r),(X=ee.nextSibling)!==null)break;ee=L,L=ee.parentNode}ee=X}n=p===-1||v===-1?null:{start:p,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(ku={focusedElem:e,selectionRange:n},yr=!1,Ln=t;Ln!==null;)if(t=Ln,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ln=e;else for(;Ln!==null;){switch(t=Ln,i=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,l=n.stateNode;try{var we=Si(n.type,o);e=l.getSnapshotBeforeUpdate(we,i),l.__reactInternalSnapshotBeforeUpdate=e}catch(Le){Nt(n,n.return,Le)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Nu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(b(163))}if(e=t.sibling,e!==null){e.return=t.return,Ln=e;break}Ln=t.return}}function md(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:so(e,n),l&4&&Ps(5,n);break;case 1:if(so(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){Nt(n,n.return,r)}else{var o=Si(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Nt(n,n.return,r)}}l&64&&fd(n),l&512&&Ws(n,n.return);break;case 3:if(so(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ct(e,t)}catch(r){Nt(n,n.return,r)}}break;case 27:t===null&&l&4&&yd(n);case 26:case 5:so(e,n),t===null&&l&4&&pd(n),l&512&&Ws(n,n.return);break;case 12:so(e,n);break;case 31:so(e,n),l&4&&vd(e,n);break;case 13:so(e,n),l&4&&Sd(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Eh.bind(null,n),$h(e,n))));break;case 22:if(l=n.memoizedState!==null||oo,!l){t=t!==null&&t.memoizedState!==null||Sn,o=oo;var i=Sn;oo=l,(Sn=t)&&!i?co(e,n,(n.subtreeFlags&8772)!==0):so(e,n),oo=o,Sn=i}break;case 30:break;default:so(e,n)}}function xd(e){var t=e.alternate;t!==null&&(e.alternate=null,xd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Vt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Jt=null,gl=!1;function io(e,t,n){for(n=n.child;n!==null;)bd(e,t,n),n=n.sibling}function bd(e,t,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Ya,n)}catch{}switch(n.tag){case 26:Sn||Ba(n,t),io(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Sn||Ba(n,t);var l=Jt,o=gl;qo(n.type)&&(Jt=n.stateNode,gl=!1),io(e,t,n),ic(n.stateNode),Jt=l,gl=o;break;case 5:Sn||Ba(n,t);case 6:if(l=Jt,o=gl,Jt=null,io(e,t,n),Jt=l,gl=o,Jt!==null)if(gl)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(n.stateNode)}catch(i){Nt(n,t,i)}else try{Jt.removeChild(n.stateNode)}catch(i){Nt(n,t,i)}break;case 18:Jt!==null&&(gl?(e=Jt,fp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),hs(e)):fp(Jt,n.stateNode));break;case 4:l=Jt,o=gl,Jt=n.stateNode.containerInfo,gl=!0,io(e,t,n),Jt=l,gl=o;break;case 0:case 11:case 14:case 15:Lo(2,n,t),Sn||Lo(4,n,t),io(e,t,n);break;case 1:Sn||(Ba(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&dd(n,t,l)),io(e,t,n);break;case 21:io(e,t,n);break;case 22:Sn=(l=Sn)||n.memoizedState!==null,io(e,t,n),Sn=l;break;default:io(e,t,n)}}function vd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hs(e)}catch(n){Nt(t,t.return,n)}}}function Sd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hs(e)}catch(n){Nt(t,t.return,n)}}function xh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new gd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new gd),t;default:throw Error(b(435,e.tag))}}function Kc(e,t){var n=xh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=jh.bind(null,e,l);l.then(o,o)}})}function ml(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],i=e,r=t,p=r;e:for(;p!==null;){switch(p.tag){case 27:if(qo(p.type)){Jt=p.stateNode,gl=!1;break e}break;case 5:Jt=p.stateNode,gl=!1;break e;case 3:case 4:Jt=p.stateNode.containerInfo,gl=!0;break e}p=p.return}if(Jt===null)throw Error(b(160));bd(i,r,o),Jt=null,gl=!1,i=o.alternate,i!==null&&(i.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Cd(t,e),t=t.sibling}var fa=null;function Cd(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ml(t,e),xl(e),l&4&&(Lo(3,e,e.return),Ps(3,e),Lo(5,e,e.return));break;case 1:ml(t,e),xl(e),l&512&&(Sn||n===null||Ba(n,n.return)),l&64&&oo&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=fa;if(ml(t,e),xl(e),l&512&&(Sn||n===null||Ba(n,n.return)),l&4){var i=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":i=o.getElementsByTagName("title")[0],(!i||i[ya]||i[kt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=o.createElement(l),o.head.insertBefore(i,o.querySelector("head > title"))),qn(i,l,n),i[kt]=e,gn(i),l=i;break e;case"link":var r=Cp("link","href",o).get(l+(n.href||""));if(r){for(var p=0;p<r.length;p++)if(i=r[p],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(p,1);break t}}i=o.createElement(l),qn(i,l,n),o.head.appendChild(i);break;case"meta":if(r=Cp("meta","content",o).get(l+(n.content||""))){for(p=0;p<r.length;p++)if(i=r[p],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(p,1);break t}}i=o.createElement(l),qn(i,l,n),o.head.appendChild(i);break;default:throw Error(b(468,l))}i[kt]=e,gn(i),l=i}e.stateNode=l}else wp(o,e.type,e.stateNode);else e.stateNode=Sp(o,l,e.memoizedProps);else i!==l?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,l===null?wp(o,e.type,e.stateNode):Sp(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ou(e,e.memoizedProps,n.memoizedProps)}break;case 27:ml(t,e),xl(e),l&512&&(Sn||n===null||Ba(n,n.return)),n!==null&&l&4&&ou(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ml(t,e),xl(e),l&512&&(Sn||n===null||Ba(n,n.return)),e.flags&32){o=e.stateNode;try{xa(o,"")}catch(we){Nt(e,e.return,we)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,ou(e,o,n!==null?n.memoizedProps:o)),l&1024&&(cu=!0);break;case 6:if(ml(t,e),xl(e),l&4){if(e.stateNode===null)throw Error(b(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(we){Nt(e,e.return,we)}}break;case 3:if(fr=null,o=fa,fa=rr(t.containerInfo),ml(t,e),fa=o,xl(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{hs(t.containerInfo)}catch(we){Nt(e,e.return,we)}cu&&(cu=!1,wd(e));break;case 4:l=fa,fa=rr(e.stateNode.containerInfo),ml(t,e),xl(e),fa=l;break;case 12:ml(t,e),xl(e);break;case 31:ml(t,e),xl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Kc(e,l)));break;case 13:ml(t,e),xl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Wc=$n()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Kc(e,l)));break;case 22:o=e.memoizedState!==null;var v=n!==null&&n.memoizedState!==null,_=oo,Q=Sn;if(oo=_||o,Sn=Q||v,ml(t,e),Sn=Q,oo=_,xl(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||v||oo||Sn||Ci(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){v=n=t;try{if(i=v.stateNode,o)r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{p=v.stateNode;var ee=v.memoizedProps.style,L=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;p.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(we){Nt(v,v.return,we)}}}else if(t.tag===6){if(n===null){v=t;try{v.stateNode.nodeValue=o?"":v.memoizedProps}catch(we){Nt(v,v.return,we)}}}else if(t.tag===18){if(n===null){v=t;try{var X=v.stateNode;o?dp(X,!0):dp(v.stateNode,!1)}catch(we){Nt(v,v.return,we)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Kc(e,n))));break;case 19:ml(t,e),xl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Kc(e,l)));break;case 30:break;case 21:break;default:ml(t,e),xl(e)}}function xl(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(hd(l)){n=l;break}l=l.return}if(n==null)throw Error(b(160));switch(n.tag){case 27:var o=n.stateNode,i=iu(e);Qc(e,i,o);break;case 5:var r=n.stateNode;n.flags&32&&(xa(r,""),n.flags&=-33);var p=iu(e);Qc(e,p,r);break;case 3:case 4:var v=n.stateNode.containerInfo,_=iu(e);su(e,_,v);break;default:throw Error(b(161))}}catch(Q){Nt(e,e.return,Q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;wd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function so(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)md(e,t.alternate,t),t=t.sibling}function Ci(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Lo(4,t,t.return),Ci(t);break;case 1:Ba(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&dd(t,t.return,n),Ci(t);break;case 27:ic(t.stateNode);case 26:case 5:Ba(t,t.return),Ci(t);break;case 22:t.memoizedState===null&&Ci(t);break;case 30:Ci(t);break;default:Ci(t)}e=e.sibling}}function co(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,i=t,r=i.flags;switch(i.tag){case 0:case 11:case 15:co(o,i,n),Ps(4,i);break;case 1:if(co(o,i,n),l=i,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(_){Nt(l,l.return,_)}if(l=i,o=l.updateQueue,o!==null){var p=l.stateNode;try{var v=o.shared.hiddenCallbacks;if(v!==null)for(o.shared.hiddenCallbacks=null,o=0;o<v.length;o++)rt(v[o],p)}catch(_){Nt(l,l.return,_)}}n&&r&64&&fd(i),Ws(i,i.return);break;case 27:yd(i);case 26:case 5:co(o,i,n),n&&l===null&&r&4&&pd(i),Ws(i,i.return);break;case 12:co(o,i,n);break;case 31:co(o,i,n),n&&r&4&&vd(o,i);break;case 13:co(o,i,n),n&&r&4&&Sd(o,i);break;case 22:i.memoizedState===null&&co(o,i,n),Ws(i,i.return);break;case 30:break;default:co(o,i,n)}t=t.sibling}}function ru(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Na(n))}function uu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Na(e))}function da(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Td(e,t,n,l),t=t.sibling}function Td(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:da(e,t,n,l),o&2048&&Ps(9,t);break;case 1:da(e,t,n,l);break;case 3:da(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Na(e)));break;case 12:if(o&2048){da(e,t,n,l),e=t.stateNode;try{var i=t.memoizedProps,r=i.id,p=i.onPostCommit;typeof p=="function"&&p(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(v){Nt(t,t.return,v)}}else da(e,t,n,l);break;case 31:da(e,t,n,l);break;case 13:da(e,t,n,l);break;case 23:break;case 22:i=t.stateNode,r=t.alternate,t.memoizedState!==null?i._visibility&2?da(e,t,n,l):Fs(e,t):i._visibility&2?da(e,t,n,l):(i._visibility|=2,ls(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&ru(r,t);break;case 24:da(e,t,n,l),o&2048&&uu(t.alternate,t);break;default:da(e,t,n,l)}}function ls(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,r=t,p=n,v=l,_=r.flags;switch(r.tag){case 0:case 11:case 15:ls(i,r,p,v,o),Ps(8,r);break;case 23:break;case 22:var Q=r.stateNode;r.memoizedState!==null?Q._visibility&2?ls(i,r,p,v,o):Fs(i,r):(Q._visibility|=2,ls(i,r,p,v,o)),o&&_&2048&&ru(r.alternate,r);break;case 24:ls(i,r,p,v,o),o&&_&2048&&uu(r.alternate,r);break;default:ls(i,r,p,v,o)}t=t.sibling}}function Fs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:Fs(n,l),o&2048&&ru(l.alternate,l);break;case 24:Fs(n,l),o&2048&&uu(l.alternate,l);break;default:Fs(n,l)}t=t.sibling}}var Js=8192;function as(e,t,n){if(e.subtreeFlags&Js)for(e=e.child;e!==null;)zd(e,t,n),e=e.sibling}function zd(e,t,n){switch(e.tag){case 26:as(e,t,n),e.flags&Js&&e.memoizedState!==null&&a0(n,fa,e.memoizedState,e.memoizedProps);break;case 5:as(e,t,n);break;case 3:case 4:var l=fa;fa=rr(e.stateNode.containerInfo),as(e,t,n),fa=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Js,Js=16777216,as(e,t,n),Js=l):as(e,t,n));break;default:as(e,t,n)}}function Ed(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ec(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Ln=l,Ad(l,e)}Ed(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jd(e),e=e.sibling}function jd(e){switch(e.tag){case 0:case 11:case 15:ec(e),e.flags&2048&&Lo(9,e,e.return);break;case 3:ec(e);break;case 12:ec(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Pc(e)):ec(e);break;default:ec(e)}}function Pc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];Ln=l,Ad(l,e)}Ed(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Lo(8,t,t.return),Pc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Pc(t));break;default:Pc(t)}e=e.sibling}}function Ad(e,t){for(;Ln!==null;){var n=Ln;switch(n.tag){case 0:case 11:case 15:Lo(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Na(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,Ln=l;else e:for(n=e;Ln!==null;){l=Ln;var o=l.sibling,i=l.return;if(xd(l),l===n){Ln=null;break e}if(o!==null){o.return=i,Ln=o;break e}Ln=i}}}var bh={getCacheForType:function(e){var t=dn(on),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return dn(on).controller.signal}},vh=typeof WeakMap=="function"?WeakMap:Map,jt=0,Xt=null,ut=null,mt=0,Rt=0,Ul=null,Ho=!1,os=!1,fu=!1,ro=0,rn=0,Yo=0,wi=0,du=0,Ll=0,is=0,tc=null,bl=null,pu=!1,Wc=0,Md=0,Fc=1/0,Jc=null,Xo=null,kn=0,Vo=null,ss=null,uo=0,hu=0,yu=null,kd=null,nc=0,gu=null;function Hl(){return(jt&2)!==0&&mt!==0?mt&-mt:Z.T!==null?Cu():ei()}function Dd(){if(Ll===0)if((mt&536870912)===0||Je){var e=Ue;Ue<<=1,(Ue&3932160)===0&&(Ue=262144),Ll=e}else Ll=536870912;return e=gt.current,e!==null&&(e.flags|=32),Ll}function vl(e,t,n){(e===Xt&&(Rt===2||Rt===9)||e.cancelPendingCommit!==null)&&(cs(e,0),Go(e,mt,Ll,!1)),Sl(e,n),((jt&2)===0||e!==Xt)&&(e===Xt&&((jt&2)===0&&(wi|=n),rn===4&&Go(e,mt,Ll,!1)),Ua(e))}function Rd(e,t,n){if((jt&6)!==0)throw Error(b(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||be(e,t),o=l?wh(e,t):xu(e,t,!0),i=l;do{if(o===0){os&&!l&&Go(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!Sh(n)){o=xu(e,t,!1),i=!1;continue}if(o===2){if(i=t,e.errorRecoveryDisabledLanes&i)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var p=e;o=tc;var v=p.current.memoizedState.isDehydrated;if(v&&(cs(p,r).flags|=256),r=xu(p,r,!1),r!==2){if(fu&&!v){p.errorRecoveryDisabledLanes|=i,wi|=i,o=4;break e}i=bl,bl=o,i!==null&&(bl===null?bl=i:bl.push.apply(bl,i))}o=r}if(i=!1,o!==2)continue}}if(o===1){cs(e,0),Go(e,t,0,!0);break}e:{switch(l=e,i=o,i){case 0:case 1:throw Error(b(345));case 4:if((t&4194048)!==t)break;case 6:Go(l,t,Ll,!Ho);break e;case 2:bl=null;break;case 3:case 5:break;default:throw Error(b(329))}if((t&62914560)===t&&(o=Wc+300-$n(),10<o)){if(Go(l,t,Ll,!Ho),el(l,0,!0)!==0)break e;uo=t,l.timeoutHandle=rp(Nd.bind(null,l,n,bl,Jc,pu,t,Ll,wi,is,Ho,i,"Throttled",-0,0),o);break e}Nd(l,n,bl,Jc,pu,t,Ll,wi,is,Ho,i,null,-0,0)}}break}while(!0);Ua(e)}function Nd(e,t,n,l,o,i,r,p,v,_,Q,ee,L,X){if(e.timeoutHandle=-1,ee=t.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tl},zd(t,i,ee);var we=(i&62914560)===i?Wc-$n():(i&4194048)===i?Md-$n():0;if(we=o0(ee,we),we!==null){uo=i,e.cancelPendingCommit=we(Xd.bind(null,e,t,i,n,l,o,r,p,v,Q,ee,null,L,X)),Go(e,i,r,!_);return}}Xd(e,t,i,n,l,o,r,p,v)}function Sh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],i=o.getSnapshot;o=o.value;try{if(!Ye(i(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Go(e,t,n,l){t&=~du,t&=~wi,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var i=31-Bt(o),r=1<<i;l[i]=-1,o&=~r}n!==0&&xs(e,n,t)}function er(){return(jt&6)===0?(lc(0),!1):!0}function mu(){if(ut!==null){if(Rt===0)var e=ut.return;else e=ut,Ol=yl=null,Nr(e),U=null,te=0,e=ut;for(;e!==null;)ud(e.alternate,e),e=e.return;ut=null}}function cs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Xh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),uo=0,mu(),Xt=e,ut=n=dl(e.current,null),mt=t,Rt=0,Ul=null,Ho=!1,os=be(e,t),fu=!1,is=Ll=du=wi=Yo=rn=0,bl=tc=null,pu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-Bt(l),i=1<<o;t|=e[o],l&=~i}return ro=t,gi(),n}function _d(e,t){Pe=null,Z.H=Zs,t===f||t===S?(t=I(),Rt=3):t===h?(t=I(),Rt=4):Rt=t===Kr?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ul=t,ut===null&&(rn=1,Gc(e,pl(t,e.current)))}function Od(){var e=gt.current;return e===null?!0:(mt&4194048)===mt?sn===null:(mt&62914560)===mt||(mt&536870912)!==0?e===sn:!1}function Bd(){var e=Z.H;return Z.H=Zs,e===null?Zs:e}function Ud(){var e=Z.A;return Z.A=bh,e}function tr(){rn=4,Ho||(mt&4194048)!==mt&&gt.current!==null||(os=!0),(Yo&134217727)===0&&(wi&134217727)===0||Xt===null||Go(Xt,mt,Ll,!1)}function xu(e,t,n){var l=jt;jt|=2;var o=Bd(),i=Ud();(Xt!==e||mt!==t)&&(Jc=null,cs(e,t)),t=!1;var r=rn;e:do try{if(Rt!==0&&ut!==null){var p=ut,v=Ul;switch(Rt){case 8:mu(),r=6;break e;case 3:case 2:case 9:case 6:gt.current===null&&(t=!0);var _=Rt;if(Rt=0,Ul=null,rs(e,p,v,_),n&&os){r=0;break e}break;default:_=Rt,Rt=0,Ul=null,rs(e,p,v,_)}}Ch(),r=rn;break}catch(Q){_d(e,Q)}while(!0);return t&&e.shellSuspendCounter++,Ol=yl=null,jt=l,Z.H=o,Z.A=i,ut===null&&(Xt=null,mt=0,gi()),r}function Ch(){for(;ut!==null;)Ld(ut)}function wh(e,t){var n=jt;jt|=2;var l=Bd(),o=Ud();Xt!==e||mt!==t?(Jc=null,Fc=$n()+500,cs(e,t)):os=be(e,t);e:do try{if(Rt!==0&&ut!==null){t=ut;var i=Ul;t:switch(Rt){case 1:Rt=0,Ul=null,rs(e,t,i,1);break;case 2:case 9:if(R(i)){Rt=0,Ul=null,Hd(t);break}t=function(){Rt!==2&&Rt!==9||Xt!==e||(Rt=7),Ua(e)},i.then(t,t);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:R(i)?(Rt=0,Ul=null,Hd(t)):(Rt=0,Ul=null,rs(e,t,i,7));break;case 5:var r=null;switch(ut.tag){case 26:r=ut.memoizedState;case 5:case 27:var p=ut;if(r?Tp(r):p.stateNode.complete){Rt=0,Ul=null;var v=p.sibling;if(v!==null)ut=v;else{var _=p.return;_!==null?(ut=_,nr(_)):ut=null}break t}}Rt=0,Ul=null,rs(e,t,i,5);break;case 6:Rt=0,Ul=null,rs(e,t,i,6);break;case 8:mu(),rn=6;break e;default:throw Error(b(462))}}Th();break}catch(Q){_d(e,Q)}while(!0);return Ol=yl=null,Z.H=l,Z.A=o,jt=n,ut!==null?0:(Xt=null,mt=0,gi(),rn)}function Th(){for(;ut!==null&&!zi();)Ld(ut)}function Ld(e){var t=cd(e.alternate,e,ro);e.memoizedProps=e.pendingProps,t===null?nr(e):ut=t}function Hd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=nd(n,t,t.pendingProps,t.type,void 0,mt);break;case 11:t=nd(n,t,t.pendingProps,t.type.render,t.ref,mt);break;case 5:Nr(t);default:ud(n,t),t=ut=Us(t,ro),t=cd(n,t,ro)}e.memoizedProps=e.pendingProps,t===null?nr(e):ut=t}function rs(e,t,n,l){Ol=yl=null,Nr(t),U=null,te=0;var o=t.return;try{if(dh(e,o,t,n,mt)){rn=1,Gc(e,pl(n,e.current)),ut=null;return}}catch(i){if(o!==null)throw ut=o,i;rn=1,Gc(e,pl(n,e.current)),ut=null;return}t.flags&32768?(Je||l===1?e=!0:os||(mt&536870912)!==0?e=!1:(Ho=e=!0,(l===2||l===9||l===3||l===6)&&(l=gt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Yd(t,e)):nr(t)}function nr(e){var t=e;do{if((t.flags&32768)!==0){Yd(t,Ho);return}e=t.return;var n=yh(t.alternate,t,ro);if(n!==null){ut=n;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);rn===0&&(rn=5)}function Yd(e,t){do{var n=gh(e.alternate,e);if(n!==null){n.flags&=32767,ut=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ut=e;return}ut=e=n}while(e!==null);rn=6,ut=null}function Xd(e,t,n,l,o,i,r,p,v){e.cancelPendingCommit=null;do lr();while(kn!==0);if((jt&6)!==0)throw Error(b(327));if(t!==null){if(t===e.current)throw Error(b(177));if(i=t.lanes|t.childLanes,i|=yi,Jo(e,n,i,r,p,v),e===Xt&&(ut=Xt=null,mt=0),ss=t,Vo=e,uo=n,hu=i,yu=o,kd=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ah(ha,function(){return $d(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=Z.T,Z.T=null,o=se.p,se.p=2,r=jt,jt|=4;try{mh(e,t,n)}finally{jt=r,se.p=o,Z.T=l}}kn=1,Vd(),Gd(),Id()}}function Vd(){if(kn===1){kn=0;var e=Vo,t=ss,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=Z.T,Z.T=null;var l=se.p;se.p=2;var o=jt;jt|=4;try{Cd(t,e);var i=ku,r=Vi(e.containerInfo),p=i.focusedElem,v=i.selectionRange;if(r!==p&&p&&p.ownerDocument&&zc(p.ownerDocument.documentElement,p)){if(v!==null&&Os(p)){var _=v.start,Q=v.end;if(Q===void 0&&(Q=_),"selectionStart"in p)p.selectionStart=_,p.selectionEnd=Math.min(Q,p.value.length);else{var ee=p.ownerDocument||document,L=ee&&ee.defaultView||window;if(L.getSelection){var X=L.getSelection(),we=p.textContent.length,Le=Math.min(v.start,we),Ht=v.end===void 0?Le:Math.min(v.end,we);!X.extend&&Le>Ht&&(r=Ht,Ht=Le,Le=r);var A=ja(p,Le),T=ja(p,Ht);if(A&&T&&(X.rangeCount!==1||X.anchorNode!==A.node||X.anchorOffset!==A.offset||X.focusNode!==T.node||X.focusOffset!==T.offset)){var N=ee.createRange();N.setStart(A.node,A.offset),X.removeAllRanges(),Le>Ht?(X.addRange(N),X.extend(T.node,T.offset)):(N.setEnd(T.node,T.offset),X.addRange(N))}}}}for(ee=[],X=p;X=X.parentNode;)X.nodeType===1&&ee.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<ee.length;p++){var F=ee[p];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}yr=!!Mu,ku=Mu=null}finally{jt=o,se.p=l,Z.T=n}}e.current=t,kn=2}}function Gd(){if(kn===2){kn=0;var e=Vo,t=ss,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=Z.T,Z.T=null;var l=se.p;se.p=2;var o=jt;jt|=4;try{md(e,t.alternate,t)}finally{jt=o,se.p=l,Z.T=n}}kn=3}}function Id(){if(kn===4||kn===3){kn=0,yc();var e=Vo,t=ss,n=uo,l=kd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?kn=5:(kn=0,ss=Vo=null,qd(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Xo=null),sl(n),t=t.stateNode,Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Ya,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=Z.T,o=se.p,se.p=2,Z.T=null;try{for(var i=e.onRecoverableError,r=0;r<l.length;r++){var p=l[r];i(p.value,{componentStack:p.stack})}}finally{Z.T=t,se.p=o}}(uo&3)!==0&&lr(),Ua(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===gu?nc++:(nc=0,gu=e):nc=0,lc(0)}}function qd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Na(t)))}function lr(){return Vd(),Gd(),Id(),$d()}function $d(){if(kn!==5)return!1;var e=Vo,t=hu;hu=0;var n=sl(uo),l=Z.T,o=se.p;try{se.p=32>n?32:n,Z.T=null,n=yu,yu=null;var i=Vo,r=uo;if(kn=0,ss=Vo=null,uo=0,(jt&6)!==0)throw Error(b(331));var p=jt;if(jt|=4,jd(i.current),Td(i,i.current,r,n),jt=p,lc(0,!1),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Ya,i)}catch{}return!0}finally{se.p=o,Z.T=l,qd(e,t)}}function Zd(e,t,n){t=pl(n,t),t=Qr(e.stateNode,t,2),e=ge(e,t,2),e!==null&&(Sl(e,2),Ua(e))}function Nt(e,t,n){if(e.tag===3)Zd(e,e,n);else for(;t!==null;){if(t.tag===3){Zd(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xo===null||!Xo.has(l))){e=pl(n,e),n=Qf(2),l=ge(t,n,2),l!==null&&(Kf(n,l,t,e),Sl(l,2),Ua(l));break}}t=t.return}}function bu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new vh;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(fu=!0,o.add(n),e=zh.bind(null,e,t,n),t.then(e,e))}function zh(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Xt===e&&(mt&n)===n&&(rn===4||rn===3&&(mt&62914560)===mt&&300>$n()-Wc?(jt&2)===0&&cs(e,0):du|=n,is===mt&&(is=0)),Ua(e)}function Qd(e,t){t===0&&(t=ms()),e=Ma(e,t),e!==null&&(Sl(e,t),Ua(e))}function Eh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qd(e,n)}function jh(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(b(314))}l!==null&&l.delete(t),Qd(e,n)}function Ah(e,t){return Ha(e,t)}var ar=null,us=null,vu=!1,or=!1,Su=!1,Io=0;function Ua(e){e!==us&&e.next===null&&(us===null?ar=us=e:us=us.next=e),or=!0,vu||(vu=!0,kh())}function lc(e,t){if(!Su&&or){Su=!0;do for(var n=!1,l=ar;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var i=0;else{var r=l.suspendedLanes,p=l.pingedLanes;i=(1<<31-Bt(42|e)+1)-1,i&=o&~(r&~p),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,Fd(l,i))}else i=mt,i=el(l,l===Xt?i:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(i&3)===0||be(l,i)||(n=!0,Fd(l,i));l=l.next}while(n);Su=!1}}function Mh(){Kd()}function Kd(){or=vu=!1;var e=0;Io!==0&&Yh()&&(e=Io);for(var t=$n(),n=null,l=ar;l!==null;){var o=l.next,i=Pd(l,t);i===0?(l.next=null,n===null?ar=o:n.next=o,o===null&&(us=n)):(n=l,(e!==0||(i&3)!==0)&&(or=!0)),l=o}kn!==0&&kn!==5||lc(e),Io!==0&&(Io=0)}function Pd(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var r=31-Bt(i),p=1<<r,v=o[r];v===-1?((p&n)===0||(p&l)!==0)&&(o[r]=ho(p,t)):v<=t&&(e.expiredLanes|=p),i&=~p}if(t=Xt,n=mt,n=el(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Rt===2||Rt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ge(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||be(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Ge(l),sl(n)){case 2:case 8:n=il;break;case 32:n=ha;break;case 268435456:n=Ai;break;default:n=ha}return l=Wd.bind(null,e),n=Ha(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Ge(l),e.callbackPriority=2,e.callbackNode=null,2}function Wd(e,t){if(kn!==0&&kn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lr()&&e.callbackNode!==n)return null;var l=mt;return l=el(e,e===Xt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Rd(e,l,t),Pd(e,$n()),e.callbackNode!=null&&e.callbackNode===n?Wd.bind(null,e):null)}function Fd(e,t){if(lr())return null;Rd(e,t,!0)}function kh(){Vh(function(){(jt&6)!==0?Ha(ji,Mh):Kd()})}function Cu(){if(Io===0){var e=_a;e===0&&(e=Fo,Fo<<=1,(Fo&261888)===0&&(Fo=256)),Io=e}return Io}function Jd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:mo(""+e)}function ep(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Dh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var i=Jd((o[Yn]||null).action),r=l.submitter;r&&(t=(t=r[Yn]||null)?Jd(t.formAction):r.getAttribute("formAction"),t!==null&&(i=t,r=null));var p=new _e("action","action",null,l,o);e.push({event:p,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Io!==0){var v=r?ep(o,r):new FormData(o);Vr(n,{pending:!0,data:v,method:o.method,action:i},null,v)}}else typeof i=="function"&&(p.preventDefault(),v=r?ep(o,r):new FormData(o),Vr(n,{pending:!0,data:v,method:o.method,action:i},i,v))},currentTarget:o}]})}}for(var wu=0;wu<Ro.length;wu++){var Tu=Ro[wu],Rh=Tu.toLowerCase(),Nh=Tu[0].toUpperCase()+Tu.slice(1);xn(Rh,"on"+Nh)}xn(Ii,"onAnimationEnd"),xn(Fa,"onAnimationIteration"),xn(Bs,"onAnimationStart"),xn("dblclick","onDoubleClick"),xn("focusin","onFocus"),xn("focusout","onBlur"),xn(Ml,"onTransitionRun"),xn(Ec,"onTransitionStart"),xn(jc,"onTransitionCancel"),xn(Do,"onTransitionEnd"),yo("onMouseEnter",["mouseout","mouseover"]),yo("onMouseLeave",["mouseout","mouseover"]),yo("onPointerEnter",["pointerout","pointerover"]),yo("onPointerLeave",["pointerout","pointerover"]),ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_h=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function tp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var i=void 0;if(t)for(var r=l.length-1;0<=r;r--){var p=l[r],v=p.instance,_=p.currentTarget;if(p=p.listener,v!==i&&o.isPropagationStopped())break e;i=p,o.currentTarget=_;try{i(o)}catch(Q){No(Q)}o.currentTarget=null,i=v}else for(r=0;r<l.length;r++){if(p=l[r],v=p.instance,_=p.currentTarget,p=p.listener,v!==i&&o.isPropagationStopped())break e;i=p,o.currentTarget=_;try{i(o)}catch(Q){No(Q)}o.currentTarget=null,i=v}}}}function ft(e,t){var n=t[ti];n===void 0&&(n=t[ti]=new Set);var l=e+"__bubble";n.has(l)||(np(t,e,2,!1),n.add(l))}function zu(e,t,n){var l=0;t&&(l|=4),np(n,e,l,t)}var ir="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[ir]){e[ir]=!0,zr.forEach(function(n){n!=="selectionchange"&&(_h.has(n)||zu(n,!1,e),zu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ir]||(t[ir]=!0,zu("selectionchange",!1,t))}}function np(e,t,n,l){switch(Dp(t)){case 2:var o=c0;break;case 8:o=r0;break;default:o=Xu}n=o.bind(null,t,n,e),o=void 0,!vo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ju(e,t,n,l,o){var i=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var r=l.tag;if(r===3||r===4){var p=l.stateNode.containerInfo;if(p===o)break;if(r===4)for(r=l.return;r!==null;){var v=r.tag;if((v===3||v===4)&&r.stateNode.containerInfo===o)return;r=r.return}for(;p!==null;){if(r=ga(p),r===null)return;if(v=r.tag,v===5||v===6||v===26||v===27){l=i=r;continue e}p=p.parentNode}}l=l.return}xo(function(){var _=i,Q=Oi(n),ee=[];e:{var L=Ac.get(e);if(L!==void 0){var X=_e,we=e;switch(e){case"keypress":if(Sa(n)===0)break e;case"keydown":case"keyup":X=Qa;break;case"focusin":we="focus",X=To;break;case"focusout":we="blur",X=To;break;case"beforeblur":case"afterblur":X=To;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=zo;break;case Ii:case Fa:case Bs:X=ii;break;case Do:X=ql;break;case"scroll":case"scrollend":X=Ca;break;case"wheel":X=Eo;break;case"copy":case"cut":case"paste":X=Gt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Li;break;case"toggle":case"beforetoggle":X=ri}var Le=(t&4)!==0,Ht=!Le&&(e==="scroll"||e==="scrollend"),A=Le?L!==null?L+"Capture":null:L;Le=[];for(var T=_,N;T!==null;){var F=T;if(N=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||N===null||A===null||(F=bo(T,A),F!=null&&Le.push(oc(T,F,N))),Ht)break;T=T.return}0<Le.length&&(L=new X(L,we,null,n,Q),ee.push({event:L,listeners:Le}))}}if((t&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",L&&n!==_i&&(we=n.relatedTarget||n.fromElement)&&(ga(we)||we[en]))break e;if((X||L)&&(L=Q.window===Q?Q:(L=Q.ownerDocument)?L.defaultView||L.parentWindow:window,X?(we=n.relatedTarget||n.toElement,X=_,we=we?ga(we):null,we!==null&&(Ht=he(we),Le=we.tag,we!==Ht||Le!==5&&Le!==27&&Le!==6)&&(we=null)):(X=null,we=_),X!==we)){if(Le=wo,F="onMouseLeave",A="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(Le=Li,F="onPointerLeave",A="onPointerEnter",T="pointer"),Ht=X==null?L:Il(X),N=we==null?L:Il(we),L=new Le(F,T+"leave",X,n,Q),L.target=Ht,L.relatedTarget=N,F=null,ga(Q)===_&&(Le=new Le(A,T+"enter",we,n,Q),Le.target=N,Le.relatedTarget=Ht,F=Le),Ht=F,X&&we)t:{for(Le=Oh,A=X,T=we,N=0,F=A;F;F=Le(F))N++;F=0;for(var Be=T;Be;Be=Le(Be))F++;for(;0<N-F;)A=Le(A),N--;for(;0<F-N;)T=Le(T),F--;for(;N--;){if(A===T||T!==null&&A===T.alternate){Le=A;break t}A=Le(A),T=Le(T)}Le=null}else Le=null;X!==null&&lp(ee,L,X,Le,!1),we!==null&&Ht!==null&&lp(ee,Ht,we,Le,!0)}}e:{if(L=_?Il(_):window,X=L.nodeName&&L.nodeName.toLowerCase(),X==="select"||X==="input"&&L.type==="file")var zt=jl;else if(di(L))if(Ds)zt=Wa;else{zt=Ea;var ke=Ns}else X=L.nodeName,!X||X.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?_&&Ni(_.elementType)&&(zt=jl):zt=_s;if(zt&&(zt=zt(e,_))){Ao(ee,zt,n,Q);break e}ke&&ke(e,L,_),e==="focusout"&&_&&L.type==="number"&&_.memoizedProps.value!=null&&jn(L,"number",L.value)}switch(ke=_?Il(_):window,e){case"focusin":(di(ke)||ke.contentEditable==="true")&&(ia=ke,ko=_,fl=null);break;case"focusout":fl=ko=ia=null;break;case"mousedown":Gi=!0;break;case"contextmenu":case"mouseup":case"dragend":Gi=!1,yt(ee,n,Q);break;case"selectionchange":if(hi)break;case"keydown":case"keyup":yt(ee,n,Q)}var et;if(mn)e:{switch(e){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Ka?Hi(e,n)&&(xt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(xt="onCompositionStart");xt&&(jo&&n.locale!=="ko"&&(Ka||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Ka&&(et=So()):(nl=Q,oi="value"in nl?nl.value:nl.textContent,Ka=!0)),ke=sr(_,xt),0<ke.length&&(xt=new Cc(xt,e,null,n,Q),ee.push({event:xt,listeners:ke}),et?xt.data=et:(et=ks(n),et!==null&&(xt.data=et)))),(et=Er?wc(e,n):Yi(e,n))&&(xt=sr(_,"onBeforeInput"),0<xt.length&&(ke=new Cc("onBeforeInput","beforeinput",null,n,Q),ee.push({event:ke,listeners:xt}),ke.data=et)),Dh(ee,e,_,n,Q)}tp(ee,t)})}function oc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sr(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,i=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||i===null||(o=bo(e,n),o!=null&&l.unshift(oc(e,o,i)),o=bo(e,t),o!=null&&l.push(oc(e,o,i))),e.tag===3)return l;e=e.return}return[]}function Oh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function lp(e,t,n,l,o){for(var i=t._reactName,r=[];n!==null&&n!==l;){var p=n,v=p.alternate,_=p.stateNode;if(p=p.tag,v!==null&&v===l)break;p!==5&&p!==26&&p!==27||_===null||(v=_,o?(_=bo(n,i),_!=null&&r.unshift(oc(n,_,v))):o||(_=bo(n,i),_!=null&&r.push(oc(n,_,v)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var Bh=/\r\n?/g,Uh=/\u0000|\uFFFD/g;function ap(e){return(typeof e=="string"?e:""+e).replace(Bh,`
`).replace(Uh,"")}function op(e,t){return t=ap(t),ap(e)===t}function Lt(e,t,n,l,o,i){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||xa(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&xa(e,""+l);break;case"className":go(e,"class",l);break;case"tabIndex":go(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":go(e,n,l);break;case"style":li(e,l,i);break;case"data":if(t!=="object"){go(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=mo(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Lt(e,t,"name",o.name,o,null),Lt(e,t,"formEncType",o.formEncType,o,null),Lt(e,t,"formMethod",o.formMethod,o,null),Lt(e,t,"formTarget",o.formTarget,o,null)):(Lt(e,t,"encType",o.encType,o,null),Lt(e,t,"method",o.method,o,null),Lt(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=mo(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=Tl);break;case"onScroll":l!=null&&ft("scroll",e);break;case"onScrollEnd":l!=null&&ft("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(b(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=mo(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":ft("beforetoggle",e),ft("toggle",e),Di(e,"popover",l);break;case"xlinkActuate":Ve(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ve(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ve(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ve(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ve(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ve(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ve(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ve(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ve(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Di(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=tl.get(n)||n,Di(e,n,l))}}function Au(e,t,n,l,o,i){switch(n){case"style":li(e,l,i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(b(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"children":typeof l=="string"?xa(e,l):(typeof l=="number"||typeof l=="bigint")&&xa(e,""+l);break;case"onScroll":l!=null&&ft("scroll",e);break;case"onScrollEnd":l!=null&&ft("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Tl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xc.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),i=e[Yn]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,o),typeof l=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Di(e,n,l)}}}function qn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",e),ft("load",e);var l=!1,o=!1,i;for(i in n)if(n.hasOwnProperty(i)){var r=n[i];if(r!=null)switch(i){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:Lt(e,t,i,r,n,null)}}o&&Lt(e,t,"srcSet",n.srcSet,n,null),l&&Lt(e,t,"src",n.src,n,null);return;case"input":ft("invalid",e);var p=i=r=o=null,v=null,_=null;for(l in n)if(n.hasOwnProperty(l)){var Q=n[l];if(Q!=null)switch(l){case"name":o=Q;break;case"type":r=Q;break;case"checked":v=Q;break;case"defaultChecked":_=Q;break;case"value":i=Q;break;case"defaultValue":p=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(b(137,t));break;default:Lt(e,t,l,Q,n,null)}}ze(e,i,p,v,_,r,o,!1);return;case"select":ft("invalid",e),l=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(p=n[o],p!=null))switch(o){case"value":i=p;break;case"defaultValue":r=p;break;case"multiple":l=p;default:Lt(e,t,o,p,n,null)}t=i,n=r,e.multiple=!!l,t!=null?Tt(e,!!l,t,!1):n!=null&&Tt(e,!!l,n,!0);return;case"textarea":ft("invalid",e),i=o=l=null;for(r in n)if(n.hasOwnProperty(r)&&(p=n[r],p!=null))switch(r){case"value":l=p;break;case"defaultValue":o=p;break;case"children":i=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(b(91));break;default:Lt(e,t,r,p,n,null)}wl(e,l,o,i);return;case"option":for(v in n)if(n.hasOwnProperty(v)&&(l=n[v],l!=null))switch(v){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Lt(e,t,v,l,n,null)}return;case"dialog":ft("beforetoggle",e),ft("toggle",e),ft("cancel",e),ft("close",e);break;case"iframe":case"object":ft("load",e);break;case"video":case"audio":for(l=0;l<ac.length;l++)ft(ac[l],e);break;case"image":ft("error",e),ft("load",e);break;case"details":ft("toggle",e);break;case"embed":case"source":case"link":ft("error",e),ft("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_ in n)if(n.hasOwnProperty(_)&&(l=n[_],l!=null))switch(_){case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:Lt(e,t,_,l,n,null)}return;default:if(Ni(t)){for(Q in n)n.hasOwnProperty(Q)&&(l=n[Q],l!==void 0&&Au(e,t,Q,l,n,void 0));return}}for(p in n)n.hasOwnProperty(p)&&(l=n[p],l!=null&&Lt(e,t,p,l,n,null))}function Lh(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,r=null,p=null,v=null,_=null,Q=null;for(X in n){var ee=n[X];if(n.hasOwnProperty(X)&&ee!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":v=ee;default:l.hasOwnProperty(X)||Lt(e,t,X,null,l,ee)}}for(var L in l){var X=l[L];if(ee=n[L],l.hasOwnProperty(L)&&(X!=null||ee!=null))switch(L){case"type":i=X;break;case"name":o=X;break;case"checked":_=X;break;case"defaultChecked":Q=X;break;case"value":r=X;break;case"defaultValue":p=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(b(137,t));break;default:X!==ee&&Lt(e,t,L,X,l,ee)}}an(e,r,p,v,_,Q,i,o);return;case"select":X=r=p=L=null;for(i in n)if(v=n[i],n.hasOwnProperty(i)&&v!=null)switch(i){case"value":break;case"multiple":X=v;default:l.hasOwnProperty(i)||Lt(e,t,i,null,l,v)}for(o in l)if(i=l[o],v=n[o],l.hasOwnProperty(o)&&(i!=null||v!=null))switch(o){case"value":L=i;break;case"defaultValue":p=i;break;case"multiple":r=i;default:i!==v&&Lt(e,t,o,i,l,v)}t=p,n=r,l=X,L!=null?Tt(e,!!n,L,!1):!!l!=!!n&&(t!=null?Tt(e,!!n,t,!0):Tt(e,!!n,n?[]:"",!1));return;case"textarea":X=L=null;for(p in n)if(o=n[p],n.hasOwnProperty(p)&&o!=null&&!l.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Lt(e,t,p,null,l,o)}for(r in l)if(o=l[r],i=n[r],l.hasOwnProperty(r)&&(o!=null||i!=null))switch(r){case"value":L=o;break;case"defaultValue":X=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(b(91));break;default:o!==i&&Lt(e,t,r,o,l,i)}la(e,L,X);return;case"option":for(var we in n)if(L=n[we],n.hasOwnProperty(we)&&L!=null&&!l.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:Lt(e,t,we,null,l,L)}for(v in l)if(L=l[v],X=n[v],l.hasOwnProperty(v)&&L!==X&&(L!=null||X!=null))switch(v){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Lt(e,t,v,L,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in n)L=n[Le],n.hasOwnProperty(Le)&&L!=null&&!l.hasOwnProperty(Le)&&Lt(e,t,Le,null,l,L);for(_ in l)if(L=l[_],X=n[_],l.hasOwnProperty(_)&&L!==X&&(L!=null||X!=null))switch(_){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(b(137,t));break;default:Lt(e,t,_,L,l,X)}return;default:if(Ni(t)){for(var Ht in n)L=n[Ht],n.hasOwnProperty(Ht)&&L!==void 0&&!l.hasOwnProperty(Ht)&&Au(e,t,Ht,void 0,l,L);for(Q in l)L=l[Q],X=n[Q],!l.hasOwnProperty(Q)||L===X||L===void 0&&X===void 0||Au(e,t,Q,L,l,X);return}}for(var A in n)L=n[A],n.hasOwnProperty(A)&&L!=null&&!l.hasOwnProperty(A)&&Lt(e,t,A,null,l,L);for(ee in l)L=l[ee],X=n[ee],!l.hasOwnProperty(ee)||L===X||L==null&&X==null||Lt(e,t,ee,L,l,X)}function ip(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],i=o.transferSize,r=o.initiatorType,p=o.duration;if(i&&p&&ip(r)){for(r=0,p=o.responseEnd,l+=1;l<n.length;l++){var v=n[l],_=v.startTime;if(_>p)break;var Q=v.transferSize,ee=v.initiatorType;Q&&ip(ee)&&(v=v.responseEnd,r+=Q*(v<p?1:(p-_)/(v-_)))}if(--l,t+=8*(i+r)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Mu=null,ku=null;function cr(e){return e.nodeType===9?e:e.ownerDocument}function sp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Du(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ru=null;function Yh(){var e=window.event;return e&&e.type==="popstate"?e===Ru?!1:(Ru=e,!0):(Ru=null,!1)}var rp=typeof setTimeout=="function"?setTimeout:void 0,Xh=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,Vh=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(e){return up.resolve(null).then(e).catch(Gh)}:rp;function Gh(e){setTimeout(function(){throw e})}function qo(e){return e==="head"}function fp(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),hs(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")ic(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,ic(n);for(var i=n.firstChild;i;){var r=i.nextSibling,p=i.nodeName;i[ya]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=r}}else n==="body"&&ic(e.ownerDocument.body);n=o}while(n);hs(t)}function dp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Nu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Nu(n),Vt(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Ih(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ya])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Jl(e.nextSibling),e===null)break}return null}function qh(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Jl(e.nextSibling),e===null))return null;return e}function pp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Jl(e.nextSibling),e===null))return null;return e}function _u(e){return e.data==="$?"||e.data==="$~"}function Ou(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function $h(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Jl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Bu=null;function hp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Jl(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function yp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function gp(e,t,n){switch(t=cr(n),e){case"html":if(e=t.documentElement,!e)throw Error(b(452));return e;case"head":if(e=t.head,!e)throw Error(b(453));return e;case"body":if(e=t.body,!e)throw Error(b(454));return e;default:throw Error(b(451))}}function ic(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Vt(e)}var ea=new Map,mp=new Set;function rr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fo=se.d;se.d={f:Zh,r:Qh,D:Kh,C:Ph,L:Wh,m:Fh,X:e0,S:Jh,M:t0};function Zh(){var e=fo.f(),t=er();return e||t}function Qh(e){var t=Cl(e);t!==null&&t.tag===5&&t.type==="form"?_f(t):fo.r(e)}var fs=typeof document>"u"?null:document;function xp(e,t,n){var l=fs;if(l&&typeof t=="string"&&t){var o=He(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),mp.has(o)||(mp.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),qn(t,"link",e),gn(t),l.head.appendChild(t)))}}function Kh(e){fo.D(e),xp("dns-prefetch",e,null)}function Ph(e,t){fo.C(e,t),xp("preconnect",e,t)}function Wh(e,t,n){fo.L(e,t,n);var l=fs;if(l&&e&&t){var o='link[rel="preload"][as="'+He(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+He(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+He(n.imageSizes)+'"]')):o+='[href="'+He(e)+'"]';var i=o;switch(t){case"style":i=ds(e);break;case"script":i=ps(e)}ea.has(i)||(e=C({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ea.set(i,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(sc(i))||t==="script"&&l.querySelector(cc(i))||(t=l.createElement("link"),qn(t,"link",e),gn(t),l.head.appendChild(t)))}}function Fh(e,t){fo.m(e,t);var n=fs;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+He(l)+'"][href="'+He(e)+'"]',i=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=ps(e)}if(!ea.has(i)&&(e=C({rel:"modulepreload",href:e},t),ea.set(i,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(cc(i)))return}l=n.createElement("link"),qn(l,"link",e),gn(l),n.head.appendChild(l)}}}function Jh(e,t,n){fo.S(e,t,n);var l=fs;if(l&&e){var o=Xa(l).hoistableStyles,i=ds(e);t=t||"default";var r=o.get(i);if(!r){var p={loading:0,preload:null};if(r=l.querySelector(sc(i)))p.loading=5;else{e=C({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ea.get(i))&&Uu(e,n);var v=r=l.createElement("link");gn(v),qn(v,"link",e),v._p=new Promise(function(_,Q){v.onload=_,v.onerror=Q}),v.addEventListener("load",function(){p.loading|=1}),v.addEventListener("error",function(){p.loading|=2}),p.loading|=4,ur(r,t,l)}r={type:"stylesheet",instance:r,count:1,state:p},o.set(i,r)}}}function e0(e,t){fo.X(e,t);var n=fs;if(n&&e){var l=Xa(n).hoistableScripts,o=ps(e),i=l.get(o);i||(i=n.querySelector(cc(o)),i||(e=C({src:e,async:!0},t),(t=ea.get(o))&&Lu(e,t),i=n.createElement("script"),gn(i),qn(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(o,i))}}function t0(e,t){fo.M(e,t);var n=fs;if(n&&e){var l=Xa(n).hoistableScripts,o=ps(e),i=l.get(o);i||(i=n.querySelector(cc(o)),i||(e=C({src:e,async:!0,type:"module"},t),(t=ea.get(o))&&Lu(e,t),i=n.createElement("script"),gn(i),qn(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(o,i))}}function bp(e,t,n,l){var o=(o=Ne.current)?rr(o):null;if(!o)throw Error(b(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ds(n.href),n=Xa(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ds(n.href);var i=Xa(o).hoistableStyles,r=i.get(e);if(r||(o=o.ownerDocument||o,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,r),(i=o.querySelector(sc(e)))&&!i._p&&(r.instance=i,r.state.loading=5),ea.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ea.set(e,n),i||n0(o,e,n,r.state))),t&&l===null)throw Error(b(528,""));return r}if(t&&l!==null)throw Error(b(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ps(n),n=Xa(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(b(444,e))}}function ds(e){return'href="'+He(e)+'"'}function sc(e){return'link[rel="stylesheet"]['+e+"]"}function vp(e){return C({},e,{"data-precedence":e.precedence,precedence:null})}function n0(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),qn(t,"link",n),gn(t),e.head.appendChild(t))}function ps(e){return'[src="'+He(e)+'"]'}function cc(e){return"script[async]"+e}function Sp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+He(n.href)+'"]');if(l)return t.instance=l,gn(l),l;var o=C({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),gn(l),qn(l,"style",o),ur(l,n.precedence,e),t.instance=l;case"stylesheet":o=ds(n.href);var i=e.querySelector(sc(o));if(i)return t.state.loading|=4,t.instance=i,gn(i),i;l=vp(n),(o=ea.get(o))&&Uu(l,o),i=(e.ownerDocument||e).createElement("link"),gn(i);var r=i;return r._p=new Promise(function(p,v){r.onload=p,r.onerror=v}),qn(i,"link",l),t.state.loading|=4,ur(i,n.precedence,e),t.instance=i;case"script":return i=ps(n.src),(o=e.querySelector(cc(i)))?(t.instance=o,gn(o),o):(l=n,(o=ea.get(i))&&(l=C({},n),Lu(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),gn(o),qn(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(b(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ur(l,n.precedence,e));return t.instance}function ur(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,i=o,r=0;r<l.length;r++){var p=l[r];if(p.dataset.precedence===t)i=p;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Uu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var fr=null;function Cp(e,t,n){if(fr===null){var l=new Map,o=fr=new Map;o.set(n,l)}else o=fr,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[ya]||i[kt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var r=i.getAttribute(t)||"";r=e+r;var p=l.get(r);p?p.push(i):l.set(r,[i])}}return l}function wp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function l0(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Tp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function a0(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=ds(l.href),i=t.querySelector(sc(o));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=dr.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,gn(i);return}i=t.ownerDocument||t,l=vp(l),(o=ea.get(o))&&Uu(l,o),i=i.createElement("link"),gn(i);var r=i;r._p=new Promise(function(p,v){r.onload=p,r.onerror=v}),qn(i,"link",l),n.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=dr.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Hu=0;function o0(e,t){return e.stylesheets&&e.count===0&&hr(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&hr(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&Hu===0&&(Hu=62500*Hh());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hr(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>Hu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function dr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pr=null;function hr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pr=new Map,t.forEach(i0,e),pr=null,dr.call(e))}function i0(e,t){if(!(t.state.loading&4)){var n=pr.get(e);if(n)var l=n.get(null);else{n=new Map,pr.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var r=o[i];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),l=r)}l&&n.set(null,l)}o=t.instance,r=o.getAttribute("data-precedence"),i=n.get(r)||l,i===l&&n.set(null,o),n.set(r,o),this.count++,l=dr.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),i?i.parentNode.insertBefore(o,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var rc={$$typeof:xe,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function s0(e,t,n,l,o,i,r,p,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.hiddenUpdates=na(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function zp(e,t,n,l,o,i,r,p,v,_,Q,ee){return e=new s0(e,t,n,r,v,_,Q,ee,p),t=1,i===!0&&(t|=24),i=Ee(3,null,null,t),e.current=i,i.stateNode=e,t=Ji(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:l,isDehydrated:n,cache:t},W(i),e}function Ep(e){return e?(e=Dl,e):Dl}function jp(e,t,n,l,o,i){o=Ep(o),l.context===null?l.context=o:l.pendingContext=o,l=je(t),l.payload={element:n},i=i===void 0?null:i,i!==null&&(l.callback=i),n=ge(e,l,t),n!==null&&(vl(n,e,t),Oe(n,e,t))}function Ap(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yu(e,t){Ap(e,t),(e=e.alternate)&&Ap(e,t)}function Mp(e){if(e.tag===13||e.tag===31){var t=Ma(e,67108864);t!==null&&vl(t,e,67108864),Yu(e,67108864)}}function kp(e){if(e.tag===13||e.tag===31){var t=Hl();t=ki(t);var n=Ma(e,t);n!==null&&vl(n,e,t),Yu(e,t)}}var yr=!0;function c0(e,t,n,l){var o=Z.T;Z.T=null;var i=se.p;try{se.p=2,Xu(e,t,n,l)}finally{se.p=i,Z.T=o}}function r0(e,t,n,l){var o=Z.T;Z.T=null;var i=se.p;try{se.p=8,Xu(e,t,n,l)}finally{se.p=i,Z.T=o}}function Xu(e,t,n,l){if(yr){var o=Vu(l);if(o===null)ju(e,t,l,gr,n),Rp(e,l);else if(f0(o,e,t,n,l))l.stopPropagation();else if(Rp(e,l),t&4&&-1<u0.indexOf(e)){for(;o!==null;){var i=Cl(o);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var r=Ie(i.pendingLanes);if(r!==0){var p=i;for(p.pendingLanes|=2,p.entangledLanes|=2;r;){var v=1<<31-Bt(r);p.entanglements[1]|=v,r&=~v}Ua(i),(jt&6)===0&&(Fc=$n()+500,lc(0))}}break;case 31:case 13:p=Ma(i,2),p!==null&&vl(p,i,2),er(),Yu(i,2)}if(i=Vu(l),i===null&&ju(e,t,l,gr,n),i===o)break;o=i}o!==null&&l.stopPropagation()}else ju(e,t,l,null,n)}}function Vu(e){return e=Oi(e),Gu(e)}var gr=null;function Gu(e){if(gr=null,e=ga(e),e!==null){var t=he(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=pe(t),e!==null)return e;e=null}else if(n===31){if(e=Ke(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return gr=e,null}function Dp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ei()){case ji:return 2;case il:return 8;case ha:case Wo:return 32;case Ai:return 268435456;default:return 32}default:return 32}}var Iu=!1,$o=null,Zo=null,Qo=null,uc=new Map,fc=new Map,Ko=[],u0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rp(e,t){switch(e){case"focusin":case"focusout":$o=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Qo=null;break;case"pointerover":case"pointerout":uc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(t.pointerId)}}function dc(e,t,n,l,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Cl(t),t!==null&&Mp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function f0(e,t,n,l,o){switch(t){case"focusin":return $o=dc($o,e,t,n,l,o),!0;case"dragenter":return Zo=dc(Zo,e,t,n,l,o),!0;case"mouseover":return Qo=dc(Qo,e,t,n,l,o),!0;case"pointerover":var i=o.pointerId;return uc.set(i,dc(uc.get(i)||null,e,t,n,l,o)),!0;case"gotpointercapture":return i=o.pointerId,fc.set(i,dc(fc.get(i)||null,e,t,n,l,o)),!0}return!1}function Np(e){var t=ga(e.target);if(t!==null){var n=he(t);if(n!==null){if(t=n.tag,t===13){if(t=pe(n),t!==null){e.blockedOn=t,zn(e.priority,function(){kp(n)});return}}else if(t===31){if(t=Ke(n),t!==null){e.blockedOn=t,zn(e.priority,function(){kp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vu(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);_i=l,n.target.dispatchEvent(l),_i=null}else return t=Cl(n),t!==null&&Mp(t),e.blockedOn=n,!1;t.shift()}return!0}function _p(e,t,n){mr(e)&&n.delete(t)}function d0(){Iu=!1,$o!==null&&mr($o)&&($o=null),Zo!==null&&mr(Zo)&&(Zo=null),Qo!==null&&mr(Qo)&&(Qo=null),uc.forEach(_p),fc.forEach(_p)}function xr(e,t){e.blockedOn===t&&(e.blockedOn=null,Iu||(Iu=!0,B.unstable_scheduleCallback(B.unstable_NormalPriority,d0)))}var br=null;function Op(e){br!==e&&(br=e,B.unstable_scheduleCallback(B.unstable_NormalPriority,function(){br===e&&(br=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(Gu(l||n)===null)continue;break}var i=Cl(n);i!==null&&(e.splice(t,3),t-=3,Vr(i,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function hs(e){function t(v){return xr(v,e)}$o!==null&&xr($o,e),Zo!==null&&xr(Zo,e),Qo!==null&&xr(Qo,e),uc.forEach(t),fc.forEach(t);for(var n=0;n<Ko.length;n++){var l=Ko[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ko.length&&(n=Ko[0],n.blockedOn===null);)Np(n),n.blockedOn===null&&Ko.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],i=n[l+1],r=o[Yn]||null;if(typeof i=="function")r||Op(n);else if(r){var p=null;if(i&&i.hasAttribute("formAction")){if(o=i,r=i[Yn]||null)p=r.formAction;else if(Gu(o)!==null)continue}else p=r.action;typeof p=="function"?n[l+1]=p:(n.splice(l,3),l-=3),Op(n)}}}function Bp(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(r){return o=r})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function qu(e){this._internalRoot=e}vr.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));var n=t.current,l=Hl();jp(n,l,e,t,null,null)},vr.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jp(e.current,2,null,e,null,null),er(),t[en]=null}};function vr(e){this._internalRoot=e}vr.prototype.unstable_scheduleHydration=function(e){if(e){var t=ei();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ko.length&&t!==0&&t<Ko[n].priority;n++);Ko.splice(n,0,e),n===0&&Np(e)}};var Up=D.version;if(Up!=="19.2.0")throw Error(b(527,Up,"19.2.0"));se.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=$(t),e=e!==null?ve(e):null,e=e===null?null:e.stateNode,e};var p0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sr.isDisabled&&Sr.supportsFiber)try{Ya=Sr.inject(p0),Dn=Sr}catch{}}return hc.createRoot=function(e,t){if(!ie(e))throw Error(b(299));var n=!1,l="",o=If,i=qf,r=$f;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=zp(e,1,!1,null,null,n,l,null,o,i,r,Bp),e[en]=t.current,Eu(e),new qu(t)},hc.hydrateRoot=function(e,t,n){if(!ie(e))throw Error(b(299));var l=!1,o="",i=If,r=qf,p=$f,v=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError),n.formState!==void 0&&(v=n.formState)),t=zp(e,1,!0,t,n??null,l,o,v,i,r,p,Bp),t.context=Ep(null),n=t.current,l=Hl(),l=ki(l),o=je(l),o.callback=null,ge(n,o,l),n=l,t.current.lanes=n,Sl(t,n),Ua(t),e[en]=t.current,Eu(e),new vr(t)},hc.version="19.2.0",hc}var Zp;function T0(){if(Zp)return Qu.exports;Zp=1;function B(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(B)}catch(D){console.error(D)}}return B(),Qu.exports=w0(),Qu.exports}var z0=T0();function E0(B,D){return B?D?{minX:Math.min(B.minX,D.minX),minY:Math.min(B.minY,D.minY),maxX:Math.max(B.maxX,D.maxX),maxY:Math.max(B.maxY,D.maxY)}:B:D}function j0(B,D,oe,b,ie,he,pe,Ke,ye){const $=B/2,ve=D/2,C=[{x:-$,y:-ve},{x:$,y:-ve},{x:$,y:ve},{x:-$,y:ve}],fe=ye*Math.PI/180,Ae=Math.sin(fe),ae=Math.cos(fe);let Se=1/0,ct=1/0,Te=-1/0,dt=-1/0;for(const xe of C){const pt=xe.x*pe,ht=xe.y*Ke,$t=pt*ae-ht*Ae,Me=pt*Ae+ht*ae,_t=oe+ie+$t,z=b+he+Me;_t<Se&&(Se=_t),z<ct&&(ct=z),_t>Te&&(Te=_t),z>dt&&(dt=z)}return{minX:Se,minY:ct,maxX:Te,maxY:dt}}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=B=>B.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),M0=B=>B.replace(/^([A-Z])|[\s-_]+(\w)/g,(D,oe,b)=>b?b.toUpperCase():oe.toLowerCase()),Qp=B=>{const D=M0(B);return D.charAt(0).toUpperCase()+D.slice(1)},Jp=(...B)=>B.filter((D,oe,b)=>!!D&&D.trim()!==""&&b.indexOf(D)===oe).join(" ").trim(),k0=B=>{for(const D in B)if(D.startsWith("aria-")||D==="role"||D==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=w.forwardRef(({color:B="currentColor",size:D=24,strokeWidth:oe=2,absoluteStrokeWidth:b,className:ie="",children:he,iconNode:pe,...Ke},ye)=>w.createElement("svg",{ref:ye,...D0,width:D,height:D,stroke:B,strokeWidth:b?Number(oe)*24/Number(D):oe,className:Jp("lucide",ie),...!he&&!k0(Ke)&&{"aria-hidden":"true"},...Ke},[...pe.map(([$,ve])=>w.createElement($,ve)),...Array.isArray(he)?he:[he]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=(B,D)=>{const oe=w.forwardRef(({className:b,...ie},he)=>w.createElement(R0,{ref:he,iconNode:D,className:Jp(`lucide-${A0(Qp(B))}`,`lucide-${B}`,b),...ie}));return oe.displayName=Qp(B),oe};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],_0=eh("mouse-pointer",N0);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],B0=eh("pen-line",O0),Cr="#2CA02C",th="#F0E442",nh="#00BFC4",Fu="#000000",U0="#00008b",wr="#FF0000",lh={DEFAULT_SIZE:24},ef={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},Ti={DEFAULT_SIZE:26};let tf=1;function Yl(){return tf++}function Kp(B){tf=B}function Pp(){return tf}function L0(B="id"){return`${B}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function Wp(B){return Math.round(B*1e3)/1e3}function Qt(B){return{x:Wp(B.x),y:Wp(B.y)}}function H0(B){return ef[B]?.defaultPins||2}function Y0(B,D,oe,b,ie,he=lh.DEFAULT_SIZE){const pe={id:L0("comp"),componentType:B,designator:"",layer:D,x:oe,y:b,color:ie,size:he,pinCount:H0(B),pinConnections:[]};switch(pe.pinConnections=new Array(pe.pinCount).fill(""),B){case"Battery":return{...pe,componentType:"Battery"};case"Capacitor":return{...pe,componentType:"Capacitor"};case"Diode":return{...pe,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...pe,componentType:"Fuse"};case"FerriteBead":return{...pe,componentType:"FerriteBead"};case"Connector":return{...pe,componentType:"Connector",gender:"N/A"};case"Jumper":return{...pe,componentType:"Jumper"};case"Relay":return{...pe,componentType:"Relay"};case"Inductor":return{...pe,componentType:"Inductor"};case"Speaker":return{...pe,componentType:"Speaker"};case"Motor":return{...pe,componentType:"Motor"};case"PowerSupply":return{...pe,componentType:"PowerSupply"};case"Transistor":return{...pe,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...pe,componentType:"Resistor"};case"ResistorNetwork":return{...pe,componentType:"ResistorNetwork"};case"Thermistor":return{...pe,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...pe,componentType:"Switch"};case"Transformer":return{...pe,componentType:"Transformer"};case"TestPoint":return{...pe,componentType:"TestPoint"};case"IntegratedCircuit":return{...pe,componentType:"IntegratedCircuit"};case"VacuumTube":return{...pe,componentType:"VacuumTube"};case"VariableResistor":return{...pe,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...pe,componentType:"Crystal"};case"ZenerDiode":return{...pe,componentType:"ZenerDiode"};default:return{...pe,componentType:"Resistor"}}}class X0{parent=new Map;rank=new Map;find(D){return this.parent.has(D)?(this.parent.get(D)!==D&&this.parent.set(D,this.find(this.parent.get(D))),this.parent.get(D)):(this.parent.set(D,D),this.rank.set(D,0),D)}union(D,oe){const b=this.find(D),ie=this.find(oe);if(b===ie)return;const he=this.rank.get(b)||0,pe=this.rank.get(ie)||0;he<pe?this.parent.set(b,ie):he>pe?this.parent.set(ie,b):(this.parent.set(ie,b),this.rank.set(b,he+1))}getGroups(){const D=new Map;for(const oe of this.parent.keys()){const b=this.find(oe);D.has(b)||D.set(b,[]),D.get(b).push(oe)}return D}}function V0(B,D,oe,b,ie){const he=new Map;let pe=0,Ke=0,ye=0,$=0;for(const Ae of B)if((Ae.type==="via"||Ae.type==="pad")&&Ae.points.length>0){const ae=Ae.points[0];if(ae.id!==void 0)if(!he.has(ae.id))he.set(ae.id,{id:ae.id,type:Ae.type==="via"?"via":"pad",x:ae.x,y:ae.y}),Ae.type==="via"?pe++:Ke++;else{const Se=he.get(ae.id);Se.type==="trace_point"&&($++,Se.type=Ae.type==="via"?"via":"pad")}}else if(Ae.type==="trace"){for(const ae of Ae.points)if(ae.id!==void 0)if(!he.has(ae.id))he.set(ae.id,{id:ae.id,type:"trace_point",x:ae.x,y:ae.y}),ye++;else{const Se=he.get(ae.id);(Se.type==="via"||Se.type==="pad")&&$++}}console.log(`[Connectivity] Added ${pe} vias, ${Ke} pads, ${ye} trace points to graph`),$>0&&console.log(`[Connectivity] Found ${$} nodes where vias/pads share Node IDs with trace points (automatic connection)`);for(const Ae of oe)if(Ae.pointId!==void 0){const ae=ie.find(Se=>Se.id===Ae.powerBusId);he.set(Ae.pointId,{id:Ae.pointId,type:"power",x:Ae.x,y:Ae.y,voltage:ae?.voltage||Ae.type||"UNKNOWN",powerBusId:Ae.powerBusId})}for(const Ae of b){const ae=Ae;ae.pointId!==void 0&&he.set(ae.pointId,{id:ae.pointId,type:"ground",x:Ae.x,y:Ae.y})}let ve=0,C=0,fe=0;for(const Ae of D){const ae=Ae.abbreviation?.trim()||Ae.designator?.trim();if(ae)for(let Se=0;Se<Ae.pinCount;Se++){const ct=Ae.pinConnections?.[Se]||"";if(ct&&ct.trim()!==""){const Te=parseInt(ct.trim(),10);if(!isNaN(Te)&&Te>0)if(ve++,!he.has(Te))he.set(Te,{id:Te,type:"component_pin",x:Ae.x,y:Ae.y,componentId:Ae.id,pinIndex:Se}),fe++,console.warn(`[Connectivity] Component ${ae} pin ${Se+1}: Node ID ${Te} does NOT exist in vias/pads/traces - creating isolated component pin node`);else{const dt=he.get(Te),xe=dt.type;dt.componentId=Ae.id,dt.pinIndex=Se,dt.type="component_pin",C++,console.log(`[Connectivity] Component ${ae} pin ${Se+1}: Connected to existing Node ID ${Te} (was ${xe})`)}}}}return console.log(`[Connectivity] Component pins: ${ve} total, ${C} connected to existing nodes, ${fe} isolated (no matching via/pad/trace)`),he}function G0(B,D){const oe=new X0;let b=0,ie=0;for(const[ve,C]of D)B.has(ve)&&B.has(C)?(oe.union(ve,C),b++):(B.has(ve)||ie++,B.has(C)||ie++);console.log(`[Connectivity] Union-find: Processed ${D.length} connections, ${b} valid, ${ie} missing nodes`);const he=[];for(const[ve,C]of B)C.type==="ground"&&he.push(ve);if(he.length>1){const ve=he[0];for(let C=1;C<he.length;C++)oe.union(ve,he[C]);console.log(`[Connectivity] Unified ${he.length} ground nodes into a single net`)}const pe=new Map;for(const[ve,C]of B)if(C.type==="power"&&C.voltage){const fe=C.voltage.trim();pe.has(fe)||pe.set(fe,[]),pe.get(fe).push(ve)}for(const[ve,C]of pe)if(C.length>1){const fe=C[0];for(let Ae=1;Ae<C.length;Ae++)oe.union(fe,C[Ae]);console.log(`[Connectivity] Unified ${C.length} power nodes with voltage "${ve}" into a single net`)}for(const ve of B.keys())oe.find(ve);const Ke=oe.getGroups(),ye=new Map;console.log(`[Connectivity] Union-find created ${Ke.size} net groups`);const $=new Map;for(const[,ve]of Ke){const C=ve.length;$.set(C,($.get(C)||0)+1)}console.log("[Connectivity] Net size distribution:",Array.from($.entries()).sort((ve,C)=>C[0]-ve[0]).slice(0,10));for(const[ve,C]of Ke){const fe=C.map(Ae=>B.get(Ae)).filter(Ae=>Ae!==void 0);ye.set(ve,fe)}return ye}function I0(B,D){const oe=new Map;let b=1;for(const[ie,he]of B){if(he.some(ye=>ye.type==="ground")){oe.set(ie,"GND");continue}const Ke=he.filter(ye=>ye.type==="power");if(Ke.length>0){let $=(Ke[0].voltage||"UNKNOWN").trim();$&&!$.startsWith("+")&&!$.startsWith("-")&&!$.startsWith("AC")&&($="+"+$),oe.set(ie,$);continue}oe.set(ie,`N$${b++}`)}return oe}function q0(B,D,oe,b,ie){const he=V0(D,B,oe,b,ie),pe=Array.from(he.values()).filter(O=>O.type==="component_pin");console.log(`[Schematic] Component pin nodes in graph: ${pe.length}`),pe.length>0&&console.log("[Schematic] Sample component pin nodes:",pe.slice(0,5).map(O=>`Node ID ${O.id} (compId: ${O.componentId}, pinIndex: ${O.pinIndex})`));const Ke=[];for(const O of D)if(O.type==="trace"&&O.points.length>=2)for(let J=0;J<O.points.length-1;J++){const re=O.points[J],m=O.points[J+1];re&&m&&re.id!==void 0&&m.id!==void 0&&re.id!==m.id&&Ke.push([re.id,m.id])}console.log(`[Schematic] Trace connections: ${Ke.length} (connecting nodes with different Node IDs)`);const ye=G0(he,Ke),$=I0(ye);if(console.log(`[Schematic] Net groups created: ${ye.size}`),pe.length>0){const O=[];for(const J of pe){let re=!1;for(const[,m]of ye)if(m.some(j=>j.id===J.id)){re=!0;break}if(!re){const m=B.find(P=>P.id===J.componentId),j=m&&(m.abbreviation?.trim()||m.designator?.trim())||"UNKNOWN";O.push({compId:J.componentId||"unknown",designator:j,pinIndex:J.pinIndex||0,nodeId:J.id})}}if(O.length>0){console.warn(`[Schematic] Found ${O.length} isolated component pins (not in any net):`);for(const J of O.slice(0,10))console.warn(`  - ${J.designator} pin ${J.pinIndex+1} at Node ID ${J.nodeId}`)}else console.log("[Schematic] All component pins are in nets")}const ve=new Map;for(const O of B){let J=O.designator?.trim()||O.abbreviation?.trim();J&&(J==="?"||J==="??"||J==="***"||J==="****"||J==="*")&&(J=""),J&&J.length>0?(ve.set(O.id,J),console.log(`[Schematic] Mapped component ${O.id} to designator "${J}"`)):console.warn(`[Schematic] Component ${O.id} (type: ${O.componentType}) has no valid designator`)}console.log(`[Schematic] Component ID to designator map: ${ve.size} components`);const C=[];let fe=0,Ae=0;const ae=new Map;for(const[O,J]of ye){fe++;const re=[];for(const m of J)m.type==="component_pin"&&m.componentId&&m.pinIndex!==void 0&&(re.push(m),Ae++);re.length>0&&ae.set(O,re)}for(const[O,J]of ye){const re=$.get(O)||`N$${O}`,m=[];let j=!1,P=!1,ue,Ce=0,Ne=0;for(const me of J)if(me.type==="component_pin"&&me.componentId&&me.pinIndex!==void 0){const Xe=ve.get(me.componentId);if(Xe)m.push({designator:Xe,pin:(me.pinIndex||0)+1});else{const lt=B.find(at=>at.id===me.componentId),Tn=lt?lt.designator?.trim()||lt.abbreviation?.trim()||"NONE":"NOT_FOUND";console.warn(`[Schematic] Component pin found but no designator in map for componentId: ${me.componentId}, component designator: "${Tn}", node: Node ID ${me.id}, pinIndex: ${me.pinIndex}`)}}else me.type==="power"?(j=!0,ue=me.voltage||ue):me.type==="ground"?P=!0:me.type==="via"?Ce++:me.type==="trace_point"&&Ne++;C.push({name:re,componentPins:m,hasPower:j,hasGround:P,powerVoltage:ue,viaCount:Ce,tracePointCount:Ne})}console.log(`[Schematic] Total net groups: ${fe}, Component pins found: ${Ae}`),console.log(`[Schematic] Nets with component pins: ${ae.size}`),console.log(`[Schematic] Generated ${C.length} total nets (including power/ground and single-pin connections)`);const Se=C.filter(O=>O.componentPins.length>=2).length,ct=C.filter(O=>O.hasPower).length,Te=C.filter(O=>O.hasGround).length;if(console.log(`[Schematic] - ${Se} nets with 2+ component pins`),console.log(`[Schematic] - ${ct} power nets`),console.log(`[Schematic] - ${Te} ground nets`),ae.size>0){console.log("[Schematic] Sample nets with component pins:");let O=0;for(const[J,re]of ae){if(O++>=5)break;const m=$.get(J)||`N$${J}`,j=re.map(P=>`${ve.get(P.componentId)||"unknown"}:pin${(P.pinIndex||0)+1}@NodeID${P.id}`);console.log(`  Net ${m} (root Node ID ${J}): ${re.length} pins - ${j.join(", ")}`)}}C.length>0?console.log(`[Schematic] First net: ${C[0].name} with ${C[0].componentPins.length} pins:`,C[0].componentPins):(console.warn("[Schematic] No nets with 2+ component pins found! Each component pin is in its own net."),console.warn("[Schematic] This suggests component pins are not connected through traces/vias."));const dt=new Map,xe=B.filter(O=>{let J=O.designator?.trim()||O.abbreviation?.trim();return J&&(J==="?"||J==="??"||J==="***"||J==="****"||J==="*")&&(J=""),!!J&&J.length>0}),pt=50.8,ht=Math.ceil(Math.sqrt(xe.length));let $t=25.4,Me=25.4,_t=0;for(const O of xe){let J=O.designator?.trim()||O.abbreviation?.trim();J&&(J==="?"||J==="??"||J==="***"||J==="****"||J==="*")&&(J=""),J&&J.length>0&&(dt.set(J,{comp:O,designator:J,x:$t,y:Me}),_t++,_t>=ht?(_t=0,$t=25.4,Me+=pt):$t+=pt)}let z=`(kicad_sch (version 20201015) (generator simple_schematic)
`;z+=`  (paper "A4")
`,z+=`  (title_block
`,z+=`    (title "")
`,z+=`    (date "")
`,z+=`    (rev "")
`,z+=`    (company "")
`,z+=`  )
`,z+=`
`,z+=`  (lib_symbols
`,z+=`    (symbol "simple:Power" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,z+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,z+=`        (effects (font (size 1.27 1.27)) hide)
`,z+=`      )
`,z+=`      (symbol "Power_0_1"
`,z+=`        (polyline (pts (xy 0 0) (xy 0 -2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (polyline (pts (xy -1.27 0) (xy 1.27 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (polyline (pts (xy -0.635 -1.27) (xy 0.635 -1.27)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (polyline (pts (xy -0.3175 -1.905) (xy 0.3175 -1.905)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`      )
`,z+=`    )
`,z+=`    (symbol "simple:Ground" (pin_names (offset 1.016)) (in_bom no) (on_board no)
`,z+=`      (property "Reference" "#PWR" (id 0) (at 0 0 0)
`,z+=`        (effects (font (size 1.27 1.27)) hide)
`,z+=`      )
`,z+=`      (symbol "Ground_0_1"
`,z+=`        (polyline (pts (xy 0 0) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (polyline (pts (xy -2.54 2.54) (xy 2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (polyline (pts (xy -1.27 3.81) (xy 1.27 3.81)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (polyline (pts (xy -0.635 4.445) (xy 0.635 4.445)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`      )
`,z+=`    )
`,z+=`    (symbol "simple:Resistor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,z+=`      (property "Reference" "R" (id 0) (at 0 3.81 0)
`,z+=`        (effects (font (size 1.27 1.27)))
`,z+=`      )
`,z+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,z+=`        (effects (font (size 1.27 1.27)))
`,z+=`      )
`,z+=`      (symbol "Resistor_0_1"
`,z+=`        (polyline (pts (xy -3.81 0) (xy -2.54 0) (xy -1.27 1.27) (xy 0 -1.27) (xy 1.27 1.27) (xy 2.54 -1.27) (xy 3.81 0)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (pin passive line (at -6.35 0 0) (length 2.54)
`,z+=`          (name "1" (effects (font (size 1.27 1.27))))
`,z+=`          (number "1" (effects (font (size 1.27 1.27))))
`,z+=`        )
`,z+=`        (pin passive line (at 6.35 0 180) (length 2.54)
`,z+=`          (name "2" (effects (font (size 1.27 1.27))))
`,z+=`          (number "2" (effects (font (size 1.27 1.27))))
`,z+=`        )
`,z+=`      )
`,z+=`    )
`,z+=`    (symbol "simple:Capacitor" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,z+=`      (property "Reference" "C" (id 0) (at 0 3.81 0)
`,z+=`        (effects (font (size 1.27 1.27)))
`,z+=`      )
`,z+=`      (property "Value" "VAL" (id 1) (at 0 -3.81 0)
`,z+=`        (effects (font (size 1.27 1.27)))
`,z+=`      )
`,z+=`      (symbol "Capacitor_0_1"
`,z+=`        (polyline (pts (xy 0 -2.54) (xy 0 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (polyline (pts (xy -2.54 -2.54) (xy -2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (polyline (pts (xy 2.54 -2.54) (xy 2.54 2.54)) (stroke (width 0.254) (type default)) (fill (type none)))
`,z+=`        (pin passive line (at -5.08 0 0) (length 2.54)
`,z+=`          (name "1" (effects (font (size 1.27 1.27))))
`,z+=`          (number "1" (effects (font (size 1.27 1.27))))
`,z+=`        )
`,z+=`        (pin passive line (at 5.08 0 180) (length 2.54)
`,z+=`          (name "2" (effects (font (size 1.27 1.27))))
`,z+=`          (number "2" (effects (font (size 1.27 1.27))))
`,z+=`        )
`,z+=`      )
`,z+=`    )
`,z+=`    (symbol "simple:IC" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,z+=`      (property "Reference" "U" (id 0) (at 0 2.54 0)
`,z+=`        (effects (font (size 1.27 1.27)))
`,z+=`      )
`,z+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,z+=`        (effects (font (size 1.27 1.27)))
`,z+=`      )
`,z+=`      (symbol "IC_0_1"
`,z+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,z+=`          (stroke (width 0.254)) (fill (type background))
`,z+=`        )
`,z+=`      )
`,z+=`      (symbol "IC_1_1"
`;for(let O=0;O<10;O++){const J=O+1,re=-11.43+O*2.54;z+=`        (pin passive line (at ${-5.08} ${re} 0) (length 2.54)
`,z+=`          (name "${J}" (effects (font (size 1.27 1.27))))
`,z+=`          (number "${J}" (effects (font (size 1.27 1.27))))
`,z+=`        )
`}for(let O=0;O<10;O++){const J=O+11,re=-11.43+O*2.54;z+=`        (pin passive line (at ${5.08} ${re} 180) (length 2.54)
`,z+=`          (name "${J}" (effects (font (size 1.27 1.27))))
`,z+=`          (number "${J}" (effects (font (size 1.27 1.27))))
`,z+=`        )
`}z+=`      )
`,z+=`    )
`,z+=`    (symbol "simple:Generic" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,z+=`      (property "Reference" "REF" (id 0) (at 0 2.54 0)
`,z+=`        (effects (font (size 1.27 1.27)))
`,z+=`      )
`,z+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,z+=`        (effects (font (size 1.27 1.27)))
`,z+=`      )
`,z+=`      (symbol "Generic_0_1"
`,z+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,z+=`          (stroke (width 0.254)) (fill (type background))
`,z+=`        )
`,z+=`      )
`,z+=`      (symbol "Generic_1_1"
`;for(let O=0;O<10;O++){const J=O+1,re=-11.43+O*2.54;z+=`        (pin passive line (at ${-5.08} ${re} 0) (length 2.54)
`,z+=`          (name "${J}" (effects (font (size 1.27 1.27))))
`,z+=`          (number "${J}" (effects (font (size 1.27 1.27))))
`,z+=`        )
`}for(let O=0;O<10;O++){const J=O+11,re=-11.43+O*2.54;z+=`        (pin passive line (at ${5.08} ${re} 180) (length 2.54)
`,z+=`          (name "${J}" (effects (font (size 1.27 1.27))))
`,z+=`          (number "${J}" (effects (font (size 1.27 1.27))))
`,z+=`        )
`}z+=`      )
`,z+=`    )
`,z+=`  )
`,z+=`
`;let Jn=1;const nt=()=>`00000000-0000-0000-0000-${String(Jn++).padStart(12,"0")}`,Kt=O=>{switch(O){case"Resistor":return"simple:Resistor";case"Capacitor":return"simple:Capacitor";case"IntegratedCircuit":return"simple:IC";default:return"simple:Generic"}},wn=(O,J)=>{if(!O.pinConnections||O.pinConnections.length===0)return 0;const re=[];for(let j=0;j<O.pinConnections.length;j++){const P=O.pinConnections[j];if(P&&P.trim()!==""){const ue=parseInt(P.trim(),10);if(!isNaN(ue)&&J.has(ue)){const Ce=J.get(ue);(Ce.type==="via"||Ce.type==="pad")&&re.push({pinIndex:j,x:Ce.x,y:Ce.y})}}}if(re.length<2)return 0;if(O.pinCount===2&&re.length>=2){const j=re.find(ue=>ue.pinIndex===0),P=re.find(ue=>ue.pinIndex===1);if(j&&P){const ue=j.x-O.x,Ce=j.y-O.y;return Math.abs(ue)>Math.abs(Ce)?ue<0?0:180:Ce<0?90:270}}const m=re.find(j=>j.pinIndex===0);if(m){const j=m.x-O.x,P=m.y-O.y;return Math.abs(j)>Math.abs(P)?j<0?P<0?0:270:P<0?90:180:P<0?j<0?0:90:j<0?270:180}return 0};for(const[O,J]of dt){const re=nt(),m=J.comp,j=Kt(m.componentType);let P=m.rotation!==void 0?m.rotation:wn(m,he);P=Math.round(P/90)*90,P<0&&(P+=360),P>=360&&(P-=360),z+=`  (symbol (lib_id "${j}") (at ${J.x} ${J.y} ${P}) (unit 1)
`,z+=`    (in_bom yes) (on_board yes) (dnp no)
`,z+=`    (uuid ${re})
`,z+=`    (property "Reference" "${O}" (id 0) (at ${J.x} ${J.y+3.81} 0)
`,z+=`      (effects (font (size 1.27 1.27)))
`,z+=`    )
`,z+=`    (property "Value" "${m.componentType}" (id 1) (at ${J.x} ${J.y-3.81} 0)
`,z+=`      (effects (font (size 1.27 1.27)))
`,z+=`    )
`,z+=`  )
`}z+=`
`;let Pt=25.4,Ot=25.4;const Z=25.4,se=new Map;console.log(`[Schematic] Processing ${C.length} nets for wire generation`);for(const O of C){if(O.hasPower&&O.powerVoltage){const m=`PWR_${O.powerVoltage}`;if(!se.has(m)){const j=nt();se.set(m,{x:Pt,y:Ot,uuid:j}),z+=`  (symbol (lib_id "simple:Power") (at ${Pt} ${Ot} 0) (unit 1)
`,z+=`    (in_bom no) (on_board no) (dnp no)
`,z+=`    (uuid ${j})
`,z+=`    (property "Reference" "#PWR" (id 0) (at ${Pt} ${Ot} 0)
`,z+=`      (effects (font (size 1.27 1.27)) hide)
`,z+=`    )
`,z+=`    (property "Value" "${O.powerVoltage}" (id 1) (at ${Pt} ${Ot-5.08} 0)
`,z+=`      (effects (font (size 1.27 1.27)))
`,z+=`    )
`,z+=`  )
`,Pt+=Z}}if(O.hasGround&&!se.has("GND")){const j=nt();se.set("GND",{x:Pt,y:Ot,uuid:j}),z+=`  (symbol (lib_id "simple:Ground") (at ${Pt} ${Ot} 0) (unit 1)
`,z+=`    (in_bom no) (on_board no) (dnp no)
`,z+=`    (uuid ${j})
`,z+=`    (property "Reference" "#PWR" (id 0) (at ${Pt} ${Ot} 0)
`,z+=`      (effects (font (size 1.27 1.27)) hide)
`,z+=`    )
`,z+=`    (property "Value" "GND" (id 1) (at ${Pt} ${Ot+5.08} 0)
`,z+=`      (effects (font (size 1.27 1.27)))
`,z+=`    )
`,z+=`  )
`,Pt+=Z}if(O.componentPins.length===0)continue;console.log(`[Schematic] Processing net ${O.name} with ${O.componentPins.length} component pins:`,O.componentPins);const J=[...O.componentPins].sort((m,j)=>{const P=m.designator.localeCompare(j.designator);return P!==0?P:m.pin-j.pin}),re=[];for(const m of J){const j=dt.get(m.designator);if(!j){console.warn(`[Schematic] Component ${m.designator} not found in componentMap for net ${O.name}`);continue}const P=j.comp,ue=P.pinCount||2,Ce=2.54;let Ne,me;if(ue===2){const Xe=Kt(P.componentType);Xe==="simple:Resistor"?m.pin===1?(Ne=j.x-6.35,me=j.y):(Ne=j.x+6.35,me=j.y):m.pin===1?(Ne=j.x-5.08,me=j.y):(Ne=j.x+5.08,me=j.y)}else{const Xe=Math.ceil(ue/2),lt=Math.floor(ue/2);if(m.pin<=Xe){Ne=j.x-5.08;const at=m.pin-1;me=j.y-(Xe-1)*Ce/2+at*Ce}else{Ne=j.x+5.08;const at=m.pin-Xe-1;me=j.y-(lt-1)*Ce/2+at*Ce}}re.push({x:Ne,y:me,designator:m.designator,pin:m.pin})}if(re.length>=1){const m=re.length>1?re.reduce((me,Xe)=>me+Xe.x,0)/re.length:re[0].x+10,j=re.length>1?re.reduce((me,Xe)=>me+Xe.y,0)/re.length:re[0].y;if(O.hasPower&&O.powerVoltage){const me=`PWR_${O.powerVoltage}`,Xe=se.get(me);if(Xe){const lt=Xe.y-2.54,Tn=Xe.x,at=nt();z+=`  (junction (at ${Tn} ${lt}) (diameter 0) (color 0 0 0 0) (uuid ${at}))
`;const nn=nt();z+=`  (wire (pts (xy ${m} ${j}) (xy ${Tn} ${lt})) (stroke (width 0) (type default)) (uuid ${nn}))
`}}if(O.hasGround){const Xe=se.get("GND");if(Xe){const lt=Xe.y+2.54,Tn=Xe.x,at=nt();z+=`  (junction (at ${Tn} ${lt}) (diameter 0) (color 0 0 0 0) (uuid ${at}))
`;const nn=nt();z+=`  (wire (pts (xy ${m} ${j}) (xy ${Tn} ${lt})) (stroke (width 0) (type default)) (uuid ${nn}))
`}}if(re.length>=2){console.log(`[Schematic] Creating wires for net ${O.name}: ${re.length} pins to center (${m}, ${j})`);const me=nt();z+=`  (junction (at ${m} ${j}) (diameter 0) (color 0 0 0 0) (uuid ${me}))
`;for(const Xe of re){const lt=nt();console.log(`[Schematic] Wire from ${Xe.designator}:pin${Xe.pin} (${Xe.x}, ${Xe.y}) to center (${m}, ${j})`),z+=`  (wire (pts (xy ${Xe.x} ${Xe.y}) (xy ${m} ${j})) (stroke (width 0) (type default)) (uuid ${lt}))
`}}else if(re.length===1){console.log(`[Schematic] Creating junction for single-pin net ${O.name} at (${re[0].x}, ${re[0].y})`);const me=nt();z+=`  (junction (at ${re[0].x} ${re[0].y}) (diameter 0) (color 0 0 0 0) (uuid ${me}))
`}else console.warn(`[Schematic] Net ${O.name} has ${O.componentPins.length} component pins but 0 valid pin positions!`);const P=re.length>1?j+5.08:re[0].y+5.08,ue=re.length>1?m:re[0].x,Ce=nt(),Ne=O.hasPower&&O.powerVoltage?O.powerVoltage:O.hasGround?"GND":O.name;z+=`  (text "${Ne}" (at ${ue} ${P} 0)
`,z+=`    (effects (font (size 1.27 1.27)))
`,z+=`    (uuid ${Ce})
`,z+=`  )
`}}return z+=`)
`,z}function $0(){const B=new Date,D=B.getFullYear(),oe=String(B.getMonth()+1).padStart(2,"0"),b=String(B.getDate()).padStart(2,"0"),ie=String(B.getHours()).padStart(2,"0"),he=String(B.getMinutes()).padStart(2,"0"),pe=String(B.getSeconds()).padStart(2,"0");return`${D}_${oe}_${b}-${ie}-${he}-${pe}`}const ys=B=>{const D=ef[B];return!D||!D.prefix||D.prefix.length<1?"?":D.prefix[0].substring(0,1).toUpperCase()},La=(B,D,oe)=>{const b=`tool_${B}_color`,ie=`tool_${B}_size`,he=localStorage.getItem(b),pe=localStorage.getItem(ie);return{color:he||D,size:pe?parseInt(pe,10):oe}},Fp=(B,D,oe)=>{localStorage.setItem(`tool_${B}_color`,D),localStorage.setItem(`tool_${B}_size`,String(oe))},Cn=(B,D,oe,b)=>{const ie=`tool_${B}_${D}_color`,he=`tool_${B}_${D}_size`,pe=localStorage.getItem(ie),Ke=localStorage.getItem(he);return{color:pe||oe,size:Ke?parseInt(Ke,10):b}},Z0=()=>{const B=new Map,D={top:"#0072B2",bottom:"#56B4E9"},oe={top:Ti.DEFAULT_SIZE,bottom:Ti.DEFAULT_SIZE},b={top:"#AA4499",bottom:"#F781BF"},ie={top:6,bottom:6},he={top:"#6A3D9A",bottom:"#9467BD"},pe={top:18,bottom:18};return B.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:La("select","#ff0000",10),layerSettings:new Map([["top",Cn("select","top","#ff0000",10)],["bottom",Cn("select","bottom","#ff0000",10)]])}),B.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:La("via",Cr,Ti.DEFAULT_SIZE),layerSettings:new Map([["top",Cn("via","top",Cr,Ti.DEFAULT_SIZE)],["bottom",Cn("via","bottom",Cr,Ti.DEFAULT_SIZE)]]),defaultLayer:"top"}),B.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:La("pad",U0,Ti.DEFAULT_SIZE),layerSettings:new Map([["top",Cn("pad","top",D.top,oe.top)],["bottom",Cn("pad","bottom",D.bottom,oe.bottom)]]),defaultLayer:"top"}),B.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:La("trace",th,2),layerSettings:new Map([["top",Cn("trace","top",b.top,ie.top)],["bottom",Cn("trace","bottom",b.bottom,ie.bottom)]]),defaultLayer:"top"}),B.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:La("component",nh,lh.DEFAULT_SIZE),layerSettings:new Map([["top",Cn("component","top",he.top,pe.top)],["bottom",Cn("component","bottom",he.bottom,pe.bottom)]]),defaultLayer:"top"}),B.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"W",tooltip:"Place power node",colorReflective:!0,settings:La("power",wr,26),layerSettings:new Map([["top",Cn("power","top",wr,26)],["bottom",Cn("power","bottom",wr,26)]]),defaultLayer:"top"}),B.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:La("ground",Fu,26),layerSettings:new Map([["top",Cn("ground","top",Fu,26)],["bottom",Cn("ground","bottom",Fu,26)]]),defaultLayer:"top"}),B.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:La("erase","#f5a3b3",5),layerSettings:new Map([["top",Cn("erase","top","#f5a3b3",5)],["bottom",Cn("erase","bottom","#f5a3b3",5)]])}),B.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:La("pan","#ff0000",10),layerSettings:new Map([["top",Cn("pan","top","#ff0000",10)],["bottom",Cn("pan","bottom","#ff0000",10)]])}),B.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:La("magnify","#ff0000",10),layerSettings:new Map([["top",Cn("magnify","top","#ff0000",10)],["bottom",Cn("magnify","bottom","#ff0000",10)]])}),B};function Q0(){const[D,oe]=w.useState(null),[b,ie]=w.useState(null),[he,pe]=w.useState("overlay"),[Ke,ye]=w.useState(50),[$,ve]=w.useState(!1),[C,fe]=w.useState("none"),Ae=w.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"26",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"26",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"26",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[]),ae=w.useCallback((a,s,u)=>{a==="trace"&&u?u==="top"?localStorage.setItem("defaultTopTraceSize",String(s)):localStorage.setItem("defaultBottomTraceSize",String(s)):a==="pad"&&u?u==="top"?localStorage.setItem("defaultTopPadSize",String(s)):localStorage.setItem("defaultBottomPadSize",String(s)):a==="component"&&u?u==="top"?localStorage.setItem("defaultTopComponentSize",String(s)):localStorage.setItem("defaultBottomComponentSize",String(s)):a==="via"?localStorage.setItem("defaultViaSize",String(s)):a==="power"?localStorage.setItem("defaultPowerSize",String(s)):a==="ground"?localStorage.setItem("defaultGroundSize",String(s)):a==="brush"&&localStorage.setItem("defaultBrushSize",String(s))},[]),Se=w.useCallback((a,s,u)=>{a==="trace"&&u?u==="top"?localStorage.setItem("defaultTopTraceColor",s):localStorage.setItem("defaultBottomTraceColor",s):a==="pad"&&u?u==="top"?localStorage.setItem("defaultTopPadColor",s):localStorage.setItem("defaultBottomPadColor",s):a==="component"&&u?u==="top"?localStorage.setItem("defaultTopComponentColor",s):localStorage.setItem("defaultBottomComponentColor",s):a==="via"?localStorage.setItem("defaultViaColor",s):a==="brush"&&localStorage.setItem("defaultBrushColor",s)},[]),ct=Ae(),[Te,dt]=w.useState(ct.brushColor),[xe,pt]=w.useState(ct.brushSize),[ht,$t]=w.useState(ct.topTraceColor),[Me,_t]=w.useState(ct.bottomTraceColor),[z,Jn]=w.useState(ct.topTraceSize),[nt,Kt]=w.useState(ct.bottomTraceSize),[wn,Pt]=w.useState(ct.topPadColor),[Ot,Z]=w.useState(ct.bottomPadColor),[se,O]=w.useState(ct.topPadSize),[J,re]=w.useState(ct.bottomPadSize),[m,j]=w.useState(ct.topComponentColor),[P,ue]=w.useState(ct.bottomComponentColor),[Ce,Ne]=w.useState(ct.topComponentSize),[me,Xe]=w.useState(ct.bottomComponentSize),[lt,Tn]=w.useState(!1),[at,nn]=w.useState(()=>Z0()),[De,wt]=w.useState([]),[pa,po]=w.useState(!1),[Mt,Hn]=w.useState([]),[Xl,Ha]=w.useState(null),[Ge,zi]=w.useState(null),[yc,$n]=w.useState(!1),[Ei,ji]=w.useState(null),[il,ha]=w.useState("nudge"),[Wo,Ai]=w.useState(!1),[ta,gs]=w.useState(!1),[Ya,Dn]=w.useState(!1),[$e,Bt]=w.useState("top"),[gc,Tr]=w.useState(!1),[mc,Fo]=w.useState(!1),[Ue,Vl]=w.useState(1),[Ie,el]=w.useState({x:0,y:0}),[be,ho]=w.useState("trace"),ms=tt.useRef(null),na=tt.useRef(Te),Sl=tt.useRef(xe),Jo=w.useCallback(a=>C==="draw"&&be==="trace"?a.get("trace"):C==="draw"&&be==="via"?a.get("via"):C==="draw"&&be==="pad"?a.get("pad"):C==="component"?a.get("component"):C==="power"?a.get("power"):C==="ground"?a.get("ground"):null,[C,be]);tt.useEffect(()=>{nn(a=>{const s=Jo(a),u=s?.id||null,d=ms.current,g=new Map(a);if(d&&d!==u){const y=a.get(d);y&&(Fp(d,na.current,Sl.current),g.set(d,{...y,settings:{color:na.current,size:Sl.current}}))}if(s&&u!==d)if(C==="draw"&&be==="trace"){const y=Wt||"top",f=y==="top"?ht:Me,h=y==="top"?z:nt;dt(f),pt(h),na.current=f,Sl.current=h,g.set("trace",{...s,settings:{color:f,size:h}})}else if(C==="draw"&&be==="pad"){const y=Ml||"top",f=y==="top"?wn:Ot,h=y==="top"?se:J;dt(f),pt(h),na.current=f,Sl.current=h,g.set("pad",{...s,settings:{color:f,size:h}})}else if(C==="component"){const y=kl||"top",f=y==="top"?m:P,h=y==="top"?Ce:me;dt(f),pt(h),na.current=f,Sl.current=h,g.set("component",{...s,settings:{color:f,size:h}})}else{const y=s.settings;dt(y.color),pt(y.size),na.current=y.color,Sl.current=y.size}return ms.current=u,g})},[C,be,Jo,ht,Me,z,nt,wn,Ot,se,J,m,P,Ce,me]),tt.useEffect(()=>{nn(a=>{const s=Jo(a);if(s){Fp(s.id,Te,xe),C==="draw"&&be==="trace"?(Wt||"top")==="top"?($t(Te),Jn(xe),Se("trace",Te,"top"),ae("trace",xe,"top")):(_t(Te),Kt(xe),Se("trace",Te,"bottom"),ae("trace",xe,"bottom")):C==="draw"&&be==="pad"?(Ml||"top")==="top"?(Pt(Te),O(xe),Se("pad",Te,"top"),ae("pad",xe,"top")):(Z(Te),re(xe),Se("pad",Te,"bottom"),ae("pad",xe,"bottom")):C==="component"&&((kl||"top")==="top"?(j(Te),Ne(xe),Se("component",Te,"top"),ae("component",xe,"top")):(ue(Te),Xe(xe),Se("component",Te,"bottom"),ae("component",xe,"bottom")));const u=new Map(a);return u.set(s.id,{...s,settings:{color:Te,size:xe}}),na.current=Te,Sl.current=xe,u}return a})},[Te,xe,C,be,Jo,Se,ae]),tt.useEffect(()=>{C==="power"?(hi(!0),ko(null)):(hi(!1),ko(null))},[C]);const[xs,Mi]=w.useState(void 0),[,bs]=w.useState([]),[,ki]=w.useState([]),[sl,ei]=w.useState(!1),[zn,Gl]=w.useState(!1),[kt,Yn]=w.useState(!1),[en,ti]=w.useState(!1),[We,vs]=w.useState(!1),[Rn,ya]=w.useState(!1),[Vt,ga]=w.useState(!1),[,Cl]=w.useState([]),[,Il]=w.useState([]),[Xa,gn]=w.useState([]),[zr,xc]=w.useState([]),[ma,yo]=w.useState([]),[bc,vc]=w.useState([]),Xn=w.useRef(null),ni=w.useRef([]),Di=w.useRef(0),go=w.useRef(!1),[Ve,At]=w.useState([]),[ot,En]=w.useState([]),[qe,ln]=w.useState(new Set),[Fe,un]=w.useState(new Set),[He,an]=w.useState(new Set),[ze,jn]=w.useState(null),[Tt,la]=w.useState(null),[wl,xa]=w.useState(null),[Ri,Ss]=w.useState(!1),[li,Ni]=w.useState(null),[tl,ai]=w.useState(null),mo=w.useRef(null),Tl=w.useRef(null),_i=w.useRef(null),Oi=w.useRef(null),Va=w.useRef(null),Ga=w.useRef(null),Cs=w.useRef(null),Ia=w.useRef(null),xo=w.useRef(null),bo=w.useRef(null),Zn=w.useRef(!1),vo=w.useRef(0),ba=w.useRef(0),[nl,oi]=w.useState(!1),va=w.useRef(null),So=w.useRef(null),[Sa,qa]=w.useState(!1),[aa,Qn]=w.useState({width:960,height:600}),[Kn,_e]=w.useState(null),[zl,Ca]=w.useState({visible:!1,size:6}),Co=w.useRef(null),[$a,cl]=w.useState({visible:!1,interval:5}),[Bi,wo]=w.useState({visible:!1,source:null}),[ws,Ts]=w.useState({visible:!1,text:""}),[zs,To]=w.useState({visible:!1,title:"",message:""}),[Es,ii]=w.useState({visible:!1}),Sc=w.useRef(null),[Gt,si]=w.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Cc=w.useRef(null),[It,ci]=w.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),Ui=w.useRef(null),[rl,El]=w.useState(!1),[Za,Qa]=w.useState(1),[wa,Li]=w.useState(null),[Ta,zo]=w.useState(""),Yt=w.useRef(null),ql=w.useRef(!1),js=w.useRef(!1),[Eo,ul]=w.useState(""),[ri,ui]=w.useState(null),[mn,Pn]=w.useState("pcb_project"),[Er,jo]=w.useState([]),[As,Ms]=w.useState(-1),Hi=w.useRef(null),ks=w.useRef(null),Ka=w.useRef(null),wc=w.useRef(null),[Yi,fi]=w.useState(!0),[di,Ao]=w.useState(!0),[Nn,Mo]=w.useState(!0),[$l,pi]=w.useState(!0),[jl,Ds]=w.useState(!0),[za,Xi]=w.useState(!0),[Pa,Rs]=w.useState(!0),[oa,Ns]=w.useState(!0),[Ea,_s]=w.useState(!0),[Wa,Tc]=w.useState(!0),[Ye,Vn]=w.useState([]),[St,ja]=w.useState([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}]),[zc,Vi]=w.useState(!1),[Os,hi]=w.useState(!1),[ia,ko]=w.useState(null),[fl,Gi]=w.useState(!0),[yt,_n]=w.useState([]),Al=w.useCallback((a,s)=>{const u=Ye.find(g=>g.pointId===a);if(u){const g=s.find(f=>f.id===u.powerBusId);return`Via (${g?g.voltage:u.type||"Power Node"})`}const d=yt.find(g=>g.pointId===a);return d?`Via (${d.type||"Ground"})`:"Via (Signal)"},[Ye,yt]),Aa=w.useCallback((a,s)=>{const u=Ye.find(g=>g.pointId===a);if(u){const g=s.find(f=>f.id===u.powerBusId);return`Pad (${g?g.voltage:u.type||"Power Node"})`}const d=yt.find(g=>g.pointId===a);return d?`Pad (${d.type||"Ground"})`:"Pad (Signal)"},[Ye,yt]),[Wt,Zl]=w.useState("top"),[Ii,Fa]=w.useState(!1),Bs=w.useRef(null),[Ml,Ec]=w.useState("top"),[jc,Do]=w.useState(!1),Ac=w.useRef(null),[Ro,xn]=w.useState(!1),[No,An]=w.useState(!1),[On,yi]=w.useState(null),gi=w.useRef(null),Ja=w.useRef(null),[kl,Ma]=w.useState("top"),[Mc,mi]=w.useState(null),[Dl,kc]=w.useState(!1),[Ee,fn]=w.useState(new Set),[dl,Us]=w.useState(!1),[sa,ka]=w.useState(null),[Ql,qi]=w.useState(null),$i=w.useCallback(async(a,s)=>{try{const u=await createImageBitmap(a),d=URL.createObjectURL(a),g=await new Promise((f,h)=>{const S=new FileReader;S.onload=()=>f(S.result),S.onerror=h,S.readAsDataURL(a)}),y={url:d,name:a.name,width:u.width,height:u.height,dataUrl:g,x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:u};s==="top"?oe(y):ie(y)}catch(u){console.error("Failed to load image",u)}},[]),Dc=w.useCallback(a=>{a.stopPropagation(),a.preventDefault();const s=Xn.current;if(!s)return;const u=s.getBoundingClientRect(),d=s.width/u.width,g=s.height/u.height,y=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,h=typeof y=="number"?y:a.clientX-u.left,S=typeof f=="number"?f:a.clientY-u.top,x=h*d,R=S*g,H=x-40,le=R-40,G=(H-Ie.x)/Ue,I=(le-Ie.y)/Ue;if(C==="select"){if(Tt){let E=1/0,Y=null,q=null;const W=Math.max(6/Ue,4),je=[...Ve,...ot].find(ge=>ge.id===Tt.componentId)?.layer||"top";for(const ge of De)if((ge.type==="via"||ge.type==="pad")&&ge.points.length>0){if(ge.type==="pad"&&(ge.layer||"top")!==je)continue;const Oe=ge.points[0],it=Math.max(1,ge.size/2),qt=Math.hypot(Oe.x-G,Oe.y-I),bt=Math.max(it,W);qt<=bt&&qt<E&&(E=qt,Y=Oe.id??null,q=ge)}if(q?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${q.id}`),console.log(`  Point ID: ${Y}`),console.log(`  Point coordinates: x=${q.points[0].x.toFixed(2)}, y=${q.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${G.toFixed(2)}, y=${I.toFixed(2)}`),console.log(`  Distance: ${E.toFixed(2)}`),console.log(`  Via size: ${q.size}, radius: ${Math.max(1,q.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${G.toFixed(2)}, y=${I.toFixed(2)}`),console.log(`  Hit tolerance: ${W.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${De.filter(ge=>ge.type==="via").length}`)),Y!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${Y} (type: ${typeof Y})`);const ge=String(Y),Oe=Tt.pinIndex,it=Tt.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${Oe} (Pin ${Oe+1}) of component ${it} to point ID ${ge}`);const qt=Ve.find(Re=>Re.id===it),bt=ot.find(Re=>Re.id===it);qt?(console.log("Component found in TOP layer"),At(Re=>{const rt=Re.find(Ze=>Ze.id===it);if(!rt)return console.error(`Component ${it} not found in TOP layer during update!`),Re;console.log("BEFORE update: pinConnections =",rt.pinConnections);const Ct=rt.pinConnections||[],st=Ct.length>0?[...Ct]:new Array(rt.pinCount).fill("");let vt;if(st.length!==rt.pinCount){vt=new Array(rt.pinCount).fill("");for(let Ze=0;Ze<Math.min(st.length,rt.pinCount);Ze++)vt[Ze]=st[Ze]||""}else vt=[...st];vt[Oe]=ge,console.log(`Updating pin ${Oe} with value: ${ge}`),console.log("New pinConnections array:",vt);const tn=Re.map(Ze=>Ze.id===it?{...Ze,pinConnections:vt}:Ze),Ft=tn.find(Ze=>Ze.id===it);return console.log("AFTER update: pinConnections =",Ft?.pinConnections),console.log(`Pin ${Oe} value: ${Ft?.pinConnections[Oe]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),tn})):bt?(console.log("Component found in BOTTOM layer"),En(Re=>{const rt=Re.find(Ze=>Ze.id===it);if(!rt)return console.error(`Component ${it} not found in BOTTOM layer during update!`),Re;console.log("BEFORE update: pinConnections =",rt.pinConnections);const Ct=rt.pinConnections||[],st=Ct.length>0?[...Ct]:new Array(rt.pinCount).fill("");let vt;if(st.length!==rt.pinCount){vt=new Array(rt.pinCount).fill("");for(let Ze=0;Ze<Math.min(st.length,rt.pinCount);Ze++)vt[Ze]=st[Ze]||""}else vt=[...st];vt[Oe]=ge,console.log(`Updating pin ${Oe} with value: ${ge}`),console.log("New pinConnections array:",vt);const tn=Re.map(Ze=>Ze.id===it?{...Ze,pinConnections:vt}:Ze),Ft=tn.find(Ze=>Ze.id===it);return console.log("AFTER update: pinConnections =",Ft?.pinConnections),console.log(`Pin ${Oe} value: ${Ft?.pinConnections[Oe]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),tn})):(console.error(`Component ${it} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",Ve.map(Re=>Re.id)),console.log("Available BOTTOM components:",ot.map(Re=>Re.id))),setTimeout(()=>{la(null)},0);return}else la(null)}const V=10,U=(()=>{for(const E of Ve)if(G>=E.x-V&&G<=E.x+V&&I>=E.y-V&&I<=E.y+V)return{layer:"top",comp:E};for(const E of ot)if(G>=E.x-V&&G<=E.x+V&&I>=E.y-V&&I<=E.y+V)return{layer:"bottom",comp:E};return null})();if(U){const{comp:E}=U;a.shiftKey?ln(Y=>{const q=new Set(Y);return q.has(E.id)?q.delete(E.id):q.add(E.id),q}):(ln(new Set([E.id])),fn(new Set),un(new Set),an(new Set));return}const te=Math.max(6/Ue,4);let ne=null;for(const E of Ye){const Y=Math.max(6,E.size/2),q=Y*.8,W=Y+q,de=Math.hypot(E.x-G,E.y-I),je=Math.abs(G-E.x)<=te&&Math.abs(I-E.y)<=W,ge=Math.abs(I-E.y)<=te&&Math.abs(G-E.x)<=W;if(de<=Math.max(Y,te)||je||ge){ne=E;break}}if(ne){a.shiftKey?un(E=>{const Y=new Set(E);return Y.has(ne.id)?Y.delete(ne.id):Y.add(ne.id),Y}):un(new Set([ne.id])),fn(new Set),ln(new Set),an(new Set);return}let k=null;for(const E of yt){const Y=Math.max(6,(E.size||18)/2),q=Y*.8,W=Y+q,de=Math.hypot(E.x-G,E.y-I),je=Math.abs(G-E.x)<=te&&Math.abs(I-E.y)<=W,ge=Math.abs(I-E.y)<=te&&Math.abs(G-E.x)<=W;if(de<=Math.max(Y,te)||je||ge){k=E;break}}if(k){a.shiftKey?an(E=>{const Y=new Set(E);return Y.has(k.id)?Y.delete(k.id):Y.add(k.id),Y}):(an(new Set([k.id])),fn(new Set),ln(new Set),un(new Set));return}const M=Math.max(6/Ue,4);let K=null;for(const E of De)if((E.type==="via"||E.type==="pad")&&E.points.length>0){if(!Nn)continue;const Y=E.points[0],q=Math.max(1,E.size/2);if(Math.hypot(Y.x-G,Y.y-I)<=Math.max(q,M)){K=E;break}}K||a.shiftKey||(fn(new Set),ln(new Set),un(new Set),an(new Set)),Us(!0),ka({x:G,y:I,shiftKey:a.shiftKey}),qi({x:G,y:I,width:0,height:0});return}else if(C==="magnify"){const V=a.shiftKey?.5:2,U=Math.max(.25,Math.min(8,Ue*V)),te=H-U*G,ne=le-U*I;Vl(U),el({x:te,y:ne});return}else if(C==="pan"){va.current={startCX:H,startCY:le,panX:Ie.x,panY:Ie.y},So.current={startClientX:a.clientX,startClientY:a.clientY,panX:Ie.x,panY:Ie.y},oi(!0);return}else if(C==="draw"){const V=(ne,k)=>{let M=1/0,K=null;const E=15;for(const W of De)if(W.type==="via"){const de=W.points[0],je=Math.hypot(de.x-ne,de.y-k);je<=E&&je<M&&(M=je,K=de)}else if(W.type==="pad"){const de=W.points[0],je=Math.hypot(de.x-ne,de.y-k);je<=E&&je<M&&(M=je,K=de)}for(const W of Ye)if(W.pointId!==void 0){const de=Math.hypot(W.x-ne,W.y-k);de<=E&&de<M&&(M=de,K={x:W.x,y:W.y,id:W.pointId})}for(const W of yt)if(W.pointId!==void 0){const de=Math.hypot(W.x-ne,W.y-k);de<=E&&de<M&&(M=de,K={x:W.x,y:W.y,id:W.pointId})}const q=Qt(K??{x:ne,y:k});return{x:q.x,y:q.y,nodeId:K?.id}};if(be==="via"){const ne=at.get("via"),k=localStorage.getItem("tool_via_color"),M=localStorage.getItem("tool_via_size"),K=k||ne?.settings.color||Cr,E=M?parseInt(M,10):ne?.settings.size||Ti.DEFAULT_SIZE,Y=Qt({x:G,y:I}),q={id:Yl(),x:Y.x,y:Y.y},W={id:`${Date.now()}-via`,points:[q],color:K,size:E,layer:$e,type:"via",viaType:"Via (Signal)"};wt(de=>[...de,W]),$e==="top"?bs(de=>[...de,W.id]):ki(de=>[...de,W.id]);return}if(be==="pad"){if(!Ml)return;const ne=Ml==="top"?wn:Ot,k=Ml==="top"?se:J,M=Qt({x:G,y:I}),K={id:Yl(),x:M.x,y:M.y},E={id:`${Date.now()}-pad`,points:[K],color:ne,size:k,layer:Ml,type:"pad",padType:"Pad (Signal)"};wt(Y=>[...Y,E]);return}if(go.current)return;const U=be==="trace"&&!Dl?V(G,I):{x:Qt({x:G,y:I}).x,y:Qt({x:G,y:I}).y},te=U.nodeId!==void 0?{id:U.nodeId,x:U.x,y:U.y}:{x:U.x,y:U.y};Hn(ne=>ne.length===0?[te]:[...ne,te]),Di.current=Date.now(),Ha(null),po(!1),Fo(!1)}else if(C==="erase"){if(De.some(U=>U.layer===$e&&(U.type==="via"&&zn||U.type==="pad"&&kt||U.type==="trace"&&en))){const U=[];zn&&De.some(te=>te.layer===$e&&te.type==="via")&&U.push("vias"),kt&&De.some(te=>te.layer===$e&&te.type==="pad")&&U.push("pads"),en&&De.some(te=>te.layer===$e&&te.type==="trace")&&U.push("traces"),U.length>0&&alert(`Cannot erase: ${U.join(", ")} are locked on the ${$e} layer. Unlock them to erase.`)}po(!0),Hn([{id:Yl(),x:G,y:I}]),console.log("Starting erase at:",G,I,"selectedDrawingLayer:",$e,"total strokes:",De.length)}else if(C==="transform"&&Ge){if(sl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}$n(!0),ji({x:G,y:I})}else if(C==="component"){if(!On)return;const V=Qt({x:G,y:I}),U=kl==="top"?m:P,te=kl==="top"?Ce:me,ne=Y0(On,kl,V.x,V.y,U,te);ne.abbreviation=ys(On),kl==="top"?(Ns(!0),At(k=>[...k,ne])):(_s(!0),En(k=>[...k,ne]));return}else if(C==="power"){if(!ia)return;const U=Dl?{x:Qt({x:G,y:I}).x,y:Qt({x:G,y:I}).y}:((ne,k)=>{let M=1/0,K=null;const E=15;for(const W of De)if(W.type==="via"||W.type==="pad"){const de=W.points[0],je=Math.hypot(de.x-ne,de.y-k);je<=E&&je<M&&(M=je,K=de)}else if(W.type==="trace")for(const de of W.points){const je=Math.hypot(de.x-ne,de.y-k);je<=E&&je<M&&(M=je,K=de)}const q=Qt(K??{x:ne,y:k});return{x:q.x,y:q.y,nodeId:K?.id}})(G,I),te=St.find(ne=>ne.id===ia);if(te){const ne=U.nodeId??Yl(),k=`${te.voltage} Power Node`;if(yt.find(E=>E.pointId===ne)){To({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${ne}). Power and ground nodes cannot share the same Node ID.`});return}const K={id:`power-${Date.now()}-${Math.random()}`,x:U.x,y:U.y,color:"#ff0000",size:xe,powerBusId:te.id,layer:$e,type:k,pointId:ne};if(Vn(E=>[...E,K]),U.nodeId!==void 0){const E=Al(U.nodeId,St),Y=Aa(U.nodeId,St);wt(q=>q.map(W=>W.type==="via"&&W.points.length>0&&W.points[0].id===U.nodeId?{...W,viaType:E}:W.type==="pad"&&W.points.length>0&&W.points[0].id===U.nodeId?{...W,padType:Y}:W))}}return}else if(C==="ground"){const U=Dl?{x:Qt({x:G,y:I}).x,y:Qt({x:G,y:I}).y}:((K,E)=>{let Y=1/0,q=null;const W=15;for(const ge of De)if(ge.type==="via"||ge.type==="pad"){const Oe=ge.points[0],it=Math.hypot(Oe.x-K,Oe.y-E);it<=W&&it<Y&&(Y=it,q=Oe)}else if(ge.type==="trace")for(const Oe of ge.points){const it=Math.hypot(Oe.x-K,Oe.y-E);it<=W&&it<Y&&(Y=it,q=Oe)}const je=Qt(q??{x:K,y:E});return{x:je.x,y:je.y,nodeId:q?.id}})(G,I),te=U.nodeId??Yl(),ne="Ground",k=Ye.find(K=>K.pointId===te);if(k){To({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${k.type||"Power Node"}) already exists at this Node ID (${te}). Power and ground nodes cannot share the same Node ID.`});return}const M={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:U.x,y:U.y,color:"#000000",size:at.get("ground")?.settings.size||18,type:ne,pointId:te};if(_n(K=>[...K,M]),U.nodeId!==void 0){const K=Al(U.nodeId,St),E=Aa(U.nodeId,St);wt(Y=>Y.map(q=>q.type==="via"&&q.points.length>0&&q.points[0].id===U.nodeId?{...q,viaType:K}:q.type==="pad"&&q.points.length>0&&q.points[0].id===U.nodeId?{...q,padType:E}:q))}return}},[C,Ge,xe,Te,be,$e,De,Ue,Ie.x,Ie.y,Dl,ia,St,On,at,Ml,Wt,Ye,yt,Al,Aa,Nn]),pl=w.useCallback(a=>{if(C!=="magnify")return;a.preventDefault();const s=Xn.current;if(!s)return;const u=s.getBoundingClientRect(),d=s.width/u.width,g=s.height/u.height,y=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,h=typeof y=="number"?y:a.clientX-u.left,S=typeof f=="number"?f:a.clientY-u.top,x=h*d,R=S*g,H=(x-40-Ie.x)/Ue,le=(R-40-Ie.y)/Ue,G=1.2,I=1/G,V=a.deltaY<0?G:I,U=Math.max(.25,Math.min(8,Ue*V)),te=x-40-U*H,ne=R-40-U*le;Vl(U),el({x:te,y:ne})},[C,Ue,Ie.x,Ie.y]),_o=w.useCallback(a=>{if(C==="draw"&&be==="trace"){go.current=!0;let s=Mt;if(s.length>1){const u=[s[0]];for(let d=1;d<s.length;d++){const g=u[u.length-1],y=s[d];(Math.abs(g.x-y.x)>.001||Math.abs(g.y-y.y)>.001)&&u.push(y)}s=u}if(s.length>=1){const u=Wt||"top",d=u==="top"?ht:Me,g=u==="top"?z:nt,y={id:`${Date.now()}-trace`,points:s,color:d,size:g,layer:u,type:"trace"};wt(f=>[...f,y]),u==="top"?Cl(f=>[...f,y.id]):Il(f=>[...f,y.id]),Hn([]),Ha(null),setTimeout(()=>{go.current=!1},300);return}}if(C==="select"||C==="component"){const s=Xn.current;if(!s)return;const u=s.getBoundingClientRect(),d=s.width/u.width,g=s.height/u.height,y=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,h=typeof y=="number"?y:a.clientX-u.left,S=typeof f=="number"?f:a.clientY-u.top,x=h*d,R=S*g,H=x-40,le=R-40,G=(H-Ie.x)/Ue,I=(le-Ie.y)/Ue,V=10,U=(()=>{for(const k of Ve)if(G>=k.x-V&&G<=k.x+V&&I>=k.y-V&&I<=k.y+V)return{layer:"top",comp:k};for(const k of ot)if(G>=k.x-V&&G<=k.x+V&&I>=k.y-V&&I<=k.y+V)return{layer:"bottom",comp:k};return null})(),te=Math.max(6/Ue,4);let ne=null;for(const k of Ye){const M=Math.max(6,k.size/2),K=M*.8,E=M+K,Y=Math.hypot(k.x-G,k.y-I),q=Math.abs(G-k.x)<=te&&Math.abs(I-k.y)<=E,W=Math.abs(I-k.y)<=te&&Math.abs(G-k.x)<=E;if(Y<=Math.max(M,te)||q||W){ne=k;break}}if(ne){un(new Set([ne.id])),ai({visible:!0,id:ne.id,layer:ne.layer,x:ne.x,y:ne.y,size:ne.size,color:ne.color,powerBusId:ne.powerBusId});return}if(U){const{layer:k,comp:M}=U;ln(new Set([M.id]));let K="abbreviation"in M&&M.abbreviation?String(M.abbreviation):"";(!K||K.trim()===""||K==="****"||K==="*")&&(K=ys(M.componentType)),jn({visible:!0,layer:k,id:M.id,designator:M.designator||M.componentType||"",abbreviation:K,manufacturer:"manufacturer"in M&&M.manufacturer||"",partNumber:"partNumber"in M&&M.partNumber||"",pinCount:M.pinCount,x:M.x,y:M.y})}}},[C,be,Te,xe,$e,Ve,ot,Ye,Ue,Ie.x,Ie.y,On,Ro,Dl,De,Ge,nl,Mc,Tt,at,Mt,Wt,ht,Me,z,nt]),ca=w.useCallback(()=>{const a=ni.current;if(C==="draw"&&be==="trace"&&a.length>=2){let s=[a[0]];for(let f=1;f<a.length;f++){const h=s[s.length-1],S=a[f];(Math.abs(h.x-S.x)>.001||Math.abs(h.y-S.y)>.001)&&s.push(S)}const u=Wt||"top",d=u==="top"?ht:Me,g=u==="top"?z:nt,y={id:`${Date.now()}-trace`,points:s,color:d,size:g,layer:u,type:"trace"};wt(f=>[...f,y]),u==="top"?Cl(f=>[...f,y.id]):Il(f=>[...f,y.id]),Hn([]),Ha(null)}else if(C==="draw"&&be==="trace"&&a.length===1){const s=Wt||"top",u=s==="top"?ht:Me,d=s==="top"?z:nt,g={id:`${Date.now()}-trace-dot`,points:a,color:u,size:d,layer:s,type:"trace"};wt(y=>[...y,g]),s==="top"?Cl(y=>[...y,g.id]):Il(y=>[...y,g.id]),Hn([])}},[C,be,Wt,ht,Me,z,nt,wt]),xi=w.useCallback((a,s,u)=>{const d=s-a.x,g=u-a.y;if(d===0&&g===0)return{x:s,y:u};const f=(Math.atan2(g,d)*180/Math.PI%180+180)%180,h=[0,45,90];let S=0,x=1e9;for(const R of h){const H=Math.abs(f-R);H<x&&(x=H,S=R)}if(S===0)return{x:s,y:a.y};if(S===90)return{x:a.x,y:u};{const R=Math.min(Math.abs(d),Math.abs(g)),H=d>=0?1:-1,le=g>=0?1:-1;return{x:a.x+H*R,y:a.y+le*R}}},[]),bi=w.useCallback(a=>{const s=Xn.current?.getBoundingClientRect();if(!s)return;const u=a.clientX-s.left,d=a.clientY-s.top,g=Xn.current,y=g.width/s.width,f=g.height/s.height,h=u*y,S=d*f,x=h-40,R=S-40,H=(x-Ie.x)/Ue,le=(R-Ie.y)/Ue;if(C==="draw"&&be==="trace"&&Mt.length>0){const I=Dl?{x:Qt({x:H,y:le}).x,y:Qt({x:H,y:le}).y}:((V,U)=>{let te=1/0,ne=null;const k=15;for(const E of De)if(E.type==="via"){const Y=E.points[0],q=Math.hypot(Y.x-V,Y.y-U);q<=k&&q<te&&(te=q,ne=Y)}else if(E.type==="pad"){const Y=E.points[0],q=Math.hypot(Y.x-V,Y.y-U);q<=k&&q<te&&(te=q,ne=Y)}for(const E of Ye)if(E.pointId!==void 0){const Y=Math.hypot(E.x-V,E.y-U);Y<=k&&Y<te&&(te=Y,ne={x:E.x,y:E.y,id:E.pointId})}for(const E of yt)if(E.pointId!==void 0){const Y=Math.hypot(E.x-V,E.y-U);Y<=k&&Y<te&&(te=Y,ne={x:E.x,y:E.y,id:E.pointId})}const K=Qt(ne??{x:V,y:U});return{x:K.x,y:K.y,nodeId:ne?.id}})(H,le);Ha({x:I.x,y:I.y})}else Ha(null);if(C==="select"&&dl&&sa){const G=sa.x,I=sa.y;qi({x:Math.min(G,H),y:Math.min(I,le),width:Math.abs(H-G),height:Math.abs(le-I)})}else if(C==="pan"&&nl&&va.current){const{startCX:G,startCY:I,panX:V,panY:U}=va.current,te=x-G,ne=R-I;el({x:V+te,y:U+ne})}else if(pa&&Mt.length>0)if(C==="draw")if(mc){const G=Mt[0],I=xi(G,H,le),V=Qt(I),U={id:Yl(),x:V.x,y:V.y};Hn([G,U])}else{const G=Qt({x:H,y:le});Hn(I=>[...I,{id:Yl(),x:G.x,y:G.y}])}else C==="erase"&&(Hn(G=>[...G,{id:Yl(),x:H,y:le}]),wt(G=>{const I=G.filter(U=>{if(U.type==="via"&&zn||U.type==="pad"&&kt||U.type==="trace"&&en||U.layer!==$e)return!0;const te=xe/2,ne=H-te,k=H+te,M=le-te,K=le+te,E=(W,de)=>W>=ne&&W<=k&&de>=M&&de<=K,Y=(W,de,je,ge)=>{const rt=(gt,sn)=>{let pn=0;return gt<ne?pn|=1:gt>k&&(pn|=2),sn<M?pn|=4:sn>K&&(pn|=8),pn};let Ct=W,st=de,vt=je,tn=ge,Ft=rt(Ct,st),Ze=rt(vt,tn);for(;;){if((Ft|Ze)===0)return!0;if((Ft&Ze)!==0)return!1;const gt=Ft!==0?Ft:Ze;let sn=0,pn=0;gt&8?(sn=Ct+(vt-Ct)*(K-st)/(tn-st),pn=K):gt&4?(sn=Ct+(vt-Ct)*(M-st)/(tn-st),pn=M):gt&2?(pn=st+(tn-st)*(k-Ct)/(vt-Ct),sn=k):(pn=st+(tn-st)*(ne-Ct)/(vt-Ct),sn=ne),gt===Ft?(Ct=sn,st=pn,Ft=rt(Ct,st)):(vt=sn,tn=pn,Ze=rt(vt,tn))}};let q=!1;if(U.points.length===1){const W=U.points[0];q=E(W.x,W.y)}else for(let W=0;W<U.points.length-1;W++){const de=U.points[W],je=U.points[W+1];if(Y(de.x,de.y,je.x,je.y)){q=!0;break}}return q&&console.log("Erasing stroke at position:",H,le,"brushSize:",xe,"selectedLayer:",$e),!q});console.log("Strokes before:",G.length,"after:",I.length);const V=new Set(I.map(U=>U.id));return bs(U=>U.filter(te=>V.has(te))),ki(U=>U.filter(te=>V.has(te))),Cl(U=>U.filter(te=>V.has(te))),Il(U=>U.filter(te=>V.has(te))),I}),Vt||Vn(G=>{const I=xe/2,V=H-I,U=H+I,te=le-I,ne=le+I,k=M=>{const K=M.size/2,E=M.x-K,Y=M.x+K,q=M.y-K,W=M.y+K;return!(U<E||V>Y||ne<q||te>W)};return G.filter(M=>!k(M))}),Rn||_n(G=>{const I=xe/2,V=H-I,U=H+I,te=le-I,ne=le+I,k=K=>{const E=Math.max(6,(K.size||18)/2),Y=E*.8,q=E+Y,W=K.x-q,de=K.x+q,je=K.y-q,ge=K.y+q;return!(U<W||V>de||ne<je||te>ge)};return G.filter(K=>!k(K))}));else if(yc&&Ei&&Ge){if(sl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}const G=H-Ei.x,I=le-Ei.y;Ge==="top"&&D?oe(V=>V?{...V,x:V.x+G,y:V.y+I}:null):Ge==="bottom"&&b?ie(V=>V?{...V,x:V.x+G,y:V.y+I}:null):Ge==="both"&&(D&&oe(V=>V?{...V,x:V.x+G,y:V.y+I}:null),b&&ie(V=>V?{...V,x:V.x+G,y:V.y+I}:null)),ji({x:H,y:le})}},[pa,Mt,C,xe,yc,Ei,Ge,D,b,mc,xi,$e,wt,Ue,Ie.x,Ie.y,dl,sa,sl,zn,kt,en,Vt,Rn]),ll=w.useCallback(()=>{if(C==="select"&&dl){const a=Ql,s=sa;if(Us(!1),ka(null),qi(null),a&&s){const u=a.width<3&&a.height<3,d=(k,M)=>{const K=a.x,E=a.y,Y=a.x+a.width,q=a.y+a.height;return k>=K&&k<=Y&&M>=E&&M<=q},g=(k,M,K,E,Y,q,W,de)=>{const bt=(Ft,Ze)=>{let gt=0;return Ft<Y?gt|=1:Ft>W&&(gt|=2),Ze<q?gt|=4:Ze>de&&(gt|=8),gt};let Re=k,rt=M,Ct=K,st=E,vt=bt(Re,rt),tn=bt(Ct,st);for(;;){if((vt|tn)===0)return!0;if((vt&tn)!==0)return!1;const Ft=vt!==0?vt:tn;let Ze=0,gt=0;Ft&8?(Ze=Re+(Ct-Re)*(de-rt)/(st-rt),gt=de):Ft&4?(Ze=Re+(Ct-Re)*(q-rt)/(st-rt),gt=q):Ft&2?(gt=rt+(st-rt)*(W-Re)/(Ct-Re),Ze=W):(gt=rt+(st-rt)*(Y-Re)/(Ct-Re),Ze=Y),Ft===vt?(Re=Ze,rt=gt,vt=bt(Re,rt)):(Ct=Ze,st=gt,tn=bt(Ct,st))}},y=a.x,f=a.y,h=a.x+a.width,S=a.y+a.height,x=Math.max(6/Ue,4),R=(k,M,K,E,Y,q)=>{const W=Y-K,de=q-E;if(W===0&&de===0)return Math.hypot(k-K,M-E);const je=Math.max(0,Math.min(1,((k-K)*W+(M-E)*de)/(W*W+de*de))),ge=K+je*W,Oe=E+je*de;return Math.hypot(k-ge,M-Oe)},H=s?.shiftKey===!0,le=new Set(H?Array.from(Ee):[]),G=new Set(H?Array.from(qe):[]),I=new Set(H?Array.from(Fe):[]),V=new Set(H?Array.from(He):[]);if(u){let k=null;for(const M of De){let K=!1;if(M.type==="via"||M.type==="pad"?K=Nn:K=M.layer==="top"?$l:jl,!K)continue;let E=1/0;if(M.type==="via"||M.type==="pad"){const Y=M.points[0],q=Math.max(1,M.size/2);E=Math.hypot(Y.x-s.x,Y.y-s.y),E<=Math.max(q,x)&&(!k||E<k.dist)&&(k={id:M.id,dist:E})}else for(let Y=0;Y<M.points.length-1;Y++){const q=M.points[Y],W=M.points[Y+1],de=R(s.x,s.y,q.x,q.y,W.x,W.y);if(de<=Math.max(x,M.size/2)){(!k||de<k.dist)&&(k={id:M.id,dist:de});break}}}k&&le.add(k.id)}else for(const k of De){let M=!1;if(k.type==="via"||k.type==="pad"?M=Nn:M=k.layer==="top"?$l:jl,!M)continue;let K=!1;if(k.type==="via"||k.type==="pad"){const E=k.points[0];K=d(E.x,E.y)}else for(let E=0;E<k.points.length-1;E++){const Y=k.points[E],q=k.points[E+1];if(g(Y.x,Y.y,q.x,q.y,y,f,h,S)||d(Y.x,Y.y)&&d(q.x,q.y)){K=!0;break}}K&&le.add(k.id)}const U=k=>{const K=Math.max(10,k.size||18)/2;return k.x-K<=h&&k.x+K>=y&&k.y-K<=S&&k.y+K>=f};if(u){const k=M=>{const E=Math.max(10,M.size||18)/2;return s.x>=M.x-E&&s.x<=M.x+E&&s.y>=M.y-E&&s.y<=M.y+E};oa&&Ve.forEach(M=>{k(M)&&G.add(M.id)}),Ea&&ot.forEach(M=>{k(M)&&G.add(M.id)})}else oa&&Ve.forEach(k=>{U(k)&&G.add(k.id)}),Ea&&ot.forEach(k=>{U(k)&&G.add(k.id)});const te=k=>{const M=Math.max(6,k.size/2),K=M*.8,E=M+K;return k.x-E<=h&&k.x+E>=y&&k.y-E<=S&&k.y+E>=f};if(Wa)if(u){let k=null;for(const M of Ye){const K=Math.max(6,M.size/2),E=K*.8,Y=K+E,q=Math.hypot(M.x-s.x,M.y-s.y),W=Math.abs(s.x-M.x)<=x&&Math.abs(s.y-M.y)<=Y,de=Math.abs(s.y-M.y)<=x&&Math.abs(s.x-M.x)<=Y;if(q<=Math.max(K,x)||W||de){const ge=Math.min(q,Math.abs(s.x-M.x)+Math.abs(s.y-M.y));(!k||ge<k.dist)&&(k={id:M.id,dist:ge})}}k&&I.add(k.id)}else Ye.forEach(k=>{te(k)&&I.add(k.id)});const ne=k=>{const M=Math.max(6,(k.size||18)/2),K=M*.8,E=M+K;return k.x-E<=h&&k.x+E>=y&&k.y-E<=S&&k.y+E>=f};if(fl)if(u){let k=null;for(const M of yt){const K=Math.max(6,(M.size||18)/2),E=K*.8,Y=K+E,q=Math.hypot(M.x-s.x,M.y-s.y),W=Math.abs(s.x-M.x)<=x&&Math.abs(s.y-M.y)<=Y,de=Math.abs(s.y-M.y)<=x&&Math.abs(s.x-M.x)<=Y;if(q<=Math.max(K,x)||W||de){const ge=Math.min(q,Math.abs(s.x-M.x)+Math.abs(s.y-M.y));(!k||ge<k.dist)&&(k={id:M.id,dist:ge})}}k&&V.add(k.id)}else yt.forEach(k=>{ne(k)&&V.add(k.id)});fn(le),ln(G),un(I),an(V)}}if(pa&&Mt.length>0){if(C==="draw"&&be!=="trace"){const a={id:Date.now().toString(),points:Mt,color:Te,size:xe,layer:$e,type:"trace"};wt(s=>[...s,a]),$e==="top"?Cl(s=>[...s,a.id]):Il(s=>[...s,a.id])}Hn([])}nl&&(oi(!1),va.current=null,So.current=null),po(!1),$n(!1),ji(null),Fo(!1)},[pa,Mt,C,Te,xe,$e,Ql,sa,dl,De,Ue,Sa,Ee,Ye,yt,Ve,ot,qe,Fe,He,Nn,$l,jl,oa,Ea,Wa,fl]);tt.useEffect(()=>{if(!(C==="pan"&&nl&&So.current))return;const a=u=>{const d=Xn.current;if(!d)return;const g=d.getBoundingClientRect(),y=d.width/g.width,f=d.height/g.height,{startClientX:h,startClientY:S,panX:x,panY:R}=So.current,H=(u.clientX-h)*y,le=(u.clientY-S)*f;el({x:x+H,y:R+le})},s=()=>{oi(!1),va.current=null,So.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",s,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",s,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",s,!0)}},[C,nl]);const Bn=w.useCallback(()=>{const a=Xn.current;if(!a)return;const s=a.getContext("2d");if(!s)return;s.clearRect(0,0,a.width,a.height),s.save(),s.beginPath(),s.rect(40,40,a.width-80,a.height-80),s.clip(),s.translate(40,40),s.translate(Ie.x,Ie.y),s.scale(Ue,Ue);const u=(f,h)=>{const S=f.width,x=f.height,R=document.createElement("canvas");R.width=S,R.height=x;const H=R.getContext("2d");if(!H)return R;H.drawImage(f,0,0,S,x);const G=H.getImageData(0,0,S,x).data,I=new Uint8ClampedArray(S*x);for(let E=0;E<S*x;E++){const Y=G[E*4+0],q=G[E*4+1],W=G[E*4+2];I[E]=Math.round(.299*Y+.587*q+.114*W)}const V=[-1,0,1,-2,0,2,-1,0,1],U=[-1,-2,-1,0,0,0,1,2,1],te=new Float32Array(S*x);for(let E=1;E<x-1;E++)for(let Y=1;Y<S-1;Y++){let q=0,W=0,de=0;for(let ge=-1;ge<=1;ge++)for(let Oe=-1;Oe<=1;Oe++){const it=Y+Oe,qt=E+ge,bt=I[qt*S+it];q+=bt*V[de],W+=bt*U[de],de++}const je=Math.sqrt(q*q+W*W);te[E*S+Y]=je}let ne=0;for(let E=0;E<te.length;E++)te[E]>ne&&(ne=te[E]);const k=H.createImageData(S,x),M=k.data,K=.2;for(let E=0;E<S*x;E++){const q=(ne>0?te[E]/ne:0)>=K?255:0,W=h?255-q:q;M[E*4+0]=W,M[E*4+1]=W,M[E*4+2]=W,M[E*4+3]=255}return H.putImageData(k,0,0),R},d=(f,h,S,x,R,H,le,G)=>{const I=document.createElement("canvas");I.width=S,I.height=x;const V=I.getContext("2d",{willReadFrequently:!0});V.clearRect(0,0,S,x),V.drawImage(h,0,0,S,x);let U=I;if(Math.abs(R)>1e-6){const te=Math.tan(R),ne=Math.max(.2,1-te),k=Math.max(.2,1+te),M=Math.max(ne,k),K=Math.max(1,Math.ceil(S*M)),E=document.createElement("canvas");E.width=K,E.height=x;const Y=E.getContext("2d",{willReadFrequently:!0});Y.clearRect(0,0,K,x);for(let q=0;q<x;q++){const W=x<=1?0:q/(x-1),de=ne*(1-W)+k*W,je=Math.max(1,S*de),ge=(K-je)/2;Y.drawImage(U,0,q,S,1,ge,q,je,1)}U=E}if(Math.abs(H)>1e-6){const te=Math.tan(H),ne=Math.max(.2,1-te),k=Math.max(.2,1+te),M=Math.max(ne,k),K=Math.max(1,Math.ceil(x*M)),E=document.createElement("canvas");E.width=U.width,E.height=K;const Y=E.getContext("2d",{willReadFrequently:!0});Y.clearRect(0,0,E.width,K);for(let q=0;q<U.width;q++){const W=U.width<=1?0:q/(U.width-1),de=ne*(1-W)+k*W,je=Math.max(1,x*de),ge=(K-je)/2;Y.drawImage(U,q,0,1,U.height,q,ge,1,je)}U=E}f.drawImage(U,-le/2,-G/2,le,G)},g=Yi&&di;if(D&&D.bitmap&&Yi){const f=D.bitmap;s.save(),s.globalAlpha=1,Wo&&!ta?s.filter="grayscale(100%)":s.filter="none";const h=a.width-80,S=a.height-80,x=h/2,R=S/2;if(s.translate(x+D.x,R+D.y),s.rotate(D.rotation*Math.PI/180),D.skewX||D.skewY){const I=Math.tan(D.skewX||0),V=Math.tan(D.skewY||0);s.transform(1,V,I,1,0,0)}s.scale(D.scale*(D.flipX?-1:1),D.scale*(D.flipY?-1:1));const H=f.width*1,le=f.height*1,G=ta?u(f,Ya):f;D.keystoneV&&Math.abs(D.keystoneV)>1e-6||D.keystoneH&&Math.abs(D.keystoneH)>1e-6?d(s,G,f.width,f.height,D.keystoneV||0,D.keystoneH||0,H,le):s.drawImage(G,-H/2,-le/2,H,le),s.restore()}if(b&&b.bitmap&&di){const f=b.bitmap;s.save(),s.globalAlpha=g?Ke/100:1,Wo&&!ta?s.filter="grayscale(100%)":s.filter="none";const h=a.width-80,S=a.height-80,x=h/2,R=S/2;if(s.translate(x+b.x,R+b.y),s.rotate(b.rotation*Math.PI/180),b.skewX||b.skewY){const I=Math.tan(b.skewX||0),V=Math.tan(b.skewY||0);s.transform(1,V,I,1,0,0)}s.scale(b.scale*(b.flipX?-1:1),b.scale*(b.flipY?-1:1));const H=f.width*1,le=f.height*1,G=ta?u(f,Ya):f;b.keystoneV&&Math.abs(b.keystoneV)>1e-6||b.keystoneH&&Math.abs(b.keystoneH)>1e-6?d(s,G,f.width,f.height,b.keystoneV||0,b.keystoneH||0,H,le):s.drawImage(G,-H/2,-le/2,H,le),s.restore()}if(Da(s),Wa&&Ye.length>0){const f=h=>{s.save();const S=St.find(G=>G.id===h.powerBusId),x=Fe.has(h.id),R="#ff0000";s.strokeStyle=R,s.lineWidth=Math.max(1,(x?3:2)/Math.max(Ue,.001)),s.lineCap="round";const H=Math.max(6,h.size/2),le=H*.8;x&&(s.strokeStyle="#0066ff",s.lineWidth=Math.max(1,4/Math.max(Ue,.001)),s.beginPath(),s.arc(h.x,h.y,H+le+3,0,Math.PI*2),s.stroke()),s.strokeStyle=R,s.lineWidth=Math.max(1,(x?3:2)/Math.max(Ue,.001)),s.beginPath(),s.arc(h.x,h.y,H,0,Math.PI*2),s.stroke(),s.beginPath(),s.moveTo(h.x,h.y-H-le),s.lineTo(h.x,h.y+H+le),s.stroke(),s.beginPath(),s.moveTo(h.x-H-le,h.y),s.lineTo(h.x+H+le,h.y),s.stroke(),S&&(s.fillStyle=R,s.font=`${Math.max(10,H*.8)}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(S.voltage,h.x,h.y+H+le+12)),s.restore()};Ye.forEach(f)}if(fl&&yt.length>0){const f=h=>{s.save();const S=He.has(h.id),x="#000000";s.strokeStyle=x,s.lineWidth=Math.max(1,(S?3:2)/Math.max(Ue,.001)),s.lineCap="round";const R=Math.max(6,(h.size||18)/2),H=R*.8;S&&(s.strokeStyle="#0066ff",s.lineWidth=Math.max(1,4/Math.max(Ue,.001)),s.beginPath(),s.arc(h.x,h.y,R+H+3,0,Math.PI*2),s.stroke()),s.strokeStyle=x,s.lineWidth=Math.max(1,(S?3:2)/Math.max(Ue,.001)),s.beginPath(),s.arc(h.x,h.y,R,0,Math.PI*2),s.stroke(),s.beginPath(),s.moveTo(h.x,h.y-R-H),s.lineTo(h.x,h.y+R+H),s.stroke(),s.beginPath(),s.moveTo(h.x-R-H,h.y),s.lineTo(h.x+R+H,h.y),s.stroke(),s.restore()};yt.forEach(f)}const y=f=>{const h=Math.max(10,f.size||18),S=h/2;s.save(),s.strokeStyle=f.color||"#111",s.lineWidth=Math.max(1,2/Math.max(Ue,.001)),s.fillStyle="rgba(255,255,255,0.85)",s.beginPath(),s.rect(f.x-S,f.y-S,h,h),s.fill(),s.stroke();let x="abbreviation"in f&&f.abbreviation?String(f.abbreviation).trim():"";(!x||x===""||x==="****"||x==="*"||x==="?")&&(x=ys(f.componentType)),s.fillStyle=f.color||"#111",s.font=`bold ${Math.max(8,h*.35)}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(x,f.x,f.y);const R=f.pinConnections||[];if(R.length>0&&R.length===f.pinCount&&R.every(G=>G&&G.trim()!=="")){const I=s.measureText(x).width,V=f.y+h*.35/2+2;s.strokeStyle=f.color||"#111",s.lineWidth=Math.max(1,2/Math.max(Ue,.001)),s.beginPath(),s.moveTo(f.x-I/2,V),s.lineTo(f.x+I/2,V),s.stroke()}qe.has(f.id)&&(s.setLineDash([4,3]),s.strokeStyle="#00bfff",s.lineWidth=1.5,s.strokeRect(f.x-S-3,f.y-S-3,h+6,h+6),s.setLineDash([])),s.restore()};if(oa&&Ve.forEach(y),Ea&&ot.forEach(y),C==="select"&&Ql){s.save();const f=Math.max(2,6/Math.max(1e-4,Ue));s.strokeStyle="#00bfff",s.fillStyle="rgba(0, 191, 255, 0.15)",s.lineWidth=Math.max(1,1.5/Math.max(1e-4,Ue)),s.setLineDash([f,f]),s.beginPath(),s.rect(Ql.x,Ql.y,Ql.width,Ql.height),s.fill(),s.stroke(),s.setLineDash([]),s.restore()}s.restore()},[D,b,Ke,De,Mt,pa,C,Te,xe,Wo,ta,Ya,Ge,$e,Ue,Ie.x,Ie.y,Yi,di,Nn,$l,jl,za,Pa,oa,Ea,Ve,ot,Wa,Ye,fl,yt,Ql,Ee,qe,Fe,He,Wt,ht,Me,z,nt,be,Xl]);tt.useEffect(()=>{const a=Xn.current,s=Ia.current,u=_i.current,d=Oi.current;if(!a||!s||!u||!d)return;let g=null;const y=a.width-80,f=a.height-80,h=y/2,S=f/2,x=M=>{if(!M||!M.bitmap)return;const K=M.bitmap.width,E=M.bitmap.height,Y=M.keystoneV?Math.tan(M.keystoneV):0,q=M.keystoneH?Math.tan(M.keystoneH):0,W=Math.max(.2,1-Y),de=Math.max(.2,1+Y),je=Math.max(.2,1-q),ge=Math.max(.2,1+q),Oe=Math.max(W,de),it=Math.max(je,ge),qt=K*Oe,bt=E*it,Re=M.skewX?Math.tan(M.skewX):0,rt=M.skewY?Math.tan(M.skewY):0,Ct=Math.abs(M.scale),st=Math.abs(Ct)*qt+Math.abs(Re)*Math.abs(Ct)*bt,vt=Math.abs(rt)*Math.abs(Ct)*qt+Math.abs(Ct)*bt,tn=j0(st,vt,h,S,M.x,M.y,1,1,M.rotation);g=E0(g,tn)};if(x(D),x(b),!g){u.style.width=`${s.clientWidth}px`,d.style.height=`${s.clientHeight}px`;return}const R=g,H=R.maxX-R.minX,le=R.maxY-R.minY,G=H*Ue,I=le*Ue,V=8,U=Math.max(s.clientWidth,Math.ceil(G)+V*2),te=Math.max(s.clientHeight,Math.ceil(I)+V*2);u.style.width=`${U}px`,d.style.height=`${te}px`,vo.current=R.minX*Ue-V,ba.current=R.minY*Ue-V;const ne=mo.current,k=Tl.current;if(Zn.current=!0,ne){const M=Math.max(0,ne.scrollWidth-ne.clientWidth),K=Math.max(0,Math.min(M,-(Ie.x+vo.current)));ne.scrollLeft=K}if(k){const M=Math.max(0,k.scrollHeight-k.clientHeight),K=Math.max(0,Math.min(M,-(Ie.y+ba.current)));k.scrollTop=K}requestAnimationFrame(()=>{Zn.current=!1})},[D,b,Ue,Ie.x,Ie.y,aa.width,aa.height]),tt.useEffect(()=>{const a=()=>{const s=Ia.current;if(!s)return;const u=1.6,d=24,g=s.clientWidth-d,y=s.clientHeight-d,f=Math.floor(y*u),h=Math.floor(g/u);let S,x;f<=g?(S=f,x=y):(S=g,x=h),S=Math.max(600,S),x=Math.max(375,x),Qn(R=>R.width===S&&R.height===x?R:{width:S,height:x})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const Da=w.useCallback(a=>{if(De.forEach(s=>{if(s.type==="via"||s.type==="pad")return;let u=!1;if(s.layer==="top"?u=$l:s.layer==="bottom"&&(u=jl),!!u)if(s.points.length===1){const d=s.points[0],g=Math.max(.5,s.size/2);Ee.has(s.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(d.x,d.y,g+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=s.color,a.beginPath(),a.arc(d.x,d.y,g,0,Math.PI*2),a.fill()}else{Ee.has(s.id)&&(a.strokeStyle="#00bfff",a.lineWidth=s.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),s.points.forEach((d,g)=>{g===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=s.color,a.lineWidth=s.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),s.points.forEach((d,g)=>{g===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke();for(const d of s.points)a.beginPath(),a.arc(d.x,d.y,s.size/2,0,Math.PI*2),a.fill()}}),De.forEach(s=>{if(s.type==="via"){if(!Nn)return}else if(s.type==="pad"){if(s.layer==="top"&&!za||s.layer==="bottom"&&!Pa)return}else return;const u=s.points[0];if(Ee.has(s.id)){if(s.type==="via"){const d=Math.max(.5,s.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(u.x,u.y,d,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(s.type==="pad"){const d=Math.max(.5,s.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(u.x-d,u.y-d,s.size+6,s.size+6),a.setLineDash([])}}if(s.type==="via"){const d=Math.max(.5,s.size/2),g=d*.5,y=d*.7;a.fillStyle=s.color,a.beginPath(),a.arc(u.x,u.y,d,0,Math.PI*2),a.arc(u.x,u.y,g,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(u.x-y,u.y),a.lineTo(u.x+y,u.y),a.stroke(),a.beginPath(),a.moveTo(u.x,u.y-y),a.lineTo(u.x,u.y+y),a.stroke()}else if(s.type==="pad"){const d=Math.max(.5,s.size/2),g=s.size,y=g*.5,f=d*.7;a.fillStyle=s.color,a.beginPath(),a.rect(u.x-d,u.y-d,g,g),a.rect(u.x-y/2,u.y-y/2,y,y),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(u.x-f,u.y),a.lineTo(u.x+f,u.y),a.stroke(),a.beginPath(),a.moveTo(u.x,u.y-f),a.lineTo(u.x,u.y+f),a.stroke()}}),Mt.length>0){const s=$e;let u=!0;if(C==="draw"&&(be==="via"?u=Nn:u=s==="top"?$l:jl),u)if(C==="draw")if(be==="via"){const d=Mt[Mt.length-1],g=Math.max(.5,xe/2),y=g*.5,f=g*.7;a.fillStyle=Te,a.beginPath(),a.arc(d.x,d.y,g,0,Math.PI*2),a.arc(d.x,d.y,y,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(d.x-f,d.y),a.lineTo(d.x+f,d.y),a.stroke(),a.beginPath(),a.moveTo(d.x,d.y-f),a.lineTo(d.x,d.y+f),a.stroke()}else if(be==="pad"){const d=Mt[Mt.length-1],g=Math.max(.5,xe/2),y=xe,f=y*.5,h=g*.7;a.fillStyle=Te,a.beginPath(),a.rect(d.x-g,d.y-g,y,y),a.rect(d.x-f/2,d.y-f/2,f,f),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(d.x-h,d.y),a.lineTo(d.x+h,d.y),a.stroke(),a.beginPath(),a.moveTo(d.x,d.y-h),a.lineTo(d.x,d.y+h),a.stroke()}else{const d=Wt||"top",g=d==="top"?ht:Me,y=d==="top"?z:nt;if(Mt.length===1){const f=Mt[0],h=Math.max(.5,y/2);a.fillStyle=g,a.beginPath(),a.arc(f.x,f.y,h,0,Math.PI*2),a.fill(),Xl&&(a.strokeStyle=g,a.lineWidth=y,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(Xl.x,Xl.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=g,a.lineWidth=y,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),Mt.forEach((f,h)=>{h===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y)}),a.stroke(),Xl&&Mt.length>0){const f=Mt[Mt.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(Xl.x,Xl.y),a.stroke(),a.globalAlpha=1}}else C==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=xe,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),Mt.forEach((d,g)=>{g===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke())}},[De,Ee,$l,jl,Nn,za,Pa,Mt,C,be,Te,xe,$e,Wt,ht,Me,z,nt,Xl]),Gn=w.useCallback((a,s)=>{if(sl){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&D?oe(u=>u?{...u,...s}:null):a==="bottom"&&b?ie(u=>u?{...u,...s}:null):a==="both"&&(D&&oe(u=>u?{...u,...s}:null),b&&ie(u=>u?{...u,...s}:null))},[D,b,sl]),Kl=w.useCallback(()=>{Ge&&(Gn(Ge,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),Ai(!1),gs(!1),Dn(!1))},[Gn,Ge]),Rl=w.useCallback(()=>{if(Ee.size>0||qe.size>0||Fe.size>0||He.size>0){if(Ee.size>0){const a=De.filter(g=>Ee.has(g.id)),s=zn&&a.some(g=>g.type==="via"),u=en&&a.some(g=>g.type==="trace"),d=kt&&a.some(g=>g.type==="pad");if(s){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(u){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(d){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(qe.size>0&&We){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(Fe.size>0&&Vt){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(He.size>0&&Rn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(wt(a=>a.map(s=>{if(Ee.has(s.id)){const u=s.size+1;return s.type==="via"?ae("via",u):s.type==="pad"?ae("pad",u):s.type==="trace"&&ae("trace",u,s.layer),{...s,size:u}}return s})),qe.size>0){const a=(qe.size>0&&Ve.find(s=>qe.has(s.id))?.size||18)+1;ae("component",a),At(s=>s.map(u=>qe.has(u.id)?{...u,size:(u.size||18)+1}:u)),En(s=>s.map(u=>qe.has(u.id)?{...u,size:(u.size||18)+1}:u))}if(Fe.size>0){const a=(Ye.find(s=>Fe.has(s.id))?.size||18)+1;ae("power",a),Vn(s=>s.map(u=>Fe.has(u.id)?{...u,size:u.size+1}:u))}if(He.size>0){const a=(yt.find(s=>He.has(s.id))?.size||18)+1;ae("ground",a),_n(s=>s.map(u=>He.has(u.id)?{...u,size:(u.size||18)+1}:u))}}else pt(a=>Math.min(40,a+1))},[Ee,qe,Fe,He,De,zn,en,We,Vt,Rn,C,be,$e,ae]),Zi=w.useCallback(()=>{if(Ee.size>0||qe.size>0||Fe.size>0||He.size>0){if(Ee.size>0){const a=De.filter(g=>Ee.has(g.id)),s=zn&&a.some(g=>g.type==="via"),u=en&&a.some(g=>g.type==="trace"),d=kt&&a.some(g=>g.type==="pad");if(s){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(u){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(d){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(qe.size>0&&We){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(Fe.size>0&&Vt){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(He.size>0&&Rn){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(wt(a=>a.map(s=>{if(Ee.has(s.id)){const u=Math.max(1,s.size-1);return s.type==="via"?ae("via",u):s.type==="pad"?ae("pad",u):s.type==="trace"&&ae("trace",u,s.layer),{...s,size:u}}return s})),qe.size>0){const a=Math.max(1,(Ve.find(s=>qe.has(s.id))?.size||18)-1);ae("component",a),At(s=>s.map(u=>qe.has(u.id)?{...u,size:Math.max(1,(u.size||18)-1)}:u)),En(s=>s.map(u=>qe.has(u.id)?{...u,size:Math.max(1,(u.size||18)-1)}:u))}if(Fe.size>0){const a=Math.max(1,(Ye.find(s=>Fe.has(s.id))?.size||18)-1);ae("power",a),Vn(s=>s.map(u=>Fe.has(u.id)?{...u,size:Math.max(1,u.size-1)}:u))}if(He.size>0){const a=Math.max(1,(yt.find(s=>He.has(s.id))?.size||18)-1);ae("ground",a),_n(s=>s.map(u=>He.has(u.id)?{...u,size:Math.max(1,(u.size||18)-1)}:u))}}else pt(a=>Math.max(1,a-1))},[Ee,qe,Fe,He,De,zn,en,We,Vt,Rn,C,be,$e,ae]),Qi=w.useCallback(()=>{const a=zl.size;if(Ee.size>0||qe.size>0||Fe.size>0||He.size>0){if(Ee.size>0){const s=De.filter(y=>Ee.has(y.id)),u=zn&&s.some(y=>y.type==="via"),d=kt&&s.some(y=>y.type==="pad"),g=en&&s.some(y=>y.type==="trace");if(u||d||g){alert("Cannot change size: selected items are locked.");return}}if(qe.size>0&&We){alert("Cannot change size: selected components are locked.");return}if(Fe.size>0&&Vt){alert("Cannot change size: selected power nodes are locked.");return}if(He.size>0&&Rn){alert("Cannot change size: selected ground nodes are locked.");return}wt(s=>s.map(u=>Ee.has(u.id)?(u.type==="via"?(ae("via",a),nn(d=>{const g=new Map(d),y=g.get("via");return y&&g.set("via",{...y,settings:{...y.settings,size:a}}),g})):u.type==="pad"?(ae("pad",a),nn(d=>{const g=new Map(d),y=g.get("pad");return y&&g.set("pad",{...y,settings:{...y.settings,size:a}}),g})):u.type==="trace"&&ae("trace",a,u.layer),{...u,size:a}):u)),qe.size>0&&(ae("component",a),At(s=>s.map(u=>qe.has(u.id)?{...u,size:a}:u)),En(s=>s.map(u=>qe.has(u.id)?{...u,size:a}:u))),Fe.size>0&&(ae("power",a),Vn(s=>s.map(u=>Fe.has(u.id)?{...u,size:a}:u))),He.size>0&&(ae("ground",a),_n(s=>s.map(u=>He.has(u.id)?{...u,size:a}:u)))}else pt(a),C==="draw"&&be==="trace"?$e==="top"?(Jn(a),ae("trace",a,"top")):(Kt(a),ae("trace",a,"bottom")):ae(C==="draw"&&be==="via"?"via":C==="draw"&&be==="pad"?"pad":C==="component"?"component":C==="power"?"power":C==="ground"?"ground":"brush",a);Ca({visible:!1,size:6})},[zl.size,Ee,qe,Fe,He,De,zn,en,We,Vt,Rn,C,be,$e,ae,at,nn]),Ls=w.useCallback(()=>{wo({visible:!1,source:null}),cl({visible:!0,interval:5})},[]),Hs=w.useCallback(()=>{wo({visible:!1,source:null})},[]),Mn=w.useCallback(async()=>{const a=$a.interval;if(a===null){El(!1),Qa(null),Yt.current&&(clearInterval(Yt.current),Yt.current=null),cl({visible:!1,interval:5}),console.log("Auto save: Disabled");return}if(!mn){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let s=ri;if(!s){const d=window;if(typeof d.showDirectoryPicker=="function")try{s=await d.showDirectoryPicker(),ui(s)}catch(g){g?.name!=="AbortError"&&(console.error("Failed to get directory:",g),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser.");return}}Li(s);const u=mn.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");zo(u),_l.current=s,al.current=u,Qa(a),El(!0),ql.current=!0,cl({visible:!1,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),Ol()},200)},[$a.interval,mn,ri]),Dt=w.useCallback(a=>{if(a.key==="Escape"){const d=document.activeElement;if(d&&(d.tagName==="INPUT"&&d.type==="checkbox"||d.tagName==="INPUT"&&d.type==="radio")){d.blur(),a.preventDefault(),a.stopPropagation();return}}const s=document.activeElement;if(!(s&&(s.tagName==="INPUT"&&s.type!=="checkbox"&&s.type!=="radio"||s.tagName==="TEXTAREA"||s.isContentEditable)||yl.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),Rl();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),Zi();return}if((a.key==="I"||a.key==="i")&&(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation();const d=[];Ee.size>0,Ee.size===0&&qe.size===0&&Fe.size===0&&He.size===0&&d.push(`
No objects selected.`);const g=d.join(`
`);console.log(g),Ts({visible:!0,text:g});return}if(a.key==="O"||a.key==="o"){const d=document.activeElement;if(!!d&&(d.tagName==="INPUT"&&d.type!=="range"&&d.type!=="checkbox"&&d.type!=="radio"||d.tagName==="TEXTAREA"||d.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Vl(1);const y=Xn.current,f=Ia.current;let h=0,S=0;if(y&&f){const x=y.getBoundingClientRect(),R=f.getBoundingClientRect(),H=y.width-80,le=y.height-80,V=56+168+6,U=x.left-R.left,te=V-U,ne=x.width-Math.max(0,te),k=te+ne/2,M=x.height/2,K=H/2,E=le/2,Y=x.width/y.width,q=x.height/y.height,W=k/Y,de=M/q,je=W-40,ge=de-40;h=je-K,S=ge-E}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),el({x:h,y:S}),pe("overlay"),fn(new Set),ln(new Set),un(new Set),an(new Set),fe("select");return}if((a.key==="Alt"||a.altKey)&&kc(!0),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),fe("select"),Fa(!1),Do(!1),An(!1),xn(!1),hi(!1),Tn(!1),mi(null);return}if(a.key==="Enter"&&C==="draw"&&be==="trace"){ca();return}if((a.key==="Delete"||a.key==="Backspace")&&(Ee.size>0||qe.size>0||Fe.size>0||He.size>0)){if(a.preventDefault(),a.stopPropagation(),Ee.size>0){const d=De.filter(h=>Ee.has(h.id)),g=zn&&d.some(h=>h.type==="via"),y=en&&d.some(h=>h.type==="trace"),f=kt&&d.some(h=>h.type==="pad");g?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):y?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):f?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):(wt(h=>h.filter(S=>!Ee.has(S.id))),fn(new Set))}qe.size>0&&(We?alert("Cannot delete: Components are locked. Unlock components to delete them."):(At(d=>d.filter(g=>!qe.has(g.id))),En(d=>d.filter(g=>!qe.has(g.id))),ln(new Set))),Fe.size>0&&(Vt?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Vn(d=>d.filter(g=>!Fe.has(g.id))),un(new Set))),He.size>0&&(Rn?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(_n(d=>d.filter(g=>!He.has(g.id))),an(new Set)));return}if((C==="draw"||C==="erase"||C==="power"||C==="ground")&&(a.key==="z"||a.key==="Z")&&(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),C==="power"){Vn(d=>d.length===0?d:d.slice(0,-1));return}if(C==="ground"){_n(d=>d.length===0?d:d.slice(0,-1));return}if(C==="draw"&&be==="trace"){const d=Mt,g=ni.current,y=d.length>0?d:g;if(y.length>0){y.length>1?Hn(f=>f.slice(0,-1)):Hn([]);return}wt(f=>{for(let h=f.length-1;h>=0;h--){const S=f[h];if(S.type==="trace"&&S.layer===$e&&S.points.length>=2)if(S.points.length>2){const x=S.points.slice(0,-1);return Hn(x),[...f.slice(0,h),...f.slice(h+1)]}else return[...f.slice(0,h),...f.slice(h+1)]}return f});return}if(pa&&Mt.length>0){Hn([]);return}C==="draw"&&(be==="via"||be==="pad")&&wt(d=>{for(let g=d.length-1;g>=0;g--){const y=d[g];if(y.layer===$e&&y.type===be)return[...d.slice(0,g),...d.slice(g+1)]}return d});return}if(!a.metaKey&&!a.ctrlKey&&!a.altKey){const d=document.activeElement;if(!(!!d&&(d.tagName==="INPUT"&&d.type!=="range"&&d.type!=="checkbox"&&d.type!=="radio"||d.tagName==="TEXTAREA"||d.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),fe("select");return;case"w":case"W":a.preventDefault(),fe("power");return;case"g":case"G":a.preventDefault(),fe("ground");return;case"v":case"V":a.preventDefault(),ho("via"),fe("draw");return;case"p":case"P":a.preventDefault(),ho("pad"),fe("draw"),Bt(Ml||"top"),Do(!0);return;case"t":case"T":a.preventDefault(),ho("trace"),fe("draw"),Bt(Wt||"top"),Fa(!0);return;case"c":case"C":a.preventDefault(),fe("component"),An(!0),xn(!1),yi(null);return;case"e":case"E":a.preventDefault(),fe("erase");return;case"h":case"H":a.preventDefault(),fe("pan");return;case"z":case"Z":if(!(a.metaKey||a.ctrlKey)){a.preventDefault(),qa(!1),fe("magnify");return}break}}if(C==="transform"&&Ge){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const g=document.activeElement;if(g&&g.tagName==="INPUT"){const y=g;y.type==="radio"&&y.blur()}if(il==="nudge"){let y=0,f=0;switch(a.key){case"ArrowLeft":y=-1;break;case"ArrowRight":y=1;break;case"ArrowUp":f=-1;break;case"ArrowDown":f=1;break;default:return}Ge==="top"&&D?oe(h=>h?{...h,x:h.x+y,y:h.y+f}:null):Ge==="bottom"&&b?ie(h=>h?{...h,x:h.x+y,y:h.y+f}:null):Ge==="both"&&(D&&oe(h=>h?{...h,x:h.x+y,y:h.y+f}:null),b&&ie(h=>h?{...h,x:h.x+y,y:h.y+f}:null))}else if(il==="scale"){let y=0;switch(a.key){case"ArrowUp":y=.01;break;case"ArrowDown":y=-.01;break;case"ArrowRight":y=.001;break;case"ArrowLeft":y=-.001;break;default:return}Ge==="top"&&D?oe(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+y))}:null):Ge==="bottom"&&b?ie(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+y))}:null):Ge==="both"&&(D&&oe(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+y))}:null),b&&ie(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+y))}:null))}else if(il==="rotate"){let y=0;switch(a.key){case"ArrowUp":y=1;break;case"ArrowDown":y=-1;break;case"ArrowRight":y=.1;break;case"ArrowLeft":y=-.1;break;default:return}Ge==="top"&&D?oe(f=>f?{...f,rotation:f.rotation+y}:null):Ge==="bottom"&&b?ie(f=>f?{...f,rotation:f.rotation+y}:null):Ge==="both"&&(D&&oe(f=>f?{...f,rotation:f.rotation+y}:null),b&&ie(f=>f?{...f,rotation:f.rotation+y}:null))}else if(il==="slant"){let y=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":y=-.5;break;case"ArrowRight":y=.5;break}if(y!==0||f!==0){const h=x=>x*Math.PI/180,S=x=>Math.max(-.7,Math.min(.7,x));Ge==="top"&&D?oe(x=>x?{...x,skewX:S((x.skewX||0)+h(y)),skewY:S((x.skewY||0)+h(f))}:null):Ge==="bottom"&&b?ie(x=>x?{...x,skewX:S((x.skewX||0)+h(y)),skewY:S((x.skewY||0)+h(f))}:null):Ge==="both"&&(D&&oe(x=>x?{...x,skewX:S((x.skewX||0)+h(y)),skewY:S((x.skewY||0)+h(f))}:null),b&&ie(x=>x?{...x,skewX:S((x.skewX||0)+h(y)),skewY:S((x.skewY||0)+h(f))}:null))}}else if(il==="keystone"){let y=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":y=-.5;break;case"ArrowRight":y=.5;break}if(y!==0||f!==0){const h=x=>x*Math.PI/180,S=x=>Math.max(-.35,Math.min(.35,x));Ge==="top"&&D?oe(x=>x?{...x,keystoneH:S((x.keystoneH||0)+h(y)),keystoneV:S((x.keystoneV||0)+h(f))}:null):Ge==="bottom"&&b?ie(x=>x?{...x,keystoneH:S((x.keystoneH||0)+h(y)),keystoneV:S((x.keystoneV||0)+h(f))}:null):Ge==="both"&&(D&&oe(x=>x?{...x,keystoneH:S((x.keystoneH||0)+h(y)),keystoneV:S((x.keystoneV||0)+h(f))}:null),b&&ie(x=>x?{...x,keystoneH:S((x.keystoneH||0)+h(y)),keystoneV:S((x.keystoneV||0)+h(f))}:null))}}}else{const d=a.target;if(d.tagName==="INPUT"&&d.type==="range"){const g=d,y=Number(g.value),f=Number(g.min),h=Number(g.max),S=Number(g.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const x=Math.max(f,y-S);g.value=x.toString(),g.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const R=Math.min(h,y+S);g.value=R.toString(),g.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[C,Ge,il,D,b,Ee,qe,Fe,He,De,Ve,ot,Ye,yt,St,be,ca,Wt,ht,Me,z,nt]);tt.useEffect(()=>{C!=="transform"&&zi(null)},[C]),tt.useEffect(()=>{window.addEventListener("keydown",Dt,!0);const a=s=>{s.key==="Alt"&&kc(!1)};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",Dt,!0),window.removeEventListener("keyup",a,!0)}},[Dt,Fe,He,Vt,Rn,Ye,yt,Rl,Zi]);const Je=w.useCallback(()=>{$t("#AA4499"),_t("#F781BF"),Jn(6),Kt(6),Se("trace","#AA4499","top"),Se("trace","#F781BF","bottom"),ae("trace",6,"top"),ae("trace",6,"bottom"),Pt("#0072B2"),Z("#56B4E9"),O(26),re(26),Se("pad","#0072B2","top"),Se("pad","#56B4E9","bottom"),ae("pad",26,"top"),ae("pad",26,"bottom"),j("#6A3D9A"),ue("#9467BD"),Ne(18),Xe(18),Se("component","#6A3D9A","top"),Se("component","#9467BD","bottom"),ae("component",18,"top"),ae("component",18,"bottom"),Zl("top"),dt("#AA4499"),pt(6),ja([{id:"powerbus-1",name:"+3.3VDC",voltage:"+3.3VDC",color:"#ff0000"},{id:"powerbus-2",name:"+5VDC",voltage:"+5VDC",color:"#ff0000"}]),ei(!1),Gl(!1),ti(!1),vs(!1),ya(!1),ga(!1),Bt("top"),fe("select"),ye(50),ve(!1),pe("overlay"),Kp(1)},[Se,ae]),Wn=w.useCallback(()=>{Je(),setTimeout(()=>{Vl(1);const a=Xn.current,s=Ia.current;let u=0,d=0;if(a&&s){const g=a.getBoundingClientRect(),y=s.getBoundingClientRect(),f=a.width-80,h=a.height-80,R=56+168+6,H=g.left-y.left,le=R-H,G=g.width-Math.max(0,le),I=le+G/2,V=g.height/2,U=f/2,te=h/2,ne=g.width/a.width,k=g.height/a.height,M=I/ne,K=V/k,E=M-40,Y=K-40;u=E-U,d=Y-te}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),el({x:u,y:d}),fn(new Set),ln(new Set),un(new Set),an(new Set)},100)},[Je]);tt.useEffect(()=>{Wn()},[]),tt.useEffect(()=>{if(!ws.visible)return;const a=[];Ee.size>0,Ee.size===0&&qe.size===0&&Fe.size===0&&He.size===0&&a.push(`
No objects selected.`);const s=a.join(`
`);Ts(u=>({...u,text:s}))},[ws.visible,Ee,qe,Fe,He,De,Ve,ot,Ye,yt,St]),tt.useEffect(()=>{const a=s=>{const u=Xn.current;if(u&&!(Ja.current&&Ja.current.contains(s.target))&&!(s.target instanceof Node&&u.contains(s.target))){if(ca(),Ii){const d=Bs.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&Fa(!1)}if(No){const d=Ja.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&(An(!1),fe("select"))}if(Ro){const d=gi.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&(xn(!1),mi(null))}if(lt){const d=wc.current;!s.target?.closest('button[title="Color Picker"]')&&(!d||!(s.target instanceof Node)||!d.contains(s.target))&&Tn(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[ca,Ii,jc,No,Ro,lt]),tt.useEffect(()=>{const a=s=>{if(!Tt)return;const u=document.querySelector("[data-component-editor-dialog]");if(u&&s.target instanceof Node&&u.contains(s.target)){const Y=s.target;if(Y.tagName==="BUTTON"||Y.tagName==="INPUT"||Y.closest("button")||Y.closest("input"))return}const d=Xn.current;if(!d)return;const g=d.getBoundingClientRect(),y=s.clientX,f=s.clientY;if(y<g.left||y>g.right||f<g.top||f>g.bottom)return;const h=d.width/g.width,S=d.height/g.height,x=y-g.left,R=f-g.top,H=x*h,le=R*S,G=H-40,I=le-40,V=(G-Ie.x)/Ue,U=(I-Ie.y)/Ue;let te=1/0,ne=null,k=null;const M=Math.max(6/Ue,4),E=[...Ve,...ot].find(Y=>Y.id===Tt.componentId)?.layer||"top";for(const Y of De)if((Y.type==="via"||Y.type==="pad")&&Y.points.length>0){if(Y.type==="pad"&&(Y.layer||"top")!==E)continue;const q=Y.points[0],W=Math.max(1,Y.size/2),de=Math.hypot(q.x-V,q.y-U),je=Math.max(W,M);de<=je&&de<te&&(te=de,ne=q.id??null,k=Y)}if(ne!=null&&k){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${ne}`),console.log(`  Connecting pin ${Tt.pinIndex+1} of component ${Tt.componentId}`);const Y=String(ne),q=Tt.pinIndex,W=Tt.componentId,de=Ve.find(ge=>ge.id===W),je=ot.find(ge=>ge.id===W);de?At(ge=>{const Oe=ge.find(Re=>Re.id===W);if(!Oe)return ge;const it=Oe.pinConnections||[],qt=it.length>0?[...it]:new Array(Oe.pinCount).fill("");let bt;if(qt.length!==Oe.pinCount){bt=new Array(Oe.pinCount).fill("");for(let Re=0;Re<Math.min(qt.length,Oe.pinCount);Re++)bt[Re]=qt[Re]||""}else bt=[...qt];return bt[q]=Y,console.log(`Updated pin ${q} with value: ${Y}`),console.log("New pinConnections:",bt),ge.map(Re=>Re.id===W?{...Re,pinConnections:bt}:Re)}):je&&En(ge=>{const Oe=ge.find(Re=>Re.id===W);if(!Oe)return ge;const it=Oe.pinConnections||[],qt=it.length>0?[...it]:new Array(Oe.pinCount).fill("");let bt;if(qt.length!==Oe.pinCount){bt=new Array(Oe.pinCount).fill("");for(let Re=0;Re<Math.min(qt.length,Oe.pinCount);Re++)bt[Re]=qt[Re]||""}else bt=[...qt];return bt[q]=Y,console.log(`Updated pin ${q} with value: ${Y}`),console.log("New pinConnections:",bt),ge.map(Re=>Re.id===W?{...Re,pinConnections:bt}:Re)}),setTimeout(()=>{la(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(Tt)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[Tt,Ve,ot,De,Ue,Ie.x,Ie.y]),tt.useEffect(()=>{if(!Ri)return;const a=u=>{li&&xa({x:u.clientX-li.x,y:u.clientY-li.y})},s=()=>{Ss(!1),Ni(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s)}},[Ri,li]),tt.useEffect(()=>{ze&&ze.visible&&wl===null?xa({x:window.innerWidth/2,y:window.innerHeight/2}):(!ze||!ze.visible)&&xa(null)},[ze,wl]);const hl=w.useCallback(a=>{switch(a){case"transparency":ye(50);break;case"brushSize":pt(3);break}},[]);tt.useEffect(()=>{if($){bo.current=performance.now(),ye(0);const a=s=>{const u=bo.current||s,d=1e3,g=(s-u)%d/d,y=1-Math.abs(1-2*g);ye(Math.round(y*100)),xo.current=requestAnimationFrame(a)};xo.current=requestAnimationFrame(a)}return()=>{xo.current&&(cancelAnimationFrame(xo.current),xo.current=null)}},[$]),tt.useEffect(()=>{const a=C==="erase"?"erase":C==="magnify"?"magnify":C==="ground"?"ground":C==="power"?"power":C==="component"?"component":C==="draw"?be==="via"?"via":be==="pad"?"pad":"trace":"default";if(a==="default"){Mi(void 0);return}const s=Math.max(1,Ue),u=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(xe*s)),g=u+4*2+(a==="magnify"?8:0),y=document.createElement("canvas");y.width=g,y.height=g;const f=y.getContext("2d");if(!f){Mi(void 0);return}const h=g/2,S=g/2,x=u/2;if(f.clearRect(0,0,g,g),a==="via"){const H=x,le=x*.5,G=x*.7,V=at.get("via")?.settings.color||ct.viaColor||Te;f.fillStyle=V,f.beginPath(),f.arc(h,S,H,0,Math.PI*2),f.arc(h,S,le,0,Math.PI*2),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(h-G,S),f.lineTo(h+G,S),f.stroke(),f.beginPath(),f.moveTo(h,S-G),f.lineTo(h,S+G),f.stroke()}else if(a==="pad"){const le=at.get("pad")?.settings.color||wn||Te,G=x*2,I=G*.5,V=x*.7;f.fillStyle=le,f.beginPath(),f.rect(h-x,S-x,G,G),f.rect(h-I/2,S-I/2,I,I),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(h-V,S),f.lineTo(h+V,S),f.stroke(),f.beginPath(),f.moveTo(h,S-V),f.lineTo(h,S+V),f.stroke()}else if(a==="trace"){const le=at.get("trace")?.settings.color||(Wt==="top"?ht:Me)||Te;f.fillStyle=le,f.beginPath(),f.arc(h,S,x,0,Math.PI*2),f.fill()}else if(a==="erase"){const H=Math.max(xe*.75,8),le=Math.max(xe*.5,6),G=Math.max(xe*.2,2);f.save(),f.translate(h,S),f.rotate(-35*Math.PI/180),f.fillStyle="#f5a3b3",f.strokeStyle="#111",f.lineWidth=1.5;const I=1.5,V=-H/2,U=-le/2;f.beginPath(),f.moveTo(V+I,U),f.lineTo(V+H-I,U),f.quadraticCurveTo(V+H,U,V+H,U+I),f.lineTo(V+H,U+le-I),f.quadraticCurveTo(V+H,U+le,V+H-I,U+le),f.lineTo(V+I,U+le),f.quadraticCurveTo(V,U+le,V,U+le-I),f.lineTo(V,U+I),f.quadraticCurveTo(V,U,V+I,U),f.closePath(),f.fill(),f.stroke(),f.fillStyle="#f18ea4",f.beginPath(),f.rect(-H/2,le/2-G,H,G),f.fill(),f.restore()}else if(a==="magnify"){const H=x;f.strokeStyle="#111",f.lineWidth=2,f.beginPath(),f.arc(h-2,S-2,H,0,Math.PI*2),f.stroke();const le=h+H*.6,G=S+H*.6,I=le+6,V=G+6;f.beginPath(),f.moveTo(le,G),f.lineTo(I,V),f.stroke(),f.beginPath(),f.moveTo(h-6,S-2),f.lineTo(h+2,S-2),f.stroke(),Sa||(f.beginPath(),f.moveTo(h-2,S-6),f.lineTo(h-2,S+2),f.stroke())}else if(a==="ground"){f.strokeStyle="#000000",f.lineWidth=2,f.lineCap="round";const H=x*.8;f.beginPath(),f.arc(h,S,x,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(h,S-x-H),f.lineTo(h,S+x+H),f.stroke(),f.beginPath(),f.moveTo(h-x-H,S),f.lineTo(h+x+H,S),f.stroke()}else if(a==="power"){f.strokeStyle="#ff0000",f.lineWidth=2,f.lineCap="round";const H=x*.8;f.beginPath(),f.arc(h,S,x,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(h,S-x-H),f.lineTo(h,S+x+H),f.stroke(),f.beginPath(),f.moveTo(h-x-H,S),f.lineTo(h+x+H,S),f.stroke()}else if(a==="component"){const H=kl||"top",le=at.get("component"),G=(H==="top"?m:P)||le?.settings.color||Te,I=u,V=I/2;f.strokeStyle=G,f.lineWidth=2,f.fillStyle="rgba(255,255,255,0.9)",f.beginPath(),f.rect(h-V,S-V,I,I),f.fill(),f.stroke();const U=On?ys(On):"?";f.fillStyle=G,f.font=`bold ${Math.max(8,I*.35)}px sans-serif`,f.textAlign="center",f.textBaseline="middle",f.fillText(U,h,S)}const R=`url(${y.toDataURL()}) ${Math.round(h)} ${Math.round(S)}, crosshair`;Mi(R)},[C,be,Te,xe,Ue,Sa,On,ia,St,at,ct,Wt,ht,Me,kl,m,P]),tt.useEffect(()=>{Bn()},[Bn]),tt.useEffect(()=>{Bn()},[aa.width,aa.height]),tt.useEffect(()=>{Ee.size===0&&C==="draw"&&be==="trace"&&xe>=1&&($e==="top"?Jn(xe):Kt(xe))},[xe,C,be,$e,Ee]),tt.useEffect(()=>{wt(a=>a.map(s=>{if(s.type==="via"&&s.points.length>0&&s.points[0].id!==void 0){const u=s.points[0].id,d=Al(u,St);if(s.viaType!==d)return{...s,viaType:d}}else if(s.type==="pad"&&s.points.length>0&&s.points[0].id!==void 0){const u=s.points[0].id,d=Aa(u,St);if(s.padType!==d)return{...s,padType:d}}return s}))},[Ye,yt,St,Al,Aa]);const Ki=w.useCallback(()=>{const a=Xn.current;if(!a)return;const s=a.toDataURL("image/png"),u=window.open("","_blank");if(!u){alert("Please allow popups to print the canvas.");return}u.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${s}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),u.document.close()},[]);tt.useEffect(()=>{const a=u=>{u.key==="Shift"&&qa(!0)},s=u=>{u.key==="Shift"&&qa(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",s)}},[]),tt.useEffect(()=>{const a=s=>{Hi.current&&(Hi.current.contains(s.target)||_e(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),tt.useEffect(()=>{const a=(s,u)=>{const d=s.current;if(!d)return;const g=d.getContext("2d");if(!g)return;const y=d.width,f=d.height;if(g.clearRect(0,0,y,f),g.fillStyle="#fff",g.fillRect(0,0,y,f),u?.bitmap){const h=u.bitmap,S=Math.min(y/h.width,f/h.height),x=Math.max(1,Math.floor(h.width*S)),R=Math.max(1,Math.floor(h.height*S)),H=Math.floor((y-x)/2),le=Math.floor((f-R)/2);g.drawImage(h,H,le,x,R)}g.strokeStyle="#ddd",g.lineWidth=1,g.strokeRect(.5,.5,y-1,f-1)};a(ks,D),a(Ka,b)},[D,b]),tt.useEffect(()=>{const a=[],s=[],u=[],d=[];for(const g of De)if(g.type==="via"&&g.points.length>=1){const y=g.points[0],f={id:g.id,pointId:y.id,x:y.x,y:y.y,size:g.size,color:g.color};a.push(f)}else if(g.type==="pad"&&g.points.length>=1){const y=g.points[0],f={id:g.id,pointId:y.id,x:y.x,y:y.y,size:g.size,color:g.color,layer:g.layer||"top"};s.push(f)}else if(g.type==="trace"&&g.points.length>=2)for(let y=0;y<g.points.length-1;y++){const f=g.points[y],h=g.points[y+1],S={id:g.id,startPointId:f.id,endPointId:h.id,x1:f.x,y1:f.y,x2:h.x,y2:h.y,size:g.size,color:g.color};g.layer==="top"?u.push(S):d.push(S)}gn(a),xc(s),yo(u),vc(d)},[De]);const Nl=w.useRef(De);Nl.current=De;const ra=w.useCallback(()=>{const s=new Date().toISOString(),u=$0();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:s,view:{currentView:he,viewScale:Ue,viewPan:Ie,showBothLayers:gc,selectedDrawingLayer:$e},images:{top:D?{name:D.name,width:D.width,height:D.height,dataUrl:D.dataUrl??D.url,x:D.x,y:D.y,scale:D.scale,rotation:D.rotation,flipX:D.flipX,flipY:D.flipY,skewX:D.skewX,skewY:D.skewY,keystoneV:D.keystoneV,keystoneH:D.keystoneH}:null,bottom:b?{name:b.name,width:b.width,height:b.height,dataUrl:b.dataUrl??b.url,x:b.x,y:b.y,scale:b.scale,rotation:b.rotation,flipX:b.flipX,flipY:b.flipY,skewX:b.skewX,skewY:b.skewY,keystoneV:b.keystoneV,keystoneH:b.keystoneH}:null},drawing:{drawingStrokes:Nl.current.filter(g=>!(g.type==="trace"&&g.points.length<2)),vias:Xa,tracesTop:ma,tracesBottom:bc,componentsTop:Ve,componentsBottom:ot,grounds:yt,powers:Ye},powerBuses:St,pointIdCounter:Pp(),traceColors:{top:ht,bottom:Me},traceSizes:{top:z,bottom:nt},padColors:{top:wn,bottom:Ot},padSizes:{top:se,bottom:J},componentColors:{top:m,bottom:P},componentSizes:{top:Ce,bottom:me},traceToolLayer:Wt,toolSettings:{trace:at.get("trace")?.settings||{color:"#ff0000",size:10},via:at.get("via")?.settings||{color:"#ff0000",size:26},pad:at.get("pad")?.settings||{color:"#ff0000",size:26},component:at.get("component")?.settings||{color:"#ff0000",size:18},ground:at.get("ground")?.settings||{color:"#000000",size:18},power:at.get("power")?.settings||{color:"#ff0000",size:18}},locks:{areImagesLocked:sl,areViasLocked:zn,arePadsLocked:kt,areTracesLocked:en,areComponentsLocked:We,areGroundNodesLocked:Rn,arePowerNodesLocked:Vt},visibility:{showViasLayer:Nn,showTopPadsLayer:za,showBottomPadsLayer:Pa,showTopTracesLayer:$l,showBottomTracesLayer:jl,showTopComponents:oa,showBottomComponents:Ea,showPowerLayer:Wa,showGroundLayer:fl},autoSave:{enabled:rl,interval:Za,baseName:Ta},projectInfo:{name:mn}},timestamp:u}},[he,Ue,Ie,gc,$e,D,b,De,Xa,ma,bc,Ve,ot,yt,at,sl,zn,kt,en,We,Rn,Vt,St,Pp,ht,Me,z,nt,wn,Ot,se,J,m,P,Ce,me,Wt,rl,Za,Ta,mn,Nn,za,Pa,$l,jl,oa,Ea,Wa,fl]),Ys=w.useRef(ra);Ys.current=ra;const _l=w.useRef(wa);_l.current=wa;const al=w.useRef(Ta);al.current=Ta;const Pi=w.useRef(ul);Pi.current=ul;const Oo=w.useRef(Eo);Oo.current=Eo;const Un=w.useRef([]);Un.current=Er;const yl=w.useRef(-1);yl.current=As;const Ol=w.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=_l.current,s=al.current;console.log(`Auto save: dirHandle=${a?"set":"missing"}, baseName=${s||"missing"}`);const u=Oo.current;if(console.log(`Auto save: currentFilePath=${u||"none"}`),!a||!s){console.warn(`Auto save: Missing directory handle (${!a}) or base name (${!s}). Please use File -> Auto Save -> Enable to set up auto save.`),El(!1),Yt.current&&(clearInterval(Yt.current),Yt.current=null);return}if(!ql.current){console.log("Auto save: Skipping - no changes since last save");return}const d=Nl.current,g=d.filter(R=>R.type==="trace"&&R.points.length<2);if(g.length>0){console.log(`Auto save: Cleaning up ${g.length} single-point trace(s) before save`),g.forEach(H=>console.log(`  - Removing single-point trace ${H.id}`));const R=d.filter(H=>!(H.type==="trace"&&H.points.length<2));wt(R),Nl.current=R}console.log("Auto save: Starting save...");const{project:y,timestamp:f}=Ys.current(),h=`${s}_${f}.json`,S=JSON.stringify(y,null,2),x=new Blob([S],{type:"application/json"});try{let R;try{R=await a.getDirectoryHandle("history",{create:!0})}catch(V){console.error("Failed to get/create history directory:",V);return}try{const V=[];for await(const U of a.keys())try{if(U==="history"||U===h)continue;const ne=await(await a.getFileHandle(U)).getFile();if(!U.endsWith(".json"))continue;const k=await ne.text();try{const M=JSON.parse(k);M.version&&(M.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!M.fileType)&&(V.push(U),console.log(`Auto save: Found PCB project file in root: ${U} (${M.fileType?"auto-saved":"manually saved"})`))}catch{continue}}catch{continue}for(const U of V)try{const k=await(await(await a.getFileHandle(U)).getFile()).text(),K=await(await R.getFileHandle(U,{create:!0})).createWritable();await K.write(new Blob([k],{type:"application/json"})),await K.close(),await a.removeEntry(U),console.log(`Auto save: Moved ${U} from root to history/`)}catch(te){console.warn(`Auto save: Failed to move ${U} to history:`,te)}}catch(V){console.warn("Auto save: Error checking for old files in root:",V)}const le=await(await a.getFileHandle(h,{create:!0})).createWritable();await le.write(x),await le.close(),console.log(`Auto save: Successfully saved ${h} to root directory`),Pi.current(h);const G=Un.current,I=[h,...G.filter(V=>V!==h)].sort((V,U)=>U.localeCompare(V));jo(I),Un.current=I,Ms(0),yl.current=0,ql.current=!1}catch(R){console.error("Auto save failed:",R)}},[]),Pl=w.useCallback(async()=>{const{project:a}=ra(),s=JSON.stringify(a,null,2),u=new Blob([s],{type:"application/json"});if(ri&&mn)try{const x="project.json",H=await(await ri.getFileHandle(x,{create:!0})).createWritable();await H.write(u),await H.close(),ul(x),console.log(`Project saved: ${mn}/${x}`);return}catch(x){console.error("Failed to save to project directory:",x),ui(null)}if(mn&&!ri){const x=window;if(typeof x.showDirectoryPicker=="function")try{const R=await x.showDirectoryPicker();ui(R);const H=`${mn}.json`,G=await(await R.getFileHandle(H,{create:!0})).createWritable();await G.write(u),await G.close(),ul(H),console.log(`Project saved: ${H} in selected directory`);return}catch(R){R?.name!=="AbortError"&&console.error("Failed to get directory:",R)}}const d=x=>String(x).padStart(2,"0"),g=new Date,f=`pcb_project_${`${g.getFullYear()}_${d(g.getMonth()+1)}_${d(g.getDate())}_${d(g.getHours())}_${d(g.getMinutes())}_${d(g.getSeconds())}`}.json`,h=window;if(typeof h.showSaveFilePicker=="function")try{const x=await h.showSaveFilePicker({suggestedName:f,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),R=await x.createWritable();await R.write(u),await R.close();const H=x.name;try{const I=await x.getFile();ul(I.name)}catch{ul(H)}const G=H.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");G&&(Pn(G),localStorage.setItem("pcb_project_name",G));try{const I=x.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");zo(I),wa||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(I){console.warn("Could not set up auto save for new file:",I)}return}catch(x){if(x?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",x)}const S=document.createElement("a");S.href=URL.createObjectURL(u),S.download=f,document.body.appendChild(S),S.click(),setTimeout(()=>{URL.revokeObjectURL(S.href),document.body.removeChild(S)},0)},[ra]),ua=w.useCallback(async()=>{const a=[...Ve,...ot],s=q0(a,De,Ye,yt,St),u=new Blob([s],{type:"text/plain"}),g=`${mn||"pcb_project"}.kicad_sch`,y=window;if(typeof y.showSaveFilePicker=="function")try{const h=await y.showSaveFilePicker({suggestedName:g,types:[{description:"KiCad Schematic",accept:{"text/plain":["kicad_sch"]}}]}),S=await h.createWritable();await S.write(u),await S.close(),console.log(`Simple schematic exported: ${h.name}`);return}catch(h){if(h?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",h)}const f=document.createElement("a");f.href=URL.createObjectURL(u),f.download=g,document.body.appendChild(f),f.click(),setTimeout(()=>{URL.revokeObjectURL(f.href),document.body.removeChild(f)},0)},[Ve,ot,De,Ye,yt,St,mn]);tt.useEffect(()=>{Yt.current&&(clearInterval(Yt.current),Yt.current=null);const a=js.current;if(js.current=rl,rl&&Za){const s=Za*60*1e3;wa&&Ta?(console.log(`Auto save: Setting up interval for ${Za} minute(s) (${s}ms)`),a||(ql.current=!0,setTimeout(()=>{Ol()},100)),Yt.current&&(clearInterval(Yt.current),Yt.current=null),Yt.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${ql.current}`),console.log(`  - dirHandle: ${_l.current?"set":"missing"}`),console.log(`  - baseName: ${al.current||"missing"}`),Ol()},s),console.log(`Auto save: Interval set up for ${s}ms (${Za} minutes)`),console.log(`  - Directory handle: ${wa?"set":"missing"}`),console.log(`  - Base name: ${Ta||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!wa}) or base name (${!Ta}). Disabling auto save.`),El(!1),Yt.current&&(clearInterval(Yt.current),Yt.current=null))}else rl||(js.current=!1);return()=>{Yt.current&&(clearInterval(Yt.current),Yt.current=null)}},[rl,Za,wa,Ta]);const eo=w.useRef(!1);tt.useEffect(()=>{if(!rl){eo.current=!1;return}if(eo.current){eo.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}ql.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!D,bottomImage:!!b,drawingStrokesCount:De.length,componentsTopCount:Ve.length,componentsBottomCount:ot.length,powersCount:Ye.length,groundsCount:yt.length,powerBusesCount:St.length,areImagesLocked:sl,areViasLocked:zn,areTracesLocked:en,areComponentsLocked:We,areGroundNodesLocked:Rn,arePowerNodesLocked:Vt})},[D,b,De,Ve,ot,Ye,yt,St,ht,Me,z,nt,sl,zn,en,We,Rn,Vt,rl]),tt.useEffect(()=>{rl?(eo.current=!0,console.log("Auto save: Enabled, marking first run")):eo.current=!1},[rl]),tt.useEffect(()=>{rl||(ql.current=!1)},[rl]);const Xs=w.useCallback(()=>!!(D||b||De.length>0||Ve.length>0||ot.length>0||Ye.length>0||yt.length>0),[D,b,De,Ve,ot,Ye,yt]);tt.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&Pn(a)},[]);const Wl=w.useCallback(()=>{si({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Wi=w.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const s=await a.showDirectoryPicker();si(u=>({...u,locationHandle:s,locationPath:s.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",s.name||"")}catch(s){s?.name!=="AbortError"&&(console.error("Failed to get directory:",s),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),Ra=w.useCallback(async()=>{const a=Gt.projectName.trim();if(!a){alert("Please enter a project name.");return}const s=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!Gt.locationHandle){alert("Please select a location for the project.");return}const u=Gt.locationHandle;let d;try{d=await u.getDirectoryHandle(s,{create:!0})}catch(g){console.error("Failed to create project folder:",g),alert(`Failed to create project folder "${s}". See console for details.`);return}si({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Pn(s),ui(d),localStorage.setItem("pcb_project_name",s),localStorage.setItem("pcb_project_location_path",u.name||""),oe(null),ie(null),wt([]),At([]),En([]),Vn([]),_n([]),fn(new Set),ln(new Set),un(new Set),an(new Set),pe("overlay"),Vl(1),el({x:0,y:0}),ql.current=!1,ul(""),El(!1),Qa(null),Li(null),zo(""),Yt.current&&(clearInterval(Yt.current),Yt.current=null),Je();try{const{project:g}=ra(),y="project.json",f=JSON.stringify(g,null,2),h=new Blob([f],{type:"application/json"}),x=await(await d.getFileHandle(y,{create:!0})).createWritable();await x.write(h),await x.close(),ul(y),console.log(`New project created: ${s}/project.json`),wo({visible:!0,source:"new"})}catch(g){console.error("Failed to save new project:",g),alert("Failed to save new project file. See console for details.")}},[Je,ra,Gt]),dn=w.useCallback(()=>{si({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Fi=w.useCallback(()=>{const a=mn?`${mn}.json`:"";ci({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(Ui.current?.focus(),Ui.current&&a){const s=a.replace(/\.json$/i,"");Ui.current.setSelectionRange(0,s.length)}},100)},[mn]),Rc=w.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const s=await a.showDirectoryPicker();ci(u=>({...u,locationHandle:s,locationPath:s.name||"Selected folder"}))}catch(s){s?.name!=="AbortError"&&(console.error("Failed to get directory:",s),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),Nc=w.useCallback(async()=>{const a=It.filename.trim();if(!a){alert("Please enter a file name.");return}const u=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!It.locationHandle){alert("Please select a location for the file.");return}const d=It.locationHandle;try{const{project:g}=ra(),y=JSON.stringify(g,null,2),f=new Blob([y],{type:"application/json"}),S=await(await d.getFileHandle(u,{create:!0})).createWritable();await S.write(f),await S.close(),ul(u);const x=u.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");x&&(Pn(x),localStorage.setItem("pcb_project_name",x)),ui(d),ci({visible:!1,filename:"",locationPath:"",locationHandle:null}),_e(null),console.log(`Project saved as: ${u} in selected directory`)}catch(g){console.error("Failed to save project:",g),alert(`Failed to save project file "${u}". See console for details.`)}},[It,ra]),Vs=w.useCallback(()=>{ci({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),Gs=w.useCallback(async()=>{ii({visible:!1}),await Pl(),Wl(),Wn()},[Pl,Wl,Wn]),on=w.useCallback(()=>{ii({visible:!1}),Wl(),Wn()},[Wl,Wn]),Ji=w.useCallback(()=>{ii({visible:!1})},[]);tt.useEffect(()=>{if(Es.visible){setTimeout(()=>{Sc.current?.focus()},0);const a=s=>{s.key==="Enter"?(s.preventDefault(),Gs()):s.key==="Escape"&&(s.preventDefault(),ii({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[Es.visible,Gs]);const Na=w.useCallback(async a=>{try{if(a.projectInfo)a.projectInfo.name&&(Pn(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const y=localStorage.getItem("pcb_project_name");y&&Pn(y)}if(a.view&&(a.view.currentView&&pe(a.view.currentView),a.view.viewScale!=null&&Vl(a.view.viewScale),a.view.viewPan&&el(a.view.viewPan),a.view.showBothLayers!=null&&Tr(a.view.showBothLayers),a.view.selectedDrawingLayer&&Bt(a.view.selectedDrawingLayer)),a.traceColors&&(a.traceColors.top&&($t(a.traceColors.top),Se("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(_t(a.traceColors.bottom),Se("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const y=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let f=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;f<6&&(f=6),Jn(y),Kt(f),ae("trace",y,"top"),ae("trace",f,"bottom")}else Jn(6),Kt(6);if(a.padColors&&(a.padColors.top&&(Pt(a.padColors.top),Se("pad",a.padColors.top,"top")),a.padColors.bottom&&(Z(a.padColors.bottom),Se("pad",a.padColors.bottom,"bottom"))),a.padSizes){const y=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:26,f=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:26;O(y),re(f),ae("pad",y,"top"),ae("pad",f,"bottom")}if(a.componentColors&&(a.componentColors.top&&(j(a.componentColors.top),Se("component",a.componentColors.top,"top")),a.componentColors.bottom&&(ue(a.componentColors.bottom),Se("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const y=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,f=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;Ne(y),Xe(f),ae("component",y,"top"),ae("component",f,"bottom")}if(a.traceToolLayer&&(Zl(a.traceToolLayer),C==="draw"&&be==="trace")){const y=a.traceToolLayer;dt(y==="top"?a.traceColors?.top||ht:a.traceColors?.bottom||Me);const f=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let h=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;h<6&&(h=6),pt(y==="top"?f:h)}a.toolSettings&&nn(y=>{const f=new Map(y);if(a.toolSettings.trace){const S=f.get("trace");S&&f.set("trace",{...S,settings:a.toolSettings.trace})}if(a.toolSettings.via){const S=f.get("via");S&&f.set("via",{...S,settings:a.toolSettings.via})}if(a.toolSettings.pad){const S=f.get("pad");S&&f.set("pad",{...S,settings:a.toolSettings.pad})}if(a.toolSettings.component){const S=f.get("component");S&&f.set("component",{...S,settings:a.toolSettings.component})}if(a.toolSettings.ground){const S=f.get("ground");S&&f.set("ground",{...S,settings:a.toolSettings.ground})}if(a.toolSettings.power){const S=f.get("power");S&&f.set("power",{...S,settings:a.toolSettings.power})}const h=C==="draw"&&be==="trace"?f.get("trace"):C==="draw"&&be==="via"?f.get("via"):C==="draw"&&be==="pad"?f.get("pad"):C==="component"?f.get("component"):C==="power"?f.get("power"):C==="ground"?f.get("ground"):null;return h&&(dt(h.settings.color),pt(h.settings.size)),f});const s=async y=>{if(!y)return null;let f=null;if(y.dataUrl){const h=await(await fetch(y.dataUrl)).blob();f=await createImageBitmap(h)}return{url:y.dataUrl??"",name:y.name??"image",width:y.width??(f?f.width:0),height:y.height??(f?f.height:0),dataUrl:y.dataUrl,x:y.x??0,y:y.y??0,scale:y.scale??1,rotation:y.rotation??0,flipX:!!y.flipX,flipY:!!y.flipY,skewX:y.skewX??0,skewY:y.skewY??0,keystoneV:y.keystoneV??0,keystoneH:y.keystoneH??0,bitmap:f}},u=await s(a.images?.top),d=await s(a.images?.bottom);if(oe(u),ie(d),a.pointIdCounter&&typeof a.pointIdCounter=="number"&&Kp(a.pointIdCounter),a.locks&&(typeof a.locks.areImagesLocked=="boolean"?ei(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&ei(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&Gl(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&Yn(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&ti(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&vs(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?ya(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&ya(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&ga(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&Mo(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&Xi(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&Rs(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&pi(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&Ds(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&Ns(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&_s(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&Tc(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Gi(a.visibility.showGroundLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&El(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&Qa(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(zo(a.autoSave.baseName),al.current=a.autoSave.baseName,a.autoSave.enabled&&!wa&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),El(!1),Qa(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),El(!1),Qa(null),zo(""),al.current="")):(El(!1),Qa(null),Li(null),zo(""),_l.current=null,al.current="",Yt.current&&(clearInterval(Yt.current),Yt.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const y=a.drawing.drawingStrokes.map(f=>({...f,points:f.points.map(h=>({...h,...Qt(h)}))})).filter(f=>!(f.type==="trace"&&f.points.length<2));wt(y)}else{const y=[],f=(x,R)=>{const H=Qt({x:x.x,y:x.y});y.push({id:x.id||`${Date.now()}-via-${Math.random()}`,points:[{id:x.pointId||Yl(),x:H.x,y:H.y}],color:x.color,size:x.size,layer:R,type:"via"})},h=(x,R)=>{const H=Qt({x:x.x1,y:x.y1}),le=Qt({x:x.x2,y:x.y2});y.push({id:x.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:x.startPointId||Yl(),x:H.x,y:H.y},{id:x.endPointId||Yl(),x:le.x,y:le.y}],color:x.color,size:x.size,layer:R,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(x=>f(x,"top")):((a.drawing?.viasTop??[]).forEach(x=>f(x,"top")),(a.drawing?.viasBottom??[]).forEach(x=>f(x,"bottom"))),(a.drawing?.tracesTop??[]).forEach(x=>h(x,"top")),(a.drawing?.tracesBottom??[]).forEach(x=>h(x,"bottom"));const S=y.filter(x=>!(x.type==="trace"&&x.points.length<2));wt(S)}if(a.drawing?.componentsTop){const y=a.drawing.componentsTop.map(f=>{const h=Qt({x:f.x,y:f.y});return{...f,x:h.x,y:h.y,layer:f.layer||"top",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});At(y)}if(a.drawing?.componentsBottom){const y=a.drawing.componentsBottom.map(f=>{const h=Qt({x:f.x,y:f.y});return{...f,x:h.x,y:h.y,layer:f.layer||"bottom",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});En(y)}if(a.drawing?.grounds){const f=a.drawing.grounds.map(h=>{const S=h.pointId||Yl(),x=Qt({x:h.x,y:h.y});return{...h,pointId:S,x:x.x,y:x.y}}).filter(h=>{const S=h.y>=0&&h.x>=0&&typeof h.x=="number"&&typeof h.y=="number"&&!isNaN(h.x)&&!isNaN(h.y)&&isFinite(h.x)&&isFinite(h.y);return S||console.warn(`Filtered out invalid ground symbol at (${h.x}, ${h.y}) - likely in border area or invalid coordinates`),S});_n(f)}let g=St;if(a.powerBuses&&Array.isArray(a.powerBuses)&&(g=a.powerBuses,ja(g)),a.drawing?.powers){const f=a.drawing.powers.map(h=>{const S=h.pointId||Yl(),x=Qt({x:h.x,y:h.y});return h.powerBusId?{...h,pointId:S,x:x.x,y:x.y,layer:h.layer||"top"}:{...h,pointId:S,x:x.x,y:x.y,powerBusId:g.length>0?g[0].id:"default-5v",layer:h.layer||"top"}}).filter(h=>{const S=h.y>=0&&h.x>=0&&typeof h.x=="number"&&typeof h.y=="number"&&!isNaN(h.x)&&!isNaN(h.y)&&isFinite(h.x)&&isFinite(h.y);return S||console.warn(`Filtered out invalid power node at (${h.x}, ${h.y}) - likely in border area or invalid coordinates`),S});Vn(f)}ql.current=!1}catch(s){console.error("Failed to open project",s),alert("Failed to open project file. See console for details.")}},[C,be]),Fl=w.useCallback(async()=>{},[Eo]),Bo=w.useCallback(async a=>{const s=_l.current;if(!s){console.warn("Cannot load file: no directory handle");return}try{const d=await(await s.getFileHandle(a)).getFile();if(d.size===0){console.warn(`File ${a} is empty, skipping`);const x=Un.current.filter(R=>R!==a);jo(x),Un.current=x;return}const g=await d.text();if(!g||g.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const x=Un.current.filter(R=>R!==a);jo(x),Un.current=x;return}let y;try{y=JSON.parse(g)}catch(S){console.error(`Failed to parse JSON from file ${a}:`,S);const R=Un.current.filter(H=>H!==a);jo(R),Un.current=R,await Fl();return}Je(),Vl(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),fn(new Set),ln(new Set),un(new Set),an(new Set),Wn(),await Na(y),ul(a);const h=Un.current.indexOf(a);h>=0?(Ms(h),yl.current=h):await Fl(),ql.current=!1}catch(u){console.error("Failed to load file from history:",u);const d=Un.current;if(d.includes(a)){const g=d.filter(y=>y!==a);jo(g),Un.current=g,await Fl()}}},[Na,Fl,Wn]);w.useCallback(async()=>{const a=yl.current,s=Un.current;if(a>=0&&a<s.length-1){const u=a+1,d=s[u];d&&await Bo(d)}},[Bo]),w.useCallback(async()=>{const a=yl.current,s=Un.current;if(a<=0||a>=s.length||s.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",s.length);return}if(a>0&&a<s.length&&s.length>0){const u=a-1;if(u>=0&&u<s.length){const d=s[u];d?await Bo(d):(console.warn("No newer file found at index",u),await Fl())}else console.warn("Cannot navigate to newer file: prevIndex",u,"is out of bounds")}},[Bo,Fl]),tt.useEffect(()=>{ni.current=Mt},[Mt]);const _a=tt.useRef(be),Oa=tt.useRef($e);tt.useEffect(()=>{const a=be!==_a.current;if(C==="draw"&&_a.current==="trace"&&a){if(ni.current.length>=2){const s={id:`${Date.now()}-trace-autofinalize`,points:ni.current,color:Te,size:xe,layer:Oa.current,type:"trace"};wt(u=>[...u,s]),Oa.current==="top"?Cl(u=>[...u,s.id]):Il(u=>[...u,s.id])}Hn([]),po(!1)}_a.current=be,Oa.current=$e},[be,$e,C,Te,xe]);const jr=tt.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);tt.useEffect(()=>{Bn()},[De]),tt.useEffect(()=>{Bn()},[Ve,ot,yt,fl]),tt.useEffect(()=>{const a=mo.current,s=Tl.current;if(Zn.current=!0,a){const u=Math.max(0,a.scrollWidth-a.clientWidth),d=vo.current,g=Math.max(0,Math.min(u,-(Ie.x+d)));Math.abs(a.scrollLeft-g)>.5&&(a.scrollLeft=g)}if(s){const u=Math.max(0,s.scrollHeight-s.clientHeight),d=ba.current,g=Math.max(0,Math.min(u,-(Ie.y+d)));Math.abs(s.scrollTop-g)>.5&&(s.scrollTop=g)}requestAnimationFrame(()=>{Zn.current=!1})},[Ie.x,Ie.y]);const ce=As>0;return c.jsxs("div",{className:"app",children:[c.jsx("header",{className:"app-header",children:c.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.0)"})}),c.jsxs("div",{ref:Hi,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:a=>{a.stopPropagation(),_e(s=>s==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:Kn==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),Kn==="file"&&c.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[c.jsx("button",{onClick:()=>{ce||(_e(null),Xs()?ii({visible:!0}):Wl())},disabled:ce,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ce?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ce?"not-allowed":"pointer"},children:"New Project"}),c.jsx("button",{onClick:async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[s]=await a.showOpenFilePicker({multiple:!1}),u=await s.getFile();if(!u.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file."),_e(null);return}ul(u.name);const d=await u.text(),g=JSON.parse(d);await Na(g);let y;g.projectInfo?.name?y=g.projectInfo.name:(y=u.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Pn(y),localStorage.setItem("pcb_project_name",y)),mn||(Pn(y),localStorage.setItem("pcb_project_name",y)),setTimeout(()=>{g.autoSave?.enabled===!0||wo({visible:!0,source:"open"})},100),_e(null);return}catch(s){if(s?.name==="AbortError"){_e(null);return}console.warn("showOpenFilePicker failed, falling back to input",s)}Cs.current?.click(),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{ce||(Pl(),_e(null))},disabled:ce,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ce?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ce?"not-allowed":"pointer"},children:"Save Project"}),c.jsx("button",{onClick:()=>{ce||(Fi(),_e(null))},disabled:ce,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ce?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ce?"not-allowed":"pointer"},children:"Save As"}),c.jsx("button",{onClick:()=>{ce||(cl({visible:!0,interval:5}),_e(null))},disabled:ce,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ce?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ce?"not-allowed":"pointer"},children:"Auto Save"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{ce||(ua(),_e(null))},disabled:ce,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ce?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ce?"not-allowed":"pointer"},children:"Export Simple Schematic"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{Ki(),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),c.jsx("button",{onClick:()=>{Ki(),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:a=>{ce||(a.stopPropagation(),_e(s=>s==="transform"?null:"transform"))},disabled:ce,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:Kn==="transform"?"#eef3ff":"#fff",fontWeight:600,color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:"Images "}),Kn==="transform"&&c.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[c.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),c.jsx("button",{onClick:()=>{ce||(Va.current?.click(),_e(null))},disabled:ce,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ce?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ce?"not-allowed":"pointer"},children:"Load Top PCB"}),c.jsx("button",{onClick:()=>{ce||(Ga.current?.click(),_e(null))},disabled:ce,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:ce?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:ce?"not-allowed":"pointer"},children:"Load Bottom PCB"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),c.jsxs("button",{disabled:!D,onClick:()=>{zi("top"),fe("transform"),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:D?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ge==="top"?" ":"","Top Image"]}),c.jsxs("button",{disabled:!b,onClick:()=>{zi("bottom"),fe("transform"),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ge==="bottom"?" ":"","Bottom Image"]}),c.jsxs("button",{disabled:!D||!b,onClick:()=>{zi("both"),fe("transform"),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:D&&b?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ge==="both"?" ":"","Both Images"]}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{if(Ge)if(Ge==="both"){const a=!D?.flipX;Gn("both",{flipX:a})}else{const a=Ge==="top"?D?.flipX||!1:b?.flipX||!1;Gn(Ge,{flipX:!a})}_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Horizontal Flip"}),c.jsx("button",{onClick:()=>{if(Ge)if(Ge==="both"){const a=!D?.flipY;Gn("both",{flipY:a})}else{const a=Ge==="top"?D?.flipY||!1:b?.flipY||!1;Gn(Ge,{flipY:!a})}_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Vertical Flip"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsxs("button",{onClick:()=>{ha("nudge"),fe("transform"),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[il==="nudge"?" ":"","Mode: Nudge"]}),c.jsxs("button",{onClick:()=>{ha("scale"),fe("transform"),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[il==="scale"?" ":"","Mode: Scale"]}),c.jsxs("button",{onClick:()=>{ha("rotate"),fe("transform"),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[il==="rotate"?" ":"","Mode: Rotate"]}),c.jsxs("button",{onClick:()=>{ha("slant"),fe("transform"),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[il==="slant"?" ":"","Mode: Slant"]}),c.jsxs("button",{onClick:()=>{ha("keystone"),fe("transform"),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[il==="keystone"?" ":"","Mode: Keystone"]}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{fe("transform"),Wo||ta?(Ai(!1),gs(!1),Dn(!1)):Ai(!0),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:Wo||ta?"Color Mode":"Grayscale Mode"}),c.jsx("button",{onClick:()=>{fe("transform"),ta?Dn(a=>!a):(gs(!0),Dn(!1)),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:ta?"Invert Edges":"Black & White Edges"}),c.jsx("button",{onClick:()=>{fe("transform"),Kl(),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Reset Transform"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsxs("button",{onClick:()=>{ei(a=>!a),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Images ",sl?"":""]})]})]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:a=>{ce||(a.stopPropagation(),_e(s=>s==="tools"?null:"tools"))},disabled:ce,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:Kn==="tools"?"#eef3ff":"#fff",fontWeight:600,color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:"Tools "}),Kn==="tools"&&c.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[c.jsx("button",{onClick:()=>{Rl(),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),c.jsx("button",{onClick:()=>{Zi(),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{let a=xe;if(Ee.size>0){const s=De.filter(u=>Ee.has(u.id));s.length>0&&(a=s[0].size)}else if(qe.size>0){const s=[...Ve,...ot].find(u=>qe.has(u.id));s&&(a=s.size||18)}else if(Fe.size>0){const s=Ye.find(u=>Fe.has(u.id));s&&(a=s.size)}else if(He.size>0){const s=yt.find(u=>He.has(u.id));s&&(a=s.size||18)}Ca({visible:!0,size:a}),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Set Size"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsxs("button",{onClick:()=>{Gl(a=>!a),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Vias ",zn?"":""]}),c.jsxs("button",{onClick:()=>{Yn(a=>!a),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Pads ",kt?"":""]}),c.jsxs("button",{onClick:()=>{ti(a=>!a),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Traces ",en?"":""]}),c.jsxs("button",{onClick:()=>{vs(a=>!a),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Components ",We?"":""]}),c.jsxs("button",{onClick:()=>{ya(a=>!a),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Ground Node ",Rn?"":""]}),c.jsxs("button",{onClick:()=>{ga(a=>!a),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Power Nodes ",Vt?"":""]}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{Vi(!0),_e(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),c.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),c.jsx("button",{onClick:()=>{const a=De.filter(s=>s.type==="via").map(s=>s.id);fn(new Set(a)),ln(new Set),un(new Set),an(new Set),fe("select"),setTimeout(()=>_e(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all vias"}),c.jsx("button",{onClick:()=>{const a=De.filter(s=>s.type==="pad"&&s.layer==="top").map(s=>s.id);fn(new Set(a)),ln(new Set),un(new Set),an(new Set),fe("select"),setTimeout(()=>_e(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Pads (Top)"}),c.jsx("button",{onClick:()=>{const a=De.filter(s=>s.type==="pad"&&s.layer==="bottom").map(s=>s.id);fn(new Set(a)),ln(new Set),un(new Set),an(new Set),fe("select"),setTimeout(()=>_e(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Pads (Bottom)"}),c.jsx("button",{onClick:()=>{const a=De.filter(s=>s.type==="trace"&&s.layer==="top").map(s=>s.id);fn(new Set(a)),ln(new Set),un(new Set),an(new Set),fe("select"),setTimeout(()=>_e(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Traces (top)"}),c.jsx("button",{onClick:()=>{const a=De.filter(s=>s.type==="trace"&&s.layer==="bottom").map(s=>s.id);fn(new Set(a)),ln(new Set),un(new Set),an(new Set),fe("select"),setTimeout(()=>_e(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Traces (bottom)"}),c.jsx("button",{onClick:()=>{const a=Ve.map(s=>s.id);ln(new Set(a)),fn(new Set),un(new Set),an(new Set),fe("select"),setTimeout(()=>_e(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Components (top)"}),c.jsx("button",{onClick:()=>{const a=ot.map(s=>s.id);ln(new Set(a)),fn(new Set),un(new Set),an(new Set),fe("select"),setTimeout(()=>_e(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Components (bottom)"})]})]}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:a=>{a.stopPropagation(),_e(s=>s==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:Kn==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),Kn==="about"&&c.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:400,maxWidth:600,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:16,overflowY:"auto",zIndex:100},children:[c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h2",{style:{margin:"0 0 12px 0",color:"#000",fontSize:"18px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),c.jsx("p",{style:{margin:"0 0 16px 0",color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images."})]}),c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Purpose"}),c.jsx("p",{style:{margin:0,color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:"This tool helps engineers and hobbyists document PCB layouts by allowing you to overlay traces, vias, pads, components, and power/ground connections on top of PCB images. The tool generates netlists and schematics that can be exported to KiCad and other EDA tools."})]}),c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Features"}),c.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"#ddd",fontSize:"14px",lineHeight:"1.8"},children:[c.jsxs("li",{children:["Support for ",c.jsx("strong",{style:{color:"#fff"},children:"Typical 4-Layer PCBs"})," (Top, Bottom, Ground Plane, Power Plane)"]}),c.jsx("li",{children:"Layer-specific drawing tools (Traces, Pads, Components) for Top and Bottom layers"}),c.jsx("li",{children:"Via placement with automatic type detection (Signal, Power, Ground)"}),c.jsx("li",{children:"Component placement with 24+ component types and pin connection management"}),c.jsx("li",{children:"Power and Ground node placement with bus management"}),c.jsx("li",{children:"Netlist generation and export (KiCad, Protel formats)"}),c.jsx("li",{children:"Simple schematic export"}),c.jsx("li",{children:"Project save/load with auto-save functionality"}),c.jsx("li",{children:"Layer visibility controls and locking mechanisms"})]})]}),c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Limitations"}),c.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"#ddd",fontSize:"14px",lineHeight:"1.8"},children:[c.jsxs("li",{children:["Currently supports ",c.jsx("strong",{style:{color:"#fff"},children:"through-hole vias only"})," (blind and buried vias not yet supported)"]}),c.jsx("li",{children:"Designed for 4-layer PCBs (can be adapted for 2-layer with some limitations)"}),c.jsx("li",{children:"Manual tracing required (no automatic trace detection from images)"}),c.jsx("li",{children:"Component library limited to standard through-hole and SMD types"})]})]}),c.jsxs("div",{style:{marginBottom:16},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"4-Layer PCB Support"}),c.jsx("p",{style:{margin:"0 0 8px 0",color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:"The tool is optimized for the most common 4-layer PCB stackup:"}),c.jsxs("ul",{style:{margin:"0 0 8px 0",paddingLeft:20,color:"#ddd",fontSize:"14px",lineHeight:"1.8"},children:[c.jsxs("li",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Layer 1 (Top):"})," Signal layer"]}),c.jsxs("li",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Layer 2 (Inner):"})," Ground plane"]}),c.jsxs("li",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Layer 3 (Inner):"})," Power plane"]}),c.jsxs("li",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Layer 4 (Bottom):"})," Signal layer"]})]}),c.jsxs("p",{style:{margin:0,color:"#ddd",fontSize:"14px",lineHeight:"1.6"},children:["Vias automatically connect Top and Bottom layers. See the ",c.jsx("strong",{style:{color:"#fff"},children:"ABOUT_VIAS.md"})," file in the project for detailed information about via types and usage in 4-layer PCBs."]})]}),c.jsxs("div",{style:{marginBottom:0},children:[c.jsx("h3",{style:{margin:"0 0 8px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Keyboard Shortcuts"}),c.jsxs("div",{style:{color:"#ddd",fontSize:"13px",lineHeight:"1.8",fontFamily:"monospace"},children:[c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"S"})," - Select tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"V"})," - Via tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"D"})," - Pad tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"T"})," - Trace tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"C"})," - Component tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"P"})," - Power tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"G"})," - Ground tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"E"})," - Erase tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"H"})," - Pan/Move tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Z"})," - Zoom tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Esc"})," - Return to Select tool"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Option/Alt"})," - Disable snap-to while drawing"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"+/-"})," - Increase/Decrease size"]}),c.jsxs("div",{children:[c.jsx("strong",{style:{color:"#fff"},children:"Cmd/Ctrl+I"})," - Detailed Information"]})]})]})]})]}),Eo&&c.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:c.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:Eo,children:Eo})})]}),c.jsxs("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:[c.jsxs("div",{ref:Ia,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[c.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:44,display:"flex",flexDirection:"column",gap:8,padding:"6px 6px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[c.jsx("button",{onClick:()=>{ce||fe("select")},onMouseDown:a=>a.currentTarget.blur(),disabled:ce,title:"Select (S)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="select"?"2px solid #000":"1px solid #ddd",background:C==="select"?"#e6f0ff":"#fff",color:ce?"#999":"#222",outline:"none",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsx(_0,{size:16})}),c.jsx("button",{onClick:()=>{ce||(ho("via"),fe("draw"))},disabled:ce,title:"Draw Vias (V)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="draw"&&be==="via"?"2px solid #000":"1px solid #ddd",background:C==="draw"&&be==="via"?"#e6f0ff":"#fff",color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const s=at.get("via")?.settings.color||ct.viaColor||Te;return c.jsxs(c.Fragment,{children:[c.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:s,strokeWidth:"3"}),c.jsx("circle",{cx:"12",cy:"12",r:"4",fill:s})]})})()})}),c.jsx("button",{onClick:()=>{ce||(ho("pad"),fe("draw"),Bt(Ml||"top"),Do(!0))},disabled:ce,title:"Draw Pads (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="draw"&&be==="pad"?"2px solid #000":"1px solid #ddd",background:C==="draw"&&be==="pad"?"#e6f0ff":"#fff",color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const a=at.get("pad"),s=a?.settings.size||se||26,u=a?.settings.color||wn||Te,d=Math.min(14,Math.max(4,s/26*14)),g=(24-d)/2,y=(24-d)/2;return c.jsx("rect",{x:g,y,width:d,height:d,fill:u})})()})}),c.jsx("button",{onClick:()=>{ce||(ho("trace"),fe("draw"),Bt(Wt||"top"),Fa(!0))},disabled:ce,title:"Draw Traces (T)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="draw"&&be==="trace"?"2px solid #000":"1px solid #ddd",background:C==="draw"&&be==="trace"?"#e6f0ff":"#fff",color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsx(B0,{size:16,color:at.get("trace")?.settings.color||(Wt==="top"?ht:Me)||th})}),c.jsx("button",{onClick:()=>{ce||(fe("component"),An(!0),xn(!1),yi(null))},disabled:ce,title:"Draw Component (C)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="component"?"2px solid #000":"1px solid #ddd",background:C==="component"?"#e6f0ff":"#fff",color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:(()=>{const a=kl||"top",s=at.get("component"),u=(a==="top"?m:P)||s?.settings.color||nh;return On?c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[c.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:u,strokeWidth:"1.5"}),c.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:u,fontWeight:"bold",fontFamily:"monospace",children:ys(On)})]}):c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[c.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:u,stroke:u,strokeWidth:"0.5"}),c.jsxs("g",{stroke:u,fill:"none",strokeWidth:"1.5",children:[c.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),c.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:u})]})]})})()}),c.jsx("button",{onClick:()=>{ce||fe("power")},disabled:ce,title:"Draw Power (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="power"?"2px solid #000":"1px solid #ddd",background:C==="power"?"#e6f0ff":"#fff",color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsx("span",{style:{color:at.get("power")?.settings.color||wr,fontSize:"18px",fontWeight:"bold",lineHeight:1},children:"V"})}),c.jsx("button",{onClick:()=>{ce||fe("ground")},disabled:ce,title:"Draw Ground (G)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="ground"?"2px solid #000":"1px solid #ddd",background:C==="ground"?"#e6f0ff":"#fff",color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible"},children:c.jsxs("g",{stroke:at.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[c.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),c.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),c.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),c.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})})}),c.jsx("button",{onClick:()=>{ce||fe("erase")},disabled:ce,title:"Erase (E)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="erase"?"2px solid #000":"1px solid #ddd",background:C==="erase"?"#ffecec":"#fff",color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsxs("g",{transform:"rotate(-35 12 12)",children:[c.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),c.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})})}),c.jsx("button",{onClick:()=>{ce||fe(a=>a==="pan"?"draw":"pan")},disabled:ce,title:"Move (H)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="pan"?"2px solid #000":"1px solid #ddd",background:C==="pan"?"#e6f0ff":"#fff",color:ce?"#999":"#222",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:c.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),c.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),c.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})})}),c.jsx("button",{onClick:()=>{qa(!1),fe(a=>a==="magnify"?"draw":"magnify")},title:`${Sa?"Zoom Out":"Zoom In"} (Z)`,style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:C==="magnify"?"2px solid #000":"1px solid #ddd",background:C==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[c.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),c.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),Sa?c.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),c.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]})}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:()=>{ce||Tn(a=>!a)},disabled:ce,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:ce?"not-allowed":"pointer",opacity:ce?.5:1},children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",children:[c.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),c.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),lt&&c.jsx("div",{ref:wc,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:jr.map(a=>c.jsx("div",{onClick:()=>{dt(a),Tn(!1),Jo(at),Se("brush",a),C==="draw"&&be==="trace"?$e==="top"?($t(a),Se("trace",a,"top")):(_t(a),Se("trace",a,"bottom")):C==="draw"&&be==="via"?Se("via",a):C==="draw"&&be==="pad"?Se("pad",a):C==="component"&&Se("component",a),Ee.size>0&&wt(s=>s.map(u=>Ee.has(u.id)?(u.type==="via"?(Se("via",a),nn(d=>{const g=new Map(d),y=g.get("via");return y&&g.set("via",{...y,settings:{...y.settings,color:a}}),g})):u.type==="pad"?(Se("pad",a),nn(d=>{const g=new Map(d),y=g.get("pad");return y&&g.set("pad",{...y,settings:{...y.settings,color:a}}),g})):u.type==="trace"&&Se("trace",a,u.layer),{...u,color:a}):u)),qe.size>0&&(Se("component",a),At(s=>s.map(u=>qe.has(u.id)?{...u,color:a}:u)),En(s=>s.map(u=>qe.has(u.id)?{...u,color:a}:u))),Fe.size>0&&Vn(s=>s.map(u=>Fe.has(u.id)?{...u,color:a}:u)),He.size>0&&_n(s=>s.map(u=>He.has(u.id)?{...u,color:a}:u))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===Te?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),C==="draw"&&be==="trace"&&Ii&&c.jsxs("div",{ref:Bs,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[c.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[c.jsx("input",{type:"radio",name:"traceToolLayer",checked:Wt==="top",onChange:()=>{Zl("top"),Bt("top"),dt(ht),pt(z),nn(a=>{const s=new Map(a),u=s.get("trace");return u&&s.set("trace",{...u,settings:{color:ht,size:z}}),s}),Fa(!1),fi(!0)}}),c.jsx("span",{children:"Top"})]}),c.jsxs("label",{className:"radio-label",children:[c.jsx("input",{type:"radio",name:"traceToolLayer",checked:Wt==="bottom",onChange:()=>{Zl("bottom"),Bt("bottom"),dt(Me),pt(nt),nn(a=>{const s=new Map(a),u=s.get("trace");return u&&s.set("trace",{...u,settings:{color:Me,size:nt}}),s}),Fa(!1),Ao(!0)}}),c.jsx("span",{children:"Bottom"})]})]}),C==="draw"&&be==="pad"&&jc&&c.jsxs("div",{ref:Ac,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[c.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[c.jsx("input",{type:"radio",name:"padToolLayer",checked:Ml==="top",onChange:()=>{Ec("top"),Bt("top"),dt(wn),pt(se),nn(a=>{const s=new Map(a),u=s.get("pad");return u&&s.set("pad",{...u,settings:{color:wn,size:se}}),s}),Do(!1),fi(!0)}}),c.jsx("span",{children:"Top"})]}),c.jsxs("label",{className:"radio-label",children:[c.jsx("input",{type:"radio",name:"padToolLayer",checked:Ml==="bottom",onChange:()=>{Ec("bottom"),Bt("bottom"),dt(Ot),pt(J),nn(a=>{const s=new Map(a),u=s.get("pad");return u&&s.set("pad",{...u,settings:{color:Ot,size:J}}),s}),Do(!1),Ao(!0)}}),c.jsx("span",{children:"Bottom"})]})]}),Os&&C==="power"&&c.jsxs("div",{style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,minWidth:"200px"},children:[c.jsx("div",{style:{marginBottom:"6px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),St.length===0?c.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...St].sort((a,s)=>{const u=y=>{const f=y.match(/([+-]?)(\d+\.?\d*)/);if(f){const h=f[1]||"+",S=parseFloat(f[2]);return{absValue:Math.abs(S),isNegative:h==="-",original:y}}return{absValue:1/0,isNegative:!1,original:y}},d=u(a.voltage),g=u(s.voltage);return d.absValue!==g.absValue?d.absValue-g.absValue:d.isNegative!==g.isNegative?d.isNegative?-1:1:0}).map(a=>c.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),ko(a.id),hi(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",marginBottom:"4px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),c.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),c.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),hi(!1),ko(null),fe("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),C==="component"&&No&&c.jsxs("div",{ref:Ja,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[c.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[c.jsx("input",{type:"radio",name:"componentToolLayer",checked:$e==="top",onClick:()=>{Ma("top"),Bt("top"),dt(m),pt(Ce),nn(a=>{const s=new Map(a),u=s.get("component");return u&&s.set("component",{...u,settings:{color:m,size:Ce}}),s}),An(!1),fi(!0),xn(!0)}}),c.jsx("span",{children:"Top"})]}),c.jsxs("label",{className:"radio-label",children:[c.jsx("input",{type:"radio",name:"componentToolLayer",checked:$e==="bottom",onClick:()=>{Ma("bottom"),Bt("bottom"),dt(P),pt(me),nn(a=>{const s=new Map(a),u=s.get("component");return u&&s.set("component",{...u,settings:{color:P,size:me}}),s}),An(!1),Ao(!0),xn(!0)}}),c.jsx("span",{children:"Bottom"})]})]}),C==="component"&&Ro&&c.jsxs("div",{ref:gi,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"400px",overflowY:"auto",minWidth:"200px"},children:[c.jsx("div",{style:{marginBottom:"6px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Component Type:"}),Object.entries(ef).map(([a,s])=>c.jsxs("button",{onClick:u=>{u.preventDefault(),u.stopPropagation(),yi(a),xn(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px",marginBottom:"2px",background:On===a?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",color:"#333"},children:[s.prefix.join(", ")," - ",a," (",s.defaultPins," pins)"]},a)),c.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),xn(!1),fe("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),c.jsxs("div",{style:{position:"absolute",top:6,left:56,bottom:6,width:168,padding:8,display:"flex",flexDirection:"column",gap:4,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[c.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),c.jsxs("div",{onClick:()=>Bt("top"),title:"Top layer",style:{cursor:"pointer",padding:4,borderRadius:6,border:Ge==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[c.jsx("div",{style:{fontSize:12,color:"#444",fontWeight:600},children:"Top Image"}),c.jsx("label",{className:"radio-label",style:{margin:0},children:c.jsx("input",{type:"checkbox",checked:Yi,onChange:a=>fi(a.target.checked)})})]}),c.jsx("canvas",{ref:ks,width:100,height:64})]}),c.jsxs("div",{onClick:()=>Bt("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:4,borderRadius:6,border:Ge==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[c.jsx("div",{style:{fontSize:12,color:"#444",fontWeight:600},children:"Bottom Image"}),c.jsx("label",{className:"radio-label",style:{margin:0},children:c.jsx("input",{type:"checkbox",checked:di,onChange:a=>Ao(a.target.checked)})})]}),c.jsx("canvas",{ref:Ka,width:100,height:64})]}),c.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"4px 0"}}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Nn,onChange:a=>Mo(a.target.checked)}),c.jsx("span",{children:"Vias"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:za,onChange:a=>Xi(a.target.checked)}),c.jsx("span",{children:"Pads (Top)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Pa,onChange:a=>Rs(a.target.checked)}),c.jsx("span",{children:"Pads (Bottom)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:$l,onChange:a=>pi(a.target.checked)}),c.jsx("span",{children:"Traces (Top)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:jl,onChange:a=>Ds(a.target.checked)}),c.jsx("span",{children:"Traces (Bottom)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:oa,onChange:a=>Ns(a.target.checked)}),c.jsx("span",{children:"Components (Top)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Ea,onChange:a=>_s(a.target.checked)}),c.jsx("span",{children:"Components (Bottom)"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:Wa,onChange:a=>Tc(a.target.checked)}),c.jsx("span",{children:"Power"})]}),c.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[c.jsx("input",{type:"checkbox",checked:fl,onChange:a=>Gi(a.target.checked)}),c.jsx("span",{children:"Ground"})]}),c.jsxs("div",{style:{marginTop:16},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs("label",{style:{fontSize:12,color:"#333"},children:["Transparency: ",Ke,"%"]}),c.jsxs("label",{className:"radio-label",style:{margin:0},children:[c.jsx("input",{type:"checkbox",checked:$,onChange:a=>{const s=a.target.checked;s?(fi(!0),Ao(!0)):(ye(50),fe("select")),ve(s)}}),c.jsx("span",{style:{marginLeft:6,fontSize:12},children:"Cycle"})]})]}),c.jsx("input",{type:"range",min:"0",max:"100",value:Ke,onChange:a=>ye(Number(a.target.value)),onDoubleClick:()=>hl("transparency"),className:"slider",style:{width:"100%",marginTop:6}})]})]}),!D&&!b&&c.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[c.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),c.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),c.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5"},children:["Use the ",c.jsx("strong",{children:"File"})," menu to start a new project."]}),c.jsxs("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5"},children:["Use the ",c.jsx("strong",{children:"Images"})," menu to load PCB photos."]})]}),c.jsx("canvas",{ref:Xn,width:aa.width,height:aa.height,onMouseDown:Dc,onMouseMove:bi,onMouseUp:ll,onMouseLeave:ll,onWheel:pl,onDoubleClick:_o,className:`pcb-canvas ${C==="transform"?"transform-cursor":C==="draw"?"draw-cursor":C==="erase"?"erase-cursor":"default-cursor"}`,style:{...xs?{cursor:xs}:C==="pan"?{cursor:nl?"grabbing":"grab"}:{},width:`${aa.width}px`,height:`${aa.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),ze&&ze.visible&&(()=>{let a=Ve.find(u=>u.id===ze.id),s="top";return a||(a=ot.find(u=>u.id===ze.id),s="bottom"),a?(ze.layer!==s&&jn({...ze,layer:s}),c.jsxs("div",{"data-component-editor-dialog":!0,onClick:u=>{if(Tt&&Tt.componentId===a.id){const d=u.target;(d.tagName==="BUTTON"||d.tagName==="INPUT"||d.closest("button")||d.closest("input"))&&u.stopPropagation()}},style:{position:"fixed",top:wl?`${wl.y}px`:"50%",left:wl?`${wl.x}px`:"50%",transform:"translate(-50%, -50%)",background:Tt&&Tt.componentId===a.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:Ri?"grabbing":"default"},children:[c.jsxs("div",{onMouseDown:u=>{const d=u.target;d.tagName==="BUTTON"||d.tagName==="INPUT"||d.closest("button")||d.closest("input")||wl&&(Ni({x:u.clientX-wl.x,y:u.clientY-wl.y}),Ss(!0),u.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:Ri?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[c.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),c.jsx("button",{onClick:()=>{jn(null),la(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px",overflowY:"auto",flex:1,minHeight:0},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),c.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:a.componentType})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-layer-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),c.jsxs("select",{id:`component-layer-${a.id}`,name:`component-layer-${a.id}`,value:ze.layer,onChange:u=>jn({...ze,layer:u.target.value}),disabled:We,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:We?.6:1},children:[c.jsx("option",{value:"top",children:"Top"}),c.jsx("option",{value:"bottom",children:"Bottom"})]})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-designator-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Name:"}),c.jsx("input",{id:`component-designator-${a.id}`,name:`component-designator-${a.id}`,type:"text",value:ze.designator,onChange:u=>jn({...ze,designator:u.target.value}),disabled:We,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:We?.6:1},placeholder:"e.g., Op Amp OP07"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-abbreviation-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),c.jsx("input",{id:`component-abbreviation-${a.id}`,name:`component-abbreviation-${a.id}`,type:"text",maxLength:4,value:ze.abbreviation.replace(/\*/g,""),onChange:u=>{const d=u.target.value.substring(0,4).toUpperCase();jn({...ze,abbreviation:d})},onBlur:u=>{const d=u.target.value.substring(0,4).toUpperCase();jn({...ze,abbreviation:d})},disabled:We,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:We?.6:1},placeholder:"e.g., U2, R7, C1"})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-x-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),c.jsx("input",{id:`component-x-${a.id}`,name:`component-x-${a.id}`,type:"number",value:ze.x.toFixed(2),onChange:u=>{const d=parseFloat(u.target.value)||0;jn({...ze,x:d})},disabled:We,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:We?.6:1}})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-y-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),c.jsx("input",{id:`component-y-${a.id}`,name:`component-y-${a.id}`,type:"number",value:ze.y.toFixed(2),onChange:u=>{const d=parseFloat(u.target.value)||0;jn({...ze,y:d})},disabled:We,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:We?.6:1}})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-manufacturer-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),c.jsx("input",{id:`component-manufacturer-${a.id}`,name:`component-manufacturer-${a.id}`,type:"text",value:ze.manufacturer,onChange:u=>jn({...ze,manufacturer:u.target.value}),disabled:We,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:We?.6:1}})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-partnumber-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),c.jsx("input",{id:`component-partnumber-${a.id}`,name:`component-partnumber-${a.id}`,type:"text",value:ze.partNumber,onChange:u=>jn({...ze,partNumber:u.target.value}),disabled:We,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:We?.6:1}})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("label",{htmlFor:`component-pincount-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),c.jsx("input",{id:`component-pincount-${a.id}`,name:`component-pincount-${a.id}`,type:"number",min:"1",value:ze.pinCount,onChange:u=>{const d=Math.max(1,parseInt(u.target.value)||1);jn({...ze,pinCount:d})},onBlur:u=>{if(We){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const d=Math.max(1,parseInt(u.target.value)||1),y=(ze.layer==="top"?Ve:ot).find(f=>f.id===ze.id);if(y&&d!==y.pinCount){const f=y.pinConnections||[],h=new Array(d).fill("").map((x,R)=>R<f.length?f[R]:""),S={...y,pinCount:d,pinConnections:h};ze.layer==="top"?At(x=>x.map(R=>R.id===ze.id?S:R)):En(x=>x.map(R=>R.id===ze.id?S:R)),jn({...ze,pinCount:d})}},disabled:We,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:We?.6:1}})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),Tt&&Tt.componentId===a.id&&c.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"9px",color:"#856404"},children:["Pin ",Tt.pinIndex+1," selected. Click on a via or pad to connect."]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px",padding:"1px"},children:Array.from({length:ze.pinCount},(u,d)=>{const y=(ze.layer==="top"?Ve:ot).find(S=>S.id===ze.id),f=y?.pinConnections&&y.pinConnections.length>d?y.pinConnections[d]:"",h=Tt&&Tt.componentId===a.id&&Tt.pinIndex===d;return Tt&&Tt.componentId===a.id&&console.log(`Component Editor Pin ${d+1}: pinConnection="${f}", comp.pinConnections=`,y?.pinConnections),c.jsxs("label",{htmlFor:`pin-radio-${a.id}-${d}`,style:{display:"flex",alignItems:"center",gap:"4px",padding:"2px 4px",cursor:"pointer",fontSize:"9px",border:h?"1px solid #0b5fff":f?"1px solid #28a745":"1px solid #ddd",borderRadius:2,background:h?"#e6f0ff":f?"#d4edda":"#fff"},title:f?`Connected to: ${f}`:"Select this pin, then click on a via or pad to connect",children:[c.jsx("input",{id:`pin-radio-${a.id}-${d}`,name:`pin-radio-${a.id}`,type:"radio",checked:!!h,onChange:()=>{if(We){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}la(h?null:{componentId:a.id,pinIndex:d})},disabled:We,style:{margin:0,cursor:We?"not-allowed":"pointer",opacity:We?.6:1}}),c.jsxs("span",{style:{color:"#333",fontWeight:h?600:400},children:["Pin ",d+1]}),f&&c.jsx("span",{style:{fontSize:"8px",color:"#28a745",fontWeight:600,marginLeft:"auto"},children:f})]},d)})})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[c.jsx("button",{onClick:()=>{jn(null),la(null)},style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),c.jsx("button",{onClick:()=>{if(We){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const u=f=>{const h={...f};if(h.designator=ze.designator,h.x=ze.x,h.y=ze.y,h.layer=ze.layer,h.abbreviation=ze.abbreviation.trim()||ys(f.componentType),"manufacturer"in h&&(h.manufacturer=ze.manufacturer),"partNumber"in h&&(h.partNumber=ze.partNumber),ze.pinCount!==f.pinCount){h.pinCount=ze.pinCount;const S=f.pinConnections||[];h.pinConnections=new Array(ze.pinCount).fill("").map((x,R)=>R<S.length?S[R]:"")}else h.pinConnections=f.pinConnections||[];return h},d=Ve.find(f=>f.id===ze.id),g=ot.find(f=>f.id===ze.id),y=d||g;if(y){const f=u(y),h=y.layer,S=ze.layer;h!==S?h==="top"?(At(x=>x.filter(R=>R.id!==ze.id)),En(x=>[...x,f])):(En(x=>x.filter(R=>R.id!==ze.id)),At(x=>[...x,f])):S==="top"?At(x=>x.map(R=>R.id===ze.id?f:R)):En(x=>x.map(R=>R.id===ze.id?f:R))}else if(console.warn(`Component ${ze.id} not found in either layer array`),ze.layer==="top"){const f=ot.find(h=>h.id===ze.id);if(f){const h=u(f);En(S=>S.filter(x=>x.id!==ze.id)),At(S=>[...S,h])}}else{const f=Ve.find(h=>h.id===ze.id);if(f){const h=u(f);At(S=>S.filter(x=>x.id!==ze.id)),En(S=>[...S,h])}}jn(null),la(null)},disabled:We,style:{padding:"2px 5px",background:We?"#f5f5f5":"#0b5fff",color:We?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:We?"not-allowed":"pointer",fontSize:"10px",opacity:We?.6:1},children:"Save"})]})]})):null})(),tl&&tl.visible&&(()=>{if(!Ye.find(u=>u.id===tl.id))return null;const s=St.find(u=>u.id===tl.powerBusId);return c.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[c.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),c.jsx("button",{onClick:()=>ai(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),c.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:s?`${s.name} (${s.voltage})`:"Unknown"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`power-layer-${tl.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),c.jsxs("select",{id:`power-layer-${tl.id}`,name:`power-layer-${tl.id}`,value:tl.layer,onChange:u=>ai({...tl,layer:u.target.value}),disabled:Vt,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:Vt?.6:1},children:[c.jsx("option",{value:"top",children:"Top"}),c.jsx("option",{value:"bottom",children:"Bottom"})]})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),c.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:tl.x.toFixed(2)})]}),c.jsxs("div",{children:[c.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),c.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:tl.y.toFixed(2)})]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[c.jsx("button",{onClick:()=>ai(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),c.jsx("button",{onClick:()=>{Vt||(Vn(u=>u.map(d=>d.id===tl.id?{...d,layer:tl.layer}:d)),ai(null))},disabled:Vt,style:{padding:"2px 5px",background:Vt?"#f5f5f5":"#0b5fff",color:Vt?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Vt?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!D&&!b&&c.jsx("div",{className:"placeholder"}),c.jsx("div",{ref:mo,className:"scrollbar-horizontal",onScroll:a=>{if(Zn.current)return;const s=a.currentTarget,u=vo.current;el(d=>({x:-s.scrollLeft-u,y:d.y}))},"aria-label":"Horizontal pan",children:c.jsx("div",{className:"scrollbar-horizontal-content",ref:_i})}),c.jsx("div",{ref:Tl,className:"scrollbar-vertical",onScroll:a=>{if(Zn.current)return;const s=a.currentTarget,u=ba.current;el(d=>({x:d.x,y:-s.scrollTop-u}))},"aria-label":"Vertical pan",children:c.jsx("div",{className:"scrollbar-vertical-content",ref:Oi})})]}),zc&&c.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"2px solid #333",borderRadius:8,padding:"20px",zIndex:1e3,minWidth:"500px",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),c.jsx("button",{onClick:()=>Vi(!1),style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666"},children:""})]}),c.jsx("div",{style:{marginBottom:"16px"},children:[...St].sort((a,s)=>{const u=y=>{const f=y.match(/([+-]?)(\d+\.?\d*)/);if(f){const h=f[1]||"+",S=parseFloat(f[2]);return{absValue:Math.abs(S),isNegative:h==="-",original:y}}return{absValue:1/0,isNegative:!1,original:y}},d=u(a.voltage),g=u(s.voltage);return d.absValue!==g.absValue?d.absValue-g.absValue:d.isNegative!==g.isNegative?d.isNegative?-1:1:0}).map(a=>{const s=St.findIndex(u=>u.id===a.id);return c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",marginBottom:"8px",background:"#f5f5f5",borderRadius:6,border:"1px solid #ddd"},children:[c.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:a.color,border:"2px solid #333"}}),c.jsxs("div",{style:{flex:1},children:[c.jsx("input",{type:"text",value:a.name,onChange:u=>{const d=[...St];d[s]={...a,name:u.target.value},ja(d)},placeholder:"Name",style:{width:"100%",padding:"4px 8px",marginBottom:"4px",border:"1px solid #ccc",borderRadius:4,fontSize:"13px"}}),c.jsx("input",{type:"text",value:a.voltage,onChange:u=>{const d=[...St];d[s]={...a,voltage:u.target.value},ja(d)},placeholder:"Voltage (e.g., +5VDC, +3.3VDC, -5VDC)",style:{width:"100%",padding:"4px 8px",border:"1px solid #ccc",borderRadius:4,fontSize:"13px"}})]}),c.jsx("input",{type:"color",value:a.color,onChange:u=>{const d=[...St];d[s]={...a,color:u.target.value},ja(d)},style:{width:"40px",height:"40px",border:"1px solid #ccc",borderRadius:4,cursor:"pointer"}}),c.jsx("button",{onClick:()=>{const u=Ye.filter(d=>d.powerBusId===a.id);if(u.length>0){alert(`Cannot delete: ${u.length} power node(s) are using this bus. Remove or reassign them first.`);return}ja(d=>d.filter(g=>g.id!==a.id))},style:{padding:"6px 12px",background:"#ff4444",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Delete"})]},a.id)})}),c.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0VDC",color:"#ff0000"};ja(s=>[...s,a])},style:{width:"100%",padding:"10px",background:"#4CAF50",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"+ Add Power Bus"}),c.jsx("button",{onClick:()=>Vi(!1),style:{width:"100%",padding:"10px",background:"#666",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Close"})]}),c.jsx("input",{ref:Va,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const s=a.target.files?.[0];s&&$i(s,"top"),a.target.value=""}}),c.jsx("input",{ref:Ga,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const s=a.target.files?.[0];s&&$i(s,"bottom"),a.target.value=""}}),c.jsx("input",{ref:Cs,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const s=a.target.files?.[0];if(s)try{ul(s.name);const u=await s.text(),d=JSON.parse(u);await Na(d);let g;d.projectInfo?.name?g=d.projectInfo.name:(g=s.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Pn(g),localStorage.setItem("pcb_project_name",g)),mn||(Pn(g),localStorage.setItem("pcb_project_name",g)),setTimeout(()=>{d.autoSave?.enabled===!0||wo({visible:!0,source:"open"})},100)}catch(u){console.error("Failed to open project",u),alert("Failed to open project file. See console for details.")}a.target.value=""}}),ws.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"20px",zIndex:1e4,pointerEvents:"none"},children:c.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:8,padding:"20px",minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",position:"relative",pointerEvents:"auto",border:"1px solid #ddd"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[c.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#222"},children:"Detailed Information"}),c.jsx("button",{onClick:()=>Ts({visible:!1,text:""}),style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:0,width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),c.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const a=De.filter(y=>Ee.has(y.id)).length,s=[...Ve,...ot].filter(y=>qe.has(y.id)).length,u=Ye.filter(y=>Fe.has(y.id)).length,d=yt.filter(y=>He.has(y.id)).length,g=a+s+u+d;return g>0?c.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#e8e8e8",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:"#333",marginBottom:"8px"},children:[g," Object",g!==1?"s":""," Selected"]}):null})(),qe.size>0&&(()=>{const a=De.some(s=>Ee.has(s.id)&&(s.type==="via"||s.type==="pad"));return[...Ve,...ot].filter(s=>qe.has(s.id)).map(s=>c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:s.componentType})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[c.jsxs("div",{children:["Layer: ",s.layer]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[c.jsxs("span",{children:["Designator: ",s.designator||"(empty)"]}),a&&c.jsx("button",{onClick:()=>{const u=[...Ve,...ot].filter(R=>qe.has(R.id)&&R.componentType===s.componentType),d=u.length,g=De.filter(R=>Ee.has(R.id)&&R.type==="pad"&&R.points.length>0&&R.points[0].id!==void 0).map(R=>({stroke:R,nodeId:R.points[0].id})).sort((R,H)=>R.nodeId-H.nodeId),y=g.length>0?g:De.filter(R=>Ee.has(R.id)&&R.type==="via"&&R.points.length>0&&R.points[0].id!==void 0).map(R=>({stroke:R,nodeId:R.points[0].id})).sort((R,H)=>R.nodeId-H.nodeId),f=y.length;if(f===0){console.warn("No vias or pads with Node IDs found in selection");return}const h=Math.floor(f/d);if(h===0){console.warn(`Not enough ${g.length>0?"pads":"vias"} (${f}) for ${d} components`);return}[...u].sort((R,H)=>R.id.localeCompare(H.id)).forEach((R,H)=>{const le=H*h,G=le+h,V=y.slice(le,G).map(U=>U.nodeId.toString());R.layer==="top"?At(U=>U.map(te=>te.id===R.id?{...te,pinCount:h,pinConnections:V}:te)):En(U=>U.map(te=>te.id===R.id?{...te,pinCount:h,pinConnections:V}:te))});const x=g.length>0?"pads":"vias";console.log(`Connected ${d} components of type ${s.componentType} to ${f} ${x} (${h} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),c.jsxs("div",{children:["Abbreviation: ",s.abbreviation||"(empty)"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:s.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:s.color})]}),c.jsxs("div",{children:["Size: ",s.size]}),c.jsxs("div",{children:["Pin Count: ",s.pinCount]}),s.pinConnections&&s.pinConnections.length>0&&c.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[c.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),c.jsx("tbody",{children:s.pinConnections.map((u,d)=>c.jsxs("tr",{style:{backgroundColor:d%2===0?"#fff":"#f9f9f9"},children:[c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:d+1}),c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:u||"(not connected)"})]},d))})]})]}),"manufacturer"in s&&s.manufacturer&&c.jsxs("div",{children:["Manufacturer: ",s.manufacturer]}),"partNumber"in s&&s.partNumber&&c.jsxs("div",{children:["Part Number: ",s.partNumber]}),c.jsxs("div",{children:["Position: x=",s.x.toFixed(2),", y=",s.y.toFixed(2)]})]})]},s.id))})(),Ee.size>0&&De.filter(a=>Ee.has(a.id)&&a.type==="via"&&a.points.length>0).map(a=>{const s=a.points[0],u=a.viaType||(s.id!==void 0?Al(s.id,St):"Via (Signal)");return c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:u})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[s.id&&c.jsxs("div",{children:["Node ID: ",s.id]}),c.jsx("div",{children:"Layer: Top and Bottom"}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]}),c.jsxs("div",{children:["Position: x=",s.x.toFixed(2),", y=",s.y.toFixed(2)]})]})]},a.id)}),Ee.size>0&&De.filter(a=>Ee.has(a.id)&&a.type==="pad"&&a.points.length>0).map(a=>{const s=a.points[0],u=a.padType||(s.id!==void 0?Aa(s.id,St):"Pad (Signal)");return c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:u})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[s.id&&c.jsxs("div",{children:["Node ID: ",s.id]}),c.jsxs("div",{children:["Layer: ",a.layer]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]}),c.jsxs("div",{children:["Position: x=",s.x.toFixed(2),", y=",s.y.toFixed(2)]})]})]},a.id)}),Ee.size>0&&De.filter(a=>Ee.has(a.id)&&a.type==="trace").map(a=>c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||"unknown"})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[a.points.length>0&&c.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[c.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",a.points.length]}),c.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[c.jsx("thead",{children:c.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),c.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),c.jsx("tbody",{children:a.points.map((s,u)=>c.jsxs("tr",{style:{backgroundColor:u%2===0?"#fff":"#f9f9f9"},children:[c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:u}),c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:s.x.toFixed(2)}),c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:s.y.toFixed(2)}),c.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:s.id||"(none)"})]},u))})]})]}),c.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",a.layer]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]})]})]},a.id)),Fe.size>0&&Ye.filter(a=>Fe.has(a.id)).map(a=>{const s=St.find(u=>u.id===a.powerBusId);return c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||(s?`${s.name} Power Node`:"Power Node")})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[c.jsxs("div",{children:["Node ID: ",a.pointId||"(not assigned)"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]}),c.jsxs("div",{children:["Layer: ",a.layer]}),c.jsxs("div",{children:["Power Bus: ",s?.name||a.powerBusId||"(unknown)"]}),c.jsxs("div",{children:["Position: x=",a.x.toFixed(2),", y=",a.y.toFixed(2)]})]})]},a.id)}),He.size>0&&yt.filter(a=>He.has(a.id)).map(a=>c.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[c.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[c.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),c.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||"Ground Node"})]}),c.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[c.jsxs("div",{children:["Node ID: ",a.pointId||"(not assigned)"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[c.jsx("span",{children:"Color:"}),c.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),c.jsx("span",{children:a.color})]}),c.jsxs("div",{children:["Size: ",a.size]}),c.jsxs("div",{children:["Position: x=",a.x.toFixed(2),", y=",a.y.toFixed(2)]})]})]},a.id))]})]})}),Es.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&Ji()},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),c.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:Ji,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:on,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),c.jsx("button",{ref:Sc,onClick:Gs,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),Gt.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&dn()},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),c.jsx("input",{ref:Cc,type:"text",value:Gt.projectName,onChange:a=>{si(s=>({...s,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Ra()):a.key==="Escape"&&(a.preventDefault(),dn())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),Gt.projectName&&(()=>{const a=Gt.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const s=[...new Set(a)];return c.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",s.map(u=>`"${u}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),c.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[c.jsx("input",{type:"text",value:Gt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Gt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),c.jsx("button",{onClick:Wi,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Gt.projectName&&Gt.locationPath&&c.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[c.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),c.jsxs("div",{style:{color:"#4CAF50"},children:[Gt.locationPath,"/",Gt.projectName,"/project.json"]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:dn,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:Ra,disabled:!Gt.projectName.trim()||!Gt.locationHandle,style:{padding:"8px 16px",background:!Gt.projectName.trim()||!Gt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Gt.projectName.trim()||!Gt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Gt.projectName.trim()||!Gt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Gt.projectName.trim()||!Gt.locationHandle?.6:1},children:"Create"})]})]})}),It.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Vs()},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),c.jsx("input",{ref:Ui,type:"text",value:It.filename,onChange:a=>{ci(s=>({...s,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Nc()):a.key==="Escape"&&(a.preventDefault(),Vs())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),c.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[c.jsx("input",{type:"text",value:It.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:It.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),c.jsx("button",{onClick:Rc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),It.filename&&It.locationPath&&c.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[c.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),c.jsxs("div",{style:{color:"#4CAF50"},children:[It.locationPath,"/",It.filename.endsWith(".json")?It.filename:`${It.filename}.json`]})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:Vs,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:Nc,disabled:!It.filename.trim()||!It.locationHandle,style:{padding:"8px 16px",background:!It.filename.trim()||!It.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!It.filename.trim()||!It.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!It.filename.trim()||!It.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!It.filename.trim()||!It.locationHandle?.6:1},children:"Save"})]})]})}),zs.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&To({visible:!1,title:"",message:""})},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[c.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),c.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:zs.title})]}),c.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:zs.message}),c.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:c.jsx("button",{onClick:()=>To({visible:!1,title:"",message:""}),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}),zl.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Ca({visible:!1,size:6})},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),c.jsx("input",{ref:Co,type:"number",min:"1",max:"99",value:zl.size,onChange:a=>{const s=parseInt(a.target.value)||1,u=Math.max(1,Math.min(99,s));Ca(d=>({...d,size:u}))},onKeyDown:a=>{if(a.key==="Enter"?Qi():a.key==="Escape"&&Ca({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const s=zl.size.toString();s.length>=2&&Co.current?.selectionStart===Co.current?.selectionEnd&&Co.current?.selectionStart===s.length&&a.preventDefault()}},onInput:a=>{const s=a.target,u=s.value;if(u.length>2){s.value=u.slice(0,2);const d=parseInt(s.value)||1;Ca(g=>({...g,size:Math.max(1,Math.min(99,d))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),c.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(zl.size)?zl.size:"",onChange:a=>{const s=parseInt(a.target.value);!isNaN(s)&&s>0&&Ca(u=>({...u,size:s}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[c.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>c.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:()=>Ca({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:Qi,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),$a.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&cl({visible:!1,interval:5})},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),c.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),c.jsxs("select",{value:$a.interval===null?"disable":($a.interval||5).toString(),onChange:a=>{const s=a.target.value;if(s==="disable")cl({visible:!0,interval:null});else{const u=parseFloat(s);!isNaN(u)&&u>0&&cl({visible:!0,interval:u})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[c.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),c.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),c.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),c.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),c.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),c.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:()=>cl({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),c.jsx("button",{onClick:Mn,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Bi.visible&&c.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&Hs()},children:c.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[c.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),c.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),c.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[c.jsx("button",{onClick:Hs,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),c.jsx("button",{onClick:Ls,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Enable Auto Save"})]})]})})]})]})}z0.createRoot(document.getElementById("root")).render(c.jsx(w.StrictMode,{children:c.jsx(Q0,{})}));
